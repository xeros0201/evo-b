"use strict";(()=>{var o,W,F,E,v,a,G={350994:(o,W,F)=>{F.d(W,{A:()=>E});const E={flapperButton:"flapperButton--8fae9",isClassicView:"isClassicView--a29d3",buttonSVG:"buttonSVG--77f5e",glowing:"glowing--de0d9",flashing:"flashing--7817c",flashingKeyframes:"flashingKeyframes--9194a",enabled:"enabled--4bfa4",pulseKeyframes:"pulseKeyframes--ac9ed",overlay:"overlay--13528",left:"left--4f0a4",top:"top--45cf0",right:"right--7be6b",glowingAppearKeyframes:"glowingAppearKeyframes--8aa5a",hideKeyframes:"hideKeyframes--4bbd3"}},337006:(o,W,F)=>{F.d(W,{A:()=>E});const E={centerSymbol:"centerSymbol--4065e",isCrazyTime:"isCrazyTime--9f1ab",isLottoGame:"isLottoGame--70b16",totalWinnings:"totalWinnings--762ae",multiplier:"multiplier--e1de1",backgroundGradient:"backgroundGradient--7a806",winBase:"winBase--9f996",lottoBall:"lottoBall--7f49d",container:"container--a5838",portrait:"portrait--19ac7",tablet:"tablet--500e1",show:"show--6721f",totalWinners:"totalWinners--24930"}},234477:(o,W,F)=>{F.d(W,{A:()=>E});const E={overlayStatus:"overlayStatus--ad1a9",hidden:"hidden--5fe23",gradient:"gradient--957d4",phone:"phone--a073c"}},267913:(o,W,F)=>{var E=F(228651),v=F(926601),a=v(E("String.prototype.indexOf"));o.exports=function(o,W){var F=E(o,!!W);return"function"==typeof F&&a(o,".prototype.")>-1?v(F):F}},926601:(o,W,F)=>{var E=F(605049),v=F(228651),a=F(486255),G=F(96785),L=v("%Function.prototype.apply%"),U=v("%Function.prototype.call%"),I=v("%Reflect.apply%",!0)||E.call(U,L),l=F(956649),h=v("%Math.max%");o.exports=function(o){if("function"!=typeof o)throw new G("a function is required");var W=I(E,U,arguments);return a(W,1+h(0,o.length-(arguments.length-1)),!0)};var p=function(){return I(E,L,arguments)};l?l(o.exports,"apply",{value:p}):o.exports.apply=p},589295:(o,W,F)=>{var E=F(956649),v=F(657770),a=F(96785),G=F(668109);o.exports=function(o,W,F){if(!o||"object"!=typeof o&&"function"!=typeof o)throw new a("`obj` must be an object or a function`");if("string"!=typeof W&&"symbol"!=typeof W)throw new a("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new a("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new a("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new a("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new a("`loose`, if provided, must be a boolean");var L=arguments.length>3?arguments[3]:null,U=arguments.length>4?arguments[4]:null,I=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],h=!!G&&G(o,W);if(E)E(o,W,{configurable:null===I&&h?h.configurable:!I,enumerable:null===L&&h?h.enumerable:!L,value:F,writable:null===U&&h?h.writable:!U});else{if(!l&&(L||U||I))throw new v("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");o[W]=F}}},827700:o=>{function W(o,W,E){E=E||2;var a,G,L,U,h,p,f,A=W&&W.length,k=A?W[0]*E:o.length,Z=F(o,0,k,E,!0),P=[];if(!Z||Z.next===Z.prev)return P;if(A&&(Z=function(o,W,E,v){var a,G,L,U=[];for(a=0,G=W.length;a<G;a++)(L=F(o,W[a]*v,a<G-1?W[a+1]*v:o.length,v,!1))===L.next&&(L.steiner=!0),U.push(g(L));for(U.sort(I),a=0;a<U.length;a++)E=l(U[a],E);return E}(o,W,Z,E)),o.length>80*E){a=L=o[0],G=U=o[1];for(var y=E;y<k;y+=E)(h=o[y])<a&&(a=h),(p=o[y+1])<G&&(G=p),h>L&&(L=h),p>U&&(U=p);f=0!==(f=Math.max(L-a,U-G))?32767/f:0}return v(Z,P,E,a,G,f,0),P}function F(o,W,F,E,v){var a,G;if(v===r(o,W,F,E)>0)for(a=W;a<F;a+=E)G=e(a,o[a],o[a+1],G);else for(a=F-E;a>=W;a-=E)G=e(a,o[a],o[a+1],G);return G&&Z(G,G.next)&&(t(G),G=G.next),G}function E(o,W){if(!o)return o;W||(W=o);var F,E=o;do{if(F=!1,E.steiner||!Z(E,E.next)&&0!==k(E.prev,E,E.next))E=E.next;else{if(t(E),(E=W=E.prev)===E.next)break;F=!0}}while(F||E!==W);return W}function v(o,W,F,I,l,h,g){if(o){!g&&h&&function(o,W,F,E){var v=o;do{0===v.z&&(v.z=p(v.x,v.y,W,F,E)),v.prevZ=v.prev,v.nextZ=v.next,v=v.next}while(v!==o);v.prevZ.nextZ=null,v.prevZ=null,function(o){var W,F,E,v,a,G,L,U,I=1;do{for(F=o,o=null,a=null,G=0;F;){for(G++,E=F,L=0,W=0;W<I&&(L++,E=E.nextZ);W++);for(U=I;L>0||U>0&&E;)0!==L&&(0===U||!E||F.z<=E.z)?(v=F,F=F.nextZ,L--):(v=E,E=E.nextZ,U--),a?a.nextZ=v:o=v,v.prevZ=a,a=v;F=E}a.nextZ=null,I*=2}while(G>1)}(v)}(o,I,l,h);for(var f,A,k=o;o.prev!==o.next;)if(f=o.prev,A=o.next,h?G(o,I,l,h):a(o))W.push(f.i/F|0),W.push(o.i/F|0),W.push(A.i/F|0),t(o),o=A.next,k=A.next;else if((o=A)===k){g?1===g?v(o=L(E(o),W,F),W,F,I,l,h,2):2===g&&U(o,W,F,I,l,h):v(E(o),W,F,I,l,h,1);break}}}function a(o){var W=o.prev,F=o,E=o.next;if(k(W,F,E)>=0)return!1;for(var v=W.x,a=F.x,G=E.x,L=W.y,U=F.y,I=E.y,l=v<a?v<G?v:G:a<G?a:G,h=L<U?L<I?L:I:U<I?U:I,p=v>a?v>G?v:G:a>G?a:G,g=L>U?L>I?L:I:U>I?U:I,A=E.next;A!==W;){if(A.x>=l&&A.x<=p&&A.y>=h&&A.y<=g&&f(v,L,a,U,G,I,A.x,A.y)&&k(A.prev,A,A.next)>=0)return!1;A=A.next}return!0}function G(o,W,F,E){var v=o.prev,a=o,G=o.next;if(k(v,a,G)>=0)return!1;for(var L=v.x,U=a.x,I=G.x,l=v.y,h=a.y,g=G.y,A=L<U?L<I?L:I:U<I?U:I,Z=l<h?l<g?l:g:h<g?h:g,P=L>U?L>I?L:I:U>I?U:I,y=l>h?l>g?l:g:h>g?h:g,z=p(A,Z,W,F,E),x=p(P,y,W,F,E),N=o.prevZ,e=o.nextZ;N&&N.z>=z&&e&&e.z<=x;){if(N.x>=A&&N.x<=P&&N.y>=Z&&N.y<=y&&N!==v&&N!==G&&f(L,l,U,h,I,g,N.x,N.y)&&k(N.prev,N,N.next)>=0)return!1;if(N=N.prevZ,e.x>=A&&e.x<=P&&e.y>=Z&&e.y<=y&&e!==v&&e!==G&&f(L,l,U,h,I,g,e.x,e.y)&&k(e.prev,e,e.next)>=0)return!1;e=e.nextZ}for(;N&&N.z>=z;){if(N.x>=A&&N.x<=P&&N.y>=Z&&N.y<=y&&N!==v&&N!==G&&f(L,l,U,h,I,g,N.x,N.y)&&k(N.prev,N,N.next)>=0)return!1;N=N.prevZ}for(;e&&e.z<=x;){if(e.x>=A&&e.x<=P&&e.y>=Z&&e.y<=y&&e!==v&&e!==G&&f(L,l,U,h,I,g,e.x,e.y)&&k(e.prev,e,e.next)>=0)return!1;e=e.nextZ}return!0}function L(o,W,F){var v=o;do{var a=v.prev,G=v.next.next;!Z(a,G)&&P(a,v,v.next,G)&&x(a,G)&&x(G,a)&&(W.push(a.i/F|0),W.push(v.i/F|0),W.push(G.i/F|0),t(v),t(v.next),v=o=G),v=v.next}while(v!==o);return E(v)}function U(o,W,F,a,G,L){var U=o;do{for(var I=U.next.next;I!==U.prev;){if(U.i!==I.i&&A(U,I)){var l=N(U,I);return U=E(U,U.next),l=E(l,l.next),v(U,W,F,a,G,L,0),void v(l,W,F,a,G,L,0)}I=I.next}U=U.next}while(U!==o)}function I(o,W){return o.x-W.x}function l(o,W){var F=function(o,W){var F,E=W,v=o.x,a=o.y,G=-1/0;do{if(a<=E.y&&a>=E.next.y&&E.next.y!==E.y){var L=E.x+(a-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(L<=v&&L>G&&(G=L,F=E.x<E.next.x?E:E.next,L===v))return F}E=E.next}while(E!==W);if(!F)return null;var U,I=F,l=F.x,p=F.y,g=1/0;E=F;do{v>=E.x&&E.x>=l&&v!==E.x&&f(a<p?v:G,a,l,p,a<p?G:v,a,E.x,E.y)&&(U=Math.abs(a-E.y)/(v-E.x),x(E,o)&&(U<g||U===g&&(E.x>F.x||E.x===F.x&&h(F,E)))&&(F=E,g=U)),E=E.next}while(E!==I);return F}(o,W);if(!F)return W;var v=N(F,o);return E(v,v.next),E(F,F.next)}function h(o,W){return k(o.prev,o,W.prev)<0&&k(W.next,o,o.next)<0}function p(o,W,F,E,v){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-F)*v|0)|o<<8))|o<<4))|o<<2))|o<<1))|(W=1431655765&((W=858993459&((W=252645135&((W=16711935&((W=(W-E)*v|0)|W<<8))|W<<4))|W<<2))|W<<1))<<1}function g(o){var W=o,F=o;do{(W.x<F.x||W.x===F.x&&W.y<F.y)&&(F=W),W=W.next}while(W!==o);return F}function f(o,W,F,E,v,a,G,L){return(v-G)*(W-L)>=(o-G)*(a-L)&&(o-G)*(E-L)>=(F-G)*(W-L)&&(F-G)*(a-L)>=(v-G)*(E-L)}function A(o,W){return o.next.i!==W.i&&o.prev.i!==W.i&&!function(o,W){var F=o;do{if(F.i!==o.i&&F.next.i!==o.i&&F.i!==W.i&&F.next.i!==W.i&&P(F,F.next,o,W))return!0;F=F.next}while(F!==o);return!1}(o,W)&&(x(o,W)&&x(W,o)&&function(o,W){var F=o,E=!1,v=(o.x+W.x)/2,a=(o.y+W.y)/2;do{F.y>a!=F.next.y>a&&F.next.y!==F.y&&v<(F.next.x-F.x)*(a-F.y)/(F.next.y-F.y)+F.x&&(E=!E),F=F.next}while(F!==o);return E}(o,W)&&(k(o.prev,o,W.prev)||k(o,W.prev,W))||Z(o,W)&&k(o.prev,o,o.next)>0&&k(W.prev,W,W.next)>0)}function k(o,W,F){return(W.y-o.y)*(F.x-W.x)-(W.x-o.x)*(F.y-W.y)}function Z(o,W){return o.x===W.x&&o.y===W.y}function P(o,W,F,E){var v=z(k(o,W,F)),a=z(k(o,W,E)),G=z(k(F,E,o)),L=z(k(F,E,W));return v!==a&&G!==L||!(0!==v||!y(o,F,W))||!(0!==a||!y(o,E,W))||!(0!==G||!y(F,o,E))||!(0!==L||!y(F,W,E))}function y(o,W,F){return W.x<=Math.max(o.x,F.x)&&W.x>=Math.min(o.x,F.x)&&W.y<=Math.max(o.y,F.y)&&W.y>=Math.min(o.y,F.y)}function z(o){return o>0?1:o<0?-1:0}function x(o,W){return k(o.prev,o,o.next)<0?k(o,W,o.next)>=0&&k(o,o.prev,W)>=0:k(o,W,o.prev)<0||k(o,o.next,W)<0}function N(o,W){var F=new m(o.i,o.x,o.y),E=new m(W.i,W.x,W.y),v=o.next,a=W.prev;return o.next=W,W.prev=o,F.next=v,v.prev=F,E.next=F,F.prev=E,a.next=E,E.prev=a,E}function e(o,W,F,E){var v=new m(o,W,F);return E?(v.next=E.next,v.prev=E,E.next.prev=v,E.next=v):(v.prev=v,v.next=v),v}function t(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function m(o,W,F){this.i=o,this.x=W,this.y=F,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function r(o,W,F,E){for(var v=0,a=W,G=F-E;a<F;a+=E)v+=(o[G]-o[a])*(o[a+1]+o[G+1]),G=a;return v}o.exports=W,o.exports.default=W,W.deviation=function(o,W,F,E){var v=W&&W.length,a=v?W[0]*F:o.length,G=Math.abs(r(o,0,a,F));if(v)for(var L=0,U=W.length;L<U;L++){var I=W[L]*F,l=L<U-1?W[L+1]*F:o.length;G-=Math.abs(r(o,I,l,F))}var h=0;for(L=0;L<E.length;L+=3){var p=E[L]*F,g=E[L+1]*F,f=E[L+2]*F;h+=Math.abs((o[p]-o[f])*(o[g+1]-o[p+1])-(o[p]-o[g])*(o[f+1]-o[p+1]))}return 0===G&&0===h?0:Math.abs((h-G)/G)},W.flatten=function(o){for(var W=o[0][0].length,F={vertices:[],holes:[],dimensions:W},E=0,v=0;v<o.length;v++){for(var a=0;a<o[v].length;a++)for(var G=0;G<W;G++)F.vertices.push(o[v][a][G]);v>0&&(E+=o[v-1].length,F.holes.push(E))}return F}},956649:(o,W,F)=>{var E=F(228651)("%Object.defineProperty%",!0)||!1;if(E)try{E({},"a",{value:1})}catch(o){E=!1}o.exports=E},729055:o=>{o.exports=EvalError},515293:o=>{o.exports=Error},218888:o=>{o.exports=RangeError},447900:o=>{o.exports=ReferenceError},657770:o=>{o.exports=SyntaxError},96785:o=>{o.exports=TypeError},254055:o=>{o.exports=URIError},686418:o=>{var W=Object.prototype.hasOwnProperty,F="~";function E(){}function v(o,W,F){this.fn=o,this.context=W,this.once=F||!1}function a(o,W,E,a,G){if("function"!=typeof E)throw new TypeError("The listener must be a function");var L=new v(E,a||o,G),U=F?F+W:W;return o._events[U]?o._events[U].fn?o._events[U]=[o._events[U],L]:o._events[U].push(L):(o._events[U]=L,o._eventsCount++),o}function G(o,W){0==--o._eventsCount?o._events=new E:delete o._events[W]}function L(){this._events=new E,this._eventsCount=0}Object.create&&(E.prototype=Object.create(null),(new E).__proto__||(F=!1)),L.prototype.eventNames=function(){var o,E,v=[];if(0===this._eventsCount)return v;for(E in o=this._events)W.call(o,E)&&v.push(F?E.slice(1):E);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(o)):v},L.prototype.listeners=function(o){var W=F?F+o:o,E=this._events[W];if(!E)return[];if(E.fn)return[E.fn];for(var v=0,a=E.length,G=new Array(a);v<a;v++)G[v]=E[v].fn;return G},L.prototype.listenerCount=function(o){var W=F?F+o:o,E=this._events[W];return E?E.fn?1:E.length:0},L.prototype.emit=function(o,W,E,v,a,G){var L=F?F+o:o;if(!this._events[L])return!1;var U,I,l=this._events[L],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(o,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,W),!0;case 3:return l.fn.call(l.context,W,E),!0;case 4:return l.fn.call(l.context,W,E,v),!0;case 5:return l.fn.call(l.context,W,E,v,a),!0;case 6:return l.fn.call(l.context,W,E,v,a,G),!0}for(I=1,U=new Array(h-1);I<h;I++)U[I-1]=arguments[I];l.fn.apply(l.context,U)}else{var p,g=l.length;for(I=0;I<g;I++)switch(l[I].once&&this.removeListener(o,l[I].fn,void 0,!0),h){case 1:l[I].fn.call(l[I].context);break;case 2:l[I].fn.call(l[I].context,W);break;case 3:l[I].fn.call(l[I].context,W,E);break;case 4:l[I].fn.call(l[I].context,W,E,v);break;default:if(!U)for(p=1,U=new Array(h-1);p<h;p++)U[p-1]=arguments[p];l[I].fn.apply(l[I].context,U)}}return!0},L.prototype.on=function(o,W,F){return a(this,o,W,F,!1)},L.prototype.once=function(o,W,F){return a(this,o,W,F,!0)},L.prototype.removeListener=function(o,W,E,v){var a=F?F+o:o;if(!this._events[a])return this;if(!W)return G(this,a),this;var L=this._events[a];if(L.fn)L.fn!==W||v&&!L.once||E&&L.context!==E||G(this,a);else{for(var U=0,I=[],l=L.length;U<l;U++)(L[U].fn!==W||v&&!L[U].once||E&&L[U].context!==E)&&I.push(L[U]);I.length?this._events[a]=1===I.length?I[0]:I:G(this,a)}return this},L.prototype.removeAllListeners=function(o){var W;return o?(W=F?F+o:o,this._events[W]&&G(this,W)):(this._events=new E,this._eventsCount=0),this},L.prototype.off=L.prototype.removeListener,L.prototype.addListener=L.prototype.on,L.prefixed=F,L.EventEmitter=L,o.exports=L},812719:o=>{var W=Object.prototype.toString,F=Math.max,E=function(o,W){for(var F=[],E=0;E<o.length;E+=1)F[E]=o[E];for(var v=0;v<W.length;v+=1)F[v+o.length]=W[v];return F};o.exports=function(o){var v=this;if("function"!=typeof v||"[object Function]"!==W.apply(v))throw new TypeError("Function.prototype.bind called on incompatible "+v);for(var a,G=function(o){for(var W=[],F=1||0,E=0;F<o.length;F+=1,E+=1)W[E]=o[F];return W}(arguments),L=F(0,v.length-G.length),U=[],I=0;I<L;I++)U[I]="$"+I;if(a=Function("binder","return function ("+function(o,W){for(var F="",E=0;E<o.length;E+=1)F+=o[E],E+1<o.length&&(F+=W);return F}(U,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof a){var W=v.apply(this,E(G,arguments));return Object(W)===W?W:this}return v.apply(o,E(G,arguments))})),v.prototype){var l=function(){};l.prototype=v.prototype,a.prototype=new l,l.prototype=null}return a}},605049:(o,W,F)=>{var E=F(812719);o.exports=Function.prototype.bind||E},228651:(o,W,F)=>{var E=F(515293),v=F(729055),a=F(218888),G=F(447900),L=F(657770),U=F(96785),I=F(254055),l=Function,h=function(o){try{return l('"use strict"; return ('+o+").constructor;")()}catch(o){}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch(o){p=null}var g=function(){throw new U},f=p?function(){try{return g}catch(o){try{return p(arguments,"callee").get}catch(o){return g}}}():g,A=F(173257)(),k=F(885726)(),Z=Object.getPrototypeOf||(k?function(o){return o.__proto__}:null),P={},y="undefined"!=typeof Uint8Array&&Z?Z(Uint8Array):void 0,z={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":A&&Z?Z([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":P,"%AsyncGenerator%":P,"%AsyncGeneratorFunction%":P,"%AsyncIteratorPrototype%":P,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?void 0:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?void 0:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":E,"%eval%":eval,"%EvalError%":v,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":P,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":A&&Z?Z(Z([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&A&&Z?Z((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":a,"%ReferenceError%":G,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&A&&Z?Z((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":A&&Z?Z(""[Symbol.iterator]()):void 0,"%Symbol%":A?Symbol:void 0,"%SyntaxError%":L,"%ThrowTypeError%":f,"%TypedArray%":y,"%TypeError%":U,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":I,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet};if(Z)try{null.error}catch(o){var x=Z(Z(o));z["%Error.prototype%"]=x}var N=function o(W){var F;if("%AsyncFunction%"===W)F=h("async function () {}");else if("%GeneratorFunction%"===W)F=h("function* () {}");else if("%AsyncGeneratorFunction%"===W)F=h("async function* () {}");else if("%AsyncGenerator%"===W){var E=o("%AsyncGeneratorFunction%");E&&(F=E.prototype)}else if("%AsyncIteratorPrototype%"===W){var v=o("%AsyncGenerator%");v&&Z&&(F=Z(v.prototype))}return z[W]=F,F},e={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},t=F(605049),m=F(255215),r=t.call(Function.call,Array.prototype.concat),B=t.call(Function.apply,Array.prototype.splice),j=t.call(Function.call,String.prototype.replace),V=t.call(Function.call,String.prototype.slice),w=t.call(Function.call,RegExp.prototype.exec),K=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,d=function(o,W){var F,E=o;if(m(e,E)&&(E="%"+(F=e[E])[0]+"%"),m(z,E)){var v=z[E];if(v===P&&(v=N(E)),void 0===v&&!W)throw new U("intrinsic "+o+" exists, but is not available. Please file an issue!");return{alias:F,name:E,value:v}}throw new L("intrinsic "+o+" does not exist!")};o.exports=function(o,W){if("string"!=typeof o||0===o.length)throw new U("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof W)throw new U('"allowMissing" argument must be a boolean');if(null===w(/^%?[^%]*%?$/,o))throw new L("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var F=function(o){var W=V(o,0,1),F=V(o,-1);if("%"===W&&"%"!==F)throw new L("invalid intrinsic syntax, expected closing `%`");if("%"===F&&"%"!==W)throw new L("invalid intrinsic syntax, expected opening `%`");var E=[];return j(o,K,(function(o,W,F,v){E[E.length]=F?j(v,T,"$1"):W||o})),E}(o),E=F.length>0?F[0]:"",v=d("%"+E+"%",W),a=v.name,G=v.value,I=!1,l=v.alias;l&&(E=l[0],B(F,r([0,1],l)));for(var h=1,g=!0;h<F.length;h+=1){var f=F[h],A=V(f,0,1),k=V(f,-1);if(('"'===A||"'"===A||"`"===A||'"'===k||"'"===k||"`"===k)&&A!==k)throw new L("property names with quotes must have matching quotes");if("constructor"!==f&&g||(I=!0),m(z,a="%"+(E+="."+f)+"%"))G=z[a];else if(null!=G){if(!(f in G)){if(!W)throw new U("base intrinsic for "+o+" exists, but the property is not available.");return}if(p&&h+1>=F.length){var Z=p(G,f);G=(g=!!Z)&&"get"in Z&&!("originalValue"in Z.get)?Z.get:G[f]}else g=m(G,f),G=G[f];g&&!I&&(z[a]=G)}}return G}},668109:(o,W,F)=>{var E=F(228651)("%Object.getOwnPropertyDescriptor%",!0);if(E)try{E([],"length")}catch(o){E=null}o.exports=E},118890:(o,W,F)=>{var E=F(956649),v=function(){return!!E};v.hasArrayLengthDefineBug=function(){if(!E)return null;try{return 1!==E([],"length",{value:1}).length}catch(o){return!0}},o.exports=v},885726:o=>{var W={__proto__:null,foo:{}},F=Object;o.exports=function(){return{__proto__:W}.foo===W.foo&&!(W instanceof F)}},173257:(o,W,F)=>{var E="undefined"!=typeof Symbol&&Symbol,v=F(112843);o.exports=function(){return"function"==typeof E&&"function"==typeof Symbol&&"symbol"==typeof E("foo")&&"symbol"==typeof Symbol("bar")&&v()}},112843:o=>{o.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var o={},W=Symbol("test"),F=Object(W);if("string"==typeof W)return!1;if("[object Symbol]"!==Object.prototype.toString.call(W))return!1;if("[object Symbol]"!==Object.prototype.toString.call(F))return!1;for(W in o[W]=42,o)return!1;if("function"==typeof Object.keys&&0!==Object.keys(o).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(o).length)return!1;var E=Object.getOwnPropertySymbols(o);if(1!==E.length||E[0]!==W)return!1;if(!Object.prototype.propertyIsEnumerable.call(o,W))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var v=Object.getOwnPropertyDescriptor(o,W);if(42!==v.value||!0!==v.enumerable)return!1}return!0}},255215:(o,W,F)=>{var E=Function.prototype.call,v=Object.prototype.hasOwnProperty,a=F(605049);o.exports=a.call(E,v)},115937:(o,W,F)=>{var E="function"==typeof Map&&Map.prototype,v=Object.getOwnPropertyDescriptor&&E?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,a=E&&v&&"function"==typeof v.get?v.get:null,G=E&&Map.prototype.forEach,L="function"==typeof Set&&Set.prototype,U=Object.getOwnPropertyDescriptor&&L?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,I=L&&U&&"function"==typeof U.get?U.get:null,l=L&&Set.prototype.forEach,h="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,p="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,g="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,A=Object.prototype.toString,k=Function.prototype.toString,Z=String.prototype.match,P=String.prototype.slice,y=String.prototype.replace,z=String.prototype.toUpperCase,x=String.prototype.toLowerCase,N=RegExp.prototype.test,e=Array.prototype.concat,t=Array.prototype.join,m=Array.prototype.slice,r=Math.floor,B="function"==typeof BigInt?BigInt.prototype.valueOf:null,j=Object.getOwnPropertySymbols,V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,w="function"==typeof Symbol&&"object"==typeof Symbol.iterator,K="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===w||"symbol")?Symbol.toStringTag:null,T=Object.prototype.propertyIsEnumerable,d=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(o){return o.__proto__}:null);function n(o,W){if(o===1/0||o===-1/0||o!=o||o&&o>-1e3&&o<1e3||N.call(/e/,W))return W;var F=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof o){var E=o<0?-r(-o):r(o);if(E!==o){var v=String(E),a=P.call(W,v.length+1);return y.call(v,F,"$&_")+"."+y.call(y.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return y.call(W,F,"$&_")}var u=F(242634),$=u.custom,Y=_($)?$:null;function Q(o,W,F){var E="double"===(F.quoteStyle||W)?'"':"'";return E+o+E}function C(o){return y.call(String(o),/"/g,"&quot;")}function q(o){return!("[object Array]"!==S(o)||K&&"object"==typeof o&&K in o)}function c(o){return!("[object RegExp]"!==S(o)||K&&"object"==typeof o&&K in o)}function _(o){if(w)return o&&"object"==typeof o&&o instanceof Symbol;if("symbol"==typeof o)return!0;if(!o||"object"!=typeof o||!V)return!1;try{return V.call(o),!0}catch(o){}return!1}o.exports=function o(W,F,E,v){var L=F||{};if(X(L,"quoteStyle")&&"single"!==L.quoteStyle&&"double"!==L.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(X(L,"maxStringLength")&&("number"==typeof L.maxStringLength?L.maxStringLength<0&&L.maxStringLength!==1/0:null!==L.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var U=!X(L,"customInspect")||L.customInspect;if("boolean"!=typeof U&&"symbol"!==U)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(X(L,"indent")&&null!==L.indent&&"\t"!==L.indent&&!(parseInt(L.indent,10)===L.indent&&L.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(X(L,"numericSeparator")&&"boolean"!=typeof L.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var A=L.numericSeparator;if(void 0===W)return"undefined";if(null===W)return"null";if("boolean"==typeof W)return W?"true":"false";if("string"==typeof W)return i(W,L);if("number"==typeof W){if(0===W)return 1/0/W>0?"0":"-0";var z=String(W);return A?n(W,z):z}if("bigint"==typeof W){var N=String(W)+"n";return A?n(W,N):N}var r=void 0===L.depth?5:L.depth;if(void 0===E&&(E=0),E>=r&&r>0&&"object"==typeof W)return q(W)?"[Array]":"[Object]";var j,$=function(o,W){var F;if("\t"===o.indent)F="\t";else{if(!("number"==typeof o.indent&&o.indent>0))return null;F=t.call(Array(o.indent+1)," ")}return{base:F,prev:t.call(Array(W+1),F)}}(L,E);if(void 0===v)v=[];else if(s(v,W)>=0)return"[Circular]";function O(W,F,a){if(F&&(v=m.call(v)).push(F),a){var G={depth:L.depth};return X(L,"quoteStyle")&&(G.quoteStyle=L.quoteStyle),o(W,G,E+1,v)}return o(W,L,E+1,v)}if("function"==typeof W&&!c(W)){var R=function(o){if(o.name)return o.name;var W=Z.call(k.call(o),/^function\s*([\w$]+)/);return W?W[1]:null}(W),oo=b(W,O);return"[Function"+(R?": "+R:" (anonymous)")+"]"+(oo.length>0?" { "+t.call(oo,", ")+" }":"")}if(_(W)){var Wo=w?y.call(String(W),/^(Symbol\(.*\))_[^)]*$/,"$1"):V.call(W);return"object"!=typeof W||w?Wo:J(Wo)}if((j=W)&&"object"==typeof j&&("undefined"!=typeof HTMLElement&&j instanceof HTMLElement||"string"==typeof j.nodeName&&"function"==typeof j.getAttribute)){for(var Fo="<"+x.call(String(W.nodeName)),Eo=W.attributes||[],vo=0;vo<Eo.length;vo++)Fo+=" "+Eo[vo].name+"="+Q(C(Eo[vo].value),"double",L);return Fo+=">",W.childNodes&&W.childNodes.length&&(Fo+="..."),Fo+"</"+x.call(String(W.nodeName))+">"}if(q(W)){if(0===W.length)return"[]";var ao=b(W,O);return $&&!function(o){for(var W=0;W<o.length;W++)if(s(o[W],"\n")>=0)return!1;return!0}(ao)?"["+H(ao,$)+"]":"[ "+t.call(ao,", ")+" ]"}if(function(o){return!("[object Error]"!==S(o)||K&&"object"==typeof o&&K in o)}(W)){var Go=b(W,O);return"cause"in Error.prototype||!("cause"in W)||T.call(W,"cause")?0===Go.length?"["+String(W)+"]":"{ ["+String(W)+"] "+t.call(Go,", ")+" }":"{ ["+String(W)+"] "+t.call(e.call("[cause]: "+O(W.cause),Go),", ")+" }"}if("object"==typeof W&&U){if(Y&&"function"==typeof W[Y]&&u)return u(W,{depth:r-E});if("symbol"!==U&&"function"==typeof W.inspect)return W.inspect()}if(function(o){if(!a||!o||"object"!=typeof o)return!1;try{a.call(o);try{I.call(o)}catch(o){return!0}return o instanceof Map}catch(o){}return!1}(W)){var Lo=[];return G&&G.call(W,(function(o,F){Lo.push(O(F,W,!0)+" => "+O(o,W))})),M("Map",a.call(W),Lo,$)}if(function(o){if(!I||!o||"object"!=typeof o)return!1;try{I.call(o);try{a.call(o)}catch(o){return!0}return o instanceof Set}catch(o){}return!1}(W)){var Uo=[];return l&&l.call(W,(function(o){Uo.push(O(o,W))})),M("Set",I.call(W),Uo,$)}if(function(o){if(!h||!o||"object"!=typeof o)return!1;try{h.call(o,h);try{p.call(o,p)}catch(o){return!0}return o instanceof WeakMap}catch(o){}return!1}(W))return D("WeakMap");if(function(o){if(!p||!o||"object"!=typeof o)return!1;try{p.call(o,p);try{h.call(o,h)}catch(o){return!0}return o instanceof WeakSet}catch(o){}return!1}(W))return D("WeakSet");if(function(o){if(!g||!o||"object"!=typeof o)return!1;try{return g.call(o),!0}catch(o){}return!1}(W))return D("WeakRef");if(function(o){return!("[object Number]"!==S(o)||K&&"object"==typeof o&&K in o)}(W))return J(O(Number(W)));if(function(o){if(!o||"object"!=typeof o||!B)return!1;try{return B.call(o),!0}catch(o){}return!1}(W))return J(O(B.call(W)));if(function(o){return!("[object Boolean]"!==S(o)||K&&"object"==typeof o&&K in o)}(W))return J(f.call(W));if(function(o){return!("[object String]"!==S(o)||K&&"object"==typeof o&&K in o)}(W))return J(O(String(W)));if("undefined"!=typeof window&&W===window)return"{ [object Window] }";if(W===window)return"{ [object globalThis] }";if(!function(o){return!("[object Date]"!==S(o)||K&&"object"==typeof o&&K in o)}(W)&&!c(W)){var Io=b(W,O),lo=d?d(W)===Object.prototype:W instanceof Object||W.constructor===Object,ho=W instanceof Object?"":"null prototype",po=!lo&&K&&Object(W)===W&&K in W?P.call(S(W),8,-1):ho?"Object":"",go=(lo||"function"!=typeof W.constructor?"":W.constructor.name?W.constructor.name+" ":"")+(po||ho?"["+t.call(e.call([],po||[],ho||[]),": ")+"] ":"");return 0===Io.length?go+"{}":$?go+"{"+H(Io,$)+"}":go+"{ "+t.call(Io,", ")+" }"}return String(W)};var O=Object.prototype.hasOwnProperty||function(o){return o in this};function X(o,W){return O.call(o,W)}function S(o){return A.call(o)}function s(o,W){if(o.indexOf)return o.indexOf(W);for(var F=0,E=o.length;F<E;F++)if(o[F]===W)return F;return-1}function i(o,W){if(o.length>W.maxStringLength){var F=o.length-W.maxStringLength,E="... "+F+" more character"+(F>1?"s":"");return i(P.call(o,0,W.maxStringLength),W)+E}return Q(y.call(y.call(o,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,R),"single",W)}function R(o){var W=o.charCodeAt(0),F={8:"b",9:"t",10:"n",12:"f",13:"r"}[W];return F?"\\"+F:"\\x"+(W<16?"0":"")+z.call(W.toString(16))}function J(o){return"Object("+o+")"}function D(o){return o+" { ? }"}function M(o,W,F,E){return o+" ("+W+") {"+(E?H(F,E):t.call(F,", "))+"}"}function H(o,W){if(0===o.length)return"";var F="\n"+W.prev+W.base;return F+t.call(o,","+F)+"\n"+W.prev}function b(o,W){var F=q(o),E=[];if(F){E.length=o.length;for(var v=0;v<o.length;v++)E[v]=X(o,v)?W(o[v],o):""}var a,G="function"==typeof j?j(o):[];if(w){a={};for(var L=0;L<G.length;L++)a["$"+G[L]]=G[L]}for(var U in o)X(o,U)&&(F&&String(Number(U))===U&&U<o.length||w&&a["$"+U]instanceof Symbol||(N.call(/[^\w$]/,U)?E.push(W(U,o)+": "+W(o[U],o)):E.push(U+": "+W(o[U],o))));if("function"==typeof j)for(var I=0;I<G.length;I++)T.call(o,G[I])&&E.push("["+W(G[I])+"]: "+W(o[G[I]],o));return E}},486255:(o,W,F)=>{var E=F(228651),v=F(589295),a=F(118890)(),G=F(668109),L=F(96785),U=E("%Math.floor%");o.exports=function(o,W){if("function"!=typeof o)throw new L("`fn` is not a function");if("number"!=typeof W||W<0||W>4294967295||U(W)!==W)throw new L("`length` must be a positive 32-bit integer");var F=arguments.length>2&&!!arguments[2],E=!0,I=!0;if("length"in o&&G){var l=G(o,"length");l&&!l.configurable&&(E=!1),l&&!l.writable&&(I=!1)}return(E||I||!F)&&(a?v(o,"length",W,!0,!0):v(o,"length",W)),o}},338402:(o,W,F)=>{var E=F(228651),v=F(267913),a=F(115937),G=F(96785),L=E("%WeakMap%",!0),U=E("%Map%",!0),I=v("WeakMap.prototype.get",!0),l=v("WeakMap.prototype.set",!0),h=v("WeakMap.prototype.has",!0),p=v("Map.prototype.get",!0),g=v("Map.prototype.set",!0),f=v("Map.prototype.has",!0),A=function(o,W){for(var F,E=o;null!==(F=E.next);E=F)if(F.key===W)return E.next=F.next,F.next=o.next,o.next=F,F};o.exports=function(){var o,W,F,E={assert:function(o){if(!E.has(o))throw new G("Side channel does not contain "+a(o))},get:function(E){if(L&&E&&("object"==typeof E||"function"==typeof E)){if(o)return I(o,E)}else if(U){if(W)return p(W,E)}else if(F)return function(o,W){var F=A(o,W);return F&&F.value}(F,E)},has:function(E){if(L&&E&&("object"==typeof E||"function"==typeof E)){if(o)return h(o,E)}else if(U){if(W)return f(W,E)}else if(F)return function(o,W){return!!A(o,W)}(F,E);return!1},set:function(E,v){L&&E&&("object"==typeof E||"function"==typeof E)?(o||(o=new L),l(o,E,v)):U?(W||(W=new U),g(W,E,v)):(F||(F={key:{},next:null}),function(o,W,F){var E=A(o,W);E?E.value=F:o.next={key:W,next:o.next,value:F}}(F,E,v))}};return E}},258055:o=>{var W=Object.prototype.hasOwnProperty,F="~";function E(){}function v(o,W,F){this.fn=o,this.context=W,this.once=F||!1}function a(o,W,E,a,G){if("function"!=typeof E)throw new TypeError("The listener must be a function");var L=new v(E,a||o,G),U=F?F+W:W;return o._events[U]?o._events[U].fn?o._events[U]=[o._events[U],L]:o._events[U].push(L):(o._events[U]=L,o._eventsCount++),o}function G(o,W){0==--o._eventsCount?o._events=new E:delete o._events[W]}function L(){this._events=new E,this._eventsCount=0}Object.create&&(E.prototype=Object.create(null),(new E).__proto__||(F=!1)),L.prototype.eventNames=function(){var o,E,v=[];if(0===this._eventsCount)return v;for(E in o=this._events)W.call(o,E)&&v.push(F?E.slice(1):E);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(o)):v},L.prototype.listeners=function(o){var W=F?F+o:o,E=this._events[W];if(!E)return[];if(E.fn)return[E.fn];for(var v=0,a=E.length,G=new Array(a);v<a;v++)G[v]=E[v].fn;return G},L.prototype.listenerCount=function(o){var W=F?F+o:o,E=this._events[W];return E?E.fn?1:E.length:0},L.prototype.emit=function(o,W,E,v,a,G){var L=F?F+o:o;if(!this._events[L])return!1;var U,I,l=this._events[L],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(o,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,W),!0;case 3:return l.fn.call(l.context,W,E),!0;case 4:return l.fn.call(l.context,W,E,v),!0;case 5:return l.fn.call(l.context,W,E,v,a),!0;case 6:return l.fn.call(l.context,W,E,v,a,G),!0}for(I=1,U=new Array(h-1);I<h;I++)U[I-1]=arguments[I];l.fn.apply(l.context,U)}else{var p,g=l.length;for(I=0;I<g;I++)switch(l[I].once&&this.removeListener(o,l[I].fn,void 0,!0),h){case 1:l[I].fn.call(l[I].context);break;case 2:l[I].fn.call(l[I].context,W);break;case 3:l[I].fn.call(l[I].context,W,E);break;case 4:l[I].fn.call(l[I].context,W,E,v);break;default:if(!U)for(p=1,U=new Array(h-1);p<h;p++)U[p-1]=arguments[p];l[I].fn.apply(l[I].context,U)}}return!0},L.prototype.on=function(o,W,F){return a(this,o,W,F,!1)},L.prototype.once=function(o,W,F){return a(this,o,W,F,!0)},L.prototype.removeListener=function(o,W,E,v){var a=F?F+o:o;if(!this._events[a])return this;if(!W)return G(this,a),this;var L=this._events[a];if(L.fn)L.fn!==W||v&&!L.once||E&&L.context!==E||G(this,a);else{for(var U=0,I=[],l=L.length;U<l;U++)(L[U].fn!==W||v&&!L[U].once||E&&L[U].context!==E)&&I.push(L[U]);I.length?this._events[a]=1===I.length?I[0]:I:G(this,a)}return this},L.prototype.removeAllListeners=function(o){var W;return o?(W=F?F+o:o,this._events[W]&&G(this,W)):(this._events=new E,this._eventsCount=0),this},L.prototype.off=L.prototype.removeListener,L.prototype.addListener=L.prototype.on,L.prefixed=F,L.EventEmitter=L,o.exports=L},893776:function(o,W,F){var E;o=F.nmd(o),function(){W&&W.nodeType,o&&o.nodeType;var v="object"==typeof window&&window;v.global!==v&&v.window!==v&&v.self;var a,G=2147483647,L=/^xn--/,U=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,l={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,p=String.fromCharCode;function g(o){throw new RangeError(l[o])}function f(o,W){for(var F=o.length,E=[];F--;)E[F]=W(o[F]);return E}function A(o,W){var F=o.split("@"),E="";return F.length>1&&(E=F[0]+"@",o=F[1]),E+f((o=o.replace(I,".")).split("."),W).join(".")}function k(o){for(var W,F,E=[],v=0,a=o.length;v<a;)(W=o.charCodeAt(v++))>=55296&&W<=56319&&v<a?56320==(64512&(F=o.charCodeAt(v++)))?E.push(((1023&W)<<10)+(1023&F)+65536):(E.push(W),v--):E.push(W);return E}function Z(o){return f(o,(function(o){var W="";return o>65535&&(W+=p((o-=65536)>>>10&1023|55296),o=56320|1023&o),W+p(o)})).join("")}function P(o,W){return o+22+75*(o<26)-((0!=W)<<5)}function y(o,W,F){var E=0;for(o=F?h(o/700):o>>1,o+=h(o/W);o>455;E+=36)o=h(o/35);return h(E+36*o/(o+38))}function z(o){var W,F,E,v,a,L,U,I,l,p,f,A=[],k=o.length,P=0,z=128,x=72;for((F=o.lastIndexOf("-"))<0&&(F=0),E=0;E<F;++E)o.charCodeAt(E)>=128&&g("not-basic"),A.push(o.charCodeAt(E));for(v=F>0?F+1:0;v<k;){for(a=P,L=1,U=36;v>=k&&g("invalid-input"),((I=(f=o.charCodeAt(v++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:36)>=36||I>h((G-P)/L))&&g("overflow"),P+=I*L,!(I<(l=U<=x?1:U>=x+26?26:U-x));U+=36)L>h(G/(p=36-l))&&g("overflow"),L*=p;x=y(P-a,W=A.length+1,0==a),h(P/W)>G-z&&g("overflow"),z+=h(P/W),P%=W,A.splice(P++,0,z)}return Z(A)}function x(o){var W,F,E,v,a,L,U,I,l,f,A,Z,z,x,N,e=[];for(Z=(o=k(o)).length,W=128,F=0,a=72,L=0;L<Z;++L)(A=o[L])<128&&e.push(p(A));for(E=v=e.length,v&&e.push("-");E<Z;){for(U=G,L=0;L<Z;++L)(A=o[L])>=W&&A<U&&(U=A);for(U-W>h((G-F)/(z=E+1))&&g("overflow"),F+=(U-W)*z,W=U,L=0;L<Z;++L)if((A=o[L])<W&&++F>G&&g("overflow"),A==W){for(I=F,l=36;!(I<(f=l<=a?1:l>=a+26?26:l-a));l+=36)N=I-f,x=36-f,e.push(p(P(f+N%x,0))),I=h(N/x);e.push(p(P(I,0))),a=y(F,z,E==v),F=0,++E}++F,++W}return e.join("")}a={version:"1.4.1",ucs2:{decode:k,encode:Z},decode:z,encode:x,toASCII:function(o){return A(o,(function(o){return U.test(o)?"xn--"+x(o):o}))},toUnicode:function(o){return A(o,(function(o){return L.test(o)?z(o.slice(4).toLowerCase()):o}))}},void 0===(E=function(){return a}.call(W,F,W,o))||(o.exports=E)}()},815304:o=>{var W=String.prototype.replace,F=/%20/g,E="RFC3986";o.exports={default:E,formatters:{RFC1738:function(o){return W.call(o,F,"+")},RFC3986:function(o){return String(o)}},RFC1738:"RFC1738",RFC3986:E}},97976:(o,W,F)=>{var E=F(511125),v=F(346731),a=F(815304);o.exports={formats:a,parse:v,stringify:E}},346731:(o,W,F)=>{var E=F(648193),v=Object.prototype.hasOwnProperty,a=Array.isArray,G={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:E.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},L=function(o){return o.replace(/&#(\d+);/g,(function(o,W){return String.fromCharCode(parseInt(W,10))}))},U=function(o,W){return o&&"string"==typeof o&&W.comma&&o.indexOf(",")>-1?o.split(","):o},I=function(o,W,F,E){if(o){var a=F.allowDots?o.replace(/\.([^.[]+)/g,"[$1]"):o,G=/(\[[^[\]]*])/g,L=F.depth>0&&/(\[[^[\]]*])/.exec(a),I=L?a.slice(0,L.index):a,l=[];if(I){if(!F.plainObjects&&v.call(Object.prototype,I)&&!F.allowPrototypes)return;l.push(I)}for(var h=0;F.depth>0&&null!==(L=G.exec(a))&&h<F.depth;){if(h+=1,!F.plainObjects&&v.call(Object.prototype,L[1].slice(1,-1))&&!F.allowPrototypes)return;l.push(L[1])}if(L){if(!0===F.strictDepth)throw new RangeError("Input depth exceeded depth option of "+F.depth+" and strictDepth is true");l.push("["+a.slice(L.index)+"]")}return function(o,W,F,E){for(var v=E?W:U(W,F),a=o.length-1;a>=0;--a){var G,L=o[a];if("[]"===L&&F.parseArrays)G=F.allowEmptyArrays&&(""===v||F.strictNullHandling&&null===v)?[]:[].concat(v);else{G=F.plainObjects?Object.create(null):{};var I="["===L.charAt(0)&&"]"===L.charAt(L.length-1)?L.slice(1,-1):L,l=F.decodeDotInKeys?I.replace(/%2E/g,"."):I,h=parseInt(l,10);F.parseArrays||""!==l?!isNaN(h)&&L!==l&&String(h)===l&&h>=0&&F.parseArrays&&h<=F.arrayLimit?(G=[])[h]=v:"__proto__"!==l&&(G[l]=v):G={0:v}}v=G}return v}(l,W,F,E)}};o.exports=function(o,W){var F=function(o){if(!o)return G;if(void 0!==o.allowEmptyArrays&&"boolean"!=typeof o.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==o.decodeDotInKeys&&"boolean"!=typeof o.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==o.decoder&&void 0!==o.decoder&&"function"!=typeof o.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==o.charset&&"utf-8"!==o.charset&&"iso-8859-1"!==o.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var W=void 0===o.charset?G.charset:o.charset,F=void 0===o.duplicates?G.duplicates:o.duplicates;if("combine"!==F&&"first"!==F&&"last"!==F)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===o.allowDots?!0===o.decodeDotInKeys||G.allowDots:!!o.allowDots,allowEmptyArrays:"boolean"==typeof o.allowEmptyArrays?!!o.allowEmptyArrays:G.allowEmptyArrays,allowPrototypes:"boolean"==typeof o.allowPrototypes?o.allowPrototypes:G.allowPrototypes,allowSparse:"boolean"==typeof o.allowSparse?o.allowSparse:G.allowSparse,arrayLimit:"number"==typeof o.arrayLimit?o.arrayLimit:G.arrayLimit,charset:W,charsetSentinel:"boolean"==typeof o.charsetSentinel?o.charsetSentinel:G.charsetSentinel,comma:"boolean"==typeof o.comma?o.comma:G.comma,decodeDotInKeys:"boolean"==typeof o.decodeDotInKeys?o.decodeDotInKeys:G.decodeDotInKeys,decoder:"function"==typeof o.decoder?o.decoder:G.decoder,delimiter:"string"==typeof o.delimiter||E.isRegExp(o.delimiter)?o.delimiter:G.delimiter,depth:"number"==typeof o.depth||!1===o.depth?+o.depth:G.depth,duplicates:F,ignoreQueryPrefix:!0===o.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof o.interpretNumericEntities?o.interpretNumericEntities:G.interpretNumericEntities,parameterLimit:"number"==typeof o.parameterLimit?o.parameterLimit:G.parameterLimit,parseArrays:!1!==o.parseArrays,plainObjects:"boolean"==typeof o.plainObjects?o.plainObjects:G.plainObjects,strictDepth:"boolean"==typeof o.strictDepth?!!o.strictDepth:G.strictDepth,strictNullHandling:"boolean"==typeof o.strictNullHandling?o.strictNullHandling:G.strictNullHandling}}(W);if(""===o||null==o)return F.plainObjects?Object.create(null):{};for(var l="string"==typeof o?function(o,W){var F={__proto__:null},I=W.ignoreQueryPrefix?o.replace(/^\?/,""):o;I=I.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var l,h=W.parameterLimit===1/0?void 0:W.parameterLimit,p=I.split(W.delimiter,h),g=-1,f=W.charset;if(W.charsetSentinel)for(l=0;l<p.length;++l)0===p[l].indexOf("utf8=")&&("utf8=%E2%9C%93"===p[l]?f="utf-8":"utf8=%26%2310003%3B"===p[l]&&(f="iso-8859-1"),g=l,l=p.length);for(l=0;l<p.length;++l)if(l!==g){var A,k,Z=p[l],P=Z.indexOf("]="),y=-1===P?Z.indexOf("="):P+1;-1===y?(A=W.decoder(Z,G.decoder,f,"key"),k=W.strictNullHandling?null:""):(A=W.decoder(Z.slice(0,y),G.decoder,f,"key"),k=E.maybeMap(U(Z.slice(y+1),W),(function(o){return W.decoder(o,G.decoder,f,"value")}))),k&&W.interpretNumericEntities&&"iso-8859-1"===f&&(k=L(k)),Z.indexOf("[]=")>-1&&(k=a(k)?[k]:k);var z=v.call(F,A);z&&"combine"===W.duplicates?F[A]=E.combine(F[A],k):z&&"last"!==W.duplicates||(F[A]=k)}return F}(o,F):o,h=F.plainObjects?Object.create(null):{},p=Object.keys(l),g=0;g<p.length;++g){var f=p[g],A=I(f,l[f],F,"string"==typeof o);h=E.merge(h,A,F)}return!0===F.allowSparse?h:E.compact(h)}},511125:(o,W,F)=>{var E=F(338402),v=F(648193),a=F(815304),G=Object.prototype.hasOwnProperty,L={brackets:function(o){return o+"[]"},comma:"comma",indices:function(o,W){return o+"["+W+"]"},repeat:function(o){return o}},U=Array.isArray,I=Array.prototype.push,l=function(o,W){I.apply(o,U(W)?W:[W])},h=Date.prototype.toISOString,p=a.default,g={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:v.encode,encodeValuesOnly:!1,format:p,formatter:a.formatters[p],indices:!1,serializeDate:function(o){return h.call(o)},skipNulls:!1,strictNullHandling:!1},f={},A=function o(W,F,a,G,L,I,h,p,A,k,Z,P,y,z,x,N,e,t){for(var m,r=W,B=t,j=0,V=!1;void 0!==(B=B.get(f))&&!V;){var w=B.get(W);if(j+=1,void 0!==w){if(w===j)throw new RangeError("Cyclic object value");V=!0}void 0===B.get(f)&&(j=0)}if("function"==typeof k?r=k(F,r):r instanceof Date?r=y(r):"comma"===a&&U(r)&&(r=v.maybeMap(r,(function(o){return o instanceof Date?y(o):o}))),null===r){if(I)return A&&!N?A(F,g.encoder,e,"key",z):F;r=""}if("string"==typeof(m=r)||"number"==typeof m||"boolean"==typeof m||"symbol"==typeof m||"bigint"==typeof m||v.isBuffer(r))return A?[x(N?F:A(F,g.encoder,e,"key",z))+"="+x(A(r,g.encoder,e,"value",z))]:[x(F)+"="+x(String(r))];var K,T=[];if(void 0===r)return T;if("comma"===a&&U(r))N&&A&&(r=v.maybeMap(r,A)),K=[{value:r.length>0?r.join(",")||null:void 0}];else if(U(k))K=k;else{var d=Object.keys(r);K=Z?d.sort(Z):d}var n=p?F.replace(/\./g,"%2E"):F,u=G&&U(r)&&1===r.length?n+"[]":n;if(L&&U(r)&&0===r.length)return u+"[]";for(var $=0;$<K.length;++$){var Y=K[$],Q="object"==typeof Y&&void 0!==Y.value?Y.value:r[Y];if(!h||null!==Q){var C=P&&p?Y.replace(/\./g,"%2E"):Y,q=U(r)?"function"==typeof a?a(u,C):u:u+(P?"."+C:"["+C+"]");t.set(W,j);var c=E();c.set(f,t),l(T,o(Q,q,a,G,L,I,h,p,"comma"===a&&N&&U(r)?null:A,k,Z,P,y,z,x,N,e,c))}}return T};o.exports=function(o,W){var F,v=o,I=function(o){if(!o)return g;if(void 0!==o.allowEmptyArrays&&"boolean"!=typeof o.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==o.encodeDotInKeys&&"boolean"!=typeof o.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==o.encoder&&void 0!==o.encoder&&"function"!=typeof o.encoder)throw new TypeError("Encoder has to be a function.");var W=o.charset||g.charset;if(void 0!==o.charset&&"utf-8"!==o.charset&&"iso-8859-1"!==o.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var F=a.default;if(void 0!==o.format){if(!G.call(a.formatters,o.format))throw new TypeError("Unknown format option provided.");F=o.format}var E,v=a.formatters[F],I=g.filter;if(("function"==typeof o.filter||U(o.filter))&&(I=o.filter),E=o.arrayFormat in L?o.arrayFormat:"indices"in o?o.indices?"indices":"repeat":g.arrayFormat,"commaRoundTrip"in o&&"boolean"!=typeof o.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=void 0===o.allowDots?!0===o.encodeDotInKeys||g.allowDots:!!o.allowDots;return{addQueryPrefix:"boolean"==typeof o.addQueryPrefix?o.addQueryPrefix:g.addQueryPrefix,allowDots:l,allowEmptyArrays:"boolean"==typeof o.allowEmptyArrays?!!o.allowEmptyArrays:g.allowEmptyArrays,arrayFormat:E,charset:W,charsetSentinel:"boolean"==typeof o.charsetSentinel?o.charsetSentinel:g.charsetSentinel,commaRoundTrip:o.commaRoundTrip,delimiter:void 0===o.delimiter?g.delimiter:o.delimiter,encode:"boolean"==typeof o.encode?o.encode:g.encode,encodeDotInKeys:"boolean"==typeof o.encodeDotInKeys?o.encodeDotInKeys:g.encodeDotInKeys,encoder:"function"==typeof o.encoder?o.encoder:g.encoder,encodeValuesOnly:"boolean"==typeof o.encodeValuesOnly?o.encodeValuesOnly:g.encodeValuesOnly,filter:I,format:F,formatter:v,serializeDate:"function"==typeof o.serializeDate?o.serializeDate:g.serializeDate,skipNulls:"boolean"==typeof o.skipNulls?o.skipNulls:g.skipNulls,sort:"function"==typeof o.sort?o.sort:null,strictNullHandling:"boolean"==typeof o.strictNullHandling?o.strictNullHandling:g.strictNullHandling}}(W);"function"==typeof I.filter?v=(0,I.filter)("",v):U(I.filter)&&(F=I.filter);var h=[];if("object"!=typeof v||null===v)return"";var p=L[I.arrayFormat],f="comma"===p&&I.commaRoundTrip;F||(F=Object.keys(v)),I.sort&&F.sort(I.sort);for(var k=E(),Z=0;Z<F.length;++Z){var P=F[Z];I.skipNulls&&null===v[P]||l(h,A(v[P],P,p,f,I.allowEmptyArrays,I.strictNullHandling,I.skipNulls,I.encodeDotInKeys,I.encode?I.encoder:null,I.filter,I.sort,I.allowDots,I.serializeDate,I.format,I.formatter,I.encodeValuesOnly,I.charset,k))}var y=h.join(I.delimiter),z=!0===I.addQueryPrefix?"?":"";return I.charsetSentinel&&("iso-8859-1"===I.charset?z+="utf8=%26%2310003%3B&":z+="utf8=%E2%9C%93&"),y.length>0?z+y:""}},648193:(o,W,F)=>{var E=F(815304),v=Object.prototype.hasOwnProperty,a=Array.isArray,G=function(){for(var o=[],W=0;W<256;++W)o.push("%"+((W<16?"0":"")+W.toString(16)).toUpperCase());return o}(),L=function(o,W){for(var F=W&&W.plainObjects?Object.create(null):{},E=0;E<o.length;++E)void 0!==o[E]&&(F[E]=o[E]);return F};o.exports={arrayToObject:L,assign:function(o,W){return Object.keys(W).reduce((function(o,F){return o[F]=W[F],o}),o)},combine:function(o,W){return[].concat(o,W)},compact:function(o){for(var W=[{obj:{o},prop:"o"}],F=[],E=0;E<W.length;++E)for(var v=W[E],G=v.obj[v.prop],L=Object.keys(G),U=0;U<L.length;++U){var I=L[U],l=G[I];"object"==typeof l&&null!==l&&-1===F.indexOf(l)&&(W.push({obj:G,prop:I}),F.push(l))}return function(o){for(;o.length>1;){var W=o.pop(),F=W.obj[W.prop];if(a(F)){for(var E=[],v=0;v<F.length;++v)void 0!==F[v]&&E.push(F[v]);W.obj[W.prop]=E}}}(W),o},decode:function(o,W,F){var E=o.replace(/\+/g," ");if("iso-8859-1"===F)return E.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(E)}catch(o){return E}},encode:function(o,W,F,v,a){if(0===o.length)return o;var L=o;if("symbol"==typeof o?L=Symbol.prototype.toString.call(o):"string"!=typeof o&&(L=String(o)),"iso-8859-1"===F)return escape(L).replace(/%u[0-9a-f]{4}/gi,(function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"}));for(var U="",I=0;I<L.length;I+=1024){for(var l=L.length>=1024?L.slice(I,I+1024):L,h=[],p=0;p<l.length;++p){var g=l.charCodeAt(p);45===g||46===g||95===g||126===g||g>=48&&g<=57||g>=65&&g<=90||g>=97&&g<=122||a===E.RFC1738&&(40===g||41===g)?h[h.length]=l.charAt(p):g<128?h[h.length]=G[g]:g<2048?h[h.length]=G[192|g>>6]+G[128|63&g]:g<55296||g>=57344?h[h.length]=G[224|g>>12]+G[128|g>>6&63]+G[128|63&g]:(p+=1,g=65536+((1023&g)<<10|1023&l.charCodeAt(p)),h[h.length]=G[240|g>>18]+G[128|g>>12&63]+G[128|g>>6&63]+G[128|63&g])}U+=h.join("")}return U},isBuffer:function(o){return!(!o||"object"!=typeof o||!(o.constructor&&o.constructor.isBuffer&&o.constructor.isBuffer(o)))},isRegExp:function(o){return"[object RegExp]"===Object.prototype.toString.call(o)},maybeMap:function(o,W){if(a(o)){for(var F=[],E=0;E<o.length;E+=1)F.push(W(o[E]));return F}return W(o)},merge:function o(W,F,E){if(!F)return W;if("object"!=typeof F){if(a(W))W.push(F);else{if(!W||"object"!=typeof W)return[W,F];(E&&(E.plainObjects||E.allowPrototypes)||!v.call(Object.prototype,F))&&(W[F]=!0)}return W}if(!W||"object"!=typeof W)return[W].concat(F);var G=W;return a(W)&&!a(F)&&(G=L(W,E)),a(W)&&a(F)?(F.forEach((function(F,a){if(v.call(W,a)){var G=W[a];G&&"object"==typeof G&&F&&"object"==typeof F?W[a]=o(G,F,E):W.push(F)}else W[a]=F})),W):Object.keys(F).reduce((function(W,a){var G=F[a];return v.call(W,a)?W[a]=o(W[a],G,E):W[a]=G,W}),G)}}},517116:(o,W,F)=>{var E=F(893776);function v(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var a=/^([a-z0-9.+-]+:)/i,G=/:[0-9]*$/,L=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,U=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),I=["'"].concat(U),l=["%","/","?",";","#"].concat(I),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},A={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Z=F(97976);function P(o,W,F){if(o&&"object"==typeof o&&o instanceof v)return o;var E=new v;return E.parse(o,W,F),E}v.prototype.parse=function(o,W,F){if("string"!=typeof o)throw new TypeError("Parameter 'url' must be a string, not "+typeof o);var v=o.indexOf("?"),G=-1!==v&&v<o.indexOf("#")?"?":"#",U=o.split(G);U[0]=U[0].replace(/\\/g,"/");var P=o=U.join(G);if(P=P.trim(),!F&&1===o.split("#").length){var y=L.exec(P);if(y)return this.path=P,this.href=P,this.pathname=y[1],y[2]?(this.search=y[2],this.query=W?Z.parse(this.search.substr(1)):this.search.substr(1)):W&&(this.search="",this.query={}),this}var z=a.exec(P);if(z){var x=(z=z[0]).toLowerCase();this.protocol=x,P=P.substr(z.length)}if(F||z||P.match(/^\/\/[^@/]+@[^@/]+/)){var N="//"===P.substr(0,2);!N||z&&A[z]||(P=P.substr(2),this.slashes=!0)}if(!A[z]&&(N||z&&!k[z])){for(var e,t,m=-1,r=0;r<h.length;r++)-1!==(B=P.indexOf(h[r]))&&(-1===m||B<m)&&(m=B);for(-1!==(t=-1===m?P.lastIndexOf("@"):P.lastIndexOf("@",m))&&(e=P.slice(0,t),P=P.slice(t+1),this.auth=decodeURIComponent(e)),m=-1,r=0;r<l.length;r++){var B;-1!==(B=P.indexOf(l[r]))&&(-1===m||B<m)&&(m=B)}-1===m&&(m=P.length),this.host=P.slice(0,m),P=P.slice(m),this.parseHost(),this.hostname=this.hostname||"";var j="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!j)for(var V=this.hostname.split(/\./),w=(r=0,V.length);r<w;r++){var K=V[r];if(K&&!K.match(p)){for(var T="",d=0,n=K.length;d<n;d++)K.charCodeAt(d)>127?T+="x":T+=K[d];if(!T.match(p)){var u=V.slice(0,r),$=V.slice(r+1),Y=K.match(g);Y&&(u.push(Y[1]),$.unshift(Y[2])),$.length&&(P="/"+$.join(".")+P),this.hostname=u.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),j||(this.hostname=E.toASCII(this.hostname));var Q=this.port?":"+this.port:"",C=this.hostname||"";this.host=C+Q,this.href+=this.host,j&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==P[0]&&(P="/"+P))}if(!f[x])for(r=0,w=I.length;r<w;r++){var q=I[r];if(-1!==P.indexOf(q)){var c=encodeURIComponent(q);c===q&&(c=escape(q)),P=P.split(q).join(c)}}var _=P.indexOf("#");-1!==_&&(this.hash=P.substr(_),P=P.slice(0,_));var O=P.indexOf("?");if(-1!==O?(this.search=P.substr(O),this.query=P.substr(O+1),W&&(this.query=Z.parse(this.query)),P=P.slice(0,O)):W&&(this.search="",this.query={}),P&&(this.pathname=P),k[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){Q=this.pathname||"";var X=this.search||"";this.path=Q+X}return this.href=this.format(),this},v.prototype.format=function(){var o=this.auth||"";o&&(o=(o=encodeURIComponent(o)).replace(/%3A/i,":"),o+="@");var W=this.protocol||"",F=this.pathname||"",E=this.hash||"",v=!1,a="";this.host?v=o+this.host:this.hostname&&(v=o+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(v+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(a=Z.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var G=this.search||a&&"?"+a||"";return W&&":"!==W.substr(-1)&&(W+=":"),this.slashes||(!W||k[W])&&!1!==v?(v="//"+(v||""),F&&"/"!==F.charAt(0)&&(F="/"+F)):v||(v=""),E&&"#"!==E.charAt(0)&&(E="#"+E),G&&"?"!==G.charAt(0)&&(G="?"+G),W+v+(F=F.replace(/[?#]/g,(function(o){return encodeURIComponent(o)})))+(G=G.replace("#","%23"))+E},v.prototype.resolve=function(o){return this.resolveObject(P(o,!1,!0)).format()},v.prototype.resolveObject=function(o){if("string"==typeof o){var W=new v;W.parse(o,!1,!0),o=W}for(var F=new v,E=Object.keys(this),a=0;a<E.length;a++){var G=E[a];F[G]=this[G]}if(F.hash=o.hash,""===o.href)return F.href=F.format(),F;if(o.slashes&&!o.protocol){for(var L=Object.keys(o),U=0;U<L.length;U++){var I=L[U];"protocol"!==I&&(F[I]=o[I])}return k[F.protocol]&&F.hostname&&!F.pathname&&(F.pathname="/",F.path=F.pathname),F.href=F.format(),F}if(o.protocol&&o.protocol!==F.protocol){if(!k[o.protocol]){for(var l=Object.keys(o),h=0;h<l.length;h++){var p=l[h];F[p]=o[p]}return F.href=F.format(),F}if(F.protocol=o.protocol,o.host||A[o.protocol])F.pathname=o.pathname;else{for(var g=(o.pathname||"").split("/");g.length&&!(o.host=g.shift()););o.host||(o.host=""),o.hostname||(o.hostname=""),""!==g[0]&&g.unshift(""),g.length<2&&g.unshift(""),F.pathname=g.join("/")}if(F.search=o.search,F.query=o.query,F.host=o.host||"",F.auth=o.auth,F.hostname=o.hostname||o.host,F.port=o.port,F.pathname||F.search){var f=F.pathname||"",Z=F.search||"";F.path=f+Z}return F.slashes=F.slashes||o.slashes,F.href=F.format(),F}var P=F.pathname&&"/"===F.pathname.charAt(0),y=o.host||o.pathname&&"/"===o.pathname.charAt(0),z=y||P||F.host&&o.pathname,x=z,N=F.pathname&&F.pathname.split("/")||[],e=(g=o.pathname&&o.pathname.split("/")||[],F.protocol&&!k[F.protocol]);if(e&&(F.hostname="",F.port=null,F.host&&(""===N[0]?N[0]=F.host:N.unshift(F.host)),F.host="",o.protocol&&(o.hostname=null,o.port=null,o.host&&(""===g[0]?g[0]=o.host:g.unshift(o.host)),o.host=null),z=z&&(""===g[0]||""===N[0])),y)F.host=o.host||""===o.host?o.host:F.host,F.hostname=o.hostname||""===o.hostname?o.hostname:F.hostname,F.search=o.search,F.query=o.query,N=g;else if(g.length)N||(N=[]),N.pop(),N=N.concat(g),F.search=o.search,F.query=o.query;else if(null!=o.search)return e&&(F.host=N.shift(),F.hostname=F.host,(j=!!(F.host&&F.host.indexOf("@")>0)&&F.host.split("@"))&&(F.auth=j.shift(),F.hostname=j.shift(),F.host=F.hostname)),F.search=o.search,F.query=o.query,null===F.pathname&&null===F.search||(F.path=(F.pathname?F.pathname:"")+(F.search?F.search:"")),F.href=F.format(),F;if(!N.length)return F.pathname=null,F.search?F.path="/"+F.search:F.path=null,F.href=F.format(),F;for(var t=N.slice(-1)[0],m=(F.host||o.host||N.length>1)&&("."===t||".."===t)||""===t,r=0,B=N.length;B>=0;B--)"."===(t=N[B])?N.splice(B,1):".."===t?(N.splice(B,1),r++):r&&(N.splice(B,1),r--);if(!z&&!x)for(;r--;r)N.unshift("..");!z||""===N[0]||N[0]&&"/"===N[0].charAt(0)||N.unshift(""),m&&"/"!==N.join("/").substr(-1)&&N.push("");var j,V=""===N[0]||N[0]&&"/"===N[0].charAt(0);return e&&(F.hostname=V?"":N.length?N.shift():"",F.host=F.hostname,(j=!!(F.host&&F.host.indexOf("@")>0)&&F.host.split("@"))&&(F.auth=j.shift(),F.hostname=j.shift(),F.host=F.hostname)),(z=z||F.host&&N.length)&&!V&&N.unshift(""),N.length>0?F.pathname=N.join("/"):(F.pathname=null,F.path=null),null===F.pathname&&null===F.search||(F.path=(F.pathname?F.pathname:"")+(F.search?F.search:"")),F.auth=o.auth||F.auth,F.slashes=F.slashes||o.slashes,F.href=F.format(),F},v.prototype.parseHost=function(){var o=this.host,W=G.exec(o);W&&(":"!==(W=W[0])&&(this.port=W.substr(1)),o=o.substr(0,o.length-W.length)),o&&(this.hostname=o)},W.qg=P,W.hd=function(o,W){return P(o,!1,!0).resolve(W)},W.GP=function(o){return"string"==typeof o&&(o=P(o)),o instanceof v?o.format():v.prototype.format.call(o)}},930990:(o,W,F)=>{F.d(W,{ck:()=>t,qp:()=>r,Vm:()=>B,xL:()=>e,Dc:()=>j,Lp:()=>w,Nn:()=>V});var E=F(798678);const v=F.p+"images/multiplier.73c2147c.webp",a=URL.createObjectURL(new Blob([`\x3c!--\n  Multiplier bitmap font. Only 0-9, space and x symbols are present\n  Symbol reference:\n  32 - space\n  48 - 0\n  49 - 1\n  50 - 2\n  51 - 3\n  52 - 4\n  53 - 5\n  54 - 6\n  55 - 7\n  56 - 8\n  57 - 9\n  120 - x\n--\x3e\n<font>\n    \x3c!-- Font face name should match string from asset loader config enum CrazyBallsBitmapFont --\x3e\n    <info face="CrazyBallsBitmapFont.Multiplier" size="110" bold="0" italic="0" charset="" unicode="1" stretchH="100" smooth="1" aa="1" padding="1,1,1,1" spacing="1,1"/>\n    <common lineHeight="190" base="85" scaleW="105" scaleH="140" pages="1" packed="0" />\n    <pages>\n        <page id="0" file="${v}"/>\n    </pages>\n    <chars count="12">\n        <char id="32" x="0" y="0" width="0" height="0" xoffset="0" yoffset="0" xadvance="50" page="0" chnl="15" />\n        <char id="48" x="0" y="0" width="105" height="140" xoffset="-8" yoffset="1" xadvance="90" page="0" chnl="15" />\n        <char id="49" x="105" y="0" width="105" height="140" xoffset="-14" yoffset="0" xadvance="72" page="0" chnl="15" />\n        <char id="50" x="210" y="0" width="105" height="140" xoffset="-8" yoffset="0" xadvance="83" page="0" chnl="15" />\n        <char id="51" x="0" y="140" width="105" height="140" xoffset="-8" yoffset="0" xadvance="85" page="0" chnl="15" />\n        <char id="52" x="105" y="140" width="105" height="140" xoffset="-8" yoffset="0" xadvance="85" page="0" chnl="15" />\n        <char id="53" x="210" y="140" width="105" height="140" xoffset="-9" yoffset="0" xadvance="84" page="0" chnl="15" />\n        <char id="54" x="315" y="0" width="105" height="140" xoffset="-8" yoffset="0" xadvance="88" page="0" chnl="15" />\n        <char id="55" x="315" y="140" width="105" height="140" xoffset="-9" yoffset="0" xadvance="86" page="0" chnl="15" />\n        <char id="56" x="0" y="280" width="105" height="140" xoffset="-8" yoffset="0" xadvance="87" page="0" chnl="15" />\n        <char id="57" x="105" y="280" width="105" height="140" xoffset="-9" yoffset="0" xadvance="88" page="0" chnl="15" />\n        <char id="120" x="210" y="280" width="105" height="140" xoffset="-18" yoffset="0" xadvance="70" page="0" chnl="15" />\n    </chars>\n    <kernings count="43">\n        <kerning first="48" second="48" amount="-2"/>\n        <kerning first="49" second="49" amount="4"/>\n        <kerning first="49" second="52" amount="-12"/>\n        <kerning first="49" second="55" amount="-4"/>\n        <kerning first="49" second="120" amount="3"/>\n        <kerning first="50" second="48" amount="-1"/>\n        <kerning first="50" second="49" amount="5"/>\n        <kerning first="50" second="50" amount="3"/>\n        <kerning first="50" second="51" amount="4"/>\n        <kerning first="50" second="52" amount="2"/>\n        <kerning first="50" second="53" amount="4"/>\n        <kerning first="50" second="55" amount="1"/>\n        <kerning first="51" second="51" amount="3"/>\n        <kerning first="51" second="53" amount="3"/>\n        <kerning first="51" second="54" amount="3"/>\n        <kerning first="51" second="56" amount="2"/>\n        <kerning first="52" second="51" amount="5"/>\n        <kerning first="52" second="52" amount="4"/>\n        <kerning first="52" second="53" amount="5"/>\n        <kerning first="52" second="54" amount="6"/>\n        <kerning first="52" second="56" amount="5"/>\n        <kerning first="53" second="50" amount="2"/>\n        <kerning first="53" second="53" amount="2"/>\n        <kerning first="53" second="54" amount="3"/>\n        <kerning first="53" second="55" amount="2"/>\n        <kerning first="53" second="56" amount="2"/>\n        <kerning first="53" second="57" amount="2"/>\n        <kerning first="53" second="120" amount="8"/>\n        <kerning first="54" second="48" amount="-2"/>\n        <kerning first="54" second="49" amount="-1"/>\n        <kerning first="54" second="55" amount="-6"/>\n        <kerning first="55" second="48" amount="-3"/>\n        <kerning first="55" second="52" amount="-8"/>\n        <kerning first="55" second="120" amount="-8"/>\n        <kerning first="57" second="48" amount="-4"/>\n        <kerning first="57" second="55" amount="-3"/>\n        <kerning first="57" second="56" amount="-1"/>\n        <kerning first="120" second="48" amount="-10"/>\n        <kerning first="120" second="51" amount="-6"/>\n        <kerning first="120" second="52" amount="-6"/>\n        <kerning first="120" second="54" amount="-3"/>\n        <kerning first="120" second="55" amount="-10"/>\n        <kerning first="120" second="57" amount="-2"/>\n    </kernings>\n</font>\n`])),G=URL.createObjectURL(new Blob([`\x3c!--\n Global multiplier bitmap font. Only 0-9, space and x symbols are present\n Symbol reference:\n 32 - space\n 48 - 0\n 49 - 1\n 50 - 2\n 51 - 3\n 52 - 4\n 53 - 5\n 54 - 6\n 55 - 7\n 56 - 8\n 57 - 9\n 120 - x\n--\x3e\n<font>\n    \x3c!-- Font face name should match string from asset loader config enum CrazyBallsBitmapFont --\x3e\n    <info face="CrazyBallsBitmapFont.MultiplierGlobal" size="110" bold="0" italic="0" charset="" unicode="1" stretchH="100" smooth="1" aa="1" padding="1,1,1,1" spacing="1,1"/>\n    <common lineHeight="190" base="85" scaleW="105" scaleH="140" pages="1" packed="0"/>\n    <pages>\n        <page id="0" file="${v}"/>\n    </pages>\n    <chars count="12">\n        <char id="32" x="0" y="420" width="0" height="0" xoffset="0" yoffset="0" xadvance="50" page="0" chnl="15" />\n        <char id="48" x="0" y="420" width="105" height="140" xoffset="-8" yoffset="1" xadvance="90" page="0" chnl="15" />\n        <char id="49" x="105" y="420" width="105" height="140" xoffset="-14" yoffset="0" xadvance="72" page="0" chnl="15" />\n        <char id="50" x="210" y="420" width="105" height="140" xoffset="-8" yoffset="0" xadvance="83" page="0" chnl="15" />\n        <char id="51" x="0" y="560" width="105" height="140" xoffset="-8" yoffset="0" xadvance="85" page="0" chnl="15" />\n        <char id="52" x="105" y="560" width="105" height="140" xoffset="-8" yoffset="0" xadvance="85" page="0" chnl="15" />\n        <char id="53" x="210" y="560" width="105" height="140" xoffset="-9" yoffset="0" xadvance="84" page="0" chnl="15" />\n        <char id="54" x="315" y="420" width="105" height="140" xoffset="-8" yoffset="0" xadvance="88" page="0" chnl="15" />\n        <char id="55" x="315" y="560" width="105" height="140" xoffset="-9" yoffset="0" xadvance="86" page="0" chnl="15" />\n        <char id="56" x="0" y="700" width="105" height="140" xoffset="-8" yoffset="0" xadvance="87" page="0" chnl="15" />\n        <char id="57" x="105" y="700" width="105" height="140" xoffset="-9" yoffset="0" xadvance="88" page="0" chnl="15" />\n        <char id="120" x="210" y="700" width="105" height="140" xoffset="-18" yoffset="0" xadvance="70" page="0" chnl="15" />\n    </chars>\n    <kernings count="43">\n        <kerning first="48" second="48" amount="-2"/>\n        <kerning first="49" second="49" amount="4"/>\n        <kerning first="49" second="52" amount="-12"/>\n        <kerning first="49" second="55" amount="-4"/>\n        <kerning first="49" second="120" amount="3"/>\n        <kerning first="50" second="48" amount="-1"/>\n        <kerning first="50" second="49" amount="5"/>\n        <kerning first="50" second="50" amount="3"/>\n        <kerning first="50" second="51" amount="4"/>\n        <kerning first="50" second="52" amount="2"/>\n        <kerning first="50" second="53" amount="4"/>\n        <kerning first="50" second="55" amount="1"/>\n        <kerning first="51" second="51" amount="3"/>\n        <kerning first="51" second="53" amount="3"/>\n        <kerning first="51" second="54" amount="3"/>\n        <kerning first="51" second="56" amount="2"/>\n        <kerning first="52" second="51" amount="5"/>\n        <kerning first="52" second="52" amount="4"/>\n        <kerning first="52" second="53" amount="5"/>\n        <kerning first="52" second="54" amount="6"/>\n        <kerning first="52" second="56" amount="5"/>\n        <kerning first="53" second="50" amount="2"/>\n        <kerning first="53" second="53" amount="2"/>\n        <kerning first="53" second="54" amount="3"/>\n        <kerning first="53" second="55" amount="2"/>\n        <kerning first="53" second="56" amount="2"/>\n        <kerning first="53" second="57" amount="2"/>\n        <kerning first="53" second="120" amount="8"/>\n        <kerning first="54" second="48" amount="-2"/>\n        <kerning first="54" second="49" amount="-1"/>\n        <kerning first="54" second="55" amount="-6"/>\n        <kerning first="55" second="48" amount="-3"/>\n        <kerning first="55" second="52" amount="-8"/>\n        <kerning first="55" second="120" amount="-8"/>\n        <kerning first="57" second="48" amount="-4"/>\n        <kerning first="57" second="55" amount="-3"/>\n        <kerning first="57" second="56" amount="-1"/>\n        <kerning first="120" second="48" amount="-10"/>\n        <kerning first="120" second="51" amount="-6"/>\n        <kerning first="120" second="52" amount="-6"/>\n        <kerning first="120" second="54" amount="-3"/>\n        <kerning first="120" second="55" amount="-10"/>\n        <kerning first="120" second="57" amount="-2"/>\n    </kernings>\n</font>\n`])),L=F.p+"data/bonuscardm.1587e437.json",U=F.p+"images/bonuscardm.e7e333f3.webp",I=F.p+"data/lottoparti.d5d4d881.json",l=F.p+"images/lottoparti.6270c8df.webp",h=F.p+"data/lottoparti.c7e559e5.json",p=F.p+"images/lottoparti.c8d89b52.webp",g=F.p+"data/lottoparti.939445db.json",f=F.p+"images/lottoparti.efc3cca9.webp",A=F.p+"data/spriteslan.d64d4e8d.json",k=F.p+"images/spriteslan.7d806207.webp",Z=F.p+"data/spriteslan.504b9043.json",P=F.p+"images/spriteslan.cd45e7b5.webp",y=F.p+"data/spritespor.d6475b74.json",z=F.p+"images/spritespor.fbec1d16.webp",x=F.p+"data/spritespor.9e79fd2b.json",N=F.p+"images/spritespor.a47b9431.webp";var e,t,m,r,B;!function(o){o.BtnChance="BtnChance",o.BtnHouse="BtnHouse",o.BaseFree="BaseFree",o.BaseChance="BaseChance",o.ChanceBetSpot="chanceBetSpot",o.ChanceBg="chanceBg",o.CoinFlipCardBottom="CoinFlipCardBottom",o.CashHuntCardBottom="CashHuntCardBottom",o.CrazyTimeCardBottom="CrazyTimeCardBottom",o.PachinkoCardBottom="PachinkoCardBottom",o.CoinFlipCardTop="CoinFlipCardTop",o.CashHuntCardTop="CashHuntCardTop",o.CrazyTimeCardTop="CrazyTimeCardTop",o.PachinkoCardTop="PachinkoCardTop",o.BonusDabBackground="bonusDab",o.ChanceSymbol="chanceSymbol",o.Dab="dab",o.FreeSpaceBetSpot="freeSpaceBetSpot",o.FreeSpaceBg="freeSpaceBg",o.FreeSpaceSymbol="freeSpaceSymbol",o.GlobalMultiplierBetSpot="globalMultiplierBetSpot",o.GlobalMultiplierBg="globalMultiplierBg",o.LottoChanceBase="lottoChanceBase",o.LottoFreeBase="lottoFreeBase",o.StandardMultiplierBg="standardMultiplierBg",o.LineMultiplierBg="lineMultiplierBg",o.RadialLight="radialLight",o.GoldGradient="goldGradient",o.RedGradient="redGradient",o.ChanceTogglePlaceholder="chanceTogglePlaceholder",o.FreeTogglePlaceholder="freeTogglePlaceholder",o.GlobalTogglePlaceholder="globalTogglePlaceholder",o.WithGlobalMultiplierBase="lottoWithMultiplierBase",o.WinRays="WinRays",o.BonusSparkle="BonusSparkle",o.BonusBorderTop="bonusBorderTop",o.BonusBorderBottom="bonusBorderBottom",o.LottoDisabledFreeBase="lottoDisabledFreeBase",o.LottoDisabledMultiBase="lottoDisabledMultiBase",o.StandardMultiplierBgBonus="standardMultiplierBgBonus",o.CrazyTimeLogo="CrazyTimeLogo",o.CashHuntLogo="CashHuntLogo",o.PachinkoLogo="PachinkoLogo",o.CoinFlipLogo="CoinFlipLogo",o.CellShadow="cellShadow",o.LineShadow="lineShadow",o.WinLine="WinLine",o.WinLineMask="WinLineMask",o.BonusTransitionRays="bonusTransitionRays",o.BonusCardsMultiplierTrail="bonusCardsMultiplierTrail",o.LottoFreeWinBase="lottoFreeWinBase",o.LottoChanceWinBase="lottoChanceWinBase",o.LottoWinMultiplierWinBase="lottoWinMultiplierWinBase",o.NearWinMarker="nearWin",o.NearWinMask="nearWinMask",o.LottoGrid="lottoGrid",o.CrazyTimeCardBalls="CrazyTimeCardBalls",o.CoinFlipCardBalls="CoinFlipCardBalls",o.PachinkoCardBalls="PachinkoCardBalls",o.CashHuntCardBalls="CashHuntCardBalls"}(e||(e={})),function(o){o.Glitter="glitter",o.NearWin="nearWin",o.NearWinStars="nearWinStars",o.Shimmer="shimmer",o.Explosion="explosion",o.LottoParticles="lottoParticles",o.LottoParticlesFreeSpace="lottoParticlesFreeSpace",o.LottoParticlesLine="lottoParticlesLine"}(t||(t={})),function(o){o.Init="CrazyBallsSpritesheet.Init",o.Animations="CrazyBallsSpritesheet.Animations",o.LottoParticles="CrazyBallsSpritesheet.LottoParticles",o.LottoParticlesLine="CrazyBallsSpritesheet.LottoParticlesLine",o.LottoParticlesFreeSpace="CrazyBallsSpritesheet.LottoParticlesFreeSpace"}(m||(m={})),function(o){o.Multiplier="CrazyBallsBitmapFont.Multiplier",o.MultiplierGlobal="CrazyBallsBitmapFont.MultiplierGlobal",o.RobotoSlab="CrazyBallsBitmapFont.RobotoSlab"}(r||(r={})),function(o){o.CrazyTimeSparkle="CrazyBallsParticleSystemConfig.CrazyTimeSparkle",o.BonusCardMultiplierTrail="CrazyBallsParticleSystemConfig.BonusCardMultiplierTrail"}(B||(B={}));const j={InitCommon:"InitCommon",InitLandscape:"InitLandscape",InitPortrait:"InitPortrait",BonusGameCommon:"BonusGameCommon",AnimationsLandscape:"AnimationsLandscape",AnimationsPortrait:"AnimationsPortrait"},V=(Object.values(j),{[j.InitCommon]:{[r.Multiplier]:{type:E.x.Bitmap,url:a},[r.MultiplierGlobal]:{type:E.x.Bitmap,url:G}},[j.InitLandscape]:{[m.Init]:{type:E.x.SpriteSheet,url:A,textureUrl:k}},[j.InitPortrait]:{[m.Init]:{type:E.x.SpriteSheet,url:y,textureUrl:z}},[j.BonusGameCommon]:{[B.BonusCardMultiplierTrail]:{type:E.x.ParticleSystemConfig,url:L},[e.BonusCardsMultiplierTrail]:{type:E.x.Texture,url:U},[m.LottoParticles]:{type:E.x.SpriteSheet,url:I,textureUrl:l},[m.LottoParticlesLine]:{type:E.x.SpriteSheet,url:g,textureUrl:f},[m.LottoParticlesFreeSpace]:{type:E.x.SpriteSheet,url:h,textureUrl:p}},[j.AnimationsLandscape]:{[m.Animations]:{type:E.x.SpriteSheet,url:Z,textureUrl:P}},[j.AnimationsPortrait]:{[m.Animations]:{type:E.x.SpriteSheet,url:x,textureUrl:N}}}),w={[e.BtnChance]:m.Init,[e.BtnHouse]:m.Init,[e.BaseFree]:m.Init,[e.BaseChance]:m.Init,[e.ChanceBetSpot]:m.Init,[e.ChanceBg]:m.Init,[e.CoinFlipCardBottom]:m.Init,[e.CashHuntCardBottom]:m.Init,[e.PachinkoCardBottom]:m.Init,[e.CrazyTimeCardBottom]:m.Init,[e.CoinFlipCardTop]:m.Init,[e.CashHuntCardTop]:m.Init,[e.PachinkoCardTop]:m.Init,[e.CrazyTimeCardTop]:m.Init,[e.BonusDabBackground]:m.Init,[e.ChanceSymbol]:m.Init,[e.Dab]:m.Init,[e.FreeSpaceBetSpot]:m.Init,[e.FreeSpaceBg]:m.Init,[e.FreeSpaceSymbol]:m.Init,[e.GlobalMultiplierBetSpot]:m.Init,[e.GlobalMultiplierBg]:m.Init,[e.LottoChanceBase]:m.Init,[e.LottoFreeBase]:m.Init,[e.StandardMultiplierBg]:m.Init,[e.LineMultiplierBg]:m.Init,[e.RadialLight]:m.Init,[e.GoldGradient]:m.Init,[e.RedGradient]:m.Init,[e.ChanceTogglePlaceholder]:m.Init,[e.FreeTogglePlaceholder]:m.Init,[e.GlobalTogglePlaceholder]:m.Init,[e.WithGlobalMultiplierBase]:m.Init,[e.WinRays]:m.Init,[e.BonusSparkle]:m.Init,[e.BonusBorderTop]:m.Init,[e.BonusBorderBottom]:m.Init,[e.LottoDisabledFreeBase]:m.Init,[e.LottoDisabledMultiBase]:m.Init,[e.StandardMultiplierBgBonus]:m.Init,[e.CoinFlipLogo]:m.Init,[e.CashHuntLogo]:m.Init,[e.PachinkoLogo]:m.Init,[e.CrazyTimeLogo]:m.Init,[e.CellShadow]:m.Init,[e.LineShadow]:m.Init,[e.WinLine]:m.Init,[e.WinLineMask]:m.Init,[e.BonusTransitionRays]:m.Init,[e.LottoFreeWinBase]:m.Init,[e.LottoChanceWinBase]:m.Init,[e.LottoWinMultiplierWinBase]:m.Init,[e.NearWinMask]:m.Init,[e.LottoGrid]:m.Init,[e.CoinFlipCardBalls]:m.Init,[e.CashHuntCardBalls]:m.Init,[e.PachinkoCardBalls]:m.Init,[e.CrazyTimeCardBalls]:m.Init,[t.Glitter]:m.Init,[t.NearWin]:m.Init,[t.Explosion]:m.Animations,[t.Shimmer]:m.Animations,[t.NearWinStars]:m.Animations,[t.LottoParticles]:m.LottoParticles,[t.LottoParticlesFreeSpace]:m.LottoParticlesFreeSpace,[t.LottoParticlesLine]:m.LottoParticlesLine,[e.BonusCardsMultiplierTrail]:void 0}},796269:(o,W,F)=>{F.d(W,{$i:()=>a,J2:()=>G,Wn:()=>L,Wq:()=>v,cV:()=>U,rU:()=>I});var E=F(899646);const v=["card1","card2","card3","card4"];var a;!function(o){o.CoinFlip="coinFlip",o.CashHunt="cashHunt",o.Pachinko="pachinko",o.CrazyTime="crazyTime"}(a||(a={}));const G=Object.values(a),L=[...v,...Object.values(a)];function U(o){return[a.CoinFlip,a.CashHunt,a.CrazyTime,a.Pachinko].includes(o)}const I={[E.Qc.CoinFlip]:a.CoinFlip,[E.Qc.CrazyTime]:a.CrazyTime,[E.Qc.Pachinko]:a.Pachinko,[E.Qc.CashHunt]:a.CashHunt}},234468:(o,W,F)=>{F.d(W,{Ge:()=>L,YB:()=>G,du:()=>l,i6:()=>I,sr:()=>U,tM:()=>h});var E=F(726777),v=F(708662),a=F(626396);const G=9,L=12,U=Object.keys(a.p).length-1,I=new E.Z(-1,-1),l=new v.Q("#00FF00"),h=new v.Q("#FFDC00")},296715:(o,W,F)=>{var E,v,a,G;F.d(W,{EW:()=>E,JU:()=>a,QK:()=>v,tM:()=>G}),function(o){o.Shoot="Shoot",o.Splash="Splash"}(E||(E={})),function(o){o[o.Clear=0]="Clear",o[o.PlayIntro=1]="PlayIntro",o[o.SelectAndBlock=2]="SelectAndBlock",o[o.Shoot=3]="Shoot"}(v||(v={})),function(o){o[o.Standard=0]="Standard",o[o.ClosingSoon=1]="ClosingSoon"}(a||(a={})),function(o){o.Aim="Aim",o.AimHandle="AimHandle",o.AimArrow="AimArrow",o.Explosion="Explosion",o.Splash="Splash",o.SplashOnBoard="SplashOnBoard",o.Board="Board",o.Sparkle="Sparkle"}(G||(G={}))},380300:(o,W,F)=>{F.d(W,{x:()=>G});var E=F(726777),v=F(384511),a=F(234468);function G(o,W){let F=v.U4(0,a.YB-2),G=v.U4(0,a.Ge-2);F===(null==o?void 0:o.x)&&F++,G===(null==o?void 0:o.y)&&G++;const L=W||new E.Z;return L.set(F,G),L}},352544:(o,W,F)=>{F.d(W,{M8:()=>l,MQ:()=>E,O_:()=>v,Ri:()=>L,VY:()=>U,_s:()=>G,f_:()=>I,mQ:()=>a});const E=300,v=1e3,a=500,G=360,L="decision_flappers",U="left_flapper",I="top_flapper",l="right_flapper"},716306:(o,W,F)=>{F.d(W,{p:()=>I});var E=F(64922),v=F(699695),a=F(377810),G=F(431281),L=F(620802),U=F(350994);const I=({type:o,enabled:W,chooseFlapper:F,isDesktop:I,isClassicView:l,flashing:h=!1,isHelpAsset:p=!1})=>{const g=G.ee(),f=a.useCallback((()=>{W&&F&&F(o)}),[o,W,F]);return g?E.jsx("div",{className:v.A(U.A.flapperButton,{[U.A.enabled]:W,[U.A.flashing]:h,[U.A.left]:o===L.gc.Green,[U.A.top]:o===L.gc.Blue,[U.A.right]:o===L.gc.Yellow,[U.A.isClassicView]:l}),...I?{onClick:f}:{onTouchEnd:f},children:E.jsx(g,{type:o,selected:!W&&!p})}):null}},231618:(o,W,F)=>{F.d(W,{f:()=>c,M:()=>_});var E=F(64922),v=F(699695),a=F(525620),G=F(377810),L=F(352544),U=F(716306),I=F(51241);const l=a.PA((o=>{const W=I.Pj();return E.jsx(U.p,{type:o.type,enabled:void 0===W.crazyTime.flapper,isDesktop:"desktop"===W.device.layoutMode,chooseFlapper:W.crazyTime.chooseFlapper,isClassicView:W.abstractGame.isClassicView})}));var h=F(266748),p=F(82848);const g=a.PA((()=>{const o=I.Pj();return E.jsx(p.L,{secondsRemaining:Math.ceil(o.game.timeRemaining/1e3),secondsInitial:Math.ceil(o.game.totalTimeRemaining/1e3),valueAnimationStart:h.vf})}));var f=F(656437),A=F(201764),k=F(707536),Z=F(17775),P=F(6148),y=F(127268),z=F(620802),x=F(757069),N=F(623763);const e="flapperDecision--98f97",t="helpAsset--d8a82",m="portrait--ccb52",r="wrapper--20f45",B="hidden--dc0a9",j="appear--33e8a",V="disappear--0980b",w="titleContainer--08567",K="gradient--62577",T="isClassicView--c50cd",d="landscapeGradient--8b2cc",n="phoneLandscapeGradient--94971",u="title--a6a63",$="mobile--1bb5e",Y="buttonContainer--d8116",Q="desktop--30316",C="button--e42e8",q="timerContainer--93886",c=({isVisible:o,layoutMode:W,isHelpAsset:F=!1,FlapperButtonComponent:a=l,FlapperTimerComponent:U=g,toggleUserOpenedUIVisibility:I,drawerIsVisible:h,triggerAppearSoundEvent:p,isClassicView:Z})=>{const c="desktop"===W,_="mobilePortrait"===W,[O,X]=G.useState(!h&&o),S=x.Z(O),s=f.Z(O,L.MQ),i=c&&!s&&!Z,R=!O&&S;return G.useEffect((()=>{const W=c?0:700;let F;return!O&&o?(I(!1),F=window.setTimeout((()=>{p(),X(!0)}),W)):S&&O&&!o&&(I(!0),X(!1)),()=>{window.clearTimeout(F)}}),[o,O,S,c,I,p]),E.jsxs("div",{className:v.A(e,{[Q]:c,[$]:!c,[m]:_,[t]:F}),"data-role":L.Ri,children:[E.jsxs("div",{className:v.A(r,!F&&{[B]:!0,[V]:R,[j]:O}),children:[E.jsx("div",{className:v.A(w,{[m]:_}),children:E.jsx("div",{className:v.A(u,{[T]:Z}),children:E.jsx(N.b,{hidden:!1,hasGradient:!1,isPhone:!c,children:P.T(y.X.PickFlapperColor)})})}),E.jsxs("div",{className:v.A(Y,{[T]:Z}),children:[!_&&E.jsx("div",{className:v.A(K,d,{[n]:!c,[T]:Z})}),E.jsxs("div",{className:C,"data-role":L.VY,children:[!s&&E.jsx(a,{type:z.gc.Green}),!F&&E.jsx(k.m,{type:A.e.CrazyBonusLeftFlapper})]}),E.jsxs("div",{className:C,"data-role":L.f_,children:[!s&&E.jsx(a,{type:z.gc.Blue}),!F&&E.jsx(k.m,{type:A.e.CrazyBonusTopFlapper})]}),E.jsxs("div",{className:C,"data-role":L.M8,children:[!s&&E.jsx(a,{type:z.gc.Yellow}),!F&&E.jsx(k.m,{type:A.e.CrazyBonusRightFlapper})]})]})]}),i&&E.jsx("div",{className:v.A(q,{[V]:R}),children:E.jsx(U,{})})]})},_=a.PA((()=>{const o=I.Pj(),W=o.device.layoutMode,F=o.crazyTime.isDecisionVisible,v=G.useCallback((()=>{o.sound.triggerEvent(Z.PZ.CrazyTimeDecisionAppear)}),[o.sound]);return E.jsx(c,{isVisible:F,layoutMode:W,drawerIsVisible:o.abstractGame.drawerIsVisible,toggleUserOpenedUIVisibility:o.abstractGame.toggleUserOpenedUIVisibility,triggerAppearSoundEvent:v,isClassicView:o.abstractGame.isClassicView})}))},431281:(o,W,F)=>{F.d(W,{U0:()=>I,ee:()=>l});var E=F(377810);function v(o,W){F.e(57046).then(F.bind(F,328864)).then(o).catch(W)}class a{constructor(o,W=!1,F){this.loadFn=o,this.retryOnFail=W,this.isLoading=!1,this.isLoaded=!1,this.lastTryTimestamp=null,this.retryMinDelay=2e3,this.loadPromiseResolve=void 0,this.loadPromiseReject=void 0,this.onLoadFailCallback=null,this.disposed=!1,this.loadAttempts=0,this.retryTimeout=void 0,this.pendingLoadFailData=[],this.onLoadSuccess=o=>{var W;null===(W=this.loadPromiseResolve)||void 0===W||W.call(this,o),this.isLoaded=!0,this.isLoading=!1},this.onLoadFail=()=>{this.isLoading=!1,this.onLoadFailCallback?this.onLoadFailCallback(this.loadAttempts):this.pendingLoadFailData.push(this.loadAttempts),this.retryOnFail&&(this.retryTimeout=window.setTimeout((()=>{this.load()}),this.retryMinDelay))},this.loadPromise=new Promise(((o,W)=>{this.loadPromiseResolve=o,this.loadPromiseReject=o=>W(new Error(`Failed to lazy-load resource. ${o}`))})),F&&(this.retryMinDelay=F)}load(){this.disposed||this.isLoading||this.isLoaded||this.lastTryTimestamp&&Date.now()-this.lastTryTimestamp<this.retryMinDelay||(this.isLoading=!0,this.lastTryTimestamp=Date.now(),this.loadAttempts++,this.loadFn(this.onLoadSuccess,this.onLoadFail))}getChunkPromise(){return this.load(),this.loadPromise}setOnFailCallback(o){this.onLoadFailCallback=o;for(const o of this.pendingLoadFailData)this.onLoadFailCallback(o);this.pendingLoadFailData=[]}dispose(){this.isLoaded||(this.disposed=!0,this.pendingLoadFailData=[],this.retryTimeout&&(window.clearTimeout(this.retryTimeout),this.retryTimeout=void 0))}disposeByFail(o=""){var W;this.dispose(),null===(W=this.loadPromiseReject)||void 0===W||W.call(this,o)}}const G=7e3;let L=null;function U(){return L||(L=new a(v,!0,G),L.setOnFailCallback((o=>{o>1&&(null==L||L.disposeByFail())}))),L}function I(){U().dispose(),L=null}function l(){const[o,W]=E.useState(void 0);return F=W,E.useEffect((()=>{U().getChunkPromise().then((o=>{F(o)})).catch((()=>{}))}),[F]),null==o?void 0:o.DecisionButtonSVG;var F}},565093:(o,W,F)=>{F.d(W,{y:()=>N,P:()=>x});var E=F(64922),v=F(699695),a=F(525620),G=F(377810),L=F(346160),U=F(84184);const I="drawnBall--46e42",l="first--18850",h=F.p+"images/numberhit.a10ce91d.webp",p=({ball:o,index:W,row:F,itemGap:a,itemSizeEm:G,isNumberHit:L,drawnBallIndex:U,itemsPerRow:p,lastDrawnBall:g,setLastDrawnBall:f})=>{const A=L?h:"data:image/webp;base64,UklGRpIDAABXRUJQVlA4WAoAAAAQAAAAQQAAQQAAQUxQSDkBAAABgFNte93mKwNB+CEIQhhUEAwlDKSxm8UgYSIIf7duEYR/8E36v97GiJgAjJelPJqamWl7lBTh/Va6XdaaHMm922Ct4kOqTa0yLxSbXmXOW+rm8HN5mxCKOS1hmKi5VRkU1RyrDIndXPc4QLo57/GSqLlXuRDUCFs4l40yn1qMNJ0QZenhqBptPhAjlr3KVHfEqGVTue6bL64OIBn5Dfhg+wCU7QvR6CXxLYWvPPmeja8pn9q/ofJp42tPvmfhKwvfu/BFdDYFCtsK3NjeAXQuBYA717oRLtlgZVqxK0yyh8Kz4jB0FpUjJJYFZwtHwenQGDScg6g/FVyN3VsXXI/dV48YKepJI8aK+mmC0SF7yQETF/XwSpgrdV4OmC51ThW4lKqjXneB31T12ivf4D2m/Gi60fbIi2A8AFZQOCAyAgAAMA0AnQEqQgBCAD5NHotEIqGhG4le2CgExLOAZexXgZ7osLDdYAYyfe19qchQrfUv/9Mwai+xiUZAHPxIQf6ljEimx7sBGi8QCqi+Lal2VjgGd9BntBPEaEsq7iNxJUQD0vctBPeo3B4wKhrsZhi9oHOAAP76Iu/yk36YPYj44zAPsnvbp6sTisHM7iJoB3UdiG2t79v5fKTuxhzlJc/N4SU8qHNzmRJkqRyyKKwK5z0kRwFVITA4qDiBBjslLfc7VIjGTyrwlnoJ5BwNq42Cz2RQgiEMzf7mm5C+FEXP9yJYAcdoQVUaoX8s7ncHuespHCvL30888T/2gAnGHjskXDLlz3aub6KZpSSZiK8CVjAt4muUgITodpU3mchSFeqywws/Vgso5gSD4l/44H/7xhMZohZZbr1R7vjK5O2DGYqZ4OXj0ZnTc5wVeWi6JGatSDtX00CNPw0EcNUMpols4hEBMfnh5JcRz/69ofpVH46rvAOGcqsnHR2BSKEvRrxgHzy4Ggw1wW+3kR56jm0eXP3px/OAA5yjTMA5P66x/V+5m3VNvVRlDZWkEMWSmZ/P0MaBK3yrG2JrgmSYV6Rs24jljMHbel3cncOokpG4crZC/eY2YMZ8Qyx//QI5Z2I48zaoFHZjcB2JJJbRmfIsiv/E/ULUQyUNQc4bAakCVD/4IMCn+wrmz/jMyIMXyb97t9LL9wUf2FsVZDfMYp0xCikN1du1jXBOOAz/7MnNgAAAAA==",k=void 0===o?E.jsxs(E.Fragment,{children:[E.jsx("circle",{cx:20.5,cy:18.5,r:16,fill:"black",fillOpacity:"0.15"}),E.jsx("circle",{cx:20.5,cy:18.5,r:14.9,stroke:"#989898",strokeOpacity:"0.3",strokeWidth:"1.1"})]}):E.jsxs(E.Fragment,{children:[E.jsx("image",{href:A,xlinkHref:A,x:4,y:2,width:33,height:33}),E.jsx("text",{x:"50%",y:"48%",fill:"#fff",dominantBaseline:"middle",fontSize:"20",strokeLinejoin:"round",xmlSpace:"preserve",style:{whiteSpace:"pre",paintOrder:"stroke fill"},fontFamily:"Roboto Slab, Arial, sans-serif",fontWeight:700,textAnchor:"middle",opacity:.85,stroke:"#000",strokeWidth:"3",strokeOpacity:.2,children:o})]});let Z=100;W===p&&(Z=105),-1===W&&(Z=150);const P=0===W&&0===F&&g!==o,y=W*Z+100*a*W,z=.02*U+"s";return P&&o&&f(o),E.jsx("span",{className:v.A(I,{[l]:P}),style:{transform:`translate(${y}%, 0)`,transitionDelay:z,minWidth:`${G}em`,minHeight:`${G}em`,width:`${G}em`,height:`${G}em`,animationDelay:z},children:E.jsx("svg",{viewBox:"0 0 41 41",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:k})})},g="row--810db",f="isMobile--ea7f5",A=o=>{const{drawnBalls:W,drawnBallsHit:F,itemsPerRow:a,rowsCount:L,itemSizeEm:I,itemGap:l,rowGap:h,rowWidth:A,rowHeightEm:k,isMobile:Z,className:P,lastDrawnBall:y,setLastDrawnBall:z}=o,x=G.useMemo((()=>Array.from({length:a},((o,W)=>E.jsx(p,{ball:void 0,row:-1,index:W,itemGap:l,itemSizeEm:I,isNumberHit:!1,drawnBallIndex:W,lastDrawnBall:y,setLastDrawnBall:z,itemsPerRow:a},`emptySpace_${W}`)))),[a,l,I,y,z]),N=L*k,e=(L-1)*k*h,t=[];for(let o=0;o<L;o++){const G=0===o?0:1,[P,N]=[o*a-G,(o+1)*a+1],e=100*h,m=U.x-a*L,r=m<0&&L===o+1?x.slice(0,m):x;t.push(E.jsxs("div",{className:v.A(g,{[f]:Z}),style:{transform:`translate3d(0, ${100*o+e*o}%, 0)`,width:Z?void 0:A,height:`${k}em`},children:[r,W.slice(P,N).map(((W,v)=>E.jsx(p,{ball:W,lastDrawnBall:y,setLastDrawnBall:z,row:o,index:v%(a+2)-G,itemGap:l,itemSizeEm:I,isNumberHit:F[W],drawnBallIndex:a*o+v,itemsPerRow:a},`drawnBall_${W}`)))]},`row_${o}`))}return E.jsx("div",{className:P,style:{height:`${N+e}em`},"data-role":"DrawnBalls",children:t})};var k=F(95772),Z=F(51241),P=F(6148),y=F(127268);const z={drawnBallsContainer:"drawnBallsContainer--809ea",desktop:"desktop--dac13",isClassicView:"isClassicView--ae9fe",phone:"phone--d3c2f",help:"help--3e0c6",tablet:"tablet--f8872",ballsLeft:"ballsLeft--13d7a",mobile:"mobile--e61c1",landscape:"landscape--08898",drawnBalls:"drawnBalls--211ab"};function x({drawnBalls:o,drawnBallsHit:W,layoutMode:F,isClassicView:a,isHelp:I,lastDrawnBall:l,setLastDrawnBall:h}){const p="tablet"===F,g="mobilePortrait"===F,f=g||p,Z=G.useMemo((()=>function(o,W){if("desktop"===o){if(W){const o=7,W=1.5,F=.1,E=o*W,v=(o-1)*W*F;return{itemsPerRow:o,rowsCount:3,itemGap:F,itemSizeEm:W,rowGap:.05,rowWidth:`${k.A(E+v,2)}em`,rowHeightEm:1.5}}const o=7,F=1.1,E=.05,v=o*F,a=(o-1)*F*E;return{itemsPerRow:o,rowsCount:3,itemGap:E,itemSizeEm:F,rowGap:-.3,rowWidth:`${k.A(v+a,2)}em`,rowHeightEm:1.5}}return"tablet"===o?{rowsCount:1,itemsPerRow:20,itemSizeEm:2,itemGap:.2,rowGap:.2,rowWidth:"100%",rowHeightEm:2}:"mobilePortrait"===o?{rowsCount:1,itemsPerRow:13,itemSizeEm:1.25,itemGap:.1,rowGap:0,rowWidth:"100%",rowHeightEm:1.5}:{rowsCount:1,itemsPerRow:18,itemSizeEm:1.5,itemGap:.1,rowGap:0,rowWidth:"100%",rowHeightEm:1.5}}(F,a)),[F,a]);return 0===o.length?null:E.jsxs("div",{className:v.A(z.drawnBallsContainer,{[z.mobile]:f,[z.phone]:g,[z.desktop]:!f,[z.landscape]:!g,[z.tablet]:p,[z.isClassicView]:a,[z.help]:I}),"data-role":"DrawnBallsContainer",style:{width:f?void 0:Z.rowWidth},children:[E.jsx(U.o,{label:f?"":P.T(y.X.BallsLeft),count:U.x-o.length,className:v.A(z.ballsLeft,{[z.isClassicView]:a}),isTablet:p,isClassicView:a,isRtlLanguage:L.sU()}),E.jsx(A,{lastDrawnBall:l,setLastDrawnBall:h,drawnBalls:o,drawnBallsHit:W,className:v.A(z.drawnBalls,{[z.isClassicView]:a}),isMobile:f,...Z})]})}const N=a.PA((()=>{const o=Z.Pj(),W=G.useCallback((W=>o.lottoGame.setLastDrawnBall(W)),[o.lottoGame]);return E.jsx(x,{isHelp:!1,layoutMode:o.device.layoutMode,drawnBalls:o.lottoGame.drawnBalls,lastDrawnBall:o.lottoGame.lastDrawnBall,setLastDrawnBall:W,drawnBallsHit:o.lottoGame.drawnBallsHit,isClassicView:o.abstractGame.isClassicView,isRtlLanguage:L.sU()})}))},84184:(o,W,F)=>{F.d(W,{o:()=>y,x:()=>Z});var E=F(64922),v=F(699695),a=F(377810);const G="drawnBallContainer--9cc3b",L="isClassicView--5a21a",U="drawnBallsCount--7e6e9",I="numberContainer--916e9",l="separator--9d9fd",h="ballsLeft--3caa9",p="label--41675",g="textFront--472ba",f="textBack--b5a54",A="tablet--0342b",k="isRtlLanguage--38ed5",Z=20,P=Z.toString(),y=a.memo((({count:o,label:W,className:F,isTablet:a,isRtlLanguage:U,isClassicView:I})=>{const g=o.toString().split("");return E.jsxs("div",{className:v.A(h,F,{[k]:U,[A]:a}),children:[W?E.jsx("span",{className:p,style:{fontSize:W.length>16?"0.75em":void 0},children:W}):null,E.jsxs("div",{className:v.A(G,{[L]:I}),children:[z(g[0],g[1],I),E.jsx("div",{className:v.A(l,{[L]:I}),children:"/"}),z(P[0],P[1],I)]})]})}));function z(o,W,F){return E.jsxs("div",{"data-role":"drawn-balls-count",className:U,"data-text":`balls-left-amount-${o+W}`,children:[E.jsxs("div",{className:I,style:{width:x(o,W,F)},children:[E.jsx("div",{className:v.A(g,{[L]:F}),children:o}),E.jsx("div",{className:v.A(f,{[L]:F}),children:o})]}),void 0!==W?E.jsxs("div",{className:I,children:[E.jsx("div",{className:v.A(g,{[L]:F}),children:W}),E.jsx("div",{className:v.A(f,{[L]:F}),children:W})]}):null]},`balls-left-amount-${o+W}`)}function x(o,W,F){return F?"2"===o&&void 0!==W?"calc(var(--root-size)* 1.45)":"calc(var(--root-size)* 1.1)":"2"===o&&void 0!==W?"calc(var(--root-size)* 1)":"calc(var(--root-size)* 0.8)"}},656437:(o,W,F)=>{F.d(W,{Z:()=>v});var E=F(377810);function v(o,W){const[F,v]=E.useState(!0),a=E.useRef(0),G=()=>{a.current&&window.clearTimeout(a.current)};return E.useEffect((()=>(G(),o?v(!1):a.current=window.setTimeout((()=>{v(!0)}),W),()=>{G(),v(!o)})),[o,W]),F}},707536:(o,W,F)=>{F.d(W,{m:()=>x});var E=F(64922),v=F(699695),a=F(525620),G=F(377810),L=F(201764),U=F(910028),I=F(51241);const l="placeHolder--4aa24",h="isDebug--cd163",p="isDesktop--9a535",g="isPortrait--38841",f="isLandscape--2dfb6",A="isBonusObserver--eeef3",k="hasRoundedCorners--86a4e",Z="hasNotch--89d96",P="isClassicView--3f879",y={[L.e.TopSlot]:"topSlotHolder--ceb14",[L.e.CoinFlip]:"coinFlip--0ae54",[L.e.CoinFlipResultMultiplier]:"coinFlipResult--f02ba",[L.e.CashHunt]:"cashHunt--e0c20",[L.e.CashHuntResultMultiplier]:"cashHuntResult--fd024",[L.e.Pachinko]:"pachinko--2da9d",[L.e.PachinkoResultMultiplier]:"pachinkoResult--a52fa",[L.e.CrazyBonus]:"crazyBonus--e36d2",[L.e.CrazyBonusResultMultiplier]:"crazyBonusResult--a9a15",[L.e.CrazyBonusChosenFlapper]:"crazyBonusChosenFlapper--945f3",[L.e.BonusTicket]:"bonusTicket--f11f8",[L.e.BonusTicketMiddle]:"bonusTicketMiddle--73ed1",[L.e.BonusTicketMultiplierSize]:"bonusTicketMultiplierSize--dbd7c",[L.e.BonusTicketMultiplierPosition]:"bonusTicketMultiplierPosition--f41f0",[L.e.BonusTicketChipMiddle]:"betSpotChipMiddle--076b6",[L.e.TopSlotTransitionPath]:"topSlotTransitionHolder--8cceb",[L.e.CrazyBonusLeftFlapper]:"crazyBonusLeftFlapper--af798",[L.e.CrazyBonusTopFlapper]:"crazyBonusTopFlapper--43d3e",[L.e.CrazyBonusRightFlapper]:"crazyBonusRightFlapper--1ec9a",[L.e.BonusTransitionFlyInPoint]:"bonusTransitionFlyInPoint--7e88c",[L.e.BonusTransitionMiddlePoint]:"bonusTransitionMiddlePoint--6f916",[L.e.BonusTransitionParkedPoint]:"bonusTransitionParkedPoint--b5067",[L.e.BonusTransitionPendingBonusesParkedPoint]:"bonusTransitionPendingBonusesParkedPoint--0c94a"},z=o=>{const{layoutMode:W,hasNotch:F,hasRoundedCorners:a,className:L,isPlayerBonusQualified:I,isClassicView:z,style:x={},type:N}=o,e=G.useContext(U.so),t="desktop"===W,m="mobilePortrait"===W,r="tablet"===W;return E.jsx("div",{ref:e.getRef(o),className:v.A(l,L,y[N],{[p]:t,[g]:m,[f]:r,[Z]:F,[k]:a,[h]:e.getIsDebug(),[A]:!I,[P]:z}),style:x,children:!1})},x=a.PA((o=>{const W=I.Pj(),{layoutMode:F}=W.device;return E.jsx(z,{...o,layoutMode:F,hasNotch:W.device.hasNotch,hasRoundedCorners:W.device.hasRoundedCorners,isPlayerBonusQualified:W.bonus.isPlayerQualifiedForCurrentBonus,isClassicView:W.abstractGame.isClassicView})}))},201764:(o,W,F)=>{var E;F.d(W,{e:()=>E}),function(o){o.CashHunt="CashHunt",o.CashHuntResultMultiplier="CashHuntResultMultiplier",o.CoinFlip="CoinFlip",o.CoinFlipResultMultiplier="CoinFlipResultMultiplier",o.Pachinko="Pachinko",o.PachinkoResultMultiplier="PachinkoResultMultiplier",o.CrazyBonus="CrazyBonus",o.CrazyBonusResultMultiplier="CrazyBonusResultMultiplier",o.CrazyBonusChosenFlapper="CrazyBonusChosenFlapper",o.CrazyBonusLeftFlapper="CrazyBonusLeftFlapper",o.CrazyBonusTopFlapper="CrazyBonusTopFlapper",o.CrazyBonusRightFlapper="CrazyBonusRightFlapper",o.BonusTicketMultiplierPosition="BonusTicketMultiplierPosition",o.BonusTicketMultiplierSize="BonusTicketMultiplierSize",o.BonusTicketChipMiddle="BonusTicketChipMiddle",o.BonusTicket="BonusTicket",o.BonusTicketMiddle="BonusTicketMiddle",o.TopSlot="TopSlot",o.TopSlotTransitionPath="TopSlotTransitionPath",o.BonusTransitionFlyInPoint="BonusTransitionFlyInPoint",o.BonusTransitionMiddlePoint="BonusTransitionMiddlePoint",o.BonusTransitionParkedPoint="BonusTransitionParkedPoint",o.BonusTransitionPendingBonusesParkedPoint="BonusTransitionPendingBonusesParkedPoint"}(E||(E={}))},910028:(o,W,F)=>{F.d(W,{sA:()=>L,so:()=>a});var E=F(377810),v=F(201764);const a=E.createContext({});class G{constructor(){this.typeRefs={}}getIsDebug(){return!1}getRef(o){switch(o.type){case v.e.CashHunt:case v.e.BonusTicketMiddle:case v.e.BonusTicket:case v.e.CashHuntResultMultiplier:case v.e.CoinFlip:case v.e.CoinFlipResultMultiplier:case v.e.TopSlot:case v.e.TopSlotTransitionPath:case v.e.Pachinko:case v.e.PachinkoResultMultiplier:case v.e.CrazyBonus:case v.e.CrazyBonusResultMultiplier:case v.e.CrazyBonusChosenFlapper:case v.e.CrazyBonusLeftFlapper:case v.e.CrazyBonusTopFlapper:case v.e.CrazyBonusRightFlapper:case v.e.BonusTicketMultiplierPosition:case v.e.BonusTicketMultiplierSize:case v.e.BonusTicketChipMiddle:case v.e.BonusTransitionFlyInPoint:case v.e.BonusTransitionMiddlePoint:case v.e.BonusTransitionParkedPoint:case v.e.BonusTransitionPendingBonusesParkedPoint:return this.typeRefs[o.type]||(this.typeRefs[o.type]=E.createRef()),this.typeRefs[o.type]}}getRect(o,W){const F=this.getRef(o).current;if(F){const o=F.getBoundingClientRect(),E=W.reverseScale||1;return{width:o.width/E,height:o.height/E,top:(o.top-W.top)/E,left:(o.left-W.left)/E,right:(o.right-W.left)/E,bottom:(o.bottom-W.top)/E}}return{bottom:0,height:0,left:0,right:0,top:0,width:0}}}function L(){return new G}},112771:(o,W,F)=>{F.d(W,{a9:()=>y,LQ:()=>P,QK:()=>k,Fj:()=>x,lx:()=>z,oO:()=>N});var E=F(64922),v=F(604929),a=F(225844),G=F(899646);const L=F.p+"images/cashhuntsy.fa2a1a9f.webp",U=F.p+"images/coinflipbl.358447ec.webp",I=F.p+"images/coinflipre.2949df7c.webp",l=F.p+"images/crazytimes.29f09148.webp";var h=F(234858);const p=F.p+"images/lottowinsy.018d1230.webp",g=F.p+"images/pachinkosy.1cd71bd3.webp";var f=F(894330),A=F(337006);function k({payout:o,size:W,currencySymbol:F}){const v=`${F}${o}`;return E.jsxs("svg",{style:{fontSize:`calc(${W} * var(--root-size))`,letterSpacing:"calc(var(--root-size)* 0.4)",width:"1000px",height:"calc(var(--root-size)* 12)"},className:A.A.totalWinnings,children:[E.jsxs("g",{children:[E.jsx("text",{fill:"url(#payout-fill-gradient-brown)",fontFamily:"'Frank Ruhl Libre', Inter",fontWeight:"1000",stroke:"url(#payout-fill-gradient-brown)",strokeWidth:"calc(var(--root-size)* 1.1)",x:"50%",y:"51%",textAnchor:"middle",dominantBaseline:"central",style:{filter:"drop-shadow(2px 4px 0px #13040599"},children:v}),E.jsx("text",{stroke:"url(#payout-gold-gradient-stroke)",strokeWidth:"calc(var(--root-size)* 0.8)",fontFamily:"'Frank Ruhl Libre', Inter",fontWeight:"900",x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"central",children:v}),E.jsx("text",{stroke:"rgba(150, 150, 150, 0.8)",strokeWidth:"1.5px",fontFamily:"'Frank Ruhl Libre', Inter",fontWeight:"900",x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"central",children:v}),E.jsx("text",{fill:"url(#payout-fill-gradient)",fontFamily:"'Frank Ruhl Libre', Inter",fontWeight:"900",x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"central",children:v})]}),E.jsxs("defs",{children:[E.jsxs("linearGradient",{id:"payout-fill-gradient-brown",gradientTransform:"rotate(90)",x1:"15%",x2:"85%",children:[E.jsx("stop",{offset:".016",stopColor:"#933F00"}),E.jsx("stop",{offset:".15",stopColor:"#481F00"}),E.jsx("stop",{offset:".3",stopColor:"#994100"}),E.jsx("stop",{offset:".6",stopColor:"#6D2F00"})]}),E.jsxs("linearGradient",{id:"payout-fill-gradient",gradientTransform:"rotate(90)",x1:"15%",x2:"85%",children:[E.jsx("stop",{offset:".09",stopColor:"#E4DDD4"}),E.jsx("stop",{offset:".38",stopColor:"#FEFEFD"}),E.jsx("stop",{offset:".73",stopColor:"#DFCCB9"})]}),E.jsxs("linearGradient",{id:"payout-gold-gradient-stroke",gradientTransform:"rotate(90)",x1:"15%",x2:"85%",children:[E.jsx("stop",{offset:"0.3",stopColor:"#C57C12"}),E.jsx("stop",{offset:"0.54",stopColor:"#F1A004"}),E.jsx("stop",{offset:"0.8",stopColor:"#C57C12"})]})]})]})}const Z={0:4.8,1:3.4,2:4.5,3:4.5,4:4.5,5:4.4,6:4.6,7:4.5,8:4.4,9:4.5,x:3.9};function P({multiplier:o,size:W,withX:F}){const v=F?"x":`${o}`,a=F?"700":"1 900";if(!o)return null;const G=v.split("").reduce(((o,W)=>o+Z[W]),0),L=F?"Avenir Next":"RobotoSlab";return E.jsxs("svg",{style:{fontSize:`calc(${W} * var(--root-size))`,letterSpacing:"calc(var(--root-size)* 0.3)",width:`calc(var(--root-size)* ${G})`,height:"calc(var(--root-size)* 11)",transform:F?"translateX(calc(var(--root-size)* -0.7))":""},children:[E.jsxs("g",{children:[E.jsx("text",{fill:"url(#multiplier-text-fill-gradient-brown2)",fontFamily:`${L}, Inter`,fontWeight:a,stroke:"url(#multiplier-text-fill-gradient-brown2)",strokeWidth:"calc(var(--root-size)* 1)",x:"15%",y:"50%",textAnchor:"start",style:{filter:"drop-shadow(2px 4px 0px rgba(106, 51, 0, 0.5)"},children:v}),E.jsx("text",{stroke:"rgba(255, 255, 255, 0.8)",strokeWidth:"calc(var(--root-size)* 0.5)",fontFamily:`${L}, Inter`,fontWeight:a,x:"15%",y:"50%",textAnchor:"start",children:v}),E.jsx("text",{fill:"url(#multiplier-text-fill-gradient2)",fontFamily:`${L}, Inter`,fontWeight:a,x:"15%",y:"50%",textAnchor:"start",children:v})]}),E.jsxs("defs",{children:[E.jsxs("linearGradient",{id:"multiplier-text-fill-gradient-brown2",gradientTransform:"rotate(90)",x1:"15%",x2:"85%",children:[E.jsx("stop",{offset:".016",stopColor:"#593000"}),E.jsx("stop",{offset:".15",stopColor:"#871000"}),E.jsx("stop",{offset:".3",stopColor:"#C65300"}),E.jsx("stop",{offset:".6",stopColor:"#770000"})]}),E.jsxs("linearGradient",{id:"multiplier-text-fill-gradient2",gradientTransform:"rotate(90)",x1:"15%",x2:"85%",children:[E.jsx("stop",{offset:".1",stopColor:"#FFDD7D"}),E.jsx("stop",{offset:".3",stopColor:"#FFFFFF"}),E.jsx("stop",{offset:".5",stopColor:"#FFD55C"}),E.jsx("stop",{offset:".7",stopColor:"#FF9200"}),E.jsx("stop",{offset:".9",stopColor:"#FFE68E"})]}),E.jsxs("linearGradient",{id:"multiplier-gold-gradient-stroke",gradientTransform:"rotate(90)",x1:"15%",x2:"85%",children:[E.jsx("stop",{offset:"0.1",stopColor:"#593000"}),E.jsx("stop",{offset:"0.4",stopColor:"#871000"}),E.jsx("stop",{offset:"0.5",stopColor:"#C65300"}),E.jsx("stop",{offset:"0.9",stopColor:"#770000"})]})]})]})}function y({text:o,size:W}){return E.jsxs("svg",{style:{fontSize:`calc(${W} * var(--root-size))`,letterSpacing:"calc(var(--root-size)* 0.2)",width:"1000px",height:"calc(var(--root-size)* 10)"},children:[E.jsxs("g",{children:[E.jsx("text",{stroke:"url(#text-border)",strokeWidth:"calc(var(--root-size)* 0.2)",fontFamily:"Inter",fontWeight:"600",y:"50%",x:"50%",textAnchor:"middle",dominantBaseline:"central",style:{filter:"drop-shadow(0px 2.5px 0px #501800"},children:o}),E.jsx("text",{fill:"url(#multiplier-text-fill-gradient3)",fontFamily:"Inter",fontWeight:"600",y:"50%",x:"50%",textAnchor:"middle",dominantBaseline:"central",children:o})]}),E.jsxs("defs",{children:[E.jsxs("linearGradient",{id:"text-border",gradientTransform:"rotate(90)",x1:"15%",x2:"85%",children:[E.jsx("stop",{offset:".016",stopColor:"#C48516"}),E.jsx("stop",{offset:".15",stopColor:"#E3A600"}),E.jsx("stop",{offset:".3",stopColor:"#8E4400"})]}),E.jsxs("linearGradient",{id:"multiplier-text-fill-gradient3",gradientTransform:"rotate(90)",x1:"15%",x2:"85%",children:[E.jsx("stop",{offset:".01",stopColor:"#F4BA62"}),E.jsx("stop",{offset:".3",stopColor:"#FFFFFF"}),E.jsx("stop",{offset:".7",stopColor:"#F6A529"})]}),E.jsxs("linearGradient",{id:"multiplier-gold-gradient-stroke",gradientTransform:"rotate(90)",x1:"15%",x2:"85%",children:[E.jsx("stop",{offset:"0.1",stopColor:"#593000"}),E.jsx("stop",{offset:"0.4",stopColor:"#871000"}),E.jsx("stop",{offset:"0.5",stopColor:"#C65300"}),E.jsx("stop",{offset:"0.9",stopColor:"#770000"})]})]})]})}function z(o,W){return o===G.Qc.CashHunt?L:o===G.Qc.Pachinko?g:o===G.Qc.CoinFlip&&W?W===a.M.Red?I:U:o===G.Qc.CrazyTime?l:o===G.Qc.BallDrawing?p:void 0}function x(o){return o===G.Qc.CashHunt?"radial-gradient(50% 50% at 50% 50%, #497339 0.5%, rgba(43, 75, 32, 0.8) 50%, rgba(19, 70, 7, 0.5) 75%, rgba(5, 58, 0, 0) 100%)":o===G.Qc.Pachinko?"radial-gradient(50% 50% at 50% 50%, #902E71 0.5%, rgba(111, 36, 87, 0.8) 50%, rgba(106, 13, 74, 0.5) 75%, rgba(99, 0, 65, 0) 100%)":o===G.Qc.CoinFlip?"radial-gradient(50% 50% at 50% 50%, #3C6C8E 0.5%, rgba(35, 64, 84, 0.8) 50.33%, rgba(7, 45, 70, 0.5) 75%, rgba(0, 34, 58, 0) 100%)":o===G.Qc.CrazyTime?"radial-gradient(50% 50% at 50% 50%, #9D323E 0.5%, rgba(112, 0, 0, 0.8) 49.96%, rgba(91, 0, 0, 0.5) 75%, rgba(96, 0, 0, 0) 100%)":"radial-gradient(50% 50% at 50% 50%, #CD1900 0.5%, rgba(131, 0, 0, 0.8) 49.96%, rgba(103, 0, 0, 0.5) 75%, rgba(104, 0, 0, 0) 100%)"}function N(){[L,U,I,l,p,g,h,f].forEach((o=>{v.y(o)}))}},976962:(o,W,F)=>{F.d(W,{p:()=>hG,H:()=>pG});var E=F(64922),v=F(525620),a=F(587698),G=F(51241),L=F(127268),U=F(6148),I=F(699695),l=F(377810),h=F(837557),p=F(653677),g=F(346160),f=F(671860),A=F(509407),k=F(808432),Z=F(525019);const P="red--3ffaa",y="black--f01d3";function z(o,W,F,v){return E.jsx("use",{xlinkHref:o,x:W,y:F,height:v})}Z.z();const x=l.memo((({rank:o,suit:W})=>{let F;switch(o){case"2":case"6":F="36";break;case"3":case"9":F="35";break;case"4":F="34";break;case"5":case"J":F="38";break;case"7":F="40";break;case"8":F="39";break;case"10":F="0";break;case"Q":case"A":F="19";break;default:F="17"}const v=[k.KY.D,k.KY.H].includes(W)?P:y,a=z(`#rank-${o}`,F,"10","86"),G=z(`#suit-${k.KY[W]}`,"100","0","106");return E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 184 106",preserveAspectRatio:"xMidYMid meet",className:v,children:[a,G]})}));x.displayName="RankAndSuit";const N="indented--d520e",e="doubleIndented--68144",t="bold--37d87",m="bet--7d654",r="betLimits--3cf27",B="payout--46826",j="ranksAndSuits--7b0b6",V="mobileRanksAndSuits--7a895",w="cardsDelimiter--55498",K="disabled--fc044",T="topPadding--64914",d="rtl--1eee5",n="mobile--a40d9",u="cellContent--e7e92",$="sectionHeader--a6eff",Y="hasContent--7f13d",Q="middleDataCell--a2446",C="fixedColumnWidths--a60d9",q="hasBottomBorder--87313",c="hasIncreasedNotch--5fff3",_="hasNotch--42e7b",O="legacyMenuMode--041c5",X=l.memo((o=>{const{betKey:W,betTitle:F,min:v,max:G,payout:L,isIndented:U=!1,areLimitsInlined:Z,cards:P,middleComponent:y,hasBottomBorder:z=!0,isMobile:X=!1,currencySymbol:S="",fixedColumnWidths:s=!0,showPayouts:i=!0,isSectionHeader:R=!1,hasSectionPadding:J=!1,disabled:D=!1,legacyMenuMode:M}=o,H=U&&J,b=I.A({[N]:!H&&(U||J),[e]:H}),oo=void 0===F&&W?E.jsx(p.q,{className:b,"data-role":"title",children:W}):E.jsx("span",{"data-role":"title",className:b,children:null!=F?F:String.fromCharCode(8203)}),Wo=l.useMemo((()=>{if(v&&G)return A.Q({lowerLimit:v,upperLimit:G,currencySymbol:S});const o=null!=v?v:G;return o?a.ej(o,{currencySymbol:S}):void 0}),[v,G,S]),Fo=l.useMemo((()=>null==P?void 0:P.map(((o,W)=>function(o,W){const F=o.slice(0,-1);let v=null;switch(o.slice(-1)){case"C":v=k.KY.C;break;case"D":v=k.KY.D;break;case"H":v=k.KY.H;break;case"S":v=k.KY.S}return"|"===o?E.jsx("span",{className:w,children:o}):F&&null!==v?E.jsx(x,{rank:F,suit:v},W):null}(o,W)))),[P]),Eo=!!(F||W||Wo||Fo||y||L);return E.jsxs("tr",{"data-role":`bet-limits_${W}`,className:I.A({[n]:X,[K]:D,[Y]:Eo,[q]:z,[C]:s,[_]:h.DS.HAS_NOTCH,[c]:h.DS.IS_IPHONE14_PRO}),children:[E.jsx("td",{className:I.A(m,{[t]:!U&&!X,[T]:Z,[$]:R}),colSpan:Z?2:1,children:E.jsxs("div",{className:u,children:[oo,Z&&!!Wo&&E.jsxs("span",{className:r,"data-min":v,"data-max":G,"data-role":"limits",children:[f.be,Wo]})]})}),!Z&&E.jsx("td",{className:Q,children:E.jsx("div",{className:u,children:Fo?E.jsxs("div",{"data-role":"ranks-and-suits",className:I.A(j,{[V]:X}),children:[...Fo]}):y||!Z&&E.jsx("div",{"data-role":"min-max",className:r,"data-min":v,"data-max":G,children:Wo})})}),i&&E.jsx("td",{className:I.A(B,{[T]:Z}),children:E.jsx("div",{className:I.A(u,{[O]:M,[d]:g.sU()}),"data-role":"payout",children:L})})]})}));X.displayName="BetLimitsAndPayoutsRow";const S="footerContentWrapper--24329",s="mobile--5a6b8",i=l.memo((({children:o,isMobile:W})=>E.jsx("tr",{"data-role":"bet-limits-footer",children:E.jsx("td",{colSpan:3,className:I.A(S,{[s]:W}),children:o})})));i.displayName="BetLimitsAndPayoutsFooter";const R=v.PA((o=>{const{isMobile:W}=o,{settings:F,abstractGame:v}=G.Pj(),{currencySymbol:I}=v,l=a.ej(F.scbPayoutLimit,{currencySymbol:I});return E.jsxs("tbody",{children:[E.jsx(X,{betKey:L.X.BetLimitFreeSpaceCard,currencySymbol:I,isMobile:W,payout:U.T(L.X.BetLimitFreeSpacePayout),min:F.lottoFreeSpaceBetMin,max:F.lottoFreeSpaceBetMax},"freeSpaceCardBetName"),E.jsx(X,{betKey:L.X.BetLimitMultiCard,currencySymbol:I,isMobile:W,payout:U.T(L.X.BetLimitMultiCardPayout),min:F.lottoMultiBetMin,max:F.lottoMultiBetMax},"multiCardBetName"),E.jsx(X,{betKey:"betLimit.coinFlip",currencySymbol:I,isMobile:W,payout:U.T(L.X.BetLimitBonusBetPayout),min:F.coinFlipBetMin,max:F.coinFlipBetMax},"coinFlipBetName"),E.jsx(X,{betKey:L.X.BetLimitCashHunt,currencySymbol:I,isMobile:W,payout:U.T(L.X.BetLimitBonusBetPayout),min:F.cashHuntBetMin,max:F.cashHuntBetMax},"cashHuntBetName"),E.jsx(X,{betKey:L.X.BetLimitPachinko,currencySymbol:I,isMobile:W,payout:U.T(L.X.BetLimitBonusBetPayout),min:F.pachinkoBetMin,max:F.pachinkoBetMax},"pachinkoBetName"),E.jsx(X,{betKey:L.X.BetLimitCrazyTime,currencySymbol:I,isMobile:W,payout:U.T(L.X.BetLimitBonusBetPayout),min:F.crazyTimeBetMin,max:F.crazyTimeBetMax},"crazyTimeBetName"),E.jsx(i,{isMobile:W,children:`${U.T(L.X.LimitPlatePayoutLimit)} ${l}`})]})}));var J=F(132006),D=F(25581),M=F(897899),H=F(744327);const b=({betMinLimit:o,betMaxLimit:W,currencySymbol:F,tableMinLimit:v,tableMaxLimit:a,tableName:G,tBodyComponent:L,preSection:U,areLimitsInlined:h=!1,hideTitle:p=!1,isTablet:f=!1,showPayouts:k,legacyMenuMode:Z})=>{const P=l.useContext(J.lv),y=l.useMemo((()=>A.Q({lowerLimit:o,upperLimit:W,currencySymbol:F})),[o,W,F]),z=l.useMemo((()=>{if(a&&v)return A.Q({lowerLimit:v,upperLimit:a,currencySymbol:F})}),[v,a,F]);return E.jsxs(E.Fragment,{children:[E.jsx(D.y,{className:H.A.container,useMobileScrollable:!0,dataRole:Z?void 0:"drawer-scrollable",hasContentFadeOut:!Z,refCallback:null==P?void 0:P.assignScrollable,children:E.jsxs("div",{className:H.A.scrollContainer,children:[!p&&E.jsxs("div",{className:I.A(H.A.tableInfo,{[H.A.tablet]:f}),children:[E.jsxs("div",{children:[`${g.Tl("table")}: `,E.jsx("span",{className:H.A.tableName,children:G})]}),E.jsxs("div",{children:[E.jsx("span",{children:g.Tl("betlimits3")})," ",E.jsx("span",{className:H.A.limits,children:y})]}),!!z&&E.jsxs("div",{"data-role":"table-limits",children:[E.jsx("span",{children:g.Tl("tableLimits3")})," ",E.jsx("span",{className:H.A.limits,children:z})]})]}),U,E.jsxs("table",{className:H.A.table,children:[E.jsx(M.V,{isMobile:!0,areLimitsInlined:h,showPayouts:k,legacyMenuMode:Z}),L]})]})}),Z&&E.jsx("div",{className:I.A(H.A.shadow,{[H.A.tablet]:f})})]})};b.displayName="MobileBetLimitsAndPayoutsTable";const oo=v.PA((()=>{const{settings:o,abstractGame:W}=G.Pj(),{currencySymbol:F}=W;return E.jsx(b,{currencySymbol:F,betMinLimit:o.tableMinBet,betMaxLimit:o.tableMaxBet,tableName:o.tableName,tBodyComponent:E.jsx(R,{isMobile:!0})})})),Wo="logoContainer--1cb65",Fo="visible--7c608",Eo="tableLogo--c88f7",vo=F.p+"images/logo.3eacbef0.webp",ao=({visible:o})=>{const[W,F]=l.useState(!1),v=l.useCallback((()=>{F(!0)}),[F]);return E.jsx("div",{className:I.A(Wo,{[Fo]:W&&o}),children:E.jsx("img",{className:Eo,src:vo,onLoad:v})})},Go=v.PA((()=>{const o={visible:G.Pj().game.isLottoPhase};return E.jsx(ao,{...o})}));var Lo=F(835990),Uo=F(899646),Io=F(757069);const lo="fadeInGradient--6b5e4",ho="fadeOutGradient--8e87b",po="isBottom--d60af",go="gradientContainer--2b25f",fo="splitGradient--e14af",Ao=v.PA((({children:o})=>{const W=G.Pj(),{phase:F}=W.game,{layoutMode:v}=W.device,[a,L]=l.useState({...Zo(F)}),[U,I]=l.useState(void 0),[h,p]=l.useState(0),g=Io.Z(F);return l.useEffect((()=>{if(W.restore.isRestoring)return;const o=F===Uo.Qc.Resolved&&g?g:F;L({...Zo(o),animationDuration:`${Lo.I2}ms`})}),[F,W.restore.isRestoring]),l.useEffect((()=>{if(!W.restore.isRestoring&&void 0!==g&&g!==F){const o=g===Uo.Qc.Init?F:g;I({...Zo(o),animationDuration:`${Lo.I2}ms`}),h&&clearTimeout(h);const W=setTimeout((()=>{I(void 0)}),Lo.I2);return()=>p(W)}}),[h,g,F,W.restore.isRestoring]),"tablet"===v?E.jsx(E.Fragment,{children:o}):E.jsxs(E.Fragment,{children:[o,E.jsx(ko,{gradientStyle:a,className:lo}),void 0!==U&&E.jsx(ko,{gradientStyle:U,className:ho})]})})),ko=({gradientStyle:o,className:W})=>E.jsxs("div",{className:fo,children:[E.jsx("div",{className:go,children:E.jsx("div",{className:W,style:o})}),E.jsx("div",{className:I.A(go,{[po]:!0}),children:E.jsx("div",{className:I.A(W,{[po]:!0}),style:o})})]},W);function Zo(o){switch(o){case Uo.Qc.CoinFlip:return{background:"linear-gradient(180deg, rgba(85, 62, 38, 0) 1.24%, rgba(85, 62, 38, 0.8) 45.05%, #553E26 50.01%, rgba(85, 62, 38, 0.8) 55.01%, rgba(85, 62, 38, 0) 98.21%)"};case Uo.Qc.Pachinko:return{background:"linear-gradient(180deg, rgba(89, 28, 93, 0) 1.24%, rgba(89, 28, 93, 0.8) 45.05%, #591C5D 50.01%, rgba(89, 28, 93, 0.8) 55.01%, rgba(89, 28, 93, 0) 98.21%)"};case Uo.Qc.CashHunt:return{background:"linear-gradient(180deg, rgba(2, 73, 42, 0) 1.24%, rgba(2, 73, 42, 0.8) 45.05%, #02492A 50.01%, rgba(2, 73, 42, 0.8) 55.01%, rgba(2, 73, 42, 0) 98.21%)"};case Uo.Qc.CrazyTime:return{background:"linear-gradient(180deg, rgba(121, 29, 29, 0) 1.24%, rgba(121, 29, 29, 0.8) 45.05%, #791D1D 50.01%, rgba(121, 29, 29, 0.8) 55.01%, rgba(121, 29, 29, 0) 98.21%)"};default:return{background:"linear-gradient(rgba(206, 121, 71, 0) 1.24%, rgba(206, 121, 72, 0.8) 35%, rgba(206, 121, 72, 0.9) 40%, rgba(206, 121, 72, 1) 49.01%, rgba(207, 113, 66, 0.9) 54.01%, rgba(207, 108, 65, 0.5) 69%, rgba(208, 102, 51, 0.3) 80%, rgba(208, 102, 51, 0) 98.21%)"}}}var Po=F(755073),yo=F(151835),zo=F(201764),xo=F(707536),No=F(620802);const eo="desktop--a681c",to="top--457d9",mo="left--655c4",ro="right--4510c",Bo="isClassicView--ee884",jo="portrait--8f5a8",Vo="landscape--56c17",wo=({chosenFlapper:o=No.gc.Blue,layoutMode:W,isClassicView:F})=>{const v="desktop"===W,a="mobilePortrait"===W,G="tablet"===W,L=I.A({[eo]:v,[jo]:a,[Vo]:G,[to]:o===No.gc.Blue,[mo]:o===No.gc.Green,[ro]:o===No.gc.Yellow,[Bo]:F});return E.jsx(xo.m,{className:L,type:zo.e.CrazyBonusResultMultiplier})},Ko=v.PA((()=>{const o=G.Pj(),{layoutMode:W}=o.device;return E.jsx(wo,{chosenFlapper:o.crazyTime.flapper,layoutMode:W,isClassicView:o.abstractGame.isClassicView})}));var To=F(53579);const no="multiplierText--059bb",uo="multiplierContainer--552e4",$o="number--a2952",Yo="multiplierElements--7f6a8",Qo="strokeGradient--0865e",Co="innerStrokeEnabled--d1bf2",qo="middleStroke--371f6",co="copper--1af57",_o="fillGradient--07a1e",Oo="sign--24e22";function Xo(o){const{value:W,isFinalValue:F=!0,sign:v,className:a,applyInnerStroke:G=!0,customElementStyle:L={}}=o,U="string"==typeof W||W>=1e3,h=l.useMemo((()=>I.A(no,a,{[co]:U,[Co]:G})),[a,U,G]),p={...L};return E.jsx("span",{"data-role":"screwball_multiplier_text","data-value":W,"data-formatted-value":`${W}${null!=v?v:""}`,"data-is-final":F,className:h,style:p,children:E.jsxs("span",{className:uo,children:[v&&E.jsxs("span",{className:I.A(Oo),children:[E.jsx("span",{className:I.A(Qo,Yo),children:v}),G&&E.jsx("span",{className:I.A(qo,Yo),children:v}),E.jsx("span",{className:I.A(_o,Yo),children:v})]}),E.jsxs("span",{className:$o,children:[E.jsx("span",{className:I.A(Qo,Yo),children:W}),G&&E.jsx("span",{className:I.A(qo,Yo),children:W}),E.jsx("span",{className:I.A(_o,Yo),children:W})]})]})})}var So=F(757062),so=F(276111),io=F(234341),Ro=F(769413),Jo=F(315049);function Do(o,W,F=!0){const E=Io.Z(W),[v,a]=l.useState(!1),G=(F||void 0===E)&&o>0,[L,U]=l.useState(G?1:W),I=l.useRef(void 0);return l.useEffect((()=>{I.current&&I.current.fastForward()}),[W]),l.useEffect((()=>{if(I.current||L===W||"string"==typeof W)return;I.current=io.M();const E={current:F||void 0===L||"string"==typeof L?1:L};let v;I.current.sequence(Ro.M(E).callback((()=>{U(E.current)})).animateTo({current:W},So.rv(o),so.sn,(()=>U(Math.round(E.current)))).callback((()=>{U(W),a(!0),v&&v(),I.current=void 0}))),v=Jo.l({anim:I.current})})),{currentValue:"string"==typeof W?W:L,isFinal:v}}const Mo="flyingMultiplier--35e8e",Ho="flyingMultiplierText--e3353",bo="flyingMultiplierContent--719c3",oW="hidden--47693",WW=({value:o,withCounter:W})=>{const F=Io.Z(o),v=W&&o!==F&&"number"==typeof o&&"number"==typeof F?function(o,W){const F=Math.abs(o-(null!=W?W:0));return Math.max(1300*F/50,200)}(o,F):0,{currentValue:a,isFinal:G}=Do(v,o);return E.jsx("div",{className:Ho,children:E.jsx(Xo,{value:null!=a?a:0,sign:"number"==typeof a?"x":"",isFinalValue:G})})};var FW,EW=F(228174);function vW({horizontalAlign:o,placeHoldersContext:W,gameDimensions:F,placeHolderPositionOptions:E,placeHolderSizeOptions:v}){const a=W.getRect(E,F),{width:G,height:L}=v?W.getRect(v,F):a,{right:U,left:I,top:l}=a;return function({left:o,top:W,...F}){return{left:Math.round(o),top:Math.round(W),...F}}({scale:L/96,left:o===FW.Center?I+.5*G:o===FW.Right?U:I,top:l+.5*L})}function aW(o){var W;const F=EW.GB(null!==(W=null==o?void 0:o.scale)&&void 0!==W?W:1,2);return{transform:o?`translate3d(${o.left}px,${o.top}px, 0px) scale(${F})`:""}}!function(o){o.Left="Left",o.Center="Center",o.Right="Right"}(FW||(FW={}));var GW=F(910028);const LW=v.PA((({multiplier:o,withCounter:W,flyTo:F,flyFrom:v,flightDuration:a,instantFly:L})=>{const U=G.Pj(),h=L||To.S(),p=l.useContext(GW.so),{gameDimensions:g}=U.abstractGame,f=l.useRef(null);!function({multiplier:o,flyTo:W,flyFrom:F,gameDimensions:E,setStyle:v,isAnimating:a,placeHoldersContext:G,flightDuration:L=1e3}){l.useLayoutEffect((()=>{let U=0;if(o&&F&&W){const o={...aW(vW({gameDimensions:E,placeHoldersContext:G,placeHolderPositionOptions:F,horizontalAlign:FW.Center}))};v(o),U=window.requestAnimationFrame((()=>{const o={...aW(vW({gameDimensions:E,placeHoldersContext:G,placeHolderPositionOptions:W,horizontalAlign:FW.Center})),transitionDuration:a?`${L}ms`:""};v(o)}))}return()=>{U&&window.cancelAnimationFrame(U)}}),[o,W,a,F,E,v,L,G])}({multiplier:o,withCounter:W,flyTo:F,flyFrom:v,gameDimensions:g,placeHoldersContext:p,setStyle:l.useCallback((o=>{var W;const F=null===(W=f.current)||void 0===W?void 0:W.style;F&&Object.assign(F,o)}),[]),isAnimating:!h,flightDuration:a});const A="number"==typeof o&&o>0||"string"==typeof o;return E.jsx("div",{className:I.A(Mo,{[oW]:!A}),"data-role":"screwball_flying_multiplier",ref:f,children:E.jsx("div",{className:bo,children:E.jsx(WW,{value:o,withCounter:W})})})})),UW="bonusGameOverlay--fc233",IW=({flyingMultiplierData:o})=>E.jsxs("div",{className:UW,children:[E.jsx(xo.m,{type:zo.e.TopSlot}),E.jsx(xo.m,{type:zo.e.TopSlotTransitionPath}),E.jsx(xo.m,{type:zo.e.CrazyBonus}),E.jsx(xo.m,{type:zo.e.Pachinko}),E.jsx(xo.m,{type:zo.e.PachinkoResultMultiplier}),E.jsx(xo.m,{type:zo.e.CoinFlip}),E.jsx(xo.m,{type:zo.e.BonusTicketChipMiddle}),E.jsx(xo.m,{type:zo.e.CoinFlipResultMultiplier}),E.jsx(xo.m,{type:zo.e.BonusTicket}),E.jsx(xo.m,{type:zo.e.BonusTicketMiddle}),E.jsx(Ko,{}),void 0!==o&&E.jsx(LW,{multiplier:o.multiplier,withCounter:!0,flyFrom:o.flyFrom,flyTo:o.flyTo,flightDuration:o.flightDuration,instantFly:o.instantFly})]}),lW=v.PA((()=>{const o=G.Pj().flyingMultiplier.flyingMultiplierData;return E.jsx(IW,{flyingMultiplierData:o})}));var hW=F(225844),pW=F(428807);const gW=l.memo((({coin:o,className:W})=>{const{id:F,url:v}=pW.J("coinFlipIcon");return E.jsx("svg",{width:50,height:45,viewBox:"0 0 84 84",className:W,children:E.jsxs("g",{children:[E.jsxs("defs",{children:[E.jsxs("linearGradient",{x1:"96.596%",y1:"33.005%",x2:"2.544%",y2:"67.239%",id:F("a"),children:[E.jsx("stop",{stopColor:"#C3781B",offset:"0%"}),E.jsx("stop",{stopColor:"#EBBB31",offset:"19.332%"}),E.jsx("stop",{stopColor:"#F9E382",offset:"49.351%"}),E.jsx("stop",{stopColor:"#EBBB31",offset:"76.111%"}),E.jsx("stop",{stopColor:"#C3781B",offset:"100%"})]}),E.jsxs("linearGradient",{x1:"50%",y1:"100%",x2:"50%",y2:"0%",id:F("b"),children:[E.jsx("stop",{stopColor:"#FFF7C0",offset:"0%"}),E.jsx("stop",{stopColor:"#FFC034",offset:"49.027%"}),E.jsx("stop",{stopColor:"#FFF0C7",offset:"100%"})]}),E.jsxs("linearGradient",{x1:"49.954%",y1:"99.991%",x2:"49.954%",y2:"-.014%",id:F("c"),children:[E.jsx("stop",{stopColor:"#FFF7C0",offset:"0%"}),E.jsx("stop",{stopColor:"#FFC034",offset:"49.027%"}),E.jsx("stop",{stopColor:"#FFF0C7",offset:"100%"})]}),E.jsxs("linearGradient",{x1:"41.271%",y1:".739%",x2:"58.638%",y2:"99.238%",id:F("d"),children:[E.jsx("stop",{stopColor:"#FFF0C7",offset:"0%"}),"50.61%",E.jsx("stop",{stopColor:"#F3C936",offset:"50.973%"}),E.jsx("stop",{stopColor:"#FFFDCF",offset:"100%"})]}),E.jsxs("linearGradient",{x1:"49.954%",y1:"99.991%",x2:"49.954%",y2:"-.014%",id:F("e"),children:[E.jsx("stop",{stopColor:"#D08D06",offset:"0%"}),E.jsx("stop",{stopColor:"#924822",offset:"49.174%"}),E.jsx("stop",{stopColor:"#D08D06",offset:"100%"})]}),o===hW.M.Red?E.jsxs(E.Fragment,{children:[E.jsxs("linearGradient",{x1:"91.954%",y1:"27.629%",x2:"14.563%",y2:"68.906%",id:F("ay"),children:[E.jsx("stop",{stopColor:"#EC1C31",offset:"20.033%"}),E.jsx("stop",{stopColor:"#B10524",offset:"100% "})]}),E.jsxs("linearGradient",{x1:"41.312%",y1:"44.806%",x2:"56.073%",y2:"61.847%",id:F("az"),children:[E.jsx("stop",{stopColor:"#EC3749",stopOpacity:"0",offset:"13.8%"}),E.jsx("stop",{stopColor:"#EB3648",stopOpacity:".073",offset:"22.505%"}),E.jsx("stop",{stopColor:"#E93346",stopOpacity:".264",offset:"39.673%"}),E.jsx("stop",{stopColor:"#E62E42",stopOpacity:".569",offset:"63.41%"}),E.jsx("stop",{stopColor:"#E32B3F",stopOpacity:".8",offset:"80.006%"})]})]}):E.jsxs(E.Fragment,{children:[E.jsxs("linearGradient",{x1:"76.45%",y1:"35.898%",x2:"14.563%",y2:"68.906%",id:F("ay"),children:[E.jsx("stop",{stopColor:"#1C85EC",offset:"0%"}),E.jsx("stop",{stopColor:"#0533B1",offset:"100%"})]}),E.jsxs("linearGradient",{x1:"39.557%",y1:"37.658%",x2:"58.069%",y2:"67.562%",id:F("az"),children:[E.jsx("stop",{stopColor:"#37A1EC",stopOpacity:"0",offset:"0%"}),E.jsx("stop",{stopColor:"#5F9FFA",stopOpacity:".073",offset:"22.505%"}),E.jsx("stop",{stopColor:"#3C6CFC",stopOpacity:".26",offset:"39.673%"}),E.jsx("stop",{stopColor:"#3C6CFC",stopOpacity:".569",offset:"63.41%"}),E.jsx("stop",{stopColor:"#307CFB",stopOpacity:".8",offset:"100%"})]})]})]}),E.jsxs("g",{fill:"none",fillRule:"evenodd",children:[E.jsx("path",{d:"M51.485 1.894C29.335-3.308 7.16 10.424 1.946 32.571c-5.214 22.147 8.507 44.33 30.651 49.554 22.145 5.226 44.334-8.483 49.57-30.625 5.226-22.171-8.51-44.38-30.682-49.606z",fill:v("a")}),E.jsx("path",{d:"M51.664 1.137C29.096-4.201 6.474 9.767 1.137 32.336c-5.338 22.568 8.63 45.19 31.199 50.527 22.568 5.338 45.19-8.63 50.527-31.199 5.338-22.568-8.63-45.19-31.199-50.527zm30.17 50.284A40.933 40.933 0 1 1 51.407 2.227a40.901 40.901 0 0 1 30.427 49.194z",fill:v("b")}),E.jsx("path",{d:"M50.048 7.973c-18.793-4.425-37.615 7.219-42.046 26.01C3.57 52.774 15.208 71.6 33.998 76.038c18.79 4.437 37.62-7.194 42.063-25.983 4.437-18.804-7.21-37.645-26.013-42.082zm25.436 41.946c-4.39 18.484-22.931 29.911-41.417 25.527C15.582 71.06 4.148 52.524 8.527 34.038 12.905 15.55 31.439 4.11 49.927 8.484c18.499 4.385 29.941 22.936 25.557 41.435z",fill:v("c")}),E.jsx("path",{d:"M49.845 8.829c-18.32-4.314-36.669 7.037-40.989 25.356-4.32 18.318 7.026 36.671 25.343 40.997 18.317 4.326 36.674-7.013 41.006-25.33 4.325-18.33-7.028-36.698-25.36-41.023zm22.01 40.232C67.94 65.54 51.409 75.73 34.927 71.82 18.445 67.91 8.251 51.384 12.155 34.9S32.583 8.218 49.068 12.117c16.494 3.91 26.696 20.45 22.787 36.944z",fill:v("d")}),E.jsx("path",{d:"M49.91 8.557C31.44 4.207 12.94 15.652 8.585 34.12c-4.355 18.468 7.083 36.972 25.55 41.333 18.467 4.361 36.975-7.07 41.342-25.537 4.361-18.481-7.086-37-25.567-41.36zm25 41.226c-4.316 18.167-22.538 29.399-40.707 25.09-18.168-4.31-29.405-22.529-25.102-40.699C13.404 16.004 31.62 4.761 49.791 9.06 67.973 13.369 79.219 31.6 74.91 49.783z",fill:v("e")}),E.jsx("image",{width:"84",height:"84",xlinkHref:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI0NSIgdmlld0JveD0iMCAwIDg0IDg0Ij48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1mIiB4MT0iNTAuMDE5JSIgeDI9IjUwLjAxOSUiIHkxPSIxMzEzLjk0NyUiIHkyPSItMzMyNS44MzMlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLWciIHgxPSI0OS45OTMlIiB4Mj0iNDkuOTkzJSIgeTE9IjE2NjMuNzE1JSIgeTI9Ii0zNTUxLjk4NCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktaCIgeDE9IjUwLjAwMSUiIHgyPSI1MC4wMDElIiB5MT0iNjU1LjAwNiUiIHkyPSItMjg0OS4wODglIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLWkiIHgxPSI1MC4wMDElIiB4Mj0iNTAuMDAxJSIgeTE9IjU4Ny4xMzglIiB5Mj0iLTE3OTkuMTE3JSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1qIiB4MT0iNTAlIiB4Mj0iNTAlIiB5MT0iMTc3Ni4zMzklIiB5Mj0iLTE4OTMuNjgxJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1rIiB4MT0iNDkuOTk5JSIgeDI9IjQ5Ljk5OSUiIHkxPSIxNzc0Ljc5JSIgeTI9Ii0yMjQ5LjQzJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1sIiB4MT0iNDkuOTgzJSIgeDI9IjQ5Ljk4MyUiIHkxPSIxNzg3LjUyOSUiIHkyPSItMzIwNi44NDQlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLW0iIHgxPSI0OS45OTklIiB4Mj0iNDkuOTk5JSIgeTE9IjE3NzYuNjk3JSIgeTI9Ii0yNjc2Ljk1MiUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktbiIgeDE9IjQ5Ljk5OCUiIHgyPSI0OS45OTglIiB5MT0iMTk1LjU0NyUiIHkyPSItMjM4NS44NjIlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLW8iIHgxPSI0OS45OTMlIiB4Mj0iNDkuOTkzJSIgeTE9IjIwODEuMjUlIiB5Mj0iLTc5LjE5NCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktcCIgeDE9IjUwLjAwMSUiIHgyPSI1MC4wMDElIiB5MT0iMTc4My4zOTIlIiB5Mj0iLTE1OTYuNTMxJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1xIiB4MT0iNTAuMDA1JSIgeDI9IjUwLjAwNSUiIHkxPSIyMTE1LjEzNyUiIHkyPSItNDguODg3JSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1yIiB4MT0iNDkuOTk4JSIgeDI9IjQ5Ljk5OCUiIHkxPSI1MTcuNzM3JSIgeTI9Ii0yNzM0LjA1NiUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktcyIgeDE9IjUwLjAwMiUiIHgyPSI1MC4wMDIlIiB5MT0iMjA0OC40NjclIiB5Mj0iLTExNy4wNTIlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLXQiIHgxPSI0OS45OTclIiB4Mj0iNDkuOTk3JSIgeTE9IjMxOS4wODElIiB5Mj0iLTI1MzkuNjM1JSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS11IiB4MT0iNTAlIiB4Mj0iNTAlIiB5MT0iNDA3LjI1NCUiIHkyPSItMjYzMC44MzclIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLXYiIHgxPSI1MC4wMDclIiB4Mj0iNTAuMDA3JSIgeTE9IjIwMTguMDcyJSIgeTI9Ii0xNjIuOTElIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLXciIHgxPSI1MC4wMDglIiB4Mj0iNTAuMDA4JSIgeTE9IjEwNDIuMDgxJSIgeTI9Ii0zMTQxLjIwMSUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmkteCIgeDE9IjQ5Ljk5JSIgeDI9IjQ5Ljk5JSIgeTE9IjI0OS40ODglIiB5Mj0iLTI0NTkuMTA0JSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS15IiB4MT0iNDkuOTk0JSIgeDI9IjQ5Ljk5NCUiIHkxPSIxODg4LjYxMiUiIHkyPSItNTM4LjA3NyUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmkteiIgeDE9IjUwLjAwNCUiIHgyPSI1MC4wMDQlIiB5MT0iODI2LjcxMiUiIHkyPSItMjk4My44NzMlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLUEiIHgxPSI1MC4wMTUlIiB4Mj0iNTAuMDE1JSIgeTE9IjEyNy4yNiUiIHkyPSItMjI2MS40NTclIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLUIiIHgxPSI0OS45OTUlIiB4Mj0iNDkuOTk1JSIgeTE9IjE1NS4zMTQlIiB5Mj0iLTIzMjEuMjclIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLUMiIHgxPSI1MC4wMDIlIiB4Mj0iNTAuMDAyJSIgeTE9IjExMC43MjklIiB5Mj0iLTIyMDcuNzUxJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1EIiB4MT0iNTAuMDA4JSIgeDI9IjUwLjAwOCUiIHkxPSIyMTUyLjc5MyUiIHkyPSItMjYuMjYzJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1FIiB4MT0iNDkuOTklIiB4Mj0iNDkuOTklIiB5MT0iMjE5MS40MTIlIiB5Mj0iLTExLjIyOCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktRiIgeDE9IjQ5Ljk5OSUiIHgyPSI0OS45OTklIiB5MT0iMTkxMC45NzUlIiB5Mj0iLTQzOS4zJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1HIiB4MT0iNTAlIiB4Mj0iNTAlIiB5MT0iMTg0Ny4yMTIlIiB5Mj0iLTc4Ni4zMSUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktSCIgeDE9IjUwLjAwNiUiIHgyPSI1MC4wMDYlIiB5MT0iMTgyOC4yOTglIiB5Mj0iLTk0My4xOTUlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLUkiIHgxPSI0OS45OTQlIiB4Mj0iNDkuOTk0JSIgeTE9IjE4NjcuMTY4JSIgeTI9Ii02NTIuNjElIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLUoiIHgxPSI0OS45OTglIiB4Mj0iNDkuOTk4JSIgeTE9IjE4MDkuNzc3JSIgeTI9Ii0xMTI4LjM3NyUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktSyIgeDE9IjUwLjAwMSUiIHgyPSI1MC4wMDElIiB5MT0iMTkzNS41OCUiIHkyPSItMzU0LjEyOSUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktTCIgeDE9IjUwLjAwMiUiIHgyPSI1MC4wMDIlIiB5MT0iMTk4OC45MzclIiB5Mj0iLTIxNy4xNCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktTSIgeDE9IjQ5Ljk5MyUiIHgyPSI0OS45OTMlIiB5MT0iMTc5NC4wMTIlIiB5Mj0iLTEzNDQuMDA0JSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1OIiB4MT0iNTAlIiB4Mj0iNTAlIiB5MT0iMTk2MS40NzklIiB5Mj0iLTI4MC41MzUlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLU8iIHgxPSI1MC4wMDQlIiB4Mj0iNTAuMDA0JSIgeTE9IjExOC4wOTglIiB5Mj0iLTIwNzEuODU5JSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1QIiB4MT0iNDkuOTkzJSIgeDI9IjQ5Ljk5MyUiIHkxPSI5NjIuMDA2JSIgeTI9Ii0xNzM3LjQ5OCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktUSIgeDE9IjQ5Ljk5NSUiIHgyPSI0OS45OTUlIiB5MT0iNjkzLjY1NyUiIHkyPSItMTc3Ny43NDUlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLVIiIHgxPSI0OS45NzUlIiB4Mj0iNDkuOTc1JSIgeTE9IjM2MTguNDkyJSIgeTI9Ii0xNjk0LjM4NSUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktUyIgeDE9IjUwLjAwMSUiIHgyPSI1MC4wMDElIiB5MT0iMTgzOS4zNjQlIiB5Mj0iLTE2NzguOTI5JSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1UIiB4MT0iNDkuOTk4JSIgeDI9IjQ5Ljk5OCUiIHkxPSIzMTU5LjMzNCUiIHkyPSItODI3LjUxNiUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktVSIgeDE9IjUwLjAwMSUiIHgyPSI1MC4wMDElIiB5MT0iMjE2My41MzclIiB5Mj0iLTE2NzQuMDklIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLVYiIHgxPSI1MC4wMDElIiB4Mj0iNTAuMDAxJSIgeTE9IjI1NTMuNTQxJSIgeTI9Ii0xNjc0LjYxNyUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktVyIgeDE9IjUwLjAwMyUiIHgyPSI1MC4wMDMlIiB5MT0iMzAyOS4wMjElIiB5Mj0iLTE2ODAuOTcxJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1YIiB4MT0iNTAuMDAxJSIgeDI9IjUwLjAwMSUiIHkxPSI4MTcuNTQyJSIgeTI9Ii0xNzU3LjUxJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1ZIiB4MT0iNDkuOTk0JSIgeDI9IjQ5Ljk5NCUiIHkxPSIyMjgzLjk2OSUiIHkyPSItNi4xMDUlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLVoiIHgxPSI1MC4wMDglIiB4Mj0iNTAuMDA4JSIgeTE9IjEwNC4zNTQlIiB5Mj0iLTIxNTcuNTcyJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1hYSIgeDE9IjUwLjAwMiUiIHgyPSI1MC4wMDIlIiB5MT0iMTA3LjA1NyUiIHkyPSItMjExMy4xNDQlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLWFiIiB4MT0iNTAlIiB4Mj0iNTAlIiB5MT0iMTEzMi4zMDYlIiB5Mj0iLTE3MTguNTY0JSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1hYyIgeDE9IjQ5Ljk3OSUiIHgyPSI0OS45NzklIiB5MT0iMjIzNC44OTElIiB5Mj0iLTQuMzA4JSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1hZCIgeDE9IjQ5Ljk4OSUiIHgyPSI0OS45ODklIiB5MT0iMjMzNC4wMjQlIiB5Mj0iLTE3LjMyJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1hZSIgeDE9IjUwJSIgeDI9IjUwJSIgeTE9IjEzMzMuMDg1JSIgeTI9Ii0xNzAxLjY1NyUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktYWYiIHgxPSI0OS45OTklIiB4Mj0iNDkuOTk5JSIgeTE9IjE1NjUuOTkyJSIgeTI9Ii0xNjg4LjExOSUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktYWciIHgxPSI0OS45NzYlIiB4Mj0iNDkuOTc2JSIgeTE9IjM1MzQuMTY4JSIgeTI9Ii0xMzc3LjA0JSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1haCIgeDE9IjQ5Ljk5NyUiIHgyPSI0OS45OTclIiB5MT0iMTM2Ljg4NCUiIHkyPSItMjAzMi42MzklIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLWFpIiB4MT0iNTAuMDE0JSIgeDI9IjUwLjAxNCUiIHkxPSIxOTcuNDklIiB5Mj0iLTE5NjQuOTQ0JSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1haiIgeDE9IjQ5Ljk1NiUiIHgyPSI0OS45NTYlIiB5MT0iMjM4OS44NzMlIiB5Mj0iLTM5LjM5MSUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktYWsiIHgxPSI0OS45OTMlIiB4Mj0iNDkuOTkzJSIgeTE9IjIzOS4yMjUlIiB5Mj0iLTE5MzIuNTMxJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1hbCIgeDE9IjQ5Ljk5NiUiIHgyPSI0OS45OTYlIiB5MT0iMjg5LjE5NCUiIHkyPSItMTkwMi43NDclIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLWFtIiB4MT0iNDkuOTk5JSIgeDI9IjQ5Ljk5OSUiIHkxPSI0OTUuNDkxJSIgeTI9Ii0xODIyLjgwNSUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktYW4iIHgxPSI0OS45OTklIiB4Mj0iNDkuOTk5JSIgeTE9IjM0Ny45OTQlIiB5Mj0iLTE4NzUuMDY4JSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1hbyIgeDE9IjQ5Ljk5JSIgeDI9IjQ5Ljk5JSIgeTE9IjI0NTIuNjgyJSIgeTI9Ii03My40NzIlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLWFwIiB4MT0iNTAlIiB4Mj0iNTAlIiB5MT0iNDE2LjM1OCUiIHkyPSItMTg0OC4zOTMlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLWFxIiB4MT0iNTAuMDI5JSIgeDI9IjUwLjAyOSUiIHkxPSIyNzgxLjI5MiUiIHkyPSItMzU5LjAxNCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktYXIiIHgxPSI0OS45OTQlIiB4Mj0iNDkuOTk0JSIgeTE9IjMwMTQuMDY0JSIgeTI9Ii02MzUuNDU3JSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1hcyIgeDE9IjUwJSIgeDI9IjUwJSIgeTE9IjI4ODkuNDc3JSIgeTI9Ii00ODIuMDM3JSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1hdCIgeDE9IjQ5Ljk5OCUiIHgyPSI0OS45OTglIiB5MT0iMTYzLjM5MSUiIHkyPSItMTk5Ny42MTMlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLWF1IiB4MT0iNDkuOTk3JSIgeDI9IjQ5Ljk5NyUiIHkxPSIzMzMwLjA0JSIgeTI9Ii0xMDY5LjI2MiUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktYXYiIHgxPSI1MC4wMDQlIiB4Mj0iNTAuMDA0JSIgeTE9IjI2ODQuMjMyJSIgeTI9Ii0yNjAuMjMlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjhEQzlBIi8+PHN0b3Agb2Zmc2V0PSI1MC42MSUiIHN0b3AtY29sb3I9IiNFRkM2NjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGOURFQTAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iY2ZpLWF3IiB4MT0iNTAuMDM0JSIgeDI9IjUwLjAzNCUiIHkxPSIyNTIzLjE5OSUiIHkyPSItMTIwLjQzMyUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGOERDOUEiLz48c3RvcCBvZmZzZXQ9IjUwLjYxJSIgc3RvcC1jb2xvcj0iI0VGQzY2NSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5REVBMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktYXgiIHgxPSI1MC4wMzYlIiB4Mj0iNTAuMDM2JSIgeTE9IjI1OTkuNjg5JSIgeTI9Ii0xODEuODUzJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y4REM5QSIvPjxzdG9wIG9mZnNldD0iNTAuNjElIiBzdG9wLWNvbG9yPSIjRUZDNjY1Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjRjlERUEwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImNmaS1heSIgeDE9IjkxLjk1NCUiIHgyPSIxNC41NjMlIiB5MT0iMjcuNjI5JSIgeTI9IjY4LjkwNiUiPjxzdG9wIG9mZnNldD0iMjAuMDMzJSIgc3RvcC1jb2xvcj0iI0VDMUMzMSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0IxMDUyNCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjZmktYXoiIHgxPSI0MS4zMTIlIiB4Mj0iNTYuMDczJSIgeTE9IjQ0LjgwNiUiIHkyPSI2MS44NDclIj48c3RvcCBvZmZzZXQ9IjEzLjglIiBzdG9wLWNvbG9yPSIjRUMzNzQ5IiBzdG9wLW9wYWNpdHk9IjAiLz48c3RvcCBvZmZzZXQ9IjIyLjUwNSUiIHN0b3AtY29sb3I9IiNFQjM2NDgiIHN0b3Atb3BhY2l0eT0iLjA3MyIvPjxzdG9wIG9mZnNldD0iMzkuNjczJSIgc3RvcC1jb2xvcj0iI0U5MzM0NiIgc3RvcC1vcGFjaXR5PSIuMjY0Ii8+PHN0b3Agb2Zmc2V0PSI2My40MSUiIHN0b3AtY29sb3I9IiNFNjJFNDIiIHN0b3Atb3BhY2l0eT0iLjU2OSIvPjxzdG9wIG9mZnNldD0iODAuMDA2JSIgc3RvcC1jb2xvcj0iI0UzMkIzRiIgc3RvcC1vcGFjaXR5PSIuOCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIGZpbGw9Im5vbmUiPjxwYXRoIGlkPSJjZmktRmlsbC0xIiBmaWxsPSIjQjU3OTEzIiBkPSJNMzQuOTA1IDc3LjIxN2MtLjEzNC4wOTItLjI0Ni4yMTEtLjMzLjM1bC0xLjE1MyAxLjc5M2MtLjAyLjAzLS4wNC4wNTktLjA3NC4xMTVsLS4xNDMuMjM0LjA0Ni4wMTljLS4wODMuMzEzLS4wMjcuNjQ2LjE1Ni45MTRhMS4xMjYgMS4xMjYgMCAwIDAgMS44NDMuMDE2bDEuMjItMS44OTJjLjI1Ni0uMzguMjU0LS44NzctLjAwNS0xLjI1NGExLjEyNiAxLjEyNiAwIDAgMC0xLjU2LS4yOTV6bS0xLjY2OS41ODJhMS4xMjIgMS4xMjIgMCAwIDAtMS45NS0xLjA3bC0xLjMxMSAxLjY3OGExLjYxMiAxLjYxMiAwIDAgMC0uMDg3LjExMWwtLjE0My4xOTUuMDMzLjAyM2ExLjEyIDEuMTIgMCAwIDAgMS44OTYgMS4xMzNsMS42MTEtMi4wNTgtLjA0OS0uMDEyem02LjUyLjA2OWExLjEyMiAxLjEyMiAwIDAgMC0xLjg3Ni4yMjdsLS45ODcgMS44OTNjLS4wMTYuMDI5LS4wMzEuMDU5LS4wNi4xMThsLS4xMDUuMjEuMDM2LjAxOGExLjEyIDEuMTIgMCAwIDAgMi4wNjkuNzhsMS4xOC0yLjI2Mi0uMDMyLS4wMDhjLjA4NC0uMzQyIDAtLjcwNS0uMjI1LS45NzZ6TTI5Ljk5OCA3NS45YTEuMTI1IDEuMTI1IDAgMCAwLTEuNDgtLjU3MyAxLjE1IDEuMTUgMCAwIDAtLjM4Ny4yODRsLTEuNDY0IDEuNTU3LS4wODguMDk0LS4xNzYuMTkyLjAzOS4wM2ExLjEyIDEuMTIgMCAwIDAgMS43OSAxLjI5bDEuNTQ0LTEuNjRjLjMyLS4zMjcuNDA5LS44MTYuMjIyLTEuMjM1em0xMy4wMTUgMi4wMjRhMS4xMjYgMS4xMjYgMCAwIDAtMS44NDguMzk0bC0uODEgMS45NzRhMS44MDkgMS44MDkgMCAwIDAtLjA1MS4xMjRsLS4wODYuMjE3LjAzOC4wMTVhMS4xMTggMS4xMTggMCAwIDAgMS4xMDggMS4yMzhoLjAwNmMuMjk1LjAwMS41NzktLjExNS43ODgtLjMyNC4wOTQtLjA5NC4xNzEtLjIwMy4yMjktLjMyNGwxLjAzNS0yLjUxLS4wODUuMDJhMS4xMTYgMS4xMTYgMCAwIDAtLjMyNC0uODI0ek0yNi45NzQgNzQuNjlhMS4xMjQgMS4xMjQgMCAwIDAtMS40MjMtLjcwMyAxLjE0MiAxLjE0MiAwIDAgMC0uNDExLjI0N2wtMS41OTUgMS40MTdhMi4yMSAyLjIxIDAgMCAwLS4xLjA4OWwtLjE4My4xNjYuMDMyLjAzMmExLjExMyAxLjExMyAwIDAgMC0uMTEuOTQyIDEuMTI0IDEuMTI0IDAgMCAwIDEuNzcuNTE0bDEuNjg3LTEuNDk0Yy4zNDgtLjI5Ny40OC0uNzc2LjMzMy0xLjIxem0xOC40MjggMi43MzhhMS4xMTMgMS4xMTMgMCAwIDAtLjk4Ny44MTlsLS42MjggMi4wMzNjLS4wMTQuMDM2LS4wMjQuMDctLjA0Mi4xMzNsLS4wNjcuMjM1LjA0MS4wMWExLjEyIDEuMTIgMCAwIDAgMi4xNzQuMzlsLjY3LTIuMTUyYTEuMTIyIDEuMTIyIDAgMCAwLTEuMTYxLTEuNDY4em0tMjEuMjk2LTQuMTk0YTEuMTIyIDEuMTIyIDAgMCAwLTEuNzg1LS42MmwtMS43MTcgMS4yN2MtLjAyOC4wMi0uMDU3LjA0LS4xMDcuMDhsLS4yMDQuMTU1LjAzMS4wMzRhMS4xMiAxLjEyIDAgMCAwIDEuNTI5IDEuNTkybDEuODE0LTEuMzM3Yy4zNzMtLjI2NC41NDgtLjczLjQ0LTEuMTc0em0yNS4yNTcgMy45NGExLjEyMyAxLjEyMyAwIDAgMC0xLjc1LjcxNmwtLjQ0NCAyLjA4M2MtLjAxLjAzNy0uMDE4LjA3Mi0uMDMuMTNsLS4wNDMuMjE2LjAzOC4wMWExLjExOCAxLjExOCAwIDAgMCAyLjAzNS41NzggMS4xOCAxLjE4IDAgMCAwIC4xNjYtLjM2bC41NTUtMi41Ny0uMDU0LjAxNGExLjExNSAxLjExNSAwIDAgMC0uNDczLS44MTd6bS0yNy45NTYtNS42M2ExLjEyNSAxLjEyNSAwIDAgMC0xLjI3NS0uOTQ1IDEuMTQgMS4xNCAwIDAgMC0uNDQ4LjE3bC0xLjgyMyAxLjExMmExLjY4MiAxLjY4MiAwIDAgMC0uMTE1LjA3bC0uMTc5LjExNi4wMTYuMDNjLS4yMzUuMjQ4LS4zNDQuNTkxLS4yOTQuOTNhMS4xMjEgMS4xMjEgMCAwIDAgMS42NS44MThsMS45MjYtMS4xN2MuMzk2LS4yMy42MTEtLjY3OS41NDItMS4xMzF6bTMxLjAxOCA0Ljg0NmExLjEyMSAxLjEyMSAwIDAgMC0xLjY3OC44NjdsLS4yNiAyLjExMWExLjUzIDEuNTMgMCAwIDAtLjAxOC4xNGwtLjAyNS4yMzkuMDQxLjAwM2ExLjEyIDEuMTIgMCAwIDAgMi4yMS4wMDVsLjMyMi0yLjU3Ni0uMDQ0LjAxYTEuMTE2IDEuMTE2IDAgMCAwLS41NDgtLjc5OXptLTMzLjUzOC02Ljc1NGExLjEyOCAxLjEyOCAwIDAgMC0xLjE4OC0xLjA1M2MtLjE2MS4wMS0uMzIuMDU1LS40NjIuMTMxbC0xLjkxLjk0N2ExLjc0IDEuNzQgMCAwIDAtLjEyNS4wNmwtLjE4OC4xLjAxMy4wMzJhMS4xMTggMS4xMTggMCAwIDAgLjgxMyAxLjk1MmMuMTMzLS4wMDkuMjYzLS4wNC4zODUtLjA5MmwyLjAyMS0uOTk4Yy40MTUtLjE5NC42NjktLjYyMi42NC0xLjA4em0zNi41MDYgNS43MTJhMS4xMjUgMS4xMjUgMCAwIDAtMS41OTcgMS4wMWwtLjA3NiAyLjEyOGExLjQ0NiAxLjQ0NiAwIDAgMC0uMDA1LjEzOGwtLjAwMy4yNGguMDRhMS4xMiAxLjEyIDAgMCAwIDIuMjAyLS4xOWwuMDg0LTIuMjVhMS4xMiAxLjEyIDAgMCAwLS42NDUtMS4wNzZ6bS0zOC44MzktNy44MjJhMS4xMjIgMS4xMjIgMCAwIDAtMS41NjMtMS4wNjFsLTEuOTkuNzc4YTIuMTE5IDIuMTE5IDAgMCAwLS4xMjMuMDQ3bC0uMjA1LjA4NC4wMTMuMDM2YTEuMTE4IDEuMTE4IDAgMCAwIC42NDQgMi4wMTJoLjAzYy4xMjIgMCAuMjQ1LS4wMi4zNjItLjA1OGwyLjEtLjgxOGMuNDMtLjE1OC43Mi0uNTYyLjczMi0xLjAyem00MS42OTUgNi41MzNhMS4xMjMgMS4xMjMgMCAwIDAtMS41MDQgMS4xNDJsLjEwOSAyLjEzYzAgLjAzNi4wMDIuMDcxLjAwNy4xMzlsLjAyLjIxNWguMDMyYTEuMTIgMS4xMiAwIDAgMCAyLjE4My0uMzYybC0uMTExLTIuMjQ4YTEuMTE5IDEuMTE5IDAgMCAwLS43MzYtMS4wMTZ6TTE0LjQyIDY1LjIzYTEuMTIxIDEuMTIxIDAgMCAwLTEuNDY1LTEuMTkzbC0yLjA0Ny42MDNhMS45MjQgMS45MjQgMCAwIDAtLjEzLjAzOGwtLjI1Ni4wOC4wMi4wNDVhMS4xMTkgMS4xMTkgMCAwIDAgLjg5NyAyLjAxM2wyLjE2NC0uNjM0Yy40NDEtLjEyLjc2NS0uNDk3LjgxNy0uOTUxem00Ny4zMTcgNy45OTVhMS4xMiAxLjEyIDAgMCAwLTIuMTU4LjU3MmwuMjkgMi4xMTVjLjAwNC4wMzYuMDEuMDcuMDIuMTMzbC4wMzcuMjM0LjA0LS4wMDZhMS4xMTggMS4xMTggMCAwIDAgMi4xMDItLjE2N2MuMDM0LS4xMjkuMDQ2LS4yNjIuMDM1LS4zOTVsLS4zNC0yLjQ5Mi0uMDI2LjAwNnpNMTIuNDk2IDYyLjc2M2ExLjEyMyAxLjEyMyAwIDAgMC0xLjM1OC0xLjMxNGwtMi4wOS40MjVhMS41NyAxLjU3IDAgMCAwLS4xMzEuMDI2bC0uMjE5LjA0Ni4wMDYuMDRhMS4xMTcgMS4xMTcgMCAwIDAgLjY4NyAyLjEwMWwyLjIwOC0uNDQ1Yy40NTEtLjA4MS44MDctLjQzLjg5Ny0uODc5em01MS45MTQgOC42NS0uMDIxLjAwNmExLjEyMiAxLjEyMiAwIDAgMC0yLjExLjczOGwuNDcyIDIuMDc5Yy4wMDYuMDM2LjAxNS4wNzIuMDMuMTNsLjA2LjI1Ny4wNDctLjAxN2ExLjExNiAxLjExNiAwIDAgMCAuOTY5LjU1OSAxLjEyMyAxLjEyMyAwIDAgMCAxLjEwMi0xLjMxOWwtLjU0OS0yLjQzM3pNMTAuMzcyIDYwLjczNWExLjEyMSAxLjEyMSAwIDAgMC0uODItMi4wMTlsLTIuMTE4LjI0NGExLjYwNiAxLjYwNiAwIDAgMC0uMTM2LjAxNWwtLjI0LjAzMi4wMDcuMDQyYTEuMTE5IDEuMTE5IDAgMCAwIC41MTkgMi4xNDZsMy4wMjItLjM0My0uMjM0LS4xMTd6bTU2LjU5MSA4Ljg2YTEuMTIyIDEuMTIyIDAgMSAwLTIuMTMyLjY5NGwuNjUgMi4wMzRjLjAxLjAzNS4wMi4wNy4wNC4xMjZsLjA4LjI0LjA0Mi0uMDE4YTEuMTE2IDEuMTE2IDAgMCAwIC45MjIuNDgzIDEuMTIgMS4xMiAwIDAgMCAxLjA4LTEuNDEybC0uNjgyLTIuMTQ3ek05LjMxOCA1Ny4zODJhMS4xMiAxLjEyIDAgMCAwLS42MzgtMS40NTIgMS4xNiAxLjE2IDAgMCAwLS40NzQtLjA3NWwtMi4xMzQuMDYxYy0uMDM3LS4wMDItLjA3MiAwLS4xMzQuMDA0bC0uMjI2LjAxdi4wMzlhMS4xMTggMS4xMTggMCAwIDAgLjMxOCAyLjE4NmwyLjI1NS0uMDYxYTEuMTE1IDEuMTE1IDAgMCAwIDEuMDMzLS43MTJ6bTU5Ljg4NCA5Ljc1OC0uMDE1LjAwNGExLjEyMiAxLjEyMiAwIDAgMC0xLjk3IDEuMDZsLjgyMyAxLjk2OGMuMDEyLjAzNC4wMjUuMDY3LjA1MS4xMjRsLjA5NC4yMTIuMDM2LS4wMTVjLjIxLjI2My41MjguNDE3Ljg2NC40MmguMDA4YTEuMTIgMS4xMiAwIDAgMCAxLjA1My0xLjUwNmwtLjk0NC0yLjI2N3pNNy4wODIgNTUuMTIyYTEuMTIgMS4xMiAwIDAgMCAuMjQ2LTIuMjExbC0yLjM1LS4xNTNhMS44NjEgMS44NjEgMCAwIDAtLjEzNS0uMDA4bC0uMjQ1LS4wMDl2LjA0MmExLjExOCAxLjExOCAwIDAgMCAuMTQ2IDIuMjAybDIuMjUuMTM0LjA4OC4wMDN6TTcxLjQgNjQuODU5YTEuMTIxIDEuMTIxIDAgMSAwLTEuOTggMS4wNTFsLjk5MSAxLjg4OWMuMDE2LjAzMy4wMzIuMDYzLjA2Mi4xMTlsLjExNi4yMTIuMDM3LS4wMjFhMS4xMTcgMS4xMTcgMCAwIDAgMS42NTctLjA1NCAxLjEyIDEuMTIgMCAwIDAgLjEzNS0xLjI1TDcxLjQgNjQuODU5ek02LjM3MiA1Mi4wMjVhMS4xMiAxLjEyIDAgMCAwIC4xNC0yLjE1NmwuMDA0LS4wMi0yLjM1Ny0uMzQ0YTEuNzUgMS43NSAwIDAgMC0uMTMxLS4wMmwtLjIzMS0uMDMtLjAwNi4wNGExLjExOCAxLjExOCAwIDAgMC0uMDU4IDIuMjA4bDIuNjc1LjM5NS0uMDM2LS4wNzN6bTY4LjE0OCAxMi4wNy0xLjIxNC0xLjg5N2ExLjEyMyAxLjEyMyAwIDAgMC0xLjE0NC0uNTE4IDEuMTI0IDEuMTI0IDAgMCAwLS43MzcgMS43NGwxLjE1NiAxLjc5N2MuMDE4LjAzLjAzNi4wNTkuMDcuMTFsLjEzMi4xOTguMDM1LS4wMjRhMS4xMiAxLjEyIDAgMCAwIDEuNTktLjEyMiAxLjEyIDEuMTIgMCAwIDAgLjExMy0xLjI4NHpNNS4yMDEgNDguODVhMS4xMiAxLjEyIDAgMCAwIC41MDQtMi4xODNsLTIuMDgtLjQ5NWExLjQ5NiAxLjQ5NiAwIDAgMC0uMTI5LS4wM2wtLjIxMi0uMDQ1LS4wMS4wMzRhMS4xMTggMS4xMTggMCAwIDAtLjI2NiAyLjE5NGwyLjE5My41MjV6TTc2LjM2IDYxLjEzOGwtMS4zOC0xLjc4MWExLjEyIDEuMTIgMCAxIDAtMS43NjQgMS4zODNsMS4zMSAxLjY4NWMuMDIuMDMuMDQ0LjA2LjA4LjEwNWwuMTY1LjIxLjAzNi0uMDM3YTEuMTIgMS4xMiAwIDAgMCAxLjU1My0xLjU2NXpNMi41ODMgNDQuODdsMi42NzQuODk2LS4wNi0uMTJhMS4xMiAxLjEyIDAgMCAwIC4yMi0yLjE4OWwtMi4wMjYtLjY3NmExLjA5NCAxLjA5NCAwIDAgMC0uMDkzLS4wM2wtLjI1LS4wOC0uMDE0LjAzNmExLjExOSAxLjExOSAwIDAgMC0uNDUxIDIuMTYzem03NS4zMjIgMTMuMDg1LTEuNDk2LTEuNjFhMS4xMiAxLjEyIDAgMSAwLTEuNjMyIDEuNTM3bDEuNDU0IDEuNTZjLjAyMy4wMjcuMDQ4LjA1NC4wOTIuMDk5bC4xNjYuMTc1LjAzMi0uMDNhMS4xMiAxLjEyIDAgMCAwIDEuMzg0LTEuNzN6TTIuNDY3IDQxLjM1NGwyLjY1NiAxLjE2NC0uMDc4LS4xNTdhMS4xMjEgMS4xMjEgMCAwIDAgLjM3LTIuMTZsLTEuOTU2LS44NTZhMS4wNDcgMS4wNDcgMCAwIDAtLjA4OS0uMDM4bC0uMjc0LS4xMTQtLjAxNC4wNDRhMS4xMTggMS4xMTggMCAwIDAtLjYxNSAyLjExN3ptNzYuNzg3IDEzLjMyOS0xLjY3Ny0xLjUwN2ExLjEyIDEuMTIgMCAxIDAtMS40ODYgMS42NzhsMS41ODkgMS40MjJhMS43IDEuNyAwIDAgMCAuMDk4LjA4OWwuMTc1LjE1Ni4wMy0uMDMyYTEuMTE4IDEuMTE4IDAgMCAwIDEuMjcxLTEuODA2ek0yLjY3IDM3Ljc5NWwxLjk3NiAxLjA4OGExLjEyIDEuMTIgMCAxIDAgMS4wNjctMS45N0wzLjg0IDM1Ljg4NmExLjk0NyAxLjk0NyAwIDAgMC0uMTE3LS4wNjVsLS4yMDUtLjEwNy0uMDIuMDM1YTEuMTE4IDEuMTE4IDAgMCAwLS44MjcgMi4wNDd6bTc3LjYwNCAxMy40MTEtMS44MDgtMS4zNDdhMS4xMiAxLjEyIDAgMSAwLTEuMzI2IDEuODA2bDEuNzEyIDEuMjcxYy4wMjkuMDI0LjA1OC4wNDUuMTA4LjA4MWwuMTkuMTQuMDI2LS4wMzVhMS4xMiAxLjEyIDAgMCAwIDEuMDk4LTEuOTE2ek0zLjIwOCAzNC4yMTJsMS44NjcgMS4yNjNhMS4xMiAxLjEyIDAgMSAwIDEuMjQzLTEuODY0bC0xLjc3MS0xLjE5NWExLjg3OSAxLjg3OSAwIDAgMC0uMTA5LS4wNzNsLS4yMDMtLjEzNS0uMDI0LjAzOGExLjExOCAxLjExOCAwIDAgMC0xLjAwMyAxLjk2NnptLjg2OS0zLjU0NyAxLjc0NCAxLjQyN2ExLjEyIDEuMTIgMCAxIDAgMS40MDctMS43NDNsLTEuNjU0LTEuMzVhMi4wNTggMi4wNTggMCAwIDAtLjEwMy0uMDg1bC0uMTkzLS4xNTItLjAyNi4wMzVhMS4xMTggMS4xMTggMCAwIDAtMS4xNzUgMS44Njh6TTgwLjk4IDQ3LjYyMmwtMS45MjMtMS4xNzZhMS4xMiAxLjEyIDAgMSAwLTEuMTU2IDEuOTE5bDEuODIzIDEuMTEyYy4wMy4wMi4wNi4wMzguMTE0LjA3bC4yMS4xMjQuMDItLjAzOWExLjExOCAxLjExOCAwIDAgMCAuOTExLTIuMDF6TTUuMjQzIDI3LjI2N2wxLjYwOCAxLjU4YTEuMTIxIDEuMTIxIDAgMSAwIDEuNTYtMS42MDhsLTEuNTI0LTEuNDk1YTEuODkgMS44OSAwIDAgMC0uMDk1LS4wOTJsLS4xNjctLjE2LS4wMjkuMDI5YTEuMTE4IDEuMTE4IDAgMCAwLS45NjEtLjA1MyAxLjEyIDEuMTIgMCAwIDAtLjM5MiAxLjc5OXpNODEuMzUgNDQuMDVsLTIuMjUxLTEuMTEtLjAxLjAyMmExLjEyIDEuMTIgMCAwIDAtLjczOSAyLjEwNmwxLjkxOC45NDNjLjAzLjAxNy4wNjMuMDMyLjExOS4wNThsLjIwOS4wOTkuMDE4LS4wMzZhMS4xMTggMS4xMTggMCAwIDAgLjczNS0yLjA4M3pNNi42OTIgMjQuMDM3bDEuNDU5IDEuNzJhMS4xMjEgMS4xMjEgMCAxIDAgMS42OTktMS40NjJsLTEuMzg1LTEuNjI4YTIuMDg1IDIuMDg1IDAgMCAwLS4wODQtLjFsLS4xNS0uMTctLjAzLjAyNWExLjExOSAxLjExOSAwIDAgMC0xLjUwOSAxLjYxNXptNzQuNyAxNi40NzMtMi4xMDMtLjgxMmExLjEyIDEuMTIgMCAxIDAtLjc5MSAyLjA5NmwxLjk5My43NjZjLjAzMy4wMTUuMDY2LjAyNy4xMjUuMDQ4bC4yMDUuMDc0LjAxNi0uMDMzYTEuMTE4IDEuMTE4IDAgMCAwIC41NTUtMi4xNHpNOC40MDYgMjAuOTg3bDEuMjk4IDEuODQxYTEuMTE5IDEuMTE5IDAgMCAwIDEuMTY2LjQ2NyAxLjEyIDEuMTIgMCAwIDAgLjY1OC0xLjc3bC0xLjIzNS0xLjc0NmEyLjUzIDIuNTMgMCAwIDAtLjA3NS0uMTA2bC0uMTM2LS4xODYtLjAzNC4wMjNhMS4xMTggMS4xMTggMCAwIDAtMS42NDIgMS40Nzd6TTc4Ljk0OSAzNi40YTEuMTIgMS4xMiAwIDEgMC0uNTk3IDIuMTZsMi4wNS41ODNjLjAzNS4wMTIuMDcuMDIyLjEzMy4wMzhsLjI1Ni4wNjkuMDA3LS4wNDlhMS4xMTkgMS4xMTkgMCAwIDAgLjMyMi0yLjE4bC0yLjE3LS42MjF6TTEwLjM2NiAxOC4xMjhsMS4xMyAxLjk0OGExLjExOCAxLjExOCAwIDAgMCAxLjEyLjU2OCAxLjEyMSAxLjEyMSAwIDAgMCAuODEyLTEuNzA1bC0xLjA3My0xLjg0M2ExLjcwOCAxLjcwOCAwIDAgMC0uMDY4LS4xMThsLS4xMjctLjIxLS4wMzcuMDI0YTEuMTIgMS4xMiAwIDAgMC0xLjc1NyAxLjMzNnptNjcuNDk3IDE0Ljk1OC4wNDEuMDgyYTEuMTIgMS4xMiAwIDAgMCAuMDE4IDIuMjFsMi4wOTUuNDAxYy4wMzYuMDEuMDcyLjAxNi4xMzQuMDI2bC4yNC4wNDMuMDA2LS4wNDNhMS4xMTggMS4xMTggMCAwIDAgLjE0Ni0yLjIwMmwtMi42OC0uNTE3ek0xMy41MSAxNy41MWMuMTgxLjQwNC41ODMuNjY0IDEuMDI1LjY2NGguMDQyYTEuMTIxIDEuMTIxIDAgMCAwIC45NTgtMS42MjhsLS45MDctMS45M2ExLjczOSAxLjczOSAwIDAgMC0uMDU3LS4xMjFsLS4xMDQtLjIxNi0uMDM5LjAyYTEuMTYzIDEuMTYzIDAgMCAwLS44NzgtLjM4IDEuMTIxIDEuMTIxIDAgMCAwLS45NyAxLjYwM2wuOTMgMS45ODh6bTYyLjgwNCAxMy4xMDFhMS4xMjMgMS4xMjMgMCAwIDAgLjkwNSAxLjY1OGwyLjEyNS4yMTZjLjAzNC4wMDUuMDY4LjAwOS4xMzIuMDE0bC4yMjMuMDIuMDA1LS4wMzlhMS4xMTggMS4xMTggMCAwIDAgLjEyNi0yLjE3M2wtMi4zOTgtLjI2OGExLjEyIDEuMTIgMCAwIDAtMS4xMTguNTcyek0xNS43MzIgMTUuMTRhMS4xMTggMS4xMTggMCAwIDAgMS4wNi43NTQgMS4xMjMgMS4xMjMgMCAwIDAgMS4wNC0xLjUzOWwtLjczNi0xLjk5OWExLjQ3NSAxLjQ3NSAwIDAgMC0uMDQ3LS4xM2wtLjA4NC0uMjEzLS4wMzYuMDEzYTEuMTE2IDEuMTE2IDAgMCAwLS44NDctLjQ1OSAxLjEzIDEuMTMgMCAwIDAtMS4xNzYgMS4wNjVjLS4wMDUuMTMzLjAxMi4yNjYuMDUxLjM5M2wuNzc1IDIuMTE1em01OS40NzQgMTIuNTMzYTEuMTIyIDEuMTIyIDAgMCAwIDEuMDQ2IDEuNTc0bDIuMTMuMDNjLjAyNi4wMDIuMDUyLjAwMy4wODcuMDAzaC4wNTNsLjIzNC0uMDAydi0uMDRhMS4xMTggMS4xMTggMCAwIDAgLjE1Mi0yLjEwMiAxLjE4NCAxLjE4NCAwIDAgMC0uMzg1LS4wOTRsLTIuMjU0LS4wMzZhMS4xMzggMS4xMzggMCAwIDAtMS4wNjMuNjY3ek0xOC4yMDMgMTMuMjAybC4wMi0uMDA1YTEuMTE1IDEuMTE1IDAgMCAwIDEuMDEuNjI4IDEuMTIxIDEuMTIxIDAgMCAwIDEuMDctMS40NDhsLS41NjItMi4wNjFhMi4zNjYgMi4zNjYgMCAwIDAtLjAzNS0uMTI5bC0uMDY1LS4yMTUtLjAzNi4wMDlhMS4xMiAxLjEyIDAgMCAwLTIuMDUyLjgyNGwuNjUgMi4zOTd6TTczLjg1MiAyNC44NWExLjEyMSAxLjEyMSAwIDAgMCAxLjE3NiAxLjQ3N2wyLjEzLS4xNTNjLjAzNiAwIC4wNzItLjAwMy4xMzUtLjAwOWwuMjUtLjAyMi0uMDA2LS4wNDRhMS4xMTggMS4xMTggMCAwIDAtLjA0My0yLjEwM2MtLjEyNi0uMDQtLjI1OS0uMDYxLS4zOTItLjA2bC0yLjI0OS4xNThhMS4xMTcgMS4xMTcgMCAwIDAtMS4wMDEuNzU1ek0yMC43ODMgMTEuMzQ0bC4wMzMtLjAxN2ExLjEyMiAxLjEyMiAwIDAgMCAyLjExNC0uNzA1bC0uMzgyLTIuMTAzYTMuMjYgMy4yNiAwIDAgMC0uMDIzLS4xMjdsLS4wNDUtLjIzNi0uMDQzLjAwOWExLjEyIDEuMTIgMCAwIDAtMi4xMS42NTNsLjQ1NiAyLjUyNnptNTEuNDc5IDEwLjgxM2ExLjEyIDEuMTIgMCAwIDAgMS4zIDEuMzcxbDIuMTEtLjMzNWMuMDM0LS4wMDQuMDY5LS4wMS4xMy0uMDJsLjIyOS0uMDQtLjAwNy0uMDRhMS4xMTggMS4xMTggMCAwIDAtLjYwMy0yLjEyNmwtMi4yMjcuMzVhMS4xMTYgMS4xMTYgMCAwIDAtLjkzMi44NHpNMjQuMjQ2IDEwLjMwNWMuMjg0LjA5MS41OTMuMDY1Ljg1Ny0uMDczLjI2NS0uMTM2LjQ2NC0uMzcyLjU1My0uNjU2LjA0OC0uMTU0LjA2My0uMzE3LjA0NC0uNDc4bC0uMi0yLjEyNWExLjYxMyAxLjYxMyAwIDAgMC0uMDEzLS4xM2wtLjAyNC0uMjQ0LS4wNDUuMDA2YTEuMTIyIDEuMTIyIDAgMCAwLS42OTctLjY0OCAxLjEyMyAxLjEyMyAwIDAgMC0xLjQ2IDEuMTIxbC4yMDcgMi4yNDNjLjAzMy40NTYuMzQyLjg0Ni43NzguOTg0em00Ni4yIDkuMzA1YTEuMTIyIDEuMTIyIDAgMCAwIDEuNDEyIDEuMjU1bDIuMDczLS41MTRjLjAzNS0uMDA3LjA3LS4wMTYuMTMtLjAzMmwuMjM4LS4wNjMtLjAxNC0uMDQyYTEuMTE5IDEuMTE5IDAgMCAwLS4zOTctMi4wNjggMS4xODggMS4xODggMCAwIDAtLjM5Ny4wMDlsLTIuMTg3LjU0Yy0uNDQ3LjEtLjc4Ni40NjMtLjg1OC45MTV6TTI3LjA0MiA4Ljg5NGExLjEyMyAxLjEyMyAwIDAgMCAxLjU1MS0xLjA3OGwtLjAyMi0yLjI4N2ExLjEyIDEuMTIgMCAwIDAtMi4yMzQuMDY2bC4wMTQgMi4yNTFjLS4wMDcuNDU4LjI2Ny44NzMuNjkgMS4wNDh6bTQxLjM3NCA4LjMzM2ExLjEyNCAxLjEyNCAwIDAgMCAxLjUxNiAxLjEyOWwyLjAyMS0uNjkyYTIuMTUgMi4xNSAwIDAgMCAuMTI1LS4wNDJsLjI4NC0uMTAxLS4wMzMtLjA1Yy4yNTEtLjE5My40MDgtLjQ4NS40My0uOGExLjEyNCAxLjEyNCAwIDAgMC0xLjQzNC0xLjE1NmwtMi4xMzQuNzI1Yy0uNDM2LjE0LS43NDMuNTMtLjc3NS45ODd6TTI5Ljk1NSA3LjcyNmExLjEyNCAxLjEyNCAwIDAgMCAxLjY0LS45MzhsLjE2OS0yLjEyOWEyLjEgMi4xIDAgMCAwIC4wMS0uMTI4bC4wMTktLjI1M2gtLjA0OGExLjEyIDEuMTIgMCAwIDAtMi4yMDYuMWwtLjE4IDIuMjQ1Yy0uMDQ3LjQ1Ni4xOS44OTMuNTk2IDEuMTAzem0zNi4yMjcgNy4yOTZjLjAxLjYxMy41MSAxLjEwNCAxLjEyMyAxLjEwNGguMDE4Yy4xNjEtLjAwNC4zMi0uMDQyLjQ2Ni0uMTFsMS45NS0uODYzYy4wMzUtLjAxMy4wNjgtLjAyOC4xMjQtLjA1NGwuMjIzLS4xMDEtLjAyLS4wNGMuMjU0LS4yMTYuMzk5LS41MzQuMzk0LS44NjdhMS4xMzcgMS4xMzcgMCAwIDAtMS4xNC0xLjEwMyAxLjE3MiAxLjE3MiAwIDAgMC0uMzkuMDc2bC0yLjA2Mi45MDlhMS4xMTQgMS4xMTQgMCAwIDAtLjY4NiAxLjA0OXptLTMzLjIxLTguMjA5YTEuMTI0IDEuMTI0IDAgMCAwIDEuNzE1LS43OTNsLjM1NC0yLjA5OWMuMDA4LS4wMzcuMDE0LS4wNzMuMDIzLS4xMzRsLjA0MS0uMjU0LS4wNDgtLjAwM2ExLjEyIDEuMTIgMCAwIDAtMi4wNTUtLjQ1NGMtLjA3MS4xMTItLjEyMi4yMzYtLjE1Mi4zNjZsLS40MzcgMi41NzQuMDUtLjAxM2MuMDM5LjMzMy4yMjYuNjMuNTEuODF6bTMxLjA1NCA1LjM0NGExLjEyMiAxLjEyMiAwIDAgMCAxLjQxNSAxLjcwNGwxLjg2Ny0xLjAzYy4wMzQtLjAxNS4wNjYtLjAzMy4xMi0uMDY1bC4yMy0uMTMtLjAzLS4wNGMuMjI4LS4yMzUuMzQtLjU2LjMwNi0uODg1YTEuMTI2IDEuMTI2IDAgMCAwLTEuMjMzLTFjLS4xNS4wMi0uMjk3LjA2Ni0uNDMuMTM3bC0yLjMxNyAxLjI3My4wNzIuMDM2ek0zNi4wNzcgNi4xNjJhMS4xMjQgMS4xMjQgMCAwIDAgMS43NzgtLjYzOGwuNTM4LTIuMDYyYy4wMS0uMDM1LjAyLS4wNjkuMDM1LS4xMjlsLjA1NS0uMjIyLS4wNC0uMDExYTEuMTIgMS4xMiAwIDAgMC0yLjE5LS4zMDdsLS42NzIgMi41NjIuMDYtLjAxNWMuMDE5LjMyNC4xNzguNjI1LjQzNi44MjJ6bTI2LjgyMSA1Ljc0NiAxLjc3Mi0xLjE5MWMuMDMtLjAxOS4wNTktLjAzOC4xMS0uMDc0bC4xOTgtLjEzOC0uMDI1LS4wMzVjLjIxMy0uMjU2LjMtLjU5NS4yMzctLjkyM2ExLjEyOCAxLjEyOCAwIDAgMC0xLjMxNS0uODg3Yy0uMTQ5LjAzMi0uMjkuMDktLjQxOC4xNzRsLTEuODIzIDEuMjIzYTEuMTIgMS4xMiAwIDEgMCAxLjI2NCAxLjg1MXpNNDEuMDgyIDUuMzA5bC43MTktMi4wMDNjLjAxNS0uMDM1LjAyNy0uMDcuMDQ3LS4xMzFsLjA4Mi0uMjQyLS4wNDQtLjAxMWExLjExNyAxLjExNyAwIDAgMC0xLjE2My0xLjE2OSAxLjExMyAxLjExMyAwIDAgMC0uOTkzLjY5NGwtLjg1MiAyLjM2My4wMjUuMDA2YTEuMTIzIDEuMTIzIDAgMCAwIDIuMTc5LjQ5M3ptMTkuMDg3IDQuODY1IDEuNjU4LTEuMzQ0Yy4wMy0uMDIyLjA1OC0uMDQ1LjEwNC0uMDg1bC4xNzYtLjE0OC0uMDI0LS4wMzFhMS4xMTkgMS4xMTkgMCAwIDAtMS41ODctMS41NGwtMS43NTIgMS40MTdhMS4xMjEgMS4xMjEgMCAxIDAgMS40MjUgMS43M3pNNDMuMzIgNi4wNjNhMS4xMjIgMS4xMjIgMCAwIDAgMS4wMzEtLjY4bC45LTEuOTM1Yy4wMTYtLjAzLjAyOS0uMDYuMDU2LS4xMmwuMDk3LS4yMTktLjAzOS0uMDE2YTEuMTEgMS4xMSAwIDAgMC0uMjc1LS45MTQgMS4xMjMgMS4xMjMgMCAwIDAtMS41ODUtLjA4Yy0uMTEuMTA0LS4yLjIyNy0uMjY2LjM2NGwtLjkyOCAxLjk5YTEuMTIgMS4xMiAwIDAgMCAxLjAxIDEuNjF6bTEzLjk0MyAyLjYxMSAxLjUzLTEuNDg3LjA5OC0uMDk2LjE2Mi0uMTY3LS4wMjctLjAyN2ExLjEyIDEuMTIgMCAwIDAtMS4zODItMS41OTRoLS4wMDFjLS4xMjMuMDUtLjIzNy4xMi0uMzM3LjIwNmwtMS42MTggMS41NjlhMS4xMjEgMS4xMjEgMCAxIDAgMS41NzUgMS41OTZ6TTQ3LjY0OCA1Ljc2bDEuMDY5LTEuODQ0YTEuNTkgMS41OSAwIDAgMCAuMDctLjEybC4xMDktLjE5OC0uMDMzLS4wMmExLjExOSAxLjExOSAwIDAgMC0yLjAyOC0uODc5bC0xLjI5MiAyLjIxOC4wMzcuMDFhMS4xMjIgMS4xMjIgMCAwIDAgMi4wNjguODMyem02LjU0MiAxLjY2NSAxLjM4Ny0xLjYyYy4wMjUtLjAyNi4wNS0uMDU0LjA4Ny0uMWwuMTctLjIwMi0uMDQyLS4wMjhhMS4xMTggMS4xMTggMCAwIDAtMS44NDgtMS4yMDZMNTIuMjMgNi4yNjZsLjA1NS4wMTRjLS4xMy4zMDItLjEyMS42NDcuMDI2Ljk0MWExLjEyNCAxLjEyNCAwIDAgMCAxLjg4LjIwNHptLTMuMzg3LS43OTkuMDE2LjAxMiAxLjM3My0xLjkzNmMuMDIyLS4wMjguMDQyLS4wNTYuMDc3LS4xMDhsLjE0My0uMjA5LS4wNC0uMDIzYTEuMTE0IDEuMTE0IDAgMCAwLS4xMDctLjkzOCAxLjEyNSAxLjEyNSAwIDAgMC0xLjctLjI0OWwtLjAyNC0uMDE1LTEuNjIyIDIuMjc5LjA0NS4wMWExLjExIDEuMTEgMCAwIDAgLjEwMy45NjIgMS4xMjUgMS4xMjUgMCAwIDAgMS43MzYuMjE1eiIvPjxnIGlkPSJjZmktRmlsbC0yIj48cGF0aCBmaWxsPSJ1cmwoI2NmaS1mKSIgZD0iTTUuMTA3IDU4LjcyYS44MjYuODI2IDAgMCAwIC4yNjcuMDI5bDIuMjE4LS4yNTNhLjczMy43MzMgMCAxIDAtLjE4NC0xLjQ1NWwtMi4xMzUuMjQ2YS45NTkuOTU5IDAgMCAwLS4wOC4wMDloLS4wMDVsLS4wMjQuMDA2YS43My43MyAwIDAgMC0uMDU3IDEuNDE5eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLWcpIiBkPSJNMy41OTIgNTUuNjU4YS44MjEuODIxIDAgMCAwIC4yNjMuMDUxbDIuMjM0LS4wNjJhLjczMy43MzMgMCAwIDAgLjI2My0xLjQxNGwtLjA4Ni0uMDI4YS43OC43OCAwIDAgMC0uMjM4LS4wMjJsLTIuMTQ4LjA2Yy0uMDI2IDAtLjA1MiAwLS4wNzguMDAzaC0uMDA1bC0uMDI2LjAwNGEuNzMuNzMgMCAwIDAtLjE4IDEuNDA4eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLWgpIiBkPSJNMTEuMTQ5IDY2Ljk3NmMuMDkuMDAxLjE4LS4wMTMuMjY1LS4wNDFsMi4wOC0uODFhLjczMy43MzMgMCAxIDAtLjU1LTEuMzZsLTIuMDAyLjc4MmEuODY4Ljg2OCAwIDAgMC0uMDc1LjAzaC0uMDAzbC0uMDIzLjAxM2EuNzMuNzMgMCAwIDAgLjMwOCAxLjM4NnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1pKSIgZD0iTTcxLjQ4MyA2My4zMmEuNzMzLjczMyAwIDAgMCAuNTA3LTEuMDk2bC0xLjA3Ny0xLjY4LS4wMDIuMDAzLS4xMjctLjIwNWEuNzM0LjczNCAwIDEgMC0xLjIyNi44MDZsMS4xNjEgMS44MDdhLjkwNy45MDcgMCAwIDAgLjA0My4wNjZsLjAyLjAyNGMuMTY1LjIxNC40MzQuMzIuNy4yNzV6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktaikiIGQ9Im0uNTM3IDQyLjQ1MiAxLjkxNC42NDF2LS4wMDNsLjIwNi4wNzJhLjczMy43MzMgMCAxIDAgLjQ0OC0xLjM5NmwtMi4wMzktLjY4YS44MjUuODI1IDAgMCAwLS4wNzItLjAyNGwtLjAzMi0uMDA4YS43MzIuNzMyIDAgMCAwLS42NTQgMS4yNi43OTguNzk4IDAgMCAwIC4yMy4xMzh6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktaykiIGQ9Im0uOTMxIDQ1Ljg5NiAxLjk4MS40NzN2LS4wMDNsLjE5NC4wNDlhLjczMy43MzMgMCAxIDAgLjMyLTEuNDNsLTIuMDk1LS40OTgtLjA0LS4wMWEuNTI3LjUyNyAwIDAgMC0uMDMtLjAwN2wtLjAzMi0uMDA0YS43My43MyAwIDAgMC0uMjk4IDEuNDN6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktbCkiIGQ9Ik0yLjM0MiA1Mi40NjlhLjgxMS44MTEgMCAwIDAgLjI1OS4wNzNsMi4wNjUuMTIzdi0uMDAzbC4xNjYuMDEyYS43NC43NCAwIDAgMCAuNzE0LS40MDYuNzMuNzMgMCAwIDAtLjY0NS0xLjA1NmwtLjE1Mi0uMDEtMS45OTYtLjExN2EuOTA1LjkwNSAwIDAgMC0uMDc5LS4wMDVsLS4wMy4wMDFhLjczMS43MzEgMCAwIDAtLjMwMiAxLjM4OHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1tKSIgZD0iTTEuMzcyIDQ5LjE3YS44LjggMCAwIDAgLjI1LjA5NWwyLjAzMi4zdi0uMDAzbC4xOC4wMjlhLjczMy43MzMgMCAxIDAgLjE5Ny0xLjQ1bC0uMjA1LS4wMi4wMDQtLjAxMi0xLjkyOS0uMjgyYS45Ni45NiAwIDAgMC0uMDc4LS4wMTJoLS4wM2EuNzEuNzEgMCAwIDAtLjY2OC4zNDdjLS4yMS4zNDYtLjEuNzk3LjI0NyAxLjAwN3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1uKSIgZD0iTTI1LjU1NSA3Ni41ODJhLjguOCAwIDAgMCAuMjItLjE1MWwxLjUzLTEuNjI0YS43MzQuNzM0IDAgMCAwLS44MjItMS4xODUuNzc2Ljc3NiAwIDAgMC0uMjYuMTkzbC0xLjQ3IDEuNTY1YS44MjkuODI5IDAgMCAwLS4wNTQuMDU3bC0uMDAyLjAwMi0uMDE2LjAyMmEuNzMxLjczMSAwIDAgMCAuODc0IDEuMTJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktbykiIGQ9Im0yNS45OTcgMy41NC0uMDAzLS4wMzJhLjczMi43MzIgMCAwIDAtMS40MDYtLjIxLjc4Ny43ODcgMCAwIDAtLjA1Ny4yNjFsLjAxMyAyLjAzMmguMDAzdi4yYS43MzQuNzM0IDAgMSAwIDEuNDY3LS4wMjhsLS4wMTctMi4xNDZjLjAwMS0uMDMuMDAyLS4wNTQgMC0uMDc3eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLXApIiBkPSJtLjQ1MiAzOC45NSAxLjgzLjgwMnYtLjAwNWwuMjE4LjFhLjczMy43MzMgMCAxIDAgLjU3Mi0xLjM1bC0xLjk3LS44NmEuODcyLjg3MiAwIDAgMC0uMDYyLS4wMjdMMSAzNy41OTdhLjczLjczIDAgMCAwLS41NDkgMS4zNTR6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktcSkiIGQ9Ik0yNy45NDMgNS4zMjNhLjczNS43MzUgMCAwIDAgMS4wNzMtLjYyMmwuMTctMi4xNGEuODM4LjgzOCAwIDAgMCAuMDA2LS4wNzZ2LS4wMzJhLjczMi43MzIgMCAwIDAtMS4zODMtLjMzMi43NjkuNzY5IDAgMCAwLS4wNzguMjU1bC0uMTcgMi4wOTJoLjAwM2wtLjAxMi4xMzRhLjcyOS43MjkgMCAwIDAgLjM5LjcyMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1yKSIgZD0iTTEzLjYyNSA2OS4zNTlhLjguOCAwIDAgMCAuMjYtLjA2NGwyLjAwNC0uOTlhLjczLjczIDAgMCAwIC40MTgtLjcwNS43NDEuNzQxIDAgMCAwLS43NzctLjY5Ljc2Ny43NjcgMCAwIDAtLjMxLjA5bC0xLjkyNS45NTRhLjY4NC42ODQgMCAwIDAtLjA3LjAzM2wtLjAwNS4wMDQtLjAyMi4wMTRhLjcyOS43MjkgMCAwIDAtLjM1LjY2NS43NDMuNzQzIDAgMCAwIC43NzcuNjg5eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLXMpIiBkPSJNMjEuNDkgNC43NDRhLjc4NC43ODQgMCAwIDAtLjAzNC4yNjVsLjIwNSAyLjIyYS43MzUuNzM1IDAgMSAwIDEuNDYxLS4xNWwtLjIwMS0yLjEzOGEuNzcxLjc3MSAwIDAgMC0uMDA3LS4wNzVsLS4wMDYtLjAzM2EuNzMyLjczMiAwIDAgMC0uNDkzLS41NjVsLS4wODQtLjAyMmEuNzM2LjczNiAwIDAgMC0uODQyLjQ5N3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS10KSIgZD0iTTE5LjIwOCA3My40NjhhLjgwMy44MDMgMCAwIDAgLjI0NC0uMTFsMS43OTYtMS4zMjNhLjczNC43MzQgMCAxIDAtLjg4Ny0xLjE3bC0xLjcyNyAxLjI3N2ExLjAzIDEuMDMgMCAwIDAtLjA2My4wNDZsLS4wMDEuMDAyLS4wMi4wMTlhLjczMS43MzEgMCAwIDAgLjY1OCAxLjI1OXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS11KSIgZD0iTTE2LjMxNSA3MS41MjlhLjc4OC43ODggMCAwIDAgLjI1My0uMDg2bDEuOTA3LTEuMTZhLjczNC43MzQgMCAxIDAtLjc4LTEuMjQ0bC0xLjgzMyAxLjExOWEuNzg0Ljc4NCAwIDAgMC0uMDY3LjA0bC0uMDA1LjAwNC0uMDIuMDE1YS43MzEuNzMxIDAgMCAwIC41NDUgMS4zMTJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktdikiIGQ9Im0xOS45NiA2LjQ0Ni0uMDA5LS4wM2EuNzMyLjczMiAwIDAgMC0xLjQzMS4zbC4zNSAxLjk0OC4wMDQtLjAwMy4wNDMuMjUyYS43MzQuNzM0IDAgMSAwIDEuNDQtLjI3OGwtLjM4My0yLjExM2EuODExLjgxMSAwIDAgMC0uMDE0LS4wNzZ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktdykiIGQ9Ik02Ljg3OSA2MS42NGEuODE2LjgxNiAwIDAgMCAuMjY3LjAwNGwyLjE4OS0uNDQxYS43MzMuNzMzIDAgMCAwIC4wMTUtMS40NGgtLjAwMWEuNzc5Ljc3OSAwIDAgMC0uMzIyLjAwNmwtMi4xMDcuNDI4YS42MjguNjI4IDAgMCAwLS4wNzQuMDE1bC0uMDEuMDAyLS4wMjEuMDA3YS43My43MyAwIDAgMCAuMDY0IDEuNDE4eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLXgpIiBkPSJNMjQuNDE1IDcyLjc1NWEuNzM3LjczNyAwIDAgMC0xLjIwOC0uMjkybC0xLjYwNiAxLjQyNi0uMDU5LjA1Mi0uMDA1LjAwNS0uMDE1LjAxN2EuNzMyLjczMiAwIDAgMCAxLjAwMyAxLjA2NWwxLjU2OS0xLjM5LS4wMDEtLjAwMS4xMDMtLjA5YS43My43MyAwIDAgMCAuMjE5LS43OTJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmkteSkiIGQ9Ik03LjAwMyAxNy42MDdhLjczMi43MzIgMCAwIDAtLjQ1OCAxLjEyTDcuNyAyMC4zNjRsLjAwMi0uMDA0LjEzLjE5YS43MzMuNzMzIDAgMSAwIDEuMTg4LS44NTlsLTEuMjQtMS43NTRhLjkwNC45MDQgMCAwIDAtLjA0NC0uMDYzbC0uMDIxLS4wMjRhLjczMi43MzIgMCAwIDAtLjcxMy0uMjQ0eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLXopIiBkPSJNMTEuODQzIDYzLjEyN2EuNzM1LjczNSAwIDAgMC0uOTY4LS43NzhsLTIuMDYxLjYwN2EuODUuODUgMCAwIDAtLjA3Ni4wMjJsLS4wMDUuMDAyLS4wMjMuMDFhLjczLjczIDAgMCAwIC40NTMgMS4zODlsMi4xNDMtLjYyOGEuNzMyLjczMiAwIDAgMCAuNTM3LS42MjR6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktQSkiIGQ9Ik0zMi41NTYgNzguNTU2YS44MDguODA4IDAgMCAwIC4xOS0uMTg4bDEuMjEtMS44NzRhLjczNC43MzQgMCAwIDAtMS4wMjUtMS4wMTYuNzYuNzYgMCAwIDAtLjIyLjIzNkwzMS41NSA3Ny41MmEuNzc4Ljc3OCAwIDAgMC0uMDQyLjA2NWwtLjAwMy4wMDUtLjAxLjAyMmEuNzMyLjczMiAwIDAgMCAxLjA2Mi45NDR6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktQikiIGQ9Ik0zMC42NCA3NC45NzVhLjczNi43MzYgMCAwIDAtLjk5OS0uMjg1Ljc2My43NjMgMCAwIDAtLjI0LjIxNWwtMS4zMjMgMS42OTJhLjc4Mi43ODIgMCAwIDAtLjA0Ny4wNjFsLS4wMDUuMDA3LS4wMTIuMDJhLjczMi43MzIgMCAwIDAgMS4xNzkuODY2bDEuMjI4LTEuNTY4aC0uMDA0bC4xNTItLjE5YS43My43MyAwIDAgMCAuMDcxLS44MTh6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktQykiIGQ9Ik0zNy4yNjUgNzYuMDU2YS43MzkuNzM5IDAgMCAwLTEuMjMyLjE1NmwtLjk5MiAxLjkwM2EuODc4Ljg3OCAwIDAgMC0uMDM2LjA3bC0uMDExLjAyOGEuNzMyLjczMiAwIDAgMCAxLjMxNS42NGwuOTE1LTEuNzVoLS4wMDVsLjEyNC0uMjNhLjczLjczIDAgMCAwLS4wNzgtLjgxN3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1EKSIgZD0iTTMwLjk4OCA0LjQyN2EuNzM2LjczNiAwIDAgMCAxLjEyNS0uNTI3bC4zNTctMi4xMTdhLjcxOS43MTkgMCAwIDAgLjAxMi0uMDc2bC4wMDMtLjAzMWEuNzMzLjczMyAwIDAgMC0xLjM0OC0uNDUyLjc3Ny43NzcgMCAwIDAtLjEwMS4yNDhsLS4zNzQgMi4xOTlhLjczMy43MzMgMCAwIDAgLjMyNi43NTZ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktRSkiIGQ9Ik0zNS4xNTIgMy42NjJhLjc2Ljc2IDAgMCAwIC4xMzUtLjI5MmwuNTQzLTIuMDc2YS44NDUuODQ1IDAgMCAwIC4wMi0uMDc1bC4wMDQtLjAzMmEuNzMyLjczMiAwIDAgMC0xLjQyNS0uMzNsLS41IDEuOTA0LjAwNC0uMDAxLS4wNy4yNTZhLjczNC43MzQgMCAwIDAgMS4yODkuNjQ2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLUYpIiBkPSJNOS4wNzcgMTQuODIyYS43MzQuNzM0IDAgMCAwLS41NTYgMS4wNzRsMS4xMiAxLjkzYS43MzQuNzM0IDAgMSAwIDEuMjYyLS43NWwtMS4wOC0xLjg1NS0uMDM4LS4wNjYtLjAyLS4wMjdhLjczOC43MzggMCAwIDAtLjY4OC0uMzA2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLUcpIiBkPSJtNC4zNiAyMy45LS4wMjQtLjAyYS43MzIuNzMyIDAgMSAwLS45OTYgMS4wN2wxLjU5MyAxLjU2NUEuNzMzLjczMyAwIDEgMCA1Ljk1IDI1LjQ2bC0xLjUzNC0xLjUwNWEuOTk2Ljk5NiAwIDAgMC0uMDU2LS4wNTR6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktSCkiIGQ9Ik0yLjI5IDI3LjEyMWEuNzM0LjczNCAwIDAgMC0uMTQyIDEuMjAxbDEuNzI4IDEuNDE0YS43MzQuNzM0IDAgMSAwIC45MTgtMS4xNDRsLTEuNjY1LTEuMzZhLjY3NS42NzUgMCAwIDAtLjA2LS4wNDdsLS4wMjYtLjAxOWEuNzM1LjczNSAwIDAgMC0uNzUzLS4wNDV6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktSSkiIGQ9Im01LjkyMiAyMC43OTMtLjAyMi0uMDIxYS43NC43NCAwIDAgMC0uNzMxLS4xOC43MzIuNzMyIDAgMCAwLS4zNTcgMS4xNTZsMS40NDQgMS43MDFhLjczNC43MzQgMCAxIDAgMS4xMDktLjk2bC0xLjM5Mi0xLjYzNmEuODI3LjgyNyAwIDAgMC0uMDUtLjA2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLUopIiBkPSJNMS4yODUgMzAuNjM4YS43MzIuNzMyIDAgMCAwLS4wMzEgMS4yMWwxLjg1IDEuMjVhLjczMy43MzMgMCAxIDAgLjgwOC0xLjIyM0wyLjEzIDMwLjY3M2ExLjAwNiAxLjAwNiAwIDAgMC0uMDY1LS4wNDVsLS4wMjctLjAxM2EuNzQ3Ljc0NyAwIDAgMC0uMzU5LS4wOTNjLS4xNCAwLS4yNzYuMDQtLjM5NC4xMTZ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktSykiIGQ9Ik0xMC42NjYgMTMuMDA4Yy4wMDUuMDkuMDI0LjE3OC4wNTguMjYxbC45NDcgMi4wMjFhLjczNC43MzQgMCAxIDAgMS4zMjMtLjYzNmwtLjkxNC0xLjk0NGEuNjUxLjY1MSAwIDAgMC0uMDMyLS4wNjhsLS4wMTctLjAyOWEuNzMuNzMgMCAwIDAtMS4zNjUuMzk1eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLUwpIiBkPSJtMTcuMTUzIDguMjc4LS4wMTItLjAzMWEuNzMyLjczMiAwIDAgMC0xLjQuNDJsLjU0MyAyLjAwOGguMDAzbC4wMzkuMTQ4YS43MzQuNzM0IDAgMSAwIDEuNDEyLS40bC0uNTY0LTIuMDcyLS4wMi0uMDczeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLU0pIiBkPSJNLjQ4NyAzNS4yMzNjLjA1Ny4wNy4xMjUuMTMuMjAxLjE3N2wxLjk1NiAxLjA3N2EuNzM0LjczNCAwIDEgMCAuNjkzLTEuMjkyTDEuNDUzIDM0LjE2YS42NjQuNjY0IDAgMCAwLS4wNjYtLjAzN2wtLjAzLS4wMTJhLjczLjczIDAgMCAwLS44NyAxLjEyMnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1OKSIgZD0ibTEzLjEzNyAxMC44NTYuNzY3IDIuMDk1YS43MzUuNzM1IDAgMSAwIDEuMzczLS41MTlsLS43NC0yLjAxNWEuODAyLjgwMiAwIDAgMC0uMDI4LS4wNzRsLS4wMTQtLjAyN2EuNzMxLjczMSAwIDAgMC0xLjM1OC41NHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1PKSIgZD0iTTQ1LjYzNiA3OC44MDNhLjczNi43MzYgMCAwIDAgMS4xMzUtLjQyMmwuNDctMi4xOGEuNzM1LjczNSAwIDEgMC0xLjQ0LS4yOTJsLS40NDkgMi4wOTlhMS4wMSAxLjAxIDAgMCAwLS4wMTYuMDc2bC0uMDA0LjAzYS43MzMuNzMzIDAgMCAwIC4zMDQuNjg5eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLVApIiBkPSJNNzYuNTg4IDU0LjA4N2EuNzM1LjczNSAwIDAgMCAuMTk2LTEuMTk0bC0xLjUyOC0xLjM3MS0uMDAxLjAwMi0uMTM0LS4xMjNhLjczMy43MzMgMCAxIDAtLjk2NiAxLjEwM2wxLjYgMS40MzNjLjAyMy4wMjIuMDQuMDM2LjA1Ny4wNWwuMDA5LjAwOC4wMTguMDEyYS43MzQuNzM0IDAgMCAwIC43NDkuMDh6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktUSkiIGQ9Ik03Mi42NDcgNjAuMTM3Yy4wMTQuMDIyLjAzLjA0Mi4wNDcuMDYybC4wMDUuMDA2LjAxNi4wMTdhLjczMi43MzIgMCAwIDAgMS4xMzEtLjkyN2wtMS4zNjYtMS43NjRhLjczNi43MzYgMCAwIDAtMS4yMjUuMDY3LjczMy43MzMgMCAwIDAgLjA3NS44NDNsMS4zMTcgMS42OTZ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktUikiIGQ9Im03Ni41NjUgMjUuNDMzLS4wOTMtLjAzM2EuOS45IDAgMCAwLS4xNzMtLjAzbC0yLjA3NS0uMDM0di4wMDJsLS4xNi0uMDA0YS43MzQuNzM0IDAgMSAwLS4wMDMgMS40NjZsMi4xNS4wMzFhLjcxOC43MTggMCAwIDAgLjA3OC4wMDJsLjAzLS4wMDNhLjczLjczIDAgMCAwIC4yNDYtMS4zOTd6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktUykiIGQ9Ik03OS4yNiAzOC45NWEuODA3LjgwNyAwIDAgMC0uMjIzLS4xNDhsLTIuMTY0LS44M2EuNzMyLjczMiAwIDAgMC0uNDMxIDEuNGwyLjAwNi43NzFjLjAyOC4wMTIuMDUuMDIuMDczLjAyOGwuMDA0LjAwMS4wMjYuMDA3YS43MzEuNzMxIDAgMCAwIC43MS0xLjIyOXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1UKSIgZD0iTTcxLjYzNiAxNi40N2EuODA2LjgwNiAwIDAgMC0uMjY4LjAwN2wtMi4wNS41MDV2LjAwM2wtLjEyLjAyOGEuNzMzLjczMyAwIDEgMCAuMzcyIDEuNDE4bDIuMDg2LS41MThhLjkuOSAwIDAgMCAuMDc3LS4wMTlsLjAyOC0uMDFhLjczLjczIDAgMCAwLS4xMjUtMS40MTR6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktVSkiIGQ9Im03OC43OTcgMzUuMzI3LTIuMDM4LS41ODQtLjAwMi4wMDMtLjExLS4wMzRhLjczMy43MzMgMCAxIDAtLjM4NCAxLjQxNWwyLjA2Ny41ODhjLjAyNS4wMDkuMDUuMDE2LjA3NS4wMjJoLjAwM2wuMDI3LjAwNWEuNzMxLjczMSAwIDAgMCAuMzYyLTEuNDE1eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLVYpIiBkPSJNNzguNDk5IDMyLjAyNGEuNzk3Ljc5NyAwIDAgMC0uMjQtLjEwNWwtLjAyMy0uMDA0LTEuOTkyLS4zODR2LjAwM2wtLjE4Ni0uMDM4YS43MzMuNzMzIDAgMSAwLS4yNTggMS40NDJsMi4xMS40MDRhLjcxNi43MTYgMCAwIDAgLjA3OC4wMTVsLjAwNC4wMDEuMDI3LjAwMmEuNzMxLjczMSAwIDAgMCAuNDgtMS4zMzZ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktVykiIGQ9Ik03Ny42NzEgMjguNjc3YS43MjcuNzI3IDAgMCAwLS4yNS0uMDhsLS4wOTQtLjAxNC0xLjk2LS4yMDJ2LjAwM2wtLjE3NC0uMDJhLjczMy43MzMgMCAwIDAtLjEzIDEuNDZsMi4xMzguMjE4Yy4wMzEuMDA0LjA1NS4wMDcuMDguMDA4aC4wMzdhLjczMS43MzEgMCAwIDAgLjM1My0xLjM3M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1YKSIgZD0ibTc0LjM4MyA1Ny4xODQuMDA2LjAwNi4wMTguMDE2YS43MzIuNzMyIDAgMCAwIDEuMDQ0LTEuMDIzbC0xLjUyLTEuNjM2YS43MzMuNzMzIDAgMSAwLTEuMDY1IDEuMDA5bDEuNDY1IDEuNTcyYS44Ny44NyAwIDAgMCAuMDUyLjA1NnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1ZKSIgZD0iTTQxLjYyIDMuNDI4YS43NTguNzU4IDAgMCAwIC4xODYtLjI2NGwuOTA1LTEuOTQ2YS45NjYuOTY2IDAgMCAwIC4wMzMtLjA3MmwuMDEtLjAyOWEuNzI4LjcyOCAwIDAgMC0uMTQzLS43MzcuNzM2LjczNiAwIDAgMC0xLjIuMTU4bC0uODA2IDEuNzI4LjAwNy0uMDAyLS4xNDQuMjk4YS43MjkuNzI5IDAgMCAwIC4xMTUuODEzYy4yNzIuMy43MzYuMzI0IDEuMDM4LjA1M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1aKSIgZD0ibTM5Ljg0NyA3OS4wMDguODUtMi4wNjJhLjczNS43MzUgMCAwIDAtMS4xOS0uODE1Ljc2Ni43NjYgMCAwIDAtLjE3NC4yNzJsLS44MTYgMS45ODZhLjY3LjY3IDAgMCAwLS4wMy4wN2wtLjAwMi4wMDctLjAwNy4wMjRhLjczMi43MzIgMCAwIDAgMS4zNy41MTh6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktYWEpIiBkPSJNNDMuNzc5IDc1LjkyNmEuNzM3LjczNyAwIDAgMC0xLjE4NS4zNzNsLS42MzQgMi4wNWEuNTYyLjU2MiAwIDAgMC0uMDIyLjA3MmwtLjAwMi4wMDktLjAwNS4wMjRhLjczMi43MzIgMCAwIDAgMS40MS4zOTNsLjYxMi0xLjk3MmgtLjAwMmwuMDUtLjE2YS43My43MyAwIDAgMC0uMjIyLS43ODl6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktYWIpIiBkPSJNNzcuNzQ0IDUwLjY0N2EuNzMyLjczMiAwIDAgMCAuMDg3LTEuMjA1bC0xLjc5LTEuMzM1YS43MzQuNzM0IDAgMSAwLS44NjUgMS4xODVsMS43MjUgMS4yODJhLjgyLjgyIDAgMCAwIC4wNjIuMDQ2bC4wMDcuMDA1LjAyLjAxMmMuMjMuMTQyLjUyLjE0Ni43NTQuMDF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktYWMpIiBkPSJtMzcuODkzLjU0Mi0uNzU2IDIuMDk4YS43MzUuNzM1IDAgMSAwIDEuMzg4LjQ4bC43MjQtMi4wMThhLjk1OC45NTggMCAwIDAgLjAyNy0uMDczbC4wMDctLjAzYS43MzIuNzMyIDAgMCAwLTEuMzktLjQ1N3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1hZCkiIGQ9Ik00NC45MSAzLjc1M2EuNzcuNzcgMCAwIDAgLjIxLS4yNDZsMS4wNzctMS44NTZhLjgxLjgxIDAgMCAwIC4wMzgtLjA2NWwuMDE0LS4wM2EuNzMyLjczMiAwIDAgMC0xLjI4Ni0uNjk5bC0xLjEyMiAxLjkyOGEuNzM1LjczNSAwIDAgMCAxLjA3Ljk2OHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1hZSkiIGQ9Ik03OC43NTcgNDYuMDY1YS43ODkuNzg5IDAgMCAwLS4xOTItLjE4NmwtMS42Ny0xLjAydi4wMDVsLS4yMzgtLjE1YS43MzMuNzMzIDAgMSAwLS43NSAxLjI1OWwxLjgzNSAxLjEyYS44MDUuODA1IDAgMCAwIC4wNjYuMDRsLjAwNy4wMDMuMDIyLjAxYy4yNDIuMTIuNTMuMDk4Ljc1LS4wNTdhLjczMy43MzMgMCAwIDAgLjE3LTEuMDI0eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLWFmKSIgZD0iTTc5LjE3MiA0Mi40OTNhLjc5Ni43OTYgMCAwIDAtLjIwOS0uMTY4bC0xLjc4LS44Nzd2LjAwNGwtLjIyNS0uMTE1YS43MzMuNzMzIDAgMSAwLS42MzEgMS4zMjJsMS45MjguOTQ5YS45MTQuOTE0IDAgMCAwIC4wNy4wMzVsLjAwNS4wMDIuMDI0LjAwOGEuNzMyLjczMiAwIDAgMCAuODE4LTEuMTZ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktYWcpIiBkPSJtNzIuOTUzIDIyLjQwNS0uMjcuMDE2YS43MzMuNzMzIDAgMSAwIC4xMjMgMS40NmwyLjE0NC0uMTUzYS42Ny42NyAwIDAgMCAuMDc0LS4wMDVsLjAzNC0uMDA1YS43My43MyAwIDAgMCAuMTIzLTEuNDE0bC0uMDk0LS4wMjVhLjg2Mi44NjIgMCAwIDAtLjE3LS4wMTVoLS4wMDVsLTEuOTYyLjEzNy4wMDMuMDA0eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLWFoKSIgZD0iTTUwLjA0IDc0LjY2NmEuNzM2LjczNiAwIDAgMC0xLjAwNC4yNjh2LjAwMWEuNzU4Ljc1OCAwIDAgMC0uMDk3LjMwN2wtLjI2MyAyLjEzYS44NTIuODUyIDAgMCAwLS4wMS4wNzh2LjAzMWEuNzMzLjczMyAwIDAgMCAxLjQ1Ni4xNGwuMjc3LTIuMjEzYS43MzQuNzM0IDAgMCAwLS4zNi0uNzQyeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLWFpKSIgZD0iTTU1LjA1OCA3NS4zNzJhLjczMi43MzIgMCAwIDAgMS40NTgtLjExM2wtLjExLTIuMjI4YS43MzIuNzMyIDAgMCAwLS40OC0uNjY3bC0uMDc2LS4wMjRhLjczOC43MzggMCAwIDAtLjkxLjc3OWwuMTEgMi4xNDRjLS4wMDEuMDI2IDAgLjA1Mi4wMDIuMDc4bC4wMDYuMDN6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktYWopIiBkPSJNNDguMjE2IDQuMzg4YS43MjguNzI4IDAgMCAwIC4yMjctLjIyNWwuMTEzLS4xNzQuMDA3LjAwOUw0OS42OSAyLjQxYS45NjUuOTY1IDAgMCAwIC4wNDYtLjA2M2wuMDE1LS4wMjdhLjczMS43MzEgMCAwIDAtMS4yMTItLjgxNGwtLjA0Ny4wNi0xLjI1MSAxLjc2YS43MzQuNzM0IDAgMCAwIC45NzYgMS4wNnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1haykiIGQ9Im01OC4wNzMgNzMuODg1LjAwMi4wMS4wMDUuMDIxYS43MzIuNzMyIDAgMCAwIDEuNDQ0LS4yMzdsLS4yNzgtMi4wMzloLS4wMDJsLS4wMjItLjE3NGEuNzM0LjczNCAwIDEgMC0xLjQ1Mi4yMTZsLjI5MyAyLjEyNy4wMS4wNzZ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktYWwpIiBkPSJtNjAuOTU3IDcyLjE3OC4wMDIuMDA5LjAwNy4wMmEuNzMzLjczMyAwIDAgMCAxLjQxNy0uMzZsLS40NTUtMi4wMjFoLS4wMDJsLS4wMzQtLjE1N2EuNzM0LjczNCAwIDEgMC0xLjQyOC4zNGwuNDc1IDIuMDk0Yy4wMDQuMDI1LjAxLjA1LjAxOC4wNzV6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktYW0pIiBkPSJNNjkuMjk1IDY2LjAwMWEuNzM0LjczNCAwIDAgMCAuNjAzLTEuMDQ4bC0xLjAzNC0xLjk3OGEuNzM0LjczNCAwIDEgMC0xLjI5NC42OTNsLjk5OCAxLjkwMmMuMDEuMDI0LjAyMy4wNDcuMDM2LjA3bC4wMDIuMDA0LjAxNS4wMmEuNzM1LjczNSAwIDAgMCAuNjc0LjMzN3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1hbikiIGQ9Im02My42ODMgNzAuMjI3LjAxMy4wM2EuNzMyLjczMiAwIDAgMCAxLjM4MS0uNDgybC0uNjMxLTEuOTg3aC0uMDAzbC0uMDQ0LS4xNDFhLjczLjczIDAgMCAwLS42MzUtLjUyLjczOC43MzggMCAwIDAtLjguNjYyLjc4Ljc4IDAgMCAwIC4wNDMuMzJsLjY1MyAyLjA0NWMuMDA4LjAyOC4wMTUuMDUxLjAyMy4wNzN6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktYW8pIiBkPSJNNTEuNDUgNS4zMmEuNzcuNzcgMCAwIDAgLjI1LS4yMDRsMS4zOTgtMS42My4wNTItLjA2LjAxNy0uMDI2YS43MzEuNzMxIDAgMCAwLTEuMTM4LS45MThsLTEuNDU0IDEuNjkxYS43MzQuNzM0IDAgMCAwIC44NzYgMS4xNDZ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktYXApIiBkPSJtNjYuMjM5IDY4LjA0NS4wMDMuMDA2LjAxMi4wMjJjLjEyNS4yNC4zNzIuMzkuNjQyLjM5M2guMDA1YS43MzQuNzM0IDAgMCAwIC42ODYtLjk5MmwtLjg1Ny0yLjA2YS43MzMuNzMzIDAgMCAwLS42OC0uNDY2aC0uMDA1YS43MzMuNzMzIDAgMCAwLS42NjQgMS4wNDRsLjgyOCAxLjk4MWMuMDEuMDI4LjAyLjA1LjAzLjA3MnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1hcSkiIGQ9Ik02Mi4zMzYgMTAuMTg3YS43MzQuNzM0IDAgMSAwIC43MjMgMS4yNzdsMS44ODItMS4wMzdhLjkzLjkzIDAgMCAwIC4wNjktLjAzOGwuMDI1LS4wMTdhLjczMi43MzIgMCAwIDAtLjc0My0xLjI2bC0xLjk1NiAxLjA3NXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1hcikiIGQ9Ik02Ni42MSAxNS4xOTVhLjczNS43MzUgMCAwIDAgMSAuNzM2bDIuMDM0LS42OTVhLjgzNS44MzUgMCAwIDAgLjA3Mi0uMDI1bC4wMy0uMDEzYS43MzEuNzMxIDAgMCAwLS41MTMtMS4zNjlsLTIuMTEzLjcyYS43MzIuNzMyIDAgMCAwLS41MS42NDZ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjI0IDIuMjQpIi8+PHBhdGggZmlsbD0idXJsKCNjZmktYXMpIiBkPSJNNjQuMzc3IDEyLjk1NmEuNzMuNzMgMCAwIDAgLjc0Ny43MjMuNzcuNzcgMCAwIDAgLjMxNC0uMDc2bDEuOTY1LS44NjlhLjc1OC43NTggMCAwIDAgLjA3LS4wM2wuMDI4LS4wMTZhLjczLjczIDAgMCAwLS4zNTUtMS4zNzJoLS4wMTJhLjc5NC43OTQgMCAwIDAtLjI2Mi4wNTNsLTEuODAxLjc5My4wMDMuMDAzLS4yNDcuMTA1YS43My43MyAwIDAgMC0uNDUuNjg2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLWF0KSIgZD0iTTUyLjMzMiA3Ny4xODhhLjczNC43MzQgMCAwIDAgMS4wNDQtLjYxMmwuMDc2LTIuMDIzLS4wMDQuMDAxLjAxLS4yMDlhLjczNC43MzQgMCAwIDAtMS4zOTgtLjM1MS43ODUuNzg1IDAgMCAwLS4wNy4zMTZsLS4wNzYgMi4xNDRhLjc3My43NzMgMCAwIDAtLjAwMy4wOGwuMDAyLjAzYS43My43MyAwIDAgMCAuNDIuNjI0eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLWF1KSIgZD0iTTcwLjQ0NSAyMC4xOWEuNzM2LjczNiAwIDAgMCAuODYuODk3bDIuMTIzLS4zMzhhLjkzNi45MzYgMCAwIDAgLjA3Ny0uMDExbC4wMy0uMDA4YS43MzEuNzMxIDAgMCAwLS4yNzEtMS40MzZsLTIuMjA1LjM0OGEuNzMzLjczMyAwIDAgMC0uNjE0LjU0OXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjQgMi4yNCkiLz48cGF0aCBmaWxsPSJ1cmwoI2NmaS1hdikiIGQ9Ik02MC4xOTEgOS42NTlhLjc2NC43NjQgMCAwIDAgLjI5Ny0uMTNsMS43ODItMS4xOThjLjAyNi0uMDE2LjA0NS0uMDMuMDY1LS4wNDRsLjAyNC0uMDJhLjczMi43MzIgMCAwIDAtLjg1MS0xLjE4OGwtMS41NjQgMS4wNDguMDA3LjAwMi0uMjk4LjE5NGEuNzMzLjczMyAwIDAgMCAuNTM4IDEuMzM2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLWF3KSIgZD0iTTU0LjUzMSA2LjUyYy4xLS4wNDEuMTkyLS4xMDMuMjY3LS4xOGwxLjU0LTEuNDk4YS42ODguNjg4IDAgMCAwIC4wNTUtLjA1M2wuMDIxLS4wMjVhLjczMi43MzIgMCAwIDAtMS4wNS0xLjAxOGwtMS40NDUgMS40LjAwNC4wMDItLjE2MS4xNTNhLjczLjczIDAgMCAwLS4xODMuOC43MzkuNzM5IDAgMCAwIC45NTIuNDE4eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjxwYXRoIGZpbGw9InVybCgjY2ZpLWF4KSIgZD0iTTU3LjQ0OCA3Ljk3YS43Ni43NiAwIDAgMCAuMjgyLS4xNTVsMS42Ny0xLjM1MmEuODU4Ljg1OCAwIDAgMCAuMDYtLjA1bC4wMjItLjAyYS43MzIuNzMyIDAgMCAwLS43MTQtMS4yMjguNzk1Ljc5NSAwIDAgMC0uMjQuMTE5bC0xLjczNCAxLjQwM2EuNzM0LjczNCAwIDAgMCAuNjU1IDEuMjgzeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNCAyLjI0KSIvPjwvZz48L2c+PC9zdmc+"}),E.jsx("ellipse",{fill:v("ay"),fillRule:"nonzero",transform:"rotate(-76.627 42 42)",cx:"42",cy:"42",rx:"30.72",ry:"30.677"}),E.jsx("path",{d:"M63.572 20.14a30.708 30.708 0 0 0-51.994 25.865c21.223 4.406 42.705-6.281 51.994-25.865z",fill:v("az")}),E.jsx("path",{d:"M49.07 12.105A30.72 30.72 0 1 0 71.855 49.06 30.699 30.699 0 0 0 49.07 12.105zm21.574 37.409c-3.721 15.636-19.41 25.298-35.048 21.584-15.638-3.714-25.307-19.398-21.6-35.038 3.706-15.64 19.386-25.316 35.027-21.617a29.132 29.132 0 0 1 21.62 35.071z",fill:o===hW.M.Red?"#8E0A26":"#0A0F8E"})]})]})})})),fW="coinIcon--01289",AW="coin--aa6eb",kW="isClassicView--27b54",ZW="loser--0a2c9",PW="winner--b47db",yW="isDesktop--5014e",zW="multiplierContainer--1235b",xW="multiplierText--f1e84",NW="appearing--56c2e",eW="left--6d6c9",tW="rotating--60db2",mW="right--3c41e";var rW;!function(o){o[o.Appearing=0]="Appearing",o[o.Rotating=1]="Rotating",o[o.None=2]="None"}(rW||(rW={}));const BW=o=>{const{coinFlipMultiplierCounterDuration:W,multiplier:F,type:v,result:a,layoutMode:G,isClassicView:L,isWinVisible:U}=o,[h,p]=l.useState(rW.Appearing),g=l.useCallback((()=>{p(rW.Rotating)}),[p]);l.useEffect((()=>{a&&p(rW.None)}),[a,v]);const{currentValue:f,isFinal:A}=Do(W,F,!1),k="desktop"===G,Z=String(null!=f?f:0).length,P=Z>2?2.5/Z:1;return E.jsxs("div",{className:I.A(AW,{[eW]:v===hW.M.Red,[mW]:v===hW.M.Blue,[ZW]:a&&a!==v,[PW]:a&&a===v&&U,[yW]:k,[kW]:L}),children:[E.jsx(gW,{coin:v,className:fW}),!!f&&E.jsx("div",{className:I.A(zW,{[NW]:h===rW.Appearing,[tW]:h===rW.Rotating,[yW]:k,[kW]:L}),onAnimationEnd:g,"data-role":`coinflip-${v}`,"data-rotating":h===rW.Rotating,children:E.jsx(Xo,{sign:"x",value:f,isFinalValue:A,className:xW,customElementStyle:{transform:`translate(-50%, 0) scale(${P})`,transition:"transform 500ms ease-in"}})})]})};var jW=F(990820);const VW="coinFlipContainer--b169d",wW="desktop--cfda4",KW="isClassicView--f9455",TW="tablet--d85fe",dW="portrait--aab01",nW="coinWrapper--13ac9",uW=l.memo((({multipliers:o,result:W,isVisible:F,layoutMode:v,counterDuration:a,isClassicView:G,isWinVisible:L})=>{if(!F)return null;const U=null==o?void 0:o.Blue,l=null==o?void 0:o.Red;return E.jsx("div",{className:I.A(VW,{[dW]:"mobilePortrait"===v,[wW]:"desktop"===v,[TW]:"tablet"===v,[KW]:G}),"data-role":"coin-flip-container",children:E.jsxs("div",{className:nW,children:[E.jsx(BW,{coinFlipMultiplierCounterDuration:a,type:hW.M.Red,multiplier:l,result:W,layoutMode:v,isClassicView:G,isWinVisible:L}),E.jsx(BW,{coinFlipMultiplierCounterDuration:a,type:hW.M.Blue,multiplier:U,result:W,layoutMode:v,isClassicView:G,isWinVisible:L})]})})})),$W=v.PA((()=>{const{coinFlip:o,device:W,settings:F,restore:v,abstractGame:a,youWin:L}=G.Pj(),{isVisible:U,result:I,multipliers:l}=o,{layoutMode:h}=W,p=v.isRestoring?0:o.phase===jW.g.UpdateMultipliers?F.multiplierUpdateDurationForCoinFlip:F.multiplierCounterDurationForCoinFlip;return E.jsx(uW,{counterDuration:p,isVisible:U,result:I,multipliers:l,layoutMode:h,isClassicView:a.isClassicView,isWinVisible:L.showGameResult})}));var YW=F(565093),QW=F(112771),CW=F(234858),qW=F(894330),cW=F(337006);function _W({phase:o,multiplier:W,visible:F,payout:v,layoutMode:G,currencySymbol:l,coinFlipResult:h,gameWidth:p}){const g=a.ej(v),f=null!=W?W:0,A=QW.lx(o,h),k=QW.Fj(o),Z=U.T(L.X.YouWin),P=function(o,W){return"mobilePortrait"===o?(W/750).toFixed(2):"tablet"===o?(W/1500).toFixed(2):.8}(G,p);return E.jsxs("div",{"data-role":"winning-message-wrapper",className:I.A(cW.A.container,{[cW.A.portrait]:"mobilePortrait"===G},{[cW.A.tablet]:"tablet"===G},{[cW.A.show]:F}),style:{transform:`scale(${P})`},children:[E.jsx("div",{className:cW.A.backgroundGradient,style:{background:k}}),E.jsx("img",{"data-role":"center-symbol-wrapper",className:I.A(cW.A.centerSymbol,{[cW.A.isCrazyTime]:o===Uo.Qc.CrazyTime,[cW.A.isLottoGame]:o===Uo.Qc.BallDrawing}),src:A}),o===Uo.Qc.BallDrawing&&E.jsx("img",{className:cW.A.lottoBall,src:CW}),E.jsx("img",{className:cW.A.winBase,src:qW}),E.jsx(QW.QK,{payout:g,size:7,currencySymbol:l}),E.jsxs("div",{className:cW.A.multiplier,children:[E.jsx(QW.LQ,{multiplier:f,size:6.5}),E.jsx(QW.LQ,{multiplier:f,size:4.5,withX:!0})]}),E.jsx("div",{className:cW.A.totalWinners,children:E.jsx(QW.a9,{text:Z,size:4})})]})}const OW="win--93465",XW="isClassicView--99697",SW=({phase:o,visible:W,payout:F,multiplier:v,layoutMode:a,currencySymbol:G,coinFlipResult:L,gameWidth:U,isClassicView:l})=>E.jsx("div",{className:I.A(OW,{[XW]:l}),children:E.jsx(_W,{multiplier:v,payout:F,visible:W,phase:o,layoutMode:a,currencySymbol:G,coinFlipResult:L,gameWidth:U})}),sW=v.PA((()=>{const{youWin:o,abstractGame:W,device:F,game:v,coinFlip:a}=G.Pj(),L=v.phase===Uo.Qc.Resolved?v.prevPhase===Uo.Qc.Init?Uo.Qc.BallDrawing:v.prevPhase:v.phase;if(o.showTryAgain||0===o.winMultiplier&&L!==Uo.Qc.BallDrawing||0===o.payout)return null;const U=o.payout>0&&(Uo.R2(L)||L===Uo.Qc.BallDrawing)&&o.showGameResult&&v.animationsDone;return E.jsx(SW,{visible:U,payout:o.payout,multiplier:o.winMultiplier,phase:L,layoutMode:F.layoutMode,currencySymbol:W.currencySymbol,coinFlipResult:a.result,gameWidth:W.gameDimensions.containerWidth,isClassicView:W.isClassicView})})),iW="bottomGradient--ef123",RW="shrink--cb968",JW="topGradient--4e257",DW="tablet--076e7",MW=({layoutMode:o,isShrinkPhase:W})=>"mobilePortrait"===o?null:E.jsxs(E.Fragment,{children:[E.jsx("div",{className:I.A(JW,{[DW]:"tablet"===o})}),E.jsx("div",{className:I.A(iW,{[DW]:"tablet"===o,[RW]:W})})]});var HW=F(266600),bW=F(296715),oF=F(380300),WF=F(24984),FF=F(626396);const EF="container--e7f80",vF="canvas--17585",aF="hidden--b4e3a";class GF extends l.PureComponent{constructor(o){var W;super(o),this.containerRef=l.createRef(),this.attached=!1,this.setCanvasContainerRef=o=>{this.canvasContainerRef=o,!this.attached&&this.game&&(this.attached=!0,this.canvasContainerRef.appendChild(this.game.canvas),this.resizeGame())},this.resizeGame=()=>{const{dimensions:o,galleryPosition:W}=this.props;if(this.game){this.game.resize(o);const F=o.reverseScale||1;this.positionBoard(W,o.width/F)}},null===(W=o.webglPreloader)||void 0===W||W.then((o=>{const{onAimPositioningBeforeShoot:W,onChange:F,onStateChange:E}=this.props;this.game=o,this.game.onChangeSelection=(o,W,E)=>{F({x:o,y:W},E)},this.game.onAimPositioningBeforeShoot=(o,F)=>{W({x:o,y:F})},this.game.onStateChange=o=>{E(o)},!this.attached&&this.canvasContainerRef&&(this.attached=!0,this.canvasContainerRef.appendChild(this.game.canvas)),this.resizeGame(),this.updateFromProps()})).catch((()=>{}))}componentDidUpdate(o){this.updateFromProps(o)}componentDidMount(){this.game&&this.updateFromProps()}componentWillUnmount(){this.game=void 0}render(){const{isEnabled:o}=this.props;return E.jsx("div",{ref:this.containerRef,className:I.A(EF,{[aF]:!o}),children:E.jsx("div",{ref:this.setCanvasContainerRef,className:vF})})}updateFromProps(o){const{dimensions:W,showBoardBackground:F,gamePaused:E,symbols:v,galleryPosition:a,selectedSymbol:G,isEnabled:L,cashHuntPhase:U,timeRemaining:I}=this.props;if(this.game){if(o&&LF(o.dimensions,W)||this.resizeGame(),F!==(null==o?void 0:o.showBoardBackground)&&this.game.toggleBackgroundBoard(F),o&&L===(null==o?void 0:o.isEnabled)||this.resizeGame(),o&&E===o.gamePaused||this.game.setPaused(E),o&&(null==o?void 0:o.symbols)===v||this.game.updateField(v),!o||!LF(null==o?void 0:o.galleryPosition,a)){const o=W.reverseScale||1;this.positionBoard(a,W.width/o)}o&&LF(null==o?void 0:o.selectedSymbol,G)||G&&this.game.setSelectedSymbol(G.x,G.y);const l=U!==(null==o?void 0:o.cashHuntPhase),h=I!==(null==o?void 0:o.timeRemaining);if(U===FF.Q.Shooting)L&&(h||l)&&this.updateDecisionTimer(l);else if(l)switch(U){case FF.Q.Intro:case FF.Q.Carousel:this.game.doCommand({command:bW.QK.Clear,payload:void 0});break;case FF.Q.ShootingWillEndSoon:L&&this.game.doCommand({command:bW.QK.SelectAndBlock,payload:void 0});break;case FF.Q.Revealing:L&&this.game.doCommand({command:bW.QK.Shoot,payload:void 0});break;case FF.Q.Result:this.game.doCommand({command:bW.QK.Clear,payload:void 0})}}}positionBoard(o,W){var F;const{x:E,y:v,width:a,height:G}=function(o,W){return{x:o.x?o.x:.5*W-.5*o.width+2,y:o.y,width:o.width,height:o.height}}(o,W);null===(F=this.game)||void 0===F||F.positionBoard(E,v,a,G)}updateDecisionTimer(o){var W,F,E;const{layoutMode:v,onChange:a,selectedSymbol:G,timeRemaining:L,totalTimeRemaining:U}=this.props,I=1e3*U,l=1e3*L;if(!G&&"mobilePortrait"===v&&o){const o=oF.x();a({x:o.x,y:o.y},WF.XI.Auto),null===(W=this.game)||void 0===W||W.setSelectedSymbol(o.x,o.y)}o&&(null===(F=this.game)||void 0===F||F.doCommand({command:bW.QK.PlayIntro,payload:void 0})),null===(E=this.game)||void 0===E||E.updateDecisionTimer(o,I,l)}}function LF(o,W){return void 0!==o&&void 0!==W&&HW.A(W,o)}var UF=F(145023);const IF=v.PA((()=>{const[o,W]=l.useState(!1),F=G.Pj(),{abstractGame:v,cashHunt:a,device:L,game:U,settings:I}=F,h=UF.U(),p=l.useCallback(((o,W)=>a.chooseSymbol(o,W)),[a]),g=l.useCallback((o=>a.onAimPositioningBeforeShoot(o)),[a]),f=l.useCallback((o=>a.onStateChange(o)),[a]);return l.useEffect((()=>{void 0!==h&&h.then((()=>W(!0)))}),[h]),o?E.jsx(GF,{isEnabled:a.isVisible,gamePaused:v.isGamePaused&&!a.isVisible,symbols:a.grid,cashHuntPhase:a.phase,selectedSymbol:a.selectedSymbol,galleryPosition:a.containerProps,dimensions:v.gameDimensions,showBoardBackground:I.showCashHuntGrid,layoutMode:L.layoutMode,onChange:p,onAimPositioningBeforeShoot:g,onStateChange:f,timeRemaining:U.timeRemaining,totalTimeRemaining:U.totalTimeRemaining,webglPreloader:h}):null}));var lF=F(234468);const hF=Math.round(100/lF.YB),pF=Math.round(100/lF.Ge),gF=l.memo((({selectedSymbol:o={x:0,y:0}})=>{const W=o.x*hF,F=o.y*pF,v={width:`${hF}%`,height:`${pF}%`,left:`${W}%`,top:`${F}%`};return E.jsx(xo.m,{type:zo.e.CashHuntResultMultiplier,style:v})})),fF="resultPlaceholder--51a97",AF=v.PA((()=>{const{cashHunt:o}=G.Pj(),W=o.containerProps;return E.jsxs(E.Fragment,{children:[E.jsx(IF,{}),E.jsx("div",{className:fF,style:{top:W.y,width:W.width,height:W.height},children:E.jsx(gF,{selectedSymbol:o.selectedSymbol})})]})}));var kF=F(352544);const ZF={[No.gc.Green]:zo.e.CrazyBonusLeftFlapper,[No.gc.Blue]:zo.e.CrazyBonusTopFlapper,[No.gc.Yellow]:zo.e.CrazyBonusRightFlapper};var PF=F(716306),yF=F(656437);const zF="chosenFlapper--b69cf",xF="show--cbcbd",NF="hide--c9d15",eF="desktop--bc99b",tF="mobile--b27cb",mF="tablet--ea642";var rF;!function(o){o.BonusBetSpot="BonusBetSpot",o.FlyingMultiplier="FlyingMultiplier",o.ChosenCrazyBonusFlapper="ChosenCrazyBonusFlapper"}(rF||(rF={}));const BF=({isVisible:o,type:W,flying:F,layout:v,gameDimensions:a,isFastForwardForAnimationEnabled:G,disableFastForwardAnimation:L,isFullScreen:U})=>{const h=function({flying:o,type:W,gameDimensions:F,placeHoldersContext:E,isFullScreen:v}){const[a,G]=l.useState({}),[L,U]=l.useState(!1),I=l.useRef(void 0),h=l.useRef(!1);return l.useEffect((()=>function({flying:o,type:W,placeHoldersContext:F,gameDimensions:E,withTransition:v,setAnimationStyle:a,setIsInStartPosition:G}){if(o&&W){const o=F.getRect({type:ZF[W]},E),L=F.getRect({type:zo.e.CrazyBonusChosenFlapper},E).width,U=o.width/L,I=o.left,l=o.top;v.current=!0,a({transitionProperty:"none",transformOrigin:"top left",transitionDuration:"0ms",transform:`translate(${I}px, ${l}px) scale(${U}) rotateZ(${kF._s}deg)`}),G(!0)}else if(W){const o=F.getRect({type:zo.e.CrazyBonusChosenFlapper},E);a({transform:`translate(${o.left}px, ${o.top}px)`}),G(!0)}}({flying:o,type:W,placeHoldersContext:E,gameDimensions:F,withTransition:h,setAnimationStyle:G,setIsInStartPosition:U})),[o,E,W]),l.useEffect((()=>function(o){function W(){!function({type:o,animationStyle:W,setAnimationStyle:F,gameDimensions:E,withTransition:v,placeHoldersContext:a,frameIdRef:G,isInStartPosition:L}){if(o&&L){const o=a.getRect({type:zo.e.CrazyBonusChosenFlapper},E),L=parseFloat(document.body.style.marginTop),U=window.pageYOffset-(Number.isNaN(L)?0:L),I=o.left,l=o.top+U,h={transitionDuration:`${v.current?kF.mQ:0}ms`,transform:`translate(${I}px, ${l}px) scale(1) rotateZ(0)`};v.current=!1,W.transform!==h.transform&&(G.current=window.requestAnimationFrame((()=>{F(h)})))}}(o)}return W(),window.addEventListener("scroll",W),()=>{window.removeEventListener("scroll",W)}}({type:W,animationStyle:a,setAnimationStyle:G,gameDimensions:F,withTransition:h,placeHoldersContext:E,frameIdRef:I,isInStartPosition:L})),[a,F,E,W,v,L]),a}({flying:F,type:W,gameDimensions:a,placeHoldersContext:l.useContext(GW.so),isFullScreen:U}),p=yF.Z(o,kF.O_),g=function(o,W,F){const[E,v]=l.useState(!0);return l.useLayoutEffect((()=>{W?(v(!1),F(rF.ChosenCrazyBonusFlapper)):v(!0)}),[F,W,o]),E}(o,G,L),f="desktop"===v;return!W||!o&&p?null:E.jsx("div",{style:h,className:I.A(zF,{[xF]:o&&g,[NF]:!o&&g,[eF]:f,[tF]:"mobilePortrait"===v,[mF]:"tablet"===v}),children:E.jsx(PF.p,{type:W,flashing:!o,isDesktop:f,enabled:!1,isClassicView:!1})})};function jF(){}const VF=v.PA((()=>{const o=G.Pj();return E.jsx(BF,{isVisible:o.crazyTime.selectIsChosenFlapperVisible(),type:o.crazyTime.flapper,flying:o.crazyTime.flyingFlapper,layout:o.device.layoutMode,gameDimensions:o.abstractGame.gameDimensions,isFastForwardForAnimationEnabled:!1,isFullScreen:o.abstractGame.isFullscreen,disableFastForwardAnimation:jF})}));var wF=F(231618);const KF="crazyBonusContainer--76acf",TF="landscape--64715",dF=({isLandscape:o})=>E.jsxs("div",{className:I.A(KF,{[TF]:o}),children:[E.jsx(wF.M,{}),E.jsx(VF,{})]}),nF="bottomOverlay--a1672",uF="classicLogo--ed264",$F="coinFlip--4deef",YF="cashHunt--459e2",QF="pachinko--b7deb",CF="crazyTime--ed59c",qF=v.PA((()=>{const o=G.Pj(),W=o.abstractGame.isClassicView,F=o.game.phase;return W?E.jsxs("div",{className:nF,children:[F===Uo.Qc.CoinFlip&&E.jsx("div",{className:I.A(uF,$F)}),F===Uo.Qc.CashHunt&&E.jsx("div",{className:I.A(uF,YF)}),F===Uo.Qc.CrazyTime&&E.jsx("div",{className:I.A(uF,CF)}),F===Uo.Qc.Pachinko&&E.jsx("div",{className:I.A(uF,QF)})]}):null}));var cF,_F=F(478128),OF=F(930990),XF=F(636308);function SF(o,W){const F=(new _F.A1g).beginFill();return F.alpha=0,W?F.drawRect(0,0,o?XF.mo:XF.tn,o?XF.Xw:XF.I1):F.drawRect(-4,-124,XF.PI+1,XF.sk).beginHole().drawRect(68,0,46,25).endHole(),F.endFill(),F.eventMode="static",F.cursor="pointer",F}!function(o){o.Chip="chip",o.ChipPlaceholder="chipPlaceholder"}(cF||(cF={}));var sF=F(980007),iF=F(583516),RF=F(171526);class JF extends _F.mcf{constructor(o){super(),this.betValue=0,this.renderGrid=o.onChipAdded,this.updateBetsCallback=o.updateBetsCallback,this.ChipTexture=sF.A.getSingleton(RF.W1),this.betSpotIndex=o.betSpotIndex,this.chipRectangle=o.chipRectangle,this.chipOffset=o.chipOffset,this.betSpotContainer=this.addBetSpotContainer(o.betSpotContainerOffset),o.clickArea.on("pointerdown",(()=>{this.updateBetsCallback(this.betSpotIndex)})),this.betSpotContainer.interactiveChildren=!1}resetBetSpot(){this.betSpotContainer&&(this.removeChipSprites(),this.betValue=0)}setBetValue(o,W){this.betSpotContainer.visible=0!==o,o!==this.betValue&&(this.betValue=o,this.renderValue(W,o))}hideChip(o){this.chipAnimationTimeline&&(this.chipAnimationTimeline.fastForward(),this.chipAnimationTimeline.dispose());const W=this.findChip();W&&(this.chipAnimationTimeline=io.M(),this.chipAnimationTimeline.sequence(Ro.M(W).animateTo({alpha:0},.15)),o&&this.chipAnimationTimeline.fastForward(),Jo.l({anim:this.chipAnimationTimeline}))}showChip(){const o=this.findChip();o&&(o.alpha=1)}updateChipPlaceholderPosition(o){const W=this.getChipPlaceholder(this.chipRectangle,this.chipOffset);this.addChild(W);const F=W.getGlobalPosition(),E=W.getBounds();o({cardId:this.betSpotIndex,position:{x:F.x+E.width/2,y:F.y+E.height/2},size:{height:E.height,width:E.width}})}addBetSpotContainer(o){return this.betSpotContainer=new _F.mcf,this.betSpotContainer.position=o,this.addChild(this.betSpotContainer),this.betSpotContainer}renderValue(o,W){this.betSpotContainer&&(this.renderGrid(),this.addChip(o,W))}removeChipSprites(){var o;null===(o=this.findChip())||void 0===o||o.destroy()}getChipPlaceholder(o,W){const F=this.getChildByName(cF.ChipPlaceholder);if(!F){const F=new _F.kxk(_F.gPd.EMPTY);return F.x=o.x+W.x,F.y=o.y+W.y,F.height=o.height,F.width=o.width,F.name=cF.ChipPlaceholder,F.interactiveChildren=!1,F}return F}addChip(o,W){const F=this.getChip(W);o&&0!==W?(this.chipAnimationTimeline&&(this.chipAnimationTimeline.fastForward(),this.chipAnimationTimeline.dispose()),this.chipAnimationTimeline=iF.i(F,this.betSpotContainer,this.chipRectangle),Jo.l({anim:this.chipAnimationTimeline})):this.betSpotContainer.addChild(F)}findChip(){return this.betSpotContainer.getChildByName(cF.Chip)}getChip(o){const W=this.findChip();if(W)return W.texture=this.ChipTexture.getChipTexture(o),W;const F=_F.kxk.from(this.ChipTexture.getChipTexture(o));return F.x=this.chipRectangle.x,F.y=this.chipRectangle.y,F.height=this.chipRectangle.height,F.width=this.chipRectangle.width,F.name=cF.Chip,F}}var DF=F(45967),MF=F(778810);class HF extends JF{constructor(o,W){super(o),this.createLottoBetSpots(W.assets),this.y=DF.a1,this.x=DF.Vm}applyStyle(o,W){this.lottoBetSpots&&(this.lottoBetSpots.freeSpaceBetSpot.visible=o===MF._g.FreeSpace,this.lottoBetSpots.chanceBetSpot.visible=o===MF._g.Multi,this.lottoBetSpots.withGlobalMultiplierBetSpot.visible=W)}getGlobalBetSpot(){var o;return null===(o=this.lottoBetSpots)||void 0===o?void 0:o.withGlobalMultiplierBetSpot}addBetSpotContainer(){const o=new _F.mcf;return o.x=1.9,o.y=.7,this.addChild(o),o}createLottoBetSpots(o){const W=this.createBetSpotAsset(o.getTexture(OF.xL.ChanceBetSpot)),F=this.createBetSpotAsset(o.getTexture(OF.xL.FreeSpaceBetSpot)),E=this.createBetSpotAsset(o.getTexture(OF.xL.GlobalMultiplierBetSpot));W.visible=!0,F.visible=!1,E.visible=!1,W.interactiveChildren=!1,F.interactiveChildren=!1,E.interactiveChildren=!1,W.zIndex=-1,F.zIndex=-1,E.zIndex=-1,this.addChild(W,F,E),this.sortChildren(),this.lottoBetSpots={withGlobalMultiplierBetSpot:E,chanceBetSpot:W,freeSpaceBetSpot:F}}createBetSpotAsset(o){const W=_F.kxk.from(o);return W.width=35,W.height=35,W.x=1.7,W.y=-8.5,W}}class bF extends _F.mcf{constructor(o){super(),this.baseHeight=25.5,this.baseWidth=1.9*this.baseHeight,this.assets=o.assets,this.placeholderContainer=new _F.mcf,this.placeholderContainer.interactiveChildren=!1,this.toggleFree=this.createBaseSprite(this.assets.getTexture(OF.xL.BaseFree)),this.toggleChance=this.createBaseSprite(this.assets.getTexture(OF.xL.BaseChance)),this.toggleFreePlaceholder=this.createBaseSprite(this.assets.getTexture(OF.xL.FreeTogglePlaceholder)),this.toggleChancePlaceholder=this.createBaseSprite(this.assets.getTexture(OF.xL.ChanceTogglePlaceholder)),this.toggleGlobalPlaceholder=this.createBaseSprite(this.assets.getTexture(OF.xL.GlobalTogglePlaceholder)),this.placeholderContainer.addChild(this.toggleFreePlaceholder,this.toggleChancePlaceholder,this.toggleGlobalPlaceholder),this.placeholderContainer.visible=!1,this.slider=new _F.mcf,this.buttonFree=this.createButtonSprite(this.assets.getTexture(OF.xL.BtnHouse)),this.buttonChance=this.createButtonSprite(this.assets.getTexture(OF.xL.BtnChance)),this.slider.addChild(this.buttonChance,this.buttonFree),this.addChild(this.placeholderContainer),this.addChild(this.toggleFree,this.toggleChance),this.addChild(this.slider),this.setCardMode(o.mode,1,!0)}setCardMode(o,W,F){this.animateToggleButton(o,F),this.toggleGlobalPlaceholder.visible=W>1,this.toggleChancePlaceholder.visible=o===MF._g.Multi&&1===W,this.toggleFreePlaceholder.visible=o===MF._g.FreeSpace&&1===W}animateToggleButton(o,W){const F=io.M();F.parallel([Ro.M(this.toggleChance).animateTo({alpha:o===MF._g.FreeSpace?0:1},.5,so.ME),Ro.M(this.toggleFree).animateTo({alpha:o===MF._g.FreeSpace?1:0},.5,so.ME),Ro.M(this.buttonFree).animateTo({alpha:o===MF._g.FreeSpace?1:0},.2,so.ME),Ro.M(this.buttonChance).animateTo({alpha:o===MF._g.FreeSpace?0:1},.2,so.ME),Ro.M(this.slider.position).animateTo({x:o===MF._g.FreeSpace?23:0},.5,so.ME)]),Jo.l({anim:F}),W&&F.fastForward()}setIsToggleActive(o){this.toggleFree.visible=o,this.toggleChance.visible=o,this.buttonChance.visible=o,this.buttonFree.visible=o,this.placeholderContainer.visible=!o}createBaseSprite(o){const W=_F.kxk.from(o);return W.height=this.baseHeight,W.width=this.baseWidth,W.eventMode="auto",W}createButtonSprite(o){const W=_F.kxk.from(o);return W.height=27,W.width=27,W.position.set(0,1.5),W}}var oE=F(401832),WE=F(612970),FE=F(884495);class EE extends _F.mcf{constructor(o){super(),this.baseHeight=25.5,this.baseWidth=1.9*this.baseHeight,this.previousMultiplier=0,this.previousGlobalMultiplier=0,this.assets=o.assets,this.position={x:70,y:122.8},this.placeholderContainer=new _F.mcf,this.placeholderContainer.interactiveChildren=!1,this.winRays=this.createWinRays(),this.addChild(this.winRays),this.addChild(this.placeholderContainer),this.visible=!1}animateWonMultiplier(){const o=this.globalMultiplierText,W=this.totalMultiplierText;if(!o||!o.visible||!this.winRays.visible)return;this.visible=!0;const F=io.M(),E=this.previousMultiplier,v=void 0!==W&&!0===this.winRays.visible,a=this.getSweepMask(2*o.height),G=WE.nE(E,"cardTotalMultiplier");G.anchor.set(.5,.5),G.position.set(this.baseWidth-4,3);const L=new oE.MR({brightness:6});G.filters=[L],G.mask=a,this.addChild(G,a),this.sortChildren(),a.position={x:-.8*o.width*2,y:-.2*o.height*2};const U=[Ro.M(o.scale).animateTo({x:2,y:2},.3,so.am),v?Ro.M(W.scale).animateTo({x:2,y:2},.3,so.am):Ro.M({}).delay(.3)],I=v?Ro.M(W.position).animateTo({x:W.x-15,y:W.y+15},.3):Ro.M({}).delay(.3);F.parallel(U).sequence(I).callback((()=>{W&&(W.visible=!1),G.width=o.width,G.height=o.height,G.position={x:o.position.x,y:o.position.y},a.visible=!0})).callback((()=>{o.text=this.previousGlobalMultiplier>0?this.previousMultiplier*this.previousGlobalMultiplier+"x":o.text})).sequence(Ro.M(a.position).animateTo({x:1.2*o.width*2,y:-.4*o.height*2},.5)).callback((()=>{G.visible=!1,a.visible=!1,G.filters=null,a.destroy(),G.destroy()})).sequence(Ro.M(o.scale).animateTo({x:.9,y:.9},.3,so.am)),Jo.l({anim:F})}animateMultiplierSum(o=this.globalMultiplierText){if(!o)return;this.visible=!0;const W=io.M();W.sequence(Ro.M(o.scale).animateTo({x:2,y:2},.2,so.am).animateTo({x:.9,y:.9},.2,so.am)),Jo.l({anim:W})}applyGlobalMultiplier(o){var W;null===(W=this.totalMultiplierText)||void 0===W||W.removeFromParent(),o>1&&(this.visible=!0,this.totalMultiplierText=WE.nE(o,"cardGlobalMultiplier"),this.totalMultiplierText.zIndex=2,this.totalMultiplierText.scale={x:.9,y:.9},this.totalMultiplierText.anchor.set(.5,.5),this.totalMultiplierText.position.set(this.baseWidth-4,3),this.placeholderContainer.addChild(this.totalMultiplierText),this.previousGlobalMultiplier!==o&&this.animateMultiplierSum(this.totalMultiplierText),this.previousGlobalMultiplier=o)}applyTotalMultiplier(o){var W;null===(W=this.globalMultiplierText)||void 0===W||W.removeFromParent(),this.winRays.visible=o>1,o>1&&(this.visible=!0,this.globalMultiplierText=WE.nE(o,"cardTotalMultiplier"),this.globalMultiplierText.zIndex=1,this.globalMultiplierText.scale={x:.9,y:.9},this.globalMultiplierText.anchor.set(.5,.5),this.globalMultiplierText.position.set(this.baseWidth/2+1,this.baseHeight/2+5),this.placeholderContainer.addChild(this.globalMultiplierText),this.previousMultiplier=o)}reset(){var o,W;this.applyTotalMultiplier(1),this.applyGlobalMultiplier(1),this.previousGlobalMultiplier=1,this.previousMultiplier=1,null===(o=this.totalMultiplierText)||void 0===o||o.removeFromParent(),null===(W=this.globalMultiplierText)||void 0===W||W.removeFromParent(),this.winRays.visible=!1,this.visible=!1}createWinRays(){const o=_F.kxk.from(this.assets.getTexture(OF.xL.WinRays));return o.eventMode="auto",o.visible=!1,o.width=this.baseWidth,o.height=this.baseWidth-21,o.x=this.baseWidth/2,o.y=-1,o.anchor.set(.5,0),o}getSweepMask(o){const W=FE.O(!1,12),F=new _F.kxk(W);return F.width=o/2,F.height=2*o,F.rotation=-Math.PI/4,F.visible=!1,F}}var vE=F(738759),aE=F(893015),GE=F(879356),LE=F(157757),UE=F(918973);const IE={autoStart:!0,loop:!0,explosiveness:!1,amount:1e3,emissionDelay:1734723475976807e-33,particlesPerWave:40,particle:{colors:{gradient:!1,mode:UE.F.Random,colors:["#1E3FC1","#000000"]},damping:.22,gravityVector:[0,0],directionVector:[-20816681711721685e-33,10408340855860843e-33],spread:180,angularVelocity:{min:0,max:0,curve:[]},initialRotation:{min:0,max:0,syncWithDirection:!1},opacity:{min:1,max:1,curve:[{point:[0,.55],easing:"easeInOutSine"},{point:[.15,1],easing:"easeInOutSine"},{point:[.85,1],easing:"linear"},{point:[1,.55],easing:"easeInOutSine"}]},lifetime:{min:1,max:2},scale:{min:.32,max:.32,curve:[{point:[0,1],easing:"easeInOutSine"},{point:[.22,.6],easing:"easeInOutSine"},{point:[.36,.88],easing:"easeInOutSine"},{point:[.6,.36],easing:"easeInOutSine"},{point:[.71,.63],easing:"easeInOutSine"},{point:[1,0],easing:"easeInOutSine"}]},initialVelocity:{min:.1,max:.1},linearAcceleration:{min:0,max:0,curve:[]},tangentialAcceleration:{min:0,max:0,curve:[{point:[0,1],easing:"linear"},{point:[1,1],easing:"linear"}]},radialAcceleration:{min:0,max:0,curve:[]}},emitter:{position:[0,0],type:"rectangle",radius:20,height:490,width:390}},lE={autoStart:!0,loop:!0,explosiveness:!1,amount:1300,emissionDelay:1734723475976807e-33,particlesPerWave:60,particle:{colors:{gradient:!1,mode:UE.F.Random,colors:["#1E3FC1","#000000"]},damping:.22,gravityVector:[0,0],directionVector:[-20816681711721685e-33,10408340855860843e-33],spread:180,angularVelocity:{min:0,max:0,curve:[]},initialRotation:{min:0,max:0,syncWithDirection:!1},opacity:{min:1,max:1,curve:[{point:[0,.55],easing:"easeInOutSine"},{point:[.15,1],easing:"easeInOutSine"},{point:[.85,1],easing:"linear"},{point:[1,.55],easing:"easeInOutSine"}]},lifetime:{min:1,max:2},scale:{min:.23,max:.46,curve:[{point:[0,1],easing:"easeInOutSine"},{point:[.22,.6],easing:"easeInOutSine"},{point:[.36,.88],easing:"easeInOutSine"},{point:[.6,.36],easing:"easeInOutSine"},{point:[.71,.63],easing:"easeInOutSine"},{point:[1,0],easing:"easeInOutSine"}]},initialVelocity:{min:.1,max:.1},linearAcceleration:{min:0,max:0,curve:[]},tangentialAcceleration:{min:0,max:0,curve:[{point:[0,1],easing:"linear"},{point:[1,1],easing:"linear"}]},radialAcceleration:{min:0,max:0,curve:[]}},emitter:{position:[0,0],type:"rectangle",radius:20,height:490,width:390}},hE=F.p+"images/winningcar.769bbbfe.webp",pE=F.p+"images/winningcar.9d716046.webp",gE=_F.gPd.from(hE),fE=_F.gPd.from(pE);class AE extends _F.mcf{constructor(){super(),this.visible=!1}animate(){var o;this.particleSystem||this.createParticles(),this.visible=!0,null===(o=this.particleSystem)||void 0===o||o.start()}stop(){var o;this.visible=!1,null===(o=this.particleSystem)||void 0===o||o.dispose(),this.particleSystem=void 0}destroy(o){var W;null===(W=this.particleSystem)||void 0===W||W.dispose(),this.particleSystem=void 0,super.destroy(o)}createParticles(){const o=[["PIXI_PARTICLES_TEXTURE1",gE,IE],["PIXI_PARTICLES_TEXTURE2",fE,lE]],W={fps:60,fixedDt:!1,randomSeed:"",blendMode:aE.V.Default,systemSize:{width:window.innerWidth,height:window.innerHeight},controllerConfigs:o.reduce(((W,[F],E)=>(W[F]=o[E][2],W)),{}),graphicsConfig:o.reduce(((o,[W])=>(o[W]={fps:0,randomFrameStart:!1,frames:[],textureId:W},o)),{}),controllerIdToConfigId:o.reduce(((o,[W])=>(o[W]=W,o)),{}),controllers:{}};this.particleSystem=GE.l.spawnSystem({container:this,config:W,systemScale:.305,assets:o.reduce(((o,W)=>(o[W[0]]={type:LE.b.PixiTexture,value:W[1]},o)),{}),autoStart:!1})}}var kE=F(456720);class ZE extends _F.mcf{constructor(o){super(),this.isWinningCard=!1,this.assets=o.assets,this.frameType=o.frameType,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.createBackground(),this.background=_F.kxk.from(_F.gPd.from(this.canvas)),this.background.width=XF.PI-2,this.background.height=XF.sk-2,this.background.position.set(1,1),this.winningCardFrameContainer=new _F.mcf,this.freeCardWinBase=this.createCardWinGradient(this.assets.getTexture(OF.xL.LottoFreeWinBase)),this.multiCardWinBase=this.createCardWinGradient(this.assets.getTexture(OF.xL.LottoChanceWinBase)),this.withGlobalWinBase=this.createCardWinGradient(this.assets.getTexture(OF.xL.LottoWinMultiplierWinBase)),this.withGlobalWinContainer=new _F.mcf,this.withGlobalWinBase.visible=!0,this.withGlobalWinContainer.visible=!1,this.withGlobalWinContainer.addChild(this.withGlobalWinBase),this.winningCardFrameContainer.addChild(this.freeCardWinBase,this.multiCardWinBase,this.withGlobalWinContainer),this.winFrameMask=this.createWinFrameMask(),this.winningCardFrameContainer.addChild(this.winFrameMask),this.disabledFreeBase=this.createBaseTexture(this.assets.getTexture(OF.xL.LottoDisabledFreeBase)),this.disabledMultiBase=this.createBaseTexture(this.assets.getTexture(OF.xL.LottoDisabledMultiBase)),this.freeSpaceBase=this.createBaseTexture(this.assets.getTexture(OF.xL.LottoFreeBase)),this.multiCardBase=this.createBaseTexture(this.assets.getTexture(OF.xL.LottoChanceBase)),this.withGlobalMultiplierBase=this.createBaseTexture(this.assets.getTexture(OF.xL.WithGlobalMultiplierBase)),this.winningParticles=this.createWinningParticles(),this.winningCardFrameContainer.addChild(this.winningParticles),this.addChild(this.background),this.addChild(this.disabledFreeBase,this.disabledMultiBase,this.freeSpaceBase,this.multiCardBase,this.withGlobalMultiplierBase),this.addChild(this.winningCardFrameContainer),this.setVisibleFrame(this.frameType)}setVisibleFrame(o,W){"withGlobal"===o?(this.withGlobalMultiplierBase.visible=!0,this.freeSpaceBase.visible=this.frameType===MF._g.FreeSpace,this.multiCardBase.visible=this.frameType===MF._g.Multi,this.isWinningCard&&(this.withGlobalWinContainer.visible=!0)):(this.freeSpaceBase.visible=o===MF._g.FreeSpace,this.multiCardBase.visible=o===MF._g.Multi,this.disabledFreeBase.visible="disabled"===o&&W===MF._g.FreeSpace,this.disabledMultiBase.visible="disabled"===o&&W===MF._g.Multi),this.frameType=o}setIsWinningCard(o,W){if(this.isWinningCard!==o)if(this.isWinningCard=o,this.freeCardWinBase.visible=o&&this.frameType===MF._g.FreeSpace,this.multiCardWinBase.visible=o&&this.frameType===MF._g.Multi,this.withGlobalWinContainer.visible=o&&"withGlobal"===this.frameType,this.winFrameMask.width=0,this.winFrameMask.height=0,this.winFrameMask.alpha=0,this.winningCardFrameContainer.mask=this.winFrameMask,this.winFrameMask.visible=!0,o){const o=io.M().parallel([Ro.M(this.winFrameMask).animateTo({width:2*XF.PI},kE.V/1e3,so.$g),Ro.M(this.winFrameMask).animateTo({height:2.5*XF.sk},kE.V/1e3,so.$g),Ro.M(this.winFrameMask).animateTo({alpha:1},kE.V/1e3,so.$g)]).callback((()=>{this.winningCardFrameContainer.mask=null,this.winFrameMask.visible=!1,this.winningCardFrameContainer.alpha=.8}));Jo.l({anim:o}),W||o.fastForward(),this.animateParticles()}else this.stopParticles()}destroy(o){this.ctx=null,this.canvas&&vE.Ob(this.canvas),this.canvas=null,super.destroy(o)}createBaseTexture(o){const W=_F.kxk.from(o);return W.height=XF.sk,W.width=XF.PI,W.visible=!1,W}createCardWinGradient(o){const W=_F.kxk.from(o);return W.width=XF.PI,W.height=XF.sk,W.visible=!1,W}createBackground(){if(null===this.ctx||null===this.canvas)return;this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d");const o=this.ctx.createLinearGradient(0,0,XF.PI,XF.sk);this.canvas.width=XF.PI,this.canvas.height=XF.sk,o.addColorStop(0,"#FFFFFF"),o.addColorStop(1,"#FBF6EA"),this.ctx.fillStyle=o,this.ctx.fillRect(0,0,XF.PI,XF.sk)}createWinFrameMask(){const o=_F.kxk.from(this.assets.getTexture(OF.xL.WinLineMask));return o.rotation=-Math.PI/3.5,o.anchor.set(.5,.5),o.x=XF.PI/2,o.y=XF.sk/2,o.visible=!1,o}createWinningParticles(){const o=new AE;return o.position.set(XF.PI/2,XF.sk/2),o}animateParticles(){To.S()||this.winningParticles.animate()}stopParticles(){this.winningParticles.stop()}}const PE={autoStart:!0,loop:!0,explosiveness:!1,amount:100,emissionDelay:.05,particlesPerWave:10,particle:{colors:{gradient:!0,mode:UE.F.OverLife,colors:["#FFEEA4","#FFD900","#FFFFFF"]},damping:.184783,gravityVector:[0,0],directionVector:[-20816681711721685e-33,-.5],spread:180,angularVelocity:{min:0,max:0,curve:[]},initialRotation:{min:0,max:0,syncWithDirection:!1},opacity:{min:1,max:1,curve:[{point:[0,1],easing:"linear"},{point:[1,.55],easing:"linear"}]},lifetime:{min:.76,max:1.2},scale:{min:.39999999999999997,max:.1,curve:[{point:[0,1],easing:"linear"},{point:[.5,1],easing:"linear"},{point:[1,0],easing:"linear"}]},initialVelocity:{min:.3,max:.5},linearAcceleration:{min:300,max:304,curve:[]},tangentialAcceleration:{min:-80,max:80,curve:[]},radialAcceleration:{min:-80,max:80,curve:[]}},emitter:{position:[0,0],type:"rectangle",radius:20,height:10,width:500}},yE={autoStart:!0,loop:!0,explosiveness:!1,amount:300,emissionDelay:.05,particlesPerWave:2174,particle:{colors:{gradient:!0,mode:UE.F.OverLife,colors:["#FFEEA4","#FFFFFF"]},damping:.184783,gravityVector:[0,0],directionVector:[-20816681711721685e-33,-.5],spread:180,angularVelocity:{min:0,max:0,curve:[]},initialRotation:{min:0,max:0,syncWithDirection:!1},opacity:{min:1,max:1,curve:[{point:[0,1],easing:"linear"},{point:[1,.55],easing:"linear"}]},lifetime:{min:.76,max:.9799999999999999},scale:{min:.4,max:.4,curve:[{point:[0,1],easing:"linear"},{point:[.5,1],easing:"linear"},{point:[1,0],easing:"linear"}]},initialVelocity:{min:.3,max:.5},linearAcceleration:{min:300,max:304,curve:[]},tangentialAcceleration:{min:-80,max:80,curve:[]},radialAcceleration:{min:-80,max:80,curve:[]}},emitter:{position:[0,0],type:"rectangle",radius:20,height:10,width:500}};var zE=F(906220),xE=F(130610);const NE=_F.gPd.from(xE),eE=_F.gPd.from(zE);class tE extends _F.mcf{constructor(){super(),this.visible=!1}animate(){var o,W;this.visible=!0,this.particleSystem||this.createParticles(),null===(o=this.particleSystem)||void 0===o||o.reset(),null===(W=this.particleSystem)||void 0===W||W.start()}clear(){var o;this.visible=!1,null===(o=this.particleSystem)||void 0===o||o.dispose(),this.particleSystem=void 0}destroy(o){var W;null===(W=this.particleSystem)||void 0===W||W.dispose(),this.particleSystem=void 0,super.destroy(o)}createParticles(){const o=[["PIXI_PARTICLES_TEXTURE_STAR",NE,PE],["PIXI_PARTICLES_TEXTURE_LIGHT",eE,yE]],W={fps:60,fixedDt:!1,randomSeed:"",blendMode:aE.V.Default,systemSize:{width:window.innerWidth,height:window.innerHeight},controllerConfigs:o.reduce(((W,[F],E)=>(W[F]=o[E][2],W)),{}),graphicsConfig:o.reduce(((o,[W])=>(o[W]={fps:0,randomFrameStart:!1,frames:[],textureId:W},o)),{}),controllerIdToConfigId:o.reduce(((o,[W])=>(o[W]=W,o)),{}),controllers:{}};this.particleSystem=GE.l.spawnSystem({container:this,config:W,systemScale:.25,assets:o.reduce(((o,W)=>(o[W[0]]={type:LE.b.PixiTexture,value:W[1]},o)),{}),autoStart:!1}),this.particleSystem.getControllerOrThrow("PIXI_PARTICLES_TEXTURE_STAR").graphics.tint=!0,this.particleSystem.getControllerOrThrow("PIXI_PARTICLES_TEXTURE_LIGHT").graphics.tint=!0}}class mE extends _F.mcf{constructor(){super(),this.globalMask=(new _F.A1g).beginFill().drawRect(0,0,XF.PI,XF.sk).endFill(),this.globalMask.visible=!1,this.particleContainer=new _F.mcf,this.particleContainer.x=XF.PI/2,this.particleContainer.y=0,this.addChild(this.globalMask,this.particleContainer),this.reset()}animateParticles(){this.particles||(this.particles=new tE,this.particleContainer.addChild(this.particles)),this.particles.animate()}stopParticles(){var o;null===(o=this.particles)||void 0===o||o.clear()}reset(){var o;this.y=XF.sk,this.particleContainer.alpha=0,null===(o=this.particles)||void 0===o||o.destroy(),this.particles=void 0,this.globalMask.visible=!1}get endPosition(){return{x:0,y:0}}destroy(o){var W;super.destroy(o),null===(W=this.particles)||void 0===W||W.destroy(),this.particles=void 0}}var rE=F(796269),BE=F(84184),jE=F(335914);const VE={autoStart:!0,loop:!1,explosiveness:!0,amount:80,emissionDelay:0,particlesPerWave:80,particle:{colors:{gradient:!1,mode:UE.F.OverLife,colors:["#e9bd00"]},damping:.015,gravityVector:[0,2e3],directionVector:[-20816681711721685e-33,20816681711721685e-33],spread:180,angularVelocity:{min:0,max:0,curve:[]},initialRotation:{min:0,max:0,syncWithDirection:!1},opacity:{min:1,max:1,curve:[{point:[0,1],easing:"linear"},{point:[1,.8152173913043478],easing:"linear"}]},lifetime:{min:.54,max:.42999999999999994},scale:{min:.3,max:3,curve:[{point:[0,0],easing:"linear"},{point:[.48,1],easing:"linear"},{point:[1,0],easing:"linear"}]},initialVelocity:{min:50,max:2500.06},linearAcceleration:{min:-300,max:100,curve:[{point:[0,2],easing:"linear"},{point:[1,1],easing:"linear"}]},tangentialAcceleration:{min:0,max:0,curve:[]},radialAcceleration:{min:100,max:100,curve:[]}},emitter:{position:[0,0],type:"point"}},wE="PIXI_PARTICLES",KE="PIXI_PARTICLES_TEXTURE_ID",TE=new Image;TE.crossOrigin="anonymous",TE.src=xE;class dE extends _F.mcf{constructor(){super(),this.visible=!1}animate(){var o;this.particleSystem||this.createParticles(),this.visible=!0,null===(o=this.particleSystem)||void 0===o||o.start()}clear(){var o;null===(o=this.particleSystem)||void 0===o||o.dispose(),this.particleSystem=void 0,this.visible=!1}destroy(o){var W;null===(W=this.particleSystem)||void 0===W||W.dispose(),this.particleSystem=void 0,super.destroy(o)}createParticles(){const o={fps:60,fixedDt:!1,randomSeed:"",blendMode:aE.V.Default,systemSize:{width:window.innerWidth,height:window.innerHeight},controllerConfigs:{[wE]:VE},graphicsConfig:{[wE]:{fps:0,randomFrameStart:!1,frames:[],textureId:"PIXI_PARTICLES_TEXTURE_ID"}},controllerIdToConfigId:{[wE]:wE},controllers:{}};this.particleSystem=GE.l.spawnSystem({container:this,config:o,systemScale:.0375,assets:{[KE]:{type:LE.b.Texture,value:TE}},autoStart:!1});const W=this.particleSystem.getControllerOrThrow("PIXI_PARTICLES");W.graphics.tint=!0,W.eventEmitter.on(jE.Od.OnFinished,(()=>{this.clear()}))}}class nE extends _F.mcf{constructor({isPortrait:o,parentWidth:W}){super(),this.multiplier=0,this.interactiveChildren=!1,this.visible=!1,this.isPortrait=o,this.parentWidth=W,this.multiplierTexture=this.createMultiplierTexture(),this.particles=new dE,this.addChild(this.particles,this.multiplierTexture)}updateMultiplier(o){this.multiplier=o,o>1?(this.multiplierTexture.text=`${o}x`,this.x=this.parentWidth-this.width/2+3.8,this.y=4.3,this.scale.set(this.isPortrait?1.3:1.4),this.show()):this.visible=!1}animateParticles(){this.particles.animate()}reset(){this.particles.clear()}show(){this.multiplier>1&&(this.visible=!0,this.multiplierTexture.alpha=1)}createMultiplierTexture(){const o=WE.nE(0,"standard");return o.text="",o.anchor.set(.5,.5),o}}class uE extends _F.mcf{constructor({cardWidth:o,cardHeight:W}){super(),this.name="BonusCardMultiplierAnimatable",this.cardWidth=o,this.cardHeight=W,this.cardMask=this.createCardMask(),this.goldBorderMask=this.createGoldBorderMask(),this.canvas=document.createElement("canvas"),this.goldFoil=this.createGoldFoil(this.canvas),this.particles=new tE,this.particleContainer=this.createParticleContainer(),this.particleContainer.addChild(this.particles),this.addChild(this.cardMask,this.goldBorderMask,this.goldFoil,this.particleContainer),this.visible=!1}animateParticles(){var o;this.particleContainer.mask=this.cardMask,this.particleContainer.alpha=1,null===(o=this.particles)||void 0===o||o.animate()}startAnimation(){this.visible=!0,this.goldFoil.mask=this.cardMask}reset(){this.visible=!1,this.goldFoil.position.set(this.goldFoilStartPosition.x,this.goldFoilStartPosition.y),this.particleContainer.position.set(this.goldBorderMaskStartPosition.x,this.goldBorderMaskStartPosition.y),this.goldBorderMask.position.set(this.goldBorderMaskStartPosition.x,this.goldBorderMaskStartPosition.y),this.goldFoil.mask=null,this.particleContainer.mask=null,this.resetParticles()}resetParticles(){var o;void 0!==this.particles&&(this.particleContainer.alpha=0,null===(o=this.particles)||void 0===o||o.clear())}destroy(o){var W;this.canvas&&vE.Ob(this.canvas),this.canvas=null,null===(W=this.particles)||void 0===W||W.destroy(),this.particles=void 0,super.destroy(o)}get goldFoilStartPosition(){return{x:this.cardWidth,y:0}}get goldFoilEndPosition(){return{x:-.75*this.goldFoil.width,y:1.5*this.goldFoil.width}}get goldBorderMaskStartPosition(){return{x:this.cardWidth,y:0}}get goldBorderMaskEndPosition(){return{x:0,y:this.cardHeight}}createGoldFoilGradient(o){const W=o.getContext("2d");if(!W)return null;o.width=this.cardWidth,o.height=1;const F=W.createLinearGradient(0,0,this.cardWidth,0);return F.addColorStop(0,"rgba(224, 123, 0, 0)"),F.addColorStop(.17,"rgba(255, 227, 118, 1)"),F.addColorStop(.34,"rgba(128, 67, 0, 0.5)"),F.addColorStop(.5,"rgba(224, 123, 0, 0.5)"),F.addColorStop(.66,"rgba(255, 227, 118, 1)"),F.addColorStop(.82,"rgba(224, 123, 0, 0.5)"),F.addColorStop(1,"rgba(128, 67, 0, 0)"),W.fillStyle=F,W.fillRect(0,0,this.cardWidth,1),W}createGoldFoil(o){this.createGoldFoilGradient(o);const W=_F.kxk.from(_F.gPd.from(o));return W.width=1.2*this.cardWidth,W.height=3*this.cardHeight,W.anchor.set(1,.5),W.position.set(this.goldFoilStartPosition.x,this.goldFoilStartPosition.y),W.rotation=3*Math.PI/4,W.alpha=.7,W.mask=this.cardMask,W}createGoldBorderMask(){const o=_F.kxk.from(_F.gPd.WHITE);return o.width=1.5*this.cardWidth,o.height=1.5*this.cardWidth,o.anchor.set(.5,1),o.rotation=Math.PI/4,o.position.set(this.goldBorderMaskStartPosition.x,this.goldBorderMaskStartPosition.y),o}createCardMask(){return(new _F.A1g).beginFill().drawRect(0,0,this.cardWidth,this.cardHeight).endFill().beginHole().arc(this.cardWidth,this.cardHeight/2,8,Math.PI/2,1.5*Math.PI).endHole()}createParticleContainer(){const o=new _F.mcf;return o.mask=this.cardMask,o.rotation=Math.PI/4,o.position.set(this.goldBorderMaskStartPosition.x,this.goldBorderMaskStartPosition.y),o}}var $E=F(774680),YE=F(17775);const QE={[rE.$i.CoinFlip]:3,[rE.$i.CashHunt]:4,[rE.$i.Pachinko]:4,[rE.$i.CrazyTime]:5};class CE extends _F.mcf{constructor(o){super(),this.isInactive=!1,this.freeSpaces=[],this.cells=new Map,this.rendered=!1,this.assets=o.assets,this.cardIdentifier=o.cardIdentifier,this.isPortrait=o.isPortrait,this.soundStore=o.soundStore,this.visible=!1,this.interactiveChildren=!1}resetGrid(){this.isInactive=!1,this.resetCells(),this.children&&this.removeChild(...this.children.filter((o=>"multiplierContainer"===o.name)))}showBonusGoldenDab(o){for(const W of this.getAllCells())W.showBonusGoldenDab(o)}showAllDabsOnBonusCard(){for(const o of this.getAllCells())o.showDab({withAnimation:!1})}getGridNumbers(){return[...this.getAllCells()].map((o=>o.number))}hasTicketWon(){const o=[...this.getAllCells()].filter((o=>o.dab.visible));return QE[this.cardIdentifier]===o.length}updateGridNumbers(o,W){this.resetGrid(),this.renderGrid(o,W)}showInactiveGrid(){this.isInactive=!0;for(const o of this.getAllCells())o.cellNumber.alpha=0,o.showInactive()}toggleDrawnDabs({drawnBalls:o,isRestore:W,slotMultiplier:F}){const E=!W&&!To.S();for(const W of this.getAllCells())o.includes(W.number)&&!W.dab.visible&&W.showDab({withAnimation:E,slotMultiplier:F})}animateFreeSpaces(o,W){this.freeSpaces.sort((()=>Math.random()-.5));const F=W?YE.PZ.BuildFreeSpaceObserver:YE.PZ.BuildFreeSpace,E=this.soundStore.getEcasCardId(this.cardIdentifier),v=()=>this.soundStore.triggerEvent(F,E);for(const[W,F]of this.freeSpaces.entries()){const E=this.getCell(F);null==E||E.drawFreeSpace(o,.16*W,v)}}setFreeSpaces(o){this.freeSpaces=o}getCell(o){return this.cells.get(o)}transformFreeToDab(o){for(const W of this.freeSpaces){const F=this.getCell(W);null==F||F.showDab({withAnimation:!o&&!To.S()})}}renderGrid(o,W=!1){this.rendered?this.updateBonusGrid(o,this.cardIdentifier,W):(this.rendered=!0,this.renderBonusGrid(o,this.cardIdentifier,W))}updateBonusGrid(o,W,F){var E;for(let v=0;v<QE[W];v++){const a=this.cells.get(v),G=null!==(E=o[v])&&void 0!==E?E:void 0;a&&(void 0!==G&&a.setNumber(G),a.position.x=14*v*1.1+v,a.freeSpace.hide(),a.dab.visible=!1,a.cellNumber.alpha=F?0:1,this.isPortrait?a.position.set(15.2*v+DF.bu[W],3):a.position.set(22.2*v+DF.zQ[W],.8))}}renderBonusGrid(o,W,F){var E;for(let v=0;v<QE[W];v++){const a=`${v}-0`,G=new $E.f({index:a,number:null!==(E=o[v])&&void 0!==E?E:void 0,assets:this.assets,isBonus:!0,cellColor:DF.HD[W],isPortrait:this.isPortrait,cardIdentifier:this.cardIdentifier,soundStore:this.soundStore});G.position.x=14*v*1.1+v,G.cellNumber.alpha=F?0:1,this.cells.set(v,G),this.addChild(G),this.isPortrait?G.position.set(15.2*v+DF.bu[W],3):G.position.set(22.2*v+DF.zQ[W],.8)}}getAllCells(){return this.cells.values()}resetCells(){for(const o of this.getAllCells())o.reset()}}function qE(o,W=!0){const F=[...o].reverse();return W&&F.pop(),o.concat(F)}var cE=F(607439);function _E(){const o=vE.mZ(),W=h.DS.IS_PHONE?1.6:h.DS.IS_TABLET?1.4:1.5;return cE.A(o,1,W)}function OE(o=!1){const W=new _F.ZYG;return W.alpha=o?.5:.6,W.resolution=_E(),W}var XE=F(900498);const SE={coinFlip:-200,cashHunt:-120,pachinko:-43,crazyTime:36.6},sE={desktop:.895,tablet:.895,mobilePortrait:.9};function iE(o,W){return W*sE[o]}class RE extends _F.mcf{constructor(o){var W,F;super(),this.baseContainerGoldenBorders=[],this.isBetsOpen=!1,this.disabledFilter=OE(!0),this.graphics=new _F.A1g,this.animationContainer=new _F.mcf,this.glitterAnimation=null,this.shimmerAnimation=null,this.explosionAnimation=null,this.nearWinAnimation=null,this.isCrazyTimeCard=!1,this.positionAnimationCancellation=()=>{},this.bonusId=o.bonusId,this.disabledAlpha=null!==(W=o.disabledAlpha)&&void 0!==W?W:.5,this.assets=o.assets,this.layoutMode=o.layoutMode,this.soundStore=o.soundStore,this.setChipPlaceholder=o.setChipPlaceholder,this.isCrazyTimeCard=this.bonusId===rE.$i.CrazyTime,this.bonusGameCard=o.bonusGameCard,this.ballPlaceholders=function(o,W,F){const E={coinFlip:o.getTexture(OF.xL.CoinFlipCardBalls),cashHunt:o.getTexture(OF.xL.CashHuntCardBalls),pachinko:o.getTexture(OF.xL.PachinkoCardBalls),crazyTime:o.getTexture(OF.xL.CrazyTimeCardBalls)},v=_F.kxk.from(E[F]);return"mobilePortrait"===W?(v.width=82.8,v.x=.5,v.y=2.5,v.height=21.1):(v.width=F===rE.$i.CrazyTime?114:105,v.x=F===rE.$i.CrazyTime?5:10,v.y=.5,v.height=24.5),v}(this.assets,this.layoutMode,this.bonusId);const E="mobilePortrait"===this.layoutMode;this.cardSize=E?{width:XF.mo,height:XF.Xw}:{width:XF.tn,height:XF.I1};const v="mobilePortrait"===this.layoutMode?new _F.M_G(53,40,31,31):new _F.M_G(90,40,32,32),a=SF("mobilePortrait"===this.layoutMode,!0);this.betSpot=new JF({onChipAdded:()=>this.renderGrid(),updateBetsCallback:o.updateBetsCallback,betSpotIndex:o.bonusId,layoutMode:this.layoutMode,chipRectangle:v,clickArea:a,betSpotContainerOffset:{x:1.3,y:2.5},chipOffset:{x:1,y:2.5}}),this.bonusLogo=this.createLogoSprite(),this.borderSpriteUpper=this.createBorderSprite(!0),this.borderSpriteLower=this.createBorderSprite(!1),this.upperContainer=this.createUpperContainer(this.borderSpriteUpper),this.lowerContainer=this.createLowerContainer(this.borderSpriteLower),this.multiplierAnimatable=new uE({cardHeight:this.cardSize.height,cardWidth:this.cardSize.width}),this.upperContainer.addChild(this.multiplierAnimatable),this.grid=new CE({assets:this.assets,cardIdentifier:o.bonusId,isPortrait:E,soundStore:this.soundStore}),this.grid.zIndex=1;const G=this.getBonusCardBettingPosition();this.position.x=G.x,this.position.y=G.y,this.upperContainer.on("pointerdown",(()=>{o.updateBetsCallback(this.bonusId)})),this.lowerBoundContainer=this.createLowerMask(),this.upperBoundContainer=this.createUpperMask();const L=this.upperBoundContainer.getBounds(),U=this.lowerBoundContainer.getBounds();this.lowerContainer.pivot.set(.5*U.width,.5*U.height),this.lowerContainer.position.set(.5*U.width,.5*U.height),this.rays=new _F.mcf,this.rays.visible=!1,this.rays.position.set(.5*L.width,L.height),this.lowerBoundContainer.renderable=!1,this.upperBoundContainer.renderable=!1,this.lowerBoundContainer.position.y=iE(this.layoutMode,30),this.addChild(this.upperBoundContainer,this.lowerBoundContainer,this.rays,this.lowerContainer,this.upperContainer),this.isCrazyTimeCard&&!this.bonusGameCard&&(this.glitterAnimation=this.createGlitterAnimation(),this.addChild(this.glitterAnimation)),this.addChild(this.animationContainer),this.bonusGameCard||this.addChild(this.bonusLogo,this.betSpot),this.bonusGameCard||this.addChild(this.ballPlaceholders),this.bonusGameCard?this.upperContainer.addChild(this.grid):this.addChild(this.grid),this.updateChipPlaceholderPosition(),this.upperContainer.interactiveChildren=!1,this.bonusMultiplier=new nE({isPortrait:E,parentWidth:this.upperContainer.width}),this.addChild(this.bonusMultiplier),this.resetUpperContainer(),this.addChild(this.graphics),this.addChild(a),To.S()||null===(F=this.glitterAnimation)||void 0===F||F.play()}playNearWinAnimation(o=0){this.nearWinAnimation||(this.nearWinAnimation=this.createNearWinAnimation()),this.nearWinAnimation.playing||(this.nearWinAnimation.visible=!0,this.nearWinAnimation.tint=o>0?16770618:16777215,To.S()||this.nearWinAnimation.play())}stopNearWinAnimation(){this.nearWinAnimation&&(this.nearWinAnimation.stop(),this.nearWinAnimation.visible=!1,this.nearWinAnimation.tint=16777215)}playExplosionAnimation(){var o;this.explosionAnimation||(this.explosionAnimation=this.createExplosionAnimation()),this.explosionAnimation.playing||(null===(o=this.shimmerAnimation)||void 0===o?void 0:o.playing)||(this.stopNearWinAnimation(),this.explosionAnimation.visible=!0,To.S()||this.explosionAnimation.gotoAndPlay(0))}stopExplosionAnimation(){this.explosionAnimation&&(this.explosionAnimation.stop(),this.explosionAnimation.visible=!1)}playShimmerAnimation(){if(this.shimmerAnimation||(this.shimmerAnimation=this.createShimmerAnimation()),this.shimmerAnimation.playing)return;this.shimmerAnimation.alpha=0,this.shimmerAnimation.visible=!0;const o=this.createShimmerFadeIn(this.shimmerAnimation);Jo.l({anim:o}),To.S()||this.shimmerAnimation.play()}stopShimmerAnimation(){this.shimmerAnimation&&(this.shimmerAnimation.stop(),this.shimmerAnimation.visible=!1)}handleWinAnimations(o,W,F){this.bonusGameCard||(0===o?F?this.playShimmerAnimation():this.playExplosionAnimation():1===o&&this.playNearWinAnimation(W))}updateSlotMultiplier(o=0,W=!1){this.bonusMultiplier.updateMultiplier(o),o<=1?this.hideGoldBorders():(this.showGoldBorders(),W&&(this.grid.showBonusGoldenDab(this.grid.isInactive),this.bonusMultiplier.show()))}updateBonusNumbers(o,W){this.grid.updateGridNumbers(o,W),this.bonusMultiplier.multiplier>1&&this.grid.showBonusGoldenDab(W)}updateGridNumbersForBonusGame(o,W){this.grid.updateGridNumbers(o,W)}showAllDabsOnBonusCard(){this.grid.showAllDabsOnBonusCard()}showInactiveGrid(){this.disabledFilter.alpha=this.disabledAlpha,this.grid.visible=!0,this.grid.showInactiveGrid(),this.filters=[this.disabledFilter]}animateRePosition(o,W,F,E){const v="mobilePortrait"===this.layoutMode,a=v?40:50,G=this.getBonusCardBettingPosition(),{position:L,scale:U}=E?function(o,W,F){if(o)return{position:{x:255-(0===W?125:2===W?60:1===W?30:0),y:{0:SE.coinFlip,1:SE.cashHunt,2:SE.pachinko,3:SE.crazyTime}[F]+40},scale:1};const E=[0,160,229,284,380][W],v=0===W?230:XF.PI+Fv+E;return{position:{0:{x:v,y:50},1:{x:v+XF.tn+Fv,y:50},2:{x:v,y:128.175},3:{x:v+XF.tn+Fv,y:128.175}}[F],scale:1}}(v,W,F):{position:{x:G.x,y:G.y+a},scale:1};if(o)return this.position=L,this.scale={x:U,y:U},void this.updateChipPlaceholderPosition();const I=io.M();I.delay(v?.55:0).parallel([Ro.M(this.scale).animateTo({x:U,y:U},1,so.lu).callback((()=>{this.updateChipPlaceholderPosition()})),Ro.M(this.position).animateTo(L,1,so.lu).callback((()=>{this.updateChipPlaceholderPosition()}))]);const l=Jo.l({anim:I});this.positionAnimationCancellation=()=>{I.fastForward(),l()}}animateCardTransition(o,W,F){const E=this.getBonusCardBettingPosition();if(o)return this.position=E,void this.updateChipPlaceholderPosition();W&&("mobilePortrait"===this.layoutMode?(this.position.x=-F.width+E.x,this.position.y=E.y):this.position.y=F.height+E.y);const v=io.M();v.parallel([Ro.M(this.position).animateTo(E,.75,so.ED).callback((()=>{this.updateChipPlaceholderPosition()}))]),Jo.l({anim:v})}resetCard(o){this.alpha=1,this.grid.resetGrid(),this.rays.visible=!1,this.grid.visible=!1,this.updateSlotMultiplier(void 0),this.betSpot.resetBetSpot(),this.bonusMultiplier.reset(),this.multiplierAnimatable.reset(),this.filters=null,this.resetPosition(o),this.resetUpperContainer(),this.stopNearWinAnimation(),this.stopExplosionAnimation(),this.stopShimmerAnimation()}showGoldBorders(){this.baseContainerGoldenBorders.forEach((o=>{o.visible=!0})),this.isCrazyTimeCard&&this.glitterAnimation&&(this.glitterAnimation.stop(),this.glitterAnimation.visible=!1)}hideGoldBorders(){this.baseContainerGoldenBorders.forEach((o=>{o.visible=!1})),this.isCrazyTimeCard&&this.glitterAnimation&&(To.S()||this.glitterAnimation.play(),this.glitterAnimation.visible=!0)}startAnimationWithMasks(){this.multiplierAnimatable.goldBorderMask.visible=!0,this.borderSpriteLower.mask=this.multiplierAnimatable.goldBorderMask,this.borderSpriteUpper.mask=this.multiplierAnimatable.goldBorderMask}stopAnimationWithMasks(){this.multiplierAnimatable.goldBorderMask.visible=!1,this.borderSpriteLower.mask=null,this.borderSpriteUpper.mask=null}isCardEnabled(){return 1===this.alpha}getBonusCardBettingPosition(){const o=this.bonusId;return"mobilePortrait"===this.layoutMode?{x:255,y:SE[o]}:{x:{coinFlip:0,cashHunt:1,pachinko:0,crazyTime:1}[o]*(XF.tn+4)+507,y:{coinFlip:0,cashHunt:0,pachinko:1,crazyTime:1}[o]*(XF.I1+4)}}updateChipPlaceholderPosition(){this.betSpot.updateChipPlaceholderPosition(this.setChipPlaceholder)}setIsBetsOpen(o){this.isBetsOpen=o}updateBetSpotValue(o,W){this.betSpot.setBetValue(o,W)}toggleDrawnDabs(o,W,F){this.grid.toggleDrawnDabs({drawnBalls:o,isRestore:W,slotMultiplier:F}),o.length===BE.x&&!this.grid.hasTicketWon()&&this.betSpot.hideChip(W)}showFreeSpaces(o){this.grid.setFreeSpaces(o)}resetPosition(o){this.positionAnimationCancellation();const W=this.getBonusCardBettingPosition(),F={x:W.x,y:W.y+DE};if(o){const o=io.M();o.parallel([Ro.M(this.scale).animateTo({x:1,y:1},.5,so.am).callback((()=>{this.updateChipPlaceholderPosition()})),Ro.M(this.position).animateTo(F,.5,so.am).callback((()=>{this.updateChipPlaceholderPosition()})),Ro.M(this.disabledFilter).animateTo({alpha:1},.5,so.am).callback((()=>{this.filters=null}))]),Jo.l({anim:o})}else this.scale.set(1),this.position=F,this.updateChipPlaceholderPosition()}async animateSymbolReveal(o=!1,W=!0,F=!1){await XE.u({timeInMilliseconds:DF.rG,immediate:o}),this.grid.animateFreeSpaces(!o,F),W&&(await XE.u({timeInMilliseconds:DF.$G,immediate:o}),this.grid.transformFreeToDab(o))}animateFreeSpaces(o,W){this.grid.animateFreeSpaces(o,W)}showGrid(){this.grid.visible=!0}hideGridNumbers(){this.grid.showInactiveGrid()}transformFreeToDab(o){this.grid.transformFreeToDab(o)}getCardTopBounds(o=!1){const W=this.upperBoundContainer[o?"getLocalBounds":"getBounds"]();return{width:W.width,height:W.height}}getCardBottomBounds(o=!1){const W=this.lowerBoundContainer[o?"getLocalBounds":"getBounds"]();return{width:W.width,height:W.height}}getCardBounds(o=!1){return{width:this.getCardTopBounds(o).width,height:this.getCardTopBounds(o).height+this.getCardBottomBounds(o).height}}attachRays(o){this.rays.visible=!0,this.rays.addChild(o);const W=1.5*this.getCardBounds(!0).width/o.sprite.texture.width;this.rays.scale.set(W),o.pivot.set(.5*o.width,.5*o.height)}createNearWinAnimation(){const o=qE(this.assets.getAnimation(OF.ck.NearWinStars)),W=new _F.Dl5(o);return W.animationSpeed=.2,W.loop=!0,W.width=this.cardSize.width,W.height=this.cardSize.height,W.visible=!1,this.animationContainer.addChild(W),W}createShimmerAnimation(){const o=qE(this.assets.getAnimation(OF.ck.Shimmer)),W=new _F.Dl5(o);return W.animationSpeed=.2,W.loop=!0,W.width=this.cardSize.width,W.height=this.cardSize.height,W.visible=!1,this.animationContainer.addChild(W),W}createShimmerFadeIn(o){const W=Ro.M(o).animateTo({alpha:1},.3);return io.M().sequence(W)}createExplosionAnimation(){const o=new _F.Dl5(this.assets.getAnimation(OF.ck.Explosion));return o.animationSpeed=.5,o.loop=!1,o.width=this.cardSize.width,o.height=this.cardSize.height,o.visible=!1,o.onFrameChange=o=>{14===o&&this.playShimmerAnimation()},o.onComplete=()=>{this.stopExplosionAnimation()},this.animationContainer.addChild(o),o}createGlitterAnimation(){const o=new _F.Dl5(this.assets.getAnimation(OF.ck.Glitter));return o.animationSpeed=.1,o.loop=!0,o.width=this.cardSize.width,o.height=this.cardSize.height,o}createUpperMask(){const o=(new _F.A1g).beginFill().drawRect(0,0,this.cardSize.width,iE(this.layoutMode,30)).endFill();return o.zIndex=1,o}createUpperContainer(o){const W=new _F.mcf,F=this.createBaseSprite(!0);if(W.eventMode="static",W.cursor="pointer",W.pivot.set(0,30),W.addChild(F),this.bonusGameCard){if(this.isCrazyTimeCard){const o=_F.kxk.from(this.assets.getAnimation(OF.ck.Glitter)[0]);o.width=this.cardSize.width,o.height=this.cardSize.height;const F=this.getPartsHeights(),E=this.createUpperMask();E.height=F.topHeight,o.mask=E,W.addChild(o,E)}W.addChild(o,this.ballPlaceholders)}else W.addChild(o);return W}resetUpperContainer(){this.upperContainer.position.set(0,30),this.upperContainer.scale.set(1,1),this.upperContainer.angle=0,this.upperContainer.alpha=1}createLowerMask(){const o=(new _F.A1g).beginFill(16777215).drawRect(0,0,this.cardSize.width,this.cardSize.height-iE(this.layoutMode,30)).endFill();return o.zIndex=1,o}createLowerContainer(o){const W=new _F.mcf,F=this.createBaseSprite(!1);if(W.name="LowerContainer",W.addChild(F),this.isCrazyTimeCard&&this.bonusGameCard){const o=_F.kxk.from(this.assets.getAnimation(OF.ck.Glitter)[0]);o.width=this.cardSize.width,o.height=this.cardSize.height;const E=this.getPartsHeights(),v=this.createLowerMask();v.height=F.height,v.y=E.topHeight,o.mask=v,W.addChild(o,v)}return this.bonusGameCard&&(this.betSpot.zIndex=2,W.addChild(this.bonusLogo,this.betSpot)),W.addChild(o),W}getPartsHeights(){const o="mobilePortrait"===this.layoutMode,W=o?XF.Xw/148:XF.I1/174;return{offsetToAvoidGapBetweenParts:.4,topHeight:W*(o?52:60),bottomHeight:W*(o?96:114)}}createBaseSprite(o){const W="mobilePortrait"===this.layoutMode,F=o?{coinFlip:this.assets.getTexture(OF.xL.CoinFlipCardTop),cashHunt:this.assets.getTexture(OF.xL.CashHuntCardTop),pachinko:this.assets.getTexture(OF.xL.PachinkoCardTop),crazyTime:this.assets.getTexture(OF.xL.CrazyTimeCardTop)}:{coinFlip:this.assets.getTexture(OF.xL.CoinFlipCardBottom),cashHunt:this.assets.getTexture(OF.xL.CashHuntCardBottom),pachinko:this.assets.getTexture(OF.xL.PachinkoCardBottom),crazyTime:this.assets.getTexture(OF.xL.CrazyTimeCardBottom)},E=_F.kxk.from(F[this.bonusId]),{topHeight:v,bottomHeight:a,offsetToAvoidGapBetweenParts:G}=this.getPartsHeights();return E.height=o?v+G:a,E.width=W?XF.mo:XF.tn,o||E.position.set(0,v),E.zIndex=0,E}createBorderSprite(o){const W="mobilePortrait"===this.layoutMode,F=o?OF.xL.BonusBorderTop:OF.xL.BonusBorderBottom,E=this.assets.getTexture(F),v=_F.kxk.from(E),{topHeight:a,bottomHeight:G,offsetToAvoidGapBetweenParts:L}=this.getPartsHeights();return v.height=o?a+L:G,o||v.position.set(0,a),v.width=W?XF.mo:XF.tn,v.visible=!1,this.baseContainerGoldenBorders.push(v),v.zIndex=1,v}createLogoSprite(){const o="mobilePortrait"===this.layoutMode,W={coinFlip:this.assets.getTexture(OF.xL.CoinFlipLogo),cashHunt:this.assets.getTexture(OF.xL.CashHuntLogo),pachinko:this.assets.getTexture(OF.xL.PachinkoLogo),crazyTime:this.assets.getTexture(OF.xL.CrazyTimeLogo)},F=o?{coinFlip:{scale:.33,x:19,y:28},cashHunt:{scale:.33,x:18,y:31},pachinko:{scale:.34,x:10,y:35},crazyTime:{scale:.34,x:14,y:30}}:{coinFlip:{scale:.35,x:5,y:36},cashHunt:{scale:.315,x:10,y:42},pachinko:{scale:.32,x:19,y:29},crazyTime:{scale:.31,x:14,y:33}},E=_F.kxk.from(W[this.bonusId]),v=F[this.bonusId];return E.scale.set(v.scale,v.scale),E.y=v.y,E.x=v.x,E.zIndex=1,E}renderGrid(){this.grid.visible=this.betSpot.betValue>0||!this.isBetsOpen}}var JE=F(276073);const DE=50;class ME extends _F.mcf{constructor(o){super(),this.props=o,this.isRestore=!0,this.areCardsRendered=!1,this.isBonusGameInProgress=!1,this.name="LottoCardsContainer",this.lottoCards=this.generateLottoCards(),this.bonusCards=this.generateBonusCards(),this.addChild(...Object.values(this.bonusCards),...Object.values(this.lottoCards).reverse()),this.pivot={x:this.getLottoContainerRect().width/2,y:0},this.sortChildren(),o.setBonusCardsReferences(this.bonusCards),o.setLottoCardsReference(this.lottoCards)}getLottoCards(){return Object.values(this.lottoCards).map((o=>[o,o.cardIndex]))}getBonusCards(){return Object.values(this.bonusCards).map((o=>[o,o.bonusId]))}updateSlotMultipliers(o){this.getBonusCards().forEach((([W])=>{W.updateSlotMultiplier(o[W.bonusId])}))}showAllBonusDabs(){this.getBonusCards().forEach((([o])=>{o.showAllDabsOnBonusCard()}))}updateChipPlaceholderPositions(){this.getLottoCards().forEach((([o])=>{o.updateChipPlaceholderPosition()})),this.getBonusCards().forEach((([o])=>{o.updateChipPlaceholderPosition()}))}setCardModes(o,W){this.getLottoCards().forEach((([F,E])=>{F.setCardMode(o[E],!1,W)}))}startLightRayAnimation(){this.getLottoCards().forEach((([o])=>{o.animateLightRays()}))}animateWonMultipliers(){this.getLottoCards().forEach((([o])=>{o.animateWonMultiplier()}))}updateLottoCardNumbers(o){this.getLottoCards().forEach((([W,F])=>{W.updateGridNumbers(o[F])}))}updateBonusCardNumbers(o,W){this.getBonusCards().forEach((([F])=>{const E=W.includes(F.bonusId);F.updateBonusNumbers(o[F.bonusId],E)}))}showAllElements(o){this.areCardsRendered=!0,this.children.forEach((W=>{W.visible=o}))}showOnlyOneBonusCard(o){void 0!==o&&(this.bonusCards[o].visible=!1,this.isBonusGameInProgress=!0)}hideInactiveLottoCard(o,W){return this.lottoCards[o].hideInactiveCard(W)}showInactiveBonusGrid(o){this.bonusCards[o].showInactiveGrid()}showInactiveLottoGrid(o,W){this.lottoCards[o].showInactiveGrid(W)}updateCardsPositions(o){var W,F;const E=null!==(W=o.canvasDimensions)&&void 0!==W?W:{height:0,width:0},v=null!==(F=o.inactiveCardIndexes)&&void 0!==F?F:[],a=v.length===Wv?this.getLottoCards():this.getLottoCards().filter((([o])=>!v.includes(o.cardIndex)));if(o.isTransition)return this.getLottoCards().forEach((([W])=>{var F;W.animateCardTransition(o.isRestore,null!==(F=o.isReturningFromBonus)&&void 0!==F&&F,E)})),void this.getBonusCards().forEach((([W])=>{var F;W.animateCardTransition(o.isRestore,null!==(F=o.isReturningFromBonus)&&void 0!==F&&F,E)}));a.forEach((([W],F)=>{var E;W.animateRePosition(o.isRestore,a.length,F,null!==(E=o.shouldScale)&&void 0!==E&&E)})),this.getBonusCards().forEach((([W],F)=>{var E;W.animateRePosition(o.isRestore,Wv-v.length,F,null!==(E=o.shouldScale)&&void 0!==E&&E)})),this.sortChildren()}setIsBetsOpen(o){Object.values(this.lottoCards).forEach((W=>W.setIsBetsOpen(o))),Object.values(this.bonusCards).forEach((W=>W.setIsBetsOpen(o)))}updateBetSpot(o,W,F){rE.Wn.forEach((E=>{const v=o[E];rE.cV(E)?this.bonusCards[E].updateBetSpotValue(v,F):this.lottoCards[E].updateBetSpotValue(v,W)}))}setMultipliers(o,W){this.getLottoCards().forEach((([F])=>{F.setMultipliers(o[F.cardIndex],W[F.cardIndex])}))}showGlobalMultipliers(o){this.getLottoCards().forEach((([W,F])=>{W.applyGlobalMultiplier(o[F])}))}showWinLines(o,W,F,E){this.getLottoCards().forEach((([v,a])=>{W.includes(v.cardIndex)||v.showWinLines(o[a],this.isRestore,F,E)}))}setFreeSpaces(o,W){this.getLottoCards().forEach((([W])=>{W.setFreeSpaces(o[W.cardIndex])})),this.getBonusCards().forEach((([o])=>{o.showFreeSpaces(W[o.bonusId])}))}setIsToggleActiveForAllCards(o){this.setIsToggleActive(rE.Wq.reduce(((W,F)=>(W[F]=o,W)),{}))}setIsToggleActive(o){this.getLottoCards().forEach((([W])=>{W.setIsToggleActive(o[W.cardIndex])}))}showDrawnBalls(o,W,F,E,v,a){this.getLottoCards().forEach((([W])=>{F.includes(W.cardIndex)||W.toggleDrawnDabs(o,this.isRestore,v,a)})),this.getBonusCards().forEach((([F])=>{const v=this.props.bonusGameStores[F.bonusId].slotMultiplier;if(F.toggleDrawnDabs(o,this.isRestore,v),!E.includes(F.bonusId)){const E=W[F.bonusId],a=F.grid.getGridNumbers(),G=a.filter(((o,W)=>E.includes(W))),L=a.filter((W=>o.includes(W)||G.includes(W))).length;F.handleWinAnimations(a.length-L,v,this.isRestore)}}))}dispose(){super.destroy({children:!0})}resetGame(o,W){this.isBonusGameInProgress=!1;const F=W>0&&W<Wv;this.getLottoCards().forEach((([W])=>{W.resetCard(o,F)})),this.getBonusCards().forEach((([W])=>{W.resetCard(o)}))}resize(o,W){const{canvasScale:F,position:E}=JE.w(o,this.props.layoutMode,W);this.scale.set(F,F),this.position.set(E.x,E.y)}getLottoContainerRect(){if("mobilePortrait"===this.props.layoutMode){const o=2*(XF.PI+Fv)+XF.mo+Fv,W=2*XF.sk+Fv;return new _F.M_G(0,-200,o,W)}const o=4*(XF.PI+Fv)+2*XF.tn+Fv,W=XF.sk;return new _F.M_G(0,-20,o,W)}generateBonusCards(){const o={};return Object.values(rE.$i).forEach((W=>{o[W]=new RE({bonusGameCard:!1,bonusId:W,layoutMode:this.props.layoutMode,updateBetsCallback:this.props.updateBetsCallback,assets:this.props.assets,setChipPlaceholder:this.props.setChipPlaceholder,soundStore:this.props.soundStore})})),o}generateLottoCards(){const o={};for(const W of rE.Wq){o[W]=new av({layoutMode:this.props.layoutMode,cardIndex:W,updateBetsCallback:this.props.updateBetsCallback,setCardModeCallback:this.props.setCardModeCallback,assets:this.props.assets,setChipPlaceholder:this.props.setChipPlaceholder,soundStore:this.props.soundStore});const F={card1:0,card2:0,card3:"mobilePortrait"===this.props.layoutMode?1:0,card4:"mobilePortrait"===this.props.layoutMode?1:0};o[W].zIndex=F[W]}return o}}var HE=F(139021);const bE={card1:0,card2:1,card3:2,card4:3};function ov(o){return bE[o]}const Wv=4,Fv=5;function Ev(o,W){return o?{x:[0,1,0,1][W]*(XF.PI+Fv),y:[0,0,1,1][W]*(XF.sk+Fv)-200}:{x:(XF.PI+Fv)*W,y:0}}function vv(o,W,F){if(o){const o=Ev(!0,F),E={1:{0:{x:35,y:Fv+-200,zIndex:0}},2:{0:{x:o.x+XF.PI/2+Fv,y:o.y-30,zIndex:0},1:{x:o.x-XF.PI/2,y:o.y-30+XF.sk+Fv,zIndex:1}},3:{0:{x:o.x,y:o.y-30,zIndex:1},1:{x:o.x,y:o.y-30,zIndex:0},2:{x:o.x+XF.PI/2+Fv,y:o.y-30,zIndex:2}},4:{0:{x:o.x,y:o.y-30,zIndex:1},1:{x:o.x,y:o.y-30,zIndex:0},2:{x:o.x,y:o.y-30,zIndex:3},3:{x:o.x,y:o.y-30,zIndex:2}}}[W][F],v={x:E.x,y:E.y};return v.y+=70,{position:v,zIndex:E.zIndex}}const E=XF.PI+Fv,v=E*F;return{position:{1:{0:{x:E+33.5,y:50}},2:{0:{x:230-E,y:50},1:{x:230,y:50}},3:{0:{x:285-2*E,y:50},1:{x:285-E,y:50},2:{x:285,y:50}},4:{0:{x:v,y:50},1:{x:v,y:50},2:{x:v,y:50},3:{x:v,y:50}}}[W][F],zIndex:1}}class av extends _F.mcf{constructor(o){super(),this.globalMultiplier=1,this.cardMode=MF._g.Multi,this.isBetsOpen=!1,this.disabledFilter=OE(),this.previousTotalMultipliers=1,this.positionAnimationCancellation=()=>{},this.layoutMode=o.layoutMode,this.assets=o.assets,this.soundStore=o.soundStore,this.centerContainer=new _F.mcf;const W=new _F.M_G(1.4,-6.8,32,32),F=SF("mobilePortrait"===this.layoutMode,!1);F.x=DF.Vm,F.y=DF.a1,this.betSpot=new HF({onChipAdded:()=>this.renderGrid(),updateBetsCallback:o.updateBetsCallback,betSpotIndex:o.cardIndex,layoutMode:this.layoutMode,chipRectangle:W,clickArea:F,betSpotContainerOffset:{x:1.9,y:.7},chipOffset:{x:2,y:1}},{assets:this.assets}),this.baseContainer=new _F.mcf,this.cardIndex=o.cardIndex;const E=Ev("mobilePortrait"===this.layoutMode,ov(o.cardIndex));this.x=E.x,this.y=E.y,this.setCardModeCallback=o.setCardModeCallback,this.setChipPlaceholder=o.setChipPlaceholder,this.lightRay=_F.kxk.from(this.assets.getTexture(OF.xL.RadialLight)),this.freeSpace=_F.kxk.from(this.assets.getTexture(OF.xL.FreeSpaceSymbol)),this.chanceSpace=_F.kxk.from(this.assets.getTexture(OF.xL.ChanceSymbol)),this.lightRayGradientRed=_F.kxk.from(this.assets.getTexture(OF.xL.RedGradient)),this.lightRayGradientGold=_F.kxk.from(this.assets.getTexture(OF.xL.GoldGradient)),this.freeSpaceBg=this.getFreeSpaceSymbol(),this.chanceBg=this.getChanceSymbol(),this.lottoCardFrame=new ZE({assets:this.assets,frameType:this.cardMode}),this.globalStyleMask=new mE;const v=this.createGridBackground();this.addChild(this.lottoCardFrame,this.globalStyleMask,v),this.baseContainer.interactiveChildren=!1,this.cardControl=this.createCardControl(),this.grid=this.createGrid(),this.cardControlMultipliers=new EE({assets:this.assets,mode:this.cardMode}),this.particles=this.getLottoParticles(),this.addChild(this.betSpot),this.createCenterElement(),this.cursor="pointer",this.centerContainer.swapChildren(this.chanceSpace,this.freeSpace),this.addChild(this.cardControlMultipliers),this.addChild(F)}updateChipPlaceholderPosition(){this.betSpot.updateChipPlaceholderPosition(this.setChipPlaceholder)}resetCard(o,W){this.grid.resetGrid(),this.resetGlobalMultiplier(),this.toggleCardVisibility(!0,!1).then(),this.centerContainer.alpha=1,this.centerContainer.visible=!0,this.grid.visible=!1,this.cardControl.visible=!0,this.betSpot.visible=!0,this.betSpot.alpha=1,this.betSpot.resetBetSpot(),this.cardControlMultipliers.reset(),this.lottoCardFrame.setVisibleFrame(this.cardMode),this.lottoCardFrame.setIsWinningCard(!1,!1),this.resetPosition(o,W)}animateRePosition(o,W,F,E){const v="mobilePortrait"===this.layoutMode,a=v?40:50,G=Ev("mobilePortrait"===this.layoutMode,F),L=E?vv(v,W,F).position:{x:G.x,y:G.y+a};this.zIndex=vv(v,W,F).zIndex;const U=1===W&&v?1.5:1;if(o)return this.position=L,this.scale={x:U,y:U},void this.updateChipPlaceholderPosition();const I=io.M();I.delay(v?.55:0).parallel([Ro.M(this.scale).animateTo({x:U,y:U},1,so.lu).callback((()=>{this.updateChipPlaceholderPosition()})),Ro.M(this.position).animateTo(L,1,so.lu).callback((()=>{this.updateChipPlaceholderPosition()}))]);const l=Jo.l({anim:I});this.positionAnimationCancellation=()=>{I.fastForward(),l()}}animateCardTransition(o,W,F){const E=Ev("mobilePortrait"===this.layoutMode,ov(this.cardIndex));if(W&&("mobilePortrait"===this.layoutMode?(this.position.x=-F.width+E.x,this.position.y=E.y):this.position.y=F.height+E.y),o)return this.position=E,void this.updateChipPlaceholderPosition();const v=io.M();v.parallel([Ro.M(this.position).animateTo(E,.75,so.ED).callback((()=>{this.updateChipPlaceholderPosition()}))]),Jo.l({anim:v})}resetPosition(o,W){this.positionAnimationCancellation();const F=Ev("mobilePortrait"===this.layoutMode,ov(this.cardIndex)),E={x:F.x,y:F.y+DE};if(o){const o=io.M(),F=1===this.scale.x&&W;o.delay(F?.15:0).parallel([Ro.M(this.scale).animateTo({x:1,y:1},.5,so.am).callback((()=>{this.updateChipPlaceholderPosition()})),Ro.M(this.position).animateTo(E,.5,so.am).callback((()=>{this.updateChipPlaceholderPosition()})),Ro.M(this.disabledFilter).animateTo({alpha:1},.5,so.am).callback((()=>{this.filters=null}))]),Jo.l({anim:o})}else this.scale.set(1),this.position=E,this.updateChipPlaceholderPosition(),this.filters=null}toggleCardVisibility(o,W){return new Promise((F=>{if(F(),!W)return this.alpha=o?1:0,this.visible=o,void F();const E=io.M();E.sequence(Ro.M(this).animateTo({alpha:o?1:0},.3).callback((()=>{this.visible=o,F()}))),Jo.l({anim:E})}))}hideInactiveCard(o){return this.toggleCardVisibility(!1,o)}showInactiveGrid(o){if(this.disabledFilter.alpha=.6,o)return this.centerContainer.alpha=0,this.lottoCardFrame.setVisibleFrame("disabled",this.cardMode),this.grid.visible=!0,this.centerContainer.visible=!1,this.cardControl.visible=!1,this.betSpot.alpha=0,this.betSpot.visible=!1,this.grid.showInactiveGrid(),this.grid.alpha=1,void(this.filters=[this.disabledFilter]);const W=io.M();this.grid.alpha=0,W.sequence(Ro.M(this.centerContainer).animateTo({alpha:0},.5)).callback((()=>{this.filters=[this.disabledFilter],this.lottoCardFrame.setVisibleFrame("disabled",this.cardMode),this.grid.visible=!0,this.centerContainer.visible=!1,this.cardControl.visible=!1,this.betSpot.alpha=0,this.betSpot.visible=!1,this.grid.showInactiveGrid()})).sequence(Ro.M(this.grid).animateTo({alpha:1},.5)),Jo.l({anim:W})}setMultipliers(o,W){this.grid.setMultipliers(o,W)}showMultipliers(o,W){this.grid.toggleMultipliers(o,W,(()=>this.cardControlMultipliers.applyGlobalMultiplier(this.globalMultiplier)))}animateWonMultiplier(){this.cardControlMultipliers.animateWonMultiplier()}async showWinLines(o,W,F,E){o.length>0&&this.lottoCardFrame.setIsWinningCard(!0,!W),E&&(0===o.length?this.betSpot.hideChip(W):this.betSpot.showChip()),this.grid.showWinLines(o,W);const v=o.reduce(((o,W)=>o+W.mult),0),a=this.previousTotalMultipliers!==v;this.previousTotalMultipliers=v;let G=!1,L=!1;if(o.forEach((o=>{const E=this.winLineContainsLineMultiplier(o,this.grid.gridMultipliers);Object.values(this.grid.gridMultipliers).forEach((async a=>{if(void 0!==a){!1===L&&(L=E);for(const L of[a.cellMultiplier,a.lineMultiplier])if(!0===L.getIsMultiplierTextVisible()&&L.getCellsAxis().includes(o.line)&&L.multiplierType!==MF.r3.GlobalSymbol&&!W){G||F(!1,this.cardIndex),G=!0;const o=this.getUpdatedTotalValue(E,L.multiplierType,v,L.value);L.animateMultiplierFlight((()=>this.cardControlMultipliers.applyTotalMultiplier(o)))}}}))})),G)return await XE.u({timeInMilliseconds:L?1700:1400}),!E&&a&&this.cardControlMultipliers.animateMultiplierSum(),void F(!0,this.cardIndex);G||((()=>{this.cardControlMultipliers.applyTotalMultiplier(v)})(),a&&this.cardControlMultipliers.animateMultiplierSum()),this.previousTotalMultipliers=v}setFreeSpaces(o){this.grid.setFreeSpaces(o)}setIsBetsOpen(o){this.isBetsOpen=o}updateBetSpotValue(o,W){var F;const E=0===this.betSpot.betValue,v=this.betSpot.betValue!==o;this.betSpot.setBetValue(o,!1),0!==o?(W&&(this.centerContainer.visible=!1),v&&E&&!W&&!(null===(F=this.gridRevealAnimation)||void 0===F?void 0:F.active)&&this.animateGridReveal()):(this.gridRevealAnimation&&(this.gridRevealAnimation.fastForward(),this.gridRevealAnimation.dispose()),this.grid.visible=!1,this.setCenterImagesVisibility(this.cardMode,!1),this.centerContainer.visible=!0)}toggleDrawnDabs(o,W,F,E=!1){this.grid.toggleDrawnDabs({drawnBalls:o,isRestore:W,applyMultiplierCallback:()=>this.cardControlMultipliers.applyGlobalMultiplier(this.globalMultiplier),setAreLottoAnimationsFinished:F,isLastDrawnBall:E})}setIsToggleActive(o){this.cardControl.setIsToggleActive(o),this.cardControl.eventMode=o?"static":"none",o||this.grid.hideCenterCellDecorator()}updateGridNumbers(o){this.grid.updateGridNumbers(o),this.grid.setCardMode(this.cardMode)}setCardMode(o,W,F){var E,v,a,G;o!==this.cardMode&&this.cardControl&&(this.cardMode=o,this.setCardModeCallback(o,this.cardIndex,W),this.cardControl.setCardMode(o,this.globalMultiplier,F),null===(E=this.lightRayAnimation)||void 0===E||E.fastForward(),null===(v=this.lightRayAnimation)||void 0===v||v.dispose(),null===(a=this.gridRevealAnimation)||void 0===a||a.fastForward(),null===(G=this.gridRevealAnimation)||void 0===G||G.dispose(),this.centerContainer.swapChildren(this.chanceSpace,this.freeSpace),this.setCenterImagesVisibility(this.cardMode,F),this.grid.setCardMode(o),this.betSpot.applyStyle(o,this.globalMultiplier>1))}applyGlobalMultiplier(o){this.globalMultiplier=o}applyTotalMultiplier(o){this.cardControlMultipliers.applyTotalMultiplier(o)}animateLightRays(){this.lightRayAnimation=io.M();const o=this.cardMode===MF._g.FreeSpace,W=o?this.freeSpace:this.chanceSpace,F=o?65.55:50*1.15,E=o?65.55:69,v=o?57:50,a=o?57:60;this.lightRayAnimation.delay(1.6*(ov(this.cardIndex)+1)).parallel([Ro.M(W).animateTo({rotation:-Math.PI/10},.275).animateTo({rotation:Math.PI/10},.275),Ro.M(W).animateTo({height:F},.275,so.am),Ro.M(W).animateTo({width:E},.275,so.am),Ro.M(this.lightRay).animateTo({rotation:Math.PI/6},.55)]).parallel([Ro.M(W).animateTo({rotation:0},.275),Ro.M(W).animateTo({height:v},.275,so.am),Ro.M(W).animateTo({width:a},.275,so.am),Ro.M(this.lightRay).animateTo({rotation:Math.PI/3},.55*1.5,so.ED)]),Jo.l({anim:this.lightRayAnimation})}async animateSymbolReveal(o=!1,W=!1){var F;const E=o;if(E||this.grid.applyGridMask(),!o){const o=this.soundStore.getEcasCardId(this.cardIndex);if(this.cardMode===MF._g.FreeSpace)this.soundStore.triggerEvent(YE.PZ.BuildCenterFreeSpace,o);else{const W=Object.keys(this.grid.lineMultipliers).length>this.soundStore.multiplierData.line.count?YE.PZ.BuildCenterMultiplierLine:(null===(F=this.grid.cellMultipliers[HE.u])||void 0===F?void 0:F.isGlobal)?YE.PZ.BuildCenterMultiplierGlobal:YE.PZ.BuildCenterMultiplierStandard;this.soundStore.triggerEvent(W,o)}}W||this.grid.transformCentralFreeToDab(o),this.showMultipliers(!o,!0),await XE.u({timeInMilliseconds:DF.rG,immediate:E});const v=0===this.betSpot.betValue;if(o&&!v||this.grid.animateFreeSpaces(!o,W),await XE.u({timeInMilliseconds:DF.$G,immediate:E}),W||(this.grid.transformFreeToDab(o),o||this.soundStore.triggerEventOnce(YE.PZ.BuildFreeSpaceEnd)),this.showMultipliers(!o,!1),!E){const o=3e3;await XE.u({timeInMilliseconds:o}),this.grid.removeGridMask()}}animateGridReveal(){this.centerContainer.visible=!0,this.grid.visible=!0,this.gridRevealAnimation=io.M();const o=this.cardMode===MF._g.FreeSpace;(function({timeline:o,grid:W,addChild:F,removeChild:E,centerSymbol:v,centerSymbolHeight:a,centerSymbolWidth:G,cellBackgroundSymbol:L,lightRay:U,lightRayGradient:I,lottoCardWidth:l,animateParticles:h}){const p=1.5*a,g=1.5*G,f=.5*p,A=.5*g,k=.28*p,Z=.28*g,P=function(){const o=20,W=(new _F.A1g).beginFill().drawCircle(o,o,o).endFill();return W.pivot.set(o,o),W.visible=!1,W}();P.visible=!0,P.x=v.x,P.y=v.y,P.width=Z,P.height=k,W.mask=P,F(P);const y=function(){const o=100,W=(new _F.A1g).beginFill().drawRect(0,0,o,o).beginHole();return W.drawCircle(o/2,o/2,7),W.endHole(),W.pivot.set(o/2,o/2),W.visible=!1,W}();F(y),v.visible=!0,U.visible=!0,I.visible=!0;const z=new oE.MR;v.filters=[z],o.parallel([Ro.M(v).animateTo({height:p},.435,so.AR),Ro.M(v).animateTo({width:g},.435,so.AR),Ro.M(U).animateTo({rotation:Math.PI/3*.435},.435)]).callback((()=>{L&&(L.x=v.x,L.y=v.y+-2.7,L.width=Z,L.height=Z,L.alpha=0,L.visible=!0)})).parallel([Ro.M(U).animateTo({rotation:Math.PI/3*.435+Math.PI/3*.42*.8},.336),Ro.M(v).animateTo({height:0},.336,so.AR),Ro.M(v).animateTo({width:0},.336,so.AR),Ro.M(v).animateTo({x:v.x},.336,so.AR),Ro.M(v).animateTo({y:v.y+-5},.336,so.AR),Ro.M(v).delay(.168).animateTo({alpha:0},.168,so.AR),Ro.M(z).animateTo({brightness:10},.21,so.AR),Ro.M(U).animateTo({alpha:0},.42,so.AR),...L?[Ro.M(L).delay(.252).animateTo({height:1.3*f},.168,so.$g),Ro.M(L).delay(.252).animateTo({width:1.3*A},.168,so.$g),Ro.M(L).delay(.252).animateTo({alpha:1},.168)]:[]]).callback((()=>{U.visible=!1,v.visible=!1,v.y-=-5,I.mask=y,y.visible=!0,y.width=l,y.height=l,y.x=l/2,y.y=l/2,To.S()||h()})).parallel([Ro.M(P).animateTo({width:2*l},.15,so.AR),Ro.M(P).animateTo({height:2*l},.15,so.AR),Ro.M(y).animateTo({width:10*l},.15,so.AR),Ro.M(y).animateTo({height:10*l},.15,so.AR),...L?[Ro.M(L).animateTo({height:k},.15,so.$g),Ro.M(L).animateTo({width:Z},.15,so.$g),Ro.M(L).delay(.12).animateTo({alpha:0},.03)]:[]]).callback((()=>{L&&(L.alpha=1,L.visible=!1),v.filters=null,E(P),W.mask=null,I.visible=!1,E(y),I.mask=null})).onDispose((()=>{v.visible=!0,v.alpha=1,v.width=G,v.height=a,U.visible=!0,U.alpha=1,I.visible=!0,U.alpha=1}))})({timeline:this.gridRevealAnimation,grid:this.grid,addChild:this.addChild.bind(this),removeChild:this.removeChild.bind(this),lottoCardWidth:XF.PI,lightRay:this.lightRay,animateParticles:()=>{this.particles.visible=!0,this.particles.gotoAndPlay(0),this.particles.onComplete=()=>{this.particles.visible=!1}},centerSymbol:o?this.freeSpace:this.chanceSpace,centerSymbolHeight:o?57:50,centerSymbolWidth:o?57:60,cellBackgroundSymbol:o?this.freeSpaceBg:void 0,lightRayGradient:o?this.lightRayGradientRed:this.lightRayGradientGold}),this.gridRevealAnimation.callback((()=>{this.centerContainer.visible=!1,this.grid.visible=!0})),this.lightRayAnimation&&(this.lightRayAnimation.fastForward(),this.lightRayAnimation.dispose()),Jo.l({anim:this.gridRevealAnimation});const W=o?YE.PZ.FreeSpaceCardAnimate:YE.PZ.MultiplierCardAnimate,F=this.soundStore.getEcasCardId(this.cardIndex);this.soundStore.triggerEvent(W,F)}createGridBackground(){const o=_F.kxk.from(this.assets.getTexture(OF.xL.LottoGrid));return o.position.set(.5,.5),o.width=XF.PI-1,o.height=XF.sk-1,o}winLineContainsLineMultiplier(o,W){let F=!1;return Object.values(W).forEach((W=>{if(void 0!==W)for(const E of[W.cellMultiplier,W.lineMultiplier])!0===E.getIsMultiplierTextVisible()&&E.getCellsAxis().includes(o.line)&&E.multiplierType===MF.r3.LineSymbol&&(F=!0)})),F}getUpdatedTotalValue(o,W,F,E){return o?W===MF.r3.LineSymbol?F:E:F}getFreeSpaceSymbol(){const o=_F.kxk.from(this.assets.getTexture(OF.xL.FreeSpaceBg));return o.visible=!1,o.anchor.set(.5,.5),o}getChanceSymbol(){const o=_F.kxk.from(this.assets.getTexture(OF.xL.ChanceBg));return o.visible=!1,o.anchor.set(.5,.5),o}getLottoParticles(){const o=this.assets.getAnimation(OF.ck.LottoParticles),W=new _F.Dl5(o);return W.visible=!1,W.loop=!1,W.x=XF.sk/2-55,W.y=XF.PI/2-40,W.width=80,W.height=80,this.addChild(W),W}renderGrid(){this.grid.visible=this.betSpot.betValue>0||!this.isBetsOpen}createCenterElement(){this.chanceSpace.width=60,this.chanceSpace.height=50,this.chanceSpace.position.set(61,64),this.chanceSpace.anchor.set(.5),this.freeSpace.width=57,this.freeSpace.height=57,this.freeSpace.position.set(61,64),this.freeSpace.visible=!1,this.freeSpace.anchor.set(.5),this.lightRay.width=XF.PI,this.lightRay.height=120,this.lightRay.position.set(57,70),this.lightRay.anchor.set(.5),this.lightRayGradientRed.width=XF.PI,this.lightRayGradientRed.height=XF.sk,this.lightRayGradientRed.visible=!1,this.lightRayGradientGold.width=XF.PI,this.lightRayGradientGold.height=XF.sk,this.centerContainer.addChild(this.lightRayGradientGold,this.lightRayGradientRed,this.lightRay,this.freeSpaceBg,this.chanceBg,this.freeSpace,this.chanceSpace),this.centerContainer.interactiveChildren=!1,this.addChild(this.centerContainer)}createCardControl(){const o=new bF({assets:this.assets,mode:this.cardMode});return o.position.set(70.2,124),o.eventMode="static",o.cursor="pointer",o.on("pointerdown",(()=>{this.setCardMode(this.cardMode===MF._g.Multi?MF._g.FreeSpace:MF._g.Multi,!0,!1)})),this.addChild(o),o}createGrid(){const o=new HE.L({assets:this.assets,isPortrait:"mobilePortrait"===this.layoutMode,cardIdentifier:this.cardIndex,soundStore:this.soundStore});return o.visible=!1,o.name="LOTTO_CARD_GRID",o.zIndex=1,this.addChild(o),o}setCenterImagesVisibility(o,W){const F=o===MF._g.FreeSpace,E=o===MF._g.Multi,v=0===this.betSpot.betValue||W;this.lottoCardFrame.setVisibleFrame(this.globalMultiplier>1?"withGlobal":F?MF._g.FreeSpace:MF._g.Multi),this.lightRayGradientRed.visible=F&&v,this.lightRayGradientGold.visible=E&&v,this.freeSpace.visible=F&&v,this.chanceSpace.visible=E&&v}resetGlobalMultiplier(){this.globalMultiplier=1,this.betSpot.applyStyle(this.cardMode,!1),this.cardControl.toggleGlobalPlaceholder.visible=!1,this.lottoCardFrame.withGlobalMultiplierBase.visible=!1,this.globalStyleMask.reset()}}const Gv=F.p+"images/beticon.7523b0cd.svg",Lv="text--f309c",Uv="landscape--126e3",Iv="hidden--33c9d",lv="darkOverlay--09382",hv="betOnAllBonus--b10f9",pv="whiteOverlay--1df66",gv="betIcon--92f34",fv="betOnAllButton--2fbfb",Av="disabled--c2e00",kv="betOnAllLotto--b6e6a",Zv="hideAnimation--ba93a",Pv="showAnimation--bdff5",yv="visible--b2805",zv="controller--d92be",xv="debug--683cb",Nv="betOnAllColorBackground--d46db",ev="hover--cc913",tv="mouseDown--6aab7",mv=v.PA((({isBonus:o,disabled:W,isBetsOpen:F,onHover:v,onMouseDown:h,isMaxLimit:p})=>{const{abstractGame:g,betting:f,device:A,settings:k,ui:Z}=G.Pj(),P="desktop"===A.layoutMode||"tablet"===A.layoutMode,y=l.useCallback((F=>{const E=f.getAmountMaxLimitReached(o);if(W||p||E){const v=o?"betOnAllBonus":"betOnAllLotto",G={x:F.clientX,y:F.clientY},I=E?U.T(L.X.TooltipMaxBetIs,{amount:a.ej(E)}):U.T(L.X.TooltipBalanceTooLow);if(Z.tooltips.showTooltip(G,v,I),W||p)return}const v=g.betValue;o?f.updateAllBonusBetSpotValues(v,!1):f.updateAllLottoBetSpotValues(v,!1)}),[g.betValue,f,W,p,o,Z.tooltips]);return F?E.jsx("button",{"data-role":o?"bet-all-bonus-cards":"bet-all-lotto-cards",onClick:y,className:I.A(fv,zv,{[kv]:!o,[hv]:o,[Uv]:P,[xv]:k.testingApiEnabled}),onMouseEnter:()=>v(!0),onMouseLeave:()=>{v(!1),h(!1)},onMouseDown:()=>h(!0),onMouseUp:()=>h(!1)}):null}));function rv(o){const{isBonus:W,isLandscape:F,disabled:v,hover:a,shouldUseDelay:G,canvasScale:L,fontSize:U,labelText:l,isRestoring:h,mouseDown:p,phase:g}=o,f=Io.Z(g);return E.jsxs("button",{className:I.A(fv,{[kv]:!W,[hv]:W,[Uv]:F,[Iv]:g!==Uo.Qc.BetsOpen&&g!==Uo.Qc.BetsClosed,[Zv]:g===Uo.Qc.BetsClosed,[Pv]:f!==g&&g===Uo.Qc.BetsOpen&&!h,[yv]:g===Uo.Qc.BetsOpen&&(h||f===g),[Av]:v,[ev]:a&&!v,[tv]:p&&!v}),style:{"--opacity":""+(v?.5:1),animationDelay:G?"150ms":"0"},children:[E.jsx("div",{className:I.A(Nv,{[kv]:!W,[hv]:W,[Uv]:F,[Iv]:g!==Uo.Qc.BetsOpen&&g!==Uo.Qc.BetsClosed,[Zv]:g===Uo.Qc.BetsClosed,[Pv]:f!==g&&g===Uo.Qc.BetsOpen&&!h,[yv]:g===Uo.Qc.BetsOpen&&(h||f===g),[Av]:v,[ev]:a})}),E.jsx("img",{src:Gv,height:F?13*L:19*L,className:I.A(gv,{[hv]:W,[Uv]:F})}),E.jsx("p",{style:{fontSize:U},className:I.A(Lv,{[Uv]:F,[Iv]:!F&&W}),children:l}),E.jsx("div",{className:I.A(lv,{[hv]:W,[kv]:!W,[Uv]:F})}),E.jsx("div",{className:I.A(pv,{[hv]:W,[kv]:!W,[Uv]:F})})]})}const Bv=v.PA((({canvasScale:o,isBonus:W,disabled:F,mouseDown:v,hover:a=!1})=>{const{betting:I,device:l,game:h,restore:p}=G.Pj(),g="desktop"===l.layoutMode||"tablet"===l.layoutMode,f=11*o,A=W?U.T(L.X.BetOnAllBonus):U.T(L.X.BetOnAllCards),k=I.previousInactiveCards.length>0&&I.previousInactiveCards.length<Wv&&h.phase!==Uo.Qc.BetsClosed;return E.jsx(rv,{isBonus:W,isLandscape:g,disabled:F,hover:a,shouldUseDelay:k,canvasScale:o,fontSize:f,labelText:A,isRestoring:p.isRestoring,phase:h.phase,mouseDown:v})}));var jv=F(136685),Vv=F(168850),wv=F(384511);const Kv={copy:o=>({x:o.x,y:o.y}),lerp:(o,W,F,E)=>{E.set(wv.Cc(o.x,W.x,F),wv.Cc(o.y,W.y,F))}},Tv=[o=>{if(o instanceof _F.bRX||o instanceof _F.oA$)return Kv}];class dv extends _F.RvI{constructor(){super(),this.trackedCallbacks=new Set}add(o,W,F){return this.trackedCallbacks.add(o),super.add(o,W,F),this}dispose(){this.trackedCallbacks.forEach((o=>{this.remove(o)})),this.trackedCallbacks.clear()}}const nv=l.memo((o=>{const{application:W,shouldResizeToParent:F=!0,style:v}=o,a=l.useCallback((o=>{o&&(F&&(W.resizeTo=o),o.appendChild(W.view))}),[W,F]);return E.jsx("div",{ref:a,style:{width:"100%",height:"100%",pointerEvents:"none"===W.stage.eventMode?"none":"auto",...v}})}));nv.displayName="DirectPixiRoot";class uv extends _F.mcf{constructor(o){super(),this.assets=o,this.visible=!1,this.alpha=0}setEmitterPosition(o){var W,F;this.particleSystem||this.createParticles();const E=null===(W=this.particleSystem)||void 0===W?void 0:W.controllerConfigs.get("PIXI_PARTICLES"),v=null===(F=this.particleSystem)||void 0===F?void 0:F.systemSize;if(E&&v){const W=E.emitter;W.position[0]=o.x/v.width,W.position[1]=o.y/v.height}}setParticleCount(o){var W;this.particleSystem||this.createParticles();const F=null===(W=this.particleSystem)||void 0===W?void 0:W.controllerConfigs.get("PIXI_PARTICLES");F&&(F.particlesPerWave=Math.floor(o),F.amount=Math.floor(o))}setVelocity(o){var W;this.particleSystem||this.createParticles();const F=null===(W=this.particleSystem)||void 0===W?void 0:W.controllerConfigs.get("PIXI_PARTICLES");F&&(F.particle.initialVelocity.max=o)}explode(){var o,W;this.particleSystem||this.createParticles();const F=null===(o=this.particleSystem)||void 0===o?void 0:o.controllerConfigs.get("PIXI_PARTICLES");F&&(F.explosiveness=!0,F.loop=!1,null===(W=this.particleSystem)||void 0===W||W.reset())}play(){var o,W;this.particleSystem||this.createParticles();const F=null===(o=this.particleSystem)||void 0===o?void 0:o.controllerConfigs.get("PIXI_PARTICLES");F&&(F.explosiveness=!1,F.loop=!0),null===(W=this.particleSystem)||void 0===W||W.start()}stop(){var o;null===(o=this.particleSystem)||void 0===o||o.dispose(),this.particleSystem=void 0}setSystemSize(o,W){var F;this.particleSystem||this.createParticles(),null===(F=this.particleSystem)||void 0===F||F.updateSystemSize({width:o,height:W})}destroy(o){var W;null===(W=this.particleSystem)||void 0===W||W.dispose(),this.particleSystem=void 0,super.destroy(o)}createParticles(){const o=this.assets.getParticleSystemConfig(OF.Vm.BonusCardMultiplierTrail);this.particleSystem=GE.l.spawnSystem({container:this,config:o,systemScale:1,assets:{[o.graphicsConfig.PIXI_PARTICLES.textureId]:{type:LE.b.PixiTexture,value:this.assets.getTexture(OF.xL.BonusCardsMultiplierTrail)}},autoStart:!1})}}class $v extends _F.mcf{constructor(o){super(),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.sprite=new _F.kxk(o.getTexture(OF.xL.BonusTransitionRays)),this.sprite.blendMode=_F.B9A.ADD,this.maskTexture=_F.gPd.from(this.canvas),this.raysMask=new _F.kxk(this.maskTexture),this.canvas.width=this.sprite.width,this.canvas.height=this.sprite.height,this.sprite.pivot.set(.5*this.sprite.width,.5*this.sprite.height),this.sprite.position.set(.5*this.sprite.width,.5*this.sprite.height),this.drawMask(),this.addChild(this.sprite,this.raysMask),this.mask=this.raysMask,this.visible=!1}destroy(o){this.ctx=null,this.canvas&&vE.Ob(this.canvas),this.canvas=null,super.destroy(o)}drawMask(){if(!this.ctx||!this.canvas)return;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);const o=this.ctx.createLinearGradient(.5*this.canvas.width,0,.5*this.canvas.width,this.canvas.height);o.addColorStop(0,"#ff0000"),o.addColorStop(.5,"#ff0000"),o.addColorStop(.6,"#000000"),o.addColorStop(1,"#000000"),this.ctx.fillStyle=o,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.maskTexture.update()}}class Yv extends _F.mcf{constructor(o){super(),this.layoutMode=o.layoutMode,this.store=o.store,this.bonusCards=this.generateBonusCards(),o.setCardReferences(this.bonusCards),this.addChild(...Object.values(this.bonusCards))}showInactiveBonusGrid(o){this.bonusCards[o].showInactiveGrid()}updateSlotMultipliers(o,W=!1){for(const[F,E]of Object.entries(o))this.bonusCards[F].updateSlotMultiplier(E,W)}updateBetValues(o,W){for(const[F,E]of Object.entries(o))this.bonusCards[F].updateBetSpotValue(E,W)}updateBonusCardNumbers(o,W){for(const F of Object.values(this.bonusCards)){const E=W.includes(F.bonusId);F.updateGridNumbersForBonusGame(o[F.bonusId],E)}}showDrawnBalls(o){for(const W of Object.values(this.bonusCards))W.toggleDrawnDabs(o,!0)}setFreeSpaces(o){for(const W of Object.values(this.bonusCards))W.showFreeSpaces(o[W.bonusId])}setStartPosition(o){this.resetBonusGame(!1);for(const[W,F]of o){const o=this.bonusCards[F],E=W.getGlobalPosition(),v=W.getCardBounds(),a=o.getCardBounds(!0),G=this.toLocal({x:E.x+.5*v.width,y:E.y+.5*v.height});o.x=G.x,o.y=G.y,o.scale.set(W.width/o.width),o.pivot.set(.5*a.width,.5*a.height),o.visible=!0,o.showGrid(),o.animateFreeSpaces(!1,!0),o.transformFreeToDab(!0)}}resetBonusGame(o){for(const W of Object.values(this.bonusCards))W.visible=!1,o&&W.resetCard(!1)}generateBonusCards(){const o={};return Object.values(rE.$i).forEach((W=>{const F=new RE({bonusGameCard:!0,layoutMode:this.layoutMode,bonusId:W,assets:this.store.assets,soundStore:this.store.sound,updateBetsCallback:()=>{},setChipPlaceholder:o=>{this.store.ui.placeholders.setChipPlaceholder({...o,isBonusLayout:!0})},disabledAlpha:.8});F.visible=!1,F.updateGridNumbersForBonusGame([],!1),o[W]=F})),o}}function Qv(o,W){const F=o.bonusMultiplier.multiplierTexture.scale.x;return io.M().callback((()=>{o.grid.showBonusGoldenDab(W),o.bonusMultiplier.multiplierTexture.alpha=0,o.bonusMultiplier.visible=!0})).parallel([Ro.M(o.bonusMultiplier.multiplierTexture).animateTo({alpha:1},.05),Ro.M(o.bonusMultiplier.multiplierTexture.scale).animateTo({x:2*F,y:2*F},.385,so.hb)]).sequence(Ro.M(o.bonusMultiplier.multiplierTexture.scale).animateTo({x:F,y:F},.535-.385,so.hb))}function Cv(o,W){return io.M().delay(.235).callback((()=>{W&&o.bonusMultiplier.animateParticles()}))}function qv(o){return io.M().callback((()=>{o.showGoldBorders(),o.multiplierAnimatable.animateParticles()})).parallel([Ro.M(o.multiplierAnimatable.particleContainer.position).animateTo(o.multiplierAnimatable.goldBorderMaskEndPosition,.715),Ro.M(o.multiplierAnimatable.goldBorderMask.position).animateTo(o.multiplierAnimatable.goldBorderMaskEndPosition,.715)]).callback((()=>{o.multiplierAnimatable.resetParticles()}))}function cv(o){return io.M().parallel([Ro.M(o.multiplierAnimatable.goldFoil.position).animateTo(o.multiplierAnimatable.goldFoilEndPosition,2.02)])}function _v(o,W,F){const E=io.M();return E.callback((()=>{o.startAnimationWithMasks(),o.multiplierAnimatable.startAnimation()})).parallel([Qv(o,W),Cv(o,!F),qv(o)]).sequence(cv(o)).callback((()=>{o.bonusMultiplier.reset(),o.stopAnimationWithMasks(),o.multiplierAnimatable.reset()})),E}var Ov=F(929307);const Xv=F.p+"images/bonuscardb.b8e0b081.webp",Sv=F(826889);class sv extends _F.mcf{constructor(){super(),this.visible=!1,this.alpha=0}setSizes(o,W){if(this.particleSystem||this.createParticles(),this.particleSystem){const F=Sv.controllerConfigs.PIXI_PARTICLES,E=Sv.systemSize,v=F.amount,a=F.particle.scale,G=this.particleSystem.controllerConfigs.get("PIXI_PARTICLES");if(G){const F=G.emitter;F.width=o,F.height=W,G.amount=Math.floor(v*o/E.width),G.particle.scale.max=a.max*o/E.width}this.particleSystem.updateSystemSize({width:o,height:W})}}start(){var o;this.particleSystem||this.createParticles(),null===(o=this.particleSystem)||void 0===o||o.start()}stop(){var o;null===(o=this.particleSystem)||void 0===o||o.dispose(),this.particleSystem=void 0}destroy(o){var W;null===(W=this.particleSystem)||void 0===W||W.dispose(),this.particleSystem=void 0,super.destroy(o)}createParticles(){this.particleSystem=GE.l.spawnSystem({container:this,config:Ov.A(Sv),systemScale:1,assets:{[Sv.graphicsConfig.PIXI_PARTICLES.textureId]:{type:LE.b.PixiTexture,value:_F.gPd.from(Xv)}},autoStart:!1})}}class iv{constructor(o,W){this.totalPointsCount=o,this.controlPoints=W,this.curveLength=0,this.xLinear=o=>(1-o)*this.controlPoints[0].x+o*this.controlPoints[1].x,this.yLinear=o=>(1-o)*this.controlPoints[0].y+o*this.controlPoints[1].y,this.xQuadratic=o=>(1-o)*(1-o)*this.controlPoints[0].x+2*(1-o)*o*this.controlPoints[1].x+o*o*this.controlPoints[2].x,this.yQuadratic=o=>(1-o)*(1-o)*this.controlPoints[0].y+2*(1-o)*o*this.controlPoints[1].y+o*o*this.controlPoints[2].y,this.xCubic=o=>(1-o)*(1-o)*(1-o)*this.controlPoints[0].x+3*(1-o)*(1-o)*o*this.controlPoints[1].x+3*(1-o)*o*o*this.controlPoints[2].x+o*o*o*this.controlPoints[3].x,this.yCubic=o=>(1-o)*(1-o)*(1-o)*this.controlPoints[0].y+3*(1-o)*(1-o)*o*this.controlPoints[1].y+3*(1-o)*o*o*this.controlPoints[2].y+o*o*o*this.controlPoints[3].y,this.xQuintic=o=>(1-o)*(1-o)*(1-o)*(1-o)*(1-o)*this.controlPoints[0].x+5*(1-o)*(1-o)*(1-o)*(1-o)*o*this.controlPoints[1].x+10*(1-o)*(1-o)*(1-o)*o*o*this.controlPoints[2].x+10*(1-o)*(1-o)*o*o*o*this.controlPoints[3].x+5*(1-o)*o*o*o*o*this.controlPoints[4].x+o*o*o*o*o*this.controlPoints[5].x,this.yQuintic=o=>(1-o)*(1-o)*(1-o)*(1-o)*(1-o)*this.controlPoints[0].y+5*(1-o)*(1-o)*(1-o)*(1-o)*o*this.controlPoints[1].y+10*(1-o)*(1-o)*(1-o)*o*o*this.controlPoints[2].y+10*(1-o)*(1-o)*o*o*o*this.controlPoints[3].y+5*(1-o)*o*o*o*o*this.controlPoints[4].y+o*o*o*o*o*this.controlPoints[5].y,this.arcLengths=[0];let F=this.polynomial.x(0),E=this.polynomial.y(0);for(let o=1;o<=this.totalPointsCount;o+=1){const W=o/this.totalPointsCount,v=this.polynomial.x(W),a=this.polynomial.y(W),G=F-v,L=E-a;this.curveLength+=Math.sqrt(G*G+L*L),this.arcLengths.push(this.curveLength),F=v,E=a}}mx(o){return this.polynomial.x(this.mapStepOntoT(o))}my(o){return this.polynomial.y(this.mapStepOntoT(o))}get length(){return this.curveLength}get polynomial(){switch(this.controlPoints.length){case 2:default:return{x:this.xLinear,y:this.yLinear};case 4:return{x:this.xCubic,y:this.yCubic};case 6:return{x:this.xQuintic,y:this.yQuintic}}}mapStepOntoT(o){const W=o*this.arcLengths[this.totalPointsCount];let F=0,E=this.totalPointsCount,v=0;for(;F<E;)v=F+(.5*(E-F)|0),this.arcLengths[v]<W?F=v+1:E=v;this.arcLengths[v]>W&&v--;const a=this.arcLengths[v];return a===W?v/this.totalPointsCount:(v+(W-a)/(this.arcLengths[v+1]-a))/this.totalPointsCount}}const Rv={mobilePortrait:.6,tablet:.66,desktop:.66},Jv={middle:{mobilePortrait:1.7,tablet:1.7,desktop:1.4},end:{mobilePortrait:1.3,tablet:.95,desktop:.864}};function Dv(o,W){return new iv(10,[{x:o.x,y:o.y},{x:o.x-150,y:o.y-300},{x:W.x,y:W.y}])}function Mv(o){if(!o)return new _F.bRX(1,1);let W=o.parent;const F=new _F.bRX(o.scale.x,o.scale.y);for(;W;)F.x*=W.scale.x,F.y*=W.scale.y,W=W.parent;return F}function Hv(o,W,F){const E=io.M();if(0===o.length)return E;const v=o[0],a=Mv(v.parent),G=Rv[F],L=v.getCardBounds(!0).width*G*a.x,U=10*a.x,I=L*o.length+U*(o.length-1),l=[];let h=W.x-.5*I+.5*L;for(let E=0;E<o.length;E++){const v=o[E],a=v.parent.toLocal({x:h,y:W.y});l.push(io.M().delay(.067*E).parallel([Ro.M(v.scale).animateTo({x:Rv[F],y:Rv[F]},.833,so.rn),Ro.M(v.position).animateTo({x:a.x,y:a.y},.833,so.rn)])),h+=L+U}return E.parallel(l)}function bv(o){const W=io.M();if(0===o.length)return W;const F=[];for(const W of o)F.push(io.M().sequence(Ro.M(W).animateTo({alpha:0},.5,so.dV)).callback((()=>{W.visible=!1})));return W.parallel(F)}function oa(o){const{currentCard:W,middlePosition:F,flyInPosition:E,onReady:v,activeCards:a,inactiveCards:G,pendingBonusesParkedPosition:L,layout:U,onStart:I,isNoBets:l}=o,h=io.M();return h.callback((()=>{W.visible=!0,l||W.showAllDabsOnBonusCard();for(const o of a)o.visible=!0,l||o.showAllDabsOnBonusCard();for(const o of G)o.visible=!0})),h.sequence((()=>io.M().parallel([Wa(W,E,F,U,I),io.M().delay(.333).sequence(Hv(a,L,U)),io.M().delay(.333).sequence(bv(G))]))),h.callback((()=>{null==v||v()})),h}function Wa(o,W,F,E,v){const a={progress:0},G=o.parent.toLocal(W),L=Dv({x:o.position.x,y:o.position.y},{x:G.x,y:G.y}),U=Jv.middle[E];return io.M().delay(.333).parallel([io.M().callback((()=>{null==v||v()})).sequence(Ro.M(a).animateTo({progress:1},2.667-.333,so.Do,(()=>{o.position.set(L.xQuadratic(a.progress),L.yQuadratic(a.progress))}))).delay(2.867-2.667).sequence((()=>{const W=o.getCardBounds(!0),v=Mv(o.parent),a=o.parent.toLocal({...F,y:F.y-.5*W.height*Jv.end[E]*v.x});return Ro.M(o.position).animateTo({x:a.x,y:a.y},3.7-2.867,so.AU)})),Ro.M(o.scale).animateTo({x:U,y:U},2.667-.333,so.rn).delay(2.867-2.667).animateTo({x:Jv.end[E],y:Jv.end[E]},3.7-2.667,so.Do)])}var Fa=F(70193),Ea=F(297462);class va{constructor(o){this.loopTick=o,this.state=Ea.c.Idle,this.onDisposeListeners=[],this.isFastForward=!1}get done(){return this.state===Ea.c.Done||this.state===Ea.c.Loop}get active(){return this.state===Ea.c.Active||this.state===Ea.c.Loop}tick(o){return this.active&&this.loopTick(this.isFastForward?cE.A(o,0,100):o),this.state}activate(){this.state===Ea.c.Idle&&(this.state=Ea.c.Loop)}fastForward(){this.isFastForward=!0}reset(){this.state=Ea.c.Idle,this.isFastForward=!1}onDispose(o){return this.onDisposeListeners.push(o),this}dispose(){for(const o of this.onDisposeListeners)o();this.onDisposeListeners.length=0,this.state=Ea.c.Done,this.loopTick=void 0}toJSON(){return{kind:"loop-endless"}}}function aa(o){const{element:W,amplitude:F,frequency:E,duration:v}=o;let a=0,G=0,L=0;const U=new va((o=>{a+=o;const v=Ga(F[0],E,a),G=Ga(F[1],E,a);W.position.x+=v,W.position.y+=G}));return io.M().callback((()=>{G=W.position.x,L=W.position.y})).parallel([U,io.M().delay(v).callback((()=>{W.position.x=G,W.position.y=L,U.dispose()}))]).onDispose((()=>{U.dispose()}))}function Ga(o,W,F){return Math.sin(F/1e3*W)*o}function La(o){const{currentCard:W,lightRays:F,middlePosition:E,flyInPosition:v,sparkles:a,onReady:G,activeCards:L,inactiveCards:U,pendingBonusesParkedPosition:I,layout:l,onStart:h}=o,p=io.M();return p.callback((()=>{W.visible=!0,W.showAllDabsOnBonusCard(),W.attachRays(F);const o=W.getCardTopBounds(!0),E=W.getCardBottomBounds(!0);W.upperContainer.addChild(a.upper),a.upper.setSizes(o.width,o.height),a.upper.visible=!1,a.upper.alpha=0,W.upperContainer.sortChildren(),W.lowerContainer.addChild(a.bottom),a.bottom.setSizes(.9*E.width,E.height),a.bottom.position.set(0,o.height),a.bottom.visible=!1,a.bottom.alpha=0,W.lowerContainer.sortChildren();for(const o of L)o.visible=!0,o.showAllDabsOnBonusCard();for(const o of U)o.visible=!0})),p.sequence((()=>{return io.M().parallel([Ua(W,v,E,l,h),(o=W.upperContainer,io.M().parallel([Ro.M(o).delay(3).animateTo({angle:-30},3.433-3,so.dn),Ro.M(o).delay(3.067).animateTo({alpha:0},.633,so.dn),Ro.M(o.position).delay(3.067).animateTo({x:o.position.x-20,y:o.position.y-50},.633)])),Ia(W.lowerContainer),la(W.bonusMultiplier),ha(F),pa(a.upper),pa(a.bottom),io.M().delay(.333).sequence(Hv(L,I,l)),io.M().delay(.333).sequence(bv(U))]);var o})),p.callback((()=>{var o,E,v;W.updateChipPlaceholderPosition(),F.visible=!1,null===(o=F.parent)||void 0===o||o.removeChild(F),null===(E=a.upper.parent)||void 0===E||E.removeChild(a.upper),null===(v=a.bottom.parent)||void 0===v||v.removeChild(a.bottom),null==G||G()})),p}function Ua(o,W,F,E,v){const a={progress:0},G=o.parent.toLocal(W),L=Dv({x:o.position.x,y:o.position.y},{x:G.x,y:G.y}),U=Jv.middle[E];return io.M().parallel([io.M().delay(.333).callback((()=>{null==v||v()})).sequence(Ro.M(a).animateTo({progress:1},2.667-.333,so.Do,(()=>{o.position.set(L.xQuadratic(a.progress),L.yQuadratic(a.progress))}))).delay(3.7-2.667).sequence((()=>{const W=o.getCardBounds(!0),v=Mv(o.parent),a=o.parent.toLocal({...F,y:F.y-.5*W.height*Jv.end[E]*v.x});return Ro.M(o.position).animateTo({x:a.x,y:a.y},4.667-3.7,so.AU)})),Ro.M(o).delay(2.867).animateTo({angle:-9},3.067-2.867,so.dV).animateTo({angle:0},.633,so.dV),Ro.M(o.skew).delay(2.867).animateTo({y:-12*_F.Tde},3.067-2.867,so.dV).animateTo({y:0},.633,so.dV),io.M().delay(2.667).sequence(aa({element:o,amplitude:[.1,.4],frequency:25,duration:3.133-2.667})),Ro.M(o.scale).delay(.333).animateTo({x:U,y:U},2.667,so.rn).animateTo({y:1.15*U},3.067-3,so.WD).animateTo({y:U},3.433-3.067,so.WD).delay(3.7-3.433).animateTo({x:Jv.end[E],y:Jv.end[E]},4.667-3.7,so.Do)])}function Ia(o){const W=4.667-3.7,F=o.scale.x;return Ro.M(o.scale).delay(3.7).animateTo({x:-F},.5*W,so.rn).animateTo({x:F},.5*W,so.rn)}function la(o){const W=io.M();return W.sequence(Ro.M(o.position).delay(3).animateTo({y:15+.7*o.height},.133,so.$g)),W}function ha(o){const W=Fa.A(.75,1.25,!0),F=Fa.A(-5,5,!1)+20+o.sprite.angle;return io.M().delay(3).parallel([Ro.M(o).callback((()=>{o.visible=!0,o.alpha=0})).animateTo({alpha:1},3.067-3,so.AU).delay(3.433-3.067).animateTo({alpha:0},4.033-3.433,so.AU).callback((()=>{o.visible=!1})),Ro.M(o.scale).animateTo({x:W,y:W},.5165000000000002,so.dV).animateTo({x:1,y:1},.5165000000000002,so.dV),Ro.M(o.sprite).animateTo({angle:F},1.0330000000000004,so.dV).callback((()=>{o.sprite.angle=0}))])}function pa(o){return Ro.M(o).callback((()=>{o.visible=!0,o.start()})).animateTo({alpha:.8},.667,so.AU).delay(3.7-.667).animateTo({alpha:0},4.667-3.7,so.p_).callback((()=>{o.visible=!1,o.stop()}))}var ga=F(618736);function fa(o){const{bonusCard:W,endPosition:F,multiplierFilters:E,onReady:v,trail:a,layout:G}=o;return io.M().callback((()=>{W.bonusMultiplier.multiplierTexture.filters=[E.adjustment],E.adjustment.enabled=!1})).sequence((()=>io.M().parallel([Aa({element:W.bonusMultiplier,endPosition:F,filters:E,trail:a,layout:G}),ka({element:W})]))).delay(3.567-3).callback((()=>{W.bonusMultiplier.multiplierTexture.filters=null,E.adjustment.enabled=!1,null==v||v()}))}function Aa(o){const{endPosition:W,filters:F,element:E,trail:v,layout:a}=o,G=E.parent.toLocal({x:W.x-.5*E.width,y:W.y-.5*E.height}),L={mobilePortrait:2.8,tablet:1.5,desktop:1.5};return io.M().parallel([Ro.M(F.adjustment).delay(1).callback((()=>{F.adjustment.enabled=!0})).animateTo({brightness:50},.7,ga.A(1,0,.8,1)),Ro.M(E).delay(1.433).animateTo({alpha:0},1.7-1.433,ga.A(1,0,.8,1)),Ro.M(E.scale).delay(.667).animateTo({x:L[a],y:L[a]},1.567-.667,so.dV),Ro.M(E.multiplierTexture).delay(1.567).animateTo({alpha:0},.133,so.dV),Ro.M(E.position).delay(.667).animateTo({x:G.x,y:G.y},1.033,so.dV),Za({multiplier:E,trail:v,multiplierEndPosition:W})]).callback((()=>{F.adjustment.saturation=1,F.adjustment.brightness=1,F.adjustment.contrast=1,E.alpha=1}))}function ka(o){const{element:W}=o;return aa({element:W,amplitude:[.1,.4],frequency:25,duration:.833})}function Za(o){const{multiplier:W,trail:F,multiplierEndPosition:E}=o,v=W.parent.toGlobal(W.position),a={x:v.x,y:v.y},G={velocity:90,count:25};return io.M().delay(.667).parallel([Ro.M(G).delay(.766).animateTo({count:400},1.567-1.433,ga.A(1,0,.8,1),(o=>{F.setParticleCount(o.count)})).callback((()=>{F.explode()})),Ro.M(G).delay(.766).animateTo({velocity:2e3},1.567-1.433,ga.A(1,0,.8,1),(o=>{F.setVelocity(o.velocity)})),Ro.M(a).callback((()=>{F.setVelocity(G.velocity),F.setParticleCount(G.count),F.setEmitterPosition(a),F.alpha=1,F.visible=!0,F.play()})).animateTo({x:E.x,y:E.y},1.033,so.dV,(o=>{F.setEmitterPosition(o)})),io.M().delay(3.567).callback((()=>{F.visible=!1,F.alpha=0,F.stop()}))])}function Pa(o){const{bonusCard:W,pendingCards:F,currentCardEndPosition:E,screenBottomPosition:v}=o;return io.M().sequence((()=>io.M().delay(.567).parallel([ya({card:W,endPosition:E}),za({cards:F,position:v})])))}function ya(o){const{card:W,endPosition:F}=o,E=W.getCardBounds(),v=W.parent.toLocal({...F,y:F.y-.5*E.height});return io.M().parallel([Ro.M(W.position).animateTo({x:v.x,y:v.y},.833,so.ME)]).callback((()=>W.updateChipPlaceholderPosition()))}function za(o){const{cards:W,position:F}=o,E=[];for(let o=0;o<W.length;o++){const v=W[o],a=v.parent.toLocal({...F,y:F.y+.7*v.getCardBounds().height});E.push(Ro.M(v.position).delay(.066*o).animateTo({y:a.y},.833,so.ME))}return io.M().parallel(E)}function xa(o){const{bonusCard:W,pendingCardsPosition:F,pendingCards:E}=o;return io.M().sequence((()=>io.M().parallel([Na({card:W}),ea(E,F)])))}function Na(o){const{card:W}=o;return io.M().parallel([Ro.M(W.scale).animateTo({x:0,y:0},.833,so.ME),Ro.M(W).animateTo({alpha:0},.667,so.ME),aa({element:W,amplitude:[.1,.4],frequency:25,duration:.833})])}function ea(o,W){const F=io.M();if(0===o.length)return F;const E=[],v=o[0].parent.toLocal({x:W.x,y:W.y});for(let W=0;W<o.length;W++){const F=o[W];E.push(io.M().delay(.06699999999999995*W).parallel([Ro.M(F.position).animateTo({y:v.y},.8339999999999999,so.rn)]))}return F.delay(1.833).parallel(E)}function ta(o){const{customTicker:W=_F.RvI.shared,anim:F,repeat:E,dispose:v}=o;return Jo.l({ticker:o=>{const F=()=>{o(W.deltaMS)};return W.add(F),()=>W.remove(F)},anim:F,repeat:E,dispose:v})}var ma=F(293205);const ra={[rE.$i.CashHunt]:zo.e.CashHuntResultMultiplier,[rE.$i.CrazyTime]:zo.e.CrazyBonusResultMultiplier,[rE.$i.Pachinko]:zo.e.PachinkoResultMultiplier,[rE.$i.CoinFlip]:zo.e.CoinFlipResultMultiplier};class Ba extends _F.mcf{constructor(){super(),this.stopAnimatables=[],this.name="FlyingChips"}destroy(o){this.stopAnimations(),super.destroy(o)}stopAnimations(){for(var o;this.stopAnimatables.length;)null===(o=this.stopAnimatables.pop())||void 0===o||o()}flyChips(o,W){const F=[],E=sF.A.getSingleton(W);return o.forEach((o=>{const W=function(o,W){const F=new _F.kxk(W),{id:E,from:v,chipSize:a}=o;return F.name=E,F.width=a.width,F.height=a.height,F.anchor.set(.5),F.position.copyFrom(v),F}(o,E.getChipTexture(o.amount));this.addChild(W);const v=this.toGlobal(o.to);F.push(Ro.M(W).animateTo({...v,alpha:o.withFadeOut?0:1},So.rv(o.duration),so.dV).onDispose((()=>{W.destroy()})))})),new Promise((o=>{this.stopAnimatables.push(ta({anim:io.M().parallel(F).onDispose(o)}))}))}}class ja{dispose(){this.renderable.destroy({children:!0})}setVisible(o){this.renderable.visible=o}}class Va extends ja{get renderable(){return this.flyingChips}constructor(){super(),this.flyingChips=new Ba,this.renderable.interactiveChildren=!1}animateFlyingChips(o,W){if(!o.length)return void this.flyingChips.stopAnimations();const F=function(o,W){return o.filter((o=>!W.getChildByName(o.id)))}(o,this.flyingChips);return F.length?this.flyingChips.flyChips(F,W).then((()=>o)):void 0}}function wa(o,W){const F=o.betSpot.getGlobalBetSpot(),E=io.M().callback((()=>{o.lottoCardFrame.setVisibleFrame("withGlobal"),o.cardControl.toggleGlobalPlaceholder.visible=!0,o.betSpot.applyStyle(o.cardMode,!0),W||(o.globalStyleMask.animateParticles(),o.globalStyleMask.globalMask.visible=!0,o.lottoCardFrame.withGlobalMultiplierBase.mask=o.globalStyleMask.globalMask,o.cardControl.toggleGlobalPlaceholder.mask=o.globalStyleMask.globalMask,o.lottoCardFrame.withGlobalWinContainer.mask=o.globalStyleMask.globalMask,F&&(F.mask=o.globalStyleMask.globalMask))})).parallel([Ro.M(o.globalStyleMask.position).animateTo(o.globalStyleMask.endPosition,.93),Ro.M(o.globalStyleMask.particleContainer).animateTo({alpha:1},.15).delay(.75).animateTo({alpha:0},.93-.9),Ro.M(o.lottoCardFrame.multiCardWinBase).animateTo({alpha:0},.93),Ro.M(o.lottoCardFrame.freeCardWinBase).animateTo({alpha:0},.93)]).callback((()=>{o.lottoCardFrame.multiCardBase.visible=!1,o.lottoCardFrame.freeSpaceBase.visible=!1,o.lottoCardFrame.multiCardWinBase.visible=!1,o.lottoCardFrame.freeCardWinBase.visible=!1,o.lottoCardFrame.multiCardWinBase.alpha=1,o.lottoCardFrame.freeCardWinBase.alpha=1,W||(o.globalStyleMask.stopParticles(),o.globalStyleMask.reset(),o.lottoCardFrame.withGlobalMultiplierBase.mask=null,o.cardControl.toggleGlobalPlaceholder.mask=null,o.lottoCardFrame.withGlobalWinContainer.mask=null,F&&(F.mask=null))}));Jo.l({anim:E}),W&&E.fastForward()}const Ka=v.PA((({app:o})=>{const W=G.Pj(),F=l.useCallback((o=>{W.betting.updateBetSpotValue(o,W.abstractGame.betValue)}),[W.abstractGame,W.betting]),v=l.useCallback(((o,F,E)=>{W.lottoGame.setCardMode(o,F,E)}),[W.lottoGame]),a=l.useMemo((()=>({[rE.$i.CoinFlip]:W.coinFlip,[rE.$i.CashHunt]:W.cashHunt,[rE.$i.Pachinko]:W.pachinko,[rE.$i.CrazyTime]:W.crazyTime})),[W.coinFlip,W.cashHunt,W.pachinko,W.crazyTime]),L=l.useMemo((()=>new ME({layoutMode:W.device.layoutMode,assets:W.assets,setCardModeCallback:v,updateBetsCallback:F,setChipPlaceholder:o=>{W.ui.placeholders.setChipPlaceholder({...o,isBonusLayout:!1})},soundStore:W.sound,bonusGameStores:a,setLottoCardsReference:W.ui.references.setLottoCardsReference,setBonusCardsReferences:W.ui.references.setLottoBonusCardsReference})),[W.device.layoutMode,W.ui.placeholders,W.assets,v,F,W.sound,a,W.ui.references.setLottoCardsReference,W.ui.references.setLottoBonusCardsReference]),U=l.useMemo((()=>new Yv({layoutMode:W.device.layoutMode,setCardReferences:o=>{W.ui.references.setBonusCardsReference(o)},store:W})),[W]),I=l.useMemo((()=>{const o=new uv(W.assets);return W.ui.references.setBonusCardMultiplierTrailReference(o),o}),[W]);l.useEffect((()=>{const o=new $v(W.assets);return W.ui.references.setBonusCardGodRaysReference(o),()=>{o.destroy()}}),[W.assets,W.ui.references]),l.useEffect((()=>()=>{W.ui.references.setBonusCardsReference(null),W.ui.references.setBonusCardGodRaysReference(null),W.ui.references.setBonusCardMultiplierTrailReference(null)}),[W]),l.useEffect((()=>(o.stage.removeChildren(),o.stage.addChild(L),o.stage.addChild(I),o.stage.addChild(U),()=>{o.destroy(!0,{children:!0})})),[L,o,I,U]),window.autoTestsApi&&window.autoTestsApi.lottoGame&&(window.autoTestsApi.lottoGame.app=o,window.autoTestsApi.lottoGame.lottoGameBetsSpotsContainer=L.getLottoCards().map((([o])=>[o.betSpot,o.cardIndex])),window.autoTestsApi.lottoGame.lottoCardToggleContainer=L.getLottoCards().map((([o])=>o.cardControl)),window.autoTestsApi.lottoGame.bonusBetSpotsContainer=L.getBonusCards().map((([o])=>[o.betSpot,o.bonusId]))),l.useLayoutEffect((()=>{if(U){const{canvasScale:o}=JE.w(W.abstractGame.gameDimensions,W.device.layoutMode,W.abstractGame.isFullscreen);U.scale.set(o)}}),[U,W.abstractGame.gameDimensions,W.abstractGame.isFullscreen,W.device.layoutMode]),function(o,W,F){l.useEffect((()=>{W.game.phase===Uo.Qc.Resolved&&W.game.setIsReturningFromBonusGame(o.isBonusGameInProgress),W.game.phase===Uo.Qc.BetsOpen&&W.game.prevPhase===Uo.Qc.Resolved&&o.resetGame(!o.isBonusGameInProgress&&!W.restore.isRestoring,W.betting.previousInactiveCards.length)}),[W.restore,W.game.phase,o,W.game,W.betting,W.game.prevPhase]),l.useEffect((()=>{W.youWin.showGameResult&&W.game.animationsDone&&W.youWin.payout>0&&o.animateWonMultipliers()}),[o,W.youWin.showGameResult,W.game.animationsDone,W.youWin.payout]),l.useEffect((()=>{o.isRestore&&o.resetGame(!1,W.betting.getInactiveLottoCards().length)}),[o,W.betting,W.abstractGame.gameId]),l.useEffect((()=>{o.setIsBetsOpen(W.game.phase===Uo.Qc.BetsOpen),o.updateBetSpot(W.ui.betSpots.betSpotValues,W.ui.betSpots.isValuesRestored,W.ui.betSpots.isChipAnimated)}),[o,W.ui.betSpots.betSpotValues,W.game.phase,W.ui.betSpots.isValuesRestored,W.ui.betSpots.isChipAnimated]),l.useEffect((()=>{o.resize(W.abstractGame.gameDimensions,W.abstractGame.isFullscreen),o.updateChipPlaceholderPositions(),W.device.setLottoContainerRect(o.getLottoContainerRect()),W.device.setLottoContainerPosition(o.getGlobalPosition())}),[o,W.abstractGame.gameDimensions,W.device,W.abstractGame.isFullscreen]),l.useEffect((()=>{o.updateLottoCardNumbers(W.lottoGame.gridNumbers)}),[o,W.lottoGame.gridNumbers]),l.useEffect((()=>{o.updateBonusCardNumbers(W.lottoGame.bonusCardNumbers,W.betting.getInactiveBonusCards())}),[o,W.lottoGame.bonusCardNumbers,W.betting]),l.useEffect((()=>{W.game.phase===Uo.Qc.BetsOpen||W.betting.isNoBets||(o.showGlobalMultipliers(W.lottoGame.globalMultipliers),o.showDrawnBalls(W.lottoGame.drawnBalls,W.lottoGame.bonusFreeSpaces,W.betting.getInactiveLottoCards(),W.betting.getInactiveBonusCards(),(o=>W.game.setAreGlobalFlyingAnimationsDone(o)),W.lottoGame.drawnBalls.length===BE.x))}),[o,W.betting,W.game.phase,W.game,W.lottoGame.drawnBalls,W.lottoGame.globalMultipliers,W.lottoGame.bonusFreeSpaces]),l.useEffect((()=>{const F=W.game.phase===Uo.Qc.Resolved&&0===W.lottoGame.gridNumbers.card1.length;o.showAllElements(W.game.isLottoPhase&&!F&&o.areCardsRendered);const E=rE.rU[W.game.phase];o.showOnlyOneBonusCard(E)}),[o,o.areCardsRendered,W.game.isLottoPhase,W.game.phase,W.lottoGame]),l.useEffect((()=>{o.setCardModes(W.lottoGame.cardModes,o.isRestore)}),[o,W.lottoGame.cardModes]),l.useEffect((()=>{o.setFreeSpaces(W.lottoGame.freeSpaces,W.lottoGame.bonusFreeSpaces)}),[o,W.lottoGame.freeSpaces,W.lottoGame.bonusFreeSpaces]),l.useEffect((()=>{o.setMultipliers(W.lottoGame.gridMultipliers,W.lottoGame.lineMultipliers)}),[o,W.lottoGame.gridMultipliers,W.lottoGame.lineMultipliers]),l.useEffect((()=>{o.showWinLines(W.lottoGame.winLines,W.betting.getInactiveLottoCards(),((o,F)=>W.game.setAreLottoAnimationsFinished(o,F)),W.lottoGame.drawnBalls.length===BE.x)}),[o,W.betting,W.lottoGame.winLines,W.game,W.lottoGame.drawnBalls]),l.useEffect((()=>{(async()=>{W.game.phase!==Uo.Qc.BetsOpen?o.setIsToggleActiveForAllCards(!1):o.setIsToggleActive(W.betting.isModeToggleAvailable),W.game.phase===Uo.Qc.BetsOpen&&o.startLightRayAnimation()})()}),[W.game.phase,o,W.lottoGame.drawnBalls,W.betting.isModeToggleAvailable,W.ui.betSpots.betSpotValues]),l.useEffect((()=>{(async()=>{const E=W.game.phase,v=W.betting.getInactiveLottoCards();W.betting.setPreviousInactiveCards(v);const a=W.betting.getInactiveBonusCards(),G=o.isRestore;if(E!==Uo.Qc.BetsOpen){if((E===Uo.Qc.BetsClosed||G)&&o.updateCardsPositions({isRestore:G}),E===Uo.Qc.BallDrawing||E===Uo.Qc.Resolved&&G){const F=v.length<Wv,E=a.length<XF.gl;a.forEach((W=>{o.showInactiveBonusGrid(W)})),v.forEach((W=>{o.showInactiveLottoGrid(W,G)})),G||W.sound.triggerEvent(YE.PZ.BuildPhaseStart);const L=o.getLottoCards();W.sound.setMultiplierData(L,G);for(const[o,W]of L)o.animateSymbolReveal(G,v.includes(W));for(const[W,v]of o.getBonusCards())W.animateSymbolReveal(G,F||E,a.includes(v));if(F||E){await XE.u({timeInMilliseconds:6e3,immediate:G});const F=v.length;!G&&F>0&&W.sound.triggerEvent(YE.PZ.CardsRemoved,F),await Promise.all(v.map((W=>o.hideInactiveLottoCard(W,!G)))),o.updateCardsPositions({inactiveCardIndexes:v,isRestore:G,isTransition:!1,shouldScale:!0})}G||W.sound.triggerEvent(YE.PZ.DrawPhaseStart)}}else o.updateCardsPositions({isRestore:G,isTransition:!0,isReturningFromBonus:W.game.isReturningFromBonusGame,canvasDimensions:{width:F.screen.width,height:F.screen.height}})})()}),[W.game.phase,o,W.betting,W.game,W.sound,F,W.autoTests.showAnimations,W.lottoGame.gridMultipliers,W.lottoGame.lineMultipliers]),l.useEffect((()=>{const F={coinFlip:W.coinFlip.slotMultiplier,cashHunt:W.cashHunt.slotMultiplier,pachinko:W.pachinko.slotMultiplier,crazyTime:W.crazyTime.slotMultiplier};o.updateSlotMultipliers(F)}),[o,W.cashHunt.slotMultiplier,W.coinFlip.slotMultiplier,W.crazyTime.slotMultiplier,W.pachinko.slotMultiplier]),l.useEffect((()=>{o.isRestore=W.restore.isRestoring}),[o,W.restore.isRestoring])}(L,W,o),function(o,W){const F=l.useMemo((()=>new Va),[]);l.useEffect((()=>{var W;null===(W=F.animateFlyingChips(o.ui.flyingChips.flyingChips,o.abstractGame.chipColors))||void 0===W||W.then((W=>{o.ui.flyingChips.removeFlyingChips(W)}))}),[F,o.ui.flyingChips.flyingChips,o.abstractGame.chipColors,o.ui.flyingChips]),l.useEffect((()=>(W.stage.addChild(F.renderable),()=>{F.dispose()})),[W,F]),l.useEffect((()=>{const{phase:W}=o.game;F.setVisible(W===Uo.Qc.BetsOpen||Uo.so.includes(W)||W===Uo.Qc.Resolved)}),[F,o.game,o.game.phase])}(W,o),function(o,W){const F=Io.Z(o.lottoGame.filledBonusCards);l.useEffect((()=>{if(null!==o.ui.references.bonusCardsReference)for(const[W,F]of Object.entries(o.ui.references.bonusCardsReference)){const E=o.bonus.slotMultipliers[W];E&&E>1&&F.showGoldBorders()}}),[o.ui.references.bonusCardsReference,o.bonus.slotMultipliers,W]),l.useEffect((()=>{if(null===o.ui.references.lottoGameBonusCardsReference)return;const F=[],E=Object.entries(o.ui.references.lottoGameBonusCardsReference);for(const[v,a]of E){const E=o.bonus.slotMultipliers[v];if(a.updateSlotMultiplier(E),a.hideGoldBorders(),a.bonusMultiplier.multiplierTexture.alpha=0,void 0===E||E<=1)continue;const G=o.betting.getInactiveBonusCards().includes(v),L=_v(a,G,W);if(F.push(Jo.l({anim:L})),W)L.fastForward();else{const W=G?YE.PZ.BuildBonusMultiplierObserver:YE.PZ.BuildBonusMultiplier,F=o.sound.getEcasBonusGame(v);o.sound.triggerEvent(W,F)}}return()=>{for(const o of F)o()}}),[o.ui.references.lottoGameBonusCardsReference,o.bonus.slotMultipliers]),l.useEffect((()=>{if(null===o.ui.references.lottoGameBonusCardsReference||W)return;const E=Object.entries(o.ui.references.lottoGameBonusCardsReference);for(const[W,v]of E){const E=o.betting.getInactiveBonusCards().includes(W),a=o.bonus.slotMultipliers[W];E||void 0===a||a<=1||(null==F?void 0:F[W])!==o.lottoGame.filledBonusCards[W]&&Jo.l({anim:io.M().callback((()=>{v.multiplierAnimatable.startAnimation()})).sequence(cv(v)).callback((()=>{v.multiplierAnimatable.reset()}))})}}),[o.ui.references.lottoGameBonusCardsReference,o.lottoGame.filledBonusCards])}(W,L.isRestore),function(o,W,F,E){const v=Io.Z(W);l.useEffect((()=>{if(null!==o)for(const[a,G]of Object.entries(W)){const W=o[a];if(G>1&&(void 0===v||1===v[a])&&(wa(W,F),!F)){const o=E.getEcasCardId(a);E.triggerEvent(YE.PZ.DaubHitMulti,o)}}}),[o,W])}(W.ui.references.lottoCardsReference,W.lottoGame.globalMultipliers,L.isRestore,W.sound),function(o,W,F){l.useRef(F.bonus.slotMultipliers).current=F.bonus.slotMultipliers;const E=l.useRef(F.bonus.currentBonus);E.current=F.bonus.currentBonus,l.useEffect((()=>{F.game.phase!==Uo.Qc.BetsOpen&&F.game.phase!==Uo.Qc.Init||W.resetBonusGame(!0)}),[F.game.phase,W]),l.useEffect((()=>{const o=F.betting.getInactiveBonusCards();Uo.R2(F.game.phase)&&o.forEach((o=>{W.showInactiveBonusGrid(o)}))}),[W,F.betting,F.game.phase]),l.useEffect((()=>{W.updateSlotMultipliers(F.bonus.slotMultipliers)}),[W,F.bonus.slotMultipliers,F.restore.isRestoring]),l.useEffect((()=>{W.updateBetValues(F.ui.betSpots.betSpotBonusValues,F.ui.betSpots.isChipAnimated)}),[W,F.ui.betSpots.betSpotBonusValues,F.ui.betSpots.isChipAnimated,F.restore.isRestoring]),l.useEffect((()=>{W.updateBonusCardNumbers(F.lottoGame.bonusCardNumbers,F.betting.getInactiveBonusCards())}),[W,F.lottoGame.bonusCardNumbers,F.restore.isRestoring,F.betting]),l.useEffect((()=>{W.showDrawnBalls(F.lottoGame.drawnBalls)}),[W,F.betting,F.lottoGame.drawnBalls,F.restore.isRestoring]),l.useEffect((()=>{W.setFreeSpaces(F.lottoGame.bonusFreeSpaces)}),[W,F.lottoGame.bonusFreeSpaces,F.restore.isRestoring]);const v=l.useCallback((o=>{const W=E.current;W&&W===rE.$i.CoinFlip&&F.coinFlip.setIsVisible(!0);const v=W?F.bonus.getSlotMultiplier(W):void 0;(!v||v<=1)&&F.ui.bonusTransition.setStage(ma.fA.Park,!o)}),[F]),a=l.useCallback((o=>{F.ui.bonusTransition.stage.stage===ma.fA.WheelMultiplier&&F.ui.bonusTransition.setStage(ma.fA.Park,!o)}),[F]),G=l.useCallback((()=>{W.setStartPosition(o.getBonusCards())}),[W,o]),L=l.useCallback((o=>{F.ui.bonusTransition.stage.stage===o&&F.ui.bonusTransition.setCurrentStageDone()}),[F]),U=l.useCallback(((o,W)=>{const E=F.sound.getEcasBonusGame(o),v=W?YE.PZ.BonusTicketAnimationObserver:YE.PZ.BonusTicketAnimation;F.sound.triggerEvent(v,E)}),[F]);!function(o){const{bonusCards:W,lightRays:F,stage:E,currentBonus:v,pendingBonuses:a,gameDimensions:G,onFlyInReady:L,onMultiplierFlyReady:U,onSetup:I,onStageReady:h,multiplierTrail:p,layout:g,playFlyInSound:f,isRestoring:A,isPlayerQualified:k,isNoBets:Z}=o,P=Io.Z(G),y=l.useRef(P);y.current=P;const z=Io.Z(A),x=l.useRef(z);x.current=z;const N=l.useRef(a);N.current=a;const e=l.useContext(GW.so),t=l.useRef(ma.fA.None),m=l.useRef(k);m.current=k;const r=l.useMemo((()=>({adjustment:new oE.MR})),[]),B=l.useMemo((()=>({upper:new sv,bottom:new sv})),[]);l.useEffect((()=>{var o;if(p){const W=null!==(o=G.reverseScale)&&void 0!==o?o:1;p.setSystemSize(G.width/W,G.height/W)}}),[G,p]),l.useEffect((()=>{var o;const a=t.current===E.stage,l=y.current!==G||x.current!==A;if(!W||!F||!p)return;if(E.stage===ma.fA.None)return void(t.current=ma.fA.None);if(a&&!l||!v)return;const k=E.done||a,P=io.M();t.current===ma.fA.None&&I();const z=ma.Xr.indexOf(E.stage);for(let E=0;E<z+1;E++){let a;const I=E===z;switch(ma.Xr[E]){case ma.fA.FlyIn:{let o=!1;const E=N.current.map((o=>W[o])),U=Object.values(W).filter((W=>{const F=!N.current.includes(W.bonusId)&&W.bonusId!==v;return W.bonusId===v&&F&&(o=!0),F})),l=e.getRect({type:zo.e.BonusTransitionFlyInPoint},G),h=e.getRect({type:zo.e.BonusTransitionMiddlePoint},G),p=e.getRect({type:zo.e.BonusTransitionPendingBonusesParkedPoint},G),A=()=>{k||f(v,o)},P=()=>{L(k)};a=m.current?La({currentCard:W[v],activeCards:E,inactiveCards:U,lightRays:F,flyInPosition:{x:l.left,y:l.top},middlePosition:{x:h.left,y:h.top},pendingBonusesParkedPosition:{x:p.left,y:p.top},sparkles:B,onReady:I?P:void 0,onStart:I?A:void 0,layout:g}):oa({currentCard:W[v],activeCards:E,inactiveCards:U,flyInPosition:{x:l.left,y:l.top},middlePosition:{x:h.left,y:h.top},pendingBonusesParkedPosition:{x:p.left,y:p.top},onReady:I?P:void 0,onStart:I?A:void 0,layout:g,isNoBets:Z});break}case ma.fA.WheelMultiplier:{const o=e.getRect({type:ra[v]},G),F=()=>{U(k)};a=fa({bonusCard:W[v],endPosition:{x:o.left,y:o.top},multiplierFilters:r,trail:p,onReady:I?F:void 0,layout:g});break}case ma.fA.Park:{const F=e.getRect({type:zo.e.BonusTransitionParkedPoint},G),E=null!==(o=G.reverseScale)&&void 0!==o?o:1;a=Pa({bonusCard:W[v],pendingCards:N.current.map((o=>W[o])),currentCardEndPosition:{x:F.left,y:F.top},screenBottomPosition:{x:G.width/E*.5,y:G.height/E}});break}case ma.fA.Result:{const o=e.getRect({type:zo.e.BonusTransitionPendingBonusesParkedPoint},G);a=xa({bonusCard:W[v],pendingCardsPosition:{x:o.left,y:o.top},pendingCards:N.current.map((o=>W[o]))});break}}a&&(E!==z?(a.activate(),a.fastForward()):P.sequence(a))}P.callback((()=>{h(E.stage)}));const j=ta({anim:P});return k&&P.fastForward(),t.current=E.stage,()=>{P.fastForward(),P.dispose(),j()}}),[p,E,v,e,W,F,B,r,L,U,G,h,I,g,f,A,Z]),l.useEffect((()=>()=>{B.upper.destroy(),B.bottom.destroy()}),[B,p])}({bonusCards:F.ui.references.bonusCardsReference,lightRays:F.ui.references.bonusCardGodRaysReference,multiplierTrail:F.ui.references.bonusCardMultiplierTrailReference,currentBonus:F.bonus.currentBonus,pendingBonuses:F.bonus.pendingBonuses,stage:F.ui.bonusTransition.stage,gameDimensions:F.abstractGame.gameDimensions,onMultiplierFlyReady:a,onFlyInReady:v,onSetup:G,onStageReady:L,layout:F.device.layoutMode,playFlyInSound:U,isRestoring:F.restore.isRestoring,isPlayerQualified:F.bonus.isPlayerQualifiedForCurrentBonus,isNoBets:F.betting.isNoBets})}(L,U,W);const h=W.game.phase===Uo.Qc.CashHunt;return E.jsx("div",{style:{width:"100%",height:"100%",position:"absolute",pointerEvents:"none"},children:E.jsx(nv,{application:o,style:{pointerEvents:h?"none":"auto"}})})})),Ta=[OF.Dc.InitCommon,OF.Dc.BonusGameCommon],da=v.PA((()=>{const o=G.Pj(),W=l.useMemo((()=>{const W=function(o){const{application:W}=function(o,W=!0){const F=new _F.lgM({backgroundColor:1122867,...o});!function(o){const W=o.renderer.context.webGLVersion;vE.KC(W)}(F);const E=new dv;F.ticker=E,E.start(),jv.ui("__PIXI__",Tv);const v=F.destroy.bind(F);return F.destroy=(...o)=>{E.dispose(),jv.Xv("__PIXI__"),v(...o)},W&&Vv.c(F),{application:F}}({backgroundAlpha:0,resolution:o.resolution,autoDensity:!0});return{application:W}}({resolution:_E()}).application;o.assets.setPixiApp(W),o.assets.loadDabSpillAnimation(),o.assets.loadRobotoSlabFont();const F=[];return F.push(o.device.isPortrait?OF.Dc.InitPortrait:OF.Dc.InitLandscape),o.betting.playerBetOnBonusCard&&F.push(o.device.isPortrait?OF.Dc.AnimationsPortrait:OF.Dc.AnimationsLandscape),o.assets.load(Ta.concat(F)),W}),[]);return l.useEffect((()=>{delete window.__screwball_storybook_pixi_app__}),[]),o.assets.initAssetsLoaded&&W?E.jsx(l.Suspense,{children:E.jsx(Ka,{app:W})}):null})),na=v.PA((()=>{const o=G.Pj(),[W,F]=l.useState(!1),[v,a]=l.useState(!1),[L,U]=l.useState(!1),[I,h]=l.useState(!1),p=o.abstractGame.gameDimensions,g="mobilePortrait"===o.device.layoutMode,f=o.game.phase===Uo.Qc.BetsOpen,{canvasScale:A}=JE.w(p,o.device.layoutMode,o.abstractGame.isFullscreen),k=o.device.lottoContainerRect,Z=o.device.lottoContainerPosition,{isBetOnAllBonusAvailable:P,isBetOnAllLottoAvailable:y,isBetOnAllLottoMaxLimit:z,isBetOnAllBonusMaxLimit:x}=o.betting,N=g?Z.y-201*A:Z.y,e=g?Z.x-174*A:Z.x-382*A;return E.jsxs(E.Fragment,{children:[E.jsxs(ua,{height:k.height*A,width:k.width*A,top:N,left:e,children:[E.jsx(Bv,{canvasScale:A,isBonus:!1,disabled:!y,hover:W,mouseDown:L}),E.jsx(Bv,{canvasScale:A,isBonus:!0,disabled:!P,hover:v,mouseDown:I})]}),E.jsx(da,{}),E.jsxs(ua,{height:k.height*A,width:k.width*A,top:N,left:e,children:[E.jsx(mv,{isBonus:!1,isBetsOpen:f,disabled:!y,isMaxLimit:z,onHover:F,onMouseDown:U}),E.jsx(mv,{isBonus:!0,isBetsOpen:f,disabled:!P,isMaxLimit:x,onHover:a,onMouseDown:h})]})]})})),ua=({children:o,height:W,width:F,top:v,left:a})=>E.jsx("div",{style:{height:`${W}px`,width:`${F}px`,top:`${v}px`,left:`${a}px`,pointerEvents:"none",position:"absolute",zIndex:0},children:o});var $a=F(623763);const Ya=({isPhone:o,isVisible:W,className:F})=>E.jsx("div",{className:F,children:E.jsx($a.b,{hidden:!W,isPhone:o,children:E.jsx(p.q,{children:"trafficlight.waitForNextGame2"})})}),Qa=[Uo.Qc.BetsOpen,Uo.Qc.Resolved],Ca=v.PA((o=>{const{game:W,abstractGame:F,device:v,youWin:a}=G.Pj(),L=!Qa.includes(W.phase)&&!F.totalBet,U=W.phase===Uo.Qc.Resolved&&!a.showGameResult,I=L||U;return E.jsx(Ya,{className:o.className,isPhone:"mobilePortrait"===v.layoutMode,isVisible:I})})),qa="gameWithGradient--98a9a",ca="gameLayout--e6ad3",_a="mobile--60e10",Oa="tablet--ed6ba",Xa="trafficLight--333cc",Sa="desktop--bb518",sa="circleTimer--a158c",ia="preloadRobotoSlab--fa54f",Ra="preloadFrankRuhl--c580c",Ja=v.PA((()=>{const o=G.Pj(),{phase:W,isLottoPhase:F,isGameGradientShrinkPhase:v}=o.game,{layoutMode:a}=o.device,L="mobilePortrait"===a||"tablet"===a,U=o.abstractGame.isClassicView;return E.jsxs("div",{className:qa,children:[E.jsx(MW,{layoutMode:a,isShrinkPhase:v}),E.jsxs("div",{className:I.A(ca,{[Sa]:"desktop"===a},{[_a]:"mobilePortrait"===a},{[Oa]:"tablet"===a}),children:[L&&E.jsxs(Po.MobileSafeContainerConnected,{isRng:!1,children:[E.jsx(xo.m,{type:zo.e.BonusTransitionFlyInPoint}),E.jsx(xo.m,{type:zo.e.BonusTransitionMiddlePoint}),E.jsx(xo.m,{type:zo.e.BonusTransitionParkedPoint}),E.jsx(xo.m,{type:zo.e.BonusTransitionPendingBonusesParkedPoint}),E.jsx(xo.m,{type:zo.e.CrazyBonusChosenFlapper})]}),!L&&E.jsxs(E.Fragment,{children:[E.jsx(xo.m,{type:zo.e.BonusTransitionFlyInPoint}),E.jsx(xo.m,{type:zo.e.BonusTransitionMiddlePoint}),E.jsx(xo.m,{type:zo.e.BonusTransitionParkedPoint}),E.jsx(xo.m,{type:zo.e.BonusTransitionPendingBonusesParkedPoint}),E.jsx(xo.m,{type:zo.e.CrazyBonusChosenFlapper})]}),U&&E.jsx(qF,{}),W===Uo.Qc.CashHunt&&E.jsx(AF,{}),E.jsx(na,{}),F&&!U&&E.jsxs(E.Fragment,{children:[E.jsx(YW.y,{}),E.jsx("div",{className:I.A(sa,{[Sa]:"desktop"===a},{[_a]:"mobilePortrait"===a},{[Oa]:"tablet"===a}),children:W===Uo.Qc.BetsOpen&&E.jsx(yo.u,{})})]}),L&&E.jsxs(Po.MobileSafeContainerConnected,{isRng:!1,children:[W===Uo.Qc.CoinFlip&&E.jsx($W,{}),W===Uo.Qc.CrazyTime&&E.jsx(dF,{isLandscape:"tablet"===a})]}),!L&&E.jsxs(E.Fragment,{children:[W===Uo.Qc.CoinFlip&&E.jsx($W,{}),W===Uo.Qc.CrazyTime&&E.jsx(dF,{isLandscape:!1})]}),E.jsx(lW,{}),E.jsx(Ca,{className:I.A(Xa,{[Sa]:"desktop"===a},{[_a]:"mobilePortrait"===a},{[Oa]:"tablet"===a})}),E.jsx(sW,{})]}),E.jsx("span",{className:ia}),E.jsx("span",{className:Ra})]})})),Da="hidden--4fcc8",Ma="show--0fc75",Ha="gameLogo--73510",ba="isLargeStyle--37b66",oG=v.PA((()=>{const o=G.Pj(),W=!o.game.isLottoPhase||0===o.lottoGame.drawnBalls.length;return E.jsxs(E.Fragment,{children:[E.jsx("img",{className:I.A(Ha,{[ba]:W}),src:vo}),o.game.isLottoPhase?E.jsx("span",{className:I.A(Da,{[Ma]:!W}),children:E.jsx(YW.y,{})}):null]})})),WG="winnerMultiplier--f4ba1",FG="multiplierText--7eb43",EG=({multiplier:o})=>o?E.jsx("span",{className:WG,"data-role":"winner-list-multiplier",children:E.jsx(Xo,{value:o,sign:"x",applyInnerStroke:!1,className:FG})}):null;var vG=F(170877),aG=F(707669),GG=F(528981),LG=F(99210);function UG(o,W){let F=o;if(void 0===o)if(W.rawConfig){const o=aG.t(W);F={payoutLimit:o.scbPayoutLimit(),tableMinLimit:o.minTableLimit(),tableMaxLimit:o.maxTableLimit(),volatilityIndex:o.volatilityIndex(),gameSubTranslationKey:o.gameSubTranslationKey()}}else F={payoutLimit:0,tableMinLimit:0,tableMaxLimit:0,volatilityIndex:0,gameSubTranslationKey:void 0};return F}const IG=async(o,W,{customConfig:v,currencySymbol:G,customizableButton:L})=>{const{GameObjective:I,GameRules:l,Payouts:h,PlaceBets:p,ReturnToPlayer:f}=await F.e(20796).then(F.bind(F,311507)),A=UG(v,W),k=A.gameSubTranslationKey,Z=o!==vG.OD.Desktop&&W.useRedesignedDrawerHelp(),P=W.getTableName(),y=W.getChipAmounts(),z=a.ej(A.payoutLimit,{currencySymbol:G});return[{id:"gameObjective",title:U.T("help.gameObjective.title"),content:E.jsx(I,{})},{id:"gameRules",title:U.T("help.gameRules.title"),content:E.jsx(l,{gameSubTranslationKey:k,platform:o,currencySymbol:G,isRtlDirection:g.sU()})},{id:"payouts",title:U.T("help.payouts.title"),content:E.jsx(h,{isHelpRedesigned:Z,maxPayout:z})},{id:"returnToPlayer",title:U.T("help.returnToPlayer.title"),content:E.jsx(f,{isHelpRedesigned:Z,volatilityIndex:A.volatilityIndex})},{id:"placeBets",title:U.T("help.placeBets.title"),content:E.jsx(p,{tableName:P,tableMaxLimit:A.tableMaxLimit,tableMinLimit:A.tableMinLimit,currencySymbol:G,platform:o,chipAmounts:y,customizableButton:L})},GG.t.AutoplayApi,GG.t.Chat,GG.t.GameNumber,GG.t.Sound,GG.t.GameHistory,GG.t.Settings,GG.t.InformazioniAams,GG.t.DepositAndWithdraw,GG.t.ResponsibleGaming,GG.t.ErrorHandling,GG.t.DisconnectionPolicy,GG.t.AutomatedDecision,GG.t.MoreGames,GG.t.MultiGamePlay,GG.t.Home,GG.t.ShortcutKeys]},lG=async({settings:o,currencySymbol:W,customizableButton:v})=>{const{GameObjective:G,GameRules:L,Payouts:I,ReturnToPlayer:l,PlaceBets:h}=await F.e(20796).then(F.bind(F,311507)),p=UG(void 0,o),f=p.gameSubTranslationKey,A=o.DeviceSupport.PLATFORM,k=A!==vG.OD.Desktop&&o.useRedesignedDrawerHelp(),Z=o.getTableName(),P=o.getChipAmounts(),y=a.ej(p.payoutLimit,{currencySymbol:W});return{customChapters:{gameDetails:[{chapters:[{id:"gameObjective",title:U.T("help.gameObjective.title"),content:E.jsx(G,{})},{id:"gameRules",title:U.T("help.gameRules.title"),content:E.jsx(L,{gameSubTranslationKey:f,platform:A,currencySymbol:W,isRtlDirection:g.sU()})},{id:"payouts",title:U.T("help.payouts.title"),content:E.jsx(I,{isHelpRedesigned:k,maxPayout:y})},{id:"returnToPlayer",title:U.T("help.returnToPlayer.title"),content:E.jsx(l,{isHelpRedesigned:k,volatilityIndex:p.volatilityIndex})},{id:"placeBets",title:U.T("help.placeBets.title"),content:E.jsx(h,{tableName:Z,tableMaxLimit:p.tableMaxLimit,tableMinLimit:p.tableMinLimit,currencySymbol:W,platform:A,chipAmounts:P,customizableButton:v})}]}]},filterMap:{overrideDefault:{[LG.C.Shuffling]:!1,[LG.C.SpeedMode]:!1}}}},hG={GameOverlays:Ja,HelpComponentListCreator:IG,HelpCreator:lG,LayoutBetLimitsBody:()=>E.jsx(R,{isMobile:!1}),LayoutClassicTopRightComponent:oG,LayoutImmersiveFooterLeftComponent:Go,WinnerListMultiplierComponents:{WinnerMultiplier:EG}},pG={HelpComponentListCreator:IG,HelpCreator:lG,MobileGameOverlayContainer:Ja,MobileBasicVideoWrapper:Ao,MobileMenuNavigationMap:{betLimits:oo},WinnerListMultiplierComponents:{WinnerMultiplier:EG}}},266748:(o,W,F)=>{F.d(W,{Re:()=>G,i6:()=>v,nM:()=>a,vf:()=>E});const E=5,v=2,a="RobotoSlab";var G;!function(o){o.Panama="panama"}(G||(G={}))},885470:(o,W,F)=>{F.d(W,{Bf:()=>g,DI:()=>I,Ex:()=>k,QJ:()=>h,Qk:()=>Z,X8:()=>p,XW:()=>f,d0:()=>A,sN:()=>l});var E=F(882979),v=F(9122),a=F(228174),G=F(796269),L=F(189360),U=F(425495);function I(o,W){var F,E;const v={};for(const L of G.Wn){const G=(null!==(F=o[L])&&void 0!==F?F:0)-(null!==(E=W[L])&&void 0!==E?E:0);0!==G&&(v[L]=a.GB(G,2))}return v}function l(o){const W=I(o.newBets,o.prevBets);return{type:L.U.ClientBetChip,payload:{amount:E.A(Object.values(W)),bets:W,codes:v.A(o.newBets,(o=>0!==o)),prevCodes:v.A(o.prevBets,(o=>0!==o)),type:o.type},enhancers:U.cH}}function h(o){return{type:L.U.ClientBetRejected,payload:o,enhancers:U.cH}}function p(o){return{type:L.U.ClientBetOnAllCards,payload:o,enhancers:U.cH}}function g(o){return{type:L.U.ClientBetOnAllBonuses,payload:o,enhancers:U.cH}}function f(o){return{type:L.U.ClientCardToggle,payload:o,enhancers:U.cH}}function A(o){return{type:L.U.ClientBetAccepted,payload:o,enhancers:U.cH}}function k(o){return{type:L.U.ClientBetAcceptedPartial,payload:o,enhancers:U.cH}}function Z(o){return{type:L.U.ClientPressedOnBetsOutOfBettingTime,payload:o,enhancers:U.cH}}},843415:(o,W,F)=>{F.d(W,{DE:()=>L,FB:()=>a,P4:()=>U,sn:()=>G});var E=F(189360),v=F(425495);function a(o){return{type:E.U.CashHuntAimPositionBeforeShot,payload:o,enhancers:v.$e}}function G(o){return{type:E.U.CashHuntMovement,payload:o,enhancers:v.$e}}function L(o){return{type:E.U.CashHuntShootingStarted,payload:o,enhancers:v.$e}}function U(o){return{type:E.U.CashHuntShot,payload:o,enhancers:v.$e}}},189360:(o,W,F)=>{var E;F.d(W,{U:()=>E}),function(o){o.ClientBetChip="CLIENT_BET_CHIP",o.ClientBetRejected="CLIENT_BET_REJECTED",o.ClientBetOnAllCards="CLIENT_BET_ON_ALL_CARDS",o.ClientBetOnAllBonuses="CLIENT_BET_ON_BONUSES",o.ClientCardToggle="CLIENT_CARD_TOGGLE",o.ClientBetAccepted="CLIENT_BET_ACCEPTED",o.ClientBetAcceptedPartial="CLIENT_BET_ACCEPTED_PARTIAL",o.ClientPressedOnBetsOutOfBettingTime="CLIENT_PRESSED_ON_BETS_OUT_OF_BETTING_TIME",o.ClientCrazyTimeDecisionOffer="CLIENT_CRAZYTIME_DECISION_OFFER",o.ClientCrazyTimeSelectFlapper="CLIENT_CRAZYTIME_DECISION",o.ClientBonusWinMultiplier="CLIENT_BONUS_WIN_MULTIPLIER",o.ClientCoinFlipCoinMultipliers="CLIENT_COINFLIP_COIN_MULTIPLIERS",o.CashHuntAimPositionBeforeShot="CLIENT_CASHHUNT_AIM_POSITION_BEFORE_SHOT",o.CashHuntMovement="CLIENT_CASHHUNT_SELECTED",o.CashHuntShootingStarted="CLIENT_CASHHUNT_SHOOTING_STARTED",o.CashHuntShot="CLIENT_CASHHUNT_SHOT"}(E||(E={}))},425495:(o,W,F)=>{function E(o){return{gameType:o=>({...o,gameType:"crazyballs"}),gameId:W=>({...W,gameId:o.abstractGame.gameId})}}F.d(W,{$e:()=>v,Os:()=>E,cH:()=>a});const v=["gameType","gameDimensions","channel","orientation"],a=[...v,"balance","currency","tableLimits"]},774680:(o,W,F)=>{F.d(W,{f:()=>$});var E=F(912986),v=F(784194),a=F(478128),G=F(276111),L=F(53579),U=F(769413),I=F(234341),l=F(315049),h=F(930990),p=F(45967);class g extends a.mcf{constructor(o){super(),this.props=o,this.dabSprite=null,this.spillAnimation=null,this.width=o.cellSize,this.height=o.cellSize,this.init()}show(o,W){if(this.visible=!0,!o||!this.dabSprite||!this.spillAnimation)return void W();const F=this.dabSprite,E=this.spillAnimation,v=this.dabSprite.scale.x,a=I.M().callback((()=>{F.scale.set(.4*v)})).parallel([I.M().callback((()=>{E.visible=!0,E.gotoAndPlay(0),E.onComplete=()=>{E.visible=!1}})),U.M(this.dabSprite.scale).animateTo({y:1.05*v,x:1.05*v},.12,G.am).animateTo({y:v,x:v},.065,G.am).callback((()=>{W()}))]);l.l({anim:a})}destroy(o){var W;null===(W=this.spillAnimation)||void 0===W||W.destroy(),super.destroy(o)}async init(){const{dabSprite:o,spillAnimation:W}=await this.renderDab();this.dabSprite=o,this.spillAnimation=W}async renderDab(){const o=this.props.dabSize,W=new a.mcf,F=a.kxk.from(this.props.assets.getTexture(h.xL.Dab));W.addChild(F),F.width=o,F.height=o,F.anchor.set(.5,.5),F.position.set(this.props.cellSize/2,this.props.cellSize/2);const E=1.6*o,v=(E-o)/2,G=await this.props.assets.getDabSpillAnimation(),L=G[Math.floor(Math.random()*G.length)],U=new a.Dl5(L);return U.visible=!1,U.loop=!1,U.height=E,U.width=E,U.animationSpeed=1,U.x=-v,U.y=-v,this.addChild(W,U),{spillAnimation:U,dabSprite:F}}}var f=F(893015),A=F(335914),k=F(879356),Z=F(157757);const P={loop:!1,explosiveness:!0,autoStart:!1,amount:100,emissionDelay:0,particlesPerWave:100,particle:{colors:{gradient:!1,mode:"Off",colors:["#ffffff","#F2563C"]},damping:.11956499999999999,gravityVector:[0,2e3],directionVector:[-20816681711721685e-33,20816681711721685e-33],spread:180,angularVelocity:{min:3.2608695652173916,max:11.304347826086955,curve:[]},initialRotation:{min:0,max:6.283185307179586,syncWithDirection:!1},opacity:{min:1,max:1,curve:[{point:[0,1],easing:"linear"},{point:[1,.8152173913043478],easing:"linear"}]},lifetime:{min:1,max:1.09},scale:{min:.5,max:1.5,curve:[{point:[0,.7],easing:"linear"},{point:[.3,.81],easing:"linear"},{point:[1,0],easing:"linear"}]},initialVelocity:{min:50,max:2e3},linearAcceleration:{min:-200,max:50,curve:[{point:[0,1.71],easing:"linear"},{point:[.29,1.87],easing:"linear"},{point:[1,1],easing:"linear"}]},tangentialAcceleration:{min:0,max:0,curve:[]},radialAcceleration:{min:0,max:0,curve:[]}},emitter:{position:[0,0],type:"ellipse",width:50,height:50}},y=F.p+"images/brokenpart.ba9dbf8b.webp",z=a.gPd.from(y),x="PIXI_PARTICLES_TEXTURE_ID1";class N extends a.mcf{constructor(){super(),this.visible=!1}animate(){var o;this.visible=!0,this.particleSystem||this.createParticles(),null===(o=this.particleSystem)||void 0===o||o.start()}clear(){var o;this.visible=!1,null===(o=this.particleSystem)||void 0===o||o.dispose(),this.particleSystem=void 0}destroy(o){var W;null===(W=this.particleSystem)||void 0===W||W.dispose(),this.particleSystem=void 0,super.destroy(o)}createParticles(){const o=[[x,z]],W={fps:60,fixedDt:!1,randomSeed:"",blendMode:f.V.Default,systemSize:{width:window.innerWidth,height:window.innerHeight},controllerConfigs:o.reduce(((o,[W])=>(o[W]=P,o)),{}),graphicsConfig:o.reduce(((W,[F],E)=>(W[F]={fps:0,randomFrameStart:!0,frames:[{x:0,y:0,w:34,h:42},{x:34,y:0,w:34,h:42},{x:68,y:0,w:34,h:42},{x:0,y:42,w:34,h:42}],textureId:o[E][0]},W)),{}),controllerIdToConfigId:o.reduce(((o,[W])=>(o[W]=W,o)),{}),controllers:{}};this.particleSystem=k.l.spawnSystem({container:this,config:W,systemScale:.2,assets:o.reduce(((o,W)=>(o[W[0]]={type:Z.b.PixiTexture,value:W[1]},o)),{}),autoStart:!1}),this.particleSystem.getControllerOrThrow(x).eventEmitter.on(A.Od.OnFinished,(()=>{this.clear()}))}}class e extends a.mcf{constructor(o){super(),this.props=o;const{freeSpace:W,lottoParticles:F,explosionParticles:E}=this.renderFreeSpace();this.addChild(F,W),E&&this.addChild(E),this.freeSpace=W,this.lottoParticles=F,this.explosionParticles=E,this.hide()}show(){this.freeSpace.visible=!0}hide(){this.freeSpace.visible=!1}get isVisible(){return this.freeSpace.visible}showFreeSpace(o,W,F){this.show();const E=I.M(),v=this.freeSpace.scale.x;this.freeSpace.scale.set(0,0),E.sequence(U.M(this.freeSpace.scale).delay(W).callback((()=>{o&&!L.S()&&(this.lottoParticles.visible=!0,this.lottoParticles.gotoAndPlay(0),this.lottoParticles.onComplete=()=>{this.lottoParticles.visible=!1},F())})).delay(.05).animateTo({y:1.2*v,x:1.2*v},.15).animateTo({y:.9*v,x:.9*v},.1).animateTo({y:v,x:v},.15)),l.l({anim:E}),o||E.fastForward()}explode(o,W){if(!o||!this.explosionParticles||L.S())return void W();this.show();const F=I.M(),E=this.freeSpace.scale.x;F.sequence(U.M(this.freeSpace.scale).animateTo({x:1.4*E,y:1.4*E},.25,G.am).animateTo({x:E,y:E},.25,G.am).animateTo({x:1.5*E,y:1.5*E},.25,G.am)).callback((()=>{var o;return null===(o=this.explosionParticles)||void 0===o?void 0:o.animate()})).delay(.1).callback((()=>{W(),this.freeSpace.scale.set(E,E)})),l.l({anim:F})}renderFreeSpace(){const o=this.props.assets.getAnimation(h.ck.LottoParticlesFreeSpace),W=new a.Dl5(o);W.visible=!1,W.loop=!1,W.height=50,W.width=50,W.pivot.set(.5,.5),W.x=-13,W.y=-13;const F=a.kxk.from(this.props.assets.getTexture(h.xL.FreeSpaceBg));let E;return F.width=this.props.cellSize+1.5,F.height=this.props.cellSize+1.5,F.anchor.set(.5,.5),F.position.set(this.props.cellSize/2-.25,this.props.cellSize/2-.35),this.props.hasExplosion&&(E=new N,E.pivot.set(.5,.5),E.position={x:this.props.cellSize/2,y:this.props.cellSize/2}),{freeSpace:F,lottoParticles:W,explosionParticles:E}}}var t=F(139021),m=F(612970),r=F(17775),B=F(900498),j=F(226425);const V=["0-0","1-1","2-2","3-3","4-4"],w=["0-4","1-3","2-2","3-1","4-0"],K=1,T=2,d=3,n=4;let u=0;class $ extends a.mcf{constructor(o){var W;super(),this.props=o,this.nearWinAnimated=!1,this.dabAndNumber=new a.mcf,this.dabAndNumber.zIndex=T,this.index=o.index,this.assets=o.assets,this.number=o.number,this.isPortrait=o.isPortrait,this.soundStore=o.soundStore,this.cardIdentifier=o.cardIdentifier,this.size=o.isBonus?p.Np:p.GZ,o.isBonus?this.size=o.isPortrait?p.AC:p.Np:this.size=p.GZ,this.width=this.size,this.height=this.size,this.isBonus=o.isBonus,this.decorator=this.createDecorator(),this.addChild(this.dabAndNumber),this.cellNumber=this.createCellNumber((null!==(W=this.number)&&void 0!==W?W:"").toString()),this.freeSpace=this.createFreeSpace(),this.dab=this.createDab(),this.cellAxis=this.getCellsAxis();const F=this.assets.getAnimation(h.ck.LottoParticles),E=new a.Dl5(F);E.loop=!1,E.visible=!1,E.x=-19,E.y=-18,E.width=60,E.height=60,this.particles=E,this.addChild(E),this.sortChildren()}showDab(o){const{withAnimation:W,slotMultiplier:F,isCenterFreeSpace:E,onEnd:v=()=>{}}=o;this.cancelNearAnimation(),!W||this.freeSpace.isVisible||E||this.soundStore.triggerDaubEvent(this.cardIdentifier,F),this.dab.show(W,(()=>{this.cancelNearAnimation(),v(this)})),this.freeSpace.hide()}drawChanceDecorator(){this.decorator.chanceCellBg&&(this.decorator.chanceCellBg.visible=!0)}showBonusGoldenDab(o){this.decorator.standardMultiplierBg&&this.decorator.bonusCellBg&&(this.decorator.bonusCellBg.visible=!1,this.decorator.standardMultiplierBg.visible=!o)}hideChanceDecorator(){this.decorator.chanceCellBg&&(this.decorator.chanceCellBg.visible=!1)}drawFreeSpace(o=!0,W=0,F=E.A){this.freeSpace.showFreeSpace(o&&this.index!==t.u,W,F)}applyCellMultiplierBg(o,W,F,E){this.animateCellMultiplierBg(o,o?this.decorator.globalMultiplierBg.scale.x:this.decorator.standardMultiplierBg.scale.x,W,F,E)}getCellsAxis(){const o=[],W=this.index.split("-");return o.push(`C${Number(W[0])+1}`,`R${Number(W[1])+1}`),V.includes(this.index)&&o.push("DLR"),w.includes(this.index)&&o.push("DRL"),o}calcNearWinDelay(o){return u>0?Math.min(o-(performance.now()-u)%o,o):50}async showNearWinAnimation(){if(this.nearWinAnimated||this.dab.visible)return;const o=this.soundStore.getEcasCardId(this.cardIdentifier);if(this.soundStore.triggerEvent(r.PZ.BingoAttention,o),this.nearWinAnimated=!0,await B.u({timeInMilliseconds:this.calcNearWinDelay(750)}),this.dab.visible)return;const W=this.createNearWinMarker();this.dabAndNumber.addChild(W),this.nearWinMarker=W,u=performance.now(),this.nearWinMarker.visible=!0,L.S()||this.nearWinMarker.play()}showInactive(){this.decorator.bonusCellBg&&(this.decorator.bonusCellBg.visible=!1),this.isBonus&&this.decorator.standardMultiplierBg&&(this.decorator.standardMultiplierBg.visible=!1)}reset(){this.dab.visible=!1,this.nearWinAnimated=!1,this.freeSpace.hide(),this.number=void 0,this.decorator.bonusCellBg&&(this.decorator.bonusCellBg.visible=!1),this.decorator.chanceCellBg&&(this.decorator.chanceCellBg.visible=!1),this.decorator.standardMultiplierBg&&(this.decorator.standardMultiplierBg.visible=!1),this.decorator.globalMultiplierBg&&(this.decorator.globalMultiplierBg.visible=!1),this.cancelNearAnimation(),this.cellNumber.visible=!1}setNumber(o){this.number=o,this.cellNumber.text=o.toString(),this.cellNumber.visible=!0,this.cellNumber.alpha=1,this.decorator.bonusCellBg&&(this.decorator.bonusCellBg.visible=!0)}cancelNearAnimation(){this.nearWinAnimated=!1,this.nearWinMarker&&(this.nearWinMarker.destroy(),this.nearWinMarker=void 0)}animateCellMultiplierBg(o,W,F,E,a){const h=o?this.decorator.globalMultiplierBg:this.decorator.standardMultiplierBg;if(!E)return this.visible=!0,h.visible=!0,void F();const p=-30*v.A(this.index.split("-")[1]),g={x:h.position.x,y:h.position.y},{shadow:f,whiteBg:A,shine:k,shineFilter:Z}=this.createAnimationAssets(22.5,o),P=[U.M(h).animateTo({alpha:1},.2),U.M(h.position).animateTo(g,.6,G.p2),U.M(f.position).animateTo({y:g.y+4},.6,G.p2)],y=[U.M(f.scale).animateTo({x:.18,y:.18},.1),U.M(h.scale).animateTo({x:W+.07,y:W+.07},.1)],z=[U.M(f.position).animateTo({y:g.y,x:g.x+2},.15),U.M(f.scale).animateTo({x:.15,y:.15},.15,G.p2),U.M(f).animateTo({alpha:0},.15,G.p2),U.M(h.scale).animateTo({x:W,y:W},.15,G.p2)],x=U.M(Z.uniforms).animateTo({uTime:.75},1),N=I.M();N.delay(a?0:o?1.8:1.3).callback((()=>{if(f.visible=!0,h.alpha=0,h.visible=!0,h.scale.set(.25),f.position.x=g.x+5,f.position.y=p-12,h.position.y=p-30,!a){const{multiplierData:W}=this.soundStore,F=o?r.PZ.BuildGlobalMultiplier:r.PZ.BuildStandardMultiplier,E=o?W.global.grade:W.standard.grade;this.soundStore.triggerEventOnce(F,E)}})).parallel(P).parallel(y).callback((()=>{A.visible=!0,F()})).parallel(z).callback((()=>{k.visible=!0,k.filters=[Z],L.S()||(this.particles.visible=!0,this.particles.play(),this.particles.onComplete=()=>{this.particles.visible=!1})})).sequence(x).callback((()=>{k.filters=null,Z.destroy(),k.destroy(),f.destroy(),A.destroy()})),l.l({anim:N})}createAnimationAssets(o,W){const F=a.kxk.from(a.gPd.WHITE);F.width=o,F.height=o,F.visible=!1;const E=a.kxk.from(this.assets.getTexture(h.xL.CellShadow));E.width=o+5,E.height=o+5,E.anchor.set(.5),E.visible=!1,E.zIndex=0;const[v,G]=this.getCellMultiplierShine(o,W);return this.addChild(F,E,v),this.sortChildren(),{whiteBg:F,shadow:E,shine:v,shineFilter:G}}getCellMultiplierShine(o,W){const F=new a.dJT(void 0,j.A,{uTime:-.15,shineColor:W?p.O9:p.wx}),E=a.kxk.from(a.gPd.WHITE);return E.width=o,E.height=o,E.alpha=.7,E.zIndex=2,E.visible=!1,[E,F]}createCellNumber(o){const W=m.IB(o,this.isBonus?this.isPortrait?11:13:14,this.props.cellColor);return W.anchor.set(.5,1),W.position.set(this.size/2,(W.height-W.textHeight)/1.4+this.size/2.5),W.zIndex=T,this.dabAndNumber.addChild(W),W}createNearWinMarker(){const o=this.assets.getAnimation(h.ck.NearWin).map((o=>({texture:o,time:31.25}))),W=new a.Dl5(o);return W.scale.set(.57),W.anchor.set(.5,.5),W.position.set(this.size/2,this.size/2),W}createDab(){const o=new g({assets:this.assets,cellSize:this.size,dabSize:this.size-1});return o.visible=!1,o.zIndex=n,this.dabAndNumber.addChild(o),o}createFreeSpace(){const o=new e({cellSize:this.size,assets:this.assets,hasExplosion:this.index===t.u});return o.zIndex=d,this.addChild(o),o}createDecorator(){const o=new a.mcf,W=this.isBonus?this.createLottoDecorator(this.assets.getTexture(h.xL.StandardMultiplierBgBonus),o,this.size,!0):this.createLottoDecorator(this.assets.getTexture(h.xL.StandardMultiplierBg),o),F=this.createLottoDecorator(this.assets.getTexture(h.xL.GlobalMultiplierBg),o),E=this.index===t.u?this.createLottoDecorator(this.assets.getTexture(h.xL.ChanceBg),o,24):void 0,v=this.isBonus?this.createLottoDecorator(this.assets.getTexture(h.xL.BonusDabBackground),o,this.size-1,!0):void 0;return void 0!==v&&(v.visible=void 0!==this.number,v.name=h.xL.BonusDabBackground),void 0!==E&&(E.name=h.xL.ChanceBg),W&&(W.name="standardMultiplierBg"),F.name="globalMultiplierBg",o.zIndex=K,this.addChild(o),{standardMultiplierBg:W,globalMultiplierBg:F,chanceCellBg:E,bonusCellBg:v}}createLottoDecorator(o,W,F=this.size,E=!1){const v=a.kxk.from(o);v.visible=!1,v.width=F,v.height=F,v.anchor.set(.5,.5);const G=E?.35:0;return v.position.set(this.size/2+G,this.size/2+G),W.addChild(v),v}}},980007:(o,W,F)=>{F.d(W,{A:()=>r});var E=F(478128),v=F(278982),a=F(221770),G=F(78350),L=F(805596);let U=!1;L.gB("common","muteCanvasAnimations",(()=>{U=!0}));class I{static create(o,W,F,E,v,a,G,L,U,I){return this.general2DProjection(0,0,F,E,o,0,v,a,0,W,G,L,o,W,U,I)}static createScaled(o,W,F,E){return this.create(o,W,E[0]*F,E[1]*F,E[2]*F,E[3]*F,E[4]*F,E[5]*F,E[6]*F,E[7]*F)}static bounds(o,W,F){const E=I.project(o,0,0),v=I.project(o,W,0),a=I.project(o,0,F),G=I.project(o,W,F),L=Math.min(E[0],v[0],a[0],G[0]),U=Math.min(E[1],v[1],a[1],G[1]);return{x:L,y:U,width:Math.max(E[0],v[0],a[0],G[0])-L,height:Math.max(E[1],v[1],a[1],G[1])-U}}static circleBounds(o,W,F=W,E=W){let v=1/0,a=-1/0,G=1/0,L=-1/0;const U=Math.PI/64;for(let I=0;I<2*Math.PI;I+=U){const[U,l]=this.project(o,F+W*Math.cos(I),E+W*Math.sin(I));v=Math.min(U,v),a=Math.max(U,a),G=Math.min(l,G),L=Math.max(l,L)}return{x:v,y:G,width:a-v,height:L-G}}static project(o,W,F){const E=this.multiplyVector(o,[W,F,1]);return[E[0]/E[2],E[1]/E[2]]}static resize(o,W){const F=Math.min(o[0],o[2],o[4],o[6]),E=Math.min(o[1],o[3],o[5],o[7]),v=Math.max(o[1],o[3],o[5],o[7]),a=null===W?1:W/(v-E);if(1===a&&0===F&&0===E)return o;const G=o.slice();for(let o=0;o<8;o+=2)G[o]=Math.floor((G[o]-F)*a),G[o+1]=Math.floor((G[o+1]-E)*a);return G}static adjugate(o){return[o[4]*o[8]-o[5]*o[7],o[2]*o[7]-o[1]*o[8],o[1]*o[5]-o[2]*o[4],o[5]*o[6]-o[3]*o[8],o[0]*o[8]-o[2]*o[6],o[2]*o[3]-o[0]*o[5],o[3]*o[7]-o[4]*o[6],o[1]*o[6]-o[0]*o[7],o[0]*o[4]-o[1]*o[3]]}static multiplyMatrix(o,W){const F=new Array(9);for(let E=0;3!==E;++E)for(let v=0;3!==v;++v){let a=0;for(let F=0;3!==F;++F)a+=o[3*E+F]*W[3*F+v];F[3*E+v]=a}return F}static multiplyVector(o,W){return[o[0]*W[0]+o[1]*W[1]+o[2]*W[2],o[3]*W[0]+o[4]*W[1]+o[5]*W[2],o[6]*W[0]+o[7]*W[1]+o[8]*W[2]]}static basisToPoints(o,W,F,E,v,a,G,L){const U=[o,F,v,W,E,a,1,1,1],I=this.multiplyVector(this.adjugate(U),[G,L,1]);return this.multiplyMatrix(U,[I[0],0,0,0,I[1],0,0,0,I[2]])}static general2DProjection(o,W,F,E,v,a,G,L,U,I,l,h,p,g,f,A){const k=this.basisToPoints(o,W,v,a,U,I,p,g),Z=this.basisToPoints(F,E,G,L,l,h,f,A);return this.multiplyMatrix(Z,this.adjugate(k))}}class l{constructor(o,W){this.context=o,this.matrix=W,this.offsetX=0,this.offsetY=0,this.offsetAngle=0,this.offsetAngleX=0,this.offsetAngleY=0}beginPath(){this.context.beginPath()}closePath(){this.context.closePath()}setOffset(o,W){this.offsetX=o,this.offsetY=W}setRotation(o,W,F){this.offsetAngle=o,this.offsetAngleX=W,this.offsetAngleY=F}moveTo(o,W,F){const E=this.project(o,W,F);this.context.moveTo(E[0],E[1])}lineTo(o,W,F){const E=this.project(o,W,F);this.context.lineTo(E[0],E[1])}moveToAngle(o,W,F,E){E+=this.offsetAngle;const v=o+F*Math.cos(E),a=W+F*Math.sin(E);this.moveTo(v,a,!0)}lineToAngle(o,W,F,E){E+=this.offsetAngle;const v=o+F*Math.cos(E),a=W+F*Math.sin(E);this.lineTo(v,a,!0)}arcTo(o,W,F,E,v,a=!1){const G=Math.PI/90;if(a){for(;v>=E;)v-=2*Math.PI;for(let a=E;a>v;a-=G)this.lineToAngle(o,W,F,a)}else{for(;v<=E;)v+=2*Math.PI;for(let a=E;a<v;a+=G)this.lineToAngle(o,W,F,a)}this.lineToAngle(o,W,F,v)}tracePolygon(o,W,F,E=1){let v=0;for(const a of o){this.moveTo(W+a[0]*E,F+a[1]*E);for(let o=2;o<a.length;o+=2)v=Math.max(v,a[o]),this.lineTo(W+a[o]*E,F+a[o+1]*E);this.closePath()}return v*E}fill(o){this.context.fillStyle=o,this.context.fill()}fillWithShadow(o,W){const F=this.context;F.shadowBlur=1,F.shadowColor=o,F.shadowOffsetX=0,F.shadowOffsetY=W,F.fillStyle=o,F.fill(),F.shadowColor="transparent",F.shadowBlur=0}projectOnAngle(o,W,F,E){E+=this.offsetAngle;const v=o+F*Math.cos(E),a=W+F*Math.sin(E);return this.project(v,a,!0)}project(o,W,F){if(!F&&this.offsetAngle){const F=W-this.offsetAngleY,E=o-this.offsetAngleX,v=this.offsetAngle+Math.atan2(F,E),a=Math.sqrt(F*F+E*E);o=this.offsetAngleX+a*Math.cos(v),W=this.offsetAngleY+a*Math.sin(v)}const E=I.project(this.matrix,o,W);return E[0]+=this.offsetX,E[1]+=this.offsetY,E}}var h,p=F(775286);!function(o){const W={0:[[100,-149,85,-146,72,-141,56,-133,43,-122,32,-111,22,-96,13,-78,8,-62,3,-35,0,0,1,26,3,38,8,64,13,80,22,97,29,108,44,125,56,135,67,142,81,147,101,152,135,152,155,148,174,139,184,133,194,125,206,111,214,99,222,84,229,64,233,50,235,30,237,8,237,-8,235,-30,232,-50,229,-64,222,-82,214,-98,206,-109,196,-121,181,-133,169,-140,153,-146,137,-149,119,-150],[125,-98,141,-91,154,-79,161,-68,167,-52,171,-26,173,6,171,28,167,54,161,70,152,83,144,91,129,98,104,97,86,85,80,76,72,58,67,38,65,26,65,-24,67,-36,72,-56,80,-74,92,-88,108,-97]],1:[[73,-145,1,-99,1,-45,68,-84,69,146,130,146,131,-143]],2:[[83,-146,56,-138,34,-125,22,-114,14,-103,8,-91,4,-79,1,-67,1,-53,60,-52,64,-71,76,-87,91,-95,103,-97,122,-94,134,-86,142,-77,147,-62,147,-45,142,-34,136,-24,128,-14,108,6,4,104,4,149,212,148,212,98,92,96,160,30,176,12,186,0,194,-12,201,-23,207,-39,209,-54,208,-77,202,-94,191,-112,173,-128,159,-137,143,-143,131,-145]],3:[[95,-149,75,-145,59,-139,47,-132,36,-124,28,-116,20,-106,13,-95,8,-79,8,-63,67,-65,83,-90,94,-96,113,-99,130,-96,142,-88,150,-75,151,-54,140,-36,125,-28,105,-25,80,-25,80,21,107,21,123,23,136,28,146,34,154,43,159,59,156,76,146,88,131,96,113,99,93,96,78,88,70,79,64,64,2,64,1,75,8,96,16,110,32,126,43,134,55,140,73,147,86,149,135,150,159,145,171,140,182,134,194,126,210,110,219,96,225,75,224,53,219,34,204,15,187,4,175,-1,160,-4,171,-7,188,-16,201,-28,212,-47,214,-67,213,-83,208,-97,202,-108,194,-118,180,-130,167,-138,143,-147,131,-149]],4:[[122,-144,1,47,2,94,140,97,142,146,201,146,202,97,237,95,237,46,202,44,201,-144,125,-145],[141,-74,141,44,66,44,140,-74]],5:[[21,-142,19,-123,17,-106,15,-84,13,-62,11,-40,8,6,37,13,56,16,81,4,93,-1,107,-2,121,0,136,9,148,22,154,35,154,62,145,80,132,92,119,98,99,99,86,95,73,85,64,70,2,62,1,73,7,94,16,108,24,118,39,130,58,140,77,147,93,149,128,148,151,142,164,136,174,130,186,120,194,112,202,101,208,89,214,73,217,49,215,25,209,6,198,-13,190,-22,176,-34,161,-42,149,-47,137,-49,106,-48,89,-42,72,-31,68,-43,70,-62,71,-77,74,-95,199,-97,200,-147,23,-147]],6:[[107,-149,89,-146,70,-138,56,-129,42,-118,34,-108,26,-96,20,-86,13,-71,9,-59,5,-37,2,-11,1,27,3,40,6,57,11,77,16,88,21,99,28,109,38,120,52,132,66,140,83,147,103,151,140,150,162,144,176,138,188,130,198,122,206,114,214,102,221,89,226,72,228,49,227,31,222,13,216,0,205,-16,189,-30,175,-38,159,-44,137,-46,121,-45,105,-40,92,-34,80,-26,67,-11,65,-31,67,-43,72,-57,77,-69,86,-80,96,-88,107,-93,124,-95,138,-92,150,-84,160,-70,224,-63,223,-77,214,-98,206,-110,186,-129,167,-140,149,-147,137,-149],[127,1,138,4,152,14,160,26,165,37,167,51,163,70,152,86,143,94,129,100,111,101,98,97,84,86,73,70,69,49,73,32,84,16,93,8,105,2]],7:[[2,-144,2,-94,140,-92,22,146,87,146,207,-93,206,-145,3,-145]],8:[[97,-149,77,-145,56,-136,35,-121,22,-105,14,-88,12,-71,13,-57,17,-44,26,-29,34,-20,46,-12,58,-6,49,0,34,8,20,20,10,34,4,47,1,64,3,85,7,97,16,111,24,120,34,128,44,134,56,140,67,145,83,149,99,151,131,151,147,149,163,145,175,140,187,134,196,128,206,120,218,105,227,82,229,59,222,38,210,20,193,6,172,-4,180,-10,194,-19,208,-35,216,-51,218,-71,217,-85,212,-98,202,-114,190,-126,178,-134,165,-141,145,-147,133,-149],[123,-101,136,-96,147,-87,156,-69,155,-53,147,-40,132,-29,114,-26,100,-28,83,-40,75,-59,77,-78,90,-93,107,-101],[119,21,134,24,150,34,158,45,163,62,160,77,153,88,141,99,129,103,115,104,101,103,89,98,80,92,71,80,68,58,77,38,89,28,104,22]],9:[[87,-148,65,-142,52,-136,42,-130,30,-120,22,-112,14,-100,8,-88,2,-70,0,-47,1,-31,6,-13,12,1,18,10,26,20,40,32,55,40,74,46,93,47,115,44,134,36,146,28,156,18,164,8,162,40,156,59,151,71,142,82,132,90,121,95,107,97,88,93,74,81,67,68,3,65,10,90,18,106,26,118,42,131,61,143,84,149,123,151,139,147,158,140,172,131,186,120,194,110,202,98,209,87,215,73,223,40,227,11,226,-31,224,-47,214,-81,206,-98,196,-112,180,-127,162,-138,137,-147,121,-149],[117,-99,131,-94,144,-84,152,-74,157,-63,159,-47,155,-30,144,-14,133,-6,118,0,101,0,86,-6,76,-14,68,-25,63,-37,62,-51,63,-63,68,-74,76,-84,85,-92,98,-98]],M:[[2,-144,2,147,62,146,63,-40,140,145,180,145,256,-40,258,146,318,147,318,-145,242,-144,161,48,79,-144,3,-145]],k:[[1,-144,1,146,62,147,63,78,78,61,136,146,209,146,126,23,204,-71,134,-72,64,9,62,-145,3,-145]],"?":[[85,82,74,86,58,106,58,128,66,140,77,148,101,150,116,140,124,127,122,100,105,84],[83,-149,61,-145,50,-140,34,-131,17,-114,8,-99,3,-85,2,-65,60,-64,65,-80,76,-92,87,-98,107,-98,120,-90,128,-80,130,-65,122,-46,112,-36,94,-22,80,-10,72,2,64,24,63,59,117,59,119,39,124,27,135,13,164,-9,179,-24,188,-38,193,-51,195,-69,192,-89,189,-101,182,-112,174,-122,159,-134,147,-140,132,-145,115,-149]],"+":[[77,-70,76,3,3,4,2,55,76,57,78,130,128,131,130,57,203,56,204,5,130,3,128,-71,79,-71]],".":[[31,79,20,84,6,98,1,113,6,131,16,142,27,148,48,147,64,135,71,119,68,100,57,86,46,80]],",":[[19,71,17,95,15,115,8,151,1,181,41,181,52,153,61,127,66,101,68,89,69,71]]},F={};for(const o of Object.keys(W)){let E=0;for(const F of W[o])for(let o=0;o<F.length;o+=2)E=Math.max(E,F[o]);F[o]=E/2.5}o.drawProjected=function(o,E,v,a,G,L,U){let I=16*(E.length-1);for(let o=0;o<E.length;o++){const W=E.charAt(o);I+=F[W]||F["?"]}"1"===E&&(I=F["?"]);const l=v/I,h=a/160,p=Math.min(1,l,h);I*=p;let g=G-I/2;const f=L;o.beginPath();for(let v=0;v<E.length;v++){const a=E.charAt(v),G=W[a]||W["?"];o.tracePolygon(G,g,f,p/2.5),g+=(16+F[a])*p}o.fill(U)},o.drawSystem=function(o,W,F,E,v,a,G){o.textAlign="center",o.textBaseline="middle",o.font="600 160px Inter, Arial, sans-serif";const L=F/o.measureText(W).width,U=E/160,I=Math.min(1,L,U);o.font=`600 ${Math.max(8,Math.round(160*I))}px Inter, Arial, sans-serif`,o.fillStyle=G,o.fillText(W,Math.round(v),Math.ceil(a))};let E=null,v=Date.now();o.resetIsFontLoaded=function(){E=null,v=Date.now()},o.isFontLoaded=function(){if(E)return!0;if(null!==E&&Date.now()-v>5e3){E=!0;const o="isFontLoaded() was not able to detect Inter font";console.error(o)}else null===E&&(E=p.t_("Inter","600"),E||p.Al("Inter","600").then((()=>{E=!0})));return E}}(h||(h={}));var g=F(738759);const f=[{canvasHeight:200,sizeCoef:1.2,radiusAcoef:.99,radiusBcoef:.99,radiusCcoef:.99,radiusDcoef:.99,textSize:.9,textPlain:!0},{canvasHeight:320,sizeCoef:1.1,radiusAcoef:.98,radiusBcoef:.85,radiusCcoef:.85,radiusDcoef:.85,textSize:.78,textPlain:!0},{canvasHeight:600,sizeCoef:1.1,radiusAcoef:.98,radiusBcoef:.85,radiusCcoef:.85,radiusDcoef:.85,textSize:.6,textPlain:!0},{canvasHeight:760,sizeCoef:1,radiusAcoef:.98,radiusBcoef:.75,radiusCcoef:.69,radiusDcoef:.67,textSize:.6,textPlain:!0},{canvasHeight:760,sizeCoef:1,radiusAcoef:.98,radiusBcoef:.75,radiusCcoef:.69,radiusDcoef:.67,textSize:.47,textPlain:!1}],A=Math.PI/64,k=A+Math.PI/16,Z=Math.PI/8,P=Math.PI/4-Z/2,y=Math.PI/4+Z/2,z=G.VR("#EBEBEB",.8);let x,N=f[0];function e(o){const W=g.mZ();if(W>1&&(o=o/W*(W+1)/2),N.canvasHeight===o)return N;const F=f.length;if(o<=f[0].canvasHeight)return N={...f[0],canvasHeight:o},N;if(o>=f[F-1].canvasHeight)return N={...f[F-1],canvasHeight:o},N;for(let W=1;W<F;W++){const F=f[W];if(F.canvasHeight>=o){const E=f[W-1],v=(o-E.canvasHeight)/(F.canvasHeight-E.canvasHeight);return N={canvasHeight:o,sizeCoef:E.sizeCoef+v*(F.sizeCoef-E.sizeCoef),radiusBcoef:E.radiusBcoef+v*(F.radiusBcoef-E.radiusBcoef),radiusCcoef:E.radiusCcoef+v*(F.radiusCcoef-E.radiusCcoef),radiusDcoef:E.radiusDcoef+v*(F.radiusDcoef-E.radiusDcoef),radiusAcoef:E.radiusAcoef+v*(F.radiusAcoef-E.radiusAcoef),textSize:E.textSize+v*(F.textSize-E.textSize),textPlain:E.textPlain},N}}return N}class t{static drawChip(o,W,F,E,v,a,G,L){const U=E*L.radiusAcoef,I=E*L.radiusBcoef,l=E*L.radiusCcoef,h=E*L.radiusDcoef;o.beginPath(),o.arcTo(W,F,U,0,2*Math.PI),o.fill(v),this.drawChipOuterSegments(o,W,F,E,I,v,a),this.fillLine(o,W,F,E,U,a),o.beginPath(),o.arcTo(W,F,h,0,2*Math.PI),o.fill(G),l!==h&&this.fillLine(o,W,F,l,h,a)}static drawChipWithDepth(o,W,F,E,v,a,L,U){a=Math.min(a,100);const I=G.VR(v);U&&(o.setOffset(0,a),this.drawChipShadow(o,W,F,E));for(let v=a;v>0;v--)o.setOffset(0,v),this.drawChipOuterSegments(o,W,F,E,0,I,z);o.setOffset(0,0),this.drawChip(o,W,F,E,v,"#EBEBEB","rgba(0,0,0,0.2)",L)}static drawChipShadow(o,W,F,E){const v=I.circleBounds(o.matrix,E,W,F);o.beginPath(),o.arcTo(W,F,E,0,2*Math.PI),o.fillWithShadow("rgba(0,0,0,0.7)",v.height/30)}static drawChipOuterSegments(o,W,F,E,v,a,G){for(let L=0;L<2*Math.PI;L+=Math.PI/2)0===v&&(this.fillSector(o,W,F,E,v,L-A,L+A,a),this.fillSector(o,W,F,E,v,L+k,L+P,a),this.fillSector(o,W,F,E,v,L+y,L+Math.PI/2-k,a)),this.fillSector(o,W,F,E,v,L-k,L-A,G),this.fillSector(o,W,F,E,v,L+A,L+k,G),this.fillSector(o,W,F,E,v,L+P,L+y,G)}static fillLine(o,W,F,E,v,a="#EBEBEB"){o.beginPath(),o.moveTo(W+E,F),o.arcTo(W,F,E,0,2*Math.PI),o.closePath(),o.moveTo(W+v,F),o.arcTo(W,F,v,2*Math.PI,0,!0),o.closePath(),o.fill(a)}static fillSector(o,W,F,E,v,a,G,L){o.beginPath(),o.moveToAngle(W,F,v,a),o.lineToAngle(W,F,E,a),o.arcTo(W,F,E,a,G),o.lineToAngle(W,F,v,G),0!==v&&o.arcTo(W,F,v,G,a,!0),o.fill(L)}constructor(o,W,F,E=1){var v;this.scaleFactor=E,this.opacity=1,this.animateOpacity=null,this.shadow=!0,this.canSkipFrame=!1,this.x=o.x,this.y=o.y,this.size=o.size,this.depth=o.depth,this.name=o.name,this.rotation=null!==(v=o.rotation)&&void 0!==v?v:0,this.color=W,this.value=F,this.cacheKey="",this.projection=I.resize(o.projection,100),this.matrixId=this.projection.join(",")}getConfig(){return{name:this.name,projection:this.projection,x:this.x,y:this.y,size:this.size,depth:this.depth,rotation:this.rotation}}draw(o,W,F){let E=this.opacity;if(null!==this.animateOpacity&&!U){const W=o.time%1e3/1e3;E+=(this.animateOpacity-E)*v.rH(2*(W<.5?W:1-W))}if(0===E)return null!==this.animateOpacity;if(e(o.height*this.scaleFactor).textPlain&&!h.isFontLoaded())return!0;this.ensureCacheKey(o.height);const a=o.cache.get(this.cacheKey,this.canSkipFrame,(()=>this.createCacheImage(o.height,this.color,this.value)));if(null===a)return!0;if(a.width<1)return!1;const G=null==W?0|Math.round(this.x*o.width-a.width/2):W+Number(a.getAttribute("data-x-offset")),L=null==F?0|Math.round(this.y*o.height-a.height/2):F+Number(a.getAttribute("data-y-offset"));return this.drawImage(o.context,a,G,L,E),null!==this.animateOpacity}warmUpCache(o,W,F){o.cache.registerHeater(this.createCacheKey(o.height,W,F),(()=>this.createCacheImage(o.height,W,F)))}createTransformationMatrix(o){const W=this.getTransformationScale(o),F=e(o*this.scaleFactor);return I.createScaled(100,100,W*F.sizeCoef,this.projection)}getCacheImageBounds(o,W=50){const F=I.circleBounds(o,W),E=Math.max(F.height,F.width);if(E>20*W)return null;const v=E*this.depth|0;return{x:0|F.x,y:0|F.y,padding:2,width:Math.ceil(F.width+2+2),height:Math.ceil(1.03*F.height+v+2+2),chipWidth:F.width,chipHeight:F.height,depth:v}}createCacheImage(o,W,F){const E=this.createTransformationMatrix(o),v=document.createElement("canvas"),G=this.getCacheImageBounds(E);if(null===G)return v.width=1,v.height=1,v;v.width=G.width,v.height=G.height,v.setAttribute("data-x-offset",(G.x-G.padding).toString()),v.setAttribute("data-y-offset",(G.y-G.padding).toString());const L=v.getContext("2d");L.setTransform(1,0,0,1,G.padding-G.x,G.padding-G.y);const U=new l(L,E);U.setRotation(this.rotation*Math.PI*2,50,50);const p=e(o*this.scaleFactor);t.drawChipWithDepth(U,50,50,50,W,G.depth,p,this.shadow);const g=a.i(F);if(p.textPlain){const o=I.project(E,50,50);h.drawSystem(L,g,G.chipWidth*p.textSize,G.chipHeight*p.textSize,o[0],o[1],"#ffffff")}else{const o=50*p.textSize*2;h.drawProjected(U,g,o,o,50,50,"#ffffff")}return v}drawImage(o,W,F,E,v){let a;1!==v&&(a=o.globalAlpha,o.globalAlpha=a*v),o.drawImage(W,0,0,W.width,W.height,F,E,W.width,W.height),void 0!==a&&(o.globalAlpha=a)}getTransformationScale(o){return Math.floor(o*this.size)/100}createCacheKey(o,W,F){const E=this.getTransformationScale(o);return this.rotation+"/"+this.depth+"/"+this.size+"/"+E+"/"+W+"/"+F+"/"+this.matrixId+"/"+o}ensureCacheKey(o){const W=this.createCacheKey(o,this.color,this.value);this.cacheKey!==W&&(this.cacheKey=W)}}var m=F(171526);class r{static getSingleton(o){return r.chipTextureCache||(r.chipTextureCache=new r(o)),r.chipTextureCache}static disposeSingleton(){var o;null===(o=r.chipTextureCache)||void 0===o||o.dispose(),r.chipTextureCache=void 0}constructor(o){this.colors=o,this.chipCache={}}getChipTexture(o){return this.chipCache[o]||(this.chipCache[o]=E.gPd.from(function(o,W,F,E=1920){return x||(x=new t({name:"createChipImage",projection:[0,0,1,0,0,1,1,1],x:0,y:0,size:.01,depth:0},"",0),x.shadow=!1),x.size=F/E,x.createCacheImage(E,W,o)}(o,m.uH(o,this.colors),60))),this.chipCache[o]}dispose(){Object.values(this.chipCache).forEach((o=>{o.destroy()}))}}},139021:(o,W,F)=>{F.d(W,{u:()=>r,L:()=>B});var E=F(478128),v=F(53579),a=F(774680),G=F(45967),L=F(784194),U=F(401832),I=F(276111),l=F(234341),h=F(769413),p=F(315049),g=F(612970),f=F(884495),A=F(778810);const k=["0-0","1-1","2-2","3-3","4-4"],Z=["0-4","1-3","2-2","3-1","4-0"];class P extends E.mcf{constructor(o){super(),this.value=0,this.isRow=!1,this.flyingInProgress=!1,this.visible=!1,this.index=o.index}getIsMultiplierTextVisible(){var o;return null===(o=this.multiplierText)||void 0===o?void 0:o.visible}reveal(o,W,F,E,v){this.value=E,this.visible=!0,this.multiplierType=o,this.isRow=W,this.multiplierText=this.createMultiplierText(o,E),this.children[0]&&this.children[0].destroy(),this.addChild(this.multiplierText),F&&("Line"===o?this.animateLineMultiplierReveal(this.multiplierText,W):this.animateMultiplierReveal(this.multiplierText,o,v))}shrink(o){if(this.multiplierText){this.multiplierRevealTimeline&&this.multiplierRevealTimeline.fastForward();const W=l.M();W.delay(.165).sequence(h.M(this.multiplierText.scale).animateTo({x:.7,y:.7},.165,I.ME)).delay(.97).sequence(h.M(this.multiplierText.scale).animateTo({x:1,y:1},.15,I.ME)),p.l({anim:W}),o||W.fastForward()}}slideToCenter(o,W){var F;if(this.multiplierText){if(this.multiplierRevealTimeline&&this.multiplierRevealTimeline.fastForward(),this.multiplierType===A.r3.GlobalSymbol&&!o)return void(this.visible=!1);if(this.flyingInProgress)return;const E=this.multiplierText.width,v=this.multiplierText.height,a=E/2+(this.multiplierType===A.r3.GlobalSymbol?3:-1),G=this.multiplierType===A.r3.LineSymbol?6:0,L=this.multiplierType===A.r3.LineSymbol?-2:0,g={x:this.multiplierText.position.x,y:this.multiplierText.position.y},f={x:a+G,y:13+L},k=l.M(),Z=.14,P=.145,y=.14,z=.16,x=.1,N=.31,e=.1,t=this.getSweepMask(v),m=this.createMultiplierText(null!==(F=this.multiplierType)&&void 0!==F?F:A.r3.StandardSymbol,this.value),r=new U.MR({brightness:6});t.visible=!0,m.filters=[r],this.addChild(m,t),this.sortChildren(),m.mask=t;const B=h.M(t.position).animateTo({x:.7*E,y:.2*v},N);t.position={x:-E,y:.2*v};const j={current:0};k.parallel([h.M(j).animateTo({current:1},Z).onUpdate((({current:o})=>{const W=g.x+(f.x+3-g.x)*o,F=g.y+(f.y-g.y)*(o**3/1);this.multiplierText&&(this.multiplierText.position={x:W,y:F})})),h.M(this.multiplierText.scale).animateTo({x:.9,y:.9},Z,I.ME)]).parallel([h.M(this.multiplierText).animateTo({rotation:this.isRow?-Math.PI/2:0},P,I.ME),h.M(this.multiplierText.position).animateTo(f,P,I.ME),h.M(this.multiplierText.scale).animateTo({x:1,y:1},P,I.ME)]).sequence(h.M(this.multiplierText.scale).animateTo({x:1.3,y:1.3},y,I.ME)).sequence(h.M(this.multiplierText.scale).animateTo({x:1.2,y:1.2},z,I.ME)).sequence(h.M(this.multiplierText.scale).animateTo({x:1.3,y:1.3},x,I.ME)).callback((()=>{this.multiplierText&&(m.width=this.multiplierText.width,m.height=this.multiplierText.height,m.position={x:this.multiplierText.position.x,y:this.multiplierText.position.y},m.rotation=this.multiplierText.rotation,t.visible=!0)})).sequence(B).callback((()=>{m.visible=!1,m.destroy(),m.mask=null,t.visible=!1,t.destroy()})).sequence(h.M(this.multiplierText.scale).animateTo({x:1,y:1},e,I.ME)).callback((()=>{W&&this.animateMultiplierFlight(W)})),p.l({anim:k}),o||k.fastForward()}}animateMultiplierFlight(o){const W=this.multiplierText;if(void 0===W||void 0===this.multiplierType||this.flyingInProgress)return;this.flyingInProgress=!0;const F=l.M(),E=L.A(this.index.split("-")[0]),v=L.A(this.index.split("-")[1]),{x:a,y:G}=function(o,W,F,E){const v=24.2*F,a=24.2*E;return o?{x:143.5-v,y:122-a}:W===A.r3.LineSymbol?{x:101-a,y:139-v}:W===A.r3.GlobalSymbol?{x:113.5-a,y:125.5-v}:{x:94.4-a,y:139.5-v}}(this.isRow,this.multiplierType,v,E),U=this.multiplierType===A.r3.GlobalSymbol?1.08:1.5,g=this.isRow||E>=3?-20:20,f=this.isRow?40:0;F.callback((()=>{this.multiplierType===A.r3.LineSymbol&&this.slideToCenter(!0)})).delay(this.multiplierType===A.r3.LineSymbol?.25:0).sequence(h.M(W).animateTo({rotation:this.isRow?-1.6:0},.15,I.am)).parallel([h.M(W.position).animateTo({x:W.position.x+g,y:W.position.y-20+f},.15,I.am),h.M(W.scale).animateTo({x:1.3,y:1.3},.15,I.am)]).parallel([h.M(W.position).animateTo({x:a,y:G},1,I.am),h.M(W.scale).animateTo({x:U,y:U},.15,I.am)]).callback((()=>{W.visible=!1,this.flyingInProgress=!1,o()})),p.l({anim:F})}getCellsAxis(){const o=[],[W,F]=this.index.split("-");return this.multiplierType===A.r3.LineSymbol?(o.push(this.isRow?`R${Number(F)+1}`:`C${Number(W)+1}`),o):(o.push(`C${Number(W)+1}`,`R${Number(F)+1}`),k.includes(this.index)&&o.push("DLR"),Z.includes(this.index)&&o.push("DRL"),o)}getMultiplierRevealScale(o){switch(o){case A.r3.StandardSymbol:return{x:2.3,y:2.3};case A.r3.GlobalSymbol:return{x:3.8,y:3.8};default:return{x:1.5,y:1.5}}}animateMultiplierReveal(o,W,F){const E=this.createMultiplierText(W,this.value);this.parent.parent.addChild(E);const v={x:12.5+this.parent.position.x,y:15+this.parent.position.y};E.scale.set(0),E.rotation=0,E.position.x=v.x,E.position.y=v.y,o.visible=!1,o.rotation=-Math.PI/6,this.multiplierRevealTimeline=l.M();const a=[h.M(E).animateTo({alpha:1},.25),h.M(E.scale).animateTo(this.getMultiplierRevealScale(W),.25)],G=[h.M(E.scale).animateTo({x:1,y:1},.25)],L=F.split("-")[0];"Global"!==W&&"Standard"!==W||"0"!==L||(a.push(h.M(E.position).animateTo({x:this.parent.position.x+("Standard"===W?23:30),y:v.y},.25)),G.push(h.M(E.position).animateTo({x:v.x+this.parent.position.x,y:v.y},.25))),this.multiplierRevealTimeline.parallel(a).parallel(G).parallel([h.M(E.position).animateTo({x:o.position.x+this.parent.position.x,y:o.position.y+this.parent.position.y},.25),h.M(E).animateTo({rotation:o.rotation},.25)]).callback((()=>{o.visible=!0,E.destroy()})),p.l({anim:this.multiplierRevealTimeline})}animateLineMultiplierReveal(o,W){const F={x:o.position.x,y:o.position.y};o.scale.set(0),o.rotation=W?-Math.PI/2:0,o.position={x:W?20:17.5,y:W?0:15},this.multiplierRevealTimeline=l.M(),this.multiplierRevealTimeline.parallel([h.M(o).animateTo({alpha:1},.25),h.M(o.scale).animateTo(this.getMultiplierRevealScale(A.r3.LineSymbol),.25)]).sequence(h.M(o.scale).animateTo({x:1,y:1},.25)).parallel([h.M(o.position).animateTo(F,.25),h.M(o).animateTo({rotation:0},.25)]),p.l({anim:this.multiplierRevealTimeline})}getSweepMask(o){const W=f.O(!1,12),F=new E.kxk(W);return F.width=o/2,F.height=2*o,F.rotation=-Math.PI/4,F.visible=!1,F}createMultiplierText(o,W){return"Global"===o?this.globalMultiplier(W):"Line"===o?this.lineMultiplier(W):this.standardMultiplier(W)}standardMultiplier(o){const W=g.nE(o,"standard");return W.x=9.5,W.y=3.2,W.rotation=-Math.PI/7.2,W.anchor.set(.5,.5),W}globalMultiplier(o){const W=g.nE(o,"global");return W.x=6.5,W.y=2.8,W.anchor.set(.5,.5),W.rotation=-Math.PI/7.2,W}lineMultiplier(o){const W=g.nE(o,"line");return W.x=17.5,W.y=1,W.anchor.set(.5,.5),W}}var y=F(930990),z=F(17775),x=F(226425);class N extends E.mcf{constructor(o){super(),this.assets=o.assets,this.soundStore=o.soundStore,this.lineMultipliers={R1:this.createLineMultiplierBg(!0,0),R2:this.createLineMultiplierBg(!0,1),R3:this.createLineMultiplierBg(!0,2),R4:this.createLineMultiplierBg(!0,3),R5:this.createLineMultiplierBg(!0,4),C1:this.createLineMultiplierBg(!1,0),C2:this.createLineMultiplierBg(!1,1),C3:this.createLineMultiplierBg(!1,2),C4:this.createLineMultiplierBg(!1,3),C5:this.createLineMultiplierBg(!1,4)}}renderLines(o){Object.values(this.lineMultipliers).forEach((W=>{o.addChild(W.container)}))}showCardLineBackground(o,W,F,a){const G=this.lineMultipliers[o].container;if(!W)return this.visible=!0,G.visible=!0,void F();const L=this.assets.getAnimation(y.ck.LottoParticlesLine),U=new E.Dl5(L);U.visible=!1,U.loop=!1,U.width=60,U.height=120,U.x=-30,U.y=-60,U.zIndex=-2,G.addChild(U);const g={x:G.position.x,y:G.position.y},{shadow:f,whiteBg:A,shine:k,shineFilter:Z}=this.createAnimationAssets(22.5,G),P=[h.M(G).animateTo({alpha:1},.2),h.M(G.position).animateTo(g,.8,I.AU)],x=[h.M(f.scale).animateTo({x:.55,y:.55},.1),h.M(G.scale).animateTo({x:1.27,y:1.27},.1)],N=[h.M(f.position).animateTo({y:0,x:0},.15),h.M(f.scale).animateTo({x:.625,y:.625},.15,I.p2),h.M(f).animateTo({alpha:0},.15,I.p2),h.M(G.scale).animateTo({x:1,y:1},.15,I.p2)],e=[h.M(Z.uniforms).animateTo({uTime:.75},.5),h.M(k).animateTo({alpha:0},1,I.p2)],t=l.M();t.delay(a?0:"C"===o[0]?.7:0).callback((()=>{if(G.alpha=0,G.visible=!0,f.visible=!0,f.position.x=4,f.position.y=2.5,G.position.y=-120,!a){const{grade:o}=this.soundStore.multiplierData.line;this.soundStore.triggerEventOnce(z.PZ.BuildLineMultiplier,o)}})).parallel(P).parallel(x).callback(F).parallel(N).callback((()=>{A.visible=!0,k.visible=!0,k.filters=[Z],v.S()||(U.visible=!0,U.gotoAndPlay(0),U.onComplete=()=>{U.visible=!1})})).parallel(e).callback((()=>{k.filters=null,Z.destroy(),k.destroy(),f.destroy(),A.destroy(),U.destroy()})),p.l({anim:t})}resetLines(){Object.values(this.lineMultipliers).forEach((o=>{o.container.visible=!1}))}createAnimationAssets(o,W){const F=E.kxk.from(E.gPd.WHITE);F.width=o+1,F.height=5*o+7,F.visible=!1,F.x=-12,F.y=-60,F.zIndex=-1;const v=E.kxk.from(this.assets.getTexture(y.xL.LineShadow));v.width=o+5,v.height=5*(o+2.5),v.anchor.set(.5),v.zIndex=-1;const a=E.kxk.from(E.gPd.WHITE);a.width=W.width,a.height=W.height,a.anchor.set(.5,.5),a.zIndex=2,a.alpha=.5,a.visible=!1;const L=new E.dJT(void 0,x.A,{uTime:-.15,shineColor:G.wx});return W.addChild(F,v,a),W.sortChildren(),{whiteBg:F,shadow:v,shine:a,shineFilter:L}}createLineMultiplierBg(o,W){const F=new E.mcf,v=E.kxk.from(this.assets.getTexture(y.xL.LineMultiplierBg));return F.visible=!1,F.alpha=1,o?(F.rotation=Math.PI/2,v.height=119.75,v.width=24,F.x=61,F.y=[13.2,37.4,61.8,86,110.2][W]):(v.height=121.5,v.width=24,F.y=61.25,F.x=[13,36.9,60.9,85.1,108.8][W]),v.anchor.set(.5,.5),F.addChild(v),{container:F}}}var e=F(456720),t=F(636308),m=F(276073);const r="2-2";class B extends E.mcf{constructor(o){super(),this.isInactive=!1,this.gridMultipliers={},this.lineMultipliers={},this.cellMultipliers={},this.freeSpaces=[],this.winningLines=void 0,this.cells={},this.cardLineHits={},this.rendered=!1,this.isLastBallDrawn=!1;const{gridMask:W,maskedGridContainer:F}=this.createGridMask();this.gridMask=W,this.maskedGridContainer=F,this.lineMultiplierBackgrounds=new N({assets:o.assets,soundStore:o.soundStore}),this.assets=o.assets,this.cardIdentifier=o.cardIdentifier,this.winningLines=new e.e({assets:o.assets,soundStore:o.soundStore,cardIdentifier:o.cardIdentifier}),this.isPortrait=o.isPortrait,this.soundStore=o.soundStore,this.visible=!1,this.interactiveChildren=!1}resetGrid(){var o;this.isInactive=!1,this.isLastBallDrawn=!1,this.resetCells(),this.lineMultiplierBackgrounds.resetLines(),null===(o=this.winningLines)||void 0===o||o.resetLines(),this.cardLineHits={},this.children&&this.removeChild(...this.children.filter((o=>"multiplierContainer"===o.name)))}updateGridNumbers(o){this.resetGrid(),this.renderGrid(o)}showInactiveGrid(){this.isInactive=!0;for(const o of this.getAllCells())o.cellNumber.alpha=0,o.showInactive()}async toggleDrawnDabs({drawnBalls:o,isRestore:W,applyMultiplierCallback:F,isCenterFreeSpace:E,slotMultiplier:a,setAreLottoAnimationsFinished:G,isLastDrawnBall:L}){var U;(W||v.S())&&F&&F(),this.isLastBallDrawn=null!=L&&L;const I=this.getAllCells().some((W=>{var F;return o.includes(W.number)&&!W.dab.visible&&(null===(F=this.gridMultipliers[W.index])||void 0===F?void 0:F.cellMultiplier.visible)}));for(const l of this.getAllCells()){if(o.includes(l.number)){const o=!W&&!v.S();if(!l.dab.visible){l.showDab({withAnimation:o,isCenterFreeSpace:E,slotMultiplier:a,onEnd:o=>{this.addHitToCardLine(o)}});const v=this.gridMultipliers[l.index];if(!W&&v){const W=v.cellMultiplier.multiplierType===A.r3.GlobalSymbol;W&&G&&G(!1);const E=()=>{G&&G(!0),F&&F()};v.cellMultiplier.slideToCenter(o,W?E:void 0)}}l.dab.visible&&I&&(null===(U=this.gridMultipliers[l.index])||void 0===U||U.cellMultiplier.shrink(o))}L&&l.cancelNearAnimation()}}addHitToCardLine(o){let W=!1;for(const F of o.cellAxis)void 0!==o.number&&(void 0===this.cardLineHits[F]&&(this.cardLineHits[F]={}),void 0===this.cardLineHits[F][o.number]&&(W=!0,this.cardLineHits[F][o.number]=!0));W&&!this.isLastBallDrawn&&this.showNearWinAnimation()}getCellMultiplierInfo(o){return this.cellMultipliers[o]}toggleMultipliers(o,W,F){var E,v;for(const v of Object.keys(this.cellMultipliers))if(W?v===r:v!==r){const a=this.getCellMultiplierInfo(v),G=()=>{var W,E,G;const L=null===(W=this.gridMultipliers[v])||void 0===W?void 0:W.cellMultiplier,U=null===(G=null===(E=this.cells[v])||void 0===E?void 0:E.dab)||void 0===G?void 0:G.visible;if(L&&a&&(L.reveal(a.isGlobal?A.r3.GlobalSymbol:A.r3.StandardSymbol,!1,o,a.value,v),U)){const W=L.getCellsAxis().filter((o=>{var W;return null===(W=this.winningLines)||void 0===W?void 0:W.visibleLines.includes(o)}));W.length>0?L.visible=!1:a.isGlobal?L.slideToCenter(o,F):L.slideToCenter(o)}};null===(E=this.cells[v])||void 0===E||E.applyCellMultiplierBg(!0===(null==a?void 0:a.isGlobal),G,o,W)}for(const[F,E]of Object.entries(this.lineMultipliers)){const a="R"===F[0],G="C"===F[0],L=`${a?4:Number(F[1])-1}-${G?0:Number(F[1])-1}`,U=null===(v=this.gridMultipliers[L])||void 0===v?void 0:v.lineMultiplier;if(U){U.value=E,U.x=-5.65;const v=this.cellMultipliers[L];if(a?(U.rotation=Math.PI/2,U.x=24,U.y=-5.65):v&&(U.y=-9),W?"3"===F[1]:"3"!==F[1]){const v=()=>{var W,v;if(U.reveal(A.r3.LineSymbol,"R"===F[0],o,E,L),(null===(v=null===(W=this.cells[L])||void 0===W?void 0:W.dab)||void 0===v?void 0:v.visible)||this.freeSpaces.includes(L)){const o=U.getCellsAxis().filter((o=>{var W;return null===(W=this.winningLines)||void 0===W?void 0:W.visibleLines.includes(o)}));o.length>0&&(U.visible=!1)}};this.lineMultiplierBackgrounds.showCardLineBackground(F,o,v,W)}}}}showNearWinAnimation(){for(const[o,W]of Object.entries(this.cardLineHits))4===Object.keys(W).length&&this.getAllCells().forEach((W=>{for(const F of W.cellAxis)if(o===F&&!W.dab.visible){W.showNearWinAnimation();break}}))}showWinLines(o,W){o.forEach((o=>{var F;null===(F=this.winningLines)||void 0===F||F.updateLine(o.line,W),this.sortChildren()}))}setFreeSpaces(o){this.freeSpaces=o}getCell(o){return this.cells[o]}animateFreeSpaces(o,W){var F;this.freeSpaces.sort((()=>Math.random()-.5));const E=W?z.PZ.BuildFreeSpaceObserver:z.PZ.BuildFreeSpace,v=this.soundStore.getEcasCardId(this.cardIdentifier),a=()=>this.soundStore.triggerEvent(E,v);for(const[W,E]of this.freeSpaces.entries())E!==r&&(null===(F=this.cells[E])||void 0===F||F.drawFreeSpace(o,.16*W,a))}transformCentralFreeToDab(o){const W=this.getAllCells().filter((o=>o.freeSpace.isVisible&&o.index===r));for(const F of W)F.freeSpace.explode(!o,(()=>{F.showDab({withAnimation:!1,onEnd:o=>{this.addHitToCardLine(o)}})}))}transformFreeToDab(o){const W=!o&&!v.S();for(const o of this.freeSpaces){const F=this.cells[o];null==F||F.showDab({withAnimation:W,isCenterFreeSpace:o===r,onEnd:o=>{this.addHitToCardLine(o)}})}}hideCenterCellDecorator(){void 0!==this.cells[r]&&this.cells[r].hideChanceDecorator()}setCardMode(o){void 0!==this.cells[r]&&(o===A._g.Multi?(this.cells[r].drawChanceDecorator(),this.cells[r].freeSpace.hide()):(this.cells[r].hideChanceDecorator(),this.cells[r].drawFreeSpace()))}setMultipliers(o,W){this.cellMultipliers=o,this.lineMultipliers=W}applyGridMask(){this.maskedGridContainer.mask=this.gridMask,this.gridMask.visible=!0}removeGridMask(){this.maskedGridContainer.mask=null,this.gridMask.visible=!1}renderGrid(o){var W;this.rendered?this.updateLottoGridNumbers(o):(this.rendered=!0,this.lineMultiplierBackgrounds.renderLines(this.maskedGridContainer),this.renderLottoGrid(o),null===(W=this.winningLines)||void 0===W||W.renderLines(this.maskedGridContainer))}renderMultiplierGrid(){for(let o=0;o<G.z;o++)for(let W=0;W<G.$W;W++){const F=new E.mcf;F.name="multiplierContainer",F.position.set(W*G.GZ*.995+W+1.8,o*G.GZ*1.01+o+1.9),F.zIndex=5;const v=new P({index:`${W}-${o}`}),a=new P({index:`${W}-${o}`});this.gridMultipliers[`${W}-${o}`]={cellMultiplier:a,lineMultiplier:v},F.addChild(a,v),this.addChild(F)}}createGridMask(){const o=(new E.A1g).beginFill().drawRect(0,0,t.PI,t.PI).endFill();o.visible=!1,this.addChild(o);const W=new E.mcf;return this.addChild(W),{gridMask:o,maskedGridContainer:W}}renderLottoGrid(o){for(let W=0;W<G.z;W++)for(let F=0;F<G.$W;F++){const E=`${F}-${W}`,v=new a.f({index:E,number:m.Pd(o,E),assets:this.assets,isPortrait:this.isPortrait,isBonus:!1,cellColor:G.iZ,cardIdentifier:this.cardIdentifier,soundStore:this.soundStore});v.position.set(F*G.GZ*.995+F+1.8,W*G.GZ*1.01+W+1.9),this.cells[E]=v,this.maskedGridContainer.addChild(v)}this.renderMultiplierGrid()}updateLottoGridNumbers(o){for(let W=0;W<G.z;W++)for(let F=0;F<G.$W;F++){const E=`${F}-${W}`,v=this.cells[E];if(v){v.position.set(F*G.GZ*1.005+F+1.3,W*G.GZ*1.019+W+1.3),v.freeSpace.hide(),v.dab.visible=!1;const a=m.Pd(o,E);a&&v.setNumber(a)}}this.renderMultiplierGrid()}getAllCells(){return Object.values(this.cells)}resetCells(){for(const o of this.getAllCells())o.reset()}}},456720:(o,W,F)=>{F.d(W,{V:()=>x,e:()=>N});var E=F(478128),v=F(276111),a=F(53579),G=F(234341),L=F(769413),U=F(315049),I=F(930990),l=F(893015),h=F(879356),p=F(157757);const g={autoStart:!1,loop:!0,explosiveness:!1,amount:300,emissionDelay:.05,particlesPerWave:10,particle:{colors:{gradient:!0,mode:"OverLife",colors:["#1e3fc1","#000000"]},damping:.184783,gravityVector:[0,0],directionVector:[-20816681711721685e-33,10408340855860843e-33],spread:180,angularVelocity:{min:0,max:0,curve:[]},initialRotation:{min:0,max:0,syncWithDirection:!1},opacity:{min:1,max:1,curve:[{point:[0,.55],easing:"linear"},{point:[.12,1],easing:"linear"},{point:[.28,.55],easing:"linear"},{point:[.5,1],easing:"linear"},{point:[.74,.55],easing:"linear"},{point:[.78,1],easing:"linear"},{point:[1,.55],easing:"linear"}]},lifetime:{min:.76,max:1.2},scale:{min:.4,max:.1,curve:[{point:[0,0],easing:"linear"},{point:[.19,1],easing:"linear"},{point:[.21,0],easing:"linear"},{point:[.44,1],easing:"linear"},{point:[.68,0],easing:"linear"},{point:[.84,1],easing:"linear"},{point:[1,0],easing:"linear"}]},initialVelocity:{min:.1,max:.1},linearAcceleration:{min:0,max:0,curve:[]},tangentialAcceleration:{min:0,max:0,curve:[{point:[0,1],easing:"linear"},{point:[1,1],easing:"linear"}]},radialAcceleration:{min:0,max:0,curve:[]}},emitter:{position:[0,0],type:"ellipse",radius:20,height:480,width:4e3,scale:1,threshold:50,image:{}}},f={autoStart:!1,loop:!0,explosiveness:!1,amount:400,emissionDelay:.05,particlesPerWave:5435,particle:{colors:{gradient:!0,mode:"OverLife",colors:["#1e3fc1","#000000"]},damping:.184783,gravityVector:[0,0],directionVector:[-20816681711721685e-33,-.5],spread:180,angularVelocity:{min:0,max:0,curve:[]},initialRotation:{min:0,max:0,syncWithDirection:!1},opacity:{min:.5,max:.5,curve:[{point:[0,1],easing:"linear"},{point:[1,.55],easing:"linear"}]},lifetime:{min:.76,max:.98},scale:{min:1,max:2,curve:[]},initialVelocity:{min:.1,max:.1},linearAcceleration:{min:0,max:0,curve:[]},tangentialAcceleration:{min:0,max:0,curve:[]},radialAcceleration:{min:0,max:0,curve:[]}},emitter:{position:[0,0],type:"ellipse",radius:20,height:400,width:3500,scale:1,threshold:50,image:{}}};var A=F(906220),k=F(130610);const Z=new Image;Z.crossOrigin="anonymous",Z.src=k;const P=new Image;P.crossOrigin="anonymous",P.src=A;class y extends E.mcf{constructor(){super(),this.visible=!1}play(){var o;this.visible=!0,this.particleSystem||this.createParticles(),null===(o=this.particleSystem)||void 0===o||o.start()}stop(){var o;this.visible=!1,null===(o=this.particleSystem)||void 0===o||o.finish()}destroy(o){var W;null===(W=this.particleSystem)||void 0===W||W.dispose(),this.particleSystem=void 0,super.destroy(o)}createParticles(){const o="PIXI_PARTICLES_TEXTURE_ID1",W="PIXI_PARTICLES_TEXTURE_ID2",F={fps:30,fixedDt:!1,randomSeed:"",blendMode:l.V.Default,systemSize:{width:window.innerWidth,height:window.innerHeight},controllerConfigs:{[o]:g,[W]:f},graphicsConfig:{[o]:{fps:30,randomFrameStart:!0,frames:[],textureId:o},[W]:{fps:30,randomFrameStart:!0,frames:[],textureId:W}},controllerIdToConfigId:{[o]:o,[W]:W},controllers:{}};this.particleSystem=h.l.spawnSystem({container:this,config:F,systemScale:.05,assets:{[o]:{type:p.b.Texture,value:Z},[W]:{type:p.b.Texture,value:P}},autoStart:!1})}}var z=F(17775);const x=1200;class N{constructor(o){this.props=o,this.winningLinesParticles={},this.visibleLines=[],this.visibleLinesCount=0,this.winningLines=["R1","R2","R3","R4","R5","C1","C2","C3","C4","C5","DLR","DRL"].reduce(((o,W)=>(o[W]=this.getLine(W),o)),{})}getLinePosition(o){return{R1:["row",0],R2:["row",1],R3:["row",2],R4:["row",3],R5:["row",4],C1:["column",0],C2:["column",1],C3:["column",2],C4:["column",3],C5:["column",4],DLR:["diagonal",0],DRL:["diagonal",1]}[o]}renderLines(o){Object.values(this.winningLines).forEach((W=>{o.addChild(W[0])}))}resetLines(){Object.values(this.winningLinesParticles).forEach((o=>{null==o||o.destroy()})),Object.values(this.winningLines).forEach((o=>{o.forEach((o=>{o.visible=!1,o.mask=null}))})),this.winningLinesParticles={},this.visibleLinesCount=0,this.visibleLines=[]}updateLine(o,W){const[F,E]=this.winningLines[o];if(F.visible)return;if(this.visibleLinesCount+=1,this.visibleLines.push(o),F.zIndex=this.visibleLinesCount,F.visible=!0,F.mask=E,E.visible=!0,a.S())return;let I=this.winningLinesParticles[o];if(I||(I=new y,I.name="WinlineParticlesContainer",F.addChild(I)),I.play(),W)return;const l=E.width;E.width/=3;const h=G.M();h.sequence(L.M(E).animateTo({width:l},x/1e3,v.$g));const p=this.props.soundStore.getEcasCardId(this.props.cardIdentifier);this.props.soundStore.triggerEvent(z.PZ.Bingo,p),U.l({anim:h})}getLine(o){const W=E.kxk.from(this.props.assets.getTexture(I.xL.WinLine));this.setImagePosition(W,o);const F=E.kxk.from(this.props.assets.getTexture(I.xL.WinLineMask));return F.position.x=-F.width,F.anchor.set(-.5,.5),W.addChild(F),[W,F]}setImagePosition(o,W){const[F,E]=this.getLinePosition(W);o.visible=!1,o.name="WinningLine",o.scale.set("diagonal"===F?.9:.7),o.anchor.set(.5,.5);const v=[14,38,62,85,109.5][E];o.position.x=60,o.position.y=60,o.width=191*o.scale.x,o.height=39*o.scale.y,"row"===F?o.position.y=v:"column"===F?(o.rotation=.5*-Math.PI,o.position.x=v):o.rotation=(0===E?225:-45)*Math.PI/180}}},45967:(o,W,F)=>{F.d(W,{$G:()=>k,$W:()=>a,AC:()=>U,GZ:()=>G,HD:()=>h,Np:()=>L,O9:()=>P,Vm:()=>I,a1:()=>l,bu:()=>f,iZ:()=>p,rG:()=>A,wx:()=>Z,z:()=>v,zQ:()=>g});var E=F(796269);const v=5,a=5,G=23,L=24,U=20.6,I=3.5,l=124,h={[E.$i.CoinFlip]:1914976,[E.$i.CashHunt]:1526027,[E.$i.CrazyTime]:5832704,[E.$i.Pachinko]:5701956},p=7807767,g={[E.$i.CoinFlip]:28.5,[E.$i.CashHunt]:17.3,[E.$i.Pachinko]:17.3,[E.$i.CrazyTime]:5.5},f={[E.$i.CoinFlip]:16.5,[E.$i.CashHunt]:9,[E.$i.Pachinko]:9,[E.$i.CrazyTime]:2},A=1500,k=1500,Z=[1,1,.745,1],P=[.9,.917,.969,1]},62544:(o,W,F)=>{F.d(W,{o:()=>E});const E=500},583516:(o,W,F)=>{F.d(W,{i:()=>f,v:()=>g});var E=F(478128),v=F(757062),a=F(738759),G=F(276111),L=F(234341),U=F(769413),I=F(266748);const l=.2,h=.15,p=.3,g=v.vO(l)+v.vO(h)+v.vO(4*p);function f(o,W,F){const E=document.createElement("canvas"),v=E.getContext("2d"),g=document.createElement("canvas"),f=g.getContext("2d"),k=L.M();if(null===v||null===f)return k.callback((()=>{W.addChild(o)})),k;const Z=A(F,!0,g,f),P=function(o){const W=()=>U.M(o).animateTo({alpha:1},p,G.am),F=()=>U.M(o).animateTo({alpha:.1},p,G.am);return L.M().callback((()=>{o.visible=!0})).sequence(W()).sequence(F()).sequence(W()).sequence(F()).callback((()=>{o.visible=!1}))}(Z),y=A(F,!1,E,v),z=function(o){const W=1.5/I.i6,F=.5/I.i6;return L.M().callback((()=>{o.visible=!0})).parallel([U.M(o).animateTo({alpha:1},l,G.AU),U.M(o.scale).animateTo({x:W,y:W},l,G.AU)]).parallel([U.M(o.scale).animateTo({x:F,y:F},h,G.p_),U.M(o).animateTo({alpha:0},h,G.p_)]).callback((()=>{o.visible=!1}))}(y);return W.addChild(Z,o,y),k.sequence(z).sequence(P).onDispose((()=>{y.destroy(),Z.destroy(),a.Ob(E),a.Ob(g)})),k}function A(o,W,F,v){const a=Math.min(o.width,o.height)*I.i6,G=1.2*a;F.width=G+2,F.height=G+2;const L=v.createRadialGradient(G/2,G/2,a*(W?.9:.01)/2,G/2,G/2,G/2);L.addColorStop(0,"rgba(255, 220, 150, 1)"),L.addColorStop(.5,"rgba(255, 220, 150, 1)"),L.addColorStop(1,"rgba(255, 220, 150, 0)"),v.beginPath(),v.arc(G/2,G/2,G/2,0,2*Math.PI),v.fillStyle=L,v.fill();const U=E.kxk.from(F?E.gPd.from(F):E.gPd.EMPTY);U.visible=!1;const l=(G-a)/I.i6;return U.width=G/I.i6,U.height=G/I.i6,U.x=o.x+(U.width-l)/2,U.y=o.y-.3+(U.height-l)/2,U.pivot.set(U.width,U.height),U}},612970:(o,W,F)=>{F.d(W,{IB:()=>a,nE:()=>G});var E=F(478128),v=F(930990);function a(o,W,F){return new E.T7$(o,{fontName:v.qp.RobotoSlab,fontSize:W,align:"justify",tint:F})}function G(o,W){const{fontName:F,fontSize:a,prependX:G=!1}=function(o){switch(o){case"global":return{fontName:v.qp.MultiplierGlobal,fontSize:11,prependX:!0};case"line":default:return{fontName:v.qp.Multiplier,fontSize:11};case"cardGlobalMultiplier":return{fontName:v.qp.MultiplierGlobal,fontSize:12,prependX:!0};case"cardTotalMultiplier":return{fontName:v.qp.Multiplier,fontSize:16.5}}}(W);return function(o,W,F){return new E.T7$(F,{fontSize:W,align:"center",fontName:o})}(F,a,G?`x${o}`:`${o}x`)}},884495:(o,W,F)=>{F.d(W,{O:()=>a,y:()=>G});var E=F(478128);const v=new Map;function a(o,W){const F=Math.floor(W);let a=v.get({size:F,isGlobal:o});if(a)return a;const G=document.createElement("canvas"),L=G.getContext("2d"),U=L.createLinearGradient(0,0,F,0);return G.width=F,G.height=1,U.addColorStop(0,"rgba(255, 255, 255, 0)"),U.addColorStop(.5,o?"rgba(230, 234, 247, 1)":"rgba(255, 255, 190, 1)"),U.addColorStop(1,"rgba(255, 255, 255, 0)"),L.fillStyle=U,L.fillRect(0,0,F,1),a=E.gPd.from(G),v.set({size:F,isGlobal:o},a),a}function G(){[...v.values()].forEach((o=>o.destroy())),v.clear()}},51241:(o,W,F)=>{F.d(W,{Pd:()=>v,Pj:()=>a}),F(64922);var E=F(377810);const v=E.createContext(null);function a(){const o=E.useContext(v);if(!o)throw new Error("Store should be provided to StoreContext");return o}},991679:(o,W,F)=>{F.d(W,{Im:()=>U,p6:()=>L,v6:()=>G});var E=F(507565),v=F(270566),a=F(796269);const G={card1:0,card2:0,card3:0,card4:0,[a.$i.Pachinko]:0,[a.$i.CashHunt]:0,[a.$i.CoinFlip]:0,[a.$i.CrazyTime]:0};function L(o){return E.A(v.A(o).filter((([o])=>a.cV(o))))}function U(o){return E.A(v.A(o).filter((([o])=>!a.cV(o))))}},24984:(o,W,F)=>{var E,v;F.d(W,{Id:()=>G,XI:()=>v,lg:()=>a,oG:()=>E,pS:()=>L}),function(o){o[o.Init=0]="Init",o[o.ReadyToStart=1]="ReadyToStart",o[o.Intro=2]="Intro",o[o.Move=3]="Move",o[o.Dragging=4]="Dragging",o[o.MovingInProgress=5]="MovingInProgress",o[o.Selected=6]="Selected",o[o.AutoMove=7]="AutoMove",o[o.Block=8]="Block",o[o.Shooting=9]="Shooting",o[o.DidShot=10]="DidShot"}(E||(E={})),function(o){o.Click="click",o.DragDrop="dragdrop",o.Aiming="aiming",o.Auto="auto",o.Restore="restore",o.Last="last"}(v||(v={}));const a={countX:9,countY:12},G={desktop:{x:638/1920,y:197/1080,width:645/1920,height:774/1080},tablet:{x:638/1920,y:197/1080,width:645/1920,height:774/1080},mobilePortrait:{x:639/1920,y:198/1080,width:643/1920,height:774/1080}},L=1230/1035},507515:(o,W,F)=>{F.d(W,{Oh:()=>L,QG:()=>U,hO:()=>G,ir:()=>I});var E=F(24984);const v="1234567890",a="ABCDEFGHIJKLMNOPQRSTUVWXYZ";function G(o,W){const F=[];for(const E of Object.keys(o)){const{x:v,y:a}=U(E);F[a*W.countX+v]=o[E]}return F}function L(o){return a[o.y]+v[o.x]}function U(o){const[W,F]=(null!=o?o:"").split("");return{x:v.indexOf(F),y:a.indexOf(W)}}function I(o,W){const F=E.Id[W],{boxHeight:v,boxWidth:a,containerHeight:G}=o,L=o.reverseScale||1,U=v*F.y/L;if("mobilePortrait"===W){const o=G-140,{galleryWidth:W,galleryHeight:F}=function(o,W){const F=o*Math.min(1,W/(o*E.pS));return{galleryHeight:F*E.pS,galleryWidth:F}}(a-30,o);return{x:0,y:U+40,height:F,width:W}}return{x:a*F.x/L,y:U,height:v*F.height/L,width:a*F.width/L}}},225844:(o,W,F)=>{var E;F.d(W,{M:()=>E}),function(o){o.Red="Red",o.Blue="Blue"}(E||(E={}))},833038:(o,W,F)=>{F.d(W,{aP:()=>E,cU:()=>G,qB:()=>a});var E,v=F(697971);!function(o){o.Double="DOUBLE",o.Triple="TRIPLE"}(E||(E={}));const a=1e3;function G(){return new L}class L{constructor(){this.flyingMultiplierData=void 0,v.Gn(this,{flyingMultiplierData:v.sH,setFlyingMultiplierData:v.XI})}setFlyingMultiplierData(o){this.flyingMultiplierData=o}}},636308:(o,W,F)=>{F.d(W,{I1:()=>k,PI:()=>Z,Xw:()=>f,gl:()=>y,mo:()=>g,sU:()=>p,sk:()=>P,tn:()=>A});var E=F(180578),v=F(266600),a=F(697971),G=F(796269),L=F(885470),U=F(276073),I=F(17775),l=F(778810),h=F(356336);function p(o){return new z(o)}const g=85,f=72,A=123.84,k=74.175,Z=122,P=152,y=4;class z{constructor(o){this.props=o,this.drawnBalls=[],this.drawnBallsHit={},this.gridNumbers={card1:[],card2:[],card3:[],card4:[]},this.bonusCardNumbers={[G.$i.Pachinko]:[],[G.$i.CashHunt]:[],[G.$i.CoinFlip]:[],[G.$i.CrazyTime]:[]},this.lineMultipliers={card1:{},card2:{},card3:{},card4:{}},this.gridMultipliers={card1:{},card2:{},card3:{},card4:{}},this.freeSpaces={card1:[],card2:[],card3:[],card4:[]},this.winLines={card1:[],card2:[],card3:[],card4:[]},this.bonusFreeSpaces={[G.$i.Pachinko]:[],[G.$i.CashHunt]:[],[G.$i.CoinFlip]:[],[G.$i.CrazyTime]:[]},this.globalMultipliers={card1:1,card2:1,card3:1,card4:1},this.cardModes={card1:l._g.Multi,card2:l._g.Multi,card3:l._g.Multi,card4:l._g.Multi},this.filledBonusCards={[G.$i.Pachinko]:!1,[G.$i.CashHunt]:!1,[G.$i.CoinFlip]:!1,[G.$i.CrazyTime]:!1},a.Gn(this,{gridNumbers:a.sH,bonusCardNumbers:a.sH,drawnBalls:a.sH,drawnBallsHit:a.sH,lineMultipliers:a.sH,gridMultipliers:a.sH,freeSpaces:a.sH,winLines:a.sH,filledBonusCards:a.sH,isQualifiedForBonus:a.EW,setDrawnBalls:a.XI,setWinLines:a.XI,resetDrawnBalls:a.XI,setLineMultipliers:a.XI,cardModes:a.sH,setCardModes:a.XI,setCardMode:a.XI,setBonusCardNumbers:a.XI})}setDrawnBalls(o,W,F){const v={card1:[],card2:[],card3:[],card4:[]},a={[G.$i.Pachinko]:[],[G.$i.CashHunt]:[],[G.$i.CoinFlip]:[],[G.$i.CrazyTime]:[]};this.drawnBallsHit={};for(const o of G.Wq)for(const W of this.freeSpaces[o]){const F=U.Pd(this.gridNumbers[o],W);void 0!==F&&v[o].push(F)}Object.entries(this.bonusFreeSpaces).forEach((([o,W])=>{W.forEach((W=>{const F=this.bonusCardNumbers[o],v=E.A(F,W);void 0!==v&&a[o].push(v)}))})),o.forEach(((E,G)=>{const L=G===o.length-1;Object.entries(this.gridNumbers).forEach((([o,F])=>{const a=o;W[a]>0&&!v[a].includes(E)&&F.forEach((o=>{o.includes(E)&&(this.drawnBallsHit={...this.drawnBallsHit,[E]:!0})}))})),Object.entries(this.bonusCardNumbers).forEach((([W,v])=>{if(v.includes(E)&&F[W]>0&&!a[W].includes(E)){this.drawnBallsHit={...this.drawnBallsHit,[E]:!0};let F=v.length;const G=v.every((E=>{const v=o.includes(E)||a[W].includes(E);return v&&F--,v}));if(G&&!this.filledBonusCards[W]&&(this.filledBonusCards={...this.filledBonusCards,[W]:!0}),L&&F<2){const o=this.props.sound.getEcasCardId(W);G?this.props.sound.triggerEvent(I.PZ.Bingo,o):1===F&&this.props.sound.triggerEvent(I.PZ.BingoAttention,o)}}}))})),this.drawnBalls=o.reverse()}resetDrawnBalls(){this.drawnBalls=[],this.drawnBallsHit={},this.lastDrawnBall=void 0,this.filledBonusCards={[G.$i.Pachinko]:!1,[G.$i.CashHunt]:!1,[G.$i.CoinFlip]:!1,[G.$i.CrazyTime]:!1}}setLastDrawnBall(o){this.lastDrawnBall=o}setGridNumbers(o){v.A(o,this.gridNumbers)&&!Object.values(o).some((o=>0===o.length))||(this.gridNumbers=o)}setBonusCardNumbers(o){v.A(o,this.bonusCardNumbers)&&!Object.values(o).some((o=>0===o.length))||(this.bonusCardNumbers=o)}setBonusFreeSpaces(o){v.A(o,this.bonusFreeSpaces)||(this.bonusFreeSpaces=o)}setLineMultipliers(o){v.A(o,this.lineMultipliers)||(this.lineMultipliers=o)}setGridMultipliers(o){v.A(o,this.gridMultipliers)||(this.gridMultipliers=o)}setFreeSpace(o){v.A(o,this.freeSpaces)||(this.freeSpaces=o)}setWinLines(o){v.A(o,this.winLines)||(this.winLines=o)}setCardModes(o){this.cardModes=Object.keys(o).reduce(((W,F)=>{var E;return W[F]="Free"===(null===(E=o[F])||void 0===E?void 0:E.type)?l._g.FreeSpace:l._g.Multi,W}),{})}setGlobalMultipliers(o){v.A(o,this.globalMultipliers)||(this.globalMultipliers=o)}setCardMode(o,W,F=!1){if(this.cardModes[W]=o,F){const F=o===l._g.FreeSpace?I.PZ.FreeSpaceEnabled:I.PZ.MultiplierEnabled,E=this.props.sound.getEcasCardId(W);this.props.sound.triggerEvent(F,E),this.props.gameStore.incrementActionCount();const v={card1:"Card1",card2:"Card2",card3:"Card3",card4:"Card4"};h._z(this.props.transport,{type:l.cm,payload:{gameId:this.props.abstractGame.getGameId(),card:v[W]}});const a=this.props.getBettingStore();this.props.abstractGame.log(L.XW({card:W,switchTo:o,betPlaced:!!a&&a.betSpotValues[W]>0}))}}get isQualifiedForBonus(){return Object.values(this.filledBonusCards).some(Boolean)}}},276073:(o,W,F)=>{F.d(W,{Pd:()=>h,w:()=>l});var E=F(837557),v=F(228174);const a=.25,G=180,L=250,U=118,I=25;function l(o,W,F){var l;const h="mobilePortrait"===W,p=null!==(l=o.reverseScale)&&void 0!==l?l:1,g=o.height/p,f=o.width/p,A=g-g*a,k=f,Z=A>k?k:A,P=.5*f,y=v.GB(f-P,2)+(h?2:I),z=A>k?v.GB(g-P,2):g/1.6,x=h?z-U:g/1.6,N=function(o,W,F,v){return"tablet"===o?-10:"mobilePortrait"===o?function({width:o,height:W}){return o>=320&&o/W<=1e3/1900}({width:F,height:W})||v&&E.DS.IS_IPHONE10_OR_NEWER?0:25:0}(W,g,f,F);return{canvasScale:v.GB(.5*Z/(h?G:L),2),position:{x:y,y:x+N}}}function h(o,W){const[F,E]=W.split("-").map(Number);return o.length>E&&o[E].length>F?o[E][F]:void 0}},707669:(o,W,F)=>{F.d(W,{t:()=>v});var E=F(330517);function v(o){const W=o,F=Math.min(E.R(W.rawConfig.lotto_multi_bet_min,0),E.R(W.rawConfig.lotto_free_space_bet_min,0),E.R(W.rawConfig.coin_flip_bet_min,0),E.R(W.rawConfig.cash_hunt_bet_min,0),E.R(W.rawConfig.pachinko_bet_min,0),E.R(W.rawConfig.crazy_time_bet_min,0)),v=Math.max(E.R(W.rawConfig.lotto_multi_bet_max,Number.MAX_SAFE_INTEGER),E.R(W.rawConfig.lotto_free_space_bet_max,Number.MAX_SAFE_INTEGER),E.R(W.rawConfig.coin_flip_bet_max,Number.MAX_SAFE_INTEGER),E.R(W.rawConfig.cash_hunt_bet_max,Number.MAX_SAFE_INTEGER),E.R(W.rawConfig.pachinko_bet_max,Number.MAX_SAFE_INTEGER),E.R(W.rawConfig.crazy_time_bet_max,Number.MAX_SAFE_INTEGER));return{bettingTime:()=>E.R(W.rawConfig.betting_time,1e4),scbPayoutLimit:()=>W.payoutLimit()||5e5,onboardingDisabled:()=>"true"===W.rawConfig.onboarding_disabled,gameSubTranslationKey:()=>W.rawConfig.game_sub_translation_key,minTableLimit:()=>Math.max(W.getTableBetMinLimit()||0,F),maxTableLimit:()=>Math.min(W.getTableBetMaxLimit()||Number.MAX_SAFE_INTEGER,v),volatilityIndex:()=>{var W;return null!==(W=parseFloat(o.rawConfig.volatility_index))&&void 0!==W?W:0}}}},330517:(o,W,F)=>{function E(o,W){if(!o)return W;const F=parseFloat(o);return Number.isNaN(F)?W:F}F.d(W,{R:()=>E})},17775:(o,W,F)=>{F.d(W,{Ip:()=>g,Jc:()=>a,PZ:()=>E,dB:()=>p,u3:()=>l,yy:()=>h});var E,v,a,G,L,U=F(796269),I=F(981298);!function(o){o.CashHuntAimConfirmed="CashHuntAimConfirmed",o.CashHuntCannonShoot="CashHuntCannonShoot",o.CashHuntPaintSplatter="CashHuntPaintSplatter",o.CrazyTimeDecisionAppear="CrazyTimeDecisionAppear",o.CrazyTimeDecisionSelect="CrazyTimeDecisionSelect",o.MainGameResult="MainGameResult",o.CoinFlipResult="CoinFlipResult",o.CashHuntResult="CashHuntResult",o.PachinkoResult="PachinkoResult",o.CrazyTimeResult="CrazyTimeResult",o.GameInitLandscape="GameInitLandscape",o.GameInitPortrait="GameInitPortrait",o.FirstBetOnCard="FirstBetOnCard",o.BetOnCard="BetOnCard",o.BetOnAllCards="BetOnAllCards",o.BetOnAllBonus="BetOnAllBonus",o.AutoPlayBet="AutoPlayBet",o.CrazyBallsRebet="CrazyBallsRebet",o.CrazyBallsDouble="CrazyBallsDouble",o.FreeSpaceEnabled="FreeSpaceEnabled",o.MultiplierEnabled="MultiplierEnabled",o.FreeSpaceCardAnimate="FreeSpaceCardAnimate",o.MultiplierCardAnimate="MultiplierCardAnimate",o.BuildCenterFreeSpace="BuildCenterFreeSpace",o.BuildCenterMultiplierStandard="BuildCenterMultiplierStandard",o.BuildCenterMultiplierLine="BuildCenterMultiplierLine",o.BuildCenterMultiplierGlobal="BuildCenterMultiplierGlobal",o.BuildFreeSpace="BuildFreeSpace",o.BuildFreeSpaceObserver="BuildFreeSpaceObserver",o.BuildFreeSpaceEnd="BuildFreeSpaceEnd",o.BuildLineMultiplier="BuildLineMultiplier",o.BuildStandardMultiplier="BuildStandardMultiplier",o.BuildGlobalMultiplier="BuildGlobalMultiplier",o.BuildBonusMultiplier="BuildBonusMultiplier",o.BuildBonusMultiplierObserver="BuildBonusMultiplierObserver",o.CardsRemoved="CardsRemoved",o.Daub="Daub",o.DaubBonus="DaubBonus",o.DaubHitMulti="DaubHitMulti",o.DaubBonusWithMultiplier="DaubBonusWithMultiplier",o.BingoAttention="BingoAttention",o.Bingo="Bingo",o.BallsLeft="BallsLeft",o.BuildPhaseStart="BuildPhaseStart",o.DrawPhaseStart="DrawPhaseStart",o.BonusTicketAnimation="BonusTicketAnimation",o.BonusTicketAnimationObserver="BonusTicketAnimationObserver"}(E||(E={})),function(o){o.CoinFlip="CoinFlip",o.CashHunt="CashHunt",o.Pachinko="Pachinko",o.CrazyTime="CrazyTime"}(v||(v={})),function(o){o.Low="Low",o.Medium="Medium",o.High="High"}(a||(a={})),function(o){o.NoWin="NoWin",o.SmallWin="SmallWin",o.MediumWin="MediumWin",o.LargeWin="LargeWin"}(G||(G={})),function(o){o[o.GameCard1=1]="GameCard1",o[o.GameCard2=2]="GameCard2",o[o.GameCard3=3]="GameCard3",o[o.GameCard4=4]="GameCard4",o[o.CoinFlip=5]="CoinFlip",o[o.CashHunt=6]="CashHunt",o[o.Pachinko=7]="Pachinko",o[o.CrazyTime=8]="CrazyTime"}(L||(L={}));const l={[I.R.None]:G.NoWin,[I.R.Small]:G.SmallWin,[I.R.Medium]:G.MediumWin,[I.R.Big]:G.LargeWin},h={card1:L.GameCard1,card2:L.GameCard2,card3:L.GameCard3,card4:L.GameCard4,coinFlip:L.CoinFlip,cashHunt:L.CashHunt,pachinko:L.Pachinko,crazyTime:L.CrazyTime},p={[U.$i.CoinFlip]:v.CoinFlip,[U.$i.CashHunt]:v.CashHunt,[U.$i.Pachinko]:v.Pachinko,[U.$i.CrazyTime]:v.CrazyTime},g={standard:{count:0,grade:a.Low},line:{count:0,grade:a.Low},global:{count:0,grade:a.Low}}},683011:(o,W,F)=>{var E;F.d(W,{s:()=>E}),function(o){o[o.BetSoftClose=0]="BetSoftClose",o[o.WinMessage=1]="WinMessage",o[o.ShowChipStack=2]="ShowChipStack",o[o.ShowPachinkoResult=3]="ShowPachinkoResult",o[o.CardResetTransition=4]="CardResetTransition",o[o.WinChipAnimation=5]="WinChipAnimation",o[o.AutoHideMultiplier=6]="AutoHideMultiplier",o[o.WinnersList=7]="WinnersList"}(E||(E={}))},293205:(o,W,F)=>{var E;F.d(W,{Xr:()=>v,fA:()=>E,lZ:()=>a}),function(o){o.None="BonusTransitionStage.None",o.FlyIn="BonusTransitionStage.FlyIn",o.WheelMultiplier="BonusTransitionStage.WheelMultiplier",o.Park="BonusTransitionStage.Park",o.Result="BonusTransitionStage.Result"}(E||(E={}));const v=[E.FlyIn,E.WheelMultiplier,E.Park,E.Result],a={stage:E.None,done:!0}},840786:(o,W,F)=>{F.d(W,{i:()=>E});class E{constructor(o,W,F,E,v,a,G=!1){this.cardIndex=o,this.amount=W,this.from=F,this.to=E,this.duration=v,this.chipSize=a,this.withFadeOut=G,this.id=function(o,W,F=!0){return`flyingChip_${o}_${W}${F?`_${Date.now()}`:""}`}(this.cardIndex,this.amount)}}},835990:(o,W,F)=>{F.d(W,{I2:()=>L,Qu:()=>G,_b:()=>E,_r:()=>a,u1:()=>v});const E=.4,v=.57,a=.5,G=.7,L=500},127268:(o,W,F)=>{var E;F.d(W,{X:()=>E}),function(o){o.BallsLeft="ballsLeft",o.BetChangedUppercase="BetChangedTitle",o.BetLimitBonusBetPayout="betLimit.bonusBetPayout",o.BetLimitCashHunt="betLimit.cashHunt",o.BetLimitCrazyTime="betLimit.crazyTime",o.BetLimitFreeSpaceCard="betLimit.freeSpaceCard",o.BetLimitFreeSpacePayout="betLimit.freeSpaceCardPayout",o.BetLimitMultiCard="betLimit.multiCard",o.BetLimitMultiCardPayout="betLimit.multiCardPayout",o.BetLimitPachinko="betLimit.pachinko",o.BetOnAllBonus="allBonus",o.BetOnAllCards="allCards",o.BetsPartiallyAccepted="betsPartiallyAccepted",o.BetsRejected="betsrejected",o.BonusBetCamelCase="bonusBet.TitleCase",o.BonusBetCapital="bonusBet",o.LimitPlatePayoutLimit="limitPlate.payoutLimit",o.PickFlapperColor="pickFlapperColor",o.ToastAutomaticDecision="error_8000",o.ToastBetAmountDecreasedLowBalance="toast.betamount.decreased.lowBalance",o.TooltipBalanceTooLow="tooltip.balanceTooLow",o.TooltipGameInProgress="tooltip.gameInProgress2",o.TooltipMaxBetIs="tooltip.maxBetIs",o.TooltipMaxTableBetIs="tooltip.maxTableBetIs",o.TooltipMinBetIs="tooltip.minBetIs",o.TooltipMinTableBetIs="tooltip.minTableBetIs",o.TooltipNextGameSoon="tooltip.waitForNextGame",o.TrafficLightAcceptedAmount="trafficlight.acceptedAmount.new",o.YouWin="youWin"}(E||(E={}))},6148:(o,W,F)=>{F.d(W,{T:()=>v});var E=F(346160);function v(o,W){return E.Tl(o,W)}},626396:(o,W,F)=>{var E,v;F.d(W,{Q:()=>E,p:()=>v}),function(o){o.Intro="cashhunt.intro",o.UpdateMultipliers="cashhunt.updateMultipliers",o.Carousel="cashhunt.carousel",o.Shooting="cashhunt.shooting",o.ShootingWillEndSoon="cashhunt.shooting.finishing",o.Shot="cashhunt.shot",o.Revealing="cashhunt.revealing",o.Result="cashhunt.result"}(E||(E={})),function(o){o.Apple="A",o.Duck="B",o.Rabbit="C",o.Cactus="D",o.Cupcake="E",o.Box="F",o.Hat="G",o.Star="H",o.Target="I"}(v||(v={}))},990820:(o,W,F)=>{var E;F.d(W,{g:()=>E,k:()=>v}),function(o){o.Intro="crazyballs.coinflip.gettingReady",o.UpdateMultipliers="crazyballs.coinflip.updateMultipliers",o.Multipliers="crazyballs.coinflip.multipliers",o.Action="crazyballs.coinflip.action",o.ActionPerformed="crazyballs.coinflip.actionPerformed",o.Result="crazyballs.coinflip.result",o.Outcome="crazyballs.coinflip.outcome"}(E||(E={}));const v={[E.Intro]:1,[E.UpdateMultipliers]:1,[E.Multipliers]:1,[E.Action]:1,[E.ActionPerformed]:1,[E.Result]:1,[E.Outcome]:1}},620802:(o,W,F)=>{var E;F.d(W,{EX:()=>v,GE:()=>E,gc:()=>a}),function(o){o.Intro="crazyballs.crazytime.intro",o.UpdateMultipliers="crazyballs.crazytime.updateMultipliers",o.Choosing="crazyballs.crazytime.choosing",o.Choose="crazyballs.crazytime.choose",o.Choice="crazyballs.crazytime.choice",o.Action="crazyballs.crazytime.spinRequest",o.Spinning="crazyballs.crazytime.spinning",o.BetweenSpins="crazyballs.crazytime.betweenSpins",o.Result="crazyballs.crazytime.result",o.Outcome="crazyballs.crazytime.outcome"}(E||(E={}));const v={[E.Intro]:1,[E.UpdateMultipliers]:1,[E.Choosing]:1,[E.Choose]:0,[E.Choice]:0,[E.Action]:0,[E.Spinning]:1,[E.BetweenSpins]:1,[E.Result]:1,[E.Outcome]:1};var a;!function(o){o.Green="Green",o.Blue="Blue",o.Yellow="Yellow"}(a||(a={}))},778810:(o,W,F)=>{var E;F.d(W,{TZ:()=>L,_g:()=>E,cm:()=>v,mE:()=>G,r3:()=>a}),function(o){o.Multi="Multi",o.FreeSpace="Free"}(E||(E={}));const v="crazyballs.lotto.toggleCard";var a,G;!function(o){o.FreeSpaceSymbol="FreeSpace",o.GlobalSymbol="Global",o.StandardSymbol="Standard",o.LineSymbol="Line"}(a||(a={})),function(o){o.LottoFullState="crazyballs.lotto.state",o.LottoFullStateWithSmallerDelay="crazyballs.lotto.state_client_event",o.Resolved="crazyballs.lotto.gameResolved",o.Outcome="crazyballs.lotto.outcome",o.OutcomeWithSmallerDelay="crazyballs.lotto.outcome_client_event",o.BallsDropped="crazyballs.lotto.ballsDropped",o.DrawingStarted="crazyballs.lotto.drawingStarted"}(G||(G={}));const L={[G.LottoFullState]:[!1],[G.LottoFullStateWithSmallerDelay]:[!0,-3e3],[G.Resolved]:[!0],[G.Outcome]:[!0],[G.OutcomeWithSmallerDelay]:[!0,-3e3],[G.BallsDropped]:[!0],[G.DrawingStarted]:[!0]}},356336:(o,W,F)=>{F.d(W,{S2:()=>D,_z:()=>M});var E=F(212429),v=F(449141),a=F(796269),G=F(201764),L=F(885470),U=F(189360),I=F(425495);function l(o){return{type:U.U.ClientBonusWinMultiplier,payload:o,enhancers:I.$e}}var h,p=F(62544),g=F(583516),f=F(991679),A=F(833038),k=F(683011),Z=F(293205),P=F(840786),y=F(6148),z=F(127268);!function(o){o.Intro="crazyballs.cashhunt.intro",o.UpdateMultipliers="crazyballs.cashhunt.updateMultipliers",o.SpinRequest="crazyballs.cashhunt.spinRequest",o.Carousel="crazyballs.cashhunt.carousel",o.Shooting="crazyballs.cashhunt.shooting",o.ShootingWillEndSoon="crazyballs.cashhunt.shooting.finishing",o.Shot="crazyballs.cashhunt.shot",o.ShotLate="crazyballs.cashhunt.shot.late",o.Revealing="crazyballs.cashhunt.revealing",o.Result="crazyballs.cashhunt.result",o.Outcome="crazyballs.cashhunt.outcome"}(h||(h={}));const x={[h.Intro]:1,[h.UpdateMultipliers]:1,[h.SpinRequest]:1,[h.Carousel]:1,[h.Shooting]:1,[h.ShootingWillEndSoon]:0,[h.Shot]:0,[h.ShotLate]:1,[h.Revealing]:0,[h.Result]:1,[h.Outcome]:1};var N=F(843415),e=F(24984),t=F(507515),m=F(17775),r=F(626396),B=F(899646);function j(o,W){W.game.setPhase(B.Qc.CashHunt),W.cashHunt.setPhase(o)}var V,w=F(990820),K=F(225844),T=F(620802);function d(o,W,F,E,v){if(F)if(v&&v.flapper===F){const F=v.history;n(3===F[F.length-1]?A.aP.Triple:A.aP.Double,W,o)}else if(E){const v=E?E[F]:void 0;v&&n(v,W,o)}}function n(o,W,F){const E=F.flyingMultiplierData;E&&E.flyTo.type===G.e.BonusTicket&&E.multiplier===o||F.setFlyingMultiplierData({flyFrom:{type:G.e.CrazyBonusResultMultiplier},flyTo:{type:G.e.BonusTicket},instantFly:W,multiplier:o})}!function(o){o.GameInfo="crazyballs.game",o.RestoreEnd="crazyballs.restoreEnd",o.Cancelled="crazyballs.cancelled",o.BetsOpen="crazyballs.betsOpen",o.Bets="crazyballs.bets",o.BetsClosed="crazyballs.betsClosed",o.BetsRejected="crazyballs.betsRejected",o.BetsAccepted="crazyballs.betsAccepted",o.Resolved="crazyballs.resolved",o.GameCleared="crazyballs.cleared",o.BonusMultiplier="crazyballs.bonusMultiplier",o.UpcomingBonusGames="crazyballs.upcomingBonusGames",o.Winners="crazyballs.winners"}(V||(V={}));var u=F(872017),$=F(491292),Y=F(693),Q=F(778810);const C=5;function q(o){return u.A(o,C)}var c=F(697971),_=F(688315),O=F(602913),X=F(944756);function S(o,W){if(o.type===Q.mE.LottoFullState&&(W===B.Qc.BallDrawing||W===B.Qc.Resolved||W===B.Qc.Init))return!0;if(o.type===V.Resolved||o.type===V.BetsOpen||o.type===V.GameInfo||o.type===V.GameCleared||o.type===V.Cancelled&&W!==B.Qc.BetsOpen)return!0;const F=Q.TZ[o.type];return 1===x[o.type]||1===w.k[o.type]||1===O.f[o.type]||F&&!0===F[0]||1===T.EX[o.type]}function s(o){var W;return null!==(W=o.timestamp)&&void 0!==W?W:0}var i=F(900498),R=F(182728);function J(o,W,F){var x,n,u,C;switch(o.type){case v.fY:return void function(o,W){W.abstractGame.updateBalanceFromPayload(o)}(o,W);case V.GameInfo:return W.abstractGame.setGameTime(o.payload.gameNumber),void W.abstractGame.setGameRoundId(o.payload.gameId);case V.RestoreEnd:return void function(o,W){window.setTimeout((()=>{W.restore.setIsRestoring(!1)}),1)}(0,W);case V.Cancelled:return W.abstractGame.showGameCancelledToast(),void W.game.setPhase(B.Qc.Resolved);case V.UpcomingBonusGames:return void function(o,W){W.bonus.setPendingBonuses(o.payload.bonusIds)}(o,W);case V.Winners:const C="mobilePortrait"===W.device.layoutMode?0:function(o){switch(o.game.phase){case B.Qc.CoinFlip:return A.qB+p.o+g.v;case B.Qc.CashHunt:return A.qB+o.settings.multiplierFlightDelayForCashHunt+p.o+g.v;case B.Qc.Pachinko:return A.qB+o.settings.multiplierFlightDelayForPachinko+p.o+g.v;case B.Qc.CrazyTime:return p.o+g.v;default:return 0}}(W);return void W.timeout.set(k.s.WinnersList,(async()=>{W.abstractGame.showWinnersList(o.payload)}),C);case O.l.Intro:case O.l.DropRequest:case O.l.Dropped:case O.l.FinalResult:switch(W.game.setPhase(B.Qc.Pachinko),W.pachinko.setPhase(o.type),o.type){case O.l.Intro:W.timeout.clear(k.s.WinMessage),W.ui.bonusTransition.setStage(Z.fA.FlyIn,!W.restore.isRestoring);break;case O.l.DropRequest:W.restore.isRestoring&&W.ui.bonusTransition.setStage(Z.fA.Park,!1);break;case O.l.Dropped:W.ui.bonusTransition.setStage(Z.fA.Park,!1);break;case O.l.FinalResult:W.bonus.isPlayerQualifiedForBonus(a.$i.Pachinko)&&(W.abstractGame.log(l({multiplier:o.payload.totalResult,bonusType:a.$i.Pachinko})),W.timeout.set(k.s.ShowPachinkoResult,(()=>{W.flyingMultiplier.setFlyingMultiplierData({flyFrom:{type:G.e.Pachinko},flyTo:{type:G.e.BonusTicketChipMiddle},instantFly:!1,multiplier:o.payload.totalResult,flightDuration:A.qB,hideOnTarget:!0}),W.youWin.setWinMultiplier(o.payload.totalResult)}),W.settings.multiplierFlightDelayForPachinko))}return;case T.GE.Intro:return W.timeout.clear(k.s.WinMessage),W.crazyTime.resetCrazyTime(),W.game.setPhase(B.Qc.CrazyTime),W.crazyTime.setPhase(T.GE.Intro),void W.ui.bonusTransition.setStage(Z.fA.FlyIn,!W.restore.isRestoring);case T.GE.UpdateMultipliers:return W.game.setPhase(B.Qc.CrazyTime),W.crazyTime.setPhase(T.GE.UpdateMultipliers),void W.ui.bonusTransition.setStage(Z.fA.WheelMultiplier,!W.restore.isRestoring);case T.GE.Result:{W.crazyTime.setReSpins(void 0),W.crazyTime.setResult(o.payload.flappers),W.game.setPhase(B.Qc.CrazyTime),W.crazyTime.setPhase(T.GE.Result);const{flapper:F}=W.crazyTime;if(F){const E=o.payload.flappers[F];W.youWin.setWinMultiplier(null!==(x=o.payload.flappers[F])&&void 0!==x?x:0),void 0!==E&&(W.abstractGame.log(l({multiplier:E,bonusType:a.$i.CrazyTime})),W.flyingMultiplier.setFlyingMultiplierData({flyFrom:{type:G.e.CrazyBonusResultMultiplier},flyTo:{type:G.e.BonusTicketChipMiddle},instantFly:!1,multiplier:E,flightDuration:A.qB,hideOnTarget:!0}))}return}case T.GE.Action:return W.game.setPhase(B.Qc.CrazyTime),W.crazyTime.setPhase(T.GE.Action),W.game.clearTimeRemaining(),o.payload.flappers&&W.restore.isRestoring&&(W.crazyTime.setResult(o.payload.flappers),W.crazyTime.setReSpins(o.payload.reSpins),d(W.flyingMultiplier,!0,W.crazyTime.flapper,o.payload.flappers,o.payload.reSpins)),void W.ui.bonusTransition.setStage(Z.fA.Park,!1);case T.GE.Choice:return(o.payload.auto||W.restore.isRestoring)&&(W.crazyTime.setFlapper(o.payload.flapper),W.restore.isRestoring||W.crazyTime.setFlyingFlapper(o.payload.flapper)),W.abstractGame.log((u={flapper:o.payload.flapper,auto:null!==(n=o.payload.auto)&&void 0!==n&&n},{type:U.U.ClientCrazyTimeSelectFlapper,payload:u,enhancers:I.$e})),W.game.setPhase(B.Qc.CrazyTime),W.restore.isRestoring||o.payload.auto&&W.abstractGame.showGenericToast({title:"",description:y.T(z.X.ToastAutomaticDecision)}),W.crazyTime.setPhase(T.GE.Choice),void W.ui.bonusTransition.setStage(Z.fA.Park,!1);case T.GE.Choosing:if(W.game.setPhase(B.Qc.CrazyTime),W.ui.bonusTransition.setStage(Z.fA.Park,!1),!W.crazyTime.isPlayerQualified)return;const c=o.payload.timeRemaining-F-W.abstractGame.latency-W.settings.decisionTimerLatency;return c>=0&&(W.game.updateTimeRemaining(Math.max(0,c)),W.crazyTime.setPhase(T.GE.Choosing)),void W.abstractGame.log(function(o){return{type:U.U.ClientCrazyTimeDecisionOffer,payload:o,enhancers:I.$e}}({timer:c,restore:W.restore.isRestoring}));case T.GE.BetweenSpins:return W.crazyTime.setResult(o.payload.flappers),W.crazyTime.setReSpins(o.payload.reSpins),d(W.flyingMultiplier,W.restore.isRestoring,W.crazyTime.flapper,o.payload.flappers,o.payload.reSpins),void W.ui.bonusTransition.setStage(Z.fA.Park,!1);case T.GE.Spinning:return W.game.setPhase(B.Qc.CrazyTime),W.crazyTime.setPhase(T.GE.Spinning),o.payload.flappers&&W.restore.isRestoring&&(W.crazyTime.setResult(o.payload.flappers),W.crazyTime.setReSpins(o.payload.reSpins)),void W.ui.bonusTransition.setStage(Z.fA.Park,!1);case w.g.Outcome:case h.Outcome:case O.l.Outcome:case T.GE.Outcome:const _={[w.g.Outcome]:{delay:A.qB,id:a.$i.CoinFlip},[h.Outcome]:{delay:A.qB+W.settings.multiplierFlightDelayForCashHunt,id:a.$i.CashHunt},[O.l.Outcome]:{delay:A.qB+W.settings.multiplierFlightDelayForPachinko,id:a.$i.Pachinko},[T.GE.Outcome]:{delay:A.qB,id:a.$i.CrazyTime}}[o.type];return W.restore.isRestoring?(W.youWin.setPayout(o.payload.payout,o.payload.totalPayout),void W.abstractGame.setGameResultAmount(o.payload.payout)):void W.timeout.set(k.s.WinMessage,(async()=>{var F;W.ui.betSpots.setBetSpotValues({[_.id]:o.payload.payout},W.restore.isRestoring,!0),await i.u({timeInMilliseconds:g.v});const E=W.ui.placeholders.chipPlaceholders.find((o=>o.cardId===_.id&&!0===o.isBonusLayout)),v=null===(F=R.T.totalBetAmount.current)||void 0===F?void 0:F.getBoundingClientRect();if(E&&v){const{reverseScale:F=1,left:a,top:G}=W.abstractGame.gameDimensions,L={x:(v.x+(v.width-E.size.width)/2-a)/F,y:(v.y+(v.height-E.size.height)/2-G)/F},U=new P.i(_.id,o.payload.payout,E.position,L,p.o,E.size,!0);W.ui.betSpots.setBetSpotValues({[_.id]:0},W.restore.isRestoring,!1),W.ui.flyingChips.addFlyingChips([U]),await i.u({timeInMilliseconds:p.o})}W.youWin.setPayout(o.payload.payout,o.payload.totalPayout),W.abstractGame.setGameResultAmount(o.payload.payout),W.ui.bonusTransition.setStage(Z.fA.Result,!W.restore.isRestoring)}),_.delay);case V.Bets:const S=o.payload.chips;return W.betting.setBetSpotValues({...f.v6,...S}),void(W.restore.isRestoring&&0===W.betting.repeatCost&&W.betting.setPreviousRoundBetSpotValues(W.betting.betSpotValues));case V.BetsOpen:W.game.setPhase(B.Qc.BetsOpen),W.abstractGame.setGameRoundId(o.payload.gameRoundId);const s=o.payload.timeRemaining-F-W.abstractGame.latency-W.settings.bettingTimeLatency;return W.abstractGame.startTimer(s/1e3),void(W.lottoGame.drawnBalls.length>0&&E.vV(new E.gE("Lotto state was not cleared")));case V.BetsClosed:return W.abstractGame.setGameRoundId(o.payload.gameId),W.betting.refreshPreviousRoundBetSpotValues(),W.game.setPhase(B.Qc.BetsClosed),void W.abstractGame.disableChipStack();case V.BetsRejected:return void function(o,W){const{betting:F,abstractGame:E}=W,{bets:v,partial:a,error:G}=o.payload,U=W.betting.betSpotValues;F.handleRejectedBetError(v,a,G);const I=W.betting.betSpotValues,l=L.DI(U,I);E.log(a?L.Ex({bets:U,rejected:l,confirmed:I,errorId:void 0!==G?`${G}`:""}):L.QJ({rejected:l,bets:U,errorId:void 0!==G?`${G}`:""}))}(o,W);case V.BetsAccepted:return void W.abstractGame.log(L.d0({bets:o.payload.bets}));case V.BonusMultiplier:if(null===o.payload.multiplier)return;switch(o.payload.multiplier.bonusId){case a.$i.CoinFlip:W.coinFlip.setSlotMultiplier(o.payload.multiplier.value);break;case a.$i.CashHunt:W.cashHunt.setSlotMultiplier(o.payload.multiplier.value);break;case a.$i.Pachinko:W.pachinko.setSlotMultiplier(o.payload.multiplier.value);break;case a.$i.CrazyTime:W.crazyTime.setSlotMultiplier(o.payload.multiplier.value)}return;case w.g.Intro:return W.timeout.clear(k.s.WinMessage),void function(o,W){const{game:F,coinFlip:E}=W;F.setPhase(B.Qc.CoinFlip),W.restore.isRestoring&&E.setIsVisible(!0),E.setPhase(w.g.Intro),o.payload.multipliers&&!E.multipliers&&(E.setPhase(w.g.Multipliers),E.setMultipliers(o.payload.multipliers),E.setSlotMultiplier(0)),!W.restore.isRestoring&&o.payload.multipliers||W.ui.bonusTransition.setStage(Z.fA.FlyIn,!W.restore.isRestoring)}(o,W);case w.g.UpdateMultipliers:return void function(o,W){const{game:F,coinFlip:E}=W;F.setPhase(B.Qc.CoinFlip),E.setPhase(w.g.UpdateMultipliers),W.ui.bonusTransition.setStage(Z.fA.WheelMultiplier,!W.restore.isRestoring)}(0,W);case w.g.Action:case w.g.ActionPerformed:return void function(o,W){const{game:F,coinFlip:E}=W;F.setPhase(B.Qc.CoinFlip),E.setPhase(o.type),E.setIsVisible(!0),E.setMultipliers(o.payload.multipliers),E.setResult(void 0),W.restore.isRestoring&&W.ui.bonusTransition.setStage(Z.fA.Park,!1)}(o,W);case w.g.Multipliers:return void function(o,W){const{game:F,coinFlip:E}=W;var v;F.setPhase(B.Qc.CoinFlip),E.setPhase(w.g.Multipliers),E.setMultipliers(o.payload.multipliers),W.abstractGame.log((v={heads:o.payload.multipliers.Red,tails:o.payload.multipliers.Blue,restore:W.restore.isRestoring},{type:U.U.ClientCoinFlipCoinMultipliers,payload:v,enhancers:I.$e}))}(o,W);case w.g.Result:return void function(o,W){const{game:F,coinFlip:E,restore:v,flyingMultiplier:L,youWin:U}=W;if(F.setPhase(B.Qc.CoinFlip),E.setPhase(w.g.Result),E.setResult(o.payload.coin),W.abstractGame.log(l({multiplier:o.payload.multiplier,coin:"Red"===o.payload.coin?"Tails":"Heads",bonusType:a.$i.CoinFlip})),v.isRestoring&&!E.multipliers){const W={Red:o.payload.coin===K.M.Red?o.payload.multiplier:0,Blue:o.payload.coin===K.M.Blue?o.payload.multiplier:0};E.setSlotMultiplier(0),E.setMultipliers(W)}else W.bonus.isPlayerQualifiedForBonus(a.$i.CoinFlip)&&(U.setWinMultiplier(o.payload.multiplier),L.setFlyingMultiplierData({flyFrom:{type:G.e.CoinFlipResultMultiplier},flyTo:{type:G.e.BonusTicketChipMiddle},instantFly:!1,multiplier:o.payload.multiplier,flightDuration:A.qB,hideOnTarget:!0}))}(o,W);case Q.mE.LottoFullStateWithSmallerDelay:case Q.mE.LottoFullState:return void function(o,W){var F;const E=o.payload.cards,v=o.payload.bonus,G=o.payload.chipsHistory;W.restore.isRestoring&&o.payload.actionsCount&&W.game.setActionCount(o.payload.actionsCount),0===o.payload.actionsCount&&W.game.resetActionCount();const L=void 0===o.payload.actionsCount||o.payload.actionsCount>=W.game.actionsCount;if(o.payload.repeatCost){const{repeatCost:F}=o.payload;W.betting.setPreviousRoundBetSpotValues({...f.v6,...F})}if("card1"in E){L&&W.lottoGame.setCardModes(E),W.lottoGame.setGridNumbers({card1:q(E.card1.numbers),card2:q(E.card2.numbers),card3:q(E.card3.numbers),card4:q(E.card4.numbers)}),W.lottoGame.setWinLines({card1:E.card1.winLines,card2:E.card2.winLines,card3:E.card3.winLines,card4:E.card4.winLines}),W.lottoGame.setGlobalMultipliers({card1:E.card1.globalMultiplier,card2:E.card2.globalMultiplier,card3:E.card3.globalMultiplier,card4:E.card4.globalMultiplier});const{gridMultipliers:F,lineMultipliers:v,freeSpaces:a}=function(o){const W={card1:{},card2:{},card3:{},card4:{}},F={card1:{},card2:{},card3:{},card4:{}},E={card1:[],card2:[],card3:[],card4:[]},v={...o.payload.cards};return"card1"in v&&Object.keys(v).forEach((o=>{const a=o,G=v[a];(null==G?void 0:G.symbols)&&G.symbols.forEach((o=>{o.type!==Q.r3.GlobalSymbol&&o.type!==Q.r3.StandardSymbol||(W[a]={...W[a],[`${o.pos[0]}-${o.pos[1]}`]:{isGlobal:o.type===Q.r3.GlobalSymbol,value:o.mult}}),"FreeSpace"===o.type&&E[a].push(`${o.pos[0]}-${o.pos[1]}`),"Line"===o.type&&(F[a][o.line]=o.mult)}))})),{gridMultipliers:W,lineMultipliers:F,freeSpaces:E}}(o);W.lottoGame.setLineMultipliers(v),W.lottoGame.setGridMultipliers(F),W.lottoGame.setFreeSpace(a)}if(a.$i.CoinFlip in v&&(W.lottoGame.setBonusCardNumbers({[a.$i.CoinFlip]:v[a.$i.CoinFlip].numbers,[a.$i.CashHunt]:v[a.$i.CashHunt].numbers,[a.$i.Pachinko]:v[a.$i.Pachinko].numbers,[a.$i.CrazyTime]:v[a.$i.CrazyTime].numbers}),W.lottoGame.setBonusFreeSpaces({[a.$i.CoinFlip]:v[a.$i.CoinFlip].freeSpaces,[a.$i.CashHunt]:v[a.$i.CashHunt].freeSpaces,[a.$i.Pachinko]:v[a.$i.Pachinko].freeSpaces,[a.$i.CrazyTime]:v[a.$i.CrazyTime].freeSpaces})),(!Y.A(v)||!Y.A(E))&&G&&L){const o=G.map((o=>({...f.v6,...o})));W.betting.setBetSpotHistory(o);const E=null!==(F=o[o.length-1])&&void 0!==F?F:f.v6;W.betting.setBetSpotValues(E)}W.lottoGame.setDrawnBalls(o.payload.numbersDrawn.current,W.betting.betSpotValuesLottoCards,W.betting.betSpotValuesBonusCards),function(o){return $.A(o,(o=>!Y.A(null==o?void 0:o.symbols)))}(E)&&W.game.phase!==B.Qc.Resolved&&W.game.setPhase(B.Qc.BallDrawing)}(o,W);case Q.mE.OutcomeWithSmallerDelay:case Q.mE.Outcome:return W.youWin.setPayout(o.payload.payout),void W.abstractGame.setGameResultAmount(o.payload.payout);case h.Carousel:return void function(o,W){j(r.Q.Carousel,W),W.restore.isRestoring&&W.ui.bonusTransition.setStage(Z.fA.Park,!1)}(0,W);case h.Intro:return W.timeout.clear(k.s.WinMessage),void function(o,W){j(r.Q.Intro,W),W.ui.bonusTransition.setStage(Z.fA.FlyIn,!W.restore.isRestoring)}(0,W);case h.UpdateMultipliers:return void function(o,W){j(r.Q.UpdateMultipliers,W),W.ui.bonusTransition.setStage(Z.fA.WheelMultiplier,!W.restore.isRestoring)}(0,W);case h.Result:return void function(o,W){if(W.game.setPhase(B.Qc.CashHunt),!W.cashHunt.isPlayerQualified)return void W.ui.bonusTransition.setStage(Z.fA.Result,!W.restore.isRestoring);const F=W.cashHunt.currentSymbolCode;void 0!==F&&setTimeout((()=>{W.flyingMultiplier.setFlyingMultiplierData({flyFrom:{type:G.e.CashHuntResultMultiplier},flyTo:{type:G.e.BonusTicketChipMiddle},instantFly:!1,multiplier:o.payload.multipliers[F],flightDuration:A.qB,hideOnTarget:!0}),W.youWin.setWinMultiplier(o.payload.multipliers[F])}),W.settings.multiplierFlightDelayForCashHunt),W.cashHunt.currentSymbolCode&&W.abstractGame.log(l({multiplier:o.payload.multipliers[W.cashHunt.currentSymbolCode]||0,bonusType:a.$i.CashHunt}))}(o,W);case h.Revealing:return void function(o,W){W.game.setPhase(B.Qc.CashHunt),W.ui.bonusTransition.setStage(Z.fA.Park,!1),W.cashHunt.isPlayerQualified&&(j(r.Q.Revealing,W),W.cashHunt.selectedSymbol&&W.cashHunt.hasPlayerInteracted||W.abstractGame.showGenericToast({title:"",description:y.T(z.X.ToastAutomaticDecision)}),W.cashHunt.setSelectedSymbol(t.QG(o.payload.at)),W.cashHunt.selectedSymbol&&W.cashHunt.currentSymbolCode&&W.abstractGame.log(N.P4({location:W.cashHunt.selectedSymbol,aim:W.cashHunt.userAimInteraction,symbol:W.cashHunt.currentSymbolCode})))}(o,W);case h.Shooting:return void function(o,W,F){var E;j(r.Q.Shooting,W);const{settings:v,abstractGame:a,ui:G,game:L,cashHunt:U}=W;G.bonusTransition.setStage(Z.fA.Park,!1);const I=(null!==(E=o.payload.timeRemaining)&&void 0!==E?E:0)-F-a.latency-v.decisionTimerLatency;I>=0&&L.updateTimeRemaining(I),U.setGrid(t.hO(o.payload.symbols,e.lg)),a.log(N.DE({symbols:o.payload.symbols,timeRemaining:o.payload.timeRemaining,actualTimeRemaining:I,restore:W.restore.isRestoring}))}(o,W,F);case h.ShootingWillEndSoon:return void function(o,W){j(r.Q.ShootingWillEndSoon,W)}(0,W);case h.Shot:return void function(o,W){W.game.setPhase(B.Qc.CashHunt),o.payload.auto&&(W.abstractGame.showGenericToast({title:"",description:y.T(z.X.ToastAutomaticDecision)}),W.sound.triggerEvent(m.PZ.CashHuntAimConfirmed),W.cashHunt.setUserAimInteraction(e.XI.Auto)),W.cashHunt.setSelectedSymbol(t.QG(o.payload.at)),W.ui.bonusTransition.setStage(Z.fA.Park,!1)}(o,W);case h.ShotLate:return;case h.SpinRequest:return void function(o,W){j(r.Q.Intro,W)}(0,W);case V.Resolved:return void W.game.setPhase(B.Qc.Resolved);case V.GameCleared:return void X.u(W);case O.l.UpdateMultipliers:return W.game.setPhase(B.Qc.Pachinko),W.pachinko.setPhase(O.l.UpdateMultipliers),void W.ui.bonusTransition.setStage(Z.fA.WheelMultiplier,!W.restore.isRestoring);case Q.mE.Resolved:return;case Q.mE.BallsDropped:return void(W.restore.isRestoring&&(W.game.setPhase(B.Qc.BallDrawing),W.lottoGame.setDrawnBalls(o.payload.balls,W.betting.betSpotValuesLottoCards,W.betting.betSpotValuesBonusCards)));case"metrics.pong":return void W.transport.setLatency(Date.now()-o.payload.t);case"subscribe":return W.restore.setIsRestoring(!0),W.abstractGame.disableChipStack(),void W.game.setPhase(B.Qc.Init);case Q.mE.DrawingStarted:case O.l.IntermediaryResult:case"connection.reconnectNow":case"ukgc.netposition":case"appInfo":case"dealer":case"freeRoundBalance":case"rewardGameBalance":case"tableState":return}C=o,window.EVO_VERBOSE()&&window.console.error(`This scope should not be reachable: ${JSON.stringify(C)}`)}function D(o,W){return function(o,W,F,E,v){return function(a){const G=a;if(G.type===V.BetsOpen){const W=G.payload.timeRemaining-o.abstractGame.latency-o.settings.bettingTimeLatency;o.betting.setBetClosedDeadline(Date.now()+W)}if(!E(G,o.game.phase)||o.restore.isRestoring)return void c.h5((()=>{F(G,o,0)}));const L=_.t(G,o,W,v)+function(o){const W=o.type;return function(o){return o in Q.mE}(W)&&Q.TZ[W][1]?Q.TZ[W][1]:0}(G);W.wait(L).then((W=>{c.h5((()=>{F(G,o,W)}))})).catch((o=>{console.warn("VideoSync error:",o)}))}}(o,W,J,S,s)}function M(o,W){o.sendMessage(W)}},602913:(o,W,F)=>{var E;F.d(W,{f:()=>v,l:()=>E}),function(o){o.Intro="crazyballs.pachinko.showMultipliers",o.DropRequest="crazyballs.pachinko.dropRequest",o.Dropped="crazyballs.pachinko.dropped",o.Rescue="crazyballs.pachinko.rescue",o.FinalResult="crazyballs.pachinko.finalResult",o.UpdateMultipliers="crazyballs.pachinko.updateMultipliers",o.IntermediaryResult="crazyballs.pachinko.intermediaryResult",o.Outcome="crazyballs.pachinko.outcome"}(E||(E={}));const v={[E.Intro]:1,[E.DropRequest]:1,[E.Dropped]:1,[E.Rescue]:1,[E.FinalResult]:1,[E.UpdateMultipliers]:1,[E.IntermediaryResult]:1,[E.Outcome]:1}},944756:(o,W,F)=>{F.d(W,{u:()=>v});var E=F(683011);function v(o){o.lottoGame.resetDrawnBalls(),o.lottoGame.setFreeSpace({card1:[],card2:[],card3:[],card4:[]}),o.lottoGame.setBonusFreeSpaces({coinFlip:[],cashHunt:[],pachinko:[],crazyTime:[]}),o.betting.resetCurrentValues(!0),o.youWin.reset(),o.lottoGame.setGridNumbers({card1:[],card2:[],card3:[],card4:[]}),o.lottoGame.setBonusCardNumbers({cashHunt:[],coinFlip:[],crazyTime:[],pachinko:[]}),o.pachinko.setSlotMultiplier(void 0),o.cashHunt.setSlotMultiplier(void 0),o.crazyTime.setSlotMultiplier(void 0),o.coinFlip.setSlotMultiplier(void 0),o.coinFlip.reset(),o.ui.bonusTransition.reset(),o.bonus.reset(),o.timeout.clear(E.s.AutoHideMultiplier)}},899646:(o,W,F)=>{var E;F.d(W,{Qc:()=>E,R2:()=>a,so:()=>v}),function(o){o.Init="Init",o.BetsOpen="BetsOpen",o.BetsClosed="BetsClosed",o.Resolved="Resolved",o.BallDrawing="BallDrawing",o.CoinFlip="CoinFlip",o.CashHunt="CashHunt",o.Pachinko="Pachinko",o.CrazyTime="CrazyTime"}(E||(E={}));const v=[E.CashHunt,E.Pachinko,E.CrazyTime,E.CoinFlip],a=o=>v.includes(o)},428807:(o,W,F)=>{F.d(W,{J:()=>v,p:()=>a});var E=F(929468);function v(o=""){const W=o?`${o}-${E.A()}`:E.A();return{id:o=>`${W}-${o}`,href:o=>`#${W}-${o}`,url:o=>`url(#${W}-${o})`}}function a(o){return`${o}-${Math.floor(1e9*Math.random())}-${+new Date}`}},900498:(o,W,F)=>{F.d(W,{u:()=>v});var E=F(53579);function v({timeInMilliseconds:o,immediate:W}){return W||E.S()?Promise.resolve():(o<10&&window.EVO_VERBOSE()&&window.console.error("'wait' function was called with delay less than 10ms, it most likely was mixed with seconds, use 'immediate' param if you need to skip delay, or use bigger value"),new Promise((W=>{setTimeout((()=>W()),o)})))}},145023:(o,W,F)=>{F.d(W,{P:()=>v,U:()=>a});var E=F(377810);const v=E.createContext(void 0);function a(){return E.useContext(v)}},838041:(o,W,F)=>{F.d(W,{$:()=>CI});var E={};F.r(E),F.d(E,{Animation:()=>RW,AnimationState:()=>tF,AnimationStateAdapter:()=>KF,AnimationStateData:()=>dF,AtlasAttachmentLoader:()=>nF,Attachment:()=>nW,AttachmentTimeline:()=>IF,Bone:()=>uF,BoneData:()=>$F,BoundingBoxAttachment:()=>YW,ClippingAttachment:()=>QW,ColorTimeline:()=>GF,ConstraintData:()=>YF,CurveTimeline:()=>HW,DeformTimeline:()=>hF,DrawOrderTimeline:()=>gF,Event:()=>QF,EventData:()=>CF,EventQueue:()=>jF,EventTimeline:()=>pF,EventType:()=>wF,IkConstraint:()=>qF,IkConstraintData:()=>cF,IkConstraintTimeline:()=>AF,JitterEffect:()=>SW,MeshAttachment:()=>CW,PathAttachment:()=>qW,PathConstraint:()=>sF,PathConstraintData:()=>_F,PathConstraintMixTimeline:()=>NF,PathConstraintPositionTimeline:()=>yF,PathConstraintSpacingTimeline:()=>zF,PointAttachment:()=>cW,RegionAttachment:()=>XW,RotateTimeline:()=>oF,ScaleTimeline:()=>EF,ShearTimeline:()=>vF,Skeleton:()=>JF,SkeletonBinary:()=>FE,SkeletonBounds:()=>aE,SkeletonData:()=>DF,SkeletonJson:()=>GE,Skin:()=>oE,SkinEntry:()=>bF,Slot:()=>_W,SlotData:()=>MF,SpacingMode:()=>XF,Spine:()=>UE,SwirlEffect:()=>iW,TimelineType:()=>DW,TrackEntry:()=>rF,TransformConstraint:()=>iF,TransformConstraintData:()=>HF,TransformConstraintTimeline:()=>ZF,TranslateTimeline:()=>FF,TwoColorTimeline:()=>UF,VertexAttachment:()=>$W});var v={};F.r(v),F.d(v,{Animation:()=>eE,AnimationState:()=>HE,AnimationStateAdapter2:()=>vv,AnimationStateData:()=>Gv,AtlasAttachmentLoader:()=>Lv,Attachment:()=>IE,AttachmentTimeline:()=>YE,Bone:()=>Uv,BoneData:()=>Iv,BoundingBoxAttachment:()=>pE,ClippingAttachment:()=>gE,ColorTimeline:()=>nE,CurveTimeline:()=>rE,DeformTimeline:()=>CE,DrawOrderTimeline:()=>cE,Event:()=>lv,EventData:()=>hv,EventQueue:()=>Fv,EventTimeline:()=>qE,EventType:()=>Ev,IkConstraint:()=>pv,IkConstraintData:()=>gv,IkConstraintTimeline:()=>OE,JitterEffect:()=>zE,MeshAttachment:()=>fE,PathAttachment:()=>AE,PathConstraint:()=>Zv,PathConstraintData:()=>fv,PathConstraintMixTimeline:()=>DE,PathConstraintPositionTimeline:()=>iE,PathConstraintSpacingTimeline:()=>RE,PointAttachment:()=>kE,RegionAttachment:()=>yE,RotateTimeline:()=>jE,ScaleTimeline:()=>KE,ShearTimeline:()=>TE,Skeleton:()=>zv,SkeletonBounds:()=>xv,SkeletonData:()=>Nv,SkeletonJson:()=>rv,Skin:()=>mv,Slot:()=>ZE,SlotData:()=>ev,SpacingMode:()=>Av,Spine:()=>jv,SwirlEffect:()=>NE,TimelineType:()=>tE,TrackEntry:()=>ov,TransformConstraint:()=>Pv,TransformConstraintData:()=>tv,TransformConstraintTimeline:()=>SE,TranslateTimeline:()=>wE,TwoColorTimeline:()=>$E,VertexAttachment:()=>hE});var a={};F.r(a),F.d(a,{AlphaTimeline:()=>ma,Animation:()=>Xv,AnimationState:()=>_a,AnimationStateAdapter:()=>ia,AnimationStateData:()=>WG,AtlasAttachmentLoader:()=>FG,Attachment:()=>Vv,AttachmentTimeline:()=>ja,Bone:()=>EG,BoneData:()=>vG,BoundingBoxAttachment:()=>Tv,ClippingAttachment:()=>dv,ConstraintData:()=>aG,CurveTimeline:()=>la,CurveTimeline1:()=>ha,CurveTimeline2:()=>pa,DeformTimeline:()=>Va,DrawOrderTimeline:()=>da,Event:()=>GG,EventData:()=>LG,EventQueue:()=>Sa,EventTimeline:()=>Ka,EventType:()=>sa,IkConstraint:()=>UG,IkConstraintData:()=>IG,IkConstraintTimeline:()=>na,MeshAttachment:()=>nv,PathAttachment:()=>uv,PathConstraint:()=>gG,PathConstraintData:()=>lG,PathConstraintMixTimeline:()=>Qa,PathConstraintPositionTimeline:()=>$a,PathConstraintSpacingTimeline:()=>Ya,PointAttachment:()=>$v,RGB2Timeline:()=>Ba,RGBA2Timeline:()=>ra,RGBATimeline:()=>ea,RGBTimeline:()=>ta,RegionAttachment:()=>Qv,RotateTimeline:()=>ga,ScaleTimeline:()=>Za,ScaleXTimeline:()=>Pa,ScaleYTimeline:()=>ya,Sequence:()=>qv,SequenceMode:()=>_v,SequenceModeValues:()=>Ov,SequenceTimeline:()=>qa,ShearTimeline:()=>za,ShearXTimeline:()=>xa,ShearYTimeline:()=>Na,Skeleton:()=>ZG,SkeletonBinary:()=>eG,SkeletonBounds:()=>HG,SkeletonData:()=>PG,SkeletonJson:()=>bG,Skin:()=>NG,SkinEntry:()=>xG,Slot:()=>fG,SlotData:()=>yG,SpacingMode:()=>hG,Spine:()=>aL,Timeline:()=>Ia,TrackEntry:()=>Xa,TransformConstraint:()=>AG,TransformConstraintData:()=>zG,TransformConstraintTimeline:()=>ua,TranslateTimeline:()=>fa,TranslateXTimeline:()=>Aa,TranslateYTimeline:()=>ka,VertexAttachment:()=>Kv});var G=F(64922),L=F(912986),U=F(478128),I=F(4961),l=F(212429),h=F(484802),p=F(881357),g=F(926610),f=F(892510),A=F(977804),k=F(394532),Z=F(947548),P=F(747992),y=F(706809),z=F(735821),x=F(444792),N=F(767359);function e(o,W,F){const E=N._9(t(F,o));if(!E)return null;try{!function(o,W){if(!y.A(o))throw new l.ew("Autoplay state is not an object.");const{lastActiveSession:F,selectedRounds:E,isRunning:v}=o;if(F!==W)throw new l.ew("Autoplay state contains stale data from a non-current session.");if(!z.A(E))throw new l.ew("Autoplay state contains invalid selectedRounds.");if(!x.A(v))throw new l.ew("Autoplay state contains invalid isRunning.")}(E,W);const{lastActiveSession:o,...F}=E;return F}catch(o){return window.console.warn(`Unable to load existing Autoplay state from session storage: ${o}`),null}}function t(o,W){return`${o}-${W}`}function m(){window.EVO_LOADER.sendLog("CLIENT_ERROR",{message:"Autoplay is unable to use session storage."})}var r=F(872443),B=F(346160),j=F(827424),V=F(587698),w=F(555213);const K="title--59bd2",T="rounds--f5b0d",d="roundsLabel--5bd23",n="roundsAmount--0a709",u="roundsMultiplier--f0508",$="roundsBet--97136";var Y=F(494475),Q=F(13799),C=F(850449),q=F(572989);const c=Y.Oe((({state:o,ag:W})=>{const{isLargeScreen:F,isMediumScreen:E}=j.Qo(W.viewport.size.value);return{gameTheme:C.SJ(o),currencySymbol:r.o2(o),gameDimensions:Q.Ay(o),isDesktop:F,isLandscape:Q.O5(o),isTablet:E,isRtl:B.sU(),isSettingsWindowOpen:W.autoplayUI.isSettingsWindowOpen}}),(o=>[o.viewport.size]))((({totalBetToRepeat:o,roundsLeft:W,limitsEnabled:F,...E})=>{const{currencySymbol:v}=E;return G.jsxs(G.Fragment,{children:[G.jsx("div",{className:K,children:B.Tl("ap3.popup.shouldContinueAutoPlay")}),F&&G.jsxs(G.Fragment,{children:[G.jsxs("div",{className:T,children:[G.jsxs("label",{className:d,children:[B.Tl("ap3.label.AutoplayCaps"),":"," "]}),G.jsxs("span",{children:[G.jsx("label",{className:n,children:B.Tl("ap3.rounds",{value:W})}),G.jsx("label",{className:u,children:"×"}),G.jsx("label",{className:$,children:V.ej(o,{currencySymbol:v})})]})]}),G.jsx(w.k,{...E,usedInPopup:!0})]})]})}));c.displayName="BetsChangedPopupContentConnectedToAg";const _=q.s((o=>({totalBetToRepeat:o.totalBetToRepeat,roundsLeft:o.roundsLeft,lossLimit:o.lossLimit,singleWin:o.singleWin,isRunning:o.isRunning,limitsEnabled:o.limitsEnabled})),(o=>({setSingleWin:o.setSingleWin,setLossLimit:o.setLossLimit})))(c);class O{constructor(o,W){this.ag=o,this.options=W,this.isRunning=new h.L(!1),this.isStartable=new h.L(!1),this.isAvailable=new h.L(!1),this.roundsLeft=new h.L(0),this.selectedRounds=new h.L(0),this.lossLimit=new h.L(0),this.singleWin=new h.L(0),this.totalBetToRepeat=new h.L(0),this.limitsEnabled=new h.L(!1),this.lastTotalBetToRepeat=new h.L(0),this.repeatCount=0,this.runningLoss=0,this.lastWin=0,this.hasUnconfirmedBetChanges=!1,this.shouldShowBetsChangedPopup=!1,this.pendingStopReason=null,this.unsubscribers={common:[],running:[],lossLimit:[]},this.start=()=>{if(!this.isStartable.value||this.isRunning.value)return;this.roundsLeft.value=this.selectedRounds.value,this.isRunning.value=!0;const o=0!==this.ag.balance.totalBet.value;this.lastTotalBetToRepeat.value=o&&this.ag.lifecycle.current.value===f.P.BetsOpen?this.ag.balance.totalBet.value:this.ag.balance.totalBetToRepeat.value,this.unsubscribers.running.push(this.ag.network.status.subscribe(this.trackNetworkStatus),this.ag.lifecycle.current.subscribe(this.trackLifecycle,!1),this.ag.compliance.realityCheck.status.subscribe(this.trackRealityCheck,!1)),this.limitsEnabled.value&&this.unsubscribers.running.push(this.ag.gameResult.amount.subscribe(this.trackLastWin,!1));const W=this.limitsEnabled.value?{lossLimit:this.lossLimit.value,singleWin:this.singleWin.value}:{};this.log({type:P.Gn.ClientStartAutoplay,payload:{selectedRounds:this.selectedRounds.value,totalBet:this.lastTotalBetToRepeat.value,...W}}),this.repeatBets(!0)},this.stop=(o,W=!1)=>{if(!this.isRunning.value)return;if(W&&this.ag.lifecycle.current.value!==f.P.BetsOpen)return void(this.pendingStopReason=o);const F=this.repeatCount;this.unsubscribe(this.unsubscribers.running),this.isRunning.value=!1,this.roundsLeft.value=0,this.lastTotalBetToRepeat.value=0,this.repeatCount=0,this.runningLoss=0,this.lastWin=0,this.hasUnconfirmedBetChanges=!1,this.shouldShowBetsChangedPopup=!1,this.pendingStopReason=null,this.log({type:P.Gn.ClientStoppedAutoplay,payload:{reason:o,roundsPlayed:F}}),this.ag.popups.close(A.QD.AUTOPLAY_BETS_CHANGED),this.ag.autoplayUI.setStopReason(o)},this.dispose=()=>{Object.keys(this.unsubscribers).forEach((o=>this.unsubscribe(this.unsubscribers[o]))),this.stop(k.G_.ManualStop),this.isStartable.value=!1},this.setSelectedRounds=o=>{const W=this.selectedRounds.value,F=Math.max(0,o);W!==F&&(this.selectedRounds.value=F,this.isRunning.value&&(this.roundsLeft.value=F),this.log({type:P.Gn.ClientUpdateAutoplayRounds,payload:{previousSelectedRounds:W,selectedRounds:F}}))},this.setLossLimit=o=>{const W=this.lossLimit.value,F=Math.max(0,o);0!==F&&W!==F&&(this.unsubscribe(this.unsubscribers.lossLimit),this.lossLimit.value=F,this.log({type:P.Gn.ClientUpdateAutoplayLossLimit,payload:{previousLossLimit:W,lossLimit:F}}))},this.setSingleWin=o=>{const W=this.singleWin.value,F=Math.max(0,o);W!==F&&(this.singleWin.value=F,this.log({type:P.Gn.ClientUpdateAutoplaySingleWin,payload:{previousSingleWin:W,singleWin:F}}))},this.placeBets=()=>{this.repeatBets()},this.triggerBetsChanged=(o=!0)=>{this.shouldShowBetsChangedPopup=o},this.trackLifecycle=o=>{switch(o){case f.P.BetsOpen:if(this.pendingStopReason)return void this.stop(this.pendingStopReason);this.repeatBets();break;case f.P.GameResolved:this.limitsEnabled.value&&this.repeatCount>0&&(this.runningLoss+=this.ag.balance.totalBet.value);break;case f.P.BetsClosed:{const o=this.ag.popups.current.value,W=A.Ns.includes(null==o?void 0:o.id)&&(null==o?void 0:o.isVisible);if(this.hasUnconfirmedBetChanges||W)return void this.stop(k.G_.MissedRound);const F=this.ag.balance.totalBet.value;if(0===F)return void this.stop(k.G_.ManualBetsReplaced);(this.shouldShowBetsChangedPopup||F!==this.lastTotalBetToRepeat.value)&&(this.lastTotalBetToRepeat.value=F,this.log({type:P.Gn.ClientUpdateAutoplayBets,payload:{totalBet:this.lastTotalBetToRepeat.value}}),this.hasUnconfirmedBetChanges=!0,this.ag.popups.open(Z.$o((()=>this.stop(k.G_.ManualStop)),(()=>{this.ag.popups.close(A.QD.AUTOPLAY_BETS_CHANGED),this.hasUnconfirmedBetChanges=!1,this.shouldShowBetsChangedPopup=!1,this.repeatBets()}),_)));break}}},this.repeatBets=(o=!1,W=!1)=>{var F;const E=0!==this.ag.balance.totalBet.value,v=o||!E;if(!this.isRunning.value||this.ag.lifecycle.current.value!==f.P.BetsOpen||!v)return;const a=null!==(F=this.ag.balance.server.value)&&void 0!==F?F:0;if(this.lastTotalBetToRepeat.value>a)return void this.stop(k.G_.NoBalance);const G=this.ag.popups.current.value,L=!!G&&G.id!==A.QD.LOW_BALANCE,U=A.Ns.includes(null==G?void 0:G.id)&&(null==G?void 0:G.isVisible);if(L&&!(L&&W&&U)){const o=(null==G?void 0:G.id)===A.QD.AUTOPLAY_BETS_CHANGED;return void(!this.ag.isRngGame||U||o||this.unsubscribers.common.push(this.ag.popups.current.subscribe(this.continueAutoplayAfterClosingPopup)))}if(0===this.selectedRounds.value)return void this.stop(k.G_.RoundsEnded);const I=this.ag.balance.totalBetToRepeat.value;if(this.limitsEnabled.value&&this.repeatCount>0){if(this.runningLoss+I>this.lossLimit.value)return void this.stop(k.G_.LossReached);if(0!==this.singleWin.value&&this.lastWin>=this.singleWin.value)return void this.stop(k.G_.WinReached);this.lastWin=0}if(o||0!==I){this.roundsLeft.value--,this.repeatCount++;const W=!o||this.ag.isRngGame||!E;let F;W&&(F=this.options.repeatBets());const v=o&&this.ag.isRngGame&&E;if(W&&!v){const o=()=>{var o,W;this.log({type:P.Gn.ClientBetChip,payload:{type:"AutoPlay",roundsLeft:this.roundsLeft.value,...null===(W=(o=this.options).selectBetChipLogFields)||void 0===W?void 0:W.call(o)}},this.options.betChipLogEnhancers)};F instanceof Promise?F.then(o):o()}}return this.roundsLeft.value<=0?this.stop(k.G_.RoundsEnded):void 0},this.continueAutoplayAfterClosingPopup=o=>{o||this.repeatBets()},this.updateIsAvailable=({balance:o=0,totalBet:W,totalBetToRepeat:F,lifecycle:E,isRunning:v})=>{if(v&&E!==f.P.BetsOpen)return;const a=F>0&&F<=o;this.isAvailable.value=W>0||a},this.updateIsStartable=({isAvailable:o,selectedRounds:W})=>{this.isStartable.value=o&&W>0},this.updateTotalBetToRepeat=({totalBet:o,totalBetToRepeat:W,lastTotalBetToRepeat:F,lifecycle:E,isRunning:v})=>{this.totalBetToRepeat.value=E===f.P.BetsOpen?o||W:v?F:W||o},this.updateLossLimit=({totalBetToRepeat:o,selectedRounds:W})=>{const F=this.lossLimit.value,E=W*o;F!==E&&(this.lossLimit.value=E,this.log({type:P.Gn.ClientUpdateAutoplayLossLimit,payload:{previousLossLimit:F,lossLimit:E}}))},this.trackLastWin=o=>{o>0&&this.repeatCount>0&&(this.lastWin=o,this.runningLoss-=o)},this.trackNetworkStatus=o=>{[g.XW.Reconnecting,g.XW.Disconnected].includes(o)&&this.stop(k.G_.Disconnected)},this.trackRealityCheck=o=>{switch(o){case I.LK.Stopped:this.stop(k.G_.ManualStop);break;case I.LK.Inactive:this.repeatBets(!1,!0)}},this.saveState=()=>{var o,W,F;o={isRunning:this.isRunning.value,selectedRounds:this.selectedRounds.value,lastActiveSession:this.ag.settings.bareSessionId()},W=this.ag.tableId,F="AutoplayState",N.J2(t(F,W),o,m)},this.restoreState=()=>{let o=e(this.ag.tableId,this.ag.settings.bareSessionId(),"AutoplayState");if(o||(o=e(this.ag.tableId,this.ag.settings.sessionId(),"AutoplayState"),o&&l.vV(new l.bE("Deprecated sessionId still in use","Deprecation"))),!o)return;const{selectedRounds:W,isRunning:F}=o;this.selectedRounds.value=W,this.isRunning.value=F},this.unsubscribe=o=>{o.forEach((o=>o())),o.length=0},this.log=(o,W)=>{this.ag.log(P.CM(o,W))},this.restoreState(),this.limitsEnabled.value=o.settings.isUKGC(),this.isRunning.value&&this.stop(k.G_.PageRefreshed),this.unsubscribers.common.push(p.vT({balance:o.balance.server,totalBet:o.balance.totalBet,totalBetToRepeat:o.balance.totalBetToRepeat,lifecycle:o.lifecycle.current,isRunning:this.isRunning}).subscribe(this.updateIsAvailable),p.vT({isAvailable:this.isAvailable,selectedRounds:this.selectedRounds}).subscribe(this.updateIsStartable),p.vT({lifecycle:o.lifecycle.current,totalBet:o.balance.totalBet,totalBetToRepeat:o.balance.totalBetToRepeat,isRunning:this.isRunning,lastTotalBetToRepeat:this.lastTotalBetToRepeat}).subscribe(this.updateTotalBetToRepeat),p.vT({isRunning:this.isRunning,selectedRounds:this.selectedRounds}).subscribe(this.saveState)),this.limitsEnabled.value&&this.unsubscribers.lossLimit.push(p.vT({totalBetToRepeat:this.totalBetToRepeat,selectedRounds:this.selectedRounds}).subscribe(this.updateLossLimit))}}var X=F(320693),S=F(837557),s=F(523219),i=F(357117),R=F(775286),J=F(425009),D=F(714806);const M="Promise has been disposed";var H=F(296715),b=F(431281),oo=F(910028),Wo=F(112771),Fo=F(266748),Eo=F(36638),vo=F(755073),ao=F(85),Go=F(170877),Lo=F(436794),Uo=F(277082),Io=F(805480);function lo(o,W){switch(o){case Go.OD.Desktop:return function(o){return o?{[Uo.LayoutType.ImmersiveV2]:{videoStream:Io.VideoPlaylist.Default,labelTranslationId:"tooltip.threeDView",isFooterGradientVisible:!1},[Uo.LayoutType.Classic]:{videoStream:Io.VideoPlaylist.Classic,labelTranslationId:"tooltip.threeDView"}}:{[Uo.LayoutType.ImmersiveV2]:{videoStream:Io.VideoPlaylist.Default,labelTranslationId:"tooltip.threeDView",isFooterGradientVisible:!1}}}(W);case Go.OD.Phone:case Go.OD.Tablet:return{[Uo.LayoutType.PhoneV2]:{videoStream:Io.VideoPlaylist.Default,disabledPhoneOrientation:o===Go.OD.Phone?Lo.t.Landscape:null}}}}var ho=F(425495),po=F(980007),go=F(884495),fo=F(707669),Ao=F(332635),ko=F(697971),Zo=F(876700),Po=F(683011),yo=F(127268),zo=F(6148),xo=F(944756),No=F(294851),eo=F(836871),to=F(969695),mo=F(786596);class ro{constructor(o,W,F){this.api=o,this.settings=W,this.store=F,this.gameLoaded=!1,this.isFullscreen=!1,this.drawerIsVisible=!1,this.isGamePaused=!1,this.isClassicView=!1,this.orientation=Lo.t.Landscape,this.currencySymbol="",this.totalBetAmount=0,this.gameDimensions={containerHeight:0,containerWidth:0,left:0,top:0,height:0,width:0,boxHeight:0,boxWidth:0},this.playMode="realMoney",this.currentLifecycle=f.P.Init,this.layoutType=Uo.LayoutType.ImmersiveV2,this.preferencesLoaded=!1,this.gameId="",this.betValue=0,this.isDisposed=!1,this.disposers=[],this.gameDimensionsResizeRequestAnimationFrame=-1,this.toggleUserOpenedUIVisibility=o=>{o?this.api.layout.ui.showUserOpenedUI():this.api.layout.ui.hideUserOpenedUI()},ko.Gn(this,{gameDimensions:ko.sH,gameLoaded:ko.sH,orientation:ko.sH,currencySymbol:ko.sH,layoutType:ko.sH,isFullscreen:ko.sH,betValue:ko.sH,drawerIsVisible:ko.sH,gameId:ko.sH,isGamePaused:ko.sH,isClassicView:ko.sH,disableChipStack:ko.XI,startTimer:ko.XI,showChipStack:ko.XI,setGameTime:ko.XI,getIsFullscreen:ko.XI}),this.bindToAbstractGame(),this.disableChipStack()}log(o){this.store.restore.isRestoring||this.api.log(o)}vibrate(){this.api.hapticFeedback.vibrate()}showGenericToast(o){this.api.toasts.show({type:No.C.GenericToast,props:o})}setGameTime(o){this.api.setGameTime(o)}setGameRoundId(o){this.api.gameRoundId.value!==o&&(xo.u(this.store),this.gameId=o,this.api.setGameRoundId(o))}getGameId(){return this.api.gameRoundId.value}getGameNumber(){var o;return null!==(o=this.api.gameNumber.value)&&void 0!==o?o:""}getIsFullscreen(){return this.api.fullscreen.isInFullscreen.value}showGameCancelledToast(){this.api.toasts.show(eo.Vy())}setVideoScaleMobile(o){this.api.video.mobile.setScale(o)}setBackgroundColorsMobile(o,W=0){this.api.layout.mobile.setBackgroundColors(o,{transitionDuration:W})}setBackgroundColorsClassicView(o){this.api.layout.classic.setBackgroundColors(o)}disableScaleAnimation(){this.api.video.mobile.disableScaleAnimation()}get videoScale(){return this.api.video.mobile.scale.value}get latency(){var o;return null!==(o=this.api.network.latency.value)&&void 0!==o?o:100}setVideoTransformOrigin(o){this.api.video.mobile.setTransformOrigin(o)}handleError(o){this.api.handleError({errorId:`error_${o}`})}bindToAbstractGame(){this.disposers.push(this.api.layout.current.subscribe(ko.XI((o=>{this.isClassicView=o===Uo.LayoutType.Classic}))),this.api.orientation.subscribe(ko.XI((o=>{this.orientation=o}))),this.api.currencySymbol.subscribe(ko.XI((o=>{this.currencySymbol=o}))),this.api.layout.current.subscribe(ko.XI((o=>{this.layoutType=o}))),this.api.lifecycle.current.subscribe(ko.XI((o=>{this.currentLifecycle=o}))),this.api.fullscreen.isInFullscreen.subscribe(ko.XI((o=>{this.isFullscreen=o}))),this.api.layout.drawer.mobile.isVisible.subscribe(ko.XI((o=>{this.drawerIsVisible=o}))),this.api.layout.openWindows.subscribe(ko.XI((o=>{this.drawerIsVisible=Object.keys(o).length>0}))),this.api.betAmounts.lastSelectedAmount.subscribe(ko.XI((o=>{void 0!==o&&(this.betValue=o)}))),this.api.gamePaused.state.subscribe(ko.XI((o=>{this.isGamePaused=o}))),this.api.playMode.subscribe(ko.XI((o=>{this.playMode=o}))),this.api.gameDimensions.subscribe(ko.XI((o=>{window.cancelAnimationFrame(this.gameDimensionsResizeRequestAnimationFrame),0===this.gameDimensions.width&&0===this.gameDimensions.height?this.gameDimensions=o:this.gameDimensionsResizeRequestAnimationFrame=window.requestAnimationFrame(ko.XI((()=>{this.gameDimensions=o})))}))),this.api.balance.available.subscribe(ko.XI((o=>{o<this.settings.tableMinBet||Zo.ZX(this.playMode)&&o+this.totalBet===0?this.api.balance.setLow():this.api.balance.setEnough()}))));const o=ko.XI((()=>{this.isDisposed||(this.gameLoaded=!0)})),W=ko.XI((()=>{this.isDisposed||(this.preferencesLoaded=!0)}));this.api.gameLoaded.then(o).catch(o),this.api.preferences.initialization.then(W).catch(W)}get platform(){return this.api.platform}get videoInfo(){return this.api.video}setServerBalance(o){this.api.balance.setServerBalance(o)}disableChipStack(){this.store.timeout.clear(Po.s.ShowChipStack),this.api.chipstack.hide()}showChipStack(){this.api.chipstack.show()}get chipColors(){return this.api.chipstack.chipColors.value}startTimer(o){this.api.decisionTimer.setIsCountdown(!0),this.api.decisionTimer.setCountdownFromSeconds(o),this.api.decisionTimer.setStartTime(Date.now())}pauseBalanceUpdate(){this.api.balance.pauseBalanceUpdate()}resumeBalanceUpdate(){this.api.balance.resumeBalanceUpdate()}setTotalBet(o,W=!0){this.api.totalBetLabel.setLabelTranslationKey(""),W&&this.reserveBet(o),this.api.balance.setTotalBet(o)}setBonusBet(o){null!==o&&this.api.totalBetLabel.setLabelTranslationKey(this.platform===Go.OD.Phone?yo.X.BonusBetCamelCase:yo.X.BonusBetCapital),this.api.balance.setBonusBet(o)}setTotalBetToRepeat(o){this.api.balance.setTotalBetToRepeat(o)}setLifecycleOpenBets(){this.api.lifecycle.openBets()}setLifecycleCloseBets(){this.api.lifecycle.closeBets()}setLifecycleOpenInteraction(){this.api.lifecycle.openInteraction()}setLifecycleCloseInteraction(){this.api.lifecycle.closeInteraction()}setLifecycleResolved(){this.api.lifecycle.resolveGame({resetTotalBet:!1})}get betting(){return this.api.betting}get totalBet(){return this.api.balance.totalBet.value}get balanceAvailable(){return this.api.balance.available.value}get balanceReserved(){return this.api.balance.reserved.value}get isLowBalance(){return this.api.balance.isLow.value}dispose(){for(const o of this.disposers)o();ko.h5((()=>{this.isDisposed=!0,this.gameLoaded=!1,this.preferencesLoaded=!1,window.cancelAnimationFrame(this.gameDimensionsResizeRequestAnimationFrame)}))}reserveBet(o){this.api.balance.reserveBet(o)}setGameResultAmount(o){this.api.gameResult.setAmount(o)}updateBalanceFromPayload(o){this.reserveBet(0),this.api.balance.updateFromPayload(o.payload,o.id||"")}addTooltip(o){this.api.tooltips.add({label:o.label,top:o.top,left:o.left,id:o.id,type:o.type,hasAnchor:o.hasAnchor})}hideTooltip(o){this.api.tooltips.hideByType(o)}setMaxEnabledAmount(o){const W=this.api.betAmounts.amounts.value.map((o=>o.value)).filter((W=>W<=o));return 0!==W.length&&(this.api.betAmounts.selectBetAmount(Math.max(...W)),this.showGenericToast({title:zo.T(yo.X.BetChangedUppercase),description:yo.X.ToastBetAmountDecreasedLowBalance}),!0)}hideWinnersList(){this.api.winnersList.hide()}showWinnersList(o){this.api.winnersList.setWinners([to.Ko(o.winnersCount,o.totalAmount),...o.winners.map((o=>({type:mo.Q.Winner,screenName:o.screenName,win:`${o.payout}`,multiplier:o.multiplier})))])}}var Bo=F(17775);function jo(o){return ko.mJ((()=>o.abstractGame.gameLoaded),(W=>{if(W){const W=o.device.isPortrait?Bo.PZ.GameInitPortrait:Bo.PZ.GameInitLandscape;o.sound.triggerEvent(W)}}),{fireImmediately:!0})}var Vo,wo=F(59181),Ko=((Vo=Ko||{})[Vo.Region=0]="Region",Vo[Vo.BoundingBox=1]="BoundingBox",Vo[Vo.Mesh=2]="Mesh",Vo[Vo.LinkedMesh=3]="LinkedMesh",Vo[Vo.Path=4]="Path",Vo[Vo.Point=5]="Point",Vo[Vo.Clipping=6]="Clipping",Vo);class To{constructor(o,W=new Array,F=0,E=new DataView(o.buffer)){this.strings=W,this.index=F,this.buffer=E}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){const o=this.buffer.getInt16(this.index);return this.index+=2,o}readInt32(){const o=this.buffer.getInt32(this.index);return this.index+=4,o}readInt(o){let W=this.readByte(),F=127&W;return 128&W&&(W=this.readByte(),F|=(127&W)<<7,128&W&&(W=this.readByte(),F|=(127&W)<<14,128&W&&(W=this.readByte(),F|=(127&W)<<21,128&W&&(W=this.readByte(),F|=(127&W)<<28)))),o?F:F>>>1^-(1&F)}readStringRef(){const o=this.readInt(!0);return 0==o?null:this.strings[o-1]}readString(){let o=this.readInt(!0);switch(o){case 0:return null;case 1:return""}o--;let W="";for(let F=0;F<o;){const o=this.readUnsignedByte();switch(o>>4){case 12:case 13:W+=String.fromCharCode((31&o)<<6|63&this.readByte()),F+=2;break;case 14:W+=String.fromCharCode((15&o)<<12|(63&this.readByte())<<6|63&this.readByte()),F+=3;break;default:W+=String.fromCharCode(o),F++}}return W}readFloat(){const o=this.buffer.getFloat32(this.index);return this.index+=4,o}readBoolean(){return 0!=this.readByte()}}var no,uo,$o,Yo,Qo,Co=((Qo=Co||{})[Qo.setup=0]="setup",Qo[Qo.first=1]="first",Qo[Qo.replace=2]="replace",Qo[Qo.add=3]="add",Qo),qo=((Yo=qo||{})[Yo.mixIn=0]="mixIn",Yo[Yo.mixOut=1]="mixOut",Yo),co=(($o=co||{})[$o.Fixed=0]="Fixed",$o[$o.Percent=1]="Percent",$o),_o=((uo=_o||{})[uo.Tangent=0]="Tangent",uo[uo.Chain=1]="Chain",uo[uo.ChainScale=2]="ChainScale",uo),Oo=((no=Oo||{})[no.Normal=0]="Normal",no[no.OnlyTranslation=1]="OnlyTranslation",no[no.NoRotationOrReflection=2]="NoRotationOrReflection",no[no.NoScale=3]="NoScale",no[no.NoScaleOrReflection=4]="NoScaleOrReflection",no),Xo=F(316197);function So(o){switch(o.toLowerCase()){case"nearest":return Ro.Nearest;case"linear":return Ro.Linear;case"mipmap":return Ro.MipMap;case"mipmapnearestnearest":return Ro.MipMapNearestNearest;case"mipmaplinearnearest":return Ro.MipMapLinearNearest;case"mipmapnearestlinear":return Ro.MipMapNearestLinear;case"mipmaplinearlinear":return Ro.MipMapLinearLinear;default:throw new Error(`Unknown texture filter ${o}`)}}var so,io,Ro=((io=Ro||{})[io.Nearest=9728]="Nearest",io[io.Linear=9729]="Linear",io[io.MipMap=9987]="MipMap",io[io.MipMapNearestNearest=9984]="MipMapNearestNearest",io[io.MipMapLinearNearest=9985]="MipMapLinearNearest",io[io.MipMapNearestLinear=9986]="MipMapNearestLinear",io[io.MipMapLinearLinear=9987]="MipMapLinearLinear",io),Jo=((so=Jo||{})[so.MirroredRepeat=33648]="MirroredRepeat",so[so.ClampToEdge=33071]="ClampToEdge",so[so.Repeat=10497]="Repeat",so);class Do{constructor(){this.size=null,this.names=null,this.values=null,this.renderObject=null}get width(){const o=this.texture;return o.trim?o.trim.width:o.orig.width}get height(){const o=this.texture;return o.trim?o.trim.height:o.orig.height}get u(){return this.texture._uvs.x0}get v(){return this.texture._uvs.y0}get u2(){return this.texture._uvs.x2}get v2(){return this.texture._uvs.y2}get offsetX(){const o=this.texture;return o.trim?o.trim.x:0}get offsetY(){return this.spineOffsetY}get pixiOffsetY(){const o=this.texture;return o.trim?o.trim.y:0}get spineOffsetY(){const o=this.texture;return this.originalHeight-this.height-(o.trim?o.trim.y:0)}get originalWidth(){return this.texture.orig.width}get originalHeight(){return this.texture.orig.height}get x(){return this.texture.frame.x}get y(){return this.texture.frame.y}get rotate(){return 0!==this.texture.rotate}get degrees(){return(360-45*this.texture.rotate)%360}}class Mo{constructor(){this.x=0,this.y=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.rotate=0,this.index=0}}class Ho{constructor(o,W,F){this.pages=new Array,this.regions=new Array,o&&this.addSpineAtlas(o,W,F)}addTexture(o,W){const F=this.pages;let E=null;for(let o=0;o<F.length;o++)if(F[o].baseTexture===W.baseTexture){E=F[o];break}if(null===E){E=new oW,E.name="texturePage";const o=W.baseTexture;E.width=o.realWidth,E.height=o.realHeight,E.baseTexture=o,E.minFilter=E.magFilter=Ro.Nearest,E.uWrap=Jo.ClampToEdge,E.vWrap=Jo.ClampToEdge,F.push(E)}const v=new WW;return v.name=o,v.page=E,v.texture=W,v.index=-1,this.regions.push(v),v}addTextureHash(o,W){for(const F in o)o.hasOwnProperty(F)&&this.addTexture(W&&-1!==F.indexOf(".")?F.substr(0,F.lastIndexOf(".")):F,o[F])}addSpineAtlas(o,W,F){return this.load(o,W,F)}load(o,W,F){if(null==W)throw new Error("textureLoader cannot be null.");const E=new bo(o),v=new Array(4);let a=null;const G={};let L=null;G.size=()=>{a.width=parseInt(v[1]),a.height=parseInt(v[2])},G.format=()=>{},G.filter=()=>{a.minFilter=So(v[1]),a.magFilter=So(v[2])},G.repeat=()=>{-1!=v[1].indexOf("x")&&(a.uWrap=Jo.Repeat),-1!=v[1].indexOf("y")&&(a.vWrap=Jo.Repeat)},G.pma=()=>{a.pma="true"==v[1]};const U={xy:()=>{L.x=parseInt(v[1]),L.y=parseInt(v[2])},size:()=>{L.width=parseInt(v[1]),L.height=parseInt(v[2])},bounds:()=>{L.x=parseInt(v[1]),L.y=parseInt(v[2]),L.width=parseInt(v[3]),L.height=parseInt(v[4])},offset:()=>{L.offsetX=parseInt(v[1]),L.offsetY=parseInt(v[2])},orig:()=>{L.originalWidth=parseInt(v[1]),L.originalHeight=parseInt(v[2])},offsets:()=>{L.offsetX=parseInt(v[1]),L.offsetY=parseInt(v[2]),L.originalWidth=parseInt(v[3]),L.originalHeight=parseInt(v[4])},rotate:()=>{const o=v[1];let W=0;W="true"==o.toLocaleLowerCase()?6:"false"==o.toLocaleLowerCase()?0:(720-parseFloat(o))%360/45,L.rotate=W},index:()=>{L.index=parseInt(v[1])}};let I=E.readLine();for(;null!=I&&0==I.trim().length;)I=E.readLine();for(;null!=I&&0!=I.trim().length&&0!=E.readEntry(v,I);)I=E.readLine();const l=()=>{for(;;){if(null==I)return F&&F(this);if(0==I.trim().length)a=null,I=E.readLine();else{if(null===a){for(a=new oW,a.name=I.trim();0!=E.readEntry(v,I=E.readLine());){const o=G[v[0]];o&&o()}this.pages.push(a),W(a.name,(o=>{if(null===o)return this.pages.splice(this.pages.indexOf(a),1),F&&F(null);a.baseTexture=o,a.pma&&(o.alphaMode=Xo.Gk.PMA),o.valid||o.setSize(a.width,a.height),a.setFilters(),a.width&&a.height||(a.width=o.realWidth,a.height=o.realHeight,a.width&&a.height||console.log(`ERROR spine atlas page ${a.name}: meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)`)),l()}));break}{L=new Mo;const o=new WW;o.name=I,o.page=a;let W=null,F=null;for(;;){const o=E.readEntry(v,I=E.readLine());if(0==o)break;const a=U[v[0]];if(a)a();else{null==W&&(W=[],F=[]),W.push(v[0]);const E=[];for(let W=0;W<o;W++)E.push(parseInt(v[W+1]));F.push(E)}}0==L.originalWidth&&0==L.originalHeight&&(L.originalWidth=L.width,L.originalHeight=L.height);const G=a.baseTexture.resolution;L.x/=G,L.y/=G,L.width/=G,L.height/=G,L.originalWidth/=G,L.originalHeight/=G,L.offsetX/=G,L.offsetY/=G;const l=L.rotate%4!=0,h=new Xo.M_(L.x,L.y,l?L.height:L.width,l?L.width:L.height),p=new Xo.M_(0,0,L.originalWidth,L.originalHeight),g=new Xo.M_(L.offsetX,L.originalHeight-L.height-L.offsetY,L.width,L.height);o.texture=new Xo.gP(o.page.baseTexture,h,p,g,L.rotate),o.index=L.index,o.texture.updateUvs(),this.regions.push(o)}}}};l()}findRegion(o){for(let W=0;W<this.regions.length;W++)if(this.regions[W].name==o)return this.regions[W];return null}dispose(){for(let o=0;o<this.pages.length;o++)this.pages[o].baseTexture.dispose()}}class bo{constructor(o){this.index=0,this.lines=o.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(o,W){if(null==W)return 0;if(0==(W=W.trim()).length)return 0;if(W.startsWith("http")||W.startsWith("data:"))return 0;const F=W.indexOf(":");if(-1==F)return 0;o[0]=W.substr(0,F).trim();for(let E=1,v=F+1;;E++){const F=W.indexOf(",",v);if(-1==F)return o[E]=W.substr(v).trim(),E;if(o[E]=W.substr(v,F-v).trim(),v=F+1,4==E)return 4}}}class oW{constructor(){this.minFilter=Ro.Nearest,this.magFilter=Ro.Nearest,this.uWrap=Jo.ClampToEdge,this.vWrap=Jo.ClampToEdge}setFilters(){const o=this.baseTexture,W=this.minFilter;W==Ro.Linear?o.scaleMode=Xo.M6.LINEAR:this.minFilter==Ro.Nearest?o.scaleMode=Xo.M6.NEAREST:(o.mipmap=Xo.E8.POW2,W==Ro.MipMapNearestNearest?o.scaleMode=Xo.M6.NEAREST:o.scaleMode=Xo.M6.LINEAR)}}class WW extends Do{}class FW{constructor(){this.array=new Array}add(o){const W=this.contains(o);return this.array[0|o]=0|o,!W}contains(o){return null!=this.array[0|o]}remove(o){this.array[0|o]=void 0}clear(){this.array.length=0}}class EW{constructor(){this.entries={},this.size=0}add(o){const W=this.entries[o];return this.entries[o]=!0,!W&&(this.size++,!0)}addAll(o){const W=this.size;for(let W=0,F=o.length;W<F;W++)this.add(o[W]);return W!=this.size}contains(o){return this.entries[o]}clear(){this.entries={},this.size=0}}const vW=class{constructor(o=0,W=0,F=0,E=0){this.r=o,this.g=W,this.b=F,this.a=E}set(o,W,F,E){return this.r=o,this.g=W,this.b=F,this.a=E,this.clamp()}setFromColor(o){return this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this}setFromString(o){return o="#"==o.charAt(0)?o.substr(1):o,this.r=parseInt(o.substr(0,2),16)/255,this.g=parseInt(o.substr(2,2),16)/255,this.b=parseInt(o.substr(4,2),16)/255,this.a=8!=o.length?1:parseInt(o.substr(6,2),16)/255,this}add(o,W,F,E){return this.r+=o,this.g+=W,this.b+=F,this.a+=E,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(o,W){o.r=((4278190080&W)>>>24)/255,o.g=((16711680&W)>>>16)/255,o.b=((65280&W)>>>8)/255,o.a=(255&W)/255}static rgb888ToColor(o,W){o.r=((16711680&W)>>>16)/255,o.g=((65280&W)>>>8)/255,o.b=(255&W)/255}static fromString(o){return(new vW).setFromString(o)}};let aW=vW;aW.WHITE=new vW(1,1,1,1),aW.RED=new vW(1,0,0,1),aW.GREEN=new vW(0,1,0,1),aW.BLUE=new vW(0,0,1,1),aW.MAGENTA=new vW(1,0,1,1);const GW=class{static clamp(o,W,F){return o<W?W:o>F?F:o}static cosDeg(o){return Math.cos(o*GW.degRad)}static sinDeg(o){return Math.sin(o*GW.degRad)}static signum(o){return Math.sign(o)}static toInt(o){return o>0?Math.floor(o):Math.ceil(o)}static cbrt(o){const W=Math.pow(Math.abs(o),1/3);return o<0?-W:W}static randomTriangular(o,W){return GW.randomTriangularWith(o,W,.5*(o+W))}static randomTriangularWith(o,W,F){const E=Math.random(),v=W-o;return E<=(F-o)/v?o+Math.sqrt(E*v*(F-o)):W-Math.sqrt((1-E)*v*(W-F))}static isPowerOfTwo(o){return o&&!(o&o-1)}};let LW=GW;LW.PI=3.1415927,LW.PI2=2*GW.PI,LW.radiansToDegrees=180/GW.PI,LW.radDeg=GW.radiansToDegrees,LW.degreesToRadians=GW.PI/180,LW.degRad=GW.degreesToRadians;class UW{apply(o,W,F){return o+(W-o)*this.applyInternal(F)}}class IW extends UW{constructor(o){super(),this.power=2,this.power=o}applyInternal(o){return o<=.5?Math.pow(2*o,this.power)/2:Math.pow(2*(o-1),this.power)/(this.power%2==0?-2:2)+1}}class lW extends IW{applyInternal(o){return Math.pow(o-1,this.power)*(this.power%2==0?-1:1)+1}}const hW=class{static arrayCopy(o,W,F,E,v){for(let a=W,G=E;a<W+v;a++,G++)F[G]=o[a]}static arrayFill(o,W,F,E){for(let v=W;v<F;v++)o[v]=E}static setArraySize(o,W,F=0){const E=o.length;if(E==W)return o;if(o.length=W,E<W)for(let v=E;v<W;v++)o[v]=F;return o}static ensureArrayCapacity(o,W,F=0){return o.length>=W?o:hW.setArraySize(o,W,F)}static newArray(o,W){const F=new Array(o);for(let E=0;E<o;E++)F[E]=W;return F}static newFloatArray(o){if(hW.SUPPORTS_TYPED_ARRAYS)return new Float32Array(o);const W=new Array(o);for(let o=0;o<W.length;o++)W[o]=0;return W}static newShortArray(o){if(hW.SUPPORTS_TYPED_ARRAYS)return new Int16Array(o);const W=new Array(o);for(let o=0;o<W.length;o++)W[o]=0;return W}static toFloatArray(o){return hW.SUPPORTS_TYPED_ARRAYS?new Float32Array(o):o}static toSinglePrecision(o){return hW.SUPPORTS_TYPED_ARRAYS?Math.fround(o):o}static webkit602BugfixHelper(o,W){}static contains(o,W,F=!0){for(let F=0;F<o.length;F++)if(o[F]==W)return!0;return!1}static enumValue(o,W){return o[W[0].toUpperCase()+W.slice(1)]}};let pW=hW;pW.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array;class gW{constructor(o){this.items=new Array,this.instantiator=o}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(o){o.reset&&o.reset(),this.items.push(o)}freeAll(o){for(let W=0;W<o.length;W++)this.free(o[W])}clear(){this.items.length=0}}class fW{constructor(o=0,W=0){this.x=o,this.y=W}set(o,W){return this.x=o,this.y=W,this}length(){const o=this.x,W=this.y;return Math.sqrt(o*o+W*W)}normalize(){const o=this.length();return 0!=o&&(this.x/=o,this.y/=o),this}}class AW{constructor(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new gW((()=>pW.newFloatArray(16)))}update(o,W){if(!o)throw new Error("skeleton cannot be null.");const F=this.boundingBoxes,E=this.polygons,v=this.polygonPool,a=o.slots,G=a.length;F.length=0,v.freeAll(E),E.length=0;for(let o=0;o<G;o++){const W=a[o];if(!W.bone.active)continue;const G=W.getAttachment();if(null!=G&&G.type===Ko.BoundingBox){const o=G;F.push(o);let a=v.obtain();a.length!=o.worldVerticesLength&&(a=pW.newFloatArray(o.worldVerticesLength)),E.push(a),o.computeWorldVertices(W,0,o.worldVerticesLength,a,0,2)}}W?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let o=Number.POSITIVE_INFINITY,W=Number.POSITIVE_INFINITY,F=Number.NEGATIVE_INFINITY,E=Number.NEGATIVE_INFINITY;const v=this.polygons;for(let a=0,G=v.length;a<G;a++){const G=v[a],L=G;for(let v=0,a=G.length;v<a;v+=2){const a=L[v],G=L[v+1];o=Math.min(o,a),W=Math.min(W,G),F=Math.max(F,a),E=Math.max(E,G)}}this.minX=o,this.minY=W,this.maxX=F,this.maxY=E}aabbContainsPoint(o,W){return o>=this.minX&&o<=this.maxX&&W>=this.minY&&W<=this.maxY}aabbIntersectsSegment(o,W,F,E){const v=this.minX,a=this.minY,G=this.maxX,L=this.maxY;if(o<=v&&F<=v||W<=a&&E<=a||o>=G&&F>=G||W>=L&&E>=L)return!1;const U=(E-W)/(F-o);let I=U*(v-o)+W;if(I>a&&I<L)return!0;if(I=U*(G-o)+W,I>a&&I<L)return!0;let l=(a-W)/U+o;return l>v&&l<G||(l=(L-W)/U+o,l>v&&l<G)}aabbIntersectsSkeleton(o){return this.minX<o.maxX&&this.maxX>o.minX&&this.minY<o.maxY&&this.maxY>o.minY}containsPoint(o,W){const F=this.polygons;for(let E=0,v=F.length;E<v;E++)if(this.containsPointPolygon(F[E],o,W))return this.boundingBoxes[E];return null}containsPointPolygon(o,W,F){const E=o,v=o.length;let a=v-2,G=!1;for(let o=0;o<v;o+=2){const v=E[o+1],L=E[a+1];if(v<F&&L>=F||L<F&&v>=F){const U=E[o];U+(F-v)/(L-v)*(E[a]-U)<W&&(G=!G)}a=o}return G}intersectsSegment(o,W,F,E){const v=this.polygons;for(let a=0,G=v.length;a<G;a++)if(this.intersectsSegmentPolygon(v[a],o,W,F,E))return this.boundingBoxes[a];return null}intersectsSegmentPolygon(o,W,F,E,v){const a=o,G=o.length,L=W-E,U=F-v,I=W*v-F*E;let l=a[G-2],h=a[G-1];for(let o=0;o<G;o+=2){const G=a[o],p=a[o+1],g=l*p-h*G,f=l-G,A=h-p,k=L*A-U*f,Z=(I*f-L*g)/k;if((Z>=l&&Z<=G||Z>=G&&Z<=l)&&(Z>=W&&Z<=E||Z>=E&&Z<=W)){const o=(I*A-U*g)/k;if((o>=h&&o<=p||o>=p&&o<=h)&&(o>=F&&o<=v||o>=v&&o<=F))return!0}l=G,h=p}return!1}getPolygon(o){if(!o)throw new Error("boundingBox cannot be null.");const W=this.boundingBoxes.indexOf(o);return-1==W?null:this.polygons[W]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}}const kW=!0,ZW=!1,PW=!0,yW=0;var zW=F(110715),xW=F(672076),NW=F(209218),eW=F(366628);const tW=[0,0,0];class mW extends xW.k{constructor(){super(...arguments),this.region=null,this.attachment=null}}class rW extends NW.g{constructor(o,W,F,E,v){super(o,W,F,E,v),this.region=null,this.attachment=null}}const BW=class extends zW.mc{constructor(o){if(super(),!o)throw new Error("The spineData param is required.");if("string"==typeof o)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');this.spineData=o,this.createSkeleton(o),this.slotContainers=[],this.tempClipContainers=[];for(let o=0,W=this.skeleton.slots.length;o<W;o++){const W=this.skeleton.slots[o],F=W.getAttachment(),E=this.newContainer();if(this.slotContainers.push(E),this.addChild(E),this.tempClipContainers.push(null),F)if(F.type===Ko.Region){const o=F.name,v=this.createSprite(W,F,o);W.currentSprite=v,W.currentSpriteName=o,E.addChild(v)}else if(F.type===Ko.Mesh){const o=this.createMesh(W,F);W.currentMesh=o,W.currentMeshId=F.id,W.currentMeshName=F.name,E.addChild(o)}else F.type===Ko.Clipping&&(this.createGraphics(W,F),E.addChild(W.clippingContainer),E.addChild(W.currentGraphics))}this.tintRgb=new Float32Array([1,1,1]),this.autoUpdate=!0,this.visible=!0}get debug(){return this._debug}set debug(o){var W;o!=this._debug&&(null===(W=this._debug)||void 0===W||W.unregisterSpine(this),null==o||o.registerSpine(this),this._debug=o)}get autoUpdate(){return this._autoUpdate}set autoUpdate(o){o!==this._autoUpdate&&(this._autoUpdate=o,this.updateTransform=o?BW.prototype.autoUpdateTransform:zW.mc.prototype.updateTransform)}get tint(){return Xo.Wp.rgb2hex(this.tintRgb)}set tint(o){this.tintRgb=Xo.Wp.hex2rgb(o,this.tintRgb)}get delayLimit(){return(void 0!==this.localDelayLimit?this.localDelayLimit:yW)||Number.MAX_VALUE}update(o){var W;const F=this.delayLimit;if(o>F&&(o=F),this.state.update(o),this.state.apply(this.skeleton),!this.skeleton)return;this.skeleton.updateWorldTransform();const E=this.skeleton.slots,v=this.color;let a=null,G=null;v?(a=v.light,G=v.dark):a=this.tintRgb;for(let o=0,W=E.length;o<W;o++){const W=E[o],F=W.getAttachment(),v=this.slotContainers[o];if(!F){v.visible=!1;continue}let L=null;F.sequence&&F.sequence.apply(W,F);let U=F.region;const I=F.color;switch(null!=F&&F.type){case Ko.Region:if(v.transform.setFromMatrix(W.bone.matrix),U=F.region,W.currentMesh&&(W.currentMesh.visible=!1,W.currentMesh=null,W.currentMeshId=void 0,W.currentMeshName=void 0),!U){W.currentSprite&&(W.currentSprite.renderable=!1);break}if(!W.currentSpriteName||W.currentSpriteName!==F.name){const o=F.name;if(W.currentSprite&&(W.currentSprite.visible=!1),W.sprites=W.sprites||{},void 0!==W.sprites[o])W.sprites[o].visible=!0;else{const E=this.createSprite(W,F,o);v.addChild(E)}W.currentSprite=W.sprites[o],W.currentSpriteName=o}W.currentSprite.renderable=!0,W.hackRegion||this.setSpriteRegion(F,W.currentSprite,U),W.currentSprite.color?L=W.currentSprite.color:(tW[0]=a[0]*W.color.r*I.r,tW[1]=a[1]*W.color.g*I.g,tW[2]=a[2]*W.color.b*I.b,W.currentSprite.tint=Xo.Wp.rgb2hex(tW)),W.currentSprite.blendMode=W.blendMode;break;case Ko.Mesh:if(W.currentSprite){W.currentSprite.visible=!1,W.currentSprite=null,W.currentSpriteName=void 0;const o=new Xo.dL;o._parentID=-1,o._worldID=v.transform._worldID,v.transform=o}if(!U){W.currentMesh&&(W.currentMesh.renderable=!1);break}const o=F.id;if(void 0===W.currentMeshId||W.currentMeshId!==o){const E=o;if(W.currentMesh&&(W.currentMesh.visible=!1),W.meshes=W.meshes||{},void 0!==W.meshes[E])W.meshes[E].visible=!0;else{const o=this.createMesh(W,F);v.addChild(o)}W.currentMesh=W.meshes[E],W.currentMeshName=F.name,W.currentMeshId=E}W.currentMesh.renderable=!0,F.computeWorldVerticesOld(W,W.currentMesh.vertices),W.currentMesh.color?L=W.currentMesh.color:(tW[0]=a[0]*W.color.r*I.r,tW[1]=a[1]*W.color.g*I.g,tW[2]=a[2]*W.color.b*I.b,W.currentMesh.tint=Xo.Wp.rgb2hex(tW)),W.currentMesh.blendMode=W.blendMode,W.hackRegion||this.setMeshRegion(F,W.currentMesh,U);break;case Ko.Clipping:W.currentGraphics||(this.createGraphics(W,F),v.addChild(W.clippingContainer),v.addChild(W.currentGraphics)),this.updateGraphics(W,F),v.alpha=1,v.visible=!0;continue;default:v.visible=!1;continue}if(v.visible=!0,L){let o=W.color.r*I.r,F=W.color.g*I.g,E=W.color.b*I.b;L.setLight(a[0]*o+G[0]*(1-o),a[1]*F+G[1]*(1-F),a[2]*E+G[2]*(1-E)),W.darkColor?(o=W.darkColor.r,F=W.darkColor.g,E=W.darkColor.b):(o=0,F=0,E=0),L.setDark(a[0]*o+G[0]*(1-o),a[1]*F+G[1]*(1-F),a[2]*E+G[2]*(1-E))}v.alpha=W.color.a}const L=this.skeleton.drawOrder;let U=null,I=null;for(let o=0,W=L.length;o<W;o++){const W=E[L[o].data.index],F=this.slotContainers[L[o].data.index];if(I||null!==F.parent&&F.parent!==this&&(F.parent.removeChild(F),F.parent=this),W.currentGraphics&&W.getAttachment())I=W.clippingContainer,U=W.getAttachment(),I.children.length=0,this.children[o]=F,U.endSlot===W.data&&(U.endSlot=null);else if(I){let E=this.tempClipContainers[o];E||(E=this.tempClipContainers[o]=this.newContainer(),E.visible=!1),this.children[o]=E,F.parent=null,I.addChild(F),U.endSlot==W.data&&(I.renderable=!0,I=null,U=null)}else this.children[o]=F}null===(W=this._debug)||void 0===W||W.renderDebug(this)}setSpriteRegion(o,W,F){W.attachment===o&&W.region===F||(W.region=F,W.attachment=o,W.texture=F.texture,W.rotation=o.rotation*LW.degRad,W.position.x=o.x,W.position.y=o.y,W.alpha=o.color.a,F.size?(W.scale.x=F.size.width/F.originalWidth,W.scale.y=-F.size.height/F.originalHeight):(W.scale.x=o.scaleX*o.width/F.originalWidth,W.scale.y=-o.scaleY*o.height/F.originalHeight))}setMeshRegion(o,W,F){W.attachment===o&&W.region===F||(W.region=F,W.attachment=o,W.texture=F.texture,F.texture.updateUvs(),W.uvBuffer.update(o.regionUVs))}autoUpdateTransform(){if(PW){this.lastTime=this.lastTime||Date.now();const o=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(o)}else this.lastTime=0;zW.mc.prototype.updateTransform.call(this)}createSprite(o,W,F){let E=W.region;o.hackAttachment===W&&(E=o.hackRegion);const v=E?E.texture:null,a=this.newSprite(v);return a.anchor.set(.5),E&&this.setSpriteRegion(W,a,W.region),o.sprites=o.sprites||{},o.sprites[F]=a,a}createMesh(o,W){let F=W.region;o.hackAttachment===W&&(F=o.hackRegion,o.hackAttachment=null,o.hackRegion=null);const E=this.newMesh(F?F.texture:null,new Float32Array(W.regionUVs.length),W.regionUVs,new Uint16Array(W.triangles),Xo._4.TRIANGLES);return void 0!==E._canvasPadding&&(E._canvasPadding=1.5),E.alpha=W.color.a,E.region=W.region,F&&this.setMeshRegion(W,E,F),o.meshes=o.meshes||{},o.meshes[W.id]=E,E}createGraphics(o,W){const F=this.newGraphics(),E=new Xo.tS([]);return F.clear(),F.beginFill(16777215,1),F.drawPolygon(E),F.renderable=!1,o.currentGraphics=F,o.clippingContainer=this.newContainer(),o.clippingContainer.mask=o.currentGraphics,F}updateGraphics(o,W){const F=o.currentGraphics.geometry,E=F.graphicsData[0].shape.points,v=W.worldVerticesLength;E.length=v,W.computeWorldVertices(o,0,v,E,0,2),F.invalidate()}hackTextureBySlotIndex(o,W=null,F=null){const E=this.skeleton.slots[o];if(!E)return!1;const v=E.getAttachment();let a=v.region;return W?(a=new Do,a.texture=W,a.size=F,E.hackRegion=a,E.hackAttachment=v):(E.hackRegion=null,E.hackAttachment=null),E.currentSprite?this.setSpriteRegion(v,E.currentSprite,a):E.currentMesh&&this.setMeshRegion(v,E.currentMesh,a),!0}hackTextureBySlotName(o,W=null,F=null){const E=this.skeleton.findSlotIndex(o);return-1!=E&&this.hackTextureBySlotIndex(E,W,F)}hackTextureAttachment(o,W,F,E=null){const v=this.skeleton.findSlotIndex(o),a=this.skeleton.getAttachmentByName(o,W);a.region.texture=F;const G=this.skeleton.slots[v];if(!G)return!1;const L=G.getAttachment();if(W===L.name){let o=a.region;return F?(o=new Do,o.texture=F,o.size=E,G.hackRegion=o,G.hackAttachment=L):(G.hackRegion=null,G.hackAttachment=null),G.currentSprite&&G.currentSprite.region!=o?(this.setSpriteRegion(L,G.currentSprite,o),G.currentSprite.region=o):G.currentMesh&&G.currentMesh.region!=o&&this.setMeshRegion(L,G.currentMesh,o),!0}return!1}newContainer(){return new zW.mc}newSprite(o){return new mW(o)}newGraphics(){return new eW.A1}newMesh(o,W,F,E,v){return new rW(o,W,F,E,v)}transformHack(){return 1}hackAttachmentGroups(o,W,F){if(!o)return;const E=[],v=[];for(let a=0,G=this.skeleton.slots.length;a<G;a++){const G=this.skeleton.slots[a],L=G.currentSpriteName||G.currentMeshName||"",U=G.currentSprite||G.currentMesh;L.endsWith(o)?(U.parentGroup=W,v.push(U)):F&&U&&(U.parentGroup=F,E.push(U))}return[E,v]}destroy(o){this.debug=null;for(let W=0,F=this.skeleton.slots.length;W<F;W++){const F=this.skeleton.slots[W];for(const W in F.meshes)F.meshes[W].destroy(o);F.meshes=null;for(const W in F.sprites)F.sprites[W].destroy(o);F.sprites=null}for(let W=0,F=this.slotContainers.length;W<F;W++)this.slotContainers[W].destroy(o);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,super.destroy(o)}};let jW=BW;jW.clippingPolygon=[],Object.defineProperty(jW.prototype,"visible",{get(){return this._visible},set(o){o!==this._visible&&(this._visible=o,o&&(this.lastTime=0))}});var VW=F(557108);const wW={extension:Xo.Ag.Asset,loader:{extension:{type:Xo.Ag.LoadParser,priority:VW.T9.Normal},test:o=>VW.WO(o,".atlas"),async load(o){const W=await Xo.W0.ADAPTER.fetch(o);return await W.text()},testParse(o,W){const F=VW.WO(W.src,".atlas"),E="string"==typeof o;return Promise.resolve(F&&E)},async parse(o,W,F){const E=W.data;let v=Xo.Wp.path.dirname(W.src);v&&v.lastIndexOf("/")!==v.length-1&&(v+="/");let a=null,G=null;const L=new Promise(((o,W)=>{a=o,G=W}));let U;const I=o=>{o||G("Something went terribly wrong loading a spine .atlas file\nMost likely your texture failed to load."),a(U)};if(E.image||E.images){const W=Object.assign(E.image?{default:E.image}:{},E.images);U=new Ho(o,((o,F)=>{const E=W[o]||W.default;E&&E.baseTexture?F(E.baseTexture):F(E)}),I)}else U=new Ho(o,KW(F,v,E.imageMetadata),I);return await L},unload(o){o.dispose()}}},KW=(o,W,F)=>async(W,E)=>{E((await o.load({src:W,data:F})).baseTexture)};function TW(o){return o.hasOwnProperty("bones")}Xo.XO.add(wW);class dW{constructor(){}installLoader(){const o=this,W={extension:Xo.Ag.Asset,loader:{extension:{type:Xo.Ag.LoadParser,priority:VW.T9.Normal},test:o=>VW.WO(o,".skel"),async load(o){const W=await Xo.W0.ADAPTER.fetch(o);return await W.arrayBuffer()},testParse(o,W){var F;const E=VW.WO(W.src,".json")&&TW(o),v=VW.WO(W.src,".skel")&&o instanceof ArrayBuffer,a=!1===(null===(F=W.data)||void 0===F?void 0:F.spineAtlas);return Promise.resolve(E&&!a||v)},async parse(W,F,E){var v;const a=Xo.Wp.path.extname(F.src).toLowerCase(),G=Xo.Wp.path.basename(F.src,a);let L=Xo.Wp.path.dirname(F.src);L&&L.lastIndexOf("/")!==L.length-1&&(L+="/");let U=null,I=W;VW.WO(F.src,".json")&&TW(W)?U=o.createJsonParser():(U=o.createBinaryParser(),I=new Uint8Array(W));const l=F.data||{},h=null!==(v=null==l?void 0:l.spineSkeletonScale)&&void 0!==v?v:null;h&&(U.scale=h);const p=l.spineAtlas;if(p&&p.pages)return o.parseData(U,p,I);const g=l.atlasRawData;if(g){let W=null,F=null;const v=new Promise(((o,E)=>{W=o,F=E})),a=new Ho(g,KW(E,L,l.imageMetadata),(o=>{o||F("Something went terribly wrong loading a spine .atlas file\nMost likely your texture failed to load."),W(a)})),G=await v;return o.parseData(U,G,I)}let f=l.spineAtlasFile;f||(f=`${L+G}.atlas`);const A=await E.load({src:f,data:l,alias:l.spineAtlasAlias});return o.parseData(U,A,I)}}};return Xo.XO.add(W),W}}class nW{constructor(o){if(null==o)throw new Error("name cannot be null.");this.name=o}}const uW=class extends nW{constructor(o){super(o),this.id=(65535&uW.nextID++)<<11,this.worldVerticesLength=0,this.deformAttachment=this}computeWorldVerticesOld(o,W){this.computeWorldVertices(o,0,this.worldVerticesLength,W,0,2)}computeWorldVertices(o,W,F,E,v,a){F=v+(F>>1)*a;const G=o.bone.skeleton,L=o.deform;let U=this.vertices;const I=this.bones;if(null==I){L.length>0&&(U=L);const G=o.bone.matrix,I=G.tx,l=G.ty,h=G.a,p=G.c,g=G.b,f=G.d;for(let o=W,G=v;G<F;o+=2,G+=a){const W=U[o],F=U[o+1];E[G]=W*h+F*p+I,E[G+1]=W*g+F*f+l}return}let l=0,h=0;for(let o=0;o<W;o+=2){const o=I[l];l+=o+1,h+=o}const p=G.bones;if(0==L.length)for(let o=v,W=3*h;o<F;o+=a){let F=0,v=0,a=I[l++];for(a+=l;l<a;l++,W+=3){const o=p[I[l]].matrix,E=U[W],a=U[W+1],G=U[W+2];F+=(E*o.a+a*o.c+o.tx)*G,v+=(E*o.b+a*o.d+o.ty)*G}E[o]=F,E[o+1]=v}else{const o=L;for(let W=v,G=3*h,L=h<<1;W<F;W+=a){let F=0,v=0,a=I[l++];for(a+=l;l<a;l++,G+=3,L+=2){const W=p[I[l]].matrix,E=U[G]+o[L],a=U[G+1]+o[L+1],h=U[G+2];F+=(E*W.a+a*W.c+W.tx)*h,v+=(E*W.b+a*W.d+W.ty)*h}E[W]=F,E[W+1]=v}}}copyTo(o){null!=this.bones?(o.bones=new Array(this.bones.length),pW.arrayCopy(this.bones,0,o.bones,0,this.bones.length)):o.bones=null,null!=this.vertices?(o.vertices=pW.newFloatArray(this.vertices.length),pW.arrayCopy(this.vertices,0,o.vertices,0,this.vertices.length)):o.vertices=null,o.worldVerticesLength=this.worldVerticesLength,o.deformAttachment=this.deformAttachment}};let $W=uW;$W.nextID=0;class YW extends $W{constructor(o){super(o),this.type=Ko.BoundingBox,this.color=new aW(1,1,1,1)}copy(){const o=new YW(this.name);return this.copyTo(o),o.color.setFromColor(this.color),o}}class QW extends $W{constructor(o){super(o),this.type=Ko.Clipping,this.color=new aW(.2275,.2275,.8078,1)}copy(){const o=new QW(this.name);return this.copyTo(o),o.endSlot=this.endSlot,o.color.setFromColor(this.color),o}}class CW extends $W{constructor(o){super(o),this.type=Ko.Mesh,this.color=new aW(1,1,1,1),this.tempColor=new aW(0,0,0,0)}getParentMesh(){return this.parentMesh}setParentMesh(o){this.parentMesh=o,null!=o&&(this.bones=o.bones,this.vertices=o.vertices,this.worldVerticesLength=o.worldVerticesLength,this.regionUVs=o.regionUVs,this.triangles=o.triangles,this.hullLength=o.hullLength,this.worldVerticesLength=o.worldVerticesLength)}copy(){if(null!=this.parentMesh)return this.newLinkedMesh();const o=new CW(this.name);return o.region=this.region,o.path=this.path,o.color.setFromColor(this.color),this.copyTo(o),o.regionUVs=new Float32Array(this.regionUVs.length),pW.arrayCopy(this.regionUVs,0,o.regionUVs,0,this.regionUVs.length),o.triangles=new Array(this.triangles.length),pW.arrayCopy(this.triangles,0,o.triangles,0,this.triangles.length),o.hullLength=this.hullLength,null!=this.edges&&(o.edges=new Array(this.edges.length),pW.arrayCopy(this.edges,0,o.edges,0,this.edges.length)),o.width=this.width,o.height=this.height,o}newLinkedMesh(){const o=new CW(this.name);return o.region=this.region,o.path=this.path,o.color.setFromColor(this.color),o.deformAttachment=this.deformAttachment,o.setParentMesh(null!=this.parentMesh?this.parentMesh:this),o}}class qW extends $W{constructor(o){super(o),this.type=Ko.Path,this.closed=!1,this.constantSpeed=!1,this.color=new aW(1,1,1,1)}copy(){const o=new qW(this.name);return this.copyTo(o),o.lengths=new Array(this.lengths.length),pW.arrayCopy(this.lengths,0,o.lengths,0,this.lengths.length),o.closed=closed,o.constantSpeed=this.constantSpeed,o.color.setFromColor(this.color),o}}class cW extends $W{constructor(o){super(o),this.type=Ko.Point,this.color=new aW(.38,.94,0,1)}computeWorldPosition(o,W){const F=o.matrix;return W.x=this.x*F.a+this.y*F.c+o.worldX,W.y=this.x*F.b+this.y*F.d+o.worldY,W}computeWorldRotation(o){const W=o.matrix,F=LW.cosDeg(this.rotation),E=LW.sinDeg(this.rotation),v=F*W.a+E*W.c,a=F*W.b+E*W.d;return Math.atan2(a,v)*LW.radDeg}copy(){const o=new cW(this.name);return o.x=this.x,o.y=this.y,o.rotation=this.rotation,o.color.setFromColor(this.color),o}}class _W{constructor(o,W){if(this.deform=new Array,null==o)throw new Error("data cannot be null.");if(null==W)throw new Error("bone cannot be null.");this.data=o,this.bone=W,this.color=new aW,this.darkColor=null==o.darkColor?null:new aW,this.setToSetupPose(),this.blendMode=this.data.blendMode}getAttachment(){return this.attachment}setAttachment(o){this.attachment!=o&&(this.attachment=o,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)}setAttachmentTime(o){this.attachmentTime=this.bone.skeleton.time-o}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))}}const OW=class extends nW{constructor(o){super(o),this.type=Ko.Region,this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new aW(1,1,1,1),this.offset=pW.newFloatArray(8),this.uvs=pW.newFloatArray(8),this.tempColor=new aW(1,1,1,1)}updateOffset(){const o=this.width/this.region.originalWidth*this.scaleX,W=this.height/this.region.originalHeight*this.scaleY,F=-this.width/2*this.scaleX+this.region.offsetX*o,E=-this.height/2*this.scaleY+this.region.offsetY*W,v=F+this.region.width*o,a=E+this.region.height*W,G=this.rotation*Math.PI/180,L=Math.cos(G),U=Math.sin(G),I=F*L+this.x,l=F*U,h=E*L+this.y,p=E*U,g=v*L+this.x,f=v*U,A=a*L+this.y,k=a*U,Z=this.offset;Z[OW.OX1]=I-p,Z[OW.OY1]=h+l,Z[OW.OX2]=I-k,Z[OW.OY2]=A+l,Z[OW.OX3]=g-k,Z[OW.OY3]=A+f,Z[OW.OX4]=g-p,Z[OW.OY4]=h+f}setRegion(o){this.region=o;const W=this.uvs;o.rotate?(W[2]=o.u,W[3]=o.v2,W[4]=o.u,W[5]=o.v,W[6]=o.u2,W[7]=o.v,W[0]=o.u2,W[1]=o.v2):(W[0]=o.u,W[1]=o.v2,W[2]=o.u,W[3]=o.v,W[4]=o.u2,W[5]=o.v,W[6]=o.u2,W[7]=o.v2)}computeWorldVertices(o,W,F,E){const v=this.offset,a=o instanceof _W?o.bone.matrix:o.matrix,G=a.tx,L=a.ty,U=a.a,I=a.c,l=a.b,h=a.d;let p=0,g=0;p=v[OW.OX1],g=v[OW.OY1],W[F]=p*U+g*I+G,W[F+1]=p*l+g*h+L,F+=E,p=v[OW.OX2],g=v[OW.OY2],W[F]=p*U+g*I+G,W[F+1]=p*l+g*h+L,F+=E,p=v[OW.OX3],g=v[OW.OY3],W[F]=p*U+g*I+G,W[F+1]=p*l+g*h+L,F+=E,p=v[OW.OX4],g=v[OW.OY4],W[F]=p*U+g*I+G,W[F+1]=p*l+g*h+L}copy(){const o=new OW(this.name);return o.region=this.region,o.rendererObject=this.rendererObject,o.path=this.path,o.x=this.x,o.y=this.y,o.scaleX=this.scaleX,o.scaleY=this.scaleY,o.rotation=this.rotation,o.width=this.width,o.height=this.height,pW.arrayCopy(this.uvs,0,o.uvs,0,8),pW.arrayCopy(this.offset,0,o.offset,0,8),o.color.setFromColor(this.color),o}};let XW=OW;XW.OX1=0,XW.OY1=1,XW.OX2=2,XW.OY2=3,XW.OX3=4,XW.OY3=5,XW.OX4=6,XW.OY4=7,XW.X1=0,XW.Y1=1,XW.C1R=2,XW.C1G=3,XW.C1B=4,XW.C1A=5,XW.U1=6,XW.V1=7,XW.X2=8,XW.Y2=9,XW.C2R=10,XW.C2G=11,XW.C2B=12,XW.C2A=13,XW.U2=14,XW.V2=15,XW.X3=16,XW.Y3=17,XW.C3R=18,XW.C3G=19,XW.C3B=20,XW.C3A=21,XW.U3=22,XW.V3=23,XW.X4=24,XW.Y4=25,XW.C4R=26,XW.C4G=27,XW.C4B=28,XW.C4A=29,XW.U4=30,XW.V4=31;class SW{constructor(o,W){this.jitterX=0,this.jitterY=0,this.jitterX=o,this.jitterY=W}begin(o){}transform(o,W,F,E){o.x+=LW.randomTriangular(-this.jitterX,this.jitterY),o.y+=LW.randomTriangular(-this.jitterX,this.jitterY)}end(){}}const sW=class{constructor(o){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=o}begin(o){this.worldX=o.x+this.centerX,this.worldY=o.y+this.centerY}transform(o,W,F,E){const v=this.angle*LW.degreesToRadians,a=o.x-this.worldX,G=o.y-this.worldY,L=Math.sqrt(a*a+G*G);if(L<this.radius){const W=sW.interpolation.apply(0,v,(this.radius-L)/this.radius),F=Math.cos(W),E=Math.sin(W);o.x=F*a-E*G+this.worldX,o.y=E*a+F*G+this.worldY}}end(){}};let iW=sW;iW.interpolation=new lW(2);class RW{constructor(o,W,F){if(null==o)throw new Error("name cannot be null.");if(null==W)throw new Error("timelines cannot be null.");this.name=o,this.timelines=W,this.timelineIds=[];for(let o=0;o<W.length;o++)this.timelineIds[W[o].getPropertyId()]=!0;this.duration=F}hasTimeline(o){return 1==this.timelineIds[o]}apply(o,W,F,E,v,a,G,L){if(null==o)throw new Error("skeleton cannot be null.");E&&0!=this.duration&&(F%=this.duration,W>0&&(W%=this.duration));const U=this.timelines;for(let E=0,I=U.length;E<I;E++)U[E].apply(o,W,F,v,a,G,L)}static binarySearch(o,W,F=1){let E=0,v=o.length/F-2;if(0==v)return F;let a=v>>>1;for(;;){if(o[(a+1)*F]<=W?E=a+1:v=a,E==v)return(E+1)*F;a=E+v>>>1}}static linearSearch(o,W,F){for(let E=0,v=o.length-F;E<=v;E+=F)if(o[E]>W)return E;return-1}}var JW,DW=((JW=DW||{})[JW.rotate=0]="rotate",JW[JW.translate=1]="translate",JW[JW.scale=2]="scale",JW[JW.shear=3]="shear",JW[JW.attachment=4]="attachment",JW[JW.color=5]="color",JW[JW.deform=6]="deform",JW[JW.event=7]="event",JW[JW.drawOrder=8]="drawOrder",JW[JW.ikConstraint=9]="ikConstraint",JW[JW.transformConstraint=10]="transformConstraint",JW[JW.pathConstraintPosition=11]="pathConstraintPosition",JW[JW.pathConstraintSpacing=12]="pathConstraintSpacing",JW[JW.pathConstraintMix=13]="pathConstraintMix",JW[JW.twoColor=14]="twoColor",JW);const MW=class{constructor(o){if(o<=0)throw new Error(`frameCount must be > 0: ${o}`);this.curves=pW.newFloatArray((o-1)*MW.BEZIER_SIZE)}getFrameCount(){return this.curves.length/MW.BEZIER_SIZE+1}setLinear(o){this.curves[o*MW.BEZIER_SIZE]=MW.LINEAR}setStepped(o){this.curves[o*MW.BEZIER_SIZE]=MW.STEPPED}getCurveType(o){const W=o*MW.BEZIER_SIZE;if(W==this.curves.length)return MW.LINEAR;const F=this.curves[W];return F==MW.LINEAR?MW.LINEAR:F==MW.STEPPED?MW.STEPPED:MW.BEZIER}setCurve(o,W,F,E,v){const a=.03*(2*-W+E),G=.03*(2*-F+v),L=.006*(3*(W-E)+1),U=.006*(3*(F-v)+1);let I=2*a+L,l=2*G+U,h=.3*W+a+.16666667*L,p=.3*F+G+.16666667*U,g=o*MW.BEZIER_SIZE;const f=this.curves;f[g++]=MW.BEZIER;let A=h,k=p;for(let o=g+MW.BEZIER_SIZE-1;g<o;g+=2)f[g]=A,f[g+1]=k,h+=I,p+=l,I+=L,l+=U,A+=h,k+=p}getCurvePercent(o,W){W=LW.clamp(W,0,1);const F=this.curves;let E=o*MW.BEZIER_SIZE;const v=F[E];if(v==MW.LINEAR)return W;if(v==MW.STEPPED)return 0;E++;let a=0;for(let o=E,v=E+MW.BEZIER_SIZE-1;E<v;E+=2)if(a=F[E],a>=W){let v,G;return E==o?(v=0,G=0):(v=F[E-2],G=F[E-1]),G+(F[E+1]-G)*(W-v)/(a-v)}const G=F[E-1];return G+(1-G)*(W-a)/(1-a)}};let HW=MW;HW.LINEAR=0,HW.STEPPED=1,HW.BEZIER=2,HW.BEZIER_SIZE=19;const bW=class extends HW{constructor(o){super(o),this.frames=pW.newFloatArray(o<<1)}getPropertyId(){return 0+this.boneIndex}setFrame(o,W,F){o<<=1,this.frames[o]=W,this.frames[o+bW.ROTATION]=F}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.bones[this.boneIndex];if(!U.active)return;if(F<L[0]){switch(a){case Co.setup:return void(U.rotation=U.data.rotation);case Co.first:const o=U.data.rotation-U.rotation;U.rotation+=(o-360*(16384-(16384.499999999996-o/360|0)))*v}return}if(F>=L[L.length-bW.ENTRIES]){let o=L[L.length+bW.PREV_ROTATION];switch(a){case Co.setup:U.rotation=U.data.rotation+o*v;break;case Co.first:case Co.replace:o+=U.data.rotation-U.rotation,o-=360*(16384-(16384.499999999996-o/360|0));case Co.add:U.rotation+=o*v}return}const I=RW.binarySearch(L,F,bW.ENTRIES),l=L[I+bW.PREV_ROTATION],h=L[I],p=this.getCurvePercent((I>>1)-1,1-(F-h)/(L[I+bW.PREV_TIME]-h));let g=L[I+bW.ROTATION]-l;switch(g=l+(g-360*(16384-(16384.499999999996-g/360|0)))*p,a){case Co.setup:U.rotation=U.data.rotation+(g-360*(16384-(16384.499999999996-g/360|0)))*v;break;case Co.first:case Co.replace:g+=U.data.rotation-U.rotation;case Co.add:U.rotation+=(g-360*(16384-(16384.499999999996-g/360|0)))*v}}};let oF=bW;oF.ENTRIES=2,oF.PREV_TIME=-2,oF.PREV_ROTATION=-1,oF.ROTATION=1;const WF=class extends HW{constructor(o){super(o),this.frames=pW.newFloatArray(o*WF.ENTRIES)}getPropertyId(){return(1<<24)+this.boneIndex}setFrame(o,W,F,E){o*=WF.ENTRIES,this.frames[o]=W,this.frames[o+WF.X]=F,this.frames[o+WF.Y]=E}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.bones[this.boneIndex];if(!U.active)return;if(F<L[0]){switch(a){case Co.setup:return U.x=U.data.x,void(U.y=U.data.y);case Co.first:U.x+=(U.data.x-U.x)*v,U.y+=(U.data.y-U.y)*v}return}let I=0,l=0;if(F>=L[L.length-WF.ENTRIES])I=L[L.length+WF.PREV_X],l=L[L.length+WF.PREV_Y];else{const o=RW.binarySearch(L,F,WF.ENTRIES);I=L[o+WF.PREV_X],l=L[o+WF.PREV_Y];const W=L[o],E=this.getCurvePercent(o/WF.ENTRIES-1,1-(F-W)/(L[o+WF.PREV_TIME]-W));I+=(L[o+WF.X]-I)*E,l+=(L[o+WF.Y]-l)*E}switch(a){case Co.setup:U.x=U.data.x+I*v,U.y=U.data.y+l*v;break;case Co.first:case Co.replace:U.x+=(U.data.x+I-U.x)*v,U.y+=(U.data.y+l-U.y)*v;break;case Co.add:U.x+=I*v,U.y+=l*v}}};let FF=WF;FF.ENTRIES=3,FF.PREV_TIME=-3,FF.PREV_X=-2,FF.PREV_Y=-1,FF.X=1,FF.Y=2;class EF extends FF{constructor(o){super(o)}getPropertyId(){return(2<<24)+this.boneIndex}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.bones[this.boneIndex];if(!U.active)return;if(F<L[0]){switch(a){case Co.setup:return U.scaleX=U.data.scaleX,void(U.scaleY=U.data.scaleY);case Co.first:U.scaleX+=(U.data.scaleX-U.scaleX)*v,U.scaleY+=(U.data.scaleY-U.scaleY)*v}return}let I=0,l=0;if(F>=L[L.length-EF.ENTRIES])I=L[L.length+EF.PREV_X]*U.data.scaleX,l=L[L.length+EF.PREV_Y]*U.data.scaleY;else{const o=RW.binarySearch(L,F,EF.ENTRIES);I=L[o+EF.PREV_X],l=L[o+EF.PREV_Y];const W=L[o],E=this.getCurvePercent(o/EF.ENTRIES-1,1-(F-W)/(L[o+EF.PREV_TIME]-W));I=(I+(L[o+EF.X]-I)*E)*U.data.scaleX,l=(l+(L[o+EF.Y]-l)*E)*U.data.scaleY}if(1==v)a==Co.add?(U.scaleX+=I-U.data.scaleX,U.scaleY+=l-U.data.scaleY):(U.scaleX=I,U.scaleY=l);else{let o=0,W=0;if(G==qo.mixOut)switch(a){case Co.setup:o=U.data.scaleX,W=U.data.scaleY,U.scaleX=o+(Math.abs(I)*LW.signum(o)-o)*v,U.scaleY=W+(Math.abs(l)*LW.signum(W)-W)*v;break;case Co.first:case Co.replace:o=U.scaleX,W=U.scaleY,U.scaleX=o+(Math.abs(I)*LW.signum(o)-o)*v,U.scaleY=W+(Math.abs(l)*LW.signum(W)-W)*v;break;case Co.add:o=U.scaleX,W=U.scaleY,U.scaleX=o+(Math.abs(I)*LW.signum(o)-U.data.scaleX)*v,U.scaleY=W+(Math.abs(l)*LW.signum(W)-U.data.scaleY)*v}else switch(a){case Co.setup:o=Math.abs(U.data.scaleX)*LW.signum(I),W=Math.abs(U.data.scaleY)*LW.signum(l),U.scaleX=o+(I-o)*v,U.scaleY=W+(l-W)*v;break;case Co.first:case Co.replace:o=Math.abs(U.scaleX)*LW.signum(I),W=Math.abs(U.scaleY)*LW.signum(l),U.scaleX=o+(I-o)*v,U.scaleY=W+(l-W)*v;break;case Co.add:o=LW.signum(I),W=LW.signum(l),U.scaleX=Math.abs(U.scaleX)*o+(I-Math.abs(U.data.scaleX)*o)*v,U.scaleY=Math.abs(U.scaleY)*W+(l-Math.abs(U.data.scaleY)*W)*v}}}}class vF extends FF{constructor(o){super(o)}getPropertyId(){return(3<<24)+this.boneIndex}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.bones[this.boneIndex];if(!U.active)return;if(F<L[0]){switch(a){case Co.setup:return U.shearX=U.data.shearX,void(U.shearY=U.data.shearY);case Co.first:U.shearX+=(U.data.shearX-U.shearX)*v,U.shearY+=(U.data.shearY-U.shearY)*v}return}let I=0,l=0;if(F>=L[L.length-vF.ENTRIES])I=L[L.length+vF.PREV_X],l=L[L.length+vF.PREV_Y];else{const o=RW.binarySearch(L,F,vF.ENTRIES);I=L[o+vF.PREV_X],l=L[o+vF.PREV_Y];const W=L[o],E=this.getCurvePercent(o/vF.ENTRIES-1,1-(F-W)/(L[o+vF.PREV_TIME]-W));I+=(L[o+vF.X]-I)*E,l+=(L[o+vF.Y]-l)*E}switch(a){case Co.setup:U.shearX=U.data.shearX+I*v,U.shearY=U.data.shearY+l*v;break;case Co.first:case Co.replace:U.shearX+=(U.data.shearX+I-U.shearX)*v,U.shearY+=(U.data.shearY+l-U.shearY)*v;break;case Co.add:U.shearX+=I*v,U.shearY+=l*v}}}const aF=class extends HW{constructor(o){super(o),this.frames=pW.newFloatArray(o*aF.ENTRIES)}getPropertyId(){return(5<<24)+this.slotIndex}setFrame(o,W,F,E,v,a){o*=aF.ENTRIES,this.frames[o]=W,this.frames[o+aF.R]=F,this.frames[o+aF.G]=E,this.frames[o+aF.B]=v,this.frames[o+aF.A]=a}apply(o,W,F,E,v,a,G){const L=o.slots[this.slotIndex];if(!L.bone.active)return;const U=this.frames;if(F<U[0]){switch(a){case Co.setup:return void L.color.setFromColor(L.data.color);case Co.first:const o=L.color,W=L.data.color;o.add((W.r-o.r)*v,(W.g-o.g)*v,(W.b-o.b)*v,(W.a-o.a)*v)}return}let I=0,l=0,h=0,p=0;if(F>=U[U.length-aF.ENTRIES]){const o=U.length;I=U[o+aF.PREV_R],l=U[o+aF.PREV_G],h=U[o+aF.PREV_B],p=U[o+aF.PREV_A]}else{const o=RW.binarySearch(U,F,aF.ENTRIES);I=U[o+aF.PREV_R],l=U[o+aF.PREV_G],h=U[o+aF.PREV_B],p=U[o+aF.PREV_A];const W=U[o],E=this.getCurvePercent(o/aF.ENTRIES-1,1-(F-W)/(U[o+aF.PREV_TIME]-W));I+=(U[o+aF.R]-I)*E,l+=(U[o+aF.G]-l)*E,h+=(U[o+aF.B]-h)*E,p+=(U[o+aF.A]-p)*E}if(1==v)L.color.set(I,l,h,p);else{const o=L.color;a==Co.setup&&o.setFromColor(L.data.color),o.add((I-o.r)*v,(l-o.g)*v,(h-o.b)*v,(p-o.a)*v)}}};let GF=aF;GF.ENTRIES=5,GF.PREV_TIME=-5,GF.PREV_R=-4,GF.PREV_G=-3,GF.PREV_B=-2,GF.PREV_A=-1,GF.R=1,GF.G=2,GF.B=3,GF.A=4;const LF=class extends HW{constructor(o){super(o),this.frames=pW.newFloatArray(o*LF.ENTRIES)}getPropertyId(){return(14<<24)+this.slotIndex}setFrame(o,W,F,E,v,a,G,L,U){o*=LF.ENTRIES,this.frames[o]=W,this.frames[o+LF.R]=F,this.frames[o+LF.G]=E,this.frames[o+LF.B]=v,this.frames[o+LF.A]=a,this.frames[o+LF.R2]=G,this.frames[o+LF.G2]=L,this.frames[o+LF.B2]=U}apply(o,W,F,E,v,a,G){const L=o.slots[this.slotIndex];if(!L.bone.active)return;const U=this.frames;if(F<U[0]){switch(a){case Co.setup:return L.color.setFromColor(L.data.color),void L.darkColor.setFromColor(L.data.darkColor);case Co.first:const o=L.color,W=L.darkColor,F=L.data.color,E=L.data.darkColor;o.add((F.r-o.r)*v,(F.g-o.g)*v,(F.b-o.b)*v,(F.a-o.a)*v),W.add((E.r-W.r)*v,(E.g-W.g)*v,(E.b-W.b)*v,0)}return}let I=0,l=0,h=0,p=0,g=0,f=0,A=0;if(F>=U[U.length-LF.ENTRIES]){const o=U.length;I=U[o+LF.PREV_R],l=U[o+LF.PREV_G],h=U[o+LF.PREV_B],p=U[o+LF.PREV_A],g=U[o+LF.PREV_R2],f=U[o+LF.PREV_G2],A=U[o+LF.PREV_B2]}else{const o=RW.binarySearch(U,F,LF.ENTRIES);I=U[o+LF.PREV_R],l=U[o+LF.PREV_G],h=U[o+LF.PREV_B],p=U[o+LF.PREV_A],g=U[o+LF.PREV_R2],f=U[o+LF.PREV_G2],A=U[o+LF.PREV_B2];const W=U[o],E=this.getCurvePercent(o/LF.ENTRIES-1,1-(F-W)/(U[o+LF.PREV_TIME]-W));I+=(U[o+LF.R]-I)*E,l+=(U[o+LF.G]-l)*E,h+=(U[o+LF.B]-h)*E,p+=(U[o+LF.A]-p)*E,g+=(U[o+LF.R2]-g)*E,f+=(U[o+LF.G2]-f)*E,A+=(U[o+LF.B2]-A)*E}if(1==v)L.color.set(I,l,h,p),L.darkColor.set(g,f,A,1);else{const o=L.color,W=L.darkColor;a==Co.setup&&(o.setFromColor(L.data.color),W.setFromColor(L.data.darkColor)),o.add((I-o.r)*v,(l-o.g)*v,(h-o.b)*v,(p-o.a)*v),W.add((g-W.r)*v,(f-W.g)*v,(A-W.b)*v,0)}}};let UF=LF;UF.ENTRIES=8,UF.PREV_TIME=-8,UF.PREV_R=-7,UF.PREV_G=-6,UF.PREV_B=-5,UF.PREV_A=-4,UF.PREV_R2=-3,UF.PREV_G2=-2,UF.PREV_B2=-1,UF.R=1,UF.G=2,UF.B=3,UF.A=4,UF.R2=5,UF.G2=6,UF.B2=7;class IF{constructor(o){this.frames=pW.newFloatArray(o),this.attachmentNames=new Array(o)}getPropertyId(){return(4<<24)+this.slotIndex}getFrameCount(){return this.frames.length}setFrame(o,W,F){this.frames[o]=W,this.attachmentNames[o]=F}apply(o,W,F,E,v,a,G){const L=o.slots[this.slotIndex];if(!L.bone.active)return;if(G==qo.mixOut)return void(a==Co.setup&&this.setAttachment(o,L,L.data.attachmentName));const U=this.frames;if(F<U[0])return void(a!=Co.setup&&a!=Co.first||this.setAttachment(o,L,L.data.attachmentName));let I=0;I=F>=U[U.length-1]?U.length-1:RW.binarySearch(U,F,1)-1;const l=this.attachmentNames[I];o.slots[this.slotIndex].setAttachment(null==l?null:o.getAttachment(this.slotIndex,l))}setAttachment(o,W,F){W.setAttachment(null==F?null:o.getAttachment(this.slotIndex,F))}}let lF=null;class hF extends HW{constructor(o){super(o),this.frames=pW.newFloatArray(o),this.frameVertices=new Array(o),null==lF&&(lF=pW.newFloatArray(64))}getPropertyId(){return(6<<27)+Number(this.attachment.id)+this.slotIndex}setFrame(o,W,F){this.frames[o]=W,this.frameVertices[o]=F}apply(o,W,F,E,v,a,G){const L=o.slots[this.slotIndex];if(!L.bone.active)return;const U=L.getAttachment();if(!(U instanceof $W)||U.deformAttachment!=this.attachment)return;const I=L.deform;0==I.length&&(a=Co.setup);const l=this.frameVertices,h=l[0].length,p=this.frames;if(F<p[0]){const o=U;switch(a){case Co.setup:return void(I.length=0);case Co.first:if(1==v){I.length=0;break}const W=pW.setArraySize(I,h);if(null==o.bones){const F=o.vertices;for(let o=0;o<h;o++)W[o]+=(F[o]-W[o])*v}else{v=1-v;for(let o=0;o<h;o++)W[o]*=v}}return}const g=pW.setArraySize(I,h);if(F>=p[p.length-1]){const o=l[p.length-1];if(1==v)if(a==Co.add){const W=U;if(null==W.bones){const F=W.vertices;for(let W=0;W<h;W++)g[W]+=o[W]-F[W]}else for(let W=0;W<h;W++)g[W]+=o[W]}else pW.arrayCopy(o,0,g,0,h);else switch(a){case Co.setup:{const W=U;if(null==W.bones){const F=W.vertices;for(let W=0;W<h;W++){const E=F[W];g[W]=E+(o[W]-E)*v}}else for(let W=0;W<h;W++)g[W]=o[W]*v;break}case Co.first:case Co.replace:for(let W=0;W<h;W++)g[W]+=(o[W]-g[W])*v;break;case Co.add:const W=U;if(null==W.bones){const F=W.vertices;for(let W=0;W<h;W++)g[W]+=(o[W]-F[W])*v}else for(let W=0;W<h;W++)g[W]+=o[W]*v}return}const f=RW.binarySearch(p,F),A=l[f-1],k=l[f],Z=p[f],P=this.getCurvePercent(f-1,1-(F-Z)/(p[f-1]-Z));if(1==v)if(a==Co.add){const o=U;if(null==o.bones){const W=o.vertices;for(let o=0;o<h;o++){const F=A[o];g[o]+=F+(k[o]-F)*P-W[o]}}else for(let o=0;o<h;o++){const W=A[o];g[o]+=W+(k[o]-W)*P}}else for(let o=0;o<h;o++){const W=A[o];g[o]=W+(k[o]-W)*P}else switch(a){case Co.setup:{const o=U;if(null==o.bones){const W=o.vertices;for(let o=0;o<h;o++){const F=A[o],E=W[o];g[o]=E+(F+(k[o]-F)*P-E)*v}}else for(let o=0;o<h;o++){const W=A[o];g[o]=(W+(k[o]-W)*P)*v}break}case Co.first:case Co.replace:for(let o=0;o<h;o++){const W=A[o];g[o]+=(W+(k[o]-W)*P-g[o])*v}break;case Co.add:const o=U;if(null==o.bones){const W=o.vertices;for(let o=0;o<h;o++){const F=A[o];g[o]+=(F+(k[o]-F)*P-W[o])*v}}else for(let o=0;o<h;o++){const W=A[o];g[o]+=(W+(k[o]-W)*P)*v}}}}class pF{constructor(o){this.frames=pW.newFloatArray(o),this.events=new Array(o)}getPropertyId(){return 7<<24}getFrameCount(){return this.frames.length}setFrame(o,W){this.frames[o]=W.time,this.events[o]=W}apply(o,W,F,E,v,a,G){if(null==E)return;const L=this.frames,U=this.frames.length;if(W>F)this.apply(o,W,Number.MAX_VALUE,E,v,a,G),W=-1;else if(W>=L[U-1])return;if(F<L[0])return;let I=0;if(W<L[0])I=0;else{I=RW.binarySearch(L,W);const o=L[I];for(;I>0&&L[I-1]==o;)I--}for(;I<U&&F>=L[I];I++)E.push(this.events[I])}}class gF{constructor(o){this.frames=pW.newFloatArray(o),this.drawOrders=new Array(o)}getPropertyId(){return 8<<24}getFrameCount(){return this.frames.length}setFrame(o,W,F){this.frames[o]=W,this.drawOrders[o]=F}apply(o,W,F,E,v,a,G){const L=o.drawOrder,U=o.slots;if(G==qo.mixOut&&a==Co.setup)return void pW.arrayCopy(o.slots,0,o.drawOrder,0,o.slots.length);const I=this.frames;if(F<I[0])return void(a!=Co.setup&&a!=Co.first||pW.arrayCopy(o.slots,0,o.drawOrder,0,o.slots.length));let l=0;l=F>=I[I.length-1]?I.length-1:RW.binarySearch(I,F)-1;const h=this.drawOrders[l];if(null==h)pW.arrayCopy(U,0,L,0,U.length);else for(let o=0,W=h.length;o<W;o++)L[o]=U[h[o]]}}const fF=class extends HW{constructor(o){super(o),this.frames=pW.newFloatArray(o*fF.ENTRIES)}getPropertyId(){return(9<<24)+this.ikConstraintIndex}setFrame(o,W,F,E,v,a,G){o*=fF.ENTRIES,this.frames[o]=W,this.frames[o+fF.MIX]=F,this.frames[o+fF.SOFTNESS]=E,this.frames[o+fF.BEND_DIRECTION]=v,this.frames[o+fF.COMPRESS]=a?1:0,this.frames[o+fF.STRETCH]=G?1:0}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.ikConstraints[this.ikConstraintIndex];if(!U.active)return;if(F<L[0]){switch(a){case Co.setup:return U.mix=U.data.mix,U.softness=U.data.softness,U.bendDirection=U.data.bendDirection,U.compress=U.data.compress,void(U.stretch=U.data.stretch);case Co.first:U.mix+=(U.data.mix-U.mix)*v,U.softness+=(U.data.softness-U.softness)*v,U.bendDirection=U.data.bendDirection,U.compress=U.data.compress,U.stretch=U.data.stretch}return}if(F>=L[L.length-fF.ENTRIES])return void(a==Co.setup?(U.mix=U.data.mix+(L[L.length+fF.PREV_MIX]-U.data.mix)*v,U.softness=U.data.softness+(L[L.length+fF.PREV_SOFTNESS]-U.data.softness)*v,G==qo.mixOut?(U.bendDirection=U.data.bendDirection,U.compress=U.data.compress,U.stretch=U.data.stretch):(U.bendDirection=L[L.length+fF.PREV_BEND_DIRECTION],U.compress=0!=L[L.length+fF.PREV_COMPRESS],U.stretch=0!=L[L.length+fF.PREV_STRETCH])):(U.mix+=(L[L.length+fF.PREV_MIX]-U.mix)*v,U.softness+=(L[L.length+fF.PREV_SOFTNESS]-U.softness)*v,G==qo.mixIn&&(U.bendDirection=L[L.length+fF.PREV_BEND_DIRECTION],U.compress=0!=L[L.length+fF.PREV_COMPRESS],U.stretch=0!=L[L.length+fF.PREV_STRETCH])));const I=RW.binarySearch(L,F,fF.ENTRIES),l=L[I+fF.PREV_MIX],h=L[I+fF.PREV_SOFTNESS],p=L[I],g=this.getCurvePercent(I/fF.ENTRIES-1,1-(F-p)/(L[I+fF.PREV_TIME]-p));a==Co.setup?(U.mix=U.data.mix+(l+(L[I+fF.MIX]-l)*g-U.data.mix)*v,U.softness=U.data.softness+(h+(L[I+fF.SOFTNESS]-h)*g-U.data.softness)*v,G==qo.mixOut?(U.bendDirection=U.data.bendDirection,U.compress=U.data.compress,U.stretch=U.data.stretch):(U.bendDirection=L[I+fF.PREV_BEND_DIRECTION],U.compress=0!=L[I+fF.PREV_COMPRESS],U.stretch=0!=L[I+fF.PREV_STRETCH])):(U.mix+=(l+(L[I+fF.MIX]-l)*g-U.mix)*v,U.softness+=(h+(L[I+fF.SOFTNESS]-h)*g-U.softness)*v,G==qo.mixIn&&(U.bendDirection=L[I+fF.PREV_BEND_DIRECTION],U.compress=0!=L[I+fF.PREV_COMPRESS],U.stretch=0!=L[I+fF.PREV_STRETCH]))}};let AF=fF;AF.ENTRIES=6,AF.PREV_TIME=-6,AF.PREV_MIX=-5,AF.PREV_SOFTNESS=-4,AF.PREV_BEND_DIRECTION=-3,AF.PREV_COMPRESS=-2,AF.PREV_STRETCH=-1,AF.MIX=1,AF.SOFTNESS=2,AF.BEND_DIRECTION=3,AF.COMPRESS=4,AF.STRETCH=5;const kF=class extends HW{constructor(o){super(o),this.frames=pW.newFloatArray(o*kF.ENTRIES)}getPropertyId(){return(10<<24)+this.transformConstraintIndex}setFrame(o,W,F,E,v,a){o*=kF.ENTRIES,this.frames[o]=W,this.frames[o+kF.ROTATE]=F,this.frames[o+kF.TRANSLATE]=E,this.frames[o+kF.SCALE]=v,this.frames[o+kF.SHEAR]=a}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.transformConstraints[this.transformConstraintIndex];if(!U.active)return;if(F<L[0]){const o=U.data;switch(a){case Co.setup:return U.rotateMix=o.rotateMix,U.translateMix=o.translateMix,U.scaleMix=o.scaleMix,void(U.shearMix=o.shearMix);case Co.first:U.rotateMix+=(o.rotateMix-U.rotateMix)*v,U.translateMix+=(o.translateMix-U.translateMix)*v,U.scaleMix+=(o.scaleMix-U.scaleMix)*v,U.shearMix+=(o.shearMix-U.shearMix)*v}return}let I=0,l=0,h=0,p=0;if(F>=L[L.length-kF.ENTRIES]){const o=L.length;I=L[o+kF.PREV_ROTATE],l=L[o+kF.PREV_TRANSLATE],h=L[o+kF.PREV_SCALE],p=L[o+kF.PREV_SHEAR]}else{const o=RW.binarySearch(L,F,kF.ENTRIES);I=L[o+kF.PREV_ROTATE],l=L[o+kF.PREV_TRANSLATE],h=L[o+kF.PREV_SCALE],p=L[o+kF.PREV_SHEAR];const W=L[o],E=this.getCurvePercent(o/kF.ENTRIES-1,1-(F-W)/(L[o+kF.PREV_TIME]-W));I+=(L[o+kF.ROTATE]-I)*E,l+=(L[o+kF.TRANSLATE]-l)*E,h+=(L[o+kF.SCALE]-h)*E,p+=(L[o+kF.SHEAR]-p)*E}if(a==Co.setup){const o=U.data;U.rotateMix=o.rotateMix+(I-o.rotateMix)*v,U.translateMix=o.translateMix+(l-o.translateMix)*v,U.scaleMix=o.scaleMix+(h-o.scaleMix)*v,U.shearMix=o.shearMix+(p-o.shearMix)*v}else U.rotateMix+=(I-U.rotateMix)*v,U.translateMix+=(l-U.translateMix)*v,U.scaleMix+=(h-U.scaleMix)*v,U.shearMix+=(p-U.shearMix)*v}};let ZF=kF;ZF.ENTRIES=5,ZF.PREV_TIME=-5,ZF.PREV_ROTATE=-4,ZF.PREV_TRANSLATE=-3,ZF.PREV_SCALE=-2,ZF.PREV_SHEAR=-1,ZF.ROTATE=1,ZF.TRANSLATE=2,ZF.SCALE=3,ZF.SHEAR=4;const PF=class extends HW{constructor(o){super(o),this.frames=pW.newFloatArray(o*PF.ENTRIES)}getPropertyId(){return(11<<24)+this.pathConstraintIndex}setFrame(o,W,F){o*=PF.ENTRIES,this.frames[o]=W,this.frames[o+PF.VALUE]=F}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.pathConstraints[this.pathConstraintIndex];if(!U.active)return;if(F<L[0]){switch(a){case Co.setup:return void(U.position=U.data.position);case Co.first:U.position+=(U.data.position-U.position)*v}return}let I=0;if(F>=L[L.length-PF.ENTRIES])I=L[L.length+PF.PREV_VALUE];else{const o=RW.binarySearch(L,F,PF.ENTRIES);I=L[o+PF.PREV_VALUE];const W=L[o],E=this.getCurvePercent(o/PF.ENTRIES-1,1-(F-W)/(L[o+PF.PREV_TIME]-W));I+=(L[o+PF.VALUE]-I)*E}a==Co.setup?U.position=U.data.position+(I-U.data.position)*v:U.position+=(I-U.position)*v}};let yF=PF;yF.ENTRIES=2,yF.PREV_TIME=-2,yF.PREV_VALUE=-1,yF.VALUE=1;class zF extends yF{constructor(o){super(o)}getPropertyId(){return(12<<24)+this.pathConstraintIndex}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.pathConstraints[this.pathConstraintIndex];if(!U.active)return;if(F<L[0]){switch(a){case Co.setup:return void(U.spacing=U.data.spacing);case Co.first:U.spacing+=(U.data.spacing-U.spacing)*v}return}let I=0;if(F>=L[L.length-zF.ENTRIES])I=L[L.length+zF.PREV_VALUE];else{const o=RW.binarySearch(L,F,zF.ENTRIES);I=L[o+zF.PREV_VALUE];const W=L[o],E=this.getCurvePercent(o/zF.ENTRIES-1,1-(F-W)/(L[o+zF.PREV_TIME]-W));I+=(L[o+zF.VALUE]-I)*E}a==Co.setup?U.spacing=U.data.spacing+(I-U.data.spacing)*v:U.spacing+=(I-U.spacing)*v}}const xF=class extends HW{constructor(o){super(o),this.frames=pW.newFloatArray(o*xF.ENTRIES)}getPropertyId(){return(13<<24)+this.pathConstraintIndex}setFrame(o,W,F,E){o*=xF.ENTRIES,this.frames[o]=W,this.frames[o+xF.ROTATE]=F,this.frames[o+xF.TRANSLATE]=E}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.pathConstraints[this.pathConstraintIndex];if(!U.active)return;if(F<L[0]){switch(a){case Co.setup:return U.rotateMix=U.data.rotateMix,void(U.translateMix=U.data.translateMix);case Co.first:U.rotateMix+=(U.data.rotateMix-U.rotateMix)*v,U.translateMix+=(U.data.translateMix-U.translateMix)*v}return}let I=0,l=0;if(F>=L[L.length-xF.ENTRIES])I=L[L.length+xF.PREV_ROTATE],l=L[L.length+xF.PREV_TRANSLATE];else{const o=RW.binarySearch(L,F,xF.ENTRIES);I=L[o+xF.PREV_ROTATE],l=L[o+xF.PREV_TRANSLATE];const W=L[o],E=this.getCurvePercent(o/xF.ENTRIES-1,1-(F-W)/(L[o+xF.PREV_TIME]-W));I+=(L[o+xF.ROTATE]-I)*E,l+=(L[o+xF.TRANSLATE]-l)*E}a==Co.setup?(U.rotateMix=U.data.rotateMix+(I-U.data.rotateMix)*v,U.translateMix=U.data.translateMix+(l-U.data.translateMix)*v):(U.rotateMix+=(I-U.rotateMix)*v,U.translateMix+=(l-U.translateMix)*v)}};let NF=xF;NF.ENTRIES=3,NF.PREV_TIME=-3,NF.PREV_ROTATE=-2,NF.PREV_TRANSLATE=-1,NF.ROTATE=1,NF.TRANSLATE=2;const eF=class{constructor(o){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new jF(this),this.propertyIDs=new FW,this.animationsChanged=!1,this.trackEntryPool=new gW((()=>new rF)),this.data=o}update(o){o*=this.timeScale;const W=this.tracks;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(null==E)continue;E.animationLast=E.nextAnimationLast,E.trackLast=E.nextTrackLast;let v=o*E.timeScale;if(E.delay>0){if(E.delay-=v,E.delay>0)continue;v=-E.delay,E.delay=0}let a=E.next;if(null!=a){const W=E.trackLast-a.delay;if(W>=0){for(a.delay=0,a.trackTime+=0==E.timeScale?0:(W/E.timeScale+o)*a.timeScale,E.trackTime+=v,this.setCurrent(F,a,!0);null!=a.mixingFrom;)a.mixTime+=o,a=a.mixingFrom;continue}}else if(E.trackLast>=E.trackEnd&&null==E.mixingFrom){W[F]=null,this.queue.end(E),this.disposeNext(E);continue}if(null!=E.mixingFrom&&this.updateMixingFrom(E,o)){let o=E.mixingFrom;for(E.mixingFrom=null,null!=o&&(o.mixingTo=null);null!=o;)this.queue.end(o),o=o.mixingFrom}E.trackTime+=v}this.queue.drain()}updateMixingFrom(o,W){const F=o.mixingFrom;if(null==F)return!0;const E=this.updateMixingFrom(F,W);return F.animationLast=F.nextAnimationLast,F.trackLast=F.nextTrackLast,o.mixTime>0&&o.mixTime>=o.mixDuration?(0!=F.totalAlpha&&0!=o.mixDuration||(o.mixingFrom=F.mixingFrom,null!=F.mixingFrom&&(F.mixingFrom.mixingTo=o),o.interruptAlpha=F.interruptAlpha,this.queue.end(F)),E):(F.trackTime+=W*F.timeScale,o.mixTime+=W,!1)}apply(o){if(null==o)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();const W=this.events,F=this.tracks;let E=!1;for(let v=0,a=F.length;v<a;v++){const a=F[v];if(null==a||a.delay>0)continue;E=!0;const G=0==v?Co.first:a.mixBlend;let L=a.alpha;null!=a.mixingFrom?L*=this.applyMixingFrom(a,o,G):a.trackTime>=a.trackEnd&&null==a.next&&(L=0);const U=a.animationLast,I=a.getAnimationTime(),l=a.animation.timelines.length,h=a.animation.timelines;if(0==v&&1==L||G==Co.add)for(let F=0;F<l;F++){pW.webkit602BugfixHelper(L,G);const E=h[F];E instanceof IF?this.applyAttachmentTimeline(E,o,I,G,!0):E.apply(o,U,I,W,L,G,qo.mixIn)}else{const F=a.timelineMode,E=0==a.timelinesRotation.length;E&&pW.setArraySize(a.timelinesRotation,l<<1,null);const v=a.timelinesRotation;for(let a=0;a<l;a++){const l=h[a],p=F[a]==eF.SUBSEQUENT?G:Co.setup;l instanceof oF?this.applyRotateTimeline(l,o,I,L,p,v,a<<1,E):l instanceof IF?this.applyAttachmentTimeline(l,o,I,G,!0):(pW.webkit602BugfixHelper(L,G),l.apply(o,U,I,W,L,p,qo.mixIn))}}this.queueEvents(a,I),W.length=0,a.nextAnimationLast=I,a.nextTrackLast=a.trackTime}const v=this.unkeyedState+eF.SETUP,a=o.slots;for(let W=0,F=o.slots.length;W<F;W++){const F=a[W];if(F.attachmentState==v){const W=F.data.attachmentName;F.setAttachment(null==W?null:o.getAttachment(F.data.index,W))}}return this.unkeyedState+=2,this.queue.drain(),E}applyMixingFrom(o,W,F){const E=o.mixingFrom;null!=E.mixingFrom&&this.applyMixingFrom(E,W,F);let v=0;0==o.mixDuration?(v=1,F==Co.first&&(F=Co.setup)):(v=o.mixTime/o.mixDuration,v>1&&(v=1),F!=Co.first&&(F=E.mixBlend));const a=v<E.eventThreshold?this.events:null,G=v<E.attachmentThreshold,L=v<E.drawOrderThreshold,U=E.animationLast,I=E.getAnimationTime(),l=E.animation.timelines.length,h=E.animation.timelines,p=E.alpha*o.interruptAlpha,g=p*(1-v);if(F==Co.add)for(let o=0;o<l;o++)h[o].apply(W,U,I,a,g,F,qo.mixOut);else{const o=E.timelineMode,v=E.timelineHoldMix,f=0==E.timelinesRotation.length;f&&pW.setArraySize(E.timelinesRotation,l<<1,null);const A=E.timelinesRotation;E.totalAlpha=0;for(let k=0;k<l;k++){const l=h[k];let Z,P=qo.mixOut,y=0;switch(o[k]){case eF.SUBSEQUENT:if(!L&&l instanceof gF)continue;Z=F,y=g;break;case eF.FIRST:Z=Co.setup,y=g;break;case eF.HOLD_SUBSEQUENT:Z=F,y=p;break;case eF.HOLD_FIRST:Z=Co.setup,y=p;break;default:Z=Co.setup;const o=v[k];y=p*Math.max(0,1-o.mixTime/o.mixDuration)}E.totalAlpha+=y,l instanceof oF?this.applyRotateTimeline(l,W,I,y,Z,A,k<<1,f):l instanceof IF?this.applyAttachmentTimeline(l,W,I,Z,G):(pW.webkit602BugfixHelper(y,F),L&&l instanceof gF&&Z==Co.setup&&(P=qo.mixIn),l.apply(W,U,I,a,y,Z,P))}}return o.mixDuration>0&&this.queueEvents(E,I),this.events.length=0,E.nextAnimationLast=I,E.nextTrackLast=E.trackTime,v}applyAttachmentTimeline(o,W,F,E,v){const a=W.slots[o.slotIndex];if(!a.bone.active)return;const G=o.frames;if(F<G[0])E!=Co.setup&&E!=Co.first||this.setAttachment(W,a,a.data.attachmentName,v);else{let E;E=F>=G[G.length-1]?G.length-1:RW.binarySearch(G,F)-1,this.setAttachment(W,a,o.attachmentNames[E],v)}a.attachmentState<=this.unkeyedState&&(a.attachmentState=this.unkeyedState+eF.SETUP)}setAttachment(o,W,F,E){W.setAttachment(null==F?null:o.getAttachment(W.data.index,F)),E&&(W.attachmentState=this.unkeyedState+eF.CURRENT)}applyRotateTimeline(o,W,F,E,v,a,G,L){if(L&&(a[G]=0),1==E)return void o.apply(W,0,F,null,1,v,qo.mixIn);const U=o,I=U.frames,l=W.bones[U.boneIndex];if(!l.active)return;let h=0,p=0;if(F<I[0])switch(v){case Co.setup:l.rotation=l.data.rotation;default:return;case Co.first:h=l.rotation,p=l.data.rotation}else if(h=v==Co.setup?l.data.rotation:l.rotation,F>=I[I.length-oF.ENTRIES])p=l.data.rotation+I[I.length+oF.PREV_ROTATION];else{const o=RW.binarySearch(I,F,oF.ENTRIES),W=I[o+oF.PREV_ROTATION],E=I[o],v=U.getCurvePercent((o>>1)-1,1-(F-E)/(I[o+oF.PREV_TIME]-E));p=I[o+oF.ROTATION]-W,p-=360*(16384-(16384.499999999996-p/360|0)),p=W+p*v+l.data.rotation,p-=360*(16384-(16384.499999999996-p/360|0))}let g=0,f=p-h;if(f-=360*(16384-(16384.499999999996-f/360|0)),0==f)g=a[G];else{let o=0,W=0;L?(o=0,W=f):(o=a[G],W=a[G+1]);const F=f>0;let E=o>=0;LW.signum(W)!=LW.signum(f)&&Math.abs(W)<=90&&(Math.abs(o)>180&&(o+=360*LW.signum(o)),E=F),g=f+o-o%360,E!=F&&(g+=360*LW.signum(o)),a[G]=g}a[G+1]=f,h+=g*E,l.rotation=h-360*(16384-(16384.499999999996-h/360|0))}queueEvents(o,W){const F=o.animationStart,E=o.animationEnd,v=E-F,a=o.trackLast%v,G=this.events;let L=0;const U=G.length;for(;L<U;L++){const W=G[L];if(W.time<a)break;W.time>E||this.queue.event(o,W)}let I=!1;for(I=o.loop?0==v||a>o.trackTime%v:W>=E&&o.animationLast<E,I&&this.queue.complete(o);L<U;L++)G[L].time<F||this.queue.event(o,G[L])}clearTracks(){const o=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let o=0,W=this.tracks.length;o<W;o++)this.clearTrack(o);this.tracks.length=0,this.queue.drainDisabled=o,this.queue.drain()}clearTrack(o){if(o>=this.tracks.length)return;const W=this.tracks[o];if(null==W)return;this.queue.end(W),this.disposeNext(W);let F=W;for(;;){const o=F.mixingFrom;if(null==o)break;this.queue.end(o),F.mixingFrom=null,F.mixingTo=null,F=o}this.tracks[W.trackIndex]=null,this.queue.drain()}setCurrent(o,W,F){const E=this.expandToIndex(o);this.tracks[o]=W,null!=E&&(F&&this.queue.interrupt(E),W.mixingFrom=E,E.mixingTo=W,W.mixTime=0,null!=E.mixingFrom&&E.mixDuration>0&&(W.interruptAlpha*=Math.min(1,E.mixTime/E.mixDuration)),E.timelinesRotation.length=0),this.queue.start(W)}setAnimation(o,W,F){const E=this.data.skeletonData.findAnimation(W);if(null==E)throw new Error(`Animation not found: ${W}`);return this.setAnimationWith(o,E,F)}setAnimationWith(o,W,F){if(null==W)throw new Error("animation cannot be null.");let E=!0,v=this.expandToIndex(o);null!=v&&(-1==v.nextTrackLast?(this.tracks[o]=v.mixingFrom,this.queue.interrupt(v),this.queue.end(v),this.disposeNext(v),v=v.mixingFrom,E=!1):this.disposeNext(v));const a=this.trackEntry(o,W,F,v);return this.setCurrent(o,a,E),this.queue.drain(),a}addAnimation(o,W,F,E){const v=this.data.skeletonData.findAnimation(W);if(null==v)throw new Error(`Animation not found: ${W}`);return this.addAnimationWith(o,v,F,E)}addAnimationWith(o,W,F,E){if(null==W)throw new Error("animation cannot be null.");let v=this.expandToIndex(o);if(null!=v)for(;null!=v.next;)v=v.next;const a=this.trackEntry(o,W,F,v);if(null==v)this.setCurrent(o,a,!0),this.queue.drain();else if(v.next=a,E<=0){const o=v.animationEnd-v.animationStart;0!=o?(v.loop?E+=o*(1+(v.trackTime/o|0)):E+=Math.max(o,v.trackTime),E-=this.data.getMix(v.animation,W)):E=v.trackTime}return a.delay=E,a}setEmptyAnimation(o,W){const F=this.setAnimationWith(o,eF.emptyAnimation,!1);return F.mixDuration=W,F.trackEnd=W,F}addEmptyAnimation(o,W,F){F<=0&&(F-=W);const E=this.addAnimationWith(o,eF.emptyAnimation,!1,F);return E.mixDuration=W,E.trackEnd=W,E}setEmptyAnimations(o){const W=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let W=0,F=this.tracks.length;W<F;W++){const F=this.tracks[W];null!=F&&this.setEmptyAnimation(F.trackIndex,o)}this.queue.drainDisabled=W,this.queue.drain()}expandToIndex(o){return o<this.tracks.length?this.tracks[o]:(pW.ensureArrayCapacity(this.tracks,o+1,null),this.tracks.length=o+1,null)}trackEntry(o,W,F,E){const v=this.trackEntryPool.obtain();return v.trackIndex=o,v.animation=W,v.loop=F,v.holdPrevious=!1,v.eventThreshold=0,v.attachmentThreshold=0,v.drawOrderThreshold=0,v.animationStart=0,v.animationEnd=W.duration,v.animationLast=-1,v.nextAnimationLast=-1,v.delay=0,v.trackTime=0,v.trackLast=-1,v.nextTrackLast=-1,v.trackEnd=Number.MAX_VALUE,v.timeScale=1,v.alpha=1,v.interruptAlpha=1,v.mixTime=0,v.mixDuration=null==E?0:this.data.getMix(E.animation,W),v.mixBlend=Co.replace,v}disposeNext(o){let W=o.next;for(;null!=W;)this.queue.dispose(W),W=W.next;o.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();for(let o=0,W=this.tracks.length;o<W;o++){let W=this.tracks[o];if(null!=W){for(;null!=W.mixingFrom;)W=W.mixingFrom;do{null!=W.mixingFrom&&W.mixBlend==Co.add||this.computeHold(W),W=W.mixingTo}while(null!=W)}}}computeHold(o){const W=o.mixingTo,F=o.animation.timelines,E=o.animation.timelines.length,v=pW.setArraySize(o.timelineMode,E);o.timelineHoldMix.length=0;const a=pW.setArraySize(o.timelineHoldMix,E),G=this.propertyIDs;if(null!=W&&W.holdPrevious)for(let o=0;o<E;o++)v[o]=G.add(F[o].getPropertyId())?eF.HOLD_FIRST:eF.HOLD_SUBSEQUENT;else o:for(let L=0;L<E;L++){const E=F[L],U=E.getPropertyId();if(G.add(U))if(null==W||E instanceof IF||E instanceof gF||E instanceof pF||!W.animation.hasTimeline(U))v[L]=eF.FIRST;else{for(let F=W.mixingTo;null!=F;F=F.mixingTo)if(!F.animation.hasTimeline(U)){if(o.mixDuration>0){v[L]=eF.HOLD_MIX,a[L]=F;continue o}break}v[L]=eF.HOLD_FIRST}else v[L]=eF.SUBSEQUENT}}getCurrent(o){return o>=this.tracks.length?null:this.tracks[o]}addListener(o){if(null==o)throw new Error("listener cannot be null.");this.listeners.push(o)}removeListener(o){const W=this.listeners.indexOf(o);W>=0&&this.listeners.splice(W,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}setAnimationByName(o,W,F){eF.deprecatedWarning1||(eF.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(o,W,F)}addAnimationByName(o,W,F,E){eF.deprecatedWarning2||(eF.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(o,W,F,E)}hasAnimation(o){return null!==this.data.skeletonData.findAnimation(o)}hasAnimationByName(o){return eF.deprecatedWarning3||(eF.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(o)}};let tF=eF;tF.emptyAnimation=new RW("<empty>",[],0),tF.SUBSEQUENT=0,tF.FIRST=1,tF.HOLD_SUBSEQUENT=2,tF.HOLD_FIRST=3,tF.HOLD_MIX=4,tF.SETUP=1,tF.CURRENT=2,tF.deprecatedWarning1=!1,tF.deprecatedWarning2=!1,tF.deprecatedWarning3=!1;const mF=class{constructor(){this.mixBlend=Co.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){const o=this.animationEnd-this.animationStart;return 0==o?this.animationStart:this.trackTime%o+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(o){this.animationLast=o,this.nextAnimationLast=o}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}get time(){return mF.deprecatedWarning1||(mF.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime}set time(o){mF.deprecatedWarning1||(mF.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=o}get endTime(){return mF.deprecatedWarning2||(mF.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime}set endTime(o){mF.deprecatedWarning2||(mF.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=o}loopsCount(){return Math.floor(this.trackTime/this.trackEnd)}};let rF=mF;rF.deprecatedWarning1=!1,rF.deprecatedWarning2=!1;const BF=class{constructor(o){this.objects=[],this.drainDisabled=!1,this.animState=o}start(o){this.objects.push(wF.start),this.objects.push(o),this.animState.animationsChanged=!0}interrupt(o){this.objects.push(wF.interrupt),this.objects.push(o)}end(o){this.objects.push(wF.end),this.objects.push(o),this.animState.animationsChanged=!0}dispose(o){this.objects.push(wF.dispose),this.objects.push(o)}complete(o){this.objects.push(wF.complete),this.objects.push(o)}event(o,W){this.objects.push(wF.event),this.objects.push(o),this.objects.push(W)}deprecateStuff(){return BF.deprecatedWarning1||(BF.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;const o=this.objects,W=this.animState.listeners;for(let F=0;F<o.length;F+=2){const E=o[F],v=o[F+1];switch(E){case wF.start:null!=v.listener&&v.listener.start&&v.listener.start(v);for(let o=0;o<W.length;o++)W[o].start&&W[o].start(v);v.onStart&&this.deprecateStuff()&&v.onStart(v.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(v.trackIndex);break;case wF.interrupt:null!=v.listener&&v.listener.interrupt&&v.listener.interrupt(v);for(let o=0;o<W.length;o++)W[o].interrupt&&W[o].interrupt(v);break;case wF.end:null!=v.listener&&v.listener.end&&v.listener.end(v);for(let o=0;o<W.length;o++)W[o].end&&W[o].end(v);v.onEnd&&this.deprecateStuff()&&v.onEnd(v.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(v.trackIndex);case wF.dispose:null!=v.listener&&v.listener.dispose&&v.listener.dispose(v);for(let o=0;o<W.length;o++)W[o].dispose&&W[o].dispose(v);this.animState.trackEntryPool.free(v);break;case wF.complete:null!=v.listener&&v.listener.complete&&v.listener.complete(v);for(let o=0;o<W.length;o++)W[o].complete&&W[o].complete(v);const E=LW.toInt(v.loopsCount());v.onComplete&&this.deprecateStuff()&&v.onComplete(v.trackIndex,E),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(v.trackIndex,E);break;case wF.event:const a=o[2+F++];null!=v.listener&&v.listener.event&&v.listener.event(v,a);for(let o=0;o<W.length;o++)W[o].event&&W[o].event(v,a);v.onEvent&&this.deprecateStuff()&&v.onEvent(v.trackIndex,a),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(v.trackIndex,a)}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}};let jF=BF;jF.deprecatedWarning1=!1;var VF,wF=((VF=wF||{})[VF.start=0]="start",VF[VF.interrupt=1]="interrupt",VF[VF.end=2]="end",VF[VF.dispose=3]="dispose",VF[VF.complete=4]="complete",VF[VF.event=5]="event",VF);class KF{start(o){}interrupt(o){}end(o){}dispose(o){}complete(o){}event(o,W){}}const TF=class{constructor(o){if(this.animationToMixTime={},this.defaultMix=0,null==o)throw new Error("skeletonData cannot be null.");this.skeletonData=o}setMix(o,W,F){const E=this.skeletonData.findAnimation(o);if(null==E)throw new Error(`Animation not found: ${o}`);const v=this.skeletonData.findAnimation(W);if(null==v)throw new Error(`Animation not found: ${W}`);this.setMixWith(E,v,F)}setMixByName(o,W,F){TF.deprecatedWarning1||(TF.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(o,W,F)}setMixWith(o,W,F){if(null==o)throw new Error("from cannot be null.");if(null==W)throw new Error("to cannot be null.");const E=`${o.name}.${W.name}`;this.animationToMixTime[E]=F}getMix(o,W){const F=`${o.name}.${W.name}`,E=this.animationToMixTime[F];return void 0===E?this.defaultMix:E}};let dF=TF;dF.deprecatedWarning1=!1;class nF{constructor(o){this.atlas=o}newRegionAttachment(o,W,F){const E=this.atlas.findRegion(F);if(null==E)throw new Error(`Region not found in atlas: ${F} (region attachment: ${W})`);const v=new XW(W);return v.region=E,v}newMeshAttachment(o,W,F){const E=this.atlas.findRegion(F);if(null==E)throw new Error(`Region not found in atlas: ${F} (mesh attachment: ${W})`);const v=new CW(W);return v.region=E,v}newBoundingBoxAttachment(o,W){return new YW(W)}newPathAttachment(o,W){return new qW(W)}newPointAttachment(o,W){return new cW(W)}newClippingAttachment(o,W){return new QW(W)}}class uF{constructor(o,W,F){if(this.matrix=new Xo.uq,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,null==o)throw new Error("data cannot be null.");if(null==W)throw new Error("skeleton cannot be null.");this.data=o,this.skeleton=W,this.parent=F,this.setToSetupPose()}get worldX(){return this.matrix.tx}get worldY(){return this.matrix.ty}isActive(){return this.active}update(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(o,W,F,E,v,a,G){this.ax=o,this.ay=W,this.arotation=F,this.ascaleX=E,this.ascaleY=v,this.ashearX=a,this.ashearY=G,this.appliedValid=!0;const L=this.parent,U=this.matrix,I=this.skeleton.scaleX,l=kW?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==L){const L=this.skeleton,h=F+90+G;return U.a=LW.cosDeg(F+a)*E*I,U.c=LW.cosDeg(h)*v*I,U.b=LW.sinDeg(F+a)*E*l,U.d=LW.sinDeg(h)*v*l,U.tx=o*I+L.x,void(U.ty=W*l+L.y)}let h=L.matrix.a,p=L.matrix.c,g=L.matrix.b,f=L.matrix.d;switch(U.tx=h*o+p*W+L.matrix.tx,U.ty=g*o+f*W+L.matrix.ty,this.data.transformMode){case Oo.Normal:{const o=F+90+G,W=LW.cosDeg(F+a)*E,L=LW.cosDeg(o)*v,I=LW.sinDeg(F+a)*E,l=LW.sinDeg(o)*v;return U.a=h*W+p*I,U.c=h*L+p*l,U.b=g*W+f*I,void(U.d=g*L+f*l)}case Oo.OnlyTranslation:{const o=F+90+G;U.a=LW.cosDeg(F+a)*E,U.c=LW.cosDeg(o)*v,U.b=LW.sinDeg(F+a)*E,U.d=LW.sinDeg(o)*v;break}case Oo.NoRotationOrReflection:{let o=h*h+g*g,W=0;o>1e-4?(o=Math.abs(h*f-p*g)/o,h/=this.skeleton.scaleX,g/=this.skeleton.scaleY,p=g*o,f=h*o,W=Math.atan2(g,h)*LW.radDeg):(h=0,g=0,W=90-Math.atan2(f,p)*LW.radDeg);const L=F+a-W,I=F+G-W+90,l=LW.cosDeg(L)*E,A=LW.cosDeg(I)*v,k=LW.sinDeg(L)*E,Z=LW.sinDeg(I)*v;U.a=h*l-p*k,U.c=h*A-p*Z,U.b=g*l+f*k,U.d=g*A+f*Z;break}case Oo.NoScale:case Oo.NoScaleOrReflection:{const o=LW.cosDeg(F),W=LW.sinDeg(F);let L=(h*o+p*W)/I,A=(g*o+f*W)/l,k=Math.sqrt(L*L+A*A);k>1e-5&&(k=1/k),L*=k,A*=k,k=Math.sqrt(L*L+A*A),this.data.transformMode==Oo.NoScale&&h*f-p*g<0!=(kW?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(k=-k);const Z=Math.PI/2+Math.atan2(A,L),P=Math.cos(Z)*k,y=Math.sin(Z)*k,z=LW.cosDeg(a)*E,x=LW.cosDeg(90+G)*v,N=LW.sinDeg(a)*E,e=LW.sinDeg(90+G)*v;U.a=L*z+P*N,U.c=L*x+P*e,U.b=A*z+y*N,U.d=A*x+y*e;break}}U.a*=I,U.c*=I,U.b*=l,U.d*=l}setToSetupPose(){const o=this.data;this.x=o.x,this.y=o.y,this.rotation=o.rotation,this.scaleX=o.scaleX,this.scaleY=o.scaleY,this.shearX=o.shearX,this.shearY=o.shearY}getWorldRotationX(){return Math.atan2(this.matrix.b,this.matrix.a)*LW.radDeg}getWorldRotationY(){return Math.atan2(this.matrix.d,this.matrix.c)*LW.radDeg}getWorldScaleX(){const o=this.matrix;return Math.sqrt(o.a*o.a+o.c*o.c)}getWorldScaleY(){const o=this.matrix;return Math.sqrt(o.b*o.b+o.d*o.d)}updateAppliedTransform(){this.appliedValid=!0;const o=this.parent,W=this.matrix;if(null==o)return this.ax=W.tx,this.ay=W.ty,this.arotation=Math.atan2(W.b,W.a)*LW.radDeg,this.ascaleX=Math.sqrt(W.a*W.a+W.b*W.b),this.ascaleY=Math.sqrt(W.c*W.c+W.d*W.d),this.ashearX=0,void(this.ashearY=Math.atan2(W.a*W.c+W.b*W.d,W.a*W.d-W.b*W.c)*LW.radDeg);const F=o.matrix,E=1/(F.a*F.d-F.b*F.c),v=W.tx-F.tx,a=W.ty-F.ty;this.ax=v*F.d*E-a*F.c*E,this.ay=a*F.a*E-v*F.b*E;const G=E*F.d,L=E*F.a,U=E*F.c,I=E*F.b,l=G*W.a-U*W.b,h=G*W.c-U*W.d,p=L*W.b-I*W.a,g=L*W.d-I*W.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(l*l+p*p),this.ascaleX>1e-4){const o=l*g-h*p;this.ascaleY=o/this.ascaleX,this.ashearY=Math.atan2(l*h+p*g,o)*LW.radDeg,this.arotation=Math.atan2(p,l)*LW.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(h*h+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,h)*LW.radDeg}worldToLocal(o){const W=this.matrix,F=W.a,E=W.c,v=W.b,a=W.d,G=1/(F*a-E*v),L=o.x-W.tx,U=o.y-W.ty;return o.x=L*a*G-U*E*G,o.y=U*F*G-L*v*G,o}localToWorld(o){const W=this.matrix,F=o.x,E=o.y;return o.x=F*W.a+E*W.c+W.tx,o.y=F*W.b+E*W.d+W.ty,o}worldToLocalRotation(o){const W=LW.sinDeg(o),F=LW.cosDeg(o),E=this.matrix;return Math.atan2(E.a*W-E.b*F,E.d*F-E.c*W)*LW.radDeg}localToWorldRotation(o){const W=LW.sinDeg(o),F=LW.cosDeg(o),E=this.matrix;return Math.atan2(F*E.b+W*E.d,F*E.a+W*E.c)*LW.radDeg}rotateWorld(o){const W=this.matrix,F=W.a,E=W.c,v=W.b,a=W.d,G=LW.cosDeg(o),L=LW.sinDeg(o);W.a=G*F-L*v,W.c=G*E-L*a,W.b=L*F+G*v,W.d=L*E+G*a,this.appliedValid=!1}}class $F{constructor(o,W,F){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Oo.Normal,this.skinRequired=!1,this.color=new aW,o<0)throw new Error("index must be >= 0.");if(null==W)throw new Error("name cannot be null.");this.index=o,this.name=W,this.parent=F}}class YF{constructor(o,W,F){this.name=o,this.order=W,this.skinRequired=F}}class QF{constructor(o,W){if(null==W)throw new Error("data cannot be null.");this.time=o,this.data=W}}class CF{constructor(o){this.name=o}}class qF{constructor(o,W){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==o)throw new Error("data cannot be null.");if(null==W)throw new Error("skeleton cannot be null.");this.data=o,this.mix=o.mix,this.softness=o.softness,this.bendDirection=o.bendDirection,this.compress=o.compress,this.stretch=o.stretch,this.bones=new Array;for(let F=0;F<o.bones.length;F++)this.bones.push(W.findBone(o.bones[F].name));this.target=W.findBone(o.target.name)}isActive(){return this.active}apply(){this.update()}update(){const o=this.target,W=this.bones;switch(W.length){case 1:this.apply1(W[0],o.worldX,o.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(W[0],W[1],o.worldX,o.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}}apply1(o,W,F,E,v,a,G){o.appliedValid||o.updateAppliedTransform();const L=o.parent.matrix,U=L.a;let I=L.c;const l=L.b;let h=L.d,p=-o.ashearX-o.arotation,g=0,f=0;switch(o.data.transformMode){case Oo.OnlyTranslation:g=W-o.worldX,f=F-o.worldY;break;case Oo.NoRotationOrReflection:const E=Math.abs(U*h-I*l)/(U*U+l*l),v=U/o.skeleton.scaleX,a=l/o.skeleton.scaleY;I=-a*E*o.skeleton.scaleX,h=v*E*o.skeleton.scaleY,p+=Math.atan2(a,v)*LW.radDeg;default:const G=W-L.tx,A=F-L.ty,k=U*h-I*l;g=(G*h-A*I)/k-o.ax,f=(A*U-G*l)/k-o.ay}p+=Math.atan2(f,g)*LW.radDeg,o.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);let A=o.ascaleX,k=o.ascaleY;if(E||v){switch(o.data.transformMode){case Oo.NoScale:case Oo.NoScaleOrReflection:g=W-o.worldX,f=F-o.worldY}const L=o.data.length*A,U=Math.sqrt(g*g+f*f);if(E&&U<L||v&&U>L&&L>1e-4){const o=(U/L-1)*G+1;A*=o,a&&(k*=o)}}o.updateWorldTransformWith(o.ax,o.ay,o.arotation+p*G,A,k,o.ashearX,o.ashearY)}apply2(o,W,F,E,v,a,G,L){if(0==L)return void W.updateWorldTransform();o.appliedValid||o.updateAppliedTransform(),W.appliedValid||W.updateAppliedTransform();const U=o.ax,I=o.ay;let l=o.ascaleX,h=l,p=o.ascaleY,g=W.ascaleX;const f=o.matrix;let A=0,k=0,Z=0;l<0?(l=-l,A=180,Z=-1):(A=0,Z=1),p<0&&(p=-p,Z=-Z),g<0?(g=-g,k=180):k=0;const P=W.ax;let y=0,z=0,x=0,N=f.a,e=f.c,t=f.b,m=f.d;const r=Math.abs(l-p)<=1e-4;r?(y=W.ay,z=N*P+e*y+f.tx,x=t*P+m*y+f.ty):(y=0,z=N*P+f.tx,x=t*P+f.ty);const B=o.parent.matrix;N=B.a,e=B.c,t=B.b,m=B.d;const j=1/(N*m-e*t);let V=z-B.tx,w=x-B.ty;const K=(V*m-w*e)*j-U,T=(w*N-V*t)*j-I,d=Math.sqrt(K*K+T*T);let n,u,$=W.data.length*g;if(d<1e-4)return this.apply1(o,F,E,!1,a,!1,L),void W.updateWorldTransformWith(P,y,0,W.ascaleX,W.ascaleY,W.ashearX,W.ashearY);V=F-B.tx,w=E-B.ty;let Y=(V*m-w*e)*j-U,Q=(w*N-V*t)*j-I,C=Y*Y+Q*Q;if(0!=G){G*=l*(g+1)/2;const o=Math.sqrt(C),W=o-d-$*l+G;if(W>0){let F=Math.min(1,W/(2*G))-1;F=(W-G*(1-F*F))/o,Y-=F*Y,Q-=F*Q,C=Y*Y+Q*Q}}o:if(r){$*=l;let o=(C-d*d-$*$)/(2*d*$);o<-1?o=-1:o>1&&(o=1,a&&(h*=(Math.sqrt(C)/(d+$)-1)*L+1)),u=Math.acos(o)*v,N=d+$*o,e=$*Math.sin(u),n=Math.atan2(Q*N-Y*e,Y*N+Q*e)}else{N=l*$,e=p*$;const o=N*N,W=e*e,F=Math.atan2(Q,Y);t=W*d*d+o*C-o*W;const E=-2*W*d,a=W-o;if(m=E*E-4*a*t,m>=0){let o=Math.sqrt(m);E<0&&(o=-o),o=-(E+o)/2;const W=o/a,G=t/o,L=Math.abs(W)<Math.abs(G)?W:G;if(L*L<=C){w=Math.sqrt(C-L*L)*v,n=F-Math.atan2(w,L),u=Math.atan2(w/p,(L-d)/l);break o}}let G=LW.PI,L=d-N,U=L*L,I=0,h=0,g=d+N,f=g*g,A=0;t=-N*d/(o-W),t>=-1&&t<=1&&(t=Math.acos(t),V=N*Math.cos(t)+d,w=e*Math.sin(t),m=V*V+w*w,m<U&&(G=t,U=m,L=V,I=w),m>f&&(h=t,f=m,g=V,A=w)),C<=(U+f)/2?(n=F-Math.atan2(I*v,L),u=G*v):(n=F-Math.atan2(A*v,g),u=h*v)}const q=Math.atan2(y,P)*Z;let c=o.arotation;n=(n-q)*LW.radDeg+A-c,n>180?n-=360:n<-180&&(n+=360),o.updateWorldTransformWith(U,I,c+n*L,h,o.ascaleY,0,0),c=W.arotation,u=((u+q)*LW.radDeg-W.ashearX)*Z+k-c,u>180?u-=360:u<-180&&(u+=360),W.updateWorldTransformWith(P,y,c+u*L,W.ascaleX,W.ascaleY,W.ashearX,W.ashearY)}}class cF extends YF{constructor(o){super(o,0,!1),this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}}class _F extends YF{constructor(o){super(o,0,!1),this.bones=new Array}}var OF,XF=((OF=XF||{})[OF.Length=0]="Length",OF[OF.Fixed=1]="Fixed",OF[OF.Percent=2]="Percent",OF);const SF=class{constructor(o,W){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==o)throw new Error("data cannot be null.");if(null==W)throw new Error("skeleton cannot be null.");this.data=o,this.bones=new Array;for(let F=0,E=o.bones.length;F<E;F++)this.bones.push(W.findBone(o.bones[F].name));this.target=W.findSlot(o.target.name),this.position=o.position,this.spacing=o.spacing,this.rotateMix=o.rotateMix,this.translateMix=o.translateMix}isActive(){return this.active}apply(){this.update()}update(){const o=this.target.getAttachment();if(!(o instanceof qW))return;const W=this.rotateMix,F=this.translateMix,E=W>0;if(!(F>0||E))return;const v=this.data,a=v.spacingMode,G=a==XF.Length,L=v.rotateMode,U=L==_o.Tangent,I=L==_o.ChainScale,l=this.bones.length,h=U?l:l+1,p=this.bones,g=pW.setArraySize(this.spaces,h);let f=null;const A=this.spacing;if(I||G){I&&(f=pW.setArraySize(this.lengths,l));for(let o=0,W=h-1;o<W;){const W=p[o],F=W.data.length;if(F<SF.epsilon)I&&(f[o]=0),g[++o]=0;else{const E=F*W.matrix.a,v=F*W.matrix.b,a=Math.sqrt(E*E+v*v);I&&(f[o]=a),g[++o]=(G?F+A:A)*a/F}}}else for(let o=1;o<h;o++)g[o]=A;const k=this.computeWorldPositions(o,h,U,v.positionMode==co.Percent,a==XF.Percent);let Z=k[0],P=k[1],y=v.offsetRotation,z=!1;if(0==y)z=L==_o.Chain;else{z=!1;const o=this.target.bone.matrix;y*=o.a*o.d-o.b*o.c>0?LW.degRad:-LW.degRad}for(let o=0,v=3;o<l;o++,v+=3){const a=p[o],G=a.matrix;G.tx+=(Z-G.tx)*F,G.ty+=(P-G.ty)*F;const L=k[v],l=k[v+1],h=L-Z,A=l-P;if(I){const F=f[o];if(0!=F){const o=(Math.sqrt(h*h+A*A)/F-1)*W+1;G.a*=o,G.b*=o}}if(Z=L,P=l,E){const F=G.a,E=G.c,L=G.b,I=G.d;let l=0,p=0,f=0;if(U&&(l=U?k[v-1]:0==g[o+1]?k[v+2]:Math.atan2(A,h)),l-=Math.atan2(L,F),z){p=Math.cos(l),f=Math.sin(l);const o=a.data.length;Z+=(o*(p*F-f*L)-h)*W,P+=(o*(f*F+p*L)-A)*W}else l+=y;l>LW.PI?l-=LW.PI2:l<-LW.PI&&(l+=LW.PI2),l*=W,p=Math.cos(l),f=Math.sin(l),G.a=p*F-f*L,G.c=p*E-f*I,G.b=f*F+p*L,G.d=f*E+p*I}a.appliedValid=!1}}computeWorldPositions(o,W,F,E,v){const a=this.target;let G=this.position;const L=this.spaces,U=pW.setArraySize(this.positions,3*W+2);let I=null;const l=o.closed;let h=o.worldVerticesLength,p=h/6,g=SF.NONE;if(!o.constantSpeed){const f=o.lengths;p-=l?1:2;const A=f[p];if(E&&(G*=A),v)for(let o=0;o<W;o++)L[o]*=A;I=pW.setArraySize(this.world,8);for(let E=0,v=0,k=0;E<W;E++,v+=3){const W=L[E];G+=W;let Z=G;if(l)Z%=A,Z<0&&(Z+=A),k=0;else{if(Z<0){g!=SF.BEFORE&&(g=SF.BEFORE,o.computeWorldVertices(a,2,4,I,0,2)),this.addBeforePosition(Z,I,0,U,v);continue}if(Z>A){g!=SF.AFTER&&(g=SF.AFTER,o.computeWorldVertices(a,h-6,4,I,0,2)),this.addAfterPosition(Z-A,I,0,U,v);continue}}for(;;k++){const o=f[k];if(!(Z>o)){if(0==k)Z/=o;else{const W=f[k-1];Z=(Z-W)/(o-W)}break}}k!=g&&(g=k,l&&k==p?(o.computeWorldVertices(a,h-4,4,I,0,2),o.computeWorldVertices(a,0,4,I,4,2)):o.computeWorldVertices(a,6*k+2,8,I,0,2)),this.addCurvePosition(Z,I[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],U,v,F||E>0&&0==W)}return U}l?(h+=2,I=pW.setArraySize(this.world,h),o.computeWorldVertices(a,2,h-4,I,0,2),o.computeWorldVertices(a,0,2,I,h-4,2),I[h-2]=I[0],I[h-1]=I[1]):(p--,h-=4,I=pW.setArraySize(this.world,h),o.computeWorldVertices(a,2,h,I,0,2));const f=pW.setArraySize(this.curves,p);let A=0,k=I[0],Z=I[1],P=0,y=0,z=0,x=0,N=0,e=0,t=0,m=0,r=0,B=0,j=0,V=0,w=0,K=0;for(let o=0,W=2;o<p;o++,W+=6)P=I[W],y=I[W+1],z=I[W+2],x=I[W+3],N=I[W+4],e=I[W+5],t=.1875*(k-2*P+z),m=.1875*(Z-2*y+x),r=.09375*(3*(P-z)-k+N),B=.09375*(3*(y-x)-Z+e),j=2*t+r,V=2*m+B,w=.75*(P-k)+t+.16666667*r,K=.75*(y-Z)+m+.16666667*B,A+=Math.sqrt(w*w+K*K),w+=j,K+=V,j+=r,V+=B,A+=Math.sqrt(w*w+K*K),w+=j,K+=V,A+=Math.sqrt(w*w+K*K),w+=j+r,K+=V+B,A+=Math.sqrt(w*w+K*K),f[o]=A,k=N,Z=e;if(E&&(G*=A),v)for(let o=0;o<W;o++)L[o]*=A;const T=this.segments;let d=0;for(let o=0,E=0,v=0,a=0;o<W;o++,E+=3){const W=L[o];G+=W;let p=G;if(l)p%=A,p<0&&(p+=A),v=0;else{if(p<0){this.addBeforePosition(p,I,0,U,E);continue}if(p>A){this.addAfterPosition(p-A,I,h-4,U,E);continue}}for(;;v++){const o=f[v];if(!(p>o)){if(0==v)p/=o;else{const W=f[v-1];p=(p-W)/(o-W)}break}}if(v!=g){g=v;let o=6*v;for(k=I[o],Z=I[o+1],P=I[o+2],y=I[o+3],z=I[o+4],x=I[o+5],N=I[o+6],e=I[o+7],t=.03*(k-2*P+z),m=.03*(Z-2*y+x),r=.006*(3*(P-z)-k+N),B=.006*(3*(y-x)-Z+e),j=2*t+r,V=2*m+B,w=.3*(P-k)+t+.16666667*r,K=.3*(y-Z)+m+.16666667*B,d=Math.sqrt(w*w+K*K),T[0]=d,o=1;o<8;o++)w+=j,K+=V,j+=r,V+=B,d+=Math.sqrt(w*w+K*K),T[o]=d;w+=j,K+=V,d+=Math.sqrt(w*w+K*K),T[8]=d,w+=j+r,K+=V+B,d+=Math.sqrt(w*w+K*K),T[9]=d,a=0}for(p*=d;;a++){const o=T[a];if(!(p>o)){if(0==a)p/=o;else{const W=T[a-1];p=a+(p-W)/(o-W)}break}}this.addCurvePosition(.1*p,k,Z,P,y,z,x,N,e,U,E,F||o>0&&0==W)}return U}addBeforePosition(o,W,F,E,v){const a=W[F],G=W[F+1],L=W[F+2]-a,U=W[F+3]-G,I=Math.atan2(U,L);E[v]=a+o*Math.cos(I),E[v+1]=G+o*Math.sin(I),E[v+2]=I}addAfterPosition(o,W,F,E,v){const a=W[F+2],G=W[F+3],L=a-W[F],U=G-W[F+1],I=Math.atan2(U,L);E[v]=a+o*Math.cos(I),E[v+1]=G+o*Math.sin(I),E[v+2]=I}addCurvePosition(o,W,F,E,v,a,G,L,U,I,l,h){(0==o||isNaN(o))&&(o=1e-4);const p=o*o,g=p*o,f=1-o,A=f*f,k=A*f,Z=f*o,P=3*Z,y=f*P,z=P*o,x=W*k+E*y+a*z+L*g,N=F*k+v*y+G*z+U*g;I[l]=x,I[l+1]=N,h&&(I[l+2]=Math.atan2(N-(F*A+v*Z*2+G*p),x-(W*A+E*Z*2+a*p)))}};let sF=SF;sF.NONE=-1,sF.BEFORE=-2,sF.AFTER=-3,sF.epsilon=1e-5;class iF{constructor(o,W){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new fW,this.active=!1,null==o)throw new Error("data cannot be null.");if(null==W)throw new Error("skeleton cannot be null.");this.data=o,this.rotateMix=o.rotateMix,this.translateMix=o.translateMix,this.scaleMix=o.scaleMix,this.shearMix=o.shearMix,this.bones=new Array;for(let F=0;F<o.bones.length;F++)this.bones.push(W.findBone(o.bones[F].name));this.target=W.findBone(o.target.name)}isActive(){return this.active}apply(){this.update()}update(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()}applyAbsoluteWorld(){const o=this.rotateMix,W=this.translateMix,F=this.scaleMix,E=this.shearMix,v=this.target,a=v.matrix,G=a.a,L=a.c,U=a.b,I=a.d,l=G*I-L*U>0?LW.degRad:-LW.degRad,h=this.data.offsetRotation*l,p=this.data.offsetShearY*l,g=this.bones;for(let a=0,l=g.length;a<l;a++){const l=g[a];let f=!1;const A=l.matrix;if(0!=o){const W=A.a,F=A.c,E=A.b,v=A.d;let a=Math.atan2(U,G)-Math.atan2(E,W)+h;a>LW.PI?a-=LW.PI2:a<-LW.PI&&(a+=LW.PI2),a*=o;const L=Math.cos(a),I=Math.sin(a);A.a=L*W-I*E,A.c=L*F-I*v,A.b=I*W+L*E,A.d=I*F+L*v,f=!0}if(0!=W){const o=this.temp;v.localToWorld(o.set(this.data.offsetX,this.data.offsetY)),A.tx+=(o.x-A.tx)*W,A.ty+=(o.y-A.ty)*W,f=!0}if(F>0){let o=Math.sqrt(A.a*A.a+A.b*A.b),W=Math.sqrt(G*G+U*U);o>1e-5&&(o=(o+(W-o+this.data.offsetScaleX)*F)/o),A.a*=o,A.b*=o,o=Math.sqrt(A.c*A.c+A.d*A.d),W=Math.sqrt(L*L+I*I),o>1e-5&&(o=(o+(W-o+this.data.offsetScaleY)*F)/o),A.c*=o,A.d*=o,f=!0}if(E>0){const o=A.c,W=A.d,F=Math.atan2(W,o);let v=Math.atan2(I,L)-Math.atan2(U,G)-(F-Math.atan2(A.b,A.a));v>LW.PI?v-=LW.PI2:v<-LW.PI&&(v+=LW.PI2),v=F+(v+p)*E;const a=Math.sqrt(o*o+W*W);A.c=Math.cos(v)*a,A.d=Math.sin(v)*a,f=!0}f&&(l.appliedValid=!1)}}applyRelativeWorld(){const o=this.rotateMix,W=this.translateMix,F=this.scaleMix,E=this.shearMix,v=this.target,a=v.matrix,G=a.a,L=a.c,U=a.b,I=a.d,l=G*I-L*U>0?LW.degRad:-LW.degRad,h=this.data.offsetRotation*l,p=this.data.offsetShearY*l,g=this.bones;for(let a=0,l=g.length;a<l;a++){const l=g[a];let f=!1;const A=l.matrix;if(0!=o){const W=A.a,F=A.c,E=A.b,v=A.d;let a=Math.atan2(U,G)+h;a>LW.PI?a-=LW.PI2:a<-LW.PI&&(a+=LW.PI2),a*=o;const L=Math.cos(a),I=Math.sin(a);A.a=L*W-I*E,A.c=L*F-I*v,A.b=I*W+L*E,A.d=I*F+L*v,f=!0}if(0!=W){const o=this.temp;v.localToWorld(o.set(this.data.offsetX,this.data.offsetY)),A.tx+=o.x*W,A.ty+=o.y*W,f=!0}if(F>0){let o=(Math.sqrt(G*G+U*U)-1+this.data.offsetScaleX)*F+1;A.a*=o,A.b*=o,o=(Math.sqrt(L*L+I*I)-1+this.data.offsetScaleY)*F+1,A.c*=o,A.d*=o,f=!0}if(E>0){let o=Math.atan2(I,L)-Math.atan2(U,G);o>LW.PI?o-=LW.PI2:o<-LW.PI&&(o+=LW.PI2);const W=A.c,F=A.d;o=Math.atan2(F,W)+(o-LW.PI/2+p)*E;const v=Math.sqrt(W*W+F*F);A.c=Math.cos(o)*v,A.d=Math.sin(o)*v,f=!0}f&&(l.appliedValid=!1)}}applyAbsoluteLocal(){const o=this.rotateMix,W=this.translateMix,F=this.scaleMix,E=this.shearMix,v=this.target;v.appliedValid||v.updateAppliedTransform();const a=this.bones;for(let G=0,L=a.length;G<L;G++){const L=a[G];L.appliedValid||L.updateAppliedTransform();let U=L.arotation;if(0!=o){let W=v.arotation-U+this.data.offsetRotation;W-=360*(16384-(16384.499999999996-W/360|0)),U+=W*o}let I=L.ax,l=L.ay;0!=W&&(I+=(v.ax-I+this.data.offsetX)*W,l+=(v.ay-l+this.data.offsetY)*W);let h=L.ascaleX,p=L.ascaleY;F>0&&(h>1e-5&&(h=(h+(v.ascaleX-h+this.data.offsetScaleX)*F)/h),p>1e-5&&(p=(p+(v.ascaleY-p+this.data.offsetScaleY)*F)/p));const g=L.ashearY;if(E>0){let o=v.ashearY-g+this.data.offsetShearY;o-=360*(16384-(16384.499999999996-o/360|0)),L.shearY+=o*E}L.updateWorldTransformWith(I,l,U,h,p,L.ashearX,g)}}applyRelativeLocal(){const o=this.rotateMix,W=this.translateMix,F=this.scaleMix,E=this.shearMix,v=this.target;v.appliedValid||v.updateAppliedTransform();const a=this.bones;for(let G=0,L=a.length;G<L;G++){const L=a[G];L.appliedValid||L.updateAppliedTransform();let U=L.arotation;0!=o&&(U+=(v.arotation+this.data.offsetRotation)*o);let I=L.ax,l=L.ay;0!=W&&(I+=(v.ax+this.data.offsetX)*W,l+=(v.ay+this.data.offsetY)*W);let h=L.ascaleX,p=L.ascaleY;F>0&&(h>1e-5&&(h*=(v.ascaleX-1+this.data.offsetScaleX)*F+1),p>1e-5&&(p*=(v.ascaleY-1+this.data.offsetScaleY)*F+1));let g=L.ashearY;E>0&&(g+=(v.ashearY+this.data.offsetShearY)*E),L.updateWorldTransformWith(I,l,U,h,p,L.ashearX,g)}}}const RF=class{constructor(o){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==o)throw new Error("data cannot be null.");this.data=o,this.bones=new Array;for(let W=0;W<o.bones.length;W++){const F=o.bones[W];let E;if(null==F.parent)E=new uF(F,this,null);else{const o=this.bones[F.parent.index];E=new uF(F,this,o),o.children.push(E)}this.bones.push(E)}this.slots=new Array,this.drawOrder=new Array;for(let W=0;W<o.slots.length;W++){const F=o.slots[W],E=this.bones[F.boneData.index],v=new _W(F,E);this.slots.push(v),this.drawOrder.push(v)}this.ikConstraints=new Array;for(let W=0;W<o.ikConstraints.length;W++){const F=o.ikConstraints[W];this.ikConstraints.push(new qF(F,this))}this.transformConstraints=new Array;for(let W=0;W<o.transformConstraints.length;W++){const F=o.transformConstraints[W];this.transformConstraints.push(new iF(F,this))}this.pathConstraints=new Array;for(let W=0;W<o.pathConstraints.length;W++){const F=o.pathConstraints[W];this.pathConstraints.push(new sF(F,this))}this.color=new aW(1,1,1,1),this.updateCache()}updateCache(){this._updateCache.length=0,this.updateCacheReset.length=0;const o=this.bones;for(let W=0,F=o.length;W<F;W++){const F=o[W];F.sorted=F.data.skinRequired,F.active=!F.sorted}if(null!=this.skin){const o=this.skin.bones;for(let W=0,F=this.skin.bones.length;W<F;W++){let F=this.bones[o[W].index];do{F.sorted=!1,F.active=!0,F=F.parent}while(null!=F)}}const W=this.ikConstraints,F=this.transformConstraints,E=this.pathConstraints,v=W.length,a=F.length,G=E.length,L=v+a+G;o:for(let o=0;o<L;o++){for(let F=0;F<v;F++){const E=W[F];if(E.data.order==o){this.sortIkConstraint(E);continue o}}for(let W=0;W<a;W++){const E=F[W];if(E.data.order==o){this.sortTransformConstraint(E);continue o}}for(let W=0;W<G;W++){const F=E[W];if(F.data.order==o){this.sortPathConstraint(F);continue o}}}for(let W=0,F=o.length;W<F;W++)this.sortBone(o[W])}sortIkConstraint(o){if(o.active=o.target.isActive()&&(!o.data.skinRequired||null!=this.skin&&pW.contains(this.skin.constraints,o.data,!0)),!o.active)return;const W=o.target;this.sortBone(W);const F=o.bones,E=F[0];if(this.sortBone(E),F.length>1){const o=F[F.length-1];this._updateCache.indexOf(o)>-1||this.updateCacheReset.push(o)}this._updateCache.push(o),this.sortReset(E.children),F[F.length-1].sorted=!0}sortPathConstraint(o){if(o.active=o.target.bone.isActive()&&(!o.data.skinRequired||null!=this.skin&&pW.contains(this.skin.constraints,o.data,!0)),!o.active)return;const W=o.target,F=W.data.index,E=W.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,F,E),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,F,E);for(let o=0,W=this.data.skins.length;o<W;o++)this.sortPathConstraintAttachment(this.data.skins[o],F,E);const v=W.getAttachment();v instanceof qW&&this.sortPathConstraintAttachmentWith(v,E);const a=o.bones,G=a.length;for(let o=0;o<G;o++)this.sortBone(a[o]);this._updateCache.push(o);for(let o=0;o<G;o++)this.sortReset(a[o].children);for(let o=0;o<G;o++)a[o].sorted=!0}sortTransformConstraint(o){if(o.active=o.target.isActive()&&(!o.data.skinRequired||null!=this.skin&&pW.contains(this.skin.constraints,o.data,!0)),!o.active)return;this.sortBone(o.target);const W=o.bones,F=W.length;if(o.data.local)for(let o=0;o<F;o++){const F=W[o];this.sortBone(F.parent),this._updateCache.indexOf(F)>-1||this.updateCacheReset.push(F)}else for(let o=0;o<F;o++)this.sortBone(W[o]);this._updateCache.push(o);for(let o=0;o<F;o++)this.sortReset(W[o].children);for(let o=0;o<F;o++)W[o].sorted=!0}sortPathConstraintAttachment(o,W,F){const E=o.attachments[W];if(E)for(const o in E)this.sortPathConstraintAttachmentWith(E[o],F)}sortPathConstraintAttachmentWith(o,W){if(!(o instanceof qW))return;const F=o.bones;if(null==F)this.sortBone(W);else{const o=this.bones;let W=0;for(;W<F.length;){const E=F[W++];for(let v=W+E;W<v;W++){const E=F[W];this.sortBone(o[E])}}}}sortBone(o){if(o.sorted)return;const W=o.parent;null!=W&&this.sortBone(W),o.sorted=!0,this._updateCache.push(o)}sortReset(o){for(let W=0,F=o.length;W<F;W++){const F=o[W];F.active&&(F.sorted&&this.sortReset(F.children),F.sorted=!1)}}updateWorldTransform(){const o=this.updateCacheReset;for(let W=0,F=o.length;W<F;W++){const F=o[W];F.ax=F.x,F.ay=F.y,F.arotation=F.rotation,F.ascaleX=F.scaleX,F.ascaleY=F.scaleY,F.ashearX=F.shearX,F.ashearY=F.shearY,F.appliedValid=!0}const W=this._updateCache;for(let o=0,F=W.length;o<F;o++)W[o].update()}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){const o=this.bones;for(let W=0,F=o.length;W<F;W++)o[W].setToSetupPose();const W=this.ikConstraints;for(let o=0,F=W.length;o<F;o++){const F=W[o];F.mix=F.data.mix,F.softness=F.data.softness,F.bendDirection=F.data.bendDirection,F.compress=F.data.compress,F.stretch=F.data.stretch}const F=this.transformConstraints;for(let o=0,W=F.length;o<W;o++){const W=F[o],E=W.data;W.rotateMix=E.rotateMix,W.translateMix=E.translateMix,W.scaleMix=E.scaleMix,W.shearMix=E.shearMix}const E=this.pathConstraints;for(let o=0,W=E.length;o<W;o++){const W=E[o],F=W.data;W.position=F.position,W.spacing=F.spacing,W.rotateMix=F.rotateMix,W.translateMix=F.translateMix}}setSlotsToSetupPose(){const o=this.slots;pW.arrayCopy(o,0,this.drawOrder,0,o.length);for(let W=0,F=o.length;W<F;W++)o[W].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(o){if(null==o)throw new Error("boneName cannot be null.");const W=this.bones;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.data.name==o)return E}return null}findBoneIndex(o){if(null==o)throw new Error("boneName cannot be null.");const W=this.bones;for(let F=0,E=W.length;F<E;F++)if(W[F].data.name==o)return F;return-1}findSlot(o){if(null==o)throw new Error("slotName cannot be null.");const W=this.slots;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.data.name==o)return E}return null}findSlotIndex(o){if(null==o)throw new Error("slotName cannot be null.");const W=this.slots;for(let F=0,E=W.length;F<E;F++)if(W[F].data.name==o)return F;return-1}setSkinByName(o){const W=this.data.findSkin(o);if(null==W)throw new Error(`Skin not found: ${o}`);this.setSkin(W)}setSkin(o){if(o!=this.skin){if(null!=o)if(null!=this.skin)o.attachAll(this,this.skin);else{const W=this.slots;for(let F=0,E=W.length;F<E;F++){const E=W[F],v=E.data.attachmentName;if(null!=v){const W=o.getAttachment(F,v);null!=W&&E.setAttachment(W)}}}this.skin=o,this.updateCache()}}getAttachmentByName(o,W){return this.getAttachment(this.data.findSlotIndex(o),W)}getAttachment(o,W){if(null==W)throw new Error("attachmentName cannot be null.");if(null!=this.skin){const F=this.skin.getAttachment(o,W);if(null!=F)return F}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(o,W):null}setAttachment(o,W){if(null==o)throw new Error("slotName cannot be null.");const F=this.slots;for(let E=0,v=F.length;E<v;E++){const v=F[E];if(v.data.name==o){let F=null;if(null!=W&&(F=this.getAttachment(E,W),null==F))throw new Error(`Attachment not found: ${W}, for slot: ${o}`);return void v.setAttachment(F)}}throw new Error(`Slot not found: ${o}`)}findIkConstraint(o){if(null==o)throw new Error("constraintName cannot be null.");const W=this.ikConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.data.name==o)return E}return null}findTransformConstraint(o){if(null==o)throw new Error("constraintName cannot be null.");const W=this.transformConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.data.name==o)return E}return null}findPathConstraint(o){if(null==o)throw new Error("constraintName cannot be null.");const W=this.pathConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.data.name==o)return E}return null}getBounds(o,W,F=new Array(2)){if(null==o)throw new Error("offset cannot be null.");if(null==W)throw new Error("size cannot be null.");const E=this.drawOrder;let v=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,G=Number.NEGATIVE_INFINITY,L=Number.NEGATIVE_INFINITY;for(let o=0,W=E.length;o<W;o++){const W=E[o];if(!W.bone.active)continue;let U=0,I=null;const l=W.getAttachment();if(l instanceof XW)U=8,I=pW.setArraySize(F,U,0),l.computeWorldVertices(W.bone,I,0,2);else if(l instanceof CW){const o=l;U=o.worldVerticesLength,I=pW.setArraySize(F,U,0),o.computeWorldVertices(W,0,U,I,0,2)}if(null!=I)for(let o=0,W=I.length;o<W;o+=2){const W=I[o],F=I[o+1];v=Math.min(v,W),a=Math.min(a,F),G=Math.max(G,W),L=Math.max(L,F)}}o.set(v,a),W.set(G-v,L-a)}update(o){this.time+=o}get flipX(){return-1==this.scaleX}set flipX(o){RF.deprecatedWarning1||(RF.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=o?1:-1}get flipY(){return-1==this.scaleY}set flipY(o){RF.deprecatedWarning1||(RF.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=o?1:-1}};let JF=RF;JF.deprecatedWarning1=!1;class DF{constructor(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}findBone(o){if(null==o)throw new Error("boneName cannot be null.");const W=this.bones;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findBoneIndex(o){if(null==o)throw new Error("boneName cannot be null.");const W=this.bones;for(let F=0,E=W.length;F<E;F++)if(W[F].name==o)return F;return-1}findSlot(o){if(null==o)throw new Error("slotName cannot be null.");const W=this.slots;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findSlotIndex(o){if(null==o)throw new Error("slotName cannot be null.");const W=this.slots;for(let F=0,E=W.length;F<E;F++)if(W[F].name==o)return F;return-1}findSkin(o){if(null==o)throw new Error("skinName cannot be null.");const W=this.skins;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findEvent(o){if(null==o)throw new Error("eventDataName cannot be null.");const W=this.events;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findAnimation(o){if(null==o)throw new Error("animationName cannot be null.");const W=this.animations;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findIkConstraint(o){if(null==o)throw new Error("constraintName cannot be null.");const W=this.ikConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findTransformConstraint(o){if(null==o)throw new Error("constraintName cannot be null.");const W=this.transformConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findPathConstraint(o){if(null==o)throw new Error("constraintName cannot be null.");const W=this.pathConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findPathConstraintIndex(o){if(null==o)throw new Error("pathConstraintName cannot be null.");const W=this.pathConstraints;for(let F=0,E=W.length;F<E;F++)if(W[F].name==o)return F;return-1}}class MF{constructor(o,W,F){if(this.color=new aW(1,1,1,1),o<0)throw new Error("index must be >= 0.");if(null==W)throw new Error("name cannot be null.");if(null==F)throw new Error("boneData cannot be null.");this.index=o,this.name=W,this.boneData=F}}class HF extends YF{constructor(o){super(o,0,!1),this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}}class bF{constructor(o,W,F){this.slotIndex=o,this.name=W,this.attachment=F}}class oE{constructor(o){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==o)throw new Error("name cannot be null.");this.name=o}setAttachment(o,W,F){if(null==F)throw new Error("attachment cannot be null.");const E=this.attachments;o>=E.length&&(E.length=o+1),E[o]||(E[o]={}),E[o][W]=F}addSkin(o){for(let W=0;W<o.bones.length;W++){const F=o.bones[W];let E=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==F){E=!0;break}E||this.bones.push(F)}for(let W=0;W<o.constraints.length;W++){const F=o.constraints[W];let E=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==F){E=!0;break}E||this.constraints.push(F)}const W=o.getAttachments();for(let o=0;o<W.length;o++){const F=W[o];this.setAttachment(F.slotIndex,F.name,F.attachment)}}copySkin(o){for(let W=0;W<o.bones.length;W++){const F=o.bones[W];let E=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==F){E=!0;break}E||this.bones.push(F)}for(let W=0;W<o.constraints.length;W++){const F=o.constraints[W];let E=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==F){E=!0;break}E||this.constraints.push(F)}const W=o.getAttachments();for(let o=0;o<W.length;o++){const F=W[o];null!=F.attachment&&(F.attachment instanceof CW?(F.attachment=F.attachment.newLinkedMesh(),this.setAttachment(F.slotIndex,F.name,F.attachment)):(F.attachment=F.attachment.copy(),this.setAttachment(F.slotIndex,F.name,F.attachment)))}}getAttachment(o,W){const F=this.attachments[o];return F?F[W]:null}removeAttachment(o,W){const F=this.attachments[o];F&&(F[W]=null)}getAttachments(){const o=new Array;for(let W=0;W<this.attachments.length;W++){const F=this.attachments[W];if(F)for(const E in F){const v=F[E];v&&o.push(new bF(W,E,v))}}return o}getAttachmentsForSlot(o,W){const F=this.attachments[o];if(F)for(const E in F){const v=F[E];v&&W.push(new bF(o,E,v))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(o,W){let F=0;for(let E=0;E<o.slots.length;E++){const v=o.slots[E],a=v.getAttachment();if(a&&F<W.attachments.length){const o=W.attachments[F];for(const W in o)if(a==o[W]){const o=this.getAttachment(F,W);null!=o&&v.setAttachment(o);break}}F++}}}const WE=class{constructor(o){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=o}readSkeletonData(o){const W=this.scale,F=new DF;F.name="";const E=new To(o);if(F.hash=E.readString(),F.version=E.readString(),"3.8.75"===F.version){const o="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(o)}F.x=E.readFloat(),F.y=E.readFloat(),F.width=E.readFloat(),F.height=E.readFloat();const v=E.readBoolean();v&&(F.fps=E.readFloat(),F.imagesPath=E.readString(),F.audioPath=E.readString());let a=0;a=E.readInt(!0);for(let o=0;o<a;o++)E.strings.push(E.readString());a=E.readInt(!0);for(let o=0;o<a;o++){const a=E.readString(),G=0==o?null:F.bones[E.readInt(!0)],L=new $F(o,a,G);L.rotation=E.readFloat(),L.x=E.readFloat()*W,L.y=E.readFloat()*W,L.scaleX=E.readFloat(),L.scaleY=E.readFloat(),L.shearX=E.readFloat(),L.shearY=E.readFloat(),L.length=E.readFloat()*W,L.transformMode=WE.TransformModeValues[E.readInt(!0)],L.skinRequired=E.readBoolean(),v&&aW.rgba8888ToColor(L.color,E.readInt32()),F.bones.push(L)}a=E.readInt(!0);for(let o=0;o<a;o++){const W=E.readString(),v=F.bones[E.readInt(!0)],a=new MF(o,W,v);aW.rgba8888ToColor(a.color,E.readInt32());const G=E.readInt32();-1!=G&&aW.rgb888ToColor(a.darkColor=new aW,G),a.attachmentName=E.readStringRef(),a.blendMode=WE.BlendModeValues[E.readInt(!0)],F.slots.push(a)}a=E.readInt(!0);for(let o,v=0;v<a;v++){const v=new cF(E.readString());v.order=E.readInt(!0),v.skinRequired=E.readBoolean(),o=E.readInt(!0);for(let W=0;W<o;W++)v.bones.push(F.bones[E.readInt(!0)]);v.target=F.bones[E.readInt(!0)],v.mix=E.readFloat(),v.softness=E.readFloat()*W,v.bendDirection=E.readByte(),v.compress=E.readBoolean(),v.stretch=E.readBoolean(),v.uniform=E.readBoolean(),F.ikConstraints.push(v)}a=E.readInt(!0);for(let o,v=0;v<a;v++){const v=new HF(E.readString());v.order=E.readInt(!0),v.skinRequired=E.readBoolean(),o=E.readInt(!0);for(let W=0;W<o;W++)v.bones.push(F.bones[E.readInt(!0)]);v.target=F.bones[E.readInt(!0)],v.local=E.readBoolean(),v.relative=E.readBoolean(),v.offsetRotation=E.readFloat(),v.offsetX=E.readFloat()*W,v.offsetY=E.readFloat()*W,v.offsetScaleX=E.readFloat(),v.offsetScaleY=E.readFloat(),v.offsetShearY=E.readFloat(),v.rotateMix=E.readFloat(),v.translateMix=E.readFloat(),v.scaleMix=E.readFloat(),v.shearMix=E.readFloat(),F.transformConstraints.push(v)}a=E.readInt(!0);for(let o,v=0;v<a;v++){const v=new _F(E.readString());v.order=E.readInt(!0),v.skinRequired=E.readBoolean(),o=E.readInt(!0);for(let W=0;W<o;W++)v.bones.push(F.bones[E.readInt(!0)]);v.target=F.slots[E.readInt(!0)],v.positionMode=WE.PositionModeValues[E.readInt(!0)],v.spacingMode=WE.SpacingModeValues[E.readInt(!0)],v.rotateMode=WE.RotateModeValues[E.readInt(!0)],v.offsetRotation=E.readFloat(),v.position=E.readFloat(),v.positionMode==co.Fixed&&(v.position*=W),v.spacing=E.readFloat(),v.spacingMode!=XF.Length&&v.spacingMode!=XF.Fixed||(v.spacing*=W),v.rotateMix=E.readFloat(),v.translateMix=E.readFloat(),F.pathConstraints.push(v)}const G=this.readSkin(E,F,!0,v);null!=G&&(F.defaultSkin=G,F.skins.push(G));{let o=F.skins.length;for(pW.setArraySize(F.skins,a=o+E.readInt(!0));o<a;o++)F.skins[o]=this.readSkin(E,F,!1,v)}a=this.linkedMeshes.length;for(let o=0;o<a;o++){const W=this.linkedMeshes[o],E=null==W.skin?F.defaultSkin:F.findSkin(W.skin);if(null==E)throw new Error(`Skin not found: ${W.skin}`);const v=E.getAttachment(W.slotIndex,W.parent);if(null==v)throw new Error(`Parent mesh not found: ${W.parent}`);W.mesh.deformAttachment=W.inheritDeform?v:W.mesh,W.mesh.setParentMesh(v)}this.linkedMeshes.length=0,a=E.readInt(!0);for(let o=0;o<a;o++){const o=new CF(E.readStringRef());o.intValue=E.readInt(!1),o.floatValue=E.readFloat(),o.stringValue=E.readString(),o.audioPath=E.readString(),null!=o.audioPath&&(o.volume=E.readFloat(),o.balance=E.readFloat()),F.events.push(o)}a=E.readInt(!0);for(let o=0;o<a;o++)F.animations.push(this.readAnimation(E,E.readString(),F));return F}readSkin(o,W,F,E){let v=null,a=0;if(F){if(a=o.readInt(!0),0==a)return null;v=new oE("default")}else{v=new oE(o.readStringRef()),v.bones.length=o.readInt(!0);for(let F=0,E=v.bones.length;F<E;F++)v.bones[F]=W.bones[o.readInt(!0)];for(let F=0,E=o.readInt(!0);F<E;F++)v.constraints.push(W.ikConstraints[o.readInt(!0)]);for(let F=0,E=o.readInt(!0);F<E;F++)v.constraints.push(W.transformConstraints[o.readInt(!0)]);for(let F=0,E=o.readInt(!0);F<E;F++)v.constraints.push(W.pathConstraints[o.readInt(!0)]);a=o.readInt(!0)}for(let F=0;F<a;F++){const F=o.readInt(!0);for(let a=0,G=o.readInt(!0);a<G;a++){const a=o.readStringRef(),G=this.readAttachment(o,W,v,F,a,E);null!=G&&v.setAttachment(F,a,G)}}return v}readAttachment(o,W,F,E,v,a){const G=this.scale;let L=o.readStringRef();null==L&&(L=v);const U=o.readByte();switch(WE.AttachmentTypeValues[U]){case Ko.Region:{let W=o.readStringRef();const E=o.readFloat(),v=o.readFloat(),a=o.readFloat(),U=o.readFloat(),I=o.readFloat(),l=o.readFloat(),h=o.readFloat(),p=o.readInt32();null==W&&(W=L);const g=this.attachmentLoader.newRegionAttachment(F,L,W);return null==g?null:(g.path=W,g.x=v*G,g.y=a*G,g.scaleX=U,g.scaleY=I,g.rotation=E,g.width=l*G,g.height=h*G,aW.rgba8888ToColor(g.color,p),g)}case Ko.BoundingBox:{const W=o.readInt(!0),E=this.readVertices(o,W),v=a?o.readInt32():0,G=this.attachmentLoader.newBoundingBoxAttachment(F,L);return null==G?null:(G.worldVerticesLength=W<<1,G.vertices=E.vertices,G.bones=E.bones,a&&aW.rgba8888ToColor(G.color,v),G)}case Ko.Mesh:{let W=o.readStringRef();const E=o.readInt32(),v=o.readInt(!0),U=this.readFloatArray(o,v<<1,1),I=this.readShortArray(o),l=this.readVertices(o,v),h=o.readInt(!0);let p=null,g=0,f=0;a&&(p=this.readShortArray(o),g=o.readFloat(),f=o.readFloat()),null==W&&(W=L);const A=this.attachmentLoader.newMeshAttachment(F,L,W);return null==A?null:(A.path=W,aW.rgba8888ToColor(A.color,E),A.bones=l.bones,A.vertices=l.vertices,A.worldVerticesLength=v<<1,A.triangles=I,A.regionUVs=new Float32Array(U),A.hullLength=h<<1,a&&(A.edges=p,A.width=g*G,A.height=f*G),A)}case Ko.LinkedMesh:{let W=o.readStringRef();const v=o.readInt32(),U=o.readStringRef(),I=o.readStringRef(),l=o.readBoolean();let h=0,p=0;a&&(h=o.readFloat(),p=o.readFloat()),null==W&&(W=L);const g=this.attachmentLoader.newMeshAttachment(F,L,W);return null==g?null:(g.path=W,aW.rgba8888ToColor(g.color,v),a&&(g.width=h*G,g.height=p*G),this.linkedMeshes.push(new EE(g,U,E,I,l)),g)}case Ko.Path:{const W=o.readBoolean(),E=o.readBoolean(),v=o.readInt(!0),U=this.readVertices(o,v),I=pW.newArray(v/3,0);for(let W=0,F=I.length;W<F;W++)I[W]=o.readFloat()*G;const l=a?o.readInt32():0,h=this.attachmentLoader.newPathAttachment(F,L);return null==h?null:(h.closed=W,h.constantSpeed=E,h.worldVerticesLength=v<<1,h.vertices=U.vertices,h.bones=U.bones,h.lengths=I,a&&aW.rgba8888ToColor(h.color,l),h)}case Ko.Point:{const W=o.readFloat(),E=o.readFloat(),v=o.readFloat(),U=a?o.readInt32():0,I=this.attachmentLoader.newPointAttachment(F,L);return null==I?null:(I.x=E*G,I.y=v*G,I.rotation=W,a&&aW.rgba8888ToColor(I.color,U),I)}case Ko.Clipping:{const E=o.readInt(!0),v=o.readInt(!0),G=this.readVertices(o,v),U=a?o.readInt32():0,I=this.attachmentLoader.newClippingAttachment(F,L);return null==I?null:(I.endSlot=W.slots[E],I.worldVerticesLength=v<<1,I.vertices=G.vertices,I.bones=G.bones,a&&aW.rgba8888ToColor(I.color,U),I)}}return null}readVertices(o,W){const F=W<<1,E=new vE,v=this.scale;if(!o.readBoolean())return E.vertices=this.readFloatArray(o,F,v),E;const a=new Array,G=new Array;for(let F=0;F<W;F++){const W=o.readInt(!0);G.push(W);for(let F=0;F<W;F++)G.push(o.readInt(!0)),a.push(o.readFloat()*v),a.push(o.readFloat()*v),a.push(o.readFloat())}return E.vertices=pW.toFloatArray(a),E.bones=G,E}readFloatArray(o,W,F){const E=new Array(W);if(1==F)for(let F=0;F<W;F++)E[F]=o.readFloat();else for(let v=0;v<W;v++)E[v]=o.readFloat()*F;return E}readShortArray(o){const W=o.readInt(!0),F=new Array(W);for(let E=0;E<W;E++)F[E]=o.readShort();return F}readAnimation(o,W,F){const E=new Array,v=this.scale;let a=0;const G=new aW,L=new aW;for(let W=0,F=o.readInt(!0);W<F;W++){const W=o.readInt(!0);for(let F=0,v=o.readInt(!0);F<v;F++){const F=o.readByte(),v=o.readInt(!0);switch(F){case WE.SLOT_ATTACHMENT:{const F=new IF(v);F.slotIndex=W;for(let W=0;W<v;W++)F.setFrame(W,o.readFloat(),o.readStringRef());E.push(F),a=Math.max(a,F.frames[v-1]);break}case WE.SLOT_COLOR:{const F=new GF(v);F.slotIndex=W;for(let W=0;W<v;W++){const E=o.readFloat();aW.rgba8888ToColor(G,o.readInt32()),F.setFrame(W,E,G.r,G.g,G.b,G.a),W<v-1&&this.readCurve(o,W,F)}E.push(F),a=Math.max(a,F.frames[(v-1)*GF.ENTRIES]);break}case WE.SLOT_TWO_COLOR:{const F=new UF(v);F.slotIndex=W;for(let W=0;W<v;W++){const E=o.readFloat();aW.rgba8888ToColor(G,o.readInt32()),aW.rgb888ToColor(L,o.readInt32()),F.setFrame(W,E,G.r,G.g,G.b,G.a,L.r,L.g,L.b),W<v-1&&this.readCurve(o,W,F)}E.push(F),a=Math.max(a,F.frames[(v-1)*UF.ENTRIES]);break}}}}for(let W=0,F=o.readInt(!0);W<F;W++){const W=o.readInt(!0);for(let F=0,G=o.readInt(!0);F<G;F++){const F=o.readByte(),G=o.readInt(!0);switch(F){case WE.BONE_ROTATE:{const F=new oF(G);F.boneIndex=W;for(let W=0;W<G;W++)F.setFrame(W,o.readFloat(),o.readFloat()),W<G-1&&this.readCurve(o,W,F);E.push(F),a=Math.max(a,F.frames[(G-1)*oF.ENTRIES]);break}case WE.BONE_TRANSLATE:case WE.BONE_SCALE:case WE.BONE_SHEAR:{let L,U=1;F==WE.BONE_SCALE?L=new EF(G):F==WE.BONE_SHEAR?L=new vF(G):(L=new FF(G),U=v),L.boneIndex=W;for(let W=0;W<G;W++)L.setFrame(W,o.readFloat(),o.readFloat()*U,o.readFloat()*U),W<G-1&&this.readCurve(o,W,L);E.push(L),a=Math.max(a,L.frames[(G-1)*FF.ENTRIES]);break}}}}for(let W=0,F=o.readInt(!0);W<F;W++){const W=o.readInt(!0),F=o.readInt(!0),G=new AF(F);G.ikConstraintIndex=W;for(let W=0;W<F;W++)G.setFrame(W,o.readFloat(),o.readFloat(),o.readFloat()*v,o.readByte(),o.readBoolean(),o.readBoolean()),W<F-1&&this.readCurve(o,W,G);E.push(G),a=Math.max(a,G.frames[(F-1)*AF.ENTRIES])}for(let W=0,F=o.readInt(!0);W<F;W++){const W=o.readInt(!0),F=o.readInt(!0),v=new ZF(F);v.transformConstraintIndex=W;for(let W=0;W<F;W++)v.setFrame(W,o.readFloat(),o.readFloat(),o.readFloat(),o.readFloat(),o.readFloat()),W<F-1&&this.readCurve(o,W,v);E.push(v),a=Math.max(a,v.frames[(F-1)*ZF.ENTRIES])}for(let W=0,G=o.readInt(!0);W<G;W++){const W=o.readInt(!0),G=F.pathConstraints[W];for(let F=0,L=o.readInt(!0);F<L;F++){const F=o.readByte(),L=o.readInt(!0);switch(F){case WE.PATH_POSITION:case WE.PATH_SPACING:{let U,I=1;F==WE.PATH_SPACING?(U=new zF(L),G.spacingMode!=XF.Length&&G.spacingMode!=XF.Fixed||(I=v)):(U=new yF(L),G.positionMode==co.Fixed&&(I=v)),U.pathConstraintIndex=W;for(let W=0;W<L;W++)U.setFrame(W,o.readFloat(),o.readFloat()*I),W<L-1&&this.readCurve(o,W,U);E.push(U),a=Math.max(a,U.frames[(L-1)*yF.ENTRIES]);break}case WE.PATH_MIX:{const F=new NF(L);F.pathConstraintIndex=W;for(let W=0;W<L;W++)F.setFrame(W,o.readFloat(),o.readFloat(),o.readFloat()),W<L-1&&this.readCurve(o,W,F);E.push(F),a=Math.max(a,F.frames[(L-1)*NF.ENTRIES]);break}}}}for(let W=0,G=o.readInt(!0);W<G;W++){const W=F.skins[o.readInt(!0)];for(let F=0,G=o.readInt(!0);F<G;F++){const F=o.readInt(!0);for(let G=0,L=o.readInt(!0);G<L;G++){const G=W.getAttachment(F,o.readStringRef()),L=null!=G.bones,U=G.vertices,I=L?U.length/3*2:U.length,l=o.readInt(!0),h=new hF(l);h.slotIndex=F,h.attachment=G;for(let W=0;W<l;W++){const F=o.readFloat();let E,a=o.readInt(!0);if(0==a)E=L?pW.newFloatArray(I):U;else{E=pW.newFloatArray(I);const W=o.readInt(!0);if(a+=W,1==v)for(let F=W;F<a;F++)E[F]=o.readFloat();else for(let F=W;F<a;F++)E[F]=o.readFloat()*v;if(!L)for(let o=0,W=E.length;o<W;o++)E[o]+=U[o]}h.setFrame(W,F,E),W<l-1&&this.readCurve(o,W,h)}E.push(h),a=Math.max(a,h.frames[l-1])}}}const U=o.readInt(!0);if(U>0){const W=new gF(U),v=F.slots.length;for(let F=0;F<U;F++){const E=o.readFloat(),a=o.readInt(!0),G=pW.newArray(v,0);for(let o=v-1;o>=0;o--)G[o]=-1;const L=pW.newArray(v-a,0);let U=0,I=0;for(let W=0;W<a;W++){const W=o.readInt(!0);for(;U!=W;)L[I++]=U++;G[U+o.readInt(!0)]=U++}for(;U<v;)L[I++]=U++;for(let o=v-1;o>=0;o--)-1==G[o]&&(G[o]=L[--I]);W.setFrame(F,E,G)}E.push(W),a=Math.max(a,W.frames[U-1])}const I=o.readInt(!0);if(I>0){const W=new pF(I);for(let E=0;E<I;E++){const v=o.readFloat(),a=F.events[o.readInt(!0)],G=new QF(v,a);G.intValue=o.readInt(!1),G.floatValue=o.readFloat(),G.stringValue=o.readBoolean()?o.readString():a.stringValue,null!=G.data.audioPath&&(G.volume=o.readFloat(),G.balance=o.readFloat()),W.setFrame(E,G)}E.push(W),a=Math.max(a,W.frames[I-1])}return new RW(W,E,a)}readCurve(o,W,F){switch(o.readByte()){case WE.CURVE_STEPPED:F.setStepped(W);break;case WE.CURVE_BEZIER:this.setCurve(F,W,o.readFloat(),o.readFloat(),o.readFloat(),o.readFloat())}}setCurve(o,W,F,E,v,a){o.setCurve(W,F,E,v,a)}};let FE=WE;FE.AttachmentTypeValues=[0,1,2,3,4,5,6],FE.TransformModeValues=[Oo.Normal,Oo.OnlyTranslation,Oo.NoRotationOrReflection,Oo.NoScale,Oo.NoScaleOrReflection],FE.PositionModeValues=[co.Fixed,co.Percent],FE.SpacingModeValues=[XF.Length,XF.Fixed,XF.Percent],FE.RotateModeValues=[_o.Tangent,_o.Chain,_o.ChainScale],FE.BlendModeValues=[Xo.B9.NORMAL,Xo.B9.ADD,Xo.B9.MULTIPLY,Xo.B9.SCREEN],FE.BONE_ROTATE=0,FE.BONE_TRANSLATE=1,FE.BONE_SCALE=2,FE.BONE_SHEAR=3,FE.SLOT_ATTACHMENT=0,FE.SLOT_COLOR=1,FE.SLOT_TWO_COLOR=2,FE.PATH_POSITION=0,FE.PATH_SPACING=1,FE.PATH_MIX=2,FE.CURVE_LINEAR=0,FE.CURVE_STEPPED=1,FE.CURVE_BEZIER=2;class EE{constructor(o,W,F,E,v){this.mesh=o,this.skin=W,this.slotIndex=F,this.parent=E,this.inheritDeform=v}}class vE{constructor(o=null,W=null){this.bones=o,this.vertices=W}}class aE extends AW{}class GE{constructor(o){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=o}readSkeletonData(o){const W=this.scale,F=new DF,E="string"==typeof o?JSON.parse(o):o,v=E.skeleton;if(null!=v){if(F.hash=v.hash,F.version=v.spine,"3.8"!==F.version.substr(0,3)){const o=`Spine 3.8 loader cant load version ${v.spine}. Please configure your pixi-spine bundle`;console.error(o)}if("3.8.75"===F.version){const o="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(o)}F.x=v.x,F.y=v.y,F.width=v.width,F.height=v.height,F.fps=v.fps,F.imagesPath=v.images}if(E.bones)for(let o=0;o<E.bones.length;o++){const v=E.bones[o];let a=null;const G=this.getValue(v,"parent",null);if(null!=G&&(a=F.findBone(G),null==a))throw new Error(`Parent bone not found: ${G}`);const L=new $F(F.bones.length,v.name,a);L.length=this.getValue(v,"length",0)*W,L.x=this.getValue(v,"x",0)*W,L.y=this.getValue(v,"y",0)*W,L.rotation=this.getValue(v,"rotation",0),L.scaleX=this.getValue(v,"scaleX",1),L.scaleY=this.getValue(v,"scaleY",1),L.shearX=this.getValue(v,"shearX",0),L.shearY=this.getValue(v,"shearY",0),L.transformMode=GE.transformModeFromString(this.getValue(v,"transform","normal")),L.skinRequired=this.getValue(v,"skin",!1),F.bones.push(L)}if(E.slots)for(let o=0;o<E.slots.length;o++){const W=E.slots[o],v=W.name,a=W.bone,G=F.findBone(a);if(null==G)throw new Error(`Slot bone not found: ${a}`);const L=new MF(F.slots.length,v,G),U=this.getValue(W,"color",null);null!=U&&L.color.setFromString(U);const I=this.getValue(W,"dark",null);null!=I&&(L.darkColor=new aW(1,1,1,1),L.darkColor.setFromString(I)),L.attachmentName=this.getValue(W,"attachment",null),L.blendMode=GE.blendModeFromString(this.getValue(W,"blend","normal")),F.slots.push(L)}if(E.ik)for(let o=0;o<E.ik.length;o++){const v=E.ik[o],a=new cF(v.name);a.order=this.getValue(v,"order",0),a.skinRequired=this.getValue(v,"skin",!1);for(let o=0;o<v.bones.length;o++){const W=v.bones[o],E=F.findBone(W);if(null==E)throw new Error(`IK bone not found: ${W}`);a.bones.push(E)}const G=v.target;if(a.target=F.findBone(G),null==a.target)throw new Error(`IK target bone not found: ${G}`);a.mix=this.getValue(v,"mix",1),a.softness=this.getValue(v,"softness",0)*W,a.bendDirection=this.getValue(v,"bendPositive",!0)?1:-1,a.compress=this.getValue(v,"compress",!1),a.stretch=this.getValue(v,"stretch",!1),a.uniform=this.getValue(v,"uniform",!1),F.ikConstraints.push(a)}if(E.transform)for(let o=0;o<E.transform.length;o++){const v=E.transform[o],a=new HF(v.name);a.order=this.getValue(v,"order",0),a.skinRequired=this.getValue(v,"skin",!1);for(let o=0;o<v.bones.length;o++){const W=v.bones[o],E=F.findBone(W);if(null==E)throw new Error(`Transform constraint bone not found: ${W}`);a.bones.push(E)}const G=v.target;if(a.target=F.findBone(G),null==a.target)throw new Error(`Transform constraint target bone not found: ${G}`);a.local=this.getValue(v,"local",!1),a.relative=this.getValue(v,"relative",!1),a.offsetRotation=this.getValue(v,"rotation",0),a.offsetX=this.getValue(v,"x",0)*W,a.offsetY=this.getValue(v,"y",0)*W,a.offsetScaleX=this.getValue(v,"scaleX",0),a.offsetScaleY=this.getValue(v,"scaleY",0),a.offsetShearY=this.getValue(v,"shearY",0),a.rotateMix=this.getValue(v,"rotateMix",1),a.translateMix=this.getValue(v,"translateMix",1),a.scaleMix=this.getValue(v,"scaleMix",1),a.shearMix=this.getValue(v,"shearMix",1),F.transformConstraints.push(a)}if(E.path)for(let o=0;o<E.path.length;o++){const v=E.path[o],a=new _F(v.name);a.order=this.getValue(v,"order",0),a.skinRequired=this.getValue(v,"skin",!1);for(let o=0;o<v.bones.length;o++){const W=v.bones[o],E=F.findBone(W);if(null==E)throw new Error(`Transform constraint bone not found: ${W}`);a.bones.push(E)}const G=v.target;if(a.target=F.findSlot(G),null==a.target)throw new Error(`Path target slot not found: ${G}`);a.positionMode=GE.positionModeFromString(this.getValue(v,"positionMode","percent")),a.spacingMode=GE.spacingModeFromString(this.getValue(v,"spacingMode","length")),a.rotateMode=GE.rotateModeFromString(this.getValue(v,"rotateMode","tangent")),a.offsetRotation=this.getValue(v,"rotation",0),a.position=this.getValue(v,"position",0),a.positionMode==co.Fixed&&(a.position*=W),a.spacing=this.getValue(v,"spacing",0),a.spacingMode!=XF.Length&&a.spacingMode!=XF.Fixed||(a.spacing*=W),a.rotateMix=this.getValue(v,"rotateMix",1),a.translateMix=this.getValue(v,"translateMix",1),F.pathConstraints.push(a)}if(E.skins)for(let o=0;o<E.skins.length;o++){const W=E.skins[o],v=new oE(W.name);if(W.bones)for(let E=0;E<W.bones.length;E++){const a=F.findBone(W.bones[E]);if(null==a)throw new Error(`Skin bone not found: ${W.bones[o]}`);v.bones.push(a)}if(W.ik)for(let E=0;E<W.ik.length;E++){const a=F.findIkConstraint(W.ik[E]);if(null==a)throw new Error(`Skin IK constraint not found: ${W.ik[o]}`);v.constraints.push(a)}if(W.transform)for(let E=0;E<W.transform.length;E++){const a=F.findTransformConstraint(W.transform[E]);if(null==a)throw new Error(`Skin transform constraint not found: ${W.transform[o]}`);v.constraints.push(a)}if(W.path)for(let E=0;E<W.path.length;E++){const a=F.findPathConstraint(W.path[E]);if(null==a)throw new Error(`Skin path constraint not found: ${W.path[o]}`);v.constraints.push(a)}for(const o in W.attachments){const E=F.findSlot(o);if(null==E)throw new Error(`Slot not found: ${o}`);const a=W.attachments[o];for(const o in a){const W=this.readAttachment(a[o],v,E.index,o,F);null!=W&&v.setAttachment(E.index,o,W)}}F.skins.push(v),"default"==v.name&&(F.defaultSkin=v)}for(let o=0,W=this.linkedMeshes.length;o<W;o++){const W=this.linkedMeshes[o],E=null==W.skin?F.defaultSkin:F.findSkin(W.skin);if(null==E)throw new Error(`Skin not found: ${W.skin}`);const v=E.getAttachment(W.slotIndex,W.parent);if(null==v)throw new Error(`Parent mesh not found: ${W.parent}`);W.mesh.deformAttachment=W.inheritDeform?v:W.mesh,W.mesh.setParentMesh(v)}if(this.linkedMeshes.length=0,E.events)for(const o in E.events){const W=E.events[o],v=new CF(o);v.intValue=this.getValue(W,"int",0),v.floatValue=this.getValue(W,"float",0),v.stringValue=this.getValue(W,"string",""),v.audioPath=this.getValue(W,"audio",null),null!=v.audioPath&&(v.volume=this.getValue(W,"volume",1),v.balance=this.getValue(W,"balance",0)),F.events.push(v)}if(E.animations)for(const o in E.animations){const W=E.animations[o];this.readAnimation(W,o,F)}return F}readAttachment(o,W,F,E,v){const a=this.scale;switch(E=this.getValue(o,"name",E),this.getValue(o,"type","region")){case"region":{const F=this.getValue(o,"path",E),v=this.attachmentLoader.newRegionAttachment(W,E,F);if(null==v)return null;v.path=F,v.x=this.getValue(o,"x",0)*a,v.y=this.getValue(o,"y",0)*a,v.scaleX=this.getValue(o,"scaleX",1),v.scaleY=this.getValue(o,"scaleY",1),v.rotation=this.getValue(o,"rotation",0),v.width=o.width*a,v.height=o.height*a;const G=this.getValue(o,"color",null);return null!=G&&v.color.setFromString(G),v}case"boundingbox":{const F=this.attachmentLoader.newBoundingBoxAttachment(W,E);if(null==F)return null;this.readVertices(o,F,o.vertexCount<<1);const v=this.getValue(o,"color",null);return null!=v&&F.color.setFromString(v),F}case"mesh":case"linkedmesh":{const v=this.getValue(o,"path",E),G=this.attachmentLoader.newMeshAttachment(W,E,v);if(null==G)return null;G.path=v;const L=this.getValue(o,"color",null);null!=L&&G.color.setFromString(L),G.width=this.getValue(o,"width",0)*a,G.height=this.getValue(o,"height",0)*a;const U=this.getValue(o,"parent",null);if(null!=U)return this.linkedMeshes.push(new LE(G,this.getValue(o,"skin",null),F,U,this.getValue(o,"deform",!0))),G;const I=o.uvs;return this.readVertices(o,G,I.length),G.triangles=o.triangles,G.regionUVs=new Float32Array(I),G.edges=this.getValue(o,"edges",null),G.hullLength=2*this.getValue(o,"hull",0),G}case"path":{const F=this.attachmentLoader.newPathAttachment(W,E);if(null==F)return null;F.closed=this.getValue(o,"closed",!1),F.constantSpeed=this.getValue(o,"constantSpeed",!0);const v=o.vertexCount;this.readVertices(o,F,v<<1);const G=pW.newArray(v/3,0);for(let W=0;W<o.lengths.length;W++)G[W]=o.lengths[W]*a;F.lengths=G;const L=this.getValue(o,"color",null);return null!=L&&F.color.setFromString(L),F}case"point":{const F=this.attachmentLoader.newPointAttachment(W,E);if(null==F)return null;F.x=this.getValue(o,"x",0)*a,F.y=this.getValue(o,"y",0)*a,F.rotation=this.getValue(o,"rotation",0);const v=this.getValue(o,"color",null);return null!=v&&F.color.setFromString(v),F}case"clipping":{const F=this.attachmentLoader.newClippingAttachment(W,E);if(null==F)return null;const a=this.getValue(o,"end",null);if(null!=a){const o=v.findSlot(a);if(null==o)throw new Error(`Clipping end slot not found: ${a}`);F.endSlot=o}const G=o.vertexCount;this.readVertices(o,F,G<<1);const L=this.getValue(o,"color",null);return null!=L&&F.color.setFromString(L),F}}return null}readVertices(o,W,F){const E=this.scale;W.worldVerticesLength=F;const v=o.vertices;if(F==v.length){const o=pW.toFloatArray(v);if(1!=E)for(let W=0,F=v.length;W<F;W++)o[W]*=E;return void(W.vertices=o)}const a=new Array,G=new Array;for(let o=0,W=v.length;o<W;){const W=v[o++];G.push(W);for(let F=o+4*W;o<F;o+=4)G.push(v[o]),a.push(v[o+1]*E),a.push(v[o+2]*E),a.push(v[o+3])}W.bones=G,W.vertices=pW.toFloatArray(a)}readAnimation(o,W,F){const E=this.scale,v=new Array;let a=0;if(o.slots)for(const W in o.slots){const E=o.slots[W],G=F.findSlotIndex(W);if(-1==G)throw new Error(`Slot not found: ${W}`);for(const o in E){const F=E[o];if("attachment"==o){const o=new IF(F.length);o.slotIndex=G;let W=0;for(let E=0;E<F.length;E++){const v=F[E];o.setFrame(W++,this.getValue(v,"time",0),v.name)}v.push(o),a=Math.max(a,o.frames[o.getFrameCount()-1])}else if("color"==o){const o=new GF(F.length);o.slotIndex=G;let W=0;for(let E=0;E<F.length;E++){const v=F[E],a=new aW;a.setFromString(v.color||"ffffffff"),o.setFrame(W,this.getValue(v,"time",0),a.r,a.g,a.b,a.a),this.readCurve(v,o,W),W++}v.push(o),a=Math.max(a,o.frames[(o.getFrameCount()-1)*GF.ENTRIES])}else{if("twoColor"!=o)throw new Error(`Invalid timeline type for a slot: ${o} (${W})`);{const o=new UF(F.length);o.slotIndex=G;let W=0;for(let E=0;E<F.length;E++){const v=F[E],a=new aW,G=new aW;a.setFromString(v.light),G.setFromString(v.dark),o.setFrame(W,this.getValue(v,"time",0),a.r,a.g,a.b,a.a,G.r,G.g,G.b),this.readCurve(v,o,W),W++}v.push(o),a=Math.max(a,o.frames[(o.getFrameCount()-1)*UF.ENTRIES])}}}}if(o.bones)for(const W in o.bones){const G=o.bones[W],L=F.findBoneIndex(W);if(-1==L)throw new Error(`Bone not found: ${W}`);for(const o in G){const F=G[o];if("rotate"===o){const o=new oF(F.length);o.boneIndex=L;let W=0;for(let E=0;E<F.length;E++){const v=F[E];o.setFrame(W,this.getValue(v,"time",0),this.getValue(v,"angle",0)),this.readCurve(v,o,W),W++}v.push(o),a=Math.max(a,o.frames[(o.getFrameCount()-1)*oF.ENTRIES])}else{if("translate"!==o&&"scale"!==o&&"shear"!==o)throw new Error(`Invalid timeline type for a bone: ${o} (${W})`);{let W=null,G=1,U=0;"scale"===o?(W=new EF(F.length),U=1):"shear"===o?W=new vF(F.length):(W=new FF(F.length),G=E),W.boneIndex=L;let I=0;for(let o=0;o<F.length;o++){const E=F[o],v=this.getValue(E,"x",U),a=this.getValue(E,"y",U);W.setFrame(I,this.getValue(E,"time",0),v*G,a*G),this.readCurve(E,W,I),I++}v.push(W),a=Math.max(a,W.frames[(W.getFrameCount()-1)*FF.ENTRIES])}}}}if(o.ik)for(const W in o.ik){const G=o.ik[W],L=F.findIkConstraint(W),U=new AF(G.length);U.ikConstraintIndex=F.ikConstraints.indexOf(L);let I=0;for(let o=0;o<G.length;o++){const W=G[o];U.setFrame(I,this.getValue(W,"time",0),this.getValue(W,"mix",1),this.getValue(W,"softness",0)*E,this.getValue(W,"bendPositive",!0)?1:-1,this.getValue(W,"compress",!1),this.getValue(W,"stretch",!1)),this.readCurve(W,U,I),I++}v.push(U),a=Math.max(a,U.frames[(U.getFrameCount()-1)*AF.ENTRIES])}if(o.transform)for(const W in o.transform){const E=o.transform[W],G=F.findTransformConstraint(W),L=new ZF(E.length);L.transformConstraintIndex=F.transformConstraints.indexOf(G);let U=0;for(let o=0;o<E.length;o++){const W=E[o];L.setFrame(U,this.getValue(W,"time",0),this.getValue(W,"rotateMix",1),this.getValue(W,"translateMix",1),this.getValue(W,"scaleMix",1),this.getValue(W,"shearMix",1)),this.readCurve(W,L,U),U++}v.push(L),a=Math.max(a,L.frames[(L.getFrameCount()-1)*ZF.ENTRIES])}if(o.path)for(const W in o.path){const G=o.path[W],L=F.findPathConstraintIndex(W);if(-1==L)throw new Error(`Path constraint not found: ${W}`);const U=F.pathConstraints[L];for(const o in G){const W=G[o];if("position"===o||"spacing"===o){let F=null,G=1;"spacing"===o?(F=new zF(W.length),U.spacingMode!=XF.Length&&U.spacingMode!=XF.Fixed||(G=E)):(F=new yF(W.length),U.positionMode==co.Fixed&&(G=E)),F.pathConstraintIndex=L;let I=0;for(let E=0;E<W.length;E++){const v=W[E];F.setFrame(I,this.getValue(v,"time",0),this.getValue(v,o,0)*G),this.readCurve(v,F,I),I++}v.push(F),a=Math.max(a,F.frames[(F.getFrameCount()-1)*yF.ENTRIES])}else if("mix"===o){const o=new NF(W.length);o.pathConstraintIndex=L;let F=0;for(let E=0;E<W.length;E++){const v=W[E];o.setFrame(F,this.getValue(v,"time",0),this.getValue(v,"rotateMix",1),this.getValue(v,"translateMix",1)),this.readCurve(v,o,F),F++}v.push(o),a=Math.max(a,o.frames[(o.getFrameCount()-1)*NF.ENTRIES])}}}if(o.deform)for(const W in o.deform){const G=o.deform[W],L=F.findSkin(W);if(null!=L)for(const o in G){const W=G[o],U=F.findSlotIndex(o);if(-1==U)throw new Error(`Slot not found: ${W.name}`);for(const o in W){const F=W[o],G=L.getAttachment(U,o);if(null==G)throw new Error(`Deform attachment not found: ${F.name}`);const I=null!=G.bones,l=G.vertices,h=I?l.length/3*2:l.length,p=new hF(F.length);p.slotIndex=U,p.attachment=G;let g=0;for(let o=0;o<F.length;o++){const W=F[o];let v;const a=this.getValue(W,"vertices",null);if(null==a)v=I?pW.newFloatArray(h):l;else{v=pW.newFloatArray(h);const o=this.getValue(W,"offset",0);if(pW.arrayCopy(a,0,v,o,a.length),1!=E)for(let W=o,F=W+a.length;W<F;W++)v[W]*=E;if(!I)for(let o=0;o<h;o++)v[o]+=l[o]}p.setFrame(g,this.getValue(W,"time",0),v),this.readCurve(W,p,g),g++}v.push(p),a=Math.max(a,p.frames[p.getFrameCount()-1])}}else if(ZW)throw new Error(`Skin not found: ${W}`)}let G=o.drawOrder;if(null==G&&(G=o.draworder),null!=G){const o=new gF(G.length),W=F.slots.length;let E=0;for(let v=0;v<G.length;v++){const a=G[v];let L=null;const U=this.getValue(a,"offsets",null);if(null!=U){L=pW.newArray(W,-1);const o=pW.newArray(W-U.length,0);let E=0,v=0;for(let W=0;W<U.length;W++){const a=U[W],G=F.findSlotIndex(a.slot);if(-1==G)throw new Error(`Slot not found: ${a.slot}`);for(;E!=G;)o[v++]=E++;L[E+a.offset]=E++}for(;E<W;)o[v++]=E++;for(let F=W-1;F>=0;F--)-1==L[F]&&(L[F]=o[--v])}o.setFrame(E++,this.getValue(a,"time",0),L)}v.push(o),a=Math.max(a,o.frames[o.getFrameCount()-1])}if(o.events){const W=new pF(o.events.length);let E=0;for(let v=0;v<o.events.length;v++){const a=o.events[v],G=F.findEvent(a.name);if(null==G)throw new Error(`Event not found: ${a.name}`);const L=new QF(pW.toSinglePrecision(this.getValue(a,"time",0)),G);L.intValue=this.getValue(a,"int",G.intValue),L.floatValue=this.getValue(a,"float",G.floatValue),L.stringValue=this.getValue(a,"string",G.stringValue),null!=L.data.audioPath&&(L.volume=this.getValue(a,"volume",1),L.balance=this.getValue(a,"balance",0)),W.setFrame(E++,L)}v.push(W),a=Math.max(a,W.frames[W.getFrameCount()-1])}if(isNaN(a))throw new Error("Error while parsing animation, duration is NaN");F.animations.push(new RW(W,v,a))}readCurve(o,W,F){if(o.hasOwnProperty("curve"))if("stepped"===o.curve)W.setStepped(F);else{const E=o.curve;W.setCurve(F,E,this.getValue(o,"c2",0),this.getValue(o,"c3",1),this.getValue(o,"c4",1))}}getValue(o,W,F){return void 0!==o[W]?o[W]:F}static blendModeFromString(o){if("normal"==(o=o.toLowerCase()))return Xo.B9.NORMAL;if("additive"==o)return Xo.B9.ADD;if("multiply"==o)return Xo.B9.MULTIPLY;if("screen"==o)return Xo.B9.SCREEN;throw new Error(`Unknown blend mode: ${o}`)}static positionModeFromString(o){if("fixed"==(o=o.toLowerCase()))return co.Fixed;if("percent"==o)return co.Percent;throw new Error(`Unknown position mode: ${o}`)}static spacingModeFromString(o){if("length"==(o=o.toLowerCase()))return XF.Length;if("fixed"==o)return XF.Fixed;if("percent"==o)return XF.Percent;throw new Error(`Unknown position mode: ${o}`)}static rotateModeFromString(o){if("tangent"==(o=o.toLowerCase()))return _o.Tangent;if("chain"==o)return _o.Chain;if("chainscale"==o)return _o.ChainScale;throw new Error(`Unknown rotate mode: ${o}`)}static transformModeFromString(o){if("normal"==(o=o.toLowerCase()))return Oo.Normal;if("onlytranslation"==o)return Oo.OnlyTranslation;if("norotationorreflection"==o)return Oo.NoRotationOrReflection;if("noscale"==o)return Oo.NoScale;if("noscaleorreflection"==o)return Oo.NoScaleOrReflection;throw new Error(`Unknown transform mode: ${o}`)}}class LE{constructor(o,W,F,E,v){this.mesh=o,this.skin=W,this.slotIndex=F,this.parent=E,this.inheritDeform=v}}class UE extends jW{createSkeleton(o){this.skeleton=new JF(o),this.skeleton.updateWorldTransform(),this.stateData=new dF(o),this.state=new tF(this.stateData)}}class IE{constructor(o){if(null==o)throw new Error("name cannot be null.");this.name=o}}const lE=class extends IE{constructor(o){super(o),this.id=(65535&lE.nextID++)<<11,this.worldVerticesLength=0}computeWorldVerticesOld(o,W){this.computeWorldVertices(o,0,this.worldVerticesLength,W,0,2)}computeWorldVertices(o,W,F,E,v,a){F=v+(F>>1)*a;const G=o.bone.skeleton,L=o.attachmentVertices;let U=this.vertices;const I=this.bones;if(null==I){L.length>0&&(U=L);const G=o.bone.matrix,I=G.tx,l=G.ty,h=G.a,p=G.c,g=G.b,f=G.d;for(let o=W,G=v;G<F;o+=2,G+=a){const W=U[o],F=U[o+1];E[G]=W*h+F*p+I,E[G+1]=W*g+F*f+l}return}let l=0,h=0;for(let o=0;o<W;o+=2){const o=I[l];l+=o+1,h+=o}const p=G.bones;if(0==L.length)for(let o=v,W=3*h;o<F;o+=a){let F=0,v=0,a=I[l++];for(a+=l;l<a;l++,W+=3){const o=p[I[l]].matrix,E=U[W],a=U[W+1],G=U[W+2];F+=(E*o.a+a*o.c+o.tx)*G,v+=(E*o.b+a*o.d+o.ty)*G}E[o]=F,E[o+1]=v}else{const o=L;for(let W=v,G=3*h,L=h<<1;W<F;W+=a){let F=0,v=0,a=I[l++];for(a+=l;l<a;l++,G+=3,L+=2){const W=p[I[l]].matrix,E=U[G]+o[L],a=U[G+1]+o[L+1],h=U[G+2];F+=(E*W.a+a*W.c+W.tx)*h,v+=(E*W.b+a*W.d+W.ty)*h}E[W]=F,E[W+1]=v}}}applyDeform(o){return this==o}};let hE=lE;hE.nextID=0;class pE extends hE{constructor(o){super(o),this.type=Ko.BoundingBox,this.color=new aW(1,1,1,1)}}class gE extends hE{constructor(o){super(o),this.type=Ko.Clipping,this.color=new aW(.2275,.2275,.8078,1)}}class fE extends hE{constructor(o){super(o),this.type=Ko.Mesh,this.color=new aW(1,1,1,1),this.inheritDeform=!1,this.tempColor=new aW(0,0,0,0)}applyDeform(o){return this==o||this.inheritDeform&&this.parentMesh==o}getParentMesh(){return this.parentMesh}setParentMesh(o){this.parentMesh=o,null!=o&&(this.bones=o.bones,this.vertices=o.vertices,this.worldVerticesLength=o.worldVerticesLength,this.regionUVs=o.regionUVs,this.triangles=o.triangles,this.hullLength=o.hullLength,this.worldVerticesLength=o.worldVerticesLength)}}class AE extends hE{constructor(o){super(o),this.type=Ko.Path,this.closed=!1,this.constantSpeed=!1,this.color=new aW(1,1,1,1)}}class kE extends hE{constructor(o){super(o),this.type=Ko.Point,this.color=new aW(.38,.94,0,1)}computeWorldPosition(o,W){const F=o.matrix;return W.x=this.x*F.a+this.y*F.c+o.worldX,W.y=this.x*F.b+this.y*F.d+o.worldY,W}computeWorldRotation(o){const W=o.matrix,F=LW.cosDeg(this.rotation),E=LW.sinDeg(this.rotation),v=F*W.a+E*W.c,a=F*W.b+E*W.d;return Math.atan2(a,v)*LW.radDeg}}class ZE{constructor(o,W){if(this.attachmentVertices=new Array,null==o)throw new Error("data cannot be null.");if(null==W)throw new Error("bone cannot be null.");this.data=o,this.bone=W,this.color=new aW,this.darkColor=null==o.darkColor?null:new aW,this.setToSetupPose(),this.blendMode=this.data.blendMode}getAttachment(){return this.attachment}setAttachment(o){this.attachment!=o&&(this.attachment=o,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)}setAttachmentTime(o){this.attachmentTime=this.bone.skeleton.time-o}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))}}const PE=class extends IE{constructor(o){super(o),this.type=Ko.Region,this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new aW(1,1,1,1),this.offset=pW.newFloatArray(8),this.uvs=pW.newFloatArray(8),this.tempColor=new aW(1,1,1,1)}updateOffset(){const o=this.width/this.region.originalWidth*this.scaleX,W=this.height/this.region.originalHeight*this.scaleY,F=-this.width/2*this.scaleX+this.region.offsetX*o,E=-this.height/2*this.scaleY+this.region.offsetY*W,v=F+this.region.width*o,a=E+this.region.height*W,G=this.rotation*Math.PI/180,L=Math.cos(G),U=Math.sin(G),I=F*L+this.x,l=F*U,h=E*L+this.y,p=E*U,g=v*L+this.x,f=v*U,A=a*L+this.y,k=a*U,Z=this.offset;Z[PE.OX1]=I-p,Z[PE.OY1]=h+l,Z[PE.OX2]=I-k,Z[PE.OY2]=A+l,Z[PE.OX3]=g-k,Z[PE.OY3]=A+f,Z[PE.OX4]=g-p,Z[PE.OY4]=h+f}setRegion(o){this.region=o;const W=this.uvs;o.rotate?(W[2]=o.u,W[3]=o.v2,W[4]=o.u,W[5]=o.v,W[6]=o.u2,W[7]=o.v,W[0]=o.u2,W[1]=o.v2):(W[0]=o.u,W[1]=o.v2,W[2]=o.u,W[3]=o.v,W[4]=o.u2,W[5]=o.v,W[6]=o.u2,W[7]=o.v2)}computeWorldVertices(o,W,F,E){const v=this.offset,a=o instanceof ZE?o.bone.matrix:o.matrix,G=a.tx,L=a.ty,U=a.a,I=a.c,l=a.b,h=a.d;let p=0,g=0;p=v[PE.OX1],g=v[PE.OY1],W[F]=p*U+g*I+G,W[F+1]=p*l+g*h+L,F+=E,p=v[PE.OX2],g=v[PE.OY2],W[F]=p*U+g*I+G,W[F+1]=p*l+g*h+L,F+=E,p=v[PE.OX3],g=v[PE.OY3],W[F]=p*U+g*I+G,W[F+1]=p*l+g*h+L,F+=E,p=v[PE.OX4],g=v[PE.OY4],W[F]=p*U+g*I+G,W[F+1]=p*l+g*h+L}};let yE=PE;yE.OX1=0,yE.OY1=1,yE.OX2=2,yE.OY2=3,yE.OX3=4,yE.OY3=5,yE.OX4=6,yE.OY4=7,yE.X1=0,yE.Y1=1,yE.C1R=2,yE.C1G=3,yE.C1B=4,yE.C1A=5,yE.U1=6,yE.V1=7,yE.X2=8,yE.Y2=9,yE.C2R=10,yE.C2G=11,yE.C2B=12,yE.C2A=13,yE.U2=14,yE.V2=15,yE.X3=16,yE.Y3=17,yE.C3R=18,yE.C3G=19,yE.C3B=20,yE.C3A=21,yE.U3=22,yE.V3=23,yE.X4=24,yE.Y4=25,yE.C4R=26,yE.C4G=27,yE.C4B=28,yE.C4A=29,yE.U4=30,yE.V4=31;class zE{constructor(o,W){this.jitterX=0,this.jitterY=0,this.jitterX=o,this.jitterY=W}begin(o){}transform(o,W,F,E){o.x+=LW.randomTriangular(-this.jitterX,this.jitterY),o.y+=LW.randomTriangular(-this.jitterX,this.jitterY)}end(){}}const xE=class{constructor(o){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=o}begin(o){this.worldX=o.x+this.centerX,this.worldY=o.y+this.centerY}transform(o,W,F,E){const v=this.angle*LW.degreesToRadians,a=o.x-this.worldX,G=o.y-this.worldY,L=Math.sqrt(a*a+G*G);if(L<this.radius){const W=xE.interpolation.apply(0,v,(this.radius-L)/this.radius),F=Math.cos(W),E=Math.sin(W);o.x=F*a-E*G+this.worldX,o.y=E*a+F*G+this.worldY}}end(){}};let NE=xE;NE.interpolation=new lW(2);class eE{constructor(o,W,F){if(null==o)throw new Error("name cannot be null.");if(null==W)throw new Error("timelines cannot be null.");this.name=o,this.timelines=W,this.duration=F}apply(o,W,F,E,v,a,G,L){if(null==o)throw new Error("skeleton cannot be null.");E&&0!=this.duration&&(F%=this.duration,W>0&&(W%=this.duration));const U=this.timelines;for(let E=0,I=U.length;E<I;E++)U[E].apply(o,W,F,v,a,G,L)}static binarySearch(o,W,F=1){let E=0,v=o.length/F-2;if(0==v)return F;let a=v>>>1;for(;;){if(o[(a+1)*F]<=W?E=a+1:v=a,E==v)return(E+1)*F;a=E+v>>>1}}static linearSearch(o,W,F){for(let E=0,v=o.length-F;E<=v;E+=F)if(o[E]>W)return E;return-1}}var tE=(o=>(o[o.rotate=0]="rotate",o[o.translate=1]="translate",o[o.scale=2]="scale",o[o.shear=3]="shear",o[o.attachment=4]="attachment",o[o.color=5]="color",o[o.deform=6]="deform",o[o.event=7]="event",o[o.drawOrder=8]="drawOrder",o[o.ikConstraint=9]="ikConstraint",o[o.transformConstraint=10]="transformConstraint",o[o.pathConstraintPosition=11]="pathConstraintPosition",o[o.pathConstraintSpacing=12]="pathConstraintSpacing",o[o.pathConstraintMix=13]="pathConstraintMix",o[o.twoColor=14]="twoColor",o))(tE||{});const mE=class{constructor(o){if(o<=0)throw new Error(`frameCount must be > 0: ${o}`);this.curves=pW.newFloatArray((o-1)*mE.BEZIER_SIZE)}getFrameCount(){return this.curves.length/mE.BEZIER_SIZE+1}setLinear(o){this.curves[o*mE.BEZIER_SIZE]=mE.LINEAR}setStepped(o){this.curves[o*mE.BEZIER_SIZE]=mE.STEPPED}getCurveType(o){const W=o*mE.BEZIER_SIZE;if(W==this.curves.length)return mE.LINEAR;const F=this.curves[W];return F==mE.LINEAR?mE.LINEAR:F==mE.STEPPED?mE.STEPPED:mE.BEZIER}setCurve(o,W,F,E,v){const a=.03*(2*-W+E),G=.03*(2*-F+v),L=.006*(3*(W-E)+1),U=.006*(3*(F-v)+1);let I=2*a+L,l=2*G+U,h=.3*W+a+.16666667*L,p=.3*F+G+.16666667*U,g=o*mE.BEZIER_SIZE;const f=this.curves;f[g++]=mE.BEZIER;let A=h,k=p;for(let o=g+mE.BEZIER_SIZE-1;g<o;g+=2)f[g]=A,f[g+1]=k,h+=I,p+=l,I+=L,l+=U,A+=h,k+=p}getCurvePercent(o,W){W=LW.clamp(W,0,1);const F=this.curves;let E=o*mE.BEZIER_SIZE;const v=F[E];if(v==mE.LINEAR)return W;if(v==mE.STEPPED)return 0;E++;let a=0;for(let o=E,v=E+mE.BEZIER_SIZE-1;E<v;E+=2)if(a=F[E],a>=W){let v,G;return E==o?(v=0,G=0):(v=F[E-2],G=F[E-1]),G+(F[E+1]-G)*(W-v)/(a-v)}const G=F[E-1];return G+(1-G)*(W-a)/(1-a)}};let rE=mE;rE.LINEAR=0,rE.STEPPED=1,rE.BEZIER=2,rE.BEZIER_SIZE=19;const BE=class extends rE{constructor(o){super(o),this.frames=pW.newFloatArray(o<<1)}getPropertyId(){return 0+this.boneIndex}setFrame(o,W,F){o<<=1,this.frames[o]=W,this.frames[o+BE.ROTATION]=F}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.bones[this.boneIndex];if(F<L[0]){switch(a){case Co.setup:return void(U.rotation=U.data.rotation);case Co.first:const o=U.data.rotation-U.rotation;U.rotation+=(o-360*(16384-(16384.499999999996-o/360|0)))*v}return}if(F>=L[L.length-BE.ENTRIES]){let o=L[L.length+BE.PREV_ROTATION];switch(a){case Co.setup:U.rotation=U.data.rotation+o*v;break;case Co.first:case Co.replace:o+=U.data.rotation-U.rotation,o-=360*(16384-(16384.499999999996-o/360|0));case Co.add:U.rotation+=o*v}return}const I=eE.binarySearch(L,F,BE.ENTRIES),l=L[I+BE.PREV_ROTATION],h=L[I],p=this.getCurvePercent((I>>1)-1,1-(F-h)/(L[I+BE.PREV_TIME]-h));let g=L[I+BE.ROTATION]-l;switch(g=l+(g-360*(16384-(16384.499999999996-g/360|0)))*p,a){case Co.setup:U.rotation=U.data.rotation+(g-360*(16384-(16384.499999999996-g/360|0)))*v;break;case Co.first:case Co.replace:g+=U.data.rotation-U.rotation;case Co.add:U.rotation+=(g-360*(16384-(16384.499999999996-g/360|0)))*v}}};let jE=BE;jE.ENTRIES=2,jE.PREV_TIME=-2,jE.PREV_ROTATION=-1,jE.ROTATION=1;const VE=class extends rE{constructor(o){super(o),this.frames=pW.newFloatArray(o*VE.ENTRIES)}getPropertyId(){return(1<<24)+this.boneIndex}setFrame(o,W,F,E){o*=VE.ENTRIES,this.frames[o]=W,this.frames[o+VE.X]=F,this.frames[o+VE.Y]=E}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.bones[this.boneIndex];if(F<L[0]){switch(a){case Co.setup:return U.x=U.data.x,void(U.y=U.data.y);case Co.first:U.x+=(U.data.x-U.x)*v,U.y+=(U.data.y-U.y)*v}return}let I=0,l=0;if(F>=L[L.length-VE.ENTRIES])I=L[L.length+VE.PREV_X],l=L[L.length+VE.PREV_Y];else{const o=eE.binarySearch(L,F,VE.ENTRIES);I=L[o+VE.PREV_X],l=L[o+VE.PREV_Y];const W=L[o],E=this.getCurvePercent(o/VE.ENTRIES-1,1-(F-W)/(L[o+VE.PREV_TIME]-W));I+=(L[o+VE.X]-I)*E,l+=(L[o+VE.Y]-l)*E}switch(a){case Co.setup:U.x=U.data.x+I*v,U.y=U.data.y+l*v;break;case Co.first:case Co.replace:U.x+=(U.data.x+I-U.x)*v,U.y+=(U.data.y+l-U.y)*v;break;case Co.add:U.x+=I*v,U.y+=l*v}}};let wE=VE;wE.ENTRIES=3,wE.PREV_TIME=-3,wE.PREV_X=-2,wE.PREV_Y=-1,wE.X=1,wE.Y=2;class KE extends wE{constructor(o){super(o)}getPropertyId(){return(2<<24)+this.boneIndex}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.bones[this.boneIndex];if(F<L[0]){switch(a){case Co.setup:return U.scaleX=U.data.scaleX,void(U.scaleY=U.data.scaleY);case Co.first:U.scaleX+=(U.data.scaleX-U.scaleX)*v,U.scaleY+=(U.data.scaleY-U.scaleY)*v}return}let I=0,l=0;if(F>=L[L.length-KE.ENTRIES])I=L[L.length+KE.PREV_X]*U.data.scaleX,l=L[L.length+KE.PREV_Y]*U.data.scaleY;else{const o=eE.binarySearch(L,F,KE.ENTRIES);I=L[o+KE.PREV_X],l=L[o+KE.PREV_Y];const W=L[o],E=this.getCurvePercent(o/KE.ENTRIES-1,1-(F-W)/(L[o+KE.PREV_TIME]-W));I=(I+(L[o+KE.X]-I)*E)*U.data.scaleX,l=(l+(L[o+KE.Y]-l)*E)*U.data.scaleY}if(1==v)a==Co.add?(U.scaleX+=I-U.data.scaleX,U.scaleY+=l-U.data.scaleY):(U.scaleX=I,U.scaleY=l);else{let o=0,W=0;if(G==qo.mixOut)switch(a){case Co.setup:o=U.data.scaleX,W=U.data.scaleY,U.scaleX=o+(Math.abs(I)*LW.signum(o)-o)*v,U.scaleY=W+(Math.abs(l)*LW.signum(W)-W)*v;break;case Co.first:case Co.replace:o=U.scaleX,W=U.scaleY,U.scaleX=o+(Math.abs(I)*LW.signum(o)-o)*v,U.scaleY=W+(Math.abs(l)*LW.signum(W)-W)*v;break;case Co.add:o=U.scaleX,W=U.scaleY,U.scaleX=o+(Math.abs(I)*LW.signum(o)-U.data.scaleX)*v,U.scaleY=W+(Math.abs(l)*LW.signum(W)-U.data.scaleY)*v}else switch(a){case Co.setup:o=Math.abs(U.data.scaleX)*LW.signum(I),W=Math.abs(U.data.scaleY)*LW.signum(l),U.scaleX=o+(I-o)*v,U.scaleY=W+(l-W)*v;break;case Co.first:case Co.replace:o=Math.abs(U.scaleX)*LW.signum(I),W=Math.abs(U.scaleY)*LW.signum(l),U.scaleX=o+(I-o)*v,U.scaleY=W+(l-W)*v;break;case Co.add:o=LW.signum(I),W=LW.signum(l),U.scaleX=Math.abs(U.scaleX)*o+(I-Math.abs(U.data.scaleX)*o)*v,U.scaleY=Math.abs(U.scaleY)*W+(l-Math.abs(U.data.scaleY)*W)*v}}}}class TE extends wE{constructor(o){super(o)}getPropertyId(){return(3<<24)+this.boneIndex}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.bones[this.boneIndex];if(F<L[0]){switch(a){case Co.setup:return U.shearX=U.data.shearX,void(U.shearY=U.data.shearY);case Co.first:U.shearX+=(U.data.shearX-U.shearX)*v,U.shearY+=(U.data.shearY-U.shearY)*v}return}let I=0,l=0;if(F>=L[L.length-TE.ENTRIES])I=L[L.length+TE.PREV_X],l=L[L.length+TE.PREV_Y];else{const o=eE.binarySearch(L,F,TE.ENTRIES);I=L[o+TE.PREV_X],l=L[o+TE.PREV_Y];const W=L[o],E=this.getCurvePercent(o/TE.ENTRIES-1,1-(F-W)/(L[o+TE.PREV_TIME]-W));I+=(L[o+TE.X]-I)*E,l+=(L[o+TE.Y]-l)*E}switch(a){case Co.setup:U.shearX=U.data.shearX+I*v,U.shearY=U.data.shearY+l*v;break;case Co.first:case Co.replace:U.shearX+=(U.data.shearX+I-U.shearX)*v,U.shearY+=(U.data.shearY+l-U.shearY)*v;break;case Co.add:U.shearX+=I*v,U.shearY+=l*v}}}const dE=class extends rE{constructor(o){super(o),this.frames=pW.newFloatArray(o*dE.ENTRIES)}getPropertyId(){return(5<<24)+this.slotIndex}setFrame(o,W,F,E,v,a){o*=dE.ENTRIES,this.frames[o]=W,this.frames[o+dE.R]=F,this.frames[o+dE.G]=E,this.frames[o+dE.B]=v,this.frames[o+dE.A]=a}apply(o,W,F,E,v,a,G){const L=o.slots[this.slotIndex],U=this.frames;if(F<U[0]){switch(a){case Co.setup:return void L.color.setFromColor(L.data.color);case Co.first:const o=L.color,W=L.data.color;o.add((W.r-o.r)*v,(W.g-o.g)*v,(W.b-o.b)*v,(W.a-o.a)*v)}return}let I=0,l=0,h=0,p=0;if(F>=U[U.length-dE.ENTRIES]){const o=U.length;I=U[o+dE.PREV_R],l=U[o+dE.PREV_G],h=U[o+dE.PREV_B],p=U[o+dE.PREV_A]}else{const o=eE.binarySearch(U,F,dE.ENTRIES);I=U[o+dE.PREV_R],l=U[o+dE.PREV_G],h=U[o+dE.PREV_B],p=U[o+dE.PREV_A];const W=U[o],E=this.getCurvePercent(o/dE.ENTRIES-1,1-(F-W)/(U[o+dE.PREV_TIME]-W));I+=(U[o+dE.R]-I)*E,l+=(U[o+dE.G]-l)*E,h+=(U[o+dE.B]-h)*E,p+=(U[o+dE.A]-p)*E}if(1==v)L.color.set(I,l,h,p);else{const o=L.color;a==Co.setup&&o.setFromColor(L.data.color),o.add((I-o.r)*v,(l-o.g)*v,(h-o.b)*v,(p-o.a)*v)}}};let nE=dE;nE.ENTRIES=5,nE.PREV_TIME=-5,nE.PREV_R=-4,nE.PREV_G=-3,nE.PREV_B=-2,nE.PREV_A=-1,nE.R=1,nE.G=2,nE.B=3,nE.A=4;const uE=class extends rE{constructor(o){super(o),this.frames=pW.newFloatArray(o*uE.ENTRIES)}getPropertyId(){return(14<<24)+this.slotIndex}setFrame(o,W,F,E,v,a,G,L,U){o*=uE.ENTRIES,this.frames[o]=W,this.frames[o+uE.R]=F,this.frames[o+uE.G]=E,this.frames[o+uE.B]=v,this.frames[o+uE.A]=a,this.frames[o+uE.R2]=G,this.frames[o+uE.G2]=L,this.frames[o+uE.B2]=U}apply(o,W,F,E,v,a,G){const L=o.slots[this.slotIndex],U=this.frames;if(F<U[0]){switch(a){case Co.setup:return L.color.setFromColor(L.data.color),void L.darkColor.setFromColor(L.data.darkColor);case Co.first:const o=L.color,W=L.darkColor,F=L.data.color,E=L.data.darkColor;o.add((F.r-o.r)*v,(F.g-o.g)*v,(F.b-o.b)*v,(F.a-o.a)*v),W.add((E.r-W.r)*v,(E.g-W.g)*v,(E.b-W.b)*v,0)}return}let I=0,l=0,h=0,p=0,g=0,f=0,A=0;if(F>=U[U.length-uE.ENTRIES]){const o=U.length;I=U[o+uE.PREV_R],l=U[o+uE.PREV_G],h=U[o+uE.PREV_B],p=U[o+uE.PREV_A],g=U[o+uE.PREV_R2],f=U[o+uE.PREV_G2],A=U[o+uE.PREV_B2]}else{const o=eE.binarySearch(U,F,uE.ENTRIES);I=U[o+uE.PREV_R],l=U[o+uE.PREV_G],h=U[o+uE.PREV_B],p=U[o+uE.PREV_A],g=U[o+uE.PREV_R2],f=U[o+uE.PREV_G2],A=U[o+uE.PREV_B2];const W=U[o],E=this.getCurvePercent(o/uE.ENTRIES-1,1-(F-W)/(U[o+uE.PREV_TIME]-W));I+=(U[o+uE.R]-I)*E,l+=(U[o+uE.G]-l)*E,h+=(U[o+uE.B]-h)*E,p+=(U[o+uE.A]-p)*E,g+=(U[o+uE.R2]-g)*E,f+=(U[o+uE.G2]-f)*E,A+=(U[o+uE.B2]-A)*E}if(1==v)L.color.set(I,l,h,p),L.darkColor.set(g,f,A,1);else{const o=L.color,W=L.darkColor;a==Co.setup&&(o.setFromColor(L.data.color),W.setFromColor(L.data.darkColor)),o.add((I-o.r)*v,(l-o.g)*v,(h-o.b)*v,(p-o.a)*v),W.add((g-W.r)*v,(f-W.g)*v,(A-W.b)*v,0)}}};let $E=uE;$E.ENTRIES=8,$E.PREV_TIME=-8,$E.PREV_R=-7,$E.PREV_G=-6,$E.PREV_B=-5,$E.PREV_A=-4,$E.PREV_R2=-3,$E.PREV_G2=-2,$E.PREV_B2=-1,$E.R=1,$E.G=2,$E.B=3,$E.A=4,$E.R2=5,$E.G2=6,$E.B2=7;class YE{constructor(o){this.frames=pW.newFloatArray(o),this.attachmentNames=new Array(o)}getPropertyId(){return(4<<24)+this.slotIndex}getFrameCount(){return this.frames.length}setFrame(o,W,F){this.frames[o]=W,this.attachmentNames[o]=F}apply(o,W,F,E,v,a,G){const L=o.slots[this.slotIndex];if(G==qo.mixOut&&a==Co.setup){const W=L.data.attachmentName;return void L.setAttachment(null==W?null:o.getAttachment(this.slotIndex,W))}const U=this.frames;if(F<U[0]){if(a==Co.setup||a==Co.first){const W=L.data.attachmentName;L.setAttachment(null==W?null:o.getAttachment(this.slotIndex,W))}return}let I=0;I=F>=U[U.length-1]?U.length-1:eE.binarySearch(U,F,1)-1;const l=this.attachmentNames[I];o.slots[this.slotIndex].setAttachment(null==l?null:o.getAttachment(this.slotIndex,l))}}let QE=null;class CE extends rE{constructor(o){super(o),this.frames=pW.newFloatArray(o),this.frameVertices=new Array(o),null==QE&&(QE=pW.newFloatArray(64))}getPropertyId(){return(6<<27)+Number(this.attachment.id)+this.slotIndex}setFrame(o,W,F){this.frames[o]=W,this.frameVertices[o]=F}apply(o,W,F,E,v,a,G){const L=o.slots[this.slotIndex],U=L.getAttachment();if(!(U instanceof hE&&U.applyDeform(this.attachment)))return;const I=L.attachmentVertices;0==I.length&&(a=Co.setup);const l=this.frameVertices,h=l[0].length,p=this.frames;if(F<p[0]){const o=U;switch(a){case Co.setup:return void(I.length=0);case Co.first:if(1==v){I.length=0;break}const W=pW.setArraySize(I,h);if(null==o.bones){const F=o.vertices;for(let o=0;o<h;o++)W[o]+=(F[o]-W[o])*v}else{v=1-v;for(let o=0;o<h;o++)W[o]*=v}}return}const g=pW.setArraySize(I,h);if(F>=p[p.length-1]){const o=l[p.length-1];if(1==v)if(a==Co.add){const W=U;if(null==W.bones){const F=W.vertices;for(let W=0;W<h;W++)g[W]+=o[W]-F[W]}else for(let W=0;W<h;W++)g[W]+=o[W]}else pW.arrayCopy(o,0,g,0,h);else switch(a){case Co.setup:{const W=U;if(null==W.bones){const F=W.vertices;for(let W=0;W<h;W++){const E=F[W];g[W]=E+(o[W]-E)*v}}else for(let W=0;W<h;W++)g[W]=o[W]*v;break}case Co.first:case Co.replace:for(let W=0;W<h;W++)g[W]+=(o[W]-g[W])*v;case Co.add:const W=U;if(null==W.bones){const F=W.vertices;for(let W=0;W<h;W++)g[W]+=(o[W]-F[W])*v}else for(let W=0;W<h;W++)g[W]+=o[W]*v}return}const f=eE.binarySearch(p,F),A=l[f-1],k=l[f],Z=p[f],P=this.getCurvePercent(f-1,1-(F-Z)/(p[f-1]-Z));if(1==v)if(a==Co.add){const o=U;if(null==o.bones){const W=o.vertices;for(let o=0;o<h;o++){const F=A[o];g[o]+=F+(k[o]-F)*P-W[o]}}else for(let o=0;o<h;o++){const W=A[o];g[o]+=W+(k[o]-W)*P}}else for(let o=0;o<h;o++){const W=A[o];g[o]=W+(k[o]-W)*P}else switch(a){case Co.setup:{const o=U;if(null==o.bones){const W=o.vertices;for(let o=0;o<h;o++){const F=A[o],E=W[o];g[o]=E+(F+(k[o]-F)*P-E)*v}}else for(let o=0;o<h;o++){const W=A[o];g[o]=(W+(k[o]-W)*P)*v}break}case Co.first:case Co.replace:for(let o=0;o<h;o++){const W=A[o];g[o]+=(W+(k[o]-W)*P-g[o])*v}break;case Co.add:const o=U;if(null==o.bones){const W=o.vertices;for(let o=0;o<h;o++){const F=A[o];g[o]+=(F+(k[o]-F)*P-W[o])*v}}else for(let o=0;o<h;o++){const W=A[o];g[o]+=(W+(k[o]-W)*P)*v}}}}class qE{constructor(o){this.frames=pW.newFloatArray(o),this.events=new Array(o)}getPropertyId(){return 7<<24}getFrameCount(){return this.frames.length}setFrame(o,W){this.frames[o]=W.time,this.events[o]=W}apply(o,W,F,E,v,a,G){if(null==E)return;const L=this.frames,U=this.frames.length;if(W>F)this.apply(o,W,Number.MAX_VALUE,E,v,a,G),W=-1;else if(W>=L[U-1])return;if(F<L[0])return;let I=0;if(W<L[0])I=0;else{I=eE.binarySearch(L,W);const o=L[I];for(;I>0&&L[I-1]==o;)I--}for(;I<U&&F>=L[I];I++)E.push(this.events[I])}}class cE{constructor(o){this.frames=pW.newFloatArray(o),this.drawOrders=new Array(o)}getPropertyId(){return 8<<24}getFrameCount(){return this.frames.length}setFrame(o,W,F){this.frames[o]=W,this.drawOrders[o]=F}apply(o,W,F,E,v,a,G){const L=o.drawOrder,U=o.slots;if(G==qo.mixOut&&a==Co.setup)return void pW.arrayCopy(o.slots,0,o.drawOrder,0,o.slots.length);const I=this.frames;if(F<I[0])return void(a!=Co.setup&&a!=Co.first||pW.arrayCopy(o.slots,0,o.drawOrder,0,o.slots.length));let l=0;l=F>=I[I.length-1]?I.length-1:eE.binarySearch(I,F)-1;const h=this.drawOrders[l];if(null==h)pW.arrayCopy(U,0,L,0,U.length);else for(let o=0,W=h.length;o<W;o++)L[o]=U[h[o]]}}const _E=class extends rE{constructor(o){super(o),this.frames=pW.newFloatArray(o*_E.ENTRIES)}getPropertyId(){return(9<<24)+this.ikConstraintIndex}setFrame(o,W,F,E,v,a){o*=_E.ENTRIES,this.frames[o]=W,this.frames[o+_E.MIX]=F,this.frames[o+_E.BEND_DIRECTION]=E,this.frames[o+_E.COMPRESS]=v?1:0,this.frames[o+_E.STRETCH]=a?1:0}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.ikConstraints[this.ikConstraintIndex];if(F<L[0]){switch(a){case Co.setup:return U.mix=U.data.mix,U.bendDirection=U.data.bendDirection,U.compress=U.data.compress,void(U.stretch=U.data.stretch);case Co.first:U.mix+=(U.data.mix-U.mix)*v,U.bendDirection=U.data.bendDirection,U.compress=U.data.compress,U.stretch=U.data.stretch}return}if(F>=L[L.length-_E.ENTRIES])return void(a==Co.setup?(U.mix=U.data.mix+(L[L.length+_E.PREV_MIX]-U.data.mix)*v,G==qo.mixOut?(U.bendDirection=U.data.bendDirection,U.compress=U.data.compress,U.stretch=U.data.stretch):(U.bendDirection=L[L.length+_E.PREV_BEND_DIRECTION],U.compress=0!=L[L.length+_E.PREV_COMPRESS],U.stretch=0!=L[L.length+_E.PREV_STRETCH])):(U.mix+=(L[L.length+_E.PREV_MIX]-U.mix)*v,G==qo.mixIn&&(U.bendDirection=L[L.length+_E.PREV_BEND_DIRECTION],U.compress=0!=L[L.length+_E.PREV_COMPRESS],U.stretch=0!=L[L.length+_E.PREV_STRETCH])));const I=eE.binarySearch(L,F,_E.ENTRIES),l=L[I+_E.PREV_MIX],h=L[I],p=this.getCurvePercent(I/_E.ENTRIES-1,1-(F-h)/(L[I+_E.PREV_TIME]-h));a==Co.setup?(U.mix=U.data.mix+(l+(L[I+_E.MIX]-l)*p-U.data.mix)*v,G==qo.mixOut?(U.bendDirection=U.data.bendDirection,U.compress=U.data.compress,U.stretch=U.data.stretch):(U.bendDirection=L[I+_E.PREV_BEND_DIRECTION],U.compress=0!=L[I+_E.PREV_COMPRESS],U.stretch=0!=L[I+_E.PREV_STRETCH])):(U.mix+=(l+(L[I+_E.MIX]-l)*p-U.mix)*v,G==qo.mixIn&&(U.bendDirection=L[I+_E.PREV_BEND_DIRECTION],U.compress=0!=L[I+_E.PREV_COMPRESS],U.stretch=0!=L[I+_E.PREV_STRETCH]))}};let OE=_E;OE.ENTRIES=5,OE.PREV_TIME=-5,OE.PREV_MIX=-4,OE.PREV_BEND_DIRECTION=-3,OE.PREV_COMPRESS=-2,OE.PREV_STRETCH=-1,OE.MIX=1,OE.BEND_DIRECTION=2,OE.COMPRESS=3,OE.STRETCH=4;const XE=class extends rE{constructor(o){super(o),this.frames=pW.newFloatArray(o*XE.ENTRIES)}getPropertyId(){return(10<<24)+this.transformConstraintIndex}setFrame(o,W,F,E,v,a){o*=XE.ENTRIES,this.frames[o]=W,this.frames[o+XE.ROTATE]=F,this.frames[o+XE.TRANSLATE]=E,this.frames[o+XE.SCALE]=v,this.frames[o+XE.SHEAR]=a}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.transformConstraints[this.transformConstraintIndex];if(F<L[0]){const o=U.data;switch(a){case Co.setup:return U.rotateMix=o.rotateMix,U.translateMix=o.translateMix,U.scaleMix=o.scaleMix,void(U.shearMix=o.shearMix);case Co.first:U.rotateMix+=(o.rotateMix-U.rotateMix)*v,U.translateMix+=(o.translateMix-U.translateMix)*v,U.scaleMix+=(o.scaleMix-U.scaleMix)*v,U.shearMix+=(o.shearMix-U.shearMix)*v}return}let I=0,l=0,h=0,p=0;if(F>=L[L.length-XE.ENTRIES]){const o=L.length;I=L[o+XE.PREV_ROTATE],l=L[o+XE.PREV_TRANSLATE],h=L[o+XE.PREV_SCALE],p=L[o+XE.PREV_SHEAR]}else{const o=eE.binarySearch(L,F,XE.ENTRIES);I=L[o+XE.PREV_ROTATE],l=L[o+XE.PREV_TRANSLATE],h=L[o+XE.PREV_SCALE],p=L[o+XE.PREV_SHEAR];const W=L[o],E=this.getCurvePercent(o/XE.ENTRIES-1,1-(F-W)/(L[o+XE.PREV_TIME]-W));I+=(L[o+XE.ROTATE]-I)*E,l+=(L[o+XE.TRANSLATE]-l)*E,h+=(L[o+XE.SCALE]-h)*E,p+=(L[o+XE.SHEAR]-p)*E}if(a==Co.setup){const o=U.data;U.rotateMix=o.rotateMix+(I-o.rotateMix)*v,U.translateMix=o.translateMix+(l-o.translateMix)*v,U.scaleMix=o.scaleMix+(h-o.scaleMix)*v,U.shearMix=o.shearMix+(p-o.shearMix)*v}else U.rotateMix+=(I-U.rotateMix)*v,U.translateMix+=(l-U.translateMix)*v,U.scaleMix+=(h-U.scaleMix)*v,U.shearMix+=(p-U.shearMix)*v}};let SE=XE;SE.ENTRIES=5,SE.PREV_TIME=-5,SE.PREV_ROTATE=-4,SE.PREV_TRANSLATE=-3,SE.PREV_SCALE=-2,SE.PREV_SHEAR=-1,SE.ROTATE=1,SE.TRANSLATE=2,SE.SCALE=3,SE.SHEAR=4;const sE=class extends rE{constructor(o){super(o),this.frames=pW.newFloatArray(o*sE.ENTRIES)}getPropertyId(){return(11<<24)+this.pathConstraintIndex}setFrame(o,W,F){o*=sE.ENTRIES,this.frames[o]=W,this.frames[o+sE.VALUE]=F}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.pathConstraints[this.pathConstraintIndex];if(F<L[0]){switch(a){case Co.setup:return void(U.position=U.data.position);case Co.first:U.position+=(U.data.position-U.position)*v}return}let I=0;if(F>=L[L.length-sE.ENTRIES])I=L[L.length+sE.PREV_VALUE];else{const o=eE.binarySearch(L,F,sE.ENTRIES);I=L[o+sE.PREV_VALUE];const W=L[o],E=this.getCurvePercent(o/sE.ENTRIES-1,1-(F-W)/(L[o+sE.PREV_TIME]-W));I+=(L[o+sE.VALUE]-I)*E}a==Co.setup?U.position=U.data.position+(I-U.data.position)*v:U.position+=(I-U.position)*v}};let iE=sE;iE.ENTRIES=2,iE.PREV_TIME=-2,iE.PREV_VALUE=-1,iE.VALUE=1;class RE extends iE{constructor(o){super(o)}getPropertyId(){return(12<<24)+this.pathConstraintIndex}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.pathConstraints[this.pathConstraintIndex];if(F<L[0]){switch(a){case Co.setup:return void(U.spacing=U.data.spacing);case Co.first:U.spacing+=(U.data.spacing-U.spacing)*v}return}let I=0;if(F>=L[L.length-RE.ENTRIES])I=L[L.length+RE.PREV_VALUE];else{const o=eE.binarySearch(L,F,RE.ENTRIES);I=L[o+RE.PREV_VALUE];const W=L[o],E=this.getCurvePercent(o/RE.ENTRIES-1,1-(F-W)/(L[o+RE.PREV_TIME]-W));I+=(L[o+RE.VALUE]-I)*E}a==Co.setup?U.spacing=U.data.spacing+(I-U.data.spacing)*v:U.spacing+=(I-U.spacing)*v}}const JE=class extends rE{constructor(o){super(o),this.frames=pW.newFloatArray(o*JE.ENTRIES)}getPropertyId(){return(13<<24)+this.pathConstraintIndex}setFrame(o,W,F,E){o*=JE.ENTRIES,this.frames[o]=W,this.frames[o+JE.ROTATE]=F,this.frames[o+JE.TRANSLATE]=E}apply(o,W,F,E,v,a,G){const L=this.frames,U=o.pathConstraints[this.pathConstraintIndex];if(F<L[0]){switch(a){case Co.setup:return U.rotateMix=U.data.rotateMix,void(U.translateMix=U.data.translateMix);case Co.first:U.rotateMix+=(U.data.rotateMix-U.rotateMix)*v,U.translateMix+=(U.data.translateMix-U.translateMix)*v}return}let I=0,l=0;if(F>=L[L.length-JE.ENTRIES])I=L[L.length+JE.PREV_ROTATE],l=L[L.length+JE.PREV_TRANSLATE];else{const o=eE.binarySearch(L,F,JE.ENTRIES);I=L[o+JE.PREV_ROTATE],l=L[o+JE.PREV_TRANSLATE];const W=L[o],E=this.getCurvePercent(o/JE.ENTRIES-1,1-(F-W)/(L[o+JE.PREV_TIME]-W));I+=(L[o+JE.ROTATE]-I)*E,l+=(L[o+JE.TRANSLATE]-l)*E}a==Co.setup?(U.rotateMix=U.data.rotateMix+(I-U.data.rotateMix)*v,U.translateMix=U.data.translateMix+(l-U.data.translateMix)*v):(U.rotateMix+=(I-U.rotateMix)*v,U.translateMix+=(l-U.translateMix)*v)}};let DE=JE;DE.ENTRIES=3,DE.PREV_TIME=-3,DE.PREV_ROTATE=-2,DE.PREV_TRANSLATE=-1,DE.ROTATE=1,DE.TRANSLATE=2;const ME=class{constructor(o){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new Fv(this),this.propertyIDs=new FW,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new gW((()=>new ov)),this.data=o}update(o){o*=this.timeScale;const W=this.tracks;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(null==E)continue;E.animationLast=E.nextAnimationLast,E.trackLast=E.nextTrackLast;let v=o*E.timeScale;if(E.delay>0){if(E.delay-=v,E.delay>0)continue;v=-E.delay,E.delay=0}let a=E.next;if(null!=a){const W=E.trackLast-a.delay;if(W>=0){for(a.delay=0,a.trackTime=0==E.timeScale?0:(W/E.timeScale+o)*a.timeScale,E.trackTime+=v,this.setCurrent(F,a,!0);null!=a.mixingFrom;)a.mixTime+=o,a=a.mixingFrom;continue}}else if(E.trackLast>=E.trackEnd&&null==E.mixingFrom){W[F]=null,this.queue.end(E),this.disposeNext(E);continue}if(null!=E.mixingFrom&&this.updateMixingFrom(E,o)){let o=E.mixingFrom;for(E.mixingFrom=null,null!=o&&(o.mixingTo=null);null!=o;)this.queue.end(o),o=o.mixingFrom}E.trackTime+=v}this.queue.drain()}updateMixingFrom(o,W){const F=o.mixingFrom;if(null==F)return!0;const E=this.updateMixingFrom(F,W);return F.animationLast=F.nextAnimationLast,F.trackLast=F.nextTrackLast,o.mixTime>0&&o.mixTime>=o.mixDuration?(0!=F.totalAlpha&&0!=o.mixDuration||(o.mixingFrom=F.mixingFrom,null!=F.mixingFrom&&(F.mixingFrom.mixingTo=o),o.interruptAlpha=F.interruptAlpha,this.queue.end(F)),E):(F.trackTime+=W*F.timeScale,o.mixTime+=W,!1)}apply(o){if(null==o)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();const W=this.events,F=this.tracks;let E=!1;for(let v=0,a=F.length;v<a;v++){const a=F[v];if(null==a||a.delay>0)continue;E=!0;const G=0==v?Co.first:a.mixBlend;let L=a.alpha;null!=a.mixingFrom?L*=this.applyMixingFrom(a,o,G):a.trackTime>=a.trackEnd&&null==a.next&&(L=0);const U=a.animationLast,I=a.getAnimationTime(),l=a.animation.timelines.length,h=a.animation.timelines;if(0==v&&1==L||G==Co.add)for(let F=0;F<l;F++)pW.webkit602BugfixHelper(L,G),h[F].apply(o,U,I,W,L,G,qo.mixIn);else{const F=a.timelineMode,E=0==a.timelinesRotation.length;E&&pW.setArraySize(a.timelinesRotation,l<<1,null);const v=a.timelinesRotation;for(let a=0;a<l;a++){const l=h[a],p=F[a]==ME.SUBSEQUENT?G:Co.setup;l instanceof jE?this.applyRotateTimeline(l,o,I,L,p,v,a<<1,E):(pW.webkit602BugfixHelper(L,G),l.apply(o,U,I,W,L,p,qo.mixIn))}}this.queueEvents(a,I),W.length=0,a.nextAnimationLast=I,a.nextTrackLast=a.trackTime}return this.queue.drain(),E}applyMixingFrom(o,W,F){const E=o.mixingFrom;null!=E.mixingFrom&&this.applyMixingFrom(E,W,F);let v=0;0==o.mixDuration?(v=1,F==Co.first&&(F=Co.setup)):(v=o.mixTime/o.mixDuration,v>1&&(v=1),F!=Co.first&&(F=E.mixBlend));const a=v<E.eventThreshold?this.events:null,G=v<E.attachmentThreshold,L=v<E.drawOrderThreshold,U=E.animationLast,I=E.getAnimationTime(),l=E.animation.timelines.length,h=E.animation.timelines,p=E.alpha*o.interruptAlpha,g=p*(1-v);if(F==Co.add)for(let o=0;o<l;o++)h[o].apply(W,U,I,a,g,F,qo.mixOut);else{const o=E.timelineMode,v=E.timelineHoldMix,f=0==E.timelinesRotation.length;f&&pW.setArraySize(E.timelinesRotation,l<<1,null);const A=E.timelinesRotation;E.totalAlpha=0;for(let k=0;k<l;k++){const l=h[k];let Z,P=qo.mixOut,y=0;switch(o[k]){case ME.SUBSEQUENT:if(!G&&l instanceof YE)continue;if(!L&&l instanceof cE)continue;Z=F,y=g;break;case ME.FIRST:Z=Co.setup,y=g;break;case ME.HOLD:Z=Co.setup,y=p;break;default:Z=Co.setup;const o=v[k];y=p*Math.max(0,1-o.mixTime/o.mixDuration)}E.totalAlpha+=y,l instanceof jE?this.applyRotateTimeline(l,W,I,y,Z,A,k<<1,f):(pW.webkit602BugfixHelper(y,F),Z==Co.setup&&(l instanceof YE?G&&(P=qo.mixOut):l instanceof cE&&L&&(P=qo.mixOut)),l.apply(W,U,I,a,y,Z,P))}}return o.mixDuration>0&&this.queueEvents(E,I),this.events.length=0,E.nextAnimationLast=I,E.nextTrackLast=E.trackTime,v}applyRotateTimeline(o,W,F,E,v,a,G,L){if(L&&(a[G]=0),1==E)return void o.apply(W,0,F,null,1,v,qo.mixIn);const U=o,I=U.frames,l=W.bones[U.boneIndex];let h=0,p=0;if(F<I[0])switch(v){case Co.setup:l.rotation=l.data.rotation;default:return;case Co.first:h=l.rotation,p=l.data.rotation}else if(h=v==Co.setup?l.data.rotation:l.rotation,F>=I[I.length-jE.ENTRIES])p=l.data.rotation+I[I.length+jE.PREV_ROTATION];else{const o=eE.binarySearch(I,F,jE.ENTRIES),W=I[o+jE.PREV_ROTATION],E=I[o],v=U.getCurvePercent((o>>1)-1,1-(F-E)/(I[o+jE.PREV_TIME]-E));p=I[o+jE.ROTATION]-W,p-=360*(16384-(16384.499999999996-p/360|0)),p=W+p*v+l.data.rotation,p-=360*(16384-(16384.499999999996-p/360|0))}let g=0,f=p-h;if(f-=360*(16384-(16384.499999999996-f/360|0)),0==f)g=a[G];else{let o=0,W=0;L?(o=0,W=f):(o=a[G],W=a[G+1]);const F=f>0;let E=o>=0;LW.signum(W)!=LW.signum(f)&&Math.abs(W)<=90&&(Math.abs(o)>180&&(o+=360*LW.signum(o)),E=F),g=f+o-o%360,E!=F&&(g+=360*LW.signum(o)),a[G]=g}a[G+1]=f,h+=g*E,l.rotation=h-360*(16384-(16384.499999999996-h/360|0))}queueEvents(o,W){const F=o.animationStart,E=o.animationEnd,v=E-F,a=o.trackLast%v,G=this.events;let L=0;const U=G.length;for(;L<U;L++){const W=G[L];if(W.time<a)break;W.time>E||this.queue.event(o,W)}let I=!1;for(I=o.loop?0==v||a>o.trackTime%v:W>=E&&o.animationLast<E,I&&this.queue.complete(o);L<U;L++)G[L].time<F||this.queue.event(o,G[L])}clearTracks(){const o=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let o=0,W=this.tracks.length;o<W;o++)this.clearTrack(o);this.tracks.length=0,this.queue.drainDisabled=o,this.queue.drain()}clearTrack(o){if(o>=this.tracks.length)return;const W=this.tracks[o];if(null==W)return;this.queue.end(W),this.disposeNext(W);let F=W;for(;;){const o=F.mixingFrom;if(null==o)break;this.queue.end(o),F.mixingFrom=null,F.mixingTo=null,F=o}this.tracks[W.trackIndex]=null,this.queue.drain()}setCurrent(o,W,F){const E=this.expandToIndex(o);this.tracks[o]=W,null!=E&&(F&&this.queue.interrupt(E),W.mixingFrom=E,E.mixingTo=W,W.mixTime=0,null!=E.mixingFrom&&E.mixDuration>0&&(W.interruptAlpha*=Math.min(1,E.mixTime/E.mixDuration)),E.timelinesRotation.length=0),this.queue.start(W)}setAnimation(o,W,F){const E=this.data.skeletonData.findAnimation(W);if(null==E)throw new Error(`Animation not found: ${W}`);return this.setAnimationWith(o,E,F)}setAnimationWith(o,W,F){if(null==W)throw new Error("animation cannot be null.");let E=!0,v=this.expandToIndex(o);null!=v&&(-1==v.nextTrackLast?(this.tracks[o]=v.mixingFrom,this.queue.interrupt(v),this.queue.end(v),this.disposeNext(v),v=v.mixingFrom,E=!1):this.disposeNext(v));const a=this.trackEntry(o,W,F,v);return this.setCurrent(o,a,E),this.queue.drain(),a}addAnimation(o,W,F,E){const v=this.data.skeletonData.findAnimation(W);if(null==v)throw new Error(`Animation not found: ${W}`);return this.addAnimationWith(o,v,F,E)}addAnimationWith(o,W,F,E){if(null==W)throw new Error("animation cannot be null.");let v=this.expandToIndex(o);if(null!=v)for(;null!=v.next;)v=v.next;const a=this.trackEntry(o,W,F,v);if(null==v)this.setCurrent(o,a,!0),this.queue.drain();else if(v.next=a,E<=0){const o=v.animationEnd-v.animationStart;0!=o?(v.loop?E+=o*(1+(v.trackTime/o|0)):E+=Math.max(o,v.trackTime),E-=this.data.getMix(v.animation,W)):E=v.trackTime}return a.delay=E,a}setEmptyAnimation(o,W){const F=this.setAnimationWith(o,ME.emptyAnimation,!1);return F.mixDuration=W,F.trackEnd=W,F}addEmptyAnimation(o,W,F){F<=0&&(F-=W);const E=this.addAnimationWith(o,ME.emptyAnimation,!1,F);return E.mixDuration=W,E.trackEnd=W,E}setEmptyAnimations(o){const W=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let W=0,F=this.tracks.length;W<F;W++){const F=this.tracks[W];null!=F&&this.setEmptyAnimation(F.trackIndex,o)}this.queue.drainDisabled=W,this.queue.drain()}expandToIndex(o){return o<this.tracks.length?this.tracks[o]:(pW.ensureArrayCapacity(this.tracks,o-this.tracks.length+1,null),this.tracks.length=o+1,null)}trackEntry(o,W,F,E){const v=this.trackEntryPool.obtain();return v.trackIndex=o,v.animation=W,v.loop=F,v.holdPrevious=!1,v.eventThreshold=0,v.attachmentThreshold=0,v.drawOrderThreshold=0,v.animationStart=0,v.animationEnd=W.duration,v.animationLast=-1,v.nextAnimationLast=-1,v.delay=0,v.trackTime=0,v.trackLast=-1,v.nextTrackLast=-1,v.trackEnd=Number.MAX_VALUE,v.timeScale=1,v.alpha=1,v.interruptAlpha=1,v.mixTime=0,v.mixDuration=null==E?0:this.data.getMix(E.animation,W),v}disposeNext(o){let W=o.next;for(;null!=W;)this.queue.dispose(W),W=W.next;o.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();for(let o=0,W=this.tracks.length;o<W;o++){let W=this.tracks[o];if(null!=W){for(;null!=W.mixingFrom;)W=W.mixingFrom;do{null!=W.mixingFrom&&W.mixBlend==Co.add||this.setTimelineModes(W),W=W.mixingTo}while(null!=W)}}}setTimelineModes(o){const W=o.mixingTo,F=o.animation.timelines,E=o.animation.timelines.length,v=pW.setArraySize(o.timelineMode,E);o.timelineHoldMix.length=0;const a=pW.setArraySize(o.timelineHoldMix,E),G=this.propertyIDs;if(null!=W&&W.holdPrevious)for(let o=0;o<E;o++)G.add(F[o].getPropertyId()),v[o]=ME.HOLD;else o:for(let L=0;L<E;L++){const E=F[L].getPropertyId();if(G.add(E))if(null!=W&&this.hasTimeline(W,E)){for(let F=W.mixingTo;null!=F;F=F.mixingTo)if(!this.hasTimeline(F,E)){if(o.mixDuration>0){v[L]=ME.HOLD_MIX,a[L]=F;continue o}break}v[L]=ME.HOLD}else v[L]=ME.FIRST;else v[L]=ME.SUBSEQUENT}}hasTimeline(o,W){const F=o.animation.timelines;for(let o=0,E=F.length;o<E;o++)if(F[o].getPropertyId()==W)return!0;return!1}getCurrent(o){return o>=this.tracks.length?null:this.tracks[o]}addListener(o){if(null==o)throw new Error("listener cannot be null.");this.listeners.push(o)}removeListener(o){const W=this.listeners.indexOf(o);W>=0&&this.listeners.splice(W,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}setAnimationByName(o,W,F){ME.deprecatedWarning1||(ME.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(o,W,F)}addAnimationByName(o,W,F,E){ME.deprecatedWarning2||(ME.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(o,W,F,E)}hasAnimation(o){return null!==this.data.skeletonData.findAnimation(o)}hasAnimationByName(o){return ME.deprecatedWarning3||(ME.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(o)}};let HE=ME;HE.emptyAnimation=new eE("<empty>",[],0),HE.SUBSEQUENT=0,HE.FIRST=1,HE.HOLD=2,HE.HOLD_MIX=3,HE.deprecatedWarning1=!1,HE.deprecatedWarning2=!1,HE.deprecatedWarning3=!1;const bE=class{constructor(){this.mixBlend=Co.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){const o=this.animationEnd-this.animationStart;return 0==o?this.animationStart:this.trackTime%o+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(o){this.animationLast=o,this.nextAnimationLast=o}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}get time(){return bE.deprecatedWarning1||(bE.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime}set time(o){bE.deprecatedWarning1||(bE.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=o}get endTime(){return bE.deprecatedWarning2||(bE.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime}set endTime(o){bE.deprecatedWarning2||(bE.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=o}loopsCount(){return Math.floor(this.trackTime/this.trackEnd)}};let ov=bE;ov.deprecatedWarning1=!1,ov.deprecatedWarning2=!1;const Wv=class{constructor(o){this.objects=[],this.drainDisabled=!1,this.animState=o}start(o){this.objects.push(Ev.start),this.objects.push(o),this.animState.animationsChanged=!0}interrupt(o){this.objects.push(Ev.interrupt),this.objects.push(o)}end(o){this.objects.push(Ev.end),this.objects.push(o),this.animState.animationsChanged=!0}dispose(o){this.objects.push(Ev.dispose),this.objects.push(o)}complete(o){this.objects.push(Ev.complete),this.objects.push(o)}event(o,W){this.objects.push(Ev.event),this.objects.push(o),this.objects.push(W)}deprecateStuff(){return Wv.deprecatedWarning1||(Wv.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;const o=this.objects,W=this.animState.listeners;for(let F=0;F<o.length;F+=2){const E=o[F],v=o[F+1];switch(E){case Ev.start:null!=v.listener&&v.listener.start&&v.listener.start(v);for(let o=0;o<W.length;o++)W[o].start&&W[o].start(v);v.onStart&&this.deprecateStuff()&&v.onStart(v.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(v.trackIndex);break;case Ev.interrupt:null!=v.listener&&v.listener.interrupt&&v.listener.interrupt(v);for(let o=0;o<W.length;o++)W[o].interrupt&&W[o].interrupt(v);break;case Ev.end:null!=v.listener&&v.listener.end&&v.listener.end(v);for(let o=0;o<W.length;o++)W[o].end&&W[o].end(v);v.onEnd&&this.deprecateStuff()&&v.onEnd(v.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(v.trackIndex);case Ev.dispose:null!=v.listener&&v.listener.dispose&&v.listener.dispose(v);for(let o=0;o<W.length;o++)W[o].dispose&&W[o].dispose(v);this.animState.trackEntryPool.free(v);break;case Ev.complete:null!=v.listener&&v.listener.complete&&v.listener.complete(v);for(let o=0;o<W.length;o++)W[o].complete&&W[o].complete(v);const E=LW.toInt(v.loopsCount());v.onComplete&&this.deprecateStuff()&&v.onComplete(v.trackIndex,E),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(v.trackIndex,E);break;case Ev.event:const a=o[2+F++];null!=v.listener&&v.listener.event&&v.listener.event(v,a);for(let o=0;o<W.length;o++)W[o].event&&W[o].event(v,a);v.onEvent&&this.deprecateStuff()&&v.onEvent(v.trackIndex,a),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(v.trackIndex,a)}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}};let Fv=Wv;Fv.deprecatedWarning1=!1;var Ev=(o=>(o[o.start=0]="start",o[o.interrupt=1]="interrupt",o[o.end=2]="end",o[o.dispose=3]="dispose",o[o.complete=4]="complete",o[o.event=5]="event",o))(Ev||{});class vv{start(o){}interrupt(o){}end(o){}dispose(o){}complete(o){}event(o,W){}}const av=class{constructor(o){if(this.animationToMixTime={},this.defaultMix=0,null==o)throw new Error("skeletonData cannot be null.");this.skeletonData=o}setMix(o,W,F){const E=this.skeletonData.findAnimation(o);if(null==E)throw new Error(`Animation not found: ${o}`);const v=this.skeletonData.findAnimation(W);if(null==v)throw new Error(`Animation not found: ${W}`);this.setMixWith(E,v,F)}setMixByName(o,W,F){av.deprecatedWarning1||(av.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(o,W,F)}setMixWith(o,W,F){if(null==o)throw new Error("from cannot be null.");if(null==W)throw new Error("to cannot be null.");const E=`${o.name}.${W.name}`;this.animationToMixTime[E]=F}getMix(o,W){const F=`${o.name}.${W.name}`,E=this.animationToMixTime[F];return void 0===E?this.defaultMix:E}};let Gv=av;Gv.deprecatedWarning1=!1;class Lv{constructor(o){this.atlas=o}newRegionAttachment(o,W,F){const E=this.atlas.findRegion(F);if(null==E)throw new Error(`Region not found in atlas: ${F} (region attachment: ${W})`);const v=new yE(W);return v.region=E,v}newMeshAttachment(o,W,F){const E=this.atlas.findRegion(F);if(null==E)throw new Error(`Region not found in atlas: ${F} (mesh attachment: ${W})`);const v=new fE(W);return v.region=E,v}newBoundingBoxAttachment(o,W){return new pE(W)}newPathAttachment(o,W){return new AE(W)}newPointAttachment(o,W){return new kE(W)}newClippingAttachment(o,W){return new gE(W)}}class Uv{constructor(o,W,F){if(this.matrix=new Xo.uq,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!0,null==o)throw new Error("data cannot be null.");if(null==W)throw new Error("skeleton cannot be null.");this.data=o,this.skeleton=W,this.parent=F,this.setToSetupPose()}get worldX(){return this.matrix.tx}get worldY(){return this.matrix.ty}update(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(o,W,F,E,v,a,G){this.ax=o,this.ay=W,this.arotation=F,this.ascaleX=E,this.ascaleY=v,this.ashearX=a,this.ashearY=G,this.appliedValid=!0;const L=this.parent,U=this.matrix,I=this.skeleton.scaleX,l=kW?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==L){const L=this.skeleton,h=F+90+G;return U.a=LW.cosDeg(F+a)*E*I,U.c=LW.cosDeg(h)*v*I,U.b=LW.sinDeg(F+a)*E*l,U.d=LW.sinDeg(h)*v*l,U.tx=o*I+L.x,void(U.ty=W*l+L.y)}let h=L.matrix.a,p=L.matrix.c,g=L.matrix.b,f=L.matrix.d;switch(U.tx=h*o+p*W+L.matrix.tx,U.ty=g*o+f*W+L.matrix.ty,this.data.transformMode){case Oo.Normal:{const o=F+90+G,W=LW.cosDeg(F+a)*E,L=LW.cosDeg(o)*v,I=LW.sinDeg(F+a)*E,l=LW.sinDeg(o)*v;return U.a=h*W+p*I,U.c=h*L+p*l,U.b=g*W+f*I,void(U.d=g*L+f*l)}case Oo.OnlyTranslation:{const o=F+90+G;U.a=LW.cosDeg(F+a)*E,U.c=LW.cosDeg(o)*v,U.b=LW.sinDeg(F+a)*E,U.d=LW.sinDeg(o)*v;break}case Oo.NoRotationOrReflection:{let o=h*h+g*g,W=0;o>1e-4?(o=Math.abs(h*f-p*g)/o,p=g*o,f=h*o,W=Math.atan2(g,h)*LW.radDeg):(h=0,g=0,W=90-Math.atan2(f,p)*LW.radDeg);const L=F+a-W,I=F+G-W+90,l=LW.cosDeg(L)*E,A=LW.cosDeg(I)*v,k=LW.sinDeg(L)*E,Z=LW.sinDeg(I)*v;U.a=h*l-p*k,U.c=h*A-p*Z,U.b=g*l+f*k,U.d=g*A+f*Z;break}case Oo.NoScale:case Oo.NoScaleOrReflection:{const o=LW.cosDeg(F),W=LW.sinDeg(F);let L=(h*o+p*W)/I,A=(g*o+f*W)/l,k=Math.sqrt(L*L+A*A);k>1e-5&&(k=1/k),L*=k,A*=k,k=Math.sqrt(L*L+A*A),this.data.transformMode==Oo.NoScale&&h*f-p*g<0!=(kW?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(k=-k);const Z=Math.PI/2+Math.atan2(A,L),P=Math.cos(Z)*k,y=Math.sin(Z)*k,z=LW.cosDeg(a)*E,x=LW.cosDeg(90+G)*v,N=LW.sinDeg(a)*E,e=LW.sinDeg(90+G)*v;U.a=L*z+P*N,U.c=L*x+P*e,U.b=A*z+y*N,U.d=A*x+y*e;break}}U.a*=I,U.c*=I,U.b*=l,U.d*=l}setToSetupPose(){const o=this.data;this.x=o.x,this.y=o.y,this.rotation=o.rotation,this.scaleX=o.scaleX,this.scaleY=o.scaleY,this.shearX=o.shearX,this.shearY=o.shearY}getWorldRotationX(){return Math.atan2(this.matrix.b,this.matrix.a)*LW.radDeg}getWorldRotationY(){return Math.atan2(this.matrix.d,this.matrix.c)*LW.radDeg}getWorldScaleX(){const o=this.matrix;return Math.sqrt(o.a*o.a+o.c*o.c)}getWorldScaleY(){const o=this.matrix;return Math.sqrt(o.b*o.b+o.d*o.d)}updateAppliedTransform(){this.appliedValid=!0;const o=this.parent,W=this.matrix;if(null==o)return this.ax=W.tx,this.ay=W.ty,this.arotation=Math.atan2(W.b,W.a)*LW.radDeg,this.ascaleX=Math.sqrt(W.a*W.a+W.b*W.b),this.ascaleY=Math.sqrt(W.c*W.c+W.d*W.d),this.ashearX=0,void(this.ashearY=Math.atan2(W.a*W.c+W.b*W.d,W.a*W.d-W.b*W.c)*LW.radDeg);const F=o.matrix,E=1/(F.a*F.d-F.b*F.c),v=W.tx-F.tx,a=W.ty-F.ty;this.ax=v*F.d*E-a*F.c*E,this.ay=a*F.a*E-v*F.b*E;const G=E*F.d,L=E*F.a,U=E*F.c,I=E*F.b,l=G*W.a-U*W.b,h=G*W.c-U*W.d,p=L*W.b-I*W.a,g=L*W.d-I*W.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(l*l+p*p),this.ascaleX>1e-4){const o=l*g-h*p;this.ascaleY=o/this.ascaleX,this.ashearY=Math.atan2(l*h+p*g,o)*LW.radDeg,this.arotation=Math.atan2(p,l)*LW.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(h*h+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,h)*LW.radDeg}worldToLocal(o){const W=this.matrix,F=W.a,E=W.c,v=W.b,a=W.d,G=1/(F*a-E*v),L=o.x-W.tx,U=o.y-W.ty;return o.x=L*a*G-U*E*G,o.y=U*F*G-L*v*G,o}localToWorld(o){const W=this.matrix,F=o.x,E=o.y;return o.x=F*W.a+E*W.c+W.tx,o.y=F*W.b+E*W.d+W.ty,o}worldToLocalRotation(o){const W=LW.sinDeg(o),F=LW.cosDeg(o),E=this.matrix;return Math.atan2(E.a*W-E.b*F,E.d*F-E.c*W)*LW.radDeg}localToWorldRotation(o){const W=LW.sinDeg(o),F=LW.cosDeg(o),E=this.matrix;return Math.atan2(F*E.b+W*E.d,F*E.a+W*E.c)*LW.radDeg}rotateWorld(o){const W=this.matrix,F=W.a,E=W.c,v=W.b,a=W.d,G=LW.cosDeg(o),L=LW.sinDeg(o);W.a=G*F-L*v,W.c=G*E-L*a,W.b=L*F+G*v,W.d=L*E+G*a,this.appliedValid=!1}}class Iv{constructor(o,W,F){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Oo.Normal,o<0)throw new Error("index must be >= 0.");if(null==W)throw new Error("name cannot be null.");this.index=o,this.name=W,this.parent=F}}class lv{constructor(o,W){if(null==W)throw new Error("data cannot be null.");this.time=o,this.data=W}}class hv{constructor(o){this.name=o}}class pv{constructor(o,W){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,null==o)throw new Error("data cannot be null.");if(null==W)throw new Error("skeleton cannot be null.");this.data=o,this.mix=o.mix,this.bendDirection=o.bendDirection,this.compress=o.compress,this.stretch=o.stretch,this.bones=new Array;for(let F=0;F<o.bones.length;F++)this.bones.push(W.findBone(o.bones[F].name));this.target=W.findBone(o.target.name)}getOrder(){return this.data.order}apply(){this.update()}update(){const o=this.target,W=this.bones;switch(W.length){case 1:this.apply1(W[0],o.worldX,o.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(W[0],W[1],o.worldX,o.worldY,this.bendDirection,this.stretch,this.mix)}}apply1(o,W,F,E,v,a,G){o.appliedValid||o.updateAppliedTransform();const L=o.parent.matrix,U=1/(L.a*L.d-L.b*L.c),I=W-L.tx,l=F-L.ty,h=(I*L.d-l*L.c)*U-o.ax,p=(l*L.a-I*L.b)*U-o.ay;let g=Math.atan2(p,h)*LW.radDeg-o.ashearX-o.arotation;o.ascaleX<0&&(g+=180),g>180?g-=360:g<-180&&(g+=360);let f=o.ascaleX,A=o.ascaleY;if(E||v){const W=o.data.length*f,F=Math.sqrt(h*h+p*p);if(E&&F<W||v&&F>W&&W>1e-4){const o=(F/W-1)*G+1;f*=o,a&&(A*=o)}}o.updateWorldTransformWith(o.ax,o.ay,o.arotation+g*G,f,A,o.ashearX,o.ashearY)}apply2(o,W,F,E,v,a,G){if(0==G)return void W.updateWorldTransform();o.appliedValid||o.updateAppliedTransform(),W.appliedValid||W.updateAppliedTransform();const L=o.ax,U=o.ay;let I=o.ascaleX,l=I,h=o.ascaleY,p=W.ascaleX;const g=o.matrix;let f=0,A=0,k=0;I<0?(I=-I,f=180,k=-1):(f=0,k=1),h<0&&(h=-h,k=-k),p<0?(p=-p,A=180):A=0;const Z=W.ax;let P=0,y=0,z=0,x=g.a,N=g.c,e=g.b,t=g.d;const m=Math.abs(I-h)<=1e-4;m?(P=W.ay,y=x*Z+N*P+g.tx,z=e*Z+t*P+g.ty):(P=0,y=x*Z+g.tx,z=e*Z+g.ty);const r=o.parent.matrix;x=r.a,N=r.c,e=r.b,t=r.d;const B=1/(x*t-N*e);let j=F-r.tx,V=E-r.ty;const w=(j*t-V*N)*B-L,K=(V*x-j*e)*B-U,T=w*w+K*K;j=y-r.tx,V=z-r.ty;const d=(j*t-V*N)*B-L,n=(V*x-j*e)*B-U,u=Math.sqrt(d*d+n*n);let $=W.data.length*p,Y=0,Q=0;o:if(m){$*=I;let o=(T-u*u-$*$)/(2*u*$);o<-1?o=-1:o>1&&(o=1,a&&u+$>1e-4&&(l*=(Math.sqrt(T)/(u+$)-1)*G+1)),Q=Math.acos(o)*v,x=u+$*o,N=$*Math.sin(Q),Y=Math.atan2(K*x-w*N,w*x+K*N)}else{x=I*$,N=h*$;const o=x*x,W=N*N,F=Math.atan2(K,w);e=W*u*u+o*T-o*W;const E=-2*W*u,a=W-o;if(t=E*E-4*a*e,t>=0){let o=Math.sqrt(t);E<0&&(o=-o),o=-(E+o)/2;const W=o/a,G=e/o,L=Math.abs(W)<Math.abs(G)?W:G;if(L*L<=T){V=Math.sqrt(T-L*L)*v,Y=F-Math.atan2(V,L),Q=Math.atan2(V/h,(L-u)/I);break o}}let G=LW.PI,L=u-x,U=L*L,l=0,p=0,g=u+x,f=g*g,A=0;e=-x*u/(o-W),e>=-1&&e<=1&&(e=Math.acos(e),j=x*Math.cos(e)+u,V=N*Math.sin(e),t=j*j+V*V,t<U&&(G=e,U=t,L=j,l=V),t>f&&(p=e,f=t,g=j,A=V)),T<=(U+f)/2?(Y=F-Math.atan2(l*v,L),Q=G*v):(Y=F-Math.atan2(A*v,g),Q=p*v)}const C=Math.atan2(P,Z)*k;let q=o.arotation;Y=(Y-C)*LW.radDeg+f-q,Y>180?Y-=360:Y<-180&&(Y+=360),o.updateWorldTransformWith(L,U,q+Y*G,l,o.ascaleY,0,0),q=W.arotation,Q=((Q+C)*LW.radDeg-W.ashearX)*k+A-q,Q>180?Q-=360:Q<-180&&(Q+=360),W.updateWorldTransformWith(Z,P,q+Q*G,W.ascaleX,W.ascaleY,W.ashearX,W.ashearY)}}class gv{constructor(o){this.order=0,this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.name=o}}class fv{constructor(o){this.order=0,this.bones=new Array,this.name=o}}var Av=(o=>(o[o.Length=0]="Length",o[o.Fixed=1]="Fixed",o[o.Percent=2]="Percent",o))(Av||{});const kv=class{constructor(o,W){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==o)throw new Error("data cannot be null.");if(null==W)throw new Error("skeleton cannot be null.");this.data=o,this.bones=new Array;for(let F=0,E=o.bones.length;F<E;F++)this.bones.push(W.findBone(o.bones[F].name));this.target=W.findSlot(o.target.name),this.position=o.position,this.spacing=o.spacing,this.rotateMix=o.rotateMix,this.translateMix=o.translateMix}apply(){this.update()}update(){const o=this.target.getAttachment();if(!(o instanceof AE))return;const W=this.rotateMix,F=this.translateMix,E=W>0;if(!(F>0||E))return;const v=this.data,a=v.spacingMode,G=a==Av.Length,L=v.rotateMode,U=L==_o.Tangent,I=L==_o.ChainScale,l=this.bones.length,h=U?l:l+1,p=this.bones,g=pW.setArraySize(this.spaces,h);let f=null;const A=this.spacing;if(I||G){I&&(f=pW.setArraySize(this.lengths,l));for(let o=0,W=h-1;o<W;){const W=p[o],F=W.data.length;if(F<kv.epsilon)I&&(f[o]=0),g[++o]=0;else{const E=F*W.matrix.a,v=F*W.matrix.b,a=Math.sqrt(E*E+v*v);I&&(f[o]=a),g[++o]=(G?F+A:A)*a/F}}}else for(let o=1;o<h;o++)g[o]=A;const k=this.computeWorldPositions(o,h,U,v.positionMode==co.Percent,a==Av.Percent);let Z=k[0],P=k[1],y=v.offsetRotation,z=!1;if(0==y)z=L==_o.Chain;else{z=!1;const o=this.target.bone.matrix;y*=o.a*o.d-o.b*o.c>0?LW.degRad:-LW.degRad}for(let o=0,v=3;o<l;o++,v+=3){const a=p[o],G=a.matrix;G.tx+=(Z-G.tx)*F,G.ty+=(P-G.ty)*F;const L=k[v],l=k[v+1],h=L-Z,A=l-P;if(I){const F=f[o];if(0!=F){const o=(Math.sqrt(h*h+A*A)/F-1)*W+1;G.a*=o,G.b*=o}}if(Z=L,P=l,E){const F=G.a,E=G.c,L=G.b,I=G.d;let l=0,p=0,f=0;if(U&&(l=U?k[v-1]:0==g[o+1]?k[v+2]:Math.atan2(A,h)),l-=Math.atan2(L,F),z){p=Math.cos(l),f=Math.sin(l);const o=a.data.length;Z+=(o*(p*F-f*L)-h)*W,P+=(o*(f*F+p*L)-A)*W}else l+=y;l>LW.PI?l-=LW.PI2:l<-LW.PI&&(l+=LW.PI2),l*=W,p=Math.cos(l),f=Math.sin(l),G.a=p*F-f*L,G.c=p*E-f*I,G.b=f*F+p*L,G.d=f*E+p*I}a.appliedValid=!1}}computeWorldPositions(o,W,F,E,v){const a=this.target;let G=this.position;const L=this.spaces,U=pW.setArraySize(this.positions,3*W+2);let I=null;const l=o.closed;let h=o.worldVerticesLength,p=h/6,g=kv.NONE;if(!o.constantSpeed){const f=o.lengths;p-=l?1:2;const A=f[p];if(E&&(G*=A),v)for(let o=0;o<W;o++)L[o]*=A;I=pW.setArraySize(this.world,8);for(let E=0,v=0,k=0;E<W;E++,v+=3){const W=L[E];G+=W;let Z=G;if(l)Z%=A,Z<0&&(Z+=A),k=0;else{if(Z<0){g!=kv.BEFORE&&(g=kv.BEFORE,o.computeWorldVertices(a,2,4,I,0,2)),this.addBeforePosition(Z,I,0,U,v);continue}if(Z>A){g!=kv.AFTER&&(g=kv.AFTER,o.computeWorldVertices(a,h-6,4,I,0,2)),this.addAfterPosition(Z-A,I,0,U,v);continue}}for(;;k++){const o=f[k];if(!(Z>o)){if(0==k)Z/=o;else{const W=f[k-1];Z=(Z-W)/(o-W)}break}}k!=g&&(g=k,l&&k==p?(o.computeWorldVertices(a,h-4,4,I,0,2),o.computeWorldVertices(a,0,4,I,4,2)):o.computeWorldVertices(a,6*k+2,8,I,0,2)),this.addCurvePosition(Z,I[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],U,v,F||E>0&&0==W)}return U}l?(h+=2,I=pW.setArraySize(this.world,h),o.computeWorldVertices(a,2,h-4,I,0,2),o.computeWorldVertices(a,0,2,I,h-4,2),I[h-2]=I[0],I[h-1]=I[1]):(p--,h-=4,I=pW.setArraySize(this.world,h),o.computeWorldVertices(a,2,h,I,0,2));const f=pW.setArraySize(this.curves,p);let A=0,k=I[0],Z=I[1],P=0,y=0,z=0,x=0,N=0,e=0,t=0,m=0,r=0,B=0,j=0,V=0,w=0,K=0;for(let o=0,W=2;o<p;o++,W+=6)P=I[W],y=I[W+1],z=I[W+2],x=I[W+3],N=I[W+4],e=I[W+5],t=.1875*(k-2*P+z),m=.1875*(Z-2*y+x),r=.09375*(3*(P-z)-k+N),B=.09375*(3*(y-x)-Z+e),j=2*t+r,V=2*m+B,w=.75*(P-k)+t+.16666667*r,K=.75*(y-Z)+m+.16666667*B,A+=Math.sqrt(w*w+K*K),w+=j,K+=V,j+=r,V+=B,A+=Math.sqrt(w*w+K*K),w+=j,K+=V,A+=Math.sqrt(w*w+K*K),w+=j+r,K+=V+B,A+=Math.sqrt(w*w+K*K),f[o]=A,k=N,Z=e;if(E&&(G*=A),v)for(let o=0;o<W;o++)L[o]*=A;const T=this.segments;let d=0;for(let o=0,E=0,v=0,a=0;o<W;o++,E+=3){const W=L[o];G+=W;let p=G;if(l)p%=A,p<0&&(p+=A),v=0;else{if(p<0){this.addBeforePosition(p,I,0,U,E);continue}if(p>A){this.addAfterPosition(p-A,I,h-4,U,E);continue}}for(;;v++){const o=f[v];if(!(p>o)){if(0==v)p/=o;else{const W=f[v-1];p=(p-W)/(o-W)}break}}if(v!=g){g=v;let o=6*v;for(k=I[o],Z=I[o+1],P=I[o+2],y=I[o+3],z=I[o+4],x=I[o+5],N=I[o+6],e=I[o+7],t=.03*(k-2*P+z),m=.03*(Z-2*y+x),r=.006*(3*(P-z)-k+N),B=.006*(3*(y-x)-Z+e),j=2*t+r,V=2*m+B,w=.3*(P-k)+t+.16666667*r,K=.3*(y-Z)+m+.16666667*B,d=Math.sqrt(w*w+K*K),T[0]=d,o=1;o<8;o++)w+=j,K+=V,j+=r,V+=B,d+=Math.sqrt(w*w+K*K),T[o]=d;w+=j,K+=V,d+=Math.sqrt(w*w+K*K),T[8]=d,w+=j+r,K+=V+B,d+=Math.sqrt(w*w+K*K),T[9]=d,a=0}for(p*=d;;a++){const o=T[a];if(!(p>o)){if(0==a)p/=o;else{const W=T[a-1];p=a+(p-W)/(o-W)}break}}this.addCurvePosition(.1*p,k,Z,P,y,z,x,N,e,U,E,F||o>0&&0==W)}return U}addBeforePosition(o,W,F,E,v){const a=W[F],G=W[F+1],L=W[F+2]-a,U=W[F+3]-G,I=Math.atan2(U,L);E[v]=a+o*Math.cos(I),E[v+1]=G+o*Math.sin(I),E[v+2]=I}addAfterPosition(o,W,F,E,v){const a=W[F+2],G=W[F+3],L=a-W[F],U=G-W[F+1],I=Math.atan2(U,L);E[v]=a+o*Math.cos(I),E[v+1]=G+o*Math.sin(I),E[v+2]=I}addCurvePosition(o,W,F,E,v,a,G,L,U,I,l,h){(0==o||isNaN(o))&&(o=1e-4);const p=o*o,g=p*o,f=1-o,A=f*f,k=A*f,Z=f*o,P=3*Z,y=f*P,z=P*o,x=W*k+E*y+a*z+L*g,N=F*k+v*y+G*z+U*g;I[l]=x,I[l+1]=N,h&&(I[l+2]=Math.atan2(N-(F*A+v*Z*2+G*p),x-(W*A+E*Z*2+a*p)))}getOrder(){return this.data.order}};let Zv=kv;Zv.NONE=-1,Zv.BEFORE=-2,Zv.AFTER=-3,Zv.epsilon=1e-5;class Pv{constructor(o,W){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new fW,null==o)throw new Error("data cannot be null.");if(null==W)throw new Error("skeleton cannot be null.");this.data=o,this.rotateMix=o.rotateMix,this.translateMix=o.translateMix,this.scaleMix=o.scaleMix,this.shearMix=o.shearMix,this.bones=new Array;for(let F=0;F<o.bones.length;F++)this.bones.push(W.findBone(o.bones[F].name));this.target=W.findBone(o.target.name)}apply(){this.update()}update(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()}applyAbsoluteWorld(){const o=this.rotateMix,W=this.translateMix,F=this.scaleMix,E=this.shearMix,v=this.target,a=v.matrix,G=a.a,L=a.c,U=a.b,I=a.d,l=G*I-L*U>0?LW.degRad:-LW.degRad,h=this.data.offsetRotation*l,p=this.data.offsetShearY*l,g=this.bones;for(let a=0,l=g.length;a<l;a++){const l=g[a];let f=!1;const A=l.matrix;if(0!=o){const W=A.a,F=A.c,E=A.b,v=A.d;let a=Math.atan2(U,G)-Math.atan2(E,W)+h;a>LW.PI?a-=LW.PI2:a<-LW.PI&&(a+=LW.PI2),a*=o;const L=Math.cos(a),I=Math.sin(a);A.a=L*W-I*E,A.c=L*F-I*v,A.b=I*W+L*E,A.d=I*F+L*v,f=!0}if(0!=W){const o=this.temp;v.localToWorld(o.set(this.data.offsetX,this.data.offsetY)),A.tx+=(o.x-A.tx)*W,A.ty+=(o.y-A.ty)*W,f=!0}if(F>0){let o=Math.sqrt(A.a*A.a+A.b*A.b),W=Math.sqrt(G*G+U*U);o>1e-5&&(o=(o+(W-o+this.data.offsetScaleX)*F)/o),A.a*=o,A.b*=o,o=Math.sqrt(A.c*A.c+A.d*A.d),W=Math.sqrt(L*L+I*I),o>1e-5&&(o=(o+(W-o+this.data.offsetScaleY)*F)/o),A.c*=o,A.d*=o,f=!0}if(E>0){const o=A.c,W=A.d,F=Math.atan2(W,o);let v=Math.atan2(I,L)-Math.atan2(U,G)-(F-Math.atan2(A.b,A.a));v>LW.PI?v-=LW.PI2:v<-LW.PI&&(v+=LW.PI2),v=F+(v+p)*E;const a=Math.sqrt(o*o+W*W);A.c=Math.cos(v)*a,A.d=Math.sin(v)*a,f=!0}f&&(l.appliedValid=!1)}}applyRelativeWorld(){const o=this.rotateMix,W=this.translateMix,F=this.scaleMix,E=this.shearMix,v=this.target,a=v.matrix,G=a.a,L=a.c,U=a.b,I=a.d,l=G*I-L*U>0?LW.degRad:-LW.degRad,h=this.data.offsetRotation*l,p=this.data.offsetShearY*l,g=this.bones;for(let a=0,l=g.length;a<l;a++){const l=g[a];let f=!1;const A=l.matrix;if(0!=o){const W=A.a,F=A.c,E=A.b,v=A.d;let a=Math.atan2(U,G)+h;a>LW.PI?a-=LW.PI2:a<-LW.PI&&(a+=LW.PI2),a*=o;const L=Math.cos(a),I=Math.sin(a);A.a=L*W-I*E,A.c=L*F-I*v,A.b=I*W+L*E,A.d=I*F+L*v,f=!0}if(0!=W){const o=this.temp;v.localToWorld(o.set(this.data.offsetX,this.data.offsetY)),A.tx+=o.x*W,A.ty+=o.y*W,f=!0}if(F>0){let o=(Math.sqrt(G*G+U*U)-1+this.data.offsetScaleX)*F+1;A.a*=o,A.b*=o,o=(Math.sqrt(L*L+I*I)-1+this.data.offsetScaleY)*F+1,A.c*=o,A.d*=o,f=!0}if(E>0){let o=Math.atan2(I,L)-Math.atan2(U,G);o>LW.PI?o-=LW.PI2:o<-LW.PI&&(o+=LW.PI2);const W=A.c,F=A.d;o=Math.atan2(F,W)+(o-LW.PI/2+p)*E;const v=Math.sqrt(W*W+F*F);A.c=Math.cos(o)*v,A.d=Math.sin(o)*v,f=!0}f&&(l.appliedValid=!1)}}applyAbsoluteLocal(){const o=this.rotateMix,W=this.translateMix,F=this.scaleMix,E=this.shearMix,v=this.target;v.appliedValid||v.updateAppliedTransform();const a=this.bones;for(let G=0,L=a.length;G<L;G++){const L=a[G];L.appliedValid||L.updateAppliedTransform();let U=L.arotation;if(0!=o){let W=v.arotation-U+this.data.offsetRotation;W-=360*(16384-(16384.499999999996-W/360|0)),U+=W*o}let I=L.ax,l=L.ay;0!=W&&(I+=(v.ax-I+this.data.offsetX)*W,l+=(v.ay-l+this.data.offsetY)*W);let h=L.ascaleX,p=L.ascaleY;F>0&&(h>1e-5&&(h=(h+(v.ascaleX-h+this.data.offsetScaleX)*F)/h),p>1e-5&&(p=(p+(v.ascaleY-p+this.data.offsetScaleY)*F)/p));const g=L.ashearY;if(E>0){let o=v.ashearY-g+this.data.offsetShearY;o-=360*(16384-(16384.499999999996-o/360|0)),L.shearY+=o*E}L.updateWorldTransformWith(I,l,U,h,p,L.ashearX,g)}}applyRelativeLocal(){const o=this.rotateMix,W=this.translateMix,F=this.scaleMix,E=this.shearMix,v=this.target;v.appliedValid||v.updateAppliedTransform();const a=this.bones;for(let G=0,L=a.length;G<L;G++){const L=a[G];L.appliedValid||L.updateAppliedTransform();let U=L.arotation;0!=o&&(U+=(v.arotation+this.data.offsetRotation)*o);let I=L.ax,l=L.ay;0!=W&&(I+=(v.ax+this.data.offsetX)*W,l+=(v.ay+this.data.offsetY)*W);let h=L.ascaleX,p=L.ascaleY;F>0&&(h>1e-5&&(h*=(v.ascaleX-1+this.data.offsetScaleX)*F+1),p>1e-5&&(p*=(v.ascaleY-1+this.data.offsetScaleY)*F+1));let g=L.ashearY;E>0&&(g+=(v.ashearY+this.data.offsetShearY)*E),L.updateWorldTransformWith(I,l,U,h,p,L.ashearX,g)}}getOrder(){return this.data.order}}const yv=class{constructor(o){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==o)throw new Error("data cannot be null.");this.data=o,this.bones=new Array;for(let W=0;W<o.bones.length;W++){const F=o.bones[W];let E;if(null==F.parent)E=new Uv(F,this,null);else{const o=this.bones[F.parent.index];E=new Uv(F,this,o),o.children.push(E)}this.bones.push(E)}this.slots=new Array,this.drawOrder=new Array;for(let W=0;W<o.slots.length;W++){const F=o.slots[W],E=this.bones[F.boneData.index],v=new ZE(F,E);this.slots.push(v),this.drawOrder.push(v)}this.ikConstraints=new Array;for(let W=0;W<o.ikConstraints.length;W++){const F=o.ikConstraints[W];this.ikConstraints.push(new pv(F,this))}this.transformConstraints=new Array;for(let W=0;W<o.transformConstraints.length;W++){const F=o.transformConstraints[W];this.transformConstraints.push(new Pv(F,this))}this.pathConstraints=new Array;for(let W=0;W<o.pathConstraints.length;W++){const F=o.pathConstraints[W];this.pathConstraints.push(new Zv(F,this))}this.color=new aW(1,1,1,1),this.updateCache()}updateCache(){this._updateCache.length=0,this.updateCacheReset.length=0;const o=this.bones;for(let W=0,F=o.length;W<F;W++)o[W].sorted=!1;const W=this.ikConstraints,F=this.transformConstraints,E=this.pathConstraints,v=W.length,a=F.length,G=E.length,L=v+a+G;o:for(let o=0;o<L;o++){for(let F=0;F<v;F++){const E=W[F];if(E.data.order==o){this.sortIkConstraint(E);continue o}}for(let W=0;W<a;W++){const E=F[W];if(E.data.order==o){this.sortTransformConstraint(E);continue o}}for(let W=0;W<G;W++){const F=E[W];if(F.data.order==o){this.sortPathConstraint(F);continue o}}}for(let W=0,F=o.length;W<F;W++)this.sortBone(o[W])}sortIkConstraint(o){const W=o.target;this.sortBone(W);const F=o.bones,E=F[0];if(this.sortBone(E),F.length>1){const o=F[F.length-1];this._updateCache.indexOf(o)>-1||this.updateCacheReset.push(o)}this._updateCache.push(o),this.sortReset(E.children),F[F.length-1].sorted=!0}sortPathConstraint(o){const W=o.target,F=W.data.index,E=W.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,F,E),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,F,E);for(let o=0,W=this.data.skins.length;o<W;o++)this.sortPathConstraintAttachment(this.data.skins[o],F,E);const v=W.getAttachment();v instanceof AE&&this.sortPathConstraintAttachmentWith(v,E);const a=o.bones,G=a.length;for(let o=0;o<G;o++)this.sortBone(a[o]);this._updateCache.push(o);for(let o=0;o<G;o++)this.sortReset(a[o].children);for(let o=0;o<G;o++)a[o].sorted=!0}sortTransformConstraint(o){this.sortBone(o.target);const W=o.bones,F=W.length;if(o.data.local)for(let o=0;o<F;o++){const F=W[o];this.sortBone(F.parent),this._updateCache.indexOf(F)>-1||this.updateCacheReset.push(F)}else for(let o=0;o<F;o++)this.sortBone(W[o]);this._updateCache.push(o);for(let o=0;o<F;o++)this.sortReset(W[o].children);for(let o=0;o<F;o++)W[o].sorted=!0}sortPathConstraintAttachment(o,W,F){const E=o.attachments[W];if(E)for(const o in E)this.sortPathConstraintAttachmentWith(E[o],F)}sortPathConstraintAttachmentWith(o,W){if(!(o instanceof AE))return;const F=o.bones;if(null==F)this.sortBone(W);else{const o=this.bones;let W=0;for(;W<F.length;){const E=F[W++];for(let v=W+E;W<v;W++){const E=F[W];this.sortBone(o[E])}}}}sortBone(o){if(o.sorted)return;const W=o.parent;null!=W&&this.sortBone(W),o.sorted=!0,this._updateCache.push(o)}sortReset(o){for(let W=0,F=o.length;W<F;W++){const F=o[W];F.sorted&&this.sortReset(F.children),F.sorted=!1}}updateWorldTransform(){const o=this.updateCacheReset;for(let W=0,F=o.length;W<F;W++){const F=o[W];F.ax=F.x,F.ay=F.y,F.arotation=F.rotation,F.ascaleX=F.scaleX,F.ascaleY=F.scaleY,F.ashearX=F.shearX,F.ashearY=F.shearY,F.appliedValid=!0}const W=this._updateCache;for(let o=0,F=W.length;o<F;o++)W[o].update()}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){const o=this.bones;for(let W=0,F=o.length;W<F;W++)o[W].setToSetupPose();const W=this.ikConstraints;for(let o=0,F=W.length;o<F;o++){const F=W[o];F.bendDirection=F.data.bendDirection,F.mix=F.data.mix}const F=this.transformConstraints;for(let o=0,W=F.length;o<W;o++){const W=F[o],E=W.data;W.rotateMix=E.rotateMix,W.translateMix=E.translateMix,W.scaleMix=E.scaleMix,W.shearMix=E.shearMix}const E=this.pathConstraints;for(let o=0,W=E.length;o<W;o++){const W=E[o],F=W.data;W.position=F.position,W.spacing=F.spacing,W.rotateMix=F.rotateMix,W.translateMix=F.translateMix}}setSlotsToSetupPose(){const o=this.slots;pW.arrayCopy(o,0,this.drawOrder,0,o.length);for(let W=0,F=o.length;W<F;W++)o[W].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(o){if(null==o)throw new Error("boneName cannot be null.");const W=this.bones;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.data.name==o)return E}return null}findBoneIndex(o){if(null==o)throw new Error("boneName cannot be null.");const W=this.bones;for(let F=0,E=W.length;F<E;F++)if(W[F].data.name==o)return F;return-1}findSlot(o){if(null==o)throw new Error("slotName cannot be null.");const W=this.slots;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.data.name==o)return E}return null}findSlotIndex(o){if(null==o)throw new Error("slotName cannot be null.");const W=this.slots;for(let F=0,E=W.length;F<E;F++)if(W[F].data.name==o)return F;return-1}setSkinByName(o){const W=this.data.findSkin(o);if(null==W)throw new Error(`Skin not found: ${o}`);this.setSkin(W)}setSkin(o){if(null!=o)if(null!=this.skin)o.attachAll(this,this.skin);else{const W=this.slots;for(let F=0,E=W.length;F<E;F++){const E=W[F],v=E.data.attachmentName;if(null!=v){const W=o.getAttachment(F,v);null!=W&&E.setAttachment(W)}}}this.skin=o}getAttachmentByName(o,W){return this.getAttachment(this.data.findSlotIndex(o),W)}getAttachment(o,W){if(null==W)throw new Error("attachmentName cannot be null.");if(null!=this.skin){const F=this.skin.getAttachment(o,W);if(null!=F)return F}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(o,W):null}setAttachment(o,W){if(null==o)throw new Error("slotName cannot be null.");const F=this.slots;for(let E=0,v=F.length;E<v;E++){const v=F[E];if(v.data.name==o){let F=null;if(null!=W&&(F=this.getAttachment(E,W),null==F))throw new Error(`Attachment not found: ${W}, for slot: ${o}`);return void v.setAttachment(F)}}throw new Error(`Slot not found: ${o}`)}findIkConstraint(o){if(null==o)throw new Error("constraintName cannot be null.");const W=this.ikConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.data.name==o)return E}return null}findTransformConstraint(o){if(null==o)throw new Error("constraintName cannot be null.");const W=this.transformConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.data.name==o)return E}return null}findPathConstraint(o){if(null==o)throw new Error("constraintName cannot be null.");const W=this.pathConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.data.name==o)return E}return null}getBounds(o,W,F){if(null==o)throw new Error("offset cannot be null.");if(null==W)throw new Error("size cannot be null.");const E=this.drawOrder;let v=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,G=Number.NEGATIVE_INFINITY,L=Number.NEGATIVE_INFINITY;for(let o=0,W=E.length;o<W;o++){const W=E[o];let U=0,I=null;const l=W.getAttachment();if(l instanceof yE)U=8,I=pW.setArraySize(F,U,0),l.computeWorldVertices(W.bone,I,0,2);else if(l instanceof fE){const o=l;U=o.worldVerticesLength,I=pW.setArraySize(F,U,0),o.computeWorldVertices(W,0,U,I,0,2)}if(null!=I)for(let o=0,W=I.length;o<W;o+=2){const W=I[o],F=I[o+1];v=Math.min(v,W),a=Math.min(a,F),G=Math.max(G,W),L=Math.max(L,F)}}o.set(v,a),W.set(G-v,L-a)}update(o){this.time+=o}get flipX(){return-1==this.scaleX}set flipX(o){yv.deprecatedWarning1||(yv.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=o?1:-1}get flipY(){return-1==this.scaleY}set flipY(o){yv.deprecatedWarning1||(yv.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=o?1:-1}};let zv=yv;zv.deprecatedWarning1=!1;class xv extends AW{}class Nv{constructor(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}findBone(o){if(null==o)throw new Error("boneName cannot be null.");const W=this.bones;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findBoneIndex(o){if(null==o)throw new Error("boneName cannot be null.");const W=this.bones;for(let F=0,E=W.length;F<E;F++)if(W[F].name==o)return F;return-1}findSlot(o){if(null==o)throw new Error("slotName cannot be null.");const W=this.slots;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findSlotIndex(o){if(null==o)throw new Error("slotName cannot be null.");const W=this.slots;for(let F=0,E=W.length;F<E;F++)if(W[F].name==o)return F;return-1}findSkin(o){if(null==o)throw new Error("skinName cannot be null.");const W=this.skins;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findEvent(o){if(null==o)throw new Error("eventDataName cannot be null.");const W=this.events;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findAnimation(o){if(null==o)throw new Error("animationName cannot be null.");const W=this.animations;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findIkConstraint(o){if(null==o)throw new Error("constraintName cannot be null.");const W=this.ikConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findTransformConstraint(o){if(null==o)throw new Error("constraintName cannot be null.");const W=this.transformConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findPathConstraint(o){if(null==o)throw new Error("constraintName cannot be null.");const W=this.pathConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findPathConstraintIndex(o){if(null==o)throw new Error("pathConstraintName cannot be null.");const W=this.pathConstraints;for(let F=0,E=W.length;F<E;F++)if(W[F].name==o)return F;return-1}}class ev{constructor(o,W,F){if(this.color=new aW(1,1,1,1),o<0)throw new Error("index must be >= 0.");if(null==W)throw new Error("name cannot be null.");if(null==F)throw new Error("boneData cannot be null.");this.index=o,this.name=W,this.boneData=F}}class tv{constructor(o){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,null==o)throw new Error("name cannot be null.");this.name=o}}class mv{constructor(o){if(this.attachments=new Array,null==o)throw new Error("name cannot be null.");this.name=o}addAttachment(o,W,F){if(null==F)throw new Error("attachment cannot be null.");const E=this.attachments;o>=E.length&&(E.length=o+1),E[o]||(E[o]={}),E[o][W]=F}getAttachment(o,W){const F=this.attachments[o];return F?F[W]:null}attachAll(o,W){let F=0;for(let E=0;E<o.slots.length;E++){const v=o.slots[E],a=v.getAttachment();if(a&&F<W.attachments.length){const o=W.attachments[F];for(const W in o)if(a==o[W]){const o=this.getAttachment(F,W);null!=o&&v.setAttachment(o);break}}F++}}}class rv{constructor(o){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=o}readSkeletonData(o){const W=this.scale,F=new Nv,E="string"==typeof o?JSON.parse(o):o,v=E.skeleton;if(null!=v&&(F.hash=v.hash,F.version=v.spine,F.width=v.width,F.height=v.height,F.fps=v.fps,F.imagesPath=v.images),E.bones)for(let o=0;o<E.bones.length;o++){const v=E.bones[o];let a=null;const G=this.getValue(v,"parent",null);if(null!=G&&(a=F.findBone(G),null==a))throw new Error(`Parent bone not found: ${G}`);const L=new Iv(F.bones.length,v.name,a);L.length=this.getValue(v,"length",0)*W,L.x=this.getValue(v,"x",0)*W,L.y=this.getValue(v,"y",0)*W,L.rotation=this.getValue(v,"rotation",0),L.scaleX=this.getValue(v,"scaleX",1),L.scaleY=this.getValue(v,"scaleY",1),L.shearX=this.getValue(v,"shearX",0),L.shearY=this.getValue(v,"shearY",0),L.transformMode=rv.transformModeFromString(this.getValue(v,"transform","normal")),F.bones.push(L)}if(E.slots)for(let o=0;o<E.slots.length;o++){const W=E.slots[o],v=W.name,a=W.bone,G=F.findBone(a);if(null==G)throw new Error(`Slot bone not found: ${a}`);const L=new ev(F.slots.length,v,G),U=this.getValue(W,"color",null);null!=U&&L.color.setFromString(U);const I=this.getValue(W,"dark",null);null!=I&&(L.darkColor=new aW(1,1,1,1),L.darkColor.setFromString(I)),L.attachmentName=this.getValue(W,"attachment",null),L.blendMode=rv.blendModeFromString(this.getValue(W,"blend","normal")),F.slots.push(L)}if(E.ik)for(let o=0;o<E.ik.length;o++){const W=E.ik[o],v=new gv(W.name);v.order=this.getValue(W,"order",0);for(let o=0;o<W.bones.length;o++){const E=W.bones[o],a=F.findBone(E);if(null==a)throw new Error(`IK bone not found: ${E}`);v.bones.push(a)}const a=W.target;if(v.target=F.findBone(a),null==v.target)throw new Error(`IK target bone not found: ${a}`);v.bendDirection=this.getValue(W,"bendPositive",!0)?1:-1,v.mix=this.getValue(W,"mix",1),F.ikConstraints.push(v)}if(E.transform)for(let o=0;o<E.transform.length;o++){const v=E.transform[o],a=new tv(v.name);a.order=this.getValue(v,"order",0);for(let o=0;o<v.bones.length;o++){const W=v.bones[o],E=F.findBone(W);if(null==E)throw new Error(`Transform constraint bone not found: ${W}`);a.bones.push(E)}const G=v.target;if(a.target=F.findBone(G),null==a.target)throw new Error(`Transform constraint target bone not found: ${G}`);a.local=this.getValue(v,"local",!1),a.relative=this.getValue(v,"relative",!1),a.offsetRotation=this.getValue(v,"rotation",0),a.offsetX=this.getValue(v,"x",0)*W,a.offsetY=this.getValue(v,"y",0)*W,a.offsetScaleX=this.getValue(v,"scaleX",0),a.offsetScaleY=this.getValue(v,"scaleY",0),a.offsetShearY=this.getValue(v,"shearY",0),a.rotateMix=this.getValue(v,"rotateMix",1),a.translateMix=this.getValue(v,"translateMix",1),a.scaleMix=this.getValue(v,"scaleMix",1),a.shearMix=this.getValue(v,"shearMix",1),F.transformConstraints.push(a)}if(E.path)for(let o=0;o<E.path.length;o++){const v=E.path[o],a=new fv(v.name);a.order=this.getValue(v,"order",0);for(let o=0;o<v.bones.length;o++){const W=v.bones[o],E=F.findBone(W);if(null==E)throw new Error(`Transform constraint bone not found: ${W}`);a.bones.push(E)}const G=v.target;if(a.target=F.findSlot(G),null==a.target)throw new Error(`Path target slot not found: ${G}`);a.positionMode=rv.positionModeFromString(this.getValue(v,"positionMode","percent")),a.spacingMode=rv.spacingModeFromString(this.getValue(v,"spacingMode","length")),a.rotateMode=rv.rotateModeFromString(this.getValue(v,"rotateMode","tangent")),a.offsetRotation=this.getValue(v,"rotation",0),a.position=this.getValue(v,"position",0),a.positionMode==co.Fixed&&(a.position*=W),a.spacing=this.getValue(v,"spacing",0),a.spacingMode!=Av.Length&&a.spacingMode!=Av.Fixed||(a.spacing*=W),a.rotateMix=this.getValue(v,"rotateMix",1),a.translateMix=this.getValue(v,"translateMix",1),F.pathConstraints.push(a)}if(E.skins)for(const o in E.skins){const W=E.skins[o],v=new mv(o);for(const o in W){const E=F.findSlotIndex(o);if(-1==E)throw new Error(`Slot not found: ${o}`);const a=W[o];for(const o in a){const W=this.readAttachment(a[o],v,E,o,F);null!=W&&v.addAttachment(E,o,W)}}F.skins.push(v),"default"==v.name&&(F.defaultSkin=v)}for(let o=0,W=this.linkedMeshes.length;o<W;o++){const W=this.linkedMeshes[o],E=null==W.skin?F.defaultSkin:F.findSkin(W.skin);if(null==E)throw new Error(`Skin not found: ${W.skin}`);const v=E.getAttachment(W.slotIndex,W.parent);if(null==v)throw new Error(`Parent mesh not found: ${W.parent}`);W.mesh.setParentMesh(v)}if(this.linkedMeshes.length=0,E.events)for(const o in E.events){const W=E.events[o],v=new hv(o);v.intValue=this.getValue(W,"int",0),v.floatValue=this.getValue(W,"float",0),v.stringValue=this.getValue(W,"string",""),v.audioPath=this.getValue(W,"audio",null),null!=v.audioPath&&(v.volume=this.getValue(W,"volume",1),v.balance=this.getValue(W,"balance",0)),F.events.push(v)}if(E.animations)for(const o in E.animations){const W=E.animations[o];this.readAnimation(W,o,F)}return F}readAttachment(o,W,F,E,v){const a=this.scale;switch(E=this.getValue(o,"name",E),this.getValue(o,"type","region")){case"region":{const F=this.getValue(o,"path",E),v=this.attachmentLoader.newRegionAttachment(W,E,F);if(null==v)return null;v.path=F,v.x=this.getValue(o,"x",0)*a,v.y=this.getValue(o,"y",0)*a,v.scaleX=this.getValue(o,"scaleX",1),v.scaleY=this.getValue(o,"scaleY",1),v.rotation=this.getValue(o,"rotation",0),v.width=o.width*a,v.height=o.height*a;const G=this.getValue(o,"color",null);return null!=G&&v.color.setFromString(G),v}case"boundingbox":{const F=this.attachmentLoader.newBoundingBoxAttachment(W,E);if(null==F)return null;this.readVertices(o,F,o.vertexCount<<1);const v=this.getValue(o,"color",null);return null!=v&&F.color.setFromString(v),F}case"mesh":case"linkedmesh":{const v=this.getValue(o,"path",E),a=this.attachmentLoader.newMeshAttachment(W,E,v);if(null==a)return null;a.path=v;const G=this.getValue(o,"color",null);null!=G&&a.color.setFromString(G);const L=this.getValue(o,"parent",null);if(null!=L)return a.inheritDeform=this.getValue(o,"deform",!0),this.linkedMeshes.push(new Bv(a,this.getValue(o,"skin",null),F,L)),a;const U=o.uvs;return this.readVertices(o,a,U.length),a.triangles=o.triangles,a.regionUVs=new Float32Array(U),a.hullLength=2*this.getValue(o,"hull",0),a}case"path":{const F=this.attachmentLoader.newPathAttachment(W,E);if(null==F)return null;F.closed=this.getValue(o,"closed",!1),F.constantSpeed=this.getValue(o,"constantSpeed",!0);const v=o.vertexCount;this.readVertices(o,F,v<<1);const G=pW.newArray(v/3,0);for(let W=0;W<o.lengths.length;W++)G[W]=o.lengths[W]*a;F.lengths=G;const L=this.getValue(o,"color",null);return null!=L&&F.color.setFromString(L),F}case"point":{const F=this.attachmentLoader.newPointAttachment(W,E);if(null==F)return null;F.x=this.getValue(o,"x",0)*a,F.y=this.getValue(o,"y",0)*a,F.rotation=this.getValue(o,"rotation",0);const v=this.getValue(o,"color",null);return null!=v&&F.color.setFromString(v),F}case"clipping":{const F=this.attachmentLoader.newClippingAttachment(W,E);if(null==F)return null;const a=this.getValue(o,"end",null);if(null!=a){const o=v.findSlot(a);if(null==o)throw new Error(`Clipping end slot not found: ${a}`);F.endSlot=o}const G=o.vertexCount;this.readVertices(o,F,G<<1);const L=this.getValue(o,"color",null);return null!=L&&F.color.setFromString(L),F}}return null}readVertices(o,W,F){const E=this.scale;W.worldVerticesLength=F;const v=o.vertices;if(F==v.length){const o=pW.toFloatArray(v);if(1!=E)for(let W=0,F=v.length;W<F;W++)o[W]*=E;return void(W.vertices=o)}const a=new Array,G=new Array;for(let o=0,W=v.length;o<W;){const W=v[o++];G.push(W);for(let F=o+4*W;o<F;o+=4)G.push(v[o]),a.push(v[o+1]*E),a.push(v[o+2]*E),a.push(v[o+3])}W.bones=G,W.vertices=pW.toFloatArray(a)}readAnimation(o,W,F){const E=this.scale,v=new Array;let a=0;if(o.slots)for(const W in o.slots){const E=o.slots[W],G=F.findSlotIndex(W);if(-1==G)throw new Error(`Slot not found: ${W}`);for(const o in E){const F=E[o];if("attachment"==o){const o=new YE(F.length);o.slotIndex=G;let W=0;for(let E=0;E<F.length;E++){const v=F[E];o.setFrame(W++,v.time,v.name)}v.push(o),a=Math.max(a,o.frames[o.getFrameCount()-1])}else if("color"==o){const o=new nE(F.length);o.slotIndex=G;let W=0;for(let E=0;E<F.length;E++){const v=F[E],a=new aW;a.setFromString(v.color||"ffffffff"),o.setFrame(W,v.time,a.r,a.g,a.b,a.a),this.readCurve(v,o,W),W++}v.push(o),a=Math.max(a,o.frames[(o.getFrameCount()-1)*nE.ENTRIES])}else{if("twoColor"!=o)throw new Error(`Invalid timeline type for a slot: ${o} (${W})`);{const o=new $E(F.length);o.slotIndex=G;let W=0;for(let E=0;E<F.length;E++){const v=F[E],a=new aW,G=new aW;a.setFromString(v.light),G.setFromString(v.dark),o.setFrame(W,v.time,a.r,a.g,a.b,a.a,G.r,G.g,G.b),this.readCurve(v,o,W),W++}v.push(o),a=Math.max(a,o.frames[(o.getFrameCount()-1)*$E.ENTRIES])}}}}if(o.bones)for(const W in o.bones){const G=o.bones[W],L=F.findBoneIndex(W);if(-1==L)throw new Error(`Bone not found: ${W}`);for(const o in G){const F=G[o];if("rotate"===o){const o=new jE(F.length);o.boneIndex=L;let W=0;for(let E=0;E<F.length;E++){const v=F[E];o.setFrame(W,v.time,v.angle),this.readCurve(v,o,W),W++}v.push(o),a=Math.max(a,o.frames[(o.getFrameCount()-1)*jE.ENTRIES])}else{if("translate"!==o&&"scale"!==o&&"shear"!==o)throw new Error(`Invalid timeline type for a bone: ${o} (${W})`);{let W=null,G=1;"scale"===o?W=new KE(F.length):"shear"===o?W=new TE(F.length):(W=new wE(F.length),G=E),W.boneIndex=L;let U=0;for(let o=0;o<F.length;o++){const E=F[o],v=this.getValue(E,"x",0),a=this.getValue(E,"y",0);W.setFrame(U,E.time,v*G,a*G),this.readCurve(E,W,U),U++}v.push(W),a=Math.max(a,W.frames[(W.getFrameCount()-1)*wE.ENTRIES])}}}}if(o.ik)for(const W in o.ik){const E=o.ik[W],G=F.findIkConstraint(W),L=new OE(E.length);L.ikConstraintIndex=F.ikConstraints.indexOf(G);let U=0;for(let o=0;o<E.length;o++){const W=E[o];L.setFrame(U,W.time,this.getValue(W,"mix",1),this.getValue(W,"bendPositive",!0)?1:-1,this.getValue(W,"compress",!1),this.getValue(W,"stretch",!1)),this.readCurve(W,L,U),U++}v.push(L),a=Math.max(a,L.frames[(L.getFrameCount()-1)*OE.ENTRIES])}if(o.transform)for(const W in o.transform){const E=o.transform[W],G=F.findTransformConstraint(W),L=new SE(E.length);L.transformConstraintIndex=F.transformConstraints.indexOf(G);let U=0;for(let o=0;o<E.length;o++){const W=E[o];L.setFrame(U,W.time,this.getValue(W,"rotateMix",1),this.getValue(W,"translateMix",1),this.getValue(W,"scaleMix",1),this.getValue(W,"shearMix",1)),this.readCurve(W,L,U),U++}v.push(L),a=Math.max(a,L.frames[(L.getFrameCount()-1)*SE.ENTRIES])}if(o.paths)for(const W in o.paths){const G=o.paths[W],L=F.findPathConstraintIndex(W);if(-1==L)throw new Error(`Path constraint not found: ${W}`);const U=F.pathConstraints[L];for(const o in G){const W=G[o];if("position"===o||"spacing"===o){let F=null,G=1;"spacing"===o?(F=new RE(W.length),U.spacingMode!=Av.Length&&U.spacingMode!=Av.Fixed||(G=E)):(F=new iE(W.length),U.positionMode==co.Fixed&&(G=E)),F.pathConstraintIndex=L;let I=0;for(let E=0;E<W.length;E++){const v=W[E];F.setFrame(I,v.time,this.getValue(v,o,0)*G),this.readCurve(v,F,I),I++}v.push(F),a=Math.max(a,F.frames[(F.getFrameCount()-1)*iE.ENTRIES])}else if("mix"===o){const o=new DE(W.length);o.pathConstraintIndex=L;let F=0;for(let E=0;E<W.length;E++){const v=W[E];o.setFrame(F,v.time,this.getValue(v,"rotateMix",1),this.getValue(v,"translateMix",1)),this.readCurve(v,o,F),F++}v.push(o),a=Math.max(a,o.frames[(o.getFrameCount()-1)*DE.ENTRIES])}}}if(o.deform)for(const W in o.deform){const G=o.deform[W],L=F.findSkin(W);if(null!=L)for(const o in G){const W=G[o],U=F.findSlotIndex(o);if(-1==U)throw new Error(`Slot not found: ${W.name}`);for(const o in W){const F=W[o],G=L.getAttachment(U,o);if(null==G)throw new Error(`Deform attachment not found: ${F.name}`);const I=null!=G.bones,l=G.vertices,h=I?l.length/3*2:l.length,p=new CE(F.length);p.slotIndex=U,p.attachment=G;let g=0;for(let o=0;o<F.length;o++){const W=F[o];let v;const a=this.getValue(W,"vertices",null);if(null==a)v=I?pW.newFloatArray(h):l;else{v=pW.newFloatArray(h);const o=this.getValue(W,"offset",0);if(pW.arrayCopy(a,0,v,o,a.length),1!=E)for(let W=o,F=W+a.length;W<F;W++)v[W]*=E;if(!I)for(let o=0;o<h;o++)v[o]+=l[o]}p.setFrame(g,W.time,v),this.readCurve(W,p,g),g++}v.push(p),a=Math.max(a,p.frames[p.getFrameCount()-1])}}else if(ZW)throw new Error(`Skin not found: ${W}`)}let G=o.drawOrder;if(null==G&&(G=o.draworder),null!=G){const o=new cE(G.length),W=F.slots.length;let E=0;for(let v=0;v<G.length;v++){const a=G[v];let L=null;const U=this.getValue(a,"offsets",null);if(null!=U){L=pW.newArray(W,-1);const o=pW.newArray(W-U.length,0);let E=0,v=0;for(let W=0;W<U.length;W++){const a=U[W],G=F.findSlotIndex(a.slot);if(-1==G)throw new Error(`Slot not found: ${a.slot}`);for(;E!=G;)o[v++]=E++;L[E+a.offset]=E++}for(;E<W;)o[v++]=E++;for(let F=W-1;F>=0;F--)-1==L[F]&&(L[F]=o[--v])}o.setFrame(E++,a.time,L)}v.push(o),a=Math.max(a,o.frames[o.getFrameCount()-1])}if(o.events){const W=new qE(o.events.length);let E=0;for(let v=0;v<o.events.length;v++){const a=o.events[v],G=F.findEvent(a.name);if(null==G)throw new Error(`Event not found: ${a.name}`);const L=new lv(pW.toSinglePrecision(a.time),G);L.intValue=this.getValue(a,"int",G.intValue),L.floatValue=this.getValue(a,"float",G.floatValue),L.stringValue=this.getValue(a,"string",G.stringValue),null!=L.data.audioPath&&(L.volume=this.getValue(a,"volume",1),L.balance=this.getValue(a,"balance",0)),W.setFrame(E++,L)}v.push(W),a=Math.max(a,W.frames[W.getFrameCount()-1])}if(isNaN(a))throw new Error("Error while parsing animation, duration is NaN");F.animations.push(new eE(W,v,a))}readCurve(o,W,F){if(o.curve)if("stepped"===o.curve)W.setStepped(F);else if("[object Array]"===Object.prototype.toString.call(o.curve)){const E=o.curve;W.setCurve(F,E[0],E[1],E[2],E[3])}}getValue(o,W,F){return void 0!==o[W]?o[W]:F}static blendModeFromString(o){if("normal"==(o=o.toLowerCase()))return Xo.B9.NORMAL;if("additive"==o)return Xo.B9.ADD;if("multiply"==o)return Xo.B9.MULTIPLY;if("screen"==o)return Xo.B9.SCREEN;throw new Error(`Unknown blend mode: ${o}`)}static positionModeFromString(o){if("fixed"==(o=o.toLowerCase()))return co.Fixed;if("percent"==o)return co.Percent;throw new Error(`Unknown position mode: ${o}`)}static spacingModeFromString(o){if("length"==(o=o.toLowerCase()))return Av.Length;if("fixed"==o)return Av.Fixed;if("percent"==o)return Av.Percent;throw new Error(`Unknown position mode: ${o}`)}static rotateModeFromString(o){if("tangent"==(o=o.toLowerCase()))return _o.Tangent;if("chain"==o)return _o.Chain;if("chainscale"==o)return _o.ChainScale;throw new Error(`Unknown rotate mode: ${o}`)}static transformModeFromString(o){if("normal"==(o=o.toLowerCase()))return Oo.Normal;if("onlytranslation"==o)return Oo.OnlyTranslation;if("norotationorreflection"==o)return Oo.NoRotationOrReflection;if("noscale"==o)return Oo.NoScale;if("noscaleorreflection"==o)return Oo.NoScaleOrReflection;throw new Error(`Unknown transform mode: ${o}`)}}class Bv{constructor(o,W,F,E){this.mesh=o,this.skin=W,this.slotIndex=F,this.parent=E}}class jv extends jW{createSkeleton(o){this.skeleton=new zv(o),this.skeleton.updateWorldTransform(),this.stateData=new Gv(o),this.state=new HE(this.stateData)}}class Vv{constructor(o){if(!o)throw new Error("name cannot be null.");this.name=o}}const wv=class extends Vv{constructor(o){super(o),this.id=wv.nextID++,this.bones=null,this.vertices=[],this.worldVerticesLength=0,this.timelineAttachment=this}computeWorldVerticesOld(o,W){this.computeWorldVertices(o,0,this.worldVerticesLength,W,0,2)}computeWorldVertices(o,W,F,E,v,a){F=v+(F>>1)*a;const G=o.bone.skeleton,L=o.deform;let U=this.vertices;const I=this.bones;if(!I){L.length>0&&(U=L);const G=o.bone.matrix,I=G.tx,l=G.ty,h=G.a,p=G.c,g=G.b,f=G.d;for(let o=W,G=v;G<F;o+=2,G+=a){const W=U[o],F=U[o+1];E[G]=W*h+F*p+I,E[G+1]=W*g+F*f+l}return}let l=0,h=0;for(let o=0;o<W;o+=2){const o=I[l];l+=o+1,h+=o}const p=G.bones;if(0==L.length)for(let o=v,W=3*h;o<F;o+=a){let F=0,v=0,a=I[l++];for(a+=l;l<a;l++,W+=3){const o=p[I[l]].matrix,E=U[W],a=U[W+1],G=U[W+2];F+=(E*o.a+a*o.c+o.tx)*G,v+=(E*o.b+a*o.d+o.ty)*G}E[o]=F,E[o+1]=v}else{const o=L;for(let W=v,G=3*h,L=h<<1;W<F;W+=a){let F=0,v=0,a=I[l++];for(a+=l;l<a;l++,G+=3,L+=2){const W=p[I[l]].matrix,E=U[G]+o[L],a=U[G+1]+o[L+1],h=U[G+2];F+=(E*W.a+a*W.c+W.tx)*h,v+=(E*W.b+a*W.d+W.ty)*h}E[W]=F,E[W+1]=v}}}copyTo(o){this.bones?(o.bones=new Array(this.bones.length),pW.arrayCopy(this.bones,0,o.bones,0,this.bones.length)):o.bones=null,this.vertices&&(o.vertices=pW.newFloatArray(this.vertices.length),pW.arrayCopy(this.vertices,0,o.vertices,0,this.vertices.length)),o.worldVerticesLength=this.worldVerticesLength,o.timelineAttachment=this.timelineAttachment}};let Kv=wv;Kv.nextID=0;class Tv extends Kv{constructor(o){super(o),this.type=Ko.BoundingBox,this.color=new aW(1,1,1,1)}copy(){const o=new Tv(this.name);return this.copyTo(o),o.color.setFromColor(this.color),o}}class dv extends Kv{constructor(o){super(o),this.type=Ko.Clipping,this.endSlot=null,this.color=new aW(.2275,.2275,.8078,1)}copy(){const o=new dv(this.name);return this.copyTo(o),o.endSlot=this.endSlot,o.color.setFromColor(this.color),o}}class nv extends Kv{constructor(o,W){super(o),this.type=Ko.Mesh,this.region=null,this.triangles=[],this.color=new aW(1,1,1,1),this.width=0,this.height=0,this.hullLength=0,this.edges=[],this.parentMesh=null,this.sequence=null,this.tempColor=new aW(0,0,0,0),this.path=W}getParentMesh(){return this.parentMesh}setParentMesh(o){this.parentMesh=o,o&&(this.bones=o.bones,this.vertices=o.vertices,this.worldVerticesLength=o.worldVerticesLength,this.regionUVs=o.regionUVs,this.triangles=o.triangles,this.hullLength=o.hullLength,this.worldVerticesLength=o.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();const o=new nv(this.name,this.path);return o.region=this.region,o.color.setFromColor(this.color),this.copyTo(o),o.regionUVs=new Float32Array(this.regionUVs.length),pW.arrayCopy(this.regionUVs,0,o.regionUVs,0,this.regionUVs.length),o.triangles=new Array(this.triangles.length),pW.arrayCopy(this.triangles,0,o.triangles,0,this.triangles.length),o.hullLength=this.hullLength,o.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(o.edges=new Array(this.edges.length),pW.arrayCopy(this.edges,0,o.edges,0,this.edges.length)),o.width=this.width,o.height=this.height,o}computeWorldVertices(o,W,F,E,v,a){null!=this.sequence&&this.sequence.apply(o,this),super.computeWorldVertices(o,W,F,E,v,a)}newLinkedMesh(){const o=new nv(this.name,this.path);return o.region=this.region,o.color.setFromColor(this.color),o.timelineAttachment=this.timelineAttachment,o.setParentMesh(this.parentMesh?this.parentMesh:this),o}}class uv extends Kv{constructor(o){super(o),this.type=Ko.Path,this.lengths=[],this.closed=!1,this.constantSpeed=!1,this.color=new aW(1,1,1,1)}copy(){const o=new uv(this.name);return this.copyTo(o),o.lengths=new Array(this.lengths.length),pW.arrayCopy(this.lengths,0,o.lengths,0,this.lengths.length),o.closed=closed,o.constantSpeed=this.constantSpeed,o.color.setFromColor(this.color),o}}class $v extends Kv{constructor(o){super(o),this.type=Ko.Point,this.x=0,this.y=0,this.rotation=0,this.color=new aW(.38,.94,0,1)}computeWorldPosition(o,W){const F=o.matrix;return W.x=this.x*F.a+this.y*F.c+o.worldX,W.y=this.x*F.b+this.y*F.d+o.worldY,W}computeWorldRotation(o){const W=o.matrix,F=LW.cosDeg(this.rotation),E=LW.sinDeg(this.rotation),v=F*W.a+E*W.c,a=F*W.b+E*W.d;return Math.atan2(a,v)*LW.radDeg}copy(){const o=new $v(this.name);return o.x=this.x,o.y=this.y,o.rotation=this.rotation,o.color.setFromColor(this.color),o}}const Yv=class extends Vv{constructor(o,W){super(o),this.type=Ko.Region,this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new aW(1,1,1,1),this.rendererObject=null,this.region=null,this.sequence=null,this.offset=pW.newFloatArray(8),this.uvs=pW.newFloatArray(8),this.tempColor=new aW(1,1,1,1),this.path=W}updateRegion(){if(!this.region)throw new Error("Region not set.");const o=this.region,W=this.width/this.region.originalWidth*this.scaleX,F=this.height/this.region.originalHeight*this.scaleY,E=-this.width/2*this.scaleX+this.region.offsetX*W,v=-this.height/2*this.scaleY+this.region.offsetY*F,a=E+this.region.width*W,G=v+this.region.height*F,L=this.rotation*Math.PI/180,U=Math.cos(L),I=Math.sin(L),l=this.x,h=this.y,p=E*U+l,g=E*I,f=v*U+h,A=v*I,k=a*U+l,Z=a*I,P=G*U+h,y=G*I,z=this.offset;z[0]=p-A,z[1]=f+g,z[2]=p-y,z[3]=P+g,z[4]=k-y,z[5]=P+Z,z[6]=k-A,z[7]=f+Z;const x=this.uvs;90==o.degrees?(x[2]=o.u,x[3]=o.v2,x[4]=o.u,x[5]=o.v,x[6]=o.u2,x[7]=o.v,x[0]=o.u2,x[1]=o.v2):(x[0]=o.u,x[1]=o.v2,x[2]=o.u,x[3]=o.v,x[4]=o.u2,x[5]=o.v,x[6]=o.u2,x[7]=o.v2)}computeWorldVertices(o,W,F,E){null!=this.sequence&&this.sequence.apply(o,this);const v=o.bone,a=this.offset,G=v.matrix,L=G.tx,U=G.ty,I=G.a,l=G.c,h=G.b,p=G.d;let g=0,f=0;g=a[0],f=a[1],W[F]=g*I+f*l+L,W[F+1]=g*h+f*p+U,F+=E,g=a[2],f=a[3],W[F]=g*I+f*l+L,W[F+1]=g*h+f*p+U,F+=E,g=a[4],f=a[5],W[F]=g*I+f*l+L,W[F+1]=g*h+f*p+U,F+=E,g=a[6],f=a[7],W[F]=g*I+f*l+L,W[F+1]=g*h+f*p+U}copy(){const o=new Yv(this.name,this.path);return o.region=this.region,o.rendererObject=this.rendererObject,o.x=this.x,o.y=this.y,o.scaleX=this.scaleX,o.scaleY=this.scaleY,o.rotation=this.rotation,o.width=this.width,o.height=this.height,pW.arrayCopy(this.uvs,0,o.uvs,0,8),pW.arrayCopy(this.offset,0,o.offset,0,8),o.color.setFromColor(this.color),o.sequence=null!=this.sequence?this.sequence.copy():null,o}};let Qv=Yv;Qv.X1=0,Qv.Y1=1,Qv.C1R=2,Qv.C1G=3,Qv.C1B=4,Qv.C1A=5,Qv.U1=6,Qv.V1=7,Qv.X2=8,Qv.Y2=9,Qv.C2R=10,Qv.C2G=11,Qv.C2B=12,Qv.C2A=13,Qv.U2=14,Qv.V2=15,Qv.X3=16,Qv.Y3=17,Qv.C3R=18,Qv.C3G=19,Qv.C3B=20,Qv.C3A=21,Qv.U3=22,Qv.V3=23,Qv.X4=24,Qv.Y4=25,Qv.C4R=26,Qv.C4G=27,Qv.C4B=28,Qv.C4A=29,Qv.U4=30,Qv.V4=31;const Cv=class{constructor(o){this.id=Cv.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(o)}copy(){const o=new Cv(this.regions.length);return pW.arrayCopy(this.regions,0,o.regions,0,this.regions.length),o.start=this.start,o.digits=this.digits,o.setupIndex=this.setupIndex,o}apply(o,W){let F=o.sequenceIndex;-1==F&&(F=this.setupIndex),F>=this.regions.length&&(F=this.regions.length-1);const E=this.regions[F];W.region!=E&&(W.region=E)}getPath(o,W){let F=o;const E=(this.start+W).toString();for(let o=this.digits-E.length;o>0;o--)F+="0";return F+=E,F}static nextID(){return Cv._nextID++}};let qv=Cv;qv._nextID=0;var cv,_v=((cv=_v||{})[cv.hold=0]="hold",cv[cv.once=1]="once",cv[cv.loop=2]="loop",cv[cv.pingpong=3]="pingpong",cv[cv.onceReverse=4]="onceReverse",cv[cv.loopReverse=5]="loopReverse",cv[cv.pingpongReverse=6]="pingpongReverse",cv);const Ov=[0,1,2,3,4,5,6];class Xv{constructor(o,W,F){if(this.timelines=[],this.timelineIds=new EW,!o)throw new Error("name cannot be null.");this.name=o,this.setTimelines(W),this.duration=F}setTimelines(o){if(!o)throw new Error("timelines cannot be null.");this.timelines=o,this.timelineIds.clear();for(let W=0;W<o.length;W++)this.timelineIds.addAll(o[W].getPropertyIds())}hasTimeline(o){for(let W=0;W<o.length;W++)if(this.timelineIds.contains(o[W]))return!0;return!1}apply(o,W,F,E,v,a,G,L){if(!o)throw new Error("skeleton cannot be null.");E&&0!=this.duration&&(F%=this.duration,W>0&&(W%=this.duration));const U=this.timelines;for(let E=0,I=U.length;E<I;E++)U[E].apply(o,W,F,v,a,G,L)}}const Sv=0,sv=1,iv=2,Rv=3,Jv=4,Dv=5,Mv=6,Hv=7,bv=8,oa=9,Wa=10,Fa=11,Ea=14,va=15,aa=16,Ga=17,La=18,Ua=19;class Ia{constructor(o,W){this.propertyIds=W,this.frames=pW.newFloatArray(o*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(o,W){const F=o.length;for(let E=1;E<F;E++)if(o[E]>W)return E-1;return F-1}static search(o,W,F){const E=o.length;for(let v=F;v<E;v+=F)if(o[v]>W)return v-F;return E-F}}class la extends Ia{constructor(o,W,F){super(o,F),this.curves=pW.newFloatArray(o+18*W),this.curves[o-1]=1}setLinear(o){this.curves[o]=0}setStepped(o){this.curves[o]=1}shrink(o){const W=this.getFrameCount()+18*o;if(this.curves.length>W){const o=pW.newFloatArray(W);pW.arrayCopy(this.curves,0,o,0,W),this.curves=o}}setBezier(o,W,F,E,v,a,G,L,U,I,l){const h=this.curves;let p=this.getFrameCount()+18*o;0==F&&(h[W]=2+p);const g=.03*(E-2*a+L),f=.03*(v-2*G+U),A=.006*(3*(a-L)-E+I),k=.006*(3*(G-U)-v+l);let Z=2*g+A,P=2*f+k,y=.3*(a-E)+g+.16666667*A,z=.3*(G-v)+f+.16666667*k,x=E+y,N=v+z;for(let o=p+18;p<o;p+=2)h[p]=x,h[p+1]=N,y+=Z,z+=P,Z+=A,P+=k,x+=y,N+=z}getBezierValue(o,W,F,E){const v=this.curves;if(v[E]>o){const a=this.frames[W],G=this.frames[W+F];return G+(o-a)/(v[E]-a)*(v[E+1]-G)}const a=E+18;for(E+=2;E<a;E+=2)if(v[E]>=o){const W=v[E-2],F=v[E-1];return F+(o-W)/(v[E]-W)*(v[E+1]-F)}W+=this.getFrameEntries();const G=v[a-2],L=v[a-1];return L+(o-G)/(this.frames[W]-G)*(this.frames[W+F]-L)}}class ha extends la{constructor(o,W,F){super(o,W,[F])}getFrameEntries(){return 2}setFrame(o,W,F){o<<=1,this.frames[o]=W,this.frames[o+1]=F}getCurveValue(o){const W=this.frames;let F=W.length-2;for(let E=2;E<=F;E+=2)if(W[E]>o){F=E-2;break}const E=this.curves[F>>1];switch(E){case 0:const E=W[F],v=W[F+1];return v+(o-E)/(W[F+2]-E)*(W[F+2+1]-v);case 1:return W[F+1]}return this.getBezierValue(o,F,1,E-2)}}class pa extends la{constructor(o,W,F,E){super(o,W,[F,E])}getFrameEntries(){return 3}setFrame(o,W,F,E){o*=3,this.frames[o]=W,this.frames[o+1]=F,this.frames[o+2]=E}}class ga extends ha{constructor(o,W,F){super(o,W,`${Sv}|${F}`),this.boneIndex=0,this.boneIndex=F}apply(o,W,F,E,v,a,G){const L=o.bones[this.boneIndex];if(!L.active)return;if(F<this.frames[0]){switch(a){case Co.setup:return void(L.rotation=L.data.rotation);case Co.first:L.rotation+=(L.data.rotation-L.rotation)*v}return}let U=this.getCurveValue(F);switch(a){case Co.setup:L.rotation=L.data.rotation+U*v;break;case Co.first:case Co.replace:U+=L.data.rotation-L.rotation;case Co.add:L.rotation+=U*v}}}class fa extends pa{constructor(o,W,F){super(o,W,`${sv}|${F}`,`${iv}|${F}`),this.boneIndex=0,this.boneIndex=F}apply(o,W,F,E,v,a,G){const L=o.bones[this.boneIndex];if(!L.active)return;const U=this.frames;if(F<U[0]){switch(a){case Co.setup:return L.x=L.data.x,void(L.y=L.data.y);case Co.first:L.x+=(L.data.x-L.x)*v,L.y+=(L.data.y-L.y)*v}return}let I=0,l=0;const h=Ia.search(U,F,3),p=this.curves[h/3];switch(p){case 0:const o=U[h];I=U[h+1],l=U[h+2];const W=(F-o)/(U[h+3]-o);I+=(U[h+3+1]-I)*W,l+=(U[h+3+2]-l)*W;break;case 1:I=U[h+1],l=U[h+2];break;default:I=this.getBezierValue(F,h,1,p-2),l=this.getBezierValue(F,h,2,p+18-2)}switch(a){case Co.setup:L.x=L.data.x+I*v,L.y=L.data.y+l*v;break;case Co.first:case Co.replace:L.x+=(L.data.x+I-L.x)*v,L.y+=(L.data.y+l-L.y)*v;break;case Co.add:L.x+=I*v,L.y+=l*v}}}class Aa extends ha{constructor(o,W,F){super(o,W,`${sv}|${F}`),this.boneIndex=0,this.boneIndex=F}apply(o,W,F,E,v,a,G){const L=o.bones[this.boneIndex];if(!L.active)return;if(F<this.frames[0]){switch(a){case Co.setup:return void(L.x=L.data.x);case Co.first:L.x+=(L.data.x-L.x)*v}return}const U=this.getCurveValue(F);switch(a){case Co.setup:L.x=L.data.x+U*v;break;case Co.first:case Co.replace:L.x+=(L.data.x+U-L.x)*v;break;case Co.add:L.x+=U*v}}}class ka extends ha{constructor(o,W,F){super(o,W,`${iv}|${F}`),this.boneIndex=0,this.boneIndex=F}apply(o,W,F,E,v,a,G){const L=o.bones[this.boneIndex];if(!L.active)return;if(F<this.frames[0]){switch(a){case Co.setup:return void(L.y=L.data.y);case Co.first:L.y+=(L.data.y-L.y)*v}return}const U=this.getCurveValue(F);switch(a){case Co.setup:L.y=L.data.y+U*v;break;case Co.first:case Co.replace:L.y+=(L.data.y+U-L.y)*v;break;case Co.add:L.y+=U*v}}}class Za extends pa{constructor(o,W,F){super(o,W,`${Rv}|${F}`,`${Jv}|${F}`),this.boneIndex=0,this.boneIndex=F}apply(o,W,F,E,v,a,G){const L=o.bones[this.boneIndex];if(!L.active)return;const U=this.frames;if(F<U[0]){switch(a){case Co.setup:return L.scaleX=L.data.scaleX,void(L.scaleY=L.data.scaleY);case Co.first:L.scaleX+=(L.data.scaleX-L.scaleX)*v,L.scaleY+=(L.data.scaleY-L.scaleY)*v}return}let I,l;const h=Ia.search(U,F,3),p=this.curves[h/3];switch(p){case 0:const o=U[h];I=U[h+1],l=U[h+2];const W=(F-o)/(U[h+3]-o);I+=(U[h+3+1]-I)*W,l+=(U[h+3+2]-l)*W;break;case 1:I=U[h+1],l=U[h+2];break;default:I=this.getBezierValue(F,h,1,p-2),l=this.getBezierValue(F,h,2,p+18-2)}if(I*=L.data.scaleX,l*=L.data.scaleY,1==v)a==Co.add?(L.scaleX+=I-L.data.scaleX,L.scaleY+=l-L.data.scaleY):(L.scaleX=I,L.scaleY=l);else{let o=0,W=0;if(G==qo.mixOut)switch(a){case Co.setup:o=L.data.scaleX,W=L.data.scaleY,L.scaleX=o+(Math.abs(I)*LW.signum(o)-o)*v,L.scaleY=W+(Math.abs(l)*LW.signum(W)-W)*v;break;case Co.first:case Co.replace:o=L.scaleX,W=L.scaleY,L.scaleX=o+(Math.abs(I)*LW.signum(o)-o)*v,L.scaleY=W+(Math.abs(l)*LW.signum(W)-W)*v;break;case Co.add:L.scaleX+=(I-L.data.scaleX)*v,L.scaleY+=(l-L.data.scaleY)*v}else switch(a){case Co.setup:o=Math.abs(L.data.scaleX)*LW.signum(I),W=Math.abs(L.data.scaleY)*LW.signum(l),L.scaleX=o+(I-o)*v,L.scaleY=W+(l-W)*v;break;case Co.first:case Co.replace:o=Math.abs(L.scaleX)*LW.signum(I),W=Math.abs(L.scaleY)*LW.signum(l),L.scaleX=o+(I-o)*v,L.scaleY=W+(l-W)*v;break;case Co.add:L.scaleX+=(I-L.data.scaleX)*v,L.scaleY+=(l-L.data.scaleY)*v}}}}class Pa extends ha{constructor(o,W,F){super(o,W,`${Rv}|${F}`),this.boneIndex=0,this.boneIndex=F}apply(o,W,F,E,v,a,G){const L=o.bones[this.boneIndex];if(!L.active)return;if(F<this.frames[0]){switch(a){case Co.setup:return void(L.scaleX=L.data.scaleX);case Co.first:L.scaleX+=(L.data.scaleX-L.scaleX)*v}return}const U=this.getCurveValue(F)*L.data.scaleX;if(1==v)a==Co.add?L.scaleX+=U-L.data.scaleX:L.scaleX=U;else{let o=0;if(G==qo.mixOut)switch(a){case Co.setup:o=L.data.scaleX,L.scaleX=o+(Math.abs(U)*LW.signum(o)-o)*v;break;case Co.first:case Co.replace:o=L.scaleX,L.scaleX=o+(Math.abs(U)*LW.signum(o)-o)*v;break;case Co.add:L.scaleX+=(U-L.data.scaleX)*v}else switch(a){case Co.setup:o=Math.abs(L.data.scaleX)*LW.signum(U),L.scaleX=o+(U-o)*v;break;case Co.first:case Co.replace:o=Math.abs(L.scaleX)*LW.signum(U),L.scaleX=o+(U-o)*v;break;case Co.add:L.scaleX+=(U-L.data.scaleX)*v}}}}class ya extends ha{constructor(o,W,F){super(o,W,`${Jv}|${F}`),this.boneIndex=0,this.boneIndex=F}apply(o,W,F,E,v,a,G){const L=o.bones[this.boneIndex];if(!L.active)return;if(F<this.frames[0]){switch(a){case Co.setup:return void(L.scaleY=L.data.scaleY);case Co.first:L.scaleY+=(L.data.scaleY-L.scaleY)*v}return}const U=this.getCurveValue(F)*L.data.scaleY;if(1==v)a==Co.add?L.scaleY+=U-L.data.scaleY:L.scaleY=U;else{let o=0;if(G==qo.mixOut)switch(a){case Co.setup:o=L.data.scaleY,L.scaleY=o+(Math.abs(U)*LW.signum(o)-o)*v;break;case Co.first:case Co.replace:o=L.scaleY,L.scaleY=o+(Math.abs(U)*LW.signum(o)-o)*v;break;case Co.add:L.scaleY+=(U-L.data.scaleY)*v}else switch(a){case Co.setup:o=Math.abs(L.data.scaleY)*LW.signum(U),L.scaleY=o+(U-o)*v;break;case Co.first:case Co.replace:o=Math.abs(L.scaleY)*LW.signum(U),L.scaleY=o+(U-o)*v;break;case Co.add:L.scaleY+=(U-L.data.scaleY)*v}}}}class za extends pa{constructor(o,W,F){super(o,W,`${Dv}|${F}`,`${Mv}|${F}`),this.boneIndex=0,this.boneIndex=F}apply(o,W,F,E,v,a,G){const L=o.bones[this.boneIndex];if(!L.active)return;const U=this.frames;if(F<U[0]){switch(a){case Co.setup:return L.shearX=L.data.shearX,void(L.shearY=L.data.shearY);case Co.first:L.shearX+=(L.data.shearX-L.shearX)*v,L.shearY+=(L.data.shearY-L.shearY)*v}return}let I=0,l=0;const h=Ia.search(U,F,3),p=this.curves[h/3];switch(p){case 0:const o=U[h];I=U[h+1],l=U[h+2];const W=(F-o)/(U[h+3]-o);I+=(U[h+3+1]-I)*W,l+=(U[h+3+2]-l)*W;break;case 1:I=U[h+1],l=U[h+2];break;default:I=this.getBezierValue(F,h,1,p-2),l=this.getBezierValue(F,h,2,p+18-2)}switch(a){case Co.setup:L.shearX=L.data.shearX+I*v,L.shearY=L.data.shearY+l*v;break;case Co.first:case Co.replace:L.shearX+=(L.data.shearX+I-L.shearX)*v,L.shearY+=(L.data.shearY+l-L.shearY)*v;break;case Co.add:L.shearX+=I*v,L.shearY+=l*v}}}class xa extends ha{constructor(o,W,F){super(o,W,`${Dv}|${F}`),this.boneIndex=0,this.boneIndex=F}apply(o,W,F,E,v,a,G){const L=o.bones[this.boneIndex];if(!L.active)return;if(F<this.frames[0]){switch(a){case Co.setup:return void(L.shearX=L.data.shearX);case Co.first:L.shearX+=(L.data.shearX-L.shearX)*v}return}const U=this.getCurveValue(F);switch(a){case Co.setup:L.shearX=L.data.shearX+U*v;break;case Co.first:case Co.replace:L.shearX+=(L.data.shearX+U-L.shearX)*v;break;case Co.add:L.shearX+=U*v}}}class Na extends ha{constructor(o,W,F){super(o,W,`${Mv}|${F}`),this.boneIndex=0,this.boneIndex=F}apply(o,W,F,E,v,a,G){const L=o.bones[this.boneIndex];if(!L.active)return;if(F<this.frames[0]){switch(a){case Co.setup:return void(L.shearY=L.data.shearY);case Co.first:L.shearY+=(L.data.shearY-L.shearY)*v}return}const U=this.getCurveValue(F);switch(a){case Co.setup:L.shearY=L.data.shearY+U*v;break;case Co.first:case Co.replace:L.shearY+=(L.data.shearY+U-L.shearY)*v;break;case Co.add:L.shearY+=U*v}}}class ea extends la{constructor(o,W,F){super(o,W,[`${Hv}|${F}`,`${bv}|${F}`]),this.slotIndex=0,this.slotIndex=F}getFrameEntries(){return 5}setFrame(o,W,F,E,v,a){o*=5,this.frames[o]=W,this.frames[o+1]=F,this.frames[o+2]=E,this.frames[o+3]=v,this.frames[o+4]=a}apply(o,W,F,E,v,a,G){const L=o.slots[this.slotIndex];if(!L.bone.active)return;const U=this.frames,I=L.color;if(F<U[0]){const o=L.data.color;switch(a){case Co.setup:return void I.setFromColor(o);case Co.first:I.add((o.r-I.r)*v,(o.g-I.g)*v,(o.b-I.b)*v,(o.a-I.a)*v)}return}let l=0,h=0,p=0,g=0;const f=Ia.search(U,F,5),A=this.curves[f/5];switch(A){case 0:const o=U[f];l=U[f+1],h=U[f+2],p=U[f+3],g=U[f+4];const W=(F-o)/(U[f+5]-o);l+=(U[f+5+1]-l)*W,h+=(U[f+5+2]-h)*W,p+=(U[f+5+3]-p)*W,g+=(U[f+5+4]-g)*W;break;case 1:l=U[f+1],h=U[f+2],p=U[f+3],g=U[f+4];break;default:l=this.getBezierValue(F,f,1,A-2),h=this.getBezierValue(F,f,2,A+18-2),p=this.getBezierValue(F,f,3,A+36-2),g=this.getBezierValue(F,f,4,A+54-2)}1==v?I.set(l,h,p,g):(a==Co.setup&&I.setFromColor(L.data.color),I.add((l-I.r)*v,(h-I.g)*v,(p-I.b)*v,(g-I.a)*v))}}class ta extends la{constructor(o,W,F){super(o,W,[`${Hv}|${F}`]),this.slotIndex=0,this.slotIndex=F}getFrameEntries(){return 4}setFrame(o,W,F,E,v){o<<=2,this.frames[o]=W,this.frames[o+1]=F,this.frames[o+2]=E,this.frames[o+3]=v}apply(o,W,F,E,v,a,G){const L=o.slots[this.slotIndex];if(!L.bone.active)return;const U=this.frames,I=L.color;if(F<U[0]){const o=L.data.color;switch(a){case Co.setup:return I.r=o.r,I.g=o.g,void(I.b=o.b);case Co.first:I.r+=(o.r-I.r)*v,I.g+=(o.g-I.g)*v,I.b+=(o.b-I.b)*v}return}let l=0,h=0,p=0;const g=Ia.search(U,F,4),f=this.curves[g>>2];switch(f){case 0:const o=U[g];l=U[g+1],h=U[g+2],p=U[g+3];const W=(F-o)/(U[g+4]-o);l+=(U[g+4+1]-l)*W,h+=(U[g+4+2]-h)*W,p+=(U[g+4+3]-p)*W;break;case 1:l=U[g+1],h=U[g+2],p=U[g+3];break;default:l=this.getBezierValue(F,g,1,f-2),h=this.getBezierValue(F,g,2,f+18-2),p=this.getBezierValue(F,g,3,f+36-2)}if(1==v)I.r=l,I.g=h,I.b=p;else{if(a==Co.setup){const o=L.data.color;I.r=o.r,I.g=o.g,I.b=o.b}I.r+=(l-I.r)*v,I.g+=(h-I.g)*v,I.b+=(p-I.b)*v}}}class ma extends ha{constructor(o,W,F){super(o,W,`${bv}|${F}`),this.slotIndex=0,this.slotIndex=F}apply(o,W,F,E,v,a,G){const L=o.slots[this.slotIndex];if(!L.bone.active)return;const U=L.color;if(F<this.frames[0]){const o=L.data.color;switch(a){case Co.setup:return void(U.a=o.a);case Co.first:U.a+=(o.a-U.a)*v}return}const I=this.getCurveValue(F);1==v?U.a=I:(a==Co.setup&&(U.a=L.data.color.a),U.a+=(I-U.a)*v)}}class ra extends la{constructor(o,W,F){super(o,W,[`${Hv}|${F}`,`${bv}|${F}`,`${oa}|${F}`]),this.slotIndex=0,this.slotIndex=F}getFrameEntries(){return 8}setFrame(o,W,F,E,v,a,G,L,U){o<<=3,this.frames[o]=W,this.frames[o+1]=F,this.frames[o+2]=E,this.frames[o+3]=v,this.frames[o+4]=a,this.frames[o+5]=G,this.frames[o+6]=L,this.frames[o+7]=U}apply(o,W,F,E,v,a,G){const L=o.slots[this.slotIndex];if(!L.bone.active)return;const U=this.frames,I=L.color,l=L.darkColor;if(F<U[0]){const o=L.data.color,W=L.data.darkColor;switch(a){case Co.setup:return I.setFromColor(o),l.r=W.r,l.g=W.g,void(l.b=W.b);case Co.first:I.add((o.r-I.r)*v,(o.g-I.g)*v,(o.b-I.b)*v,(o.a-I.a)*v),l.r+=(W.r-l.r)*v,l.g+=(W.g-l.g)*v,l.b+=(W.b-l.b)*v}return}let h=0,p=0,g=0,f=0,A=0,k=0,Z=0;const P=Ia.search(U,F,8),y=this.curves[P>>3];switch(y){case 0:const o=U[P];h=U[P+1],p=U[P+2],g=U[P+3],f=U[P+4],A=U[P+5],k=U[P+6],Z=U[P+7];const W=(F-o)/(U[P+8]-o);h+=(U[P+8+1]-h)*W,p+=(U[P+8+2]-p)*W,g+=(U[P+8+3]-g)*W,f+=(U[P+8+4]-f)*W,A+=(U[P+8+5]-A)*W,k+=(U[P+8+6]-k)*W,Z+=(U[P+8+7]-Z)*W;break;case 1:h=U[P+1],p=U[P+2],g=U[P+3],f=U[P+4],A=U[P+5],k=U[P+6],Z=U[P+7];break;default:h=this.getBezierValue(F,P,1,y-2),p=this.getBezierValue(F,P,2,y+18-2),g=this.getBezierValue(F,P,3,y+36-2),f=this.getBezierValue(F,P,4,y+54-2),A=this.getBezierValue(F,P,5,y+72-2),k=this.getBezierValue(F,P,6,y+90-2),Z=this.getBezierValue(F,P,7,y+108-2)}if(1==v)I.set(h,p,g,f),l.r=A,l.g=k,l.b=Z;else{if(a==Co.setup){I.setFromColor(L.data.color);const o=L.data.darkColor;l.r=o.r,l.g=o.g,l.b=o.b}I.add((h-I.r)*v,(p-I.g)*v,(g-I.b)*v,(f-I.a)*v),l.r+=(A-l.r)*v,l.g+=(k-l.g)*v,l.b+=(Z-l.b)*v}}}class Ba extends la{constructor(o,W,F){super(o,W,[`${Hv}|${F}`,`${oa}|${F}`]),this.slotIndex=0,this.slotIndex=F}getFrameEntries(){return 7}setFrame(o,W,F,E,v,a,G,L){o*=7,this.frames[o]=W,this.frames[o+1]=F,this.frames[o+2]=E,this.frames[o+3]=v,this.frames[o+4]=a,this.frames[o+5]=G,this.frames[o+6]=L}apply(o,W,F,E,v,a,G){const L=o.slots[this.slotIndex];if(!L.bone.active)return;const U=this.frames,I=L.color,l=L.darkColor;if(F<U[0]){const o=L.data.color,W=L.data.darkColor;switch(a){case Co.setup:return I.r=o.r,I.g=o.g,I.b=o.b,l.r=W.r,l.g=W.g,void(l.b=W.b);case Co.first:I.r+=(o.r-I.r)*v,I.g+=(o.g-I.g)*v,I.b+=(o.b-I.b)*v,l.r+=(W.r-l.r)*v,l.g+=(W.g-l.g)*v,l.b+=(W.b-l.b)*v}return}let h=0,p=0,g=0,f=0,A=0,k=0;const Z=Ia.search(U,F,7),P=this.curves[Z/7];switch(P){case 0:const o=U[Z];h=U[Z+1],p=U[Z+2],g=U[Z+3],f=U[Z+4],A=U[Z+5],k=U[Z+6];const W=(F-o)/(U[Z+7]-o);h+=(U[Z+7+1]-h)*W,p+=(U[Z+7+2]-p)*W,g+=(U[Z+7+3]-g)*W,f+=(U[Z+7+4]-f)*W,A+=(U[Z+7+5]-A)*W,k+=(U[Z+7+6]-k)*W;break;case 1:h=U[Z+1],p=U[Z+2],g=U[Z+3],f=U[Z+4],A=U[Z+5],k=U[Z+6];break;default:h=this.getBezierValue(F,Z,1,P-2),p=this.getBezierValue(F,Z,2,P+18-2),g=this.getBezierValue(F,Z,3,P+36-2),f=this.getBezierValue(F,Z,4,P+54-2),A=this.getBezierValue(F,Z,5,P+72-2),k=this.getBezierValue(F,Z,6,P+90-2)}if(1==v)I.r=h,I.g=p,I.b=g,l.r=f,l.g=A,l.b=k;else{if(a==Co.setup){const o=L.data.color,W=L.data.darkColor;I.r=o.r,I.g=o.g,I.b=o.b,l.r=W.r,l.g=W.g,l.b=W.b}I.r+=(h-I.r)*v,I.g+=(p-I.g)*v,I.b+=(g-I.b)*v,l.r+=(f-l.r)*v,l.g+=(A-l.g)*v,l.b+=(k-l.b)*v}}}class ja extends Ia{constructor(o,W){super(o,[`${Wa}|${W}`]),this.slotIndex=0,this.slotIndex=W,this.attachmentNames=new Array(o)}getFrameCount(){return this.frames.length}setFrame(o,W,F){this.frames[o]=W,this.attachmentNames[o]=F}apply(o,W,F,E,v,a,G){const L=o.slots[this.slotIndex];L.bone.active&&(G!=qo.mixOut?F<this.frames[0]?a!=Co.setup&&a!=Co.first||this.setAttachment(o,L,L.data.attachmentName):this.setAttachment(o,L,this.attachmentNames[Ia.search1(this.frames,F)]):a==Co.setup&&this.setAttachment(o,L,L.data.attachmentName))}setAttachment(o,W,F){W.setAttachment(F?o.getAttachment(this.slotIndex,F):null)}}class Va extends la{constructor(o,W,F,E){super(o,W,[`${Fa}|${F}|${E.id}`]),this.slotIndex=0,this.slotIndex=F,this.attachment=E,this.vertices=new Array(o)}getFrameCount(){return this.frames.length}setFrame(o,W,F){this.frames[o]=W,this.vertices[o]=F}setBezier(o,W,F,E,v,a,G,L,U,I,l){const h=this.curves;let p=this.getFrameCount()+18*o;0==F&&(h[W]=2+p);const g=.03*(E-2*a+L),f=.03*U-.06*G,A=.006*(3*(a-L)-E+I),k=.018*(G-U+.33333333);let Z=2*g+A,P=2*f+k,y=.3*(a-E)+g+.16666667*A,z=.3*G+f+.16666667*k,x=E+y,N=z;for(let o=p+18;p<o;p+=2)h[p]=x,h[p+1]=N,y+=Z,z+=P,Z+=A,P+=k,x+=y,N+=z}getCurvePercent(o,W){const F=this.curves;let E=F[W];switch(E){case 0:const F=this.frames[W];return(o-F)/(this.frames[W+this.getFrameEntries()]-F);case 1:return 0}if(E-=2,F[E]>o){const v=this.frames[W];return F[E+1]*(o-v)/(F[E]-v)}const v=E+18;for(E+=2;E<v;E+=2)if(F[E]>=o){const W=F[E-2],v=F[E-1];return v+(o-W)/(F[E]-W)*(F[E+1]-v)}const a=F[v-2],G=F[v-1];return G+(1-G)*(o-a)/(this.frames[W+this.getFrameEntries()]-a)}apply(o,W,F,E,v,a,G){const L=o.slots[this.slotIndex];if(!L.bone.active)return;const U=L.getAttachment();if(!U)return;if(!(U instanceof Kv)||U.timelineAttachment!=this.attachment)return;const I=L.deform;0==I.length&&(a=Co.setup);const l=this.vertices,h=l[0].length,p=this.frames;if(F<p[0]){switch(a){case Co.setup:return void(I.length=0);case Co.first:if(1==v)return void(I.length=0);I.length=h;const o=U;if(o.bones){v=1-v;for(let o=0;o<h;o++)I[o]*=v}else{const W=o.vertices;for(let o=0;o<h;o++)I[o]+=(W[o]-I[o])*v}}return}if(I.length=h,F>=p[p.length-1]){const o=l[p.length-1];if(1==v)if(a==Co.add){const W=U;if(W.bones)for(let W=0;W<h;W++)I[W]+=o[W];else{const F=W.vertices;for(let W=0;W<h;W++)I[W]+=o[W]-F[W]}}else pW.arrayCopy(o,0,I,0,h);else switch(a){case Co.setup:{const W=U;if(W.bones)for(let W=0;W<h;W++)I[W]=o[W]*v;else{const F=W.vertices;for(let W=0;W<h;W++){const E=F[W];I[W]=E+(o[W]-E)*v}}break}case Co.first:case Co.replace:for(let W=0;W<h;W++)I[W]+=(o[W]-I[W])*v;break;case Co.add:const W=U;if(W.bones)for(let W=0;W<h;W++)I[W]+=o[W]*v;else{const F=W.vertices;for(let W=0;W<h;W++)I[W]+=(o[W]-F[W])*v}}return}const g=Ia.search1(p,F),f=this.getCurvePercent(F,g),A=l[g],k=l[g+1];if(1==v)if(a==Co.add){const o=U;if(o.bones)for(let o=0;o<h;o++){const W=A[o];I[o]+=W+(k[o]-W)*f}else{const W=o.vertices;for(let o=0;o<h;o++){const F=A[o];I[o]+=F+(k[o]-F)*f-W[o]}}}else for(let o=0;o<h;o++){const W=A[o];I[o]=W+(k[o]-W)*f}else switch(a){case Co.setup:{const o=U;if(o.bones)for(let o=0;o<h;o++){const W=A[o];I[o]=(W+(k[o]-W)*f)*v}else{const W=o.vertices;for(let o=0;o<h;o++){const F=A[o],E=W[o];I[o]=E+(F+(k[o]-F)*f-E)*v}}break}case Co.first:case Co.replace:for(let o=0;o<h;o++){const W=A[o];I[o]+=(W+(k[o]-W)*f-I[o])*v}break;case Co.add:const o=U;if(o.bones)for(let o=0;o<h;o++){const W=A[o];I[o]+=(W+(k[o]-W)*f)*v}else{const W=o.vertices;for(let o=0;o<h;o++){const F=A[o];I[o]+=(F+(k[o]-F)*f-W[o])*v}}}}}const wa=class extends Ia{constructor(o){super(o,wa.propertyIds),this.events=new Array(o)}getFrameCount(){return this.frames.length}setFrame(o,W){this.frames[o]=W.time,this.events[o]=W}apply(o,W,F,E,v,a,G){if(!E)return;const L=this.frames,U=this.frames.length;if(W>F)this.apply(o,W,Number.MAX_VALUE,E,v,a,G),W=-1;else if(W>=L[U-1])return;if(F<L[0])return;let I=0;if(W<L[0])I=0;else{I=Ia.search1(L,W)+1;const o=L[I];for(;I>0&&L[I-1]==o;)I--}for(;I<U&&F>=L[I];I++)E.push(this.events[I])}};let Ka=wa;Ka.propertyIds=[`${12}`];const Ta=class extends Ia{constructor(o){super(o,Ta.propertyIds),this.drawOrders=new Array(o)}getFrameCount(){return this.frames.length}setFrame(o,W,F){this.frames[o]=W,this.drawOrders[o]=F}apply(o,W,F,E,v,a,G){if(G==qo.mixOut)return void(a==Co.setup&&pW.arrayCopy(o.slots,0,o.drawOrder,0,o.slots.length));if(F<this.frames[0])return void(a!=Co.setup&&a!=Co.first||pW.arrayCopy(o.slots,0,o.drawOrder,0,o.slots.length));const L=Ia.search1(this.frames,F),U=this.drawOrders[L];if(U){const W=o.drawOrder,F=o.slots;for(let o=0,E=U.length;o<E;o++)W[o]=F[U[o]]}else pW.arrayCopy(o.slots,0,o.drawOrder,0,o.slots.length)}};let da=Ta;da.propertyIds=[`${13}`];class na extends la{constructor(o,W,F){super(o,W,[`${Ea}|${F}`]),this.ikConstraintIndex=0,this.ikConstraintIndex=F}getFrameEntries(){return 6}setFrame(o,W,F,E,v,a,G){o*=6,this.frames[o]=W,this.frames[o+1]=F,this.frames[o+2]=E,this.frames[o+3]=v,this.frames[o+4]=a?1:0,this.frames[o+5]=G?1:0}apply(o,W,F,E,v,a,G){const L=o.ikConstraints[this.ikConstraintIndex];if(!L.active)return;const U=this.frames;if(F<U[0]){switch(a){case Co.setup:return L.mix=L.data.mix,L.softness=L.data.softness,L.bendDirection=L.data.bendDirection,L.compress=L.data.compress,void(L.stretch=L.data.stretch);case Co.first:L.mix+=(L.data.mix-L.mix)*v,L.softness+=(L.data.softness-L.softness)*v,L.bendDirection=L.data.bendDirection,L.compress=L.data.compress,L.stretch=L.data.stretch}return}let I=0,l=0;const h=Ia.search(U,F,6),p=this.curves[h/6];switch(p){case 0:const o=U[h];I=U[h+1],l=U[h+2];const W=(F-o)/(U[h+6]-o);I+=(U[h+6+1]-I)*W,l+=(U[h+6+2]-l)*W;break;case 1:I=U[h+1],l=U[h+2];break;default:I=this.getBezierValue(F,h,1,p-2),l=this.getBezierValue(F,h,2,p+18-2)}a==Co.setup?(L.mix=L.data.mix+(I-L.data.mix)*v,L.softness=L.data.softness+(l-L.data.softness)*v,G==qo.mixOut?(L.bendDirection=L.data.bendDirection,L.compress=L.data.compress,L.stretch=L.data.stretch):(L.bendDirection=U[h+3],L.compress=0!=U[h+4],L.stretch=0!=U[h+5])):(L.mix+=(I-L.mix)*v,L.softness+=(l-L.softness)*v,G==qo.mixIn&&(L.bendDirection=U[h+3],L.compress=0!=U[h+4],L.stretch=0!=U[h+5]))}}class ua extends la{constructor(o,W,F){super(o,W,[`${va}|${F}`]),this.transformConstraintIndex=0,this.transformConstraintIndex=F}getFrameEntries(){return 7}setFrame(o,W,F,E,v,a,G,L){const U=this.frames;U[o*=7]=W,U[o+1]=F,U[o+2]=E,U[o+3]=v,U[o+4]=a,U[o+5]=G,U[o+6]=L}apply(o,W,F,E,v,a,G){const L=o.transformConstraints[this.transformConstraintIndex];if(!L.active)return;const U=this.frames;if(F<U[0]){const o=L.data;switch(a){case Co.setup:return L.mixRotate=o.mixRotate,L.mixX=o.mixX,L.mixY=o.mixY,L.mixScaleX=o.mixScaleX,L.mixScaleY=o.mixScaleY,void(L.mixShearY=o.mixShearY);case Co.first:L.mixRotate+=(o.mixRotate-L.mixRotate)*v,L.mixX+=(o.mixX-L.mixX)*v,L.mixY+=(o.mixY-L.mixY)*v,L.mixScaleX+=(o.mixScaleX-L.mixScaleX)*v,L.mixScaleY+=(o.mixScaleY-L.mixScaleY)*v,L.mixShearY+=(o.mixShearY-L.mixShearY)*v}return}let I,l,h,p,g,f;const A=Ia.search(U,F,7),k=this.curves[A/7];switch(k){case 0:const o=U[A];I=U[A+1],l=U[A+2],h=U[A+3],p=U[A+4],g=U[A+5],f=U[A+6];const W=(F-o)/(U[A+7]-o);I+=(U[A+7+1]-I)*W,l+=(U[A+7+2]-l)*W,h+=(U[A+7+3]-h)*W,p+=(U[A+7+4]-p)*W,g+=(U[A+7+5]-g)*W,f+=(U[A+7+6]-f)*W;break;case 1:I=U[A+1],l=U[A+2],h=U[A+3],p=U[A+4],g=U[A+5],f=U[A+6];break;default:I=this.getBezierValue(F,A,1,k-2),l=this.getBezierValue(F,A,2,k+18-2),h=this.getBezierValue(F,A,3,k+36-2),p=this.getBezierValue(F,A,4,k+54-2),g=this.getBezierValue(F,A,5,k+72-2),f=this.getBezierValue(F,A,6,k+90-2)}if(a==Co.setup){const o=L.data;L.mixRotate=o.mixRotate+(I-o.mixRotate)*v,L.mixX=o.mixX+(l-o.mixX)*v,L.mixY=o.mixY+(h-o.mixY)*v,L.mixScaleX=o.mixScaleX+(p-o.mixScaleX)*v,L.mixScaleY=o.mixScaleY+(g-o.mixScaleY)*v,L.mixShearY=o.mixShearY+(f-o.mixShearY)*v}else L.mixRotate+=(I-L.mixRotate)*v,L.mixX+=(l-L.mixX)*v,L.mixY+=(h-L.mixY)*v,L.mixScaleX+=(p-L.mixScaleX)*v,L.mixScaleY+=(g-L.mixScaleY)*v,L.mixShearY+=(f-L.mixShearY)*v}}class $a extends ha{constructor(o,W,F){super(o,W,`${aa}|${F}`),this.pathConstraintIndex=0,this.pathConstraintIndex=F}apply(o,W,F,E,v,a,G){const L=o.pathConstraints[this.pathConstraintIndex];if(!L.active)return;if(F<this.frames[0]){switch(a){case Co.setup:return void(L.position=L.data.position);case Co.first:L.position+=(L.data.position-L.position)*v}return}const U=this.getCurveValue(F);a==Co.setup?L.position=L.data.position+(U-L.data.position)*v:L.position+=(U-L.position)*v}}class Ya extends ha{constructor(o,W,F){super(o,W,`${Ga}|${F}`),this.pathConstraintIndex=0,this.pathConstraintIndex=F}apply(o,W,F,E,v,a,G){const L=o.pathConstraints[this.pathConstraintIndex];if(!L.active)return;if(F<this.frames[0]){switch(a){case Co.setup:return void(L.spacing=L.data.spacing);case Co.first:L.spacing+=(L.data.spacing-L.spacing)*v}return}const U=this.getCurveValue(F);a==Co.setup?L.spacing=L.data.spacing+(U-L.data.spacing)*v:L.spacing+=(U-L.spacing)*v}}class Qa extends la{constructor(o,W,F){super(o,W,[`${La}|${F}`]),this.pathConstraintIndex=0,this.pathConstraintIndex=F}getFrameEntries(){return 4}setFrame(o,W,F,E,v){const a=this.frames;a[o<<=2]=W,a[o+1]=F,a[o+2]=E,a[o+3]=v}apply(o,W,F,E,v,a,G){const L=o.pathConstraints[this.pathConstraintIndex];if(!L.active)return;const U=this.frames;if(F<U[0]){switch(a){case Co.setup:return L.mixRotate=L.data.mixRotate,L.mixX=L.data.mixX,void(L.mixY=L.data.mixY);case Co.first:L.mixRotate+=(L.data.mixRotate-L.mixRotate)*v,L.mixX+=(L.data.mixX-L.mixX)*v,L.mixY+=(L.data.mixY-L.mixY)*v}return}let I,l,h;const p=Ia.search(U,F,4),g=this.curves[p>>2];switch(g){case 0:const o=U[p];I=U[p+1],l=U[p+2],h=U[p+3];const W=(F-o)/(U[p+4]-o);I+=(U[p+4+1]-I)*W,l+=(U[p+4+2]-l)*W,h+=(U[p+4+3]-h)*W;break;case 1:I=U[p+1],l=U[p+2],h=U[p+3];break;default:I=this.getBezierValue(F,p,1,g-2),l=this.getBezierValue(F,p,2,g+18-2),h=this.getBezierValue(F,p,3,g+36-2)}if(a==Co.setup){const o=L.data;L.mixRotate=o.mixRotate+(I-o.mixRotate)*v,L.mixX=o.mixX+(l-o.mixX)*v,L.mixY=o.mixY+(h-o.mixY)*v}else L.mixRotate+=(I-L.mixRotate)*v,L.mixX+=(l-L.mixX)*v,L.mixY+=(h-L.mixY)*v}}const Ca=class extends Ia{constructor(o,W,F){super(o,[`${Ua}|${W}|${F.sequence.id}`]),this.slotIndex=W,this.attachment=F}getFrameEntries(){return Ca.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(o,W,F,E,v){const a=this.frames;a[o*=Ca.ENTRIES]=W,a[o+Ca.MODE]=F|E<<4,a[o+Ca.DELAY]=v}apply(o,W,F,E,v,a,G){const L=o.slots[this.slotIndex];if(!L.bone.active)return;const U=L.attachment,I=this.attachment;if(!(U==I||U instanceof Kv&&U.timelineAttachment==I))return;const l=this.frames;if(F<l[0])return void(a!=Co.setup&&a!=Co.first||(L.sequenceIndex=-1));const h=Ia.search(l,F,Ca.ENTRIES),p=l[h],g=l[h+Ca.MODE],f=l[h+Ca.DELAY];if(!this.attachment.sequence)return;let A=g>>4;const k=this.attachment.sequence.regions.length,Z=Ov[15&g];if(Z!=_v.hold)switch(A+=(F-p)/f+1e-5|0,Z){case _v.once:A=Math.min(k-1,A);break;case _v.loop:A%=k;break;case _v.pingpong:{const o=(k<<1)-2;A=0==o?0:A%o,A>=k&&(A=o-A);break}case _v.onceReverse:A=Math.max(k-1-A,0);break;case _v.loopReverse:A=k-1-A%k;break;case _v.pingpongReverse:{const o=(k<<1)-2;A=0==o?0:(A+k-1)%o,A>=k&&(A=o-A)}}L.sequenceIndex=A}};let qa=Ca;qa.ENTRIES=3,qa.MODE=1,qa.DELAY=2;const ca=class{constructor(o){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new Sa(this),this.propertyIDs=new EW,this.animationsChanged=!1,this.trackEntryPool=new gW((()=>new Xa)),this.data=o}static emptyAnimation(){return ca._emptyAnimation}update(o){o*=this.timeScale;const W=this.tracks;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(!E)continue;E.animationLast=E.nextAnimationLast,E.trackLast=E.nextTrackLast;let v=o*E.timeScale;if(E.delay>0){if(E.delay-=v,E.delay>0)continue;v=-E.delay,E.delay=0}let a=E.next;if(a){const W=E.trackLast-a.delay;if(W>=0){for(a.delay=0,a.trackTime+=0==E.timeScale?0:(W/E.timeScale+o)*a.timeScale,E.trackTime+=v,this.setCurrent(F,a,!0);a.mixingFrom;)a.mixTime+=o,a=a.mixingFrom;continue}}else if(E.trackLast>=E.trackEnd&&!E.mixingFrom){W[F]=null,this.queue.end(E),this.clearNext(E);continue}if(E.mixingFrom&&this.updateMixingFrom(E,o)){let o=E.mixingFrom;for(E.mixingFrom=null,o&&(o.mixingTo=null);o;)this.queue.end(o),o=o.mixingFrom}E.trackTime+=v}this.queue.drain()}updateMixingFrom(o,W){const F=o.mixingFrom;if(!F)return!0;const E=this.updateMixingFrom(F,W);return F.animationLast=F.nextAnimationLast,F.trackLast=F.nextTrackLast,o.mixTime>0&&o.mixTime>=o.mixDuration?(0!=F.totalAlpha&&0!=o.mixDuration||(o.mixingFrom=F.mixingFrom,F.mixingFrom&&(F.mixingFrom.mixingTo=o),o.interruptAlpha=F.interruptAlpha,this.queue.end(F)),E):(F.trackTime+=W*F.timeScale,o.mixTime+=W,!1)}apply(o){if(!o)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();const W=this.events,F=this.tracks;let E=!1;for(let v=0,a=F.length;v<a;v++){const a=F[v];if(!a||a.delay>0)continue;E=!0;const G=0==v?Co.first:a.mixBlend;let L=a.alpha;a.mixingFrom?L*=this.applyMixingFrom(a,o,G):a.trackTime>=a.trackEnd&&!a.next&&(L=0);const U=a.animationLast,I=a.getAnimationTime();let l=I,h=W;a.reverse&&(l=a.animation.duration-l,h=null);const p=a.animation.timelines,g=p.length;if(0==v&&1==L||G==Co.add)for(let W=0;W<g;W++){pW.webkit602BugfixHelper(L,G);const F=p[W];F instanceof ja?this.applyAttachmentTimeline(F,o,l,G,!0):F.apply(o,U,l,h,L,G,qo.mixIn)}else{const W=a.timelineMode,F=a.shortestRotation,E=!F&&a.timelinesRotation.length!=g<<1;E&&(a.timelinesRotation.length=g<<1);for(let v=0;v<g;v++){const I=p[v],g=W[v]==Ra?G:Co.setup;!F&&I instanceof ga?this.applyRotateTimeline(I,o,l,L,g,a.timelinesRotation,v<<1,E):I instanceof ja?this.applyAttachmentTimeline(I,o,l,G,!0):(pW.webkit602BugfixHelper(L,G),I.apply(o,U,l,h,L,g,qo.mixIn))}}this.queueEvents(a,I),W.length=0,a.nextAnimationLast=I,a.nextTrackLast=a.trackTime}const v=this.unkeyedState+ba,a=o.slots;for(let W=0,F=o.slots.length;W<F;W++){const F=a[W];if(F.attachmentState==v){const W=F.data.attachmentName;F.setAttachment(W?o.getAttachment(F.data.index,W):null)}}return this.unkeyedState+=2,this.queue.drain(),E}applyMixingFrom(o,W,F){const E=o.mixingFrom;E.mixingFrom&&this.applyMixingFrom(E,W,F);let v=0;0==o.mixDuration?(v=1,F==Co.first&&(F=Co.setup)):(v=o.mixTime/o.mixDuration,v>1&&(v=1),F!=Co.first&&(F=E.mixBlend));const a=v<E.attachmentThreshold,G=v<E.drawOrderThreshold,L=E.animation.timelines,U=L.length,I=E.alpha*o.interruptAlpha,l=I*(1-v),h=E.animationLast,p=E.getAnimationTime();let g=p,f=null;if(E.reverse?g=E.animation.duration-g:v<E.eventThreshold&&(f=this.events),F==Co.add)for(let o=0;o<U;o++)L[o].apply(W,h,g,f,l,F,qo.mixOut);else{const o=E.timelineMode,v=E.timelineHoldMix,p=E.shortestRotation,A=!p&&E.timelinesRotation.length!=U<<1;A&&(E.timelinesRotation.length=U<<1),E.totalAlpha=0;for(let k=0;k<U;k++){const U=L[k];let Z,P=qo.mixOut,y=0;switch(o[k]){case Ra:if(!G&&U instanceof da)continue;Z=F,y=l;break;case Ja:Z=Co.setup,y=l;break;case Da:Z=F,y=I;break;case Ma:Z=Co.setup,y=I;break;default:Z=Co.setup;const o=v[k];y=I*Math.max(0,1-o.mixTime/o.mixDuration)}E.totalAlpha+=y,!p&&U instanceof ga?this.applyRotateTimeline(U,W,g,y,Z,E.timelinesRotation,k<<1,A):U instanceof ja?this.applyAttachmentTimeline(U,W,g,Z,a):(pW.webkit602BugfixHelper(y,F),G&&U instanceof da&&Z==Co.setup&&(P=qo.mixIn),U.apply(W,h,g,f,y,Z,P))}}return o.mixDuration>0&&this.queueEvents(E,p),this.events.length=0,E.nextAnimationLast=p,E.nextTrackLast=E.trackTime,v}applyAttachmentTimeline(o,W,F,E,v){const a=W.slots[o.slotIndex];a.bone.active&&(F<o.frames[0]?E!=Co.setup&&E!=Co.first||this.setAttachment(W,a,a.data.attachmentName,v):this.setAttachment(W,a,o.attachmentNames[Ia.search1(o.frames,F)],v),a.attachmentState<=this.unkeyedState&&(a.attachmentState=this.unkeyedState+ba))}setAttachment(o,W,F,E){W.setAttachment(F?o.getAttachment(W.data.index,F):null),E&&(W.attachmentState=this.unkeyedState+oG)}applyRotateTimeline(o,W,F,E,v,a,G,L){if(L&&(a[G]=0),1==E)return void o.apply(W,0,F,null,1,v,qo.mixIn);const U=W.bones[o.boneIndex];if(!U.active)return;let I=0,l=0;if(F<o.frames[0])switch(v){case Co.setup:U.rotation=U.data.rotation;default:return;case Co.first:I=U.rotation,l=U.data.rotation}else I=v==Co.setup?U.data.rotation:U.rotation,l=U.data.rotation+o.getCurveValue(F);let h=0,p=l-I;if(p-=360*(16384-(16384.499999999996-p/360|0)),0==p)h=a[G];else{let o=0,W=0;L?(o=0,W=p):(o=a[G],W=a[G+1]);const F=p>0;let E=o>=0;LW.signum(W)!=LW.signum(p)&&Math.abs(W)<=90&&(Math.abs(o)>180&&(o+=360*LW.signum(o)),E=F),h=p+o-o%360,E!=F&&(h+=360*LW.signum(o)),a[G]=h}a[G+1]=p,U.rotation=I+h*E}queueEvents(o,W){const F=o.animationStart,E=o.animationEnd,v=E-F,a=o.trackLast%v,G=this.events;let L=0;const U=G.length;for(;L<U;L++){const W=G[L];if(W.time<a)break;W.time>E||this.queue.event(o,W)}let I=!1;for(I=o.loop?0==v||a>o.trackTime%v:W>=E&&o.animationLast<E,I&&this.queue.complete(o);L<U;L++){const W=G[L];W.time<F||this.queue.event(o,W)}}clearTracks(){const o=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let o=0,W=this.tracks.length;o<W;o++)this.clearTrack(o);this.tracks.length=0,this.queue.drainDisabled=o,this.queue.drain()}clearTrack(o){if(o>=this.tracks.length)return;const W=this.tracks[o];if(!W)return;this.queue.end(W),this.clearNext(W);let F=W;for(;;){const o=F.mixingFrom;if(!o)break;this.queue.end(o),F.mixingFrom=null,F.mixingTo=null,F=o}this.tracks[W.trackIndex]=null,this.queue.drain()}setCurrent(o,W,F){const E=this.expandToIndex(o);this.tracks[o]=W,W.previous=null,E&&(F&&this.queue.interrupt(E),W.mixingFrom=E,E.mixingTo=W,W.mixTime=0,E.mixingFrom&&E.mixDuration>0&&(W.interruptAlpha*=Math.min(1,E.mixTime/E.mixDuration)),E.timelinesRotation.length=0),this.queue.start(W)}setAnimation(o,W,F=!1){const E=this.data.skeletonData.findAnimation(W);if(!E)throw new Error(`Animation not found: ${W}`);return this.setAnimationWith(o,E,F)}setAnimationWith(o,W,F=!1){if(!W)throw new Error("animation cannot be null.");let E=!0,v=this.expandToIndex(o);v&&(-1==v.nextTrackLast?(this.tracks[o]=v.mixingFrom,this.queue.interrupt(v),this.queue.end(v),this.clearNext(v),v=v.mixingFrom,E=!1):this.clearNext(v));const a=this.trackEntry(o,W,F,v);return this.setCurrent(o,a,E),this.queue.drain(),a}addAnimation(o,W,F=!1,E=0){const v=this.data.skeletonData.findAnimation(W);if(!v)throw new Error(`Animation not found: ${W}`);return this.addAnimationWith(o,v,F,E)}addAnimationWith(o,W,F=!1,E=0){if(!W)throw new Error("animation cannot be null.");let v=this.expandToIndex(o);if(v)for(;v.next;)v=v.next;const a=this.trackEntry(o,W,F,v);return v?(v.next=a,a.previous=v,E<=0&&(E+=v.getTrackComplete()-a.mixDuration)):(this.setCurrent(o,a,!0),this.queue.drain()),a.delay=E,a}setEmptyAnimation(o,W=0){const F=this.setAnimationWith(o,ca.emptyAnimation(),!1);return F.mixDuration=W,F.trackEnd=W,F}addEmptyAnimation(o,W=0,F=0){const E=this.addAnimationWith(o,ca.emptyAnimation(),!1,F);return F<=0&&(E.delay+=E.mixDuration-W),E.mixDuration=W,E.trackEnd=W,E}setEmptyAnimations(o=0){const W=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let W=0,F=this.tracks.length;W<F;W++){const F=this.tracks[W];F&&this.setEmptyAnimation(F.trackIndex,o)}this.queue.drainDisabled=W,this.queue.drain()}expandToIndex(o){return o<this.tracks.length?this.tracks[o]:(pW.ensureArrayCapacity(this.tracks,o+1,null),this.tracks.length=o+1,null)}trackEntry(o,W,F,E){const v=this.trackEntryPool.obtain();return v.reset(),v.trackIndex=o,v.animation=W,v.loop=F,v.holdPrevious=!1,v.reverse=!1,v.shortestRotation=!1,v.eventThreshold=0,v.attachmentThreshold=0,v.drawOrderThreshold=0,v.animationStart=0,v.animationEnd=W.duration,v.animationLast=-1,v.nextAnimationLast=-1,v.delay=0,v.trackTime=0,v.trackLast=-1,v.nextTrackLast=-1,v.trackEnd=Number.MAX_VALUE,v.timeScale=1,v.alpha=1,v.mixTime=0,v.mixDuration=E?this.data.getMix(E.animation,W):0,v.interruptAlpha=1,v.totalAlpha=0,v.mixBlend=Co.replace,v}clearNext(o){let W=o.next;for(;W;)this.queue.dispose(W),W=W.next;o.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();const o=this.tracks;for(let W=0,F=o.length;W<F;W++){let F=o[W];if(F){for(;F.mixingFrom;)F=F.mixingFrom;do{F.mixingTo&&F.mixBlend==Co.add||this.computeHold(F),F=F.mixingTo}while(F)}}}computeHold(o){const W=o.mixingTo,F=o.animation.timelines,E=o.animation.timelines.length,v=o.timelineMode;v.length=E;const a=o.timelineHoldMix;a.length=0;const G=this.propertyIDs;if(W&&W.holdPrevious)for(let o=0;o<E;o++)v[o]=G.addAll(F[o].getPropertyIds())?Ma:Da;else o:for(let L=0;L<E;L++){const E=F[L],U=E.getPropertyIds();if(G.addAll(U))if(!W||E instanceof ja||E instanceof da||E instanceof Ka||!W.animation.hasTimeline(U))v[L]=Ja;else{for(let F=W.mixingTo;F;F=F.mixingTo)if(!F.animation.hasTimeline(U)){if(o.mixDuration>0){v[L]=Ha,a[L]=F;continue o}break}v[L]=Ma}else v[L]=Ra}}getCurrent(o){return o>=this.tracks.length?null:this.tracks[o]}addListener(o){if(!o)throw new Error("listener cannot be null.");this.listeners.push(o)}removeListener(o){const W=this.listeners.indexOf(o);W>=0&&this.listeners.splice(W,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}setAnimationByName(o,W,F){ca.deprecatedWarning1||(ca.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(o,W,F)}addAnimationByName(o,W,F,E){ca.deprecatedWarning2||(ca.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(o,W,F,E)}hasAnimation(o){return null!==this.data.skeletonData.findAnimation(o)}hasAnimationByName(o){return ca.deprecatedWarning3||(ca.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(o)}};let _a=ca;_a._emptyAnimation=new Xv("<empty>",[],0),_a.deprecatedWarning1=!1,_a.deprecatedWarning2=!1,_a.deprecatedWarning3=!1;const Oa=class{constructor(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=Co.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){const o=this.animationEnd-this.animationStart;return 0==o?this.animationStart:this.trackTime%o+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(o){this.animationLast=o,this.nextAnimationLast=o}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){const o=this.animationEnd-this.animationStart;if(0!=o){if(this.loop)return o*(1+(this.trackTime/o|0));if(this.trackTime<o)return o}return this.trackTime}get time(){return Oa.deprecatedWarning1||(Oa.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime}set time(o){Oa.deprecatedWarning1||(Oa.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=o}get endTime(){return Oa.deprecatedWarning2||(Oa.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime}set endTime(o){Oa.deprecatedWarning2||(Oa.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=o}loopsCount(){return Math.floor(this.trackTime/this.trackEnd)}};let Xa=Oa;Xa.deprecatedWarning1=!1,Xa.deprecatedWarning2=!1;class Sa{constructor(o){this.objects=[],this.drainDisabled=!1,this.animState=o}start(o){this.objects.push(sa.start),this.objects.push(o),this.animState.animationsChanged=!0}interrupt(o){this.objects.push(sa.interrupt),this.objects.push(o)}end(o){this.objects.push(sa.end),this.objects.push(o),this.animState.animationsChanged=!0}dispose(o){this.objects.push(sa.dispose),this.objects.push(o)}complete(o){this.objects.push(sa.complete),this.objects.push(o)}event(o,W){this.objects.push(sa.event),this.objects.push(o),this.objects.push(W)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;const o=this.objects,W=this.animState.listeners;for(let F=0;F<o.length;F+=2){const E=o[F],v=o[F+1];switch(E){case sa.start:v.listener&&v.listener.start&&v.listener.start(v);for(let o=0;o<W.length;o++){const F=W[o];F.start&&F.start(v)}break;case sa.interrupt:v.listener&&v.listener.interrupt&&v.listener.interrupt(v);for(let o=0;o<W.length;o++){const F=W[o];F.interrupt&&F.interrupt(v)}break;case sa.end:v.listener&&v.listener.end&&v.listener.end(v);for(let o=0;o<W.length;o++){const F=W[o];F.end&&F.end(v)}case sa.dispose:v.listener&&v.listener.dispose&&v.listener.dispose(v);for(let o=0;o<W.length;o++){const F=W[o];F.dispose&&F.dispose(v)}this.animState.trackEntryPool.free(v);break;case sa.complete:v.listener&&v.listener.complete&&v.listener.complete(v);for(let o=0;o<W.length;o++){const F=W[o];F.complete&&F.complete(v)}break;case sa.event:const E=o[2+F++];v.listener&&v.listener.event&&v.listener.event(v,E);for(let o=0;o<W.length;o++){const F=W[o];F.event&&F.event(v,E)}}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var sa=(o=>(o[o.start=0]="start",o[o.interrupt=1]="interrupt",o[o.end=2]="end",o[o.dispose=3]="dispose",o[o.complete=4]="complete",o[o.event=5]="event",o))(sa||{});class ia{start(o){}interrupt(o){}end(o){}dispose(o){}complete(o){}event(o,W){}}const Ra=0,Ja=1,Da=2,Ma=3,Ha=4,ba=1,oG=2;class WG{constructor(o){if(this.animationToMixTime={},this.defaultMix=0,!o)throw new Error("skeletonData cannot be null.");this.skeletonData=o}setMix(o,W,F){const E=this.skeletonData.findAnimation(o);if(!E)throw new Error(`Animation not found: ${o}`);const v=this.skeletonData.findAnimation(W);if(!v)throw new Error(`Animation not found: ${W}`);this.setMixWith(E,v,F)}setMixWith(o,W,F){if(!o)throw new Error("from cannot be null.");if(!W)throw new Error("to cannot be null.");const E=`${o.name}.${W.name}`;this.animationToMixTime[E]=F}getMix(o,W){const F=`${o.name}.${W.name}`,E=this.animationToMixTime[F];return void 0===E?this.defaultMix:E}}class FG{constructor(o){this.atlas=o}loadSequence(o,W,F){const E=F.regions;for(let v=0,a=E.length;v<a;v++){const a=F.getPath(W,v),G=this.atlas.findRegion(a);if(null==G)throw new Error(`Region not found in atlas: ${a} (sequence: ${o})`);E[v]=G,E[v].renderObject=E[v]}}newRegionAttachment(o,W,F,E){const v=new Qv(W,F);if(null!=E)this.loadSequence(W,F,E);else{const o=this.atlas.findRegion(F);if(!o)throw new Error(`Region not found in atlas: ${F} (region attachment: ${W})`);o.renderObject=o,v.region=o}return v}newMeshAttachment(o,W,F,E){const v=new nv(W,F);if(null!=E)this.loadSequence(W,F,E);else{const o=this.atlas.findRegion(F);if(!o)throw new Error(`Region not found in atlas: ${F} (mesh attachment: ${W})`);o.renderObject=o,v.region=o}return v}newBoundingBoxAttachment(o,W){return new Tv(W)}newPathAttachment(o,W){return new uv(W)}newPointAttachment(o,W){return new $v(W)}newClippingAttachment(o,W){return new dv(W)}}class EG{constructor(o,W,F){if(this.matrix=new Xo.uq,this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.sorted=!1,this.active=!1,!o)throw new Error("data cannot be null.");if(!W)throw new Error("skeleton cannot be null.");this.data=o,this.skeleton=W,this.parent=F,this.setToSetupPose()}get worldX(){return this.matrix.tx}get worldY(){return this.matrix.ty}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(o,W,F,E,v,a,G){this.ax=o,this.ay=W,this.arotation=F,this.ascaleX=E,this.ascaleY=v,this.ashearX=a,this.ashearY=G;const L=this.parent,U=this.matrix,I=this.skeleton.scaleX,l=kW?-this.skeleton.scaleY:this.skeleton.scaleY;if(!L){const L=this.skeleton,h=F+90+G;return U.a=LW.cosDeg(F+a)*E*I,U.c=LW.cosDeg(h)*v*I,U.b=LW.sinDeg(F+a)*E*l,U.d=LW.sinDeg(h)*v*l,U.tx=o*I+L.x,void(U.ty=W*l+L.y)}let h=L.matrix.a,p=L.matrix.c,g=L.matrix.b,f=L.matrix.d;switch(U.tx=h*o+p*W+L.matrix.tx,U.ty=g*o+f*W+L.matrix.ty,this.data.transformMode){case Oo.Normal:{const o=F+90+G,W=LW.cosDeg(F+a)*E,L=LW.cosDeg(o)*v,I=LW.sinDeg(F+a)*E,l=LW.sinDeg(o)*v;return U.a=h*W+p*I,U.c=h*L+p*l,U.b=g*W+f*I,void(U.d=g*L+f*l)}case Oo.OnlyTranslation:{const o=F+90+G;U.a=LW.cosDeg(F+a)*E,U.c=LW.cosDeg(o)*v,U.b=LW.sinDeg(F+a)*E,U.d=LW.sinDeg(o)*v;break}case Oo.NoRotationOrReflection:{let o=h*h+g*g,W=0;o>1e-4?(o=Math.abs(h*f-p*g)/o,h/=I,g/=l,p=g*o,f=h*o,W=Math.atan2(g,h)*LW.radDeg):(h=0,g=0,W=90-Math.atan2(f,p)*LW.radDeg);const L=F+a-W,A=F+G-W+90,k=LW.cosDeg(L)*E,Z=LW.cosDeg(A)*v,P=LW.sinDeg(L)*E,y=LW.sinDeg(A)*v;U.a=h*k-p*P,U.c=h*Z-p*y,U.b=g*k+f*P,U.d=g*Z+f*y;break}case Oo.NoScale:case Oo.NoScaleOrReflection:{const o=LW.cosDeg(F),W=LW.sinDeg(F);let L=(h*o+p*W)/I,A=(g*o+f*W)/l,k=Math.sqrt(L*L+A*A);k>1e-5&&(k=1/k),L*=k,A*=k,k=Math.sqrt(L*L+A*A),this.data.transformMode==Oo.NoScale&&h*f-p*g<0!=(I<0!=l<0)&&(k=-k);const Z=Math.PI/2+Math.atan2(A,L),P=Math.cos(Z)*k,y=Math.sin(Z)*k,z=LW.cosDeg(a)*E,x=LW.cosDeg(90+G)*v,N=LW.sinDeg(a)*E,e=LW.sinDeg(90+G)*v;U.a=L*z+P*N,U.c=L*x+P*e,U.b=A*z+y*N,U.d=A*x+y*e;break}}U.a*=I,U.c*=I,U.b*=l,U.d*=l}setToSetupPose(){const o=this.data;this.x=o.x,this.y=o.y,this.rotation=o.rotation,this.scaleX=o.scaleX,this.scaleY=o.scaleY,this.shearX=o.shearX,this.shearY=o.shearY}getWorldRotationX(){return Math.atan2(this.matrix.b,this.matrix.a)*LW.radDeg}getWorldRotationY(){return Math.atan2(this.matrix.d,this.matrix.c)*LW.radDeg}getWorldScaleX(){const o=this.matrix;return Math.sqrt(o.a*o.a+o.b*o.b)}getWorldScaleY(){const o=this.matrix;return Math.sqrt(o.c*o.c+o.d*o.d)}updateAppliedTransform(){const o=this.parent,W=this.matrix;if(!o)return this.ax=W.tx-this.skeleton.x,this.ay=W.ty-this.skeleton.y,this.arotation=Math.atan2(W.b,W.a)*LW.radDeg,this.ascaleX=Math.sqrt(W.a*W.a+W.b*W.b),this.ascaleY=Math.sqrt(W.c*W.c+W.d*W.d),this.ashearX=0,void(this.ashearY=Math.atan2(W.a*W.c+W.b*W.d,W.a*W.d-W.b*W.c)*LW.radDeg);const F=o.matrix,E=1/(F.a*F.d-F.b*F.c),v=W.tx-F.tx,a=W.ty-F.ty;this.ax=v*F.d*E-a*F.c*E,this.ay=a*F.a*E-v*F.b*E;const G=E*F.d,L=E*F.a,U=E*F.c,I=E*F.b,l=G*W.a-U*W.b,h=G*W.c-U*W.d,p=L*W.b-I*W.a,g=L*W.d-I*W.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(l*l+p*p),this.ascaleX>1e-4){const o=l*g-h*p;this.ascaleY=o/this.ascaleX,this.ashearY=Math.atan2(l*h+p*g,o)*LW.radDeg,this.arotation=Math.atan2(p,l)*LW.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(h*h+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,h)*LW.radDeg}worldToLocal(o){const W=this.matrix,F=W.a,E=W.c,v=W.b,a=W.d,G=1/(F*a-E*v),L=o.x-W.tx,U=o.y-W.ty;return o.x=L*a*G-U*E*G,o.y=U*F*G-L*v*G,o}localToWorld(o){const W=this.matrix,F=o.x,E=o.y;return o.x=F*W.a+E*W.c+W.tx,o.y=F*W.b+E*W.d+W.ty,o}worldToLocalRotation(o){const W=LW.sinDeg(o),F=LW.cosDeg(o),E=this.matrix;return Math.atan2(E.a*W-E.b*F,E.d*F-E.c*W)*LW.radDeg}localToWorldRotation(o){o-=this.rotation-this.shearX;const W=LW.sinDeg(o),F=LW.cosDeg(o),E=this.matrix;return Math.atan2(F*E.b+W*E.d,F*E.a+W*E.c)*LW.radDeg}rotateWorld(o){const W=this.matrix,F=W.a,E=W.c,v=W.b,a=W.d,G=LW.cosDeg(o),L=LW.sinDeg(o);W.a=G*F-L*v,W.c=G*E-L*a,W.b=L*F+G*v,W.d=L*E+G*a}}class vG{constructor(o,W,F){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Oo.Normal,this.skinRequired=!1,this.color=new aW,o<0)throw new Error("index must be >= 0.");if(!W)throw new Error("name cannot be null.");this.index=o,this.name=W,this.parent=F}}class aG{constructor(o,W,F){this.name=o,this.order=W,this.skinRequired=F}}class GG{constructor(o,W){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!W)throw new Error("data cannot be null.");this.time=o,this.data=W}}class LG{constructor(o){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=o}}class UG{constructor(o,W){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!o)throw new Error("data cannot be null.");if(!W)throw new Error("skeleton cannot be null.");this.data=o,this.mix=o.mix,this.softness=o.softness,this.bendDirection=o.bendDirection,this.compress=o.compress,this.stretch=o.stretch,this.bones=new Array;for(let F=0;F<o.bones.length;F++){const E=W.findBone(o.bones[F].name);if(!E)throw new Error(`Couldn't find bone ${o.bones[F].name}`);this.bones.push(E)}const F=W.findBone(o.target.name);if(!F)throw new Error(`Couldn't find bone ${o.target.name}`);this.target=F}isActive(){return this.active}update(){if(0==this.mix)return;const o=this.target,W=this.bones;switch(W.length){case 1:this.apply1(W[0],o.worldX,o.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(W[0],W[1],o.worldX,o.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}apply1(o,W,F,E,v,a,G){const L=o.parent.matrix;if(!L)throw new Error("IK bone must have parent.");const U=L.a;let I=L.c;const l=L.b;let h=L.d,p=-o.ashearX-o.arotation,g=0,f=0;const A=o.skeleton.scaleX,k=kW?-o.skeleton.scaleY:o.skeleton.scaleY;switch(o.data.transformMode){case Oo.OnlyTranslation:g=W-o.worldX,f=F-o.worldY,kW&&(f=-f);break;case Oo.NoRotationOrReflection:const E=Math.abs(U*h-I*l)/(U*U+l*l),v=U/A,a=l/k;I=-a*E*A,h=v*E*k,p+=Math.atan2(a,v)*LW.radDeg;default:const G=W-L.tx,Z=F-L.ty,P=U*h-I*l;g=(G*h-Z*I)/P-o.ax,f=(Z*U-G*l)/P-o.ay}p+=Math.atan2(f,g)*LW.radDeg,o.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);let Z=o.ascaleX,P=o.ascaleY;if(E||v){switch(o.data.transformMode){case Oo.NoScale:case Oo.NoScaleOrReflection:g=W-o.worldX,f=F-o.worldY}const L=o.data.length*Z,U=Math.sqrt(g*g+f*f);if(E&&U<L||v&&U>L&&L>1e-4){const o=(U/L-1)*G+1;Z*=o,a&&(P*=o)}}o.updateWorldTransformWith(o.ax,o.ay,o.arotation+p*G,Z,P,o.ashearX,o.ashearY)}apply2(o,W,F,E,v,a,G,L,U){const I=o.ax,l=o.ay;let h=o.ascaleX,p=o.ascaleY,g=h,f=p,A=W.ascaleX;const k=o.matrix;let Z=0,P=0,y=0;h<0?(h=-h,Z=180,y=-1):(Z=0,y=1),p<0&&(p=-p,y=-y),A<0?(A=-A,P=180):P=0;const z=W.ax;let x=0,N=0,e=0,t=k.a,m=k.c,r=k.b,B=k.d;const j=Math.abs(h-p)<=1e-4;!j||a?(x=0,N=t*z+k.tx,e=r*z+k.ty):(x=W.ay,N=t*z+m*x+k.tx,e=r*z+B*x+k.ty);const V=o.parent.matrix;if(!V)throw new Error("IK parent must itself have a parent.");t=V.a,m=V.c,r=V.b,B=V.d;const w=1/(t*B-m*r);let K=N-V.tx,T=e-V.ty;const d=(K*B-T*m)*w-I,n=(T*t-K*r)*w-l,u=Math.sqrt(d*d+n*n);let $,Y,Q=W.data.length*A;if(u<1e-4)return this.apply1(o,F,E,!1,a,!1,U),void W.updateWorldTransformWith(z,x,0,W.ascaleX,W.ascaleY,W.ashearX,W.ashearY);K=F-V.tx,T=E-V.ty;let C=(K*B-T*m)*w-I,q=(T*t-K*r)*w-l,c=C*C+q*q;if(0!=L){L*=h*(A+1)*.5;const o=Math.sqrt(c),W=o-u-Q*h+L;if(W>0){let F=Math.min(1,W/(2*L))-1;F=(W-L*(1-F*F))/o,C-=F*C,q-=F*q,c=C*C+q*q}}o:if(j){Q*=h;let o=(c-u*u-Q*Q)/(2*u*Q);o<-1?(o=-1,Y=Math.PI*v):o>1?(o=1,Y=0,a&&(t=(Math.sqrt(c)/(u+Q)-1)*U+1,g*=t,G&&(f*=t))):Y=Math.acos(o)*v,t=u+Q*o,m=Q*Math.sin(Y),$=Math.atan2(q*t-C*m,C*t+q*m)}else{t=h*Q,m=p*Q;const o=t*t,W=m*m,F=Math.atan2(q,C);r=W*u*u+o*c-o*W;const E=-2*W*u,a=W-o;if(B=E*E-4*a*r,B>=0){let o=Math.sqrt(B);E<0&&(o=-o),o=.5*-(E+o);const W=o/a,G=r/o,L=Math.abs(W)<Math.abs(G)?W:G;if(L*L<=c){T=Math.sqrt(c-L*L)*v,$=F-Math.atan2(T,L),Y=Math.atan2(T/p,(L-u)/h);break o}}let G=LW.PI,L=u-t,U=L*L,I=0,l=0,g=u+t,f=g*g,A=0;r=-t*u/(o-W),r>=-1&&r<=1&&(r=Math.acos(r),K=t*Math.cos(r)+u,T=m*Math.sin(r),B=K*K+T*T,B<U&&(G=r,U=B,L=K,I=T),B>f&&(l=r,f=B,g=K,A=T)),c<=.5*(U+f)?($=F-Math.atan2(I*v,L),Y=G*v):($=F-Math.atan2(A*v,g),Y=l*v)}const _=Math.atan2(x,z)*y;let O=o.arotation;$=($-_)*LW.radDeg+Z-O,$>180?$-=360:$<-180&&($+=360),o.updateWorldTransformWith(I,l,O+$*U,g,f,0,0),O=W.arotation,Y=((Y+_)*LW.radDeg-W.ashearX)*y+P-O,Y>180?Y-=360:Y<-180&&(Y+=360),W.updateWorldTransformWith(z,x,O+Y*U,W.ascaleX,W.ascaleY,W.ashearX,W.ashearY)}}class IG extends aG{constructor(o){super(o,0,!1),this.bones=new Array,this._target=null,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}set target(o){this._target=o}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class lG extends aG{constructor(o){super(o,0,!1),this.bones=new Array,this._target=null,this.positionMode=co.Fixed,this.spacingMode=hG.Fixed,this.rotateMode=_o.Chain,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0}set target(o){this._target=o}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}}var hG=(o=>(o[o.Length=0]="Length",o[o.Fixed=1]="Fixed",o[o.Percent=2]="Percent",o[o.Proportional=3]="Proportional",o))(hG||{});const pG=class{constructor(o,W){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!o)throw new Error("data cannot be null.");if(!W)throw new Error("skeleton cannot be null.");this.data=o,this.bones=new Array;for(let F=0,E=o.bones.length;F<E;F++){const E=W.findBone(o.bones[F].name);if(!E)throw new Error(`Couldn't find bone ${o.bones[F].name}.`);this.bones.push(E)}const F=W.findSlot(o.target.name);if(!F)throw new Error(`Couldn't find target bone ${o.target.name}`);this.target=F,this.position=o.position,this.spacing=o.spacing,this.mixRotate=o.mixRotate,this.mixX=o.mixX,this.mixY=o.mixY}isActive(){return this.active}update(){const o=this.target.getAttachment();if(!(o instanceof uv))return;const W=this.mixRotate,F=this.mixX,E=this.mixY;if(0==W&&0==F&&0==E)return;const v=this.data,a=v.rotateMode==_o.Tangent,G=v.rotateMode==_o.ChainScale,L=this.bones,U=L.length,I=a?U:U+1,l=pW.setArraySize(this.spaces,I),h=G?this.lengths=pW.setArraySize(this.lengths,U):[],p=this.spacing;switch(v.spacingMode){case hG.Percent:if(G)for(let o=0,W=I-1;o<W;o++){const W=L[o],F=W.data.length;if(F<pG.epsilon)h[o]=0;else{const E=F*W.matrix.a,v=F*W.matrix.b;h[o]=Math.sqrt(E*E+v*v)}}pW.arrayFill(l,1,I,p);break;case hG.Proportional:let o=0;for(let W=0,F=I-1;W<F;){const F=L[W],E=F.data.length;if(E<pG.epsilon)G&&(h[W]=0),l[++W]=p;else{const v=E*F.matrix.a,a=E*F.matrix.b,L=Math.sqrt(v*v+a*a);G&&(h[W]=L),l[++W]=L,o+=L}}if(o>0){o=I/o*p;for(let W=1;W<I;W++)l[W]*=o}break;default:const W=v.spacingMode==hG.Length;for(let o=0,F=I-1;o<F;){const F=L[o],E=F.data.length;if(E<pG.epsilon)G&&(h[o]=0),l[++o]=p;else{const v=E*F.matrix.a,a=E*F.matrix.b,L=Math.sqrt(v*v+a*a);G&&(h[o]=L),l[++o]=(W?E+p:p)*L/E}}}const g=this.computeWorldPositions(o,I,a);let f=g[0],A=g[1],k=v.offsetRotation,Z=!1;if(0==k)Z=v.rotateMode==_o.Chain;else{Z=!1;const o=this.target.bone.matrix;k*=o.a*o.d-o.b*o.c>0?LW.degRad:-LW.degRad}for(let o=0,v=3;o<U;o++,v+=3){const U=L[o],I=U.matrix;I.tx+=(f-I.tx)*F,I.ty+=(A-I.ty)*E;const p=g[v],P=g[v+1],y=p-f,z=P-A;if(G){const F=h[o];if(0!=F){const o=(Math.sqrt(y*y+z*z)/F-1)*W+1;I.a*=o,I.b*=o}}if(f=p,A=P,W>0){const F=I.a,E=I.c,G=I.b,L=I.d;let h=0,p=0,P=0;if(h=a?g[v-1]:0==l[o+1]?g[v+2]:Math.atan2(z,y),h-=Math.atan2(G,F),Z){p=Math.cos(h),P=Math.sin(h);const o=U.data.length;f+=(o*(p*F-P*G)-y)*W,A+=(o*(P*F+p*G)-z)*W}else h+=k;h>LW.PI?h-=LW.PI2:h<-LW.PI&&(h+=LW.PI2),h*=W,p=Math.cos(h),P=Math.sin(h),I.a=p*F-P*G,I.c=p*E-P*L,I.b=P*F+p*G,I.d=P*E+p*L}U.updateAppliedTransform()}}computeWorldPositions(o,W,F){const E=this.target;let v=this.position;const a=this.spaces,G=pW.setArraySize(this.positions,3*W+2);let L=this.world;const U=o.closed;let I=o.worldVerticesLength,l=I/6,h=pG.NONE;if(!o.constantSpeed){const p=o.lengths;l-=U?1:2;const g=p[l];let f;switch(this.data.positionMode==co.Percent&&(v*=g),this.data.spacingMode){case hG.Percent:f=g;break;case hG.Proportional:f=g/W;break;default:f=1}L=pW.setArraySize(this.world,8);for(let A=0,k=0,Z=0;A<W;A++,k+=3){const W=a[A]*f;v+=W;let P=v;if(U)P%=g,P<0&&(P+=g),Z=0;else{if(P<0){h!=pG.BEFORE&&(h=pG.BEFORE,o.computeWorldVertices(E,2,4,L,0,2)),this.addBeforePosition(P,L,0,G,k);continue}if(P>g){h!=pG.AFTER&&(h=pG.AFTER,o.computeWorldVertices(E,I-6,4,L,0,2)),this.addAfterPosition(P-g,L,0,G,k);continue}}for(;;Z++){const o=p[Z];if(!(P>o)){if(0==Z)P/=o;else{const W=p[Z-1];P=(P-W)/(o-W)}break}}Z!=h&&(h=Z,U&&Z==l?(o.computeWorldVertices(E,I-4,4,L,0,2),o.computeWorldVertices(E,0,4,L,4,2)):o.computeWorldVertices(E,6*Z+2,8,L,0,2)),this.addCurvePosition(P,L[0],L[1],L[2],L[3],L[4],L[5],L[6],L[7],G,k,F||A>0&&0==W)}return G}U?(I+=2,L=pW.setArraySize(this.world,I),o.computeWorldVertices(E,2,I-4,L,0,2),o.computeWorldVertices(E,0,2,L,I-4,2),L[I-2]=L[0],L[I-1]=L[1]):(l--,I-=4,L=pW.setArraySize(this.world,I),o.computeWorldVertices(E,2,I,L,0,2));const p=pW.setArraySize(this.curves,l);let g,f=0,A=L[0],k=L[1],Z=0,P=0,y=0,z=0,x=0,N=0,e=0,t=0,m=0,r=0,B=0,j=0,V=0,w=0;for(let o=0,W=2;o<l;o++,W+=6)Z=L[W],P=L[W+1],y=L[W+2],z=L[W+3],x=L[W+4],N=L[W+5],e=.1875*(A-2*Z+y),t=.1875*(k-2*P+z),m=.09375*(3*(Z-y)-A+x),r=.09375*(3*(P-z)-k+N),B=2*e+m,j=2*t+r,V=.75*(Z-A)+e+.16666667*m,w=.75*(P-k)+t+.16666667*r,f+=Math.sqrt(V*V+w*w),V+=B,w+=j,B+=m,j+=r,f+=Math.sqrt(V*V+w*w),V+=B,w+=j,f+=Math.sqrt(V*V+w*w),V+=B+m,w+=j+r,f+=Math.sqrt(V*V+w*w),p[o]=f,A=x,k=N;switch(this.data.positionMode==co.Percent&&(v*=f),this.data.spacingMode){case hG.Percent:g=f;break;case hG.Proportional:g=f/W;break;default:g=1}const K=this.segments;let T=0;for(let o=0,E=0,l=0,d=0;o<W;o++,E+=3){const W=a[o]*g;v+=W;let n=v;if(U)n%=f,n<0&&(n+=f),l=0;else{if(n<0){this.addBeforePosition(n,L,0,G,E);continue}if(n>f){this.addAfterPosition(n-f,L,I-4,G,E);continue}}for(;;l++){const o=p[l];if(!(n>o)){if(0==l)n/=o;else{const W=p[l-1];n=(n-W)/(o-W)}break}}if(l!=h){h=l;let o=6*l;for(A=L[o],k=L[o+1],Z=L[o+2],P=L[o+3],y=L[o+4],z=L[o+5],x=L[o+6],N=L[o+7],e=.03*(A-2*Z+y),t=.03*(k-2*P+z),m=.006*(3*(Z-y)-A+x),r=.006*(3*(P-z)-k+N),B=2*e+m,j=2*t+r,V=.3*(Z-A)+e+.16666667*m,w=.3*(P-k)+t+.16666667*r,T=Math.sqrt(V*V+w*w),K[0]=T,o=1;o<8;o++)V+=B,w+=j,B+=m,j+=r,T+=Math.sqrt(V*V+w*w),K[o]=T;V+=B,w+=j,T+=Math.sqrt(V*V+w*w),K[8]=T,V+=B+m,w+=j+r,T+=Math.sqrt(V*V+w*w),K[9]=T,d=0}for(n*=T;;d++){const o=K[d];if(!(n>o)){if(0==d)n/=o;else{const W=K[d-1];n=d+(n-W)/(o-W)}break}}this.addCurvePosition(.1*n,A,k,Z,P,y,z,x,N,G,E,F||o>0&&0==W)}return G}addBeforePosition(o,W,F,E,v){const a=W[F],G=W[F+1],L=W[F+2]-a,U=W[F+3]-G,I=Math.atan2(U,L);E[v]=a+o*Math.cos(I),E[v+1]=G+o*Math.sin(I),E[v+2]=I}addAfterPosition(o,W,F,E,v){const a=W[F+2],G=W[F+3],L=a-W[F],U=G-W[F+1],I=Math.atan2(U,L);E[v]=a+o*Math.cos(I),E[v+1]=G+o*Math.sin(I),E[v+2]=I}addCurvePosition(o,W,F,E,v,a,G,L,U,I,l,h){if(0==o||isNaN(o))return I[l]=W,I[l+1]=F,void(I[l+2]=Math.atan2(v-F,E-W));const p=o*o,g=p*o,f=1-o,A=f*f,k=A*f,Z=f*o,P=3*Z,y=f*P,z=P*o,x=W*k+E*y+a*z+L*g,N=F*k+v*y+G*z+U*g;I[l]=x,I[l+1]=N,h&&(I[l+2]=o<.001?Math.atan2(v-F,E-W):Math.atan2(N-(F*A+v*Z*2+G*p),x-(W*A+E*Z*2+a*p)))}};let gG=pG;gG.NONE=-1,gG.BEFORE=-2,gG.AFTER=-3,gG.epsilon=1e-5;class fG{constructor(o,W){if(this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!o)throw new Error("data cannot be null.");if(!W)throw new Error("bone cannot be null.");this.data=o,this.bone=W,this.color=new aW,this.darkColor=o.darkColor?new aW:null,this.setToSetupPose(),this.blendMode=this.data.blendMode}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(o){this.attachment!=o&&(o instanceof Kv&&this.attachment instanceof Kv&&o.timelineAttachment==this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=o,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}class AG{constructor(o,W){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new fW,this.active=!1,!o)throw new Error("data cannot be null.");if(!W)throw new Error("skeleton cannot be null.");this.data=o,this.mixRotate=o.mixRotate,this.mixX=o.mixX,this.mixY=o.mixY,this.mixScaleX=o.mixScaleX,this.mixScaleY=o.mixScaleY,this.mixShearY=o.mixShearY,this.bones=new Array;for(let F=0;F<o.bones.length;F++){const E=W.findBone(o.bones[F].name);if(!E)throw new Error(`Couldn't find bone ${o.bones[F].name}.`);this.bones.push(E)}const F=W.findBone(o.target.name);if(!F)throw new Error(`Couldn't find target bone ${o.target.name}.`);this.target=F}isActive(){return this.active}update(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleX&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){const o=this.mixRotate,W=this.mixX,F=this.mixY,E=this.mixScaleX,v=this.mixScaleY,a=this.mixShearY,G=0!=W||0!=F,L=this.target,U=L.matrix,I=U.a,l=U.c,h=U.b,p=U.d,g=I*p-l*h>0?LW.degRad:-LW.degRad,f=this.data.offsetRotation*g,A=this.data.offsetShearY*g,k=this.bones;for(let U=0,g=k.length;U<g;U++){const g=k[U],Z=g.matrix;if(0!=o){const W=Z.a,F=Z.c,E=Z.b,v=Z.d;let a=Math.atan2(h,I)-Math.atan2(E,W)+f;a>LW.PI?a-=LW.PI2:a<-LW.PI&&(a+=LW.PI2),a*=o;const G=Math.cos(a),L=Math.sin(a);Z.a=G*W-L*E,Z.c=G*F-L*v,Z.b=L*W+G*E,Z.d=L*F+G*v}if(G){const o=this.temp;L.localToWorld(o.set(this.data.offsetX,this.data.offsetY)),Z.tx+=(o.x-Z.tx)*W,Z.ty+=(o.y-Z.ty)*F}if(0!=E){let o=Math.sqrt(Z.a*Z.a+Z.b*Z.b);0!=o&&(o=(o+(Math.sqrt(I*I+h*h)-o+this.data.offsetScaleX)*E)/o),Z.a*=o,Z.b*=o}if(0!=v){let o=Math.sqrt(Z.c*Z.c+Z.d*Z.d);0!=o&&(o=(o+(Math.sqrt(l*l+p*p)-o+this.data.offsetScaleY)*v)/o),Z.c*=o,Z.d*=o}if(a>0){const o=Z.c,W=Z.d,F=Math.atan2(W,o);let E=Math.atan2(p,l)-Math.atan2(h,I)-(F-Math.atan2(Z.b,Z.a));E>LW.PI?E-=LW.PI2:E<-LW.PI&&(E+=LW.PI2),E=F+(E+A)*a;const v=Math.sqrt(o*o+W*W);Z.c=Math.cos(E)*v,Z.d=Math.sin(E)*v}g.updateAppliedTransform()}}applyRelativeWorld(){const o=this.mixRotate,W=this.mixX,F=this.mixY,E=this.mixScaleX,v=this.mixScaleY,a=this.mixShearY,G=0!=W||0!=F,L=this.target,U=L.matrix,I=U.a,l=U.c,h=U.b,p=U.d,g=I*p-l*h>0?LW.degRad:-LW.degRad,f=this.data.offsetRotation*g,A=this.data.offsetShearY*g,k=this.bones;for(let U=0,g=k.length;U<g;U++){const g=k[U],Z=g.matrix;if(0!=o){const W=Z.a,F=Z.c,E=Z.b,v=Z.d;let a=Math.atan2(h,I)+f;a>LW.PI?a-=LW.PI2:a<-LW.PI&&(a+=LW.PI2),a*=o;const G=Math.cos(a),L=Math.sin(a);Z.a=G*W-L*E,Z.c=G*F-L*v,Z.b=L*W+G*E,Z.d=L*F+G*v}if(G){const o=this.temp;L.localToWorld(o.set(this.data.offsetX,this.data.offsetY)),Z.tx+=o.x*W,Z.ty+=o.y*F}if(0!=E){const o=(Math.sqrt(I*I+h*h)-1+this.data.offsetScaleX)*E+1;Z.a*=o,Z.b*=o}if(0!=v){const o=(Math.sqrt(l*l+p*p)-1+this.data.offsetScaleY)*v+1;Z.c*=o,Z.d*=o}if(a>0){let o=Math.atan2(p,l)-Math.atan2(h,I);o>LW.PI?o-=LW.PI2:o<-LW.PI&&(o+=LW.PI2);const W=Z.c,F=Z.d;o=Math.atan2(F,W)+(o-LW.PI/2+A)*a;const E=Math.sqrt(W*W+F*F);Z.c=Math.cos(o)*E,Z.d=Math.sin(o)*E}g.updateAppliedTransform()}}applyAbsoluteLocal(){const o=this.mixRotate,W=this.mixX,F=this.mixY,E=this.mixScaleX,v=this.mixScaleY,a=this.mixShearY,G=this.target,L=this.bones;for(let U=0,I=L.length;U<I;U++){const I=L[U];let l=I.arotation;if(0!=o){let W=G.arotation-l+this.data.offsetRotation;W-=360*(16384-(16384.499999999996-W/360|0)),l+=W*o}let h=I.ax,p=I.ay;h+=(G.ax-h+this.data.offsetX)*W,p+=(G.ay-p+this.data.offsetY)*F;let g=I.ascaleX,f=I.ascaleY;0!=E&&0!=g&&(g=(g+(G.ascaleX-g+this.data.offsetScaleX)*E)/g),0!=v&&0!=f&&(f=(f+(G.ascaleY-f+this.data.offsetScaleY)*v)/f);let A=I.ashearY;if(0!=a){let o=G.ashearY-A+this.data.offsetShearY;o-=360*(16384-(16384.499999999996-o/360|0)),A+=o*a}I.updateWorldTransformWith(h,p,l,g,f,I.ashearX,A)}}applyRelativeLocal(){const o=this.mixRotate,W=this.mixX,F=this.mixY,E=this.mixScaleX,v=this.mixScaleY,a=this.mixShearY,G=this.target,L=this.bones;for(let U=0,I=L.length;U<I;U++){const I=L[U],l=I.arotation+(G.arotation+this.data.offsetRotation)*o,h=I.ax+(G.ax+this.data.offsetX)*W,p=I.ay+(G.ay+this.data.offsetY)*F,g=I.ascaleX*((G.ascaleX-1+this.data.offsetScaleX)*E+1),f=I.ascaleY*((G.ascaleY-1+this.data.offsetScaleY)*v+1),A=I.ashearY+(G.ashearY+this.data.offsetShearY)*a;I.updateWorldTransformWith(h,p,l,g,f,I.ashearX,A)}}}const kG=class{constructor(o){if(this._updateCache=new Array,this.skin=null,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!o)throw new Error("data cannot be null.");this.data=o,this.bones=new Array;for(let W=0;W<o.bones.length;W++){const F=o.bones[W];let E;if(F.parent){const o=this.bones[F.parent.index];E=new EG(F,this,o),o.children.push(E)}else E=new EG(F,this,null);this.bones.push(E)}this.slots=new Array,this.drawOrder=new Array;for(let W=0;W<o.slots.length;W++){const F=o.slots[W],E=this.bones[F.boneData.index],v=new fG(F,E);this.slots.push(v),this.drawOrder.push(v)}this.ikConstraints=new Array;for(let W=0;W<o.ikConstraints.length;W++){const F=o.ikConstraints[W];this.ikConstraints.push(new UG(F,this))}this.transformConstraints=new Array;for(let W=0;W<o.transformConstraints.length;W++){const F=o.transformConstraints[W];this.transformConstraints.push(new AG(F,this))}this.pathConstraints=new Array;for(let W=0;W<o.pathConstraints.length;W++){const F=o.pathConstraints[W];this.pathConstraints.push(new gG(F,this))}this.color=new aW(1,1,1,1),this.updateCache()}updateCache(){this._updateCache.length=0;const o=this.bones;for(let W=0,F=o.length;W<F;W++){const F=o[W];F.sorted=F.data.skinRequired,F.active=!F.sorted}if(this.skin){const o=this.skin.bones;for(let W=0,F=this.skin.bones.length;W<F;W++){let F=this.bones[o[W].index];do{F.sorted=!1,F.active=!0,F=F.parent}while(F)}}const W=this.ikConstraints,F=this.transformConstraints,E=this.pathConstraints,v=W.length,a=F.length,G=E.length,L=v+a+G;o:for(let o=0;o<L;o++){for(let F=0;F<v;F++){const E=W[F];if(E.data.order==o){this.sortIkConstraint(E);continue o}}for(let W=0;W<a;W++){const E=F[W];if(E.data.order==o){this.sortTransformConstraint(E);continue o}}for(let W=0;W<G;W++){const F=E[W];if(F.data.order==o){this.sortPathConstraint(F);continue o}}}for(let W=0,F=o.length;W<F;W++)this.sortBone(o[W])}sortIkConstraint(o){if(o.active=o.target.isActive()&&(!o.data.skinRequired||this.skin&&pW.contains(this.skin.constraints,o.data,!0)),!o.active)return;const W=o.target;this.sortBone(W);const F=o.bones,E=F[0];if(this.sortBone(E),1==F.length)this._updateCache.push(o),this.sortReset(E.children);else{const W=F[F.length-1];this.sortBone(W),this._updateCache.push(o),this.sortReset(E.children),W.sorted=!0}}sortPathConstraint(o){if(o.active=o.target.bone.isActive()&&(!o.data.skinRequired||this.skin&&pW.contains(this.skin.constraints,o.data,!0)),!o.active)return;const W=o.target,F=W.data.index,E=W.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,F,E),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,F,E);for(let o=0,W=this.data.skins.length;o<W;o++)this.sortPathConstraintAttachment(this.data.skins[o],F,E);const v=W.getAttachment();v instanceof uv&&this.sortPathConstraintAttachmentWith(v,E);const a=o.bones,G=a.length;for(let o=0;o<G;o++)this.sortBone(a[o]);this._updateCache.push(o);for(let o=0;o<G;o++)this.sortReset(a[o].children);for(let o=0;o<G;o++)a[o].sorted=!0}sortTransformConstraint(o){if(o.active=o.target.isActive()&&(!o.data.skinRequired||this.skin&&pW.contains(this.skin.constraints,o.data,!0)),!o.active)return;this.sortBone(o.target);const W=o.bones,F=W.length;if(o.data.local)for(let o=0;o<F;o++){const F=W[o];this.sortBone(F.parent),this.sortBone(F)}else for(let o=0;o<F;o++)this.sortBone(W[o]);this._updateCache.push(o);for(let o=0;o<F;o++)this.sortReset(W[o].children);for(let o=0;o<F;o++)W[o].sorted=!0}sortPathConstraintAttachment(o,W,F){const E=o.attachments[W];if(E)for(const o in E)this.sortPathConstraintAttachmentWith(E[o],F)}sortPathConstraintAttachmentWith(o,W){if(!(o instanceof uv))return;const F=o.bones;if(F){const o=this.bones;for(let W=0,E=F.length;W<E;){let E=F[W++];for(E+=W;W<E;)this.sortBone(o[F[W++]])}}else this.sortBone(W)}sortBone(o){if(!o)return;if(o.sorted)return;const W=o.parent;W&&this.sortBone(W),o.sorted=!0,this._updateCache.push(o)}sortReset(o){for(let W=0,F=o.length;W<F;W++){const F=o[W];F.active&&(F.sorted&&this.sortReset(F.children),F.sorted=!1)}}updateWorldTransform(){const o=this.bones;for(let W=0,F=o.length;W<F;W++){const F=o[W];F.ax=F.x,F.ay=F.y,F.arotation=F.rotation,F.ascaleX=F.scaleX,F.ascaleY=F.scaleY,F.ashearX=F.shearX,F.ashearY=F.shearY}const W=this._updateCache;for(let o=0,F=W.length;o<F;o++)W[o].update()}updateWorldTransformWith(o){const W=this.getRootBone(),F=o.matrix.a,E=o.matrix.c,v=o.matrix.b,a=o.matrix.d;W.matrix.tx=F*this.x+E*this.y+o.worldX,W.matrix.ty=v*this.x+a*this.y+o.worldY;const G=W.rotation+90+W.shearY,L=LW.cosDeg(W.rotation+W.shearX)*W.scaleX,U=LW.cosDeg(G)*W.scaleY,I=LW.sinDeg(W.rotation+W.shearX)*W.scaleX,l=LW.sinDeg(G)*W.scaleY,h=this.scaleX,p=kW?-this.scaleY:this.scaleY;W.matrix.a=(F*L+E*I)*h,W.matrix.c=(F*U+E*l)*h,W.matrix.b=(v*L+a*I)*p,W.matrix.d=(v*U+a*l)*p;const g=this._updateCache;for(let o=0,F=g.length;o<F;o++){const F=g[o];F!=W&&F.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){const o=this.bones;for(let W=0,F=o.length;W<F;W++)o[W].setToSetupPose();const W=this.ikConstraints;for(let o=0,F=W.length;o<F;o++){const F=W[o];F.mix=F.data.mix,F.softness=F.data.softness,F.bendDirection=F.data.bendDirection,F.compress=F.data.compress,F.stretch=F.data.stretch}const F=this.transformConstraints;for(let o=0,W=F.length;o<W;o++){const W=F[o],E=W.data;W.mixRotate=E.mixRotate,W.mixX=E.mixX,W.mixY=E.mixY,W.mixScaleX=E.mixScaleX,W.mixScaleY=E.mixScaleY,W.mixShearY=E.mixShearY}const E=this.pathConstraints;for(let o=0,W=E.length;o<W;o++){const W=E[o],F=W.data;W.position=F.position,W.spacing=F.spacing,W.mixRotate=F.mixRotate,W.mixX=F.mixX,W.mixY=F.mixY}}setSlotsToSetupPose(){const o=this.slots;pW.arrayCopy(o,0,this.drawOrder,0,o.length);for(let W=0,F=o.length;W<F;W++)o[W].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(o){if(!o)throw new Error("boneName cannot be null.");const W=this.bones;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.data.name==o)return E}return null}findBoneIndex(o){if(!o)throw new Error("boneName cannot be null.");const W=this.bones;for(let F=0,E=W.length;F<E;F++)if(W[F].data.name==o)return F;return-1}findSlot(o){if(!o)throw new Error("slotName cannot be null.");const W=this.slots;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.data.name==o)return E}return null}findSlotIndex(o){if(!o)throw new Error("slotName cannot be null.");const W=this.slots;for(let F=0,E=W.length;F<E;F++)if(W[F].data.name==o)return F;return-1}setSkinByName(o){const W=this.data.findSkin(o);if(!W)throw new Error(`Skin not found: ${o}`);this.setSkin(W)}setSkin(o){if(o!=this.skin){if(o)if(this.skin)o.attachAll(this,this.skin);else{const W=this.slots;for(let F=0,E=W.length;F<E;F++){const E=W[F],v=E.data.attachmentName;if(v){const W=o.getAttachment(F,v);W&&E.setAttachment(W)}}}this.skin=o,this.updateCache()}}getAttachmentByName(o,W){const F=this.data.findSlot(o);if(!F)throw new Error(`Can't find slot with name ${o}`);return this.getAttachment(F.index,W)}getAttachment(o,W){if(!W)throw new Error("attachmentName cannot be null.");if(this.skin){const F=this.skin.getAttachment(o,W);if(F)return F}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(o,W):null}setAttachment(o,W){if(!o)throw new Error("slotName cannot be null.");const F=this.slots;for(let E=0,v=F.length;E<v;E++){const v=F[E];if(v.data.name==o){let F=null;if(W&&(F=this.getAttachment(E,W),!F))throw new Error(`Attachment not found: ${W}, for slot: ${o}`);return void v.setAttachment(F)}}throw new Error(`Slot not found: ${o}`)}findIkConstraint(o){if(!o)throw new Error("constraintName cannot be null.");const W=this.ikConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.data.name==o)return E}return null}findTransformConstraint(o){if(!o)throw new Error("constraintName cannot be null.");const W=this.transformConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.data.name==o)return E}return null}findPathConstraint(o){if(!o)throw new Error("constraintName cannot be null.");const W=this.pathConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.data.name==o)return E}return null}getBoundsRect(){const o=new fW,W=new fW;return this.getBounds(o,W),{x:o.x,y:o.y,width:W.x,height:W.y}}getBounds(o,W,F=new Array(2)){if(!o)throw new Error("offset cannot be null.");if(!W)throw new Error("size cannot be null.");const E=this.drawOrder;let v=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,G=Number.NEGATIVE_INFINITY,L=Number.NEGATIVE_INFINITY;for(let o=0,W=E.length;o<W;o++){const W=E[o];if(!W.bone.active)continue;let U=0,I=null;const l=W.getAttachment();if(l instanceof Qv)U=8,I=pW.setArraySize(F,U,0),l.computeWorldVertices(W,I,0,2);else if(l instanceof nv){const o=l;U=o.worldVerticesLength,I=pW.setArraySize(F,U,0),o.computeWorldVertices(W,0,U,I,0,2)}if(I)for(let o=0,W=I.length;o<W;o+=2){const W=I[o],F=I[o+1];v=Math.min(v,W),a=Math.min(a,F),G=Math.max(G,W),L=Math.max(L,F)}}o.set(v,a),W.set(G-v,L-a)}get flipX(){return-1==this.scaleX}set flipX(o){kG.deprecatedWarning1||(kG.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=o?1:-1}get flipY(){return-1==this.scaleY}set flipY(o){kG.deprecatedWarning1||(kG.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=o?1:-1}};let ZG=kG;ZG.deprecatedWarning1=!1;class PG{constructor(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}findBone(o){if(!o)throw new Error("boneName cannot be null.");const W=this.bones;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findBoneIndex(o){if(!o)throw new Error("boneName cannot be null.");const W=this.bones;for(let F=0,E=W.length;F<E;F++)if(W[F].name==o)return F;return-1}findSlot(o){if(!o)throw new Error("slotName cannot be null.");const W=this.slots;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findSlotIndex(o){if(!o)throw new Error("slotName cannot be null.");const W=this.slots;for(let F=0,E=W.length;F<E;F++)if(W[F].name==o)return F;return-1}findSkin(o){if(!o)throw new Error("skinName cannot be null.");const W=this.skins;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findEvent(o){if(!o)throw new Error("eventDataName cannot be null.");const W=this.events;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findAnimation(o){if(!o)throw new Error("animationName cannot be null.");const W=this.animations;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findIkConstraint(o){if(!o)throw new Error("constraintName cannot be null.");const W=this.ikConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findTransformConstraint(o){if(!o)throw new Error("constraintName cannot be null.");const W=this.transformConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findPathConstraint(o){if(!o)throw new Error("constraintName cannot be null.");const W=this.pathConstraints;for(let F=0,E=W.length;F<E;F++){const E=W[F];if(E.name==o)return E}return null}findPathConstraintIndex(o){if(null==o)throw new Error("pathConstraintName cannot be null.");const W=this.pathConstraints;for(let F=0,E=W.length;F<E;F++)if(W[F].name==o)return F;return-1}}class yG{constructor(o,W,F){if(this.index=0,this.color=new aW(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=Xo.B9.NORMAL,o<0)throw new Error("index must be >= 0.");if(!W)throw new Error("name cannot be null.");if(!F)throw new Error("boneData cannot be null.");this.index=o,this.name=W,this.boneData=F}}class zG extends aG{constructor(o){super(o,0,!1),this.bones=new Array,this._target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}set target(o){this._target=o}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class xG{constructor(o,W,F){this.slotIndex=o,this.name=W,this.attachment=F}}class NG{constructor(o){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!o)throw new Error("name cannot be null.");this.name=o}setAttachment(o,W,F){if(!F)throw new Error("attachment cannot be null.");const E=this.attachments;o>=E.length&&(E.length=o+1),E[o]||(E[o]={}),E[o][W]=F}addSkin(o){for(let W=0;W<o.bones.length;W++){const F=o.bones[W];let E=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==F){E=!0;break}E||this.bones.push(F)}for(let W=0;W<o.constraints.length;W++){const F=o.constraints[W];let E=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==F){E=!0;break}E||this.constraints.push(F)}const W=o.getAttachments();for(let o=0;o<W.length;o++){const F=W[o];this.setAttachment(F.slotIndex,F.name,F.attachment)}}copySkin(o){for(let W=0;W<o.bones.length;W++){const F=o.bones[W];let E=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==F){E=!0;break}E||this.bones.push(F)}for(let W=0;W<o.constraints.length;W++){const F=o.constraints[W];let E=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==F){E=!0;break}E||this.constraints.push(F)}const W=o.getAttachments();for(let o=0;o<W.length;o++){const F=W[o];F.attachment&&(F.attachment instanceof nv?(F.attachment=F.attachment.newLinkedMesh(),this.setAttachment(F.slotIndex,F.name,F.attachment)):(F.attachment=F.attachment.copy(),this.setAttachment(F.slotIndex,F.name,F.attachment)))}}getAttachment(o,W){const F=this.attachments[o];return F?F[W]:null}removeAttachment(o,W){const F=this.attachments[o];F&&delete F[W]}getAttachments(){const o=new Array;for(let W=0;W<this.attachments.length;W++){const F=this.attachments[W];if(F)for(const E in F){const v=F[E];v&&o.push(new xG(W,E,v))}}return o}getAttachmentsForSlot(o,W){const F=this.attachments[o];if(F)for(const E in F){const v=F[E];v&&W.push(new xG(o,E,v))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(o,W){let F=0;for(let E=0;E<o.slots.length;E++){const v=o.slots[E],a=v.getAttachment();if(a&&F<W.attachments.length){const o=W.attachments[F];for(const W in o)if(a==o[W]){const o=this.getAttachment(F,W);o&&v.setAttachment(o);break}}F++}}}class eG{constructor(o){this.ver40=!1,this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=o}readSkeletonData(o){const W=this.scale,F=new PG;F.name="";const E=new To(o),v=E.readInt32(),a=E.readInt32();F.hash=0==a&&0==v?null:a.toString(16)+v.toString(16),F.version=E.readString();const G=F.version.substr(0,3);if("4.0"!==G&&"4.1"!==G){const o=`Spine 4.1 loader cant load version ${F.version}. Please configure your pixi-spine bundle`;console.error(o)}this.ver40="4.0"===G,F.x=E.readFloat(),F.y=E.readFloat(),F.width=E.readFloat(),F.height=E.readFloat();const L=E.readBoolean();L&&(F.fps=E.readFloat(),F.imagesPath=E.readString(),F.audioPath=E.readString());let U=0;U=E.readInt(!0);for(let o=0;o<U;o++){const o=E.readString();if(!o)throw new Error("String in string table must not be null.");E.strings.push(o)}U=E.readInt(!0);for(let o=0;o<U;o++){const v=E.readString();if(!v)throw new Error("Bone name must not be null.");const a=0==o?null:F.bones[E.readInt(!0)],G=new vG(o,v,a);G.rotation=E.readFloat(),G.x=E.readFloat()*W,G.y=E.readFloat()*W,G.scaleX=E.readFloat(),G.scaleY=E.readFloat(),G.shearX=E.readFloat(),G.shearY=E.readFloat(),G.length=E.readFloat()*W,G.transformMode=E.readInt(!0),G.skinRequired=E.readBoolean(),L&&aW.rgba8888ToColor(G.color,E.readInt32()),F.bones.push(G)}U=E.readInt(!0);for(let o=0;o<U;o++){const W=E.readString();if(!W)throw new Error("Slot name must not be null.");const v=F.bones[E.readInt(!0)],a=new yG(o,W,v);aW.rgba8888ToColor(a.color,E.readInt32());const G=E.readInt32();-1!=G&&aW.rgb888ToColor(a.darkColor=new aW,G),a.attachmentName=E.readStringRef(),a.blendMode=E.readInt(!0),F.slots.push(a)}U=E.readInt(!0);for(let o,v=0;v<U;v++){const v=E.readString();if(!v)throw new Error("IK constraint data name must not be null.");const a=new IG(v);a.order=E.readInt(!0),a.skinRequired=E.readBoolean(),o=E.readInt(!0);for(let W=0;W<o;W++)a.bones.push(F.bones[E.readInt(!0)]);a.target=F.bones[E.readInt(!0)],a.mix=E.readFloat(),a.softness=E.readFloat()*W,a.bendDirection=E.readByte(),a.compress=E.readBoolean(),a.stretch=E.readBoolean(),a.uniform=E.readBoolean(),F.ikConstraints.push(a)}U=E.readInt(!0);for(let o,v=0;v<U;v++){const v=E.readString();if(!v)throw new Error("Transform constraint data name must not be null.");const a=new zG(v);a.order=E.readInt(!0),a.skinRequired=E.readBoolean(),o=E.readInt(!0);for(let W=0;W<o;W++)a.bones.push(F.bones[E.readInt(!0)]);a.target=F.bones[E.readInt(!0)],a.local=E.readBoolean(),a.relative=E.readBoolean(),a.offsetRotation=E.readFloat(),a.offsetX=E.readFloat()*W,a.offsetY=E.readFloat()*W,a.offsetScaleX=E.readFloat(),a.offsetScaleY=E.readFloat(),a.offsetShearY=E.readFloat(),a.mixRotate=E.readFloat(),a.mixX=E.readFloat(),a.mixY=E.readFloat(),a.mixScaleX=E.readFloat(),a.mixScaleY=E.readFloat(),a.mixShearY=E.readFloat(),F.transformConstraints.push(a)}U=E.readInt(!0);for(let o,v=0;v<U;v++){const v=E.readString();if(!v)throw new Error("Path constraint data name must not be null.");const a=new lG(v);a.order=E.readInt(!0),a.skinRequired=E.readBoolean(),o=E.readInt(!0);for(let W=0;W<o;W++)a.bones.push(F.bones[E.readInt(!0)]);a.target=F.slots[E.readInt(!0)],a.positionMode=E.readInt(!0),a.spacingMode=E.readInt(!0),a.rotateMode=E.readInt(!0),a.offsetRotation=E.readFloat(),a.position=E.readFloat(),a.positionMode==co.Fixed&&(a.position*=W),a.spacing=E.readFloat(),a.spacingMode!=hG.Length&&a.spacingMode!=hG.Fixed||(a.spacing*=W),a.mixRotate=E.readFloat(),a.mixX=E.readFloat(),a.mixY=E.readFloat(),F.pathConstraints.push(a)}const I=this.readSkin(E,F,!0,L);I&&(F.defaultSkin=I,F.skins.push(I));{let o=F.skins.length;for(pW.setArraySize(F.skins,U=o+E.readInt(!0));o<U;o++){const W=this.readSkin(E,F,!1,L);if(!W)throw new Error("readSkin() should not have returned null.");F.skins[o]=W}}U=this.linkedMeshes.length;for(let o=0;o<U;o++){const W=this.linkedMeshes[o],E=W.skin?F.findSkin(W.skin):F.defaultSkin;if(!E)throw new Error("Not skin found for linked mesh.");if(!W.parent)throw new Error("Linked mesh parent must not be null");const v=E.getAttachment(W.slotIndex,W.parent);if(!v)throw new Error(`Parent mesh not found: ${W.parent}`);W.mesh.timelineAttachment=W.inheritTimeline?v:W.mesh,W.mesh.setParentMesh(v)}this.linkedMeshes.length=0,U=E.readInt(!0);for(let o=0;o<U;o++){const o=E.readStringRef();if(!o)throw new Error;const W=new LG(o);W.intValue=E.readInt(!1),W.floatValue=E.readFloat(),W.stringValue=E.readString(),W.audioPath=E.readString(),W.audioPath&&(W.volume=E.readFloat(),W.balance=E.readFloat()),F.events.push(W)}U=E.readInt(!0);for(let o=0;o<U;o++){const o=E.readString();if(!o)throw new Error("Animatio name must not be null.");F.animations.push(this.readAnimation(E,o,F))}return F}readSkin(o,W,F,E){let v=null,a=0;if(F){if(a=o.readInt(!0),0==a)return null;v=new NG("default")}else{const F=o.readStringRef();if(!F)throw new Error("Skin name must not be null.");v=new NG(F),v.bones.length=o.readInt(!0);for(let F=0,E=v.bones.length;F<E;F++)v.bones[F]=W.bones[o.readInt(!0)];for(let F=0,E=o.readInt(!0);F<E;F++)v.constraints.push(W.ikConstraints[o.readInt(!0)]);for(let F=0,E=o.readInt(!0);F<E;F++)v.constraints.push(W.transformConstraints[o.readInt(!0)]);for(let F=0,E=o.readInt(!0);F<E;F++)v.constraints.push(W.pathConstraints[o.readInt(!0)]);a=o.readInt(!0)}for(let F=0;F<a;F++){const F=o.readInt(!0);for(let a=0,G=o.readInt(!0);a<G;a++){const a=o.readStringRef();if(!a)throw new Error("Attachment name must not be null");const G=this.readAttachment(o,W,v,F,a,E);G&&v.setAttachment(F,a,G)}}return v}readAttachment(o,W,F,E,v,a){const G=this.scale;let L=o.readStringRef();switch(L||(L=v),o.readByte()){case Ko.Region:{let W=o.readStringRef();const E=o.readFloat(),v=o.readFloat(),a=o.readFloat(),U=o.readFloat(),I=o.readFloat(),l=o.readFloat(),h=o.readFloat(),p=o.readInt32(),g=this.readSequence(o);W||(W=L);const f=this.attachmentLoader.newRegionAttachment(F,L,W,g);return f?(f.path=W,f.x=v*G,f.y=a*G,f.scaleX=U,f.scaleY=I,f.rotation=E,f.width=l*G,f.height=h*G,aW.rgba8888ToColor(f.color,p),f.sequence=g,null==g&&f.updateRegion(),f):null}case Ko.BoundingBox:{const W=o.readInt(!0),E=this.readVertices(o,W),v=a?o.readInt32():0,G=this.attachmentLoader.newBoundingBoxAttachment(F,L);return G?(G.worldVerticesLength=W<<1,G.vertices=E.vertices,G.bones=E.bones,a&&aW.rgba8888ToColor(G.color,v),G):null}case Ko.Mesh:{let W=o.readStringRef();const E=o.readInt32(),v=o.readInt(!0),U=this.readFloatArray(o,v<<1,1),I=this.readShortArray(o),l=this.readVertices(o,v),h=o.readInt(!0),p=this.readSequence(o);let g=[],f=0,A=0;a&&(g=this.readShortArray(o),f=o.readFloat(),A=o.readFloat()),W||(W=L);const k=this.attachmentLoader.newMeshAttachment(F,L,W,p);return k?(k.path=W,aW.rgba8888ToColor(k.color,E),k.bones=l.bones,k.vertices=l.vertices,k.worldVerticesLength=v<<1,k.triangles=I,k.regionUVs=new Float32Array(U),k.hullLength=h<<1,k.sequence=p,a&&(k.edges=g,k.width=f*G,k.height=A*G),k):null}case Ko.LinkedMesh:{let W=o.readStringRef();const v=o.readInt32(),U=o.readStringRef(),I=o.readStringRef(),l=o.readBoolean(),h=this.readSequence(o);let p=0,g=0;a&&(p=o.readFloat(),g=o.readFloat()),W||(W=L);const f=this.attachmentLoader.newMeshAttachment(F,L,W,h);return f?(f.path=W,aW.rgba8888ToColor(f.color,v),f.sequence=h,a&&(f.width=p*G,f.height=g*G),this.linkedMeshes.push(new tG(f,U,E,I,l)),f):null}case Ko.Path:{const W=o.readBoolean(),E=o.readBoolean(),v=o.readInt(!0),U=this.readVertices(o,v),I=pW.newArray(v/3,0);for(let W=0,F=I.length;W<F;W++)I[W]=o.readFloat()*G;const l=a?o.readInt32():0,h=this.attachmentLoader.newPathAttachment(F,L);return h?(h.closed=W,h.constantSpeed=E,h.worldVerticesLength=v<<1,h.vertices=U.vertices,h.bones=U.bones,h.lengths=I,a&&aW.rgba8888ToColor(h.color,l),h):null}case Ko.Point:{const W=o.readFloat(),E=o.readFloat(),v=o.readFloat(),U=a?o.readInt32():0,I=this.attachmentLoader.newPointAttachment(F,L);return I?(I.x=E*G,I.y=v*G,I.rotation=W,a&&aW.rgba8888ToColor(I.color,U),I):null}case Ko.Clipping:{const E=o.readInt(!0),v=o.readInt(!0),G=this.readVertices(o,v),U=a?o.readInt32():0,I=this.attachmentLoader.newClippingAttachment(F,L);return I?(I.endSlot=W.slots[E],I.worldVerticesLength=v<<1,I.vertices=G.vertices,I.bones=G.bones,a&&aW.rgba8888ToColor(I.color,U),I):null}}return null}readSequence(o){if(this.ver40||!o.readBoolean())return null;const W=new qv(o.readInt(!0));return W.start=o.readInt(!0),W.digits=o.readInt(!0),W.setupIndex=o.readInt(!0),W}readDeformTimelineType(o){return this.ver40?SG:o.readByte()}readVertices(o,W){const F=this.scale,E=W<<1,v=new mG;if(!o.readBoolean())return v.vertices=this.readFloatArray(o,E,F),v;const a=new Array,G=new Array;for(let E=0;E<W;E++){const W=o.readInt(!0);G.push(W);for(let E=0;E<W;E++)G.push(o.readInt(!0)),a.push(o.readFloat()*F),a.push(o.readFloat()*F),a.push(o.readFloat())}return v.vertices=pW.toFloatArray(a),v.bones=G,v}readFloatArray(o,W,F){const E=new Array(W);if(1==F)for(let F=0;F<W;F++)E[F]=o.readFloat();else for(let v=0;v<W;v++)E[v]=o.readFloat()*F;return E}readShortArray(o){const W=o.readInt(!0),F=new Array(W);for(let E=0;E<W;E++)F[E]=o.readShort();return F}readAnimation(o,W,F){o.readInt(!0);const E=new Array,v=this.scale;for(let W=0,F=o.readInt(!0);W<F;W++){const W=o.readInt(!0);for(let F=0,v=o.readInt(!0);F<v;F++){const F=o.readByte(),v=o.readInt(!0),a=v-1;switch(F){case CG:{const F=new ja(v,W);for(let W=0;W<v;W++)F.setFrame(W,o.readFloat(),o.readStringRef());E.push(F);break}case qG:{const F=o.readInt(!0),G=new ea(v,F,W);let L=o.readFloat(),U=o.readUnsignedByte()/255,I=o.readUnsignedByte()/255,l=o.readUnsignedByte()/255,h=o.readUnsignedByte()/255;for(let W=0,F=0;G.setFrame(W,L,U,I,l,h),W!=a;W++){const E=o.readFloat(),v=o.readUnsignedByte()/255,a=o.readUnsignedByte()/255,p=o.readUnsignedByte()/255,g=o.readUnsignedByte()/255;switch(o.readByte()){case DG:G.setStepped(W);break;case MG:jG(o,G,F++,W,0,L,E,U,v,1),jG(o,G,F++,W,1,L,E,I,a,1),jG(o,G,F++,W,2,L,E,l,p,1),jG(o,G,F++,W,3,L,E,h,g,1)}L=E,U=v,I=a,l=p,h=g}E.push(G);break}case cG:{const F=o.readInt(!0),G=new ta(v,F,W);let L=o.readFloat(),U=o.readUnsignedByte()/255,I=o.readUnsignedByte()/255,l=o.readUnsignedByte()/255;for(let W=0,F=0;G.setFrame(W,L,U,I,l),W!=a;W++){const E=o.readFloat(),v=o.readUnsignedByte()/255,a=o.readUnsignedByte()/255,h=o.readUnsignedByte()/255;switch(o.readByte()){case DG:G.setStepped(W);break;case MG:jG(o,G,F++,W,0,L,E,U,v,1),jG(o,G,F++,W,1,L,E,I,a,1),jG(o,G,F++,W,2,L,E,l,h,1)}L=E,U=v,I=a,l=h}E.push(G);break}case _G:{const F=o.readInt(!0),G=new ra(v,F,W);let L=o.readFloat(),U=o.readUnsignedByte()/255,I=o.readUnsignedByte()/255,l=o.readUnsignedByte()/255,h=o.readUnsignedByte()/255,p=o.readUnsignedByte()/255,g=o.readUnsignedByte()/255,f=o.readUnsignedByte()/255;for(let W=0,F=0;G.setFrame(W,L,U,I,l,h,p,g,f),W!=a;W++){const E=o.readFloat(),v=o.readUnsignedByte()/255,a=o.readUnsignedByte()/255,A=o.readUnsignedByte()/255,k=o.readUnsignedByte()/255,Z=o.readUnsignedByte()/255,P=o.readUnsignedByte()/255,y=o.readUnsignedByte()/255;switch(o.readByte()){case DG:G.setStepped(W);break;case MG:jG(o,G,F++,W,0,L,E,U,v,1),jG(o,G,F++,W,1,L,E,I,a,1),jG(o,G,F++,W,2,L,E,l,A,1),jG(o,G,F++,W,3,L,E,h,k,1),jG(o,G,F++,W,4,L,E,p,Z,1),jG(o,G,F++,W,5,L,E,g,P,1),jG(o,G,F++,W,6,L,E,f,y,1)}L=E,U=v,I=a,l=A,h=k,p=Z,g=P,f=y}E.push(G);break}case OG:{const F=o.readInt(!0),G=new Ba(v,F,W);let L=o.readFloat(),U=o.readUnsignedByte()/255,I=o.readUnsignedByte()/255,l=o.readUnsignedByte()/255,h=o.readUnsignedByte()/255,p=o.readUnsignedByte()/255,g=o.readUnsignedByte()/255;for(let W=0,F=0;G.setFrame(W,L,U,I,l,h,p,g),W!=a;W++){const E=o.readFloat(),v=o.readUnsignedByte()/255,a=o.readUnsignedByte()/255,f=o.readUnsignedByte()/255,A=o.readUnsignedByte()/255,k=o.readUnsignedByte()/255,Z=o.readUnsignedByte()/255;switch(o.readByte()){case DG:G.setStepped(W);break;case MG:jG(o,G,F++,W,0,L,E,U,v,1),jG(o,G,F++,W,1,L,E,I,a,1),jG(o,G,F++,W,2,L,E,l,f,1),jG(o,G,F++,W,3,L,E,h,A,1),jG(o,G,F++,W,4,L,E,p,k,1),jG(o,G,F++,W,5,L,E,g,Z,1)}L=E,U=v,I=a,l=f,h=A,p=k,g=Z}E.push(G);break}case XG:{const F=new ma(v,o.readInt(!0),W);let G=o.readFloat(),L=o.readUnsignedByte()/255;for(let W=0,E=0;F.setFrame(W,G,L),W!=a;W++){const v=o.readFloat(),a=o.readUnsignedByte()/255;switch(o.readByte()){case DG:F.setStepped(W);break;case MG:jG(o,F,E++,W,0,G,v,L,a,1)}G=v,L=a}E.push(F)}}}}for(let W=0,F=o.readInt(!0);W<F;W++){const W=o.readInt(!0);for(let F=0,a=o.readInt(!0);F<a;F++){const F=o.readByte(),a=o.readInt(!0),G=o.readInt(!0);switch(F){case VG:E.push(rG(o,new ga(a,G,W),1));break;case wG:E.push(BG(o,new fa(a,G,W),v));break;case KG:E.push(rG(o,new Aa(a,G,W),v));break;case TG:E.push(rG(o,new ka(a,G,W),v));break;case dG:E.push(BG(o,new Za(a,G,W),1));break;case nG:E.push(rG(o,new Pa(a,G,W),1));break;case uG:E.push(rG(o,new ya(a,G,W),1));break;case $G:E.push(BG(o,new za(a,G,W),1));break;case YG:E.push(rG(o,new xa(a,G,W),1));break;case QG:E.push(rG(o,new Na(a,G,W),1))}}}for(let W=0,F=o.readInt(!0);W<F;W++){const W=o.readInt(!0),F=o.readInt(!0),a=F-1,G=new na(F,o.readInt(!0),W);let L=o.readFloat(),U=o.readFloat(),I=o.readFloat()*v;for(let W=0,F=0;G.setFrame(W,L,U,I,o.readByte(),o.readBoolean(),o.readBoolean()),W!=a;W++){const E=o.readFloat(),a=o.readFloat(),l=o.readFloat()*v;switch(o.readByte()){case DG:G.setStepped(W);break;case MG:jG(o,G,F++,W,0,L,E,U,a,1),jG(o,G,F++,W,1,L,E,I,l,v)}L=E,U=a,I=l}E.push(G)}for(let W=0,F=o.readInt(!0);W<F;W++){const W=o.readInt(!0),F=o.readInt(!0),v=F-1,a=new ua(F,o.readInt(!0),W);let G=o.readFloat(),L=o.readFloat(),U=o.readFloat(),I=o.readFloat(),l=o.readFloat(),h=o.readFloat(),p=o.readFloat();for(let W=0,F=0;a.setFrame(W,G,L,U,I,l,h,p),W!=v;W++){const E=o.readFloat(),v=o.readFloat(),g=o.readFloat(),f=o.readFloat(),A=o.readFloat(),k=o.readFloat(),Z=o.readFloat();switch(o.readByte()){case DG:a.setStepped(W);break;case MG:jG(o,a,F++,W,0,G,E,L,v,1),jG(o,a,F++,W,1,G,E,U,g,1),jG(o,a,F++,W,2,G,E,I,f,1),jG(o,a,F++,W,3,G,E,l,A,1),jG(o,a,F++,W,4,G,E,h,k,1),jG(o,a,F++,W,5,G,E,p,Z,1)}G=E,L=v,U=g,I=f,l=A,h=k,p=Z}E.push(a)}for(let W=0,a=o.readInt(!0);W<a;W++){const W=o.readInt(!0),a=F.pathConstraints[W];for(let F=0,G=o.readInt(!0);F<G;F++)switch(o.readByte()){case iG:E.push(rG(o,new $a(o.readInt(!0),o.readInt(!0),W),a.positionMode==co.Fixed?v:1));break;case RG:E.push(rG(o,new Ya(o.readInt(!0),o.readInt(!0),W),a.spacingMode==hG.Length||a.spacingMode==hG.Fixed?v:1));break;case JG:const F=new Qa(o.readInt(!0),o.readInt(!0),W);let G=o.readFloat(),L=o.readFloat(),U=o.readFloat(),I=o.readFloat();for(let W=0,E=0,v=F.getFrameCount()-1;F.setFrame(W,G,L,U,I),W!=v;W++){const v=o.readFloat(),a=o.readFloat(),l=o.readFloat(),h=o.readFloat();switch(o.readByte()){case DG:F.setStepped(W);break;case MG:jG(o,F,E++,W,0,G,v,L,a,1),jG(o,F,E++,W,1,G,v,U,l,1),jG(o,F,E++,W,2,G,v,I,h,1)}G=v,L=a,U=l,I=h}E.push(F)}}for(let W=0,a=o.readInt(!0);W<a;W++){const W=F.skins[o.readInt(!0)];for(let F=0,a=o.readInt(!0);F<a;F++){const F=o.readInt(!0);for(let a=0,G=o.readInt(!0);a<G;a++){const a=o.readStringRef();if(!a)throw new Error("attachmentName must not be null.");const G=W.getAttachment(F,a),L=this.readDeformTimelineType(o),U=o.readInt(!0),I=U-1;switch(L){case SG:{const W=G,a=W.bones,L=W.vertices,l=a?L.length/3*2:L.length,h=o.readInt(!0),p=new Va(U,h,F,W);let g=o.readFloat();for(let W=0,F=0;;W++){let E,G=o.readInt(!0);if(0==G)E=a?pW.newFloatArray(l):L;else{E=pW.newFloatArray(l);const W=o.readInt(!0);if(G+=W,1==v)for(let F=W;F<G;F++)E[F]=o.readFloat();else for(let F=W;F<G;F++)E[F]=o.readFloat()*v;if(!a)for(let o=0,W=E.length;o<W;o++)E[o]+=L[o]}if(p.setFrame(W,g,E),W==I)break;const U=o.readFloat();switch(o.readByte()){case DG:p.setStepped(W);break;case MG:jG(o,p,F++,W,0,g,U,0,1,1)}g=U}E.push(p);break}case sG:{const W=new qa(U,F,G);for(let F=0;F<U;F++){const E=o.readFloat(),v=o.readInt32();W.setFrame(F,E,Ov[15&v],v>>4,o.readFloat())}E.push(W);break}}}}}const a=o.readInt(!0);if(a>0){const W=new da(a),v=F.slots.length;for(let F=0;F<a;F++){const E=o.readFloat(),a=o.readInt(!0),G=pW.newArray(v,0);for(let o=v-1;o>=0;o--)G[o]=-1;const L=pW.newArray(v-a,0);let U=0,I=0;for(let W=0;W<a;W++){const W=o.readInt(!0);for(;U!=W;)L[I++]=U++;G[U+o.readInt(!0)]=U++}for(;U<v;)L[I++]=U++;for(let o=v-1;o>=0;o--)-1==G[o]&&(G[o]=L[--I]);W.setFrame(F,E,G)}E.push(W)}const G=o.readInt(!0);if(G>0){const W=new Ka(G);for(let E=0;E<G;E++){const v=o.readFloat(),a=F.events[o.readInt(!0)],G=new GG(v,a);G.intValue=o.readInt(!1),G.floatValue=o.readFloat(),G.stringValue=o.readBoolean()?o.readString():a.stringValue,G.data.audioPath&&(G.volume=o.readFloat(),G.balance=o.readFloat()),W.setFrame(E,G)}E.push(W)}let L=0;for(let o=0,W=E.length;o<W;o++)L=Math.max(L,E[o].getDuration());return new Xv(W,E,L)}}eG.BlendModeValues=[Xo.B9.NORMAL,Xo.B9.ADD,Xo.B9.MULTIPLY,Xo.B9.SCREEN];class tG{constructor(o,W,F,E,v){this.mesh=o,this.skin=W,this.slotIndex=F,this.parent=E,this.inheritTimeline=v}}class mG{constructor(o=null,W=null){this.bones=o,this.vertices=W}}function rG(o,W,F){let E=o.readFloat(),v=o.readFloat()*F;for(let a=0,G=0,L=W.getFrameCount()-1;W.setFrame(a,E,v),a!=L;a++){const L=o.readFloat(),U=o.readFloat()*F;switch(o.readByte()){case DG:W.setStepped(a);break;case MG:jG(o,W,G++,a,0,E,L,v,U,F)}E=L,v=U}return W}function BG(o,W,F){let E=o.readFloat(),v=o.readFloat()*F,a=o.readFloat()*F;for(let G=0,L=0,U=W.getFrameCount()-1;W.setFrame(G,E,v,a),G!=U;G++){const U=o.readFloat(),I=o.readFloat()*F,l=o.readFloat()*F;switch(o.readByte()){case DG:W.setStepped(G);break;case MG:jG(o,W,L++,G,0,E,U,v,I,F),jG(o,W,L++,G,1,E,U,a,l,F)}E=U,v=I,a=l}return W}function jG(o,W,F,E,v,a,G,L,U,I){W.setBezier(F,E,v,a,L,o.readFloat(),o.readFloat()*I,o.readFloat(),o.readFloat()*I,G,U)}const VG=0,wG=1,KG=2,TG=3,dG=4,nG=5,uG=6,$G=7,YG=8,QG=9,CG=0,qG=1,cG=2,_G=3,OG=4,XG=5,SG=0,sG=1,iG=0,RG=1,JG=2,DG=1,MG=2;class HG extends AW{}class bG{constructor(o){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=o}readSkeletonData(o){const W=this.scale,F=new PG,E="string"==typeof o?JSON.parse(o):o,v=E.skeleton;if(v){F.hash=v.hash,F.version=v.spine;const o=F.version.substr(0,3);if("4.0"!==o&&"4.1"!==o){const o=`Spine 4.1 loader cant load version ${v.spine}. Please configure your pixi-spine bundle`;console.error(o)}F.x=v.x,F.y=v.y,F.width=v.width,F.height=v.height,F.fps=v.fps,F.imagesPath=v.images}if(E.bones)for(let o=0;o<E.bones.length;o++){const v=E.bones[o];let a=null;const G=vL(v,"parent",null);if(null!=G&&(a=F.findBone(G),null==a))throw new Error(`Parent bone not found: ${G}`);const L=new vG(F.bones.length,v.name,a);L.length=vL(v,"length",0)*W,L.x=vL(v,"x",0)*W,L.y=vL(v,"y",0)*W,L.rotation=vL(v,"rotation",0),L.scaleX=vL(v,"scaleX",1),L.scaleY=vL(v,"scaleY",1),L.shearX=vL(v,"shearX",0),L.shearY=vL(v,"shearY",0),L.transformMode=pW.enumValue(Oo,vL(v,"transform","Normal")),L.skinRequired=vL(v,"skin",!1);const U=vL(v,"color",null);U&&L.color.setFromString(U),F.bones.push(L)}if(E.slots)for(let o=0;o<E.slots.length;o++){const W=E.slots[o],v=F.findBone(W.bone);if(!v)throw new Error(`Couldn't find bone ${W.bone} for slot ${W.name}`);const a=new yG(F.slots.length,W.name,v),G=vL(W,"color",null);G&&a.color.setFromString(G);const L=vL(W,"dark",null);L&&(a.darkColor=aW.fromString(L)),a.attachmentName=vL(W,"attachment",null),a.blendMode=bG.blendModeFromString(vL(W,"blend","normal")),F.slots.push(a)}if(E.ik)for(let o=0;o<E.ik.length;o++){const v=E.ik[o],a=new IG(v.name);a.order=vL(v,"order",0),a.skinRequired=vL(v,"skin",!1);for(let o=0;o<v.bones.length;o++){const W=v.bones[o],E=F.findBone(W);if(null==E)throw new Error(`IK bone not found: ${W}`);a.bones.push(E)}a.target=F.findBone(v.target),a.mix=vL(v,"mix",1),a.softness=vL(v,"softness",0)*W,a.bendDirection=vL(v,"bendPositive",!0)?1:-1,a.compress=vL(v,"compress",!1),a.stretch=vL(v,"stretch",!1),a.uniform=vL(v,"uniform",!1),F.ikConstraints.push(a)}if(E.transform)for(let o=0;o<E.transform.length;o++){const v=E.transform[o],a=new zG(v.name);a.order=vL(v,"order",0),a.skinRequired=vL(v,"skin",!1);for(let o=0;o<v.bones.length;o++){const W=v.bones[o],E=F.findBone(W);if(!E)throw new Error(`Couldn't find bone ${W} for transform constraint ${v.name}.`);a.bones.push(E)}const G=v.target,L=F.findBone(G);if(!L)throw new Error(`Couldn't find target bone ${G} for transform constraint ${v.name}.`);a.target=L,a.local=vL(v,"local",!1),a.relative=vL(v,"relative",!1),a.offsetRotation=vL(v,"rotation",0),a.offsetX=vL(v,"x",0)*W,a.offsetY=vL(v,"y",0)*W,a.offsetScaleX=vL(v,"scaleX",0),a.offsetScaleY=vL(v,"scaleY",0),a.offsetShearY=vL(v,"shearY",0),a.mixRotate=vL(v,"mixRotate",1),a.mixX=vL(v,"mixX",1),a.mixY=vL(v,"mixY",a.mixX),a.mixScaleX=vL(v,"mixScaleX",1),a.mixScaleY=vL(v,"mixScaleY",a.mixScaleX),a.mixShearY=vL(v,"mixShearY",1),F.transformConstraints.push(a)}if(E.path)for(let o=0;o<E.path.length;o++){const v=E.path[o],a=new lG(v.name);a.order=vL(v,"order",0),a.skinRequired=vL(v,"skin",!1);for(let o=0;o<v.bones.length;o++){const W=v.bones[o],E=F.findBone(W);if(!E)throw new Error(`Couldn't find bone ${W} for path constraint ${v.name}.`);a.bones.push(E)}const G=v.target,L=F.findSlot(G);if(!L)throw new Error(`Couldn't find target slot ${G} for path constraint ${v.name}.`);a.target=L,a.positionMode=pW.enumValue(co,vL(v,"positionMode","Percent")),a.spacingMode=pW.enumValue(hG,vL(v,"spacingMode","Length")),a.rotateMode=pW.enumValue(_o,vL(v,"rotateMode","Tangent")),a.offsetRotation=vL(v,"rotation",0),a.position=vL(v,"position",0),a.positionMode==co.Fixed&&(a.position*=W),a.spacing=vL(v,"spacing",0),a.spacingMode!=hG.Length&&a.spacingMode!=hG.Fixed||(a.spacing*=W),a.mixRotate=vL(v,"mixRotate",1),a.mixX=vL(v,"mixX",1),a.mixY=vL(v,"mixY",a.mixX),F.pathConstraints.push(a)}if(E.skins)for(let o=0;o<E.skins.length;o++){const W=E.skins[o],v=new NG(W.name);if(W.bones)for(let o=0;o<W.bones.length;o++){const E=W.bones[o],a=F.findBone(E);if(!a)throw new Error(`Couldn't find bone ${E} for skin ${W.name}.`);v.bones.push(a)}if(W.ik)for(let o=0;o<W.ik.length;o++){const E=W.ik[o],a=F.findIkConstraint(E);if(!a)throw new Error(`Couldn't find IK constraint ${E} for skin ${W.name}.`);v.constraints.push(a)}if(W.transform)for(let o=0;o<W.transform.length;o++){const E=W.transform[o],a=F.findTransformConstraint(E);if(!a)throw new Error(`Couldn't find transform constraint ${E} for skin ${W.name}.`);v.constraints.push(a)}if(W.path)for(let o=0;o<W.path.length;o++){const E=W.path[o],a=F.findPathConstraint(E);if(!a)throw new Error(`Couldn't find path constraint ${E} for skin ${W.name}.`);v.constraints.push(a)}for(const o in W.attachments){const E=F.findSlot(o);if(!E)throw new Error(`Couldn't find slot ${o} for skin ${W.name}.`);const a=W.attachments[o];for(const o in a){const W=this.readAttachment(a[o],v,E.index,o,F);W&&v.setAttachment(E.index,o,W)}}F.skins.push(v),"default"==v.name&&(F.defaultSkin=v)}for(let o=0,W=this.linkedMeshes.length;o<W;o++){const W=this.linkedMeshes[o],E=W.skin?F.findSkin(W.skin):F.defaultSkin;if(!E)throw new Error(`Skin not found: ${W.skin}`);const v=E.getAttachment(W.slotIndex,W.parent);if(!v)throw new Error(`Parent mesh not found: ${W.parent}`);W.mesh.timelineAttachment=W.inheritTimeline?v:W.mesh,W.mesh.setParentMesh(v)}if(this.linkedMeshes.length=0,E.events)for(const o in E.events){const W=E.events[o],v=new LG(o);v.intValue=vL(W,"int",0),v.floatValue=vL(W,"float",0),v.stringValue=vL(W,"string",""),v.audioPath=vL(W,"audio",null),v.audioPath&&(v.volume=vL(W,"volume",1),v.balance=vL(W,"balance",0)),F.events.push(v)}if(E.animations)for(const o in E.animations){const W=E.animations[o];this.readAnimation(W,o,F)}return F}readAttachment(o,W,F,E,v){const a=this.scale;switch(E=vL(o,"name",E),vL(o,"type","region")){case"region":{const F=vL(o,"path",E),v=this.readSequence(vL(o,"sequence",null)),G=this.attachmentLoader.newRegionAttachment(W,E,F,v);if(!G)return null;G.path=F,G.x=vL(o,"x",0)*a,G.y=vL(o,"y",0)*a,G.scaleX=vL(o,"scaleX",1),G.scaleY=vL(o,"scaleY",1),G.rotation=vL(o,"rotation",0),G.width=o.width*a,G.height=o.height*a,G.sequence=v;const L=vL(o,"color",null);return L&&G.color.setFromString(L),G}case"boundingbox":{const F=this.attachmentLoader.newBoundingBoxAttachment(W,E);if(!F)return null;this.readVertices(o,F,o.vertexCount<<1);const v=vL(o,"color",null);return v&&F.color.setFromString(v),F}case"mesh":case"linkedmesh":{const v=vL(o,"path",E),G=this.readSequence(vL(o,"sequence",null)),L=this.attachmentLoader.newMeshAttachment(W,E,v,G);if(!L)return null;L.path=v;const U=vL(o,"color",null);U&&L.color.setFromString(U),L.width=vL(o,"width",0)*a,L.height=vL(o,"height",0)*a,L.sequence=G;const I=vL(o,"parent",null);if(I)return this.linkedMeshes.push(new oL(L,vL(o,"skin",null),F,I,vL(o,"timelines",!0))),L;const l=o.uvs;return this.readVertices(o,L,l.length),L.triangles=o.triangles,L.regionUVs=new Float32Array(l),L.edges=vL(o,"edges",null),L.hullLength=2*vL(o,"hull",0),L}case"path":{const F=this.attachmentLoader.newPathAttachment(W,E);if(!F)return null;F.closed=vL(o,"closed",!1),F.constantSpeed=vL(o,"constantSpeed",!0);const v=o.vertexCount;this.readVertices(o,F,v<<1);const G=pW.newArray(v/3,0);for(let W=0;W<o.lengths.length;W++)G[W]=o.lengths[W]*a;F.lengths=G;const L=vL(o,"color",null);return L&&F.color.setFromString(L),F}case"point":{const F=this.attachmentLoader.newPointAttachment(W,E);if(!F)return null;F.x=vL(o,"x",0)*a,F.y=vL(o,"y",0)*a,F.rotation=vL(o,"rotation",0);const v=vL(o,"color",null);return v&&F.color.setFromString(v),F}case"clipping":{const F=this.attachmentLoader.newClippingAttachment(W,E);if(!F)return null;const a=vL(o,"end",null);if(null!=a){const o=v.findSlot(a);if(null==o)throw new Error(`Clipping end slot not found: ${a}`);F.endSlot=o}const G=o.vertexCount;this.readVertices(o,F,G<<1);const L=vL(o,"color",null);return L&&F.color.setFromString(L),F}}return null}readSequence(o){if(null==o)return null;const W=new qv(vL(o,"count",0));return W.start=vL(o,"start",1),W.digits=vL(o,"digits",0),W.setupIndex=vL(o,"setup",0),W}readVertices(o,W,F){const E=this.scale;W.worldVerticesLength=F;const v=o.vertices;if(F==v.length){const o=pW.toFloatArray(v);if(1!=E)for(let W=0,F=v.length;W<F;W++)o[W]*=E;return void(W.vertices=o)}const a=new Array,G=new Array;for(let o=0,W=v.length;o<W;){const W=v[o++];G.push(W);for(let F=o+4*W;o<F;o+=4)G.push(v[o]),a.push(v[o+1]*E),a.push(v[o+2]*E),a.push(v[o+3])}W.bones=G,W.vertices=pW.toFloatArray(a)}readAnimation(o,W,F){const E=this.scale,v=new Array;if(o.slots)for(const W in o.slots){const E=o.slots[W],a=F.findSlot(W);if(!a)throw new Error(`Slot not found: ${W}`);const G=a.index;for(const o in E){const W=E[o];if(!W)continue;const F=W.length;if("attachment"==o){const o=new ja(F,G);for(let E=0;E<F;E++){const F=W[E];o.setFrame(E,vL(F,"time",0),vL(F,"name",null))}v.push(o)}else if("rgba"==o){const o=new ea(F,F<<2,G);let E=W[0],a=vL(E,"time",0),L=aW.fromString(E.color);for(let F=0,v=0;;F++){o.setFrame(F,a,L.r,L.g,L.b,L.a);const G=W[F+1];if(!G){o.shrink(v);break}const U=vL(G,"time",0),I=aW.fromString(G.color),l=E.curve;l&&(v=EL(l,o,v,F,0,a,U,L.r,I.r,1),v=EL(l,o,v,F,1,a,U,L.g,I.g,1),v=EL(l,o,v,F,2,a,U,L.b,I.b,1),v=EL(l,o,v,F,3,a,U,L.a,I.a,1)),a=U,L=I,E=G}v.push(o)}else if("rgb"==o){const o=new ta(F,3*F,G);let E=W[0],a=vL(E,"time",0),L=aW.fromString(E.color);for(let F=0,v=0;;F++){o.setFrame(F,a,L.r,L.g,L.b);const G=W[F+1];if(!G){o.shrink(v);break}const U=vL(G,"time",0),I=aW.fromString(G.color),l=E.curve;l&&(v=EL(l,o,v,F,0,a,U,L.r,I.r,1),v=EL(l,o,v,F,1,a,U,L.g,I.g,1),v=EL(l,o,v,F,2,a,U,L.b,I.b,1)),a=U,L=I,E=G}v.push(o)}else if("alpha"==o)v.push(WL(W,new ma(F,F,G),0,1));else if("rgba2"==o){const o=new ra(F,7*F,G);let E=W[0],a=vL(E,"time",0),L=aW.fromString(E.light),U=aW.fromString(E.dark);for(let F=0,v=0;;F++){o.setFrame(F,a,L.r,L.g,L.b,L.a,U.r,U.g,U.b);const G=W[F+1];if(!G){o.shrink(v);break}const I=vL(G,"time",0),l=aW.fromString(G.light),h=aW.fromString(G.dark),p=E.curve;p&&(v=EL(p,o,v,F,0,a,I,L.r,l.r,1),v=EL(p,o,v,F,1,a,I,L.g,l.g,1),v=EL(p,o,v,F,2,a,I,L.b,l.b,1),v=EL(p,o,v,F,3,a,I,L.a,l.a,1),v=EL(p,o,v,F,4,a,I,U.r,h.r,1),v=EL(p,o,v,F,5,a,I,U.g,h.g,1),v=EL(p,o,v,F,6,a,I,U.b,h.b,1)),a=I,L=l,U=h,E=G}v.push(o)}else if("rgb2"==o){const o=new Ba(F,6*F,G);let E=W[0],a=vL(E,"time",0),L=aW.fromString(E.light),U=aW.fromString(E.dark);for(let F=0,v=0;;F++){o.setFrame(F,a,L.r,L.g,L.b,U.r,U.g,U.b);const G=W[F+1];if(!G){o.shrink(v);break}const I=vL(G,"time",0),l=aW.fromString(G.light),h=aW.fromString(G.dark),p=E.curve;p&&(v=EL(p,o,v,F,0,a,I,L.r,l.r,1),v=EL(p,o,v,F,1,a,I,L.g,l.g,1),v=EL(p,o,v,F,2,a,I,L.b,l.b,1),v=EL(p,o,v,F,3,a,I,U.r,h.r,1),v=EL(p,o,v,F,4,a,I,U.g,h.g,1),v=EL(p,o,v,F,5,a,I,U.b,h.b,1)),a=I,L=l,U=h,E=G}v.push(o)}}}if(o.bones)for(const W in o.bones){const a=o.bones[W],G=F.findBone(W);if(!G)throw new Error(`Bone not found: ${W}`);const L=G.index;for(const o in a){const W=a[o],F=W.length;if(0!=F)if("rotate"===o)v.push(WL(W,new ga(F,F,L),0,1));else if("translate"===o){const o=new fa(F,F<<1,L);v.push(FL(W,o,"x","y",0,E))}else if("translatex"===o){const o=new Aa(F,F,L);v.push(WL(W,o,0,E))}else if("translatey"===o){const o=new ka(F,F,L);v.push(WL(W,o,0,E))}else if("scale"===o){const o=new Za(F,F<<1,L);v.push(FL(W,o,"x","y",1,1))}else if("scalex"===o){const o=new Pa(F,F,L);v.push(WL(W,o,1,1))}else if("scaley"===o){const o=new ya(F,F,L);v.push(WL(W,o,1,1))}else if("shear"===o){const o=new za(F,F<<1,L);v.push(FL(W,o,"x","y",0,1))}else if("shearx"===o){const o=new xa(F,F,L);v.push(WL(W,o,0,1))}else if("sheary"===o){const o=new Na(F,F,L);v.push(WL(W,o,0,1))}}}if(o.ik)for(const W in o.ik){const a=o.ik[W];let G=a[0];if(!G)continue;const L=F.findIkConstraint(W);if(!L)throw new Error(`IK Constraint not found: ${W}`);const U=F.ikConstraints.indexOf(L),I=new na(a.length,a.length<<1,U);let l=vL(G,"time",0),h=vL(G,"mix",1),p=vL(G,"softness",0)*E;for(let o=0,W=0;;o++){I.setFrame(o,l,h,p,vL(G,"bendPositive",!0)?1:-1,vL(G,"compress",!1),vL(G,"stretch",!1));const F=a[o+1];if(!F){I.shrink(W);break}const v=vL(F,"time",0),L=vL(F,"mix",1),U=vL(F,"softness",0)*E,g=G.curve;g&&(W=EL(g,I,W,o,0,l,v,h,L,1),W=EL(g,I,W,o,1,l,v,p,U,E)),l=v,h=L,p=U,G=F}v.push(I)}if(o.transform)for(const W in o.transform){const E=o.transform[W];let a=E[0];if(!a)continue;const G=F.findTransformConstraint(W);if(!G)throw new Error(`Transform constraint not found: ${W}`);const L=F.transformConstraints.indexOf(G),U=new ua(E.length,6*E.length,L);let I=vL(a,"time",0),l=vL(a,"mixRotate",1),h=vL(a,"mixX",1),p=vL(a,"mixY",h),g=vL(a,"mixScaleX",1),f=vL(a,"mixScaleY",g);const A=vL(a,"mixShearY",1);for(let o=0,W=0;;o++){U.setFrame(o,I,l,h,p,g,f,A);const F=E[o+1];if(!F){U.shrink(W);break}const v=vL(F,"time",0),G=vL(F,"mixRotate",1),L=vL(F,"mixX",1),k=vL(F,"mixY",L),Z=vL(F,"mixScaleX",1),P=vL(F,"mixScaleY",Z),y=vL(F,"mixShearY",1),z=a.curve;z&&(W=EL(z,U,W,o,0,I,v,l,G,1),W=EL(z,U,W,o,1,I,v,h,L,1),W=EL(z,U,W,o,2,I,v,p,k,1),W=EL(z,U,W,o,3,I,v,g,Z,1),W=EL(z,U,W,o,4,I,v,f,P,1),W=EL(z,U,W,o,5,I,v,A,y,1)),I=v,l=G,h=L,p=k,g=Z,f=P,g=Z,a=F}v.push(U)}if(o.path)for(const W in o.path){const a=o.path[W],G=F.findPathConstraint(W);if(!G)throw new Error(`Path constraint not found: ${W}`);const L=F.pathConstraints.indexOf(G);for(const o in a){const W=a[o];let F=W[0];if(!F)continue;const U=W.length;if("position"===o){const o=new $a(U,U,L);v.push(WL(W,o,0,G.positionMode==co.Fixed?E:1))}else if("spacing"===o){const o=new Ya(U,U,L);v.push(WL(W,o,0,G.spacingMode==hG.Length||G.spacingMode==hG.Fixed?E:1))}else if("mix"===o){const o=new Qa(U,3*U,L);let E=vL(F,"time",0),a=vL(F,"mixRotate",1),G=vL(F,"mixX",1),I=vL(F,"mixY",G);for(let v=0,L=0;;v++){o.setFrame(v,E,a,G,I);const U=W[v+1];if(!U){o.shrink(L);break}const l=vL(U,"time",0),h=vL(U,"mixRotate",1),p=vL(U,"mixX",1),g=vL(U,"mixY",p),f=F.curve;f&&(L=EL(f,o,L,v,0,E,l,a,h,1),L=EL(f,o,L,v,1,E,l,G,p,1),L=EL(f,o,L,v,2,E,l,I,g,1)),E=l,a=h,G=p,I=g,F=U}v.push(o)}}}if(o.deform){o.attachments={};for(const W in o.deform){const F=o.deform[W],E=o.attachments[W]={};for(const o in F){const W=F[o],v=E[o]={};for(const o in W)v[o]={deform:W[o]}}}}if(o.attachments)for(const W in o.attachments){const a=o.attachments[W],G=F.findSkin(W);if(null!=G)for(const o in a){const W=a[o],L=F.findSlot(o);if(!L)throw new Error(`Slot not found: ${o}`);const U=L.index;for(const o in W){const F=W[o],a=G.getAttachment(U,o);for(const o in F){const W=F[o];let G=W[0];if(G)if("deform"==o){const o=a.bones,F=a.vertices,L=o?F.length/3*2:F.length,I=new Va(W.length,W.length,U,a);let l=vL(G,"time",0);for(let v=0,a=0;;v++){let U;const h=vL(G,"vertices",null);if(h){U=pW.newFloatArray(L);const W=vL(G,"offset",0);if(pW.arrayCopy(h,0,U,W,h.length),1!=E)for(let o=W,F=o+h.length;o<F;o++)U[o]*=E;if(!o)for(let o=0;o<L;o++)U[o]+=F[o]}else U=o?pW.newFloatArray(L):F;I.setFrame(v,l,U);const p=W[v+1];if(!p){I.shrink(a);break}const g=vL(p,"time",0),f=G.curve;f&&(a=EL(f,I,a,v,0,l,g,0,1,1)),l=g,G=p}v.push(I)}else if("sequence"==o){const o=new qa(W.length,U,a);let F=0;for(let E=0;E<W.length;E++){const v=vL(G,"delay",F),a=vL(G,"time",0),L=_v[vL(G,"mode","hold")],U=vL(G,"index",0);o.setFrame(E,a,L,U,v),F=v,G=W[E+1]}v.push(o)}}}}else if(ZW)throw new Error(`Skin not found: ${W}`)}if(o.drawOrder){const W=new da(o.drawOrder.length),E=F.slots.length;let a=0;for(let v=0;v<o.drawOrder.length;v++,a++){const G=o.drawOrder[v];let L=null;const U=vL(G,"offsets",null);if(U){L=pW.newArray(E,-1);const o=pW.newArray(E-U.length,0);let W=0,v=0;for(let E=0;E<U.length;E++){const a=U[E],G=F.findSlot(a.slot);if(!G)throw new Error(`Slot not found: ${G}`);const I=G.index;for(;W!=I;)o[v++]=W++;L[W+a.offset]=W++}for(;W<E;)o[v++]=W++;for(let W=E-1;W>=0;W--)-1==L[W]&&(L[W]=o[--v])}W.setFrame(a,vL(G,"time",0),L)}v.push(W)}if(o.events){const W=new Ka(o.events.length);let E=0;for(let v=0;v<o.events.length;v++,E++){const a=o.events[v],G=F.findEvent(a.name);if(!G)throw new Error(`Event not found: ${a.name}`);const L=new GG(pW.toSinglePrecision(vL(a,"time",0)),G);L.intValue=vL(a,"int",G.intValue),L.floatValue=vL(a,"float",G.floatValue),L.stringValue=vL(a,"string",G.stringValue),L.data.audioPath&&(L.volume=vL(a,"volume",1),L.balance=vL(a,"balance",0)),W.setFrame(E,L)}v.push(W)}let a=0;for(let o=0,W=v.length;o<W;o++)a=Math.max(a,v[o].getDuration());if(isNaN(a))throw new Error("Error while parsing animation, duration is NaN");F.animations.push(new Xv(W,v,a))}static blendModeFromString(o){if("normal"==(o=o.toLowerCase()))return Xo.B9.NORMAL;if("additive"==o)return Xo.B9.ADD;if("multiply"==o)return Xo.B9.MULTIPLY;if("screen"==o)return Xo.B9.SCREEN;throw new Error(`Unknown blend mode: ${o}`)}}class oL{constructor(o,W,F,E,v){this.mesh=o,this.skin=W,this.slotIndex=F,this.parent=E,this.inheritTimeline=v}}function WL(o,W,F,E){let v=o[0],a=vL(v,"time",0),G=vL(v,"value",F)*E,L=0;for(let U=0;;U++){W.setFrame(U,a,G);const I=o[U+1];if(!I)return W.shrink(L),W;const l=vL(I,"time",0),h=vL(I,"value",F)*E;v.curve&&(L=EL(v.curve,W,L,U,0,a,l,G,h,E)),a=l,G=h,v=I}}function FL(o,W,F,E,v,a){let G=o[0],L=vL(G,"time",0),U=vL(G,F,v)*a,I=vL(G,E,v)*a,l=0;for(let h=0;;h++){W.setFrame(h,L,U,I);const p=o[h+1];if(!p)return W.shrink(l),W;const g=vL(p,"time",0),f=vL(p,F,v)*a,A=vL(p,E,v)*a,k=G.curve;k&&(l=EL(k,W,l,h,0,L,g,U,f,a),l=EL(k,W,l,h,1,L,g,I,A,a)),L=g,U=f,I=A,G=p}}function EL(o,W,F,E,v,a,G,L,U,I){if("stepped"==o)return W.setStepped(E),F;const l=v<<2,h=o[l],p=o[l+1]*I,g=o[l+2],f=o[l+3]*I;return W.setBezier(F,E,v,a,L,h,p,g,f,G,U),F+1}function vL(o,W,F){return void 0!==o[W]?o[W]:F}class aL extends jW{createSkeleton(o){this.skeleton=new ZG(o),this.skeleton.updateWorldTransform(),this.stateData=new WG(o),this.state=new _a(this.stateData)}}var GL,LL=((GL=LL||{})[GL.UNKNOWN=0]="UNKNOWN",GL[GL.VER37=37]="VER37",GL[GL.VER38=38]="VER38",GL[GL.VER40=40]="VER40",GL[GL.VER41=41]="VER41",GL);function UL(o){const W=o.substr(0,3),F=Math.floor(10*Number(W)+.001);return"3.7"===W?37:"3.8"===W?38:"4.0"===W?40:"4.1"===W?41:F<37?37:0}class IL{constructor(){this.scale=1}readSkeletonData(o,W){let F=null,E=this.readVersionOldFormat(W),v=UL(E);if(v===LL.VER38&&(F=new FE(new nF(o))),E=this.readVersionNewFormat(W),v=UL(E),v!==LL.VER40&&v!==LL.VER41||(F=new eG(new FG(o))),!F){const o=`Unsupported version of spine model ${E}, please update pixi-spine`;console.error(o)}return F.scale=this.scale,F.readSkeletonData(W)}readVersionOldFormat(o){const W=new To(o);let F;try{W.readString(),F=W.readString()}catch(o){F=""}return F||""}readVersionNewFormat(o){const W=new To(o);let F;W.readInt32(),W.readInt32();try{F=W.readString()}catch(o){F=""}return F||""}}class lL{constructor(){this.scale=1}readSkeletonData(o,W){const F=W.skeleton.spine,E=UL(F);let v=null;if(E===LL.VER37&&(v=new rv(new Lv(o))),E===LL.VER38&&(v=new GE(new nF(o))),E!==LL.VER40&&E!==LL.VER41||(v=new bG(new FG(o))),!v){const o=`Unsupported version of spine model ${F}, please update pixi-spine`;console.error(o)}return v.scale=this.scale,v.readSkeletonData(W)}}(new class extends dW{createBinaryParser(){return new IL}createJsonParser(){return new lL}parseData(o,W,F){return{spineData:o.readSkeletonData(W,F),spineAtlas:W}}}).installLoader();var hL,pL=F(974486),gL=F(798678);!function(o){o.AssetReloaded="AssetReloaded"}(hL||(hL={}));class fL{constructor(o,{screenScale:W}){this.webGLAssets=o,this.eventEmitter=new pL.A,this.allLoadedAssets={[gL.x.Texture]:{},[gL.x.Spine]:{},[gL.x.Bitmap]:{},[gL.x.Emitter]:{},[gL.x.ParticleSystemConfig]:{},[gL.x.SpriteSheet]:{}},this.fixImports(o),this.screenScale=W,wo.y.instance.eventEmitter.on(wo.l.ConsumersShouldReloadAssets,(()=>{this.reload()})),this.primaryLoader=this.createLoader(),this.addExtension()}async load(o){var W;const F={},E={};for(const v of o){const o=this.webGLAssets[v];for(const v of Object.keys(o)){const a=o[v];if(a.type===gL.x.SpriteSheet){const o={};if(a.branding)for(const W of Object.keys(a.branding))o[W]=a.branding[W].textureUrl;const G=null===(W=a.lowQualityConfig)||void 0===W?void 0:W.textureUrl;F[`${v}_image`]={...a,type:gL.x.Texture,url:a.textureUrl,lowQualityUrl:G,branding:o},E[v]={...a}}else a.type===gL.x.Texture?F[v]=a:E[v]=a}}return await this._load(this.primaryLoader,F),await this._load(this.primaryLoader,E),this.primaryLoader.reset(),this.allLoadedAssets}dispose(){this.primaryLoader.dispose(),this.eventEmitter.removeAllListeners()}fixImports(o){for(const F of Object.values(o))for(const o of Object.values(F))if(W(o),"branding"in o&&o.branding)for(const F of Object.values(o.branding))W(F);function W(o){var W,F,E;(null===(W=o.url)||void 0===W?void 0:W.__esModule)&&(o.url=o.url.default),(null===(F=o.textureUrl)||void 0===F?void 0:F.__esModule)&&(o.textureUrl=o.textureUrl.default),(null===(E=o.atlasRawData)||void 0===E?void 0:E.__esModule)&&(o.atlasRawData=o.atlasRawData.default)}}amendSpineConfig(o,W,F){return this.preParser({...W,name:o,atlasRawData:F.value.atlasRawData,url:F.value.url})}amendTextureConfig(o,W,F){return this.preParser({...W,name:o,url:F.value})}amendSpriteSheetConfig(o,W,F){return this.preParser({...W,name:o,url:F.value.url,textureUrl:F.value.textureUrl})}amendBitmapConfig(o,W,F){return this.preParser({...W,name:o,url:F.value})}amendEmitterConfig(o,W,F){return this.preParser({...W,name:o,url:F.value})}registerAndPrepareAsset(o,W){switch(W.type){case gL.x.Spine:const F=wo.y.instance.registerPixiSpine(o,W,W.lowQualityConfig,W.branding);return F.subscribe((()=>{const E=this.amendSpineConfig(o,W,F);for(const o of E)this.primaryLoader.add(gL.x.Spine,o)}),!1),this.amendSpineConfig(o,W,F);case gL.x.Texture:const E=wo.y.instance.registerPixiTexture(o,W.url,W.lowQualityUrl,W.branding);return E.subscribe((()=>{this.primaryLoader.add(gL.x.Texture,this.amendTextureConfig(o,W,E)[0])}),!1),this.amendTextureConfig(o,W,E);case gL.x.SpriteSheet:const v=wo.y.instance.registerPixiSpriteSheet(o,W,W.lowQualityConfig,W.branding);return v.subscribe((()=>{this.primaryLoader.add(gL.x.SpriteSheet,this.amendSpriteSheetConfig(o,W,v)[0])}),!1),this.amendSpriteSheetConfig(o,W,v);case gL.x.Bitmap:const a=wo.y.instance.registerPixiBitmap(o,W.url);return a.subscribe((()=>{this.primaryLoader.add(gL.x.Bitmap,this.amendBitmapConfig(o,W,a)[0])}),!1),this.amendBitmapConfig(o,W,a);case gL.x.Emitter:const G=wo.y.instance.registerPixiEmitter(o,W.url);return G.subscribe((()=>{this.primaryLoader.add(gL.x.Emitter,this.amendEmitterConfig(o,W,G)[0])}),!1),this.amendEmitterConfig(o,W,G);default:return this.preParser({...W,name:o})}}async reload(){await this._loadResources(this.primaryLoader,this.primaryLoader.addedAssetsKeysList,!0)&&this.primaryLoader.reset()}async _load(o,W){const F=[];for(const E of Object.keys(W)){const v=W[E],a=this.registerAndPrepareAsset(E,v);for(const W of a)F.push(W.name),o.add(v.type,W)}await this._loadResources(o,F)}async _loadResources(o,W,F=!1){if(o.loading)return!1;try{o.loading=!0;const E=(await o.load(W)).reduce(((o,W)=>{var F;if(void 0!==W.group){const E=null!==(F=o[W.group])&&void 0!==F?F:{type:W.type,resource:[]};E.resource.push(W.resource),o[W.group]=E}else o[W.name]={type:W.type,resource:W.resource};return o}),{}),v=await Promise.all(Object.keys(E).map((o=>{const W=E[o];return this.postParser(W.type,o,W.resource,this.screenScale)})));for(const o of v){const{type:W,name:E,content:v}=o;this.allLoadedAssets[W][E]=v,F&&this.eventEmitter.emit(hL.AssetReloaded,o)}return o.loading=!1,o.hasDelayedAssets&&(o.addDelayedAssets(),await this._loadResources(o,o.addedAssetsKeysList,F)),!0}finally{o.loading=!1}}}const AL={extension:U.AgS.LoadParser,name:"customJsonParser",test:o=>o.includes(".json"),async load(o,W){const F=await U.W0u.ADAPTER.fetch(o);return{spriteSheetJson:await F.json()}}};var kL,ZL=F(578351);class PL{constructor(){this.loading=!1,this.assetsData={},this.addedAssetsKeys=new Set,this.addedWhenLoaderWasLoading=[],this.initAssets()}get hasDelayedAssets(){return this.addedWhenLoaderWasLoading.length>0}addDelayedAssets(){if(this.loading)throw new Error("Before adding delayed assets, loading flag must be set to false!");for(const{type:o,asset:W}of this.addedWhenLoaderWasLoading)this.add(o,W);this.addedWhenLoaderWasLoading=[]}reset(){this.resetAssets(),this.addedAssetsKeys=new Set,this.assetsData={},this.addedWhenLoaderWasLoading=[]}dispose(){this.reset(),this.disposeAssets()}get addedAssetsKeysList(){return[...this.addedAssetsKeys]}add(o,W){this.loading?this.addedWhenLoaderWasLoading.push({type:o,asset:W}):(this.registerAsset(o,W),this.addCommonAsset(W),this.addedAssetsKeys.has(W.name)||this.addedAssetsKeys.add(W.name))}async load(o){const W=await this.loadAssets(o).catch((o=>{console.error(`[GAME_ASSETS_LOAD] Failed to load: ${o}.`)}));return Object.keys(W).reduce(((o,F)=>{const E=W[F],v=this.assetsData[F];if(void 0===v)return o;const a={name:F,resource:E,type:v.type,group:v.group};return o.push(a),o}),[])}registerAsset(o,W){this.assetsData[W.name]={type:o,group:W.group}}}class yL extends PL{initAssets(){VW.sP.init({preferences:{preferCreateImageBitmap:!1}})}addCommonAsset(o){VW.sP.add({alias:o.name,src:o.url,data:o.data,loadParser:o.loadParser})}loadAssets(o){return VW.sP.load(o)}resetAssets(){VW.sP.resolver.reset(),VW.sP.loader.reset()}disposeAssets(){VW.sP.reset(),VW.l2.reset();for(const o of Object.keys(ZL.BaseTextureCache))delete ZL.BaseTextureCache[o];for(const o of Object.keys(ZL.TextureCache))delete ZL.TextureCache[o]}}!function(o){o.AssetReloaded="AssetReloaded"}(kL||(kL={}));const zL={};class xL extends fL{static async parseSpritesheetAndUpdateCachedTextures(o){var W;const F=await o.parse();for(const[o,a]of Object.entries(F)){zL[o]=null!==(W=zL[o])&&void 0!==W?W:[];for(const W of zL[o])v=a,(E=W).orig=v.orig,E.defaultAnchor=v.defaultAnchor,E.trim=v.trim,E.frame=v.frame,E.rotate=v.rotate,E.updateUvs(),E.baseTexture=v.baseTexture,E.update();zL[o].push(a)}var E,v}dispose(){super.dispose();for(const o of Object.keys(zL))zL[o]=[];U.XOh.remove(AL)}preParser({name:o,...W}){switch(W.type){case gL.x.Spine:return[{name:o,url:W.url,data:{atlasRawData:W.atlasRawData,imageNamePrefix:W.imageNamePrefix}}];case gL.x.Bitmap:return[{name:o,url:W.url,loadParser:"loadTxt"}];case gL.x.SpriteSheet:return[{name:o,url:W.url,loadParser:"customJsonParser"}];case gL.x.Texture:return[{name:o,url:W.url,data:W.data}];default:return[{name:o,url:W.url}]}}async postParser(o,W,F,E){switch(o){case gL.x.Spine:return wo.y.instance.reportPixiSpineLoaded(W),{type:o,name:W,content:F.spineData};case gL.x.Texture:{wo.y.instance.reportPixiTextureLoaded(W);const v=function(o,W){const F=/@(.+)x/.exec(o);return F?{name:o.slice(0,F.index),scale:parseFloat(F[1])}:{name:o,scale:W}}(W,E);return{type:o,name:v.name,content:F}}case gL.x.Bitmap:return wo.y.instance.reportPixiBitmapLoaded(W),{type:o,name:W,content:F};case gL.x.SpriteSheet:wo.y.instance.reportPixiSpriteSheetLoaded(W);const v=new U.zo6(U.sP.get(`${W}_image`),F.spriteSheetJson);return await xL.parseSpritesheetAndUpdateCachedTextures(v),{type:o,name:W,content:v};default:return{type:o,name:W,content:F}}}addExtension(){U.XOh.add(AL)}createLoader(){return new yL}}var NL=F(930990),eL=F(893015),tL=F(335914),mL=F(879356),rL=F(157757);const BL={autoStart:!0,loop:!1,explosiveness:!0,amount:20,emissionDelay:0,particlesPerWave:20,particle:{colors:{gradient:!1,mode:F(918973).F.Random,colors:[]},damping:.08695699999999999,gravityVector:[29,33],directionVector:[-20816681711721685e-33,20816681711721685e-33],spread:180,angularVelocity:{min:0,max:0,curve:[]},initialRotation:{min:0,max:0,syncWithDirection:!1},opacity:{min:1,max:1,curve:[{point:[0,1],easing:"linear"},{point:[1,.815],easing:"linear"}]},lifetime:{min:.65,max:.87},scale:{min:.1,max:3,curve:[{point:[0,.68],easing:"linear"},{point:[.29,.97],easing:"linear"},{point:[1,0],easing:"linear"}]},initialVelocity:{min:1850,max:2300},linearAcceleration:{min:-1e3,max:-1e3,curve:[{point:[0,1.4],easing:"linear"},{point:[1,1.88],easing:"linear"}]},tangentialAcceleration:{min:0,max:0,curve:[]},radialAcceleration:{min:0,max:0,curve:[]}},emitter:{position:[0,0],type:"point"}},jL=F.p+"images/dabspillpa.aa451cdd.webp",VL=U.gPd.from(jL),wL="PIXI_PARTICLES",KL="PIXI_PARTICLES_TEXTURE_ID";class TL extends U.mcf{constructor(){super(),this.visible=!1}animate(){var o;this.initParticles(),null===(o=this.particleSystem)||void 0===o||o.start()}initParticles(){this.particleSystem||this.createParticles(),this.visible=!0}tick(o){var W;null===(W=this.particleSystem)||void 0===W||W.tick(o)}clear(){var o;this.visible=!1,null===(o=this.particleSystem)||void 0===o||o.dispose(),this.particleSystem=void 0}destroy(o){var W;null===(W=this.particleSystem)||void 0===W||W.dispose(),this.particleSystem=void 0,super.destroy(o)}createParticles(){const o={fps:60,fixedDt:!1,randomSeed:"",blendMode:eL.V.Default,systemSize:{width:window.innerWidth,height:window.innerHeight},controllerConfigs:{[wL]:BL},graphicsConfig:{[wL]:{fps:0,randomFrameStart:!0,frames:[{x:0,y:0,w:48,h:48},{x:48,y:0,w:48,h:48},{x:0,y:48,w:48,h:48},{x:48,y:48,w:48,h:48},{x:96,y:0,w:48,h:54},{x:96,y:54,w:48,h:48},{x:0,y:102,w:48,h:50}],textureId:"PIXI_PARTICLES_TEXTURE_ID"}},controllerIdToConfigId:{[wL]:wL},controllers:{}};this.particleSystem=mL.l.spawnSystem({container:this,config:o,systemScale:.09,assets:{[KL]:{type:rL.b.PixiTexture,value:VL}},autoStart:!1}),this.particleSystem.getControllerOrThrow(wL).eventEmitter.on(tL.Od.OnFinished,(()=>{var o,W;null===(o=this.particleSystem)||void 0===o||o.dispose(),null===(W=this.particleSystem)||void 0===W||W.reset()}))}}class dL{constructor(){this.dabSpillSpritesheets=null,this.robotoSlabFont=null,this.initAssetsLoaded=!1,this._bundlesRequested=[],this._loadedAssets=void 0,this._assetLoader=void 0,this._pixiApplication=null,this._assetLoader=new xL(NL.Nn,{screenScale:1}),ko.Gn(this,{initAssetsLoaded:ko.sH,load:ko.XI,setPixiApp:ko.XI})}bundleRequested(o){return this._bundlesRequested.includes(o)}async load(o){return this._bundlesRequested=this._bundlesRequested.concat(o),new Promise(((W,F)=>{var E;null===(E=this._assetLoader)||void 0===E||E.load(o).then((o=>{this.setLoadedAssets(o),W(!0)})).catch((()=>{F(new l.LS(D.Q.AssetNotLoaded,B.Tl(D.Q.AssetNotLoaded)))}))}))}loadRobotoSlabFont(){return this.robotoSlabFont=U.BxG.from(NL.qp.RobotoSlab,{fontFamily:Fo.nM,fontSize:64,lineHeight:92,fill:"#FFFFFF",fontWeight:"600"}),this.robotoSlabFont}async loadDabSpillAnimation(){if(!this._pixiApplication)return[];const o=function(o){const W=Array.from({length:3},(()=>async function(o){const W=1e3/60,F=function(o){const W=100,F=100,E=new U.mcf;E.width=W,E.height=F;const v=new TL;return v.height=F,v.width=W,v.pivot.set(.5,.5),v.position.set(W/2,F/2),E.addChild(v),v.initParticles(),{tick:a=>{v.tick(a);const G=U.Y7R.create({width:W,height:F});return o.render(E,{renderTexture:G}),G},destroy:()=>{v.destroy(),E.destroy()}}}(o),E=Array.from({length:40},(()=>F.tick(W))),v=Promise.all(E);return v.then((()=>{F.destroy()})),v}(o)));return Promise.all(W)}(this._pixiApplication.renderer);return this.dabSpillSpritesheets=o,this.dabSpillSpritesheets}async getDabSpillAnimation(){return this.dabSpillSpritesheets?this.dabSpillSpritesheets:this.loadDabSpillAnimation()}getTexture(o){if(!this._loadedAssets)return U.gPd.EMPTY;const W=NL.Lp[o];let F;if(W){const E=this._loadedAssets.spriteSheet[W];E&&(F=E.textures[o])}else F=this._loadedAssets.texture[o];return null!=F?F:U.gPd.EMPTY}getAnimation(o){if(!this._loadedAssets)return[U.gPd.EMPTY];const W=NL.Lp[o];let F;if(W){const E=this._loadedAssets.spriteSheet[W].animations;E&&(F=E[o])}return null!=F?F:[U.gPd.EMPTY]}getParticleSystemConfig(o){if(!this._loadedAssets)return{};const W=this._loadedAssets.particleSystemConfig[o];return null!=W?W:{}}setPixiApp(o){this._pixiApplication=o}dispose(){var o,W;null===(o=this.robotoSlabFont)||void 0===o||o.destroy(),null===(W=this._assetLoader)||void 0===W||W.dispose()}setLoadedAssets(o){this._loadedAssets?this._loadedAssets={...this._loadedAssets,...o}:(this._loadedAssets=o,this.initAssetsLoaded=!0)}}var nL=F(62544);class uL{constructor(o){this.props=o,this.isRunning=!1,this.stopReasonValue=null,this.isSettingsWindowOpen=!1,this.isSuggestionBubbleVisible=!1,this.roundsLeft=0,this.autoplayAPIDisposeBag=new Ao.C,this.isPendingRepeat=!1,ko.Gn(this,{isRunning:ko.sH,isSettingsWindowOpen:ko.sH,isSuggestionBubbleVisible:ko.sH,roundsLeft:ko.sH,bindAutoPlayAPI:ko.XI,repeat:ko.XI,stop:ko.XI,closeSettings:ko.XI,dispose:ko.XI})}bindAutoPlayAPI(o,W){this.autoplayAPIDisposeBag.dispose(),this.autoplayAPIDisposeBag.addDisposable((()=>W())),this.autoplayAPI=o,this.bindToAutoplayAPI(o)}repeat(){this.isPendingRepeat=!0,window.setTimeout(ko.XI((()=>{ko.z7((()=>this.props.lotto.gridNumbers.card1.length>0),(()=>{var o,W;this.isPendingRepeat=!1,this.props.betting.repeat(!0),this.isRunning=null!==(W=null===(o=this.autoplayAPI)||void 0===o?void 0:o.isRunning.value)&&void 0!==W&&W}))})),nL.o)}stop(o){var W;this.isRunning&&(null===(W=this.autoplayAPI)||void 0===W||W.stop(o||k.G_.ManualStop))}closeSettings(){this.isSettingsWindowOpen&&this.props.autoplayUI.closeSettings()}dispose(){this.autoplayAPIDisposeBag.dispose(),this.autoplayAPI=void 0}closeSettingsAndNotifications(){this.closeSettings(),this.props.autoplayUI.clearStopReason(),this.props.autoplayUI.clearNotification()}bindToAutoplayAPI(o){var W;this.autoplayAPIDisposeBag.addDisposables([o.isRunning.subscribe(ko.XI((o=>{this.isPendingRepeat||(this.isRunning=o)}))),null===(W=o.roundsLeft)||void 0===W?void 0:W.subscribe(ko.XI((o=>{this.roundsLeft=o}))),this.props.autoplayUI.isSettingsWindowOpen.subscribe(ko.XI((o=>this.handleWindowOpen(o))))])}handleWindowOpen(o){const W=this.isSettingsWindowOpen&&!o;this.isSettingsWindowOpen=o,W&&this.props.autoplayUI.clearStopReason(),this.stopReasonValue===k.G_.RoundsEnded&&this.closeSettingsAndNotifications()}}class $L{constructor(){this.showAnimations=!0}setShowAnimations(o){this.showAnimations=o}}var YL=F(882979),QL=F(507565),CL=F(61854),qL=F(270566),cL=F(361494),_L=F(228174),OL=F(710913),XL=F(796269),SL=F(885470),sL=F(991679),iL=F(864442);function RL(o){const{openMwTables:W,mwLayout:F}=iL.y();return{btVideoQuality:o.videoInfo.quality.value,btTableView:`${o.videoInfo.streamForCurrentLayout.value}`,orientation:o.orientation,videoProtocol:o.videoInfo.playerName.value,openMwTables:String(W),mwLayout:String(F)}}var JL,DL=F(778810);!function(o){o.SetChips="crazyballs.bets.setChips",o.Undo="crazyballs.bets.undo",o.UndoAll="crazyballs.bets.undoAll",o.Repeat="crazyballs.bets.repeat"}(JL||(JL={}));var ML=F(356336),HL=F(899646);class bL{constructor(o,W,F,E,v,a,G){this.gameStore=o,this.transport=W,this.abstractGame=F,this.lottoGame=E,this.settings=v,this.tooltips=a,this.sound=G,this.shouldAnimate=!1,this.betSpotValues=sL.v6,this.previousInactiveCards=[],this.betSpotHistory=[],this.previousRoundBetSpotValues=sL.v6,this.betsClosedDeadline=0,ko.Gn(this,{betSpotValues:ko.sH,betSpotValuesLottoCards:ko.EW,betSpotValuesBonusCards:ko.EW,previousRoundBetSpotValues:ko.sH,betSpotHistory:ko.sH,updateBetSpotValue:ko.XI,updateAllBonusBetSpotValues:ko.XI,updateAllLottoBetSpotValues:ko.XI,updateTotalBet:ko.XI,undo:ko.XI,undoAll:ko.XI,repeat:ko.XI,double:ko.XI,setBetSpotHistory:ko.XI,setBetSpotValues:ko.XI,totalBet:ko.EW,isModeToggleAvailable:ko.EW,isUndoAvailable:ko.EW,isDoubleAvailable:ko.EW,isRepeatAvailable:ko.EW,repeatCost:ko.EW,isNoBets:ko.EW,isBetOnAllLottoAvailable:ko.EW,isBetOnAllBonusAvailable:ko.EW,getLimitsForCard:ko.XI,setPreviousInactiveCards:ko.XI,resetCurrentValues:ko.XI,updateBonusBet:ko.XI})}setBetClosedDeadline(o){this.betsClosedDeadline=o}getInactiveLottoCards(){return this.getInactiveCardIds(this.betSpotValuesLottoCards)}setPreviousInactiveCards(o){this.previousInactiveCards=o}getInactiveBonusCards(){return this.getInactiveCardIds(this.betSpotValuesBonusCards)}setPreviousRoundBetSpotValues(o){this.previousRoundBetSpotValues=o}refreshPreviousRoundBetSpotValues(){this.setPreviousRoundBetSpotValues(YL.A(Object.values(this.betSpotValues))>0?this.betSpotValues:sL.v6)}setBetSpotHistory(o){this.betSpotHistory=o.map((o=>({bets:o,confirmed:!0})))}setBetSpotValues(o){this.betSpotValues={...this.betSpotValues,...o},this.updateTotalBet()}undo(){if(!this.isUndoAvailable)return;const o=this.betSpotValues;this.betSpotHistory.pop();const W=this.betSpotHistory.length>0?this.betSpotHistory[this.betSpotHistory.length-1].bets:sL.v6;this.betSpotValues=W,this.updateTotalBet(),this.gameStore.incrementActionCount(),this.abstractGame.log(SL.sN({type:"Undo",newBets:this.betSpotValues,prevBets:o})),function(o,W,F){ML._z(F,{type:JL.Undo,payload:{gameId:o,betTags:W}})}(this.abstractGame.getGameId(),RL(this.abstractGame),this.transport)}undoAll(){const o=this.betSpotValues;this.resetCurrentValues(!1),this.abstractGame.log(SL.sN({type:"UndoAll",newBets:this.betSpotValues,prevBets:o})),this.gameStore.incrementActionCount(),function(o,W,F){ML._z(F,{type:JL.UndoAll,payload:{gameId:o,betTags:W}})}(this.abstractGame.getGameId(),RL(this.abstractGame),this.transport)}resetCurrentValues(o){this.shouldAnimate=!o,this.betSpotHistory=[],this.betSpotValues=sL.v6,this.updateTotalBet(),this.updateBonusBet(null)}repeat(o){if(!this.isRepeatAvailable)return;const W=this.betSpotValues;this.updateBetSpots(this.previousRoundBetSpotValues,o,!1),this.abstractGame.log(SL.sN({type:o?"AutoPlay":"Repeat",newBets:this.betSpotValues,prevBets:W}));const F=o?Bo.PZ.AutoPlayBet:Bo.PZ.CrazyBallsRebet;for(const[o,W]of Object.entries(this.previousRoundBetSpotValues))if(W>0){const W=this.sound.getEcasCardId(o);this.sound.triggerEvent(F,W)}this.gameStore.incrementActionCount(),function(o,W,F){ML._z(F,{type:JL.Repeat,payload:{gameId:o,betTags:W}})}(this.abstractGame.getGameId(),RL(this.abstractGame),this.transport)}double(){if(!this.isDoubleAvailable)return;const o=this.betSpotValues;this.updateBetSpots(this.betSpotValues,!1),this.abstractGame.log(SL.sN({type:"Double",newBets:this.betSpotValues,prevBets:o}));for(const[o,W]of Object.entries(this.betSpotValues))if(W>0){const W=this.sound.getEcasCardId(o);this.sound.triggerEvent(Bo.PZ.CrazyBallsDouble,W)}}updateAllBonusBetSpotValues(o,W){const F=this.betSpotValues,E=QL.A(XL.J2.map((W=>[W,o])));this.updateBetSpots(E,W),this.abstractGame.log(SL.sN({type:"BulkBet",newBets:this.betSpotValues,prevBets:F})),this.abstractGame.log(SL.Bf({bets:this.betSpotValues,amount:o})),this.sound.triggerEvent(Bo.PZ.BetOnAllBonus)}updateAllLottoBetSpotValues(o,W){const F=QL.A(XL.Wq.map((W=>[W,o]))),E=this.betSpotValues;this.updateBetSpots(F,W),this.abstractGame.log(SL.sN({type:"BulkBet",newBets:this.betSpotValues,prevBets:E})),this.abstractGame.log(SL.X8({amount:o,bets:this.betSpotValues})),this.sound.triggerEvent(Bo.PZ.BetOnAllCards)}updateBetSpotValue(o,W){if(this.isBetsOpen){const W=this.betSpotValues[o]>0?Bo.PZ.BetOnCard:Bo.PZ.FirstBetOnCard,F=this.sound.getEcasCardId(o);this.sound.triggerEvent(W,F)}const F=this.betSpotValues;this.updateBetSpots({[o]:W},!1),this.isBetsOpen&&this.abstractGame.log(SL.sN({type:"Chip",newBets:this.betSpotValues,prevBets:F}))}updateBetSpots(o,W,F=!0){if(!this.isBetsOpen)return this.abstractGame.log(SL.Qk({bets:o})),void Object.keys(o).forEach((o=>{this.tooltips.showBetSpotTooltip(o,zo.T(this.isNoBets?yo.X.TooltipNextGameSoon:yo.X.TooltipGameInProgress))}));let E=this.abstractGame.balanceAvailable;const v=Object.entries(o).reduce(((o,[W,F])=>{const v=W,a=this.betSpotValues[v],G=this.getBetSpotUpdatedValue(v,F,a,E);return o[v]=G,G!==a&&(E-=G-a),o}),{});E<this.abstractGame.balanceAvailable?(this.shouldAnimate=!W,this.betSpotValues={...this.betSpotValues,...v},this.updateChipHistory(),this.updateTotalBet(),F&&this.sendChipsMessage()):E<0&&Object.keys(o).forEach((o=>{this.tooltips.showBetSpotTooltip(o,zo.T(yo.X.TooltipBalanceTooLow))}))}sendChipsMessage(){const o=CL.A(this.betSpotValues,(o=>0===o));this.gameStore.incrementActionCount();const W=YL.A(Object.values(o));!function(o,W,F,E,v){ML._z(E,{type:JL.SetChips,payload:{gameId:W,chips:o,betTags:F,correlationId:v}})}(o,this.abstractGame.getGameId(),RL(this.abstractGame),this.transport,OL.k(this.abstractGame.getGameId(),this.settings.currencyCode,W))}get isNoBets(){return 0===this.totalBet}updateBonusBet(o){this.abstractGame.setBonusBet(o)}isPlayerQualified(o){return void 0!==this.betSpotValues[o]&&this.betSpotValues[o]>0}handleRejectedBetError(o,W,F){var E,v;if(W)this.updateTotalBetWithoutRejectedBets(o),this.abstractGame.showGenericToast({title:zo.T(yo.X.BetsPartiallyAccepted),description:zo.T(yo.X.TrafficLightAcceptedAmount,{amount:V.ej(this.totalBet,{currencySymbol:this.abstractGame.currencySymbol})})});else{if(1007===F){const o=this.betSpotHistory;for(;o.length&&!o[o.length-1].confirmed;)o.pop();const W=null!==(v=null===(E=o[o.length-1])||void 0===E?void 0:E.bets)&&void 0!==v?v:sL.v6;this.setBetSpotValues(W)}else this.updateTotalBetWithoutRejectedBets([...XL.Wq,...XL.J2]);F&&this.abstractGame.handleError(F)}}getLimitsForCard(o){const{maxBets:W,minBets:F}=this.settings,E=XL.cV(o)?o:this.lottoGame.cardModes[o];return{maxLimit:W[E],minLimit:F[E]}}get betSpotValuesBonusCards(){return sL.p6(this.betSpotValues)}get playerBetOnBonusCard(){return Object.values(this.betSpotValuesBonusCards).some((o=>o>0))}get betSpotValuesLottoCards(){return sL.Im(this.betSpotValues)}get isModeToggleAvailable(){const o=this.settings.maxBets[DL._g.FreeSpace],W=this.settings.maxBets[DL._g.Multi],F=Math.min(o,W);return XL.Wq.reduce(((o,W)=>(o[W]=this.betSpotValuesLottoCards[W]<=F,o)),{})}get totalBet(){return YL.A(Object.values(this.betSpotValues))}get isUndoAvailable(){return this.isBetsOpen&&this.betSpotHistory.length>0}get isDoubleAvailable(){return this.isBetsOpen&&this.betSpotHistory.length>0&&!this.isMaxBetReached&&this.totalBet<=this.abstractGame.balanceAvailable}get repeatCost(){return YL.A([...Object.values(this.previousRoundBetSpotValues)])}get isRepeatAvailable(){return this.isBetsOpen&&0===this.betSpotHistory.length&&this.repeatCost>0&&this.repeatCost<=this.abstractGame.balanceAvailable}get isMaxBetReached(){const{maxBets:o}=this.settings;return!qL.A(this.betSpotValues).some((([W,F])=>{const E=W,v=XL.cV(E)?E:this.lottoGame.cardModes[E];return F>0&&F<o[v]}))}get isBetOnAllLottoAvailable(){return this.isBetsAvailable(XL.Wq,this.abstractGame.betValue)}get isBetOnAllBonusAvailable(){return this.isBetsAvailable(XL.J2,this.abstractGame.betValue)}get isBetOnAllLottoMaxLimit(){return this.isBetsMaxLimitReached(XL.Wq)}get isBetOnAllBonusMaxLimit(){return this.isBetsMaxLimitReached(XL.J2)}getAmountMaxLimitReached(o){const W=(o?XL.J2:XL.Wq).map((o=>{const{maxLimit:W}=this.getLimitsForCard(o);return this.betSpotValues[o]+this.abstractGame.betValue>=W?W:0}));return Math.max(...W)}updateTotalBet(){this.abstractGame.setTotalBet(this.totalBet,this.isBetsOpen)}get isBetsOpen(){return this.gameStore.phase===HL.Qc.BetsOpen&&(Date.now()<this.betsClosedDeadline||!1)}isBetsMaxLimitReached(o){let W=0,F=0;return o.forEach((o=>{const{maxLimit:E}=this.getLimitsForCard(o),v=this.betSpotValues[o];W+=v,F+=E})),W>=F}isBetsAvailable(o,W){let F=this.abstractGame.balanceAvailable;return o.forEach((o=>{const{maxLimit:E}=this.getLimitsForCard(o),v=this.betSpotValues[o],a=Math.min(v+W,E);F-=a-v})),F>=0&&this.isBetsOpen&&this.totalBet<this.settings.tableMaxLimit&&!this.isBetsMaxLimitReached(o)}getInactiveCardIds(o){return Object.entries(o).flatMap((([o,W])=>0===W?o:[]))}getBetValuesWithoutRejectedBets(o){return{...sL.v6,...cL.A(this.betSpotValues,o)}}updateTotalBetWithoutRejectedBets(o){if(0===o.length)return;const W=this.getBetValuesWithoutRejectedBets(o);this.setBetSpotValues(W),this.updateTotalBet()}updateChipHistory(){this.betSpotHistory.push({bets:this.betSpotValues,confirmed:!1})}getBetSpotUpdatedValue(o,W,F,E){if(0===W)return F;const{isLowBalance:v}=this.abstractGame;if(v)return this.tooltips.showBetSpotTooltip(o,zo.T(yo.X.TooltipBalanceTooLow)),F;const{tableMaxBet:a,tableMaxLimit:G,tableMinLimit:L}=this.settings;let U=W+F;const{maxLimit:I,minLimit:l}=this.getLimitsForCard(o);return E<W&&(U=F+E),this.totalBet+W>G?(U=G-this.totalBet+F,this.tooltips.showBetSpotTooltip(o,zo.T(yo.X.TooltipMaxTableBetIs,{amount:V.ej(a)}))):this.totalBet+W<L?this.tooltips.showBetSpotTooltip(o,zo.T(yo.X.TooltipMinTableBetIs,{amount:V.ej(L)})):U>I?(U=I,this.tooltips.showBetSpotTooltip(o,zo.T(yo.X.TooltipMaxBetIs,{amount:V.ej(I)}))):U<l&&this.tooltips.showBetSpotTooltip(o,zo.T(yo.X.TooltipMinBetIs,{amount:V.ej(l)})),_L.GB(U,2)}}function oU(o){const W={undo:()=>o.betting.undo(),double:()=>o.betting.double(),undoAll:()=>o.betting.undoAll(),repeat:()=>o.betting.repeat(!1)},F=Object.keys(W).map((F=>o.abstractGame.betting[F].subscribe(W[F])));return()=>{F.forEach((o=>o()))}}function WU(o){return ko.mJ((()=>({bonusBets:o.betting.betSpotValuesBonusCards,phase:o.game.phase})),(({bonusBets:W,phase:F})=>{if(HL.R2(F)){o.abstractGame.setGameResultAmount(0);const E=XL.rU[F];o.betting.updateBonusBet(W[E])}}),{fireImmediately:!0})}var FU=F(267520);function EU(o,W,F=!1){switch(!0){case W:return FU.x9.LowBalance;case o:return FU.x9.NoBetsPlaced;case F:return FU.x9.MaxTableOrBetLimitReached;default:return FU.x9.Other}}function vU(o){return ko.mJ((()=>({isDoubleAvailable:o.betting.isDoubleAvailable,chipHistory:o.betting.betSpotHistory})),(({isDoubleAvailable:W,chipHistory:F})=>{if(W)o.abstractGame.betting.double.enable();else{const W=EU(0===F.length,o.betting.totalBet>o.abstractGame.balanceAvailable,o.betting.isMaxBetReached);o.abstractGame.betting.double.disable(W)}}),{fireImmediately:!0})}function aU(o){return ko.mJ((()=>({isRepeatAvailable:o.betting.isRepeatAvailable})),(({isRepeatAvailable:W})=>{if(W)o.abstractGame.betting.repeat.setVisible(!0),o.abstractGame.betting.repeat.enable();else{const W=0===o.betting.repeatCost||o.betting.betSpotHistory.length>0,F=EU(W,o.betting.repeatCost>o.abstractGame.balanceAvailable);W&&o.abstractGame.betting.repeat.setVisible(!1),o.abstractGame.betting.repeat.disable(F)}}),{fireImmediately:!0})}function GU(o){return ko.mJ((()=>({inUndoAvailable:o.betting.isUndoAvailable})),(({inUndoAvailable:W})=>{W?o.abstractGame.betting.undo.enable():o.abstractGame.betting.undo.disable()}),{fireImmediately:!0})}function LU(o){return ko.mJ((()=>({repeatCost:o.betting.repeatCost})),(({repeatCost:W})=>{o.abstractGame.setTotalBetToRepeat(W)}),{fireImmediately:!1})}function UU(o){return ko.mJ((()=>({pendingBonuses:o.bonus.pendingBonuses,currentBonus:o.bonus.currentBonus})),(({pendingBonuses:W,currentBonus:F})=>{F&&W.length>0&&W.includes(F)&&o.bonus.setPendingBonuses(W.filter((o=>o!==F)))}))}function IU(o,W){void 0===W&&(W="Illegal state"),o||function(o){throw new Error("[mobx-utils] "+o)}(W)}var lU=function(o){return o&&o!==Object.prototype&&Object.getOwnPropertyNames(o).concat(lU(Object.getPrototypeOf(o))||[])},hU=function(o){return function(o){var W=lU(o);return W.filter((function(o,F){return W.indexOf(o)===F}))}(o).filter((function(o){return"constructor"!==o&&!~o.indexOf("__")}))};function pU(o){switch(this.state){case"pending":return o.pending&&o.pending(this.value);case"rejected":return o.rejected&&o.rejected(this.value);case"fulfilled":return o.fulfilled?o.fulfilled(this.value):this.value}}function gU(o,W){if(IU(arguments.length<=2,"fromPromise expects up to two arguments"),IU("function"==typeof o||"object"==typeof o&&o&&"function"==typeof o.then,"Please pass a promise or function to fromPromise"),!0===o.isPromiseBasedObservable)return o;"function"==typeof o&&(o=new Promise(o));var F=o;o.then(ko.XI("observableFromPromise-resolve",(function(o){F.value=o,F.state="fulfilled"})),ko.XI("observableFromPromise-reject",(function(o){F.value=o,F.state="rejected"}))),F.isPromiseBasedObservable=!0,F.case=pU;var E=W&&"fulfilled"===W.state?W.value:void 0;return ko.kt(F,{value:E,state:"pending"},{},{deep:!1}),F}!function(o){o.reject=ko.XI("fromPromise.reject",(function(W){var F=o(Promise.reject(W));return F.state="rejected",F.value=W,F})),o.resolve=ko.XI("fromPromise.resolve",(function(W){void 0===W&&(W=void 0);var F=o(Promise.resolve(W));return F.state="fulfilled",F.value=W,F}))}(gU||(gU={}));var fU=function(o,W,F,E){var v,a=arguments.length,G=a<3?W:null===E?E=Object.getOwnPropertyDescriptor(W,F):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)G=Reflect.decorate(o,W,F,E);else for(var L=o.length-1;L>=0;L--)(v=o[L])&&(G=(a<3?v(G):a>3?v(W,F,G):v(W,F))||G);return a>3&&G&&Object.defineProperty(W,F,G),G};!function(){function o(o,W){var F=this;Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subscription",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),ko.Gn(this),ko.h5((function(){F.current=W,F.subscription=o.subscribe(F)}))}Object.defineProperty(o.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.subscription&&this.subscription.unsubscribe()}}),Object.defineProperty(o.prototype,"next",{enumerable:!1,configurable:!0,writable:!0,value:function(o){this.current=o}}),Object.defineProperty(o.prototype,"complete",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.dispose()}}),Object.defineProperty(o.prototype,"error",{enumerable:!1,configurable:!0,writable:!0,value:function(o){this.current=o,this.dispose()}}),fU([ko.sH.ref],o.prototype,"current",void 0),fU([ko.XI.bound],o.prototype,"next",null),fU([ko.XI.bound],o.prototype,"complete",null),fU([ko.XI.bound],o.prototype,"error",null)}();var AU=function(){return AU=Object.assign||function(o){for(var W,F=1,E=arguments.length;F<E;F++)for(var v in W=arguments[F])Object.prototype.hasOwnProperty.call(W,v)&&(o[v]=W[v]);return o},AU.apply(this,arguments)},kU=function(o,W,F,E){var v,a=arguments.length,G=a<3?W:null===E?E=Object.getOwnPropertyDescriptor(W,F):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)G=Reflect.decorate(o,W,F,E);else for(var L=o.length-1;L>=0;L--)(v=o[L])&&(G=(a<3?v(G):a>3?v(W,F,G):v(W,F))||G);return a>3&&G&&Object.defineProperty(W,F,G),G},ZU=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];!function(){function o(o){var W=this;Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"localValues",{enumerable:!0,configurable:!0,writable:!0,value:ko.sH.map({})}),Object.defineProperty(this,"localComputedValues",{enumerable:!0,configurable:!0,writable:!0,value:ko.sH.map({})}),Object.defineProperty(this,"isPropertyDirty",{enumerable:!0,configurable:!0,writable:!0,value:function(o){return W.localValues.has(o)}}),ko.Gn(this),IU(ko.OB(o),"createViewModel expects an observable object");var F=hU(this);hU(o).forEach((function(E){var v;if(!F.includes(E)&&E!==ko.BQ&&"__mobxDidRunLazyInitializers"!==E){if(IU(-1===ZU.indexOf(E),"The propertyname "+E+" is reserved and cannot be used with viewModels"),ko.H8(o,E)){var a=ko.Mr(o,E),G=a.derivation.bind(W),L=null===(v=a.setter_)||void 0===v?void 0:v.bind(W);W.localComputedValues.set(E,ko.EW(G,{set:L}))}var U=Object.getOwnPropertyDescriptor(o,E),I=U?{enumerable:U.enumerable}:{};Object.defineProperty(W,E,AU(AU({},I),{configurable:!0,get:function(){return ko.H8(o,E)?W.localComputedValues.get(E).get():W.isPropertyDirty(E)?W.localValues.get(E):W.model[E]},set:ko.XI((function(F){ko.H8(o,E)?W.localComputedValues.get(E).set(F):F!==W.model[E]?W.localValues.set(E,F):W.localValues.delete(E)}))}))}}))}Object.defineProperty(o.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"changedValues",{get:function(){return new Map(this.localValues)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"submit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var o=this;ko.HP(this.localValues).forEach((function(W){var F=o.localValues.get(W),E=o.model[W];ko.Fq(E)?E.replace(F):ko.uz(E)?(E.clear(),E.merge(F)):ko.YQ(F)||(o.model[W]=F)})),this.localValues.clear()}}),Object.defineProperty(o.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.localValues.clear()}}),Object.defineProperty(o.prototype,"resetProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(o){this.localValues.delete(o)}}),kU([ko.EW],o.prototype,"isDirty",null),kU([ko.EW],o.prototype,"changedValues",null),kU([ko.XI.bound],o.prototype,"submit",null),kU([ko.XI.bound],o.prototype,"reset",null),kU([ko.XI.bound],o.prototype,"resetProperty",null)}();var PU,yU=(PU=function(o,W){return PU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,W){o.__proto__=W}||function(o,W){for(var F in W)Object.prototype.hasOwnProperty.call(W,F)&&(o[F]=W[F])},PU(o,W)},function(o,W){function F(){this.constructor=o}PU(o,W),o.prototype=null===W?Object.create(W):(F.prototype=W.prototype,new F)}),zU=(function(o){function W(W,F,E){var v=void 0===E?{}:E,a=v.name,G=void 0===a?"ogm"+(1e3*Math.random()|0):a,L=v.keyToName,U=void 0===L?function(o){return""+o}:L,I=o.call(this)||this;Object.defineProperty(I,"_base",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(I,"_ogmInfoKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(I,"_groupBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(I,"_keyToName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(I,"_disposeBaseObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),I._keyToName=U,I._groupBy=F,I._ogmInfoKey=Symbol("ogmInfo"+G),I._base=W;for(var l=0;l<W.length;l++)I._addItem(W[l]);return I._disposeBaseObserver=ko.lB(I._base,(function(o){if("splice"===o.type)ko.Rn((function(){for(var W=0,F=o.removed;W<F.length;W++){var E=F[W];I._removeItem(E)}for(var v=0,a=o.added;v<a.length;v++){var G=a[v];I._addItem(G)}}));else{if("update"!==o.type)throw new Error("illegal state");ko.Rn((function(){I._removeItem(o.oldValue),I._addItem(o.newValue)}))}})),I}yU(W,o),Object.defineProperty(W.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){throw new Error("not supported")}}),Object.defineProperty(W.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(o){throw new Error("not supported")}}),Object.defineProperty(W.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(o,W){throw new Error("not supported")}}),Object.defineProperty(W.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposeBaseObserver();for(var o=0;o<this._base.length;o++){var W=this._base[o];W[this._ogmInfoKey].reaction(),delete W[this._ogmInfoKey]}}}),Object.defineProperty(W.prototype,"_getGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(W){var F=o.prototype.get.call(this,W);return void 0===F&&(F=ko.sH([],{name:"GroupArray["+this._keyToName(W)+"]",deep:!1}),o.prototype.set.call(this,W,F)),F}}),Object.defineProperty(W.prototype,"_removeFromGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(W,F){var E=o.prototype.get.call(this,W);1===E.length?o.prototype.delete.call(this,W):(F===E.length-1||(E[F]=E[E.length-1],E[F][this._ogmInfoKey].groupArrIndex=F),E.length--)}}),Object.defineProperty(W.prototype,"_addItem",{enumerable:!1,configurable:!0,writable:!0,value:function(o){var W=this,F=this._groupBy(o),E=this._getGroupArr(F),v={groupByValue:F,groupArrIndex:E.length,reaction:ko.mJ((function(){return W._groupBy(o)}),(function(F,E){var v=o[W._ogmInfoKey];W._removeFromGroupArr(v.groupByValue,v.groupArrIndex);var a=W._getGroupArr(F),G=a.length;a.push(o),v.groupByValue=F,v.groupArrIndex=G}))};Object.defineProperty(o,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:v}),E.push(o)}}),Object.defineProperty(W.prototype,"_removeItem",{enumerable:!1,configurable:!0,writable:!0,value:function(o){var W=o[this._ogmInfoKey];this._removeFromGroupArr(W.groupByValue,W.groupArrIndex),W.reaction(),delete o[this._ogmInfoKey]}})}(ko.Es),function(){function o(o,W){Object.defineProperty(this,"base",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:W}),Object.defineProperty(this,"root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closestIdx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});for(var F=this.closest=this.root=o,E=0;E<this.args.length-1&&(F=F.get(W[E]));E++)this.closest=F;this.closestIdx=E}return Object.defineProperty(o.prototype,"exists",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertNotDisposed();var o=this.args.length;return this.closestIdx>=o-1&&this.closest.has(this.args[o-1])}}),Object.defineProperty(o.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])}}),Object.defineProperty(o.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(o){this.assertNotDisposed();for(var W=this.args.length,F=this.closest,E=this.closestIdx;E<W-1;E++){var v=new Map;F.set(this.args[E],v),F=v}this.closestIdx=W-1,this.closest=F,F.set(this.args[W-1],o)}}),Object.defineProperty(o.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var o=this.args.length;this.closest.delete(this.args[o-1]);for(var W=this.root,F=[W],E=0;E<o-1;E++)W=W.get(this.args[E]),F.push(W);for(E=F.length-1;E>0;E--)0===F[E].size&&F[E-1].delete(this.args[E-1]);this.isDisposed=!0}}),Object.defineProperty(o.prototype,"assertNotDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.isDisposed)throw new Error("Concurrent modification exception")}}),o}()),xU=function(){function o(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"argsLength",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(o.prototype,"entry",{enumerable:!1,configurable:!0,writable:!0,value:function(o){if(-1===this.argsLength)this.argsLength=o.length;else if(this.argsLength!==o.length)throw new Error("DeepMap should be used with functions with a consistent length, expected: "+this.argsLength+", got: "+o.length);return this.last&&(this.last.isDisposed=!0),this.last=new zU(this.store,o)}}),o}(),NU=function(){return NU=Object.assign||function(o){for(var W,F=1,E=arguments.length;F<E;F++)for(var v in W=arguments[F])Object.prototype.hasOwnProperty.call(W,v)&&(o[v]=W[v]);return o},NU.apply(this,arguments)};function eU(o,W){if(void 0===W&&(W=!1),ko.ve(o))throw new Error("computedFn shouldn't be used on actions");var F=!1,E=0,v="boolean"==typeof W?{keepAlive:W}:W,a=new xU;return function(){for(var W=this,G=[],L=0;L<arguments.length;L++)G[L]=arguments[L];var U,I=a.entry(G);if(I.exists())return I.get().get();if(!v.keepAlive&&!ko.Tx())return F||(console.warn("invoking a computedFn from outside an reactive context won't be memoized, unless keepAlive is set"),F=!0),o.apply(this,G);var l=ko.EW((function(){return U=o.apply(W,G)}),NU(NU({},v),{name:"computedFn("+(v.name||o.name)+"#"+ ++E+")"}));return I.set(l),v.keepAlive||ko.q$(l,(function(){a.entry(G).delete(),v.onCleanup&&v.onCleanup.apply(v,function(){for(var o=0,W=0,F=arguments.length;W<F;W++)o+=arguments[W].length;var E=Array(o),v=0;for(W=0;W<F;W++)for(var a=arguments[W],G=0,L=a.length;G<L;G++,v++)E[v]=a[G];return E}([U],G)),U=void 0})),l.get()}}class tU{get slotMultipliers(){return{[XL.$i.CoinFlip]:this.props.coinFlip.slotMultiplier,[XL.$i.CashHunt]:this.props.cashHunt.slotMultiplier,[XL.$i.Pachinko]:this.props.pachinko.slotMultiplier,[XL.$i.CrazyTime]:this.props.crazyTime.slotMultiplier}}get currentBonus(){return XL.rU[this.props.game.phase]}get isPlayerQualifiedForCurrentBonus(){return!!this.currentBonus&&this.isPlayerQualifiedForBonus(this.currentBonus)}constructor(o){this.props=o,this.getSlotMultiplier=eU((o=>this.slotMultipliers[o])),this.isPlayerQualifiedForBonus=eU((o=>this.props.betting.isPlayerQualified(o))),this.pendingBonuses=[],ko.l_(this,void 0,{autoBind:!0})}setPendingBonuses(o){this.pendingBonuses=o}reset(){this.pendingBonuses=[]}}var mU=F(843415),rU=F(24984),BU=F(507515);class jU{constructor(o){this.props=o,this.userAimInteraction=rU.XI.Auto,this.grid=[],this.selectedSymbol=void 0,this.phase=void 0,this.slotMultiplier=void 0,ko.Gn(this,{userAimInteraction:ko.sH,grid:ko.sH,selectedSymbol:ko.sH,slotMultiplier:ko.sH,setGrid:ko.XI,chooseSymbol:ko.XI,containerProps:ko.EW,phase:ko.sH,setPhase:ko.XI,setSlotMultiplier:ko.XI,currentSymbolCode:ko.EW,setSelectedSymbol:ko.XI,setUserAimInteraction:ko.XI,reset:ko.XI,isPlayerQualified:ko.EW,hasPlayerInteracted:ko.EW})}setSlotMultiplier(o){this.slotMultiplier=o}setGrid(o){this.grid=o}setPhase(o){this.phase=o}setSelectedSymbol(o){this.selectedSymbol=o}setUserAimInteraction(o){this.userAimInteraction=o}chooseSymbol(o,W){const{abstractGame:F,device:E,sound:v}=this.props;v.triggerEvent(Bo.PZ.CashHuntAimConfirmed),E.isAndroid&&F.vibrate(),F.log(mU.sn({from:this.selectedSymbol,to:o,action:W})),this.userAimInteraction=W,this.setSelectedSymbol(o),this.sendShootMessage()}onAimPositioningBeforeShoot(o){this.props.abstractGame.log(mU.FB({location:o}))}onStateChange(){}playCannonShootSound(){this.props.sound.triggerEvent(Bo.PZ.CashHuntCannonShoot)}playPaintSplatSound(){this.props.sound.triggerEvent(Bo.PZ.CashHuntPaintSplatter)}get isPlayerQualified(){return this.props.betting.isPlayerQualified(XL.$i.CashHunt)}get isVisible(){return this.props.game.phase===HL.Qc.CashHunt&&this.isPlayerQualified}get containerProps(){return BU.ir(this.props.abstractGame.gameDimensions,this.props.device.layoutMode)}get currentSymbolCode(){if(void 0!==this.selectedSymbol)return BU.Oh(this.selectedSymbol)}get hasPlayerInteracted(){return[rU.XI.Click,rU.XI.DragDrop].includes(this.userAimInteraction)}reset(){this.selectedSymbol=void 0}sendShootMessage(){this.hasPlayerInteracted&&void 0!==this.currentSymbolCode&&ML._z(this.props.transport,{type:"crazyballs.cashhunt.shoot",payload:{at:this.currentSymbolCode,gameId:this.props.abstractGame.getGameId()}})}}function VU(o){return ko.mJ((()=>({gamePhase:o.game.phase})),((W,F)=>{F.gamePhase===HL.Qc.CashHunt&&W.gamePhase!==HL.Qc.CashHunt&&o.cashHunt.reset()}),{fireImmediately:!1})}class wU{constructor(){this.phase=void 0,this.isVisible=!1,this.slotMultiplier=void 0,this.result=void 0,this.multipliers=void 0,ko.Gn(this,{phase:ko.sH,isVisible:ko.sH,slotMultiplier:ko.sH,result:ko.sH,multipliers:ko.sH,setSlotMultiplier:ko.XI,setPhase:ko.XI,setIsVisible:ko.XI,setResult:ko.XI,setMultipliers:ko.XI,reset:ko.XI})}setPhase(o){this.phase=o}setIsVisible(o){this.isVisible=o}setResult(o){this.result=o}setMultipliers(o){this.multipliers=o}setSlotMultiplier(o){this.slotMultiplier=o}reset(){this.multipliers=void 0,this.result=void 0,this.phase=void 0,this.slotMultiplier=void 0,this.isVisible=!1}}function KU(o){return ko.mJ((()=>({gamePhase:o.game.phase})),((W,F)=>{F.gamePhase===HL.Qc.CoinFlip&&W.gamePhase!==HL.Qc.CoinFlip&&W.gamePhase!==HL.Qc.Resolved&&o.coinFlip.reset()}),{fireImmediately:!1})}var TU=F(620802);class dU{constructor(o){this.props=o,this.phase=void 0,this.flapper=void 0,this.flyingFlapper=void 0,this.reSpins=void 0,this.result=void 0,this.slotMultiplier=void 0,ko.Gn(this,{phase:ko.sH,flapper:ko.sH,flyingFlapper:ko.sH,slotMultiplier:ko.sH,reSpins:ko.sH,result:ko.sH,isPlayerQualified:ko.EW,chooseFlapper:ko.XI,resetCrazyTime:ko.XI,setSlotMultiplier:ko.XI,setPhase:ko.XI,setFlapper:ko.XI,setFlyingFlapper:ko.XI,setReSpins:ko.XI,setResult:ko.XI}),this.chooseFlapper=this.chooseFlapper.bind(this)}resetCrazyTime(){this.phase=void 0,this.flapper=void 0,this.flyingFlapper=void 0}setSlotMultiplier(o){this.slotMultiplier=o}setPhase(o){this.phase=o}setFlapper(o){this.flapper=o}setFlyingFlapper(o){this.flyingFlapper=o}setReSpins(o){this.reSpins=o}setResult(o){this.result=o}get isPlayerQualified(){return this.props.betting.isPlayerQualified(XL.$i.CrazyTime)}selectIsCrazyBonusVisible(){if(this.props.game.phase!==HL.Qc.CrazyTime)return!1;switch(this.phase){case TU.GE.Choosing:return this.isPlayerQualified;case TU.GE.Action:case TU.GE.Spinning:case TU.GE.Choice:case TU.GE.Choose:case TU.GE.Result:return!0}return!1}get isDecisionVisible(){return this.selectIsCrazyBonusVisible()&&this.props.game.timeRemaining>0&&void 0===this.flapper&&this.isPlayerQualified}selectIsChosenFlapperVisible(){var o,W;return(this.phase===TU.GE.Choice||this.phase===TU.GE.Action||this.phase===TU.GE.Spinning)&&this.props.game.phase===HL.Qc.CrazyTime&&!this.isDecisionVisible&&!!this.flapper&&(!(null===(o=this.reSpins)||void 0===o?void 0:o.flapper)||this.flapper===(null===(W=this.reSpins)||void 0===W?void 0:W.flapper))&&this.isPlayerQualified}chooseFlapper(o){var W;this.setPhase(TU.GE.Choice),this.props.sound.triggerEvent(Bo.PZ.CrazyTimeDecisionSelect),this.setFlapper(o),this.setFlyingFlapper(o),(W=o,(o,F)=>{const E=TU.GE.Choose,v={gameId:o.abstractGame.getGameId(),flapper:W};F.sendMessage({type:E,payload:v})})(this.props,this.props.transport)}}class nU{constructor(o){this.props=o,this.lottoContainerPosition=new U.bRX,this.lottoContainerRect=new U.M_G,ko.Gn(this,{layoutMode:ko.EW,lottoContainerPosition:ko.sH,lottoContainerRect:ko.sH,setLottoContainerPosition:ko.XI,setLottoContainerRect:ko.XI})}setLottoContainerRect(o){this.lottoContainerRect=o}setLottoContainerPosition(o){this.lottoContainerPosition=o}get isPortrait(){return this.props.abstractGame.orientation===Lo.t.Portrait}get isDesktop(){const o=this.props.abstractGame.platform,W=o===Go.OD.Tablet&&S.DS.IS_DESKTOP;return o===Go.OD.Desktop||W}get isPhone(){return this.props.abstractGame.platform===Go.OD.Phone}get hasNotch(){return this.props.DS.HAS_NOTCH}get hasRoundedCorners(){return this.props.DS.HAS_ROUNDED_CORNERS}get isAndroid(){return this.props.DS.IS_ANDROID}get isIOS(){return this.props.DS.IS_IOS}get layoutMode(){return this.isDesktop?"desktop":this.isPhone?"mobilePortrait":"tablet"}get shouldDelayVideoBlur(){return this.props.DS.IS_CHROME&&this.props.DS.IS_ANDROID8_0_0_PLUS&&!this.props.DS.IS_ANDROID9_0_0_PLUS}}function uU(o){return ko.mJ((()=>o.flyingMultiplier.flyingMultiplierData),(W=>{o.timeout.clear(Po.s.AutoHideMultiplier),W&&W.hideOnTarget&&void 0!==W.flightDuration&&o.timeout.set(Po.s.AutoHideMultiplier,(()=>{o.flyingMultiplier.setFlyingMultiplierData(void 0)}),W.flightDuration)}),{})}function $U(o){return ko.mJ((()=>o.game.phase),(W=>{o.flyingMultiplier.setFlyingMultiplierData(void 0),W!==HL.Qc.Resolved&&o.youWin.setWinMultiplier(0)}),{})}var YU=F(833038);function QU(o){return ko.mJ((()=>({areAnimationsFinishedCard1:o.game.areLottoAnimationsFinished.card1,areAnimationsFinishedCard2:o.game.areLottoAnimationsFinished.card2,areAnimationsFinishedCard3:o.game.areLottoAnimationsFinished.card3,areAnimationsFinishedCard4:o.game.areLottoAnimationsFinished.card4,areGlobalAnimationsFinished:o.game.areGlobalFlyingAnimationsFinished})),(({areAnimationsFinishedCard1:W,areAnimationsFinishedCard2:F,areAnimationsFinishedCard3:E,areAnimationsFinishedCard4:v,areGlobalAnimationsFinished:a})=>{o.game.setAnimationsDone(W&&F&&E&&v&&a)}),{fireImmediately:!0})}function CU(o){return ko.mJ((()=>({gamePhase:o.game.phase,isRestoring:o.restore.isRestoring})),(({gamePhase:W,isRestoring:F})=>{W===HL.Qc.BetsOpen&&o.timeout.set(Po.s.ShowChipStack,(()=>o.abstractGame.showChipStack()),F?0:300)}),{fireImmediately:!0})}function qU(o){const W=function(){let o=!1;return W=>{if(o||!W.assets.initAssetsLoaded)return;const F=W.device.isPortrait?NL.Dc.AnimationsPortrait:NL.Dc.AnimationsLandscape;W.assets.bundleRequested(F)?o=!0:W.betting.playerBetOnBonusCard&&W.assets.load([F])}}();return ko.mJ((()=>o.game.phase),(F=>{HL.R2(F)&&o.youWin.reset(),F===HL.Qc.BetsClosed&&(o.abstractGame.hideWinnersList(),W(o))}))}function cU(o){return ko.mJ((()=>({gamePhase:o.game.phase})),(({gamePhase:W})=>{switch(W){case HL.Qc.BetsOpen:o.abstractGame.reserveBet(0),o.abstractGame.resumeBalanceUpdate(),o.abstractGame.currentLifecycle!==f.P.BetsOpen&&o.abstractGame.setLifecycleOpenBets();break;case HL.Qc.BetsClosed:o.abstractGame.setLifecycleCloseInteraction(),o.abstractGame.setLifecycleCloseBets();break;case HL.Qc.Resolved:o.abstractGame.setLifecycleResolved(),o.abstractGame.pauseBalanceUpdate()}}),{fireImmediately:!0})}class _U{constructor(){this.isReturningFromBonusGame=!1,this.timeRemaining=0,this.totalTimeRemaining=0,this.phase=HL.Qc.Init,this.prevPhase=HL.Qc.Init,this.actionsCount=0,this.isGameReady=!1,this.animationsDone=!0,this.areLottoAnimationsFinished={card1:!0,card2:!0,card3:!0,card4:!0},this.areGlobalFlyingAnimationsFinished=!0,this.tickTimeout=0,ko.Gn(this,{phase:ko.sH,timeRemaining:ko.sH,totalTimeRemaining:ko.sH,isGameReady:ko.sH,isReturningFromBonusGame:ko.sH,isGameGradientShrinkPhase:ko.EW,areLottoAnimationsFinished:ko.sH,areGlobalFlyingAnimationsFinished:ko.sH,animationsDone:ko.sH,setPhase:ko.XI,clearTimeRemaining:ko.XI,updateTimeRemaining:ko.XI,tickTimeRemaining:ko.XI,setActionCount:ko.XI,setIsReturningFromBonusGame:ko.XI,setIsGameReady:ko.XI,setAreLottoAnimationsFinished:ko.XI,setAnimationsDone:ko.XI})}setPhase(o){this.prevPhase=this.phase,this.phase=o}setIsGameReady(o){this.isGameReady=o}setIsReturningFromBonusGame(o){this.isReturningFromBonusGame=o}setAreLottoAnimationsFinished(o,W){this.areLottoAnimationsFinished[W]=o}setAnimationsDone(o){this.animationsDone=o}setAreGlobalFlyingAnimationsDone(o){this.areGlobalFlyingAnimationsFinished=o}incrementActionCount(){this.actionsCount++}resetActionCount(){this.actionsCount=0}setActionCount(o){this.actionsCount=o}get isLottoPhase(){return this.phase===HL.Qc.BetsOpen||this.phase===HL.Qc.BetsClosed||this.phase===HL.Qc.BallDrawing||this.phase===HL.Qc.Resolved&&!this.isReturningFromBonusGame}get isGameGradientShrinkPhase(){return HL.R2(this.phase)||this.phase===HL.Qc.Resolved&&HL.R2(this.prevPhase)}clearTimeRemaining(){this.timeRemaining=0,this.totalTimeRemaining=0}updateTimeRemaining(o){this.timeRemaining=o,this.totalTimeRemaining=o,window.clearTimeout(this.tickTimeout),this.tickTimeRemaining()}tickTimeRemaining(){if(this.timeRemaining>0){const o=performance.now();this.tickTimeout=window.setTimeout((()=>{ko.h5((()=>{this.timeRemaining-=performance.now()-o,this.tickTimeRemaining()}))}),50)}}dispose(){window.clearTimeout(this.tickTimeout)}}var OU=F(84184);function XU(o){return ko.mJ((()=>({gamePhase:o.game.phase,ballsLeft:OU.x-o.lottoGame.drawnBalls.length})),(({gamePhase:W,ballsLeft:F})=>{W===HL.Qc.BallDrawing&&o.sound.triggerEvent(Bo.PZ.BallsLeft,F)}))}var SU=F(636308);class sU{constructor(){this.phase=void 0,this.slotMultiplier=void 0,ko.Gn(this,{phase:ko.sH,slotMultiplier:ko.sH,setSlotMultiplier:ko.XI,setPhase:ko.XI})}setSlotMultiplier(o){this.slotMultiplier=o}setPhase(o){this.phase=o}}class iU{constructor(){this.isRestoring=!0,ko.Gn(this,{isRestoring:ko.sH,setIsRestoring:ko.XI})}setIsRestoring(o){this.isRestoring=o}}var RU=F(330517);class JU{constructor(o){this.props=o,this.animationsEnabled=!0,ko.Gn(this,{animationsEnabled:ko.sH}),this.maxBets={[XL.$i.CrazyTime]:this.crazyTimeBetMax,[XL.$i.CashHunt]:this.cashHuntBetMax,[XL.$i.CoinFlip]:this.coinFlipBetMax,[XL.$i.Pachinko]:this.pachinkoBetMax,[DL._g.Multi]:this.lottoMultiBetMax,[DL._g.FreeSpace]:this.lottoFreeSpaceBetMax},this.minBets={[XL.$i.CrazyTime]:this.crazyTimeBetMin,[XL.$i.CashHunt]:this.cashHuntBetMin,[XL.$i.CoinFlip]:this.coinFlipBetMin,[XL.$i.Pachinko]:this.pachinkoBetMin,[DL._g.Multi]:this.lottoMultiBetMin,[DL._g.FreeSpace]:this.lottoFreeSpaceBetMin}}get bettingTime(){return RU.R(this.props.gameSettings.rawConfig.betting_time,1e4)}get onboardingDisabled(){return"true"===this.props.gameSettings.rawConfig.onboarding_disabled}get showCashHuntGrid(){return"true"===this.props.gameSettings.rawConfig.show_cash_hunt_grid}get validateMessages(){var o;return"true"===(null!==(o=this.props.gameSettings.rawConfig.enable_events_validation)&&void 0!==o?o:"false")}get betsSoftCloseDuration(){return RU.R(this.props.gameSettings.rawConfig.bets_soft_close_duration,100)}get autoplayEnabled(){return this.props.gameSettings.autoplayApiEnabled()}get lottoFreeSpaceBetMax(){return RU.R(this.props.gameSettings.rawConfig.lotto_free_space_bet_max,0)}get lottoFreeSpaceBetMin(){return RU.R(this.props.gameSettings.rawConfig.lotto_free_space_bet_min,0)}get lottoMultiBetMax(){return RU.R(this.props.gameSettings.rawConfig.lotto_multi_bet_max,0)}get multiplierFlightDelayForCashHunt(){return RU.R(this.props.gameSettings.rawConfig.multiplier_flight_delay_cashhunt,1e3)}get multiplierFlightDelayForPachinko(){return RU.R(this.props.gameSettings.rawConfig.multiplier_flight_delay_pachinko,2e3)}get multiplierCounterDurationForCoinFlip(){return RU.R(this.props.gameSettings.rawConfig.multiplier_counter_duration_coinflip,2800)}get multiplierUpdateDurationForCoinFlip(){return RU.R(this.props.gameSettings.rawConfig.multiplier_update_duration_coinflip,1e3)}get lottoMultiBetMin(){return RU.R(this.props.gameSettings.rawConfig.lotto_multi_bet_min,0)}get coinFlipBetMin(){return RU.R(this.props.gameSettings.rawConfig.coin_flip_bet_min,0)}get coinFlipBetMax(){return RU.R(this.props.gameSettings.rawConfig.coin_flip_bet_max,0)}get cashHuntBetMin(){return RU.R(this.props.gameSettings.rawConfig.cash_hunt_bet_min,0)}get cashHuntBetMax(){return RU.R(this.props.gameSettings.rawConfig.cash_hunt_bet_max,0)}get pachinkoBetMin(){return RU.R(this.props.gameSettings.rawConfig.pachinko_bet_min,0)}get pachinkoBetMax(){return RU.R(this.props.gameSettings.rawConfig.pachinko_bet_max,0)}get crazyTimeBetMin(){return RU.R(this.props.gameSettings.rawConfig.crazy_time_bet_min,0)}get crazyTimeBetMax(){return RU.R(this.props.gameSettings.rawConfig.crazy_time_bet_max,0)}get bettingTimeLatency(){return RU.R(this.props.gameSettings.rawConfig.betting_time_latency,0)}get decisionTimerLatency(){return RU.R(this.props.gameSettings.rawConfig.decision_timer_latency,0)}get scbPayoutLimit(){return this.props.gameSettings.payoutLimit()||5e5}get tableMinBet(){return this.props.gameSettings.minTableLimit()}get tableMaxBet(){return this.props.gameSettings.maxTableLimit()}get tableMaxLimit(){return this.props.gameSettings.getTableBetMaxLimit()||Number.MAX_SAFE_INTEGER}get tableMinLimit(){return this.props.gameSettings.getTableBetMinLimit()||0}get tableName(){return this.props.gameSettings.getTableName()}get currencyCode(){return this.props.gameSettings.getCurrencyCode()}get testingApiEnabled(){var o;return"true"===(null!==(o=this.props.gameSettings.rawConfig.e2e_test_api)&&void 0!==o?o:"false")}}var DU=F(764522),MU=F(139021);class HU{constructor(o){this.props=o,this.multiplierData=Bo.Ip,this.eventFlags={},ko.Gn(this,{isMusicPlaybackAllowed:ko.EW,resetEventData:ko.XI,multiplierData:ko.sH})}resetEventData(){this.eventFlags={},this.multiplierData=Bo.Ip}get isMusicPlaybackAllowed(){return this.props.abstractGame.gameLoaded}triggerEvent(o,W){this.isMusicPlaybackAllowed&&DU.triggerEvent(o,W)}getEcasGameResultEvent(o){return o===HL.Qc.CoinFlip?Bo.PZ.CoinFlipResult:o===HL.Qc.CashHunt?Bo.PZ.CashHuntResult:o===HL.Qc.Pachinko?Bo.PZ.PachinkoResult:o===HL.Qc.CrazyTime?Bo.PZ.CrazyTimeResult:Bo.PZ.MainGameResult}getEcasWinType(o){return Bo.u3[o]}getEcasCardId(o){return Bo.yy[o]}getMultiplierGrade(o){return o>4?Bo.Jc.High:o>2?Bo.Jc.Medium:Bo.Jc.Low}triggerDaubEvent(o,W){const F=XL.cV(o),E=F?this.getEcasBonusGame(o):this.getEcasCardId(o),v=F?W?Bo.PZ.DaubBonusWithMultiplier:Bo.PZ.DaubBonus:Bo.PZ.Daub;this.triggerEvent(v,E)}setMultiplierData(o,W){if(this.resetEventData(),!W){for(const[W]of o){const o=W.cardMode===DL._g.FreeSpace,F=Object.keys(W.grid.lineMultipliers);o?this.multiplierData.line.count+=F.length:F.forEach((o=>{"3"!==o[1]&&this.multiplierData.line.count++}));const E=Object.entries(W.grid.cellMultipliers);for(const[o,W]of E)o!==MU.u&&(W.isGlobal?this.multiplierData.global.count++:this.multiplierData.standard.count++)}this.multiplierData.global.grade=this.getMultiplierGrade(this.multiplierData.global.count),this.multiplierData.standard.grade=this.getMultiplierGrade(this.multiplierData.standard.count),this.multiplierData.line.grade=this.getMultiplierGrade(this.multiplierData.line.count)}}triggerEventOnce(o,W){this.eventFlags[o]||(this.eventFlags[o]=!0,this.triggerEvent(o,W))}getEcasBonusGame(o){return Bo.dB[o]}dispose(){DU.stopAll()}}class bU{constructor(){this.timeoutMap={}}set(o,W,F){this.clear(o),0===F?W():this.timeoutMap[o]=window.setTimeout(W,F)}clear(o){this.timeoutMap[o]&&window.clearTimeout(this.timeoutMap[o]),this.timeoutMap[o]=void 0}clearAll(){for(const o of Object.values(this.timeoutMap))o&&window.clearTimeout(o);this.timeoutMap={}}dispose(){this.clearAll()}}let oI=0;function WI(o){return ko.mJ((()=>({betSpotValues:o.betting.betSpotValues})),((W,F)=>{let E;for(const o of XL.Wn){const v=W.betSpotValues[o],a=F.betSpotValues[o];if(v>a){E=!0;break}if(v<a){E=!1;break}}if(void 0===E)return;const v=()=>{o.ui.betSpots.setBetSpotValues(W.betSpotValues,o.restore.isRestoring)};E&&!o.restore.isRestoring?oI=setTimeout(v,nL.o):(clearTimeout(oI),v())}))}function FI(o){return ko.mJ((()=>({gameDimensions:o.abstractGame.gameDimensions})),((W,F)=>{F&&W.gameDimensions!==F.gameDimensions&&o.ui.flyingChips.removeAllFlyingChips()}),{fireImmediately:!0})}var EI=F(840786),vI=F(467309);function aI(o){return ko.mJ((()=>({gamePhase:o.game.phase,betSpotValues:o.betting.betSpotValues})),((W,F)=>{var E;const v=o.ui.placeholders.chipPlaceholders,a=W.betSpotValues,G=F.betSpotValues,L=vI.CG(),U=null==L?void 0:L.getBoundingClientRect();if(!U)return;if(W.gamePhase!==HL.Qc.BetsOpen||!o.betting.shouldAnimate)return;const I=o.abstractGame.gameDimensions,l=null!==(E=I.reverseScale)&&void 0!==E?E:1,h={x:(U.x+U.width/2-I.left)/l,y:(U.y+U.height/2-I.top)/l};XL.Wn.forEach((W=>{const F=a[W]-G[W];if(0!==F){const E=v.find((o=>o.cardId===W&&!1===o.isBonusLayout));if(E){const v=E.position,a=new EI.i(W,Math.abs(F),F>0?h:v,F>0?v:h,nL.o,E.size);o.ui.flyingChips.addFlyingChips([a])}}}))}))}class GI{constructor(){this.betSpotValues=sL.v6,this.isValuesRestored=!1,this.isChipAnimated=!1,ko.l_(this)}get betSpotBonusValues(){return sL.p6(this.betSpotValues)}setBetSpotValues(o,W=!1,F=!1){this.betSpotValues={...this.betSpotValues,...o},this.isValuesRestored=W,this.isChipAnimated=F}}var LI=F(293205);class UI{constructor(){this.stage={...LI.lZ},ko.l_(this,void 0,{autoBind:!0})}setStage(o,W=!0){(this.stage.stage!==o||this.stage.stage===o&&!W)&&this.setCurrentStageDone(),this.stage.stage!==o&&(this.stage={stage:o,done:!W})}setCurrentStageDone(){this.stage.done||(this.stage={...this.stage,done:!0})}reset(){this.stage={...LI.lZ}}}class II{constructor(){this.flyingChips=[],ko.l_(this)}get hasFlyingChips(){return this.flyingChips.length>0}removeAllFlyingChips(){this.flyingChips=[]}removeFlyingChips(o){this.flyingChips=this.flyingChips.filter((W=>!o.includes(W)))}addFlyingChips(o){this.flyingChips=[...this.flyingChips,...o]}}var lI=F(46277);class hI{constructor(){this.chipPlaceholders=[],ko.l_(this)}setChipPlaceholder(o){const W=lI.A(this.chipPlaceholders,{cardId:o.cardId,isBonusLayout:o.isBonusLayout});W>-1?this.chipPlaceholders.splice(W,1,o):this.chipPlaceholders.push(o)}}class pI{constructor(){this.lottoGameBonusCardsReference=null,this.bonusCardsReference=null,this.lottoCardsReference=null,this.bonusCardGodRaysReference=null,this.bonusCardMultiplierTrailReference=null,ko.l_(this,{bonusCardsReference:ko.sH.shallow,lottoCardsReference:ko.sH.shallow,lottoGameBonusCardsReference:ko.sH.shallow},{autoBind:!0})}setBonusCardsReference(o){this.bonusCardsReference=o}setLottoBonusCardsReference(o){this.lottoGameBonusCardsReference=o}setBonusCardGodRaysReference(o){this.bonusCardGodRaysReference=o}setBonusCardMultiplierTrailReference(o){this.bonusCardMultiplierTrailReference=o}setLottoCardsReference(o){this.lottoCardsReference=o}dispose(){this.bonusCardsReference=null,this.lottoCardsReference=null,this.bonusCardGodRaysReference=null,this.bonusCardMultiplierTrailReference=null}}var gI=F(946889);class fI{constructor(o,W){this.abstractGame=o,this.placeholders=W,ko.l_(this)}showBetSpotTooltip(o,W){var F,E;const v=gI.A(this.placeholders.chipPlaceholders,{cardId:o,isBonusLayout:!1});this.abstractGame.addTooltip({left:null!==(F=null==v?void 0:v.position.x)&&void 0!==F?F:0,top:null!==(E=null==v?void 0:v.position.y)&&void 0!==E?E:0,id:o,type:o,label:W})}showTooltip(o,W,F){this.abstractGame.addTooltip({left:o.x,top:o.y,id:W,type:W,label:F})}hideTooltip(o){this.abstractGame.hideTooltip(o)}}class AI{constructor(){this._scale=0,this._transformOrigin="center top",ko.l_(this)}get scale(){return this._scale}get transformOrigin(){return this._transformOrigin}setTransformOrigin(o){this._transformOrigin=o}resetTransformOrigin(){this._transformOrigin="center top"}setScale(o){this._scale=o}}class kI{constructor(o){this.placeholders=new hI,this.betSpots=new GI,this.flyingChips=new II,this.tooltips=new fI(o,this.placeholders),this.videoRect=new AI,this.bonusTransition=new UI,this.references=new pI}dispose(){this.references.dispose()}}var ZI=F(266600),PI=F(835990),yI=F(626396),zI=F(990820),xI=F(602913);let NI,eI=0,tI=0,mI=!0;function rI(o){return ko.mJ((()=>({gameDimensions:o.abstractGame.gameDimensions,layoutMode:o.device.layoutMode,gamePhase:o.game.phase,cashHuntPhase:o.cashHunt.phase,crazyTimePhase:o.crazyTime.phase,coinFlipPhase:o.coinFlip.phase,pachinkoPhase:o.pachinko.phase,isRestoring:o.restore.isRestoring})),(({gameDimensions:W,layoutMode:F,gamePhase:E,crazyTimePhase:v,coinFlipPhase:a,pachinkoPhase:G,cashHuntPhase:L,isRestoring:U})=>{const{videoRect:I}=o.ui,{width:l,height:h,boxHeight:p,boxWidth:g}=W,f=Math.max(l/g,h/p,1);switch(F){case"tablet":I.setScale(f);break;case"mobilePortrait":{if(E!==HL.Qc.CoinFlip&&(tI=0),E===HL.Qc.Init)return void(NI=void 0);const F=E===HL.Qc.Resolved?o.game.prevPhase:E,l=function(o){switch(o){case HL.Qc.CoinFlip:return{light:"109,88,62",dark:"85,62,38"};case HL.Qc.CrazyTime:return{light:"142,58,58",dark:"102,25,25"};case HL.Qc.Pachinko:return{light:"91,47,94",dark:"74,23,77"};case HL.Qc.CashHunt:return{light:"38,75,52",dark:"1,64,37"};default:return{light:"100,29,11",dark:"206,121,72"}}}(F);switch(ZI.A(NI,l)||(NI=l,o.abstractGame.setBackgroundColorsMobile(l,PI.I2)),F){case HL.Qc.BetsClosed:case HL.Qc.BallDrawing:{const o=f*PI._b;jI(I),I.setScale(o);break}case HL.Qc.CashHunt:!function(o,W,F,E,v,a){const{height:G,boxHeight:L,boxWidth:U}=v;switch(W){case yI.Q.Intro:if(!E||a){o.setScale(F*PI.u1);break}o.setScale(F*PI._b),eI=setTimeout((()=>{o.setScale(F*PI.u1)}),3e3);break;default:{VI();const W=G-140,{galleryHeight:F}=function(o,W){const F=o*Math.min(1,W/(o*rU.pS));return{galleryHeight:F*rU.pS,galleryWidth:F}}(U-30,W),E=v.reverseScale||1,a=L*rU.Id.mobilePortrait.y/E+40,I=F/(rU.Id.mobilePortrait.height*L),l=(L*rU.Id.mobilePortrait.y*I-a)/(I-1||1);o.setTransformOrigin(`${.5+U/2}px ${l}px`),o.setScale(I);break}}}(I,L,f,mI,W,U);break;case HL.Qc.CrazyTime:!function(o,W,F,E,v){switch(jI(o),W){case TU.GE.Intro:if(!E||v){o.setScale(F*PI.u1);break}o.setScale(F*PI._b),eI=setTimeout((()=>{o.setScale(F*PI.u1)}),3e3);break;case TU.GE.Spinning:o.setScale(F*PI._r);break;default:o.setScale(F*PI.u1)}}(I,v,f,mI,U);break;case HL.Qc.CoinFlip:a!==zI.g.Intro||U||tI++,function(o,W,F,E,v,a){if(v>1)return VI(),void o.setScale(F*PI.Qu);switch(jI(o),W){case zI.g.Intro:if(!E||a){o.setScale(F*PI.u1);break}o.setScale(F*PI._b),eI=setTimeout((()=>{o.setScale(F*PI.u1)}),3e3);break;case zI.g.Multipliers:case zI.g.Action:o.setScale(F*PI.u1);break;default:VI(),o.setScale(F*PI.Qu)}}(I,a,f,mI,tI,U);break;case HL.Qc.Pachinko:!function(o,W,F,E,v){switch(jI(o),W){case xI.l.Intro:if(!E||v){o.setScale(F*PI.u1);break}o.setScale(F*PI._b),eI=setTimeout((()=>{o.setScale(F*PI.u1)}),3e3);break;case xI.l.DropRequest:o.setScale(F*PI.u1);break;case xI.l.FinalResult:case xI.l.Outcome:case xI.l.Dropped:VI(),o.setScale(F*PI.Qu)}}(I,G,f,mI,U);break;default:BI(I)}mI=!HL.so.includes(E);break}case"desktop":{const W=function(o){switch(o){case HL.Qc.CoinFlip:return["#E80707","#E80707","#034A63","#034A63"];case HL.Qc.CrazyTime:return["#A20606","#A20606","#EC0606","#EC0606"];case HL.Qc.Pachinko:return["#BF1C72","#BF1C72","#590363","#590363"];case HL.Qc.CashHunt:return["#0F6505","#0F6505","#125406","#125406"];case HL.Qc.BetsClosed:case HL.Qc.BallDrawing:case HL.Qc.Resolved:return["#905E06","#905E06","#905E06","#905E06"];case HL.Qc.Init:case HL.Qc.BetsOpen:return["#2F7130","#2F7130","#017C03","#017C03"]}}(E);o.abstractGame.setBackgroundColorsClassicView(W);break}default:BI(I)}}),{fireImmediately:!0})}function BI(o){VI(),jI(o),o.setScale(1)}function jI(o){o.resetTransformOrigin()}function VI(){eI&&clearTimeout(eI)}var wI=F(981298);class KI{constructor(o){this.props=o,this.payout=0,this.winMultiplier=0,this.winLevel=wI.R.None,this.showGameResult=!1,ko.l_(this)}setPayout(o,W){const{totalBet:F}=this.props.betting;if(this.payout=o,this.winLevel=this.getWinLevel(null!=W?W:o,F),this.showGameResult=F>0,this.showGameResult){const o=this.props.sound.getEcasGameResultEvent(this.props.game.phase),W=this.props.sound.getEcasWinType(this.winLevel);this.props.sound.triggerEvent(o,W)}}setWinMultiplier(o){this.winMultiplier=o}get showTryAgain(){return this.showGameResult&&0===this.payout&&!this.props.lottoGame.isQualifiedForBonus}reset(){this.setPayout(0),this.showGameResult=!1}getWinLevel(o,W){return 0===o?wI.R.None:o<=W?wI.R.Small:o>=5*W?wI.R.Big:wI.R.Medium}}class TI{constructor(o){this.props=o,this.latency=0,this.messageValidator=null;const{transport:W,rootStore:F,agApi:E}=o;this.transport=W,this.transport.onConnected((()=>{ML.S2(F,E.video.sync)({type:"subscribe"})})),this.transport.incomingMessages.onValue((W=>{this.validateMessage(W),W.type!==DL.mE.LottoFullState||W.payload.numbersDrawn.current.length!==OU.x||E.video.isPlaying.value?W.type!==DL.mE.Outcome||E.video.isPlaying.value?ML.S2(F,E.video.sync)(W):ML.S2(o.rootStore,o.agApi.video.sync)({...W,type:DL.mE.OutcomeWithSmallerDelay}):ML.S2(o.rootStore,o.agApi.video.sync)({...W,type:DL.mE.LottoFullStateWithSmallerDelay})}))}getPersistentTransport(){return this.transport}sendMessage(o){this.transport.sendStandardMessage(null,o)}setLatency(o){this.latency=o}async validateMessage(o){if(!this.messageValidator){const o=this.props.rootStore.settings.validateMessages;this.messageValidator=o?await async function(){const{schema:o}=await F.e(47528).then(F.bind(F,76)),{default:W}=await F.e(80468).then(F.t.bind(F,935312,23)),E=new W;return function(W){const F=W.type,v=o.anyOf.find((o=>o.properties.type.enum[0]===F));if(void 0!==v){const o=v,a=E.compile(o);if(!a(W))return window.console.groupCollapsed(`%cUpdate type definition for event ${F}`,"color: red"),window.console.error("Data:",JSON.stringify(W,null,"    ")),window.console.error("Errors:",JSON.stringify(a.errors,null,"    ")),window.console.error("Schema:",JSON.stringify(o)),window.console.groupEnd(),!1}return!0}}():L.A}this.messageValidator(o)}}class dI{constructor(o){this.disposeBag=new Ao.C,this.settings=function(o){return new JU(o)}({gameSettings:o.settings}),this.timeout=this.disposeBag.addDisposable(new bU),this.abstractGame=this.disposeBag.addDisposable(function(o){return new ro(o.agApi,o.settings,o.store)}({agApi:o.agApi,settings:this.settings,store:this})),this.device=function(o){return new nU(o)}({DS:o.settings.DeviceSupport,abstractGame:this.abstractGame}),this.sound=this.disposeBag.addDisposable(function(o){return new HU(o)}({abstractGame:this.abstractGame})),this.transport=function(o){return new TI(o)}({agApi:o.agApi,transport:o.transport,rootStore:this}),this.coinFlip=new wU,this.game=this.disposeBag.addDisposable(new _U),this.lottoGame=SU.sU({transport:this.transport,gameStore:this.game,abstractGame:this.abstractGame,sound:this.sound,getBettingStore:()=>this.betting}),this.ui=this.disposeBag.addDisposable(new kI(this.abstractGame)),this.betting=function(o){return new bL(o.gameStore,o.transport,o.abstractGame,o.lottoGame,o.settings,o.tooltips,o.sound)}({gameStore:this.game,transport:this.transport,abstractGame:this.abstractGame,lottoGame:this.lottoGame,settings:this.settings,tooltips:this.ui.tooltips,sound:this.sound}),this.crazyTime=function(o){return new dU(o)}({game:this.game,transport:this.transport,betting:this.betting,abstractGame:this.abstractGame,sound:this.sound}),this.autoPlay=function(o){return new uL(o)}({autoplayUI:o.agApi.autoplayUI,betting:this.betting,lotto:this.lottoGame}),this.cashHunt=function(o){return new jU(o)}({abstractGame:this.abstractGame,betting:this.betting,device:this.device,game:this.game,sound:this.sound,transport:this.transport}),this.restore=new iU,this.pachinko=new sU,this.youWin=function(o){return new KI(o)}({betting:this.betting,lottoGame:this.lottoGame,sound:this.sound,game:this.game}),this.assets=this.disposeBag.addDisposable(new dL),this.flyingMultiplier=YU.cU(),this.autoTests=new $L,this.bonus=new tU({game:this.game,crazyTime:this.crazyTime,pachinko:this.pachinko,coinFlip:this.coinFlip,cashHunt:this.cashHunt,betting:this.betting}),this.bindReactions()}dispose(){this.disposeBag.dispose()}bindReactions(){var o;this.disposeBag.addDisposables([rI(this),(o=this,ko.mJ((()=>({scale:o.ui.videoRect.scale,transformOrigin:o.ui.videoRect.transformOrigin})),(({scale:W,transformOrigin:F})=>{o.abstractGame.setVideoScaleMobile(W),o.abstractGame.setVideoTransformOrigin(F)}),{fireImmediately:!0})),oU(this),KU(this),VU(this),qU(this),FI(this),$U(this),aI(this),WI(this),cU(this),GU(this),vU(this),aU(this),LU(this),CU(this),WU(this),jo(this),XU(this),UU(this),uU(this),QU(this)])}}var nI=F(51241),uI=F(805596);const $I=Symbol("evo-screwball");function YI(o,W){uI.gB($I,o,W)}var QI=F(145023);async function CI(o,W,E,v){const a=s.W0._init(o.setup,o.styles,{...o.tableConfig,branded_cloth_gradient_dark:"113,83,47",branded_cloth_gradient_light:"52,33,0"},S.DS)._extend(fo.t);let I=L.A;const l=new Promise((o=>{I=o})),{dispose:h,getReactRoot:p,store:g,ag:f,transport:A}=function(o,W,F,E,v){const a=W.DeviceSupport.PLATFORM,G=void 0||function(o){switch(o){case Go.OD.Desktop:return Uo.LayoutType.ImmersiveV2;case Go.OD.Phone:case Go.OD.Tablet:return Uo.LayoutType.PhoneV2}}(a),L="true"===W.rawConfig.classic_view_enabled;return U={config:{layout:{initialLayout:G,layoutClassicIsHidden:!L,layouts:lo(a,L),hasHelpSupportChatButton:!0},chipstack:{position:{tablet:vo.ChipStackTabletPosition.Left,phonePortrait:vo.ChipStackPhonePortraitPosition.BottomCentered,phoneLandscape:vo.ChipStackPhoneLandscapePosition.Left}},helpNamespace:o.gameType,tableLimits:{min:W.minTableLimit(),max:W.maxTableLimit()},minBalance:W.minTableLimit(),chat:{oneLineType:{landscape:Eo.X.Bottom}},winnersList:{offset:{top:2,bottom:0}},video:{enabled:!0}},settings:W,game:{loader:o,preferencesPrefix:"crazyballs",preferenceConfiguration:{...void 0||{}},getCustomLogEnhancers:()=>F},lobby:E},I=v,ao.I({...U,game:{...U.game,mockTransports:I,gameFamily:"live"}});var U,I}(o,a,l,E,v);f.layout.mobile.setChipStackOverlapsMenu(!0),S.DS.IS_PHONE&&f.video.mobile.setScale(1.37);const k=new dI({agApi:f,transport:A,settings:a});I(ho.Os(k)),a.enableTestingAPI()&&function(o){!function(o){YI("lottoGame",{getDrawnBalls:()=>o.lottoGame.drawnBalls,getGamePhase:()=>o.game.phase,getCardNumbers:()=>o.lottoGame.gridNumbers,getWinLines:()=>o.lottoGame.winLines,getGlobalMultipliers:()=>o.lottoGame.globalMultipliers,getLottoCardBetSpotValues:()=>o.betting.betSpotValuesLottoCards,getLottoGameBetsSpotsCoordinates:()=>{var W;return function(o,W){const F={};return null==o||o.forEach((([o,E])=>{var v,a,G,L;F[E]={x:o.getGlobalPosition().x+(null!==(a=null===(v=W.abstractGame.gameDimensions)||void 0===v?void 0:v.left)&&void 0!==a?a:0),y:o.getGlobalPosition().y+(null!==(L=null===(G=W.abstractGame.gameDimensions)||void 0===G?void 0:G.top)&&void 0!==L?L:0)}})),F}(null===(W=window.autoTestsApi)||void 0===W?void 0:W.lottoGame.lottoGameBetsSpotsContainer,o)},getBonusBetSpotsCoordinates:()=>{var W;return function(o,W){const F={};return null==o||o.forEach((([o,E])=>{var v,a,G,L;F[E]={x:o.getGlobalPosition().x+(null!==(a=null===(v=W.abstractGame.gameDimensions)||void 0===v?void 0:v.left)&&void 0!==a?a:0),y:o.getGlobalPosition().y+(null!==(L=null===(G=W.abstractGame.gameDimensions)||void 0===G?void 0:G.top)&&void 0!==L?L:0)}})),F}(null===(W=window.autoTestsApi)||void 0===W?void 0:W.lottoGame.bonusBetSpotsContainer,o)},getLottoCardToggleCoordinates:()=>{var W;return function(o,W){return null==o?void 0:o.map((o=>{var F,E,v,a;return{x:o.getGlobalPosition().x+(null!==(E=null===(F=W.abstractGame.gameDimensions)||void 0===F?void 0:F.left)&&void 0!==E?E:0)+10,y:o.getGlobalPosition().y+(null!==(a=null===(v=W.abstractGame.gameDimensions)||void 0===v?void 0:v.top)&&void 0!==a?a:0)}}))}(null===(W=window.autoTestsApi)||void 0===W?void 0:W.lottoGame.lottoCardToggleContainer,o)},getBonusCardSize:()=>{var o;return function(o){const W={};return null==o||o.forEach((([o,F])=>{W[F]={width:o.width,height:o.height}})),W}(null===(o=window.autoTestsApi)||void 0===o?void 0:o.lottoGame.bonusBetSpotsContainer)},getLottoCardSize:()=>{var o;return function(o){const W={};return null==o||o.forEach((([o,F])=>{W[F]={width:o.width,height:o.height}})),W}(null===(o=window.autoTestsApi)||void 0===o?void 0:o.lottoGame.lottoGameBetsSpotsContainer)},removeFlyingChips:()=>o.ui.flyingChips.removeAllFlyingChips(),getCardModes:()=>o.lottoGame.cardModes,getWinAmount:()=>o.youWin.payout})}(o),function(o){YI("bonusGame",{getBonusGameMultiplier:()=>{var W,F;return null!==(F=null===(W=o.flyingMultiplier.flyingMultiplierData)||void 0===W?void 0:W.multiplier)&&void 0!==F?F:0},getCrazyTimeMultiplier:()=>{var W;return null!==(W=o.crazyTime.slotMultiplier)&&void 0!==W?W:0},getBonusGameBetSpotValues:()=>o.betting.betSpotValuesBonusCards,hasPlayerInteractedCashHunt:()=>void 0!==o.cashHunt.selectedSymbol,getCashHuntGamePhase:()=>o.cashHunt.phase,getCoinFlipGamePhase:()=>o.coinFlip.phase,getCrazyTimeGamePhase:()=>o.crazyTime.phase,getPachinkoGamePhase:()=>o.pachinko.phase,getChosenFlapper:()=>o.crazyTime.flapper,setSelectedSymbol:W=>o.cashHunt.setSelectedSymbol(W)})}(o),YI("translation",{getTranslation:o=>zo.T(o)}),uI.aF($I)}(k),R.Al(Fo.nM);const Z=function(o,W){return function(o){let W,F;const E=new Promise(((o,W)=>{F=W})),v=o.then((o=>(W=o,W))),a=Promise.race([v,E]);return a.dispose=()=>{var o;null===(o=null==W?void 0:W.dispose)||void 0===o||o.call(W),F(M)},a}(new Promise(((E,v)=>{F.e(99719).then(F.bind(F,174980)).then((({boot:F})=>F({DS:o,sounds:{[H.EW.Splash]:()=>W.playPaintSplatSound(),[H.EW.Shoot]:()=>W.playCannonShootSound()}}).then((o=>{E(o.game)})))).catch((o=>{v({errorId:o.errorId||D.Q.SomethingWentWrong})}))})))}(S.DS,k.cashHunt),P=p(W),{AutoplayProvider:y,autoplay:z,dispose:x}=function(o,W,F){return X.PS(O,o,W,F)}(f,{repeatBets:()=>{k.autoPlay.repeat()}},o.clientApi);k.autoPlay.bindAutoPlayAPI(z,x),Wo.oO(),await f.preferences.initialization;const N=G.jsx(y,{children:G.jsx(oo.so.Provider,{value:oo.sA(),children:G.jsx(QI.P.Provider,{value:Z,children:G.jsx(nI.Pd.Provider,{value:k,children:G.jsx(P,{})})})})});return i.ZQ()&&F.e(75697).then(F.bind(F,734461)).then((o=>o.RecordScreenPluginCustom((()=>k.game.phase),(()=>k.abstractGame.getGameNumber()),{BallDrawing:!1,BetsOpen:!1,BetsClosed:!1,Pachinko:!1,CashHunt:!1,CrazyTime:!1,CoinFlip:!1},k))),{jsx:N,videoIsReady:f.video.ready,abstractGameDispose:()=>(U.RvI.shared.stop(),U.RvI.system.stop(),J.a.shared.stop(),b.U0(),go.y(),po.A.disposeSingleton(),Z.dispose(),g.dispose(),k.dispose(),x(),h()),gameStore:k}}},827427:(o,W,F)=>{var E=F(794140),v=F(346160),a=F(809024),G=F(357947),L=F(976962),U=F(838041);window.EVO_LOADER.publishApplication("/frontend/evo/r2/","screwball.desktop",{initialize:async function(o){const W=G.K({gameLoaderParams:o});v.JL(o.i18nData,["common","crazyballs"]);const{abstractGameDispose:F,jsx:a}=await U.$(o,L.p,W),I=E.H(o.getRoot());return I.render(a),{abstractGameDispose:F,root:I}},dispose:a.L,applicationType:"game"})},217773:(o,W,F)=>{var E=F(794140),v=F(346160),a=F(809024),G=F(357947),L=F(976962),U=F(838041);window.EVO_LOADER.publishApplication("/frontend/evo/r2/","screwball.mobile",{initialize:async function(o){const W=G.K({gameLoaderParams:o});v.JL(o.i18nData,["common","crazyballs"]);const{abstractGameDispose:F,jsx:a}=await U.$(o,L.H,W),I=E.H(o.getRoot());return I.render(a),{abstractGameDispose:F,root:I}},dispose:a.L,applicationType:"game"})},417183:(o,W,F)=>{F.d(W,{DL:()=>v,Vz:()=>a,fM:()=>L,qx:()=>U,tF:()=>I,vf:()=>G});var E=F(511576);function v(o,W){return`${o}-${W}`}function a(o,W){return new RegExp(`^${o}-.+`,"s").test(W)}function G(o,W){const F=new RegExp(`^${o}-`);return W.replace(F,"")}function L(o,W,F){return`${E.$r}${o}-${W}-${F}`}function U(o,W){return new RegExp(`^${o}-.+`,"s").test(W.replace(E.$r,""))}function I(o,W,F){var v;const a=(null!==(v=F.split("/").pop())&&void 0!==v?v:F).replace(E.$r,""),G=new RegExp(`^${o}-${W}-`);return a.replace(G,"")}},810957:(o,W,F)=>{F.d(W,{De:()=>l,ED:()=>U,Wz:()=>I,X$:()=>G,hC:()=>h,qO:()=>a,sx:()=>L});var E=F(417183),v=F(511576);function a(o,W){const F=o.atlases[0],a=o.jsons[0],G=F.content.split("\n");for(let F=0;F<G.length;F++){if(!v._b.find((o=>G[F].endsWith(o))))continue;const a=G[F],L=o.images.find((({name:o})=>o===a));if(!L)continue;const U=E.fM(W,o.assetName,L.name);G[F]=U}return{url:E.fM(W,o.assetName,a.name),atlasRawData:`\n${G.join("\n")}`}}function G(o,W){const F=o.jsons[0],v=E.fM(W,o.assetName,F.name),a=o.images[0];return{textureUrl:E.fM(W,o.assetName,a.name),url:v}}function L(o,W){const F=o.images[0];return E.fM(W,o.assetName,F.name)}function U(o,W){const F=o.images[0];return E.fM(W,o.assetName,F.name)}function I(o,W){const F=o.bitmaps[0];return E.fM(W,o.assetName,F.name)}function l(o,W){const F=o.jsons[0];return E.fM(W,o.assetName,F.name)}function h(o,W=!1){const F=[],E=o.split("\n");for(const o of E)(v._b.find((W=>o.endsWith(W)))||W&&o.startsWith("data:image"))&&F.push(o);return F}},511576:(o,W,F)=>{F.d(W,{$r:()=>v,Tw:()=>E,_b:()=>G,g8:()=>a,pU:()=>L});const E="evo-cache-v2",v="assets-cache-prefix-",a="remote-cache-prefix-",G=["png","jpg","jpeg","webp","avif","svg"],L=new RegExp(`("|')\\S+\\.(${G.join("|")})("|')`,"gm")},710913:(o,W,F)=>{function E(o,W){const F=a();return E=function(W,v){let a=F[W-=142];if(void 0===E.FfnIFO){const W=function(o,W){let F,E,v=[],a=0,G="";for(o=function(o){const W="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let F="",E="";for(let E,v,a=0,G=0;v=o.charAt(G++);~v&&(E=a%4?64*E+v:v,a++%4)?F+=String.fromCharCode(255&E>>(-2*a&6)):0)v=W.indexOf(v);for(let o=0,W=F.length;o<W;o++)E+="%"+("00"+F.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(E)}(o),E=0;E<256;E++)v[E]=E;for(E=0;E<256;E++)a=(a+v[E]+W.charCodeAt(E%W.length))%256,F=v[E],v[E]=v[a],v[a]=F;E=0,a=0;for(let W=0;W<o.length;W++)E=(E+1)%256,a=(a+v[E])%256,F=v[E],v[E]=v[a],v[a]=F,G+=String.fromCharCode(o.charCodeAt(W)^v[(v[E]+v[a])%256]);return G};E.edlIeR=W,o=arguments,E.FfnIFO=!0}const G=W+F[0],L=o[G];return L?a=L:(void 0===E.RZDuZI&&(E.RZDuZI=!0),a=E.edlIeR(a,v),o[G]=a),a},E(o,W)}(function(o,W){const F=143,a="bYRR",G=174,L="g^P9",U=160,I="1i^o",l=156,h=178,p=v,g=E,f=o();for(;1;)try{if(parseInt(g(F,a))/(-1*-6193+5797*1+-11989)+-parseInt(p(G))/(-239+2*-1157+7*365)*(parseInt(p(142))/(-9549+-1*6949+16501))+-parseInt(p(163))/(-1845+6987+-5138)+-parseInt(g(182,L))/(6310+7809+-14114*1)*(-parseInt(g(U,I))/(4933*1+-1186+-3741))+parseInt(p(164))/(4*-1578+9521*1+-2*1601)*(parseInt(g(149,"7@8#"))/(162*38+9423+23*-677))+-parseInt(p(l))/(-8696+-509+9214)+parseInt(p(h))/(7928+2927+-15*723)===W)break;f["push"](f["shift"]())}catch(o){f["push"](f["shift"]())}})(a,-739285+239421+902576);{const G={};function L(o,W,F){const a=177,G="jVe!",L="^cHK",U="$r(2",I="Kt2c",l="p@cs",h=170,p="!EqX",g="Lxnk",f=162,A="$tbq",k=E,Z=v,P={HGfjS:function(o,W){return o+W},NXMFs:function(o,W){return o&W},lxALo:function(o,W,F){return o(W,F)},nOJtv:function(o,W){return o*W},znXRe:function(o,W){return o<W},lIMpy:function(o,W){return o+W},bpAmv:function(o,W){return o^W},LjmoL:function(o,W){return o+W},VnUZW:function(o,W){return o^W},zRLiJ:function(o,W,F){return o(W,F)},Slgam:function(o,W){return o&W}};let y=-3*1957+37*-82+8905,z="";const x=P[Z(173)](P[Z(166)](-35021+1*19972+-2878*-28,P[Z(146)](parseInt,W,-7263+-1*-2779+4520))[k(151,"^cHK")](6247+709+-6940)[k(168,"!Djn")](1*3951+79*38+6949*-1,"0"),Math[k(171,"Kt2c")](P[Z(179)](2*-4327+2419+6335,F))[Z(161)](-4823+-3477+-28*-297)[Z(157)](-9028+-858*-11+-400,"0")),N=o[k(152,"E6fn")](-(9742*-1+-3067*1+12823*1));for(let o=-9378+94*1+9284;P[k(a,G)](o,5187+6012+2237*-5);o+=-4929+-2892+7823){const W=P[k(145,"p@cs")](parseInt,x[Z(159)](o,P[k(153,L)](o,7253+566*13+2087*-7)),8232+6720+-14936);y^=W,z+=P[k(148,U)](P[k(181,I)](parseInt,N[k(183,l)](o,P[k(h,p)](o,-2117*-1+-422*20+6325)),-2137*2+3157*-1+7447),W)[k(150,g)](-4336+3869+-1*-483)[k(f,A)](-179*39+-3966+-10949*-1,"0")}return z=P[k(147,"nPti")](P[k(175,"BoN$")](P[Z(165)](parseInt,o[k(176,"%aj%")](-(6110+-623*3+1*-4225),-(5422+-2051+-3357)),-7709+-1004+8729),P[k(167,"g^P9")](-15*-36+4449+4734*-1,y))[Z(161)](-8443*1+-1597*-1+-94*-73)[Z(157)](-1*-1153+1*1539+-2690,"0"),z),z}G["k"]=()=>L,F["d"](W,G),F(-551396+-264681+63793*18)}function v(o,W){const F=a();return v=function(W,E){let a=F[W-=142];void 0===v.sLkGav&&(v.TUdqBK=function(o){const W="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let F="",E="";for(let E,v,a=0,G=0;v=o.charAt(G++);~v&&(E=a%4?64*E+v:v,a++%4)?F+=String.fromCharCode(255&E>>(-2*a&6)):0)v=W.indexOf(v);for(let o=0,W=F.length;o<W;o++)E+="%"+("00"+F.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(E)},o=arguments,v.sLkGav=!0);const G=W+F[0],L=o[G];return L?a=L:(a=v.TUdqBK(a),o[G]=a),a},v(o,W)}function a(){const o=["n2HpCM9Zvq","ELjmAuO","tLHnrNm","imk1n0hcRW","WPhcQfBcVmkgWQXCWPe","ntCZntm0nfLREuXowG","W5FcMqbJWQq","ySklWOVcR8o/","nwLsrhrpDq","seDMALm","mKXizvrqDG","eJ7cUCoXW4e","yCkXW6v0WOm","WR/dThHUWPC","ndq4ntaYmhjpu0HkDG","BK9kDhy","lSoAyMtdKmoIs8ktWPZcICktbSot","FmkCWR/cJCo0","rSkWaMtcTSotoG","WPdcT10NWQO","oty4mtu0C3PbzgXN","W6tdTmkUWRtdS8ooW4lcNCkTfmoP","WOJdQxuGW6qvoSkTcsidgZy","WO/cO3uiWQa","BhHbtg8","vSkanZNcQG","WRxdM0RcOqW","uSkrW5TqW5BcS24NW70kWOWtWR8","WOmexxVdKN/cIh0","nCkjoK/dVCoWW4Pw","WQddMwz9W6K","lCkVjeVdTG","yHZcQhnSW7eHzJXqWPW","W5ehobn5aei","mZK4mZK1ofPAD1vXzW","CgfKu3rHCNq","W4mIiSoIWPpdO1ZcJZy6WRNdNSko","C2XPy2u","zdbQiCowt8kyW5FdIWhcN1hcSq","Dg9tDhjPBMC","pmo8a8kZrmodp8ke","mZaWody2ngHPDuDmCa"];return(a=function(){return o})()}},618736:(o,W,F)=>{F.d(W,{A:()=>Z});var E=F(212429),v=F(276111);const a=4,G=.001,L=1e-7,U=10,I=11,l=1/(I-1),h="function"==typeof Float32Array;function p(o,W){return 1-3*W+3*o}function g(o,W){return 3*W-6*o}function f(o){return 3*o}function A(o,W,F){return((p(W,F)*o+g(W,F))*o+f(W))*o}function k(o,W,F){return 3*p(W,F)*o*o+2*g(W,F)*o+f(W)}function Z(o,W,F,p){if(!(o>=0&&o<=1&&F>=0&&F<=1))throw new E.gE("bezier x values must be in [0, 1] range");if(o===W&&F===p)return v.sn;const g=h?new Float32Array(I):new Array(I);for(let W=0;W<I;++W)g[W]=A(W*l,o,F);return function(E){return 0===E||1===E?E:A(function(W){let E=0,v=1;const h=I-1;for(;v!==h&&g[v]<=W;++v)E+=l;--v;const p=E+(W-g[v])/(g[v+1]-g[v])*l,f=k(p,o,F);return f>=G?function(o,W,F,E){let v=W;for(let W=0;W<a;++W){const W=k(v,F,E);if(0===W)return v;v-=(A(v,F,E)-o)/W}return v}(W,p,o,F):0===f?p:function(o,W,F,E,v){let a,G,I=0,l=F,h=W;do{G=h+(l-h)/2,a=A(G,E,v)-o,a>0?l=G:h=G}while(Math.abs(a)>L&&++I<U);return G}(W,E,E+l,o,F)}(E),W,p)}}},59181:(o,W,F)=>{F.d(W,{y:()=>k,l:()=>f});var E=F(974486),v=F(212429),a=F(484802),G=F(810957);let L;var U=F(535475),I=F(511576),l=F(933233);function h(o,W,F,E){if(function(o){return(null==o?void 0:o.startsWith("data:"))||!1}(o)||function(o){return(null==o?void 0:o.startsWith("blob:"))||!1}(o))return o;const v=l.w(o);return v.searchParams.wRetryCount=W.toString(),v.searchParams.wRetryDelay=F.toString(),v.searchParams.wRetryBackoffFactor=E.toString(),v.toString()}function*p(o){return yield o}const g={[U.i.PixiSpine]:function*(o){const W={...o,url:yield o.url},F=G.hC(o.atlasRawData);for(const o of F)yield`${window.location.origin}${o}`;return W},[U.i.PlainImage]:p,[U.i.PixiTexture]:p,[U.i.PixiSpriteSheet]:function*(o){return{...o,url:yield o.url,textureUrl:yield o.textureUrl}},[U.i.PixiBitmap]:function*(o){return yield o},[U.i.PixiEmitter]:p};var f;let A;!function(o){o.AllLowQualityAssetsAreReady="allLowQualityAssetsAreReady",o.ConsumersShouldReloadAssets="consumersShouldReloadAssets",o.NewAssetWasRegistered="newAssetWasRegistered",o.NewBrandingOptionIsAvailable="newBrandingOptionIsAvailable",o.LowQualitySwitchWasToggled="lowQualitySwitchWasToggled",o.BrandingWasChanged="brandingWasChanged",o.Inited="inited"}(f||(f={}));class k{static get instance(){var o;return null!==(o=this._instance)&&void 0!==o||(this._instance=new k),this._instance}constructor(){this.eventEmitter=new E.b,this.brandingOptions=new Set,this.registeredAssets={[U.i.PlainImage]:[],[U.i.PixiSpine]:[],[U.i.PixiTexture]:[],[U.i.PixiSpriteSheet]:[],[U.i.PixiBitmap]:[],[U.i.PixiEmitter]:[]},this._currentBranding=null,this._useLowQualityAssets=!1,this.retryCount=3,this.retryDelay=100,this.retryBackoffFactor=1.5,this._cacheStorageUrlsSet=new Set,this.pendingLowQualityAssets=new Set;const o=window.EVO_LOADER.instance;if("empty"===o.kind)throw new v.gE("ConfigurationManager can't be initialized before app is ready. Please make sure that you don't use it in the module scope");o.subscribe("disposing",(()=>{this.reset(),k._instance=null}))}async init(o,W){this._currentGameType=o,(window.EVO_VERBOSE()||null!==W)&&(A=await async function(){try{return L||(L=await F.e(27672).then(F.bind(F,827672))),L}catch(o){return void console.error(o)}}(),await(null==A?void 0:A.initAssetsCache(W))),this._cacheStorageUrlsSet=await async function(){try{const o=new Set,W=await window.caches.open(I.Tw);return(await W.keys()).forEach((({url:W})=>o.add(W))),o}catch(o){return console.error(o),new Set}}(),this.eventEmitter.emit(f.Inited)}get gameType(){if(!this._currentGameType)throw new v.gE("ConfigurationManager wasn't inited: empty gameType");return this._currentGameType}get gameTypeSafe(){return this._currentGameType}get useLowQualityAssets(){return this._useLowQualityAssets}set useLowQualityAssets(o){o!==this._useLowQualityAssets&&(this._useLowQualityAssets=o,this.updateConfigurations(),this.eventEmitter.emit(f.LowQualitySwitchWasToggled),this.eventEmitter.emit(f.ConsumersShouldReloadAssets))}get currentBranding(){return this._currentBranding}set currentBranding(o){o!==this._currentBranding&&(this._currentBranding=o,this.updateConfigurations(),this.eventEmitter.emit(f.BrandingWasChanged),this.eventEmitter.emit(f.ConsumersShouldReloadAssets))}registerPlainImage(o,W,F=null,E={}){return this.registerAsset(U.i.PlainImage,o,W,F,E)}registerPixiSpine(o,W,F=null,E={}){return this.registerAsset(U.i.PixiSpine,o,W,F,E)}registerPixiBitmap(o,W,F=null,E={}){return this.registerAsset(U.i.PixiBitmap,o,W,F,E)}registerPixiTexture(o,W,F=null,E={}){return this.registerAsset(U.i.PixiTexture,o,W,F,E)}registerPixiSpriteSheet(o,W,F=null,E={}){return this.registerAsset(U.i.PixiSpriteSheet,o,W,F,E)}registerPixiEmitter(o,W){return this.registerAsset(U.i.PixiEmitter,o,W)}reportPlainImageLoaded(o){this.reportAssetLoaded(U.i.PlainImage,o)}reportPixiSpineLoaded(o){this.reportAssetLoaded(U.i.PixiSpine,o)}reportPixiBitmapLoaded(o){this.reportAssetLoaded(U.i.PixiBitmap,o)}reportPixiTextureLoaded(o){this.reportAssetLoaded(U.i.PixiTexture,o)}reportPixiSpriteSheetLoaded(o){this.reportAssetLoaded(U.i.PixiSpriteSheet,o)}setRetryCount(o){this.retryCount=o}setRetryDelay(o){this.retryDelay=o}setRetryBackoffFactor(o){this.retryBackoffFactor=o}registerAsset(o,W,F,E=null,v={}){const G=this.getAssetId(o,W),L=g[o],U=this.updateConfigurationWithWorkerParams(F,L),I=E?this.updateConfigurationWithWorkerParams(E,L):null,l={},h=this.brandingOptions.size;for(const[o,W]of Object.entries(v))l[o]=this.updateConfigurationWithWorkerParams(W,L),this.brandingOptions.add(o);this.brandingOptions.size!==h&&this.eventEmitter.emit(f.NewBrandingOptionIsAvailable);const p=this.registeredAssets[o],k=p.find((o=>o.name===W));if(k)return this.pendingLowQualityAssets.delete(G),k.variants.originalConfig=U,k.variants.branding=l,k.variants.lowQualityConfig=I,k.currentConfig.value=this.getEffectiveConfigForAsset(k,o),k.currentConfig.value===I&&this.pendingLowQualityAssets.add(G),k.currentConfig;let Z=null;A&&(Z=A.getAssetsCacheConfigByName(this.gameTypeSafe,W,o));const P={name:W,currentConfig:new a.L(U),variants:{originalConfig:U,branding:l,externalConfigOverride:new a.L(Z),lowQualityConfig:I}};return p.push(P),P.currentConfig.value=this.getEffectiveConfigForAsset(P,o),P.variants.externalConfigOverride.subscribe((()=>{P.currentConfig.value=this.getEffectiveConfigForAsset(P,o),this.eventEmitter.emit(f.ConsumersShouldReloadAssets)}),!1),P.currentConfig.value===I&&this.pendingLowQualityAssets.add(G),this.eventEmitter.emit(f.NewAssetWasRegistered),P.currentConfig}getEffectiveConfigForAsset(o,W){const F=g[W];if(o.variants.externalConfigOverride.value)return o.variants.externalConfigOverride.value;if(this.useLowQualityAssets&&o.variants.lowQualityConfig){const W=function(o,W,F,E){try{const W=F(o.variants.originalConfig);let v=W.next();for(;!v.done;){if(!E.has(v.value))return!1;v=W.next()}return!0}catch(o){console.error(o)}return!1}(o,0,F,this._cacheStorageUrlsSet);return W?o.variants.originalConfig:o.variants.lowQualityConfig}return this.currentBranding&&o.variants.branding[this.currentBranding]||o.variants.originalConfig}reportAssetLoaded(o,W){if(!this.useLowQualityAssets||0===this.pendingLowQualityAssets.size)return;const F=this.getAssetId(o,W);this.pendingLowQualityAssets.delete(F),0===this.pendingLowQualityAssets.size&&this.eventEmitter.emit(f.AllLowQualityAssetsAreReady)}updateConfigurations(){for(const[o,W]of Object.entries(this.registeredAssets))for(const F of W)F.currentConfig.value=this.getEffectiveConfigForAsset(F,o)}updateConfigurationWithWorkerParams(o,W){if(0===this.retryCount)return o;const F=W(o);let E=F.next();for(;!E.done;)E=F.next(h(E.value,this.retryCount,this.retryDelay,this.retryBackoffFactor));return E.value}getAssetId(o,W){return`${o}__${W}`}reset(){this.eventEmitter.removeAllListeners();for(const o of Object.keys(this.registeredAssets))this.registeredAssets[o]=[]}}k._instance=null},535475:(o,W,F)=>{var E;F.d(W,{i:()=>E}),function(o){o.PlainImage="plainImage",o.PixiSpine="pixiSpine",o.PixiTexture="pixiTexture",o.PixiSpriteSheet="pixiSpriteSheet",o.PixiBitmap="pixiBitmap",o.PixiEmitter="pixiEmitter"}(E||(E={}))},714806:(o,W,F)=>{var E;F.d(W,{Q:()=>E}),function(o){o.BrowserNotSupported="message.unsupportedBrowserAdvice",o.DeviceNotSupported="mobile.unsupportedDevice_short",o.AssetNotLoaded="message.unableLoadGame",o.SomethingWentWrong="message.unableLoadGame"}(E||(E={}))},898668:(o,W,F)=>{F.d(W,{I:()=>v});var E=F(276111);class v{constructor(o=[]){this.curvePoints=o.map((o=>({point:o.point,easing:o.easing||"linear"})))}sample(o){if(0===this.curvePoints.length)return 1;if(1===this.curvePoints.length)return this.curvePoints[0].point[1];if(o>=this.curvePoints[this.curvePoints.length-1].point[0])return this.curvePoints[this.curvePoints.length-1].point[1];const W=2===this.curvePoints.length?0:this.findKeyIndexAt(o),F=this.curvePoints[W].point,v=this.curvePoints[W+1].point,a=Math.abs(v[0]-F[0]);let G;G=0===a?1:Math.min(Math.max((o-F[0])/a,0),1);const L=(0,E.d9[this.curvePoints[W+1].easing||"linear"])(G);return F[1]*(1-L)+L*v[1]}addPoint(o,W="linear"){const F=this.curvePoints;if(0===F.length)F.push({point:o,easing:W});else if(F[0].point[0]>o[0])F.unshift({point:o,easing:W});else if(F[F.length-1].point[0]<o[0])F.push({point:o,easing:W});else{const F=this.findKeyIndexAt(o[0]);this.curvePoints=[...this.curvePoints.slice(0,F+1),{point:[o[0],o[1]],easing:W},...this.curvePoints.slice(F+1)]}}setPoint(o){const W=this.curvePoints.indexOf(o);-1!==W&&(this.curvePoints[W]=o,this.sortPoints())}removePoint(o){const W=this.getCurvePointIndex(o);-1!==W&&this.curvePoints.splice(W,1)}sortPoints(){this.curvePoints.sort(((o,W)=>o.point[0]-W.point[0]))}getCurvePointIndex(o){return this.curvePoints.findIndex((W=>W.point[0]===o[0]&&W.point[1]===o[1]))}toJson(){return this.curvePoints}findKeyIndexAt(o){if(o<=this.curvePoints[0].point[0])return 0;const W=this.curvePoints.length;if(o>=this.curvePoints[W-1].point[0])return W-2;let F=0,E=W;for(;F!==E;){const W=F+Math.floor((E-F)/2);this.curvePoints[W].point[0]>=o?E=W:F=W+1}return F-1}}},335914:(o,W,F)=>{F.d(W,{Od:()=>e,hZ:()=>B});var E=F(974486),v=F(230135);class a{constructor(){this.type=v.V.donut}init(o){this.emitterConfig=o}setPosition(o,W){const F=W.next()*Math.PI*2;let E=W.next()+W.next();const v=this.emitterConfig.innerRadius/this.emitterConfig.outerRadius;E>1&&(E=2-E),E<v&&(E=v+E*((1-v)/v));const a=this.emitterConfig.outerRadius*E;o[0]+=Math.cos(F)*a,o[1]+=Math.sin(F)*a}update(o){this.emitterConfig=o}}class G{constructor(){this.type=v.V.ellipse}init(o){this.emitterConfig=o}setPosition(o,W){const F=W.next()*Math.PI*2;if(this.emitterConfig.height===this.emitterConfig.width){const E=this.emitterConfig.width*Math.sqrt(W.next());o[0]+=Math.cos(F)*E,o[1]+=Math.sin(F)*E}else{const E=Math.sqrt(W.next()),v=E*Math.cos(F),a=E*Math.sin(F);o[0]+=v*this.emitterConfig.width/2,o[1]+=a*this.emitterConfig.height/2}}update(o){this.emitterConfig=o}}class L{constructor(){this.type=v.V.frame,this.outerWidth=0,this.outerHeight=0,this.innerWidth=0,this.innerHeight=0,this.squares=[{square:0,w:0,h:0,xShift:0,yShift:0},{square:0,w:0,h:0,xShift:0,yShift:0},{square:0,w:0,h:0,xShift:0,yShift:0},{square:0,w:0,h:0,xShift:0,yShift:0}]}init(o){this.outerWidth=o.outerWidth,this.outerHeight=o.outerHeight,this.innerWidth=o.innerWidth,this.innerHeight=o.innerHeight,this.calcFrameRectangles()}setPosition(o,W){let F=W.next();for(let E=0;E<this.squares.length;E+=1)if(F-=this.squares[E].square,F<=0||3===E){o[0]+=this.squares[E].xShift,o[1]+=this.squares[E].yShift,o[0]+=(W.next()-.5)*this.squares[E].w,o[1]+=(W.next()-.5)*this.squares[E].h;break}}update(o){this.outerWidth===o.outerWidth&&this.outerHeight===o.outerHeight&&this.innerWidth===o.innerWidth&&this.innerHeight===o.innerHeight||(this.outerWidth=o.outerWidth,this.outerHeight=o.outerHeight,this.innerWidth=o.innerWidth,this.innerHeight=o.innerHeight,this.calcFrameRectangles())}calcFrameRectangles(){const o=this.outerHeight-this.innerHeight,W=this.outerWidth-this.innerWidth,F=o/2,E=this.outerWidth*F,v=this.outerWidth*F,a=W/2,G=this.innerHeight*a,L=this.innerHeight*a,U=E+v+G+L;this.squares[0].w=this.outerWidth,this.squares[0].h=F,this.squares[0].xShift=0,this.squares[0].yShift=-(this.innerHeight/2+F/2),this.squares[0].square=E/U,this.squares[1].w=a,this.squares[1].h=this.innerHeight,this.squares[1].xShift=this.innerWidth/2+a/2,this.squares[1].yShift=0,this.squares[1].square=L/U,this.squares[2].w=this.outerWidth,this.squares[2].h=F,this.squares[2].xShift=0,this.squares[2].yShift=this.innerHeight/2+F/2,this.squares[2].square=v/U,this.squares[3].w=a,this.squares[3].h=this.innerHeight,this.squares[3].xShift=-(this.innerWidth/2+a/2),this.squares[3].yShift=0,this.squares[3].square=G/U}}var U=F(351673);class I{constructor(){this.type=v.V.image,this.vectors=[],this.image=null,this.scale=[1,1],this.threshold=0}init(o){var W;this.emitterConfig=o,o.image&&o.image instanceof Image&&(this.updatePixelPositions(o.image,null!==(W=o.threshold)&&void 0!==W?W:0),this.updateScale(this.emitterConfig))}setPosition(o,W){if(!this.image)return;const F=0|W.nextInRange(0,this.vectors.length),E=this.vectors[F];o[0]+=(E[0]-this.image.width/2)*this.scale[0],o[1]+=(E[1]-this.image.height/2)*this.scale[1]}update(o){var W;this.emitterConfig={...this.emitterConfig,...o};const F=o.image||this.image,E=null!==(W=o.threshold)&&void 0!==W?W:this.threshold;!F||F===this.image&&this.threshold===E||this.updatePixelPositions(F,E),this.updateScale(this.emitterConfig)}updateScale(o){this.image&&(void 0!==o.scale?this.scale="number"==typeof o.scale?[o.scale,o.scale]:[...o.scale]:void 0!==o.width&&void 0!==o.height&&(this.scale=[o.width/this.image.width,o.height/this.image.height]))}updatePixelPositions(o,W){this.vectors=[],this.image=null,this.threshold=W;const F=U.M5(o);if(!F)return;this.image=o;const{width:E,height:v}=F,a=F.data;for(let o=0;o<E;o++)for(let W=0;W<v;W++)a[4*(W*E+o)+3]>this.threshold&&this.vectors.push([o,W])}}class l{constructor(){this.type=v.V.point}init(){}setPosition(){}update(){}}class h{constructor(){this.type=v.V.rectangle}init(o){this.emitterConfig=o}setPosition(o,W){o[0]+=(W.next()-.5)*this.emitterConfig.width,o[1]+=(W.next()-.5)*this.emitterConfig.height}update(o){this.emitterConfig=o}}class p{constructor(){this.type=v.V.triangle,this.cornersSize=0,this.cornersPosition=[0,0],this.corners=[[0,0],[0,0],[0,0]]}init(o){this.emitterConfig=o}setPosition(o,W){var F;this.emitterConfig.size===this.cornersSize&&this.cornersPosition[0]===o[0]&&this.cornersPosition[1]===o[1]||(this.cornersSize=null!==(F=this.emitterConfig.size)&&void 0!==F?F:100,this.cornersPosition[0]=o[0],this.cornersPosition[1]=o[1],function(o,W,F){const E=g*W/2,v=-2/3*E,a=-W/2,G=1/3*E,L=W/2,U=1/3*E;F[0][0]=o[0]+0,F[0][1]=o[1]+v,F[1][0]=o[0]+a,F[1][1]=o[1]+G,F[2][0]=o[0]+L,F[2][1]=o[1]+U}(o,this.cornersSize,this.corners));const E=W.next(),v=W.next(),a=Math.sqrt(E),[G,L,U]=this.corners;o[0]=(1-a)*G[0]+a*(1-v)*L[0]+a*v*U[0],o[1]=(1-a)*G[1]+a*(1-v)*L[1]+a*v*U[1]}update(o){this.emitterConfig=o}}const g=Math.sqrt(3);function f(o){switch(o){case v.V.ellipse:return new G;case v.V.rectangle:return new h;case v.V.donut:return new a;case v.V.triangle:return new p;case v.V.frame:return new L;case v.V.point:return new l;case v.V.image:return new I;default:return console.warn(`Unknown emitter type: "${o}"!`),new l}}var A=F(233387);class k{constructor(){this.scale=[1,1],this.rotation=0,this.position=[0,0]}applyToPoint(o,W){const F=W;F[0]=o[0],F[1]=o[1];const E=Math.sin(this.rotation),v=Math.cos(this.rotation);return F[0]=A.eL(F[0],F[1],E,v),F[1]=A.Z8(F[0],F[1],E,v),F[0]*=this.scale[0],F[1]*=this.scale[1],F[0]+=this.position[0],F[1]+=this.position[1],F}reset(){this.scale[0]=1,this.scale[1]=1,this.rotation=0,this.position[0]=0,this.position[1]=0}}const Z=[0,0];class P{constructor(o,W,F=!1){this.config=o,this.controller=W,this.isAlive=F,this.customProperties=new Map,this.transform=new k,this.freezePosition=!1,this.opacity=0,this.opacityInit=0,this.progress=0,this.directionVector=[0,0],this.velocity=[0,0],this.initialPosition=[0,0],this.angularVelocity=0,this.initialVelocity=0,this.linearAcceleration=0,this.tangentialAcceleration=0,this.radialAcceleration=0,this.scale=0,this.lifetime=0,this.lifetimeLeft=0,this.acceleration=[0,0]}awake(o,W,F,E){this.isAlive=E,this.config=o,this.freezePosition=!1,this.transform.reset();const v=this.controller.random,a=o.angularVelocity,G=o.initialRotation;this.angularVelocity=v.next()*(a.max-a.min)+a.min,this.transform.rotation=v.next()*(G.max-G.min)+G.min,this.initialPosition[0]=W.position[0]*F.width,this.initialPosition[1]=W.position[1]*F.height,this.controller.emitter.setPosition(this.initialPosition,v),this.transform.position[0]=this.initialPosition[0],this.transform.position[1]=this.initialPosition[1];const L=o.spread*Math.PI/180,U=(2*v.next()-1)*L,I=Math.sin(U),l=Math.cos(U);this.directionVector[0]=l*o.directionVector[0]-I*o.directionVector[1],this.directionVector[1]=I*o.directionVector[0]+l*o.directionVector[1],A.hF(this.directionVector),this.color=this.controller.colorsManager.getInitParticleColor(this.initialPosition,F,this.controller.random);const h=o.initialVelocity;this.initialVelocity=v.next()*(h.max-h.min)+h.min;const p=o.linearAcceleration;this.linearAcceleration=v.next()*(p.max-p.min)+p.min,this.velocity[0]=this.initialVelocity*this.directionVector[0],this.velocity[1]=this.initialVelocity*this.directionVector[1],this.acceleration[0]=0,this.acceleration[1]=0;const g=o.tangentialAcceleration;this.tangentialAcceleration=v.next()*(g.max-g.min)+g.min;const f=o.radialAcceleration;this.radialAcceleration=v.next()*(f.max-f.min)+f.min;const k=o.scale,Z=k.curve.sample(0);this.scale=v.next()*(k.max-k.min)+k.min,this.transform.scale[0]=this.scale*Z,this.transform.scale[1]=this.scale*Z;const P=o.opacity;this.opacityInit=v.next()*(P.max-P.min)+P.min,this.opacity=this.opacityInit*P.curve.sample(0);const y=o.lifetime;this.lifetime=v.next()*(y.max-y.min)+y.min,this.lifetimeLeft=this.lifetime}addAcceleration(o,W){this.acceleration[0]+=o,this.acceleration[1]+=W}addVelocity(o,W){this.velocity[0]+=o,this.velocity[1]+=W}update(o,W){if(!this.isAlive||this.lifetimeLeft<0||o>=this.lifetimeLeft)return this.isAlive=!1,this.lifetimeLeft=0,this.progress=1,!1;const F=(this.lifetime-this.lifetimeLeft)/this.lifetime;this.progress=F;const E=this.config;if(this.lifetimeLeft-=o,!this.freezePosition){const v=E.linearAcceleration.curve.sample(F)*this.linearAcceleration;if(0!==v){const o=Z;o[0]=this.velocity[0],o[1]=this.velocity[1],A.hF(o),this.acceleration[0]+=o[0]*v,this.acceleration[1]+=o[1]*v}if((this.tangentialAcceleration||this.radialAcceleration)&&this.transform.position[0]!==this.initialPosition[0]||this.transform.position[1]!==this.initialPosition[1]){const o=Z;o[0]=this.transform.position[0]-this.initialPosition[0],o[1]=this.transform.position[1]-this.initialPosition[1],A.hF(o);const W=E.tangentialAcceleration.curve.sample(F)*this.tangentialAcceleration;0!==W&&(this.acceleration[0]+=-o[1]*W,this.acceleration[1]+=o[0]*W),0!=E.radialAcceleration.curve.sample(F)*this.radialAcceleration&&(this.acceleration[0]+=o[0]*this.radialAcceleration,this.acceleration[1]+=o[1]*this.radialAcceleration)}this.acceleration[0]+=E.gravityVector[0],this.acceleration[1]+=E.gravityVector[1],this.acceleration[0]*=o,this.acceleration[1]*=o,this.velocity[0]+=this.acceleration[0],this.velocity[1]+=this.acceleration[1],this.velocity[0]*=W,this.velocity[1]*=W;const a=this.transform.position[0],G=this.transform.position[1];if(this.transform.position[0]+=this.velocity[0]*o,this.transform.position[1]+=this.velocity[1]*o,this.acceleration[0]=0,this.acceleration[1]=0,E.initialRotation.syncWithDirection){const o=Math.atan2(this.transform.position[1]-G,this.transform.position[0]-a);this.transform.rotation=o+E.initialRotation.min}}if(!E.initialRotation.syncWithDirection){const W=E.angularVelocity.curve.sample(F);this.transform.rotation+=this.angularVelocity*W*o}const v=E.scale.curve.sample(F);this.transform.scale[0]=this.scale*v,this.transform.scale[1]=this.scale*v,this.color=this.controller.colorsManager.getUpdateParticleColor(this.transform.position,this.controller.system.systemSize,F)||this.color,this.opacity=this.opacityInit*E.opacity.curve.sample(F);for(const W of this.customProperties.values())W.update(o);return!0}dispose(){for(const o of this.customProperties.values())o.dispose();this.customProperties.clear()}}var y=F(918973),z=F(481900);const x={r:255,g:255,b:255};class N{constructor(o){this.init(o),this.gradient=o.gradient,this.mode=o.mode,this.colors=[...o.colors]}update(o){if(this.gradient!==o.gradient)this.init(o);else if(this.colors.length!==o.colors.length)this.init(o);else for(let W=0;W<o.colors.length;W+=1)if(o.colors[W]!==this.colors[W]){this.init(o);break}this.gradient=o.gradient,this.mode=o.mode,this.colors=[...o.colors]}getInitParticleColor(o,W,F){var E;if(this.mode===y.F.Off)return x;if(this.mode===y.F.Random){const o=Math.floor(F.next()*this.gradientColors.length);return null!==(E=this.gradientColors[o])&&void 0!==E?E:x}return this.getUpdateParticleColor(o,W,0)}getUpdateParticleColor(o,W,F){var E;if(this.mode===y.F.Off)return x;if(this.mode===y.F.Random)return;let v=0;const a=this.gradientColors.length-1;return this.mode===y.F.OverLife?v=Math.floor(F*a):this.mode===y.F.OverX?v=Math.floor(o[0]/W.width*a):this.mode===y.F.OverY&&(v=Math.floor(o[1]/W.height*a)),v=Math.min(Math.max(0,v),a),null!==(E=this.gradientColors[v])&&void 0!==E?E:x}init(o){if(o.mode===y.F.Off)return void(this.gradientColors=[]);const W=this.getColorsDiffSize(o.colors);if(o.gradient&&o.colors.length>1&&W>0){const F=W,E=W*(o.colors.length-1);let v=0;this.gradientColors=new Array(E);for(let W=1;W<o.colors.length;W+=1){const E=z.iN(o.colors[W-1]),a=z.iN(o.colors[W]);for(let o=0;o<=F;o+=1){const W=o/F;this.gradientColors[v]={r:Math.round(E.r*(1-W)+a.r*W),g:Math.round(E.g*(1-W)+a.g*W),b:Math.round(E.b*(1-W)+a.b*W)},v+=1}}}else this.gradientColors=o.colors.map(z.iN)}getColorsDiffSize(o){let W=0;for(let F=1;F<o.length;F+=1){const E=z.iN(o[F-1]),v=z.iN(o[F]);W=Math.max(W,Math.abs(E.r-v.r),Math.abs(E.g-v.g),Math.abs(E.b-v.b))}return W}}var e,t,m=F(23299),r=F(894962);!function(o){o.OnParticleEmitted="onParticleEmitter",o.OnParticleDisposed="onParticleDisposed",o.OnBeforeParticleUpdated="onBeforeParticleUpdated",o.OnAfterParticleUpdated="onAfterParticleUpdated",o.OnStarted="onStarted",o.OnFinished="onFinished",o.OnPluginAdded="onPluginAdded",o.OnPluginRemoved="onPluginRemoved",o.OnBeforeAllParticlesUpdated="onBeforeAllParticlesUpdated",o.OnAfterAllParticlesUpdated="onAfterAllParticlesUpdated"}(e||(e={})),function(o){o.Active="Active",o.Paused="Paused",o.Done="Done",o.Disposed="Disposed"}(t||(t={}));class B{get isPaused(){return this.state===t.Paused}get isDone(){return this.state===t.Done}get isActive(){return this.state===t.Active}get isDisposed(){return this.state===t.Disposed}get isEmitting(){return this.aliveParticlesCount>0||this.config.loop||this.emitAmount>0}get aliveParticles(){return this.aliveParticlesCount}get random(){return this.system.random}constructor(o,W,F,v){var a,G,L;this.controllerId=o,this.configId=W,this.eventEmitter=new E.b,this.plugins=new Map,this.excludeFromSerialization=!1,this.hideInEditor=!1,this.aliveParticlesCount=0,this.state=t.Done,this.emitAmount=0,this.onConfigUpdated=()=>{if(this.colorsManager.update(this.config.particle.colors),this.config.emitter.type!==this.emitter.type?(this.emitter=f(this.config.emitter.type),this.emitter.init(this.config.emitter)):this.emitter.update(this.config.emitter),this.totalAmount!==this.config.amount){if(this.particlesPool.length>this.config.amount){for(let o=this.config.amount;o<this.particlesPool.length;o+=1)this.particlesPool[o].dispose();this.particlesPool.length=this.config.amount,this.aliveParticlesCount=Math.min(this.config.amount,this.aliveParticlesCount)}else{let o=this.config.amount-this.particlesPool.length;for(;o>0;)this.particlesPool.push(this.createParticle(!1)),o-=1}this.totalAmount=this.config.amount,this.emitAmount=this.config.amount}},this.system=F,this.config=this.system.getConfigOrThrow(W),this.config.eventEmitter.on(m.Y$.ConfigChanged,this.onConfigUpdated,!1),this.totalAmount=this.config.amount,this.emissionDelay=0,this.emitAmount=this.totalAmount,this.graphics=v.graphics,this.graphics.init(this.system.renderer,this),this.excludeFromSerialization=null!==(a=v.excludeFromSerialization)&&void 0!==a&&a,this.hideInEditor=null!==(G=v.hideInEditor)&&void 0!==G&&G,this.colorsManager=new N(this.config.particle.colors),this.emitter=null!==(L=null==v?void 0:v.emitter)&&void 0!==L?L:f(this.config.emitter.type),this.emitter.init(this.config.emitter),this.initParticles(),this.config.autoStart&&this.start()}setGraphics(o){var W,F;o!==this.graphics&&this.graphics.dispose(),this.graphics=o,this.graphics.init(this.system.renderer,this),this.isEmitting&&(null===(F=(W=this.graphics).onActivate)||void 0===F||F.call(W))}addPlugin(o,W){const F=this.plugins.get(o);F&&F!==W&&F.dispose(),W.init(this),this.plugins.set(o,W),this.eventEmitter.emit(e.OnPluginAdded),this.system.eventEmitter.emit(r.hc.OnControllerPluginAdded)}removePlugin(o){const W=this.plugins.get(o);W&&(W.dispose(),this.plugins.delete(o),this.eventEmitter.emit(e.OnPluginRemoved),this.system.eventEmitter.emit(r.hc.OnControllerPluginRemoved))}start(){var o,W;this.eventEmitter.emit(e.OnStarted),this.state===t.Done&&(null===(W=(o=this.graphics).onActivate)||void 0===W||W.call(o)),this.state=t.Active}pause(){this.state=t.Paused}finish(){var o,W;this.eventEmitter.emit(e.OnFinished),null===(W=(o=this.graphics).onDeactivate)||void 0===W||W.call(o),this.state=t.Done}reset(){this.aliveParticlesCount=0;for(const o of this.particlesPool)o.isAlive&&(o.isAlive=!1,this.eventEmitter.emit(e.OnParticleDisposed,o));this.emitAmount=this.totalAmount}update(o){if(this.isPaused||this.isDone)return;if(!this.isEmitting&&this.state===t.Active)return void this.finish();this.eventEmitter.emit(e.OnBeforeAllParticlesUpdated,this,o),0===this.emitAmount&&this.config.loop&&(this.emitAmount=this.totalAmount);let W=Math.min(this.emitAmount,this.config.particlesPerWave);this.emissionDelay>o?(this.emissionDelay-=o,W=0):this.emissionDelay=this.config.emissionDelay;const F=this.config.particle,E=this.config.emitter,v=this.config.explosiveness,a=this.system.systemSize;let G=1;F.damping<1&&(G=F.damping**o);let L=0;for(;L<this.aliveParticlesCount;){const U=this.particlesPool[L];this.eventEmitter.emit(e.OnBeforeParticleUpdated,U,o);const I=U.update(o,G);I?this.eventEmitter.emit(e.OnAfterParticleUpdated,U,o):this.eventEmitter.emit(e.OnParticleDisposed,U),I?L+=1:W>0&&!v?(W-=1,this.emitAmount-=1,U.awake(F,E,a,!0),this.eventEmitter.emit(e.OnParticleEmitted,U),L+=1):(this.particlesPool[L]=this.particlesPool[this.aliveParticlesCount-1],this.particlesPool[this.aliveParticlesCount-1]=U,this.aliveParticlesCount-=1)}if(v&&this.aliveParticlesCount>0)return void this.eventEmitter.emit(e.OnAfterAllParticlesUpdated,this,o);const U=Math.min(this.aliveParticlesCount+W,this.totalAmount);for(let o=this.aliveParticlesCount;o<U;o+=1)this.particlesPool[o].awake(F,E,a,!0),this.eventEmitter.emit(e.OnParticleEmitted,this.particlesPool[o]),this.aliveParticlesCount+=1,this.emitAmount-=1;this.eventEmitter.emit(e.OnAfterAllParticlesUpdated,this,o)}dispose(){for(const o of this.particlesPool)o.dispose();for(const o of this.plugins.values())o.dispose();this.eventEmitter.removeAllListeners(),this.graphics.dispose(),this.state=t.Disposed}toJSON(o){const W={};for(const[F,E]of this.plugins){const v=E.toJSON(o);if(!v)continue;const a=E.constructor;a.id&&(W[F]={pluginParams:v,pluginId:a.id})}return{plugins:W}}initParticles(){this.particlesPool=[...Array(this.totalAmount)].map((()=>this.createParticle(!1)))}createParticle(o){const W=new P(this.config.particle,this,o);return W.awake(this.config.particle,this.config.emitter,this.system.systemSize,o),W}}},23299:(o,W,F)=>{F.d(W,{XR:()=>I,Y$:()=>E});var E,v=F(974486),a=F(918973),G=F(230135),L=F(898668);!function(o){o.ConfigChanged="configChanged"}(E||(E={}));const U=new L.I;class I{constructor(){this.eventEmitter=new v.b,this._excludeFromSerialization=!1,this._autoStart=!0,this._loop=!0,this._explosiveness=!1,this._amount=1e3,this._emissionDelay=0,this._particlesPerWave=10,this._particle={colors:{mode:a.F.Random,gradient:!1,colors:["#ffffff"]},initialVelocity:{min:0,max:100},linearAcceleration:{min:0,max:100,curve:U},tangentialAcceleration:{min:0,max:0,curve:U},radialAcceleration:{min:0,max:0,curve:U},initialRotation:{min:0,max:0,syncWithDirection:!1},angularVelocity:{min:0,max:0,curve:U},scale:{min:1,max:1,curve:U},gravityVector:[0,1e3],damping:1,directionVector:[0,-1],spread:0,opacity:{min:1,max:1,curve:U},lifetime:{min:.5,max:1}},this._emitter={position:[0,0],type:G.V.point}}get excludeFromSerialization(){return this._excludeFromSerialization}set excludeFromSerialization(o){this._excludeFromSerialization=o}get autoStart(){return this._autoStart}set autoStart(o){this._autoStart=o,this.eventEmitter.emit(E.ConfigChanged)}get loop(){return this._loop}set loop(o){this._loop=o,this.eventEmitter.emit(E.ConfigChanged)}get explosiveness(){return this._explosiveness}set explosiveness(o){this._explosiveness=o,this.eventEmitter.emit(E.ConfigChanged)}get amount(){return this._amount}set amount(o){this._amount=o,this.eventEmitter.emit(E.ConfigChanged)}get emissionDelay(){return this._emissionDelay}set emissionDelay(o){this._emissionDelay=o,this.eventEmitter.emit(E.ConfigChanged)}get particlesPerWave(){return this._particlesPerWave}set particlesPerWave(o){this._particlesPerWave=o,this.eventEmitter.emit(E.ConfigChanged)}get particle(){return this._particle}set particle(o){this._particle=o,this.eventEmitter.emit(E.ConfigChanged)}get emitter(){return this._emitter}set emitter(o){this._emitter=o,this.eventEmitter.emit(E.ConfigChanged)}setFromJson(o){var W;this.autoStart=null===(W=o.autoStart)||void 0===W||W,this.loop=o.loop,this.explosiveness=o.explosiveness,this.amount=o.amount,this.emissionDelay=o.emissionDelay,this.particlesPerWave=o.particlesPerWave,this.particle=this.particleConfigFromJson(o.particle),this.emitter=o.emitter,this.eventEmitter.emit(E.ConfigChanged)}particleConfigFromJson(o){var W;return{...o,initialRotation:{...o.initialRotation,syncWithDirection:null!==(W=o.initialRotation.syncWithDirection)&&void 0!==W&&W},angularVelocity:{...o.angularVelocity,curve:new L.I(o.angularVelocity.curve)},scale:{...o.scale,curve:new L.I(o.scale.curve)},radialAcceleration:{...o.radialAcceleration,curve:new L.I(o.radialAcceleration.curve)},tangentialAcceleration:{...o.tangentialAcceleration,curve:new L.I(o.tangentialAcceleration.curve)},linearAcceleration:{...o.linearAcceleration,curve:new L.I(o.linearAcceleration.curve)},opacity:{...o.opacity,curve:new L.I(o.opacity.curve)}}}particleConfigToJson(o){return{...o,angularVelocity:{...o.angularVelocity,curve:o.angularVelocity.curve.toJson()},scale:{...o.scale,curve:o.scale.curve.toJson()},radialAcceleration:{...o.radialAcceleration,curve:o.radialAcceleration.curve.toJson()},tangentialAcceleration:{...o.tangentialAcceleration,curve:o.tangentialAcceleration.curve.toJson()},linearAcceleration:{...o.linearAcceleration,curve:o.linearAcceleration.curve.toJson()},opacity:{...o.opacity,curve:o.opacity.curve.toJson()}}}onManuallyUpdated(){this.eventEmitter.emit(E.ConfigChanged)}toJson(){const o={autoStart:this.autoStart,loop:this.loop,explosiveness:this.explosiveness,amount:this.amount,emissionDelay:this.emissionDelay,particlesPerWave:this.particlesPerWave,particle:this.particleConfigToJson(this.particle),emitter:this.emitter};return JSON.parse(JSON.stringify(o))}clone(){const o=new I;return o.setFromJson(this.toJson()),o}dispose(){this.eventEmitter.removeAllListeners()}}},894962:(o,W,F)=>{F.d(W,{hc:()=>G,ok:()=>I});var E=F(974486),v=F(23299);class a{get seed(){return this._seed}set seed(o){o!==this._seed&&(this._seed=o,this.setSeed())}constructor(o){this._seed="",this.randomValueGenerator=Math.random,this.seed=o||""}next(){return this.randomValueGenerator()}nextInRange(o,W){return o+(W-o)*this.next()}reset(){if(!this._seed)return;const o=function(o){let W=1779033703^o.length;for(let F=0;F<o.length;F++)W=Math.imul(W^o.charCodeAt(F),3432918353),W=W<<13|W>>>19;return()=>(W=Math.imul(W^W>>>16,2246822507),W=Math.imul(W^W>>>13,3266489909),(W^=W>>>16)>>>0)}(this._seed);var W,F,E,v;this.randomValueGenerator=(W=o(),F=o(),E=o(),v=o(),()=>{const o=((W|=0)+(F|=0)|0)+(v|=0)|0;return v=v+1|0,W=F^F>>>9,F=(E|=0)+(E<<3)|0,E=(E=E<<21|E>>>11)+o|0,(o>>>0)/4294967296})}setSeed(){this._seed?this.reset():this.randomValueGenerator=Math.random}}var G,L=F(893015),U=F(425009);!function(o){o.OnControllerAdded="onControllerAdded",o.OnControllerRemoved="onControllerRemoved",o.OnControllerPluginAdded="onControllerPluginAdded",o.OnControllerPluginRemoved="onControllerPluginRemoved",o.OnSystemSizeUpdated="onSystemSizeUpdated"}(G||(G={}));class I{static getDefaultJson(o,W,F=600,E=400,a={fps:60,randomFrameStart:!1,frames:[],textureId:null}){return{fps:60,fixedDt:!1,randomSeed:"",blendMode:L.V.Default,systemSize:{width:F,height:E},controllerConfigs:{[o]:(new v.XR).toJson()},graphicsConfig:{[W]:a},controllerIdToConfigId:{[W]:o},controllers:{}}}static calcScaleBySizes(o,W){const F=W.width/o.width,E=W.height/o.height;return Math.min(F,E)}constructor(o){var W,F,v,G;this.eventEmitter=new E.A,this.timeScale=1,this.systemScale=1,this.controllerConfigs=new Map,this.controllers=new Map,this.animate=o=>{this.tick(o)},this.renderer=o.renderer,this.ticker=null!==(W=o.ticker)&&void 0!==W?W:U.a.shared,this.random=new a,this.timeScale=null!==(F=o.timeScale)&&void 0!==F?F:1,this.systemSize=o.systemSize,this.systemScale=o.systemScale,this.init(o),(null===(v=o.autoStart)||void 0===v||v)&&(this.clearTickCallback=this.ticker.add(this.animate)),this.disposeOnFinish=null!==(G=o.disposeOnFinish)&&void 0!==G&&G,this.renderer.init(this)}updateSystemScale(o){this.systemScale!==o&&(this.systemScale=o,this.renderer.updateSystemScale(this.systemScale,this.systemSize))}updateSystemSize(o){this.systemSize.width===o.width&&this.systemSize.height===o.height||(this.systemSize.width=o.width,this.systemSize.height=o.height,this.renderer.updateSystemScale(this.systemScale,this.systemSize),this.eventEmitter.emit(G.OnSystemSizeUpdated,this.systemSize))}setParams(o){this.init(o),this.reset()}get fps(){return Math.round(1e3/this.dt)}set fps(o){this.dt=1/o*1e3}start(){this.clearTickCallback||(this.clearTickCallback=this.ticker.add(this.animate));for(const o of this.controllers.values())o.start()}pause(){this.clearTickCallback&&(this.clearTickCallback(),this.clearTickCallback=void 0);for(const o of this.controllers.values())o.pause()}finish(){this.clearTickCallback&&(this.clearTickCallback(),this.clearTickCallback=void 0);for(const o of this.controllers.values())o.finish();this.disposeOnFinish&&this.dispose()}reset(){for(const o of this.controllers.values())o.reset()}dispose(){this.clearTickCallback&&(this.clearTickCallback(),this.clearTickCallback=void 0);for(const o of this.controllers.values())o.dispose();this.controllers.clear();for(const o of this.controllerConfigs.values())o.dispose();this.controllerConfigs.clear(),this.eventEmitter.removeAllListeners(),this.renderer.dispose()}setRenderer(o){this.renderer=o,this.renderer.init(this)}addConfig(o,W){this.controllerConfigs.set(o,W)}getConfig(o){return this.controllerConfigs.get(o)||null}getConfigOrThrow(o){const W=this.getConfig(o);if(!W)throw new Error(`Config with id ${o} not found`);return W}removeConfig(o){const W=this.controllerConfigs.get(o);W&&(W.dispose(),this.controllerConfigs.delete(o))}addController(o,W){this.controllers.set(o,W),this.eventEmitter.emit(G.OnControllerAdded,o,W)}getController(o){return this.controllers.get(o)||null}getControllerOrThrow(o){const W=this.getController(o);if(!W)throw new Error(`Controller with id ${o} not found`);return W}removeController(o){const W=this.controllers.get(o);W&&(W.dispose(),this.controllers.delete(o),this.eventEmitter.emit(G.OnControllerRemoved,o,W))}tick(o){if(this.accumulator+=o,this.accumulator>=this.dt){for(this.accumulator>250&&(this.accumulator=250);this.accumulator>=this.dt;){const o=this.fixedDt?this.dt:this.accumulator,W=o/1e3*this.timeScale;for(const o of this.controllers.values())o.update(W);this.accumulator-=o}const o=[];for(const W of this.controllers.values())W.isDone||o.push({particles:W.particlesPool,graphics:W.graphics});if(0===o.length&&this.disposeOnFinish)return void this.dispose();this.renderer.render(o)}}toJSON(o){const W={};for(const[o,F]of this.controllerConfigs)F.excludeFromSerialization||(W[o]=F.toJson());const F={};for(const[W,E]of this.controllers)E.excludeFromSerialization||(F[W]=E.graphics.toJson(o));const E={};for(const[o,W]of this.controllers)W.excludeFromSerialization||(E[o]=W.configId);const v={};for(const[W,F]of this.controllers)F.excludeFromSerialization||(v[W]=F.toJSON(o));return{systemSize:this.systemSize,fps:this.fps,fixedDt:this.fixedDt,randomSeed:this.random.seed,blendMode:this.renderer.getBlendMode(),controllerConfigs:W,graphicsConfig:F,controllerIdToConfigId:E,controllers:v}}init(o){var W;this.accumulator=0,this.dt=1/(o.fps||60)*1e3,this.fixedDt=null===(W=o.fixedDt)||void 0===W||W,this.random.seed=o.randomSeed||"",o.systemSize&&(this.systemSize.width=o.systemSize.width,this.systemSize.height=o.systemSize.height)}}},352427:(o,W,F)=>{F.d(W,{p:()=>a});var E=F(669842);const v=[];class a{constructor(o){this.random=o,this.frames=v,this.frameId=0,this.fps=60,this.frame={h:0,w:0,x:0,y:0},this.accumulator=0}get isAnimated(){return this.frames.length>0}init(o,W){var F;this.texture=o,this.config=W,this.frames=(null==W?void 0:W.frames)||v,this.fps=null!==(F=null==W?void 0:W.fps)&&void 0!==F?F:60,this.accumulator=0,this.frameId=0,(null==W?void 0:W.randomFrameStart)&&this.frames.length>0&&(this.frameId=Math.floor(this.random.next()*this.frames.length)),this.frame.x=0,this.frame.y=0,this.frame.w=(null==o?void 0:o.width)||E.k,this.frame.h=(null==o?void 0:o.height)||E.d,this.updateFrame()}update(o){if(!this.isAnimated||!this.fps)return;this.accumulator+=o;const W=1/this.fps,F=Math.floor(this.accumulator/W);this.accumulator-=F*W,this.frameId=(this.frameId+F)%this.frames.length,this.updateFrame()}dispose(){}updateFrame(){if(this.isAnimated){const o=this.frames[this.frameId];this.frame.x=o.x,this.frame.y=o.y,this.frame.w=o.w,this.frame.h=o.h}}}a.propertyId=Symbol("TextureManager")},669842:(o,W,F)=>{F.d(W,{d:()=>v,k:()=>E});const E=10,v=10},362620:(o,W,F)=>{F.d(W,{b:()=>v});var E=F(277984);class v{constructor(){this._visible=!0}set visible(o){this._visible=o}get visible(){return this._visible}init(o,W){if(!(o instanceof E.G))throw new Error("Pixi graphics only works with PixiRenderer")}dispose(){}}},112249:(o,W,F)=>{F.d(W,{A:()=>I});var E=F(879333),v=F(352427),a=F(157757),G=F(478128),L=F(362620);class U{constructor(){this.sprite=new G.kxk,this.onStage=!1}dispose(){this.onStage&&this.stage&&(this.stage.removeChild(this.sprite),this.stage=void 0,this.onStage=!1),this.sprite.destroy()}update(){}addOnStage(o){this.onStage||(this.stage=o,o.addChild(this.sprite),this.onStage=!0)}removeFromStage(o){this.onStage&&(o.removeChild(this.sprite),this.stage=void 0,this.onStage=!1)}}U.propertyId=Symbol("ParticleSprite");class I extends L.b{constructor(o){var W,F,E;super(),this.framesTextures=[],this.removeFromStage=!1,this.tint=!1,this.removeFromStage=null!==(W=o.removeFromStage)&&void 0!==W&&W,this.tint=null!==(F=o.tint)&&void 0!==F&&F,this.setTextureAndFrames(o.texture,o.textureConfig),this.container=new G.mcf,this.visible=null===(E=o.visible)||void 0===E||E}set visible(o){this._visible=o,this.container.visible!==o&&(this.container.visible=o)}get visible(){return this._visible}init(o,W){super.init(o,W),this.renderer=o,this.random=W.system.random,this.renderer.stage.addChild(this.container)}dispose(){super.dispose(),this.renderer.stage.removeChild(this.container)}setTextureAndFrames(o,W){if(!o)return;o instanceof HTMLImageElement||o instanceof HTMLCanvasElement?this.texture=G.gPd.from(o):this.texture=o,this.textureConfig=W;const F=null==W?void 0:W.frames;if(this.framesTextures=[],F&&F.length>0)for(const o of F){const W=this.texture.clone();W.frame=new G.M_G(o.x,o.y,o.w,o.h),W.updateUvs(),this.framesTextures.push(W)}else this.framesTextures=[this.texture]}updateParticle(o,W){const F=this.container;let E=W.customProperties.get(v.p.propertyId);E&&E.texture===this.texture&&E.config===this.textureConfig||(E=new v.p(this.random),E.init(this.texture,this.textureConfig),W.customProperties.set(v.p.propertyId,E));let a=W.customProperties.get(U.propertyId);(!a||a.stage&&a.stage!==F)&&(a=new U,a.sprite.anchor.set(.5),W.customProperties.set(U.propertyId,a)),W.isAlive?(a.onStage||a.addOnStage(F),a.sprite._texture!==this.framesTextures[E.frameId]&&(a.sprite.texture=this.framesTextures[E.frameId],a.sprite.width=this.framesTextures[E.frameId].width,a.sprite.height=this.framesTextures[E.frameId].height),this.tint&&(a.sprite.tint=W.color),a.sprite.alpha=W.opacity,a.sprite.setTransform(W.transform.position[0],W.transform.position[1],W.transform.scale[0],W.transform.scale[1],W.transform.rotation),a.sprite.alpha=W.opacity,a.sprite.blendMode=o):this.removeFromStage?a.removeFromStage(F):a.sprite.alpha=0}clone(){return new I({texture:this.texture,textureConfig:this.textureConfig,removeFromStage:this.removeFromStage,tint:this.tint})}toJson(o){var W,F,v;let G=null;return this.texture&&(G=E.A(),o[G]={type:a.b.Texture,value:this.texture.baseTexture.resource.source}),{textureId:G,fps:(null===(W=this.textureConfig)||void 0===W?void 0:W.fps)||0,randomFrameStart:(null===(F=this.textureConfig)||void 0===F?void 0:F.randomFrameStart)||!1,frames:(null===(v=this.textureConfig)||void 0===v?void 0:v.frames)||[]}}onActivate(){this.container.visible=!0}onDeactivate(){this.container.visible=!1}}},346471:(o,W,F)=>{F.d(W,{O:()=>E});class E{constructor(o){const W=(new DOMParser).parseFromString(o,"image/svg+xml").firstChild,F=W.querySelector("path");if(!F)throw Error("<path> tag not found");this.sourceSvg=W,this.path=F,this.width=W.viewBox.baseVal.width,this.height=W.viewBox.baseVal.height,this.pathLength=F.getTotalLength()}getPosition(o){const W=this.path.getPointAtLength(o);return[W.x/this.width,W.y/this.height]}toJSON(){return{id:E.id,data:this.sourceSvg.outerHTML}}}E.id="EmitterMotionPathSvgMotionPath"},774145:(o,W,F)=>{F.d(W,{_:()=>l});var E=F(898668),v=F(335914),a=F(894962),G=F(346471),L=F(633921);let U=null;const I=[1,1];class l{static async renderOnPane(o,W,E){U||(U=await F.e(45444).then(F.bind(F,645444))),U.renderOnPane(o,W,E)}static fromJSON(o){const W=o;return new l({motionPath:W.motionPath&&W.motionPath.id===G.O.id?new G.O(W.motionPath.data):null,loop:W.loop,customScale:W.customScale,scaleType:W.scaleType,speed:{value:W.speed.value,curve:new E.I(W.speed.curve)}})}constructor(o){var W;this.pathPosition=0,this.onSystemSizeUpdated=o=>{this.motionPath&&(this.scale[0]=this.motionPath.width/o.width,this.scale[1]=this.motionPath.height/o.height)},this.onBeforeAllParticlesUpdate=(o,W)=>{if(!this.motionPath)return;if(this.pathPosition<=this.motionPath.pathLength){const o=this.pathPosition/this.motionPath.pathLength,F=this.speed.curve.sample(o);this.pathPosition+=F*this.speed.value*W}else{if(!this.loop)return;this.pathPosition=0}const[F,E]=this.motionPath.getPosition(this.pathPosition);this.scaleType===L.U.Fill?(o.config.emitter.position[0]=F,o.config.emitter.position[1]=E):(o.config.emitter.position[0]=F*this.scale[0]*this.customScale[0],o.config.emitter.position[1]=E*this.scale[1]*this.customScale[1]),o.config.onManuallyUpdated()},this.motionPath=o.motionPath,this.speed=o.speed,this.scaleType=o.scaleType,this.customScale=o.customScale,this.loop=null!==(W=o.loop)&&void 0!==W&&W,this.scale=[...I]}init(o){this.controller=o,this.pathPosition=0,o.eventEmitter.on(v.Od.OnBeforeAllParticlesUpdated,this.onBeforeAllParticlesUpdate),o.system.eventEmitter.on(a.hc.OnSystemSizeUpdated,this.onSystemSizeUpdated),this.motionPath&&(this.scale[0]=this.motionPath.width/o.system.systemSize.width,this.scale[1]=this.motionPath.height/o.system.systemSize.height)}dispose(){this.controller.eventEmitter.off(v.Od.OnBeforeAllParticlesUpdated,this.onBeforeAllParticlesUpdate),this.controller.system.eventEmitter.off(a.hc.OnSystemSizeUpdated,this.onSystemSizeUpdated)}toJSON(){return{motionPath:this.motionPath?this.motionPath.toJSON():null,loop:this.loop,scaleType:this.scaleType,customScale:this.customScale,speed:{value:this.speed.value,curve:this.speed.curve.toJson()}}}}l.id="EmitterMotionPath"},633921:(o,W,F)=>{var E;F.d(W,{U:()=>E}),function(o){o.Fill="fill",o.Custom="custom"}(E||(E={}))},963678:(o,W,F)=>{F.d(W,{O:()=>L});var E=F(898668),v=F(335914),a=F(894962);let G=null;class L{static async renderOnPane(o,W,E){G||(G=await F.e(14291).then(F.bind(F,914291))),G.renderOnPane(o,W,E)}static fromJSON(o){const W=o;return new L({position:W.position,gravity:W.gravity,catchRadius:W.catchRadius,toward:W.toward,multiplyVelocity:W.multiplyVelocity,forceMultiplierCurve:new E.I(W.forceMultiplierCurve)})}constructor(o){this.scaledPosition=[0,0],this.scaledCatchRadius=0,this.onSystemSizeUpdated=o=>{this.scaledPosition[0]=this.position[0]*o.width,this.scaledPosition[1]=this.position[1]*o.height,this.scaledCatchRadius=this.controller.system.systemScale*this.catchRadius,this.systemSize=o},this.onBeforeParticleUpdated=o=>{if(o.freezePosition)return;const W=o.transform.position[0]-this.scaledPosition[0],F=o.transform.position[1]-this.scaledPosition[1],E=Math.sqrt(W*W+F*F);if(this.toward&&E<=this.scaledCatchRadius)return void(o.freezePosition=!0);let v=this.gravity/(E*E+1e-4);this.toward&&(v*=-1);const a=Math.min(E/this.systemSize.width,E/this.systemSize.height),G=this.forceMultiplierCurve.sample(a);v*=G,this.multiplyVelocity&&(o.velocity[0]*=G,o.velocity[1]*=G),o.addAcceleration(W*v,F*v)},this.position=o.position,this.gravity=o.gravity,this.catchRadius=o.catchRadius,this.toward=o.toward,this.multiplyVelocity=o.multiplyVelocity,this.forceMultiplierCurve=o.forceMultiplierCurve}init(o){this.controller=o,o.eventEmitter.on(v.Od.OnBeforeParticleUpdated,this.onBeforeParticleUpdated),o.system.eventEmitter.on(a.hc.OnSystemSizeUpdated,this.onSystemSizeUpdated),this.systemSize=o.system.systemSize,this.scaledPosition[0]=this.position[0]*o.system.systemSize.width,this.scaledPosition[1]=this.position[1]*o.system.systemSize.height,this.scaledCatchRadius=o.system.systemScale*this.catchRadius}dispose(){this.controller.eventEmitter.off(v.Od.OnBeforeParticleUpdated,this.onBeforeParticleUpdated),this.controller.system.eventEmitter.off(a.hc.OnSystemSizeUpdated,this.onSystemSizeUpdated)}toJSON(){return{position:this.position,gravity:this.gravity,catchRadius:this.catchRadius,toward:this.toward,multiplyVelocity:this.multiplyVelocity,forceMultiplierCurve:this.forceMultiplierCurve.toJson()}}updatePosition(o,W){this.position[0]=o,this.position[1]=W,this.onSystemSizeUpdated(this.controller.system.systemSize)}updateCatchRadius(o){this.catchRadius=o,this.scaledCatchRadius=this.controller.system.systemScale*this.catchRadius}}L.id="GravityPoint"},104394:(o,W,F)=>{F.d(W,{i:()=>l});var E=F(879333),v=F(351673),a=F(157757),G=F(335914),L=F(894962);const U=[1,1];let I=null;class l{static async renderOnPane(o,W,E){I||(I=await F.e(42447).then(F.bind(F,42447))),I.renderOnPane(o,W,E)}static fromJSON(o,W){let F=null;const{textureId:E}=o;if(E&&E in W){const o=W[E];o.type===a.b.Texture&&(F=o.value)}return new l({texture:F})}constructor(o){var W,F;this.onSystemSizeUpdated=o=>{this.texture&&(this.scale[0]=this.texture.width/o.width,this.scale[1]=this.texture.height/o.height)},this.onAfterParticleUpdated=o=>{if(!this.texture)return;const W=o.transform.position[0],F=o.transform.position[1],E=Math.min(W*this.scale[0]|0,this.width-1),v=Math.min(F*this.scale[1]|0,this.height-1),a=3*(E+this.width*v),G=this.field[a],L=this.field[a+1],U=this.field[a+2];o.color={r:G,g:L,b:U}},this.texture=o.texture,this.width=(null===(W=this.texture)||void 0===W?void 0:W.width)||0,this.height=(null===(F=this.texture)||void 0===F?void 0:F.height)||0,this.scale=[...U]}init(o){this.controller=o,this.texture&&(this.width=this.texture.width,this.height=this.texture.height,o.eventEmitter.on(G.Od.OnAfterParticleUpdated,this.onAfterParticleUpdated),o.eventEmitter.on(G.Od.OnParticleEmitted,this.onAfterParticleUpdated),o.system.eventEmitter.on(L.hc.OnSystemSizeUpdated,this.onSystemSizeUpdated),this.scale[0]=this.texture.width/o.system.systemSize.width,this.scale[1]=this.texture.height/o.system.systemSize.height,this.computeField())}dispose(){this.controller.eventEmitter.off(G.Od.OnAfterParticleUpdated,this.onAfterParticleUpdated),this.controller.eventEmitter.off(G.Od.OnParticleEmitted,this.onAfterParticleUpdated),this.controller.system.eventEmitter.off(L.hc.OnSystemSizeUpdated,this.onSystemSizeUpdated)}toJSON(o){let W=null;return this.texture&&(W=E.A(),o[W]={type:a.b.Texture,value:this.texture}),{textureId:W}}computeField(){if(this.field=new Uint8Array(this.width*this.height*3),!this.texture)return;const o=v.M5(this.texture);if(!o)return;const W=o.data;for(let o=0;o<this.width;o++)for(let F=0;F<this.height;F++){const E=4*(o*this.height+F),v=3*(o*this.height+F);this.field[v]=W[E],this.field[v+1]=W[E+1],this.field[v+2]=W[E+2]}}}l.id="ImageColorMap"},99257:(o,W,F)=>{F.d(W,{D:()=>L});var E=F(335914);function v(o,W){return o[1]>=W[0]&&W[1]>=o[0]}function a(o,W){const F=[o.center[0]-o.radius,o.center[0]+o.radius],E=[o.center[1]-o.radius,o.center[1]+o.radius],a=[Math.min(W.start[0],W.end[0]),Math.max(W.start[0],W.end[0])],G=[Math.min(W.start[1],W.end[1]),Math.max(W.start[1],W.end[1])];if(!v(F,a)||!v(E,G))return 0;const L=0===W.normal[0]?E:F,U=0===W.normal[0]?G:a;return-1===(0===W.normal[0]?W.normal[1]:W.normal[0])?L[1]-U[0]:U[1]-L[0]}let G=null;class L{static async renderOnPane(o,W,E){G||(G=await F.e(10306).then(F.bind(F,410306))),G.renderOnPane(o,W,E)}static fromJSON(o){return new L(o)}constructor(o){this.options=o,this.edges=[],this.onAfterParticleUpdated=o=>{const W={center:o.transform.position,radius:this.options.sphereRadius};let F=1/0,E=null;for(const o of this.edges){const v=a(W,o);0!==v&&v<F&&(F=v,E=o)}if(null===E)return;const v=[Math.sign(o.velocity[0])!==Math.sign(E.normal[0])?Math.abs(o.velocity[0])*E.normal[0]:0,Math.sign(o.velocity[1])!==Math.sign(E.normal[1])?Math.abs(o.velocity[1])*E.normal[1]:0],G=[this.options.bounciness*v[0],this.options.bounciness*v[1]],L=v[0]+G[0],U=v[1]+G[1];o.addVelocity(L,U)}}init(o){this.controller=o,o.eventEmitter.on(E.Od.OnAfterParticleUpdated,this.onAfterParticleUpdated);const W=o.system.systemSize,F=[this.options.boundingBoxPosition[0]*W.width,this.options.boundingBoxPosition[1]*W.height],v=this.options.boundingBoxDimensions;this.edges=[{start:[F[0]-v[0]/2,F[1]-v[1]/2],end:[F[0]+v[0]/2,F[1]-v[1]/2],normal:[0,-1]},{start:[F[0]+v[0]/2,F[1]-v[1]/2],end:[F[0]+v[0]/2,F[1]+v[1]/2],normal:[1,0]},{start:[F[0]+v[0]/2,F[1]+v[1]/2],end:[F[0]-v[0]/2,F[1]+v[1]/2],normal:[0,1]},{start:[F[0]-v[0]/2,F[1]+v[1]/2],end:[F[0]-v[0]/2,F[1]-v[1]/2],normal:[-1,0]}]}dispose(){this.controller.eventEmitter.off(E.Od.OnAfterParticleUpdated,this.onAfterParticleUpdated)}toJSON(){return this.options}}L.id="Physics"},653565:(o,W,F)=>{F.d(W,{C:()=>U,f:()=>G});var E=F(335914);const v=Symbol("ControllerPosUpdaterSymbol");class a{constructor(o,W,F,E){this.particle=o,this.options=W,this.cleanup=F,this.emitter=E.config.emitter,this.systemSize=E.system.systemSize}update(){this.options.syncPosition&&(this.emitter.position[0]=this.particle.transform.position[0]/this.systemSize.width,this.emitter.position[1]=this.particle.transform.position[1]/this.systemSize.height)}dispose(){this.cleanup()}}var G;!function(o){o.OnParticleDeath="OnParticleDeath",o.OnParticleSpawn="OnParticleSpawn"}(G||(G={}));let L=null;class U{static async renderOnPane(o,W,E){L||(L=await F.e(37927).then(F.bind(F,737927))),L.renderOnPane(o,W,E)}static fromJSON(o,W,F){const E=o,v=F.getControllerOrThrow(E.referenceControllerId);return new U(v,E.mode,{syncPosition:E.syncPosition})}constructor(o,W,F={syncPosition:!0}){this.referenceController=o,this._mode=W,this.options=F,this.disposeQueue=[],this.onAfterParticleEmitted=o=>{if(this.mode===G.OnParticleSpawn){const[W,F]=this.addNewController(o),G=new a(o,this.options,F,W);o.customProperties.set(v,G),W.eventEmitter.on(E.Od.OnFinished,(()=>{F(),this.disposeQueue.splice(this.disposeQueue.indexOf(F),1)})),this.disposeQueue.push(F)}},this.onAfterParticleDisposed=o=>{if(this.mode===G.OnParticleSpawn){const W=o.customProperties.get(v);W&&(W.dispose(),o.customProperties.delete(v))}else if(this.mode===G.OnParticleDeath){const[W,F]=this.addNewController(o);W.eventEmitter.on(E.Od.OnFinished,(()=>{F(),this.disposeQueue.splice(this.disposeQueue.indexOf(F),1)})),this.disposeQueue.push(F)}}}set mode(o){this._mode!==o&&(this.dispose(),this._mode=o,this.init(this.controller))}get mode(){return this._mode}init(o){this.controller=o,this.mode===G.OnParticleDeath?(o.eventEmitter.on(E.Od.OnParticleDisposed,this.onAfterParticleDisposed),this.disposeQueue.push((()=>{o.eventEmitter.off(E.Od.OnParticleDisposed,this.onAfterParticleDisposed)}))):this.mode===G.OnParticleSpawn&&(o.eventEmitter.on(E.Od.OnParticleEmitted,this.onAfterParticleEmitted),o.eventEmitter.on(E.Od.OnParticleDisposed,this.onAfterParticleDisposed),this.disposeQueue.push((()=>{o.eventEmitter.off(E.Od.OnParticleEmitted,this.onAfterParticleEmitted),o.eventEmitter.off(E.Od.OnParticleDisposed,this.onAfterParticleDisposed)})))}dispose(){this.disposeQueue.forEach((o=>o())),this.disposeQueue=[]}toJSON(){var o;const W=null===(o=[...this.controller.system.controllers.entries()].find((([,o])=>o===this.referenceController)))||void 0===o?void 0:o[0];return W?{referenceControllerId:W,mode:this.mode,syncPosition:this.options.syncPosition}:null}addNewController(o){const W=Math.round(1e9*performance.now()),F=`config-for-sub-emitter-${W}`,v=`controller-for-sub-emitter-${W}`,a=this.referenceController.config.clone();a.emitter.position[0]=o.transform.position[0]/this.controller.system.systemSize.width,a.emitter.position[1]=o.transform.position[1]/this.controller.system.systemSize.height,a.particle.directionVector=o.directionVector,a.autoStart=!0,a.excludeFromSerialization=!0,this.controller.system.addConfig(F,a);const G=new E.hZ(v,F,this.controller.system,{graphics:this.referenceController.graphics.clone(),excludeFromSerialization:!0,hideInEditor:!0});return this.controller.system.addController(v,G),[G,()=>{this.controller.system.removeConfig(F),this.controller.system.removeController(v)}]}}U.id="SubEmitter"},362991:(o,W,F)=>{F.d(W,{z:()=>h});var E=F(879333),v=F(233387),a=F(351673),G=F(157757),L=F(335914),U=F(894962);const I=[1,1];let l=null;class h{static async renderOnPane(o,W,E){l||(l=await F.e(32184).then(F.bind(F,832184))),l.renderOnPane(o,W,E)}static fromJSON(o,W){var F;const E=o;let v=null;if(E.textureId&&E.textureId in W){const o=W[E.textureId];o.type===G.b.Texture&&(v=o.value)}return new h({texture:v,strength:null!==(F=E.strength)&&void 0!==F?F:1})}constructor(o){var W,F,E;this.onSystemSizeUpdated=o=>{this.texture&&(this.scale[0]=this.texture.width/o.width,this.scale[1]=this.texture.height/o.height)},this.onBeforeParticleUpdated=o=>{if(!this.texture)return;const W=o.transform.position[0],F=o.transform.position[1],E=0|v._g(W*this.scale[0],this.width),a=0|v._g(F*this.scale[1],this.height),G=3*(E+this.width*a),L=this.field[G],U=this.field[G+1],I=this.field[G+2],l=this.strength*L*I,h=this.strength*U*I;o.addAcceleration(l,h)},this.texture=o.texture,this.width=(null===(W=this.texture)||void 0===W?void 0:W.width)||0,this.height=(null===(F=this.texture)||void 0===F?void 0:F.height)||0,this.scale=[...I],this.strength=null!==(E=o.strength)&&void 0!==E?E:1}init(o){if(this.controller=o,!this.texture)return;this.width=this.texture.width,this.height=this.texture.height,o.eventEmitter.on(L.Od.OnBeforeParticleUpdated,this.onBeforeParticleUpdated),o.system.eventEmitter.on(U.hc.OnSystemSizeUpdated,this.onSystemSizeUpdated);const W=this.texture.width/o.system.systemSize.width,F=this.texture.height/o.system.systemSize.height;this.scale[0]=W,this.scale[1]=F,this.computeField()}dispose(){this.controller.eventEmitter.off(L.Od.OnBeforeParticleUpdated,this.onBeforeParticleUpdated),this.controller.system.eventEmitter.off(U.hc.OnSystemSizeUpdated,this.onSystemSizeUpdated)}toJSON(o){let W=null;return this.texture&&(W=E.A(),o[W]={type:G.b.Texture,value:this.texture}),{strength:this.strength,textureId:W}}computeField(){if(this.field=new Float64Array(this.width*this.height*3),!this.texture)return;const o=a.M5(this.texture);if(!o)return;const W=o.data;for(let o=0;o<this.width;o++)for(let F=0;F<this.height;F++){const E=4*(o*this.height+F),a=W[E]/255,G=W[E+1]/255,L=W[E+2]/255,U=v.hF([2*a-1,2*G-1]),I=3*(o*this.height+F);this.field[I]=U[0],this.field[I+1]=U[1],this.field[I+2]=L}}}h.id="Turbulence"},277984:(o,W,F)=>{F.d(W,{G:()=>L});var E=F(974486),v=F(478128),a=F(893015),G=F(472542);class L{constructor(o){this.stage=o,this.eventEmitter=new E.b,this.blendMode=a.V.Default,this.blendModeValue=v.B9A.NORMAL}init(o){this.system=o,this.updateSystemScale(o.systemScale)}updateSystemScale(o){this.stage.scale={x:o,y:o}}dispose(){this.eventEmitter.removeAllListeners()}render(o){this.eventEmitter.emit(G.o.BeforeRender);for(const{particles:W,graphics:F}of o)if(F.visible)for(const o of W)F.updateParticle(this.blendModeValue,o);this.eventEmitter.emit(G.o.AfterRender)}getBlendMode(){return this.blendMode}setBlendMode(o){if(this.blendMode!==o)switch(this.blendMode=o,o){case a.V.Default:this.blendModeValue=v.B9A.NORMAL;break;case a.V.Xor:this.blendModeValue=v.B9A.XOR;break;case a.V.Multiply:this.blendModeValue=v.B9A.MULTIPLY;break;case a.V.Screen:this.blendModeValue=v.B9A.SCREEN;break;case a.V.Add:this.blendModeValue=v.B9A.ADD;break;default:throw new Error(`No blendMode support for ${o} type!`)}}}},434098:(o,W,F)=>{F.d(W,{C:()=>g});var E=F(335914),v=F(23299),a=F(894962),G=F(774145),L=F(963678),U=F(104394),I=F(99257),l=F(653565),h=F(362991);const p={[l.C.id]:l.C,[I.D.id]:I.D,[h.z.id]:h.z,[U.i.id]:U.i,[L.O.id]:L.O,[G._.id]:G._};class g{static spawnSystemInternal(o,W=Object.create(null)){const{assets:F={},ticker:G,config:L,disposeOnFinish:U,systemScale:I,autoStart:l}=o,h=this.spawnRenderer(o,W),g=new a.ok({renderer:h,fps:L.fps,fixedDt:L.fixedDt,systemSize:L.systemSize,systemScale:I,randomSeed:L.randomSeed||void 0,ticker:G,autoStart:l,disposeOnFinish:U});h.setBlendMode(L.blendMode);for(const[o,W]of Object.entries(L.controllerConfigs)){const F=new v.XR;F.setFromJson(W),g.addConfig(o,F)}for(const[o,v]of Object.entries(L.graphicsConfig)){const a=new E.hZ(o,L.controllerIdToConfigId[o],g,{graphics:this.spawnGraphics(v,F,W)});g.addController(o,a)}for(const[o,W]of Object.entries(L.controllers)){const E=g.getControllerOrThrow(o);for(const[o,v]of Object.entries(W.plugins)){const W=p[v.pluginId].fromJSON(v.pluginParams,F,g);E.addPlugin(o,W)}}return g}static spawnRenderer(o,W){throw new Error("Not implemented")}static spawnGraphics(o,W,F){throw new Error("Not implemented")}}},879356:(o,W,F)=>{F.d(W,{l:()=>U});var E=F(112249),v=F(277984),a=F(157757),G=F(478128),L=F(434098);class U extends L.C{static spawnSystem(o){return super.spawnSystemInternal(o,{container:o.container})}static spawnRenderer(o,W){if(!W.container)throw new Error("Cannot create renderer. Container is missing");return new v.G(W.container)}static spawnGraphics(o,W){var F;let v;if((null==o?void 0:o.textureId)&&(null===(F=W[o.textureId])||void 0===F?void 0:F.value)){const F=W[o.textureId];F.type===a.b.Texture&&(v=G.gPd.from(F.value)),F.type===a.b.PixiTexture&&(v=F.value)}if(!v)throw new Error(`Texture for spawn graphics wasn't found (id: ${null==o?void 0:o.textureId})`);return new E.A({texture:v,frames:o.frames,removeFromStage:!1,textureConfig:{fps:o.fps,frames:o.frames,randomFrameStart:o.randomFrameStart},tint:!1})}}},425009:(o,W,F)=>{F.d(W,{a:()=>E});class E{constructor(){this.rafID=-1,this.prevRenderTime=0,this.callbacks=[],this.tick=o=>{const W=o-this.prevRenderTime;for(const o of this.callbacks)o(W);this.prevRenderTime=o,this.rafID=window.requestAnimationFrame(this.tick)}}static get shared(){return this._shared||(this._shared=new E),this._shared}get isActive(){return-1!==this.rafID}add(o){return this.callbacks.push(o),1===this.callbacks.length&&(this.prevRenderTime=performance.now(),this.rafID=window.requestAnimationFrame(this.tick)),()=>{const W=this.callbacks.indexOf(o);-1!==W&&(this.callbacks.splice(W,1),0===this.callbacks.length&&window.cancelAnimationFrame(this.rafID))}}stop(){this.isActive&&(window.cancelAnimationFrame(this.rafID),this.rafID=-1)}start(){this.isActive||(this.prevRenderTime=performance.now(),this.rafID=window.requestAnimationFrame(this.tick))}}E._shared=null},918973:(o,W,F)=>{var E;F.d(W,{F:()=>E}),function(o){o.Random="Random",o.OverX="OverX",o.OverY="OverY",o.OverLife="OverLife",o.Off="Off"}(E||(E={}))},893015:(o,W,F)=>{var E;F.d(W,{V:()=>E}),function(o){o.Default="default",o.Add="add",o.Multiply="multiply",o.Xor="xor",o.Screen="screen"}(E||(E={}))},230135:(o,W,F)=>{F.d(W,{V:()=>E});const E={ellipse:"ellipse",donut:"donut",rectangle:"rectangle",point:"point",triangle:"triangle",frame:"frame",image:"image"}},472542:(o,W,F)=>{var E;F.d(W,{o:()=>E}),function(o){o.BeforeRender="beforeRender",o.AfterRender="afterRender"}(E||(E={}))},157757:(o,W,F)=>{var E;F.d(W,{b:()=>E}),function(o){o.Texture="Texture",o.PixiTexture="PixiTexture",o.Pixi8Texture="Pixi8Texture"}(E||(E={}))},481900:(o,W,F)=>{function E(o){let W=o.replace(/^#/,"");return 3===W.length&&(W=W.split("").map((o=>o+o)).join("")),{r:parseInt(W.slice(0,2),16),g:parseInt(W.slice(2,4),16),b:parseInt(W.slice(4,6),16)}}F.d(W,{iN:()=>E})},233387:(o,W,F)=>{function E(o,W,F,E){return o*E-W*F}function v(o,W,F,E){return o*F+W*E}function a(o){const W=o[0],F=o[1],E=W*W+F*F;if(E>0){const W=1/Math.sqrt(E);o[0]*=W,o[1]*=W}return o}function G(o,W){return(o%W+W)%W}F.d(W,{Z8:()=>v,_g:()=>G,eL:()=>E,hF:()=>a})},351673:(o,W,F)=>{function E(o){const W=document.createElement("canvas"),F=W.getContext("2d");return F?(W.width=o.width,W.height=o.height,F.drawImage(o,0,0),F.getImageData(0,0,o.width,o.height)):null}F.d(W,{M5:()=>E})},798678:(o,W,F)=>{var E;F.d(W,{x:()=>E}),function(o){o.Texture="texture",o.Spine="spine",o.Bitmap="bitmap",o.Emitter="emitter",o.SpriteSheet="spriteSheet",o.ParticleSystemConfig="particleSystemConfig"}(E||(E={}))},168850:(o,W,F)=>{F.d(W,{c:()=>v});var E=F(357117);async function v(o){if(E.ZQ()){const W=await F.e(22421).then(F.bind(F,276432));await W.PixiDevToolsPlugin({application:o,toggleDevTools:a})}}function a(o,W){var F,E;if(o)null===(F=window.__PIXI_APP_INIT__)||void 0===F||F.call(window,W);else{let o=window;for(;o&&(o.__PIXI_DEVTOOLS__=void 0,null===(E=o.__PIXI_DEVTOOLS_WRAPPER__)||void 0===E||E.reset(),o.parent!==o);)o=o.parent}}},623763:(o,W,F)=>{F.d(W,{b:()=>G});var E=F(64922),v=F(699695),a=F(234477);const G=({hasGradient:o=!0,hidden:W=!1,isPhone:F=!1,children:G})=>E.jsx("div",{className:v.A(a.A.overlayStatus,{[a.A.gradient]:o,[a.A.hidden]:W,[a.A.phone]:F}),"data-role":"status-text",children:G});G.displayName="OverlayStatus"},226425:(o,W,F)=>{F.d(W,{A:()=>E});const E="precision mediump float;uniform sampler2D uSampler;uniform float uTime;uniform vec4 shineColor;varying vec2 vTextureCoord;void main(){float angle=0.8;float cosAngle=cos(angle);float sinAngle=sin(angle);vec2 rotatedCoord=vec2(vTextureCoord.x*cosAngle-vTextureCoord.y*sinAngle,vTextureCoord.x*sinAngle+vTextureCoord.y*cosAngle);float sweep=min(rotatedCoord.x+uTime*2.,1.);vec4 color0=vec4(0.,0.,0.,0.);vec4 gradient=mix(color0,shineColor,smoothstep(0.,0.5,sweep));gradient=mix(gradient,color0,smoothstep(0.5,1.,sweep));vec4 textureColor=texture2D(uSampler,vTextureCoord);gl_FragColor=vec4(textureColor.rgba*gradient.rgba);}"},234858:(o,W,F)=>{o.exports=F.p+"images/lottoball.ff80f4bb.webp"},894330:(o,W,F)=>{o.exports=F.p+"images/winbase.a23f53f0.webp"},906220:o=>{o.exports="data:image/webp;base64,UklGRkYBAABXRUJQVlA4TDkBAAAvE8AEEDUwaNtI0vEn7Xu2h6GNgCNte9TG+n+P1LBDo17yDBVUXk9gZ79BaLc2uQOX0FDGHIL07ihJa/p4322Fbds2brq3/EXbFmkBHFh7dTIhEKOxeGXRBiMQgNJxUqBfIYkzUHBoGIcw8S6SVDQTgoN9gaAcvqlMTpkrqUpN+RwUeXcwCDPfCpVaU7VK4cuUoMNHGG4iU1hYWtnZW81CITPGMaQ00ptcpXVwdV/tLVVybyQNgWyhiFL7d/PY5mqlpkQCNoA8fbHSn53H3N+evcZcos+D4+pLlBq7t3XIj/gVODpWru7ZEbIBQiO9xxI3B+2xBMRBWiv7Wi0OujqQ/rHyG6zMCIbuixnl8M0+pqMqM+NzUHCyJw/2Pn2YEGwsDEEZOCnUr0APp6Pg30sujx1eZqNgMC0vAA=="},130610:(o,W,F)=>{o.exports=F.p+"images/star.6a9171b4.webp"},242634:()=>{},974486:(o,W,F)=>{F.d(W,{A:()=>v,b:()=>E});var E=F(686418);const v=E},815700:(o,W,F)=>{F.d(W,{A:()=>v});var E=F(813869);const v=function(o,W){var F=o.length;if(F)return W+=W<0?F:0,E.A(W,F)?o[W]:void 0}},466423:(o,W,F)=>{F.d(W,{A:()=>G});var E=F(18272),v=F(218445),a=F(276825);const G=function(o){return function(W){var F,G,L,U=v.A(W);return"[object Map]"==U?a.A(W):"[object Set]"==U?(F=W,G=-1,L=Array(F.size),F.forEach((function(o){L[++G]=[o,o]})),L):function(o,W){return E.A(W,(function(W){return[W,o[W]]}))}(W,o(W))}}},872017:(o,W,F)=>{F.d(W,{A:()=>U});var E=F(415420),v=F(56988),a=F(510405),G=Math.ceil,L=Math.max;const U=function(o,W,F){W=(F?v.A(o,W,F):void 0===W)?1:L(a.A(W),0);var U=null==o?0:o.length;if(!U||W<1)return[];for(var I=0,l=0,h=Array(G(U/W));I<U;)h[l++]=E.A(o,I,I+=W);return h}},507565:(o,W,F)=>{F.d(W,{A:()=>E});const E=function(o){for(var W=-1,F=null==o?0:o.length,E={};++W<F;){var v=o[W];E[v[0]]=v[1]}return E}},444792:(o,W,F)=>{F.d(W,{A:()=>a});var E=F(156568),v=F(258214);const a=function(o){return!0===o||!1===o||v.A(o)&&"[object Boolean]"==E.A(o)}},180578:(o,W,F)=>{F.d(W,{A:()=>a});var E=F(815700),v=F(510405);const a=function(o,W){return o&&o.length?E.A(o,v.A(W)):void 0}},491292:(o,W,F)=>{F.d(W,{A:()=>I});var E=F(46396),v=F(436897),a=F(506593);const G=function(o,W){var F;return a.A(o,(function(o,E,v){return!(F=W(o,E,v))})),!!F};var L=F(678285),U=F(56988);const I=function(o,W,F){var a=L.A(o)?E.A:G;return F&&U.A(o,W,F)&&(W=void 0),a(o,v.A(W,3))}},270566:(o,W,F)=>{F.d(W,{A:()=>a});var E=F(466423),v=F(616826);const a=E.A(v.A)},929468:(o,W,F)=>{F.d(W,{A:()=>a});var E=F(957842),v=0;const a=function(o){var W=++v;return E.A(o)+W}},557108:(o,W,F)=>{F.d(W,{sP:()=>C,l2:()=>U,T9:()=>p,WO:()=>G,Y8:()=>H.Y,sZ:()=>j});var E=F(316197);const v={loader:E.Ag.LoadParser,resolver:E.Ag.ResolveParser,cache:E.Ag.CacheParser,detection:E.Ag.DetectionParser};E.XO.handle(E.Ag.Asset,(o=>{const W=o.ref;Object.entries(v).filter((([o])=>!!W[o])).forEach((([o,F])=>{var v;return E.XO.add(Object.assign(W[o],{extension:null!==(v=W[o].extension)&&void 0!==v?v:F}))}))}),(o=>{const W=o.ref;Object.keys(v).filter((o=>!!W[o])).forEach((o=>E.XO.remove(W[o])))}));class a{constructor(o,W=!1){this._loader=o,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=W}add(o){o.forEach((o=>{this._assetList.push(o)})),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const o=[],W=Math.min(this._assetList.length,this._maxConcurrent);for(let F=0;F<W;F++)o.push(this._assetList.pop());await this._loader.load(o),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(o){this._isActive!==o&&(this._isActive=o,o&&!this._isLoading&&this._next())}}function G(o,W){const F=o.split("?")[0],v=E.Wp.path.extname(F).toLowerCase();return Array.isArray(W)?W.includes(v):v===W}const L=(o,W,F=!1)=>(Array.isArray(o)||(o=[o]),W?o.map((o=>"string"==typeof o||F?W(o):o)):o),U=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(o){return this._cache.has(o)}get(o){const W=this._cache.get(o);return W||console.warn(`[Assets] Asset id ${o} was not found in the Cache`),W}set(o,W){const F=L(o);let v;for(let o=0;o<this.parsers.length;o++){const E=this.parsers[o];if(E.test(W)){v=E.getCacheableAssets(F,W);break}}v||(v={},F.forEach((o=>{v[o]=W})));const a=Object.keys(v),G={cacheKeys:a,keys:F};if(F.forEach((o=>{this._cacheMap.set(o,G)})),a.forEach((o=>{this._cache.has(o)&&this._cache.get(o)!==W&&console.warn("[Cache] already has key:",o),this._cache.set(o,v[o])})),W instanceof E.gP){const o=W;F.forEach((W=>{o.baseTexture!==E.gP.EMPTY.baseTexture&&E.t5.addToCache(o.baseTexture,W),E.gP.addToCache(o,W)}))}}remove(o){if(!this._cacheMap.has(o))return void console.warn(`[Assets] Asset id ${o} was not found in the Cache`);const W=this._cacheMap.get(o);W.cacheKeys.forEach((o=>{this._cache.delete(o)})),W.keys.forEach((o=>{this._cacheMap.delete(o)}))}get parsers(){return this._parsers}},I=o=>!Array.isArray(o);class l{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(o,W,F)=>(this._parsersValidated=!1,o[W]=F,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(o,W){const F={promise:null,parser:null};return F.promise=(async()=>{var E,v;let a=null,G=null;if(W.loadParser&&(G=this._parserHash[W.loadParser],G||console.warn(`[Assets] specified load parser "${W.loadParser}" not found while loading ${o}`)),!G){for(let F=0;F<this.parsers.length;F++){const v=this.parsers[F];if(v.load&&(null===(E=v.test)||void 0===E?void 0:E.call(v,o,W,this))){G=v;break}}if(!G)return console.warn(`[Assets] ${o} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}a=await G.load(o,W,this),F.parser=G;for(let o=0;o<this.parsers.length;o++){const E=this.parsers[o];E.parse&&E.parse&&await(null===(v=E.testParse)||void 0===v?void 0:v.call(E,a,W,this))&&(a=await E.parse(a,W,this)||a,F.parser=E)}return a})(),F}async load(o,W){this._parsersValidated||this._validateParsers();let F=0;const v={},a=I(o),G=L(o,(o=>({alias:[o],src:o}))),U=G.length,l=G.map((async o=>{const a=E.Wp.path.toAbsolute(o.src);if(!v[o.src])try{this.promiseCache[a]||(this.promiseCache[a]=this._getLoadPromiseAndParser(a,o)),v[o.src]=await this.promiseCache[a].promise,W&&W(++F/U)}catch(W){throw delete this.promiseCache[a],delete v[o.src],new Error(`[Loader.load] Failed to load ${a}.\n${W}`)}}));return await Promise.all(l),a?v[G[0].src]:v}async unload(o){const W=L(o,(o=>({alias:[o],src:o}))).map((async o=>{var W,F;const v=E.Wp.path.toAbsolute(o.src),a=this.promiseCache[v];if(a){const E=await a.promise;delete this.promiseCache[v],null===(F=null===(W=a.parser)||void 0===W?void 0:W.unload)||void 0===F||F.call(W,E,o,this)}}));await Promise.all(W)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter((o=>o.name)).reduce(((o,W)=>(o[W.name]&&console.warn(`[Assets] loadParser name conflict "${W.name}"`),{...o,[W.name]:W})),{})}}var h,p=((h=p||{})[h.Low=0]="Low",h[h.Normal=1]="Normal",h[h.High=2]="High",h);function g(o,W){if(Array.isArray(W)){for(const F of W)if(o.startsWith(`data:${F}`))return!0;return!1}return o.startsWith(`data:${W}`)}const f={extension:{type:E.Ag.LoadParser,priority:p.Low},name:"loadJson",test:o=>g(o,"application/json")||G(o,".json"),load:async o=>await(await E.W0.ADAPTER.fetch(o)).json()};E.XO.add(f);const A={name:"loadTxt",extension:{type:E.Ag.LoadParser,priority:p.Low},test:o=>g(o,"text/plain")||G(o,".txt"),load:async o=>await(await E.W0.ADAPTER.fetch(o)).text()};E.XO.add(A);const k=["normal","bold","100","200","300","400","500","600","700","800","900"],Z=[".ttf",".otf",".woff",".woff2"],P=["font/ttf","font/otf","font/woff","font/woff2"],y=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i,z=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/,x={extension:{type:E.Ag.LoadParser,priority:p.Low},name:"loadWebFont",test:o=>g(o,P)||G(o,Z),async load(o,W){var F,v,a,G,L,U;const I=E.W0.ADAPTER.getFontFaceSet();if(I){const h=[],p=null!==(v=null===(F=W.data)||void 0===F?void 0:F.family)&&void 0!==v?v:function(o){const W=E.Wp.path.extname(o),F=E.Wp.path.basename(o,W).replace(/(-|_)/g," ").toLowerCase().split(" ").map((o=>o.charAt(0).toUpperCase()+o.slice(1)));let v=F.length>0;for(const o of F)if(!o.match(y)){v=!1;break}let a=F.join(" ");return v||(a=`"${a.replace(/[\\"]/g,"\\$&")}"`),a}(o),g=null!==(L=null===(G=null===(a=W.data)||void 0===a?void 0:a.weights)||void 0===G?void 0:G.filter((o=>k.includes(o))))&&void 0!==L?L:["normal"],f=null!==(U=W.data)&&void 0!==U?U:{};for(let W=0;W<g.length;W++){const F=g[W],E=new FontFace(p,`url(${l=o,z.test(l)?l:encodeURI(l)})`,{...f,weight:F});await E.load(),I.add(E),h.push(E)}return 1===h.length?h[0]:h}var l;return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(o){(Array.isArray(o)?o:[o]).forEach((o=>E.W0.ADAPTER.getFontFaceSet().delete(o)))}};E.XO.add(x);let N,e=0;const t="\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    ",m="\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };";let r;const B=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise((o=>{const W=URL.createObjectURL(new Blob([t],{type:"application/javascript"})),F=new Worker(W);F.addEventListener("message",(E=>{F.terminate(),URL.revokeObjectURL(W),o(E.data)}))}))),this._isImageBitmapSupported}loadImageBitmap(o){return this._run("loadImageBitmap",[o])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){void 0===N&&(N=navigator.hardwareConcurrency||4);let o=this.workerPool.pop();return!o&&this._createdWorkers<N&&(r||(r=URL.createObjectURL(new Blob([m],{type:"application/javascript"}))),this._createdWorkers++,o=new Worker(r),o.addEventListener("message",(o=>{this.complete(o.data),this.returnWorker(o.target),this.next()}))),o}returnWorker(o){this.workerPool.push(o)}complete(o){void 0!==o.error?this.resolveHash[o.uuid].reject(o.error):this.resolveHash[o.uuid].resolve(o.data),this.resolveHash[o.uuid]=null}async _run(o,W){await this._initWorkers();const F=new Promise(((F,E)=>{this.queue.push({id:o,arguments:W,resolve:F,reject:E})}));return this.next(),F}next(){if(!this.queue.length)return;const o=this.getWorker();if(!o)return;const W=this.queue.pop(),F=W.id;this.resolveHash[e]={resolve:W.resolve,reject:W.reject},o.postMessage({data:W.arguments,uuid:e++,id:F})}};function j(o,W,F){o.resource.internal=!0;const v=new E.gP(o),a=()=>{delete W.promiseCache[F],U.has(F)&&U.remove(F)};return v.baseTexture.once("destroyed",(()=>{F in W.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),a())})),v.once("destroyed",(()=>{o.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),a())})),v}const V=[".jpeg",".jpg",".png",".webp",".avif"],w=["image/jpeg","image/png","image/webp","image/avif"],K={name:"loadTextures",extension:{type:E.Ag.LoadParser,priority:p.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test:o=>g(o,w)||G(o,V),async load(o,W,F){var v,a;const G=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let L;L=G?this.config.preferWorkers&&await B.isImageBitmapSupported()?await B.loadImageBitmap(o):await async function(o){const W=await E.W0.ADAPTER.fetch(o);if(!W.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${o}: ${W.status} ${W.statusText}`);const F=await W.blob();return await createImageBitmap(F)}(o):await new Promise(((W,F)=>{const E=new Image;E.crossOrigin=this.config.crossOrigin,E.src=o,E.complete?W(E):(E.onload=()=>W(E),E.onerror=o=>F(o))}));const U={...W.data};null!==(v=U.resolution)&&void 0!==v||(U.resolution=E.Wp.getResolutionOfUrl(o)),G&&void 0===(null===(a=U.resourceOptions)||void 0===a?void 0:a.ownsImageBitmap)&&(U.resourceOptions={...U.resourceOptions},U.resourceOptions.ownsImageBitmap=!0);const I=new E.t5(L,U);return I.resource.src=o,j(I,F,o)},unload(o){o.destroy(!0)}};E.XO.add(K);const T={extension:{type:E.Ag.LoadParser,priority:p.High},name:"loadSVG",test:o=>g(o,"image/svg+xml")||G(o,".svg"),testParse:async o=>E.$f.test(o),async parse(o,W,F){var v;const a=new E.$f(o,null===(v=null==W?void 0:W.data)||void 0===v?void 0:v.resourceOptions);await a.load();const G=new E.t5(a,{resolution:E.Wp.getResolutionOfUrl(o),...null==W?void 0:W.data});return G.resource.src=W.src,j(G,F,W.src)},load:async(o,W)=>(await E.W0.ADAPTER.fetch(o)).text(),unload:K.unload};E.XO.add(T);const d=[".mp4",".m4v",".webm",".ogv"],n=["video/mp4","video/webm","video/ogg"],u={name:"loadVideo",extension:{type:E.Ag.LoadParser,priority:p.High},config:{defaultAutoPlay:!0},test:o=>g(o,n)||G(o,d),async load(o,W,F){var v;let a;const G=await(await E.W0.ADAPTER.fetch(o)).blob(),L=URL.createObjectURL(G);try{const G={autoPlay:this.config.defaultAutoPlay,...null===(v=null==W?void 0:W.data)||void 0===v?void 0:v.resourceOptions},U=new E.A5(L,G);await U.load();const I=new E.t5(U,{alphaMode:await E.Wp.detectVideoAlphaMode(),resolution:E.Wp.getResolutionOfUrl(o),...null==W?void 0:W.data});I.resource.src=o,a=j(I,F,o),a.baseTexture.once("destroyed",(()=>{URL.revokeObjectURL(L)}))}catch(o){throw URL.revokeObjectURL(L),o}return a},unload(o){o.destroy(!0)}};function $(o,W,F,E,v){const a=W[F];for(let G=0;G<a.length;G++){const L=a[G];F<W.length-1?$(o.replace(E[F],L),W,F+1,E,v):v.push(o.replace(E[F],L))}}function Y(o){const W=o.match(/\{(.*?)\}/g),F=[];if(W){const E=[];W.forEach((o=>{const W=o.substring(1,o.length-1).split(",");E.push(W)})),$(o,E,0,W,F)}else F.push(o);return F}E.XO.add(u);class Q{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(o,W)=>`${o}${this._bundleIdConnector}${W}`,extractAssetIdFromBundle:(o,W)=>W.replace(`${o}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(o){var W,F,E;if(this._bundleIdConnector=null!==(W=o.connector)&&void 0!==W?W:this._bundleIdConnector,this._createBundleAssetId=null!==(F=o.createBundleAssetId)&&void 0!==F?F:this._createBundleAssetId,this._extractAssetIdFromBundle=null!==(E=o.extractAssetIdFromBundle)&&void 0!==E?E:this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...o){o.forEach((o=>{this._preferredOrder.push(o),o.priority||(o.priority=Object.keys(o.params))})),this._resolverHash={}}set basePath(o){this._basePath=o}get basePath(){return this._basePath}set rootPath(o){this._rootPath=o}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(o){if("string"==typeof o)this._defaultSearchParams=o;else{const W=o;this._defaultSearchParams=Object.keys(W).map((o=>`${encodeURIComponent(o)}=${encodeURIComponent(W[o])}`)).join("&")}}getAlias(o){const{alias:W,name:F,src:E,srcs:v}=o;return L(W||F||E||v,(o=>{var W;return"string"==typeof o?o:Array.isArray(o)?o.map((o=>{var W,F;return null!==(F=null!==(W=null==o?void 0:o.src)&&void 0!==W?W:null==o?void 0:o.srcs)&&void 0!==F?F:o})):(null==o?void 0:o.src)||(null==o?void 0:o.srcs)?null!==(W=o.src)&&void 0!==W?W:o.srcs:o}),!0)}addManifest(o){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=o,o.bundles.forEach((o=>{this.addBundle(o.name,o.assets)}))}addBundle(o,W){const F=[];Array.isArray(W)?W.forEach((W=>{var E,v;const a=null!==(E=W.src)&&void 0!==E?E:W.srcs,G=null!==(v=W.alias)&&void 0!==v?v:W.name;let L;if("string"==typeof G){const W=this._createBundleAssetId(o,G);F.push(W),L=[G,W]}else{const W=G.map((W=>this._createBundleAssetId(o,W)));F.push(...W),L=[...G,...W]}this.add({...W,alias:L,src:a})})):Object.keys(W).forEach((E=>{var v;const a=[E,this._createBundleAssetId(o,E)];if("string"==typeof W[E])this.add({alias:a,src:W[E]});else if(Array.isArray(W[E]))this.add({alias:a,src:W[E]});else{const o=W[E],F=null!==(v=o.src)&&void 0!==v?v:o.srcs;this.add({...o,alias:a,src:Array.isArray(F)?F:[F]})}F.push(...a)})),this._bundles[o]=F}add(o,W,F,v,a){const G=[];let U;"string"==typeof o||Array.isArray(o)&&"string"==typeof o[0]?(E.Wp.deprecation("7.2.0","Assets.add now uses an object instead of individual parameters.\nPlease use Assets.add({ alias, src, data, format, loadParser }) instead."),G.push({alias:o,src:W,data:F,format:v,loadParser:a})):Array.isArray(o)?G.push(...o):G.push(o),U=o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)},L(G).forEach((o=>{const{src:W,srcs:F}=o;let{data:E,format:v,loadParser:a}=o;const G=L(W||F).map((o=>"string"==typeof o?Y(o):Array.isArray(o)?o:[o])),I=this.getAlias(o);Array.isArray(I)?I.forEach(U):U(I);const l=[];G.forEach((o=>{o.forEach((o=>{var W,F,G;let L={};if("object"!=typeof o){L.src=o;for(let W=0;W<this._parsers.length;W++){const F=this._parsers[W];if(F.test(o)){L=F.parse(o);break}}}else E=null!==(W=o.data)&&void 0!==W?W:E,v=null!==(F=o.format)&&void 0!==F?F:v,a=null!==(G=o.loadParser)&&void 0!==G?G:a,L={...L,...o};if(!I)throw new Error(`[Resolver] alias is undefined for this asset: ${L.src}`);L=this.buildResolvedAsset(L,{aliases:I,data:E,format:v,loadParser:a}),l.push(L)}))})),I.forEach((o=>{this._assetMap[o]=l}))}))}resolveBundle(o){const W=I(o);o=L(o);const F={};return o.forEach((o=>{const W=this._bundles[o];if(W){const E=this.resolve(W),v={};for(const W in E){const F=E[W];v[this._extractAssetIdFromBundle(o,W)]=F}F[o]=v}})),W?F[o[0]]:F}resolveUrl(o){const W=this.resolve(o);if("string"!=typeof o){const o={};for(const F in W)o[F]=W[F].src;return o}return W.src}resolve(o){const W=I(o);o=L(o);const F={};return o.forEach((o=>{var W;if(!this._resolverHash[o])if(this._assetMap[o]){let F=this._assetMap[o];const E=F[0],v=this._getPreferredOrder(F);null==v||v.priority.forEach((o=>{v.params[o].forEach((W=>{const E=F.filter((F=>!!F[o]&&F[o]===W));E.length&&(F=E)}))})),this._resolverHash[o]=null!==(W=F[0])&&void 0!==W?W:E}else this._resolverHash[o]=this.buildResolvedAsset({alias:[o],src:o},{});F[o]=this._resolverHash[o]})),W?F[o[0]]:F}hasKey(o){return!!this._assetMap[o]}hasBundle(o){return!!this._bundles[o]}_getPreferredOrder(o){for(let W=0;W<o.length;W++){const W=o[0],F=this._preferredOrder.find((o=>o.params.format.includes(W.format)));if(F)return F}return this._preferredOrder[0]}_appendDefaultSearchParams(o){return this._defaultSearchParams?`${o}${/\?/.test(o)?"&":"?"}${this._defaultSearchParams}`:o}buildResolvedAsset(o,W){var F;const{aliases:v,data:a,loadParser:G,format:L}=W;return(this._basePath||this._rootPath)&&(o.src=E.Wp.path.toAbsolute(o.src,this._basePath,this._rootPath)),o.alias=null!==(F=null!=v?v:o.alias)&&void 0!==F?F:[o.src],o.src=this._appendDefaultSearchParams(o.src),o.data={...a||{},...o.data},o.loadParser=null!=G?G:o.loadParser,o.format=null!=L?L:E.Wp.path.extname(o.src).slice(1),o.srcs=o.src,o.name=o.alias,o}}const C=new class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Q,this.loader=new l,this.cache=U,this._backgroundLoader=new a(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(o={}){var W,F,E;if(this._initialized)return void console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");if(this._initialized=!0,o.defaultSearchParams&&this.resolver.setDefaultSearchParams(o.defaultSearchParams),o.basePath&&(this.resolver.basePath=o.basePath),o.bundleIdentifier&&this.resolver.setBundleIdentifier(o.bundleIdentifier),o.manifest){let W=o.manifest;"string"==typeof W&&(W=await this.load(W)),this.resolver.addManifest(W)}const v=null!==(F=null===(W=o.texturePreference)||void 0===W?void 0:W.resolution)&&void 0!==F?F:1,a="number"==typeof v?[v]:v,G=await this._detectFormats({preferredFormats:null===(E=o.texturePreference)||void 0===E?void 0:E.format,skipDetections:o.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:G,resolution:a}}),o.preferences&&this.setPreferences(o.preferences)}add(o,W,F,E,v){this.resolver.add(o,W,F,E,v)}async load(o,W){this._initialized||await this.init();const F=I(o),E=L(o).map((o=>{if("string"!=typeof o){const W=this.resolver.getAlias(o);return W.some((o=>!this.resolver.hasKey(o)))&&this.add(o),Array.isArray(W)?W[0]:W}return this.resolver.hasKey(o)||this.add({alias:o,src:o}),o})),v=this.resolver.resolve(E),a=await this._mapLoadToResolve(v,W);return F?a[E[0]]:a}addBundle(o,W){this.resolver.addBundle(o,W)}async loadBundle(o,W){this._initialized||await this.init();let F=!1;"string"==typeof o&&(F=!0,o=[o]);const E=this.resolver.resolveBundle(o),v={},a=Object.keys(E);let G=0,L=0;const U=()=>{null==W||W(++G/L)},I=a.map((o=>{const W=E[o];return L+=Object.keys(W).length,this._mapLoadToResolve(W,U).then((W=>{v[o]=W}))}));return await Promise.all(I),F?v[o[0]]:v}async backgroundLoad(o){this._initialized||await this.init(),"string"==typeof o&&(o=[o]);const W=this.resolver.resolve(o);this._backgroundLoader.add(Object.values(W))}async backgroundLoadBundle(o){this._initialized||await this.init(),"string"==typeof o&&(o=[o]);const W=this.resolver.resolveBundle(o);Object.values(W).forEach((o=>{this._backgroundLoader.add(Object.values(o))}))}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(o){if("string"==typeof o)return U.get(o);const W={};for(let F=0;F<o.length;F++)W[F]=U.get(o[F]);return W}async _mapLoadToResolve(o,W){const F=Object.values(o),E=Object.keys(o);this._backgroundLoader.active=!1;const v=await this.loader.load(F,W);this._backgroundLoader.active=!0;const a={};return F.forEach(((o,W)=>{const F=v[o.src],G=[o.src];o.alias&&G.push(...o.alias),a[E[W]]=F,U.set(G,F)})),a}async unload(o){this._initialized||await this.init();const W=L(o).map((o=>"string"!=typeof o?o.src:o)),F=this.resolver.resolve(W);await this._unloadFromResolved(F)}async unloadBundle(o){this._initialized||await this.init(),o=L(o);const W=this.resolver.resolveBundle(o),F=Object.keys(W).map((o=>this._unloadFromResolved(W[o])));await Promise.all(F)}async _unloadFromResolved(o){const W=Object.values(o);W.forEach((o=>{U.remove(o.src)})),await this.loader.unload(W)}async _detectFormats(o){let W=[];o.preferredFormats&&(W=Array.isArray(o.preferredFormats)?o.preferredFormats:[o.preferredFormats]);for(const F of o.detections)o.skipDetections||await F.test()?W=await F.add(W):o.skipDetections||(W=await F.remove(W));return W=W.filter(((o,F)=>W.indexOf(o)===F)),W}get detections(){return this._detections}get preferWorkers(){return K.config.preferWorkers}set preferWorkers(o){E.Wp.deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:o})}setPreferences(o){this.loader.parsers.forEach((W=>{W.config&&Object.keys(W.config).filter((W=>W in o)).forEach((F=>{W.config[F]=o[F]}))}))}};E.XO.handleByList(E.Ag.LoadParser,C.loader.parsers).handleByList(E.Ag.ResolveParser,C.resolver.parsers).handleByList(E.Ag.CacheParser,C.cache.parsers).handleByList(E.Ag.DetectionParser,C.detections);const q={extension:E.Ag.CacheParser,test:o=>Array.isArray(o)&&o.every((o=>o instanceof E.gP)),getCacheableAssets:(o,W)=>{const F={};return o.forEach((o=>{W.forEach(((W,E)=>{F[o+(0===E?"":E+1)]=W}))})),F}};async function c(o){if("Image"in globalThis)return new Promise((W=>{const F=new Image;F.onload=()=>{W(!0)},F.onerror=()=>{W(!1)},F.src=o}));if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const W=await(await fetch(o)).blob();await createImageBitmap(W)}catch(o){return!1}return!0}return!1}E.XO.add(q);const _={extension:{type:E.Ag.DetectionParser,priority:1},test:async()=>c("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async o=>[...o,"avif"],remove:async o=>o.filter((o=>"avif"!==o))};E.XO.add(_);const O={extension:{type:E.Ag.DetectionParser,priority:0},test:async()=>c("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async o=>[...o,"webp"],remove:async o=>o.filter((o=>"webp"!==o))};E.XO.add(O);const X=["png","jpg","jpeg"],S={extension:{type:E.Ag.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async o=>[...o,...X],remove:async o=>o.filter((o=>!X.includes(o)))};E.XO.add(S);const s="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function i(o){return!s&&""!==document.createElement("video").canPlayType(o)}const R={extension:{type:E.Ag.DetectionParser,priority:0},test:async()=>i("video/webm"),add:async o=>[...o,"webm"],remove:async o=>o.filter((o=>"webm"!==o))};E.XO.add(R);const J={extension:{type:E.Ag.DetectionParser,priority:0},test:async()=>i("video/mp4"),add:async o=>[...o,"mp4","m4v"],remove:async o=>o.filter((o=>"mp4"!==o&&"m4v"!==o))};E.XO.add(J);const D={extension:{type:E.Ag.DetectionParser,priority:0},test:async()=>i("video/ogg"),add:async o=>[...o,"ogv"],remove:async o=>o.filter((o=>"ogv"!==o))};E.XO.add(D);const M={extension:E.Ag.ResolveParser,test:K.test,parse:o=>{var W,F;return{resolution:parseFloat(null!==(F=null===(W=E.W0.RETINA_PREFIX.exec(o))||void 0===W?void 0:W[1])&&void 0!==F?F:"1"),format:E.Wp.path.extname(o).slice(1),src:o}}};E.XO.add(M);var H=F(116387)},116387:(o,W,F)=>{F.d(W,{Y:()=>E});const E=(o,W)=>{const F=W.split("?")[1];return F&&(o+=`?${F}`),o}},817798:(o,W,F)=>{F.d(W,{Q:()=>K});var E={grad:.9,turn:360,rad:360/(2*Math.PI)},v=function(o){return"string"==typeof o?o.length>0:"number"==typeof o},a=function(o,W,F){return void 0===W&&(W=0),void 0===F&&(F=Math.pow(10,W)),Math.round(F*o)/F+0},G=function(o,W,F){return void 0===W&&(W=0),void 0===F&&(F=1),o>F?F:o>W?o:W},L=function(o){return(o=isFinite(o)?o%360:0)>0?o:o+360},U=function(o){return{r:G(o.r,0,255),g:G(o.g,0,255),b:G(o.b,0,255),a:G(o.a)}},I=function(o){return{r:a(o.r),g:a(o.g),b:a(o.b),a:a(o.a,3)}},l=/^#([0-9a-f]{3,8})$/i,h=function(o){var W=o.toString(16);return W.length<2?"0"+W:W},p=function(o){var W=o.r,F=o.g,E=o.b,v=o.a,a=Math.max(W,F,E),G=a-Math.min(W,F,E),L=G?a===W?(F-E)/G:a===F?2+(E-W)/G:4+(W-F)/G:0;return{h:60*(L<0?L+6:L),s:a?G/a*100:0,v:a/255*100,a:v}},g=function(o){var W=o.h,F=o.s,E=o.v,v=o.a;W=W/360*6,F/=100,E/=100;var a=Math.floor(W),G=E*(1-F),L=E*(1-(W-a)*F),U=E*(1-(1-W+a)*F),I=a%6;return{r:255*[E,L,G,G,U,E][I],g:255*[U,E,E,L,G,G][I],b:255*[G,G,U,E,E,L][I],a:v}},f=function(o){return{h:L(o.h),s:G(o.s,0,100),l:G(o.l,0,100),a:G(o.a)}},A=function(o){return{h:a(o.h),s:a(o.s),l:a(o.l),a:a(o.a,3)}},k=function(o){return g((F=(W=o).s,{h:W.h,s:(F*=((E=W.l)<50?E:100-E)/100)>0?2*F/(E+F)*100:0,v:E+F,a:W.a}));var W,F,E},Z=function(o){return{h:(W=p(o)).h,s:(v=(200-(F=W.s))*(E=W.v)/100)>0&&v<200?F*E/100/(v<=100?v:200-v)*100:0,l:v/2,a:W.a};var W,F,E,v},P=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,z=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,x=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,N={string:[[function(o){var W=l.exec(o);return W?(o=W[1]).length<=4?{r:parseInt(o[0]+o[0],16),g:parseInt(o[1]+o[1],16),b:parseInt(o[2]+o[2],16),a:4===o.length?a(parseInt(o[3]+o[3],16)/255,2):1}:6===o.length||8===o.length?{r:parseInt(o.substr(0,2),16),g:parseInt(o.substr(2,2),16),b:parseInt(o.substr(4,2),16),a:8===o.length?a(parseInt(o.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(o){var W=z.exec(o)||x.exec(o);return W?W[2]!==W[4]||W[4]!==W[6]?null:U({r:Number(W[1])/(W[2]?100/255:1),g:Number(W[3])/(W[4]?100/255:1),b:Number(W[5])/(W[6]?100/255:1),a:void 0===W[7]?1:Number(W[7])/(W[8]?100:1)}):null},"rgb"],[function(o){var W=P.exec(o)||y.exec(o);if(!W)return null;var F,v,a=f({h:(F=W[1],v=W[2],void 0===v&&(v="deg"),Number(F)*(E[v]||1)),s:Number(W[3]),l:Number(W[4]),a:void 0===W[5]?1:Number(W[5])/(W[6]?100:1)});return k(a)},"hsl"]],object:[[function(o){var W=o.r,F=o.g,E=o.b,a=o.a,G=void 0===a?1:a;return v(W)&&v(F)&&v(E)?U({r:Number(W),g:Number(F),b:Number(E),a:Number(G)}):null},"rgb"],[function(o){var W=o.h,F=o.s,E=o.l,a=o.a,G=void 0===a?1:a;if(!v(W)||!v(F)||!v(E))return null;var L=f({h:Number(W),s:Number(F),l:Number(E),a:Number(G)});return k(L)},"hsl"],[function(o){var W=o.h,F=o.s,E=o.v,a=o.a,U=void 0===a?1:a;if(!v(W)||!v(F)||!v(E))return null;var I=function(o){return{h:L(o.h),s:G(o.s,0,100),v:G(o.v,0,100),a:G(o.a)}}({h:Number(W),s:Number(F),v:Number(E),a:Number(U)});return g(I)},"hsv"]]},e=function(o,W){for(var F=0;F<W.length;F++){var E=W[F][0](o);if(E)return[E,W[F][1]]}return[null,void 0]},t=function(o,W){var F=Z(o);return{h:F.h,s:G(F.s+100*W,0,100),l:F.l,a:F.a}},m=function(o){return(299*o.r+587*o.g+114*o.b)/1e3/255},r=function(o,W){var F=Z(o);return{h:F.h,s:F.s,l:G(F.l+100*W,0,100),a:F.a}},B=function(){function o(o){this.parsed=function(o){return"string"==typeof o?e(o.trim(),N.string):"object"==typeof o&&null!==o?e(o,N.object):[null,void 0]}(o)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return o.prototype.isValid=function(){return null!==this.parsed},o.prototype.brightness=function(){return a(m(this.rgba),2)},o.prototype.isDark=function(){return m(this.rgba)<.5},o.prototype.isLight=function(){return m(this.rgba)>=.5},o.prototype.toHex=function(){return W=(o=I(this.rgba)).r,F=o.g,E=o.b,G=(v=o.a)<1?h(a(255*v)):"","#"+h(W)+h(F)+h(E)+G;var o,W,F,E,v,G},o.prototype.toRgb=function(){return I(this.rgba)},o.prototype.toRgbString=function(){return W=(o=I(this.rgba)).r,F=o.g,E=o.b,(v=o.a)<1?"rgba("+W+", "+F+", "+E+", "+v+")":"rgb("+W+", "+F+", "+E+")";var o,W,F,E,v},o.prototype.toHsl=function(){return A(Z(this.rgba))},o.prototype.toHslString=function(){return W=(o=A(Z(this.rgba))).h,F=o.s,E=o.l,(v=o.a)<1?"hsla("+W+", "+F+"%, "+E+"%, "+v+")":"hsl("+W+", "+F+"%, "+E+"%)";var o,W,F,E,v},o.prototype.toHsv=function(){return o=p(this.rgba),{h:a(o.h),s:a(o.s),v:a(o.v),a:a(o.a,3)};var o},o.prototype.invert=function(){return j({r:255-(o=this.rgba).r,g:255-o.g,b:255-o.b,a:o.a});var o},o.prototype.saturate=function(o){return void 0===o&&(o=.1),j(t(this.rgba,o))},o.prototype.desaturate=function(o){return void 0===o&&(o=.1),j(t(this.rgba,-o))},o.prototype.grayscale=function(){return j(t(this.rgba,-1))},o.prototype.lighten=function(o){return void 0===o&&(o=.1),j(r(this.rgba,o))},o.prototype.darken=function(o){return void 0===o&&(o=.1),j(r(this.rgba,-o))},o.prototype.rotate=function(o){return void 0===o&&(o=15),this.hue(this.hue()+o)},o.prototype.alpha=function(o){return"number"==typeof o?j({r:(W=this.rgba).r,g:W.g,b:W.b,a:o}):a(this.rgba.a,3);var W},o.prototype.hue=function(o){var W=Z(this.rgba);return"number"==typeof o?j({h:o,s:W.s,l:W.l,a:W.a}):a(W.h)},o.prototype.isEqual=function(o){return this.toHex()===j(o).toHex()},o}(),j=function(o){return o instanceof B?o:new B(o)},V=[];!function(o){o.forEach((function(o){V.indexOf(o)<0&&(o(B,N),V.push(o))}))}([function(o,W){var F={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},E={};for(var v in F)E[F[v]]=v;var a={};o.prototype.toName=function(W){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var v,G,L=E[this.toHex()];if(L)return L;if(null==W?void 0:W.closest){var U=this.toRgb(),I=1/0,l="black";if(!a.length)for(var h in F)a[h]=new o(F[h]).toRgb();for(var p in F){var g=(v=U,G=a[p],Math.pow(v.r-G.r,2)+Math.pow(v.g-G.g,2)+Math.pow(v.b-G.b,2));g<I&&(I=g,l=p)}return l}},W.string.push([function(W){var E=W.toLowerCase(),v="transparent"===E?"#0000":F[E];return v?new o(v).toRgb():null},"name"])}]);const w=class o{constructor(o=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=o}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(o){return this.value=o,this}set value(W){if(W instanceof o)this._value=this.cloneSource(W._value),this._int=W._int,this._components.set(W._components);else{if(null===W)throw new Error("Cannot set PIXI.Color#value to null");(null===this._value||!this.isSourceEqual(this._value,W))&&(this.normalize(W),this._value=this.cloneSource(W))}}get value(){return this._value}cloneSource(o){return"string"==typeof o||"number"==typeof o||o instanceof Number||null===o?o:Array.isArray(o)||ArrayBuffer.isView(o)?o.slice(0):"object"==typeof o&&null!==o?{...o}:o}isSourceEqual(o,W){const F=typeof o;if(F!==typeof W)return!1;if("number"===F||"string"===F||o instanceof Number)return o===W;if(Array.isArray(o)&&Array.isArray(W)||ArrayBuffer.isView(o)&&ArrayBuffer.isView(W))return o.length===W.length&&o.every(((o,F)=>o===W[F]));if(null!==o&&null!==W){const F=Object.keys(o),E=Object.keys(W);return F.length===E.length&&F.every((F=>o[F]===W[F]))}return o===W}toRgba(){const[o,W,F,E]=this._components;return{r:o,g:W,b:F,a:E}}toRgb(){const[o,W,F]=this._components;return{r:o,g:W,b:F}}toRgbaString(){const[o,W,F]=this.toUint8RgbArray();return`rgba(${o},${W},${F},${this.alpha})`}toUint8RgbArray(o){const[W,F,E]=this._components;return(o=null!=o?o:[])[0]=Math.round(255*W),o[1]=Math.round(255*F),o[2]=Math.round(255*E),o}toRgbArray(o){o=null!=o?o:[];const[W,F,E]=this._components;return o[0]=W,o[1]=F,o[2]=E,o}toNumber(){return this._int}toLittleEndianNumber(){const o=this._int;return(o>>16)+(65280&o)+((255&o)<<16)}multiply(W){const[F,E,v,a]=o.temp.setValue(W)._components;return this._components[0]*=F,this._components[1]*=E,this._components[2]*=v,this._components[3]*=a,this.refreshInt(),this._value=null,this}premultiply(o,W=!0){return W&&(this._components[0]*=o,this._components[1]*=o,this._components[2]*=o),this._components[3]=o,this.refreshInt(),this._value=null,this}toPremultiplied(o,W=!0){if(1===o)return(255<<24)+this._int;if(0===o)return W?0:this._int;let F=this._int>>16&255,E=this._int>>8&255,v=255&this._int;return W&&(F=F*o+.5|0,E=E*o+.5|0,v=v*o+.5|0),(255*o<<24)+(F<<16)+(E<<8)+v}toHex(){const o=this._int.toString(16);return`#${"000000".substring(0,6-o.length)+o}`}toHexa(){const o=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-o.length)+o}setAlpha(o){return this._components[3]=this._clamp(o),this}round(o){const[W,F,E]=this._components;return this._components[0]=Math.round(W*o)/o,this._components[1]=Math.round(F*o)/o,this._components[2]=Math.round(E*o)/o,this.refreshInt(),this._value=null,this}toArray(o){o=null!=o?o:[];const[W,F,E,v]=this._components;return o[0]=W,o[1]=F,o[2]=E,o[3]=v,o}normalize(W){let F,E,v,a;if(("number"==typeof W||W instanceof Number)&&W>=0&&W<=16777215)F=(W>>16&255)/255,E=(W>>8&255)/255,v=(255&W)/255,a=1;else if((Array.isArray(W)||W instanceof Float32Array)&&W.length>=3&&W.length<=4)W=this._clamp(W),[F,E,v,a=1]=W;else if((W instanceof Uint8Array||W instanceof Uint8ClampedArray)&&W.length>=3&&W.length<=4)W=this._clamp(W,0,255),[F,E,v,a=255]=W,F/=255,E/=255,v/=255,a/=255;else if("string"==typeof W||"object"==typeof W){if("string"==typeof W){const F=o.HEX_PATTERN.exec(W);F&&(W=`#${F[2]}`)}const G=j(W);G.isValid()&&(({r:F,g:E,b:v,a}=G.rgba),F/=255,E/=255,v/=255)}if(void 0===F)throw new Error(`Unable to convert color ${W}`);this._components[0]=F,this._components[1]=E,this._components[2]=v,this._components[3]=a,this.refreshInt()}refreshInt(){this._clamp(this._components);const[o,W,F]=this._components;this._int=(255*o<<16)+(255*W<<8)+(255*F|0)}_clamp(o,W=0,F=1){return"number"==typeof o?Math.min(Math.max(o,W),F):(o.forEach(((E,v)=>{o[v]=Math.min(Math.max(E,W),F)})),o)}};w.shared=new w,w.temp=new w,w.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let K=w},424608:(o,W,F)=>{F.d(W,{B9:()=>m,E8:()=>d,Gk:()=>n,Km:()=>N,M6:()=>K,OS:()=>$,Pk:()=>Y,QE:()=>V,XZ:()=>w,_4:()=>r,dW:()=>j,fr:()=>u,h3:()=>e,hR:()=>B,he:()=>C,uR:()=>T,vg:()=>Q,wn:()=>t,yw:()=>q});var E,v,a,G,L,U,I,l,h,p,g,f,A,k,Z,P,y,z,x,N=((x=N||{})[x.WEBGL_LEGACY=0]="WEBGL_LEGACY",x[x.WEBGL=1]="WEBGL",x[x.WEBGL2=2]="WEBGL2",x),e=((z=e||{})[z.UNKNOWN=0]="UNKNOWN",z[z.WEBGL=1]="WEBGL",z[z.CANVAS=2]="CANVAS",z),t=((y=t||{})[y.COLOR=16384]="COLOR",y[y.DEPTH=256]="DEPTH",y[y.STENCIL=1024]="STENCIL",y),m=((P=m||{})[P.NORMAL=0]="NORMAL",P[P.ADD=1]="ADD",P[P.MULTIPLY=2]="MULTIPLY",P[P.SCREEN=3]="SCREEN",P[P.OVERLAY=4]="OVERLAY",P[P.DARKEN=5]="DARKEN",P[P.LIGHTEN=6]="LIGHTEN",P[P.COLOR_DODGE=7]="COLOR_DODGE",P[P.COLOR_BURN=8]="COLOR_BURN",P[P.HARD_LIGHT=9]="HARD_LIGHT",P[P.SOFT_LIGHT=10]="SOFT_LIGHT",P[P.DIFFERENCE=11]="DIFFERENCE",P[P.EXCLUSION=12]="EXCLUSION",P[P.HUE=13]="HUE",P[P.SATURATION=14]="SATURATION",P[P.COLOR=15]="COLOR",P[P.LUMINOSITY=16]="LUMINOSITY",P[P.NORMAL_NPM=17]="NORMAL_NPM",P[P.ADD_NPM=18]="ADD_NPM",P[P.SCREEN_NPM=19]="SCREEN_NPM",P[P.NONE=20]="NONE",P[P.SRC_OVER=0]="SRC_OVER",P[P.SRC_IN=21]="SRC_IN",P[P.SRC_OUT=22]="SRC_OUT",P[P.SRC_ATOP=23]="SRC_ATOP",P[P.DST_OVER=24]="DST_OVER",P[P.DST_IN=25]="DST_IN",P[P.DST_OUT=26]="DST_OUT",P[P.DST_ATOP=27]="DST_ATOP",P[P.ERASE=26]="ERASE",P[P.SUBTRACT=28]="SUBTRACT",P[P.XOR=29]="XOR",P),r=((Z=r||{})[Z.POINTS=0]="POINTS",Z[Z.LINES=1]="LINES",Z[Z.LINE_LOOP=2]="LINE_LOOP",Z[Z.LINE_STRIP=3]="LINE_STRIP",Z[Z.TRIANGLES=4]="TRIANGLES",Z[Z.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Z[Z.TRIANGLE_FAN=6]="TRIANGLE_FAN",Z),B=((k=B||{})[k.RGBA=6408]="RGBA",k[k.RGB=6407]="RGB",k[k.RG=33319]="RG",k[k.RED=6403]="RED",k[k.RGBA_INTEGER=36249]="RGBA_INTEGER",k[k.RGB_INTEGER=36248]="RGB_INTEGER",k[k.RG_INTEGER=33320]="RG_INTEGER",k[k.RED_INTEGER=36244]="RED_INTEGER",k[k.ALPHA=6406]="ALPHA",k[k.LUMINANCE=6409]="LUMINANCE",k[k.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",k[k.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",k[k.DEPTH_STENCIL=34041]="DEPTH_STENCIL",k),j=((A=j||{})[A.TEXTURE_2D=3553]="TEXTURE_2D",A[A.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",A[A.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",A[A.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",A[A.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",A[A.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",A[A.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",A[A.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",A[A.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",A),V=((f=V||{})[f.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",f[f.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",f[f.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",f[f.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",f[f.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",f[f.UNSIGNED_INT=5125]="UNSIGNED_INT",f[f.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",f[f.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",f[f.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",f[f.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",f[f.BYTE=5120]="BYTE",f[f.SHORT=5122]="SHORT",f[f.INT=5124]="INT",f[f.FLOAT=5126]="FLOAT",f[f.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",f[f.HALF_FLOAT=36193]="HALF_FLOAT",f),w=((g=w||{})[g.FLOAT=0]="FLOAT",g[g.INT=1]="INT",g[g.UINT=2]="UINT",g),K=((p=K||{})[p.NEAREST=0]="NEAREST",p[p.LINEAR=1]="LINEAR",p),T=((h=T||{})[h.CLAMP=33071]="CLAMP",h[h.REPEAT=10497]="REPEAT",h[h.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",h),d=((l=d||{})[l.OFF=0]="OFF",l[l.POW2=1]="POW2",l[l.ON=2]="ON",l[l.ON_MANUAL=3]="ON_MANUAL",l),n=((I=n||{})[I.NPM=0]="NPM",I[I.UNPACK=1]="UNPACK",I[I.PMA=2]="PMA",I[I.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",I[I.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",I[I.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",I),u=((U=u||{})[U.NO=0]="NO",U[U.YES=1]="YES",U[U.AUTO=2]="AUTO",U[U.BLEND=0]="BLEND",U[U.CLEAR=1]="CLEAR",U[U.BLIT=2]="BLIT",U),$=((L=$||{})[L.AUTO=0]="AUTO",L[L.MANUAL=1]="MANUAL",L),Y=((G=Y||{}).LOW="lowp",G.MEDIUM="mediump",G.HIGH="highp",G),Q=((a=Q||{})[a.NONE=0]="NONE",a[a.SCISSOR=1]="SCISSOR",a[a.STENCIL=2]="STENCIL",a[a.SPRITE=3]="SPRITE",a[a.COLOR=4]="COLOR",a),C=((v=C||{})[v.NONE=0]="NONE",v[v.LOW=2]="LOW",v[v.MEDIUM=4]="MEDIUM",v[v.HIGH=8]="HIGH",v),q=((E=q||{})[E.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",E[E.ARRAY_BUFFER=34962]="ARRAY_BUFFER",E[E.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",E)},23431:(o,W,F)=>{F.d(W,{L:()=>E});class E{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let o=0;o<this.count;o++)this.elements[o]=null;this.count=0}}},294485:(o,W,F)=>{F.d(W,{P:()=>E});class E{constructor(o){this.renderer=o}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(o){}}},391966:(o,W,F)=>{F.d(W,{E:()=>v,M:()=>E});const E="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",v="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},665816:(o,W,F)=>{F.d(W,{u:()=>E});class E{constructor(o){"number"==typeof o?this.rawBinaryData=new ArrayBuffer(o):o instanceof Uint8Array?this.rawBinaryData=o.buffer:this.rawBinaryData=o,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(o){return this[`${o}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(o){switch(o){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${o} isn't a valid view type`)}}}},316197:(o,W,F)=>{F.d(W,{Gk:()=>E.Gk,B9:()=>E.B9,t5:()=>y,hq:()=>z,JH:()=>V,cc:()=>M.L,hp:()=>N,dZ:()=>k,fr:()=>E.fr,jl:()=>w.jl,Q1:()=>G.Q,Td:()=>w.Td,_4:()=>E._4,Pp:()=>w.Pp,Ag:()=>L.A,hR:()=>E.hR,dJ:()=>Fo,V2:()=>j,vg:()=>E.vg,E8:()=>E.E8,uq:()=>w.uq,Pt:()=>H.P,oA:()=>w.oA,TO:()=>w.TO,bR:()=>w.bR,tS:()=>w.tS,BP:()=>s,X1:()=>Po,bO:()=>w.bO,M_:()=>w.M_,Y7:()=>Ao,TE:()=>w.TE,M6:()=>E.M6,HY:()=>w.HY,$f:()=>KW,Mt:()=>J,Uw:()=>h,QE:()=>E.QE,gP:()=>fo,NW:()=>Vo,Rv:()=>kW.Rv,dL:()=>w.dL,dQ:()=>kW.dQ,k2:()=>R,A5:()=>dW,u3:()=>U.u,uR:()=>E.uR,q5:()=>PW,Eo:()=>yW.E,MT:()=>yW.M,XO:()=>L.X,W0:()=>v.W0,Wp:()=>a});var E=F(424608),v=F(968381),a=F(578351),G=F(817798),L=F(738637),U=F(665816);const I=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function l(o){let W="";for(let F=0;F<o;++F)F>0&&(W+="\nelse "),F<o-1&&(W+=`if(test == ${F}.0){}`);return W}class h{constructor(){this.data=0,this.blendMode=E.B9.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(o){!!(1&this.data)!==o&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(o){!!(2&this.data)!==o&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(o){!!(4&this.data)!==o&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(o){!!(8&this.data)!==o&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(o){!!(32&this.data)!==o&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(o){!!(16&this.data)!==o&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(o){this.blend=o!==E.B9.NONE,this._blendMode=o}get polygonOffset(){return this._polygonOffset}set polygonOffset(o){this.offsets=!!o,this._polygonOffset=o}static for2d(){const o=new h;return o.depthTest=!1,o.blend=!0,o}}h.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const p=[];function g(o,W){if(!o)return null;let F="";if("string"==typeof o){const W=/\.(\w{3,4})(?:$|\?|#)/i.exec(o);W&&(F=W[1].toLowerCase())}for(let E=p.length-1;E>=0;--E){const v=p[E];if(v.test&&v.test(o,F))return new v(o,W)}throw new Error("Unrecognized source type to auto-detect Resource")}class f{constructor(o){this.items=[],this._name=o,this._aliasCount=0}emit(o,W,F,E,v,a,G,L){if(arguments.length>8)throw new Error("max arguments reached");const{name:U,items:I}=this;this._aliasCount++;for(let l=0,h=I.length;l<h;l++)I[l][U](o,W,F,E,v,a,G,L);return I===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(o){return o[this._name]&&(this.ensureNonAliasedItems(),this.remove(o),this.items.push(o)),this}remove(o){const W=this.items.indexOf(o);return-1!==W&&(this.ensureNonAliasedItems(),this.items.splice(W,1)),this}contains(o){return this.items.includes(o)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(f.prototype,{dispatch:{value:f.prototype.emit},run:{value:f.prototype.emit}});class A{constructor(o=0,W=0){this._width=o,this._height=W,this.destroyed=!1,this.internal=!1,this.onResize=new f("setRealSize"),this.onUpdate=new f("update"),this.onError=new f("onError")}bind(o){this.onResize.add(o),this.onUpdate.add(o),this.onError.add(o),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(o){this.onResize.remove(o),this.onUpdate.remove(o),this.onError.remove(o)}resize(o,W){(o!==this._width||W!==this._height)&&(this._width=o,this._height=W,this.onResize.emit(o,W))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(o,W,F){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(o,W){return!1}}class k extends A{constructor(o,W){var F;const{width:E,height:v}=W||{};if(!E||!v)throw new Error("BufferResource width or height invalid");super(E,v),this.data=o,this.unpackAlignment=null!==(F=W.unpackAlignment)&&void 0!==F?F:4}upload(o,W,F){const v=o.gl;v.pixelStorei(v.UNPACK_ALIGNMENT,this.unpackAlignment),v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.alphaMode===E.Gk.UNPACK);const a=W.realWidth,G=W.realHeight;return F.width===a&&F.height===G?v.texSubImage2D(W.target,0,0,0,a,G,W.format,F.type,this.data):(F.width=a,F.height=G,v.texImage2D(W.target,0,F.internalFormat,a,G,0,W.format,F.type,this.data)),!0}dispose(){this.data=null}static test(o){return null===o||o instanceof Int8Array||o instanceof Uint8Array||o instanceof Uint8ClampedArray||o instanceof Int16Array||o instanceof Uint16Array||o instanceof Int32Array||o instanceof Uint32Array||o instanceof Float32Array}}const Z={scaleMode:E.M6.NEAREST,alphaMode:E.Gk.NPM},P=class o extends a.EventEmitter{constructor(W=null,F=null){super(),F=Object.assign({},o.defaultOptions,F);const{alphaMode:E,mipmap:G,anisotropicLevel:L,scaleMode:U,width:I,height:l,wrapMode:h,format:p,type:f,target:k,resolution:Z,resourceOptions:P}=F;W&&!(W instanceof A)&&((W=g(W,P)).internal=!0),this.resolution=Z||v.W0.RESOLUTION,this.width=Math.round((I||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=G,this.anisotropicLevel=L,this._wrapMode=h,this._scaleMode=U,this.format=p,this.type=f,this.target=k,this.alphaMode=E,this.uid=a.uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=I>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(W)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(o){this._mipmap!==o&&(this._mipmap=o,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(o){this._scaleMode!==o&&(this._scaleMode=o,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(o){this._wrapMode!==o&&(this._wrapMode=o,this.dirtyStyleId++)}setStyle(o,W){let F;return void 0!==o&&o!==this.scaleMode&&(this.scaleMode=o,F=!0),void 0!==W&&W!==this.mipmap&&(this.mipmap=W,F=!0),F&&this.dirtyStyleId++,this}setSize(o,W,F){return F=F||this.resolution,this.setRealSize(o*F,W*F,F)}setRealSize(o,W,F){return this.resolution=F||this.resolution,this.width=Math.round(o)/this.resolution,this.height=Math.round(W)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=a.isPow2(this.realWidth)&&a.isPow2(this.realHeight)}setResolution(o){const W=this.resolution;return W===o||(this.resolution=o,this.valid&&(this.width=Math.round(this.width*W)/o,this.height=Math.round(this.height*W)/o,this.emit("update",this)),this._refreshPOT()),this}setResource(o){if(this.resource===o)return this;if(this.resource)throw new Error("Resource can be set only once");return o.bind(this),this.resource=o,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(o){this.emit("error",this,o)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete a.BaseTextureCache[this.cacheId],delete a.TextureCache[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),o.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(W,F,E=v.W0.STRICT_TEXTURE_CACHE){const G="string"==typeof W;let L=null;if(G)L=W;else{if(!W._pixiId){const o=(null==F?void 0:F.pixiIdPrefix)||"pixiid";W._pixiId=`${o}_${a.uid()}`}L=W._pixiId}let U=a.BaseTextureCache[L];if(G&&E&&!U)throw new Error(`The cacheId "${L}" does not exist in BaseTextureCache.`);return U||(U=new o(W,F),U.cacheId=L,o.addToCache(U,L)),U}static fromBuffer(W,F,v,a){W=W||new Float32Array(F*v*4);const G=new k(W,{width:F,height:v,...null==a?void 0:a.resourceOptions});let L,U;return W instanceof Float32Array?(L=E.hR.RGBA,U=E.QE.FLOAT):W instanceof Int32Array?(L=E.hR.RGBA_INTEGER,U=E.QE.INT):W instanceof Uint32Array?(L=E.hR.RGBA_INTEGER,U=E.QE.UNSIGNED_INT):W instanceof Int16Array?(L=E.hR.RGBA_INTEGER,U=E.QE.SHORT):W instanceof Uint16Array?(L=E.hR.RGBA_INTEGER,U=E.QE.UNSIGNED_SHORT):W instanceof Int8Array?(L=E.hR.RGBA,U=E.QE.BYTE):(L=E.hR.RGBA,U=E.QE.UNSIGNED_BYTE),G.internal=!0,new o(G,Object.assign({},Z,{type:U,format:L},a))}static addToCache(o,W){W&&(o.textureCacheIds.includes(W)||o.textureCacheIds.push(W),a.BaseTextureCache[W]&&a.BaseTextureCache[W]!==o&&console.warn(`BaseTexture added to the cache with an id [${W}] that already had an entry`),a.BaseTextureCache[W]=o)}static removeFromCache(o){if("string"==typeof o){const W=a.BaseTextureCache[o];if(W){const F=W.textureCacheIds.indexOf(o);return F>-1&&W.textureCacheIds.splice(F,1),delete a.BaseTextureCache[o],W}}else if(null==o?void 0:o.textureCacheIds){for(let W=0;W<o.textureCacheIds.length;++W)delete a.BaseTextureCache[o.textureCacheIds[W]];return o.textureCacheIds.length=0,o}return null}};P.defaultOptions={mipmap:E.E8.POW2,anisotropicLevel:0,scaleMode:E.M6.LINEAR,wrapMode:E.uR.CLAMP,alphaMode:E.Gk.UNPACK,target:E.dW.TEXTURE_2D,format:E.hR.RGBA,type:E.QE.UNSIGNED_BYTE},P._globalBatch=0;let y=P;class z{constructor(){this.texArray=null,this.blend=0,this.type=E._4.TRIANGLES,this.start=0,this.size=0,this.data=null}}let x=0;class N{constructor(o,W=!0,F=!1){this.data=o||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=F,this.static=W,this.id=x++,this.disposeRunner=new f("disposeBuffer")}update(o){o instanceof Array&&(o=new Float32Array(o)),this.data=o||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(o){this.type=o?E.yw.ELEMENT_ARRAY_BUFFER:E.yw.ARRAY_BUFFER}get index(){return this.type===E.yw.ELEMENT_ARRAY_BUFFER}static from(o){return o instanceof Array&&(o=new Float32Array(o)),new N(o)}}class e{constructor(o,W=0,F=!1,v=E.QE.FLOAT,a,G,L,U=1){this.buffer=o,this.size=W,this.normalized=F,this.type=v,this.stride=a,this.start=G,this.instance=L,this.divisor=U}destroy(){this.buffer=null}static from(o,W,F,E,v){return new e(o,W,F,E,v)}}const t={Float32Array,Uint32Array,Int32Array,Uint8Array},m={5126:4,5123:2,5121:1};let r=0;const B={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class j{constructor(o=[],W={}){this.buffers=o,this.indexBuffer=null,this.attributes=W,this.glVertexArrayObjects={},this.id=r++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new f("disposeGeometry"),this.refCount=0}addAttribute(o,W,F=0,E=!1,v,a,G,L=!1){if(!W)throw new Error("You must pass a buffer when creating an attribute");W instanceof N||(W instanceof Array&&(W=new Float32Array(W)),W=new N(W));const U=o.split("|");if(U.length>1){for(let o=0;o<U.length;o++)this.addAttribute(U[o],W,F,E,v);return this}let I=this.buffers.indexOf(W);return-1===I&&(this.buffers.push(W),I=this.buffers.length-1),this.attributes[o]=new e(I,F,E,v,a,G,L),this.instanced=this.instanced||L,this}getAttribute(o){return this.attributes[o]}getBuffer(o){return this.buffers[this.getAttribute(o).buffer]}addIndex(o){return o instanceof N||(o instanceof Array&&(o=new Uint16Array(o)),o=new N(o)),o.type=E.yw.ELEMENT_ARRAY_BUFFER,this.indexBuffer=o,this.buffers.includes(o)||this.buffers.push(o),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const o=[],W=[],F=new N;let E;for(E in this.attributes){const F=this.attributes[E],v=this.buffers[F.buffer];o.push(v.data),W.push(F.size*m[F.type]/4),F.buffer=0}for(F.data=function(o,W){let F=0,E=0;const v={};for(let v=0;v<o.length;v++)E+=W[v],F+=o[v].length;const G=new ArrayBuffer(4*F);let L=null,U=0;for(let F=0;F<o.length;F++){const I=W[F],l=o[F],h=a.getBufferType(l);v[h]||(v[h]=new t[h](G)),L=v[h];for(let o=0;o<l.length;o++)L[(o/I|0)*E+U+o%I]=l[o];U+=I}return new Float32Array(G)}(o,W),E=0;E<this.buffers.length;E++)this.buffers[E]!==this.indexBuffer&&this.buffers[E].destroy();return this.buffers=[F],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const o in this.attributes){const W=this.attributes[o];return this.buffers[W.buffer].data.length/(W.stride/4||W.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const o=new j;for(let W=0;W<this.buffers.length;W++)o.buffers[W]=new N(this.buffers[W].data.slice(0));for(const W in this.attributes){const F=this.attributes[W];o.attributes[W]=new e(F.buffer,F.size,F.normalized,F.type,F.stride,F.start,F.instance)}return this.indexBuffer&&(o.indexBuffer=o.buffers[this.buffers.indexOf(this.indexBuffer)],o.indexBuffer.type=E.yw.ELEMENT_ARRAY_BUFFER),o}static merge(o){const W=new j,F=[],v=[],G=[];let L;for(let W=0;W<o.length;W++){L=o[W];for(let o=0;o<L.buffers.length;o++)v[o]=v[o]||0,v[o]+=L.buffers[o].data.length,G[o]=0}for(let o=0;o<L.buffers.length;o++)F[o]=new(B[a.getBufferType(L.buffers[o].data)])(v[o]),W.buffers[o]=new N(F[o]);for(let W=0;W<o.length;W++){L=o[W];for(let o=0;o<L.buffers.length;o++)F[o].set(L.buffers[o].data,G[o]),G[o]+=L.buffers[o].data.length}if(W.attributes=L.attributes,L.indexBuffer){W.indexBuffer=W.buffers[L.buffers.indexOf(L.indexBuffer)],W.indexBuffer.type=E.yw.ELEMENT_ARRAY_BUFFER;let F=0,v=0,a=0,G=0;for(let o=0;o<L.buffers.length;o++)if(L.buffers[o]!==L.indexBuffer){G=o;break}for(const o in L.attributes){const W=L.attributes[o];(0|W.buffer)===G&&(v+=W.size*m[W.type]/4)}for(let E=0;E<o.length;E++){const L=o[E].indexBuffer.data;for(let o=0;o<L.length;o++)W.indexBuffer.data[o+a]+=F;F+=o[E].buffers[G].data.length/v,a+=L.length}}return W}}class V extends j{constructor(o=!1){super(),this._buffer=new N(null,o,!1),this._indexBuffer=new N(null,o,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,E.QE.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,E.QE.FLOAT).addAttribute("aColor",this._buffer,4,!0,E.QE.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,E.QE.FLOAT).addIndex(this._indexBuffer)}}var w=F(514842);const K=[{test:o=>"float"===o.type&&1===o.size&&!o.isArray,code:o=>`\n            if(uv["${o}"] !== ud["${o}"].value)\n            {\n                ud["${o}"].value = uv["${o}"]\n                gl.uniform1f(ud["${o}"].location, uv["${o}"])\n            }\n            `},{test:(o,W)=>!("sampler2D"!==o.type&&"samplerCube"!==o.type&&"sampler2DArray"!==o.type||1!==o.size||o.isArray||null!=W&&void 0===W.castToBaseTexture),code:o=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${o}"], t);\n\n            if(ud["${o}"].value !== t)\n            {\n                ud["${o}"].value = t;\n                gl.uniform1i(ud["${o}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(o,W)=>"mat3"===o.type&&1===o.size&&!o.isArray&&void 0!==W.a,code:o=>`\n            gl.uniformMatrix3fv(ud["${o}"].location, false, uv["${o}"].toArray(true));\n            `,codeUbo:o=>`\n                var ${o}_matrix = uv.${o}.toArray(true);\n\n                data[offset] = ${o}_matrix[0];\n                data[offset+1] = ${o}_matrix[1];\n                data[offset+2] = ${o}_matrix[2];\n        \n                data[offset + 4] = ${o}_matrix[3];\n                data[offset + 5] = ${o}_matrix[4];\n                data[offset + 6] = ${o}_matrix[5];\n        \n                data[offset + 8] = ${o}_matrix[6];\n                data[offset + 9] = ${o}_matrix[7];\n                data[offset + 10] = ${o}_matrix[8];\n            `},{test:(o,W)=>"vec2"===o.type&&1===o.size&&!o.isArray&&void 0!==W.x,code:o=>`\n                cv = ud["${o}"].value;\n                v = uv["${o}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${o}"].location, v.x, v.y);\n                }`,codeUbo:o=>`\n                v = uv.${o};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:o=>"vec2"===o.type&&1===o.size&&!o.isArray,code:o=>`\n                cv = ud["${o}"].value;\n                v = uv["${o}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${o}"].location, v[0], v[1]);\n                }\n            `},{test:(o,W)=>"vec4"===o.type&&1===o.size&&!o.isArray&&void 0!==W.width,code:o=>`\n                cv = ud["${o}"].value;\n                v = uv["${o}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${o}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:o=>`\n                    v = uv.${o};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:(o,W)=>"vec4"===o.type&&1===o.size&&!o.isArray&&void 0!==W.red,code:o=>`\n                cv = ud["${o}"].value;\n                v = uv["${o}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n                    cv[3] = v.alpha;\n                    gl.uniform4f(ud["${o}"].location, v.red, v.green, v.blue, v.alpha)\n                }`,codeUbo:o=>`\n                    v = uv.${o};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                    data[offset+3] = v.alpha;\n                `},{test:(o,W)=>"vec3"===o.type&&1===o.size&&!o.isArray&&void 0!==W.red,code:o=>`\n                cv = ud["${o}"].value;\n                v = uv["${o}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n    \n                    gl.uniform3f(ud["${o}"].location, v.red, v.green, v.blue)\n                }`,codeUbo:o=>`\n                    v = uv.${o};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                `},{test:o=>"vec4"===o.type&&1===o.size&&!o.isArray,code:o=>`\n                cv = ud["${o}"].value;\n                v = uv["${o}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${o}"].location, v[0], v[1], v[2], v[3])\n                }`}],T={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},d={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},n={};let u,$=n;const Y={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Q(o){return Y[o]}let C=null;const q={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function c(o,W){if(!C){const W=Object.keys(q);C={};for(let F=0;F<W.length;++F){const E=W[F];C[o[E]]=q[E]}}return C[W]}function _(o,W,F){if("precision"!==o.substring(0,9)){let v=W;return W===E.Pk.HIGH&&F!==E.Pk.HIGH&&(v=E.Pk.MEDIUM),`precision ${v} float;\n${o}`}return F!==E.Pk.HIGH&&"precision highp"===o.substring(0,15)?o.replace("precision highp","precision mediump"):o}let O=0;const X={},S=class o{constructor(W,F,a="pixi-shader",G={}){this.extra={},this.id=O++,this.vertexSrc=W||o.defaultVertexSrc,this.fragmentSrc=F||o.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=G,"#version"!==this.vertexSrc.substring(0,8)&&(a=a.replace(/\s+/g,"-"),X[a]?(X[a]++,a+=`-${X[a]}`):X[a]=1,this.vertexSrc=`#define SHADER_NAME ${a}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${a}\n${this.fragmentSrc}`,this.vertexSrc=_(this.vertexSrc,o.defaultVertexPrecision,E.Pk.HIGH),this.fragmentSrc=_(this.fragmentSrc,o.defaultFragmentPrecision,function(){if(!u){u=E.Pk.MEDIUM;const o=function(){if($===n||(null==$?void 0:$.isContextLost())){const o=v.W0.ADAPTER.createCanvas();let W;v.W0.PREFER_ENV>=E.Km.WEBGL2&&(W=o.getContext("webgl2",{})),W||(W=o.getContext("webgl",{})||o.getContext("experimental-webgl",{}),W?W.getExtension("WEBGL_draw_buffers"):W=null),$=W}return $}();if(o&&o.getShaderPrecisionFormat){const W=o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_FLOAT);W&&(u=W.precision?E.Pk.HIGH:E.Pk.MEDIUM)}}return u}())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(W,F,E){const v=W+F;let G=a.ProgramCache[v];return G||(a.ProgramCache[v]=G=new o(W,F,E)),G}};S.defaultVertexPrecision=E.Pk.HIGH,S.defaultFragmentPrecision=a.isMobile.apple.device?E.Pk.HIGH:E.Pk.MEDIUM;let s=S,i=0;class R{constructor(o,W,F){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=i++,this.static=!!W,this.ubo=!!F,o instanceof N?(this.buffer=o,this.buffer.type=E.yw.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=o,this.ubo&&(this.buffer=new N(new Float32Array(1)),this.buffer.type=E.yw.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(o,W,F){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[o]=new R(W,F)}static from(o,W,F){return new R(o,W,F)}static uboFrom(o,W){return new R(o,null==W||W,!0)}}class J{constructor(o,W){this.uniformBindCount=0,this.program=o,this.uniformGroup=W?W instanceof R?W:new R(W):new R({}),this.disposeRunner=new f("disposeShader")}checkUniformExists(o,W){if(W.uniforms[o])return!0;for(const F in W.uniforms){const E=W.uniforms[F];if(!0===E.group&&this.checkUniformExists(o,E))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(o,W,F){const E=s.from(o,W);return new J(E,F)}}class D{constructor(o,W){if(this.vertexSrc=o,this.fragTemplate=W,this.programCache={},this.defaultGroupCache={},!W.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!W.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(o){if(!this.programCache[o]){const W=new Int32Array(o);for(let F=0;F<o;F++)W[F]=F;this.defaultGroupCache[o]=R.from({uSamplers:W},!0);let F=this.fragTemplate;F=F.replace(/%count%/gi,`${o}`),F=F.replace(/%forloop%/gi,this.generateSampleSrc(o)),this.programCache[o]=new s(this.vertexSrc,F)}const W={tint:new Float32Array([1,1,1,1]),translationMatrix:new w.uq,default:this.defaultGroupCache[o]};return new J(this.programCache[o],W)}generateSampleSrc(o){let W="";W+="\n",W+="\n";for(let F=0;F<o;F++)F>0&&(W+="\nelse "),F<o-1&&(W+=`if(vTextureId < ${F}.5)`),W+="\n{",W+=`\n\tcolor = texture2D(uSamplers[${F}], vTextureCoord);`,W+="\n}";return W+="\n",W+="\n",W}}var M=F(23431),H=F(294485);const b=class o extends H.P{constructor(W){super(W),this.setShaderGenerator(),this.geometryClass=V,this.vertexSize=6,this.state=h.for2d(),this.size=4*o.defaultBatchSize,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),W.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){var o;return this._defaultMaxTextures=null!==(o=this._defaultMaxTextures)&&void 0!==o?o:function(){let o=!0;const W=v.W0.ADAPTER.getNavigator();if(v.Fr.tablet||v.Fr.phone){if(v.Fr.apple.device){const F=W.userAgent.match(/OS (\d+)_(\d+)?/);F&&parseInt(F[1],10)<11&&(o=!1)}if(v.Fr.android.device){const F=W.userAgent.match(/Android\s([0-9.]*)/);F&&parseInt(F[1],10)<7&&(o=!1)}}return o?32:4}(),this._defaultMaxTextures}static set defaultMaxTextures(o){this._defaultMaxTextures=o}static get canUploadSameBuffer(){var o;return this._canUploadSameBuffer=null!==(o=this._canUploadSameBuffer)&&void 0!==o?o:!v.Fr.apple.device,this._canUploadSameBuffer}static set canUploadSameBuffer(o){this._canUploadSameBuffer=o}get MAX_TEXTURES(){return a.deprecation("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator({vertex:W=o.defaultVertexSrc,fragment:F=o.defaultFragmentTemplate}={}){this.shaderGenerator=new D(W,F)}contextChange(){const W=this.renderer.gl;v.W0.PREFER_ENV===E.Km.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(W.getParameter(W.MAX_TEXTURE_IMAGE_UNITS),o.defaultMaxTextures),this.maxTextures=function(o,W){if(0===o)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const F=W.createShader(W.FRAGMENT_SHADER);for(;;){const E=I.replace(/%forloop%/gi,l(o));if(W.shaderSource(F,E),W.compileShader(F),W.getShaderParameter(F,W.COMPILE_STATUS))break;o=o/2|0}return o}(this.maxTextures,W)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let o=0;o<this._packedGeometryPoolSize;o++)this._packedGeometries[o]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:W,_textureArrayPool:F}=o,E=this.size/4,v=Math.floor(E/this.maxTextures)+1;for(;W.length<E;)W.push(new z);for(;F.length<v;)F.push(new M.L);for(let o=0;o<this.maxTextures;o++)this._tempBoundTextures[o]=null}onPrerender(){this._flushId=0}render(o){o._texture.valid&&(this._vertexCount+o.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=o.vertexData.length/2,this._indexCount+=o.indices.length,this._bufferedTextures[this._bufferSize]=o._texture.baseTexture,this._bufferedElements[this._bufferSize++]=o)}buildTexturesAndDrawCalls(){const{_bufferedTextures:W,maxTextures:F}=this,E=o._textureArrayPool,v=this.renderer.batch,a=this._tempBoundTextures,G=this.renderer.textureGC.count;let L=++y._globalBatch,U=0,I=E[0],l=0;v.copyBoundTextures(a,F);for(let o=0;o<this._bufferSize;++o){const h=W[o];W[o]=null,h._batchEnabled!==L&&(I.count>=F&&(v.boundArray(I,a,L,F),this.buildDrawCalls(I,l,o),l=o,I=E[++U],++L),h._batchEnabled=L,h.touched=G,I.elements[I.count++]=h)}I.count>0&&(v.boundArray(I,a,L,F),this.buildDrawCalls(I,l,this._bufferSize),++U,++L);for(let o=0;o<a.length;o++)a[o]=null;y._globalBatch=L}buildDrawCalls(W,F,E){const{_bufferedElements:v,_attributeBuffer:G,_indexBuffer:L,vertexSize:U}=this,I=o._drawCallPool;let l=this._dcIndex,h=this._aIndex,p=this._iIndex,g=I[l];g.start=this._iIndex,g.texArray=W;for(let o=F;o<E;++o){const E=v[o],f=E._texture.baseTexture,A=a.premultiplyBlendMode[f.alphaMode?1:0][E.blendMode];v[o]=null,F<o&&g.blend!==A&&(g.size=p-g.start,F=o,g=I[++l],g.texArray=W,g.start=p),this.packInterleavedGeometry(E,G,L,h,p),h+=E.vertexData.length/2*U,p+=E.indices.length,g.blend=A}F<E&&(g.size=p-g.start,++l),this._dcIndex=l,this._aIndex=h,this._iIndex=p}bindAndClearTexArray(o){const W=this.renderer.texture;for(let F=0;F<o.count;F++)W.bind(o.elements[F],o.ids[F]),o.elements[F]=null;o.count=0}updateGeometry(){const{_packedGeometries:W,_attributeBuffer:F,_indexBuffer:E}=this;o.canUploadSameBuffer?(W[this._flushId]._buffer.update(F.rawBinaryData),W[this._flushId]._indexBuffer.update(E),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,W[this._flushId]=new this.geometryClass),W[this._flushId]._buffer.update(F.rawBinaryData),W[this._flushId]._indexBuffer.update(E),this.renderer.geometry.bind(W[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const W=this._dcIndex,{gl:F,state:E}=this.renderer,v=o._drawCallPool;let a=null;for(let o=0;o<W;o++){const{texArray:W,type:G,size:L,start:U,blend:I}=v[o];a!==W&&(a=W,this.bindAndClearTexArray(W)),this.state.blendMode=I,E.set(this.state),F.drawElements(G,L,F.UNSIGNED_SHORT,2*U)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),o.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let o=0;o<this._packedGeometryPoolSize;o++)this._packedGeometries[o]&&this._packedGeometries[o].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(o){const W=a.nextPow2(Math.ceil(o/8)),F=a.log2(W),E=8*W;this._aBuffers.length<=F&&(this._iBuffers.length=F+1);let v=this._aBuffers[E];return v||(this._aBuffers[E]=v=new U.u(E*this.vertexSize*4)),v}getIndexBuffer(o){const W=a.nextPow2(Math.ceil(o/12)),F=a.log2(W),E=12*W;this._iBuffers.length<=F&&(this._iBuffers.length=F+1);let v=this._iBuffers[F];return v||(this._iBuffers[F]=v=new Uint16Array(E)),v}packInterleavedGeometry(o,W,F,E,v){const{uint32View:a,float32View:L}=W,U=E/this.vertexSize,I=o.uvs,l=o.indices,h=o.vertexData,p=o._texture.baseTexture._batchLocation,g=Math.min(o.worldAlpha,1),f=G.Q.shared.setValue(o._tintRGB).toPremultiplied(g,o._texture.baseTexture.alphaMode>0);for(let o=0;o<h.length;o+=2)L[E++]=h[o],L[E++]=h[o+1],L[E++]=I[o],L[E++]=I[o+1],a[E++]=f,L[E++]=p;for(let o=0;o<l.length;o++)F[v++]=U+l[o]}};b.defaultBatchSize=4096,b.extension={name:"batch",type:L.A.RendererPlugin},b._drawCallPool=[],b._textureArrayPool=[];let oo=b;L.X.add(oo);const Wo=class o extends J{constructor(W,F,E){super(s.from(W||o.defaultVertexSrc,F||o.defaultFragmentSrc),E),this.padding=0,this.resolution=o.defaultResolution,this.multisample=o.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new h}apply(o,W,F,E,v){o.applyFilter(this,W,F,E)}get blendMode(){return this.state.blendMode}set blendMode(o){this.state.blendMode=o}get resolution(){return this._resolution}set resolution(o){this._resolution=o}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}};Wo.defaultResolution=1,Wo.defaultMultisample=E.he.NONE;let Fo=Wo;class Eo{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new G.Q(0),this.alpha=1}init(o){this.clearBeforeRender=o.clearBeforeRender;const{backgroundColor:W,background:F,backgroundAlpha:E}=o,v=null!=F?F:W;void 0!==v&&(this.color=v),this.alpha=E}get color(){return this._backgroundColor.value}set color(o){this._backgroundColor.setValue(o)}get alpha(){return this._backgroundColor.alpha}set alpha(o){this._backgroundColor.setAlpha(o)}get backgroundColor(){return this._backgroundColor}destroy(){}}Eo.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Eo.extension={type:[L.A.RendererSystem,L.A.CanvasRendererSystem],name:"background"},L.X.add(Eo);class vo{constructor(o){this.renderer=o,this.emptyRenderer=new H.P(o),this.currentRenderer=this.emptyRenderer}setObjectRenderer(o){this.currentRenderer!==o&&(this.currentRenderer.stop(),this.currentRenderer=o,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(o,W){const{boundTextures:F}=this.renderer.texture;for(let E=W-1;E>=0;--E)o[E]=F[E]||null,o[E]&&(o[E]._batchLocation=E)}boundArray(o,W,F,E){const{elements:v,ids:a,count:G}=o;let L=0;for(let o=0;o<G;o++){const G=v[o],U=G._batchLocation;if(U>=0&&U<E&&W[U]===G)a[o]=U;else for(;L<E;){const E=W[L];if(!E||E._batchEnabled!==F||E._batchLocation!==L){a[o]=L,G._batchLocation=L,W[L]=G;break}L++}}}destroy(){this.renderer=null}}vo.extension={type:L.A.RendererSystem,name:"batch"},L.X.add(vo);let ao=0;class Go{constructor(o){this.renderer=o,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(o){this.gl=o,this.renderer.gl=o,this.renderer.CONTEXT_UID=ao++}init(o){if(o.context)this.initFromContext(o.context);else{const W=this.renderer.background.alpha<1,F=o.premultipliedAlpha;this.preserveDrawingBuffer=o.preserveDrawingBuffer,this.useContextAlpha=o.useContextAlpha,this.powerPreference=o.powerPreference,this.initFromOptions({alpha:W,premultipliedAlpha:F,antialias:o.antialias,stencil:!0,preserveDrawingBuffer:o.preserveDrawingBuffer,powerPreference:o.powerPreference})}}initFromContext(o){this.gl=o,this.validateContext(o),this.renderer.gl=o,this.renderer.CONTEXT_UID=ao++,this.renderer.runners.contextChange.emit(o);const W=this.renderer.view;void 0!==W.addEventListener&&(W.addEventListener("webglcontextlost",this.handleContextLost,!1),W.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(o){const W=this.createContext(this.renderer.view,o);this.initFromContext(W)}createContext(o,W){let F;if(v.W0.PREFER_ENV>=E.Km.WEBGL2&&(F=o.getContext("webgl2",W)),F)this.webGLVersion=2;else if(this.webGLVersion=1,F=o.getContext("webgl",W)||o.getContext("experimental-webgl",W),!F)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=F,this.getExtensions(),this.gl}getExtensions(){const{gl:o}=this,W={loseContext:o.getExtension("WEBGL_lose_context"),anisotropicFiltering:o.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:o.getExtension("OES_texture_float_linear"),s3tc:o.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:o.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:o.getExtension("WEBGL_compressed_texture_etc"),etc1:o.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:o.getExtension("WEBGL_compressed_texture_pvrtc")||o.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:o.getExtension("WEBGL_compressed_texture_atc"),astc:o.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,W,{drawBuffers:o.getExtension("WEBGL_draw_buffers"),depthTexture:o.getExtension("WEBGL_depth_texture"),vertexArrayObject:o.getExtension("OES_vertex_array_object")||o.getExtension("MOZ_OES_vertex_array_object")||o.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:o.getExtension("OES_element_index_uint"),floatTexture:o.getExtension("OES_texture_float"),floatTextureLinear:o.getExtension("OES_texture_float_linear"),textureHalfFloat:o.getExtension("OES_texture_half_float"),textureHalfFloatLinear:o.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,W,{colorBufferFloat:o.getExtension("EXT_color_buffer_float")})}handleContextLost(o){o.preventDefault(),setTimeout((()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()}),0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const o=this.renderer.view;this.renderer=null,void 0!==o.removeEventListener&&(o.removeEventListener("webglcontextlost",this.handleContextLost),o.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(o){const W=o.getContextAttributes(),F="WebGL2RenderingContext"in globalThis&&o instanceof globalThis.WebGL2RenderingContext;F&&(this.webGLVersion=2),W&&!W.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const E=F||!!o.getExtension("OES_element_index_uint");this.supports.uint32Indices=E,E||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Go.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Go.extension={type:L.A.RendererSystem,name:"context"},L.X.add(Go);class Lo{constructor(o,W){if(this.width=Math.round(o),this.height=Math.round(W),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new f("disposeFramebuffer"),this.multisample=E.he.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(o=0,W){return this.colorTextures[o]=W||new y(null,{scaleMode:E.M6.NEAREST,resolution:1,mipmap:E.E8.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(o){return this.depthTexture=o||new y(null,{scaleMode:E.M6.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:E.E8.OFF,format:E.hR.DEPTH_COMPONENT,type:E.QE.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(o,W){if(o=Math.round(o),W=Math.round(W),!o||!W)throw new Error("Framebuffer width and height must not be zero");if(o!==this.width||W!==this.height){this.width=o,this.height=W,this.dirtyId++,this.dirtySize++;for(let F=0;F<this.colorTextures.length;F++){const E=this.colorTextures[F],v=E.resolution;E.setSize(o/v,W/v)}if(this.depthTexture){const F=this.depthTexture.resolution;this.depthTexture.setSize(o/F,W/F)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Uo extends y{constructor(o={}){var W,F,v;"number"==typeof o&&(o={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),o.width=null!==(W=o.width)&&void 0!==W?W:100,o.height=null!==(F=o.height)&&void 0!==F?F:100,null!==(v=o.multisample)&&void 0!==v||(o.multisample=E.he.NONE),super(null,o),this.mipmap=E.E8.OFF,this.valid=!0,this._clear=new G.Q([0,0,0,0]),this.framebuffer=new Lo(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=o.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(o){this._clear.setValue(o)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(o){this.framebuffer.multisample=o}resize(o,W){this.framebuffer.resize(o*this.resolution,W*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Io extends A{constructor(o){const W=o;super(W.naturalWidth||W.videoWidth||W.width,W.naturalHeight||W.videoHeight||W.height),this.source=o,this.noSubImage=!1}static crossOrigin(o,W,F){void 0!==F||W.startsWith("data:")?!1!==F&&(o.crossOrigin="string"==typeof F?F:"anonymous"):o.crossOrigin=a.determineCrossOrigin(W)}upload(o,W,F,v){const a=o.gl,G=W.realWidth,L=W.realHeight;if(v=v||this.source,typeof HTMLImageElement<"u"&&v instanceof HTMLImageElement){if(!v.complete||0===v.naturalWidth)return!1}else if(typeof HTMLVideoElement<"u"&&v instanceof HTMLVideoElement&&v.readyState<=1)return!1;return a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.alphaMode===E.Gk.UNPACK),this.noSubImage||W.target!==a.TEXTURE_2D||F.width!==G||F.height!==L?(F.width=G,F.height=L,a.texImage2D(W.target,0,F.internalFormat,W.format,F.type,v)):a.texSubImage2D(a.TEXTURE_2D,0,0,0,W.format,F.type,v),!0}update(){if(this.destroyed)return;const o=this.source,W=o.naturalWidth||o.videoWidth||o.width,F=o.naturalHeight||o.videoHeight||o.height;this.resize(W,F),super.update()}dispose(){this.source=null}}class lo extends Io{constructor(o,W){var F;if(W=W||{},"string"==typeof o){const F=new Image;Io.crossOrigin(F,o,W.crossorigin),F.src=o,o=F}super(o),!o.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=o.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(null!==(F=W.createBitmap)&&void 0!==F?F:v.W0.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof W.alphaMode?W.alphaMode:null,this.bitmap=null,this._load=null,!1!==W.autoLoad&&this.load()}load(o){return this._load||(void 0!==o&&(this.createBitmap=o),this._load=new Promise(((o,W)=>{const F=this.source;this.url=F.src;const E=()=>{this.destroyed||(F.onload=null,F.onerror=null,this.update(),this._load=null,this.createBitmap?o(this.process()):o(this))};F.complete&&F.src?E():(F.onload=E,F.onerror=o=>{W(o),this.onError.emit(o)})}))),this._load}process(){const o=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const W=globalThis.createImageBitmap,F=!o.crossOrigin||"anonymous"===o.crossOrigin;return this._process=fetch(o.src,{mode:F?"cors":"no-cors"}).then((o=>o.blob())).then((F=>W(F,0,0,o.width,o.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===E.Gk.UNPACK?"premultiply":"none"}))).then((o=>this.destroyed?Promise.reject():(this.bitmap=o,this.update(),this._process=null,Promise.resolve(this)))),this._process}upload(o,W,F){if("number"==typeof this.alphaMode&&(W.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(o,W,F);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(o,W,F,this.bitmap),!this.preserveBitmap){let o=!0;const E=W._glTextures;for(const v in E){const a=E[v];if(a!==F&&a.dirtyId!==W.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(o){return typeof HTMLImageElement<"u"&&("string"==typeof o||o instanceof HTMLImageElement)}}class ho{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(o,W,F){const E=W.width,v=W.height;if(F){const W=o.width/2/E,a=o.height/2/v,G=o.x/E+W,L=o.y/v+a;F=w.ER.add(F,w.ER.NW),this.x0=G+W*w.ER.uX(F),this.y0=L+a*w.ER.uY(F),F=w.ER.add(F,2),this.x1=G+W*w.ER.uX(F),this.y1=L+a*w.ER.uY(F),F=w.ER.add(F,2),this.x2=G+W*w.ER.uX(F),this.y2=L+a*w.ER.uY(F),F=w.ER.add(F,2),this.x3=G+W*w.ER.uX(F),this.y3=L+a*w.ER.uY(F)}else this.x0=o.x/E,this.y0=o.y/v,this.x1=(o.x+o.width)/E,this.y1=o.y/v,this.x2=(o.x+o.width)/E,this.y2=(o.y+o.height)/v,this.x3=o.x/E,this.y3=(o.y+o.height)/v;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}ho.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const po=new ho;function go(o){o.destroy=function(){},o.on=function(){},o.once=function(){},o.emit=function(){}}class fo extends a.EventEmitter{constructor(o,W,F,E,v,a,G){if(super(),this.noFrame=!1,W||(this.noFrame=!0,W=new w.M_(0,0,1,1)),o instanceof fo&&(o=o.baseTexture),this.baseTexture=o,this._frame=W,this.trim=E,this.valid=!1,this.destroyed=!1,this._uvs=po,this.uvMatrix=null,this.orig=F||W,this._rotate=Number(v||0),!0===v)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=a?new w.bR(a.x,a.y):new w.bR(0,0),this.defaultBorders=G,this._updateID=0,this.textureCacheIds=[],o.valid?this.noFrame?o.valid&&this.onBaseTextureUpdated(o):this.frame=W:o.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&o.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(o){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=o.width,this._frame.height=o.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(o){if(this.baseTexture){if(o){const{resource:o}=this.baseTexture;(null==o?void 0:o.url)&&a.TextureCache[o.url]&&fo.removeFromCache(o.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,fo.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var o;const W=this._frame.clone(),F=this._frame===this.orig?W:this.orig.clone(),E=new fo(this.baseTexture,!this.noFrame&&W,F,null===(o=this.trim)||void 0===o?void 0:o.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(E._frame=W),E}updateUvs(){this._uvs===po&&(this._uvs=new ho),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(o,W={},F=v.W0.STRICT_TEXTURE_CACHE){const E="string"==typeof o;let G=null;if(E)G=o;else if(o instanceof y){if(!o.cacheId){const F=(null==W?void 0:W.pixiIdPrefix)||"pixiid";o.cacheId=`${F}-${a.uid()}`,y.addToCache(o,o.cacheId)}G=o.cacheId}else{if(!o._pixiId){const F=(null==W?void 0:W.pixiIdPrefix)||"pixiid";o._pixiId=`${F}_${a.uid()}`}G=o._pixiId}let L=a.TextureCache[G];if(E&&F&&!L)throw new Error(`The cacheId "${G}" does not exist in TextureCache.`);return L||o instanceof y?!L&&o instanceof y&&(L=new fo(o),fo.addToCache(L,G)):(W.resolution||(W.resolution=a.getResolutionOfUrl(o)),L=new fo(new y(o,W)),L.baseTexture.cacheId=G,y.addToCache(L.baseTexture,G),fo.addToCache(L,G)),L}static fromURL(o,W){const F=Object.assign({autoLoad:!1},null==W?void 0:W.resourceOptions),E=fo.from(o,Object.assign({resourceOptions:F},W),!1),v=E.baseTexture.resource;return E.baseTexture.valid?Promise.resolve(E):v.load().then((()=>Promise.resolve(E)))}static fromBuffer(o,W,F,E){return new fo(y.fromBuffer(o,W,F,E))}static fromLoader(o,W,F,E){const v=new y(o,Object.assign({scaleMode:y.defaultOptions.scaleMode,resolution:a.getResolutionOfUrl(W)},E)),{resource:G}=v;G instanceof lo&&(G.url=W);const L=new fo(v);return F||(F=W),y.addToCache(L.baseTexture,F),fo.addToCache(L,F),F!==W&&(y.addToCache(L.baseTexture,W),fo.addToCache(L,W)),L.baseTexture.valid?Promise.resolve(L):new Promise((o=>{L.baseTexture.once("loaded",(()=>o(L)))}))}static addToCache(o,W){W&&(o.textureCacheIds.includes(W)||o.textureCacheIds.push(W),a.TextureCache[W]&&a.TextureCache[W]!==o&&console.warn(`Texture added to the cache with an id [${W}] that already had an entry`),a.TextureCache[W]=o)}static removeFromCache(o){if("string"==typeof o){const W=a.TextureCache[o];if(W){const F=W.textureCacheIds.indexOf(o);return F>-1&&W.textureCacheIds.splice(F,1),delete a.TextureCache[o],W}}else if(null==o?void 0:o.textureCacheIds){for(let W=0;W<o.textureCacheIds.length;++W)a.TextureCache[o.textureCacheIds[W]]===o&&delete a.TextureCache[o.textureCacheIds[W]];return o.textureCacheIds.length=0,o}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(o){this._frame=o,this.noFrame=!1;const{x:W,y:F,width:E,height:v}=o,a=W+E>this.baseTexture.width,G=F+v>this.baseTexture.height;if(a||G){const o=a&&G?"and":"or",L=`X: ${W} + ${E} = ${W+E} > ${this.baseTexture.width}`,U=`Y: ${F} + ${v} = ${F+v} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${L} ${o} ${U}`)}this.valid=E&&v&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=o),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(o){this._rotate=o,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return fo._EMPTY||(fo._EMPTY=new fo(new y),go(fo._EMPTY),go(fo._EMPTY.baseTexture)),fo._EMPTY}static get WHITE(){if(!fo._WHITE){const o=v.W0.ADAPTER.createCanvas(16,16),W=o.getContext("2d");o.width=16,o.height=16,W.fillStyle="white",W.fillRect(0,0,16,16),fo._WHITE=new fo(y.from(o)),go(fo._WHITE),go(fo._WHITE.baseTexture)}return fo._WHITE}}class Ao extends fo{constructor(o,W){super(o,W),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(o){this.framebuffer.multisample=o}resize(o,W,F=!0){const E=this.baseTexture.resolution,v=Math.round(o*E)/E,a=Math.round(W*E)/E;this.valid=v>0&&a>0,this._frame.width=this.orig.width=v,this._frame.height=this.orig.height=a,F&&this.baseTexture.resize(v,a),this.updateUvs()}setResolution(o){const{baseTexture:W}=this;W.resolution!==o&&(W.setResolution(o),this.resize(W.width,W.height,!1))}static create(o){return new Ao(new Uo(o))}}class ko{constructor(o){this.texturePool={},this.textureOptions=o||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(o,W,F=E.he.NONE){const v=new Uo(Object.assign({width:o,height:W,resolution:1,multisample:F},this.textureOptions));return new Ao(v)}getOptimalTexture(o,W,F=1,v=E.he.NONE){let G;o=Math.max(Math.ceil(o*F-1e-6),1),W=Math.max(Math.ceil(W*F-1e-6),1),this.enableFullScreen&&o===this._pixelsWidth&&W===this._pixelsHeight?G=v>1?-v:-1:(G=((65535&(o=a.nextPow2(o)))<<16|65535&(W=a.nextPow2(W)))>>>0,v>1&&(G+=4294967296*v)),this.texturePool[G]||(this.texturePool[G]=[]);let L=this.texturePool[G].pop();return L||(L=this.createTexture(o,W,v)),L.filterPoolKey=G,L.setResolution(F),L}getFilterTexture(o,W,F){const v=this.getOptimalTexture(o.width,o.height,W||o.resolution,F||E.he.NONE);return v.filterFrame=o.filterFrame,v}returnTexture(o){const W=o.filterPoolKey;o.filterFrame=null,this.texturePool[W].push(o)}returnFilterTexture(o){this.returnTexture(o)}clear(o){if(o=!1!==o)for(const o in this.texturePool){const W=this.texturePool[o];if(W)for(let o=0;o<W.length;o++)W[o].destroy(!0)}this.texturePool={}}setScreenSize(o){if(o.width!==this._pixelsWidth||o.height!==this._pixelsHeight){this.enableFullScreen=o.width>0&&o.height>0;for(const o in this.texturePool){if(!(Number(o)<0))continue;const W=this.texturePool[o];if(W)for(let o=0;o<W.length;o++)W[o].destroy(!0);this.texturePool[o]=[]}this._pixelsWidth=o.width,this._pixelsHeight=o.height}}}ko.SCREEN_KEY=-1;class Zo extends j{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Po extends j{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new N(this.vertices),this.uvBuffer=new N(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(o,W){let F=0,E=0;return this.uvs[0]=F,this.uvs[1]=E,this.uvs[2]=F+W.width/o.width,this.uvs[3]=E,this.uvs[4]=F+W.width/o.width,this.uvs[5]=E+W.height/o.height,this.uvs[6]=F,this.uvs[7]=E+W.height/o.height,F=W.x,E=W.y,this.vertices[0]=F,this.vertices[1]=E,this.vertices[2]=F+W.width,this.vertices[3]=E,this.vertices[4]=F+W.width,this.vertices[5]=E+W.height,this.vertices[6]=F,this.vertices[7]=E+W.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class yo{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=E.he.NONE,this.sourceFrame=new w.M_,this.destinationFrame=new w.M_,this.bindingSourceFrame=new w.M_,this.bindingDestinationFrame=new w.M_,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const zo=[new w.bR,new w.bR,new w.bR,new w.bR],xo=new w.uq;class No{constructor(o){this.renderer=o,this.defaultFilterStack=[{}],this.texturePool=new ko,this.statePool=[],this.quad=new Zo,this.quadUv=new Po,this.tempRect=new w.M_,this.activeState={},this.globalUniforms=new R({outputFrame:new w.M_,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(o,W){var F,E,v,a;const G=this.renderer,L=this.defaultFilterStack,U=this.statePool.pop()||new yo,I=G.renderTexture;let l,h;if(I.current){const o=I.current;l=o.resolution,h=o.multisample}else l=G.resolution,h=G.multisample;let p=W[0].resolution||l,g=null!==(F=W[0].multisample)&&void 0!==F?F:h,f=W[0].padding,A=W[0].autoFit,k=null===(E=W[0].legacy)||void 0===E||E;for(let o=1;o<W.length;o++){const F=W[o];p=Math.min(p,F.resolution||l),g=Math.min(g,null!==(v=F.multisample)&&void 0!==v?v:h),f=this.useMaxPadding?Math.max(f,F.padding):f+F.padding,A=A&&F.autoFit,k=k||null===(a=F.legacy)||void 0===a||a}1===L.length&&(this.defaultFilterStack[0].renderTexture=I.current),L.push(U),U.resolution=p,U.multisample=g,U.legacy=k,U.target=o,U.sourceFrame.copyFrom(o.filterArea||o.getBounds(!0)),U.sourceFrame.pad(f);const Z=this.tempRect.copyFrom(I.sourceFrame);G.projection.transform&&this.transformAABB(xo.copyFrom(G.projection.transform).invert(),Z),A?(U.sourceFrame.fit(Z),(U.sourceFrame.width<=0||U.sourceFrame.height<=0)&&(U.sourceFrame.width=0,U.sourceFrame.height=0)):U.sourceFrame.intersects(Z)||(U.sourceFrame.width=0,U.sourceFrame.height=0),this.roundFrame(U.sourceFrame,I.current?I.current.resolution:G.resolution,I.sourceFrame,I.destinationFrame,G.projection.transform),U.renderTexture=this.getOptimalFilterTexture(U.sourceFrame.width,U.sourceFrame.height,p,g),U.filters=W,U.destinationFrame.width=U.renderTexture.width,U.destinationFrame.height=U.renderTexture.height;const P=this.tempRect;P.x=0,P.y=0,P.width=U.sourceFrame.width,P.height=U.sourceFrame.height,U.renderTexture.filterFrame=U.sourceFrame,U.bindingSourceFrame.copyFrom(I.sourceFrame),U.bindingDestinationFrame.copyFrom(I.destinationFrame),U.transform=G.projection.transform,G.projection.transform=null,I.bind(U.renderTexture,U.sourceFrame,P),G.framebuffer.clear(0,0,0,0)}pop(){const o=this.defaultFilterStack,W=o.pop(),F=W.filters;this.activeState=W;const v=this.globalUniforms.uniforms;v.outputFrame=W.sourceFrame,v.resolution=W.resolution;const a=v.inputSize,G=v.inputPixel,L=v.inputClamp;if(a[0]=W.destinationFrame.width,a[1]=W.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],G[0]=Math.round(a[0]*W.resolution),G[1]=Math.round(a[1]*W.resolution),G[2]=1/G[0],G[3]=1/G[1],L[0]=.5*G[2],L[1]=.5*G[3],L[2]=W.sourceFrame.width*a[2]-.5*G[2],L[3]=W.sourceFrame.height*a[3]-.5*G[3],W.legacy){const o=v.filterArea;o[0]=W.destinationFrame.width,o[1]=W.destinationFrame.height,o[2]=W.sourceFrame.x,o[3]=W.sourceFrame.y,v.filterClamp=v.inputClamp}this.globalUniforms.update();const U=o[o.length-1];if(this.renderer.framebuffer.blit(),1===F.length)F[0].apply(this,W.renderTexture,U.renderTexture,E.fr.BLEND,W),this.returnFilterTexture(W.renderTexture);else{let o=W.renderTexture,v=this.getOptimalFilterTexture(o.width,o.height,W.resolution);v.filterFrame=o.filterFrame;let a=0;for(a=0;a<F.length-1;++a){1===a&&W.multisample>1&&(v=this.getOptimalFilterTexture(o.width,o.height,W.resolution),v.filterFrame=o.filterFrame),F[a].apply(this,o,v,E.fr.CLEAR,W);const G=o;o=v,v=G}F[a].apply(this,o,U.renderTexture,E.fr.BLEND,W),a>1&&W.multisample>1&&this.returnFilterTexture(W.renderTexture),this.returnFilterTexture(o),this.returnFilterTexture(v)}W.clear(),this.statePool.push(W)}bindAndClear(o,W=E.fr.CLEAR){const{renderTexture:F,state:v}=this.renderer;if(o===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,null==o?void 0:o.filterFrame){const W=this.tempRect;W.x=0,W.y=0,W.width=o.filterFrame.width,W.height=o.filterFrame.height,F.bind(o,o.filterFrame,W)}else o!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?F.bind(o):this.renderer.renderTexture.bind(o,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const a=1&v.stateId||this.forceClear;(W===E.fr.CLEAR||W===E.fr.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(o,W,F,v){const a=this.renderer;a.state.set(o.state),this.bindAndClear(F,v),o.uniforms.uSampler=W,o.uniforms.filterGlobals=this.globalUniforms,a.shader.bind(o),o.legacy=!!o.program.attributeData.aTextureCoord,o.legacy?(this.quadUv.map(W._frame,W.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(E._4.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(E._4.TRIANGLE_STRIP))}calculateSpriteMatrix(o,W){const{sourceFrame:F,destinationFrame:E}=this.activeState,{orig:v}=W._texture,a=o.set(E.width,0,0,E.height,F.x,F.y),G=W.worldTransform.copyTo(w.uq.TEMP_MATRIX);return G.invert(),a.prepend(G),a.scale(1/v.width,1/v.height),a.translate(W.anchor.x,W.anchor.y),a}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(o,W,F=1,v=E.he.NONE){return this.texturePool.getOptimalTexture(o,W,F,v)}getFilterTexture(o,W,F){if("number"==typeof o){const F=o;o=W,W=F}o=o||this.activeState.renderTexture;const v=this.texturePool.getOptimalTexture(o.width,o.height,W||o.resolution,F||E.he.NONE);return v.filterFrame=o.filterFrame,v}returnFilterTexture(o){this.texturePool.returnTexture(o)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(o,W){const F=zo[0],E=zo[1],v=zo[2],a=zo[3];F.set(W.left,W.top),E.set(W.left,W.bottom),v.set(W.right,W.top),a.set(W.right,W.bottom),o.apply(F,F),o.apply(E,E),o.apply(v,v),o.apply(a,a);const G=Math.min(F.x,E.x,v.x,a.x),L=Math.min(F.y,E.y,v.y,a.y),U=Math.max(F.x,E.x,v.x,a.x),I=Math.max(F.y,E.y,v.y,a.y);W.x=G,W.y=L,W.width=U-G,W.height=I-L}roundFrame(o,W,F,E,v){if(!(o.width<=0||o.height<=0||F.width<=0||F.height<=0)){if(v){const{a:o,b:W,c:F,d:E}=v;if((Math.abs(W)>1e-4||Math.abs(F)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(E)>1e-4))return}(v=v?xo.copyFrom(v):xo.identity()).translate(-F.x,-F.y).scale(E.width/F.width,E.height/F.height).translate(E.x,E.y),this.transformAABB(v,o),o.ceil(W),this.transformAABB(v.invert(),o)}}}No.extension={type:L.A.RendererSystem,name:"filter"},L.X.add(No);class eo{constructor(o){this.framebuffer=o,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=E.he.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const to=new w.M_;class mo{constructor(o){this.renderer=o,this.managedFramebuffers=[],this.unknownFramebuffer=new Lo(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const o=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new w.M_,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let W=this.renderer.context.extensions.drawBuffers,F=this.renderer.context.extensions.depthTexture;v.W0.PREFER_ENV===E.Km.WEBGL_LEGACY&&(W=null,F=null),W?o.drawBuffers=o=>W.drawBuffersWEBGL(o):(this.hasMRT=!1,o.drawBuffers=()=>{}),F||(this.writeDepthTexture=!1)}else this.msaaSamples=o.getInternalformatParameter(o.RENDERBUFFER,o.RGBA8,o.SAMPLES)}bind(o,W,F=0){const{gl:E}=this;if(o){const v=o.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(o);this.current!==o&&(this.current=o,E.bindFramebuffer(E.FRAMEBUFFER,v.framebuffer)),v.mipLevel!==F&&(o.dirtyId++,o.dirtyFormat++,v.mipLevel=F),v.dirtyId!==o.dirtyId&&(v.dirtyId=o.dirtyId,v.dirtyFormat!==o.dirtyFormat?(v.dirtyFormat=o.dirtyFormat,v.dirtySize=o.dirtySize,this.updateFramebuffer(o,F)):v.dirtySize!==o.dirtySize&&(v.dirtySize=o.dirtySize,this.resizeFramebuffer(o)));for(let W=0;W<o.colorTextures.length;W++){const F=o.colorTextures[W];this.renderer.texture.unbind(F.parentTextureArray||F)}if(o.depthTexture&&this.renderer.texture.unbind(o.depthTexture),W){const o=W.width>>F,E=W.height>>F,v=o/W.width;this.setViewport(W.x*v,W.y*v,o,E)}else{const W=o.width>>F,E=o.height>>F;this.setViewport(0,0,W,E)}}else this.current&&(this.current=null,E.bindFramebuffer(E.FRAMEBUFFER,null)),W?this.setViewport(W.x,W.y,W.width,W.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(o,W,F,E){const v=this.viewport;o=Math.round(o),W=Math.round(W),F=Math.round(F),E=Math.round(E),(v.width!==F||v.height!==E||v.x!==o||v.y!==W)&&(v.x=o,v.y=W,v.width=F,v.height=E,this.gl.viewport(o,W,F,E))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(o,W,F,v,a=E.wn.COLOR|E.wn.DEPTH){const{gl:G}=this;G.clearColor(o,W,F,v),G.clear(a)}initFramebuffer(o){const{gl:W}=this,F=new eo(W.createFramebuffer());return F.multisample=this.detectSamples(o.multisample),o.glFramebuffers[this.CONTEXT_UID]=F,this.managedFramebuffers.push(o),o.disposeRunner.add(this),F}resizeFramebuffer(o){const{gl:W}=this,F=o.glFramebuffers[this.CONTEXT_UID];if(F.stencil){let E;W.bindRenderbuffer(W.RENDERBUFFER,F.stencil),E=1===this.renderer.context.webGLVersion?W.DEPTH_STENCIL:o.depth&&o.stencil?W.DEPTH24_STENCIL8:o.depth?W.DEPTH_COMPONENT24:W.STENCIL_INDEX8,F.msaaBuffer?W.renderbufferStorageMultisample(W.RENDERBUFFER,F.multisample,E,o.width,o.height):W.renderbufferStorage(W.RENDERBUFFER,E,o.width,o.height)}const E=o.colorTextures;let v=E.length;W.drawBuffers||(v=Math.min(v,1));for(let a=0;a<v;a++){const v=E[a],G=v.parentTextureArray||v;this.renderer.texture.bind(G,0),0===a&&F.msaaBuffer&&(W.bindRenderbuffer(W.RENDERBUFFER,F.msaaBuffer),W.renderbufferStorageMultisample(W.RENDERBUFFER,F.multisample,G._glTextures[this.CONTEXT_UID].internalFormat,o.width,o.height))}o.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(o.depthTexture,0)}updateFramebuffer(o,W){const{gl:F}=this,E=o.glFramebuffers[this.CONTEXT_UID],v=o.colorTextures;let a=v.length;F.drawBuffers||(a=Math.min(a,1)),E.multisample>1&&this.canMultisampleFramebuffer(o)?E.msaaBuffer=E.msaaBuffer||F.createRenderbuffer():E.msaaBuffer&&(F.deleteRenderbuffer(E.msaaBuffer),E.msaaBuffer=null,E.blitFramebuffer&&(E.blitFramebuffer.dispose(),E.blitFramebuffer=null));const G=[];for(let L=0;L<a;L++){const a=v[L],U=a.parentTextureArray||a;this.renderer.texture.bind(U,0),0===L&&E.msaaBuffer?(F.bindRenderbuffer(F.RENDERBUFFER,E.msaaBuffer),F.renderbufferStorageMultisample(F.RENDERBUFFER,E.multisample,U._glTextures[this.CONTEXT_UID].internalFormat,o.width,o.height),F.framebufferRenderbuffer(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.RENDERBUFFER,E.msaaBuffer)):(F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0+L,a.target,U._glTextures[this.CONTEXT_UID].texture,W),G.push(F.COLOR_ATTACHMENT0+L))}if(G.length>1&&F.drawBuffers(G),o.depthTexture&&this.writeDepthTexture){const E=o.depthTexture;this.renderer.texture.bind(E,0),F.framebufferTexture2D(F.FRAMEBUFFER,F.DEPTH_ATTACHMENT,F.TEXTURE_2D,E._glTextures[this.CONTEXT_UID].texture,W)}if(!o.stencil&&!o.depth||o.depthTexture&&this.writeDepthTexture)E.stencil&&(F.deleteRenderbuffer(E.stencil),E.stencil=null);else{let W,v;E.stencil=E.stencil||F.createRenderbuffer(),1===this.renderer.context.webGLVersion?(W=F.DEPTH_STENCIL_ATTACHMENT,v=F.DEPTH_STENCIL):o.depth&&o.stencil?(W=F.DEPTH_STENCIL_ATTACHMENT,v=F.DEPTH24_STENCIL8):o.depth?(W=F.DEPTH_ATTACHMENT,v=F.DEPTH_COMPONENT24):(W=F.STENCIL_ATTACHMENT,v=F.STENCIL_INDEX8),F.bindRenderbuffer(F.RENDERBUFFER,E.stencil),E.msaaBuffer?F.renderbufferStorageMultisample(F.RENDERBUFFER,E.multisample,v,o.width,o.height):F.renderbufferStorage(F.RENDERBUFFER,v,o.width,o.height),F.framebufferRenderbuffer(F.FRAMEBUFFER,W,F.RENDERBUFFER,E.stencil)}}canMultisampleFramebuffer(o){return 1!==this.renderer.context.webGLVersion&&o.colorTextures.length<=1&&!o.depthTexture}detectSamples(o){const{msaaSamples:W}=this;let F=E.he.NONE;if(o<=1||null===W)return F;for(let E=0;E<W.length;E++)if(W[E]<=o){F=W[E];break}return 1===F&&(F=E.he.NONE),F}blit(o,W,F){const{current:E,renderer:v,gl:a,CONTEXT_UID:G}=this;if(2!==v.context.webGLVersion||!E)return;const L=E.glFramebuffers[G];if(!L)return;if(!o){if(!L.msaaBuffer)return;const W=E.colorTextures[0];if(!W)return;L.blitFramebuffer||(L.blitFramebuffer=new Lo(E.width,E.height),L.blitFramebuffer.addColorTexture(0,W)),(o=L.blitFramebuffer).colorTextures[0]!==W&&(o.colorTextures[0]=W,o.dirtyId++,o.dirtyFormat++),(o.width!==E.width||o.height!==E.height)&&(o.width=E.width,o.height=E.height,o.dirtyId++,o.dirtySize++)}W||((W=to).width=E.width,W.height=E.height),F||(F=W);const U=W.width===F.width&&W.height===F.height;this.bind(o),a.bindFramebuffer(a.READ_FRAMEBUFFER,L.framebuffer),a.blitFramebuffer(W.left,W.top,W.right,W.bottom,F.left,F.top,F.right,F.bottom,a.COLOR_BUFFER_BIT,U?a.NEAREST:a.LINEAR),a.bindFramebuffer(a.READ_FRAMEBUFFER,o.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(o,W){const F=o.glFramebuffers[this.CONTEXT_UID],E=this.gl;if(!F)return;delete o.glFramebuffers[this.CONTEXT_UID];const v=this.managedFramebuffers.indexOf(o);v>=0&&this.managedFramebuffers.splice(v,1),o.disposeRunner.remove(this),W||(E.deleteFramebuffer(F.framebuffer),F.msaaBuffer&&E.deleteRenderbuffer(F.msaaBuffer),F.stencil&&E.deleteRenderbuffer(F.stencil)),F.blitFramebuffer&&this.disposeFramebuffer(F.blitFramebuffer,W)}disposeAll(o){const W=this.managedFramebuffers;this.managedFramebuffers=[];for(let F=0;F<W.length;F++)this.disposeFramebuffer(W[F],o)}forceStencil(){const o=this.current;if(!o)return;const W=o.glFramebuffers[this.CONTEXT_UID];if(!W||W.stencil&&o.stencil)return;o.stencil=!0;const F=o.width,E=o.height,v=this.gl,a=W.stencil=v.createRenderbuffer();let G,L;v.bindRenderbuffer(v.RENDERBUFFER,a),1===this.renderer.context.webGLVersion?(G=v.DEPTH_STENCIL_ATTACHMENT,L=v.DEPTH_STENCIL):o.depth?(G=v.DEPTH_STENCIL_ATTACHMENT,L=v.DEPTH24_STENCIL8):(G=v.STENCIL_ATTACHMENT,L=v.STENCIL_INDEX8),W.msaaBuffer?v.renderbufferStorageMultisample(v.RENDERBUFFER,W.multisample,L,F,E):v.renderbufferStorage(v.RENDERBUFFER,L,F,E),v.framebufferRenderbuffer(v.FRAMEBUFFER,G,v.RENDERBUFFER,a)}reset(){this.current=this.unknownFramebuffer,this.viewport=new w.M_}destroy(){this.renderer=null}}mo.extension={type:L.A.RendererSystem,name:"framebuffer"},L.X.add(mo);const ro={5126:4,5123:2,5121:1};class Bo{constructor(o){this.renderer=o,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const o=this.gl=this.renderer.gl,W=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==W.webGLVersion){let W=this.renderer.context.extensions.vertexArrayObject;v.W0.PREFER_ENV===E.Km.WEBGL_LEGACY&&(W=null),W?(o.createVertexArray=()=>W.createVertexArrayOES(),o.bindVertexArray=o=>W.bindVertexArrayOES(o),o.deleteVertexArray=o=>W.deleteVertexArrayOES(o)):(this.hasVao=!1,o.createVertexArray=()=>null,o.bindVertexArray=()=>null,o.deleteVertexArray=()=>null)}if(2!==W.webGLVersion){const W=o.getExtension("ANGLE_instanced_arrays");W?(o.vertexAttribDivisor=(o,F)=>W.vertexAttribDivisorANGLE(o,F),o.drawElementsInstanced=(o,F,E,v,a)=>W.drawElementsInstancedANGLE(o,F,E,v,a),o.drawArraysInstanced=(o,F,E,v)=>W.drawArraysInstancedANGLE(o,F,E,v)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===W.webGLVersion||!!W.extensions.uint32ElementIndex}bind(o,W){W=W||this.renderer.shader.shader;const{gl:F}=this;let E=o.glVertexArrayObjects[this.CONTEXT_UID],v=!1;E||(this.managedGeometries[o.id]=o,o.disposeRunner.add(this),o.glVertexArrayObjects[this.CONTEXT_UID]=E={},v=!0);const a=E[W.program.id]||this.initGeometryVao(o,W,v);this._activeGeometry=o,this._activeVao!==a&&(this._activeVao=a,this.hasVao?F.bindVertexArray(a):this.activateVao(o,W.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const o=this._activeGeometry,W=this.renderer.buffer;for(let F=0;F<o.buffers.length;F++){const E=o.buffers[F];W.update(E)}}checkCompatibility(o,W){const F=o.attributes,E=W.attributeData;for(const o in E)if(!F[o])throw new Error(`shader and geometry incompatible, geometry missing the "${o}" attribute`)}getSignature(o,W){const F=o.attributes,E=W.attributeData,v=["g",o.id];for(const o in F)E[o]&&v.push(o,E[o].location);return v.join("-")}initGeometryVao(o,W,F=!0){const v=this.gl,a=this.CONTEXT_UID,G=this.renderer.buffer,L=W.program;L.glPrograms[a]||this.renderer.shader.generateProgram(W),this.checkCompatibility(o,L);const U=this.getSignature(o,L),I=o.glVertexArrayObjects[this.CONTEXT_UID];let l=I[U];if(l)return I[L.id]=l,l;const h=o.buffers,p=o.attributes,g={},f={};for(const o in h)g[o]=0,f[o]=0;for(const o in p)!p[o].size&&L.attributeData[o]?p[o].size=L.attributeData[o].size:p[o].size||console.warn(`PIXI Geometry attribute '${o}' size cannot be determined (likely the bound shader does not have the attribute)`),g[p[o].buffer]+=p[o].size*ro[p[o].type];for(const o in p){const W=p[o],F=W.size;void 0===W.stride&&(g[W.buffer]===F*ro[W.type]?W.stride=0:W.stride=g[W.buffer]),void 0===W.start&&(W.start=f[W.buffer],f[W.buffer]+=F*ro[W.type])}l=v.createVertexArray(),v.bindVertexArray(l);for(let o=0;o<h.length;o++){const W=h[o];G.bind(W),F&&W._glBuffers[a].refCount++}return this.activateVao(o,L),I[L.id]=l,I[U]=l,v.bindVertexArray(null),G.unbind(E.yw.ARRAY_BUFFER),l}disposeGeometry(o,W){var F;if(!this.managedGeometries[o.id])return;delete this.managedGeometries[o.id];const E=o.glVertexArrayObjects[this.CONTEXT_UID],v=this.gl,a=o.buffers,G=null===(F=this.renderer)||void 0===F?void 0:F.buffer;if(o.disposeRunner.remove(this),E){if(G)for(let o=0;o<a.length;o++){const F=a[o]._glBuffers[this.CONTEXT_UID];F&&(F.refCount--,0===F.refCount&&!W&&G.dispose(a[o],W))}if(!W)for(const o in E)if("g"===o[0]){const W=E[o];this._activeVao===W&&this.unbind(),v.deleteVertexArray(W)}delete o.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(o){const W=Object.keys(this.managedGeometries);for(let F=0;F<W.length;F++)this.disposeGeometry(this.managedGeometries[W[F]],o)}activateVao(o,W){const F=this.gl,E=this.CONTEXT_UID,v=this.renderer.buffer,a=o.buffers,G=o.attributes;o.indexBuffer&&v.bind(o.indexBuffer);let L=null;for(const o in G){const U=G[o],I=a[U.buffer],l=I._glBuffers[E];if(W.attributeData[o]){L!==l&&(v.bind(I),L=l);const E=W.attributeData[o].location;if(F.enableVertexAttribArray(E),F.vertexAttribPointer(E,U.size,U.type||F.FLOAT,U.normalized,U.stride,U.start),U.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");F.vertexAttribDivisor(E,U.divisor)}}}}draw(o,W,F,E){const{gl:v}=this,a=this._activeGeometry;if(a.indexBuffer){const G=a.indexBuffer.data.BYTES_PER_ELEMENT,L=2===G?v.UNSIGNED_SHORT:v.UNSIGNED_INT;2===G||4===G&&this.canUseUInt32ElementIndex?a.instanced?v.drawElementsInstanced(o,W||a.indexBuffer.data.length,L,(F||0)*G,E||1):v.drawElements(o,W||a.indexBuffer.data.length,L,(F||0)*G):console.warn("unsupported index buffer type: uint32")}else a.instanced?v.drawArraysInstanced(o,F,W||a.getSize(),E||1):v.drawArrays(o,F,W||a.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Bo.extension={type:L.A.RendererSystem,name:"geometry"},L.X.add(Bo);const jo=new w.uq;class Vo{constructor(o,W){this._texture=o,this.mapCoord=new w.uq,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof W>"u"?.5:W,this.isSimple=!1}get texture(){return this._texture}set texture(o){this._texture=o,this._textureID=-1}multiplyUvs(o,W){void 0===W&&(W=o);const F=this.mapCoord;for(let E=0;E<o.length;E+=2){const v=o[E],a=o[E+1];W[E]=v*F.a+a*F.c+F.tx,W[E+1]=v*F.b+a*F.d+F.ty}return W}update(o){const W=this._texture;if(!W||!W.valid||!o&&this._textureID===W._updateID)return!1;this._textureID=W._updateID,this._updateID++;const F=W._uvs;this.mapCoord.set(F.x1-F.x0,F.y1-F.y0,F.x3-F.x0,F.y3-F.y0,F.x0,F.y0);const E=W.orig,v=W.trim;v&&(jo.set(E.width/v.width,0,0,E.height/v.height,-v.x/v.width,-v.y/v.height),this.mapCoord.append(jo));const a=W.baseTexture,G=this.uClampFrame,L=this.clampMargin/a.resolution,U=this.clampOffset;return G[0]=(W._frame.x+L+U)/a.width,G[1]=(W._frame.y+L+U)/a.height,G[2]=(W._frame.x+W._frame.width-L+U)/a.width,G[3]=(W._frame.y+W._frame.height-L+U)/a.height,this.uClampOffset[0]=U/a.realWidth,this.uClampOffset[1]=U/a.realHeight,this.isSimple=W._frame.width===a.width&&W._frame.height===a.height&&0===W.rotate,!0}}class wo extends Fo{constructor(o,W,F){let E=null;"string"!=typeof o&&void 0===W&&void 0===F&&(E=o,o=void 0,W=void 0,F=void 0),super(o||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",W||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",F),this.maskSprite=E,this.maskMatrix=new w.uq}get maskSprite(){return this._maskSprite}set maskSprite(o){this._maskSprite=o,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(o,W,F,E){const v=this._maskSprite,a=v._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new Vo(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=o.calculateSpriteMatrix(this.maskMatrix,v).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=v.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,o.applyFilter(this,W,F,E))}}class Ko{constructor(o=null){this.type=E.vg.NONE,this.autoDetect=!0,this.maskObject=o||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Fo.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(o){o?this._filters?this._filters[0]=o:this._filters=[o]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=E.vg.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(o){o?(this._stencilCounter=o._stencilCounter,this._scissorCounter=o._scissorCounter,this._scissorRect=o._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class To{constructor(o){this.renderer=o,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(o){this.maskStack=o,this.renderer.scissor.setMaskStack(o),this.renderer.stencil.setMaskStack(o)}push(o,W){let F=W;if(!F.isMaskData){const o=this.maskDataPool.pop()||new Ko;o.pooled=!0,o.maskObject=W,F=o}const v=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(F.copyCountersOrReset(v),F._colorMask=v?v._colorMask:15,F.autoDetect&&this.detect(F),F._target=o,F.type!==E.vg.SPRITE&&this.maskStack.push(F),F.enabled)switch(F.type){case E.vg.SCISSOR:this.renderer.scissor.push(F);break;case E.vg.STENCIL:this.renderer.stencil.push(F);break;case E.vg.SPRITE:F.copyCountersOrReset(null),this.pushSpriteMask(F);break;case E.vg.COLOR:this.pushColorMask(F)}F.type===E.vg.SPRITE&&this.maskStack.push(F)}pop(o){const W=this.maskStack.pop();if(W&&W._target===o){if(W.enabled)switch(W.type){case E.vg.SCISSOR:this.renderer.scissor.pop(W);break;case E.vg.STENCIL:this.renderer.stencil.pop(W.maskObject);break;case E.vg.SPRITE:this.popSpriteMask(W);break;case E.vg.COLOR:this.popColorMask(W)}if(W.reset(),W.pooled&&this.maskDataPool.push(W),0!==this.maskStack.length){const o=this.maskStack[this.maskStack.length-1];o.type===E.vg.SPRITE&&o._filters&&(o._filters[0].maskSprite=o.maskObject)}}}detect(o){const W=o.maskObject;W?W.isSprite?o.type=E.vg.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(o)?o.type=E.vg.SCISSOR:o.type=E.vg.STENCIL:o.type=E.vg.COLOR}pushSpriteMask(o){const{maskObject:W}=o,F=o._target;let E=o._filters;E||(E=this.alphaMaskPool[this.alphaMaskIndex],E||(E=this.alphaMaskPool[this.alphaMaskIndex]=[new wo])),E[0].resolution=o.resolution,E[0].multisample=o.multisample,E[0].maskSprite=W;const v=F.filterArea;F.filterArea=W.getBounds(!0),this.renderer.filter.push(F,E),F.filterArea=v,o._filters||this.alphaMaskIndex++}popSpriteMask(o){this.renderer.filter.pop(),o._filters?o._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(o){const W=o._colorMask,F=o._colorMask=W&o.colorMask;F!==W&&this.renderer.gl.colorMask(!!(1&F),!!(2&F),!!(4&F),!!(8&F))}popColorMask(o){const W=o._colorMask,F=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;F!==W&&this.renderer.gl.colorMask(!!(1&F),!!(2&F),!!(4&F),!!(8&F))}destroy(){this.renderer=null}}To.extension={type:L.A.RendererSystem,name:"mask"},L.X.add(To);class no{constructor(o){this.renderer=o,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(o){const{gl:W}=this.renderer,F=this.getStackLength();this.maskStack=o;const E=this.getStackLength();E!==F&&(0===E?W.disable(this.glConst):(W.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const uo=new w.uq,$o=[],Yo=class o extends no{constructor(o){super(o),this.glConst=v.W0.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const o=this.maskStack[this.maskStack.length-1];return o?o._scissorCounter:0}calcScissorRect(o){var W;if(o._scissorRectLocal)return;const F=o._scissorRect,{maskObject:E}=o,{renderer:v}=this,a=v.renderTexture,G=E.getBounds(!0,null!==(W=$o.pop())&&void 0!==W?W:new w.M_);this.roundFrameToPixels(G,a.current?a.current.resolution:v.resolution,a.sourceFrame,a.destinationFrame,v.projection.transform),F&&G.fit(F),o._scissorRectLocal=G}static isMatrixRotated(o){if(!o)return!1;const{a:W,b:F,c:E,d:v}=o;return(Math.abs(F)>1e-4||Math.abs(E)>1e-4)&&(Math.abs(W)>1e-4||Math.abs(v)>1e-4)}testScissor(W){const{maskObject:F}=W;if(!F.isFastRect||!F.isFastRect()||o.isMatrixRotated(F.worldTransform)||o.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(W);const E=W._scissorRectLocal;return E.width>0&&E.height>0}roundFrameToPixels(W,F,E,v,a){o.isMatrixRotated(a)||((a=a?uo.copyFrom(a):uo.identity()).translate(-E.x,-E.y).scale(v.width/E.width,v.height/E.height).translate(v.x,v.y),this.renderer.filter.transformAABB(a,W),W.fit(v),W.x=Math.round(W.x*F),W.y=Math.round(W.y*F),W.width=Math.round(W.width*F),W.height=Math.round(W.height*F))}push(o){o._scissorRectLocal||this.calcScissorRect(o);const{gl:W}=this.renderer;o._scissorRect||W.enable(W.SCISSOR_TEST),o._scissorCounter++,o._scissorRect=o._scissorRectLocal,this._useCurrent()}pop(o){const{gl:W}=this.renderer;o&&$o.push(o._scissorRectLocal),this.getStackLength()>0?this._useCurrent():W.disable(W.SCISSOR_TEST)}_useCurrent(){const o=this.maskStack[this.maskStack.length-1]._scissorRect;let W;W=this.renderer.renderTexture.current?o.y:this.renderer.height-o.height-o.y,this.renderer.gl.scissor(o.x,W,o.width,o.height)}};Yo.extension={type:L.A.RendererSystem,name:"scissor"};let Qo=Yo;L.X.add(Qo);class Co extends no{constructor(o){super(o),this.glConst=v.W0.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const o=this.maskStack[this.maskStack.length-1];return o?o._stencilCounter:0}push(o){const W=o.maskObject,{gl:F}=this.renderer,E=o._stencilCounter;0===E&&(this.renderer.framebuffer.forceStencil(),F.clearStencil(0),F.clear(F.STENCIL_BUFFER_BIT),F.enable(F.STENCIL_TEST)),o._stencilCounter++;const v=o._colorMask;0!==v&&(o._colorMask=0,F.colorMask(!1,!1,!1,!1)),F.stencilFunc(F.EQUAL,E,4294967295),F.stencilOp(F.KEEP,F.KEEP,F.INCR),W.renderable=!0,W.render(this.renderer),this.renderer.batch.flush(),W.renderable=!1,0!==v&&(o._colorMask=v,F.colorMask(!!(1&v),!!(2&v),!!(4&v),!!(8&v))),this._useCurrent()}pop(o){const W=this.renderer.gl;if(0===this.getStackLength())W.disable(W.STENCIL_TEST);else{const F=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,E=F?F._colorMask:15;0!==E&&(F._colorMask=0,W.colorMask(!1,!1,!1,!1)),W.stencilOp(W.KEEP,W.KEEP,W.DECR),o.renderable=!0,o.render(this.renderer),this.renderer.batch.flush(),o.renderable=!1,0!==E&&(F._colorMask=E,W.colorMask(!!(1&E),!!(2&E),!!(4&E),!!(8&E))),this._useCurrent()}}_useCurrent(){const o=this.renderer.gl;o.stencilFunc(o.EQUAL,this.getStackLength(),4294967295),o.stencilOp(o.KEEP,o.KEEP,o.KEEP)}}Co.extension={type:L.A.RendererSystem,name:"stencil"},L.X.add(Co);class qo{constructor(o){this.renderer=o,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>(a.deprecation("7.0.0","renderer.plugins.extract has moved to renderer.extract"),o.extract)},prepare:{enumerable:!1,get:()=>(a.deprecation("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),o.prepare)},interaction:{enumerable:!1,get:()=>(a.deprecation("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),o.events)}})}init(){const o=this.rendererPlugins;for(const W in o)this.plugins[W]=new o[W](this.renderer)}destroy(){for(const o in this.plugins)this.plugins[o].destroy(),this.plugins[o]=null}}qo.extension={type:[L.A.RendererSystem,L.A.CanvasRendererSystem],name:"_plugin"},L.X.add(qo);class co{constructor(o){this.renderer=o,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new w.uq,this.transform=null}update(o,W,F,E){this.destinationFrame=o||this.destinationFrame||this.defaultFrame,this.sourceFrame=W||this.sourceFrame||o,this.calculateProjection(this.destinationFrame,this.sourceFrame,F,E),this.transform&&this.projectionMatrix.append(this.transform);const v=this.renderer;v.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,v.globalUniforms.update(),v.shader.shader&&v.shader.syncUniformGroup(v.shader.shader.uniforms.globals)}calculateProjection(o,W,F,E){const v=this.projectionMatrix,a=E?-1:1;v.identity(),v.a=1/W.width*2,v.d=a*(1/W.height*2),v.tx=-1-W.x*v.a,v.ty=-a-W.y*v.d}setTransform(o){}destroy(){this.renderer=null}}co.extension={type:L.A.RendererSystem,name:"projection"},L.X.add(co);const _o=new w.dL,Oo=new w.M_;class Xo{constructor(o){this.renderer=o,this._tempMatrix=new w.uq}generateTexture(o,W){var F;const{region:E,...v}=W||{},a=(null==E?void 0:E.copyTo(Oo))||o.getLocalBounds(Oo,!0),G=v.resolution||this.renderer.resolution;a.width=Math.max(a.width,1/G),a.height=Math.max(a.height,1/G),v.width=a.width,v.height=a.height,v.resolution=G,null!==(F=v.multisample)&&void 0!==F||(v.multisample=this.renderer.multisample);const L=Ao.create(v);this._tempMatrix.tx=-a.x,this._tempMatrix.ty=-a.y;const U=o.transform;return o.transform=_o,this.renderer.render(o,{renderTexture:L,transform:this._tempMatrix,skipUpdateTransform:!!o.parent,blit:!0}),o.transform=U,L}destroy(){}}Xo.extension={type:[L.A.RendererSystem,L.A.CanvasRendererSystem],name:"textureGenerator"},L.X.add(Xo);const So=new w.M_,so=new w.M_;class io{constructor(o){this.renderer=o,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new w.M_,this.destinationFrame=new w.M_,this.viewportFrame=new w.M_}contextChange(){var o;const W=null===(o=this.renderer)||void 0===o?void 0:o.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(W&&W.alpha&&W.premultipliedAlpha)}bind(o=null,W,F){const E=this.renderer;let v,a,G;this.current=o,o?(v=o.baseTexture,G=v.resolution,W||(So.width=o.frame.width,So.height=o.frame.height,W=So),F||(so.x=o.frame.x,so.y=o.frame.y,so.width=W.width,so.height=W.height,F=so),a=v.framebuffer):(G=E.resolution,W||(So.width=E._view.screen.width,So.height=E._view.screen.height,W=So),F||((F=So).width=W.width,F.height=W.height));const L=this.viewportFrame;L.x=F.x*G,L.y=F.y*G,L.width=F.width*G,L.height=F.height*G,o||(L.y=E.view.height-(L.y+L.height)),L.ceil(),this.renderer.framebuffer.bind(a,L),this.renderer.projection.update(F,W,G,!a),o?this.renderer.mask.setMaskStack(v.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(W),this.destinationFrame.copyFrom(F)}clear(o,W){const F=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,E=G.Q.shared.setValue(o||F);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&E.premultiply(E.alpha);const v=this.destinationFrame,a=this.current?this.current.baseTexture:this.renderer._view.screen,L=v.width!==a.width||v.height!==a.height;if(L){let{x:o,y:W,width:F,height:E}=this.viewportFrame;o=Math.round(o),W=Math.round(W),F=Math.round(F),E=Math.round(E),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,W,F,E)}this.renderer.framebuffer.clear(E.red,E.green,E.blue,E.alpha,W),L&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}io.extension={type:L.A.RendererSystem,name:"renderTexture"},L.X.add(io);class Ro{constructor(o,W){this.program=o,this.uniformData=W,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function Jo(o,W,F){const E=o.createShader(W);return o.shaderSource(E,F),o.compileShader(E),E}function Do(o){const W=new Array(o);for(let o=0;o<W.length;o++)W[o]=!1;return W}function Mo(o,W){switch(o){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*W);case"vec3":return new Float32Array(3*W);case"vec4":return new Float32Array(4*W);case"ivec2":return new Int32Array(2*W);case"ivec3":return new Int32Array(3*W);case"ivec4":return new Int32Array(4*W);case"uvec2":return new Uint32Array(2*W);case"uvec3":return new Uint32Array(3*W);case"uvec4":return new Uint32Array(4*W);case"bool":return!1;case"bvec2":return Do(2*W);case"bvec3":return Do(3*W);case"bvec4":return Do(4*W);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function Ho(o,W){const F=o.getShaderSource(W).split("\n").map(((o,W)=>`${W}: ${o}`)),E=o.getShaderInfoLog(W),v=E.split("\n"),a={},G=v.map((o=>parseFloat(o.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1")))).filter((o=>!(!o||a[o]||(a[o]=!0,0)))),L=[""];G.forEach((o=>{F[o-1]=`%c${F[o-1]}%c`,L.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));const U=F.join("\n");L[0]=U,console.error(E),console.groupCollapsed("click to view full shader code"),console.warn(...L),console.groupEnd()}function bo(o,W,F,E,v){F.buffer.update(v)}const oW={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},WW={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};let FW,EW=0;const vW={textureCount:0,uboCount:0};class aW{constructor(o){this.destroyed=!1,this.renderer=o,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=EW++}systemCheck(){if(!function(){if("boolean"==typeof FW)return FW;try{FW=!0===new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")}catch(o){FW=!1}return FW}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(o){this.gl=o,this.reset()}bind(o,W){o.disposeRunner.add(this),o.uniforms.globals=this.renderer.globalUniforms;const F=o.program,E=F.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(o);return this.shader=o,this.program!==F&&(this.program=F,this.gl.useProgram(E.program)),W||(vW.textureCount=0,vW.uboCount=0,this.syncUniformGroup(o.uniformGroup,vW)),E}setUniforms(o){const W=this.shader.program,F=W.glPrograms[this.renderer.CONTEXT_UID];W.syncUniforms(F.uniformData,o,this.renderer)}syncUniformGroup(o,W){const F=this.getGlProgram();(!o.static||o.dirtyId!==F.uniformDirtyGroups[o.id])&&(F.uniformDirtyGroups[o.id]=o.dirtyId,this.syncUniforms(o,F,W))}syncUniforms(o,W,F){(o.syncUniforms[this.shader.program.id]||this.createSyncGroups(o))(W.uniformData,o.uniforms,this.renderer,F)}createSyncGroups(o){const W=this.getSignature(o,this.shader.program.uniformData,"u");return this.cache[W]||(this.cache[W]=function(o,W){var F;const E=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const v in o.uniforms){const a=W[v];if(!a){!0===(null===(F=o.uniforms[v])||void 0===F?void 0:F.group)&&(o.uniforms[v].ubo?E.push(`\n                        renderer.shader.syncUniformBufferGroup(uv.${v}, '${v}');\n                    `):E.push(`\n                        renderer.shader.syncUniformGroup(uv.${v}, syncData);\n                    `));continue}const G=o.uniforms[v];let L=!1;for(let o=0;o<K.length;o++)if(K[o].test(a,G)){E.push(K[o].code(v,G)),L=!0;break}if(!L){const o=(1!==a.size||a.isArray?d:T)[a.type].replace("location",`ud["${v}"].location`);E.push(`\n            cu = ud["${v}"];\n            cv = cu.value;\n            v = uv["${v}"];\n            ${o};`)}}return new Function("ud","uv","renderer","syncData",E.join("\n"))}(o,this.shader.program.uniformData)),o.syncUniforms[this.shader.program.id]=this.cache[W],o.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(o,W){const F=this.getGlProgram();if(!o.static||0!==o.dirtyId||!F.uniformGroups[o.id]){o.dirtyId=0;const E=F.uniformGroups[o.id]||this.createSyncBufferGroup(o,F,W);o.buffer.update(),E(F.uniformData,o.uniforms,this.renderer,vW,o.buffer)}this.renderer.buffer.bindBufferBase(o.buffer,F.uniformBufferBindings[W])}createSyncBufferGroup(o,W,F){const{gl:E}=this.renderer;this.renderer.buffer.bind(o.buffer);const v=this.gl.getUniformBlockIndex(W.program,F);W.uniformBufferBindings[F]=this.shader.uniformBindCount,E.uniformBlockBinding(W.program,v,this.shader.uniformBindCount),this.shader.uniformBindCount++;const a=this.getSignature(o,this.shader.program.uniformData,"ubo");let G=this._uboCache[a];if(G||(G=this._uboCache[a]=function(o,W){if(!o.autoManage)return{size:0,syncFunc:bo};const F=function(o,W){const F=[];for(const E in o)W[E]&&F.push(W[E]);return F.sort(((o,W)=>o.index-W.index)),F}(o.uniforms,W),{uboElements:E,size:v}=function(o){const W=o.map((o=>({data:o,offset:0,dataLen:0,dirty:0})));let F=0,E=0,v=0;for(let o=0;o<W.length;o++){const a=W[o];if(F=WW[a.data.type],a.data.size>1&&(F=Math.max(F,16)*a.data.size),a.dataLen=F,E%F!=0&&E<16){const o=E%F%16;E+=o,v+=o}E+F>16?(v=16*Math.ceil(v/16),a.offset=v,v+=F,E=F):(a.offset=v,E+=F,v+=F)}return v=16*Math.ceil(v/16),{uboElements:W,size:v}}(F),a=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let W=0;W<E.length;W++){const F=E[W],v=o.uniforms[F.data.name],G=F.data.name;let L=!1;for(let o=0;o<K.length;o++){const W=K[o];if(W.codeUbo&&W.test(F.data,v)){a.push(`offset = ${F.offset/4};`,K[o].codeUbo(F.data.name,v)),L=!0;break}}if(!L)if(F.data.size>1){const o=Q(F.data.type),W=Math.max(WW[F.data.type]/16,1),E=o/W,v=(4-E%4)%4;a.push(`\n                cv = ud.${G}.value;\n                v = uv.${G};\n                offset = ${F.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${F.data.size*W}; i++)\n                {\n                    for(var j = 0; j < ${E}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${v};\n                }\n\n                `)}else{const o=oW[F.data.type];a.push(`\n                cv = ud.${G}.value;\n                v = uv.${G};\n                offset = ${F.offset/4};\n                ${o};\n                `)}}return a.push("\n       renderer.buffer.update(buffer);\n    "),{size:v,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join("\n"))}}(o,this.shader.program.uniformData)),o.autoManage){const W=new Float32Array(G.size/4);o.buffer.update(W)}return W.uniformGroups[o.id]=G.syncFunc,W.uniformGroups[o.id]}getSignature(o,W,F){const E=o.uniforms,v=[`${F}-`];for(const o in E)v.push(o),W[o]&&v.push(W[o].type);return v.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(o){const W=this.gl,F=o.program,E=function(o,W){var F;const E=Jo(o,o.VERTEX_SHADER,W.vertexSrc),v=Jo(o,o.FRAGMENT_SHADER,W.fragmentSrc),a=o.createProgram();o.attachShader(a,E),o.attachShader(a,v);const G=null===(F=W.extra)||void 0===F?void 0:F.transformFeedbackVaryings;if(G&&("function"!=typeof o.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):o.transformFeedbackVaryings(a,G.names,"separate"===G.bufferMode?o.SEPARATE_ATTRIBS:o.INTERLEAVED_ATTRIBS)),o.linkProgram(a),o.getProgramParameter(a,o.LINK_STATUS)||function(o,W,F,E){o.getProgramParameter(W,o.LINK_STATUS)||(o.getShaderParameter(F,o.COMPILE_STATUS)||Ho(o,F),o.getShaderParameter(E,o.COMPILE_STATUS)||Ho(o,E),console.error("PixiJS Error: Could not initialize shader."),""!==o.getProgramInfoLog(W)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",o.getProgramInfoLog(W)))}(o,a,E,v),W.attributeData=function(o,W){const F={},E=W.getProgramParameter(o,W.ACTIVE_ATTRIBUTES);for(let v=0;v<E;v++){const E=W.getActiveAttrib(o,v);if(E.name.startsWith("gl_"))continue;const a=c(W,E.type),G={type:a,name:E.name,size:Q(a),location:W.getAttribLocation(o,E.name)};F[E.name]=G}return F}(a,o),W.uniformData=function(o,W){const F={},E=W.getProgramParameter(o,W.ACTIVE_UNIFORMS);for(let v=0;v<E;v++){const E=W.getActiveUniform(o,v),a=E.name.replace(/\[.*?\]$/,""),G=!!E.name.match(/\[.*?\]$/),L=c(W,E.type);F[a]={name:a,index:v,type:L,size:E.size,isArray:G,value:Mo(L,E.size)}}return F}(a,o),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(W.vertexSrc)){const F=Object.keys(W.attributeData);F.sort(((o,W)=>o>W?1:-1));for(let E=0;E<F.length;E++)W.attributeData[F[E]].location=E,o.bindAttribLocation(a,E,F[E]);o.linkProgram(a)}o.deleteShader(E),o.deleteShader(v);const L={};for(const F in W.uniformData){const E=W.uniformData[F];L[F]={location:o.getUniformLocation(a,F),value:Mo(E.type,E.size)}}return new Ro(a,L)}(W,F);return F.glPrograms[this.renderer.CONTEXT_UID]=E,E}reset(){this.program=null,this.shader=null}disposeShader(o){this.shader===o&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}aW.extension={type:L.A.RendererSystem,name:"shader"},L.X.add(aW);class GW{constructor(o){this.renderer=o}run(o){const{renderer:W}=this;W.runners.init.emit(W.options),o.hello&&console.log(`PixiJS 7.3.2 - ${W.rendererLogId} - https://pixijs.com`),W.resize(W.screen.width,W.screen.height)}destroy(){}}GW.defaultOptions={hello:!1},GW.extension={type:[L.A.RendererSystem,L.A.CanvasRendererSystem],name:"startup"},L.X.add(GW);const LW=class o{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=E.B9.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new h,this.defaultState.blend=!0}contextChange(o){this.gl=o,this.blendModes=function(o,W=[]){return W[E.B9.NORMAL]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.ADD]=[o.ONE,o.ONE],W[E.B9.MULTIPLY]=[o.DST_COLOR,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.SCREEN]=[o.ONE,o.ONE_MINUS_SRC_COLOR,o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.OVERLAY]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.DARKEN]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.LIGHTEN]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.COLOR_DODGE]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.COLOR_BURN]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.HARD_LIGHT]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.SOFT_LIGHT]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.DIFFERENCE]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.EXCLUSION]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.HUE]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.SATURATION]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.COLOR]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.LUMINOSITY]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.NONE]=[0,0],W[E.B9.NORMAL_NPM]=[o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.ADD_NPM]=[o.SRC_ALPHA,o.ONE,o.ONE,o.ONE],W[E.B9.SCREEN_NPM]=[o.SRC_ALPHA,o.ONE_MINUS_SRC_COLOR,o.ONE,o.ONE_MINUS_SRC_ALPHA],W[E.B9.SRC_IN]=[o.DST_ALPHA,o.ZERO],W[E.B9.SRC_OUT]=[o.ONE_MINUS_DST_ALPHA,o.ZERO],W[E.B9.SRC_ATOP]=[o.DST_ALPHA,o.ONE_MINUS_SRC_ALPHA],W[E.B9.DST_OVER]=[o.ONE_MINUS_DST_ALPHA,o.ONE],W[E.B9.DST_IN]=[o.ZERO,o.SRC_ALPHA],W[E.B9.DST_OUT]=[o.ZERO,o.ONE_MINUS_SRC_ALPHA],W[E.B9.DST_ATOP]=[o.ONE_MINUS_DST_ALPHA,o.SRC_ALPHA],W[E.B9.XOR]=[o.ONE_MINUS_DST_ALPHA,o.ONE_MINUS_SRC_ALPHA],W[E.B9.SUBTRACT]=[o.ONE,o.ONE,o.ONE,o.ONE,o.FUNC_REVERSE_SUBTRACT,o.FUNC_ADD],W}(o),this.set(this.defaultState),this.reset()}set(o){if(o=o||this.defaultState,this.stateId!==o.data){let W=this.stateId^o.data,F=0;for(;W;)1&W&&this.map[F].call(this,!!(o.data&1<<F)),W>>=1,F++;this.stateId=o.data}for(let W=0;W<this.checks.length;W++)this.checks[W](this,o)}forceState(o){o=o||this.defaultState;for(let W=0;W<this.map.length;W++)this.map[W].call(this,!!(o.data&1<<W));for(let W=0;W<this.checks.length;W++)this.checks[W](this,o);this.stateId=o.data}setBlend(W){this.updateCheck(o.checkBlendMode,W),this.gl[W?"enable":"disable"](this.gl.BLEND)}setOffset(W){this.updateCheck(o.checkPolygonOffset,W),this.gl[W?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(o){this.gl[o?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(o){this.gl.depthMask(o)}setCullFace(o){this.gl[o?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(o){this.gl.frontFace(this.gl[o?"CW":"CCW"])}setBlendMode(o){if(o===this.blendMode)return;this.blendMode=o;const W=this.blendModes[o],F=this.gl;2===W.length?F.blendFunc(W[0],W[1]):F.blendFuncSeparate(W[0],W[1],W[2],W[3]),6===W.length?(this._blendEq=!0,F.blendEquationSeparate(W[4],W[5])):this._blendEq&&(this._blendEq=!1,F.blendEquationSeparate(F.FUNC_ADD,F.FUNC_ADD))}setPolygonOffset(o,W){this.gl.polygonOffset(o,W)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(o,W){const F=this.checks.indexOf(o);W&&-1===F?this.checks.push(o):!W&&-1!==F&&this.checks.splice(F,1)}static checkBlendMode(o,W){o.setBlendMode(W.blendMode)}static checkPolygonOffset(o,W){o.setPolygonOffset(1,W.polygonOffset)}destroy(){this.gl=null}};LW.extension={type:L.A.RendererSystem,name:"state"};let UW=LW;L.X.add(UW);class IW extends a.EventEmitter{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(o){var W;this.addRunners(...o.runners);const F=(null!==(W=o.priority)&&void 0!==W?W:[]).filter((W=>o.systems[W])),E=[...F,...Object.keys(o.systems).filter((o=>!F.includes(o)))];for(const W of E)this.addSystem(o.systems[W],W)}addRunners(...o){o.forEach((o=>{this.runners[o]=new f(o)}))}addSystem(o,W){const F=new o(this);if(this[W])throw new Error(`Whoops! The name "${W}" is already in use`);this[W]=F,this._systemsHash[W]=F;for(const o in this.runners)this.runners[o].add(F);return this}emitWithCustomOptions(o,W){const F=Object.keys(this._systemsHash);o.items.forEach((E=>{const v=F.find((o=>this._systemsHash[o]===E));E[o.name](W[v])}))}destroy(){Object.values(this.runners).forEach((o=>{o.destroy()})),this._systemsHash={}}}const lW=class o{constructor(W){this.renderer=W,this.count=0,this.checkCount=0,this.maxIdle=o.defaultMaxIdle,this.checkCountMax=o.defaultCheckCountMax,this.mode=o.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==E.OS.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const o=this.renderer.texture,W=o.managedTextures;let F=!1;for(let E=0;E<W.length;E++){const v=W[E];v.resource&&this.count-v.touched>this.maxIdle&&(o.destroyTexture(v,!0),W[E]=null,F=!0)}if(F){let o=0;for(let F=0;F<W.length;F++)null!==W[F]&&(W[o++]=W[F]);W.length=o}}unload(o){const W=this.renderer.texture,F=o._texture;F&&!F.framebuffer&&W.destroyTexture(F);for(let W=o.children.length-1;W>=0;W--)this.unload(o.children[W])}destroy(){this.renderer=null}};lW.defaultMode=E.OS.AUTO,lW.defaultMaxIdle=3600,lW.defaultCheckCountMax=600,lW.extension={type:L.A.RendererSystem,name:"textureGC"};let hW=lW;L.X.add(hW);class pW{constructor(o){this.texture=o,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=E.QE.UNSIGNED_BYTE,this.internalFormat=E.hR.RGBA,this.samplerType=0}}class gW{constructor(o){this.renderer=o,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new y,this.hasIntegerTextures=!1}contextChange(){const o=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(o){let W;return W="WebGL2RenderingContext"in globalThis&&o instanceof globalThis.WebGL2RenderingContext?{[E.QE.UNSIGNED_BYTE]:{[E.hR.RGBA]:o.RGBA8,[E.hR.RGB]:o.RGB8,[E.hR.RG]:o.RG8,[E.hR.RED]:o.R8,[E.hR.RGBA_INTEGER]:o.RGBA8UI,[E.hR.RGB_INTEGER]:o.RGB8UI,[E.hR.RG_INTEGER]:o.RG8UI,[E.hR.RED_INTEGER]:o.R8UI,[E.hR.ALPHA]:o.ALPHA,[E.hR.LUMINANCE]:o.LUMINANCE,[E.hR.LUMINANCE_ALPHA]:o.LUMINANCE_ALPHA},[E.QE.BYTE]:{[E.hR.RGBA]:o.RGBA8_SNORM,[E.hR.RGB]:o.RGB8_SNORM,[E.hR.RG]:o.RG8_SNORM,[E.hR.RED]:o.R8_SNORM,[E.hR.RGBA_INTEGER]:o.RGBA8I,[E.hR.RGB_INTEGER]:o.RGB8I,[E.hR.RG_INTEGER]:o.RG8I,[E.hR.RED_INTEGER]:o.R8I},[E.QE.UNSIGNED_SHORT]:{[E.hR.RGBA_INTEGER]:o.RGBA16UI,[E.hR.RGB_INTEGER]:o.RGB16UI,[E.hR.RG_INTEGER]:o.RG16UI,[E.hR.RED_INTEGER]:o.R16UI,[E.hR.DEPTH_COMPONENT]:o.DEPTH_COMPONENT16},[E.QE.SHORT]:{[E.hR.RGBA_INTEGER]:o.RGBA16I,[E.hR.RGB_INTEGER]:o.RGB16I,[E.hR.RG_INTEGER]:o.RG16I,[E.hR.RED_INTEGER]:o.R16I},[E.QE.UNSIGNED_INT]:{[E.hR.RGBA_INTEGER]:o.RGBA32UI,[E.hR.RGB_INTEGER]:o.RGB32UI,[E.hR.RG_INTEGER]:o.RG32UI,[E.hR.RED_INTEGER]:o.R32UI,[E.hR.DEPTH_COMPONENT]:o.DEPTH_COMPONENT24},[E.QE.INT]:{[E.hR.RGBA_INTEGER]:o.RGBA32I,[E.hR.RGB_INTEGER]:o.RGB32I,[E.hR.RG_INTEGER]:o.RG32I,[E.hR.RED_INTEGER]:o.R32I},[E.QE.FLOAT]:{[E.hR.RGBA]:o.RGBA32F,[E.hR.RGB]:o.RGB32F,[E.hR.RG]:o.RG32F,[E.hR.RED]:o.R32F,[E.hR.DEPTH_COMPONENT]:o.DEPTH_COMPONENT32F},[E.QE.HALF_FLOAT]:{[E.hR.RGBA]:o.RGBA16F,[E.hR.RGB]:o.RGB16F,[E.hR.RG]:o.RG16F,[E.hR.RED]:o.R16F},[E.QE.UNSIGNED_SHORT_5_6_5]:{[E.hR.RGB]:o.RGB565},[E.QE.UNSIGNED_SHORT_4_4_4_4]:{[E.hR.RGBA]:o.RGBA4},[E.QE.UNSIGNED_SHORT_5_5_5_1]:{[E.hR.RGBA]:o.RGB5_A1},[E.QE.UNSIGNED_INT_2_10_10_10_REV]:{[E.hR.RGBA]:o.RGB10_A2,[E.hR.RGBA_INTEGER]:o.RGB10_A2UI},[E.QE.UNSIGNED_INT_10F_11F_11F_REV]:{[E.hR.RGB]:o.R11F_G11F_B10F},[E.QE.UNSIGNED_INT_5_9_9_9_REV]:{[E.hR.RGB]:o.RGB9_E5},[E.QE.UNSIGNED_INT_24_8]:{[E.hR.DEPTH_STENCIL]:o.DEPTH24_STENCIL8},[E.QE.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[E.hR.DEPTH_STENCIL]:o.DEPTH32F_STENCIL8}}:{[E.QE.UNSIGNED_BYTE]:{[E.hR.RGBA]:o.RGBA,[E.hR.RGB]:o.RGB,[E.hR.ALPHA]:o.ALPHA,[E.hR.LUMINANCE]:o.LUMINANCE,[E.hR.LUMINANCE_ALPHA]:o.LUMINANCE_ALPHA},[E.QE.UNSIGNED_SHORT_5_6_5]:{[E.hR.RGB]:o.RGB},[E.QE.UNSIGNED_SHORT_4_4_4_4]:{[E.hR.RGBA]:o.RGBA},[E.QE.UNSIGNED_SHORT_5_5_5_1]:{[E.hR.RGBA]:o.RGBA}},W}(o),this.samplerTypes=function(o){let W;return W="WebGL2RenderingContext"in globalThis&&o instanceof globalThis.WebGL2RenderingContext?{[o.RGB]:E.XZ.FLOAT,[o.RGBA]:E.XZ.FLOAT,[o.ALPHA]:E.XZ.FLOAT,[o.LUMINANCE]:E.XZ.FLOAT,[o.LUMINANCE_ALPHA]:E.XZ.FLOAT,[o.R8]:E.XZ.FLOAT,[o.R8_SNORM]:E.XZ.FLOAT,[o.RG8]:E.XZ.FLOAT,[o.RG8_SNORM]:E.XZ.FLOAT,[o.RGB8]:E.XZ.FLOAT,[o.RGB8_SNORM]:E.XZ.FLOAT,[o.RGB565]:E.XZ.FLOAT,[o.RGBA4]:E.XZ.FLOAT,[o.RGB5_A1]:E.XZ.FLOAT,[o.RGBA8]:E.XZ.FLOAT,[o.RGBA8_SNORM]:E.XZ.FLOAT,[o.RGB10_A2]:E.XZ.FLOAT,[o.RGB10_A2UI]:E.XZ.FLOAT,[o.SRGB8]:E.XZ.FLOAT,[o.SRGB8_ALPHA8]:E.XZ.FLOAT,[o.R16F]:E.XZ.FLOAT,[o.RG16F]:E.XZ.FLOAT,[o.RGB16F]:E.XZ.FLOAT,[o.RGBA16F]:E.XZ.FLOAT,[o.R32F]:E.XZ.FLOAT,[o.RG32F]:E.XZ.FLOAT,[o.RGB32F]:E.XZ.FLOAT,[o.RGBA32F]:E.XZ.FLOAT,[o.R11F_G11F_B10F]:E.XZ.FLOAT,[o.RGB9_E5]:E.XZ.FLOAT,[o.R8I]:E.XZ.INT,[o.R8UI]:E.XZ.UINT,[o.R16I]:E.XZ.INT,[o.R16UI]:E.XZ.UINT,[o.R32I]:E.XZ.INT,[o.R32UI]:E.XZ.UINT,[o.RG8I]:E.XZ.INT,[o.RG8UI]:E.XZ.UINT,[o.RG16I]:E.XZ.INT,[o.RG16UI]:E.XZ.UINT,[o.RG32I]:E.XZ.INT,[o.RG32UI]:E.XZ.UINT,[o.RGB8I]:E.XZ.INT,[o.RGB8UI]:E.XZ.UINT,[o.RGB16I]:E.XZ.INT,[o.RGB16UI]:E.XZ.UINT,[o.RGB32I]:E.XZ.INT,[o.RGB32UI]:E.XZ.UINT,[o.RGBA8I]:E.XZ.INT,[o.RGBA8UI]:E.XZ.UINT,[o.RGBA16I]:E.XZ.INT,[o.RGBA16UI]:E.XZ.UINT,[o.RGBA32I]:E.XZ.INT,[o.RGBA32UI]:E.XZ.UINT,[o.DEPTH_COMPONENT16]:E.XZ.FLOAT,[o.DEPTH_COMPONENT24]:E.XZ.FLOAT,[o.DEPTH_COMPONENT32F]:E.XZ.FLOAT,[o.DEPTH_STENCIL]:E.XZ.FLOAT,[o.DEPTH24_STENCIL8]:E.XZ.FLOAT,[o.DEPTH32F_STENCIL8]:E.XZ.FLOAT}:{[o.RGB]:E.XZ.FLOAT,[o.RGBA]:E.XZ.FLOAT,[o.ALPHA]:E.XZ.FLOAT,[o.LUMINANCE]:E.XZ.FLOAT,[o.LUMINANCE_ALPHA]:E.XZ.FLOAT,[o.DEPTH_STENCIL]:E.XZ.FLOAT},W}(o);const W=o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=W;for(let o=0;o<W;o++)this.boundTextures[o]=null;this.emptyTextures={};const F=new pW(o.createTexture());o.bindTexture(o.TEXTURE_2D,F.texture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,1,1,0,o.RGBA,o.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[o.TEXTURE_2D]=F,this.emptyTextures[o.TEXTURE_CUBE_MAP]=new pW(o.createTexture()),o.bindTexture(o.TEXTURE_CUBE_MAP,this.emptyTextures[o.TEXTURE_CUBE_MAP].texture);for(let W=0;W<6;W++)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+W,0,o.RGBA,1,1,0,o.RGBA,o.UNSIGNED_BYTE,null);o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR);for(let o=0;o<this.boundTextures.length;o++)this.bind(null,o)}bind(o,W=0){const{gl:F}=this;if((null==(o=null==o?void 0:o.castToBaseTexture())?void 0:o.valid)&&!o.parentTextureArray){o.touched=this.renderer.textureGC.count;const E=o._glTextures[this.CONTEXT_UID]||this.initTexture(o);this.boundTextures[W]!==o&&(this.currentLocation!==W&&(this.currentLocation=W,F.activeTexture(F.TEXTURE0+W)),F.bindTexture(o.target,E.texture)),E.dirtyId!==o.dirtyId?(this.currentLocation!==W&&(this.currentLocation=W,F.activeTexture(F.TEXTURE0+W)),this.updateTexture(o)):E.dirtyStyleId!==o.dirtyStyleId&&this.updateTextureStyle(o),this.boundTextures[W]=o}else this.currentLocation!==W&&(this.currentLocation=W,F.activeTexture(F.TEXTURE0+W)),F.bindTexture(F.TEXTURE_2D,this.emptyTextures[F.TEXTURE_2D].texture),this.boundTextures[W]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let o=0;o<this.boundTextures.length;o++)this.boundTextures[o]=this.unknownTexture}unbind(o){const{gl:W,boundTextures:F}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let o=0;o<F.length;o++)F[o]===this.unknownTexture&&this.bind(null,o)}for(let E=0;E<F.length;E++)F[E]===o&&(this.currentLocation!==E&&(W.activeTexture(W.TEXTURE0+E),this.currentLocation=E),W.bindTexture(o.target,this.emptyTextures[o.target].texture),F[E]=null)}ensureSamplerType(o){const{boundTextures:W,hasIntegerTextures:F,CONTEXT_UID:v}=this;if(F)for(let F=o-1;F>=0;--F){const o=W[F];o&&o._glTextures[v].samplerType!==E.XZ.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(o){const W=new pW(this.gl.createTexture());return W.dirtyId=-1,o._glTextures[this.CONTEXT_UID]=W,this.managedTextures.push(o),o.on("dispose",this.destroyTexture,this),W}initTextureType(o,W){var F,v,a;W.internalFormat=null!==(v=null===(F=this.internalFormats[o.type])||void 0===F?void 0:F[o.format])&&void 0!==v?v:o.format,W.samplerType=null!==(a=this.samplerTypes[W.internalFormat])&&void 0!==a?a:E.XZ.FLOAT,2===this.webGLVersion&&o.type===E.QE.HALF_FLOAT?W.type=this.gl.HALF_FLOAT:W.type=o.type}updateTexture(o){var W;const F=o._glTextures[this.CONTEXT_UID];if(!F)return;const v=this.renderer;if(this.initTextureType(o,F),null===(W=o.resource)||void 0===W?void 0:W.upload(v,o,F))F.samplerType!==E.XZ.FLOAT&&(this.hasIntegerTextures=!0);else{const W=o.realWidth,E=o.realHeight,a=v.gl;(F.width!==W||F.height!==E||F.dirtyId<0)&&(F.width=W,F.height=E,a.texImage2D(o.target,0,F.internalFormat,W,E,0,o.format,F.type,null))}o.dirtyStyleId!==F.dirtyStyleId&&this.updateTextureStyle(o),F.dirtyId=o.dirtyId}destroyTexture(o,W){const{gl:F}=this;if((o=o.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(o),F.deleteTexture(o._glTextures[this.CONTEXT_UID].texture),o.off("dispose",this.destroyTexture,this),delete o._glTextures[this.CONTEXT_UID],!W)){const W=this.managedTextures.indexOf(o);-1!==W&&a.removeItems(this.managedTextures,W,1)}}updateTextureStyle(o){var W;const F=o._glTextures[this.CONTEXT_UID];F&&(o.mipmap!==E.E8.POW2&&2===this.webGLVersion||o.isPowerOfTwo?F.mipmap=o.mipmap>=1:F.mipmap=!1,2===this.webGLVersion||o.isPowerOfTwo?F.wrapMode=o.wrapMode:F.wrapMode=E.uR.CLAMP,(null===(W=o.resource)||void 0===W?void 0:W.style(this.renderer,o,F))||this.setStyle(o,F),F.dirtyStyleId=o.dirtyStyleId)}setStyle(o,W){const F=this.gl;if(W.mipmap&&o.mipmap!==E.E8.ON_MANUAL&&F.generateMipmap(o.target),F.texParameteri(o.target,F.TEXTURE_WRAP_S,W.wrapMode),F.texParameteri(o.target,F.TEXTURE_WRAP_T,W.wrapMode),W.mipmap){F.texParameteri(o.target,F.TEXTURE_MIN_FILTER,o.scaleMode===E.M6.LINEAR?F.LINEAR_MIPMAP_LINEAR:F.NEAREST_MIPMAP_NEAREST);const W=this.renderer.context.extensions.anisotropicFiltering;if(W&&o.anisotropicLevel>0&&o.scaleMode===E.M6.LINEAR){const E=Math.min(o.anisotropicLevel,F.getParameter(W.MAX_TEXTURE_MAX_ANISOTROPY_EXT));F.texParameterf(o.target,W.TEXTURE_MAX_ANISOTROPY_EXT,E)}}else F.texParameteri(o.target,F.TEXTURE_MIN_FILTER,o.scaleMode===E.M6.LINEAR?F.LINEAR:F.NEAREST);F.texParameteri(o.target,F.TEXTURE_MAG_FILTER,o.scaleMode===E.M6.LINEAR?F.LINEAR:F.NEAREST)}destroy(){this.renderer=null}}gW.extension={type:L.A.RendererSystem,name:"texture"},L.X.add(gW);class fW{constructor(o){this.renderer=o}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(o){const{gl:W,CONTEXT_UID:F}=this,E=o._glTransformFeedbacks[F]||this.createGLTransformFeedback(o);W.bindTransformFeedback(W.TRANSFORM_FEEDBACK,E)}unbind(){const{gl:o}=this;o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(o,W){const{gl:F,renderer:E}=this;W&&E.shader.bind(W),F.beginTransformFeedback(o)}endTransformFeedback(){const{gl:o}=this;o.endTransformFeedback()}createGLTransformFeedback(o){const{gl:W,renderer:F,CONTEXT_UID:E}=this,v=W.createTransformFeedback();o._glTransformFeedbacks[E]=v,W.bindTransformFeedback(W.TRANSFORM_FEEDBACK,v);for(let v=0;v<o.buffers.length;v++){const a=o.buffers[v];a&&(F.buffer.update(a),a._glBuffers[E].refCount++,W.bindBufferBase(W.TRANSFORM_FEEDBACK_BUFFER,v,a._glBuffers[E].buffer||null))}return W.bindTransformFeedback(W.TRANSFORM_FEEDBACK,null),o.disposeRunner.add(this),v}disposeTransformFeedback(o,W){const F=o._glTransformFeedbacks[this.CONTEXT_UID],E=this.gl;o.disposeRunner.remove(this);const v=this.renderer.buffer;if(v)for(let F=0;F<o.buffers.length;F++){const E=o.buffers[F];if(!E)continue;const a=E._glBuffers[this.CONTEXT_UID];a&&(a.refCount--,0===a.refCount&&!W&&v.dispose(E,W))}F&&(W||E.deleteTransformFeedback(F),delete o._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}fW.extension={type:L.A.RendererSystem,name:"transformFeedback"},L.X.add(fW);class AW{constructor(o){this.renderer=o}init(o){this.screen=new w.M_(0,0,o.width,o.height),this.element=o.view||v.W0.ADAPTER.createCanvas(),this.resolution=o.resolution||v.W0.RESOLUTION,this.autoDensity=!!o.autoDensity}resizeView(o,W){this.element.width=Math.round(o*this.resolution),this.element.height=Math.round(W*this.resolution);const F=this.element.width/this.resolution,E=this.element.height/this.resolution;this.screen.width=F,this.screen.height=E,this.autoDensity&&(this.element.style.width=`${F}px`,this.element.style.height=`${E}px`),this.renderer.emit("resize",F,E),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(o){var W;o&&(null===(W=this.element.parentNode)||void 0===W||W.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}AW.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},AW.extension={type:[L.A.RendererSystem,L.A.CanvasRendererSystem],name:"_view"},L.X.add(AW),v.W0.PREFER_ENV=E.Km.WEBGL2,v.W0.STRICT_TEXTURE_CACHE=!1,v.W0.RENDER_OPTIONS={...Go.defaultOptions,...Eo.defaultOptions,...AW.defaultOptions,...GW.defaultOptions},Object.defineProperties(v.W0,{WRAP_MODE:{get:()=>y.defaultOptions.wrapMode,set(o){a.deprecation("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),y.defaultOptions.wrapMode=o}},SCALE_MODE:{get:()=>y.defaultOptions.scaleMode,set(o){a.deprecation("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),y.defaultOptions.scaleMode=o}},MIPMAP_TEXTURES:{get:()=>y.defaultOptions.mipmap,set(o){a.deprecation("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),y.defaultOptions.mipmap=o}},ANISOTROPIC_LEVEL:{get:()=>y.defaultOptions.anisotropicLevel,set(o){a.deprecation("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),y.defaultOptions.anisotropicLevel=o}},FILTER_RESOLUTION:{get:()=>(a.deprecation("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Fo.defaultResolution),set(o){Fo.defaultResolution=o}},FILTER_MULTISAMPLE:{get:()=>(a.deprecation("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Fo.defaultMultisample),set(o){Fo.defaultMultisample=o}},SPRITE_MAX_TEXTURES:{get:()=>oo.defaultMaxTextures,set(o){a.deprecation("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),oo.defaultMaxTextures=o}},SPRITE_BATCH_SIZE:{get:()=>oo.defaultBatchSize,set(o){a.deprecation("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),oo.defaultBatchSize=o}},CAN_UPLOAD_SAME_BUFFER:{get:()=>oo.canUploadSameBuffer,set(o){a.deprecation("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),oo.canUploadSameBuffer=o}},GC_MODE:{get:()=>hW.defaultMode,set(o){a.deprecation("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),hW.defaultMode=o}},GC_MAX_IDLE:{get:()=>hW.defaultMaxIdle,set(o){a.deprecation("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),hW.defaultMaxIdle=o}},GC_MAX_CHECK_COUNT:{get:()=>hW.defaultCheckCountMax,set(o){a.deprecation("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),hW.defaultCheckCountMax=o}},PRECISION_VERTEX:{get:()=>s.defaultVertexPrecision,set(o){a.deprecation("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),s.defaultVertexPrecision=o}},PRECISION_FRAGMENT:{get:()=>s.defaultFragmentPrecision,set(o){a.deprecation("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),s.defaultFragmentPrecision=o}}});var kW=F(71931);const ZW=[];function PW(o){for(const W of ZW)if(W.test(o))return new W(o);throw new Error("Unable to auto-detect a suitable renderer.")}L.X.handleByList(L.A.Renderer,ZW);var yW=F(391966);class zW{constructor(o){this.renderer=o}contextChange(o){let W;if(1===this.renderer.context.webGLVersion){const F=o.getParameter(o.FRAMEBUFFER_BINDING);o.bindFramebuffer(o.FRAMEBUFFER,null),W=o.getParameter(o.SAMPLES),o.bindFramebuffer(o.FRAMEBUFFER,F)}else{const F=o.getParameter(o.DRAW_FRAMEBUFFER_BINDING);o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null),W=o.getParameter(o.SAMPLES),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,F)}W>=E.he.HIGH?this.multisample=E.he.HIGH:W>=E.he.MEDIUM?this.multisample=E.he.MEDIUM:W>=E.he.LOW?this.multisample=E.he.LOW:this.multisample=E.he.NONE}destroy(){}}zW.extension={type:L.A.RendererSystem,name:"_multisample"},L.X.add(zW);class xW{constructor(o){this.buffer=o||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class NW{constructor(o){this.renderer=o,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(o){const{gl:W,CONTEXT_UID:F}=this,E=o._glBuffers[F]||this.createGLBuffer(o);W.bindBuffer(o.type,E.buffer)}unbind(o){const{gl:W}=this;W.bindBuffer(o,null)}bindBufferBase(o,W){const{gl:F,CONTEXT_UID:E}=this;if(this.boundBufferBases[W]!==o){const v=o._glBuffers[E]||this.createGLBuffer(o);this.boundBufferBases[W]=o,F.bindBufferBase(F.UNIFORM_BUFFER,W,v.buffer)}}bindBufferRange(o,W,F){const{gl:E,CONTEXT_UID:v}=this;F=F||0;const a=o._glBuffers[v]||this.createGLBuffer(o);E.bindBufferRange(E.UNIFORM_BUFFER,W||0,a.buffer,256*F,256)}update(o){const{gl:W,CONTEXT_UID:F}=this,E=o._glBuffers[F]||this.createGLBuffer(o);if(o._updateID!==E.updateID)if(E.updateID=o._updateID,W.bindBuffer(o.type,E.buffer),E.byteLength>=o.data.byteLength)W.bufferSubData(o.type,0,o.data);else{const F=o.static?W.STATIC_DRAW:W.DYNAMIC_DRAW;E.byteLength=o.data.byteLength,W.bufferData(o.type,o.data,F)}}dispose(o,W){if(!this.managedBuffers[o.id])return;delete this.managedBuffers[o.id];const F=o._glBuffers[this.CONTEXT_UID],E=this.gl;o.disposeRunner.remove(this),F&&(W||E.deleteBuffer(F.buffer),delete o._glBuffers[this.CONTEXT_UID])}disposeAll(o){const W=Object.keys(this.managedBuffers);for(let F=0;F<W.length;F++)this.dispose(this.managedBuffers[W[F]],o)}createGLBuffer(o){const{CONTEXT_UID:W,gl:F}=this;return o._glBuffers[W]=new xW(F.createBuffer()),this.managedBuffers[o.id]=o,o.disposeRunner.add(this),o._glBuffers[W]}}NW.extension={type:L.A.RendererSystem,name:"buffer"},L.X.add(NW);class eW{constructor(o){this.renderer=o}render(o,W){const F=this.renderer;let E,v,a,G;if(W&&(E=W.renderTexture,v=W.clear,a=W.transform,G=W.skipUpdateTransform),this.renderingToScreen=!E,F.runners.prerender.emit(),F.emit("prerender"),F.projection.transform=a,!F.context.isLost){if(E||(this.lastObjectRendered=o),!G){const W=o.enableTempParent();o.updateTransform(),o.disableTempParent(W)}F.renderTexture.bind(E),F.batch.currentRenderer.start(),(null!=v?v:F.background.clearBeforeRender)&&F.renderTexture.clear(),o.render(F),F.batch.currentRenderer.flush(),E&&(W.blit&&F.framebuffer.blit(),E.baseTexture.update()),F.runners.postrender.emit(),F.projection.transform=null,F.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}eW.extension={type:L.A.RendererSystem,name:"objectRenderer"},L.X.add(eW);const tW=class o extends IW{constructor(W){super(),this.type=E.h3.WEBGL,W=Object.assign({},v.W0.RENDER_OPTIONS,W),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new R({projectionMatrix:new w.uq},!0);const F={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:o.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(F),"useContextAlpha"in W&&(a.deprecation("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),W.premultipliedAlpha=W.useContextAlpha&&"notMultiplied"!==W.useContextAlpha,W.backgroundAlpha=!1===W.useContextAlpha?1:W.backgroundAlpha),this._plugin.rendererPlugins=o.__plugins,this.options=W,this.startup.run(this.options)}static test(o){return!(null==o?void 0:o.forceCanvas)&&a.isWebGLSupported()}render(o,W){this.objectRenderer.render(o,W)}resize(o,W){this._view.resizeView(o,W)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(o=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:o}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(o){this._view.resolution=o,this.runners.resolutionChange.emit(o)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return a.deprecation("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return a.deprecation("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return a.deprecation("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return a.deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(o){a.deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=o}get backgroundAlpha(){return a.deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(o){a.deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=o}get powerPreference(){return a.deprecation("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(o,W){return this.textureGenerator.generateTexture(o,W)}};tW.extension={type:L.A.Renderer,priority:1},tW.__plugins={},tW.__systems={};let mW=tW;L.X.handleByMap(L.A.RendererPlugin,mW.__plugins),L.X.handleByMap(L.A.RendererSystem,mW.__systems),L.X.add(mW);class rW extends A{constructor(o,W){const{width:F,height:E}=W||{};super(F,E),this.items=[],this.itemDirtyIds=[];for(let W=0;W<o;W++){const o=new y;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=o,this._load=null,this.baseTexture=null}initFromArray(o,W){for(let F=0;F<this.length;F++)o[F]&&(o[F].castToBaseTexture?this.addBaseTextureAt(o[F].castToBaseTexture(),F):o[F]instanceof A?this.addResourceAt(o[F],F):this.addResourceAt(g(o[F],W),F))}dispose(){for(let o=0,W=this.length;o<W;o++)this.items[o].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(o,W){if(!this.items[W])throw new Error(`Index ${W} is out of bounds`);return o.valid&&!this.valid&&this.resize(o.width,o.height),this.items[W].setResource(o),this}bind(o){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(o);for(let W=0;W<this.length;W++)this.items[W].parentTextureArray=o,this.items[W].on("update",o.update,o)}unbind(o){super.unbind(o);for(let W=0;W<this.length;W++)this.items[W].parentTextureArray=null,this.items[W].off("update",o.update,o)}load(){if(this._load)return this._load;const o=this.items.map((o=>o.resource)).filter((o=>o)).map((o=>o.load()));return this._load=Promise.all(o).then((()=>{const{realWidth:o,realHeight:W}=this.items[0];return this.resize(o,W),this.update(),Promise.resolve(this)})),this._load}}const BW=class o extends rW{constructor(W,F){const{width:v,height:a,autoLoad:G,linkBaseTexture:L}=F||{};if(W&&W.length!==o.SIDES)throw new Error(`Invalid length. Got ${W.length}, expected 6`);super(6,{width:v,height:a});for(let W=0;W<o.SIDES;W++)this.items[W].target=E.dW.TEXTURE_CUBE_MAP_POSITIVE_X+W;this.linkBaseTexture=!1!==L,W&&this.initFromArray(W,F),!1!==G&&this.load()}bind(o){super.bind(o),o.target=E.dW.TEXTURE_CUBE_MAP}addBaseTextureAt(o,W,F){if(void 0===F&&(F=this.linkBaseTexture),!this.items[W])throw new Error(`Index ${W} is out of bounds`);if(!this.linkBaseTexture||o.parentTextureArray||Object.keys(o._glTextures).length>0){if(!o.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(o.resource,W)}else o.target=E.dW.TEXTURE_CUBE_MAP_POSITIVE_X+W,o.parentTextureArray=this.baseTexture,this.items[W]=o;return o.valid&&!this.valid&&this.resize(o.realWidth,o.realHeight),this.items[W]=o,this}upload(W,F,E){const v=this.itemDirtyIds;for(let a=0;a<o.SIDES;a++){const o=this.items[a];(v[a]<o.dirtyId||E.dirtyId<F.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(W,o,E),v[a]=o.dirtyId):v[a]<-1&&(W.gl.texImage2D(o.target,0,E.internalFormat,F.realWidth,F.realHeight,0,F.format,E.type,null),v[a]=-1))}return!0}static test(W){return Array.isArray(W)&&W.length===o.SIDES}};BW.SIDES=6;let jW=BW;class VW extends Io{constructor(o,W){var F,E;let v,a,G;W=W||{},"string"==typeof o?(v=VW.EMPTY,a=o,G=!0):(v=o,a=null,G=!1),super(v),this.url=a,this.crossOrigin=null===(F=W.crossOrigin)||void 0===F||F,this.alphaMode="number"==typeof W.alphaMode?W.alphaMode:null,this.ownsImageBitmap=null!==(E=W.ownsImageBitmap)&&void 0!==E?E:G,this._load=null,!1!==W.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((async(o,W)=>{if(null!==this.url)try{const W=await v.W0.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const F=await W.blob();if(this.destroyed)return;const a=await createImageBitmap(F,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===E.Gk.UNPACK?"premultiply":"none"});if(this.destroyed)return void a.close();this.source=a,this.update(),o(this)}catch(o){if(this.destroyed)return;W(o),this.onError.emit(o)}else o(this)}))),this._load}upload(o,W,F){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(W.alphaMode=this.alphaMode),super.upload(o,W,F)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(o){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&("string"==typeof o||o instanceof ImageBitmap)}static get EMPTY(){var o;return VW._EMPTY=null!==(o=VW._EMPTY)&&void 0!==o?o:v.W0.ADAPTER.createCanvas(0,0),VW._EMPTY}}const wW=class o extends Io{constructor(o,W){W=W||{},super(v.W0.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=o,this.scale=W.scale||1,this._overrideWidth=W.width,this._overrideHeight=W.height,this._resolve=null,this._crossorigin=W.crossorigin,this._load=null,!1!==W.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((W=>{if(this._resolve=()=>{this.update(),W(this)},o.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}))),this._load}_loadSvg(){const o=new Image;Io.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=W=>{this._resolve&&(o.onerror=null,this.onError.emit(W))},o.onload=()=>{if(!this._resolve)return;const W=o.width,F=o.height;if(!W||!F)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let E=W*this.scale,v=F*this.scale;(this._overrideWidth||this._overrideHeight)&&(E=this._overrideWidth||this._overrideHeight/F*W,v=this._overrideHeight||this._overrideWidth/W*F),E=Math.round(E),v=Math.round(v);const G=this.source;G.width=E,G.height=v,G._pixiId=`canvas_${a.uid()}`,G.getContext("2d").drawImage(o,0,0,W,F,0,0,E,v),this._resolve(),this._resolve=null}}static getSize(W){const F=o.SVG_SIZE.exec(W),E={};return F&&(E[F[1]]=Math.round(parseFloat(F[3])),E[F[5]]=Math.round(parseFloat(F[7]))),E}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(W,F){return"svg"===F||"string"==typeof W&&W.startsWith("data:image/svg+xml")||"string"==typeof W&&o.SVG_XML.test(W)}};wW.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,wW.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let KW=wW;const TW=class o extends Io{constructor(W,F){if(F=F||{},!(W instanceof HTMLVideoElement)){const E=document.createElement("video");!1!==F.autoLoad&&E.setAttribute("preload","auto"),!1!==F.playsinline&&(E.setAttribute("webkit-playsinline",""),E.setAttribute("playsinline","")),!0===F.muted&&(E.setAttribute("muted",""),E.muted=!0),!0===F.loop&&E.setAttribute("loop",""),!1!==F.autoPlay&&E.setAttribute("autoplay",""),"string"==typeof W&&(W=[W]);const v=W[0].src||W[0];Io.crossOrigin(E,v,F.crossorigin);for(let F=0;F<W.length;++F){const v=document.createElement("source");let{src:a,mime:G}=W[F];if(a=a||W[F],a.startsWith("data:"))G=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const W=a.split("?").shift().toLowerCase(),F=W.slice(W.lastIndexOf(".")+1);G=G||o.MIME_TYPES[F]||`video/${F}`}v.src=a,G&&(v.type=G),E.appendChild(v)}W=E}super(W),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=F.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==F.autoPlay,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==F.autoLoad&&this.load()}update(o=0){if(!this.destroyed){if(this._updateFPS){const o=kW.Rv.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-o)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const o=this.source;return(o.readyState===o.HAVE_ENOUGH_DATA||o.readyState===o.HAVE_FUTURE_DATA)&&o.width&&o.height&&(o.complete=!0),o.addEventListener("play",this._onPlayStart),o.addEventListener("pause",this._onPlayStop),o.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(o.addEventListener("canplay",this._onCanPlay),o.addEventListener("canplaythrough",this._onCanPlay),o.addEventListener("error",this._onError,!0)),this._load=new Promise(((W,F)=>{this.valid?W(this):(this._resolve=W,this._reject=F,o.load())})),this._load}_onError(o){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(o),this._reject&&(this._reject(o),this._reject=null,this._resolve=null)}_isSourcePlaying(){const o=this.source;return!o.paused&&!o.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const o=this.source;o.removeEventListener("canplay",this._onCanPlay),o.removeEventListener("canplaythrough",this._onCanPlay);const W=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!W&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&o.play()}dispose(){this._configureAutoUpdate();const o=this.source;o&&(o.removeEventListener("play",this._onPlayStart),o.removeEventListener("pause",this._onPlayStop),o.removeEventListener("seeked",this._onSeeked),o.removeEventListener("canplay",this._onCanPlay),o.removeEventListener("canplaythrough",this._onCanPlay),o.removeEventListener("error",this._onError,!0),o.pause(),o.src="",o.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(o){o!==this._autoUpdate&&(this._autoUpdate=o,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(o){o!==this._updateFPS&&(this._updateFPS=o,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(kW.Rv.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(kW.Rv.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(kW.Rv.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(W,F){return globalThis.HTMLVideoElement&&W instanceof HTMLVideoElement||o.TYPES.includes(F)}};TW.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],TW.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let dW=TW;p.push(VW,lo,class extends Io{constructor(o){super(o)}static test(o){const{OffscreenCanvas:W}=globalThis;return!!(W&&o instanceof W)||globalThis.HTMLCanvasElement&&o instanceof HTMLCanvasElement}},dW,KW,k,jW,class extends rW{constructor(o,W){const{width:F,height:E}=W||{};let v,a;Array.isArray(o)?(v=o,a=o.length):a=o,super(a,{width:F,height:E}),v&&this.initFromArray(v,W)}addBaseTextureAt(o,W){if(!o.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(o.resource,W),this}bind(o){super.bind(o),o.target=E.dW.TEXTURE_2D_ARRAY}upload(o,W,F){const{length:E,itemDirtyIds:v,items:a}=this,{gl:G}=o;F.dirtyId<0&&G.texImage3D(G.TEXTURE_2D_ARRAY,0,F.internalFormat,this._width,this._height,E,0,W.format,F.type,null);for(let o=0;o<E;o++){const E=a[o];v[o]<E.dirtyId&&(v[o]=E.dirtyId,E.valid&&G.texSubImage3D(G.TEXTURE_2D_ARRAY,0,0,0,o,E.resource.width,E.resource.height,1,W.format,F.type,E.resource.source))}return!0}})},110715:(o,W,F)=>{F.d(W,{cz:()=>v,mc:()=>l,q9:()=>a});var E=F(316197);class v{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(o){return this.minX>this.maxX||this.minY>this.maxY?E.M_.EMPTY:((o=o||new E.M_(0,0,1,1)).x=this.minX,o.y=this.minY,o.width=this.maxX-this.minX,o.height=this.maxY-this.minY,o)}addPoint(o){this.minX=Math.min(this.minX,o.x),this.maxX=Math.max(this.maxX,o.x),this.minY=Math.min(this.minY,o.y),this.maxY=Math.max(this.maxY,o.y)}addPointMatrix(o,W){const{a:F,b:E,c:v,d:a,tx:G,ty:L}=o,U=F*W.x+v*W.y+G,I=E*W.x+a*W.y+L;this.minX=Math.min(this.minX,U),this.maxX=Math.max(this.maxX,U),this.minY=Math.min(this.minY,I),this.maxY=Math.max(this.maxY,I)}addQuad(o){let W=this.minX,F=this.minY,E=this.maxX,v=this.maxY,a=o[0],G=o[1];W=a<W?a:W,F=G<F?G:F,E=a>E?a:E,v=G>v?G:v,a=o[2],G=o[3],W=a<W?a:W,F=G<F?G:F,E=a>E?a:E,v=G>v?G:v,a=o[4],G=o[5],W=a<W?a:W,F=G<F?G:F,E=a>E?a:E,v=G>v?G:v,a=o[6],G=o[7],W=a<W?a:W,F=G<F?G:F,E=a>E?a:E,v=G>v?G:v,this.minX=W,this.minY=F,this.maxX=E,this.maxY=v}addFrame(o,W,F,E,v){this.addFrameMatrix(o.worldTransform,W,F,E,v)}addFrameMatrix(o,W,F,E,v){const a=o.a,G=o.b,L=o.c,U=o.d,I=o.tx,l=o.ty;let h=this.minX,p=this.minY,g=this.maxX,f=this.maxY,A=a*W+L*F+I,k=G*W+U*F+l;h=A<h?A:h,p=k<p?k:p,g=A>g?A:g,f=k>f?k:f,A=a*E+L*F+I,k=G*E+U*F+l,h=A<h?A:h,p=k<p?k:p,g=A>g?A:g,f=k>f?k:f,A=a*W+L*v+I,k=G*W+U*v+l,h=A<h?A:h,p=k<p?k:p,g=A>g?A:g,f=k>f?k:f,A=a*E+L*v+I,k=G*E+U*v+l,h=A<h?A:h,p=k<p?k:p,g=A>g?A:g,f=k>f?k:f,this.minX=h,this.minY=p,this.maxX=g,this.maxY=f}addVertexData(o,W,F){let E=this.minX,v=this.minY,a=this.maxX,G=this.maxY;for(let L=W;L<F;L+=2){const W=o[L],F=o[L+1];E=W<E?W:E,v=F<v?F:v,a=W>a?W:a,G=F>G?F:G}this.minX=E,this.minY=v,this.maxX=a,this.maxY=G}addVertices(o,W,F,E){this.addVerticesMatrix(o.worldTransform,W,F,E)}addVerticesMatrix(o,W,F,E,v=0,a=v){const G=o.a,L=o.b,U=o.c,I=o.d,l=o.tx,h=o.ty;let p=this.minX,g=this.minY,f=this.maxX,A=this.maxY;for(let o=F;o<E;o+=2){const F=W[o],E=W[o+1],k=G*F+U*E+l,Z=I*E+L*F+h;p=Math.min(p,k-v),f=Math.max(f,k+v),g=Math.min(g,Z-a),A=Math.max(A,Z+a)}this.minX=p,this.minY=g,this.maxX=f,this.maxY=A}addBounds(o){const W=this.minX,F=this.minY,E=this.maxX,v=this.maxY;this.minX=o.minX<W?o.minX:W,this.minY=o.minY<F?o.minY:F,this.maxX=o.maxX>E?o.maxX:E,this.maxY=o.maxY>v?o.maxY:v}addBoundsMask(o,W){const F=o.minX>W.minX?o.minX:W.minX,E=o.minY>W.minY?o.minY:W.minY,v=o.maxX<W.maxX?o.maxX:W.maxX,a=o.maxY<W.maxY?o.maxY:W.maxY;if(F<=v&&E<=a){const o=this.minX,W=this.minY,G=this.maxX,L=this.maxY;this.minX=F<o?F:o,this.minY=E<W?E:W,this.maxX=v>G?v:G,this.maxY=a>L?a:L}}addBoundsMatrix(o,W){this.addFrameMatrix(W,o.minX,o.minY,o.maxX,o.maxY)}addBoundsArea(o,W){const F=o.minX>W.x?o.minX:W.x,E=o.minY>W.y?o.minY:W.y,v=o.maxX<W.x+W.width?o.maxX:W.x+W.width,a=o.maxY<W.y+W.height?o.maxY:W.y+W.height;if(F<=v&&E<=a){const o=this.minX,W=this.minY,G=this.maxX,L=this.maxY;this.minX=F<o?F:o,this.minY=E<W?E:W,this.maxX=v>G?v:G,this.maxY=a>L?a:L}}pad(o=0,W=o){this.isEmpty()||(this.minX-=o,this.maxX+=o,this.minY-=W,this.maxY+=W)}addFramePad(o,W,F,E,v,a){o-=v,W-=a,F+=v,E+=a,this.minX=this.minX<o?this.minX:o,this.maxX=this.maxX>F?this.maxX:F,this.minY=this.minY<W?this.minY:W,this.maxY=this.maxY>E?this.maxY:E}}class a extends E.Wp.EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new E.dL,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new v,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(o){const W=Object.keys(o);for(let F=0;F<W.length;++F){const E=W[F];Object.defineProperty(a.prototype,E,Object.getOwnPropertyDescriptor(o,E))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(o,W){return o||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),W||(this._boundsRect||(this._boundsRect=new E.M_),W=this._boundsRect),this._bounds.getRectangle(W)}getLocalBounds(o){var W;o||(this._localBoundsRect||(this._localBoundsRect=new E.M_),o=this._localBoundsRect),this._localBounds||(this._localBounds=new v);const F=this.transform,a=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=null!==(W=null==a?void 0:a.worldAlpha)&&void 0!==W?W:1,this.transform=this._tempDisplayObjectParent.transform;const G=this._bounds,L=this._boundsID;this._bounds=this._localBounds;const U=this.getBounds(!1,o);return this.parent=a,this.transform=F,this._bounds=G,this._bounds.updateID+=this._boundsID-L,U}toGlobal(o,W,F=!1){return F||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(o,W)}toLocal(o,W,F,E){return W&&(o=W.toGlobal(o,F,E)),E||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(o,F)}setParent(o){if(!o||!o.addChild)throw new Error("setParent: Argument must be a Container");return o.addChild(this),o}removeFromParent(){var o;null===(o=this.parent)||void 0===o||o.removeChild(this)}setTransform(o=0,W=0,F=1,E=1,v=0,a=0,G=0,L=0,U=0){return this.position.x=o,this.position.y=W,this.scale.x=F||1,this.scale.y=E||1,this.rotation=v,this.skew.x=a,this.skew.y=G,this.pivot.x=L,this.pivot.y=U,this}destroy(o){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new G),this.tempDisplayObjectParent}enableTempParent(){const o=this.parent;return this.parent=this._tempDisplayObjectParent,o}disableTempParent(o){this.parent=o}get x(){return this.position.x}set x(o){this.transform.position.x=o}get y(){return this.position.y}set y(o){this.transform.position.y=o}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(o){this.transform.position.copyFrom(o)}get scale(){return this.transform.scale}set scale(o){this.transform.scale.copyFrom(o)}get pivot(){return this.transform.pivot}set pivot(o){this.transform.pivot.copyFrom(o)}get skew(){return this.transform.skew}set skew(o){this.transform.skew.copyFrom(o)}get rotation(){return this.transform.rotation}set rotation(o){this.transform.rotation=o}get angle(){return this.transform.rotation*E.bO}set angle(o){this.transform.rotation=o*E.Td}get zIndex(){return this._zIndex}set zIndex(o){this._zIndex=o,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let o=this;do{if(!o.visible)return!1;o=o.parent}while(o);return!0}get mask(){return this._mask}set mask(o){if(this._mask!==o){if(this._mask){const o=this._mask.isMaskData?this._mask.maskObject:this._mask;o&&(o._maskRefCount--,0===o._maskRefCount&&(o.renderable=!0,o.isMask=!1))}if(this._mask=o,this._mask){const o=this._mask.isMaskData?this._mask.maskObject:this._mask;o&&(0===o._maskRefCount&&(o.renderable=!1,o.isMask=!0),o._maskRefCount++)}}}}class G extends a{constructor(){super(...arguments),this.sortDirty=null}}a.prototype.displayObjectUpdateTransform=a.prototype.updateTransform;const L=new E.uq;function U(o,W){return o.zIndex===W.zIndex?o._lastSortedIndex-W._lastSortedIndex:o.zIndex-W.zIndex}const I=class o extends a{constructor(){super(),this.children=[],this.sortableChildren=o.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(o){}addChild(...o){if(o.length>1)for(let W=0;W<o.length;W++)this.addChild(o[W]);else{const W=o[0];W.parent&&W.parent.removeChild(W),W.parent=this,this.sortDirty=!0,W.transform._parentID=-1,this.children.push(W),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",W,this,this.children.length-1),W.emit("added",this)}return o[0]}addChildAt(o,W){if(W<0||W>this.children.length)throw new Error(`${o}addChildAt: The index ${W} supplied is out of bounds ${this.children.length}`);return o.parent&&o.parent.removeChild(o),o.parent=this,this.sortDirty=!0,o.transform._parentID=-1,this.children.splice(W,0,o),this._boundsID++,this.onChildrenChange(W),o.emit("added",this),this.emit("childAdded",o,this,W),o}swapChildren(o,W){if(o===W)return;const F=this.getChildIndex(o),E=this.getChildIndex(W);this.children[F]=W,this.children[E]=o,this.onChildrenChange(F<E?F:E)}getChildIndex(o){const W=this.children.indexOf(o);if(-1===W)throw new Error("The supplied DisplayObject must be a child of the caller");return W}setChildIndex(o,W){if(W<0||W>=this.children.length)throw new Error(`The index ${W} supplied is out of bounds ${this.children.length}`);const F=this.getChildIndex(o);E.Wp.removeItems(this.children,F,1),this.children.splice(W,0,o),this.onChildrenChange(W)}getChildAt(o){if(o<0||o>=this.children.length)throw new Error(`getChildAt: Index (${o}) does not exist.`);return this.children[o]}removeChild(...o){if(o.length>1)for(let W=0;W<o.length;W++)this.removeChild(o[W]);else{const W=o[0],F=this.children.indexOf(W);if(-1===F)return null;W.parent=null,W.transform._parentID=-1,E.Wp.removeItems(this.children,F,1),this._boundsID++,this.onChildrenChange(F),W.emit("removed",this),this.emit("childRemoved",W,this,F)}return o[0]}removeChildAt(o){const W=this.getChildAt(o);return W.parent=null,W.transform._parentID=-1,E.Wp.removeItems(this.children,o,1),this._boundsID++,this.onChildrenChange(o),W.emit("removed",this),this.emit("childRemoved",W,this,o),W}removeChildren(o=0,W=this.children.length){const F=o,E=W-F;let v;if(E>0&&E<=W){v=this.children.splice(F,E);for(let o=0;o<v.length;++o)v[o].parent=null,v[o].transform&&(v[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(o);for(let o=0;o<v.length;++o)v[o].emit("removed",this),this.emit("childRemoved",v[o],this,o);return v}if(0===E&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let o=!1;for(let W=0,F=this.children.length;W<F;++W){const F=this.children[W];F._lastSortedIndex=W,!o&&0!==F.zIndex&&(o=!0)}o&&this.children.length>1&&this.children.sort(U),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let o=0,W=this.children.length;o<W;++o){const W=this.children[o];W.visible&&W.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let o=0;o<this.children.length;o++){const W=this.children[o];if(W.visible&&W.renderable)if(W.calculateBounds(),W._mask){const o=W._mask.isMaskData?W._mask.maskObject:W._mask;o?(o.calculateBounds(),this._bounds.addBoundsMask(W._bounds,o._bounds)):this._bounds.addBounds(W._bounds)}else W.filterArea?this._bounds.addBoundsArea(W._bounds,W.filterArea):this._bounds.addBounds(W._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(o,W=!1){const F=super.getLocalBounds(o);if(!W)for(let o=0,W=this.children.length;o<W;++o){const W=this.children[o];W.visible&&W.updateTransform()}return F}_calculateBounds(){}_renderWithCulling(W){const F=W.renderTexture.sourceFrame;if(!(F.width>0&&F.height>0))return;let E,v;this.cullArea?(E=this.cullArea,v=this.worldTransform):this._render!==o.prototype._render&&(E=this.getBounds(!0));const a=W.projection.transform;if(a&&(v?(v=L.copyFrom(v),v.prepend(a)):v=a),E&&F.intersects(E,v))this._render(W);else if(this.cullArea)return;for(let o=0,F=this.children.length;o<F;++o){const F=this.children[o],E=F.cullable;F.cullable=E||!this.cullArea,F.render(W),F.cullable=E}}render(o){var W;if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||(null===(W=this.filters)||void 0===W?void 0:W.length))this.renderAdvanced(o);else if(this.cullable)this._renderWithCulling(o);else{this._render(o);for(let W=0,F=this.children.length;W<F;++W)this.children[W].render(o)}}renderAdvanced(o){var W,F,v;const a=this.filters,G=this._mask;if(a){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let o=0;o<a.length;o++)a[o].enabled&&this._enabledFilters.push(a[o])}const L=a&&(null===(W=this._enabledFilters)||void 0===W?void 0:W.length)||G&&(!G.isMaskData||G.enabled&&(G.autoDetect||G.type!==E.vg.NONE));if(L&&o.batch.flush(),a&&(null===(F=this._enabledFilters)||void 0===F?void 0:F.length)&&o.filter.push(this,this._enabledFilters),G&&o.mask.push(this,this._mask),this.cullable)this._renderWithCulling(o);else{this._render(o);for(let W=0,F=this.children.length;W<F;++W)this.children[W].render(o)}L&&o.batch.flush(),G&&o.mask.pop(this),a&&(null===(v=this._enabledFilters)||void 0===v?void 0:v.length)&&o.filter.pop()}_render(o){}destroy(o){super.destroy(),this.sortDirty=!1;const W="boolean"==typeof o?o:null==o?void 0:o.children,F=this.removeChildren(0,this.children.length);if(W)for(let W=0;W<F.length;++W)F[W].destroy(o)}get width(){return this.scale.x*this.getLocalBounds().width}set width(o){const W=this.getLocalBounds().width;this.scale.x=0!==W?o/W:1,this._width=o}get height(){return this.scale.y*this.getLocalBounds().height}set height(o){const W=this.getLocalBounds().height;this.scale.y=0!==W?o/W:1,this._height=o}};I.defaultSortableChildren=!1;let l=I;l.prototype.containerUpdateTransform=l.prototype.updateTransform,Object.defineProperties(E.W0,{SORTABLE_CHILDREN:{get:()=>l.defaultSortableChildren,set(o){E.Wp.deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),l.defaultSortableChildren=o}}})},738637:(o,W,F)=>{F.d(W,{A:()=>v,X:()=>L});var E,v=((E=v||{}).Renderer="renderer",E.Application="application",E.RendererSystem="renderer-webgl-system",E.RendererPlugin="renderer-webgl-plugin",E.CanvasRendererSystem="renderer-canvas-system",E.CanvasRendererPlugin="renderer-canvas-plugin",E.Asset="asset",E.LoadParser="load-parser",E.ResolveParser="resolve-parser",E.CacheParser="cache-parser",E.DetectionParser="detection-parser",E);const a=o=>{if("function"==typeof o||"object"==typeof o&&o.extension){if(!o.extension)throw new Error("Extension class must have an extension object");o={..."object"!=typeof o.extension?{type:o.extension}:o.extension,ref:o}}if("object"!=typeof o)throw new Error("Invalid extension type");return"string"==typeof(o={...o}).type&&(o.type=[o.type]),o},G=(o,W)=>{var F;return null!==(F=a(o).priority)&&void 0!==F?F:W},L={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...o){return o.map(a).forEach((o=>{o.type.forEach((W=>{var F,E;return null===(E=(F=this._removeHandlers)[W])||void 0===E?void 0:E.call(F,o)}))})),this},add(...o){return o.map(a).forEach((o=>{o.type.forEach((W=>{const F=this._addHandlers,E=this._queue;F[W]?F[W](o):(E[W]=E[W]||[],E[W].push(o))}))})),this},handle(o,W,F){const E=this._addHandlers,v=this._removeHandlers;if(E[o]||v[o])throw new Error(`Extension type ${o} already has a handler`);E[o]=W,v[o]=F;const a=this._queue;return a[o]&&(a[o].forEach((o=>W(o))),delete a[o]),this},handleByMap(o,W){return this.handle(o,(o=>{W[o.name]=o.ref}),(o=>{delete W[o.name]}))},handleByList(o,W,F=-1){return this.handle(o,(o=>{W.includes(o.ref)||(W.push(o.ref),W.sort(((o,W)=>G(W,F)-G(o,F))))}),(o=>{const F=W.indexOf(o.ref);-1!==F&&W.splice(F,1)}))}}},246638:(o,W,F)=>{F.d(W,{Z:()=>v});var E=F(316197);class v extends E.dJ{constructor(o=1){super(E.MT,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}),this.alpha=o}get alpha(){return this.uniforms.uAlpha}set alpha(o){this.uniforms.uAlpha=o}}},528176:(o,W,F)=>{F.d(W,{e:()=>L,H:()=>G});var E=F(316197);const v={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},a=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");class G extends E.dJ{constructor(o,W=8,F=4,G=E.dJ.defaultResolution,L=5){const U=function(o,W){const F=Math.ceil(o/2);let E,v="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",a="";E=W?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let W=0;W<o;W++){let o=E.replace("%index%",W.toString());o=o.replace("%sampleIndex%",W-(F-1)+".0"),a+=o,a+="\n"}return v=v.replace("%blur%",a),v=v.replace("%size%",o.toString()),v}(L,o),I=function(o){const W=v[o],F=W.length;let E,G=a,L="";for(let v=0;v<o;v++){let a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",v.toString());E=v,v>=F&&(E=o-v-1),a=a.replace("%value%",W[E].toString()),L+=a,L+="\n"}return G=G.replace("%blur%",L),G=G.replace("%size%",o.toString()),G}(L);super(U,I),this.horizontal=o,this.resolution=G,this._quality=0,this.quality=F,this.blur=W}apply(o,W,F,v){if(F?this.horizontal?this.uniforms.strength=1/F.width*(F.width/W.width):this.uniforms.strength=1/F.height*(F.height/W.height):this.horizontal?this.uniforms.strength=1/o.renderer.width*(o.renderer.width/W.width):this.uniforms.strength=1/o.renderer.height*(o.renderer.height/W.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)o.applyFilter(this,W,F,v);else{const a=o.getFilterTexture(),G=o.renderer;let L=W,U=a;this.state.blend=!1,o.applyFilter(this,L,U,E.fr.CLEAR);for(let W=1;W<this.passes-1;W++){o.bindAndClear(L,E.fr.BLIT),this.uniforms.uSampler=U;const W=U;U=L,L=W,G.shader.bind(this),G.geometry.draw(5)}this.state.blend=!0,o.applyFilter(this,U,F,v),o.returnFilterTexture(a)}}get blur(){return this.strength}set blur(o){this.padding=1+2*Math.abs(o),this.strength=o}get quality(){return this._quality}set quality(o){this._quality=o,this.passes=o}}class L extends E.dJ{constructor(o=8,W=4,F=E.dJ.defaultResolution,v=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new G(!0,o,W,F,v),this.blurYFilter=new G(!1,o,W,F,v),this.resolution=F,this.quality=W,this.blur=o,this.repeatEdgePixels=!1}apply(o,W,F,v){const a=Math.abs(this.blurXFilter.strength),G=Math.abs(this.blurYFilter.strength);if(a&&G){const a=o.getFilterTexture();this.blurXFilter.apply(o,W,a,E.fr.CLEAR),this.blurYFilter.apply(o,a,F,v),o.returnFilterTexture(a)}else G?this.blurYFilter.apply(o,W,F,v):this.blurXFilter.apply(o,W,F,v)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}get blur(){return this.blurXFilter.blur}set blur(o){this.blurXFilter.blur=this.blurYFilter.blur=o,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(o){this.blurXFilter.quality=this.blurYFilter.quality=o}get blurX(){return this.blurXFilter.blur}set blurX(o){this.blurXFilter.blur=o,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(o){this.blurYFilter.blur=o,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(o){this.blurYFilter.blendMode=o}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(o){this._repeatEdgePixels=o,this.updatePadding()}}},698539:(o,W,F)=>{F.d(W,{N:()=>v});var E=F(316197);class v extends E.dJ{constructor(){const o={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(E.Eo,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",o),this.alpha=1}_loadMatrix(o,W=!1){let F=o;W&&(this._multiply(F,this.uniforms.m,o),F=this._colorMatrix(F)),this.uniforms.m=F}_multiply(o,W,F){return o[0]=W[0]*F[0]+W[1]*F[5]+W[2]*F[10]+W[3]*F[15],o[1]=W[0]*F[1]+W[1]*F[6]+W[2]*F[11]+W[3]*F[16],o[2]=W[0]*F[2]+W[1]*F[7]+W[2]*F[12]+W[3]*F[17],o[3]=W[0]*F[3]+W[1]*F[8]+W[2]*F[13]+W[3]*F[18],o[4]=W[0]*F[4]+W[1]*F[9]+W[2]*F[14]+W[3]*F[19]+W[4],o[5]=W[5]*F[0]+W[6]*F[5]+W[7]*F[10]+W[8]*F[15],o[6]=W[5]*F[1]+W[6]*F[6]+W[7]*F[11]+W[8]*F[16],o[7]=W[5]*F[2]+W[6]*F[7]+W[7]*F[12]+W[8]*F[17],o[8]=W[5]*F[3]+W[6]*F[8]+W[7]*F[13]+W[8]*F[18],o[9]=W[5]*F[4]+W[6]*F[9]+W[7]*F[14]+W[8]*F[19]+W[9],o[10]=W[10]*F[0]+W[11]*F[5]+W[12]*F[10]+W[13]*F[15],o[11]=W[10]*F[1]+W[11]*F[6]+W[12]*F[11]+W[13]*F[16],o[12]=W[10]*F[2]+W[11]*F[7]+W[12]*F[12]+W[13]*F[17],o[13]=W[10]*F[3]+W[11]*F[8]+W[12]*F[13]+W[13]*F[18],o[14]=W[10]*F[4]+W[11]*F[9]+W[12]*F[14]+W[13]*F[19]+W[14],o[15]=W[15]*F[0]+W[16]*F[5]+W[17]*F[10]+W[18]*F[15],o[16]=W[15]*F[1]+W[16]*F[6]+W[17]*F[11]+W[18]*F[16],o[17]=W[15]*F[2]+W[16]*F[7]+W[17]*F[12]+W[18]*F[17],o[18]=W[15]*F[3]+W[16]*F[8]+W[17]*F[13]+W[18]*F[18],o[19]=W[15]*F[4]+W[16]*F[9]+W[17]*F[14]+W[18]*F[19]+W[19],o}_colorMatrix(o){const W=new Float32Array(o);return W[4]/=255,W[9]/=255,W[14]/=255,W[19]/=255,W}brightness(o,W){const F=[o,0,0,0,0,0,o,0,0,0,0,0,o,0,0,0,0,0,1,0];this._loadMatrix(F,W)}tint(o,W){const[F,v,a]=E.Q1.shared.setValue(o).toArray(),G=[F,0,0,0,0,0,v,0,0,0,0,0,a,0,0,0,0,0,1,0];this._loadMatrix(G,W)}greyscale(o,W){const F=[o,o,o,0,0,o,o,o,0,0,o,o,o,0,0,0,0,0,1,0];this._loadMatrix(F,W)}blackAndWhite(o){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],o)}hue(o,W){o=(o||0)/180*Math.PI;const F=Math.cos(o),E=Math.sin(o),v=1/3,a=(0,Math.sqrt)(v),G=[F+(1-F)*v,v*(1-F)-a*E,v*(1-F)+a*E,0,0,v*(1-F)+a*E,F+v*(1-F),v*(1-F)-a*E,0,0,v*(1-F)-a*E,v*(1-F)+a*E,F+v*(1-F),0,0,0,0,0,1,0];this._loadMatrix(G,W)}contrast(o,W){const F=(o||0)+1,E=-.5*(F-1),v=[F,0,0,0,E,0,F,0,0,E,0,0,F,0,E,0,0,0,1,0];this._loadMatrix(v,W)}saturate(o=0,W){const F=2*o/3+1,E=-.5*(F-1),v=[F,E,E,0,0,E,F,E,0,0,E,E,F,0,0,0,0,0,1,0];this._loadMatrix(v,W)}desaturate(){this.saturate(-1)}negative(o){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],o)}sepia(o){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],o)}technicolor(o){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],o)}polaroid(o){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],o)}toBGR(o){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],o)}kodachrome(o){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],o)}browni(o){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],o)}vintage(o){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],o)}colorTone(o,W,F,v,a){o=o||.2,W=W||.15,F=F||16770432,v=v||3375104;const G=E.Q1.shared,[L,U,I]=G.setValue(F).toArray(),[l,h,p]=G.setValue(v).toArray(),g=[.3,.59,.11,0,0,L,U,I,o,0,l,h,p,W,0,L-l,U-h,I-p,0,0];this._loadMatrix(g,a)}night(o,W){const F=[-2*(o=o||.1),-o,0,0,0,-o,0,o,0,0,0,o,2*o,0,0,0,0,0,1,0];this._loadMatrix(F,W)}predator(o,W){const F=[11.224130630493164*o,-4.794486999511719*o,-2.8746118545532227*o,0*o,.40342438220977783*o,-3.6330697536468506*o,9.193157196044922*o,-2.951810836791992*o,0*o,-1.316135048866272*o,-3.2184197902679443*o,-4.2375030517578125*o,7.476448059082031*o,0*o,.8044459223747253*o,0,0,0,1,0];this._loadMatrix(F,W)}lsd(o){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],o)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(o){this.uniforms.m=o}get alpha(){return this.uniforms.uAlpha}set alpha(o){this.uniforms.uAlpha=o}}v.prototype.grayscale=v.prototype.greyscale},132565:(o,W,F)=>{F.d(W,{U:()=>v});var E=F(316197);class v extends E.dJ{constructor(o,W){const F=new E.uq;o.renderable=!1,super("attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:o._texture,filterMatrix:F,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=o,this.maskMatrix=F,null==W&&(W=20),this.scale=new E.bR(W,W)}apply(o,W,F,E){this.uniforms.filterMatrix=o.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const v=this.maskSprite.worldTransform,a=Math.sqrt(v.a*v.a+v.b*v.b),G=Math.sqrt(v.c*v.c+v.d*v.d);0!==a&&0!==G&&(this.uniforms.rotation[0]=v.a/a,this.uniforms.rotation[1]=v.b/a,this.uniforms.rotation[2]=v.c/G,this.uniforms.rotation[3]=v.d/G),o.applyFilter(this,W,F,E)}get map(){return this.uniforms.mapSampler}set map(o){this.uniforms.mapSampler=o}}},476:(o,W,F)=>{var E=F(688172),v=F(316197),a=Object.defineProperty,G=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,I=(o,W,F)=>W in o?a(o,W,{enumerable:!0,configurable:!0,writable:!0,value:F}):o[W]=F,l=(o,W)=>{for(var F in W||(W={}))L.call(W,F)&&I(o,F,W[F]);if(G)for(var F of G(W))U.call(W,F)&&I(o,F,W[F]);return o};const h=class extends v.dJ{constructor(o){super(),this.angle=45,this._distance=5,this._resolution=v.W0.FILTER_RESOLUTION;const W=o?l(l({},h.defaults),o):h.defaults,{kernels:F,blur:a,quality:G,pixelSize:L,resolution:U}=W;this._offset=new v.oA(this._updatePadding,this),this._tintFilter=new v.dJ("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform vec3 color;\n\nuniform vec2 shift;\nuniform vec4 inputSize;\n\nvoid main(void){\n    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);\n\n    // Premultiply alpha\n    sample.rgb = color.rgb * sample.a;\n\n    // alpha user alpha\n    sample *= alpha;\n\n    gl_FragColor = sample;\n}"),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.uniforms.shift=this._offset,this._tintFilter.resolution=U,this._blurFilter=F?new E.Q(F):new E.Q(a,G),this.pixelSize=L,this.resolution=U;const{shadowOnly:I,rotation:p,distance:g,offset:f,alpha:A,color:k}=W;this.shadowOnly=I,void 0!==p&&void 0!==g?(this.rotation=p,this.distance=g):this.offset=f,this.alpha=A,this.color=k}apply(o,W,F,E){const v=o.getFilterTexture();this._tintFilter.apply(o,W,v,1),this._blurFilter.apply(o,v,F,E),!0!==this.shadowOnly&&o.applyFilter(this,W,F,0),o.returnFilterTexture(v)}_updatePadding(){const o=Math.max(Math.abs(this._offset.x),Math.abs(this._offset.y));this.padding=o+2*this.blur}_updateShift(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))}set offset(o){this._offset.copyFrom(o),this._updatePadding()}get offset(){return this._offset}get resolution(){return this._resolution}set resolution(o){this._resolution=o,this._tintFilter&&(this._tintFilter.resolution=o),this._blurFilter&&(this._blurFilter.resolution=o)}get distance(){return this._distance}set distance(o){v.Wp.deprecation("5.3.0","DropShadowFilter distance is deprecated, use offset"),this._distance=o,this._updatePadding(),this._updateShift()}get rotation(){return this.angle/v.Td}set rotation(o){v.Wp.deprecation("5.3.0","DropShadowFilter rotation is deprecated, use offset"),this.angle=o*v.Td,this._updateShift()}get alpha(){return this._tintFilter.uniforms.alpha}set alpha(o){this._tintFilter.uniforms.alpha=o}get color(){return v.Wp.rgb2hex(this._tintFilter.uniforms.color)}set color(o){v.Wp.hex2rgb(o,this._tintFilter.uniforms.color)}get kernels(){return this._blurFilter.kernels}set kernels(o){this._blurFilter.kernels=o}get blur(){return this._blurFilter.blur}set blur(o){this._blurFilter.blur=o,this._updatePadding()}get quality(){return this._blurFilter.quality}set quality(o){this._blurFilter.quality=o}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(o){this._blurFilter.pixelSize=o}};h.defaults={offset:{x:4,y:4},color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:v.W0.FILTER_RESOLUTION}},614812:(o,W,F)=>{var E=F(316197);const v=class extends E.dJ{constructor(o){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","// precision highp float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\nuniform float aspect;\n\nuniform sampler2D displacementMap;\nuniform float offset;\nuniform float sinDir;\nuniform float cosDir;\nuniform int fillMode;\n\nuniform float seed;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nconst int TRANSPARENT = 0;\nconst int ORIGINAL = 1;\nconst int LOOP = 2;\nconst int CLAMP = 3;\nconst int MIRROR = 4;\n\nvoid main(void)\n{\n    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;\n\n    if (coord.x > 1.0 || coord.y > 1.0) {\n        return;\n    }\n\n    float cx = coord.x - 0.5;\n    float cy = (coord.y - 0.5) * aspect;\n    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;\n\n    // displacementMap: repeat\n    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);\n\n    // displacementMap: mirror\n    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);\n\n    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));\n\n    float displacement = (dc.r - dc.g) * (offset / filterArea.x);\n\n    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);\n\n    if (fillMode == CLAMP) {\n        coord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    } else {\n        if( coord.x > filterClamp.z ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x -= filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x = filterClamp.z * 2.0 - coord.x;\n            }\n        } else if( coord.x < filterClamp.x ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x += filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x *= -filterClamp.z;\n            }\n        }\n\n        if( coord.y > filterClamp.w ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y -= filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y = filterClamp.w * 2.0 - coord.y;\n            }\n        } else if( coord.y < filterClamp.y ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y += filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y *= -filterClamp.w;\n            }\n        }\n    }\n\n    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;\n    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;\n    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;\n    gl_FragColor.a = texture2D(uSampler, coord).a;\n}\n"),this.offset=100,this.fillMode=v.TRANSPARENT,this.average=!1,this.seed=0,this.minSize=8,this.sampleSize=512,this._slices=0,this._offsets=new Float32Array(1),this._sizes=new Float32Array(1),this._direction=-1,this.uniforms.dimensions=new Float32Array(2),this._canvas=document.createElement("canvas"),this._canvas.width=4,this._canvas.height=this.sampleSize,this.texture=E.gP.from(this._canvas,{scaleMode:E.M6.NEAREST}),Object.assign(this,v.defaults,o)}apply(o,W,F,E){const{width:v,height:a}=W.filterFrame;this.uniforms.dimensions[0]=v,this.uniforms.dimensions[1]=a,this.uniforms.aspect=a/v,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,o.applyFilter(this,W,F,E)}_randomizeSizes(){const o=this._sizes,W=this._slices-1,F=this.sampleSize,E=Math.min(this.minSize/F,.9/this._slices);if(this.average){const F=this._slices;let v=1;for(let a=0;a<W;a++){const W=v/(F-a),G=Math.max(W*(1-.6*Math.random()),E);o[a]=G,v-=G}o[W]=v}else{let F=1;const v=Math.sqrt(1/this._slices);for(let a=0;a<W;a++){const W=Math.max(v*F*Math.random(),E);o[a]=W,F-=W}o[W]=F}this.shuffle()}shuffle(){const o=this._sizes;for(let W=this._slices-1;W>0;W--){const F=Math.random()*W|0,E=o[W];o[W]=o[F],o[F]=E}}_randomizeOffsets(){for(let o=0;o<this._slices;o++)this._offsets[o]=Math.random()*(Math.random()<.5?-1:1)}refresh(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()}redraw(){const o=this.sampleSize,W=this.texture,F=this._canvas.getContext("2d");F.clearRect(0,0,8,o);let E,v=0;for(let W=0;W<this._slices;W++){E=Math.floor(256*this._offsets[W]);const a=this._sizes[W]*o,G=E>0?E:0,L=E<0?-E:0;F.fillStyle=`rgba(${G}, ${L}, 0, 1)`,F.fillRect(0,0|v,o,a+1|0),v+=a}W.baseTexture.update(),this.uniforms.displacementMap=W}set sizes(o){const W=Math.min(this._slices,o.length);for(let F=0;F<W;F++)this._sizes[F]=o[F]}get sizes(){return this._sizes}set offsets(o){const W=Math.min(this._slices,o.length);for(let F=0;F<W;F++)this._offsets[F]=o[F]}get offsets(){return this._offsets}get slices(){return this._slices}set slices(o){this._slices!==o&&(this._slices=o,this.uniforms.slices=o,this._sizes=this.uniforms.slicesWidth=new Float32Array(o),this._offsets=this.uniforms.slicesOffset=new Float32Array(o),this.refresh())}get direction(){return this._direction}set direction(o){if(this._direction===o)return;this._direction=o;const W=o*E.Td;this.uniforms.sinDir=Math.sin(W),this.uniforms.cosDir=Math.cos(W)}get red(){return this.uniforms.red}set red(o){this.uniforms.red=o}get green(){return this.uniforms.green}set green(o){this.uniforms.green=o}get blue(){return this.uniforms.blue}set blue(o){this.uniforms.blue=o}destroy(){var o;null==(o=this.texture)||o.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null}};let a=v;a.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},a.TRANSPARENT=0,a.ORIGINAL=1,a.LOOP=2,a.CLAMP=3,a.MIRROR=4},577184:(o,W,F)=>{var E=F(316197),v="varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float outerStrength;\nuniform float innerStrength;\n\nuniform vec4 glowColor;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform bool knockout;\nuniform float alpha;\n\nconst float PI = 3.14159265358979323846264;\n\nconst float DIST = __DIST__;\nconst float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);\nconst float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);\n\nconst float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n\n    float totalAlpha = 0.0;\n\n    vec2 direction;\n    vec2 displaced;\n    vec4 curColor;\n\n    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {\n       direction = vec2(cos(angle), sin(angle)) * px;\n\n       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {\n           displaced = clamp(vTextureCoord + direction * \n                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);\n\n           curColor = texture2D(uSampler, displaced);\n\n           totalAlpha += (DIST - curDistance) * curColor.a;\n       }\n    }\n    \n    curColor = texture2D(uSampler, vTextureCoord);\n\n    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);\n\n    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;\n    float innerGlowStrength = min(1.0, innerGlowAlpha);\n    \n    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);\n\n    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);\n    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);\n\n    if (knockout) {\n      float resultAlpha = (outerGlowAlpha + innerGlowAlpha) * alpha;\n      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);\n    }\n    else {\n      vec4 outerGlowColor = outerGlowStrength * glowColor.rgba * alpha;\n      gl_FragColor = innerColor + outerGlowColor;\n    }\n}\n";const a=class extends E.dJ{constructor(o){const W=Object.assign({},a.defaults,o),{outerStrength:F,innerStrength:E,color:G,knockout:L,quality:U,alpha:I}=W,l=Math.round(W.distance);super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",v.replace(/__ANGLE_STEP_SIZE__/gi,`${(1/U/l).toFixed(7)}`).replace(/__DIST__/gi,`${l.toFixed(0)}.0`)),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.uniforms.alpha=1,Object.assign(this,{color:G,outerStrength:F,innerStrength:E,padding:l,knockout:L,alpha:I})}get color(){return E.Wp.rgb2hex(this.uniforms.glowColor)}set color(o){E.Wp.hex2rgb(o,this.uniforms.glowColor)}get outerStrength(){return this.uniforms.outerStrength}set outerStrength(o){this.uniforms.outerStrength=o}get innerStrength(){return this.uniforms.innerStrength}set innerStrength(o){this.uniforms.innerStrength=o}get knockout(){return this.uniforms.knockout}set knockout(o){this.uniforms.knockout=o}get alpha(){return this.uniforms.alpha}set alpha(o){this.uniforms.alpha=o}};a.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1,alpha:1}},688172:(o,W,F)=>{F.d(W,{Q:()=>v});var E=F(316197);class v extends E.dJ{constructor(o=4,W=3,F=!1){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",F?"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}\n":"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}"),this._kernels=[],this._blur=4,this._quality=3,this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new E.bR,this.pixelSize=1,this._clamp=F,Array.isArray(o)?this.kernels=o:(this._blur=o,this.quality=W)}apply(o,W,F,E){const v=this._pixelSize.x/W._frame.width,a=this._pixelSize.y/W._frame.height;let G;if(1===this._quality||0===this._blur)G=this._kernels[0]+.5,this.uniforms.uOffset[0]=G*v,this.uniforms.uOffset[1]=G*a,o.applyFilter(this,W,F,E);else{const L=o.getFilterTexture();let U,I=W,l=L;const h=this._quality-1;for(let W=0;W<h;W++)G=this._kernels[W]+.5,this.uniforms.uOffset[0]=G*v,this.uniforms.uOffset[1]=G*a,o.applyFilter(this,I,l,1),U=I,I=l,l=U;G=this._kernels[h]+.5,this.uniforms.uOffset[0]=G*v,this.uniforms.uOffset[1]=G*a,o.applyFilter(this,I,F,E),o.returnFilterTexture(L)}}_updatePadding(){this.padding=Math.ceil(this._kernels.reduce(((o,W)=>o+W+.5),0))}_generateKernels(){const o=this._blur,W=this._quality,F=[o];if(o>0){let E=o;const v=o/W;for(let o=1;o<W;o++)E-=v,F.push(E)}this._kernels=F,this._updatePadding()}get kernels(){return this._kernels}set kernels(o){Array.isArray(o)&&o.length>0?(this._kernels=o,this._quality=o.length,this._blur=Math.max(...o)):(this._kernels=[0],this._quality=1)}get clamp(){return this._clamp}set pixelSize(o){"number"==typeof o?(this._pixelSize.x=o,this._pixelSize.y=o):Array.isArray(o)?(this._pixelSize.x=o[0],this._pixelSize.y=o[1]):o instanceof E.bR?(this._pixelSize.x=o.x,this._pixelSize.y=o.y):(this._pixelSize.x=1,this._pixelSize.y=1)}get pixelSize(){return this._pixelSize}get quality(){return this._quality}set quality(o){this._quality=Math.max(1,Math.round(o)),this._generateKernels()}get blur(){return this._blur}set blur(o){this._blur=o,this._generateKernels()}}},543068:(o,W,F)=>{F(316197).dJ},702328:(o,W,F)=>{var E=F(316197),v="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterClamp;\n\nuniform float uAlpha;\nuniform vec2 uThickness;\nuniform vec4 uColor;\nuniform bool uKnockout;\n\nconst float DOUBLE_PI = 2. * 3.14159265358979323846264;\nconst float ANGLE_STEP = ${angleStep};\n\nfloat outlineMaxAlphaAtPos(vec2 pos) {\n    if (uThickness.x == 0. || uThickness.y == 0.) {\n        return 0.;\n    }\n\n    vec4 displacedColor;\n    vec2 displacedPos;\n    float maxAlpha = 0.;\n\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ANGLE_STEP) {\n        displacedPos.x = vTextureCoord.x + uThickness.x * cos(angle);\n        displacedPos.y = vTextureCoord.y + uThickness.y * sin(angle);\n        displacedColor = texture2D(uSampler, clamp(displacedPos, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, displacedColor.a);\n    }\n\n    return maxAlpha;\n}\n\nvoid main(void) {\n    vec4 sourceColor = texture2D(uSampler, vTextureCoord);\n    vec4 contentColor = sourceColor * float(!uKnockout);\n    float outlineAlpha = uAlpha * outlineMaxAlphaAtPos(vTextureCoord.xy) * (1.-sourceColor.a);\n    vec4 outlineColor = vec4(vec3(uColor) * outlineAlpha, outlineAlpha);\n    gl_FragColor = contentColor + outlineColor;\n}\n";const a=class extends E.dJ{constructor(o=1,W=0,F=.1,E=1,G=!1){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",v.replace(/\$\{angleStep\}/,a.getAngleStep(F))),this._thickness=1,this._alpha=1,this._knockout=!1,this.uniforms.uThickness=new Float32Array([0,0]),this.uniforms.uColor=new Float32Array([0,0,0,1]),this.uniforms.uAlpha=E,this.uniforms.uKnockout=G,Object.assign(this,{thickness:o,color:W,quality:F,alpha:E,knockout:G})}static getAngleStep(o){const W=Math.max(o*a.MAX_SAMPLES,a.MIN_SAMPLES);return(2*Math.PI/W).toFixed(7)}apply(o,W,F,E){this.uniforms.uThickness[0]=this._thickness/W._frame.width,this.uniforms.uThickness[1]=this._thickness/W._frame.height,this.uniforms.uAlpha=this._alpha,this.uniforms.uKnockout=this._knockout,o.applyFilter(this,W,F,E)}get alpha(){return this._alpha}set alpha(o){this._alpha=o}get color(){return E.Wp.rgb2hex(this.uniforms.uColor)}set color(o){E.Wp.hex2rgb(o,this.uniforms.uColor)}get knockout(){return this._knockout}set knockout(o){this._knockout=o}get thickness(){return this._thickness}set thickness(o){this._thickness=o,this.padding=o}};let G=a;G.MIN_SAMPLES=1,G.MAX_SAMPLES=100},914712:(o,W,F)=>{var E=F(316197);const v=class extends E.dJ{constructor(o){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nuniform bool mirror;\nuniform float boundary;\nuniform vec2 amplitude;\nuniform vec2 waveLength;\nuniform vec2 alpha;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    if (coord.y < boundary) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    float k = (coord.y - boundary) / (1. - boundary + 0.0001);\n    float areaY = boundary * dimensions.y / filterArea.y;\n    float v = areaY + areaY - vTextureCoord.y;\n    float y = mirror ? v : vTextureCoord.y;\n\n    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;\n    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;\n    float _alpha = (alpha.y - alpha.x) * k + alpha.x;\n\n    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;\n    x = clamp(x, filterClamp.x, filterClamp.z);\n\n    vec4 color = texture2D(uSampler, vec2(x, y));\n\n    gl_FragColor = color * _alpha;\n}\n"),this.time=0,this.uniforms.amplitude=new Float32Array(2),this.uniforms.waveLength=new Float32Array(2),this.uniforms.alpha=new Float32Array(2),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,v.defaults,o)}apply(o,W,F,E){var v,a;this.uniforms.dimensions[0]=null==(v=W.filterFrame)?void 0:v.width,this.uniforms.dimensions[1]=null==(a=W.filterFrame)?void 0:a.height,this.uniforms.time=this.time,o.applyFilter(this,W,F,E)}set mirror(o){this.uniforms.mirror=o}get mirror(){return this.uniforms.mirror}set boundary(o){this.uniforms.boundary=o}get boundary(){return this.uniforms.boundary}set amplitude(o){this.uniforms.amplitude[0]=o[0],this.uniforms.amplitude[1]=o[1]}get amplitude(){return this.uniforms.amplitude}set waveLength(o){this.uniforms.waveLength[0]=o[0],this.uniforms.waveLength[1]=o[1]}get waveLength(){return this.uniforms.waveLength}set alpha(o){this.uniforms.alpha[0]=o[0],this.uniforms.alpha[1]=o[1]}get alpha(){return this.uniforms.alpha}};v.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0}},689800:(o,W,F)=>{var E=F(316197);const v=class extends E.dJ{constructor(o=[0,0],W,F=0){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nuniform vec2 center;\n\nuniform float amplitude;\nuniform float wavelength;\n// uniform float power;\nuniform float brightness;\nuniform float speed;\nuniform float radius;\n\nuniform float time;\n\nconst float PI = 3.14159;\n\nvoid main()\n{\n    float halfWavelength = wavelength * 0.5 / filterArea.x;\n    float maxRadius = radius / filterArea.x;\n    float currentRadius = time * speed / filterArea.x;\n\n    float fade = 1.0;\n\n    if (maxRadius > 0.0) {\n        if (currentRadius > maxRadius) {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);\n    }\n\n    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);\n    dir.y *= filterArea.y / filterArea.x;\n    float dist = length(dir);\n\n    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    vec2 diffUV = normalize(dir);\n\n    float diff = (dist - currentRadius) / halfWavelength;\n\n    float p = 1.0 - pow(abs(diff), 2.0);\n\n    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );\n    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );\n\n    vec2 offset = diffUV * powDiff / filterArea.xy;\n\n    // Do clamp :\n    vec2 coord = vTextureCoord + offset;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    // No clamp :\n    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);\n\n    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;\n\n    gl_FragColor = color;\n}\n"),this.center=o,Object.assign(this,v.defaults,W),this.time=F}apply(o,W,F,E){this.uniforms.time=this.time,o.applyFilter(this,W,F,E)}get center(){return this.uniforms.center}set center(o){this.uniforms.center=o}get amplitude(){return this.uniforms.amplitude}set amplitude(o){this.uniforms.amplitude=o}get wavelength(){return this.uniforms.wavelength}set wavelength(o){this.uniforms.wavelength=o}get brightness(){return this.uniforms.brightness}set brightness(o){this.uniforms.brightness=o}get speed(){return this.uniforms.speed}set speed(o){this.uniforms.speed=o}get radius(){return this.uniforms.radius}set radius(o){this.uniforms.radius=o}};v.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1}},412508:(o,W,F)=>{var E=F(316197),v="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uCenter;\nuniform float uStrength;\nuniform float uInnerRadius;\nuniform float uRadius;\n\nconst float MAX_KERNEL_SIZE = ${maxKernelSize};\n\n// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand(vec2 co, float seed) {\n    const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);\n    return fract(sin(sn) * c + seed);\n}\n\nvoid main() {\n\n    float minGradient = uInnerRadius * 0.3;\n    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;\n\n    float gradient = uRadius * 0.3;\n    float radius = (uRadius - gradient * 0.5) / filterArea.x;\n\n    float countLimit = MAX_KERNEL_SIZE;\n\n    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);\n    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));\n\n    float strength = uStrength;\n\n    float delta = 0.0;\n    float gap;\n    if (dist < innerRadius) {\n        delta = innerRadius - dist;\n        gap = minGradient;\n    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\n        delta = dist - radius;\n        gap = gradient;\n    }\n\n    if (delta > 0.0) {\n        float normalCount = gap / filterArea.x;\n        delta = (normalCount - delta) / normalCount;\n        countLimit *= delta;\n        strength *= delta;\n        if (countLimit < 1.0)\n        {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n    }\n\n    // randomize the lookup values to hide the fixed number of samples\n    float offset = rand(vTextureCoord, 0.0);\n\n    float total = 0.0;\n    vec4 color = vec4(0.0);\n\n    dir *= strength;\n\n    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {\n        float percent = (t + offset) / MAX_KERNEL_SIZE;\n        float weight = 4.0 * (percent - percent * percent);\n        vec2 p = vTextureCoord + dir * percent;\n        vec4 sample = texture2D(uSampler, p);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n\n        if (t > countLimit){\n            break;\n        }\n    }\n\n    color /= total;\n    // switch back from pre-multiplied alpha\n    // color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n",a=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;const U=class extends E.dJ{constructor(o){const W=Object.assign(U.defaults,o),{maxKernelSize:F}=W,E=((o,W)=>{var F={};for(var E in o)G.call(o,E)&&W.indexOf(E)<0&&(F[E]=o[E]);if(null!=o&&a)for(var E of a(o))W.indexOf(E)<0&&L.call(o,E)&&(F[E]=o[E]);return F})(W,["maxKernelSize"]);super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",v.replace("${maxKernelSize}",F.toFixed(1))),Object.assign(this,E)}get center(){return this.uniforms.uCenter}set center(o){this.uniforms.uCenter=o}get strength(){return this.uniforms.uStrength}set strength(o){this.uniforms.uStrength=o}get innerRadius(){return this.uniforms.uInnerRadius}set innerRadius(o){this.uniforms.uInnerRadius=o}get radius(){return this.uniforms.uRadius}set radius(o){(o<0||o===1/0)&&(o=-1),this.uniforms.uRadius=o}};U.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32}},366628:(o,W,F)=>{F.d(W,{A1:()=>d});var E=F(316197);const v={build(o){const W=o.points;let F,v,a,G,L,U;if(o.type===E.HY.CIRC){const W=o.shape;F=W.x,v=W.y,L=U=W.radius,a=G=0}else if(o.type===E.HY.ELIP){const W=o.shape;F=W.x,v=W.y,L=W.width,U=W.height,a=G=0}else{const W=o.shape,E=W.width/2,I=W.height/2;F=W.x+E,v=W.y+I,L=U=Math.max(0,Math.min(W.radius,Math.min(E,I))),a=E-L,G=I-U}if(!(L>=0&&U>=0&&a>=0&&G>=0))return void(W.length=0);const I=Math.ceil(2.3*Math.sqrt(L+U)),l=8*I+(a?4:0)+(G?4:0);if(W.length=l,0===l)return;if(0===I)return W.length=8,W[0]=W[6]=F+a,W[1]=W[3]=v+G,W[2]=W[4]=F-a,void(W[5]=W[7]=v-G);let h=0,p=4*I+(a?2:0)+2,g=p,f=l;{const o=a+L,E=G,U=F+o,I=F-o,l=v+E;if(W[h++]=U,W[h++]=l,W[--p]=l,W[--p]=I,G){const o=v-E;W[g++]=I,W[g++]=o,W[--f]=o,W[--f]=U}}for(let o=1;o<I;o++){const E=Math.PI/2*(o/I),l=a+Math.cos(E)*L,A=G+Math.sin(E)*U,k=F+l,Z=F-l,P=v+A,y=v-A;W[h++]=k,W[h++]=P,W[--p]=P,W[--p]=Z,W[g++]=Z,W[g++]=y,W[--f]=y,W[--f]=k}{const o=G+U,E=F+a,L=F-a,I=v+o,l=v-o;W[h++]=E,W[h++]=I,W[--f]=l,W[--f]=E,a&&(W[h++]=L,W[h++]=I,W[--f]=l,W[--f]=L)}},triangulate(o,W){const F=o.points,v=W.points,a=W.indices;if(0===F.length)return;let G=v.length/2;const L=G;let U,I;if(o.type!==E.HY.RREC){const W=o.shape;U=W.x,I=W.y}else{const W=o.shape;U=W.x+W.width/2,I=W.y+W.height/2}const l=o.matrix;v.push(o.matrix?l.a*U+l.c*I+l.tx:U,o.matrix?l.b*U+l.d*I+l.ty:I),G++,v.push(F[0],F[1]);for(let o=2;o<F.length;o+=2)v.push(F[o],F[o+1]),a.push(G++,L,G);a.push(L+1,L,G)}};function a(o,W=!1){const F=o.length;if(F<6)return;let E=0;for(let W=0,v=o[F-2],a=o[F-1];W<F;W+=2){const F=o[W],G=o[W+1];E+=(F-v)*(G+a),v=F,a=G}if(!W&&E>0||W&&E<=0){const W=F/2;for(let E=W+W%2;E<F;E+=2){const W=F-E-2,v=F-E-1,a=E,G=E+1;[o[W],o[a]]=[o[a],o[W]],[o[v],o[G]]=[o[G],o[v]]}}}const G={build(o){o.points=o.shape.points.slice()},triangulate(o,W){let F=o.points;const v=o.holes,G=W.points,L=W.indices;if(F.length>=6){a(F,!1);const o=[];for(let W=0;W<v.length;W++){const E=v[W];a(E.points,!0),o.push(F.length/2),F=F.concat(E.points)}const W=E.Wp.earcut(F,o,2);if(!W)return;const U=G.length/2;for(let o=0;o<W.length;o+=3)L.push(W[o]+U),L.push(W[o+1]+U),L.push(W[o+2]+U);for(let o=0;o<F.length;o++)G.push(F[o])}}},L={build(o){const W=o.shape,F=W.x,E=W.y,v=W.width,a=W.height,G=o.points;G.length=0,v>=0&&a>=0&&G.push(F,E,F+v,E,F+v,E+a,F,E+a)},triangulate(o,W){const F=o.points,E=W.points;if(0===F.length)return;const v=E.length/2;E.push(F[0],F[1],F[2],F[3],F[6],F[7],F[4],F[5]),W.indices.push(v,v+1,v+2,v+1,v+2,v+3)}},U={build(o){v.build(o)},triangulate(o,W){v.triangulate(o,W)}};var I,l,h=((l=h||{}).MITER="miter",l.BEVEL="bevel",l.ROUND="round",l),p=((I=p||{}).BUTT="butt",I.ROUND="round",I.SQUARE="square",I);const g={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(o,W=20){if(!this.adaptive||!o||isNaN(o))return W;let F=Math.ceil(o/this.maxLength);return F<this.minSegments?F=this.minSegments:F>this.maxSegments&&(F=this.maxSegments),F}};class f{static curveTo(o,W,F,E,v,a){const G=a[a.length-2],L=a[a.length-1]-W,U=G-o,I=E-W,l=F-o,h=Math.abs(L*l-U*I);if(h<1e-8||0===v)return(a[a.length-2]!==o||a[a.length-1]!==W)&&a.push(o,W),null;const p=L*L+U*U,g=I*I+l*l,f=L*I+U*l,A=v*Math.sqrt(p)/h,k=v*Math.sqrt(g)/h,Z=A*f/p,P=k*f/g,y=A*l+k*U,z=A*I+k*L,x=U*(k+Z),N=L*(k+Z),e=l*(A+P),t=I*(A+P);return{cx:y+o,cy:z+W,radius:v,startAngle:Math.atan2(N-z,x-y),endAngle:Math.atan2(t-z,e-y),anticlockwise:U*I>l*L}}static arc(o,W,F,v,a,G,L,U,I){const l=L-G,h=g._segmentsCount(Math.abs(l)*a,40*Math.ceil(Math.abs(l)/E.TO)),p=l/(2*h),f=2*p,A=Math.cos(p),k=Math.sin(p),Z=h-1,P=Z%1/Z;for(let o=0;o<=Z;++o){const W=p+G+f*(o+P*o),E=Math.cos(W),L=-Math.sin(W);I.push((A*E+k*L)*a+F,(A*-L+k*E)*a+v)}}}class A{static curveLength(o,W,F,E,v,a,G,L){let U=0,I=0,l=0,h=0,p=0,g=0,f=0,A=0,k=0,Z=0,P=0,y=o,z=W;for(let x=1;x<=10;++x)I=x/10,l=I*I,h=l*I,p=1-I,g=p*p,f=g*p,A=f*o+3*g*I*F+3*p*l*v+h*G,k=f*W+3*g*I*E+3*p*l*a+h*L,Z=y-A,P=z-k,y=A,z=k,U+=Math.sqrt(Z*Z+P*P);return U}static curveTo(o,W,F,E,v,a,G){const L=G[G.length-2],U=G[G.length-1];G.length-=2;const I=g._segmentsCount(A.curveLength(L,U,o,W,F,E,v,a));let l=0,h=0,p=0,f=0,k=0;G.push(L,U);for(let g=1,A=0;g<=I;++g)A=g/I,l=1-A,h=l*l,p=h*l,f=A*A,k=f*A,G.push(p*L+3*h*A*o+3*l*f*F+k*v,p*U+3*h*A*W+3*l*f*E+k*a)}}function k(o,W,F,E,v,a,G,L){let U,I;G?(U=E,I=-F):(U=-E,I=F);const l=o-F*v+U,h=W-E*v+I,p=o+F*a+U,g=W+E*a+I;return L.push(l,h,p,g),2}function Z(o,W,F,E,v,a,G,L){const U=F-o,I=E-W;let l=Math.atan2(U,I),h=Math.atan2(v-o,a-W);L&&l<h?l+=2*Math.PI:!L&&l>h&&(h+=2*Math.PI);let p=l;const g=h-l,f=Math.abs(g),A=Math.sqrt(U*U+I*I),k=1+(15*f*Math.sqrt(A)/Math.PI|0),Z=g/k;if(p+=Z,L){G.push(o,W,F,E);for(let F=1,E=p;F<k;F++,E+=Z)G.push(o,W,o+Math.sin(E)*A,W+Math.cos(E)*A);G.push(o,W,v,a)}else{G.push(F,E,o,W);for(let F=1,E=p;F<k;F++,E+=Z)G.push(o+Math.sin(E)*A,W+Math.cos(E)*A,o,W);G.push(v,a,o,W)}return 2*k}function P(o,W){o.lineStyle.native?function(o,W){let F=0;const v=o.shape,a=o.points||v.points,G=v.type!==E.HY.POLY||v.closeStroke;if(0===a.length)return;const L=W.points,U=W.indices,I=a.length/2,l=L.length/2;let h=l;for(L.push(a[0],a[1]),F=1;F<I;F++)L.push(a[2*F],a[2*F+1]),U.push(h,h+1),h++;G&&U.push(h,l)}(o,W):function(o,W){const F=o.shape;let v=o.points||F.points.slice();const a=W.closePointEps;if(0===v.length)return;const G=o.lineStyle,L=new E.bR(v[0],v[1]),U=new E.bR(v[v.length-2],v[v.length-1]),I=F.type!==E.HY.POLY||F.closeStroke,l=Math.abs(L.x-U.x)<a&&Math.abs(L.y-U.y)<a;if(I){v=v.slice(),l&&(v.pop(),v.pop(),U.set(v[v.length-2],v[v.length-1]));const o=.5*(L.x+U.x),W=.5*(U.y+L.y);v.unshift(o,W),v.push(o,W)}const f=W.points,A=v.length/2;let P=v.length;const y=f.length/2,z=G.width/2,x=z*z,N=G.miterLimit*G.miterLimit;let e=v[0],t=v[1],m=v[2],r=v[3],B=0,j=0,V=-(t-r),w=e-m,K=0,T=0,d=Math.sqrt(V*V+w*w);V/=d,w/=d,V*=z,w*=z;const n=G.alignment,u=2*(1-n),$=2*n;I||(G.cap===p.ROUND?P+=Z(e-V*(u-$)*.5,t-w*(u-$)*.5,e-V*u,t-w*u,e+V*$,t+w*$,f,!0)+2:G.cap===p.SQUARE&&(P+=k(e,t,V,w,u,$,!0,f))),f.push(e-V*u,t-w*u,e+V*$,t+w*$);for(let o=1;o<A-1;++o){e=v[2*(o-1)],t=v[2*(o-1)+1],m=v[2*o],r=v[2*o+1],B=v[2*(o+1)],j=v[2*(o+1)+1],V=-(t-r),w=e-m,d=Math.sqrt(V*V+w*w),V/=d,w/=d,V*=z,w*=z,K=-(r-j),T=m-B,d=Math.sqrt(K*K+T*T),K/=d,T/=d,K*=z,T*=z;const W=m-e,F=t-r,E=m-B,a=j-r,L=W*E+F*a,U=F*E-a*W,I=U<0;if(Math.abs(U)<.001*Math.abs(L)){f.push(m-V*u,r-w*u,m+V*$,r+w*$),L>=0&&(G.join===h.ROUND?P+=Z(m,r,m-V*u,r-w*u,m-K*u,r-T*u,f,!1)+4:P+=2,f.push(m-K*$,r-T*$,m+K*u,r+T*u));continue}const l=(-V+e)*(-w+r)-(-V+m)*(-w+t),p=(-K+B)*(-T+r)-(-K+m)*(-T+j),g=(W*p-E*l)/U,A=(a*l-F*p)/U,k=(g-m)*(g-m)+(A-r)*(A-r),y=m+(g-m)*u,n=r+(A-r)*u,Y=m-(g-m)*$,Q=r-(A-r)*$,C=I?u:$,q=k<=Math.min(W*W+F*F,E*E+a*a)+C*C*x;let c=G.join;if(c===h.MITER&&k/x>N&&(c=h.BEVEL),q)switch(c){case h.MITER:f.push(y,n,Y,Q);break;case h.BEVEL:I?f.push(y,n,m+V*$,r+w*$,y,n,m+K*$,r+T*$):f.push(m-V*u,r-w*u,Y,Q,m-K*u,r-T*u,Y,Q),P+=2;break;case h.ROUND:I?(f.push(y,n,m+V*$,r+w*$),P+=Z(m,r,m+V*$,r+w*$,m+K*$,r+T*$,f,!0)+4,f.push(y,n,m+K*$,r+T*$)):(f.push(m-V*u,r-w*u,Y,Q),P+=Z(m,r,m-V*u,r-w*u,m-K*u,r-T*u,f,!1)+4,f.push(m-K*u,r-T*u,Y,Q))}else{switch(f.push(m-V*u,r-w*u,m+V*$,r+w*$),c){case h.MITER:I?f.push(Y,Q,Y,Q):f.push(y,n,y,n),P+=2;break;case h.ROUND:P+=I?Z(m,r,m+V*$,r+w*$,m+K*$,r+T*$,f,!0)+2:Z(m,r,m-V*u,r-w*u,m-K*u,r-T*u,f,!1)+2}f.push(m-K*u,r-T*u,m+K*$,r+T*$),P+=2}}e=v[2*(A-2)],t=v[2*(A-2)+1],m=v[2*(A-1)],r=v[2*(A-1)+1],V=-(t-r),w=e-m,d=Math.sqrt(V*V+w*w),V/=d,w/=d,V*=z,w*=z,f.push(m-V*u,r-w*u,m+V*$,r+w*$),I||(G.cap===p.ROUND?P+=Z(m-V*(u-$)*.5,r-w*(u-$)*.5,m-V*u,r-w*u,m+V*$,r+w*$,f,!1)+2:G.cap===p.SQUARE&&(P+=k(m,r,V,w,u,$,!1,f)));const Y=W.indices,Q=g.epsilon*g.epsilon;for(let o=y;o<P+y-2;++o)e=f[2*o],t=f[2*o+1],m=f[2*(o+1)],r=f[2*(o+1)+1],B=f[2*(o+2)],j=f[2*(o+2)+1],!(Math.abs(e*(r-j)+m*(j-t)+B*(t-r))<Q)&&Y.push(o,o+1,o+2)}(o,W)}class y{static curveLength(o,W,F,E,v,a){const G=o-2*F+v,L=W-2*E+a,U=2*F-2*o,I=2*E-2*W,l=4*(G*G+L*L),h=4*(G*U+L*I),p=U*U+I*I,g=2*Math.sqrt(l+h+p),f=Math.sqrt(l),A=2*l*f,k=2*Math.sqrt(p),Z=h/f;return(A*g+f*h*(g-k)+(4*p*l-h*h)*Math.log((2*f+Z+g)/(Z+k)))/(4*A)}static curveTo(o,W,F,E,v){const a=v[v.length-2],G=v[v.length-1],L=g._segmentsCount(y.curveLength(a,G,o,W,F,E));let U=0,I=0;for(let l=1;l<=L;++l){const h=l/L;U=a+(o-a)*h,I=G+(W-G)*h,v.push(U+(o+(F-o)*h-U)*h,I+(W+(E-W)*h-I)*h)}}}const z={[E.HY.POLY]:G,[E.HY.CIRC]:v,[E.HY.ELIP]:v,[E.HY.RECT]:L,[E.HY.RREC]:U},x=[],N=[];var e=F(110715);class t{constructor(o,W=null,F=null,E=null){this.points=[],this.holes=[],this.shape=o,this.lineStyle=F,this.fillStyle=W,this.matrix=E,this.type=o.type}clone(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}class m{constructor(){this.reset()}begin(o,W,F){this.reset(),this.style=o,this.start=W,this.attribStart=F}end(o,W){this.attribSize=W-this.attribStart,this.size=o-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}const r=new E.bR,B=class o extends E.JH{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new e.cz,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let o=0;o<this.drawCalls.length;o++)this.drawCalls[o].texArray.clear(),N.push(this.drawCalls[o]);this.drawCalls.length=0;for(let o=0;o<this.batches.length;o++){const W=this.batches[o];W.reset(),x.push(W)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(o,W=null,F=null,E=null){const v=new t(o,W,F,E);return this.graphicsData.push(v),this.dirty++,this}drawHole(o,W=null){if(!this.graphicsData.length)return null;const F=new t(o,null,null,W),E=this.graphicsData[this.graphicsData.length-1];return F.lineStyle=E.lineStyle,E.holes.push(F),this.dirty++,this}destroy(){super.destroy();for(let o=0;o<this.graphicsData.length;++o)this.graphicsData[o].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(o){const W=this.graphicsData;for(let F=0;F<W.length;++F){const E=W[F];if(E.fillStyle.visible&&E.shape&&(E.matrix?E.matrix.applyInverse(o,r):r.copyFrom(o),E.shape.contains(r.x,r.y))){let o=!1;if(E.holes)for(let W=0;W<E.holes.length;W++)if(E.holes[W].shape.contains(r.x,r.y)){o=!0;break}if(!o)return!0}}return!1}updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;const o=this.uvs,W=this.graphicsData;let F=null,v=null;this.batches.length>0&&(F=this.batches[this.batches.length-1],v=F.style);for(let a=this.shapeIndex;a<W.length;a++){this.shapeIndex++;const G=W[a],L=G.fillStyle,U=G.lineStyle;z[G.type].build(G),G.matrix&&this.transformPoints(G.points,G.matrix),(L.visible||U.visible)&&this.processHoles(G.holes);for(let W=0;W<2;W++){const a=0===W?L:U;if(!a.visible)continue;const I=a.texture.baseTexture,l=this.indices.length,h=this.points.length/2;I.wrapMode=E.uR.REPEAT,0===W?this.processFill(G):this.processLine(G);const p=this.points.length/2-h;0!==p&&(F&&!this._compareStyles(v,a)&&(F.end(l,h),F=null),F||(F=x.pop()||new m,F.begin(a,l,h),this.batches.push(F),v=a),this.addUvs(this.points,o,a.texture,h,p,a.matrix))}}const a=this.indices.length,G=this.points.length/2;if(F&&F.end(a,G),0===this.batches.length)return void(this.batchable=!0);const L=G>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&L===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=L?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(o,W){return!(!o||!W||o.texture.baseTexture!==W.texture.baseTexture||o.color+o.alpha!==W.color+W.alpha||!!o.native!=!!W.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let o=0,W=this.graphicsData.length;o<W;o++){const W=this.graphicsData[o],F=W.fillStyle,E=W.lineStyle;if(F&&!F.texture.baseTexture.valid||E&&!E.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const o=this.batches;for(let W=0,F=o.length;W<F;W++){const F=o[W];for(let o=0;o<F.size;o++){const W=F.start+o;this.indicesUint16[W]=this.indicesUint16[W]-F.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;const W=this.batches;for(let o=0;o<W.length;o++)if(W[o].style.native)return!1;return this.points.length<2*o.BATCHABLE_SIZE}buildDrawCalls(){let o=++E.t5._globalBatch;for(let o=0;o<this.drawCalls.length;o++)this.drawCalls[o].texArray.clear(),N.push(this.drawCalls[o]);this.drawCalls.length=0;const W=this.colors,F=this.textureIds;let v=N.pop();v||(v=new E.hq,v.texArray=new E.cc),v.texArray.count=0,v.start=0,v.size=0,v.type=E._4.TRIANGLES;let a=0,G=null,L=0,U=!1,I=E._4.TRIANGLES,l=0;this.drawCalls.push(v);for(let h=0;h<this.batches.length;h++){const p=this.batches[h],g=8,f=p.style,A=f.texture.baseTexture;U!==!!f.native&&(U=!!f.native,I=U?E._4.LINES:E._4.TRIANGLES,G=null,a=g,o++),G!==A&&(G=A,A._batchEnabled!==o&&(a===g&&(o++,a=0,v.size>0&&(v=N.pop(),v||(v=new E.hq,v.texArray=new E.cc),this.drawCalls.push(v)),v.start=l,v.size=0,v.texArray.count=0,v.type=I),A.touched=1,A._batchEnabled=o,A._batchLocation=a,A.wrapMode=E.uR.REPEAT,v.texArray.elements[v.texArray.count++]=A,a++)),v.size+=p.size,l+=p.size,L=A._batchLocation,this.addColors(W,f.color,f.alpha,p.attribSize,p.attribStart),this.addTextureIds(F,L,p.attribSize,p.attribStart)}E.t5._globalBatch=o,this.packAttributes()}packAttributes(){const o=this.points,W=this.uvs,F=this.colors,E=this.textureIds,v=new ArrayBuffer(3*o.length*4),a=new Float32Array(v),G=new Uint32Array(v);let L=0;for(let v=0;v<o.length/2;v++)a[L++]=o[2*v],a[L++]=o[2*v+1],a[L++]=W[2*v],a[L++]=W[2*v+1],G[L++]=F[v],a[L++]=E[v];this._buffer.update(v),this._indexBuffer.update(this.indicesUint16)}processFill(o){o.holes.length?G.triangulate(o,this):z[o.type].triangulate(o,this)}processLine(o){P(o,this);for(let W=0;W<o.holes.length;W++)P(o.holes[W],this)}processHoles(o){for(let W=0;W<o.length;W++){const F=o[W];z[F.type].build(F),F.matrix&&this.transformPoints(F.points,F.matrix)}}calculateBounds(){const o=this._bounds;o.clear(),o.addVertexData(this.points,0,this.points.length),o.pad(this.boundsPadding,this.boundsPadding)}transformPoints(o,W){for(let F=0;F<o.length/2;F++){const E=o[2*F],v=o[2*F+1];o[2*F]=W.a*E+W.c*v+W.tx,o[2*F+1]=W.b*E+W.d*v+W.ty}}addColors(o,W,F,v,a=0){const G=E.Q1.shared.setValue(W).toLittleEndianNumber(),L=E.Q1.shared.setValue(G).toPremultiplied(F);o.length=Math.max(o.length,a+v);for(let W=0;W<v;W++)o[a+W]=L}addTextureIds(o,W,F,E=0){o.length=Math.max(o.length,E+F);for(let v=0;v<F;v++)o[E+v]=W}addUvs(o,W,F,E,v,a=null){let G=0;const L=W.length,U=F.frame;for(;G<v;){let F=o[2*(E+G)],v=o[2*(E+G)+1];if(a){const o=a.a*F+a.c*v+a.tx;v=a.b*F+a.d*v+a.ty,F=o}G++,W.push(F/U.width,v/U.height)}const I=F.baseTexture;(U.width<I.width||U.height<I.height)&&this.adjustUvs(W,F,L,v)}adjustUvs(o,W,F,E){const v=W.baseTexture,a=1e-6,G=F+2*E,L=W.frame,U=L.width/v.width,I=L.height/v.height;let l=L.x/L.width,h=L.y/L.height,p=Math.floor(o[F]+a),g=Math.floor(o[F+1]+a);for(let W=F+2;W<G;W+=2)p=Math.min(p,Math.floor(o[W]+a)),g=Math.min(g,Math.floor(o[W+1]+a));l-=p,h-=g;for(let W=F;W<G;W+=2)o[W]=(o[W]+l)*U,o[W+1]=(o[W+1]+h)*I}};B.BATCHABLE_SIZE=100;let j=B;class V{constructor(){this.color=16777215,this.alpha=1,this.texture=E.gP.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const o=new V;return o.color=this.color,o.alpha=this.alpha,o.texture=this.texture,o.matrix=this.matrix,o.visible=this.visible,o}reset(){this.color=16777215,this.alpha=1,this.texture=E.gP.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class w extends V{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=p.BUTT,this.join=h.MITER,this.miterLimit=10}clone(){const o=new w;return o.color=this.color,o.alpha=this.alpha,o.texture=this.texture,o.matrix=this.matrix,o.visible=this.visible,o.width=this.width,o.alignment=this.alignment,o.native=this.native,o.cap=this.cap,o.join=this.join,o.miterLimit=this.miterLimit,o}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=p.BUTT,this.join=h.MITER,this.miterLimit=10}}const K={},T=class o extends e.mc{constructor(o=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new V,this._lineStyle=new w,this._matrix=null,this._holeMode=!1,this.state=E.Uw.for2d(),this._geometry=o||new j,this._geometry.refCount++,this._transformID=-1,this._tintColor=new E.Q1(16777215),this.blendMode=E.B9.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new o(this._geometry)}set blendMode(o){this.state.blendMode=o}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(o){this._tintColor.setValue(o)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(o=null,W=0,F,E=.5,v=!1){return"number"==typeof o&&(o={width:o,color:W,alpha:F,alignment:E,native:v}),this.lineTextureStyle(o)}lineTextureStyle(o){const W={width:0,texture:E.gP.WHITE,color:(null==o?void 0:o.texture)?16777215:0,matrix:null,alignment:.5,native:!1,cap:p.BUTT,join:h.MITER,miterLimit:10};o=Object.assign(W,o),this.normalizeColor(o),this.currentPath&&this.startPoly();const F=o.width>0&&o.alpha>0;return F?(o.matrix&&(o.matrix=o.matrix.clone(),o.matrix.invert()),Object.assign(this._lineStyle,{visible:F},o)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const o=this.currentPath.points,W=this.currentPath.points.length;W>2&&(this.drawShape(this.currentPath),this.currentPath=new E.tS,this.currentPath.closeStroke=!1,this.currentPath.points.push(o[W-2],o[W-1]))}else this.currentPath=new E.tS,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(o,W){return this.startPoly(),this.currentPath.points[0]=o,this.currentPath.points[1]=W,this}lineTo(o,W){this.currentPath||this.moveTo(0,0);const F=this.currentPath.points,E=F[F.length-2],v=F[F.length-1];return(E!==o||v!==W)&&F.push(o,W),this}_initCurve(o=0,W=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[o,W]):this.moveTo(o,W)}quadraticCurveTo(o,W,F,E){this._initCurve();const v=this.currentPath.points;return 0===v.length&&this.moveTo(0,0),y.curveTo(o,W,F,E,v),this}bezierCurveTo(o,W,F,E,v,a){return this._initCurve(),A.curveTo(o,W,F,E,v,a,this.currentPath.points),this}arcTo(o,W,F,E,v){this._initCurve(o,W);const a=this.currentPath.points,G=f.curveTo(o,W,F,E,v,a);if(G){const{cx:o,cy:W,radius:F,startAngle:E,endAngle:v,anticlockwise:a}=G;this.arc(o,W,F,E,v,a)}return this}arc(o,W,F,v,a,G=!1){if(v===a)return this;if(!G&&a<=v?a+=E.TO:G&&v<=a&&(v+=E.TO),a-v==0)return this;const L=o+Math.cos(v)*F,U=W+Math.sin(v)*F,I=this._geometry.closePointEps;let l=this.currentPath?this.currentPath.points:null;if(l){const o=Math.abs(l[l.length-2]-L),W=Math.abs(l[l.length-1]-U);o<I&&W<I||l.push(L,U)}else this.moveTo(L,U),l=this.currentPath.points;return f.arc(L,U,o,W,F,v,a,G,l),this}beginFill(o=0,W){return this.beginTextureFill({texture:E.gP.WHITE,color:o,alpha:W})}normalizeColor(o){var W,F;const v=E.Q1.shared.setValue(null!==(W=o.color)&&void 0!==W?W:0);o.color=v.toNumber(),null!==(F=o.alpha)&&void 0!==F||(o.alpha=v.alpha)}beginTextureFill(o){const W={texture:E.gP.WHITE,color:16777215,matrix:null};o=Object.assign(W,o),this.normalizeColor(o),this.currentPath&&this.startPoly();const F=o.alpha>0;return F?(o.matrix&&(o.matrix=o.matrix.clone(),o.matrix.invert()),Object.assign(this._fillStyle,{visible:F},o)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(o,W,F,v){return this.drawShape(new E.M_(o,W,F,v))}drawRoundedRect(o,W,F,v,a){return this.drawShape(new E.TE(o,W,F,v,a))}drawCircle(o,W,F){return this.drawShape(new E.jl(o,W,F))}drawEllipse(o,W,F,v){return this.drawShape(new E.Pp(o,W,F,v))}drawPolygon(...o){let W,F=!0;const v=o[0];v.points?(F=v.closeStroke,W=v.points):W=Array.isArray(o[0])?o[0]:o;const a=new E.tS(W);return a.closeStroke=F,this.drawShape(a),this}drawShape(o){return this._holeMode?this._geometry.drawHole(o,this._matrix):this._geometry.drawShape(o,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const o=this._geometry.graphicsData;return!(1!==o.length||o[0].shape.type!==E.HY.RECT||o[0].matrix||o[0].holes.length||o[0].lineStyle.visible&&o[0].lineStyle.width)}_render(o){this.finishPoly();const W=this._geometry;W.updateBatches(),W.batchable?(this.batchDirty!==W.batchDirty&&this._populateBatches(),this._renderBatched(o)):(o.batch.flush(),this._renderDirect(o))}_populateBatches(){const o=this._geometry,W=this.blendMode,F=o.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=o.batchDirty,this.batches.length=F,this.vertexData=new Float32Array(o.points);for(let v=0;v<F;v++){const F=o.batches[v],a=F.style.color,G=new Float32Array(this.vertexData.buffer,4*F.attribStart*2,2*F.attribSize),L=new Float32Array(o.uvsFloat32.buffer,4*F.attribStart*2,2*F.attribSize),U={vertexData:G,blendMode:W,indices:new Uint16Array(o.indicesUint16.buffer,2*F.start,F.size),uvs:L,_batchRGB:E.Q1.shared.setValue(a).toRgbArray(),_tintRGB:a,_texture:F.style.texture,alpha:F.style.alpha,worldAlpha:1};this.batches[v]=U}}_renderBatched(o){if(this.batches.length){o.batch.setObjectRenderer(o.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let W=0,F=this.batches.length;W<F;W++){const F=this.batches[W];F.worldAlpha=this.worldAlpha*F.alpha,o.plugins[this.pluginName].render(F)}}}_renderDirect(o){const W=this._resolveDirectShader(o),F=this._geometry,v=this.worldAlpha,a=W.uniforms,G=F.drawCalls;a.translationMatrix=this.transform.worldTransform,E.Q1.shared.setValue(this._tintColor).premultiply(v).toArray(a.tint),o.shader.bind(W),o.geometry.bind(F,W),o.state.set(this.state);for(let W=0,E=G.length;W<E;W++)this._renderDrawCallDirect(o,F.drawCalls[W])}_renderDrawCallDirect(o,W){const{texArray:F,type:E,size:v,start:a}=W,G=F.count;for(let W=0;W<G;W++)o.texture.bind(F.elements[W],W);o.geometry.draw(E,v,a)}_resolveDirectShader(o){let W=this.shader;const F=this.pluginName;if(!W){if(!K[F]){const{maxTextures:W}=o.plugins[F],v=new Int32Array(W);for(let o=0;o<W;o++)v[o]=o;const a={tint:new Float32Array([1,1,1,1]),translationMatrix:new E.uq,default:E.k2.from({uSamplers:v},!0)},G=o.plugins[F]._shader.program;K[F]=new E.Mt(G,a)}W=K[F]}return W}_calculateBounds(){this.finishPoly();const o=this._geometry;if(!o.graphicsData.length)return;const{minX:W,minY:F,maxX:E,maxY:v}=o.bounds;this._bounds.addFrame(this.transform,W,F,E,v)}containsPoint(W){return this.worldTransform.applyInverse(W,o._TEMP_POINT),this._geometry.containsPoint(o._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let o=0;o<this.batches.length;o++){const W=this.batches[o];W._tintRGB=E.Q1.shared.setValue(this._tintColor).multiply(W._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const o=this.transform._worldID;if(this._transformID===o)return;this._transformID=o;const W=this.transform.worldTransform,F=W.a,E=W.b,v=W.c,a=W.d,G=W.tx,L=W.ty,U=this._geometry.points,I=this.vertexData;let l=0;for(let o=0;o<U.length;o+=2){const W=U[o],h=U[o+1];I[l++]=F*W+v*h+G,I[l++]=a*h+E*W+L}}closePath(){const o=this.currentPath;return o&&(o.closeStroke=!0,this.finishPoly()),this}setMatrix(o){return this._matrix=o,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(o){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(o)}};T.curves=g,T._TEMP_POINT=new E.bR;let d=T},514842:(o,W,F)=>{F.d(W,{jl:()=>h,Td:()=>a,Pp:()=>p,uq:()=>A,oA:()=>t,TO:()=>E,bR:()=>U,tS:()=>g,bO:()=>v,M_:()=>l,TE:()=>f,HY:()=>L,dL:()=>r,ER:()=>e});const E=2*Math.PI,v=180/Math.PI,a=Math.PI/180;var G,L=((G=L||{})[G.POLY=0]="POLY",G[G.RECT=1]="RECT",G[G.CIRC=2]="CIRC",G[G.ELIP=3]="ELIP",G[G.RREC=4]="RREC",G);class U{constructor(o=0,W=0){this.x=0,this.y=0,this.x=o,this.y=W}clone(){return new U(this.x,this.y)}copyFrom(o){return this.set(o.x,o.y),this}copyTo(o){return o.set(this.x,this.y),o}equals(o){return o.x===this.x&&o.y===this.y}set(o=0,W=o){return this.x=o,this.y=W,this}}U.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const I=[new U,new U,new U,new U];class l{constructor(o=0,W=0,F=0,E=0){this.x=Number(o),this.y=Number(W),this.width=Number(F),this.height=Number(E),this.type=L.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new l(0,0,0,0)}clone(){return new l(this.x,this.y,this.width,this.height)}copyFrom(o){return this.x=o.x,this.y=o.y,this.width=o.width,this.height=o.height,this}copyTo(o){return o.x=this.x,o.y=this.y,o.width=this.width,o.height=this.height,o}contains(o,W){return!(this.width<=0||this.height<=0)&&o>=this.x&&o<this.x+this.width&&W>=this.y&&W<this.y+this.height}intersects(o,W){if(!W){const W=this.x<o.x?o.x:this.x;if((this.right>o.right?o.right:this.right)<=W)return!1;const F=this.y<o.y?o.y:this.y;return(this.bottom>o.bottom?o.bottom:this.bottom)>F}const F=this.left,E=this.right,v=this.top,a=this.bottom;if(E<=F||a<=v)return!1;const G=I[0].set(o.left,o.top),L=I[1].set(o.left,o.bottom),U=I[2].set(o.right,o.top),l=I[3].set(o.right,o.bottom);if(U.x<=G.x||L.y<=G.y)return!1;const h=Math.sign(W.a*W.d-W.b*W.c);if(0===h||(W.apply(G,G),W.apply(L,L),W.apply(U,U),W.apply(l,l),Math.max(G.x,L.x,U.x,l.x)<=F||Math.min(G.x,L.x,U.x,l.x)>=E||Math.max(G.y,L.y,U.y,l.y)<=v||Math.min(G.y,L.y,U.y,l.y)>=a))return!1;const p=h*(L.y-G.y),g=h*(G.x-L.x),f=p*F+g*v,A=p*E+g*v,k=p*F+g*a,Z=p*E+g*a;if(Math.max(f,A,k,Z)<=p*G.x+g*G.y||Math.min(f,A,k,Z)>=p*l.x+g*l.y)return!1;const P=h*(G.y-U.y),y=h*(U.x-G.x),z=P*F+y*v,x=P*E+y*v,N=P*F+y*a,e=P*E+y*a;return!(Math.max(z,x,N,e)<=P*G.x+y*G.y||Math.min(z,x,N,e)>=P*l.x+y*l.y)}pad(o=0,W=o){return this.x-=o,this.y-=W,this.width+=2*o,this.height+=2*W,this}fit(o){const W=Math.max(this.x,o.x),F=Math.min(this.x+this.width,o.x+o.width),E=Math.max(this.y,o.y),v=Math.min(this.y+this.height,o.y+o.height);return this.x=W,this.width=Math.max(F-W,0),this.y=E,this.height=Math.max(v-E,0),this}ceil(o=1,W=.001){const F=Math.ceil((this.x+this.width-W)*o)/o,E=Math.ceil((this.y+this.height-W)*o)/o;return this.x=Math.floor((this.x+W)*o)/o,this.y=Math.floor((this.y+W)*o)/o,this.width=F-this.x,this.height=E-this.y,this}enlarge(o){const W=Math.min(this.x,o.x),F=Math.max(this.x+this.width,o.x+o.width),E=Math.min(this.y,o.y),v=Math.max(this.y+this.height,o.y+o.height);return this.x=W,this.width=F-W,this.y=E,this.height=v-E,this}}l.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class h{constructor(o=0,W=0,F=0){this.x=o,this.y=W,this.radius=F,this.type=L.CIRC}clone(){return new h(this.x,this.y,this.radius)}contains(o,W){if(this.radius<=0)return!1;const F=this.radius*this.radius;let E=this.x-o,v=this.y-W;return E*=E,v*=v,E+v<=F}getBounds(){return new l(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}}h.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class p{constructor(o=0,W=0,F=0,E=0){this.x=o,this.y=W,this.width=F,this.height=E,this.type=L.ELIP}clone(){return new p(this.x,this.y,this.width,this.height)}contains(o,W){if(this.width<=0||this.height<=0)return!1;let F=(o-this.x)/this.width,E=(W-this.y)/this.height;return F*=F,E*=E,F+E<=1}getBounds(){return new l(this.x-this.width,this.y-this.height,this.width,this.height)}}p.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class g{constructor(...o){let W=Array.isArray(o[0])?o[0]:o;if("number"!=typeof W[0]){const o=[];for(let F=0,E=W.length;F<E;F++)o.push(W[F].x,W[F].y);W=o}this.points=W,this.type=L.POLY,this.closeStroke=!0}clone(){const o=this.points.slice(),W=new g(o);return W.closeStroke=this.closeStroke,W}contains(o,W){let F=!1;const E=this.points.length/2;for(let v=0,a=E-1;v<E;a=v++){const E=this.points[2*v],G=this.points[2*v+1],L=this.points[2*a],U=this.points[2*a+1];G>W!=U>W&&o<(W-G)/(U-G)*(L-E)+E&&(F=!F)}return F}}g.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce(((o,W)=>`${o}, ${W}`),"")}]`};class f{constructor(o=0,W=0,F=0,E=0,v=20){this.x=o,this.y=W,this.width=F,this.height=E,this.radius=v,this.type=L.RREC}clone(){return new f(this.x,this.y,this.width,this.height,this.radius)}contains(o,W){if(this.width<=0||this.height<=0)return!1;if(o>=this.x&&o<=this.x+this.width&&W>=this.y&&W<=this.y+this.height){const F=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(W>=this.y+F&&W<=this.y+this.height-F||o>=this.x+F&&o<=this.x+this.width-F)return!0;let E=o-(this.x+F),v=W-(this.y+F);const a=F*F;if(E*E+v*v<=a||(E=o-(this.x+this.width-F),E*E+v*v<=a)||(v=W-(this.y+this.height-F),E*E+v*v<=a)||(E=o-(this.x+F),E*E+v*v<=a))return!0}return!1}}f.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class A{constructor(o=1,W=0,F=0,E=1,v=0,a=0){this.array=null,this.a=o,this.b=W,this.c=F,this.d=E,this.tx=v,this.ty=a}fromArray(o){this.a=o[0],this.b=o[1],this.c=o[3],this.d=o[4],this.tx=o[2],this.ty=o[5]}set(o,W,F,E,v,a){return this.a=o,this.b=W,this.c=F,this.d=E,this.tx=v,this.ty=a,this}toArray(o,W){this.array||(this.array=new Float32Array(9));const F=W||this.array;return o?(F[0]=this.a,F[1]=this.b,F[2]=0,F[3]=this.c,F[4]=this.d,F[5]=0,F[6]=this.tx,F[7]=this.ty,F[8]=1):(F[0]=this.a,F[1]=this.c,F[2]=this.tx,F[3]=this.b,F[4]=this.d,F[5]=this.ty,F[6]=0,F[7]=0,F[8]=1),F}apply(o,W){W=W||new U;const F=o.x,E=o.y;return W.x=this.a*F+this.c*E+this.tx,W.y=this.b*F+this.d*E+this.ty,W}applyInverse(o,W){W=W||new U;const F=1/(this.a*this.d+this.c*-this.b),E=o.x,v=o.y;return W.x=this.d*F*E+-this.c*F*v+(this.ty*this.c-this.tx*this.d)*F,W.y=this.a*F*v+-this.b*F*E+(-this.ty*this.a+this.tx*this.b)*F,W}translate(o,W){return this.tx+=o,this.ty+=W,this}scale(o,W){return this.a*=o,this.d*=W,this.c*=o,this.b*=W,this.tx*=o,this.ty*=W,this}rotate(o){const W=Math.cos(o),F=Math.sin(o),E=this.a,v=this.c,a=this.tx;return this.a=E*W-this.b*F,this.b=E*F+this.b*W,this.c=v*W-this.d*F,this.d=v*F+this.d*W,this.tx=a*W-this.ty*F,this.ty=a*F+this.ty*W,this}append(o){const W=this.a,F=this.b,E=this.c,v=this.d;return this.a=o.a*W+o.b*E,this.b=o.a*F+o.b*v,this.c=o.c*W+o.d*E,this.d=o.c*F+o.d*v,this.tx=o.tx*W+o.ty*E+this.tx,this.ty=o.tx*F+o.ty*v+this.ty,this}setTransform(o,W,F,E,v,a,G,L,U){return this.a=Math.cos(G+U)*v,this.b=Math.sin(G+U)*v,this.c=-Math.sin(G-L)*a,this.d=Math.cos(G-L)*a,this.tx=o-(F*this.a+E*this.c),this.ty=W-(F*this.b+E*this.d),this}prepend(o){const W=this.tx;if(1!==o.a||0!==o.b||0!==o.c||1!==o.d){const W=this.a,F=this.c;this.a=W*o.a+this.b*o.c,this.b=W*o.b+this.b*o.d,this.c=F*o.a+this.d*o.c,this.d=F*o.b+this.d*o.d}return this.tx=W*o.a+this.ty*o.c+o.tx,this.ty=W*o.b+this.ty*o.d+o.ty,this}decompose(o){const W=this.a,F=this.b,v=this.c,a=this.d,G=o.pivot,L=-Math.atan2(-v,a),U=Math.atan2(F,W),I=Math.abs(L+U);return I<1e-5||Math.abs(E-I)<1e-5?(o.rotation=U,o.skew.x=o.skew.y=0):(o.rotation=0,o.skew.x=L,o.skew.y=U),o.scale.x=Math.sqrt(W*W+F*F),o.scale.y=Math.sqrt(v*v+a*a),o.position.x=this.tx+(G.x*W+G.y*v),o.position.y=this.ty+(G.x*F+G.y*a),o}invert(){const o=this.a,W=this.b,F=this.c,E=this.d,v=this.tx,a=o*E-W*F;return this.a=E/a,this.b=-W/a,this.c=-F/a,this.d=o/a,this.tx=(F*this.ty-E*v)/a,this.ty=-(o*this.ty-W*v)/a,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const o=new A;return o.a=this.a,o.b=this.b,o.c=this.c,o.d=this.d,o.tx=this.tx,o.ty=this.ty,o}copyTo(o){return o.a=this.a,o.b=this.b,o.c=this.c,o.d=this.d,o.tx=this.tx,o.ty=this.ty,o}copyFrom(o){return this.a=o.a,this.b=o.b,this.c=o.c,this.d=o.d,this.tx=o.tx,this.ty=o.ty,this}static get IDENTITY(){return new A}static get TEMP_MATRIX(){return new A}}A.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const k=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Z=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],P=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],y=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],z=[],x=[],N=Math.sign;!function(){for(let o=0;o<16;o++){const W=[];z.push(W);for(let F=0;F<16;F++){const E=N(k[o]*k[F]+P[o]*Z[F]),v=N(Z[o]*k[F]+y[o]*Z[F]),a=N(k[o]*P[F]+P[o]*y[F]),G=N(Z[o]*P[F]+y[o]*y[F]);for(let o=0;o<16;o++)if(k[o]===E&&Z[o]===v&&P[o]===a&&y[o]===G){W.push(o);break}}}for(let o=0;o<16;o++){const W=new A;W.set(k[o],Z[o],P[o],y[o],0,0),x.push(W)}}();const e={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:o=>k[o],uY:o=>Z[o],vX:o=>P[o],vY:o=>y[o],inv:o=>8&o?15&o:7&-o,add:(o,W)=>z[o][W],sub:(o,W)=>z[o][e.inv(W)],rotate180:o=>4^o,isVertical:o=>2==(3&o),byDirection:(o,W)=>2*Math.abs(o)<=Math.abs(W)?W>=0?e.S:e.N:2*Math.abs(W)<=Math.abs(o)?o>0?e.E:e.W:W>0?o>0?e.SE:e.SW:o>0?e.NE:e.NW,matrixAppendRotationInv:(o,W,F=0,E=0)=>{const v=x[e.inv(W)];v.tx=F,v.ty=E,o.append(v)}};class t{constructor(o,W,F=0,E=0){this._x=F,this._y=E,this.cb=o,this.scope=W}clone(o=this.cb,W=this.scope){return new t(o,W,this._x,this._y)}set(o=0,W=o){return(this._x!==o||this._y!==W)&&(this._x=o,this._y=W,this.cb.call(this.scope)),this}copyFrom(o){return(this._x!==o.x||this._y!==o.y)&&(this._x=o.x,this._y=o.y,this.cb.call(this.scope)),this}copyTo(o){return o.set(this._x,this._y),o}equals(o){return o.x===this._x&&o.y===this._y}get x(){return this._x}set x(o){this._x!==o&&(this._x=o,this.cb.call(this.scope))}get y(){return this._y}set y(o){this._y!==o&&(this._y=o,this.cb.call(this.scope))}}t.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const m=class{constructor(){this.worldTransform=new A,this.localTransform=new A,this.position=new t(this.onChange,this,0,0),this.scale=new t(this.onChange,this,1,1),this.pivot=new t(this.onChange,this,0,0),this.skew=new t(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const o=this.localTransform;this._localID!==this._currentLocalID&&(o.a=this._cx*this.scale.x,o.b=this._sx*this.scale.x,o.c=this._cy*this.scale.y,o.d=this._sy*this.scale.y,o.tx=this.position.x-(this.pivot.x*o.a+this.pivot.y*o.c),o.ty=this.position.y-(this.pivot.x*o.b+this.pivot.y*o.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(o){const W=this.localTransform;if(this._localID!==this._currentLocalID&&(W.a=this._cx*this.scale.x,W.b=this._sx*this.scale.x,W.c=this._cy*this.scale.y,W.d=this._sy*this.scale.y,W.tx=this.position.x-(this.pivot.x*W.a+this.pivot.y*W.c),W.ty=this.position.y-(this.pivot.x*W.b+this.pivot.y*W.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==o._worldID){const F=o.worldTransform,E=this.worldTransform;E.a=W.a*F.a+W.b*F.c,E.b=W.a*F.b+W.b*F.d,E.c=W.c*F.a+W.d*F.c,E.d=W.c*F.b+W.d*F.d,E.tx=W.tx*F.a+W.ty*F.c+F.tx,E.ty=W.tx*F.b+W.ty*F.d+F.ty,this._parentID=o._worldID,this._worldID++}}setFromMatrix(o){o.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(o){this._rotation!==o&&(this._rotation=o,this.updateSkew())}};m.IDENTITY=new m;let r=m;r.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}},209218:(o,W,F)=>{F.d(W,{g:()=>a});var E=F(401947);E.u,E.u;var v=F(316197);E.e;class a extends E.e{constructor(o=v.gP.EMPTY,W,F,a,G){const L=new E.u(W,F,a);L.getBuffer("aVertexPosition").static=!1,super(L,new E.PX(o),null,G),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(o){this.geometry.getBuffer("aVertexPosition").data=o}_render(o){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(o)}}E.e},401947:(o,W,F)=>{F.d(W,{e:()=>I,u:()=>l,PX:()=>h});var E=F(316197),v=F(110715);class a{constructor(o,W){this.uvBuffer=o,this.uvMatrix=W,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(o){if(!o&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const W=this.uvBuffer.data;(!this.data||this.data.length!==W.length)&&(this.data=new Float32Array(W.length)),this.uvMatrix.multiplyUvs(W,this.data),this._updateID++}}const G=new E.bR,L=new E.tS,U=class o extends v.mc{constructor(o,W,F,v=E._4.TRIANGLES){super(),this.geometry=o,this.shader=W,this.state=F||E.Uw.for2d(),this.drawMode=v,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=E.W0.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(o){this._geometry!==o&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=o,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(o){this.shader=o}get material(){return this.shader}set blendMode(o){this.state.blendMode=o}get blendMode(){return this.state.blendMode}set roundPixels(o){this._roundPixels!==o&&(this._transformID=-1),this._roundPixels=o}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(o){this.shader.tint=o}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(o){this.shader.texture=o}_render(W){const F=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===E._4.TRIANGLES&&F.length<2*o.BATCHABLE_SIZE?this._renderToBatch(W):this._renderDefault(W)}_renderDefault(o){const W=this.shader;W.alpha=this.worldAlpha,W.update&&W.update(),o.batch.flush(),W.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),o.shader.bind(W),o.state.set(this.state),o.geometry.bind(this.geometry,W),o.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(o){const W=this.geometry,F=this.shader;F.uvMatrix&&(F.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=W.indexBuffer.data,this._tintRGB=F._tintRGB,this._texture=F.texture;const E=this.material.pluginName;o.batch.setObjectRenderer(o.plugins[E]),o.plugins[E].render(this)}calculateVertices(){const o=this.geometry.buffers[0],W=o.data,F=o._updateID;if(F===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==W.length&&(this.vertexData=new Float32Array(W.length));const v=this.transform.worldTransform,a=v.a,G=v.b,L=v.c,U=v.d,I=v.tx,l=v.ty,h=this.vertexData;for(let o=0;o<h.length/2;o++){const F=W[2*o],E=W[2*o+1];h[2*o]=a*F+L*E+I,h[2*o+1]=G*F+U*E+l}if(this._roundPixels){const o=E.W0.RESOLUTION;for(let W=0;W<h.length;++W)h[W]=Math.round(h[W]*o)/o}this.vertexDirty=F}calculateUvs(){const o=this.geometry.buffers[1],W=this.shader;W.uvMatrix.isSimple?this.uvs=o.data:(this.batchUvs||(this.batchUvs=new a(o,W.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(o){if(!this.getBounds().contains(o.x,o.y))return!1;this.worldTransform.applyInverse(o,G);const W=this.geometry.getBuffer("aVertexPosition").data,F=L.points,E=this.geometry.getIndex().data,v=E.length,a=4===this.drawMode?3:1;for(let o=0;o+2<v;o+=a){const v=2*E[o],a=2*E[o+1],U=2*E[o+2];if(F[0]=W[v],F[1]=W[v+1],F[2]=W[a],F[3]=W[a+1],F[4]=W[U],F[5]=W[U+1],L.contains(G.x,G.y))return!0}return!1}destroy(o){super.destroy(o),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};U.BATCHABLE_SIZE=100;let I=U;class l extends E.V2{constructor(o,W,F){super();const v=new E.hp(o),a=new E.hp(W,!0),G=new E.hp(F,!0,!0);this.addAttribute("aVertexPosition",v,2,!1,E.QE.FLOAT).addAttribute("aTextureCoord",a,2,!1,E.QE.FLOAT).addIndex(G),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}class h extends E.Mt{constructor(o,W){const F={uSampler:o,alpha:1,uTextureMatrix:E.uq.IDENTITY,uColor:new Float32Array([1,1,1,1])};(W=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},W)).uniforms&&Object.assign(F,W.uniforms),super(W.program||E.BP.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),F),this._colorDirty=!1,this.uvMatrix=new E.NW(o),this.batchable=void 0===W.program,this.pluginName=W.pluginName,this._tintColor=new E.Q1(W.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=W.alpha}get texture(){return this.uniforms.uSampler}set texture(o){this.uniforms.uSampler!==o&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!o.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=o,this.uvMatrix.texture=o)}set alpha(o){o!==this._alpha&&(this._alpha=o,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(o){o!==this.tint&&(this._tintColor.setValue(o),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const o=this.texture.baseTexture.alphaMode;E.Q1.shared.setValue(this._tintColor).premultiply(this._alpha,o).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}},344944:(o,W,F)=>{var E=F(316197),v=F(110715),a=F(722711);class G{constructor(o){this.maxItemsPerFrame=o,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function L(o,W){var F;let v=!1;if(null===(F=null==o?void 0:o._textures)||void 0===F?void 0:F.length)for(let F=0;F<o._textures.length;F++)if(o._textures[F]instanceof E.gP){const E=o._textures[F].baseTexture;W.includes(E)||(W.push(E),v=!0)}return v}function U(o,W){if(o.baseTexture instanceof E.t5){const F=o.baseTexture;return W.includes(F)||W.push(F),!0}return!1}function I(o,W){if(o._texture&&o._texture instanceof E.gP){const F=o._texture.baseTexture;return W.includes(F)||W.push(F),!0}return!1}function l(o,W){return W instanceof a.EY&&(W.updateText(!0),!0)}function h(o,W){if(W instanceof a.xJ){const o=W.toFontString();return a.Z1.measureFont(o),!0}return!1}function p(o,W){if(o instanceof a.EY){W.includes(o.style)||W.push(o.style),W.includes(o)||W.push(o);const F=o._texture.baseTexture;return W.includes(F)||W.push(F),!0}return!1}function g(o,W){return o instanceof a.xJ&&(W.includes(o)||W.push(o),!0)}const f=class o{constructor(W){this.limiter=new G(o.uploadsPerFrame),this.renderer=W,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(p),this.registerFindHook(g),this.registerFindHook(L),this.registerFindHook(U),this.registerFindHook(I),this.registerUploadHook(l),this.registerUploadHook(h)}upload(o){return new Promise((W=>{o&&this.add(o),this.queue.length?(this.completes.push(W),this.ticking||(this.ticking=!0,E.Rv.system.addOnce(this.tick,this,E.dQ.UTILITY))):W()}))}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const o=this.queue[0];let W=!1;if(o&&!o._destroyed)for(let F=0,E=this.uploadHooks.length;F<E;F++)if(this.uploadHooks[F](this.uploadHookHelper,o)){this.queue.shift(),W=!0;break}W||this.queue.shift()}if(this.queue.length)E.Rv.system.addOnce(this.tick,this,E.dQ.UTILITY);else{this.ticking=!1;const o=this.completes.slice(0);this.completes.length=0;for(let W=0,F=o.length;W<F;W++)o[W]()}}registerFindHook(o){return o&&this.addHooks.push(o),this}registerUploadHook(o){return o&&this.uploadHooks.push(o),this}add(o){for(let W=0,F=this.addHooks.length;W<F&&!this.addHooks[W](o,this.queue);W++);if(o instanceof v.mc)for(let W=o.children.length-1;W>=0;W--)this.add(o.children[W]);return this}destroy(){this.ticking&&E.Rv.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};f.uploadsPerFrame=4;let A=f;Object.defineProperties(E.W0,{UPLOADS_PER_FRAME:{get:()=>A.uploadsPerFrame,set(o){E.Wp.deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),A.uploadsPerFrame=o}}});var k=F(366628);function Z(o,W){return W instanceof E.t5&&(W._glTextures[o.CONTEXT_UID]||o.texture.bind(W),!0)}function P(o,W){if(!(W instanceof k.A1))return!1;const{geometry:F}=W;W.finishPoly(),F.updateBatches();const{batches:E}=F;for(let W=0;W<E.length;W++){const{texture:F}=E[W].style;F&&Z(o,F.baseTexture)}return F.batchable||o.geometry.bind(F,W._resolveDirectShader(o)),!0}function y(o,W){return o instanceof k.A1&&(W.push(o),!0)}class z extends A{constructor(o){super(o),this.uploadHookHelper=this.renderer,this.registerFindHook(y),this.registerUploadHook(Z),this.registerUploadHook(P)}}z.extension={name:"prepare",type:E.Ag.RendererSystem},E.XO.add(z)},968381:(o,W,F)=>{F.d(W,{Fr:()=>e,W0:()=>v});const E={createCanvas:(o,W)=>{const F=document.createElement("canvas");return F.width=o,F.height=W,F},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>{var o;return null!==(o=document.baseURI)&&void 0!==o?o:window.location.href},getFontFaceSet:()=>document.fonts,fetch:(o,W)=>fetch(o,W),parseXML:o=>(new DOMParser).parseFromString(o,"text/xml")},v={ADAPTER:E,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var a,G=/iPhone/i,L=/iPod/i,U=/iPad/i,I=/\biOS-universal(?:.+)Mac\b/i,l=/\bAndroid(?:.+)Mobile\b/i,h=/Android/i,p=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,g=/Silk/i,f=/Windows Phone/i,A=/\bWindows(?:.+)ARM\b/i,k=/BlackBerry/i,Z=/BB10/i,P=/Opera Mini/i,y=/\b(CriOS|Chrome)(?:.+)Mobile/i,z=/Mobile(?:.+)Firefox\b/i,x=function(o){return void 0!==o&&"MacIntel"===o.platform&&"number"==typeof o.maxTouchPoints&&o.maxTouchPoints>1&&"undefined"==typeof MSStream};function N(o){var W={userAgent:"",platform:"",maxTouchPoints:0};o||"undefined"==typeof navigator?"string"==typeof o?W.userAgent=o:o&&o.userAgent&&(W={userAgent:o.userAgent,platform:o.platform,maxTouchPoints:o.maxTouchPoints||0}):W={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var F=W.userAgent,E=F.split("[FBAN");void 0!==E[1]&&(F=E[0]),void 0!==(E=F.split("Twitter"))[1]&&(F=E[0]);var v=function(o){return function(W){return W.test(o)}}(F),a={apple:{phone:v(G)&&!v(f),ipod:v(L),tablet:!v(G)&&(v(U)||x(W))&&!v(f),universal:v(I),device:(v(G)||v(L)||v(U)||v(I)||x(W))&&!v(f)},amazon:{phone:v(p),tablet:!v(p)&&v(g),device:v(p)||v(g)},android:{phone:!v(f)&&v(p)||!v(f)&&v(l),tablet:!v(f)&&!v(p)&&!v(l)&&(v(g)||v(h)),device:!v(f)&&(v(p)||v(g)||v(l)||v(h))||v(/\bokhttp\b/i)},windows:{phone:v(f),tablet:v(A),device:v(f)||v(A)},other:{blackberry:v(k),blackberry10:v(Z),opera:v(P),firefox:v(z),chrome:v(y),device:v(k)||v(Z)||v(P)||v(z)||v(y)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}const e=(null!==(a=N.default)&&void 0!==a?a:N)(globalThis.navigator)},672076:(o,W,F)=>{F.d(W,{k:()=>L});var E=F(316197),v=F(110715);const a=new E.bR,G=new Uint16Array([0,1,2,0,2,3]);class L extends v.mc{constructor(o){super(),this._anchor=new E.oA(this._onAnchorUpdate,this,o?o.defaultAnchor.x:0,o?o.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new E.Q1(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=E.B9.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=o||E.gP.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=G,this.pluginName="batch",this.isSprite=!0,this._roundPixels=E.W0.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=E.Wp.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=E.Wp.sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const o=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===o._updateID)return;this._textureID!==o._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=o._updateID;const W=this.transform.worldTransform,F=W.a,v=W.b,a=W.c,G=W.d,L=W.tx,U=W.ty,I=this.vertexData,l=o.trim,h=o.orig,p=this._anchor;let g=0,f=0,A=0,k=0;if(l?(f=l.x-p._x*h.width,g=f+l.width,k=l.y-p._y*h.height,A=k+l.height):(f=-p._x*h.width,g=f+h.width,k=-p._y*h.height,A=k+h.height),I[0]=F*f+a*k+L,I[1]=G*k+v*f+U,I[2]=F*g+a*k+L,I[3]=G*k+v*g+U,I[4]=F*g+a*A+L,I[5]=G*A+v*g+U,I[6]=F*f+a*A+L,I[7]=G*A+v*f+U,this._roundPixels){const o=E.W0.RESOLUTION;for(let W=0;W<I.length;++W)I[W]=Math.round(I[W]*o)/o}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const o=this._texture,W=this.vertexTrimmedData,F=o.orig,v=this._anchor,a=this.transform.worldTransform,G=a.a,L=a.b,U=a.c,I=a.d,l=a.tx,h=a.ty,p=-v._x*F.width,g=p+F.width,f=-v._y*F.height,A=f+F.height;if(W[0]=G*p+U*f+l,W[1]=I*f+L*p+h,W[2]=G*g+U*f+l,W[3]=I*f+L*g+h,W[4]=G*g+U*A+l,W[5]=I*A+L*g+h,W[6]=G*p+U*A+l,W[7]=I*A+L*p+h,this._roundPixels){const o=E.W0.RESOLUTION;for(let F=0;F<W.length;++F)W[F]=Math.round(W[F]*o)/o}}_render(o){this.calculateVertices(),o.batch.setObjectRenderer(o.plugins[this.pluginName]),o.plugins[this.pluginName].render(this)}_calculateBounds(){const o=this._texture.trim,W=this._texture.orig;!o||o.width===W.width&&o.height===W.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(o){return 0===this.children.length?(this._localBounds||(this._localBounds=new v.cz),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),o||(this._localBoundsRect||(this._localBoundsRect=new E.M_),o=this._localBoundsRect),this._localBounds.getRectangle(o)):super.getLocalBounds.call(this,o)}containsPoint(o){this.worldTransform.applyInverse(o,a);const W=this._texture.orig.width,F=this._texture.orig.height,E=-W*this.anchor.x;let v=0;return a.x>=E&&a.x<E+W&&(v=-F*this.anchor.y,a.y>=v&&a.y<v+F)}destroy(o){if(super.destroy(o),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof o?o:null==o?void 0:o.texture){const W="boolean"==typeof o?o:null==o?void 0:o.baseTexture;this._texture.destroy(!!W)}this._texture=null}static from(o,W){const F=o instanceof E.gP?o:E.gP.from(o,W);return new L(F)}set roundPixels(o){this._roundPixels!==o&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=o}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(o){const W=E.Wp.sign(this.scale.x)||1;this.scale.x=W*o/this._texture.orig.width,this._width=o}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(o){const W=E.Wp.sign(this.scale.y)||1;this.scale.y=W*o/this._texture.orig.height,this._height=o}get anchor(){return this._anchor}set anchor(o){this._anchor.copyFrom(o)}get tint(){return this._tintColor.value}set tint(o){this._tintColor.setValue(o),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(o){this._texture!==o&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=o||E.gP.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,o&&(o.baseTexture.valid?this._onTextureUpdate():o.once("update",this._onTextureUpdate,this)))}}},722711:(o,W,F)=>{F.d(W,{T:()=>v,EY:()=>Z,Z1:()=>I,xJ:()=>p});var E,v=((E=v||{})[E.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",E[E.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",E),a=F(316197),G=F(672076);const L={willReadFrequently:!0},U=class o{static get experimentalLetterSpacingSupported(){let W=o._experimentalLetterSpacingSupported;if(void 0!==W){const F=a.W0.ADAPTER.getCanvasRenderingContext2D().prototype;W=o._experimentalLetterSpacingSupported="letterSpacing"in F||"textLetterSpacing"in F}return W}constructor(o,W,F,E,v,a,G,L,U){this.text=o,this.style=W,this.width=F,this.height=E,this.lines=v,this.lineWidths=a,this.lineHeight=G,this.maxLineWidth=L,this.fontProperties=U}static measureText(W,F,E,v=o._canvas){E=null!=E?E:F.wordWrap;const a=F.toFontString(),G=o.measureFont(a);0===G.fontSize&&(G.fontSize=F.fontSize,G.ascent=F.fontSize);const U=v.getContext("2d",L);U.font=a;const I=(E?o.wordWrap(W,F,v):W).split(/(?:\r\n|\r|\n)/),l=new Array(I.length);let h=0;for(let W=0;W<I.length;W++){const E=o._measureText(I[W],F.letterSpacing,U);l[W]=E,h=Math.max(h,E)}let p=h+F.strokeThickness;F.dropShadow&&(p+=F.dropShadowDistance);const g=F.lineHeight||G.fontSize+F.strokeThickness;let f=Math.max(g,G.fontSize+2*F.strokeThickness)+F.leading+(I.length-1)*(g+F.leading);return F.dropShadow&&(f+=F.dropShadowDistance),new o(W,F,p,f,I,l,g+F.leading,h,G)}static _measureText(W,F,E){let v=!1;o.experimentalLetterSpacingSupported&&(o.experimentalLetterSpacing?(E.letterSpacing=`${F}px`,E.textLetterSpacing=`${F}px`,v=!0):(E.letterSpacing="0px",E.textLetterSpacing="0px"));let a=E.measureText(W).width;return a>0&&(v?a-=F:a+=(o.graphemeSegmenter(W).length-1)*F),a}static wordWrap(W,F,E=o._canvas){const v=E.getContext("2d",L);let a=0,G="",U="";const I=Object.create(null),{letterSpacing:l,whiteSpace:h}=F,p=o.collapseSpaces(h),g=o.collapseNewlines(h);let f=!p;const A=F.wordWrapWidth+l,k=o.tokenize(W);for(let W=0;W<k.length;W++){let E=k[W];if(o.isNewline(E)){if(!g){U+=o.addLine(G),f=!p,G="",a=0;continue}E=" "}if(p){const W=o.isBreakingSpace(E),F=o.isBreakingSpace(G[G.length-1]);if(W&&F)continue}const L=o.getFromCache(E,l,I,v);if(L>A)if(""!==G&&(U+=o.addLine(G),G="",a=0),o.canBreakWords(E,F.breakWords)){const W=o.wordWrapSplit(E);for(let L=0;L<W.length;L++){let h=W[L],p=h,g=1;for(;W[L+g];){const v=W[L+g];if(o.canBreakChars(p,v,E,L,F.breakWords))break;h+=v,p=v,g++}L+=g-1;const k=o.getFromCache(h,l,I,v);k+a>A&&(U+=o.addLine(G),f=!1,G="",a=0),G+=h,a+=k}}else{G.length>0&&(U+=o.addLine(G),G="",a=0);const F=W===k.length-1;U+=o.addLine(E,!F),f=!1,G="",a=0}else L+a>A&&(f=!1,U+=o.addLine(G),G="",a=0),(G.length>0||!o.isBreakingSpace(E)||f)&&(G+=E,a+=L)}return U+=o.addLine(G,!1),U}static addLine(W,F=!0){return W=o.trimRight(W),F?`${W}\n`:W}static getFromCache(W,F,E,v){let a=E[W];return"number"!=typeof a&&(a=o._measureText(W,F,v)+F,E[W]=a),a}static collapseSpaces(o){return"normal"===o||"pre-line"===o}static collapseNewlines(o){return"normal"===o}static trimRight(W){if("string"!=typeof W)return"";for(let F=W.length-1;F>=0;F--){const E=W[F];if(!o.isBreakingSpace(E))break;W=W.slice(0,-1)}return W}static isNewline(W){return"string"==typeof W&&o._newlines.includes(W.charCodeAt(0))}static isBreakingSpace(W,F){return"string"==typeof W&&o._breakingSpaces.includes(W.charCodeAt(0))}static tokenize(W){const F=[];let E="";if("string"!=typeof W)return F;for(let v=0;v<W.length;v++){const a=W[v],G=W[v+1];o.isBreakingSpace(a,G)||o.isNewline(a)?(""!==E&&(F.push(E),E=""),F.push(a)):E+=a}return""!==E&&F.push(E),F}static canBreakWords(o,W){return W}static canBreakChars(o,W,F,E,v){return!0}static wordWrapSplit(W){return o.graphemeSegmenter(W)}static measureFont(W){if(o._fonts[W])return o._fonts[W];const F={ascent:0,descent:0,fontSize:0},E=o._canvas,v=o._context;v.font=W;const a=o.METRICS_STRING+o.BASELINE_SYMBOL,G=Math.ceil(v.measureText(a).width);let L=Math.ceil(v.measureText(o.BASELINE_SYMBOL).width);const U=Math.ceil(o.HEIGHT_MULTIPLIER*L);if(L=L*o.BASELINE_MULTIPLIER|0,0===G||0===U)return o._fonts[W]=F,F;E.width=G,E.height=U,v.fillStyle="#f00",v.fillRect(0,0,G,U),v.font=W,v.textBaseline="alphabetic",v.fillStyle="#000",v.fillText(a,0,L);const I=v.getImageData(0,0,G,U).data,l=I.length,h=4*G;let p=0,g=0,f=!1;for(p=0;p<L;++p){for(let o=0;o<h;o+=4)if(255!==I[g+o]){f=!0;break}if(f)break;g+=h}for(F.ascent=L-p,g=l-h,f=!1,p=U;p>L;--p){for(let o=0;o<h;o+=4)if(255!==I[g+o]){f=!0;break}if(f)break;g-=h}return F.descent=p-L,F.fontSize=F.ascent+F.descent,o._fonts[W]=F,F}static clearMetrics(W=""){W?delete o._fonts[W]:o._fonts={}}static get _canvas(){var W;if(!o.__canvas){let F;try{const E=new OffscreenCanvas(0,0);if(null===(W=E.getContext("2d",L))||void 0===W?void 0:W.measureText)return o.__canvas=E,E;F=a.W0.ADAPTER.createCanvas()}catch(o){F=a.W0.ADAPTER.createCanvas()}F.width=F.height=10,o.__canvas=F}return o.__canvas}static get _context(){return o.__context||(o.__context=o._canvas.getContext("2d",L)),o.__context}};U.METRICS_STRING="|ÉqÅ",U.BASELINE_SYMBOL="M",U.BASELINE_MULTIPLIER=1.4,U.HEIGHT_MULTIPLIER=2,U.graphemeSegmenter=(()=>{if("function"==typeof(null===Intl||void 0===Intl?void 0:Intl.Segmenter)){const o=new Intl.Segmenter;return W=>[...o.segment(W)].map((o=>o.segment))}return o=>[...o]})(),U.experimentalLetterSpacing=!1,U._fonts={},U._newlines=[10,13],U._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let I=U;const l=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],h=class o{constructor(o){this.styleID=0,this.reset(),f(this,o,o)}clone(){const W={};return f(W,this,o.defaultStyle),new o(W)}reset(){f(this,o.defaultStyle,o.defaultStyle)}get align(){return this._align}set align(o){this._align!==o&&(this._align=o,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(o){this._breakWords!==o&&(this._breakWords=o,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(o){this._dropShadow!==o&&(this._dropShadow=o,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(o){this._dropShadowAlpha!==o&&(this._dropShadowAlpha=o,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(o){this._dropShadowAngle!==o&&(this._dropShadowAngle=o,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(o){this._dropShadowBlur!==o&&(this._dropShadowBlur=o,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(o){const W=g(o);this._dropShadowColor!==W&&(this._dropShadowColor=W,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(o){this._dropShadowDistance!==o&&(this._dropShadowDistance=o,this.styleID++)}get fill(){return this._fill}set fill(o){const W=g(o);this._fill!==W&&(this._fill=W,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(o){this._fillGradientType!==o&&(this._fillGradientType=o,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(o){(function(o,W){if(!Array.isArray(o)||!Array.isArray(W)||o.length!==W.length)return!1;for(let F=0;F<o.length;++F)if(o[F]!==W[F])return!1;return!0})(this._fillGradientStops,o)||(this._fillGradientStops=o,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(o){this.fontFamily!==o&&(this._fontFamily=o,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(o){this._fontSize!==o&&(this._fontSize=o,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(o){this._fontStyle!==o&&(this._fontStyle=o,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(o){this._fontVariant!==o&&(this._fontVariant=o,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(o){this._fontWeight!==o&&(this._fontWeight=o,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(o){this._letterSpacing!==o&&(this._letterSpacing=o,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(o){this._lineHeight!==o&&(this._lineHeight=o,this.styleID++)}get leading(){return this._leading}set leading(o){this._leading!==o&&(this._leading=o,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(o){this._lineJoin!==o&&(this._lineJoin=o,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(o){this._miterLimit!==o&&(this._miterLimit=o,this.styleID++)}get padding(){return this._padding}set padding(o){this._padding!==o&&(this._padding=o,this.styleID++)}get stroke(){return this._stroke}set stroke(o){const W=g(o);this._stroke!==W&&(this._stroke=W,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(o){this._strokeThickness!==o&&(this._strokeThickness=o,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(o){this._textBaseline!==o&&(this._textBaseline=o,this.styleID++)}get trim(){return this._trim}set trim(o){this._trim!==o&&(this._trim=o,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(o){this._whiteSpace!==o&&(this._whiteSpace=o,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(o){this._wordWrap!==o&&(this._wordWrap=o,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(o){this._wordWrapWidth!==o&&(this._wordWrapWidth=o,this.styleID++)}toFontString(){const o="number"==typeof this.fontSize?`${this.fontSize}px`:this.fontSize;let W=this.fontFamily;Array.isArray(this.fontFamily)||(W=this.fontFamily.split(","));for(let o=W.length-1;o>=0;o--){let F=W[o].trim();!/([\"\'])[^\'\"]+\1/.test(F)&&!l.includes(F)&&(F=`"${F}"`),W[o]=F}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${o} ${W.join(",")}`}};h.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:v.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let p=h;function g(o){const W=a.Q1.shared,F=o=>{const F=W.setValue(o);return 1===F.alpha?F.toHex():F.toRgbaString()};return Array.isArray(o)?o.map(F):F(o)}function f(o,W,F){for(const E in F)Array.isArray(W[E])?o[E]=W[E].slice():o[E]=W[E]}const A={texture:!0,children:!1,baseTexture:!0},k=class o extends G.k{constructor(W,F,E){var v;let G=!1;E||(E=a.W0.ADAPTER.createCanvas(),G=!0),E.width=3,E.height=3;const L=a.gP.from(E);L.orig=new a.M_,L.trim=new a.M_,super(L),this._ownCanvas=G,this.canvas=E,this.context=E.getContext("2d",{willReadFrequently:!0}),this._resolution=null!==(v=o.defaultResolution)&&void 0!==v?v:a.W0.RESOLUTION,this._autoResolution=o.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=W,this.style=F,this.localStyleID=-1}static get experimentalLetterSpacing(){return I.experimentalLetterSpacing}static set experimentalLetterSpacing(o){a.Wp.deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),I.experimentalLetterSpacing=o}updateText(o){const W=this._style;if(this.localStyleID!==W.styleID&&(this.dirty=!0,this.localStyleID=W.styleID),!this.dirty&&o)return;this._font=this._style.toFontString();const F=this.context,E=I.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),v=E.width,G=E.height,L=E.lines,U=E.lineHeight,l=E.lineWidths,h=E.maxLineWidth,p=E.fontProperties;let g,f;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,v)+2*W.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,G)+2*W.padding)*this._resolution),F.scale(this._resolution,this._resolution),F.clearRect(0,0,this.canvas.width,this.canvas.height),F.font=this._font,F.lineWidth=W.strokeThickness,F.textBaseline=W.textBaseline,F.lineJoin=W.lineJoin,F.miterLimit=W.miterLimit;const A=W.dropShadow?2:1;for(let o=0;o<A;++o){const v=W.dropShadow&&0===o,I=v?Math.ceil(Math.max(1,G)+2*W.padding):0,A=I*this._resolution;if(v){F.fillStyle="black",F.strokeStyle="black";const o=W.dropShadowColor,E=W.dropShadowBlur*this._resolution,v=W.dropShadowDistance*this._resolution;F.shadowColor=a.Q1.shared.setValue(o).setAlpha(W.dropShadowAlpha).toRgbaString(),F.shadowBlur=E,F.shadowOffsetX=Math.cos(W.dropShadowAngle)*v,F.shadowOffsetY=Math.sin(W.dropShadowAngle)*v+A}else F.fillStyle=this._generateFillStyle(W,L,E),F.strokeStyle=W.stroke,F.shadowColor="black",F.shadowBlur=0,F.shadowOffsetX=0,F.shadowOffsetY=0;let k=(U-p.fontSize)/2;U-p.fontSize<0&&(k=0);for(let o=0;o<L.length;o++)g=W.strokeThickness/2,f=W.strokeThickness/2+o*U+p.ascent+k,"right"===W.align?g+=h-l[o]:"center"===W.align&&(g+=(h-l[o])/2),W.stroke&&W.strokeThickness&&this.drawLetterSpacing(L[o],g+W.padding,f+W.padding-I,!0),W.fill&&this.drawLetterSpacing(L[o],g+W.padding,f+W.padding-I)}this.updateTexture()}drawLetterSpacing(o,W,F,E=!1){const v=this._style.letterSpacing;let a=!1;if(I.experimentalLetterSpacingSupported&&(I.experimentalLetterSpacing?(this.context.letterSpacing=`${v}px`,this.context.textLetterSpacing=`${v}px`,a=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),0===v||a)return void(E?this.context.strokeText(o,W,F):this.context.fillText(o,W,F));let G=W;const L=I.graphemeSegmenter(o);let U=this.context.measureText(o).width,l=0;for(let o=0;o<L.length;++o){const W=L[o];E?this.context.strokeText(W,G,F):this.context.fillText(W,G,F);let a="";for(let W=o+1;W<L.length;++W)a+=L[W];l=this.context.measureText(a).width,G+=U-l+v,U=l}}updateTexture(){const o=this.canvas;if(this._style.trim){const W=a.Wp.trimCanvas(o);W.data&&(o.width=W.width,o.height=W.height,this.context.putImageData(W.data,0,0))}const W=this._texture,F=this._style,E=F.trim?0:F.padding,v=W.baseTexture;W.trim.width=W._frame.width=o.width/this._resolution,W.trim.height=W._frame.height=o.height/this._resolution,W.trim.x=-E,W.trim.y=-E,W.orig.width=W._frame.width-2*E,W.orig.height=W._frame.height-2*E,this._onTextureUpdate(),v.setRealSize(o.width,o.height,this._resolution),W.updateUvs(),this.dirty=!1}_render(o){this._autoResolution&&this._resolution!==o.resolution&&(this._resolution=o.resolution,this.dirty=!0),this.updateText(!0),super._render(o)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(o,W){return this.updateText(!0),-1===this._textureID&&(o=!1),super.getBounds(o,W)}getLocalBounds(o){return this.updateText(!0),super.getLocalBounds.call(this,o)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(o,W,F){const E=o.fill;if(!Array.isArray(E))return E;if(1===E.length)return E[0];let a;const G=o.dropShadow?o.dropShadowDistance:0,L=o.padding||0,U=this.canvas.width/this._resolution-G-2*L,I=this.canvas.height/this._resolution-G-2*L,l=E.slice(),h=o.fillGradientStops.slice();if(!h.length){const o=l.length+1;for(let W=1;W<o;++W)h.push(W/o)}if(l.unshift(E[0]),h.unshift(0),l.push(E[E.length-1]),h.push(1),o.fillGradientType===v.LINEAR_VERTICAL){a=this.context.createLinearGradient(U/2,L,U/2,I+L);const E=F.fontProperties.fontSize+o.strokeThickness;for(let o=0;o<W.length;o++){const v=F.lineHeight*(o-1)+E,G=F.lineHeight*o;let L=G;o>0&&v>G&&(L=(G+v)/2);const U=G+E,p=F.lineHeight*(o+1);let g=U;o+1<W.length&&p<U&&(g=(U+p)/2);const f=(g-L)/I;for(let o=0;o<l.length;o++){let W=0;W="number"==typeof h[o]?h[o]:o/l.length;let F=Math.min(1,Math.max(0,L/I+W*f));F=Number(F.toFixed(5)),a.addColorStop(F,l[o])}}}else{a=this.context.createLinearGradient(L,I/2,U+L,I/2);const o=l.length+1;let W=1;for(let F=0;F<l.length;F++){let E;E="number"==typeof h[F]?h[F]:W/o,a.addColorStop(E,l[F]),W++}}return a}destroy(o){"boolean"==typeof o&&(o={children:o}),o=Object.assign({},A,o),super.destroy(o),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(o){this.updateText(!0);const W=a.Wp.sign(this.scale.x)||1;this.scale.x=W*o/this._texture.orig.width,this._width=o}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(o){this.updateText(!0);const W=a.Wp.sign(this.scale.y)||1;this.scale.y=W*o/this._texture.orig.height,this._height=o}get style(){return this._style}set style(o){o=o||{},this._style=o instanceof p?o:new p(o),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(o){o=String(null!=o?o:""),this._text!==o&&(this._text=o,this.dirty=!0)}get resolution(){return this._resolution}set resolution(o){this._autoResolution=!1,this._resolution!==o&&(this._resolution=o,this.dirty=!0)}};k.defaultAutoResolution=!0;let Z=k},71931:(o,W,F)=>{F.d(W,{Rv:()=>I,dQ:()=>G});var E,v=F(968381),a=F(578351),G=((E=G||{})[E.INTERACTION=50]="INTERACTION",E[E.HIGH=25]="HIGH",E[E.NORMAL=0]="NORMAL",E[E.LOW=-25]="LOW",E[E.UTILITY=-50]="UTILITY",E);class L{constructor(o,W=null,F=0,E=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=o,this.context=W,this.priority=F,this.once=E}match(o,W=null){return this.fn===o&&this.context===W}emit(o){this.fn&&(this.context?this.fn.call(this.context,o):this.fn(o));const W=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),W}connect(o){this.previous=o,o.next&&(o.next.previous=this),this.next=o.next,o.next=this}destroy(o=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const W=this.next;return this.next=o?null:W,this.previous=null,W}}const U=class o{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new L(null,null,1/0),this.deltaMS=1/o.targetFPMS,this.elapsedMS=1/o.targetFPMS,this._tick=o=>{this._requestId=null,this.started&&(this.update(o),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(o,W,F=G.NORMAL){return this._addListener(new L(o,W,F))}addOnce(o,W,F=G.NORMAL){return this._addListener(new L(o,W,F,!0))}_addListener(o){let W=this._head.next,F=this._head;if(W){for(;W;){if(o.priority>W.priority){o.connect(F);break}F=W,W=W.next}o.previous||o.connect(F)}else o.connect(F);return this._startIfPossible(),this}remove(o,W){let F=this._head.next;for(;F;)F=F.match(o,W)?F.destroy():F.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let o=0,W=this._head;for(;W=W.next;)o++;return o}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let o=this._head.next;for(;o;)o=o.destroy(!0);this._head.destroy(),this._head=null}}update(W=performance.now()){let F;if(W>this.lastTime){if(F=this.elapsedMS=W-this.lastTime,F>this._maxElapsedMS&&(F=this._maxElapsedMS),F*=this.speed,this._minElapsedMS){const o=W-this._lastFrame|0;if(o<this._minElapsedMS)return;this._lastFrame=W-o%this._minElapsedMS}this.deltaMS=F,this.deltaTime=this.deltaMS*o.targetFPMS;const E=this._head;let v=E.next;for(;v;)v=v.emit(this.deltaTime);E.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=W}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(W){const F=Math.min(this.maxFPS,W),E=Math.min(Math.max(0,F)/1e3,o.targetFPMS);this._maxElapsedMS=1/E}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(o){if(0===o)this._minElapsedMS=0;else{const W=Math.max(this.minFPS,o);this._minElapsedMS=1/(W/1e3)}}static get shared(){if(!o._shared){const W=o._shared=new o;W.autoStart=!0,W._protected=!0}return o._shared}static get system(){if(!o._system){const W=o._system=new o;W.autoStart=!0,W._protected=!0}return o._system}};U.targetFPMS=.06;let I=U;Object.defineProperties(v.W0,{TARGET_FPMS:{get:()=>I.targetFPMS,set(o){a.deprecation("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),I.targetFPMS=o}}});var l=F(738637);class h{static init(o){o=Object.assign({autoStart:!0,sharedTicker:!1},o),Object.defineProperty(this,"ticker",{set(o){this._ticker&&this._ticker.remove(this.render,this),this._ticker=o,o&&o.add(this.render,this,G.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=o.sharedTicker?I.shared:new I,o.autoStart&&this.start()}static destroy(){if(this._ticker){const o=this._ticker;this.ticker=null,o.destroy()}}}h.extension=l.A.Application,l.X.add(h)},96457:(o,W,F)=>{F.d(W,{U:()=>E});const E=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i},413781:(o,W,F)=>{function E(o,W=null){const F=6*o;if((W=W||new Uint16Array(F)).length!==F)throw new Error(`Out buffer length is incorrect, got ${W.length} and expected ${F}`);for(let o=0,E=0;o<F;o+=6,E+=4)W[o+0]=E+0,W[o+1]=E+1,W[o+2]=E+2,W[o+3]=E+0,W[o+4]=E+2,W[o+5]=E+3;return W}F.d(W,{L:()=>E})},321671:(o,W,F)=>{function E(o){if(4===o.BYTES_PER_ELEMENT)return o instanceof Float32Array?"Float32Array":o instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===o.BYTES_PER_ELEMENT){if(o instanceof Uint16Array)return"Uint16Array"}else if(1===o.BYTES_PER_ELEMENT&&o instanceof Uint8Array)return"Uint8Array";return null}F.d(W,{L:()=>E})},307627:(o,W,F)=>{function E(o){return o+=0===o?1:0,--o,o|=o>>>1,o|=o>>>2,o|=o>>>4,o|=o>>>8,(o|=o>>>16)+1}function v(o){return!(o&o-1||!o)}function a(o){let W=(o>65535?1:0)<<4,F=((o>>>=W)>255?1:0)<<3;return W|=F,F=((o>>>=F)>15?1:0)<<2,W|=F,F=((o>>>=F)>3?1:0)<<1,W|=F,W|(o>>>=F)>>1}F.d(W,{U5:()=>E,f3:()=>v,p6:()=>a})},892653:(o,W,F)=>{function E(o,W,F){const E=o.length;let v;if(W>=E||0===F)return;const a=E-(F=W+F>E?E-W:F);for(v=W;v<a;++v)o[v]=o[v+F];o.length=a}F.d(W,{d:()=>E})},61036:(o,W,F)=>{function E(o){return 0===o?0:o<0?-1:1}F.d(W,{_:()=>E})},429619:(o,W,F)=>{F.d(W,{L:()=>v});let E=0;function v(){return++E}},578351:(o,W,F)=>{F.r(W),F.d(W,{BaseTextureCache:()=>O,BoundingBox:()=>q,CanvasRenderTarget:()=>s,DATA_URI:()=>w.U,EventEmitter:()=>v,ProgramCache:()=>c,TextureCache:()=>_,clearTextureCache:()=>S,correctBlendMode:()=>r,createIndicesForQuads:()=>K.L,decomposeDataUri:()=>M.Q,deprecation:()=>U,destroyTextureCache:()=>X,detectVideoAlphaMode:()=>k,determineCrossOrigin:()=>H.I,earcut:()=>a,getBufferType:()=>T.L,getCanvasBoundingBox:()=>J,getResolutionOfUrl:()=>b,hex2rgb:()=>x,hex2string:()=>N,interleaveTypedArrays:()=>n,isMobile:()=>E.Fr,isPow2:()=>u.f3,isWebGLSupported:()=>y,log2:()=>u.p6,nextPow2:()=>u.U5,path:()=>p,premultiplyBlendMode:()=>m,premultiplyRgba:()=>B,premultiplyTint:()=>j,premultiplyTintToRgba:()=>V,removeItems:()=>$.d,rgb2hex:()=>t,sayHello:()=>P,sign:()=>Y._,skipHello:()=>Z,string2hex:()=>e,trimCanvas:()=>D,uid:()=>Q.L,url:()=>I});var E=F(968381);E.W0.RETINA_PREFIX=/@([0-9\.]+)x/,E.W0.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var v=F(258055),a=F(827700),G=F(517116);const L={};function U(o,W,F=3){if(L[W])return;let E=(new Error).stack;typeof E>"u"?console.warn("PixiJS Deprecation Warning: ",`${W}\nDeprecated since v${o}`):(E=E.split("\n").splice(F).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${W}\nDeprecated since v${o}`),console.warn(E),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${W}\nDeprecated since v${o}`),console.warn(E))),L[W]=!0}const I={get parse(){return U("7.3.0","utils.url.parse is deprecated, use native URL API instead."),G.qg},get format(){return U("7.3.0","utils.url.format is deprecated, use native URL API instead."),G.GP},get resolve(){return U("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),G.hd}};function l(o){if("string"!=typeof o)throw new TypeError(`Path must be a string. Received ${JSON.stringify(o)}`)}function h(o){return o.split("?")[0].split("#")[0]}const p={toPosix(o){return W="\\",F="/",o.replace(new RegExp(W.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),F);var W,F},isUrl(o){return/^https?:/.test(this.toPosix(o))},isDataUrl:o=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(o),isBlobUrl:o=>o.startsWith("blob:"),hasProtocol(o){return/^[^/:]+:/.test(this.toPosix(o))},getProtocol(o){l(o),o=this.toPosix(o);const W=/^file:\/\/\//.exec(o);if(W)return W[0];const F=/^[^/:]+:\/{0,2}/.exec(o);return F?F[0]:""},toAbsolute(o,W,F){if(l(o),this.isDataUrl(o)||this.isBlobUrl(o))return o;const v=h(this.toPosix(null!=W?W:E.W0.ADAPTER.getBaseUrl())),a=h(this.toPosix(null!=F?F:this.rootname(v)));return(o=this.toPosix(o)).startsWith("/")?p.join(a,o.slice(1)):this.isAbsolute(o)?o:this.join(v,o)},normalize(o){if(l(o),0===o.length)return".";if(this.isDataUrl(o)||this.isBlobUrl(o))return o;let W="";const F=(o=this.toPosix(o)).startsWith("/");this.hasProtocol(o)&&(W=this.rootname(o),o=o.slice(W.length));const E=o.endsWith("/");return(o=function(o,W){let F="",E=0,v=-1,a=0,G=-1;for(let L=0;L<=o.length;++L){if(L<o.length)G=o.charCodeAt(L);else{if(47===G)break;G=47}if(47===G){if(v!==L-1&&1!==a)if(v!==L-1&&2===a){if(F.length<2||2!==E||46!==F.charCodeAt(F.length-1)||46!==F.charCodeAt(F.length-2))if(F.length>2){const o=F.lastIndexOf("/");if(o!==F.length-1){-1===o?(F="",E=0):(F=F.slice(0,o),E=F.length-1-F.lastIndexOf("/")),v=L,a=0;continue}}else if(2===F.length||1===F.length){F="",E=0,v=L,a=0;continue}W&&(F.length>0?F+="/..":F="..",E=2)}else F.length>0?F+=`/${o.slice(v+1,L)}`:F=o.slice(v+1,L),E=L-v-1;v=L,a=0}else 46===G&&-1!==a?++a:a=-1}return F}(o,!1)).length>0&&E&&(o+="/"),F?`/${o}`:W+o},isAbsolute(o){return l(o),o=this.toPosix(o),!!this.hasProtocol(o)||o.startsWith("/")},join(...o){var W;if(0===o.length)return".";let F;for(let E=0;E<o.length;++E){const v=o[E];if(l(v),v.length>0)if(void 0===F)F=v;else{const a=null!==(W=o[E-1])&&void 0!==W?W:"";this.extname(a)?F+=`/../${v}`:F+=`/${v}`}}return void 0===F?".":this.normalize(F)},dirname(o){if(l(o),0===o.length)return".";let W=(o=this.toPosix(o)).charCodeAt(0);const F=47===W;let E=-1,v=!0;const a=this.getProtocol(o),G=o;for(let F=(o=o.slice(a.length)).length-1;F>=1;--F)if(W=o.charCodeAt(F),47===W){if(!v){E=F;break}}else v=!1;return-1===E?F?"/":this.isUrl(G)?a+o:a:F&&1===E?"//":a+o.slice(0,E)},rootname(o){l(o);let W="";if(W=(o=this.toPosix(o)).startsWith("/")?"/":this.getProtocol(o),this.isUrl(o)){const F=o.indexOf("/",W.length);W=-1!==F?o.slice(0,F):o,W.endsWith("/")||(W+="/")}return W},basename(o,W){l(o),W&&l(W),o=h(this.toPosix(o));let F,E=0,v=-1,a=!0;if(void 0!==W&&W.length>0&&W.length<=o.length){if(W.length===o.length&&W===o)return"";let G=W.length-1,L=-1;for(F=o.length-1;F>=0;--F){const U=o.charCodeAt(F);if(47===U){if(!a){E=F+1;break}}else-1===L&&(a=!1,L=F+1),G>=0&&(U===W.charCodeAt(G)?-1==--G&&(v=F):(G=-1,v=L))}return E===v?v=L:-1===v&&(v=o.length),o.slice(E,v)}for(F=o.length-1;F>=0;--F)if(47===o.charCodeAt(F)){if(!a){E=F+1;break}}else-1===v&&(a=!1,v=F+1);return-1===v?"":o.slice(E,v)},extname(o){l(o);let W=-1,F=0,E=-1,v=!0,a=0;for(let G=(o=h(this.toPosix(o))).length-1;G>=0;--G){const L=o.charCodeAt(G);if(47!==L)-1===E&&(v=!1,E=G+1),46===L?-1===W?W=G:1!==a&&(a=1):-1!==W&&(a=-1);else if(!v){F=G+1;break}}return-1===W||-1===E||0===a||1===a&&W===E-1&&W===F+1?"":o.slice(W,E)},parse(o){l(o);const W={root:"",dir:"",base:"",ext:"",name:""};if(0===o.length)return W;let F=(o=h(this.toPosix(o))).charCodeAt(0);const E=this.isAbsolute(o);let v;W.root=this.rootname(o),v=E||this.hasProtocol(o)?1:0;let a=-1,G=0,L=-1,U=!0,I=o.length-1,p=0;for(;I>=v;--I)if(F=o.charCodeAt(I),47!==F)-1===L&&(U=!1,L=I+1),46===F?-1===a?a=I:1!==p&&(p=1):-1!==a&&(p=-1);else if(!U){G=I+1;break}return-1===a||-1===L||0===p||1===p&&a===L-1&&a===G+1?-1!==L&&(W.base=W.name=0===G&&E?o.slice(1,L):o.slice(G,L)):(0===G&&E?(W.name=o.slice(1,a),W.base=o.slice(1,L)):(W.name=o.slice(G,a),W.base=o.slice(G,L)),W.ext=o.slice(a,L)),W.dir=this.dirname(o),W},sep:"/",delimiter:":"};var g=F(424608);let f,A;async function k(){return null!=f||(f=(async()=>{var o;const W=document.createElement("canvas").getContext("webgl");if(!W)return g.Gk.UNPACK;const F=await new Promise((o=>{const W=document.createElement("video");W.onloadeddata=()=>o(W),W.onerror=()=>o(null),W.autoplay=!1,W.crossOrigin="anonymous",W.preload="auto",W.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",W.load()}));if(!F)return g.Gk.UNPACK;const E=W.createTexture();W.bindTexture(W.TEXTURE_2D,E);const v=W.createFramebuffer();W.bindFramebuffer(W.FRAMEBUFFER,v),W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,E,0),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),W.pixelStorei(W.UNPACK_COLORSPACE_CONVERSION_WEBGL,W.NONE),W.texImage2D(W.TEXTURE_2D,0,W.RGBA,W.RGBA,W.UNSIGNED_BYTE,F);const a=new Uint8Array(4);return W.readPixels(0,0,1,1,W.RGBA,W.UNSIGNED_BYTE,a),W.deleteFramebuffer(v),W.deleteTexture(E),null===(o=W.getExtension("WEBGL_lose_context"))||void 0===o||o.loseContext(),a[0]<=a[3]?g.Gk.PMA:g.Gk.UNPACK})()),f}function Z(){U("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function P(){U("7.0.0",'sayHello is deprecated, please use Renderer\'s "hello" option')}function y(){return typeof A>"u"&&(A=function(){var o;const W={stencil:!0,failIfMajorPerformanceCaveat:E.W0.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!E.W0.ADAPTER.getWebGLRenderingContext())return!1;const F=E.W0.ADAPTER.createCanvas();let v=F.getContext("webgl",W)||F.getContext("experimental-webgl",W);const a=!!(null===(o=null==v?void 0:v.getContextAttributes())||void 0===o?void 0:o.stencil);if(v){const o=v.getExtension("WEBGL_lose_context");o&&o.loseContext()}return v=null,a}catch(o){return!1}}()),A}var z=F(817798);function x(o,W=[]){return U("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),z.Q.shared.setValue(o).toRgbArray(W)}function N(o){return U("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),z.Q.shared.setValue(o).toHex()}function e(o){return U("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),z.Q.shared.setValue(o).toNumber()}function t(o){return U("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),z.Q.shared.setValue(o).toNumber()}const m=function(){const o=[],W=[];for(let F=0;F<32;F++)o[F]=F,W[F]=F;o[g.B9.NORMAL_NPM]=g.B9.NORMAL,o[g.B9.ADD_NPM]=g.B9.ADD,o[g.B9.SCREEN_NPM]=g.B9.SCREEN,W[g.B9.NORMAL]=g.B9.NORMAL_NPM,W[g.B9.ADD]=g.B9.ADD_NPM,W[g.B9.SCREEN]=g.B9.SCREEN_NPM;const F=[];return F.push(W),F.push(o),F}();function r(o,W){return m[W?1:0][o]}function B(o,W,F,E=!0){return U("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),z.Q.shared.setValue(o).premultiply(W,E).toArray(null!=F?F:new Float32Array(4))}function j(o,W){return U("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),z.Q.shared.setValue(o).toPremultiplied(W)}function V(o,W,F,E=!0){return U("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),z.Q.shared.setValue(o).premultiply(W,E).toArray(null!=F?F:new Float32Array(4))}var w=F(96457),K=F(413781),T=F(321671);const d={Float32Array,Uint32Array,Int32Array,Uint8Array};function n(o,W){let F=0,E=0;const v={};for(let v=0;v<o.length;v++)E+=W[v],F+=o[v].length;const a=new ArrayBuffer(4*F);let G=null,L=0;for(let F=0;F<o.length;F++){const U=W[F],I=o[F],l=T.L(I);v[l]||(v[l]=new d[l](a)),G=v[l];for(let o=0;o<I.length;o++)G[(o/U|0)*E+L+o%U]=I[o];L+=U}return new Float32Array(a)}var u=F(307627),$=F(892653),Y=F(61036),Q=F(429619);const C=class{constructor(o,W,F,E){this.left=o,this.top=W,this.right=F,this.bottom=E}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};C.EMPTY=new C(0,0,0,0);let q=C;const c={},_=Object.create(null),O=Object.create(null);function X(){let o;for(o in _)_[o].destroy();for(o in O)O[o].destroy()}function S(){let o;for(o in _)delete _[o];for(o in O)delete O[o]}class s{constructor(o,W,F){this._canvas=E.W0.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=F||E.W0.RESOLUTION,this.resize(o,W)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(o,W){this._checkDestroyed(),this._canvas.width=Math.round(o*this.resolution),this._canvas.height=Math.round(W*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(o){this._checkDestroyed(),this._canvas.width=Math.round(o)}get height(){return this._checkDestroyed(),this._canvas.height}set height(o){this._checkDestroyed(),this._canvas.height=Math.round(o)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(null===this._canvas)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function i(o,W,F){for(let E=0,v=4*F*W;E<W;++E,v+=4)if(0!==o[v+3])return!1;return!0}function R(o,W,F,E,v){const a=4*W;for(let W=E,G=E*a+4*F;W<=v;++W,G+=a)if(0!==o[G+3])return!1;return!0}function J(o){const{width:W,height:F}=o,E=o.getContext("2d",{willReadFrequently:!0});if(null===E)throw new TypeError("Failed to get canvas 2D context");const v=E.getImageData(0,0,W,F).data;let a=0,G=0,L=W-1,U=F-1;for(;G<F&&i(v,W,G);)++G;if(G===F)return q.EMPTY;for(;i(v,W,U);)--U;for(;R(v,W,a,G,U);)++a;for(;R(v,W,L,G,U);)--L;return++L,++U,new q(a,G,L,U)}function D(o){const W=J(o),{width:F,height:E}=W;let v=null;if(!W.isEmpty()){const a=o.getContext("2d");if(null===a)throw new TypeError("Failed to get canvas 2D context");v=a.getImageData(W.left,W.top,F,E)}return{width:F,height:E,data:v}}var M=F(296606),H=F(605786);function b(o,W=1){var F;const v=null===(F=E.W0.RETINA_PREFIX)||void 0===F?void 0:F.exec(o);return v?parseFloat(v[1]):W}},296606:(o,W,F)=>{F.d(W,{Q:()=>v});var E=F(96457);function v(o){const W=E.U.exec(o);if(W)return{mediaType:W[1]?W[1].toLowerCase():void 0,subType:W[2]?W[2].toLowerCase():void 0,charset:W[3]?W[3].toLowerCase():void 0,encoding:W[4]?W[4].toLowerCase():void 0,data:W[5]}}},605786:(o,W,F)=>{function E(o,W=globalThis.location){if(o.startsWith("data:"))return"";W=W||globalThis.location;const F=new URL(o,document.baseURI);return F.hostname!==W.hostname||F.port!==W.port||F.protocol!==W.protocol?"anonymous":""}F.d(W,{I:()=>E})},401832:(o,W,F)=>{F.d(W,{MR:()=>v});var E=F(316197);class v extends E.dJ{constructor(o){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float gamma;\nuniform float contrast;\nuniform float saturation;\nuniform float brightness;\nuniform float red;\nuniform float green;\nuniform float blue;\nuniform float alpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (c.a > 0.0) {\n        c.rgb /= c.a;\n\n        vec3 rgb = pow(c.rgb, vec3(1. / gamma));\n        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);\n        rgb.r *= red;\n        rgb.g *= green;\n        rgb.b *= blue;\n        c.rgb = rgb * brightness;\n\n        c.rgb *= c.a;\n    }\n\n    gl_FragColor = c * alpha;\n}\n"),this.gamma=1,this.saturation=1,this.contrast=1,this.brightness=1,this.red=1,this.green=1,this.blue=1,this.alpha=1,Object.assign(this,o)}apply(o,W,F,E){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,o.applyFilter(this,W,F,E)}}var a=F(688172),G="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}";class L extends E.dJ{constructor(o=.5){super(G,"\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform float threshold;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    // A simple & fast algorithm for getting brightness.\n    // It's inaccuracy , but good enought for this feature.\n    float _max = max(max(color.r, color.g), color.b);\n    float _min = min(min(color.r, color.g), color.b);\n    float brightness = (_max + _min) * 0.5;\n\n    if(brightness > threshold) {\n        gl_FragColor = color;\n    } else {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n}\n"),this.threshold=o}get threshold(){return this.uniforms.threshold}set threshold(o){this.uniforms.threshold=o}}const U=class extends E.dJ{constructor(o){super(G,"uniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D bloomTexture;\nuniform float bloomScale;\nuniform float brightness;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    color.rgb *= brightness;\n    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);\n    bloomColor.rgb *= bloomScale;\n    gl_FragColor = color + bloomColor;\n}\n"),this.bloomScale=1,this.brightness=1,this._resolution=E.W0.FILTER_RESOLUTION,"number"==typeof o&&(o={threshold:o});const W=Object.assign(U.defaults,o);this.bloomScale=W.bloomScale,this.brightness=W.brightness;const{kernels:F,blur:v,quality:I,pixelSize:l,resolution:h}=W;this._extractFilter=new L(W.threshold),this._extractFilter.resolution=h,this._blurFilter=F?new a.Q(F):new a.Q(v,I),this.pixelSize=l,this.resolution=h}apply(o,W,F,E,v){const a=o.getFilterTexture();this._extractFilter.apply(o,W,a,1,v);const G=o.getFilterTexture();this._blurFilter.apply(o,a,G,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=G,o.applyFilter(this,W,F,E),o.returnFilterTexture(G),o.returnFilterTexture(a)}get resolution(){return this._resolution}set resolution(o){this._resolution=o,this._extractFilter&&(this._extractFilter.resolution=o),this._blurFilter&&(this._blurFilter.resolution=o)}get threshold(){return this._extractFilter.threshold}set threshold(o){this._extractFilter.threshold=o}get kernels(){return this._blurFilter.kernels}set kernels(o){this._blurFilter.kernels=o}get blur(){return this._blurFilter.blur}set blur(o){this._blurFilter.blur=o}get quality(){return this._blurFilter.quality}set quality(o){this._blurFilter.quality=o}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(o){this._blurFilter.pixelSize=o}};U.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:E.W0.FILTER_RESOLUTION},E.dJ,E.dJ,F(246638),F(528176),E.dJ;const I=class extends E.dJ{constructor(o){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","uniform float radius;\nuniform float strength;\nuniform vec2 center;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nvoid main()\n{\n    vec2 coord = vTextureCoord * filterArea.xy;\n    coord -= center * dimensions.xy;\n    float distance = length(coord);\n    if (distance < radius) {\n        float percent = distance / radius;\n        if (strength > 0.0) {\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n        } else {\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n        }\n    }\n    coord += center * dimensions.xy;\n    coord /= filterArea.xy;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    gl_FragColor = color;\n}\n"),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,I.defaults,o)}apply(o,W,F,E){const{width:v,height:a}=W.filterFrame;this.uniforms.dimensions[0]=v,this.uniforms.dimensions[1]=a,o.applyFilter(this,W,F,E)}get radius(){return this.uniforms.radius}set radius(o){this.uniforms.radius=o}get strength(){return this.uniforms.strength}set strength(o){this.uniforms.strength=o}get center(){return this.uniforms.center}set center(o){this.uniforms.center=o}};var l,h;I.defaults={center:[.5,.5],radius:100,strength:1},(l=l||{}).stringify=(h={"visit_linear-gradient":function(o){return h.visit_gradient(o)},"visit_repeating-linear-gradient":function(o){return h.visit_gradient(o)},"visit_radial-gradient":function(o){return h.visit_gradient(o)},"visit_repeating-radial-gradient":function(o){return h.visit_gradient(o)},visit_gradient:function(o){var W=h.visit(o.orientation);return W&&(W+=", "),o.type+"("+W+h.visit(o.colorStops)+")"},visit_shape:function(o){var W=o.value,F=h.visit(o.at),E=h.visit(o.style);return E&&(W+=" "+E),F&&(W+=" at "+F),W},"visit_default-radial":function(o){var W="",F=h.visit(o.at);return F&&(W+=F),W},"visit_extent-keyword":function(o){var W=o.value,F=h.visit(o.at);return F&&(W+=" at "+F),W},"visit_position-keyword":function(o){return o.value},visit_position:function(o){return h.visit(o.value.x)+" "+h.visit(o.value.y)},"visit_%":function(o){return o.value+"%"},visit_em:function(o){return o.value+"em"},visit_px:function(o){return o.value+"px"},visit_literal:function(o){return h.visit_color(o.value,o)},visit_hex:function(o){return h.visit_color("#"+o.value,o)},visit_rgb:function(o){return h.visit_color("rgb("+o.value.join(", ")+")",o)},visit_rgba:function(o){return h.visit_color("rgba("+o.value.join(", ")+")",o)},visit_color:function(o,W){var F=o,E=h.visit(W.length);return E&&(F+=" "+E),F},visit_angular:function(o){return o.value+"deg"},visit_directional:function(o){return"to "+o.value},visit_array:function(o){var W="",F=o.length;return o.forEach((function(o,E){W+=h.visit(o),E<F-1&&(W+=", ")})),W},visit:function(o){if(!o)return"";if(o instanceof Array)return h.visit_array(o,"");if(o.type){var W=h["visit_"+o.type];if(W)return W(o);throw Error("Missing visitor visit_"+o.type)}throw Error("Invalid node.")}},function(o){return h.visit(o)}),(l=l||{}).parse=function(){var o=/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,W=/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,F=/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,E=/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,v=/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,a=/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,G=/^(left|center|right|top|bottom)/i,L=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,U=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,I=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,l=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,h=/^\(/,p=/^\)/,g=/^,/,f=/^\#([0-9a-fA-F]+)/,A=/^([a-zA-Z]+)/,k=/^rgb/i,Z=/^rgba/i,P=/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/,y="";function z(o){var W=new Error(y+": "+o);throw W.source=y,W}function x(){return N("linear-gradient",o,t)||N("repeating-linear-gradient",W,t)||N("radial-gradient",F,m)||N("repeating-radial-gradient",E,m)}function N(o,W,F){return e(W,(function(W){var E=F();return E&&($(g)||z("Missing comma before color stops")),{type:o,orientation:E,colorStops:w(K)}}))}function e(o,W){var F=$(o);if(F){$(h)||z("Missing (");var E=W(F);return $(p)||z("Missing )"),E}}function t(){return u("directional",v,1)||u("angular",l,1)}function m(){var o,W,F=r();return F&&((o=[]).push(F),W=y,$(g)&&((F=r())?o.push(F):y=W)),o}function r(){var o=function(){var o=u("shape",/^(circle)/i,0);return o&&(o.style=n()||B()),o}()||function(){var o=u("shape",/^(ellipse)/i,0);return o&&(o.style=d()||B()),o}();if(o)o.at=j();else{var W=B();if(W){o=W;var F=j();F&&(o.at=F)}else{var E=V();E&&(o={type:"default-radial",at:E})}}return o}function B(){return u("extent-keyword",a,1)}function j(){if(u("position",/^at/,0)){var o=V();return o||z("Missing positioning value"),o}}function V(){var o={x:d(),y:d()};if(o.x||o.y)return{type:"position",value:o}}function w(o){var W=o(),F=[];if(W)for(F.push(W);$(g);)(W=o())?F.push(W):z("One extra comma");return F}function K(){var o=u("hex",f,1)||e(Z,(function(){return{type:"rgba",value:w(T)}}))||e(k,(function(){return{type:"rgb",value:w(T)}}))||u("literal",A,0);return o||z("Expected color definition"),o.length=d(),o}function T(){return $(P)[1]}function d(){return u("%",U,1)||u("position-keyword",G,1)||n()}function n(){return u("px",L,1)||u("em",I,1)}function u(o,W,F){var E=$(W);if(E)return{type:o,value:E[F]}}function $(o){var W,F;return(F=/^[\n\r\t\s]+/.exec(y))&&Y(F[0].length),(W=o.exec(y))&&Y(W[0].length),W}function Y(o){y=y.substr(o)}return function(o){return y=o.toString(),function(){var o=w(x);return y.length>0&&z("Invalid input not EOF"),o}()}}();var p=l.parse;l.stringify;var g={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},f={red:0,orange:60,yellow:120,green:180,blue:240,purple:300},A={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},k={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(o){var W,F,E,v,a,G=o[0]/360,L=o[1]/100,U=o[2]/100;if(0===L)return[a=255*U,a,a];W=2*U-(F=U<.5?U*(1+L):U+L-U*L),v=[0,0,0];for(var I=0;I<3;I++)(E=G+1/3*-(I-1))<0?E++:E>1&&E--,a=6*E<1?W+6*(F-W)*E:2*E<1?F:3*E<2?W+(F-W)*(2/3-E)*6:W,v[I]=255*a;return v}};function Z(o){switch(typeof o){case"string":return function(o){const W=function(o){Array.isArray(o)&&o.raw&&(o=String.raw(...arguments));var W,F=function(o){var W,F,E=[],v=1;if("string"==typeof o)if(g[o])E=g[o].slice(),F="rgb";else if("transparent"===o)v=0,F="rgb",E=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(o)){var a=o.slice(1);v=1,(U=a.length)<=4?(E=[parseInt(a[0]+a[0],16),parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16)],4===U&&(v=parseInt(a[3]+a[3],16)/255)):(E=[parseInt(a[0]+a[1],16),parseInt(a[2]+a[3],16),parseInt(a[4]+a[5],16)],8===U&&(v=parseInt(a[6]+a[7],16)/255)),E[0]||(E[0]=0),E[1]||(E[1]=0),E[2]||(E[2]=0),F="rgb"}else if(W=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(o)){var G=W[1],L="rgb"===G;F=a=G.replace(/a$/,"");var U="cmyk"===a?4:"gray"===a?1:3;E=W[2].trim().split(/\s*[,\/]\s*|\s+/).map((function(o,W){if(/%$/.test(o))return W===U?parseFloat(o)/100:"rgb"===a?255*parseFloat(o)/100:parseFloat(o);if("h"===a[W]){if(/deg$/.test(o))return parseFloat(o);if(void 0!==f[o])return f[o]}return parseFloat(o)})),G===a&&E.push(1),v=L||void 0===E[U]?1:E[U],E=E.slice(0,U)}else o.length>10&&/[0-9](?:\s|\/)/.test(o)&&(E=o.match(/([0-9]+)/g).map((function(o){return parseFloat(o)})),F=o.match(/([a-z])/gi).join("").toLowerCase());else isNaN(o)?Array.isArray(o)||o.length?(E=[o[0],o[1],o[2]],F="rgb",v=4===o.length?o[3]:1):o instanceof Object&&(null!=o.r||null!=o.red||null!=o.R?(F="rgb",E=[o.r||o.red||o.R||0,o.g||o.green||o.G||0,o.b||o.blue||o.B||0]):(F="hsl",E=[o.h||o.hue||o.H||0,o.s||o.saturation||o.S||0,o.l||o.lightness||o.L||o.b||o.brightness]),v=o.a||o.alpha||o.opacity||1,null!=o.opacity&&(v/=100)):(F="rgb",E=[o>>>16,(65280&o)>>>8,255&o]);return{space:F,values:E,alpha:v}}(o);if(!F.space)return[];const E="h"===F.space[0]?k.min:A.min,v="h"===F.space[0]?k.max:A.max;return(W=Array(3))[0]=Math.min(Math.max(F.values[0],E[0]),v[0]),W[1]=Math.min(Math.max(F.values[1],E[1]),v[1]),W[2]=Math.min(Math.max(F.values[2],E[2]),v[2]),"h"===F.space[0]&&(W=k.rgb(W)),W.push(Math.min(Math.max(F.alpha,0),1)),W}(o);if(!W)throw new Error(`Unable to parse color "${o}" as RGBA.`);return[W[0]/255,W[1]/255,W[2]/255,W[3]]}(o);case"number":return E.Wp.hex2rgb(o);default:return o}}function P(o){return Z(function(o){switch(o.type){case"hex":return`#${o.value}`;case"literal":return o.value;default:return`${o.type}(${o.value.join(",")})`}}(o))}function y(o){return o.toString().length>6?parseFloat(o.toString().substring(0,6)):o}A.hsl=function(o){var W,F,E=o[0]/255,v=o[1]/255,a=o[2]/255,G=Math.min(E,v,a),L=Math.max(E,v,a),U=L-G;return L===G?W=0:E===L?W=(v-a)/U:v===L?W=2+(a-E)/U:a===L&&(W=4+(E-v)/U),(W=Math.min(60*W,360))<0&&(W+=360),F=(G+L)/2,[W,100*(L===G?0:F<=.5?U/(L+G):U/(2-L-G)),100*F]};var z=Object.defineProperty,x=Object.defineProperties,N=Object.getOwnPropertyDescriptors,e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,r=(o,W,F)=>W in o?z(o,W,{enumerable:!0,configurable:!0,writable:!0,value:F}):o[W]=F,B=(o,W)=>{for(var F in W||(W={}))t.call(W,F)&&r(o,F,W[F]);if(e)for(var F of e(W))m.call(W,F)&&r(o,F,W[F]);return o};const j=class extends E.dJ{constructor(o){o&&"css"in o&&(o=((o,W)=>x(o,N(W)))(B({},function(o){const W=p(function(o){let W=o.replace(/\s{2,}/gu," ");return W=W.replace(/;/g,""),W=W.replace(/ ,/g,","),W=W.replace(/\( /g,"("),W=W.replace(/ \)/g,")"),W.trim()}(o));if(0===W.length)throw new Error("Invalid CSS gradient.");if(1!==W.length)throw new Error("Unsupported CSS gradient (multiple gradients is not supported).");const F=W[0],E=function(o){const W={"linear-gradient":0,"radial-gradient":1};if(!(o in W))throw new Error(`Unsupported gradient type "${o}"`);return W[o]}(F.type),v=function(o){const W=function(o){const W=[];for(let F=0;F<o.length;F++){const E=o[F];let v=-1;"literal"===E.type&&E.length&&"type"in E.length&&"%"===E.length.type&&"value"in E.length&&(v=parseFloat(E.length.value)/100),W.push(v)}const F=o=>{for(let F=o;F<W.length;F++)if(-1!==W[F])return{indexDelta:F-o,offset:W[F]};return{indexDelta:W.length-1-o,offset:1}};let E=0;for(let o=0;o<W.length;o++){const v=W[o];if(-1!==v)E=v;else if(0===o)W[o]=0;else if(o+1===W.length)W[o]=1;else{const v=F(o),a=(v.offset-E)/(1+v.indexDelta);for(let F=0;F<=v.indexDelta;F++)W[o+F]=E+(F+1)*a;o+=v.indexDelta,E=W[o]}}return W.map(y)}(o),F=[];for(let E=0;E<o.length;E++){const v=P(o[E]);F.push({offset:W[E],color:v.slice(0,3),alpha:v[3]})}return F}(F.colorStops),a=function(o){if(void 0===o)return 0;if("type"in o&&"value"in o)switch(o.type){case"angular":return parseFloat(o.value);case"directional":return function(o){const W={left:270,top:0,bottom:180,right:90,"left top":315,"top left":315,"left bottom":225,"bottom left":225,"right top":45,"top right":45,"right bottom":135,"bottom right":135};if(!(o in W))throw new Error(`Unsupported directional value "${o}"`);return W[o]}(o.value)}return 0}(F.orientation);return{type:E,stops:v,angle:a}}(o.css||"")),{alpha:o.alpha,maxColors:o.maxColors}));const W=B(B({},j.defaults),o);if(!W.stops||W.stops.length<2)throw new Error("ColorGradientFilter requires at least 2 color stops.");super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vFilterCoord = vTextureCoord * inputSize.xy / outputFrame.zw;\n}\n","const float PI = 3.1415926538;\nconst float PI_2 = PI*2.;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nuniform sampler2D uSampler;\n\nconst int TYPE_LINEAR = 0;\nconst int TYPE_RADIAL = 1;\nconst int TYPE_CONIC = 2;\nconst int MAX_STOPS = 32;\n\nuniform int uNumStops;\nuniform float uAlphas[3*MAX_STOPS];\nuniform vec3 uColors[MAX_STOPS];\nuniform float uOffsets[MAX_STOPS];\nuniform int uType;\nuniform float uAngle;\nuniform float uAlpha;\nuniform int uMaxColors;\n\nstruct ColorStop {\n    float offset;\n    vec3 color;\n    float alpha;\n};\n\nmat2 rotate2d(float angle){\n    return mat2(cos(angle), -sin(angle),\n    sin(angle), cos(angle));\n}\n\nfloat projectLinearPosition(vec2 pos, float angle){\n    vec2 center = vec2(0.5);\n    vec2 result = pos - center;\n    result = rotate2d(angle) * result;\n    result = result + center;\n    return clamp(result.x, 0., 1.);\n}\n\nfloat projectRadialPosition(vec2 pos) {\n    float r = distance(vFilterCoord, vec2(0.5));\n    return clamp(2.*r, 0., 1.);\n}\n\nfloat projectAnglePosition(vec2 pos, float angle) {\n    vec2 center = pos - vec2(0.5);\n    float polarAngle=atan(-center.y, center.x);\n    return mod(polarAngle + angle, PI_2) / PI_2;\n}\n\nfloat projectPosition(vec2 pos, int type, float angle) {\n    if (type == TYPE_LINEAR) {\n        return projectLinearPosition(pos, angle);\n    } else if (type == TYPE_RADIAL) {\n        return projectRadialPosition(pos);\n    } else if (type == TYPE_CONIC) {\n        return projectAnglePosition(pos, angle);\n    }\n\n    return pos.y;\n}\n\nvoid main(void) {\n    // current/original color\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n\n    // skip calculations if gradient alpha is 0\n    if (0.0 == uAlpha) {\n        gl_FragColor = currentColor;\n        return;\n    }\n\n    // project position\n    float y = projectPosition(vFilterCoord, uType, radians(uAngle));\n\n    // check gradient bounds\n    float offsetMin = uOffsets[0];\n    float offsetMax = 0.0;\n\n    for (int i = 0; i < MAX_STOPS; i++) {\n        if (i == uNumStops-1){ // last index\n            offsetMax = uOffsets[i];\n        }\n    }\n\n    if (y  < offsetMin || y > offsetMax) {\n        gl_FragColor = currentColor;\n        return;\n    }\n\n    // limit colors\n    if (uMaxColors > 0) {\n        float stepSize = 1./float(uMaxColors);\n        float stepNumber = float(floor(y/stepSize));\n        y = stepSize * (stepNumber + 0.5);// offset by 0.5 to use color from middle of segment\n    }\n\n    // find color stops\n    ColorStop from;\n    ColorStop to;\n\n    for (int i = 0; i < MAX_STOPS; i++) {\n        if (y >= uOffsets[i]) {\n            from = ColorStop(uOffsets[i], uColors[i], uAlphas[i]);\n            to = ColorStop(uOffsets[i+1], uColors[i+1], uAlphas[i+1]);\n        }\n\n        if (i == uNumStops-1){ // last index\n            break;\n        }\n    }\n\n    // mix colors from stops\n    vec4 colorFrom = vec4(from.color * from.alpha, from.alpha);\n    vec4 colorTo = vec4(to.color * to.alpha, to.alpha);\n\n    float segmentHeight = to.offset - from.offset;\n    float relativePos = y - from.offset;// position from 0 to [segmentHeight]\n    float relativePercent = relativePos / segmentHeight;// position in percent between [from.offset] and [to.offset].\n\n    float gradientAlpha = uAlpha * currentColor.a;\n    vec4 gradientColor = mix(colorFrom, colorTo, relativePercent) * gradientAlpha;\n\n    // mix resulting color with current color\n    gl_FragColor = gradientColor + currentColor*(1.-gradientColor.a);\n}\n"),this._stops=[],this.autoFit=!1,Object.assign(this,W)}get stops(){return this._stops}set stops(o){const W=function(o){return[...o].sort(((o,W)=>o.offset-W.offset))}(o),F=new Float32Array(3*W.length);for(let o=0;o<W.length;o++){const E=Z(W[o].color),v=3*o;F[v+0]=E[0],F[v+1]=E[1],F[v+2]=E[2]}this.uniforms.uColors=F,this.uniforms.uOffsets=W.map((o=>o.offset)),this.uniforms.uAlphas=W.map((o=>o.alpha)),this.uniforms.uNumStops=W.length,this._stops=W}set type(o){this.uniforms.uType=o}get type(){return this.uniforms.uType}set angle(o){this.uniforms.uAngle=o-90}get angle(){return this.uniforms.uAngle+90}set alpha(o){this.uniforms.uAlpha=o}get alpha(){return this.uniforms.uAlpha}set maxColors(o){this.uniforms.uMaxColors=o}get maxColors(){return this.uniforms.uMaxColors}};let V=j;V.LINEAR=0,V.RADIAL=1,V.CONIC=2,V.defaults={type:j.LINEAR,stops:[{offset:0,color:16711680,alpha:1},{offset:1,color:255,alpha:1}],alpha:1,angle:90,maxColors:0},E.dJ,E.dJ,E.dJ,E.dJ,E.dJ;const w=class extends E.dJ{constructor(o){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nconst float SQRT_2 = 1.414213;\n\nconst float light = 1.0;\n\nuniform float curvature;\nuniform float lineWidth;\nuniform float lineContrast;\nuniform bool verticalLine;\nuniform float noise;\nuniform float noiseSize;\n\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\n\nuniform float seed;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));\n    \n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 rgb = gl_FragColor.rgb;\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        rgb += _noise * noise;\n    }\n\n    if (lineWidth > 0.0)\n    {\n        float _c = curvature > 0. ? curvature : 1.;\n        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;\n        vec2 uv = dir * k;\n\n        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;\n        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;\n        rgb *= j;\n        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);\n        rgb *= 0.99 + ceil(segment) * 0.015;\n    }\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    gl_FragColor.rgb = rgb;\n}\n"),this.time=0,this.seed=0,this.uniforms.dimensions=new Float32Array(2),Object.assign(this,w.defaults,o)}apply(o,W,F,E){const{width:v,height:a}=W.filterFrame;this.uniforms.dimensions[0]=v,this.uniforms.dimensions[1]=a,this.uniforms.seed=this.seed,this.uniforms.time=this.time,o.applyFilter(this,W,F,E)}set curvature(o){this.uniforms.curvature=o}get curvature(){return this.uniforms.curvature}set lineWidth(o){this.uniforms.lineWidth=o}get lineWidth(){return this.uniforms.lineWidth}set lineContrast(o){this.uniforms.lineContrast=o}get lineContrast(){return this.uniforms.lineContrast}set verticalLine(o){this.uniforms.verticalLine=o}get verticalLine(){return this.uniforms.verticalLine}set noise(o){this.uniforms.noise=o}get noise(){return this.uniforms.noise}set noiseSize(o){this.uniforms.noiseSize=o}get noiseSize(){return this.uniforms.noiseSize}set vignetting(o){this.uniforms.vignetting=o}get vignetting(){return this.uniforms.vignetting}set vignettingAlpha(o){this.uniforms.vignettingAlpha=o}get vignettingAlpha(){return this.uniforms.vignettingAlpha}set vignettingBlur(o){this.uniforms.vignettingBlur=o}get vignettingBlur(){return this.uniforms.vignettingBlur}};w.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},E.dJ,F(476),E.dJ,F(614812),F(577184);var K="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform vec2 light;\nuniform bool parallel;\nuniform float aspect;\n\nuniform float gain;\nuniform float lacunarity;\nuniform float time;\nuniform float alpha;\n\n${perlin}\n\nvoid main(void) {\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    float d;\n\n    if (parallel) {\n        float _cos = light.x;\n        float _sin = light.y;\n        d = (_cos * coord.x) + (_sin * coord.y * aspect);\n    } else {\n        float dx = coord.x - light.x / dimensions.x;\n        float dy = (coord.y - light.y / dimensions.y) * aspect;\n        float dis = sqrt(dx * dx + dy * dy) + 0.00001;\n        d = dy / dis;\n    }\n\n    vec3 dir = vec3(d, d, 0.0);\n\n    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);\n    noise = mix(noise, 0.0, 0.3);\n    //fade vertically.\n    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);\n    mist.a = 1.0;\n    // apply user alpha\n    mist *= alpha;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;\n\n}\n";const T=class extends E.dJ{constructor(o){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",K.replace("${perlin}","vec3 mod289(vec3 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 mod289(vec4 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 permute(vec4 x)\n{\n    return mod289(((x * 34.0) + 1.0) * x);\n}\nvec4 taylorInvSqrt(vec4 r)\n{\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec3 fade(vec3 t)\n{\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return 2.2 * n_xyz;\n}\nfloat turb(vec3 P, vec3 rep, float lacunarity, float gain)\n{\n    float sum = 0.0;\n    float sc = 1.0;\n    float totalgain = 1.0;\n    for (float i = 0.0; i < 6.0; i++)\n    {\n        sum += totalgain * pnoise(P * sc, rep);\n        sc *= lacunarity;\n        totalgain *= gain;\n    }\n    return abs(sum);\n}\n")),this.parallel=!0,this.time=0,this._angle=0,this.uniforms.dimensions=new Float32Array(2);const W=Object.assign(T.defaults,o);this._angleLight=new E.bR,this.angle=W.angle,this.gain=W.gain,this.lacunarity=W.lacunarity,this.alpha=W.alpha,this.parallel=W.parallel,this.center=W.center,this.time=W.time}apply(o,W,F,E){const{width:v,height:a}=W.filterFrame;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=v,this.uniforms.dimensions[1]=a,this.uniforms.aspect=a/v,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,o.applyFilter(this,W,F,E)}get angle(){return this._angle}set angle(o){this._angle=o;const W=o*E.Td;this._angleLight.x=Math.cos(W),this._angleLight.y=Math.sin(W)}get gain(){return this.uniforms.gain}set gain(o){this.uniforms.gain=o}get lacunarity(){return this.uniforms.lacunarity}set lacunarity(o){this.uniforms.lacunarity=o}get alpha(){return this.uniforms.alpha}set alpha(o){this.uniforms.alpha=o}};T.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1},E.dJ;const d=class extends E.dJ{constructor(o){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float uHue;\nuniform float uAlpha;\nuniform bool uColorize;\nuniform float uSaturation;\nuniform float uLightness;\n\n// https://en.wikipedia.org/wiki/Luma_(video)\nconst vec3 weight = vec3(0.299, 0.587, 0.114);\n\nfloat getWeightedAverage(vec3 rgb) {\n    return rgb.r * weight.r + rgb.g * weight.g + rgb.b * weight.b;\n}\n\n// https://gist.github.com/mairod/a75e7b44f68110e1576d77419d608786?permalink_comment_id=3195243#gistcomment-3195243\nconst vec3 k = vec3(0.57735, 0.57735, 0.57735);\n\nvec3 hueShift(vec3 color, float angle) {\n    float cosAngle = cos(angle);\n    return vec3(\n    color * cosAngle +\n    cross(k, color) * sin(angle) +\n    k * dot(k, color) * (1.0 - cosAngle)\n    );\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    vec4 result = color;\n\n    // colorize\n    if (uColorize) {\n        result.rgb = vec3(getWeightedAverage(result.rgb), 0., 0.);\n    }\n\n    // hue\n    result.rgb = hueShift(result.rgb, uHue);\n\n    // saturation\n    // https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/huesaturation.js\n    float average = (result.r + result.g + result.b) / 3.0;\n\n    if (uSaturation > 0.) {\n        result.rgb += (average - result.rgb) * (1. - 1. / (1.001 - uSaturation));\n    } else {\n        result.rgb -= (average - result.rgb) * uSaturation;\n    }\n\n    // lightness\n    result.rgb = mix(result.rgb, vec3(ceil(uLightness)) * color.a, abs(uLightness));\n\n    // alpha\n    gl_FragColor = mix(color, result, uAlpha);\n}\n"),this._hue=0;const W=Object.assign({},d.defaults,o);Object.assign(this,W)}get hue(){return this._hue}set hue(o){this._hue=o,this.uniforms.uHue=this._hue*(Math.PI/180)}get alpha(){return this.uniforms.uAlpha}set alpha(o){this.uniforms.uAlpha=o}get colorize(){return this.uniforms.uColorize}set colorize(o){this.uniforms.uColorize=o}get lightness(){return this.uniforms.uLightness}set lightness(o){this.uniforms.uLightness=o}get saturation(){return this.uniforms.uSaturation}set saturation(o){this.uniforms.uSaturation=o}};d.defaults={hue:0,saturation:0,lightness:0,colorize:!1,alpha:1},F(543068),E.dJ;const n=class extends E.dJ{constructor(o,W=0){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform float sepia;\nuniform float noise;\nuniform float noiseSize;\nuniform float scratch;\nuniform float scratchDensity;\nuniform float scratchWidth;\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\nuniform float seed;\n\nconst float SQRT_2 = 1.414213;\nconst vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 Overlay(vec3 src, vec3 dst)\n{\n    // if (dst <= 0.5) then: 2 * src * dst\n    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)\n    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n}\n\n\nvoid main()\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 color = gl_FragColor.rgb;\n\n    if (sepia > 0.0)\n    {\n        float gray = (color.x + color.y + color.z) / 3.0;\n        vec3 grayscale = vec3(gray);\n\n        color = Overlay(SEPIA_RGB, grayscale);\n\n        color = grayscale + sepia * (color - grayscale);\n    }\n\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        vec2 dir = vec2(vec2(0.5, 0.5) - coord);\n        dir.y *= dimensions.y / dimensions.x;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    if (scratchDensity > seed && scratch != 0.0)\n    {\n        float phase = seed * 256.0;\n        float s = mod(floor(phase), 2.0);\n        float dist = 1.0 / scratchDensity;\n        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));\n        if (d < seed * 0.6 + 0.4)\n        {\n            highp float period = scratchDensity * 10.0;\n\n            float xx = coord.x * period + phase;\n            float aa = abs(mod(xx, 0.5) * 4.0);\n            float bb = mod(floor(xx / 0.5), 2.0);\n            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);\n\n            float kk = 2.0 * period;\n            float dw = scratchWidth / dimensions.x * (0.75 + seed);\n            float dh = dw * kk;\n\n            float tine = (yy - (2.0 - dh));\n\n            if (tine > 0.0) {\n                float _sign = sign(scratch);\n\n                tine = s * tine / period + scratch + 0.1;\n                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);\n\n                color.rgb *= tine;\n            }\n        }\n    }\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);\n        // float _noise = snoise(d) * 0.5;\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        color += _noise * noise;\n    }\n\n    gl_FragColor.rgb = color;\n}\n"),this.seed=0,this.uniforms.dimensions=new Float32Array(2),"number"==typeof o?(this.seed=o,o=void 0):this.seed=W,Object.assign(this,n.defaults,o)}apply(o,W,F,E){var v,a;this.uniforms.dimensions[0]=null==(v=W.filterFrame)?void 0:v.width,this.uniforms.dimensions[1]=null==(a=W.filterFrame)?void 0:a.height,this.uniforms.seed=this.seed,o.applyFilter(this,W,F,E)}set sepia(o){this.uniforms.sepia=o}get sepia(){return this.uniforms.sepia}set noise(o){this.uniforms.noise=o}get noise(){return this.uniforms.noise}set noiseSize(o){this.uniforms.noiseSize=o}get noiseSize(){return this.uniforms.noiseSize}set scratch(o){this.uniforms.scratch=o}get scratch(){return this.uniforms.scratch}set scratchDensity(o){this.uniforms.scratchDensity=o}get scratchDensity(){return this.uniforms.scratchDensity}set scratchWidth(o){this.uniforms.scratchWidth=o}get scratchWidth(){return this.uniforms.scratchWidth}set vignetting(o){this.uniforms.vignetting=o}get vignetting(){return this.uniforms.vignetting}set vignettingAlpha(o){this.uniforms.vignettingAlpha=o}get vignettingAlpha(){return this.uniforms.vignettingAlpha}set vignettingBlur(o){this.uniforms.vignettingBlur=o}get vignettingBlur(){return this.uniforms.vignettingBlur}};n.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3},F(702328),E.dJ,E.dJ,F(914712),E.dJ,F(689800),E.dJ;class u extends E.dJ{constructor(o){var W,F;super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    color /= total;\n    color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n"),this.uniforms.blur=o.blur,this.uniforms.gradientBlur=o.gradientBlur,this.uniforms.start=null!=(W=o.start)?W:new E.bR(0,window.innerHeight/2),this.uniforms.end=null!=(F=o.end)?F:new E.bR(600,window.innerHeight/2),this.uniforms.delta=new E.bR(30,30),this.uniforms.texSize=new E.bR(window.innerWidth,window.innerHeight),this.updateDelta()}updateDelta(){this.uniforms.delta.x=0,this.uniforms.delta.y=0}get blur(){return this.uniforms.blur}set blur(o){this.uniforms.blur=o}get gradientBlur(){return this.uniforms.gradientBlur}set gradientBlur(o){this.uniforms.gradientBlur=o}get start(){return this.uniforms.start}set start(o){this.uniforms.start=o,this.updateDelta()}get end(){return this.uniforms.end}set end(o){this.uniforms.end=o,this.updateDelta()}}class $ extends u{updateDelta(){const o=this.uniforms.end.x-this.uniforms.start.x,W=this.uniforms.end.y-this.uniforms.start.y,F=Math.sqrt(o*o+W*W);this.uniforms.delta.x=o/F,this.uniforms.delta.y=W/F}}class Y extends u{updateDelta(){const o=this.uniforms.end.x-this.uniforms.start.x,W=this.uniforms.end.y-this.uniforms.start.y,F=Math.sqrt(o*o+W*W);this.uniforms.delta.x=-W/F,this.uniforms.delta.y=o/F}}const Q=class extends E.dJ{constructor(o,W,F,v){super(),"number"==typeof o&&(E.Wp.deprecation("5.3.0","TiltShiftFilter constructor arguments is deprecated, use options."),o={blur:o,gradientBlur:W,start:F,end:v}),o=Object.assign({},Q.defaults,o),this.tiltShiftXFilter=new $(o),this.tiltShiftYFilter=new Y(o)}apply(o,W,F,E){const v=o.getFilterTexture();this.tiltShiftXFilter.apply(o,W,v,1),this.tiltShiftYFilter.apply(o,v,F,E),o.returnFilterTexture(v)}get blur(){return this.tiltShiftXFilter.blur}set blur(o){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=o}get gradientBlur(){return this.tiltShiftXFilter.gradientBlur}set gradientBlur(o){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=o}get start(){return this.tiltShiftXFilter.start}set start(o){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=o}get end(){return this.tiltShiftXFilter.end}set end(o){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=o}};Q.defaults={blur:100,gradientBlur:600,start:void 0,end:void 0};const C=class extends E.dJ{constructor(o){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 twist(vec2 coord)\n{\n    coord -= offset;\n\n    float dist = length(coord);\n\n    if (dist < radius)\n    {\n        float ratioDist = (radius - dist) / radius;\n        float angleMod = ratioDist * ratioDist * angle;\n        float s = sin(angleMod);\n        float c = cos(angleMod);\n        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n    }\n\n    coord += offset;\n\n    return coord;\n}\n\nvoid main(void)\n{\n\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = twist(coord);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord );\n\n}\n"),Object.assign(this,C.defaults,o)}get offset(){return this.uniforms.offset}set offset(o){this.uniforms.offset=o}get radius(){return this.uniforms.radius}set radius(o){this.uniforms.radius=o}get angle(){return this.uniforms.angle}set angle(o){this.uniforms.angle=o}};C.defaults={radius:200,angle:4,padding:20,offset:new E.bR},F(412508)},478128:(o,W,F)=>{F.d(W,{ZYG:()=>U.Z,Dl5:()=>mo,lgM:()=>w,sP:()=>d.sP,B9A:()=>E.B9,BxG:()=>So,T7$:()=>Do,mcf:()=>v.mc,Tde:()=>E.Td,AgS:()=>E.Ag,dJT:()=>E.dJ,A1g:()=>xo.A1,oA$:()=>E.oA,bRX:()=>E.bR,M_G:()=>E.M_,Y7R:()=>E.Y7,kxk:()=>a.k,zo6:()=>wo,gPd:()=>E.gP,RvI:()=>E.Rv,XOh:()=>E.XO,W0u:()=>E.W0});var E=F(316197),v=F(110715),a=F(672076);const G=new E.uq;v.q9.prototype._cacheAsBitmap=!1,v.q9.prototype._cacheData=null,v.q9.prototype._cacheAsBitmapResolution=null,v.q9.prototype._cacheAsBitmapMultisample=null;class L{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(v.q9.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(o){o!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=o,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(o){o!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=o,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(o){if(this._cacheAsBitmap===o)return;let W;this._cacheAsBitmap=o,o?(this._cacheData||(this._cacheData=new L),W=this._cacheData,W.originalRender=this.render,W.originalRenderCanvas=this.renderCanvas,W.originalUpdateTransform=this.updateTransform,W.originalCalculateBounds=this.calculateBounds,W.originalGetLocalBounds=this.getLocalBounds,W.originalDestroy=this.destroy,W.originalContainsPoint=this.containsPoint,W.originalMask=this._mask,W.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(W=this._cacheData,W.sprite&&this._destroyCachedDisplayObject(),this.render=W.originalRender,this.renderCanvas=W.originalRenderCanvas,this.calculateBounds=W.originalCalculateBounds,this.getLocalBounds=W.originalGetLocalBounds,this.destroy=W.originalDestroy,this.updateTransform=W.originalUpdateTransform,this.containsPoint=W.originalContainsPoint,this._mask=W.originalMask,this.filterArea=W.originalFilterArea)}}}),v.q9.prototype._renderCached=function(o){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(o),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(o))},v.q9.prototype._initCachedDisplayObject=function(o){var W,F,v;if(null===(W=this._cacheData)||void 0===W?void 0:W.sprite)return;const L=this.alpha;this.alpha=1,o.batch.flush();const U=this.getLocalBounds(new E.M_,!0);if(null===(F=this.filters)||void 0===F?void 0:F.length){const o=this.filters[0].padding;U.pad(o)}const I=this.cacheAsBitmapResolution||o.resolution;U.ceil(I),U.width=Math.max(U.width,1/I),U.height=Math.max(U.height,1/I);const l=o.renderTexture.current,h=o.renderTexture.sourceFrame.clone(),p=o.renderTexture.destinationFrame.clone(),g=o.projection.transform,f=E.Y7.create({width:U.width,height:U.height,resolution:I,multisample:null!==(v=this.cacheAsBitmapMultisample)&&void 0!==v?v:o.multisample}),A=`cacheAsBitmap_${E.Wp.uid()}`;this._cacheData.textureCacheId=A,E.t5.addToCache(f.baseTexture,A),E.gP.addToCache(f,A);const k=this.transform.localTransform.copyTo(G).invert().translate(-U.x,-U.y);this.render=this._cacheData.originalRender,o.render(this,{renderTexture:f,clear:!0,transform:k,skipUpdateTransform:!1}),o.framebuffer.blit(),o.projection.transform=g,o.renderTexture.bind(l,h,p),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=L;const Z=new a.k(f);Z.transform.worldTransform=this.transform.worldTransform,Z.anchor.x=-U.x/U.width,Z.anchor.y=-U.y/U.height,Z.alpha=L,Z._bounds=this._bounds,this._cacheData.sprite=Z,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=Z.containsPoint.bind(Z)},v.q9.prototype._renderCachedCanvas=function(o){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(o),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(o))},v.q9.prototype._initCachedDisplayObjectCanvas=function(o){var W;if(null===(W=this._cacheData)||void 0===W?void 0:W.sprite)return;const F=this.getLocalBounds(new E.M_,!0),v=this.alpha;this.alpha=1;const L=o.canvasContext.activeContext,U=o._projTransform,I=this.cacheAsBitmapResolution||o.resolution;F.ceil(I),F.width=Math.max(F.width,1/I),F.height=Math.max(F.height,1/I);const l=E.Y7.create({width:F.width,height:F.height,resolution:I}),h=`cacheAsBitmap_${E.Wp.uid()}`;this._cacheData.textureCacheId=h,E.t5.addToCache(l.baseTexture,h),E.gP.addToCache(l,h);const p=G;this.transform.localTransform.copyTo(p),p.invert(),p.tx-=F.x,p.ty-=F.y,this.renderCanvas=this._cacheData.originalRenderCanvas,o.render(this,{renderTexture:l,clear:!0,transform:p,skipUpdateTransform:!1}),o.canvasContext.activeContext=L,o._projTransform=U,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=v;const g=new a.k(l);g.transform.worldTransform=this.transform.worldTransform,g.anchor.x=-F.x/F.width,g.anchor.y=-F.y/F.height,g.alpha=v,g._bounds=this._bounds,this._cacheData.sprite=g,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=o._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=g.containsPoint.bind(g)},v.q9.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},v.q9.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},v.q9.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,E.t5.removeFromCache(this._cacheData.textureCacheId),E.gP.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},v.q9.prototype._cacheAsBitmapDestroy=function(o){this.cacheAsBitmap=!1,this.destroy(o)},v.q9.prototype.name=null,v.mc.prototype.getChildByName=function(o,W){for(let W=0,F=this.children.length;W<F;W++)if(this.children[W].name===o)return this.children[W];if(W)for(let W=0,F=this.children.length;W<F;W++){const F=this.children[W];if(!F.getChildByName)continue;const E=F.getChildByName(o,!0);if(E)return E}return null},v.q9.prototype.getGlobalPosition=function(o=new E.bR,W=!1){return this.parent?this.parent.toGlobal(this.position,o,W):(o.x=this.position.x,o.y=this.position.y),o};var U=F(246638),I=F(528176),l=F(698539),h=F(132565);class p extends E.dJ{constructor(){super("\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}}class g extends E.dJ{constructor(o=.5,W=Math.random()){super(E.Eo,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0}),this.noise=o,this.seed=W}get noise(){return this.uniforms.uNoise}set noise(o){this.uniforms.uNoise=o}get seed(){return this.uniforms.uSeed}set seed(o){this.uniforms.uSeed=o}}const f={AlphaFilter:U.Z,BlurFilter:I.e,BlurFilterPass:I.H,ColorMatrixFilter:l.N,DisplacementFilter:h.U,FXAAFilter:p,NoiseFilter:g};Object.entries(f).forEach((([o,W])=>{Object.defineProperty(f,o,{get:()=>(E.Wp.deprecation("7.1.0",`filters.${o} has moved to ${o}`),W)})}));const A=new class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(o){this.removeTickerListener(),this.events=o,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(o){this._pauseUpdate=o}addTickerListener(){this.tickerAdded||!this.domElement||(E.Rv.system.add(this.tickerUpdate,this,E.dQ.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(E.Rv.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove)return void(this._didMove=!1);const o=this.events.rootPointerEvent;this.events.supportsTouchEvents&&"touch"===o.pointerType||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:o.clientX,clientY:o.clientY}))}tickerUpdate(o){this._deltaTime+=o,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}};class k{constructor(o){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=k.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new E.bR,this.page=new E.bR,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=o}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(o,W,F){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(o,W,F,E,v){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Z extends k{constructor(){super(...arguments),this.client=new E.bR,this.movement=new E.bR,this.offset=new E.bR,this.global=new E.bR,this.screen=new E.bR}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(o,W,F){return o.worldTransform.applyInverse(F||this.global,W)}getModifierState(o){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(o)}initMouseEvent(o,W,F,E,v,a,G,L,U,I,l,h,p,g,f){throw new Error("Method not implemented.")}}class P extends Z{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class y extends Z{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}y.DOM_DELTA_PIXEL=0,y.DOM_DELTA_LINE=1,y.DOM_DELTA_PAGE=2;const z=new E.bR,x=new E.bR;class N{constructor(o){this.dispatch=new E.Wp.EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=o,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(o,W){this.mappingTable[o]||(this.mappingTable[o]=[]),this.mappingTable[o].push({fn:W,priority:0}),this.mappingTable[o].sort(((o,W)=>o.priority-W.priority))}dispatchEvent(o,W){o.propagationStopped=!1,o.propagationImmediatelyStopped=!1,this.propagate(o,W),this.dispatch.emit(W||o.type,o)}mapEvent(o){if(!this.rootTarget)return;const W=this.mappingTable[o.type];if(W)for(let F=0,E=W.length;F<E;F++)W[F].fn(o);else console.warn(`[EventBoundary]: Event mapping not defined for ${o.type}`)}hitTest(o,W){A.pauseUpdate=!0;const F=this[this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive"](this.rootTarget,this.rootTarget.eventMode,z.set(o,W),this.hitTestFn,this.hitPruneFn);return F&&F[0]}propagate(o,W){if(!o.target)return;const F=o.composedPath();o.eventPhase=o.CAPTURING_PHASE;for(let E=0,v=F.length-1;E<v;E++)if(o.currentTarget=F[E],this.notifyTarget(o,W),o.propagationStopped||o.propagationImmediatelyStopped)return;if(o.eventPhase=o.AT_TARGET,o.currentTarget=o.target,this.notifyTarget(o,W),!o.propagationStopped&&!o.propagationImmediatelyStopped){o.eventPhase=o.BUBBLING_PHASE;for(let E=F.length-2;E>=0;E--)if(o.currentTarget=F[E],this.notifyTarget(o,W),o.propagationStopped||o.propagationImmediatelyStopped)return}}all(o,W,F=this._allInteractiveElements){if(0===F.length)return;o.eventPhase=o.BUBBLING_PHASE;const E=Array.isArray(W)?W:[W];for(let W=F.length-1;W>=0;W--)E.forEach((E=>{o.currentTarget=F[W],this.notifyTarget(o,E)}))}propagationPath(o){const W=[o];for(let F=0;F<2048&&o!==this.rootTarget;F++){if(!o.parent)throw new Error("Cannot find propagation path to disconnected target");W.push(o.parent),o=o.parent}return W.reverse(),W}hitTestMoveRecursive(o,W,F,E,v,a=!1){let G=!1;if(this._interactivePrune(o))return null;if(("dynamic"===o.eventMode||"dynamic"===W)&&(A.pauseUpdate=!1),o.interactiveChildren&&o.children){const L=o.children;for(let U=L.length-1;U>=0;U--){const I=L[U],l=this.hitTestMoveRecursive(I,this._isInteractive(W)?W:I.eventMode,F,E,v,a||v(o,F));if(l){if(l.length>0&&!l[l.length-1].parent)continue;const W=o.isInteractive();(l.length>0||W)&&(W&&this._allInteractiveElements.push(o),l.push(o)),0===this._hitElements.length&&(this._hitElements=l),G=!0}}}const L=this._isInteractive(W),U=o.isInteractive();return L&&U&&this._allInteractiveElements.push(o),a||this._hitElements.length>0?null:G?this._hitElements:L&&!v(o,F)&&E(o,F)?U?[o]:[]:null}hitTestRecursive(o,W,F,E,v){if(this._interactivePrune(o)||v(o,F))return null;if(("dynamic"===o.eventMode||"dynamic"===W)&&(A.pauseUpdate=!1),o.interactiveChildren&&o.children){const a=o.children;for(let G=a.length-1;G>=0;G--){const L=a[G],U=this.hitTestRecursive(L,this._isInteractive(W)?W:L.eventMode,F,E,v);if(U){if(U.length>0&&!U[U.length-1].parent)continue;const W=o.isInteractive();return(U.length>0||W)&&U.push(o),U}}}const a=this._isInteractive(W),G=o.isInteractive();return a&&E(o,F)?G?[o]:[]:null}_isInteractive(o){return"static"===o||"dynamic"===o}_interactivePrune(o){return!(o&&!o.isMask&&o.visible&&o.renderable&&"none"!==o.eventMode&&("passive"!==o.eventMode||o.interactiveChildren)&&!o.isMask)}hitPruneFn(o,W){var F;if(o.hitArea&&(o.worldTransform.applyInverse(W,x),!o.hitArea.contains(x.x,x.y)))return!0;if(o._mask){const E=o._mask.isMaskData?o._mask.maskObject:o._mask;if(E&&!(null===(F=E.containsPoint)||void 0===F?void 0:F.call(E,W)))return!0}return!1}hitTestFn(o,W){return"passive"!==o.eventMode&&(!!o.hitArea||!!o.containsPoint&&o.containsPoint(W))}notifyTarget(o,W){var F,E;const v=`on${W=null!=W?W:o.type}`;null===(E=(F=o.currentTarget)[v])||void 0===E||E.call(F,o);const a=o.eventPhase===o.CAPTURING_PHASE||o.eventPhase===o.AT_TARGET?`${W}capture`:W;this.notifyListeners(o,a),o.eventPhase===o.AT_TARGET&&this.notifyListeners(o,W)}mapPointerDown(o){if(!(o instanceof P))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const W=this.createPointerEvent(o);if(this.dispatchEvent(W,"pointerdown"),"touch"===W.pointerType)this.dispatchEvent(W,"touchstart");else if("mouse"===W.pointerType||"pen"===W.pointerType){const o=2===W.button;this.dispatchEvent(W,o?"rightdown":"mousedown")}this.trackingData(o.pointerId).pressTargetsByButton[o.button]=W.composedPath(),this.freeEvent(W)}mapPointerMove(o){var W,F,E;if(!(o instanceof P))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const v=this.createPointerEvent(o);this._isPointerMoveEvent=!1;const a="mouse"===v.pointerType||"pen"===v.pointerType,G=this.trackingData(o.pointerId),L=this.findMountedTarget(G.overTargets);if((null===(W=G.overTargets)||void 0===W?void 0:W.length)>0&&L!==v.target){const W="mousemove"===o.type?"mouseout":"pointerout",F=this.createPointerEvent(o,W,L);if(this.dispatchEvent(F,"pointerout"),a&&this.dispatchEvent(F,"mouseout"),!v.composedPath().includes(L)){const W=this.createPointerEvent(o,"pointerleave",L);for(W.eventPhase=W.AT_TARGET;W.target&&!v.composedPath().includes(W.target);)W.currentTarget=W.target,this.notifyTarget(W),a&&this.notifyTarget(W,"mouseleave"),W.target=W.target.parent;this.freeEvent(W)}this.freeEvent(F)}if(L!==v.target){const W="mousemove"===o.type?"mouseover":"pointerover",F=this.clonePointerEvent(v,W);this.dispatchEvent(F,"pointerover"),a&&this.dispatchEvent(F,"mouseover");let E=null==L?void 0:L.parent;for(;E&&E!==this.rootTarget.parent&&E!==v.target;)E=E.parent;if(!E||E===this.rootTarget.parent){const o=this.clonePointerEvent(v,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==L&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),a&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;this.freeEvent(o)}this.freeEvent(F)}const U=[],I=null===(F=this.enableGlobalMoveEvents)||void 0===F||F;this.moveOnAll?U.push("pointermove"):this.dispatchEvent(v,"pointermove"),I&&U.push("globalpointermove"),"touch"===v.pointerType&&(this.moveOnAll?U.splice(1,0,"touchmove"):this.dispatchEvent(v,"touchmove"),I&&U.push("globaltouchmove")),a&&(this.moveOnAll?U.splice(1,0,"mousemove"):this.dispatchEvent(v,"mousemove"),I&&U.push("globalmousemove"),this.cursor=null===(E=v.target)||void 0===E?void 0:E.cursor),U.length>0&&this.all(v,U),this._allInteractiveElements.length=0,this._hitElements.length=0,G.overTargets=v.composedPath(),this.freeEvent(v)}mapPointerOver(o){var W;if(!(o instanceof P))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const F=this.trackingData(o.pointerId),E=this.createPointerEvent(o),v="mouse"===E.pointerType||"pen"===E.pointerType;this.dispatchEvent(E,"pointerover"),v&&this.dispatchEvent(E,"mouseover"),"mouse"===E.pointerType&&(this.cursor=null===(W=E.target)||void 0===W?void 0:W.cursor);const a=this.clonePointerEvent(E,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),v&&this.notifyTarget(a,"mouseenter"),a.target=a.target.parent;F.overTargets=E.composedPath(),this.freeEvent(E),this.freeEvent(a)}mapPointerOut(o){if(!(o instanceof P))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const W=this.trackingData(o.pointerId);if(W.overTargets){const F="mouse"===o.pointerType||"pen"===o.pointerType,E=this.findMountedTarget(W.overTargets),v=this.createPointerEvent(o,"pointerout",E);this.dispatchEvent(v),F&&this.dispatchEvent(v,"mouseout");const a=this.createPointerEvent(o,"pointerleave",E);for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),F&&this.notifyTarget(a,"mouseleave"),a.target=a.target.parent;W.overTargets=null,this.freeEvent(v),this.freeEvent(a)}this.cursor=null}mapPointerUp(o){if(!(o instanceof P))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const W=performance.now(),F=this.createPointerEvent(o);if(this.dispatchEvent(F,"pointerup"),"touch"===F.pointerType)this.dispatchEvent(F,"touchend");else if("mouse"===F.pointerType||"pen"===F.pointerType){const o=2===F.button;this.dispatchEvent(F,o?"rightup":"mouseup")}const E=this.trackingData(o.pointerId),v=this.findMountedTarget(E.pressTargetsByButton[o.button]);let a=v;if(v&&!F.composedPath().includes(v)){let W=v;for(;W&&!F.composedPath().includes(W);){if(F.currentTarget=W,this.notifyTarget(F,"pointerupoutside"),"touch"===F.pointerType)this.notifyTarget(F,"touchendoutside");else if("mouse"===F.pointerType||"pen"===F.pointerType){const o=2===F.button;this.notifyTarget(F,o?"rightupoutside":"mouseupoutside")}W=W.parent}delete E.pressTargetsByButton[o.button],a=W}if(a){const v=this.clonePointerEvent(F,"click");v.target=a,v.path=null,E.clicksByButton[o.button]||(E.clicksByButton[o.button]={clickCount:0,target:v.target,timeStamp:W});const G=E.clicksByButton[o.button];if(G.target===v.target&&W-G.timeStamp<200?++G.clickCount:G.clickCount=1,G.target=v.target,G.timeStamp=W,v.detail=G.clickCount,"mouse"===v.pointerType){const o=2===v.button;this.dispatchEvent(v,o?"rightclick":"click")}else"touch"===v.pointerType&&this.dispatchEvent(v,"tap");this.dispatchEvent(v,"pointertap"),this.freeEvent(v)}this.freeEvent(F)}mapPointerUpOutside(o){if(!(o instanceof P))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const W=this.trackingData(o.pointerId),F=this.findMountedTarget(W.pressTargetsByButton[o.button]),E=this.createPointerEvent(o);if(F){let v=F;for(;v;)E.currentTarget=v,this.notifyTarget(E,"pointerupoutside"),"touch"===E.pointerType?this.notifyTarget(E,"touchendoutside"):("mouse"===E.pointerType||"pen"===E.pointerType)&&this.notifyTarget(E,2===E.button?"rightupoutside":"mouseupoutside"),v=v.parent;delete W.pressTargetsByButton[o.button]}this.freeEvent(E)}mapWheel(o){if(!(o instanceof y))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");const W=this.createWheelEvent(o);this.dispatchEvent(W),this.freeEvent(W)}findMountedTarget(o){if(!o)return null;let W=o[0];for(let F=1;F<o.length&&o[F].parent===W;F++)W=o[F];return W}createPointerEvent(o,W,F){var E;const v=this.allocateEvent(P);return this.copyPointerData(o,v),this.copyMouseData(o,v),this.copyData(o,v),v.nativeEvent=o.nativeEvent,v.originalEvent=o,v.target=null!==(E=null!=F?F:this.hitTest(v.global.x,v.global.y))&&void 0!==E?E:this._hitElements[0],"string"==typeof W&&(v.type=W),v}createWheelEvent(o){const W=this.allocateEvent(y);return this.copyWheelData(o,W),this.copyMouseData(o,W),this.copyData(o,W),W.nativeEvent=o.nativeEvent,W.originalEvent=o,W.target=this.hitTest(W.global.x,W.global.y),W}clonePointerEvent(o,W){const F=this.allocateEvent(P);return F.nativeEvent=o.nativeEvent,F.originalEvent=o.originalEvent,this.copyPointerData(o,F),this.copyMouseData(o,F),this.copyData(o,F),F.target=o.target,F.path=o.composedPath().slice(),F.type=null!=W?W:F.type,F}copyWheelData(o,W){W.deltaMode=o.deltaMode,W.deltaX=o.deltaX,W.deltaY=o.deltaY,W.deltaZ=o.deltaZ}copyPointerData(o,W){o instanceof P&&W instanceof P&&(W.pointerId=o.pointerId,W.width=o.width,W.height=o.height,W.isPrimary=o.isPrimary,W.pointerType=o.pointerType,W.pressure=o.pressure,W.tangentialPressure=o.tangentialPressure,W.tiltX=o.tiltX,W.tiltY=o.tiltY,W.twist=o.twist)}copyMouseData(o,W){o instanceof Z&&W instanceof Z&&(W.altKey=o.altKey,W.button=o.button,W.buttons=o.buttons,W.client.copyFrom(o.client),W.ctrlKey=o.ctrlKey,W.metaKey=o.metaKey,W.movement.copyFrom(o.movement),W.screen.copyFrom(o.screen),W.shiftKey=o.shiftKey,W.global.copyFrom(o.global))}copyData(o,W){W.isTrusted=o.isTrusted,W.srcElement=o.srcElement,W.timeStamp=performance.now(),W.type=o.type,W.detail=o.detail,W.view=o.view,W.which=o.which,W.layer.copyFrom(o.layer),W.page.copyFrom(o.page)}trackingData(o){return this.mappingState.trackingData[o]||(this.mappingState.trackingData[o]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[o]}allocateEvent(o){this.eventPool.has(o)||this.eventPool.set(o,[]);const W=this.eventPool.get(o).pop()||new o(this);return W.eventPhase=W.NONE,W.currentTarget=null,W.path=null,W.target=null,W}freeEvent(o){if(o.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const W=o.constructor;this.eventPool.has(W)||this.eventPool.set(W,[]),this.eventPool.get(W).push(o)}notifyListeners(o,W){const F=o.currentTarget._events[W];if(F&&o.currentTarget.isInteractive())if("fn"in F)F.once&&o.currentTarget.removeListener(W,F.fn,void 0,!0),F.fn.call(F.context,o);else for(let E=0,v=F.length;E<v&&!o.propagationImmediatelyStopped;E++)F[E].once&&o.currentTarget.removeListener(W,F[E].fn,void 0,!0),F[E].fn.call(F[E].context,o)}}const e={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},t=class o{constructor(W){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=W,this.rootBoundary=new N(null),A.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new P(null),this.rootWheelEvent=new y(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...o.defaultEventFeatures},{set:(o,W,F)=>("globalMove"===W&&(this.rootBoundary.enableGlobalMoveEvents=F),o[W]=F,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(W){var F,E;const{view:v,resolution:a}=this.renderer;this.setTargetElement(v),this.resolution=a,o._defaultEventMode=null!==(F=W.eventMode)&&void 0!==F?F:"auto",Object.assign(this.features,null!==(E=W.eventFeatures)&&void 0!==E?E:{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(o){this.resolution=o}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(o){o=o||"default";let W=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(W=!1),this.currentCursor===o)return;this.currentCursor=o;const F=this.cursorStyles[o];if(F)switch(typeof F){case"string":W&&(this.domElement.style.cursor=F);break;case"function":F(o);break;case"object":W&&Object.assign(this.domElement.style,F)}else W&&"string"==typeof o&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,o)&&(this.domElement.style.cursor=o)}get pointer(){return this.rootPointerEvent}onPointerDown(o){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const W=this.normalizeToPointerData(o);this.autoPreventDefault&&W[0].isNormalized&&(o.cancelable||!("cancelable"in o))&&o.preventDefault();for(let o=0,F=W.length;o<F;o++){const F=W[o],E=this.bootstrapEvent(this.rootPointerEvent,F);this.rootBoundary.mapEvent(E)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(o){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,A.pointerMoved();const W=this.normalizeToPointerData(o);for(let o=0,F=W.length;o<F;o++){const F=this.bootstrapEvent(this.rootPointerEvent,W[o]);this.rootBoundary.mapEvent(F)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(o){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let W=o.target;o.composedPath&&o.composedPath().length>0&&(W=o.composedPath()[0]);const F=W!==this.domElement?"outside":"",E=this.normalizeToPointerData(o);for(let o=0,W=E.length;o<W;o++){const W=this.bootstrapEvent(this.rootPointerEvent,E[o]);W.type+=F,this.rootBoundary.mapEvent(W)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(o){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const W=this.normalizeToPointerData(o);for(let o=0,F=W.length;o<F;o++){const F=this.bootstrapEvent(this.rootPointerEvent,W[o]);this.rootBoundary.mapEvent(F)}this.setCursor(this.rootBoundary.cursor)}onWheel(o){if(!this.features.wheel)return;const W=this.normalizeWheelEvent(o);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(W)}setTargetElement(o){this.removeEvents(),this.domElement=o,A.domElement=o,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;A.addTickerListener();const o=this.domElement.style;o&&(globalThis.navigator.msPointerEnabled?(o.msContentZooming="none",o.msTouchAction="none"):this.supportsPointerEvents&&(o.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;A.removeTickerListener();const o=this.domElement.style;globalThis.navigator.msPointerEnabled?(o.msContentZooming="",o.msTouchAction=""):this.supportsPointerEvents&&(o.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(o,W,F){const E=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},v=1/this.resolution;o.x=(W-E.left)*(this.domElement.width/E.width)*v,o.y=(F-E.top)*(this.domElement.height/E.height)*v}normalizeToPointerData(o){const W=[];if(this.supportsTouchEvents&&o instanceof TouchEvent)for(let F=0,E=o.changedTouches.length;F<E;F++){const E=o.changedTouches[F];typeof E.button>"u"&&(E.button=0),typeof E.buttons>"u"&&(E.buttons=1),typeof E.isPrimary>"u"&&(E.isPrimary=1===o.touches.length&&"touchstart"===o.type),typeof E.width>"u"&&(E.width=E.radiusX||1),typeof E.height>"u"&&(E.height=E.radiusY||1),typeof E.tiltX>"u"&&(E.tiltX=0),typeof E.tiltY>"u"&&(E.tiltY=0),typeof E.pointerType>"u"&&(E.pointerType="touch"),typeof E.pointerId>"u"&&(E.pointerId=E.identifier||0),typeof E.pressure>"u"&&(E.pressure=E.force||.5),typeof E.twist>"u"&&(E.twist=0),typeof E.tangentialPressure>"u"&&(E.tangentialPressure=0),typeof E.layerX>"u"&&(E.layerX=E.offsetX=E.clientX),typeof E.layerY>"u"&&(E.layerY=E.offsetY=E.clientY),E.isNormalized=!0,E.type=o.type,W.push(E)}else if(!globalThis.MouseEvent||o instanceof MouseEvent&&!(this.supportsPointerEvents&&o instanceof globalThis.PointerEvent)){const F=o;typeof F.isPrimary>"u"&&(F.isPrimary=!0),typeof F.width>"u"&&(F.width=1),typeof F.height>"u"&&(F.height=1),typeof F.tiltX>"u"&&(F.tiltX=0),typeof F.tiltY>"u"&&(F.tiltY=0),typeof F.pointerType>"u"&&(F.pointerType="mouse"),typeof F.pointerId>"u"&&(F.pointerId=1),typeof F.pressure>"u"&&(F.pressure=.5),typeof F.twist>"u"&&(F.twist=0),typeof F.tangentialPressure>"u"&&(F.tangentialPressure=0),F.isNormalized=!0,W.push(F)}else W.push(o);return W}normalizeWheelEvent(o){const W=this.rootWheelEvent;return this.transferMouseData(W,o),W.deltaX=o.deltaX,W.deltaY=o.deltaY,W.deltaZ=o.deltaZ,W.deltaMode=o.deltaMode,this.mapPositionToPoint(W.screen,o.clientX,o.clientY),W.global.copyFrom(W.screen),W.offset.copyFrom(W.screen),W.nativeEvent=o,W.type=o.type,W}bootstrapEvent(o,W){return o.originalEvent=null,o.nativeEvent=W,o.pointerId=W.pointerId,o.width=W.width,o.height=W.height,o.isPrimary=W.isPrimary,o.pointerType=W.pointerType,o.pressure=W.pressure,o.tangentialPressure=W.tangentialPressure,o.tiltX=W.tiltX,o.tiltY=W.tiltY,o.twist=W.twist,this.transferMouseData(o,W),this.mapPositionToPoint(o.screen,W.clientX,W.clientY),o.global.copyFrom(o.screen),o.offset.copyFrom(o.screen),o.isTrusted=W.isTrusted,"pointerleave"===o.type&&(o.type="pointerout"),o.type.startsWith("mouse")&&(o.type=o.type.replace("mouse","pointer")),o.type.startsWith("touch")&&(o.type=e[o.type]||o.type),o}transferMouseData(o,W){o.isTrusted=W.isTrusted,o.srcElement=W.srcElement,o.timeStamp=performance.now(),o.type=W.type,o.altKey=W.altKey,o.button=W.button,o.buttons=W.buttons,o.client.x=W.clientX,o.client.y=W.clientY,o.ctrlKey=W.ctrlKey,o.metaKey=W.metaKey,o.movement.x=W.movementX,o.movement.y=W.movementY,o.page.x=W.pageX,o.page.y=W.pageY,o.relatedTarget=null,o.shiftKey=W.shiftKey}};t.extension={name:"events",type:[E.Ag.RendererSystem,E.Ag.CanvasRendererSystem]},t.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let m=t;function r(o){return"dynamic"===o||"static"===o}E.XO.add(m);const B={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){var o;return null!==(o=this._internalInteractive)&&void 0!==o?o:r(m.defaultEventMode)},set interactive(o){E.Wp.deprecation("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=o,this.eventMode=o?"static":"auto"},_internalEventMode:void 0,get eventMode(){var o;return null!==(o=this._internalEventMode)&&void 0!==o?o:m.defaultEventMode},set eventMode(o){this._internalInteractive=r(o),this._internalEventMode=o},isInteractive(){return"static"===this.eventMode||"dynamic"===this.eventMode},interactiveChildren:!0,hitArea:null,addEventListener(o,W,F){const E="function"==typeof W?void 0:W;o="boolean"==typeof F&&F||"object"==typeof F&&F.capture?`${o}capture`:o,W="function"==typeof W?W:W.handleEvent,this.on(o,W,E)},removeEventListener(o,W,F){const E="function"==typeof W?void 0:W;o="boolean"==typeof F&&F||"object"==typeof F&&F.capture?`${o}capture`:o,W="function"==typeof W?W:W.handleEvent,this.off(o,W,E)},dispatchEvent(o){if(!(o instanceof k))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return o.defaultPrevented=!1,o.path=null,o.target=this,o.manager.dispatchEvent(o),!o.defaultPrevented}};v.q9.mixin(B),v.q9.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});class j{constructor(o){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(E.Wp.isMobile.tablet||E.Wp.isMobile.phone)&&this.createTouchHook();const W=document.createElement("div");W.style.width="100px",W.style.height="100px",W.style.position="absolute",W.style.top="0px",W.style.left="0px",W.style.zIndex=2..toString(),this.div=W,this.renderer=o,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const o=document.createElement("button");o.style.width="1px",o.style.height="1px",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.style.zIndex=2..toString(),o.style.backgroundColor="#FF0000",o.title="select to enable accessibility for this content",o.addEventListener("focus",(()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()})),document.body.appendChild(o),this._hookDiv=o}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var o;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(o=this.renderer.view.parentNode)||void 0===o||o.appendChild(this.div))}deactivate(){var o;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(o=this.div.parentNode)||void 0===o||o.removeChild(this.div))}updateAccessibleObjects(o){if(!o.visible||!o.accessibleChildren)return;o.accessible&&o.isInteractive()&&(o._accessibleActive||this.addChild(o),o.renderId=this.renderId);const W=o.children;if(W)for(let o=0;o<W.length;o++)this.updateAccessibleObjects(W[o])}update(){const o=performance.now();if(E.Wp.isMobile.android.device&&o<this.androidUpdateCount||(this.androidUpdateCount=o+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:W,y:F,width:v,height:a}=this.renderer.view.getBoundingClientRect(),{width:G,height:L,resolution:U}=this.renderer,I=v/G*U,l=a/L*U;let h=this.div;h.style.left=`${W}px`,h.style.top=`${F}px`,h.style.width=`${G}px`,h.style.height=`${L}px`;for(let o=0;o<this.children.length;o++){const W=this.children[o];if(W.renderId!==this.renderId)W._accessibleActive=!1,E.Wp.removeItems(this.children,o,1),this.div.removeChild(W._accessibleDiv),this.pool.push(W._accessibleDiv),W._accessibleDiv=null,o--;else{h=W._accessibleDiv;let o=W.hitArea;const F=W.worldTransform;W.hitArea?(h.style.left=(F.tx+o.x*F.a)*I+"px",h.style.top=(F.ty+o.y*F.d)*l+"px",h.style.width=o.width*F.a*I+"px",h.style.height=o.height*F.d*l+"px"):(o=W.getBounds(),this.capHitArea(o),h.style.left=o.x*I+"px",h.style.top=o.y*l+"px",h.style.width=o.width*I+"px",h.style.height=o.height*l+"px",h.title!==W.accessibleTitle&&null!==W.accessibleTitle&&(h.title=W.accessibleTitle),h.getAttribute("aria-label")!==W.accessibleHint&&null!==W.accessibleHint&&h.setAttribute("aria-label",W.accessibleHint)),(W.accessibleTitle!==h.title||W.tabIndex!==h.tabIndex)&&(h.title=W.accessibleTitle,h.tabIndex=W.tabIndex,this.debug&&this.updateDebugHTML(h))}}this.renderId++}updateDebugHTML(o){o.innerHTML=`type: ${o.type}</br> title : ${o.title}</br> tabIndex: ${o.tabIndex}`}capHitArea(o){o.x<0&&(o.width+=o.x,o.x=0),o.y<0&&(o.height+=o.y,o.y=0);const{width:W,height:F}=this.renderer;o.x+o.width>W&&(o.width=W-o.x),o.y+o.height>F&&(o.height=F-o.y)}addChild(o){let W=this.pool.pop();W||(W=document.createElement("button"),W.style.width="100px",W.style.height="100px",W.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",W.style.position="absolute",W.style.zIndex=2..toString(),W.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?W.setAttribute("aria-live","off"):W.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?W.setAttribute("aria-relevant","additions"):W.setAttribute("aria-relevant","text"),W.addEventListener("click",this._onClick.bind(this)),W.addEventListener("focus",this._onFocus.bind(this)),W.addEventListener("focusout",this._onFocusOut.bind(this))),W.style.pointerEvents=o.accessiblePointerEvents,W.type=o.accessibleType,o.accessibleTitle&&null!==o.accessibleTitle?W.title=o.accessibleTitle:(!o.accessibleHint||null===o.accessibleHint)&&(W.title=`displayObject ${o.tabIndex}`),o.accessibleHint&&null!==o.accessibleHint&&W.setAttribute("aria-label",o.accessibleHint),this.debug&&this.updateDebugHTML(W),o._accessibleActive=!0,o._accessibleDiv=W,W.displayObject=o,this.children.push(o),this.div.appendChild(o._accessibleDiv),o._accessibleDiv.tabIndex=o.tabIndex}_dispatchEvent(o,W){const{displayObject:F}=o.target,E=this.renderer.events.rootBoundary,v=Object.assign(new k(E),{target:F});E.rootTarget=this.renderer.lastObjectRendered,W.forEach((o=>E.dispatchEvent(v,o)))}_onClick(o){this._dispatchEvent(o,["click","pointertap","tap"])}_onFocus(o){o.target.getAttribute("aria-live")||o.target.setAttribute("aria-live","assertive"),this._dispatchEvent(o,["mouseover"])}_onFocusOut(o){o.target.getAttribute("aria-live")||o.target.setAttribute("aria-live","polite"),this._dispatchEvent(o,["mouseout"])}_onKeyDown(o){9===o.keyCode&&this.activate()}_onMouseMove(o){0===o.movementX&&0===o.movementY||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}j.extension={name:"accessibility",type:[E.Ag.RendererPlugin,E.Ag.CanvasRendererPlugin]},E.XO.add(j);const V=class o{constructor(W){this.stage=new v.mc,W=Object.assign({forceCanvas:!1},W),this.renderer=E.q5(W),o._plugins.forEach((o=>{o.init.call(this,W)}))}render(){this.renderer.render(this.stage)}get view(){var o;return null===(o=this.renderer)||void 0===o?void 0:o.view}get screen(){var o;return null===(o=this.renderer)||void 0===o?void 0:o.screen}destroy(W,F){const E=o._plugins.slice(0);E.reverse(),E.forEach((o=>{o.destroy.call(this)})),this.stage.destroy(F),this.stage=null,this.renderer.destroy(W),this.renderer=null}};V._plugins=[];let w=V;E.XO.handleByList(E.Ag.Application,w._plugins);class K{static init(o){Object.defineProperty(this,"resizeTo",{set(o){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=o,o&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame((()=>this.resize())))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let o,W;if(this.cancelResize(),this._resizeTo===globalThis.window)o=globalThis.innerWidth,W=globalThis.innerHeight;else{const{clientWidth:F,clientHeight:E}=this._resizeTo;o=F,W=E}this.renderer.resize(o,W),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=o.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}K.extension=E.Ag.Application,E.XO.add(K);var T,d=F(557108),n=((T=n||{})[T.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",T[T.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",T[T.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",T[T.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",T[T.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",T[T.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",T[T.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",T[T.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",T[T.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",T[T.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",T[T.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",T[T.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",T[T.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",T[T.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",T[T.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",T[T.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",T[T.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",T[T.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",T[T.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",T[T.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",T[T.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",T[T.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",T[T.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",T[T.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",T[T.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",T[T.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",T[T.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",T);const u={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let $,Y;function Q(){Y={s3tc:$.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:$.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:$.getExtension("WEBGL_compressed_texture_etc"),etc1:$.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:$.getExtension("WEBGL_compressed_texture_pvrtc")||$.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:$.getExtension("WEBGL_compressed_texture_atc"),astc:$.getExtension("WEBGL_compressed_texture_astc")}}const C={extension:{type:E.Ag.DetectionParser,priority:2},test:async()=>{const o=E.W0.ADAPTER.createCanvas().getContext("webgl");return o?($=o,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async o=>{Y||Q();const W=[];for(const o in Y)Y[o]&&W.push(o);return[...W,...o]},remove:async o=>(Y||Q(),o.filter((o=>!(o in Y))))};E.XO.add(C);class q extends E.dZ{constructor(o,W={width:1,height:1,autoLoad:!0}){let F,v;"string"==typeof o?(F=o,v=new Uint8Array):(F=null,v=o),super(v,W),this.origin=F,this.buffer=v?new E.u3(v):null,this._load=null,this.loaded=!1,null!==this.origin&&!1!==W.autoLoad&&this.load(),null===this.origin&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(o){}load(){return this._load||(this._load=fetch(this.origin).then((o=>o.blob())).then((o=>o.arrayBuffer())).then((o=>(this.data=new Uint32Array(o),this.buffer=new E.u3(o),this.loaded=!0,this.onBlobLoaded(o),this.update(),this)))),this._load}}class c extends q{constructor(o,W){super(o,W),this.format=W.format,this.levels=W.levels||1,this._width=W.width,this._height=W.height,this._extension=c._formatToExtension(this.format),(W.levelBuffers||this.buffer)&&(this._levelBuffers=W.levelBuffers||c._createLevelBuffers(o instanceof Uint8Array?o:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(o,W,F){const E=o.gl;if(!o.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;E.pixelStorei(E.UNPACK_ALIGNMENT,4);for(let o=0,W=this.levels;o<W;o++){const{levelID:W,levelWidth:F,levelHeight:v,levelBuffer:a}=this._levelBuffers[o];E.compressedTexImage2D(E.TEXTURE_2D,W,this.format,F,v,0,a)}return!0}onBlobLoaded(){this._levelBuffers=c._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(o){if(o>=33776&&o<=33779)return"s3tc";if(o>=37488&&o<=37497)return"etc";if(o>=35840&&o<=35843)return"pvrtc";if(o>=36196)return"etc1";if(o>=35986&&o<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(o,W,F,E,v,a,G){const L=new Array(F);let U=o.byteOffset,I=a,l=G,h=I+E-1&~(E-1),p=l+v-1&~(v-1),g=h*p*u[W];for(let a=0;a<F;a++)L[a]={levelID:a,levelWidth:F>1?I:h,levelHeight:F>1?l:p,levelBuffer:new Uint8Array(o.buffer,U,g)},U+=g,I=I>>1||1,l=l>>1||1,h=I+E-1&~(E-1),p=l+v-1&~(v-1),g=h*p*u[W];return L}}const _=3,O=4,X=7,S=19,s=2,i=0,R=1,J=2,D=3,M={827611204:n.COMPRESSED_RGBA_S3TC_DXT1_EXT,861165636:n.COMPRESSED_RGBA_S3TC_DXT3_EXT,894720068:n.COMPRESSED_RGBA_S3TC_DXT5_EXT},H={70:n.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:n.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:n.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:n.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:n.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:n.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT},b=[171,75,84,88,32,49,49,187,13,10,26,10],oo=12,Wo=16,Fo=24,Eo=28,vo=36,ao=40,Go=44,Lo=48,Uo=52,Io=56,lo=60,ho={[E.QE.UNSIGNED_BYTE]:1,[E.QE.UNSIGNED_SHORT]:2,[E.QE.INT]:4,[E.QE.UNSIGNED_INT]:4,[E.QE.FLOAT]:4,[E.QE.HALF_FLOAT]:8},po={[E.hR.RGBA]:4,[E.hR.RGB]:3,[E.hR.RG]:2,[E.hR.RED]:1,[E.hR.LUMINANCE]:1,[E.hR.LUMINANCE_ALPHA]:2,[E.hR.ALPHA]:1},go={[E.QE.UNSIGNED_SHORT_4_4_4_4]:2,[E.QE.UNSIGNED_SHORT_5_5_5_1]:2,[E.QE.UNSIGNED_SHORT_5_6_5]:2};function fo(o){switch(o){case E.hR.RGBA:return E.hR.RGBA_INTEGER;case E.hR.RGB:return E.hR.RGB_INTEGER;case E.hR.RG:return E.hR.RG_INTEGER;case E.hR.RED:return E.hR.RED_INTEGER;default:return o}}const Ao={extension:{type:E.Ag.LoadParser,priority:d.T9.High},name:"loadDDS",test:o=>d.WO(o,".dds"),async load(o,W,F){const v=function(o){const W=new Uint32Array(o);if(542327876!==W[0])throw new Error("Invalid DDS file magic word");const F=new Uint32Array(o,0,124/Uint32Array.BYTES_PER_ELEMENT),E=F[_],v=F[O],a=F[X],G=new Uint32Array(o,S*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),L=G[1];if(4&L){const F=G[s];if(808540228!==F){const W=M[F],G=new Uint8Array(o,128);return[new c(G,{format:W,width:v,height:E,levels:a})]}const L=128,U=new Uint32Array(W.buffer,L,20/Uint32Array.BYTES_PER_ELEMENT),I=U[i],l=U[R],h=U[J],p=U[D],g=H[I];if(void 0===g)throw new Error(`DDSParser cannot parse texture data with DXGI format ${I}`);if(4===h)throw new Error("DDSParser does not support cubemap textures");if(6===l)throw new Error("DDSParser does not supported 3D texture data");const f=new Array,A=148;if(1===p)f.push(new Uint8Array(o,A));else{const W=u[g];let F=0,G=v,L=E;for(let o=0;o<a;o++)F+=Math.max(1,G+3&-4)*Math.max(1,L+3&-4)*W,G>>>=1,L>>>=1;let U=A;for(let W=0;W<p;W++)f.push(new Uint8Array(o,U,F)),U+=F}return f.map((o=>new c(o,{format:g,width:v,height:E,levels:a})))}throw 64&L?new Error("DDSParser does not support uncompressed texture data."):512&L?new Error("DDSParser does not supported YUV uncompressed texture data."):131072&L?new Error("DDSParser does not support single-channel (lumninance) texture data!"):2&L?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}(await(await E.W0.ADAPTER.fetch(o)).arrayBuffer()).map((v=>{const a=new E.t5(v,{mipmap:E.E8.OFF,alphaMode:E.Gk.NO_PREMULTIPLIED_ALPHA,resolution:E.Wp.getResolutionOfUrl(o),...W.data});return d.sZ(a,F,o)}));return 1===v.length?v[0]:v},unload(o){Array.isArray(o)?o.forEach((o=>o.destroy(!0))):o.destroy(!0)}};E.XO.add(Ao);const ko={extension:{type:E.Ag.LoadParser,priority:d.T9.High},name:"loadKTX",test:o=>d.WO(o,".ktx"),async load(o,W,F){const v=await(await E.W0.ADAPTER.fetch(o)).arrayBuffer(),{compressed:a,uncompressed:G,kvData:L}=function(o,W,F=!1){const v=new DataView(W);if(!function(o,W){for(let F=0;F<b.length;F++)if(W.getUint8(F)!==b[F])return console.error(`${o} is not a valid *.ktx file!`),!1;return!0}(o,v))return null;const a=67305985===v.getUint32(oo,!0),G=v.getUint32(Wo,a),L=v.getUint32(Fo,a),U=v.getUint32(Eo,a),I=v.getUint32(vo,a),l=v.getUint32(ao,a)||1,h=v.getUint32(Go,a)||1,p=v.getUint32(Lo,a)||1,g=v.getUint32(Uo,a),f=v.getUint32(Io,a),A=v.getUint32(lo,a);if(0===l||1!==h)throw new Error("Only 2D textures are supported");if(1!==g)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==p)throw new Error("WebGL does not support array textures");const k=I+3&-4,Z=l+3&-4,P=new Array(p);let y,z=I*l;if(0===G&&(z=k*Z),y=0!==G?ho[G]?ho[G]*po[L]:go[G]:u[U],void 0===y)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const x=F?function(o,W,F){const E=new Map;let v=0;for(;v<W;){const a=o.getUint32(64+v,F),G=64+v+4,L=3-(a+3)%4;if(0===a||a>W-v){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let U=0;for(;U<a&&0!==o.getUint8(G+U);U++);if(-1===U){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const I=(new TextDecoder).decode(new Uint8Array(o.buffer,G,U)),l=new DataView(o.buffer,G+U+1,a-U-1);E.set(I,l),v+=4+a+L}return E}(v,A,a):null;let N=z*y,e=I,t=l,m=k,r=Z,B=64+A;for(let o=0;o<f;o++){const F=v.getUint32(B,a);let E=B+4;for(let F=0;F<p;F++){let v=P[F];v||(v=P[F]=new Array(f)),v[o]={levelID:o,levelWidth:f>1||0!==G?e:m,levelHeight:f>1||0!==G?t:r,levelBuffer:new Uint8Array(W,E,N)},E+=N}B+=F+4,B=B%4!=0?B+4-B%4:B,e=e>>1||1,t=t>>1||1,m=e+4-1&-4,r=t+4-1&-4,N=m*r*y}return 0!==G?{uncompressed:P.map((o=>{let W=o[0].levelBuffer,F=!1;return G===E.QE.FLOAT?W=new Float32Array(o[0].levelBuffer.buffer,o[0].levelBuffer.byteOffset,o[0].levelBuffer.byteLength/4):G===E.QE.UNSIGNED_INT?(F=!0,W=new Uint32Array(o[0].levelBuffer.buffer,o[0].levelBuffer.byteOffset,o[0].levelBuffer.byteLength/4)):G===E.QE.INT&&(F=!0,W=new Int32Array(o[0].levelBuffer.buffer,o[0].levelBuffer.byteOffset,o[0].levelBuffer.byteLength/4)),{resource:new E.dZ(W,{width:o[0].levelWidth,height:o[0].levelHeight}),type:G,format:F?fo(L):L}})),kvData:x}:{compressed:P.map((o=>new c(null,{format:U,width:I,height:l,levels:f,levelBuffers:o}))),kvData:x}}(o,v),U=null!=a?a:G,I={mipmap:E.E8.OFF,alphaMode:E.Gk.NO_PREMULTIPLIED_ALPHA,resolution:E.Wp.getResolutionOfUrl(o),...W.data},l=U.map((W=>{var v;U===G&&Object.assign(I,{type:W.type,format:W.format});const a=null!==(v=W.resource)&&void 0!==v?v:W,l=new E.t5(a,I);return l.ktxKeyValueData=L,d.sZ(l,F,o)}));return 1===l.length?l[0]:l},unload(o){Array.isArray(o)?o.forEach((o=>o.destroy(!0))):o.destroy(!0)}};E.XO.add(ko);const Zo={extension:E.Ag.ResolveParser,test:o=>{const W=E.Wp.path.extname(o).slice(1);return["basis","ktx","dds"].includes(W)},parse:o=>{var W,F,v,a;const G=E.Wp.path.extname(o).slice(1);if("ktx"===G){const v=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(v.some((W=>o.endsWith(W))))return{resolution:parseFloat(null!==(F=null===(W=E.W0.RETINA_PREFIX.exec(o))||void 0===W?void 0:W[1])&&void 0!==F?F:"1"),format:v.find((W=>o.endsWith(W))),src:o}}return{resolution:parseFloat(null!==(a=null===(v=E.W0.RETINA_PREFIX.exec(o))||void 0===v?void 0:v[1])&&void 0!==a?a:"1"),format:G,src:o}}};E.XO.add(Zo);const Po=new E.M_,yo=class o{constructor(o){this.renderer=o,this._rendererPremultipliedAlpha=!1}contextChange(){var o;const W=null===(o=this.renderer)||void 0===o?void 0:o.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(W&&W.alpha&&W.premultipliedAlpha)}async image(o,W,F,E){const v=new Image;return v.src=await this.base64(o,W,F,E),v}async base64(o,W,F,E){const v=this.canvas(o,E);if(void 0!==v.toBlob)return new Promise(((o,E)=>{v.toBlob((W=>{if(!W)return void E(new Error("ICanvas.toBlob failed!"));const F=new FileReader;F.onload=()=>o(F.result),F.onerror=E,F.readAsDataURL(W)}),W,F)}));if(void 0!==v.toDataURL)return v.toDataURL(W,F);if(void 0!==v.convertToBlob){const o=await v.convertToBlob({type:W,quality:F});return new Promise(((W,F)=>{const E=new FileReader;E.onload=()=>W(E.result),E.onerror=F,E.readAsDataURL(o)}))}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(W,F){const{pixels:v,width:a,height:G,flipY:L,premultipliedAlpha:U}=this._rawPixels(W,F);L&&o._flipY(v,a,G),U&&o._unpremultiplyAlpha(v);const I=new E.Wp.CanvasRenderTarget(a,G,1),l=new ImageData(new Uint8ClampedArray(v.buffer),a,G);return I.context.putImageData(l,0,0),I.canvas}pixels(W,F){const{pixels:E,width:v,height:a,flipY:G,premultipliedAlpha:L}=this._rawPixels(W,F);return G&&o._flipY(E,v,a),L&&o._unpremultiplyAlpha(E),E}_rawPixels(o,W){const F=this.renderer;if(!F)throw new Error("The Extract has already been destroyed");let v,a,G=!1,L=!1,U=!1;o&&(o instanceof E.Y7?a=o:(a=F.generateTexture(o,{region:W,resolution:F.resolution,multisample:F.multisample}),U=!0,W&&(Po.width=W.width,Po.height=W.height,W=Po)));const I=F.gl;if(a){if(v=a.baseTexture.resolution,W=null!=W?W:a.frame,G=!1,L=a.baseTexture.alphaMode>0&&a.baseTexture.format===E.hR.RGBA,!U){F.renderTexture.bind(a);const o=a.framebuffer.glFramebuffers[F.CONTEXT_UID];o.blitFramebuffer&&F.framebuffer.bind(o.blitFramebuffer)}}else v=F.resolution,W||((W=Po).width=F.width/v,W.height=F.height/v),G=!0,L=this._rendererPremultipliedAlpha,F.renderTexture.bind();const l=Math.max(Math.round(W.width*v),1),h=Math.max(Math.round(W.height*v),1),p=new Uint8Array(4*l*h);return I.readPixels(Math.round(W.x*v),Math.round(W.y*v),l,h,I.RGBA,I.UNSIGNED_BYTE,p),U&&(null==a||a.destroy(!0)),{pixels:p,width:l,height:h,flipY:G,premultipliedAlpha:L}}destroy(){this.renderer=null}static _flipY(o,W,F){const E=W<<2,v=F>>1,a=new Uint8Array(E);for(let W=0;W<v;W++){const v=W*E,G=(F-W-1)*E;a.set(o.subarray(v,v+E)),o.copyWithin(v,G,G+E),o.set(a,G)}}static _unpremultiplyAlpha(o){o instanceof Uint8ClampedArray&&(o=new Uint8Array(o.buffer));const W=o.length;for(let F=0;F<W;F+=4){const W=o[F+3];if(0!==W){const E=255.001/W;o[F]=o[F]*E+.5,o[F+1]=o[F+1]*E+.5,o[F+2]=o[F+2]*E+.5}}}};yo.extension={name:"extract",type:E.Ag.RendererSystem};let zo=yo;E.XO.add(zo);var xo=F(366628),No=F(401947);F(209218),v.mc;class eo{constructor(o,W,F){this.geometry=new E.V2,this.indexBuffer=null,this.size=F,this.dynamicProperties=[],this.staticProperties=[];for(let F=0;F<o.length;++F){let v=o[F];v={attributeName:v.attributeName,size:v.size,uploadFunction:v.uploadFunction,type:v.type||E.QE.FLOAT,offset:v.offset},W[F]?this.dynamicProperties.push(v):this.staticProperties.push(v)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const o=this.geometry;let W=0;this.indexBuffer=new E.hp(E.Wp.createIndicesForQuads(this.size),!0,!0),o.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const F=this.dynamicProperties[o];F.offset=W,W+=F.size,this.dynamicStride+=F.size}const F=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(F),this.dynamicDataUint32=new Uint32Array(F),this.dynamicBuffer=new E.hp(this.dynamicData,!1,!1);let v=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const W=this.staticProperties[o];W.offset=v,v+=W.size,this.staticStride+=W.size}const a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new E.hp(this.staticData,!0,!1);for(let W=0;W<this.dynamicProperties.length;++W){const F=this.dynamicProperties[W];o.addAttribute(F.attributeName,this.dynamicBuffer,0,F.type===E.QE.UNSIGNED_BYTE,F.type,4*this.dynamicStride,4*F.offset)}for(let W=0;W<this.staticProperties.length;++W){const F=this.staticProperties[W];o.addAttribute(F.attributeName,this.staticBuffer,0,F.type===E.QE.UNSIGNED_BYTE,F.type,4*this.staticStride,4*F.offset)}}uploadDynamic(o,W,F){for(let v=0;v<this.dynamicProperties.length;v++){const a=this.dynamicProperties[v];a.uploadFunction(o,W,F,a.type===E.QE.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++}uploadStatic(o,W,F){for(let v=0;v<this.staticProperties.length;v++){const a=this.staticProperties[v];a.uploadFunction(o,W,F,a.type===E.QE.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}class to extends E.Pt{constructor(o){super(o),this.shader=null,this.properties=null,this.tempMatrix=new E.uq,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:E.QE.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=E.Mt.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=E.Uw.for2d()}render(o){const W=o.children,F=o._maxSize,v=o._batchSize,a=this.renderer;let G=W.length;if(0===G)return;G>F&&!o.autoResize&&(G=F);let L=o._buffers;L||(L=o._buffers=this.generateBuffers(o));const U=W[0]._texture.baseTexture,I=U.alphaMode>0;this.state.blendMode=E.Wp.correctBlendMode(o.blendMode,I),a.state.set(this.state);const l=a.gl,h=o.worldTransform.copyTo(this.tempMatrix);h.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=E.Q1.shared.setValue(o.tintRgb).premultiply(o.worldAlpha,I).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=U,this.renderer.shader.bind(this.shader);let p=!1;for(let F=0,E=0;F<G;F+=v,E+=1){let U=G-F;U>v&&(U=v),E>=L.length&&L.push(this._generateOneMoreBuffer(o));const I=L[E];I.uploadDynamic(W,F,U);const h=o._bufferUpdateIDs[E]||0;p=p||I._updateID<h,p&&(I._updateID=o._updateID,I.uploadStatic(W,F,U)),a.geometry.bind(I.geometry),l.drawElements(l.TRIANGLES,6*U,l.UNSIGNED_SHORT,0)}}generateBuffers(o){const W=[],F=o._maxSize,E=o._batchSize,v=o._properties;for(let o=0;o<F;o+=E)W.push(new eo(this.properties,v,E));return W}_generateOneMoreBuffer(o){const W=o._batchSize,F=o._properties;return new eo(this.properties,F,W)}uploadVertices(o,W,F,E,v,a){let G=0,L=0,U=0,I=0;for(let l=0;l<F;++l){const F=o[W+l],h=F._texture,p=F.scale.x,g=F.scale.y,f=h.trim,A=h.orig;f?(L=f.x-F.anchor.x*A.width,G=L+f.width,I=f.y-F.anchor.y*A.height,U=I+f.height):(G=A.width*(1-F.anchor.x),L=A.width*-F.anchor.x,U=A.height*(1-F.anchor.y),I=A.height*-F.anchor.y),E[a]=L*p,E[a+1]=I*g,E[a+v]=G*p,E[a+v+1]=I*g,E[a+2*v]=G*p,E[a+2*v+1]=U*g,E[a+3*v]=L*p,E[a+3*v+1]=U*g,a+=4*v}}uploadPosition(o,W,F,E,v,a){for(let G=0;G<F;G++){const F=o[W+G].position;E[a]=F.x,E[a+1]=F.y,E[a+v]=F.x,E[a+v+1]=F.y,E[a+2*v]=F.x,E[a+2*v+1]=F.y,E[a+3*v]=F.x,E[a+3*v+1]=F.y,a+=4*v}}uploadRotation(o,W,F,E,v,a){for(let G=0;G<F;G++){const F=o[W+G].rotation;E[a]=F,E[a+v]=F,E[a+2*v]=F,E[a+3*v]=F,a+=4*v}}uploadUvs(o,W,F,E,v,a){for(let G=0;G<F;++G){const F=o[W+G]._texture._uvs;F?(E[a]=F.x0,E[a+1]=F.y0,E[a+v]=F.x1,E[a+v+1]=F.y1,E[a+2*v]=F.x2,E[a+2*v+1]=F.y2,E[a+3*v]=F.x3,E[a+3*v+1]=F.y3,a+=4*v):(E[a]=0,E[a+1]=0,E[a+v]=0,E[a+v+1]=0,E[a+2*v]=0,E[a+2*v+1]=0,E[a+3*v]=0,E[a+3*v+1]=0,a+=4*v)}}uploadTint(o,W,F,v,a,G){for(let L=0;L<F;++L){const F=o[W+L],U=E.Q1.shared.setValue(F._tintRGB).toPremultiplied(F.alpha,F.texture.baseTexture.alphaMode>0);v[G]=U,v[G+a]=U,v[G+2*a]=U,v[G+3*a]=U,G+=4*a}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}to.extension={name:"particle",type:E.Ag.RendererPlugin},E.XO.add(to),F(344944);class mo extends a.k{constructor(o,W=!0){super(o[0]instanceof E.gP?o[0]:o[0].texture),this._textures=null,this._durations=null,this._autoUpdate=W,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=o}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(E.Rv.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(E.Rv.shared.add(this.update,this,E.dQ.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(o){this.stop(),this.currentFrame=o}gotoAndPlay(o){this.currentFrame=o,this.play()}update(o){if(!this._playing)return;const W=this.animationSpeed*o,F=this.currentFrame;if(null!==this._durations){let F=this._currentTime%1*this._durations[this.currentFrame];for(F+=W/60*1e3;F<0;)this._currentTime--,F+=this._durations[this.currentFrame];const E=Math.sign(this.animationSpeed*o);for(this._currentTime=Math.floor(this._currentTime);F>=this._durations[this.currentFrame];)F-=this._durations[this.currentFrame]*E,this._currentTime+=E;this._currentTime+=F/this._durations[this.currentFrame]}else this._currentTime+=W;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):F!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<F||this.animationSpeed<0&&this.currentFrame>F)&&this.onLoop(),this.updateTexture())}updateTexture(){const o=this.currentFrame;this._previousFrame!==o&&(this._previousFrame=o,this._texture=this._textures[o],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(o){this.stop(),super.destroy(o),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(o){const W=[];for(let F=0;F<o.length;++F)W.push(E.gP.from(o[F]));return new mo(W)}static fromImages(o){const W=[];for(let F=0;F<o.length;++F)W.push(E.gP.from(o[F]));return new mo(W)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(o){if(o[0]instanceof E.gP)this._textures=o,this._durations=null;else{this._textures=[],this._durations=[];for(let W=0;W<o.length;W++)this._textures.push(o[W].texture),this._durations.push(o[W].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let o=Math.floor(this._currentTime)%this._textures.length;return o<0&&(o+=this._textures.length),o}set currentFrame(o){if(o<0||o>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${o}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const W=this.currentFrame;this._currentTime=o,W!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(o){o!==this._autoUpdate&&(this._autoUpdate=o,!this._autoUpdate&&this._isConnectedToTicker?(E.Rv.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(E.Rv.shared.add(this.update,this),this._isConnectedToTicker=!0))}}new E.bR,a.k;var ro="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";const Bo=new E.uq;class jo extends E.Pt{constructor(o){super(o),o.runners.contextChange.add(this),this.quad=new E.X1,this.state=E.Uw.for2d()}contextChange(){const o=this.renderer,W={globals:o.globalUniforms};this.simpleShader=E.Mt.from(ro,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",W),this.shader=o.context.webGLVersion>1?E.Mt.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",W):E.Mt.from(ro,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",W)}render(o){const W=this.renderer,F=this.quad;let v=F.vertices;v[0]=v[6]=o._width*-o.anchor.x,v[1]=v[3]=o._height*-o.anchor.y,v[2]=v[4]=o._width*(1-o.anchor.x),v[5]=v[7]=o._height*(1-o.anchor.y);const a=o.uvRespectAnchor?o.anchor.x:0,G=o.uvRespectAnchor?o.anchor.y:0;v=F.uvs,v[0]=v[6]=-a,v[1]=v[3]=-G,v[2]=v[4]=1-a,v[5]=v[7]=1-G,F.invalidate();const L=o._texture,U=L.baseTexture,I=U.alphaMode>0,l=o.tileTransform.localTransform,h=o.uvMatrix;let p=U.isPowerOfTwo&&L.frame.width===U.width&&L.frame.height===U.height;p&&(U._glTextures[W.CONTEXT_UID]?p=U.wrapMode!==E.uR.CLAMP:U.wrapMode===E.uR.CLAMP&&(U.wrapMode=E.uR.REPEAT));const g=p?this.simpleShader:this.shader,f=L.width,A=L.height,k=o._width,Z=o._height;Bo.set(l.a*f/k,l.b*f/Z,l.c*A/k,l.d*A/Z,l.tx/k,l.ty/Z),Bo.invert(),p?Bo.prepend(h.mapCoord):(g.uniforms.uMapCoord=h.mapCoord.toArray(!0),g.uniforms.uClampFrame=h.uClampFrame,g.uniforms.uClampOffset=h.uClampOffset),g.uniforms.uTransform=Bo.toArray(!0),g.uniforms.uColor=E.Q1.shared.setValue(o.tint).premultiply(o.worldAlpha,I).toArray(g.uniforms.uColor),g.uniforms.translationMatrix=o.transform.worldTransform.toArray(!0),g.uniforms.uSampler=L,W.shader.bind(g),W.geometry.bind(F),this.state.blendMode=E.Wp.correctBlendMode(o.blendMode,I),W.state.set(this.state),W.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}jo.extension={name:"tilingSprite",type:E.Ag.RendererPlugin},E.XO.add(jo);const Vo=class o{constructor(o,W,F=null){this.linkedSheets=[],this._texture=o instanceof E.gP?o:null,this.baseTexture=o instanceof E.t5?o:this._texture.baseTexture,this.textures={},this.animations={},this.data=W;const v=this.baseTexture.resource;this.resolution=this._updateResolution(F||(v?v.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(o=null){const{scale:W}=this.data.meta;let F=E.Wp.getResolutionOfUrl(o,null);return null===F&&(F=parseFloat(null!=W?W:"1")),1!==F&&this.baseTexture.setResolution(F),F}parse(){return new Promise((W=>{this._callback=W,this._batchIndex=0,this._frameKeys.length<=o.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()}))}_processFrames(W){let F=W;const v=o.BATCH_SIZE;for(;F-W<v&&F<this._frameKeys.length;){const o=this._frameKeys[F],W=this._frames[o],v=W.frame;if(v){let F=null,a=null;const G=!1!==W.trimmed&&W.sourceSize?W.sourceSize:W.frame,L=new E.M_(0,0,Math.floor(G.w)/this.resolution,Math.floor(G.h)/this.resolution);F=W.rotated?new E.M_(Math.floor(v.x)/this.resolution,Math.floor(v.y)/this.resolution,Math.floor(v.h)/this.resolution,Math.floor(v.w)/this.resolution):new E.M_(Math.floor(v.x)/this.resolution,Math.floor(v.y)/this.resolution,Math.floor(v.w)/this.resolution,Math.floor(v.h)/this.resolution),!1!==W.trimmed&&W.spriteSourceSize&&(a=new E.M_(Math.floor(W.spriteSourceSize.x)/this.resolution,Math.floor(W.spriteSourceSize.y)/this.resolution,Math.floor(v.w)/this.resolution,Math.floor(v.h)/this.resolution)),this.textures[o]=new E.gP(this.baseTexture,F,L,a,W.rotated?2:0,W.anchor,W.borders),E.gP.addToCache(this.textures[o],o.toString())}F++}}_processAnimations(){const o=this.data.animations||{};for(const W in o){this.animations[W]=[];for(let F=0;F<o[W].length;F++){const E=o[W][F];this.animations[W].push(this.textures[E])}}}_parseComplete(){const o=this._callback;this._callback=null,this._batchIndex=0,o.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*o.BATCH_SIZE),this._batchIndex++,setTimeout((()=>{this._batchIndex*o.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())}),0)}destroy(o=!1){var W;for(const o in this.textures)this.textures[o].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,o&&(null===(W=this._texture)||void 0===W||W.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};Vo.BATCH_SIZE=1e3;let wo=Vo;const Ko=["jpg","png","jpeg","avif","webp"];function To(o,W,F){const v={};if(o.forEach((o=>{v[o]=W})),Object.keys(W.textures).forEach((o=>{v[o]=W.textures[o]})),!F){const F=E.Wp.path.dirname(o[0]);W.linkedSheets.forEach(((o,E)=>{const a=To([`${F}/${W.data.meta.related_multi_packs[E]}`],o,!0);Object.assign(v,a)}))}return v}const no={extension:E.Ag.Asset,cache:{test:o=>o instanceof wo,getCacheableAssets:(o,W)=>To(o,W,!1)},resolver:{test:o=>{const W=o.split("?")[0].split("."),F=W.pop(),E=W.pop();return"json"===F&&Ko.includes(E)},parse:o=>{var W,F;const v=o.split(".");return{resolution:parseFloat(null!==(F=null===(W=E.W0.RETINA_PREFIX.exec(o))||void 0===W?void 0:W[1])&&void 0!==F?F:"1"),format:v[v.length-2],src:o}}},loader:{name:"spritesheetLoader",extension:{type:E.Ag.LoadParser,priority:d.T9.Normal},testParse:async(o,W)=>".json"===E.Wp.path.extname(W.src).toLowerCase()&&!!o.frames,async parse(o,W,F){var v,a;let G=E.Wp.path.dirname(W.src);G&&G.lastIndexOf("/")!==G.length-1&&(G+="/");let L=G+o.meta.image;L=d.Y8(L,W.src);const U=(await F.load([L]))[L],I=new wo(U.baseTexture,o,W.src);await I.parse();const l=null===(v=null==o?void 0:o.meta)||void 0===v?void 0:v.related_multi_packs;if(Array.isArray(l)){const o=[];for(const E of l){if("string"!=typeof E)continue;let v=G+E;(null===(a=W.data)||void 0===a?void 0:a.ignoreMultiPack)||(v=d.Y8(v,W.src),o.push(F.load({src:v,data:{ignoreMultiPack:!0}})))}const E=await Promise.all(o);I.linkedSheets=E,E.forEach((o=>{o.linkedSheets=[I].concat(I.linkedSheets.filter((W=>W!==o)))}))}return I},unload(o){o.destroy(!0)}}};E.XO.add(no);var uo=F(722711);class $o{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Yo{static test(o){return"string"==typeof o&&o.startsWith("info face=")}static parse(o){const W=o.match(/^[a-z]+\s+.+$/gm),F={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const o in W){const E=W[o].match(/^[a-z]+/gm)[0],v=W[o].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(const o in v){const W=v[o].split("="),F=W[0],E=W[1].replace(/"/gm,""),G=parseFloat(E),L=isNaN(G)?E:G;a[F]=L}F[E].push(a)}const E=new $o;return F.info.forEach((o=>E.info.push({face:o.face,size:parseInt(o.size,10)}))),F.common.forEach((o=>E.common.push({lineHeight:parseInt(o.lineHeight,10)}))),F.page.forEach((o=>E.page.push({id:parseInt(o.id,10),file:o.file}))),F.char.forEach((o=>E.char.push({id:parseInt(o.id,10),page:parseInt(o.page,10),x:parseInt(o.x,10),y:parseInt(o.y,10),width:parseInt(o.width,10),height:parseInt(o.height,10),xoffset:parseInt(o.xoffset,10),yoffset:parseInt(o.yoffset,10),xadvance:parseInt(o.xadvance,10)}))),F.kerning.forEach((o=>E.kerning.push({first:parseInt(o.first,10),second:parseInt(o.second,10),amount:parseInt(o.amount,10)}))),F.distanceField.forEach((o=>E.distanceField.push({distanceRange:parseInt(o.distanceRange,10),fieldType:o.fieldType}))),E}}class Qo{static test(o){const W=o;return"string"!=typeof o&&"getElementsByTagName"in o&&W.getElementsByTagName("page").length&&null!==W.getElementsByTagName("info")[0].getAttribute("face")}static parse(o){const W=new $o,F=o.getElementsByTagName("info"),E=o.getElementsByTagName("common"),v=o.getElementsByTagName("page"),a=o.getElementsByTagName("char"),G=o.getElementsByTagName("kerning"),L=o.getElementsByTagName("distanceField");for(let o=0;o<F.length;o++)W.info.push({face:F[o].getAttribute("face"),size:parseInt(F[o].getAttribute("size"),10)});for(let o=0;o<E.length;o++)W.common.push({lineHeight:parseInt(E[o].getAttribute("lineHeight"),10)});for(let o=0;o<v.length;o++)W.page.push({id:parseInt(v[o].getAttribute("id"),10)||0,file:v[o].getAttribute("file")});for(let o=0;o<a.length;o++){const F=a[o];W.char.push({id:parseInt(F.getAttribute("id"),10),page:parseInt(F.getAttribute("page"),10)||0,x:parseInt(F.getAttribute("x"),10),y:parseInt(F.getAttribute("y"),10),width:parseInt(F.getAttribute("width"),10),height:parseInt(F.getAttribute("height"),10),xoffset:parseInt(F.getAttribute("xoffset"),10),yoffset:parseInt(F.getAttribute("yoffset"),10),xadvance:parseInt(F.getAttribute("xadvance"),10)})}for(let o=0;o<G.length;o++)W.kerning.push({first:parseInt(G[o].getAttribute("first"),10),second:parseInt(G[o].getAttribute("second"),10),amount:parseInt(G[o].getAttribute("amount"),10)});for(let o=0;o<L.length;o++)W.distanceField.push({fieldType:L[o].getAttribute("fieldType"),distanceRange:parseInt(L[o].getAttribute("distanceRange"),10)});return W}}class Co{static test(o){return!("string"!=typeof o||!o.includes("<font>"))&&Qo.test(E.W0.ADAPTER.parseXML(o))}static parse(o){return Qo.parse(E.W0.ADAPTER.parseXML(o))}}const qo=[Yo,Qo,Co];function co(o,W,F,v,a,G,L){const U=F.text,I=F.fontProperties;W.translate(v,a),W.scale(G,G);const l=L.strokeThickness/2,h=-L.strokeThickness/2;if(W.font=L.toFontString(),W.lineWidth=L.strokeThickness,W.textBaseline=L.textBaseline,W.lineJoin=L.lineJoin,W.miterLimit=L.miterLimit,W.fillStyle=function(o,W,F,E,v,a){const G=F.fill;if(!Array.isArray(G))return G;if(1===G.length)return G[0];let L;const U=F.dropShadow?F.dropShadowDistance:0,I=F.padding||0,l=o.width/E-U-2*I,h=o.height/E-U-2*I,p=G.slice(),g=F.fillGradientStops.slice();if(!g.length){const o=p.length+1;for(let W=1;W<o;++W)g.push(W/o)}if(p.unshift(G[0]),g.unshift(0),p.push(G[G.length-1]),g.push(1),F.fillGradientType===uo.T.LINEAR_VERTICAL){L=W.createLinearGradient(l/2,I,l/2,h+I);let o=0;const E=(a.fontProperties.fontSize+F.strokeThickness)/h;for(let W=0;W<v.length;W++){const F=a.lineHeight*W;for(let W=0;W<p.length;W++){let v=0;v="number"==typeof g[W]?g[W]:W/p.length;const a=F/h+v*E;let G=Math.max(o,a);G=Math.min(G,1),L.addColorStop(G,p[W]),o=G}}}else{L=W.createLinearGradient(I,h/2,l+I,h/2);const o=p.length+1;let F=1;for(let W=0;W<p.length;W++){let E;E="number"==typeof g[W]?g[W]:F/o,L.addColorStop(E,p[W]),F++}}return L}(o,W,L,G,[U],F),W.strokeStyle=L.stroke,L.dropShadow){const o=L.dropShadowColor,F=L.dropShadowBlur*G,v=L.dropShadowDistance*G;W.shadowColor=E.Q1.shared.setValue(o).setAlpha(L.dropShadowAlpha).toRgbaString(),W.shadowBlur=F,W.shadowOffsetX=Math.cos(L.dropShadowAngle)*v,W.shadowOffsetY=Math.sin(L.dropShadowAngle)*v}else W.shadowColor="black",W.shadowBlur=0,W.shadowOffsetX=0,W.shadowOffsetY=0;L.stroke&&L.strokeThickness&&W.strokeText(U,l,h+F.lineHeight-I.descent),L.fill&&W.fillText(U,l,h+F.lineHeight-I.descent),W.setTransform(1,0,0,1,0,0),W.fillStyle="rgba(0, 0, 0, 0)"}function _o(o){return Array.from?Array.from(o):o.split("")}function Oo(o){return o.codePointAt?o.codePointAt(0):o.charCodeAt(0)}const Xo=class o{constructor(o,W,F){var v,a;const[G]=o.info,[L]=o.common,[U]=o.page,[I]=o.distanceField,l=E.Wp.getResolutionOfUrl(U.file),h={};this._ownsTextures=F,this.font=G.face,this.size=G.size,this.lineHeight=L.lineHeight/l,this.chars={},this.pageTextures=h;for(let F=0;F<o.page.length;F++){const{id:v,file:a}=o.page[F];h[v]=W instanceof Array?W[F]:W[a],(null==I?void 0:I.fieldType)&&"none"!==I.fieldType&&(h[v].baseTexture.alphaMode=E.Gk.NO_PREMULTIPLIED_ALPHA,h[v].baseTexture.mipmap=E.E8.OFF)}for(let W=0;W<o.char.length;W++){const{id:F,page:v}=o.char[W];let{x:a,y:G,width:L,height:U,xoffset:I,yoffset:p,xadvance:g}=o.char[W];a/=l,G/=l,L/=l,U/=l,I/=l,p/=l,g/=l;const f=new E.M_(a+h[v].frame.x/l,G+h[v].frame.y/l,L,U);this.chars[F]={xOffset:I,yOffset:p,xAdvance:g,kerning:{},texture:new E.gP(h[v].baseTexture,f),page:v}}for(let W=0;W<o.kerning.length;W++){let{first:F,second:E,amount:v}=o.kerning[W];F/=l,E/=l,v/=l,this.chars[E]&&(this.chars[E].kerning[F]=v)}this.distanceFieldRange=null==I?void 0:I.distanceRange,this.distanceFieldType=null!==(a=null===(v=null==I?void 0:I.fieldType)||void 0===v?void 0:v.toLowerCase())&&void 0!==a?a:"none"}destroy(){for(const o in this.chars)this.chars[o].texture.destroy(),this.chars[o].texture=null;for(const o in this.pageTextures)this._ownsTextures&&this.pageTextures[o].destroy(!0),this.pageTextures[o]=null;this.chars=null,this.pageTextures=null}static install(W,F,v){let a;if(W instanceof $o)a=W;else{const o=function(o){for(let W=0;W<qo.length;W++)if(qo[W].test(o))return qo[W];return null}(W);if(!o)throw new Error("Unrecognized data format for font.");a=o.parse(W)}F instanceof E.gP&&(F=[F]);const G=new o(a,F,v);return o.available[G.font]=G,G}static uninstall(W){const F=o.available[W];if(!F)throw new Error(`No font found named '${W}'`);F.destroy(),delete o.available[W]}static from(W,F,v){if(!W)throw new Error("[BitmapFont] Property `name` is required.");const{chars:a,padding:G,resolution:L,textureWidth:U,textureHeight:I,...l}=Object.assign({},o.defaultOptions,v),h=function(o){"string"==typeof o&&(o=[o]);const W=[];for(let F=0,E=o.length;F<E;F++){const E=o[F];if(Array.isArray(E)){if(2!==E.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${E.length}.`);const o=E[0].charCodeAt(0),F=E[1].charCodeAt(0);if(F<o)throw new Error("[BitmapFont]: Invalid character range.");for(let E=o,v=F;E<=v;E++)W.push(String.fromCharCode(E))}else W.push(..._o(E))}if(0===W.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return W}(a),p=F instanceof uo.xJ?F:new uo.xJ(F),g=U,f=new $o;f.info[0]={face:p.fontFamily,size:p.fontSize},f.common[0]={lineHeight:p.fontSize};let A,k,Z,P=0,y=0,z=0;const x=[],N=[];for(let o=0;o<h.length;o++){A||(A=E.W0.ADAPTER.createCanvas(),A.width=U,A.height=I,k=A.getContext("2d"),Z=new E.t5(A,{resolution:L,...l}),x.push(Z),N.push(new E.gP(Z)),f.page.push({id:N.length-1,file:""}));const W=h[o],F=uo.Z1.measureText(W,p,!1,A),v=F.width,a=Math.ceil(F.height),e=Math.ceil(("italic"===p.fontStyle?2:1)*v);if(y>=I-a*L){if(0===y)throw new Error(`[BitmapFont] textureHeight ${I}px is too small (fontFamily: '${p.fontFamily}', fontSize: ${p.fontSize}px, char: '${W}')`);--o,A=null,k=null,Z=null,y=0,P=0,z=0;continue}if(z=Math.max(a+F.fontProperties.descent,z),e*L+P>=g){if(0===P)throw new Error(`[BitmapFont] textureWidth ${U}px is too small (fontFamily: '${p.fontFamily}', fontSize: ${p.fontSize}px, char: '${W}')`);--o,y+=z*L,y=Math.ceil(y),P=0,z=0;continue}co(A,k,F,P,y,L,p);const t=Oo(F.text);f.char.push({id:t,page:N.length-1,x:P/L,y:y/L,width:e,height:a,xoffset:0,yoffset:0,xadvance:v-(p.dropShadow?p.dropShadowDistance:0)-(p.stroke?p.strokeThickness:0)}),P+=(e+2*G)*L,P=Math.ceil(P)}if(!(null==v?void 0:v.skipKerning))for(let o=0,W=h.length;o<W;o++){const F=h[o];for(let o=0;o<W;o++){const W=h[o],E=k.measureText(F).width,v=k.measureText(W).width,a=k.measureText(F+W).width-(E+v);a&&f.kerning.push({first:Oo(F),second:Oo(W),amount:a})}}const e=new o(f,N,!0);return void 0!==o.available[W]&&o.uninstall(W),o.available[W]=e,e}};Xo.ALPHA=[["a","z"],["A","Z"]," "],Xo.NUMERIC=[["0","9"]],Xo.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Xo.ASCII=[[" ","~"]],Xo.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Xo.ALPHANUMERIC},Xo.available={};let So=Xo;const so=[],io=[],Ro=[],Jo=class o extends v.mc{constructor(W,F={}){super();const{align:v,tint:a,maxWidth:G,letterSpacing:L,fontName:U,fontSize:I}=Object.assign({},o.styleDefaults,F);if(!So.available[U])throw new Error(`Missing BitmapFont "${U}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=v,this._tintColor=new E.Q1(a),this._font=void 0,this._fontName=U,this._fontSize=I,this.text=W,this._maxWidth=G,this._maxLineHeight=0,this._letterSpacing=L,this._anchor=new E.oA((()=>{this.dirty=!0}),this,0,0),this._roundPixels=E.W0.ROUND_PIXELS,this.dirty=!0,this._resolution=E.W0.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var o;const W=So.available[this._fontName],F=this.fontSize,v=F/W.size,a=new E.bR,G=[],L=[],U=[],I=_o(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),l=this._maxWidth*W.size/F,h="none"===W.distanceFieldType?so:io;let p=null,g=0,f=0,A=0,k=-1,Z=0,P=0,y=0,z=0;for(let o=0;o<I.length;o++){const F=I[o],v=Oo(F);if(/(?:\s)/.test(F)&&(k=o,Z=g,z++),"\r"===F||"\n"===F){L.push(g),U.push(-1),f=Math.max(f,g),++A,++P,a.x=0,a.y+=W.lineHeight,p=null,z=0;continue}const h=W.chars[v];if(!h)continue;p&&h.kerning[p]&&(a.x+=h.kerning[p]);const x=Ro.pop()||{texture:E.gP.EMPTY,line:0,charCode:0,prevSpaces:0,position:new E.bR};x.texture=h.texture,x.line=A,x.charCode=v,x.position.x=Math.round(a.x+h.xOffset+this._letterSpacing/2),x.position.y=Math.round(a.y+h.yOffset),x.prevSpaces=z,G.push(x),g=x.position.x+Math.max(h.xAdvance-h.xOffset,h.texture.orig.width),a.x+=h.xAdvance+this._letterSpacing,y=Math.max(y,h.yOffset+h.texture.height),p=v,-1!==k&&l>0&&a.x>l&&(++P,E.Wp.removeItems(G,1+k-P,1+o-k),o=k,k=-1,L.push(Z),U.push(G.length>0?G[G.length-1].prevSpaces:0),f=Math.max(f,Z),A++,a.x=0,a.y+=W.lineHeight,p=null,z=0)}const x=I[I.length-1];"\r"!==x&&"\n"!==x&&(/(?:\s)/.test(x)&&(g=Z),L.push(g),f=Math.max(f,g),U.push(-1));const N=[];for(let o=0;o<=A;o++){let W=0;"right"===this._align?W=f-L[o]:"center"===this._align?W=(f-L[o])/2:"justify"===this._align&&(W=U[o]<0?0:(f-L[o])/U[o]),N.push(W)}const e=G.length,t={},m=[],r=this._activePagesMeshData;h.push(...r);for(let o=0;o<e;o++){const F=G[o].texture,v=F.baseTexture.uid;if(!t[v]){let o=h.pop();if(!o){const F=new No.u;let v,a;"none"===W.distanceFieldType?(v=new No.PX(E.gP.EMPTY),a=E.B9.NORMAL):(v=new No.PX(E.gP.EMPTY,{program:E.BP.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // Gamma correction for coverage-like alpha\r\n  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r\n  float gamma = mix(1.0, 1.0 / 2.2, luma);\r\n  float coverage = pow(uColor.a * alpha, gamma);  \r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, coverage);\r\n}\r\n"),uniforms:{uFWidth:0}}),a=E.B9.NORMAL_NPM);const G=new No.e(F,v);G.blendMode=a,o={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:G,vertices:null,uvs:null,indices:null}}o.index=0,o.indexCount=0,o.vertexCount=0,o.uvsCount=0,o.total=0;const{_textureCache:a}=this;a[v]=a[v]||new E.gP(F.baseTexture),o.mesh.texture=a[v],o.mesh.tint=this._tintColor.value,m.push(o),t[v]=o}t[v].total++}for(let o=0;o<r.length;o++)m.includes(r[o])||this.removeChild(r[o].mesh);for(let o=0;o<m.length;o++)m[o].mesh.parent!==this&&this.addChild(m[o].mesh);this._activePagesMeshData=m;for(const W in t){const F=t[W],E=F.total;if(!((null===(o=F.indices)||void 0===o?void 0:o.length)>6*E)||F.vertices.length<2*No.e.BATCHABLE_SIZE)F.vertices=new Float32Array(8*E),F.uvs=new Float32Array(8*E),F.indices=new Uint16Array(6*E);else{const o=F.total,W=F.vertices;for(let F=4*o*2;F<W.length;F++)W[F]=0}F.mesh.size=6*E}for(let o=0;o<e;o++){const W=G[o];let F=W.position.x+N[W.line]*("justify"===this._align?W.prevSpaces:1);this._roundPixels&&(F=Math.round(F));const E=F*v,a=W.position.y*v,L=W.texture,U=t[L.baseTexture.uid],I=L.frame,l=L._uvs,h=U.index++;U.indices[6*h+0]=0+4*h,U.indices[6*h+1]=1+4*h,U.indices[6*h+2]=2+4*h,U.indices[6*h+3]=0+4*h,U.indices[6*h+4]=2+4*h,U.indices[6*h+5]=3+4*h,U.vertices[8*h+0]=E,U.vertices[8*h+1]=a,U.vertices[8*h+2]=E+I.width*v,U.vertices[8*h+3]=a,U.vertices[8*h+4]=E+I.width*v,U.vertices[8*h+5]=a+I.height*v,U.vertices[8*h+6]=E,U.vertices[8*h+7]=a+I.height*v,U.uvs[8*h+0]=l.x0,U.uvs[8*h+1]=l.y0,U.uvs[8*h+2]=l.x1,U.uvs[8*h+3]=l.y1,U.uvs[8*h+4]=l.x2,U.uvs[8*h+5]=l.y2,U.uvs[8*h+6]=l.x3,U.uvs[8*h+7]=l.y3}this._textWidth=f*v,this._textHeight=(a.y+W.lineHeight)*v;for(const o in t){const W=t[o];if(0!==this.anchor.x||0!==this.anchor.y){let o=0;const F=this._textWidth*this.anchor.x,E=this._textHeight*this.anchor.y;for(let v=0;v<W.total;v++)W.vertices[o++]-=F,W.vertices[o++]-=E,W.vertices[o++]-=F,W.vertices[o++]-=E,W.vertices[o++]-=F,W.vertices[o++]-=E,W.vertices[o++]-=F,W.vertices[o++]-=E}this._maxLineHeight=y*v;const F=W.mesh.geometry.getBuffer("aVertexPosition"),E=W.mesh.geometry.getBuffer("aTextureCoord"),a=W.mesh.geometry.getIndex();F.data=W.vertices,E.data=W.uvs,a.data=W.indices,F.update(),E.update(),a.update()}for(let o=0;o<G.length;o++)Ro.push(G[o]);this._font=W,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(o){this._autoResolution&&this._resolution!==o.resolution&&(this._resolution=o.resolution,this.dirty=!0);const{distanceFieldRange:W,distanceFieldType:F,size:E}=So.available[this._fontName];if("none"!==F){const{a:F,b:v,c:a,d:G}=this.worldTransform,L=Math.sqrt(F*F+v*v),U=Math.sqrt(a*a+G*G),I=(Math.abs(L)+Math.abs(U))/2,l=this.fontSize/E,h=o._view.resolution;for(const o of this._activePagesMeshData)o.mesh.shader.uniforms.uFWidth=I*W*l*h}super._render(o)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const o=So.available[this._fontName];if(!o)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==o&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(o){if(this.tint!==o){this._tintColor.setValue(o);for(let W=0;W<this._activePagesMeshData.length;W++)this._activePagesMeshData[W].mesh.tint=o}}get align(){return this._align}set align(o){this._align!==o&&(this._align=o,this.dirty=!0)}get fontName(){return this._fontName}set fontName(o){if(!So.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._fontName!==o&&(this._fontName=o,this.dirty=!0)}get fontSize(){var o;return null!==(o=this._fontSize)&&void 0!==o?o:So.available[this._fontName].size}set fontSize(o){this._fontSize!==o&&(this._fontSize=o,this.dirty=!0)}get anchor(){return this._anchor}set anchor(o){"number"==typeof o?this._anchor.set(o):this._anchor.copyFrom(o)}get text(){return this._text}set text(o){o=String(null!=o?o:""),this._text!==o&&(this._text=o,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(o){this._maxWidth!==o&&(this._maxWidth=o,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(o){this._letterSpacing!==o&&(this._letterSpacing=o,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(o){o!==this._roundPixels&&(this._roundPixels=o,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(o){this._autoResolution=!1,this._resolution!==o&&(this._resolution=o,this.dirty=!0)}destroy(o){const{_textureCache:W}=this,F="none"===So.available[this._fontName].distanceFieldType?so:io;F.push(...this._activePagesMeshData);for(const o of this._activePagesMeshData)this.removeChild(o.mesh);this._activePagesMeshData=[],F.filter((o=>W[o.mesh.texture.baseTexture.uid])).forEach((o=>{o.mesh.texture=E.gP.EMPTY}));for(const o in W)W[o].destroy(),delete W[o];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(o)}};Jo.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let Do=Jo;const Mo=[".xml",".fnt"],Ho={extension:{type:E.Ag.LoadParser,priority:d.T9.Normal},name:"loadBitmapFont",test:o=>Mo.includes(E.Wp.path.extname(o).toLowerCase()),testParse:async o=>Yo.test(o)||Co.test(o),async parse(o,W,F){const E=Yo.test(o)?Yo.parse(o):Co.parse(o),{src:v}=W,{page:a}=E,G=[];for(let o=0;o<a.length;++o){let W=a[o].file;W=d.Y8(W,v),G.push(W)}const L=await F.load(G),U=G.map((o=>L[o]));return So.install(E,U,!0)},load:async(o,W)=>(await E.W0.ADAPTER.fetch(o)).text(),unload(o){o.destroy()}};E.XO.add(Ho);const bo=class o extends uo.xJ{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(W){return new o(Object.keys(o.defaultOptions).reduce(((o,F)=>({...o,[F]:W[F]})),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach((W=>{URL.revokeObjectURL(W.src),W.refs--,0===W.refs&&(W.fontFace&&document.fonts.delete(W.fontFace),delete o.availableFonts[W.originalUrl])})),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(W,F={}){const{availableFonts:v}=o;if(v[W]){const o=v[W];return this._fonts.push(o),o.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return E.W0.ADAPTER.fetch(W).then((o=>o.blob())).then((async o=>new Promise(((W,F)=>{const E=URL.createObjectURL(o),v=new FileReader;v.onload=()=>W([E,v.result]),v.onerror=F,v.readAsDataURL(o)})))).then((async([o,a])=>{const G=Object.assign({family:E.Wp.path.basename(W,E.Wp.path.extname(W)),weight:"normal",style:"normal",display:"auto",src:o,dataSrc:a,refs:1,originalUrl:W,fontFace:null},F);v[W]=G,this._fonts.push(G),this.styleID++;const L=new FontFace(G.family,`url(${G.src})`,{weight:G.weight,style:G.style,display:G.display});G.fontFace=L,await L.load(),document.fonts.add(L),await document.fonts.ready,this.styleID++,this.fontsDirty=!0}))}addOverride(...o){const W=o.filter((o=>!this._overrides.includes(o)));W.length>0&&(this._overrides.push(...W),this.styleID++)}removeOverride(...o){const W=o.filter((o=>this._overrides.includes(o)));W.length>0&&(this._overrides=this._overrides.filter((o=>!W.includes(o))),this.styleID++)}toCSS(o){return[`transform: scale(${o})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?["word-wrap: "+(this.breakWords?"break-all":"break-word"),`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce(((o,W)=>`${o}\n            @font-face {\n                font-family: "${W.family}";\n                src: url('${W.dataSrc}');\n                font-weight: ${W.weight};\n                font-style: ${W.style};\n                font-display: ${W.display};\n            }`),this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(o){this._stylesheet!==o&&(this._stylesheet=o,this.styleID++)}normalizeColor(o){return Array.isArray(o)&&(o=E.Wp.rgb2hex(o)),"number"==typeof o?E.Wp.hex2string(o):o}dropShadowToCSS(){let o=this.normalizeColor(this.dropShadowColor);const W=this.dropShadowAlpha,F=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),E=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);o.startsWith("#")&&W<1&&(o+=(255*W|0).toString(16).padStart(2,"0"));const v=`${F}px ${E}px`;return this.dropShadowBlur>0?`text-shadow: ${v} ${this.dropShadowBlur}px ${o}`:`text-shadow: ${v} ${o}`}reset(){Object.assign(this,o.defaultOptions)}onBeforeDraw(){const{fontsDirty:o}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&o?new Promise((o=>setTimeout(o,100))):Promise.resolve()}get isSafari(){const{userAgent:o}=E.W0.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(o)}set fillGradientStops(o){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(o){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(o){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(o){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(o){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(o){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(o){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};bo.availableFonts={},bo.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let oW=bo;const WW=class o extends a.k{constructor(W="",F={}){var v;super(E.gP.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const a=new Image,G=E.gP.from(a,{scaleMode:E.W0.SCALE_MODE,resourceOptions:{autoLoad:!1}});G.orig=new E.M_,G.trim=new E.M_,this.texture=G;const L="http://www.w3.org/2000/svg",U="http://www.w3.org/1999/xhtml",I=document.createElementNS(L,"svg"),l=document.createElementNS(L,"foreignObject"),h=document.createElementNS(U,"div"),p=document.createElementNS(U,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",I.appendChild(l),this.maxWidth=o.defaultMaxWidth,this.maxHeight=o.defaultMaxHeight,this._domElement=h,this._styleElement=p,this._svgRoot=I,this._foreignObject=l,this._foreignObject.appendChild(p),this._foreignObject.appendChild(h),this._image=a,this._loadImage=new Image,this._autoResolution=o.defaultAutoResolution,this._resolution=null!==(v=o.defaultResolution)&&void 0!==v?v:E.W0.RESOLUTION,this.text=W,this.style=F}measureText(o){var W,F;const{text:E,style:v,resolution:a}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},o);Object.assign(this._domElement,{innerHTML:E,style:v.toCSS(a)}),this._styleElement.textContent=v.toGlobalCSS(),document.body.appendChild(this._svgRoot);const G=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:L,height:U}=G;(L>this.maxWidth||U>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const I=Math.min(this.maxWidth,Math.ceil(L)),l=Math.min(this.maxHeight,Math.ceil(U));return this._svgRoot.setAttribute("width",I.toString()),this._svgRoot.setAttribute("height",l.toString()),E!==this._text&&(this._domElement.innerHTML=this._text),v!==this._style&&(Object.assign(this._domElement,{style:null===(W=this._style)||void 0===W?void 0:W.toCSS(a)}),this._styleElement.textContent=null===(F=this._style)||void 0===F?void 0:F.toGlobalCSS()),{width:I+2*v.padding,height:l+2*v.padding}}async updateText(o=!0){const{style:W,_image:F,_loadImage:E}=this;if(this.localStyleID!==W.styleID&&(this.dirty=!0,this.localStyleID=W.styleID),!this.dirty&&o)return;const{width:v,height:a}=this.measureText();F.width=E.width=Math.ceil(Math.max(1,v)),F.height=E.height=Math.ceil(Math.max(1,a)),this._updateID++;const G=this._updateID;await new Promise((o=>{E.onload=async()=>{G<this._updateID||(await W.onBeforeDraw(),F.src=E.src,E.onload=null,E.src="",this.updateTexture()),o()};const v=(new XMLSerializer).serializeToString(this._svgRoot);E.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(v)}`}))}get source(){return this._image}updateTexture(){const{style:o,texture:W,_image:F,resolution:E}=this,{padding:v}=o,{baseTexture:a}=W;W.trim.width=W._frame.width=F.width/E,W.trim.height=W._frame.height=F.height/E,W.trim.x=-v,W.trim.y=-v,W.orig.width=W._frame.width-2*v,W.orig.height=W._frame.height-2*v,this._onTextureUpdate(),a.setRealSize(F.width,F.height,E),this.dirty=!1}_render(o){this._autoResolution&&this._resolution!==o.resolution&&(this._resolution=o.resolution,this.dirty=!0),this.updateText(!0),super._render(o)}_renderCanvas(o){this._autoResolution&&this._resolution!==o.resolution&&(this._resolution=o.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(o)}getLocalBounds(o){return this.updateText(!0),super.getLocalBounds(o)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(W){var F,E,v,a,G;"boolean"==typeof W&&(W={children:W}),W=Object.assign({},o.defaultDestroyOptions,W),super.destroy(W),this.ownsStyle&&(null===(F=this._style)||void 0===F||F.cleanFonts()),this._style=null,null===(E=this._svgRoot)||void 0===E||E.remove(),this._svgRoot=null,null===(v=this._domElement)||void 0===v||v.remove(),this._domElement=null,null===(a=this._foreignObject)||void 0===a||a.remove(),this._foreignObject=null,null===(G=this._styleElement)||void 0===G||G.remove(),this._styleElement=null,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=null,this._image.src="",this._image=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(o){this.updateText(!0);const W=E.Wp.sign(this.scale.x)||1;this.scale.x=W*o/this._image.width/this.resolution,this._width=o}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(o){this.updateText(!0);const W=E.Wp.sign(this.scale.y)||1;this.scale.y=W*o/this._image.height/this.resolution,this._height=o}get style(){return this._style}set style(o){this._style!==o&&((o=o||{})instanceof oW?(this.ownsStyle=!1,this._style=o):o instanceof uo.xJ?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=oW.from(o)):(this.ownsStyle=!0,this._style=new oW(o)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(o){o=String(""===o||null==o?" ":o),o=this.sanitiseText(o),this._text!==o&&(this._text=o,this.dirty=!0)}get resolution(){return this._resolution}set resolution(o){this._autoResolution=!1,this._resolution!==o&&(this._resolution=o,this.dirty=!0)}sanitiseText(o){return o.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};WW.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},WW.defaultMaxWidth=2024,WW.defaultMaxHeight=2024,WW.defaultAutoResolution=!0},708662:(o,W,F)=>{F.d(W,{Q:()=>v});var E=F(851782);class v extends Array{constructor(o){return Array.isArray(o)?super(...o):super(...E.H0(...arguments))}get r(){return this[0]}get g(){return this[1]}get b(){return this[2]}set r(o){this[0]=o}set g(o){this[1]=o}set b(o){this[2]=o}set(o){return Array.isArray(o)?this.copy(o):this.copy(E.H0(...arguments))}copy(o){return this[0]=o[0],this[1]=o[1],this[2]=o[2],this}}},726777:(o,W,F)=>{F.d(W,{Z:()=>v});var E=F(280065);class v extends Array{constructor(o=0,W=o){return super(o,W),this}get x(){return this[0]}get y(){return this[1]}set x(o){this[0]=o}set y(o){this[1]=o}set(o,W=o){return o.length?this.copy(o):(E.hZ(this,o,W),this)}copy(o){return E.C(this,o),this}add(o,W){return W?E.WQ(this,o,W):E.WQ(this,this,o),this}sub(o,W){return W?E.Re(this,o,W):E.Re(this,this,o),this}multiply(o){return o.length?E.lw(this,this,o):E.hs(this,this,o),this}divide(o){return o.length?E.Qr(this,this,o):E.hs(this,this,1/o),this}inverse(o=this){return E.DI(this,o),this}len(){return E.Bw(this)}distance(o){return o?E.Io(this,o):E.Bw(this)}squaredLen(){return this.squaredDistance()}squaredDistance(o){return o?E.hG(this,o):E.m3(this)}negate(o=this){return E.ze(this,o),this}cross(o,W){return W?E.$A(o,W):E.$A(this,o)}scale(o){return E.hs(this,this,o),this}normalize(){return E.S8(this,this),this}dot(o){return E.Om(this,o)}equals(o){return E.t2(this,o)}applyMatrix3(o){return E.ei(this,this,o),this}applyMatrix4(o){return E.Z0(this,this,o),this}lerp(o,W){return E.Cc(this,this,o,W),this}clone(){return new v(this[0],this[1])}fromArray(o,W=0){return this[0]=o[W],this[1]=o[W+1],this}toArray(o=[],W=0){return o[W]=this[0],o[W+1]=this[1],o}}},851782:(o,W,F)=>{F.d(W,{H0:()=>a});const E={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#00ff00",blue:"#0000ff",fuchsia:"#ff00ff",cyan:"#00ffff",yellow:"#ffff00",orange:"#ff8000"};function v(o){4===o.length&&(o=o[0]+o[1]+o[1]+o[2]+o[2]+o[3]+o[3]);const W=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return W||console.warn(`Unable to convert hex string ${o} to rgb values`),[parseInt(W[1],16)/255,parseInt(W[2],16)/255,parseInt(W[3],16)/255]}function a(o){return void 0===o?[0,0,0]:3===arguments.length?arguments:isNaN(o)?"#"===o[0]?v(o):E[o.toLowerCase()]?v(E[o.toLowerCase()]):(console.warn("Color format not recognised"),[0,0,0]):(W=o,[((W=parseInt(W))>>16&255)/255,(W>>8&255)/255,(255&W)/255]);var W}},280065:(o,W,F)=>{function E(o,W){return o[0]=W[0],o[1]=W[1],o}function v(o,W,F){return o[0]=W,o[1]=F,o}function a(o,W,F){return o[0]=W[0]+F[0],o[1]=W[1]+F[1],o}function G(o,W,F){return o[0]=W[0]-F[0],o[1]=W[1]-F[1],o}function L(o,W,F){return o[0]=W[0]*F[0],o[1]=W[1]*F[1],o}function U(o,W,F){return o[0]=W[0]/F[0],o[1]=W[1]/F[1],o}function I(o,W,F){return o[0]=W[0]*F,o[1]=W[1]*F,o}function l(o,W){var F=W[0]-o[0],E=W[1]-o[1];return Math.sqrt(F*F+E*E)}function h(o,W){var F=W[0]-o[0],E=W[1]-o[1];return F*F+E*E}function p(o){var W=o[0],F=o[1];return Math.sqrt(W*W+F*F)}function g(o){var W=o[0],F=o[1];return W*W+F*F}function f(o,W){return o[0]=-W[0],o[1]=-W[1],o}function A(o,W){return o[0]=1/W[0],o[1]=1/W[1],o}function k(o,W){var F=W[0],E=W[1],v=F*F+E*E;return v>0&&(v=1/Math.sqrt(v)),o[0]=W[0]*v,o[1]=W[1]*v,o}function Z(o,W){return o[0]*W[0]+o[1]*W[1]}function P(o,W){return o[0]*W[1]-o[1]*W[0]}function y(o,W,F,E){var v=W[0],a=W[1];return o[0]=v+E*(F[0]-v),o[1]=a+E*(F[1]-a),o}function z(o,W,F){var E=W[0],v=W[1];return o[0]=F[0]*E+F[3]*v+F[6],o[1]=F[1]*E+F[4]*v+F[7],o}function x(o,W,F){let E=W[0],v=W[1];return o[0]=F[0]*E+F[4]*v+F[12],o[1]=F[1]*E+F[5]*v+F[13],o}function N(o,W){return o[0]===W[0]&&o[1]===W[1]}F.d(W,{$A:()=>P,Bw:()=>p,C:()=>E,Cc:()=>y,DI:()=>A,Io:()=>l,Om:()=>Z,Qr:()=>U,Re:()=>G,S8:()=>k,WQ:()=>a,Z0:()=>x,ei:()=>z,hG:()=>h,hZ:()=>v,hs:()=>I,lw:()=>L,m3:()=>g,t2:()=>N,ze:()=>f})},826889:o=>{o.exports=JSON.parse('{"systemSize":{"width":360,"height":296},"fps":60,"fixedDt":false,"randomSeed":"","blendMode":"default","controllerConfigs":{"PIXI_PARTICLES":{"autoStart":false,"loop":true,"explosiveness":false,"amount":300,"emissionDelay":0,"particlesPerWave":300,"particle":{"colors":{"gradient":false,"mode":"Random","colors":["#1ce58b","#b5ce3e","#db0909"]},"damping":0.565217,"gravityVector":[0,0],"directionVector":[-2.0816681711721685e-17,0],"spread":180,"angularVelocity":{"min":0,"max":0,"curve":[]},"initialRotation":{"min":0,"max":0,"syncWithDirection":false},"opacity":{"min":1,"max":1,"curve":[{"point":[0,0],"easing":"linear"},{"point":[0.09,0.55],"easing":"linear"},{"point":[0.34,1],"easing":"linear"},{"point":[0.62,1],"easing":"linear"},{"point":[0.9,0.56],"easing":"linear"},{"point":[1,0],"easing":"linear"}]},"lifetime":{"min":0.9999999999999999,"max":2},"scale":{"min":0.1,"max":0.6,"curve":[]},"initialVelocity":{"min":0.1,"max":0.1},"linearAcceleration":{"min":0,"max":0,"curve":[]},"tangentialAcceleration":{"min":0,"max":0,"curve":[]},"radialAcceleration":{"min":0,"max":0,"curve":[]}},"emitter":{"position":[0.5,0.5],"type":"rectangle","width":360,"height":296}}},"graphicsConfig":{"PIXI_PARTICLES":{"textureId":"251974bf-a0c5-4510-8d66-168b60605ff3","fps":60,"randomFrameStart":false,"frames":[]}},"controllerIdToConfigId":{"PIXI_PARTICLES":"PIXI_PARTICLES"},"controllers":{"PIXI_PARTICLES":{"plugins":{}}}}')}},L={};function U(o){var W=L[o];if(void 0!==W)return W.exports;var F=L[o]={id:o,loaded:!1,exports:{}};return G[o].call(F.exports,F,F.exports,U),F.loaded=!0,F.exports}U.m=G,o=[],U.O=(W,F,E,v)=>{if(!F){var a=1/0;for(l=0;l<o.length;l++){for(var[F,E,v]=o[l],G=!0,L=0;L<F.length;L++)(!1&v||a>=v)&&Object.keys(U.O).every((o=>U.O[o](F[L])))?F.splice(L--,1):(G=!1,v<a&&(a=v));if(G){o.splice(l--,1);var I=E();void 0!==I&&(W=I)}}return W}v=v||0;for(var l=o.length;l>0&&o[l-1][2]>v;l--)o[l]=o[l-1];o[l]=[F,E,v]},U.n=o=>{var W=o&&o.__esModule?()=>o.default:()=>o;return U.d(W,{a:W}),W},F=Object.getPrototypeOf?o=>Object.getPrototypeOf(o):o=>o.__proto__,U.t=function(o,E){if(1&E&&(o=this(o)),8&E)return o;if("object"==typeof o&&o){if(4&E&&o.__esModule)return o;if(16&E&&"function"==typeof o.then)return o}var v=Object.create(null);U.r(v);var a={};W=W||[null,F({}),F([]),F(F)];for(var G=2&E&&o;"object"==typeof G&&!~W.indexOf(G);G=F(G))Object.getOwnPropertyNames(G).forEach((W=>a[W]=()=>o[W]));return a.default=()=>o,U.d(v,a),v},U.d=(o,W)=>{for(var F in W)U.o(W,F)&&!U.o(o,F)&&Object.defineProperty(o,F,{enumerable:!0,get:W[F]})},U.f={},U.e=o=>Promise.all(Object.keys(U.f).reduce(((W,F)=>(U.f[F](o,W),W)),[])),U.u=o=>"js/"+({3474:"evo-promotions.SpinGiftsFrame",3863:"testTools",17474:"evo-game.mobileChat",20796:"help.evo-screwball",22421:"testTools.PixiDevToolsPlugin",24622:"evo-promotions.SpinGiftsWheelAnimation",30164:"game-client-history-round-info",36302:"evo-promotions.SpinGiftsCampaignRules",39340:"history.roundView",44806:"gameTestToolsPlugins",47290:"evo-promotions.SpinGiftsTermsConditions",47528:"IncomingSCBMessagesSchema",50967:"help.common",54504:"evo-promotions.cashGifts",57046:"screwball.bonus-round",59760:"evo-game.chat",66703:"gameTestToolsSafeAreaPlugin",66885:"native-utilities",73375:"evo-promotions.spinGifts",73460:"evo-promotions.giftsWheel",75697:"screenRecordingPlugin",77821:"evo-game.emojiMenu",80468:"ajv",80616:"video-lib-local",85687:"testTools.why-did-you-render",99719:"screwball.cashHunt3D"}[o]||o)+"."+{3474:"1a89cdcf",3863:"c68406f1",10306:"a97cff13",14291:"2f77c6ae",17474:"36703dd7",20796:"30eff97d",22421:"0fea869a",24622:"c19aa584",27672:"21b8bdb0",30164:"81c32c92",32184:"a21bca64",36302:"63c3f631",37927:"b03e4e3d",39340:"87393490",42447:"0fe47cec",44806:"0741de9d",45444:"ef538133",47290:"25d266d1",47528:"1a93cda1",50967:"2b6414a9",54504:"de8d33cf",57046:"6da2dd0a",59760:"c5c3f75e",66703:"d22f8b42",66885:"cf7c7b01",73375:"74edf8f6",73460:"b312a388",75697:"6f2160de",77821:"cadc9005",80468:"5bf07473",80616:"10095eb7",85687:"8dab9d33",99719:"37e50ca8"}[o]+".js",U.miniCssF=o=>3863===o?"styles/testtools.c68406f1.css":36302===o?"styles/evopromoti.spingiftsc.63c3f631.css":47290===o?"styles/evopromoti.spingiftst.25d266d1.css":50967===o?"styles/help.common.2b6414a9.css":30164===o?"styles/gameclient.81c32c92.css":39340===o?"styles/history.roundview.87393490.css":17474===o?"styles/evogame.mobilechat.36703dd7.css":59760===o?"styles/evogame.chat.c5c3f75e.css":54504===o?"styles/evopromoti.cashgifts.de8d33cf.css":73375===o?"styles/evopromoti.spingifts.74edf8f6.css":77821===o?"styles/evogame.emojimenu.cadc9005.css":44806===o?"styles/gametestto.0741de9d.css":22421===o?"styles/testtools.pixidevtoo.0fea869a.css":20796===o?"styles/help.evoscrewba.30eff97d.css":75697===o?"styles/screenreco.6f2160de.css":73460===o?"styles/evopromoti.giftswheel.b312a388.css":24622===o?"styles/evopromoti.spingiftsw.c19aa584.css":3474===o?"styles/evopromoti.spingiftsf.1a89cdcf.css":66703===o?"styles/gametestto.d22f8b42.css":void 0,U.hmd=o=>((o=Object.create(o)).children||(o.children=[]),Object.defineProperty(o,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+o.id)}}),o),U.o=(o,W)=>Object.prototype.hasOwnProperty.call(o,W),E={},U.l=(o,W,F,v)=>{if(E[o])E[o].push(W);else{var a,G;if(void 0!==F)for(var L=document.getElementsByTagName("script"),I=0;I<L.length;I++){var l=L[I];if(l.getAttribute("src")==o||l.getAttribute("data-webpack")=="/frontend/evo/r2/:"+F){a=l;break}}a||(G=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=NaN,U.nc&&a.setAttribute("nonce",U.nc),a.setAttribute("data-webpack","/frontend/evo/r2/:"+F),a.src=o),E[o]=[W];var h=(W,F)=>{a.onerror=a.onload=null,clearTimeout(p);var v=E[o];if(delete E[o],a.parentNode&&a.parentNode.removeChild(a),v&&v.forEach((o=>o(F))),W)return W(F)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),window.EVO_CDN?15e3:6e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),G&&document.head.appendChild(a)}},U.r=o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},U.nmd=o=>(o.paths=[],o.children||(o.children=[]),o),U.j=95964,U.p=(globalThis.EVO_CDN||"")+"/frontend/evo/r2/",v=o=>new Promise(((W,F)=>{var E=U.miniCssF(o),v=U.p+E;if(((o,W)=>{for(var F=document.getElementsByTagName("link"),E=0;E<F.length;E++){var v=(G=F[E]).getAttribute("data-href")||G.getAttribute("href");if("stylesheet"===G.rel&&(v===o||v===W))return G}var a=document.getElementsByTagName("style");for(E=0;E<a.length;E++){var G;if((v=(G=a[E]).getAttribute("data-href"))===o||v===W)return G}})(E,v))return W();((o,W,F,E)=>{var v=document.createElement("link");v.setAttribute("data-sandbox","ignore"),v.rel="stylesheet",v.type="text/css",v.onerror=v.onload=a=>{if(v.onerror=v.onload=null,"load"===a.type)F();else{var G=a&&("load"===a.type?"missing":a.type),L=a&&a.target&&a.target.href||W,U=new Error("Loading CSS chunk "+o+" failed.\n("+L+")");U.code="CSS_CHUNK_LOAD_FAILED",U.type=G,U.request=L,v.parentNode.removeChild(v),E(U)}},v.href=W,document.head.appendChild(v)})(o,v,W,F)})),a={95964:0},U.f.miniCss=(o,W)=>{a[o]?W.push(a[o]):0!==a[o]&&{3474:1,3863:1,17474:1,20796:1,22421:1,24622:1,30164:1,36302:1,39340:1,44806:1,47290:1,50967:1,54504:1,59760:1,66703:1,73375:1,73460:1,75697:1,77821:1}[o]&&W.push(a[o]=v(o).then((()=>{a[o]=0}),(W=>{throw delete a[o],W})))},(()=>{var o={95964:0};U.f.j=(W,F)=>{var E=U.o(o,W)?o[W]:void 0;if(0!==E)if(E)F.push(E[2]);else{var v=new Promise(((F,v)=>E=o[W]=[F,v]));F.push(E[2]=v);var a=U.p+U.u(W),G=new Error;U.l(a,(F=>{if(U.o(o,W)&&(0!==(E=o[W])&&(o[W]=void 0),E)){var v=F&&("load"===F.type?"missing":F.type),a=F&&F.target&&F.target.src;G.message="Loading chunk "+W+" failed.\n("+v+": "+a+")",G.name="ChunkLoadError",G.type=v,G.request=a,E[1](G)}}),"chunk-"+W,W)}},U.O.j=W=>0===o[W];var W=(W,F)=>{var E,v,[a,G,L]=F,I=0;if(a.some((W=>0!==o[W]))){for(E in G)U.o(G,E)&&(U.m[E]=G[E]);if(L)var l=L(U)}for(W&&W(F);I<a.length;I++)v=a[I],U.o(o,v)&&o[v]&&o[v][0](),o[v]=0;return U.O(l)},F=self.webpackChunk_frontend_evo_r2_=self.webpackChunk_frontend_evo_r2_||[];F.forEach(W.bind(null,0)),F.push=W.bind(null,F.push.bind(F))})(),U.O(void 0,[35375,79949],(()=>U(515924))),U.O(void 0,[35375,79949],(()=>U(827427)));var I=U.O(void 0,[35375,79949],(()=>U(217773)));I=U.O(I)})();
//# sourceMappingURL=https://sourcemaps.egcdn.com/frontend/evo/r2/js/screwball.8218c17d.js.map