"use strict";(self["webpackChunk_frontend_evo_r2_"]=self["webpackChunk_frontend_evo_r2_"]||[]).push([[59760],{65027:(g,R,U)=>{U.d(R,{B:()=>r,d:()=>w});var X=U(175710),V=U(854489),f=U(64922),p=U(699695),E=U(377810),q=U(837557),D=U(346160),o=U(939083);const $="statusPanel--919d3",e="label--6b3ac",i="desktop--ac1ac",I="messageLabel--2a884",P="untilLabel--5cc31",M="untilTimeLabel--05a18",y=({className:g,isBlocked:R,blockUntil:U,children:X})=>{const[V,y]=E.useState(U?o.Id(U):null);return E.useEffect((()=>{if(!U)return void(V&&y(null));const g=o.le(U);if(g>0)return void y(o.$4(g));const R=setInterval((()=>{const g=new Date;if(U.getTime()-g.getTime()<=0)return clearInterval(R),void y("00:00:00");const X=o.Id(U);y(X)}),1e3);return()=>clearInterval(R)}),[U]),R?f.jsxs("div",{className:p.A($,g),children:[f.jsx("p",{className:p.A(e,I,{[i]:q.DS.IS_DESKTOP}),children:U?`${D.Tl("chat.disabledTemporal.message")} ${D.Tl("chat.contactSupport")}`:`${D.Tl("chat.disabledPermanent.message")} ${D.Tl("chat.contactSupport")}`}),V&&f.jsx("p",{"data-role":"block-countdown",className:p.A(e,P,{[i]:q.DS.IS_DESKTOP}),dangerouslySetInnerHTML:{__html:D.Tl("chat.disabledTemporal.until",{until:o.le(U)>0?V:`<span class="${M}">${V}</span>`})}})]}):f.jsx(f.Fragment,{children:X})},r=X.xS(y,(({state:g})=>({blockUntil:V.Qs(g),isBlocked:V.AC(g)}))),w=X.xS(y,(({state:g})=>({blockUntil:V.gu(g),isBlocked:V.YS(g)})))},799517:(g,R,U)=>{U.d(R,{p:()=>r});var X=U(837557),V=U(175710),f=U(854489),p=U(64922),E=U(699695),q=U(346160),D=U(377810);const o="expandButton--0f734",$=({className:g,text:R,maxLines:U,showMoreLabel:X=q.Tl("viewMore"),showLessLabel:V=q.Tl("viewLess")})=>{const[f,E]=D.useState(!1),[$,e]=D.useState(R),[i,I]=D.useState(!1),P=D.useRef(null);D.useEffect((()=>{if(!P.current||!R)return;const g=P.current.offsetWidth,V=getComputedStyle(P.current).font,f=function(g,R,U,X="",V="... "){const f=document.createElement("canvas").getContext("2d");if(!f)return g;if(f.font=R,f.measureText(g).width<=U)return g;let p="";const E=g.split(" ");for(const g of E){const R=`${p}${g} `;if(f.measureText(`${R}${V}${X}`).width>U)break;p=R}p=p.trim();const q=p.charAt(p.length-1);return/\w/.test(q)||(p=p.slice(0,-1).trim()),`${p}${V}`}(R,V,g*U,X);f!==R?(e(f),I(!0)):(e(R),I(!1))}),[R,U]);const M=g=>{g.stopPropagation(),g.preventDefault()};return p.jsxs("p",{className:g,children:[p.jsx("span",{ref:P,children:f?R:$}),i&&p.jsxs(p.Fragment,{children:[" ",p.jsx("button",{onMouseDown:M,onTouchStart:M,className:o,onClick:g=>{E((g=>!g)),M(g)},type:"button",children:f?V:X})]})]})},e=({children:g,...R})=>p.jsx("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",...R,children:p.jsx("path",{d:"M34.8076 29.6164L21.3002 5.60333C20.7299 4.56777 19.2441 4.56777 18.6738 5.60333L5.18148 29.6164C4.62618 30.6219 5.34657 31.8526 6.48719 31.8526H33.5019C34.6425 31.8526 35.3629 30.6219 34.8076 29.6164ZM21.4953 28.851H18.4937V26.4647H21.4953V28.851ZM21.4953 24.3485H18.4937V12.342H21.4953V24.3485Z",fill:"#FFCC00"})}),i="chatToast--68389",I="desktop--15123",P="icon--e00c1",M="message--9b19e",y="text--9835c",r=V.xS((({content:g,isMobile:R,isLandscape:U})=>g?p.jsx("div",{className:E.A(i,X.DS.IS_DESKTOP&&I),children:p.jsxs("div",{className:M,children:[p.jsx(e,{className:P,width:"40",height:"40"}),R?p.jsx($,{text:g,className:y,maxLines:U?2:3,showMoreLabel:q.Tl("viewMore"),showLessLabel:q.Tl("viewLess")}):p.jsx("p",{className:y,children:g})]})}):null),(({state:g})=>{const R=f.FH(g);return{isMobile:!X.DS.IS_DESKTOP&&!X.DS.IS_TABLET,isLandscape:V.u2().isLandscape,content:null==R?void 0:R.props.description}}))},565695:(g,R,U)=>{U.d(R,{I:()=>$,Q:()=>e});var X=U(64922),V=U(282427),f=U(854489),p=U(699695),E=U(346160);const q="securityStatusPanel--8a939",D="label--e0db9",o=({className:g,visible:R,children:U})=>R?X.jsx("div",{className:p.A(q,g),children:X.jsx("p",{className:p.A(D),children:E.Tl("chat.disabledSecurity")})}):X.jsx(X.Fragment,{children:U}),$=g=>{const R=V.d4(f.FZ);return X.jsx(o,{...g,visible:R})},e=g=>X.jsx(o,{...g,visible:!1})},242093:(g,R,U)=>{U.d(R,{Y:()=>Q,k:()=>n});var X=U(175710),V=U(64922),f=U(699695),p=U(377810),E=U(837557),q=U(313694),D=U(799517),o=U(222921),$=U(301551),e=U(425650),i=(U(263601),U(621418));const I=window.visualViewport,P=g=>({height:g.height,width:g.width,offsetTop:g.offsetTop,offsetLeft:g.offsetLeft,pageTop:g.pageTop,pageLeft:g.pageLeft,scale:g.scale});const M=function(){var g;try{if(null===(g=window.top)||void 0===g?void 0:g.visualViewport)return window.top}catch(g){return}}(),y=null==M?void 0:M.visualViewport;var r=U(930441);const w="chatViewportOverlay--5c3cc",z="chatViewportOverlayBackdrop--e6c14",H=p.createContext({hasViewportStyles:!1}),B=({onClose:g,className:R,backdropClassName:U,DS:X,children:f})=>V.jsxs(r.x,{children:[V.jsx("div",{className:$["default"](z,U)}),V.jsx(_,{className:R,onClose:g,DS:X,children:f})]});function _({onClose:g,className:R,DS:U,children:X}){const f=p.useRef(null),E=function({containerRef:g,DS:R}){if(!y)return!!document.documentElement.style.getPropertyValue("--top-viewport-height");const U=!1&&0,X=U?window.visualViewport:y,[V]=e.k();return function({onResize:g,visualViewport:R=I}){const U=i.J(g);p.useEffect((()=>{const g=P(R);U(g);const X=()=>{const g=P(R);U(g)};return R.addEventListener("resize",X),R.addEventListener("scroll",X),()=>{R.removeEventListener("resize",X),R.removeEventListener("scroll",X)}}),[U,R])}({onResize:U=>{var X,f;const p=null===(X=g.current)||void 0===X?void 0:X.style;null==p||p.setProperty("--chat-overlay-viewport-height",`${U.height}px`),null==p||p.setProperty("--chat-overlay-viewport-offset-top",`${U.offsetTop}px`),R.IS_IOS_CHROME&&"INPUT"===(null===(f=document.activeElement)||void 0===f?void 0:f.tagName)&&V("resize",(()=>{var g;null===(g=null==M?void 0:M.scrollTo)||void 0===g||g.call(M,0,0)}),100)},visualViewport:X}),!U}({containerRef:f,DS:U}),q=p.useMemo((()=>({hasViewportStyles:E})),[E]);return function(g){p.useEffect((function(){const R=g.current;if(!R)return;const U=g=>{(function(g,R){for(;g!==R&&g;){const R=getComputedStyle(g);if("auto"===R.overflowY||"scroll"===R.overflowY)return!0;g=g.parentElement}return!1})(g.target,R)||g.preventDefault()};return R.addEventListener("touchmove",U,{passive:!1}),()=>{R.removeEventListener("touchmove",U)}}),[g])}(f),V.jsx(H.Provider,{value:q,children:V.jsx("div",{ref:f,className:$["default"](R,w),onClick:function(R){(function(g){let R=g;for(;R;){if("true"===R.getAttribute("data-overlay-ignore-click"))return!0;R=R.parentElement}return!1})(R.target)||g()},"data-role":"chat-viewport-overlay-content",children:X})})}const O="overlay--96f85",x="landscape--6d525",N="supportMobileHeader--9df7f",A=p.memo((({Input:g,hideEmojiButton:R,DS:U,onClose:X,isLandscape:E,isInputMode:q,...D})=>{const o=function(){const[g,R]=p.useState(!1),[U,X]=p.useState(!1),V=p.useRef(),f=p.useCallback((()=>{clearTimeout(V.current),X(!1)}),[]),E=p.useCallback((()=>{f(),R(!0)}),[f]),q=p.useCallback((()=>{f(),R(!1)}),[f]),D=p.useCallback(((g=1e3)=>{X(!0),V.current=setTimeout((()=>{q()}),g)}),[q]);return p.useEffect((function(){let g=document.visibilityState;const U=()=>{"visible"===g&&"hidden"===document.visibilityState&&R(!1),g=document.visibilityState};return document.addEventListener("visibilitychange",U),()=>document.removeEventListener("visibilitychange",U)}),[]),{isOpen:g,open:E,close:q,isClosing:U,closeWithDelay:D}}(),$=p.useCallback((()=>{o.close(),null==X||X()}),[o,X]);return function(g,R){const U=p.useRef(R.isOpen);p.useEffect((()=>{g&&R.isOpen?(U.current=!0,R.closeWithDelay()):U.current&&!g&&(U.current=!1,R.open())}),[g,R])}(q,o),V.jsxs(V.Fragment,{children:[V.jsx(g,{focusOnEmojiBarOpen:!1,onFocus:o.open,onClick:o.open,emojiBarPosition:"top",hideEmojiButton:R,readOnly:!0,dataRole:"message-input__text"}),o.isOpen&&V.jsx(B,{DS:U,onClose:$,className:f.A(O,E&&x),children:!o.isClosing&&V.jsx(h,{Input:g,onSubmit:$,onBlur:$,isLandscape:E,...D})})]})}));function h({isOverlayInputOnTop:g,Header:R,Messages:U,Input:X,onSubmit:$,onBlur:e,isLandscape:i,isLiveSupportChat:I}){const{hasViewportStyles:P}=p.useContext(H),M=g||!P;return V.jsx(q.b,{headerClassName:f.A({[N]:!E.DS.IS_DESKTOP&&I&&o.n()}),dataRole:"chat-overlay",isInputOnTop:M,safeAreaHorizontal:i,toast:I&&!i&&V.jsx(D.p,{}),header:V.jsx(R,{}),content:V.jsx(U,{withTopGradient:!0,bottomToTop:M}),footer:V.jsx(X,{focusOnEmojiBarOpen:!0,emojiBarPosition:M?"bottom":"top",autoFocus:!0,onSubmit:$,onBlur:e,emojiSingleLine:i,dataRole:"text-input-overlay-input"})})}A.displayName="MobileChatInput";var K=U(854489),Y=U(218140),F=U(912986),S=U(346160),L=U(685468),t=U(782776),d=U(937319),Z=U(738806),b=U(83640);const k="mobileChatHeader--97451",J=({isLiveSupportChat:g,dealerName:R,locale:U,onClose:X,onBack:f})=>{const p=S.sU(),E=g&&o.n(),q=g?E?V.jsx(Z.n,{isOverlay:!0,isFloating:!0}):void 0:V.jsx(b.g,{locale:U,dealerName:R,isRtlDirection:p});return V.jsx("div",{className:k,children:V.jsx(L.B,{isLandscape:!1,isRtl:p,titleText:S.Tl(g?"menu.liveSupport":"menu.chat"),titleIcon:g?V.jsx(t.Y,{}):V.jsx(d.r,{}),handleClose:X,handleBack:f,subtitle:q})})};function l({drawerProps:g,...R}){var U;return V.jsx(J,{...R,onBack:null==g?void 0:g.onBack,onClose:null!==(U=null==g?void 0:g.onClose)&&void 0!==U?U:F.A})}function a({adapter:g}){return{dealerName:g.dealer,locale:g.locale,drawerProps:g.drawerProps}}const m=X.xS(l,(g=>({...a(g),isLiveSupportChat:!1}))),j=X.xS(l,(g=>({...a(g),isLiveSupportChat:!0})));var u=U(499096);const n=X.xS(A,(({state:g,adapter:R})=>({DS:R.settings.DeviceSupport,isOverlayInputOnTop:K.Fs(g),isLandscape:R.isLandscape,isInputMode:R.isInputMode,Header:m,Input:u.KK,Messages:Y.Z,hasChatToast:!1,isLiveSupportChat:!1}))),Q=X.xS(A,(({state:g,adapter:R})=>({DS:R.settings.DeviceSupport,isOverlayInputOnTop:K.Fs(g),isLandscape:R.isLandscape,isInputMode:R.isInputMode,Header:j,Messages:Y.D,Input:u.Qq,isLiveSupportChat:!0})))},30721:(g,R,U)=>{U.r(R),U.d(R,{PublicDesktopChat:()=>J,SupportDesktopChat:()=>l});var X=U(175710),V=U(65027),f=U(565695),p=U(340444),E=U(181484),q=U(854489),D=U(837557),o=U(64922),$=U(699695),e=U(377810),i=U(346160);const I="wrapper--d4e5b",P="withBoxShadow--db6cf",M="hasBackground--bd752",y="removePadding--cef6e",r="reduceHeight--f7fd0",w="info--d7b6c",z="desktop--60a43",H="alignToCenter--47325",B="mobile--fcbf9",_="name--84f9c",O="dealer--18309",x="label--e1566",N=X.xS((({isClassicLayout:g,isDesktop:R,name:U,locale:X})=>{const V=$.A(I,{[B]:!R,[z]:R,[M]:!g,[P]:!g&&R,[y]:g,[r]:g}),f=null==U?void 0:U.toLocaleUpperCase(X);return o.jsx("div",{className:$.A(V,"commonUiElement"),children:o.jsxs("div",{className:$.A(w,{[H]:!g}),"data-role":"dealerNameWrapper",children:[o.jsxs("span",{className:x,children:[`${i.Tl("dealer")}:`," "]}),o.jsx("span",{className:$.A(_,O),"data-role":"dealerName",children:f||i.Tl("noDealer")})]})})}),(({adapter:g})=>({name:g.dealer,isDesktop:D.DS.IS_DESKTOP,locale:g.locale})));var A=U(242093),h=U(499096),K=U(218140),Y=U(313694),F=U(799517),S=U(222921),L=U(738806);const t="chat--17b14",d="input--f3677",Z="classic--11897",b="tabletClassic--977b7",k=({dataRole:g,type:R="default",onClose:U,onOpen:X,ChatBar:V,Messages:f,Input:p,isMessageInputHidden:E,BlockStatusPanel:q,SecurityStatusPanel:D,isLiveSupportChat:i})=>{e.useLayoutEffect((()=>(X(),()=>U())),[X,U]);const I="classic"===R||"tablet-classic"===R,P=$.A(t,{[Z]:"classic"===R,[b]:"tablet-classic"===R}),M=i&&S.n()?o.jsx(L.n,{}):V&&o.jsx(V,{isClassicLayout:I});return o.jsx(Y.b,{className:P,dataRole:g,"data-component":"chat",isClassicLayout:I,header:M,toast:i&&o.jsx(F.p,{}),content:o.jsx(f,{isTabletClassic:"tablet-classic"===R}),footer:o.jsx(q,{children:o.jsx(D,{children:!E&&o.jsx("div",{className:d,children:o.jsx(p,{withBackground:"tablet-classic"!==R,emojiBarFixedSize:!0,increased:!0,disableTypingAnimation:!0})})})})})},J=X.xS(k,(({ownProps:g,dispatchify:R})=>({dataRole:"chat-public",onClose:R(E.SU),onOpen:R(E.Pk),ChatBar:N,Messages:K.Z,Input:"tablet-classic"===g.type?A.k:h.KK,BlockStatusPanel:V.B,SecurityStatusPanel:f.I,isLiveSupportChat:!1}))),l=X.xS(k,(g=>{const{state:R,dispatchify:U}=g;return{dataRole:"chat-support",isMessageInputHidden:[p.py.Feedback,p.py.Closing].includes(q.NW(R)),onClose:U(E.KQ),onOpen:U(E.lu),Messages:K.D,Input:h.Qq,BlockStatusPanel:V.d,SecurityStatusPanel:f.Q,isLiveSupportChat:!0}}))},218140:(g,R,U)=>{U.d(R,{D:()=>yg,Z:()=>Mg});var X=U(175710),V=U(854489),f=U(64922),p=U(699695),E=U(377810),q=U(346160),D=U(127793),o=U(715907),$=U(340444),e=U(730249),i=U(822381);const I="rating--2fd47",P="inner--e2b58",M="star--67c5a",y="rated--3f7af",r="starIcon--e45e6",w="selected--14bf6";class z extends E.PureComponent{get stars(){const{count:g,rating:R,onRating:U}=this.props,X=[];for(let V=0;V<g;V++){const g=p.A(M,{[w]:R===V+1});X.push(f.jsx("span",{"data-role":"ratings-star",className:g,onClick:()=>U(V+1),children:f.jsx("span",{className:r,children:f.jsx(e.F,{})})},V))}return X}render(){const{scale:g,rating:R}=this.props,U={fontSize:g?i.o1(g):i.o1(1)},X=p.A(I,{[y]:0!==R});return f.jsx("div",{"data-role":"ratings",className:X,style:U,children:f.jsx("div",{className:P,children:this.stars})})}}z.displayName="Rating";const H="feedbackForm--b2330",B="withExtraSpace--c79bf",_="golden--ddda2",O="conversationEnded--d5fac",x="message--08c14",N="labels--d552c",A="ratingWrapper--21cef",h="submitButton--d510a",K="formItems--60432";var Y=U(181484);const F=X.xS((({setFeedbackRating:g,id:R,sendFeedback:U,phase:X,setSupportChatPhase:V,feedback:e,gameTheme:i})=>{const I=E.useCallback((U=>g(R,U)),[g,R]),P=E.useCallback((()=>{U(R),X===$.py.Feedback&&V($.py.NotActive)}),[R,X,V,U]);return f.jsxs("div",{className:p.A(H,{[B]:X===$.py.Feedback,[_]:i===D.q.Golden}),"data-role":"feedback",children:[f.jsx("span",{className:O,children:q.Tl("chat.support.conversationEnded")}),!e||e.submitted?f.jsx("span",{className:x,"data-role":"message",children:q.Tl("chat.support.thanksForFeedback.uppercase")}):function(g){return f.jsxs(f.Fragment,{children:[f.jsx("span",{className:x,"data-role":"message",children:q.Tl("chat.support.rateSupportExperience.uppercase")}),f.jsxs("div",{className:A,children:[f.jsx(z,{count:5,rating:g.rating||0,scale:1.5,onRating:I}),f.jsxs("div",{className:N,children:[f.jsx("span",{children:q.Tl("chat.support.poor")}),f.jsx("span",{children:q.Tl("chat.support.great")})]})]}),g.rating>0&&f.jsx("div",{className:K,children:f.jsx(o.$,{onClick:P,className:h,size:"XXS",type:"primary",label:"chat.support.buttonSubmit","data-role":"feedback-submit-button",labelPosition:"Inside"})})]})}(e)]})}),(({state:g,dispatchify:R,ownProps:U,adapter:X})=>({feedback:V.RY(g,U.id),phase:V.NW(g),gameTheme:X.theme,setFeedbackRating:R(Y.$l),sendFeedback:R(Y.Sq),setSupportChatPhase:R(Y.lp)})));var S=U(837557),L=U(434245),t=U(73853),d=U(722483);function Z(g,R,U){var X;let V,f=null!==(X=U.initialDeps)&&void 0!==X?X:[];return()=>{var X,p,E,q;let D;U.key&&(null==(X=U.debug)?void 0:X.call(U))&&(D=Date.now());const o=g();if(o.length===f.length&&!o.some(((g,R)=>f[R]!==g)))return V;let $;if(f=o,U.key&&(null==(p=U.debug)?void 0:p.call(U))&&($=Date.now()),V=R(...o),U.key&&(null==(E=U.debug)?void 0:E.call(U))){const g=Math.round(100*(Date.now()-D))/100,R=Math.round(100*(Date.now()-$))/100,X=R/16,V=(g,R)=>{for(g=String(g);g.length<R;)g=" "+g;return g};console.info(`%c⏱ ${V(R,5)} /${V(g,5)} ms`,`\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(${Math.max(0,Math.min(120-120*X,120))}deg 100% 31%);`,null==U?void 0:U.key)}return null==(q=null==U?void 0:U.onChange)||q.call(U,V),V}}function b(g,R){if(void 0===g)throw new Error(`Unexpected undefined${R?`: ${R}`:""}`);return g}const k=(g,R,U)=>{let X;return function(...V){g.clearTimeout(X),X=g.setTimeout((()=>R.apply(this,V)),U)}},J=g=>g,l=g=>{const R=Math.max(g.startIndex-g.overscan,0),U=Math.min(g.endIndex+g.overscan,g.count-1),X=[];for(let g=R;g<=U;g++)X.push(g);return X},a=(g,R)=>{const U=g.scrollElement;if(!U)return;const X=g.targetWindow;if(!X)return;const V=g=>{const{width:U,height:X}=g;R({width:Math.round(U),height:Math.round(X)})};if(V(U.getBoundingClientRect()),!X.ResizeObserver)return()=>{};const f=new X.ResizeObserver((g=>{const R=g[0];if(null==R?void 0:R.borderBoxSize){const g=R.borderBoxSize[0];if(g)return void V({width:g.inlineSize,height:g.blockSize})}V(U.getBoundingClientRect())}));return f.observe(U,{box:"border-box"}),()=>{f.unobserve(U)}},m={passive:!0},j="undefined"==typeof window||"onscrollend"in window,u=(g,R)=>{const U=g.scrollElement;if(!U)return;const X=g.targetWindow;if(!X)return;let V=0;const f=j?()=>{}:k(X,(()=>{R(V,!1)}),g.options.isScrollingResetDelay),p=X=>()=>{V=U[g.options.horizontal?"scrollLeft":"scrollTop"],f(),R(V,X)},E=p(!0),q=p(!1);return q(),U.addEventListener("scroll",E,m),U.addEventListener("scrollend",q,m),()=>{U.removeEventListener("scroll",E),U.removeEventListener("scrollend",q)}},n=(g,R,U)=>{if(null==R?void 0:R.borderBoxSize){const g=R.borderBoxSize[0];if(g)return Math.round(g[U.options.horizontal?"inlineSize":"blockSize"])}return Math.round(g.getBoundingClientRect()[U.options.horizontal?"width":"height"])},Q=(g,{adjustments:R=0,behavior:U},X)=>{var V,f;const p=g+R;null==(f=null==(V=X.scrollElement)?void 0:V.scrollTo)||f.call(V,{[X.options.horizontal?"left":"top"]:p,behavior:U})};class C{constructor(g){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let g=null;const R=()=>g||(this.targetWindow&&this.targetWindow.ResizeObserver?g=new this.targetWindow.ResizeObserver((g=>{g.forEach((g=>{this._measureElement(g.target,g)}))})):null);return{disconnect:()=>{var g;return null==(g=R())?void 0:g.disconnect()},observe:g=>{var U;return null==(U=R())?void 0:U.observe(g,{box:"border-box"})},unobserve:g=>{var U;return null==(U=R())?void 0:U.unobserve(g)}}})(),this.range=null,this.setOptions=g=>{Object.entries(g).forEach((([R,U])=>{void 0===U&&delete g[R]})),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:J,rangeExtractor:l,onChange:()=>{},measureElement:n,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,...g}},this.notify=(g,R)=>{var U,X,V;const{startIndex:f,endIndex:p}=null!==(U=this.range)&&void 0!==U?U:{startIndex:void 0,endIndex:void 0},E=this.calculateRange();(g||f!==(null==E?void 0:E.startIndex)||p!==(null==E?void 0:E.endIndex))&&(null==(V=(X=this.options).onChange)||V.call(X,this,R))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach((g=>g())),this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.observer.disconnect(),this.elementsCache.clear()},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var g,R;const U=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==U){if(this.cleanup(),!U)return void this.notify(!1,!1);this.scrollElement=U,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=null!==(g=null==(R=this.scrollElement)?void 0:R.window)&&void 0!==g?g:null,this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,(g=>{this.scrollRect=g,this.notify(!1,!1)}))),this.unsubs.push(this.options.observeElementOffset(this,((g,R)=>{this.scrollAdjustments=0,this.scrollDirection=R?this.getScrollOffset()<g?"forward":"backward":null,this.scrollOffset=g;const U=this.isScrolling;this.isScrolling=R,this.notify(U!==R,R)})))}},this.getSize=()=>{var g;return this.options.enabled?(this.scrollRect=null!==(g=this.scrollRect)&&void 0!==g?g:this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0)},this.getScrollOffset=()=>{var g;return this.options.enabled?(this.scrollOffset=null!==(g=this.scrollOffset)&&void 0!==g?g:"function"==typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset,this.scrollOffset):(this.scrollOffset=null,0)},this.getFurthestMeasurement=(g,R)=>{const U=new Map,X=new Map;for(let V=R-1;V>=0;V--){const R=g[V];if(U.has(R.lane))continue;const f=X.get(R.lane);if(null==f||R.end>f.end?X.set(R.lane,R):R.end<f.end&&U.set(R.lane,!0),U.size===this.options.lanes)break}return X.size===this.options.lanes?Array.from(X.values()).sort(((g,R)=>g.end===R.end?g.index-R.index:g.end-R.end))[0]:void 0},this.getMeasurementOptions=Z((()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled]),((g,R,U,X,V)=>(this.pendingMeasuredCacheIndexes=[],{count:g,paddingStart:R,scrollMargin:U,getItemKey:X,enabled:V})),{key:!1}),this.getMeasurements=Z((()=>[this.getMeasurementOptions(),this.itemSizeCache]),(({count:g,paddingStart:R,scrollMargin:U,getItemKey:X,enabled:V},f)=>{var p;if(!V)return this.measurementsCache=[],this.itemSizeCache.clear(),[];0===this.measurementsCache.length&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach((g=>{this.itemSizeCache.set(g.key,g.size)})));const E=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const q=this.measurementsCache.slice(0,E);for(let V=E;V<g;V++){let g=null==(p=this.measurementsCache[V])?void 0:p.measureElement;g||(g=g=>{const R=X(V),U=this.elementsCache.get(R);g?(U!==g&&(U&&this.observer.unobserve(U),this.observer.observe(g),this.elementsCache.set(R,g)),g.isConnected&&this.resizeItem(V,this.options.measureElement(g,void 0,this))):U&&(this.observer.unobserve(U),this.elementsCache.delete(R))});const E=X(V),D=1===this.options.lanes?q[V-1]:this.getFurthestMeasurement(q,V),o=D?D.end+this.options.gap:R+U,$=f.get(E),e="number"==typeof $?$:this.options.estimateSize(V),i=o+e,I=D?D.lane:V%this.options.lanes;q[V]={index:V,start:o,size:e,end:i,key:E,lane:I,measureElement:g}}return this.measurementsCache=q,q}),{key:!1&&0,debug:()=>this.options.debug}),this.calculateRange=Z((()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()]),((g,R,U)=>this.range=g.length>0&&R>0?function({measurements:g,outerSize:R,scrollOffset:U}){const X=g.length-1,V=W(0,X,(R=>g[R].start),U);let f=V;for(;f<X&&g[f].end<U+R;)f++;return{startIndex:V,endIndex:f}}({measurements:g,outerSize:R,scrollOffset:U}):null),{key:!1&&0,debug:()=>this.options.debug}),this.getIndexes=Z((()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count]),((g,R,U,X)=>null===R?[]:g({startIndex:R.startIndex,endIndex:R.endIndex,overscan:U,count:X})),{key:!1&&0,debug:()=>this.options.debug}),this.indexFromElement=g=>{const R=this.options.indexAttribute,U=g.getAttribute(R);return U?parseInt(U,10):(console.warn(`Missing attribute name '${R}={index}' on measured element.`),-1)},this._measureElement=(g,R)=>{const U=this.indexFromElement(g),X=this.getMeasurements()[U];if(!X||!g.isConnected)return void this.elementsCache.forEach(((R,U)=>{R===g&&(this.observer.unobserve(g),this.elementsCache.delete(U))}));const V=this.elementsCache.get(X.key);V!==g&&(V&&this.observer.unobserve(V),this.observer.observe(g),this.elementsCache.set(X.key,g)),this.resizeItem(U,this.options.measureElement(g,R,this))},this.resizeItem=(g,R)=>{var U;const X=this.getMeasurements()[g];if(!X)return;const V=R-(null!==(U=this.itemSizeCache.get(X.key))&&void 0!==U?U:X.size);0!==V&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(X,V,this):X.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=V,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(X.index),this.itemSizeCache=new Map(this.itemSizeCache.set(X.key,R)),this.notify(!0,!1))},this.measureElement=g=>{g&&this._measureElement(g,void 0)},this.getVirtualItems=Z((()=>[this.getIndexes(),this.getMeasurements()]),((g,R)=>{const U=[];for(let X=0,V=g.length;X<V;X++){const V=R[g[X]];U.push(V)}return U}),{key:!1&&0,debug:()=>this.options.debug}),this.getVirtualItemForOffset=g=>{const R=this.getMeasurements();if(0!==R.length)return b(R[W(0,R.length-1,(g=>b(R[g]).start),g)])},this.getOffsetForAlignment=(g,R)=>{const U=this.getSize(),X=this.getScrollOffset();"auto"===R&&(R=g<=X?"start":g>=X+U?"end":"start"),"start"===R||("end"===R?g-=U:"center"===R&&(g-=U/2));const V=this.options.horizontal?"scrollWidth":"scrollHeight",f=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[V]:this.scrollElement[V]:0)-U;return Math.max(Math.min(f,g),0)},this.getOffsetForIndex=(g,R="auto")=>{g=Math.max(0,Math.min(g,this.options.count-1));const U=this.getMeasurements()[g];if(!U)return;const X=this.getSize(),V=this.getScrollOffset();if("auto"===R)if(U.end>=V+X-this.options.scrollPaddingEnd)R="end";else{if(!(U.start<=V+this.options.scrollPaddingStart))return[V,R];R="start"}const f="end"===R?U.end+this.options.scrollPaddingEnd:U.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(f,R),R]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{null!==this.scrollToIndexTimeoutId&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(g,{align:R="start",behavior:U}={})=>{this.cancelScrollToIndex(),"smooth"===U&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(g,R),{adjustments:void 0,behavior:U})},this.scrollToIndex=(g,{align:R="auto",behavior:U}={})=>{g=Math.max(0,Math.min(g,this.options.count-1)),this.cancelScrollToIndex(),"smooth"===U&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const X=this.getOffsetForIndex(g,R);if(!X)return;const[V,f]=X;this._scrollToOffset(V,{adjustments:void 0,behavior:U}),"smooth"!==U&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout((()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(g))){const[V]=b(this.getOffsetForIndex(g,f));R=V,X=this.getScrollOffset(),Math.abs(R-X)<1||this.scrollToIndex(g,{align:f,behavior:U})}else this.scrollToIndex(g,{align:f,behavior:U});var R,X})))},this.scrollBy=(g,{behavior:R}={})=>{this.cancelScrollToIndex(),"smooth"===R&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+g,{adjustments:void 0,behavior:R})},this.getTotalSize=()=>{var g,R;const U=this.getMeasurements();let X;return X=0===U.length?this.options.paddingStart:1===this.options.lanes?null!==(g=null==(R=U[U.length-1])?void 0:R.end)&&void 0!==g?g:0:Math.max(...U.slice(-this.options.lanes).map((g=>g.end))),X-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(g,{adjustments:R,behavior:U})=>{this.options.scrollToFn(g,{behavior:U,adjustments:R},this)},this.measure=()=>{var g,R;this.itemSizeCache=new Map,null==(R=(g=this.options).onChange)||R.call(g,this,!1)},this.setOptions(g)}}const W=(g,R,U,X)=>{for(;g<=R;){const V=(g+R)/2|0,f=U(V);if(f<X)g=V+1;else{if(!(f>X))return V;R=V-1}}return g>0?g-1:0},v="undefined"!=typeof document?E.useLayoutEffect:E.useEffect;var T=U(55230),c=U(894116);const s="virtualList--3a827",G="scrollable--b27c5",gg="desktop--840f2",Rg="virtualizerContainer--d4830",Ug="virtualItemsContainer--4b280",Xg="alignToEnd--e793c",Vg="alignToStart--0c40b";function fg({className:g,scrollableClassName:R,itemsContainerClassName:U,itemClassName:X,items:V,getItemKey:q,estimateSize:D,renderItem:o,overscan:$,dataRole:e,containerRef:i,scrollableRef:I,controllerRef:P,alignTo:M}){var y,r;const w=E.useRef(null),z=T.a(I,w),H=c.o((g=>q(V[g],g))),B=(_={count:V.length,getItemKey:H,getScrollElement:()=>w.current,estimateSize:D,overscan:$},function(g){const R=E.useReducer((()=>({})),{})[1],U={...g,onChange:(U,X)=>{var V;X?d.flushSync(R):R(),null==(V=g.onChange)||V.call(g,U,X)}},[X]=E.useState((()=>new C(U)));return X.setOptions(U),E.useEffect((()=>X._didMount()),[]),v((()=>X._willUpdate())),X}({observeElementRect:a,observeElementOffset:u,scrollToFn:Q,..._}));var _;const{scrollToEnd:O,scrollToEndIfSticky:x}=function(g,R=!1){const U=E.useRef(!0),X=c.o((()=>{if(g.options.count>0){const R=g.options.count-1;g.shouldAdjustScrollPositionOnItemSizeChange=()=>!0,g.scrollToIndex(R,{align:"start"}),g.shouldAdjustScrollPositionOnItemSizeChange=void 0;const U=g.options.getItemKey(R);g.elementsCache.get(U)||setTimeout((()=>{g.shouldAdjustScrollPositionOnItemSizeChange=()=>!0,g.scrollToIndex(R,{align:"start"}),g.shouldAdjustScrollPositionOnItemSizeChange=void 0}))}})),V=c.o((()=>{U.current&&X()}));E.useEffect((()=>{let U;return g.options.count>0&&(U=setTimeout((()=>{g.scrollToIndex(R?0:g.options.count-1,{align:"start"})}),100)),()=>clearTimeout(U)}),[]),E.useEffect((()=>{const R=g.scrollElement;if(!R)return;const X=()=>{requestAnimationFrame((()=>{U.current=R.scrollHeight-R.clientHeight<=R.scrollTop+50}))};return R.addEventListener("scroll",X),()=>{R.removeEventListener("scroll",X)}}),[]);const f=E.useRef(0);return E.useEffect((()=>{const R=g.scrollElement;if(!R)return;f.current=pg(R);const U=()=>{f.current=pg(R)};return R.addEventListener("scroll",U),()=>{R.removeEventListener("scroll",U)}}),[]),E.useEffect((()=>{const R=g.scrollElement;if(!R||!globalThis.ResizeObserver)return;const X=new ResizeObserver((()=>{U.current&&(R.scrollTop=R.scrollHeight-R.clientHeight)}));return X.observe(R),()=>X.disconnect()}),[g.scrollElement]),{scrollToEnd:X,scrollToEndIfSticky:V}}(B,"end"===M);E.useImperativeHandle(P,(()=>({scrollToEnd:O,scrollToEndIfSticky:x,scrollToIndex:g=>B.scrollToIndex(g)}))),E.useEffect((()=>{requestAnimationFrame((()=>x()))}),[V]);const N=B.getVirtualItems();return f.jsx("div",{ref:i,className:p.A(g,s,"start"===M&&Vg,"end"===M&&Xg),children:f.jsx("div",{className:p.A(R,G,{[gg]:S.DS.IS_DESKTOP}),ref:z,children:f.jsx("div",{className:Rg,style:{height:B.getTotalSize()},children:f.jsx("div",{className:p.A(U,Ug),"data-role":e,style:{transform:`translateY(${null!==(r=null===(y=N[0])||void 0===y?void 0:y.start)&&void 0!==r?r:0}px)`},children:N.map((g=>{const R=V[g.index];return f.jsx("div",{ref:B.measureElement,"data-index":g.index,className:X,children:o(R,g.index)},g.key)}))})})})})}const pg=g=>g.scrollHeight-g.scrollTop-g.clientHeight;var Eg=U(621418),qg=U(605861),Dg=U(604475),og=U(873734);const $g=g=>g.id,eg=57,ig=30,Ig=E.memo((({messages:g,activateLink:R,isRtl:U,FeedbackFormComponent:X,isLandscape:V,isLiveSupportChat:q,withTopGradient:D=!1,isCustomEmojiEnabled:o,gameTheme:$,isTabletClassic:e,bottomToTop:i=!1,showTranslatedText:I})=>{const P=E.useRef(null),M=E.useRef(null),y=E.useMemo((()=>i?[...g].reverse():g),[i,g]),r=E.useCallback(((g,R)=>qg.cS(y[g-1],R,q)),[q,y]),w=E.useCallback((g=>{return R=y[g],16*Math.max(Number(((g=>g.text.map((({data:g})=>g)).join("").length)(R)/30).toFixed(0)),1)+32;var R}),[y]),z=E.useCallback(((g,p)=>f.jsx(Dg.b,{isSourceName:r(p,g),message:g,isCustomEmojiEnabled:o,activateLink:R,isLandscape:V,isRtl:U,FeedbackFormComponent:X,gameTheme:$,showTranslatedText:I},g.id)),[X,R,$,o,V,U,r,I]),{className:H,updateGradient:B}=L.r(P,{enabled:D,reverse:!1,gradientSize:S.DS.IS_DESKTOP?ig:eg});var _,O;return function(g,R){E.useEffect((function(){var U,X;(null===(U=R[R.length-1])||void 0===U?void 0:U.ownMessage)&&(null===(X=g.current)||void 0===X||X.scrollToEnd())}),[R,g])}(M,y),_=P,E.useEffect((()=>{const g=_.current;if(g){const R=t.WD();return t.NO({id:R,element:g,allowVerticalScroll:!0}),()=>t.oj(R)}}),[_]),function(g,R){const U=Eg.J(R);E.useEffect((()=>{if(!g.current||!globalThis.ResizeObserver)return;const R=new ResizeObserver(U);return R.observe(g.current),()=>R.disconnect()}),[g,U])}(P,B),O=P,E.useEffect((()=>{const g=O.current;if(!g)return;g.style.overscrollBehaviorY="none";const R={passive:!1};let U=0;const X=g=>{U=g.touches[0].clientY};g.addEventListener("touchstart",X,R);const V=R=>{const X=R.touches[0].clientY;R.cancelable&&function(g){const R=g.endY-g.startY;return R>0&&0===g.scrollTop||R<0&&g.scrollHeight-g.offsetHeight===g.scrollTop}({startY:U,endY:X,scrollTop:g.scrollTop,scrollHeight:g.scrollHeight,offsetHeight:g.offsetHeight})&&R.preventDefault()};return g.addEventListener("touchmove",V,R),()=>{g.removeEventListener("touchstart",X),g.removeEventListener("touchmove",V),g.style.overscrollBehaviorY=""}}),[O]),function(g){E.useEffect((()=>{if(!g.current)return;const R=new MutationObserver((()=>{var R;0===(null===(R=g.current)||void 0===R?void 0:R.scrollTop)&&(g.current.scrollBy(-1,-1),g.current.scrollBy(1,1))}));return R.observe(g.current,{childList:!0,subtree:!0}),()=>R.disconnect()}),[g])}(P),f.jsx(fg,{dataRole:"mobile-chat-list-messages",className:p.A(og.A.messagesList,og.A.fullHeight,{[og.A.tabletClassic]:e,[og.A.desktop]:S.DS.IS_DESKTOP}),scrollableClassName:p.A(H),itemsContainerClassName:p.A(og.A.messagesListColumnDirection),scrollableRef:P,controllerRef:M,items:y,overscan:10,getItemKey:$g,estimateSize:w,renderItem:z,alignTo:i?"end":"start"})}));function Pg({adapter:g}){return{activateLink:g.activateLink,isLandscape:g.isLandscape,gameTheme:g.theme,isCustomEmojiEnabled:g.settings.useCustomEmoji()}}const Mg=X.xS(Ig,(g=>{const{state:R}=g;return{...Pg(g),isLiveSupportChat:!1,messages:V.Ag(R),withTopGradient:!0}})),yg=X.xS(Ig,(g=>{const{state:R}=g;return{...Pg(g),isLiveSupportChat:!0,messages:V.w(R),withTopGradient:!0,FeedbackFormComponent:F,showTranslatedText:V.fk(R)}}))},621418:(g,R,U)=>{U.d(R,{J:()=>V});var X=U(377810);function V(g){const R=X.useRef(g);return X.useLayoutEffect((()=>{R.current=g})),X.useMemo((()=>(...g)=>(0,R.current)(...g)),[])}}}]);
//# sourceMappingURL=https://sourcemaps.egcdn.com/frontend/evo/r2/js/evo-game.chat.c5c3f75e.js.map