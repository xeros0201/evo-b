"use strict";(()=>{var y,L,p,N,t,j,z,O={485163:(y,L,p)=>{p.d(L,{A:()=>N});const N={icon:"icon--639ca"}},320680:y=>{function L(y,L,p){var N,t,j,z,O;function h(){var m=Date.now()-z;m<L&&m>=0?N=setTimeout(h,L-m):(N=null,p||(O=y.apply(j,t),j=t=null))}null==L&&(L=100);var m=function(){j=this,t=arguments,z=Date.now();var m=p&&!N;return N||(N=setTimeout(h,L)),m&&(O=y.apply(j,t),j=t=null),O};return m.clear=function(){N&&(clearTimeout(N),N=null)},m.flush=function(){N&&(O=y.apply(j,t),j=t=null,clearTimeout(N),N=null)},m}L.debounce=L,y.exports=L},65402:(y,L,p)=>{var N=p(301654);L.__esModule=!0,L["default"]=void 0;var t=function(){};N(p(450679)).default&&(t=document.addEventListener?function(y,L,p,N){return y.removeEventListener(L,p,N||!1)}:document.attachEvent?function(y,L,p){return y.detachEvent("on"+L,p)}:void 0);var j=t;L["default"]=j,y.exports=L["default"]},609622:(y,L,p)=>{var N=p(301654);L.__esModule=!0,L["default"]=void 0;var t=function(){};N(p(450679)).default&&(t=document.addEventListener?function(y,L,p,N){return y.addEventListener(L,p,N||!1)}:document.attachEvent?function(y,L,p){return y.attachEvent("on"+L,(function(L){(L=L||window.event).target=L.target||L.srcElement,L.currentTarget=y,p.call(y,L)}))}:void 0);var j=t;L["default"]=j,y.exports=L["default"]},427728:(y,L,p)=>{var N=p(301654);L.__esModule=!0,L["default"]=L.animationEnd=L.animationDelay=L.animationTiming=L.animationDuration=L.animationName=L.transitionEnd=L.transitionDuration=L.transitionDelay=L.transitionTiming=L.transitionProperty=L.transform=void 0;var t,j,z,O,h,m,k,_,W,g,C,Q=N(p(450679)),T="transform";if(L.transform=T,L.animationEnd=z,L.transitionEnd=j,L.transitionDelay=k,L.transitionTiming=m,L.transitionDuration=h,L.transitionProperty=O,L.animationDelay=C,L.animationTiming=g,L.animationDuration=W,L.animationName=_,Q.default){var i=function(){for(var y,L,p=document.createElement("div").style,N={O:function(y){return"o"+y.toLowerCase()},Moz:function(y){return y.toLowerCase()},Webkit:function(y){return"webkit"+y},ms:function(y){return"MS"+y}},t=Object.keys(N),j="",z=0;z<t.length;z++){var O=t[z];if(O+"TransitionProperty"in p){j="-"+O.toLowerCase(),y=N[O]("TransitionEnd"),L=N[O]("AnimationEnd");break}}return!y&&"transitionProperty"in p&&(y="transitionend"),!L&&"animationName"in p&&(L="animationend"),p=null,{animationEnd:L,transitionEnd:y,prefix:j}}();t=i.prefix,L.transitionEnd=j=i.transitionEnd,L.animationEnd=z=i.animationEnd,L.transform=T=t+"-"+T,L.transitionProperty=O=t+"-transition-property",L.transitionDuration=h=t+"-transition-duration",L.transitionDelay=k=t+"-transition-delay",L.transitionTiming=m=t+"-transition-timing-function",L.animationName=_=t+"-animation-name",L.animationDuration=W=t+"-animation-duration",L.animationTiming=g=t+"-animation-delay",L.animationDelay=C=t+"-animation-timing-function"}var D={transform:T,end:j,property:O,timing:m,delay:k,duration:h};L["default"]=D},450679:(y,L)=>{L.__esModule=!0,L["default"]=void 0;var p=!("undefined"==typeof window||!window.document||!window.document.createElement);L["default"]=p,y.exports=L["default"]},625021:(y,L)=>{L.ConcurrentRoot=1,L.ContinuousEventPriority=4,L.DefaultEventPriority=16,L.DiscreteEventPriority=1},32501:(y,L,p)=>{y.exports=function(y){var L={},N=p(377810),t=p(882328),j=Object.assign;function z(y){for(var L="https://reactjs.org/docs/error-decoder.html?invariant="+y,p=1;p<arguments.length;p++)L+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+y+"; visit "+L+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O=N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,h=Symbol.for("react.element"),m=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),C=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),i=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),w=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var x=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var d=Symbol.iterator;function o(y){return null===y||"object"!=typeof y?null:"function"==typeof(y=d&&y[d]||y["@@iterator"])?y:null}function U(y){if(null==y)return null;if("function"==typeof y)return y.displayName||y.name||null;if("string"==typeof y)return y;switch(y){case k:return"Fragment";case m:return"Portal";case W:return"Profiler";case _:return"StrictMode";case T:return"Suspense";case i:return"SuspenseList"}if("object"==typeof y)switch(y.$$typeof){case C:return(y.displayName||"Context")+".Consumer";case g:return(y._context.displayName||"Context")+".Provider";case Q:var L=y.render;return(y=y.displayName)||(y=""!==(y=L.displayName||L.name||"")?"ForwardRef("+y+")":"ForwardRef"),y;case D:return null!==(L=y.displayName||null)?L:U(y.type)||"Memo";case w:L=y._payload,y=y._init;try{return U(y(L))}catch(y){}}return null}function I(y){var L=y.type;switch(y.tag){case 24:return"Cache";case 9:return(L.displayName||"Context")+".Consumer";case 10:return(L._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return y=(y=L.render).displayName||y.name||"",L.displayName||(""!==y?"ForwardRef("+y+")":"ForwardRef");case 7:return"Fragment";case 5:return L;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(L);case 8:return L===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof L)return L.displayName||L.name||null;if("string"==typeof L)return L}return null}function V(y){var L=y,p=y;if(y.alternate)for(;L.return;)L=L.return;else{y=L;do{!!(4098&(L=y).flags)&&(p=L.return),y=L.return}while(y)}return 3===L.tag?p:null}function F(y){if(V(y)!==y)throw Error(z(188))}function u(y){var L=y.alternate;if(!L){if(null===(L=V(y)))throw Error(z(188));return L!==y?null:y}for(var p=y,N=L;;){var t=p.return;if(null===t)break;var j=t.alternate;if(null===j){if(null!==(N=t.return)){p=N;continue}break}if(t.child===j.child){for(j=t.child;j;){if(j===p)return F(t),y;if(j===N)return F(t),L;j=j.sibling}throw Error(z(188))}if(p.return!==N.return)p=t,N=j;else{for(var O=!1,h=t.child;h;){if(h===p){O=!0,p=t,N=j;break}if(h===N){O=!0,N=t,p=j;break}h=h.sibling}if(!O){for(h=j.child;h;){if(h===p){O=!0,p=j,N=t;break}if(h===N){O=!0,N=j,p=t;break}h=h.sibling}if(!O)throw Error(z(189))}}if(p.alternate!==N)throw Error(z(190))}if(3!==p.tag)throw Error(z(188));return p.stateNode.current===p?y:L}function S(y){return null!==(y=u(y))?B(y):null}function B(y){if(5===y.tag||6===y.tag)return y;for(y=y.child;null!==y;){var L=B(y);if(null!==L)return L;y=y.sibling}return null}function R(y){if(5===y.tag||6===y.tag)return y;for(y=y.child;null!==y;){if(4!==y.tag){var L=R(y);if(null!==L)return L}y=y.sibling}return null}var Y,E=Array.isArray,P=y.getPublicInstance,l=y.getRootHostContext,M=y.getChildHostContext,f=y.prepareForCommit,a=y.resetAfterCommit,H=y.createInstance,X=y.appendInitialChild,J=y.finalizeInitialChildren,r=y.prepareUpdate,G=y.shouldSetTextContent,$=y.createTextInstance,q=y.scheduleTimeout,A=y.cancelTimeout,s=y.noTimeout,c=y.isPrimaryRenderer,K=y.supportsMutation,b=y.supportsPersistence,n=y.supportsHydration,v=y.getInstanceFromNode,e=y.preparePortalMount,Z=y.getCurrentEventPriority,yy=y.detachDeletedInstance,Ly=y.supportsMicrotasks,py=y.scheduleMicrotask,Ny=y.supportsTestSelectors,ty=y.findFiberRoot,jy=y.getBoundingRect,zy=y.getTextContent,Oy=y.isHiddenSubtree,hy=y.matchAccessibilityRole,my=y.setFocusIfFocusable,ky=y.setupIntersectionObserver,_y=y.appendChild,Wy=y.appendChildToContainer,gy=y.commitTextUpdate,Cy=y.commitMount,Qy=y.commitUpdate,Ty=y.insertBefore,iy=y.insertInContainerBefore,Dy=y.removeChild,wy=y.removeChildFromContainer,xy=y.resetTextContent,dy=y.hideInstance,oy=y.hideTextInstance,Uy=y.unhideInstance,Iy=y.unhideTextInstance,Vy=y.clearContainer,Fy=y.cloneInstance,uy=y.createContainerChildSet,Sy=y.appendChildToContainerChildSet,By=y.finalizeContainerChildren,Ry=y.replaceContainerChildren,Yy=y.cloneHiddenInstance,Ey=y.cloneHiddenTextInstance,Py=y.canHydrateInstance,ly=y.canHydrateTextInstance,My=y.canHydrateSuspenseInstance,fy=y.isSuspenseInstancePending,ay=y.isSuspenseInstanceFallback,Hy=y.getSuspenseInstanceFallbackErrorDetails,Xy=y.registerSuspenseInstanceRetry,Jy=y.getNextHydratableSibling,ry=y.getFirstHydratableChild,Gy=y.getFirstHydratableChildWithinContainer,$y=y.getFirstHydratableChildWithinSuspenseInstance,qy=y.hydrateInstance,Ay=y.hydrateTextInstance,sy=y.hydrateSuspenseInstance,cy=y.getNextHydratableInstanceAfterSuspenseInstance,Ky=y.commitHydratedContainer,by=y.commitHydratedSuspenseInstance,ny=y.clearSuspenseBoundary,vy=y.clearSuspenseBoundaryFromContainer,ey=y.shouldDeleteUnhydratedTailInstances,Zy=y.didNotMatchHydratedContainerTextInstance,yL=y.didNotMatchHydratedTextInstance;function LL(y){if(void 0===Y)try{throw Error()}catch(y){var L=y.stack.trim().match(/\n( *(at )?)/);Y=L&&L[1]||""}return"\n"+Y+y}var pL=!1;function NL(y,L){if(!y||pL)return"";pL=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(L)if(L=function(){throw Error()},Object.defineProperty(L.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(L,[])}catch(y){var N=y}Reflect.construct(y,[],L)}else{try{L.call()}catch(y){N=y}y.call(L.prototype)}else{try{throw Error()}catch(y){N=y}y()}}catch(L){if(L&&N&&"string"==typeof L.stack){for(var t=L.stack.split("\n"),j=N.stack.split("\n"),z=t.length-1,O=j.length-1;1<=z&&0<=O&&t[z]!==j[O];)O--;for(;1<=z&&0<=O;z--,O--)if(t[z]!==j[O]){if(1!==z||1!==O)do{if(z--,0>--O||t[z]!==j[O]){var h="\n"+t[z].replace(" at new "," at ");return y.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",y.displayName)),h}}while(1<=z&&0<=O);break}}}finally{pL=!1,Error.prepareStackTrace=p}return(y=y?y.displayName||y.name:"")?LL(y):""}var tL=Object.prototype.hasOwnProperty,jL=[],zL=-1;function OL(y){return{current:y}}function hL(y){0>zL||(y.current=jL[zL],jL[zL]=null,zL--)}function mL(y,L){zL++,jL[zL]=y.current,y.current=L}var kL={},_L=OL(kL),WL=OL(!1),gL=kL;function CL(y,L){var p=y.type.contextTypes;if(!p)return kL;var N=y.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===L)return N.__reactInternalMemoizedMaskedChildContext;var t,j={};for(t in p)j[t]=L[t];return N&&((y=y.stateNode).__reactInternalMemoizedUnmaskedChildContext=L,y.__reactInternalMemoizedMaskedChildContext=j),j}function QL(y){return null!=y.childContextTypes}function TL(){hL(WL),hL(_L)}function iL(y,L,p){if(_L.current!==kL)throw Error(z(168));mL(_L,L),mL(WL,p)}function DL(y,L,p){var N=y.stateNode;if(L=L.childContextTypes,"function"!=typeof N.getChildContext)return p;for(var t in N=N.getChildContext())if(!(t in L))throw Error(z(108,I(y)||"Unknown",t));return j({},p,N)}function wL(y){return y=(y=y.stateNode)&&y.__reactInternalMemoizedMergedChildContext||kL,gL=_L.current,mL(_L,y),mL(WL,WL.current),!0}function xL(y,L,p){var N=y.stateNode;if(!N)throw Error(z(169));p?(y=DL(y,L,gL),N.__reactInternalMemoizedMergedChildContext=y,hL(WL),hL(_L),mL(_L,y)):hL(WL),mL(WL,p)}var dL=Math.clz32?Math.clz32:function(y){return 0==(y>>>=0)?32:31-(oL(y)/UL|0)|0},oL=Math.log,UL=Math.LN2,IL=64,VL=4194304;function FL(y){switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&y;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&y;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return y}}function uL(y,L){var p=y.pendingLanes;if(0===p)return 0;var N=0,t=y.suspendedLanes,j=y.pingedLanes,z=268435455&p;if(0!==z){var O=z&~t;0!==O?N=FL(O):0!=(j&=z)&&(N=FL(j))}else 0!=(z=p&~t)?N=FL(z):0!==j&&(N=FL(j));if(0===N)return 0;if(0!==L&&L!==N&&!(L&t)&&((t=N&-N)>=(j=L&-L)||16===t&&4194240&j))return L;if(4&N&&(N|=16&p),0!==(L=y.entangledLanes))for(y=y.entanglements,L&=N;0<L;)t=1<<(p=31-dL(L)),N|=y[p],L&=~t;return N}function SL(y,L){switch(y){case 1:case 2:case 4:return L+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return L+5e3;default:return-1}}function BL(y){return 0!=(y=-1073741825&y.pendingLanes)?y:1073741824&y?1073741824:0}function RL(){var y=IL;return!(4194240&(IL<<=1))&&(IL=64),y}function YL(y){for(var L=[],p=0;31>p;p++)L.push(y);return L}function EL(y,L,p){y.pendingLanes|=L,536870912!==L&&(y.suspendedLanes=0,y.pingedLanes=0),(y=y.eventTimes)[L=31-dL(L)]=p}function PL(y,L){var p=y.entangledLanes|=L;for(y=y.entanglements;p;){var N=31-dL(p),t=1<<N;t&L|y[N]&L&&(y[N]|=L),p&=~t}}var lL=0;function ML(y){return 1<(y&=-y)?4<y?268435455&y?16:536870912:4:1}var fL=t.unstable_scheduleCallback,aL=t.unstable_cancelCallback,HL=t.unstable_shouldYield,XL=t.unstable_requestPaint,JL=t.unstable_now,rL=t.unstable_ImmediatePriority,GL=t.unstable_UserBlockingPriority,$L=t.unstable_NormalPriority,qL=t.unstable_IdlePriority,AL=null,sL=null,cL="function"==typeof Object.is?Object.is:function(y,L){return y===L&&(0!==y||1/y==1/L)||y!=y&&L!=L},KL=null,bL=!1,nL=!1;function vL(y){null===KL?KL=[y]:KL.push(y)}function eL(){if(!nL&&null!==KL){nL=!0;var y=0,L=lL;try{var p=KL;for(lL=1;y<p.length;y++){var N=p[y];do{N=N(!0)}while(null!==N)}KL=null,bL=!1}catch(L){throw null!==KL&&(KL=KL.slice(y+1)),fL(rL,eL),L}finally{lL=L,nL=!1}}return null}var ZL=[],yp=0,Lp=null,pp=0,Np=[],tp=0,jp=null,zp=1,Op="";function hp(y,L){ZL[yp++]=pp,ZL[yp++]=Lp,Lp=y,pp=L}function mp(y,L,p){Np[tp++]=zp,Np[tp++]=Op,Np[tp++]=jp,jp=y;var N=zp;y=Op;var t=32-dL(N)-1;N&=~(1<<t),p+=1;var j=32-dL(L)+t;if(30<j){var z=t-t%5;j=(N&(1<<z)-1).toString(32),N>>=z,t-=z,zp=1<<32-dL(L)+t|p<<t|N,Op=j+y}else zp=1<<j|p<<t|N,Op=y}function kp(y){null!==y.return&&(hp(y,1),mp(y,1,0))}function _p(y){for(;y===Lp;)Lp=ZL[--yp],ZL[yp]=null,pp=ZL[--yp],ZL[yp]=null;for(;y===jp;)jp=Np[--tp],Np[tp]=null,Op=Np[--tp],Np[tp]=null,zp=Np[--tp],Np[tp]=null}var Wp=null,gp=null,Cp=!1,Qp=!1,Tp=null;function ip(y,L){var p=jO(5,null,null,0);p.elementType="DELETED",p.stateNode=L,p.return=y,null===(L=y.deletions)?(y.deletions=[p],y.flags|=16):L.push(p)}function Dp(y,L){switch(y.tag){case 5:return null!==(L=Py(L,y.type,y.pendingProps))&&(y.stateNode=L,Wp=y,gp=ry(L),!0);case 6:return null!==(L=ly(L,y.pendingProps))&&(y.stateNode=L,Wp=y,gp=null,!0);case 13:if(null!==(L=My(L))){var p=null!==jp?{id:zp,overflow:Op}:null;return y.memoizedState={dehydrated:L,treeContext:p,retryLane:1073741824},(p=jO(18,null,null,0)).stateNode=L,p.return=y,y.child=p,Wp=y,gp=null,!0}return!1;default:return!1}}function wp(y){return!(!(1&y.mode)||128&y.flags)}function xp(y){if(Cp){var L=gp;if(L){var p=L;if(!Dp(y,L)){if(wp(y))throw Error(z(418));L=Jy(p);var N=Wp;L&&Dp(y,L)?ip(N,p):(y.flags=-4097&y.flags|2,Cp=!1,Wp=y)}}else{if(wp(y))throw Error(z(418));y.flags=-4097&y.flags|2,Cp=!1,Wp=y}}}function dp(y){for(y=y.return;null!==y&&5!==y.tag&&3!==y.tag&&13!==y.tag;)y=y.return;Wp=y}function op(y){if(!n||y!==Wp)return!1;if(!Cp)return dp(y),Cp=!0,!1;if(3!==y.tag&&(5!==y.tag||ey(y.type)&&!G(y.type,y.memoizedProps))){var L=gp;if(L){if(wp(y))throw Up(),Error(z(418));for(;L;)ip(y,L),L=Jy(L)}}if(dp(y),13===y.tag){if(!n)throw Error(z(316));if(!(y=null!==(y=y.memoizedState)?y.dehydrated:null))throw Error(z(317));gp=cy(y)}else gp=Wp?Jy(y.stateNode):null;return!0}function Up(){for(var y=gp;y;)y=Jy(y)}function Ip(){n&&(gp=Wp=null,Qp=Cp=!1)}function Vp(y){null===Tp?Tp=[y]:Tp.push(y)}var Fp=O.ReactCurrentBatchConfig;function up(y,L){if(cL(y,L))return!0;if("object"!=typeof y||null===y||"object"!=typeof L||null===L)return!1;var p=Object.keys(y),N=Object.keys(L);if(p.length!==N.length)return!1;for(N=0;N<p.length;N++){var t=p[N];if(!tL.call(L,t)||!cL(y[t],L[t]))return!1}return!0}function Sp(y){switch(y.tag){case 5:return LL(y.type);case 16:return LL("Lazy");case 13:return LL("Suspense");case 19:return LL("SuspenseList");case 0:case 2:case 15:return NL(y.type,!1);case 11:return NL(y.type.render,!1);case 1:return NL(y.type,!0);default:return""}}function Bp(y,L){if(y&&y.defaultProps){for(var p in L=j({},L),y=y.defaultProps)void 0===L[p]&&(L[p]=y[p]);return L}return L}var Rp=OL(null),Yp=null,Ep=null,Pp=null;function lp(){Pp=Ep=Yp=null}function Mp(y,L,p){c?(mL(Rp,L._currentValue),L._currentValue=p):(mL(Rp,L._currentValue2),L._currentValue2=p)}function fp(y){var L=Rp.current;hL(Rp),c?y._currentValue=L:y._currentValue2=L}function ap(y,L,p){for(;null!==y;){var N=y.alternate;if((y.childLanes&L)!==L?(y.childLanes|=L,null!==N&&(N.childLanes|=L)):null!==N&&(N.childLanes&L)!==L&&(N.childLanes|=L),y===p)break;y=y.return}}function Hp(y,L){Yp=y,Pp=Ep=null,null!==(y=y.dependencies)&&null!==y.firstContext&&(!!(y.lanes&L)&&(Pt=!0),y.firstContext=null)}function Xp(y){var L=c?y._currentValue:y._currentValue2;if(Pp!==y)if(y={context:y,memoizedValue:L,next:null},null===Ep){if(null===Yp)throw Error(z(308));Ep=y,Yp.dependencies={lanes:0,firstContext:y}}else Ep=Ep.next=y;return L}var Jp=null;function rp(y){null===Jp?Jp=[y]:Jp.push(y)}function Gp(y,L,p,N){var t=L.interleaved;return null===t?(p.next=p,rp(L)):(p.next=t.next,t.next=p),L.interleaved=p,$p(y,N)}function $p(y,L){y.lanes|=L;var p=y.alternate;for(null!==p&&(p.lanes|=L),p=y,y=y.return;null!==y;)y.childLanes|=L,null!==(p=y.alternate)&&(p.childLanes|=L),p=y,y=y.return;return 3===p.tag?p.stateNode:null}var qp=!1;function Ap(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sp(y,L){y=y.updateQueue,L.updateQueue===y&&(L.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,effects:y.effects})}function cp(y,L){return{eventTime:y,lane:L,tag:0,payload:null,callback:null,next:null}}function Kp(y,L,p){var N=y.updateQueue;if(null===N)return null;if(N=N.shared,2&Lz){var t=N.pending;return null===t?L.next=L:(L.next=t.next,t.next=L),N.pending=L,$p(y,p)}return null===(t=N.interleaved)?(L.next=L,rp(N)):(L.next=t.next,t.next=L),N.interleaved=L,$p(y,p)}function bp(y,L,p){if(null!==(L=L.updateQueue)&&(L=L.shared,4194240&p)){var N=L.lanes;p|=N&=y.pendingLanes,L.lanes=p,PL(y,p)}}function np(y,L){var p=y.updateQueue,N=y.alternate;if(null!==N&&p===(N=N.updateQueue)){var t=null,j=null;if(null!==(p=p.firstBaseUpdate)){do{var z={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===j?t=j=z:j=j.next=z,p=p.next}while(null!==p);null===j?t=j=L:j=j.next=L}else t=j=L;return p={baseState:N.baseState,firstBaseUpdate:t,lastBaseUpdate:j,shared:N.shared,effects:N.effects},void(y.updateQueue=p)}null===(y=p.lastBaseUpdate)?p.firstBaseUpdate=L:y.next=L,p.lastBaseUpdate=L}function vp(y,L,p,N){var t=y.updateQueue;qp=!1;var z=t.firstBaseUpdate,O=t.lastBaseUpdate,h=t.shared.pending;if(null!==h){t.shared.pending=null;var m=h,k=m.next;m.next=null,null===O?z=k:O.next=k,O=m;var _=y.alternate;null!==_&&(h=(_=_.updateQueue).lastBaseUpdate)!==O&&(null===h?_.firstBaseUpdate=k:h.next=k,_.lastBaseUpdate=m)}if(null!==z){var W=t.baseState;O=0,_=k=m=null,h=z;do{var g=h.lane,C=h.eventTime;if((N&g)===g){null!==_&&(_=_.next={eventTime:C,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});y:{var Q=y,T=h;switch(g=L,C=p,T.tag){case 1:if("function"==typeof(Q=T.payload)){W=Q.call(C,W,g);break y}W=Q;break y;case 3:Q.flags=-65537&Q.flags|128;case 0:if(null==(g="function"==typeof(Q=T.payload)?Q.call(C,W,g):Q))break y;W=j({},W,g);break y;case 2:qp=!0}}null!==h.callback&&0!==h.lane&&(y.flags|=64,null===(g=t.effects)?t.effects=[h]:g.push(h))}else C={eventTime:C,lane:g,tag:h.tag,payload:h.payload,callback:h.callback,next:null},null===_?(k=_=C,m=W):_=_.next=C,O|=g;if(null===(h=h.next)){if(null===(h=t.shared.pending))break;h=(g=h).next,g.next=null,t.lastBaseUpdate=g,t.shared.pending=null}}while(1);if(null===_&&(m=W),t.baseState=m,t.firstBaseUpdate=k,t.lastBaseUpdate=_,null!==(L=t.shared.interleaved)){t=L;do{O|=t.lane,t=t.next}while(t!==L)}else null===z&&(t.shared.lanes=0);mz|=O,y.lanes=O,y.memoizedState=W}}function ep(y,L,p){if(y=L.effects,L.effects=null,null!==y)for(L=0;L<y.length;L++){var N=y[L],t=N.callback;if(null!==t){if(N.callback=null,N=p,"function"!=typeof t)throw Error(z(191,t));t.call(N)}}}var Zp=(new N.Component).refs;function yN(y,L,p,N){p=null==(p=p(N,L=y.memoizedState))?L:j({},L,p),y.memoizedState=p,0===y.lanes&&(y.updateQueue.baseState=p)}var LN={isMounted:function(y){return!!(y=y._reactInternals)&&V(y)===y},enqueueSetState:function(y,L,p){y=y._reactInternals;var N=Bz(),t=Rz(y),j=cp(N,t);j.payload=L,null!=p&&(j.callback=p),null!==(L=Kp(y,j,t))&&(Yz(L,y,t,N),bp(L,y,t))},enqueueReplaceState:function(y,L,p){y=y._reactInternals;var N=Bz(),t=Rz(y),j=cp(N,t);j.tag=1,j.payload=L,null!=p&&(j.callback=p),null!==(L=Kp(y,j,t))&&(Yz(L,y,t,N),bp(L,y,t))},enqueueForceUpdate:function(y,L){y=y._reactInternals;var p=Bz(),N=Rz(y),t=cp(p,N);t.tag=2,null!=L&&(t.callback=L),null!==(L=Kp(y,t,N))&&(Yz(L,y,N,p),bp(L,y,N))}};function pN(y,L,p,N,t,j,z){return"function"==typeof(y=y.stateNode).shouldComponentUpdate?y.shouldComponentUpdate(N,j,z):!(L.prototype&&L.prototype.isPureReactComponent&&up(p,N)&&up(t,j))}function NN(y,L,p){var N=!1,t=kL,j=L.contextType;return"object"==typeof j&&null!==j?j=Xp(j):(t=QL(L)?gL:_L.current,j=(N=null!=(N=L.contextTypes))?CL(y,t):kL),L=new L(p,j),y.memoizedState=null!==L.state&&void 0!==L.state?L.state:null,L.updater=LN,y.stateNode=L,L._reactInternals=y,N&&((y=y.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,y.__reactInternalMemoizedMaskedChildContext=j),L}function tN(y,L,p,N){y=L.state,"function"==typeof L.componentWillReceiveProps&&L.componentWillReceiveProps(p,N),"function"==typeof L.UNSAFE_componentWillReceiveProps&&L.UNSAFE_componentWillReceiveProps(p,N),L.state!==y&&LN.enqueueReplaceState(L,L.state,null)}function jN(y,L,p,N){var t=y.stateNode;t.props=p,t.state=y.memoizedState,t.refs=Zp,Ap(y);var j=L.contextType;"object"==typeof j&&null!==j?t.context=Xp(j):(j=QL(L)?gL:_L.current,t.context=CL(y,j)),t.state=y.memoizedState,"function"==typeof(j=L.getDerivedStateFromProps)&&(yN(y,L,j,p),t.state=y.memoizedState),"function"==typeof L.getDerivedStateFromProps||"function"==typeof t.getSnapshotBeforeUpdate||"function"!=typeof t.UNSAFE_componentWillMount&&"function"!=typeof t.componentWillMount||(L=t.state,"function"==typeof t.componentWillMount&&t.componentWillMount(),"function"==typeof t.UNSAFE_componentWillMount&&t.UNSAFE_componentWillMount(),L!==t.state&&LN.enqueueReplaceState(t,t.state,null),vp(y,p,t,N),t.state=y.memoizedState),"function"==typeof t.componentDidMount&&(y.flags|=4194308)}function zN(y,L,p){if(null!==(y=p.ref)&&"function"!=typeof y&&"object"!=typeof y){if(p._owner){if(p=p._owner){if(1!==p.tag)throw Error(z(309));var N=p.stateNode}if(!N)throw Error(z(147,y));var t=N,j=""+y;return null!==L&&null!==L.ref&&"function"==typeof L.ref&&L.ref._stringRef===j?L.ref:(L=function(y){var L=t.refs;L===Zp&&(L=t.refs={}),null===y?delete L[j]:L[j]=y},L._stringRef=j,L)}if("string"!=typeof y)throw Error(z(284));if(!p._owner)throw Error(z(290,y))}return y}function ON(y,L){throw y=Object.prototype.toString.call(L),Error(z(31,"[object Object]"===y?"object with keys {"+Object.keys(L).join(", ")+"}":y))}function hN(y){return(0,y._init)(y._payload)}function mN(y){function L(L,p){if(y){var N=L.deletions;null===N?(L.deletions=[p],L.flags|=16):N.push(p)}}function p(p,N){if(!y)return null;for(;null!==N;)L(p,N),N=N.sibling;return null}function N(y,L){for(y=new Map;null!==L;)null!==L.key?y.set(L.key,L):y.set(L.index,L),L=L.sibling;return y}function t(y,L){return(y=OO(y,L)).index=0,y.sibling=null,y}function j(L,p,N){return L.index=N,y?null!==(N=L.alternate)?(N=N.index)<p?(L.flags|=2,p):N:(L.flags|=2,p):(L.flags|=1048576,p)}function O(L){return y&&null===L.alternate&&(L.flags|=2),L}function _(y,L,p,N){return null===L||6!==L.tag?((L=_O(p,y.mode,N)).return=y,L):((L=t(L,p)).return=y,L)}function W(y,L,p,N){var j=p.type;return j===k?C(y,L,p.props.children,N,p.key):null!==L&&(L.elementType===j||"object"==typeof j&&null!==j&&j.$$typeof===w&&hN(j)===L.type)?((N=t(L,p.props)).ref=zN(y,L,p),N.return=y,N):((N=hO(p.type,p.key,p.props,null,y.mode,N)).ref=zN(y,L,p),N.return=y,N)}function g(y,L,p,N){return null===L||4!==L.tag||L.stateNode.containerInfo!==p.containerInfo||L.stateNode.implementation!==p.implementation?((L=WO(p,y.mode,N)).return=y,L):((L=t(L,p.children||[])).return=y,L)}function C(y,L,p,N,j){return null===L||7!==L.tag?((L=mO(p,y.mode,N,j)).return=y,L):((L=t(L,p)).return=y,L)}function Q(y,L,p){if("string"==typeof L&&""!==L||"number"==typeof L)return(L=_O(""+L,y.mode,p)).return=y,L;if("object"==typeof L&&null!==L){switch(L.$$typeof){case h:return(p=hO(L.type,L.key,L.props,null,y.mode,p)).ref=zN(y,null,L),p.return=y,p;case m:return(L=WO(L,y.mode,p)).return=y,L;case w:return Q(y,(0,L._init)(L._payload),p)}if(E(L)||o(L))return(L=mO(L,y.mode,p,null)).return=y,L;ON(y,L)}return null}function T(y,L,p,N){var t=null!==L?L.key:null;if("string"==typeof p&&""!==p||"number"==typeof p)return null!==t?null:_(y,L,""+p,N);if("object"==typeof p&&null!==p){switch(p.$$typeof){case h:return p.key===t?W(y,L,p,N):null;case m:return p.key===t?g(y,L,p,N):null;case w:return T(y,L,(t=p._init)(p._payload),N)}if(E(p)||o(p))return null!==t?null:C(y,L,p,N,null);ON(y,p)}return null}function i(y,L,p,N,t){if("string"==typeof N&&""!==N||"number"==typeof N)return _(L,y=y.get(p)||null,""+N,t);if("object"==typeof N&&null!==N){switch(N.$$typeof){case h:return W(L,y=y.get(null===N.key?p:N.key)||null,N,t);case m:return g(L,y=y.get(null===N.key?p:N.key)||null,N,t);case w:return i(y,L,p,(0,N._init)(N._payload),t)}if(E(N)||o(N))return C(L,y=y.get(p)||null,N,t,null);ON(L,N)}return null}function D(t,z,O,h){for(var m=null,k=null,_=z,W=z=0,g=null;null!==_&&W<O.length;W++){_.index>W?(g=_,_=null):g=_.sibling;var C=T(t,_,O[W],h);if(null===C){null===_&&(_=g);break}y&&_&&null===C.alternate&&L(t,_),z=j(C,z,W),null===k?m=C:k.sibling=C,k=C,_=g}if(W===O.length)return p(t,_),Cp&&hp(t,W),m;if(null===_){for(;W<O.length;W++)null!==(_=Q(t,O[W],h))&&(z=j(_,z,W),null===k?m=_:k.sibling=_,k=_);return Cp&&hp(t,W),m}for(_=N(t,_);W<O.length;W++)null!==(g=i(_,t,W,O[W],h))&&(y&&null!==g.alternate&&_.delete(null===g.key?W:g.key),z=j(g,z,W),null===k?m=g:k.sibling=g,k=g);return y&&_.forEach((function(y){return L(t,y)})),Cp&&hp(t,W),m}function x(t,O,h,m){var k=o(h);if("function"!=typeof k)throw Error(z(150));if(null==(h=k.call(h)))throw Error(z(151));for(var _=k=null,W=O,g=O=0,C=null,D=h.next();null!==W&&!D.done;g++,D=h.next()){W.index>g?(C=W,W=null):C=W.sibling;var w=T(t,W,D.value,m);if(null===w){null===W&&(W=C);break}y&&W&&null===w.alternate&&L(t,W),O=j(w,O,g),null===_?k=w:_.sibling=w,_=w,W=C}if(D.done)return p(t,W),Cp&&hp(t,g),k;if(null===W){for(;!D.done;g++,D=h.next())null!==(D=Q(t,D.value,m))&&(O=j(D,O,g),null===_?k=D:_.sibling=D,_=D);return Cp&&hp(t,g),k}for(W=N(t,W);!D.done;g++,D=h.next())null!==(D=i(W,t,g,D.value,m))&&(y&&null!==D.alternate&&W.delete(null===D.key?g:D.key),O=j(D,O,g),null===_?k=D:_.sibling=D,_=D);return y&&W.forEach((function(y){return L(t,y)})),Cp&&hp(t,g),k}return function y(N,j,z,_){if("object"==typeof z&&null!==z&&z.type===k&&null===z.key&&(z=z.props.children),"object"==typeof z&&null!==z){switch(z.$$typeof){case h:y:{for(var W=z.key,g=j;null!==g;){if(g.key===W){if((W=z.type)===k){if(7===g.tag){p(N,g.sibling),(j=t(g,z.props.children)).return=N,N=j;break y}}else if(g.elementType===W||"object"==typeof W&&null!==W&&W.$$typeof===w&&hN(W)===g.type){p(N,g.sibling),(j=t(g,z.props)).ref=zN(N,g,z),j.return=N,N=j;break y}p(N,g);break}L(N,g),g=g.sibling}z.type===k?((j=mO(z.props.children,N.mode,_,z.key)).return=N,N=j):((_=hO(z.type,z.key,z.props,null,N.mode,_)).ref=zN(N,j,z),_.return=N,N=_)}return O(N);case m:y:{for(g=z.key;null!==j;){if(j.key===g){if(4===j.tag&&j.stateNode.containerInfo===z.containerInfo&&j.stateNode.implementation===z.implementation){p(N,j.sibling),(j=t(j,z.children||[])).return=N,N=j;break y}p(N,j);break}L(N,j),j=j.sibling}(j=WO(z,N.mode,_)).return=N,N=j}return O(N);case w:return y(N,j,(g=z._init)(z._payload),_)}if(E(z))return D(N,j,z,_);if(o(z))return x(N,j,z,_);ON(N,z)}return"string"==typeof z&&""!==z||"number"==typeof z?(z=""+z,null!==j&&6===j.tag?(p(N,j.sibling),(j=t(j,z)).return=N,N=j):(p(N,j),(j=_O(z,N.mode,_)).return=N,N=j),O(N)):p(N,j)}}var kN=mN(!0),_N=mN(!1),WN={},gN=OL(WN),CN=OL(WN),QN=OL(WN);function TN(y){if(y===WN)throw Error(z(174));return y}function iN(y,L){mL(QN,L),mL(CN,y),mL(gN,WN),y=l(L),hL(gN),mL(gN,y)}function DN(){hL(gN),hL(CN),hL(QN)}function wN(y){var L=TN(QN.current),p=TN(gN.current);p!==(L=M(p,y.type,L))&&(mL(CN,y),mL(gN,L))}function xN(y){CN.current===y&&(hL(gN),hL(CN))}var dN=OL(0);function oN(y){for(var L=y;null!==L;){if(13===L.tag){var p=L.memoizedState;if(null!==p&&(null===(p=p.dehydrated)||fy(p)||ay(p)))return L}else if(19===L.tag&&void 0!==L.memoizedProps.revealOrder){if(128&L.flags)return L}else if(null!==L.child){L.child.return=L,L=L.child;continue}if(L===y)break;for(;null===L.sibling;){if(null===L.return||L.return===y)return null;L=L.return}L.sibling.return=L.return,L=L.sibling}return null}var UN=[];function IN(){for(var y=0;y<UN.length;y++){var L=UN[y];c?L._workInProgressVersionPrimary=null:L._workInProgressVersionSecondary=null}UN.length=0}var VN=O.ReactCurrentDispatcher,FN=O.ReactCurrentBatchConfig,uN=0,SN=null,BN=null,RN=null,YN=!1,EN=!1,PN=0,lN=0;function MN(){throw Error(z(321))}function fN(y,L){if(null===L)return!1;for(var p=0;p<L.length&&p<y.length;p++)if(!cL(y[p],L[p]))return!1;return!0}function aN(y,L,p,N,t,j){if(uN=j,SN=L,L.memoizedState=null,L.updateQueue=null,L.lanes=0,VN.current=null===y||null===y.memoizedState?xt:dt,y=p(N,t),EN){j=0;do{if(EN=!1,PN=0,25<=j)throw Error(z(301));j+=1,RN=BN=null,L.updateQueue=null,VN.current=ot,y=p(N,t)}while(EN)}if(VN.current=wt,L=null!==BN&&null!==BN.next,uN=0,RN=BN=SN=null,YN=!1,L)throw Error(z(300));return y}function HN(){var y=0!==PN;return PN=0,y}function XN(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===RN?SN.memoizedState=RN=y:RN=RN.next=y,RN}function JN(){if(null===BN){var y=SN.alternate;y=null!==y?y.memoizedState:null}else y=BN.next;var L=null===RN?SN.memoizedState:RN.next;if(null!==L)RN=L,BN=y;else{if(null===y)throw Error(z(310));y={memoizedState:(BN=y).memoizedState,baseState:BN.baseState,baseQueue:BN.baseQueue,queue:BN.queue,next:null},null===RN?SN.memoizedState=RN=y:RN=RN.next=y}return RN}function rN(y,L){return"function"==typeof L?L(y):L}function GN(y){var L=JN(),p=L.queue;if(null===p)throw Error(z(311));p.lastRenderedReducer=y;var N=BN,t=N.baseQueue,j=p.pending;if(null!==j){if(null!==t){var O=t.next;t.next=j.next,j.next=O}N.baseQueue=t=j,p.pending=null}if(null!==t){j=t.next,N=N.baseState;var h=O=null,m=null,k=j;do{var _=k.lane;if((uN&_)===_)null!==m&&(m=m.next={lane:0,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),N=k.hasEagerState?k.eagerState:y(N,k.action);else{var W={lane:_,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null};null===m?(h=m=W,O=N):m=m.next=W,SN.lanes|=_,mz|=_}k=k.next}while(null!==k&&k!==j);null===m?O=N:m.next=h,cL(N,L.memoizedState)||(Pt=!0),L.memoizedState=N,L.baseState=O,L.baseQueue=m,p.lastRenderedState=N}if(null!==(y=p.interleaved)){t=y;do{j=t.lane,SN.lanes|=j,mz|=j,t=t.next}while(t!==y)}else null===t&&(p.lanes=0);return[L.memoizedState,p.dispatch]}function $N(y){var L=JN(),p=L.queue;if(null===p)throw Error(z(311));p.lastRenderedReducer=y;var N=p.dispatch,t=p.pending,j=L.memoizedState;if(null!==t){p.pending=null;var O=t=t.next;do{j=y(j,O.action),O=O.next}while(O!==t);cL(j,L.memoizedState)||(Pt=!0),L.memoizedState=j,null===L.baseQueue&&(L.baseState=j),p.lastRenderedState=j}return[j,N]}function qN(){}function AN(y,L){var p=SN,N=JN(),t=L(),j=!cL(N.memoizedState,t);if(j&&(N.memoizedState=t,Pt=!0),N=N.queue,Nt(KN.bind(null,p,N,y),[y]),N.getSnapshot!==L||j||null!==RN&&1&RN.memoizedState.tag){if(p.flags|=2048,eN(9,cN.bind(null,p,N,t,L),void 0,null),null===pz)throw Error(z(349));30&uN||sN(p,L,t)}return t}function sN(y,L,p){y.flags|=16384,y={getSnapshot:L,value:p},null===(L=SN.updateQueue)?(L={lastEffect:null,stores:null},SN.updateQueue=L,L.stores=[y]):null===(p=L.stores)?L.stores=[y]:p.push(y)}function cN(y,L,p,N){L.value=p,L.getSnapshot=N,bN(L)&&nN(y)}function KN(y,L,p){return p((function(){bN(L)&&nN(y)}))}function bN(y){var L=y.getSnapshot;y=y.value;try{var p=L();return!cL(y,p)}catch(y){return!0}}function nN(y){var L=$p(y,1);null!==L&&Yz(L,y,1,-1)}function vN(y){var L=XN();return"function"==typeof y&&(y=y()),L.memoizedState=L.baseState=y,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rN,lastRenderedState:y},L.queue=y,y=y.dispatch=Qt.bind(null,SN,y),[L.memoizedState,y]}function eN(y,L,p,N){return y={tag:y,create:L,destroy:p,deps:N,next:null},null===(L=SN.updateQueue)?(L={lastEffect:null,stores:null},SN.updateQueue=L,L.lastEffect=y.next=y):null===(p=L.lastEffect)?L.lastEffect=y.next=y:(N=p.next,p.next=y,y.next=N,L.lastEffect=y),y}function ZN(){return JN().memoizedState}function yt(y,L,p,N){var t=XN();SN.flags|=y,t.memoizedState=eN(1|L,p,void 0,void 0===N?null:N)}function Lt(y,L,p,N){var t=JN();N=void 0===N?null:N;var j=void 0;if(null!==BN){var z=BN.memoizedState;if(j=z.destroy,null!==N&&fN(N,z.deps))return void(t.memoizedState=eN(L,p,j,N))}SN.flags|=y,t.memoizedState=eN(1|L,p,j,N)}function pt(y,L){return yt(8390656,8,y,L)}function Nt(y,L){return Lt(2048,8,y,L)}function tt(y,L){return Lt(4,2,y,L)}function jt(y,L){return Lt(4,4,y,L)}function zt(y,L){return"function"==typeof L?(y=y(),L(y),function(){L(null)}):null!=L?(y=y(),L.current=y,function(){L.current=null}):void 0}function Ot(y,L,p){return p=null!=p?p.concat([y]):null,Lt(4,4,zt.bind(null,L,y),p)}function ht(){}function mt(y,L){var p=JN();L=void 0===L?null:L;var N=p.memoizedState;return null!==N&&null!==L&&fN(L,N[1])?N[0]:(p.memoizedState=[y,L],y)}function kt(y,L){var p=JN();L=void 0===L?null:L;var N=p.memoizedState;return null!==N&&null!==L&&fN(L,N[1])?N[0]:(y=y(),p.memoizedState=[y,L],y)}function _t(y,L,p){return 21&uN?(cL(p,L)||(p=RL(),SN.lanes|=p,mz|=p,y.baseState=!0),L):(y.baseState&&(y.baseState=!1,Pt=!0),y.memoizedState=p)}function Wt(y,L){var p=lL;lL=0!==p&&4>p?p:4,y(!0);var N=FN.transition;FN.transition={};try{y(!1),L()}finally{lL=p,FN.transition=N}}function gt(){return JN().memoizedState}function Ct(y,L,p){var N=Rz(y);p={lane:N,action:p,hasEagerState:!1,eagerState:null,next:null},Tt(y)?it(L,p):null!==(p=Gp(y,L,p,N))&&(Yz(p,y,N,Bz()),Dt(p,L,N))}function Qt(y,L,p){var N=Rz(y),t={lane:N,action:p,hasEagerState:!1,eagerState:null,next:null};if(Tt(y))it(L,t);else{var j=y.alternate;if(0===y.lanes&&(null===j||0===j.lanes)&&null!==(j=L.lastRenderedReducer))try{var z=L.lastRenderedState,O=j(z,p);if(t.hasEagerState=!0,t.eagerState=O,cL(O,z)){var h=L.interleaved;return null===h?(t.next=t,rp(L)):(t.next=h.next,h.next=t),void(L.interleaved=t)}}catch(y){}null!==(p=Gp(y,L,t,N))&&(Yz(p,y,N,t=Bz()),Dt(p,L,N))}}function Tt(y){var L=y.alternate;return y===SN||null!==L&&L===SN}function it(y,L){EN=YN=!0;var p=y.pending;null===p?L.next=L:(L.next=p.next,p.next=L),y.pending=L}function Dt(y,L,p){if(4194240&p){var N=L.lanes;p|=N&=y.pendingLanes,L.lanes=p,PL(y,p)}}var wt={readContext:Xp,useCallback:MN,useContext:MN,useEffect:MN,useImperativeHandle:MN,useInsertionEffect:MN,useLayoutEffect:MN,useMemo:MN,useReducer:MN,useRef:MN,useState:MN,useDebugValue:MN,useDeferredValue:MN,useTransition:MN,useMutableSource:MN,useSyncExternalStore:MN,useId:MN,unstable_isNewReconciler:!1},xt={readContext:Xp,useCallback:function(y,L){return XN().memoizedState=[y,void 0===L?null:L],y},useContext:Xp,useEffect:pt,useImperativeHandle:function(y,L,p){return p=null!=p?p.concat([y]):null,yt(4194308,4,zt.bind(null,L,y),p)},useLayoutEffect:function(y,L){return yt(4194308,4,y,L)},useInsertionEffect:function(y,L){return yt(4,2,y,L)},useMemo:function(y,L){var p=XN();return L=void 0===L?null:L,y=y(),p.memoizedState=[y,L],y},useReducer:function(y,L,p){var N=XN();return L=void 0!==p?p(L):L,N.memoizedState=N.baseState=L,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:L},N.queue=y,y=y.dispatch=Ct.bind(null,SN,y),[N.memoizedState,y]},useRef:function(y){return y={current:y},XN().memoizedState=y},useState:vN,useDebugValue:ht,useDeferredValue:function(y){return XN().memoizedState=y},useTransition:function(){var y=vN(!1),L=y[0];return y=Wt.bind(null,y[1]),XN().memoizedState=y,[L,y]},useMutableSource:function(){},useSyncExternalStore:function(y,L,p){var N=SN,t=XN();if(Cp){if(void 0===p)throw Error(z(407));p=p()}else{if(p=L(),null===pz)throw Error(z(349));30&uN||sN(N,L,p)}t.memoizedState=p;var j={value:p,getSnapshot:L};return t.queue=j,pt(KN.bind(null,N,j,y),[y]),N.flags|=2048,eN(9,cN.bind(null,N,j,p,L),void 0,null),p},useId:function(){var y=XN(),L=pz.identifierPrefix;if(Cp){var p=Op;L=":"+L+"R"+(p=(zp&~(1<<32-dL(zp)-1)).toString(32)+p),0<(p=PN++)&&(L+="H"+p.toString(32)),L+=":"}else L=":"+L+"r"+(p=lN++).toString(32)+":";return y.memoizedState=L},unstable_isNewReconciler:!1},dt={readContext:Xp,useCallback:mt,useContext:Xp,useEffect:Nt,useImperativeHandle:Ot,useInsertionEffect:tt,useLayoutEffect:jt,useMemo:kt,useReducer:GN,useRef:ZN,useState:function(){return GN(rN)},useDebugValue:ht,useDeferredValue:function(y){return _t(JN(),BN.memoizedState,y)},useTransition:function(){return[GN(rN)[0],JN().memoizedState]},useMutableSource:qN,useSyncExternalStore:AN,useId:gt,unstable_isNewReconciler:!1},ot={readContext:Xp,useCallback:mt,useContext:Xp,useEffect:Nt,useImperativeHandle:Ot,useInsertionEffect:tt,useLayoutEffect:jt,useMemo:kt,useReducer:$N,useRef:ZN,useState:function(){return $N(rN)},useDebugValue:ht,useDeferredValue:function(y){var L=JN();return null===BN?L.memoizedState=y:_t(L,BN.memoizedState,y)},useTransition:function(){return[$N(rN)[0],JN().memoizedState]},useMutableSource:qN,useSyncExternalStore:AN,useId:gt,unstable_isNewReconciler:!1};function Ut(y,L){try{var p="",N=L;do{p+=Sp(N),N=N.return}while(N);var t=p}catch(y){t="\nError generating stack: "+y.message+"\n"+y.stack}return{value:y,source:L,stack:t,digest:null}}function It(y,L,p){return{value:y,source:null,stack:null!=p?p:null,digest:null!=L?L:null}}function Vt(y,L){try{console.error(L.value)}catch(y){setTimeout((function(){throw y}))}}var Ft="function"==typeof WeakMap?WeakMap:Map;function ut(y,L,p){(p=cp(-1,p)).tag=3,p.payload={element:null};var N=L.value;return p.callback=function(){wz||(wz=!0,xz=N),Vt(0,L)},p}function St(y,L,p){(p=cp(-1,p)).tag=3;var N=y.type.getDerivedStateFromError;if("function"==typeof N){var t=L.value;p.payload=function(){return N(t)},p.callback=function(){Vt(0,L)}}var j=y.stateNode;return null!==j&&"function"==typeof j.componentDidCatch&&(p.callback=function(){Vt(0,L),"function"!=typeof N&&(null===dz?dz=new Set([this]):dz.add(this));var y=L.stack;this.componentDidCatch(L.value,{componentStack:null!==y?y:""})}),p}function Bt(y,L,p){var N=y.pingCache;if(null===N){N=y.pingCache=new Ft;var t=new Set;N.set(L,t)}else void 0===(t=N.get(L))&&(t=new Set,N.set(L,t));t.has(p)||(t.add(p),y=Zz.bind(null,y,L,p),L.then(y,y))}function Rt(y){do{var L;if((L=13===y.tag)&&(L=null===(L=y.memoizedState)||null!==L.dehydrated),L)return y;y=y.return}while(null!==y);return null}function Yt(y,L,p,N,t){return 1&y.mode?(y.flags|=65536,y.lanes=t,y):(y===L?y.flags|=65536:(y.flags|=128,p.flags|=131072,p.flags&=-52805,1===p.tag&&(null===p.alternate?p.tag=17:((L=cp(-1,1)).tag=2,Kp(p,L,1))),p.lanes|=1),y)}var Et=O.ReactCurrentOwner,Pt=!1;function lt(y,L,p,N){L.child=null===y?_N(L,null,p,N):kN(L,y.child,p,N)}function Mt(y,L,p,N,t){p=p.render;var j=L.ref;return Hp(L,t),N=aN(y,L,p,N,j,t),p=HN(),null===y||Pt?(Cp&&p&&kp(L),L.flags|=1,lt(y,L,N,t),L.child):(L.updateQueue=y.updateQueue,L.flags&=-2053,y.lanes&=~t,tj(y,L,t))}function ft(y,L,p,N,t){if(null===y){var j=p.type;return"function"!=typeof j||zO(j)||void 0!==j.defaultProps||null!==p.compare||void 0!==p.defaultProps?((y=hO(p.type,null,N,L,L.mode,t)).ref=L.ref,y.return=L,L.child=y):(L.tag=15,L.type=j,at(y,L,j,N,t))}if(j=y.child,!(y.lanes&t)){var z=j.memoizedProps;if((p=null!==(p=p.compare)?p:up)(z,N)&&y.ref===L.ref)return tj(y,L,t)}return L.flags|=1,(y=OO(j,N)).ref=L.ref,y.return=L,L.child=y}function at(y,L,p,N,t){if(null!==y){var j=y.memoizedProps;if(up(j,N)&&y.ref===L.ref){if(Pt=!1,L.pendingProps=N=j,!(y.lanes&t))return L.lanes=y.lanes,tj(y,L,t);131072&y.flags&&(Pt=!0)}}return Jt(y,L,p,N,t)}function Ht(y,L,p){var N=L.pendingProps,t=N.children,j=null!==y?y.memoizedState:null;if("hidden"===N.mode)if(1&L.mode){if(!(1073741824&p))return y=null!==j?j.baseLanes|p:p,L.lanes=L.childLanes=1073741824,L.memoizedState={baseLanes:y,cachePool:null,transitions:null},L.updateQueue=null,mL(zz,jz),jz|=y,null;L.memoizedState={baseLanes:0,cachePool:null,transitions:null},N=null!==j?j.baseLanes:p,mL(zz,jz),jz|=N}else L.memoizedState={baseLanes:0,cachePool:null,transitions:null},mL(zz,jz),jz|=p;else null!==j?(N=j.baseLanes|p,L.memoizedState=null):N=p,mL(zz,jz),jz|=N;return lt(y,L,t,p),L.child}function Xt(y,L){var p=L.ref;(null===y&&null!==p||null!==y&&y.ref!==p)&&(L.flags|=512,L.flags|=2097152)}function Jt(y,L,p,N,t){var j=QL(p)?gL:_L.current;return j=CL(L,j),Hp(L,t),p=aN(y,L,p,N,j,t),N=HN(),null===y||Pt?(Cp&&N&&kp(L),L.flags|=1,lt(y,L,p,t),L.child):(L.updateQueue=y.updateQueue,L.flags&=-2053,y.lanes&=~t,tj(y,L,t))}function rt(y,L,p,N,t){if(QL(p)){var j=!0;wL(L)}else j=!1;if(Hp(L,t),null===L.stateNode)Nj(y,L),NN(L,p,N),jN(L,p,N,t),N=!0;else if(null===y){var z=L.stateNode,O=L.memoizedProps;z.props=O;var h=z.context,m=p.contextType;m="object"==typeof m&&null!==m?Xp(m):CL(L,m=QL(p)?gL:_L.current);var k=p.getDerivedStateFromProps,_="function"==typeof k||"function"==typeof z.getSnapshotBeforeUpdate;_||"function"!=typeof z.UNSAFE_componentWillReceiveProps&&"function"!=typeof z.componentWillReceiveProps||(O!==N||h!==m)&&tN(L,z,N,m),qp=!1;var W=L.memoizedState;z.state=W,vp(L,N,z,t),h=L.memoizedState,O!==N||W!==h||WL.current||qp?("function"==typeof k&&(yN(L,p,k,N),h=L.memoizedState),(O=qp||pN(L,p,O,N,W,h,m))?(_||"function"!=typeof z.UNSAFE_componentWillMount&&"function"!=typeof z.componentWillMount||("function"==typeof z.componentWillMount&&z.componentWillMount(),"function"==typeof z.UNSAFE_componentWillMount&&z.UNSAFE_componentWillMount()),"function"==typeof z.componentDidMount&&(L.flags|=4194308)):("function"==typeof z.componentDidMount&&(L.flags|=4194308),L.memoizedProps=N,L.memoizedState=h),z.props=N,z.state=h,z.context=m,N=O):("function"==typeof z.componentDidMount&&(L.flags|=4194308),N=!1)}else{z=L.stateNode,sp(y,L),O=L.memoizedProps,m=L.type===L.elementType?O:Bp(L.type,O),z.props=m,_=L.pendingProps,W=z.context,h="object"==typeof(h=p.contextType)&&null!==h?Xp(h):CL(L,h=QL(p)?gL:_L.current);var g=p.getDerivedStateFromProps;(k="function"==typeof g||"function"==typeof z.getSnapshotBeforeUpdate)||"function"!=typeof z.UNSAFE_componentWillReceiveProps&&"function"!=typeof z.componentWillReceiveProps||(O!==_||W!==h)&&tN(L,z,N,h),qp=!1,W=L.memoizedState,z.state=W,vp(L,N,z,t);var C=L.memoizedState;O!==_||W!==C||WL.current||qp?("function"==typeof g&&(yN(L,p,g,N),C=L.memoizedState),(m=qp||pN(L,p,m,N,W,C,h)||!1)?(k||"function"!=typeof z.UNSAFE_componentWillUpdate&&"function"!=typeof z.componentWillUpdate||("function"==typeof z.componentWillUpdate&&z.componentWillUpdate(N,C,h),"function"==typeof z.UNSAFE_componentWillUpdate&&z.UNSAFE_componentWillUpdate(N,C,h)),"function"==typeof z.componentDidUpdate&&(L.flags|=4),"function"==typeof z.getSnapshotBeforeUpdate&&(L.flags|=1024)):("function"!=typeof z.componentDidUpdate||O===y.memoizedProps&&W===y.memoizedState||(L.flags|=4),"function"!=typeof z.getSnapshotBeforeUpdate||O===y.memoizedProps&&W===y.memoizedState||(L.flags|=1024),L.memoizedProps=N,L.memoizedState=C),z.props=N,z.state=C,z.context=h,N=m):("function"!=typeof z.componentDidUpdate||O===y.memoizedProps&&W===y.memoizedState||(L.flags|=4),"function"!=typeof z.getSnapshotBeforeUpdate||O===y.memoizedProps&&W===y.memoizedState||(L.flags|=1024),N=!1)}return Gt(y,L,p,N,j,t)}function Gt(y,L,p,N,t,j){Xt(y,L);var z=!!(128&L.flags);if(!N&&!z)return t&&xL(L,p,!1),tj(y,L,j);N=L.stateNode,Et.current=L;var O=z&&"function"!=typeof p.getDerivedStateFromError?null:N.render();return L.flags|=1,null!==y&&z?(L.child=kN(L,y.child,null,j),L.child=kN(L,null,O,j)):lt(y,L,O,j),L.memoizedState=N.state,t&&xL(L,p,!0),L.child}function $t(y){var L=y.stateNode;L.pendingContext?iL(0,L.pendingContext,L.pendingContext!==L.context):L.context&&iL(0,L.context,!1),iN(y,L.containerInfo)}function qt(y,L,p,N,t){return Ip(),Vp(t),L.flags|=256,lt(y,L,p,N),L.child}var At,st,ct,Kt,bt={dehydrated:null,treeContext:null,retryLane:0};function nt(y){return{baseLanes:y,cachePool:null,transitions:null}}function vt(y,L,p){var N,t=L.pendingProps,j=dN.current,O=!1,h=!!(128&L.flags);if((N=h)||(N=(null===y||null!==y.memoizedState)&&!!(2&j)),N?(O=!0,L.flags&=-129):null!==y&&null===y.memoizedState||(j|=1),mL(dN,1&j),null===y)return xp(L),null!==(y=L.memoizedState)&&null!==(y=y.dehydrated)?(1&L.mode?ay(y)?L.lanes=8:L.lanes=1073741824:L.lanes=1,null):(h=t.children,y=t.fallback,O?(t=L.mode,O=L.child,h={mode:"hidden",children:h},1&t||null===O?O=kO(h,t,0,null):(O.childLanes=0,O.pendingProps=h),y=mO(y,t,p,null),O.return=L,y.return=L,O.sibling=y,L.child=O,L.child.memoizedState=nt(p),L.memoizedState=bt,y):et(L,h));if(null!==(j=y.memoizedState)&&null!==(N=j.dehydrated))return function(y,L,p,N,t,j,O){if(p)return 256&L.flags?(L.flags&=-257,Zt(y,L,O,N=It(Error(z(422))))):null!==L.memoizedState?(L.child=y.child,L.flags|=128,null):(j=N.fallback,t=L.mode,N=kO({mode:"visible",children:N.children},t,0,null),(j=mO(j,t,O,null)).flags|=2,N.return=L,j.return=L,N.sibling=j,L.child=N,1&L.mode&&kN(L,y.child,null,O),L.child.memoizedState=nt(O),L.memoizedState=bt,j);if(!(1&L.mode))return Zt(y,L,O,null);if(ay(t))return N=Hy(t).digest,Zt(y,L,O,N=It(j=Error(z(419)),N,void 0));if(p=!!(O&y.childLanes),Pt||p){if(null!==(N=pz)){switch(O&-O){case 4:t=2;break;case 16:t=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:t=32;break;case 536870912:t=268435456;break;default:t=0}0!==(t=t&(N.suspendedLanes|O)?0:t)&&t!==j.retryLane&&(j.retryLane=t,$p(y,t),Yz(N,y,t,-1))}return $z(),Zt(y,L,O,N=It(Error(z(421))))}return fy(t)?(L.flags|=128,L.child=y.child,L=LO.bind(null,y),Xy(t,L),null):(y=j.treeContext,n&&(gp=$y(t),Wp=L,Cp=!0,Tp=null,Qp=!1,null!==y&&(Np[tp++]=zp,Np[tp++]=Op,Np[tp++]=jp,zp=y.id,Op=y.overflow,jp=L)),(L=et(L,N.children)).flags|=4096,L)}(y,L,h,t,N,j,p);if(O){O=t.fallback,h=L.mode,N=(j=y.child).sibling;var m={mode:"hidden",children:t.children};return 1&h||L.child===j?(t=OO(j,m)).subtreeFlags=14680064&j.subtreeFlags:((t=L.child).childLanes=0,t.pendingProps=m,L.deletions=null),null!==N?O=OO(N,O):(O=mO(O,h,p,null)).flags|=2,O.return=L,t.return=L,t.sibling=O,L.child=t,t=O,O=L.child,h=null===(h=y.child.memoizedState)?nt(p):{baseLanes:h.baseLanes|p,cachePool:null,transitions:h.transitions},O.memoizedState=h,O.childLanes=y.childLanes&~p,L.memoizedState=bt,t}return y=(O=y.child).sibling,t=OO(O,{mode:"visible",children:t.children}),!(1&L.mode)&&(t.lanes=p),t.return=L,t.sibling=null,null!==y&&(null===(p=L.deletions)?(L.deletions=[y],L.flags|=16):p.push(y)),L.child=t,L.memoizedState=null,t}function et(y,L){return(L=kO({mode:"visible",children:L},y.mode,0,null)).return=y,y.child=L}function Zt(y,L,p,N){return null!==N&&Vp(N),kN(L,y.child,null,p),(y=et(L,L.pendingProps.children)).flags|=2,L.memoizedState=null,y}function yj(y,L,p){y.lanes|=L;var N=y.alternate;null!==N&&(N.lanes|=L),ap(y.return,L,p)}function Lj(y,L,p,N,t){var j=y.memoizedState;null===j?y.memoizedState={isBackwards:L,rendering:null,renderingStartTime:0,last:N,tail:p,tailMode:t}:(j.isBackwards=L,j.rendering=null,j.renderingStartTime=0,j.last=N,j.tail=p,j.tailMode=t)}function pj(y,L,p){var N=L.pendingProps,t=N.revealOrder,j=N.tail;if(lt(y,L,N.children,p),2&(N=dN.current))N=1&N|2,L.flags|=128;else{if(null!==y&&128&y.flags)y:for(y=L.child;null!==y;){if(13===y.tag)null!==y.memoizedState&&yj(y,p,L);else if(19===y.tag)yj(y,p,L);else if(null!==y.child){y.child.return=y,y=y.child;continue}if(y===L)break y;for(;null===y.sibling;){if(null===y.return||y.return===L)break y;y=y.return}y.sibling.return=y.return,y=y.sibling}N&=1}if(mL(dN,N),1&L.mode)switch(t){case"forwards":for(p=L.child,t=null;null!==p;)null!==(y=p.alternate)&&null===oN(y)&&(t=p),p=p.sibling;null===(p=t)?(t=L.child,L.child=null):(t=p.sibling,p.sibling=null),Lj(L,!1,t,p,j);break;case"backwards":for(p=null,t=L.child,L.child=null;null!==t;){if(null!==(y=t.alternate)&&null===oN(y)){L.child=t;break}y=t.sibling,t.sibling=p,p=t,t=y}Lj(L,!0,p,null,j);break;case"together":Lj(L,!1,null,null,void 0);break;default:L.memoizedState=null}else L.memoizedState=null;return L.child}function Nj(y,L){!(1&L.mode)&&null!==y&&(y.alternate=null,L.alternate=null,L.flags|=2)}function tj(y,L,p){if(null!==y&&(L.dependencies=y.dependencies),mz|=L.lanes,!(p&L.childLanes))return null;if(null!==y&&L.child!==y.child)throw Error(z(153));if(null!==L.child){for(p=OO(y=L.child,y.pendingProps),L.child=p,p.return=L;null!==y.sibling;)y=y.sibling,(p=p.sibling=OO(y,y.pendingProps)).return=L;p.sibling=null}return L.child}function jj(y){y.flags|=4}function zj(y,L){if(null!==y&&y.child===L.child)return!0;if(16&L.flags)return!1;for(y=L.child;null!==y;){if(12854&y.flags||12854&y.subtreeFlags)return!1;y=y.sibling}return!0}if(K)At=function(y,L){for(var p=L.child;null!==p;){if(5===p.tag||6===p.tag)X(y,p.stateNode);else if(4!==p.tag&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===L)break;for(;null===p.sibling;){if(null===p.return||p.return===L)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},st=function(){},ct=function(y,L,p,N,t){if((y=y.memoizedProps)!==N){var j=L.stateNode,z=TN(gN.current);p=r(j,p,y,N,t,z),(L.updateQueue=p)&&jj(L)}},Kt=function(y,L,p,N){p!==N&&jj(L)};else if(b){At=function(y,L,p,N){for(var t=L.child;null!==t;){if(5===t.tag){var j=t.stateNode;p&&N&&(j=Yy(j,t.type,t.memoizedProps,t)),X(y,j)}else if(6===t.tag)j=t.stateNode,p&&N&&(j=Ey(j,t.memoizedProps,t)),X(y,j);else if(4!==t.tag)if(22===t.tag&&null!==t.memoizedState)null!==(j=t.child)&&(j.return=t),At(y,t,!0,!0);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===L)break;for(;null===t.sibling;){if(null===t.return||t.return===L)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};var Oj=function(y,L,p,N){for(var t=L.child;null!==t;){if(5===t.tag){var j=t.stateNode;p&&N&&(j=Yy(j,t.type,t.memoizedProps,t)),Sy(y,j)}else if(6===t.tag)j=t.stateNode,p&&N&&(j=Ey(j,t.memoizedProps,t)),Sy(y,j);else if(4!==t.tag)if(22===t.tag&&null!==t.memoizedState)null!==(j=t.child)&&(j.return=t),Oj(y,t,!0,!0);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===L)break;for(;null===t.sibling;){if(null===t.return||t.return===L)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};st=function(y,L){var p=L.stateNode;if(!zj(y,L)){y=p.containerInfo;var N=uy(y);Oj(N,L,!1,!1),p.pendingChildren=N,jj(L),By(y,N)}},ct=function(y,L,p,N,t){var j=y.stateNode,z=y.memoizedProps;if((y=zj(y,L))&&z===N)L.stateNode=j;else{var O=L.stateNode,h=TN(gN.current),m=null;z!==N&&(m=r(O,p,z,N,t,h)),y&&null===m?L.stateNode=j:(j=Fy(j,m,p,z,N,L,y,O),J(j,p,N,t,h)&&jj(L),L.stateNode=j,y?jj(L):At(j,L,!1,!1))}},Kt=function(y,L,p,N){p!==N?(y=TN(QN.current),p=TN(gN.current),L.stateNode=$(N,y,p,L),jj(L)):L.stateNode=y.stateNode}}else st=function(){},ct=function(){},Kt=function(){};function hj(y,L){if(!Cp)switch(y.tailMode){case"hidden":L=y.tail;for(var p=null;null!==L;)null!==L.alternate&&(p=L),L=L.sibling;null===p?y.tail=null:p.sibling=null;break;case"collapsed":p=y.tail;for(var N=null;null!==p;)null!==p.alternate&&(N=p),p=p.sibling;null===N?L||null===y.tail?y.tail=null:y.tail.sibling=null:N.sibling=null}}function mj(y){var L=null!==y.alternate&&y.alternate.child===y.child,p=0,N=0;if(L)for(var t=y.child;null!==t;)p|=t.lanes|t.childLanes,N|=14680064&t.subtreeFlags,N|=14680064&t.flags,t.return=y,t=t.sibling;else for(t=y.child;null!==t;)p|=t.lanes|t.childLanes,N|=t.subtreeFlags,N|=t.flags,t.return=y,t=t.sibling;return y.subtreeFlags|=N,y.childLanes=p,L}function kj(y,L,p){var N=L.pendingProps;switch(_p(L),L.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mj(L),null;case 1:case 17:return QL(L.type)&&TL(),mj(L),null;case 3:return p=L.stateNode,DN(),hL(WL),hL(_L),IN(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),null!==y&&null!==y.child||(op(L)?jj(L):null===y||y.memoizedState.isDehydrated&&!(256&L.flags)||(L.flags|=1024,null!==Tp&&(Mz(Tp),Tp=null))),st(y,L),mj(L),null;case 5:xN(L),p=TN(QN.current);var t=L.type;if(null!==y&&null!=L.stateNode)ct(y,L,t,N,p),y.ref!==L.ref&&(L.flags|=512,L.flags|=2097152);else{if(!N){if(null===L.stateNode)throw Error(z(166));return mj(L),null}if(y=TN(gN.current),op(L)){if(!n)throw Error(z(175));y=qy(L.stateNode,L.type,L.memoizedProps,p,y,L,!Qp),L.updateQueue=y,null!==y&&jj(L)}else{var j=H(t,N,p,y,L);At(j,L,!1,!1),L.stateNode=j,J(j,t,N,p,y)&&jj(L)}null!==L.ref&&(L.flags|=512,L.flags|=2097152)}return mj(L),null;case 6:if(y&&null!=L.stateNode)Kt(y,L,y.memoizedProps,N);else{if("string"!=typeof N&&null===L.stateNode)throw Error(z(166));if(y=TN(QN.current),p=TN(gN.current),op(L)){if(!n)throw Error(z(176));if(y=L.stateNode,p=L.memoizedProps,(N=Ay(y,p,L,!Qp))&&null!==(t=Wp))switch(t.tag){case 3:Zy(t.stateNode.containerInfo,y,p,!!(1&t.mode));break;case 5:yL(t.type,t.memoizedProps,t.stateNode,y,p,!!(1&t.mode))}N&&jj(L)}else L.stateNode=$(N,y,p,L)}return mj(L),null;case 13:if(hL(dN),N=L.memoizedState,null===y||null!==y.memoizedState&&null!==y.memoizedState.dehydrated){if(Cp&&null!==gp&&1&L.mode&&!(128&L.flags))Up(),Ip(),L.flags|=98560,t=!1;else if(t=op(L),null!==N&&null!==N.dehydrated){if(null===y){if(!t)throw Error(z(318));if(!n)throw Error(z(344));if(!(t=null!==(t=L.memoizedState)?t.dehydrated:null))throw Error(z(317));sy(t,L)}else Ip(),!(128&L.flags)&&(L.memoizedState=null),L.flags|=4;mj(L),t=!1}else null!==Tp&&(Mz(Tp),Tp=null),t=!0;if(!t)return 65536&L.flags?L:null}return 128&L.flags?(L.lanes=p,L):((p=null!==N)!=(null!==y&&null!==y.memoizedState)&&p&&(L.child.flags|=8192,1&L.mode&&(null===y||1&dN.current?0===Oz&&(Oz=3):$z())),null!==L.updateQueue&&(L.flags|=4),mj(L),null);case 4:return DN(),st(y,L),null===y&&e(L.stateNode.containerInfo),mj(L),null;case 10:return fp(L.type._context),mj(L),null;case 19:if(hL(dN),null===(t=L.memoizedState))return mj(L),null;if(N=!!(128&L.flags),null===(j=t.rendering))if(N)hj(t,!1);else{if(0!==Oz||null!==y&&128&y.flags)for(y=L.child;null!==y;){if(null!==(j=oN(y))){for(L.flags|=128,hj(t,!1),null!==(y=j.updateQueue)&&(L.updateQueue=y,L.flags|=4),L.subtreeFlags=0,y=p,p=L.child;null!==p;)t=y,(N=p).flags&=14680066,null===(j=N.alternate)?(N.childLanes=0,N.lanes=t,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=j.childLanes,N.lanes=j.lanes,N.child=j.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=j.memoizedProps,N.memoizedState=j.memoizedState,N.updateQueue=j.updateQueue,N.type=j.type,t=j.dependencies,N.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),p=p.sibling;return mL(dN,1&dN.current|2),L.child}y=y.sibling}null!==t.tail&&JL()>Qz&&(L.flags|=128,N=!0,hj(t,!1),L.lanes=4194304)}else{if(!N)if(null!==(y=oN(j))){if(L.flags|=128,N=!0,null!==(y=y.updateQueue)&&(L.updateQueue=y,L.flags|=4),hj(t,!0),null===t.tail&&"hidden"===t.tailMode&&!j.alternate&&!Cp)return mj(L),null}else 2*JL()-t.renderingStartTime>Qz&&1073741824!==p&&(L.flags|=128,N=!0,hj(t,!1),L.lanes=4194304);t.isBackwards?(j.sibling=L.child,L.child=j):(null!==(y=t.last)?y.sibling=j:L.child=j,t.last=j)}return null!==t.tail?(L=t.tail,t.rendering=L,t.tail=L.sibling,t.renderingStartTime=JL(),L.sibling=null,y=dN.current,mL(dN,N?1&y|2:1&y),L):(mj(L),null);case 22:case 23:return Xz(),p=null!==L.memoizedState,null!==y&&null!==y.memoizedState!==p&&(L.flags|=8192),p&&1&L.mode?!!(1073741824&jz)&&(mj(L),K&&6&L.subtreeFlags&&(L.flags|=8192)):mj(L),null;case 24:case 25:return null}throw Error(z(156,L.tag))}function _j(y,L){switch(_p(L),L.tag){case 1:return QL(L.type)&&TL(),65536&(y=L.flags)?(L.flags=-65537&y|128,L):null;case 3:return DN(),hL(WL),hL(_L),IN(),65536&(y=L.flags)&&!(128&y)?(L.flags=-65537&y|128,L):null;case 5:return xN(L),null;case 13:if(hL(dN),null!==(y=L.memoizedState)&&null!==y.dehydrated){if(null===L.alternate)throw Error(z(340));Ip()}return 65536&(y=L.flags)?(L.flags=-65537&y|128,L):null;case 19:return hL(dN),null;case 4:return DN(),null;case 10:return fp(L.type._context),null;case 22:case 23:return Xz(),null;default:return null}}var Wj=!1,gj=!1,Cj="function"==typeof WeakSet?WeakSet:Set,Qj=null;function Tj(y,L){var p=y.ref;if(null!==p)if("function"==typeof p)try{p(null)}catch(p){ez(y,L,p)}else p.current=null}function ij(y,L,p){try{p()}catch(p){ez(y,L,p)}}var Dj=!1;function wj(y,L,p){var N=L.updateQueue;if(null!==(N=null!==N?N.lastEffect:null)){var t=N=N.next;do{if((t.tag&y)===y){var j=t.destroy;t.destroy=void 0,void 0!==j&&ij(L,p,j)}t=t.next}while(t!==N)}}function xj(y,L){if(null!==(L=null!==(L=L.updateQueue)?L.lastEffect:null)){var p=L=L.next;do{if((p.tag&y)===y){var N=p.create;p.destroy=N()}p=p.next}while(p!==L)}}function dj(y){var L=y.ref;if(null!==L){var p=y.stateNode;y=5===y.tag?P(p):p,"function"==typeof L?L(y):L.current=y}}function oj(y){var L=y.alternate;null!==L&&(y.alternate=null,oj(L)),y.child=null,y.deletions=null,y.sibling=null,5===y.tag&&null!==(L=y.stateNode)&&yy(L),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function Uj(y){return 5===y.tag||3===y.tag||4===y.tag}function Ij(y){y:for(;;){for(;null===y.sibling;){if(null===y.return||Uj(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;5!==y.tag&&6!==y.tag&&18!==y.tag;){if(2&y.flags)continue y;if(null===y.child||4===y.tag)continue y;y.child.return=y,y=y.child}if(!(2&y.flags))return y.stateNode}}function Vj(y,L,p){var N=y.tag;if(5===N||6===N)y=y.stateNode,L?iy(p,y,L):Wy(p,y);else if(4!==N&&null!==(y=y.child))for(Vj(y,L,p),y=y.sibling;null!==y;)Vj(y,L,p),y=y.sibling}function Fj(y,L,p){var N=y.tag;if(5===N||6===N)y=y.stateNode,L?Ty(p,y,L):_y(p,y);else if(4!==N&&null!==(y=y.child))for(Fj(y,L,p),y=y.sibling;null!==y;)Fj(y,L,p),y=y.sibling}var uj=null,Sj=!1;function Bj(y,L,p){for(p=p.child;null!==p;)Rj(y,L,p),p=p.sibling}function Rj(y,L,p){if(sL&&"function"==typeof sL.onCommitFiberUnmount)try{sL.onCommitFiberUnmount(AL,p)}catch(y){}switch(p.tag){case 5:gj||Tj(p,L);case 6:if(K){var N=uj,t=Sj;uj=null,Bj(y,L,p),Sj=t,null!==(uj=N)&&(Sj?wy(uj,p.stateNode):Dy(uj,p.stateNode))}else Bj(y,L,p);break;case 18:K&&null!==uj&&(Sj?vy(uj,p.stateNode):ny(uj,p.stateNode));break;case 4:K?(N=uj,t=Sj,uj=p.stateNode.containerInfo,Sj=!0,Bj(y,L,p),uj=N,Sj=t):(b&&(N=p.stateNode.containerInfo,t=uy(N),Ry(N,t)),Bj(y,L,p));break;case 0:case 11:case 14:case 15:if(!gj&&null!==(N=p.updateQueue)&&null!==(N=N.lastEffect)){t=N=N.next;do{var j=t,z=j.destroy;j=j.tag,void 0!==z&&(2&j||4&j)&&ij(p,L,z),t=t.next}while(t!==N)}Bj(y,L,p);break;case 1:if(!gj&&(Tj(p,L),"function"==typeof(N=p.stateNode).componentWillUnmount))try{N.props=p.memoizedProps,N.state=p.memoizedState,N.componentWillUnmount()}catch(y){ez(p,L,y)}Bj(y,L,p);break;case 21:Bj(y,L,p);break;case 22:1&p.mode?(gj=(N=gj)||null!==p.memoizedState,Bj(y,L,p),gj=N):Bj(y,L,p);break;default:Bj(y,L,p)}}function Yj(y){var L=y.updateQueue;if(null!==L){y.updateQueue=null;var p=y.stateNode;null===p&&(p=y.stateNode=new Cj),L.forEach((function(L){var N=pO.bind(null,y,L);p.has(L)||(p.add(L),L.then(N,N))}))}}function Ej(y,L){var p=L.deletions;if(null!==p)for(var N=0;N<p.length;N++){var t=p[N];try{var j=y,O=L;if(K){var h=O;y:for(;null!==h;){switch(h.tag){case 5:uj=h.stateNode,Sj=!1;break y;case 3:case 4:uj=h.stateNode.containerInfo,Sj=!0;break y}h=h.return}if(null===uj)throw Error(z(160));Rj(j,O,t),uj=null,Sj=!1}else Rj(j,O,t);var m=t.alternate;null!==m&&(m.return=null),t.return=null}catch(y){ez(t,L,y)}}if(12854&L.subtreeFlags)for(L=L.child;null!==L;)Pj(L,y),L=L.sibling}function Pj(y,L){var p=y.alternate,N=y.flags;switch(y.tag){case 0:case 11:case 14:case 15:if(Ej(L,y),lj(y),4&N){try{wj(3,y,y.return),xj(3,y)}catch(L){ez(y,y.return,L)}try{wj(5,y,y.return)}catch(L){ez(y,y.return,L)}}break;case 1:Ej(L,y),lj(y),512&N&&null!==p&&Tj(p,p.return);break;case 5:if(Ej(L,y),lj(y),512&N&&null!==p&&Tj(p,p.return),K){if(32&y.flags){var t=y.stateNode;try{xy(t)}catch(L){ez(y,y.return,L)}}if(4&N&&null!=(t=y.stateNode)){var j=y.memoizedProps;if(p=null!==p?p.memoizedProps:j,N=y.type,L=y.updateQueue,y.updateQueue=null,null!==L)try{Qy(t,L,N,p,j,y)}catch(L){ez(y,y.return,L)}}}break;case 6:if(Ej(L,y),lj(y),4&N&&K){if(null===y.stateNode)throw Error(z(162));t=y.stateNode,j=y.memoizedProps,p=null!==p?p.memoizedProps:j;try{gy(t,p,j)}catch(L){ez(y,y.return,L)}}break;case 3:if(Ej(L,y),lj(y),4&N){if(K&&n&&null!==p&&p.memoizedState.isDehydrated)try{Ky(L.containerInfo)}catch(L){ez(y,y.return,L)}if(b){t=L.containerInfo,j=L.pendingChildren;try{Ry(t,j)}catch(L){ez(y,y.return,L)}}}break;case 4:if(Ej(L,y),lj(y),4&N&&b){t=(j=y.stateNode).containerInfo,j=j.pendingChildren;try{Ry(t,j)}catch(L){ez(y,y.return,L)}}break;case 13:Ej(L,y),lj(y),8192&(t=y.child).flags&&(j=null!==t.memoizedState,t.stateNode.isHidden=j,!j||null!==t.alternate&&null!==t.alternate.memoizedState||(Cz=JL())),4&N&&Yj(y);break;case 22:var O=null!==p&&null!==p.memoizedState;if(1&y.mode?(gj=(p=gj)||O,Ej(L,y),gj=p):Ej(L,y),lj(y),8192&N){if(p=null!==y.memoizedState,(y.stateNode.isHidden=p)&&!O&&1&y.mode)for(Qj=y,N=y.child;null!==N;){for(L=Qj=N;null!==Qj;){var h=(O=Qj).child;switch(O.tag){case 0:case 11:case 14:case 15:wj(4,O,O.return);break;case 1:Tj(O,O.return);var m=O.stateNode;if("function"==typeof m.componentWillUnmount){var k=O,_=O.return;try{var W=k;m.props=W.memoizedProps,m.state=W.memoizedState,m.componentWillUnmount()}catch(y){ez(k,_,y)}}break;case 5:Tj(O,O.return);break;case 22:if(null!==O.memoizedState){Hj(L);continue}}null!==h?(h.return=O,Qj=h):Hj(L)}N=N.sibling}if(K)y:if(N=null,K)for(L=y;;){if(5===L.tag){if(null===N){N=L;try{t=L.stateNode,p?dy(t):Uy(L.stateNode,L.memoizedProps)}catch(L){ez(y,y.return,L)}}}else if(6===L.tag){if(null===N)try{j=L.stateNode,p?oy(j):Iy(j,L.memoizedProps)}catch(L){ez(y,y.return,L)}}else if((22!==L.tag&&23!==L.tag||null===L.memoizedState||L===y)&&null!==L.child){L.child.return=L,L=L.child;continue}if(L===y)break y;for(;null===L.sibling;){if(null===L.return||L.return===y)break y;N===L&&(N=null),L=L.return}N===L&&(N=null),L.sibling.return=L.return,L=L.sibling}}break;case 19:Ej(L,y),lj(y),4&N&&Yj(y);break;case 21:break;default:Ej(L,y),lj(y)}}function lj(y){var L=y.flags;if(2&L){try{if(K){y:{for(var p=y.return;null!==p;){if(Uj(p)){var N=p;break y}p=p.return}throw Error(z(160))}switch(N.tag){case 5:var t=N.stateNode;32&N.flags&&(xy(t),N.flags&=-33),Fj(y,Ij(y),t);break;case 3:case 4:var j=N.stateNode.containerInfo;Vj(y,Ij(y),j);break;default:throw Error(z(161))}}}catch(L){ez(y,y.return,L)}y.flags&=-3}4096&L&&(y.flags&=-4097)}function Mj(y,L,p){Qj=y,fj(y,L,p)}function fj(y,L,p){for(var N=!!(1&y.mode);null!==Qj;){var t=Qj,j=t.child;if(22===t.tag&&N){var z=null!==t.memoizedState||Wj;if(!z){var O=t.alternate,h=null!==O&&null!==O.memoizedState||gj;O=Wj;var m=gj;if(Wj=z,(gj=h)&&!m)for(Qj=t;null!==Qj;)h=(z=Qj).child,22===z.tag&&null!==z.memoizedState?Xj(t):null!==h?(h.return=z,Qj=h):Xj(t);for(;null!==j;)Qj=j,fj(j,L,p),j=j.sibling;Qj=t,Wj=O,gj=m}aj(y)}else 8772&t.subtreeFlags&&null!==j?(j.return=t,Qj=j):aj(y)}}function aj(y){for(;null!==Qj;){var L=Qj;if(8772&L.flags){var p=L.alternate;try{if(8772&L.flags)switch(L.tag){case 0:case 11:case 15:gj||xj(5,L);break;case 1:var N=L.stateNode;if(4&L.flags&&!gj)if(null===p)N.componentDidMount();else{var t=L.elementType===L.type?p.memoizedProps:Bp(L.type,p.memoizedProps);N.componentDidUpdate(t,p.memoizedState,N.__reactInternalSnapshotBeforeUpdate)}var j=L.updateQueue;null!==j&&ep(L,j,N);break;case 3:var O=L.updateQueue;if(null!==O){if(p=null,null!==L.child)switch(L.child.tag){case 5:p=P(L.child.stateNode);break;case 1:p=L.child.stateNode}ep(L,O,p)}break;case 5:var h=L.stateNode;null===p&&4&L.flags&&Cy(h,L.type,L.memoizedProps,L);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(n&&null===L.memoizedState){var m=L.alternate;if(null!==m){var k=m.memoizedState;if(null!==k){var _=k.dehydrated;null!==_&&by(_)}}}break;default:throw Error(z(163))}gj||512&L.flags&&dj(L)}catch(y){ez(L,L.return,y)}}if(L===y){Qj=null;break}if(null!==(p=L.sibling)){p.return=L.return,Qj=p;break}Qj=L.return}}function Hj(y){for(;null!==Qj;){var L=Qj;if(L===y){Qj=null;break}var p=L.sibling;if(null!==p){p.return=L.return,Qj=p;break}Qj=L.return}}function Xj(y){for(;null!==Qj;){var L=Qj;try{switch(L.tag){case 0:case 11:case 15:var p=L.return;try{xj(4,L)}catch(y){ez(L,p,y)}break;case 1:var N=L.stateNode;if("function"==typeof N.componentDidMount){var t=L.return;try{N.componentDidMount()}catch(y){ez(L,t,y)}}var j=L.return;try{dj(L)}catch(y){ez(L,j,y)}break;case 5:var z=L.return;try{dj(L)}catch(y){ez(L,z,y)}}}catch(y){ez(L,L.return,y)}if(L===y){Qj=null;break}var O=L.sibling;if(null!==O){O.return=L.return,Qj=O;break}Qj=L.return}}var Jj=0,rj=1,Gj=2,$j=3,qj=4;if("function"==typeof Symbol&&Symbol.for){var Aj=Symbol.for;Jj=Aj("selector.component"),rj=Aj("selector.has_pseudo_class"),Gj=Aj("selector.role"),$j=Aj("selector.test_id"),qj=Aj("selector.text")}function sj(y){var L=v(y);if(null!=L){if("string"!=typeof L.memoizedProps["data-testname"])throw Error(z(364));return L}if(null===(y=ty(y)))throw Error(z(362));return y.stateNode.current}function cj(y,L){switch(L.$$typeof){case Jj:if(y.type===L.value)return!0;break;case rj:y:{L=L.value,y=[y,0];for(var p=0;p<y.length;){var N=y[p++],t=y[p++],j=L[t];if(5!==N.tag||!Oy(N)){for(;null!=j&&cj(N,j);)j=L[++t];if(t===L.length){L=!0;break y}for(N=N.child;null!==N;)y.push(N,t),N=N.sibling}}L=!1}return L;case Gj:if(5===y.tag&&hy(y.stateNode,L.value))return!0;break;case qj:if((5===y.tag||6===y.tag)&&null!==(y=zy(y))&&0<=y.indexOf(L.value))return!0;break;case $j:if(5===y.tag&&"string"==typeof(y=y.memoizedProps["data-testname"])&&y.toLowerCase()===L.value.toLowerCase())return!0;break;default:throw Error(z(365))}return!1}function Kj(y){switch(y.$$typeof){case Jj:return"<"+(U(y.value)||"Unknown")+">";case rj:return":has("+(Kj(y)||"")+")";case Gj:return'[role="'+y.value+'"]';case qj:return'"'+y.value+'"';case $j:return'[data-testname="'+y.value+'"]';default:throw Error(z(365))}}function bj(y,L){var p=[];y=[y,0];for(var N=0;N<y.length;){var t=y[N++],j=y[N++],z=L[j];if(5!==t.tag||!Oy(t)){for(;null!=z&&cj(t,z);)z=L[++j];if(j===L.length)p.push(t);else for(t=t.child;null!==t;)y.push(t,j),t=t.sibling}}return p}function nj(y,L){if(!Ny)throw Error(z(363));y=bj(y=sj(y),L),L=[],y=Array.from(y);for(var p=0;p<y.length;){var N=y[p++];if(5===N.tag)Oy(N)||L.push(N.stateNode);else for(N=N.child;null!==N;)y.push(N),N=N.sibling}return L}var vj=Math.ceil,ej=O.ReactCurrentDispatcher,Zj=O.ReactCurrentOwner,yz=O.ReactCurrentBatchConfig,Lz=0,pz=null,Nz=null,tz=0,jz=0,zz=OL(0),Oz=0,hz=null,mz=0,kz=0,_z=0,Wz=null,gz=null,Cz=0,Qz=1/0,Tz=null;function iz(){Qz=JL()+500}var Dz,wz=!1,xz=null,dz=null,oz=!1,Uz=null,Iz=0,Vz=0,Fz=null,uz=-1,Sz=0;function Bz(){return 6&Lz?JL():-1!==uz?uz:uz=JL()}function Rz(y){return 1&y.mode?2&Lz&&0!==tz?tz&-tz:null!==Fp.transition?(0===Sz&&(Sz=RL()),Sz):0!==(y=lL)?y:Z():1}function Yz(y,L,p,N){if(50<Vz)throw Vz=0,Fz=null,Error(z(185));EL(y,p,N),2&Lz&&y===pz||(y===pz&&(!(2&Lz)&&(kz|=p),4===Oz&&fz(y,tz)),Ez(y,N),1===p&&0===Lz&&!(1&L.mode)&&(iz(),bL&&eL()))}function Ez(y,L){var p=y.callbackNode;(function(y,L){for(var p=y.suspendedLanes,N=y.pingedLanes,t=y.expirationTimes,j=y.pendingLanes;0<j;){var z=31-dL(j),O=1<<z,h=t[z];-1===h?O&p&&!(O&N)||(t[z]=SL(O,L)):h<=L&&(y.expiredLanes|=O),j&=~O}})(y,L);var N=uL(y,y===pz?tz:0);if(0===N)null!==p&&aL(p),y.callbackNode=null,y.callbackPriority=0;else if(L=N&-N,y.callbackPriority!==L){if(null!=p&&aL(p),1===L)0===y.tag?function(y){bL=!0,vL(y)}(az.bind(null,y)):vL(az.bind(null,y)),Ly?py((function(){!(6&Lz)&&eL()})):fL(rL,eL),p=null;else{switch(ML(N)){case 1:p=rL;break;case 4:p=GL;break;case 16:default:p=$L;break;case 536870912:p=qL}p=NO(p,Pz.bind(null,y))}y.callbackPriority=L,y.callbackNode=p}}function Pz(y,L){if(uz=-1,Sz=0,6&Lz)throw Error(z(327));var p=y.callbackNode;if(nz()&&y.callbackNode!==p)return null;var N=uL(y,y===pz?tz:0);if(0===N)return null;if(30&N||N&y.expiredLanes||L)L=qz(y,N);else{L=N;var t=Lz;Lz|=2;var j=Gz();pz===y&&tz===L||(Tz=null,iz(),Jz(y,L));do{try{sz();break}catch(L){rz(y,L)}}while(1);lp(),ej.current=j,Lz=t,null!==Nz?L=0:(pz=null,tz=0,L=Oz)}if(0!==L){if(2===L&&0!==(t=BL(y))&&(N=t,L=lz(y,t)),1===L)throw p=hz,Jz(y,0),fz(y,N),Ez(y,JL()),p;if(6===L)fz(y,N);else{if(t=y.current.alternate,!(30&N||function(y){for(var L=y;;){if(16384&L.flags){var p=L.updateQueue;if(null!==p&&null!==(p=p.stores))for(var N=0;N<p.length;N++){var t=p[N],j=t.getSnapshot;t=t.value;try{if(!cL(j(),t))return!1}catch(y){return!1}}}if(p=L.child,16384&L.subtreeFlags&&null!==p)p.return=L,L=p;else{if(L===y)break;for(;null===L.sibling;){if(null===L.return||L.return===y)return!0;L=L.return}L.sibling.return=L.return,L=L.sibling}}return!0}(t)||(L=qz(y,N),2===L&&(j=BL(y),0!==j&&(N=j,L=lz(y,j))),1!==L)))throw p=hz,Jz(y,0),fz(y,N),Ez(y,JL()),p;switch(y.finishedWork=t,y.finishedLanes=N,L){case 0:case 1:throw Error(z(345));case 2:case 5:bz(y,gz,Tz);break;case 3:if(fz(y,N),(130023424&N)===N&&10<(L=Cz+500-JL())){if(0!==uL(y,0))break;if(((t=y.suspendedLanes)&N)!==N){Bz(),y.pingedLanes|=y.suspendedLanes&t;break}y.timeoutHandle=q(bz.bind(null,y,gz,Tz),L);break}bz(y,gz,Tz);break;case 4:if(fz(y,N),(4194240&N)===N)break;for(L=y.eventTimes,t=-1;0<N;){var O=31-dL(N);j=1<<O,(O=L[O])>t&&(t=O),N&=~j}if(N=t,10<(N=(120>(N=JL()-N)?120:480>N?480:1080>N?1080:1920>N?1920:3e3>N?3e3:4320>N?4320:1960*vj(N/1960))-N)){y.timeoutHandle=q(bz.bind(null,y,gz,Tz),N);break}bz(y,gz,Tz);break;default:throw Error(z(329))}}}return Ez(y,JL()),y.callbackNode===p?Pz.bind(null,y):null}function lz(y,L){var p=Wz;return y.current.memoizedState.isDehydrated&&(Jz(y,L).flags|=256),2!==(y=qz(y,L))&&(L=gz,gz=p,null!==L&&Mz(L)),y}function Mz(y){null===gz?gz=y:gz.push.apply(gz,y)}function fz(y,L){for(L&=~_z,L&=~kz,y.suspendedLanes|=L,y.pingedLanes&=~L,y=y.expirationTimes;0<L;){var p=31-dL(L),N=1<<p;y[p]=-1,L&=~N}}function az(y){if(6&Lz)throw Error(z(327));nz();var L=uL(y,0);if(!(1&L))return Ez(y,JL()),null;var p=qz(y,L);if(0!==y.tag&&2===p){var N=BL(y);0!==N&&(L=N,p=lz(y,N))}if(1===p)throw p=hz,Jz(y,0),fz(y,L),Ez(y,JL()),p;if(6===p)throw Error(z(345));return y.finishedWork=y.current.alternate,y.finishedLanes=L,bz(y,gz,Tz),Ez(y,JL()),null}function Hz(y){null!==Uz&&0===Uz.tag&&!(6&Lz)&&nz();var L=Lz;Lz|=1;var p=yz.transition,N=lL;try{if(yz.transition=null,lL=1,y)return y()}finally{lL=N,yz.transition=p,!(6&(Lz=L))&&eL()}}function Xz(){jz=zz.current,hL(zz)}function Jz(y,L){y.finishedWork=null,y.finishedLanes=0;var p=y.timeoutHandle;if(p!==s&&(y.timeoutHandle=s,A(p)),null!==Nz)for(p=Nz.return;null!==p;){var N=p;switch(_p(N),N.tag){case 1:null!=(N=N.type.childContextTypes)&&TL();break;case 3:DN(),hL(WL),hL(_L),IN();break;case 5:xN(N);break;case 4:DN();break;case 13:case 19:hL(dN);break;case 10:fp(N.type._context);break;case 22:case 23:Xz()}p=p.return}if(pz=y,Nz=y=OO(y.current,null),tz=jz=L,Oz=0,hz=null,_z=kz=mz=0,gz=Wz=null,null!==Jp){for(L=0;L<Jp.length;L++)if(null!==(N=(p=Jp[L]).interleaved)){p.interleaved=null;var t=N.next,j=p.pending;if(null!==j){var z=j.next;j.next=t,N.next=z}p.pending=N}Jp=null}return y}function rz(y,L){do{var p=Nz;try{if(lp(),VN.current=wt,YN){for(var N=SN.memoizedState;null!==N;){var t=N.queue;null!==t&&(t.pending=null),N=N.next}YN=!1}if(uN=0,RN=BN=SN=null,EN=!1,PN=0,Zj.current=null,null===p||null===p.return){Oz=1,hz=L,Nz=null;break}y:{var j=y,O=p.return,h=p,m=L;if(L=tz,h.flags|=32768,null!==m&&"object"==typeof m&&"function"==typeof m.then){var k=m,_=h,W=_.tag;if(!(1&_.mode||0!==W&&11!==W&&15!==W)){var g=_.alternate;g?(_.updateQueue=g.updateQueue,_.memoizedState=g.memoizedState,_.lanes=g.lanes):(_.updateQueue=null,_.memoizedState=null)}var C=Rt(O);if(null!==C){C.flags&=-257,Yt(C,O,h,0,L),1&C.mode&&Bt(j,k,L),m=k;var Q=(L=C).updateQueue;if(null===Q){var T=new Set;T.add(m),L.updateQueue=T}else Q.add(m);break y}if(!(1&L)){Bt(j,k,L),$z();break y}m=Error(z(426))}else if(Cp&&1&h.mode){var i=Rt(O);if(null!==i){!(65536&i.flags)&&(i.flags|=256),Yt(i,O,h,0,L),Vp(Ut(m,h));break y}}j=m=Ut(m,h),4!==Oz&&(Oz=2),null===Wz?Wz=[j]:Wz.push(j),j=O;do{switch(j.tag){case 3:j.flags|=65536,L&=-L,j.lanes|=L,np(j,ut(0,m,L));break y;case 1:h=m;var D=j.type,w=j.stateNode;if(!(128&j.flags||"function"!=typeof D.getDerivedStateFromError&&(null===w||"function"!=typeof w.componentDidCatch||null!==dz&&dz.has(w)))){j.flags|=65536,L&=-L,j.lanes|=L,np(j,St(j,h,L));break y}}j=j.return}while(null!==j)}Kz(p)}catch(y){L=y,Nz===p&&null!==p&&(Nz=p=p.return);continue}break}while(1)}function Gz(){var y=ej.current;return ej.current=wt,null===y?wt:y}function $z(){0!==Oz&&3!==Oz&&2!==Oz||(Oz=4),null===pz||!(268435455&mz)&&!(268435455&kz)||fz(pz,tz)}function qz(y,L){var p=Lz;Lz|=2;var N=Gz();pz===y&&tz===L||(Tz=null,Jz(y,L));do{try{Az();break}catch(L){rz(y,L)}}while(1);if(lp(),Lz=p,ej.current=N,null!==Nz)throw Error(z(261));return pz=null,tz=0,Oz}function Az(){for(;null!==Nz;)cz(Nz)}function sz(){for(;null!==Nz&&!HL();)cz(Nz)}function cz(y){var L=Dz(y.alternate,y,jz);y.memoizedProps=y.pendingProps,null===L?Kz(y):Nz=L,Zj.current=null}function Kz(y){var L=y;do{var p=L.alternate;if(y=L.return,32768&L.flags){if(null!==(p=_j(p,L)))return p.flags&=32767,void(Nz=p);if(null===y)return Oz=6,void(Nz=null);y.flags|=32768,y.subtreeFlags=0,y.deletions=null}else if(null!==(p=kj(p,L,jz)))return void(Nz=p);if(null!==(L=L.sibling))return void(Nz=L);Nz=L=y}while(null!==L);0===Oz&&(Oz=5)}function bz(y,L,p){var N=lL,t=yz.transition;try{yz.transition=null,lL=1,function(y,L,p,N){do{nz()}while(null!==Uz);if(6&Lz)throw Error(z(327));p=y.finishedWork;var t=y.finishedLanes;if(null===p)return null;if(y.finishedWork=null,y.finishedLanes=0,p===y.current)throw Error(z(177));y.callbackNode=null,y.callbackPriority=0;var j=p.lanes|p.childLanes;if(function(y,L){var p=y.pendingLanes&~L;y.pendingLanes=L,y.suspendedLanes=0,y.pingedLanes=0,y.expiredLanes&=L,y.mutableReadLanes&=L,y.entangledLanes&=L,L=y.entanglements;var N=y.eventTimes;for(y=y.expirationTimes;0<p;){var t=31-dL(p),j=1<<t;L[t]=0,N[t]=-1,y[t]=-1,p&=~j}}(y,j),y===pz&&(Nz=pz=null,tz=0),!(2064&p.subtreeFlags)&&!(2064&p.flags)||oz||(oz=!0,NO($L,(function(){return nz(),null}))),j=!!(15990&p.flags),15990&p.subtreeFlags||j){j=yz.transition,yz.transition=null;var O=lL;lL=1;var h=Lz;Lz|=4,Zj.current=null,function(y,L){for(f(y.containerInfo),Qj=L;null!==Qj;)if(L=(y=Qj).child,1028&y.subtreeFlags&&null!==L)L.return=y,Qj=L;else for(;null!==Qj;){y=Qj;try{var p=y.alternate;if(1024&y.flags)switch(y.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var N=p.memoizedProps,t=p.memoizedState,j=y.stateNode,O=j.getSnapshotBeforeUpdate(y.elementType===y.type?N:Bp(y.type,N),t);j.__reactInternalSnapshotBeforeUpdate=O}break;case 3:K&&Vy(y.stateNode.containerInfo);break;default:throw Error(z(163))}}catch(L){ez(y,y.return,L)}if(null!==(L=y.sibling)){L.return=y.return,Qj=L;break}Qj=y.return}p=Dj,Dj=!1}(y,p),Pj(p,y),a(y.containerInfo),y.current=p,Mj(p,y,t),XL(),Lz=h,lL=O,yz.transition=j}else y.current=p;if(oz&&(oz=!1,Uz=y,Iz=t),0===(j=y.pendingLanes)&&(dz=null),function(y){if(sL&&"function"==typeof sL.onCommitFiberRoot)try{sL.onCommitFiberRoot(AL,y,void 0,!(128&~y.current.flags))}catch(y){}}(p.stateNode),Ez(y,JL()),null!==L)for(N=y.onRecoverableError,p=0;p<L.length;p++)N((t=L[p]).value,{componentStack:t.stack,digest:t.digest});if(wz)throw wz=!1,y=xz,xz=null,y;!!(1&Iz)&&0!==y.tag&&nz(),1&(j=y.pendingLanes)?y===Fz?Vz++:(Vz=0,Fz=y):Vz=0,eL()}(y,L,p,N)}finally{yz.transition=t,lL=N}return null}function nz(){if(null!==Uz){var y=ML(Iz),L=yz.transition,p=lL;try{if(yz.transition=null,lL=16>y?16:y,null===Uz)var N=!1;else{if(y=Uz,Uz=null,Iz=0,6&Lz)throw Error(z(331));var t=Lz;for(Lz|=4,Qj=y.current;null!==Qj;){var j=Qj,O=j.child;if(16&Qj.flags){var h=j.deletions;if(null!==h){for(var m=0;m<h.length;m++){var k=h[m];for(Qj=k;null!==Qj;){var _=Qj;switch(_.tag){case 0:case 11:case 15:wj(8,_,j)}var W=_.child;if(null!==W)W.return=_,Qj=W;else for(;null!==Qj;){var g=(_=Qj).sibling,C=_.return;if(oj(_),_===k){Qj=null;break}if(null!==g){g.return=C,Qj=g;break}Qj=C}}}var Q=j.alternate;if(null!==Q){var T=Q.child;if(null!==T){Q.child=null;do{var i=T.sibling;T.sibling=null,T=i}while(null!==T)}}Qj=j}}if(2064&j.subtreeFlags&&null!==O)O.return=j,Qj=O;else y:for(;null!==Qj;){if(2048&(j=Qj).flags)switch(j.tag){case 0:case 11:case 15:wj(9,j,j.return)}var D=j.sibling;if(null!==D){D.return=j.return,Qj=D;break y}Qj=j.return}}var w=y.current;for(Qj=w;null!==Qj;){var x=(O=Qj).child;if(2064&O.subtreeFlags&&null!==x)x.return=O,Qj=x;else y:for(O=w;null!==Qj;){if(2048&(h=Qj).flags)try{switch(h.tag){case 0:case 11:case 15:xj(9,h)}}catch(y){ez(h,h.return,y)}if(h===O){Qj=null;break y}var d=h.sibling;if(null!==d){d.return=h.return,Qj=d;break y}Qj=h.return}}if(Lz=t,eL(),sL&&"function"==typeof sL.onPostCommitFiberRoot)try{sL.onPostCommitFiberRoot(AL,y)}catch(y){}N=!0}return N}finally{lL=p,yz.transition=L}}return!1}function vz(y,L,p){y=Kp(y,L=ut(0,L=Ut(p,L),1),1),L=Bz(),null!==y&&(EL(y,1,L),Ez(y,L))}function ez(y,L,p){if(3===y.tag)vz(y,y,p);else for(;null!==L;){if(3===L.tag){vz(L,y,p);break}if(1===L.tag){var N=L.stateNode;if("function"==typeof L.type.getDerivedStateFromError||"function"==typeof N.componentDidCatch&&(null===dz||!dz.has(N))){L=Kp(L,y=St(L,y=Ut(p,y),1),1),y=Bz(),null!==L&&(EL(L,1,y),Ez(L,y));break}}L=L.return}}function Zz(y,L,p){var N=y.pingCache;null!==N&&N.delete(L),L=Bz(),y.pingedLanes|=y.suspendedLanes&p,pz===y&&(tz&p)===p&&(4===Oz||3===Oz&&(130023424&tz)===tz&&500>JL()-Cz?Jz(y,0):_z|=p),Ez(y,L)}function yO(y,L){0===L&&(1&y.mode?(L=VL,!(130023424&(VL<<=1))&&(VL=4194304)):L=1);var p=Bz();null!==(y=$p(y,L))&&(EL(y,L,p),Ez(y,p))}function LO(y){var L=y.memoizedState,p=0;null!==L&&(p=L.retryLane),yO(y,p)}function pO(y,L){var p=0;switch(y.tag){case 13:var N=y.stateNode,t=y.memoizedState;null!==t&&(p=t.retryLane);break;case 19:N=y.stateNode;break;default:throw Error(z(314))}null!==N&&N.delete(L),yO(y,p)}function NO(y,L){return fL(y,L)}function tO(y,L,p,N){this.tag=y,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=L,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jO(y,L,p,N){return new tO(y,L,p,N)}function zO(y){return!(!(y=y.prototype)||!y.isReactComponent)}function OO(y,L){var p=y.alternate;return null===p?((p=jO(y.tag,L,y.key,y.mode)).elementType=y.elementType,p.type=y.type,p.stateNode=y.stateNode,p.alternate=y,y.alternate=p):(p.pendingProps=L,p.type=y.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=14680064&y.flags,p.childLanes=y.childLanes,p.lanes=y.lanes,p.child=y.child,p.memoizedProps=y.memoizedProps,p.memoizedState=y.memoizedState,p.updateQueue=y.updateQueue,L=y.dependencies,p.dependencies=null===L?null:{lanes:L.lanes,firstContext:L.firstContext},p.sibling=y.sibling,p.index=y.index,p.ref=y.ref,p}function hO(y,L,p,N,t,j){var O=2;if(N=y,"function"==typeof y)zO(y)&&(O=1);else if("string"==typeof y)O=5;else y:switch(y){case k:return mO(p.children,t,j,L);case _:O=8,t|=8;break;case W:return(y=jO(12,p,L,2|t)).elementType=W,y.lanes=j,y;case T:return(y=jO(13,p,L,t)).elementType=T,y.lanes=j,y;case i:return(y=jO(19,p,L,t)).elementType=i,y.lanes=j,y;case x:return kO(p,t,j,L);default:if("object"==typeof y&&null!==y)switch(y.$$typeof){case g:O=10;break y;case C:O=9;break y;case Q:O=11;break y;case D:O=14;break y;case w:O=16,N=null;break y}throw Error(z(130,null==y?y:typeof y,""))}return(L=jO(O,p,L,t)).elementType=y,L.type=N,L.lanes=j,L}function mO(y,L,p,N){return(y=jO(7,y,N,L)).lanes=p,y}function kO(y,L,p,N){return(y=jO(22,y,N,L)).elementType=x,y.lanes=p,y.stateNode={isHidden:!1},y}function _O(y,L,p){return(y=jO(6,y,null,L)).lanes=p,y}function WO(y,L,p){return(L=jO(4,null!==y.children?y.children:[],y.key,L)).lanes=p,L.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},L}function gO(y,L,p,N,t){this.tag=L,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=s,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=YL(0),this.expirationTimes=YL(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=YL(0),this.identifierPrefix=N,this.onRecoverableError=t,n&&(this.mutableSourceEagerHydrationData=null)}function CO(y,L,p,N,t,j,z,O,h){return y=new gO(y,L,p,O,h),1===L?(L=1,!0===j&&(L|=8)):L=0,j=jO(3,null,null,L),y.current=j,j.stateNode=y,j.memoizedState={element:N,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ap(j),y}function QO(y){if(!y)return kL;y:{if(V(y=y._reactInternals)!==y||1!==y.tag)throw Error(z(170));var L=y;do{switch(L.tag){case 3:L=L.stateNode.context;break y;case 1:if(QL(L.type)){L=L.stateNode.__reactInternalMemoizedMergedChildContext;break y}}L=L.return}while(null!==L);throw Error(z(171))}if(1===y.tag){var p=y.type;if(QL(p))return DL(y,p,L)}return L}function TO(y){var L=y._reactInternals;if(void 0===L){if("function"==typeof y.render)throw Error(z(188));throw y=Object.keys(y).join(","),Error(z(268,y))}return null===(y=S(L))?null:y.stateNode}function iO(y,L){if(null!==(y=y.memoizedState)&&null!==y.dehydrated){var p=y.retryLane;y.retryLane=0!==p&&p<L?p:L}}function DO(y,L){iO(y,L),(y=y.alternate)&&iO(y,L)}function wO(y){return null===(y=S(y))?null:y.stateNode}function xO(){return null}return Dz=function(y,L,p){if(null!==y)if(y.memoizedProps!==L.pendingProps||WL.current)Pt=!0;else{if(!(y.lanes&p||128&L.flags))return Pt=!1,function(y,L,p){switch(L.tag){case 3:$t(L),Ip();break;case 5:wN(L);break;case 1:QL(L.type)&&wL(L);break;case 4:iN(L,L.stateNode.containerInfo);break;case 10:Mp(0,L.type._context,L.memoizedProps.value);break;case 13:var N=L.memoizedState;if(null!==N)return null!==N.dehydrated?(mL(dN,1&dN.current),L.flags|=128,null):p&L.child.childLanes?vt(y,L,p):(mL(dN,1&dN.current),null!==(y=tj(y,L,p))?y.sibling:null);mL(dN,1&dN.current);break;case 19:if(N=!!(p&L.childLanes),128&y.flags){if(N)return pj(y,L,p);L.flags|=128}var t=L.memoizedState;if(null!==t&&(t.rendering=null,t.tail=null,t.lastEffect=null),mL(dN,dN.current),N)break;return null;case 22:case 23:return L.lanes=0,Ht(y,L,p)}return tj(y,L,p)}(y,L,p);Pt=!!(131072&y.flags)}else Pt=!1,Cp&&1048576&L.flags&&mp(L,pp,L.index);switch(L.lanes=0,L.tag){case 2:var N=L.type;Nj(y,L),y=L.pendingProps;var t=CL(L,_L.current);Hp(L,p),t=aN(null,L,N,y,t,p);var j=HN();return L.flags|=1,"object"==typeof t&&null!==t&&"function"==typeof t.render&&void 0===t.$$typeof?(L.tag=1,L.memoizedState=null,L.updateQueue=null,QL(N)?(j=!0,wL(L)):j=!1,L.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,Ap(L),t.updater=LN,L.stateNode=t,t._reactInternals=L,jN(L,N,y,p),L=Gt(null,L,N,!0,j,p)):(L.tag=0,Cp&&j&&kp(L),lt(null,L,t,p),L=L.child),L;case 16:N=L.elementType;y:{switch(Nj(y,L),y=L.pendingProps,N=(t=N._init)(N._payload),L.type=N,t=L.tag=function(y){if("function"==typeof y)return zO(y)?1:0;if(null!=y){if((y=y.$$typeof)===Q)return 11;if(y===D)return 14}return 2}(N),y=Bp(N,y),t){case 0:L=Jt(null,L,N,y,p);break y;case 1:L=rt(null,L,N,y,p);break y;case 11:L=Mt(null,L,N,y,p);break y;case 14:L=ft(null,L,N,Bp(N.type,y),p);break y}throw Error(z(306,N,""))}return L;case 0:return N=L.type,t=L.pendingProps,Jt(y,L,N,t=L.elementType===N?t:Bp(N,t),p);case 1:return N=L.type,t=L.pendingProps,rt(y,L,N,t=L.elementType===N?t:Bp(N,t),p);case 3:y:{if($t(L),null===y)throw Error(z(387));N=L.pendingProps,t=(j=L.memoizedState).element,sp(y,L),vp(L,N,null,p);var O=L.memoizedState;if(N=O.element,n&&j.isDehydrated){if(j={element:N,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},L.updateQueue.baseState=j,L.memoizedState=j,256&L.flags){L=qt(y,L,N,p,t=Ut(Error(z(423)),L));break y}if(N!==t){L=qt(y,L,N,p,t=Ut(Error(z(424)),L));break y}for(n&&(gp=Gy(L.stateNode.containerInfo),Wp=L,Cp=!0,Tp=null,Qp=!1),p=_N(L,null,N,p),L.child=p;p;)p.flags=-3&p.flags|4096,p=p.sibling}else{if(Ip(),N===t){L=tj(y,L,p);break y}lt(y,L,N,p)}L=L.child}return L;case 5:return wN(L),null===y&&xp(L),N=L.type,t=L.pendingProps,j=null!==y?y.memoizedProps:null,O=t.children,G(N,t)?O=null:null!==j&&G(N,j)&&(L.flags|=32),Xt(y,L),lt(y,L,O,p),L.child;case 6:return null===y&&xp(L),null;case 13:return vt(y,L,p);case 4:return iN(L,L.stateNode.containerInfo),N=L.pendingProps,null===y?L.child=kN(L,null,N,p):lt(y,L,N,p),L.child;case 11:return N=L.type,t=L.pendingProps,Mt(y,L,N,t=L.elementType===N?t:Bp(N,t),p);case 7:return lt(y,L,L.pendingProps,p),L.child;case 8:case 12:return lt(y,L,L.pendingProps.children,p),L.child;case 10:y:{if(N=L.type._context,t=L.pendingProps,j=L.memoizedProps,Mp(0,N,O=t.value),null!==j)if(cL(j.value,O)){if(j.children===t.children&&!WL.current){L=tj(y,L,p);break y}}else for(null!==(j=L.child)&&(j.return=L);null!==j;){var h=j.dependencies;if(null!==h){O=j.child;for(var m=h.firstContext;null!==m;){if(m.context===N){if(1===j.tag){(m=cp(-1,p&-p)).tag=2;var k=j.updateQueue;if(null!==k){var _=(k=k.shared).pending;null===_?m.next=m:(m.next=_.next,_.next=m),k.pending=m}}j.lanes|=p,null!==(m=j.alternate)&&(m.lanes|=p),ap(j.return,p,L),h.lanes|=p;break}m=m.next}}else if(10===j.tag)O=j.type===L.type?null:j.child;else if(18===j.tag){if(null===(O=j.return))throw Error(z(341));O.lanes|=p,null!==(h=O.alternate)&&(h.lanes|=p),ap(O,p,L),O=j.sibling}else O=j.child;if(null!==O)O.return=j;else for(O=j;null!==O;){if(O===L){O=null;break}if(null!==(j=O.sibling)){j.return=O.return,O=j;break}O=O.return}j=O}lt(y,L,t.children,p),L=L.child}return L;case 9:return t=L.type,N=L.pendingProps.children,Hp(L,p),N=N(t=Xp(t)),L.flags|=1,lt(y,L,N,p),L.child;case 14:return t=Bp(N=L.type,L.pendingProps),ft(y,L,N,t=Bp(N.type,t),p);case 15:return at(y,L,L.type,L.pendingProps,p);case 17:return N=L.type,t=L.pendingProps,t=L.elementType===N?t:Bp(N,t),Nj(y,L),L.tag=1,QL(N)?(y=!0,wL(L)):y=!1,Hp(L,p),NN(L,N,t),jN(L,N,t,p),Gt(null,L,N,!0,y,p);case 19:return pj(y,L,p);case 22:return Ht(y,L,p)}throw Error(z(156,L.tag))},L.attemptContinuousHydration=function(y){if(13===y.tag){var L=$p(y,134217728);null!==L&&Yz(L,y,134217728,Bz()),DO(y,134217728)}},L.attemptDiscreteHydration=function(y){if(13===y.tag){var L=$p(y,1);null!==L&&Yz(L,y,1,Bz()),DO(y,1)}},L.attemptHydrationAtCurrentPriority=function(y){if(13===y.tag){var L=Rz(y),p=$p(y,L);null!==p&&Yz(p,y,L,Bz()),DO(y,L)}},L.attemptSynchronousHydration=function(y){switch(y.tag){case 3:var L=y.stateNode;if(L.current.memoizedState.isDehydrated){var p=FL(L.pendingLanes);0!==p&&(PL(L,1|p),Ez(L,JL()),!(6&Lz)&&(iz(),eL()))}break;case 13:Hz((function(){var L=$p(y,1);if(null!==L){var p=Bz();Yz(L,y,1,p)}})),DO(y,1)}},L.batchedUpdates=function(y,L){var p=Lz;Lz|=1;try{return y(L)}finally{0===(Lz=p)&&(iz(),bL&&eL())}},L.createComponentSelector=function(y){return{$$typeof:Jj,value:y}},L.createContainer=function(y,L,p,N,t,j,z){return CO(y,L,!1,null,0,N,0,j,z)},L.createHasPseudoClassSelector=function(y){return{$$typeof:rj,value:y}},L.createHydrationContainer=function(y,L,p,N,t,j,z,O,h){return(y=CO(p,N,!0,y,0,j,0,O,h)).context=QO(null),p=y.current,(j=cp(N=Bz(),t=Rz(p))).callback=null!=L?L:null,Kp(p,j,t),y.current.lanes=t,EL(y,t,N),Ez(y,N),y},L.createPortal=function(y,L,p){var N=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:m,key:null==N?null:""+N,children:y,containerInfo:L,implementation:p}},L.createRoleSelector=function(y){return{$$typeof:Gj,value:y}},L.createTestNameSelector=function(y){return{$$typeof:$j,value:y}},L.createTextSelector=function(y){return{$$typeof:qj,value:y}},L.deferredUpdates=function(y){var L=lL,p=yz.transition;try{return yz.transition=null,lL=16,y()}finally{lL=L,yz.transition=p}},L.discreteUpdates=function(y,L,p,N,t){var j=lL,z=yz.transition;try{return yz.transition=null,lL=1,y(L,p,N,t)}finally{lL=j,yz.transition=z,0===Lz&&iz()}},L.findAllNodes=nj,L.findBoundingRects=function(y,L){if(!Ny)throw Error(z(363));L=nj(y,L),y=[];for(var p=0;p<L.length;p++)y.push(jy(L[p]));for(L=y.length-1;0<L;L--)for(var N=(p=y[L]).x,t=N+p.width,j=p.y,O=j+p.height,h=L-1;0<=h;h--)if(L!==h){var m=y[h],k=m.x,_=k+m.width,W=m.y,g=W+m.height;if(N>=k&&j>=W&&t<=_&&O<=g){y.splice(L,1);break}if(!(N!==k||p.width!==m.width||g<j||W>O)){W>j&&(m.height+=W-j,m.y=j),g<O&&(m.height=O-W),y.splice(L,1);break}if(!(j!==W||p.height!==m.height||_<N||k>t)){k>N&&(m.width+=k-N,m.x=N),_<t&&(m.width=t-k),y.splice(L,1);break}}return y},L.findHostInstance=TO,L.findHostInstanceWithNoPortals=function(y){return null===(y=null!==(y=u(y))?R(y):null)?null:y.stateNode},L.findHostInstanceWithWarning=function(y){return TO(y)},L.flushControlled=function(y){var L=Lz;Lz|=1;var p=yz.transition,N=lL;try{yz.transition=null,lL=1,y()}finally{lL=N,yz.transition=p,0===(Lz=L)&&(iz(),eL())}},L.flushPassiveEffects=nz,L.flushSync=Hz,L.focusWithin=function(y,L){if(!Ny)throw Error(z(363));for(L=bj(y=sj(y),L),L=Array.from(L),y=0;y<L.length;){var p=L[y++];if(!Oy(p)){if(5===p.tag&&my(p.stateNode))return!0;for(p=p.child;null!==p;)L.push(p),p=p.sibling}}return!1},L.getCurrentUpdatePriority=function(){return lL},L.getFindAllNodesFailureDescription=function(y,L){if(!Ny)throw Error(z(363));var p=0,N=[];y=[sj(y),0];for(var t=0;t<y.length;){var j=y[t++],O=y[t++],h=L[O];if((5!==j.tag||!Oy(j))&&(cj(j,h)&&(N.push(Kj(h)),++O>p&&(p=O)),O<L.length))for(j=j.child;null!==j;)y.push(j,O),j=j.sibling}if(p<L.length){for(y=[];p<L.length;p++)y.push(Kj(L[p]));return"findAllNodes was able to match part of the selector:\n  "+N.join(" > ")+"\n\nNo matching component was found for:\n  "+y.join(" > ")}return null},L.getPublicRootInstance=function(y){return(y=y.current).child?5===y.child.tag?P(y.child.stateNode):y.child.stateNode:null},L.injectIntoDevTools=function(y){if(y={bundleType:y.bundleType,version:y.version,rendererPackageName:y.rendererPackageName,rendererConfig:y.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:wO,findFiberByHostInstance:y.findFiberByHostInstance||xO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)y=!1;else{var L=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(L.isDisabled||!L.supportsFiber)y=!0;else{try{AL=L.inject(y),sL=L}catch(y){}y=!!L.checkDCE}}return y},L.isAlreadyRendering=function(){return!1},L.observeVisibleRects=function(y,L,p,N){if(!Ny)throw Error(z(363));y=nj(y,L);var t=ky(y,p,N).disconnect;return{disconnect:function(){t()}}},L.registerMutableSourceForHydration=function(y,L){var p=L._getVersion;p=p(L._source),null==y.mutableSourceEagerHydrationData?y.mutableSourceEagerHydrationData=[L,p]:y.mutableSourceEagerHydrationData.push(L,p)},L.runWithPriority=function(y,L){var p=lL;try{return lL=y,L()}finally{lL=p}},L.shouldError=function(){return null},L.shouldSuspend=function(){return!1},L.updateContainer=function(y,L,p,N){var t=L.current,j=Bz(),z=Rz(t);return p=QO(p),null===L.context?L.context=p:L.pendingContext=p,(L=cp(j,z)).payload={element:y},null!==(N=void 0===N?null:N)&&(L.callback=N),null!==(y=Kp(t,L,z))&&(Yz(y,t,z,j),bp(y,t,z)),z},L}},933506:(y,L,p)=>{1&&(y.exports=p(625021))},60607:(y,L,p)=>{1&&(y.exports=p(32501))},504825:(y,L,p)=>{var N=p(578278);Object.defineProperty(L,"__esModule",{value:!0}),L["default"]=void 0;var t=N(p(377810)),j=(N(p(746365)),function(y){y.index;var L=y.children;t.default.Children.count(L)});L["default"]=j},454767:(y,L,p)=>{var N=p(578278);Object.defineProperty(L,"__esModule",{value:!0}),L["default"]=function(y){var L,p=y.children,N=y.startIndex,z=y.startX,O=y.pageX,h=y.viewLength,m=y.resistance,k=t.default.Children.count(p)-1,_=N+(z-O)/h;return m?_<0?_=Math.exp(_*j.default.RESISTANCE_COEF)-1:_>k&&(_=k+1-Math.exp((k-_)*j.default.RESISTANCE_COEF)):_<0?L=((_=0)-N)*h+O:_>k&&(L=((_=k)-N)*h+O),{index:_,startX:L}};var t=N(p(377810)),j=N(p(262164))},262164:(y,L)=>{Object.defineProperty(L,"__esModule",{value:!0}),L["default"]=void 0,L["default"]={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3}},813659:(y,L,p)=>{var N=p(578278);Object.defineProperty(L,"__esModule",{value:!0}),L["default"]=void 0;var t=N(p(377810));L["default"]=function(y,L){var p=!1,N=function(y){return y?y.key:"empty"};if(y.children.length&&L.children.length){var j=t.default.Children.map(y.children,N)[y.index];null!=j&&j===t.default.Children.map(L.children,N)[L.index]&&(p=!0)}return p}},25706:(y,L,p)=>{var N=p(578278);Object.defineProperty(L,"__esModule",{value:!0}),Object.defineProperty(L,"checkIndexBounds",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(L,"computeIndex",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(L,"constant",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(L,"getDisplaySameSlide",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(L,"mod",{enumerable:!0,get:function(){return h.default}});var t=N(p(504825)),j=N(p(454767)),z=N(p(262164)),O=N(p(813659)),h=N(p(981794))},981794:(y,L)=>{Object.defineProperty(L,"__esModule",{value:!0}),L["default"]=void 0;L["default"]=function(y,L){var p=y%L;return p<0?p+L:p}},578278:y=>{y.exports=function(y){return y&&y.__esModule?y:{default:y}}},717284:(y,L,p)=>{var N=p(737202);Object.defineProperty(L,"__esModule",{value:!0}),L.getDomTreeShapes=I,L.findNativeHandler=F,L["default"]=void 0;var t=N(p(609562)),j=N(p(288215)),z=N(p(678967)),O=N(p(704643)),h=N(p(22132)),m=N(p(103088)),k=N(p(7511)),_=N(p(377810)),W=N(p(575826)),g=(N(p(746365)),N(p(427728))),C=N(p(609622)),Q=N(p(65402)),T=p(25706);function i(y,L,p,N){return(0,C.default)(y,L,p,N),{remove:function(){(0,Q.default)(y,L,p,N)}}}var D={direction:"ltr",display:"flex",willChange:"transform"},w={width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"},x={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(y){return"translate(".concat(-y,"%, 0)")},"x-reverse":function(y){return"translate(".concat(y,"%, 0)")},y:function(y){return"translate(0, ".concat(-y,"%)")},"y-reverse":function(y){return"translate(0, ".concat(y,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function d(y,L){var p=L.duration,N=L.easeFunction,t=L.delay;return"".concat(y," ").concat(p," ").concat(N," ").concat(t)}function o(y,L){var p=x.rotationMatrix[L];return{pageX:p.x[0]*y.pageX+p.x[1]*y.pageY,pageY:p.y[0]*y.pageX+p.y[1]*y.pageY}}function U(y){return y.touches=[{pageX:y.pageX,pageY:y.pageY}],y}function I(y,L){for(var p=[];y&&y!==L&&!y.hasAttribute("data-swipeable");){var N=window.getComputedStyle(y);"absolute"===N.getPropertyValue("position")||"hidden"===N.getPropertyValue("overflow-x")?p=[]:(y.clientWidth>0&&y.scrollWidth>y.clientWidth||y.clientHeight>0&&y.scrollHeight>y.clientHeight)&&p.push({element:y,scrollWidth:y.scrollWidth,scrollHeight:y.scrollHeight,clientWidth:y.clientWidth,clientHeight:y.clientHeight,scrollLeft:y.scrollLeft,scrollTop:y.scrollTop}),y=y.parentNode}return p}var V=null;function F(y){var L=y.domTreeShapes,p=y.pageX,N=y.startX,t=y.axis;return L.some((function(y){var L=p>=N;"x"!==t&&"y"!==t||(L=!L);var j=y[x.scrollPosition[t]],z=j>0,O=j+y[x.clientLength[t]]<y[x.scrollLength[t]];return!!(L&&O||!L&&z)&&(V=y.element,!0)}))}var u=function(y){function L(y){var p;return(0,z.default)(this,L),(p=(0,h.default)(this,(0,m.default)(L).call(this,y))).rootNode=null,p.containerNode=null,p.ignoreNextScrollEvents=!1,p.viewLength=0,p.startX=0,p.lastX=0,p.vx=0,p.startY=0,p.isSwiping=void 0,p.started=!1,p.startIndex=0,p.transitionListener=null,p.touchMoveListener=null,p.activeSlide=null,p.indexCurrent=null,p.firstRenderTimeout=null,p.setRootNode=function(y){p.rootNode=y},p.setContainerNode=function(y){p.containerNode=y},p.setActiveSlide=function(y){p.activeSlide=y,p.updateHeight()},p.handleSwipeStart=function(y){var L=p.props.axis,N=o(y.touches[0],L);p.viewLength=p.rootNode.getBoundingClientRect()[x.length[L]],p.startX=N.pageX,p.lastX=N.pageX,p.vx=0,p.startY=N.pageY,p.isSwiping=void 0,p.started=!0;var t=window.getComputedStyle(p.containerNode),j=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("transform");if(j&&"none"!==j){var z=j.split("(")[1].split(")")[0].split(","),O=window.getComputedStyle(p.rootNode),h=o({pageX:parseInt(z[4],10),pageY:parseInt(z[5],10)},L);p.startIndex=-h.pageX/(p.viewLength-parseInt(O.paddingLeft,10)-parseInt(O.paddingRight,10))||0}},p.handleSwipeMove=function(y){if(p.started){if(null===V||V===p.rootNode){var L=p.props,N=L.axis,t=L.children,j=L.ignoreNativeScroll,z=L.onSwitching,O=L.resistance,h=o(y.touches[0],N);if(void 0===p.isSwiping){var m=Math.abs(h.pageX-p.startX),k=Math.abs(h.pageY-p.startY),W=m>k&&m>T.constant.UNCERTAINTY_THRESHOLD;if(!O&&("y"===N||"y-reverse"===N)&&(0===p.indexCurrent&&p.startX<h.pageX||p.indexCurrent===_.default.Children.count(p.props.children)-1&&p.startX>h.pageX))return void(p.isSwiping=!1);if(m>k&&y.preventDefault(),!0===W||k>T.constant.UNCERTAINTY_THRESHOLD)return p.isSwiping=W,void(p.startX=h.pageX)}if(!0===p.isSwiping){y.preventDefault(),p.vx=.5*p.vx+.5*(h.pageX-p.lastX),p.lastX=h.pageX;var g=(0,T.computeIndex)({children:t,resistance:O,pageX:h.pageX,startIndex:p.startIndex,startX:p.startX,viewLength:p.viewLength}),C=g.index,Q=g.startX;if(null===V&&!j&&F({domTreeShapes:I(y.target,p.rootNode),startX:p.startX,pageX:h.pageX,axis:N}))return;Q?p.startX=Q:null===V&&(V=p.rootNode),p.setIndexCurrent(C);var i=function(){z&&z(C,"move")};!p.state.displaySameSlide&&p.state.isDragging||p.setState({displaySameSlide:!1,isDragging:!0},i),i()}}}else p.handleTouchStart(y)},p.handleSwipeEnd=function(){if(V=null,p.started&&(p.started=!1,!0===p.isSwiping)){var y,L=p.state.indexLatest,N=p.indexCurrent,t=L-N;y=Math.abs(p.vx)>p.props.threshold?p.vx>0?Math.floor(N):Math.ceil(N):Math.abs(t)>p.props.hysteresis?t>0?Math.floor(N):Math.ceil(N):L;var j=_.default.Children.count(p.props.children)-1;y<0?y=0:y>j&&(y=j),p.setIndexCurrent(y),p.setState({indexLatest:y,isDragging:!1},(function(){p.props.onSwitching&&p.props.onSwitching(y,"end"),p.props.onChangeIndex&&y!==L&&p.props.onChangeIndex(y,L,{reason:"swipe"}),N===L&&p.handleTransitionEnd()}))}},p.handleTouchStart=function(y){p.props.onTouchStart&&p.props.onTouchStart(y),p.handleSwipeStart(y)},p.handleTouchEnd=function(y){p.props.onTouchEnd&&p.props.onTouchEnd(y),p.handleSwipeEnd(y)},p.handleMouseDown=function(y){p.props.onMouseDown&&p.props.onMouseDown(y),y.persist(),p.handleSwipeStart(U(y))},p.handleMouseUp=function(y){p.props.onMouseUp&&p.props.onMouseUp(y),p.handleSwipeEnd(U(y))},p.handleMouseLeave=function(y){p.props.onMouseLeave&&p.props.onMouseLeave(y),p.started&&p.handleSwipeEnd(U(y))},p.handleMouseMove=function(y){p.props.onMouseMove&&p.props.onMouseMove(y),p.started&&p.handleSwipeMove(U(y))},p.handleScroll=function(y){if(p.props.onScroll&&p.props.onScroll(y),y.target===p.rootNode)if(p.ignoreNextScrollEvents)p.ignoreNextScrollEvents=!1;else{var L=p.state.indexLatest,N=Math.ceil(y.target.scrollLeft/y.target.clientWidth)+L;p.ignoreNextScrollEvents=!0,y.target.scrollLeft=0,p.props.onChangeIndex&&N!==L&&p.props.onChangeIndex(N,L,{reason:"focus"})}},p.updateHeight=function(){if(null!==p.activeSlide){var y=p.activeSlide.children[0];void 0!==y&&void 0!==y.offsetHeight&&p.state.heightLatest!==y.offsetHeight&&p.setState({heightLatest:y.offsetHeight})}},p.state={indexLatest:y.index,isDragging:!1,renderOnlyActive:!y.disableLazyLoading,heightLatest:0,displaySameSlide:!0},p.setIndexCurrent(y.index),p}return(0,k.default)(L,y),(0,O.default)(L,[{key:"getChildContext",value:function(){var y=this;return{swipeableViews:{slideUpdateHeight:function(){y.updateHeight()}}}}},{key:"componentDidMount",value:function(){var y=this;this.transitionListener=i(this.containerNode,g.default.end,(function(L){L.target===y.containerNode&&y.handleTransitionEnd()})),this.touchMoveListener=i(this.rootNode,"touchmove",(function(L){y.props.disabled||y.handleSwipeMove(L)}),{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout((function(){y.setState({renderOnlyActive:!1})}),0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"componentWillReceiveProps",value:function(y){var L=y.index;"number"==typeof L&&L!==this.props.index&&(this.setIndexCurrent(L),this.setState({displaySameSlide:(0,T.getDisplaySameSlide)(this.props,y),indexLatest:L}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"setIndexCurrent",value:function(y){if(this.props.animateTransitions||this.indexCurrent===y||this.handleTransitionEnd(),this.indexCurrent=y,this.containerNode){var L=this.props.axis,p=x.transform[L](100*y);this.containerNode.style.WebkitTransform=p,this.containerNode.style.transform=p}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var y,L,p=this,N=this.props,z=(N.action,N.animateHeight),O=N.animateTransitions,h=N.axis,m=N.children,k=N.containerStyle,W=N.disabled,g=(N.disableLazyLoading,N.enableMouseEvents),C=(N.hysteresis,N.ignoreNativeScroll,N.index,N.onChangeIndex,N.onSwitching,N.onTransitionEnd,N.resistance,N.slideStyle),Q=N.slideClassName,T=N.springConfig,i=N.style,o=(N.threshold,(0,j.default)(N,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"])),U=this.state,I=U.displaySameSlide,V=U.heightLatest,F=U.indexLatest,u=U.isDragging,S=U.renderOnlyActive,B=W?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},R=!W&&g?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},Y=(0,t.default)({},w,C);if(u||!O||I)y="all 0s ease 0s",L="all 0s ease 0s";else if(y=d("transform",T),L=d("-webkit-transform",T),0!==V){var E=", ".concat(d("height",T));y+=E,L+=E}var P={height:null,WebkitFlexDirection:x.flexDirection[h],flexDirection:x.flexDirection[h],WebkitTransition:L,transition:y};if(!S){var l=x.transform[h](100*this.indexCurrent);P.WebkitTransform=l,P.transform=l}return z&&(P.height=V),_.default.createElement("div",(0,t.default)({ref:this.setRootNode,style:(0,t.default)({},x.root[h],i)},o,B,R,{onScroll:this.handleScroll}),_.default.createElement("div",{ref:this.setContainerNode,style:(0,t.default)({},P,D,k),className:"react-swipeable-view-container"},_.default.Children.map(m,(function(y,L){if(S&&L!==F)return null;var N,t=!0;return L===F&&(t=!1,z&&(N=p.setActiveSlide,Y.overflowY="hidden")),_.default.createElement("div",{ref:N,style:Y,className:Q,"aria-hidden":t,"data-swipeable":"true"},y)}))))}}]),L}(_.default.Component);u.displayName="ReactSwipableView",u.propTypes=0?0:{},u.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1},u.childContextTypes={swipeableViews:W.default.shape({slideUpdateHeight:W.default.func})};var S=u;L["default"]=S},866302:(y,L,p)=>{var N=p(737202);L.A=void 0;var t=N(p(717284)).default;L.A=t},915755:y=>{y.exports=function(y){if(void 0===y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}},678967:y=>{y.exports=function(y,L){if(!(y instanceof L))throw new TypeError("Cannot call a class as a function")}},704643:y=>{function L(y,L){for(var p=0;p<L.length;p++){var N=L[p];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}y.exports=function(y,p,N){return p&&L(y.prototype,p),N&&L(y,N),y}},609562:y=>{function L(){return y.exports=L=Object.assign||function(y){for(var L=1;L<arguments.length;L++){var p=arguments[L];for(var N in p)Object.prototype.hasOwnProperty.call(p,N)&&(y[N]=p[N])}return y},L.apply(this,arguments)}y.exports=L},103088:y=>{function L(p){return y.exports=L=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},L(p)}y.exports=L},7511:(y,L,p)=>{var N=p(308964);y.exports=function(y,L){if("function"!=typeof L&&null!==L)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(L&&L.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),L&&N(y,L)}},737202:y=>{y.exports=function(y){return y&&y.__esModule?y:{default:y}}},288215:(y,L,p)=>{var N=p(326973);y.exports=function(y,L){if(null==y)return{};var p,t,j=N(y,L);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(y);for(t=0;t<z.length;t++)p=z[t],L.indexOf(p)>=0||Object.prototype.propertyIsEnumerable.call(y,p)&&(j[p]=y[p])}return j}},326973:y=>{y.exports=function(y,L){if(null==y)return{};var p,N,t={},j=Object.keys(y);for(N=0;N<j.length;N++)p=j[N],L.indexOf(p)>=0||(t[p]=y[p]);return t}},22132:(y,L,p)=>{var N=p(544634),t=p(915755);y.exports=function(y,L){return!L||"object"!==N(L)&&"function"!=typeof L?t(y):L}},308964:y=>{function L(p,N){return y.exports=L=Object.setPrototypeOf||function(y,L){return y.__proto__=L,y},L(p,N)}y.exports=L},544634:y=>{function L(y){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},L(y)}function p(N){return"function"==typeof Symbol&&"symbol"===L(Symbol.iterator)?y.exports=p=function(y){return L(y)}:y.exports=p=function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":L(y)},p(N)}y.exports=p},746365:y=>{var L=function(){};if("production"!="production"){var p=function(y,L){var p=arguments.length;L=new Array(p>1?p-1:0);for(var N=1;N<p;N++)L[N-1]=arguments[N];var t=0,j="Warning: "+y.replace(/%s/g,(function(){return L[t++]}));"undefined"!=typeof console&&console.error(j);try{throw new Error(j)}catch(y){}};L=function(y,L,N){var t=arguments.length;N=new Array(t>2?t-2:0);for(var j=2;j<t;j++)N[j-2]=arguments[j];if(void 0===L)throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument");y||p.apply(null,[L].concat(N))}}y.exports=L},383213:(y,L,p)=>{p.d(L,{q:()=>_});var N=p(64922),t=p(525620),j=p(377810),z=p(2782),O=p(946574);function h(y){return O.f(y)&&!y.autoPlay.isRunning}var m=p(331094);const k=y=>{const{visible:L,disabled:p,isDesktop:t}=y,O=j.useCallback((y=>{y.stopPropagation()}),[]);return L?N.jsx("div",{onClick:O,children:N.jsx(z.L,{size:t?"M":"S",disabled:p,type:"customizable"})}):null},_=t.PA((()=>{const y=m.Pj(),L={visible:y.settings.autoplayEnabled,isDesktop:y.device.isDesktop,disabled:h(y)};return N.jsx(k,{...L})}))},252571:(y,L,p)=>{p.d(L,{o:()=>uy});var N,t=p(64922),j=p(346160),z=p(699695),O=p(525707),h=p(525620),m=p(377810);(function(y){y[y["Horizontal"]=1]="Horizontal",y[y["Vertical"]=2]="Vertical"})(N||(N={}));var k=p(4001),_=p(277082);const W="payoutMultiplierTable--9a03d",g="horizontal--7a945",C="record--3081e",Q="payoutMultiplierWrapper--29067",T="payoutMultiplier--933f6",i="payoutReturn--a9d6b",D="icon--7612d",w=y=>{const{symbol:L,payout:p,alignment:j,textures:O}=y,h=[];for(let y=p.length;y>k.vy-p.length;y--){const L=p[y-1];0!==L&&h.push(t.jsxs("div",{className:Q,children:[t.jsx("span",{className:T,children:`x${y}`}),t.jsx("span",{className:i,children:` = ${L}x`})]},y))}return t.jsxs("div",{className:z.A(C,{[g]:j===N.Horizontal}),children:[t.jsx(_.CrazyPachinkoSymbolImage,{symbol:L,textures:O,className:D}),t.jsx("div",{className:W,children:h})]})};var x=p(331094),d=p(16260);const o="symbolPayouts--a2ebf",U="label--94ec3",I="mobile--42bcd",V="payoutTableWrapper--cac2e",F="payoutTableRow--db94b",u="scatter--6705b",S="payoutScatterLabel--e8420",B="payoutScatterMultiplier--2ed7f",R="payoutScatterText--4f34b",Y="scatterIcon--19c4f",E=["W","B","C","A","K","Q","J"],P=y=>{const{isMobile:L,payoutTable:p}=y,h=m.useMemo((()=>_.loadCrazyPachinkoIdleTextures()),[]);if(!p)return null;const k=Object.entries(p),W=O.A(k,(([y])=>E.findIndex((L=>L===y)))),g=W.slice(0,2).map((y=>t.jsx(w,{symbol:y[0],payout:y[1],textures:h,alignment:N.Horizontal},y[0]))),C=W.slice(2,4).map((y=>t.jsx(w,{symbol:y[0],payout:y[1],textures:h,alignment:N.Horizontal},y[0]))),Q=W.slice(4,W.length).map((y=>t.jsx(w,{symbol:y[0],payout:y[1],textures:h,alignment:N.Horizontal},y[0])));return t.jsxs("div",{className:o,children:[t.jsx("div",{className:z.A(U,{[I]:L}),children:j.Tl(d.X.SymbolPayoutsTitle)}),t.jsxs("div",{className:z.A(V,{[I]:L}),children:[t.jsx("div",{className:F,children:g}),t.jsx("div",{className:F,children:C}),t.jsx("div",{className:F,children:Q}),t.jsx("div",{className:F,children:t.jsxs("div",{className:u,children:[t.jsx(_.CrazyPachinkoSymbolImage,{symbol:"S",textures:h,className:Y}),t.jsxs("div",{className:S,children:[t.jsx("span",{className:B,children:"x3"}),t.jsx("span",{className:R,children:` = ${j.Tl(d.X.SymbolPayoutsScatters)}`})]})]})})]})]})},l=h.PA((y=>{const L={...y,payoutTable:x.Pj().payoutTable.payouts};return t.jsx(P,{...L})})),M="footerContentWrapper--24329",f="mobile--5a6b8",a=m.memo((({children:y,isMobile:L})=>t.jsx("tr",{"data-role":"bet-limits-footer",children:t.jsx("td",{colSpan:3,className:z.A(M,{[f]:L}),children:y})})));a.displayName="BetLimitsAndPayoutsFooter";const H=({payoutLimit:y,isMobile:L})=>t.jsxs(t.Fragment,{children:[t.jsxs(a,{isMobile:L,children:[t.jsx("div",{children:`*${j.Tl(d.X.LimitBasedOnBaseBet)}`}),t.jsx("div",{children:`${j.Tl(d.X.MaxPayout)} ${y}`})]}),t.jsx("tr",{children:t.jsx("td",{colSpan:3,children:t.jsx(l,{isMobile:L})})})]});var X=p(409860),J=p(738849);const r={[J.Sr.Qualification]:d.X.Qualification,[J.Sr.NormalSpin]:d.X.NormalSpin,[J.Sr.XXXtremeSpin]:d.X.XXXtremeSpin,[J.Sr.FeatureBuy]:d.X.FeatureBuy,[J.Sr.TopUp]:d.X.TopUp},G={[J.Sr.Qualification]:!1,[J.Sr.NormalSpin]:!0,[J.Sr.XXXtremeSpin]:!0,[J.Sr.FeatureBuy]:!0,[J.Sr.TopUp]:!1},$=Object.values(J.Sr),q=X.A($,J.Sr.XXXtremeSpin,J.Sr.FeatureBuy),A=X.A($,J.Sr.FeatureBuy);var s=p(837557),c=p(653677),K=p(587698),b=p(671860),n=p(509407),v=p(808432),e=p(525019);const Z="red--3ffaa",yy="black--f01d3";function Ly(y,L,p,N){return t.jsx("use",{xlinkHref:y,x:L,y:p,height:N})}e.z();const py=m.memo((({rank:y,suit:L})=>{let p;switch(y){case"2":case"6":p="36";break;case"3":case"9":p="35";break;case"4":p="34";break;case"5":case"J":p="38";break;case"7":p="40";break;case"8":p="39";break;case"10":p="0";break;case"Q":case"A":p="19";break;default:p="17"}const N=[v.KY.D,v.KY.H].includes(L)?Z:yy,j=Ly(`#rank-${y}`,p,"10","86"),z=Ly(`#suit-${v.KY[L]}`,"100","0","106");return t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 184 106",preserveAspectRatio:"xMidYMid meet",className:N,children:[j,z]})}));py.displayName="RankAndSuit";const Ny="indented--d520e",ty="doubleIndented--68144",jy="bold--37d87",zy="bet--7d654",Oy="betLimits--3cf27",hy="payout--46826",my="ranksAndSuits--7b0b6",ky="mobileRanksAndSuits--7a895",_y="cardsDelimiter--55498",Wy="disabled--fc044",gy="topPadding--64914",Cy="rtl--1eee5",Qy="mobile--a40d9",Ty="cellContent--e7e92",iy="sectionHeader--a6eff",Dy="hasContent--7f13d",wy="middleDataCell--a2446",xy="fixedColumnWidths--a60d9",dy="hasBottomBorder--87313",oy="hasIncreasedNotch--5fff3",Uy="hasNotch--42e7b",Iy="legacyMenuMode--041c5",Vy=m.memo((y=>{const{betKey:L,betTitle:p,min:N,max:O,payout:h,isIndented:k=!1,areLimitsInlined:_,cards:W,middleComponent:g,hasBottomBorder:C=!0,isMobile:Q=!1,currencySymbol:T="",fixedColumnWidths:i=!0,showPayouts:D=!0,isSectionHeader:w=!1,hasSectionPadding:x=!1,disabled:d=!1,legacyMenuMode:o}=y,U=k&&x,I=z.A({[Ny]:!U&&(k||x),[ty]:U}),V=void 0===p&&L?t.jsx(c.q,{className:I,"data-role":"title",children:L}):t.jsx("span",{"data-role":"title",className:I,children:null!=p?p:String.fromCharCode(8203)}),F=m.useMemo((()=>{if(N&&O)return n.Q({lowerLimit:N,upperLimit:O,currencySymbol:T});const y=null!=N?N:O;return y?K.ej(y,{currencySymbol:T}):void 0}),[N,O,T]),u=m.useMemo((()=>null==W?void 0:W.map(((y,L)=>function(y,L){const p=y.slice(0,-1);let N=null;switch(y.slice(-1)){case"C":N=v.KY.C;break;case"D":N=v.KY.D;break;case"H":N=v.KY.H;break;case"S":N=v.KY.S}return"|"===y?t.jsx("span",{className:_y,children:y}):p&&null!==N?t.jsx(py,{rank:p,suit:N},L):null}(y,L)))),[W]),S=!!(p||L||F||u||g||h);return t.jsxs("tr",{"data-role":`bet-limits_${L}`,className:z.A({[Qy]:Q,[Wy]:d,[Dy]:S,[dy]:C,[xy]:i,[Uy]:s.DS.HAS_NOTCH,[oy]:s.DS.IS_IPHONE14_PRO}),children:[t.jsx("td",{className:z.A(zy,{[jy]:!k&&!Q,[gy]:_,[iy]:w}),colSpan:_?2:1,children:t.jsxs("div",{className:Ty,children:[V,_&&!!F&&t.jsxs("span",{className:Oy,"data-min":N,"data-max":O,"data-role":"limits",children:[b.be,F]})]})}),!_&&t.jsx("td",{className:wy,children:t.jsx("div",{className:Ty,children:u?t.jsxs("div",{"data-role":"ranks-and-suits",className:z.A(my,{[ky]:Q}),children:[...u]}):g||!_&&t.jsx("div",{"data-role":"min-max",className:Oy,"data-min":N,"data-max":O,children:F})})}),D&&t.jsx("td",{className:z.A(hy,{[gy]:_}),children:t.jsx("div",{className:z.A(Ty,{[Iy]:o,[Cy]:j.sU()}),"data-role":"payout",children:h})})]})}));Vy.displayName="BetLimitsAndPayoutsRow";const Fy="bet-limits-test-id",uy=y=>{const{betLimitsForGroup:L,payoutLimit:p,currencySymbol:N,isMobile:z,xxxtremeSpinsEnabled:O,featureBuyEnabled:h}=y,m=function(y,L){return y?L?$:A:q}(O,h),k=m.map((y=>{const p=L(y),O=p[0]===p[1]?void 0:p[1];return t.jsx(Vy,{max:O,min:p[0],betTitle:(h=y,h===J.Sr.TopUp?`${j.Tl(r[h])}*`:j.Tl(r[h])),isMobile:z,currencySymbol:N,showPayouts:!1,isIndented:G[y]},y);var h}));return t.jsxs("tbody",{"data-role":Fy,children:[k,t.jsx(H,{payoutLimit:p,isMobile:z})]})}},211958:(y,L,p)=>{p.d(L,{_:()=>Z});var N=p(64922),t=p(699695),j=p(525620),z=p(377810),O=p(742257),h=p(346160),m=p(523219),k=p(331094);const _=j.PA((({children:y,id:L,...p})=>{const N=k.Pj(),{open:t,update:j,close:O}=N.abstractGame.mobileDrawer,h=z.useRef(!1);return z.useEffect((()=>()=>O(L)),[O,L]),z.useEffect((()=>{if(!y)return;const N={props:p,component:y,useDrawerLite:!1};h.current?j(N):(h.current=!0,t({id:L,...N}))})),null}));var W=p(804470),g=p(674833),C=p(335908),Q=p(16260),T=p(607439),i=p(39968),D=p(626239),w=p(489186),x=p(702463),d=p(346838),o=p(843717),U=p(491317),I=p(28230),V=p(25581),F=p(410376);const u="container--e523f",S="titleContainer--9cb00",B="rtl--2dde0",R="icon--df4ba",Y="title--10170",E="content--cc251",P="closeButton--0b14d",l="scroller--8bcf4",M=({visible:y,onClose:L,titleIcon:p,titleText:j,children:O,isRtl:h,betStakeButtonRef:m,scrollPosition:k,setScrollableRef:_})=>{const{playSound:W}=d.D(),g=z.useRef(null);(function(y,L,p,N){z.useEffect((()=>{const t=L=>{if(y.current&&(null==N?void 0:N.current)){const t=L.target;y.current.contains(t)||N.current.contains(t)||p()}};if(L)return document.addEventListener("pointerdown",t),()=>{document.removeEventListener("pointerdown",t)}}),[L,N,y,p])})(g,y,L,m);const C=z.useCallback((()=>{L(),W(o.Wo.ClickUIButton)}),[W,L]),Q=N.jsxs("div",{ref:g,className:u,"data-role":"bet-stake-bubble-content",children:[N.jsxs("div",{className:t.A(S,{[B]:h}),children:[!!p&&N.jsx("div",{className:R,"data-role":"betstake-bubble-icon",children:p}),N.jsx("div",{className:Y,children:j})]}),N.jsx("div",{className:P,onClick:C,"data-role":"bet-selector-close",children:N.jsx(U.b,{})}),N.jsx("div",{className:E,"data-role":"bet-selector-content",children:N.jsx(V.y,{className:l,scrollBarBehavior:F.tz.AlwaysHideThumb,hasContentFadeOut:!0,position:k,refCallback:_,children:O})})]});return N.jsx(I.f,{visible:y,position:"TopCenter",isLandscape:!1,content:Q,wrapContent:!1})};var f=p(925877),a=p(131660),H=p(587698);const X="betStakeSelector--f9be9",J="item--ef105",r="selected--b4061",G="text--9f949",$="disabled--4d03f",q=z.memo((({index:y,stake:L,onSelect:p,disabled:j,isSelected:O})=>{const{playSound:h}=d.D(),m=z.useCallback((L=>{j||(L.preventDefault(),p(y),h(o.Wo.ClickUIButton))}),[p,j,y,h]),k=L.replace(/[\u2066\u2069]/g,"");return N.jsx("div",{className:t.A(J,{[$]:j,[r]:O}),onClick:m,"data-role":`selector-item-${k}`,children:N.jsx("div",{className:G,children:L})})}));q.displayName="SelectorItem";const A=({stakes:y,onSelect:L,currentSelectedStake:p,currencySymbol:t})=>N.jsx("div",{className:X,"data-role":"bet-stake-selector",children:y.map(((y,j)=>{const z=y.value>=1e6?H.K3(y.value,t):H.ej(y.value,{currencySymbol:t});return N.jsx(q,{disabled:!y.enabled,index:j,stake:z,isSelected:p===y.value,onSelect:L},y.value)}))}),s="betStakeWithSelectorContainer--060a3",c=({label:y=h.Tl("betlabel"),selectorLabel:L=h.Tl("betlabel.lowercase"),currencyCode:p,stakes:t,selectedStake:j,isRtl:O,onSelectedValueChange:m,isBalanceLow:k,isPhone:_,isDesktop:W,isSlots:g,layerStyles:C,MobileDrawerDispatcher:Q,MobileDrawerLiteDispatcher:d,isGameRoundInProgress:o,showBetStakeActionButtons:U=!0,isDisabled:I=!1,isAutoplayRunning:V,currencySymbol:F,withoutBorders:u,maxPayoutReached:S=!1,theme:B="default"})=>{var R;const Y=z.useMemo((()=>p?N.jsx(w.p,{currencyCode:p}):void 0),[p]),E=z.useRef(null),[P,l]=function(){const[y,L]=z.useState(null);return[y,z.useCallback((y=>{L(y)}),[])]}(),[H,X]=z.useState(0),[J,r]=z.useState(!1),G=t.findIndex((y=>y.value===j));z.useLayoutEffect((()=>{if(!P||G<0)return;const y=P.scrollHeight,L=P.clientHeight,p=y/t.length,N=.5*L,j=100*((G+1)*p-N)/(y-N-N);X(T.A(j,0,100))}),[P,t,G,X]);const $=z.useCallback((()=>{r(!0)}),[]),q=z.useCallback((y=>{m(t[y].value),r(!1)}),[m,t]),c=z.useCallback((()=>{r(!1)}),[]),K=z.useCallback((()=>{m(t[G+1].value)}),[m,t,G]),b=z.useCallback((()=>{m(t[G-1].value)}),[m,t,G]),n=t.length-1,v=!(null===(R=t[G+1])||void 0===R?void 0:R.enabled),e=a.XT({isGameRoundInProgress:o,isBalanceLow:k,selectedStakeIndex:G,lastStakeIndex:n,isForcefullyDisabled:I,isNextStakeDisabled:v,isAutoplayRunning:V,maxPayoutReached:S}),Z=0!==G&&!k&&!o,yy=G!==n&&!v&&!k&&!o,Ly=I||k||o||V;z.useEffect((()=>{r(!1)}),[Ly]);const py=N.jsx(f.k,{state:Ly?"Disabled":"Default",layerStyles:C,label:y,currentStake:j,decreaseButtonEnabled:Z,increaseButtonEnabled:yy,onIncreaseClick:K,onOpenSelector:$,onDecreaseClick:b,onCloseSelector:c,showBetStakeActionButtons:U,isPhone:_,isTablet:!W&&!_,isSlots:g,isSelectorVisible:J,buttonRef:E,disableReason:e,currencySymbol:F,withoutBorders:u,theme:B}),Ny=z.useMemo((()=>N.jsx(A,{stakes:t,onSelect:q,currentSelectedStake:j,currencySymbol:F})),[q,j,t,F]);return W?N.jsxs("div",{className:s,"data-role":"bet-stake-with-selector-bubble",children:[N.jsx(M,{visible:J,onClose:c,titleIcon:Y,titleText:L,isRtl:O,betStakeButtonRef:E,scrollPosition:H,setScrollableRef:l,children:Ny}),py]}):!Q&&d?N.jsxs("div",{className:s,"data-role":"bet-stake-with-selector-drawer",children:[py,N.jsx(d,{id:"betSelector",portrait:{snapPoints:["50%",i.t$]},onCloseTransitionEnd:c,titleIcon:Y,titleText:L,isOpen:J,children:N.jsx(x.M,{children:Ny})})]}):N.jsxs("div",{className:s,"data-role":"bet-stake-with-selector-drawer",children:[py,J&&Q&&!d&&N.jsx(Q,{id:"betSelector",portrait:{openHeight:50},fullscreen:{height:95,breakpoint:65},isRtl:O,onClose:c,titleIcon:Y,titleText:L,children:N.jsx(D.Xl,{children:Ny})})]})},K="betStakeWrapper--d7b20",b="hidden--3a464",n="desktop--cbc67",v="topUp--edeff",e="portrait--1ef34",Z=j.PA((()=>{const{betStakeSelector:y,device:L,abstractGame:p,gamePhase:j,autoPlay:T,topUpSlotBetStake:i,topUpSlot:D,phaseTransitions:w}=k.Pj(),x=z.useCallback((L=>{p.log(W.W4({betFrom:y.activeBetStake.spinBet,betTo:L,status:"Changed"})),y.activeBetStake.setSpinBet(L)}),[p,y.activeBetStake]),d=j.phase===g.Q.TopUpSlot||w.isTransitionToPachinko,o=d?j.isTopUpSpinInProgress:j.isQualificationSpinInProgress,U=y.activeBetStake.betStakes.filter((y=>!y.hidden));if(0===U.length)return null;const I=!U[0].enabled||d&&D.isTopUpClosed,V=j.phase!==g.Q.MainSlot&&j.phase!==g.Q.TopUpSlot||w.isTransitionToTopUp&&L.isPhone,F=m.W0.useLiteMobileDrawer()?{MobileDrawerLiteDispatcher:O.Q}:{MobileDrawerDispatcher:_};return N.jsx("div",{className:t.A(K,{[b]:V,[n]:L.isDesktop,[e]:L.isPortrait,[v]:d}),children:N.jsx(c,{isDisabled:I,label:C.T(Q.X.BetLabel),currencySymbol:p.currencySymbol,currencyCode:p.currencyCode,stakes:U,selectedStake:y.activeBetStake.spinBet,onSelectedValueChange:x,isRtl:h.sU(),isBalanceLow:p.isLowBalance,isPhone:L.isPhone,isDesktop:L.isDesktop,isGameRoundInProgress:o,isAutoplayRunning:T.isRunning,maxPayoutReached:i.isNextBetExceedingMaxPayout,...F})})}))},786803:(y,L,p)=>{p.d(L,{q:()=>s});var N=p(64922),t=p(525620),j=p(377810),z=p(587698),O=p(276111),h=p(234341),m=p(315049),k=p(769413),_=p(607439),W=p(297462);class g{constructor(y){this.loopTick=y,this.state=W.c.Idle,this.onDisposeListeners=[],this.isFastForward=!1}get done(){return this.state===W.c.Done||this.state===W.c.Loop}get active(){return this.state===W.c.Active||this.state===W.c.Loop}tick(y){return this.active&&this.loopTick(this.isFastForward?_.A(y,0,100):y),this.state}activate(){this.state===W.c.Idle&&(this.state=W.c.Loop)}fastForward(){this.isFastForward=!0}reset(){this.state=W.c.Idle,this.isFastForward=!1}onDispose(y){return this.onDisposeListeners.push(y),this}dispose(){for(const y of this.onDisposeListeners)y();this.onDisposeListeners.length=0,this.state=W.c.Done,this.loopTick=void 0}toJSON(){return{kind:"loop-endless"}}}var C=p(833141);const Q=0,T=.35,i=.66,D=2,w=2.3,x=2.7;function d(y){const{visible:L,particles:p,container:N,frames:t,showParticles:z}=y,_=j.useRef(L);j.useEffect((()=>{if(!N||z&&(!t||!p))return;if(L){const y=[o(N)];z&&t&&p&&y.push(function(y,L){return h.M().delay(T-Q).callback((()=>{y.opacity=1})).sequence(function(y,L){const{totalFrames:p,duration:N,onUpdate:t,fps:j}=L,z=y.frame;return function(y){const L=new g((L=>{y.active||y.activate(),y.tick(L),y.done&&y.reset()}));return L.onDispose((()=>{y.dispose()})),L}(C.D({frame:0},{fps:j}).animateTo({frame:p-1},N).onUpdate((({frame:L})=>{y.frame=(z+L)%p,null==t||t(y.frame)})))}({frame:0},{duration:w-T,totalFrames:L.length-1,onUpdate:p=>{const N=L[p];y.x=100*-N.x,y.y=100*-N.y}})).onDispose((()=>{y.x=0,y.y=0,y.opacity=0}))}(p,t));const L=h.M();L.parallel(y),_.current=!0;const j=m.l({anim:L});return()=>{L.fastForward(),j()}}const y=function(y){return h.M().parallel([k.M(y).callback((()=>{y.scale=1})).animateTo({scale:1.08},w-D,O.Do).animateTo({scale:0},x-w,O.WD),k.M(y).callback((()=>{y.opacity=1})).animateTo({opacity:0},x-w,O.WD)])}(N);if(_.current){_.current=!1;const L=m.l({anim:y});return()=>{y.fastForward(),L()}}y.activate(),y.fastForward()}),[L,t,N,p,z])}function o(y){return h.M().parallel([k.M(y).callback((()=>{y.scale=0})).animateTo({scale:1.12},T-Q,O.Do).animateTo({scale:1},i-T,O.WD),k.M(y).callback((()=>{y.opacity=0})).animateTo({opacity:1},T-Q,O.Do)])}var U=p(116986),I=p(465300);function V(y={},L={}){const[p,N]=j.useState(null),t=j.useRef(y);t.current=y;const z=j.useRef(L);return z.current=L,[p,j.useCallback((y=>{if(y){const L=new I.a(y,t.current),p=Object.keys(z.current);for(const y of p){const p=z.current[y];void 0!==p&&(L[y]=p)}N(L)}else N(null)}),[])]}const F=y=>{const{src:L,setRef:p,grid:t}=y,[z,O]=V({translateUnits:"%"},{opacity:0});return j.useEffect((()=>{z&&p(z)}),[z,p]),N.jsx("img",{ref:O,src:L,style:{width:`${100*t[0]}%`,height:`${100*t[1]}%`}})};var u=p(542021),S=p(331094),B=p(341626),R=p(335908),Y=p(16260);function E(y){const L=y.meta.size,p=Object.keys(y.frames).sort(),N=[];for(const t of p){const p=y.frames[t];p&&N.push({x:p.x/L.width,y:p.y/L.height})}return N}var P=p(50397),l=p(60841);const M="data:image/webp;base64,UklGRkpnAABXRUJQVlA4WAoAAAAQAAAAvQQARwMAQUxQSIMSAAABHMVt2ziy9986uV6fETEBAHppioHYhylNT3ek0mUuUGpRsQV8ZqXjxquYSZJtQF/Si7TtnSRJ25dM9CbJb5oLEE4snhu4SaLmhSTYaygRcYeN3UzEQa1AqBzKZOaolnB1z/+ZDJeHXRk1FREToLBt2+b/37M6GRET4LkB3bzVtm3jjBWwCFbBJljDGnGuDlSDWrgAT1TDdd23itDUyMhAiojjHD+JHfA4fyJiAp5++Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//+Z//f/mf/3/5n//5/89S1IdgllKutfZea805WfD64EREfUi51t47/pO91hRUHpOIt5Rrx3+/Z9PHIk40pFx7x/9szd49CnHecu3438/+AYh4y63jg/bsH3yEVDs+dLfHHd5yxw3M8pBDQq64kfl+Iqoa/kWvKp81NGTc0iz3DPXBLOVaO/7DvdacLASv7rOE+NRwW490j3CiPqRce+/4n+y91pwtqMgnB00VN9juDOJDyrXjY9aaLehnBbXacZOPcDcQH1LtHR+895qTV/lsILbiZq96F9CQasftrDkF+TwgPjXc8iIXTzTk2jtube81eZXPAGFtuO1HuHQh1Y7bXasp+ak13P5VLpp4yx23v2dT1nOaGs7wCBfMiU+14yxbNRXC09RwksVdLfGp4mR7Dsp1TqzhNFe5VOJT7TjjloPwnKSGM9ULFVLFidfkOU6t4VzDRRKfGk6/mjp2c7bibItcIU0Vc9izUpvzK044Xh4NFTNZg9CalgNnPOza+NQwm9UcpWk6cNLDLovzqWJKW/J0JtZw3sMuiZNQO6a1ZeWysOLUh12QkBvmtiflMSkHTn7YxZBQO+a3JyExWzGBdiGcTxWT3EwIzJcDMzjMXQS12jHRNQh5Odsxi1GugE8Vs109dYUVE7np7KlVTHlW2nJ2YCo3nTpNDbPeAmn5FbM5gps1tYypr56wxHbM54gyY+JTw+y3JGylBXO66XSJVVzC7KlKbMesbuZmSnxuuIxJeEoLZjbKNIlVXMpVScrpjrndvJsh8anharbgKMp2zO6IbnrEascVTY6ffMEM78HNjITccVWrZ6ewY4734t2kOLWKK9sCNUnERBedEbGMy5scL0nEVG8mkyFqFRf4SEpKzhfM9mYyEWK54yKvSkku7Jjw3XQOxOeGC908I0VM+h71/DRVXOwW6EgLJr54d2beKq64CRdpwdTvxZ9WSA3X/EhUFHZM/x79+WhIDRc+OR6ygSu4F1N3Iupzw8XPQkIScRn3EuQcxFLDHTAJBcmCS7mXoO62iVptuBMmISBdcDn3FOR2ecsNd8Qs9KMbLulezMvNEQ2p4d6YhHx0w2U91hTcDXEhrQ33yMQ9NnBx1xS8fDjxlhrul8nxjrOB63scazGv4j6EiIa0toa75mG8Ewcu87Em8yr/S059sLziHnoE0hEbuNbHsa7FglcVce4/JCKqGiyVtTXcTVvgnIirfhzrWkpKyczCPzUzSymXdW24wzYlHIm4Cx7/GPfeVelGIqi0CNnIAjJNXOMWsOkRmEYW8OkReEYjGLUJy8gCTi3CMbKAVY1jImj18ATjIoh1VX6JoNbCLhxBrpZcDOzalFps0AuKIxY/cE9d978uh/GKH2DYQ1hFN3BsEk552UCyh1GKLKDZJoTiIog2EYqBaQ/PJi4MqsHqyMQPkK1RidMNbLsKkzwt4FtjEgPhrp5H/GAcFMcisoBzPYsYSLc4DgmDdY5AIbKAdguDuAji9QQSBvMUoQ9ZwLyHpw8b1IPCHjLAvYfnDlnAvqujDgP9Hp45ZPAPCnG4CAI+lDf8YCAk2pAFFLwraxhIOJCGbiy0CmcYWPjwjOH8RkMolLGAhw8hjAAmTnwhGxXtShc2qAiBLdwGLi5sYWBj4Qrd6ChyhYGOV2EKGXwETxQugpALUehgpF14IoKSA03o4KTiWCKCk3clCdlICYEkDKy8coRstLR7ijDwcqSIjZiKIwgPYt6VH9zGTAj8EAY1FX5YQM27soOAm0dgh0hOiOSgGztt5BBAz0INrvBToAYd/BSpwcDPmxCDbAQ1lBg8GNqIoVBU4QUdFDV4wcDRygpSSMpYwYOkIytEltqEE2RjqaGc4HeWgueECJo2Tth4aqEEBU9vlGBENZQQXGEqTwi6ExWMEAKYOhJCoarF8cFOVZvQgQdVD6WDyFWgAylkZWygO1lFNggg64UNIlttZOAKW30TLpCdrb4rF3iw9Q/PBZGvjAsKXYELZOOr6JhAd75ahAk8HrtEwvpOBYWwhhKB2wgLTKA7Y3ki8JQViCCAsY0I4mMXVygr8oCslLXwgO6UtREBHrv4By9GWkIDkbOG0kAhLf/YBYEF3EpaxgKy/z8vylqRBfzPuRYWCPgp1/ZzGHvwEh68GGuNX/4LMD54sV/+u659e/Cy0MD+2OX1sYt7Ya1IAk+0ZT+Hed4eu7wsj12eSevHKw1EzhovNPAbZ32nAfdOWs8s8PS2U9Y3GnCvG2X94Vjg6XWhrK888PKVsn5/osHnLwdjvRPB+2CsVx5wb18J6zsVfCGsby888PTyvvDVH89U8DtffXVE4N7eN7b68YUJnl7fv+xkNd6o4OX9/StZfX95YkL39v6+cNU3LiAF4j+pqkkuEAfiv5kqkgEpgJao7s7JgA2oa56aRtlQHCVRdU0HJI5E1SQfkGDkqZIRSPPUdM4I0tJUN0oJJU01TQmMLHUvkhIIa5Ka4JzgWaob5URbklTVpKBJ6g5JCtJyVPeswCVHVaOcyOxrhppFkwKxpagByQpkS4aqTmlRS4aCJoZIUAOSFxhrfmrOicGX9HQvSonR8tOAZAat6ak5ZUbBmpzuxVID+0hOA5IbbElOzTk3aM1N92KUGzXW1NQhyYF9pKbqnBzIl8w0wyg7WmSmDkkPijUv3atzehBf8tKAUnpka3mpQfIDWVmz0izGCUIwslKHUoJk1KxUnDMEGZLShFGGZMXISR2aIki8paRZnHMEe1kzUodRklSMhHQPSJYQ1ITU4ZQmvazp6F6heUIx0tEI5zwhaOmoQSlPsseajGaAEwUplmTUYJQpBTUXzXBJFewxUlGDUa5UtEw0CyRZCGImog7nZEGGJQ/NgFK2VJSZhhqc0wU7RhaaBUr50lCzUINzwhBg5qAJKGVMQ8tBDU4pU1BmBpoBzRnsaBmowjhnkKJs+WcElJImAz393Cqc0qahzOzTAc0bArTkcyswzhtkiJl7GiCUOAXoqWcGjDMHG2ImnluFC6VOcbTE0wNKuZMNZaadW8A5eZAALevcKqCUPdmAmXQa4Jw+SBxtSzkDgFD+ZEP0jHMrgHECIXHElnAq4JRDDWj5pgMuSYSBmNlmBqCURRWoyeZWAac0Ko7ouaYCLnmEBChbpukAlDKpAS3RjACMU4k4oqeZWwDOlEsNKFuSuTXAhbKpAy3JNABK6VQB9BTTASglVANiSzAjAOOMIg60/DILAKaUKgB6drlVAEI5lQ3ASC4NgFJWZQfKPbX0AIzyqgCo98TSARgnFlIAPa/0AFwos7IBGFllBOBCuVUcKCOnzAJAKbsqgDozyiwAlPKrAqj3fDIrAKUEywagpZN7BWCcYUgcQP8ebdvcHWOOp3POuW7X6l4BOCVZBRDjCzTH0lqrtQR+YCm1trYsY16kDsAly5ACiPG92eboreIx8NMDQF3GmBenAXChPKsAyvjGbNtotQYQ+NVLrctYr8q9A3ClRMsGIOaXZRtLK/jNS1vGFWkBQCjVsgMo83uyzaWWwE90+EE4/IcBEaWO9VrcOwAoJVtxAGV+R+ZoBT/W3cxUVYRZmJiIiZiZRURVzdxf26/LuBA9ABilW3EA5f712GavBYhX3E1VmJlpn+kw01NmZhE1d38FQGljvQY9ACjnG1IAqPO7MVsNvOqmKkK/Oouo+QsAoi7r+esBwJgyrjiAMr8Wc7TAi26mTEy/saj5IQSiLOupu7cAoEw5VwGgzO/EbAUvugozvUEWtQO70caJ6wHAKO0qAJT5fZi94LibMhHT+xQ1PwCgLOtJ6wHAOO+wAkCZ34Vt1MBRdxWmt8ssan4AUZb1hN17AHCmzKsAUMb3YBstcNRNhd43i/kTALGsZ+veA4AxpV5WAIj+JZhLCRx0E6Z3z2L+BIhlPVX3BgAmlH0VAKJ/AbbeAgfdhOkzstgTIJYTdW8AYEzplxWP/XbxZi+Bp+GmzPRBxXwPUcdZujcAMKYMrA9otys3WsFBV6GPy+o7QLT1FN0bABhTDlYHgDKu2uwFB92EPrTaDlDGCZoFAIwpC4sDQBlXbJut4LmbMn1uFttBtPXsjAIAxpSH2fHYb1dr6xUHXYU+O5P6A1DGuRkBAEqpWPwB7VptowaeuzKdQLEdlHFmegCAUjJme0AZ12m2guduQmdR7AFYzksPAFBKx6wOANFvl2gbNfDclOlEsvoD6npOthoAXDgfEanjsd6uz7ZUHDRhOpliD6jrGZkVAFwoJ7M/IPq12WYLPDdlOqGsDgCxno9RAMCZsjLbA9CuzGwFz12FTqo+oKxnYxYAcKHErP6AGBdl6wXP3YROrDgAlPVUbC0AwJgyM4s/INqtH9tsBc9dhc4tGwCUcSK2hkdlSs5sD0CMi7H1GnhuynR+FQDKehpmAQBXStDiD0CdF2K2EnjqJkynWAGgrudgWwIAXChFi+0g+u0izFbw3E3oNCsAtFOwtQAAF0rSrP4AlHE7f1uvgeeuTGdaAWA5AbPi0ZjytPgOUOfJ21rBQVOmk60AsHy8XvColKvFd4A6z9s2KgJPXZlOuACI8dlmw6MLZWvRPUSbp2ybreCgKdMpZwVQ1k82Ch5NKF+z+A6Afjtd22yB525Cp50NwPK5tiXwqEwpm9X3UPrtVG29Bp67Cp15NiDGp5oVj66Uttn2APR5mnoLHDShsy8OlPUjbUvg0YUyt5jvIdq8naDZCg66CvHpI3Fg+USzBh6VKXez2B4QdZycrdfAQVOmS8gKxPg8S+DRhfI3i+8BiHE7LdtsgYNuTNfRgPg0s2LXmFI4qz8BSp+nZGs1cNBV6EqKA8tH2ZaCXWVK42JPANRxOxmzFyDw1E3oagpQ1g8yCnaNKZEzi/kToLRxHrZeCw66CdP1ZAOWjzFb4NGVKZmzmD8BUPo4A7O3wFFTJqYrKo6yfoZtCeyaUEYX9WdAlDY/29ZLwVE3YbqsCiwfYVTsujIldVZ7BiBqH59q9hYIHDRlurSOcn9/swV2TSixs5g/AxCljflpttlK4Ki7CtPFFaC/u9kCu65MyZ3VDjyW1ufn2HorQOCgqzBdYEN9c0vBvjFleFbzA49R+7i/u232FjjurkIXWRC3N7YugX0TyvIs6ocARGl9vq+ttxp40VWYrrPFfF9Lwb4r5XoxP7Rf+5j3NzNnb4GXTYWutWC8qXVU7Lsx5XtR8xcARK1tzPv9DWzb7K2WQOC4mwrT5fY3tVQ8NaGcz6zmL+xHbb2P+dtso/dW8CPNhOmS6/KG1qXgqQllfhY191d2o5RSex9zzvv9V7hvc47eaikR+IHupsx01TnWd7O2gqcmTOmfRc1fO1pqba213vucc94PzzlH7721VmsJIBD4kW4qTBee2cd7GS3w1JXpz0BmUXP/QbuBiChRXoxSIgI/091UmOnis7c3so4aeOrK9GehiJr/qN/RTUWYvoHsMd7FulQ8d2X6M5FFzd1/I3czFSIipi+hoazvYB0VB03pz0UmYhZRNXf/pdzdVEWYvo0KtN9uXVvBQVOmPyRZRFXNzB9/gD+amaqKMH0r2YHl9xpLwcG31+enT5fMzPJcH+U5MzN9Ow2IZf1t1qUWHHR7fvqcyfTIxLTPxLTL9P0UB1DX32EdSwUCz02ZHnEqAJRl/bXWddQSOOomTH/R6QAQdfw662g1cNyU6a872bBblvXnrWOpgRfdlOmvPcV3gLKMn7GOpdVA4LirMP3lJ9veY1nGuq5H1nUdY6kFP9BNmf4alNWfPZZSj5YSQOBlNxWivwohYju0G4gI/Fg3FfrLUVF/4Qe7mwrTX5OK2s9xMxWmvzJlUXP3l9zdVIWZ/hKVRVXtqaqKMP0VKzP963/+/9f//M///M///M///M///M///M///M///M///M///M///M///M///M///M///M///M///M///M///M///M///M///M///M///M///M///M///M///M///M///M///P82BgBWUDggoFQAADBvAp0BKr4ESAM+kUieTCWkJqIiFhh40BIJZ2771MNhK/scM4al3873qIlvWf4391vaa4v7L/YP3r9r/4b3e+IfZXm2dLfpn2p/5//0ex39B/+v/K/v//9PsC/Vf/sf3r/RfAP/l/t97qv8D/0vy3+Bv9c/2H7ae9h/1f3F94P+Q9Qj+2f83//9hT6BX7k+nR+7v/s+Vn+z/9j91va0///sAf/b2y/4B/+Osf5X/jN+0Pqv5VWgHhn+h3K3+f37/NnUafb+i8yD3+z48RP5ror8KqgV5SX/n5kP2j88PgX+9TtaegX+vQY0DtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5q6VpKPEllzMR5PMcYAPOs4ragWYMxy0P34EO26qfFBzYdjvZq4tCK7PMQAXJ9RU4pUDYdpql1U+KDmw7TVLqp8UHNg+67Fmc7008lN0eZzjSWdHtMuryfuYg6n48lNdyWoURqYXISJDWz2rlGCwGMwO2JHJxAbDtJd7tUWg4jQO3FITHpoHrSOzvBtWD+1sOC7bMMuw9bD090/cE28bJ7O1sxmcwRRN4ZoPiY+dwEUqBsO01S6qfFBzYdpql1U+KDZ2jZP4gdFD7Hic14S+wDTK9YstKi4dzyZANjESHkpENCnn/VlClTx1BAHbMnjqosGrItZbDRZVq0XKOti1UbLXDnYdpoFGQAwG8OD9skaTeIqGz+urslHjlzDHGEKOIT4N7a5SihAv+jeR2gPAhHgg6NxZDxqXuyXGaUpIItyEWw2uapjDAApspDCRIH1pMCmDfZ2m26koQzYGU1U+KDmw7TVLqp8UHNh2mfszg8HcGW0FTnUr+pF77tGkOw0w++yP9Uj3+PffezUjOqHi1pXo7xPD2KNLOyk4IMCGKobDTYjrPU3X2rRlr7I1A+p0ywfkkM+ydVjwwdsi+wt5C3//pYAaI7hIrMPncirXc6T3gBe6S679N8b4A+Vzk9LDhEkk6UyIgcYcaMhhTd89zZWozZlqkkbxmOdLa9d8E4ITI/QAdVr4sWpDlXGd/7cFBkZKx4Lds6UBO4vGac4hIHnmB3TnvnWDCfJqXVT4oObDtNUuqnxQc2HaS73aOW/lOzgTzVWpIoewl//u9pY6NjOqEfOEN0OziZx4Xa1bDvWjVM++pFfTi1JtEHTOh6RijGEf8XEIq+7O1O/oizRxKIa9QKpESCvqZJWI6AAnmRXiDZsZYGURfwd600eb493h07aRtzqsMEa2I00vuwVU7him7r/8guGQeP4aeUp/EacGBT05HQ/oxZDup8O4pgPyJSkyLWqno1Q63wBTkpSVhcKXVcvFUZfYal1U+KDmw7TVLqp8UHNh2NdFsEn53iqhnXWbPH+ImLCdSKE7mrwE/WkgV7oN8GesduRuW+QOJwMFk1165yJcoMZ/I3wfc23ID1L4heTASrYacs3Pnj0xSsez4L6wEpUMl3wc07STfFsue2uYus0P6T/EmDrCvqeMe0pSUhdEipnJjQGwQ9s8Zw+AqF6YY4fXpofMGj6oNLXpf7uYjm2+bzKaqfFBzYdpql1U+KDmrWZyK9aB/JVuCdwXtDitvuhvertRrfFqvzLhGTPjZDlIM4lPULuzAHq5gXbp4R8qej0NsDp1uVYnWW9Ywg3hkOJRnGOYllZDA6ynf832/Es6YcLiXmEf+nbwdQsltxdh6XVLVR/a6ZismGAFM5PKqS0T3Su7FquorIIcxh2mqXVT4oObDtNUuqnollCIzmOOQvrgJewIJVHifZQFphPatiVsNDPvsux6NIoamthapiXvBD78xfRrr2HT0r+v6Y6HN7nJo4PJBXILYAq5DSRVyfkfwo/e8AAage3E7ZG1r437zxLDmnixGsGB+gz0YxuCyxlXFFsFcyhPyWUZM9uVyVLqp8UHNh2mqXVT4oOatZjngc8g148GmL1oBMhSQoNigIVvcaAk6R086o8vAO+EwPx/Embip+m4mtbxMabvMuE+zA+2CIY20U1UuK52BJPnMAqAhFQmvAU4xQtqbeQz4ZEMQ1IL+aZ4uVmYvbemVwcLTwhlFnx32+iCuBb93yqTUct/nFPk8aV9NUuqnxQc2HaapdVPhBm59kHlauq+jVuEWIVjsKtr5whfYdRzHqSMOuclByXxG+ipmKd29LG0IimZGAPnZu7p7U6WSG96+BzsDDmaM1Bp6yJ/SXnHeJMspl0e356PKz8IppSWYT6oZq+nXmGYngE5T+cy7L3B6E+eV3ZU6TMHz1PV06sH3xdbRp193YNLjT3js+7ifpG/2tdN5lNVPig5sO01S6qfFApJyh6fJN5FUn0icqFcRFqK7dac7I/+MERJFmipEzJBNBwFL+lSd7urIH9RO7VXAsB4HATBJqiw7NLCXAwerzlRTL7wbU6BWQ898w7EWBUVgWLxqppFK0946ufpTyfldJ211Y//14z29P52NNLZiau5H3V5SynqQP2rfv4cnlLVTMYkyGZ9rBxNJJldymoUA+62izhgU1U+KDmw7TVLqp8UHLgy3AQjIQ6NdyOU1lGXujUbc8EMjW1LHocy79TS61ySczGF0Wj7hWKS77YovMRLlOjLVJ26jc+V0MRFmKQBbeY/x4ekCkNL6PvNpQPfOwfcRqF+xrDp38T+EWCpjYqZm+ouVpnFHRfbW4T7v8B6/tF8ZDGTGQRQ7q0tmxZZXPOMPDiGYr59BWYxF/qcmZzvBpwGxgdA2HaapdVPig5sO01S35WjkwfbsmFXFkphdRfOlBQAZ0ZWL2yNhktXehu0Igxgs1piWT7Mx7D5eYpjL9ubWtnSgqBKQFR6V1TrpUdDWHxSbCD7yf/SIrYm+i2Yg13L8lr7bDc14CVoCtqcV+in+bvQfiaVN7/uyAWY8dfnvfb86x1XCbdW/MAqU/1+65AymqnxQc2HaapdVPSL3GOOchBJyda1Giwt3fYCFd76Wuj3vhoF2uyA/thNs9FmZQ1G+mnpfC5SJbqidsl7F/ZPAkZ7ZOphx+eyCW8XOQVjopJKbs6xJ94j1r8en2N4aHhjbxt9s+istXxFHAP52c9Xyh092v6zwd0PdA/YusIfsIXK/0od6mJWagEyNKOtGLpn1hd5CMoHQk165AymqnxQc2HaapdVPSR47JEN8vP2HZRhcJoW5XSZQE8igmdiQk2+GoQmiUpNwz4uEKDSd1OVfdo8CHjrlB1xwrTZnKr6o6kXa//7ZJmx7dMBSjB/x5IzzH/xLoKmFNrL537LwMoromaH63ynWbbYgY75L3oDTss9u1RmRJ6XeQasr0ihfvecqEufVRZGQo/U6iSL97hmKwE8fxLVqH4P45PTlgpOc/mU1U+KDmw7TVLqp8UdTsf1bwcvsiUVt8V/bSxCKBm5XYNxuMukZ7uMdhjQvz7MQ/L976bnnlrsXwpUZbVUHI4oNGajbabU0x436Z6ksrWwk9tnA5v9kGVvEPyCTGfsLNcrUxukX0d+c6tzgwnx98eM9nfTTSGMHFWF4LEu+/wknf3NJ/l9EqjxTfXm91fDcQGw7TVLqp8UHNh2koxwWhA0Rdl1fQ8VTae7yX4EtBoE087dHiWj5W1QzLca7xPVMIdQmN4d6fTdsVbuW3SNajS005e9qGeQAhydZ/xybjQoF8I/94H78f/2s/kjvkJsjZLb5gXxHv2wIjOsTTPQl+zQxfoxnHsdjYl1fHrDkJ6HNnGKpAaVJOoBPg3GaBbk62z7TDGERripLHMal1U+KDmw7TVLqp8UG1jiJ5Cpnke0GEutUUldhWzd1I6Zo0iJ5sgUlMnuxm3ZIB6DGAzqUhX6Xr51mlYcvD8pd1mGcibMsYEc+kDc/Zp3zHGC0LEZ9xCT4ofCfh/1MSgj3wQWRDhrbbt7dvLpGktHS0QS2jS/JKFDug9+v79XBJIsf5HZBVLqp8UHNh2mqXVT0gT1rNucOIhuFjPQl2upAinPH3ikuID1UPA98vZEo2Rh5//4NeO89jqnoVf9aaXYiE4RSYtNuKjg66SHOnyWBaOaLQoExMhSgY/vIg+F0FhTxN2WkYzRT3jGXpEg9/pS0LzCHV2LQyH6kour7FOc7nkVJxXVFE1XNBq25tEebePtXG33UIkAql1U+KDmw7TVLqp8UCO0lHzYbuYD70PS/RTjfD4Mtq1rq3GP1xzQ4pfBdmQGnNsCZnsdbWL//TxV0GHpbsEicuIG++T3G0BxqhpxJ5RbPbDwIU4sDO5LBaYqkH+JB7481qiNIVwh7A0Tw+B4Zv9CkNt8Clgnfum3kQ2QAbDtNUuqnxQc2HaapdUr2yHyyr+JbomwTCc6NhzL0ZrjOlN7AE2Mpij6TvIp5FLQUfvTscnwPYerdxg0BlCd5dZDciQ9W2vRwYTcYND8ajRMW6fJLm/urIOmH0CsjjYRHY7rw0T39Ge0XcITUVIFDXJR4CmUn8eI2ubkpsGCz75ck5R1aWNk/y1NS/xGUAWk0WGROSV8zKaqfFBzYdpql1U+KDmw7Gnp+Tf32exJfusARjjBQVFMt+WqOOnJYt3Z7BmQe/2pGdKR6L/doqNROexTu2crEDqtOXhCh47O7yty6FpCI9Qc0EbE0j/Tnlr6GVJ6zneBuGa5obtzB6vFBdzv/ipR6vh4iXDAGkXytJfCUfnKpqkam1AfAmomx3M5I6d5T0aQSrWdRCjnM1iY0D6La3XH4rPu+zCsHDzksakv7V4pUDYdpql1U+KDmw7TVLqqDzF4aBuOdtG7bqAg3lFerb1eNU8sZ9EXfMYE2xiPGmcs1DbLt2cNl/XGgtU8vGA0GSJ/JQSzCy+r639nKa2BmylV9QN8U+g88eO300Pfu364+N8qWzXdzVvZv5UHF6k8Z/Xakl//rwOnVSJTDhcj47ujM247i0XWn4LePnnzmJGfk2XUgOkfz3t9e4qzT//KPIp/4j9lRQN32Db01WQDaBOoW2IIOc/tq+KVA2HaapdVPig5sO01S6qhiP/f9l4eRfsVv4GKqXi7Rikli8Mbng0NZBmadDA50J4BzIw7xuBxA8pApjVriKimG9OqlypVwX48v57P3KD+manZ/SLXYmm/4jjJXcgRl38i4kfcQre60iurdTJlNVeheeuZji/jf+TZXfqU5y+5rhBQkNbghoLnrH7SEp//zvjHUf8MB2JVsbD2fW1xuxCwSM8vTSmRPBzYdpql1U+KDmw7TVLqp8UHOUSXXo3ZHXLLyyZX+qaRI2891xETNCe5KhZVDcjIdDsjbHTUpiaH4kj8ou9gd3JBGceqydQCiQ5lNVPTNGfysuo6sBGCTA35AUYID4N40UF7l4S1fCr7gxHv/xbcl/8zO5bHXB9Fi0iWfFBzYdpql1U+KDmw7TVLqp8UHOQEQsGS7DoMfqyGXHfMfU0jjwy6qfFBy12ScFqXXf6CQXSOpVmjaMmI6eAZ7ZRodpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQjjSSooClQNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQc2HaapdVPig5sO01S6qfFBzYdpql1U+KDmw7TVLqp8UHNh2mqXVT4oObDtNUuqnxQbIAAP7+XPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmOduEbjeTb3EDXCi/vJYkIfbPlqzLmpXI+XMG9VqTksEybP5jLl93fiBbz9qLN4bLqsQDe18u9fWPKusDhiI3YZUicFavsvqpm+8IfPpE2SzIcPsUpsafo7b3GQWyBHcQyM9GopxNyVVg9mktQBtv31XWP9f1afhxm+D359IwiiPGLZ7D2PW0nh+EL5oir2CQBtPpqIR6KS9UzmWP8GYP9X4RkAOpEiEpyiRDDlIUdx6G0LZwzQgkKPBU1EbcE3K84UKV6IycBY5RND93bcyuC3txsCLHg8oelAAAe+R+eNpRfV6TOWfIO7cWFQFE79koaN0fMUYUB5NXLBLVswjZLcK2wTmqw3lUJWS79MDJQDEumCnyZI0jsVHhWPZ2jNGKqVm1/CwG+p91Cv2ghFyGMXm4Md+Mpov0KvdUNTN9UQIKmIqoZy19N9tMQ+TVM3WJrhYiXhvAVHqjnlKtU5MRZwERmFx/KfCub7muJho17SeKRA3sH+3ajp1MPslMOjPLjpPwHxfulkjolsxaFCkKkQyvSV4rul1lvXWgp14XiEAkWS7F7mlskq2xtkHLT82Vy9k5ufFS1NdbRUlQzzto/DJ4ws8e2dk5xO6uOmnwwC6spTt1mquu/oKOZYTAL++Iz0Umt0APh+UWGqMcBb7hH1KBekKwGFi8zeEn0TTFG8pXsLMwK1koWc6flQHDEzXxQnzMJAFxvVfK8YajjeaTYNvAL5XM6TGgl+/h9YMZeFLa+1PIl+isJ0xLfKuk0Kd9zDd8zWph/9Oqv4E5JBXDg5NT8iJ/LRHdbKtka6iJbrUg0gXTTgWUCmVpT8HSnHZxfRpj3wx2fd/PNMxk1FurDLqTc5LDyJB+1DeZhRPgv3QUp5kKzALDInh7AimPzi9mcAFiz3GiwU+N0+MVCIn+umyhYrLxGzRMuMNL/ZoUiuHbp/H+u6zpnqIaRONMQakLE3gFJCqLym8aAwNxnlVYEjmgZ2hVb1E5EEIl7E2IlSs62iUFx3OIPIx4DCLUgrYsZBqoPr5EbZTHF9sx1ruEXdkOjnjYESBh2R6wh6bdnhjlHT7tL1KYJQDqMrq0Gkz0fBXWCb4dRWZiRnBRUdnoXOi22BMj6PDFYEjDnBzWY8x/4prXmLVwsr2xI1bNwGNGwTKqYVGgPEgBnCZti4eFMJ4E0Uza+Ymfd6ahaeHgfwRFUS989tizjOmx45ZjFtV4s8AEvR+mohkGPmYG1kwFEWvSfpKcf1eQvmK2tYGalIyQltF0XFDaaiisnJWt2F4RRs0OjwhmHYz9eF2gAcTREjEx7EhFq5az+YQVjM2dczRCoC4zB9izXw411mRGVU8UR9exILM5ZCXYxbDd/p5MLRllrH3zKsyCZCPaIdp3We+VYVeovABO3yOJXV6a8mHQkDxfF4ZeIfFxbsTEdiDbGByQmXBfD6MoKwZe9wsTNVgiVwFHgs+BkyPfD9pRKNPuxU4S7uivxEAfNQVrE8XXlXXHD/KrvoLa3ejnTn26z+CTrc0GHk0xNbMpUbCmE6pmU+mIDiha2OrjDbZ6MDzzg6r2VOuVdCfzUF97noTf/i7k4GTnjjVbkwunZ+cLn6vE08zHAt8Y7ZodXQg1sNqgjD3PgRNVBploK6myn5qihL/ekr1KqS1azP34gDoMYc4X05x8BatpKnmin1ZBcpmEq4/uKwmGQSGpa84Ll27dBl3kxIny19lq09zTp/dYFqDr5YwjKJDE754+EZ1oLIi7wOwOVJmh8Qu+hRXD/01R1aO8dqA6p4fT4sHr4czhIaJG0jaYMGxUFqyyxpRSXYCbu+jmv4qdinfRvQkNeZXx7e8bGaRltNEVdubdsdBx/naD+OaCkHv2sbH5VHejHh0iK62NF839kpD1u+rqTZY8rnSpiKfFrkg3eRIkqG3KODU1I8HJEZ3qSk2EueEeGADonO6DD+4AGXKXXmtbiwHtwJP7SbQdMDnzgZya1uya6ftN+y9/pXmggL21r+wIFRiI7X0vuZpMA5d3wHB0YGnKwXStOMVJgi/ydj0NxJ3Jky/vRg04GoyT87LhgIWvOIDVh7TQ2nUbqieMb82EqH2fJ0QEAZ/KRsiYavTbCv5gRuLYdn32Cb2f2dp/LbrVGGvqQKYanMAvTQKCTvvJjdg/rnTsWKwIz+URqrhruHydFgnH+HzbYmveU6jqXmkuwfPueBZ4H4eVwzjbfik4976pxBqyCl9oVJuOAQKVJzQvnf4JSjLlH8lx0ylX2yN4QsYl3M88hrJFQjMkdFbKVCHXN3uLAXoB8MDtZQhWsbGMt3lnR8+5OMh9MSZbnVQUAt3e5M8ukmCtoURgN9cdq/lQsLOT2AAcCxE8y17fAQkpxqzfC3B2eDWXhGZaCb6erFfKVSCqFHbrEvqyT4GjOUaeCCP0kavnIYOcMge71Jhz/TwcdHRdNCy7uZG0km1VTl+sLvhXWFkzV5kzam3G5Tr3Grpw/Z92V8+4OAC/6s0BWEwSHPVxxyJEnTwubG6KDCrCmLyBjhVzbU1adBUbvSB3vERKWoTuISNJZ5F/OpRzYZtN4UE7bmTEKljgCNAPkUitYlyKfXQvKshfVDezoUjBqooUngRJr/1YUTVIdWwIducZJqmPrrFf/1p1yM4+EZ58jGbsTXyWL8kSSsynHk4k0hSUT1Iuuw/TkDaXu1IrAP4V/GW0sIlz62eopz+A1TqGuU7Gprd9oQRKR31jvS3sYga470vz8DzCB9zufYN9sSB2yNP6sPUpPbKqfULqE425SmQCHpF04U/VSlqqZaENjt6r5EGeL1/NWmDN5o5OaknkgTFjPXoqaSMtj8wKF9kYWJ3cLjoF1qTnWNyo+oSuAOZTE6qkIPWxbyZ90wP58Qytyxje8ql0E2EUwbUciQ3UuohZdfbLQtjPyMd+5CL3DLmNtJh/yVxciY/E6Z50Qib0cCu6bPhhktrmCtUhIx3icyMHnw1uaihqI3fc5ANOb2WCmgaaBc/dI25/SMNI6aSNxcDe8i1lHtrIabDwJfmqOX/PxgU07cWlH7Ii2s+aEK8DAGIeNDB9rdtxGuyxe/0glHJ99bXmySrCWoABoWxRb9KIO4DasK2bHj5tzy+/ne8Udmn9/0gs32PWqZ4OeoQ5u+uQGVGaj6v/eeBnVfmr5b+6Lk21f9lfPqK2whDEBD1a0TmTQnMOF92p3zWJ5Wc9riNr3Avl536DrutE1bmo0ataTdrY+IOjbITqQKwbsUYXZTiI5y4EjXydAN+kJMsiOCXgoBVZgR/LYV6t1OlowylJKJQQ6pc3up9GoywaUJPnGRWJyDw8e5cPsK/a/dJd1hkK7xjN6Wp4+xHRHArK2BDAavSIWW60Ze5ok9v/u1wRijUcm883Aqu5IAqwDT0HAhaG9RV5j5s+at8gIWXa+3HgMmgpBneKZP7L8Y84QDVqlWsJccZx9KmTrHjlq8cBZSKu+nGVyMyezEKgwEjDpJD3W/KsjWLNGLv5a5SmNivvkYjpnWFv4aF1gYozOLGeGMJgSdLx0vTryPq8ocXTT3lywlYCAm5i5QXB8JfBxKTlfLq8UP51ht5PeBl6s6lGXXWmd60UGtCIc3rPwrSA76w/dAbiGHdFvhg4WX/mVZkGe6Y3k29xA1xnWKUaxo5I4uX960osdwFW6YOuyhH2V3XMHcJo3cagbTt10FGJ9Y6ZSLIkfjIB9XDjivpAKd4mwYT0Lv/Ve1XhRntlp0QHUFNw/iqmyT+StxyXDu4WYpoi06uDLBaAUkNYhC2yNDiGwUrJa1zt3MkphvIom1MRqYhaljlB4Behi4JwhQOLzzXUpfZWOYRQh8hXZz6HvYCkVdrwikpMJ703jvJSBnS5UQ48ohfGkODZxtprmw+mJcbWt49LcZzRfkvoYHfpkZCjfdrvi4UFqr00drC498T3GZbdse+wpUJNtzt9r4wiGdUYR8PQ/ZK5Ky7KJ/8xx3IcQz0baeGl0aEZuiVku0wihvZ8bjOf9u49YQDuOBxZDS2kNoXkgKcIMqd11PBOGFhHDbLDew5oTS9il0w5dg7FGn4M3J/uu8oXH0DUjdwujsOwNqJCz5Jly4QIKSFjJSddd4dAuG188LoKTpq0lYxi8XFpafyRrnvly96MdOY9dpbuO84xpTja8k46TmHsB0zXkUcb42A0vIeMqEi8PLTnYpVohsFqE4/Efn2Mpa4NbG+dxifa0wtplB7WtW6n+t3q2n2KmcJBSprrq7YK5GA/9xuQWtAQh4G+b2kH5xLPBghxlUjOzBkKrLgB3DL7pIh7vDehVmdVx652Ych9jXqwWDELVZZc3g3+obyw8xuUpjJljgIzDC9GUrUdpxtyI8R1qzXWPzlsQ8c51S83/I9QZ05uR05dn4y9d1kr4LJ6sFzEfnCjfhx3n2Az7KpoOMU9Du6kNeTa1n3E8OocYZ3zEoiPw2vqCHtPY+1PLItEZIuvTrvQdzeEY59DBC7wkmqlDr/nUKslVba0PxJeZGGhKU8DSkSaRlpMsUnC/wp5Y/xc43ZnJei1nLgPzLwJBSdGRa3xluc006ZM+slD4b2J1pzCABr3MtHgxt3AdS3ZklPHVx7bLf19HRN8fgnCbL3vQ1sV+ZH1pqkdgz6DsfbDr0gqEu4ePbIxBfmHINFNrkLck1RUOXvK9y+p0pEuQp3yjUwCjTErKf1FTXGfFx+0sQqRo60Bjj7KKfhIkSHEGSyJan49eUBSZb0ugMSknSdgIsrfEwoSZkzr8bNfa4ugD2SUlRR7XAnUvyjA2vC4+0JUs/5xGM5tIFhAJsJ8gdV/7nEfXcslpXfAH/gOlImOl7DkzWun9qB1Hxy2wUv/T4vMfQl37QbTFqxiId4OE2uQf+ROQpfTE0CtYXevtOE9Mahn75EXiY7XkkBJlebqaQa8EaBdjhyfNC65Xk8YTK770YBlFouLQEJoXxhMl5dTWxWdoVcCB1BHGPtYo2p861lTT1aHyLnlr5ARThTp2F2sOB0kTWmLa7XIo94UG1EIjv+rzfikE8NqhMoRGgZTjMpX1tJfbzF7OPTKiPdfGkIB4yADlOjERxLfEXgyrIv8omdpuVRw7MrLzkdAh9Zx6QN5x8iGw6Wyrld0WNLTCTED/+GOHY/or4j/+MLCTRRN6BA/07iJF1Fc2y3Pt12uv5z71kNNhL+hr5EWouti8mIx2TEZu/OEihGAj0suZvlJtuHuVzI4WO8XtJQxbXTe9qmfzzf0ubqOAehcdM+8tlwSL6eQmMtvL2EPLtI8/NuVEtZX6ewO97f8DhpcRF/xq2Q3W19Nj+GP89xkUEyGH1UNXhItYgf8kM9a0NBO9pnDoGH5vliSVUfls2AIuwTIDUl1iR0jkarHEgwxqZ+mzGmhacWTRhrOc8RtOlqMfTpiS0f8NvtAuPi0KNOrK+YcmAczxWJbdXHm8MoHobXHHDidkDfc64ZmK5j9BS7v2qSXRzw1Y1tKRwj/MTmp5nJ1yhFBkOiwEKsjK2HBWRenJyZyn557A4BH6TQm28fZ004Qxgv3IE8MPAe2Si9tnKvVIUa1z58G14DdfUm0aKWscPKZi+6g6xw5lHWXvU3+TsSOh8SzaASpCXh0+0DlY8iRJWqxXPz5iWwtvBh12Bjotxis5+q6AN6pO7h542c5WkpKovDNxtTXYr+yCAOHzWpxBcfiwO2Ntvzho7XhprGDECzy8HQlZU7YoJra1iDCkDdeypjfFFC/4FvY1D9e2bkYojglylswY8eZHpHFVncPbX2I4G8aPyICdtn//G8RjmIh7SG0yLD+3xyWNxb58PSKhGM6/HeNjT5gHe1Mo4oBiwgSSTVx26znqoV7kKupOa9d1qMV/+gLqyMSxyLFATD07ZsxgdrReNTOfV4TyFHwySIuAes3fxJXwVWabrFhmiftMQyCYNtDUWJuytnjhNNPLZaBK7WWMNo0ooWJYZTQV2mHAH7nBDhdC49eD/FjXwCnWPUqVaWqoY/D7t5vuNpelq4osXdtxVdlNiGwcmsuc4EW8rEslBys3pOmk3+OMWOxT4h7xVH9u/wKXo665w4/25HqLUov+5eDO8YCSEf0xcKPCq8KV66a1UtqkyxsBlt4cRYf7221vOmJbhwuw3szMgG1eRQn93x7buv0R1KVuH8AN8UDeRzCMCjzFFtQszrx4E7d5SkKlAopvrsD+rSMMbf1zVrKMqLgrJ36M5qnxIKX3kvKqJ7Ic36gOcLToSRAjz70Y9ZdnnaJEw4el1mJQyTxDLTxNqB3TKl2wY4lhLR0x2DFG/ob5jYt7SpnWwAF6fLB9VNtt90eDvA0NmZyK8P+L932gpBK/ZK61bshWL4YbLYz0iJonSRM1HteQ+cUxUdjhp98i+noQo/IOzJ5XUk8bBLtrJtd2Mlw59zgA4mXmgn2e5K5/Hu+/2aK8liSWXrz3OVklzdg+vc+LADkAeEn+AYhSyxsfFapdeJKvruTcg4fT6zMGgk1Y8QZCMSf5Tir1OA5SOdHQIf60Hj2v6SlvGOVPw8SqYcFmNY4hd6y6jrIwrICXf5VU99rz24AR2yQNyAGCwa8eOhh8vPuFy3fTZmTMC8WXSxG9ep0UJZrHAHVurZl/tp0G2VQro1R3ky8dedTW97cnd8PfRT5liboe1lfIQECWQlSI0JYu9Jl3Kx0nNkWEYrpdmHE30j90u6zXnoCpqpXLUBVERLNjLwF90gmtD0CB3jGpbYssODvD4fVRl8yg/DqUmuJ33A8pPyt0VFBW5MSG6Uc5lA4IZJ/JDPW1s3qk9VkTd/+2GllSNtUUAArKFkkqi4Nc1/pXB9zm9FMHYcIFv6VbhaGPPbksKccvx2ZjQA70c/nJF6zFKGf+Q0GoyW8TRQoe71ROxQ/kt1Kwef14fWucZuyz9rwuZ8lgkkUkZ+NZz9RzsS1A6qD8nJS9E0nxav2zRXmYD0QuE7uG84oXyZbmlRs4Q05f7JVM3fvim4VJHcfQzPtNIY8w9kaXd0Vs7rXBx4OQP2Yp91LlULixoyZP8BdD5Gh0pf4rFMG1ldajrbGSFTcCc4iocs0w2AlnDHc/f/wCyKj69Wzq1+1eyIrVQgo+TSEaLZNLuFqwAWcrxKmhtqT5AWjwagmGjLhO5pO6mePIt43fTwvTqG19caYh8kTQxW1A8cx/RMUMAXYrLlNs5HQ2ZqWE0VRcPGZamoblvLJyaLLK0AjkcAF7kelzM8/F9QeiCCbbSwAgyGn+cZRIdXUKxIe42AS3Mv2ezTGuFpCsQwVR0q2InWsRAELhFPRCim7w6tbGdOQQTHlgkDXbwg3kXCmDKZarJ3K+hKuKaeFKtgQEgRaG4KxcscMIlrF4jBajFCGMCoDmKN1M8T4AwXMay3TNWns1RBbJmHeIkJz588UWYjCoagkwf8oiBCE56zhEI9gcB3mRBqBG5tSs235jW5VF5SwCyaCz9B4svpJDstfUPAYSIUx3mA5N7U4K4hGxtTCVw9cKR++3JunsDbkv0bBLlXhkATii4VMDMHJ3B4m27glhIHaXqtKPVubO2LdoSXu7IZnG1/rPCmFy49hrqBeN867lBKJ+qJdL5fvpCjIQUElttY0PF+3Ml1sAqhNfIJ73rV7ODc1pjkXo4qwLh8//ua/X810ANDoH576+Q7gzXpVrgMeW+t3Q/gAJvHEk+He8fwzHMNQd1sBIEhpGvB0dSqSk+piYs+mNurlTf9+kj0+pLs0jVKqjhuJvAaKfmmDjpadkv26KyXtI/ZA2cKZsPvP3U+ImroVhDcSV2KEmiHsgahaWSbROeT8KWQ/2i3ncFScLYZy+t9wFEsc4wxv2tjU9tM+l7NkT7Mg5wk7naOpnwD7oBg8YMSnvhdJPv1/n258jlYfJC1QS5t0R8me5NELH46c/W6X4rIFZyCr+hTMWBkqOwA0H8EViFFghd0eq6QDgsM44q1C2Pop2NYgWHD6fcDobO71UVcI4BYSdyAX7DORRmHDwFrQQFU0eS4/kW/F1ihStj/3s24/QCuIHuaG+4jgDnq2VEIK6+2qC/I54r3mPP3sk9iP6MxzgpQfPckdxS6EuglF7P7fLHMMl+pA5VQCgYaGt1uwbO5Dwq5Z9Zt1ys8nEqQCYn1ttbupGsdcaw/fx1VqXmoPnQJAMkTXlQSVuBvRjbz7ratf/T+00McNihugyZA2Umnra2MUCVOVHTwW3avYcPZYGGVVC3zEKY6w90G7OEMmgb2QiVVv6TPNMy6hPYvsYMhGWGRFdnF+G/JywwPsofTDaP4nYJEADbqy2dO6penPl6+MfVzhm4bSfmYtbYfOSnj4cvfZp41B3GDwrnpfqraKH0+mSFF/rsgnQMjBW/y8cv86QfMFsb6hUZ7ZRIXiJcUX6elIlqCul13OQOEZYcUTrM4sM8Bv6/cvnQ/vSsnbTXO01o7RNSsMIbtYpyrYB9h+SBrNYHinwMi6IuK8aY2+37CCx6XMLNndSZkwpezneauq0/fBVR5vO/huowRob4YDlWbQaZMMRuVdJlffnqTgSkb9a1zJvIi6XIXtEOTz8Gh7FMoKQDq6N2/mr46AcxYk1f1/OWUV83xC69gKhmajCdeO2A3+P+KJp3w7GCIdOOniiQDg1wX8l5he8D7lZEw55RlYQW12tLkClaFGZXkCTKyB1EemqijbE+2DtCDBxgYx8ywjiCq3O4XaxY04zHWEPTc0l/gt7RSfwh/o82DBq5rOXeIJzRGoyw2kiRCkdquCxYdJMTSQzy+GCYXVQumpGkmfwNwhcfjtDpr7KeJabTqf7QkKggpMiNyBY8cueU6IIQG71/sPJLK3CL7PGyLeM+eDUQZ+Ra8Txje0IAHzR9P8/w7k/1aJQVZ4eMwLRYdrZLQXOGZWYVIPe5QN4GUlCbyEQH6FcNgmgjPAZ5LPaEaDsR2T6OyGNSalSy7UprzfYIrePxnf9oSkXqHFj7HtPa0S3DH1y8MpQ3NShF0l0YWoanuBez/OmyFM4mX4H2mgyj/WSIQIje2xaUd23BA8HjHqxV9Pe6JcgWJ4+dQ2CW4GOMcLEBds7PDXNfX0gOvypNzqCttFDA00Fh51hCo+/LL6jl0sf6Xj9o0TXTanNZFJ9tzzqWgX20gEGidIbUGqCGhjvmWYoqjAK7dYr3DzR6vn2Qr4wASpBkp3GcjfeO+jgtmi4yudWIcdIB0yJVPhEJIdvmsRu7ZfYzjg5z9TrOyxnVuM1uhWny1l3HIdPIqnKbCWzM9YksIgxQx+agPgIYpzcaedeTWt0NS+SaXIAxn+S4db1qeAXDV7ebg2xWL2Q1t5jvIE9JkPs9xTM2ABj3wDEMDQarPAOQp1rmPgV/mIS4p4+iX5Ll2hbqwsleAlbFcS5bABjjnL4qheBrOfQZnQtuITzfpEqR3N3F/sIYcbpJXPF916ckMQG93vGzfS8DaBgLhhYZ/rPWK8E/GygvGIZtXBcrinntF64PLHTBwm1d0Ch9xGHB+TF8//4iit8C1iSX5DbMIfJBLjQWjrC9R6KfYNfWOjzmrAKcYvUTZmKrw5TJ5qSX3AH7XIkyUK8BPY7m/wU8AZZgVUGLgLhWP4Kz4a2astWREVUnHzqpfSJleiz7/TrwM3zIMIIDV8FJSoU537j98mRf8KmIF2JIEqn6sg/kttNrqs/fRhRd+8lHc21DLUvy6a6QimEINKP6eCG+tWVl8BOcShN4wJnv3Rpy3KnMjWNqUG6OF5ioXvewoSbQXUBDD+2RzDk9qDLBltZYRZY0pAR1oJVitxp84ZWyMYGpKXxvGktCnoeXkSEpYjZ5Kk9gREVYeoJzHGbbf498Wx/BDFu48SRzHkQAATHLBATnhRUquGl5eksGDoxDV8wveVmX3oWKMFIAt66eBTdayiNFwdd4N8MFcbWc8+3vB10+l6L09dXtkbhJJ+PofcQIguMvc/H3LEzPqx7wBZP264nowNV1okfyH7uNxni8F3Ccegy8txr4LvHyW/Sd8Nb1ypyhQpgesQ30Qcj9K+4rAVbM9/E7DNfOwsN2nSVmAbjR/TdThluOGnSSBt/7ZescFdrqF24LczxKuf8Lixal6ehrM3RB6M6Wc1jBQWKqlekGOqmlO11dxgZJ0K6e/OdgewWEpzyF/wczW2PUtKhei1mp1XXj0ThwIAq1AeF0yFTf71268IIwXMvMmaK5DyiEf/47wgWP/ixsc+KoTQPCqiUqydojY2bIlWkValzQbpxI+i/X0ISbXtC3CTwJot9eZg1yG+D4/Of87CVe0mVqj6HQbuYNdXKsAulkHGmMeHCDx45rcMOhMR8arrlTsVnGNfNfWb3XpqtVavHqMqlymRDo7MfBDJuMRe7toDtghfEBgbSrT395IIDeS3NHufFfGw2sx4gLL/gqXP4DyOAMSHjA7nmGxVABdyAbSgiLsCyd8E5XpdLRLIFGxvH2z+SpnYVwbbQGOmLMK3qWbn9YwGfvjRoFfsUPh63z04loT0aHh4LHAYvfhpt7DK3tqwt6fJKpaSyIufqFh0VmAoNySBa+0+wEdkbTdLvBCqYlmtv8gFtpNQVkPHmAddLH45u7THaukfBt2kor/iNrmkBNGFPiH0ONkNFyqmqn0bJmD/oKhmqva0b0oRz/Bd4S+nG5Ku/Cl7rq+hIaji70Sm9wDYn9BbuzI+64gMyVF5w1Y7NrsPuFWVNLmfycS8siEisPkR0tnp//usl9vsJ+TGB1wq8WWTYLHadY28EzUdZZHmRX2zyXtbBAdUTfAilMUJrrTwB9la48/jRTzDweYojIpz2P3cgyJ2tA4sBmDr56nISp94OU7oXs9TrfH/t0H3bFEQ3QY8jTYcDoEQJiMKtUeu/XvqjY41D5BxWXhY61Q6o6N5i2uzvBm+kTZAd9OAMO1Lu7pdw6X54+YEnulHrT6a3gRMwQAWOVdZ6HY5w4j/C1R3AIkAHJcYqAUKrPHgaLS6c1Fes6RmSkFQ2hLcfC/jGpebaaAcNJIsNUbJdFWY8J+DnXgAKg6w1q9eG0zYltGRwHRJa9wymRNX0U8q+Eqox/djkpF+79WFqbrXMs/ggrXJUCKmH2iZ7+AZXWhxZpReQvaEJn2vfrWIpfTZ/npUOzEEmuNflmEPJ7gZM2vqAJhLIfr+YFkDC+qFztaGr2BxLO6LAzBPvjAOTphZ2WNIOnPDml42IVF0GuBJrgXY1VXLzP4EapCT7e88CfFSkPcnjwHhBGNjnM+YFMd/zx+SCSvt+/Nc8fi9Jy9y/RJtLjUn50TfmQFD2d2YGoGByIpSYRTzee9zFzjgBQvH5qmXLOLCXrgaBB4FXQxeA/KtYZjB0KFTCJMHyvhnMK/nyehnPMgKQzeln6lhxL/2eRuVIw1i3wk8GHeHErpv2LhuV1wcAsb8wAj28uzJ09W2+feqMF4zhuDzrTqZvgN9grMyAGgV3LrWO5dSdPsmbDfdZ/gfDg0jwm6ADpiOInAtUut2gO4/Nx7CKy7rlIG34dZzSPwkamYRmpcd/b2RptCY80NU/1xkCCfzcRZWUEzM6JhvFQB0axpdR9YMM8QMJoosMjBV3SZzfpnvU53QuQc+mB8JTDGmTie4BLY0K2GZldXxfD6XUBNUupy/Lb9mVq5j+zExcrqCVwvoZ73qgrvNjLUfDh7wKEa8UiH1RE1Ct3atoT0JbGi2P6C9de4iRIHG8ncni3lhQz0WRzn5uuJ589cKVH+tLykzu+Hc7OXTZKEbUslZ2USCc+8DddKwlW7Bw/K9a0rnKj44qUfkACZ0y3ddHXuLtQJlxT/uY6mn5XFZwAiSchgOtNUIsGW6QgmxvBglmA8KByZHLWCcR4e9WpCOqEBnB5Ghna8o4nA/WkBrjCxFO/+eLABt2quN5ZJ1xIL8mU5uJ9nTDCR7xCk4TltyHA/ypkOPVSoJE82FWVRDgApthfUP7y/+3eg2pQMHJul8bKYTa2w6O7vHNV5AnBxEv3+fn8naH/RC41SH+0z+EjTTdN6S9sJnuir2ki8/nWpj1QjcTV5oDkQ7k81AIulWthon4rw3ERwKxtNtW03DmHziQ5AfZppxQ4CQUOFg3Xuth35S852cPwqznrXqsJZwsrpxkc/vnzFv/hEn5kZxVB/6FYr1R68K1Y9DZbZHsUqghlYgmHHFMybUkFP341cu3Eb9MgkmbHQeM33dqZ4o8cynYda1z/vCOrsBJk5LQ5kbckWam7qnIxT8fSLV49ZS5RIMHejS0lv1+aX/Eb09Fpgzk/Znrfje1UdssGwB3sw5UnQ17peL5b8lwulynQXLbUOgQrW7gjVlsKfGP4N2c68gk7IOvsZEnjaC+OJmnqpLsCWpVWX7x4ruzXpRXkPqVr83hUHLqxNremB+BgIjWaRTej+hToC1iZMn4K+VcFcWCQPB+eLEXAcfYwDLGhWxU9dD1lrBIaqCUQ55OSYwm1PsM9bU7GtP23vknvXrWCCYW0o1tlpIK4AABnZCLkz7mfWExjUXiiN3voE5WF8b4VbZwnmekcnQzP/VbLWIyCQi4oJXxtlOYGDHfIAwGy3WLEGEhdx4FEmO/7j0iI0rmINjj0b1ODOPkLmO8Ja+Xya+5m/k3NtJoRCFn7huXQFfDpYeFUiDgNNguC0hlJDX5HuNEMHFSGa2FqHN4GwL3i9JzV61t3RoXmdDvjKRL78NDvu0cJ8O5ygyI6OMdNdZ51zRZJS2+V+qU7ra3X28oEKyIpJQj4uHZd9FP5sPgngGThkg9G5X8IyfknkpWlbDT7OI++QVAC2XyrpW3H9SnW8ZwElrhMcrq0lu0OcxQe+o2eB5Fhfgu35sXJQGChbrBqY2FkpyeufzdRos648YBq9SWO8wgu2x3xbj6v2cW8UogqyZ+OBsTEveTb5WnWwU42NLRhs6LfQuXFqSOmGt9IIztHFV7mwlOBjIriZDAGqk/4B4GFlwgZl/6BvUvX1mApSDUsn4QAHgKmH8cPb89D2X1KDKHshsCXgzpnhUDowcwWNqQBrDlF4ONYxKvFWoFDPBhhPbzaK8fZ5c1zKqilYnQ40ZrosrLK4lK9fOkWHyq888TY1XfGaA7eIjQ6vrNIwXBQBHOS+hV7b4nWqGT8VhB8Aap5EznBlAN9Npd9TMTh5JhDIHBZjKX4xeRu8sVjP3FcqYdP0TvqpxMGEOdFTVeDJLZ5N/c6Xr5i9YKgS8iyCmh8uXAGyAKro1IJKcIAI6QjLrwPfr92RBEB059r+tYTAASBWqFWedaDbm9JyVixiEOQ5JyT8WApVCI2U7cQdv0wkfR3oNuvGYPI/3eCO+7b/kUkpbYrIEQWE/MquXGxZJDJi869NxuU4niW7KGcWnnA9aTKPnrcrQ7ke6RwDOV2mR+vYcF7KQmnhaRztaB5ZukxkzZPyGrLldx7DUZPG1vc5Yj7MXaYD0fuABXxzqg37IC0aC+8WwkRRO4Jj5kV86IBSE+dKS98dw8OM889aOf6/J5BJR8VMBT3f3U7cn5PvzORl1EEcJ0Wx9xdm0OWESInsPXYHPsulqHLvWd5MFkk1xUGXJ+d8dine9VU0WXVmoDuuNWkJDAYqcxOo7cphOjBbkdAmN/FBfTAhoR1sc0mlLdPl7HHK/Pe+oL/hkDCYSkNFmPnLHG3DLJ/8+Q36jg8Uh89J1baUvrTI3MkCqJRdbSUX4REIL01LjOeqksoxYCisQB25DYMRQ+21dBBKADyKWVtZs+Ha7mkCgVVoX9C4SZvYaujctI04JQbiQNN8n7hlnhv3YhapzKBll0uwdlejNTDusaOju6SfG2S0JkjJVv100PtY0zJGeSUvakCBrwxZtBe4oV2dG1I2JVaFe1tgJWP1Mq72j9BT7IAAC8t/Nz4aA+aYFQaluvkQp0JXqtQIuyq0HkPeQJY3zuAWrYbo9gX/+Sv/sl35N/wAtpR+g28yFQp/ALDpVEXFmsc+S12zXc9J2cfAStPNB+K6RF2UPPKdLPtneFQvcMzDKrpTUmQz7S7yzzRr6cSh+MvjZdh0sNaHdeKwat+qCabQyp/uIiwosFJFf3l1H6/L1qoJqMTM9BJf69/bEYyRnE0bAev6ycs+xc2j/4TDXDIat2ygpluvM0fHKlzVOwgoLpQM5cK1B1M8cKFlYUjlaYM+q2G3VAyEiwNWR4pQOuH+v40W77ha90aJQL18weA54eKbDnDBUdaa21Qwsjl2zCwSvhd/FcnfBGSC5AFlwWo7Qp8Jl9aeBxcqf8aNs5E1zHIfxJ1AASD/vFxayNXj8w4KqKrjBTpiJiYSqE9W0Q1t9WTIyUkaCa2HV8MBNQALN/k/ld9x0XeedsxgxuaBYWExEdU7jPI/HfX9RN5c/JBr5L50vhUO3GWnYSVX9lFNJy+MVujfnO5ermlmQ0feqS9mXYAHCo8LNIvhfGteXn9zGwHbrcR0fPKb0qKjQxJEHYHuFo4sll1bBdDhGJJtuzbSxPgb9L0XXZ4S0OezR18GXe1NPXtsdWhsE7ujsWUVF2p78f5aAY9o7brmxK1alPrkMKkwakL3dv8XoFBzoUkHw7rgrlqTe5ZDZ3oWQZdYrfonqx6MJPrNefafoWq0N82trKRRolSjsj8Ilgzw2qjo9kVyWwlqbOvz8faUadLRLWu6mXgkvmAPKmDzLJWSdP7ZOo3FoKgba1HoOkkS53Nr9vnyxAjdwZbPJ3hmRhxcajW+HQw91yXAuUwzo99sGGh8/VcQzV91jeLQLCX86yVBG1YwAAkXLyvWbpo3/u/6/FachEoxZ6HkUhH8rRLsF9P1SVm2ce2vNEzBS0vvsNMr+3EqURwIahoOwkRq+Hv7OjR+OVzpFud10pm2/r1bOuozeckMhJ+mpvQOBZt2EauQ97BURX3yCaYkZGsts4ddDfucH4XyqaFWuFMw3yTgXVN/CuP4xOqAvSCNI+oqF19pvboPYCvWdQaBcPAw6F9Jdq99jxprGA/ycG/74hwmCSNg3cpABNDbfm3U63KPznmqh9I5SB4Hc7g50rDgkYOmoAQBPCo3Wrhs98qXHb8m6x9j02aWzQ7yoC1gK5HB3R4BodhifIAhZPgghVjzZXaPzuN7jmQdbfa1oYJFfgKWYWkeDKHy47KQlbLGZgm2VnDOilacDx3YtpzvSxVNbx86NNFcscNc+cwUr17w9Tdm2GTRAWgmRuxFWFPnpZ07YH6ww0wAeOTlPpRIC6LHjtLZsNGGUH0Dd0pQoyC8zwsNenFWbP09gPwLORIvX8LNrht99iSD5cb8py9OGVK8Oi4EbzxjBR0vFClrRwoJnCZFfs4Dt/y7oacm6QOU+FxW5ETuEcbJHN5HBmrlqCZ9x8+ypk6t/hLOFu0Ii4/iVO++Duz0A/vVagHJ+UXPK14yv7F/SeownFPckvYrNx8InR3WAzct44p898Ql9jqOEzjMqQBq3dW3sIylHlzluV0W11ezlyae6VI7XrvfQI7Y7MTmVCg94DRedQJ8nILcG5jqqkvFgSW+blP1SNYkHsf+WNEGA2ZHf4BdNBWFd4vfy0nEs3iXoR4hvYfhYr67h0M5npu+4ZiJ4M4d0Ml8odDf+3jGVREhqRJrtbXocgJfG4q760qGHvoaNM4PvP/DNPMNF3W/CPdsxnQ6Qt4JLctdW4Sud7/6ozelQ8r5VMJCQvdB2O3uVI9neLyK4GMlPj3/Akt1jd/ZSP2E5ucACcXGi3/oRQpjUz9t7qCPYk+LgAvohnM5hiZBlO1JuzZ8/VDaWZpGranmOdYas61bLfX8JFXnccGBHDe96RYzsqCqpKAYJcRHij3vam+9Z7h6fykkDEXbjZnivbGJva66L46JBIffXOioGL7jRZTdOcgGP9P4vZ9Tnn1+uNX317PvFI0yaxhfantrWH57ccbwVbSEV/o3sYGk5DSbHj1pjj8lud1qWyDSYJ+8AAJMiPxd3qqhe3gt0ChDjSdFOimNx/qwAm4CaBj/D/ixMpcQ5xZKfowgQY742sR6jtwXZvNvoB8yDEXQ4C1CoaZc496JHakcsKVTUfU2QUt/SfaGSQoL4r6DwV08IWGmsnvcJU+6tOHCnrrJFXowW2VV9n6LVSQ4oSZKZrdPMv7Ssqt49E7AFUXbv37e/rmjfLOCtMc3p0NUj9LXGBe8lYoJl7hyz3JXMibW4qHkfPllqOn3of1vYw5ljkU7BjMWimGI6KXQrvJu8LiJIIqCb65s3kybdyimHl4DMGD1qknjofkMENTviY1XETvi0tcdkbuuIGRcqyUVBkfxkTo9B2xy6g7wm8triKlEtUJZan3nU86+bzfHc/FSmKQ42nA68mkFIV1zyGcfD4XCK/LefSMbFhJ1RXEeQ76t2QMZbDfRrn4SxQJRtjZvjXn5L4/ZKpReaFo/RYWoIamrb/6Yxhf63E+SAvaWX8pZA20Y/wutdmp78zalTUzwNkfjKl6UJyYPeySha94BKXP+dxE/fwMSIZ2KwlcdSG+bGCIfZyd/GG6hnWtrsiXi64C/bKpsoDNISYtxfrZsIk0DEbT8z5XuBeGPvXBx6WhhVT+LhJImntixK1v6NG4n2oijMI5cYXzutZfEECvThjX62rncsKJEXNDkvbbEfGYIilph8yPvAPcxhg4om2Q7oDDSzm3GXUzDdOi36wn6n4QAb/yQq9wyjohIVbzk0nwVuybXLMs+ThLwdKzPivaKpVT1ZT8tAPqWMFGSzbT0YJ54mhGGd4sfwkNA/wvAUVrdS1IkPZRFJtUbUYSHDC4UxtCRjp9Q/MIzP5yRurAEY4rtQrlsH+srNCw4XaIwiadvScC9fEYui/7rgf74VCU/LRbrlE2Rz21OXUp82deMZ58f0EsPHDoZ9HPa9PMojMDrralaPhafJJdSMtvleYVWxuhsaRVwl1uY7fM8EuWDxQHS017BLDo/56df2Ia6RzZ7+9vNYzhkAn3y7q42oOiWYNnhoOk7K8wbR9DkSwfukM5utUPGFNno/Z/W1mlskrvMjKhBmf4G9LJIcZC8lSSAuscicd8y//GGsExl0ILEamJ85HGkv+rq0QbewkcPV0XVJo0jyUKQfavSc4Yp33a91K2DDwjaPmNwJjAkcSdIy3j/sxLD539dqdPET+beHb+hzQ+2hVctG0ubj8g1qMthvlisbVB1kgjK8nQ7gxqpcWQxfa6v9b06zdRic3mWvZkwz/S+qdHRvH1ppfEcdwPBEMyrdWQpnSSn0zkvQ6VA+9WWZObRYv6x8B8qfJCyMFj/ZBuQQswukGsVTU13FqdvQhCurGA0+p9ertNdjzWgg9I8ZVfmY2UJie5c5qOQSc5kmWbZrQy4/w4RVoSRorwi+oUGwUTi5gI+rgtzHe5Vv4kNURYgn+psWTW60wQN0JDWMdHE7lBWqWC8/8ENxN2gF/NwTn1uX4itGaNn/m8FkU16khEVwzHJV8UNWWIAAAJDN5ndH5jG3s7QUABlei/WiFWCAFJ5ScaqCID5l+29n9ptO52DvalRzI/R0fZe577L03xXyXy1GDuHrTNTksW8akbLaDfo/0BYjexY+efyXy5fJhku+uMIdUi6irh7c6wAauCKqIh/UHc6VfziklpwFswZSrhh76yT6UPp18gNe/eDLm18xWZKY1LXLwc/amT+6tpN4p1Tc3vCNlNM1Ka0MoWzUfQ3TJG6GCdCuXNo0KEHy72RhK6gNYdcBLcM9+T4hBqfHMsAatX2u/A1aEBcNzZb+u5MnyjPdr3oC9MfAEdvenbbwEpyfneB/LTTWgljDjDMtXfVMvJz2Znx9thyv1dUdMgDIheTJpPA51dpWCMgEkI/f3ieYmRajBKGQm74CdbJAKDGe4nKNxmYLqnpI+gRNZE8NdFxBYdqA6tCu5QaWpt8N+XDpzZgHSIU1bC8YZV6fX2ElyjtoymBFixz5QjXnuKCzkVoIDmAEN9HDbHv+1oldUoUAzJjUoZ/24vd8KOUtH2g2om0wfGWz+tdGpXMEE5ImxochQIft6xrdEiSZZ26qbcGybLQLxgZnjJ1+vaKGw5No4wsFljwV0Jp7xSrI3T4XCM9jaha7kgYzfgnskUvtQAwWF5uIbSBQJ8pIURglsiJ1DJwv+8Xtz5aY0zxrh/44ryYdx7J1VVFwAPGH2xkqUEOEfZJ+gNhYTWrS9Dea/IPXEAR2+H0YMonQ389mNSnV+3PibjZJIhfMC8o0V8BNnX1FeYU8bicfw4m+sZ2m3Yac8Ey5NfQe9tSbU6AqgDcHM7QfsUHBTetwA5MN9SgTzgldpuGleqJMHXKX0jNuW93ILaAbLYxnm9TfmJUcZdfTsNRJ9NxJ1KmxQYa1GOeb9czWgliqDNbWhQn7CO3UjTSf7xmxAhtz2qPs5DKwp+UZHkBcfCtsLcPpCeBNFXAUCP41iRhJbMYWwQJcaWxu5TnlhCbZuNtqGw75mmYDIQpYLwhWy5xhBOG0AM1hMXuk4OT/tbrKdW9GuXgMJgBeECZULCpys9Pzs+UQ8wCdRFjiFIfeFk0L43B+Jo0hLw6eoXVBjngGp2Jwf8NtMkXp5rSb5CgTXW1uSu/13KqCI2hKzY0jJVbEEPMYgKq6f9wMwfe6BnZX0iKs2HgdnzULGOKkXOsVt4uxM6Hone9hwSmkYsTtmRtc4qsSttWJyBLGGI4mi+NE6tuq70gPg4rUb87953E5XbRfkXqJSgf4yreFfg6bQq5CSQYsDMrYTRBfCht7yIKhXsAoIdGH0zDPj8ZSSo2xlNdCrEN/RsjeGCjkzWdGFmk38RJ+NIa8gL9hofJ8MRdqzPRdLPU7f2OnaaGNce8qvd4eREerz5sDBiMTP9YYbznNYFGR9ma8N4O3iFPdBgVrhyq035bt20hKgjv/6H+y2bFoTqHob0rNaHoRleHNfhXUcw4dr1HoYCZfDLP5y1q1R5Ld+iyiAdzEkuTN4ACtYgsxWMh3VwW50fnk8GAu4EPYwjpQjnGl8AnqhpF7ioX5TxkDtXfWovmNBA2AxktZe5zmQNsEigiqD/i6hNjJQCRvKArNRSCUQwTvLKZod9bA8YfL0PzqEmEBcU1lhKek9Gz3fteUQeJJUmTxLpOObd5R4FezuEdQNexM9regN6DaaLo1Jg4bmL8jiqJnbxDB6to+LWKJ+FwPe2t4zkGlnMax9TeZdeLN/6EKgwZCmq34ntv/CTPEGdRMAAKlsOjY7Aj9FS+O/BYAXtDYqOfZa+/bZwN+VltAMyjDwkFMzcKOFVTRBWSQ+KneHVuih9vM8KlsuJ3iQsWQ+nf8Si3/5Gz+oiK0vTSRMo/XmJOrkgaMoijxo2tfahmMr2vsgk2Cv4pbhiQi+Y2gNbiaZ1WrczibymIYrBpCfFyeGPpTSbSMC4prJYw8htxUWY2gWoOGrfJPqpkJ1PgDFe7c9doEtB3c1hba5B9ZDHjSWgf7YsnrvsFjOUha7tofS1Gm73uFmdR2uY8q5uIiUx2j4ka9m+ACWUN68NF/iVaKrGAwh3jBWQIyDa4pm2TopyoTkerV6F38MVyuuPxGGbXyWQ7To7Sk5ifPq4OA3RwCn7cY3tY5Ko73q91EDxFHb1AG3PmOfLGfUQGZ6zfJuB6dgZpKNUm/59pxFm5o3bGU/cDMYOqpO0T7dowNnaYCc+11vw/V4RqPcZmfzmwGD402K/sE43bKlpb/DbXeFaETHeuZAgfCIP5ot0QbRp+dWKhfufiD7OfQAkIt49AexJx2U5qHRY73wHd/hlkvvgF84n3QecgoQvPJ7m62pViCmVcKcxHwy1FWj9//sQXR++3mqn6fOjC1glA18rA8ftYY33oUUC6+z7TT4PqN1Gx771Zf4uB6ddVwJ++Fs36B+Rn0sKdVMHGfDGOp9eGRieGW28PL0149oparyOdNko4x2JHjEKstmcEs0lB9Z6rWE9a5nFMWaxAhGHUbDKhRRsXqGHRHvaPXP1UkE92xeXJXFxtwzjQHDCRDyiBuF9iFMr4R0CYIrJVd9bh/VjqR49VlV0WafMELS7dbyllpAANqkQKOVOThQDQDMvXtqWY5FESH4fGiIVVXrRTX/IyyJiRAnZyVDUXft+SZj/0fw9kt3GmAD2W71vPJ4osEORDVTn9PDBqW8AtllfYL4fG0kHVa8yucnMlaYd6DP5GR/O6oIO2PlF4CV4vwJ7cqpt+8ZbZNHJ/KSwClUD47dvGumMd3ZrRbD4B8EvZrF90q/AjZsemXQ+vTaDyKN4whSbQqGbMTMiXxHjoW8PCt+PC0E6bQIbnBpV5/RQI5kABYdgnWzChsTbuJAGKvo1IaYcpQTZZbkowv/PD9rOMyo8TlBJwNa/zQ+66tUuIuOL6dCZtd+yeKL8oHknnktHOL1l5qzKq8a9DlIPp7OS4t9yd8vMWuo944aiZfTzLOc1JymSOhzvr+ggl/2csDlwGrBAfEAMyMdQpSTosT8d232IF5/qOzW55V/1afEjTn1v0uzcz5uj8hA9NKr0qA/B8Ueys48qauBiMYLoR8MxqHQfffK+GGrf/GEDM7cfRJZgmAIw5IKtw68h81ctWgv6kSHHwJ17DowuByH7zxhTUYKHyR61Me3Ml5NGgC2XUP+MDSPO5yvO4ax8BCdphJ97TdjhFgIBd82FHYeZQoPz7TcunC+QXIHinif/TU3o8ZzUBYyuMR54ue47SgaftX+0NB06hfy8NoYbiWmoRocfVrPNFJfbj8Ggn8YpfBp6s8TssZo8Hz9mr9fPjvBUkob7GRI0A6AyAHKTJmBc2XaMjWnJD+rGpDv8N51C4Qd90z7UiRX0Z5eKZMfkEKeKbSU4g4GWj8GZ2SgEBk7WzYB8+mINt/oIjRU0KH6W0YveAAALnWIzRFlsByEICjbr36mDIs2rtB8R9uPiuZhOFg0d2hZKUMqzN5XGFXbxNbC7u9Gg8RWlanHind8Pg1Zi0VlL9NIvoeLywZq/qfIRr9z3is9EUQoLVIPwEReJPXh/WE5e19lo7XQ1II2NmWgbF3q/DnckUGwZQZ2zObemY5krpv6Cdh871wFA8Q2RlCai41mKThiAJA5qx0mJfPBTDiCA2XFcRr8fam5ABDXfdbA2LGJX9Br8yDdm6viaGf/LV4anpXhxFBboOFkMQI/MlFchNuCy+r2mXL5jEkgbjKYoA8nD5IlzYizJHGrzH1SUvwORXekpHfV91+GjYZNEbt4qcF/ciA1WL7VRQGvgbkYPOAFs3VJ+Jw26jM65q42JKnnp+bHN3H7uXFY1eP24V90QiVUu6dSoFocV247020jpJHtLB4qrTeoHVn94stm8l3LXsUcuro/ZB/NckUNYnHU8yLBRazmeE0MuZ3WlwpwaI75J3xW6OLYI99/eT//b96RfoA17otyZfNrCAijkk8BEJjaL6itKMKltGFSnbNeqXeOM8uQhaghTYr85iziuvZnqFQzzqxpOADmTDCZfMjtzM5s5P2xX8ZT4U/TKTN+7lbnfB7URMIzPPP0mz1Ygk92vPtFlBT8ACF8jhRFy+8p1TOrfmuVsCO3YbrXQwHnLfHTaT2UruTqYSOkw/36Y9KONvO9Pbm87voQutZ3qiB4HUI1zSAnGOgx3ubYQkmqK3XNC0oZ6cRp/naGIX65uUnhGHaDYEYTvEc62xwgkPNbEYko/roR68X1y4MpVIOoZm68gXpKi3Ej1jG+53hWmBn5aLvAmOcXocq6ks0IXuDCLTKocnfMYPh6AVDnzlSWq6gbgid7n2YGSxp8hHouByaXV+osk3Vvrz23bk9jD6z4XIEYsU6p4GwvMk1B1oyFtbvCVqQrlfVVEAAAAASpcxPYvSSrx/9RfQR4I03VoDUA9y0ziw/8/Fvhay6v2W+NmSzaqfw6+EVcVFNpPuL4JRWyc49jWez3mG7k/lGzsf5Mn3IymHcNz8M47AfE+13Z04ByAC6Lm3cqymJ1JgjbYnEcJ9GK0mSDv6Wab/VAukE/nQHPIUpMt00dZNa2wd8rrytem+d2XfskGL7FLOoNyLo10eKWwuGM9BQPwFvMosIAhVPUjTkuj9fgVmZWGOEim/hMvy/LaXK5z0vFYQBUciBD52f56qX9yQ3fyPR1eIBbyCLJ39RTSFmQUf0YEJ8OeUGCR1ecoQ1HZbDQiXXj/GkxPeHL3kHgB605wGapgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=",f="position--d41b3",a="backgroundGradient--661cc",H="background--838a0",X="payoutContainer--f9d79",J="payoutTitle--1255b",r="payoutAmount--7e423",G="particles--0fb93",$=p(969705),q={Medium:{src:l,grid:[9,7],frames:E(p(857045))},Big:{src:P,grid:[9,7],frames:E($)}},A=({formattedWinAmount:y,winLevel:L="Small",visible:p,pachinkoWallRect:t})=>{const z=q[L],[O,h]=j.useState(null),[m,k]=V({},{opacity:0});d({visible:p,container:m,particles:O,frames:null==z?void 0:z.frames,showParticles:void 0!==z});const _=.95*t.w,W=_/1.72;return N.jsxs("div",{ref:k,style:{left:`${t.x+.5*(t.w-_)}px`,top:`${t.y+.5*(t.h-W)}px`,width:`${_}px`,height:`${W}px`,fontSize:`${.04*_}px`},className:f,children:[N.jsx("div",{className:a}),z&&N.jsx("div",{className:G,children:N.jsx(F,{src:z.src,grid:z.grid,setRef:h})}),N.jsx("img",{className:H,src:M}),N.jsxs("div",{className:X,children:[N.jsx("div",{className:J,children:R.T(Y.X.YouWin)}),N.jsx("div",{className:r,children:N.jsx(U.t,{value:y})})]})]})},s=t.PA((()=>{const{abstractGame:y,pachinko:L,settings:p,videoElementRect:t,youWin:j}=S.Pj();if(void 0===j.payout)return null;if(L.phase!==u.lj.PuckLanded||void 0===L.landZone)return null;if(!0===p.hideWinOnLowCelebration&&"Small"===j.winLevel)return null;const O=z.ej(j.payout,{currencySymbol:y.currencySymbol});return N.jsx(A,{formattedWinAmount:O,visible:j.showGameResult,winLevel:j.winLevel,pachinkoWallRect:t.rects[B.V.PachinkoWall]})}))},116986:(y,L,p)=>{p.d(L,{t:()=>O});var N=p(64922),t=p(377810),j=p(354707);const z="goldenText--76fee",O=t.memo((function({value:y}){const L=t.useRef(null);return t.useLayoutEffect((()=>{const p=L.current;if(!p)return;const N=p.getContext("2d");return N?j.W(N,y):void 0}),[y]),N.jsx("canvas",{"data-role":"golden-text",className:z,ref:L})}))},354707:(y,L,p)=>{p.d(L,{W:()=>Hy});let N=null;function t(y,L){function p(y,L,p,N){return"number"==typeof p?p:"number"!=typeof N?y:N/L*y}const N=document.createElement("canvas"),t=y.width,j=y.height;N.width=p(t,j,null==L?void 0:L.resizeWidth,null==L?void 0:L.resizeHeight),N.height=p(j,t,null==L?void 0:L.resizeHeight,null==L?void 0:L.resizeWidth);const z=N.getContext("2d");return z?(z.drawImage(y,0,0,t,j,0,0,N.width,N.height),Promise.resolve(N)):Promise.reject(Error("Canvas context not found!"))}function j(y,L=0){return new Promise((p=>{const z=new Image;z.addEventListener("load",(()=>{p(async function(y,L){if(N&&!0)return N(y,L);try{const p=await window.createImageBitmap(y,L);return N=window.createImageBitmap,p}catch(p){return N=t,t(y,L)}}(z))})),z.addEventListener("error",(()=>{L<5&&p(j(y,L+1))})),z.crossOrigin="anonymous",z.src=y}))}const z=p.p+"images/currency1.e3f47cbe.webp",O=p.p+"images/currency10.761fc7d9.webp",h=p.p+"images/currency11.37f2d0ec.webp",m=p.p+"images/currency12.ae91a4b2.webp",k=p.p+"images/currency13.58b182f2.webp",_=p.p+"images/currency14.4f7a935b.webp",W=p.p+"images/currency15.3bcfb810.webp",g=p.p+"images/currency16.df1a01ad.webp",C=p.p+"images/currency17.fc1bb3e9.webp",Q=p.p+"images/currency18.ff584c2e.webp",T=p.p+"images/currency19.ba03164e.webp",i=p.p+"images/currency2.5db3aed9.webp",D=p.p+"images/currency20.289ed62b.webp",w=p.p+"images/currency21.97d80da7.webp",x=p.p+"images/currency22.b0d9af5b.webp",d=p.p+"images/currency23.44818afb.webp",o=p.p+"images/currency24.0fee64f8.webp",U=p.p+"images/currency25.6128728c.webp",I=p.p+"images/currency26.1906d5f6.webp",V=p.p+"images/currency27.2e2ab76d.webp",F=p.p+"images/currency28.efac1308.webp",u=p.p+"images/currency29.4b2ef327.webp",S=p.p+"images/currency3.7d020622.webp",B=p.p+"images/currency30.e941258a.webp",R=p.p+"images/currency31.f860936e.webp",Y=p.p+"images/currency32.e7ccdadc.webp",E=p.p+"images/currency33.5659ad8b.webp",P=p.p+"images/currency34.3d25ba73.webp",l=p.p+"images/currency35.27104fdd.webp",M=p.p+"images/currency36.737a0dd1.webp",f=p.p+"images/currency37.6d39b0b8.webp",a=p.p+"images/currency38.038a0bb1.webp",H=p.p+"images/currency39.a18ed3f7.webp",X=p.p+"images/currency4.992d8ed6.webp",J=p.p+"images/currency40.45960aa7.webp",r=p.p+"images/currency41.068db1f4.webp",G=p.p+"images/currency42.3906b63c.webp",$=p.p+"images/currency43.e00a7b86.webp",q=p.p+"images/currency44.85b489c6.webp",A=p.p+"images/currency45.9aad0dc1.webp",s=p.p+"images/currency46.92e7dd8f.webp",c=p.p+"images/currency47.f5d887cc.webp",K=p.p+"images/currency5.ce908ccf.webp",b=p.p+"images/currency6.3793f21a.webp",n=p.p+"images/currency7.e60fa1dd.webp",v=p.p+"images/currency8.dc19396a.webp",e=p.p+"images/currency9.3f21503e.webp",Z=p.p+"images/lettera.9e63ef7c.webp",yy=p.p+"images/letterb.36f11da2.webp",Ly=p.p+"images/letterc.2665be94.webp",py=p.p+"images/letterd.f01213db.webp",Ny=p.p+"images/lettere.c7c67a38.webp",ty=p.p+"images/letterf.f73b1ab5.webp",jy=p.p+"images/letterg.78978eaf.webp",zy=p.p+"images/letterh.cdac7876.webp",Oy=p.p+"images/letteri.43abd98d.webp",hy=p.p+"images/letterj.bc010617.webp",my=p.p+"images/letterk.d213910e.webp",ky=p.p+"images/letterl.10a07414.webp",_y=p.p+"images/letterm.6c0c88dc.webp",Wy=p.p+"images/lettern.bab8810c.webp",gy=p.p+"images/lettero.db14d5e1.webp",Cy=p.p+"images/letterp.c09c6d35.webp",Qy=p.p+"images/letterq.74c2df6c.webp",Ty=p.p+"images/letterr.fa2d306a.webp",iy=p.p+"images/letters.f6fb592e.webp",Dy=p.p+"images/lettert.5465c41d.webp",wy=p.p+"images/letteru.4e4bb0cb.webp",xy=p.p+"images/letterv.95944b34.webp",dy=p.p+"images/letterw.2d96f43b.webp",oy=p.p+"images/letterx.0451975f.webp",Uy=p.p+"images/lettery.8b9247e7.webp",Iy=p.p+"images/letterz.a14cb092.webp",Vy=p.p+"images/numberssym.4bace05d.webp",Fy=.9,uy=120,Sy={1:{x:0,y:400,width:104,height:200},2:{x:104,y:400,width:148,height:200},3:{x:252,y:400,width:136,height:200},4:{x:383,y:0,width:154,height:200},5:{x:388,y:400,width:147,height:200},6:{x:537,y:400,width:153,height:200},7:{x:213,y:0,width:170,height:200},8:{x:0,y:200,width:155,height:200},9:{x:0,y:0,width:151,height:200},0:{x:537,y:200,width:149,height:200},"+":{x:383,y:200,width:154,height:140,verticalOffset:1.15},"-":{x:383,y:340,width:112,height:56,verticalOffset:2.1},"/":{x:537,y:0,width:153,height:200},x:{x:155,y:200,width:176,height:152},",":{x:151,y:0,width:62,height:74},".":{x:151,y:74,width:62,height:62}},By={$:z,"€":i,"£":S,kr:X,R$:K,Kč:b,"GH¢":n,"฿":v,"₴":e,"¥":O,"S/.":h,"₩":m,元:k,"₣":_,ƒ:W,"₡":g,Pts:C,"₸":Q,"₪":T,"₨":D,"﷼":w,CE:x,"₭":d,"₮":o,"₤":U,CR:I,mBTC:V,"₿":F,Ξ:u,Ł:B,μ:R,$U:Y,ARS$:E,NZ$:P,Sr$:l,mBCH:M,mETH:f,mLTC:a,μBTC:H,"лв.":J,"₹":r,"₺":G,"₽":$,Ƀ:q,"₫":A,zł:s,"₱":c},Ry={A:Z,B:yy,C:Ly,D:py,E:Ny,F:ty,G:jy,H:zy,I:Oy,J:hy,K:my,L:ky,M:_y,N:Wy,O:gy,P:Cy,Q:Qy,R:Ty,S:iy,T:Dy,U:wy,V:xy,W:dy,X:oy,Y:Uy,Z:Iy};function Yy(y){return y in Sy}function Ey(y){return y in By}function Py(y){return y in Ry}const ly={};function My(y){const L=function(y){const L=y.split(""),p=Object.keys(By).sort(((y,L)=>L.length-y.length));return L.reduce(((L,N,t)=>{const j=L.join("").length;if(t<j)return L;const z=p.find((L=>0===y.substring(t,t+L.length).indexOf(L)));return L.push(null!=z?z:N),L}),[]).map((y=>({char:y,image:fy(y)})))}(y),p=L.reduce(((y,{image:L})=>(L&&y.indexOf(L)<0&&y.push(L),y)),[]),N=p.map((y=>{return(L=y)in ly?new Promise((y=>{y(ly[L])})):j(L);var L}));return Promise.all(N).then((y=>{const N=p.reduce(((L,p,N)=>(p in ly||(ly[p]=y[N]),L[p]=y[N],L)),{});return L.map((y=>({char:y.char,bitmap:y.image?N[y.image]:null})))}))}function fy(y){return Ey(y)?By[y]:Py(y)?Ry[y]:Yy(y)?Vy:null}function ay(y){return y.bitmap&&(Ey(y.char)||Py(y.char))?{x:0,y:0,width:y.bitmap.width,height:y.bitmap.height}:y.bitmap&&Yy(y.char)?Sy[y.char]:{x:0,y:0,width:uy,height:0}}function Hy(y,L,p){let N,t=!1;return L&&(N=My(L.replace(/(\u200e)|(\u200f)|(\u2067)|(\u2066)|(\u2069)/g,"")),N.then((L=>{if(t)return;let N=0,j=0;for(const[y,p]of L.entries()){const{width:t,height:z,verticalOffset:O}=ay(p);N+=t*(y===L.length-1?1:Fy),j=Math.max(j,z*(null!=O?O:1))}const z=p?50:0;if(y.canvas.width=N,y.canvas.height=j,y.clearRect(0,0,N,j),p){y.canvas.width+=2*z,y.canvas.height+=2*z;const L=N/j,p=.5*y.canvas.height,t=.5*y.canvas.width,O=y.createRadialGradient(t/L,p,0,t/L,p,Math.min(.5*y.canvas.height,.5*y.canvas.width));y.save(),y.scale(L,1),O.addColorStop(0,"rgba(0, 0, 0, 0.7)"),O.addColorStop(1,"transparent"),y.fillStyle=O,y.fillRect(0,0,y.canvas.width,y.canvas.height),y.restore()}let O=z;for(const p of L){const{x:L,y:N,width:t,height:h,verticalOffset:m}=ay(p),k=j-h*(null!=m?m:1)+z;if(h>0&&p.bitmap)if(Ey(p.char)){const j=.8*t,z=.8*h;y.drawImage(p.bitmap,L,N,t,h,O+j/8,k+z/6,j,z)}else y.drawImage(p.bitmap,L,N,t,h,O,k,t,h);O+=t*Fy}}))),function(){t=!0,y.canvas.width=1,y.canvas.height=1,y.clearRect(0,0,1,1)}}},10660:(y,L,p)=>{p.d(L,{k:()=>i});var N=p(64922),t=p(699695),j=p(525620),z=p(377810),O=p(587698),h=p(116986),m=p(234658),k=p(674833),_=p(977536),W=p(331094),g=p(757069);const C=p.p+"images/godrays.1c8bcf4e.webp",Q=p.p+"images/winbase.bceead1b.webp",T={hologram:"hologram--e730f",winBase:"winBase--61fec",godRays:"godRays--f680a",show:"show--abeb5",disableAnimations:"disableAnimations--1af50",canvas:"canvas--0def7",holoKeyframes:"holoKeyframes--14590",hidden:"hidden--82793",fadingOut:"fadingOut--e48e3",canvasHideKeyframes:"canvasHideKeyframes--612dd",visible:"visible--302cd",canvasShowKeyframes:"canvasShowKeyframes--6a891",mobilePortrait:"mobilePortrait--ff503",dim:"dim--9c56e",hide:"hide--86843"},i=j.PA((function({isMobilePortrait:y=!1}){const L=W.Pj(),{gamePhase:p,phaseTransitions:t,youWin:j,abstractGame:h,references:C,autoTestStore:Q}=L,{phase:T}=p,i=g.Z(T)===k.Q.GameResult,w=!(T===k.Q.MainSlot||t.isTransitionToMain||t.isTransitionToTopUp),x=w||i?void 0:j.payout,d=(null==Q?void 0:Q.isAnimationsDisabled)||!1,[o,U]=function(y,L,p,N){const t=z.useReducer((y=>y+1),0)[1],j=z.useRef(y),O=z.useRef("hidden"),h=!g.Z(p)&&y&&j.current;return z.useEffect((()=>{const p=!(void 0!==j.current||!y),N=!(!j.current||void 0!==y),z=(y,L)=>{(j.current!==y||O.current!==L)&&(j.current=y,O.current=L,t())};if(p||h)z(y,"visible");else if(N){z(j.current,"fadingOut");const y=window.setTimeout((()=>{z(void 0,"hidden")}),L);return()=>{window.clearTimeout(y),z(void 0,"hidden")}}}),[L,t,y,h,N]),[j.current,O.current]}(x,m.qC,y,d),I="Small"===j.winLevel,V=O.ej(null!=o?o:0,{currencySymbol:h.currencySymbol}),F=z.useCallback((y=>{C.setReference(_.C.HologramContainer,y)}),[C]);return N.jsx(D,{hide:w,fadeStatus:U,formattedCurrency:V,isMobilePortrait:y,setHologramContainerRef:F,isSmallPayout:I,disableAnimations:d})})),D=({hide:y,isMobilePortrait:L,fadeStatus:p,formattedCurrency:j,setHologramContainerRef:z,isSmallPayout:O,disableAnimations:m})=>N.jsxs("div",{className:t.A(T.hologram,{[T.mobilePortrait]:L,[T.hide]:y}),ref:z,children:[N.jsx("div",{className:t.A(T.canvas,T[p],{[T.disableAnimations]:m,[T.dim]:O}),children:N.jsx(h.t,{value:j})}),N.jsx("img",{className:T.winBase,src:Q,alt:"winBase",width:"65",height:"25"}),N.jsx("img",{className:t.A(T.godRays,{[T.show]:"visible"===p,[T.disableAnimations]:m}),src:C,alt:"godRays",width:"361",height:"285"})]})},310605:(y,L,p)=>{p.d(L,{V:()=>u});var N=p(64922),t=p(699695),j=p(525620),z=p(377810),O=p(587698);function h(y,L,p,N){const t=L/(1.02*y),j=p.replace("px",""),z=(null==N?void 0:N.replace("px",""))||j;if(Number.isNaN(j)||j.length===p.length)return parseInt(j,2);const O=parseFloat(j),h=parseFloat(z),m=O*t;return Math.min(h,m)}var m=p(674833),k=p(234658),_=p(977536),W=p(331094),g=p(16260),C=p(335908);const Q="infoBar--c9b7c",T="mobilePortrait--457dd",i="shrinkFit--983ed",D="mobileLandscape--d47a7",w="tablet--28005",x="centeredText--e582c",d="scaleAnimation--ce57d",o="separator--3d224",U="text--b33ae",I="left--f64c4",V="right--ac28a",F="hidden--ca5c0",u=j.PA((()=>{const y=W.Pj(),{abstractGame:L,gamePhase:p,mainSlot:j,device:u,mainSlotBetStake:S,references:B,phaseTransitions:R,slotLayout:Y}=y,[E,P]=z.useState(!1),[l,M]=z.useState();z.useEffect((()=>{E!==Y.isMainSlotShrinkFit&&P(Y.isMainSlotShrinkFit)}),[E,P,Y.mainSlotDimensions,Y.isMainSlotShrinkFit]);const f=j.spinMode,a=p.qualified&&p.mainSlotPhase===k.WI.Result,H=O.ej(S.baseBet,{currencySymbol:L.currencySymbol}),X=z.useRef(null),J=z.useRef(null),r=z.useRef(null),G=a?`${C.T(g.X.YouQualifiedWith)} ${H}`:"XXXtreme"===f?C.T(g.X.XXXtremeSpinsActivated):"FeatureBuy"===f?C.T(g.X.FeatureBuyActivated):void 0,$="mobilePortrait"===u.layoutMode,q="mobileLandscape"===u.layoutMode,A="tablet"===u.layoutMode,s=R.isTransitionToMain||p.phase!==m.Q.MainSlot,c=C.T(g.X.Collect),K=C.T(g.X.ToQualify);(function({gameDimensions:y,isHidden:L,infoText:p,leftText:N,rightText:t,infoTextRef:j,leftTextRef:O,rightTextRef:m,gameLoaded:k,setStyle:_}){const W=z.useRef(),{width:g,height:C}=y;z.useEffect((()=>{const y=p?j.current:O.current;null!==y&&(W.current=getComputedStyle(y).fontSize)}),[g,C,p,j,O]),z.useEffect((()=>{if(L||!k)return;const y=document.createElement("canvas").getContext("2d");if(null===y)return;const z=j.current;if(p){if(!z)return;const L=getComputedStyle(z).fontSize;y.font=getComputedStyle(z).font,W.current||(W.current=L);const N=h(y.measureText(p).width,z.offsetWidth,L,W.current);return void(`${N}px`!==L&&_({fontSize:N}))}const g=O.current,C=m.current;if(null===g||null===C)return;const Q=getComputedStyle(g).fontSize,T=getComputedStyle(C).fontSize;y.font=getComputedStyle(g).font;const i=y.measureText(N).width,D=y.measureText(t).width,w=h(i,g.offsetWidth,Q,W.current),x=h(D,C.offsetWidth,`${w}px`,W.current);`${x}px`===Q&&`${x}px`===T||_({fontSize:x})}),[y,p,j,L,N,O,t,m,k,_])})({gameDimensions:L.gameDimensions,isHidden:s,infoText:G,leftText:c,rightText:K,infoTextRef:r,leftTextRef:X,rightTextRef:J,gameLoaded:L.gameLoaded,setStyle:M});const b=z.useCallback((y=>{B.setReference(_.C.InfoBar,y)}),[B]);return N.jsx("div",{ref:b,className:t.A(Q,$&&T,q&&D,A&&w,void 0!==G&&x,a&&d,s&&F,E&&i),children:G?N.jsx("p",{className:t.A(U,x,$&&T),ref:r,style:l,children:G}):N.jsxs(N.Fragment,{children:[N.jsx("p",{className:t.A(U,I,$&&T,q&&D,A&&w,E&&i),ref:X,style:l,children:c}),N.jsx("div",{className:t.A(o,$&&T,q&&D,A&&w,E&&i)}),N.jsx("p",{className:t.A(U,V,$&&T,q&&D,A&&w),ref:J,style:l,children:K})]})})}))},50997:(y,L,p)=>{p.d(L,{H7:()=>_,Sm:()=>k});var N=p(64922),t=p(525620),j=p(377810),z=p(331094),O=p(715907),h=p(704169);const m="info-button",k=({isActive:y,onClick:L,isDesktop:p})=>N.jsx(O.g,{role:m,onClick:L,state:y?"Activated":"Default",type:p?"secondaryGold":"customizable",iconComponent:N.jsx(h.R,{})}),_=t.PA((()=>{const y=z.Pj(),{isDesktop:L}=y.device,p=y.infoPanel.isVisible,t=j.useCallback((()=>{y.infoPanel.setIsVisible(!y.infoPanel.isVisible)}),[y.infoPanel]);return N.jsx(k,{isActive:p,onClick:t,isDesktop:L})}))},484173:(y,L,p)=>{p.d(L,{j:()=>ny});var N=p(64922),t=p(699695),j=p(525620),z=p(377810),O=p(866302),h=p(335908),m=p(16260);const k=p.p+"images/bonuscage.e1e957ec.webp",_=p.p+"images/maxmultipl.70c517ce.webp",W=p.p+"images/threescatt.403c7024.webp",g=p.p+"images/topupcage.0a0f0ba4.webp",C="displayFlex--6c01c",Q="infoPanelWrapper--149e8",T="mobile--0c805",i="infoPanel--1c2dc",D="landscape--ee102",w="buttons--60fb1",x="pages--34f2a",d="page--260dd",o="active--70e30",U="navigation--39297",I="playContainer--08a18",V="payoutList--07410",F="symbolsGradient--ce4c7",u="symbolsWrapper--87ff3",S="symbolImage--4e1ef",B="symbolContainer--f69d1",R="last--a321c",Y="tablet--651d9",E="symbolInformation--6e7ca",P="titleContainer--5807e",l="gamesContainer--8c82d",M="gamesWrapper--70460",f="gamesIcons--7ef92",a="gamesImage--af0db",H="gameMultiplier--2e643",X="bonusBadge--b3d89",J="scatterImage--83090",r="lightVector--85334",G="footerGradient--ab0f1",$="textGradient--cc7be",q="pachinkoPresentsContainer--bcd04",A="presenterImg--ded70",s="pachinkoLogo--372b7",c="cardContainer--7ecd6",K="cardContainerText--a4574",b="cardImageScatter--d093b",n="cardImageTopUp--dad7a",v="winLinesContainer--ded5e",e="winLinesImage--8f03c",Z="arrowImage--d21fd",yy="cardImagePurple--ce0e0",Ly="cardImageGold--86041",py="xxxtremeTitleContainer--5e088",Ny="xxxtremeTextContainer--4ff36",ty="xxxtremeContainer--f0aa9",jy="xxxtremeImage--32545",zy="cardImageXXX--e2e1c",Oy="goldenText--958f0",hy="games--97cfd",my="badge--f2a8c",ky="xxxtreme--49d06",_y="title--6151b",Wy="presents--4029b",gy="cardTitle--ccd42",Cy="symbols--aaf83",Qy="winlines--9a1bd",Ty="text--fed8f",iy="payouts--013e1",Dy="gameTextContainer--3c532",wy=({isMobile:y,isTablet:L})=>N.jsxs("div",{className:t.A(i),children:[N.jsx("div",{className:t.A(P,{[T]:y}),children:N.jsx("span",{className:t.A(_y,hy,{[T]:y}),children:h.T(m.X.GamesTitle)})}),N.jsxs("div",{className:t.A(l,{[T]:y,[Y]:L}),children:[N.jsx("div",{className:t.A(M,{[T]:y}),children:N.jsxs("div",{className:t.A(a,{[T]:y}),children:[N.jsx("img",{src:W,className:t.A(f,{[T]:y}),draggable:"false"}),N.jsxs("div",{className:t.A(Dy,{[T]:y}),children:[N.jsxs("p",{className:t.A(Oy,hy),children:["1. ",h.T(m.X.QualificationTitle)]}),N.jsx("p",{className:Ty,children:h.T(m.X.QualificationContent)})]})]})}),N.jsx("div",{className:t.A(M,{[T]:y}),children:N.jsxs("div",{className:t.A(a,{[T]:y}),children:[N.jsx("img",{src:g,className:t.A(f,{[T]:y}),draggable:"false"}),N.jsxs("div",{className:t.A(Dy,{[T]:y}),children:[N.jsxs("p",{className:t.A(Oy,hy),children:["2. ",h.T(m.X.TopUp)]}),N.jsx("p",{className:Ty,children:h.T(m.X.TopUpContent)})]})]})}),N.jsx("div",{className:t.A(M,{[T]:y}),children:N.jsxs("div",{className:t.A(a,{[T]:y}),children:[N.jsx("img",{src:k,className:t.A(f,{[T]:y}),draggable:"false"}),N.jsxs("div",{className:t.A(Dy,{[T]:y}),children:[N.jsxs("p",{className:t.A(Oy,hy),children:["3. ",h.T(m.X.PachinkoLive)]}),N.jsx("p",{className:Ty,children:N.jsxs("span",{children:[h.T(m.X.PachinkoLiveContent1),N.jsx("img",{src:_,className:H,draggable:"false"}),h.T(m.X.PachinkoLiveContent2)]})})]}),N.jsx("div",{className:t.A(X,{[T]:y,[Y]:L}),children:N.jsx("p",{className:t.A(Oy,my),children:h.T(m.X.Bonus)})})]})})]})]}),xy=p.p+"images/fullrays.74baa3cc.webp",dy=p.p+"images/gamepresen.150d2e5f.webp",oy=p.p+"images/gamepresen.903babbe.webp",Uy=p.p+"images/lightraysm.7dc3e9cd.webp",Iy=p.p+"images/pachinkolo.b318b0f0.webp",Vy=p.p+"images/scattermoc.b8308110.webp",Fy=p.p+"images/topupmock.23f84c17.webp",uy=({isMobile:y,isTablet:L})=>N.jsxs("div",{className:t.A(i),children:[N.jsx("img",{src:y?Uy:xy,className:t.A(r,{[T]:y,[Y]:L}),draggable:"false"}),N.jsx("img",{src:y?oy:dy,className:t.A(A,{[T]:y,[Y]:L}),draggable:"false"}),N.jsxs("div",{className:t.A(q,{[T]:y}),children:[N.jsx("img",{src:Iy,className:t.A(s,{[T]:y}),draggable:"false"}),N.jsx("p",{className:t.A(_y,Wy,{[T]:y,[Y]:L}),children:h.T(m.X.Presents)})]}),N.jsxs("div",{className:t.A(c,{[T]:y,[Y]:L}),children:[N.jsxs("div",{className:t.A(K,{[T]:y}),children:[N.jsx("img",{src:Fy,className:t.A(n,{[T]:y}),draggable:"false"}),N.jsxs("div",{children:[N.jsx("p",{className:t.A(_y,gy,{[T]:y}),children:h.T(m.X.HugeMultipliers)}),N.jsx("p",{className:t.A(Ty,Wy,{[T]:y}),children:h.T(m.X.HugeMultipliersContent)}),N.jsx("div",{hidden:!y,className:$})]})]}),N.jsxs("div",{className:t.A(K,{[T]:y}),children:[N.jsx("img",{src:Vy,className:t.A(b,{[T]:y}),draggable:"false"}),N.jsxs("div",{children:[N.jsx("p",{className:t.A(_y,gy,{[T]:y}),children:h.T(m.X.StickyScatters)}),N.jsx("p",{className:t.A(Ty,Wy,{[T]:y}),children:h.T(m.X.StickyScattersContent)}),N.jsx("div",{hidden:!y,className:t.A($,R)})]})]})]}),N.jsx("div",{hidden:!y,className:G})]});var Sy=p(207941),By=p(890179),Ry=p(424959);const Yy=({symbolPayouts:y,isMobile:L,isTablet:p,firstRow:j})=>N.jsx("div",{className:t.A(B,{[T]:L,[Y]:p,[R]:j}),children:y.map((y=>N.jsxs("div",{children:[N.jsx("div",{className:S,style:{backgroundImage:`url(${By})`,backgroundPosition:y.backgroundPosition}}),N.jsxs("div",{className:V,children:[N.jsxs("div",{className:C,children:[N.jsx("p",{className:Oy,children:"x5"}),N.jsxs("p",{className:t.A(Ty,iy),children:["=",y.payouts[0],"x"]})]}),N.jsxs("div",{className:C,children:[N.jsx("p",{className:Oy,children:"x4"}),N.jsxs("p",{className:t.A(Ty,iy),children:["=",y.payouts[1],"x"]})]}),N.jsxs("div",{className:C,children:[N.jsx("p",{className:Oy,children:"x3"}),N.jsxs("p",{className:t.A(Ty,iy),children:["=",y.payouts[2],"x"]})]})]})]})))}),Ey=({isMobile:y,isTablet:L})=>{const p=[{symbol:"W",payouts:["20","10","5"],backgroundPosition:"6.4em -6.8em"},{symbol:"B",payouts:["20","10","5"],backgroundPosition:"0 -6.8em"},{symbol:"C",payouts:["12","6","2"],backgroundPosition:"12.8em -0.2em"}],j=[{symbol:"A",payouts:["3","1,5","0,6"],backgroundPosition:"25.75em -0.2em"},{symbol:"K",payouts:["2,5","1,3","0,5"],backgroundPosition:"13em -13.2em"},{symbol:"Q",payouts:["2","1","0,4"],backgroundPosition:"-0.25em 6em"},{symbol:"J",payouts:["1,5","0,7","0,3"],backgroundPosition:"19.2em -13.2em"}];return N.jsxs("div",{className:t.A(i),children:[N.jsx("span",{className:t.A(_y,Cy,{[T]:y}),children:Sy.Q(m.X.InfoSymbolsTitle)}),y?N.jsxs("div",{className:u,children:[N.jsx(Yy,{symbolPayouts:p,isMobile:!0,isTablet:!1,firstRow:!0}),N.jsx(Yy,{symbolPayouts:j,isMobile:!0,isTablet:!1})]}):N.jsx(Yy,{symbolPayouts:[...p,...j],isMobile:!1,isTablet:L}),N.jsxs("div",{className:t.A(E,{[T]:y,[Y]:L}),children:[N.jsx("div",{className:S,style:{backgroundImage:`url(${By})`,backgroundPosition:p[0].backgroundPosition}}),N.jsx("p",{className:t.A(Ty,Cy,{[T]:y}),children:h.T(m.X.SymbolsContent)}),N.jsx("div",{hidden:!y,className:F}),N.jsx("div",{className:J,style:{backgroundImage:`url(${Ry})`}})]})]})},Py=p.p+"images/arrow.e5bdb494.svg",ly=p.p+"images/winlinesla.1ebdc882.webp",My=p.p+"images/winlinespo.df91c9f7.webp",fy=({isMobile:y,isTablet:L,isLandscape:p})=>N.jsx("div",{className:t.A(i),children:N.jsxs("div",{className:t.A(v,{[Y]:L},{[T]:y}),children:[N.jsx("span",{className:t.A(_y,Qy,{[T]:y}),children:h.T(m.X.InfoWinLinesTitle)}),N.jsx("img",{src:p?ly:My,alt:"Win Lines",className:t.A(e,{[T]:y,[D]:p}),draggable:"false"}),N.jsx("img",{src:Py,alt:"Arrow",className:t.A(Z,{[D]:p}),draggable:"false"}),N.jsx("span",{className:t.A(Ty,Qy,{[T]:y}),children:h.T(m.X.InfoWinLinesText)})]})}),ay=p.p+"images/bggold.5bcd6fd1.webp",Hy=p.p+"images/bgpurple.6feb2c46.webp",Xy=p.p+"images/scattercol.e2740268.webp",Jy=p.p+"images/scattermul.49e16153.webp",ry=p.p+"images/xxxtremete.3184a509.webp",Gy=({isMobile:y,isTablet:L})=>N.jsxs("div",{className:t.A(i),children:[N.jsxs("div",{className:t.A(py,{[T]:y}),children:[N.jsx("p",{className:t.A(_y,ky,{[T]:y}),children:h.T(m.X.InfoXXXTremeTitle)}),N.jsx("img",{src:ry,className:t.A(jy,{[T]:y}),draggable:"false"})]}),N.jsxs("div",{className:t.A(ty,{[T]:y,[Y]:L}),children:[N.jsxs("div",{className:t.A(yy,{[T]:y}),style:{backgroundImage:`url(${Hy})`},children:[N.jsx("img",{src:Jy,className:t.A(zy,{[T]:y}),draggable:"false"}),N.jsxs("div",{className:t.A(Ny,{[T]:y}),children:[N.jsx("p",{className:t.A(Oy,ky,{[T]:y}),children:h.T(m.X.XXXtremeSpinsTitle)}),N.jsx("p",{className:t.A(Ty,ky,{[T]:y}),children:h.T(m.X.XXXtremeSpinsContent)})]})]}),N.jsxs("div",{className:t.A(Ly,{[T]:y}),style:{backgroundImage:`url(${ay})`},children:[N.jsx("img",{src:Xy,className:t.A(zy,{[T]:y}),draggable:"false"}),N.jsxs("div",{className:t.A(Ny,{[T]:y}),children:[N.jsx("p",{className:t.A(Oy,ky,{[T]:y}),children:h.T(m.X.FeatureBuyTitle)}),N.jsx("p",{className:t.A(Ty,ky,{[T]:y}),children:h.T(m.X.FeatureBuyContent)})]})]})]})]});var $y=p(991924),qy=p(331094),Ay=p(715907),sy=p(235874),cy=p(327299);const Ky=p.p+"images/landscapeb.d01b9669.jpg",by=({onClose:y,onPage:L,view:p,isMobile:j,isLandscape:h,isTablet:m})=>{const k=z.useCallback((async y=>{if(!y||!h)return;const L=new Image;L.style.position="absolute",L.style.width="100%",L.style.height="100%",L.style.zIndex="-1",L.src=Ky,L.onload=()=>{y.prepend(L)}}),[h]),_=z.useCallback((()=>L(-1)),[L]),W=z.useCallback((()=>L(1)),[L]),g={customizable:{midBody:{gradient:"linear-gradient(180deg, #ad8953 10%, #926015 30%, #2C1F0F 100%)",gradientActivated:"linear-gradient(180deg, #ad8953 10%, #926015 30%, #2C1F0F 100%)"}}},C=z.useMemo((()=>[N.jsx(uy,{isMobile:j,isTablet:m}),N.jsx(wy,{isMobile:j,isTablet:m}),N.jsx(Gy,{isMobile:j,isTablet:m}),N.jsx(Ey,{isMobile:j,isTablet:m}),N.jsx(fy,{isMobile:j,isTablet:m,isLandscape:h})]),[h,j,m]),V=z.useCallback((y=>{const N=$y.V.indexOf(p);L(y>N?1:-1)}),[L,p]);return N.jsx("div",{className:t.A(Q,{[T]:j,[D]:h}),style:{backgroundPositionX:{presents:"0%",games:"20%",xxxtreme:"60%",symbols:"90%",winlines:"98%"}[p]},ref:k,"data-role":"info-panel",children:N.jsxs("div",{className:t.A(i),children:[N.jsx(O.A,{style:{height:"100%",width:"100%",position:"absolute",top:0,zIndex:15,overflowY:"hidden"},containerStyle:{height:"100%",width:"100%"},slideStyle:{overflow:"hidden"},axis:"x",enableMouseEvents:!0,resistance:!0,index:$y.V.indexOf(p),onChangeIndex:V,children:C}),N.jsxs("div",{className:t.A(U,{[T]:j}),children:[N.jsx("div",{className:x,children:$y.V.map((y=>N.jsx("span",{className:t.A(d,y===p&&o,{[T]:j})},y)))}),N.jsxs("div",{className:w,children:[N.jsx(Ay.$,{role:"info-panel-previous",onClick:_,iconComponent:N.jsx(sy.M,{}),size:"L",layerStyles:g}),N.jsx("div",{className:t.A(I,{[T]:j}),children:N.jsx(Ay.$,{role:"info-panel-play",onClick:y,label:"button.playNow.uppercase",size:"L",fitWidth:!0,labelPosition:"Inside",layerStyles:g})}),N.jsx(Ay.$,{role:"info-panel-next",onClick:W,iconComponent:N.jsx(cy.x,{}),size:"L",layerStyles:g})]})]})]})})},ny=j.PA((({isMobile:y})=>{const L=qy.Pj(),{view:p,isVisible:t}=L.infoPanel,{isLandscape:j,isTablet:O}=L.device,h=z.useCallback((()=>{L.infoPanel.setIsVisible(!1)}),[L.infoPanel]),m=z.useCallback((y=>{L.infoPanel.setViewFromPage(y)}),[L.infoPanel]);return t?N.jsx(by,{onClose:h,onPage:m,view:p,isMobile:y&&!O,isLandscape:j,isTablet:O}):null}))},597951:(y,L,p)=>{p.d(L,{p:()=>d});var N=p(64922),t=p(699695),j=p(525620),z=p(331094),O=p(207941),h=p(16260),m=p(362709);const k="qualificationTimerContainer--91469",_="doubleEvent--56f4d",W="hidden--edc1d",g="mobilePortrait--01de3",C="shrinkFit--b95bc",Q="tablet--cf390",T="mobileLandscape--e9c8d",i="text--7de81",D="time--1e89e",w="image--7d74a",x="timeContainer--c0667",d=j.PA((()=>{const{continueTopUpPopup:y,qualificationTimer:L,device:p,gamePhase:j,topUpSlot:d,phaseTransitions:o,slotLayout:U}=z.Pj(),I=L.timeRemainingSec<=1&&!L.showInfinityTimer||o.isTransitionToPachinko||d.isLastSpinInProgress;return L.visible?N.jsxs("div",{className:t.A(k,{[g]:p.isPhone&&p.isPortrait,[Q]:p.isTablet,[T]:p.isLandscape&&p.isPhone,[_]:j.hasDoubleAppeared,[W]:I||y.isPopupVisible,[C]:U.isTopUpSlotShrinkFit}),children:[N.jsx("div",{className:t.A(x,{[g]:p.isPhone&&p.isPortrait,[T]:p.isLandscape&&p.isPhone,[C]:U.isTopUpSlotShrinkFit,[Q]:p.isTablet}),children:N.jsx("p",{className:t.A(D,{[g]:p.isPhone&&p.isPortrait,[T]:p.isLandscape&&p.isPhone,[C]:U.isTopUpSlotShrinkFit,[Q]:p.isTablet}),children:L.showInfinityTimer?N.jsx("img",{className:t.A(w,{[g]:p.isPhone&&p.isPortrait,[T]:p.isLandscape&&p.isPhone,[C]:U.isTopUpSlotShrinkFit,[Q]:p.isTablet}),height:30,src:m}):L.timeRemainingSec})}),N.jsx("p",{className:t.A(i,{[g]:p.isPhone&&p.isPortrait,[T]:p.isLandscape&&p.isPhone,[C]:U.isTopUpSlotShrinkFit,[Q]:p.isTablet}),children:O.Q(h.X.NextPachinkoIn)})]}):null}))},376028:(y,L,p)=>{p.d(L,{v:()=>S});var N=p(64922),t=p(699695),j=p(525620),z=p(377810);const O="animatedCounter--f708a",h="previousNumber--d485d",m="disableAnimations--2b013",k="currentNumber--3f387";var _;(function(y){y["Increasing"]="increasing",y["Decreasing"]="decreasing"})(_||(_={}));const W={[_.Increasing]:"increasing--37b2d",[_.Decreasing]:"decreasing--6e768"},g=({count:y,disableAnimations:L})=>{const[p,j]=z.useState({current:0,previous:0});z.useEffect((()=>{p.current!==y&&j({current:y,previous:p.current})}),[p,y]);const g=p.current>p.previous?_.Increasing:_.Decreasing;return N.jsxs("div",{className:t.A(O,W[g]),children:[N.jsx("div",{className:t.A(k,{[m]:L}),children:p.current}),N.jsx("div",{className:t.A(h,{[m]:L}),children:p.previous})]},`animated-count-${p.current}`)};function C(y){return y.gamePhase.qualified}var Q=p(360595),T=p(331094),i=p(335908),D=p(16260),w=p(454342);const x="qualifiedPlayers--6258f",d="playerCount--abdaa",o="qualifiedText--956c6",U="qualifiedPlayerIcon--d68e0",I="lockpick--dd17c",V="qualified--75a97",F="disableAnimations--09c32",u=({playerCount:y,qualified:L,disableAnimations:p})=>N.jsxs("div",{className:x,children:[N.jsx("div",{className:t.A(I,{[V]:L,[F]:p})}),N.jsx("div",{className:d,children:N.jsx(g,{count:y,disableAnimations:p})}),N.jsx(w.m,{className:U}),N.jsx("div",{className:o,children:i.T(D.X.Qualified)})]}),S=j.PA((()=>{const y=T.Pj(),L={playerCount:y.qualifiedPlayers.totalPlayers,qualified:C(y),disableAnimations:Q.C(y)};return N.jsx(u,{...L})}))},577250:(y,L,p)=>{p.d(L,{h:()=>t});var N=p(64922);function t(){return N.jsx("div",{})}},653433:(y,L,p)=>{p.d(L,{q:()=>_});var N=p(64922),t=p(525620),j=p(377810),z=p(228174);const O=.0123;function h(y){return z.GB(y.slotRect.slotContainerRect.w*O,2)}var m=p(331094);const k=y=>{const{className:L,children:p,slotRect:t,isHidden:z,fontSize:O=10}=y,[h,m]=j.useState(null),k=j.useCallback((y=>{m(y)}),[m]);return h&&(h.style.position="absolute",h.style.left=`${t.x}px`,h.style.top=`${t.y}px`,h.style.width=`${t.w}px`,h.style.height=`${t.h}px`),N.jsx("div",{ref:k,className:L,style:{fontSize:`${O}px`,zIndex:1,opacity:z?"0":"100%"},children:p})},_=t.PA((y=>{const L=m.Pj(),p={...y,slotRect:L.slotRect.slotContainerRect,fontSize:h(L)};return N.jsx(k,{...p})}))},291132:(y,L,p)=>{p.d(L,{h:()=>Uy,G:()=>oy});var N=p(64922),t=p(525620),j=p(377810),z=p(170877),O=p(762923),h=p(670723),m=p(707140),k=p(234658),_=p(281249),W=p(674833),g=p(946574),C=p(267851),Q=p(331094),T=p(335908),i=p(16260),D=p(574706),w=p(346160),x=p(827424),d=p(48415),o=p(699695),U=p(212429);const I=j.createContext(null);function V(){const y=j.useContext(I);if(!y)throw new U.U8("SpinButton Context must be provided through SpinButtonContext.Provider");return y}const F="glowAnimation--c2202",u="animating--d6ed2",S=j.memo((()=>{const{state:y}=V(),[L,p]=j.useState(!1);return j.useEffect((()=>()=>{"Activated"===y&&p(!0)}),[y]),N.jsx("div",{"data-role":"spin-button-glow-animation",className:o.A(F,{[u]:L}),onAnimationEnd:()=>{p(!1)}})}));S.displayName="SpinButtonHighlightAnimation";var B=p(447539),R=p(5519);const Y="backPlateContainer--57638",E="inner--f24a2",P=j.memo((({children:y})=>{const{state:L}=V();return N.jsx("div",{className:Y,children:N.jsx("div",{className:E,children:y({buttonState:L})})})}));P.displayName="BackPlateContainer";const l=({props:y,children:L})=>{const{state:p,disableInteractionAnimation:t,timerDuration:z,disableCtaAnimation:O}=y,[h,m]=j.useState(p),[k,_]=j.useState(void 0);j.useEffect((()=>{m(p)}),[p]);const W=j.useMemo((()=>({state:h,setState:m,disableInteractionAnimation:t,timerDuration:z,animationType:k,setAnimationType:_,disableCtaAnimation:O})),[h,t,z,k,O]);return N.jsx(I.Provider,{value:W,children:L})};l.displayName="SpinButtonContextProvider";var M=p(168855);const f={baseRim:"baseRim--951f1",xxl:"xxl--a3ec2",xl:"xl--5466f",lg:"lg--ac7e0",md:"md--6a510",sm:"sm--954ab",xs:"xs--d5cd6",xxs:"xxs--f663e",xxxs:"xxxs--2f758",spinButton:"spinButton--27e1e",badge:"badge--4cbda",icon:"icon--45c2f",baseStroke:"baseStroke--5710f",baseFill:"baseFill--99827",reactiveWrapper:"reactiveWrapper--0d7c0",reactiveBaseStroke:"reactiveBaseStroke--461c9",reactiveBaseFill:"reactiveBaseFill--ca703",label:"label--fb43f",disabled:"disabled--1bfb6",labelContainer:"labelContainer--555b6",smokePattern:"smokePattern--32576",activated:"activated--c69d3"},a=({layerStyles:y,children:L})=>{const{state:p}=V(),t=M.F(["spinButton"],{spinButton:y}),{handlePointerUp:z,handlePointerLeave:O,handlePointerEnter:h,handlePointerDown:m,handleContextMenu:k}=function(){const{state:y,setState:L,setAnimationType:p,disableInteractionAnimation:N,disableCtaAnimation:t}=V(),z="Disabled"===y,O=t||z?void 0:"cta",h=N||z?void 0:"hover";j.useEffect((()=>{p(O)}),[O,p]);const m=j.useCallback((()=>{z||p(h)}),[h,z,p]),k=j.useCallback((()=>{z||p(O)}),[z,p,O]),_=j.useCallback((y=>{z||(L("Default"),window.removeEventListener("pointerup",_),"touch"===y.pointerType&&p(O))}),[z,L,p,O]),W=j.useCallback((y=>{z||(L("Activated"),window.addEventListener("pointerup",_),"touch"===y.pointerType&&p(h))}),[z,L,_,p,h]),g=j.useCallback((y=>{y.preventDefault()}),[]);return{handlePointerDown:W,handlePointerEnter:m,handlePointerLeave:k,handlePointerUp:_,handleContextMenu:g}}();return N.jsx("div",{className:o.A(f.spinButton,{[f.disabled]:"Disabled"===p,[f.activated]:"Activated"===p}),"data-role":"spin-button",onPointerUp:z,onPointerLeave:O,onPointerEnter:h,onPointerDown:m,onContextMenu:k,style:t,children:L})},H="arrows--d98eb",X="disabled--21197",J="spinning--9cdac",r="spinning2--8641f",G=5e3;const $=j.memo((({animationType:y,spinButtonState:L})=>{const p=j.useRef(null),t=j.useId(),z=`top-arrow-${t}`,O=`bottom-arrow-${t}`,{onAnimationEnd:h,animationClass:m}=function({animationType:y,spinButtonState:L}){const p=j.useRef(null),[N,t]=j.useState(!1),{disableInteractionAnimation:z,disableCtaAnimation:O}=V(),h=j.useCallback((()=>{null!==p.current&&clearInterval(p.current)}),[]),{resetAnimation:m,animationClass:k}=function(){const[y,L]=j.useState(J);return{animationClass:y,resetAnimation:()=>{L((y=>y===J?r:J))}}}();return j.useEffect((()=>{"hover"!==y||z||(m(),t(!0),h()),"cta"!==y||O||(p.current=setInterval((()=>{t(!0),m()}),G)),(O&&"cta"===y||"Disabled"===L)&&(h(),t(!1))}),[y,z]),j.useEffect((()=>()=>{h()}),[h]),{onAnimationEnd:()=>{t(!1)},animationClass:N?k:void 0}}({animationType:y,spinButtonState:L});return N.jsx("div",{ref:p,className:o.A(H,m,{[X]:"Disabled"===L}),"data-role":"spin-button-arrows",onAnimationEnd:h,children:N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 109 109",fill:"none",children:[N.jsxs("g",{opacity:".7",children:[N.jsx("path",{fill:`url(#${z})`,d:"m79.91 12.303 9.04 24.674-25.55-1.545 4.145-5.681c-6.032-3.335-14.873-4.402-26.524-3.2-11.65 1.202-20.31 9.206-25.98 24.01.904-15.598 8.178-26.892 21.823-33.88 11.244-5.758 24.38-5.293 39.408 1.397l3.637-5.775Z"}),N.jsx("path",{fill:`url(#${O})`,d:"m24.758 93.185-3.875-23.693 24.45 3.103-4.987 4.965c5.435 4.233 14.002 6.663 25.702 7.29 11.7.629 21.514-5.926 29.44-19.663-3.343 15.264-12.304 25.282-26.883 30.058-12.015 3.935-24.92 1.43-38.716-7.517l-5.13 5.457Z"})]}),N.jsxs("defs",{children:[N.jsxs("linearGradient",{id:z,x1:"14.575",x2:"57.743",y1:"39.457",y2:"19.526",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"white",stopOpacity:"0"}),N.jsx("stop",{offset:"1",stopColor:"white",stopOpacity:".599"})]}),N.jsxs("linearGradient",{id:O,x1:"94.636",x2:"48.513",y1:"75.224",y2:"89.069",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"white",stopOpacity:"0"}),N.jsx("stop",{offset:"1",stopColor:"white",stopOpacity:".604"})]})]})]})})}));$.displayName="SpinButtonArrows";const q="card--8675e",A="left--a19c5",s="hover--abba8",c="cta--156da",K="right--5e6d3",b="#BEBEBE",n="#ffffff",v=5800,e=j.memo((({spinButtonState:y,animationType:L,suitColor:p=b,backgroundColor:t=n})=>{const z=j.useId(),O=`left-filter-${z}`,h=`right-filter-${z}`,m="Disabled"===y?"0.1":"0.25",{onAnimationEnd:k,internalAnimation:_}=function({animationType:y}){const[L,p]=j.useState(void 0),N=j.useCallback((()=>{p(void 0)}),[p]);return j.useEffect((()=>{let L;return"cta"===y?L=window.setInterval((()=>{p("cta")}),v):p(y),()=>{p(void 0),window.clearInterval(L)}}),[y]),j.useMemo((()=>({onAnimationEnd:N,internalAnimation:L})),[L,N])}({animationType:L});return N.jsx("div",{"data-role":"spin-button-cards",className:o.A({[s]:"hover"===_,[c]:"cta"===_}),onAnimationEnd:k,children:N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 108 108",children:[N.jsxs("g",{opacity:m,children:[N.jsxs("g",{className:o.A(q,K),children:[N.jsx("g",{filter:`url(#${h})`,children:N.jsx("path",{fill:t,d:"M53.431 23.511c1.353-2.343 4.302-3.172 6.587-1.853L88.982 38.38c2.285 1.32 3.041 4.288 1.689 6.631L65.567 88.489c-1.352 2.343-4.301 3.172-6.586 1.853L30.018 73.62c-2.285-1.32-3.041-4.288-1.689-6.63L53.431 23.51Z"})}),N.jsx("path",{fill:p,d:"M86.337 40.318c-1.091-.63-2.664-.086-3.76.703.136-1.341-.177-2.977-1.27-3.607-1.575-.91-3.395-.305-4.468 1.553a4.394 4.394 0 0 0-.582 2.48c-.007.425.015.849.066 1.269l1.002 7.41 6.918-2.838a9.026 9.026 0 0 0 1.13-.577 4.404 4.404 0 0 0 1.859-1.744c1.07-1.866.679-3.74-.895-4.65ZM44.187 63.325c-1.092-.63-2.664-.086-3.76.703.136-1.34-.178-2.977-1.27-3.607-1.575-.91-3.395-.305-4.468 1.553a4.393 4.393 0 0 0-.583 2.48 9.21 9.21 0 0 0 .067 1.269l1.002 7.41 6.918-2.837a9.04 9.04 0 0 0 1.13-.578 4.404 4.404 0 0 0 1.858-1.744c1.07-1.866.68-3.74-.894-4.65Z"})]}),N.jsxs("g",{className:o.A(q,A),children:[N.jsx("g",{filter:`url(#${O})`,children:N.jsx("path",{fill:t,d:"M23 30.816C23 28.156 25.14 26 27.778 26h33.444C63.861 26 66 28.156 66 30.816v49.368C66 82.844 63.86 85 61.222 85H27.778C25.139 85 23 82.844 23 80.184V30.816Z"})}),N.jsx("path",{fill:p,d:"M60.122 33.732a2.92 2.92 0 0 0-1.3.302 2.83 2.83 0 0 0 1.081-2.203 2.849 2.849 0 0 0-.862-2.015A2.88 2.88 0 0 0 56.997 29a2.864 2.864 0 0 0-2.894 2.831 2.83 2.83 0 0 0 1.081 2.203 2.94 2.94 0 0 0-1.3-.303 2.837 2.837 0 0 0-2.874 2.593 2.83 2.83 0 0 0 2.403 3.03c.216.048.437.072.659.073a2.827 2.827 0 0 0 2.644-1.742l-.043.256a8.331 8.331 0 0 1-.286 1.503l-.074.232c-.496 1.41-1.513 1.86-1.513 1.86V42h4.394v-.465s-1.017-.448-1.513-1.86a6.387 6.387 0 0 1-.12-.385 9.326 9.326 0 0 1-.24-1.349c-.014-.085-.027-.17-.043-.258a2.835 2.835 0 0 0 2.65 1.742c.222 0 .443-.025.66-.073a2.83 2.83 0 0 0 2.402-3.03 2.837 2.837 0 0 0-2.874-2.592l.006.002ZM28.878 77.268a2.92 2.92 0 0 0 1.3-.302 2.83 2.83 0 0 0-1.081 2.203c.006.759.317 1.484.862 2.015a2.88 2.88 0 0 0 2.044.816 2.864 2.864 0 0 0 2.894-2.831 2.83 2.83 0 0 0-1.081-2.203 2.94 2.94 0 0 0 1.3.303 2.837 2.837 0 0 0 2.874-2.593 2.83 2.83 0 0 0-2.403-3.03 3.078 3.078 0 0 0-.659-.073 2.827 2.827 0 0 0-2.644 1.742l.043-.256c.049-.509.145-1.012.286-1.503l.074-.232c.496-1.41 1.513-1.86 1.513-1.86V69h-4.394v.465s1.017.448 1.513 1.86c.048.14.087.265.12.385.113.443.194.894.24 1.349.014.085.027.17.043.258a2.835 2.835 0 0 0-2.65-1.742c-.222 0-.443.025-.66.073a2.83 2.83 0 0 0-2.402 3.03 2.837 2.837 0 0 0 2.874 2.592l-.006-.002Z"})]})]}),N.jsxs("defs",{children:[N.jsxs("filter",{id:h,width:"71.684",height:"77.938",x:"23.658",y:"17.031",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[N.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),N.jsx("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),N.jsx("feOffset",{}),N.jsx("feGaussianBlur",{stdDeviation:"2"}),N.jsx("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"}),N.jsx("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_26376_152228"}),N.jsx("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_26376_152228",result:"shape"})]}),N.jsxs("filter",{id:O,width:"51",height:"67",x:"19",y:"22",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[N.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),N.jsx("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),N.jsx("feOffset",{}),N.jsx("feGaussianBlur",{stdDeviation:"2"}),N.jsx("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"}),N.jsx("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_26376_152228"}),N.jsx("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_26376_152228",result:"shape"})]})]})]})})}));e.displayName="Cards";const Z="animatedIconContainer--ef6d6",yy=j.memo((({AnimatedElement:y})=>{const{state:L,animationType:p}=V(),t=j.useMemo((()=>"arrows"===y?N.jsx($,{spinButtonState:L,animationType:p}):"cards"===y?N.jsx(e,{spinButtonState:L,animationType:p}):N.jsx(y,{spinButtonState:L,animationType:p})),[y,p,L]);return N.jsx("div",{"data-role":"animated-element-container",className:Z,children:t})}));yy.displayName="SpinButtonAnimatedElement";const Ly="background--132f2",py=({element:y})=>N.jsx("div",{className:Ly,"data-role":"custom-background",children:y}),Ny=j.memo((({iconComponent:y})=>N.jsx("div",{className:f.icon,children:y})));Ny.displayName="SpinButtonIcon";var ty=p(297318),jy=p(228174),zy=p(124315);const Oy=.295,hy=({spinButtonSize:y,labelText:L})=>{const{labelRef:p,labelContainerRef:t,resize:z}=function(y){const L=j.useRef(null),p=j.useRef(null),N=zy.i(),t=j.useCallback((()=>{const y=L.current,N=p.current;if(!y||!(null==N?void 0:N.parentElement))return;y.style.width="",y.style.fontSize="";const t=parseFloat(window.getComputedStyle(y).fontSize),j=N.parentElement.getBoundingClientRect(),z=new ty.I(j.left+j.width/2,j.top+j.height/2),O=j.width*Oy,h=Math.max(j.width,j.height)/2,m=y.getBoundingClientRect(),k=parseFloat(window.getComputedStyle(N).marginTop),_=parseFloat(window.getComputedStyle(N).marginLeft),W=k/2,g=[new ty.I(m.left,m.top-W),new ty.I(m.right,m.top-W),new ty.I(m.right,m.bottom-W),new ty.I(m.left,m.bottom-W)],C=g.reduce(((y,L)=>z.distanceTo(y)>z.distanceTo(L)?y:L),g[0]),Q=(h-_+1)/z.distanceTo(C),T=jy.GB(t*Q,3);y.style.fontSize=`${Math.min(T,O)}px`,y.style.width="100%"}),[]);return j.useEffect((()=>{N&&t()}),[N,t,y]),{labelRef:L,resize:t,labelContainerRef:p}}(y);j.useLayoutEffect((()=>{z()}),[z,L]),j.useEffect((()=>(window.addEventListener("resize",z),()=>{window.removeEventListener("resize",z)})),[]);const{spinButtonLabelRepositioned:O}=w.vL();return N.jsx("div",{className:f.labelContainer,ref:t,children:N.jsx("span",{className:f.label,"data-role":"spin-button-label",style:{whiteSpace:O?"nowrap":"normal",marginBottom:O?"8%":"1%"},ref:p,children:L})})},my="glare--6265d",ky=j.memo((()=>{const y=j.useId(),L=`glare-gradient-${y}`,p=`glare-c-${y}`,t=`glare-d-${y}`,z=`glare-e-${y}`,O=`glare-f-${y}`;return N.jsx("div",{className:my,children:N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 122 122",children:[N.jsx("path",{fill:`url(#${L})`,fillRule:"evenodd",d:"M58 70c43-10 64 24 64-9 0-34-27-61-61-61S0 27 0 61c0 33 16 20 58 9Z",clipRule:"evenodd",opacity:".8"}),N.jsx("g",{filter:`url(#${p})`,children:N.jsx("path",{stroke:`url(#${t})`,d:"M61 117A56 56 0 1 0 61 5a56 56 0 0 0 0 112Z"})}),N.jsx("g",{filter:`url(#${z})`,children:N.jsx("path",{fill:`url(#${O})`,fillRule:"evenodd",d:"M60 0C27 0 0 27 0 60L60 0Z",clipRule:"evenodd"})}),N.jsxs("defs",{children:[N.jsxs("linearGradient",{id:L,x1:"61",x2:"61",y1:"0",y2:"46.1",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#fff",stopOpacity:".7"}),N.jsx("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),N.jsxs("linearGradient",{id:t,x1:"-21.6",x2:"156.9",y1:"-16.9",y2:"98.7",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#fff"}),N.jsx("stop",{offset:".1",stopColor:"#fff",stopOpacity:".6"}),N.jsx("stop",{offset:".2",stopColor:"#fff",stopOpacity:".7"}),N.jsx("stop",{offset:".3",stopColor:"#fff",stopOpacity:"0"}),N.jsx("stop",{offset:".7",stopColor:"#fff",stopOpacity:"0"}),N.jsx("stop",{offset:"1",stopColor:"#fff"})]}),N.jsxs("linearGradient",{id:O,x1:"18.1",x2:"20.8",y1:"17",y2:"19.7",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#FBFFEA",stopOpacity:".8"}),N.jsx("stop",{offset:"1",stopColor:"#F2FFB5",stopOpacity:"0"})]}),N.jsxs("filter",{id:p,width:"114.2",height:"114.2",x:"4",y:"4",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[N.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),N.jsx("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),N.jsx("feGaussianBlur",{result:"effect1_foregroundBlur_21872_12807",stdDeviation:".3"})]}),N.jsxs("filter",{id:z,width:"61.2",height:"61.2",x:"-1",y:"-1",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[N.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),N.jsx("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),N.jsx("feGaussianBlur",{result:"effect1_foregroundBlur_21872_12807",stdDeviation:".3"})]})]})]})})}));ky.displayName="Glare";const _y=({children:y})=>N.jsxs("div",{className:f.reactiveWrapper,"data-role":"spin-button-reactive-wrapper",children:[N.jsx("div",{className:f.reactiveBaseStroke}),N.jsx("div",{className:f.reactiveBaseFill}),y]}),Wy="timerContainer--5b6ef",gy="gradientFill--060dc",Cy="gradientMask--9f64f",Qy=({timerDuration:y})=>N.jsx("div",{className:Wy,"data-role":"spin-disabled-timer",style:{animationDuration:`${y}ms`},children:N.jsxs("svg",{viewBox:"0 0 100 100",children:[N.jsx("foreignObject",{x:"0",y:"0",width:"100",height:"100",children:N.jsx("div",{className:gy})}),N.jsxs("g",{className:Cy,children:[N.jsx("rect",{x:"0",y:"0",width:"100",height:"100"}),N.jsx("path",{d:"M 50 96 a 46 46 0 0 1 0 -92 46 46 0 0 1 0 92",style:{animationDuration:`${y}ms`}})]})]})}),Ty=({size:y,labelText:L,displaySmokePattern:p,icon:t,background:j,AnimatedElement:z})=>{const{state:O,timerDuration:h}=V();return N.jsx("div",{className:o.A(f.baseRim,f[y]),"data-role":"spin-button-rim",children:N.jsx("div",{className:f.baseStroke,"data-role":"spin-button-stroke",children:N.jsxs("div",{className:f.baseFill,children:[h&&N.jsx(Qy,{timerDuration:h}),N.jsxs(_y,{children:[j&&N.jsx(py,{element:j}),p&&N.jsx("div",{className:f.smokePattern}),"Disabled"!==O&&N.jsx(ky,{}),!t&&z&&N.jsx(yy,{AnimatedElement:z}),t?N.jsx(Ny,{iconComponent:t}):N.jsx(hy,{labelText:L,spinButtonSize:y})]})]})})})},iy=j.memo((({size:y,labelText:L=w.Tl("spin.uppercase"),onClick:p,onDisabledClick:t,displaySmokePattern:j,disableInteractionAnimation:z=!1,state:O="Default",layerStyles:h,badgeValue:m=0,icon:k,timerDuration:_,tooltipTranslationKey:W,soundToPlay:g,background:C,AnimatedElement:Q="arrows",BackPlate:T,disableGlowAnimation:i=!1,disableCtaAnimation:D=!1})=>{const o={state:O,disableInteractionAnimation:z,timerDuration:_,disableCtaAnimation:D},{isSmallScreen:U,isMediumScreen:I}=x.Qo(d.Q.size.value);return N.jsx(l,{props:o,children:N.jsxs(a,{layerStyles:h,children:[!!T&&N.jsx(P,{children:({buttonState:y})=>N.jsx(T,{buttonState:y})}),!i&&N.jsx(S,{}),N.jsx(R.N,{isPhone:U,isTablet:I,state:O,onClick:p,onDisabledClick:t,tooltip:W,soundToPlay:g,hideTooltipAfterClick:"Disabled"!==O,buttonContent:N.jsx(Ty,{labelText:L,displaySmokePattern:j,icon:k,size:y,background:C,AnimatedElement:Q}),size:"adjusting"}),m>0&&N.jsx("div",{className:f.badge,children:N.jsx(B.Ex,{value:m,theme:"goldenGradient",scale:Dy[y]})})]})})}));iy.displayName="SpinButton";const Dy={xxl:2.5,xl:2.4,lg:2.1,md:1.9,sm:1.7,xs:1.5,xxs:1.4,xxxs:1.25},wy="SpinButtonContainer--41568";function xy(y){return y===W.Q.TopUpSlot||y===W.Q.Pachinko?m.X9.TopUp:m.X9.Spin}function dy(y){return y===m.X9.TopUp?m.jG:m.wo}const oy=({onSpin:y,disabled:L,buttonType:p,onDisabledClick:t,platform:m})=>{const k=m===z.OD.Desktop?"xl":m===z.OD.Tablet?"md":"xs",[_,W]=j.useState(!1),g=j.useCallback((p=>{const N=O.gN(p),t=h.lu();L&&N?W(!0):!L&&N&&t&&!_&&y("Hotkey")}),[y,L,_]),C=j.useCallback((y=>{O.gN(y)&&W(!1)}),[]),Q=j.useCallback((()=>{y("Click")}),[y]);return j.useEffect((()=>(document.addEventListener("keydown",g),document.addEventListener("keyup",C),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",C)})),[g,C]),N.jsx(iy,{size:k,labelText:T.T(i.X.Spin),onClick:Q,state:L?"Disabled":"Default",layerStyles:dy(p),onDisabledClick:t,displaySmokePattern:!0})},Uy=t.PA((()=>{const y=j.useRef(null),L=Q.Pj(),{abstractGame:p,gamePhase:t,mainSlot:z,topUpSlot:O,sound:h}=L,{phase:m}=t,T=g.f(L),i=C.W(L),w=j.useCallback((y=>{m===W.Q.TopUpSlot?(h.triggerEvent(_.P.ButtonSpinReleaseTopUp),O.spin(y)):(h.triggerEvent(_.P.ButtonSpinRelease),z.spin(y))}),[m,h,O,z]),x=j.useCallback((()=>{void 0!==i&&null!==y.current&&D.v({labelTranslationId:i,rect:y.current.getBoundingClientRect(),AGStore:p,type:k.Ib.SpinButton})}),[p,i]);return N.jsx("div",{className:wy,ref:y,children:N.jsx(oy,{onSpin:w,disabled:T,buttonType:xy(m),onDisabledClick:x,platform:p.platform})})}))},707140:(y,L,p)=>{function N(y,L){return`radial-gradient(57.31% 57.31% at 50% 32.06%, ${y} 0%, ${L} 100%)`}function t(y,L){return`linear-gradient(to top, ${y}, ${L})`}var j;p.d(L,{X9:()=>j,wo:()=>O,jG:()=>z}),function(y){y["Spin"]="SpinButtonType.Spin",y["TopUp"]="SpinButtonType.TopUp"}(j||(j={}));const z={fill:{default:N("#F028D9","#400B34"),hover:N("#F028D9","#5B104E")},stroke:{default:t("#7D0D5B","#AB1EA1")}},O={fill:{default:N("#c4ff00","#1f2d04"),hover:N("#b5ff00","#3a4c12")},stroke:{default:t("#416d03","#85a10f")}}},234535:(y,L,p)=>{p.d(L,{v:()=>O});var N=p(64922),t=p(377810),j=p(715907);const z=y=>{const{onClick:L,enabled:p,activated:t=!1,defaultIcon:z,activatedIcon:O,role:h,tooltip:m,buttonRef:k,onClickDisabled:_,type:W,hideTooltipAfterClick:g=!1,size:C}=y;let Q="Default";p?t&&(Q="Activated"):Q="Disabled";const T="Activated"===Q?O:z;return N.jsx(j.g,{buttonRef:k,role:h,onClick:L,onDisabledClick:_,state:Q,type:W,tooltip:m,iconComponent:null!=T?T:z,size:C,hideTooltipAfterClick:g})},O=t.forwardRef(((y,L)=>N.jsx(z,{...y,buttonRef:L})))},448951:(y,L,p)=>{p.d(L,{vo:()=>D});var N=p(64922),t=p(525620),j=p(377810),z=p(166418),O=p(485163);const h=j.memo((y=>{const{children:L,...p}=y;return N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 38 38",className:O.A.icon,...p,children:N.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 0c10.493 0 19 8.44 19 18.85 0 2.53-.503 4.945-1.415 7.15H32.98a15.433 15.433 0 001.745-7.15c0-8.616-7.04-15.6-15.724-15.6-8.684 0-15.724 6.984-15.724 15.6A15.45 15.45 0 005.019 26H1.415A18.631 18.631 0 010 18.85C0 8.44 8.507 0 19 0zM8.2 11.884c7.42 3.813 11.617 6.202 12.59 7.167 1.46 1.447 1.44 3.813-.041 5.283-1.482 1.47-3.866 1.488-5.325.04-.973-.964-3.381-5.128-7.224-12.49z"})})}));var m=p(234535),k=p(674833),_=p(810156);function W(y){return(y.gamePhase.phase===k.Q.TopUpSlot?y.topUpSlot.isTurboButtonDisabled:y.mainSlot.isTurboButtonDisabled)||_.y(y)}var g=p(267851),C=p(331094),Q=p(16260);const T="turbo-button",i=({visible:y,isTurboModeEnabled:L,onClick:p,isDesktop:t,enabled:j,onClickDisabled:O,disabledTooltip:k})=>{const _=j?t?Q.X.TooltipTurboMode:void 0:k;return y?N.jsx(m.v,{enabled:j,activated:L,role:T,onClick:p,onClickDisabled:O,defaultIcon:L?N.jsx(z.p,{}):N.jsx(h,{}),activatedIcon:N.jsx(z.p,{}),tooltip:_,size:t?"M":"S"}):null},D=t.PA((()=>{const y=C.Pj(),{gamePhase:L,settings:p,device:t}=y,z=j.useCallback((()=>{L.toggleTurboMode()}),[L]),O=j.useCallback((()=>{}),[]),h={visible:p.turboModeAllowed,isTurboModeEnabled:L.isTurboMode,isDesktop:t.isDesktop,onClick:z,enabled:!W(y),disabledTooltip:g.W(y),onClickDisabled:O};return N.jsx(i,{...h})}))},166418:(y,L,p)=>{p.d(L,{p:()=>z});var N=p(64922),t=p(377810),j=p(485163);const z=t.memo((y=>{const{children:L,...p}=y;return N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 38 38",className:j.A.icon,...p,children:N.jsx("path",{d:"M19 0c10.493 0 19 8.44 19 18.85 0 2.53-.503 4.945-1.415 7.15H32.98a15.433 15.433 0 001.745-7.15c0-8.616-7.04-15.6-15.724-15.6-8.684 0-15.724 6.984-15.724 15.6A15.45 15.45 0 005.019 26H1.415A18.631 18.631 0 010 18.85C0 8.44 8.507 0 19 0zm8.7 11.806c-3.814 7.42-6.203 11.617-7.168 12.59-1.447 1.46-3.813 1.44-5.283-.041-1.47-1.482-1.488-3.867-.04-5.326.964-.972 5.128-3.38 12.49-7.223z"})})}))},248116:(y,L,p)=>{p.d(L,{O:()=>W});var N=p(64922),t=p(699695),j=p(525620),z=p(674833),O=p(331094);const h="overlay--88359",m="portrait--0c87b",k={[z.Q.MainSlot]:"mainSlot--8c24b",[z.Q.TopUpSlot]:"topSlot--b85d0",[z.Q.Pachinko]:"pachinko--fc64a"},_=({phase:y,isPortrait:L})=>N.jsx("div",{className:t.A(h,k[y],{[m]:L})}),W=j.PA((()=>{const{gamePhase:{phase:y},device:{layoutMode:L}}=O.Pj();return N.jsx(_,{phase:y,isPortrait:"mobilePortrait"===L})}))},115031:(y,L,p)=>{p.d(L,{Y:()=>m});var N=p(64922),t=p(699695),j=p(837557),z=p(277082);const O="multiplier--eab2a",h="phone--83e62",m=({multiplier:y})=>{if(!y)return null;const L=`${y}`,p=z.calculateCrazyCoinFlipWidthOfMultiplierText(L);return N.jsx("span",{className:t.A(O,{[h]:!j.DS.IS_DESKTOP}),children:N.jsx(z.CrazyCoinFlipMultiplierSVG,{value:L,ignoreFontLoad:!0,width:p,signMargin:1})})}},953845:(y,L,p)=>{p.d(L,{U:()=>R});var N=p(64922),t=p(699695),j=p(525620),z=p(377810),O=p(523219),h=p(101976),m=p(234658),k=p(281249),_=p(674833),W=p(977536),g=p(331094),C=p(16260),Q=p(335908),T=p(574706),i=p(999780),D=p(25581);const w=p.p+"images/xxxtreme.dbfb466e.webp",x="xxxtremeButton--2b3c4",d="background--5acc2",o="label--d1aba",U="disabled--bcd2e",I="active--ecb06",V="text--f2bf2",F="smallFont--d3fdf",u="xxxtreme--50738",S="hidden--7d9c2",B=13,R=j.PA((function(){const{abstractGame:y,mainSlot:L,gamePhase:p,xxxtremeSpin:t,settings:j,references:Q,phaseTransitions:w,sound:x}=g.Pj(),d=z.useRef(null),o=z.useCallback((y=>{Q.setReference(W.C.XXXtremeButton,y)}),[Q]),U=t.isActivateXXXtremeButtonDisabled,I=L.isXXXtremeSpinsActivated,V=I?C.X.DeactivateUppercase:C.X.ActivateUppercase,F=j.enableXXXtremeSpins&&(p.phase===_.Q.MainSlot||w.isTransitionToMain||w.isTransitionToTopUp),u=z.useCallback((()=>{t.isBalanceTooLowForXXXtremeSpin&&null!==d.current?T.v({rect:d.current.getBoundingClientRect(),labelTranslationId:C.X.BalanceTooLow,AGStore:y,type:m.Ib.LowBalance}):U||(O.W0.useLiteMobileDrawer()?t.toggle(N.jsx(i.y,{children:N.jsx(h.Q,{})})):t.toggle(N.jsx(D.y,{scrollableStyle:{height:"100%",overflow:"scroll",WebkitOverflowScrolling:"touch"},children:N.jsx(h.Q,{})})))}),[y,t,U]),S=z.useCallback((()=>{x.triggerEvent(k.P.ButtonActivateXtreme,"press")}),[x]),B=z.useCallback((()=>{x.triggerEvent(k.P.ButtonActivateXtreme,"release")}),[x]);return N.jsx(Y,{buttonRef:d,setButtonContainerRef:o,active:I,disabled:U,onClick:u,onPointerDown:S,onPointerUp:B,label:V,visible:F})})),Y=({active:y,buttonRef:L,disabled:p,onClick:j,onPointerDown:z,onPointerUp:O,label:h,setButtonContainerRef:m,visible:k})=>{const _=Q.T(h).length>=B;return N.jsxs("div",{className:t.A(x,!k&&S),"data-role":"xxxtreme-button",ref:m,children:[N.jsxs("div",{ref:L,className:t.A(o,y&&I,p&&U),onClick:j,onPointerDown:z,onPointerUp:O,children:[N.jsx("div",{className:t.A(V,_&&F),children:Q.T(h)}),N.jsx("img",{src:w,className:u,alt:"XXXtreme",draggable:"false"})]}),N.jsx("div",{className:t.A(d)})]})}},101976:(y,L,p)=>{p.d(L,{Q:()=>zy,X:()=>Oy});var N=p(64922),t=p(699695),j=p(525620),z=p(377810),O=p(587698);function h(y,L){const p=y.filter((y=>y.enabled));return Math.max(...p.map((y=>O.ej(y.value).toString().length)))+(L.length>1?L.length/3:0)}var m=p(234658),k=p(281249),_=p(331094),W=p(16260),g=p(335908),C=p(207941),Q=p(574706),T=p(715907),i=p(491317),D=p(5519);const w="#843B05",x="#3F1C02",d="#C39547",o="#7E6330",U=["Default","Promo","CallToAction","Hovered","PromoHovered","CallToAction2"];function I(y,L,p="Default",t){const j="Activated"===L?t?`url(#${t})`:w:d,z="Activated"===L?x:o;return N.jsxs(N.Fragment,{children:[N.jsx("g",{filter:`url(#${y})`,children:N.jsx("path",{d:"Small"===p?"M25 2.95691C25 2.55306 24.546 2.31584 24.2145 2.54646L2.59003 17.5895C2.30407 17.7885 2.30407 18.2115 2.59002 18.4105L24.2145 33.4535C24.546 33.6842 25 33.4469 25 33.0431V2.95691Z":"M36 3.869a1 1 0 0 0-1.555-.833L4.248 23.168a1 1 0 0 0 0 1.664l30.197 20.132A1 1 0 0 0 36 44.132V3.869Z",fill:j})}),N.jsx("path",{d:"Small"===p?"M24.5 2.95691L2.87556 18L24.5 33.0431L24.5 2.95691Z":"M35.5 3.869a.5.5 0 0 0-.777-.417L4.525 23.584a.5.5 0 0 0 0 .832l30.198 20.131a.5.5 0 0 0 .777-.415V3.869Z",stroke:z})]})}function V(y,L="Default"){return N.jsx("path",{d:"Small"===L?"M25 2.95691C25 2.55306 24.546 2.31584 24.2145 2.54646L2.59003 17.5895C2.30407 17.7885 2.30407 18.2115 2.59002 18.4105L24.2145 33.4535C24.546 33.6842 25 33.4469 25 33.0431V2.95691Z":"M36 3.869a1 1 0 0 0-1.555-.833L4.248 23.168a1 1 0 0 0 0 1.664l30.197 20.132A1 1 0 0 0 36 44.132V3.869Z",fill:`url(#${y})`})}function F(y,L,p="Default"){return N.jsx("path",{d:"Small"===p?"M24.5 2.95691L2.87556 18L24.5 33.0431L24.5 2.95691Z":"M35.5 3.869a.5.5 0 0 0-.777-.417L4.525 23.584a.5.5 0 0 0 0 .832l30.198 20.131a.5.5 0 0 0 .777-.415V3.869Z",fill:`url(#${y})`,stroke:`url(#${L})`})}const u=({state:y,size:L="Default",customizable:p})=>{var t,j,O,h,m,k,_,W,g,C,Q,T,i,D,w,x,d,o,u,S,B,R,Y,E,P,l,M,f,a,H,X,J,r,G,$,q,A,s,c,K,b,n;const v=z.useId(),e=z.useId(),Z=z.useId(),yy=z.useId(),Ly=z.useId(),py=z.useId(),Ny=z.useId(),ty=z.useId(),jy=z.useId(),zy=z.useId(),Oy=z.useId(),hy=z.useId(),my=z.useId(),ky=z.useId(),_y=z.useId(),Wy=z.useId(),gy=z.useId(),Cy=z.useId(),Qy=z.useId(),Ty=z.useId(),iy=z.useId(),Dy=z.useId(),wy=z.useId(),xy=z.useId(),dy=z.useId(),oy=z.useId(),Uy={Default:V((null===(t=null==p?void 0:p.mainBody)||void 0===t?void 0:t.Default)?wy:v),Disabled:F((null===(j=null==p?void 0:p.mainBody)||void 0===j?void 0:j.Disabled)?oy:e,Z),Activated:I(yy,"Activated",void 0,(null===(O=null==p?void 0:p.mainBody)||void 0===O?void 0:O.Activated)&&dy),Hovered:V((null===(h=null==p?void 0:p.mainBody)||void 0===h?void 0:h.Hovered)?xy:jy),Promo:V(Ly),PromoActive:I(py,"PromoActive"),CallToAction:V(Ny),CallToAction2:V(ty),PromoHovered:V(zy)},Iy={Default:V((null==p?void 0:p.mainBody.Default)?wy:v,"Small"),Disabled:F((null==p?void 0:p.mainBody.Disabled)?oy:e,Z,"Small"),Activated:I(yy,"Activated","Small",(null===(m=null==p?void 0:p.mainBody)||void 0===m?void 0:m.Activated)&&dy),Hovered:V((null===(k=null==p?void 0:p.mainBody)||void 0===k?void 0:k.Hovered)?xy:jy,"Small"),Promo:V(Ly,"Small"),PromoActive:I(py,"PromoActive","Small"),CallToAction:V(Ny,"Small"),CallToAction2:V(ty,"Small"),PromoHovered:V(zy,"Small")},Vy={Default:(null===(_=null==p?void 0:p.outerStroke)||void 0===_?void 0:_.Default)?_y:hy,Disabled:(null===(W=null==p?void 0:p.outerStroke)||void 0===W?void 0:W.Disabled)?Cy:hy,Activated:(null===(g=null==p?void 0:p.outerStroke)||void 0===g?void 0:g.Activated)?gy:hy,Hovered:(null===(C=null==p?void 0:p.outerStroke)||void 0===C?void 0:C.Hovered)?Wy:hy,Promo:hy,PromoActive:hy,CallToAction:hy,CallToAction2:hy,PromoHovered:hy},Fy={Default:(null===(Q=null==p?void 0:p.innerStroke)||void 0===Q?void 0:Q.Default)?Qy:my,Disabled:(null===(T=null==p?void 0:p.innerStroke)||void 0===T?void 0:T.Disabled)?Dy:my,Activated:(null===(i=null==p?void 0:p.innerStroke)||void 0===i?void 0:i.Activated)?iy:my,Hovered:(null===(D=null==p?void 0:p.innerStroke)||void 0===D?void 0:D.Hovered)?Ty:my,Promo:my,PromoActive:my,CallToAction:my,CallToAction2:my,PromoHovered:my},uy=U.includes(y),Sy="Small"===L;return N.jsxs("svg",{width:"Small"===L?"28":"40",height:"Small"===L?"36":"48",viewBox:"Small"===L?"0 0 28 36":"0 0 40 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[N.jsxs(N.Fragment,{children:[N.jsx("path",{d:Sy?"M23.6434 1.72555C24.638 1.03369 26 1.74537 26 2.95691V33.0431C26 34.2546 24.638 34.9663 23.6434 34.2744L2.01896 19.2314C1.16108 18.6346 1.1611 17.3654 2.01896 16.7686L23.6434 1.72555Z":"M33.89 2.204C35.22 1.318 37 2.271 37 3.87v40.26c0 1.598-1.78 2.55-3.11 1.665L3.694 25.664a2 2 0 0 1 0-3.328L33.891 2.204Z",fill:`url(#${hy})`,stroke:`url(#${Vy[y]})`,strokeWidth:"2"}),N.jsx("path",{d:Sy?"M23.9289 2.136C24.592 1.67476 25.5 2.14922 25.5 2.95691V33.0431C25.5 33.8508 24.592 34.3252 23.9289 33.864L2.30449 18.8209C1.73258 18.423 1.73258 17.5769 2.30449 17.1791L23.9289 2.136Z":"M34.168 2.62c.997-.664 2.332.05 2.332 1.249V44.13c0 1.199-1.335 1.913-2.332 1.249L3.97 25.248a1.5 1.5 0 0 1 0-2.496L34.168 2.62Z",stroke:`url(#${Fy[y]})`}),Sy?Iy[y]:Uy[y],uy&&N.jsx("path",{d:Sy?"M25 2.95691C25 2.55306 24.546 2.31584 24.2145 2.54646L2.59003 17.5895C2.30407 17.7885 2.30407 18.2115 2.59002 18.4105L24.2145 33.4535C24.546 33.6842 25 33.4469 25 33.0431V2.95691Z":"M36 3.869a1 1 0 0 0-1.555-.833L4.248 23.168a1 1 0 0 0 0 1.664l30.197 20.132A1 1 0 0 0 36 44.132V3.869Z",fill:`url(#${ky})`,fillOpacity:"0.5"}),N.jsx("path",{d:Sy?"M13.5 16.6875H20.5V19.3125H13.5V16.6875Z":"M20 22.125h10v3.75H20v-3.75Z",fill:"#FEF0CC",opacity:"Disabled"===y?".4":"1"})]}),N.jsxs("defs",{children:[N.jsxs("linearGradient",{id:hy,x1:"24",y1:"49",x2:"24.576",y2:"-10.995",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#AA5D0B"}),N.jsx("stop",{offset:".162",stopColor:"#EBC573"}),N.jsx("stop",{offset:".266",stopColor:"#D3923F"}),N.jsx("stop",{offset:".361",stopColor:"#D69847"}),N.jsx("stop",{offset:".492",stopColor:"#E3B866"}),N.jsx("stop",{offset:".671",stopColor:"#E09D1C"}),N.jsx("stop",{offset:"1",stopColor:"#F0ECBA"})]}),N.jsx("linearGradient",{id:_y,x1:"24",y1:"49",x2:"24.576",y2:"-10.995",gradientUnits:"userSpaceOnUse",transform:null===(w=null==p?void 0:p.outerStroke)||void 0===w?void 0:w.gradientTransform,children:null===(d=null===(x=null==p?void 0:p.outerStroke)||void 0===x?void 0:x.Default)||void 0===d?void 0:d.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:Wy,x1:"24",y1:"49",x2:"24.576",y2:"-10.995",gradientUnits:"userSpaceOnUse",transform:null===(o=null==p?void 0:p.outerStroke)||void 0===o?void 0:o.gradientTransform,children:null===(S=null===(u=null==p?void 0:p.outerStroke)||void 0===u?void 0:u.Hovered)||void 0===S?void 0:S.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:gy,x1:"24",y1:"49",x2:"24.576",y2:"-10.995",gradientUnits:"userSpaceOnUse",transform:null===(B=null==p?void 0:p.outerStroke)||void 0===B?void 0:B.gradientTransform,children:null===(Y=null===(R=null==p?void 0:p.outerStroke)||void 0===R?void 0:R.Activated)||void 0===Y?void 0:Y.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:Cy,x1:"24",y1:"49",x2:"24.576",y2:"-10.995",gradientUnits:"userSpaceOnUse",transform:null===(E=null==p?void 0:p.outerStroke)||void 0===E?void 0:E.gradientTransform,children:null===(l=null===(P=null==p?void 0:p.outerStroke)||void 0===P?void 0:P.Disabled)||void 0===l?void 0:l.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsxs("linearGradient",{id:Oy,x1:"24",y1:"49",x2:"24.576",y2:"-10.995",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#AA5D0B"}),N.jsx("stop",{offset:".162",stopColor:"#EBC573"}),N.jsx("stop",{offset:".266",stopColor:"#D3923F"}),N.jsx("stop",{offset:".361",stopColor:"#D69847"}),N.jsx("stop",{offset:".492",stopColor:"#E3B866"}),N.jsx("stop",{offset:".671",stopColor:"#E09D1C"}),N.jsx("stop",{offset:"1",stopColor:"#F0ECBA"})]}),N.jsx("linearGradient",{id:Qy,x1:"24",y1:"49",x2:"24.576",y2:"-10.995",gradientUnits:"userSpaceOnUse",transform:null===(M=null==p?void 0:p.innerStroke)||void 0===M?void 0:M.gradientTransform,children:null===(a=null===(f=null==p?void 0:p.innerStroke)||void 0===f?void 0:f.Default)||void 0===a?void 0:a.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:Ty,x1:"24",y1:"49",x2:"24.576",y2:"-10.995",gradientUnits:"userSpaceOnUse",transform:null===(H=null==p?void 0:p.innerStroke)||void 0===H?void 0:H.gradientTransform,children:null===(J=null===(X=null==p?void 0:p.innerStroke)||void 0===X?void 0:X.Hovered)||void 0===J?void 0:J.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:iy,x1:"24",y1:"49",x2:"24.576",y2:"-10.995",gradientUnits:"userSpaceOnUse",transform:null===(r=null==p?void 0:p.innerStroke)||void 0===r?void 0:r.gradientTransform,children:null===($=null===(G=null==p?void 0:p.innerStroke)||void 0===G?void 0:G.Activated)||void 0===$?void 0:$.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:Dy,x1:"24",y1:"49",x2:"24.576",y2:"-10.995",gradientUnits:"userSpaceOnUse",transform:null===(q=null==p?void 0:p.innerStroke)||void 0===q?void 0:q.gradientTransform,children:null===(s=null===(A=null==p?void 0:p.innerStroke)||void 0===A?void 0:A.Disabled)||void 0===s?void 0:s.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsxs("linearGradient",{id:my,x1:"33.407",y1:"29.77",x2:"-.064",y2:"29.77",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#F8E39B"}),N.jsx("stop",{offset:".268",stopColor:"#EFC558"}),N.jsx("stop",{offset:".5",stopColor:"#F8E39B"}),N.jsx("stop",{offset:".75",stopColor:"#EFC558"}),N.jsx("stop",{offset:"1",stopColor:"#876A27"})]}),N.jsxs("linearGradient",{id:v,x1:"34.5",y1:"22.842",x2:"4",y2:"22.842",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#622E04"}),N.jsx("stop",{offset:".992",stopColor:"#291201"})]}),N.jsxs("linearGradient",{id:e,x1:"35.192",y1:"3.2",x2:"35.192",y2:"45.046",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#251101"}),N.jsx("stop",{offset:"1",stopColor:"#291201"})]}),N.jsxs("linearGradient",{id:Z,x1:"3.065",y1:"46",x2:"3.065",y2:"2.173",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#1E1D1A"}),N.jsx("stop",{offset:"1",stopColor:"#3D3D3D"})]}),N.jsxs("filter",{id:yy,x:"2.803",y:"1.867",width:"34.197",height:"44.266",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[N.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),N.jsx("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),N.jsx("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),N.jsx("feOffset",{dx:"1",dy:"1"}),N.jsx("feGaussianBlur",{stdDeviation:"2"}),N.jsx("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),N.jsx("feColorMatrix",{values:"0 0 0 0 0.0833333 0 0 0 0 0.0362153 0 0 0 0 0.00138889 0 0 0 0.7 0"}),N.jsx("feBlend",{in2:"shape",result:"effect1_innerShadow_75_819"}),N.jsx("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),N.jsx("feOffset",{dx:"-1",dy:"-1"}),N.jsx("feGaussianBlur",{stdDeviation:"2"}),N.jsx("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),N.jsx("feColorMatrix",{values:"0 0 0 0 0.0823529 0 0 0 0 0.0352941 0 0 0 0 0 0 0 0 0.7 0"}),N.jsx("feBlend",{in2:"effect1_innerShadow_75_819",result:"effect2_innerShadow_75_819"})]}),N.jsxs("linearGradient",{id:Ly,x1:"19.5",y1:"2.823",x2:"19.5",y2:"46",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#CAA453"}),N.jsx("stop",{offset:"1",stopColor:"#80510B"})]}),N.jsxs("filter",{id:py,x:"2.803",y:"1.867",width:"34.197",height:"44.266",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[N.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),N.jsx("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),N.jsx("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),N.jsx("feOffset",{dx:"1",dy:"1"}),N.jsx("feGaussianBlur",{stdDeviation:"2"}),N.jsx("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),N.jsx("feColorMatrix",{values:"0 0 0 0 0.0833333 0 0 0 0 0.0362153 0 0 0 0 0.00138889 0 0 0 0.7 0"}),N.jsx("feBlend",{in2:"shape",result:"effect1_innerShadow_729_12377"}),N.jsx("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),N.jsx("feOffset",{dx:"-1",dy:"-1"}),N.jsx("feGaussianBlur",{stdDeviation:"2"}),N.jsx("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),N.jsx("feColorMatrix",{values:"0 0 0 0 0.0823529 0 0 0 0 0.0352941 0 0 0 0 0 0 0 0 0.7 0"}),N.jsx("feBlend",{in2:"effect1_innerShadow_729_12377",result:"effect2_innerShadow_729_12377"})]}),N.jsxs("linearGradient",{id:Ny,x1:"16.5",y1:"0.822907",x2:"16.5",y2:"44",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#EFC558"}),N.jsx("stop",{offset:"1",stopColor:"#80510B"})]}),N.jsxs("linearGradient",{id:ty,x1:"19.5",y1:"3.2",x2:"19.5",y2:"45.046",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#FB360A"}),N.jsx("stop",{offset:"1",stopColor:"#9B2006"})]}),N.jsxs("linearGradient",{id:jy,x1:"34.5",y1:"22.842",x2:"4",y2:"22.842",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#834412"}),N.jsx("stop",{offset:".992",stopColor:"#5A2A06"})]}),N.jsxs("linearGradient",{id:zy,x1:"19.5",y1:"2.823",x2:"19.5",y2:"46",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#D6B97A"}),N.jsx("stop",{offset:"1",stopColor:"#AF6F0F"})]}),N.jsx("linearGradient",{id:wy,x1:"34.5",y1:"22.842",x2:"4",y2:"22.842",gradientUnits:"userSpaceOnUse",children:null===(c=null==p?void 0:p.mainBody.Default)||void 0===c?void 0:c.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:xy,x1:"34.5",y1:"22.842",x2:"4",y2:"22.842",gradientUnits:"userSpaceOnUse",children:null===(K=null==p?void 0:p.mainBody.Hovered)||void 0===K?void 0:K.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:dy,x1:"34.5",y1:"22.842",x2:"4",y2:"22.842",gradientUnits:"userSpaceOnUse",children:null===(b=null==p?void 0:p.mainBody.Activated)||void 0===b?void 0:b.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:oy,x1:"34.5",y1:"22.842",x2:"4",y2:"22.842",gradientUnits:"userSpaceOnUse",children:null===(n=null==p?void 0:p.mainBody.Disabled)||void 0===n?void 0:n.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsxs("linearGradient",{id:ky,x1:"26",y1:"2",x2:"25.5",y2:"46",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#fff",stopOpacity:".7"}),N.jsx("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]})]})]})};function S(y,L,p="Default"){return N.jsx("path",{d:"Small"===p?"M3.5 2.957 25.124 18 3.5 33.043V2.957Z":"M4.5 3.869a.5.5 0 0 1 .777-.417l30.198 20.132a.5.5 0 0 1 0 .832L5.277 44.547a.5.5 0 0 1-.777-.415V3.869Z",fill:`url(#${y})`,stroke:`url(#${L})`})}function B(y,L,p="Default",t){const j="Activated"===L?t?`url(#${t})`:w:d,z="Activated"===L?x:o;return N.jsxs(N.Fragment,{children:[N.jsx("g",{filter:`url(#${y})`,children:N.jsx("path",{d:"Small"===p?"M3 2.957a.5.5 0 0 1 .786-.41L25.41 17.59a.5.5 0 0 1 0 .82L3.786 33.453a.5.5 0 0 1-.786-.41V2.957Z":"M4 3.869a1 1 0 0 1 1.555-.833l30.197 20.132a1 1 0 0 1 0 1.664L5.555 44.964A1 1 0 0 1 4 44.132V3.869Z",fill:j})}),N.jsx("path",{d:"Small"===p?"M3.5 2.957 25.124 18 3.5 33.043V2.957Z":"M4.5 3.869a.5.5 0 0 1 .777-.417l30.198 20.132a.5.5 0 0 1 0 .832L5.277 44.547a.5.5 0 0 1-.777-.415V3.869Z",stroke:z})]})}function R(y,L="Default"){return N.jsx("path",{d:"Small"===L?"M3 2.957a.5.5 0 0 1 .786-.41L25.41 17.59a.5.5 0 0 1 0 .82L3.786 33.453a.5.5 0 0 1-.786-.41V2.957Z":"M4 3.86863C4 3.06993 4.89015 2.59354 5.5547 3.03657L35.7519 23.1681C36.3457 23.5639 36.3457 24.4363 35.7519 24.8322L5.5547 44.9636C4.89015 45.4067 4 44.9303 4 44.1316V3.86863Z",fill:`url(#${y})`})}const Y=({state:y,size:L="Default",customizable:p})=>{var t,j,O,h,m,k,_,W,g,C,Q,T,i,D,w,x,d,o,I,V,F,u,Y,E,P,l,M,f,a,H,X,J,r,G,$,q,A,s,c,K,b,n,v,e,Z,yy,Ly;const py=U.includes(y),Ny="Small"===L,ty=z.useId(),jy=z.useId(),zy=z.useId(),Oy=z.useId(),hy=z.useId(),my=z.useId(),ky=z.useId(),_y=z.useId(),Wy=z.useId(),gy=z.useId(),Cy=z.useId(),Qy=z.useId(),Ty=z.useId(),iy=z.useId(),Dy=z.useId(),wy=z.useId(),xy=z.useId(),dy=z.useId(),oy=z.useId(),Uy=z.useId(),Iy=z.useId(),Vy=z.useId(),Fy=z.useId(),uy=z.useId(),Sy=z.useId(),By=z.useId(),Ry={Default:R((null===(t=null==p?void 0:p.mainBody)||void 0===t?void 0:t.Default)?Fy:ty),Disabled:S((null===(j=null==p?void 0:p.mainBody)||void 0===j?void 0:j.Disabled)?By:jy,zy),Activated:B(Oy,"Activated",void 0,(null===(O=null==p?void 0:p.mainBody)||void 0===O?void 0:O.Activated)&&Sy),Hovered:R((null===(h=null==p?void 0:p.mainBody)||void 0===h?void 0:h.Hovered)?uy:Wy),Promo:R(hy),PromoActive:B(my,"PromoActive"),CallToAction:R(ky),CallToAction2:R(_y),PromoHovered:R(gy)},Yy={Default:R((null==p?void 0:p.mainBody.Default)?Fy:ty,"Small"),Disabled:S((null==p?void 0:p.mainBody.Disabled)?By:jy,zy,"Small"),Activated:B(Oy,"Activated","Small",(null===(m=null==p?void 0:p.mainBody)||void 0===m?void 0:m.Activated)&&Sy),Hovered:R((null===(k=null==p?void 0:p.mainBody)||void 0===k?void 0:k.Hovered)?uy:Wy,"Small"),Promo:R(hy,"Small"),PromoActive:B(my,"PromoActive","Small"),CallToAction:R(ky,"Small"),CallToAction2:R(_y,"Small"),PromoHovered:R(gy,"Small")},Ey={Default:(null===(_=null==p?void 0:p.outerStroke)||void 0===_?void 0:_.Default)?Dy:Qy,Disabled:(null===(W=null==p?void 0:p.outerStroke)||void 0===W?void 0:W.Disabled)?dy:Qy,Activated:(null===(g=null==p?void 0:p.outerStroke)||void 0===g?void 0:g.Activated)?xy:Qy,Hovered:(null===(C=null==p?void 0:p.outerStroke)||void 0===C?void 0:C.Hovered)?wy:Qy,Promo:Qy,PromoActive:Qy,CallToAction:Qy,CallToAction2:Qy,PromoHovered:Qy},Py={Default:(null===(Q=null==p?void 0:p.innerStroke)||void 0===Q?void 0:Q.Default)?oy:Ty,Disabled:(null===(T=null==p?void 0:p.innerStroke)||void 0===T?void 0:T.Disabled)?Vy:Ty,Activated:(null===(i=null==p?void 0:p.innerStroke)||void 0===i?void 0:i.Activated)?Iy:Ty,Hovered:(null===(D=null==p?void 0:p.innerStroke)||void 0===D?void 0:D.Hovered)?Uy:Ty,Promo:Ty,PromoActive:Ty,CallToAction:Ty,CallToAction2:Ty,PromoHovered:Ty};return N.jsxs("svg",{width:Ny?"28":"40",height:Ny?"36":"48",viewBox:Ny?"0 0 28 36":"0 0 40 48",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-role":"triangle-plus-svg",children:[N.jsxs(N.Fragment,{children:[N.jsx("path",{d:Ny?"M4.357 1.726C3.362 1.034 2 1.746 2 2.956v30.087c0 1.212 1.362 1.923 2.357 1.231L25.98 19.231a1.5 1.5 0 0 0 0-2.462L4.357 1.726Z":"M6.1094 2.20442C4.78029 1.31834 3 2.27113 3 3.86852V44.1315C3 45.7289 4.7803 46.6817 6.1094 45.7956L36.3066 25.6641C37.4941 24.8725 37.4941 23.1275 36.3066 22.3359L6.1094 2.20442Z",fill:`url(#${Qy})`,stroke:`url(#${Ey[y]})`,strokeWidth:"2"}),N.jsx("path",{d:Ny?"M4.071 2.136a1 1 0 0 0-1.571.82v30.087a1 1 0 0 0 1.571.821l21.625-15.043a1 1 0 0 0 0-1.642L4.07 2.136Z":"M5.83205 2.62044C4.83522 1.95589 3.5 2.67048 3.5 3.86852V44.1315C3.5 45.3295 4.83522 46.0441 5.83205 45.3796L36.0293 25.2481C36.9199 24.6543 36.9199 23.3457 36.0293 22.7519L5.83205 2.62044Z",stroke:`url(#${Py[y]})`}),Ny?Yy[y]:Ry[y],py&&N.jsx("path",{d:Ny?"M3 2.957a.5.5 0 0 1 .786-.41L25.41 17.59a.5.5 0 0 1 0 .82L3.786 33.453a.5.5 0 0 1-.786-.41V2.957Z":"M4 3.86863C4 3.06993 4.89015 2.59354 5.5547 3.03657L35.7519 23.1681C36.3457 23.5639 36.3457 24.4363 35.7519 24.8322L5.5547 44.9636C4.89015 45.4067 4 44.9303 4 44.1316V3.86863Z",fill:`url(#${iy})`,fillOpacity:"0.5"}),N.jsx("path",{d:Ny?"M12.313 16.688v-2.625H9.687v2.624H7.063v2.625h2.625v2.625h2.624v-2.625h2.626v-2.625h-2.626Z":"M17.875 22.125V18.375H14.125L14.125 22.125H10.375V25.875H14.125L14.125 29.625H17.875V25.875H21.625V22.125H17.875Z",fill:"#FEF0CC",opacity:"Disabled"===y?".4":"1"})]}),N.jsxs("defs",{children:[N.jsxs("linearGradient",{id:Qy,x1:"16",y1:"49",x2:"15.4244",y2:"-10.9945",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#AA5D0B"}),N.jsx("stop",{offset:"0.161945",stopColor:"#EBC573"}),N.jsx("stop",{offset:"0.266017",stopColor:"#D3923F"}),N.jsx("stop",{offset:"0.361014",stopColor:"#D69847"}),N.jsx("stop",{offset:"0.492138",stopColor:"#E3B866"}),N.jsx("stop",{offset:"0.670549",stopColor:"#E09D1C"}),N.jsx("stop",{offset:"1",stopColor:"#F0ECBA"})]}),N.jsx("linearGradient",{id:Dy,x1:"16",y1:"49",x2:"15.4244",y2:"-10.9945",gradientUnits:"userSpaceOnUse",transform:null===(w=null==p?void 0:p.outerStroke)||void 0===w?void 0:w.gradientTransform,children:null===(d=null===(x=null==p?void 0:p.outerStroke)||void 0===x?void 0:x.Default)||void 0===d?void 0:d.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:wy,x1:"16",y1:"49",x2:"15.4244",y2:"-10.9945",gradientUnits:"userSpaceOnUse",transform:null===(o=null==p?void 0:p.outerStroke)||void 0===o?void 0:o.gradientTransform,children:null===(V=null===(I=null==p?void 0:p.outerStroke)||void 0===I?void 0:I.Hovered)||void 0===V?void 0:V.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:xy,x1:"16",y1:"49",x2:"15.4244",y2:"-10.9945",gradientUnits:"userSpaceOnUse",transform:null===(F=null==p?void 0:p.outerStroke)||void 0===F?void 0:F.gradientTransform,children:null===(Y=null===(u=null==p?void 0:p.outerStroke)||void 0===u?void 0:u.Activated)||void 0===Y?void 0:Y.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:dy,x1:"16",y1:"49",x2:"15.4244",y2:"-10.9945",gradientUnits:"userSpaceOnUse",transform:null===(E=null==p?void 0:p.outerStroke)||void 0===E?void 0:E.gradientTransform,children:null===(l=null===(P=null==p?void 0:p.outerStroke)||void 0===P?void 0:P.Disabled)||void 0===l?void 0:l.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsxs("linearGradient",{id:Cy,x1:"16",y1:"49",x2:"15.4244",y2:"-10.9945",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#AA5D0B"}),N.jsx("stop",{offset:"0.161945",stopColor:"#EBC573"}),N.jsx("stop",{offset:"0.266017",stopColor:"#D3923F"}),N.jsx("stop",{offset:"0.361014",stopColor:"#D69847"}),N.jsx("stop",{offset:"0.492138",stopColor:"#E3B866"}),N.jsx("stop",{offset:"0.670549",stopColor:"#E09D1C"}),N.jsx("stop",{offset:"1",stopColor:"#F0ECBA"})]}),N.jsx("linearGradient",{id:oy,x1:"16",y1:"49",x2:"15.4244",y2:"-10.9945",gradientUnits:"userSpaceOnUse",transform:null===(M=null==p?void 0:p.innerStroke)||void 0===M?void 0:M.gradientTransform,children:null===(a=null===(f=null==p?void 0:p.innerStroke)||void 0===f?void 0:f.Default)||void 0===a?void 0:a.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:Uy,x1:"16",y1:"49",x2:"15.4244",y2:"-10.9945",gradientUnits:"userSpaceOnUse",transform:null===(H=null==p?void 0:p.innerStroke)||void 0===H?void 0:H.gradientTransform,children:null===(J=null===(X=null==p?void 0:p.innerStroke)||void 0===X?void 0:X.Hovered)||void 0===J?void 0:J.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:Iy,x1:"16",y1:"49",x2:"15.4244",y2:"-10.9945",gradientUnits:"userSpaceOnUse",transform:null===(r=null==p?void 0:p.innerStroke)||void 0===r?void 0:r.gradientTransform,children:null===($=null===(G=null==p?void 0:p.innerStroke)||void 0===G?void 0:G.Activated)||void 0===$?void 0:$.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:Vy,x1:"16",y1:"49",x2:"15.4244",y2:"-10.9945",gradientUnits:"userSpaceOnUse",transform:null===(q=null==p?void 0:p.innerStroke)||void 0===q?void 0:q.gradientTransform,children:null===(s=null===(A=null==p?void 0:p.innerStroke)||void 0===A?void 0:A.Disabled)||void 0===s?void 0:s.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsxs("linearGradient",{id:Ty,x1:"6.59286",y1:"29.7705",x2:"40.0643",y2:"29.7705",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#F8E39B"}),N.jsx("stop",{offset:"0.267728",stopColor:"#EFC558"}),N.jsx("stop",{offset:"0.5",stopColor:"#F8E39B"}),N.jsx("stop",{offset:"0.75",stopColor:"#EFC558"}),N.jsx("stop",{offset:"1",stopColor:"#876A27"})]}),N.jsxs("linearGradient",{id:ty,x1:"5.5",y1:"22.8421",x2:"36",y2:"22.8421",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#622E04"}),N.jsx("stop",{offset:"0.991667",stopColor:"#291201"})]}),N.jsxs("linearGradient",{id:jy,x1:"4.80779",y1:"3.19992",x2:"4.80779",y2:"45.0458",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#251101"}),N.jsx("stop",{offset:"1",stopColor:"#291201"})]}),N.jsxs("linearGradient",{id:zy,x1:"36.9351",y1:"46",x2:"36.9351",y2:"2.17304",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#1E1D1A"}),N.jsx("stop",{offset:"1",stopColor:"#3D3D3D"})]}),N.jsxs("filter",{id:Oy,x:"3",y:"1.86694",width:"34.1973",height:"44.2661",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[N.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),N.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),N.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),N.jsx("feOffset",{dx:"1",dy:"1"}),N.jsx("feGaussianBlur",{stdDeviation:"2"}),N.jsx("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),N.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.0833333 0 0 0 0 0.0362153 0 0 0 0 0.00138889 0 0 0 0.7 0"}),N.jsx("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_75_247"}),N.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),N.jsx("feOffset",{dx:"-1",dy:"-1"}),N.jsx("feGaussianBlur",{stdDeviation:"2"}),N.jsx("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),N.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.0823529 0 0 0 0 0.0352941 0 0 0 0 0 0 0 0 0.7 0"}),N.jsx("feBlend",{mode:"normal",in2:"effect1_innerShadow_75_247",result:"effect2_innerShadow_75_247"})]}),N.jsxs("linearGradient",{id:hy,x1:"20.5",y1:"2.823",x2:"20.5",y2:"46",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#CAA453"}),N.jsx("stop",{offset:"1",stopColor:"#80510B"})]}),N.jsxs("filter",{id:my,x:"3",y:"1.867",width:"34.197",height:"44.266",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[N.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),N.jsx("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),N.jsx("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),N.jsx("feOffset",{dx:"1",dy:"1"}),N.jsx("feGaussianBlur",{stdDeviation:"2"}),N.jsx("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),N.jsx("feColorMatrix",{values:"0 0 0 0 0.0833333 0 0 0 0 0.0362153 0 0 0 0 0.00138889 0 0 0 0.7 0"}),N.jsx("feBlend",{in2:"shape",result:"effect1_innerShadow_729_12319"}),N.jsx("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),N.jsx("feOffset",{dx:"-1",dy:"-1"}),N.jsx("feGaussianBlur",{stdDeviation:"2"}),N.jsx("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),N.jsx("feColorMatrix",{values:"0 0 0 0 0.0823529 0 0 0 0 0.0352941 0 0 0 0 0 0 0 0 0.7 0"}),N.jsx("feBlend",{in2:"effect1_innerShadow_729_12319",result:"effect2_innerShadow_729_12319"})]}),N.jsxs("linearGradient",{id:ky,x1:"16.5",y1:"0.822907",x2:"16.5",y2:"44",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#EFC558"}),N.jsx("stop",{offset:"1",stopColor:"#80510B"})]}),N.jsxs("linearGradient",{id:_y,x1:"20.5",y1:"3.2",x2:"20.5",y2:"45.046",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#FB360A"}),N.jsx("stop",{offset:"1",stopColor:"#9B2006"})]}),N.jsxs("linearGradient",{id:Wy,x1:"5.5",y1:"22.842",x2:"36",y2:"22.842",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#834412"}),N.jsx("stop",{offset:".992",stopColor:"#5A2A06"})]}),N.jsxs("linearGradient",{id:gy,x1:"20.5",y1:"2.823",x2:"20.5",y2:"46",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#D6B97A"}),N.jsx("stop",{offset:"1",stopColor:"#AF6F0F"})]}),N.jsx("linearGradient",{id:Fy,x1:"5.5",y1:"22.8421",x2:"36",y2:"22.8421",gradientUnits:"userSpaceOnUse",transform:null===(c=null==p?void 0:p.mainBody)||void 0===c?void 0:c.gradientTransform,children:null===(b=null===(K=null==p?void 0:p.mainBody)||void 0===K?void 0:K.Default)||void 0===b?void 0:b.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:uy,x1:"5.5",y1:"22.8421",x2:"36",y2:"22.8421",gradientUnits:"userSpaceOnUse",transform:null===(n=null==p?void 0:p.mainBody)||void 0===n?void 0:n.gradientTransform,children:null===(v=null==p?void 0:p.mainBody.Hovered)||void 0===v?void 0:v.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:Sy,x1:"5.5",y1:"22.8421",x2:"36",y2:"22.8421",gradientUnits:"userSpaceOnUse",transform:null===(e=null==p?void 0:p.mainBody)||void 0===e?void 0:e.gradientTransform,children:null===(Z=null==p?void 0:p.mainBody.Activated)||void 0===Z?void 0:Z.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsx("linearGradient",{id:By,x1:"5.5",y1:"22.8421",x2:"36",y2:"22.8421",gradientUnits:"userSpaceOnUse",transform:null===(yy=null==p?void 0:p.mainBody)||void 0===yy?void 0:yy.gradientTransform,children:null===(Ly=null==p?void 0:p.mainBody.Disabled)||void 0===Ly?void 0:Ly.map((y=>N.jsx("stop",{offset:y.offset,stopColor:y.stopColor},y.stopColor)))}),N.jsxs("linearGradient",{id:iy,x1:"14",y1:"2",x2:"14.5",y2:"46",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"white",stopOpacity:"0.7"}),N.jsx("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})]})]})]})},E="baseButtonContainer--d3dd7",P=z.memo((({state:y,isPhone:L,isTablet:p,onClick:t,type:j,customizable:O})=>{const[h,m]=z.useState(!1),[k,_]=z.useState(!1),W="Disabled"===y,g=!p&&!L,C=z.useCallback((()=>{!W&&g&&m(!0)}),[W,g]),Q=z.useCallback((()=>{W||(_(!1),t())}),[W,t]),T=z.useCallback((()=>{W||_(!0)}),[W]),i=L||p?"Small":"Default",w="plus"===j?Y:u,x=function(y){switch(y){case"Default":case"Disabled":case"Activated":return y;default:return"Default"}}(y);return N.jsx("div",{className:E,onPointerEnter:C,onPointerLeave:()=>{m(!1)},onPointerDown:T,onPointerUp:Q,children:N.jsx(D.S,{role:`triangle-button-${j}`,isPhone:L,isTablet:p,state:x,size:"adjusting",buttonContent:N.jsx(w,{state:l({state:y,isClicked:k,isHovered:h}),size:i,customizable:O})})})}));function l({state:y,isClicked:L,isHovered:p}){if("Disabled"===y)return"Disabled";if("Default"===y){if(L)return"Activated";if(p)return"Hovered"}if("Promo"===y){if(L)return"PromoActive";if(p)return"PromoHovered"}return"CallToAction"===y&&p?"CallToAction2":y}P.displayName="TriangleButton";const M=p.p+"images/multiplier.70c55359.webp",f=p.p+"images/pachinko.0f3b1210.webp",a=p.p+"images/pachinko3.6d8f1a95.webp",H=p.p+"images/xxxtreme.3aba6323.webp",X="xxxtremeSpinDialog--104a3",J="tablet--fe72a",r="landscape--55030",G="phone--9a77f",$="portrait--7b3f4",q="title--13100",A="titleText--303a0",s="titleImage--1b02b",c="close--dd21c",K="spinOptions--c7b30",b="separator--c4e53",n="spinOptionBorder--9d807",v="spinOption--85092",e="bonus--f69cb",Z="betStakeSelector--15e9d",yy="stakePicker--18190",Ly="betStake--8c9c8",py="baseBet--1ed1e",Ny="list--32e16",ty="button--18d66",jy="disabled--478b4",zy=j.PA((()=>{var y,L,p,t;const{device:j,xxxtremeSpin:g,mainSlotBetStake:C,abstractGame:T,settings:i,sound:D}=_.Pj(),w=z.useCallback((()=>{g.activate(),D.triggerEvent(k.P.ButtonXxxtremeSpinsActivate,"release")}),[g,D]),x=z.useCallback((()=>{g.onFeatureBuyClick(),D.triggerEvent(k.P.ButtonFeatureBuyBuy,"release")}),[g,D]),d=z.useCallback((()=>{g.decreaseXXXtremeSpinBetStake(),D.triggerEvent(k.P.ButtonXxxtremeSpinsDecrease,"release")}),[g,D]),o=z.useCallback((()=>{g.increaseXXXtremeSpinBetStake(),D.triggerEvent(k.P.ButtonXxxtremeSpinsIncrease,"release")}),[g,D]),U=z.useCallback((()=>{g.decreaseFeatureBuyBetStake(),D.triggerEvent(k.P.ButtonFeatureBuyDecrease,"release")}),[g,D]),I=z.useCallback((()=>{g.increaseFeatureBuyBetStake(),D.triggerEvent(k.P.ButtonFeatureBuyIncrease,"release")}),[g,D]),V=z.useCallback((()=>{g.closeDrawer(),D.triggerEvent(k.P.ButtonActivateXtremeClose,"release")}),[g,D]),F=z.useCallback((y=>{!g.isFeatureBuyButtonActive&&g.isDrawerOpen&&Q.v({labelTranslationId:W.X.BalanceTooLow,rect:y.getBoundingClientRect(),AGStore:T,type:m.Ib.XXXtremeDialog})}),[T,g]),u=z.useCallback((({spinMode:y,type:L,buttonRef:p})=>{var N,t,j,z;const O="XXXtreme"===y?g.canIncreaseXXXtremeStake:g.canIncreaseFeatureBuyStake,h="XXXtreme"===y?null!==(t=null===(N=C.xxxtremeBetStakes[g.xxxtremeSpinBetStakeIndex+1])||void 0===N?void 0:N.value)&&void 0!==t?t:0:null!==(z=null===(j=C.featureBuyBetStakes[g.featureBuySpinBetStakeIndex+1])||void 0===j?void 0:j.value)&&void 0!==z?z:0;let k=W.X.MaxBetReached;O||(h>i.tableBetMaxLimit?k=W.X.TableBetMaxLimitReached:0!==h&&(k=W.X.BalanceTooLow)),Q.v({labelTranslationId:"decrease"===L?W.X.MinBetReached:k,rect:p.getBoundingClientRect(),AGStore:T,type:m.Ib.XXXtremeDialog})}),[T,C,g,i.tableBetMaxLimit]),S=O.ej(null!==(L=null===(y=C.xxxtremeBetStakes[g.xxxtremeSpinBetStakeIndex])||void 0===y?void 0:y.value)&&void 0!==L?L:0,{maximumDecimalCount:2}),B=O.ej(C.baseBetStakes[g.xxxtremeSpinBetStakeIndex],{maximumDecimalCount:2}),R=O.ej(null!==(t=null===(p=C.featureBuyBetStakes[g.featureBuySpinBetStakeIndex])||void 0===p?void 0:p.value)&&void 0!==t?t:0,{maximumDecimalCount:2}),Y=O.ej(C.baseBetStakes[g.featureBuySpinBetStakeIndex],{maximumDecimalCount:2}),E=z.useMemo((()=>h(C.featureBuyBetStakes,T.currencySymbol)),[C.featureBuyBetStakes,T.currencySymbol]),P=z.useMemo((()=>h(C.xxxtremeBetStakes,T.currencySymbol)),[C.xxxtremeBetStakes,T.currencySymbol]);return N.jsx(Oy,{isPhone:j.isPhone,isTablet:j.isTablet,isLandscape:j.isLandscape,currencySymbol:T.currencySymbol,onXXXtremeActivateClick:w,onFeatureBuyClick:x,onDecreaseXXXtreme:d,onIncreaseXXXtreme:o,onDecreaseFeatureBuy:U,onIncreaseFeatureBuy:I,onClose:j.isDesktop?V:void 0,xxxtremeSpinBetStake:S,xxxtremeSpinBaseBetStake:B,featureBuyBetStake:R,featureBuyBaseBetStake:Y,canDecreaseXXXtremeStake:g.canDecreaseXXXtremeStake,canIncreaseXXXtremeStake:g.canIncreaseXXXtremeStake,isXXXtremeButtonActive:g.isXXXtremeButtonActive,canDecreaseFeatureBuyStake:g.canDecreaseFeatureBuyStake,canIncreaseFeatureBuyStake:g.canIncreaseFeatureBuyStake,isFeatureBuyButtonActive:g.isFeatureBuyButtonActive,isFeatureBuyEnabled:i.enableFeatureBuy,checkIfBalanceSufficientForFeatureBuy:F,onDisabledBetSelectorClick:u,featureBetLength:E,xxxtremeBetLength:P})})),Oy=({isPhone:y,isTablet:L,isLandscape:p,currencySymbol:j,onXXXtremeActivateClick:O,onFeatureBuyClick:h,onDecreaseXXXtreme:m,onIncreaseXXXtreme:k,onDecreaseFeatureBuy:_,onIncreaseFeatureBuy:Q,onClose:D,xxxtremeSpinBetStake:w,xxxtremeSpinBaseBetStake:x,featureBuyBetStake:d,featureBuyBaseBetStake:o,canDecreaseXXXtremeStake:U,canIncreaseXXXtremeStake:I,isXXXtremeButtonActive:V,canDecreaseFeatureBuyStake:F,canIncreaseFeatureBuyStake:u,isFeatureBuyButtonActive:S,isFeatureBuyEnabled:B,featureBetLength:R,xxxtremeBetLength:Y,checkIfBalanceSufficientForFeatureBuy:E,onDisabledBetSelectorClick:P})=>{const l=z.useRef(null),zy=z.useCallback((()=>{E&&null!==l.current&&E(l.current)}),[E]),Oy=Math.max(Y,R,4);return N.jsxs("div",{className:t.A(X,y&&G,L&&J,p?r:$),children:[D&&N.jsx("div",{className:c,children:N.jsx(T.$,{iconComponent:N.jsx(i.b,{}),onClick:D,type:"secondaryGold",size:"XXS"})}),N.jsxs("div",{className:q,children:[N.jsx("div",{className:A,children:g.T(W.X.InfoXXXTremeTitle)}),N.jsx("img",{src:H,alt:"XXXTREME",className:s,draggable:"false"})]}),N.jsxs("div",{className:K,children:[N.jsx("div",{className:n,children:N.jsxs("div",{className:v,"data-role":"xxxtreme-spins",children:[N.jsxs("div",{className:Ny,children:[N.jsxs("div",{children:[N.jsx("img",{src:f,alt:"Pachinko",style:{width:"11.2em",height:"11em"},draggable:"false"}),N.jsx("span",{children:g.T(W.X.XxxtremeScatter)})]}),N.jsxs("div",{style:{whiteSpace:"nowrap"},children:[N.jsx("img",{src:M,alt:"Multiplier",style:{width:"11em",height:"9em"},draggable:"false"}),N.jsx("span",{children:g.T(W.X.XxxtremeMoreMultipliers)})]})]}),N.jsxs("div",{className:Z,children:[N.jsx(hy,{type:"decrease",onClick:m,disabled:!U,isPhone:y,isTablet:L,spinMode:"XXXtreme",onDisabledBetSelectorClick:P}),N.jsxs("div",{className:Ly,"data-role":"base-stake",children:[N.jsx("span",{children:g.T(W.X.PriceUppercase)}),N.jsxs("strong",{className:yy,style:{"--currencyWidth":Oy},children:[j,w]})]}),N.jsx(hy,{type:"increase",onClick:k,disabled:!I,isPhone:y,isTablet:L,spinMode:"XXXtreme",onDisabledBetSelectorClick:P})]}),N.jsxs("span",{className:py,children:[C.Q(W.X.BaseBet),": ",N.jsxs("strong",{children:[j,x]})]}),N.jsx("button",{type:"button",className:t.A(ty,!V&&jy),onClick:O,children:C.Q(W.X.Activate)})]})}),N.jsx("div",{className:t.A(b,!p&&$)}),B?N.jsx("div",{className:n,children:N.jsxs("div",{className:t.A(v,e),"data-role":"feature-buy",children:[N.jsx("div",{className:Ny,children:N.jsxs("div",{style:{flexFlow:"column",textAlign:"center"},children:[N.jsx("img",{src:a,alt:"Pachinko 3",style:{width:"33.8em",height:"18em",marginBottom:"-3em"},draggable:"false"}),N.jsx("span",{style:{whiteSpace:"nowrap"},children:g.T(W.X.XxxtremeBonusGameTicket)})]})}),N.jsxs("div",{className:Z,children:[N.jsx(hy,{type:"decrease",onClick:_,disabled:!F,isPhone:y,isTablet:L,spinMode:"FeatureBuy",onDisabledBetSelectorClick:P}),N.jsxs("div",{className:Ly,"data-role":"base-stake",children:[N.jsx("span",{children:g.T(W.X.PriceUppercase)}),N.jsxs("strong",{className:yy,style:{"--currencyWidth":Oy},children:[j,d]})]}),N.jsx(hy,{type:"increase",onClick:Q,disabled:!u,isPhone:y,isTablet:L,spinMode:"FeatureBuy",onDisabledBetSelectorClick:P})]}),N.jsxs("span",{className:py,children:[C.Q(W.X.BaseBet),": ",N.jsxs("strong",{"data-role":"base-bet",children:[j,o]})]}),N.jsx("div",{ref:l,onClick:zy,children:N.jsx("button",{type:"button",className:t.A(ty,!S&&jy),onClick:h,children:C.Q(W.X.Buy)})})]})}):null]})]})},hy=({type:y,onClick:L,disabled:p,isPhone:t,isTablet:j,onDisabledBetSelectorClick:O,spinMode:h})=>{const m=z.useRef(null),k=z.useCallback((()=>{p&&O&&null!==m.current&&O({buttonRef:m.current,spinMode:h,type:y})}),[p,O,h,y]);return N.jsx("div",{ref:m,onClick:k,children:N.jsx(P,{isPhone:t,isTablet:j,onClick:L,type:"increase"===y?"plus":"minus",state:p?"Disabled":"Default"})})}},42782:(y,L,p)=>{p.d(L,{p:()=>_});var N=p(64922),t=p(170877),j=p(346160),z=p(439895),O=p(335908),h=p(528981),m=p(99210);function k(y,L){let p=y;return void 0===y&&(p=L.rawConfig?{volatilityIndex:z.$(L).volatilityIndex()}:{volatilityIndex:0}),p}const _={HelpComponentListCreator:async(y,L,{customConfig:z,currencySymbol:m,gameTheme:_})=>{const{GameObjective:W,GameRules:g,Payouts:C,PlaceBets:Q,ReturnToPlayer:T,ShortcutKeys:i}=await p.e(41619).then(p.bind(p,489035)),{AutoplayChapter:D}=await p.e(50967).then(p.bind(p,321502)),w=k(z,L),x="false"!==L.rawConfig.enable_XXXtreme_spins,d="false"!==L.rawConfig.enable_feature_buy,o="false"!==L.rawConfig.turbo_spin_enabled,U=L.rawConfig.game_sub_translation_key,I=y===t.OD.Desktop,V=!I&&L.useRedesignedDrawerHelp();return[{id:"GameObjective",title:O.T("help.gameObjective.title"),content:N.jsx(W,{helpSubTranslateKey:U})},{id:"GameRules",title:O.T("help.gameRules.title"),content:N.jsx(g,{platform:y,currencySymbol:m,xxxtremeSpinsEnabled:x,featureBuyEnabled:d,maxTableLimit:L.maxTableLimit(),helpSubTranslateKey:U})},{id:"Payouts",title:O.T("help.payouts.title"),content:N.jsx(C,{settings:L,currencySymbol:m,helpSubTranslateKey:U,isDesktop:I})},{id:"ReturnToPlayer",title:O.T("help.returnToPlayer.title"),content:N.jsx(T,{xxxtremeSpinsEnabled:x,featureBuyEnabled:d,isHelpRedesigned:V,volatilityIndex:w.volatilityIndex})},{id:"PlaceBets",title:O.T("help.placeBets.title"),content:N.jsx(Q,{platform:y,settings:L,currencySymbol:m,turboEnabled:o})},h.t.LiveSupport,{id:h.t.AutoplayApi,title:O.T("help.autoplay3.title"),content:N.jsx(D,{currencySymbol:m,limitsEnabled:L.isUKGC(),platform:y,availableRounds:L.autoplayApiRounds(),isLandscape:!1,isRtl:j.sU(),gameTheme:_,buttonType:"customizable"})},h.t.Chat,h.t.Tipping,h.t.GameNumber,h.t.Sound,h.t.GameHistory,h.t.SettingsWithoutSideBets,h.t.DepositAndWithdraw,h.t.ResponsibleGaming,h.t.InformazioniAams,h.t.ErrorHandling,h.t.DisconnectionPolicy,h.t.AutomatedDecision,h.t.MoreGames,h.t.MultiGamePlay,h.t.Home,{id:h.t.ShortcutKeys,title:O.T("help.shortcutKeys.title"),content:N.jsx(i,{helpSubTranslateKey:U})}]},HelpCreator:async({settings:y,currencySymbol:L})=>{const{GameObjective:j,GameRules:z,Payouts:h,PlaceBets:_,ReturnToPlayer:W,ShortcutKeys:g}=await p.e(41619).then(p.bind(p,489035)),C=k(void 0,y),Q=y.DeviceSupport.PLATFORM,T="false"!==y.rawConfig.enable_XXXtreme_spins,i="false"!==y.rawConfig.enable_feature_buy,D="false"!==y.rawConfig.turbo_spin_enabled,w=y.rawConfig.game_sub_translation_key,x=Q===t.OD.Desktop,d=!x&&y.useRedesignedDrawerHelp();return{overrideDefaultChapters:{[m.C.Autoplay]:{chapterProps:{buttonType:"customizable"}},[m.C.ShortcutKeys]:{content:N.jsx(g,{helpSubTranslateKey:w})}},customChapters:{gameDetails:[{chapters:[{id:"GameObjective",title:O.T("help.gameObjective.title"),content:N.jsx(j,{helpSubTranslateKey:w})},{id:"GameRules",title:O.T("help.gameRules.title"),content:N.jsx(z,{platform:Q,currencySymbol:L,xxxtremeSpinsEnabled:T,featureBuyEnabled:i,maxTableLimit:y.maxTableLimit(),helpSubTranslateKey:w})},{id:"Payouts",title:O.T("help.payouts.title"),content:N.jsx(h,{settings:y,currencySymbol:L,helpSubTranslateKey:w,isDesktop:x})},{id:"ReturnToPlayer",title:O.T("help.returnToPlayer.title"),content:N.jsx(W,{xxxtremeSpinsEnabled:T,featureBuyEnabled:i,isHelpRedesigned:d,volatilityIndex:C.volatilityIndex})},{id:"PlaceBets",title:O.T("help.placeBets.title"),content:N.jsx(_,{platform:Q,settings:y,currencySymbol:L,turboEnabled:D})}]}]},filterMap:{overrideDefault:{[m.C.Shuffling]:!1,[m.C.SpeedMode]:y.turboSpinEnabled}}}}}},234658:(y,L,p)=>{var N;p.d(L,{Ib:()=>C,SS:()=>O,WI:()=>N,_u:()=>Q,bG:()=>h,dw:()=>g,hL:()=>j,i0:()=>_,iJ:()=>t,qC:()=>k,ue:()=>m,xR:()=>z,z2:()=>W}),function(y){y["Idle"]="Idle",y["Spinning"]="Spinning",y["ResponseReceived"]="ResponseReceived",y["StopSpinning"]="StopSpinning",y["Result"]="Result",y["Transition"]="Transition",y["Error"]="Error"}(N||(N={}));const t={spinVelocity:16e3,startBounceFactor:0,stopBounceFactor:.6,startBounceDuration:0,stopBounceDuration:240,bounceType:1,reelStopDelay:400,reelStopDelayMultiplier:1},j={spinVelocity:8e3,startBounceFactor:.2,stopBounceFactor:.4,startBounceDuration:400,stopBounceDuration:350,bounceType:0},z={frameXOffset:0,frameYOffset:0,frameWidth:4.1,frameHeight:1,upperCageHeight:.15,upperCageYOffset:.45},O=4,h=15,m=75,k=1e3,_=600,W=2300,g=20;var C;(function(y){y["LowBalance"]="LowBalance",y["SpinButton"]="SpinButton",y["XXXtremeDialog"]="XXXtremeDialog"})(C||(C={}));const Q={0:0,2:1,3:2,5:3,7:4,10:5,15:6,20:7,25:8,30:9,40:10,50:11,100:12}},419749:(y,L,p)=>{p.d(L,{e:()=>hB});var N={};p.r(N),p.d(N,{ACESFilmicToneMapping:()=>Ty,AddEquation:()=>X,AddOperation:()=>_y,AdditiveAnimationBlendMode:()=>AL,AdditiveBlending:()=>M,AlphaFormat:()=>Ky,AlwaysCompare:()=>Sp,AlwaysDepth:()=>py,AlwaysStencilFunc:()=>xp,AmbientLight:()=>bW,AmbientLightProbe:()=>Wg,AnimationAction:()=>Jg,AnimationClip:()=>wW,AnimationLoader:()=>SW,AnimationMixer:()=>Gg,AnimationObjectGroup:()=>Xg,AnimationUtils:()=>zW,ArcCurve:()=>Ik,ArrayCamera:()=>sh,ArrowHelper:()=>PC,Audio:()=>Ig,AudioAnalyser:()=>Rg,AudioContext:()=>mg,AudioListener:()=>Ug,AudioLoader:()=>kg,AxesHelper:()=>lC,BackSide:()=>R,BasicDepthPacking:()=>vL,BasicShadowMap:()=>V,Bone:()=>Hm,BooleanKeyframeTrack:()=>WW,Box2:()=>yC,Box3:()=>XN,Box3Helper:()=>SC,BoxGeometry:()=>nj,BoxHelper:()=>uC,BufferAttribute:()=>Wj,BufferGeometry:()=>Rj,BufferGeometryLoader:()=>pg,ByteType:()=>Hy,Cache:()=>dW,Camera:()=>tz,CameraHelper:()=>IC,CanvasTexture:()=>dk,CapsuleGeometry:()=>Ak,CatmullRomCurve3:()=>Rk,CineonToneMapping:()=>Qy,CircleGeometry:()=>sk,ClampToEdgeWrapping:()=>Vy,Clock:()=>ig,Color:()=>pj,ColorKeyframeTrack:()=>gW,ColorManagement:()=>wN,CompressedArrayTexture:()=>wk,CompressedCubeTexture:()=>xk,CompressedTexture:()=>Dk,CompressedTextureLoader:()=>BW,ConeGeometry:()=>Kk,CubeCamera:()=>hz,CubeReflectionMapping:()=>wy,CubeRefractionMapping:()=>xy,CubeTexture:()=>mz,CubeTextureLoader:()=>YW,CubeUVReflectionMapping:()=>Uy,CubicBezierCurve:()=>lk,CubicBezierCurve3:()=>Mk,CubicInterpolant:()=>hW,CullFaceBack:()=>o,CullFaceFront:()=>U,CullFaceFrontBack:()=>I,CullFaceNone:()=>d,Curve:()=>ok,CurvePath:()=>Gk,CustomBlending:()=>H,CustomToneMapping:()=>iy,CylinderGeometry:()=>ck,Cylindrical:()=>eg,Data3DTexture:()=>EN,DataArrayTexture:()=>RN,DataTexture:()=>Xm,DataTextureLoader:()=>EW,DataUtils:()=>mj,DecrementStencilOp:()=>mp,DecrementWrapStencilOp:()=>_p,DefaultLoadingManager:()=>UW,DepthFormat:()=>ey,DepthStencilFormat:()=>Zy,DepthTexture:()=>nh,DirectionalLight:()=>KW,DirectionalLightHelper:()=>dC,DiscreteInterpolant:()=>kW,DisplayP3ColorSpace:()=>tp,DodecahedronGeometry:()=>nk,DoubleSide:()=>Y,DstAlphaFactor:()=>n,DstColorFactor:()=>e,DynamicCopyUsage:()=>fp,DynamicDrawUsage:()=>Rp,DynamicReadUsage:()=>Pp,EdgesGeometry:()=>L_,EllipseCurve:()=>Uk,EqualCompare:()=>Up,EqualDepth:()=>jy,EqualStencilFunc:()=>Qp,EquirectangularReflectionMapping:()=>dy,EquirectangularRefractionMapping:()=>oy,Euler:()=>ot,EventDispatcher:()=>$p,ExtrudeGeometry:()=>R_,FileLoader:()=>uW,Float16BufferAttribute:()=>xj,Float32BufferAttribute:()=>dj,Float64BufferAttribute:()=>oj,FloatType:()=>$y,Fog:()=>tm,FogExp2:()=>Nm,FramebufferTexture:()=>ik,FrontSide:()=>B,Frustum:()=>iz,GLBufferAttribute:()=>cg,GLSL1:()=>Hp,GLSL3:()=>Xp,GreaterCompare:()=>Vp,GreaterDepth:()=>Oy,GreaterEqualCompare:()=>up,GreaterEqualDepth:()=>zy,GreaterEqualStencilFunc:()=>wp,GreaterStencilFunc:()=>ip,GridHelper:()=>TC,Group:()=>ch,HalfFloatType:()=>qy,HemisphereLight:()=>MW,HemisphereLightHelper:()=>QC,HemisphereLightProbe:()=>_g,IcosahedronGeometry:()=>E_,ImageBitmapLoader:()=>Og,ImageLoader:()=>RW,ImageUtils:()=>dN,IncrementStencilOp:()=>hp,IncrementWrapStencilOp:()=>kp,InstancedBufferAttribute:()=>$m,InstancedBufferGeometry:()=>Lg,InstancedInterleavedBuffer:()=>sg,InstancedMesh:()=>vm,Int16BufferAttribute:()=>Tj,Int32BufferAttribute:()=>Dj,Int8BufferAttribute:()=>gj,IntType:()=>ry,InterleavedBuffer:()=>zm,InterleavedBufferAttribute:()=>hm,Interpolant:()=>OW,InterpolateDiscrete:()=>HL,InterpolateLinear:()=>XL,InterpolateSmooth:()=>JL,InvertStencilOp:()=>Wp,KeepStencilOp:()=>zp,KeyframeTrack:()=>_W,LOD:()=>um,LatheGeometry:()=>qk,Layers:()=>Ut,LessCompare:()=>op,LessDepth:()=>Ny,LessEqualCompare:()=>Ip,LessEqualDepth:()=>ty,LessEqualStencilFunc:()=>Tp,LessStencilFunc:()=>Cp,Light:()=>lW,LightProbe:()=>eW,Line:()=>tk,Line3:()=>NC,LineBasicMaterial:()=>em,LineCurve:()=>fk,LineCurve3:()=>ak,LineDashedMaterial:()=>Z_,LineLoop:()=>hk,LineSegments:()=>Ok,LinearEncoding:()=>bL,LinearFilter:()=>Ey,LinearInterpolant:()=>mW,LinearMipMapLinearFilter:()=>fy,LinearMipMapNearestFilter:()=>ly,LinearMipmapLinearFilter:()=>My,LinearMipmapNearestFilter:()=>Py,LinearSRGBColorSpace:()=>Np,LinearToneMapping:()=>gy,Loader:()=>IW,LoaderUtils:()=>yg,LoadingManager:()=>oW,LoopOnce:()=>ML,LoopPingPong:()=>aL,LoopRepeat:()=>fL,LuminanceAlphaFormat:()=>vy,LuminanceFormat:()=>ny,MOUSE:()=>w,Material:()=>vt,MaterialLoader:()=>ZW,MathUtils:()=>NN,Matrix3:()=>jN,Matrix4:()=>Wt,MaxEquation:()=>$,Mesh:()=>Kj,MeshBasicMaterial:()=>tj,MeshDepthMaterial:()=>Hh,MeshDistanceMaterial:()=>Xh,MeshLambertMaterial:()=>v_,MeshMatcapMaterial:()=>e_,MeshNormalMaterial:()=>n_,MeshPhongMaterial:()=>K_,MeshPhysicalMaterial:()=>c_,MeshStandardMaterial:()=>s_,MeshToonMaterial:()=>b_,MinEquation:()=>G,MirroredRepeatWrapping:()=>Fy,MixOperation:()=>ky,MultiplyBlending:()=>a,MultiplyOperation:()=>my,NearestFilter:()=>uy,NearestMipMapLinearFilter:()=>Yy,NearestMipMapNearestFilter:()=>By,NearestMipmapLinearFilter:()=>Ry,NearestMipmapNearestFilter:()=>Sy,NeverCompare:()=>dp,NeverDepth:()=>Ly,NeverStencilFunc:()=>gp,NoBlending:()=>P,NoColorSpace:()=>Lp,NoToneMapping:()=>Wy,NormalAnimationBlendMode:()=>qL,NormalBlending:()=>l,NotEqualCompare:()=>Fp,NotEqualDepth:()=>hy,NotEqualStencilFunc:()=>Dp,NumberKeyframeTrack:()=>CW,Object3D:()=>at,ObjectLoader:()=>Ng,ObjectSpaceNormalMap:()=>yp,OctahedronGeometry:()=>P_,OneFactor:()=>A,OneMinusDstAlphaFactor:()=>v,OneMinusDstColorFactor:()=>Z,OneMinusSrcAlphaFactor:()=>b,OneMinusSrcColorFactor:()=>c,OrthographicCamera:()=>Yz,PCFShadowMap:()=>F,PCFSoftShadowMap:()=>u,PMREMGenerator:()=>rz,Path:()=>$k,PerspectiveCamera:()=>jz,Plane:()=>Cz,PlaneGeometry:()=>xz,PlaneHelper:()=>BC,PointLight:()=>sW,PointLightHelper:()=>_C,Points:()=>Ck,PointsMaterial:()=>mk,PolarGridHelper:()=>iC,PolyhedronGeometry:()=>bk,PositionalAudio:()=>Bg,PropertyBinding:()=>Hg,PropertyMixer:()=>Yg,QuadraticBezierCurve:()=>Hk,QuadraticBezierCurve3:()=>Xk,Quaternion:()=>MN,QuaternionKeyframeTrack:()=>TW,QuaternionLinearInterpolant:()=>QW,RED_GREEN_RGTC2_Format:()=>PL,RED_RGTC1_Format:()=>YL,REVISION:()=>D,RGBADepthPacking:()=>eL,RGBAFormat:()=>by,RGBAIntegerFormat:()=>tL,RGBA_ASTC_10x10_Format:()=>uL,RGBA_ASTC_10x5_Format:()=>IL,RGBA_ASTC_10x6_Format:()=>VL,RGBA_ASTC_10x8_Format:()=>FL,RGBA_ASTC_12x10_Format:()=>SL,RGBA_ASTC_12x12_Format:()=>BL,RGBA_ASTC_4x4_Format:()=>TL,RGBA_ASTC_5x4_Format:()=>iL,RGBA_ASTC_5x5_Format:()=>DL,RGBA_ASTC_6x5_Format:()=>wL,RGBA_ASTC_6x6_Format:()=>xL,RGBA_ASTC_8x5_Format:()=>dL,RGBA_ASTC_8x6_Format:()=>oL,RGBA_ASTC_8x8_Format:()=>UL,RGBA_BPTC_Format:()=>RL,RGBA_ETC2_EAC_Format:()=>QL,RGBA_PVRTC_2BPPV1_Format:()=>WL,RGBA_PVRTC_4BPPV1_Format:()=>_L,RGBA_S3TC_DXT1_Format:()=>zL,RGBA_S3TC_DXT3_Format:()=>OL,RGBA_S3TC_DXT5_Format:()=>hL,RGB_ETC1_Format:()=>gL,RGB_ETC2_Format:()=>CL,RGB_PVRTC_2BPPV1_Format:()=>kL,RGB_PVRTC_4BPPV1_Format:()=>mL,RGB_S3TC_DXT1_Format:()=>jL,RGFormat:()=>pL,RGIntegerFormat:()=>NL,RawShaderMaterial:()=>A_,Ray:()=>_t,Raycaster:()=>Kg,RectAreaLight:()=>nW,RedFormat:()=>yL,RedIntegerFormat:()=>LL,ReinhardToneMapping:()=>Cy,RenderTarget:()=>SN,RepeatWrapping:()=>Iy,ReplaceStencilOp:()=>Op,ReverseSubtractEquation:()=>r,RingGeometry:()=>l_,SIGNED_RED_GREEN_RGTC2_Format:()=>lL,SIGNED_RED_RGTC1_Format:()=>EL,SRGBColorSpace:()=>pp,Scene:()=>jm,ShaderChunk:()=>dz,ShaderLib:()=>Uz,ShaderMaterial:()=>Nz,ShadowMaterial:()=>q_,Shape:()=>p_,ShapeGeometry:()=>M_,ShapePath:()=>MC,ShapeUtils:()=>u_,ShortType:()=>Xy,Skeleton:()=>Gm,SkeletonHelper:()=>mC,SkinnedMesh:()=>am,Source:()=>UN,Sphere:()=>Nt,SphereGeometry:()=>f_,Spherical:()=>vg,SphericalHarmonics3:()=>vW,SplineCurve:()=>Jk,SpotLight:()=>rW,SpotLightHelper:()=>jC,Sprite:()=>Um,SpriteMaterial:()=>mm,SrcAlphaFactor:()=>K,SrcAlphaSaturateFactor:()=>yy,SrcColorFactor:()=>s,StaticCopyUsage:()=>Mp,StaticDrawUsage:()=>Bp,StaticReadUsage:()=>Ep,StereoCamera:()=>Tg,StreamCopyUsage:()=>ap,StreamDrawUsage:()=>Yp,StreamReadUsage:()=>lp,StringKeyframeTrack:()=>iW,SubtractEquation:()=>J,SubtractiveBlending:()=>f,TOUCH:()=>x,TangentSpaceNormalMap:()=>ZL,TetrahedronGeometry:()=>a_,Texture:()=>FN,TextureLoader:()=>PW,TorusGeometry:()=>H_,TorusKnotGeometry:()=>X_,Triangle:()=>bt,TriangleFanDrawMode:()=>KL,TriangleStripDrawMode:()=>cL,TrianglesDrawMode:()=>sL,TubeGeometry:()=>J_,TwoPassDoubleSide:()=>E,UVMapping:()=>Dy,Uint16BufferAttribute:()=>ij,Uint32BufferAttribute:()=>wj,Uint8BufferAttribute:()=>Cj,Uint8ClampedBufferAttribute:()=>Qj,Uniform:()=>$g,UniformsGroup:()=>Ag,UniformsLib:()=>oz,UniformsUtils:()=>yz,UnsignedByteType:()=>ay,UnsignedInt248Type:()=>cy,UnsignedIntType:()=>Gy,UnsignedShort4444Type:()=>Ay,UnsignedShort5551Type:()=>sy,UnsignedShortType:()=>Jy,VSMShadowMap:()=>S,Vector2:()=>tN,Vector3:()=>fN,Vector4:()=>uN,VectorKeyframeTrack:()=>DW,VideoTexture:()=>Tk,WebGL1Renderer:()=>pm,WebGL3DRenderTarget:()=>PN,WebGLArrayRenderTarget:()=>YN,WebGLCoordinateSystem:()=>rp,WebGLCubeRenderTarget:()=>kz,WebGLMultipleRenderTargets:()=>lN,WebGLRenderTarget:()=>BN,WebGLRenderer:()=>Lm,WebGLUtils:()=>Ah,WebGPUCoordinateSystem:()=>Gp,WireframeGeometry:()=>r_,WrapAroundEnding:()=>$L,ZeroCurvatureEnding:()=>rL,ZeroFactor:()=>q,ZeroSlopeEnding:()=>GL,ZeroStencilOp:()=>jp,_SRGBAFormat:()=>Jp,sRGBEncoding:()=>nL});var t={};p.r(t),p.d(t,{BlurredLine:()=>hi,BlurredLineMaterial:()=>_i});var j=p(64922),z=p(912986),O=p(697971),h=p(377810),m=p(320693),k=p(85),_=p(837557),W=p(170877),g=p(346160),C=p(523219),Q=p(207499),T=p(436794),i=p(199002);const D="155",w={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},x={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},d=0,o=1,U=2,I=3,V=0,F=1,u=2,S=3,B=0,R=1,Y=2,E=2,P=0,l=1,M=2,f=3,a=4,H=5,X=100,J=101,r=102,G=103,$=104,q=200,A=201,s=202,c=203,K=204,b=205,n=206,v=207,e=208,Z=209,yy=210,Ly=0,py=1,Ny=2,ty=3,jy=4,zy=5,Oy=6,hy=7,my=0,ky=1,_y=2,Wy=0,gy=1,Cy=2,Qy=3,Ty=4,iy=5,Dy=300,wy=301,xy=302,dy=303,oy=304,Uy=306,Iy=1e3,Vy=1001,Fy=1002,uy=1003,Sy=1004,By=1004,Ry=1005,Yy=1005,Ey=1006,Py=1007,ly=1007,My=1008,fy=1008,ay=1009,Hy=1010,Xy=1011,Jy=1012,ry=1013,Gy=1014,$y=1015,qy=1016,Ay=1017,sy=1018,cy=1020,Ky=1021,by=1023,ny=1024,vy=1025,ey=1026,Zy=1027,yL=1028,LL=1029,pL=1030,NL=1031,tL=1033,jL=33776,zL=33777,OL=33778,hL=33779,mL=35840,kL=35841,_L=35842,WL=35843,gL=36196,CL=37492,QL=37496,TL=37808,iL=37809,DL=37810,wL=37811,xL=37812,dL=37813,oL=37814,UL=37815,IL=37816,VL=37817,FL=37818,uL=37819,SL=37820,BL=37821,RL=36492,YL=36283,EL=36284,PL=36285,lL=36286,ML=2200,fL=2201,aL=2202,HL=2300,XL=2301,JL=2302,rL=2400,GL=2401,$L=2402,qL=2500,AL=2501,sL=0,cL=1,KL=2,bL=3e3,nL=3001,vL=3200,eL=3201,ZL=0,yp=1,Lp="",pp="srgb",Np="srgb-linear",tp="display-p3",jp=0,zp=7680,Op=7681,hp=7682,mp=7683,kp=34055,_p=34056,Wp=5386,gp=512,Cp=513,Qp=514,Tp=515,ip=516,Dp=517,wp=518,xp=519,dp=512,op=513,Up=514,Ip=515,Vp=516,Fp=517,up=518,Sp=519,Bp=35044,Rp=35048,Yp=35040,Ep=35045,Pp=35049,lp=35041,Mp=35046,fp=35050,ap=35042,Hp="100",Xp="300 es",Jp=1035,rp=2e3,Gp=2001;class $p{addEventListener(y,L){void 0===this._listeners&&(this._listeners={});const p=this._listeners;void 0===p[y]&&(p[y]=[]),-1===p[y].indexOf(L)&&p[y].push(L)}hasEventListener(y,L){if(void 0===this._listeners)return!1;const p=this._listeners;return void 0!==p[y]&&-1!==p[y].indexOf(L)}removeEventListener(y,L){if(void 0===this._listeners)return;const p=this._listeners[y];if(void 0!==p){const y=p.indexOf(L);-1!==y&&p.splice(y,1)}}dispatchEvent(y){if(void 0===this._listeners)return;const L=this._listeners[y.type];if(void 0!==L){y.target=this;const p=L.slice(0);for(let L=0,N=p.length;L<N;L++)p[L].call(this,y);y.target=null}}}const qp=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Ap=1234567;const sp=Math.PI/180,cp=180/Math.PI;function Kp(){const y=4294967295*Math.random()|0,L=4294967295*Math.random()|0,p=4294967295*Math.random()|0,N=4294967295*Math.random()|0;return(qp[255&y]+qp[y>>8&255]+qp[y>>16&255]+qp[y>>24&255]+"-"+qp[255&L]+qp[L>>8&255]+"-"+qp[L>>16&15|64]+qp[L>>24&255]+"-"+qp[63&p|128]+qp[p>>8&255]+"-"+qp[p>>16&255]+qp[p>>24&255]+qp[255&N]+qp[N>>8&255]+qp[N>>16&255]+qp[N>>24&255]).toLowerCase()}function bp(y,L,p){return Math.max(L,Math.min(p,y))}function np(y,L){return(y%L+L)%L}function vp(y,L,p){return(1-p)*y+p*L}function ep(y){return!(y&y-1)&&0!==y}function Zp(y){return Math.pow(2,Math.ceil(Math.log(y)/Math.LN2))}function yN(y){return Math.pow(2,Math.floor(Math.log(y)/Math.LN2))}function LN(y,L){switch(L.constructor){case Float32Array:return y;case Uint32Array:return y/4294967295;case Uint16Array:return y/65535;case Uint8Array:return y/255;case Int32Array:return Math.max(y/2147483647,-1);case Int16Array:return Math.max(y/32767,-1);case Int8Array:return Math.max(y/127,-1);default:throw new Error("Invalid component type.")}}function pN(y,L){switch(L.constructor){case Float32Array:return y;case Uint32Array:return Math.round(4294967295*y);case Uint16Array:return Math.round(65535*y);case Uint8Array:return Math.round(255*y);case Int32Array:return Math.round(2147483647*y);case Int16Array:return Math.round(32767*y);case Int8Array:return Math.round(127*y);default:throw new Error("Invalid component type.")}}const NN={DEG2RAD:sp,RAD2DEG:cp,generateUUID:Kp,clamp:bp,euclideanModulo:np,mapLinear:function(y,L,p,N,t){return N+(y-L)*(t-N)/(p-L)},inverseLerp:function(y,L,p){return y!==L?(p-y)/(L-y):0},lerp:vp,damp:function(y,L,p,N){return vp(y,L,1-Math.exp(-p*N))},pingpong:function(y,L=1){return L-Math.abs(np(y,2*L)-L)},smoothstep:function(y,L,p){return y<=L?0:y>=p?1:(y=(y-L)/(p-L))*y*(3-2*y)},smootherstep:function(y,L,p){return y<=L?0:y>=p?1:(y=(y-L)/(p-L))*y*y*(y*(6*y-15)+10)},randInt:function(y,L){return y+Math.floor(Math.random()*(L-y+1))},randFloat:function(y,L){return y+Math.random()*(L-y)},randFloatSpread:function(y){return y*(.5-Math.random())},seededRandom:function(y){void 0!==y&&(Ap=y);let L=Ap+=1831565813;return L=Math.imul(L^L>>>15,1|L),L^=L+Math.imul(L^L>>>7,61|L),((L^L>>>14)>>>0)/4294967296},degToRad:function(y){return y*sp},radToDeg:function(y){return y*cp},isPowerOfTwo:ep,ceilPowerOfTwo:Zp,floorPowerOfTwo:yN,setQuaternionFromProperEuler:function(y,L,p,N,t){const j=Math.cos,z=Math.sin,O=j(p/2),h=z(p/2),m=j((L+N)/2),k=z((L+N)/2),_=j((L-N)/2),W=z((L-N)/2),g=j((N-L)/2),C=z((N-L)/2);switch(t){case"XYX":y.set(O*k,h*_,h*W,O*m);break;case"YZY":y.set(h*W,O*k,h*_,O*m);break;case"ZXZ":y.set(h*_,h*W,O*k,O*m);break;case"XZX":y.set(O*k,h*C,h*g,O*m);break;case"YXY":y.set(h*g,O*k,h*C,O*m);break;case"ZYZ":y.set(h*C,h*g,O*k,O*m);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+t)}},normalize:pN,denormalize:LN};class tN{constructor(y=0,L=0){tN.prototype.isVector2=!0,this.x=y,this.y=L}get width(){return this.x}set width(y){this.x=y}get height(){return this.y}set height(y){this.y=y}set(y,L){return this.x=y,this.y=L,this}setScalar(y){return this.x=y,this.y=y,this}setX(y){return this.x=y,this}setY(y){return this.y=y,this}setComponent(y,L){switch(y){case 0:this.x=L;break;case 1:this.y=L;break;default:throw new Error("index is out of range: "+y)}return this}getComponent(y){switch(y){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+y)}}clone(){return new this.constructor(this.x,this.y)}copy(y){return this.x=y.x,this.y=y.y,this}add(y){return this.x+=y.x,this.y+=y.y,this}addScalar(y){return this.x+=y,this.y+=y,this}addVectors(y,L){return this.x=y.x+L.x,this.y=y.y+L.y,this}addScaledVector(y,L){return this.x+=y.x*L,this.y+=y.y*L,this}sub(y){return this.x-=y.x,this.y-=y.y,this}subScalar(y){return this.x-=y,this.y-=y,this}subVectors(y,L){return this.x=y.x-L.x,this.y=y.y-L.y,this}multiply(y){return this.x*=y.x,this.y*=y.y,this}multiplyScalar(y){return this.x*=y,this.y*=y,this}divide(y){return this.x/=y.x,this.y/=y.y,this}divideScalar(y){return this.multiplyScalar(1/y)}applyMatrix3(y){const L=this.x,p=this.y,N=y.elements;return this.x=N[0]*L+N[3]*p+N[6],this.y=N[1]*L+N[4]*p+N[7],this}min(y){return this.x=Math.min(this.x,y.x),this.y=Math.min(this.y,y.y),this}max(y){return this.x=Math.max(this.x,y.x),this.y=Math.max(this.y,y.y),this}clamp(y,L){return this.x=Math.max(y.x,Math.min(L.x,this.x)),this.y=Math.max(y.y,Math.min(L.y,this.y)),this}clampScalar(y,L){return this.x=Math.max(y,Math.min(L,this.x)),this.y=Math.max(y,Math.min(L,this.y)),this}clampLength(y,L){const p=this.length();return this.divideScalar(p||1).multiplyScalar(Math.max(y,Math.min(L,p)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(y){return this.x*y.x+this.y*y.y}cross(y){return this.x*y.y-this.y*y.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(y){const L=Math.sqrt(this.lengthSq()*y.lengthSq());if(0===L)return Math.PI/2;const p=this.dot(y)/L;return Math.acos(bp(p,-1,1))}distanceTo(y){return Math.sqrt(this.distanceToSquared(y))}distanceToSquared(y){const L=this.x-y.x,p=this.y-y.y;return L*L+p*p}manhattanDistanceTo(y){return Math.abs(this.x-y.x)+Math.abs(this.y-y.y)}setLength(y){return this.normalize().multiplyScalar(y)}lerp(y,L){return this.x+=(y.x-this.x)*L,this.y+=(y.y-this.y)*L,this}lerpVectors(y,L,p){return this.x=y.x+(L.x-y.x)*p,this.y=y.y+(L.y-y.y)*p,this}equals(y){return y.x===this.x&&y.y===this.y}fromArray(y,L=0){return this.x=y[L],this.y=y[L+1],this}toArray(y=[],L=0){return y[L]=this.x,y[L+1]=this.y,y}fromBufferAttribute(y,L){return this.x=y.getX(L),this.y=y.getY(L),this}rotateAround(y,L){const p=Math.cos(L),N=Math.sin(L),t=this.x-y.x,j=this.y-y.y;return this.x=t*p-j*N+y.x,this.y=t*N+j*p+y.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class jN{constructor(y,L,p,N,t,j,z,O,h){jN.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==y&&this.set(y,L,p,N,t,j,z,O,h)}set(y,L,p,N,t,j,z,O,h){const m=this.elements;return m[0]=y,m[1]=N,m[2]=z,m[3]=L,m[4]=t,m[5]=O,m[6]=p,m[7]=j,m[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(y){const L=this.elements,p=y.elements;return L[0]=p[0],L[1]=p[1],L[2]=p[2],L[3]=p[3],L[4]=p[4],L[5]=p[5],L[6]=p[6],L[7]=p[7],L[8]=p[8],this}extractBasis(y,L,p){return y.setFromMatrix3Column(this,0),L.setFromMatrix3Column(this,1),p.setFromMatrix3Column(this,2),this}setFromMatrix4(y){const L=y.elements;return this.set(L[0],L[4],L[8],L[1],L[5],L[9],L[2],L[6],L[10]),this}multiply(y){return this.multiplyMatrices(this,y)}premultiply(y){return this.multiplyMatrices(y,this)}multiplyMatrices(y,L){const p=y.elements,N=L.elements,t=this.elements,j=p[0],z=p[3],O=p[6],h=p[1],m=p[4],k=p[7],_=p[2],W=p[5],g=p[8],C=N[0],Q=N[3],T=N[6],i=N[1],D=N[4],w=N[7],x=N[2],d=N[5],o=N[8];return t[0]=j*C+z*i+O*x,t[3]=j*Q+z*D+O*d,t[6]=j*T+z*w+O*o,t[1]=h*C+m*i+k*x,t[4]=h*Q+m*D+k*d,t[7]=h*T+m*w+k*o,t[2]=_*C+W*i+g*x,t[5]=_*Q+W*D+g*d,t[8]=_*T+W*w+g*o,this}multiplyScalar(y){const L=this.elements;return L[0]*=y,L[3]*=y,L[6]*=y,L[1]*=y,L[4]*=y,L[7]*=y,L[2]*=y,L[5]*=y,L[8]*=y,this}determinant(){const y=this.elements,L=y[0],p=y[1],N=y[2],t=y[3],j=y[4],z=y[5],O=y[6],h=y[7],m=y[8];return L*j*m-L*z*h-p*t*m+p*z*O+N*t*h-N*j*O}invert(){const y=this.elements,L=y[0],p=y[1],N=y[2],t=y[3],j=y[4],z=y[5],O=y[6],h=y[7],m=y[8],k=m*j-z*h,_=z*O-m*t,W=h*t-j*O,g=L*k+p*_+N*W;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);const C=1/g;return y[0]=k*C,y[1]=(N*h-m*p)*C,y[2]=(z*p-N*j)*C,y[3]=_*C,y[4]=(m*L-N*O)*C,y[5]=(N*t-z*L)*C,y[6]=W*C,y[7]=(p*O-h*L)*C,y[8]=(j*L-p*t)*C,this}transpose(){let y;const L=this.elements;return y=L[1],L[1]=L[3],L[3]=y,y=L[2],L[2]=L[6],L[6]=y,y=L[5],L[5]=L[7],L[7]=y,this}getNormalMatrix(y){return this.setFromMatrix4(y).invert().transpose()}transposeIntoArray(y){const L=this.elements;return y[0]=L[0],y[1]=L[3],y[2]=L[6],y[3]=L[1],y[4]=L[4],y[5]=L[7],y[6]=L[2],y[7]=L[5],y[8]=L[8],this}setUvTransform(y,L,p,N,t,j,z){const O=Math.cos(t),h=Math.sin(t);return this.set(p*O,p*h,-p*(O*j+h*z)+j+y,-N*h,N*O,-N*(-h*j+O*z)+z+L,0,0,1),this}scale(y,L){return this.premultiply(zN.makeScale(y,L)),this}rotate(y){return this.premultiply(zN.makeRotation(-y)),this}translate(y,L){return this.premultiply(zN.makeTranslation(y,L)),this}makeTranslation(y,L){return y.isVector2?this.set(1,0,y.x,0,1,y.y,0,0,1):this.set(1,0,y,0,1,L,0,0,1),this}makeRotation(y){const L=Math.cos(y),p=Math.sin(y);return this.set(L,-p,0,p,L,0,0,0,1),this}makeScale(y,L){return this.set(y,0,0,0,L,0,0,0,1),this}equals(y){const L=this.elements,p=y.elements;for(let y=0;y<9;y++)if(L[y]!==p[y])return!1;return!0}fromArray(y,L=0){for(let p=0;p<9;p++)this.elements[p]=y[p+L];return this}toArray(y=[],L=0){const p=this.elements;return y[L]=p[0],y[L+1]=p[1],y[L+2]=p[2],y[L+3]=p[3],y[L+4]=p[4],y[L+5]=p[5],y[L+6]=p[6],y[L+7]=p[7],y[L+8]=p[8],y}clone(){return(new this.constructor).fromArray(this.elements)}}const zN=new jN;function ON(y){for(let L=y.length-1;L>=0;--L)if(y[L]>=65535)return!0;return!1}const hN={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function mN(y,L){return new hN[y](L)}function kN(y){return document.createElementNS("http://www.w3.org/1999/xhtml",y)}const _N={};function WN(y){y in _N||(_N[y]=!0,console.warn(y))}function gN(y){return y<.04045?.0773993808*y:Math.pow(.9478672986*y+.0521327014,2.4)}function CN(y){return y<.0031308?12.92*y:1.055*Math.pow(y,.41666)-.055}const QN=(new jN).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),TN=(new jN).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),iN={[Np]:y=>y,[pp]:y=>y.convertSRGBToLinear(),[tp]:function(y){return y.convertSRGBToLinear().applyMatrix3(TN)}},DN={[Np]:y=>y,[pp]:y=>y.convertLinearToSRGB(),[tp]:function(y){return y.applyMatrix3(QN).convertLinearToSRGB()}},wN={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(y){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!y},get workingColorSpace(){return Np},set workingColorSpace(y){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(y,L,p){if(!1===this.enabled||L===p||!L||!p)return y;const N=iN[L],t=DN[p];if(void 0===N||void 0===t)throw new Error(`Unsupported color space conversion, "${L}" to "${p}".`);return t(N(y))},fromWorkingColorSpace:function(y,L){return this.convert(y,this.workingColorSpace,L)},toWorkingColorSpace:function(y,L){return this.convert(y,L,this.workingColorSpace)}};let xN;class dN{static getDataURL(y){if(/^data:/i.test(y.src))return y.src;if("undefined"==typeof HTMLCanvasElement)return y.src;let L;if(y instanceof HTMLCanvasElement)L=y;else{void 0===xN&&(xN=kN("canvas")),xN.width=y.width,xN.height=y.height;const p=xN.getContext("2d");y instanceof ImageData?p.putImageData(y,0,0):p.drawImage(y,0,0,y.width,y.height),L=xN}return L.width>2048||L.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",y),L.toDataURL("image/jpeg",.6)):L.toDataURL("image/png")}static sRGBToLinear(y){if("undefined"!=typeof HTMLImageElement&&y instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&y instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&y instanceof ImageBitmap){const L=kN("canvas");L.width=y.width,L.height=y.height;const p=L.getContext("2d");p.drawImage(y,0,0,y.width,y.height);const N=p.getImageData(0,0,y.width,y.height),t=N.data;for(let y=0;y<t.length;y++)t[y]=255*gN(t[y]/255);return p.putImageData(N,0,0),L}if(y.data){const L=y.data.slice(0);for(let y=0;y<L.length;y++)L instanceof Uint8Array||L instanceof Uint8ClampedArray?L[y]=Math.floor(255*gN(L[y]/255)):L[y]=gN(L[y]);return{data:L,width:y.width,height:y.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),y}}let oN=0;class UN{constructor(y=null){this.isSource=!0,Object.defineProperty(this,"id",{value:oN++}),this.uuid=Kp(),this.data=y,this.version=0}set needsUpdate(y){!0===y&&this.version++}toJSON(y){const L=void 0===y||"string"==typeof y;if(!L&&void 0!==y.images[this.uuid])return y.images[this.uuid];const p={uuid:this.uuid,url:""},N=this.data;if(null!==N){let y;if(Array.isArray(N)){y=[];for(let L=0,p=N.length;L<p;L++)N[L].isDataTexture?y.push(IN(N[L].image)):y.push(IN(N[L]))}else y=IN(N);p.url=y}return L||(y.images[this.uuid]=p),p}}function IN(y){return"undefined"!=typeof HTMLImageElement&&y instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&y instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&y instanceof ImageBitmap?dN.getDataURL(y):y.data?{data:Array.from(y.data),width:y.width,height:y.height,type:y.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let VN=0;class FN extends $p{constructor(y=FN.DEFAULT_IMAGE,L=FN.DEFAULT_MAPPING,p=Vy,N=Vy,t=Ey,j=My,z=by,O=ay,h=FN.DEFAULT_ANISOTROPY,m=Lp){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:VN++}),this.uuid=Kp(),this.name="",this.source=new UN(y),this.mipmaps=[],this.mapping=L,this.channel=0,this.wrapS=p,this.wrapT=N,this.magFilter=t,this.minFilter=j,this.anisotropy=h,this.format=z,this.internalFormat=null,this.type=O,this.offset=new tN(0,0),this.repeat=new tN(1,1),this.center=new tN(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new jN,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof m?this.colorSpace=m:(WN("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=m===nL?pp:Lp),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(y=null){this.source.data=y}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(y){return this.name=y.name,this.source=y.source,this.mipmaps=y.mipmaps.slice(0),this.mapping=y.mapping,this.channel=y.channel,this.wrapS=y.wrapS,this.wrapT=y.wrapT,this.magFilter=y.magFilter,this.minFilter=y.minFilter,this.anisotropy=y.anisotropy,this.format=y.format,this.internalFormat=y.internalFormat,this.type=y.type,this.offset.copy(y.offset),this.repeat.copy(y.repeat),this.center.copy(y.center),this.rotation=y.rotation,this.matrixAutoUpdate=y.matrixAutoUpdate,this.matrix.copy(y.matrix),this.generateMipmaps=y.generateMipmaps,this.premultiplyAlpha=y.premultiplyAlpha,this.flipY=y.flipY,this.unpackAlignment=y.unpackAlignment,this.colorSpace=y.colorSpace,this.userData=JSON.parse(JSON.stringify(y.userData)),this.needsUpdate=!0,this}toJSON(y){const L=void 0===y||"string"==typeof y;if(!L&&void 0!==y.textures[this.uuid])return y.textures[this.uuid];const p={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(y).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(p.userData=this.userData),L||(y.textures[this.uuid]=p),p}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(y){if(this.mapping!==Dy)return y;if(y.applyMatrix3(this.matrix),y.x<0||y.x>1)switch(this.wrapS){case Iy:y.x=y.x-Math.floor(y.x);break;case Vy:y.x=y.x<0?0:1;break;case Fy:1===Math.abs(Math.floor(y.x)%2)?y.x=Math.ceil(y.x)-y.x:y.x=y.x-Math.floor(y.x)}if(y.y<0||y.y>1)switch(this.wrapT){case Iy:y.y=y.y-Math.floor(y.y);break;case Vy:y.y=y.y<0?0:1;break;case Fy:1===Math.abs(Math.floor(y.y)%2)?y.y=Math.ceil(y.y)-y.y:y.y=y.y-Math.floor(y.y)}return this.flipY&&(y.y=1-y.y),y}set needsUpdate(y){!0===y&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return WN("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===pp?nL:bL}set encoding(y){WN("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=y===nL?pp:Lp}}FN.DEFAULT_IMAGE=null,FN.DEFAULT_MAPPING=Dy,FN.DEFAULT_ANISOTROPY=1;class uN{constructor(y=0,L=0,p=0,N=1){uN.prototype.isVector4=!0,this.x=y,this.y=L,this.z=p,this.w=N}get width(){return this.z}set width(y){this.z=y}get height(){return this.w}set height(y){this.w=y}set(y,L,p,N){return this.x=y,this.y=L,this.z=p,this.w=N,this}setScalar(y){return this.x=y,this.y=y,this.z=y,this.w=y,this}setX(y){return this.x=y,this}setY(y){return this.y=y,this}setZ(y){return this.z=y,this}setW(y){return this.w=y,this}setComponent(y,L){switch(y){case 0:this.x=L;break;case 1:this.y=L;break;case 2:this.z=L;break;case 3:this.w=L;break;default:throw new Error("index is out of range: "+y)}return this}getComponent(y){switch(y){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+y)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(y){return this.x=y.x,this.y=y.y,this.z=y.z,this.w=void 0!==y.w?y.w:1,this}add(y){return this.x+=y.x,this.y+=y.y,this.z+=y.z,this.w+=y.w,this}addScalar(y){return this.x+=y,this.y+=y,this.z+=y,this.w+=y,this}addVectors(y,L){return this.x=y.x+L.x,this.y=y.y+L.y,this.z=y.z+L.z,this.w=y.w+L.w,this}addScaledVector(y,L){return this.x+=y.x*L,this.y+=y.y*L,this.z+=y.z*L,this.w+=y.w*L,this}sub(y){return this.x-=y.x,this.y-=y.y,this.z-=y.z,this.w-=y.w,this}subScalar(y){return this.x-=y,this.y-=y,this.z-=y,this.w-=y,this}subVectors(y,L){return this.x=y.x-L.x,this.y=y.y-L.y,this.z=y.z-L.z,this.w=y.w-L.w,this}multiply(y){return this.x*=y.x,this.y*=y.y,this.z*=y.z,this.w*=y.w,this}multiplyScalar(y){return this.x*=y,this.y*=y,this.z*=y,this.w*=y,this}applyMatrix4(y){const L=this.x,p=this.y,N=this.z,t=this.w,j=y.elements;return this.x=j[0]*L+j[4]*p+j[8]*N+j[12]*t,this.y=j[1]*L+j[5]*p+j[9]*N+j[13]*t,this.z=j[2]*L+j[6]*p+j[10]*N+j[14]*t,this.w=j[3]*L+j[7]*p+j[11]*N+j[15]*t,this}divideScalar(y){return this.multiplyScalar(1/y)}setAxisAngleFromQuaternion(y){this.w=2*Math.acos(y.w);const L=Math.sqrt(1-y.w*y.w);return L<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=y.x/L,this.y=y.y/L,this.z=y.z/L),this}setAxisAngleFromRotationMatrix(y){let L,p,N,t;const j=.01,z=.1,O=y.elements,h=O[0],m=O[4],k=O[8],_=O[1],W=O[5],g=O[9],C=O[2],Q=O[6],T=O[10];if(Math.abs(m-_)<j&&Math.abs(k-C)<j&&Math.abs(g-Q)<j){if(Math.abs(m+_)<z&&Math.abs(k+C)<z&&Math.abs(g+Q)<z&&Math.abs(h+W+T-3)<z)return this.set(1,0,0,0),this;L=Math.PI;const y=(h+1)/2,O=(W+1)/2,i=(T+1)/2,D=(m+_)/4,w=(k+C)/4,x=(g+Q)/4;return y>O&&y>i?y<j?(p=0,N=.707106781,t=.707106781):(p=Math.sqrt(y),N=D/p,t=w/p):O>i?O<j?(p=.707106781,N=0,t=.707106781):(N=Math.sqrt(O),p=D/N,t=x/N):i<j?(p=.707106781,N=.707106781,t=0):(t=Math.sqrt(i),p=w/t,N=x/t),this.set(p,N,t,L),this}let i=Math.sqrt((Q-g)*(Q-g)+(k-C)*(k-C)+(_-m)*(_-m));return Math.abs(i)<.001&&(i=1),this.x=(Q-g)/i,this.y=(k-C)/i,this.z=(_-m)/i,this.w=Math.acos((h+W+T-1)/2),this}min(y){return this.x=Math.min(this.x,y.x),this.y=Math.min(this.y,y.y),this.z=Math.min(this.z,y.z),this.w=Math.min(this.w,y.w),this}max(y){return this.x=Math.max(this.x,y.x),this.y=Math.max(this.y,y.y),this.z=Math.max(this.z,y.z),this.w=Math.max(this.w,y.w),this}clamp(y,L){return this.x=Math.max(y.x,Math.min(L.x,this.x)),this.y=Math.max(y.y,Math.min(L.y,this.y)),this.z=Math.max(y.z,Math.min(L.z,this.z)),this.w=Math.max(y.w,Math.min(L.w,this.w)),this}clampScalar(y,L){return this.x=Math.max(y,Math.min(L,this.x)),this.y=Math.max(y,Math.min(L,this.y)),this.z=Math.max(y,Math.min(L,this.z)),this.w=Math.max(y,Math.min(L,this.w)),this}clampLength(y,L){const p=this.length();return this.divideScalar(p||1).multiplyScalar(Math.max(y,Math.min(L,p)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(y){return this.x*y.x+this.y*y.y+this.z*y.z+this.w*y.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(y){return this.normalize().multiplyScalar(y)}lerp(y,L){return this.x+=(y.x-this.x)*L,this.y+=(y.y-this.y)*L,this.z+=(y.z-this.z)*L,this.w+=(y.w-this.w)*L,this}lerpVectors(y,L,p){return this.x=y.x+(L.x-y.x)*p,this.y=y.y+(L.y-y.y)*p,this.z=y.z+(L.z-y.z)*p,this.w=y.w+(L.w-y.w)*p,this}equals(y){return y.x===this.x&&y.y===this.y&&y.z===this.z&&y.w===this.w}fromArray(y,L=0){return this.x=y[L],this.y=y[L+1],this.z=y[L+2],this.w=y[L+3],this}toArray(y=[],L=0){return y[L]=this.x,y[L+1]=this.y,y[L+2]=this.z,y[L+3]=this.w,y}fromBufferAttribute(y,L){return this.x=y.getX(L),this.y=y.getY(L),this.z=y.getZ(L),this.w=y.getW(L),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class SN extends $p{constructor(y=1,L=1,p={}){super(),this.isRenderTarget=!0,this.width=y,this.height=L,this.depth=1,this.scissor=new uN(0,0,y,L),this.scissorTest=!1,this.viewport=new uN(0,0,y,L);const N={width:y,height:L,depth:1};void 0!==p.encoding&&(WN("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),p.colorSpace=p.encoding===nL?pp:Lp),this.texture=new FN(N,p.mapping,p.wrapS,p.wrapT,p.magFilter,p.minFilter,p.format,p.type,p.anisotropy,p.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==p.generateMipmaps&&p.generateMipmaps,this.texture.internalFormat=void 0!==p.internalFormat?p.internalFormat:null,this.texture.minFilter=void 0!==p.minFilter?p.minFilter:Ey,this.depthBuffer=void 0===p.depthBuffer||p.depthBuffer,this.stencilBuffer=void 0!==p.stencilBuffer&&p.stencilBuffer,this.depthTexture=void 0!==p.depthTexture?p.depthTexture:null,this.samples=void 0!==p.samples?p.samples:0}setSize(y,L,p=1){this.width===y&&this.height===L&&this.depth===p||(this.width=y,this.height=L,this.depth=p,this.texture.image.width=y,this.texture.image.height=L,this.texture.image.depth=p,this.dispose()),this.viewport.set(0,0,y,L),this.scissor.set(0,0,y,L)}clone(){return(new this.constructor).copy(this)}copy(y){this.width=y.width,this.height=y.height,this.depth=y.depth,this.scissor.copy(y.scissor),this.scissorTest=y.scissorTest,this.viewport.copy(y.viewport),this.texture=y.texture.clone(),this.texture.isRenderTargetTexture=!0;const L=Object.assign({},y.texture.image);return this.texture.source=new UN(L),this.depthBuffer=y.depthBuffer,this.stencilBuffer=y.stencilBuffer,null!==y.depthTexture&&(this.depthTexture=y.depthTexture.clone()),this.samples=y.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class BN extends SN{constructor(y=1,L=1,p={}){super(y,L,p),this.isWebGLRenderTarget=!0}}class RN extends FN{constructor(y=null,L=1,p=1,N=1){super(null),this.isDataArrayTexture=!0,this.image={data:y,width:L,height:p,depth:N},this.magFilter=uy,this.minFilter=uy,this.wrapR=Vy,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class YN extends BN{constructor(y=1,L=1,p=1){super(y,L),this.isWebGLArrayRenderTarget=!0,this.depth=p,this.texture=new RN(null,y,L,p),this.texture.isRenderTargetTexture=!0}}class EN extends FN{constructor(y=null,L=1,p=1,N=1){super(null),this.isData3DTexture=!0,this.image={data:y,width:L,height:p,depth:N},this.magFilter=uy,this.minFilter=uy,this.wrapR=Vy,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class PN extends BN{constructor(y=1,L=1,p=1){super(y,L),this.isWebGL3DRenderTarget=!0,this.depth=p,this.texture=new EN(null,y,L,p),this.texture.isRenderTargetTexture=!0}}class lN extends BN{constructor(y=1,L=1,p=1,N={}){super(y,L,N),this.isWebGLMultipleRenderTargets=!0;const t=this.texture;this.texture=[];for(let y=0;y<p;y++)this.texture[y]=t.clone(),this.texture[y].isRenderTargetTexture=!0}setSize(y,L,p=1){if(this.width!==y||this.height!==L||this.depth!==p){this.width=y,this.height=L,this.depth=p;for(let N=0,t=this.texture.length;N<t;N++)this.texture[N].image.width=y,this.texture[N].image.height=L,this.texture[N].image.depth=p;this.dispose()}this.viewport.set(0,0,y,L),this.scissor.set(0,0,y,L)}copy(y){this.dispose(),this.width=y.width,this.height=y.height,this.depth=y.depth,this.scissor.copy(y.scissor),this.scissorTest=y.scissorTest,this.viewport.copy(y.viewport),this.depthBuffer=y.depthBuffer,this.stencilBuffer=y.stencilBuffer,null!==y.depthTexture&&(this.depthTexture=y.depthTexture.clone()),this.texture.length=0;for(let L=0,p=y.texture.length;L<p;L++)this.texture[L]=y.texture[L].clone(),this.texture[L].isRenderTargetTexture=!0;return this}}class MN{constructor(y=0,L=0,p=0,N=1){this.isQuaternion=!0,this._x=y,this._y=L,this._z=p,this._w=N}static slerpFlat(y,L,p,N,t,j,z){let O=p[N+0],h=p[N+1],m=p[N+2],k=p[N+3];const _=t[j+0],W=t[j+1],g=t[j+2],C=t[j+3];if(0===z)return y[L+0]=O,y[L+1]=h,y[L+2]=m,void(y[L+3]=k);if(1===z)return y[L+0]=_,y[L+1]=W,y[L+2]=g,void(y[L+3]=C);if(k!==C||O!==_||h!==W||m!==g){let y=1-z;const L=O*_+h*W+m*g+k*C,p=L>=0?1:-1,N=1-L*L;if(N>Number.EPSILON){const t=Math.sqrt(N),j=Math.atan2(t,L*p);y=Math.sin(y*j)/t,z=Math.sin(z*j)/t}const t=z*p;if(O=O*y+_*t,h=h*y+W*t,m=m*y+g*t,k=k*y+C*t,y===1-z){const y=1/Math.sqrt(O*O+h*h+m*m+k*k);O*=y,h*=y,m*=y,k*=y}}y[L]=O,y[L+1]=h,y[L+2]=m,y[L+3]=k}static multiplyQuaternionsFlat(y,L,p,N,t,j){const z=p[N],O=p[N+1],h=p[N+2],m=p[N+3],k=t[j],_=t[j+1],W=t[j+2],g=t[j+3];return y[L]=z*g+m*k+O*W-h*_,y[L+1]=O*g+m*_+h*k-z*W,y[L+2]=h*g+m*W+z*_-O*k,y[L+3]=m*g-z*k-O*_-h*W,y}get x(){return this._x}set x(y){this._x=y,this._onChangeCallback()}get y(){return this._y}set y(y){this._y=y,this._onChangeCallback()}get z(){return this._z}set z(y){this._z=y,this._onChangeCallback()}get w(){return this._w}set w(y){this._w=y,this._onChangeCallback()}set(y,L,p,N){return this._x=y,this._y=L,this._z=p,this._w=N,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(y){return this._x=y.x,this._y=y.y,this._z=y.z,this._w=y.w,this._onChangeCallback(),this}setFromEuler(y,L){const p=y._x,N=y._y,t=y._z,j=y._order,z=Math.cos,O=Math.sin,h=z(p/2),m=z(N/2),k=z(t/2),_=O(p/2),W=O(N/2),g=O(t/2);switch(j){case"XYZ":this._x=_*m*k+h*W*g,this._y=h*W*k-_*m*g,this._z=h*m*g+_*W*k,this._w=h*m*k-_*W*g;break;case"YXZ":this._x=_*m*k+h*W*g,this._y=h*W*k-_*m*g,this._z=h*m*g-_*W*k,this._w=h*m*k+_*W*g;break;case"ZXY":this._x=_*m*k-h*W*g,this._y=h*W*k+_*m*g,this._z=h*m*g+_*W*k,this._w=h*m*k-_*W*g;break;case"ZYX":this._x=_*m*k-h*W*g,this._y=h*W*k+_*m*g,this._z=h*m*g-_*W*k,this._w=h*m*k+_*W*g;break;case"YZX":this._x=_*m*k+h*W*g,this._y=h*W*k+_*m*g,this._z=h*m*g-_*W*k,this._w=h*m*k-_*W*g;break;case"XZY":this._x=_*m*k-h*W*g,this._y=h*W*k-_*m*g,this._z=h*m*g+_*W*k,this._w=h*m*k+_*W*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+j)}return!1!==L&&this._onChangeCallback(),this}setFromAxisAngle(y,L){const p=L/2,N=Math.sin(p);return this._x=y.x*N,this._y=y.y*N,this._z=y.z*N,this._w=Math.cos(p),this._onChangeCallback(),this}setFromRotationMatrix(y){const L=y.elements,p=L[0],N=L[4],t=L[8],j=L[1],z=L[5],O=L[9],h=L[2],m=L[6],k=L[10],_=p+z+k;if(_>0){const y=.5/Math.sqrt(_+1);this._w=.25/y,this._x=(m-O)*y,this._y=(t-h)*y,this._z=(j-N)*y}else if(p>z&&p>k){const y=2*Math.sqrt(1+p-z-k);this._w=(m-O)/y,this._x=.25*y,this._y=(N+j)/y,this._z=(t+h)/y}else if(z>k){const y=2*Math.sqrt(1+z-p-k);this._w=(t-h)/y,this._x=(N+j)/y,this._y=.25*y,this._z=(O+m)/y}else{const y=2*Math.sqrt(1+k-p-z);this._w=(j-N)/y,this._x=(t+h)/y,this._y=(O+m)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(y,L){let p=y.dot(L)+1;return p<Number.EPSILON?(p=0,Math.abs(y.x)>Math.abs(y.z)?(this._x=-y.y,this._y=y.x,this._z=0,this._w=p):(this._x=0,this._y=-y.z,this._z=y.y,this._w=p)):(this._x=y.y*L.z-y.z*L.y,this._y=y.z*L.x-y.x*L.z,this._z=y.x*L.y-y.y*L.x,this._w=p),this.normalize()}angleTo(y){return 2*Math.acos(Math.abs(bp(this.dot(y),-1,1)))}rotateTowards(y,L){const p=this.angleTo(y);if(0===p)return this;const N=Math.min(1,L/p);return this.slerp(y,N),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(y){return this._x*y._x+this._y*y._y+this._z*y._z+this._w*y._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let y=this.length();return 0===y?(this._x=0,this._y=0,this._z=0,this._w=1):(y=1/y,this._x=this._x*y,this._y=this._y*y,this._z=this._z*y,this._w=this._w*y),this._onChangeCallback(),this}multiply(y){return this.multiplyQuaternions(this,y)}premultiply(y){return this.multiplyQuaternions(y,this)}multiplyQuaternions(y,L){const p=y._x,N=y._y,t=y._z,j=y._w,z=L._x,O=L._y,h=L._z,m=L._w;return this._x=p*m+j*z+N*h-t*O,this._y=N*m+j*O+t*z-p*h,this._z=t*m+j*h+p*O-N*z,this._w=j*m-p*z-N*O-t*h,this._onChangeCallback(),this}slerp(y,L){if(0===L)return this;if(1===L)return this.copy(y);const p=this._x,N=this._y,t=this._z,j=this._w;let z=j*y._w+p*y._x+N*y._y+t*y._z;if(z<0?(this._w=-y._w,this._x=-y._x,this._y=-y._y,this._z=-y._z,z=-z):this.copy(y),z>=1)return this._w=j,this._x=p,this._y=N,this._z=t,this;const O=1-z*z;if(O<=Number.EPSILON){const y=1-L;return this._w=y*j+L*this._w,this._x=y*p+L*this._x,this._y=y*N+L*this._y,this._z=y*t+L*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(O),m=Math.atan2(h,z),k=Math.sin((1-L)*m)/h,_=Math.sin(L*m)/h;return this._w=j*k+this._w*_,this._x=p*k+this._x*_,this._y=N*k+this._y*_,this._z=t*k+this._z*_,this._onChangeCallback(),this}slerpQuaternions(y,L,p){return this.copy(y).slerp(L,p)}random(){const y=Math.random(),L=Math.sqrt(1-y),p=Math.sqrt(y),N=2*Math.PI*Math.random(),t=2*Math.PI*Math.random();return this.set(L*Math.cos(N),p*Math.sin(t),p*Math.cos(t),L*Math.sin(N))}equals(y){return y._x===this._x&&y._y===this._y&&y._z===this._z&&y._w===this._w}fromArray(y,L=0){return this._x=y[L],this._y=y[L+1],this._z=y[L+2],this._w=y[L+3],this._onChangeCallback(),this}toArray(y=[],L=0){return y[L]=this._x,y[L+1]=this._y,y[L+2]=this._z,y[L+3]=this._w,y}fromBufferAttribute(y,L){return this._x=y.getX(L),this._y=y.getY(L),this._z=y.getZ(L),this._w=y.getW(L),this}toJSON(){return this.toArray()}_onChange(y){return this._onChangeCallback=y,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class fN{constructor(y=0,L=0,p=0){fN.prototype.isVector3=!0,this.x=y,this.y=L,this.z=p}set(y,L,p){return void 0===p&&(p=this.z),this.x=y,this.y=L,this.z=p,this}setScalar(y){return this.x=y,this.y=y,this.z=y,this}setX(y){return this.x=y,this}setY(y){return this.y=y,this}setZ(y){return this.z=y,this}setComponent(y,L){switch(y){case 0:this.x=L;break;case 1:this.y=L;break;case 2:this.z=L;break;default:throw new Error("index is out of range: "+y)}return this}getComponent(y){switch(y){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+y)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(y){return this.x=y.x,this.y=y.y,this.z=y.z,this}add(y){return this.x+=y.x,this.y+=y.y,this.z+=y.z,this}addScalar(y){return this.x+=y,this.y+=y,this.z+=y,this}addVectors(y,L){return this.x=y.x+L.x,this.y=y.y+L.y,this.z=y.z+L.z,this}addScaledVector(y,L){return this.x+=y.x*L,this.y+=y.y*L,this.z+=y.z*L,this}sub(y){return this.x-=y.x,this.y-=y.y,this.z-=y.z,this}subScalar(y){return this.x-=y,this.y-=y,this.z-=y,this}subVectors(y,L){return this.x=y.x-L.x,this.y=y.y-L.y,this.z=y.z-L.z,this}multiply(y){return this.x*=y.x,this.y*=y.y,this.z*=y.z,this}multiplyScalar(y){return this.x*=y,this.y*=y,this.z*=y,this}multiplyVectors(y,L){return this.x=y.x*L.x,this.y=y.y*L.y,this.z=y.z*L.z,this}applyEuler(y){return this.applyQuaternion(HN.setFromEuler(y))}applyAxisAngle(y,L){return this.applyQuaternion(HN.setFromAxisAngle(y,L))}applyMatrix3(y){const L=this.x,p=this.y,N=this.z,t=y.elements;return this.x=t[0]*L+t[3]*p+t[6]*N,this.y=t[1]*L+t[4]*p+t[7]*N,this.z=t[2]*L+t[5]*p+t[8]*N,this}applyNormalMatrix(y){return this.applyMatrix3(y).normalize()}applyMatrix4(y){const L=this.x,p=this.y,N=this.z,t=y.elements,j=1/(t[3]*L+t[7]*p+t[11]*N+t[15]);return this.x=(t[0]*L+t[4]*p+t[8]*N+t[12])*j,this.y=(t[1]*L+t[5]*p+t[9]*N+t[13])*j,this.z=(t[2]*L+t[6]*p+t[10]*N+t[14])*j,this}applyQuaternion(y){const L=this.x,p=this.y,N=this.z,t=y.x,j=y.y,z=y.z,O=y.w,h=O*L+j*N-z*p,m=O*p+z*L-t*N,k=O*N+t*p-j*L,_=-t*L-j*p-z*N;return this.x=h*O+_*-t+m*-z-k*-j,this.y=m*O+_*-j+k*-t-h*-z,this.z=k*O+_*-z+h*-j-m*-t,this}project(y){return this.applyMatrix4(y.matrixWorldInverse).applyMatrix4(y.projectionMatrix)}unproject(y){return this.applyMatrix4(y.projectionMatrixInverse).applyMatrix4(y.matrixWorld)}transformDirection(y){const L=this.x,p=this.y,N=this.z,t=y.elements;return this.x=t[0]*L+t[4]*p+t[8]*N,this.y=t[1]*L+t[5]*p+t[9]*N,this.z=t[2]*L+t[6]*p+t[10]*N,this.normalize()}divide(y){return this.x/=y.x,this.y/=y.y,this.z/=y.z,this}divideScalar(y){return this.multiplyScalar(1/y)}min(y){return this.x=Math.min(this.x,y.x),this.y=Math.min(this.y,y.y),this.z=Math.min(this.z,y.z),this}max(y){return this.x=Math.max(this.x,y.x),this.y=Math.max(this.y,y.y),this.z=Math.max(this.z,y.z),this}clamp(y,L){return this.x=Math.max(y.x,Math.min(L.x,this.x)),this.y=Math.max(y.y,Math.min(L.y,this.y)),this.z=Math.max(y.z,Math.min(L.z,this.z)),this}clampScalar(y,L){return this.x=Math.max(y,Math.min(L,this.x)),this.y=Math.max(y,Math.min(L,this.y)),this.z=Math.max(y,Math.min(L,this.z)),this}clampLength(y,L){const p=this.length();return this.divideScalar(p||1).multiplyScalar(Math.max(y,Math.min(L,p)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(y){return this.x*y.x+this.y*y.y+this.z*y.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(y){return this.normalize().multiplyScalar(y)}lerp(y,L){return this.x+=(y.x-this.x)*L,this.y+=(y.y-this.y)*L,this.z+=(y.z-this.z)*L,this}lerpVectors(y,L,p){return this.x=y.x+(L.x-y.x)*p,this.y=y.y+(L.y-y.y)*p,this.z=y.z+(L.z-y.z)*p,this}cross(y){return this.crossVectors(this,y)}crossVectors(y,L){const p=y.x,N=y.y,t=y.z,j=L.x,z=L.y,O=L.z;return this.x=N*O-t*z,this.y=t*j-p*O,this.z=p*z-N*j,this}projectOnVector(y){const L=y.lengthSq();if(0===L)return this.set(0,0,0);const p=y.dot(this)/L;return this.copy(y).multiplyScalar(p)}projectOnPlane(y){return aN.copy(this).projectOnVector(y),this.sub(aN)}reflect(y){return this.sub(aN.copy(y).multiplyScalar(2*this.dot(y)))}angleTo(y){const L=Math.sqrt(this.lengthSq()*y.lengthSq());if(0===L)return Math.PI/2;const p=this.dot(y)/L;return Math.acos(bp(p,-1,1))}distanceTo(y){return Math.sqrt(this.distanceToSquared(y))}distanceToSquared(y){const L=this.x-y.x,p=this.y-y.y,N=this.z-y.z;return L*L+p*p+N*N}manhattanDistanceTo(y){return Math.abs(this.x-y.x)+Math.abs(this.y-y.y)+Math.abs(this.z-y.z)}setFromSpherical(y){return this.setFromSphericalCoords(y.radius,y.phi,y.theta)}setFromSphericalCoords(y,L,p){const N=Math.sin(L)*y;return this.x=N*Math.sin(p),this.y=Math.cos(L)*y,this.z=N*Math.cos(p),this}setFromCylindrical(y){return this.setFromCylindricalCoords(y.radius,y.theta,y.y)}setFromCylindricalCoords(y,L,p){return this.x=y*Math.sin(L),this.y=p,this.z=y*Math.cos(L),this}setFromMatrixPosition(y){const L=y.elements;return this.x=L[12],this.y=L[13],this.z=L[14],this}setFromMatrixScale(y){const L=this.setFromMatrixColumn(y,0).length(),p=this.setFromMatrixColumn(y,1).length(),N=this.setFromMatrixColumn(y,2).length();return this.x=L,this.y=p,this.z=N,this}setFromMatrixColumn(y,L){return this.fromArray(y.elements,4*L)}setFromMatrix3Column(y,L){return this.fromArray(y.elements,3*L)}setFromEuler(y){return this.x=y._x,this.y=y._y,this.z=y._z,this}setFromColor(y){return this.x=y.r,this.y=y.g,this.z=y.b,this}equals(y){return y.x===this.x&&y.y===this.y&&y.z===this.z}fromArray(y,L=0){return this.x=y[L],this.y=y[L+1],this.z=y[L+2],this}toArray(y=[],L=0){return y[L]=this.x,y[L+1]=this.y,y[L+2]=this.z,y}fromBufferAttribute(y,L){return this.x=y.getX(L),this.y=y.getY(L),this.z=y.getZ(L),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const y=2*(Math.random()-.5),L=Math.random()*Math.PI*2,p=Math.sqrt(1-y**2);return this.x=p*Math.cos(L),this.y=p*Math.sin(L),this.z=y,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const aN=new fN,HN=new MN;class XN{constructor(y=new fN(+1/0,+1/0,+1/0),L=new fN(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=y,this.max=L}set(y,L){return this.min.copy(y),this.max.copy(L),this}setFromArray(y){this.makeEmpty();for(let L=0,p=y.length;L<p;L+=3)this.expandByPoint(rN.fromArray(y,L));return this}setFromBufferAttribute(y){this.makeEmpty();for(let L=0,p=y.count;L<p;L++)this.expandByPoint(rN.fromBufferAttribute(y,L));return this}setFromPoints(y){this.makeEmpty();for(let L=0,p=y.length;L<p;L++)this.expandByPoint(y[L]);return this}setFromCenterAndSize(y,L){const p=rN.copy(L).multiplyScalar(.5);return this.min.copy(y).sub(p),this.max.copy(y).add(p),this}setFromObject(y,L=!1){return this.makeEmpty(),this.expandByObject(y,L)}clone(){return(new this.constructor).copy(this)}copy(y){return this.min.copy(y.min),this.max.copy(y.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=+1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(y){return this.isEmpty()?y.set(0,0,0):y.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(y){return this.isEmpty()?y.set(0,0,0):y.subVectors(this.max,this.min)}expandByPoint(y){return this.min.min(y),this.max.max(y),this}expandByVector(y){return this.min.sub(y),this.max.add(y),this}expandByScalar(y){return this.min.addScalar(-y),this.max.addScalar(y),this}expandByObject(y,L=!1){if(y.updateWorldMatrix(!1,!1),void 0!==y.boundingBox)null===y.boundingBox&&y.computeBoundingBox(),GN.copy(y.boundingBox),GN.applyMatrix4(y.matrixWorld),this.union(GN);else{const p=y.geometry;if(void 0!==p)if(L&&void 0!==p.attributes&&void 0!==p.attributes.position){const L=p.attributes.position;for(let p=0,N=L.count;p<N;p++)rN.fromBufferAttribute(L,p).applyMatrix4(y.matrixWorld),this.expandByPoint(rN)}else null===p.boundingBox&&p.computeBoundingBox(),GN.copy(p.boundingBox),GN.applyMatrix4(y.matrixWorld),this.union(GN)}const p=y.children;for(let y=0,N=p.length;y<N;y++)this.expandByObject(p[y],L);return this}containsPoint(y){return!(y.x<this.min.x||y.x>this.max.x||y.y<this.min.y||y.y>this.max.y||y.z<this.min.z||y.z>this.max.z)}containsBox(y){return this.min.x<=y.min.x&&y.max.x<=this.max.x&&this.min.y<=y.min.y&&y.max.y<=this.max.y&&this.min.z<=y.min.z&&y.max.z<=this.max.z}getParameter(y,L){return L.set((y.x-this.min.x)/(this.max.x-this.min.x),(y.y-this.min.y)/(this.max.y-this.min.y),(y.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(y){return!(y.max.x<this.min.x||y.min.x>this.max.x||y.max.y<this.min.y||y.min.y>this.max.y||y.max.z<this.min.z||y.min.z>this.max.z)}intersectsSphere(y){return this.clampPoint(y.center,rN),rN.distanceToSquared(y.center)<=y.radius*y.radius}intersectsPlane(y){let L,p;return y.normal.x>0?(L=y.normal.x*this.min.x,p=y.normal.x*this.max.x):(L=y.normal.x*this.max.x,p=y.normal.x*this.min.x),y.normal.y>0?(L+=y.normal.y*this.min.y,p+=y.normal.y*this.max.y):(L+=y.normal.y*this.max.y,p+=y.normal.y*this.min.y),y.normal.z>0?(L+=y.normal.z*this.min.z,p+=y.normal.z*this.max.z):(L+=y.normal.z*this.max.z,p+=y.normal.z*this.min.z),L<=-y.constant&&p>=-y.constant}intersectsTriangle(y){if(this.isEmpty())return!1;this.getCenter(bN),nN.subVectors(this.max,bN),$N.subVectors(y.a,bN),qN.subVectors(y.b,bN),AN.subVectors(y.c,bN),sN.subVectors(qN,$N),cN.subVectors(AN,qN),KN.subVectors($N,AN);let L=[0,-sN.z,sN.y,0,-cN.z,cN.y,0,-KN.z,KN.y,sN.z,0,-sN.x,cN.z,0,-cN.x,KN.z,0,-KN.x,-sN.y,sN.x,0,-cN.y,cN.x,0,-KN.y,KN.x,0];return!!ZN(L,$N,qN,AN,nN)&&(L=[1,0,0,0,1,0,0,0,1],!!ZN(L,$N,qN,AN,nN)&&(vN.crossVectors(sN,cN),L=[vN.x,vN.y,vN.z],ZN(L,$N,qN,AN,nN)))}clampPoint(y,L){return L.copy(y).clamp(this.min,this.max)}distanceToPoint(y){return this.clampPoint(y,rN).distanceTo(y)}getBoundingSphere(y){return this.isEmpty()?y.makeEmpty():(this.getCenter(y.center),y.radius=.5*this.getSize(rN).length()),y}intersect(y){return this.min.max(y.min),this.max.min(y.max),this.isEmpty()&&this.makeEmpty(),this}union(y){return this.min.min(y.min),this.max.max(y.max),this}applyMatrix4(y){return this.isEmpty()||(JN[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(y),JN[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(y),JN[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(y),JN[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(y),JN[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(y),JN[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(y),JN[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(y),JN[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(y),this.setFromPoints(JN)),this}translate(y){return this.min.add(y),this.max.add(y),this}equals(y){return y.min.equals(this.min)&&y.max.equals(this.max)}}const JN=[new fN,new fN,new fN,new fN,new fN,new fN,new fN,new fN],rN=new fN,GN=new XN,$N=new fN,qN=new fN,AN=new fN,sN=new fN,cN=new fN,KN=new fN,bN=new fN,nN=new fN,vN=new fN,eN=new fN;function ZN(y,L,p,N,t){for(let j=0,z=y.length-3;j<=z;j+=3){eN.fromArray(y,j);const z=t.x*Math.abs(eN.x)+t.y*Math.abs(eN.y)+t.z*Math.abs(eN.z),O=L.dot(eN),h=p.dot(eN),m=N.dot(eN);if(Math.max(-Math.max(O,h,m),Math.min(O,h,m))>z)return!1}return!0}const yt=new XN,Lt=new fN,pt=new fN;class Nt{constructor(y=new fN,L=-1){this.center=y,this.radius=L}set(y,L){return this.center.copy(y),this.radius=L,this}setFromPoints(y,L){const p=this.center;void 0!==L?p.copy(L):yt.setFromPoints(y).getCenter(p);let N=0;for(let L=0,t=y.length;L<t;L++)N=Math.max(N,p.distanceToSquared(y[L]));return this.radius=Math.sqrt(N),this}copy(y){return this.center.copy(y.center),this.radius=y.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(y){return y.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(y){return y.distanceTo(this.center)-this.radius}intersectsSphere(y){const L=this.radius+y.radius;return y.center.distanceToSquared(this.center)<=L*L}intersectsBox(y){return y.intersectsSphere(this)}intersectsPlane(y){return Math.abs(y.distanceToPoint(this.center))<=this.radius}clampPoint(y,L){const p=this.center.distanceToSquared(y);return L.copy(y),p>this.radius*this.radius&&(L.sub(this.center).normalize(),L.multiplyScalar(this.radius).add(this.center)),L}getBoundingBox(y){return this.isEmpty()?(y.makeEmpty(),y):(y.set(this.center,this.center),y.expandByScalar(this.radius),y)}applyMatrix4(y){return this.center.applyMatrix4(y),this.radius=this.radius*y.getMaxScaleOnAxis(),this}translate(y){return this.center.add(y),this}expandByPoint(y){if(this.isEmpty())return this.center.copy(y),this.radius=0,this;Lt.subVectors(y,this.center);const L=Lt.lengthSq();if(L>this.radius*this.radius){const y=Math.sqrt(L),p=.5*(y-this.radius);this.center.addScaledVector(Lt,p/y),this.radius+=p}return this}union(y){return y.isEmpty()?this:this.isEmpty()?(this.copy(y),this):(!0===this.center.equals(y.center)?this.radius=Math.max(this.radius,y.radius):(pt.subVectors(y.center,this.center).setLength(y.radius),this.expandByPoint(Lt.copy(y.center).add(pt)),this.expandByPoint(Lt.copy(y.center).sub(pt))),this)}equals(y){return y.center.equals(this.center)&&y.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const tt=new fN,jt=new fN,zt=new fN,Ot=new fN,ht=new fN,mt=new fN,kt=new fN;class _t{constructor(y=new fN,L=new fN(0,0,-1)){this.origin=y,this.direction=L}set(y,L){return this.origin.copy(y),this.direction.copy(L),this}copy(y){return this.origin.copy(y.origin),this.direction.copy(y.direction),this}at(y,L){return L.copy(this.origin).addScaledVector(this.direction,y)}lookAt(y){return this.direction.copy(y).sub(this.origin).normalize(),this}recast(y){return this.origin.copy(this.at(y,tt)),this}closestPointToPoint(y,L){L.subVectors(y,this.origin);const p=L.dot(this.direction);return p<0?L.copy(this.origin):L.copy(this.origin).addScaledVector(this.direction,p)}distanceToPoint(y){return Math.sqrt(this.distanceSqToPoint(y))}distanceSqToPoint(y){const L=tt.subVectors(y,this.origin).dot(this.direction);return L<0?this.origin.distanceToSquared(y):(tt.copy(this.origin).addScaledVector(this.direction,L),tt.distanceToSquared(y))}distanceSqToSegment(y,L,p,N){jt.copy(y).add(L).multiplyScalar(.5),zt.copy(L).sub(y).normalize(),Ot.copy(this.origin).sub(jt);const t=.5*y.distanceTo(L),j=-this.direction.dot(zt),z=Ot.dot(this.direction),O=-Ot.dot(zt),h=Ot.lengthSq(),m=Math.abs(1-j*j);let k,_,W,g;if(m>0)if(k=j*O-z,_=j*z-O,g=t*m,k>=0)if(_>=-g)if(_<=g){const y=1/m;k*=y,_*=y,W=k*(k+j*_+2*z)+_*(j*k+_+2*O)+h}else _=t,k=Math.max(0,-(j*_+z)),W=-k*k+_*(_+2*O)+h;else _=-t,k=Math.max(0,-(j*_+z)),W=-k*k+_*(_+2*O)+h;else _<=-g?(k=Math.max(0,-(-j*t+z)),_=k>0?-t:Math.min(Math.max(-t,-O),t),W=-k*k+_*(_+2*O)+h):_<=g?(k=0,_=Math.min(Math.max(-t,-O),t),W=_*(_+2*O)+h):(k=Math.max(0,-(j*t+z)),_=k>0?t:Math.min(Math.max(-t,-O),t),W=-k*k+_*(_+2*O)+h);else _=j>0?-t:t,k=Math.max(0,-(j*_+z)),W=-k*k+_*(_+2*O)+h;return p&&p.copy(this.origin).addScaledVector(this.direction,k),N&&N.copy(jt).addScaledVector(zt,_),W}intersectSphere(y,L){tt.subVectors(y.center,this.origin);const p=tt.dot(this.direction),N=tt.dot(tt)-p*p,t=y.radius*y.radius;if(N>t)return null;const j=Math.sqrt(t-N),z=p-j,O=p+j;return O<0?null:z<0?this.at(O,L):this.at(z,L)}intersectsSphere(y){return this.distanceSqToPoint(y.center)<=y.radius*y.radius}distanceToPlane(y){const L=y.normal.dot(this.direction);if(0===L)return 0===y.distanceToPoint(this.origin)?0:null;const p=-(this.origin.dot(y.normal)+y.constant)/L;return p>=0?p:null}intersectPlane(y,L){const p=this.distanceToPlane(y);return null===p?null:this.at(p,L)}intersectsPlane(y){const L=y.distanceToPoint(this.origin);return 0===L||y.normal.dot(this.direction)*L<0}intersectBox(y,L){let p,N,t,j,z,O;const h=1/this.direction.x,m=1/this.direction.y,k=1/this.direction.z,_=this.origin;return h>=0?(p=(y.min.x-_.x)*h,N=(y.max.x-_.x)*h):(p=(y.max.x-_.x)*h,N=(y.min.x-_.x)*h),m>=0?(t=(y.min.y-_.y)*m,j=(y.max.y-_.y)*m):(t=(y.max.y-_.y)*m,j=(y.min.y-_.y)*m),p>j||t>N?null:((t>p||isNaN(p))&&(p=t),(j<N||isNaN(N))&&(N=j),k>=0?(z=(y.min.z-_.z)*k,O=(y.max.z-_.z)*k):(z=(y.max.z-_.z)*k,O=(y.min.z-_.z)*k),p>O||z>N?null:((z>p||p!=p)&&(p=z),(O<N||N!=N)&&(N=O),N<0?null:this.at(p>=0?p:N,L)))}intersectsBox(y){return null!==this.intersectBox(y,tt)}intersectTriangle(y,L,p,N,t){ht.subVectors(L,y),mt.subVectors(p,y),kt.crossVectors(ht,mt);let j,z=this.direction.dot(kt);if(z>0){if(N)return null;j=1}else{if(!(z<0))return null;j=-1,z=-z}Ot.subVectors(this.origin,y);const O=j*this.direction.dot(mt.crossVectors(Ot,mt));if(O<0)return null;const h=j*this.direction.dot(ht.cross(Ot));if(h<0)return null;if(O+h>z)return null;const m=-j*Ot.dot(kt);return m<0?null:this.at(m/z,t)}applyMatrix4(y){return this.origin.applyMatrix4(y),this.direction.transformDirection(y),this}equals(y){return y.origin.equals(this.origin)&&y.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Wt{constructor(y,L,p,N,t,j,z,O,h,m,k,_,W,g,C,Q){Wt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==y&&this.set(y,L,p,N,t,j,z,O,h,m,k,_,W,g,C,Q)}set(y,L,p,N,t,j,z,O,h,m,k,_,W,g,C,Q){const T=this.elements;return T[0]=y,T[4]=L,T[8]=p,T[12]=N,T[1]=t,T[5]=j,T[9]=z,T[13]=O,T[2]=h,T[6]=m,T[10]=k,T[14]=_,T[3]=W,T[7]=g,T[11]=C,T[15]=Q,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Wt).fromArray(this.elements)}copy(y){const L=this.elements,p=y.elements;return L[0]=p[0],L[1]=p[1],L[2]=p[2],L[3]=p[3],L[4]=p[4],L[5]=p[5],L[6]=p[6],L[7]=p[7],L[8]=p[8],L[9]=p[9],L[10]=p[10],L[11]=p[11],L[12]=p[12],L[13]=p[13],L[14]=p[14],L[15]=p[15],this}copyPosition(y){const L=this.elements,p=y.elements;return L[12]=p[12],L[13]=p[13],L[14]=p[14],this}setFromMatrix3(y){const L=y.elements;return this.set(L[0],L[3],L[6],0,L[1],L[4],L[7],0,L[2],L[5],L[8],0,0,0,0,1),this}extractBasis(y,L,p){return y.setFromMatrixColumn(this,0),L.setFromMatrixColumn(this,1),p.setFromMatrixColumn(this,2),this}makeBasis(y,L,p){return this.set(y.x,L.x,p.x,0,y.y,L.y,p.y,0,y.z,L.z,p.z,0,0,0,0,1),this}extractRotation(y){const L=this.elements,p=y.elements,N=1/gt.setFromMatrixColumn(y,0).length(),t=1/gt.setFromMatrixColumn(y,1).length(),j=1/gt.setFromMatrixColumn(y,2).length();return L[0]=p[0]*N,L[1]=p[1]*N,L[2]=p[2]*N,L[3]=0,L[4]=p[4]*t,L[5]=p[5]*t,L[6]=p[6]*t,L[7]=0,L[8]=p[8]*j,L[9]=p[9]*j,L[10]=p[10]*j,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,this}makeRotationFromEuler(y){const L=this.elements,p=y.x,N=y.y,t=y.z,j=Math.cos(p),z=Math.sin(p),O=Math.cos(N),h=Math.sin(N),m=Math.cos(t),k=Math.sin(t);if("XYZ"===y.order){const y=j*m,p=j*k,N=z*m,t=z*k;L[0]=O*m,L[4]=-O*k,L[8]=h,L[1]=p+N*h,L[5]=y-t*h,L[9]=-z*O,L[2]=t-y*h,L[6]=N+p*h,L[10]=j*O}else if("YXZ"===y.order){const y=O*m,p=O*k,N=h*m,t=h*k;L[0]=y+t*z,L[4]=N*z-p,L[8]=j*h,L[1]=j*k,L[5]=j*m,L[9]=-z,L[2]=p*z-N,L[6]=t+y*z,L[10]=j*O}else if("ZXY"===y.order){const y=O*m,p=O*k,N=h*m,t=h*k;L[0]=y-t*z,L[4]=-j*k,L[8]=N+p*z,L[1]=p+N*z,L[5]=j*m,L[9]=t-y*z,L[2]=-j*h,L[6]=z,L[10]=j*O}else if("ZYX"===y.order){const y=j*m,p=j*k,N=z*m,t=z*k;L[0]=O*m,L[4]=N*h-p,L[8]=y*h+t,L[1]=O*k,L[5]=t*h+y,L[9]=p*h-N,L[2]=-h,L[6]=z*O,L[10]=j*O}else if("YZX"===y.order){const y=j*O,p=j*h,N=z*O,t=z*h;L[0]=O*m,L[4]=t-y*k,L[8]=N*k+p,L[1]=k,L[5]=j*m,L[9]=-z*m,L[2]=-h*m,L[6]=p*k+N,L[10]=y-t*k}else if("XZY"===y.order){const y=j*O,p=j*h,N=z*O,t=z*h;L[0]=O*m,L[4]=-k,L[8]=h*m,L[1]=y*k+t,L[5]=j*m,L[9]=p*k-N,L[2]=N*k-p,L[6]=z*m,L[10]=t*k+y}return L[3]=0,L[7]=0,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,this}makeRotationFromQuaternion(y){return this.compose(Qt,y,Tt)}lookAt(y,L,p){const N=this.elements;return wt.subVectors(y,L),0===wt.lengthSq()&&(wt.z=1),wt.normalize(),it.crossVectors(p,wt),0===it.lengthSq()&&(1===Math.abs(p.z)?wt.x+=1e-4:wt.z+=1e-4,wt.normalize(),it.crossVectors(p,wt)),it.normalize(),Dt.crossVectors(wt,it),N[0]=it.x,N[4]=Dt.x,N[8]=wt.x,N[1]=it.y,N[5]=Dt.y,N[9]=wt.y,N[2]=it.z,N[6]=Dt.z,N[10]=wt.z,this}multiply(y){return this.multiplyMatrices(this,y)}premultiply(y){return this.multiplyMatrices(y,this)}multiplyMatrices(y,L){const p=y.elements,N=L.elements,t=this.elements,j=p[0],z=p[4],O=p[8],h=p[12],m=p[1],k=p[5],_=p[9],W=p[13],g=p[2],C=p[6],Q=p[10],T=p[14],i=p[3],D=p[7],w=p[11],x=p[15],d=N[0],o=N[4],U=N[8],I=N[12],V=N[1],F=N[5],u=N[9],S=N[13],B=N[2],R=N[6],Y=N[10],E=N[14],P=N[3],l=N[7],M=N[11],f=N[15];return t[0]=j*d+z*V+O*B+h*P,t[4]=j*o+z*F+O*R+h*l,t[8]=j*U+z*u+O*Y+h*M,t[12]=j*I+z*S+O*E+h*f,t[1]=m*d+k*V+_*B+W*P,t[5]=m*o+k*F+_*R+W*l,t[9]=m*U+k*u+_*Y+W*M,t[13]=m*I+k*S+_*E+W*f,t[2]=g*d+C*V+Q*B+T*P,t[6]=g*o+C*F+Q*R+T*l,t[10]=g*U+C*u+Q*Y+T*M,t[14]=g*I+C*S+Q*E+T*f,t[3]=i*d+D*V+w*B+x*P,t[7]=i*o+D*F+w*R+x*l,t[11]=i*U+D*u+w*Y+x*M,t[15]=i*I+D*S+w*E+x*f,this}multiplyScalar(y){const L=this.elements;return L[0]*=y,L[4]*=y,L[8]*=y,L[12]*=y,L[1]*=y,L[5]*=y,L[9]*=y,L[13]*=y,L[2]*=y,L[6]*=y,L[10]*=y,L[14]*=y,L[3]*=y,L[7]*=y,L[11]*=y,L[15]*=y,this}determinant(){const y=this.elements,L=y[0],p=y[4],N=y[8],t=y[12],j=y[1],z=y[5],O=y[9],h=y[13],m=y[2],k=y[6],_=y[10],W=y[14];return y[3]*(+t*O*k-N*h*k-t*z*_+p*h*_+N*z*W-p*O*W)+y[7]*(+L*O*W-L*h*_+t*j*_-N*j*W+N*h*m-t*O*m)+y[11]*(+L*h*k-L*z*W-t*j*k+p*j*W+t*z*m-p*h*m)+y[15]*(-N*z*m-L*O*k+L*z*_+N*j*k-p*j*_+p*O*m)}transpose(){const y=this.elements;let L;return L=y[1],y[1]=y[4],y[4]=L,L=y[2],y[2]=y[8],y[8]=L,L=y[6],y[6]=y[9],y[9]=L,L=y[3],y[3]=y[12],y[12]=L,L=y[7],y[7]=y[13],y[13]=L,L=y[11],y[11]=y[14],y[14]=L,this}setPosition(y,L,p){const N=this.elements;return y.isVector3?(N[12]=y.x,N[13]=y.y,N[14]=y.z):(N[12]=y,N[13]=L,N[14]=p),this}invert(){const y=this.elements,L=y[0],p=y[1],N=y[2],t=y[3],j=y[4],z=y[5],O=y[6],h=y[7],m=y[8],k=y[9],_=y[10],W=y[11],g=y[12],C=y[13],Q=y[14],T=y[15],i=k*Q*h-C*_*h+C*O*W-z*Q*W-k*O*T+z*_*T,D=g*_*h-m*Q*h-g*O*W+j*Q*W+m*O*T-j*_*T,w=m*C*h-g*k*h+g*z*W-j*C*W-m*z*T+j*k*T,x=g*k*O-m*C*O-g*z*_+j*C*_+m*z*Q-j*k*Q,d=L*i+p*D+N*w+t*x;if(0===d)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const o=1/d;return y[0]=i*o,y[1]=(C*_*t-k*Q*t-C*N*W+p*Q*W+k*N*T-p*_*T)*o,y[2]=(z*Q*t-C*O*t+C*N*h-p*Q*h-z*N*T+p*O*T)*o,y[3]=(k*O*t-z*_*t-k*N*h+p*_*h+z*N*W-p*O*W)*o,y[4]=D*o,y[5]=(m*Q*t-g*_*t+g*N*W-L*Q*W-m*N*T+L*_*T)*o,y[6]=(g*O*t-j*Q*t-g*N*h+L*Q*h+j*N*T-L*O*T)*o,y[7]=(j*_*t-m*O*t+m*N*h-L*_*h-j*N*W+L*O*W)*o,y[8]=w*o,y[9]=(g*k*t-m*C*t-g*p*W+L*C*W+m*p*T-L*k*T)*o,y[10]=(j*C*t-g*z*t+g*p*h-L*C*h-j*p*T+L*z*T)*o,y[11]=(m*z*t-j*k*t-m*p*h+L*k*h+j*p*W-L*z*W)*o,y[12]=x*o,y[13]=(m*C*N-g*k*N+g*p*_-L*C*_-m*p*Q+L*k*Q)*o,y[14]=(g*z*N-j*C*N-g*p*O+L*C*O+j*p*Q-L*z*Q)*o,y[15]=(j*k*N-m*z*N+m*p*O-L*k*O-j*p*_+L*z*_)*o,this}scale(y){const L=this.elements,p=y.x,N=y.y,t=y.z;return L[0]*=p,L[4]*=N,L[8]*=t,L[1]*=p,L[5]*=N,L[9]*=t,L[2]*=p,L[6]*=N,L[10]*=t,L[3]*=p,L[7]*=N,L[11]*=t,this}getMaxScaleOnAxis(){const y=this.elements,L=y[0]*y[0]+y[1]*y[1]+y[2]*y[2],p=y[4]*y[4]+y[5]*y[5]+y[6]*y[6],N=y[8]*y[8]+y[9]*y[9]+y[10]*y[10];return Math.sqrt(Math.max(L,p,N))}makeTranslation(y,L,p){return y.isVector3?this.set(1,0,0,y.x,0,1,0,y.y,0,0,1,y.z,0,0,0,1):this.set(1,0,0,y,0,1,0,L,0,0,1,p,0,0,0,1),this}makeRotationX(y){const L=Math.cos(y),p=Math.sin(y);return this.set(1,0,0,0,0,L,-p,0,0,p,L,0,0,0,0,1),this}makeRotationY(y){const L=Math.cos(y),p=Math.sin(y);return this.set(L,0,p,0,0,1,0,0,-p,0,L,0,0,0,0,1),this}makeRotationZ(y){const L=Math.cos(y),p=Math.sin(y);return this.set(L,-p,0,0,p,L,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(y,L){const p=Math.cos(L),N=Math.sin(L),t=1-p,j=y.x,z=y.y,O=y.z,h=t*j,m=t*z;return this.set(h*j+p,h*z-N*O,h*O+N*z,0,h*z+N*O,m*z+p,m*O-N*j,0,h*O-N*z,m*O+N*j,t*O*O+p,0,0,0,0,1),this}makeScale(y,L,p){return this.set(y,0,0,0,0,L,0,0,0,0,p,0,0,0,0,1),this}makeShear(y,L,p,N,t,j){return this.set(1,p,t,0,y,1,j,0,L,N,1,0,0,0,0,1),this}compose(y,L,p){const N=this.elements,t=L._x,j=L._y,z=L._z,O=L._w,h=t+t,m=j+j,k=z+z,_=t*h,W=t*m,g=t*k,C=j*m,Q=j*k,T=z*k,i=O*h,D=O*m,w=O*k,x=p.x,d=p.y,o=p.z;return N[0]=(1-(C+T))*x,N[1]=(W+w)*x,N[2]=(g-D)*x,N[3]=0,N[4]=(W-w)*d,N[5]=(1-(_+T))*d,N[6]=(Q+i)*d,N[7]=0,N[8]=(g+D)*o,N[9]=(Q-i)*o,N[10]=(1-(_+C))*o,N[11]=0,N[12]=y.x,N[13]=y.y,N[14]=y.z,N[15]=1,this}decompose(y,L,p){const N=this.elements;let t=gt.set(N[0],N[1],N[2]).length();const j=gt.set(N[4],N[5],N[6]).length(),z=gt.set(N[8],N[9],N[10]).length();this.determinant()<0&&(t=-t),y.x=N[12],y.y=N[13],y.z=N[14],Ct.copy(this);const O=1/t,h=1/j,m=1/z;return Ct.elements[0]*=O,Ct.elements[1]*=O,Ct.elements[2]*=O,Ct.elements[4]*=h,Ct.elements[5]*=h,Ct.elements[6]*=h,Ct.elements[8]*=m,Ct.elements[9]*=m,Ct.elements[10]*=m,L.setFromRotationMatrix(Ct),p.x=t,p.y=j,p.z=z,this}makePerspective(y,L,p,N,t,j,z=rp){const O=this.elements,h=2*t/(L-y),m=2*t/(p-N),k=(L+y)/(L-y),_=(p+N)/(p-N);let W,g;if(z===rp)W=-(j+t)/(j-t),g=-2*j*t/(j-t);else{if(z!==Gp)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+z);W=-j/(j-t),g=-j*t/(j-t)}return O[0]=h,O[4]=0,O[8]=k,O[12]=0,O[1]=0,O[5]=m,O[9]=_,O[13]=0,O[2]=0,O[6]=0,O[10]=W,O[14]=g,O[3]=0,O[7]=0,O[11]=-1,O[15]=0,this}makeOrthographic(y,L,p,N,t,j,z=rp){const O=this.elements,h=1/(L-y),m=1/(p-N),k=1/(j-t),_=(L+y)*h,W=(p+N)*m;let g,C;if(z===rp)g=(j+t)*k,C=-2*k;else{if(z!==Gp)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+z);g=t*k,C=-1*k}return O[0]=2*h,O[4]=0,O[8]=0,O[12]=-_,O[1]=0,O[5]=2*m,O[9]=0,O[13]=-W,O[2]=0,O[6]=0,O[10]=C,O[14]=-g,O[3]=0,O[7]=0,O[11]=0,O[15]=1,this}equals(y){const L=this.elements,p=y.elements;for(let y=0;y<16;y++)if(L[y]!==p[y])return!1;return!0}fromArray(y,L=0){for(let p=0;p<16;p++)this.elements[p]=y[p+L];return this}toArray(y=[],L=0){const p=this.elements;return y[L]=p[0],y[L+1]=p[1],y[L+2]=p[2],y[L+3]=p[3],y[L+4]=p[4],y[L+5]=p[5],y[L+6]=p[6],y[L+7]=p[7],y[L+8]=p[8],y[L+9]=p[9],y[L+10]=p[10],y[L+11]=p[11],y[L+12]=p[12],y[L+13]=p[13],y[L+14]=p[14],y[L+15]=p[15],y}}const gt=new fN,Ct=new Wt,Qt=new fN(0,0,0),Tt=new fN(1,1,1),it=new fN,Dt=new fN,wt=new fN,xt=new Wt,dt=new MN;class ot{constructor(y=0,L=0,p=0,N=ot.DEFAULT_ORDER){this.isEuler=!0,this._x=y,this._y=L,this._z=p,this._order=N}get x(){return this._x}set x(y){this._x=y,this._onChangeCallback()}get y(){return this._y}set y(y){this._y=y,this._onChangeCallback()}get z(){return this._z}set z(y){this._z=y,this._onChangeCallback()}get order(){return this._order}set order(y){this._order=y,this._onChangeCallback()}set(y,L,p,N=this._order){return this._x=y,this._y=L,this._z=p,this._order=N,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(y){return this._x=y._x,this._y=y._y,this._z=y._z,this._order=y._order,this._onChangeCallback(),this}setFromRotationMatrix(y,L=this._order,p=!0){const N=y.elements,t=N[0],j=N[4],z=N[8],O=N[1],h=N[5],m=N[9],k=N[2],_=N[6],W=N[10];switch(L){case"XYZ":this._y=Math.asin(bp(z,-1,1)),Math.abs(z)<.9999999?(this._x=Math.atan2(-m,W),this._z=Math.atan2(-j,t)):(this._x=Math.atan2(_,h),this._z=0);break;case"YXZ":this._x=Math.asin(-bp(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(z,W),this._z=Math.atan2(O,h)):(this._y=Math.atan2(-k,t),this._z=0);break;case"ZXY":this._x=Math.asin(bp(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-k,W),this._z=Math.atan2(-j,h)):(this._y=0,this._z=Math.atan2(O,t));break;case"ZYX":this._y=Math.asin(-bp(k,-1,1)),Math.abs(k)<.9999999?(this._x=Math.atan2(_,W),this._z=Math.atan2(O,t)):(this._x=0,this._z=Math.atan2(-j,h));break;case"YZX":this._z=Math.asin(bp(O,-1,1)),Math.abs(O)<.9999999?(this._x=Math.atan2(-m,h),this._y=Math.atan2(-k,t)):(this._x=0,this._y=Math.atan2(z,W));break;case"XZY":this._z=Math.asin(-bp(j,-1,1)),Math.abs(j)<.9999999?(this._x=Math.atan2(_,h),this._y=Math.atan2(z,t)):(this._x=Math.atan2(-m,W),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+L)}return this._order=L,!0===p&&this._onChangeCallback(),this}setFromQuaternion(y,L,p){return xt.makeRotationFromQuaternion(y),this.setFromRotationMatrix(xt,L,p)}setFromVector3(y,L=this._order){return this.set(y.x,y.y,y.z,L)}reorder(y){return dt.setFromEuler(this),this.setFromQuaternion(dt,y)}equals(y){return y._x===this._x&&y._y===this._y&&y._z===this._z&&y._order===this._order}fromArray(y){return this._x=y[0],this._y=y[1],this._z=y[2],void 0!==y[3]&&(this._order=y[3]),this._onChangeCallback(),this}toArray(y=[],L=0){return y[L]=this._x,y[L+1]=this._y,y[L+2]=this._z,y[L+3]=this._order,y}_onChange(y){return this._onChangeCallback=y,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ot.DEFAULT_ORDER="XYZ";class Ut{constructor(){this.mask=1|0}set(y){this.mask=(1<<y|0)>>>0}enable(y){this.mask|=1<<y|0}enableAll(){this.mask=4294967295|0}toggle(y){this.mask^=1<<y|0}disable(y){this.mask&=~(1<<y|0)}disableAll(){this.mask=0}test(y){return!!(this.mask&y.mask)}isEnabled(y){return!!(this.mask&(1<<y|0))}}let It=0;const Vt=new fN,Ft=new MN,ut=new Wt,St=new fN,Bt=new fN,Rt=new fN,Yt=new MN,Et=new fN(1,0,0),Pt=new fN(0,1,0),lt=new fN(0,0,1),Mt={type:"added"},ft={type:"removed"};class at extends $p{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:It++}),this.uuid=Kp(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=at.DEFAULT_UP.clone();const y=new fN,L=new ot,p=new MN,N=new fN(1,1,1);L._onChange((function(){p.setFromEuler(L,!1)})),p._onChange((function(){L.setFromQuaternion(p,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:y},rotation:{configurable:!0,enumerable:!0,value:L},quaternion:{configurable:!0,enumerable:!0,value:p},scale:{configurable:!0,enumerable:!0,value:N},modelViewMatrix:{value:new Wt},normalMatrix:{value:new jN}}),this.matrix=new Wt,this.matrixWorld=new Wt,this.matrixAutoUpdate=at.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=at.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Ut,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(y){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(y),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(y){return this.quaternion.premultiply(y),this}setRotationFromAxisAngle(y,L){this.quaternion.setFromAxisAngle(y,L)}setRotationFromEuler(y){this.quaternion.setFromEuler(y,!0)}setRotationFromMatrix(y){this.quaternion.setFromRotationMatrix(y)}setRotationFromQuaternion(y){this.quaternion.copy(y)}rotateOnAxis(y,L){return Ft.setFromAxisAngle(y,L),this.quaternion.multiply(Ft),this}rotateOnWorldAxis(y,L){return Ft.setFromAxisAngle(y,L),this.quaternion.premultiply(Ft),this}rotateX(y){return this.rotateOnAxis(Et,y)}rotateY(y){return this.rotateOnAxis(Pt,y)}rotateZ(y){return this.rotateOnAxis(lt,y)}translateOnAxis(y,L){return Vt.copy(y).applyQuaternion(this.quaternion),this.position.add(Vt.multiplyScalar(L)),this}translateX(y){return this.translateOnAxis(Et,y)}translateY(y){return this.translateOnAxis(Pt,y)}translateZ(y){return this.translateOnAxis(lt,y)}localToWorld(y){return this.updateWorldMatrix(!0,!1),y.applyMatrix4(this.matrixWorld)}worldToLocal(y){return this.updateWorldMatrix(!0,!1),y.applyMatrix4(ut.copy(this.matrixWorld).invert())}lookAt(y,L,p){y.isVector3?St.copy(y):St.set(y,L,p);const N=this.parent;this.updateWorldMatrix(!0,!1),Bt.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ut.lookAt(Bt,St,this.up):ut.lookAt(St,Bt,this.up),this.quaternion.setFromRotationMatrix(ut),N&&(ut.extractRotation(N.matrixWorld),Ft.setFromRotationMatrix(ut),this.quaternion.premultiply(Ft.invert()))}add(y){if(arguments.length>1){for(let y=0;y<arguments.length;y++)this.add(arguments[y]);return this}return y===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",y),this):(y&&y.isObject3D?(null!==y.parent&&y.parent.remove(y),y.parent=this,this.children.push(y),y.dispatchEvent(Mt)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",y),this)}remove(y){if(arguments.length>1){for(let y=0;y<arguments.length;y++)this.remove(arguments[y]);return this}const L=this.children.indexOf(y);return-1!==L&&(y.parent=null,this.children.splice(L,1),y.dispatchEvent(ft)),this}removeFromParent(){const y=this.parent;return null!==y&&y.remove(this),this}clear(){for(let y=0;y<this.children.length;y++){const L=this.children[y];L.parent=null,L.dispatchEvent(ft)}return this.children.length=0,this}attach(y){return this.updateWorldMatrix(!0,!1),ut.copy(this.matrixWorld).invert(),null!==y.parent&&(y.parent.updateWorldMatrix(!0,!1),ut.multiply(y.parent.matrixWorld)),y.applyMatrix4(ut),this.add(y),y.updateWorldMatrix(!1,!0),this}getObjectById(y){return this.getObjectByProperty("id",y)}getObjectByName(y){return this.getObjectByProperty("name",y)}getObjectByProperty(y,L){if(this[y]===L)return this;for(let p=0,N=this.children.length;p<N;p++){const N=this.children[p].getObjectByProperty(y,L);if(void 0!==N)return N}}getObjectsByProperty(y,L){let p=[];this[y]===L&&p.push(this);for(let N=0,t=this.children.length;N<t;N++){const t=this.children[N].getObjectsByProperty(y,L);t.length>0&&(p=p.concat(t))}return p}getWorldPosition(y){return this.updateWorldMatrix(!0,!1),y.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(y){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Bt,y,Rt),y}getWorldScale(y){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Bt,Yt,y),y}getWorldDirection(y){this.updateWorldMatrix(!0,!1);const L=this.matrixWorld.elements;return y.set(L[8],L[9],L[10]).normalize()}raycast(){}traverse(y){y(this);const L=this.children;for(let p=0,N=L.length;p<N;p++)L[p].traverse(y)}traverseVisible(y){if(!1===this.visible)return;y(this);const L=this.children;for(let p=0,N=L.length;p<N;p++)L[p].traverseVisible(y)}traverseAncestors(y){const L=this.parent;null!==L&&(y(L),L.traverseAncestors(y))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(y){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||y)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,y=!0);const L=this.children;for(let p=0,N=L.length;p<N;p++){const N=L[p];!0!==N.matrixWorldAutoUpdate&&!0!==y||N.updateMatrixWorld(y)}}updateWorldMatrix(y,L){const p=this.parent;if(!0===y&&null!==p&&!0===p.matrixWorldAutoUpdate&&p.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===L){const y=this.children;for(let L=0,p=y.length;L<p;L++){const p=y[L];!0===p.matrixWorldAutoUpdate&&p.updateWorldMatrix(!1,!0)}}}toJSON(y){const L=void 0===y||"string"==typeof y,p={};L&&(y={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},p.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const N={};function t(L,p){return void 0===L[p.uuid]&&(L[p.uuid]=p.toJSON(y)),p.uuid}if(N.uuid=this.uuid,N.type=this.type,""!==this.name&&(N.name=this.name),!0===this.castShadow&&(N.castShadow=!0),!0===this.receiveShadow&&(N.receiveShadow=!0),!1===this.visible&&(N.visible=!1),!1===this.frustumCulled&&(N.frustumCulled=!1),0!==this.renderOrder&&(N.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(N.userData=this.userData),N.layers=this.layers.mask,N.matrix=this.matrix.toArray(),N.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(N.matrixAutoUpdate=!1),this.isInstancedMesh&&(N.type="InstancedMesh",N.count=this.count,N.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(N.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?N.background=this.background.toJSON():this.background.isTexture&&(N.background=this.background.toJSON(y).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(N.environment=this.environment.toJSON(y).uuid);else if(this.isMesh||this.isLine||this.isPoints){N.geometry=t(y.geometries,this.geometry);const L=this.geometry.parameters;if(void 0!==L&&void 0!==L.shapes){const p=L.shapes;if(Array.isArray(p))for(let L=0,N=p.length;L<N;L++){const N=p[L];t(y.shapes,N)}else t(y.shapes,p)}}if(this.isSkinnedMesh&&(N.bindMode=this.bindMode,N.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(t(y.skeletons,this.skeleton),N.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const L=[];for(let p=0,N=this.material.length;p<N;p++)L.push(t(y.materials,this.material[p]));N.material=L}else N.material=t(y.materials,this.material);if(this.children.length>0){N.children=[];for(let L=0;L<this.children.length;L++)N.children.push(this.children[L].toJSON(y).object)}if(this.animations.length>0){N.animations=[];for(let L=0;L<this.animations.length;L++){const p=this.animations[L];N.animations.push(t(y.animations,p))}}if(L){const L=j(y.geometries),N=j(y.materials),t=j(y.textures),z=j(y.images),O=j(y.shapes),h=j(y.skeletons),m=j(y.animations),k=j(y.nodes);L.length>0&&(p.geometries=L),N.length>0&&(p.materials=N),t.length>0&&(p.textures=t),z.length>0&&(p.images=z),O.length>0&&(p.shapes=O),h.length>0&&(p.skeletons=h),m.length>0&&(p.animations=m),k.length>0&&(p.nodes=k)}return p.object=N,p;function j(y){const L=[];for(const p in y){const N=y[p];delete N.metadata,L.push(N)}return L}}clone(y){return(new this.constructor).copy(this,y)}copy(y,L=!0){if(this.name=y.name,this.up.copy(y.up),this.position.copy(y.position),this.rotation.order=y.rotation.order,this.quaternion.copy(y.quaternion),this.scale.copy(y.scale),this.matrix.copy(y.matrix),this.matrixWorld.copy(y.matrixWorld),this.matrixAutoUpdate=y.matrixAutoUpdate,this.matrixWorldNeedsUpdate=y.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=y.matrixWorldAutoUpdate,this.layers.mask=y.layers.mask,this.visible=y.visible,this.castShadow=y.castShadow,this.receiveShadow=y.receiveShadow,this.frustumCulled=y.frustumCulled,this.renderOrder=y.renderOrder,this.animations=y.animations.slice(),this.userData=JSON.parse(JSON.stringify(y.userData)),!0===L)for(let L=0;L<y.children.length;L++){const p=y.children[L];this.add(p.clone())}return this}}at.DEFAULT_UP=new fN(0,1,0),at.DEFAULT_MATRIX_AUTO_UPDATE=!0,at.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ht=new fN,Xt=new fN,Jt=new fN,rt=new fN,Gt=new fN,$t=new fN,qt=new fN,At=new fN,st=new fN,ct=new fN;let Kt=!1;class bt{constructor(y=new fN,L=new fN,p=new fN){this.a=y,this.b=L,this.c=p}static getNormal(y,L,p,N){N.subVectors(p,L),Ht.subVectors(y,L),N.cross(Ht);const t=N.lengthSq();return t>0?N.multiplyScalar(1/Math.sqrt(t)):N.set(0,0,0)}static getBarycoord(y,L,p,N,t){Ht.subVectors(N,L),Xt.subVectors(p,L),Jt.subVectors(y,L);const j=Ht.dot(Ht),z=Ht.dot(Xt),O=Ht.dot(Jt),h=Xt.dot(Xt),m=Xt.dot(Jt),k=j*h-z*z;if(0===k)return t.set(-2,-1,-1);const _=1/k,W=(h*O-z*m)*_,g=(j*m-z*O)*_;return t.set(1-W-g,g,W)}static containsPoint(y,L,p,N){return this.getBarycoord(y,L,p,N,rt),rt.x>=0&&rt.y>=0&&rt.x+rt.y<=1}static getUV(y,L,p,N,t,j,z,O){return!1===Kt&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Kt=!0),this.getInterpolation(y,L,p,N,t,j,z,O)}static getInterpolation(y,L,p,N,t,j,z,O){return this.getBarycoord(y,L,p,N,rt),O.setScalar(0),O.addScaledVector(t,rt.x),O.addScaledVector(j,rt.y),O.addScaledVector(z,rt.z),O}static isFrontFacing(y,L,p,N){return Ht.subVectors(p,L),Xt.subVectors(y,L),Ht.cross(Xt).dot(N)<0}set(y,L,p){return this.a.copy(y),this.b.copy(L),this.c.copy(p),this}setFromPointsAndIndices(y,L,p,N){return this.a.copy(y[L]),this.b.copy(y[p]),this.c.copy(y[N]),this}setFromAttributeAndIndices(y,L,p,N){return this.a.fromBufferAttribute(y,L),this.b.fromBufferAttribute(y,p),this.c.fromBufferAttribute(y,N),this}clone(){return(new this.constructor).copy(this)}copy(y){return this.a.copy(y.a),this.b.copy(y.b),this.c.copy(y.c),this}getArea(){return Ht.subVectors(this.c,this.b),Xt.subVectors(this.a,this.b),.5*Ht.cross(Xt).length()}getMidpoint(y){return y.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(y){return bt.getNormal(this.a,this.b,this.c,y)}getPlane(y){return y.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(y,L){return bt.getBarycoord(y,this.a,this.b,this.c,L)}getUV(y,L,p,N,t){return!1===Kt&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Kt=!0),bt.getInterpolation(y,this.a,this.b,this.c,L,p,N,t)}getInterpolation(y,L,p,N,t){return bt.getInterpolation(y,this.a,this.b,this.c,L,p,N,t)}containsPoint(y){return bt.containsPoint(y,this.a,this.b,this.c)}isFrontFacing(y){return bt.isFrontFacing(this.a,this.b,this.c,y)}intersectsBox(y){return y.intersectsTriangle(this)}closestPointToPoint(y,L){const p=this.a,N=this.b,t=this.c;let j,z;Gt.subVectors(N,p),$t.subVectors(t,p),At.subVectors(y,p);const O=Gt.dot(At),h=$t.dot(At);if(O<=0&&h<=0)return L.copy(p);st.subVectors(y,N);const m=Gt.dot(st),k=$t.dot(st);if(m>=0&&k<=m)return L.copy(N);const _=O*k-m*h;if(_<=0&&O>=0&&m<=0)return j=O/(O-m),L.copy(p).addScaledVector(Gt,j);ct.subVectors(y,t);const W=Gt.dot(ct),g=$t.dot(ct);if(g>=0&&W<=g)return L.copy(t);const C=W*h-O*g;if(C<=0&&h>=0&&g<=0)return z=h/(h-g),L.copy(p).addScaledVector($t,z);const Q=m*g-W*k;if(Q<=0&&k-m>=0&&W-g>=0)return qt.subVectors(t,N),z=(k-m)/(k-m+(W-g)),L.copy(N).addScaledVector(qt,z);const T=1/(Q+C+_);return j=C*T,z=_*T,L.copy(p).addScaledVector(Gt,j).addScaledVector($t,z)}equals(y){return y.a.equals(this.a)&&y.b.equals(this.b)&&y.c.equals(this.c)}}let nt=0;class vt extends $p{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:nt++}),this.uuid=Kp(),this.name="",this.type="Material",this.blending=l,this.side=B,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=K,this.blendDst=b,this.blendEquation=X,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ty,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=xp,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=zp,this.stencilZFail=zp,this.stencilZPass=zp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(y){this._alphaTest>0!=y>0&&this.version++,this._alphaTest=y}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(y){if(void 0!==y)for(const L in y){const p=y[L];if(void 0===p){console.warn(`THREE.Material: parameter '${L}' has value of undefined.`);continue}const N=this[L];void 0!==N?N&&N.isColor?N.set(p):N&&N.isVector3&&p&&p.isVector3?N.copy(p):this[L]=p:console.warn(`THREE.Material: '${L}' is not a property of THREE.${this.type}.`)}}toJSON(y){const L=void 0===y||"string"==typeof y;L&&(y={textures:{},images:{}});const p={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function N(y){const L=[];for(const p in y){const N=y[p];delete N.metadata,L.push(N)}return L}if(p.uuid=this.uuid,p.type=this.type,""!==this.name&&(p.name=this.name),this.color&&this.color.isColor&&(p.color=this.color.getHex()),void 0!==this.roughness&&(p.roughness=this.roughness),void 0!==this.metalness&&(p.metalness=this.metalness),void 0!==this.sheen&&(p.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(p.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(p.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(p.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(p.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(p.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(p.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(p.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(p.shininess=this.shininess),void 0!==this.clearcoat&&(p.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(p.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(p.clearcoatMap=this.clearcoatMap.toJSON(y).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(p.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(y).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(p.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(y).uuid,p.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(p.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(p.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(p.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(p.iridescenceMap=this.iridescenceMap.toJSON(y).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(p.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(y).uuid),void 0!==this.anisotropy&&(p.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(p.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(p.anisotropyMap=this.anisotropyMap.toJSON(y).uuid),this.map&&this.map.isTexture&&(p.map=this.map.toJSON(y).uuid),this.matcap&&this.matcap.isTexture&&(p.matcap=this.matcap.toJSON(y).uuid),this.alphaMap&&this.alphaMap.isTexture&&(p.alphaMap=this.alphaMap.toJSON(y).uuid),this.lightMap&&this.lightMap.isTexture&&(p.lightMap=this.lightMap.toJSON(y).uuid,p.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(p.aoMap=this.aoMap.toJSON(y).uuid,p.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(p.bumpMap=this.bumpMap.toJSON(y).uuid,p.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(p.normalMap=this.normalMap.toJSON(y).uuid,p.normalMapType=this.normalMapType,p.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(p.displacementMap=this.displacementMap.toJSON(y).uuid,p.displacementScale=this.displacementScale,p.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(p.roughnessMap=this.roughnessMap.toJSON(y).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(p.metalnessMap=this.metalnessMap.toJSON(y).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(p.emissiveMap=this.emissiveMap.toJSON(y).uuid),this.specularMap&&this.specularMap.isTexture&&(p.specularMap=this.specularMap.toJSON(y).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(p.specularIntensityMap=this.specularIntensityMap.toJSON(y).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(p.specularColorMap=this.specularColorMap.toJSON(y).uuid),this.envMap&&this.envMap.isTexture&&(p.envMap=this.envMap.toJSON(y).uuid,void 0!==this.combine&&(p.combine=this.combine)),void 0!==this.envMapIntensity&&(p.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(p.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(p.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(p.gradientMap=this.gradientMap.toJSON(y).uuid),void 0!==this.transmission&&(p.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(p.transmissionMap=this.transmissionMap.toJSON(y).uuid),void 0!==this.thickness&&(p.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(p.thicknessMap=this.thicknessMap.toJSON(y).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(p.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(p.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(p.size=this.size),null!==this.shadowSide&&(p.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(p.sizeAttenuation=this.sizeAttenuation),this.blending!==l&&(p.blending=this.blending),this.side!==B&&(p.side=this.side),this.vertexColors&&(p.vertexColors=!0),this.opacity<1&&(p.opacity=this.opacity),!0===this.transparent&&(p.transparent=this.transparent),p.depthFunc=this.depthFunc,p.depthTest=this.depthTest,p.depthWrite=this.depthWrite,p.colorWrite=this.colorWrite,p.stencilWrite=this.stencilWrite,p.stencilWriteMask=this.stencilWriteMask,p.stencilFunc=this.stencilFunc,p.stencilRef=this.stencilRef,p.stencilFuncMask=this.stencilFuncMask,p.stencilFail=this.stencilFail,p.stencilZFail=this.stencilZFail,p.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(p.rotation=this.rotation),!0===this.polygonOffset&&(p.polygonOffset=!0),0!==this.polygonOffsetFactor&&(p.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(p.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(p.linewidth=this.linewidth),void 0!==this.dashSize&&(p.dashSize=this.dashSize),void 0!==this.gapSize&&(p.gapSize=this.gapSize),void 0!==this.scale&&(p.scale=this.scale),!0===this.dithering&&(p.dithering=!0),this.alphaTest>0&&(p.alphaTest=this.alphaTest),!0===this.alphaHash&&(p.alphaHash=this.alphaHash),!0===this.alphaToCoverage&&(p.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(p.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(p.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(p.wireframe=this.wireframe),this.wireframeLinewidth>1&&(p.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(p.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(p.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(p.flatShading=this.flatShading),!1===this.visible&&(p.visible=!1),!1===this.toneMapped&&(p.toneMapped=!1),!1===this.fog&&(p.fog=!1),Object.keys(this.userData).length>0&&(p.userData=this.userData),L){const L=N(y.textures),t=N(y.images);L.length>0&&(p.textures=L),t.length>0&&(p.images=t)}return p}clone(){return(new this.constructor).copy(this)}copy(y){this.name=y.name,this.blending=y.blending,this.side=y.side,this.vertexColors=y.vertexColors,this.opacity=y.opacity,this.transparent=y.transparent,this.blendSrc=y.blendSrc,this.blendDst=y.blendDst,this.blendEquation=y.blendEquation,this.blendSrcAlpha=y.blendSrcAlpha,this.blendDstAlpha=y.blendDstAlpha,this.blendEquationAlpha=y.blendEquationAlpha,this.depthFunc=y.depthFunc,this.depthTest=y.depthTest,this.depthWrite=y.depthWrite,this.stencilWriteMask=y.stencilWriteMask,this.stencilFunc=y.stencilFunc,this.stencilRef=y.stencilRef,this.stencilFuncMask=y.stencilFuncMask,this.stencilFail=y.stencilFail,this.stencilZFail=y.stencilZFail,this.stencilZPass=y.stencilZPass,this.stencilWrite=y.stencilWrite;const L=y.clippingPlanes;let p=null;if(null!==L){const y=L.length;p=new Array(y);for(let N=0;N!==y;++N)p[N]=L[N].clone()}return this.clippingPlanes=p,this.clipIntersection=y.clipIntersection,this.clipShadows=y.clipShadows,this.shadowSide=y.shadowSide,this.colorWrite=y.colorWrite,this.precision=y.precision,this.polygonOffset=y.polygonOffset,this.polygonOffsetFactor=y.polygonOffsetFactor,this.polygonOffsetUnits=y.polygonOffsetUnits,this.dithering=y.dithering,this.alphaTest=y.alphaTest,this.alphaHash=y.alphaHash,this.alphaToCoverage=y.alphaToCoverage,this.premultipliedAlpha=y.premultipliedAlpha,this.forceSinglePass=y.forceSinglePass,this.visible=y.visible,this.toneMapped=y.toneMapped,this.userData=JSON.parse(JSON.stringify(y.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(y){!0===y&&this.version++}}const et={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Zt={h:0,s:0,l:0},yj={h:0,s:0,l:0};function Lj(y,L,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?y+6*(L-y)*p:p<1/2?L:p<2/3?y+6*(L-y)*(2/3-p):y}class pj{constructor(y,L,p){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(y,L,p)}set(y,L,p){if(void 0===L&&void 0===p){const L=y;L&&L.isColor?this.copy(L):"number"==typeof L?this.setHex(L):"string"==typeof L&&this.setStyle(L)}else this.setRGB(y,L,p);return this}setScalar(y){return this.r=y,this.g=y,this.b=y,this}setHex(y,L=pp){return y=Math.floor(y),this.r=(y>>16&255)/255,this.g=(y>>8&255)/255,this.b=(255&y)/255,wN.toWorkingColorSpace(this,L),this}setRGB(y,L,p,N=wN.workingColorSpace){return this.r=y,this.g=L,this.b=p,wN.toWorkingColorSpace(this,N),this}setHSL(y,L,p,N=wN.workingColorSpace){if(y=np(y,1),L=bp(L,0,1),p=bp(p,0,1),0===L)this.r=this.g=this.b=p;else{const N=p<=.5?p*(1+L):p+L-p*L,t=2*p-N;this.r=Lj(t,N,y+1/3),this.g=Lj(t,N,y),this.b=Lj(t,N,y-1/3)}return wN.toWorkingColorSpace(this,N),this}setStyle(y,L=pp){function p(L){void 0!==L&&parseFloat(L)<1&&console.warn("THREE.Color: Alpha component of "+y+" will be ignored.")}let N;if(N=/^(\w+)\(([^\)]*)\)/.exec(y)){let t;const j=N[1],z=N[2];switch(j){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(z))return p(t[4]),this.setRGB(Math.min(255,parseInt(t[1],10))/255,Math.min(255,parseInt(t[2],10))/255,Math.min(255,parseInt(t[3],10))/255,L);if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(z))return p(t[4]),this.setRGB(Math.min(100,parseInt(t[1],10))/100,Math.min(100,parseInt(t[2],10))/100,Math.min(100,parseInt(t[3],10))/100,L);break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(z))return p(t[4]),this.setHSL(parseFloat(t[1])/360,parseFloat(t[2])/100,parseFloat(t[3])/100,L);break;default:console.warn("THREE.Color: Unknown color model "+y)}}else if(N=/^\#([A-Fa-f\d]+)$/.exec(y)){const p=N[1],t=p.length;if(3===t)return this.setRGB(parseInt(p.charAt(0),16)/15,parseInt(p.charAt(1),16)/15,parseInt(p.charAt(2),16)/15,L);if(6===t)return this.setHex(parseInt(p,16),L);console.warn("THREE.Color: Invalid hex color "+y)}else if(y&&y.length>0)return this.setColorName(y,L);return this}setColorName(y,L=pp){const p=et[y.toLowerCase()];return void 0!==p?this.setHex(p,L):console.warn("THREE.Color: Unknown color "+y),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(y){return this.r=y.r,this.g=y.g,this.b=y.b,this}copySRGBToLinear(y){return this.r=gN(y.r),this.g=gN(y.g),this.b=gN(y.b),this}copyLinearToSRGB(y){return this.r=CN(y.r),this.g=CN(y.g),this.b=CN(y.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(y=pp){return wN.fromWorkingColorSpace(Nj.copy(this),y),65536*Math.round(bp(255*Nj.r,0,255))+256*Math.round(bp(255*Nj.g,0,255))+Math.round(bp(255*Nj.b,0,255))}getHexString(y=pp){return("000000"+this.getHex(y).toString(16)).slice(-6)}getHSL(y,L=wN.workingColorSpace){wN.fromWorkingColorSpace(Nj.copy(this),L);const p=Nj.r,N=Nj.g,t=Nj.b,j=Math.max(p,N,t),z=Math.min(p,N,t);let O,h;const m=(z+j)/2;if(z===j)O=0,h=0;else{const y=j-z;switch(h=m<=.5?y/(j+z):y/(2-j-z),j){case p:O=(N-t)/y+(N<t?6:0);break;case N:O=(t-p)/y+2;break;case t:O=(p-N)/y+4}O/=6}return y.h=O,y.s=h,y.l=m,y}getRGB(y,L=wN.workingColorSpace){return wN.fromWorkingColorSpace(Nj.copy(this),L),y.r=Nj.r,y.g=Nj.g,y.b=Nj.b,y}getStyle(y=pp){wN.fromWorkingColorSpace(Nj.copy(this),y);const L=Nj.r,p=Nj.g,N=Nj.b;return y!==pp?`color(${y} ${L.toFixed(3)} ${p.toFixed(3)} ${N.toFixed(3)})`:`rgb(${Math.round(255*L)},${Math.round(255*p)},${Math.round(255*N)})`}offsetHSL(y,L,p){return this.getHSL(Zt),Zt.h+=y,Zt.s+=L,Zt.l+=p,this.setHSL(Zt.h,Zt.s,Zt.l),this}add(y){return this.r+=y.r,this.g+=y.g,this.b+=y.b,this}addColors(y,L){return this.r=y.r+L.r,this.g=y.g+L.g,this.b=y.b+L.b,this}addScalar(y){return this.r+=y,this.g+=y,this.b+=y,this}sub(y){return this.r=Math.max(0,this.r-y.r),this.g=Math.max(0,this.g-y.g),this.b=Math.max(0,this.b-y.b),this}multiply(y){return this.r*=y.r,this.g*=y.g,this.b*=y.b,this}multiplyScalar(y){return this.r*=y,this.g*=y,this.b*=y,this}lerp(y,L){return this.r+=(y.r-this.r)*L,this.g+=(y.g-this.g)*L,this.b+=(y.b-this.b)*L,this}lerpColors(y,L,p){return this.r=y.r+(L.r-y.r)*p,this.g=y.g+(L.g-y.g)*p,this.b=y.b+(L.b-y.b)*p,this}lerpHSL(y,L){this.getHSL(Zt),y.getHSL(yj);const p=vp(Zt.h,yj.h,L),N=vp(Zt.s,yj.s,L),t=vp(Zt.l,yj.l,L);return this.setHSL(p,N,t),this}setFromVector3(y){return this.r=y.x,this.g=y.y,this.b=y.z,this}applyMatrix3(y){const L=this.r,p=this.g,N=this.b,t=y.elements;return this.r=t[0]*L+t[3]*p+t[6]*N,this.g=t[1]*L+t[4]*p+t[7]*N,this.b=t[2]*L+t[5]*p+t[8]*N,this}equals(y){return y.r===this.r&&y.g===this.g&&y.b===this.b}fromArray(y,L=0){return this.r=y[L],this.g=y[L+1],this.b=y[L+2],this}toArray(y=[],L=0){return y[L]=this.r,y[L+1]=this.g,y[L+2]=this.b,y}fromBufferAttribute(y,L){return this.r=y.getX(L),this.g=y.getY(L),this.b=y.getZ(L),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Nj=new pj;pj.NAMES=et;class tj extends vt{constructor(y){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new pj(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=my,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(y)}copy(y){return super.copy(y),this.color.copy(y.color),this.map=y.map,this.lightMap=y.lightMap,this.lightMapIntensity=y.lightMapIntensity,this.aoMap=y.aoMap,this.aoMapIntensity=y.aoMapIntensity,this.specularMap=y.specularMap,this.alphaMap=y.alphaMap,this.envMap=y.envMap,this.combine=y.combine,this.reflectivity=y.reflectivity,this.refractionRatio=y.refractionRatio,this.wireframe=y.wireframe,this.wireframeLinewidth=y.wireframeLinewidth,this.wireframeLinecap=y.wireframeLinecap,this.wireframeLinejoin=y.wireframeLinejoin,this.fog=y.fog,this}}const jj=zj();function zj(){const y=new ArrayBuffer(4),L=new Float32Array(y),p=new Uint32Array(y),N=new Uint32Array(512),t=new Uint32Array(512);for(let y=0;y<256;++y){const L=y-127;L<-27?(N[y]=0,N[256|y]=32768,t[y]=24,t[256|y]=24):L<-14?(N[y]=1024>>-L-14,N[256|y]=1024>>-L-14|32768,t[y]=-L-1,t[256|y]=-L-1):L<=15?(N[y]=L+15<<10,N[256|y]=L+15<<10|32768,t[y]=13,t[256|y]=13):L<128?(N[y]=31744,N[256|y]=64512,t[y]=24,t[256|y]=24):(N[y]=31744,N[256|y]=64512,t[y]=13,t[256|y]=13)}const j=new Uint32Array(2048),z=new Uint32Array(64),O=new Uint32Array(64);for(let y=1;y<1024;++y){let L=y<<13,p=0;for(;!(8388608&L);)L<<=1,p-=8388608;L&=~8388608,p+=947912704,j[y]=L|p}for(let y=1024;y<2048;++y)j[y]=939524096+(y-1024<<13);for(let y=1;y<31;++y)z[y]=y<<23;z[31]=1199570944,z[32]=2147483648;for(let y=33;y<63;++y)z[y]=2147483648+(y-32<<23);z[63]=3347054592;for(let y=1;y<64;++y)32!==y&&(O[y]=1024);return{floatView:L,uint32View:p,baseTable:N,shiftTable:t,mantissaTable:j,exponentTable:z,offsetTable:O}}function Oj(y){Math.abs(y)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),y=bp(y,-65504,65504),jj.floatView[0]=y;const L=jj.uint32View[0],p=L>>23&511;return jj.baseTable[p]+((8388607&L)>>jj.shiftTable[p])}function hj(y){const L=y>>10;return jj.uint32View[0]=jj.mantissaTable[jj.offsetTable[L]+(1023&y)]+jj.exponentTable[L],jj.floatView[0]}const mj={toHalfFloat:Oj,fromHalfFloat:hj},kj=new fN,_j=new tN;class Wj{constructor(y,L,p=!1){if(Array.isArray(y))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=y,this.itemSize=L,this.count=void 0!==y?y.length/L:0,this.normalized=p,this.usage=Bp,this.updateRange={offset:0,count:-1},this.gpuType=$y,this.version=0}onUploadCallback(){}set needsUpdate(y){!0===y&&this.version++}setUsage(y){return this.usage=y,this}copy(y){return this.name=y.name,this.array=new y.array.constructor(y.array),this.itemSize=y.itemSize,this.count=y.count,this.normalized=y.normalized,this.usage=y.usage,this.gpuType=y.gpuType,this}copyAt(y,L,p){y*=this.itemSize,p*=L.itemSize;for(let N=0,t=this.itemSize;N<t;N++)this.array[y+N]=L.array[p+N];return this}copyArray(y){return this.array.set(y),this}applyMatrix3(y){if(2===this.itemSize)for(let L=0,p=this.count;L<p;L++)_j.fromBufferAttribute(this,L),_j.applyMatrix3(y),this.setXY(L,_j.x,_j.y);else if(3===this.itemSize)for(let L=0,p=this.count;L<p;L++)kj.fromBufferAttribute(this,L),kj.applyMatrix3(y),this.setXYZ(L,kj.x,kj.y,kj.z);return this}applyMatrix4(y){for(let L=0,p=this.count;L<p;L++)kj.fromBufferAttribute(this,L),kj.applyMatrix4(y),this.setXYZ(L,kj.x,kj.y,kj.z);return this}applyNormalMatrix(y){for(let L=0,p=this.count;L<p;L++)kj.fromBufferAttribute(this,L),kj.applyNormalMatrix(y),this.setXYZ(L,kj.x,kj.y,kj.z);return this}transformDirection(y){for(let L=0,p=this.count;L<p;L++)kj.fromBufferAttribute(this,L),kj.transformDirection(y),this.setXYZ(L,kj.x,kj.y,kj.z);return this}set(y,L=0){return this.array.set(y,L),this}getComponent(y,L){let p=this.array[y*this.itemSize+L];return this.normalized&&(p=LN(p,this.array)),p}setComponent(y,L,p){return this.normalized&&(p=pN(p,this.array)),this.array[y*this.itemSize+L]=p,this}getX(y){let L=this.array[y*this.itemSize];return this.normalized&&(L=LN(L,this.array)),L}setX(y,L){return this.normalized&&(L=pN(L,this.array)),this.array[y*this.itemSize]=L,this}getY(y){let L=this.array[y*this.itemSize+1];return this.normalized&&(L=LN(L,this.array)),L}setY(y,L){return this.normalized&&(L=pN(L,this.array)),this.array[y*this.itemSize+1]=L,this}getZ(y){let L=this.array[y*this.itemSize+2];return this.normalized&&(L=LN(L,this.array)),L}setZ(y,L){return this.normalized&&(L=pN(L,this.array)),this.array[y*this.itemSize+2]=L,this}getW(y){let L=this.array[y*this.itemSize+3];return this.normalized&&(L=LN(L,this.array)),L}setW(y,L){return this.normalized&&(L=pN(L,this.array)),this.array[y*this.itemSize+3]=L,this}setXY(y,L,p){return y*=this.itemSize,this.normalized&&(L=pN(L,this.array),p=pN(p,this.array)),this.array[y+0]=L,this.array[y+1]=p,this}setXYZ(y,L,p,N){return y*=this.itemSize,this.normalized&&(L=pN(L,this.array),p=pN(p,this.array),N=pN(N,this.array)),this.array[y+0]=L,this.array[y+1]=p,this.array[y+2]=N,this}setXYZW(y,L,p,N,t){return y*=this.itemSize,this.normalized&&(L=pN(L,this.array),p=pN(p,this.array),N=pN(N,this.array),t=pN(t,this.array)),this.array[y+0]=L,this.array[y+1]=p,this.array[y+2]=N,this.array[y+3]=t,this}onUpload(y){return this.onUploadCallback=y,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const y={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(y.name=this.name),this.usage!==Bp&&(y.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(y.updateRange=this.updateRange),y}}class gj extends Wj{constructor(y,L,p){super(new Int8Array(y),L,p)}}class Cj extends Wj{constructor(y,L,p){super(new Uint8Array(y),L,p)}}class Qj extends Wj{constructor(y,L,p){super(new Uint8ClampedArray(y),L,p)}}class Tj extends Wj{constructor(y,L,p){super(new Int16Array(y),L,p)}}class ij extends Wj{constructor(y,L,p){super(new Uint16Array(y),L,p)}}class Dj extends Wj{constructor(y,L,p){super(new Int32Array(y),L,p)}}class wj extends Wj{constructor(y,L,p){super(new Uint32Array(y),L,p)}}class xj extends Wj{constructor(y,L,p){super(new Uint16Array(y),L,p),this.isFloat16BufferAttribute=!0}getX(y){let L=hj(this.array[y*this.itemSize]);return this.normalized&&(L=LN(L,this.array)),L}setX(y,L){return this.normalized&&(L=pN(L,this.array)),this.array[y*this.itemSize]=Oj(L),this}getY(y){let L=hj(this.array[y*this.itemSize+1]);return this.normalized&&(L=LN(L,this.array)),L}setY(y,L){return this.normalized&&(L=pN(L,this.array)),this.array[y*this.itemSize+1]=Oj(L),this}getZ(y){let L=hj(this.array[y*this.itemSize+2]);return this.normalized&&(L=LN(L,this.array)),L}setZ(y,L){return this.normalized&&(L=pN(L,this.array)),this.array[y*this.itemSize+2]=Oj(L),this}getW(y){let L=hj(this.array[y*this.itemSize+3]);return this.normalized&&(L=LN(L,this.array)),L}setW(y,L){return this.normalized&&(L=pN(L,this.array)),this.array[y*this.itemSize+3]=Oj(L),this}setXY(y,L,p){return y*=this.itemSize,this.normalized&&(L=pN(L,this.array),p=pN(p,this.array)),this.array[y+0]=Oj(L),this.array[y+1]=Oj(p),this}setXYZ(y,L,p,N){return y*=this.itemSize,this.normalized&&(L=pN(L,this.array),p=pN(p,this.array),N=pN(N,this.array)),this.array[y+0]=Oj(L),this.array[y+1]=Oj(p),this.array[y+2]=Oj(N),this}setXYZW(y,L,p,N,t){return y*=this.itemSize,this.normalized&&(L=pN(L,this.array),p=pN(p,this.array),N=pN(N,this.array),t=pN(t,this.array)),this.array[y+0]=Oj(L),this.array[y+1]=Oj(p),this.array[y+2]=Oj(N),this.array[y+3]=Oj(t),this}}class dj extends Wj{constructor(y,L,p){super(new Float32Array(y),L,p)}}class oj extends Wj{constructor(y,L,p){super(new Float64Array(y),L,p)}}let Uj=0;const Ij=new Wt,Vj=new at,Fj=new fN,uj=new XN,Sj=new XN,Bj=new fN;class Rj extends $p{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Uj++}),this.uuid=Kp(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(y){return Array.isArray(y)?this.index=new(ON(y)?wj:ij)(y,1):this.index=y,this}getAttribute(y){return this.attributes[y]}setAttribute(y,L){return this.attributes[y]=L,this}deleteAttribute(y){return delete this.attributes[y],this}hasAttribute(y){return void 0!==this.attributes[y]}addGroup(y,L,p=0){this.groups.push({start:y,count:L,materialIndex:p})}clearGroups(){this.groups=[]}setDrawRange(y,L){this.drawRange.start=y,this.drawRange.count=L}applyMatrix4(y){const L=this.attributes.position;void 0!==L&&(L.applyMatrix4(y),L.needsUpdate=!0);const p=this.attributes.normal;if(void 0!==p){const L=(new jN).getNormalMatrix(y);p.applyNormalMatrix(L),p.needsUpdate=!0}const N=this.attributes.tangent;return void 0!==N&&(N.transformDirection(y),N.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(y){return Ij.makeRotationFromQuaternion(y),this.applyMatrix4(Ij),this}rotateX(y){return Ij.makeRotationX(y),this.applyMatrix4(Ij),this}rotateY(y){return Ij.makeRotationY(y),this.applyMatrix4(Ij),this}rotateZ(y){return Ij.makeRotationZ(y),this.applyMatrix4(Ij),this}translate(y,L,p){return Ij.makeTranslation(y,L,p),this.applyMatrix4(Ij),this}scale(y,L,p){return Ij.makeScale(y,L,p),this.applyMatrix4(Ij),this}lookAt(y){return Vj.lookAt(y),Vj.updateMatrix(),this.applyMatrix4(Vj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Fj).negate(),this.translate(Fj.x,Fj.y,Fj.z),this}setFromPoints(y){const L=[];for(let p=0,N=y.length;p<N;p++){const N=y[p];L.push(N.x,N.y,N.z||0)}return this.setAttribute("position",new dj(L,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new XN);const y=this.attributes.position,L=this.morphAttributes.position;if(y&&y.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new fN(-1/0,-1/0,-1/0),new fN(+1/0,+1/0,+1/0));if(void 0!==y){if(this.boundingBox.setFromBufferAttribute(y),L)for(let y=0,p=L.length;y<p;y++){const p=L[y];uj.setFromBufferAttribute(p),this.morphTargetsRelative?(Bj.addVectors(this.boundingBox.min,uj.min),this.boundingBox.expandByPoint(Bj),Bj.addVectors(this.boundingBox.max,uj.max),this.boundingBox.expandByPoint(Bj)):(this.boundingBox.expandByPoint(uj.min),this.boundingBox.expandByPoint(uj.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Nt);const y=this.attributes.position,L=this.morphAttributes.position;if(y&&y.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new fN,1/0);if(y){const p=this.boundingSphere.center;if(uj.setFromBufferAttribute(y),L)for(let y=0,p=L.length;y<p;y++){const p=L[y];Sj.setFromBufferAttribute(p),this.morphTargetsRelative?(Bj.addVectors(uj.min,Sj.min),uj.expandByPoint(Bj),Bj.addVectors(uj.max,Sj.max),uj.expandByPoint(Bj)):(uj.expandByPoint(Sj.min),uj.expandByPoint(Sj.max))}uj.getCenter(p);let N=0;for(let L=0,t=y.count;L<t;L++)Bj.fromBufferAttribute(y,L),N=Math.max(N,p.distanceToSquared(Bj));if(L)for(let t=0,j=L.length;t<j;t++){const j=L[t],z=this.morphTargetsRelative;for(let L=0,t=j.count;L<t;L++)Bj.fromBufferAttribute(j,L),z&&(Fj.fromBufferAttribute(y,L),Bj.add(Fj)),N=Math.max(N,p.distanceToSquared(Bj))}this.boundingSphere.radius=Math.sqrt(N),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const y=this.index,L=this.attributes;if(null===y||void 0===L.position||void 0===L.normal||void 0===L.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const p=y.array,N=L.position.array,t=L.normal.array,j=L.uv.array,z=N.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Wj(new Float32Array(4*z),4));const O=this.getAttribute("tangent").array,h=[],m=[];for(let y=0;y<z;y++)h[y]=new fN,m[y]=new fN;const k=new fN,_=new fN,W=new fN,g=new tN,C=new tN,Q=new tN,T=new fN,i=new fN;function D(y,L,p){k.fromArray(N,3*y),_.fromArray(N,3*L),W.fromArray(N,3*p),g.fromArray(j,2*y),C.fromArray(j,2*L),Q.fromArray(j,2*p),_.sub(k),W.sub(k),C.sub(g),Q.sub(g);const t=1/(C.x*Q.y-Q.x*C.y);isFinite(t)&&(T.copy(_).multiplyScalar(Q.y).addScaledVector(W,-C.y).multiplyScalar(t),i.copy(W).multiplyScalar(C.x).addScaledVector(_,-Q.x).multiplyScalar(t),h[y].add(T),h[L].add(T),h[p].add(T),m[y].add(i),m[L].add(i),m[p].add(i))}let w=this.groups;0===w.length&&(w=[{start:0,count:p.length}]);for(let y=0,L=w.length;y<L;++y){const L=w[y],N=L.start;for(let y=N,t=N+L.count;y<t;y+=3)D(p[y+0],p[y+1],p[y+2])}const x=new fN,d=new fN,o=new fN,U=new fN;function I(y){o.fromArray(t,3*y),U.copy(o);const L=h[y];x.copy(L),x.sub(o.multiplyScalar(o.dot(L))).normalize(),d.crossVectors(U,L);const p=d.dot(m[y])<0?-1:1;O[4*y]=x.x,O[4*y+1]=x.y,O[4*y+2]=x.z,O[4*y+3]=p}for(let y=0,L=w.length;y<L;++y){const L=w[y],N=L.start;for(let y=N,t=N+L.count;y<t;y+=3)I(p[y+0]),I(p[y+1]),I(p[y+2])}}computeVertexNormals(){const y=this.index,L=this.getAttribute("position");if(void 0!==L){let p=this.getAttribute("normal");if(void 0===p)p=new Wj(new Float32Array(3*L.count),3),this.setAttribute("normal",p);else for(let y=0,L=p.count;y<L;y++)p.setXYZ(y,0,0,0);const N=new fN,t=new fN,j=new fN,z=new fN,O=new fN,h=new fN,m=new fN,k=new fN;if(y)for(let _=0,W=y.count;_<W;_+=3){const W=y.getX(_+0),g=y.getX(_+1),C=y.getX(_+2);N.fromBufferAttribute(L,W),t.fromBufferAttribute(L,g),j.fromBufferAttribute(L,C),m.subVectors(j,t),k.subVectors(N,t),m.cross(k),z.fromBufferAttribute(p,W),O.fromBufferAttribute(p,g),h.fromBufferAttribute(p,C),z.add(m),O.add(m),h.add(m),p.setXYZ(W,z.x,z.y,z.z),p.setXYZ(g,O.x,O.y,O.z),p.setXYZ(C,h.x,h.y,h.z)}else for(let y=0,z=L.count;y<z;y+=3)N.fromBufferAttribute(L,y+0),t.fromBufferAttribute(L,y+1),j.fromBufferAttribute(L,y+2),m.subVectors(j,t),k.subVectors(N,t),m.cross(k),p.setXYZ(y+0,m.x,m.y,m.z),p.setXYZ(y+1,m.x,m.y,m.z),p.setXYZ(y+2,m.x,m.y,m.z);this.normalizeNormals(),p.needsUpdate=!0}}normalizeNormals(){const y=this.attributes.normal;for(let L=0,p=y.count;L<p;L++)Bj.fromBufferAttribute(y,L),Bj.normalize(),y.setXYZ(L,Bj.x,Bj.y,Bj.z)}toNonIndexed(){function y(y,L){const p=y.array,N=y.itemSize,t=y.normalized,j=new p.constructor(L.length*N);let z=0,O=0;for(let t=0,h=L.length;t<h;t++){z=y.isInterleavedBufferAttribute?L[t]*y.data.stride+y.offset:L[t]*N;for(let y=0;y<N;y++)j[O++]=p[z++]}return new Wj(j,N,t)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const L=new Rj,p=this.index.array,N=this.attributes;for(const t in N){const j=y(N[t],p);L.setAttribute(t,j)}const t=this.morphAttributes;for(const N in t){const j=[],z=t[N];for(let L=0,N=z.length;L<N;L++){const N=y(z[L],p);j.push(N)}L.morphAttributes[N]=j}L.morphTargetsRelative=this.morphTargetsRelative;const j=this.groups;for(let y=0,p=j.length;y<p;y++){const p=j[y];L.addGroup(p.start,p.count,p.materialIndex)}return L}toJSON(){const y={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(y.uuid=this.uuid,y.type=this.type,""!==this.name&&(y.name=this.name),Object.keys(this.userData).length>0&&(y.userData=this.userData),void 0!==this.parameters){const L=this.parameters;for(const p in L)void 0!==L[p]&&(y[p]=L[p]);return y}y.data={attributes:{}};const L=this.index;null!==L&&(y.data.index={type:L.array.constructor.name,array:Array.prototype.slice.call(L.array)});const p=this.attributes;for(const L in p){const N=p[L];y.data.attributes[L]=N.toJSON(y.data)}const N={};let t=!1;for(const L in this.morphAttributes){const p=this.morphAttributes[L],j=[];for(let L=0,N=p.length;L<N;L++){const N=p[L];j.push(N.toJSON(y.data))}j.length>0&&(N[L]=j,t=!0)}t&&(y.data.morphAttributes=N,y.data.morphTargetsRelative=this.morphTargetsRelative);const j=this.groups;j.length>0&&(y.data.groups=JSON.parse(JSON.stringify(j)));const z=this.boundingSphere;return null!==z&&(y.data.boundingSphere={center:z.center.toArray(),radius:z.radius}),y}clone(){return(new this.constructor).copy(this)}copy(y){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const L={};this.name=y.name;const p=y.index;null!==p&&this.setIndex(p.clone(L));const N=y.attributes;for(const y in N){const p=N[y];this.setAttribute(y,p.clone(L))}const t=y.morphAttributes;for(const y in t){const p=[],N=t[y];for(let y=0,t=N.length;y<t;y++)p.push(N[y].clone(L));this.morphAttributes[y]=p}this.morphTargetsRelative=y.morphTargetsRelative;const j=y.groups;for(let y=0,L=j.length;y<L;y++){const L=j[y];this.addGroup(L.start,L.count,L.materialIndex)}const z=y.boundingBox;null!==z&&(this.boundingBox=z.clone());const O=y.boundingSphere;return null!==O&&(this.boundingSphere=O.clone()),this.drawRange.start=y.drawRange.start,this.drawRange.count=y.drawRange.count,this.userData=y.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Yj=new Wt,Ej=new _t,Pj=new Nt,lj=new fN,Mj=new fN,fj=new fN,aj=new fN,Hj=new fN,Xj=new fN,Jj=new tN,rj=new tN,Gj=new tN,$j=new fN,qj=new fN,Aj=new fN,sj=new fN,cj=new fN;class Kj extends at{constructor(y=new Rj,L=new tj){super(),this.isMesh=!0,this.type="Mesh",this.geometry=y,this.material=L,this.updateMorphTargets()}copy(y,L){return super.copy(y,L),void 0!==y.morphTargetInfluences&&(this.morphTargetInfluences=y.morphTargetInfluences.slice()),void 0!==y.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},y.morphTargetDictionary)),this.material=y.material,this.geometry=y.geometry,this}updateMorphTargets(){const y=this.geometry.morphAttributes,L=Object.keys(y);if(L.length>0){const p=y[L[0]];if(void 0!==p){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let y=0,L=p.length;y<L;y++){const L=p[y].name||String(y);this.morphTargetInfluences.push(0),this.morphTargetDictionary[L]=y}}}}getVertexPosition(y,L){const p=this.geometry,N=p.attributes.position,t=p.morphAttributes.position,j=p.morphTargetsRelative;L.fromBufferAttribute(N,y);const z=this.morphTargetInfluences;if(t&&z){Xj.set(0,0,0);for(let p=0,N=t.length;p<N;p++){const N=z[p],O=t[p];0!==N&&(Hj.fromBufferAttribute(O,y),j?Xj.addScaledVector(Hj,N):Xj.addScaledVector(Hj.sub(L),N))}L.add(Xj)}return L}raycast(y,L){const p=this.geometry,N=this.material,t=this.matrixWorld;if(void 0!==N){if(null===p.boundingSphere&&p.computeBoundingSphere(),Pj.copy(p.boundingSphere),Pj.applyMatrix4(t),Ej.copy(y.ray).recast(y.near),!1===Pj.containsPoint(Ej.origin)){if(null===Ej.intersectSphere(Pj,lj))return;if(Ej.origin.distanceToSquared(lj)>(y.far-y.near)**2)return}Yj.copy(t).invert(),Ej.copy(y.ray).applyMatrix4(Yj),null!==p.boundingBox&&!1===Ej.intersectsBox(p.boundingBox)||this._computeIntersections(y,L,Ej)}}_computeIntersections(y,L,p){let N;const t=this.geometry,j=this.material,z=t.index,O=t.attributes.position,h=t.attributes.uv,m=t.attributes.uv1,k=t.attributes.normal,_=t.groups,W=t.drawRange;if(null!==z)if(Array.isArray(j))for(let t=0,O=_.length;t<O;t++){const O=_[t],g=j[O.materialIndex];for(let t=Math.max(O.start,W.start),j=Math.min(z.count,Math.min(O.start+O.count,W.start+W.count));t<j;t+=3)N=bj(this,g,y,p,h,m,k,z.getX(t),z.getX(t+1),z.getX(t+2)),N&&(N.faceIndex=Math.floor(t/3),N.face.materialIndex=O.materialIndex,L.push(N))}else for(let t=Math.max(0,W.start),O=Math.min(z.count,W.start+W.count);t<O;t+=3)N=bj(this,j,y,p,h,m,k,z.getX(t),z.getX(t+1),z.getX(t+2)),N&&(N.faceIndex=Math.floor(t/3),L.push(N));else if(void 0!==O)if(Array.isArray(j))for(let t=0,z=_.length;t<z;t++){const z=_[t],g=j[z.materialIndex];for(let t=Math.max(z.start,W.start),j=Math.min(O.count,Math.min(z.start+z.count,W.start+W.count));t<j;t+=3)N=bj(this,g,y,p,h,m,k,t,t+1,t+2),N&&(N.faceIndex=Math.floor(t/3),N.face.materialIndex=z.materialIndex,L.push(N))}else for(let t=Math.max(0,W.start),z=Math.min(O.count,W.start+W.count);t<z;t+=3)N=bj(this,j,y,p,h,m,k,t,t+1,t+2),N&&(N.faceIndex=Math.floor(t/3),L.push(N))}}function bj(y,L,p,N,t,j,z,O,h,m){y.getVertexPosition(O,Mj),y.getVertexPosition(h,fj),y.getVertexPosition(m,aj);const k=function(y,L,p,N,t,j,z,O){let h;if(h=L.side===R?N.intersectTriangle(z,j,t,!0,O):N.intersectTriangle(t,j,z,L.side===B,O),null===h)return null;cj.copy(O),cj.applyMatrix4(y.matrixWorld);const m=p.ray.origin.distanceTo(cj);return m<p.near||m>p.far?null:{distance:m,point:cj.clone(),object:y}}(y,L,p,N,Mj,fj,aj,sj);if(k){t&&(Jj.fromBufferAttribute(t,O),rj.fromBufferAttribute(t,h),Gj.fromBufferAttribute(t,m),k.uv=bt.getInterpolation(sj,Mj,fj,aj,Jj,rj,Gj,new tN)),j&&(Jj.fromBufferAttribute(j,O),rj.fromBufferAttribute(j,h),Gj.fromBufferAttribute(j,m),k.uv1=bt.getInterpolation(sj,Mj,fj,aj,Jj,rj,Gj,new tN),k.uv2=k.uv1),z&&($j.fromBufferAttribute(z,O),qj.fromBufferAttribute(z,h),Aj.fromBufferAttribute(z,m),k.normal=bt.getInterpolation(sj,Mj,fj,aj,$j,qj,Aj,new fN),k.normal.dot(N.direction)>0&&k.normal.multiplyScalar(-1));const y={a:O,b:h,c:m,normal:new fN,materialIndex:0};bt.getNormal(Mj,fj,aj,y.normal),k.face=y}return k}class nj extends Rj{constructor(y=1,L=1,p=1,N=1,t=1,j=1){super(),this.type="BoxGeometry",this.parameters={width:y,height:L,depth:p,widthSegments:N,heightSegments:t,depthSegments:j};const z=this;N=Math.floor(N),t=Math.floor(t),j=Math.floor(j);const O=[],h=[],m=[],k=[];let _=0,W=0;function g(y,L,p,N,t,j,g,C,Q,T,i){const D=j/Q,w=g/T,x=j/2,d=g/2,o=C/2,U=Q+1,I=T+1;let V=0,F=0;const u=new fN;for(let j=0;j<I;j++){const z=j*w-d;for(let O=0;O<U;O++){const _=O*D-x;u[y]=_*N,u[L]=z*t,u[p]=o,h.push(u.x,u.y,u.z),u[y]=0,u[L]=0,u[p]=C>0?1:-1,m.push(u.x,u.y,u.z),k.push(O/Q),k.push(1-j/T),V+=1}}for(let y=0;y<T;y++)for(let L=0;L<Q;L++){const p=_+L+U*y,N=_+L+U*(y+1),t=_+(L+1)+U*(y+1),j=_+(L+1)+U*y;O.push(p,N,j),O.push(N,t,j),F+=6}z.addGroup(W,F,i),W+=F,_+=V}g("z","y","x",-1,-1,p,L,y,j,t,0),g("z","y","x",1,-1,p,L,-y,j,t,1),g("x","z","y",1,1,y,p,L,N,j,2),g("x","z","y",1,-1,y,p,-L,N,j,3),g("x","y","z",1,-1,y,L,p,N,t,4),g("x","y","z",-1,-1,y,L,-p,N,t,5),this.setIndex(O),this.setAttribute("position",new dj(h,3)),this.setAttribute("normal",new dj(m,3)),this.setAttribute("uv",new dj(k,2))}copy(y){return super.copy(y),this.parameters=Object.assign({},y.parameters),this}static fromJSON(y){return new nj(y.width,y.height,y.depth,y.widthSegments,y.heightSegments,y.depthSegments)}}function vj(y){const L={};for(const p in y){L[p]={};for(const N in y[p]){const t=y[p][N];t&&(t.isColor||t.isMatrix3||t.isMatrix4||t.isVector2||t.isVector3||t.isVector4||t.isTexture||t.isQuaternion)?t.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),L[p][N]=null):L[p][N]=t.clone():Array.isArray(t)?L[p][N]=t.slice():L[p][N]=t}}return L}function ej(y){const L={};for(let p=0;p<y.length;p++){const N=vj(y[p]);for(const y in N)L[y]=N[y]}return L}function Zj(y){return null===y.getRenderTarget()?y.outputColorSpace:Np}const yz={clone:vj,merge:ej};var Lz="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",pz="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class Nz extends vt{constructor(y){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Lz,this.fragmentShader=pz,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==y&&this.setValues(y)}copy(y){return super.copy(y),this.fragmentShader=y.fragmentShader,this.vertexShader=y.vertexShader,this.uniforms=vj(y.uniforms),this.uniformsGroups=function(y){const L=[];for(let p=0;p<y.length;p++)L.push(y[p].clone());return L}(y.uniformsGroups),this.defines=Object.assign({},y.defines),this.wireframe=y.wireframe,this.wireframeLinewidth=y.wireframeLinewidth,this.fog=y.fog,this.lights=y.lights,this.clipping=y.clipping,this.extensions=Object.assign({},y.extensions),this.glslVersion=y.glslVersion,this}toJSON(y){const L=super.toJSON(y);L.glslVersion=this.glslVersion,L.uniforms={};for(const p in this.uniforms){const N=this.uniforms[p].value;N&&N.isTexture?L.uniforms[p]={type:"t",value:N.toJSON(y).uuid}:N&&N.isColor?L.uniforms[p]={type:"c",value:N.getHex()}:N&&N.isVector2?L.uniforms[p]={type:"v2",value:N.toArray()}:N&&N.isVector3?L.uniforms[p]={type:"v3",value:N.toArray()}:N&&N.isVector4?L.uniforms[p]={type:"v4",value:N.toArray()}:N&&N.isMatrix3?L.uniforms[p]={type:"m3",value:N.toArray()}:N&&N.isMatrix4?L.uniforms[p]={type:"m4",value:N.toArray()}:L.uniforms[p]={value:N}}Object.keys(this.defines).length>0&&(L.defines=this.defines),L.vertexShader=this.vertexShader,L.fragmentShader=this.fragmentShader,L.lights=this.lights,L.clipping=this.clipping;const p={};for(const y in this.extensions)!0===this.extensions[y]&&(p[y]=!0);return Object.keys(p).length>0&&(L.extensions=p),L}}class tz extends at{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Wt,this.projectionMatrix=new Wt,this.projectionMatrixInverse=new Wt,this.coordinateSystem=rp}copy(y,L){return super.copy(y,L),this.matrixWorldInverse.copy(y.matrixWorldInverse),this.projectionMatrix.copy(y.projectionMatrix),this.projectionMatrixInverse.copy(y.projectionMatrixInverse),this.coordinateSystem=y.coordinateSystem,this}getWorldDirection(y){this.updateWorldMatrix(!0,!1);const L=this.matrixWorld.elements;return y.set(-L[8],-L[9],-L[10]).normalize()}updateMatrixWorld(y){super.updateMatrixWorld(y),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(y,L){super.updateWorldMatrix(y,L),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class jz extends tz{constructor(y=50,L=1,p=.1,N=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=y,this.zoom=1,this.near=p,this.far=N,this.focus=10,this.aspect=L,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(y,L){return super.copy(y,L),this.fov=y.fov,this.zoom=y.zoom,this.near=y.near,this.far=y.far,this.focus=y.focus,this.aspect=y.aspect,this.view=null===y.view?null:Object.assign({},y.view),this.filmGauge=y.filmGauge,this.filmOffset=y.filmOffset,this}setFocalLength(y){const L=.5*this.getFilmHeight()/y;this.fov=2*cp*Math.atan(L),this.updateProjectionMatrix()}getFocalLength(){const y=Math.tan(.5*sp*this.fov);return.5*this.getFilmHeight()/y}getEffectiveFOV(){return 2*cp*Math.atan(Math.tan(.5*sp*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(y,L,p,N,t,j){this.aspect=y/L,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=y,this.view.fullHeight=L,this.view.offsetX=p,this.view.offsetY=N,this.view.width=t,this.view.height=j,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const y=this.near;let L=y*Math.tan(.5*sp*this.fov)/this.zoom,p=2*L,N=this.aspect*p,t=-.5*N;const j=this.view;if(null!==this.view&&this.view.enabled){const y=j.fullWidth,z=j.fullHeight;t+=j.offsetX*N/y,L-=j.offsetY*p/z,N*=j.width/y,p*=j.height/z}const z=this.filmOffset;0!==z&&(t+=y*z/this.getFilmWidth()),this.projectionMatrix.makePerspective(t,t+N,L,L-p,y,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(y){const L=super.toJSON(y);return L.object.fov=this.fov,L.object.zoom=this.zoom,L.object.near=this.near,L.object.far=this.far,L.object.focus=this.focus,L.object.aspect=this.aspect,null!==this.view&&(L.object.view=Object.assign({},this.view)),L.object.filmGauge=this.filmGauge,L.object.filmOffset=this.filmOffset,L}}const zz=-90,Oz=1;class hz extends at{constructor(y,L,p){super(),this.type="CubeCamera",this.renderTarget=p,this.coordinateSystem=null;const N=new jz(zz,Oz,y,L);N.layers=this.layers,this.add(N);const t=new jz(zz,Oz,y,L);t.layers=this.layers,this.add(t);const j=new jz(zz,Oz,y,L);j.layers=this.layers,this.add(j);const z=new jz(zz,Oz,y,L);z.layers=this.layers,this.add(z);const O=new jz(zz,Oz,y,L);O.layers=this.layers,this.add(O);const h=new jz(zz,Oz,y,L);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const y=this.coordinateSystem,L=this.children.concat(),[p,N,t,j,z,O]=L;for(const y of L)this.remove(y);if(y===rp)p.up.set(0,1,0),p.lookAt(1,0,0),N.up.set(0,1,0),N.lookAt(-1,0,0),t.up.set(0,0,-1),t.lookAt(0,1,0),j.up.set(0,0,1),j.lookAt(0,-1,0),z.up.set(0,1,0),z.lookAt(0,0,1),O.up.set(0,1,0),O.lookAt(0,0,-1);else{if(y!==Gp)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+y);p.up.set(0,-1,0),p.lookAt(-1,0,0),N.up.set(0,-1,0),N.lookAt(1,0,0),t.up.set(0,0,1),t.lookAt(0,1,0),j.up.set(0,0,-1),j.lookAt(0,-1,0),z.up.set(0,-1,0),z.lookAt(0,0,1),O.up.set(0,-1,0),O.lookAt(0,0,-1)}for(const y of L)this.add(y),y.updateMatrixWorld()}update(y,L){null===this.parent&&this.updateMatrixWorld();const p=this.renderTarget;this.coordinateSystem!==y.coordinateSystem&&(this.coordinateSystem=y.coordinateSystem,this.updateCoordinateSystem());const[N,t,j,z,O,h]=this.children,m=y.getRenderTarget(),k=y.xr.enabled;y.xr.enabled=!1;const _=p.texture.generateMipmaps;p.texture.generateMipmaps=!1,y.setRenderTarget(p,0),y.render(L,N),y.setRenderTarget(p,1),y.render(L,t),y.setRenderTarget(p,2),y.render(L,j),y.setRenderTarget(p,3),y.render(L,z),y.setRenderTarget(p,4),y.render(L,O),p.texture.generateMipmaps=_,y.setRenderTarget(p,5),y.render(L,h),y.setRenderTarget(m),y.xr.enabled=k,p.texture.needsPMREMUpdate=!0}}class mz extends FN{constructor(y,L,p,N,t,j,z,O,h,m){super(y=void 0!==y?y:[],L=void 0!==L?L:wy,p,N,t,j,z,O,h,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(y){this.image=y}}class kz extends BN{constructor(y=1,L={}){super(y,y,L),this.isWebGLCubeRenderTarget=!0;const p={width:y,height:y,depth:1},N=[p,p,p,p,p,p];void 0!==L.encoding&&(WN("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),L.colorSpace=L.encoding===nL?pp:Lp),this.texture=new mz(N,L.mapping,L.wrapS,L.wrapT,L.magFilter,L.minFilter,L.format,L.type,L.anisotropy,L.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==L.generateMipmaps&&L.generateMipmaps,this.texture.minFilter=void 0!==L.minFilter?L.minFilter:Ey}fromEquirectangularTexture(y,L){this.texture.type=L.type,this.texture.colorSpace=L.colorSpace,this.texture.generateMipmaps=L.generateMipmaps,this.texture.minFilter=L.minFilter,this.texture.magFilter=L.magFilter;const p={uniforms:{tEquirect:{value:null}},vertexShader:`\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t`,fragmentShader:`\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t`},N=new nj(5,5,5),t=new Nz({name:"CubemapFromEquirect",uniforms:vj(p.uniforms),vertexShader:p.vertexShader,fragmentShader:p.fragmentShader,side:R,blending:P});t.uniforms.tEquirect.value=L;const j=new Kj(N,t),z=L.minFilter;return L.minFilter===My&&(L.minFilter=Ey),new hz(1,10,this).update(y,j),L.minFilter=z,j.geometry.dispose(),j.material.dispose(),this}clear(y,L,p,N){const t=y.getRenderTarget();for(let t=0;t<6;t++)y.setRenderTarget(this,t),y.clear(L,p,N);y.setRenderTarget(t)}}const _z=new fN,Wz=new fN,gz=new jN;class Cz{constructor(y=new fN(1,0,0),L=0){this.isPlane=!0,this.normal=y,this.constant=L}set(y,L){return this.normal.copy(y),this.constant=L,this}setComponents(y,L,p,N){return this.normal.set(y,L,p),this.constant=N,this}setFromNormalAndCoplanarPoint(y,L){return this.normal.copy(y),this.constant=-L.dot(this.normal),this}setFromCoplanarPoints(y,L,p){const N=_z.subVectors(p,L).cross(Wz.subVectors(y,L)).normalize();return this.setFromNormalAndCoplanarPoint(N,y),this}copy(y){return this.normal.copy(y.normal),this.constant=y.constant,this}normalize(){const y=1/this.normal.length();return this.normal.multiplyScalar(y),this.constant*=y,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(y){return this.normal.dot(y)+this.constant}distanceToSphere(y){return this.distanceToPoint(y.center)-y.radius}projectPoint(y,L){return L.copy(y).addScaledVector(this.normal,-this.distanceToPoint(y))}intersectLine(y,L){const p=y.delta(_z),N=this.normal.dot(p);if(0===N)return 0===this.distanceToPoint(y.start)?L.copy(y.start):null;const t=-(y.start.dot(this.normal)+this.constant)/N;return t<0||t>1?null:L.copy(y.start).addScaledVector(p,t)}intersectsLine(y){const L=this.distanceToPoint(y.start),p=this.distanceToPoint(y.end);return L<0&&p>0||p<0&&L>0}intersectsBox(y){return y.intersectsPlane(this)}intersectsSphere(y){return y.intersectsPlane(this)}coplanarPoint(y){return y.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(y,L){const p=L||gz.getNormalMatrix(y),N=this.coplanarPoint(_z).applyMatrix4(y),t=this.normal.applyMatrix3(p).normalize();return this.constant=-N.dot(t),this}translate(y){return this.constant-=y.dot(this.normal),this}equals(y){return y.normal.equals(this.normal)&&y.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Qz=new Nt,Tz=new fN;class iz{constructor(y=new Cz,L=new Cz,p=new Cz,N=new Cz,t=new Cz,j=new Cz){this.planes=[y,L,p,N,t,j]}set(y,L,p,N,t,j){const z=this.planes;return z[0].copy(y),z[1].copy(L),z[2].copy(p),z[3].copy(N),z[4].copy(t),z[5].copy(j),this}copy(y){const L=this.planes;for(let p=0;p<6;p++)L[p].copy(y.planes[p]);return this}setFromProjectionMatrix(y,L=rp){const p=this.planes,N=y.elements,t=N[0],j=N[1],z=N[2],O=N[3],h=N[4],m=N[5],k=N[6],_=N[7],W=N[8],g=N[9],C=N[10],Q=N[11],T=N[12],i=N[13],D=N[14],w=N[15];if(p[0].setComponents(O-t,_-h,Q-W,w-T).normalize(),p[1].setComponents(O+t,_+h,Q+W,w+T).normalize(),p[2].setComponents(O+j,_+m,Q+g,w+i).normalize(),p[3].setComponents(O-j,_-m,Q-g,w-i).normalize(),p[4].setComponents(O-z,_-k,Q-C,w-D).normalize(),L===rp)p[5].setComponents(O+z,_+k,Q+C,w+D).normalize();else{if(L!==Gp)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+L);p[5].setComponents(z,k,C,D).normalize()}return this}intersectsObject(y){if(void 0!==y.boundingSphere)null===y.boundingSphere&&y.computeBoundingSphere(),Qz.copy(y.boundingSphere).applyMatrix4(y.matrixWorld);else{const L=y.geometry;null===L.boundingSphere&&L.computeBoundingSphere(),Qz.copy(L.boundingSphere).applyMatrix4(y.matrixWorld)}return this.intersectsSphere(Qz)}intersectsSprite(y){return Qz.center.set(0,0,0),Qz.radius=.7071067811865476,Qz.applyMatrix4(y.matrixWorld),this.intersectsSphere(Qz)}intersectsSphere(y){const L=this.planes,p=y.center,N=-y.radius;for(let y=0;y<6;y++)if(L[y].distanceToPoint(p)<N)return!1;return!0}intersectsBox(y){const L=this.planes;for(let p=0;p<6;p++){const N=L[p];if(Tz.x=N.normal.x>0?y.max.x:y.min.x,Tz.y=N.normal.y>0?y.max.y:y.min.y,Tz.z=N.normal.z>0?y.max.z:y.min.z,N.distanceToPoint(Tz)<0)return!1}return!0}containsPoint(y){const L=this.planes;for(let p=0;p<6;p++)if(L[p].distanceToPoint(y)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Dz(){let y=null,L=!1,p=null,N=null;function t(L,j){p(L,j),N=y.requestAnimationFrame(t)}return{start:function(){!0!==L&&null!==p&&(N=y.requestAnimationFrame(t),L=!0)},stop:function(){y.cancelAnimationFrame(N),L=!1},setAnimationLoop:function(y){p=y},setContext:function(L){y=L}}}function wz(y,L){const p=L.isWebGL2,N=new WeakMap;return{get:function(y){return y.isInterleavedBufferAttribute&&(y=y.data),N.get(y)},remove:function(L){L.isInterleavedBufferAttribute&&(L=L.data);const p=N.get(L);p&&(y.deleteBuffer(p.buffer),N.delete(L))},update:function(L,t){if(L.isGLBufferAttribute){const y=N.get(L);return void((!y||y.version<L.version)&&N.set(L,{buffer:L.buffer,type:L.type,bytesPerElement:L.elementSize,version:L.version}))}L.isInterleavedBufferAttribute&&(L=L.data);const j=N.get(L);void 0===j?N.set(L,function(L,N){const t=L.array,j=L.usage,z=y.createBuffer();let O;if(y.bindBuffer(N,z),y.bufferData(N,t,j),L.onUploadCallback(),t instanceof Float32Array)O=y.FLOAT;else if(t instanceof Uint16Array)if(L.isFloat16BufferAttribute){if(!p)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");O=y.HALF_FLOAT}else O=y.UNSIGNED_SHORT;else if(t instanceof Int16Array)O=y.SHORT;else if(t instanceof Uint32Array)O=y.UNSIGNED_INT;else if(t instanceof Int32Array)O=y.INT;else if(t instanceof Int8Array)O=y.BYTE;else if(t instanceof Uint8Array)O=y.UNSIGNED_BYTE;else{if(!(t instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+t);O=y.UNSIGNED_BYTE}return{buffer:z,type:O,bytesPerElement:t.BYTES_PER_ELEMENT,version:L.version}}(L,t)):j.version<L.version&&(function(L,N,t){const j=N.array,z=N.updateRange;y.bindBuffer(t,L),-1===z.count?y.bufferSubData(t,0,j):(p?y.bufferSubData(t,z.offset*j.BYTES_PER_ELEMENT,j,z.offset,z.count):y.bufferSubData(t,z.offset*j.BYTES_PER_ELEMENT,j.subarray(z.offset,z.offset+z.count)),z.count=-1),N.onUploadCallback()}(j.buffer,L,t),j.version=L.version)}}}class xz extends Rj{constructor(y=1,L=1,p=1,N=1){super(),this.type="PlaneGeometry",this.parameters={width:y,height:L,widthSegments:p,heightSegments:N};const t=y/2,j=L/2,z=Math.floor(p),O=Math.floor(N),h=z+1,m=O+1,k=y/z,_=L/O,W=[],g=[],C=[],Q=[];for(let y=0;y<m;y++){const L=y*_-j;for(let p=0;p<h;p++){const N=p*k-t;g.push(N,-L,0),C.push(0,0,1),Q.push(p/z),Q.push(1-y/O)}}for(let y=0;y<O;y++)for(let L=0;L<z;L++){const p=L+h*y,N=L+h*(y+1),t=L+1+h*(y+1),j=L+1+h*y;W.push(p,N,j),W.push(N,t,j)}this.setIndex(W),this.setAttribute("position",new dj(g,3)),this.setAttribute("normal",new dj(C,3)),this.setAttribute("uv",new dj(Q,2))}copy(y){return super.copy(y),this.parameters=Object.assign({},y.parameters),this}static fromJSON(y){return new xz(y.width,y.height,y.widthSegments,y.heightSegments)}}const dz={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},oz={common:{diffuse:{value:new pj(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new jN},alphaMap:{value:null},alphaMapTransform:{value:new jN},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new jN}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new jN}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new jN}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new jN},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new jN},normalScale:{value:new tN(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new jN},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new jN}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new jN}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new jN}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pj(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new pj(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new jN},alphaTest:{value:0},uvTransform:{value:new jN}},sprite:{diffuse:{value:new pj(16777215)},opacity:{value:1},center:{value:new tN(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new jN},alphaMap:{value:null},alphaMapTransform:{value:new jN},alphaTest:{value:0}}},Uz={basic:{uniforms:ej([oz.common,oz.specularmap,oz.envmap,oz.aomap,oz.lightmap,oz.fog]),vertexShader:dz.meshbasic_vert,fragmentShader:dz.meshbasic_frag},lambert:{uniforms:ej([oz.common,oz.specularmap,oz.envmap,oz.aomap,oz.lightmap,oz.emissivemap,oz.bumpmap,oz.normalmap,oz.displacementmap,oz.fog,oz.lights,{emissive:{value:new pj(0)}}]),vertexShader:dz.meshlambert_vert,fragmentShader:dz.meshlambert_frag},phong:{uniforms:ej([oz.common,oz.specularmap,oz.envmap,oz.aomap,oz.lightmap,oz.emissivemap,oz.bumpmap,oz.normalmap,oz.displacementmap,oz.fog,oz.lights,{emissive:{value:new pj(0)},specular:{value:new pj(1118481)},shininess:{value:30}}]),vertexShader:dz.meshphong_vert,fragmentShader:dz.meshphong_frag},standard:{uniforms:ej([oz.common,oz.envmap,oz.aomap,oz.lightmap,oz.emissivemap,oz.bumpmap,oz.normalmap,oz.displacementmap,oz.roughnessmap,oz.metalnessmap,oz.fog,oz.lights,{emissive:{value:new pj(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:dz.meshphysical_vert,fragmentShader:dz.meshphysical_frag},toon:{uniforms:ej([oz.common,oz.aomap,oz.lightmap,oz.emissivemap,oz.bumpmap,oz.normalmap,oz.displacementmap,oz.gradientmap,oz.fog,oz.lights,{emissive:{value:new pj(0)}}]),vertexShader:dz.meshtoon_vert,fragmentShader:dz.meshtoon_frag},matcap:{uniforms:ej([oz.common,oz.bumpmap,oz.normalmap,oz.displacementmap,oz.fog,{matcap:{value:null}}]),vertexShader:dz.meshmatcap_vert,fragmentShader:dz.meshmatcap_frag},points:{uniforms:ej([oz.points,oz.fog]),vertexShader:dz.points_vert,fragmentShader:dz.points_frag},dashed:{uniforms:ej([oz.common,oz.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:dz.linedashed_vert,fragmentShader:dz.linedashed_frag},depth:{uniforms:ej([oz.common,oz.displacementmap]),vertexShader:dz.depth_vert,fragmentShader:dz.depth_frag},normal:{uniforms:ej([oz.common,oz.bumpmap,oz.normalmap,oz.displacementmap,{opacity:{value:1}}]),vertexShader:dz.meshnormal_vert,fragmentShader:dz.meshnormal_frag},sprite:{uniforms:ej([oz.sprite,oz.fog]),vertexShader:dz.sprite_vert,fragmentShader:dz.sprite_frag},background:{uniforms:{uvTransform:{value:new jN},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:dz.background_vert,fragmentShader:dz.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:dz.backgroundCube_vert,fragmentShader:dz.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:dz.cube_vert,fragmentShader:dz.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:dz.equirect_vert,fragmentShader:dz.equirect_frag},distanceRGBA:{uniforms:ej([oz.common,oz.displacementmap,{referencePosition:{value:new fN},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:dz.distanceRGBA_vert,fragmentShader:dz.distanceRGBA_frag},shadow:{uniforms:ej([oz.lights,oz.fog,{color:{value:new pj(0)},opacity:{value:1}}]),vertexShader:dz.shadow_vert,fragmentShader:dz.shadow_frag}};Uz.physical={uniforms:ej([Uz.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new jN},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new jN},clearcoatNormalScale:{value:new tN(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new jN},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new jN},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new jN},sheen:{value:0},sheenColor:{value:new pj(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new jN},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new jN},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new jN},transmissionSamplerSize:{value:new tN},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new jN},attenuationDistance:{value:0},attenuationColor:{value:new pj(0)},specularColor:{value:new pj(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new jN},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new jN},anisotropyVector:{value:new tN},anisotropyMap:{value:null},anisotropyMapTransform:{value:new jN}}]),vertexShader:dz.meshphysical_vert,fragmentShader:dz.meshphysical_frag};const Iz={r:0,b:0,g:0};function Vz(y,L,p,N,t,j,z){const O=new pj(0);let h,m,k=!0===j?0:1,_=null,W=0,g=null;function C(L,p){L.getRGB(Iz,Zj(y)),N.buffers.color.setClear(Iz.r,Iz.g,Iz.b,p,z)}return{getClearColor:function(){return O},setClearColor:function(y,L=1){O.set(y),k=L,C(O,k)},getClearAlpha:function(){return k},setClearAlpha:function(y){k=y,C(O,k)},render:function(j,Q){let T=!1,i=!0===Q.isScene?Q.background:null;switch(i&&i.isTexture&&(i=(Q.backgroundBlurriness>0?p:L).get(i)),null===i?C(O,k):i&&i.isColor&&(C(i,1),T=!0),y.xr.getEnvironmentBlendMode()){case"opaque":T=!0;break;case"additive":N.buffers.color.setClear(0,0,0,1,z),T=!0;break;case"alpha-blend":N.buffers.color.setClear(0,0,0,0,z),T=!0}(y.autoClear||T)&&y.clear(y.autoClearColor,y.autoClearDepth,y.autoClearStencil),i&&(i.isCubeTexture||i.mapping===Uy)?(void 0===m&&(m=new Kj(new nj(1,1,1),new Nz({name:"BackgroundCubeMaterial",uniforms:vj(Uz.backgroundCube.uniforms),vertexShader:Uz.backgroundCube.vertexShader,fragmentShader:Uz.backgroundCube.fragmentShader,side:R,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(y,L,p){this.matrixWorld.copyPosition(p.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),t.update(m)),m.material.uniforms.envMap.value=i,m.material.uniforms.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,m.material.uniforms.backgroundBlurriness.value=Q.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=Q.backgroundIntensity,m.material.toneMapped=i.colorSpace!==pp,_===i&&W===i.version&&g===y.toneMapping||(m.material.needsUpdate=!0,_=i,W=i.version,g=y.toneMapping),m.layers.enableAll(),j.unshift(m,m.geometry,m.material,0,0,null)):i&&i.isTexture&&(void 0===h&&(h=new Kj(new xz(2,2),new Nz({name:"BackgroundMaterial",uniforms:vj(Uz.background.uniforms),vertexShader:Uz.background.vertexShader,fragmentShader:Uz.background.fragmentShader,side:B,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),t.update(h)),h.material.uniforms.t2D.value=i,h.material.uniforms.backgroundIntensity.value=Q.backgroundIntensity,h.material.toneMapped=i.colorSpace!==pp,!0===i.matrixAutoUpdate&&i.updateMatrix(),h.material.uniforms.uvTransform.value.copy(i.matrix),_===i&&W===i.version&&g===y.toneMapping||(h.material.needsUpdate=!0,_=i,W=i.version,g=y.toneMapping),h.layers.enableAll(),j.unshift(h,h.geometry,h.material,0,0,null))}}}function Fz(y,L,p,N){const t=y.getParameter(y.MAX_VERTEX_ATTRIBS),j=N.isWebGL2?null:L.get("OES_vertex_array_object"),z=N.isWebGL2||null!==j,O={},h=g(null);let m=h,k=!1;function _(L){return N.isWebGL2?y.bindVertexArray(L):j.bindVertexArrayOES(L)}function W(L){return N.isWebGL2?y.deleteVertexArray(L):j.deleteVertexArrayOES(L)}function g(y){const L=[],p=[],N=[];for(let y=0;y<t;y++)L[y]=0,p[y]=0,N[y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:p,attributeDivisors:N,object:y,attributes:{},index:null}}function C(){const y=m.newAttributes;for(let L=0,p=y.length;L<p;L++)y[L]=0}function Q(y){T(y,0)}function T(p,t){const j=m.newAttributes,z=m.enabledAttributes,O=m.attributeDivisors;j[p]=1,0===z[p]&&(y.enableVertexAttribArray(p),z[p]=1),O[p]!==t&&((N.isWebGL2?y:L.get("ANGLE_instanced_arrays"))[N.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](p,t),O[p]=t)}function i(){const L=m.newAttributes,p=m.enabledAttributes;for(let N=0,t=p.length;N<t;N++)p[N]!==L[N]&&(y.disableVertexAttribArray(N),p[N]=0)}function D(L,p,N,t,j,z,O){!0===O?y.vertexAttribIPointer(L,p,N,j,z):y.vertexAttribPointer(L,p,N,t,j,z)}function w(){x(),k=!0,m!==h&&(m=h,_(m.object))}function x(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:function(t,h,W,w,x){let d=!1;if(z){const L=function(L,p,t){const z=!0===t.wireframe;let h=O[L.id];void 0===h&&(h={},O[L.id]=h);let m=h[p.id];void 0===m&&(m={},h[p.id]=m);let k=m[z];return void 0===k&&(k=g(N.isWebGL2?y.createVertexArray():j.createVertexArrayOES()),m[z]=k),k}(w,W,h);m!==L&&(m=L,_(m.object)),d=function(y,L,p,N){const t=m.attributes,j=L.attributes;let z=0;const O=p.getAttributes();for(const L in O)if(O[L].location>=0){const p=t[L];let N=j[L];if(void 0===N&&("instanceMatrix"===L&&y.instanceMatrix&&(N=y.instanceMatrix),"instanceColor"===L&&y.instanceColor&&(N=y.instanceColor)),void 0===p)return!0;if(p.attribute!==N)return!0;if(N&&p.data!==N.data)return!0;z++}return m.attributesNum!==z||m.index!==N}(t,w,W,x),d&&function(y,L,p,N){const t={},j=L.attributes;let z=0;const O=p.getAttributes();for(const L in O)if(O[L].location>=0){let p=j[L];void 0===p&&("instanceMatrix"===L&&y.instanceMatrix&&(p=y.instanceMatrix),"instanceColor"===L&&y.instanceColor&&(p=y.instanceColor));const N={};N.attribute=p,p&&p.data&&(N.data=p.data),t[L]=N,z++}m.attributes=t,m.attributesNum=z,m.index=N}(t,w,W,x)}else{const y=!0===h.wireframe;m.geometry===w.id&&m.program===W.id&&m.wireframe===y||(m.geometry=w.id,m.program=W.id,m.wireframe=y,d=!0)}null!==x&&p.update(x,y.ELEMENT_ARRAY_BUFFER),(d||k)&&(k=!1,function(t,j,z,O){if(!1===N.isWebGL2&&(t.isInstancedMesh||O.isInstancedBufferGeometry)&&null===L.get("ANGLE_instanced_arrays"))return;C();const h=O.attributes,m=z.getAttributes(),k=j.defaultAttributeValues;for(const L in m){const j=m[L];if(j.location>=0){let z=h[L];if(void 0===z&&("instanceMatrix"===L&&t.instanceMatrix&&(z=t.instanceMatrix),"instanceColor"===L&&t.instanceColor&&(z=t.instanceColor)),void 0!==z){const L=z.normalized,h=z.itemSize,m=p.get(z);if(void 0===m)continue;const k=m.buffer,_=m.type,W=m.bytesPerElement,g=!0===N.isWebGL2&&(_===y.INT||_===y.UNSIGNED_INT||z.gpuType===ry);if(z.isInterleavedBufferAttribute){const p=z.data,N=p.stride,m=z.offset;if(p.isInstancedInterleavedBuffer){for(let y=0;y<j.locationSize;y++)T(j.location+y,p.meshPerAttribute);!0!==t.isInstancedMesh&&void 0===O._maxInstanceCount&&(O._maxInstanceCount=p.meshPerAttribute*p.count)}else for(let y=0;y<j.locationSize;y++)Q(j.location+y);y.bindBuffer(y.ARRAY_BUFFER,k);for(let y=0;y<j.locationSize;y++)D(j.location+y,h/j.locationSize,_,L,N*W,(m+h/j.locationSize*y)*W,g)}else{if(z.isInstancedBufferAttribute){for(let y=0;y<j.locationSize;y++)T(j.location+y,z.meshPerAttribute);!0!==t.isInstancedMesh&&void 0===O._maxInstanceCount&&(O._maxInstanceCount=z.meshPerAttribute*z.count)}else for(let y=0;y<j.locationSize;y++)Q(j.location+y);y.bindBuffer(y.ARRAY_BUFFER,k);for(let y=0;y<j.locationSize;y++)D(j.location+y,h/j.locationSize,_,L,h*W,h/j.locationSize*y*W,g)}}else if(void 0!==k){const p=k[L];if(void 0!==p)switch(p.length){case 2:y.vertexAttrib2fv(j.location,p);break;case 3:y.vertexAttrib3fv(j.location,p);break;case 4:y.vertexAttrib4fv(j.location,p);break;default:y.vertexAttrib1fv(j.location,p)}}}}i()}(t,h,W,w),null!==x&&y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,p.get(x).buffer))},reset:w,resetDefaultState:x,dispose:function(){w();for(const y in O){const L=O[y];for(const y in L){const p=L[y];for(const y in p)W(p[y].object),delete p[y];delete L[y]}delete O[y]}},releaseStatesOfGeometry:function(y){if(void 0===O[y.id])return;const L=O[y.id];for(const y in L){const p=L[y];for(const y in p)W(p[y].object),delete p[y];delete L[y]}delete O[y.id]},releaseStatesOfProgram:function(y){for(const L in O){const p=O[L];if(void 0===p[y.id])continue;const N=p[y.id];for(const y in N)W(N[y].object),delete N[y];delete p[y.id]}},initAttributes:C,enableAttribute:Q,disableUnusedAttributes:i}}function uz(y,L,p,N){const t=N.isWebGL2;let j;this.setMode=function(y){j=y},this.render=function(L,N){y.drawArrays(j,L,N),p.update(N,j,1)},this.renderInstances=function(N,z,O){if(0===O)return;let h,m;if(t)h=y,m="drawArraysInstanced";else if(h=L.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[m](j,N,z,O),p.update(z,j,O)}}function Sz(y,L,p){let N;function t(L){if("highp"===L){if(y.getShaderPrecisionFormat(y.VERTEX_SHADER,y.HIGH_FLOAT).precision>0&&y.getShaderPrecisionFormat(y.FRAGMENT_SHADER,y.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return"mediump"===L&&y.getShaderPrecisionFormat(y.VERTEX_SHADER,y.MEDIUM_FLOAT).precision>0&&y.getShaderPrecisionFormat(y.FRAGMENT_SHADER,y.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const j="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===y.constructor.name;let z=void 0!==p.precision?p.precision:"highp";const O=t(z);O!==z&&(console.warn("THREE.WebGLRenderer:",z,"not supported, using",O,"instead."),z=O);const h=j||L.has("WEBGL_draw_buffers"),m=!0===p.logarithmicDepthBuffer,k=y.getParameter(y.MAX_TEXTURE_IMAGE_UNITS),_=y.getParameter(y.MAX_VERTEX_TEXTURE_IMAGE_UNITS),W=y.getParameter(y.MAX_TEXTURE_SIZE),g=y.getParameter(y.MAX_CUBE_MAP_TEXTURE_SIZE),C=y.getParameter(y.MAX_VERTEX_ATTRIBS),Q=y.getParameter(y.MAX_VERTEX_UNIFORM_VECTORS),T=y.getParameter(y.MAX_VARYING_VECTORS),i=y.getParameter(y.MAX_FRAGMENT_UNIFORM_VECTORS),D=_>0,w=j||L.has("OES_texture_float");return{isWebGL2:j,drawBuffers:h,getMaxAnisotropy:function(){if(void 0!==N)return N;if(!0===L.has("EXT_texture_filter_anisotropic")){const p=L.get("EXT_texture_filter_anisotropic");N=y.getParameter(p.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else N=0;return N},getMaxPrecision:t,precision:z,logarithmicDepthBuffer:m,maxTextures:k,maxVertexTextures:_,maxTextureSize:W,maxCubemapSize:g,maxAttributes:C,maxVertexUniforms:Q,maxVaryings:T,maxFragmentUniforms:i,vertexTextures:D,floatFragmentTextures:w,floatVertexTextures:D&&w,maxSamples:j?y.getParameter(y.MAX_SAMPLES):0}}function Bz(y){const L=this;let p=null,N=0,t=!1,j=!1;const z=new Cz,O=new jN,h={value:null,needsUpdate:!1};function m(y,p,N,t){const j=null!==y?y.length:0;let m=null;if(0!==j){if(m=h.value,!0!==t||null===m){const L=N+4*j,t=p.matrixWorldInverse;O.getNormalMatrix(t),(null===m||m.length<L)&&(m=new Float32Array(L));for(let L=0,p=N;L!==j;++L,p+=4)z.copy(y[L]).applyMatrix4(t,O),z.normal.toArray(m,p),m[p+3]=z.constant}h.value=m,h.needsUpdate=!0}return L.numPlanes=j,L.numIntersection=0,m}this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(y,L){const p=0!==y.length||L||0!==N||t;return t=L,N=y.length,p},this.beginShadows=function(){j=!0,m(null)},this.endShadows=function(){j=!1},this.setGlobalState=function(y,L){p=m(y,L,0)},this.setState=function(z,O,k){const _=z.clippingPlanes,W=z.clipIntersection,g=z.clipShadows,C=y.get(z);if(!t||null===_||0===_.length||j&&!g)j?m(null):(h.value!==p&&(h.value=p,h.needsUpdate=N>0),L.numPlanes=N,L.numIntersection=0);else{const y=j?0:N,L=4*y;let t=C.clippingState||null;h.value=t,t=m(_,O,L,k);for(let y=0;y!==L;++y)t[y]=p[y];C.clippingState=t,this.numIntersection=W?this.numPlanes:0,this.numPlanes+=y}}}function Rz(y){let L=new WeakMap;function p(y,L){return L===dy?y.mapping=wy:L===oy&&(y.mapping=xy),y}function N(y){const p=y.target;p.removeEventListener("dispose",N);const t=L.get(p);void 0!==t&&(L.delete(p),t.dispose())}return{get:function(t){if(t&&t.isTexture&&!1===t.isRenderTargetTexture){const j=t.mapping;if(j===dy||j===oy){if(L.has(t))return p(L.get(t).texture,t.mapping);{const j=t.image;if(j&&j.height>0){const z=new kz(j.height/2);return z.fromEquirectangularTexture(y,t),L.set(t,z),t.addEventListener("dispose",N),p(z.texture,t.mapping)}return null}}}return t},dispose:function(){L=new WeakMap}}}class Yz extends tz{constructor(y=-1,L=1,p=1,N=-1,t=.1,j=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=y,this.right=L,this.top=p,this.bottom=N,this.near=t,this.far=j,this.updateProjectionMatrix()}copy(y,L){return super.copy(y,L),this.left=y.left,this.right=y.right,this.top=y.top,this.bottom=y.bottom,this.near=y.near,this.far=y.far,this.zoom=y.zoom,this.view=null===y.view?null:Object.assign({},y.view),this}setViewOffset(y,L,p,N,t,j){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=y,this.view.fullHeight=L,this.view.offsetX=p,this.view.offsetY=N,this.view.width=t,this.view.height=j,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const y=(this.right-this.left)/(2*this.zoom),L=(this.top-this.bottom)/(2*this.zoom),p=(this.right+this.left)/2,N=(this.top+this.bottom)/2;let t=p-y,j=p+y,z=N+L,O=N-L;if(null!==this.view&&this.view.enabled){const y=(this.right-this.left)/this.view.fullWidth/this.zoom,L=(this.top-this.bottom)/this.view.fullHeight/this.zoom;t+=y*this.view.offsetX,j=t+y*this.view.width,z-=L*this.view.offsetY,O=z-L*this.view.height}this.projectionMatrix.makeOrthographic(t,j,z,O,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(y){const L=super.toJSON(y);return L.object.zoom=this.zoom,L.object.left=this.left,L.object.right=this.right,L.object.top=this.top,L.object.bottom=this.bottom,L.object.near=this.near,L.object.far=this.far,null!==this.view&&(L.object.view=Object.assign({},this.view)),L}}const Ez=4,Pz=[.125,.215,.35,.446,.526,.582],lz=20,Mz=new Yz,fz=new pj;let az=null;const Hz=(1+Math.sqrt(5))/2,Xz=1/Hz,Jz=[new fN(1,1,1),new fN(-1,1,1),new fN(1,1,-1),new fN(-1,1,-1),new fN(0,Hz,Xz),new fN(0,Hz,-Xz),new fN(Xz,0,Hz),new fN(-Xz,0,Hz),new fN(Hz,Xz,0),new fN(-Hz,Xz,0)];class rz{constructor(y){this._renderer=y,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(y,L=0,p=.1,N=100){az=this._renderer.getRenderTarget(),this._setSize(256);const t=this._allocateTargets();return t.depthBuffer=!0,this._sceneToCubeUV(y,p,N,t),L>0&&this._blur(t,0,0,L),this._applyPMREM(t),this._cleanup(t),t}fromEquirectangular(y,L=null){return this._fromTexture(y,L)}fromCubemap(y,L=null){return this._fromTexture(y,L)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Az(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=qz(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(y){this._lodMax=Math.floor(Math.log2(y)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let y=0;y<this._lodPlanes.length;y++)this._lodPlanes[y].dispose()}_cleanup(y){this._renderer.setRenderTarget(az),y.scissorTest=!1,$z(y,0,0,y.width,y.height)}_fromTexture(y,L){y.mapping===wy||y.mapping===xy?this._setSize(0===y.image.length?16:y.image[0].width||y.image[0].image.width):this._setSize(y.image.width/4),az=this._renderer.getRenderTarget();const p=L||this._allocateTargets();return this._textureToCubeUV(y,p),this._applyPMREM(p),this._cleanup(p),p}_allocateTargets(){const y=3*Math.max(this._cubeSize,16*7),L=4*this._cubeSize,p={magFilter:Ey,minFilter:Ey,generateMipmaps:!1,type:qy,format:by,colorSpace:Np,depthBuffer:!1},N=Gz(y,L,p);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==y||this._pingPongRenderTarget.height!==L){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Gz(y,L,p);const{_lodMax:N}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(y){const L=[],p=[],N=[];let t=y;const j=y-Ez+1+Pz.length;for(let z=0;z<j;z++){const j=Math.pow(2,t);p.push(j);let O=1/j;z>y-Ez?O=Pz[z-y+Ez-1]:0===z&&(O=0),N.push(O);const h=1/(j-2),m=-h,k=1+h,_=[m,m,k,m,k,k,m,m,k,k,m,k],W=6,g=6,C=3,Q=2,T=1,i=new Float32Array(C*g*W),D=new Float32Array(Q*g*W),w=new Float32Array(T*g*W);for(let y=0;y<W;y++){const L=y%3*2/3-1,p=y>2?0:-1,N=[L,p,0,L+2/3,p,0,L+2/3,p+1,0,L,p,0,L+2/3,p+1,0,L,p+1,0];i.set(N,C*g*y),D.set(_,Q*g*y);const t=[y,y,y,y,y,y];w.set(t,T*g*y)}const x=new Rj;x.setAttribute("position",new Wj(i,C)),x.setAttribute("uv",new Wj(D,Q)),x.setAttribute("faceIndex",new Wj(w,T)),L.push(x),t>Ez&&t--}return{lodPlanes:L,sizeLods:p,sigmas:N}}(N)),this._blurMaterial=function(y,L,p){const N=new Float32Array(lz),t=new fN(0,1,0);return new Nz({name:"SphericalGaussianBlur",defines:{n:lz,CUBEUV_TEXEL_WIDTH:1/L,CUBEUV_TEXEL_HEIGHT:1/p,CUBEUV_MAX_MIP:`${y}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:N},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t}},vertexShader:sz(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t`,blending:P,depthTest:!1,depthWrite:!1})}(N,y,L)}return N}_compileMaterial(y){const L=new Kj(this._lodPlanes[0],y);this._renderer.compile(L,Mz)}_sceneToCubeUV(y,L,p,N){const t=new jz(90,1,L,p),j=[1,-1,1,1,1,1],z=[1,1,1,-1,-1,-1],O=this._renderer,h=O.autoClear,m=O.toneMapping;O.getClearColor(fz),O.toneMapping=Wy,O.autoClear=!1;const k=new tj({name:"PMREM.Background",side:R,depthWrite:!1,depthTest:!1}),_=new Kj(new nj,k);let W=!1;const g=y.background;g?g.isColor&&(k.color.copy(g),y.background=null,W=!0):(k.color.copy(fz),W=!0);for(let L=0;L<6;L++){const p=L%3;0===p?(t.up.set(0,j[L],0),t.lookAt(z[L],0,0)):1===p?(t.up.set(0,0,j[L]),t.lookAt(0,z[L],0)):(t.up.set(0,j[L],0),t.lookAt(0,0,z[L]));const h=this._cubeSize;$z(N,p*h,L>2?h:0,h,h),O.setRenderTarget(N),W&&O.render(_,t),O.render(y,t)}_.geometry.dispose(),_.material.dispose(),O.toneMapping=m,O.autoClear=h,y.background=g}_textureToCubeUV(y,L){const p=this._renderer,N=y.mapping===wy||y.mapping===xy;N?(null===this._cubemapMaterial&&(this._cubemapMaterial=Az()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===y.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=qz());const t=N?this._cubemapMaterial:this._equirectMaterial,j=new Kj(this._lodPlanes[0],t);t.uniforms["envMap"].value=y;const z=this._cubeSize;$z(L,0,0,3*z,2*z),p.setRenderTarget(L),p.render(j,Mz)}_applyPMREM(y){const L=this._renderer,p=L.autoClear;L.autoClear=!1;for(let L=1;L<this._lodPlanes.length;L++){const p=Math.sqrt(this._sigmas[L]*this._sigmas[L]-this._sigmas[L-1]*this._sigmas[L-1]),N=Jz[(L-1)%Jz.length];this._blur(y,L-1,L,p,N)}L.autoClear=p}_blur(y,L,p,N,t){const j=this._pingPongRenderTarget;this._halfBlur(y,j,L,p,N,"latitudinal",t),this._halfBlur(j,y,p,p,N,"longitudinal",t)}_halfBlur(y,L,p,N,t,j,z){const O=this._renderer,h=this._blurMaterial;"latitudinal"!==j&&"longitudinal"!==j&&console.error("blur direction must be either latitudinal or longitudinal!");const m=new Kj(this._lodPlanes[N],h),k=h.uniforms,_=this._sizeLods[p]-1,W=isFinite(t)?Math.PI/(2*_):2*Math.PI/(2*lz-1),g=t/W,C=isFinite(t)?1+Math.floor(3*g):lz;C>lz&&console.warn(`sigmaRadians, ${t}, is too large and will clip, as it requested ${C} samples when the maximum is set to ${lz}`);const Q=[];let T=0;for(let y=0;y<lz;++y){const L=y/g,p=Math.exp(-L*L/2);Q.push(p),0===y?T+=p:y<C&&(T+=2*p)}for(let y=0;y<Q.length;y++)Q[y]=Q[y]/T;k["envMap"].value=y.texture,k["samples"].value=C,k["weights"].value=Q,k["latitudinal"].value="latitudinal"===j,z&&(k["poleAxis"].value=z);const{_lodMax:i}=this;k["dTheta"].value=W,k["mipInt"].value=i-p;const D=this._sizeLods[N];$z(L,3*D*(N>i-Ez?N-i+Ez:0),4*(this._cubeSize-D),3*D,2*D),O.setRenderTarget(L),O.render(m,Mz)}}function Gz(y,L,p){const N=new BN(y,L,p);return N.texture.mapping=Uy,N.texture.name="PMREM.cubeUv",N.scissorTest=!0,N}function $z(y,L,p,N,t){y.viewport.set(L,p,N,t),y.scissor.set(L,p,N,t)}function qz(){return new Nz({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:sz(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t`,blending:P,depthTest:!1,depthWrite:!1})}function Az(){return new Nz({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:sz(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t`,blending:P,depthTest:!1,depthWrite:!1})}function sz(){return`\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t`}function cz(y){let L=new WeakMap,p=null;function N(y){const p=y.target;p.removeEventListener("dispose",N);const t=L.get(p);void 0!==t&&(L.delete(p),t.dispose())}return{get:function(t){if(t&&t.isTexture){const j=t.mapping,z=j===dy||j===oy,O=j===wy||j===xy;if(z||O){if(t.isRenderTargetTexture&&!0===t.needsPMREMUpdate){t.needsPMREMUpdate=!1;let N=L.get(t);return null===p&&(p=new rz(y)),N=z?p.fromEquirectangular(t,N):p.fromCubemap(t,N),L.set(t,N),N.texture}if(L.has(t))return L.get(t).texture;{const j=t.image;if(z&&j&&j.height>0||O&&j&&function(y){let L=0;const p=6;for(let N=0;N<p;N++)void 0!==y[N]&&L++;return L===p}(j)){null===p&&(p=new rz(y));const j=z?p.fromEquirectangular(t):p.fromCubemap(t);return L.set(t,j),t.addEventListener("dispose",N),j.texture}return null}}}return t},dispose:function(){L=new WeakMap,null!==p&&(p.dispose(),p=null)}}}function Kz(y){const L={};function p(p){if(void 0!==L[p])return L[p];let N;switch(p){case"WEBGL_depth_texture":N=y.getExtension("WEBGL_depth_texture")||y.getExtension("MOZ_WEBGL_depth_texture")||y.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":N=y.getExtension("EXT_texture_filter_anisotropic")||y.getExtension("MOZ_EXT_texture_filter_anisotropic")||y.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":N=y.getExtension("WEBGL_compressed_texture_s3tc")||y.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||y.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":N=y.getExtension("WEBGL_compressed_texture_pvrtc")||y.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:N=y.getExtension(p)}return L[p]=N,N}return{has:function(y){return null!==p(y)},init:function(y){y.isWebGL2?p("EXT_color_buffer_float"):(p("WEBGL_depth_texture"),p("OES_texture_float"),p("OES_texture_half_float"),p("OES_texture_half_float_linear"),p("OES_standard_derivatives"),p("OES_element_index_uint"),p("OES_vertex_array_object"),p("ANGLE_instanced_arrays")),p("OES_texture_float_linear"),p("EXT_color_buffer_half_float"),p("WEBGL_multisampled_render_to_texture")},get:function(y){const L=p(y);return null===L&&console.warn("THREE.WebGLRenderer: "+y+" extension not supported."),L}}}function bz(y,L,p,N){const t={},j=new WeakMap;function z(y){const O=y.target;null!==O.index&&L.remove(O.index);for(const y in O.attributes)L.remove(O.attributes[y]);for(const y in O.morphAttributes){const p=O.morphAttributes[y];for(let y=0,N=p.length;y<N;y++)L.remove(p[y])}O.removeEventListener("dispose",z),delete t[O.id];const h=j.get(O);h&&(L.remove(h),j.delete(O)),N.releaseStatesOfGeometry(O),!0===O.isInstancedBufferGeometry&&delete O._maxInstanceCount,p.memory.geometries--}function O(y){const p=[],N=y.index,t=y.attributes.position;let z=0;if(null!==N){const y=N.array;z=N.version;for(let L=0,N=y.length;L<N;L+=3){const N=y[L+0],t=y[L+1],j=y[L+2];p.push(N,t,t,j,j,N)}}else{if(void 0===t)return;{const y=t.array;z=t.version;for(let L=0,N=y.length/3-1;L<N;L+=3){const y=L+0,N=L+1,t=L+2;p.push(y,N,N,t,t,y)}}}const O=new(ON(p)?wj:ij)(p,1);O.version=z;const h=j.get(y);h&&L.remove(h),j.set(y,O)}return{get:function(y,L){return!0===t[L.id]||(L.addEventListener("dispose",z),t[L.id]=!0,p.memory.geometries++),L},update:function(p){const N=p.attributes;for(const p in N)L.update(N[p],y.ARRAY_BUFFER);const t=p.morphAttributes;for(const p in t){const N=t[p];for(let p=0,t=N.length;p<t;p++)L.update(N[p],y.ARRAY_BUFFER)}},getWireframeAttribute:function(y){const L=j.get(y);if(L){const p=y.index;null!==p&&L.version<p.version&&O(y)}else O(y);return j.get(y)}}}function nz(y,L,p,N){const t=N.isWebGL2;let j,z,O;this.setMode=function(y){j=y},this.setIndex=function(y){z=y.type,O=y.bytesPerElement},this.render=function(L,N){y.drawElements(j,N,z,L*O),p.update(N,j,1)},this.renderInstances=function(N,h,m){if(0===m)return;let k,_;if(t)k=y,_="drawElementsInstanced";else if(k=L.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",null===k)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");k[_](j,h,z,N*O,m),p.update(h,j,m)}}function vz(y){const L={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:L,programs:null,autoReset:!0,reset:function(){L.calls=0,L.triangles=0,L.points=0,L.lines=0},update:function(p,N,t){switch(L.calls++,N){case y.TRIANGLES:L.triangles+=t*(p/3);break;case y.LINES:L.lines+=t*(p/2);break;case y.LINE_STRIP:L.lines+=t*(p-1);break;case y.LINE_LOOP:L.lines+=t*p;break;case y.POINTS:L.points+=t*p;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",N)}}}}function ez(y,L){return y[0]-L[0]}function Zz(y,L){return Math.abs(L[1])-Math.abs(y[1])}function yO(y,L,p){const N={},t=new Float32Array(8),j=new WeakMap,z=new uN,O=[];for(let y=0;y<8;y++)O[y]=[y,0];return{update:function(h,m,k){const _=h.morphTargetInfluences;if(!0===L.isWebGL2){const W=m.morphAttributes.position||m.morphAttributes.normal||m.morphAttributes.color,g=void 0!==W?W.length:0;let C=j.get(m);if(void 0===C||C.count!==g){void 0!==C&&C.texture.dispose();const i=void 0!==m.morphAttributes.position,D=void 0!==m.morphAttributes.normal,w=void 0!==m.morphAttributes.color,x=m.morphAttributes.position||[],d=m.morphAttributes.normal||[],o=m.morphAttributes.color||[];let U=0;!0===i&&(U=1),!0===D&&(U=2),!0===w&&(U=3);let I=m.attributes.position.count*U,V=1;I>L.maxTextureSize&&(V=Math.ceil(I/L.maxTextureSize),I=L.maxTextureSize);const F=new Float32Array(I*V*4*g),u=new RN(F,I,V,g);u.type=$y,u.needsUpdate=!0;const S=4*U;for(let R=0;R<g;R++){const Y=x[R],E=d[R],P=o[R],l=I*V*4*R;for(let M=0;M<Y.count;M++){const f=M*S;!0===i&&(z.fromBufferAttribute(Y,M),F[l+f+0]=z.x,F[l+f+1]=z.y,F[l+f+2]=z.z,F[l+f+3]=0),!0===D&&(z.fromBufferAttribute(E,M),F[l+f+4]=z.x,F[l+f+5]=z.y,F[l+f+6]=z.z,F[l+f+7]=0),!0===w&&(z.fromBufferAttribute(P,M),F[l+f+8]=z.x,F[l+f+9]=z.y,F[l+f+10]=z.z,F[l+f+11]=4===P.itemSize?z.w:1)}}function B(){u.dispose(),j.delete(m),m.removeEventListener("dispose",B)}C={count:g,texture:u,size:new tN(I,V)},j.set(m,C),m.addEventListener("dispose",B)}let Q=0;for(let a=0;a<_.length;a++)Q+=_[a];const T=m.morphTargetsRelative?1:1-Q;k.getUniforms().setValue(y,"morphTargetBaseInfluence",T),k.getUniforms().setValue(y,"morphTargetInfluences",_),k.getUniforms().setValue(y,"morphTargetsTexture",C.texture,p),k.getUniforms().setValue(y,"morphTargetsTextureSize",C.size)}else{const H=void 0===_?0:_.length;let X=N[m.id];if(void 0===X||X.length!==H){X=[];for(let q=0;q<H;q++)X[q]=[q,0];N[m.id]=X}for(let A=0;A<H;A++){const s=X[A];s[0]=A,s[1]=_[A]}X.sort(Zz);for(let c=0;c<8;c++)c<H&&X[c][1]?(O[c][0]=X[c][0],O[c][1]=X[c][1]):(O[c][0]=Number.MAX_SAFE_INTEGER,O[c][1]=0);O.sort(ez);const J=m.morphAttributes.position,r=m.morphAttributes.normal;let G=0;for(let K=0;K<8;K++){const b=O[K],n=b[0],v=b[1];n!==Number.MAX_SAFE_INTEGER&&v?(J&&m.getAttribute("morphTarget"+K)!==J[n]&&m.setAttribute("morphTarget"+K,J[n]),r&&m.getAttribute("morphNormal"+K)!==r[n]&&m.setAttribute("morphNormal"+K,r[n]),t[K]=v,G+=v):(J&&!0===m.hasAttribute("morphTarget"+K)&&m.deleteAttribute("morphTarget"+K),r&&!0===m.hasAttribute("morphNormal"+K)&&m.deleteAttribute("morphNormal"+K),t[K]=0)}const $=m.morphTargetsRelative?1:1-G;k.getUniforms().setValue(y,"morphTargetBaseInfluence",$),k.getUniforms().setValue(y,"morphTargetInfluences",t)}}}}function LO(y,L,p,N){let t=new WeakMap;function j(y){const L=y.target;L.removeEventListener("dispose",j),p.remove(L.instanceMatrix),null!==L.instanceColor&&p.remove(L.instanceColor)}return{update:function(z){const O=N.render.frame,h=z.geometry,m=L.get(z,h);if(t.get(m)!==O&&(L.update(m),t.set(m,O)),z.isInstancedMesh&&(!1===z.hasEventListener("dispose",j)&&z.addEventListener("dispose",j),t.get(z)!==O&&(p.update(z.instanceMatrix,y.ARRAY_BUFFER),null!==z.instanceColor&&p.update(z.instanceColor,y.ARRAY_BUFFER),t.set(z,O))),z.isSkinnedMesh){const y=z.skeleton;t.get(y)!==O&&(y.update(),t.set(y,O))}return m},dispose:function(){t=new WeakMap}}}const pO=new FN,NO=new RN,tO=new EN,jO=new mz,zO=[],OO=[],hO=new Float32Array(16),mO=new Float32Array(9),kO=new Float32Array(4);function _O(y,L,p){const N=y[0];if(N<=0||N>0)return y;const t=L*p;let j=zO[t];if(void 0===j&&(j=new Float32Array(t),zO[t]=j),0!==L){N.toArray(j,0);for(let N=1,t=0;N!==L;++N)t+=p,y[N].toArray(j,t)}return j}function WO(y,L){if(y.length!==L.length)return!1;for(let p=0,N=y.length;p<N;p++)if(y[p]!==L[p])return!1;return!0}function gO(y,L){for(let p=0,N=L.length;p<N;p++)y[p]=L[p]}function CO(y,L){let p=OO[L];void 0===p&&(p=new Int32Array(L),OO[L]=p);for(let N=0;N!==L;++N)p[N]=y.allocateTextureUnit();return p}function QO(y,L){const p=this.cache;p[0]!==L&&(y.uniform1f(this.addr,L),p[0]=L)}function TO(y,L){const p=this.cache;if(void 0!==L.x)p[0]===L.x&&p[1]===L.y||(y.uniform2f(this.addr,L.x,L.y),p[0]=L.x,p[1]=L.y);else{if(WO(p,L))return;y.uniform2fv(this.addr,L),gO(p,L)}}function iO(y,L){const p=this.cache;if(void 0!==L.x)p[0]===L.x&&p[1]===L.y&&p[2]===L.z||(y.uniform3f(this.addr,L.x,L.y,L.z),p[0]=L.x,p[1]=L.y,p[2]=L.z);else if(void 0!==L.r)p[0]===L.r&&p[1]===L.g&&p[2]===L.b||(y.uniform3f(this.addr,L.r,L.g,L.b),p[0]=L.r,p[1]=L.g,p[2]=L.b);else{if(WO(p,L))return;y.uniform3fv(this.addr,L),gO(p,L)}}function DO(y,L){const p=this.cache;if(void 0!==L.x)p[0]===L.x&&p[1]===L.y&&p[2]===L.z&&p[3]===L.w||(y.uniform4f(this.addr,L.x,L.y,L.z,L.w),p[0]=L.x,p[1]=L.y,p[2]=L.z,p[3]=L.w);else{if(WO(p,L))return;y.uniform4fv(this.addr,L),gO(p,L)}}function wO(y,L){const p=this.cache,N=L.elements;if(void 0===N){if(WO(p,L))return;y.uniformMatrix2fv(this.addr,!1,L),gO(p,L)}else{if(WO(p,N))return;kO.set(N),y.uniformMatrix2fv(this.addr,!1,kO),gO(p,N)}}function xO(y,L){const p=this.cache,N=L.elements;if(void 0===N){if(WO(p,L))return;y.uniformMatrix3fv(this.addr,!1,L),gO(p,L)}else{if(WO(p,N))return;mO.set(N),y.uniformMatrix3fv(this.addr,!1,mO),gO(p,N)}}function dO(y,L){const p=this.cache,N=L.elements;if(void 0===N){if(WO(p,L))return;y.uniformMatrix4fv(this.addr,!1,L),gO(p,L)}else{if(WO(p,N))return;hO.set(N),y.uniformMatrix4fv(this.addr,!1,hO),gO(p,N)}}function oO(y,L){const p=this.cache;p[0]!==L&&(y.uniform1i(this.addr,L),p[0]=L)}function UO(y,L){const p=this.cache;if(void 0!==L.x)p[0]===L.x&&p[1]===L.y||(y.uniform2i(this.addr,L.x,L.y),p[0]=L.x,p[1]=L.y);else{if(WO(p,L))return;y.uniform2iv(this.addr,L),gO(p,L)}}function IO(y,L){const p=this.cache;if(void 0!==L.x)p[0]===L.x&&p[1]===L.y&&p[2]===L.z||(y.uniform3i(this.addr,L.x,L.y,L.z),p[0]=L.x,p[1]=L.y,p[2]=L.z);else{if(WO(p,L))return;y.uniform3iv(this.addr,L),gO(p,L)}}function VO(y,L){const p=this.cache;if(void 0!==L.x)p[0]===L.x&&p[1]===L.y&&p[2]===L.z&&p[3]===L.w||(y.uniform4i(this.addr,L.x,L.y,L.z,L.w),p[0]=L.x,p[1]=L.y,p[2]=L.z,p[3]=L.w);else{if(WO(p,L))return;y.uniform4iv(this.addr,L),gO(p,L)}}function FO(y,L){const p=this.cache;p[0]!==L&&(y.uniform1ui(this.addr,L),p[0]=L)}function uO(y,L){const p=this.cache;if(void 0!==L.x)p[0]===L.x&&p[1]===L.y||(y.uniform2ui(this.addr,L.x,L.y),p[0]=L.x,p[1]=L.y);else{if(WO(p,L))return;y.uniform2uiv(this.addr,L),gO(p,L)}}function SO(y,L){const p=this.cache;if(void 0!==L.x)p[0]===L.x&&p[1]===L.y&&p[2]===L.z||(y.uniform3ui(this.addr,L.x,L.y,L.z),p[0]=L.x,p[1]=L.y,p[2]=L.z);else{if(WO(p,L))return;y.uniform3uiv(this.addr,L),gO(p,L)}}function BO(y,L){const p=this.cache;if(void 0!==L.x)p[0]===L.x&&p[1]===L.y&&p[2]===L.z&&p[3]===L.w||(y.uniform4ui(this.addr,L.x,L.y,L.z,L.w),p[0]=L.x,p[1]=L.y,p[2]=L.z,p[3]=L.w);else{if(WO(p,L))return;y.uniform4uiv(this.addr,L),gO(p,L)}}function RO(y,L,p){const N=this.cache,t=p.allocateTextureUnit();N[0]!==t&&(y.uniform1i(this.addr,t),N[0]=t),p.setTexture2D(L||pO,t)}function YO(y,L,p){const N=this.cache,t=p.allocateTextureUnit();N[0]!==t&&(y.uniform1i(this.addr,t),N[0]=t),p.setTexture3D(L||tO,t)}function EO(y,L,p){const N=this.cache,t=p.allocateTextureUnit();N[0]!==t&&(y.uniform1i(this.addr,t),N[0]=t),p.setTextureCube(L||jO,t)}function PO(y,L,p){const N=this.cache,t=p.allocateTextureUnit();N[0]!==t&&(y.uniform1i(this.addr,t),N[0]=t),p.setTexture2DArray(L||NO,t)}function lO(y,L){y.uniform1fv(this.addr,L)}function MO(y,L){const p=_O(L,this.size,2);y.uniform2fv(this.addr,p)}function fO(y,L){const p=_O(L,this.size,3);y.uniform3fv(this.addr,p)}function aO(y,L){const p=_O(L,this.size,4);y.uniform4fv(this.addr,p)}function HO(y,L){const p=_O(L,this.size,4);y.uniformMatrix2fv(this.addr,!1,p)}function XO(y,L){const p=_O(L,this.size,9);y.uniformMatrix3fv(this.addr,!1,p)}function JO(y,L){const p=_O(L,this.size,16);y.uniformMatrix4fv(this.addr,!1,p)}function rO(y,L){y.uniform1iv(this.addr,L)}function GO(y,L){y.uniform2iv(this.addr,L)}function $O(y,L){y.uniform3iv(this.addr,L)}function qO(y,L){y.uniform4iv(this.addr,L)}function AO(y,L){y.uniform1uiv(this.addr,L)}function sO(y,L){y.uniform2uiv(this.addr,L)}function cO(y,L){y.uniform3uiv(this.addr,L)}function KO(y,L){y.uniform4uiv(this.addr,L)}function bO(y,L,p){const N=this.cache,t=L.length,j=CO(p,t);WO(N,j)||(y.uniform1iv(this.addr,j),gO(N,j));for(let y=0;y!==t;++y)p.setTexture2D(L[y]||pO,j[y])}function nO(y,L,p){const N=this.cache,t=L.length,j=CO(p,t);WO(N,j)||(y.uniform1iv(this.addr,j),gO(N,j));for(let y=0;y!==t;++y)p.setTexture3D(L[y]||tO,j[y])}function vO(y,L,p){const N=this.cache,t=L.length,j=CO(p,t);WO(N,j)||(y.uniform1iv(this.addr,j),gO(N,j));for(let y=0;y!==t;++y)p.setTextureCube(L[y]||jO,j[y])}function eO(y,L,p){const N=this.cache,t=L.length,j=CO(p,t);WO(N,j)||(y.uniform1iv(this.addr,j),gO(N,j));for(let y=0;y!==t;++y)p.setTexture2DArray(L[y]||NO,j[y])}class ZO{constructor(y,L,p){this.id=y,this.addr=p,this.cache=[],this.setValue=function(y){switch(y){case 5126:return QO;case 35664:return TO;case 35665:return iO;case 35666:return DO;case 35674:return wO;case 35675:return xO;case 35676:return dO;case 5124:case 35670:return oO;case 35667:case 35671:return UO;case 35668:case 35672:return IO;case 35669:case 35673:return VO;case 5125:return FO;case 36294:return uO;case 36295:return SO;case 36296:return BO;case 35678:case 36198:case 36298:case 36306:case 35682:return RO;case 35679:case 36299:case 36307:return YO;case 35680:case 36300:case 36308:case 36293:return EO;case 36289:case 36303:case 36311:case 36292:return PO}}(L.type)}}class yh{constructor(y,L,p){this.id=y,this.addr=p,this.cache=[],this.size=L.size,this.setValue=function(y){switch(y){case 5126:return lO;case 35664:return MO;case 35665:return fO;case 35666:return aO;case 35674:return HO;case 35675:return XO;case 35676:return JO;case 5124:case 35670:return rO;case 35667:case 35671:return GO;case 35668:case 35672:return $O;case 35669:case 35673:return qO;case 5125:return AO;case 36294:return sO;case 36295:return cO;case 36296:return KO;case 35678:case 36198:case 36298:case 36306:case 35682:return bO;case 35679:case 36299:case 36307:return nO;case 35680:case 36300:case 36308:case 36293:return vO;case 36289:case 36303:case 36311:case 36292:return eO}}(L.type)}}class Lh{constructor(y){this.id=y,this.seq=[],this.map={}}setValue(y,L,p){const N=this.seq;for(let t=0,j=N.length;t!==j;++t){const j=N[t];j.setValue(y,L[j.id],p)}}}const ph=/(\w+)(\])?(\[|\.)?/g;function Nh(y,L){y.seq.push(L),y.map[L.id]=L}function th(y,L,p){const N=y.name,t=N.length;for(ph.lastIndex=0;1;){const j=ph.exec(N),z=ph.lastIndex;let O=j[1];const h="]"===j[2],m=j[3];if(h&&(O|=0),void 0===m||"["===m&&z+2===t){Nh(p,void 0===m?new ZO(O,y,L):new yh(O,y,L));break}{let y=p.map[O];void 0===y&&(y=new Lh(O),Nh(p,y)),p=y}}}class jh{constructor(y,L){this.seq=[],this.map={};const p=y.getProgramParameter(L,y.ACTIVE_UNIFORMS);for(let N=0;N<p;++N){const p=y.getActiveUniform(L,N);th(p,y.getUniformLocation(L,p.name),this)}}setValue(y,L,p,N){const t=this.map[L];void 0!==t&&t.setValue(y,p,N)}setOptional(y,L,p){const N=L[p];void 0!==N&&this.setValue(y,p,N)}static upload(y,L,p,N){for(let t=0,j=L.length;t!==j;++t){const j=L[t],z=p[j.id];!1!==z.needsUpdate&&j.setValue(y,z.value,N)}}static seqWithValue(y,L){const p=[];for(let N=0,t=y.length;N!==t;++N){const t=y[N];t.id in L&&p.push(t)}return p}}function zh(y,L,p){const N=y.createShader(L);return y.shaderSource(N,p),y.compileShader(N),N}let Oh=0;function hh(y,L,p){const N=y.getShaderParameter(L,y.COMPILE_STATUS),t=y.getShaderInfoLog(L).trim();if(N&&""===t)return"";const j=/ERROR: 0:(\d+)/.exec(t);if(j){const N=parseInt(j[1]);return p.toUpperCase()+"\n\n"+t+"\n\n"+function(y,L){const p=y.split("\n"),N=[],t=Math.max(L-6,0),j=Math.min(L+6,p.length);for(let y=t;y<j;y++){const t=y+1;N.push(`${t===L?">":" "} ${t}: ${p[y]}`)}return N.join("\n")}(y.getShaderSource(L),N)}return t}function mh(y,L){const p=function(y){switch(y){case Np:return["Linear","( value )"];case pp:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",y),["Linear","( value )"]}}(L);return"vec4 "+y+"( vec4 value ) { return LinearTo"+p[0]+p[1]+"; }"}function kh(y,L){let p;switch(L){case gy:p="Linear";break;case Cy:p="Reinhard";break;case Qy:p="OptimizedCineon";break;case Ty:p="ACESFilmic";break;case iy:p="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",L),p="Linear"}return"vec3 "+y+"( vec3 color ) { return "+p+"ToneMapping( color ); }"}function _h(y){return""!==y}function Wh(y,L){const p=L.numSpotLightShadows+L.numSpotLightMaps-L.numSpotLightShadowsWithMaps;return y.replace(/NUM_DIR_LIGHTS/g,L.numDirLights).replace(/NUM_SPOT_LIGHTS/g,L.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,L.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,p).replace(/NUM_RECT_AREA_LIGHTS/g,L.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,L.numPointLights).replace(/NUM_HEMI_LIGHTS/g,L.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,L.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,L.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,L.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,L.numPointLightShadows)}function gh(y,L){return y.replace(/NUM_CLIPPING_PLANES/g,L.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,L.numClippingPlanes-L.numClipIntersection)}const Ch=/^[ \t]*#include +<([\w\d./]+)>/gm;function Qh(y){return y.replace(Ch,ih)}const Th=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function ih(y,L){let p=dz[L];if(void 0===p){const y=Th.get(L);if(void 0===y)throw new Error("Can not resolve #include <"+L+">");p=dz[y],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',L,y)}return Qh(p)}const Dh=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function wh(y){return y.replace(Dh,xh)}function xh(y,L,p,N){let t="";for(let y=parseInt(L);y<parseInt(p);y++)t+=N.replace(/\[\s*i\s*\]/g,"[ "+y+" ]").replace(/UNROLLED_LOOP_INDEX/g,y);return t}function dh(y){let L="precision "+y.precision+" float;\nprecision "+y.precision+" int;";return"highp"===y.precision?L+="\n#define HIGH_PRECISION":"mediump"===y.precision?L+="\n#define MEDIUM_PRECISION":"lowp"===y.precision&&(L+="\n#define LOW_PRECISION"),L}function oh(y,L,p,N){const t=y.getContext(),j=p.defines;let z=p.vertexShader,O=p.fragmentShader;const h=function(y){let L="SHADOWMAP_TYPE_BASIC";return y.shadowMapType===F?L="SHADOWMAP_TYPE_PCF":y.shadowMapType===u?L="SHADOWMAP_TYPE_PCF_SOFT":y.shadowMapType===S&&(L="SHADOWMAP_TYPE_VSM"),L}(p),m=function(y){let L="ENVMAP_TYPE_CUBE";if(y.envMap)switch(y.envMapMode){case wy:case xy:L="ENVMAP_TYPE_CUBE";break;case Uy:L="ENVMAP_TYPE_CUBE_UV"}return L}(p),k=function(y){let L="ENVMAP_MODE_REFLECTION";return y.envMap&&y.envMapMode===xy&&(L="ENVMAP_MODE_REFRACTION"),L}(p),_=function(y){let L="ENVMAP_BLENDING_NONE";if(y.envMap)switch(y.combine){case my:L="ENVMAP_BLENDING_MULTIPLY";break;case ky:L="ENVMAP_BLENDING_MIX";break;case _y:L="ENVMAP_BLENDING_ADD"}return L}(p),W=function(y){const L=y.envMapCubeUVHeight;if(null===L)return null;const p=Math.log2(L)-2,N=1/L;return{texelWidth:1/(3*Math.max(Math.pow(2,p),7*16)),texelHeight:N,maxMip:p}}(p),g=p.isWebGL2?"":function(y){return[y.extensionDerivatives||y.envMapCubeUVHeight||y.bumpMap||y.normalMapTangentSpace||y.clearcoatNormalMap||y.flatShading||"physical"===y.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(y.extensionFragDepth||y.logarithmicDepthBuffer)&&y.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",y.extensionDrawBuffers&&y.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(y.extensionShaderTextureLOD||y.envMap||y.transmission)&&y.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(_h).join("\n")}(p),C=function(y){const L=[];for(const p in y){const N=y[p];!1!==N&&L.push("#define "+p+" "+N)}return L.join("\n")}(j),Q=t.createProgram();let T,i,D=p.glslVersion?"#version "+p.glslVersion+"\n":"";p.isRawShaderMaterial?(T=["#define SHADER_TYPE "+p.shaderType,"#define SHADER_NAME "+p.shaderName,C].filter(_h).join("\n"),T.length>0&&(T+="\n"),i=[g,"#define SHADER_TYPE "+p.shaderType,"#define SHADER_NAME "+p.shaderName,C].filter(_h).join("\n"),i.length>0&&(i+="\n")):(T=[dh(p),"#define SHADER_TYPE "+p.shaderType,"#define SHADER_NAME "+p.shaderName,C,p.instancing?"#define USE_INSTANCING":"",p.instancingColor?"#define USE_INSTANCING_COLOR":"",p.useFog&&p.fog?"#define USE_FOG":"",p.useFog&&p.fogExp2?"#define FOG_EXP2":"",p.map?"#define USE_MAP":"",p.envMap?"#define USE_ENVMAP":"",p.envMap?"#define "+k:"",p.lightMap?"#define USE_LIGHTMAP":"",p.aoMap?"#define USE_AOMAP":"",p.bumpMap?"#define USE_BUMPMAP":"",p.normalMap?"#define USE_NORMALMAP":"",p.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",p.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",p.displacementMap?"#define USE_DISPLACEMENTMAP":"",p.emissiveMap?"#define USE_EMISSIVEMAP":"",p.anisotropyMap?"#define USE_ANISOTROPYMAP":"",p.clearcoatMap?"#define USE_CLEARCOATMAP":"",p.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",p.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",p.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",p.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",p.specularMap?"#define USE_SPECULARMAP":"",p.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",p.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",p.roughnessMap?"#define USE_ROUGHNESSMAP":"",p.metalnessMap?"#define USE_METALNESSMAP":"",p.alphaMap?"#define USE_ALPHAMAP":"",p.alphaHash?"#define USE_ALPHAHASH":"",p.transmission?"#define USE_TRANSMISSION":"",p.transmissionMap?"#define USE_TRANSMISSIONMAP":"",p.thicknessMap?"#define USE_THICKNESSMAP":"",p.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",p.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",p.mapUv?"#define MAP_UV "+p.mapUv:"",p.alphaMapUv?"#define ALPHAMAP_UV "+p.alphaMapUv:"",p.lightMapUv?"#define LIGHTMAP_UV "+p.lightMapUv:"",p.aoMapUv?"#define AOMAP_UV "+p.aoMapUv:"",p.emissiveMapUv?"#define EMISSIVEMAP_UV "+p.emissiveMapUv:"",p.bumpMapUv?"#define BUMPMAP_UV "+p.bumpMapUv:"",p.normalMapUv?"#define NORMALMAP_UV "+p.normalMapUv:"",p.displacementMapUv?"#define DISPLACEMENTMAP_UV "+p.displacementMapUv:"",p.metalnessMapUv?"#define METALNESSMAP_UV "+p.metalnessMapUv:"",p.roughnessMapUv?"#define ROUGHNESSMAP_UV "+p.roughnessMapUv:"",p.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+p.anisotropyMapUv:"",p.clearcoatMapUv?"#define CLEARCOATMAP_UV "+p.clearcoatMapUv:"",p.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+p.clearcoatNormalMapUv:"",p.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+p.clearcoatRoughnessMapUv:"",p.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+p.iridescenceMapUv:"",p.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+p.iridescenceThicknessMapUv:"",p.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+p.sheenColorMapUv:"",p.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+p.sheenRoughnessMapUv:"",p.specularMapUv?"#define SPECULARMAP_UV "+p.specularMapUv:"",p.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+p.specularColorMapUv:"",p.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+p.specularIntensityMapUv:"",p.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+p.transmissionMapUv:"",p.thicknessMapUv?"#define THICKNESSMAP_UV "+p.thicknessMapUv:"",p.vertexTangents&&!1===p.flatShading?"#define USE_TANGENT":"",p.vertexColors?"#define USE_COLOR":"",p.vertexAlphas?"#define USE_COLOR_ALPHA":"",p.vertexUv1s?"#define USE_UV1":"",p.vertexUv2s?"#define USE_UV2":"",p.vertexUv3s?"#define USE_UV3":"",p.pointsUvs?"#define USE_POINTS_UV":"",p.flatShading?"#define FLAT_SHADED":"",p.skinning?"#define USE_SKINNING":"",p.morphTargets?"#define USE_MORPHTARGETS":"",p.morphNormals&&!1===p.flatShading?"#define USE_MORPHNORMALS":"",p.morphColors&&p.isWebGL2?"#define USE_MORPHCOLORS":"",p.morphTargetsCount>0&&p.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",p.morphTargetsCount>0&&p.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+p.morphTextureStride:"",p.morphTargetsCount>0&&p.isWebGL2?"#define MORPHTARGETS_COUNT "+p.morphTargetsCount:"",p.doubleSided?"#define DOUBLE_SIDED":"",p.flipSided?"#define FLIP_SIDED":"",p.shadowMapEnabled?"#define USE_SHADOWMAP":"",p.shadowMapEnabled?"#define "+h:"",p.sizeAttenuation?"#define USE_SIZEATTENUATION":"",p.useLegacyLights?"#define LEGACY_LIGHTS":"",p.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",p.logarithmicDepthBuffer&&p.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(_h).join("\n"),i=[g,dh(p),"#define SHADER_TYPE "+p.shaderType,"#define SHADER_NAME "+p.shaderName,C,p.useFog&&p.fog?"#define USE_FOG":"",p.useFog&&p.fogExp2?"#define FOG_EXP2":"",p.map?"#define USE_MAP":"",p.matcap?"#define USE_MATCAP":"",p.envMap?"#define USE_ENVMAP":"",p.envMap?"#define "+m:"",p.envMap?"#define "+k:"",p.envMap?"#define "+_:"",W?"#define CUBEUV_TEXEL_WIDTH "+W.texelWidth:"",W?"#define CUBEUV_TEXEL_HEIGHT "+W.texelHeight:"",W?"#define CUBEUV_MAX_MIP "+W.maxMip+".0":"",p.lightMap?"#define USE_LIGHTMAP":"",p.aoMap?"#define USE_AOMAP":"",p.bumpMap?"#define USE_BUMPMAP":"",p.normalMap?"#define USE_NORMALMAP":"",p.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",p.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",p.emissiveMap?"#define USE_EMISSIVEMAP":"",p.anisotropy?"#define USE_ANISOTROPY":"",p.anisotropyMap?"#define USE_ANISOTROPYMAP":"",p.clearcoat?"#define USE_CLEARCOAT":"",p.clearcoatMap?"#define USE_CLEARCOATMAP":"",p.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",p.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",p.iridescence?"#define USE_IRIDESCENCE":"",p.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",p.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",p.specularMap?"#define USE_SPECULARMAP":"",p.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",p.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",p.roughnessMap?"#define USE_ROUGHNESSMAP":"",p.metalnessMap?"#define USE_METALNESSMAP":"",p.alphaMap?"#define USE_ALPHAMAP":"",p.alphaTest?"#define USE_ALPHATEST":"",p.alphaHash?"#define USE_ALPHAHASH":"",p.sheen?"#define USE_SHEEN":"",p.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",p.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",p.transmission?"#define USE_TRANSMISSION":"",p.transmissionMap?"#define USE_TRANSMISSIONMAP":"",p.thicknessMap?"#define USE_THICKNESSMAP":"",p.vertexTangents&&!1===p.flatShading?"#define USE_TANGENT":"",p.vertexColors||p.instancingColor?"#define USE_COLOR":"",p.vertexAlphas?"#define USE_COLOR_ALPHA":"",p.vertexUv1s?"#define USE_UV1":"",p.vertexUv2s?"#define USE_UV2":"",p.vertexUv3s?"#define USE_UV3":"",p.pointsUvs?"#define USE_POINTS_UV":"",p.gradientMap?"#define USE_GRADIENTMAP":"",p.flatShading?"#define FLAT_SHADED":"",p.doubleSided?"#define DOUBLE_SIDED":"",p.flipSided?"#define FLIP_SIDED":"",p.shadowMapEnabled?"#define USE_SHADOWMAP":"",p.shadowMapEnabled?"#define "+h:"",p.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",p.useLegacyLights?"#define LEGACY_LIGHTS":"",p.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",p.logarithmicDepthBuffer&&p.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",p.toneMapping!==Wy?"#define TONE_MAPPING":"",p.toneMapping!==Wy?dz["tonemapping_pars_fragment"]:"",p.toneMapping!==Wy?kh("toneMapping",p.toneMapping):"",p.dithering?"#define DITHERING":"",p.opaque?"#define OPAQUE":"",dz["colorspace_pars_fragment"],mh("linearToOutputTexel",p.outputColorSpace),p.useDepthPacking?"#define DEPTH_PACKING "+p.depthPacking:"","\n"].filter(_h).join("\n")),z=Qh(z),z=Wh(z,p),z=gh(z,p),O=Qh(O),O=Wh(O,p),O=gh(O,p),z=wh(z),O=wh(O),p.isWebGL2&&!0!==p.isRawShaderMaterial&&(D="#version 300 es\n",T=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+T,i=["#define varying in",p.glslVersion===Xp?"":"layout(location = 0) out highp vec4 pc_fragColor;",p.glslVersion===Xp?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+i);const w=D+T+z,x=D+i+O,d=zh(t,t.VERTEX_SHADER,w),o=zh(t,t.FRAGMENT_SHADER,x);if(t.attachShader(Q,d),t.attachShader(Q,o),void 0!==p.index0AttributeName?t.bindAttribLocation(Q,0,p.index0AttributeName):!0===p.morphTargets&&t.bindAttribLocation(Q,0,"position"),t.linkProgram(Q),y.debug.checkShaderErrors){const L=t.getProgramInfoLog(Q).trim(),p=t.getShaderInfoLog(d).trim(),N=t.getShaderInfoLog(o).trim();let j=!0,z=!0;if(!1===t.getProgramParameter(Q,t.LINK_STATUS))if(j=!1,"function"==typeof y.debug.onShaderError)y.debug.onShaderError(t,Q,d,o);else{const y=hh(t,d,"vertex"),p=hh(t,o,"fragment");console.error("THREE.WebGLProgram: Shader Error "+t.getError()+" - "+"VALIDATE_STATUS "+t.getProgramParameter(Q,t.VALIDATE_STATUS)+"\n\n"+"Program Info Log: "+L+"\n"+y+"\n"+p)}else""!==L?console.warn("THREE.WebGLProgram: Program Info Log:",L):""!==p&&""!==N||(z=!1);z&&(this.diagnostics={runnable:j,programLog:L,vertexShader:{log:p,prefix:T},fragmentShader:{log:N,prefix:i}})}let U,I;return t.deleteShader(d),t.deleteShader(o),this.getUniforms=function(){return void 0===U&&(U=new jh(t,Q)),U},this.getAttributes=function(){return void 0===I&&(I=function(y,L){const p={},N=y.getProgramParameter(L,y.ACTIVE_ATTRIBUTES);for(let t=0;t<N;t++){const N=y.getActiveAttrib(L,t),j=N.name;let z=1;N.type===y.FLOAT_MAT2&&(z=2),N.type===y.FLOAT_MAT3&&(z=3),N.type===y.FLOAT_MAT4&&(z=4),p[j]={type:N.type,location:y.getAttribLocation(L,j),locationSize:z}}return p}(t,Q)),I},this.destroy=function(){N.releaseStatesOfProgram(this),t.deleteProgram(Q),this.program=void 0},this.type=p.shaderType,this.name=p.shaderName,this.id=Oh++,this.cacheKey=L,this.usedTimes=1,this.program=Q,this.vertexShader=d,this.fragmentShader=o,this}let Uh=0;class Ih{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(y){const L=y.vertexShader,p=y.fragmentShader,N=this._getShaderStage(L),t=this._getShaderStage(p),j=this._getShaderCacheForMaterial(y);return!1===j.has(N)&&(j.add(N),N.usedTimes++),!1===j.has(t)&&(j.add(t),t.usedTimes++),this}remove(y){const L=this.materialCache.get(y);for(const y of L)y.usedTimes--,0===y.usedTimes&&this.shaderCache.delete(y.code);return this.materialCache.delete(y),this}getVertexShaderID(y){return this._getShaderStage(y.vertexShader).id}getFragmentShaderID(y){return this._getShaderStage(y.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(y){const L=this.materialCache;let p=L.get(y);return void 0===p&&(p=new Set,L.set(y,p)),p}_getShaderStage(y){const L=this.shaderCache;let p=L.get(y);return void 0===p&&(p=new Vh(y),L.set(y,p)),p}}class Vh{constructor(y){this.id=Uh++,this.code=y,this.usedTimes=0}}function Fh(y,L,p,N,t,j,z){const O=new Ut,h=new Ih,m=[],k=t.isWebGL2,_=t.logarithmicDepthBuffer,W=t.vertexTextures;let g=t.precision;const C={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function Q(y){return 0===y?"uv":`uv${y}`}return{getParameters:function(j,O,m,T,i){const D=T.fog,w=i.geometry,x=j.isMeshStandardMaterial?T.environment:null,d=(j.isMeshStandardMaterial?p:L).get(j.envMap||x),o=d&&d.mapping===Uy?d.image.height:null,U=C[j.type];null!==j.precision&&(g=t.getMaxPrecision(j.precision),g!==j.precision&&console.warn("THREE.WebGLProgram.getParameters:",j.precision,"not supported, using",g,"instead."));const I=w.morphAttributes.position||w.morphAttributes.normal||w.morphAttributes.color,V=void 0!==I?I.length:0;let F,u,S,B,E=0;if(void 0!==w.morphAttributes.position&&(E=1),void 0!==w.morphAttributes.normal&&(E=2),void 0!==w.morphAttributes.color&&(E=3),U){const y=Uz[U];F=y.vertexShader,u=y.fragmentShader}else F=j.vertexShader,u=j.fragmentShader,h.update(j),S=h.getVertexShaderID(j),B=h.getFragmentShaderID(j);const P=y.getRenderTarget(),M=!0===i.isInstancedMesh,f=!!j.map,a=!!j.matcap,H=!!d,X=!!j.aoMap,J=!!j.lightMap,r=!!j.bumpMap,G=!!j.normalMap,$=!!j.displacementMap,q=!!j.emissiveMap,A=!!j.metalnessMap,s=!!j.roughnessMap,c=j.anisotropy>0,K=j.clearcoat>0,b=j.iridescence>0,n=j.sheen>0,v=j.transmission>0,e=c&&!!j.anisotropyMap,Z=K&&!!j.clearcoatMap,yy=K&&!!j.clearcoatNormalMap,Ly=K&&!!j.clearcoatRoughnessMap,py=b&&!!j.iridescenceMap,Ny=b&&!!j.iridescenceThicknessMap,ty=n&&!!j.sheenColorMap,jy=n&&!!j.sheenRoughnessMap,zy=!!j.specularMap,Oy=!!j.specularColorMap,hy=!!j.specularIntensityMap,my=v&&!!j.transmissionMap,ky=v&&!!j.thicknessMap,_y=!!j.gradientMap,gy=!!j.alphaMap,Cy=j.alphaTest>0,Qy=!!j.alphaHash,Ty=!!j.extensions,iy=!!w.attributes.uv1,Dy=!!w.attributes.uv2,wy=!!w.attributes.uv3;let xy=Wy;return j.toneMapped&&(null!==P&&!0!==P.isXRRenderTarget||(xy=y.toneMapping)),{isWebGL2:k,shaderID:U,shaderType:j.type,shaderName:j.name,vertexShader:F,fragmentShader:u,defines:j.defines,customVertexShaderID:S,customFragmentShaderID:B,isRawShaderMaterial:!0===j.isRawShaderMaterial,glslVersion:j.glslVersion,precision:g,instancing:M,instancingColor:M&&null!==i.instanceColor,supportsVertexTextures:W,outputColorSpace:null===P?y.outputColorSpace:!0===P.isXRRenderTarget?P.texture.colorSpace:Np,map:f,matcap:a,envMap:H,envMapMode:H&&d.mapping,envMapCubeUVHeight:o,aoMap:X,lightMap:J,bumpMap:r,normalMap:G,displacementMap:W&&$,emissiveMap:q,normalMapObjectSpace:G&&j.normalMapType===yp,normalMapTangentSpace:G&&j.normalMapType===ZL,metalnessMap:A,roughnessMap:s,anisotropy:c,anisotropyMap:e,clearcoat:K,clearcoatMap:Z,clearcoatNormalMap:yy,clearcoatRoughnessMap:Ly,iridescence:b,iridescenceMap:py,iridescenceThicknessMap:Ny,sheen:n,sheenColorMap:ty,sheenRoughnessMap:jy,specularMap:zy,specularColorMap:Oy,specularIntensityMap:hy,transmission:v,transmissionMap:my,thicknessMap:ky,gradientMap:_y,opaque:!1===j.transparent&&j.blending===l,alphaMap:gy,alphaTest:Cy,alphaHash:Qy,combine:j.combine,mapUv:f&&Q(j.map.channel),aoMapUv:X&&Q(j.aoMap.channel),lightMapUv:J&&Q(j.lightMap.channel),bumpMapUv:r&&Q(j.bumpMap.channel),normalMapUv:G&&Q(j.normalMap.channel),displacementMapUv:$&&Q(j.displacementMap.channel),emissiveMapUv:q&&Q(j.emissiveMap.channel),metalnessMapUv:A&&Q(j.metalnessMap.channel),roughnessMapUv:s&&Q(j.roughnessMap.channel),anisotropyMapUv:e&&Q(j.anisotropyMap.channel),clearcoatMapUv:Z&&Q(j.clearcoatMap.channel),clearcoatNormalMapUv:yy&&Q(j.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ly&&Q(j.clearcoatRoughnessMap.channel),iridescenceMapUv:py&&Q(j.iridescenceMap.channel),iridescenceThicknessMapUv:Ny&&Q(j.iridescenceThicknessMap.channel),sheenColorMapUv:ty&&Q(j.sheenColorMap.channel),sheenRoughnessMapUv:jy&&Q(j.sheenRoughnessMap.channel),specularMapUv:zy&&Q(j.specularMap.channel),specularColorMapUv:Oy&&Q(j.specularColorMap.channel),specularIntensityMapUv:hy&&Q(j.specularIntensityMap.channel),transmissionMapUv:my&&Q(j.transmissionMap.channel),thicknessMapUv:ky&&Q(j.thicknessMap.channel),alphaMapUv:gy&&Q(j.alphaMap.channel),vertexTangents:!!w.attributes.tangent&&(G||c),vertexColors:j.vertexColors,vertexAlphas:!0===j.vertexColors&&!!w.attributes.color&&4===w.attributes.color.itemSize,vertexUv1s:iy,vertexUv2s:Dy,vertexUv3s:wy,pointsUvs:!0===i.isPoints&&!!w.attributes.uv&&(f||gy),fog:!!D,useFog:!0===j.fog,fogExp2:D&&D.isFogExp2,flatShading:!0===j.flatShading,sizeAttenuation:!0===j.sizeAttenuation,logarithmicDepthBuffer:_,skinning:!0===i.isSkinnedMesh,morphTargets:void 0!==w.morphAttributes.position,morphNormals:void 0!==w.morphAttributes.normal,morphColors:void 0!==w.morphAttributes.color,morphTargetsCount:V,morphTextureStride:E,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numClippingPlanes:z.numPlanes,numClipIntersection:z.numIntersection,dithering:j.dithering,shadowMapEnabled:y.shadowMap.enabled&&m.length>0,shadowMapType:y.shadowMap.type,toneMapping:xy,useLegacyLights:y._useLegacyLights,premultipliedAlpha:j.premultipliedAlpha,doubleSided:j.side===Y,flipSided:j.side===R,useDepthPacking:j.depthPacking>=0,depthPacking:j.depthPacking||0,index0AttributeName:j.index0AttributeName,extensionDerivatives:Ty&&!0===j.extensions.derivatives,extensionFragDepth:Ty&&!0===j.extensions.fragDepth,extensionDrawBuffers:Ty&&!0===j.extensions.drawBuffers,extensionShaderTextureLOD:Ty&&!0===j.extensions.shaderTextureLOD,rendererExtensionFragDepth:k||N.has("EXT_frag_depth"),rendererExtensionDrawBuffers:k||N.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:k||N.has("EXT_shader_texture_lod"),customProgramCacheKey:j.customProgramCacheKey()}},getProgramCacheKey:function(L){const p=[];if(L.shaderID?p.push(L.shaderID):(p.push(L.customVertexShaderID),p.push(L.customFragmentShaderID)),void 0!==L.defines)for(const y in L.defines)p.push(y),p.push(L.defines[y]);return!1===L.isRawShaderMaterial&&(function(y,L){y.push(L.precision),y.push(L.outputColorSpace),y.push(L.envMapMode),y.push(L.envMapCubeUVHeight),y.push(L.mapUv),y.push(L.alphaMapUv),y.push(L.lightMapUv),y.push(L.aoMapUv),y.push(L.bumpMapUv),y.push(L.normalMapUv),y.push(L.displacementMapUv),y.push(L.emissiveMapUv),y.push(L.metalnessMapUv),y.push(L.roughnessMapUv),y.push(L.anisotropyMapUv),y.push(L.clearcoatMapUv),y.push(L.clearcoatNormalMapUv),y.push(L.clearcoatRoughnessMapUv),y.push(L.iridescenceMapUv),y.push(L.iridescenceThicknessMapUv),y.push(L.sheenColorMapUv),y.push(L.sheenRoughnessMapUv),y.push(L.specularMapUv),y.push(L.specularColorMapUv),y.push(L.specularIntensityMapUv),y.push(L.transmissionMapUv),y.push(L.thicknessMapUv),y.push(L.combine),y.push(L.fogExp2),y.push(L.sizeAttenuation),y.push(L.morphTargetsCount),y.push(L.morphAttributeCount),y.push(L.numDirLights),y.push(L.numPointLights),y.push(L.numSpotLights),y.push(L.numSpotLightMaps),y.push(L.numHemiLights),y.push(L.numRectAreaLights),y.push(L.numDirLightShadows),y.push(L.numPointLightShadows),y.push(L.numSpotLightShadows),y.push(L.numSpotLightShadowsWithMaps),y.push(L.shadowMapType),y.push(L.toneMapping),y.push(L.numClippingPlanes),y.push(L.numClipIntersection),y.push(L.depthPacking)}(p,L),function(y,L){O.disableAll(),L.isWebGL2&&O.enable(0),L.supportsVertexTextures&&O.enable(1),L.instancing&&O.enable(2),L.instancingColor&&O.enable(3),L.matcap&&O.enable(4),L.envMap&&O.enable(5),L.normalMapObjectSpace&&O.enable(6),L.normalMapTangentSpace&&O.enable(7),L.clearcoat&&O.enable(8),L.iridescence&&O.enable(9),L.alphaTest&&O.enable(10),L.vertexColors&&O.enable(11),L.vertexAlphas&&O.enable(12),L.vertexUv1s&&O.enable(13),L.vertexUv2s&&O.enable(14),L.vertexUv3s&&O.enable(15),L.vertexTangents&&O.enable(16),L.anisotropy&&O.enable(17),y.push(O.mask),O.disableAll(),L.fog&&O.enable(0),L.useFog&&O.enable(1),L.flatShading&&O.enable(2),L.logarithmicDepthBuffer&&O.enable(3),L.skinning&&O.enable(4),L.morphTargets&&O.enable(5),L.morphNormals&&O.enable(6),L.morphColors&&O.enable(7),L.premultipliedAlpha&&O.enable(8),L.shadowMapEnabled&&O.enable(9),L.useLegacyLights&&O.enable(10),L.doubleSided&&O.enable(11),L.flipSided&&O.enable(12),L.useDepthPacking&&O.enable(13),L.dithering&&O.enable(14),L.transmission&&O.enable(15),L.sheen&&O.enable(16),L.opaque&&O.enable(17),L.pointsUvs&&O.enable(18),y.push(O.mask)}(p,L),p.push(y.outputColorSpace)),p.push(L.customProgramCacheKey),p.join()},getUniforms:function(y){const L=C[y.type];let p;if(L){const y=Uz[L];p=yz.clone(y.uniforms)}else p=y.uniforms;return p},acquireProgram:function(L,p){let N;for(let y=0,L=m.length;y<L;y++){const L=m[y];if(L.cacheKey===p){N=L,++N.usedTimes;break}}return void 0===N&&(N=new oh(y,p,L,j),m.push(N)),N},releaseProgram:function(y){if(0==--y.usedTimes){const L=m.indexOf(y);m[L]=m[m.length-1],m.pop(),y.destroy()}},releaseShaderCache:function(y){h.remove(y)},programs:m,dispose:function(){h.dispose()}}}function uh(){let y=new WeakMap;return{get:function(L){let p=y.get(L);return void 0===p&&(p={},y.set(L,p)),p},remove:function(L){y.delete(L)},update:function(L,p,N){y.get(L)[p]=N},dispose:function(){y=new WeakMap}}}function Sh(y,L){return y.groupOrder!==L.groupOrder?y.groupOrder-L.groupOrder:y.renderOrder!==L.renderOrder?y.renderOrder-L.renderOrder:y.material.id!==L.material.id?y.material.id-L.material.id:y.z!==L.z?y.z-L.z:y.id-L.id}function Bh(y,L){return y.groupOrder!==L.groupOrder?y.groupOrder-L.groupOrder:y.renderOrder!==L.renderOrder?y.renderOrder-L.renderOrder:y.z!==L.z?L.z-y.z:y.id-L.id}function Rh(){const y=[];let L=0;const p=[],N=[],t=[];function j(p,N,t,j,z,O){let h=y[L];return void 0===h?(h={id:p.id,object:p,geometry:N,material:t,groupOrder:j,renderOrder:p.renderOrder,z,group:O},y[L]=h):(h.id=p.id,h.object=p,h.geometry=N,h.material=t,h.groupOrder=j,h.renderOrder=p.renderOrder,h.z=z,h.group=O),L++,h}return{opaque:p,transmissive:N,transparent:t,init:function(){L=0,p.length=0,N.length=0,t.length=0},push:function(y,L,z,O,h,m){const k=j(y,L,z,O,h,m);z.transmission>0?N.push(k):!0===z.transparent?t.push(k):p.push(k)},unshift:function(y,L,z,O,h,m){const k=j(y,L,z,O,h,m);z.transmission>0?N.unshift(k):!0===z.transparent?t.unshift(k):p.unshift(k)},finish:function(){for(let p=L,N=y.length;p<N;p++){const L=y[p];if(null===L.id)break;L.id=null,L.object=null,L.geometry=null,L.material=null,L.group=null}},sort:function(y,L){p.length>1&&p.sort(y||Sh),N.length>1&&N.sort(L||Bh),t.length>1&&t.sort(L||Bh)}}}function Yh(){let y=new WeakMap;return{get:function(L,p){const N=y.get(L);let t;return void 0===N?(t=new Rh,y.set(L,[t])):p>=N.length?(t=new Rh,N.push(t)):t=N[p],t},dispose:function(){y=new WeakMap}}}function Eh(){const y={};return{get:function(L){if(void 0!==y[L.id])return y[L.id];let p;switch(L.type){case"DirectionalLight":p={direction:new fN,color:new pj};break;case"SpotLight":p={position:new fN,direction:new fN,color:new pj,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":p={position:new fN,color:new pj,distance:0,decay:0};break;case"HemisphereLight":p={direction:new fN,skyColor:new pj,groundColor:new pj};break;case"RectAreaLight":p={color:new pj,position:new fN,halfWidth:new fN,halfHeight:new fN}}return y[L.id]=p,p}}}let Ph=0;function lh(y,L){return(L.castShadow?2:0)-(y.castShadow?2:0)+(L.map?1:0)-(y.map?1:0)}function Mh(y,L){const p=new Eh,N=function(){const y={};return{get:function(L){if(void 0!==y[L.id])return y[L.id];let p;switch(L.type){case"DirectionalLight":case"SpotLight":p={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tN};break;case"PointLight":p={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tN,shadowCameraNear:1,shadowCameraFar:1e3}}return y[L.id]=p,p}}}(),t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let y=0;y<9;y++)t.probe.push(new fN);const j=new fN,z=new Wt,O=new Wt;return{setup:function(j,z){let O=0,h=0,m=0;for(let y=0;y<9;y++)t.probe[y].set(0,0,0);let k=0,_=0,W=0,g=0,C=0,Q=0,T=0,i=0,D=0,w=0;j.sort(lh);const x=!0===z?Math.PI:1;for(let y=0,L=j.length;y<L;y++){const L=j[y],z=L.color,d=L.intensity,o=L.distance,U=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)O+=z.r*d*x,h+=z.g*d*x,m+=z.b*d*x;else if(L.isLightProbe)for(let y=0;y<9;y++)t.probe[y].addScaledVector(L.sh.coefficients[y],d);else if(L.isDirectionalLight){const y=p.get(L);if(y.color.copy(L.color).multiplyScalar(L.intensity*x),L.castShadow){const y=L.shadow,p=N.get(L);p.shadowBias=y.bias,p.shadowNormalBias=y.normalBias,p.shadowRadius=y.radius,p.shadowMapSize=y.mapSize,t.directionalShadow[k]=p,t.directionalShadowMap[k]=U,t.directionalShadowMatrix[k]=L.shadow.matrix,Q++}t.directional[k]=y,k++}else if(L.isSpotLight){const y=p.get(L);y.position.setFromMatrixPosition(L.matrixWorld),y.color.copy(z).multiplyScalar(d*x),y.distance=o,y.coneCos=Math.cos(L.angle),y.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),y.decay=L.decay,t.spot[W]=y;const j=L.shadow;if(L.map&&(t.spotLightMap[D]=L.map,D++,j.updateMatrices(L),L.castShadow&&w++),t.spotLightMatrix[W]=j.matrix,L.castShadow){const y=N.get(L);y.shadowBias=j.bias,y.shadowNormalBias=j.normalBias,y.shadowRadius=j.radius,y.shadowMapSize=j.mapSize,t.spotShadow[W]=y,t.spotShadowMap[W]=U,i++}W++}else if(L.isRectAreaLight){const y=p.get(L);y.color.copy(z).multiplyScalar(d),y.halfWidth.set(.5*L.width,0,0),y.halfHeight.set(0,.5*L.height,0),t.rectArea[g]=y,g++}else if(L.isPointLight){const y=p.get(L);if(y.color.copy(L.color).multiplyScalar(L.intensity*x),y.distance=L.distance,y.decay=L.decay,L.castShadow){const y=L.shadow,p=N.get(L);p.shadowBias=y.bias,p.shadowNormalBias=y.normalBias,p.shadowRadius=y.radius,p.shadowMapSize=y.mapSize,p.shadowCameraNear=y.camera.near,p.shadowCameraFar=y.camera.far,t.pointShadow[_]=p,t.pointShadowMap[_]=U,t.pointShadowMatrix[_]=L.shadow.matrix,T++}t.point[_]=y,_++}else if(L.isHemisphereLight){const y=p.get(L);y.skyColor.copy(L.color).multiplyScalar(d*x),y.groundColor.copy(L.groundColor).multiplyScalar(d*x),t.hemi[C]=y,C++}}g>0&&(L.isWebGL2||!0===y.has("OES_texture_float_linear")?(t.rectAreaLTC1=oz.LTC_FLOAT_1,t.rectAreaLTC2=oz.LTC_FLOAT_2):!0===y.has("OES_texture_half_float_linear")?(t.rectAreaLTC1=oz.LTC_HALF_1,t.rectAreaLTC2=oz.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),t.ambient[0]=O,t.ambient[1]=h,t.ambient[2]=m;const d=t.hash;d.directionalLength===k&&d.pointLength===_&&d.spotLength===W&&d.rectAreaLength===g&&d.hemiLength===C&&d.numDirectionalShadows===Q&&d.numPointShadows===T&&d.numSpotShadows===i&&d.numSpotMaps===D||(t.directional.length=k,t.spot.length=W,t.rectArea.length=g,t.point.length=_,t.hemi.length=C,t.directionalShadow.length=Q,t.directionalShadowMap.length=Q,t.pointShadow.length=T,t.pointShadowMap.length=T,t.spotShadow.length=i,t.spotShadowMap.length=i,t.directionalShadowMatrix.length=Q,t.pointShadowMatrix.length=T,t.spotLightMatrix.length=i+D-w,t.spotLightMap.length=D,t.numSpotLightShadowsWithMaps=w,d.directionalLength=k,d.pointLength=_,d.spotLength=W,d.rectAreaLength=g,d.hemiLength=C,d.numDirectionalShadows=Q,d.numPointShadows=T,d.numSpotShadows=i,d.numSpotMaps=D,t.version=Ph++)},setupView:function(y,L){let p=0,N=0,h=0,m=0,k=0;const _=L.matrixWorldInverse;for(let L=0,W=y.length;L<W;L++){const W=y[L];if(W.isDirectionalLight){const y=t.directional[p];y.direction.setFromMatrixPosition(W.matrixWorld),j.setFromMatrixPosition(W.target.matrixWorld),y.direction.sub(j),y.direction.transformDirection(_),p++}else if(W.isSpotLight){const y=t.spot[h];y.position.setFromMatrixPosition(W.matrixWorld),y.position.applyMatrix4(_),y.direction.setFromMatrixPosition(W.matrixWorld),j.setFromMatrixPosition(W.target.matrixWorld),y.direction.sub(j),y.direction.transformDirection(_),h++}else if(W.isRectAreaLight){const y=t.rectArea[m];y.position.setFromMatrixPosition(W.matrixWorld),y.position.applyMatrix4(_),O.identity(),z.copy(W.matrixWorld),z.premultiply(_),O.extractRotation(z),y.halfWidth.set(.5*W.width,0,0),y.halfHeight.set(0,.5*W.height,0),y.halfWidth.applyMatrix4(O),y.halfHeight.applyMatrix4(O),m++}else if(W.isPointLight){const y=t.point[N];y.position.setFromMatrixPosition(W.matrixWorld),y.position.applyMatrix4(_),N++}else if(W.isHemisphereLight){const y=t.hemi[k];y.direction.setFromMatrixPosition(W.matrixWorld),y.direction.transformDirection(_),k++}}},state:t}}function fh(y,L){const p=new Mh(y,L),N=[],t=[];return{init:function(){N.length=0,t.length=0},state:{lightsArray:N,shadowsArray:t,lights:p},setupLights:function(y){p.setup(N,y)},setupLightsView:function(y){p.setupView(N,y)},pushLight:function(y){N.push(y)},pushShadow:function(y){t.push(y)}}}function ah(y,L){let p=new WeakMap;return{get:function(N,t=0){const j=p.get(N);let z;return void 0===j?(z=new fh(y,L),p.set(N,[z])):t>=j.length?(z=new fh(y,L),j.push(z)):z=j[t],z},dispose:function(){p=new WeakMap}}}class Hh extends vt{constructor(y){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=vL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(y)}copy(y){return super.copy(y),this.depthPacking=y.depthPacking,this.map=y.map,this.alphaMap=y.alphaMap,this.displacementMap=y.displacementMap,this.displacementScale=y.displacementScale,this.displacementBias=y.displacementBias,this.wireframe=y.wireframe,this.wireframeLinewidth=y.wireframeLinewidth,this}}class Xh extends vt{constructor(y){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(y)}copy(y){return super.copy(y),this.map=y.map,this.alphaMap=y.alphaMap,this.displacementMap=y.displacementMap,this.displacementScale=y.displacementScale,this.displacementBias=y.displacementBias,this}}const Jh="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",rh="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Gh(y,L,p){let N=new iz;const t=new tN,j=new tN,z=new uN,O=new Hh({depthPacking:eL}),h=new Xh,m={},k=p.maxTextureSize,_={[B]:R,[R]:B,[Y]:Y},W=new Nz({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new tN},radius:{value:4}},vertexShader:Jh,fragmentShader:rh}),g=W.clone();g.defines.HORIZONTAL_PASS=1;const C=new Rj;C.setAttribute("position",new Wj(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const Q=new Kj(C,W),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=F;let i=this.type;function D(p,N){const j=L.update(Q);W.defines.VSM_SAMPLES!==p.blurSamples&&(W.defines.VSM_SAMPLES=p.blurSamples,g.defines.VSM_SAMPLES=p.blurSamples,W.needsUpdate=!0,g.needsUpdate=!0),null===p.mapPass&&(p.mapPass=new BN(t.x,t.y)),W.uniforms.shadow_pass.value=p.map.texture,W.uniforms.resolution.value=p.mapSize,W.uniforms.radius.value=p.radius,y.setRenderTarget(p.mapPass),y.clear(),y.renderBufferDirect(N,null,j,W,Q,null),g.uniforms.shadow_pass.value=p.mapPass.texture,g.uniforms.resolution.value=p.mapSize,g.uniforms.radius.value=p.radius,y.setRenderTarget(p.map),y.clear(),y.renderBufferDirect(N,null,j,g,Q,null)}function w(L,p,N,t){let j=null;const z=!0===N.isPointLight?L.customDistanceMaterial:L.customDepthMaterial;if(void 0!==z)j=z;else if(j=!0===N.isPointLight?h:O,y.localClippingEnabled&&!0===p.clipShadows&&Array.isArray(p.clippingPlanes)&&0!==p.clippingPlanes.length||p.displacementMap&&0!==p.displacementScale||p.alphaMap&&p.alphaTest>0||p.map&&p.alphaTest>0){const y=j.uuid,L=p.uuid;let N=m[y];void 0===N&&(N={},m[y]=N);let t=N[L];void 0===t&&(t=j.clone(),N[L]=t),j=t}return j.visible=p.visible,j.wireframe=p.wireframe,j.side=t===S?null!==p.shadowSide?p.shadowSide:p.side:null!==p.shadowSide?p.shadowSide:_[p.side],j.alphaMap=p.alphaMap,j.alphaTest=p.alphaTest,j.map=p.map,j.clipShadows=p.clipShadows,j.clippingPlanes=p.clippingPlanes,j.clipIntersection=p.clipIntersection,j.displacementMap=p.displacementMap,j.displacementScale=p.displacementScale,j.displacementBias=p.displacementBias,j.wireframeLinewidth=p.wireframeLinewidth,j.linewidth=p.linewidth,!0===N.isPointLight&&!0===j.isMeshDistanceMaterial&&(y.properties.get(j).light=N),j}function x(p,t,j,z,O){if(!1===p.visible)return;if(p.layers.test(t.layers)&&(p.isMesh||p.isLine||p.isPoints)&&(p.castShadow||p.receiveShadow&&O===S)&&(!p.frustumCulled||N.intersectsObject(p))){p.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,p.matrixWorld);const N=L.update(p),t=p.material;if(Array.isArray(t)){const L=N.groups;for(let h=0,m=L.length;h<m;h++){const m=L[h],k=t[m.materialIndex];if(k&&k.visible){const L=w(p,k,z,O);y.renderBufferDirect(j,null,N,L,p,m)}}}else if(t.visible){const L=w(p,t,z,O);y.renderBufferDirect(j,null,N,L,p,null)}}const h=p.children;for(let y=0,L=h.length;y<L;y++)x(h[y],t,j,z,O)}this.render=function(L,p,O){if(!1===T.enabled)return;if(!1===T.autoUpdate&&!1===T.needsUpdate)return;if(0===L.length)return;const h=y.getRenderTarget(),m=y.getActiveCubeFace(),_=y.getActiveMipmapLevel(),W=y.state;W.setBlending(P),W.buffers.color.setClear(1,1,1,1),W.buffers.depth.setTest(!0),W.setScissorTest(!1);const g=i!==S&&this.type===S,C=i===S&&this.type!==S;for(let h=0,m=L.length;h<m;h++){const m=L[h],_=m.shadow;if(void 0===_){console.warn("THREE.WebGLShadowMap:",m,"has no shadow.");continue}if(!1===_.autoUpdate&&!1===_.needsUpdate)continue;t.copy(_.mapSize);const Q=_.getFrameExtents();if(t.multiply(Q),j.copy(_.mapSize),(t.x>k||t.y>k)&&(t.x>k&&(j.x=Math.floor(k/Q.x),t.x=j.x*Q.x,_.mapSize.x=j.x),t.y>k&&(j.y=Math.floor(k/Q.y),t.y=j.y*Q.y,_.mapSize.y=j.y)),null===_.map||!0===g||!0===C){const y=this.type!==S?{minFilter:uy,magFilter:uy}:{};null!==_.map&&_.map.dispose(),_.map=new BN(t.x,t.y,y),_.map.texture.name=m.name+".shadowMap",_.camera.updateProjectionMatrix()}y.setRenderTarget(_.map),y.clear();const T=_.getViewportCount();for(let y=0;y<T;y++){const L=_.getViewport(y);z.set(j.x*L.x,j.y*L.y,j.x*L.z,j.y*L.w),W.viewport(z),_.updateMatrices(m,y),N=_.getFrustum(),x(p,O,_.camera,m,this.type)}!0!==_.isPointLightShadow&&this.type===S&&D(_,O),_.needsUpdate=!1}i=this.type,T.needsUpdate=!1,y.setRenderTarget(h,m,_)}}function $h(y,L,p){const N=p.isWebGL2,t=new function(){let L=!1;const p=new uN;let N=null;const t=new uN(0,0,0,0);return{setMask:function(p){N===p||L||(y.colorMask(p,p,p,p),N=p)},setLocked:function(y){L=y},setClear:function(L,N,j,z,O){!0===O&&(L*=z,N*=z,j*=z),p.set(L,N,j,z),!1===t.equals(p)&&(y.clearColor(L,N,j,z),t.copy(p))},reset:function(){L=!1,N=null,t.set(-1,0,0,0)}}},j=new function(){let L=!1,p=null,N=null,t=null;return{setTest:function(L){L?dy(y.DEPTH_TEST):oy(y.DEPTH_TEST)},setMask:function(N){p===N||L||(y.depthMask(N),p=N)},setFunc:function(L){if(N!==L){switch(L){case Ly:y.depthFunc(y.NEVER);break;case py:y.depthFunc(y.ALWAYS);break;case Ny:y.depthFunc(y.LESS);break;case ty:y.depthFunc(y.LEQUAL);break;case jy:y.depthFunc(y.EQUAL);break;case zy:y.depthFunc(y.GEQUAL);break;case Oy:y.depthFunc(y.GREATER);break;case hy:y.depthFunc(y.NOTEQUAL);break;default:y.depthFunc(y.LEQUAL)}N=L}},setLocked:function(y){L=y},setClear:function(L){t!==L&&(y.clearDepth(L),t=L)},reset:function(){L=!1,p=null,N=null,t=null}}},z=new function(){let L=!1,p=null,N=null,t=null,j=null,z=null,O=null,h=null,m=null;return{setTest:function(p){L||(p?dy(y.STENCIL_TEST):oy(y.STENCIL_TEST))},setMask:function(N){p===N||L||(y.stencilMask(N),p=N)},setFunc:function(L,p,z){N===L&&t===p&&j===z||(y.stencilFunc(L,p,z),N=L,t=p,j=z)},setOp:function(L,p,N){z===L&&O===p&&h===N||(y.stencilOp(L,p,N),z=L,O=p,h=N)},setLocked:function(y){L=y},setClear:function(L){m!==L&&(y.clearStencil(L),m=L)},reset:function(){L=!1,p=null,N=null,t=null,j=null,z=null,O=null,h=null,m=null}}},O=new WeakMap,h=new WeakMap;let m={},k={},_=new WeakMap,W=[],g=null,C=!1,Q=null,T=null,i=null,D=null,w=null,x=null,I=null,V=!1,F=null,u=null,S=null,B=null,E=null;const my=y.getParameter(y.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ky=!1,_y=0;const Wy=y.getParameter(y.VERSION);-1!==Wy.indexOf("WebGL")?(_y=parseFloat(/^WebGL (\d)/.exec(Wy)[1]),ky=_y>=1):-1!==Wy.indexOf("OpenGL ES")&&(_y=parseFloat(/^OpenGL ES (\d)/.exec(Wy)[1]),ky=_y>=2);let gy=null,Cy={};const Qy=y.getParameter(y.SCISSOR_BOX),Ty=y.getParameter(y.VIEWPORT),iy=(new uN).fromArray(Qy),Dy=(new uN).fromArray(Ty);function wy(L,p,t,j){const z=new Uint8Array(4),O=y.createTexture();y.bindTexture(L,O),y.texParameteri(L,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(L,y.TEXTURE_MAG_FILTER,y.NEAREST);for(let O=0;O<t;O++)!N||L!==y.TEXTURE_3D&&L!==y.TEXTURE_2D_ARRAY?y.texImage2D(p+O,0,y.RGBA,1,1,0,y.RGBA,y.UNSIGNED_BYTE,z):y.texImage3D(p,0,y.RGBA,1,1,j,0,y.RGBA,y.UNSIGNED_BYTE,z);return O}const xy={};function dy(L){!0!==m[L]&&(y.enable(L),m[L]=!0)}function oy(L){!1!==m[L]&&(y.disable(L),m[L]=!1)}xy[y.TEXTURE_2D]=wy(y.TEXTURE_2D,y.TEXTURE_2D,1),xy[y.TEXTURE_CUBE_MAP]=wy(y.TEXTURE_CUBE_MAP,y.TEXTURE_CUBE_MAP_POSITIVE_X,6),N&&(xy[y.TEXTURE_2D_ARRAY]=wy(y.TEXTURE_2D_ARRAY,y.TEXTURE_2D_ARRAY,1,1),xy[y.TEXTURE_3D]=wy(y.TEXTURE_3D,y.TEXTURE_3D,1,1)),t.setClear(0,0,0,1),j.setClear(1),z.setClear(0),dy(y.DEPTH_TEST),j.setFunc(ty),Fy(!1),uy(o),dy(y.CULL_FACE),Vy(P);const Uy={[X]:y.FUNC_ADD,[J]:y.FUNC_SUBTRACT,[r]:y.FUNC_REVERSE_SUBTRACT};if(N)Uy[G]=y.MIN,Uy[$]=y.MAX;else{const y=L.get("EXT_blend_minmax");null!==y&&(Uy[G]=y.MIN_EXT,Uy[$]=y.MAX_EXT)}const Iy={[q]:y.ZERO,[A]:y.ONE,[s]:y.SRC_COLOR,[K]:y.SRC_ALPHA,[yy]:y.SRC_ALPHA_SATURATE,[e]:y.DST_COLOR,[n]:y.DST_ALPHA,[c]:y.ONE_MINUS_SRC_COLOR,[b]:y.ONE_MINUS_SRC_ALPHA,[Z]:y.ONE_MINUS_DST_COLOR,[v]:y.ONE_MINUS_DST_ALPHA};function Vy(L,p,N,t,j,z,O,h){if(L!==P){if(!1===C&&(dy(y.BLEND),C=!0),L===H)j=j||p,z=z||N,O=O||t,p===T&&j===w||(y.blendEquationSeparate(Uy[p],Uy[j]),T=p,w=j),N===i&&t===D&&z===x&&O===I||(y.blendFuncSeparate(Iy[N],Iy[t],Iy[z],Iy[O]),i=N,D=t,x=z,I=O),Q=L,V=!1;else if(L!==Q||h!==V){if(T===X&&w===X||(y.blendEquation(y.FUNC_ADD),T=X,w=X),h)switch(L){case l:y.blendFuncSeparate(y.ONE,y.ONE_MINUS_SRC_ALPHA,y.ONE,y.ONE_MINUS_SRC_ALPHA);break;case M:y.blendFunc(y.ONE,y.ONE);break;case f:y.blendFuncSeparate(y.ZERO,y.ONE_MINUS_SRC_COLOR,y.ZERO,y.ONE);break;case a:y.blendFuncSeparate(y.ZERO,y.SRC_COLOR,y.ZERO,y.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",L)}else switch(L){case l:y.blendFuncSeparate(y.SRC_ALPHA,y.ONE_MINUS_SRC_ALPHA,y.ONE,y.ONE_MINUS_SRC_ALPHA);break;case M:y.blendFunc(y.SRC_ALPHA,y.ONE);break;case f:y.blendFuncSeparate(y.ZERO,y.ONE_MINUS_SRC_COLOR,y.ZERO,y.ONE);break;case a:y.blendFunc(y.ZERO,y.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",L)}i=null,D=null,x=null,I=null,Q=L,V=h}}else!0===C&&(oy(y.BLEND),C=!1)}function Fy(L){F!==L&&(L?y.frontFace(y.CW):y.frontFace(y.CCW),F=L)}function uy(L){L!==d?(dy(y.CULL_FACE),L!==u&&(L===o?y.cullFace(y.BACK):L===U?y.cullFace(y.FRONT):y.cullFace(y.FRONT_AND_BACK))):oy(y.CULL_FACE),u=L}function Sy(L,p,N){L?(dy(y.POLYGON_OFFSET_FILL),B===p&&E===N||(y.polygonOffset(p,N),B=p,E=N)):oy(y.POLYGON_OFFSET_FILL)}return{buffers:{color:t,depth:j,stencil:z},enable:dy,disable:oy,bindFramebuffer:function(L,p){return k[L]!==p&&(y.bindFramebuffer(L,p),k[L]=p,N&&(L===y.DRAW_FRAMEBUFFER&&(k[y.FRAMEBUFFER]=p),L===y.FRAMEBUFFER&&(k[y.DRAW_FRAMEBUFFER]=p)),!0)},drawBuffers:function(N,t){let j=W,z=!1;if(N)if(j=_.get(t),void 0===j&&(j=[],_.set(t,j)),N.isWebGLMultipleRenderTargets){const L=N.texture;if(j.length!==L.length||j[0]!==y.COLOR_ATTACHMENT0){for(let p=0,N=L.length;p<N;p++)j[p]=y.COLOR_ATTACHMENT0+p;j.length=L.length,z=!0}}else j[0]!==y.COLOR_ATTACHMENT0&&(j[0]=y.COLOR_ATTACHMENT0,z=!0);else j[0]!==y.BACK&&(j[0]=y.BACK,z=!0);z&&(p.isWebGL2?y.drawBuffers(j):L.get("WEBGL_draw_buffers").drawBuffersWEBGL(j))},useProgram:function(L){return g!==L&&(y.useProgram(L),g=L,!0)},setBlending:Vy,setMaterial:function(L,p){L.side===Y?oy(y.CULL_FACE):dy(y.CULL_FACE);let N=L.side===R;p&&(N=!N),Fy(N),L.blending===l&&!1===L.transparent?Vy(P):Vy(L.blending,L.blendEquation,L.blendSrc,L.blendDst,L.blendEquationAlpha,L.blendSrcAlpha,L.blendDstAlpha,L.premultipliedAlpha),j.setFunc(L.depthFunc),j.setTest(L.depthTest),j.setMask(L.depthWrite),t.setMask(L.colorWrite);const O=L.stencilWrite;z.setTest(O),O&&(z.setMask(L.stencilWriteMask),z.setFunc(L.stencilFunc,L.stencilRef,L.stencilFuncMask),z.setOp(L.stencilFail,L.stencilZFail,L.stencilZPass)),Sy(L.polygonOffset,L.polygonOffsetFactor,L.polygonOffsetUnits),!0===L.alphaToCoverage?dy(y.SAMPLE_ALPHA_TO_COVERAGE):oy(y.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Fy,setCullFace:uy,setLineWidth:function(L){L!==S&&(ky&&y.lineWidth(L),S=L)},setPolygonOffset:Sy,setScissorTest:function(L){L?dy(y.SCISSOR_TEST):oy(y.SCISSOR_TEST)},activeTexture:function(L){void 0===L&&(L=y.TEXTURE0+my-1),gy!==L&&(y.activeTexture(L),gy=L)},bindTexture:function(L,p,N){void 0===N&&(N=null===gy?y.TEXTURE0+my-1:gy);let t=Cy[N];void 0===t&&(t={type:void 0,texture:void 0},Cy[N]=t),t.type===L&&t.texture===p||(gy!==N&&(y.activeTexture(N),gy=N),y.bindTexture(L,p||xy[L]),t.type=L,t.texture=p)},unbindTexture:function(){const L=Cy[gy];void 0!==L&&void 0!==L.type&&(y.bindTexture(L.type,null),L.type=void 0,L.texture=void 0)},compressedTexImage2D:function(){try{y.compressedTexImage2D.apply(y,arguments)}catch(y){console.error("THREE.WebGLState:",y)}},compressedTexImage3D:function(){try{y.compressedTexImage3D.apply(y,arguments)}catch(y){console.error("THREE.WebGLState:",y)}},texImage2D:function(){try{y.texImage2D.apply(y,arguments)}catch(y){console.error("THREE.WebGLState:",y)}},texImage3D:function(){try{y.texImage3D.apply(y,arguments)}catch(y){console.error("THREE.WebGLState:",y)}},updateUBOMapping:function(L,p){let N=h.get(p);void 0===N&&(N=new WeakMap,h.set(p,N));let t=N.get(L);void 0===t&&(t=y.getUniformBlockIndex(p,L.name),N.set(L,t))},uniformBlockBinding:function(L,p){const N=h.get(p).get(L);O.get(p)!==N&&(y.uniformBlockBinding(p,N,L.__bindingPointIndex),O.set(p,N))},texStorage2D:function(){try{y.texStorage2D.apply(y,arguments)}catch(y){console.error("THREE.WebGLState:",y)}},texStorage3D:function(){try{y.texStorage3D.apply(y,arguments)}catch(y){console.error("THREE.WebGLState:",y)}},texSubImage2D:function(){try{y.texSubImage2D.apply(y,arguments)}catch(y){console.error("THREE.WebGLState:",y)}},texSubImage3D:function(){try{y.texSubImage3D.apply(y,arguments)}catch(y){console.error("THREE.WebGLState:",y)}},compressedTexSubImage2D:function(){try{y.compressedTexSubImage2D.apply(y,arguments)}catch(y){console.error("THREE.WebGLState:",y)}},compressedTexSubImage3D:function(){try{y.compressedTexSubImage3D.apply(y,arguments)}catch(y){console.error("THREE.WebGLState:",y)}},scissor:function(L){!1===iy.equals(L)&&(y.scissor(L.x,L.y,L.z,L.w),iy.copy(L))},viewport:function(L){!1===Dy.equals(L)&&(y.viewport(L.x,L.y,L.z,L.w),Dy.copy(L))},reset:function(){y.disable(y.BLEND),y.disable(y.CULL_FACE),y.disable(y.DEPTH_TEST),y.disable(y.POLYGON_OFFSET_FILL),y.disable(y.SCISSOR_TEST),y.disable(y.STENCIL_TEST),y.disable(y.SAMPLE_ALPHA_TO_COVERAGE),y.blendEquation(y.FUNC_ADD),y.blendFunc(y.ONE,y.ZERO),y.blendFuncSeparate(y.ONE,y.ZERO,y.ONE,y.ZERO),y.colorMask(!0,!0,!0,!0),y.clearColor(0,0,0,0),y.depthMask(!0),y.depthFunc(y.LESS),y.clearDepth(1),y.stencilMask(4294967295),y.stencilFunc(y.ALWAYS,0,4294967295),y.stencilOp(y.KEEP,y.KEEP,y.KEEP),y.clearStencil(0),y.cullFace(y.BACK),y.frontFace(y.CCW),y.polygonOffset(0,0),y.activeTexture(y.TEXTURE0),y.bindFramebuffer(y.FRAMEBUFFER,null),!0===N&&(y.bindFramebuffer(y.DRAW_FRAMEBUFFER,null),y.bindFramebuffer(y.READ_FRAMEBUFFER,null)),y.useProgram(null),y.lineWidth(1),y.scissor(0,0,y.canvas.width,y.canvas.height),y.viewport(0,0,y.canvas.width,y.canvas.height),m={},gy=null,Cy={},k={},_=new WeakMap,W=[],g=null,C=!1,Q=null,T=null,i=null,D=null,w=null,x=null,I=null,V=!1,F=null,u=null,S=null,B=null,E=null,iy.set(0,0,y.canvas.width,y.canvas.height),Dy.set(0,0,y.canvas.width,y.canvas.height),t.reset(),j.reset(),z.reset()}}}function qh(y,L,p,N,t,j,z){const O=t.isWebGL2,h=t.maxTextures,m=t.maxCubemapSize,k=t.maxTextureSize,_=t.maxSamples,W=L.has("WEBGL_multisampled_render_to_texture")?L.get("WEBGL_multisampled_render_to_texture"):null,g="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),C=new WeakMap;let Q;const T=new WeakMap;let i=!1;try{i="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(y){}function D(y,L){return i?new OffscreenCanvas(y,L):kN("canvas")}function w(y,L,p,N){let t=1;if((y.width>N||y.height>N)&&(t=N/Math.max(y.width,y.height)),t<1||!0===L){if("undefined"!=typeof HTMLImageElement&&y instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&y instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&y instanceof ImageBitmap){const N=L?yN:Math.floor,j=N(t*y.width),z=N(t*y.height);void 0===Q&&(Q=D(j,z));const O=p?D(j,z):Q;return O.width=j,O.height=z,O.getContext("2d").drawImage(y,0,0,j,z),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+y.width+"x"+y.height+") to ("+j+"x"+z+")."),O}return"data"in y&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+y.width+"x"+y.height+")."),y}return y}function x(y){return ep(y.width)&&ep(y.height)}function d(y,L){return y.generateMipmaps&&L&&y.minFilter!==uy&&y.minFilter!==Ey}function o(L){y.generateMipmap(L)}function U(p,N,t,j,z=!1){if(!1===O)return N;if(null!==p){if(void 0!==y[p])return y[p];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+p+"'")}let h=N;return N===y.RED&&(t===y.FLOAT&&(h=y.R32F),t===y.HALF_FLOAT&&(h=y.R16F),t===y.UNSIGNED_BYTE&&(h=y.R8)),N===y.RED_INTEGER&&(t===y.UNSIGNED_BYTE&&(h=y.R8UI),t===y.UNSIGNED_SHORT&&(h=y.R16UI),t===y.UNSIGNED_INT&&(h=y.R32UI),t===y.BYTE&&(h=y.R8I),t===y.SHORT&&(h=y.R16I),t===y.INT&&(h=y.R32I)),N===y.RG&&(t===y.FLOAT&&(h=y.RG32F),t===y.HALF_FLOAT&&(h=y.RG16F),t===y.UNSIGNED_BYTE&&(h=y.RG8)),N===y.RGBA&&(t===y.FLOAT&&(h=y.RGBA32F),t===y.HALF_FLOAT&&(h=y.RGBA16F),t===y.UNSIGNED_BYTE&&(h=j===pp&&!1===z?y.SRGB8_ALPHA8:y.RGBA8),t===y.UNSIGNED_SHORT_4_4_4_4&&(h=y.RGBA4),t===y.UNSIGNED_SHORT_5_5_5_1&&(h=y.RGB5_A1)),h!==y.R16F&&h!==y.R32F&&h!==y.RG16F&&h!==y.RG32F&&h!==y.RGBA16F&&h!==y.RGBA32F||L.get("EXT_color_buffer_float"),h}function I(y,L,p){return!0===d(y,p)||y.isFramebufferTexture&&y.minFilter!==uy&&y.minFilter!==Ey?Math.log2(Math.max(L.width,L.height))+1:void 0!==y.mipmaps&&y.mipmaps.length>0?y.mipmaps.length:y.isCompressedTexture&&Array.isArray(y.image)?L.mipmaps.length:1}function V(L){return L===uy||L===Sy||L===Ry?y.NEAREST:y.LINEAR}function F(y){const L=y.target;L.removeEventListener("dispose",F),function(y){const L=N.get(y);if(void 0===L.__webglInit)return;const p=y.source,t=T.get(p);if(t){const N=t[L.__cacheKey];N.usedTimes--,0===N.usedTimes&&S(y),0===Object.keys(t).length&&T.delete(p)}N.remove(y)}(L),L.isVideoTexture&&C.delete(L)}function u(L){const p=L.target;p.removeEventListener("dispose",u),function(L){const p=L.texture,t=N.get(L),j=N.get(p);if(void 0!==j.__webglTexture&&(y.deleteTexture(j.__webglTexture),z.memory.textures--),L.depthTexture&&L.depthTexture.dispose(),L.isWebGLCubeRenderTarget)for(let L=0;L<6;L++){if(Array.isArray(t.__webglFramebuffer[L]))for(let p=0;p<t.__webglFramebuffer[L].length;p++)y.deleteFramebuffer(t.__webglFramebuffer[L][p]);else y.deleteFramebuffer(t.__webglFramebuffer[L]);t.__webglDepthbuffer&&y.deleteRenderbuffer(t.__webglDepthbuffer[L])}else{if(Array.isArray(t.__webglFramebuffer))for(let L=0;L<t.__webglFramebuffer.length;L++)y.deleteFramebuffer(t.__webglFramebuffer[L]);else y.deleteFramebuffer(t.__webglFramebuffer);if(t.__webglDepthbuffer&&y.deleteRenderbuffer(t.__webglDepthbuffer),t.__webglMultisampledFramebuffer&&y.deleteFramebuffer(t.__webglMultisampledFramebuffer),t.__webglColorRenderbuffer)for(let L=0;L<t.__webglColorRenderbuffer.length;L++)t.__webglColorRenderbuffer[L]&&y.deleteRenderbuffer(t.__webglColorRenderbuffer[L]);t.__webglDepthRenderbuffer&&y.deleteRenderbuffer(t.__webglDepthRenderbuffer)}if(L.isWebGLMultipleRenderTargets)for(let L=0,t=p.length;L<t;L++){const t=N.get(p[L]);t.__webglTexture&&(y.deleteTexture(t.__webglTexture),z.memory.textures--),N.remove(p[L])}N.remove(p),N.remove(L)}(p)}function S(L){const p=N.get(L);y.deleteTexture(p.__webglTexture);const t=L.source;delete T.get(t)[p.__cacheKey],z.memory.textures--}let B=0;function R(L,t){const j=N.get(L);if(L.isVideoTexture&&function(y){const L=z.render.frame;C.get(y)!==L&&(C.set(y,L),y.update())}(L),!1===L.isRenderTargetTexture&&L.version>0&&j.__version!==L.version){const y=L.image;if(null===y)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==y.complete)return void f(j,L,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}p.bindTexture(y.TEXTURE_2D,j.__webglTexture,y.TEXTURE0+t)}const Y={[Iy]:y.REPEAT,[Vy]:y.CLAMP_TO_EDGE,[Fy]:y.MIRRORED_REPEAT},E={[uy]:y.NEAREST,[Sy]:y.NEAREST_MIPMAP_NEAREST,[Ry]:y.NEAREST_MIPMAP_LINEAR,[Ey]:y.LINEAR,[Py]:y.LINEAR_MIPMAP_NEAREST,[My]:y.LINEAR_MIPMAP_LINEAR},P={[dp]:y.NEVER,[Sp]:y.ALWAYS,[op]:y.LESS,[Ip]:y.LEQUAL,[Up]:y.EQUAL,[up]:y.GEQUAL,[Vp]:y.GREATER,[Fp]:y.NOTEQUAL};function l(p,j,z){if(z?(y.texParameteri(p,y.TEXTURE_WRAP_S,Y[j.wrapS]),y.texParameteri(p,y.TEXTURE_WRAP_T,Y[j.wrapT]),p!==y.TEXTURE_3D&&p!==y.TEXTURE_2D_ARRAY||y.texParameteri(p,y.TEXTURE_WRAP_R,Y[j.wrapR]),y.texParameteri(p,y.TEXTURE_MAG_FILTER,E[j.magFilter]),y.texParameteri(p,y.TEXTURE_MIN_FILTER,E[j.minFilter])):(y.texParameteri(p,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(p,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),p!==y.TEXTURE_3D&&p!==y.TEXTURE_2D_ARRAY||y.texParameteri(p,y.TEXTURE_WRAP_R,y.CLAMP_TO_EDGE),j.wrapS===Vy&&j.wrapT===Vy||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),y.texParameteri(p,y.TEXTURE_MAG_FILTER,V(j.magFilter)),y.texParameteri(p,y.TEXTURE_MIN_FILTER,V(j.minFilter)),j.minFilter!==uy&&j.minFilter!==Ey&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),j.compareFunction&&(y.texParameteri(p,y.TEXTURE_COMPARE_MODE,y.COMPARE_REF_TO_TEXTURE),y.texParameteri(p,y.TEXTURE_COMPARE_FUNC,P[j.compareFunction])),!0===L.has("EXT_texture_filter_anisotropic")){const z=L.get("EXT_texture_filter_anisotropic");if(j.magFilter===uy)return;if(j.minFilter!==Ry&&j.minFilter!==My)return;if(j.type===$y&&!1===L.has("OES_texture_float_linear"))return;if(!1===O&&j.type===qy&&!1===L.has("OES_texture_half_float_linear"))return;(j.anisotropy>1||N.get(j).__currentAnisotropy)&&(y.texParameterf(p,z.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(j.anisotropy,t.getMaxAnisotropy())),N.get(j).__currentAnisotropy=j.anisotropy)}}function M(L,p){let N=!1;void 0===L.__webglInit&&(L.__webglInit=!0,p.addEventListener("dispose",F));const t=p.source;let j=T.get(t);void 0===j&&(j={},T.set(t,j));const O=function(y){const L=[];return L.push(y.wrapS),L.push(y.wrapT),L.push(y.wrapR||0),L.push(y.magFilter),L.push(y.minFilter),L.push(y.anisotropy),L.push(y.internalFormat),L.push(y.format),L.push(y.type),L.push(y.generateMipmaps),L.push(y.premultiplyAlpha),L.push(y.flipY),L.push(y.unpackAlignment),L.push(y.colorSpace),L.join()}(p);if(O!==L.__cacheKey){void 0===j[O]&&(j[O]={texture:y.createTexture(),usedTimes:0},z.memory.textures++,N=!0),j[O].usedTimes++;const t=j[L.__cacheKey];void 0!==t&&(j[L.__cacheKey].usedTimes--,0===t.usedTimes&&S(p)),L.__cacheKey=O,L.__webglTexture=j[O].texture}return N}function f(L,t,z){let h=y.TEXTURE_2D;(t.isDataArrayTexture||t.isCompressedArrayTexture)&&(h=y.TEXTURE_2D_ARRAY),t.isData3DTexture&&(h=y.TEXTURE_3D);const m=M(L,t),_=t.source;p.bindTexture(h,L.__webglTexture,y.TEXTURE0+z);const W=N.get(_);if(_.version!==W.__version||!0===m){p.activeTexture(y.TEXTURE0+z),y.pixelStorei(y.UNPACK_FLIP_Y_WEBGL,t.flipY),y.pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),y.pixelStorei(y.UNPACK_ALIGNMENT,t.unpackAlignment),y.pixelStorei(y.UNPACK_COLORSPACE_CONVERSION_WEBGL,y.NONE);const L=function(y){return!O&&(y.wrapS!==Vy||y.wrapT!==Vy||y.minFilter!==uy&&y.minFilter!==Ey)}(t)&&!1===x(t.image);let N=w(t.image,L,!1,k);N=G(t,N);const g=x(N)||O,C=j.convert(t.format,t.colorSpace);let Q,T=j.convert(t.type),i=U(t.internalFormat,C,T,t.colorSpace);l(h,t,g);const D=t.mipmaps,V=O&&!0!==t.isVideoTexture,F=void 0===W.__version||!0===m,u=I(t,N,g);if(t.isDepthTexture)i=y.DEPTH_COMPONENT,O?i=t.type===$y?y.DEPTH_COMPONENT32F:t.type===Gy?y.DEPTH_COMPONENT24:t.type===cy?y.DEPTH24_STENCIL8:y.DEPTH_COMPONENT16:t.type===$y&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),t.format===ey&&i===y.DEPTH_COMPONENT&&t.type!==Jy&&t.type!==Gy&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),t.type=Gy,T=j.convert(t.type)),t.format===Zy&&i===y.DEPTH_COMPONENT&&(i=y.DEPTH_STENCIL,t.type!==cy&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),t.type=cy,T=j.convert(t.type))),F&&(V?p.texStorage2D(y.TEXTURE_2D,1,i,N.width,N.height):p.texImage2D(y.TEXTURE_2D,0,i,N.width,N.height,0,C,T,null));else if(t.isDataTexture)if(D.length>0&&g){V&&F&&p.texStorage2D(y.TEXTURE_2D,u,i,D[0].width,D[0].height);for(let L=0,N=D.length;L<N;L++)Q=D[L],V?p.texSubImage2D(y.TEXTURE_2D,L,0,0,Q.width,Q.height,C,T,Q.data):p.texImage2D(y.TEXTURE_2D,L,i,Q.width,Q.height,0,C,T,Q.data);t.generateMipmaps=!1}else V?(F&&p.texStorage2D(y.TEXTURE_2D,u,i,N.width,N.height),p.texSubImage2D(y.TEXTURE_2D,0,0,0,N.width,N.height,C,T,N.data)):p.texImage2D(y.TEXTURE_2D,0,i,N.width,N.height,0,C,T,N.data);else if(t.isCompressedTexture)if(t.isCompressedArrayTexture){V&&F&&p.texStorage3D(y.TEXTURE_2D_ARRAY,u,i,D[0].width,D[0].height,N.depth);for(let L=0,j=D.length;L<j;L++)Q=D[L],t.format!==by?null!==C?V?p.compressedTexSubImage3D(y.TEXTURE_2D_ARRAY,L,0,0,0,Q.width,Q.height,N.depth,C,Q.data,0,0):p.compressedTexImage3D(y.TEXTURE_2D_ARRAY,L,i,Q.width,Q.height,N.depth,0,Q.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):V?p.texSubImage3D(y.TEXTURE_2D_ARRAY,L,0,0,0,Q.width,Q.height,N.depth,C,T,Q.data):p.texImage3D(y.TEXTURE_2D_ARRAY,L,i,Q.width,Q.height,N.depth,0,C,T,Q.data)}else{V&&F&&p.texStorage2D(y.TEXTURE_2D,u,i,D[0].width,D[0].height);for(let L=0,N=D.length;L<N;L++)Q=D[L],t.format!==by?null!==C?V?p.compressedTexSubImage2D(y.TEXTURE_2D,L,0,0,Q.width,Q.height,C,Q.data):p.compressedTexImage2D(y.TEXTURE_2D,L,i,Q.width,Q.height,0,Q.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):V?p.texSubImage2D(y.TEXTURE_2D,L,0,0,Q.width,Q.height,C,T,Q.data):p.texImage2D(y.TEXTURE_2D,L,i,Q.width,Q.height,0,C,T,Q.data)}else if(t.isDataArrayTexture)V?(F&&p.texStorage3D(y.TEXTURE_2D_ARRAY,u,i,N.width,N.height,N.depth),p.texSubImage3D(y.TEXTURE_2D_ARRAY,0,0,0,0,N.width,N.height,N.depth,C,T,N.data)):p.texImage3D(y.TEXTURE_2D_ARRAY,0,i,N.width,N.height,N.depth,0,C,T,N.data);else if(t.isData3DTexture)V?(F&&p.texStorage3D(y.TEXTURE_3D,u,i,N.width,N.height,N.depth),p.texSubImage3D(y.TEXTURE_3D,0,0,0,0,N.width,N.height,N.depth,C,T,N.data)):p.texImage3D(y.TEXTURE_3D,0,i,N.width,N.height,N.depth,0,C,T,N.data);else if(t.isFramebufferTexture){if(F)if(V)p.texStorage2D(y.TEXTURE_2D,u,i,N.width,N.height);else{let L=N.width,t=N.height;for(let N=0;N<u;N++)p.texImage2D(y.TEXTURE_2D,N,i,L,t,0,C,T,null),L>>=1,t>>=1}}else if(D.length>0&&g){V&&F&&p.texStorage2D(y.TEXTURE_2D,u,i,D[0].width,D[0].height);for(let L=0,N=D.length;L<N;L++)Q=D[L],V?p.texSubImage2D(y.TEXTURE_2D,L,0,0,C,T,Q):p.texImage2D(y.TEXTURE_2D,L,i,C,T,Q);t.generateMipmaps=!1}else V?(F&&p.texStorage2D(y.TEXTURE_2D,u,i,N.width,N.height),p.texSubImage2D(y.TEXTURE_2D,0,0,0,C,T,N)):p.texImage2D(y.TEXTURE_2D,0,i,C,T,N);d(t,g)&&o(h),W.__version=_.version,t.onUpdate&&t.onUpdate(t)}L.__version=t.version}function a(L,t,z,O,h,m){const k=j.convert(z.format,z.colorSpace),_=j.convert(z.type),g=U(z.internalFormat,k,_,z.colorSpace);if(!N.get(t).__hasExternalTextures){const L=Math.max(1,t.width>>m),N=Math.max(1,t.height>>m);h===y.TEXTURE_3D||h===y.TEXTURE_2D_ARRAY?p.texImage3D(h,m,g,L,N,t.depth,0,k,_,null):p.texImage2D(h,m,g,L,N,0,k,_,null)}p.bindFramebuffer(y.FRAMEBUFFER,L),r(t)?W.framebufferTexture2DMultisampleEXT(y.FRAMEBUFFER,O,h,N.get(z).__webglTexture,0,J(t)):(h===y.TEXTURE_2D||h>=y.TEXTURE_CUBE_MAP_POSITIVE_X&&h<=y.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&y.framebufferTexture2D(y.FRAMEBUFFER,O,h,N.get(z).__webglTexture,m),p.bindFramebuffer(y.FRAMEBUFFER,null)}function H(L,p,N){if(y.bindRenderbuffer(y.RENDERBUFFER,L),p.depthBuffer&&!p.stencilBuffer){let t=y.DEPTH_COMPONENT16;if(N||r(p)){const L=p.depthTexture;L&&L.isDepthTexture&&(L.type===$y?t=y.DEPTH_COMPONENT32F:L.type===Gy&&(t=y.DEPTH_COMPONENT24));const N=J(p);r(p)?W.renderbufferStorageMultisampleEXT(y.RENDERBUFFER,N,t,p.width,p.height):y.renderbufferStorageMultisample(y.RENDERBUFFER,N,t,p.width,p.height)}else y.renderbufferStorage(y.RENDERBUFFER,t,p.width,p.height);y.framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_ATTACHMENT,y.RENDERBUFFER,L)}else if(p.depthBuffer&&p.stencilBuffer){const t=J(p);N&&!1===r(p)?y.renderbufferStorageMultisample(y.RENDERBUFFER,t,y.DEPTH24_STENCIL8,p.width,p.height):r(p)?W.renderbufferStorageMultisampleEXT(y.RENDERBUFFER,t,y.DEPTH24_STENCIL8,p.width,p.height):y.renderbufferStorage(y.RENDERBUFFER,y.DEPTH_STENCIL,p.width,p.height),y.framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_STENCIL_ATTACHMENT,y.RENDERBUFFER,L)}else{const L=!0===p.isWebGLMultipleRenderTargets?p.texture:[p.texture];for(let t=0;t<L.length;t++){const z=L[t],O=j.convert(z.format,z.colorSpace),h=j.convert(z.type),m=U(z.internalFormat,O,h,z.colorSpace),k=J(p);N&&!1===r(p)?y.renderbufferStorageMultisample(y.RENDERBUFFER,k,m,p.width,p.height):r(p)?W.renderbufferStorageMultisampleEXT(y.RENDERBUFFER,k,m,p.width,p.height):y.renderbufferStorage(y.RENDERBUFFER,m,p.width,p.height)}}y.bindRenderbuffer(y.RENDERBUFFER,null)}function X(L){const t=N.get(L),j=!0===L.isWebGLCubeRenderTarget;if(L.depthTexture&&!t.__autoAllocateDepthBuffer){if(j)throw new Error("target.depthTexture not supported in Cube render targets");(function(L,t){if(t&&t.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(p.bindFramebuffer(y.FRAMEBUFFER,L),!t.depthTexture||!t.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");N.get(t.depthTexture).__webglTexture&&t.depthTexture.image.width===t.width&&t.depthTexture.image.height===t.height||(t.depthTexture.image.width=t.width,t.depthTexture.image.height=t.height,t.depthTexture.needsUpdate=!0),R(t.depthTexture,0);const j=N.get(t.depthTexture).__webglTexture,z=J(t);if(t.depthTexture.format===ey)r(t)?W.framebufferTexture2DMultisampleEXT(y.FRAMEBUFFER,y.DEPTH_ATTACHMENT,y.TEXTURE_2D,j,0,z):y.framebufferTexture2D(y.FRAMEBUFFER,y.DEPTH_ATTACHMENT,y.TEXTURE_2D,j,0);else{if(t.depthTexture.format!==Zy)throw new Error("Unknown depthTexture format");r(t)?W.framebufferTexture2DMultisampleEXT(y.FRAMEBUFFER,y.DEPTH_STENCIL_ATTACHMENT,y.TEXTURE_2D,j,0,z):y.framebufferTexture2D(y.FRAMEBUFFER,y.DEPTH_STENCIL_ATTACHMENT,y.TEXTURE_2D,j,0)}})(t.__webglFramebuffer,L)}else if(j){t.__webglDepthbuffer=[];for(let N=0;N<6;N++)p.bindFramebuffer(y.FRAMEBUFFER,t.__webglFramebuffer[N]),t.__webglDepthbuffer[N]=y.createRenderbuffer(),H(t.__webglDepthbuffer[N],L,!1)}else p.bindFramebuffer(y.FRAMEBUFFER,t.__webglFramebuffer),t.__webglDepthbuffer=y.createRenderbuffer(),H(t.__webglDepthbuffer,L,!1);p.bindFramebuffer(y.FRAMEBUFFER,null)}function J(y){return Math.min(_,y.samples)}function r(y){const p=N.get(y);return O&&y.samples>0&&!0===L.has("WEBGL_multisampled_render_to_texture")&&!1!==p.__useRenderToTexture}function G(y,p){const N=y.colorSpace,t=y.format,j=y.type;return!0===y.isCompressedTexture||y.format===Jp||N!==Np&&N!==Lp&&(N===pp?!1===O?!0===L.has("EXT_sRGB")&&t===by?(y.format=Jp,y.minFilter=Ey,y.generateMipmaps=!1):p=dN.sRGBToLinear(p):t===by&&j===ay||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",N)),p}this.allocateTextureUnit=function(){const y=B;return y>=h&&console.warn("THREE.WebGLTextures: Trying to use "+y+" texture units while this GPU supports only "+h),B+=1,y},this.resetTextureUnits=function(){B=0},this.setTexture2D=R,this.setTexture2DArray=function(L,t){const j=N.get(L);L.version>0&&j.__version!==L.version?f(j,L,t):p.bindTexture(y.TEXTURE_2D_ARRAY,j.__webglTexture,y.TEXTURE0+t)},this.setTexture3D=function(L,t){const j=N.get(L);L.version>0&&j.__version!==L.version?f(j,L,t):p.bindTexture(y.TEXTURE_3D,j.__webglTexture,y.TEXTURE0+t)},this.setTextureCube=function(L,t){const z=N.get(L);L.version>0&&z.__version!==L.version?function(L,t,z){if(6!==t.image.length)return;const h=M(L,t),k=t.source;p.bindTexture(y.TEXTURE_CUBE_MAP,L.__webglTexture,y.TEXTURE0+z);const _=N.get(k);if(k.version!==_.__version||!0===h){p.activeTexture(y.TEXTURE0+z),y.pixelStorei(y.UNPACK_FLIP_Y_WEBGL,t.flipY),y.pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),y.pixelStorei(y.UNPACK_ALIGNMENT,t.unpackAlignment),y.pixelStorei(y.UNPACK_COLORSPACE_CONVERSION_WEBGL,y.NONE);const L=t.isCompressedTexture||t.image[0].isCompressedTexture,N=t.image[0]&&t.image[0].isDataTexture,W=[];for(let y=0;y<6;y++)W[y]=L||N?N?t.image[y].image:t.image[y]:w(t.image[y],!1,!0,m),W[y]=G(t,W[y]);const g=W[0],C=x(g)||O,Q=j.convert(t.format,t.colorSpace),T=j.convert(t.type),i=U(t.internalFormat,Q,T,t.colorSpace),D=O&&!0!==t.isVideoTexture,V=void 0===_.__version||!0===h;let F,u=I(t,g,C);if(l(y.TEXTURE_CUBE_MAP,t,C),L){D&&V&&p.texStorage2D(y.TEXTURE_CUBE_MAP,u,i,g.width,g.height);for(let L=0;L<6;L++){F=W[L].mipmaps;for(let N=0;N<F.length;N++){const j=F[N];t.format!==by?null!==Q?D?p.compressedTexSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+L,N,0,0,j.width,j.height,Q,j.data):p.compressedTexImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+L,N,i,j.width,j.height,0,j.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):D?p.texSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+L,N,0,0,j.width,j.height,Q,T,j.data):p.texImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+L,N,i,j.width,j.height,0,Q,T,j.data)}}}else{F=t.mipmaps,D&&V&&(F.length>0&&u++,p.texStorage2D(y.TEXTURE_CUBE_MAP,u,i,W[0].width,W[0].height));for(let L=0;L<6;L++)if(N){D?p.texSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+L,0,0,0,W[L].width,W[L].height,Q,T,W[L].data):p.texImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+L,0,i,W[L].width,W[L].height,0,Q,T,W[L].data);for(let N=0;N<F.length;N++){const t=F[N].image[L].image;D?p.texSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+L,N+1,0,0,t.width,t.height,Q,T,t.data):p.texImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+L,N+1,i,t.width,t.height,0,Q,T,t.data)}}else{D?p.texSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+L,0,0,0,Q,T,W[L]):p.texImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+L,0,i,Q,T,W[L]);for(let N=0;N<F.length;N++){const t=F[N];D?p.texSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+L,N+1,0,0,Q,T,t.image[L]):p.texImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+L,N+1,i,Q,T,t.image[L])}}}d(t,C)&&o(y.TEXTURE_CUBE_MAP),_.__version=k.version,t.onUpdate&&t.onUpdate(t)}L.__version=t.version}(z,L,t):p.bindTexture(y.TEXTURE_CUBE_MAP,z.__webglTexture,y.TEXTURE0+t)},this.rebindTextures=function(L,p,t){const j=N.get(L);void 0!==p&&a(j.__webglFramebuffer,L,L.texture,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,0),void 0!==t&&X(L)},this.setupRenderTarget=function(L){const h=L.texture,m=N.get(L),k=N.get(h);L.addEventListener("dispose",u),!0!==L.isWebGLMultipleRenderTargets&&(void 0===k.__webglTexture&&(k.__webglTexture=y.createTexture()),k.__version=h.version,z.memory.textures++);const _=!0===L.isWebGLCubeRenderTarget,W=!0===L.isWebGLMultipleRenderTargets,g=x(L)||O;if(_){m.__webglFramebuffer=[];for(let L=0;L<6;L++)if(O&&h.mipmaps&&h.mipmaps.length>0){m.__webglFramebuffer[L]=[];for(let p=0;p<h.mipmaps.length;p++)m.__webglFramebuffer[L][p]=y.createFramebuffer()}else m.__webglFramebuffer[L]=y.createFramebuffer()}else{if(O&&h.mipmaps&&h.mipmaps.length>0){m.__webglFramebuffer=[];for(let L=0;L<h.mipmaps.length;L++)m.__webglFramebuffer[L]=y.createFramebuffer()}else m.__webglFramebuffer=y.createFramebuffer();if(W)if(t.drawBuffers){const p=L.texture;for(let L=0,t=p.length;L<t;L++){const t=N.get(p[L]);void 0===t.__webglTexture&&(t.__webglTexture=y.createTexture(),z.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(O&&L.samples>0&&!1===r(L)){const N=W?h:[h];m.__webglMultisampledFramebuffer=y.createFramebuffer(),m.__webglColorRenderbuffer=[],p.bindFramebuffer(y.FRAMEBUFFER,m.__webglMultisampledFramebuffer);for(let p=0;p<N.length;p++){const t=N[p];m.__webglColorRenderbuffer[p]=y.createRenderbuffer(),y.bindRenderbuffer(y.RENDERBUFFER,m.__webglColorRenderbuffer[p]);const z=j.convert(t.format,t.colorSpace),O=j.convert(t.type),h=U(t.internalFormat,z,O,t.colorSpace,!0===L.isXRRenderTarget),k=J(L);y.renderbufferStorageMultisample(y.RENDERBUFFER,k,h,L.width,L.height),y.framebufferRenderbuffer(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0+p,y.RENDERBUFFER,m.__webglColorRenderbuffer[p])}y.bindRenderbuffer(y.RENDERBUFFER,null),L.depthBuffer&&(m.__webglDepthRenderbuffer=y.createRenderbuffer(),H(m.__webglDepthRenderbuffer,L,!0)),p.bindFramebuffer(y.FRAMEBUFFER,null)}}if(_){p.bindTexture(y.TEXTURE_CUBE_MAP,k.__webglTexture),l(y.TEXTURE_CUBE_MAP,h,g);for(let p=0;p<6;p++)if(O&&h.mipmaps&&h.mipmaps.length>0)for(let N=0;N<h.mipmaps.length;N++)a(m.__webglFramebuffer[p][N],L,h,y.COLOR_ATTACHMENT0,y.TEXTURE_CUBE_MAP_POSITIVE_X+p,N);else a(m.__webglFramebuffer[p],L,h,y.COLOR_ATTACHMENT0,y.TEXTURE_CUBE_MAP_POSITIVE_X+p,0);d(h,g)&&o(y.TEXTURE_CUBE_MAP),p.unbindTexture()}else if(W){const t=L.texture;for(let j=0,z=t.length;j<z;j++){const z=t[j],O=N.get(z);p.bindTexture(y.TEXTURE_2D,O.__webglTexture),l(y.TEXTURE_2D,z,g),a(m.__webglFramebuffer,L,z,y.COLOR_ATTACHMENT0+j,y.TEXTURE_2D,0),d(z,g)&&o(y.TEXTURE_2D)}p.unbindTexture()}else{let N=y.TEXTURE_2D;if((L.isWebGL3DRenderTarget||L.isWebGLArrayRenderTarget)&&(O?N=L.isWebGL3DRenderTarget?y.TEXTURE_3D:y.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),p.bindTexture(N,k.__webglTexture),l(N,h,g),O&&h.mipmaps&&h.mipmaps.length>0)for(let p=0;p<h.mipmaps.length;p++)a(m.__webglFramebuffer[p],L,h,y.COLOR_ATTACHMENT0,N,p);else a(m.__webglFramebuffer,L,h,y.COLOR_ATTACHMENT0,N,0);d(h,g)&&o(N),p.unbindTexture()}L.depthBuffer&&X(L)},this.updateRenderTargetMipmap=function(L){const t=x(L)||O,j=!0===L.isWebGLMultipleRenderTargets?L.texture:[L.texture];for(let z=0,O=j.length;z<O;z++){const O=j[z];if(d(O,t)){const t=L.isWebGLCubeRenderTarget?y.TEXTURE_CUBE_MAP:y.TEXTURE_2D,j=N.get(O).__webglTexture;p.bindTexture(t,j),o(t),p.unbindTexture()}}},this.updateMultisampleRenderTarget=function(L){if(O&&L.samples>0&&!1===r(L)){const t=L.isWebGLMultipleRenderTargets?L.texture:[L.texture],j=L.width,z=L.height;let O=y.COLOR_BUFFER_BIT;const h=[],m=L.stencilBuffer?y.DEPTH_STENCIL_ATTACHMENT:y.DEPTH_ATTACHMENT,k=N.get(L),_=!0===L.isWebGLMultipleRenderTargets;if(_)for(let L=0;L<t.length;L++)p.bindFramebuffer(y.FRAMEBUFFER,k.__webglMultisampledFramebuffer),y.framebufferRenderbuffer(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0+L,y.RENDERBUFFER,null),p.bindFramebuffer(y.FRAMEBUFFER,k.__webglFramebuffer),y.framebufferTexture2D(y.DRAW_FRAMEBUFFER,y.COLOR_ATTACHMENT0+L,y.TEXTURE_2D,null,0);p.bindFramebuffer(y.READ_FRAMEBUFFER,k.__webglMultisampledFramebuffer),p.bindFramebuffer(y.DRAW_FRAMEBUFFER,k.__webglFramebuffer);for(let p=0;p<t.length;p++){h.push(y.COLOR_ATTACHMENT0+p),L.depthBuffer&&h.push(m);const W=void 0!==k.__ignoreDepthValues&&k.__ignoreDepthValues;if(!1===W&&(L.depthBuffer&&(O|=y.DEPTH_BUFFER_BIT),L.stencilBuffer&&(O|=y.STENCIL_BUFFER_BIT)),_&&y.framebufferRenderbuffer(y.READ_FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.RENDERBUFFER,k.__webglColorRenderbuffer[p]),!0===W&&(y.invalidateFramebuffer(y.READ_FRAMEBUFFER,[m]),y.invalidateFramebuffer(y.DRAW_FRAMEBUFFER,[m])),_){const L=N.get(t[p]).__webglTexture;y.framebufferTexture2D(y.DRAW_FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,L,0)}y.blitFramebuffer(0,0,j,z,0,0,j,z,O,y.NEAREST),g&&y.invalidateFramebuffer(y.READ_FRAMEBUFFER,h)}if(p.bindFramebuffer(y.READ_FRAMEBUFFER,null),p.bindFramebuffer(y.DRAW_FRAMEBUFFER,null),_)for(let L=0;L<t.length;L++){p.bindFramebuffer(y.FRAMEBUFFER,k.__webglMultisampledFramebuffer),y.framebufferRenderbuffer(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0+L,y.RENDERBUFFER,k.__webglColorRenderbuffer[L]);const j=N.get(t[L]).__webglTexture;p.bindFramebuffer(y.FRAMEBUFFER,k.__webglFramebuffer),y.framebufferTexture2D(y.DRAW_FRAMEBUFFER,y.COLOR_ATTACHMENT0+L,y.TEXTURE_2D,j,0)}p.bindFramebuffer(y.DRAW_FRAMEBUFFER,k.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=X,this.setupFrameBufferTexture=a,this.useMultisampledRTT=r}function Ah(y,L,p){const N=p.isWebGL2;return{convert:function(p,t=Lp){let j;if(p===ay)return y.UNSIGNED_BYTE;if(p===Ay)return y.UNSIGNED_SHORT_4_4_4_4;if(p===sy)return y.UNSIGNED_SHORT_5_5_5_1;if(p===Hy)return y.BYTE;if(p===Xy)return y.SHORT;if(p===Jy)return y.UNSIGNED_SHORT;if(p===ry)return y.INT;if(p===Gy)return y.UNSIGNED_INT;if(p===$y)return y.FLOAT;if(p===qy)return N?y.HALF_FLOAT:(j=L.get("OES_texture_half_float"),null!==j?j.HALF_FLOAT_OES:null);if(p===Ky)return y.ALPHA;if(p===by)return y.RGBA;if(p===ny)return y.LUMINANCE;if(p===vy)return y.LUMINANCE_ALPHA;if(p===ey)return y.DEPTH_COMPONENT;if(p===Zy)return y.DEPTH_STENCIL;if(p===Jp)return j=L.get("EXT_sRGB"),null!==j?j.SRGB_ALPHA_EXT:null;if(p===yL)return y.RED;if(p===LL)return y.RED_INTEGER;if(p===pL)return y.RG;if(p===NL)return y.RG_INTEGER;if(p===tL)return y.RGBA_INTEGER;if(p===jL||p===zL||p===OL||p===hL)if(t===pp){if(j=L.get("WEBGL_compressed_texture_s3tc_srgb"),null===j)return null;if(p===jL)return j.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(p===zL)return j.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(p===OL)return j.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(p===hL)return j.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(j=L.get("WEBGL_compressed_texture_s3tc"),null===j)return null;if(p===jL)return j.COMPRESSED_RGB_S3TC_DXT1_EXT;if(p===zL)return j.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(p===OL)return j.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(p===hL)return j.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(p===mL||p===kL||p===_L||p===WL){if(j=L.get("WEBGL_compressed_texture_pvrtc"),null===j)return null;if(p===mL)return j.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(p===kL)return j.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(p===_L)return j.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(p===WL)return j.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(p===gL)return j=L.get("WEBGL_compressed_texture_etc1"),null!==j?j.COMPRESSED_RGB_ETC1_WEBGL:null;if(p===CL||p===QL){if(j=L.get("WEBGL_compressed_texture_etc"),null===j)return null;if(p===CL)return t===pp?j.COMPRESSED_SRGB8_ETC2:j.COMPRESSED_RGB8_ETC2;if(p===QL)return t===pp?j.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:j.COMPRESSED_RGBA8_ETC2_EAC}if(p===TL||p===iL||p===DL||p===wL||p===xL||p===dL||p===oL||p===UL||p===IL||p===VL||p===FL||p===uL||p===SL||p===BL){if(j=L.get("WEBGL_compressed_texture_astc"),null===j)return null;if(p===TL)return t===pp?j.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:j.COMPRESSED_RGBA_ASTC_4x4_KHR;if(p===iL)return t===pp?j.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:j.COMPRESSED_RGBA_ASTC_5x4_KHR;if(p===DL)return t===pp?j.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:j.COMPRESSED_RGBA_ASTC_5x5_KHR;if(p===wL)return t===pp?j.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:j.COMPRESSED_RGBA_ASTC_6x5_KHR;if(p===xL)return t===pp?j.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:j.COMPRESSED_RGBA_ASTC_6x6_KHR;if(p===dL)return t===pp?j.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:j.COMPRESSED_RGBA_ASTC_8x5_KHR;if(p===oL)return t===pp?j.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:j.COMPRESSED_RGBA_ASTC_8x6_KHR;if(p===UL)return t===pp?j.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:j.COMPRESSED_RGBA_ASTC_8x8_KHR;if(p===IL)return t===pp?j.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:j.COMPRESSED_RGBA_ASTC_10x5_KHR;if(p===VL)return t===pp?j.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:j.COMPRESSED_RGBA_ASTC_10x6_KHR;if(p===FL)return t===pp?j.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:j.COMPRESSED_RGBA_ASTC_10x8_KHR;if(p===uL)return t===pp?j.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:j.COMPRESSED_RGBA_ASTC_10x10_KHR;if(p===SL)return t===pp?j.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:j.COMPRESSED_RGBA_ASTC_12x10_KHR;if(p===BL)return t===pp?j.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:j.COMPRESSED_RGBA_ASTC_12x12_KHR}if(p===RL){if(j=L.get("EXT_texture_compression_bptc"),null===j)return null;if(p===RL)return t===pp?j.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:j.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(p===YL||p===EL||p===PL||p===lL){if(j=L.get("EXT_texture_compression_rgtc"),null===j)return null;if(p===RL)return j.COMPRESSED_RED_RGTC1_EXT;if(p===EL)return j.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(p===PL)return j.COMPRESSED_RED_GREEN_RGTC2_EXT;if(p===lL)return j.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return p===cy?N?y.UNSIGNED_INT_24_8:(j=L.get("WEBGL_depth_texture"),null!==j?j.UNSIGNED_INT_24_8_WEBGL:null):void 0!==y[p]?y[p]:null}}}class sh extends jz{constructor(y=[]){super(),this.isArrayCamera=!0,this.cameras=y}}class ch extends at{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Kh={type:"move"};class bh{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ch,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ch,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new fN,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new fN),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ch,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new fN,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new fN),this._grip}dispatchEvent(y){return null!==this._targetRay&&this._targetRay.dispatchEvent(y),null!==this._grip&&this._grip.dispatchEvent(y),null!==this._hand&&this._hand.dispatchEvent(y),this}connect(y){if(y&&y.hand){const L=this._hand;if(L)for(const p of y.hand.values())this._getHandJoint(L,p)}return this.dispatchEvent({type:"connected",data:y}),this}disconnect(y){return this.dispatchEvent({type:"disconnected",data:y}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(y,L,p){let N=null,t=null,j=null;const z=this._targetRay,O=this._grip,h=this._hand;if(y&&"visible-blurred"!==L.session.visibilityState){if(h&&y.hand){j=!0;for(const N of y.hand.values()){const y=L.getJointPose(N,p),t=this._getHandJoint(h,N);null!==y&&(t.matrix.fromArray(y.transform.matrix),t.matrix.decompose(t.position,t.rotation,t.scale),t.matrixWorldNeedsUpdate=!0,t.jointRadius=y.radius),t.visible=null!==y}const N=h.joints["index-finger-tip"],t=h.joints["thumb-tip"],z=N.position.distanceTo(t.position),O=.02,m=.005;h.inputState.pinching&&z>O+m?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:y.handedness,target:this})):!h.inputState.pinching&&z<=O-m&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:y.handedness,target:this}))}else null!==O&&y.gripSpace&&(t=L.getPose(y.gripSpace,p),null!==t&&(O.matrix.fromArray(t.transform.matrix),O.matrix.decompose(O.position,O.rotation,O.scale),O.matrixWorldNeedsUpdate=!0,t.linearVelocity?(O.hasLinearVelocity=!0,O.linearVelocity.copy(t.linearVelocity)):O.hasLinearVelocity=!1,t.angularVelocity?(O.hasAngularVelocity=!0,O.angularVelocity.copy(t.angularVelocity)):O.hasAngularVelocity=!1));null!==z&&(N=L.getPose(y.targetRaySpace,p),null===N&&null!==t&&(N=t),null!==N&&(z.matrix.fromArray(N.transform.matrix),z.matrix.decompose(z.position,z.rotation,z.scale),z.matrixWorldNeedsUpdate=!0,N.linearVelocity?(z.hasLinearVelocity=!0,z.linearVelocity.copy(N.linearVelocity)):z.hasLinearVelocity=!1,N.angularVelocity?(z.hasAngularVelocity=!0,z.angularVelocity.copy(N.angularVelocity)):z.hasAngularVelocity=!1,this.dispatchEvent(Kh)))}return null!==z&&(z.visible=null!==N),null!==O&&(O.visible=null!==t),null!==h&&(h.visible=null!==j),this}_getHandJoint(y,L){if(void 0===y.joints[L.jointName]){const p=new ch;p.matrixAutoUpdate=!1,p.visible=!1,y.joints[L.jointName]=p,y.add(p)}return y.joints[L.jointName]}}class nh extends FN{constructor(y,L,p,N,t,j,z,O,h,m){if((m=void 0!==m?m:ey)!==ey&&m!==Zy)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===p&&m===ey&&(p=Gy),void 0===p&&m===Zy&&(p=cy),super(null,N,t,j,z,O,m,p,h),this.isDepthTexture=!0,this.image={width:y,height:L},this.magFilter=void 0!==z?z:uy,this.minFilter=void 0!==O?O:uy,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(y){return super.copy(y),this.compareFunction=y.compareFunction,this}toJSON(y){const L=super.toJSON(y);return null!==this.compareFunction&&(L.compareFunction=this.compareFunction),L}}class vh extends $p{constructor(y,L){super();const p=this;let N=null,t=1,j=null,z="local-floor",O=1,h=null,m=null,k=null,_=null,W=null,g=null;const C=L.getContextAttributes();let Q=null,T=null;const i=[],D=[],w=new jz;w.layers.enable(1),w.viewport=new uN;const x=new jz;x.layers.enable(2),x.viewport=new uN;const d=[w,x],o=new sh;o.layers.enable(1),o.layers.enable(2);let U=null,I=null;function V(y){const L=D.indexOf(y.inputSource);if(-1===L)return;const p=i[L];void 0!==p&&(p.update(y.inputSource,y.frame,h||j),p.dispatchEvent({type:y.type,data:y.inputSource}))}function F(){N.removeEventListener("select",V),N.removeEventListener("selectstart",V),N.removeEventListener("selectend",V),N.removeEventListener("squeeze",V),N.removeEventListener("squeezestart",V),N.removeEventListener("squeezeend",V),N.removeEventListener("end",F),N.removeEventListener("inputsourceschange",u);for(let y=0;y<i.length;y++){const L=D[y];null!==L&&(D[y]=null,i[y].disconnect(L))}U=null,I=null,y.setRenderTarget(Q),W=null,_=null,k=null,N=null,T=null,E.stop(),p.isPresenting=!1,p.dispatchEvent({type:"sessionend"})}function u(y){for(let L=0;L<y.removed.length;L++){const p=y.removed[L],N=D.indexOf(p);N>=0&&(D[N]=null,i[N].disconnect(p))}for(let L=0;L<y.added.length;L++){const p=y.added[L];let N=D.indexOf(p);if(-1===N){for(let y=0;y<i.length;y++){if(y>=D.length){D.push(p),N=y;break}if(null===D[y]){D[y]=p,N=y;break}}if(-1===N)break}const t=i[N];t&&t.connect(p)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(y){let L=i[y];return void 0===L&&(L=new bh,i[y]=L),L.getTargetRaySpace()},this.getControllerGrip=function(y){let L=i[y];return void 0===L&&(L=new bh,i[y]=L),L.getGripSpace()},this.getHand=function(y){let L=i[y];return void 0===L&&(L=new bh,i[y]=L),L.getHandSpace()},this.setFramebufferScaleFactor=function(y){t=y,!0===p.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(y){z=y,!0===p.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||j},this.setReferenceSpace=function(y){h=y},this.getBaseLayer=function(){return null!==_?_:W},this.getBinding=function(){return k},this.getFrame=function(){return g},this.getSession=function(){return N},this.setSession=async function(m){if(N=m,null!==N){if(Q=y.getRenderTarget(),N.addEventListener("select",V),N.addEventListener("selectstart",V),N.addEventListener("selectend",V),N.addEventListener("squeeze",V),N.addEventListener("squeezestart",V),N.addEventListener("squeezeend",V),N.addEventListener("end",F),N.addEventListener("inputsourceschange",u),!0!==C.xrCompatible&&await L.makeXRCompatible(),void 0===N.renderState.layers||!1===y.capabilities.isWebGL2){const p={antialias:void 0!==N.renderState.layers||C.antialias,alpha:!0,depth:C.depth,stencil:C.stencil,framebufferScaleFactor:t};W=new XRWebGLLayer(N,L,p),N.updateRenderState({baseLayer:W}),T=new BN(W.framebufferWidth,W.framebufferHeight,{format:by,type:ay,colorSpace:y.outputColorSpace,stencilBuffer:C.stencil})}else{let p=null,j=null,z=null;C.depth&&(z=C.stencil?L.DEPTH24_STENCIL8:L.DEPTH_COMPONENT24,p=C.stencil?Zy:ey,j=C.stencil?cy:Gy);const O={colorFormat:L.RGBA8,depthFormat:z,scaleFactor:t};k=new XRWebGLBinding(N,L),_=k.createProjectionLayer(O),N.updateRenderState({layers:[_]}),T=new BN(_.textureWidth,_.textureHeight,{format:by,type:ay,depthTexture:new nh(_.textureWidth,_.textureHeight,j,void 0,void 0,void 0,void 0,void 0,void 0,p),stencilBuffer:C.stencil,colorSpace:y.outputColorSpace,samples:C.antialias?4:0}),y.properties.get(T).__ignoreDepthValues=_.ignoreDepthValues}T.isXRRenderTarget=!0,this.setFoveation(O),h=null,j=await N.requestReferenceSpace(z),E.setContext(N),E.start(),p.isPresenting=!0,p.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==N)return N.environmentBlendMode};const S=new fN,B=new fN;function R(y,L){null===L?y.matrixWorld.copy(y.matrix):y.matrixWorld.multiplyMatrices(L.matrixWorld,y.matrix),y.matrixWorldInverse.copy(y.matrixWorld).invert()}this.updateCamera=function(y){if(null===N)return;o.near=x.near=w.near=y.near,o.far=x.far=w.far=y.far,U===o.near&&I===o.far||(N.updateRenderState({depthNear:o.near,depthFar:o.far}),U=o.near,I=o.far);const L=y.parent,p=o.cameras;R(o,L);for(let y=0;y<p.length;y++)R(p[y],L);2===p.length?function(y,L,p){S.setFromMatrixPosition(L.matrixWorld),B.setFromMatrixPosition(p.matrixWorld);const N=S.distanceTo(B),t=L.projectionMatrix.elements,j=p.projectionMatrix.elements,z=t[14]/(t[10]-1),O=t[14]/(t[10]+1),h=(t[9]+1)/t[5],m=(t[9]-1)/t[5],k=(t[8]-1)/t[0],_=(j[8]+1)/j[0],W=z*k,g=z*_,C=N/(-k+_),Q=C*-k;L.matrixWorld.decompose(y.position,y.quaternion,y.scale),y.translateX(Q),y.translateZ(C),y.matrixWorld.compose(y.position,y.quaternion,y.scale),y.matrixWorldInverse.copy(y.matrixWorld).invert();const T=z+C,i=O+C,D=W-Q,w=g+(N-Q),x=h*O/i*T,d=m*O/i*T;y.projectionMatrix.makePerspective(D,w,x,d,T,i),y.projectionMatrixInverse.copy(y.projectionMatrix).invert()}(o,w,x):o.projectionMatrix.copy(w.projectionMatrix),function(y,L,p){null===p?y.matrix.copy(L.matrixWorld):(y.matrix.copy(p.matrixWorld),y.matrix.invert(),y.matrix.multiply(L.matrixWorld)),y.matrix.decompose(y.position,y.quaternion,y.scale),y.updateMatrixWorld(!0);const N=y.children;for(let y=0,L=N.length;y<L;y++)N[y].updateMatrixWorld(!0);y.projectionMatrix.copy(L.projectionMatrix),y.projectionMatrixInverse.copy(L.projectionMatrixInverse),y.isPerspectiveCamera&&(y.fov=2*cp*Math.atan(1/y.projectionMatrix.elements[5]),y.zoom=1)}(y,o,L)},this.getCamera=function(){return o},this.getFoveation=function(){if(null!==_||null!==W)return O},this.setFoveation=function(y){O=y,null!==_&&(_.fixedFoveation=y),null!==W&&void 0!==W.fixedFoveation&&(W.fixedFoveation=y)};let Y=null;const E=new Dz;E.setAnimationLoop((function(L,N){if(m=N.getViewerPose(h||j),g=N,null!==m){const L=m.views;null!==W&&(y.setRenderTargetFramebuffer(T,W.framebuffer),y.setRenderTarget(T));let p=!1;L.length!==o.cameras.length&&(o.cameras.length=0,p=!0);for(let N=0;N<L.length;N++){const t=L[N];let j=null;if(null!==W)j=W.getViewport(t);else{const L=k.getViewSubImage(_,t);j=L.viewport,0===N&&(y.setRenderTargetTextures(T,L.colorTexture,_.ignoreDepthValues?void 0:L.depthStencilTexture),y.setRenderTarget(T))}let z=d[N];void 0===z&&(z=new jz,z.layers.enable(N),z.viewport=new uN,d[N]=z),z.matrix.fromArray(t.transform.matrix),z.matrix.decompose(z.position,z.quaternion,z.scale),z.projectionMatrix.fromArray(t.projectionMatrix),z.projectionMatrixInverse.copy(z.projectionMatrix).invert(),z.viewport.set(j.x,j.y,j.width,j.height),0===N&&(o.matrix.copy(z.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale)),!0===p&&o.cameras.push(z)}}for(let y=0;y<i.length;y++){const L=D[y],p=i[y];null!==L&&void 0!==p&&p.update(L,N,h||j)}Y&&Y(L,N),N.detectedPlanes&&p.dispatchEvent({type:"planesdetected",data:N}),g=null})),this.setAnimationLoop=function(y){Y=y},this.dispose=function(){}}}function eh(y,L){function p(y,L){!0===y.matrixAutoUpdate&&y.updateMatrix(),L.value.copy(y.matrix)}function N(N,t){N.opacity.value=t.opacity,t.color&&N.diffuse.value.copy(t.color),t.emissive&&N.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(N.map.value=t.map,p(t.map,N.mapTransform)),t.alphaMap&&(N.alphaMap.value=t.alphaMap,p(t.alphaMap,N.alphaMapTransform)),t.bumpMap&&(N.bumpMap.value=t.bumpMap,p(t.bumpMap,N.bumpMapTransform),N.bumpScale.value=t.bumpScale,t.side===R&&(N.bumpScale.value*=-1)),t.normalMap&&(N.normalMap.value=t.normalMap,p(t.normalMap,N.normalMapTransform),N.normalScale.value.copy(t.normalScale),t.side===R&&N.normalScale.value.negate()),t.displacementMap&&(N.displacementMap.value=t.displacementMap,p(t.displacementMap,N.displacementMapTransform),N.displacementScale.value=t.displacementScale,N.displacementBias.value=t.displacementBias),t.emissiveMap&&(N.emissiveMap.value=t.emissiveMap,p(t.emissiveMap,N.emissiveMapTransform)),t.specularMap&&(N.specularMap.value=t.specularMap,p(t.specularMap,N.specularMapTransform)),t.alphaTest>0&&(N.alphaTest.value=t.alphaTest);const j=L.get(t).envMap;if(j&&(N.envMap.value=j,N.flipEnvMap.value=j.isCubeTexture&&!1===j.isRenderTargetTexture?-1:1,N.reflectivity.value=t.reflectivity,N.ior.value=t.ior,N.refractionRatio.value=t.refractionRatio),t.lightMap){N.lightMap.value=t.lightMap;const L=!0===y._useLegacyLights?Math.PI:1;N.lightMapIntensity.value=t.lightMapIntensity*L,p(t.lightMap,N.lightMapTransform)}t.aoMap&&(N.aoMap.value=t.aoMap,N.aoMapIntensity.value=t.aoMapIntensity,p(t.aoMap,N.aoMapTransform))}return{refreshFogUniforms:function(L,p){p.color.getRGB(L.fogColor.value,Zj(y)),p.isFog?(L.fogNear.value=p.near,L.fogFar.value=p.far):p.isFogExp2&&(L.fogDensity.value=p.density)},refreshMaterialUniforms:function(y,t,j,z,O){t.isMeshBasicMaterial||t.isMeshLambertMaterial?N(y,t):t.isMeshToonMaterial?(N(y,t),function(y,L){L.gradientMap&&(y.gradientMap.value=L.gradientMap)}(y,t)):t.isMeshPhongMaterial?(N(y,t),function(y,L){y.specular.value.copy(L.specular),y.shininess.value=Math.max(L.shininess,1e-4)}(y,t)):t.isMeshStandardMaterial?(N(y,t),function(y,N){y.metalness.value=N.metalness,N.metalnessMap&&(y.metalnessMap.value=N.metalnessMap,p(N.metalnessMap,y.metalnessMapTransform)),y.roughness.value=N.roughness,N.roughnessMap&&(y.roughnessMap.value=N.roughnessMap,p(N.roughnessMap,y.roughnessMapTransform));L.get(N).envMap&&(y.envMapIntensity.value=N.envMapIntensity)}(y,t),t.isMeshPhysicalMaterial&&function(y,L,N){y.ior.value=L.ior,L.sheen>0&&(y.sheenColor.value.copy(L.sheenColor).multiplyScalar(L.sheen),y.sheenRoughness.value=L.sheenRoughness,L.sheenColorMap&&(y.sheenColorMap.value=L.sheenColorMap,p(L.sheenColorMap,y.sheenColorMapTransform)),L.sheenRoughnessMap&&(y.sheenRoughnessMap.value=L.sheenRoughnessMap,p(L.sheenRoughnessMap,y.sheenRoughnessMapTransform))),L.clearcoat>0&&(y.clearcoat.value=L.clearcoat,y.clearcoatRoughness.value=L.clearcoatRoughness,L.clearcoatMap&&(y.clearcoatMap.value=L.clearcoatMap,p(L.clearcoatMap,y.clearcoatMapTransform)),L.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=L.clearcoatRoughnessMap,p(L.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),L.clearcoatNormalMap&&(y.clearcoatNormalMap.value=L.clearcoatNormalMap,p(L.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(L.clearcoatNormalScale),L.side===R&&y.clearcoatNormalScale.value.negate())),L.iridescence>0&&(y.iridescence.value=L.iridescence,y.iridescenceIOR.value=L.iridescenceIOR,y.iridescenceThicknessMinimum.value=L.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=L.iridescenceThicknessRange[1],L.iridescenceMap&&(y.iridescenceMap.value=L.iridescenceMap,p(L.iridescenceMap,y.iridescenceMapTransform)),L.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=L.iridescenceThicknessMap,p(L.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),L.transmission>0&&(y.transmission.value=L.transmission,y.transmissionSamplerMap.value=N.texture,y.transmissionSamplerSize.value.set(N.width,N.height),L.transmissionMap&&(y.transmissionMap.value=L.transmissionMap,p(L.transmissionMap,y.transmissionMapTransform)),y.thickness.value=L.thickness,L.thicknessMap&&(y.thicknessMap.value=L.thicknessMap,p(L.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=L.attenuationDistance,y.attenuationColor.value.copy(L.attenuationColor)),L.anisotropy>0&&(y.anisotropyVector.value.set(L.anisotropy*Math.cos(L.anisotropyRotation),L.anisotropy*Math.sin(L.anisotropyRotation)),L.anisotropyMap&&(y.anisotropyMap.value=L.anisotropyMap,p(L.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=L.specularIntensity,y.specularColor.value.copy(L.specularColor),L.specularColorMap&&(y.specularColorMap.value=L.specularColorMap,p(L.specularColorMap,y.specularColorMapTransform)),L.specularIntensityMap&&(y.specularIntensityMap.value=L.specularIntensityMap,p(L.specularIntensityMap,y.specularIntensityMapTransform))}(y,t,O)):t.isMeshMatcapMaterial?(N(y,t),function(y,L){L.matcap&&(y.matcap.value=L.matcap)}(y,t)):t.isMeshDepthMaterial?N(y,t):t.isMeshDistanceMaterial?(N(y,t),function(y,p){const N=L.get(p).light;y.referencePosition.value.setFromMatrixPosition(N.matrixWorld),y.nearDistance.value=N.shadow.camera.near,y.farDistance.value=N.shadow.camera.far}(y,t)):t.isMeshNormalMaterial?N(y,t):t.isLineBasicMaterial?(function(y,L){y.diffuse.value.copy(L.color),y.opacity.value=L.opacity,L.map&&(y.map.value=L.map,p(L.map,y.mapTransform))}(y,t),t.isLineDashedMaterial&&function(y,L){y.dashSize.value=L.dashSize,y.totalSize.value=L.dashSize+L.gapSize,y.scale.value=L.scale}(y,t)):t.isPointsMaterial?function(y,L,N,t){y.diffuse.value.copy(L.color),y.opacity.value=L.opacity,y.size.value=L.size*N,y.scale.value=.5*t,L.map&&(y.map.value=L.map,p(L.map,y.uvTransform)),L.alphaMap&&(y.alphaMap.value=L.alphaMap,p(L.alphaMap,y.alphaMapTransform)),L.alphaTest>0&&(y.alphaTest.value=L.alphaTest)}(y,t,j,z):t.isSpriteMaterial?function(y,L){y.diffuse.value.copy(L.color),y.opacity.value=L.opacity,y.rotation.value=L.rotation,L.map&&(y.map.value=L.map,p(L.map,y.mapTransform)),L.alphaMap&&(y.alphaMap.value=L.alphaMap,p(L.alphaMap,y.alphaMapTransform)),L.alphaTest>0&&(y.alphaTest.value=L.alphaTest)}(y,t):t.isShadowMaterial?(y.color.value.copy(t.color),y.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}}}function Zh(y,L,p,N){let t={},j={},z=[];const O=p.isWebGL2?y.getParameter(y.MAX_UNIFORM_BUFFER_BINDINGS):0;function h(y,L,p){const N=y.value;if(void 0===p[L]){if("number"==typeof N)p[L]=N;else{const y=Array.isArray(N)?N:[N],t=[];for(let L=0;L<y.length;L++)t.push(y[L].clone());p[L]=t}return!0}if("number"==typeof N){if(p[L]!==N)return p[L]=N,!0}else{const y=Array.isArray(p[L])?p[L]:[p[L]],t=Array.isArray(N)?N:[N];for(let L=0;L<y.length;L++){const p=y[L];if(!1===p.equals(t[L]))return p.copy(t[L]),!0}}return!1}function m(y){const L={boundary:0,storage:0};return"number"==typeof y?(L.boundary=4,L.storage=4):y.isVector2?(L.boundary=8,L.storage=8):y.isVector3||y.isColor?(L.boundary=16,L.storage=12):y.isVector4?(L.boundary=16,L.storage=16):y.isMatrix3?(L.boundary=48,L.storage=48):y.isMatrix4?(L.boundary=64,L.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),L}function k(L){const p=L.target;p.removeEventListener("dispose",k);const N=z.indexOf(p.__bindingPointIndex);z.splice(N,1),y.deleteBuffer(t[p.id]),delete t[p.id],delete j[p.id]}return{bind:function(y,L){const p=L.program;N.uniformBlockBinding(y,p)},update:function(p,_){let W=t[p.id];void 0===W&&(function(y){const L=y.uniforms;let p=0;const N=16;let t=0;for(let y=0,j=L.length;y<j;y++){const j=L[y],z={boundary:0,storage:0},O=Array.isArray(j.value)?j.value:[j.value];for(let y=0,L=O.length;y<L;y++){const L=m(O[y]);z.boundary+=L.boundary,z.storage+=L.storage}j.__data=new Float32Array(z.storage/Float32Array.BYTES_PER_ELEMENT),j.__offset=p,y>0&&(t=p%N,0!==t&&N-t-z.boundary<0&&(p+=N-t,j.__offset=p)),p+=z.storage}t=p%N,t>0&&(p+=N-t),y.__size=p,y.__cache={}}(p),W=function(L){const p=function(){for(let y=0;y<O;y++)if(-1===z.indexOf(y))return z.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();L.__bindingPointIndex=p;const N=y.createBuffer(),t=L.__size,j=L.usage;return y.bindBuffer(y.UNIFORM_BUFFER,N),y.bufferData(y.UNIFORM_BUFFER,t,j),y.bindBuffer(y.UNIFORM_BUFFER,null),y.bindBufferBase(y.UNIFORM_BUFFER,p,N),N}(p),t[p.id]=W,p.addEventListener("dispose",k));const g=_.program;N.updateUBOMapping(p,g);const C=L.render.frame;j[p.id]!==C&&(function(L){const p=t[L.id],N=L.uniforms,j=L.__cache;y.bindBuffer(y.UNIFORM_BUFFER,p);for(let L=0,p=N.length;L<p;L++){const p=N[L];if(!0===h(p,L,j)){const L=p.__offset,N=Array.isArray(p.value)?p.value:[p.value];let t=0;for(let j=0;j<N.length;j++){const z=N[j],O=m(z);"number"==typeof z?(p.__data[0]=z,y.bufferSubData(y.UNIFORM_BUFFER,L+t,p.__data)):z.isMatrix3?(p.__data[0]=z.elements[0],p.__data[1]=z.elements[1],p.__data[2]=z.elements[2],p.__data[3]=z.elements[0],p.__data[4]=z.elements[3],p.__data[5]=z.elements[4],p.__data[6]=z.elements[5],p.__data[7]=z.elements[0],p.__data[8]=z.elements[6],p.__data[9]=z.elements[7],p.__data[10]=z.elements[8],p.__data[11]=z.elements[0]):(z.toArray(p.__data,t),t+=O.storage/Float32Array.BYTES_PER_ELEMENT)}y.bufferSubData(y.UNIFORM_BUFFER,L,p.__data)}}y.bindBuffer(y.UNIFORM_BUFFER,null)}(p),j[p.id]=C)},dispose:function(){for(const L in t)y.deleteBuffer(t[L]);z=[],t={},j={}}}}function ym(){const y=kN("canvas");return y.style.display="block",y}class Lm{constructor(y={}){const{canvas:L=ym(),context:p=null,depth:N=!0,stencil:t=!0,alpha:j=!1,antialias:z=!1,premultipliedAlpha:O=!0,preserveDrawingBuffer:h=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:k=!1}=y;let _;this.isWebGLRenderer=!0,_=null!==p?p.getContextAttributes().alpha:j;const W=new Uint32Array(4),g=new Int32Array(4);let C=null,Q=null;const T=[],i=[];this.domElement=L,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=pp,this._useLegacyLights=!1,this.toneMapping=Wy,this.toneMappingExposure=1;const w=this;let x=!1,d=0,o=0,U=null,I=-1,V=null;const F=new uN,u=new uN;let S=null;const E=new pj(0);let P=0,l=L.width,M=L.height,f=1,a=null,H=null;const X=new uN(0,0,l,M),J=new uN(0,0,l,M);let r=!1;const G=new iz;let $=!1,q=!1,A=null;const s=new Wt,c=new tN,K=new fN,b={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function n(){return null===U?f:1}let v,e,Z,yy,Ly,py,Ny,ty,jy,zy,Oy,hy,my,ky,_y,gy,Cy,Qy,Ty,iy,Dy,wy,xy,dy,oy=p;function Uy(y,p){for(let N=0;N<y.length;N++){const t=y[N],j=L.getContext(t,p);if(null!==j)return j}return null}try{const y={alpha:!0,depth:N,stencil:t,antialias:z,premultipliedAlpha:O,preserveDrawingBuffer:h,powerPreference:m,failIfMajorPerformanceCaveat:k};if("setAttribute"in L&&L.setAttribute("data-engine",`three.js r${D}`),L.addEventListener("webglcontextlost",Fy,!1),L.addEventListener("webglcontextrestored",uy,!1),L.addEventListener("webglcontextcreationerror",Sy,!1),null===oy){const L=["webgl2","webgl","experimental-webgl"];if(!0===w.isWebGL1Renderer&&L.shift(),oy=Uy(L,y),null===oy)throw Uy(L)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!=typeof WebGLRenderingContext&&oy instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===oy.getShaderPrecisionFormat&&(oy.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(y){throw console.error("THREE.WebGLRenderer: "+y.message),y}function Iy(){v=new Kz(oy),e=new Sz(oy,v,y),v.init(e),wy=new Ah(oy,v,e),Z=new $h(oy,v,e),yy=new vz(oy),Ly=new uh,py=new qh(oy,v,Z,Ly,e,wy,yy),Ny=new Rz(w),ty=new cz(w),jy=new wz(oy,e),xy=new Fz(oy,v,jy,e),zy=new bz(oy,jy,yy,xy),Oy=new LO(oy,zy,jy,yy),Ty=new yO(oy,e,py),gy=new Bz(Ly),hy=new Fh(w,Ny,ty,v,e,xy,gy),my=new eh(w,Ly),ky=new Yh,_y=new ah(v,e),Qy=new Vz(w,Ny,ty,Z,Oy,_,O),Cy=new Gh(w,Oy,e),dy=new Zh(oy,yy,e,Z),iy=new uz(oy,v,yy,e),Dy=new nz(oy,v,yy,e),yy.programs=hy.programs,w.capabilities=e,w.extensions=v,w.properties=Ly,w.renderLists=ky,w.shadowMap=Cy,w.state=Z,w.info=yy}Iy();const Vy=new vh(w,oy);function Fy(y){y.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function uy(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const y=yy.autoReset,L=Cy.enabled,p=Cy.autoUpdate,N=Cy.needsUpdate,t=Cy.type;Iy(),yy.autoReset=y,Cy.enabled=L,Cy.autoUpdate=p,Cy.needsUpdate=N,Cy.type=t}function Sy(y){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",y.statusMessage)}function By(y){const L=y.target;L.removeEventListener("dispose",By),function(y){(function(y){const L=Ly.get(y).programs;void 0!==L&&(L.forEach((function(y){hy.releaseProgram(y)})),y.isShaderMaterial&&hy.releaseShaderCache(y))})(y),Ly.remove(y)}(L)}this.xr=Vy,this.getContext=function(){return oy},this.getContextAttributes=function(){return oy.getContextAttributes()},this.forceContextLoss=function(){const y=v.get("WEBGL_lose_context");y&&y.loseContext()},this.forceContextRestore=function(){const y=v.get("WEBGL_lose_context");y&&y.restoreContext()},this.getPixelRatio=function(){return f},this.setPixelRatio=function(y){void 0!==y&&(f=y,this.setSize(l,M,!1))},this.getSize=function(y){return y.set(l,M)},this.setSize=function(y,p,N=!0){Vy.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(l=y,M=p,L.width=Math.floor(y*f),L.height=Math.floor(p*f),!0===N&&(L.style.width=y+"px",L.style.height=p+"px"),this.setViewport(0,0,y,p))},this.getDrawingBufferSize=function(y){return y.set(l*f,M*f).floor()},this.setDrawingBufferSize=function(y,p,N){l=y,M=p,f=N,L.width=Math.floor(y*N),L.height=Math.floor(p*N),this.setViewport(0,0,y,p)},this.getCurrentViewport=function(y){return y.copy(F)},this.getViewport=function(y){return y.copy(X)},this.setViewport=function(y,L,p,N){y.isVector4?X.set(y.x,y.y,y.z,y.w):X.set(y,L,p,N),Z.viewport(F.copy(X).multiplyScalar(f).floor())},this.getScissor=function(y){return y.copy(J)},this.setScissor=function(y,L,p,N){y.isVector4?J.set(y.x,y.y,y.z,y.w):J.set(y,L,p,N),Z.scissor(u.copy(J).multiplyScalar(f).floor())},this.getScissorTest=function(){return r},this.setScissorTest=function(y){Z.setScissorTest(r=y)},this.setOpaqueSort=function(y){a=y},this.setTransparentSort=function(y){H=y},this.getClearColor=function(y){return y.copy(Qy.getClearColor())},this.setClearColor=function(){Qy.setClearColor.apply(Qy,arguments)},this.getClearAlpha=function(){return Qy.getClearAlpha()},this.setClearAlpha=function(){Qy.setClearAlpha.apply(Qy,arguments)},this.clear=function(y=!0,L=!0,p=!0){let N=0;if(y){let y=!1;if(null!==U){const L=U.texture.format;y=L===tL||L===NL||L===LL}if(y){const y=U.texture.type,L=y===ay||y===Gy||y===Jy||y===cy||y===Ay||y===sy,p=Qy.getClearColor(),N=Qy.getClearAlpha(),t=p.r,j=p.g,z=p.b;L?(W[0]=t,W[1]=j,W[2]=z,W[3]=N,oy.clearBufferuiv(oy.COLOR,0,W)):(g[0]=t,g[1]=j,g[2]=z,g[3]=N,oy.clearBufferiv(oy.COLOR,0,g))}else N|=oy.COLOR_BUFFER_BIT}L&&(N|=oy.DEPTH_BUFFER_BIT),p&&(N|=oy.STENCIL_BUFFER_BIT),oy.clear(N)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){L.removeEventListener("webglcontextlost",Fy,!1),L.removeEventListener("webglcontextrestored",uy,!1),L.removeEventListener("webglcontextcreationerror",Sy,!1),ky.dispose(),_y.dispose(),Ly.dispose(),Ny.dispose(),ty.dispose(),Oy.dispose(),xy.dispose(),dy.dispose(),hy.dispose(),Vy.dispose(),Vy.removeEventListener("sessionstart",Yy),Vy.removeEventListener("sessionend",Ey),A&&(A.dispose(),A=null),Py.stop()},this.renderBufferDirect=function(y,L,p,N,t,j){null===L&&(L=b);const z=t.isMesh&&t.matrixWorld.determinant()<0,O=function(y,L,p,N,t){!0!==L.isScene&&(L=b),py.resetTextureUnits();const j=L.fog,z=N.isMeshStandardMaterial?L.environment:null,O=null===U?w.outputColorSpace:!0===U.isXRRenderTarget?U.texture.colorSpace:Np,h=(N.isMeshStandardMaterial?ty:Ny).get(N.envMap||z),m=!0===N.vertexColors&&!!p.attributes.color&&4===p.attributes.color.itemSize,k=!!p.attributes.tangent&&(!!N.normalMap||N.anisotropy>0),_=!!p.morphAttributes.position,W=!!p.morphAttributes.normal,g=!!p.morphAttributes.color;let C=Wy;N.toneMapped&&(null!==U&&!0!==U.isXRRenderTarget||(C=w.toneMapping));const T=p.morphAttributes.position||p.morphAttributes.normal||p.morphAttributes.color,i=void 0!==T?T.length:0,D=Ly.get(N),x=Q.state.lights;if(!0===$&&(!0===q||y!==V)){const L=y===V&&N.id===I;gy.setState(N,y,L)}let d=!1;N.version===D.__version?D.needsLights&&D.lightsStateVersion!==x.state.version||D.outputColorSpace!==O||t.isInstancedMesh&&!1===D.instancing?d=!0:t.isInstancedMesh||!0!==D.instancing?t.isSkinnedMesh&&!1===D.skinning?d=!0:t.isSkinnedMesh||!0!==D.skinning?t.isInstancedMesh&&!0===D.instancingColor&&null===t.instanceColor||t.isInstancedMesh&&!1===D.instancingColor&&null!==t.instanceColor||D.envMap!==h||!0===N.fog&&D.fog!==j?d=!0:void 0===D.numClippingPlanes||D.numClippingPlanes===gy.numPlanes&&D.numIntersection===gy.numIntersection?(D.vertexAlphas!==m||D.vertexTangents!==k||D.morphTargets!==_||D.morphNormals!==W||D.morphColors!==g||D.toneMapping!==C||!0===e.isWebGL2&&D.morphTargetsCount!==i)&&(d=!0):d=!0:d=!0:d=!0:(d=!0,D.__version=N.version);let o=D.currentProgram;!0===d&&(o=ry(N,L,t));let F=!1,u=!1,S=!1;const B=o.getUniforms(),R=D.uniforms;if(Z.useProgram(o.program)&&(F=!0,u=!0,S=!0),N.id!==I&&(I=N.id,u=!0),F||V!==y){if(B.setValue(oy,"projectionMatrix",y.projectionMatrix),e.logarithmicDepthBuffer&&B.setValue(oy,"logDepthBufFC",2/(Math.log(y.far+1)/Math.LN2)),V!==y&&(V=y,u=!0,S=!0),N.isShaderMaterial||N.isMeshPhongMaterial||N.isMeshToonMaterial||N.isMeshStandardMaterial||N.envMap){const L=B.map.cameraPosition;void 0!==L&&L.setValue(oy,K.setFromMatrixPosition(y.matrixWorld))}(N.isMeshPhongMaterial||N.isMeshToonMaterial||N.isMeshLambertMaterial||N.isMeshBasicMaterial||N.isMeshStandardMaterial||N.isShaderMaterial)&&B.setValue(oy,"isOrthographic",!0===y.isOrthographicCamera),(N.isMeshPhongMaterial||N.isMeshToonMaterial||N.isMeshLambertMaterial||N.isMeshBasicMaterial||N.isMeshStandardMaterial||N.isShaderMaterial||N.isShadowMaterial||t.isSkinnedMesh)&&B.setValue(oy,"viewMatrix",y.matrixWorldInverse)}if(t.isSkinnedMesh){B.setOptional(oy,t,"bindMatrix"),B.setOptional(oy,t,"bindMatrixInverse");const y=t.skeleton;y&&(e.floatVertexTextures?(null===y.boneTexture&&y.computeBoneTexture(),B.setValue(oy,"boneTexture",y.boneTexture,py),B.setValue(oy,"boneTextureSize",y.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Y=p.morphAttributes;var E,P;if((void 0!==Y.position||void 0!==Y.normal||void 0!==Y.color&&!0===e.isWebGL2)&&Ty.update(t,p,o),(u||D.receiveShadow!==t.receiveShadow)&&(D.receiveShadow=t.receiveShadow,B.setValue(oy,"receiveShadow",t.receiveShadow)),N.isMeshGouraudMaterial&&null!==N.envMap&&(R.envMap.value=h,R.flipEnvMap.value=h.isCubeTexture&&!1===h.isRenderTargetTexture?-1:1),u&&(B.setValue(oy,"toneMappingExposure",w.toneMappingExposure),D.needsLights&&(P=S,(E=R).ambientLightColor.needsUpdate=P,E.lightProbe.needsUpdate=P,E.directionalLights.needsUpdate=P,E.directionalLightShadows.needsUpdate=P,E.pointLights.needsUpdate=P,E.pointLightShadows.needsUpdate=P,E.spotLights.needsUpdate=P,E.spotLightShadows.needsUpdate=P,E.rectAreaLights.needsUpdate=P,E.hemisphereLights.needsUpdate=P),j&&!0===N.fog&&my.refreshFogUniforms(R,j),my.refreshMaterialUniforms(R,N,f,M,A),jh.upload(oy,D.uniformsList,R,py)),N.isShaderMaterial&&!0===N.uniformsNeedUpdate&&(jh.upload(oy,D.uniformsList,R,py),N.uniformsNeedUpdate=!1),N.isSpriteMaterial&&B.setValue(oy,"center",t.center),B.setValue(oy,"modelViewMatrix",t.modelViewMatrix),B.setValue(oy,"normalMatrix",t.normalMatrix),B.setValue(oy,"modelMatrix",t.matrixWorld),N.isShaderMaterial||N.isRawShaderMaterial){const y=N.uniformsGroups;for(let L=0,p=y.length;L<p;L++)if(e.isWebGL2){const p=y[L];dy.update(p,o),dy.bind(p,o)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return o}(y,L,p,N,t);Z.setMaterial(N,z);let h=p.index,m=1;if(!0===N.wireframe){if(h=zy.getWireframeAttribute(p),void 0===h)return;m=2}const k=p.drawRange,_=p.attributes.position;let W=k.start*m,g=(k.start+k.count)*m;null!==j&&(W=Math.max(W,j.start*m),g=Math.min(g,(j.start+j.count)*m)),null!==h?(W=Math.max(W,0),g=Math.min(g,h.count)):null!=_&&(W=Math.max(W,0),g=Math.min(g,_.count));const C=g-W;if(C<0||C===1/0)return;let T;xy.setup(t,N,O,p,h);let i=iy;if(null!==h&&(T=jy.get(h),i=Dy,i.setIndex(T)),t.isMesh)!0===N.wireframe?(Z.setLineWidth(N.wireframeLinewidth*n()),i.setMode(oy.LINES)):i.setMode(oy.TRIANGLES);else if(t.isLine){let y=N.linewidth;void 0===y&&(y=1),Z.setLineWidth(y*n()),t.isLineSegments?i.setMode(oy.LINES):t.isLineLoop?i.setMode(oy.LINE_LOOP):i.setMode(oy.LINE_STRIP)}else t.isPoints?i.setMode(oy.POINTS):t.isSprite&&i.setMode(oy.TRIANGLES);if(t.isInstancedMesh)i.renderInstances(W,C,t.count);else if(p.isInstancedBufferGeometry){const y=void 0!==p._maxInstanceCount?p._maxInstanceCount:1/0,L=Math.min(p.instanceCount,y);i.renderInstances(W,C,L)}else i.render(W,C)},this.compile=function(y,L){function p(y,L,p){!0===y.transparent&&y.side===Y&&!1===y.forceSinglePass?(y.side=R,y.needsUpdate=!0,ry(y,L,p),y.side=B,y.needsUpdate=!0,ry(y,L,p),y.side=Y):ry(y,L,p)}Q=_y.get(y),Q.init(),i.push(Q),y.traverseVisible((function(y){y.isLight&&y.layers.test(L.layers)&&(Q.pushLight(y),y.castShadow&&Q.pushShadow(y))})),Q.setupLights(w._useLegacyLights),y.traverse((function(L){const N=L.material;if(N)if(Array.isArray(N))for(let t=0;t<N.length;t++)p(N[t],y,L);else p(N,y,L)})),i.pop(),Q=null};let Ry=null;function Yy(){Py.stop()}function Ey(){Py.start()}const Py=new Dz;function ly(y,L,p,N){if(!1===y.visible)return;if(y.layers.test(L.layers))if(y.isGroup)p=y.renderOrder;else if(y.isLOD)!0===y.autoUpdate&&y.update(L);else if(y.isLight)Q.pushLight(y),y.castShadow&&Q.pushShadow(y);else if(y.isSprite){if(!y.frustumCulled||G.intersectsSprite(y)){N&&K.setFromMatrixPosition(y.matrixWorld).applyMatrix4(s);const L=Oy.update(y),t=y.material;t.visible&&C.push(y,L,t,p,K.z,null)}}else if((y.isMesh||y.isLine||y.isPoints)&&(!y.frustumCulled||G.intersectsObject(y))){const L=Oy.update(y),t=y.material;if(N&&(void 0!==y.boundingSphere?(null===y.boundingSphere&&y.computeBoundingSphere(),K.copy(y.boundingSphere.center)):(null===L.boundingSphere&&L.computeBoundingSphere(),K.copy(L.boundingSphere.center)),K.applyMatrix4(y.matrixWorld).applyMatrix4(s)),Array.isArray(t)){const N=L.groups;for(let j=0,z=N.length;j<z;j++){const z=N[j],O=t[z.materialIndex];O&&O.visible&&C.push(y,L,O,p,K.z,z)}}else t.visible&&C.push(y,L,t,p,K.z,null)}const t=y.children;for(let y=0,j=t.length;y<j;y++)ly(t[y],L,p,N)}function fy(y,L,p,N){const t=y.opaque,j=y.transmissive,z=y.transparent;Q.setupLightsView(p),!0===$&&gy.setGlobalState(w.clippingPlanes,p),j.length>0&&function(y,L,p,N){const t=e.isWebGL2;null===A&&(A=new BN(1,1,{generateMipmaps:!0,type:v.has("EXT_color_buffer_half_float")?qy:ay,minFilter:My,samples:t?4:0})),w.getDrawingBufferSize(c),t?A.setSize(c.x,c.y):A.setSize(yN(c.x),yN(c.y));const j=w.getRenderTarget();w.setRenderTarget(A),w.getClearColor(E),P=w.getClearAlpha(),P<1&&w.setClearColor(16777215,.5),w.clear();const z=w.toneMapping;w.toneMapping=Wy,Hy(y,p,N),py.updateMultisampleRenderTarget(A),py.updateRenderTargetMipmap(A);let O=!1;for(let y=0,t=L.length;y<t;y++){const t=L[y],j=t.object,z=t.geometry,h=t.material,m=t.group;if(h.side===Y&&j.layers.test(N.layers)){const y=h.side;h.side=R,h.needsUpdate=!0,Xy(j,p,N,z,h,m),h.side=y,h.needsUpdate=!0,O=!0}}!0===O&&(py.updateMultisampleRenderTarget(A),py.updateRenderTargetMipmap(A)),w.setRenderTarget(j),w.setClearColor(E,P),w.toneMapping=z}(t,j,L,p),N&&Z.viewport(F.copy(N)),t.length>0&&Hy(t,L,p),j.length>0&&Hy(j,L,p),z.length>0&&Hy(z,L,p),Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),Z.setPolygonOffset(!1)}function Hy(y,L,p){const N=!0===L.isScene?L.overrideMaterial:null;for(let t=0,j=y.length;t<j;t++){const j=y[t],z=j.object,O=j.geometry,h=null===N?j.material:N,m=j.group;z.layers.test(p.layers)&&Xy(z,L,p,O,h,m)}}function Xy(y,L,p,N,t,j){y.onBeforeRender(w,L,p,N,t,j),y.modelViewMatrix.multiplyMatrices(p.matrixWorldInverse,y.matrixWorld),y.normalMatrix.getNormalMatrix(y.modelViewMatrix),t.onBeforeRender(w,L,p,N,y,j),!0===t.transparent&&t.side===Y&&!1===t.forceSinglePass?(t.side=R,t.needsUpdate=!0,w.renderBufferDirect(p,L,N,t,y,j),t.side=B,t.needsUpdate=!0,w.renderBufferDirect(p,L,N,t,y,j),t.side=Y):w.renderBufferDirect(p,L,N,t,y,j),y.onAfterRender(w,L,p,N,t,j)}function ry(y,L,p){!0!==L.isScene&&(L=b);const N=Ly.get(y),t=Q.state.lights,j=Q.state.shadowsArray,z=t.state.version,O=hy.getParameters(y,t.state,j,L,p),h=hy.getProgramCacheKey(O);let m=N.programs;N.environment=y.isMeshStandardMaterial?L.environment:null,N.fog=L.fog,N.envMap=(y.isMeshStandardMaterial?ty:Ny).get(y.envMap||N.environment),void 0===m&&(y.addEventListener("dispose",By),m=new Map,N.programs=m);let k=m.get(h);if(void 0!==k){if(N.currentProgram===k&&N.lightsStateVersion===z)return Ky(y,O),k}else O.uniforms=hy.getUniforms(y),y.onBuild(p,O,w),y.onBeforeCompile(O,w),k=hy.acquireProgram(O,h),m.set(h,k),N.uniforms=O.uniforms;const _=N.uniforms;(y.isShaderMaterial||y.isRawShaderMaterial)&&!0!==y.clipping||(_.clippingPlanes=gy.uniform),Ky(y,O),N.needsLights=function(y){return y.isMeshLambertMaterial||y.isMeshToonMaterial||y.isMeshPhongMaterial||y.isMeshStandardMaterial||y.isShadowMaterial||y.isShaderMaterial&&!0===y.lights}(y),N.lightsStateVersion=z,N.needsLights&&(_.ambientLightColor.value=t.state.ambient,_.lightProbe.value=t.state.probe,_.directionalLights.value=t.state.directional,_.directionalLightShadows.value=t.state.directionalShadow,_.spotLights.value=t.state.spot,_.spotLightShadows.value=t.state.spotShadow,_.rectAreaLights.value=t.state.rectArea,_.ltc_1.value=t.state.rectAreaLTC1,_.ltc_2.value=t.state.rectAreaLTC2,_.pointLights.value=t.state.point,_.pointLightShadows.value=t.state.pointShadow,_.hemisphereLights.value=t.state.hemi,_.directionalShadowMap.value=t.state.directionalShadowMap,_.directionalShadowMatrix.value=t.state.directionalShadowMatrix,_.spotShadowMap.value=t.state.spotShadowMap,_.spotLightMatrix.value=t.state.spotLightMatrix,_.spotLightMap.value=t.state.spotLightMap,_.pointShadowMap.value=t.state.pointShadowMap,_.pointShadowMatrix.value=t.state.pointShadowMatrix);const W=k.getUniforms(),g=jh.seqWithValue(W.seq,_);return N.currentProgram=k,N.uniformsList=g,k}function Ky(y,L){const p=Ly.get(y);p.outputColorSpace=L.outputColorSpace,p.instancing=L.instancing,p.instancingColor=L.instancingColor,p.skinning=L.skinning,p.morphTargets=L.morphTargets,p.morphNormals=L.morphNormals,p.morphColors=L.morphColors,p.morphTargetsCount=L.morphTargetsCount,p.numClippingPlanes=L.numClippingPlanes,p.numIntersection=L.numClipIntersection,p.vertexAlphas=L.vertexAlphas,p.vertexTangents=L.vertexTangents,p.toneMapping=L.toneMapping}Py.setAnimationLoop((function(y){Ry&&Ry(y)})),"undefined"!=typeof self&&Py.setContext(self),this.setAnimationLoop=function(y){Ry=y,Vy.setAnimationLoop(y),null===y?Py.stop():Py.start()},Vy.addEventListener("sessionstart",Yy),Vy.addEventListener("sessionend",Ey),this.render=function(y,L){if(void 0!==L&&!0!==L.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===x)return;!0===y.matrixWorldAutoUpdate&&y.updateMatrixWorld(),null===L.parent&&!0===L.matrixWorldAutoUpdate&&L.updateMatrixWorld(),!0===Vy.enabled&&!0===Vy.isPresenting&&(!0===Vy.cameraAutoUpdate&&Vy.updateCamera(L),L=Vy.getCamera()),!0===y.isScene&&y.onBeforeRender(w,y,L,U),Q=_y.get(y,i.length),Q.init(),i.push(Q),s.multiplyMatrices(L.projectionMatrix,L.matrixWorldInverse),G.setFromProjectionMatrix(s),q=this.localClippingEnabled,$=gy.init(this.clippingPlanes,q),C=ky.get(y,T.length),C.init(),T.push(C),ly(y,L,0,w.sortObjects),C.finish(),!0===w.sortObjects&&C.sort(a,H),this.info.render.frame++,!0===$&&gy.beginShadows();const p=Q.state.shadowsArray;if(Cy.render(p,y,L),!0===$&&gy.endShadows(),!0===this.info.autoReset&&this.info.reset(),Qy.render(C,y),Q.setupLights(w._useLegacyLights),L.isArrayCamera){const p=L.cameras;for(let L=0,N=p.length;L<N;L++){const N=p[L];fy(C,y,N,N.viewport)}}else fy(C,y,L);null!==U&&(py.updateMultisampleRenderTarget(U),py.updateRenderTargetMipmap(U)),!0===y.isScene&&y.onAfterRender(w,y,L),xy.resetDefaultState(),I=-1,V=null,i.pop(),Q=i.length>0?i[i.length-1]:null,T.pop(),C=T.length>0?T[T.length-1]:null},this.getActiveCubeFace=function(){return d},this.getActiveMipmapLevel=function(){return o},this.getRenderTarget=function(){return U},this.setRenderTargetTextures=function(y,L,p){Ly.get(y.texture).__webglTexture=L,Ly.get(y.depthTexture).__webglTexture=p;const N=Ly.get(y);N.__hasExternalTextures=!0,N.__hasExternalTextures&&(N.__autoAllocateDepthBuffer=void 0===p,N.__autoAllocateDepthBuffer||!0===v.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),N.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(y,L){const p=Ly.get(y);p.__webglFramebuffer=L,p.__useDefaultFramebuffer=void 0===L},this.setRenderTarget=function(y,L=0,p=0){U=y,d=L,o=p;let N=!0,t=null,j=!1,z=!1;if(y){const O=Ly.get(y);void 0!==O.__useDefaultFramebuffer?(Z.bindFramebuffer(oy.FRAMEBUFFER,null),N=!1):void 0===O.__webglFramebuffer?py.setupRenderTarget(y):O.__hasExternalTextures&&py.rebindTextures(y,Ly.get(y.texture).__webglTexture,Ly.get(y.depthTexture).__webglTexture);const h=y.texture;(h.isData3DTexture||h.isDataArrayTexture||h.isCompressedArrayTexture)&&(z=!0);const m=Ly.get(y).__webglFramebuffer;y.isWebGLCubeRenderTarget?(t=Array.isArray(m[L])?m[L][p]:m[L],j=!0):t=e.isWebGL2&&y.samples>0&&!1===py.useMultisampledRTT(y)?Ly.get(y).__webglMultisampledFramebuffer:Array.isArray(m)?m[p]:m,F.copy(y.viewport),u.copy(y.scissor),S=y.scissorTest}else F.copy(X).multiplyScalar(f).floor(),u.copy(J).multiplyScalar(f).floor(),S=r;if(Z.bindFramebuffer(oy.FRAMEBUFFER,t)&&e.drawBuffers&&N&&Z.drawBuffers(y,t),Z.viewport(F),Z.scissor(u),Z.setScissorTest(S),j){const N=Ly.get(y.texture);oy.framebufferTexture2D(oy.FRAMEBUFFER,oy.COLOR_ATTACHMENT0,oy.TEXTURE_CUBE_MAP_POSITIVE_X+L,N.__webglTexture,p)}else if(z){const N=Ly.get(y.texture),t=L||0;oy.framebufferTextureLayer(oy.FRAMEBUFFER,oy.COLOR_ATTACHMENT0,N.__webglTexture,p||0,t)}I=-1},this.readRenderTargetPixels=function(y,L,p,N,t,j,z){if(!y||!y.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let O=Ly.get(y).__webglFramebuffer;if(y.isWebGLCubeRenderTarget&&void 0!==z&&(O=O[z]),O){Z.bindFramebuffer(oy.FRAMEBUFFER,O);try{const z=y.texture,O=z.format,h=z.type;if(O!==by&&wy.convert(O)!==oy.getParameter(oy.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const m=h===qy&&(v.has("EXT_color_buffer_half_float")||e.isWebGL2&&v.has("EXT_color_buffer_float"));if(!(h===ay||wy.convert(h)===oy.getParameter(oy.IMPLEMENTATION_COLOR_READ_TYPE)||h===$y&&(e.isWebGL2||v.has("OES_texture_float")||v.has("WEBGL_color_buffer_float"))||m))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");L>=0&&L<=y.width-N&&p>=0&&p<=y.height-t&&oy.readPixels(L,p,N,t,wy.convert(O),wy.convert(h),j)}finally{const y=null!==U?Ly.get(U).__webglFramebuffer:null;Z.bindFramebuffer(oy.FRAMEBUFFER,y)}}},this.copyFramebufferToTexture=function(y,L,p=0){const N=Math.pow(2,-p),t=Math.floor(L.image.width*N),j=Math.floor(L.image.height*N);py.setTexture2D(L,0),oy.copyTexSubImage2D(oy.TEXTURE_2D,p,0,0,y.x,y.y,t,j),Z.unbindTexture()},this.copyTextureToTexture=function(y,L,p,N=0){const t=L.image.width,j=L.image.height,z=wy.convert(p.format),O=wy.convert(p.type);py.setTexture2D(p,0),oy.pixelStorei(oy.UNPACK_FLIP_Y_WEBGL,p.flipY),oy.pixelStorei(oy.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p.premultiplyAlpha),oy.pixelStorei(oy.UNPACK_ALIGNMENT,p.unpackAlignment),L.isDataTexture?oy.texSubImage2D(oy.TEXTURE_2D,N,y.x,y.y,t,j,z,O,L.image.data):L.isCompressedTexture?oy.compressedTexSubImage2D(oy.TEXTURE_2D,N,y.x,y.y,L.mipmaps[0].width,L.mipmaps[0].height,z,L.mipmaps[0].data):oy.texSubImage2D(oy.TEXTURE_2D,N,y.x,y.y,z,O,L.image),0===N&&p.generateMipmaps&&oy.generateMipmap(oy.TEXTURE_2D),Z.unbindTexture()},this.copyTextureToTexture3D=function(y,L,p,N,t=0){if(w.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const j=y.max.x-y.min.x+1,z=y.max.y-y.min.y+1,O=y.max.z-y.min.z+1,h=wy.convert(N.format),m=wy.convert(N.type);let k;if(N.isData3DTexture)py.setTexture3D(N,0),k=oy.TEXTURE_3D;else{if(!N.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");py.setTexture2DArray(N,0),k=oy.TEXTURE_2D_ARRAY}oy.pixelStorei(oy.UNPACK_FLIP_Y_WEBGL,N.flipY),oy.pixelStorei(oy.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),oy.pixelStorei(oy.UNPACK_ALIGNMENT,N.unpackAlignment);const _=oy.getParameter(oy.UNPACK_ROW_LENGTH),W=oy.getParameter(oy.UNPACK_IMAGE_HEIGHT),g=oy.getParameter(oy.UNPACK_SKIP_PIXELS),C=oy.getParameter(oy.UNPACK_SKIP_ROWS),Q=oy.getParameter(oy.UNPACK_SKIP_IMAGES),T=p.isCompressedTexture?p.mipmaps[0]:p.image;oy.pixelStorei(oy.UNPACK_ROW_LENGTH,T.width),oy.pixelStorei(oy.UNPACK_IMAGE_HEIGHT,T.height),oy.pixelStorei(oy.UNPACK_SKIP_PIXELS,y.min.x),oy.pixelStorei(oy.UNPACK_SKIP_ROWS,y.min.y),oy.pixelStorei(oy.UNPACK_SKIP_IMAGES,y.min.z),p.isDataTexture||p.isData3DTexture?oy.texSubImage3D(k,t,L.x,L.y,L.z,j,z,O,h,m,T.data):p.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),oy.compressedTexSubImage3D(k,t,L.x,L.y,L.z,j,z,O,h,T.data)):oy.texSubImage3D(k,t,L.x,L.y,L.z,j,z,O,h,m,T),oy.pixelStorei(oy.UNPACK_ROW_LENGTH,_),oy.pixelStorei(oy.UNPACK_IMAGE_HEIGHT,W),oy.pixelStorei(oy.UNPACK_SKIP_PIXELS,g),oy.pixelStorei(oy.UNPACK_SKIP_ROWS,C),oy.pixelStorei(oy.UNPACK_SKIP_IMAGES,Q),0===t&&N.generateMipmaps&&oy.generateMipmap(k),Z.unbindTexture()},this.initTexture=function(y){y.isCubeTexture?py.setTextureCube(y,0):y.isData3DTexture?py.setTexture3D(y,0):y.isDataArrayTexture||y.isCompressedArrayTexture?py.setTexture2DArray(y,0):py.setTexture2D(y,0),Z.unbindTexture()},this.resetState=function(){d=0,o=0,U=null,Z.reset(),xy.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return rp}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(y){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!y}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===pp?nL:bL}set outputEncoding(y){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=y===nL?pp:Np}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(y){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=y}}class pm extends Lm{}pm.prototype.isWebGL1Renderer=!0;class Nm{constructor(y,L=25e-5){this.isFogExp2=!0,this.name="",this.color=new pj(y),this.density=L}clone(){return new Nm(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class tm{constructor(y,L=1,p=1e3){this.isFog=!0,this.name="",this.color=new pj(y),this.near=L,this.far=p}clone(){return new tm(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class jm extends at{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(y,L){return super.copy(y,L),null!==y.background&&(this.background=y.background.clone()),null!==y.environment&&(this.environment=y.environment.clone()),null!==y.fog&&(this.fog=y.fog.clone()),this.backgroundBlurriness=y.backgroundBlurriness,this.backgroundIntensity=y.backgroundIntensity,null!==y.overrideMaterial&&(this.overrideMaterial=y.overrideMaterial.clone()),this.matrixAutoUpdate=y.matrixAutoUpdate,this}toJSON(y){const L=super.toJSON(y);return null!==this.fog&&(L.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(L.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(L.object.backgroundIntensity=this.backgroundIntensity),L}}class zm{constructor(y,L){this.isInterleavedBuffer=!0,this.array=y,this.stride=L,this.count=void 0!==y?y.length/L:0,this.usage=Bp,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Kp()}onUploadCallback(){}set needsUpdate(y){!0===y&&this.version++}setUsage(y){return this.usage=y,this}copy(y){return this.array=new y.array.constructor(y.array),this.count=y.count,this.stride=y.stride,this.usage=y.usage,this}copyAt(y,L,p){y*=this.stride,p*=L.stride;for(let N=0,t=this.stride;N<t;N++)this.array[y+N]=L.array[p+N];return this}set(y,L=0){return this.array.set(y,L),this}clone(y){void 0===y.arrayBuffers&&(y.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Kp()),void 0===y.arrayBuffers[this.array.buffer._uuid]&&(y.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const L=new this.array.constructor(y.arrayBuffers[this.array.buffer._uuid]),p=new this.constructor(L,this.stride);return p.setUsage(this.usage),p}onUpload(y){return this.onUploadCallback=y,this}toJSON(y){return void 0===y.arrayBuffers&&(y.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Kp()),void 0===y.arrayBuffers[this.array.buffer._uuid]&&(y.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Om=new fN;class hm{constructor(y,L,p,N=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=y,this.itemSize=L,this.offset=p,this.normalized=N}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(y){this.data.needsUpdate=y}applyMatrix4(y){for(let L=0,p=this.data.count;L<p;L++)Om.fromBufferAttribute(this,L),Om.applyMatrix4(y),this.setXYZ(L,Om.x,Om.y,Om.z);return this}applyNormalMatrix(y){for(let L=0,p=this.count;L<p;L++)Om.fromBufferAttribute(this,L),Om.applyNormalMatrix(y),this.setXYZ(L,Om.x,Om.y,Om.z);return this}transformDirection(y){for(let L=0,p=this.count;L<p;L++)Om.fromBufferAttribute(this,L),Om.transformDirection(y),this.setXYZ(L,Om.x,Om.y,Om.z);return this}setX(y,L){return this.normalized&&(L=pN(L,this.array)),this.data.array[y*this.data.stride+this.offset]=L,this}setY(y,L){return this.normalized&&(L=pN(L,this.array)),this.data.array[y*this.data.stride+this.offset+1]=L,this}setZ(y,L){return this.normalized&&(L=pN(L,this.array)),this.data.array[y*this.data.stride+this.offset+2]=L,this}setW(y,L){return this.normalized&&(L=pN(L,this.array)),this.data.array[y*this.data.stride+this.offset+3]=L,this}getX(y){let L=this.data.array[y*this.data.stride+this.offset];return this.normalized&&(L=LN(L,this.array)),L}getY(y){let L=this.data.array[y*this.data.stride+this.offset+1];return this.normalized&&(L=LN(L,this.array)),L}getZ(y){let L=this.data.array[y*this.data.stride+this.offset+2];return this.normalized&&(L=LN(L,this.array)),L}getW(y){let L=this.data.array[y*this.data.stride+this.offset+3];return this.normalized&&(L=LN(L,this.array)),L}setXY(y,L,p){return y=y*this.data.stride+this.offset,this.normalized&&(L=pN(L,this.array),p=pN(p,this.array)),this.data.array[y+0]=L,this.data.array[y+1]=p,this}setXYZ(y,L,p,N){return y=y*this.data.stride+this.offset,this.normalized&&(L=pN(L,this.array),p=pN(p,this.array),N=pN(N,this.array)),this.data.array[y+0]=L,this.data.array[y+1]=p,this.data.array[y+2]=N,this}setXYZW(y,L,p,N,t){return y=y*this.data.stride+this.offset,this.normalized&&(L=pN(L,this.array),p=pN(p,this.array),N=pN(N,this.array),t=pN(t,this.array)),this.data.array[y+0]=L,this.data.array[y+1]=p,this.data.array[y+2]=N,this.data.array[y+3]=t,this}clone(y){if(void 0===y){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const y=[];for(let L=0;L<this.count;L++){const p=L*this.data.stride+this.offset;for(let L=0;L<this.itemSize;L++)y.push(this.data.array[p+L])}return new Wj(new this.array.constructor(y),this.itemSize,this.normalized)}return void 0===y.interleavedBuffers&&(y.interleavedBuffers={}),void 0===y.interleavedBuffers[this.data.uuid]&&(y.interleavedBuffers[this.data.uuid]=this.data.clone(y)),new hm(y.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(y){if(void 0===y){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const y=[];for(let L=0;L<this.count;L++){const p=L*this.data.stride+this.offset;for(let L=0;L<this.itemSize;L++)y.push(this.data.array[p+L])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:y,normalized:this.normalized}}return void 0===y.interleavedBuffers&&(y.interleavedBuffers={}),void 0===y.interleavedBuffers[this.data.uuid]&&(y.interleavedBuffers[this.data.uuid]=this.data.toJSON(y)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class mm extends vt{constructor(y){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new pj(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(y)}copy(y){return super.copy(y),this.color.copy(y.color),this.map=y.map,this.alphaMap=y.alphaMap,this.rotation=y.rotation,this.sizeAttenuation=y.sizeAttenuation,this.fog=y.fog,this}}let km;const _m=new fN,Wm=new fN,gm=new fN,Cm=new tN,Qm=new tN,Tm=new Wt,im=new fN,Dm=new fN,wm=new fN,xm=new tN,dm=new tN,om=new tN;class Um extends at{constructor(y){if(super(),this.isSprite=!0,this.type="Sprite",void 0===km){km=new Rj;const y=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),L=new zm(y,5);km.setIndex([0,1,2,0,2,3]),km.setAttribute("position",new hm(L,3,0,!1)),km.setAttribute("uv",new hm(L,2,3,!1))}this.geometry=km,this.material=void 0!==y?y:new mm,this.center=new tN(.5,.5)}raycast(y,L){null===y.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Wm.setFromMatrixScale(this.matrixWorld),Tm.copy(y.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(y.camera.matrixWorldInverse,this.matrixWorld),gm.setFromMatrixPosition(this.modelViewMatrix),y.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Wm.multiplyScalar(-gm.z);const p=this.material.rotation;let N,t;0!==p&&(t=Math.cos(p),N=Math.sin(p));const j=this.center;Im(im.set(-.5,-.5,0),gm,j,Wm,N,t),Im(Dm.set(.5,-.5,0),gm,j,Wm,N,t),Im(wm.set(.5,.5,0),gm,j,Wm,N,t),xm.set(0,0),dm.set(1,0),om.set(1,1);let z=y.ray.intersectTriangle(im,Dm,wm,!1,_m);if(null===z&&(Im(Dm.set(-.5,.5,0),gm,j,Wm,N,t),dm.set(0,1),z=y.ray.intersectTriangle(im,wm,Dm,!1,_m),null===z))return;const O=y.ray.origin.distanceTo(_m);O<y.near||O>y.far||L.push({distance:O,point:_m.clone(),uv:bt.getInterpolation(_m,im,Dm,wm,xm,dm,om,new tN),face:null,object:this})}copy(y,L){return super.copy(y,L),void 0!==y.center&&this.center.copy(y.center),this.material=y.material,this}}function Im(y,L,p,N,t,j){Cm.subVectors(y,p).addScalar(.5).multiply(N),void 0!==t?(Qm.x=j*Cm.x-t*Cm.y,Qm.y=t*Cm.x+j*Cm.y):Qm.copy(Cm),y.copy(L),y.x+=Qm.x,y.y+=Qm.y,y.applyMatrix4(Tm)}const Vm=new fN,Fm=new fN;class um extends at{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(y){super.copy(y,!1);const L=y.levels;for(let y=0,p=L.length;y<p;y++){const p=L[y];this.addLevel(p.object.clone(),p.distance,p.hysteresis)}return this.autoUpdate=y.autoUpdate,this}addLevel(y,L=0,p=0){L=Math.abs(L);const N=this.levels;let t;for(t=0;t<N.length&&!(L<N[t].distance);t++);return N.splice(t,0,{distance:L,hysteresis:p,object:y}),this.add(y),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(y){const L=this.levels;if(L.length>0){let p,N;for(p=1,N=L.length;p<N;p++){let N=L[p].distance;if(L[p].object.visible&&(N-=N*L[p].hysteresis),y<N)break}return L[p-1].object}return null}raycast(y,L){if(this.levels.length>0){Vm.setFromMatrixPosition(this.matrixWorld);const p=y.ray.origin.distanceTo(Vm);this.getObjectForDistance(p).raycast(y,L)}}update(y){const L=this.levels;if(L.length>1){Vm.setFromMatrixPosition(y.matrixWorld),Fm.setFromMatrixPosition(this.matrixWorld);const p=Vm.distanceTo(Fm)/y.zoom;let N,t;for(L[0].object.visible=!0,N=1,t=L.length;N<t;N++){let y=L[N].distance;if(L[N].object.visible&&(y-=y*L[N].hysteresis),!(p>=y))break;L[N-1].object.visible=!1,L[N].object.visible=!0}for(this._currentLevel=N-1;N<t;N++)L[N].object.visible=!1}}toJSON(y){const L=super.toJSON(y);!1===this.autoUpdate&&(L.object.autoUpdate=!1),L.object.levels=[];const p=this.levels;for(let y=0,N=p.length;y<N;y++){const N=p[y];L.object.levels.push({object:N.object.uuid,distance:N.distance,hysteresis:N.hysteresis})}return L}}const Sm=new fN,Bm=new uN,Rm=new uN,Ym=new fN,Em=new Wt,Pm=new fN,lm=new Nt,Mm=new Wt,fm=new _t;class am extends Kj{constructor(y,L){super(y,L),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Wt,this.bindMatrixInverse=new Wt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const y=this.geometry;null===this.boundingBox&&(this.boundingBox=new XN),this.boundingBox.makeEmpty();const L=y.getAttribute("position");for(let y=0;y<L.count;y++)Pm.fromBufferAttribute(L,y),this.applyBoneTransform(y,Pm),this.boundingBox.expandByPoint(Pm)}computeBoundingSphere(){const y=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Nt),this.boundingSphere.makeEmpty();const L=y.getAttribute("position");for(let y=0;y<L.count;y++)Pm.fromBufferAttribute(L,y),this.applyBoneTransform(y,Pm),this.boundingSphere.expandByPoint(Pm)}copy(y,L){return super.copy(y,L),this.bindMode=y.bindMode,this.bindMatrix.copy(y.bindMatrix),this.bindMatrixInverse.copy(y.bindMatrixInverse),this.skeleton=y.skeleton,null!==y.boundingBox&&(this.boundingBox=y.boundingBox.clone()),null!==y.boundingSphere&&(this.boundingSphere=y.boundingSphere.clone()),this}raycast(y,L){const p=this.material,N=this.matrixWorld;void 0!==p&&(null===this.boundingSphere&&this.computeBoundingSphere(),lm.copy(this.boundingSphere),lm.applyMatrix4(N),!1!==y.ray.intersectsSphere(lm)&&(Mm.copy(N).invert(),fm.copy(y.ray).applyMatrix4(Mm),null!==this.boundingBox&&!1===fm.intersectsBox(this.boundingBox)||this._computeIntersections(y,L,fm)))}getVertexPosition(y,L){return super.getVertexPosition(y,L),this.applyBoneTransform(y,L),L}bind(y,L){this.skeleton=y,void 0===L&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),L=this.matrixWorld),this.bindMatrix.copy(L),this.bindMatrixInverse.copy(L).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const y=new uN,L=this.geometry.attributes.skinWeight;for(let p=0,N=L.count;p<N;p++){y.fromBufferAttribute(L,p);const N=1/y.manhattanLength();N!==1/0?y.multiplyScalar(N):y.set(1,0,0,0),L.setXYZW(p,y.x,y.y,y.z,y.w)}}updateMatrixWorld(y){super.updateMatrixWorld(y),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(y,L){const p=this.skeleton,N=this.geometry;Bm.fromBufferAttribute(N.attributes.skinIndex,y),Rm.fromBufferAttribute(N.attributes.skinWeight,y),Sm.copy(L).applyMatrix4(this.bindMatrix),L.set(0,0,0);for(let y=0;y<4;y++){const N=Rm.getComponent(y);if(0!==N){const t=Bm.getComponent(y);Em.multiplyMatrices(p.bones[t].matrixWorld,p.boneInverses[t]),L.addScaledVector(Ym.copy(Sm).applyMatrix4(Em),N)}}return L.applyMatrix4(this.bindMatrixInverse)}boneTransform(y,L){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(y,L)}}class Hm extends at{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Xm extends FN{constructor(y=null,L=1,p=1,N,t,j,z,O,h=uy,m=uy,k,_){super(null,j,z,O,h,m,N,t,k,_),this.isDataTexture=!0,this.image={data:y,width:L,height:p},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Jm=new Wt,rm=new Wt;class Gm{constructor(y=[],L=[]){this.uuid=Kp(),this.bones=y.slice(0),this.boneInverses=L,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const y=this.bones,L=this.boneInverses;if(this.boneMatrices=new Float32Array(16*y.length),0===L.length)this.calculateInverses();else if(y.length!==L.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let y=0,L=this.bones.length;y<L;y++)this.boneInverses.push(new Wt)}}calculateInverses(){this.boneInverses.length=0;for(let y=0,L=this.bones.length;y<L;y++){const L=new Wt;this.bones[y]&&L.copy(this.bones[y].matrixWorld).invert(),this.boneInverses.push(L)}}pose(){for(let y=0,L=this.bones.length;y<L;y++){const L=this.bones[y];L&&L.matrixWorld.copy(this.boneInverses[y]).invert()}for(let y=0,L=this.bones.length;y<L;y++){const L=this.bones[y];L&&(L.parent&&L.parent.isBone?(L.matrix.copy(L.parent.matrixWorld).invert(),L.matrix.multiply(L.matrixWorld)):L.matrix.copy(L.matrixWorld),L.matrix.decompose(L.position,L.quaternion,L.scale))}}update(){const y=this.bones,L=this.boneInverses,p=this.boneMatrices,N=this.boneTexture;for(let N=0,t=y.length;N<t;N++){const t=y[N]?y[N].matrixWorld:rm;Jm.multiplyMatrices(t,L[N]),Jm.toArray(p,16*N)}null!==N&&(N.needsUpdate=!0)}clone(){return new Gm(this.bones,this.boneInverses)}computeBoneTexture(){let y=Math.sqrt(4*this.bones.length);y=Zp(y),y=Math.max(y,4);const L=new Float32Array(y*y*4);L.set(this.boneMatrices);const p=new Xm(L,y,y,by,$y);return p.needsUpdate=!0,this.boneMatrices=L,this.boneTexture=p,this.boneTextureSize=y,this}getBoneByName(y){for(let L=0,p=this.bones.length;L<p;L++){const p=this.bones[L];if(p.name===y)return p}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(y,L){this.uuid=y.uuid;for(let p=0,N=y.bones.length;p<N;p++){const N=y.bones[p];let t=L[N];void 0===t&&(console.warn("THREE.Skeleton: No bone found with UUID:",N),t=new Hm),this.bones.push(t),this.boneInverses.push((new Wt).fromArray(y.boneInverses[p]))}return this.init(),this}toJSON(){const y={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};y.uuid=this.uuid;const L=this.bones,p=this.boneInverses;for(let N=0,t=L.length;N<t;N++){const t=L[N];y.bones.push(t.uuid);const j=p[N];y.boneInverses.push(j.toArray())}return y}}class $m extends Wj{constructor(y,L,p,N=1){super(y,L,p),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=N}copy(y){return super.copy(y),this.meshPerAttribute=y.meshPerAttribute,this}toJSON(){const y=super.toJSON();return y.meshPerAttribute=this.meshPerAttribute,y.isInstancedBufferAttribute=!0,y}}const qm=new Wt,Am=new Wt,sm=[],cm=new XN,Km=new Wt,bm=new Kj,nm=new Nt;class vm extends Kj{constructor(y,L,p){super(y,L),this.isInstancedMesh=!0,this.instanceMatrix=new $m(new Float32Array(16*p),16),this.instanceColor=null,this.count=p,this.boundingBox=null,this.boundingSphere=null;for(let y=0;y<p;y++)this.setMatrixAt(y,Km)}computeBoundingBox(){const y=this.geometry,L=this.count;null===this.boundingBox&&(this.boundingBox=new XN),null===y.boundingBox&&y.computeBoundingBox(),this.boundingBox.makeEmpty();for(let p=0;p<L;p++)this.getMatrixAt(p,qm),cm.copy(y.boundingBox).applyMatrix4(qm),this.boundingBox.union(cm)}computeBoundingSphere(){const y=this.geometry,L=this.count;null===this.boundingSphere&&(this.boundingSphere=new Nt),null===y.boundingSphere&&y.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let p=0;p<L;p++)this.getMatrixAt(p,qm),nm.copy(y.boundingSphere).applyMatrix4(qm),this.boundingSphere.union(nm)}copy(y,L){return super.copy(y,L),this.instanceMatrix.copy(y.instanceMatrix),null!==y.instanceColor&&(this.instanceColor=y.instanceColor.clone()),this.count=y.count,null!==y.boundingBox&&(this.boundingBox=y.boundingBox.clone()),null!==y.boundingSphere&&(this.boundingSphere=y.boundingSphere.clone()),this}getColorAt(y,L){L.fromArray(this.instanceColor.array,3*y)}getMatrixAt(y,L){L.fromArray(this.instanceMatrix.array,16*y)}raycast(y,L){const p=this.matrixWorld,N=this.count;if(bm.geometry=this.geometry,bm.material=this.material,void 0!==bm.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),nm.copy(this.boundingSphere),nm.applyMatrix4(p),!1!==y.ray.intersectsSphere(nm)))for(let t=0;t<N;t++){this.getMatrixAt(t,qm),Am.multiplyMatrices(p,qm),bm.matrixWorld=Am,bm.raycast(y,sm);for(let y=0,p=sm.length;y<p;y++){const p=sm[y];p.instanceId=t,p.object=this,L.push(p)}sm.length=0}}setColorAt(y,L){null===this.instanceColor&&(this.instanceColor=new $m(new Float32Array(3*this.instanceMatrix.count),3)),L.toArray(this.instanceColor.array,3*y)}setMatrixAt(y,L){L.toArray(this.instanceMatrix.array,16*y)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class em extends vt{constructor(y){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new pj(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(y)}copy(y){return super.copy(y),this.color.copy(y.color),this.map=y.map,this.linewidth=y.linewidth,this.linecap=y.linecap,this.linejoin=y.linejoin,this.fog=y.fog,this}}const Zm=new fN,yk=new fN,Lk=new Wt,pk=new _t,Nk=new Nt;class tk extends at{constructor(y=new Rj,L=new em){super(),this.isLine=!0,this.type="Line",this.geometry=y,this.material=L,this.updateMorphTargets()}copy(y,L){return super.copy(y,L),this.material=y.material,this.geometry=y.geometry,this}computeLineDistances(){const y=this.geometry;if(null===y.index){const L=y.attributes.position,p=[0];for(let y=1,N=L.count;y<N;y++)Zm.fromBufferAttribute(L,y-1),yk.fromBufferAttribute(L,y),p[y]=p[y-1],p[y]+=Zm.distanceTo(yk);y.setAttribute("lineDistance",new dj(p,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(y,L){const p=this.geometry,N=this.matrixWorld,t=y.params.Line.threshold,j=p.drawRange;if(null===p.boundingSphere&&p.computeBoundingSphere(),Nk.copy(p.boundingSphere),Nk.applyMatrix4(N),Nk.radius+=t,!1===y.ray.intersectsSphere(Nk))return;Lk.copy(N).invert(),pk.copy(y.ray).applyMatrix4(Lk);const z=t/((this.scale.x+this.scale.y+this.scale.z)/3),O=z*z,h=new fN,m=new fN,k=new fN,_=new fN,W=this.isLineSegments?2:1,g=p.index,C=p.attributes.position;if(null!==g)for(let p=Math.max(0,j.start),N=Math.min(g.count,j.start+j.count)-1;p<N;p+=W){const N=g.getX(p),t=g.getX(p+1);if(h.fromBufferAttribute(C,N),m.fromBufferAttribute(C,t),pk.distanceSqToSegment(h,m,_,k)>O)continue;_.applyMatrix4(this.matrixWorld);const j=y.ray.origin.distanceTo(_);j<y.near||j>y.far||L.push({distance:j,point:k.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}else for(let p=Math.max(0,j.start),N=Math.min(C.count,j.start+j.count)-1;p<N;p+=W){if(h.fromBufferAttribute(C,p),m.fromBufferAttribute(C,p+1),pk.distanceSqToSegment(h,m,_,k)>O)continue;_.applyMatrix4(this.matrixWorld);const N=y.ray.origin.distanceTo(_);N<y.near||N>y.far||L.push({distance:N,point:k.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const y=this.geometry.morphAttributes,L=Object.keys(y);if(L.length>0){const p=y[L[0]];if(void 0!==p){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let y=0,L=p.length;y<L;y++){const L=p[y].name||String(y);this.morphTargetInfluences.push(0),this.morphTargetDictionary[L]=y}}}}}const jk=new fN,zk=new fN;class Ok extends tk{constructor(y,L){super(y,L),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const y=this.geometry;if(null===y.index){const L=y.attributes.position,p=[];for(let y=0,N=L.count;y<N;y+=2)jk.fromBufferAttribute(L,y),zk.fromBufferAttribute(L,y+1),p[y]=0===y?0:p[y-1],p[y+1]=p[y]+jk.distanceTo(zk);y.setAttribute("lineDistance",new dj(p,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class hk extends tk{constructor(y,L){super(y,L),this.isLineLoop=!0,this.type="LineLoop"}}class mk extends vt{constructor(y){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new pj(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(y)}copy(y){return super.copy(y),this.color.copy(y.color),this.map=y.map,this.alphaMap=y.alphaMap,this.size=y.size,this.sizeAttenuation=y.sizeAttenuation,this.fog=y.fog,this}}const kk=new Wt,_k=new _t,Wk=new Nt,gk=new fN;class Ck extends at{constructor(y=new Rj,L=new mk){super(),this.isPoints=!0,this.type="Points",this.geometry=y,this.material=L,this.updateMorphTargets()}copy(y,L){return super.copy(y,L),this.material=y.material,this.geometry=y.geometry,this}raycast(y,L){const p=this.geometry,N=this.matrixWorld,t=y.params.Points.threshold,j=p.drawRange;if(null===p.boundingSphere&&p.computeBoundingSphere(),Wk.copy(p.boundingSphere),Wk.applyMatrix4(N),Wk.radius+=t,!1===y.ray.intersectsSphere(Wk))return;kk.copy(N).invert(),_k.copy(y.ray).applyMatrix4(kk);const z=t/((this.scale.x+this.scale.y+this.scale.z)/3),O=z*z,h=p.index,m=p.attributes.position;if(null!==h)for(let p=Math.max(0,j.start),t=Math.min(h.count,j.start+j.count);p<t;p++){const t=h.getX(p);gk.fromBufferAttribute(m,t),Qk(gk,t,O,N,y,L,this)}else for(let p=Math.max(0,j.start),t=Math.min(m.count,j.start+j.count);p<t;p++)gk.fromBufferAttribute(m,p),Qk(gk,p,O,N,y,L,this)}updateMorphTargets(){const y=this.geometry.morphAttributes,L=Object.keys(y);if(L.length>0){const p=y[L[0]];if(void 0!==p){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let y=0,L=p.length;y<L;y++){const L=p[y].name||String(y);this.morphTargetInfluences.push(0),this.morphTargetDictionary[L]=y}}}}}function Qk(y,L,p,N,t,j,z){const O=_k.distanceSqToPoint(y);if(O<p){const p=new fN;_k.closestPointToPoint(y,p),p.applyMatrix4(N);const h=t.ray.origin.distanceTo(p);if(h<t.near||h>t.far)return;j.push({distance:h,distanceToRay:Math.sqrt(O),point:p,index:L,face:null,object:z})}}class Tk extends FN{constructor(y,L,p,N,t,j,z,O,h){super(y,L,p,N,t,j,z,O,h),this.isVideoTexture=!0,this.minFilter=void 0!==j?j:Ey,this.magFilter=void 0!==t?t:Ey,this.generateMipmaps=!1;const m=this;"requestVideoFrameCallback"in y&&y.requestVideoFrameCallback((function L(){m.needsUpdate=!0,y.requestVideoFrameCallback(L)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const y=this.image;!1=="requestVideoFrameCallback"in y&&y.readyState>=y.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class ik extends FN{constructor(y,L){super({width:y,height:L}),this.isFramebufferTexture=!0,this.magFilter=uy,this.minFilter=uy,this.generateMipmaps=!1,this.needsUpdate=!0}}class Dk extends FN{constructor(y,L,p,N,t,j,z,O,h,m,k,_){super(null,j,z,O,h,m,N,t,k,_),this.isCompressedTexture=!0,this.image={width:L,height:p},this.mipmaps=y,this.flipY=!1,this.generateMipmaps=!1}}class wk extends Dk{constructor(y,L,p,N,t,j){super(y,L,p,t,j),this.isCompressedArrayTexture=!0,this.image.depth=N,this.wrapR=Vy}}class xk extends Dk{constructor(y,L,p){super(void 0,y[0].width,y[0].height,L,p,wy),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=y}}class dk extends FN{constructor(y,L,p,N,t,j,z,O,h){super(y,L,p,N,t,j,z,O,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ok{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(y,L){const p=this.getUtoTmapping(y);return this.getPoint(p,L)}getPoints(y=5){const L=[];for(let p=0;p<=y;p++)L.push(this.getPoint(p/y));return L}getSpacedPoints(y=5){const L=[];for(let p=0;p<=y;p++)L.push(this.getPointAt(p/y));return L}getLength(){const y=this.getLengths();return y[y.length-1]}getLengths(y=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===y+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const L=[];let p,N=this.getPoint(0),t=0;L.push(0);for(let j=1;j<=y;j++)p=this.getPoint(j/y),t+=p.distanceTo(N),L.push(t),N=p;return this.cacheArcLengths=L,L}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(y,L){const p=this.getLengths();let N=0;const t=p.length;let j;j=L||y*p[t-1];let z,O=0,h=t-1;for(;O<=h;)if(N=Math.floor(O+(h-O)/2),z=p[N]-j,z<0)O=N+1;else{if(!(z>0)){h=N;break}h=N-1}if(N=h,p[N]===j)return N/(t-1);const m=p[N];return(N+(j-m)/(p[N+1]-m))/(t-1)}getTangent(y,L){const p=1e-4;let N=y-p,t=y+p;N<0&&(N=0),t>1&&(t=1);const j=this.getPoint(N),z=this.getPoint(t),O=L||(j.isVector2?new tN:new fN);return O.copy(z).sub(j).normalize(),O}getTangentAt(y,L){const p=this.getUtoTmapping(y);return this.getTangent(p,L)}computeFrenetFrames(y,L){const p=new fN,N=[],t=[],j=[],z=new fN,O=new Wt;for(let L=0;L<=y;L++){const p=L/y;N[L]=this.getTangentAt(p,new fN)}t[0]=new fN,j[0]=new fN;let h=Number.MAX_VALUE;const m=Math.abs(N[0].x),k=Math.abs(N[0].y),_=Math.abs(N[0].z);m<=h&&(h=m,p.set(1,0,0)),k<=h&&(h=k,p.set(0,1,0)),_<=h&&p.set(0,0,1),z.crossVectors(N[0],p).normalize(),t[0].crossVectors(N[0],z),j[0].crossVectors(N[0],t[0]);for(let L=1;L<=y;L++){if(t[L]=t[L-1].clone(),j[L]=j[L-1].clone(),z.crossVectors(N[L-1],N[L]),z.length()>Number.EPSILON){z.normalize();const y=Math.acos(bp(N[L-1].dot(N[L]),-1,1));t[L].applyMatrix4(O.makeRotationAxis(z,y))}j[L].crossVectors(N[L],t[L])}if(!0===L){let L=Math.acos(bp(t[0].dot(t[y]),-1,1));L/=y,N[0].dot(z.crossVectors(t[0],t[y]))>0&&(L=-L);for(let p=1;p<=y;p++)t[p].applyMatrix4(O.makeRotationAxis(N[p],L*p)),j[p].crossVectors(N[p],t[p])}return{tangents:N,normals:t,binormals:j}}clone(){return(new this.constructor).copy(this)}copy(y){return this.arcLengthDivisions=y.arcLengthDivisions,this}toJSON(){const y={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return y.arcLengthDivisions=this.arcLengthDivisions,y.type=this.type,y}fromJSON(y){return this.arcLengthDivisions=y.arcLengthDivisions,this}}class Uk extends ok{constructor(y=0,L=0,p=1,N=1,t=0,j=2*Math.PI,z=!1,O=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=y,this.aY=L,this.xRadius=p,this.yRadius=N,this.aStartAngle=t,this.aEndAngle=j,this.aClockwise=z,this.aRotation=O}getPoint(y,L){const p=L||new tN,N=2*Math.PI;let t=this.aEndAngle-this.aStartAngle;const j=Math.abs(t)<Number.EPSILON;for(;t<0;)t+=N;for(;t>N;)t-=N;t<Number.EPSILON&&(t=j?0:N),!0!==this.aClockwise||j||(t===N?t=-N:t-=N);const z=this.aStartAngle+y*t;let O=this.aX+this.xRadius*Math.cos(z),h=this.aY+this.yRadius*Math.sin(z);if(0!==this.aRotation){const y=Math.cos(this.aRotation),L=Math.sin(this.aRotation),p=O-this.aX,N=h-this.aY;O=p*y-N*L+this.aX,h=p*L+N*y+this.aY}return p.set(O,h)}copy(y){return super.copy(y),this.aX=y.aX,this.aY=y.aY,this.xRadius=y.xRadius,this.yRadius=y.yRadius,this.aStartAngle=y.aStartAngle,this.aEndAngle=y.aEndAngle,this.aClockwise=y.aClockwise,this.aRotation=y.aRotation,this}toJSON(){const y=super.toJSON();return y.aX=this.aX,y.aY=this.aY,y.xRadius=this.xRadius,y.yRadius=this.yRadius,y.aStartAngle=this.aStartAngle,y.aEndAngle=this.aEndAngle,y.aClockwise=this.aClockwise,y.aRotation=this.aRotation,y}fromJSON(y){return super.fromJSON(y),this.aX=y.aX,this.aY=y.aY,this.xRadius=y.xRadius,this.yRadius=y.yRadius,this.aStartAngle=y.aStartAngle,this.aEndAngle=y.aEndAngle,this.aClockwise=y.aClockwise,this.aRotation=y.aRotation,this}}class Ik extends Uk{constructor(y,L,p,N,t,j){super(y,L,p,p,N,t,j),this.isArcCurve=!0,this.type="ArcCurve"}}function Vk(){let y=0,L=0,p=0,N=0;function t(t,j,z,O){y=t,L=z,p=-3*t+3*j-2*z-O,N=2*t-2*j+z+O}return{initCatmullRom:function(y,L,p,N,j){t(L,p,j*(p-y),j*(N-L))},initNonuniformCatmullRom:function(y,L,p,N,j,z,O){let h=(L-y)/j-(p-y)/(j+z)+(p-L)/z,m=(p-L)/z-(N-L)/(z+O)+(N-p)/O;h*=z,m*=z,t(L,p,h,m)},calc:function(t){const j=t*t;return y+L*t+p*j+N*(j*t)}}}const Fk=new fN,uk=new Vk,Sk=new Vk,Bk=new Vk;class Rk extends ok{constructor(y=[],L=!1,p="centripetal",N=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=y,this.closed=L,this.curveType=p,this.tension=N}getPoint(y,L=new fN){const p=L,N=this.points,t=N.length,j=(t-(this.closed?0:1))*y;let z,O,h=Math.floor(j),m=j-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/t)+1)*t:0===m&&h===t-1&&(h=t-2,m=1),this.closed||h>0?z=N[(h-1)%t]:(Fk.subVectors(N[0],N[1]).add(N[0]),z=Fk);const k=N[h%t],_=N[(h+1)%t];if(this.closed||h+2<t?O=N[(h+2)%t]:(Fk.subVectors(N[t-1],N[t-2]).add(N[t-1]),O=Fk),"centripetal"===this.curveType||"chordal"===this.curveType){const y="chordal"===this.curveType?.5:.25;let L=Math.pow(z.distanceToSquared(k),y),p=Math.pow(k.distanceToSquared(_),y),N=Math.pow(_.distanceToSquared(O),y);p<1e-4&&(p=1),L<1e-4&&(L=p),N<1e-4&&(N=p),uk.initNonuniformCatmullRom(z.x,k.x,_.x,O.x,L,p,N),Sk.initNonuniformCatmullRom(z.y,k.y,_.y,O.y,L,p,N),Bk.initNonuniformCatmullRom(z.z,k.z,_.z,O.z,L,p,N)}else"catmullrom"===this.curveType&&(uk.initCatmullRom(z.x,k.x,_.x,O.x,this.tension),Sk.initCatmullRom(z.y,k.y,_.y,O.y,this.tension),Bk.initCatmullRom(z.z,k.z,_.z,O.z,this.tension));return p.set(uk.calc(m),Sk.calc(m),Bk.calc(m)),p}copy(y){super.copy(y),this.points=[];for(let L=0,p=y.points.length;L<p;L++){const p=y.points[L];this.points.push(p.clone())}return this.closed=y.closed,this.curveType=y.curveType,this.tension=y.tension,this}toJSON(){const y=super.toJSON();y.points=[];for(let L=0,p=this.points.length;L<p;L++){const p=this.points[L];y.points.push(p.toArray())}return y.closed=this.closed,y.curveType=this.curveType,y.tension=this.tension,y}fromJSON(y){super.fromJSON(y),this.points=[];for(let L=0,p=y.points.length;L<p;L++){const p=y.points[L];this.points.push((new fN).fromArray(p))}return this.closed=y.closed,this.curveType=y.curveType,this.tension=y.tension,this}}function Yk(y,L,p,N,t){const j=.5*(N-L),z=.5*(t-p),O=y*y;return(2*p-2*N+j+z)*(y*O)+(-3*p+3*N-2*j-z)*O+j*y+p}function Ek(y,L,p,N){return function(y,L){const p=1-y;return p*p*L}(y,L)+function(y,L){return 2*(1-y)*y*L}(y,p)+function(y,L){return y*y*L}(y,N)}function Pk(y,L,p,N,t){return function(y,L){const p=1-y;return p*p*p*L}(y,L)+function(y,L){const p=1-y;return 3*p*p*y*L}(y,p)+function(y,L){return 3*(1-y)*y*y*L}(y,N)+function(y,L){return y*y*y*L}(y,t)}class lk extends ok{constructor(y=new tN,L=new tN,p=new tN,N=new tN){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=y,this.v1=L,this.v2=p,this.v3=N}getPoint(y,L=new tN){const p=L,N=this.v0,t=this.v1,j=this.v2,z=this.v3;return p.set(Pk(y,N.x,t.x,j.x,z.x),Pk(y,N.y,t.y,j.y,z.y)),p}copy(y){return super.copy(y),this.v0.copy(y.v0),this.v1.copy(y.v1),this.v2.copy(y.v2),this.v3.copy(y.v3),this}toJSON(){const y=super.toJSON();return y.v0=this.v0.toArray(),y.v1=this.v1.toArray(),y.v2=this.v2.toArray(),y.v3=this.v3.toArray(),y}fromJSON(y){return super.fromJSON(y),this.v0.fromArray(y.v0),this.v1.fromArray(y.v1),this.v2.fromArray(y.v2),this.v3.fromArray(y.v3),this}}class Mk extends ok{constructor(y=new fN,L=new fN,p=new fN,N=new fN){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=y,this.v1=L,this.v2=p,this.v3=N}getPoint(y,L=new fN){const p=L,N=this.v0,t=this.v1,j=this.v2,z=this.v3;return p.set(Pk(y,N.x,t.x,j.x,z.x),Pk(y,N.y,t.y,j.y,z.y),Pk(y,N.z,t.z,j.z,z.z)),p}copy(y){return super.copy(y),this.v0.copy(y.v0),this.v1.copy(y.v1),this.v2.copy(y.v2),this.v3.copy(y.v3),this}toJSON(){const y=super.toJSON();return y.v0=this.v0.toArray(),y.v1=this.v1.toArray(),y.v2=this.v2.toArray(),y.v3=this.v3.toArray(),y}fromJSON(y){return super.fromJSON(y),this.v0.fromArray(y.v0),this.v1.fromArray(y.v1),this.v2.fromArray(y.v2),this.v3.fromArray(y.v3),this}}class fk extends ok{constructor(y=new tN,L=new tN){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=y,this.v2=L}getPoint(y,L=new tN){const p=L;return 1===y?p.copy(this.v2):(p.copy(this.v2).sub(this.v1),p.multiplyScalar(y).add(this.v1)),p}getPointAt(y,L){return this.getPoint(y,L)}getTangent(y,L=new tN){return L.subVectors(this.v2,this.v1).normalize()}getTangentAt(y,L){return this.getTangent(y,L)}copy(y){return super.copy(y),this.v1.copy(y.v1),this.v2.copy(y.v2),this}toJSON(){const y=super.toJSON();return y.v1=this.v1.toArray(),y.v2=this.v2.toArray(),y}fromJSON(y){return super.fromJSON(y),this.v1.fromArray(y.v1),this.v2.fromArray(y.v2),this}}class ak extends ok{constructor(y=new fN,L=new fN){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=y,this.v2=L}getPoint(y,L=new fN){const p=L;return 1===y?p.copy(this.v2):(p.copy(this.v2).sub(this.v1),p.multiplyScalar(y).add(this.v1)),p}getPointAt(y,L){return this.getPoint(y,L)}getTangent(y,L=new fN){return L.subVectors(this.v2,this.v1).normalize()}getTangentAt(y,L){return this.getTangent(y,L)}copy(y){return super.copy(y),this.v1.copy(y.v1),this.v2.copy(y.v2),this}toJSON(){const y=super.toJSON();return y.v1=this.v1.toArray(),y.v2=this.v2.toArray(),y}fromJSON(y){return super.fromJSON(y),this.v1.fromArray(y.v1),this.v2.fromArray(y.v2),this}}class Hk extends ok{constructor(y=new tN,L=new tN,p=new tN){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=y,this.v1=L,this.v2=p}getPoint(y,L=new tN){const p=L,N=this.v0,t=this.v1,j=this.v2;return p.set(Ek(y,N.x,t.x,j.x),Ek(y,N.y,t.y,j.y)),p}copy(y){return super.copy(y),this.v0.copy(y.v0),this.v1.copy(y.v1),this.v2.copy(y.v2),this}toJSON(){const y=super.toJSON();return y.v0=this.v0.toArray(),y.v1=this.v1.toArray(),y.v2=this.v2.toArray(),y}fromJSON(y){return super.fromJSON(y),this.v0.fromArray(y.v0),this.v1.fromArray(y.v1),this.v2.fromArray(y.v2),this}}class Xk extends ok{constructor(y=new fN,L=new fN,p=new fN){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=y,this.v1=L,this.v2=p}getPoint(y,L=new fN){const p=L,N=this.v0,t=this.v1,j=this.v2;return p.set(Ek(y,N.x,t.x,j.x),Ek(y,N.y,t.y,j.y),Ek(y,N.z,t.z,j.z)),p}copy(y){return super.copy(y),this.v0.copy(y.v0),this.v1.copy(y.v1),this.v2.copy(y.v2),this}toJSON(){const y=super.toJSON();return y.v0=this.v0.toArray(),y.v1=this.v1.toArray(),y.v2=this.v2.toArray(),y}fromJSON(y){return super.fromJSON(y),this.v0.fromArray(y.v0),this.v1.fromArray(y.v1),this.v2.fromArray(y.v2),this}}class Jk extends ok{constructor(y=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=y}getPoint(y,L=new tN){const p=L,N=this.points,t=(N.length-1)*y,j=Math.floor(t),z=t-j,O=N[0===j?j:j-1],h=N[j],m=N[j>N.length-2?N.length-1:j+1],k=N[j>N.length-3?N.length-1:j+2];return p.set(Yk(z,O.x,h.x,m.x,k.x),Yk(z,O.y,h.y,m.y,k.y)),p}copy(y){super.copy(y),this.points=[];for(let L=0,p=y.points.length;L<p;L++){const p=y.points[L];this.points.push(p.clone())}return this}toJSON(){const y=super.toJSON();y.points=[];for(let L=0,p=this.points.length;L<p;L++){const p=this.points[L];y.points.push(p.toArray())}return y}fromJSON(y){super.fromJSON(y),this.points=[];for(let L=0,p=y.points.length;L<p;L++){const p=y.points[L];this.points.push((new tN).fromArray(p))}return this}}var rk=Object.freeze({__proto__:null,ArcCurve:Ik,CatmullRomCurve3:Rk,CubicBezierCurve:lk,CubicBezierCurve3:Mk,EllipseCurve:Uk,LineCurve:fk,LineCurve3:ak,QuadraticBezierCurve:Hk,QuadraticBezierCurve3:Xk,SplineCurve:Jk});class Gk extends ok{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(y){this.curves.push(y)}closePath(){const y=this.curves[0].getPoint(0),L=this.curves[this.curves.length-1].getPoint(1);y.equals(L)||this.curves.push(new fk(L,y))}getPoint(y,L){const p=y*this.getLength(),N=this.getCurveLengths();let t=0;for(;t<N.length;){if(N[t]>=p){const y=N[t]-p,j=this.curves[t],z=j.getLength(),O=0===z?0:1-y/z;return j.getPointAt(O,L)}t++}return null}getLength(){const y=this.getCurveLengths();return y[y.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const y=[];let L=0;for(let p=0,N=this.curves.length;p<N;p++)L+=this.curves[p].getLength(),y.push(L);return this.cacheLengths=y,y}getSpacedPoints(y=40){const L=[];for(let p=0;p<=y;p++)L.push(this.getPoint(p/y));return this.autoClose&&L.push(L[0]),L}getPoints(y=12){const L=[];let p;for(let N=0,t=this.curves;N<t.length;N++){const j=t[N],z=j.isEllipseCurve?2*y:j.isLineCurve||j.isLineCurve3?1:j.isSplineCurve?y*j.points.length:y,O=j.getPoints(z);for(let y=0;y<O.length;y++){const N=O[y];p&&p.equals(N)||(L.push(N),p=N)}}return this.autoClose&&L.length>1&&!L[L.length-1].equals(L[0])&&L.push(L[0]),L}copy(y){super.copy(y),this.curves=[];for(let L=0,p=y.curves.length;L<p;L++){const p=y.curves[L];this.curves.push(p.clone())}return this.autoClose=y.autoClose,this}toJSON(){const y=super.toJSON();y.autoClose=this.autoClose,y.curves=[];for(let L=0,p=this.curves.length;L<p;L++){const p=this.curves[L];y.curves.push(p.toJSON())}return y}fromJSON(y){super.fromJSON(y),this.autoClose=y.autoClose,this.curves=[];for(let L=0,p=y.curves.length;L<p;L++){const p=y.curves[L];this.curves.push((new rk[p.type]).fromJSON(p))}return this}}class $k extends Gk{constructor(y){super(),this.type="Path",this.currentPoint=new tN,y&&this.setFromPoints(y)}setFromPoints(y){this.moveTo(y[0].x,y[0].y);for(let L=1,p=y.length;L<p;L++)this.lineTo(y[L].x,y[L].y);return this}moveTo(y,L){return this.currentPoint.set(y,L),this}lineTo(y,L){const p=new fk(this.currentPoint.clone(),new tN(y,L));return this.curves.push(p),this.currentPoint.set(y,L),this}quadraticCurveTo(y,L,p,N){const t=new Hk(this.currentPoint.clone(),new tN(y,L),new tN(p,N));return this.curves.push(t),this.currentPoint.set(p,N),this}bezierCurveTo(y,L,p,N,t,j){const z=new lk(this.currentPoint.clone(),new tN(y,L),new tN(p,N),new tN(t,j));return this.curves.push(z),this.currentPoint.set(t,j),this}splineThru(y){const L=[this.currentPoint.clone()].concat(y),p=new Jk(L);return this.curves.push(p),this.currentPoint.copy(y[y.length-1]),this}arc(y,L,p,N,t,j){const z=this.currentPoint.x,O=this.currentPoint.y;return this.absarc(y+z,L+O,p,N,t,j),this}absarc(y,L,p,N,t,j){return this.absellipse(y,L,p,p,N,t,j),this}ellipse(y,L,p,N,t,j,z,O){const h=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(y+h,L+m,p,N,t,j,z,O),this}absellipse(y,L,p,N,t,j,z,O){const h=new Uk(y,L,p,N,t,j,z,O);if(this.curves.length>0){const y=h.getPoint(0);y.equals(this.currentPoint)||this.lineTo(y.x,y.y)}this.curves.push(h);const m=h.getPoint(1);return this.currentPoint.copy(m),this}copy(y){return super.copy(y),this.currentPoint.copy(y.currentPoint),this}toJSON(){const y=super.toJSON();return y.currentPoint=this.currentPoint.toArray(),y}fromJSON(y){return super.fromJSON(y),this.currentPoint.fromArray(y.currentPoint),this}}class qk extends Rj{constructor(y=[new tN(0,-.5),new tN(.5,0),new tN(0,.5)],L=12,p=0,N=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:y,segments:L,phiStart:p,phiLength:N},L=Math.floor(L),N=bp(N,0,2*Math.PI);const t=[],j=[],z=[],O=[],h=[],m=1/L,k=new fN,_=new tN,W=new fN,g=new fN,C=new fN;let Q=0,T=0;for(let L=0;L<=y.length-1;L++)switch(L){case 0:Q=y[L+1].x-y[L].x,T=y[L+1].y-y[L].y,W.x=1*T,W.y=-Q,W.z=0*T,C.copy(W),W.normalize(),O.push(W.x,W.y,W.z);break;case y.length-1:O.push(C.x,C.y,C.z);break;default:Q=y[L+1].x-y[L].x,T=y[L+1].y-y[L].y,W.x=1*T,W.y=-Q,W.z=0*T,g.copy(W),W.x+=C.x,W.y+=C.y,W.z+=C.z,W.normalize(),O.push(W.x,W.y,W.z),C.copy(g)}for(let t=0;t<=L;t++){const W=p+t*m*N,g=Math.sin(W),C=Math.cos(W);for(let p=0;p<=y.length-1;p++){k.x=y[p].x*g,k.y=y[p].y,k.z=y[p].x*C,j.push(k.x,k.y,k.z),_.x=t/L,_.y=p/(y.length-1),z.push(_.x,_.y);const N=O[3*p+0]*g,m=O[3*p+1],W=O[3*p+0]*C;h.push(N,m,W)}}for(let p=0;p<L;p++)for(let L=0;L<y.length-1;L++){const N=L+p*y.length,j=N,z=N+y.length,O=N+y.length+1,h=N+1;t.push(j,z,h),t.push(O,h,z)}this.setIndex(t),this.setAttribute("position",new dj(j,3)),this.setAttribute("uv",new dj(z,2)),this.setAttribute("normal",new dj(h,3))}copy(y){return super.copy(y),this.parameters=Object.assign({},y.parameters),this}static fromJSON(y){return new qk(y.points,y.segments,y.phiStart,y.phiLength)}}class Ak extends qk{constructor(y=1,L=1,p=4,N=8){const t=new $k;t.absarc(0,-L/2,y,1.5*Math.PI,0),t.absarc(0,L/2,y,0,.5*Math.PI),super(t.getPoints(p),N),this.type="CapsuleGeometry",this.parameters={radius:y,length:L,capSegments:p,radialSegments:N}}static fromJSON(y){return new Ak(y.radius,y.length,y.capSegments,y.radialSegments)}}class sk extends Rj{constructor(y=1,L=32,p=0,N=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:y,segments:L,thetaStart:p,thetaLength:N},L=Math.max(3,L);const t=[],j=[],z=[],O=[],h=new fN,m=new tN;j.push(0,0,0),z.push(0,0,1),O.push(.5,.5);for(let t=0,k=3;t<=L;t++,k+=3){const _=p+t/L*N;h.x=y*Math.cos(_),h.y=y*Math.sin(_),j.push(h.x,h.y,h.z),z.push(0,0,1),m.x=(j[k]/y+1)/2,m.y=(j[k+1]/y+1)/2,O.push(m.x,m.y)}for(let y=1;y<=L;y++)t.push(y,y+1,0);this.setIndex(t),this.setAttribute("position",new dj(j,3)),this.setAttribute("normal",new dj(z,3)),this.setAttribute("uv",new dj(O,2))}copy(y){return super.copy(y),this.parameters=Object.assign({},y.parameters),this}static fromJSON(y){return new sk(y.radius,y.segments,y.thetaStart,y.thetaLength)}}class ck extends Rj{constructor(y=1,L=1,p=1,N=32,t=1,j=!1,z=0,O=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:y,radiusBottom:L,height:p,radialSegments:N,heightSegments:t,openEnded:j,thetaStart:z,thetaLength:O};const h=this;N=Math.floor(N),t=Math.floor(t);const m=[],k=[],_=[],W=[];let g=0;const C=[],Q=p/2;let T=0;function i(p){const t=g,j=new tN,C=new fN;let i=0;const D=!0===p?y:L,w=!0===p?1:-1;for(let y=1;y<=N;y++)k.push(0,Q*w,0),_.push(0,w,0),W.push(.5,.5),g++;const x=g;for(let y=0;y<=N;y++){const L=y/N*O+z,p=Math.cos(L),t=Math.sin(L);C.x=D*t,C.y=Q*w,C.z=D*p,k.push(C.x,C.y,C.z),_.push(0,w,0),j.x=.5*p+.5,j.y=.5*t*w+.5,W.push(j.x,j.y),g++}for(let y=0;y<N;y++){const L=t+y,N=x+y;!0===p?m.push(N,N+1,L):m.push(N+1,N,L),i+=3}h.addGroup(T,i,!0===p?1:2),T+=i}(function(){const j=new fN,i=new fN;let D=0;const w=(L-y)/p;for(let h=0;h<=t;h++){const m=[],T=h/t,D=T*(L-y)+y;for(let y=0;y<=N;y++){const L=y/N,t=L*O+z,h=Math.sin(t),C=Math.cos(t);i.x=D*h,i.y=-T*p+Q,i.z=D*C,k.push(i.x,i.y,i.z),j.set(h,w,C).normalize(),_.push(j.x,j.y,j.z),W.push(L,1-T),m.push(g++)}C.push(m)}for(let y=0;y<N;y++)for(let L=0;L<t;L++){const p=C[L][y],N=C[L+1][y],t=C[L+1][y+1],j=C[L][y+1];m.push(p,N,j),m.push(N,t,j),D+=6}h.addGroup(T,D,0),T+=D})(),!1===j&&(y>0&&i(!0),L>0&&i(!1)),this.setIndex(m),this.setAttribute("position",new dj(k,3)),this.setAttribute("normal",new dj(_,3)),this.setAttribute("uv",new dj(W,2))}copy(y){return super.copy(y),this.parameters=Object.assign({},y.parameters),this}static fromJSON(y){return new ck(y.radiusTop,y.radiusBottom,y.height,y.radialSegments,y.heightSegments,y.openEnded,y.thetaStart,y.thetaLength)}}class Kk extends ck{constructor(y=1,L=1,p=32,N=1,t=!1,j=0,z=2*Math.PI){super(0,y,L,p,N,t,j,z),this.type="ConeGeometry",this.parameters={radius:y,height:L,radialSegments:p,heightSegments:N,openEnded:t,thetaStart:j,thetaLength:z}}static fromJSON(y){return new Kk(y.radius,y.height,y.radialSegments,y.heightSegments,y.openEnded,y.thetaStart,y.thetaLength)}}class bk extends Rj{constructor(y=[],L=[],p=1,N=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:y,indices:L,radius:p,detail:N};const t=[],j=[];function z(y,L,p,N){const t=N+1,j=[];for(let N=0;N<=t;N++){j[N]=[];const z=y.clone().lerp(p,N/t),O=L.clone().lerp(p,N/t),h=t-N;for(let y=0;y<=h;y++)j[N][y]=0===y&&N===t?z:z.clone().lerp(O,y/h)}for(let y=0;y<t;y++)for(let L=0;L<2*(t-y)-1;L++){const p=Math.floor(L/2);L%2==0?(O(j[y][p+1]),O(j[y+1][p]),O(j[y][p])):(O(j[y][p+1]),O(j[y+1][p+1]),O(j[y+1][p]))}}function O(y){t.push(y.x,y.y,y.z)}function h(L,p){const N=3*L;p.x=y[N+0],p.y=y[N+1],p.z=y[N+2]}function m(y,L,p,N){N<0&&1===y.x&&(j[L]=y.x-1),0===p.x&&0===p.z&&(j[L]=N/2/Math.PI+.5)}function k(y){return Math.atan2(y.z,-y.x)}(function(y){const p=new fN,N=new fN,t=new fN;for(let j=0;j<L.length;j+=3)h(L[j+0],p),h(L[j+1],N),h(L[j+2],t),z(p,N,t,y)})(N),function(y){const L=new fN;for(let p=0;p<t.length;p+=3)L.x=t[p+0],L.y=t[p+1],L.z=t[p+2],L.normalize().multiplyScalar(y),t[p+0]=L.x,t[p+1]=L.y,t[p+2]=L.z}(p),function(){const y=new fN;for(let p=0;p<t.length;p+=3){y.x=t[p+0],y.y=t[p+1],y.z=t[p+2];const N=k(y)/2/Math.PI+.5,z=(L=y,Math.atan2(-L.y,Math.sqrt(L.x*L.x+L.z*L.z))/Math.PI+.5);j.push(N,1-z)}var L;(function(){const y=new fN,L=new fN,p=new fN,N=new fN,z=new tN,O=new tN,h=new tN;for(let _=0,W=0;_<t.length;_+=9,W+=6){y.set(t[_+0],t[_+1],t[_+2]),L.set(t[_+3],t[_+4],t[_+5]),p.set(t[_+6],t[_+7],t[_+8]),z.set(j[W+0],j[W+1]),O.set(j[W+2],j[W+3]),h.set(j[W+4],j[W+5]),N.copy(y).add(L).add(p).divideScalar(3);const g=k(N);m(z,W+0,y,g),m(O,W+2,L,g),m(h,W+4,p,g)}})(),function(){for(let y=0;y<j.length;y+=6){const L=j[y+0],p=j[y+2],N=j[y+4],t=Math.max(L,p,N),z=Math.min(L,p,N);t>.9&&z<.1&&(L<.2&&(j[y+0]+=1),p<.2&&(j[y+2]+=1),N<.2&&(j[y+4]+=1))}}()}(),this.setAttribute("position",new dj(t,3)),this.setAttribute("normal",new dj(t.slice(),3)),this.setAttribute("uv",new dj(j,2)),0===N?this.computeVertexNormals():this.normalizeNormals()}copy(y){return super.copy(y),this.parameters=Object.assign({},y.parameters),this}static fromJSON(y){return new bk(y.vertices,y.indices,y.radius,y.details)}}class nk extends bk{constructor(y=1,L=0){const p=(1+Math.sqrt(5))/2,N=1/p;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-N,-p,0,-N,p,0,N,-p,0,N,p,-N,-p,0,-N,p,0,N,-p,0,N,p,0,-p,0,-N,p,0,-N,-p,0,N,p,0,N],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],y,L),this.type="DodecahedronGeometry",this.parameters={radius:y,detail:L}}static fromJSON(y){return new nk(y.radius,y.detail)}}const vk=new fN,ek=new fN,Zk=new fN,y_=new bt;class L_ extends Rj{constructor(y=null,L=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:y,thresholdAngle:L},null!==y){const p=4,N=Math.pow(10,p),t=Math.cos(sp*L),j=y.getIndex(),z=y.getAttribute("position"),O=j?j.count:z.count,h=[0,0,0],m=["a","b","c"],k=new Array(3),_={},W=[];for(let y=0;y<O;y+=3){j?(h[0]=j.getX(y),h[1]=j.getX(y+1),h[2]=j.getX(y+2)):(h[0]=y,h[1]=y+1,h[2]=y+2);const{a:L,b:p,c:O}=y_;if(L.fromBufferAttribute(z,h[0]),p.fromBufferAttribute(z,h[1]),O.fromBufferAttribute(z,h[2]),y_.getNormal(Zk),k[0]=`${Math.round(L.x*N)},${Math.round(L.y*N)},${Math.round(L.z*N)}`,k[1]=`${Math.round(p.x*N)},${Math.round(p.y*N)},${Math.round(p.z*N)}`,k[2]=`${Math.round(O.x*N)},${Math.round(O.y*N)},${Math.round(O.z*N)}`,k[0]!==k[1]&&k[1]!==k[2]&&k[2]!==k[0])for(let y=0;y<3;y++){const L=(y+1)%3,p=k[y],N=k[L],j=y_[m[y]],z=y_[m[L]],O=`${p}_${N}`,g=`${N}_${p}`;g in _&&_[g]?(Zk.dot(_[g].normal)<=t&&(W.push(j.x,j.y,j.z),W.push(z.x,z.y,z.z)),_[g]=null):O in _||(_[O]={index0:h[y],index1:h[L],normal:Zk.clone()})}}for(const y in _)if(_[y]){const{index0:L,index1:p}=_[y];vk.fromBufferAttribute(z,L),ek.fromBufferAttribute(z,p),W.push(vk.x,vk.y,vk.z),W.push(ek.x,ek.y,ek.z)}this.setAttribute("position",new dj(W,3))}}copy(y){return super.copy(y),this.parameters=Object.assign({},y.parameters),this}}class p_ extends $k{constructor(y){super(y),this.uuid=Kp(),this.type="Shape",this.holes=[]}getPointsHoles(y){const L=[];for(let p=0,N=this.holes.length;p<N;p++)L[p]=this.holes[p].getPoints(y);return L}extractPoints(y){return{shape:this.getPoints(y),holes:this.getPointsHoles(y)}}copy(y){super.copy(y),this.holes=[];for(let L=0,p=y.holes.length;L<p;L++){const p=y.holes[L];this.holes.push(p.clone())}return this}toJSON(){const y=super.toJSON();y.uuid=this.uuid,y.holes=[];for(let L=0,p=this.holes.length;L<p;L++){const p=this.holes[L];y.holes.push(p.toJSON())}return y}fromJSON(y){super.fromJSON(y),this.uuid=y.uuid,this.holes=[];for(let L=0,p=y.holes.length;L<p;L++){const p=y.holes[L];this.holes.push((new $k).fromJSON(p))}return this}}function N_(y,L,p,N,t){let j,z;if(t===function(y,L,p,N){let t=0;for(let j=L,z=p-N;j<p;j+=N)t+=(y[z]-y[j])*(y[j+1]+y[z+1]),z=j;return t}(y,L,p,N)>0)for(j=L;j<p;j+=N)z=I_(j,y[j],y[j+1],z);else for(j=p-N;j>=L;j-=N)z=I_(j,y[j],y[j+1],z);return z&&D_(z,z.next)&&(V_(z),z=z.next),z}function t_(y,L){if(!y)return y;L||(L=y);let p,N=y;do{if(p=!1,N.steiner||!D_(N,N.next)&&0!==i_(N.prev,N,N.next))N=N.next;else{if(V_(N),N=L=N.prev,N===N.next)break;p=!0}}while(p||N!==L);return L}function j_(y,L,p,N,t,j,z){if(!y)return;!z&&j&&function(y,L,p,N){let t=y;do{0===t.z&&(t.z=g_(t.x,t.y,L,p,N)),t.prevZ=t.prev,t.nextZ=t.next,t=t.next}while(t!==y);t.prevZ.nextZ=null,t.prevZ=null,function(y){let L,p,N,t,j,z,O,h,m=1;do{for(p=y,y=null,j=null,z=0;p;){for(z++,N=p,O=0,L=0;L<m&&(O++,N=N.nextZ,N);L++);for(h=m;O>0||h>0&&N;)0!==O&&(0===h||!N||p.z<=N.z)?(t=p,p=p.nextZ,O--):(t=N,N=N.nextZ,h--),j?j.nextZ=t:y=t,t.prevZ=j,j=t;p=N}j.nextZ=null,m*=2}while(z>1)}(t)}(y,N,t,j);let O,h,m=y;for(;y.prev!==y.next;)if(O=y.prev,h=y.next,j?O_(y,N,t,j):z_(y))L.push(O.i/p|0),L.push(y.i/p|0),L.push(h.i/p|0),V_(y),y=h.next,m=h.next;else if((y=h)===m){z?1===z?j_(y=h_(t_(y),L,p),L,p,N,t,j,2):2===z&&m_(y,L,p,N,t,j):j_(t_(y),L,p,N,t,j,1);break}}function z_(y){const L=y.prev,p=y,N=y.next;if(i_(L,p,N)>=0)return!1;const t=L.x,j=p.x,z=N.x,O=L.y,h=p.y,m=N.y,k=t<j?t<z?t:z:j<z?j:z,_=O<h?O<m?O:m:h<m?h:m,W=t>j?t>z?t:z:j>z?j:z,g=O>h?O>m?O:m:h>m?h:m;let C=N.next;for(;C!==L;){if(C.x>=k&&C.x<=W&&C.y>=_&&C.y<=g&&Q_(t,O,j,h,z,m,C.x,C.y)&&i_(C.prev,C,C.next)>=0)return!1;C=C.next}return!0}function O_(y,L,p,N){const t=y.prev,j=y,z=y.next;if(i_(t,j,z)>=0)return!1;const O=t.x,h=j.x,m=z.x,k=t.y,_=j.y,W=z.y,g=O<h?O<m?O:m:h<m?h:m,C=k<_?k<W?k:W:_<W?_:W,Q=O>h?O>m?O:m:h>m?h:m,T=k>_?k>W?k:W:_>W?_:W,i=g_(g,C,L,p,N),D=g_(Q,T,L,p,N);let w=y.prevZ,x=y.nextZ;for(;w&&w.z>=i&&x&&x.z<=D;){if(w.x>=g&&w.x<=Q&&w.y>=C&&w.y<=T&&w!==t&&w!==z&&Q_(O,k,h,_,m,W,w.x,w.y)&&i_(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,x.x>=g&&x.x<=Q&&x.y>=C&&x.y<=T&&x!==t&&x!==z&&Q_(O,k,h,_,m,W,x.x,x.y)&&i_(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;w&&w.z>=i;){if(w.x>=g&&w.x<=Q&&w.y>=C&&w.y<=T&&w!==t&&w!==z&&Q_(O,k,h,_,m,W,w.x,w.y)&&i_(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;x&&x.z<=D;){if(x.x>=g&&x.x<=Q&&x.y>=C&&x.y<=T&&x!==t&&x!==z&&Q_(O,k,h,_,m,W,x.x,x.y)&&i_(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function h_(y,L,p){let N=y;do{const t=N.prev,j=N.next.next;!D_(t,j)&&w_(t,N,N.next,j)&&o_(t,j)&&o_(j,t)&&(L.push(t.i/p|0),L.push(N.i/p|0),L.push(j.i/p|0),V_(N),V_(N.next),N=y=j),N=N.next}while(N!==y);return t_(N)}function m_(y,L,p,N,t,j){let z=y;do{let y=z.next.next;for(;y!==z.prev;){if(z.i!==y.i&&T_(z,y)){let O=U_(z,y);return z=t_(z,z.next),O=t_(O,O.next),j_(z,L,p,N,t,j,0),void j_(O,L,p,N,t,j,0)}y=y.next}z=z.next}while(z!==y)}function k_(y,L){return y.x-L.x}function __(y,L){const p=function(y,L){let p,N=L,t=-1/0;const j=y.x,z=y.y;do{if(z<=N.y&&z>=N.next.y&&N.next.y!==N.y){const y=N.x+(z-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(y<=j&&y>t&&(t=y,p=N.x<N.next.x?N:N.next,y===j))return p}N=N.next}while(N!==L);if(!p)return null;const O=p,h=p.x,m=p.y;let k,_=1/0;N=p;do{j>=N.x&&N.x>=h&&j!==N.x&&Q_(z<m?j:t,z,h,m,z<m?t:j,z,N.x,N.y)&&(k=Math.abs(z-N.y)/(j-N.x),o_(N,y)&&(k<_||k===_&&(N.x>p.x||N.x===p.x&&W_(p,N)))&&(p=N,_=k)),N=N.next}while(N!==O);return p}(y,L);if(!p)return L;const N=U_(p,y);return t_(N,N.next),t_(p,p.next)}function W_(y,L){return i_(y.prev,y,L.prev)<0&&i_(L.next,y,y.next)<0}function g_(y,L,p,N,t){return(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y=(y-p)*t|0)|y<<8))|y<<4))|y<<2))|y<<1))|(L=1431655765&((L=858993459&((L=252645135&((L=16711935&((L=(L-N)*t|0)|L<<8))|L<<4))|L<<2))|L<<1))<<1}function C_(y){let L=y,p=y;do{(L.x<p.x||L.x===p.x&&L.y<p.y)&&(p=L),L=L.next}while(L!==y);return p}function Q_(y,L,p,N,t,j,z,O){return(t-z)*(L-O)>=(y-z)*(j-O)&&(y-z)*(N-O)>=(p-z)*(L-O)&&(p-z)*(j-O)>=(t-z)*(N-O)}function T_(y,L){return y.next.i!==L.i&&y.prev.i!==L.i&&!function(y,L){let p=y;do{if(p.i!==y.i&&p.next.i!==y.i&&p.i!==L.i&&p.next.i!==L.i&&w_(p,p.next,y,L))return!0;p=p.next}while(p!==y);return!1}(y,L)&&(o_(y,L)&&o_(L,y)&&function(y,L){let p=y,N=!1;const t=(y.x+L.x)/2,j=(y.y+L.y)/2;do{p.y>j!=p.next.y>j&&p.next.y!==p.y&&t<(p.next.x-p.x)*(j-p.y)/(p.next.y-p.y)+p.x&&(N=!N),p=p.next}while(p!==y);return N}(y,L)&&(i_(y.prev,y,L.prev)||i_(y,L.prev,L))||D_(y,L)&&i_(y.prev,y,y.next)>0&&i_(L.prev,L,L.next)>0)}function i_(y,L,p){return(L.y-y.y)*(p.x-L.x)-(L.x-y.x)*(p.y-L.y)}function D_(y,L){return y.x===L.x&&y.y===L.y}function w_(y,L,p,N){const t=d_(i_(y,L,p)),j=d_(i_(y,L,N)),z=d_(i_(p,N,y)),O=d_(i_(p,N,L));return t!==j&&z!==O||!(0!==t||!x_(y,p,L))||!(0!==j||!x_(y,N,L))||!(0!==z||!x_(p,y,N))||!(0!==O||!x_(p,L,N))}function x_(y,L,p){return L.x<=Math.max(y.x,p.x)&&L.x>=Math.min(y.x,p.x)&&L.y<=Math.max(y.y,p.y)&&L.y>=Math.min(y.y,p.y)}function d_(y){return y>0?1:y<0?-1:0}function o_(y,L){return i_(y.prev,y,y.next)<0?i_(y,L,y.next)>=0&&i_(y,y.prev,L)>=0:i_(y,L,y.prev)<0||i_(y,y.next,L)<0}function U_(y,L){const p=new F_(y.i,y.x,y.y),N=new F_(L.i,L.x,L.y),t=y.next,j=L.prev;return y.next=L,L.prev=y,p.next=t,t.prev=p,N.next=p,p.prev=N,j.next=N,N.prev=j,N}function I_(y,L,p,N){const t=new F_(y,L,p);return N?(t.next=N.next,t.prev=N,N.next.prev=t,N.next=t):(t.prev=t,t.next=t),t}function V_(y){y.next.prev=y.prev,y.prev.next=y.next,y.prevZ&&(y.prevZ.nextZ=y.nextZ),y.nextZ&&(y.nextZ.prevZ=y.prevZ)}function F_(y,L,p){this.i=y,this.x=L,this.y=p,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class u_{static area(y){const L=y.length;let p=0;for(let N=L-1,t=0;t<L;N=t++)p+=y[N].x*y[t].y-y[t].x*y[N].y;return.5*p}static isClockWise(y){return u_.area(y)<0}static triangulateShape(y,L){const p=[],N=[],t=[];S_(y),B_(p,y);let j=y.length;L.forEach(S_);for(let y=0;y<L.length;y++)N.push(j),j+=L[y].length,B_(p,L[y]);const z=function(y,L,p=2){const N=L&&L.length,t=N?L[0]*p:y.length;let j=N_(y,0,t,p,!0);const z=[];if(!j||j.next===j.prev)return z;let O,h,m,k,_,W,g;if(N&&(j=function(y,L,p,N){const t=[];let j,z,O,h,m;for(j=0,z=L.length;j<z;j++)O=L[j]*N,h=j<z-1?L[j+1]*N:y.length,m=N_(y,O,h,N,!1),m===m.next&&(m.steiner=!0),t.push(C_(m));for(t.sort(k_),j=0;j<t.length;j++)p=__(t[j],p);return p}(y,L,j,p)),y.length>80*p){O=m=y[0],h=k=y[1];for(let L=p;L<t;L+=p)_=y[L],W=y[L+1],_<O&&(O=_),W<h&&(h=W),_>m&&(m=_),W>k&&(k=W);g=Math.max(m-O,k-h),g=0!==g?32767/g:0}return j_(j,z,p,O,h,g,0),z}(p,N);for(let y=0;y<z.length;y+=3)t.push(z.slice(y,y+3));return t}}function S_(y){const L=y.length;L>2&&y[L-1].equals(y[0])&&y.pop()}function B_(y,L){for(let p=0;p<L.length;p++)y.push(L[p].x),y.push(L[p].y)}class R_ extends Rj{constructor(y=new p_([new tN(.5,.5),new tN(-.5,.5),new tN(-.5,-.5),new tN(.5,-.5)]),L={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:y,options:L},y=Array.isArray(y)?y:[y];const p=this,N=[],t=[];for(let L=0,p=y.length;L<p;L++)j(y[L]);function j(y){const j=[],z=void 0!==L.curveSegments?L.curveSegments:12,O=void 0!==L.steps?L.steps:1,h=void 0!==L.depth?L.depth:1;let m=void 0===L.bevelEnabled||L.bevelEnabled,k=void 0!==L.bevelThickness?L.bevelThickness:.2,_=void 0!==L.bevelSize?L.bevelSize:k-.1,W=void 0!==L.bevelOffset?L.bevelOffset:0,g=void 0!==L.bevelSegments?L.bevelSegments:3;const C=L.extrudePath,Q=void 0!==L.UVGenerator?L.UVGenerator:Y_;let T,i,D,w,x,d=!1;C&&(T=C.getSpacedPoints(O),d=!0,m=!1,i=C.computeFrenetFrames(O,!1),D=new fN,w=new fN,x=new fN),m||(g=0,k=0,_=0,W=0);const o=y.extractPoints(z);let U=o.shape;const I=o.holes;if(!u_.isClockWise(U)){U=U.reverse();for(let y=0,L=I.length;y<L;y++){const L=I[y];u_.isClockWise(L)&&(I[y]=L.reverse())}}const V=u_.triangulateShape(U,I),F=U;for(let y=0,L=I.length;y<L;y++){const L=I[y];U=U.concat(L)}function u(y,L,p){return L||console.error("THREE.ExtrudeGeometry: vec does not exist"),y.clone().addScaledVector(L,p)}const S=U.length,B=V.length;function R(y,L,p){let N,t,j;const z=y.x-L.x,O=y.y-L.y,h=p.x-y.x,m=p.y-y.y,k=z*z+O*O,_=z*m-O*h;if(Math.abs(_)>Number.EPSILON){const _=Math.sqrt(k),W=Math.sqrt(h*h+m*m),g=L.x-O/_,C=L.y+z/_,Q=((p.x-m/W-g)*m-(p.y+h/W-C)*h)/(z*m-O*h);N=g+z*Q-y.x,t=C+O*Q-y.y;const T=N*N+t*t;if(T<=2)return new tN(N,t);j=Math.sqrt(T/2)}else{let y=!1;z>Number.EPSILON?h>Number.EPSILON&&(y=!0):z<-Number.EPSILON?h<-Number.EPSILON&&(y=!0):Math.sign(O)===Math.sign(m)&&(y=!0),y?(N=-O,t=z,j=Math.sqrt(k)):(N=z,t=O,j=Math.sqrt(k/2))}return new tN(N/j,t/j)}const Y=[];for(let y=0,L=F.length,p=L-1,N=y+1;y<L;y++,p++,N++)p===L&&(p=0),N===L&&(N=0),Y[y]=R(F[y],F[p],F[N]);const E=[];let P,l=Y.concat();for(let y=0,L=I.length;y<L;y++){const L=I[y];P=[];for(let y=0,p=L.length,N=p-1,t=y+1;y<p;y++,N++,t++)N===p&&(N=0),t===p&&(t=0),P[y]=R(L[y],L[N],L[t]);E.push(P),l=l.concat(P)}for(let y=0;y<g;y++){const L=y/g,p=k*Math.cos(L*Math.PI/2),N=_*Math.sin(L*Math.PI/2)+W;for(let y=0,L=F.length;y<L;y++){const L=u(F[y],Y[y],N);a(L.x,L.y,-p)}for(let y=0,L=I.length;y<L;y++){const L=I[y];P=E[y];for(let y=0,t=L.length;y<t;y++){const t=u(L[y],P[y],N);a(t.x,t.y,-p)}}}const M=_+W;for(let y=0;y<S;y++){const L=m?u(U[y],l[y],M):U[y];d?(w.copy(i.normals[0]).multiplyScalar(L.x),D.copy(i.binormals[0]).multiplyScalar(L.y),x.copy(T[0]).add(w).add(D),a(x.x,x.y,x.z)):a(L.x,L.y,0)}for(let y=1;y<=O;y++)for(let L=0;L<S;L++){const p=m?u(U[L],l[L],M):U[L];d?(w.copy(i.normals[y]).multiplyScalar(p.x),D.copy(i.binormals[y]).multiplyScalar(p.y),x.copy(T[y]).add(w).add(D),a(x.x,x.y,x.z)):a(p.x,p.y,h/O*y)}for(let y=g-1;y>=0;y--){const L=y/g,p=k*Math.cos(L*Math.PI/2),N=_*Math.sin(L*Math.PI/2)+W;for(let y=0,L=F.length;y<L;y++){const L=u(F[y],Y[y],N);a(L.x,L.y,h+p)}for(let y=0,L=I.length;y<L;y++){const L=I[y];P=E[y];for(let y=0,t=L.length;y<t;y++){const t=u(L[y],P[y],N);d?a(t.x,t.y+T[O-1].y,T[O-1].x+p):a(t.x,t.y,h+p)}}}function f(y,L){let p=y.length;for(;--p>=0;){const N=p;let t=p-1;t<0&&(t=y.length-1);for(let y=0,p=O+2*g;y<p;y++){const p=S*y,j=S*(y+1);X(L+N+p,L+t+p,L+t+j,L+N+j)}}}function a(y,L,p){j.push(y),j.push(L),j.push(p)}function H(y,L,t){J(y),J(L),J(t);const j=N.length/3,z=Q.generateTopUV(p,N,j-3,j-2,j-1);r(z[0]),r(z[1]),r(z[2])}function X(y,L,t,j){J(y),J(L),J(j),J(L),J(t),J(j);const z=N.length/3,O=Q.generateSideWallUV(p,N,z-6,z-3,z-2,z-1);r(O[0]),r(O[1]),r(O[3]),r(O[1]),r(O[2]),r(O[3])}function J(y){N.push(j[3*y+0]),N.push(j[3*y+1]),N.push(j[3*y+2])}function r(y){t.push(y.x),t.push(y.y)}(function(){const y=N.length/3;if(m){let y=0,L=S*y;for(let y=0;y<B;y++){const p=V[y];H(p[2]+L,p[1]+L,p[0]+L)}y=O+2*g,L=S*y;for(let y=0;y<B;y++){const p=V[y];H(p[0]+L,p[1]+L,p[2]+L)}}else{for(let y=0;y<B;y++){const L=V[y];H(L[2],L[1],L[0])}for(let y=0;y<B;y++){const L=V[y];H(L[0]+S*O,L[1]+S*O,L[2]+S*O)}}p.addGroup(y,N.length/3-y,0)})(),function(){const y=N.length/3;let L=0;f(F,L),L+=F.length;for(let y=0,p=I.length;y<p;y++){const p=I[y];f(p,L),L+=p.length}p.addGroup(y,N.length/3-y,1)}()}this.setAttribute("position",new dj(N,3)),this.setAttribute("uv",new dj(t,2)),this.computeVertexNormals()}copy(y){return super.copy(y),this.parameters=Object.assign({},y.parameters),this}toJSON(){const y=super.toJSON();return function(y,L,p){if(p.shapes=[],Array.isArray(y))for(let L=0,N=y.length;L<N;L++){const N=y[L];p.shapes.push(N.uuid)}else p.shapes.push(y.uuid);return p.options=Object.assign({},L),void 0!==L.extrudePath&&(p.options.extrudePath=L.extrudePath.toJSON()),p}(this.parameters.shapes,this.parameters.options,y)}static fromJSON(y,L){const p=[];for(let N=0,t=y.shapes.length;N<t;N++){const t=L[y.shapes[N]];p.push(t)}const N=y.options.extrudePath;return void 0!==N&&(y.options.extrudePath=(new rk[N.type]).fromJSON(N)),new R_(p,y.options)}}const Y_={generateTopUV:function(y,L,p,N,t){const j=L[3*p],z=L[3*p+1],O=L[3*N],h=L[3*N+1],m=L[3*t],k=L[3*t+1];return[new tN(j,z),new tN(O,h),new tN(m,k)]},generateSideWallUV:function(y,L,p,N,t,j){const z=L[3*p],O=L[3*p+1],h=L[3*p+2],m=L[3*N],k=L[3*N+1],_=L[3*N+2],W=L[3*t],g=L[3*t+1],C=L[3*t+2],Q=L[3*j],T=L[3*j+1],i=L[3*j+2];return Math.abs(O-k)<Math.abs(z-m)?[new tN(z,1-h),new tN(m,1-_),new tN(W,1-C),new tN(Q,1-i)]:[new tN(O,1-h),new tN(k,1-_),new tN(g,1-C),new tN(T,1-i)]}};class E_ extends bk{constructor(y=1,L=0){const p=(1+Math.sqrt(5))/2;super([-1,p,0,1,p,0,-1,-p,0,1,-p,0,0,-1,p,0,1,p,0,-1,-p,0,1,-p,p,0,-1,p,0,1,-p,0,-1,-p,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],y,L),this.type="IcosahedronGeometry",this.parameters={radius:y,detail:L}}static fromJSON(y){return new E_(y.radius,y.detail)}}class P_ extends bk{constructor(y=1,L=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],y,L),this.type="OctahedronGeometry",this.parameters={radius:y,detail:L}}static fromJSON(y){return new P_(y.radius,y.detail)}}class l_ extends Rj{constructor(y=.5,L=1,p=32,N=1,t=0,j=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:y,outerRadius:L,thetaSegments:p,phiSegments:N,thetaStart:t,thetaLength:j},p=Math.max(3,p);const z=[],O=[],h=[],m=[];let k=y;const _=(L-y)/(N=Math.max(1,N)),W=new fN,g=new tN;for(let y=0;y<=N;y++){for(let y=0;y<=p;y++){const N=t+y/p*j;W.x=k*Math.cos(N),W.y=k*Math.sin(N),O.push(W.x,W.y,W.z),h.push(0,0,1),g.x=(W.x/L+1)/2,g.y=(W.y/L+1)/2,m.push(g.x,g.y)}k+=_}for(let y=0;y<N;y++){const L=y*(p+1);for(let y=0;y<p;y++){const N=y+L,t=N,j=N+p+1,O=N+p+2,h=N+1;z.push(t,j,h),z.push(j,O,h)}}this.setIndex(z),this.setAttribute("position",new dj(O,3)),this.setAttribute("normal",new dj(h,3)),this.setAttribute("uv",new dj(m,2))}copy(y){return super.copy(y),this.parameters=Object.assign({},y.parameters),this}static fromJSON(y){return new l_(y.innerRadius,y.outerRadius,y.thetaSegments,y.phiSegments,y.thetaStart,y.thetaLength)}}class M_ extends Rj{constructor(y=new p_([new tN(0,.5),new tN(-.5,-.5),new tN(.5,-.5)]),L=12){super(),this.type="ShapeGeometry",this.parameters={shapes:y,curveSegments:L};const p=[],N=[],t=[],j=[];let z=0,O=0;if(!1===Array.isArray(y))h(y);else for(let L=0;L<y.length;L++)h(y[L]),this.addGroup(z,O,L),z+=O,O=0;function h(y){const z=N.length/3,h=y.extractPoints(L);let m=h.shape;const k=h.holes;!1===u_.isClockWise(m)&&(m=m.reverse());for(let y=0,L=k.length;y<L;y++){const L=k[y];!0===u_.isClockWise(L)&&(k[y]=L.reverse())}const _=u_.triangulateShape(m,k);for(let y=0,L=k.length;y<L;y++){const L=k[y];m=m.concat(L)}for(let y=0,L=m.length;y<L;y++){const L=m[y];N.push(L.x,L.y,0),t.push(0,0,1),j.push(L.x,L.y)}for(let y=0,L=_.length;y<L;y++){const L=_[y],N=L[0]+z,t=L[1]+z,j=L[2]+z;p.push(N,t,j),O+=3}}this.setIndex(p),this.setAttribute("position",new dj(N,3)),this.setAttribute("normal",new dj(t,3)),this.setAttribute("uv",new dj(j,2))}copy(y){return super.copy(y),this.parameters=Object.assign({},y.parameters),this}toJSON(){const y=super.toJSON();return function(y,L){if(L.shapes=[],Array.isArray(y))for(let p=0,N=y.length;p<N;p++){const N=y[p];L.shapes.push(N.uuid)}else L.shapes.push(y.uuid);return L}(this.parameters.shapes,y)}static fromJSON(y,L){const p=[];for(let N=0,t=y.shapes.length;N<t;N++){const t=L[y.shapes[N]];p.push(t)}return new M_(p,y.curveSegments)}}class f_ extends Rj{constructor(y=1,L=32,p=16,N=0,t=2*Math.PI,j=0,z=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:y,widthSegments:L,heightSegments:p,phiStart:N,phiLength:t,thetaStart:j,thetaLength:z},L=Math.max(3,Math.floor(L)),p=Math.max(2,Math.floor(p));const O=Math.min(j+z,Math.PI);let h=0;const m=[],k=new fN,_=new fN,W=[],g=[],C=[],Q=[];for(let W=0;W<=p;W++){const T=[],i=W/p;let D=0;0===W&&0===j?D=.5/L:W===p&&O===Math.PI&&(D=-.5/L);for(let p=0;p<=L;p++){const O=p/L;k.x=-y*Math.cos(N+O*t)*Math.sin(j+i*z),k.y=y*Math.cos(j+i*z),k.z=y*Math.sin(N+O*t)*Math.sin(j+i*z),g.push(k.x,k.y,k.z),_.copy(k).normalize(),C.push(_.x,_.y,_.z),Q.push(O+D,1-i),T.push(h++)}m.push(T)}for(let y=0;y<p;y++)for(let N=0;N<L;N++){const L=m[y][N+1],t=m[y][N],z=m[y+1][N],h=m[y+1][N+1];(0!==y||j>0)&&W.push(L,t,h),(y!==p-1||O<Math.PI)&&W.push(t,z,h)}this.setIndex(W),this.setAttribute("position",new dj(g,3)),this.setAttribute("normal",new dj(C,3)),this.setAttribute("uv",new dj(Q,2))}copy(y){return super.copy(y),this.parameters=Object.assign({},y.parameters),this}static fromJSON(y){return new f_(y.radius,y.widthSegments,y.heightSegments,y.phiStart,y.phiLength,y.thetaStart,y.thetaLength)}}class a_ extends bk{constructor(y=1,L=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],y,L),this.type="TetrahedronGeometry",this.parameters={radius:y,detail:L}}static fromJSON(y){return new a_(y.radius,y.detail)}}class H_ extends Rj{constructor(y=1,L=.4,p=12,N=48,t=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:y,tube:L,radialSegments:p,tubularSegments:N,arc:t},p=Math.floor(p),N=Math.floor(N);const j=[],z=[],O=[],h=[],m=new fN,k=new fN,_=new fN;for(let j=0;j<=p;j++)for(let W=0;W<=N;W++){const g=W/N*t,C=j/p*Math.PI*2;k.x=(y+L*Math.cos(C))*Math.cos(g),k.y=(y+L*Math.cos(C))*Math.sin(g),k.z=L*Math.sin(C),z.push(k.x,k.y,k.z),m.x=y*Math.cos(g),m.y=y*Math.sin(g),_.subVectors(k,m).normalize(),O.push(_.x,_.y,_.z),h.push(W/N),h.push(j/p)}for(let y=1;y<=p;y++)for(let L=1;L<=N;L++){const p=(N+1)*y+L-1,t=(N+1)*(y-1)+L-1,z=(N+1)*(y-1)+L,O=(N+1)*y+L;j.push(p,t,O),j.push(t,z,O)}this.setIndex(j),this.setAttribute("position",new dj(z,3)),this.setAttribute("normal",new dj(O,3)),this.setAttribute("uv",new dj(h,2))}copy(y){return super.copy(y),this.parameters=Object.assign({},y.parameters),this}static fromJSON(y){return new H_(y.radius,y.tube,y.radialSegments,y.tubularSegments,y.arc)}}class X_ extends Rj{constructor(y=1,L=.4,p=64,N=8,t=2,j=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:y,tube:L,tubularSegments:p,radialSegments:N,p:t,q:j},p=Math.floor(p),N=Math.floor(N);const z=[],O=[],h=[],m=[],k=new fN,_=new fN,W=new fN,g=new fN,C=new fN,Q=new fN,T=new fN;for(let z=0;z<=p;++z){const D=z/p*t*Math.PI*2;i(D,t,j,y,W),i(D+.01,t,j,y,g),Q.subVectors(g,W),T.addVectors(g,W),C.crossVectors(Q,T),T.crossVectors(C,Q),C.normalize(),T.normalize();for(let y=0;y<=N;++y){const t=y/N*Math.PI*2,j=-L*Math.cos(t),g=L*Math.sin(t);k.x=W.x+(j*T.x+g*C.x),k.y=W.y+(j*T.y+g*C.y),k.z=W.z+(j*T.z+g*C.z),O.push(k.x,k.y,k.z),_.subVectors(k,W).normalize(),h.push(_.x,_.y,_.z),m.push(z/p),m.push(y/N)}}for(let y=1;y<=p;y++)for(let L=1;L<=N;L++){const p=(N+1)*(y-1)+(L-1),t=(N+1)*y+(L-1),j=(N+1)*y+L,O=(N+1)*(y-1)+L;z.push(p,t,O),z.push(t,j,O)}function i(y,L,p,N,t){const j=Math.cos(y),z=Math.sin(y),O=p/L*y,h=Math.cos(O);t.x=N*(2+h)*.5*j,t.y=N*(2+h)*z*.5,t.z=N*Math.sin(O)*.5}this.setIndex(z),this.setAttribute("position",new dj(O,3)),this.setAttribute("normal",new dj(h,3)),this.setAttribute("uv",new dj(m,2))}copy(y){return super.copy(y),this.parameters=Object.assign({},y.parameters),this}static fromJSON(y){return new X_(y.radius,y.tube,y.tubularSegments,y.radialSegments,y.p,y.q)}}class J_ extends Rj{constructor(y=new Xk(new fN(-1,-1,0),new fN(-1,1,0),new fN(1,1,0)),L=64,p=1,N=8,t=!1){super(),this.type="TubeGeometry",this.parameters={path:y,tubularSegments:L,radius:p,radialSegments:N,closed:t};const j=y.computeFrenetFrames(L,t);this.tangents=j.tangents,this.normals=j.normals,this.binormals=j.binormals;const z=new fN,O=new fN,h=new tN;let m=new fN;const k=[],_=[],W=[],g=[];function C(t){m=y.getPointAt(t/L,m);const h=j.normals[t],W=j.binormals[t];for(let y=0;y<=N;y++){const L=y/N*Math.PI*2,t=Math.sin(L),j=-Math.cos(L);O.x=j*h.x+t*W.x,O.y=j*h.y+t*W.y,O.z=j*h.z+t*W.z,O.normalize(),_.push(O.x,O.y,O.z),z.x=m.x+p*O.x,z.y=m.y+p*O.y,z.z=m.z+p*O.z,k.push(z.x,z.y,z.z)}}(function(){for(let y=0;y<L;y++)C(y);C(!1===t?L:0),function(){for(let y=0;y<=L;y++)for(let p=0;p<=N;p++)h.x=y/L,h.y=p/N,W.push(h.x,h.y)}(),function(){for(let y=1;y<=L;y++)for(let L=1;L<=N;L++){const p=(N+1)*(y-1)+(L-1),t=(N+1)*y+(L-1),j=(N+1)*y+L,z=(N+1)*(y-1)+L;g.push(p,t,z),g.push(t,j,z)}}()})(),this.setIndex(g),this.setAttribute("position",new dj(k,3)),this.setAttribute("normal",new dj(_,3)),this.setAttribute("uv",new dj(W,2))}copy(y){return super.copy(y),this.parameters=Object.assign({},y.parameters),this}toJSON(){const y=super.toJSON();return y.path=this.parameters.path.toJSON(),y}static fromJSON(y){return new J_((new rk[y.path.type]).fromJSON(y.path),y.tubularSegments,y.radius,y.radialSegments,y.closed)}}class r_ extends Rj{constructor(y=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:y},null!==y){const L=[],p=new Set,N=new fN,t=new fN;if(null!==y.index){const j=y.attributes.position,z=y.index;let O=y.groups;0===O.length&&(O=[{start:0,count:z.count,materialIndex:0}]);for(let y=0,h=O.length;y<h;++y){const h=O[y],m=h.start;for(let y=m,O=m+h.count;y<O;y+=3)for(let O=0;O<3;O++){const h=z.getX(y+O),m=z.getX(y+(O+1)%3);N.fromBufferAttribute(j,h),t.fromBufferAttribute(j,m),!0===G_(N,t,p)&&(L.push(N.x,N.y,N.z),L.push(t.x,t.y,t.z))}}}else{const j=y.attributes.position;for(let y=0,z=j.count/3;y<z;y++)for(let z=0;z<3;z++){const O=3*y+z,h=3*y+(z+1)%3;N.fromBufferAttribute(j,O),t.fromBufferAttribute(j,h),!0===G_(N,t,p)&&(L.push(N.x,N.y,N.z),L.push(t.x,t.y,t.z))}}this.setAttribute("position",new dj(L,3))}}copy(y){return super.copy(y),this.parameters=Object.assign({},y.parameters),this}}function G_(y,L,p){const N=`${y.x},${y.y},${y.z}-${L.x},${L.y},${L.z}`,t=`${L.x},${L.y},${L.z}-${y.x},${y.y},${y.z}`;return!0!==p.has(N)&&!0!==p.has(t)&&(p.add(N),p.add(t),!0)}var $_=Object.freeze({__proto__:null,BoxGeometry:nj,CapsuleGeometry:Ak,CircleGeometry:sk,ConeGeometry:Kk,CylinderGeometry:ck,DodecahedronGeometry:nk,EdgesGeometry:L_,ExtrudeGeometry:R_,IcosahedronGeometry:E_,LatheGeometry:qk,OctahedronGeometry:P_,PlaneGeometry:xz,PolyhedronGeometry:bk,RingGeometry:l_,ShapeGeometry:M_,SphereGeometry:f_,TetrahedronGeometry:a_,TorusGeometry:H_,TorusKnotGeometry:X_,TubeGeometry:J_,WireframeGeometry:r_});class q_ extends vt{constructor(y){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new pj(0),this.transparent=!0,this.fog=!0,this.setValues(y)}copy(y){return super.copy(y),this.color.copy(y.color),this.fog=y.fog,this}}class A_ extends Nz{constructor(y){super(y),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class s_ extends vt{constructor(y){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new pj(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pj(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ZL,this.normalScale=new tN(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(y)}copy(y){return super.copy(y),this.defines={STANDARD:""},this.color.copy(y.color),this.roughness=y.roughness,this.metalness=y.metalness,this.map=y.map,this.lightMap=y.lightMap,this.lightMapIntensity=y.lightMapIntensity,this.aoMap=y.aoMap,this.aoMapIntensity=y.aoMapIntensity,this.emissive.copy(y.emissive),this.emissiveMap=y.emissiveMap,this.emissiveIntensity=y.emissiveIntensity,this.bumpMap=y.bumpMap,this.bumpScale=y.bumpScale,this.normalMap=y.normalMap,this.normalMapType=y.normalMapType,this.normalScale.copy(y.normalScale),this.displacementMap=y.displacementMap,this.displacementScale=y.displacementScale,this.displacementBias=y.displacementBias,this.roughnessMap=y.roughnessMap,this.metalnessMap=y.metalnessMap,this.alphaMap=y.alphaMap,this.envMap=y.envMap,this.envMapIntensity=y.envMapIntensity,this.wireframe=y.wireframe,this.wireframeLinewidth=y.wireframeLinewidth,this.wireframeLinecap=y.wireframeLinecap,this.wireframeLinejoin=y.wireframeLinejoin,this.flatShading=y.flatShading,this.fog=y.fog,this}}class c_ extends s_{constructor(y){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new tN(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return bp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(y){this.ior=(1+.4*y)/(1-.4*y)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new pj(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new pj(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new pj(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(y)}get anisotropy(){return this._anisotropy}set anisotropy(y){this._anisotropy>0!=y>0&&this.version++,this._anisotropy=y}get clearcoat(){return this._clearcoat}set clearcoat(y){this._clearcoat>0!=y>0&&this.version++,this._clearcoat=y}get iridescence(){return this._iridescence}set iridescence(y){this._iridescence>0!=y>0&&this.version++,this._iridescence=y}get sheen(){return this._sheen}set sheen(y){this._sheen>0!=y>0&&this.version++,this._sheen=y}get transmission(){return this._transmission}set transmission(y){this._transmission>0!=y>0&&this.version++,this._transmission=y}copy(y){return super.copy(y),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=y.anisotropy,this.anisotropyRotation=y.anisotropyRotation,this.anisotropyMap=y.anisotropyMap,this.clearcoat=y.clearcoat,this.clearcoatMap=y.clearcoatMap,this.clearcoatRoughness=y.clearcoatRoughness,this.clearcoatRoughnessMap=y.clearcoatRoughnessMap,this.clearcoatNormalMap=y.clearcoatNormalMap,this.clearcoatNormalScale.copy(y.clearcoatNormalScale),this.ior=y.ior,this.iridescence=y.iridescence,this.iridescenceMap=y.iridescenceMap,this.iridescenceIOR=y.iridescenceIOR,this.iridescenceThicknessRange=[...y.iridescenceThicknessRange],this.iridescenceThicknessMap=y.iridescenceThicknessMap,this.sheen=y.sheen,this.sheenColor.copy(y.sheenColor),this.sheenColorMap=y.sheenColorMap,this.sheenRoughness=y.sheenRoughness,this.sheenRoughnessMap=y.sheenRoughnessMap,this.transmission=y.transmission,this.transmissionMap=y.transmissionMap,this.thickness=y.thickness,this.thicknessMap=y.thicknessMap,this.attenuationDistance=y.attenuationDistance,this.attenuationColor.copy(y.attenuationColor),this.specularIntensity=y.specularIntensity,this.specularIntensityMap=y.specularIntensityMap,this.specularColor.copy(y.specularColor),this.specularColorMap=y.specularColorMap,this}}class K_ extends vt{constructor(y){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new pj(16777215),this.specular=new pj(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pj(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ZL,this.normalScale=new tN(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=my,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(y)}copy(y){return super.copy(y),this.color.copy(y.color),this.specular.copy(y.specular),this.shininess=y.shininess,this.map=y.map,this.lightMap=y.lightMap,this.lightMapIntensity=y.lightMapIntensity,this.aoMap=y.aoMap,this.aoMapIntensity=y.aoMapIntensity,this.emissive.copy(y.emissive),this.emissiveMap=y.emissiveMap,this.emissiveIntensity=y.emissiveIntensity,this.bumpMap=y.bumpMap,this.bumpScale=y.bumpScale,this.normalMap=y.normalMap,this.normalMapType=y.normalMapType,this.normalScale.copy(y.normalScale),this.displacementMap=y.displacementMap,this.displacementScale=y.displacementScale,this.displacementBias=y.displacementBias,this.specularMap=y.specularMap,this.alphaMap=y.alphaMap,this.envMap=y.envMap,this.combine=y.combine,this.reflectivity=y.reflectivity,this.refractionRatio=y.refractionRatio,this.wireframe=y.wireframe,this.wireframeLinewidth=y.wireframeLinewidth,this.wireframeLinecap=y.wireframeLinecap,this.wireframeLinejoin=y.wireframeLinejoin,this.flatShading=y.flatShading,this.fog=y.fog,this}}class b_ extends vt{constructor(y){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new pj(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pj(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ZL,this.normalScale=new tN(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(y)}copy(y){return super.copy(y),this.color.copy(y.color),this.map=y.map,this.gradientMap=y.gradientMap,this.lightMap=y.lightMap,this.lightMapIntensity=y.lightMapIntensity,this.aoMap=y.aoMap,this.aoMapIntensity=y.aoMapIntensity,this.emissive.copy(y.emissive),this.emissiveMap=y.emissiveMap,this.emissiveIntensity=y.emissiveIntensity,this.bumpMap=y.bumpMap,this.bumpScale=y.bumpScale,this.normalMap=y.normalMap,this.normalMapType=y.normalMapType,this.normalScale.copy(y.normalScale),this.displacementMap=y.displacementMap,this.displacementScale=y.displacementScale,this.displacementBias=y.displacementBias,this.alphaMap=y.alphaMap,this.wireframe=y.wireframe,this.wireframeLinewidth=y.wireframeLinewidth,this.wireframeLinecap=y.wireframeLinecap,this.wireframeLinejoin=y.wireframeLinejoin,this.fog=y.fog,this}}class n_ extends vt{constructor(y){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ZL,this.normalScale=new tN(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(y)}copy(y){return super.copy(y),this.bumpMap=y.bumpMap,this.bumpScale=y.bumpScale,this.normalMap=y.normalMap,this.normalMapType=y.normalMapType,this.normalScale.copy(y.normalScale),this.displacementMap=y.displacementMap,this.displacementScale=y.displacementScale,this.displacementBias=y.displacementBias,this.wireframe=y.wireframe,this.wireframeLinewidth=y.wireframeLinewidth,this.flatShading=y.flatShading,this}}class v_ extends vt{constructor(y){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new pj(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pj(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ZL,this.normalScale=new tN(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=my,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(y)}copy(y){return super.copy(y),this.color.copy(y.color),this.map=y.map,this.lightMap=y.lightMap,this.lightMapIntensity=y.lightMapIntensity,this.aoMap=y.aoMap,this.aoMapIntensity=y.aoMapIntensity,this.emissive.copy(y.emissive),this.emissiveMap=y.emissiveMap,this.emissiveIntensity=y.emissiveIntensity,this.bumpMap=y.bumpMap,this.bumpScale=y.bumpScale,this.normalMap=y.normalMap,this.normalMapType=y.normalMapType,this.normalScale.copy(y.normalScale),this.displacementMap=y.displacementMap,this.displacementScale=y.displacementScale,this.displacementBias=y.displacementBias,this.specularMap=y.specularMap,this.alphaMap=y.alphaMap,this.envMap=y.envMap,this.combine=y.combine,this.reflectivity=y.reflectivity,this.refractionRatio=y.refractionRatio,this.wireframe=y.wireframe,this.wireframeLinewidth=y.wireframeLinewidth,this.wireframeLinecap=y.wireframeLinecap,this.wireframeLinejoin=y.wireframeLinejoin,this.flatShading=y.flatShading,this.fog=y.fog,this}}class e_ extends vt{constructor(y){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new pj(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ZL,this.normalScale=new tN(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(y)}copy(y){return super.copy(y),this.defines={MATCAP:""},this.color.copy(y.color),this.matcap=y.matcap,this.map=y.map,this.bumpMap=y.bumpMap,this.bumpScale=y.bumpScale,this.normalMap=y.normalMap,this.normalMapType=y.normalMapType,this.normalScale.copy(y.normalScale),this.displacementMap=y.displacementMap,this.displacementScale=y.displacementScale,this.displacementBias=y.displacementBias,this.alphaMap=y.alphaMap,this.flatShading=y.flatShading,this.fog=y.fog,this}}class Z_ extends em{constructor(y){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(y)}copy(y){return super.copy(y),this.scale=y.scale,this.dashSize=y.dashSize,this.gapSize=y.gapSize,this}}function yW(y,L,p){return pW(y)?new y.constructor(y.subarray(L,void 0!==p?p:y.length)):y.slice(L,p)}function LW(y,L,p){return!y||!p&&y.constructor===L?y:"number"==typeof L.BYTES_PER_ELEMENT?new L(y):Array.prototype.slice.call(y)}function pW(y){return ArrayBuffer.isView(y)&&!(y instanceof DataView)}function NW(y){const L=y.length,p=new Array(L);for(let y=0;y!==L;++y)p[y]=y;return p.sort((function(L,p){return y[L]-y[p]})),p}function tW(y,L,p){const N=y.length,t=new y.constructor(N);for(let j=0,z=0;z!==N;++j){const N=p[j]*L;for(let p=0;p!==L;++p)t[z++]=y[N+p]}return t}function jW(y,L,p,N){let t=1,j=y[0];for(;void 0!==j&&void 0===j[N];)j=y[t++];if(void 0===j)return;let z=j[N];if(void 0!==z)if(Array.isArray(z))do{z=j[N],void 0!==z&&(L.push(j.time),p.push.apply(p,z)),j=y[t++]}while(void 0!==j);else if(void 0!==z.toArray)do{z=j[N],void 0!==z&&(L.push(j.time),z.toArray(p,p.length)),j=y[t++]}while(void 0!==j);else do{z=j[N],void 0!==z&&(L.push(j.time),p.push(z)),j=y[t++]}while(void 0!==j)}const zW={arraySlice:yW,convertArray:LW,isTypedArray:pW,getKeyframeOrder:NW,sortedArray:tW,flattenJSON:jW,subclip:function(y,L,p,N,t=30){const j=y.clone();j.name=L;const z=[];for(let y=0;y<j.tracks.length;++y){const L=j.tracks[y],O=L.getValueSize(),h=[],m=[];for(let y=0;y<L.times.length;++y){const j=L.times[y]*t;if(!(j<p||j>=N)){h.push(L.times[y]);for(let p=0;p<O;++p)m.push(L.values[y*O+p])}}0!==h.length&&(L.times=LW(h,L.times.constructor),L.values=LW(m,L.values.constructor),z.push(L))}j.tracks=z;let O=1/0;for(let y=0;y<j.tracks.length;++y)O>j.tracks[y].times[0]&&(O=j.tracks[y].times[0]);for(let y=0;y<j.tracks.length;++y)j.tracks[y].shift(-1*O);return j.resetDuration(),j},makeClipAdditive:function(y,L=0,p=y,N=30){N<=0&&(N=30);const t=p.tracks.length,j=L/N;for(let L=0;L<t;++L){const N=p.tracks[L],t=N.ValueTypeName;if("bool"===t||"string"===t)continue;const z=y.tracks.find((function(y){return y.name===N.name&&y.ValueTypeName===t}));if(void 0===z)continue;let O=0;const h=N.getValueSize();N.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(O=h/3);let m=0;const k=z.getValueSize();z.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=k/3);const _=N.times.length-1;let W;if(j<=N.times[0]){const y=O,L=h-O;W=yW(N.values,y,L)}else if(j>=N.times[_]){const y=_*h+O,L=y+h-O;W=yW(N.values,y,L)}else{const y=N.createInterpolant(),L=O,p=h-O;y.evaluate(j),W=yW(y.resultBuffer,L,p)}"quaternion"===t&&(new MN).fromArray(W).normalize().conjugate().toArray(W);const g=z.times.length;for(let y=0;y<g;++y){const L=y*k+m;if("quaternion"===t)MN.multiplyQuaternionsFlat(z.values,L,W,0,z.values,L);else{const y=k-2*m;for(let p=0;p<y;++p)z.values[L+p]-=W[p]}}}return y.blendMode=AL,y}};class OW{constructor(y,L,p,N){this.parameterPositions=y,this._cachedIndex=0,this.resultBuffer=void 0!==N?N:new L.constructor(p),this.sampleValues=L,this.valueSize=p,this.settings=null,this.DefaultSettings_={}}evaluate(y){const L=this.parameterPositions;let p=this._cachedIndex,N=L[p],t=L[p-1];y:{L:{let j;p:{N:if(!(y<N)){for(let j=p+2;;){if(void 0===N){if(y<t)break N;return p=L.length,this._cachedIndex=p,this.copySampleValue_(p-1)}if(p===j)break;if(t=N,N=L[++p],y<N)break L}j=L.length;break p}if(y>=t)break y;{const z=L[1];y<z&&(p=2,t=z);for(let j=p-2;;){if(void 0===t)return this._cachedIndex=0,this.copySampleValue_(0);if(p===j)break;if(N=t,t=L[--p-1],y>=t)break L}j=p,p=0}}for(;p<j;){const N=p+j>>>1;y<L[N]?j=N:p=N+1}if(N=L[p],t=L[p-1],void 0===t)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===N)return p=L.length,this._cachedIndex=p,this.copySampleValue_(p-1)}this._cachedIndex=p,this.intervalChanged_(p,t,N)}return this.interpolate_(p,t,y,N)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(y){const L=this.resultBuffer,p=this.sampleValues,N=this.valueSize,t=y*N;for(let y=0;y!==N;++y)L[y]=p[t+y];return L}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class hW extends OW{constructor(y,L,p,N){super(y,L,p,N),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:rL,endingEnd:rL}}intervalChanged_(y,L,p){const N=this.parameterPositions;let t=y-2,j=y+1,z=N[t],O=N[j];if(void 0===z)switch(this.getSettings_().endingStart){case GL:t=y,z=2*L-p;break;case $L:t=N.length-2,z=L+N[t]-N[t+1];break;default:t=y,z=p}if(void 0===O)switch(this.getSettings_().endingEnd){case GL:j=y,O=2*p-L;break;case $L:j=1,O=p+N[1]-N[0];break;default:j=y-1,O=L}const h=.5*(p-L),m=this.valueSize;this._weightPrev=h/(L-z),this._weightNext=h/(O-p),this._offsetPrev=t*m,this._offsetNext=j*m}interpolate_(y,L,p,N){const t=this.resultBuffer,j=this.sampleValues,z=this.valueSize,O=y*z,h=O-z,m=this._offsetPrev,k=this._offsetNext,_=this._weightPrev,W=this._weightNext,g=(p-L)/(N-L),C=g*g,Q=C*g,T=-_*Q+2*_*C-_*g,i=(1+_)*Q+(-1.5-2*_)*C+(-.5+_)*g+1,D=(-1-W)*Q+(1.5+W)*C+.5*g,w=W*Q-W*C;for(let y=0;y!==z;++y)t[y]=T*j[m+y]+i*j[h+y]+D*j[O+y]+w*j[k+y];return t}}class mW extends OW{constructor(y,L,p,N){super(y,L,p,N)}interpolate_(y,L,p,N){const t=this.resultBuffer,j=this.sampleValues,z=this.valueSize,O=y*z,h=O-z,m=(p-L)/(N-L),k=1-m;for(let y=0;y!==z;++y)t[y]=j[h+y]*k+j[O+y]*m;return t}}class kW extends OW{constructor(y,L,p,N){super(y,L,p,N)}interpolate_(y){return this.copySampleValue_(y-1)}}class _W{constructor(y,L,p,N){if(void 0===y)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===L||0===L.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+y);this.name=y,this.times=LW(L,this.TimeBufferType),this.values=LW(p,this.ValueBufferType),this.setInterpolation(N||this.DefaultInterpolation)}static toJSON(y){const L=y.constructor;let p;if(L.toJSON!==this.toJSON)p=L.toJSON(y);else{p={name:y.name,times:LW(y.times,Array),values:LW(y.values,Array)};const L=y.getInterpolation();L!==y.DefaultInterpolation&&(p.interpolation=L)}return p.type=y.ValueTypeName,p}InterpolantFactoryMethodDiscrete(y){return new kW(this.times,this.values,this.getValueSize(),y)}InterpolantFactoryMethodLinear(y){return new mW(this.times,this.values,this.getValueSize(),y)}InterpolantFactoryMethodSmooth(y){return new hW(this.times,this.values,this.getValueSize(),y)}setInterpolation(y){let L;switch(y){case HL:L=this.InterpolantFactoryMethodDiscrete;break;case XL:L=this.InterpolantFactoryMethodLinear;break;case JL:L=this.InterpolantFactoryMethodSmooth}if(void 0===L){const L="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(y===this.DefaultInterpolation)throw new Error(L);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",L),this}return this.createInterpolant=L,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return HL;case this.InterpolantFactoryMethodLinear:return XL;case this.InterpolantFactoryMethodSmooth:return JL}}getValueSize(){return this.values.length/this.times.length}shift(y){if(0!==y){const L=this.times;for(let p=0,N=L.length;p!==N;++p)L[p]+=y}return this}scale(y){if(1!==y){const L=this.times;for(let p=0,N=L.length;p!==N;++p)L[p]*=y}return this}trim(y,L){const p=this.times,N=p.length;let t=0,j=N-1;for(;t!==N&&p[t]<y;)++t;for(;-1!==j&&p[j]>L;)--j;if(++j,0!==t||j!==N){t>=j&&(j=Math.max(j,1),t=j-1);const y=this.getValueSize();this.times=yW(p,t,j),this.values=yW(this.values,t*y,j*y)}return this}validate(){let y=!0;const L=this.getValueSize();L-Math.floor(L)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),y=!1);const p=this.times,N=this.values,t=p.length;0===t&&(console.error("THREE.KeyframeTrack: Track is empty.",this),y=!1);let j=null;for(let L=0;L!==t;L++){const N=p[L];if("number"==typeof N&&isNaN(N)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,L,N),y=!1;break}if(null!==j&&j>N){console.error("THREE.KeyframeTrack: Out of order keys.",this,L,N,j),y=!1;break}j=N}if(void 0!==N&&pW(N))for(let L=0,p=N.length;L!==p;++L){const p=N[L];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,L,p),y=!1;break}}return y}optimize(){const y=yW(this.times),L=yW(this.values),p=this.getValueSize(),N=this.getInterpolation()===JL,t=y.length-1;let j=1;for(let z=1;z<t;++z){let t=!1;const O=y[z];if(O!==y[z+1]&&(1!==z||O!==y[0]))if(N)t=!0;else{const y=z*p,N=y-p,j=y+p;for(let z=0;z!==p;++z){const p=L[y+z];if(p!==L[N+z]||p!==L[j+z]){t=!0;break}}}if(t){if(z!==j){y[j]=y[z];const N=z*p,t=j*p;for(let y=0;y!==p;++y)L[t+y]=L[N+y]}++j}}if(t>0){y[j]=y[t];for(let y=t*p,N=j*p,z=0;z!==p;++z)L[N+z]=L[y+z];++j}return j!==y.length?(this.times=yW(y,0,j),this.values=yW(L,0,j*p)):(this.times=y,this.values=L),this}clone(){const y=yW(this.times,0),L=yW(this.values,0),p=new(0,this.constructor)(this.name,y,L);return p.createInterpolant=this.createInterpolant,p}}_W.prototype.TimeBufferType=Float32Array,_W.prototype.ValueBufferType=Float32Array,_W.prototype.DefaultInterpolation=XL;class WW extends _W{}WW.prototype.ValueTypeName="bool",WW.prototype.ValueBufferType=Array,WW.prototype.DefaultInterpolation=HL,WW.prototype.InterpolantFactoryMethodLinear=void 0,WW.prototype.InterpolantFactoryMethodSmooth=void 0;class gW extends _W{}gW.prototype.ValueTypeName="color";class CW extends _W{}CW.prototype.ValueTypeName="number";class QW extends OW{constructor(y,L,p,N){super(y,L,p,N)}interpolate_(y,L,p,N){const t=this.resultBuffer,j=this.sampleValues,z=this.valueSize,O=(p-L)/(N-L);let h=y*z;for(let y=h+z;h!==y;h+=4)MN.slerpFlat(t,0,j,h-z,j,h,O);return t}}class TW extends _W{InterpolantFactoryMethodLinear(y){return new QW(this.times,this.values,this.getValueSize(),y)}}TW.prototype.ValueTypeName="quaternion",TW.prototype.DefaultInterpolation=XL,TW.prototype.InterpolantFactoryMethodSmooth=void 0;class iW extends _W{}iW.prototype.ValueTypeName="string",iW.prototype.ValueBufferType=Array,iW.prototype.DefaultInterpolation=HL,iW.prototype.InterpolantFactoryMethodLinear=void 0,iW.prototype.InterpolantFactoryMethodSmooth=void 0;class DW extends _W{}DW.prototype.ValueTypeName="vector";class wW{constructor(y,L=-1,p,N=qL){this.name=y,this.tracks=p,this.duration=L,this.blendMode=N,this.uuid=Kp(),this.duration<0&&this.resetDuration()}static parse(y){const L=[],p=y.tracks,N=1/(y.fps||1);for(let y=0,t=p.length;y!==t;++y)L.push(xW(p[y]).scale(N));const t=new this(y.name,y.duration,L,y.blendMode);return t.uuid=y.uuid,t}static toJSON(y){const L=[],p=y.tracks,N={name:y.name,duration:y.duration,tracks:L,uuid:y.uuid,blendMode:y.blendMode};for(let y=0,N=p.length;y!==N;++y)L.push(_W.toJSON(p[y]));return N}static CreateFromMorphTargetSequence(y,L,p,N){const t=L.length,j=[];for(let y=0;y<t;y++){let z=[],O=[];z.push((y+t-1)%t,y,(y+1)%t),O.push(0,1,0);const h=NW(z);z=tW(z,1,h),O=tW(O,1,h),N||0!==z[0]||(z.push(t),O.push(O[0])),j.push(new CW(".morphTargetInfluences["+L[y].name+"]",z,O).scale(1/p))}return new this(y,-1,j)}static findByName(y,L){let p=y;if(!Array.isArray(y)){const L=y;p=L.geometry&&L.geometry.animations||L.animations}for(let y=0;y<p.length;y++)if(p[y].name===L)return p[y];return null}static CreateClipsFromMorphTargetSequences(y,L,p){const N={},t=/^([\w-]*?)([\d]+)$/;for(let L=0,p=y.length;L<p;L++){const p=y[L],j=p.name.match(t);if(j&&j.length>1){const y=j[1];let L=N[y];L||(N[y]=L=[]),L.push(p)}}const j=[];for(const y in N)j.push(this.CreateFromMorphTargetSequence(y,N[y],L,p));return j}static parseAnimation(y,L){if(!y)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const p=function(y,L,p,N,t){if(0!==p.length){const j=[],z=[];jW(p,j,z,N),0!==j.length&&t.push(new y(L,j,z))}},N=[],t=y.name||"default",j=y.fps||30,z=y.blendMode;let O=y.length||-1;const h=y.hierarchy||[];for(let y=0;y<h.length;y++){const t=h[y].keys;if(t&&0!==t.length)if(t[0].morphTargets){const y={};let L;for(L=0;L<t.length;L++)if(t[L].morphTargets)for(let p=0;p<t[L].morphTargets.length;p++)y[t[L].morphTargets[p]]=-1;for(const p in y){const y=[],j=[];for(let N=0;N!==t[L].morphTargets.length;++N){const N=t[L];y.push(N.time),j.push(N.morphTarget===p?1:0)}N.push(new CW(".morphTargetInfluence["+p+"]",y,j))}O=y.length*j}else{const j=".bones["+L[y].name+"]";p(DW,j+".position",t,"pos",N),p(TW,j+".quaternion",t,"rot",N),p(DW,j+".scale",t,"scl",N)}}return 0===N.length?null:new this(t,O,N,z)}resetDuration(){let y=0;for(let L=0,p=this.tracks.length;L!==p;++L){const p=this.tracks[L];y=Math.max(y,p.times[p.times.length-1])}return this.duration=y,this}trim(){for(let y=0;y<this.tracks.length;y++)this.tracks[y].trim(0,this.duration);return this}validate(){let y=!0;for(let L=0;L<this.tracks.length;L++)y=y&&this.tracks[L].validate();return y}optimize(){for(let y=0;y<this.tracks.length;y++)this.tracks[y].optimize();return this}clone(){const y=[];for(let L=0;L<this.tracks.length;L++)y.push(this.tracks[L].clone());return new this.constructor(this.name,this.duration,y,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function xW(y){if(void 0===y.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const L=function(y){switch(y.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return CW;case"vector":case"vector2":case"vector3":case"vector4":return DW;case"color":return gW;case"quaternion":return TW;case"bool":case"boolean":return WW;case"string":return iW}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+y)}(y.type);if(void 0===y.times){const L=[],p=[];jW(y.keys,L,p,"value"),y.times=L,y.values=p}return void 0!==L.parse?L.parse(y):new L(y.name,y.times,y.values,y.interpolation)}const dW={enabled:!1,files:{},add:function(y,L){!1!==this.enabled&&(this.files[y]=L)},get:function(y){if(!1!==this.enabled)return this.files[y]},remove:function(y){delete this.files[y]},clear:function(){this.files={}}};class oW{constructor(y,L,p){const N=this;let t,j=!1,z=0,O=0;const h=[];this.onStart=void 0,this.onLoad=y,this.onProgress=L,this.onError=p,this.itemStart=function(y){O++,!1===j&&void 0!==N.onStart&&N.onStart(y,z,O),j=!0},this.itemEnd=function(y){z++,void 0!==N.onProgress&&N.onProgress(y,z,O),z===O&&(j=!1,void 0!==N.onLoad&&N.onLoad())},this.itemError=function(y){void 0!==N.onError&&N.onError(y)},this.resolveURL=function(y){return t?t(y):y},this.setURLModifier=function(y){return t=y,this},this.addHandler=function(y,L){return h.push(y,L),this},this.removeHandler=function(y){const L=h.indexOf(y);return-1!==L&&h.splice(L,2),this},this.getHandler=function(y){for(let L=0,p=h.length;L<p;L+=2){const p=h[L],N=h[L+1];if(p.global&&(p.lastIndex=0),p.test(y))return N}return null}}}const UW=new oW;class IW{constructor(y){this.manager=void 0!==y?y:UW,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(y,L){const p=this;return new Promise((function(N,t){p.load(y,N,L,t)}))}parse(){}setCrossOrigin(y){return this.crossOrigin=y,this}setWithCredentials(y){return this.withCredentials=y,this}setPath(y){return this.path=y,this}setResourcePath(y){return this.resourcePath=y,this}setRequestHeader(y){return this.requestHeader=y,this}}IW.DEFAULT_MATERIAL_NAME="__DEFAULT";const VW={};class FW extends Error{constructor(y,L){super(y),this.response=L}}class uW extends IW{constructor(y){super(y)}load(y,L,p,N){void 0===y&&(y=""),void 0!==this.path&&(y=this.path+y),y=this.manager.resolveURL(y);const t=dW.get(y);if(void 0!==t)return this.manager.itemStart(y),setTimeout((()=>{L&&L(t),this.manager.itemEnd(y)}),0),t;if(void 0!==VW[y])return void VW[y].push({onLoad:L,onProgress:p,onError:N});VW[y]=[],VW[y].push({onLoad:L,onProgress:p,onError:N});const j=new Request(y,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),z=this.mimeType,O=this.responseType;fetch(j).then((L=>{if(200===L.status||0===L.status){if(0===L.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===L.body||void 0===L.body.getReader)return L;const p=VW[y],N=L.body.getReader(),t=L.headers.get("Content-Length")||L.headers.get("X-File-Size"),j=t?parseInt(t):0,z=0!==j;let O=0;const h=new ReadableStream({start(y){(function L(){N.read().then((({done:N,value:t})=>{if(N)y.close();else{O+=t.byteLength;const N=new ProgressEvent("progress",{lengthComputable:z,loaded:O,total:j});for(let y=0,L=p.length;y<L;y++){const L=p[y];L.onProgress&&L.onProgress(N)}y.enqueue(t),L()}}))})()}});return new Response(h)}throw new FW(`fetch for "${L.url}" responded with ${L.status}: ${L.statusText}`,L)})).then((y=>{switch(O){case"arraybuffer":return y.arrayBuffer();case"blob":return y.blob();case"document":return y.text().then((y=>(new DOMParser).parseFromString(y,z)));case"json":return y.json();default:if(void 0===z)return y.text();{const L=/charset="?([^;"\s]*)"?/i.exec(z),p=L&&L[1]?L[1].toLowerCase():void 0,N=new TextDecoder(p);return y.arrayBuffer().then((y=>N.decode(y)))}}})).then((L=>{dW.add(y,L);const p=VW[y];delete VW[y];for(let y=0,N=p.length;y<N;y++){const N=p[y];N.onLoad&&N.onLoad(L)}})).catch((L=>{const p=VW[y];if(void 0===p)throw this.manager.itemError(y),L;delete VW[y];for(let y=0,N=p.length;y<N;y++){const N=p[y];N.onError&&N.onError(L)}this.manager.itemError(y)})).finally((()=>{this.manager.itemEnd(y)})),this.manager.itemStart(y)}setResponseType(y){return this.responseType=y,this}setMimeType(y){return this.mimeType=y,this}}class SW extends IW{constructor(y){super(y)}load(y,L,p,N){const t=this,j=new uW(this.manager);j.setPath(this.path),j.setRequestHeader(this.requestHeader),j.setWithCredentials(this.withCredentials),j.load(y,(function(p){try{L(t.parse(JSON.parse(p)))}catch(L){N?N(L):console.error(L),t.manager.itemError(y)}}),p,N)}parse(y){const L=[];for(let p=0;p<y.length;p++){const N=wW.parse(y[p]);L.push(N)}return L}}class BW extends IW{constructor(y){super(y)}load(y,L,p,N){const t=this,j=[],z=new Dk,O=new uW(this.manager);O.setPath(this.path),O.setResponseType("arraybuffer"),O.setRequestHeader(this.requestHeader),O.setWithCredentials(t.withCredentials);let h=0;function m(m){O.load(y[m],(function(y){const p=t.parse(y,!0);j[m]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},h+=1,6===h&&(1===p.mipmapCount&&(z.minFilter=Ey),z.image=j,z.format=p.format,z.needsUpdate=!0,L&&L(z))}),p,N)}if(Array.isArray(y))for(let L=0,p=y.length;L<p;++L)m(L);else O.load(y,(function(y){const p=t.parse(y,!0);if(p.isCubemap){const y=p.mipmaps.length/p.mipmapCount;for(let L=0;L<y;L++){j[L]={mipmaps:[]};for(let y=0;y<p.mipmapCount;y++)j[L].mipmaps.push(p.mipmaps[L*p.mipmapCount+y]),j[L].format=p.format,j[L].width=p.width,j[L].height=p.height}z.image=j}else z.image.width=p.width,z.image.height=p.height,z.mipmaps=p.mipmaps;1===p.mipmapCount&&(z.minFilter=Ey),z.format=p.format,z.needsUpdate=!0,L&&L(z)}),p,N);return z}}class RW extends IW{constructor(y){super(y)}load(y,L,p,N){void 0!==this.path&&(y=this.path+y),y=this.manager.resolveURL(y);const t=this,j=dW.get(y);if(void 0!==j)return t.manager.itemStart(y),setTimeout((function(){L&&L(j),t.manager.itemEnd(y)}),0),j;const z=kN("img");function O(){m(),dW.add(y,this),L&&L(this),t.manager.itemEnd(y)}function h(L){m(),N&&N(L),t.manager.itemError(y),t.manager.itemEnd(y)}function m(){z.removeEventListener("load",O,!1),z.removeEventListener("error",h,!1)}return z.addEventListener("load",O,!1),z.addEventListener("error",h,!1),"data:"!==y.slice(0,5)&&void 0!==this.crossOrigin&&(z.crossOrigin=this.crossOrigin),t.manager.itemStart(y),z.src=y,z}}class YW extends IW{constructor(y){super(y)}load(y,L,p,N){const t=new mz;t.colorSpace=pp;const j=new RW(this.manager);j.setCrossOrigin(this.crossOrigin),j.setPath(this.path);let z=0;function O(p){j.load(y[p],(function(y){t.images[p]=y,z++,6===z&&(t.needsUpdate=!0,L&&L(t))}),void 0,N)}for(let L=0;L<y.length;++L)O(L);return t}}class EW extends IW{constructor(y){super(y)}load(y,L,p,N){const t=this,j=new Xm,z=new uW(this.manager);return z.setResponseType("arraybuffer"),z.setRequestHeader(this.requestHeader),z.setPath(this.path),z.setWithCredentials(t.withCredentials),z.load(y,(function(y){let p;try{p=t.parse(y)}catch(y){if(void 0===N)return void console.error(y);N(y)}if(!p)return N();void 0!==p.image?j.image=p.image:void 0!==p.data&&(j.image.width=p.width,j.image.height=p.height,j.image.data=p.data),j.wrapS=void 0!==p.wrapS?p.wrapS:Vy,j.wrapT=void 0!==p.wrapT?p.wrapT:Vy,j.magFilter=void 0!==p.magFilter?p.magFilter:Ey,j.minFilter=void 0!==p.minFilter?p.minFilter:Ey,j.anisotropy=void 0!==p.anisotropy?p.anisotropy:1,void 0!==p.colorSpace?j.colorSpace=p.colorSpace:void 0!==p.encoding&&(j.encoding=p.encoding),void 0!==p.flipY&&(j.flipY=p.flipY),void 0!==p.format&&(j.format=p.format),void 0!==p.type&&(j.type=p.type),void 0!==p.mipmaps&&(j.mipmaps=p.mipmaps,j.minFilter=My),1===p.mipmapCount&&(j.minFilter=Ey),void 0!==p.generateMipmaps&&(j.generateMipmaps=p.generateMipmaps),j.needsUpdate=!0,L&&L(j,p)}),p,N),j}}class PW extends IW{constructor(y){super(y)}load(y,L,p,N){const t=new FN,j=new RW(this.manager);return j.setCrossOrigin(this.crossOrigin),j.setPath(this.path),j.load(y,(function(y){t.image=y,t.needsUpdate=!0,void 0!==L&&L(t)}),p,N),t}}class lW extends at{constructor(y,L=1){super(),this.isLight=!0,this.type="Light",this.color=new pj(y),this.intensity=L}dispose(){}copy(y,L){return super.copy(y,L),this.color.copy(y.color),this.intensity=y.intensity,this}toJSON(y){const L=super.toJSON(y);return L.object.color=this.color.getHex(),L.object.intensity=this.intensity,void 0!==this.groundColor&&(L.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(L.object.distance=this.distance),void 0!==this.angle&&(L.object.angle=this.angle),void 0!==this.decay&&(L.object.decay=this.decay),void 0!==this.penumbra&&(L.object.penumbra=this.penumbra),void 0!==this.shadow&&(L.object.shadow=this.shadow.toJSON()),L}}class MW extends lW{constructor(y,L,p){super(y,p),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(at.DEFAULT_UP),this.updateMatrix(),this.groundColor=new pj(L)}copy(y,L){return super.copy(y,L),this.groundColor.copy(y.groundColor),this}}const fW=new Wt,aW=new fN,HW=new fN;class XW{constructor(y){this.camera=y,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new tN(512,512),this.map=null,this.mapPass=null,this.matrix=new Wt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new iz,this._frameExtents=new tN(1,1),this._viewportCount=1,this._viewports=[new uN(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(y){const L=this.camera,p=this.matrix;aW.setFromMatrixPosition(y.matrixWorld),L.position.copy(aW),HW.setFromMatrixPosition(y.target.matrixWorld),L.lookAt(HW),L.updateMatrixWorld(),fW.multiplyMatrices(L.projectionMatrix,L.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fW),p.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),p.multiply(fW)}getViewport(y){return this._viewports[y]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(y){return this.camera=y.camera.clone(),this.bias=y.bias,this.radius=y.radius,this.mapSize.copy(y.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const y={};return 0!==this.bias&&(y.bias=this.bias),0!==this.normalBias&&(y.normalBias=this.normalBias),1!==this.radius&&(y.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(y.mapSize=this.mapSize.toArray()),y.camera=this.camera.toJSON(!1).object,delete y.camera.matrix,y}}class JW extends XW{constructor(){super(new jz(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(y){const L=this.camera,p=2*cp*y.angle*this.focus,N=this.mapSize.width/this.mapSize.height,t=y.distance||L.far;p===L.fov&&N===L.aspect&&t===L.far||(L.fov=p,L.aspect=N,L.far=t,L.updateProjectionMatrix()),super.updateMatrices(y)}copy(y){return super.copy(y),this.focus=y.focus,this}}class rW extends lW{constructor(y,L,p=0,N=Math.PI/3,t=0,j=2){super(y,L),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(at.DEFAULT_UP),this.updateMatrix(),this.target=new at,this.distance=p,this.angle=N,this.penumbra=t,this.decay=j,this.map=null,this.shadow=new JW}get power(){return this.intensity*Math.PI}set power(y){this.intensity=y/Math.PI}dispose(){this.shadow.dispose()}copy(y,L){return super.copy(y,L),this.distance=y.distance,this.angle=y.angle,this.penumbra=y.penumbra,this.decay=y.decay,this.target=y.target.clone(),this.shadow=y.shadow.clone(),this}}const GW=new Wt,$W=new fN,qW=new fN;class AW extends XW{constructor(){super(new jz(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new tN(4,2),this._viewportCount=6,this._viewports=[new uN(2,1,1,1),new uN(0,1,1,1),new uN(3,1,1,1),new uN(1,1,1,1),new uN(3,0,1,1),new uN(1,0,1,1)],this._cubeDirections=[new fN(1,0,0),new fN(-1,0,0),new fN(0,0,1),new fN(0,0,-1),new fN(0,1,0),new fN(0,-1,0)],this._cubeUps=[new fN(0,1,0),new fN(0,1,0),new fN(0,1,0),new fN(0,1,0),new fN(0,0,1),new fN(0,0,-1)]}updateMatrices(y,L=0){const p=this.camera,N=this.matrix,t=y.distance||p.far;t!==p.far&&(p.far=t,p.updateProjectionMatrix()),$W.setFromMatrixPosition(y.matrixWorld),p.position.copy($W),qW.copy(p.position),qW.add(this._cubeDirections[L]),p.up.copy(this._cubeUps[L]),p.lookAt(qW),p.updateMatrixWorld(),N.makeTranslation(-$W.x,-$W.y,-$W.z),GW.multiplyMatrices(p.projectionMatrix,p.matrixWorldInverse),this._frustum.setFromProjectionMatrix(GW)}}class sW extends lW{constructor(y,L,p=0,N=2){super(y,L),this.isPointLight=!0,this.type="PointLight",this.distance=p,this.decay=N,this.shadow=new AW}get power(){return 4*this.intensity*Math.PI}set power(y){this.intensity=y/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(y,L){return super.copy(y,L),this.distance=y.distance,this.decay=y.decay,this.shadow=y.shadow.clone(),this}}class cW extends XW{constructor(){super(new Yz(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class KW extends lW{constructor(y,L){super(y,L),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(at.DEFAULT_UP),this.updateMatrix(),this.target=new at,this.shadow=new cW}dispose(){this.shadow.dispose()}copy(y){return super.copy(y),this.target=y.target.clone(),this.shadow=y.shadow.clone(),this}}class bW extends lW{constructor(y,L){super(y,L),this.isAmbientLight=!0,this.type="AmbientLight"}}class nW extends lW{constructor(y,L,p=10,N=10){super(y,L),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=p,this.height=N}get power(){return this.intensity*this.width*this.height*Math.PI}set power(y){this.intensity=y/(this.width*this.height*Math.PI)}copy(y){return super.copy(y),this.width=y.width,this.height=y.height,this}toJSON(y){const L=super.toJSON(y);return L.object.width=this.width,L.object.height=this.height,L}}class vW{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let y=0;y<9;y++)this.coefficients.push(new fN)}set(y){for(let L=0;L<9;L++)this.coefficients[L].copy(y[L]);return this}zero(){for(let y=0;y<9;y++)this.coefficients[y].set(0,0,0);return this}getAt(y,L){const p=y.x,N=y.y,t=y.z,j=this.coefficients;return L.copy(j[0]).multiplyScalar(.282095),L.addScaledVector(j[1],.488603*N),L.addScaledVector(j[2],.488603*t),L.addScaledVector(j[3],.488603*p),L.addScaledVector(j[4],1.092548*(p*N)),L.addScaledVector(j[5],1.092548*(N*t)),L.addScaledVector(j[6],.315392*(3*t*t-1)),L.addScaledVector(j[7],1.092548*(p*t)),L.addScaledVector(j[8],.546274*(p*p-N*N)),L}getIrradianceAt(y,L){const p=y.x,N=y.y,t=y.z,j=this.coefficients;return L.copy(j[0]).multiplyScalar(.886227),L.addScaledVector(j[1],2*.511664*N),L.addScaledVector(j[2],2*.511664*t),L.addScaledVector(j[3],2*.511664*p),L.addScaledVector(j[4],2*.429043*p*N),L.addScaledVector(j[5],2*.429043*N*t),L.addScaledVector(j[6],.743125*t*t-.247708),L.addScaledVector(j[7],2*.429043*p*t),L.addScaledVector(j[8],.429043*(p*p-N*N)),L}add(y){for(let L=0;L<9;L++)this.coefficients[L].add(y.coefficients[L]);return this}addScaledSH(y,L){for(let p=0;p<9;p++)this.coefficients[p].addScaledVector(y.coefficients[p],L);return this}scale(y){for(let L=0;L<9;L++)this.coefficients[L].multiplyScalar(y);return this}lerp(y,L){for(let p=0;p<9;p++)this.coefficients[p].lerp(y.coefficients[p],L);return this}equals(y){for(let L=0;L<9;L++)if(!this.coefficients[L].equals(y.coefficients[L]))return!1;return!0}copy(y){return this.set(y.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(y,L=0){const p=this.coefficients;for(let N=0;N<9;N++)p[N].fromArray(y,L+3*N);return this}toArray(y=[],L=0){const p=this.coefficients;for(let N=0;N<9;N++)p[N].toArray(y,L+3*N);return y}static getBasisAt(y,L){const p=y.x,N=y.y,t=y.z;L[0]=.282095,L[1]=.488603*N,L[2]=.488603*t,L[3]=.488603*p,L[4]=1.092548*p*N,L[5]=1.092548*N*t,L[6]=.315392*(3*t*t-1),L[7]=1.092548*p*t,L[8]=.546274*(p*p-N*N)}}class eW extends lW{constructor(y=new vW,L=1){super(void 0,L),this.isLightProbe=!0,this.sh=y}copy(y){return super.copy(y),this.sh.copy(y.sh),this}fromJSON(y){return this.intensity=y.intensity,this.sh.fromArray(y.sh),this}toJSON(y){const L=super.toJSON(y);return L.object.sh=this.sh.toArray(),L}}class ZW extends IW{constructor(y){super(y),this.textures={}}load(y,L,p,N){const t=this,j=new uW(t.manager);j.setPath(t.path),j.setRequestHeader(t.requestHeader),j.setWithCredentials(t.withCredentials),j.load(y,(function(p){try{L(t.parse(JSON.parse(p)))}catch(L){N?N(L):console.error(L),t.manager.itemError(y)}}),p,N)}parse(y){const L=this.textures;function p(y){return void 0===L[y]&&console.warn("THREE.MaterialLoader: Undefined texture",y),L[y]}const N=ZW.createMaterialFromType(y.type);if(void 0!==y.uuid&&(N.uuid=y.uuid),void 0!==y.name&&(N.name=y.name),void 0!==y.color&&void 0!==N.color&&N.color.setHex(y.color),void 0!==y.roughness&&(N.roughness=y.roughness),void 0!==y.metalness&&(N.metalness=y.metalness),void 0!==y.sheen&&(N.sheen=y.sheen),void 0!==y.sheenColor&&(N.sheenColor=(new pj).setHex(y.sheenColor)),void 0!==y.sheenRoughness&&(N.sheenRoughness=y.sheenRoughness),void 0!==y.emissive&&void 0!==N.emissive&&N.emissive.setHex(y.emissive),void 0!==y.specular&&void 0!==N.specular&&N.specular.setHex(y.specular),void 0!==y.specularIntensity&&(N.specularIntensity=y.specularIntensity),void 0!==y.specularColor&&void 0!==N.specularColor&&N.specularColor.setHex(y.specularColor),void 0!==y.shininess&&(N.shininess=y.shininess),void 0!==y.clearcoat&&(N.clearcoat=y.clearcoat),void 0!==y.clearcoatRoughness&&(N.clearcoatRoughness=y.clearcoatRoughness),void 0!==y.iridescence&&(N.iridescence=y.iridescence),void 0!==y.iridescenceIOR&&(N.iridescenceIOR=y.iridescenceIOR),void 0!==y.iridescenceThicknessRange&&(N.iridescenceThicknessRange=y.iridescenceThicknessRange),void 0!==y.transmission&&(N.transmission=y.transmission),void 0!==y.thickness&&(N.thickness=y.thickness),void 0!==y.attenuationDistance&&(N.attenuationDistance=y.attenuationDistance),void 0!==y.attenuationColor&&void 0!==N.attenuationColor&&N.attenuationColor.setHex(y.attenuationColor),void 0!==y.anisotropy&&(N.anisotropy=y.anisotropy),void 0!==y.anisotropyRotation&&(N.anisotropyRotation=y.anisotropyRotation),void 0!==y.fog&&(N.fog=y.fog),void 0!==y.flatShading&&(N.flatShading=y.flatShading),void 0!==y.blending&&(N.blending=y.blending),void 0!==y.combine&&(N.combine=y.combine),void 0!==y.side&&(N.side=y.side),void 0!==y.shadowSide&&(N.shadowSide=y.shadowSide),void 0!==y.opacity&&(N.opacity=y.opacity),void 0!==y.transparent&&(N.transparent=y.transparent),void 0!==y.alphaTest&&(N.alphaTest=y.alphaTest),void 0!==y.alphaHash&&(N.alphaHash=y.alphaHash),void 0!==y.depthTest&&(N.depthTest=y.depthTest),void 0!==y.depthWrite&&(N.depthWrite=y.depthWrite),void 0!==y.colorWrite&&(N.colorWrite=y.colorWrite),void 0!==y.stencilWrite&&(N.stencilWrite=y.stencilWrite),void 0!==y.stencilWriteMask&&(N.stencilWriteMask=y.stencilWriteMask),void 0!==y.stencilFunc&&(N.stencilFunc=y.stencilFunc),void 0!==y.stencilRef&&(N.stencilRef=y.stencilRef),void 0!==y.stencilFuncMask&&(N.stencilFuncMask=y.stencilFuncMask),void 0!==y.stencilFail&&(N.stencilFail=y.stencilFail),void 0!==y.stencilZFail&&(N.stencilZFail=y.stencilZFail),void 0!==y.stencilZPass&&(N.stencilZPass=y.stencilZPass),void 0!==y.wireframe&&(N.wireframe=y.wireframe),void 0!==y.wireframeLinewidth&&(N.wireframeLinewidth=y.wireframeLinewidth),void 0!==y.wireframeLinecap&&(N.wireframeLinecap=y.wireframeLinecap),void 0!==y.wireframeLinejoin&&(N.wireframeLinejoin=y.wireframeLinejoin),void 0!==y.rotation&&(N.rotation=y.rotation),1!==y.linewidth&&(N.linewidth=y.linewidth),void 0!==y.dashSize&&(N.dashSize=y.dashSize),void 0!==y.gapSize&&(N.gapSize=y.gapSize),void 0!==y.scale&&(N.scale=y.scale),void 0!==y.polygonOffset&&(N.polygonOffset=y.polygonOffset),void 0!==y.polygonOffsetFactor&&(N.polygonOffsetFactor=y.polygonOffsetFactor),void 0!==y.polygonOffsetUnits&&(N.polygonOffsetUnits=y.polygonOffsetUnits),void 0!==y.dithering&&(N.dithering=y.dithering),void 0!==y.alphaToCoverage&&(N.alphaToCoverage=y.alphaToCoverage),void 0!==y.premultipliedAlpha&&(N.premultipliedAlpha=y.premultipliedAlpha),void 0!==y.forceSinglePass&&(N.forceSinglePass=y.forceSinglePass),void 0!==y.visible&&(N.visible=y.visible),void 0!==y.toneMapped&&(N.toneMapped=y.toneMapped),void 0!==y.userData&&(N.userData=y.userData),void 0!==y.vertexColors&&("number"==typeof y.vertexColors?N.vertexColors=y.vertexColors>0:N.vertexColors=y.vertexColors),void 0!==y.uniforms)for(const L in y.uniforms){const t=y.uniforms[L];switch(N.uniforms[L]={},t.type){case"t":N.uniforms[L].value=p(t.value);break;case"c":N.uniforms[L].value=(new pj).setHex(t.value);break;case"v2":N.uniforms[L].value=(new tN).fromArray(t.value);break;case"v3":N.uniforms[L].value=(new fN).fromArray(t.value);break;case"v4":N.uniforms[L].value=(new uN).fromArray(t.value);break;case"m3":N.uniforms[L].value=(new jN).fromArray(t.value);break;case"m4":N.uniforms[L].value=(new Wt).fromArray(t.value);break;default:N.uniforms[L].value=t.value}}if(void 0!==y.defines&&(N.defines=y.defines),void 0!==y.vertexShader&&(N.vertexShader=y.vertexShader),void 0!==y.fragmentShader&&(N.fragmentShader=y.fragmentShader),void 0!==y.glslVersion&&(N.glslVersion=y.glslVersion),void 0!==y.extensions)for(const L in y.extensions)N.extensions[L]=y.extensions[L];if(void 0!==y.lights&&(N.lights=y.lights),void 0!==y.clipping&&(N.clipping=y.clipping),void 0!==y.size&&(N.size=y.size),void 0!==y.sizeAttenuation&&(N.sizeAttenuation=y.sizeAttenuation),void 0!==y.map&&(N.map=p(y.map)),void 0!==y.matcap&&(N.matcap=p(y.matcap)),void 0!==y.alphaMap&&(N.alphaMap=p(y.alphaMap)),void 0!==y.bumpMap&&(N.bumpMap=p(y.bumpMap)),void 0!==y.bumpScale&&(N.bumpScale=y.bumpScale),void 0!==y.normalMap&&(N.normalMap=p(y.normalMap)),void 0!==y.normalMapType&&(N.normalMapType=y.normalMapType),void 0!==y.normalScale){let L=y.normalScale;!1===Array.isArray(L)&&(L=[L,L]),N.normalScale=(new tN).fromArray(L)}return void 0!==y.displacementMap&&(N.displacementMap=p(y.displacementMap)),void 0!==y.displacementScale&&(N.displacementScale=y.displacementScale),void 0!==y.displacementBias&&(N.displacementBias=y.displacementBias),void 0!==y.roughnessMap&&(N.roughnessMap=p(y.roughnessMap)),void 0!==y.metalnessMap&&(N.metalnessMap=p(y.metalnessMap)),void 0!==y.emissiveMap&&(N.emissiveMap=p(y.emissiveMap)),void 0!==y.emissiveIntensity&&(N.emissiveIntensity=y.emissiveIntensity),void 0!==y.specularMap&&(N.specularMap=p(y.specularMap)),void 0!==y.specularIntensityMap&&(N.specularIntensityMap=p(y.specularIntensityMap)),void 0!==y.specularColorMap&&(N.specularColorMap=p(y.specularColorMap)),void 0!==y.envMap&&(N.envMap=p(y.envMap)),void 0!==y.envMapIntensity&&(N.envMapIntensity=y.envMapIntensity),void 0!==y.reflectivity&&(N.reflectivity=y.reflectivity),void 0!==y.refractionRatio&&(N.refractionRatio=y.refractionRatio),void 0!==y.lightMap&&(N.lightMap=p(y.lightMap)),void 0!==y.lightMapIntensity&&(N.lightMapIntensity=y.lightMapIntensity),void 0!==y.aoMap&&(N.aoMap=p(y.aoMap)),void 0!==y.aoMapIntensity&&(N.aoMapIntensity=y.aoMapIntensity),void 0!==y.gradientMap&&(N.gradientMap=p(y.gradientMap)),void 0!==y.clearcoatMap&&(N.clearcoatMap=p(y.clearcoatMap)),void 0!==y.clearcoatRoughnessMap&&(N.clearcoatRoughnessMap=p(y.clearcoatRoughnessMap)),void 0!==y.clearcoatNormalMap&&(N.clearcoatNormalMap=p(y.clearcoatNormalMap)),void 0!==y.clearcoatNormalScale&&(N.clearcoatNormalScale=(new tN).fromArray(y.clearcoatNormalScale)),void 0!==y.iridescenceMap&&(N.iridescenceMap=p(y.iridescenceMap)),void 0!==y.iridescenceThicknessMap&&(N.iridescenceThicknessMap=p(y.iridescenceThicknessMap)),void 0!==y.transmissionMap&&(N.transmissionMap=p(y.transmissionMap)),void 0!==y.thicknessMap&&(N.thicknessMap=p(y.thicknessMap)),void 0!==y.anisotropyMap&&(N.anisotropyMap=p(y.anisotropyMap)),void 0!==y.sheenColorMap&&(N.sheenColorMap=p(y.sheenColorMap)),void 0!==y.sheenRoughnessMap&&(N.sheenRoughnessMap=p(y.sheenRoughnessMap)),N}setTextures(y){return this.textures=y,this}static createMaterialFromType(y){return new{ShadowMaterial:q_,SpriteMaterial:mm,RawShaderMaterial:A_,ShaderMaterial:Nz,PointsMaterial:mk,MeshPhysicalMaterial:c_,MeshStandardMaterial:s_,MeshPhongMaterial:K_,MeshToonMaterial:b_,MeshNormalMaterial:n_,MeshLambertMaterial:v_,MeshDepthMaterial:Hh,MeshDistanceMaterial:Xh,MeshBasicMaterial:tj,MeshMatcapMaterial:e_,LineDashedMaterial:Z_,LineBasicMaterial:em,Material:vt}[y]}}class yg{static decodeText(y){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(y);let L="";for(let p=0,N=y.length;p<N;p++)L+=String.fromCharCode(y[p]);try{return decodeURIComponent(escape(L))}catch(y){return L}}static extractUrlBase(y){const L=y.lastIndexOf("/");return-1===L?"./":y.slice(0,L+1)}static resolveURL(y,L){return"string"!=typeof y||""===y?"":(/^https?:\/\//i.test(L)&&/^\//.test(y)&&(L=L.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(y)||/^data:.*,.*$/i.test(y)||/^blob:.*$/i.test(y)?y:L+y)}}class Lg extends Rj{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(y){return super.copy(y),this.instanceCount=y.instanceCount,this}toJSON(){const y=super.toJSON();return y.instanceCount=this.instanceCount,y.isInstancedBufferGeometry=!0,y}}class pg extends IW{constructor(y){super(y)}load(y,L,p,N){const t=this,j=new uW(t.manager);j.setPath(t.path),j.setRequestHeader(t.requestHeader),j.setWithCredentials(t.withCredentials),j.load(y,(function(p){try{L(t.parse(JSON.parse(p)))}catch(L){N?N(L):console.error(L),t.manager.itemError(y)}}),p,N)}parse(y){const L={},p={};function N(y,N){if(void 0!==L[N])return L[N];const t=y.interleavedBuffers[N],j=function(y,L){if(void 0!==p[L])return p[L];const N=y.arrayBuffers[L],t=new Uint32Array(N).buffer;return p[L]=t,t}(y,t.buffer),z=mN(t.type,j),O=new zm(z,t.stride);return O.uuid=t.uuid,L[N]=O,O}const t=y.isInstancedBufferGeometry?new Lg:new Rj,j=y.data.index;if(void 0!==j){const y=mN(j.type,j.array);t.setIndex(new Wj(y,1))}const z=y.data.attributes;for(const L in z){const p=z[L];let j;if(p.isInterleavedBufferAttribute){const L=N(y.data,p.data);j=new hm(L,p.itemSize,p.offset,p.normalized)}else{const y=mN(p.type,p.array);j=new(p.isInstancedBufferAttribute?$m:Wj)(y,p.itemSize,p.normalized)}void 0!==p.name&&(j.name=p.name),void 0!==p.usage&&j.setUsage(p.usage),void 0!==p.updateRange&&(j.updateRange.offset=p.updateRange.offset,j.updateRange.count=p.updateRange.count),t.setAttribute(L,j)}const O=y.data.morphAttributes;if(O)for(const L in O){const p=O[L],j=[];for(let L=0,t=p.length;L<t;L++){const t=p[L];let z;if(t.isInterleavedBufferAttribute){const L=N(y.data,t.data);z=new hm(L,t.itemSize,t.offset,t.normalized)}else{const y=mN(t.type,t.array);z=new Wj(y,t.itemSize,t.normalized)}void 0!==t.name&&(z.name=t.name),j.push(z)}t.morphAttributes[L]=j}y.data.morphTargetsRelative&&(t.morphTargetsRelative=!0);const h=y.data.groups||y.data.drawcalls||y.data.offsets;if(void 0!==h)for(let y=0,L=h.length;y!==L;++y){const L=h[y];t.addGroup(L.start,L.count,L.materialIndex)}const m=y.data.boundingSphere;if(void 0!==m){const y=new fN;void 0!==m.center&&y.fromArray(m.center),t.boundingSphere=new Nt(y,m.radius)}return y.name&&(t.name=y.name),y.userData&&(t.userData=y.userData),t}}class Ng extends IW{constructor(y){super(y)}load(y,L,p,N){const t=this,j=""===this.path?yg.extractUrlBase(y):this.path;this.resourcePath=this.resourcePath||j;const z=new uW(this.manager);z.setPath(this.path),z.setRequestHeader(this.requestHeader),z.setWithCredentials(this.withCredentials),z.load(y,(function(p){let j=null;try{j=JSON.parse(p)}catch(L){return void 0!==N&&N(L),void console.error("THREE:ObjectLoader: Can't parse "+y+".",L.message)}const z=j.metadata;if(void 0===z||void 0===z.type||"geometry"===z.type.toLowerCase())return void 0!==N&&N(new Error("THREE.ObjectLoader: Can't load "+y)),void console.error("THREE.ObjectLoader: Can't load "+y);t.parse(j,L)}),p,N)}async loadAsync(y,L){const p=""===this.path?yg.extractUrlBase(y):this.path;this.resourcePath=this.resourcePath||p;const N=new uW(this.manager);N.setPath(this.path),N.setRequestHeader(this.requestHeader),N.setWithCredentials(this.withCredentials);const t=await N.loadAsync(y,L),j=JSON.parse(t),z=j.metadata;if(void 0===z||void 0===z.type||"geometry"===z.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+y);return await this.parseAsync(j)}parse(y,L){const p=this.parseAnimations(y.animations),N=this.parseShapes(y.shapes),t=this.parseGeometries(y.geometries,N),j=this.parseImages(y.images,(function(){void 0!==L&&L(h)})),z=this.parseTextures(y.textures,j),O=this.parseMaterials(y.materials,z),h=this.parseObject(y.object,t,O,z,p),m=this.parseSkeletons(y.skeletons,h);if(this.bindSkeletons(h,m),void 0!==L){let y=!1;for(const L in j)if(j[L].data instanceof HTMLImageElement){y=!0;break}!1===y&&L(h)}return h}async parseAsync(y){const L=this.parseAnimations(y.animations),p=this.parseShapes(y.shapes),N=this.parseGeometries(y.geometries,p),t=await this.parseImagesAsync(y.images),j=this.parseTextures(y.textures,t),z=this.parseMaterials(y.materials,j),O=this.parseObject(y.object,N,z,j,L),h=this.parseSkeletons(y.skeletons,O);return this.bindSkeletons(O,h),O}parseShapes(y){const L={};if(void 0!==y)for(let p=0,N=y.length;p<N;p++){const N=(new p_).fromJSON(y[p]);L[N.uuid]=N}return L}parseSkeletons(y,L){const p={},N={};if(L.traverse((function(y){y.isBone&&(N[y.uuid]=y)})),void 0!==y)for(let L=0,t=y.length;L<t;L++){const t=(new Gm).fromJSON(y[L],N);p[t.uuid]=t}return p}parseGeometries(y,L){const p={};if(void 0!==y){const N=new pg;for(let t=0,j=y.length;t<j;t++){let j;const z=y[t];switch(z.type){case"BufferGeometry":case"InstancedBufferGeometry":j=N.parse(z);break;default:z.type in $_?j=$_[z.type].fromJSON(z,L):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${z.type}"`)}j.uuid=z.uuid,void 0!==z.name&&(j.name=z.name),void 0!==z.userData&&(j.userData=z.userData),p[z.uuid]=j}}return p}parseMaterials(y,L){const p={},N={};if(void 0!==y){const t=new ZW;t.setTextures(L);for(let L=0,j=y.length;L<j;L++){const j=y[L];void 0===p[j.uuid]&&(p[j.uuid]=t.parse(j)),N[j.uuid]=p[j.uuid]}}return N}parseAnimations(y){const L={};if(void 0!==y)for(let p=0;p<y.length;p++){const N=y[p],t=wW.parse(N);L[t.uuid]=t}return L}parseImages(y,L){const p=this,N={};let t;function j(y){if("string"==typeof y){const L=y;return function(y){return p.manager.itemStart(y),t.load(y,(function(){p.manager.itemEnd(y)}),void 0,(function(){p.manager.itemError(y),p.manager.itemEnd(y)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(L)?L:p.resourcePath+L)}return y.data?{data:mN(y.type,y.data),width:y.width,height:y.height}:null}if(void 0!==y&&y.length>0){const p=new oW(L);t=new RW(p),t.setCrossOrigin(this.crossOrigin);for(let L=0,p=y.length;L<p;L++){const p=y[L],t=p.url;if(Array.isArray(t)){const y=[];for(let L=0,p=t.length;L<p;L++){const p=j(t[L]);null!==p&&(p instanceof HTMLImageElement?y.push(p):y.push(new Xm(p.data,p.width,p.height)))}N[p.uuid]=new UN(y)}else{const y=j(p.url);N[p.uuid]=new UN(y)}}}return N}async parseImagesAsync(y){const L=this,p={};let N;async function t(y){if("string"==typeof y){const p=y,t=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:L.resourcePath+p;return await N.loadAsync(t)}return y.data?{data:mN(y.type,y.data),width:y.width,height:y.height}:null}if(void 0!==y&&y.length>0){N=new RW(this.manager),N.setCrossOrigin(this.crossOrigin);for(let L=0,N=y.length;L<N;L++){const N=y[L],j=N.url;if(Array.isArray(j)){const y=[];for(let L=0,p=j.length;L<p;L++){const p=j[L],N=await t(p);null!==N&&(N instanceof HTMLImageElement?y.push(N):y.push(new Xm(N.data,N.width,N.height)))}p[N.uuid]=new UN(y)}else{const y=await t(N.url);p[N.uuid]=new UN(y)}}}return p}parseTextures(y,L){function p(y,L){return"number"==typeof y?y:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",y),L[y])}const N={};if(void 0!==y)for(let t=0,j=y.length;t<j;t++){const j=y[t];void 0===j.image&&console.warn('THREE.ObjectLoader: No "image" specified for',j.uuid),void 0===L[j.image]&&console.warn("THREE.ObjectLoader: Undefined image",j.image);const z=L[j.image],O=z.data;let h;Array.isArray(O)?(h=new mz,6===O.length&&(h.needsUpdate=!0)):(h=O&&O.data?new Xm:new FN,O&&(h.needsUpdate=!0)),h.source=z,h.uuid=j.uuid,void 0!==j.name&&(h.name=j.name),void 0!==j.mapping&&(h.mapping=p(j.mapping,tg)),void 0!==j.channel&&(h.channel=j.channel),void 0!==j.offset&&h.offset.fromArray(j.offset),void 0!==j.repeat&&h.repeat.fromArray(j.repeat),void 0!==j.center&&h.center.fromArray(j.center),void 0!==j.rotation&&(h.rotation=j.rotation),void 0!==j.wrap&&(h.wrapS=p(j.wrap[0],jg),h.wrapT=p(j.wrap[1],jg)),void 0!==j.format&&(h.format=j.format),void 0!==j.internalFormat&&(h.internalFormat=j.internalFormat),void 0!==j.type&&(h.type=j.type),void 0!==j.colorSpace&&(h.colorSpace=j.colorSpace),void 0!==j.encoding&&(h.encoding=j.encoding),void 0!==j.minFilter&&(h.minFilter=p(j.minFilter,zg)),void 0!==j.magFilter&&(h.magFilter=p(j.magFilter,zg)),void 0!==j.anisotropy&&(h.anisotropy=j.anisotropy),void 0!==j.flipY&&(h.flipY=j.flipY),void 0!==j.generateMipmaps&&(h.generateMipmaps=j.generateMipmaps),void 0!==j.premultiplyAlpha&&(h.premultiplyAlpha=j.premultiplyAlpha),void 0!==j.unpackAlignment&&(h.unpackAlignment=j.unpackAlignment),void 0!==j.compareFunction&&(h.compareFunction=j.compareFunction),void 0!==j.userData&&(h.userData=j.userData),N[j.uuid]=h}return N}parseObject(y,L,p,N,t){let j,z,O;function h(y){return void 0===L[y]&&console.warn("THREE.ObjectLoader: Undefined geometry",y),L[y]}function m(y){if(void 0!==y){if(Array.isArray(y)){const L=[];for(let N=0,t=y.length;N<t;N++){const t=y[N];void 0===p[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),L.push(p[t])}return L}return void 0===p[y]&&console.warn("THREE.ObjectLoader: Undefined material",y),p[y]}}function k(y){return void 0===N[y]&&console.warn("THREE.ObjectLoader: Undefined texture",y),N[y]}switch(y.type){case"Scene":j=new jm,void 0!==y.background&&(Number.isInteger(y.background)?j.background=new pj(y.background):j.background=k(y.background)),void 0!==y.environment&&(j.environment=k(y.environment)),void 0!==y.fog&&("Fog"===y.fog.type?j.fog=new tm(y.fog.color,y.fog.near,y.fog.far):"FogExp2"===y.fog.type&&(j.fog=new Nm(y.fog.color,y.fog.density))),void 0!==y.backgroundBlurriness&&(j.backgroundBlurriness=y.backgroundBlurriness),void 0!==y.backgroundIntensity&&(j.backgroundIntensity=y.backgroundIntensity);break;case"PerspectiveCamera":j=new jz(y.fov,y.aspect,y.near,y.far),void 0!==y.focus&&(j.focus=y.focus),void 0!==y.zoom&&(j.zoom=y.zoom),void 0!==y.filmGauge&&(j.filmGauge=y.filmGauge),void 0!==y.filmOffset&&(j.filmOffset=y.filmOffset),void 0!==y.view&&(j.view=Object.assign({},y.view));break;case"OrthographicCamera":j=new Yz(y.left,y.right,y.top,y.bottom,y.near,y.far),void 0!==y.zoom&&(j.zoom=y.zoom),void 0!==y.view&&(j.view=Object.assign({},y.view));break;case"AmbientLight":j=new bW(y.color,y.intensity);break;case"DirectionalLight":j=new KW(y.color,y.intensity);break;case"PointLight":j=new sW(y.color,y.intensity,y.distance,y.decay);break;case"RectAreaLight":j=new nW(y.color,y.intensity,y.width,y.height);break;case"SpotLight":j=new rW(y.color,y.intensity,y.distance,y.angle,y.penumbra,y.decay);break;case"HemisphereLight":j=new MW(y.color,y.groundColor,y.intensity);break;case"LightProbe":j=(new eW).fromJSON(y);break;case"SkinnedMesh":z=h(y.geometry),O=m(y.material),j=new am(z,O),void 0!==y.bindMode&&(j.bindMode=y.bindMode),void 0!==y.bindMatrix&&j.bindMatrix.fromArray(y.bindMatrix),void 0!==y.skeleton&&(j.skeleton=y.skeleton);break;case"Mesh":z=h(y.geometry),O=m(y.material),j=new Kj(z,O);break;case"InstancedMesh":z=h(y.geometry),O=m(y.material);const L=y.count,p=y.instanceMatrix,N=y.instanceColor;j=new vm(z,O,L),j.instanceMatrix=new $m(new Float32Array(p.array),16),void 0!==N&&(j.instanceColor=new $m(new Float32Array(N.array),N.itemSize));break;case"LOD":j=new um;break;case"Line":j=new tk(h(y.geometry),m(y.material));break;case"LineLoop":j=new hk(h(y.geometry),m(y.material));break;case"LineSegments":j=new Ok(h(y.geometry),m(y.material));break;case"PointCloud":case"Points":j=new Ck(h(y.geometry),m(y.material));break;case"Sprite":j=new Um(m(y.material));break;case"Group":j=new ch;break;case"Bone":j=new Hm;break;default:j=new at}if(j.uuid=y.uuid,void 0!==y.name&&(j.name=y.name),void 0!==y.matrix?(j.matrix.fromArray(y.matrix),void 0!==y.matrixAutoUpdate&&(j.matrixAutoUpdate=y.matrixAutoUpdate),j.matrixAutoUpdate&&j.matrix.decompose(j.position,j.quaternion,j.scale)):(void 0!==y.position&&j.position.fromArray(y.position),void 0!==y.rotation&&j.rotation.fromArray(y.rotation),void 0!==y.quaternion&&j.quaternion.fromArray(y.quaternion),void 0!==y.scale&&j.scale.fromArray(y.scale)),void 0!==y.up&&j.up.fromArray(y.up),void 0!==y.castShadow&&(j.castShadow=y.castShadow),void 0!==y.receiveShadow&&(j.receiveShadow=y.receiveShadow),y.shadow&&(void 0!==y.shadow.bias&&(j.shadow.bias=y.shadow.bias),void 0!==y.shadow.normalBias&&(j.shadow.normalBias=y.shadow.normalBias),void 0!==y.shadow.radius&&(j.shadow.radius=y.shadow.radius),void 0!==y.shadow.mapSize&&j.shadow.mapSize.fromArray(y.shadow.mapSize),void 0!==y.shadow.camera&&(j.shadow.camera=this.parseObject(y.shadow.camera))),void 0!==y.visible&&(j.visible=y.visible),void 0!==y.frustumCulled&&(j.frustumCulled=y.frustumCulled),void 0!==y.renderOrder&&(j.renderOrder=y.renderOrder),void 0!==y.userData&&(j.userData=y.userData),void 0!==y.layers&&(j.layers.mask=y.layers),void 0!==y.children){const z=y.children;for(let y=0;y<z.length;y++)j.add(this.parseObject(z[y],L,p,N,t))}if(void 0!==y.animations){const L=y.animations;for(let y=0;y<L.length;y++){const p=L[y];j.animations.push(t[p])}}if("LOD"===y.type){void 0!==y.autoUpdate&&(j.autoUpdate=y.autoUpdate);const L=y.levels;for(let y=0;y<L.length;y++){const p=L[y],N=j.getObjectByProperty("uuid",p.object);void 0!==N&&j.addLevel(N,p.distance,p.hysteresis)}}return j}bindSkeletons(y,L){0!==Object.keys(L).length&&y.traverse((function(y){if(!0===y.isSkinnedMesh&&void 0!==y.skeleton){const p=L[y.skeleton];void 0===p?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",y.skeleton):y.bind(p,y.bindMatrix)}}))}}const tg={UVMapping:Dy,CubeReflectionMapping:wy,CubeRefractionMapping:xy,EquirectangularReflectionMapping:dy,EquirectangularRefractionMapping:oy,CubeUVReflectionMapping:Uy},jg={RepeatWrapping:Iy,ClampToEdgeWrapping:Vy,MirroredRepeatWrapping:Fy},zg={NearestFilter:uy,NearestMipmapNearestFilter:Sy,NearestMipmapLinearFilter:Ry,LinearFilter:Ey,LinearMipmapNearestFilter:Py,LinearMipmapLinearFilter:My};class Og extends IW{constructor(y){super(y),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(y){return this.options=y,this}load(y,L,p,N){void 0===y&&(y=""),void 0!==this.path&&(y=this.path+y),y=this.manager.resolveURL(y);const t=this,j=dW.get(y);if(void 0!==j)return t.manager.itemStart(y),setTimeout((function(){L&&L(j),t.manager.itemEnd(y)}),0),j;const z={};z.credentials="anonymous"===this.crossOrigin?"same-origin":"include",z.headers=this.requestHeader,fetch(y,z).then((function(y){return y.blob()})).then((function(y){return createImageBitmap(y,Object.assign(t.options,{colorSpaceConversion:"none"}))})).then((function(p){dW.add(y,p),L&&L(p),t.manager.itemEnd(y)})).catch((function(L){N&&N(L),t.manager.itemError(y),t.manager.itemEnd(y)})),t.manager.itemStart(y)}}let hg;class mg{static getContext(){return void 0===hg&&(hg=new(window.AudioContext||window.webkitAudioContext)),hg}static setContext(y){hg=y}}class kg extends IW{constructor(y){super(y)}load(y,L,p,N){const t=this,j=new uW(this.manager);function z(L){N?N(L):console.error(L),t.manager.itemError(y)}j.setResponseType("arraybuffer"),j.setPath(this.path),j.setRequestHeader(this.requestHeader),j.setWithCredentials(this.withCredentials),j.load(y,(function(y){try{const p=y.slice(0);mg.getContext().decodeAudioData(p,(function(y){L(y)}),z)}catch(y){z(y)}}),p,N)}}class _g extends eW{constructor(y,L,p=1){super(void 0,p),this.isHemisphereLightProbe=!0;const N=(new pj).set(y),t=(new pj).set(L),j=new fN(N.r,N.g,N.b),z=new fN(t.r,t.g,t.b),O=Math.sqrt(Math.PI),h=O*Math.sqrt(.75);this.sh.coefficients[0].copy(j).add(z).multiplyScalar(O),this.sh.coefficients[1].copy(j).sub(z).multiplyScalar(h)}}class Wg extends eW{constructor(y,L=1){super(void 0,L),this.isAmbientLightProbe=!0;const p=(new pj).set(y);this.sh.coefficients[0].set(p.r,p.g,p.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const gg=new Wt,Cg=new Wt,Qg=new Wt;class Tg{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new jz,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new jz,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(y){const L=this._cache;if(L.focus!==y.focus||L.fov!==y.fov||L.aspect!==y.aspect*this.aspect||L.near!==y.near||L.far!==y.far||L.zoom!==y.zoom||L.eyeSep!==this.eyeSep){L.focus=y.focus,L.fov=y.fov,L.aspect=y.aspect*this.aspect,L.near=y.near,L.far=y.far,L.zoom=y.zoom,L.eyeSep=this.eyeSep,Qg.copy(y.projectionMatrix);const p=L.eyeSep/2,N=p*L.near/L.focus,t=L.near*Math.tan(sp*L.fov*.5)/L.zoom;let j,z;Cg.elements[12]=-p,gg.elements[12]=p,j=-t*L.aspect+N,z=t*L.aspect+N,Qg.elements[0]=2*L.near/(z-j),Qg.elements[8]=(z+j)/(z-j),this.cameraL.projectionMatrix.copy(Qg),j=-t*L.aspect-N,z=t*L.aspect-N,Qg.elements[0]=2*L.near/(z-j),Qg.elements[8]=(z+j)/(z-j),this.cameraR.projectionMatrix.copy(Qg)}this.cameraL.matrixWorld.copy(y.matrixWorld).multiply(Cg),this.cameraR.matrixWorld.copy(y.matrixWorld).multiply(gg)}}class ig{constructor(y=!0){this.autoStart=y,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Dg(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let y=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const L=Dg();y=(L-this.oldTime)/1e3,this.oldTime=L,this.elapsedTime+=y}return y}}function Dg(){return("undefined"==typeof performance?Date:performance).now()}const wg=new fN,xg=new MN,dg=new fN,og=new fN;class Ug extends at{constructor(){super(),this.type="AudioListener",this.context=mg.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ig}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(y){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=y,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(y){return this.gain.gain.setTargetAtTime(y,this.context.currentTime,.01),this}updateMatrixWorld(y){super.updateMatrixWorld(y);const L=this.context.listener,p=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(wg,xg,dg),og.set(0,0,-1).applyQuaternion(xg),L.positionX){const y=this.context.currentTime+this.timeDelta;L.positionX.linearRampToValueAtTime(wg.x,y),L.positionY.linearRampToValueAtTime(wg.y,y),L.positionZ.linearRampToValueAtTime(wg.z,y),L.forwardX.linearRampToValueAtTime(og.x,y),L.forwardY.linearRampToValueAtTime(og.y,y),L.forwardZ.linearRampToValueAtTime(og.z,y),L.upX.linearRampToValueAtTime(p.x,y),L.upY.linearRampToValueAtTime(p.y,y),L.upZ.linearRampToValueAtTime(p.z,y)}else L.setPosition(wg.x,wg.y,wg.z),L.setOrientation(og.x,og.y,og.z,p.x,p.y,p.z)}}class Ig extends at{constructor(y){super(),this.type="Audio",this.listener=y,this.context=y.context,this.gain=this.context.createGain(),this.gain.connect(y.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(y){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=y,this.connect(),this}setMediaElementSource(y){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(y),this.connect(),this}setMediaStreamSource(y){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(y),this.connect(),this}setBuffer(y){return this.buffer=y,this.sourceType="buffer",this.autoplay&&this.play(),this}play(y=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+y;const L=this.context.createBufferSource();return L.buffer=this.buffer,L.loop=this.loop,L.loopStart=this.loopStart,L.loopEnd=this.loopEnd,L.onended=this.onEnded.bind(this),L.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=L,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let y=1,L=this.filters.length;y<L;y++)this.filters[y-1].connect(this.filters[y]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let y=1,L=this.filters.length;y<L;y++)this.filters[y-1].disconnect(this.filters[y]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(y){return y||(y=[]),!0===this._connected?(this.disconnect(),this.filters=y.slice(),this.connect()):this.filters=y.slice(),this}setDetune(y){if(this.detune=y,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(y){return this.setFilters(y?[y]:[])}setPlaybackRate(y){if(!1!==this.hasPlaybackControl)return this.playbackRate=y,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(y){if(!1!==this.hasPlaybackControl)return this.loop=y,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(y){return this.loopStart=y,this}setLoopEnd(y){return this.loopEnd=y,this}getVolume(){return this.gain.gain.value}setVolume(y){return this.gain.gain.setTargetAtTime(y,this.context.currentTime,.01),this}}const Vg=new fN,Fg=new MN,ug=new fN,Sg=new fN;class Bg extends Ig{constructor(y){super(y),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(y){return this.panner.refDistance=y,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(y){return this.panner.rolloffFactor=y,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(y){return this.panner.distanceModel=y,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(y){return this.panner.maxDistance=y,this}setDirectionalCone(y,L,p){return this.panner.coneInnerAngle=y,this.panner.coneOuterAngle=L,this.panner.coneOuterGain=p,this}updateMatrixWorld(y){if(super.updateMatrixWorld(y),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Vg,Fg,ug),Sg.set(0,0,1).applyQuaternion(Fg);const L=this.panner;if(L.positionX){const y=this.context.currentTime+this.listener.timeDelta;L.positionX.linearRampToValueAtTime(Vg.x,y),L.positionY.linearRampToValueAtTime(Vg.y,y),L.positionZ.linearRampToValueAtTime(Vg.z,y),L.orientationX.linearRampToValueAtTime(Sg.x,y),L.orientationY.linearRampToValueAtTime(Sg.y,y),L.orientationZ.linearRampToValueAtTime(Sg.z,y)}else L.setPosition(Vg.x,Vg.y,Vg.z),L.setOrientation(Sg.x,Sg.y,Sg.z)}}class Rg{constructor(y,L=2048){this.analyser=y.context.createAnalyser(),this.analyser.fftSize=L,this.data=new Uint8Array(this.analyser.frequencyBinCount),y.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let y=0;const L=this.getFrequencyData();for(let p=0;p<L.length;p++)y+=L[p];return y/L.length}}class Yg{constructor(y,L,p){let N,t,j;switch(this.binding=y,this.valueSize=p,L){case"quaternion":N=this._slerp,t=this._slerpAdditive,j=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*p),this._workIndex=5;break;case"string":case"bool":N=this._select,t=this._select,j=this._setAdditiveIdentityOther,this.buffer=new Array(5*p);break;default:N=this._lerp,t=this._lerpAdditive,j=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*p)}this._mixBufferRegion=N,this._mixBufferRegionAdditive=t,this._setIdentity=j,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(y,L){const p=this.buffer,N=this.valueSize,t=y*N+N;let j=this.cumulativeWeight;if(0===j){for(let y=0;y!==N;++y)p[t+y]=p[y];j=L}else{j+=L;const y=L/j;this._mixBufferRegion(p,t,0,y,N)}this.cumulativeWeight=j}accumulateAdditive(y){const L=this.buffer,p=this.valueSize,N=p*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(L,N,0,y,p),this.cumulativeWeightAdditive+=y}apply(y){const L=this.valueSize,p=this.buffer,N=y*L+L,t=this.cumulativeWeight,j=this.cumulativeWeightAdditive,z=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,t<1){const y=L*this._origIndex;this._mixBufferRegion(p,N,y,1-t,L)}j>0&&this._mixBufferRegionAdditive(p,N,this._addIndex*L,1,L);for(let y=L,t=L+L;y!==t;++y)if(p[y]!==p[y+L]){z.setValue(p,N);break}}saveOriginalState(){const y=this.binding,L=this.buffer,p=this.valueSize,N=p*this._origIndex;y.getValue(L,N);for(let y=p,t=N;y!==t;++y)L[y]=L[N+y%p];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const y=3*this.valueSize;this.binding.setValue(this.buffer,y)}_setAdditiveIdentityNumeric(){const y=this._addIndex*this.valueSize,L=y+this.valueSize;for(let p=y;p<L;p++)this.buffer[p]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const y=this._origIndex*this.valueSize,L=this._addIndex*this.valueSize;for(let p=0;p<this.valueSize;p++)this.buffer[L+p]=this.buffer[y+p]}_select(y,L,p,N,t){if(N>=.5)for(let N=0;N!==t;++N)y[L+N]=y[p+N]}_slerp(y,L,p,N){MN.slerpFlat(y,L,y,L,y,p,N)}_slerpAdditive(y,L,p,N,t){const j=this._workIndex*t;MN.multiplyQuaternionsFlat(y,j,y,L,y,p),MN.slerpFlat(y,L,y,L,y,j,N)}_lerp(y,L,p,N,t){const j=1-N;for(let z=0;z!==t;++z){const t=L+z;y[t]=y[t]*j+y[p+z]*N}}_lerpAdditive(y,L,p,N,t){for(let j=0;j!==t;++j){const t=L+j;y[t]=y[t]+y[p+j]*N}}}const Eg="\\[\\]\\.:\\/",Pg=new RegExp("["+Eg+"]","g"),lg="[^"+Eg+"]",Mg="[^"+Eg.replace("\\.","")+"]",fg=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",lg)+/(WCOD+)?/.source.replace("WCOD",Mg)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",lg)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",lg)+"$"),ag=["material","materials","bones","map"];class Hg{constructor(y,L,p){this.path=L,this.parsedPath=p||Hg.parseTrackName(L),this.node=Hg.findNode(y,this.parsedPath.nodeName),this.rootNode=y,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(y,L,p){return y&&y.isAnimationObjectGroup?new Hg.Composite(y,L,p):new Hg(y,L,p)}static sanitizeNodeName(y){return y.replace(/\s/g,"_").replace(Pg,"")}static parseTrackName(y){const L=fg.exec(y);if(null===L)throw new Error("PropertyBinding: Cannot parse trackName: "+y);const p={nodeName:L[2],objectName:L[3],objectIndex:L[4],propertyName:L[5],propertyIndex:L[6]},N=p.nodeName&&p.nodeName.lastIndexOf(".");if(void 0!==N&&-1!==N){const y=p.nodeName.substring(N+1);-1!==ag.indexOf(y)&&(p.nodeName=p.nodeName.substring(0,N),p.objectName=y)}if(null===p.propertyName||0===p.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+y);return p}static findNode(y,L){if(void 0===L||""===L||"."===L||-1===L||L===y.name||L===y.uuid)return y;if(y.skeleton){const p=y.skeleton.getBoneByName(L);if(void 0!==p)return p}if(y.children){const p=function(y){for(let N=0;N<y.length;N++){const t=y[N];if(t.name===L||t.uuid===L)return t;const j=p(t.children);if(j)return j}return null},N=p(y.children);if(N)return N}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(y,L){y[L]=this.targetObject[this.propertyName]}_getValue_array(y,L){const p=this.resolvedProperty;for(let N=0,t=p.length;N!==t;++N)y[L++]=p[N]}_getValue_arrayElement(y,L){y[L]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(y,L){this.resolvedProperty.toArray(y,L)}_setValue_direct(y,L){this.targetObject[this.propertyName]=y[L]}_setValue_direct_setNeedsUpdate(y,L){this.targetObject[this.propertyName]=y[L],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(y,L){this.targetObject[this.propertyName]=y[L],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(y,L){const p=this.resolvedProperty;for(let N=0,t=p.length;N!==t;++N)p[N]=y[L++]}_setValue_array_setNeedsUpdate(y,L){const p=this.resolvedProperty;for(let N=0,t=p.length;N!==t;++N)p[N]=y[L++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(y,L){const p=this.resolvedProperty;for(let N=0,t=p.length;N!==t;++N)p[N]=y[L++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(y,L){this.resolvedProperty[this.propertyIndex]=y[L]}_setValue_arrayElement_setNeedsUpdate(y,L){this.resolvedProperty[this.propertyIndex]=y[L],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(y,L){this.resolvedProperty[this.propertyIndex]=y[L],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(y,L){this.resolvedProperty.fromArray(y,L)}_setValue_fromArray_setNeedsUpdate(y,L){this.resolvedProperty.fromArray(y,L),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(y,L){this.resolvedProperty.fromArray(y,L),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(y,L){this.bind(),this.getValue(y,L)}_setValue_unbound(y,L){this.bind(),this.setValue(y,L)}bind(){let y=this.node;const L=this.parsedPath,p=L.objectName,N=L.propertyName;let t=L.propertyIndex;if(y||(y=Hg.findNode(this.rootNode,L.nodeName),this.node=y),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!y)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(p){let N=L.objectIndex;switch(p){case"materials":if(!y.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!y.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);y=y.material.materials;break;case"bones":if(!y.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);y=y.skeleton.bones;for(let L=0;L<y.length;L++)if(y[L].name===N){N=L;break}break;case"map":if("map"in y){y=y.map;break}if(!y.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!y.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);y=y.material.map;break;default:if(void 0===y[p])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);y=y[p]}if(void 0!==N){if(void 0===y[N])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,y);y=y[N]}}const j=y[N];if(void 0===j){const p=L.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+N+" but it wasn't found.",y)}let z=this.Versioning.None;this.targetObject=y,void 0!==y.needsUpdate?z=this.Versioning.NeedsUpdate:void 0!==y.matrixWorldNeedsUpdate&&(z=this.Versioning.MatrixWorldNeedsUpdate);let O=this.BindingType.Direct;if(void 0!==t){if("morphTargetInfluences"===N){if(!y.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!y.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==y.morphTargetDictionary[t]&&(t=y.morphTargetDictionary[t])}O=this.BindingType.ArrayElement,this.resolvedProperty=j,this.propertyIndex=t}else void 0!==j.fromArray&&void 0!==j.toArray?(O=this.BindingType.HasFromToArray,this.resolvedProperty=j):Array.isArray(j)?(O=this.BindingType.EntireArray,this.resolvedProperty=j):this.propertyName=N;this.getValue=this.GetterByBindingType[O],this.setValue=this.SetterByBindingTypeAndVersioning[O][z]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Hg.Composite=class{constructor(y,L,p){const N=p||Hg.parseTrackName(L);this._targetGroup=y,this._bindings=y.subscribe_(L,N)}getValue(y,L){this.bind();const p=this._targetGroup.nCachedObjects_,N=this._bindings[p];void 0!==N&&N.getValue(y,L)}setValue(y,L){const p=this._bindings;for(let N=this._targetGroup.nCachedObjects_,t=p.length;N!==t;++N)p[N].setValue(y,L)}bind(){const y=this._bindings;for(let L=this._targetGroup.nCachedObjects_,p=y.length;L!==p;++L)y[L].bind()}unbind(){const y=this._bindings;for(let L=this._targetGroup.nCachedObjects_,p=y.length;L!==p;++L)y[L].unbind()}},Hg.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Hg.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Hg.prototype.GetterByBindingType=[Hg.prototype._getValue_direct,Hg.prototype._getValue_array,Hg.prototype._getValue_arrayElement,Hg.prototype._getValue_toArray],Hg.prototype.SetterByBindingTypeAndVersioning=[[Hg.prototype._setValue_direct,Hg.prototype._setValue_direct_setNeedsUpdate,Hg.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Hg.prototype._setValue_array,Hg.prototype._setValue_array_setNeedsUpdate,Hg.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Hg.prototype._setValue_arrayElement,Hg.prototype._setValue_arrayElement_setNeedsUpdate,Hg.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Hg.prototype._setValue_fromArray,Hg.prototype._setValue_fromArray_setNeedsUpdate,Hg.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Xg{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Kp(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const y={};this._indicesByUUID=y;for(let L=0,p=arguments.length;L!==p;++L)y[arguments[L].uuid]=L;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const L=this;this.stats={objects:{get total(){return L._objects.length},get inUse(){return this.total-L.nCachedObjects_}},get bindingsPerObject(){return L._bindings.length}}}add(){const y=this._objects,L=this._indicesByUUID,p=this._paths,N=this._parsedPaths,t=this._bindings,j=t.length;let z,O=y.length,h=this.nCachedObjects_;for(let m=0,k=arguments.length;m!==k;++m){const k=arguments[m],_=k.uuid;let W=L[_];if(void 0===W){W=O++,L[_]=W,y.push(k);for(let y=0,L=j;y!==L;++y)t[y].push(new Hg(k,p[y],N[y]))}else if(W<h){z=y[W];const O=--h,m=y[O];L[m.uuid]=W,y[W]=m,L[_]=O,y[O]=k;for(let y=0,L=j;y!==L;++y){const L=t[y],j=L[O];let z=L[W];L[W]=j,void 0===z&&(z=new Hg(k,p[y],N[y])),L[O]=z}}else y[W]!==z&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID "+"detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const y=this._objects,L=this._indicesByUUID,p=this._bindings,N=p.length;let t=this.nCachedObjects_;for(let j=0,z=arguments.length;j!==z;++j){const z=arguments[j],O=z.uuid,h=L[O];if(void 0!==h&&h>=t){const j=t++,m=y[j];L[m.uuid]=h,y[h]=m,L[O]=j,y[j]=z;for(let y=0,L=N;y!==L;++y){const L=p[y],N=L[j],t=L[h];L[h]=N,L[j]=t}}}this.nCachedObjects_=t}uncache(){const y=this._objects,L=this._indicesByUUID,p=this._bindings,N=p.length;let t=this.nCachedObjects_,j=y.length;for(let z=0,O=arguments.length;z!==O;++z){const O=arguments[z].uuid,h=L[O];if(void 0!==h)if(delete L[O],h<t){const z=--t,O=y[z],m=--j,k=y[m];L[O.uuid]=h,y[h]=O,L[k.uuid]=z,y[z]=k,y.pop();for(let y=0,L=N;y!==L;++y){const L=p[y],N=L[z],t=L[m];L[h]=N,L[z]=t,L.pop()}}else{const t=--j,z=y[t];t>0&&(L[z.uuid]=h),y[h]=z,y.pop();for(let y=0,L=N;y!==L;++y){const L=p[y];L[h]=L[t],L.pop()}}}this.nCachedObjects_=t}subscribe_(y,L){const p=this._bindingsIndicesByPath;let N=p[y];const t=this._bindings;if(void 0!==N)return t[N];const j=this._paths,z=this._parsedPaths,O=this._objects,h=O.length,m=this.nCachedObjects_,k=new Array(h);N=t.length,p[y]=N,j.push(y),z.push(L),t.push(k);for(let p=m,N=O.length;p!==N;++p){const N=O[p];k[p]=new Hg(N,y,L)}return k}unsubscribe_(y){const L=this._bindingsIndicesByPath,p=L[y];if(void 0!==p){const N=this._paths,t=this._parsedPaths,j=this._bindings,z=j.length-1,O=j[z];L[y[z]]=p,j[p]=O,j.pop(),t[p]=t[z],t.pop(),N[p]=N[z],N.pop()}}}class Jg{constructor(y,L,p=null,N=L.blendMode){this._mixer=y,this._clip=L,this._localRoot=p,this.blendMode=N;const t=L.tracks,j=t.length,z=new Array(j),O={endingStart:rL,endingEnd:rL};for(let y=0;y!==j;++y){const L=t[y].createInterpolant(null);z[y]=L,L.settings=O}this._interpolantSettings=O,this._interpolants=z,this._propertyBindings=new Array(j),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=fL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(y){return this._startTime=y,this}setLoop(y,L){return this.loop=y,this.repetitions=L,this}setEffectiveWeight(y){return this.weight=y,this._effectiveWeight=this.enabled?y:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(y){return this._scheduleFading(y,0,1)}fadeOut(y){return this._scheduleFading(y,1,0)}crossFadeFrom(y,L,p){if(y.fadeOut(L),this.fadeIn(L),p){const p=this._clip.duration,N=y._clip.duration,t=N/p,j=p/N;y.warp(1,t,L),this.warp(j,1,L)}return this}crossFadeTo(y,L,p){return y.crossFadeFrom(this,L,p)}stopFading(){const y=this._weightInterpolant;return null!==y&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(y)),this}setEffectiveTimeScale(y){return this.timeScale=y,this._effectiveTimeScale=this.paused?0:y,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(y){return this.timeScale=this._clip.duration/y,this.stopWarping()}syncWith(y){return this.time=y.time,this.timeScale=y.timeScale,this.stopWarping()}halt(y){return this.warp(this._effectiveTimeScale,0,y)}warp(y,L,p){const N=this._mixer,t=N.time,j=this.timeScale;let z=this._timeScaleInterpolant;null===z&&(z=N._lendControlInterpolant(),this._timeScaleInterpolant=z);const O=z.parameterPositions,h=z.sampleValues;return O[0]=t,O[1]=t+p,h[0]=y/j,h[1]=L/j,this}stopWarping(){const y=this._timeScaleInterpolant;return null!==y&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(y)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(y,L,p,N){if(!this.enabled)return void this._updateWeight(y);const t=this._startTime;if(null!==t){const N=(y-t)*p;N<0||0===p?L=0:(this._startTime=null,L=p*N)}L*=this._updateTimeScale(y);const j=this._updateTime(L),z=this._updateWeight(y);if(z>0){const y=this._interpolants,L=this._propertyBindings;if(this.blendMode===AL)for(let p=0,N=y.length;p!==N;++p)y[p].evaluate(j),L[p].accumulateAdditive(z);else for(let p=0,t=y.length;p!==t;++p)y[p].evaluate(j),L[p].accumulate(N,z)}}_updateWeight(y){let L=0;if(this.enabled){L=this.weight;const p=this._weightInterpolant;if(null!==p){const N=p.evaluate(y)[0];L*=N,y>p.parameterPositions[1]&&(this.stopFading(),0===N&&(this.enabled=!1))}}return this._effectiveWeight=L,L}_updateTimeScale(y){let L=0;if(!this.paused){L=this.timeScale;const p=this._timeScaleInterpolant;null!==p&&(L*=p.evaluate(y)[0],y>p.parameterPositions[1]&&(this.stopWarping(),0===L?this.paused=!0:this.timeScale=L))}return this._effectiveTimeScale=L,L}_updateTime(y){const L=this._clip.duration,p=this.loop;let N=this.time+y,t=this._loopCount;const j=p===aL;if(0===y)return-1===t||!j||1&~t?N:L-N;if(p===ML){-1===t&&(this._loopCount=0,this._setEndings(!0,!0,!1));y:{if(N>=L)N=L;else{if(!(N<0)){this.time=N;break y}N=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=N,this._mixer.dispatchEvent({type:"finished",action:this,direction:y<0?-1:1})}}else{if(-1===t&&(y>=0?(t=0,this._setEndings(!0,0===this.repetitions,j)):this._setEndings(0===this.repetitions,!0,j)),N>=L||N<0){const p=Math.floor(N/L);N-=L*p,t+=Math.abs(p);const z=this.repetitions-t;if(z<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,N=y>0?L:0,this.time=N,this._mixer.dispatchEvent({type:"finished",action:this,direction:y>0?1:-1});else{if(1===z){const L=y<0;this._setEndings(L,!L,j)}else this._setEndings(!1,!1,j);this._loopCount=t,this.time=N,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:p})}}else this.time=N;if(j&&!(1&~t))return L-N}return N}_setEndings(y,L,p){const N=this._interpolantSettings;p?(N.endingStart=GL,N.endingEnd=GL):(N.endingStart=y?this.zeroSlopeAtStart?GL:rL:$L,N.endingEnd=L?this.zeroSlopeAtEnd?GL:rL:$L)}_scheduleFading(y,L,p){const N=this._mixer,t=N.time;let j=this._weightInterpolant;null===j&&(j=N._lendControlInterpolant(),this._weightInterpolant=j);const z=j.parameterPositions,O=j.sampleValues;return z[0]=t,O[0]=L,z[1]=t+y,O[1]=p,this}}const rg=new Float32Array(1);class Gg extends $p{constructor(y){super(),this._root=y,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(y,L){const p=y._localRoot||this._root,N=y._clip.tracks,t=N.length,j=y._propertyBindings,z=y._interpolants,O=p.uuid,h=this._bindingsByRootAndName;let m=h[O];void 0===m&&(m={},h[O]=m);for(let y=0;y!==t;++y){const t=N[y],h=t.name;let k=m[h];if(void 0!==k)++k.referenceCount,j[y]=k;else{if(k=j[y],void 0!==k){null===k._cacheIndex&&(++k.referenceCount,this._addInactiveBinding(k,O,h));continue}const N=L&&L._propertyBindings[y].binding.parsedPath;k=new Yg(Hg.create(p,h,N),t.ValueTypeName,t.getValueSize()),++k.referenceCount,this._addInactiveBinding(k,O,h),j[y]=k}z[y].resultBuffer=k.buffer}}_activateAction(y){if(!this._isActiveAction(y)){if(null===y._cacheIndex){const L=(y._localRoot||this._root).uuid,p=y._clip.uuid,N=this._actionsByClip[p];this._bindAction(y,N&&N.knownActions[0]),this._addInactiveAction(y,p,L)}const L=y._propertyBindings;for(let y=0,p=L.length;y!==p;++y){const p=L[y];0==p.useCount++&&(this._lendBinding(p),p.saveOriginalState())}this._lendAction(y)}}_deactivateAction(y){if(this._isActiveAction(y)){const L=y._propertyBindings;for(let y=0,p=L.length;y!==p;++y){const p=L[y];0==--p.useCount&&(p.restoreOriginalState(),this._takeBackBinding(p))}this._takeBackAction(y)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const y=this;this.stats={actions:{get total(){return y._actions.length},get inUse(){return y._nActiveActions}},bindings:{get total(){return y._bindings.length},get inUse(){return y._nActiveBindings}},controlInterpolants:{get total(){return y._controlInterpolants.length},get inUse(){return y._nActiveControlInterpolants}}}}_isActiveAction(y){const L=y._cacheIndex;return null!==L&&L<this._nActiveActions}_addInactiveAction(y,L,p){const N=this._actions,t=this._actionsByClip;let j=t[L];if(void 0===j)j={knownActions:[y],actionByRoot:{}},y._byClipCacheIndex=0,t[L]=j;else{const L=j.knownActions;y._byClipCacheIndex=L.length,L.push(y)}y._cacheIndex=N.length,N.push(y),j.actionByRoot[p]=y}_removeInactiveAction(y){const L=this._actions,p=L[L.length-1],N=y._cacheIndex;p._cacheIndex=N,L[N]=p,L.pop(),y._cacheIndex=null;const t=y._clip.uuid,j=this._actionsByClip,z=j[t],O=z.knownActions,h=O[O.length-1],m=y._byClipCacheIndex;h._byClipCacheIndex=m,O[m]=h,O.pop(),y._byClipCacheIndex=null,delete z.actionByRoot[(y._localRoot||this._root).uuid],0===O.length&&delete j[t],this._removeInactiveBindingsForAction(y)}_removeInactiveBindingsForAction(y){const L=y._propertyBindings;for(let y=0,p=L.length;y!==p;++y){const p=L[y];0==--p.referenceCount&&this._removeInactiveBinding(p)}}_lendAction(y){const L=this._actions,p=y._cacheIndex,N=this._nActiveActions++,t=L[N];y._cacheIndex=N,L[N]=y,t._cacheIndex=p,L[p]=t}_takeBackAction(y){const L=this._actions,p=y._cacheIndex,N=--this._nActiveActions,t=L[N];y._cacheIndex=N,L[N]=y,t._cacheIndex=p,L[p]=t}_addInactiveBinding(y,L,p){const N=this._bindingsByRootAndName,t=this._bindings;let j=N[L];void 0===j&&(j={},N[L]=j),j[p]=y,y._cacheIndex=t.length,t.push(y)}_removeInactiveBinding(y){const L=this._bindings,p=y.binding,N=p.rootNode.uuid,t=p.path,j=this._bindingsByRootAndName,z=j[N],O=L[L.length-1],h=y._cacheIndex;O._cacheIndex=h,L[h]=O,L.pop(),delete z[t],0===Object.keys(z).length&&delete j[N]}_lendBinding(y){const L=this._bindings,p=y._cacheIndex,N=this._nActiveBindings++,t=L[N];y._cacheIndex=N,L[N]=y,t._cacheIndex=p,L[p]=t}_takeBackBinding(y){const L=this._bindings,p=y._cacheIndex,N=--this._nActiveBindings,t=L[N];y._cacheIndex=N,L[N]=y,t._cacheIndex=p,L[p]=t}_lendControlInterpolant(){const y=this._controlInterpolants,L=this._nActiveControlInterpolants++;let p=y[L];return void 0===p&&(p=new mW(new Float32Array(2),new Float32Array(2),1,rg),p.__cacheIndex=L,y[L]=p),p}_takeBackControlInterpolant(y){const L=this._controlInterpolants,p=y.__cacheIndex,N=--this._nActiveControlInterpolants,t=L[N];y.__cacheIndex=N,L[N]=y,t.__cacheIndex=p,L[p]=t}clipAction(y,L,p){const N=L||this._root,t=N.uuid;let j="string"==typeof y?wW.findByName(N,y):y;const z=null!==j?j.uuid:y,O=this._actionsByClip[z];let h=null;if(void 0===p&&(p=null!==j?j.blendMode:qL),void 0!==O){const y=O.actionByRoot[t];if(void 0!==y&&y.blendMode===p)return y;h=O.knownActions[0],null===j&&(j=h._clip)}if(null===j)return null;const m=new Jg(this,j,L,p);return this._bindAction(m,h),this._addInactiveAction(m,z,t),m}existingAction(y,L){const p=L||this._root,N=p.uuid,t="string"==typeof y?wW.findByName(p,y):y,j=t?t.uuid:y,z=this._actionsByClip[j];return void 0!==z&&z.actionByRoot[N]||null}stopAllAction(){const y=this._actions;for(let L=this._nActiveActions-1;L>=0;--L)y[L].stop();return this}update(y){y*=this.timeScale;const L=this._actions,p=this._nActiveActions,N=this.time+=y,t=Math.sign(y),j=this._accuIndex^=1;for(let z=0;z!==p;++z)L[z]._update(N,y,t,j);const z=this._bindings,O=this._nActiveBindings;for(let y=0;y!==O;++y)z[y].apply(j);return this}setTime(y){this.time=0;for(let y=0;y<this._actions.length;y++)this._actions[y].time=0;return this.update(y)}getRoot(){return this._root}uncacheClip(y){const L=this._actions,p=y.uuid,N=this._actionsByClip,t=N[p];if(void 0!==t){const y=t.knownActions;for(let p=0,N=y.length;p!==N;++p){const N=y[p];this._deactivateAction(N);const t=N._cacheIndex,j=L[L.length-1];N._cacheIndex=null,N._byClipCacheIndex=null,j._cacheIndex=t,L[t]=j,L.pop(),this._removeInactiveBindingsForAction(N)}delete N[p]}}uncacheRoot(y){const L=y.uuid,p=this._actionsByClip;for(const y in p){const N=p[y].actionByRoot[L];void 0!==N&&(this._deactivateAction(N),this._removeInactiveAction(N))}const N=this._bindingsByRootAndName[L];if(void 0!==N)for(const y in N){const L=N[y];L.restoreOriginalState(),this._removeInactiveBinding(L)}}uncacheAction(y,L){const p=this.existingAction(y,L);null!==p&&(this._deactivateAction(p),this._removeInactiveAction(p))}}class $g{constructor(y){this.value=y}clone(){return new $g(void 0===this.value.clone?this.value:this.value.clone())}}let qg=0;class Ag extends $p{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:qg++}),this.name="",this.usage=Bp,this.uniforms=[]}add(y){return this.uniforms.push(y),this}remove(y){const L=this.uniforms.indexOf(y);return-1!==L&&this.uniforms.splice(L,1),this}setName(y){return this.name=y,this}setUsage(y){return this.usage=y,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(y){this.name=y.name,this.usage=y.usage;const L=y.uniforms;this.uniforms.length=0;for(let y=0,p=L.length;y<p;y++)this.uniforms.push(L[y].clone());return this}clone(){return(new this.constructor).copy(this)}}class sg extends zm{constructor(y,L,p=1){super(y,L),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=p}copy(y){return super.copy(y),this.meshPerAttribute=y.meshPerAttribute,this}clone(y){const L=super.clone(y);return L.meshPerAttribute=this.meshPerAttribute,L}toJSON(y){const L=super.toJSON(y);return L.isInstancedInterleavedBuffer=!0,L.meshPerAttribute=this.meshPerAttribute,L}}class cg{constructor(y,L,p,N,t){this.isGLBufferAttribute=!0,this.name="",this.buffer=y,this.type=L,this.itemSize=p,this.elementSize=N,this.count=t,this.version=0}set needsUpdate(y){!0===y&&this.version++}setBuffer(y){return this.buffer=y,this}setType(y,L){return this.type=y,this.elementSize=L,this}setItemSize(y){return this.itemSize=y,this}setCount(y){return this.count=y,this}}class Kg{constructor(y,L,p=0,N=1/0){this.ray=new _t(y,L),this.near=p,this.far=N,this.camera=null,this.layers=new Ut,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(y,L){this.ray.set(y,L)}setFromCamera(y,L){L.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(L.matrixWorld),this.ray.direction.set(y.x,y.y,.5).unproject(L).sub(this.ray.origin).normalize(),this.camera=L):L.isOrthographicCamera?(this.ray.origin.set(y.x,y.y,(L.near+L.far)/(L.near-L.far)).unproject(L),this.ray.direction.set(0,0,-1).transformDirection(L.matrixWorld),this.camera=L):console.error("THREE.Raycaster: Unsupported camera type: "+L.type)}intersectObject(y,L=!0,p=[]){return ng(y,this,p,L),p.sort(bg),p}intersectObjects(y,L=!0,p=[]){for(let N=0,t=y.length;N<t;N++)ng(y[N],this,p,L);return p.sort(bg),p}}function bg(y,L){return y.distance-L.distance}function ng(y,L,p,N){if(y.layers.test(L.layers)&&y.raycast(L,p),!0===N){const N=y.children;for(let y=0,t=N.length;y<t;y++)ng(N[y],L,p,!0)}}class vg{constructor(y=1,L=0,p=0){return this.radius=y,this.phi=L,this.theta=p,this}set(y,L,p){return this.radius=y,this.phi=L,this.theta=p,this}copy(y){return this.radius=y.radius,this.phi=y.phi,this.theta=y.theta,this}makeSafe(){const y=1e-6;return this.phi=Math.max(y,Math.min(Math.PI-y,this.phi)),this}setFromVector3(y){return this.setFromCartesianCoords(y.x,y.y,y.z)}setFromCartesianCoords(y,L,p){return this.radius=Math.sqrt(y*y+L*L+p*p),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(y,p),this.phi=Math.acos(bp(L/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class eg{constructor(y=1,L=0,p=0){return this.radius=y,this.theta=L,this.y=p,this}set(y,L,p){return this.radius=y,this.theta=L,this.y=p,this}copy(y){return this.radius=y.radius,this.theta=y.theta,this.y=y.y,this}setFromVector3(y){return this.setFromCartesianCoords(y.x,y.y,y.z)}setFromCartesianCoords(y,L,p){return this.radius=Math.sqrt(y*y+p*p),this.theta=Math.atan2(y,p),this.y=L,this}clone(){return(new this.constructor).copy(this)}}const Zg=new tN;class yC{constructor(y=new tN(+1/0,+1/0),L=new tN(-1/0,-1/0)){this.isBox2=!0,this.min=y,this.max=L}set(y,L){return this.min.copy(y),this.max.copy(L),this}setFromPoints(y){this.makeEmpty();for(let L=0,p=y.length;L<p;L++)this.expandByPoint(y[L]);return this}setFromCenterAndSize(y,L){const p=Zg.copy(L).multiplyScalar(.5);return this.min.copy(y).sub(p),this.max.copy(y).add(p),this}clone(){return(new this.constructor).copy(this)}copy(y){return this.min.copy(y.min),this.max.copy(y.max),this}makeEmpty(){return this.min.x=this.min.y=+1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(y){return this.isEmpty()?y.set(0,0):y.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(y){return this.isEmpty()?y.set(0,0):y.subVectors(this.max,this.min)}expandByPoint(y){return this.min.min(y),this.max.max(y),this}expandByVector(y){return this.min.sub(y),this.max.add(y),this}expandByScalar(y){return this.min.addScalar(-y),this.max.addScalar(y),this}containsPoint(y){return!(y.x<this.min.x||y.x>this.max.x||y.y<this.min.y||y.y>this.max.y)}containsBox(y){return this.min.x<=y.min.x&&y.max.x<=this.max.x&&this.min.y<=y.min.y&&y.max.y<=this.max.y}getParameter(y,L){return L.set((y.x-this.min.x)/(this.max.x-this.min.x),(y.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(y){return!(y.max.x<this.min.x||y.min.x>this.max.x||y.max.y<this.min.y||y.min.y>this.max.y)}clampPoint(y,L){return L.copy(y).clamp(this.min,this.max)}distanceToPoint(y){return this.clampPoint(y,Zg).distanceTo(y)}intersect(y){return this.min.max(y.min),this.max.min(y.max),this.isEmpty()&&this.makeEmpty(),this}union(y){return this.min.min(y.min),this.max.max(y.max),this}translate(y){return this.min.add(y),this.max.add(y),this}equals(y){return y.min.equals(this.min)&&y.max.equals(this.max)}}const LC=new fN,pC=new fN;class NC{constructor(y=new fN,L=new fN){this.start=y,this.end=L}set(y,L){return this.start.copy(y),this.end.copy(L),this}copy(y){return this.start.copy(y.start),this.end.copy(y.end),this}getCenter(y){return y.addVectors(this.start,this.end).multiplyScalar(.5)}delta(y){return y.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(y,L){return this.delta(L).multiplyScalar(y).add(this.start)}closestPointToPointParameter(y,L){LC.subVectors(y,this.start),pC.subVectors(this.end,this.start);const p=pC.dot(pC);let N=pC.dot(LC)/p;return L&&(N=bp(N,0,1)),N}closestPointToPoint(y,L,p){const N=this.closestPointToPointParameter(y,L);return this.delta(p).multiplyScalar(N).add(this.start)}applyMatrix4(y){return this.start.applyMatrix4(y),this.end.applyMatrix4(y),this}equals(y){return y.start.equals(this.start)&&y.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const tC=new fN;class jC extends at{constructor(y,L){super(),this.light=y,this.matrix=y.matrixWorld,this.matrixAutoUpdate=!1,this.color=L,this.type="SpotLightHelper";const p=new Rj,N=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let y=0,L=1,p=32;y<p;y++,L++){const t=y/p*Math.PI*2,j=L/p*Math.PI*2;N.push(Math.cos(t),Math.sin(t),1,Math.cos(j),Math.sin(j),1)}p.setAttribute("position",new dj(N,3));const t=new em({fog:!1,toneMapped:!1});this.cone=new Ok(p,t),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const y=this.light.distance?this.light.distance:1e3,L=y*Math.tan(this.light.angle);this.cone.scale.set(L,L,y),tC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(tC),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const zC=new fN,OC=new Wt,hC=new Wt;class mC extends Ok{constructor(y){const L=kC(y),p=new Rj,N=[],t=[],j=new pj(0,0,1),z=new pj(0,1,0);for(let y=0;y<L.length;y++){const p=L[y];p.parent&&p.parent.isBone&&(N.push(0,0,0),N.push(0,0,0),t.push(j.r,j.g,j.b),t.push(z.r,z.g,z.b))}p.setAttribute("position",new dj(N,3)),p.setAttribute("color",new dj(t,3)),super(p,new em({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=y,this.bones=L,this.matrix=y.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(y){const L=this.bones,p=this.geometry,N=p.getAttribute("position");hC.copy(this.root.matrixWorld).invert();for(let y=0,p=0;y<L.length;y++){const t=L[y];t.parent&&t.parent.isBone&&(OC.multiplyMatrices(hC,t.matrixWorld),zC.setFromMatrixPosition(OC),N.setXYZ(p,zC.x,zC.y,zC.z),OC.multiplyMatrices(hC,t.parent.matrixWorld),zC.setFromMatrixPosition(OC),N.setXYZ(p+1,zC.x,zC.y,zC.z),p+=2)}p.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(y)}dispose(){this.geometry.dispose(),this.material.dispose()}}function kC(y){const L=[];!0===y.isBone&&L.push(y);for(let p=0;p<y.children.length;p++)L.push.apply(L,kC(y.children[p]));return L}class _C extends Kj{constructor(y,L,p){super(new f_(L,4,2),new tj({wireframe:!0,fog:!1,toneMapped:!1})),this.light=y,this.color=p,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const WC=new fN,gC=new pj,CC=new pj;class QC extends at{constructor(y,L,p){super(),this.light=y,this.matrix=y.matrixWorld,this.matrixAutoUpdate=!1,this.color=p,this.type="HemisphereLightHelper";const N=new P_(L);N.rotateY(.5*Math.PI),this.material=new tj({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const t=N.getAttribute("position"),j=new Float32Array(3*t.count);N.setAttribute("color",new Wj(j,3)),this.add(new Kj(N,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const y=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const L=y.geometry.getAttribute("color");gC.copy(this.light.color),CC.copy(this.light.groundColor);for(let y=0,p=L.count;y<p;y++){const N=y<p/2?gC:CC;L.setXYZ(y,N.r,N.g,N.b)}L.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),y.lookAt(WC.setFromMatrixPosition(this.light.matrixWorld).negate())}}class TC extends Ok{constructor(y=10,L=10,p=4473924,N=8947848){p=new pj(p),N=new pj(N);const t=L/2,j=y/L,z=y/2,O=[],h=[];for(let y=0,m=0,k=-z;y<=L;y++,k+=j){O.push(-z,0,k,z,0,k),O.push(k,0,-z,k,0,z);const L=y===t?p:N;L.toArray(h,m),m+=3,L.toArray(h,m),m+=3,L.toArray(h,m),m+=3,L.toArray(h,m),m+=3}const m=new Rj;m.setAttribute("position",new dj(O,3)),m.setAttribute("color",new dj(h,3)),super(m,new em({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class iC extends Ok{constructor(y=10,L=16,p=8,N=64,t=4473924,j=8947848){t=new pj(t),j=new pj(j);const z=[],O=[];if(L>1)for(let p=0;p<L;p++){const N=p/L*(2*Math.PI),h=Math.sin(N)*y,m=Math.cos(N)*y;z.push(0,0,0),z.push(h,0,m);const k=1&p?t:j;O.push(k.r,k.g,k.b),O.push(k.r,k.g,k.b)}for(let L=0;L<p;L++){const h=1&L?t:j,m=y-y/p*L;for(let y=0;y<N;y++){let L=y/N*(2*Math.PI),p=Math.sin(L)*m,t=Math.cos(L)*m;z.push(p,0,t),O.push(h.r,h.g,h.b),L=(y+1)/N*(2*Math.PI),p=Math.sin(L)*m,t=Math.cos(L)*m,z.push(p,0,t),O.push(h.r,h.g,h.b)}}const h=new Rj;h.setAttribute("position",new dj(z,3)),h.setAttribute("color",new dj(O,3)),super(h,new em({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const DC=new fN,wC=new fN,xC=new fN;class dC extends at{constructor(y,L,p){super(),this.light=y,this.matrix=y.matrixWorld,this.matrixAutoUpdate=!1,this.color=p,this.type="DirectionalLightHelper",void 0===L&&(L=1);let N=new Rj;N.setAttribute("position",new dj([-L,L,0,L,L,0,L,-L,0,-L,-L,0,-L,L,0],3));const t=new em({fog:!1,toneMapped:!1});this.lightPlane=new tk(N,t),this.add(this.lightPlane),N=new Rj,N.setAttribute("position",new dj([0,0,0,0,0,1],3)),this.targetLine=new tk(N,t),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),DC.setFromMatrixPosition(this.light.matrixWorld),wC.setFromMatrixPosition(this.light.target.matrixWorld),xC.subVectors(wC,DC),this.lightPlane.lookAt(wC),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(wC),this.targetLine.scale.z=xC.length()}}const oC=new fN,UC=new tz;class IC extends Ok{constructor(y){const L=new Rj,p=new em({color:16777215,vertexColors:!0,toneMapped:!1}),N=[],t=[],j={};function z(y,L){O(y),O(L)}function O(y){N.push(0,0,0),t.push(0,0,0),void 0===j[y]&&(j[y]=[]),j[y].push(N.length/3-1)}z("n1","n2"),z("n2","n4"),z("n4","n3"),z("n3","n1"),z("f1","f2"),z("f2","f4"),z("f4","f3"),z("f3","f1"),z("n1","f1"),z("n2","f2"),z("n3","f3"),z("n4","f4"),z("p","n1"),z("p","n2"),z("p","n3"),z("p","n4"),z("u1","u2"),z("u2","u3"),z("u3","u1"),z("c","t"),z("p","c"),z("cn1","cn2"),z("cn3","cn4"),z("cf1","cf2"),z("cf3","cf4"),L.setAttribute("position",new dj(N,3)),L.setAttribute("color",new dj(t,3)),super(L,p),this.type="CameraHelper",this.camera=y,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=y.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=j,this.update();const h=new pj(16755200),m=new pj(16711680),k=new pj(43775),_=new pj(16777215),W=new pj(3355443);this.setColors(h,m,k,_,W)}setColors(y,L,p,N,t){const j=this.geometry.getAttribute("color");j.setXYZ(0,y.r,y.g,y.b),j.setXYZ(1,y.r,y.g,y.b),j.setXYZ(2,y.r,y.g,y.b),j.setXYZ(3,y.r,y.g,y.b),j.setXYZ(4,y.r,y.g,y.b),j.setXYZ(5,y.r,y.g,y.b),j.setXYZ(6,y.r,y.g,y.b),j.setXYZ(7,y.r,y.g,y.b),j.setXYZ(8,y.r,y.g,y.b),j.setXYZ(9,y.r,y.g,y.b),j.setXYZ(10,y.r,y.g,y.b),j.setXYZ(11,y.r,y.g,y.b),j.setXYZ(12,y.r,y.g,y.b),j.setXYZ(13,y.r,y.g,y.b),j.setXYZ(14,y.r,y.g,y.b),j.setXYZ(15,y.r,y.g,y.b),j.setXYZ(16,y.r,y.g,y.b),j.setXYZ(17,y.r,y.g,y.b),j.setXYZ(18,y.r,y.g,y.b),j.setXYZ(19,y.r,y.g,y.b),j.setXYZ(20,y.r,y.g,y.b),j.setXYZ(21,y.r,y.g,y.b),j.setXYZ(22,y.r,y.g,y.b),j.setXYZ(23,y.r,y.g,y.b),j.setXYZ(24,L.r,L.g,L.b),j.setXYZ(25,L.r,L.g,L.b),j.setXYZ(26,L.r,L.g,L.b),j.setXYZ(27,L.r,L.g,L.b),j.setXYZ(28,L.r,L.g,L.b),j.setXYZ(29,L.r,L.g,L.b),j.setXYZ(30,L.r,L.g,L.b),j.setXYZ(31,L.r,L.g,L.b),j.setXYZ(32,p.r,p.g,p.b),j.setXYZ(33,p.r,p.g,p.b),j.setXYZ(34,p.r,p.g,p.b),j.setXYZ(35,p.r,p.g,p.b),j.setXYZ(36,p.r,p.g,p.b),j.setXYZ(37,p.r,p.g,p.b),j.setXYZ(38,N.r,N.g,N.b),j.setXYZ(39,N.r,N.g,N.b),j.setXYZ(40,t.r,t.g,t.b),j.setXYZ(41,t.r,t.g,t.b),j.setXYZ(42,t.r,t.g,t.b),j.setXYZ(43,t.r,t.g,t.b),j.setXYZ(44,t.r,t.g,t.b),j.setXYZ(45,t.r,t.g,t.b),j.setXYZ(46,t.r,t.g,t.b),j.setXYZ(47,t.r,t.g,t.b),j.setXYZ(48,t.r,t.g,t.b),j.setXYZ(49,t.r,t.g,t.b),j.needsUpdate=!0}update(){const y=this.geometry,L=this.pointMap,p=1,N=1;UC.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),VC("c",L,y,UC,0,0,-1),VC("t",L,y,UC,0,0,1),VC("n1",L,y,UC,-p,-N,-1),VC("n2",L,y,UC,p,-N,-1),VC("n3",L,y,UC,-p,N,-1),VC("n4",L,y,UC,p,N,-1),VC("f1",L,y,UC,-p,-N,1),VC("f2",L,y,UC,p,-N,1),VC("f3",L,y,UC,-p,N,1),VC("f4",L,y,UC,p,N,1),VC("u1",L,y,UC,.7*p,1.1*N,-1),VC("u2",L,y,UC,.7*-p,1.1*N,-1),VC("u3",L,y,UC,0,2*N,-1),VC("cf1",L,y,UC,-p,0,1),VC("cf2",L,y,UC,p,0,1),VC("cf3",L,y,UC,0,-N,1),VC("cf4",L,y,UC,0,N,1),VC("cn1",L,y,UC,-p,0,-1),VC("cn2",L,y,UC,p,0,-1),VC("cn3",L,y,UC,0,-N,-1),VC("cn4",L,y,UC,0,N,-1),y.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function VC(y,L,p,N,t,j,z){oC.set(t,j,z).unproject(N);const O=L[y];if(void 0!==O){const y=p.getAttribute("position");for(let L=0,p=O.length;L<p;L++)y.setXYZ(O[L],oC.x,oC.y,oC.z)}}const FC=new XN;class uC extends Ok{constructor(y,L=16776960){const p=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),N=new Float32Array(8*3),t=new Rj;t.setIndex(new Wj(p,1)),t.setAttribute("position",new Wj(N,3)),super(t,new em({color:L,toneMapped:!1})),this.object=y,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(y){if(void 0!==y&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&FC.setFromObject(this.object),FC.isEmpty())return;const L=FC.min,p=FC.max,N=this.geometry.attributes.position,t=N.array;t[0]=p.x,t[1]=p.y,t[2]=p.z,t[3]=L.x,t[4]=p.y,t[5]=p.z,t[6]=L.x,t[7]=L.y,t[8]=p.z,t[9]=p.x,t[10]=L.y,t[11]=p.z,t[12]=p.x,t[13]=p.y,t[14]=L.z,t[15]=L.x,t[16]=p.y,t[17]=L.z,t[18]=L.x,t[19]=L.y,t[20]=L.z,t[21]=p.x,t[22]=L.y,t[23]=L.z,N.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(y){return this.object=y,this.update(),this}copy(y,L){return super.copy(y,L),this.object=y.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class SC extends Ok{constructor(y,L=16776960){const p=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),N=new Rj;N.setIndex(new Wj(p,1)),N.setAttribute("position",new dj([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(N,new em({color:L,toneMapped:!1})),this.box=y,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(y){const L=this.box;L.isEmpty()||(L.getCenter(this.position),L.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(y))}dispose(){this.geometry.dispose(),this.material.dispose()}}class BC extends tk{constructor(y,L=1,p=16776960){const N=p,t=new Rj;t.setAttribute("position",new dj([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),t.computeBoundingSphere(),super(t,new em({color:N,toneMapped:!1})),this.type="PlaneHelper",this.plane=y,this.size=L;const j=new Rj;j.setAttribute("position",new dj([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),j.computeBoundingSphere(),this.add(new Kj(j,new tj({color:N,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(y){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(y)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const RC=new fN;let YC,EC;class PC extends at{constructor(y=new fN(0,0,1),L=new fN(0,0,0),p=1,N=16776960,t=.2*p,j=.2*t){super(),this.type="ArrowHelper",void 0===YC&&(YC=new Rj,YC.setAttribute("position",new dj([0,0,0,0,1,0],3)),EC=new ck(0,.5,1,5,1),EC.translate(0,-.5,0)),this.position.copy(L),this.line=new tk(YC,new em({color:N,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Kj(EC,new tj({color:N,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(y),this.setLength(p,t,j)}setDirection(y){if(y.y>.99999)this.quaternion.set(0,0,0,1);else if(y.y<-.99999)this.quaternion.set(1,0,0,0);else{RC.set(y.z,0,-y.x).normalize();const L=Math.acos(y.y);this.quaternion.setFromAxisAngle(RC,L)}}setLength(y,L=.2*y,p=.2*L){this.line.scale.set(1,Math.max(1e-4,y-L),1),this.line.updateMatrix(),this.cone.scale.set(p,L,p),this.cone.position.y=y,this.cone.updateMatrix()}setColor(y){this.line.material.color.set(y),this.cone.material.color.set(y)}copy(y){return super.copy(y,!1),this.line.copy(y.line),this.cone.copy(y.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class lC extends Ok{constructor(y=1){const L=[0,0,0,y,0,0,0,0,0,0,y,0,0,0,0,0,0,y],p=new Rj;p.setAttribute("position",new dj(L,3)),p.setAttribute("color",new dj([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(p,new em({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(y,L,p){const N=new pj,t=this.geometry.attributes.color.array;return N.set(y),N.toArray(t,0),N.toArray(t,3),N.set(L),N.toArray(t,6),N.toArray(t,9),N.set(p),N.toArray(t,12),N.toArray(t,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class MC{constructor(){this.type="ShapePath",this.color=new pj,this.subPaths=[],this.currentPath=null}moveTo(y,L){return this.currentPath=new $k,this.subPaths.push(this.currentPath),this.currentPath.moveTo(y,L),this}lineTo(y,L){return this.currentPath.lineTo(y,L),this}quadraticCurveTo(y,L,p,N){return this.currentPath.quadraticCurveTo(y,L,p,N),this}bezierCurveTo(y,L,p,N,t,j){return this.currentPath.bezierCurveTo(y,L,p,N,t,j),this}splineThru(y){return this.currentPath.splineThru(y),this}toShapes(y){function L(y,L){const p=L.length;let N=!1;for(let t=p-1,j=0;j<p;t=j++){let p=L[t],z=L[j],O=z.x-p.x,h=z.y-p.y;if(Math.abs(h)>Number.EPSILON){if(h<0&&(p=L[j],O=-O,z=L[t],h=-h),y.y<p.y||y.y>z.y)continue;if(y.y===p.y){if(y.x===p.x)return!0}else{const L=h*(y.x-p.x)-O*(y.y-p.y);if(0===L)return!0;if(L<0)continue;N=!N}}else{if(y.y!==p.y)continue;if(z.x<=y.x&&y.x<=p.x||p.x<=y.x&&y.x<=z.x)return!0}}return N}const p=u_.isClockWise,N=this.subPaths;if(0===N.length)return[];let t,j,z;const O=[];if(1===N.length)return j=N[0],z=new p_,z.curves=j.curves,O.push(z),O;let h=!p(N[0].getPoints());h=y?!h:h;const m=[],k=[];let _,W,g=[],C=0;k[C]=void 0,g[C]=[];for(let L=0,z=N.length;L<z;L++)j=N[L],_=j.getPoints(),t=p(_),t=y?!t:t,t?(!h&&k[C]&&C++,k[C]={s:new p_,p:_},k[C].s.curves=j.curves,h&&C++,g[C]=[]):g[C].push({h:j,p:_[0]});if(!k[0])return function(y){const L=[];for(let p=0,N=y.length;p<N;p++){const N=y[p],t=new p_;t.curves=N.curves,L.push(t)}return L}(N);if(k.length>1){let y=!1,p=0;for(let y=0,L=k.length;y<L;y++)m[y]=[];for(let N=0,t=k.length;N<t;N++){const t=g[N];for(let j=0;j<t.length;j++){const z=t[j];let O=!0;for(let t=0;t<k.length;t++)L(z.p,k[t].p)&&(N!==t&&p++,O?(O=!1,m[t].push(z)):y=!0);O&&m[N].push(z)}}p>0&&!1===y&&(g=m)}for(let y=0,L=k.length;y<L;y++){z=k[y].s,O.push(z),W=g[y];for(let y=0,L=W.length;y<L;y++)z.holes.push(W[y].h)}return O}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:D}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=D);var fC=p(933506);const aC="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?h.useEffect:h.useLayoutEffect;function HC(y){const L="function"==typeof y?function(y){let L;const p=new Set,N=(y,N)=>{const t="function"==typeof y?y(L):y;if(t!==L){const y=L;L=N?t:Object.assign({},L,t),p.forEach((p=>p(L,y)))}},t=()=>L,j={setState:N,getState:t,subscribe:(y,N,j)=>N||j?((y,N=t,j=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let z=N(L);function O(){const p=N(L);if(!j(z,p)){const L=z;y(z=p,L)}}return p.add(O),()=>p.delete(O)})(y,N,j):(p.add(y),()=>p.delete(y)),destroy:()=>p.clear()};return L=y(N,t,j),j}(y):y,p=(y=L.getState,p=Object.is)=>{const[,N]=h.useReducer((y=>y+1),0),t=L.getState(),j=h.useRef(t),z=h.useRef(y),O=h.useRef(p),m=h.useRef(!1),k=h.useRef();let _;void 0===k.current&&(k.current=y(t));let W=!1;(j.current!==t||z.current!==y||O.current!==p||m.current)&&(_=y(t),W=!p(k.current,_)),aC((()=>{W&&(k.current=_),j.current=t,z.current=y,O.current=p,m.current=!1}));const g=h.useRef(t);aC((()=>{const y=()=>{try{const y=L.getState(),p=z.current(y);O.current(k.current,p)||(j.current=y,k.current=p,N())}catch(y){m.current=!0,N()}},p=L.subscribe(y);return L.getState()!==g.current&&y(),p}),[]);const C=W?_:k.current;return h.useDebugValue(C),C};return Object.assign(p,L),p[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const y=[p,L];return{next(){const L=y.length<=0;return{value:y.shift(),done:L}}}},p}var XC=p(60607),JC=p.n(XC),rC=p(882328);const GC=[];function $C(y,L,p=(y,L)=>y===L){if(y===L)return!0;if(!y||!L)return!1;const N=y.length;if(L.length!==N)return!1;for(let t=0;t<N;t++)if(!p(y[t],L[t]))return!1;return!0}function qC(y,L=null,p=!1,N={}){null===L&&(L=[y]);for(const y of GC)if($C(L,y.keys,y.equal)){if(p)return;if(Object.prototype.hasOwnProperty.call(y,"error"))throw y.error;if(Object.prototype.hasOwnProperty.call(y,"response"))return N.lifespan&&N.lifespan>0&&(y.timeout&&clearTimeout(y.timeout),y.timeout=setTimeout(y.remove,N.lifespan)),y.response;if(!p)throw y.promise}const t={keys:L,equal:N.equal,remove:()=>{const y=GC.indexOf(t);-1!==y&&GC.splice(y,1)},promise:(j=y,"object"==typeof j&&"function"==typeof j.then?y:y(...L)).then((y=>{t.response=y,N.lifespan&&N.lifespan>0&&(t.timeout=setTimeout(t.remove,N.lifespan))})).catch((y=>t.error=y))};var j;if(GC.push(t),!p)throw t.promise}const AC=(y,L,p)=>qC(y,L,!1,p),sC={},cC=y=>{Object.assign(sC,y)};var KC,bC;const nC=y=>"colorSpace"in y||"outputColorSpace"in y,vC=()=>{var y;return null!=(y=sC.ColorManagement)?y:null},eC=y=>y&&y.isOrthographicCamera,ZC="undefined"!=typeof window&&(null!=(KC=window.document)&&KC.createElement||"ReactNative"===(null==(bC=window.navigator)?void 0:bC.product))?h.useLayoutEffect:h.useEffect;class yQ extends h.Component{constructor(...y){super(...y),this.state={error:!1}}componentDidCatch(y){this.props.set(y)}render(){return this.state.error?null:this.props.children}}yQ.getDerivedStateFromError=()=>({error:!0});const LQ="__default",pQ=new Map;function NQ(y){var L;const p="undefined"!=typeof window?null!=(L=window.devicePixelRatio)?L:2:1;return Array.isArray(y)?Math.min(Math.max(y[0],p),y[1]):y}const tQ=y=>{var L;return null==(L=y.__r3f)?void 0:L.root.getState()},jQ={obj:y=>y===Object(y)&&!jQ.arr(y)&&"function"!=typeof y,fun:y=>"function"==typeof y,str:y=>"string"==typeof y,num:y=>"number"==typeof y,boo:y=>"boolean"==typeof y,und:y=>void 0===y,arr:y=>Array.isArray(y),equ(y,L,{arrays:p="shallow",objects:N="reference",strict:t=!0}={}){if(typeof y!=typeof L||!!y!=!!L)return!1;if(jQ.str(y)||jQ.num(y))return y===L;const j=jQ.obj(y);if(j&&"reference"===N)return y===L;const z=jQ.arr(y);if(z&&"reference"===p)return y===L;if((z||j)&&y===L)return!0;let O;for(O in y)if(!(O in L))return!1;if(j&&"shallow"===p&&"shallow"===N){for(O in t?L:y)if(!jQ.equ(y[O],L[O],{strict:t,objects:"reference"}))return!1}else for(O in t?L:y)if(y[O]!==L[O])return!1;if(jQ.und(O)){if(z&&0===y.length&&0===L.length)return!0;if(j&&0===Object.keys(y).length&&0===Object.keys(L).length)return!0;if(y!==L)return!1}return!0}};function zQ(y,L){return y.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...L},y}function OQ(y,L){let p=y;if(L.includes("-")){const N=L.split("-"),t=N.pop();return p=N.reduce(((y,L)=>y[L]),y),{target:p,key:t}}return{target:p,key:L}}const hQ=/-\d+$/;function mQ(y,L,p){if(jQ.str(p)){if(hQ.test(p)){const L=p.replace(hQ,""),{target:N,key:t}=OQ(y,L);Array.isArray(N[t])||(N[t]=[])}const{target:N,key:t}=OQ(y,p);L.__r3f.previousAttach=N[t],N[t]=L}else L.__r3f.previousAttach=p(y,L)}function kQ(y,L,p){var N,t;if(jQ.str(p)){const{target:N,key:t}=OQ(y,p),j=L.__r3f.previousAttach;void 0===j?delete N[t]:N[t]=j}else null==(N=L.__r3f)||null==N.previousAttach||N.previousAttach(y,L);null==(t=L.__r3f)||delete t.previousAttach}function _Q(y,{children:L,key:p,ref:N,...t},{children:j,key:z,ref:O,...h}={},m=!1){var k;const _=null!=(k=null==y?void 0:y.__r3f)?k:{},W=Object.entries(t),g=[];if(m){const y=Object.keys(h);for(let L=0;L<y.length;L++)t.hasOwnProperty(y[L])||W.unshift([y[L],LQ+"remove"])}W.forEach((([L,p])=>{var N;if(null!=(N=y.__r3f)&&N.primitive&&"object"===L)return;if(jQ.equ(p,h[L]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(L))return g.push([L,p,!0,[]]);let j=[];L.includes("-")&&(j=L.split("-")),g.push([L,p,!1,j]);for(const y in t){const p=t[y];y.startsWith(`${L}-`)&&g.push([y,p,!1,y.split("-")])}}));const C={...t};return _.memoizedProps&&_.memoizedProps.args&&(C.args=_.memoizedProps.args),_.memoizedProps&&_.memoizedProps.attach&&(C.attach=_.memoizedProps.attach),{memoized:C,changes:g}}function WQ(y,L){var p,N,t;const j=null!=(p=y.__r3f)?p:{},z=j.root,O=null!=(N=null==z||null==z.getState?void 0:z.getState())?N:{},{memoized:h,changes:m}=(_=L)&&_.memoized&&_.changes?L:_Q(y,L),k=j.eventCount;var _;y.__r3f&&(y.__r3f.memoizedProps=h);for(let L=0;L<m.length;L++){let[p,N,t,z]=m[L];if(nC(y)){const y=3001,L="srgb",t="srgb-linear";"encoding"===p?(p="colorSpace",N=N===y?L:t):"outputEncoding"===p&&(p="outputColorSpace",N=N===y?L:t)}let h=y,k=h[p];if(z.length&&(k=z.reduce(((y,L)=>y[L]),y),!k||!k.set)){const[L,...N]=z.reverse();h=N.reverse().reduce(((y,L)=>y[L]),y),p=L}if(N===LQ+"remove")if(h.constructor){let y=pQ.get(h.constructor);y||(y=new h.constructor,pQ.set(h.constructor,y)),N=y[p]}else N=0;if(t)N?j.handlers[p]=N:delete j.handlers[p],j.eventCount=Object.keys(j.handlers).length;else if(k&&k.set&&(k.copy||k instanceof Ut)){if(Array.isArray(N))k.fromArray?k.fromArray(N):k.set(...N);else if(k.copy&&N&&N.constructor&&k.constructor===N.constructor)k.copy(N);else if(void 0!==N){const y=k instanceof pj;!y&&k.setScalar?k.setScalar(N):k instanceof Ut&&N instanceof Ut?k.mask=N.mask:k.set(N),vC()||O.linear||!y||k.convertSRGBToLinear()}}else if(h[p]=N,h[p]instanceof FN&&h[p].format===by&&h[p].type===ay){const y=h[p];nC(y)&&nC(O.gl)?y.colorSpace=O.gl.outputColorSpace:y.encoding=O.gl.outputEncoding}gQ(y)}if(j.parent&&O.internal&&y.raycast&&k!==j.eventCount){const L=O.internal.interaction.indexOf(y);L>-1&&O.internal.interaction.splice(L,1),j.eventCount&&O.internal.interaction.push(y)}return!(1===m.length&&"onUpdate"===m[0][0])&&m.length&&null!=(t=y.__r3f)&&t.parent&&CQ(y),y}function gQ(y){var L,p;const N=null==(L=y.__r3f)||null==(p=L.root)||null==p.getState?void 0:p.getState();N&&0===N.internal.frames&&N.invalidate()}function CQ(y){null==y.onUpdate||y.onUpdate(y)}function QQ(y,L){y.manual||(eC(y)?(y.left=L.width/-2,y.right=L.width/2,y.top=L.height/2,y.bottom=L.height/-2):y.aspect=L.width/L.height,y.updateProjectionMatrix(),y.updateMatrixWorld())}function TQ(y){return(y.eventObject||y.object).uuid+"/"+y.index+y.instanceId}function iQ(y,L,p,N){const t=p.get(L);t&&(p.delete(L),0===p.size&&(y.delete(N),t.target.releasePointerCapture(N)))}const DQ=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],wQ=y=>!(null==y||!y.render),xQ=h.createContext(null),dQ=(y,L)=>{const p=HC(((p,N)=>{const t=new fN,j=new fN,z=new fN;function O(y=N().camera,L=j,p=N().size){const{width:O,height:h,top:m,left:k}=p,_=O/h;L instanceof fN?z.copy(L):z.set(...L);const W=y.getWorldPosition(t).distanceTo(z);if(eC(y))return{width:O/y.zoom,height:h/y.zoom,top:m,left:k,factor:1,distance:W,aspect:_};{const L=y.fov*Math.PI/180,p=2*Math.tan(L/2)*W,N=p*(O/h);return{width:N,height:p,top:m,left:k,factor:O/N,distance:W,aspect:_}}}let m;const k=y=>p((L=>({performance:{...L.performance,current:y}}))),_=new tN,W={set:p,get:N,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(L=1)=>y(N(),L),advance:(y,p)=>L(y,p,N()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new ig,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const y=N();m&&clearTimeout(m),y.performance.current!==y.performance.min&&k(y.performance.min),m=setTimeout((()=>k(N().performance.max)),y.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:O},setEvents:y=>p((L=>({...L,events:{...L.events,...y}}))),setSize:(y,L,t,z,h)=>{const m=N().camera,k={width:y,height:L,top:z||0,left:h||0,updateStyle:t};p((y=>({size:k,viewport:{...y.viewport,...O(m,j,k)}})))},setDpr:y=>p((L=>{const p=NQ(y);return{viewport:{...L.viewport,dpr:p,initialDpr:L.viewport.initialDpr||p}}})),setFrameloop:(y="always")=>{const L=N().clock;L.stop(),L.elapsedTime=0,"never"!==y&&(L.start(),L.elapsedTime=0),p((()=>({frameloop:y})))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:h.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(y,L,p)=>{const t=N().internal;return t.priority=t.priority+(L>0?1:0),t.subscribers.push({ref:y,priority:L,store:p}),t.subscribers=t.subscribers.sort(((y,L)=>y.priority-L.priority)),()=>{const p=N().internal;null!=p&&p.subscribers&&(p.priority=p.priority-(L>0?1:0),p.subscribers=p.subscribers.filter((L=>L.ref!==y)))}}}};return W})),N=p.getState();let t=N.size,j=N.viewport.dpr,z=N.camera;return p.subscribe((()=>{const{camera:y,size:L,viewport:N,gl:O,set:h}=p.getState();if(L!==t||N.dpr!==j){var m;t=L,j=N.dpr,QQ(y,L),O.setPixelRatio(N.dpr);const p=null!=(m=L.updateStyle)?m:"undefined"!=typeof HTMLCanvasElement&&O.domElement instanceof HTMLCanvasElement;O.setSize(L.width,L.height,p)}y!==z&&(z=y,h((L=>({viewport:{...L.viewport,...L.viewport.getCurrentViewport(y)}}))))})),p.subscribe((L=>y(L))),p};let oQ,UQ,IQ,VQ=new Set,FQ=new Set,uQ=new Set;function SQ(y,L){if(y.size)for(const{callback:p}of y.values())p(L)}function BQ(y,L){switch(y){case"before":return SQ(VQ,L);case"after":return SQ(FQ,L);case"tail":return SQ(uQ,L)}}function RQ(y,L,p){let N=L.clock.getDelta();for("never"===L.frameloop&&"number"==typeof y&&(N=y-L.clock.elapsedTime,L.clock.oldTime=L.clock.elapsedTime,L.clock.elapsedTime=y),UQ=L.internal.subscribers,oQ=0;oQ<UQ.length;oQ++)IQ=UQ[oQ],IQ.ref.current(IQ.store.getState(),N,p);return!L.internal.priority&&L.gl.render&&L.gl.render(L.scene,L.camera),L.internal.frames=Math.max(0,L.internal.frames-1),"always"===L.frameloop?1:L.internal.frames}function YQ(){const y=h.useContext(xQ);if(!y)throw new Error("R3F: Hooks can only be used within the Canvas component!");return y}function EQ(y=y=>y,L){return YQ()(y,L)}function PQ(y,L=0){const p=YQ(),N=p.getState().internal.subscribe,t=function(y){const L=h.useRef(y);return ZC((()=>{L.current=y}),[y]),L}(y);return ZC((()=>N(t,L,p)),[L,N,p]),null}function lQ(y,L){return function(p,...N){const t=new p;return y&&y(t),Promise.all(N.map((y=>new Promise(((p,N)=>t.load(y,(y=>{y.scene&&Object.assign(y,function(y){const L={nodes:{},materials:{}};return y&&y.traverse((y=>{y.name&&(L.nodes[y.name]=y),y.material&&!L.materials[y.material.name]&&(L.materials[y.material.name]=y.material)})),L}(y.scene)),p(y)}),L,(L=>N(new Error(`Could not load ${y}: ${L.message}`)))))))))}}function MQ(y,L,p,N){const t=Array.isArray(L)?L:[L],j=AC(lQ(p,N),[y,...t],{equal:jQ.equ});return Array.isArray(L)?j:j[0]}MQ.preload=function(y,L,p){const N=Array.isArray(L)?L:[L];return((y,L)=>{qC(y,L,!0,void 0)})(lQ(p),[y,...N])},MQ.clear=function(y,L){return(y=>{if(void 0===y||0===y.length)GC.splice(0,GC.length);else{const L=GC.find((L=>$C(y,L.keys,L.equal)));L&&L.remove()}})([y,...Array.isArray(L)?L:[L]])};const fQ=new Map,{invalidate:aQ,advance:HQ}=function(y){let L,p,N,t=!1;function j(z){p=requestAnimationFrame(j,"sandboxIgnore"),t=!0,L=0,BQ("before",z);for(const p of y.values()){var O;N=p.store.getState(),!N.internal.active||!("always"===N.frameloop||N.internal.frames>0)||null!=(O=N.gl.xr)&&O.isPresenting||(L+=RQ(z,N))}if(BQ("after",z),0===L)return BQ("tail",z),t=!1,cancelAnimationFrame(p)}return{loop:j,invalidate:function L(p,N=1){var z;if(!p)return y.forEach((y=>L(y.store.getState())),N);null!=(z=p.gl.xr)&&z.isPresenting||!p.internal.active||"never"===p.frameloop||(p.internal.frames=Math.min(60,p.internal.frames+N),t||(t=!0,requestAnimationFrame(j)))},advance:function(L,p=!0,N,t){if(p&&BQ("before",L),N)RQ(L,N,t);else for(const p of y.values())RQ(L,p.store.getState());p&&BQ("after",L)}}}(fQ),{reconciler:XQ,applyProps:JQ}=function(y,L){function p(y,{args:L=[],attach:p,...N},t){let j,z=`${y[0].toUpperCase()}${y.slice(1)}`;if("primitive"===y){if(void 0===N.object)throw new Error("R3F: Primitives without 'object' are invalid!");j=zQ(N.object,{type:y,root:t,attach:p,primitive:!0})}else{const N=sC[z];if(!N)throw new Error(`R3F: ${z} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(L))throw new Error("R3F: The args prop must be an array!");j=zQ(new N(...L),{type:y,root:t,attach:p,memoizedProps:{args:L}})}return void 0===j.__r3f.attach&&(j instanceof Rj?j.__r3f.attach="geometry":j instanceof vt&&(j.__r3f.attach="material")),"inject"!==z&&WQ(j,N),j}function N(y,L){let p=!1;var N,t;L&&(null!=(N=L.__r3f)&&N.attach?mQ(y,L,L.__r3f.attach):L.isObject3D&&y.isObject3D&&(y.add(L),p=!0),p||null==(t=y.__r3f)||t.objects.push(L),L.__r3f||zQ(L,{}),L.__r3f.parent=y,CQ(L),gQ(L))}function t(y,L,p){let N=!1;if(L){var t,j;if(null!=(t=L.__r3f)&&t.attach)mQ(y,L,L.__r3f.attach);else if(L.isObject3D&&y.isObject3D){L.parent=y,L.dispatchEvent({type:"added"});const t=y.children.filter((y=>y!==L)),j=t.indexOf(p);y.children=[...t.slice(0,j),L,...t.slice(j)],N=!0}N||null==(j=y.__r3f)||j.objects.push(L),L.__r3f||zQ(L,{}),L.__r3f.parent=y,CQ(L),gQ(L)}}function j(y,L,p=!1){y&&[...y].forEach((y=>z(L,y,p)))}function z(y,L,p){if(L){var N,t,z;if(L.__r3f&&(L.__r3f.parent=null),null!=(N=y.__r3f)&&N.objects&&(y.__r3f.objects=y.__r3f.objects.filter((y=>y!==L))),null!=(t=L.__r3f)&&t.attach)kQ(y,L,L.__r3f.attach);else if(L.isObject3D&&y.isObject3D){var O;y.remove(L),null!=(O=L.__r3f)&&O.root&&function(y,L){const{internal:p}=y.getState();p.interaction=p.interaction.filter((y=>y!==L)),p.initialHits=p.initialHits.filter((y=>y!==L)),p.hovered.forEach(((y,N)=>{y.eventObject!==L&&y.object!==L||p.hovered.delete(N)})),p.capturedMap.forEach(((y,N)=>{iQ(p.capturedMap,L,y,N)}))}(L.__r3f.root,L)}const m=null==(z=L.__r3f)?void 0:z.primitive,k=void 0===p?null!==L.dispose&&!m:p;var h;m||(j(null==(h=L.__r3f)?void 0:h.objects,L,k),j(L.children,L,k)),delete L.__r3f,k&&L.dispose&&"Scene"!==L.type&&rC.unstable_scheduleCallback(rC.unstable_IdlePriority,(()=>{try{L.dispose()}catch(y){}})),gQ(y)}}const O=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:JC()({createInstance:p,removeChild:z,appendChild:N,appendInitialChild:N,insertBefore:t,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(y,L)=>{if(!L)return;const p=y.getState().scene;p.__r3f&&(p.__r3f.root=y,N(p,L))},removeChildFromContainer:(y,L)=>{L&&z(y.getState().scene,L)},insertInContainerBefore:(y,L,p)=>{if(!L||!p)return;const N=y.getState().scene;N.__r3f&&t(N,L,p)},getRootHostContext:()=>null,getChildHostContext:y=>y,finalizeInitialChildren(y){var L;const p=null!=(L=null==y?void 0:y.__r3f)?L:{};return Boolean(p.handlers)},prepareUpdate(y,L,p,N){var t;if((null!=(t=null==y?void 0:y.__r3f)?t:{}).primitive&&N.object&&N.object!==y)return[!0];{const{args:L=[],children:t,...j}=N,{args:z=[],children:O,...h}=p;if(!Array.isArray(L))throw new Error("R3F: the args prop must be an array!");if(L.some(((y,L)=>y!==z[L])))return[!0];const m=_Q(y,j,h,!0);return m.changes.length?[!1,m]:null}},commitUpdate(y,[L,t],j,O,h,m){L?function(y,L,t,j){var O;const h=null==(O=y.__r3f)?void 0:O.parent;if(!h)return;const m=p(L,t,y.__r3f.root);if(y.children){for(const L of y.children)L.__r3f&&N(m,L);y.children=y.children.filter((y=>!y.__r3f))}y.__r3f.objects.forEach((y=>N(m,y))),y.__r3f.objects=[],y.__r3f.autoRemovedBeforeAppend||z(h,y),m.parent&&(m.__r3f.autoRemovedBeforeAppend=!0),N(h,m),m.raycast&&m.__r3f.eventCount&&m.__r3f.root.getState().internal.interaction.push(m),[j,j.alternate].forEach((y=>{null!==y&&(y.stateNode=m,y.ref&&("function"==typeof y.ref?y.ref(m):y.ref.current=m))}))}(y,j,h,m):WQ(y,t)},commitMount(y,L,p,N){var t;const j=null!=(t=y.__r3f)?t:{};y.raycast&&j.handlers&&j.eventCount&&y.__r3f.root.getState().internal.interaction.push(y)},getPublicInstance:y=>y,prepareForCommit:()=>null,preparePortalMount:y=>zQ(y.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(y){var L;const{attach:p,parent:N}=null!=(L=y.__r3f)?L:{};p&&N&&kQ(N,y,p),y.isObject3D&&(y.visible=!1),gQ(y)},unhideInstance(y,L){var p;const{attach:N,parent:t}=null!=(p=y.__r3f)?p:{};N&&t&&mQ(t,y,N),(y.isObject3D&&null==L.visible||L.visible)&&(y.visible=!0),gQ(y)},createTextInstance:O,hideTextInstance:O,unhideTextInstance:O,getCurrentEventPriority:()=>L?L():fC.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!=typeof performance&&jQ.fun(performance.now)?performance.now:jQ.fun(Date.now)?Date.now:()=>0,scheduleTimeout:jQ.fun(setTimeout)?setTimeout:void 0,cancelTimeout:jQ.fun(clearTimeout)?clearTimeout:void 0}),applyProps:WQ}}(0,(function(){var y;const L="undefined"!=typeof self&&self||"undefined"!=typeof window&&window;if(!L)return fC.DefaultEventPriority;switch(null==(y=L.event)?void 0:y.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return fC.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return fC.ContinuousEventPriority;default:return fC.DefaultEventPriority}})),rQ={objects:"shallow",strict:!1},GQ=(y,L)=>{const p="function"==typeof y?y(L):y;return wQ(p)?p:new Lm({powerPreference:"high-performance",canvas:L,antialias:!0,alpha:!0,...y})};function $Q(y){const L=fQ.get(y),p=null==L?void 0:L.fiber,N=null==L?void 0:L.store;L&&console.warn("R3F.createRoot should only be called once!");const t="function"==typeof reportError?reportError:console.error,j=N||dQ(aQ,HQ),z=p||XQ.createContainer(j,fC.ConcurrentRoot,null,!1,null,"",t,null);let O;L||fQ.set(y,{fiber:z,store:j});let m,k=!1;return{configure(L={}){let{gl:p,size:N,scene:t,events:z,onCreated:h,shadows:_=!1,linear:W=!1,flat:g=!1,legacy:C=!1,orthographic:Q=!1,frameloop:T="always",dpr:i=[1,2],performance:D,raycaster:w,camera:x,onPointerMissed:d}=L,o=j.getState(),U=o.gl;o.gl||o.set({gl:U=GQ(p,y)});let I=o.raycaster;I||o.set({raycaster:I=new Kg});const{params:B,...R}=w||{};if(jQ.equ(R,I,rQ)||JQ(I,{...R}),jQ.equ(B,I.params,rQ)||JQ(I,{params:{...I.params,...B}}),!o.camera||o.camera===m&&!jQ.equ(m,x,rQ)){m=x;const y=x instanceof tz,L=y?x:Q?new Yz(0,0,0,0,.1,1e3):new jz(75,0,.1,1e3);y||(L.position.z=5,x&&JQ(L,x),o.camera||null!=x&&x.rotation||L.lookAt(0,0,0)),o.set({camera:L})}if(!o.scene){let y;t instanceof jm?y=t:(y=new jm,t&&JQ(y,t)),o.set({scene:zQ(y)})}if(!o.xr){var Y;const y=(y,L)=>{const p=j.getState();"never"!==p.frameloop&&HQ(y,!0,p,L)},L=()=>{const L=j.getState();L.gl.xr.enabled=L.gl.xr.isPresenting,L.gl.xr.setAnimationLoop(L.gl.xr.isPresenting?y:null),L.gl.xr.isPresenting||aQ(L)},p={connect(){const y=j.getState().gl;y.xr.addEventListener("sessionstart",L),y.xr.addEventListener("sessionend",L)},disconnect(){const y=j.getState().gl;y.xr.removeEventListener("sessionstart",L),y.xr.removeEventListener("sessionend",L)}};"function"==typeof(null==(Y=U.xr)?void 0:Y.addEventListener)&&p.connect(),o.set({xr:p})}if(U.shadowMap){const y=U.shadowMap.enabled,L=U.shadowMap.type;if(U.shadowMap.enabled=!!_,jQ.boo(_))U.shadowMap.type=u;else if(jQ.str(_)){var E;const y={basic:V,percentage:F,soft:u,variance:S};U.shadowMap.type=null!=(E=y[_])?E:u}else jQ.obj(_)&&Object.assign(U.shadowMap,_);y===U.shadowMap.enabled&&L===U.shadowMap.type||(U.shadowMap.needsUpdate=!0)}const P=vC();P&&("enabled"in P?P.enabled=!C:"legacyMode"in P&&(P.legacyMode=C)),JQ(U,{outputEncoding:W?3e3:3001,toneMapping:g?Wy:Ty}),o.legacy!==C&&o.set((()=>({legacy:C}))),o.linear!==W&&o.set((()=>({linear:W}))),o.flat!==g&&o.set((()=>({flat:g}))),!p||jQ.fun(p)||wQ(p)||jQ.equ(p,U,rQ)||JQ(U,p),z&&!o.events.handlers&&o.set({events:z(j)});const l=function(y,L){if(L)return L;if("undefined"!=typeof HTMLCanvasElement&&y instanceof HTMLCanvasElement&&y.parentElement){const{width:L,height:p,top:N,left:t}=y.parentElement.getBoundingClientRect();return{width:L,height:p,top:N,left:t}}return"undefined"!=typeof OffscreenCanvas&&y instanceof OffscreenCanvas?{width:y.width,height:y.height,top:0,left:0}:{width:0,height:0,top:0,left:0}}(y,N);return jQ.equ(l,o.size,rQ)||o.setSize(l.width,l.height,l.updateStyle,l.top,l.left),i&&o.viewport.dpr!==NQ(i)&&o.setDpr(i),o.frameloop!==T&&o.setFrameloop(T),o.onPointerMissed||o.set({onPointerMissed:d}),D&&!jQ.equ(D,o.performance,rQ)&&o.set((y=>({performance:{...y.performance,...D}}))),O=h,k=!0,this},render(L){return k||this.configure(),XQ.updateContainer(h.createElement(qQ,{store:j,children:L,onCreated:O,rootElement:y}),z,null,(()=>{})),j},unmount(){(function(y,L){const p=fQ.get(y),N=null==p?void 0:p.fiber;if(N){const t=null==p?void 0:p.store.getState();t&&(t.internal.active=!1),XQ.updateContainer(null,N,null,(()=>{t&&setTimeout((()=>{try{var p,N,j,z;null==t.events.disconnect||t.events.disconnect(),null==(p=t.gl)||null==(N=p.renderLists)||null==N.dispose||N.dispose(),null==(j=t.gl)||null==j.forceContextLoss||j.forceContextLoss(),null!=(z=t.gl)&&z.xr&&t.xr.disconnect(),function(y){y.dispose&&"Scene"!==y.type&&y.dispose();for(const L in y)null==L.dispose||L.dispose(),delete y[L]}(t),fQ.delete(y),L&&L(y)}catch(y){}}),500)}))}})(y)}}}function qQ({store:y,children:L,onCreated:p,rootElement:N}){return ZC((()=>{const L=y.getState();L.set((y=>({internal:{...y.internal,active:!0}}))),p&&p(L),y.getState().events.connected||null==L.events.connect||L.events.connect(N)}),[]),h.createElement(xQ.Provider,{value:y},L)}function AQ(y,L,p){return h.createElement(sQ,{key:L.uuid,children:y,container:L,state:p})}function sQ({state:y={},children:L,container:p}){const{events:N,size:t,...j}=y,z=YQ(),[O]=h.useState((()=>new Kg)),[m]=h.useState((()=>new tN)),k=h.useCallback(((y,L)=>{const h={...y};let k;if(Object.keys(y).forEach((p=>{(DQ.includes(p)||y[p]!==L[p]&&L[p])&&delete h[p]})),L&&t){const p=L.camera;k=y.viewport.getCurrentViewport(p,new fN,t),p!==y.camera&&QQ(p,t)}return{...h,scene:p,raycaster:O,pointer:m,mouse:m,previousRoot:z,events:{...y.events,...null==L?void 0:L.events,...N},size:{...y.size,...t},viewport:{...y.viewport,...k},...j}}),[y]),[_]=h.useState((()=>{const y=z.getState(),L=HC(((L,h)=>({...y,scene:p,raycaster:O,pointer:m,mouse:m,previousRoot:z,events:{...y.events,...N},size:{...y.size,...t},...j,set:L,get:h,setEvents:y=>L((L=>({...L,events:{...L.events,...y}})))})));return L}));return h.useEffect((()=>{const y=z.subscribe((y=>_.setState((L=>k(y,L)))));return()=>{y(),_.destroy()}}),[]),h.useEffect((()=>{_.setState((y=>k(z.getState(),y)))}),[k]),h.createElement(h.Fragment,null,XQ.createPortal(h.createElement(xQ.Provider,{value:_},L),_,null))}XQ.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:h.version}),h.unstable_act;const cQ=p.p+"images/curtains.fa8134e1.webp",KQ=p.p+"images/bonusoverl.bf0954b4.webp",bQ=p.p+"images/doubletext.110c013b.webp",nQ=p.p+"images/lampimage.b9c328ad.webp",vQ=p.p+"images/logo.8a938e3e.webp",eQ=p.p+"images/multiplier.84ef0afc.webp",ZQ=p.p+"images/multiplier.90b5acf1.webp",yT=p.p+"images/tokensymbo.5a2c202d.webp",LT=p.p+"images/topupshine.8b5985ad.webp",pT=p.p+"images/drum.cd798225.webp",NT=p.p+"images/firework.820415da.webp",tT=p.p+"images/glass.0af5d37d.webp",jT=p.p+"images/glow.9b49c5f2.webp",zT=p.p+"images/mainslotsy.dff60b6d.webp",OT=p.p+"images/multiplier.b4d883b0.webp",hT=p.p+"images/multiplier.e51e6835.webp",mT=p.p+"images/s0idle.61aca0a7.webp",kT=p.p+"images/sidle.093d5bef.webp",_T=p.p+"images/slot.af401fb0.webp",WT=p.p+"images/slotgreenb.9dda439c.webp",gT=p.p+"images/topupparts.a25e0e20.webp",CT=p.p+"images/topupslot.55cfb937.webp",QT=p.p+"images/wwin.50848c11.webp",TT=p.p+"images/background.9e3b7587.webp",iT=p.p+"images/firework.454dd414.webp",DT=p.p+"images/frame.4e6426f3.webp",wT=p.p+"images/mask.3e4a3bf5.webp",xT=p.p+"images/p.6c1e59e9.webp",dT=p.p+"images/frame.65151db7.webp",oT=p.p+"images/framemutli.eb0b324d.webp",UT=p.p+"images/glow.1a54e3c3.webp",IT=p.p+"images/goldenglow.5ff24727.webp",VT=p.p+"images/stars.46fe1da7.webp",FT=p.p+"images/stars.7c4bf903.webp",uT=p.p+"images/sweep.3ae992e1.webp",ST=p.p+"images/top.a09d6a0e.webp",BT=p.p+"images/topcrazy.0d68d359.webp",RT=p.p+"images/drum.050555a9.webp",YT=p.p+"images/glass.f5cf8ecd.webp",ET=p.p+"images/glow.d838bcf3.webp",PT=p.p+"images/slot.b5576c89.webp",lT=p.p+"images/slotgreenb.702a2cea.webp";var MT=p(890179);const fT=p.p+"images/s0idle.5c6e569e.webp";var aT=p(424959);const HT=p.p+"images/topupparts.050bf611.webp",XT=p.p+"images/wwin.de55561e.webp";var JT=p(362709);const rT=p.p+"images/topupslot.2f40ff4d.webp";var GT=p(50397),$T=p(60841);const qT=p.p+"images/blast.f5c7f606.webp",AT=p.p+"images/sparklesfa.bdc05a09.webp";var sT;(function(y){y["BigParticles"]="BigParticles",y["Blast"]="Blast",y["BonusOverlay"]="BonusOverlay",y["CageStar"]="CageStar",y["Curtains"]="Curtains",y["DoubleText"]="DoubleText",y["InfiniteTimer"]="InfiniteTimer",y["LampImage"]="LampImage",y["Logo"]="Logo",y["MainDrum"]="Main.Drum",y["MainGlass"]="Main.Glass",y["MainGlow"]="Main.Glow",y["MainSlot"]="Main.Slot",y["MainSlotSymbols"]="MainSymbolsSpriteSheet",y["MediumParticles"]="MediumParticles",y["MultiplierSymbolsItalic"]="MultiplierSymbolsItalic",y["MultiplierSymbolsRegular"]="MultiplierSymbolsRegular",y["ScattersBackground"]="ScattersBackground",y["ScattersFirework"]="ScattersFirework",y["ScattersFrame"]="ScattersFrame",y["ScattersGoldGlow"]="ScattersGoldGlow",y["ScattersMask"]="ScattersMask",y["ScattersP"]="ScattersP",y["ScattersParkedFrame"]="ScattersParkedFrame",y["ScattersParkedFrameMutliplier"]="ScattersParkedFrameMutliplier",y["ScattersParkedGlow"]="ScattersParkedGlow",y["ScattersParkedStars"]="ScattersParkedStars",y["ScattersStars"]="ScattersStars",y["ScattersTop"]="ScattersTop",y["ScattersTopCrazy"]="ScattersTopCrazy",y["SlotGreenBar"]="SlotGreenBar",y["SparklesFall"]="SparklesFall",y["Sweep"]="Sweep",y["SymbolsS0Idle"]="S0Idle",y["SymbolsSIdle"]="SIdle",y["SymbolsWWin"]="wildWin",y["TokenSymbol"]="TokenSymbol",y["TopUpParts"]="TopUp.Parts",y["TopUpShine"]="TopUpShine",y["TopUpSlot"]="TopUp.Slot"})(sT||(sT={}));const cT={[sT.BigParticles]:{texture:GT},[sT.Blast]:{texture:qT},[sT.BonusOverlay]:{texture:KQ},[sT.CageStar]:{texture:"data:image/webp;base64,UklGRuoBAABXRUJQVlA4WAoAAAAQAAAAJwAAJwAAQUxQSHMBAAANkGTbtmona8WDu7v2vy/UGNTcHRLgv1V4L+9/tBwRE8B/ovQ7COREv8TkYKmVydhRTLcSAWzCCINWgQCGgFkm0TJmawAm0xHj5mGCgIwzAjKbI7SWoaRZjANivmAKWBJGQCwrIJhISWRks8zWElDX2Pm5F2RANgcTQVjf2lm/8oDFACWUNocEcX33+Ond4dXbr4sFOAASB1prgLSxcfLi2WMPd5682SsyYA6SAR67eXLx7fvekTevvw1ARqz006uT99fY2t37vGjEkilBwPDp05Gje7s3t55/CchmGUDAsP/u7fbm+49fzt/dViycMxmj729f+Gj35NVT7AqILRFStPj66svzkydOH9mUCZyXFEY/fj4+4uHtjTVBlpSgJIifz8/p2hoI4qyQgCALQJEQnAMBJBEHmgIyOwMoA1KmZekMksEkAFsDcBkCCIhMxJCVNnIwdBAQcBUEZEAyqa0EiIxpkfiFQY4g+dUBBv2ycfw3AgBWUDggUAAAAPADAJ0BKigAKAA+USCLRCOiIRcUzDgFBLSEOAAAaGb6BLdoQ0t9rAAA/mCT//aY//7SF//9oTwd///UGaY7U292KemhPSu///UGJvyhYAAA"},[sT.Curtains]:{texture:cQ,preload:!0},[sT.DoubleText]:{texture:bQ,preload:!0},[sT.InfiniteTimer]:{texture:JT,preload:!0},[sT.LampImage]:{texture:nQ},[sT.Logo]:{texture:vQ},[sT.MainDrum]:{texture:RT,lowResTexture:pT,preload:!0},[sT.MainGlass]:{texture:YT,lowResTexture:tT,preload:!0},[sT.MainGlow]:{texture:ET,lowResTexture:jT,preload:!0},[sT.MainSlotSymbols]:{texture:MT,lowResTexture:zT,preload:!0},[sT.MainSlot]:{texture:PT,lowResTexture:_T,preload:!0},[sT.MediumParticles]:{texture:$T},[sT.MultiplierSymbolsItalic]:{texture:eQ,lowResTexture:OT,preload:!0},[sT.MultiplierSymbolsRegular]:{texture:ZQ,lowResTexture:hT,preload:!0},[sT.ScattersBackground]:{texture:TT,preload:!0},[sT.ScattersFirework]:{texture:iT,lowResTexture:NT,preload:!0},[sT.ScattersFrame]:{texture:DT,preload:!0},[sT.ScattersGoldGlow]:{texture:IT},[sT.ScattersMask]:{texture:wT,preload:!0},[sT.ScattersP]:{texture:xT,preload:!0},[sT.ScattersParkedFrameMutliplier]:{texture:oT,preload:!0},[sT.ScattersParkedFrame]:{texture:dT,preload:!0},[sT.ScattersParkedGlow]:{texture:UT},[sT.ScattersParkedStars]:{texture:VT},[sT.ScattersStars]:{texture:FT},[sT.ScattersTopCrazy]:{texture:BT,preload:!0},[sT.ScattersTop]:{texture:ST,preload:!0},[sT.SlotGreenBar]:{texture:lT,lowResTexture:WT,preload:!0},[sT.SparklesFall]:{texture:AT},[sT.Sweep]:{texture:uT},[sT.SymbolsS0Idle]:{texture:fT,lowResTexture:mT,preload:!0},[sT.SymbolsSIdle]:{texture:aT,lowResTexture:kT,preload:!0},[sT.SymbolsWWin]:{texture:XT,lowResTexture:QT,preload:!0},[sT.TokenSymbol]:{texture:yT,preload:!0},[sT.TopUpParts]:{texture:HT,lowResTexture:gT,preload:!0},[sT.TopUpShine]:{texture:LT,preload:!0},[sT.TopUpSlot]:{texture:rT,lowResTexture:CT,preload:!0}};var KT;(function(y){y["LongHorizontal"]="xh",y["FlyingWithX"]="xf",y["WithX"]="x",y["WithXExtraOffset"]="xo",y["WithXSlotSymbol"]="xs",y["WithShine"]="xt"})(KT||(KT={}));const bT={[KT.LongHorizontal]:70,[KT.FlyingWithX]:16,[KT.WithX]:5,[KT.WithXExtraOffset]:3,[KT.WithXSlotSymbol]:5,[KT.WithShine]:16},nT=new PW;function vT(y,L){const p=L.cache[y];h.useLayoutEffect((()=>{p&&(N.dispose(),t(p))}),[p]);const[N,t]=h.useState(new FN);return N}dW.enabled=!0;const eT=({children:y,onGame3DLoaded:L,gameTextures:p})=>{const N=function(y){const[L,p]=h.useState(null),N=EQ((y=>y.gl));return h.useLayoutEffect((()=>{const L=Object.entries(cT).filter((y=>y[1].preload)),t=Object.entries(cT).filter((y=>!y[1].preload||y[1].lowResTexture)),j=L.map((([y,L])=>new Promise((p=>{var N;nT.load(null!==(N=L.lowResTexture)&&void 0!==N?N:L.texture,(L=>{p([y,L])}))}))));Promise.all(j).then((L=>{L.forEach((([L,p])=>{N.initTexture(p),p.needsUpdate=!0,y.addTexture(L,p)}));const j=L.map((y=>y[1]));p(j);for(const[L,p]of t)nT.load(p.texture,(p=>{N.initTexture(p),p.needsUpdate=!0,y.addTexture(L,p)}))}))}),[p,y,N]),L}(p);return h.useLayoutEffect((()=>(null!==N&&L.resolve(),()=>{null!==N&&N.forEach((y=>y.dispose()))})),[N]),j.jsx(j.Fragment,{children:y})};var ZT=p(964180);p(320680),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,function(y){try{return Object.defineProperties(y,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(L){return y}}(h.createContext(null)),h.Component;const{ReactCurrentOwner:yi,ReactCurrentDispatcher:Li}=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pi={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Ni(y){const{handlePointer:L}=function(y){function L(y){return y.filter((y=>["Move","Over","Enter","Out","Leave"].some((L=>{var p;return null==(p=y.__r3f)?void 0:p.handlers["onPointer"+L]}))))}function p(L){const{internal:p}=y.getState();for(const y of p.hovered.values())if(!L.length||!L.find((L=>L.object===y.object&&L.index===y.index&&L.instanceId===y.instanceId))){const N=y.eventObject.__r3f,t=null==N?void 0:N.handlers;if(p.hovered.delete(TQ(y)),null!=N&&N.eventCount){const p={...y,intersections:L};null==t.onPointerOut||t.onPointerOut(p),null==t.onPointerLeave||t.onPointerLeave(p)}}}function N(y,L){for(let p=0;p<L.length;p++){const N=L[p].__r3f;null==N||null==N.handlers.onPointerMissed||N.handlers.onPointerMissed(y)}}return{handlePointer:function(t){switch(t){case"onPointerLeave":case"onPointerCancel":return()=>p([]);case"onLostPointerCapture":return L=>{const{internal:N}=y.getState();"pointerId"in L&&N.capturedMap.has(L.pointerId)&&requestAnimationFrame((()=>{N.capturedMap.has(L.pointerId)&&(N.capturedMap.delete(L.pointerId),p([]))}))}}return function(j){const{onPointerMissed:z,internal:O}=y.getState();O.lastEvent.current=j;const h="onPointerMove"===t,m="onClick"===t||"onContextMenu"===t||"onDoubleClick"===t,k=function(L,p){const N=y.getState(),t=new Set,j=[],z=p?p(N.internal.interaction):N.internal.interaction;for(let y=0;y<z.length;y++){const L=tQ(z[y]);L&&(L.raycaster.camera=void 0)}N.previousRoot||null==N.events.compute||N.events.compute(L,N);let O=z.flatMap((function(y){const p=tQ(y);return p&&p.events.enabled&&null!==p.raycaster.camera?(void 0===p.raycaster.camera&&(null==p.events.compute||p.events.compute(L,p,null==(N=p.previousRoot)?void 0:N.getState()),void 0===p.raycaster.camera&&(p.raycaster.camera=null)),p.raycaster.camera?p.raycaster.intersectObject(y,!0):[]):[];var N})).sort(((y,L)=>{const p=tQ(y.object),N=tQ(L.object);return p&&N&&N.events.priority-p.events.priority||y.distance-L.distance})).filter((y=>{const L=TQ(y);return!t.has(L)&&(t.add(L),!0)}));N.events.filter&&(O=N.events.filter(O,N));for(const y of O){let L=y.object;for(;L;){var h;null!=(h=L.__r3f)&&h.eventCount&&j.push({...y,eventObject:L}),L=L.parent}}if("pointerId"in L&&N.internal.capturedMap.has(L.pointerId))for(let y of N.internal.capturedMap.get(L.pointerId).values())t.has(TQ(y.intersection))||j.push(y.intersection);return j}(j,h?L:void 0),_=m?function(L){const{internal:p}=y.getState(),N=L.offsetX-p.initialClick[0],t=L.offsetY-p.initialClick[1];return Math.round(Math.sqrt(N*N+t*t))}(j):0;"onPointerDown"===t&&(O.initialClick=[j.offsetX,j.offsetY],O.initialHits=k.map((y=>y.eventObject))),m&&!k.length&&_<=2&&(N(j,O.interaction),z&&z(j)),h&&p(k),function(L,N,t,j){const z=y.getState();if(L.length){const y={stopped:!1};for(const O of L){const h=tQ(O.object)||z,{raycaster:m,pointer:k,camera:_,internal:W}=h,g=new fN(k.x,k.y,0).unproject(_),C=y=>{var L,p;return null!=(L=null==(p=W.capturedMap.get(y))?void 0:p.has(O.eventObject))&&L},Q=y=>{const L={intersection:O,target:N.target};W.capturedMap.has(y)?W.capturedMap.get(y).set(O.eventObject,L):W.capturedMap.set(y,new Map([[O.eventObject,L]])),N.target.setPointerCapture(y)},T=y=>{const L=W.capturedMap.get(y);L&&iQ(W.capturedMap,O.eventObject,L,y)};let i={};for(let y in N){let L=N[y];"function"!=typeof L&&(i[y]=L)}let D={...O,...i,pointer:k,intersections:L,stopped:y.stopped,delta:t,unprojectedPoint:g,ray:m.ray,camera:_,stopPropagation(){const t="pointerId"in N&&W.capturedMap.get(N.pointerId);(!t||t.has(O.eventObject))&&(D.stopped=y.stopped=!0,W.hovered.size&&Array.from(W.hovered.values()).find((y=>y.eventObject===O.eventObject)))&&p([...L.slice(0,L.indexOf(O)),O])},target:{hasPointerCapture:C,setPointerCapture:Q,releasePointerCapture:T},currentTarget:{hasPointerCapture:C,setPointerCapture:Q,releasePointerCapture:T},nativeEvent:N};if(j(D),!0===y.stopped)break}}}(k,j,_,(function(y){const L=y.eventObject,p=L.__r3f,z=null==p?void 0:p.handlers;if(null!=p&&p.eventCount)if(h){if(z.onPointerOver||z.onPointerEnter||z.onPointerOut||z.onPointerLeave){const L=TQ(y),p=O.hovered.get(L);p?p.stopped&&y.stopPropagation():(O.hovered.set(L,y),null==z.onPointerOver||z.onPointerOver(y),null==z.onPointerEnter||z.onPointerEnter(y))}null==z.onPointerMove||z.onPointerMove(y)}else{const p=z[t];p?m&&!O.initialHits.includes(L)||(N(j,O.interaction.filter((y=>!O.initialHits.includes(y)))),p(y)):m&&O.initialHits.includes(L)&&N(j,O.interaction.filter((y=>!O.initialHits.includes(y))))}}))}}}}(y);return{priority:1,enabled:!0,compute(y,L,p){L.pointer.set(y.offsetX/L.size.width*2-1,-y.offsetY/L.size.height*2+1),L.raycaster.setFromCamera(L.pointer,L.camera)},connected:void 0,handlers:Object.keys(pi).reduce(((y,p)=>({...y,[p]:L(p)})),{}),update:()=>{var L;const{events:p,internal:N}=y.getState();null!=(L=N.lastEvent)&&L.current&&p.handlers&&p.handlers.onPointerMove(N.lastEvent.current)},connect:L=>{var p;const{set:N,events:t}=y.getState();null==t.disconnect||t.disconnect(),N((y=>({events:{...y.events,connected:L}}))),Object.entries(null!=(p=t.handlers)?p:[]).forEach((([y,p])=>{const[N,t]=pi[y];L.addEventListener(N,p,{passive:t})}))},disconnect:()=>{const{set:L,events:p}=y.getState();var N;p.connected&&(Object.entries(null!=(N=p.handlers)?N:[]).forEach((([y,L])=>{if(p&&p.connected instanceof HTMLElement){const[N]=pi[y];p.connected.removeEventListener(N,L)}})),L((y=>({events:{...y.events,connected:void 0}}))))}}}var ti=0,ji=1,zi=2,Oi=3,hi=class extends Kj{constructor(y,L,p=1){super(void 0,L),this.type="BlurredLine",this._resolution=p,this.lineWidth=1,this.blurWidth=1,this.blur=!0,this.color=new pj,this.opacity=1,this.upVector=new fN(0,0,1),this.closed=!1,this.angleBisection=!1,this.lineShapeVertices=[[]],this.lineVertices=[],this.curve=y;for(let y=0;y<this._resolution+1;y++)this.lineVertices[y]=new fN;this.lineShapeVertices=[];for(let y=0;y<this._resolution+1;y++){var N=[];N[ti]=new fN,N[ji]=new fN,N[zi]=new fN,N[Oi]=new fN,this.lineShapeVertices[y]=N}this.createGeometry()}createGeometry(){var y=(this.lineShapeVertices.length-1)*(this.blur?6:2);this.geometry=new Rj,this.positions=new Float32Array(3*y*3),this.vertexColors=new Float32Array(3*y*4);var L=new Wj(this.positions,3),p=new Wj(this.vertexColors,4);this.geometry.setAttribute("position",L),this.geometry.setAttribute("color",p),this.geometry.computeBoundingSphere()}updateGeometry(y=!1){if(null!==this.curve&&(this.lineVertices=this.curve.getPoints(this._resolution),this.lineVertices.length>0&&this.lineVertices[0]instanceof tN))for(let y=0;y<this.lineShapeVertices.length;y++){var L=this.lineVertices[y];this.lineVertices[y]=new fN(L.x,L.y,0)}if(null!==this.lineVertices){this.geometry.attributes.position.needsUpdate=!0,this.updateLineShapeVertices();var p=this.lineShapeVertices;for(let L=0;L<this.lineShapeVertices.length-1;L++){var N=3*L*3*(this.blur?6:2);y||(mi(this.positions,N,p[L][ti]),mi(this.positions,N+3,p[L+1][ti]),mi(this.positions,N+6,p[L][ji]),mi(this.positions,N+9,p[L][ji]),mi(this.positions,N+12,p[L+1][ti]),mi(this.positions,N+15,p[L+1][ji]),this.blur&&(mi(this.positions,N+18,p[L][ti]),mi(this.positions,N+21,p[L][zi]),mi(this.positions,N+24,p[L+1][zi]),mi(this.positions,N+27,p[L][ti]),mi(this.positions,N+30,p[L+1][zi]),mi(this.positions,N+33,p[L+1][ti]),mi(this.positions,N+36,p[L][ji]),mi(this.positions,N+39,p[L+1][ji]),mi(this.positions,N+42,p[L][Oi]),mi(this.positions,N+45,p[L][Oi]),mi(this.positions,N+48,p[L+1][ji]),mi(this.positions,N+51,p[L+1][Oi])))}this.updateColors()}}updateColors(){this.geometry.attributes.color.needsUpdate=!0;for(let N=0;N<this.lineShapeVertices.length-1;N++){var y=3*N*4*(this.blur?6:2);let t=N/(this._resolution-1);var L=this._getColor(t),p=this._getOpacity(t);ki(this.vertexColors,y,L,p),ki(this.vertexColors,y+4,L,p),ki(this.vertexColors,y+8,L,p),ki(this.vertexColors,y+12,L,p),ki(this.vertexColors,y+16,L,p),ki(this.vertexColors,y+20,L,p),this.blur&&(ki(this.vertexColors,y+24,L,p),ki(this.vertexColors,y+28,L,0),ki(this.vertexColors,y+32,L,0),ki(this.vertexColors,y+36,L,p),ki(this.vertexColors,y+40,L,0),ki(this.vertexColors,y+44,L,p),ki(this.vertexColors,y+48,L,p),ki(this.vertexColors,y+52,L,p),ki(this.vertexColors,y+56,L,0),ki(this.vertexColors,y+60,L,0),ki(this.vertexColors,y+64,L,p),ki(this.vertexColors,y+68,L,0))}}getLength(){let y=0;for(let L=0;L<this.lineVertices.length-1;L++)y+=this.lineVertices[L].distanceTo(this.lineVertices[L+1]);return y}updateLineShapeVertices(){let y,L;var p=new fN,N=new fN,t=new fN,j=new fN,z=new fN,O=this.lineVertices;for(let h=0;h<this._resolution;h++)if(this.lineShapeVertices[h][ti].copy(O[h]),this.lineShapeVertices[h][ji].copy(O[h]),this.blur&&(this.lineShapeVertices[h][zi].copy(O[h]),this.lineShapeVertices[h][Oi].copy(O[h])),y=0,h>0?(N.copy(O[h-1]),N.sub(O[h]),y=N.length()):this.closed?(N.copy(O[O.length-1]),N.sub(O[h]),y=N.length()):N.copy(0,0,0),y>0&&N.multiplyScalar(1/y),p.copy(O[h+1]),p.sub(O[h]),L=p.length(),L>0&&p.multiplyScalar(1/L),this.angleBisection?(t.copy(p),t.add(N),0===L&&0===y||0===h?(0===L&&p.set(1,0,0),this.closed?(t.copy(O[O.length-1]),t.sub(O[0])):(t.copy(O[h+1]),t.sub(O[h])),t.set(-t.y,t.x,t.z)):(t.lengthSq()<1e-4&&(t.copy(this.upVector),t.cross(p)),j.copy(this.lineShapeVertices[h-1][ti]),j.sub(O[h-1]),t.dot(j)<0&&t.negate())):this.calculateSideVector(t,p,j),t.normalize(),z.copy(t),t.multiplyScalar(this._getLineWidth(h/this._resolution)/2),this.lineShapeVertices[h][ti].add(t),this.lineShapeVertices[h][ji].sub(t),this.blur){let y=h/this._resolution;z.multiplyScalar(this._getLineWidth(y)/2+this._getBlurWidth(y)),this.lineShapeVertices[h][zi].add(z),this.lineShapeVertices[h][Oi].sub(z)}this.lineShapeVertices[this._resolution][ti].copy(O[this._resolution]),this.lineShapeVertices[this._resolution][ji].copy(O[this._resolution]),this.blur&&(this.lineShapeVertices[this._resolution][zi].copy(O[this._resolution]),this.lineShapeVertices[this._resolution][Oi].copy(O[this._resolution])),p.copy(O[this._resolution]),p.sub(O[this._resolution-1]),L=p.length(),L>0&&p.multiplyScalar(1/L),this.angleBisection?(t.copy(p),t.set(-t.y,t.x,t.z),j.copy(this.lineShapeVertices[this._resolution-1][ti]),j.sub(O[this._resolution-1]),t.dot(j)<0&&t.negate()):this.calculateSideVector(t,p,j),t.normalize(),z.copy(t),t.multiplyScalar(this._getLineWidth(1)/2),this.lineShapeVertices[this._resolution][ti].add(t),this.lineShapeVertices[this._resolution][ji].sub(t),this.blur&&(z.multiplyScalar(this._getLineWidth(1)/2+this._getBlurWidth(1)),this.lineShapeVertices[this._resolution][zi].add(z),this.lineShapeVertices[this._resolution][Oi].sub(z)),this.closed&&(this.lineShapeVertices[this._resolution][ti].copy(this.lineShapeVertices[0][ti]),this.lineShapeVertices[this._resolution][ji].copy(this.lineShapeVertices[0][ji]),this.lineShapeVertices[this._resolution][zi].copy(this.lineShapeVertices[0][zi]),this.lineShapeVertices[this._resolution][Oi].copy(this.lineShapeVertices[0][Oi]))}calculateSideVector(y,L,p){y.copy(L),y.cross(this.upVector),y.lengthSq()<.01&&y.copy(p),p.copy(y)}getInterpolatedPoint(y){let L=0,p=0;var N=this.length();let t=0;for(let j=0;j<this.lineVertices.length-1;j++){let z=this.lineVertices[j].distanceTo(this.lineVertices[j+1]);if(t+=z,t/N>y){L=j;let O=t-z;p=(y*N-O)/(t-O);break}}var j=new fN;return L<this.lineVertices.length-1&&(j.copy(this.lineVertices[L]),j.lerp(this.lineVertices[L+1],p)),j}_getLineWidth(y){return this.lineWidthModifier?this.lineWidth*this.lineWidthModifier(y):this.lineWidth}_getBlurWidth(y){return this.blurWidthModifier?this.blurWidth*this.blurWidthModifier(y):this.blurWidth}_getColor(y){return this.colorModifier?this.color.clone().multiply(this.colorModifier(y)):this.color}_getOpacity(y){return this.opacityModifier?this.opacity*this.opacityModifier(y):this.opacity}toString(){return"BlurredLine"}};function mi(y,L,p){y[L]=p.x,y[L+1]=p.y,y[L+2]=p.z}function ki(y,L,p,N=1){y[L]=p.r,y[L+1]=p.g,y[L+2]=p.b,y[L+3]=N}var _i=class extends A_{constructor(y){super(),y?(void 0===y.depthTest&&(y.depthTest=!1),void 0===y.side&&(y.side=Y),void 0===y.transparent&&(y.transparent=!0)):y={depthTest:!1,side:Y,transparent:!0},this.uniforms={materialColor:{value:new pj(16777215)},opacity:{value:1}},this.color=new pj,this.vertexShader=`\n        precision mediump float;\n        precision mediump int;\n\n        uniform mat4 modelViewMatrix; // optional\n        uniform mat4 projectionMatrix; // optional\n\n        attribute vec3 position;\n        attribute vec4 color;\n\n        uniform vec3 materialColor;\n        uniform float opacity;\n\n        // varying vec3 vPosition;\n        varying vec4 vColor;\n\n        void main()\t{\n\n          // vPosition = position;\n          vColor = color * vec4( materialColor, opacity );\n\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n        }\n      `,this.fragmentShader=`\n        precision mediump float;\n        precision mediump int;\n\n        // uniform float time;\n        // uniform float color;\n        // uniform float opacity;\n\n        // varying vec3 vPosition;\n        varying vec4 vColor;\n\n        void main()\t{\n\n          vec4 c = vColor;\n          // c.a *= opacity;\n          // color.r += sin( vPosition.x * 10.0 + time ) * 0.5;\n\n          gl_FragColor = c;\n\n        }\n      `,this.type="BlurredLineMaterial",Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.materialColor.value},set:function(y){this.uniforms.materialColor.value=y}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(y){this.uniforms.opacity.value=y}}}),this.setValues(y)}copy(y){return Nz.prototype.copy.call(this,y),this.color.copy(y.color),this.opacity=y.opacity,this}};cC(N),cC(t);var Wi=p(525620),gi=p(276111),Ci=p(769413),Qi=p(234341),Ti=p(315049);const ii={beforeCenterAnimationDelay:0,centerAnimationDuration:.335,enlargeScale:1.8,parkingAnimationDuration:1.2,scale:.6};var Di;(function(y){y["Idle"]="Idle",y["Elastic"]="Elastic",y["ToCenter"]="ToCenter",y["Parking"]="Parking",y["BonusGame"]="BonusGame"})(Di||(Di={}));const wi=[["0","1",.89],["0","2",.88],["0","3",.89],["0","4",.95],["0","5",.88],["0","6",.99],["0","7",.96],["0","9",.96],["0","x",.83],["1","5",.88],["1","6",.92],["1","7",.94],["1","x",.83],["2","0",.92],["2","1",.88],["2","4",.91],["2","5",.93],["2","6",.95],["2","7",.97],["2","9",.97],["2","x",.87],["3","1",.85],["3","2",.88],["3","3",.88],["3","4",.92],["3","5",.91],["3","6",.97],["3","7",.97],["3","8",.93],["3","x",.83],["4","0",.87],["4","1",.84],["4","2",.84],["4","3",.84],["4","5",.86],["4","6",.9],["4","7",.9],["4","x",.8],["5","0",.97],["5","1",.93],["5","2",.93],["5","3",.93],["5","5",.92],["5","6",.99],["5","x",.83],["6","0",.87],["6","1",.82],["6","2",.84],["6","3",.84],["6","4",.85],["6","5",.84],["6","8",.84],["6","x",.8],["7","4",.66],["7","5",.68],["7","7",.8],["7","8",.68],["7","x",.6],["8","0",.91],["8","1",.88],["8","2",.88],["8","3",.88],["8","7",.92],["8","x",.83],["9","1",.76],["9","2",.76],["9","2",.74],["9","3",.74],["9","4",.8],["9","5",.74],["9","x",.72],["0",.94],["1",.9],["2",.9],["3",.95],["4",.88],["5",.95],["6",.88],["7",.7],["8",.9],["9",.82]],xi=[["0","1",.84],["0","4",.95],["1","1",.78],["1","7",.82],["1","x",.78],["2","1",.84],["2","4",.95],["2","x",.91],["3","1",.78],["3","2",.85],["3","4",.97],["3","x",.84],["4","1",.82],["4","2",.88],["4","3",.93],["4","4",1],["4","x",.9],["5","1",.79],["5","2",.82],["5","4",.9],["5","x",.82],["6","1",.88],["6","2",.88],["6","3",.88],["6","5",.93],["6","6",.95],["6","7",.93],["6","8",.96],["6","x",.9],["7","1",.85],["7","2",.88],["7","3",.88],["7","4",.85],["7","6",.85],["7","x",.8],["8","1",.86],["8","2",.86],["8","4",.96],["8","x",.9],["9","1",.88],["9","2",.84],["9","3",.84],["9","4",.96],["9","5",.93],["9","7",.93],["9","8",.96],["9","x",.93],["0",.9],["1",.8],["2",.9],["3",.9],["4",.97],["5",.87],["6",.98],["7",.9],["8",.9],["9",.95]];function di(y,L,p){const N=function(y){return y?wi:xi}(p);if(y)for(const p of N){if(2===p.length){const L=oi(y,p[0],p[1]);if(void 0!==L)return L}if(3===p.length){const N=Ui(y,L,p[0],p[1],p[2]);if(void 0!==N)return N}}}function oi(y,L,p){if(y.startsWith(L))return p}function Ui(y,L,p,N,t){if(y.startsWith(p)&&(null==L?void 0:L.startsWith(N)))return t}var Ii,Vi;function Fi({textures:y,resolution:L,compositionMode:p,isItalic:N,multiplierDigits:t,scaleRate:j,offset:z,existingTexture:O}){const h=O?O.source.data:document.createElement("canvas"),m=null!=O?O:new dk(h);"number"==typeof L?(h.width=L,h.height=L):(h.width=L[0],h.height=L[1]);const k=h.getContext("2d");if(!k||!y.length)return m;if(p===Ii.BaseMultiplier&&y.forEach(((L,p)=>{const N=L.source.data;y.length-1!==p?k.drawImage(N,0,0,2*N.width,2*N.height):(k.rotate(-.11),k.drawImage(N,85-(t?10*t:0),h.height/2-110,N.width/2-20,N.height/2-20),k.rotate(.11))})),p===Ii.InfoBar){let L=0;y.forEach(((y,p)=>{const N=y.source.data;2===p?k.drawImage(N,h.width/2-N.width/2,h.height/2-N.height/2,N.width+10,N.height+10):k.drawImage(N,L-10,h.height/2-N.height/2+30,N.width-60,N.height-60),L+=1.3*N.width}))}if(p===Ii.Scatter){let L=y[0].image.width/2;y.forEach(((p,N)=>{const j=p.source.data;N===y.length-1?(k.drawImage(j,h.width/2-j.width/2+L+25-(t?10*t:0),h.height/2-j.height/2+140,j.width/2-50,j.height/2-50),L+=j.width):k.drawImage(j,h.width/2-j.width/2,h.height/2-j.height/2,j.width,j.height)}))}if(p===Ii.MultiplierWithX){const L=null!=j?j:1;let p=z?z[0]:0;const t=z?z[1]:0;y.forEach(((j,z)=>{const O=j.source.data,m=j.userData.symbol,_=z===y.length-1?void 0:y[z+1].userData.symbol;k.drawImage(O,h.width/2-O.width*L/2+p,h.height/2-O.height*L/2+t,O.width*L,O.height*L);let W=1;const g=di(m,_,N);void 0!==g&&(W=g),p+=O.width*L*W}))}if(p===Ii.BackgroundShine){const L=y.length-1,p=.5,t=p*(L>=5?11.5*L:8*L);let j=L*-t*1.5;L>5?j=L*-t/2:5===L&&(j=L*-t/1.4),y.forEach(((z,O)=>{const m=z.source.data,_=z.userData.symbol,W=O===y.length-1?void 0:y[O+1].userData.symbol;if(0===O){const y=2.3*p;k.drawImage(m,h.width/2-m.width*y/2,h.height/2-m.height*y/2,m.width*y,m.height*y)}else{k.drawImage(m,h.width/2-(p*m.width-t)/2+j,h.height/2-(p*m.height-t)/2+(L===O?-10*p:0),p*m.width-t,p*m.height-t);let y=1;const z=di(_,W,N);void 0!==z&&(y=z),j+=p*m.width*y-t}}))}return m.needsUpdate=!0,m}function ui(y){return 0===y?1:Math.ceil(Math.log10(y+1))}(function(y){y[y["Scatter"]=0]="Scatter",y[y["BaseMultiplier"]=1]="BaseMultiplier",y[y["MultiplierWithX"]=2]="MultiplierWithX",y[y["Vertical"]=3]="Vertical",y[y["InfoBar"]=4]="InfoBar",y[y["BackgroundShine"]=5]="BackgroundShine"})(Ii||(Ii={})),function(y){y[y["OverlayCenter"]=0]="OverlayCenter",y[y["StackCenter"]=1]="StackCenter"}(Vi||(Vi={}));const Si=512;function Bi(y){const L=Si,{firstImageWidth:p,multiplierDigits:N}=y,t=0;switch(y.type){case KT.FlyingWithX:return{resolution:[L/2,L/4],compositionMode:Ii.MultiplierWithX,scaleRate:.25,offset:[-20*N,t]};case KT.WithX:return{resolution:L,compositionMode:Ii.MultiplierWithX,scaleRate:.9,offset:[-25*N,t]};case KT.WithXExtraOffset:return{resolution:L,compositionMode:Ii.MultiplierWithX,scaleRate:.9,offset:[-45*N,t]};case KT.WithXSlotSymbol:return{resolution:L,compositionMode:Ii.MultiplierWithX,scaleRate:.8,offset:[-40*N,-160]};case KT.LongHorizontal:return{resolution:[L,L/4],compositionMode:Ii.MultiplierWithX,scaleRate:.495,offset:[-L/2+p/2-25,t]};case KT.WithShine:return{resolution:[L/2,3*(L/8)],compositionMode:Ii.BackgroundShine}}}function Ri(y,L,p,N,t,j,z){return p===Vi.StackCenter?function(y,L={}){const p=L.outputCanvas||document.createElement("canvas"),N=L.outputTexture||new dk(p),t=L.compositionMode||Vi.OverlayCenter;let j=0,z=0;for(const L of y)j=Math.max(L.source.data.width,j),z=Math.max(L.source.data.height,z);Array.isArray(L.resolution)?(j=L.resolution[0],z=L.resolution[1]):L.resolution&&(j=L.resolution,z=L.resolution),p.width=j,p.height=z;const O=p.getContext("2d");if(!O)return N;if(t===Vi.OverlayCenter)y.forEach((y=>{const L=y.source.data,N=L.width/L.height;let t,h;L.width<L.height?(t=z*N,h=z):(t=j,h=j*N),O.drawImage(L,p.width/2-t/2,p.height/2-h/2,t,h)}));else if(t===Vi.StackCenter){const L=y.length;let N=0;const t=[];y.forEach((y=>{const p=y.source.data,O=p.width/p.height;let h,m;p.width<p.height?(h=z*O,m=z):(h=j,m=j*O),h/=L,m/=L,N+=h,t.push([p,h,m])})),t.reduce(((y,[L,t,j])=>(O.drawImage(L,y+p.width/2-N/2,p.height/2-j/2,t,j),y+t)),0)}return N.source.data=p,N.needsUpdate=!0,N}(y,{compositionMode:p,resolution:L}):Fi({textures:y,resolution:L,compositionMode:p,isItalic:N,scaleRate:t,offset:j,existingTexture:z})}function Yi(y,L,p,N){const t=ui(p),j=L===KT.WithX||L===KT.WithXSlotSymbol||L===KT.WithXExtraOffset||3===t?"mid":t<3?"low":"high",z=`${p}x`.split("").filter((y=>!!N[`${y}-${j}`])).map((y=>N[`${y}-${j}`]));return L===KT.WithShine&&void 0!==y[sT.TopUpShine]&&z.unshift(y[sT.TopUpShine]),z}async function Ei(y,L,p,N,t=!1){const j={},z=[],O=N.baseMultiplierTextures.italic,h=N.baseMultiplierTextures.regular,m=performance.now();if(!O||!h)return j;if(t)for(const[y,t]of N.multiplierPool[L].entries())Mi({type:L,multiplier:parseInt(y,10),texture:t,compositionTextures:p,store:N});for(const t of y){const y=`${t}`,m=N.getMultiplierFromPool(L,y);if(void 0!==m){j[y]=m;continue}if(N.multiplierPool[L].size>=bT[L]){const z=N.getOldestMultiplierFromPool(L);Mi({type:L,multiplier:t,texture:z[1],compositionTextures:p,store:N}),N.addMultipliersToPool(L,[[y,z[1]]]),j[y]=z[1];continue}const k=await Pi({type:L,multiplier:t,compositionTextures:p,baseMultiplierTextures:li(L)?O:h});k.colorSpace=pp,j[y]=k,z.push([y,k])}const k=performance.now()-m;return k>30&&window.console.warn(`loadMultiplierTextures: ${y.join("-")}`,L,`${k}ms`),N.addMultipliersToPool(L,z),j}async function Pi({multiplier:y,type:L,compositionTextures:p,baseMultiplierTextures:N}){var t,j;if(0===y&&void 0!==p[sT.TokenSymbol])return new dk(await async function(y){const L=document.createElement("canvas"),p=L.getContext("2d");return null!==p&&(L.width=100,L.height=75,p.globalAlpha=.3,p.drawImage(y,-1,17.5,100,40)),L}(p[sT.TokenSymbol].source.data));const z=Yi(p,L,y,N),{resolution:O,compositionMode:h,scaleRate:m,offset:k}=Bi({multiplierDigits:ui(y),type:L,firstImageWidth:null!==(j=null===(t=z[0])||void 0===t?void 0:t.image.width)&&void 0!==j?j:0});return Ri(z,O,h,li(L),m,k)}function li(y){return y!==KT.LongHorizontal}async function Mi({multiplier:y,type:L,texture:p,compositionTextures:N,store:t}){var j,z;const O=t.baseMultiplierTextures.italic,h=t.baseMultiplierTextures.regular,m=li(L)?O:h;if(0===y||null===m)return p;const k=Yi(N,L,y,m),{resolution:_,compositionMode:W,scaleRate:g,offset:C}=Bi({multiplierDigits:ui(y),type:L,firstImageWidth:null!==(z=null===(j=k[0])||void 0===j?void 0:j.image.width)&&void 0!==z?z:0});return Ri(k,_,W,li(L),g,C,p)}function fi(y,L,p,N){const[t,j]=h.useState({}),z=p.cache[sT.DoubleText],O=p.cache[sT.MultiplierSymbolsItalic],m=p.cache[sT.MultiplierSymbolsRegular],k=li(L)?p.baseMultiplierTextures.italic:p.baseMultiplierTextures.regular,_=h.useMemo((()=>L===KT.LongHorizontal?{MultiplierSymbolsRegular:m,DoubleText:z}:{MultiplierSymbolsItalic:O}),[L,z,O,m]);return h.useEffect((()=>{Ei(y.filter((y=>"double"!==y)),L,_,p).then((L=>{y.includes("double")&&(L["double"]=p.cache[sT.DoubleText]),N&&N(L),j(L)}))}),[L,_,N,y,p]),h.useEffect((()=>{null!==k&&0!==Object.values(t).length&&Ei(y.filter((y=>"double"!==y)),L,_,p,!0).then((L=>{y.includes("double")&&(L["double"]=p.cache[sT.DoubleText]),N&&N(L),j(L)}))}),[k,L]),t}var ai=p(331094);function Hi(){const[y,L]=h.useState(void 0);return h.useEffect((()=>{const y=new xz;return L(y),()=>{y.dispose(),L(void 0)}}),[]),y}const Xi=h.forwardRef(((y,L)=>{const p=h.useRef(),N=h.useRef();return h.useImperativeHandle(L,(()=>({getGlowAnimation:(y,L)=>{const N=null==p?void 0:p.current;return void 0===N?Qi.M():Ci.M(N).animateTo({opacity:1},y,gi.sn).animateTo({opacity:0},L,gi.sn)},getStarsAnimation:(y,L)=>{const p=null==N?void 0:N.current;return void 0===p?Qi.M():Ci.M(p).animateTo({opacity:1},y,gi.sn).animateTo({opacity:0},L,gi.sn)}}))),j.jsx(Ji,{...y,glowRef:p,starsRef:N})})),Ji=Wi.PA((({multiplier:y,materialRef:L,glowRef:p,starsRef:N,opacity:t=1})=>{const{gameTexture:z}=ai.Pj(),O=Hi(),m=vT(sT.ScattersParkedFrame,z),k=vT(sT.ScattersParkedFrameMutliplier,z),_=vT(sT.ScattersParkedGlow,z),W=vT(sT.ScattersParkedStars,z),[g,C]=h.useState(),Q=fi(h.useMemo((()=>y>1?[y]:[]),[y]),KT.WithX,z);return h.useEffect((()=>{if(!k.image||!m.image)return;if(y<=1)return C(m),()=>{C(void 0)};const L=Q[`${y}`];if(!L)return;const p=ui(y),N=Fi({textures:[k,L],resolution:512,compositionMode:Ii.BaseMultiplier,isItalic:!0,multiplierDigits:1===p?void 0:p});C(N)}),[k,m,y,Q]),j.jsxs("group",{scale:6,visible:!0,children:[j.jsx("mesh",{visible:void 0!==g,geometry:O,children:j.jsx("meshBasicMaterial",{map:g,transparent:!0,ref:L,opacity:t})}),j.jsx("mesh",{geometry:O,position:[-.015,.03,.01],scale:[.68,.6,1],children:j.jsx("brightnessMaterial",{ref:N,map:W,transparent:!0,intensity:6,opacity:0})}),j.jsx("mesh",{geometry:O,children:j.jsx("brightnessMaterial",{ref:p,map:_,transparent:!0,intensity:.5,opacity:0})})]})}));function ri(y,L,p,N){const t=class extends Nz{constructor(t={}){const j=Object.entries(y);super({uniforms:j.reduce(((y,[L,p])=>({...y,...yz.clone({[L]:{value:p}})})),{}),vertexShader:L,fragmentShader:p}),this.key="",j.forEach((([y])=>Object.defineProperty(this,y,{get:()=>this.uniforms[y].value,set:L=>this.uniforms[y].value=L}))),Object.assign(this,t),N&&N(this)}};return t.key=NN.generateUUID(),t}const Gi=ri({map:null,intensity:1,opacity:1},"varying vec2 vUV;void main(){vUV=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}","varying vec2 vUV;uniform sampler2D map;uniform float intensity;uniform float opacity;void main(){vec4 textureColor=texture2D(map,vUV);gl_FragColor=vec4(textureColor.rgb*intensity,textureColor.a*opacity);\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",(y=>{y&&(y.transparent=!0,y.needsUpdate=!0)})),$i=ri({lightSweep:null,maskTexture:null,progress:0,intense:1.5},"varying vec2 vUV;void main(){vUV=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}","uniform sampler2D lightSweep;uniform sampler2D maskTexture;uniform float progress;uniform float intense;varying vec2 vUV;void main(){vec2 movement=vec2(2.,0.)*progress;vec4 lightColor=texture2D(lightSweep,vUV+vec2(1.,0.)-movement);vec4 textureColor=texture2D(maskTexture,vUV);float lightStep=step(textureColor.r,0.1);gl_FragColor=mix(lightColor*intense,vec4(0.),lightStep);}",(y=>{y&&(y.transparent=!0,y.needsUpdate=!0)}));function qi(){cC({SweepMaterial:$i,BrightnessMaterial:Gi})}qi();const Ai=h.forwardRef(((y,L)=>{const p=h.useRef(null),N=h.useRef(null);return h.useImperativeHandle(L,(()=>({getShineAnimation:(y,L)=>{const t=p.current,j=N.current;return t&&j?[Ci.M(t.uniforms.intensity).animateTo({value:1*L},y/2,gi.sn).animateTo({value:1},y/2,gi.sn),Ci.M(j).animateTo({opacity:2},y/2,gi.sn).animateTo({opacity:0},y/2,gi.sn)]:[Qi.M(void 0)]}}))),j.jsx(si,{...y,textRef:p,glowRef:N})})),si=Wi.PA((({multiplier:y,textRef:L,glowRef:p,scale:N=1})=>{const t=Hi(),{gameTexture:z}=ai.Pj(),O=vT(sT.ScattersGoldGlow,z),[m,k]=h.useState(),_=h.useMemo((()=>0===y?[]:[y]),[y]),W=h.useCallback((L=>{0!==y&&k(L[`${y}`])}),[y]);return fi(_,KT.WithXExtraOffset,z,W),j.jsxs("group",{scale:N,children:[j.jsx("mesh",{visible:y>1,geometry:t,scale:[1,.8,1],position:[0,0,.01],children:j.jsx("meshBasicMaterial",{ref:p,map:O,transparent:!0,opacity:0,blending:M})}),j.jsx("mesh",{visible:void 0!==m&&y>0,geometry:t,children:j.jsx("brightnessMaterial",{ref:L,map:m,intensity:1,transparent:!0})})]})}));var ci,Ki;qi(),function(y){y["Idle"]="Idle",y["MultiplierPop"]="MultiplierPop",y["PachinkoLetterPop"]="PachinkoLetterPop",y["MultiplierShine"]="MultiplierShine"}(ci||(ci={})),function(y){y["Multiplier"]="ScatterAnimated.Multiplier",y["Letter"]="ScatterAnimated.Letter",y["Background"]="ScatterAnimated.Background",y["Stars"]="ScatterAnimated.Stars"}(Ki||(Ki={}));const bi=(new fN).addScalar(1);function ni(y){const L=bi.clone();return L.setX(y),L.setY(y),L}const vi=Qi.M(),ei=h.forwardRef(((y,L)=>{const p=h.useRef(null),N=h.useRef(null),t=h.useRef(null);return h.useImperativeHandle(L,(()=>({getAnimationByPhase(y){const L=null==p?void 0:p.current;if(null===L)return vi;if(y===ci.Idle){const y=L.children.find((y=>y.name===Ki.Background));return void 0===y?vi:Ci.M(y.rotation).animateTo({z:0},0)}if(y===ci.MultiplierPop){const y=N.current,p=L.children.find((y=>y.name===Ki.Multiplier));if(void 0===p||null===y)return vi;const t=Qi.M();return y.uniforms.progress.value=0,t.parallel([Ci.M(y.uniforms.progress).animateTo({value:1},1).onUpdate((()=>{y.needsUpdate=!0})),Ci.M(p.scale).animateTo(ni(1),.135,gi.dV).animateTo(ni(1.6),.065,gi.dV).animateTo(ni(.5),.165,gi.dV).animateTo(ni(1),.065,gi.dV)]),t}if(y===ci.PachinkoLetterPop){const y=L.children.find((y=>y.name===Ki.Letter));return void 0===y?vi:Ci.M(y.scale).animateTo(ni(1.5),.165,gi.dV).animateTo(ni(1),.165,gi.dV)}if(y===ci.MultiplierShine){const y=L.children.find((y=>y.name===Ki.Multiplier)),p=L.children.find((y=>y.name===Ki.Stars)).material,N=t.current;if(void 0===y||void 0===p||null===N)return vi;const j=Qi.M();return j.sequence(Ci.M(y.scale).animateTo(ni(2),.165,gi.dV).animateTo(ni(.37),.165,gi.dV)),j.parallel([Ci.M(y.scale).animateTo(ni(1),.165,gi.dV),Ci.M(p).animateTo({opacity:1},.33).animateTo({opacity:0},.165),...N.getShineAnimation(.495,2)]),j}return vi}}))),j.jsx(Zi,{...y,ref:p,sweepRef:N,multiplierTextRef:t})})),Zi=Wi.PA(h.forwardRef((({multiplier:y,disableAnimation:L,sweepRef:p,multiplierTextRef:N},t)=>{const{gameTexture:z}=ai.Pj(),O=Hi(),m=vT(sT.Sweep,z),k=vT(sT.ScattersMask,z),_=vT(sT.ScattersBackground,z),W=vT(sT.ScattersFrame,z),g=vT(sT.ScattersP,z),C=vT(sT.ScattersTop,z),Q=vT(sT.ScattersTopCrazy,z),T=vT(sT.ScattersStars,z),i=h.useRef(),D=h.useRef(),w=y>1;return h.useEffect((()=>{const y=i.current;if(void 0===y||!0===L)return;y.rotateZ(0);const p=Ci.M(y.rotation).animateTo({x:0,y:0,z:2*-Math.PI},.5,gi.sn);return Ti.l({anim:p,repeat:1/0})}),[L]),h.useEffect((()=>{const y=D.current;if(!y)return;const L=Ci.M(y).animateTo({opacity:1},.5,gi.sn).animateTo({opacity:0},.5,gi.sn);return Ti.l({anim:L,repeat:1/0})}),[]),j.jsxs("group",{scale:2,visible:!0,ref:t,children:[j.jsx("group",{scale:.73,position:[0,0,0],ref:i,name:Ki.Background,children:j.jsx("mesh",{geometry:O,children:j.jsx("meshBasicMaterial",{map:_,transparent:!0})})}),j.jsx("mesh",{geometry:O,children:j.jsx("meshBasicMaterial",{map:W,transparent:!0})}),j.jsx("group",{name:Ki.Letter,children:j.jsx("mesh",{geometry:O,children:j.jsx("meshBasicMaterial",{map:g,transparent:!0})})}),j.jsx("mesh",{scale:[1,.35,1],position:[0,.35,0],geometry:O,children:j.jsx("meshBasicMaterial",{map:w?C:Q,transparent:!0})}),j.jsx("mesh",{geometry:O,children:j.jsx("sweepMaterial",{ref:p,lightSweep:m,maskTexture:k})}),j.jsx("mesh",{scale:[1.55,1.45,1],position:[.02,-.07,0],geometry:O,name:Ki.Stars,children:j.jsx("brightnessMaterial",{map:T,transparent:!0,opacity:0,intensity:2})}),j.jsx("group",{visible:w,position:[-.02,.44,0],name:Ki.Multiplier,children:j.jsx(Ai,{ref:N,multiplier:w?y:0,scale:.9})})]})})));var yD=p(833141);function LD(y){const{totalFrames:L,onUpdate:p,duration:N,onReady:t}=y,j={frame:0},z=yD.D(j).callback((()=>{p(0)})).animateTo({frame:L},N,void 0,(()=>{p(j.frame)}));return t&&z.callback(t),z}function pD(y,L){return Object.keys(y.frames).sort().map((p=>ND(y.frames[p],y.meta.size.width,y.meta.size.height,L)))}function ND(y,L,p,N=.5){const{x:t,y:j,width:z,height:O}=y;return new uN((t+N)/L,1-(j+N)/p,(z-2*N)/L,(O-2*N)/p)}const tD=p(189395),jD=0,zD=.4,OD=.53,hD=.6,mD=.63,kD=.8,_D=.9,WD=1.2,gD=1.3,CD=1.6,QD=2,TD=2.1,iD=2.7,DD=3,wD=3.2,xD=3.4,dD=4.2,oD=4.5,UD=4.7;function ID(y,L){return{x:y*L,y:y*L}}function VD(y){const L=y.position.y;return Qi.M().delay(zD-jD).parallel([Ci.M(y.position).animateTo({y:L+Math.abs(.06*L)},mD-zD,gi.Do).animateTo({y:L},kD-mD,gi.Do),Ci.M(y.rotation).animateTo({z:NN.degToRad(-5)},OD-zD,gi.Do).animateTo({z:0},hD-OD,gi.Do)])}function FD(y){const L=Ci.M(y.rotation).delay(wD-jD),p=dD-wD,N=8*2,t=NN.degToRad(10),j=p/N;for(let y=0;y<N;y++){let p=y%2==0?t:-t;y===N-1&&(p=0),L.animateTo({z:p},j,gi.dV)}return L}function uD(y,L){const p=y.material,N=pD(tD);return y.position.copy(L),Qi.M().delay(iD-jD).sequence(LD({duration:dD-iD,totalFrames:N.length-1,onUpdate:y=>{p.frame=N[y]}}))}function SD(y){const L=.5*(iD-QD);return Qi.M().delay(QD-jD).sequence(y.getStarsAnimation(L,L))}const BD=0,RD=.4,YD=.7,ED=1,PD=1.3;function lD(y){const L=[],p=y.x*y.y,N=1/y.x,t=1/y.y;for(let j=0;j<p;j++){const p=N*(j%y.x),z=1-t*Math.floor(j/y.x);L.push(new uN(p,z,N,t))}return L}const MD=new fN(0,1.7),fD=lD({x:4,y:4});function aD(y,L){return Ci.M(y.scale).callback((()=>{y.scale.set(0,0,0),y.position.copy(L),y.visible=!0})).animateTo({x:1.8,y:1.8,z:1},.165,gi.dV).animateTo({x:1,y:1,z:1},.065,gi.dV)}const HD=2.7,XD=2.8,JD=new fN(-5.2,1.7),rD={multiplier:0,position:MD};function GD(y){var L,p,N;if(void 0===y)return{left:rD,right:rD,center:rD};const t=y.map((y=>{const{reel:L,row:p}=y,N=JD,t=new fN(L*HD-.15,-p*XD+3),j=(new fN).copy(N).add(t);return{multiplier:y.multiplier,position:j,multiplierPosition:AD(j,y.multiplier,1)}}));return{left:null!==(L=t[0])&&void 0!==L?L:rD,center:null!==(p=t[1])&&void 0!==p?p:rD,right:null!==(N=t[2])&&void 0!==N?N:rD}}function $D(y,L,p){const{width:N,height:t}=L;switch(y){case"mobilePortrait":return new fN(5.5,p?9-5e-4*N:9.2+.025*(t-N-.4*t));case"mobileLandscape":return new fN(-12,-2);case"tablet":return new fN(.025*-(N-t-.06*N)-6.5,-5);default:return new fN(-19.5,-6.5)}}function qD(y,L,p,N=0){const t=L.current,j={value:0};return void 0!==y&&t?Ci.M(j).delay(N).callback((()=>{t&&(t.opacity=1.85)})).animateTo({value:fD.length-1},p).onUpdate((()=>{const L=Math.round(j.value);var p,N;p=y,N=fD[L],p.repeat.set(N.z,N.w),p.offset.x=N.x,p.offset.y=N.y-N.w,y.updateMatrix()})).callback((()=>{t&&(t.opacity=0)})):Ci.M(j)}function AD(y,L,p=1,N=!1){let t=L>9?-.15:0;const j=N?.15:1;return N&&(t-=.2),new fN(y.x+t*p,y.y+j*p)}const sD=ri({opacity:1,diffuseTexture:null,frame:new uN},"varying vec2 vUV;void main(){vUV=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}","uniform sampler2D diffuseTexture;uniform vec4 frame;varying vec2 vUV;uniform float opacity;vec2 spriteSheet(vec2 uv,vec4 spriteRect){return vec2(spriteRect.x+uv.x*spriteRect.z,spriteRect.y-(1.-uv.y)*spriteRect.w);}void main(){vec4 color=texture2D(diffuseTexture,spriteSheet(vUV,frame));gl_FragColor=color*opacity;\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",(y=>{y&&(y.depthTest=!1,y.depthWrite=!1,y.transparent=!0,y.needsUpdate=!0)}));cC({SpriteAnimationMaterial:sD});const cD=Wi.PA(h.forwardRef(((y,L)=>{const{texture:p,size:N,atlas:t}=y,{gameTexture:z}=ai.Pj(),O=h.useRef(null),m=vT(p,z),[k,_]=h.useState(1);return h.useEffect((()=>{const y=Object.values(t.frames);if(y.length>0){const L=y[0];_(L.width/L.height)}else _(1)}),[t]),j.jsxs("mesh",{ref:L,"scale-x":N,"scale-y":N/k,children:[j.jsx("planeGeometry",{args:[1,1]}),j.jsx("spriteAnimationMaterial",{ref:O,diffuseTexture:m})]})})));var KD=p(281249),bD=p(674833);const nD=p(189395),vD=y=>{const{initialScatters:L,totalScatterMultiplier:p,animationPhase:N,scale:t,layoutMode:z,landedReelsWithScatters:O,triggerSoundEvent:m,disableAnimations:k,gameDimensions:_,pachinkoInScreen:W,isMainSlotToTopUpTransitionInProgress:g,isPortrait:C,isMainSlotShrinkFit:Q,isTopUpShrinkFit:T,scatterXPosition:i,gamePhase:D,gameTextures:w}=y,{beforeCenterAnimationDelay:x,centerAnimationDuration:d,enlargeScale:o}=ii,[U,I]=h.useState(GD(L)),[V,F]=h.useState($D(z,_,T||Q)),[u,S]=h.useState(void 0),[B,R]=h.useState(void 0),[Y,E]=h.useState(!1),[P,l]=h.useState(!1),M=Hi(),f=h.useRef(),a=h.useRef(),H=h.useRef(),X=h.useRef(),J=h.useRef(),r=h.useRef(),G=h.useRef(),$=h.useRef(),q=h.useRef(),A=h.useMemo((()=>function(y){return"mobileLandscape"===y?1.7:1}(z)),[z]),s=vT(sT.ScattersFirework,w),c=h.useMemo((()=>s.clone()),[s]),K=h.useMemo((()=>s.clone()),[s]),b=h.useMemo((()=>s.clone()),[s]),n=h.useRef(),v=h.useRef(),e=h.useRef(),Z=h.useRef(N),yy=h.useRef(null),Ly=h.useRef(null),py=h.useCallback(((y,L)=>{if(!y)return;const p=MD,N=f.current,t=a.current,j=H.current;if(void 0===N||void 0===t||void 0===j)return;L||m(KD.P.ScatterWinStart),N.visible=!0,N.position.copy(U.left.position),t.visible=!0,t.position.copy(U.center.position),j.visible=!0,j.position.copy(U.right.position),function(y){const L=[f,H,a].map((y=>{const L=y.current;return L?[Ci.M(L.scale).animateTo({x:1.8,y:1.8},.335,gi.dV),Ci.M(L.scale).animateTo({x:1.35,y:1.35},.335,gi.dV)]:[]}));L[0].map(((y,p)=>L.map((y=>y[p])))).forEach((L=>{y.parallel(L)}))}(y),y.parallel([Ci.M(N.rotation).animateTo({z:0},0),Ci.M(t.rotation).animateTo({z:0},0),Ci.M(j.rotation).animateTo({z:0},0)]);const z=.75*d,O=.75*d;y.delay(x),y.parallel([Qi.M().callback((()=>!L&&m(KD.P.ScatterWinMove))),Ci.M(N.position).animateTo(p,d,gi.dV),Ci.M(N.rotation).animateTo({z:2*-Math.PI},d,gi.dV),Ci.M(N.scale).animateTo({x:o,y:o},d,gi.dV),qD(c,n,d,O),Qi.M().delay(z).callback((()=>!L&&m(KD.P.ScatterWinMove))),Ci.M(t.position).delay(z).animateTo(p,d,gi.dV),Ci.M(t.scale).delay(z).animateTo({x:o,y:o},d,gi.dV).callback((()=>{R(U.left.multiplier+U.center.multiplier),N.visible=!1})),Ci.M(t.rotation).delay(z).animateTo({z:2*Math.PI},d,gi.dV),qD(K,v,d,O+z),Qi.M().delay(2*z).callback((()=>!L&&m(KD.P.ScatterWinMove))),Ci.M(j.position).delay(2*z).animateTo(p,d,gi.dV),Ci.M(j.scale).delay(2*z).animateTo({x:o,y:o},d,gi.dV).callback((()=>{S(U.left.multiplier+U.right.multiplier+U.center.multiplier),t.visible=!1,L||m(KD.P.ScatterWinJoin)})),Ci.M(j.rotation).delay(2*z).animateTo({z:2*-Math.PI},d,gi.dV),qD(b,e,d,O+2*z)]),y.delay(.4*d)}),[x,d,o,K,c,b,U,m]),Ny=h.useCallback(((y,L)=>{if(!y)return;const N=H.current,t=G.current,j=r.current,z=q.current,O=$.current;if(void 0===N||void 0===t||void 0===j||void 0===z||void 0===O)return;z.opacity=0,t.scale.setScalar(A),t.position.copy(V),y.sequence(j.getAnimationByPhase(ci.MultiplierShine)),y.delay(.27);const h=.4;y.sequence(Ci.M(N.scale).animateTo({x:1.1*A,y:1.1*A},h/2,gi.dV)),y.parallel([Ci.M(N.position).animateTo(V,h,gi.dV),Ci.M(N.scale).animateTo({x:2.7*A,y:2.7*A},h/2,gi.dV),Ci.M(N.scale).delay(h/2).animateTo({x:.55*A,y:.55*A},h/2,gi.dV)]),y.parallel([Qi.M().callback((()=>{if(!L){const y=(null!=p?p:0)>1;m(KD.P.ScatterWinLand,y?"Multiplied":"Normal")}})),Ci.M(N.scale).animateTo({x:.9*A,y:.9*A},h/2,gi.dV).callback((()=>{N.visible=!1})),Ci.M(z).delay(h/2-h/10).animateTo({opacity:1},h/10)]),y.parallel([O.getGlowAnimation(h/10,h),O.getStarsAnimation(h/10,h)]),y.callback((()=>S(p)))}),[A,p,m,V]),ty=h.useCallback((y=>{if(!y)return;const L=G.current,N=q.current,t=$.current;if(void 0!==L&&void 0!==N&&Ly.current&&t)if(S(p),p&&p>0){const p=new fN("desktop"===z?-6.9:"tablet"===z?-1.5-.012*i:.3,0);y.sequence(function(y){const{position:L,element:p,material:N,originalScale:t,sparklesFall:j,starsAnimator:z}=y;return Qi.M().parallel([VD(p),Ci.M(p.position).delay(WD-jD).animateTo({x:L.x,y:L.y,z:L.z},TD-WD,gi.dV),Ci.M(p.rotation).delay(_D-jD).animateTo({z:NN.degToRad(10)},WD-_D,gi.dV).delay(gD-WD).animateTo({z:0},CD-gD,gi.dV),FD(p),Ci.M(p.scale).delay(QD-jD).animateTo(ID(t,1.39),TD-QD,gi.dV).delay(iD-TD).animateTo(ID(t,1),DD-iD,gi.dV).animateTo(ID(t,1.7),wD-DD,gi.dV).animateTo(ID(t,1.39),xD-wD,gi.dV),Ci.M(N).delay(oD-jD).animateTo({opacity:0},UD-oD,gi.dV),uD(j,L),SD(z)])}({position:p,originalScale:A,element:L,material:N,sparklesFall:Ly.current,starsAnimator:t}))}else y.sequence(function(y){const{material:L,glowAnimator:p}=y;return Qi.M().parallel([Qi.M().delay(RD-BD).sequence(p.getGlowAnimation(YD-RD,ED-YD)),Ci.M(L).delay(ED-BD).animateTo({opacity:0},PD-ED,gi.dV)])}({material:N,glowAnimator:t}))}),[p,z,A,i]);h.useEffect((()=>{yy.current&&!yy.current.timeline.done&&(yy.current.timeline.fastForward(),yy.current.dispose(),yy.current=null);const y=Qi.M();let L=null!=k&&k;return N===Di.Idle&&(E(!0),Z.current=Di.Idle),N===Di.ToCenter&&(Z.current!==Di.Idle?(L=!0,py(y,L)):py(y,L),Z.current=Di.ToCenter),N===Di.Parking&&(Z.current!==Di.ToCenter?(L=!0,py(y,L),Ny(y,L)):(m(KD.P.ScatterWinFly),Ny(y,L)),Z.current=Di.Parking),N===Di.BonusGame&&W&&(Z.current!==Di.Parking?(L=!0,py(y,L),Ny(y,L),ty(y)):ty(y),Z.current=Di.BonusGame),yy.current={timeline:y,dispose:Ti.l({anim:y})},L&&y.fastForward(),()=>{var y,L;null===(y=yy.current)||void 0===y||y.timeline.fastForward(),null===(L=yy.current)||void 0===L||L.dispose(),yy.current=null}}),[N,d,o,x,W,k,ty,Ny,py,m]),h.useEffect((()=>{Y&&!P?(R(void 0),I(GD(L)),S(void 0),l(!0)):(E(!1),l(!1))}),[Y,P,C,L,_,Q]),h.useEffect((()=>{I(GD(L))}),[L,C,_,Q]),h.useEffect((()=>{const y=$D(z,_,T||Q);if(y.x===V.x&&y.y===V.y||F(y),G.current&&f.current&&a.current&&H.current&&(G.current.position.set(V.x,V.y,V.z),!g&&N!==Di.Parking)){const{x:y,y:L,z:p}=U.left.position;f.current.position.set(y,L,p);const{x:N,y:t,z:j}=U.center.position;a.current.position.set(N,t,j);const{x:z,y:O,z:h}=U.right.position;H.current.position.set(z,O,h)}}),[N,z,g,V,U,T,_,Q]),function(y){const{animationPhase:L,leftScatterRef:p,centerScatterRef:N,rightScatterRef:t,leftScatterAnimatedRef:j,centerScatterAnimatedRef:z,rightScatterAnimatedRef:O,initialScatters:m,landedReelsWithScatters:k,positions:_}=y,W=h.useRef({}),g=h.useRef(_);g.current=_,h.useEffect((()=>{var y;if(L!==Di.Idle){for(const y of Object.values(W.current))y.timeline.fastForward(),y.dispose();return void(W.current={})}const h=[[p,j,g.current.left],[N,z,g.current.center],[t,O,g.current.right]];for(let L=0;L<h.length;L++){const[p,N,t]=h[L],j=p.current,z=N.current;if(!j||!z)continue;const O=null==m?void 0:m[L],g=`R_${L}`,C=`RS_${L}`;if(O){const L=k.includes(O.reel);if(L&&!W.current[g]){const y=W.current[C];y&&(y.dispose(),delete W.current[C]);const L=Qi.M().parallel([z.getAnimationByPhase(ci.MultiplierPop),aD(j,t.position)]),p=Ti.l({anim:L});W.current[g]={timeline:L,dispose:p}}else if(!L)if(W.current[g]){null===(y=W.current[g])||void 0===y||y.dispose(),delete W.current[g];const L=Qi.M().sequence(z.getAnimationByPhase(ci.PachinkoLetterPop)).parallel([(_=j,Ci.M(_.scale).animateTo({x:0,y:0,z:0},.335,gi.dV))]).callback((()=>{delete W.current[C],j.visible=!1})),p=Ti.l({anim:L});2===O.row&&L.fastForward(),W.current[C]={timeline:L,dispose:p}}else j.visible=!1}else{const y=W.current[g];y&&(y.timeline.fastForward(),y.dispose(),delete W.current[g]),j.visible=!1}}var _}),[L,N,m,W,p,t,k,j,z,O])}({initialScatters:L,leftScatterRef:f,centerScatterRef:a,rightScatterRef:H,leftScatterAnimatedRef:X,centerScatterAnimatedRef:J,rightScatterAnimatedRef:r,landedReelsWithScatters:O,animationPhase:N,positions:U});const jy=null!=u?u:p;return j.jsxs("group",{scale:t,visible:!Y,children:[j.jsxs("group",{ref:f,children:[j.jsx("mesh",{geometry:M,scale:[10,10,1],children:j.jsx("meshBasicMaterial",{map:c,ref:n,opacity:0,transparent:!0})}),j.jsx("group",{scale:[1.35,1.35,1],children:j.jsx(ei,{multiplier:void 0===(null!=u?u:B)?U.left.multiplier:0,ref:X,disableAnimation:k})})]}),j.jsxs("group",{ref:a,children:[j.jsx("mesh",{geometry:M,scale:[10,10,1],children:j.jsx("meshBasicMaterial",{map:K,ref:v,opacity:0,transparent:!0})}),j.jsx("group",{scale:[1.35,1.35,1],children:j.jsx(ei,{multiplier:B||U.center.multiplier,ref:J,disableAnimation:k})})]}),j.jsxs("group",{ref:H,children:[j.jsx("mesh",{geometry:M,scale:[10,10,1],children:j.jsx("meshBasicMaterial",{map:b,ref:e,opacity:0,transparent:!0})}),j.jsx("group",{scale:[1.35,1.35,1],children:j.jsx(ei,{multiplier:u||U.right.multiplier,ref:r,disableAnimation:k})})]}),j.jsx(cD,{ref:Ly,texture:sT.SparklesFall,atlas:nD,size:10}),j.jsx("group",{position:[V.x,V.y,0],ref:G,visible:!(N!==Di.Parking&&N!==Di.BonusGame||g&&D!==bD.Q.Pachinko),children:j.jsx(Xi,{multiplier:null!=jy?jy:0,materialRef:q,ref:$,opacity:0})})]})},eD=Wi.PA((()=>{const{gamePhase:y,mainSlot:L,device:p,settings:N,topUpSlot:t,sound:z,abstractGame:O,slotLayout:h,pachinko:m,slotRect:k,gameTexture:_}=ai.Pj(),{scatterMultipliers:W,landedReelsWithScatters:g}=L,{layoutMode:C}=p,Q=1===L.totalScatterMultiplier?0:L.totalScatterMultiplier;return j.jsx("group",{position:[0,p.isTablet?-.8:0,0],children:j.jsx(vD,{layoutMode:C,initialScatters:W,animationPhase:y.scattersPhase,showScatterDelay:N.showScatterDelay,totalScatterMultiplier:Q,scale:.265,landedReelsWithScatters:g,triggerSoundEvent:z.triggerEvent,disableAnimations:!N.animationsEnabled||!O.isPageVisible,pachinkoInScreen:m.isInScreen,gameDimensions:O.gameDimensions,isMainSlotToTopUpTransitionInProgress:!t.isInScreen,isPortrait:p.isPortrait,isMainSlotShrinkFit:h.isMainSlotShrinkFit,isTopUpShrinkFit:h.isTopUpSlotShrinkFit,gamePhase:y.phase,scatterXPosition:k.slotContainerRect.xS,gameTextures:_})})}));function ZD(y){const{visible:L,logoRef:p,overlayRef:N,layoutMode:t,logoShineRef:z,textureStore:O}=y,m=h.useRef(null),k=h.useRef(null),_=h.useRef(null),W=h.useRef(null),g=vT(sT.Logo,O),C=vT(sT.Sweep,O),Q=vT(sT.BonusOverlay,O);h.useEffect((()=>{m.current&&k.current&&(k.current.opacity=0,N({mesh:m.current,material:k.current})),_.current&&W.current&&(W.current.opacity=0,p({mesh:_.current,material:W.current}))}),[p,N]);const T=function(y){const{layoutMode:L,texture:p}=y,[N,t]=h.useState([0,0,0]),{viewport:j}=EQ();return h.useEffect((()=>{if(j.width>0&&j.height>0&&(null==p?void 0:p.image)){const y=p.image.height/p.image.width;let N;N="mobilePortrait"===L?2*j.width:.6*j.width,t([N,N*y,1])}}),[j.width,j.height,L,p]),N}({layoutMode:t,texture:g}),i=function(){const[y,L]=h.useState([0,0,0]),{viewport:p}=EQ();return h.useEffect((()=>{if(p.width>0&&p.height>0){const y=1.2*Math.max(p.width,p.height);L([y,y,1])}}),[p.width,p.height]),y}(),D=Hi();return j.jsxs("group",{visible:L,children:[j.jsx("group",{ref:m,children:j.jsx("mesh",{scale:i,geometry:D,children:j.jsx("meshBasicMaterial",{ref:k,map:Q,transparent:!0})})}),j.jsxs("group",{ref:_,children:[j.jsx("mesh",{scale:T,geometry:D,children:j.jsx("meshBasicMaterial",{ref:W,map:g,transparent:!0})}),j.jsx("mesh",{scale:T,geometry:D,children:j.jsx("sweepMaterial",{ref:z,lightSweep:C,maskTexture:g})})]})]})}const yw=Wi.PA((y=>{const L=ai.Pj(),p={...y,visible:L.phaseTransitions.isTransitionToPachinko&&!L.topUpSlot.isInScreen,layoutMode:L.device.layoutMode,textureStore:L.gameTexture};return j.jsx(ZD,{...p})}));let Lw=function(y){return y["Linear"]="linear",y["Radial"]="radial",y}({});function pw({stops:y,colors:L,size:p=1024,width:N=16,type:t=Lw.Linear,innerCircleRadius:j=0,outerCircleRadius:z="auto",...O}){const m=EQ((y=>y.gl)),k=h.useMemo((()=>{const O=document.createElement("canvas"),h=O.getContext("2d");let m;if(O.width=N,O.height=p,t===Lw.Linear)m=h.createLinearGradient(0,0,0,p);else{const y=O.width/2,L=O.height/2,p="auto"!==z?Math.abs(Number(z)):Math.sqrt(y**2+L**2);m=h.createRadialGradient(y,L,Math.abs(j),y,L,p)}let k=y.length;for(;k--;)m.addColorStop(y[k],L[k]);return h.save(),h.fillStyle=m,h.fillRect(0,0,N,p),h.restore(),O}),[y]);return h.createElement("canvasTexture",ZT.A({colorSpace:m.outputColorSpace,args:[k],attach:"map"},O))}var Nw=p(542021);function tw(y){return y.device.isDesktop&&y.gamePhase.phase===bD.Q.MainSlot?.8:1}const jw=70;function zw(y){if("mobilePortrait"===y.device.layoutMode)switch(y.gamePhase.phase){case bD.Q.Pachinko:case bD.Q.GameResult:return function(y){const L=y.videoRect.rect.h-jw,p=y.pachinko;return p.phase!==Nw.lj.PuckDrop&&p.phase!==Nw.lj.PuckLanded||"mobilePortrait"!==y.device.layoutMode?L/y.abstractGame.gameDimensions.height:.8}(y);case bD.Q.TopUpSlot:return.7;case bD.Q.MainSlot:return.73;case bD.Q.Initial:return.7}switch(y.gamePhase.phase){case bD.Q.Pachinko:case bD.Q.GameResult:return.86;case bD.Q.TopUpSlot:case bD.Q.MainSlot:case bD.Q.Initial:return.76}}const Ow=y=>{const{topPosition:L,opacity:p,gradient:N,layoutMode:t}=y,z=h.useRef(null);return function(y){const{mesh:L,topPosition:p,isPortraitPhone:N}=y,t=h.useRef(!1),{viewport:j}=EQ(),z=h.useRef();h.useEffect((()=>{if(!(j.width>0&&j.height>0&&L.current))return;const y=j.height*(N?1:1-p),O=-j.height*p*(N?1:.5);if(L.current.scale.setX(6*j.width),L.current.visible=!0,t.current){const p=Qi.M();p.parallel([Ci.M(L.current.position).animateTo({y:O},.5),Ci.M(L.current.scale).animateTo({y},N?0:.5)]);const t=Ti.l({anim:p});return z.current={dispose:t,timeline:p},()=>{var y;null===(y=z.current)||void 0===y||y.dispose(),z.current=void 0}}t.current=!0,L.current.scale.setY(y),L.current.position.y=O}),[j,p,L,N])}({mesh:z,topPosition:L,isPortraitPhone:"mobilePortrait"===t}),j.jsxs("mesh",{ref:z,visible:!1,children:[j.jsx("planeGeometry",{}),j.jsx("meshBasicMaterial",{transparent:!0,opacity:p,children:j.jsx(pw,{stops:N.stops,colors:N.colors})})]})},hw=Wi.PA((()=>{const y=ai.Pj(),L={topPosition:zw(y),opacity:tw(y),gradient:(p=y.device.layoutMode,N=y.gamePhase.phase,"mobilePortrait"===p?N===bD.Q.Pachinko||N===bD.Q.GameResult?{stops:[0,.05,.1],colors:["rgba(68, 19, 38, 0.1)",`rgba(68, 19, 38, 1)`,"rgba(68, 19, 38)"]}:{stops:[0,.07,.12],colors:["rgba(68, 19, 38, 0.1)",`rgba(68, 19, 38, 0.9)`,"rgba(68, 19, 38)"]}:{stops:[0,.47,1],colors:["transparent","rgba(49, 16, 30, 0.83)","rgba(49, 16, 30)"]}),layoutMode:y.device.layoutMode};var p,N;return j.jsx(Ow,{...L})}));var mw,kw=p(228174);(function(y){y["Element01"]="element01",y["Element02"]="element02",y["Element03"]="element03",y["Element04"]="element04",y["Element05"]="element05",y["Element06"]="element06",y["Element07"]="element07",y["Element08"]="element08",y["Element09"]="element09",y["Element10"]="element10",y["Element11"]="element11",y["Element12"]="element12",y["Element13"]="element13",y["Element14"]="element14",y["Element15"]="element15",y["Element16"]="element16"})(mw||(mw={}));const _w={[mw.Element01]:[.56,.9],[mw.Element02]:[.27,.075],[mw.Element03]:[.3,.1],[mw.Element04]:[.4,.27],[mw.Element05]:[.56,.9],[mw.Element06]:[.27,.075],[mw.Element07]:[.3,.1],[mw.Element08]:[.63,.76],[mw.Element09]:[.365,.885],[mw.Element10]:[.5,.9],[mw.Element11]:[.2,.75],[mw.Element12]:[.5,.5],[mw.Element13]:[.5,.5],[mw.Element14]:[.5,.5],[mw.Element15]:[.5,.5],[mw.Element16]:[.5,.5]},Ww=[mw.Element01,mw.Element02,mw.Element03,mw.Element04],gw=[mw.Element05,mw.Element06,mw.Element07],Cw=Ww.concat(gw),Qw=[mw.Element08,mw.Element09,mw.Element10,mw.Element11],Tw=[mw.Element12,mw.Element13,mw.Element14,mw.Element15,mw.Element16];var iw;(function(y){y["Coin"]="CurtainSymbolGroup.Coin",y["Diamond"]="CurtainSymbolGroup.Diamond",y["SmallDiamond"]="CurtainSymbolGroup.SmallDiamond"})(iw||(iw={}));const Dw={[iw.Coin]:Cw,[iw.Diamond]:Qw,[iw.SmallDiamond]:Tw},ww={[iw.Diamond]:.2,[iw.Coin]:.51,[iw.SmallDiamond]:.29},xw={[iw.Diamond]:1,[iw.Coin]:2,[iw.SmallDiamond]:2},dw=40,ow=.05;var Uw=p(384511);class Iw{constructor(y){this.props=y,this.previousSymbols={},this.sortedWeights=Object.keys(y.probabilities).sort(((L,p)=>y.probabilities[L]-y.probabilities[p]))}getSymbolForColumn(y){const L=this.previousSymbols[y];let p;L&&L.count===this.props.maxRepeat[L.group]&&(p=L.group);const N=this.getRandomGroup(p);return L?L.group!==N?(L.group=N,L.count=1):L.count+=1:this.previousSymbols[y]={group:N,count:1},this.getRandomSymbolForGroup(N)}getRandomGroup(y){const L=Math.random();for(const p of this.sortedWeights){const N=this.props.probabilities[p];if(N>0&&L<=N&&y!==p)return p}for(let L=this.sortedWeights.length-1;L>=0;L--){const p=this.sortedWeights[L];if(p!==y)return p}return iw.SmallDiamond}getRandomSymbolForGroup(y){const L=Dw[y];return L[Uw.U4(0,L.length-1)]}}const Vw=p(733049),Fw=Object.values(mw).reduce(((y,L)=>{const{width:p,height:N}=Vw.meta.size,t=Vw.frames[L];return y[L]=ND(t,p,N),y}),{});class uw{constructor(){this.cache={},this.widestFrame=this.getWidestFrameSize(Vw.frames)}create(y,L){const p=`cache-${y[0]}-${y[1]}`,N=this.cache[p];if(N)return N;const t=kw.GB(y[0]/L,4),j=t*ow,z=Math.ceil(y[0]/t),O=y[0],h=y[1],m=[],k=[],_=[],W=[],g=[],C=[],Q=new Iw({probabilities:ww,maxRepeat:xw}),T=t-.1*t;for(let y=0;y<z;y++){const L=.5*-O+y*t+.5*t;let p=.5*h+Uw.U4(0,.2*t,4);for(g.push(L);p>.5*-h;){const N=Uw.U4(.1*t,.6*t,4),j=Q.getSymbolForColumn(y),z=Vw.frames[j],O=z.width/this.widestFrame*T,h=z.height/z.width*O,g=_w[j];p-=.5*h;const i=m.length;m[i]=L,m[i+1]=p;const D=k.length;k[D]=O,k[D+1]=h;const w=Fw[j],x=_.length;_[x]=w.x,_[x+1]=w.y,_[x+2]=w.z,_[x+3]=w.w,W[W.length]=(Math.random()>.5?1:-1)*Uw.U4(.45,.7,2),C.push([L+O*(g[0]-.5),p+h*(.5-g[1])]),p-=.5*h+N}}const i={flares:{positions:C,size:t},lines:{linePositions:g,width:j,height:h},symbols:{positionOffsets:m,scale:k,textureRect:_,animations:W}};return this.cache[p]=i,i}getWidestFrameSize(y){const L=Object.values(y);let p=0;for(const y of L)p=Math.max(y.width,p);return p}}const Sw=10;function Bw(y){h.useEffect((()=>{let L=0,p=0;y&&(y.onBeforeRender=(y,N,t)=>{if(Rw(t)){L=t.fov,p=t.position.z;const y=2*Math.tan(NN.degToRad(.5*L)),N=2*Math.tan(NN.degToRad(.5*Sw));t.position.set(0,0,p*y/N),t.lookAt(0,0,0),t.fov=Sw,t.updateProjectionMatrix()}},y.onAfterRender=(y,N,t)=>{Rw(t)&&(t.position.set(0,0,p),t.lookAt(0,0,0),t.fov=L,t.updateProjectionMatrix())})}),[y])}function Rw(y){return"isPerspectiveCamera"in y}class Yw extends Rj{constructor(y){super();const{width:L,height:p,linePositions:N}=y,t=[],j=[],z=[],O=.5*L,h=.5*-p,m=h+p;for(let y=0;y<N.length;y++){const p=N[y]-O,k=6*y,_=4*y;z[k]=_,z[k+1]=_+1,z[k+2]=_+2,z[k+3]=_+2,z[k+4]=_+1,z[k+5]=_+3;const W=12*y;t[W]=p,t[W+1]=h,t[W+2]=0,t[W+3]=p+L,t[W+4]=h,t[W+5]=0,t[W+6]=p,t[W+7]=m,t[W+8]=0,t[W+9]=p+L,t[W+10]=m,t[W+11]=0;const g=8*y;j[g]=0,j[g+1]=0,j[g+2]=1,j[g+3]=0,j[g+4]=0,j[g+5]=1,j[g+6]=1,j[g+7]=1}this.setIndex(z),this.setAttribute("position",new Wj(new Float32Array(t),3)),this.setAttribute("uv",new Wj(new Float32Array(j),2))}}const Ew=ri({opacity:1,lineColor:new uN(0,0,0,.1)},"varying vec2 vUV;void main(){vUV=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}","uniform vec4 lineColor;varying vec2 vUV;uniform float opacity;void main(){gl_FragColor=lineColor*opacity;\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",(y=>{y&&(y.depthWrite=!1,y.depthTest=!1,y.transparent=!0,y.clipping=!1,y.needsUpdate=!0)}));cC({CurtainsLineMaterial:Ew});const Pw=y=>{const{lines:L}=y,[p,N]=h.useState(null),t=h.useRef(null),[z,O]=h.useState();return h.useEffect((()=>{const y=new Yw(L);return O(y),()=>{y.dispose(),O(void 0)}}),[L]),Bw(p),j.jsx("mesh",{ref:N,geometry:z,frustumCulled:!1,children:j.jsx("curtainsLineMaterial",{ref:t})})};function lw(y){var L;return!(y.autoTestStore&&!(null===(L=y.autoTestStore)||void 0===L?void 0:L.isCurtainVisible))&&y.gamePhase.phase===bD.Q.MainSlot}var Mw=p(53579);const fw=1/60*1e3,aw=NN.degToRad(1),Hw=2*Math.PI,Xw=.7;class Jw extends Lg{constructor(y){super(),this.copy(new xz(1,1));const{positionOffsets:L,scale:p,textureRect:N,animations:t}=y;this.setAttribute("offset",new $m(new Float32Array(L),2)),this.setAttribute("scale",new $m(new Float32Array(p),2)),this.setAttribute("diffuseTextureRect",new $m(new Float32Array(N),4)),this.setAttribute("animation",new $m(new Float32Array(t),1)),this.instanceCount=Math.floor(.5*L.length)}}const rw=ri({diffuseTexture:null,angle:0,opacity:1},"attribute vec2 offset;attribute vec2 scale;attribute vec4 diffuseTextureRect;attribute float animation;uniform float angle;varying vec2 vUV;varying vec4 vDiffuseTextureRect;vec2 rotateVector2(vec2 v,float angle){return vec2(cos(angle)*v.x+sin(angle)*v.y,cos(angle)*v.y-sin(angle)*v.x);}void main(){float rotationAngle=sin(angle)*animation;vec3 pos=position*vec3(scale,1.);pos.xz=rotateVector2(pos.xz,rotationAngle);pos+=vec3(offset,0.);vec4 finalPosition=vec4(pos,1.);vUV=uv;vDiffuseTextureRect=diffuseTextureRect;gl_Position=projectionMatrix*modelViewMatrix*finalPosition;}","uniform sampler2D diffuseTexture;varying vec2 vUV;varying vec4 vDiffuseTextureRect;uniform float opacity;vec2 spriteSheet(vec2 uv,vec4 spriteRect){return vec2(spriteRect.x+uv.x*spriteRect.z,spriteRect.y-(1.-uv.y)*spriteRect.w);}void main(){vec4 color=texture2D(diffuseTexture,spriteSheet(vUV,vDiffuseTextureRect));gl_FragColor=color*opacity;\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",(y=>{y&&(y.depthWrite=!1,y.depthTest=!1,y.transparent=!0,y.clipping=!1,y.needsUpdate=!0)}));cC({CurtainsSymbolMaterial:rw});const Gw=Wi.PA((y=>{const{symbols:L}=y,{gameTexture:p}=ai.Pj(),[N,t]=h.useState(null),z=h.useRef(null),O=vT(sT.Curtains,p),[m,k]=h.useState();h.useEffect((()=>{const y=new Jw(L);return k(y),()=>{y.dispose(),k(void 0)}}),[L]);const _=h.useCallback((y=>{z.current&&(z.current.angle=(z.current.angle+aw*(1e3*y/fw)*Xw)%Hw)}),[z]);return Bw(N),PQ(((y,L)=>{_(Mw.S()?0:L)})),j.jsx("mesh",{ref:t,geometry:m,frustumCulled:!1,children:j.jsx("curtainsSymbolMaterial",{ref:z,diffuseTexture:O})})}));var $w;(function(y){y["Init"]="CurtainsState.Init",y["Open"]="CurtainsState.Open",y["Closed"]="CurtainsState.Closed",y["Moving"]="CurtainsState.Moving"})($w||($w={}));const qw=y=>{const{visible:L,isDesktop:p,phase:N}=y,[t,z]=h.useState({flares:{positions:[],size:.1},lines:{linePositions:[],width:0,height:0},symbols:{positionOffsets:[],scale:[],textureRect:[],animations:[]}}),O=h.useRef(new uw),[m,k]=h.useState({position:[0,0],size:[0,0],columnCount:0}),_=h.useRef(),{viewport:W}=EQ(),g=h.useRef(null),C=h.useRef($w.Init);return h.useEffect((()=>{var y,L,p;if(W.width>0&&W.height>0){const N=kw.GB(W.width,1),t=kw.GB(W.height,1),j=t>N,z=N,O=j?.5*t:t,h=.5*t-.5*O;if(!_||(null===(y=_.current)||void 0===y?void 0:y.size[0])!==z||(null===(L=_.current)||void 0===L?void 0:L.size[1])!==O||(null===(p=_.current)||void 0===p?void 0:p.position[1])!==h){const y={position:[0,h],size:[z,O],columnCount:j?Math.round(dw/(t/N)):dw};_.current=y,k(y)}}}),[p,W]),h.useEffect((()=>{O.current&&m.size[0]>0&&m.size[1]>0&&L&&z(O.current.create(m.size,m.columnCount))}),[O,m,L]),h.useEffect((()=>{const y=g.current;if(y){const p=L?m.position[1]:1.2*m.size[1]+m.position[1],t=C.current!==$w.Init||L?L?$w.Open:$w.Closed:$w.Init,j=()=>{y.visible=L,C.current=t,y.position.y=p};if(C.current===$w.Moving||C.current===$w.Closed&&L||C.current===$w.Open&&!L){const L=function(y){const{maxDuration:L,to:p,from:N,totalDistance:t}=y;return kw.GB(L*Math.abs(N-p)/t,2)}({from:y.position.y,to:p,totalDistance:1.2*m.size[1],maxDuration:N===bD.Q.Pachinko?.1:1.5});C.current=$w.Moving;const t=Ci.M(y.position).callback((()=>{y.visible=!0})).animateTo({y:p},L,gi.dV).callback(j);return Ti.l({anim:t})}j()}}),[m,L,N]),j.jsxs("group",{ref:g,"position-x":m.position[0],children:[j.jsx(Pw,{lines:t.lines}),j.jsx(Gw,{symbols:t.symbols})]})},Aw=Wi.PA((()=>{const y=ai.Pj(),L={visible:lw(y),isDesktop:y.device.isDesktop,phase:y.gamePhase.phase};return j.jsx(qw,{...L})})),sw=()=>j.jsx(Aw,{}),cw=Wi.PA((({renderPriority:y})=>{const L=h.useMemo((()=>new jm),[]);return PQ((({gl:y,camera:p,size:N})=>{y.autoClear=!1,"aspect"in p&&(y.setViewport(0,0,N.width,N.height),p.aspect=N.width/N.height,p.updateProjectionMatrix()),y.clearDepth(),y.render(L,p)}),y),AQ(j.jsx(sw,{}),L)})),Kw=Wi.PA((({defaultRenderPriority:y,children:L,useAspect:p})=>{const N=h.useMemo((()=>new jm),[]),{gamePhase:t,slotLayout:j}=ai.Pj(),z=function(y,L){return y===bD.Q.Pachinko?2:y===bD.Q.TopUpSlot?3:L}(t.phase,y),{x:O,y:m,height:k,width:_}=j.scatterDimensions;return PQ((({gl:y,camera:L,size:t})=>{y.setClearColor(16777215,0),y.autoClear=!1,"aspect"in L&&(p?(y.setViewport(0,0,t.width,t.height),L.aspect=t.width/t.height):(y.setViewport(O,m,_,k),L.aspect=_/k),L.updateProjectionMatrix()),y.clearDepth(),y.render(N,L)}),z),AQ(L,N)}));var bw=p(234658);const nw="InfoBar",vw=Wi.PA((()=>{const{gamePhase:y,mainSlot:L,gameTexture:p}=ai.Pj(),N=vT(sT.SymbolsSIdle,p),t=vT(sT.SlotGreenBar,p),z=p.customTextures[nw],O=L.spinMode;h.useEffect((()=>{if(!N.image)return;if(void 0!==z)return;const y=Fi({textures:[N,N,N],resolution:[512,256],compositionMode:Ii.InfoBar,isItalic:!1});return p.addCustomTexture(nw,y),()=>{y.dispose()}}),[N,p,z]);const m=!y.qualified||y.mainSlotPhase!==bw.WI.Result,k=y.qualified&&y.mainSlotPhase===bw.WI.Result;return j.jsxs("group",{visible:void 0!==z,children:[j.jsxs("mesh",{position:[0,8.7,0],visible:k,children:[j.jsx("meshBasicMaterial",{map:t,transparent:!0,opacity:1}),j.jsx("planeGeometry",{args:[20.4,2.2]})]}),j.jsxs("mesh",{position:[0,8.7,0],visible:m&&"XXXtreme"!==O&&"FeatureBuy"!==O,children:[j.jsx("meshBasicMaterial",{map:z,transparent:!0}),j.jsx("planeGeometry",{args:[3.8,2]})]})]})})),ew={...bw.iJ,spinVelocity:5500,startBounceDuration:0,stopBounceDuration:0},Zw=3.4,yx=8.7,Lx=.1;function px(y,L,p,N){return L+p*y**N}const Nx=2*571,tx=3,jx=Nx/1e3/(2*tx),zx=Nx/1e3/tx;var Ox;(function(y){y["Idle"]="idle",y["NoWin"]="no_win",y["Spin"]="spin",y["Toggle"]="toggle",y["Win"]="win"})(Ox||(Ox={}));const hx={W:0,A:1,B:2,C:3,S:4,S2:5,S3:6,S5:7,S10:8,J:9,K:10,Q:11},mx=p(42887),kx=p(197111);var _x,Wx,gx;(function(y){y["AIdle"]="A_idle",y["AWin"]="A_win",y["BIdle"]="B_idle",y["BWin"]="B_win",y["CIdle"]="C_idle",y["CWin"]="C_win",y["JIdle"]="J_idle",y["JWin"]="J_win",y["KIdle"]="K_idle",y["KWin"]="K_win",y["QIdle"]="Q_idle",y["QWin"]="Q_win",y["WIdle"]="W_idle"})(_x||(_x={})),function(y){y["DoubleTimer"]="doubleTimer",y["TopUpTimerGreen"]="topUpTimerGreen",y["TopUpTimerRed"]="topUpTimerRed",y["Sectors"]="sectors",y["Glow"]="glow"}(Wx||(Wx={})),function(y){y["S0Idle"]="S0Idle",y["SIdle"]="SIdle"}(gx||(gx={}));const Cx={x:6,y:5},Qx=new uN(0,1,1,1);function Tx(y,L){y.repeat.set(L.z,L.w),y.offset.x=L.x,y.offset.y=L.y-L.w}function ix(y,L){const p={},N=L.image.width,t=L.image.height,j=Object.entries(y);for(const[y,z]of j){const j=L.clone(),O=ND(z,N,t,0);Tx(j,O),p[y]={frame:O,texture:j},j.needsUpdate=!0}return p}var Dx;(function(y){y["Static"]="TextureType.Static",y["Animation"]="TextureType.Animation"})(Dx||(Dx={}));const wx="uniform sampler2D idleTexture;uniform sampler2D highlightTexture;uniform sampler2D multiplier;uniform float textureInterpolation;uniform float opacity;uniform vec4 highlightFrameData;uniform vec4 idleFrameData;varying vec2 vUV;vec2 spriteSheet(vec2 uv,vec4 spriteRect){return vec2(spriteRect.x+uv.x*spriteRect.z,spriteRect.y-(1.-uv.y)*spriteRect.w);}vec2 rotateUV(vec2 uv,float angle){float pivot=0.5;float pivotedX=uv.x-pivot;float pivotedY=uv.y-pivot;float cosAngle=cos(angle);float sinAngle=sin(angle);return vec2(cosAngle*pivotedX+sinAngle*pivotedY+pivot,cosAngle*pivotedY-sinAngle*pivotedX+pivot);}void main(){vec2 rotatedUV=rotateUV(vUV,-1.57079633);vec2 highlightFrame=spriteSheet(rotatedUV,highlightFrameData);vec2 idleFrame=spriteSheet(rotatedUV,idleFrameData);vec4 idle=texture2D(idleTexture,idleFrame);vec4 highlight=texture2D(highlightTexture,highlightFrame);vec4 multiplierColor=texture2D(multiplier,rotatedUV);vec4 background=mix(idle,highlight,textureInterpolation);gl_FragColor=vec4(mix(background.rgb,multiplierColor.rgb,multiplierColor.a),max(background.a,multiplierColor.a))*opacity;\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",xx="varying vec2 vUV;void main(){vUV=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}";class dx extends Nz{constructor(y){var L,p,N,t,j,z;super({vertexShader:xx,fragmentShader:wx,transparent:!0,depthTest:!0,uniforms:{multiplier:{value:null},idleTexture:{value:null!==(L=null==y?void 0:y.idleTexture)&&void 0!==L?L:null},highlightTexture:{value:null!==(p=null==y?void 0:y.highlightTexture)&&void 0!==p?p:null},textureInterpolation:{value:null!==(N=null==y?void 0:y.textureInterpolation)&&void 0!==N?N:0},opacity:{value:null!==(t=null==y?void 0:y.opacity)&&void 0!==t?t:1},highlightFrameData:{value:null!==(j=null==y?void 0:y.highlightFrameData)&&void 0!==j?j:Qx},idleFrameData:{value:null!==(z=null==y?void 0:y.highlightFrameData)&&void 0!==z?z:Qx}}})}set idleTexture(y){const L=(null==y?void 0:y.source)||null,p=this.getTextureFrame(y);this.uniforms.idleTexture.value=L,this.uniforms.idleFrameData.value=p}set highlightTexture(y){const L=(null==y?void 0:y.source)||null,p=this.getTextureFrame(y);this.uniforms.highlightTexture.value=L,this.uniforms.highlightFrameData.value=p}getTextureFrame(y){if(!y)return Qx;let L=Qx;return function(y){return y.type===Dx.Static}(y)&&(L=y.frame||L),function(y){return y.type===Dx.Animation}(y)&&(L=y.frames[0]||L),L}}var ox=p(32742),Ux=p(94971);const Ix=ox.A(hx);function Vx(y){return hx[y]}function Fx(y){return y.map(Vx)}function ux(y){return y in Ux.mJ}function Sx(y){return Ix[y]}cC({SymbolMaterial:dx});const Bx=h.forwardRef((({dimensions:y,getSymbolState:L,getTextures:p,opacity:N,isWinning:t,getMultiplierTexture:z,isScatterDisabled:O,symbolMaterialPool:m,geometry:k},_)=>{const[W,g]=h.useState(!1),C=h.useRef(!1),Q=h.useRef(m);Q.current=m;const T=h.useRef(null),i=h.useRef(null),D=h.useRef(null),w=_||D;return function(y,L,p){const N=h.useRef(null),t=function(){const y=h.useRef([]);return PQ(((L,p)=>{if(0!==y.current.length)for(const L of y.current)L(1e3*p)})),h.useCallback((L=>(y.current.push(L),()=>{const p=y.current.indexOf(L);-1!==p&&y.current.splice(p-1,1)})),[])}(),j=h.useCallback(((y,L)=>L.win.type===Dx.Animation?function(y,L,p){y.uniforms.textureInterpolation.value=1,y.uniforms.highlightFrameData.value=L[0];const N={value:0},t=Ci.M(N).animateTo({value:L.length-1},zx).onUpdate((()=>{const p=Math.round(N.value);y.uniforms.highlightFrameData.value=L[p]})),j=Ti.l({anim:t,repeat:1/0,ticker:p});return{reset:()=>{t.reset(),y.uniforms.highlightFrameData.value=L[0],t.activate()},dispose:()=>{y.uniforms.textureInterpolation.value=0,y.uniforms.highlightFrameData.value=L[0],j()}}}(y,L.win.frames,t):function(y,L){y.uniforms.textureInterpolation.value=0;const p=Ci.M(y.uniforms.textureInterpolation).delay(.35*jx).animateTo({value:1},.3*jx,gi.Do).animateTo({value:0},1.35*jx),N=Ti.l({anim:p,repeat:1/0,ticker:L});return{reset:()=>{p.reset(),y.uniforms.textureInterpolation.value=0,p.activate()},dispose:()=>{y.uniforms.textureInterpolation.value=0,N()}}}(y,t)),[t]),z=h.useCallback((()=>{var y;N.current&&(null===(y=N.current)||void 0===y||y.reset())}),[]);return h.useEffect((()=>{var t;const z=y.current,O=p.current;if(z&&O)return L?N.current=j(z,O):(null===(t=N.current)||void 0===t||t.dispose(),N.current=null),()=>{var y;null===(y=N.current)||void 0===y||y.dispose(),N.current=null}}),[L,y,j,p]),z}(T,t&&W,i)(),PQ((()=>{if(!w.current||!Q.current)return;const y=L();if(!y||null===y.id)return w.current.visible=!1,void(T.current&&(C.current=!1,i.current=null,Q.current.returnMaterial(T.current),T.current=null));const t=y.id,j=Sx(t);if(void 0===j)return;const h=!(y.isOutcome&&void 0!==y.symbolIndex&&!Number.isNaN(y.symbolIndex));let m,k=!1;(!T.current||!C.current&&h||C.current&&!h)&&(T.current&&Q.current.returnMaterial(T.current),T.current=h?Q.current.getStaticMaterial(j):Q.current.getMaterial(),C.current=h,w.current.material=T.current,m=!h,k=!0);const _=p(t),W=ux(j);if(k||i.current!==_){i.current=_;const y=(null==_?void 0:_.idle)||null,L=(null==_?void 0:_.win)||null;T.current.idleTexture=y,T.current.highlightTexture=L,T.current.uniforms.textureInterpolation.value=0}const D=W?z(j):void 0;if(T.current.uniforms.multiplier.value!==D&&(T.current.uniforms.multiplier.value=D),!h){const y=W&&O?.3:N;T.current.uniforms.opacity.value!==y&&(T.current.uniforms.opacity.value=y,T.current.needsUpdate=!0)}w.current.rotation.set(NN.degToRad(y.rotationDeg),0,Math.PI/2),w.current.visible=!0,void 0!==m&&g(m)})),h.useEffect((()=>()=>{C.current=!1,Q.current&&T.current&&(Q.current.returnMaterial(T.current),T.current=null)}),[]),j.jsx("mesh",{position:[0,0,.1],ref:w,geometry:k,children:j.jsx("mesh",{name:"position-mesh",position:[0,0,y.radius]})})})),Rx=h.memo((({dimensions:y,textures:L,setSymbolObject:p,symbol:N,getMultiplierTexture:t,animation:z,isScatterDisabled:O,symbolMaterialPool:m,geometry:k})=>{const _=h.useRef(null),W=h.useCallback((()=>{var y,L,p,t;return null===N.id?null:{id:N.id,reelIndex:null===(y=N.symbol)||void 0===y?void 0:y.landingPosition.reelIndex,symbolIndex:null===(L=N.symbol)||void 0===L?void 0:L.landingPosition.symbolIndex,rotationDeg:1.2*N.rotationDeg,isOutcome:null!==(t=null===(p=N.symbol)||void 0===p?void 0:p.isOutcome)&&void 0!==t&&t}}),[N]),g=h.useCallback((y=>null===y?null:L[y]),[L]);PQ((()=>{const y=W();y&&!Number.isNaN(y.symbolIndex)&&(null==p||p(y.reelIndex,y.symbolIndex,_.current))}));const C="no_win"===z?.4:1;return j.jsx(Bx,{ref:_,getSymbolState:W,dimensions:y,getTextures:g,opacity:C,isWinning:"win"===z,getMultiplierTexture:t,isScatterDisabled:O,symbolMaterialPool:m,geometry:k},N.symbolIndex)})),Yx="#0A2414",Ex=0,Px=.5,lx=.2,Mx={drumTextureWidth:50,drumTextureHeight:30,glowGlassTextureZOffset:1.8,drumTextureXOffset:-.2,drumTextureYOffset:-8.5,drumTextureZOffset:-5,drumWidth:37,drumHeight:45,glassTextureXOffset:0,glassTextureZOffset:3.41,glassTextureYOffset:-1.1,glassTextureWidth:22.5,glassTextureHeight:15,glowGlassTextureWidth:25,glowGlassTextureHeight:15.2,glowGlassTextureXOffset:0,glowGlassTextureYOffset:-1,drumYOffset:-1.42,frameHeight:35,frameWidth:34.5,drumScaleX:1.22,drumScaleY:1.12,frameXOffset:0,frameYOffset:-6.8},fx={frameXOffset:9,frameYOffset:-4.6,frameWidth:52,frameHeight:46.3,gridWidthRatio:.22,gridHeightRatio:-.04,gridXOffset:1.68,gridYOffset:-.28,glowYOffset:0,glowScale:.7,progressBarXOffset:1.82,progressBarYOffset:1.25,progressBarWidth:2.13,progressBarHeight:.55},ax=h.forwardRef((({children:y,dimensions:L,meshProps:p,geometryProps:N,materialProps:t},z)=>j.jsxs("group",{children:[j.jsxs("mesh",{ref:z,position:[0,0,0],rotation:[0,0,Math.PI/2],...p,children:[j.jsx("cylinderGeometry",{args:[L.radius,L.radius,L.height,64,1,!0,0,2*Math.PI],...N}),j.jsx("meshStandardMaterial",{color:"#f0e7d5",...t})]}),y]}))),Hx=Wi.PA((({symbolsPool:y,reelIndex:L,setSymbolObject:p,textures:N,isScatterDisabled:t,dimensions:z,getMultiplierTexture:O,isSpinInProgress:m,showResult:k,symbolMaterialPool:_,symbolGeometry:W})=>{const{mainSlot:g}=ai.Pj(),C={color:new pj(Yx).lerp(new pj("#000000"),0),metalness:Ex,roughness:Px,envMapIntensity:lx},Q=h.useCallback(((y,L)=>m?Ox.Spin:k&&y?L?Ox.Win:Ox.NoWin:Ox.Toggle),[m,k]);return j.jsx(ax,{dimensions:z,materialProps:C,children:y.getSymbolsForReel(L).map((y=>{const L=null!==y.id?Sx(y.id):void 0,h=g.isSymbolInWinSequence(L,y),m=void 0!==g.currentWinLine,k=Q(m,h);return j.jsx(Rx,{geometry:W,symbolMaterialPool:_,setSymbolObject:p,symbol:y,textures:N,dimensions:z,isScatterDisabled:t,getMultiplierTexture:O,animation:k},y.symbolIndex)}))})}));var Xx;(function(y){y["Idle"]="Idle",y["Spinning"]="Spinning",y["StopSpinning"]="StopSpinning"})(Xx||(Xx={}));var Jx=p(4001);function rx(y){return y.mainSlot.isQuickStop||y.gamePhase.isTurboModeEnabledForSpin}var Gx,$x=p(721120),qx=p(206288),Ax=p(654560),sx=p(885580),cx=p(746380);(function(y){y["Forward"]="Forward",y["Backward"]="Backward"})(Gx||(Gx={}));const Kx="NormalDirectionalSpin";class bx extends qx.${get direction(){return this._direction}set direction(y){if(this.data.postBufferSize!==this.data.preBufferSize)throw new Error("Non-symmetric buffers are not yet supported.");y!==this._direction&&(this._direction=y,this.trimBufferToSize(),this.reverseBuffer())}constructor(y,L){var p,N,t,j;super(y,Kx),this.stopBounceFactor=.1,this.startBounceFactor=.2,this.endBounceFunction=this.singleBounce,this.velocity=0,this.outcomeSymbolToAddIndex=0,this.accumulatedDistance=0,this.despawnPoint=0,this.isOutcomeLanding=!1,this.accumulatedBounceDistance=0,this.stopBounceThreshold=0,this.hasBounced=!1,this._startBounceDuration=.5,this._stopBounceDuration=.5,this._spinVelocity=5,this.numberOfBounces=0,this.lowestOutcomeSymbol=void 0,this.endBounceFunctions=[this.singleBounce,this.multipleBounce,this.ballBounce],this._deaccelerationDistance=0,this._deaccelerationFinalVelocity=0,this.deaccelerationThreshold=0,this.currentAcceleration=0,this.hasStartedDeaccelerating=!1,this.currentDeaccelerationVelocity=0,this.startBounceFactor="number"==typeof L.startBounceFactor?L.startBounceFactor:L.startBounceFactor.normal,this.stopBounceFactor="number"==typeof L.stopBounceFactor?L.stopBounceFactor:L.stopBounceFactor.normal,this.numberOfBounces=null!==(p=L.numberOfBounces)&&void 0!==p?p:0,this.endBounceFunction=this.getEndBounceFunction(L.bounceType),this._deaccelerationDistance=null!==(N=L.deaccelerationDistance)&&void 0!==N?N:0,this._spinVelocity=cx.fP("number"==typeof L.spinVelocity?L.spinVelocity:L.spinVelocity.normal),this._stopBounceDuration=cx.fP("number"==typeof L.stopBounceDuration?L.stopBounceDuration:L.stopBounceDuration.normal),this._startBounceDuration=cx.fP("number"==typeof L.startBounceDuration?L.startBounceDuration:L.startBounceDuration.normal),this._deaccelerationFinalVelocity=cx.fP(null!==(t=L.deaccelerationFinalVelocity)&&void 0!==t?t:0),this._direction=null!==(j=L.direction)&&void 0!==j?j:Gx.Forward}getPositionForIndex(y){let L=0,p=0,N=0;const t=this.data.preBufferSize+this.data.symbolCount;let j,z=0;for(let j=0;j<this.data.bufferSize;++j){const O=this.getDimensionsForIndex(j).y;L+=O,j<this.data.preBufferSize&&(p+=O),j>=t&&(N+=O),j<y&&(z+=O)}return j=this.data.alignment===Ax.bj.Bottom?this.calculateVisibleAreaBottom()-N+L-z-.5*this.getDimensionsForIndex(y).y:this.calculateVisibleAreaTop()+p-z-.5*this.getDimensionsForIndex(y).y,{x:0,y:j*(this.direction===Gx.Forward?1:-1)}}onActivate(){this.onOutcomeUpdated()}onOutcomeUpdated(){this.direction===Gx.Backward&&(this.data.outcome=this.data.outcome.slice().reverse()),this.despawnPoint=this.calculateDespawnPoint()}onStartSpin(){this.lowestOutcomeSymbol=void 0,this.despawnPoint=this.calculateDespawnPoint(),this.data.targetHighestPointOffset=-Number.MAX_VALUE,this.accumulatedDistance=0,this.accumulatedBounceDistance=0,this.data.spinTimer.stopTime=this._startBounceDuration,this.fillWithReelStripSymbols(),this.reel.reelStrip.applyIndexOffset(-this.data.preBufferSize-this.data.postBufferSize),this.snap(),this.hasBounced=!1,this.hasStartedDeaccelerating=!1,this.stopBounceThreshold=Number.POSITIVE_INFINITY,this.deaccelerationThreshold=Number.POSITIVE_INFINITY,this.currentDeaccelerationVelocity=Number.POSITIVE_INFINITY,this.currentAcceleration=Number.POSITIVE_INFINITY;const y=this.data.buffer,L=y.length;for(let p=0;p<L;++p){const L=y[p];void 0!==L&&void 0!==L.onStartSpin&&L.onStartSpin()}}startSpin(){const y=this.accumulatedBounceDistance,L=$x.ub(this.startBounceFactor,this.data.spinTimer.progress);this.accumulatedBounceDistance=L,this.velocity=y-L,this.spinImplementation(),this.synchronizeSymbols()}onStopSpin(){this.outcomeSymbolToAddIndex=this.data.outcome.length,this.stopBounceThreshold=Number.POSITIVE_INFINITY,this.data.spinTimer.stopTime=Number.POSITIVE_INFINITY,this.data.spinTimer.accumulator=0}onIdle(){this.isOutcomeLanding=!1;const y=this.data.outcome,L=y.length,p=this.data.buffer;this.squashPrebuffer(),this.trimBufferToSize();const N=this.data.preBufferSize;for(let t=0;t<L;++t){const L=t+N,j=p[L];void 0!==j&&j.id===y[t]||this.reel.setSymbolByID(y[t],L,Ax.nU.Absolute,{isOutcome:!0,landingPosition:{reelIndex:this.reel.id,symbolIndex:L}})}this.velocity=0,this.outcomeSymbolToAddIndex=0,this.snap(),this.stopBounceThreshold=Number.POSITIVE_INFINITY,this.synchronizeSymbols();for(let y=0;y<p.length;y++){const L=p[y];void 0!==L&&L.land()}this.reel.onStopBounceEnd(this.reel.id)}stopSpin(y){this.prependOutcomeSymbols(),this.calculateStoppingVelocity(y),this.spinImplementation(),this.synchronizeSymbols(),this.calculateStopBounce(),this.checkForDeacceleration()}spin(y){this.velocity=this._spinVelocity*y,this.spinImplementation(),this.prependReelStripSymbols(),this.synchronizeSymbols()}synchronizeSymbols(){this.despawnSymbols();for(let y=0;y<this.data.buffer.length;y++){const L=this.data.buffer[y];void 0!==L&&L.synchronize({x:0,y:this.velocity})}}calculateDespawnPoint(){return this._direction===Gx.Backward?this.calculateVisibleAreaTop()+this.data.preBufferSize*this.defaultSymbolDimensions().y:this.calculateVisibleAreaBottom()-this.data.preBufferSize*this.defaultSymbolDimensions().y}calculateSpawnPoint(){return this._direction===Gx.Forward?this.calculateVisibleAreaTop()+this.data.preBufferSize*this.defaultSymbolDimensions().y:this.calculateVisibleAreaBottom()-this.data.preBufferSize*this.defaultSymbolDimensions().y}prependSymbol(y,L){let p=0;const N=this.data.buffer,t=this.data.bufferSize;for(let y=0;y<t;++y)if(void 0!==N[y]){p=y;break}if(0===p)return-1;const j=p-1,z=this.reel.setSymbolByID(y,j,Ax.nU.Absolute,L),O=N[p];if(void 0===O)return j;const h=this.direction===Gx.Backward?-1:1;return z.position.y=O.position.y+h*(.5*O.dimensions.y+.5*z.dimensions.y),j}reverseBuffer(){this.data.buffer.reverse(),this.snap();for(let y=0;y<this.data.buffer.length;y++){const L=this.data.buffer[y];void 0!==L&&L.synchronize({x:0,y:0})}}trimBufferToSize(){this.trimExcess();const y=this.data.bufferSize;this.data.buffer.splice(y,this.data.buffer.length-y)}spinImplementation(){const y=this.data.buffer;this.accumulatedDistance+=Math.abs(this.velocity);for(let L=0;L<y.length;L++){const p=y[L];if(void 0!==p){const y=this._direction===Gx.Backward?-1:1;p.position.y-=this.velocity*y}}}onOutcomeAppeared(y){this.lowestOutcomeSymbol=y;const L=this.getSymbolBottomBorder(y);this.direction===Gx.Forward&&(this.stopBounceThreshold=L-this.calculateVisibleAreaBottom()),this._direction===Gx.Backward&&(this.stopBounceThreshold=this.calculateVisibleAreaTop()-L),this.deaccelerationThreshold=Math.max(0,this.stopBounceThreshold-this._deaccelerationDistance);const p=this._deaccelerationFinalVelocity-this._spinVelocity;this.currentAcceleration=(this._spinVelocity*p+p*p/2)/this._deaccelerationDistance,this.accumulatedDistance=0,this.isOutcomeLanding=!0}calculateStoppingVelocity(y){if(this.accumulatedDistance>=this.stopBounceThreshold){const y=this.accumulatedBounceDistance,L=this.endBounceFunction(this.data.spinTimer.progress);this.accumulatedBounceDistance=L,this.velocity=L-y}else this.accumulatedDistance>=this.deaccelerationThreshold?(this.velocity=this.currentDeaccelerationVelocity*y+this.currentAcceleration*y*y/2,this.currentDeaccelerationVelocity+=this.currentAcceleration*y,this.accumulatedDistance+this.velocity>this.stopBounceThreshold&&(this.velocity=this.stopBounceThreshold-this.accumulatedDistance)):(this.velocity=this._spinVelocity*y,this.accumulatedDistance+this.velocity>this.stopBounceThreshold?this.velocity=this.stopBounceThreshold-this.accumulatedDistance:this.accumulatedDistance+this.velocity>this.deaccelerationThreshold&&(this.velocity=this.deaccelerationThreshold-this.accumulatedDistance))}calculateStopBounce(){!this.hasBounced&&this.accumulatedDistance>=this.stopBounceThreshold&&(this.hasBounced=!0,this.data.spinTimer.accumulator=0,this.data.spinTimer.stopTime=this._stopBounceDuration,this.accumulatedDistance=this.stopBounceThreshold,this.accumulatedBounceDistance=0,this.velocity=0,this.notifyBounce())}checkForDeacceleration(){!this.hasStartedDeaccelerating&&this.accumulatedDistance>=this.deaccelerationThreshold&&(this.hasStartedDeaccelerating=!0,this.currentDeaccelerationVelocity=this._spinVelocity)}notifyBounce(){const y=this.data.buffer,L=y.length;for(let p=0;p<L;++p){const L=y[p];void 0!==L&&void 0!==L.bounce&&L.bounce()}this.reel.onStopBounceBegin(this.reel.id)}prependOutcomeSymbols(){if(this.outcomeSymbolToAddIndex<0)return;const y=this.data.outcome,L=this.data.preBufferSize-1,p=this.data.buffer;let N=p[L];const t=this.calculateSpawnPoint();for(;void 0===N||this.isSymbolAbovePoint(N,t);){if(--this.outcomeSymbolToAddIndex,this.outcomeSymbolToAddIndex<0){this.shiftSymbolsDown(this.data.preBufferSize);for(let y=0;y<this.data.preBufferSize;++y){const y=this.reel.reelStrip.getNextSymbol(sx.H.Backwards),L=p[this.prependSymbol(y.id,{dimensions:y.dimensions,landingPosition:{reelIndex:this.reel.id,symbolIndex:NaN},isOutcome:!1})];this.clampPrependedSymbolPosition(L)}break}const t=y[this.outcomeSymbolToAddIndex];this.shiftSymbolsDown(1);const j=this.prependSymbol(t,{dimensions:0===this.data.outcomeDimensions.length||this.data.normalizeTo===Ax.He.ReelHeight?this.defaultSymbolDimensions():this.data.outcomeDimensions[this.outcomeSymbolToAddIndex],landingPosition:{reelIndex:this.reel.id,symbolIndex:this.outcomeSymbolToAddIndex},isOutcome:!0});if(j>-1){const L=p[j];this.clampPrependedSymbolPosition(L),this.outcomeSymbolToAddIndex===y.length-1&&this.onOutcomeAppeared(L)}N=p[L]}void 0!==this.lowestOutcomeSymbol&&(this.reel.alignOutcome(),this.onOutcomeAppeared(this.lowestOutcomeSymbol))}despawnSymbols(){const y=this.data.buffer,L=y.length;for(let p=this.isOutcomeLanding?this.data.bufferSize:0;p<L;++p){const L=y[p];void 0!==L&&this.isSymbolBelowPoint(L,this.despawnPoint)&&(L.isDead=!0)}}isSymbolAbovePoint(y,L){const p=this.getSymbolBottomBorder(y);return this.direction===Gx.Backward?p>L:p<L}isSymbolBelowPoint(y,L){const p=this.getSymbolTopBorder(y);return this.direction===Gx.Backward?p>L:p<L}clampPrependedSymbolPosition(y){void 0!==y&&this.isSymbolBelowPoint(y,this.despawnPoint)&&(y.position.y=this.despawnPoint)}prependReelStripSymbols(y=0,L=void 0){const p=this.data.buffer,N=this.data.preBufferSize-1;let t=p[N];const j=this.calculateSpawnPoint();let z=0;for(;void 0===t||this.isSymbolAbovePoint(t,j);){this.squashPrebuffer();const j=this.reel.reelStrip.getNextSymbol(sx.H.Backwards);this.shiftSymbolsDown(1);const O=p[this.prependSymbol(j.id,{dimensions:null!=L?L:j.dimensions,isOutcome:!1,landingPosition:{reelIndex:this.reel.id,symbolIndex:NaN}})];if(this.clampPrependedSymbolPosition(O),t=p[N],y>0&&++z>=y)break}}getSymbolTopBorder(y){return this.direction===Gx.Backward?y.position.y-.5*y.dimensions.y:y.position.y+.5*y.dimensions.y}getSymbolBottomBorder(y){return this.direction===Gx.Backward?y.position.y+.5*y.dimensions.y:y.position.y-.5*y.dimensions.y}set startBounceDuration(y){this._startBounceDuration=cx.fP(y)}get startBounceDuration(){return cx.Wj(this._startBounceDuration)}set stopBounceDuration(y){this._stopBounceDuration=cx.fP(y)}get stopBounceDuration(){return cx.Wj(this._stopBounceDuration)}set spinVelocity(y){this._spinVelocity=cx.fP(y)}get spinVelocity(){return cx.Wj(this._spinVelocity)}getEndBounceFunction(y){return void 0===y?this.endBounceFunctions[0]:this.endBounceFunctions[y]}singleBounce(y){return $x.a7(0,0,this.stopBounceFactor,y)}multipleBounce(y){return $x.Cj(0,0,this.stopBounceFactor,y)}ballBounce(y){return cx.ys(this.stopBounceFactor,this.numberOfBounces,y)}}var nx=p(757069);const vx=({textures:y,symbolsPool:L,spinEngine:p,spinMechanics:N,reelsCount:t,onSpinFinished:z,onSpinStarted:O,mainSlotPhase:m,gamePhase:k,isQuickStop:_,minSpinTime:W,spinConfig:g,setSymbolObject:C,denominationsPhase:Q,onDenominationSpinFinished:T,activeDenomination:i,isScatterDisabled:D,setAreSymbolsSynced:w,getMultiplierTexture:x,showResult:d,symbolMaterialPool:o,onDenominationsSpinStarted:U})=>{const{startSpinning:I,stopSpinning:V,reelSet:F}=p,u=nx.Z(Q),S=nx.Z(m),[B,R]=h.useState(void 0),Y=h.useCallback((()=>{if(void 0!==N)for(let y=0;y<F.reelCount;y++){const L=F.getReel(y);L.setCurrentMechanics(N.denominationSwitchSpin),y%2==1&&L.currentSpinMechanic instanceof bx&&(L.currentSpinMechanic.direction=Gx.Backward)}}),[F,N]),E=h.useCallback((()=>{if(void 0!==N)for(let y=0;y<F.reelCount;y++){const L=F.getReel(y);y%2==1&&L.currentSpinMechanic instanceof bx&&(L.currentSpinMechanic.direction=Gx.Forward),L.setCurrentMechanics(N.normalSpin)}}),[F,N]);h.useEffect((()=>{(async()=>{k===bD.Q.MainSlot&&(m===bw.WI.Spinning?(await I(),O()):m===bw.WI.Transition||m===bw.WI.StopSpinning||m===bw.WI.Error?(await V(_||m===bw.WI.Error),F.presentOutcome(),z()):S!==bw.WI.Result&&m===bw.WI.Result&&w(!0))})()}),[I,V,_,z,O,m,k,F,W,g.reelStopDelay,g.reelStopDelayMultiplier,S,w]),h.useEffect((()=>{void 0!==i&&void 0!==N&&Q!==u&&(Q===Xx.Spinning?(Y(),F.startSpin().then((()=>{U()}))):Q===Xx.StopSpinning?(F.setOutcome(i),F.quickStopSpin().then((()=>{T(),E(),F.setOutcome(i)}))):Q===Xx.Idle&&u===Xx.StopSpinning&&F.presentOutcome())}),[F,Q,T,U,i,N,Y,E,u]);const P=h.useMemo((()=>-Math.floor(t/2)*Zw),[t]),l=h.useMemo((()=>({radius:yx,height:Zw-.15,thetaLength:NN.degToRad(Jx.ye)})),[]);return h.useEffect((()=>{const y=new ck(l.radius,l.radius,l.height+.15,64,1,!0,.5*-l.thetaLength,l.thetaLength);return R(y),()=>{y.dispose(),R(void 0)}}),[l]),j.jsx("group",{position:[P-.2,0,0],scale:[1,.95,1],children:Array.from({length:t},((p,N)=>j.jsx("group",{position:[N*Zw+Lx*N,0,0],children:j.jsx(Hx,{symbolGeometry:B,symbolMaterialPool:o,dimensions:l,symbolsPool:L,reelIndex:N,setSymbolObject:C,textures:y,isScatterDisabled:D,getMultiplierTexture:x,isSpinInProgress:m===bw.WI.Spinning||m===bw.WI.StopSpinning||m===bw.WI.ResponseReceived,showResult:d})},N)))})},ex=Wi.PA((y=>{const L=ai.Pj(),{denominations:p,mainSlot:N,gamePhase:t}=L,z=h.useCallback((()=>N.onSpinEnd()),[N]),O=h.useCallback((()=>N.onSpinStarted()),[N]),m=h.useCallback((()=>p.onSpinFinished()),[p]),k=h.useCallback((()=>p.onSpinStarted()),[p]),_=rx(L);return j.jsx(vx,{activeDenomination:p.activeDenominationGrid,currentLine:N.currentWinLine,denominationsPhase:p.phase,isQuickStop:_,onDenominationSpinFinished:m,onDenominationsSpinStarted:k,onSpinFinished:z,onSpinStarted:O,minSpinTime:N.minSpinTime,gamePhase:t.phase,mainSlotPhase:t.mainSlotPhase,setSymbolObject:N.setSymbolObject,isScatterDisabled:p.isScatterDisabled,setAreSymbolsSynced:N.setAreSymbolsSynced,showResult:N.showResult,...y})})),Zx="NudgeSpin";class yd extends qx.${constructor(y,L){var p,N,t,j;super(y,Zx),this.endBounceFunction=this.singleBounce,this.startBounceFactor=.2,this.stopBounceFactor=.1,this.spinAmount=0,this.velocity=0,this.accumulatedDistance=0,this.despawnPoint=0,this.isOutcomeLanding=!1,this.accumulatedBounceDistance=0,this.stopBounceThreshold=0,this.hasBounced=!1,this._startBounceDuration=.5,this._stopBounceDuration=.5,this._spinVelocity=5,this._nudgeVelocity=.5,this.numberOfBounces=0,this.nextSymbol=void 0,this.accumulatedSpinAmount=0,this.endBounceFunctions=[this.singleBounce,this.multipleBounce,this.ballBounce],this._deaccelerationDistance=0,this._deaccelerationFinalVelocity=0,this.deaccelerationThreshold=0,this.currentAcceleration=0,this.hasStartedDeaccelerating=!1,this.currentDeaccelerationVelocity=0,this.nudgeSpinDistance=0,this.getNextSymbol=()=>0,this.startBounceFactor="number"==typeof L.startBounceFactor?L.startBounceFactor:L.startBounceFactor.normal,this.stopBounceFactor="number"==typeof L.stopBounceFactor?L.stopBounceFactor:L.stopBounceFactor.normal,this.numberOfBounces=null!==(p=L.numberOfBounces)&&void 0!==p?p:0,this.endBounceFunction=this.getEndBounceFunction(L.bounceType),this.spinAmount=L.spinAmount,this._deaccelerationDistance=null!==(N=L.deaccelerationDistance)&&void 0!==N?N:0,this.getNextSymbol=L.getNextSymbol,this._spinVelocity=cx.fP("number"==typeof L.spinVelocity?L.spinVelocity:L.spinVelocity.normal),this._nudgeVelocity=cx.fP(null!==(t=L.nudgeVelocity)&&void 0!==t?t:500),this._stopBounceDuration=cx.fP("number"==typeof L.stopBounceDuration?L.stopBounceDuration:L.stopBounceDuration.normal),this._startBounceDuration=cx.fP("number"==typeof L.startBounceDuration?L.startBounceDuration:L.startBounceDuration.normal),this._deaccelerationFinalVelocity=cx.fP(null!==(j=L.deaccelerationFinalVelocity)&&void 0!==j?j:0)}onActivate(){this.onOutcomeUpdated()}onOutcomeUpdated(){this.nextSymbol=this.getNextSymbol(),this.despawnPoint=this.calculateDespawnPoint()}onStartSpin(){this.data.targetHighestPointOffset=-Number.MAX_VALUE,this.accumulatedDistance=0,this.accumulatedBounceDistance=0,this.accumulatedSpinAmount=0,this.nudgeSpinDistance=0,this.data.spinTimer.stopTime=this._startBounceDuration,this.fillWithReelStripSymbols(),this.reel.reelStrip.applyIndexOffset(-this.data.preBufferSize-this.data.postBufferSize),this.prependNextSymbol(),this.snap(),this.nextSymbol=void 0,this.hasBounced=!1,this.hasStartedDeaccelerating=!1,this.stopBounceThreshold=Number.POSITIVE_INFINITY,this.deaccelerationThreshold=Number.POSITIVE_INFINITY,this.currentDeaccelerationVelocity=Number.POSITIVE_INFINITY,this.currentAcceleration=Number.POSITIVE_INFINITY;const y=this.data.buffer,L=y.length;for(let p=0;p<L;++p){const L=y[p];void 0!==L&&void 0!==L.onStartSpin&&L.onStartSpin()}}startSpin(){const y=this.accumulatedBounceDistance,L=$x.ub(this.startBounceFactor,this.data.spinTimer.progress);this.accumulatedBounceDistance=L,this.velocity=y-L,this.spinImplementation(),this.synchronizeSymbols()}spin(y){this.nudgeSpinDistance>=1||(this.velocity=this._nudgeVelocity*y,this.nudgeSpinDistance=Math.min(this.nudgeSpinDistance+this.velocity,1),this.spinImplementation(),this.prependReelStripSymbols(),this.synchronizeSymbols(this.nudgeSpinDistance<1))}onStopSpin(){this.stopBounceThreshold=Number.POSITIVE_INFINITY,this.data.spinTimer.stopTime=Number.POSITIVE_INFINITY,this.data.spinTimer.accumulator=0,this.applyPartialSpin()}stopSpin(y){this.calculateStoppingVelocity(y),this.spinImplementation(),this.synchronizeSymbols(),this.calculateStopBounce(),this.checkForDeacceleration()}onIdle(){this.isOutcomeLanding=!1;const y=this.data.outcome,L=y.length,p=this.data.buffer;this.squashPrebuffer();const N=this.data.preBufferSize;for(let t=0;t<L;++t){const L=t+N,j=p[L];void 0!==j&&j.id===y[t]||this.reel.setSymbolByID(y[t],L,Ax.nU.Absolute,{isOutcome:!0,landingPosition:{reelIndex:this.reel.id,symbolIndex:L}})}this.velocity=0,this.snap(),this.stopBounceThreshold=Number.POSITIVE_INFINITY,this.synchronizeSymbols();for(let y=0;y<p.length;y++){const L=p[y];void 0!==L&&L.land()}this.reel.onStopBounceEnd(this.reel.id)}synchronizeSymbols(y=!0){y&&this.despawnSymbols();for(let y=0;y<this.data.buffer.length;y++){const L=this.data.buffer[y];void 0!==L&&L.synchronize({x:0,y:this.velocity})}}applyPartialSpin(){const y=this.data.outcome.length;for(const L of this.data.buffer){if(void 0===L||Number.isNaN(L.landingPosition.symbolIndex))continue;const p=L.landingPosition.symbolIndex+1,N=p>y-1?NaN:p;L.landingPosition={reelIndex:this.reel.id,symbolIndex:N},2===N&&this.onOutcomeAppeared(L)}}spinImplementation(){const y=this.data.buffer;this.accumulatedDistance+=Math.abs(this.velocity);for(let L=0;L<y.length;L++){const p=y[L];void 0!==p&&(p.position.y-=this.velocity)}}onOutcomeAppeared(y){this.stopBounceThreshold=y.position.y-.5*y.dimensions.y-this.calculateVisibleAreaBottom(),this.deaccelerationThreshold=Math.max(0,this.stopBounceThreshold-this._deaccelerationDistance);const L=this._deaccelerationFinalVelocity-this._spinVelocity;this.currentAcceleration=(this._spinVelocity*L+L*L/2)/this._deaccelerationDistance,this.accumulatedDistance=0,this.isOutcomeLanding=!0}calculateStoppingVelocity(y){if(this.accumulatedDistance>=this.stopBounceThreshold){const y=this.accumulatedBounceDistance,L=this.endBounceFunction(this.data.spinTimer.progress);this.accumulatedBounceDistance=L,this.velocity=L-y}else this.accumulatedDistance>=this.deaccelerationThreshold?(this.velocity=this.currentDeaccelerationVelocity*y+this.currentAcceleration*y*y/2,this.currentDeaccelerationVelocity+=this.currentAcceleration*y,this.accumulatedDistance+this.velocity>this.stopBounceThreshold&&(this.velocity=this.stopBounceThreshold-this.accumulatedDistance)):(this.velocity=this._spinVelocity*y,this.accumulatedDistance+this.velocity>this.stopBounceThreshold?this.velocity=this.stopBounceThreshold-this.accumulatedDistance:this.accumulatedDistance+this.velocity>this.deaccelerationThreshold&&(this.velocity=this.deaccelerationThreshold-this.accumulatedDistance))}calculateStopBounce(){!this.hasBounced&&this.accumulatedDistance>=this.stopBounceThreshold&&(this.hasBounced=!0,this.data.spinTimer.accumulator=0,this.data.spinTimer.stopTime=this._stopBounceDuration,this.accumulatedDistance=this.stopBounceThreshold,this.accumulatedBounceDistance=0,this.velocity=0,this.notifyBounce())}checkForDeacceleration(){!this.hasStartedDeaccelerating&&this.accumulatedDistance>=this.deaccelerationThreshold&&(this.hasStartedDeaccelerating=!0,this.currentDeaccelerationVelocity=this._spinVelocity)}notifyBounce(){const y=this.data.buffer,L=y.length;for(let p=0;p<L;++p){const L=y[p];void 0!==L&&void 0!==L.bounce&&L.bounce()}this.reel.onStopBounceBegin(this.reel.id)}prependNextSymbol(){void 0!==this.nextSymbol&&this.reel.setSymbolByID(this.nextSymbol,-1,void 0,{isOutcome:!0,landingPosition:{reelIndex:this.reel.id,symbolIndex:-1}})}despawnSymbols(){const y=this.data.buffer,L=y.length;for(let p=this.isOutcomeLanding?this.data.bufferSize:0;p<L;++p){const L=y[p];void 0!==L&&L.position.y+.5*L.dimensions.y<this.despawnPoint&&(L.isDead=!0)}}clampPrependedSymbolPosition(y){void 0!==y&&y.position.y+.5*y.dimensions.y<this.despawnPoint&&(y.position.y=this.despawnPoint)}prependReelStripSymbols(y=0,L=void 0){const p=this.data.buffer,N=this.data.preBufferSize-1;let t=p[N];const j=this.calculateSpawnPoint();let z=0;for(;void 0===t||t.position.y-.5*t.dimensions.y<j;){if(this.accumulatedSpinAmount>=1)return;this.squashPrebuffer();const j=this.reel.reelStrip.getNextSymbol(-1);this.shiftSymbolsDown(1);const O=p[this.prependSymbol(j.id,{dimensions:null!=L?L:j.dimensions,isOutcome:!1,landingPosition:{reelIndex:this.reel.id,symbolIndex:NaN}})];if(this.clampPrependedSymbolPosition(O),this.accumulatedSpinAmount+=1,t=p[N],y>0&&++z>=y)break}}set startBounceDuration(y){this._startBounceDuration=cx.fP(y)}get startBounceDuration(){return cx.Wj(this._startBounceDuration)}set stopBounceDuration(y){this._stopBounceDuration=cx.fP(y)}get stopBounceDuration(){return cx.Wj(this._stopBounceDuration)}set spinVelocity(y){this._spinVelocity=cx.fP(y)}get spinVelocity(){return cx.Wj(this._spinVelocity)}getEndBounceFunction(y){return void 0===y?this.endBounceFunctions[0]:this.endBounceFunctions[y]}singleBounce(y){return $x.a7(0,0,this.stopBounceFactor,y)}multipleBounce(y){return $x.Cj(0,0,this.stopBounceFactor,y)}ballBounce(y){return cx.ys(this.stopBounceFactor,this.numberOfBounces,y)}}const Ld=Wi.PA((()=>{const{mainSlot:y,gameTexture:L}=ai.Pj(),p=y.isXXXtremeSpinsActivated,{frameXOffset:N,frameYOffset:t,frameWidth:z,frameHeight:O,glassTextureWidth:m,glassTextureHeight:k,glassTextureXOffset:_,glassTextureYOffset:W,glassTextureZOffset:g,glowGlassTextureWidth:C,glowGlassTextureHeight:Q,glowGlassTextureXOffset:T,glowGlassTextureYOffset:i,glowGlassTextureZOffset:D,drumTextureXOffset:w,drumTextureYOffset:x,drumTextureZOffset:d,drumWidth:o,drumHeight:U}=Mx,I=Hi(),V=vT(sT.MainSlot,L),F=vT(sT.MainDrum,L),u=vT(sT.MainGlass,L),S=vT(sT.MainGlow,L),B=h.useRef(null),[R,Y]=h.useState(p);return h.useEffect((()=>{if(!B.current)return;const y=Ci.M(B.current).callback((()=>Y(!0))).animateTo({opacity:p?1:0},.3,gi.dV).callback((()=>Y(p))),L=Ti.l({anim:y});return()=>{y.fastForward(),L()}}),[p]),j.jsxs("group",{children:[j.jsx("mesh",{position:[N,t,0],"scale-x":z,"scale-y":O,geometry:I,children:j.jsx("meshBasicMaterial",{map:V,transparent:!0})}),j.jsx("mesh",{position:[w,x,d],"scale-x":o,"scale-y":U,geometry:I,children:j.jsx("meshBasicMaterial",{map:F,transparent:!0})}),j.jsx("mesh",{position:[_,W,g],"scale-x":m,"scale-y":k,geometry:I,children:j.jsx("meshBasicMaterial",{map:u,transparent:!0})}),j.jsx("mesh",{position:[T,i,D],visible:R,"scale-x":C,"scale-y":Q,geometry:I,children:j.jsx("meshBasicMaterial",{ref:B,map:S,transparent:!0})})]})}));class pd{constructor(y,L,p){this.creator=y,this.clean=p,this.activeItems=[],this.allItems=[],this.items=[];for(let y=0;y<L;y++){const L=this.creator(y);this.items.push(L),this.allItems.push(L)}}getItem(){let y;return 0===this.items.length?(y=this.creator(this.allItems.length),this.allItems.push(y)):y=this.items.pop(),this.activeItems.push(y),y}returnItem(y){var L;null===(L=this.clean)||void 0===L||L.call(this,y);const p=this.activeItems.indexOf(y);p>-1&&(this.activeItems.splice(p,1),this.items.push(y))}returnAllItems(){var y;for(const L of this.activeItems)null===(y=this.clean)||void 0===y||y.call(this,L),this.items.push(L);this.activeItems.length=0}dispose(y=!0){var L;if(y)for(const y of this.allItems)null===(L=this.clean)||void 0===L||L.call(this,y);this.items.length=0,this.activeItems.length=0,this.allItems.length=0}}var Nd=p(587698),td=p(354707);function jd({position:y,isCurrentLine:L,showAllLines:p,texture:N}){const[t,z]=N?[N.image.width/100,N.image.height/100]:[1,1];return j.jsx("group",{position:y,visible:void 0!==N&&L&&!p,children:j.jsxs("mesh",{children:[j.jsx("meshBasicMaterial",{map:N,transparent:!0}),j.jsx("planeGeometry",{args:[1.4*t/z,1.4*z/z]})]})})}function zd(){this.geometry.dispose()}const Od=h.memo((({blurWidth:y,lineWidth:L,points:p,glowLineMaterial:N,glowLineBlurWidth:t,material:z})=>{const O=h.useRef(null),m=h.useRef(null),k=h.useRef(null),[_]=h.useState((()=>new Rk(void 0,void 0,"catmullrom",0)));return h.useEffect((()=>{if(!(p.length&&O.current&&k.current&&m.current))return;k.current.updateMatrixWorld(!0);const y=O.current;_.points=[],p.forEach((L=>{const p=y.worldToLocal(L);_.points.push(p)})),O.current.updateGeometry(),m.current.updateGeometry()}),[_,p]),j.jsxs("group",{ref:k,position:[0,0,1],children:[j.jsx("blurredLine",{dispose:zd,ref:m,args:[_,N,100],blurWidth:t,lineWidth:L}),j.jsx("blurredLine",{dispose:zd,ref:O,args:[_,z,100],blurWidth:y,lineWidth:L})]})}));function hd(y){return y.gamePhase.qualified||y.autoPlay.isRunning}cC({BlurredLine:hi}),cC({BlurredLineMaterial:_i});const md=10,kd=h.memo((({lines:y,getSymbolObject:L,setCurrentLine:p,currentLine:N,getFormattedBet:t,onWinLinesFinished:z,baseBet:O,showAllLines:m,showWinningLines:k})=>{const[_,W]=h.useState([]),[g,C]=h.useState([]);h.useEffect((()=>{!k&&g.length>0&&C(Array(md).fill([]))}),[k,g.length]),h.useEffect((()=>{0!==y.length&&k?C(y.map((y=>{const p=function(y,L,p){return p.payline.map(((y,p)=>{const N=L(p,y);if(!N)throw new Error(`No 3D object for reel ${p}, symbol ${y}`);const t=N.getObjectByName("position-mesh");if(!t)throw new Error("No position mesh for 3D symbol");const j=new fN;return t.getWorldPosition(j),j}))}(0,L,y),N=(p[1].x-p[0].x)/2+.12;return p.unshift(p[0].clone().add(new fN(-N,0,0))),p.push(p[p.length-1].clone().add(new fN(N,0,0))),p})).concat(Array(Math.min(0,md-y.length)).fill([]))):C([])}),[L,k,y]),h.useEffect((()=>{if(!k){const L=y.filter((y=>y.multiplier)).map((y=>function(y){const L=document.createElement("canvas"),p=new dk(L),N=L.getContext("2d");return N?(td.W(N,y,!0),p.source.data=N.canvas,p.needsUpdate=!0,p):p}(t(O,y.multiplier))));W(L)}}),[y,k,O,t]);const Q=h.useMemo((()=>new _i({color:new pj("white"),opacity:1})),[]),T=h.useMemo((()=>new _i({color:new pj("#FC5DED"),opacity:1})),[]);h.useEffect((()=>()=>{T.dispose(),Q.dispose()}),[T,Q]),h.useEffect((()=>{if(k&&g.length>0){const y=Ci.M({});for(let L=0;L<g.length;L++)y.callback((()=>{p(L)})).delay(Nx/1e3),m&&0===L&&y.callback(z);y.callback(z);const L=Ti.l({anim:y,repeat:Number.MAX_VALUE});return()=>{L()}}}),[z,p,g.length,m,k]);const i=h.useMemo((()=>{var L;return[5,[3,-1.3,-6][null===(L=y[N])||void 0===L?void 0:L.payline[2]],5.55]}),[y,N]);return j.jsx("group",{visible:k,children:g.map(((y,L)=>j.jsxs("group",{visible:(m||L===N)&&y.length>0,children:[j.jsx(Od,{lineWidth:.1,blurWidth:.1,points:y,material:Q,glowLineMaterial:T,glowLineBlurWidth:.4},L.toFixed()),j.jsx(jd,{position:i,isCurrentLine:N===L,showAllLines:m,texture:_[N]})]},L.toFixed())))})})),_d=[],Wd=Wi.PA((({onWinLinesFinished:y})=>{var L;const p=ai.Pj(),{mainSlot:N,mainSlotBetStake:t}=p,z=hd(p),O=h.useCallback(((y,L)=>N.getSymbolObject(y,L)),[N]),m=h.useCallback((y=>{N.setCurrentLine(y)}),[N]),k=h.useCallback(((y,L)=>Nd.ej(y*L,{currencySymbol:p.abstractGame.currencySymbol})),[p.abstractGame.currencySymbol]);return j.jsx(kd,{lines:null!==(L=N.payLines)&&void 0!==L?L:_d,getSymbolObject:O,setCurrentLine:m,currentLine:N.currentLine,showAllLines:z,getFormattedBet:k,onWinLinesFinished:y,baseBet:t.baseBet,showWinningLines:N.showResult&&null!==N.payLines&&N.payLines.length>0})}));class gd{constructor(){this.nextPoolId=0,this.symbolsPool={},O.Gn(this,{symbolsPool:O.sH.shallow,onSpawnSymbol:O.XI,onDestroySymbol:O.XI,synchronizeSymbol:O.XI,initializeSymbolsMap:O.XI})}getSymbolsForReel(y){if(Number.isNaN(y))return[];const L=this.symbolsPool[y];if(!L)throw new Error(`No symbols for index ${y}`);return L}onDestroySymbol(y){const L=this.getSymbolByInstance(y);return L?(L.symbol=null,L.id=null,L):null}onSpawnSymbol(y){const L=y.landingPosition.reelIndex;let p=this.getSymbolsForReel(L).find((y=>!y.symbol));return p||(p=this.createSymbol(L),this.symbolsPool[L]=[...this.symbolsPool[L],p]),p.symbol=y,p.id=y.id,p}initializeSymbolsMap(y,L){for(let p=0;p<y;p++)this.symbolsPool[p]=Array(L).fill(null).map((()=>this.createSymbol(p)))}getSymbolByInstance(y){var L;return null!==(L=this.getSymbolsForReel(y.landingPosition.reelIndex).find((L=>L.symbol===y)))&&void 0!==L?L:null}}class Cd extends gd{constructor(y,L){super();const p=L+Jx.uh;this.initializeSymbolsMap(y,p)}onDestroySymbol(y){const L=super.onDestroySymbol(y);return L&&(L.rotationDeg=0),L}onSpawnSymbol(y){const L=super.onSpawnSymbol(y);return L.rotationDeg=-Jx.ye*y.position.y,L}synchronizeSymbol(y){const L=this.getSymbolByInstance(y);L&&(L.rotationDeg=-Jx.ye*y.position.y)}createSymbol(y){return{id:null,symbol:null,reelIndex:y,symbolIndex:this.nextPoolId++,rotationDeg:0}}}var Qd=p(663062);class Td{constructor(y){this.reels=[],this.outcome=[],this.outcomeDimensions=[],this._onReelStartSequenceBegin=cx.lQ,this._onReelStartSequenceEnd=cx.lQ,this._onReelStopSequenceBegin=cx.lQ,this._onReelStopSequenceEnd=cx.lQ,this._onReelStopBounceBegin=cx.lQ,this._onReelStopBounceEnd=cx.lQ,this.onStartSequenceBegin=cx.lQ,this.onStartSequenceEnd=cx.lQ,this.onStopSequenceBegin=cx.lQ,this.onStopSequenceEnd=cx.lQ,this.reelsToExclude=[],this.reelsToTimestep=[],this.name=y}addReel(y){y.id=this.reels.length,this.reels.push(y),y.onStartSequenceBegin=this._onReelStartSequenceBegin,y.onStartSequenceEnd=this._onReelStartSequenceEnd,y.onStopSequenceBegin=this._onReelStopSequenceBegin,y.onStopSequenceEnd=this._onReelStopSequenceEnd,y.onStopBounceBegin=this._onReelStopBounceBegin,y.onStopBounceEnd=this._onReelStopBounceEnd}popReel(){const y=this.reels.pop();if(void 0!==y){const L=this.reelsToTimestep.indexOf(y);L>-1&&this.reelsToTimestep.splice(L,1),y.clear()}return y}removeReel(y){if(y>=this.reels.length||y<0)return;const L=this.reelsToTimestep.indexOf(this.reels[y]);L>-1&&this.reelsToTimestep.splice(L,1);const p=this.reels[y];p.clear(),this.reels.splice(y,1);for(let L=y;L<this.reels.length;++L){const y=this.reels[L];y.id=L,y.updateSymbolLandingPositions()}return p}excludeReels(...y){this.reelsToExclude=[...y]}async startSpin(...y){this.onStartSequenceBegin();const L=[],p=this.reels;for(let N=0;N<p.length;++N)this.reelsToExclude.includes(N)||(p[N].setStartDelay(Number.isNaN(Number(y[N]))?p[N].startDelay:y[N]),this.reelsToTimestep.push(p[N]),L.push(p[N].startSpin()));await Promise.all(L),this.onStartSequenceEnd()}async stopSpin(...y){this.onStopSequenceBegin();const L=[],p=this.reels;for(let N=0;N<p.length;++N)if(!this.reelsToExclude.includes(N))if(cx.yL(y[N]))L.push(p[N].stopSpin(y[N]));else{const t="number"==typeof y[N];p[N].setStopDelay(t?y[N]:p[N].stopDelay),L.push(p[N].stopSpin())}await Promise.all(L),this.onStopSequenceEnd(),this.reelsToExclude=[],this.reelsToTimestep=[]}timestep(y){for(let L=0;L<this.reelsToTimestep.length;L++)this.reelsToTimestep[L].timeStep(y)}clear(y=!1,L=!0){for(const L of this.reels)L.clear(y);y&&this.onDispose(),L&&(this.reels.length=0)}onDispose(){}presentOutcome(){for(let y=0;y<this.reels.length;y++)this.reels[y].presentOutcome()}setOutcome(y,L){if(y.length!==this.reelCount)throw new RangeError(`The provided outcome length must be ${this.reelCount}. Actual value is ${y.length}.`);let p=null==L?void 0:L.dimensions;const N=null==L?void 0:L.colossalSymbolFeature;if(N){void 0!==p&&0!==p.length||(p=this.createDefaultDimensions(y));const{colossalSymbols:L,synchronizeReels:t}=N;this.handleColossalDimensions(p,L),t&&this.synchronizeColossalReels(L)}this.outcome=y,this.outcomeDimensions=null!=p?p:[];for(let L=0;L<this.reelCount;++L){if(0===y[L].length)throw new RangeError(`There is no outcome to set for reel: '${L}`);this.reels[L].setOutcome(y[L],this.outcomeDimensions.length>0?this.outcomeDimensions[L]:[])}}setSymbol(y,L,p=Ax.nU.Visible,N){return this.reels[L.reelIndex].setSymbol(y,L.symbolIndex,p,N)}setSymbolByID(y,L,p=Ax.nU.Visible,N){return this.reels[L.reelIndex].setSymbolByID(y,L.symbolIndex,p,{dimensions:N})}swapSymbol(y,L,p=Ax.nU.Visible,N){return this.reels[L.reelIndex].swapSymbol(y,L.symbolIndex,p,N)}getSymbol(y,L=Ax.nU.Visible){return this.reels[y.reelIndex].getSymbol(y.symbolIndex,L)}forgetSymbol(y,L=Ax.nU.Visible){return this.reels[y.reelIndex].forgetSymbol(y.symbolIndex,L)}printState(){console.log("Printing state for reelset:");for(let y=0;y<this.reels.length;y++)this.reels[y].printState()}get reelCount(){return this.reels.length}getReel(y){return this.reels[y]}setSpinMode(y){for(let L=0;L<this.reels.length;L++)this.reels[L].currentSpinMechanic.spinMode=y}setSpinModeForReel(y,L){this.reels[L].currentSpinMechanic.spinMode=y}setReelStripsSymbols(y){if(y.length!==this.reelCount)throw new RangeError(`The provided reel strips length must be ${this.reelCount}`);for(let L=0;L<y.length;L++)this.setReelStripSymbolsForReel(y[L],L)}setReelStripSymbolsForReel(y,L){const p=this.reels[L];p.isMaster&&p.reelStrip.setSymbols(y)}setReelStripsDimensions(y){if(y.length!==this.reelCount&&y.length>0)throw new RangeError(`The provided reel strips length must be ${this.reelCount}, or 0 if the reel is supposed to have homogenous dimensions.`);for(let L=0;L<y.length;L++)this.setReelStripDimensionsForReel(y[L],L)}setReelStripDimensionsForReel(y,L){const p=this.reels[L];p.isMaster&&p.reelStrip.setDimensions(y)}set onReelStartSequenceBegin(y){this._onReelStartSequenceBegin=y;for(let y=0;y<this.reelCount;++y)this.reels[y].onStartSequenceBegin=this._onReelStartSequenceBegin}get onReelStartSequenceBegin(){return this._onReelStartSequenceBegin}set onReelStartSequenceEnd(y){this._onReelStartSequenceEnd=y;for(let y=0;y<this.reelCount;++y)this.reels[y].onStartSequenceEnd=this._onReelStartSequenceEnd}get onReelStartSequenceEnd(){return this._onReelStartSequenceEnd}set onReelStopSequenceBegin(y){this._onReelStopSequenceBegin=y;for(let y=0;y<this.reelCount;++y)this.reels[y].onStopSequenceBegin=this._onReelStopSequenceBegin}get onReelStopSequenceBegin(){return this._onReelStopSequenceBegin}set onReelStopSequenceEnd(y){this._onReelStopSequenceEnd=y;for(let y=0;y<this.reelCount;++y)this.reels[y].onStopSequenceEnd=this.onReelStopSequenceEnd}get onReelStopSequenceEnd(){return this._onReelStopSequenceEnd}set onReelStopBounceBegin(y){this._onReelStopBounceBegin=y;for(let y=0;y<this.reelCount;++y)this.reels[y].onStopBounceBegin=this._onReelStopBounceBegin}get onReelStopBounceBegin(){return this._onReelStopBounceBegin}set onReelStopBounceEnd(y){this._onReelStopBounceEnd=y;for(let y=0;y<this.reelCount;++y)this.reels[y].onStopBounceEnd=this._onReelStopBounceEnd}get onReelStopBounceEnd(){return this._onReelStopBounceEnd}createDefaultDimensions(y){const L=[];for(let p=0;p<this.reels.length;p++){const N=[];for(let L=0;L<y[p].length;L++)N.push(this.reels[p].currentSpinMechanic.defaultSymbolDimensions());L.push(N)}return L}handleColossalDimensions(y,L){for(const p of L){const{position:L,size:N}=p,{reelIndex:t,symbolIndex:j}=L;for(let L=0;L<p.size.x;L++)for(let z=0;z<p.size.y;z++)y[t+L][j+z]={x:0===L&&0===z?N.x:0,y:1,colossalData:{colossalSize:{...p.size},positionInColossalSpace:{x:L,y:z}}}}}synchronizeColossalReels(y){const L=[];for(const p of y){const{position:y,size:N}=p;for(let p=y.reelIndex;p<y.reelIndex+N.x;p++)L.includes(p)||L.push(p)}if(0===L.length)return;let p=0;for(let y=1;y<L.length;y++)if(L[y]-L[y-1]>1){const N=this.getReel(L[p]),t=L.slice(p+1,y).map((y=>this.getReel(y)));N.synchronize(t,Qd.l.Timers),p=y}else if(y===L.length-1){const y=this.getReel(L[p]),N=L.slice(p+1,L.length).map((y=>this.getReel(y)));y.synchronize(N,Qd.l.Timers)}}}var id=p(652958);class Dd extends Td{async stopSpin(...y){const L=[...this.reelsToExclude];for(let y=0;y<this.reels.length;y++)this.getReel(y).currentSpinMechanic.currentSpinSequence===id.J.Idle&&this.reelsToExclude.push(y);const p=super.stopSpin(...y);return this.reelsToExclude=L,p}quickStopSpin(){const y=[],L=this.reelCount;for(let p=0;p<L;p++){const L=this.getReel(p),N=L.stopDelay,t=[];L.setStopDelay(0),t.push((()=>L.setStopDelay(N)));const j=()=>t.forEach((y=>y()));y.push(j)}return this.stopSpin().then((()=>y.forEach((y=>y()))))}}class wd extends Ax.X3{constructor(y,L){super(y,{preBufferSize:1,postBufferSize:1,reelStrip:new sx.x}),this.spinApi=L}initializeSymbol(y){y.setSpinApi(this.spinApi)}}class xd{constructor(y,L){this.buffer=[],this.ctor="ctor"in y?y.ctor:L=>new y(L),this.symbolID=L}create(){return this.ctor(this.symbolID)}pop(){let y=this.buffer.pop();return void 0===y&&(y=this.create()),y}push(y){y.position={x:NaN,y:NaN},y.landingPosition={reelIndex:NaN,symbolIndex:NaN},y.isDead=!1,y.isOutcome=!1,this.buffer.push(y)}clear(){const y=this.buffer;this.buffer=[];for(const L of y)null==L||L.onDespawn()}}class dd{constructor(){this.pools=[]}initializePools(y,L,p=[]){for(let N=0;N<L;++N){const L=p.find((y=>y.symbolID===N));void 0===L?this.pools.push(new xd(y,N)):this.pools.push(new xd(L.ctor,N))}}push(y){this.pools[y.id].push(y)}pop(y){return this.pools[y].pop()}clear(){const y=this.pools;this.pools=[];for(const L of y)L.clear()}}var od=p(415215);class Ud{constructor(){this.reelsets=new Map,this._poolGroup=new dd,this.activeReelsets=[]}get poolGroup(){return this._poolGroup}addReelset(y){this.reelsets.set(y.name,y)}getReelset(y){if(!this.reelsets.has(y)||void 0===this.reelsets.get(y))throw new Error(`No reelset with the name ${y} exists.`);return this.reelsets.get(y)}activateReelset(y,L){const p=this.getReelset(y);if(!this.activeReelsets.includes(p)){if(this.activeReelsets.push(p),void 0!==L){const y=this.getReelset(L);p.setOutcome(y.outcome,{dimensions:y.outcomeDimensions})}p.presentOutcome()}}deactivateReelset(y,L=!0){const p=this.getActiveReelset(y),N=this.activeReelsets.indexOf(p);this.activeReelsets[N].clear(!1,L),this.activeReelsets.splice(N,1)}clear(){for(const y of this.reelsets)y[1].clear(!0);this.activeReelsets=[],this.reelsets.clear()}getActiveReelset(y){if(0===this.activeReelsets.length)throw new Error("Trying to get an active reelset when there are no active.");if(void 0===y){if(this.activeReelsets.length>1)throw new Error("A reelset name has to be provided when there are more than one reelset active");return this.activeReelsets[0]}const L=this.getReelset(y);if(-1===this.activeReelsets.indexOf(L))throw new Error(`Trying to get active reelset with name '${y}' but it's not active.`);return L}timestep(y){const L=cx.fP(y);for(let y=0;y<this.activeReelsets.length;y++)this.activeReelsets[y].timestep(L);od.C.timestep(L)}createSymbol(y,L){const p=this.poolGroup.pop(y);return p.dimensions=void 0===L?{x:1,y:1}:L,p.onSpawn(),p}destroySymbol(y){y.onDespawn(),this.poolGroup.push(y)}}var Id=p(821737);class Vd{constructor(y){this.dimensions={x:0,y:0},this.isDead=!1,this.isOutcome=!1,this.key=Math.random(),this.landingPosition={reelIndex:0,symbolIndex:0},this.position={x:0,y:0},this.spinApi=null,this.id=y}setSpinApi(y){this.spinApi=y}land(){}onDespawn(){var y;null===(y=this.spinApi)||void 0===y||y.onDestroySymbol(this)}onSpawn(){var y;null===(y=this.spinApi)||void 0===y||y.onSpawnSymbol(this)}synchronize(){var y;null===(y=this.spinApi)||void 0===y||y.synchronizeSymbol(this)}}function Fd(y,L,p){const[N]=h.useState((()=>new Ud)),[t,j]=h.useState(!1),[z]=h.useState((()=>new Dd("main"))),O=h.useRef(Promise.resolve()),m=h.useRef(Promise.resolve());h.useEffect((()=>(N.addReelset(z),()=>N.clear())),[z,N]),h.useEffect((()=>{for(let t=0;t<y;t++){const y=new wd(N.poolGroup,L);y.addSpinMechanic(new Id.e(y,p.config)),z.addReel(y)}const t=Object.values(p.symbols).filter((y=>"number"==typeof y)).length;return N.poolGroup.initializePools(Vd,t),()=>{z.clear(!0),N.poolGroup.clear()}}),[p.config,p.symbols,z,y,L,N.poolGroup]);const k=h.useCallback((()=>(t||(j(!0),O.current=z.startSpin()),O.current)),[t,z]),_=h.useCallback(((y=!1)=>{if(!t)return m.current;let L;return L=y?z.quickStopSpin():z.stopSpin(),m.current=L.then((()=>j(!1))),m.current}),[t,z]),W=h.useCallback((y=>{z.setOutcome(y)}),[z]);return{engine:N,reelSet:z,startSpinning:k,stopSpinning:_,setOutcome:W}}const ud=Wi.PA((({spinConfig:y,visible:L})=>{const p=ai.Pj(),{abstractGame:N,autoPlay:t,denominations:z,mainSlot:O,gamePhase:m,gameTexture:k}=p,{reels:_,rows:W,reelStrip:g,initialSymbols:C,nextRowSymbols:Q,nudgeReelIds:T,setLandedReelWithScatter:i}=O,{phase:D,isScatterDisabled:w,isSpinning:x}=z,d=h.useMemo((()=>new Cd(_,W)),[_,W]),[o,U]=h.useState(!1),I=h.useRef(!1),[V,F]=h.useState(),u=function(){const[y,L]=h.useState();return h.useEffect((()=>{const y=function(){const y=new pd((()=>new dx),15,L);var L;const p=Object.keys(hx).reduce(((y,L)=>(y[L]=new dx,y)),{});return{getStaticMaterial:y=>p[y],getMaterial:()=>y.getItem(),returnMaterial(L){for(const p of y.allItems)if(p.id===L.id){y.returnItem(L);break}},dispose(){const L=Object.values(p);for(const y of L)y.dispose();y.returnAllItems();for(const L of y.allItems)L.dispose();y.dispose(!1)}}}();return L(y),()=>{y.dispose(),L(void 0)}}),[]),y}(),S=h.useRef(null),B=h.useCallback((()=>{L&&t.isRunning&&N.setLifecycleOpenBets()}),[N,t.isRunning,L]),R=Fd(_,d,{config:y,symbols:hx}),{engine:Y,reelSet:E}=R,P=h.useRef([]);P.current=Q.slice();const l=h.useCallback((y=>Vx(P.current[y])),[]),M=function(y){const L=y.cache[sT.MainSlotSymbols],p=y.cache[sT.SymbolsS0Idle],N=y.cache[sT.SymbolsSIdle],t=y.cache[sT.SymbolsWWin],j=h.useMemo((()=>{if(!(L&&p&&N&&t))return null;for(const y of[L,p,N,t])y.encoding=nL,y.wrapS=Iy;const y=function(y,L,p){const N=ix(mx,y);return{[hx.W]:{idle:{type:Dx.Static,source:N[_x.WIdle].texture,frame:N[_x.WIdle].frame},win:{type:Dx.Animation,source:p,frames:lD(Cx)}},[hx.Q]:{idle:{type:Dx.Static,source:N[_x.QIdle].texture,frame:N[_x.QIdle].frame},win:{type:Dx.Static,source:N[_x.QWin].texture,frame:N[_x.QWin].frame}},[hx.J]:{idle:{type:Dx.Static,source:N[_x.JIdle].texture,frame:N[_x.JIdle].frame},win:{type:Dx.Static,source:N[_x.JWin].texture,frame:N[_x.JWin].frame}},[hx.A]:{idle:{type:Dx.Static,source:N[_x.AIdle].texture,frame:N[_x.AIdle].frame},win:{type:Dx.Static,source:N[_x.AWin].texture,frame:N[_x.AWin].frame}},[hx.B]:{idle:{type:Dx.Static,source:N[_x.BIdle].texture,frame:N[_x.BIdle].frame},win:{type:Dx.Static,source:N[_x.BWin].texture,frame:N[_x.BWin].frame}},[hx.C]:{idle:{type:Dx.Static,source:N[_x.CIdle].texture,frame:N[_x.CIdle].frame},win:{type:Dx.Static,source:N[_x.CWin].texture,frame:N[_x.CWin].frame}},[hx.K]:{idle:{type:Dx.Static,source:N[_x.KIdle].texture,frame:N[_x.KIdle].frame},win:{type:Dx.Static,source:N[_x.KWin].texture,frame:N[_x.KWin].frame}},[hx.S]:{idle:{type:Dx.Static,source:L.SIdle},win:{type:Dx.Static,source:L.SIdle}},...[hx.S2,hx.S3,hx.S5,hx.S10].reduce(((y,p)=>(y[p]={idle:{type:Dx.Static,source:L.S0Idle},win:{type:Dx.Static,source:L.S0Idle}},y)),{})}}(L,{S0Idle:p,SIdle:N},t);return y}),[L,p,N,t]);return h.useEffect((()=>()=>{if(!j)return;const y=Object.values(j);for(const L of y)L.idle.source.dispose(),L.win.source.dispose()}),[j]),j}(k),f=h.useRef(x);f.current=x;const a=rx(p);h.useEffect((()=>{var N;if(!o&&E&&g.length&&C.length===_&&L){for(let L=0;L<_;L++){const N=E.getReel(L),t=px(L,O.minSpinTime,y.reelStopDelay,y.reelStopDelayMultiplier);N.setStopDelay(t),N.onStartSequenceBegin=y=>{const L=N.currentSpinMechanic.id===Zx,t=y+1;p.sound.triggerEvent(L?KD.P.StickyReelStart:KD.P.ReelAccelerationStart,t)},N.onStopBounceBegin=y=>{const L=N.currentSpinMechanic.id===Zx,t=rx(p),j=O.scatterMultipliers.find((L=>L.reel===y)),z=y+1;t?!1===I.current&&(p.sound.triggerEvent(KD.P.ReelBounceQuickStop,Jx.vy-y),I.current=!0):(p.sound.triggerEvent(KD.P.ReelBounce,z),L&&p.sound.triggerEvent(KD.P.StickyReelBounce,z)),O.nearWinReelIds.includes(z)&&!t&&p.sound.triggerEvent(KD.P.NearWin,z+1),j&&!f.current&&i(y)},F({normalSpin:0,nudgeSpin:N.addSpinMechanic(new yd(N,{...y,spinAmount:1,nudgeVelocity:450,getNextSymbol:()=>l(L)})),denominationSwitchSpin:N.addSpinMechanic(new bx(N,ew))})}Y.activateReelset(E.name),E.setReelStripsSymbols(g.map(Fx)),E.setOutcome(null!==(N=z.activeDenominationGrid)&&void 0!==N?N:C.map(Fx)),E.presentOutcome(),U(!0)}}),[Y,E,g,d,l,C,o,_,O.minSpinTime,O.teaseReelIds,O.nudgeReelIds,O.scatterMultipliers.length,y,O.nearWinReelIds,z.activeDenominationGrid,p,L,i,O.scatterMultipliers,a]),h.useEffect((()=>{if(m.mainSlotPhase===bw.WI.Result&&(I.current=!1),void 0!==V&&m.mainSlotPhase!==bw.WI.ResponseReceived&&m.mainSlotPhase!==bw.WI.StopSpinning&&m.mainSlotPhase!==bw.WI.Transition&&m.mainSlotPhase!==bw.WI.Error&&D===Xx.Idle)for(let y=0;y<E.reelCount;y++){const L=E.getReel(y);T.includes(y)&&"FeatureBuy"!==O.spinMode&&!w?L.setCurrentMechanics(V.nudgeSpin):L.setCurrentMechanics(V.normalSpin)}}),[m.mainSlotPhase,E,E.reelCount,Q,T,V,D,O.spinMode,w]),h.useEffect((()=>{L||U(!1)}),[L]);const H=fi(h.useMemo((()=>Object.values(Ux.mJ).filter((y=>y>1))),[]),KT.WithXSlotSymbol,k);h.useEffect((()=>{o&&O.grid.length>0&&E.setOutcome(O.grid.map(Fx))}),[E,O.grid,o]),PQ(((y,L)=>{R.engine.timestep(1e3*L)})),h.useEffect((()=>{let y=0;const L=1e4;if(!N.isPageVisible&&m.mainSlotPhase===bw.WI.Transition){let p=performance.now();clearInterval(y),y=setInterval((()=>{R.engine.timestep(performance.now()-p),p=performance.now()}),L)}return()=>{clearInterval(y)}}),[R.engine,N.isPageVisible,m.mainSlotPhase]);const X={reelPositionX:4.9,reelScale:1/7.5,slot:new fN(-.65,.6,0)},J=h.useCallback((y=>{var L;const p=null!==(L=function(y){if(ux(y))return Ux.mJ[y]}(y))&&void 0!==L?L:0;if(p>1)return null==H?void 0:H[`${p}`]}),[H]),{drumScaleX:r,drumScaleY:G,drumYOffset:$}=Mx;return O.setAreReelsReady(o),j.jsx("group",{visible:E&&o&&L,ref:S,children:j.jsxs("group",{scale:X.reelScale,position:X.slot,children:[M&&j.jsx("group",{scale:[r,G,.5],position:[X.reelPositionX,$,3],children:j.jsx(ex,{symbolMaterialPool:u,textures:M,symbolsPool:d,spinEngine:R,spinMechanics:V,reelsCount:_,spinConfig:y,getMultiplierTexture:J})}),j.jsxs("group",{position:[5,0,6],children:[j.jsx(Ld,{}),j.jsx(vw,{})]}),j.jsx("group",{position:[0,0,2],children:j.jsx(Wd,{onWinLinesFinished:B})})]})})})),Sd=({visible:y})=>j.jsxs("group",{children:[j.jsx(ud,{visible:y,spinConfig:bw.iJ}),j.jsx("ambientLight",{intensity:.25}),j.jsx("pointLight",{intensity:.6,position:[0,9,30]})]}),Bd=Wi.PA((({renderPriority:y,visible:L})=>{const{mainSlot:p,slotLayout:N}=ai.Pj(),t=h.useMemo((()=>new jm),[]);return PQ((({gl:y,camera:L,size:j})=>{y.autoClear=!1;const z=0!==p.renderRegion.x||0!==p.renderRegion.y;if(z&&L.setViewOffset(j.width,j.height,p.renderRegion.x,p.renderRegion.y,j.width,j.height),"aspect"in L){const{x:p,y:t,height:j,width:z}=N.mainSlotDimensions;y.setViewport(p,t,z,j),L.aspect=z/j,L.updateProjectionMatrix()}y.clearDepth(),y.render(t,L),z&&L.clearViewOffset()}),y),AQ(j.jsx(Sd,{visible:L}),t)}));var Rd=p(278982);function Yd(){var y=Object.create(null);function L(N,t){var j=N.id,z=N.name,O=N.dependencies;void 0===O&&(O=[]);var h=N.init;void 0===h&&(h=function(){});var m=N.getTransferables;if(void 0===m&&(m=null),!y[j])try{O=O.map((function(p){return p&&p.isWorkerModule&&(L(p,(function(y){if(y instanceof Error)throw y})),p=y[p.id].value),p})),h=p("<"+z+">.init",h),m&&(m=p("<"+z+">.getTransferables",m));var k=null;"function"==typeof h?k=h.apply(void 0,O):console.error("worker module init function failed to rehydrate"),y[j]={id:j,value:k,getTransferables:m},t(k)}catch(y){y&&y.noLog||console.error(y),t(y)}}function p(y,L){var p=void 0;self.troikaDefine=function(y){return p=y};var N=URL.createObjectURL(new Blob(["/** "+y.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+L+"\n)"],{type:"application/javascript"}));try{importScripts(N)}catch(y){console.error(y)}return URL.revokeObjectURL(N),delete self.troikaDefine,p}self.addEventListener("message",(function(p){var N=p.data,t=N.messageId,j=N.action,z=N.data;try{"registerModule"===j&&L(z,(function(y){y instanceof Error?postMessage({messageId:t,success:!1,error:y.message}):postMessage({messageId:t,success:!0,result:{isCallable:"function"==typeof y}})})),"callModule"===j&&function(L,p){var N,t=L.id,j=L.args;y[t]&&"function"==typeof y[t].value||p(new Error("Worker module "+t+": not found or its 'init' did not return a function"));try{var z=(N=y[t]).value.apply(N,j);z&&"function"==typeof z.then?z.then(O,(function(y){return p(y instanceof Error?y:new Error(""+y))})):O(z)}catch(y){p(y)}function O(L){try{var N=y[t].getTransferables&&y[t].getTransferables(L);N&&Array.isArray(N)&&N.length||(N=void 0),p(L,N)}catch(y){console.error(y),p(y)}}}(z,(function(y,L){y instanceof Error?postMessage({messageId:t,success:!1,error:y.message}):postMessage({messageId:t,success:!0,result:y},L||void 0)}))}catch(y){postMessage({messageId:t,success:!1,error:y.stack})}}))}var Ed=function(){var y=!1;if("undefined"!=typeof window&&void 0!==window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),y=!0}catch(y){"undefined"!=typeof process&&"production"=="test"||console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+y.message+"]")}return Ed=function(){return y},y},Pd=0,ld=0,Md=!1,fd=Object.create(null),ad=Object.create(null),Hd=Object.create(null);function Xd(y){if(!(y&&"function"==typeof y.init||Md))throw new Error("requires `options.init` function");var L=y.dependencies,p=y.init,N=y.getTransferables,t=y.workerId;if(!Ed())return function(y){var L=function(){for(var y=[],p=arguments.length;p--;)y[p]=arguments[p];return L._getInitResult().then((function(L){if("function"==typeof L)return L.apply(void 0,y);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return L._getInitResult=function(){var p=y.dependencies,N=y.init;p=Array.isArray(p)?p.map((function(y){return y&&y._getInitResult?y._getInitResult():y})):[];var t=Promise.all(p).then((function(y){return N.apply(null,y)}));return L._getInitResult=function(){return t},t},L}(y);null==t&&(t="#default");var j="workerModule"+ ++Pd,z=y.name||j,O=null;function h(){for(var y=[],L=arguments.length;L--;)y[L]=arguments[L];if(!O){O=rd(t,"registerModule",h.workerModuleData);var p=function(){O=null,ad[t].delete(p)};(ad[t]||(ad[t]=new Set)).add(p)}return O.then((function(L){if(L.isCallable)return rd(t,"callModule",{id:j,args:y});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return L=L&&L.map((function(y){return"function"!=typeof y||y.workerModuleData||(Md=!0,y=Xd({workerId:t,name:"<"+z+"> function dependency: "+y.name,init:"function(){return (\n"+Jd(y)+"\n)}"}),Md=!1),y&&y.workerModuleData&&(y=y.workerModuleData),y})),h.workerModuleData={isWorkerModule:!0,id:j,name:z,dependencies:L,init:Jd(p),getTransferables:N&&Jd(N)},h}function Jd(y){var L=y.toString();return!/^function/.test(L)&&/^\w+\s*\(/.test(L)&&(L="function "+L),L}function rd(y,L,p){return new Promise((function(N,t){var j=++ld;Hd[j]=function(y){y.success?N(y.result):t(new Error("Error in worker "+L+" call: "+y.error))},function(y){var L=fd[y];if(!L){var p=Jd(Yd);(L=fd[y]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+y.replace(/\*/g,"")+" **/\n\n;("+p+")()"],{type:"application/javascript"})))).onmessage=function(y){var L=y.data,p=L.messageId,N=Hd[p];if(!N)throw new Error("WorkerModule response with empty or unknown messageId");delete Hd[p],N(L)}}return L}(y).postMessage({messageId:j,action:L,data:p})}))}function Gd(){var y=function(y){function L(y,L,p,N,t,j,z,O,h,m){var k=1-h;m.x=k*k*k*y+3*k*k*h*p+3*k*h*h*t+h*h*h*z,m.y=k*k*k*L+3*k*k*h*N+3*k*h*h*j+h*h*h*O}function p(y,L){for(var p,N,t,j,z,O=/([MLQCZ])([^MLQCZ]*)/g;p=O.exec(y);){var h=p[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((function(y){return parseFloat(y)}));switch(p[1]){case"M":j=N=h[0],z=t=h[1];break;case"L":h[0]===j&&h[1]===z||L("L",j,z,j=h[0],z=h[1]);break;case"Q":L("Q",j,z,j=h[2],z=h[3],h[0],h[1]);break;case"C":L("C",j,z,j=h[4],z=h[5],h[0],h[1],h[2],h[3]);break;case"Z":j===N&&z===t||L("L",j,z,N,t)}}}function N(y,N,t){void 0===t&&(t=16);var j={x:0,y:0};p(y,(function(y,p,z,O,h,m,k,_,W){switch(y){case"L":N(p,z,O,h);break;case"Q":for(var g=p,C=z,Q=1;Q<t;Q++)w=z,x=k,d=h,void 0,I=1-(o=Q/(t-1)),(U=j).x=I*I*p+2*I*o*m+o*o*O,U.y=I*I*w+2*I*o*x+o*o*d,N(g,C,j.x,j.y),g=j.x,C=j.y;break;case"C":for(var T=p,i=z,D=1;D<t;D++)L(p,z,m,k,_,W,O,h,D/(t-1),j),N(T,i,j.x,j.y),T=j.x,i=j.y}var w,x,d,o,U,I}))}var t="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",j="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",z=new WeakMap,O={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function h(y,L){var p=y.getContext?y.getContext("webgl",O):y,N=z.get(p);if(!N){var t="undefined"!=typeof WebGL2RenderingContext&&p instanceof WebGL2RenderingContext,j={},h={},m={},k=-1,_=[];function W(y){var L=j[y];if(!L&&!(L=j[y]=p.getExtension(y)))throw new Error(y+" not supported");return L}function g(y,L){var N=p.createShader(L);return p.shaderSource(N,y),p.compileShader(N),N}function C(y,L,N,j){if(!h[y]){var z={},O={},m=p.createProgram();p.attachShader(m,g(L,p.VERTEX_SHADER)),p.attachShader(m,g(N,p.FRAGMENT_SHADER)),p.linkProgram(m),h[y]={program:m,transaction:function(y){p.useProgram(m),y({setUniform:function(y,L){for(var N=[],t=arguments.length-2;t-- >0;)N[t]=arguments[t+2];var j=O[L]||(O[L]=p.getUniformLocation(m,L));p["uniform"+y].apply(p,[j].concat(N))},setAttribute:function(y,L,N,j,O){var h=z[y];h||(h=z[y]={buf:p.createBuffer(),loc:p.getAttribLocation(m,y),data:null}),p.bindBuffer(p.ARRAY_BUFFER,h.buf),p.vertexAttribPointer(h.loc,L,p.FLOAT,!1,0,0),p.enableVertexAttribArray(h.loc),t?p.vertexAttribDivisor(h.loc,j):W("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(h.loc,j),O!==h.data&&(p.bufferData(p.ARRAY_BUFFER,O,N),h.data=O)}})}}}h[y].transaction(j)}function Q(y,L){k++;try{p.activeTexture(p.TEXTURE0+k);var N=m[y];N||(N=m[y]=p.createTexture(),p.bindTexture(p.TEXTURE_2D,N),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST)),p.bindTexture(p.TEXTURE_2D,N),L(N,k)}finally{k--}}function T(y,L,N){var t=p.createFramebuffer();_.push(t),p.bindFramebuffer(p.FRAMEBUFFER,t),p.activeTexture(p.TEXTURE0+L),p.bindTexture(p.TEXTURE_2D,y),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,y,0);try{N(t)}finally{p.deleteFramebuffer(t),p.bindFramebuffer(p.FRAMEBUFFER,_[--_.length-1]||null)}}function i(){j={},h={},m={},k=-1,_.length=0}p.canvas.addEventListener("webglcontextlost",(function(y){i(),y.preventDefault()}),!1),z.set(p,N={gl:p,isWebGL2:t,getExtension:W,withProgram:C,withTexture:Q,withTextureFramebuffer:T,handleContextLoss:i})}L(N)}function m(y,L,p,N,z,O,m,k){void 0===m&&(m=15),void 0===k&&(k=null),h(y,(function(y){var h=y.gl,_=y.withProgram;(0,y.withTexture)("copy",(function(y,W){h.texImage2D(h.TEXTURE_2D,0,h.RGBA,z,O,0,h.RGBA,h.UNSIGNED_BYTE,L),_("copy",t,j,(function(y){var L=y.setUniform;(0,y.setAttribute)("aUV",2,h.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),L("1i","image",W),h.bindFramebuffer(h.FRAMEBUFFER,k||null),h.disable(h.BLEND),h.colorMask(8&m,4&m,2&m,1&m),h.viewport(p,N,z,O),h.scissor(p,N,z,O),h.drawArrays(h.TRIANGLES,0,3)}))}))}))}var k=Object.freeze({__proto__:null,withWebGLContext:h,renderImageData:m,resizeWebGLCanvasWithoutClearing:function(y,L,p){var N=y.width,t=y.height;h(y,(function(j){var z=j.gl,O=new Uint8Array(N*t*4);z.readPixels(0,0,N,t,z.RGBA,z.UNSIGNED_BYTE,O),y.width=L,y.height=p,m(z,O,0,0,N,t)}))}});function _(y,L,p,t,j,z){void 0===z&&(z=1);var O=new Uint8Array(y*L),h=t[2]-t[0],m=t[3]-t[1],k=[];N(p,(function(y,L,p,N){k.push({x1:y,y1:L,x2:p,y2:N,minX:Math.min(y,p),minY:Math.min(L,N),maxX:Math.max(y,p),maxY:Math.max(L,N)})})),k.sort((function(y,L){return y.maxX-L.maxX}));for(var _=0;_<y;_++)for(var W=0;W<L;W++){var g=T(t[0]+h*(_+.5)/y,t[1]+m*(W+.5)/L),Q=Math.pow(1-Math.abs(g)/j,z)/2;g<0&&(Q=1-Q),Q=Math.max(0,Math.min(255,Math.round(255*Q))),O[W*y+_]=Q}return O;function T(y,L){for(var p=1/0,N=1/0,t=k.length;t--;){var j=k[t];if(j.maxX+N<=y)break;if(y+N>j.minX&&L-N<j.maxY&&L+N>j.minY){var z=C(y,L,j.x1,j.y1,j.x2,j.y2);z<p&&(p=z,N=Math.sqrt(p))}}return function(y,L){for(var p=0,N=k.length;N--;){var t=k[N];if(t.maxX<=y)break;t.y1>L!=t.y2>L&&y<(t.x2-t.x1)*(L-t.y1)/(t.y2-t.y1)+t.x1&&(p+=t.y1<t.y2?1:-1)}return 0!==p}(y,L)&&(N=-N),N}}function W(y,L,p,N,t,j,z,O,h,m){void 0===j&&(j=1),void 0===O&&(O=0),void 0===h&&(h=0),void 0===m&&(m=0),g(y,L,p,N,t,j,z,null,O,h,m)}function g(y,L,p,N,t,j,z,O,h,k,W){void 0===j&&(j=1),void 0===h&&(h=0),void 0===k&&(k=0),void 0===W&&(W=0);for(var g=_(y,L,p,N,t,j),C=new Uint8Array(4*g.length),Q=0;Q<g.length;Q++)C[4*Q+W]=g[Q];m(z,C,h,k,y,L,1<<3-W,O)}function C(y,L,p,N,t,j){var z=t-p,O=j-N,h=z*z+O*O,m=h?Math.max(0,Math.min(1,((y-p)*z+(L-N)*O)/h)):0,k=y-(p+m*z),_=L-(N+m*O);return k*k+_*_}var Q=Object.freeze({__proto__:null,generate:_,generateIntoCanvas:W,generateIntoFramebuffer:g}),T="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",i="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",D="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",w=new Float32Array([0,0,2,0,0,2]),x=null,d=!1,o={},U=new WeakMap;function I(y){if(!d&&!S(y))throw new Error("WebGL generation not supported")}function V(y,L,p,N,t,j,z){if(void 0===j&&(j=1),void 0===z&&(z=null),!z&&!(z=x)){var O="function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!=typeof document?document.createElement("canvas"):null;if(!O)throw new Error("OffscreenCanvas or DOM canvas not supported");z=x=O.getContext("webgl",{depth:!1})}I(z);var m=new Uint8Array(y*L*4);h(z,(function(z){var O=z.gl,h=z.withTexture,k=z.withTextureFramebuffer;h("readable",(function(z,h){O.texImage2D(O.TEXTURE_2D,0,O.RGBA,y,L,0,O.RGBA,O.UNSIGNED_BYTE,null),k(z,h,(function(z){u(y,L,p,N,t,j,O,z,0,0,0),O.readPixels(0,0,y,L,O.RGBA,O.UNSIGNED_BYTE,m)}))}))}));for(var k=new Uint8Array(y*L),_=0,W=0;_<m.length;_+=4)k[W++]=m[_];return k}function F(y,L,p,N,t,j,z,O,h,m){void 0===j&&(j=1),void 0===O&&(O=0),void 0===h&&(h=0),void 0===m&&(m=0),u(y,L,p,N,t,j,z,null,O,h,m)}function u(y,L,p,j,z,O,m,k,_,W,g){void 0===O&&(O=1),void 0===_&&(_=0),void 0===W&&(W=0),void 0===g&&(g=0),I(m);var C=[];N(p,(function(y,L,p,N){C.push(y,L,p,N)})),C=new Float32Array(C),h(m,(function(p){var N=p.gl,h=p.isWebGL2,m=p.getExtension,Q=p.withProgram,x=p.withTexture,d=p.withTextureFramebuffer,o=p.handleContextLoss;if(x("rawDistances",(function(p,x){y===p._lastWidth&&L===p._lastHeight||N.texImage2D(N.TEXTURE_2D,0,N.RGBA,p._lastWidth=y,p._lastHeight=L,0,N.RGBA,N.UNSIGNED_BYTE,null),Q("main",T,i,(function(t){var k=t.setAttribute,_=t.setUniform,W=!h&&m("ANGLE_instanced_arrays"),g=!h&&m("EXT_blend_minmax");k("aUV",2,N.STATIC_DRAW,0,w),k("aLineSegment",4,N.DYNAMIC_DRAW,1,C),_.apply(void 0,["4f","uGlyphBounds"].concat(j)),_("1f","uMaxDistance",z),_("1f","uExponent",O),d(p,x,(function(p){N.enable(N.BLEND),N.colorMask(!0,!0,!0,!0),N.viewport(0,0,y,L),N.scissor(0,0,y,L),N.blendFunc(N.ONE,N.ONE),N.blendEquationSeparate(N.FUNC_ADD,h?N.MAX:g.MAX_EXT),N.clear(N.COLOR_BUFFER_BIT),h?N.drawArraysInstanced(N.TRIANGLES,0,3,C.length/4):W.drawArraysInstancedANGLE(N.TRIANGLES,0,3,C.length/4)}))})),Q("post",t,D,(function(p){p.setAttribute("aUV",2,N.STATIC_DRAW,0,w),p.setUniform("1i","tex",x),N.bindFramebuffer(N.FRAMEBUFFER,k),N.disable(N.BLEND),N.colorMask(0===g,1===g,2===g,3===g),N.viewport(_,W,y,L),N.scissor(_,W,y,L),N.drawArrays(N.TRIANGLES,0,3)}))})),N.isContextLost())throw o(),new Error("webgl context lost")}))}function S(y){var L=y&&y!==x?y.canvas||y:o,p=U.get(L);if(void 0===p){d=!0;var N=null;try{var t=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],j=V(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,y);p=j&&t.length===j.length&&j.every((function(y,L){return y===t[L]})),p||(N="bad trial run results",console.info(t,j))}catch(y){p=!1,N=y.message}N&&console.warn("WebGL SDF generation not supported:",N),d=!1,U.set(L,p)}return p}var B=Object.freeze({__proto__:null,generate:V,generateIntoCanvas:F,generateIntoFramebuffer:u,isSupported:S});return y.forEachPathCommand=p,y.generate=function(y,L,p,N,t,j){void 0===t&&(t=Math.max(N[2]-N[0],N[3]-N[1])/2),void 0===j&&(j=1);try{return V.apply(B,arguments)}catch(y){return console.info("WebGL SDF generation failed, falling back to JS",y),_.apply(Q,arguments)}},y.generateIntoCanvas=function(y,L,p,N,t,j,z,O,h,m){void 0===t&&(t=Math.max(N[2]-N[0],N[3]-N[1])/2),void 0===j&&(j=1),void 0===O&&(O=0),void 0===h&&(h=0),void 0===m&&(m=0);try{return F.apply(B,arguments)}catch(y){return console.info("WebGL SDF generation failed, falling back to JS",y),W.apply(Q,arguments)}},y.javascript=Q,y.pathToLineSegments=N,y.webgl=B,y.webglUtils=k,Object.defineProperty(y,"__esModule",{value:!0}),y}({});return y}const $d=/\bvoid\s+main\s*\(\s*\)\s*{/g;function qd(y){return y.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(y,L){let p=dz[L];return p?qd(p):y}))}const Ad=[];for(let y=0;y<256;y++)Ad[y]=(y<16?"0":"")+y.toString(16);const sd=Object.assign||function(){let y=arguments[0];for(let L=1,p=arguments.length;L<p;L++){let p=arguments[L];if(p)for(let L in p)Object.prototype.hasOwnProperty.call(p,L)&&(y[L]=p[L])}return y},cd=Date.now(),Kd=new WeakMap,bd=new Map;let nd=1e10;function vd(y,L){const p=function(y){const L=JSON.stringify(y,Zd);let p=Lo.get(L);return null==p&&Lo.set(L,p=++yo),p}(L);let N=Kd.get(y);if(N||Kd.set(y,N=Object.create(null)),N[p])return new N[p];const t=`_onBeforeCompile${p}`,j=function(N,j){y.onBeforeCompile.call(this,N,j);const z=this.customProgramCacheKey()+"|"+N.vertexShader+"|"+N.fragmentShader;let O=bd[z];if(!O){const y=function(y,{vertexShader:L,fragmentShader:p},N,t){let{vertexDefs:j,vertexMainIntro:z,vertexMainOutro:O,vertexTransform:h,fragmentDefs:m,fragmentMainIntro:k,fragmentMainOutro:_,fragmentColorTransform:W,customRewriter:g,timeUniform:C}=N;if(j=j||"",z=z||"",O=O||"",m=m||"",k=k||"",_=_||"",(h||g)&&(L=qd(L)),(W||g)&&(p=qd(p=p.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"))),g){let y=g({vertexShader:L,fragmentShader:p});L=y.vertexShader,p=y.fragmentShader}if(W){let y=[];p=p.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(L=>(y.push(L),""))),_=`${W}\n${y.join("\n")}\n${_}`}if(C){const y=`\nuniform float ${C};\n`;j=y+j,m=y+m}return h&&(j=`${j}\nvoid troikaVertexTransform${t}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${h}\n}\n`,z=`\ntroika_position_${t} = vec3(position);\ntroika_normal_${t} = vec3(normal);\ntroika_uv_${t} = vec2(uv);\ntroikaVertexTransform${t}(troika_position_${t}, troika_normal_${t}, troika_uv_${t});\n${z}\n`,L=(L=`vec3 troika_position_${t};\nvec3 troika_normal_${t};\nvec2 troika_uv_${t};\n${L}\n`).replace(/\b(position|normal|uv)\b/g,((y,L,p,N)=>/\battribute\s+vec[23]\s+$/.test(N.substr(0,p))?L:`troika_${L}_${t}`)),y.map&&y.map.channel>0||(L=L.replace(/\bMAP_UV\b/g,`troika_uv_${t}`))),{vertexShader:L=ed(L,t,j,z,O),fragmentShader:p=ed(p,t,m,k,_)}}(this,N,L,p);O=bd[z]=y}N.vertexShader=O.vertexShader,N.fragmentShader=O.fragmentShader,sd(N.uniforms,this.uniforms),L.timeUniform&&(N.uniforms[L.timeUniform]={get value(){return Date.now()-cd}}),this[t]&&this[t](N)},z=function(){return O(L.chained?y:y.clone())},O=function(N){const t=Object.create(N,h);return Object.defineProperty(t,"baseMaterial",{value:y}),Object.defineProperty(t,"id",{value:nd++}),t.uuid=function(){const y=4294967295*Math.random()|0,L=4294967295*Math.random()|0,p=4294967295*Math.random()|0,N=4294967295*Math.random()|0;return(Ad[255&y]+Ad[y>>8&255]+Ad[y>>16&255]+Ad[y>>24&255]+"-"+Ad[255&L]+Ad[L>>8&255]+"-"+Ad[L>>16&15|64]+Ad[L>>24&255]+"-"+Ad[63&p|128]+Ad[p>>8&255]+"-"+Ad[p>>16&255]+Ad[p>>24&255]+Ad[255&N]+Ad[N>>8&255]+Ad[N>>16&255]+Ad[N>>24&255]).toUpperCase()}(),t.uniforms=sd({},N.uniforms,L.uniforms),t.defines=sd({},N.defines,L.defines),t.defines[`TROIKA_DERIVED_MATERIAL_${p}`]="",t.extensions=sd({},N.extensions,L.extensions),t._listeners=void 0,t},h={constructor:{value:z},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return y.customProgramCacheKey()+"|"+p}},onBeforeCompile:{get:()=>j,set(y){this[t]=y}},copy:{writable:!0,configurable:!0,value:function(L){return y.copy.call(this,L),y.isShaderMaterial||y.isDerivedMaterial||(sd(this.extensions,L.extensions),sd(this.defines,L.defines),sd(this.uniforms,yz.clone(L.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const L=new y.constructor;return O(L).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let p=this._depthMaterial;return p||(p=this._depthMaterial=vd(y.isDerivedMaterial?y.getDepthMaterial():new Hh({depthPacking:eL}),L),p.defines.IS_DEPTH_MATERIAL="",p.uniforms=this.uniforms),p}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let p=this._distanceMaterial;return p||(p=this._distanceMaterial=vd(y.isDerivedMaterial?y.getDistanceMaterial():new Xh,L),p.defines.IS_DISTANCE_MATERIAL="",p.uniforms=this.uniforms),p}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:L,_distanceMaterial:p}=this;L&&L.dispose(),p&&p.dispose(),y.dispose.call(this)}}};return N[p]=z,new z}function ed(y,L,p,N,t){return(N||t||p)&&(y=y.replace($d,`\n${p}\nvoid troikaOrigMain${L}() {`),y+=`\nvoid main() {\n  ${N}\n  troikaOrigMain${L}();\n  ${t}\n}`),y}function Zd(y,L){return"uniforms"===y?void 0:"function"==typeof L?L.toString():L}let yo=0;const Lo=new Map,po=()=>(self.performance||Date).now(),No=Gd();let to;const jo=[],zo=5;let Oo=0;function ho(){const y=po();for(;jo.length&&po()-y<zo;)jo.shift()();Oo=jo.length?setTimeout(ho,0):0}const mo=4,ko=2e3,_o={};let Wo=0;function go(y,L,p,N,t,j,z,O,h,m){const k="TroikaTextSDFGenerator_JS_"+Wo++%mo;let _=_o[k];return _||(_=_o[k]={workerModule:Xd({name:k,workerId:k,dependencies:[Gd,po],init(y,L){const p=y().javascript.generate;return function(...y){const N=L();return{textureData:p(...y),timing:L()-N}}},getTransferables:y=>[y.textureData.buffer]}),requests:0,idleTimer:null}),_.requests++,clearTimeout(_.idleTimer),_.workerModule(y,L,p,N,t,j).then((({textureData:p,timing:N})=>{const t=po(),j=new Uint8Array(4*p.length);for(let y=0;y<p.length;y++)j[4*y+m]=p[y];return No.webglUtils.renderImageData(z,j,O,h,y,L,1<<3-m),N+=po()-t,0==--_.requests&&(_.idleTimer=setTimeout((()=>{(function(y){ad[y]&&ad[y].forEach((function(y){y()})),fd[y]&&(fd[y].terminate(),delete fd[y])})(k)}),ko)),{timing:N}}))}const Co=No.webglUtils.resizeWebGLCanvasWithoutClearing,Qo=Xd({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(y){var L={parse:function(y){var p=L._bin,N=new Uint8Array(y);if("ttcf"==p.readASCII(N,0,4)){var t=4;p.readUshort(N,t),t+=2,p.readUshort(N,t),t+=2;var j=p.readUint(N,t);t+=4;for(var z=[],O=0;O<j;O++){var h=p.readUint(N,t);t+=4,z.push(L._readFont(N,h))}return z}return[L._readFont(N,0)]},_readFont:function(y,p){var N=L._bin,t=p;N.readFixed(y,p),p+=4;var j=N.readUshort(y,p);p+=2,N.readUshort(y,p),p+=2,N.readUshort(y,p),p+=2,N.readUshort(y,p),p+=2;for(var z=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],O={_data:y,_offset:t},h={},m=0;m<j;m++){var k=N.readASCII(y,p,4);p+=4,N.readUint(y,p),p+=4;var _=N.readUint(y,p);p+=4;var W=N.readUint(y,p);p+=4,h[k]={offset:_,length:W}}for(m=0;m<z.length;m++){var g=z[m];h[g]&&(O[g.trim()]=L[g.trim()].parse(y,h[g].offset,h[g].length,O))}return O},_tabOffset:function(y,p,N){for(var t=L._bin,j=t.readUshort(y,N+4),z=N+12,O=0;O<j;O++){var h=t.readASCII(y,z,4);z+=4,t.readUint(y,z),z+=4;var m=t.readUint(y,z);if(z+=4,t.readUint(y,z),z+=4,h==p)return m}return 0}};L._bin={readFixed:function(y,L){return(y[L]<<8|y[L+1])+(y[L+2]<<8|y[L+3])/65540},readF2dot14:function(y,p){return L._bin.readShort(y,p)/16384},readInt:function(y,p){return L._bin._view(y).getInt32(p)},readInt8:function(y,p){return L._bin._view(y).getInt8(p)},readShort:function(y,p){return L._bin._view(y).getInt16(p)},readUshort:function(y,p){return L._bin._view(y).getUint16(p)},readUshorts:function(y,p,N){for(var t=[],j=0;j<N;j++)t.push(L._bin.readUshort(y,p+2*j));return t},readUint:function(y,p){return L._bin._view(y).getUint32(p)},readUint64:function(y,p){return 4294967296*L._bin.readUint(y,p)+L._bin.readUint(y,p+4)},readASCII:function(y,L,p){for(var N="",t=0;t<p;t++)N+=String.fromCharCode(y[L+t]);return N},readUnicode:function(y,L,p){for(var N="",t=0;t<p;t++){var j=y[L++]<<8|y[L++];N+=String.fromCharCode(j)}return N},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(y,p,N){var t=L._bin._tdec;return t&&0==p&&N==y.length?t.decode(y):L._bin.readASCII(y,p,N)},readBytes:function(y,L,p){for(var N=[],t=0;t<p;t++)N.push(y[L+t]);return N},readASCIIArray:function(y,L,p){for(var N=[],t=0;t<p;t++)N.push(String.fromCharCode(y[L+t]));return N},_view:function(y){return y._dataView||(y._dataView=y.buffer?new DataView(y.buffer,y.byteOffset,y.byteLength):new DataView(new Uint8Array(y).buffer))}},L._lctf={},L._lctf.parse=function(y,p,N,t,j){var z=L._bin,O={},h=p;z.readFixed(y,p),p+=4;var m=z.readUshort(y,p);p+=2;var k=z.readUshort(y,p);p+=2;var _=z.readUshort(y,p);return p+=2,O.scriptList=L._lctf.readScriptList(y,h+m),O.featureList=L._lctf.readFeatureList(y,h+k),O.lookupList=L._lctf.readLookupList(y,h+_,j),O},L._lctf.readLookupList=function(y,p,N){var t=L._bin,j=p,z=[],O=t.readUshort(y,p);p+=2;for(var h=0;h<O;h++){var m=t.readUshort(y,p);p+=2;var k=L._lctf.readLookupTable(y,j+m,N);z.push(k)}return z},L._lctf.readLookupTable=function(y,p,N){var t=L._bin,j=p,z={tabs:[]};z.ltype=t.readUshort(y,p),p+=2,z.flag=t.readUshort(y,p),p+=2;var O=t.readUshort(y,p);p+=2;for(var h=z.ltype,m=0;m<O;m++){var k=t.readUshort(y,p);p+=2;var _=N(y,h,j+k,z);z.tabs.push(_)}return z},L._lctf.numOfOnes=function(y){for(var L=0,p=0;p<32;p++)y>>>p&1&&L++;return L},L._lctf.readClassDef=function(y,p){var N=L._bin,t=[],j=N.readUshort(y,p);if(p+=2,1==j){var z=N.readUshort(y,p);p+=2;var O=N.readUshort(y,p);p+=2;for(var h=0;h<O;h++)t.push(z+h),t.push(z+h),t.push(N.readUshort(y,p)),p+=2}if(2==j){var m=N.readUshort(y,p);for(p+=2,h=0;h<m;h++)t.push(N.readUshort(y,p)),p+=2,t.push(N.readUshort(y,p)),p+=2,t.push(N.readUshort(y,p)),p+=2}return t},L._lctf.getInterval=function(y,L){for(var p=0;p<y.length;p+=3){var N=y[p],t=y[p+1];if(y[p+2],N<=L&&L<=t)return p}return-1},L._lctf.readCoverage=function(y,p){var N=L._bin,t={};t.fmt=N.readUshort(y,p),p+=2;var j=N.readUshort(y,p);return p+=2,1==t.fmt&&(t.tab=N.readUshorts(y,p,j)),2==t.fmt&&(t.tab=N.readUshorts(y,p,3*j)),t},L._lctf.coverageIndex=function(y,p){var N=y.tab;if(1==y.fmt)return N.indexOf(p);if(2==y.fmt){var t=L._lctf.getInterval(N,p);if(-1!=t)return N[t+2]+(p-N[t])}return-1},L._lctf.readFeatureList=function(y,p){var N=L._bin,t=p,j=[],z=N.readUshort(y,p);p+=2;for(var O=0;O<z;O++){var h=N.readASCII(y,p,4);p+=4;var m=N.readUshort(y,p);p+=2;var k=L._lctf.readFeatureTable(y,t+m);k.tag=h.trim(),j.push(k)}return j},L._lctf.readFeatureTable=function(y,p){var N=L._bin,t=p,j={},z=N.readUshort(y,p);p+=2,z>0&&(j.featureParams=t+z);var O=N.readUshort(y,p);p+=2,j.tab=[];for(var h=0;h<O;h++)j.tab.push(N.readUshort(y,p+2*h));return j},L._lctf.readScriptList=function(y,p){var N=L._bin,t=p,j={},z=N.readUshort(y,p);p+=2;for(var O=0;O<z;O++){var h=N.readASCII(y,p,4);p+=4;var m=N.readUshort(y,p);p+=2,j[h.trim()]=L._lctf.readScriptTable(y,t+m)}return j},L._lctf.readScriptTable=function(y,p){var N=L._bin,t=p,j={},z=N.readUshort(y,p);p+=2,j.default=L._lctf.readLangSysTable(y,t+z);var O=N.readUshort(y,p);p+=2;for(var h=0;h<O;h++){var m=N.readASCII(y,p,4);p+=4;var k=N.readUshort(y,p);p+=2,j[m.trim()]=L._lctf.readLangSysTable(y,t+k)}return j},L._lctf.readLangSysTable=function(y,p){var N=L._bin,t={};N.readUshort(y,p),p+=2,t.reqFeature=N.readUshort(y,p),p+=2;var j=N.readUshort(y,p);return p+=2,t.features=N.readUshorts(y,p,j),t},L.CFF={},L.CFF.parse=function(y,p,N){var t=L._bin;(y=new Uint8Array(y.buffer,p,N))[p=0],y[++p],y[++p],y[++p],p++;var j=[];p=L.CFF.readIndex(y,p,j);for(var z=[],O=0;O<j.length-1;O++)z.push(t.readASCII(y,p+j[O],j[O+1]-j[O]));p+=j[j.length-1];var h=[];p=L.CFF.readIndex(y,p,h);var m=[];for(O=0;O<h.length-1;O++)m.push(L.CFF.readDict(y,p+h[O],p+h[O+1]));p+=h[h.length-1];var k=m[0],_=[];p=L.CFF.readIndex(y,p,_);var W=[];for(O=0;O<_.length-1;O++)W.push(t.readASCII(y,p+_[O],_[O+1]-_[O]));if(p+=_[_.length-1],L.CFF.readSubrs(y,p,k),k.CharStrings){p=k.CharStrings,_=[],p=L.CFF.readIndex(y,p,_);var g=[];for(O=0;O<_.length-1;O++)g.push(t.readBytes(y,p+_[O],_[O+1]-_[O]));k.CharStrings=g}if(k.ROS){p=k.FDArray;var C=[];for(p=L.CFF.readIndex(y,p,C),k.FDArray=[],O=0;O<C.length-1;O++){var Q=L.CFF.readDict(y,p+C[O],p+C[O+1]);L.CFF._readFDict(y,Q,W),k.FDArray.push(Q)}p+=C[C.length-1],p=k.FDSelect,k.FDSelect=[];var T=y[p];if(p++,3!=T)throw T;var i=t.readUshort(y,p);for(p+=2,O=0;O<i+1;O++)k.FDSelect.push(t.readUshort(y,p),y[p+2]),p+=3}return k.Encoding&&(k.Encoding=L.CFF.readEncoding(y,k.Encoding,k.CharStrings.length)),k.charset&&(k.charset=L.CFF.readCharset(y,k.charset,k.CharStrings.length)),L.CFF._readFDict(y,k,W),k},L.CFF._readFDict=function(y,p,N){var t;for(var j in p.Private&&(t=p.Private[1],p.Private=L.CFF.readDict(y,t,t+p.Private[0]),p.Private.Subrs&&L.CFF.readSubrs(y,t+p.Private.Subrs,p.Private)),p)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(j)&&(p[j]=N[p[j]-426+35])},L.CFF.readSubrs=function(y,p,N){var t=L._bin,j=[];p=L.CFF.readIndex(y,p,j);var z,O=j.length;z=O<1240?107:O<33900?1131:32768,N.Bias=z,N.Subrs=[];for(var h=0;h<j.length-1;h++)N.Subrs.push(t.readBytes(y,p+j[h],j[h+1]-j[h]))},L.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],L.CFF.glyphByUnicode=function(y,L){for(var p=0;p<y.charset.length;p++)if(y.charset[p]==L)return p;return-1},L.CFF.glyphBySE=function(y,p){return p<0||p>255?-1:L.CFF.glyphByUnicode(y,L.CFF.tableSE[p])},L.CFF.readEncoding=function(y,p,N){L._bin;var t=[".notdef"],j=y[p];if(p++,0!=j)throw"error: unknown encoding format: "+j;var z=y[p];p++;for(var O=0;O<z;O++)t.push(y[p+O]);return t},L.CFF.readCharset=function(y,p,N){var t=L._bin,j=[".notdef"],z=y[p];if(p++,0==z)for(var O=0;O<N;O++){var h=t.readUshort(y,p);p+=2,j.push(h)}else{if(1!=z&&2!=z)throw"error: format: "+z;for(;j.length<N;){h=t.readUshort(y,p),p+=2;var m=0;for(1==z?(m=y[p],p++):(m=t.readUshort(y,p),p+=2),O=0;O<=m;O++)j.push(h),h++}}return j},L.CFF.readIndex=function(y,p,N){var t=L._bin,j=t.readUshort(y,p)+1,z=y[p+=2];if(p++,1==z)for(var O=0;O<j;O++)N.push(y[p+O]);else if(2==z)for(O=0;O<j;O++)N.push(t.readUshort(y,p+2*O));else if(3==z)for(O=0;O<j;O++)N.push(16777215&t.readUint(y,p+3*O-1));else if(1!=j)throw"unsupported offset size: "+z+", count: "+j;return(p+=j*z)-1},L.CFF.getCharString=function(y,p,N){var t=L._bin,j=y[p],z=y[p+1];y[p+2],y[p+3],y[p+4];var O=1,h=null,m=null;j<=20&&(h=j,O=1),12==j&&(h=100*j+z,O=2),21<=j&&j<=27&&(h=j,O=1),28==j&&(m=t.readShort(y,p+1),O=3),29<=j&&j<=31&&(h=j,O=1),32<=j&&j<=246&&(m=j-139,O=1),247<=j&&j<=250&&(m=256*(j-247)+z+108,O=2),251<=j&&j<=254&&(m=256*-(j-251)-z-108,O=2),255==j&&(m=t.readInt(y,p+1)/65535,O=5),N.val=null!=m?m:"o"+h,N.size=O},L.CFF.readCharString=function(y,p,N){for(var t=p+N,j=L._bin,z=[];p<t;){var O=y[p],h=y[p+1];y[p+2],y[p+3],y[p+4];var m=1,k=null,_=null;O<=20&&(k=O,m=1),12==O&&(k=100*O+h,m=2),19!=O&&20!=O||(k=O,m=2),21<=O&&O<=27&&(k=O,m=1),28==O&&(_=j.readShort(y,p+1),m=3),29<=O&&O<=31&&(k=O,m=1),32<=O&&O<=246&&(_=O-139,m=1),247<=O&&O<=250&&(_=256*(O-247)+h+108,m=2),251<=O&&O<=254&&(_=256*-(O-251)-h-108,m=2),255==O&&(_=j.readInt(y,p+1)/65535,m=5),z.push(null!=_?_:"o"+k),p+=m}return z},L.CFF.readDict=function(y,p,N){for(var t=L._bin,j={},z=[];p<N;){var O=y[p],h=y[p+1];y[p+2],y[p+3],y[p+4];var m=1,k=null,_=null;if(28==O&&(_=t.readShort(y,p+1),m=3),29==O&&(_=t.readInt(y,p+1),m=5),32<=O&&O<=246&&(_=O-139,m=1),247<=O&&O<=250&&(_=256*(O-247)+h+108,m=2),251<=O&&O<=254&&(_=256*-(O-251)-h-108,m=2),255==O)throw _=t.readInt(y,p+1)/65535,m=5,"unknown number";if(30==O){var W=[];for(m=1;;){var g=y[p+m];m++;var C=g>>4,Q=15&g;if(15!=C&&W.push(C),15!=Q&&W.push(Q),15==Q)break}for(var T="",i=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],D=0;D<W.length;D++)T+=i[W[D]];_=parseFloat(T)}O<=21&&(k=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][O],m=1,12==O&&(k=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][h],m=2)),null!=k?(j[k]=1==z.length?z[0]:z,z=[]):z.push(_),p+=m}return j},L.cmap={},L.cmap.parse=function(y,p,N){y=new Uint8Array(y.buffer,p,N),p=0;var t=L._bin,j={};t.readUshort(y,p),p+=2;var z=t.readUshort(y,p);p+=2;var O=[];j.tables=[];for(var h=0;h<z;h++){var m=t.readUshort(y,p);p+=2;var k=t.readUshort(y,p);p+=2;var _=t.readUint(y,p);p+=4;var W="p"+m+"e"+k,g=O.indexOf(_);if(-1==g){var C;g=j.tables.length,O.push(_);var Q=t.readUshort(y,_);0==Q?C=L.cmap.parse0(y,_):4==Q?C=L.cmap.parse4(y,_):6==Q?C=L.cmap.parse6(y,_):12==Q?C=L.cmap.parse12(y,_):console.debug("unknown format: "+Q,m,k,_),j.tables.push(C)}if(null!=j[W])throw"multiple tables for one platform+encoding";j[W]=g}return j},L.cmap.parse0=function(y,p){var N=L._bin,t={};t.format=N.readUshort(y,p),p+=2;var j=N.readUshort(y,p);p+=2,N.readUshort(y,p),p+=2,t.map=[];for(var z=0;z<j-6;z++)t.map.push(y[p+z]);return t},L.cmap.parse4=function(y,p){var N=L._bin,t=p,j={};j.format=N.readUshort(y,p),p+=2;var z=N.readUshort(y,p);p+=2,N.readUshort(y,p),p+=2;var O=N.readUshort(y,p);p+=2;var h=O/2;j.searchRange=N.readUshort(y,p),p+=2,j.entrySelector=N.readUshort(y,p),p+=2,j.rangeShift=N.readUshort(y,p),p+=2,j.endCount=N.readUshorts(y,p,h),p+=2*h,p+=2,j.startCount=N.readUshorts(y,p,h),p+=2*h,j.idDelta=[];for(var m=0;m<h;m++)j.idDelta.push(N.readShort(y,p)),p+=2;for(j.idRangeOffset=N.readUshorts(y,p,h),p+=2*h,j.glyphIdArray=[];p<t+z;)j.glyphIdArray.push(N.readUshort(y,p)),p+=2;return j},L.cmap.parse6=function(y,p){var N=L._bin,t={};t.format=N.readUshort(y,p),p+=2,N.readUshort(y,p),p+=2,N.readUshort(y,p),p+=2,t.firstCode=N.readUshort(y,p),p+=2;var j=N.readUshort(y,p);p+=2,t.glyphIdArray=[];for(var z=0;z<j;z++)t.glyphIdArray.push(N.readUshort(y,p)),p+=2;return t},L.cmap.parse12=function(y,p){var N=L._bin,t={};t.format=N.readUshort(y,p),p+=2,p+=2,N.readUint(y,p),p+=4,N.readUint(y,p),p+=4;var j=N.readUint(y,p);p+=4,t.groups=[];for(var z=0;z<j;z++){var O=p+12*z,h=N.readUint(y,O+0),m=N.readUint(y,O+4),k=N.readUint(y,O+8);t.groups.push([h,m,k])}return t},L.glyf={},L.glyf.parse=function(y,L,p,N){for(var t=[],j=0;j<N.maxp.numGlyphs;j++)t.push(null);return t},L.glyf._parseGlyf=function(y,p){var N=L._bin,t=y._data,j=L._tabOffset(t,"glyf",y._offset)+y.loca[p];if(y.loca[p]==y.loca[p+1])return null;var z={};if(z.noc=N.readShort(t,j),j+=2,z.xMin=N.readShort(t,j),j+=2,z.yMin=N.readShort(t,j),j+=2,z.xMax=N.readShort(t,j),j+=2,z.yMax=N.readShort(t,j),j+=2,z.xMin>=z.xMax||z.yMin>=z.yMax)return null;if(z.noc>0){z.endPts=[];for(var O=0;O<z.noc;O++)z.endPts.push(N.readUshort(t,j)),j+=2;var h=N.readUshort(t,j);if(j+=2,t.length-j<h)return null;z.instructions=N.readBytes(t,j,h),j+=h;var m=z.endPts[z.noc-1]+1;for(z.flags=[],O=0;O<m;O++){var k=t[j];if(j++,z.flags.push(k),8&k){var _=t[j];j++;for(var W=0;W<_;W++)z.flags.push(k),O++}}for(z.xs=[],O=0;O<m;O++){var g=!!(2&z.flags[O]),C=!!(16&z.flags[O]);g?(z.xs.push(C?t[j]:-t[j]),j++):C?z.xs.push(0):(z.xs.push(N.readShort(t,j)),j+=2)}for(z.ys=[],O=0;O<m;O++)g=!!(4&z.flags[O]),C=!!(32&z.flags[O]),g?(z.ys.push(C?t[j]:-t[j]),j++):C?z.ys.push(0):(z.ys.push(N.readShort(t,j)),j+=2);var Q=0,T=0;for(O=0;O<m;O++)Q+=z.xs[O],T+=z.ys[O],z.xs[O]=Q,z.ys[O]=T}else{var i;z.parts=[];do{i=N.readUshort(t,j),j+=2;var D={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(z.parts.push(D),D.glyphIndex=N.readUshort(t,j),j+=2,1&i){var w=N.readShort(t,j);j+=2;var x=N.readShort(t,j);j+=2}else w=N.readInt8(t,j),j++,x=N.readInt8(t,j),j++;2&i?(D.m.tx=w,D.m.ty=x):(D.p1=w,D.p2=x),8&i?(D.m.a=D.m.d=N.readF2dot14(t,j),j+=2):64&i?(D.m.a=N.readF2dot14(t,j),j+=2,D.m.d=N.readF2dot14(t,j),j+=2):128&i&&(D.m.a=N.readF2dot14(t,j),j+=2,D.m.b=N.readF2dot14(t,j),j+=2,D.m.c=N.readF2dot14(t,j),j+=2,D.m.d=N.readF2dot14(t,j),j+=2)}while(32&i);if(256&i){var d=N.readUshort(t,j);for(j+=2,z.instr=[],O=0;O<d;O++)z.instr.push(t[j]),j++}}return z},L.GPOS={},L.GPOS.parse=function(y,p,N,t){return L._lctf.parse(y,p,N,t,L.GPOS.subt)},L.GPOS.subt=function(y,p,N,t){var j=L._bin,z=N,O={};if(O.fmt=j.readUshort(y,N),N+=2,1==p||2==p||3==p||7==p||8==p&&O.fmt<=2){var h=j.readUshort(y,N);N+=2,O.coverage=L._lctf.readCoverage(y,h+z)}if(1==p&&1==O.fmt){var m=j.readUshort(y,N);N+=2;var k=L._lctf.numOfOnes(m);0!=m&&(O.pos=L.GPOS.readValueRecord(y,N,m))}else if(2==p&&O.fmt>=1&&O.fmt<=2){m=j.readUshort(y,N),N+=2;var _=j.readUshort(y,N);N+=2,k=L._lctf.numOfOnes(m);var W=L._lctf.numOfOnes(_);if(1==O.fmt){O.pairsets=[];var g=j.readUshort(y,N);N+=2;for(var C=0;C<g;C++){var Q=z+j.readUshort(y,N);N+=2;var T=j.readUshort(y,Q);Q+=2;for(var i=[],D=0;D<T;D++){var w=j.readUshort(y,Q);Q+=2,0!=m&&(V=L.GPOS.readValueRecord(y,Q,m),Q+=2*k),0!=_&&(F=L.GPOS.readValueRecord(y,Q,_),Q+=2*W),i.push({gid2:w,val1:V,val2:F})}O.pairsets.push(i)}}if(2==O.fmt){var x=j.readUshort(y,N);N+=2;var d=j.readUshort(y,N);N+=2;var o=j.readUshort(y,N);N+=2;var U=j.readUshort(y,N);for(N+=2,O.classDef1=L._lctf.readClassDef(y,z+x),O.classDef2=L._lctf.readClassDef(y,z+d),O.matrix=[],C=0;C<o;C++){var I=[];for(D=0;D<U;D++){var V=null,F=null;0!=m&&(V=L.GPOS.readValueRecord(y,N,m),N+=2*k),0!=_&&(F=L.GPOS.readValueRecord(y,N,_),N+=2*W),I.push({val1:V,val2:F})}O.matrix.push(I)}}}else{if(9==p&&1==O.fmt){var u=j.readUshort(y,N);N+=2;var S=j.readUint(y,N);if(N+=4,9==t.ltype)t.ltype=u;else if(t.ltype!=u)throw"invalid extension substitution";return L.GPOS.subt(y,t.ltype,z+S)}console.debug("unsupported GPOS table LookupType",p,"format",O.fmt)}return O},L.GPOS.readValueRecord=function(y,p,N){var t=L._bin,j=[];return j.push(1&N?t.readShort(y,p):0),p+=1&N?2:0,j.push(2&N?t.readShort(y,p):0),p+=2&N?2:0,j.push(4&N?t.readShort(y,p):0),p+=4&N?2:0,j.push(8&N?t.readShort(y,p):0),p+=8&N?2:0,j},L.GSUB={},L.GSUB.parse=function(y,p,N,t){return L._lctf.parse(y,p,N,t,L.GSUB.subt)},L.GSUB.subt=function(y,p,N,t){var j=L._bin,z=N,O={};if(O.fmt=j.readUshort(y,N),N+=2,1!=p&&4!=p&&5!=p&&6!=p)return null;if(1==p||4==p||5==p&&O.fmt<=2||6==p&&O.fmt<=2){var h=j.readUshort(y,N);N+=2,O.coverage=L._lctf.readCoverage(y,z+h)}if(1==p&&O.fmt>=1&&O.fmt<=2){if(1==O.fmt)O.delta=j.readShort(y,N),N+=2;else if(2==O.fmt){var m=j.readUshort(y,N);N+=2,O.newg=j.readUshorts(y,N,m),N+=2*O.newg.length}}else if(4==p){O.vals=[],m=j.readUshort(y,N),N+=2;for(var k=0;k<m;k++){var _=j.readUshort(y,N);N+=2,O.vals.push(L.GSUB.readLigatureSet(y,z+_))}}else if(5==p&&2==O.fmt){if(2==O.fmt){var W=j.readUshort(y,N);N+=2,O.cDef=L._lctf.readClassDef(y,z+W),O.scset=[];var g=j.readUshort(y,N);for(N+=2,k=0;k<g;k++){var C=j.readUshort(y,N);N+=2,O.scset.push(0==C?null:L.GSUB.readSubClassSet(y,z+C))}}}else if(6==p&&3==O.fmt){if(3==O.fmt){for(k=0;k<3;k++){m=j.readUshort(y,N),N+=2;for(var Q=[],T=0;T<m;T++)Q.push(L._lctf.readCoverage(y,z+j.readUshort(y,N+2*T)));N+=2*m,0==k&&(O.backCvg=Q),1==k&&(O.inptCvg=Q),2==k&&(O.ahedCvg=Q)}m=j.readUshort(y,N),N+=2,O.lookupRec=L.GSUB.readSubstLookupRecords(y,N,m)}}else{if(7==p&&1==O.fmt){var i=j.readUshort(y,N);N+=2;var D=j.readUint(y,N);if(N+=4,9==t.ltype)t.ltype=i;else if(t.ltype!=i)throw"invalid extension substitution";return L.GSUB.subt(y,t.ltype,z+D)}console.debug("unsupported GSUB table LookupType",p,"format",O.fmt)}return O},L.GSUB.readSubClassSet=function(y,p){var N=L._bin.readUshort,t=p,j=[],z=N(y,p);p+=2;for(var O=0;O<z;O++){var h=N(y,p);p+=2,j.push(L.GSUB.readSubClassRule(y,t+h))}return j},L.GSUB.readSubClassRule=function(y,p){var N=L._bin.readUshort,t={},j=N(y,p),z=N(y,p+=2);p+=2,t.input=[];for(var O=0;O<j-1;O++)t.input.push(N(y,p)),p+=2;return t.substLookupRecords=L.GSUB.readSubstLookupRecords(y,p,z),t},L.GSUB.readSubstLookupRecords=function(y,p,N){for(var t=L._bin.readUshort,j=[],z=0;z<N;z++)j.push(t(y,p),t(y,p+2)),p+=4;return j},L.GSUB.readChainSubClassSet=function(y,p){var N=L._bin,t=p,j=[],z=N.readUshort(y,p);p+=2;for(var O=0;O<z;O++){var h=N.readUshort(y,p);p+=2,j.push(L.GSUB.readChainSubClassRule(y,t+h))}return j},L.GSUB.readChainSubClassRule=function(y,p){for(var N=L._bin,t={},j=["backtrack","input","lookahead"],z=0;z<j.length;z++){var O=N.readUshort(y,p);p+=2,1==z&&O--,t[j[z]]=N.readUshorts(y,p,O),p+=2*t[j[z]].length}return O=N.readUshort(y,p),p+=2,t.subst=N.readUshorts(y,p,2*O),p+=2*t.subst.length,t},L.GSUB.readLigatureSet=function(y,p){var N=L._bin,t=p,j=[],z=N.readUshort(y,p);p+=2;for(var O=0;O<z;O++){var h=N.readUshort(y,p);p+=2,j.push(L.GSUB.readLigature(y,t+h))}return j},L.GSUB.readLigature=function(y,p){var N=L._bin,t={chain:[]};t.nglyph=N.readUshort(y,p),p+=2;var j=N.readUshort(y,p);p+=2;for(var z=0;z<j-1;z++)t.chain.push(N.readUshort(y,p)),p+=2;return t},L.head={},L.head.parse=function(y,p,N){var t=L._bin,j={};return t.readFixed(y,p),p+=4,j.fontRevision=t.readFixed(y,p),p+=4,t.readUint(y,p),p+=4,t.readUint(y,p),p+=4,j.flags=t.readUshort(y,p),p+=2,j.unitsPerEm=t.readUshort(y,p),p+=2,j.created=t.readUint64(y,p),p+=8,j.modified=t.readUint64(y,p),p+=8,j.xMin=t.readShort(y,p),p+=2,j.yMin=t.readShort(y,p),p+=2,j.xMax=t.readShort(y,p),p+=2,j.yMax=t.readShort(y,p),p+=2,j.macStyle=t.readUshort(y,p),p+=2,j.lowestRecPPEM=t.readUshort(y,p),p+=2,j.fontDirectionHint=t.readShort(y,p),p+=2,j.indexToLocFormat=t.readShort(y,p),p+=2,j.glyphDataFormat=t.readShort(y,p),p+=2,j},L.hhea={},L.hhea.parse=function(y,p,N){var t=L._bin,j={};return t.readFixed(y,p),p+=4,j.ascender=t.readShort(y,p),p+=2,j.descender=t.readShort(y,p),p+=2,j.lineGap=t.readShort(y,p),p+=2,j.advanceWidthMax=t.readUshort(y,p),p+=2,j.minLeftSideBearing=t.readShort(y,p),p+=2,j.minRightSideBearing=t.readShort(y,p),p+=2,j.xMaxExtent=t.readShort(y,p),p+=2,j.caretSlopeRise=t.readShort(y,p),p+=2,j.caretSlopeRun=t.readShort(y,p),p+=2,j.caretOffset=t.readShort(y,p),p+=2,p+=8,j.metricDataFormat=t.readShort(y,p),p+=2,j.numberOfHMetrics=t.readUshort(y,p),p+=2,j},L.hmtx={},L.hmtx.parse=function(y,p,N,t){for(var j=L._bin,z={aWidth:[],lsBearing:[]},O=0,h=0,m=0;m<t.maxp.numGlyphs;m++)m<t.hhea.numberOfHMetrics&&(O=j.readUshort(y,p),p+=2,h=j.readShort(y,p),p+=2),z.aWidth.push(O),z.lsBearing.push(h);return z},L.kern={},L.kern.parse=function(y,p,N,t){var j=L._bin,z=j.readUshort(y,p);if(p+=2,1==z)return L.kern.parseV1(y,p-2,N,t);var O=j.readUshort(y,p);p+=2;for(var h={glyph1:[],rval:[]},m=0;m<O;m++){p+=2,N=j.readUshort(y,p),p+=2;var k=j.readUshort(y,p);p+=2;var _=k>>>8;if(0!=(_&=15))throw"unknown kern table format: "+_;p=L.kern.readFormat0(y,p,h)}return h},L.kern.parseV1=function(y,p,N,t){var j=L._bin;j.readFixed(y,p),p+=4;var z=j.readUint(y,p);p+=4;for(var O={glyph1:[],rval:[]},h=0;h<z;h++){j.readUint(y,p),p+=4;var m=j.readUshort(y,p);p+=2,j.readUshort(y,p),p+=2;var k=m>>>8;if(0!=(k&=15))throw"unknown kern table format: "+k;p=L.kern.readFormat0(y,p,O)}return O},L.kern.readFormat0=function(y,p,N){var t=L._bin,j=-1,z=t.readUshort(y,p);p+=2,t.readUshort(y,p),p+=2,t.readUshort(y,p),p+=2,t.readUshort(y,p),p+=2;for(var O=0;O<z;O++){var h=t.readUshort(y,p);p+=2;var m=t.readUshort(y,p);p+=2;var k=t.readShort(y,p);p+=2,h!=j&&(N.glyph1.push(h),N.rval.push({glyph2:[],vals:[]}));var _=N.rval[N.rval.length-1];_.glyph2.push(m),_.vals.push(k),j=h}return p},L.loca={},L.loca.parse=function(y,p,N,t){var j=L._bin,z=[],O=t.head.indexToLocFormat,h=t.maxp.numGlyphs+1;if(0==O)for(var m=0;m<h;m++)z.push(j.readUshort(y,p+(m<<1))<<1);if(1==O)for(m=0;m<h;m++)z.push(j.readUint(y,p+(m<<2)));return z},L.maxp={},L.maxp.parse=function(y,p,N){var t=L._bin,j={},z=t.readUint(y,p);return p+=4,j.numGlyphs=t.readUshort(y,p),p+=2,65536==z&&(j.maxPoints=t.readUshort(y,p),p+=2,j.maxContours=t.readUshort(y,p),p+=2,j.maxCompositePoints=t.readUshort(y,p),p+=2,j.maxCompositeContours=t.readUshort(y,p),p+=2,j.maxZones=t.readUshort(y,p),p+=2,j.maxTwilightPoints=t.readUshort(y,p),p+=2,j.maxStorage=t.readUshort(y,p),p+=2,j.maxFunctionDefs=t.readUshort(y,p),p+=2,j.maxInstructionDefs=t.readUshort(y,p),p+=2,j.maxStackElements=t.readUshort(y,p),p+=2,j.maxSizeOfInstructions=t.readUshort(y,p),p+=2,j.maxComponentElements=t.readUshort(y,p),p+=2,j.maxComponentDepth=t.readUshort(y,p),p+=2),j},L.name={},L.name.parse=function(y,p,N){var t=L._bin,j={};t.readUshort(y,p),p+=2;var z=t.readUshort(y,p);p+=2,t.readUshort(y,p);for(var O,h=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],m=p+=2,k=0;k<z;k++){var _=t.readUshort(y,p);p+=2;var W=t.readUshort(y,p);p+=2;var g=t.readUshort(y,p);p+=2;var C=t.readUshort(y,p);p+=2;var Q=t.readUshort(y,p);p+=2;var T=t.readUshort(y,p);p+=2;var i,D=h[C],w=m+12*z+T;if(0==_)i=t.readUnicode(y,w,Q/2);else if(3==_&&0==W)i=t.readUnicode(y,w,Q/2);else if(0==W)i=t.readASCII(y,w,Q);else if(1==W)i=t.readUnicode(y,w,Q/2);else if(3==W)i=t.readUnicode(y,w,Q/2);else{if(1!=_)throw"unknown encoding "+W+", platformID: "+_;i=t.readASCII(y,w,Q),console.debug("reading unknown MAC encoding "+W+" as ASCII")}var x="p"+_+","+g.toString(16);null==j[x]&&(j[x]={}),j[x][void 0!==D?D:C]=i,j[x]._lang=g}for(var d in j)if(null!=j[d].postScriptName&&1033==j[d]._lang)return j[d];for(var d in j)if(null!=j[d].postScriptName&&0==j[d]._lang)return j[d];for(var d in j)if(null!=j[d].postScriptName&&3084==j[d]._lang)return j[d];for(var d in j)if(null!=j[d].postScriptName)return j[d];for(var d in j){O=d;break}return console.debug("returning name table with languageID "+j[O]._lang),j[O]},L["OS/2"]={},L["OS/2"].parse=function(y,p,N){var t=L._bin.readUshort(y,p);p+=2;var j={};if(0==t)L["OS/2"].version0(y,p,j);else if(1==t)L["OS/2"].version1(y,p,j);else if(2==t||3==t||4==t)L["OS/2"].version2(y,p,j);else{if(5!=t)throw"unknown OS/2 table version: "+t;L["OS/2"].version5(y,p,j)}return j},L["OS/2"].version0=function(y,p,N){var t=L._bin;return N.xAvgCharWidth=t.readShort(y,p),p+=2,N.usWeightClass=t.readUshort(y,p),p+=2,N.usWidthClass=t.readUshort(y,p),p+=2,N.fsType=t.readUshort(y,p),p+=2,N.ySubscriptXSize=t.readShort(y,p),p+=2,N.ySubscriptYSize=t.readShort(y,p),p+=2,N.ySubscriptXOffset=t.readShort(y,p),p+=2,N.ySubscriptYOffset=t.readShort(y,p),p+=2,N.ySuperscriptXSize=t.readShort(y,p),p+=2,N.ySuperscriptYSize=t.readShort(y,p),p+=2,N.ySuperscriptXOffset=t.readShort(y,p),p+=2,N.ySuperscriptYOffset=t.readShort(y,p),p+=2,N.yStrikeoutSize=t.readShort(y,p),p+=2,N.yStrikeoutPosition=t.readShort(y,p),p+=2,N.sFamilyClass=t.readShort(y,p),p+=2,N.panose=t.readBytes(y,p,10),p+=10,N.ulUnicodeRange1=t.readUint(y,p),p+=4,N.ulUnicodeRange2=t.readUint(y,p),p+=4,N.ulUnicodeRange3=t.readUint(y,p),p+=4,N.ulUnicodeRange4=t.readUint(y,p),p+=4,N.achVendID=[t.readInt8(y,p),t.readInt8(y,p+1),t.readInt8(y,p+2),t.readInt8(y,p+3)],p+=4,N.fsSelection=t.readUshort(y,p),p+=2,N.usFirstCharIndex=t.readUshort(y,p),p+=2,N.usLastCharIndex=t.readUshort(y,p),p+=2,N.sTypoAscender=t.readShort(y,p),p+=2,N.sTypoDescender=t.readShort(y,p),p+=2,N.sTypoLineGap=t.readShort(y,p),p+=2,N.usWinAscent=t.readUshort(y,p),p+=2,N.usWinDescent=t.readUshort(y,p),p+2},L["OS/2"].version1=function(y,p,N){var t=L._bin;return p=L["OS/2"].version0(y,p,N),N.ulCodePageRange1=t.readUint(y,p),p+=4,N.ulCodePageRange2=t.readUint(y,p),p+4},L["OS/2"].version2=function(y,p,N){var t=L._bin;return p=L["OS/2"].version1(y,p,N),N.sxHeight=t.readShort(y,p),p+=2,N.sCapHeight=t.readShort(y,p),p+=2,N.usDefault=t.readUshort(y,p),p+=2,N.usBreak=t.readUshort(y,p),p+=2,N.usMaxContext=t.readUshort(y,p),p+2},L["OS/2"].version5=function(y,p,N){var t=L._bin;return p=L["OS/2"].version2(y,p,N),N.usLowerOpticalPointSize=t.readUshort(y,p),p+=2,N.usUpperOpticalPointSize=t.readUshort(y,p),p+2},L.post={},L.post.parse=function(y,p,N){var t=L._bin,j={};return j.version=t.readFixed(y,p),p+=4,j.italicAngle=t.readFixed(y,p),p+=4,j.underlinePosition=t.readShort(y,p),p+=2,j.underlineThickness=t.readShort(y,p),p+=2,j},null==L&&(L={}),null==L.U&&(L.U={}),L.U.codeToGlyph=function(y,L){var p=y.cmap,N=-1;if(null!=p.p0e4?N=p.p0e4:null!=p.p3e1?N=p.p3e1:null!=p.p1e0?N=p.p1e0:null!=p.p0e3&&(N=p.p0e3),-1==N)throw"no familiar platform and encoding!";var t=p.tables[N];if(0==t.format)return L>=t.map.length?0:t.map[L];if(4==t.format){for(var j=-1,z=0;z<t.endCount.length;z++)if(L<=t.endCount[z]){j=z;break}return-1==j||t.startCount[j]>L?0:65535&(0!=t.idRangeOffset[j]?t.glyphIdArray[L-t.startCount[j]+(t.idRangeOffset[j]>>1)-(t.idRangeOffset.length-j)]:L+t.idDelta[j])}if(12==t.format){if(L>t.groups[t.groups.length-1][1])return 0;for(z=0;z<t.groups.length;z++){var O=t.groups[z];if(O[0]<=L&&L<=O[1])return O[2]+(L-O[0])}return 0}throw"unknown cmap table format "+t.format},L.U.glyphToPath=function(y,p){var N={cmds:[],crds:[]};if(y.SVG&&y.SVG.entries[p]){var t=y.SVG.entries[p];return null==t?N:("string"==typeof t&&(t=L.SVG.toPath(t),y.SVG.entries[p]=t),t)}if(y.CFF){var j={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:y.CFF.Private?y.CFF.Private.defaultWidthX:0,open:!1},z=y.CFF,O=y.CFF.Private;if(z.ROS){for(var h=0;z.FDSelect[h+2]<=p;)h+=2;O=z.FDArray[z.FDSelect[h+1]].Private}L.U._drawCFF(y.CFF.CharStrings[p],j,z,O,N)}else y.glyf&&L.U._drawGlyf(p,y,N);return N},L.U._drawGlyf=function(y,p,N){var t=p.glyf[y];null==t&&(t=p.glyf[y]=L.glyf._parseGlyf(p,y)),null!=t&&(t.noc>-1?L.U._simpleGlyph(t,N):L.U._compoGlyph(t,p,N))},L.U._simpleGlyph=function(y,p){for(var N=0;N<y.noc;N++){for(var t=0==N?0:y.endPts[N-1]+1,j=y.endPts[N],z=t;z<=j;z++){var O=z==t?j:z-1,h=z==j?t:z+1,m=1&y.flags[z],k=1&y.flags[O],_=1&y.flags[h],W=y.xs[z],g=y.ys[z];if(z==t)if(m){if(!k){L.U.P.moveTo(p,W,g);continue}L.U.P.moveTo(p,y.xs[O],y.ys[O])}else k?L.U.P.moveTo(p,y.xs[O],y.ys[O]):L.U.P.moveTo(p,(y.xs[O]+W)/2,(y.ys[O]+g)/2);m?k&&L.U.P.lineTo(p,W,g):_?L.U.P.qcurveTo(p,W,g,y.xs[h],y.ys[h]):L.U.P.qcurveTo(p,W,g,(W+y.xs[h])/2,(g+y.ys[h])/2)}L.U.P.closePath(p)}},L.U._compoGlyph=function(y,p,N){for(var t=0;t<y.parts.length;t++){var j={cmds:[],crds:[]},z=y.parts[t];L.U._drawGlyf(z.glyphIndex,p,j);for(var O=z.m,h=0;h<j.crds.length;h+=2){var m=j.crds[h],k=j.crds[h+1];N.crds.push(m*O.a+k*O.b+O.tx),N.crds.push(m*O.c+k*O.d+O.ty)}for(h=0;h<j.cmds.length;h++)N.cmds.push(j.cmds[h])}},L.U._getGlyphClass=function(y,p){var N=L._lctf.getInterval(p,y);return-1==N?0:p[N+2]},L.U.getPairAdjustment=function(y,p,N){var t=!1;if(y.GPOS)for(var j=y.GPOS,z=j.lookupList,O=j.featureList,h=[],m=0;m<O.length;m++){var k=O[m];if("kern"==k.tag){t=!0;for(var _=0;_<k.tab.length;_++)if(!h[k.tab[_]]){h[k.tab[_]]=!0;for(var W=z[k.tab[_]],g=0;g<W.tabs.length;g++)if(null!=W.tabs[g]){var C,Q=W.tabs[g];if(!Q.coverage||-1!=(C=L._lctf.coverageIndex(Q.coverage,p)))if(1==W.ltype);else if(2==W.ltype){var T=null;if(1==Q.fmt){var i=Q.pairsets[C];for(m=0;m<i.length;m++)i[m].gid2==N&&(T=i[m])}else if(2==Q.fmt){var D=L.U._getGlyphClass(p,Q.classDef1),w=L.U._getGlyphClass(N,Q.classDef2);T=Q.matrix[D][w]}if(T){var x=0;return T.val1&&T.val1[2]&&(x+=T.val1[2]),T.val2&&T.val2[0]&&(x+=T.val2[0]),x}}}}}}if(y.kern&&!t){var d=y.kern.glyph1.indexOf(p);if(-1!=d){var o=y.kern.rval[d].glyph2.indexOf(N);if(-1!=o)return y.kern.rval[d].vals[o]}}return 0},L.U._applySubs=function(y,p,N,t){for(var j=y.length-p-1,z=0;z<N.tabs.length;z++)if(null!=N.tabs[z]){var O,h=N.tabs[z];if(!h.coverage||-1!=(O=L._lctf.coverageIndex(h.coverage,y[p])))if(1==N.ltype)y[p],1==h.fmt?y[p]=y[p]+h.delta:y[p]=h.newg[O];else if(4==N.ltype)for(var m=h.vals[O],k=0;k<m.length;k++){var _=m[k],W=_.chain.length;if(!(W>j)){for(var g=!0,C=0,Q=0;Q<W;Q++){for(;-1==y[p+C+(1+Q)];)C++;_.chain[Q]!=y[p+C+(1+Q)]&&(g=!1)}if(g){for(y[p]=_.nglyph,Q=0;Q<W+C;Q++)y[p+Q+1]=-1;break}}}else if(5==N.ltype&&2==h.fmt)for(var T=L._lctf.getInterval(h.cDef,y[p]),i=h.cDef[T+2],D=h.scset[i],w=0;w<D.length;w++){var x=D[w],d=x.input;if(!(d.length>j)){for(g=!0,Q=0;Q<d.length;Q++){var o=L._lctf.getInterval(h.cDef,y[p+1+Q]);if(-1==T&&h.cDef[o+2]!=d[Q]){g=!1;break}}if(g){var U=x.substLookupRecords;for(k=0;k<U.length;k+=2)U[k],U[k+1]}}}else if(6==N.ltype&&3==h.fmt){if(!L.U._glsCovered(y,h.backCvg,p-h.backCvg.length))continue;if(!L.U._glsCovered(y,h.inptCvg,p))continue;if(!L.U._glsCovered(y,h.ahedCvg,p+h.inptCvg.length))continue;var I=h.lookupRec;for(w=0;w<I.length;w+=2){T=I[w];var V=t[I[w+1]];L.U._applySubs(y,p+T,V,t)}}}},L.U._glsCovered=function(y,p,N){for(var t=0;t<p.length;t++)if(-1==L._lctf.coverageIndex(p[t],y[N+t]))return!1;return!0},L.U.glyphsToPath=function(y,p,N){for(var t={cmds:[],crds:[]},j=0,z=0;z<p.length;z++){var O=p[z];if(-1!=O){for(var h=z<p.length-1&&-1!=p[z+1]?p[z+1]:0,m=L.U.glyphToPath(y,O),k=0;k<m.crds.length;k+=2)t.crds.push(m.crds[k]+j),t.crds.push(m.crds[k+1]);for(N&&t.cmds.push(N),k=0;k<m.cmds.length;k++)t.cmds.push(m.cmds[k]);N&&t.cmds.push("X"),j+=y.hmtx.aWidth[O],z<p.length-1&&(j+=L.U.getPairAdjustment(y,O,h))}}return t},L.U.P={},L.U.P.moveTo=function(y,L,p){y.cmds.push("M"),y.crds.push(L,p)},L.U.P.lineTo=function(y,L,p){y.cmds.push("L"),y.crds.push(L,p)},L.U.P.curveTo=function(y,L,p,N,t,j,z){y.cmds.push("C"),y.crds.push(L,p,N,t,j,z)},L.U.P.qcurveTo=function(y,L,p,N,t){y.cmds.push("Q"),y.crds.push(L,p,N,t)},L.U.P.closePath=function(y){y.cmds.push("Z")},L.U._drawCFF=function(y,p,N,t,j){for(var z=p.stack,O=p.nStems,h=p.haveWidth,m=p.width,k=p.open,_=0,W=p.x,g=p.y,C=0,Q=0,T=0,i=0,D=0,w=0,x=0,d=0,o=0,U=0,I={val:0,size:0};_<y.length;){L.CFF.getCharString(y,_,I);var V=I.val;if(_+=I.size,"o1"==V||"o18"==V)z.length%2!=0&&!h&&(m=z.shift()+t.nominalWidthX),O+=z.length>>1,z.length=0,h=!0;else if("o3"==V||"o23"==V)z.length%2!=0&&!h&&(m=z.shift()+t.nominalWidthX),O+=z.length>>1,z.length=0,h=!0;else if("o4"==V)z.length>1&&!h&&(m=z.shift()+t.nominalWidthX,h=!0),k&&L.U.P.closePath(j),g+=z.pop(),L.U.P.moveTo(j,W,g),k=!0;else if("o5"==V)for(;z.length>0;)W+=z.shift(),g+=z.shift(),L.U.P.lineTo(j,W,g);else if("o6"==V||"o7"==V)for(var F=z.length,u="o6"==V,S=0;S<F;S++){var B=z.shift();u?W+=B:g+=B,u=!u,L.U.P.lineTo(j,W,g)}else if("o8"==V||"o24"==V){F=z.length;for(var R=0;R+6<=F;)C=W+z.shift(),Q=g+z.shift(),T=C+z.shift(),i=Q+z.shift(),W=T+z.shift(),g=i+z.shift(),L.U.P.curveTo(j,C,Q,T,i,W,g),R+=6;"o24"==V&&(W+=z.shift(),g+=z.shift(),L.U.P.lineTo(j,W,g))}else{if("o11"==V)break;if("o1234"==V||"o1235"==V||"o1236"==V||"o1237"==V)"o1234"==V&&(Q=g,T=(C=W+z.shift())+z.shift(),U=i=Q+z.shift(),w=i,d=g,W=(x=(D=(o=T+z.shift())+z.shift())+z.shift())+z.shift(),L.U.P.curveTo(j,C,Q,T,i,o,U),L.U.P.curveTo(j,D,w,x,d,W,g)),"o1235"==V&&(C=W+z.shift(),Q=g+z.shift(),T=C+z.shift(),i=Q+z.shift(),o=T+z.shift(),U=i+z.shift(),D=o+z.shift(),w=U+z.shift(),x=D+z.shift(),d=w+z.shift(),W=x+z.shift(),g=d+z.shift(),z.shift(),L.U.P.curveTo(j,C,Q,T,i,o,U),L.U.P.curveTo(j,D,w,x,d,W,g)),"o1236"==V&&(C=W+z.shift(),Q=g+z.shift(),T=C+z.shift(),U=i=Q+z.shift(),w=i,x=(D=(o=T+z.shift())+z.shift())+z.shift(),d=w+z.shift(),W=x+z.shift(),L.U.P.curveTo(j,C,Q,T,i,o,U),L.U.P.curveTo(j,D,w,x,d,W,g)),"o1237"==V&&(C=W+z.shift(),Q=g+z.shift(),T=C+z.shift(),i=Q+z.shift(),o=T+z.shift(),U=i+z.shift(),D=o+z.shift(),w=U+z.shift(),x=D+z.shift(),d=w+z.shift(),Math.abs(x-W)>Math.abs(d-g)?W=x+z.shift():g=d+z.shift(),L.U.P.curveTo(j,C,Q,T,i,o,U),L.U.P.curveTo(j,D,w,x,d,W,g));else if("o14"==V){if(z.length>0&&!h&&(m=z.shift()+N.nominalWidthX,h=!0),4==z.length){var Y=z.shift(),E=z.shift(),P=z.shift(),l=z.shift(),M=L.CFF.glyphBySE(N,P),f=L.CFF.glyphBySE(N,l);L.U._drawCFF(N.CharStrings[M],p,N,t,j),p.x=Y,p.y=E,L.U._drawCFF(N.CharStrings[f],p,N,t,j)}k&&(L.U.P.closePath(j),k=!1)}else if("o19"==V||"o20"==V)z.length%2!=0&&!h&&(m=z.shift()+t.nominalWidthX),O+=z.length>>1,z.length=0,h=!0,_+=O+7>>3;else if("o21"==V)z.length>2&&!h&&(m=z.shift()+t.nominalWidthX,h=!0),g+=z.pop(),W+=z.pop(),k&&L.U.P.closePath(j),L.U.P.moveTo(j,W,g),k=!0;else if("o22"==V)z.length>1&&!h&&(m=z.shift()+t.nominalWidthX,h=!0),W+=z.pop(),k&&L.U.P.closePath(j),L.U.P.moveTo(j,W,g),k=!0;else if("o25"==V){for(;z.length>6;)W+=z.shift(),g+=z.shift(),L.U.P.lineTo(j,W,g);C=W+z.shift(),Q=g+z.shift(),T=C+z.shift(),i=Q+z.shift(),W=T+z.shift(),g=i+z.shift(),L.U.P.curveTo(j,C,Q,T,i,W,g)}else if("o26"==V)for(z.length%2&&(W+=z.shift());z.length>0;)C=W,Q=g+z.shift(),W=T=C+z.shift(),g=(i=Q+z.shift())+z.shift(),L.U.P.curveTo(j,C,Q,T,i,W,g);else if("o27"==V)for(z.length%2&&(g+=z.shift());z.length>0;)Q=g,T=(C=W+z.shift())+z.shift(),i=Q+z.shift(),W=T+z.shift(),g=i,L.U.P.curveTo(j,C,Q,T,i,W,g);else if("o10"==V||"o29"==V){var a="o10"==V?t:N;if(0==z.length)console.debug("error: empty stack");else{var H=z.pop(),X=a.Subrs[H+a.Bias];p.x=W,p.y=g,p.nStems=O,p.haveWidth=h,p.width=m,p.open=k,L.U._drawCFF(X,p,N,t,j),W=p.x,g=p.y,O=p.nStems,h=p.haveWidth,m=p.width,k=p.open}}else if("o30"==V||"o31"==V){var J=z.length,r=(R=0,"o31"==V);for(R+=J-(F=-3&J);R<F;)r?(Q=g,T=(C=W+z.shift())+z.shift(),g=(i=Q+z.shift())+z.shift(),F-R==5?(W=T+z.shift(),R++):W=T,r=!1):(C=W,Q=g+z.shift(),T=C+z.shift(),i=Q+z.shift(),W=T+z.shift(),F-R==5?(g=i+z.shift(),R++):g=i,r=!0),L.U.P.curveTo(j,C,Q,T,i,W,g),R+=4}else{if("o"==(V+"").charAt(0))throw console.debug("Unknown operation: "+V,y),V;z.push(V)}}}p.x=W,p.y=g,p.nStems=O,p.haveWidth=h,p.width=m,p.open=k};var p=L,N={Typr:p};return y.Typr=p,y.default=N,Object.defineProperty(y,"__esModule",{value:!0}),y}({}).Typr},function(){return function(y){var L=Uint8Array,p=Uint16Array,N=Uint32Array,t=new L([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),j=new L([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),z=new L([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),O=function(y,L){for(var t=new p(31),j=0;j<31;++j)t[j]=L+=1<<y[j-1];var z=new N(t[30]);for(j=1;j<30;++j)for(var O=t[j];O<t[j+1];++O)z[O]=O-t[j]<<5|j;return[t,z]},h=O(t,2),m=h[0],k=h[1];m[28]=258,k[258]=28;for(var _=O(j,0)[0],W=new p(32768),g=0;g<32768;++g){var C=(43690&g)>>>1|(21845&g)<<1;C=(61680&(C=(52428&C)>>>2|(13107&C)<<2))>>>4|(3855&C)<<4,W[g]=((65280&C)>>>8|(255&C)<<8)>>>1}var Q=function(y,L,N){for(var t=y.length,j=0,z=new p(L);j<t;++j)++z[y[j]-1];var O,h=new p(L);for(j=0;j<L;++j)h[j]=h[j-1]+z[j-1]<<1;if(N){O=new p(1<<L);var m=15-L;for(j=0;j<t;++j)if(y[j])for(var k=j<<4|y[j],_=L-y[j],g=h[y[j]-1]++<<_,C=g|(1<<_)-1;g<=C;++g)O[W[g]>>>m]=k}else for(O=new p(t),j=0;j<t;++j)y[j]&&(O[j]=W[h[y[j]-1]++]>>>15-y[j]);return O},T=new L(288);for(g=0;g<144;++g)T[g]=8;for(g=144;g<256;++g)T[g]=9;for(g=256;g<280;++g)T[g]=7;for(g=280;g<288;++g)T[g]=8;var i=new L(32);for(g=0;g<32;++g)i[g]=5;var D=Q(T,9,1),w=Q(i,5,1),x=function(y){for(var L=y[0],p=1;p<y.length;++p)y[p]>L&&(L=y[p]);return L},d=function(y,L,p){var N=L/8|0;return(y[N]|y[N+1]<<8)>>(7&L)&p},o=function(y,L){var p=L/8|0;return(y[p]|y[p+1]<<8|y[p+2]<<16)>>(7&L)},U=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],I=function(y,L,p){var N=new Error(L||U[y]);if(N.code=y,Error.captureStackTrace&&Error.captureStackTrace(N,I),!p)throw N;return N},V=function(y,O,h){var k=y.length;if(!k||h&&!h.l&&k<5)return O||new L(0);var W=!O||h,g=!h||h.i;h||(h={}),O||(O=new L(3*k));var C,T=function(y){var p=O.length;if(y>p){var N=new L(Math.max(2*p,y));N.set(O),O=N}},i=h.f||0,U=h.p||0,V=h.b||0,F=h.l,u=h.d,S=h.m,B=h.n,R=8*k;do{if(!F){h.f=i=d(y,U,1);var Y=d(y,U+1,3);if(U+=3,!Y){var E=y[($=((C=U)/8|0)+(7&C&&1)+4)-4]|y[$-3]<<8,P=$+E;if(P>k){g&&I(0);break}W&&T(V+E),O.set(y.subarray($,P),V),h.b=V+=E,h.p=U=8*P;continue}if(1==Y)F=D,u=w,S=9,B=5;else if(2==Y){var l=d(y,U,31)+257,M=d(y,U+10,15)+4,f=l+d(y,U+5,31)+1;U+=14;for(var a=new L(f),H=new L(19),X=0;X<M;++X)H[z[X]]=d(y,U+3*X,7);U+=3*M;var J=x(H),r=(1<<J)-1,G=Q(H,J,1);for(X=0;X<f;){var $,q=G[d(y,U,r)];if(U+=15&q,($=q>>>4)<16)a[X++]=$;else{var A=0,s=0;for(16==$?(s=3+d(y,U,3),U+=2,A=a[X-1]):17==$?(s=3+d(y,U,7),U+=3):18==$&&(s=11+d(y,U,127),U+=7);s--;)a[X++]=A}}var c=a.subarray(0,l),K=a.subarray(l);S=x(c),B=x(K),F=Q(c,S,1),u=Q(K,B,1)}else I(1);if(U>R){g&&I(0);break}}W&&T(V+131072);for(var b=(1<<S)-1,n=(1<<B)-1,v=U;;v=U){var e=(A=F[o(y,U)&b])>>>4;if((U+=15&A)>R){g&&I(0);break}if(A||I(2),e<256)O[V++]=e;else{if(256==e){v=U,F=null;break}var Z=e-254;if(e>264){var yy=t[X=e-257];Z=d(y,U,(1<<yy)-1)+m[X],U+=yy}var Ly=u[o(y,U)&n],py=Ly>>>4;if(Ly||I(3),U+=15&Ly,K=_[py],py>3&&(yy=j[py],K+=o(y,U)&(1<<yy)-1,U+=yy),U>R){g&&I(0);break}W&&T(V+131072);for(var Ny=V+Z;V<Ny;V+=4)O[V]=O[V-K],O[V+1]=O[V+1-K],O[V+2]=O[V+2-K],O[V+3]=O[V+3-K];V=Ny}}h.l=F,h.p=v,h.b=V,F&&(i=1,h.m=S,h.d=u,h.n=B)}while(!i);return V==O.length?O:function(y,t,j){(null==t||t<0)&&(t=0),(null==j||j>y.length)&&(j=y.length);var z=new(y instanceof p?p:y instanceof N?N:L)(j-t);return z.set(y.subarray(t,j)),z}(O,0,V)},F=new L(0),u="undefined"!=typeof TextDecoder&&new TextDecoder;try{u.decode(F,{stream:!0})}catch(y){}return y.convert_streams=function(y){var L=new DataView(y),p=0;function N(){var y=L.getUint16(p);return p+=2,y}function t(){var y=L.getUint32(p);return p+=4,y}function j(y){i.setUint16(D,y),D+=2}function z(y){i.setUint32(D,y),D+=4}for(var O={signature:t(),flavor:t(),length:t(),numTables:N(),reserved:N(),totalSfntSize:t(),majorVersion:N(),minorVersion:N(),metaOffset:t(),metaLength:t(),metaOrigLength:t(),privOffset:t(),privLength:t()},h=0;Math.pow(2,h)<=O.numTables;)h++;h--;for(var m=16*Math.pow(2,h),k=16*O.numTables-m,_=12,W=[],g=0;g<O.numTables;g++)W.push({tag:t(),offset:t(),compLength:t(),origLength:t(),origChecksum:t()}),_+=16;var C,Q=new Uint8Array(12+16*W.length+W.reduce((function(y,L){return y+L.origLength+4}),0)),T=Q.buffer,i=new DataView(T),D=0;return z(O.flavor),j(O.numTables),j(m),j(h),j(k),W.forEach((function(y){z(y.tag),z(y.origChecksum),z(_),z(y.origLength),y.outOffset=_,(_+=y.origLength)%4!=0&&(_+=4-_%4)})),W.forEach((function(L){var p,N=y.slice(L.offset,L.offset+L.compLength);if(L.compLength!=L.origLength){var t=new Uint8Array(L.origLength);p=new Uint8Array(N,2),V(p,t)}else t=new Uint8Array(N);Q.set(t,L.outOffset);var j=0;(_=L.outOffset+L.origLength)%4!=0&&(j=4-_%4),Q.set(new Uint8Array(j).buffer,L.outOffset+L.origLength),C=_+j})),T.slice(0,C)},Object.defineProperty(y,"__esModule",{value:!0}),y}({}).convert_streams},function(y,L){const p={M:2,L:2,Q:4,C:6,Z:0},N={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},t=1,j=2,z=4,O=8,h=16,m=32;let k;function _(y){if(!k){const y={R:j,L:t,D:z,C:h,U:m,T:O};k=new Map;for(let L in N){let p=0;N[L].split(",").forEach((N=>{let[t,j]=N.split("+");t=parseInt(t,36),j=j?parseInt(j,36):0,k.set(p+=t,y[L]);for(let N=j;N--;)k.set(++p,y[L])}))}}return k.get(y)||m}const W=1,g=2,C=3,Q=4,T=[null,"isol","init","fina","medi"];function i(y){const L=new Uint8Array(y.length);let p=m,N=W,k=-1;for(let T=0;T<y.length;T++){const i=y.codePointAt(T);let D=0|_(i),w=W;D&O||(p&(t|z|h)?D&(j|z|h)?(w=C,N!==W&&N!==C||L[k]++):D&(t|m)&&(N!==g&&N!==Q||L[k]--):p&(j|m)&&(N!==g&&N!==Q||L[k]--),N=L[T]=w,p=D,k=T,i>65535&&T++)}return L}function D(...y){for(let L=0;L<y.length;L++)if("number"==typeof y[L])return y[L]}return function(N){const t=new Uint8Array(N,0,4),j=y._bin.readASCII(t,0,4);if("wOFF"===j)N=L(N);else if("wOF2"===j)throw new Error("woff2 fonts not supported");return function(L){const N=Object.create(null),t=L["OS/2"],j=L.hhea,z=L.head.unitsPerEm,O=D(t&&t.sTypoAscender,j&&j.ascender,z),h={unitsPerEm:z,ascender:O,descender:D(t&&t.sTypoDescender,j&&j.descender,0),capHeight:D(t&&t.sCapHeight,O),xHeight:D(t&&t.sxHeight,O),lineGap:D(t&&t.sTypoLineGap,j&&j.lineGap),forEachGlyph(t,j,z,O){let m=0;const k=1/h.unitsPerEm*j,_=function(L,p){const N=[];for(let t=0;t<p.length;t++){const j=p.codePointAt(t);j>65535&&t++,N.push(y.U.codeToGlyph(L,j))}const t=L["GSUB"];if(t){const{lookupList:L,featureList:j}=t;let z;const O=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,h=[];j.forEach((t=>{if(O.test(t.tag))for(let j=0;j<t.tab.length;j++){if(h[t.tab[j]])continue;h[t.tab[j]]=!0;const O=L[t.tab[j]],m=/^(isol|init|fina|medi)$/.test(t.tag);m&&!z&&(z=i(p));for(let p=0;p<N.length;p++)z&&m&&T[z[p]]!==t.tag||y.U._applySubs(N,p,O,L)}}))}return N}(L,t);let W=0,g=-1;return _.forEach(((h,_)=>{if(-1!==h){let t=N[h];if(!t){const{cmds:j,crds:z}=y.U.glyphToPath(L,h);let O,m,k,_,W="",g=0;for(let y=0,L=j.length;y<L;y++){const L=p[j[y]];W+=j[y];for(let y=1;y<=L;y++)W+=(y>1?",":"")+z[g++]}if(z.length){O=m=1/0,k=_=-1/0;for(let y=0,L=z.length;y<L;y+=2){let L=z[y],p=z[y+1];L<O&&(O=L),p<m&&(m=p),L>k&&(k=L),p>_&&(_=p)}}else O=k=m=_=0;t=N[h]={index:h,advanceWidth:L.hmtx.aWidth[h],xMin:O,yMin:m,xMax:k,yMax:_,path:W,pathCommandCount:j.length}}-1!==g&&(m+=y.U.getPairAdjustment(L,g,h)*k),O.call(null,t,m,W),t.advanceWidth&&(m+=t.advanceWidth*k),z&&(m+=z*j),g=h}W+=t.codePointAt(W)>65535?2:1})),m}};return h}(y.parse(N)[0])}}],init:(y,L,p)=>p(y(),L())}),To={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},io=new pj;let Do=!1;function wo(){return(self.performance||Date).now()}const xo=Object.create(null);function oo(y,L){Do=!0,y=function(y,L){for(let p in L)L.hasOwnProperty(p)&&(y[p]=L[p]);return y}({},y);const p=wo();if(y.font=(N=y.font||To.defaultFontURL,Io||(Io="undefined"==typeof document?{}:document.createElement("a")),Io.href=N,Io.href),y.text=""+y.text,y.sdfGlyphSize=y.sdfGlyphSize||To.sdfGlyphSize,null!=y.colorRanges){let L={};for(let p in y.colorRanges)if(y.colorRanges.hasOwnProperty(p)){let N=y.colorRanges[p];"number"!=typeof N&&(N=io.set(N).getHex()),L[p]=N}y.colorRanges=L}var N;Object.freeze(y);const{textureWidth:t,sdfExponent:j}=To,{sdfGlyphSize:z}=y,O=t/z*4;let h=xo[z];if(!h){const y=document.createElement("canvas");y.width=t,y.height=256*z/O,h=xo[z]={glyphCount:0,sdfGlyphSize:z,sdfCanvas:y,sdfTexture:new FN(y,void 0,void 0,void 0,Ey,Ey),contextLost:!1,glyphsByFont:new Map},h.sdfTexture.generateMipmaps=!1,function(y){const L=y.sdfCanvas;L.addEventListener("webglcontextlost",(L=>{console.log("Context Lost",L),L.preventDefault(),y.contextLost=!0})),L.addEventListener("webglcontextrestored",(L=>{console.log("Context Restored",L),y.contextLost=!1;const p=[];y.glyphsByFont.forEach((L=>{L.forEach((L=>{p.push(Uo(L,y,!0))}))})),Promise.all(p).then((()=>{Vo(y),y.sdfTexture.needsUpdate=!0}))}))}(h)}const{sdfTexture:m,sdfCanvas:k}=h;let _=h.glyphsByFont.get(y.font);_||h.glyphsByFont.set(y.font,_=new Map),uo(y).then((N=>{const{glyphIds:W,glyphPositions:g,fontSize:C,unitsPerEm:Q,timings:T}=N,i=[],D=new Float32Array(4*W.length),w=C/Q;let x=0,d=0;const o=wo();W.forEach(((y,L)=>{let p=_.get(y);if(!p){const{path:L,pathBounds:t}=N.glyphData[y],j=Math.max(t[2]-t[0],t[3]-t[1])/z*(To.sdfMargin*z+.5),O=h.glyphCount++,m=[t[0]-j,t[1]-j,t[2]+j,t[3]+j];_.set(y,p={path:L,atlasIndex:O,sdfViewBox:m}),i.push(p)}const{sdfViewBox:t}=p,j=g[d++],O=g[d++];D[x++]=j+t[0]*w,D[x++]=O+t[1]*w,D[x++]=j+t[2]*w,D[x++]=O+t[3]*w,W[L]=p.atlasIndex})),T.quads=(T.quads||0)+(wo()-o);const U=wo();T.sdf={};const I=k.height,V=Math.ceil(h.glyphCount/O),F=Math.pow(2,Math.ceil(Math.log2(V*z)));F>I&&(console.info(`Increasing SDF texture size ${I}->${F}`),Co(k,t,F),m.dispose()),Promise.all(i.map((L=>Uo(L,h,y.gpuAccelerateSDF).then((({timing:y})=>{T.sdf[L.atlasIndex]=y}))))).then((()=>{i.length&&!h.contextLost&&(Vo(h),m.needsUpdate=!0),T.sdfTotal=wo()-U,T.total=wo()-p,L(Object.freeze({parameters:y,sdfTexture:m,sdfGlyphSize:z,sdfExponent:j,glyphBounds:D,glyphAtlasIndices:W,glyphColors:N.glyphColors,caretPositions:N.caretPositions,caretHeight:N.caretHeight,chunkedBounds:N.chunkedBounds,ascender:N.ascender,descender:N.descender,lineHeight:N.lineHeight,capHeight:N.capHeight,xHeight:N.xHeight,topBaseline:N.topBaseline,blockBounds:N.blockBounds,visibleBounds:N.visibleBounds,timings:N.timings}))}))})),Promise.resolve().then((()=>{var y;h.contextLost||(y=k)._warm||(No.webgl.isSupported(y),y._warm=!0)}))}function Uo({path:y,atlasIndex:L,sdfViewBox:p},{sdfGlyphSize:N,sdfCanvas:t,contextLost:j},z){if(j)return Promise.resolve({timing:-1});const{textureWidth:O,sdfExponent:h}=To,m=Math.max(p[2]-p[0],p[3]-p[1]),k=Math.floor(L/4);return function(y,L,p,N,t,j,z,O,h,m,k=!0){return k?((...y)=>new Promise(((L,p)=>{jo.push((()=>{const N=po();try{No.webgl.generateIntoCanvas(...y),L({timing:po()-N})}catch(y){p(y)}})),Oo||(Oo=setTimeout(ho,0))})))(y,L,p,N,t,j,z,O,h,m).then(null,(k=>(to||(console.warn(`WebGL SDF generation failed, falling back to JS`,k),to=!0),go(y,L,p,N,t,j,z,O,h,m)))):go(y,L,p,N,t,j,z,O,h,m)}(N,N,y,p,m,h,t,k%(O/N)*N,Math.floor(k/(O/N))*N,L%4,z)}let Io;function Vo(y){if("function"!=typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:L,sdfTexture:p}=y,{width:N,height:t}=L,j=y.sdfCanvas.getContext("webgl");let z=p.image.data;z&&z.length===N*t*4||(z=new Uint8Array(N*t*4),p.image={width:N,height:t,data:z},p.flipY=!1,p.isDataTexture=!0),j.readPixels(0,0,N,t,j.RGBA,j.UNSIGNED_BYTE,z)}}const Fo=Xd({name:"Typesetter",dependencies:[To,Qo,function(y,L,p){const{defaultFontURL:N}=p,t=Object.create(null),j=1/0,z=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,O=`[^\\S\\u00A0]`,h=new RegExp(`${O}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function m(L,p){L||(L=N);let j=t[L];var z;j?j.pending?j.pending.push(p):p(j):(t[L]={pending:[p]},z=L,function p(){const j=y=>{console.error(`Failure loading font ${z}${z===N?"":"; trying fallback"}`,y),z!==N&&(z=N,p())};try{const p=new XMLHttpRequest;p.open("get",z,!0),p.responseType="arraybuffer",p.onload=function(){if(p.status>=400)j(new Error(p.statusText));else if(p.status>0)try{(y=>{let p=t[L].pending;t[L]=y,p.forEach((L=>L(y)))})(y(p.response))}catch(y){j(y)}},p.onerror=j,p.send()}catch(y){j(y)}}())}function k({text:y="",font:p=N,sdfGlyphSize:t=64,fontSize:k=1,letterSpacing:Q=0,lineHeight:T="normal",maxWidth:i=j,direction:D,textAlign:w="left",textIndent:x=0,whiteSpace:d="normal",overflowWrap:o="normal",anchorX:U=0,anchorY:I=0,includeCaretPositions:V=!1,chunkedBoundsSize:F=8192,colorRanges:u=null},S,B=!1){const R=g(),Y={fontLoad:0,typesetting:0};y.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),y=y.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),k=+k,Q=+Q,i=+i,T=T||"normal",x=+x,m(p,(p=>{const N=isFinite(i);let t=null,m=null,E=null,P=null,l=null,M=null,f=null,a=0,H=0,X="nowrap"!==d;const{ascender:J,descender:r,unitsPerEm:G,lineGap:$,capHeight:q,xHeight:A}=p;Y.fontLoad=g()-R;const s=g(),c=k/G;"normal"===T&&(T=(J-r+$)/G);const K=((T*=k)-(J-r)*c)/2,b=-(J*c+K),n=Math.min(T,(J-r)*c),v=(J+r)/2*c-n/2;let e=x,Z=new C;const yy=[Z];p.forEachGlyph(y,k,Q,((L,p,t)=>{const j=y.charAt(t),m=L.advanceWidth*c,_=Z.count;let W;if("isEmpty"in L||(L.isWhitespace=!!j&&new RegExp(O).test(j),L.canBreakAfter=!!j&&h.test(j),L.isEmpty=L.xMin===L.xMax||L.yMin===L.yMax||z.test(j)),L.isWhitespace||L.isEmpty||H++,X&&N&&!L.isWhitespace&&p+m+e>i&&_){if(Z.glyphAt(_-1).glyphObj.canBreakAfter)W=new C,e=-p;else for(let y=_;y--;){if(0===y&&"break-word"===o){W=new C,e=-p;break}if(Z.glyphAt(y).glyphObj.canBreakAfter){W=Z.splitAt(y+1);const L=W.glyphAt(0).x;e-=L;for(let y=W.count;y--;)W.glyphAt(y).x-=L;break}}W&&(Z.isSoftWrapped=!0,Z=W,yy.push(Z),a=i)}let g=Z.glyphAt(Z.count);g.glyphObj=L,g.x=p+e,g.width=m,g.charIndex=t,"\n"===j&&(Z=new C,yy.push(Z),e=-(p+m+Q*k)+x)})),yy.forEach((y=>{for(let L=y.count;L--;){let{glyphObj:p,x:N,width:t}=y.glyphAt(L);if(!p.isWhitespace)return y.width=N+t,void(y.width>a&&(a=y.width))}}));let Ly=0,py=0;if(U&&("number"==typeof U?Ly=-U:"string"==typeof U&&(Ly=-a*("left"===U?0:"center"===U?.5:"right"===U?1:_(U)))),I)if("number"==typeof I)py=-I;else if("string"==typeof I){let y=yy.length*T;py="top"===I?0:"top-baseline"===I?-b:"top-cap"===I?-b-q*c:"top-ex"===I?-b-A*c:"middle"===I?y/2:"bottom"===I?y:"bottom-baseline"===I?y-K+r*c:_(I)*y}if(!B){const N=L.getEmbeddingLevels(y,D);t=new Uint16Array(H),m=new Float32Array(2*H),E={},M=[j,j,-j,-j],f=[];let z=b;V&&(l=new Float32Array(3*y.length)),u&&(P=new Uint8Array(3*H));let O,h,k=0,_=-1,g=-1;if(yy.forEach(((C,Q)=>{let{count:i,width:D}=C;if(i>0){let Q=0;for(let y=i;y--&&C.glyphAt(y).glyphObj.isWhitespace;)Q++;let T=0,x=0;if("center"===w)T=(a-D)/2;else if("right"===w)T=a-D;else if("justify"===w&&C.isSoftWrapped){let y=0;for(let L=i-Q;L--;)C.glyphAt(L).glyphObj.isWhitespace&&y++;x=(a-D)/y}if(x||T){let y=0;for(let L=0;L<i;L++){let p=C.glyphAt(L);const N=p.glyphObj;p.x+=T+y,0!==x&&N.isWhitespace&&L<i-Q&&(y+=x,p.width+=x)}}const d=L.getReorderSegments(y,N,C.glyphAt(0).charIndex,C.glyphAt(C.count-1).charIndex);for(let y=0;y<d.length;y++){const[L,p]=d[y];let N=1/0,t=-1/0;for(let y=0;y<i;y++)if(C.glyphAt(y).charIndex>=L){let L=y,j=y;for(;j<i;j++){let y=C.glyphAt(j);if(y.charIndex>p)break;j<i-Q&&(N=Math.min(N,y.x),t=Math.max(t,y.x+y.width))}for(let y=L;y<j;y++){const L=C.glyphAt(y);L.x=t-(L.x+L.width-N)}break}}let o;const U=y=>o=y;for(let Q=0;Q<i;Q++){let T=C.glyphAt(Q);o=T.glyphObj;const i=o.index,D=1&N.levels[T.charIndex];if(D){const N=L.getMirroredCharacter(y[T.charIndex]);N&&p.forEachGlyph(N,0,0,U)}if(V){const{charIndex:y}=T,L=T.x+Ly,p=T.x+T.width+Ly;l[3*y]=D?p:L,l[3*y+1]=D?L:p,l[3*y+2]=z+v+py;const N=y-_;N>1&&W(l,_,N),_=y}if(u){const{charIndex:y}=T;for(;y>g;)g++,u.hasOwnProperty(g)&&(h=u[g])}if(!o.isWhitespace&&!o.isEmpty){const y=k++;E[i]||(E[i]={path:o.path,pathBounds:[o.xMin,o.yMin,o.xMax,o.yMax]});const L=T.x+Ly,p=z+py;m[2*y]=L,m[2*y+1]=p;const N=L+o.xMin*c,_=p+o.yMin*c,W=L+o.xMax*c,g=p+o.yMax*c;N<M[0]&&(M[0]=N),_<M[1]&&(M[1]=_),W>M[2]&&(M[2]=W),g>M[3]&&(M[3]=g),y%F==0&&(O={start:y,end:y,rect:[j,j,-j,-j]},f.push(O)),O.end++;const C=O.rect;if(N<C[0]&&(C[0]=N),_<C[1]&&(C[1]=_),W>C[2]&&(C[2]=W),g>C[3]&&(C[3]=g),t[y]=i,u){const L=3*y;P[L]=h>>16&255,P[L+1]=h>>8&255,P[L+2]=255&h}}}}z-=T})),l){const L=y.length-_;L>1&&W(l,_,L)}}Y.typesetting=g()-s,S({glyphIds:t,glyphPositions:m,glyphData:E,caretPositions:l,caretHeight:n,glyphColors:P,chunkedBounds:f,fontSize:k,unitsPerEm:G,ascender:J*c,descender:r*c,capHeight:q*c,xHeight:A*c,lineHeight:T,topBaseline:b,blockBounds:[Ly,py-yy.length*T,Ly+a,py],visibleBounds:M,timings:Y})}))}function _(y){let L=y.match(/^([\d.]+)%$/),p=L?parseFloat(L[1]):NaN;return isNaN(p)?0:p/100}function W(y,L,p){const N=y[3*L],t=y[3*L+1],j=y[3*L+2],z=(t-N)/p;for(let t=0;t<p;t++){const p=3*(L+t);y[p]=N+z*t,y[p+1]=N+z*(t+1),y[p+2]=j}}function g(){return(self.performance||Date).now()}function C(){this.data=[]}const Q=["glyphObj","x","width","charIndex"];return C.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/Q.length)},glyphAt(y){let L=C.flyweight;return L.data=this.data,L.index=y,L},splitAt(y){let L=new C;return L.data=this.data.splice(y*Q.length),L}},C.flyweight=Q.reduce(((y,L,p,N)=>(Object.defineProperty(y,L,{get(){return this.data[this.index*Q.length+p]},set(y){this.data[this.index*Q.length+p]=y}}),y)),{data:null,index:0}),{typeset:k,measure:function(y,L){k(y,(y=>{const[p,N,t,j]=y.blockBounds;L({width:t-p,height:j-N})}),{metricsOnly:!0})},loadFont:m}},function(){var y=function(y){var L={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},p={},N={};p.L=1,N[1]="L",Object.keys(L).forEach((function(y,L){p[y]=1<<L+1,N[p[y]]=y})),Object.freeze(p);var t=p.LRI|p.RLI|p.FSI,j=p.L|p.R|p.AL,z=p.B|p.S|p.WS|p.ON|p.FSI|p.LRI|p.RLI|p.PDI,O=p.BN|p.RLE|p.LRE|p.RLO|p.LRO|p.PDF,h=p.S|p.WS|p.B|t|p.PDI|O,m=null;function k(y){return function(){if(!m){m=new Map;var y=function(y){if(L.hasOwnProperty(y)){var N=0;L[y].split(",").forEach((function(L){var t=L.split("+"),j=t[0],z=t[1];j=parseInt(j,36),z=z?parseInt(z,36):0,m.set(N+=j,p[y]);for(var O=0;O<z;O++)m.set(++N,p[y])}))}};for(var N in L)y(N)}}(),m.get(y.codePointAt(0))||p.L}var _,W,g,C="14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",Q="6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye";function T(y,L){var p,N=36,t=0,j=new Map,z=L&&new Map;return y.split(",").forEach((function y(O){if(-1!==O.indexOf("+"))for(var h=+O;h--;)y(p);else{p=O;var m=O.split(">"),k=m[0],_=m[1];k=String.fromCodePoint(t+=parseInt(k,N)),_=String.fromCodePoint(t+=parseInt(_,N)),j.set(k,_),L&&z.set(_,k)}})),{map:j,reverseMap:z}}function i(){if(!_){var y=T(C,!0),L=y.map,p=y.reverseMap;_=L,W=p,g=T(Q,!1).map}}function D(y){return i(),_.get(y)||null}function w(y){return i(),W.get(y)||null}function x(y){return i(),g.get(y)||null}var d,o=p.L,U=p.R,I=p.EN,V=p.ES,F=p.ET,u=p.AN,S=p.CS,B=p.B,R=p.S,Y=p.ON,E=p.BN,P=p.NSM,l=p.AL,M=p.LRO,f=p.RLO,a=p.LRE,H=p.RLE,X=p.PDF,J=p.LRI,r=p.RLI,G=p.FSI,$=p.PDI,q="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1";function A(y){return function(){if(!d){var y=T(q,!0),L=y.map;y.reverseMap.forEach((function(y,p){L.set(p,y)})),d=L}}(),d.get(y)||null}function s(y,L,p,N){var t=y.length;p=Math.max(0,null==p?0:+p),N=Math.min(t-1,null==N?t-1:+N);var j=[];return L.paragraphs.forEach((function(t){var z=Math.max(p,t.start),O=Math.min(N,t.end);if(z<O){for(var m=L.levels.slice(z,O+1),_=O;_>=z&&k(y[_])&h;_--)m[_]=t.level;for(var W=t.level,g=1/0,C=0;C<m.length;C++){var Q=m[C];Q>W&&(W=Q),Q<g&&(g=1|Q)}for(var T=W;T>=g;T--)for(var i=0;i<m.length;i++)if(m[i]>=T){for(var D=i;i+1<m.length&&m[i+1]>=T;)i++;i>D&&j.push([D+p,i+p])}}})),j}function c(y,L,p,N){for(var t=s(y,L,p,N),j=[],z=0;z<y.length;z++)j[z]=z;return t.forEach((function(y){for(var L=y[0],p=y[1],N=j.slice(L,p+1),t=N.length;t--;)j[p-t]=N[t]})),j}return y.closingToOpeningBracket=w,y.getBidiCharType=k,y.getBidiCharTypeName=function(y){return N[k(y)]},y.getCanonicalBracket=x,y.getEmbeddingLevels=function(y,L){for(var p=125,N=new Uint32Array(y.length),m=0;m<y.length;m++)N[m]=k(y[m]);var _=new Map;function W(y,L){var p=N[y];N[y]=L,_.set(p,_.get(p)-1),p&z&&_.set(z,_.get(z)-1),_.set(L,(_.get(L)||0)+1),L&z&&_.set(z,(_.get(z)||0)+1)}for(var g=new Uint8Array(y.length),C=new Map,Q=[],T=null,i=0;i<y.length;i++)T||Q.push(T={start:i,end:y.length-1,level:"rtl"===L?1:"ltr"===L?0:GL(i,!1)}),N[i]&B&&(T.end=i,T=null);for(var d=H|a|f|M|t|$|X|B,q=function(y){return y+(1&y?1:2)},A=function(y){return y+(1&y?2:1)},s=0;s<Q.length;s++){var c=[{_level:(T=Q[s]).level,_override:0,_isolate:0}],K=void 0,b=0,n=0,v=0;_.clear();for(var e=T.start;e<=T.end;e++){var Z=N[e];if(K=c[c.length-1],_.set(Z,(_.get(Z)||0)+1),Z&z&&_.set(z,(_.get(z)||0)+1),Z&d)if(Z&(H|a)){g[e]=K._level;var yy=(Z===H?A:q)(K._level);yy<=p&&!b&&!n?c.push({_level:yy,_override:0,_isolate:0}):b||n++}else if(Z&(f|M)){g[e]=K._level;var Ly=(Z===f?A:q)(K._level);Ly<=p&&!b&&!n?c.push({_level:Ly,_override:Z&f?U:o,_isolate:0}):b||n++}else if(Z&t){Z&G&&(Z=1===GL(e+1,!0)?r:J),g[e]=K._level,K._override&&W(e,K._override);var py=(Z===r?A:q)(K._level);py<=p&&0===b&&0===n?(v++,c.push({_level:py,_override:0,_isolate:1,_isolInitIndex:e})):b++}else if(Z&$){if(b>0)b--;else if(v>0){for(n=0;!c[c.length-1]._isolate;)c.pop();var Ny=c[c.length-1]._isolInitIndex;null!=Ny&&(C.set(Ny,e),C.set(e,Ny)),c.pop(),v--}K=c[c.length-1],g[e]=K._level,K._override&&W(e,K._override)}else Z&X?(0===b&&(n>0?n--:!K._isolate&&c.length>1&&(c.pop(),K=c[c.length-1])),g[e]=K._level):Z&B&&(g[e]=T.level);else g[e]=K._level,K._override&&Z!==E&&W(e,K._override)}for(var ty=[],jy=null,zy=T.start;zy<=T.end;zy++){var Oy=N[zy];if(!(Oy&O)){var hy=g[zy],my=Oy&t,ky=Oy===$;jy&&hy===jy._level?(jy._end=zy,jy._endsWithIsolInit=my):ty.push(jy={_start:zy,_end:zy,_level:hy,_startsWithPDI:ky,_endsWithIsolInit:my})}}for(var _y=[],Wy=0;Wy<ty.length;Wy++){var gy=ty[Wy];if(!gy._startsWithPDI||gy._startsWithPDI&&!C.has(gy._start)){for(var Cy=[jy=gy],Qy=void 0;jy&&jy._endsWithIsolInit&&null!=(Qy=C.get(jy._end));)for(var Ty=Wy+1;Ty<ty.length;Ty++)if(ty[Ty]._start===Qy){Cy.push(jy=ty[Ty]);break}for(var iy=[],Dy=0;Dy<Cy.length;Dy++)for(var wy=Cy[Dy],xy=wy._start;xy<=wy._end;xy++)iy.push(xy);for(var dy=g[iy[0]],oy=T.level,Uy=iy[0]-1;Uy>=0;Uy--)if(!(N[Uy]&O)){oy=g[Uy];break}var Iy=iy[iy.length-1],Vy=g[Iy],Fy=T.level;if(!(N[Iy]&t))for(var uy=Iy+1;uy<=T.end;uy++)if(!(N[uy]&O)){Fy=g[uy];break}_y.push({_seqIndices:iy,_sosType:Math.max(oy,dy)%2?U:o,_eosType:Math.max(Fy,Vy)%2?U:o})}}for(var Sy=0;Sy<_y.length;Sy++){var By=_y[Sy],Ry=By._seqIndices,Yy=By._sosType,Ey=By._eosType;if(_.get(P))for(var Py=0;Py<Ry.length;Py++){var ly=Ry[Py];if(N[ly]&P){for(var My=Yy,fy=Py-1;fy>=0;fy--)if(!(N[Ry[fy]]&O)){My=N[Ry[fy]];break}W(ly,My&(t|$)?Y:My)}}if(_.get(I))for(var ay=0;ay<Ry.length;ay++){var Hy=Ry[ay];if(N[Hy]&I)for(var Xy=ay-1;Xy>=-1;Xy--){var Jy=-1===Xy?Yy:N[Ry[Xy]];if(Jy&j){Jy===l&&W(Hy,u);break}}}if(_.get(l))for(var ry=0;ry<Ry.length;ry++){var Gy=Ry[ry];N[Gy]&l&&W(Gy,U)}if(_.get(V)||_.get(S))for(var $y=1;$y<Ry.length-1;$y++){var qy=Ry[$y];if(N[qy]&(V|S)){for(var Ay=0,sy=0,cy=$y-1;cy>=0&&(Ay=N[Ry[cy]])&O;cy--);for(var Ky=$y+1;Ky<Ry.length&&(sy=N[Ry[Ky]])&O;Ky++);Ay===sy&&(N[qy]===V?Ay===I:Ay&(I|u))&&W(qy,Ay)}}if(_.get(I))for(var by=0;by<Ry.length;by++){var ny=Ry[by];if(N[ny]&I){for(var vy=by-1;vy>=0&&N[Ry[vy]]&(F|O);vy--)W(Ry[vy],I);for(var ey=by+1;ey<Ry.length&&N[Ry[ey]]&(F|O);ey++)W(Ry[ey],I)}}if(_.get(F)||_.get(V)||_.get(S))for(var Zy=0;Zy<Ry.length;Zy++){var yL=Ry[Zy];if(N[yL]&(F|V|S)){W(yL,Y);for(var LL=Zy-1;LL>=0&&N[Ry[LL]]&O;LL--)W(Ry[LL],Y);for(var pL=Zy+1;pL<Ry.length&&N[Ry[pL]]&O;pL++)W(Ry[pL],Y)}}if(_.get(I))for(var NL=0,tL=Yy;NL<Ry.length;NL++){var jL=Ry[NL],zL=N[jL];zL&I?tL===o&&W(jL,o):zL&j&&(tL=zL)}if(_.get(z)){for(var OL=U|I|u,hL=OL|o,mL=[],kL=[],_L=0;_L<Ry.length;_L++)if(N[Ry[_L]]&z){var WL=y[Ry[_L]],gL=void 0;if(null!==D(WL)){if(!(kL.length<63))break;kL.push({char:WL,seqIndex:_L})}else if(null!==(gL=w(WL)))for(var CL=kL.length-1;CL>=0;CL--){var QL=kL[CL].char;if(QL===gL||QL===w(x(WL))||D(x(QL))===WL){mL.push([kL[CL].seqIndex,_L]),kL.length=CL;break}}}mL.sort((function(y,L){return y[0]-L[0]}));for(var TL=0;TL<mL.length;TL++){for(var iL=mL[TL],DL=iL[0],wL=iL[1],xL=!1,dL=0,oL=DL+1;oL<wL;oL++){var UL=Ry[oL];if(N[UL]&hL){xL=!0;var IL=N[UL]&OL?U:o;if(IL===qL(UL)){dL=IL;break}}}if(xL&&!dL){dL=Yy;for(var VL=DL-1;VL>=0;VL--){var FL=Ry[VL];if(N[FL]&hL){var uL=N[FL]&OL?U:o;dL=uL!==qL(FL)?uL:qL(FL);break}}}if(dL){if(N[Ry[DL]]=N[Ry[wL]]=dL,dL!==qL(Ry[DL]))for(var SL=DL+1;SL<Ry.length;SL++)if(!(N[Ry[SL]]&O)){k(y[Ry[SL]])&P&&(N[Ry[SL]]=dL);break}if(dL!==qL(Ry[wL]))for(var BL=wL+1;BL<Ry.length;BL++)if(!(N[Ry[BL]]&O)){k(y[Ry[BL]])&P&&(N[Ry[BL]]=dL);break}}}for(var RL=0;RL<Ry.length;RL++)if(N[Ry[RL]]&z){for(var YL=RL,EL=RL,PL=Yy,lL=RL-1;lL>=0;lL--){if(!(N[Ry[lL]]&O)){PL=N[Ry[lL]]&OL?U:o;break}YL=lL}for(var ML=Ey,fL=RL+1;fL<Ry.length;fL++){if(!(N[Ry[fL]]&(z|O))){ML=N[Ry[fL]]&OL?U:o;break}EL=fL}for(var aL=YL;aL<=EL;aL++)N[Ry[aL]]=PL===ML?PL:qL(Ry[aL]);RL=EL}}}for(var HL=T.start;HL<=T.end;HL++){var XL=g[HL],JL=N[HL];if(1&XL?JL&(o|I|u)&&g[HL]++:JL&U?g[HL]++:JL&(u|I)&&(g[HL]+=2),JL&O&&(g[HL]=0===HL?T.level:g[HL-1]),HL===T.end||k(y[HL])&(R|B))for(var rL=HL;rL>=0&&k(y[rL])&h;rL--)g[rL]=T.level}}return{levels:g,paragraphs:Q};function GL(L,p){for(var j=L;j<y.length;j++){var z=N[j];if(z&(U|l))return 1;if(z&(B|o)||p&&z===$)return 0;if(z&t){var O=$L(j);j=-1===O?y.length:O}}return 0}function $L(L){for(var p=1,j=L+1;j<y.length;j++){var z=N[j];if(z&B)break;if(z&$){if(0==--p)return j}else z&t&&p++}return-1}function qL(y){return 1&g[y]?U:o}},y.getMirroredCharacter=A,y.getMirroredCharactersMap=function(y,L,p,N){var t=y.length;p=Math.max(0,null==p?0:+p),N=Math.min(t-1,null==N?t-1:+N);for(var j=new Map,z=p;z<=N;z++)if(1&L[z]){var O=A(y[z]);null!==O&&j.set(z,O)}return j},y.getReorderSegments=s,y.getReorderedIndices=c,y.getReorderedString=function(y,L,p,N){var t=c(y,L,p,N),j=[].concat(y);return t.forEach((function(p,N){j[N]=(1&L.levels[p]?A(y[p]):null)||y[p]})),j.join("")},y.openingToClosingBracket=D,Object.defineProperty(y,"__esModule",{value:!0}),y}({});return y}],init(y,L,p,N){const{defaultFontURL:t}=y;return p(L,N(),{defaultFontURL:t})}}),uo=Xd({name:"Typesetter",dependencies:[Fo],init:y=>function(L){return new Promise((p=>{y.typeset(L,p)}))},getTransferables(y){const L=[y.glyphPositions.buffer,y.glyphIds.buffer];return y.caretPositions&&L.push(y.caretPositions.buffer),y.glyphColors&&L.push(y.glyphColors.buffer),L}}),So={},Bo="aTroikaGlyphBounds",Ro="aTroikaGlyphIndex",Yo="aTroikaGlyphColor";class Eo extends Lg{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Nt,this.boundingBox=new XN}computeBoundingSphere(){}computeBoundingBox(){}setSide(y){const L=this.getIndex().count;this.setDrawRange(y===R?L/2:0,y===Y?L:L/2)}set detail(y){if(y!==this._detail){this._detail=y,("number"!=typeof y||y<1)&&(y=1);let L=function(y){let L=So[y];if(!L){const p=new xz(1,1,y,y),N=p.clone(),t=p.attributes,j=N.attributes,z=new Rj,O=t.uv.count;for(let y=0;y<O;y++)j.position.array[3*y]*=-1,j.normal.array[3*y+2]*=-1;["position","normal","uv"].forEach((y=>{z.setAttribute(y,new dj([...t[y].array,...j[y].array],t[y].itemSize))})),z.setIndex([...p.index.array,...N.index.array.map((y=>y+O))]),z.translate(.5,.5,0),L=So[y]=z}return L}(y);["position","normal","uv"].forEach((y=>{this.attributes[y]=L.attributes[y].clone()})),this.setIndex(L.getIndex().clone())}}get detail(){return this._detail}set curveRadius(y){y!==this._curveRadius&&(this._curveRadius=y,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(y,L,p,N,t){Po(this,Bo,y,4),Po(this,Ro,L,1),Po(this,Yo,t,3),this._blockBounds=p,this._chunkedBounds=N,this.instanceCount=L.length,this._updateBounds()}_updateBounds(){const y=this._blockBounds;if(y){const{curveRadius:L,boundingBox:p}=this;if(L){const{PI:N,floor:t,min:j,max:z,sin:O,cos:h}=Math,m=N/2,k=2*N,_=Math.abs(L),W=y[0]/_,g=y[2]/_,C=t((W+m)/k)!==t((g+m)/k)?-_:j(O(W)*_,O(g)*_),Q=t((W-m)/k)!==t((g-m)/k)?_:z(O(W)*_,O(g)*_),T=t((W+N)/k)!==t((g+N)/k)?2*_:z(_-h(W)*_,_-h(g)*_);p.min.set(C,y[1],L<0?-T:0),p.max.set(Q,y[3],L<0?0:T)}else p.min.set(y[0],y[1],0),p.max.set(y[2],y[3],0);p.getBoundingSphere(this.boundingSphere)}}applyClipRect(y){let L=this.getAttribute(Ro).count,p=this._chunkedBounds;if(p)for(let N=p.length;N--;){L=p[N].end;let t=p[N].rect;if(t[1]<y.w&&t[3]>y.y&&t[0]<y.z&&t[2]>y.x)break}this.instanceCount=L}}function Po(y,L,p,N){const t=y.getAttribute(L);p?t&&t.array.length===p.length?(t.array.set(p),t.needsUpdate=!0):(y.setAttribute(L,new $m(p,N)),delete y._maxInstanceCount,y.dispose()):t&&y.deleteAttribute(L)}const lo=`\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n`,Mo=`\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n${""}\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n`,fo=`\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  ${""}\n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  ${""}\n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  ${""}\n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n`,ao=`\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n`,Ho=new tj({color:16777215,side:Y,transparent:!0}),Xo=8421504,Jo=new Wt,ro=new fN,Go=new fN,$o=[],qo=new fN,Ao="+x+y";function so(y){return Array.isArray(y)?y[0]:y}let co=()=>{const y=new Kj(new xz(1,1),Ho);return co=()=>y,y},Ko=()=>{const y=new Kj(new xz(1,1,32,1),Ho);return Ko=()=>y,y};const bo={type:"syncstart"},no={type:"synccomplete"},vo=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],eo=vo.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class Zo extends Kj{constructor(){super(new Eo,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Xo,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Ao,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(y){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(y):(this._isSyncing=!0,this.dispatchEvent(bo),oo({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},(L=>{this._isSyncing=!1,this._textRenderInfo=L,this.geometry.updateGlyphs(L.glyphBounds,L.glyphAtlasIndices,L.blockBounds,L.chunkedBounds,L.glyphColors);const p=this._queuedSyncs;p&&(this._queuedSyncs=null,this._needsSync=!0,this.sync((()=>{p.forEach((y=>y&&y()))}))),this.dispatchEvent(no),y&&y()}))))}onBeforeRender(y,L,p,N,t,j){this.sync(),t.isTroikaTextMaterial&&this._prepareForRender(t),t._hadOwnSide=t.hasOwnProperty("side"),this.geometry.setSide(t._actualSide=t.side),t.side=B}onAfterRender(y,L,p,N,t,j){t._hadOwnSide?t.side=t._actualSide:delete t.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let y=this._derivedMaterial;const L=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Ho.clone());if(y&&y.baseMaterial===L||(y=this._derivedMaterial=function(y){const L=vd(y,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new tN},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new uN(0,0,0,0)},uTroikaClipRect:{value:new uN(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new tN},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new pj},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new jN},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:lo,vertexTransform:Mo,fragmentDefs:fo,fragmentColorTransform:ao,customRewriter({vertexShader:y,fragmentShader:L}){let p=/\buniform\s+vec3\s+diffuse\b/;return p.test(L)&&(L=L.replace(p,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),p.test(y)||(y=y.replace($d,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:y,fragmentShader:L}}});return L.transparent=!0,Object.defineProperties(L,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),L}(L),L.addEventListener("dispose",(function p(){L.removeEventListener("dispose",p),y.dispose()}))),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let L=y._outlineMtl;return L||(L=y._outlineMtl=Object.create(y,{id:{value:y.id+.1}}),L.isTextOutlineMaterial=!0,L.depthWrite=!1,L.map=null,y.addEventListener("dispose",(function p(){y.removeEventListener("dispose",p),L.dispose()}))),[L,y]}return y}set material(y){y&&y.isTroikaTextMaterial?(this._derivedMaterial=y,this._baseMaterial=y.baseMaterial):this._baseMaterial=y}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(y){this.geometry.detail=y}get curveRadius(){return this.geometry.curveRadius}set curveRadius(y){this.geometry.curveRadius=y}get customDepthMaterial(){return so(this.material).getDepthMaterial()}get customDistanceMaterial(){return so(this.material).getDistanceMaterial()}_prepareForRender(y){const L=y.isTextOutlineMaterial,p=y.uniforms,N=this.textRenderInfo;if(N){const{sdfTexture:y,blockBounds:t}=N;p.uTroikaSDFTexture.value=y,p.uTroikaSDFTextureSize.value.set(y.image.width,y.image.height),p.uTroikaSDFGlyphSize.value=N.sdfGlyphSize,p.uTroikaSDFExponent.value=N.sdfExponent,p.uTroikaTotalBounds.value.fromArray(t),p.uTroikaUseGlyphColors.value=!L&&!!N.glyphColors;let j,z,O,h=0,m=0,k=0,_=0,W=0;if(L){let{outlineWidth:y,outlineOffsetX:L,outlineOffsetY:p,outlineBlur:N,outlineOpacity:t}=this;h=this._parsePercent(y)||0,m=Math.max(0,this._parsePercent(N)||0),j=t,_=this._parsePercent(L)||0,W=this._parsePercent(p)||0}else k=Math.max(0,this._parsePercent(this.strokeWidth)||0),k&&(O=this.strokeColor,p.uTroikaStrokeColor.value.set(null==O?Xo:O),z=this.strokeOpacity,null==z&&(z=1)),j=this.fillOpacity;p.uTroikaDistanceOffset.value=h,p.uTroikaPositionOffset.value.set(_,W),p.uTroikaBlurRadius.value=m,p.uTroikaStrokeWidth.value=k,p.uTroikaStrokeOpacity.value=z,p.uTroikaFillOpacity.value=null==j?1:j,p.uTroikaCurveRadius.value=this.curveRadius||0;let g=this.clipRect;if(g&&Array.isArray(g)&&4===g.length)p.uTroikaClipRect.value.fromArray(g);else{const y=100*(this.fontSize||.1);p.uTroikaClipRect.value.set(t[0]-y,t[1]-y,t[2]+y,t[3]+y)}this.geometry.applyClipRect(p.uTroikaClipRect.value)}p.uTroikaSDFDebug.value=!!this.debugSDF,y.polygonOffset=!!this.depthOffset,y.polygonOffsetFactor=y.polygonOffsetUnits=this.depthOffset||0;const t=L?this.outlineColor||0:this.color;if(null==t)delete y.color;else{const L=y.hasOwnProperty("color")?y.color:y.color=new pj;t===L._input&&"object"!=typeof t||L.set(L._input=t)}let j=this.orientation||Ao;if(j!==y._orientation){let L=p.uTroikaOrient.value;j=j.replace(/[^-+xyz]/g,"");let N=j!==Ao&&j.match(/^([-+])([xyz])([-+])([xyz])$/);if(N){let[,y,p,t,j]=N;ro.set(0,0,0)[p]="-"===y?1:-1,Go.set(0,0,0)[j]="-"===t?-1:1,Jo.lookAt(qo,ro.cross(Go),Go),L.setFromMatrix4(Jo)}else L.identity();y._orientation=j}}_parsePercent(y){if("string"==typeof y){let L=y.match(/^(-?[\d.]+)%$/),p=L?parseFloat(L[1]):NaN;y=(isNaN(p)?0:p/100)*this.fontSize}return y}localPositionToTextCoords(y,L=new tN){L.copy(y);const p=this.curveRadius;return p&&(L.x=Math.atan2(y.x,Math.abs(p)-Math.abs(y.z))*Math.abs(p)),L}worldPositionToTextCoords(y,L=new tN){return ro.copy(y),this.localPositionToTextCoords(this.worldToLocal(ro),L)}raycast(y,L){const{textRenderInfo:p,curveRadius:N}=this;if(p){const t=p.blockBounds,j=N?Ko():co(),z=j.geometry,{position:O,uv:h}=z.attributes;for(let y=0;y<h.count;y++){let L=t[0]+h.getX(y)*(t[2]-t[0]);const p=t[1]+h.getY(y)*(t[3]-t[1]);let j=0;N&&(j=N-Math.cos(L/N)*N,L=Math.sin(L/N)*N),O.setXYZ(y,L,p,j)}z.boundingSphere=this.geometry.boundingSphere,z.boundingBox=this.geometry.boundingBox,j.matrixWorld=this.matrixWorld,j.material.side=this.material.side,$o.length=0,j.raycast(y,$o);for(let y=0;y<$o.length;y++)$o[y].object=this,L.push($o[y])}}copy(y){const L=this.geometry;return super.copy(y),this.geometry=L,eo.forEach((L=>{this[L]=y[L]})),this}clone(){return(new this.constructor).copy(this)}}vo.forEach((y=>{const L="_private_"+y;Object.defineProperty(Zo.prototype,y,{get(){return this[L]},set(y){y!==this[L]&&(this[L]=y,this._needsSync=!0)}})})),new WeakMap,new WeakMap;const yU=h.forwardRef((({sdfGlyphSize:y=64,anchorX:L="center",anchorY:p="middle",font:N,fontSize:t=1,children:j,characters:z,onSync:O,...m},k)=>{const _=EQ((({invalidate:y})=>y)),[W]=h.useState((()=>new Zo)),[g,C]=h.useMemo((()=>{const y=[];let L="";return h.Children.forEach(j,(p=>{"string"==typeof p||"number"==typeof p?L+=p:y.push(p)})),[y,L]}),[j]);return AC((()=>new Promise((y=>function({font:y,characters:L,sdfGlyphSize:p},N){oo({font:y,sdfGlyphSize:p,text:Array.isArray(L)?L.join("\n"):""+L},N)}({font:N,characters:z},y)))),["troika-text",N,z]),h.useLayoutEffect((()=>{W.sync((()=>{_(),O&&O(W)}))})),h.useEffect((()=>()=>W.dispose()),[W]),h.createElement("primitive",ZT.A({object:W,ref:k,font:N,text:C,anchorX:L,anchorY:p,fontSize:t,sdfGlyphSize:y},m),g)})),LU=ri({color:new pj(215,215,0),rows:5,columns:5,blending:l,depthTest:!1,transparent:!0},"varying vec2 vUv;void main(){vUv=uv;vec4 mvPosition=modelViewMatrix*vec4(position,1.);gl_Position=projectionMatrix*mvPosition;}","uniform vec3 color;varying vec2 vUv;uniform float rows;uniform float columns;void main(){float modX=fract(vUv.x*columns);float modY=fract(vUv.y*rows);float alpha=0.;if(modX>=0.&&modY<=0.05||modX>0.&&modY>=0.95){alpha=1.;}if(modY>=0.&&modX<=0.05||modY>0.&&modX>=0.95){alpha=1.;}gl_FragColor=vec4(color,alpha);}"),pU=({rows:y,columns:L})=>{const p=h.useRef(null);return PQ((()=>{p.current&&(p.current.uniforms.rows.value=y,p.current.uniforms.columns.value=L)})),j.jsx("grid",{ref:p})},NU=({size:y,position:L,visible:p})=>j.jsx("group",{visible:p,children:j.jsxs("mesh",{position:L,children:[j.jsx("planeGeometry",{args:y}),j.jsx(pU,{rows:1,columns:Nw.y8})]})});cC({Grid:LU});const tU=[0,4.1,0],jU=[4.2,.5],zU=y=>{const{showDoubleEvent:L,dropZone:p,landZone:N,visible:t,isPhone:z,isLandscape:O,phase:m}=y,k=.25,_=null!=N?N:p,W=void 0!==_?k/2-2+(_-1)*k:void 0,g=void 0!==N?-.75:4,C=h.useRef(null),Q=h.useRef(null);return h.useEffect((()=>{var y,L,t,j;if(C.current)if(void 0!==N){null===(L=null===(y=Q.current)||void 0===y?void 0:y.timeline)||void 0===L||L.fastForward();const p=Qi.M();p.sequence(Ci.M(C.current.position).animateTo({x:k/2-2+(N-1)*k,y:-.75},.5)),Q.current={timeline:p,dispose:Ti.l({anim:p})}}else if(void 0!==p&&m===Nw.lj.PuckDrop){null===(j=null===(t=Q.current)||void 0===t?void 0:t.timeline)||void 0===j||j.fastForward();const y=Qi.M(),L=8;y.sequence(Ci.M(C.current.position).animateTo({x:k/2-2+(L-1)*k,y:0},2)),Q.current={timeline:y,dispose:Ti.l({anim:y})}}}),[p,N,m]),j.jsxs("group",{scale:z&&O?2.5:1.1,visible:t,children:[j.jsx(NU,{position:tU,size:jU,visible:!0}),j.jsx(yU,{visible:L,position:[0,2,0],color:"yellow",scale:[.3,.3,1],children:"DOUBLE"}),j.jsxs("mesh",{position:[0,1.55,0],children:[j.jsx("planeGeometry",{args:[4.2,5.6]}),j.jsx("meshStandardMaterial",{color:"#014801"})]}),j.jsxs("mesh",{position:[null!=W?W:0,null!=g?g:0,0],visible:void 0!==W,ref:C,children:[j.jsx("planeGeometry",{args:[k,void 0!==N?.8:.5]}),j.jsx("meshStandardMaterial",{color:"lightgray"})]})]})},OU=Wi.PA((()=>{const{pachinko:y,gamePhase:L,device:p,settings:N}=ai.Pj();return N.displayFakePachinkoWall?j.jsx(zU,{showDoubleEvent:y.phase===Nw.lj.AddDouble,dropZone:y.dropZone,landZone:y.landZone,visible:L.phase===bD.Q.Pachinko&&N.displayFakePachinkoWall,isLandscape:p.isLandscape,isPhone:p.isPhone,phase:y.phase}):null}));var hU=p(515200);function mU(){return new xz}function kU(){return new xz(1.5,1)}var _U=p(605283);const WU=0,gU=.16,CU=.33,QU=.5,TU=.9,iU=1.1,DU=1.3,wU=1.5,xU=1.8,dU=1.9,oU=2.1,UU=2.4,IU=2.45,VU=2.5,FU=2.7;function uU(y,L){return{x:y.x*L,y:y.y*L}}const SU=Nw.y8,BU=1,RU=h.memo((({animation:y,texture:L,value:p,animationDuration:N,sector:t,glowTexture:z,animationDelay:O,animationCompleted:m,animationEndPosition:k,onAnimationStarted:_,onAnimationCompleted:W,positionX:g,positionY:C,multiplierGlowGeometry:Q,multiplierGeometry:T})=>{const i=ai.Pj(),D=h.useMemo((()=>[g,C]),[g,C]),w="double"===p,x=h.useRef(null),d=h.useRef(null),o=h.useRef(null),U=h.useRef(null),I=h.useRef(null),V=h.useRef(null),F=h.useMemo((()=>w?{x:1,y:1,z:1}:"moveIntoSector"===y?{x:1.5,y:.75,z:1}:{x:1,y:.25,z:1}),[w,y]),u=vT(sT.ScattersGoldGlow,i.gameTexture);return h.useEffect((()=>{var L;const p=d.current,N=U.current;p&&N&&(p.scale.x=F.x,p.scale.y=F.y,p.position.x=D[0],p.position.y=D[1],N.opacity=1,void 0!==y&&(null===(L=o.current)||void 0===L||L.fastForward()))}),[w,F,D,y]),h.useEffect((()=>{var L;const j=d.current,z=U.current,h=I.current;if(!y||!j||!z||void 0===N||null===x.current)return;switch(o.current=Qi.M(),y){case"hideSkipped":z.opacity=0;break;case"fadeIn":z.opacity=0,o.current.sequence(Ci.M(z).animateTo({opacity:1},N));break;case"restoreFadeIn":z.opacity=0,o.current.sequence(Ci.M(z).animateTo({opacity:1},.3));break;case"fadeOut":z.opacity=1,o.current.delay(BU*t/SU).delay(N+.05).sequence(Ci.M(z).animateTo({opacity:0},0));break;case"fadeOutAll":case"hideDouble":o.current.sequence(Ci.M(z).animateTo({opacity:0},N));break;case"removeTopUp":if(void 0===O)return;const W=j.position;z.opacity=1,o.current.sequence(Ci.M(j.position).animateTo({y:-2.68},0)).sequence(Ci.M(j.position).animateTo({y:W.y},N)).delay(O-.1).sequence(Ci.M(z).animateTo({opacity:0},N));break;case"removeDoubledTopUp":if(void 0===O)return;const g=j.position.y;z.opacity=0,o.current.sequence(Ci.M(j.position).animateTo({y:-2.68},0)).sequence(Ci.M(z).animateTo({opacity:1},0)).sequence(Ci.M(j.position).animateTo({y:g},N));break;case"addTopUp":o.current.delay(BU*t/SU).parallel([Ci.M(j.position).animateTo({y:-2.68},N),Ci.M(z).animateTo({opacity:.1},N).callback((()=>{16===t&&(null==m||m(t,y))}))]);break;case"glowSequence":{if(!h)break;const y=j.scale,L=1.3;o.current.parallel([Ci.M(z).animateTo({opacity:0},0),Ci.M(h).animateTo({opacity:0},0),Ci.M(j.scale).animateTo({x:y.x*L,y:y.y*L,z:y.z*L},N)]).delay(BU*t/SU).parallel([Ci.M(z).animateTo({opacity:1},0),Ci.M(h).animateTo({opacity:1},N),Ci.M(j.scale).animateTo({x:y.x,y:y.y,z:y.z},N)]).sequence(Ci.M(h).animateTo({opacity:0},N));break}case"glowParallel":{if(!h)break;const y=j.scale;o.current.parallel([Ci.M(j.scale).animateTo({x:1.3*y.x,y:1.3*y.y,z:1.3*y.z},N),Ci.M(h).animateTo({opacity:0},0)]).delay(0).parallel([Ci.M(j.scale).animateTo({x:y.x,y:y.y,z:y.z},N),Ci.M(h).animateTo({opacity:1},N)]).sequence(Ci.M(h).animateTo({opacity:0},N));break}case"showDouble":const C=j.position.clone();o.current.parallel([Ci.M(j.scale).animateTo({x:2,y:2,z:2},N),Ci.M(j.position).animateTo({y:j.position.y+1.2},N)]).delay(1).parallel([Ci.M(j.scale).animateTo({x:1,y:1,z:1},N),Ci.M(j.position).animateTo({y:C.y},N),Ci.M(z).animateTo({opacity:0},N)]);break;case"showResult":N&&p&&"double"!==p&&(null===(L=o.current)||void 0===L||L.sequence(function(y){var L;const{element:p,material:N,value:t,multiplier:j}=y,z=p.scale.clone(),O=2,h=ui(t);return Qi.M().parallel([Ci.M(p.scale).delay(gU-WU).animateTo(uU(z,1.2*O),CU-gU,gi.Do).animateTo(uU(z,1),QU-CU,gi.WD).delay(iU-QU).animateTo(uU(z,1.6*O),DU-iU,gi.Do).animateTo(uU(z,1.3*O),wU-DU,gi.WD).animateTo(uU(z,2.6*O),xU-wU,gi.Do).animateTo(uU(z,2.4*O),dU-xU,gi.WD).animateTo(uU(z,2.6*O),oU-dU,gi.Do).animateTo(uU(z,1.9*O),UU-oU,gi.WD),Ci.M(j.position).delay(TU-WU).animateTo({x:null!==(L={2:.25,3:.2,4:.1,5:0}[h])&&void 0!==L?L:0},DU-TU),Ci.M(p.position).delay(TU-WU).animateTo({x:0,y:-.5},DU-TU),Ci.M(p.rotation).callback((()=>{p.rotation.set(0,0,NN.degToRad(90))})).delay(TU-WU).animateTo({z:0},iU-TU),Ci.M(N).callback((()=>{N.opacity=1})).delay(IU-WU).animateTo({opacity:0},VU-IU)]).callback((()=>{j.position.setX(0),p.rotation.set(0,0,Math.PI/2)}))}({multiplier:x.current,material:z,element:j,value:p})));break;case"moveIntoSector":if(!k)return;o.current.parallel([Qi.M().callback((()=>{null==_||_()})),Ci.M(j.rotation).animateTo({z:Math.PI/2},.495,gi.dV),Ci.M(j.scale).animateTo(uU(F,2),N/3,gi.dV),Ci.M(j.position).delay(.165).animateTo({x:k[0],y:k[1],z:.01},N,gi.WD),Ci.M(j.scale).delay(N/3).animateTo(uU(F,.46),2*(N/3),gi.dV)]).callback((()=>{null==m||m(t,y)})).sequence(Ci.M(z).animateTo({opacity:0},0,gi.sn).onUpdate((()=>{z.needsUpdate=!0})));break;case"highlightSector":if(!V.current)break;o.current.parallel([Ci.M(j.scale).animateTo(uU(F,2.5),.15,gi.dV),Ci.M(V.current).animateTo({opacity:1.5},.15,gi.dV),Ci.M(j.position).animateTo({x:D[0],y:D[1]+.75},.15,gi.dV)]).parallel([Ci.M(j.scale).animateTo(uU(F,1),.15,gi.dV),Ci.M(V.current).animateTo({opacity:0},.15,gi.dV),Ci.M(j.position).animateTo({x:D[0],y:D[1]},.15,gi.dV)]).callback((()=>null==m?void 0:m(t,y)))}const W=Ti.l({anim:o.current});return()=>{var y;null===(y=o.current)||void 0===y||y.fastForward(),W()}}),[w,y,F,L,N,t,O,p,m,k,_,W,D,i.slotLayout.transitionEndXPosition]),j.jsx("group",{ref:d,scale:[F.x,F.y,1],position:[D[0],D[1],"moveIntoSector"===y?.001:.002],visible:void 0!==L,rotation:[0,0,w?0:"moveIntoSector"===y?Math.PI/16:Math.PI/2],children:j.jsxs("group",{ref:x,children:[j.jsx("mesh",{scale:w?[.4,2.76,0]:1,geometry:T,children:j.jsx("meshBasicMaterial",{ref:U,map:L,transparent:!0,depthWrite:!1,depthTest:!1})}),j.jsx("mesh",{visible:void 0!==z&&("glowSequence"===y||"glowParallel"===y),position:[-.15,0,-.01],rotation:[0,0,w?0:-Math.PI/2],geometry:Q,children:j.jsx("meshBasicMaterial",{ref:I,map:z,transparent:!0,depthWrite:!1,depthTest:!1})}),j.jsx("mesh",{visible:void 0!==u,position:[-.25,0,.01],geometry:Q,scale:[.6,1.5,1],children:j.jsx("meshBasicMaterial",{ref:V,map:u,transparent:!0,depthWrite:!1,depthTest:!1,blending:M,opacity:0})})]})},`multiplier-${t}-${D}`)}));function YU(y){return"double"===y||y>0}const EU=Wi.PA((({multipliers:y,glowTexture:L,isCommonMultiplier:p,animationCompleted:N,multiplierGlowGeometry:t,multiplierGeometry:z,isBonusGameInProgress:O})=>{const[m,k]=h.useState({}),_=nx.Z(y),{gameTexture:W,device:g}=ai.Pj(),C=h.useRef(!1);C.current=_!==y&&Object.values(y).some((y=>YU(y.value)));const Q=h.useMemo((()=>{const L=Object.values(y);return _U.A(L.map((y=>y.value))).filter(YU)}),[y]),T=h.useCallback((y=>{C.current=!1,k({...y})}),[]);fi(Q,KT.LongHorizontal,W,T);const i=C.current&&void 0!==_?_:y;return j.jsx("mesh",{children:Nw.mU.map((y=>{const{value:h,animation:k,duration:_=2,delay:W}=i[y],{x:Q,y:T}=function(y,L,p,N,t){return"double"===y?t?{x:-7.82+L/1.065,y:-10.82}:{x:-7.78+L/1.075,y:-10.82}:p?t?{x:-2.8+L/2.98,y:-3.9}:{x:-2.74+L/3.037,y:-3.9}:N?t?{x:-3+L/2.77,y:-4.13}:{x:-3+L/2.8,y:-4.13}:{x:-3+L/3.025,y:-4.05}}(h,y,!0===p,O,g.isPortrait);return j.jsx("group",{scale:"double"===h?.25:.7,children:j.jsx(RU,{value:h,positionX:Q,positionY:T,animationDuration:_,animationCompleted:N,animation:C.current?void 0:k,texture:m[`${h}`],glowTexture:L,sector:y,animationDelay:W,multiplierGeometry:z,multiplierGlowGeometry:t},`Multipliers-${y}`)},`MultiplierGroup-${y}`)}))})})),PU=.01,lU=.02,MU="#fce942";function fU(){this.geometry.dispose()}const aU=({sectorIndex:y,isTopUpSpin:L,glowingSectors:p,previousGlowingSectors:N,isSlamStop:t})=>{const z=.86,O=.7,m=[new fN(0,0,0),new fN(z,0,0),new fN(z,O,0),new fN(-.008,O,0),new fN(0,-.008,0)],k=h.useRef(null),_=h.useRef(null),W=h.useRef(null),[g,C]=h.useState(!1),Q=new Rk(m,!1,"catmullrom",0),T=h.useMemo((()=>new _i({color:new pj(MU),opacity:.5})),[]),i=h.useMemo((()=>new _i({color:new pj("white"),opacity:1})),[]);h.useEffect((()=>{const y=k.current,p=_.current,N=W.current;if(!y||!p||!N||g||L)return void C(!1);C(!0);const j=Qi.M();j.delay(t?.35:.5).parallel([Ci.M(T).animateTo({opacity:1},.1),Ci.M(i).animateTo({opacity:.4},.1),Ci.M(N).animateTo({opacity:.6},.15)]).parallel([Ci.M(T).animateTo({opacity:0},1),Ci.M(i).animateTo({opacity:0},1),Ci.M(N).animateTo({opacity:0},.15)]).callback((()=>{C(!1)}));const z=Ti.l({anim:j});return()=>{g&&!L&&(j.fastForward(),z())}}),[i,T,L]),h.useEffect((()=>{k.current&&_.current&&(k.current.updateGeometry(),_.current.updateGeometry())}));const D=0!==p[y]||void 0!==N&&0!==N[y];return j.jsx("group",{visible:D,position:[0,0,.001],children:j.jsxs("group",{position:[-1.95+.92*y,-3.165,0],children:[j.jsx("blurredLine",{ref:k,args:[Q,T,100],blurWidth:PU+.03,lineWidth:.01,opacity:.4,dispose:fU}),j.jsx("blurredLine",{ref:_,args:[Q,i,100],blurWidth:PU,lineWidth:lU-.015,opacity:1,dispose:fU}),j.jsxs("mesh",{position:[.43,.35,0],children:[j.jsx("planeGeometry",{args:[.89,.73]}),j.jsx("meshBasicMaterial",{ref:W,color:"#fce677",transparent:!0,opacity:0})]})]})})},HU=h.memo((({glowingSectors:y,isTopUpSpin:L,isSlamStop:p})=>{const N=nx.Z(y);return j.jsx("group",{children:y.map(((t,z)=>j.jsx("group",{children:j.jsx(aU,{sectorIndex:z,isTopUpSpin:L,glowingSectors:y,previousGlowingSectors:N,isSlamStop:p})},`glowingSectors-${z}`)))})})),XU=p.p+"images/base.cccaf9ae.webp",JU=p.p+"images/cage.d58537a0.webp",rU="data:image/webp;base64,UklGRs4BAABXRUJQVlA4TMIBAAAvMcQ+EEfCoG0jSW5XOgLHn+g3Q4Nx20aOOOG9/de6F8y4bRtJdGbmvf23etphJMlKNbi7W/4xEQR812cB7nPl1xyZiGcIhlREqiSw46UiKkzCSfME/GBEjoIRW4DAB00VvHHCMKBBvAW8ISCZPBV4gUjEDPmxKXhD4g7Dv/GjsYU1TIVUSEWcv17+oRtkeO7NKAlwYO+CseCOb0Lta1wB9+f7cgPE2LZVNReIu3twd4+79t/Sgw7uzD43ov8TYOlHrzPQhW84mal0s2dLt8v5ttwDFSIfzdvsgs15Id/WhXs4CemhUcuYtD0v5F2E9OcoalumYiEfbS8hPbPPfETbRRgoGeg/128v9g+GGkWEBhdfXW9Bd/WBpAtn0WPA//gf/+N//I//8T/+x//4H//jf/yP//E//sf/+B//43/8j//xP/7H//gf/+N//I//8T/+x//4H//jf/yP//E//sf/+B//43/8j//xP/7H//gf/+N//I//8T/+x//4H//jf/zv8F+6C0eH1/7Cwbu/sG/lvLPwbVqrFM71G/7BOCZ6enk+WTdptTp1E1r3xyuW7py6CKOQHl83bOnuwZ+HcHn1Zik=",GU=new PW,$U=.3,qU=.44,AU=Wi.PA((({position:y,visible:L,texture:p,isPortrait:N})=>{const[t,z]=h.useState(void 0),[O,m]=h.useState(void 0),[k,_]=h.useState(void 0),{pachinko:W,restore:g,topUpSlot:C,gamePhase:Q,settings:T}=ai.Pj(),i=h.useRef(null),D=h.useRef(null),w=h.useRef(null),x=h.useRef(null),d=h.useRef(null),o=h.useRef(null),U=h.useRef(null);h.useEffect((()=>{const y=GU.load(XU,z),L=GU.load(JU,m),p=GU.load(rU,_);return()=>{z(void 0),m(void 0),_(void 0),y.dispose(),L.dispose(),p.dispose()}}),[]);const I=g.getSkippedAnimations(),V=Object.values(C.multipliers).some((y=>0!==y)),F=void 0!==W.landZone&&"double"===W.playerMultipliers[W.landZone];h.useEffect((()=>{const L=D.current,p=x.current,N=o.current,t=d.current,j=w.current;if(!(L&&p&&N&&t&&j))return;const z=Qi.M(),{x:O,y:h,z:m}=N.position,k=I.includes("addTopUp")||I.includes("removeTopUp")||I.includes("removeDoubledTopUp");if(W.phase===Nw.lj.Idle&&(L.opacity=1,p.opacity=1,j.opacity=1,t.scale.set(1,1,1),N.scale.set(1,1,1),N.position.setY(y[1]),t.position.setY(y[1])),W.phase===Nw.lj.ShowCommonMultipliers&&(z.sequence(Ci.M(p).animateTo({opacity:0},$U)),i.current={timeline:z,dispose:Ti.l({anim:z})}),W.phase===Nw.lj.AddTopUp||k||!V&&W.phase===Nw.lj.Idle&&Q.phase===bD.Q.Pachinko){const L=k?0:$U;k&&(p.opacity=0),z.delay(k?0:1).parallel([Ci.M(N.scale).animateTo({x:1,y:0,z:1},L),Ci.M(N.position).animateTo({x:y[0],y:-2.1,z:m},L),Ci.M(t.scale).animateTo({x:1,y:.2,z:1},L),Ci.M(t.position).animateTo({x:y[0],y:-2.1,z:m},L)]),i.current={timeline:z,dispose:Ti.l({anim:z})}}return W.phase===Nw.lj.PrepareForDouble&&!k&&V&&(z.parallel([Ci.M(N.scale).animateTo({x:1,y:1,z:1},$U),Ci.M(N.position).animateTo({x:O,y:h-qU,z:m},$U),Ci.M(t.scale).animateTo({x:1,y:1,z:1},$U),Ci.M(t.position).animateTo({x:O,y:h-qU,z:m},$U)]),i.current={timeline:z,dispose:Ti.l({anim:z})}),W.phase!==Nw.lj.MergeWithTopUpAfterDoubling||k||(z.delay(T.hideCageDelay).parallel([Ci.M(N.scale).animateTo({x:1,y:0,z:1},$U),Ci.M(N.position).animateTo({x:O,y:h+.5,z:m},$U)]),i.current={timeline:z,dispose:Ti.l({anim:z})}),W.phase!==Nw.lj.AddDouble||k||(z.parallel([Ci.M(N.scale).animateTo({x:1,y:1,z:1},$U),Ci.M(N.position).animateTo({x:O,y:h-qU,z:m},$U),Ci.M(t.scale).animateTo({x:1,y:1,z:1},$U),Ci.M(t.position).animateTo({x:O,y:h-qU,z:m},$U)]).delay(T.hideCageDelay).parallel([Ci.M(N.scale).animateTo({x:1,y:0,z:1},$U),Ci.M(N.position).animateTo({x:O,y:h,z:m},$U),Ci.M(t.scale).animateTo({x:1,y:.2,z:1},$U),Ci.M(t.position).animateTo({x:O,y:h,z:m},$U)]),i.current={timeline:z,dispose:Ti.l({anim:z})}),W.phase!==Nw.lj.PuckLanded||k||F||(z.parallel([Ci.M(p).animateTo({opacity:0},$U),Ci.M(L).animateTo({opacity:0},$U),Ci.M(j).animateTo({opacity:0},$U)]),i.current={timeline:z,dispose:Ti.l({anim:z})}),()=>{var y;z.fastForward(),null===(y=i.current)||void 0===y||y.dispose()}}),[Q.phase,W.phase,I]);const u=y[0]-bw.xR.frameXOffset,S=y[1]-bw.xR.frameYOffset,B=N?4.18:bw.xR.frameWidth;return j.jsxs("group",{position:[.035,-.27,0],children:[j.jsxs("mesh",{position:[u,S,0],visible:L&&void 0!==t,ref:o,children:[j.jsx("meshBasicMaterial",{ref:D,map:p,transparent:!0}),j.jsx("planeGeometry",{args:[B,bw.xR.frameHeight]})]}),j.jsxs("mesh",{position:[u,y[1]+bw.xR.upperCageYOffset,0],visible:L&&void 0!==O,ref:U,children:[j.jsx("meshBasicMaterial",{ref:w,map:O,transparent:!0}),j.jsx("planeGeometry",{args:[B,bw.xR.upperCageHeight]})]}),j.jsxs("mesh",{position:[u,S,.01],visible:L&&void 0!==k,ref:d,children:[j.jsx("meshBasicMaterial",{ref:x,map:k,transparent:!0}),j.jsx("planeGeometry",{args:[B,bw.xR.frameHeight]})]})]})})),sU=.4;function cU(y){return y*(bw.SS/Nw.y8*.925)}const KU=({animationCompleted:y,animationStarted:L,pachinkoSector:p,texture:N,startPosition:t,multiplier:z,multiplierGeometry:O,multiplierGlowGeometry:h})=>{const m=[cU((k=p,k-Nw.y8/2-.1))-.22,-3.05+.03*z.toString().length];var k;return j.jsx(RU,{value:z,sector:p,positionX:t[0],positionY:t[1],texture:N,animation:"moveIntoSector",animationEndPosition:m,animationDuration:sU,onAnimationStarted:L,animationCompleted:y,multiplierGeometry:O,multiplierGlowGeometry:h})},bU=Wi.PA((({outcome:y,rows:L,columns:p,animationCompleted:N,flyingAnimationStarted:t,multiplierDestinations:z,multiplierGlowGeometry:O,multiplierGeometry:m})=>{const k=ai.Pj(),_=function(y,{gameTexture:L,topUpSlot:p}){const{multiplierPool:N}=L;return fi(h.useMemo((()=>0===N[KT.FlyingWithX].size?Object.keys(p.symbolsMap).map((y=>parseInt(y,10))).filter((y=>y>1)):_U.A(y).filter((y=>y>0))),[y,N,p]),KT.FlyingWithX,L)}(y,k),W=h.useMemo((()=>0!==y.length&&0!==z.length&&Object.keys(_).length?z.map((({from:L,to:z})=>{const h=L%p,k=(L-h)/p,W=y[L];return void 0!==W&&0!==W?j.jsx(KU,{animationCompleted:N,animationStarted:t,pachinkoSector:z,startPosition:[(C=k,C/1.08-1.5),(g=h,-g/1.35+.18)],multiplier:W,texture:_[`${W}`],multiplierGeometry:m,multiplierGlowGeometry:O},`${k}-${h}-${z}`):null;var g,C})):[]),[y,z,_,p,N,t,L,m,O]);return j.jsx(j.Fragment,{children:W})}));function nU(y){const[L,p]=h.useState(void 0);return h.useEffect((()=>{const L=y();return p(L),()=>{L.dispose(),p(void 0)}}),[y]),L}const vU=({rows:y,columns:L,outcome:p,animationCompleted:N,animationStarted:t,multipliers:z,multiplierDestinations:O,isBonusGameInProgress:h,phase:m,glowingSectors:k,sectorsTexture:_,showFrame:W,isTransition:g,isTopUpSlotInScreen:C,isTopUpSpin:Q,isSlamStop:T,isPortrait:i})=>{const D=nU(mU),w=nU(kU);return j.jsxs("group",{position:[0,1.35,0],children:[j.jsx(AU,{texture:_,position:[0,-2.55,0],visible:W,isPortrait:i}),j.jsx(bU,{multiplierDestinations:O,outcome:p,animationCompleted:N,flyingAnimationStarted:t,rows:y,columns:L,multiplierGeometry:D,multiplierGlowGeometry:w}),j.jsx("group",{visible:h||C,children:j.jsx(EU,{multipliers:z,animationCompleted:N,multiplierGeometry:D,multiplierGlowGeometry:w,isBonusGameInProgress:h||g})}),j.jsx("group",{visible:!h&&m===bD.Q.TopUpSlot,children:j.jsx(HU,{glowingSectors:k,isTopUpSpin:Q,isSlamStop:T})})]})},eU=[],ZU=Wi.PA((y=>{const{gamePhase:L,topUpSlot:p,restore:N,device:t,pachinko:z,settings:O,sound:m,phaseTransitions:k}=ai.Pj(),_=h.useRef(p.multipliers),[W,g]=h.useState(_.current),C=h.useRef([]),Q=nx.Z(W),T=(i=z.phase)===Nw.lj.PuckDrop?"hideSkipped":i===Nw.lj.AddDouble?"removeTopUp":i===Nw.lj.PrepareForDouble?"removeDoubledTopUp":i===Nw.lj.AddTopUp||i===Nw.lj.MergeWithTopUpAfterDoubling?"addTopUp":void 0;var i;const D=z.phase===Nw.lj.AddTopUp||z.phase===Nw.lj.MergeWithTopUpAfterDoubling,w=h.useMemo((()=>L.phase===bD.Q.TopUpSlot?p.multiplierDestinations:eU),[L.phase,p.multiplierDestinations]),x=p.grid,d=L.phase===bD.Q.Pachinko&&!p.isInScreen,o=h.useMemo((()=>function(y,L){const p=[0,0,0,0];return y.forEach((y=>{p[Math.ceil(y.to/4)-1]+=L[y.from]})),p}(w,x)),[w,x]);h.useEffect((()=>{o.forEach(((y,L)=>{if(d||0===y)return;const p=L+1;m.triggerEvent(KD.P.TopUpZone,p)}))}),[o,d,T,m]),h.useEffect((()=>{(p.isMultipliersAnimationCompleted||L.phase!==bD.Q.TopUpSlot)&&(_.current=L.phase===bD.Q.Pachinko&&D&&Q?Q:p.multipliers,g(_.current))}),[p.multipliers,L.phase,p.isMultipliersAnimationCompleted,D,Q]);const U=h.useCallback(((y,L)=>{"highlightSector"===L?(C.current=C.current.filter((L=>L!==y)),p.onMultipliersAnimationComplete()):"addTopUp"===L?_.current=p.multipliers:(_.current={..._.current,[y]:p.multipliers[y]},C.current=[...C.current,y]),g(_.current)}),[p]),I=N.getSkippedAnimations().includes(T),V="removeTopUp"!==T||I?"removeDoubledTopUp"!==T||I?0:O.hideCageDelayAfterDouble:O.hideCageDelay,F=h.useMemo((()=>{const y={};for(const p of Nw.mU)L.phase===bD.Q.Pachinko?y[p]={value:W[p],animation:I?"hideSkipped":T,duration:O.topUpAnimationDuration,delay:V}:y[p]={value:W[p],animation:C.current.includes(p)?"highlightSector":void 0,delay:V};return y}),[T,V,L.phase,W,O.topUpAnimationDuration,I]);return j.jsx(vU,{rows:p.rows,columns:p.columns,multiplierDestinations:w,phase:L.phase,multipliers:F,outcome:x,animationCompleted:U,animationStarted:p.onMultipliersAnimationStart,isBonusGameInProgress:d,glowingSectors:o,sectorsTexture:y.sectorsTexture,showFrame:k.isTransitionToPachinko||L.phase===bD.Q.Pachinko,isTransition:k.isTransitionToPachinko,isTopUpSlotInScreen:p.isInScreen,isTopUpSpin:L.isTopUpSpinInProgress,isSlamStop:p.isQuickStop,isPortrait:t.isPortrait})})),yI=p(698117);const LI=p(698117),pI=function(){const y={};return Nw.mU.forEach((L=>{y[L]={value:0,animation:void 0,duration:void 0}})),y}(),NI=[.05,-2.7,0],tI=[3.7,.85];function jI({multipliers:y,isPhone:L,isLandscape:p,previousMultipliers:N,showGrid:t,phase:z,glowTexture:O}){var m;const k=nU(mU),_=nU(kU),W=Object.values(y).find((y=>"showResult"===y.animation)),g=h.useRef(null);return function(y){const{value:L,ref:p}=y;h.useEffect((()=>{var y;if(!L||!p.current||!(null===(y=p.current)||void 0===y?void 0:y.material))return;const N=ui(L),t=new fN(.55-.2*N,-.25);p.current.position.copy(t);const j=function(y){const{element:L}=y,p=L.material,N=pD(yI);return Qi.M().delay(DU+.1-WU).sequence(LD({duration:FU-(DU+.1),totalFrames:N.length-1,onUpdate:y=>{p.frame=N[y]}}))}({element:p.current}),z=Ti.l({anim:j});return()=>{j.fastForward(),z()}}),[L,p])}({ref:g,value:null!==(m=null==W?void 0:W.value)&&void 0!==m?m:void 0}),j.jsxs("group",{scale:L&&p?2.5:1.2,position:[0,L&&p?5.2:2.5,0],visible:z===bD.Q.Pachinko,children:[j.jsx(cD,{ref:g,texture:sT.Blast,atlas:LI,size:6}),j.jsx(EU,{multipliers:y,glowTexture:O,isCommonMultiplier:!0,multiplierGlowGeometry:_,multiplierGeometry:k}),j.jsx(EU,{multipliers:N||pI,isCommonMultiplier:!0,multiplierGlowGeometry:_,multiplierGeometry:k}),j.jsx(NU,{position:NI,size:tI,visible:t})]})}const zI=Wi.PA((y=>{const{pachinko:L,gamePhase:p,device:N,restore:t,settings:z,topUpSlot:O}=ai.Pj(),h=L.shouldShowCommonMultipliers(),m=nx.Z(O.multipliers),k=nx.Z(t.isRestoringPachinko),_=h?L.commonMultipliers:L.playerMultipliers,W=nx.Z(_),g=void 0!==L.landZone&&"double"===_[L.landZone],C=function(y){return void 0!==y?Object.keys(y).filter((L=>0!==y[L])):void 0}(m),Q=hU.A(_,((y,p)=>{const N=function(y,L,p,N,t){if(y===Nw.lj.ApplyScatter||y===Nw.lj.DoubledMultipliers)return{animation:"glowParallel",duration:t.glowAnimationDuration};if(y===Nw.lj.ShowCommonMultipliers)return{animation:"fadeIn",duration:t.fadeInAnimationDuration};if(y===Nw.lj.AddTopUp||y===Nw.lj.MergeWithTopUpAfterDoubling)return{animation:"glowSequence",duration:t.glowAnimationDuration};if(y===Nw.lj.PuckLanded){if(L)return p?{animation:"showDouble",duration:t.doubleAnimationDuration}:{animation:"showResult",duration:t.doubleAnimationDuration,delay:t.bonusWinDelay};if(!N)return{animation:"fadeOutAll",duration:t.fadeInAnimationDuration};if(p)return{animation:"hideDouble",duration:t.doubleAnimationDuration}}}(L.phase,`${L.landZone}`===p,"double"===y,g,z);if(t.getSkippedAnimations().includes(null==N?void 0:N.animation))return{value:y};const j="glowSequence"!==(null==N?void 0:N.animation)||(null==C?void 0:C.includes(p)),O=k&&!t.isRestoringPachinko&&void 0===N?"restoreFadeIn":null==N?void 0:N.animation;return{value:y,duration:null==N?void 0:N.duration,animation:j?O:void 0,delay:null==N?void 0:N.delay}})),T=void 0!==W?hU.A(W,(y=>({value:y,animation:"fadeOut",duration:z.topUpAnimationDuration}))):void 0,i=L.phase===Nw.lj.AddTopUp||L.phase===Nw.lj.MergeWithTopUpAfterDoubling;return j.jsx(jI,{multipliers:Q,previousMultipliers:i?T:void 0,isPhone:N.isPhone,isLandscape:N.isLandscape,showGrid:z.displayFakePachinkoWall,phase:p.phase,...y})}));function OI(){const y=h.useRef({});return{refsByKey:y.current,setRef:(L,p)=>{y.current[p]=L}}}const hI=h.memo((({lampTexture:y,starTexture:L,glowingSectors:p,phase:N,geometry:t})=>{const{gamePhase:z,restore:O,phaseTransitions:m}=ai.Pj(),k=O.getSkippedAnimations(),{refsByKey:_,setRef:W}=OI(),{refsByKey:g,setRef:C}=OI(),Q=Object.values(_).filter(Boolean),T=Object.values(g).filter(Boolean),i=h.useRef(null),D=h.useRef(null),w=h.useRef(null),x=h.useMemo((()=>p?p.map(Number):[]),[p]),d=k.includes("removeDoubledTopUp")||k.includes("removeTopUp"),o=m.isTransitionToPachinko;return h.useEffect((()=>{if(N===Nw.lj.AddTopUp||N===Nw.lj.MergeWithTopUpAfterDoubling||o){i.current=Qi.M();const y=[];Nw.mU.forEach((L=>{if(i.current&&void 0!==Q[L-1]&&!d){const p=Q[L-1],N=T[L-1];if(!N)return;const t=(y=>{if(o&&x.includes(y))return[Ci.M(N.rotation).delay(2.1).animateTo({z:2*Math.PI},.7,gi.dV),Ci.M(N.scale).delay(2.1).animateTo({x:1,y:1,z:1},.3,gi.dV),Ci.M(N.scale).delay(2.87).animateTo({x:0,y:0,z:0},.1)];const L=Q[y-1];return[null!==L?Ci.M(L).delay(1).animateTo({opacity:0},.5):Qi.M(),Qi.M().delay(y/16).callback((()=>{x.includes(y)&&p&&(N.scale.x=1,N.scale.y=1,N.scale.z=1,p.opacity=1,p.visible=!0)}))]})(L);y.push(...t)}})),i.current.parallel(y);const L=Ti.l({anim:i.current});return()=>{L()}}}),[x,p,d,D,N,Q,T,o]),j.jsx("group",{scale:o?.8:.2,visible:z.phase===bD.Q.Pachinko&&(N===Nw.lj.AddTopUp||N===Nw.lj.MergeWithTopUpAfterDoubling)||o,position:[-1.85,-1.025,.02],ref:w,children:Nw.mU.map((p=>{const N=.31*(p-1);return j.jsx("mesh",{ref:y=>C(y,p),position:o?[N,0,0]:[1.215*(p-1)+.1,.1,0],geometry:t,scale:0,children:j.jsx("meshBasicMaterial",{ref:y=>W(y,p),map:o?L:y,transparent:!0,depthWrite:!1,depthTest:!1})},`SectorIndicators-${p}`)}))})}));function mI(){return new xz(1.1,1.1)}const kI={greenTexture:{frame:Qx,texture:new FN},redTexture:{frame:Qx,texture:new FN},doubleTexture:{frame:Qx,texture:new FN},glowTexture:{frame:Qx,texture:new FN},sectorsTexture:{frame:Qx,texture:new FN}};function _I(y){const L=vT(sT.TopUpParts,y),[p,N]=h.useState(kI);return h.useEffect((()=>{if(!L.image)return;L.encoding=nL;const{doubleTimer:y,topUpTimerGreen:p,topUpTimerRed:t,glow:j,sectors:z}=ix(kx,L),O={doubleTexture:y,greenTexture:p,redTexture:t,glowTexture:j,sectorsTexture:z};return N(O),()=>{const y=Object.values(O);for(const{texture:L}of y)L.dispose()}}),[L]),p}const WI=Wi.PA((({pachinkoVisible:y})=>{const{device:L,gamePhase:p,phaseTransitions:N,pachinko:t,abstractGame:z,youWin:O,slotLayout:m,videoRect:k,topUpSlot:_,gameTexture:W,restore:g}=ai.Pj(),{glowTexture:C,sectorsTexture:Q}=_I(W),{width:T,height:i,boxWidth:D,boxHeight:w}=z.gameDimensions,x=m.isTopUpSlotShrinkFit,d=N.isTransitionToPachinko||y,o=h.useRef(null),U=(T/k.scale-D)/2,I=nU(mI),V=vT(sT.LampImage,W),F=vT(sT.CageStar,W),u=h.useMemo((()=>function(y,L,p,N,t,j){if(y){const y=N/p;if("mobilePortrait"===L)return{x:.025,y:y>.8?-2:-1.85,z:0};if("tablet"===L){const L=.012*t;return{x:L/2-L-y,y:-2.05,z:0}}return{x:-2.2,y:-1.838,z:0}}return{x:.15,y:j?.05:-.55,z:0}}(d,L.layoutMode,i,T,U,x)),[d,L.layoutMode,i,T,U,x]),S=h.useMemo((()=>function(y,L,p,N,t){return y?"mobilePortrait"===L?t?.8:p/N*.5-.21:"tablet"===L?.75:.717:1}(d,L.layoutMode,i,T,x)),[d,L.layoutMode,i,x,T]),B=nx.Z(_.multipliers),R=B?Object.keys(B).filter((y=>void 0!==B&&0!==B[y])):void 0,Y=h.useRef(null);return h.useEffect((()=>{Y.current=Qi.M();const y=o.current,j="tablet"===L.layoutMode?{x:u.x,y:-2.5}:"desktop"===L.layoutMode?{x:-2.185,y:-2}:{x:.025,y:x?-2.1:-2},z=S-.1,O=S+.12,h=2.37,m={x:S,y:S,z:1},k={x:O,y:O,z:1},_={x:z,y:z,z:1};Y.current&&y&&!N.isTransitionToPachinko&&t.phase!==Nw.lj.PuckDrop&&t.phase!==Nw.lj.PuckLanded&&Y.current.parallel([Ci.M(y.scale).animateTo(m,p.phase===bD.Q.TopUpSlot?0:.25,gi.dV),Ci.M(y.position).animateTo(u,p.phase===bD.Q.TopUpSlot?0:.25,gi.dV)]),Y.current&&y&&N.isTransitionToPachinko&&(0===(null==R?void 0:R.length)&&Y.current.parallel([Ci.M(y.scale).animateTo(m,.66,gi.dV),Ci.M(y.position).animateTo(j,.66,gi.dV).delay(h).animateTo(u,.665,gi.dV)]),Y.current.parallel([Ci.M(y.scale).animateTo(_,.66,gi.dV).delay(h).animateTo(k,.33,gi.dV).animateTo(m,.33,gi.dV),Ci.M(y.position).animateTo(j,.66,gi.dV).delay(h).animateTo(u,.4,gi.dV)]));const W=Ti.l({anim:Y.current});return()=>{var y;null===(y=Y.current)||void 0===y||y.fastForward(),W()}}),[L.layoutMode,u,S,x,p.phase,t.phase,N.isTransitionToPachinko,null==R?void 0:R.length]),h.useEffect((()=>{const y=o.current;if(!y||"mobilePortrait"!==L.layoutMode)return;const p=T/i*1.8,N=.03*(-(i/k.scale-w)/2),j=(z=T/i,x?z>.8?1.5*-z:0*-z:z>.62?.3*-z:z>.55?.4*-z:z>=.5?0:.22*z);var z;const O=x?{x:p,y:p,z:1}:{x:.92,y:.92,z:1},h=x?N+j-2.2:N+j-2;if(Y.current&&y&&t.phase===Nw.lj.PuckDrop&&void 0===t.landZone){Y.current.delay(.2).parallel([Ci.M(y.position).animateTo({x:u.x-.05,y:h},.5,Rd.sh),Ci.M(y.scale).animateTo(O,.5,Rd.sh)]);const L=Ti.l({anim:Y.current});return()=>{var y;null===(y=Y.current)||void 0===y||y.fastForward(),L()}}if(Y.current&&(void 0!==t.landZone&&t.phase===Nw.lj.PuckLanded||void 0!==t.landZone&&"double"===t.playerMultipliers[t.landZone])){Y.current.parallel([Ci.M(y.scale).animateTo({x:S,y:S,z:1},1,gi.dV),Ci.M(y.position).animateTo(u,1,gi.dV)]);const L=Ti.l({anim:Y.current});return()=>{var y;null===(y=Y.current)||void 0===y||y.fastForward(),L()}}}),[w,L.layoutMode,u,i,x,S,t.landZone,t.phase,t.playerMultipliers,k.scale,T,O.showGameResult]),j.jsxs("group",{ref:o,visible:!g.isRestoringPachinko,children:[j.jsxs("group",{scale:.88,position:[-.01,.11,0],visible:d,children:[j.jsx(zI,{glowTexture:C.texture}),j.jsx(OU,{})]}),j.jsx("group",{children:j.jsx("group",{visible:p.phase===bD.Q.TopUpSlot||p.phase===bD.Q.Pachinko,children:j.jsx(ZU,{sectorsTexture:Q.texture})})}),j.jsx(hI,{lampTexture:V,starTexture:F,glowingSectors:R,phase:t.phase,geometry:I})]})})),gI=Wi.PA((({pachinkoVisible:y,defaultRenderPriority:L})=>{const{slotLayout:p}=ai.Pj(),N=h.useMemo((()=>new jm),[]);return PQ((({gl:y,camera:L})=>{y.autoClear=!1;const{x:t,y:j,height:z,width:O}=p.topUpSlotDimensions;"aspect"in L&&(y.setViewport(t,j,O,z),L.aspect=O/z,L.updateProjectionMatrix()),y.clearDepth(),y.render(N,L)}),L),AQ(j.jsx(WI,{pachinkoVisible:y}),N)})),CI=2*Math.PI/3;Math.PI;const QI=y=>0===y?0:1===y?1:2**(-10*y)*Math.sin((10*y-.75)*CI)+1,TI="uniform sampler2D redBackgroundTexture;uniform sampler2D greenBackgroundTexture;uniform float textureInterpolation;uniform vec4 redBackgroundFrameData;uniform vec4 greenBackgroundFrameData;varying vec2 vUV;vec2 spriteSheet(vec2 uv,vec4 spriteRect){return vec2(spriteRect.x+uv.x*spriteRect.z,spriteRect.y-(1.-uv.y)*spriteRect.w);}void main(){vec4 red=texture2D(redBackgroundTexture,spriteSheet(vUV,redBackgroundFrameData));vec4 green=texture2D(greenBackgroundTexture,spriteSheet(vUV,greenBackgroundFrameData));vec4 currentGreen=mix(green,red,smoothstep(textureInterpolation-0.1,textureInterpolation,vUV.x));gl_FragColor=currentGreen;\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",iI="varying vec2 vUV;void main(){vUV=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}";cC({ProgressMaterial:class extends Nz{constructor(y){var L,p,N,t,j;super({vertexShader:iI,fragmentShader:TI,transparent:!0,depthTest:!0,uniforms:{redBackgroundTexture:{value:null!==(L=null==y?void 0:y.redBackgroundTexture)&&void 0!==L?L:null},greenBackgroundTexture:{value:null!==(p=null==y?void 0:y.greenBackgroundTexture)&&void 0!==p?p:null},textureInterpolation:{value:null!==(N=null==y?void 0:y.textureInterpolation)&&void 0!==N?N:0},redBackgroundFrameData:{value:null!==(t=null==y?void 0:y.redBackgroundFrameData)&&void 0!==t?t:Qx},greenBackgroundFrameData:{value:null!==(j=null==y?void 0:y.greenBackgroundFrameData)&&void 0!==j?j:Qx}}})}set redBackground(y){this.uniforms.redBackgroundTexture.value=y.texture,this.uniforms.redBackgroundFrameData.value=y.frame}set greenBackground(y){this.uniforms.greenBackgroundTexture.value=y.texture,this.uniforms.greenBackgroundFrameData.value=y.frame}}});const DI=Wi.PA(h.forwardRef((({meshProps:y,greenTexture:L,redTexture:p,doubleTexture:N,animationsEnabled:t,hasDoubleEvent:z,visible:O},m)=>{const{qualificationTimer:k,gamePhase:_}=ai.Pj(),W=h.useRef(null),g=h.useRef(null),C=h.useRef(null),Q=h.useRef(null),T=h.useRef(0),i=h.useRef(null),D=m||g,w=k.totalQualificationTime,x=h.useRef(!1);return h.useEffect((()=>{!_.isPlayerTransferredToBonus&&k.visible&&(T.current=k.timeRemainingSec)}),[_.isPlayerTransferredToBonus,k.visible,k.timeRemainingSec]),h.useEffect((()=>{const y=C.current,L=Q.current;if(!y||!L)return;if(!z||_.phase!==bD.Q.TopUpSlot)return;const p=Qi.M();return p.callback((()=>{x.current=!0})).parallel([Ci.M(y).animateTo({opacity:1},.5),Ci.M(L.scale).animateTo({x:1.3,y:1.3,z:1.3},2,QI)]).parallel([Ci.M(L.scale).animateTo({x:1,y:1,z:1},.4),Ci.M(y).animateTo({opacity:0},1).callback((()=>{x.current=!1}))]),i.current={timeline:p,dispose:Ti.l({anim:p})},()=>{var y,L;null===(y=i.current)||void 0===y||y.timeline.fastForward(),null===(L=i.current)||void 0===L||L.dispose(),i.current=null}}),[_.phase,z,D]),PQ(((y,N)=>{if(!D.current||!W.current||void 0===L||void 0===p||!O)return void(D.current.visible=!1);if(k.visible&&k.areBetsOpen||(T.current=0),x.current||!k.running)return W.current.redBackground=p,W.current.greenBackground=L,void(W.current.uniforms.textureInterpolation.value=0);D.current.visible=!0,W.current.redBackground=p,W.current.greenBackground=L;const j=T.current/w+.05;W.current.uniforms.textureInterpolation.value!==j&&(W.current.uniforms.textureInterpolation.value=j,W.current.needsUpdate=!0),0!==T.current&&(T.current-=N),!1===t&&(W.current.uniforms.textureInterpolation.value=0,W.current.needsUpdate=!1)})),j.jsxs("group",{children:[j.jsxs("mesh",{position:[1.8,1.2,.1],ref:Q,visible:z,...y,children:[j.jsx("planeGeometry",{args:[.75,.15]}),j.jsx("meshBasicMaterial",{opacity:0,ref:C,map:N.texture,transparent:!0})]}),j.jsxs("mesh",{position:[fx.progressBarXOffset,fx.progressBarYOffset,0],ref:D,visible:O,...y,children:[j.jsx("planeGeometry",{args:[fx.progressBarWidth,fx.progressBarHeight]}),j.jsx("progressMaterial",{ref:W})]})]})})));var wI=p(693);const xI=Wi.PA((()=>{const{gameTexture:y}=ai.Pj(),{frameXOffset:L,frameYOffset:p,frameWidth:N,frameHeight:t}=fx,z=vT(sT.TopUpSlot,y);return j.jsxs("mesh",{position:[L,p,-.1],children:[j.jsx("meshBasicMaterial",{map:z,transparent:!0}),j.jsx("planeGeometry",{args:[N,t]})]})}));function dI(){return new xz(1.12,.88)}const oI=h.forwardRef((({id:y=1,colorWrite:L=!1,depthWrite:p=!1,...N},t)=>{const j=h.useRef(null),z=h.useMemo((()=>({colorWrite:L,depthWrite:p,stencilWrite:!0,stencilRef:y,stencilFunc:xp,stencilFail:Op,stencilZFail:Op,stencilZPass:Op})),[y,L,p]);return h.useLayoutEffect((()=>{Object.assign(j.current.material,z)})),h.useImperativeHandle(t,(()=>j.current),[]),h.createElement("mesh",ZT.A({ref:j,renderOrder:-y},N))})),UI=({maskId:y,textures:L,symbol:p})=>{const N=h.useRef(null),t=h.useRef(null),z=h.useRef(),O=function(y,L=!1){return{stencilWrite:!0,stencilRef:y,stencilFunc:L?Dp:Qp,stencilFail:zp,stencilZFail:zp,stencilZPass:zp}}(y);return PQ((()=>{if(!N.current||!t.current)return;const y=p;(null==y?void 0:y.symbol)?(N.current.visible=!0,N.current.scale.y=.75,N.current.position.setY(y.symbol.position.y),z.current!==L[y.symbol.id]&&(z.current=L[y.symbol.id],t.current.setValues({map:z.current}),null!==y.id&&(t.current.rotation=.19))):N.current.visible=!1})),j.jsx("sprite",{ref:N,children:j.jsx("spriteMaterial",{ref:t,...O})})};let II=1;const VI=h.memo((({symbolsPool:y,reelIndex:L,textures:p,position:N,maskGeometry:t})=>{const[z]=h.useState((()=>II++));return j.jsxs("group",{position:N,children:[j.jsx(oI,{id:z,geometry:t}),y.getSymbolsForReel(L).map((y=>j.jsx("group",{children:j.jsx(UI,{maskId:z,symbol:y,textures:p})},y.symbolIndex)))]})})),FI=({textures:y,symbolsPool:L,spinEngine:p,rows:N,columns:t,phase:z,onSpinFinished:O,onSpinStarted:m,isQuickStop:k,isReady:_,gridWidthRatio:W,gridHeightRatio:g})=>{const{startSpinning:C,stopSpinning:Q}=p,T=nU(dI);h.useEffect((()=>{(async()=>{z===bw.WI.Spinning&&_?(await C(),m()):z===bw.WI.StopSpinning?(await Q(k),O()):z!==bw.WI.Error&&z!==bw.WI.Transition||(await Q(!0),O())})()}),[C,Q,O,m,z,k,_]);const i=h.useMemo((()=>{const y=[];for(let L=0;L<N;L++)for(let p=0;p<t;p++){const j=-(t/2-p-W*p),z=N/2-L-g*L;y.push({index:L+p*t,position:[j,z,0]})}return y}),[W,g,N,t]);return j.jsx(j.Fragment,{children:i.map((({index:p,position:N})=>j.jsx(VI,{symbolsPool:L,reelIndex:p,position:N,textures:y,maskGeometry:T},p)))})},uI=4;class SI extends gd{constructor(y,L){super(),this.initializeSymbolsMap(y,2*(L+uI))}synchronizeSymbol(y){const L=this.getSymbolByInstance(y);L&&(L.positionY=y.position.y)}createSymbol(y){return{id:null,symbol:null,reelIndex:y,symbolIndex:this.nextPoolId++,positionY:0}}}function BI(y,L,p,N){return N+y%L*500+Math.floor(y/p)*(150+Math.floor(100*Math.random()))}const RI={},YI=Wi.PA((({customSpinConfig:y,visible:L})=>{const p=ai.Pj(),{topUpSlot:N,gamePhase:t,sound:z}=p,{columns:O,outcome:m,rows:k,reelStrips:_,minSpinTime:W}=N,[g,C]=h.useState(!1),Q=h.useMemo((()=>new SI(k*O,1)),[k,O]),T=Fd(k*O,Q,{config:null!=y?y:bw.hL,symbols:bw._u}),{engine:i,reelSet:D}=T,w=N.isQuickStop||t.isTurboModeEnabledForSpin,x=h.useRef(!1),d=function({gameTexture:y,topUpSlot:L}){const p=y.cache[sT.MultiplierSymbolsItalic],N=y.cache[sT.TokenSymbol],t=y.cache[sT.TopUpShine],j=y.baseMultiplierTextures.italic,z=L.symbolsMap,O=h.useMemo((()=>({MultiplierSymbolsItalic:p,TokenSymbol:N,TopUpShine:t})),[p,t,N]),m=h.useMemo((()=>Object.keys(L.symbolsMap).map((y=>parseInt(y,10)))),[L.symbolsMap]);h.useEffect((()=>{if(!Object.values(O).includes(void 0))if(y.multiplierPool[KT.WithShine].size>0&&null!==k)for(const p of m)Mi({type:KT.WithShine,multiplier:p,texture:k[`${L.symbolsMap[p]}`],compositionTextures:O,store:y});else Ei(m,KT.WithShine,O,y).then((y=>{if(0===Object.keys(y).length)return;const L={};for(const p of Object.keys(y))L[z[parseInt(p,10)]]=y[p];_(L)}))}),[O,m,y,z,j]);const[k,_]=h.useState(null);return k}(p);h.useEffect((()=>{t.topUpSlotPhase===bw.WI.Result&&(x.current=!1)}),[t.topUpSlotPhase]),h.useEffect((()=>{const y=k*O;if(!g&&D&&!wI.A(_)&&m.length===y){for(let L=0;L<y;L++){const y=D.getReel(L);y.setStopDelay(BI(L,O,k,W)),y.onStopSequenceEnd=y=>{if(w)return void(!1===x.current&&(z.triggerEvent(KD.P.TopUpReelBounceQuickStop),x.current=!0));const L=`topUpReelBounce${y+1}${m[y][0]?"True":"False"}`;z.triggerEvent(L)}}i.activateReelset(D.name),D.setReelStripsSymbols(_),D.setOutcome(m),D.presentOutcome(),C(!0)}}),[i,D,k,O,m,W,_,z,w,g]),h.useEffect((()=>{if(m.length>0&&g){D.setOutcome(m);const y=D.reelCount;for(let L=0;L<y;L++){const y=D.getReel(L).currentSpinMechanic;"stopBounceDuration"in y&&(y.stopBounceDuration=0===m[L][0]?0:bw.hL.stopBounceDuration)}}}),[m,g,D]),h.useEffect((()=>{N.setIsSlotReady(g&&null!==d&&L)}),[N,g,d,L]);const o=h.useCallback((()=>N.onSpinEnd()),[N]),U=h.useCallback((()=>N.onSpinStarted()),[N]);PQ(((y,L)=>{T.engine.timestep(1e3*L)}));const{gridXOffset:I,gridYOffset:V}=fx;return j.jsxs("group",{visible:g&&null!==d&&L,scale:.76,position:[.68,-.8,0],children:[j.jsx("group",{scale:1/6,position:[0,0,0],children:j.jsx(xI,{})}),j.jsx("group",{position:[I,V,0],children:j.jsx(FI,{symbolsPool:Q,textures:null!=d?d:RI,spinEngine:T,rows:k,columns:O,phase:t.topUpSlotPhase,isQuickStop:w,onSpinFinished:o,onSpinStarted:U,isReady:g,gridHeightRatio:fx.gridHeightRatio,gridWidthRatio:fx.gridWidthRatio})})]})})),EI=Wi.PA((({setTopUpSlotRef:y,topUpSlotVisible:L,pachinkoVisible:p})=>{const{settings:N,gamePhase:t,device:z,slotLayout:O,gameTexture:m}=ai.Pj(),{doubleTexture:k,greenTexture:_,redTexture:W}=_I(m),g=h.useRef(null),C=h.useRef(null),Q=L,T=(i=p,D=z.layoutMode,w=O.isTopUpSlotShrinkFit,i?"desktop"===D||"tablet"===D?[.02,-1.725,0]:[0,-.78,0]:w?[-1.82,1.04,0]:[-1.82,.45,0]);var i,D,w;return h.useEffect((()=>{g.current&&C.current&&y({slot:g.current,group:C.current})}),[y]),j.jsx("group",{ref:C,children:j.jsxs("group",{ref:g,position:T,children:[j.jsx(YI,{visible:Q}),j.jsx(DI,{hasDoubleEvent:t.hasDoubleAppeared,greenTexture:_,redTexture:W,animationsEnabled:N.animationsEnabled,doubleTexture:k,visible:Q})]})})})),PI=({topUpSlotVisible:y,setTopUpSlotRef:L,pachinkoVisible:p})=>j.jsx(EI,{topUpSlotVisible:y,pachinkoVisible:p,setTopUpSlotRef:L}),lI=Wi.PA((({topUpSlotVisible:y,setTopUpSlotRef:L,pachinkoVisible:p,defaultRenderPriority:N})=>{const{slotLayout:t,gamePhase:z,topUpSlot:O}=ai.Pj(),m=z.phase!==bD.Q.Pachinko||O.isInScreen,k=h.useMemo((()=>new jm),[]);return PQ((({gl:y,camera:L,size:p})=>{y.autoClear=!1;const{x:N,y:j,height:z,width:O}=t.topUpSlotDimensions;"aspect"in L&&m?(y.setViewport(N,j,O,z),L.aspect=O/z,L.updateProjectionMatrix()):"aspect"in L&&(y.setViewport(0,0,p.width,p.height),L.aspect=p.width/p.height,L.updateProjectionMatrix()),y.clearDepth(),y.render(k,L)}),N),AQ(j.jsx(PI,{topUpSlotVisible:y,pachinkoVisible:p,setTopUpSlotRef:L}),k)})),MI=({setTopUpSlotRef:y,mainSlotVisible:L,topUpSlotVisible:p,pachinkoVisible:N,bonusOverlayRef:t,bonusLogoRef:z,bonusLogoShineRef:O})=>j.jsxs(j.Fragment,{children:[j.jsx(cw,{renderPriority:0}),j.jsx(Bd,{visible:L,renderPriority:1}),j.jsx(lI,{topUpSlotVisible:p,pachinkoVisible:N,setTopUpSlotRef:y,defaultRenderPriority:2}),j.jsx(gI,{pachinkoVisible:N,defaultRenderPriority:3}),j.jsx(Kw,{defaultRenderPriority:3,useAspect:!0,children:j.jsx(yw,{logoRef:z,overlayRef:t,logoShineRef:O})}),j.jsx(Kw,{defaultRenderPriority:3,useAspect:!0,children:j.jsx(hw,{})}),j.jsx(Kw,{defaultRenderPriority:2,useAspect:!1,children:j.jsx(eD,{})})]});var fI,aI;(function(y){y["NoSlot"]="NoSlot",y["Main"]="Main",y["TopUp"]="TopUp",y["Pachinko"]="Pachinko"})(fI||(fI={})),function(y){y[y["Idle"]=0]="Idle",y[y["AnimatingToMainSlot"]=1]="AnimatingToMainSlot",y[y["AnimatingToTopUpSlot"]=2]="AnimatingToTopUpSlot",y[y["AnimatingToPachinko"]=3]="AnimatingToPachinko"}(aI||(aI={}));const HI=.1,XI=.2,JI=.35,rI=JI+XI;function GI(y){const L=new XN;L.setFromObject(y).applyMatrix4(y.matrixWorld);const p=new fN;return L.getSize(p),p}const $I=0,qI=.33,AI=.39,sI=.66,cI=1,KI=1.33,bI=2.33,nI=2.66,vI=2.96,eI=3;function ZI(y){const{ref:L}=y;return Qi.M().parallel([Ci.M(L.material).callback((()=>{L.material.opacity=0})).delay(qI).animateTo({opacity:1},cI-qI,gi.dV).delay(nI-cI).animateTo({opacity:0},eI-nI,gi.dV),Ci.M(L.mesh.rotation).callback((()=>{L.mesh.rotation.z=NN.degToRad(-70)})).delay(qI).animateTo({z:NN.degToRad(250)},eI-qI)])}function yV(y){const{logo:L,shine:p}=y;return Qi.M().parallel([Ci.M(L.material).callback((()=>{L.material.opacity=0})).delay(AI).animateTo({opacity:1},sI-AI).delay(nI-sI).animateTo({opacity:0},vI-nI),Ci.M(L.mesh.scale).callback((()=>{L.mesh.scale.set(1,1,1)})).delay(qI).animateTo({x:.1,y:.1,z:.1},sI-qI,gi.dV).animateTo({x:.5,y:.5,z:.5},cI-sI,gi.dV).animateTo({x:.25,y:.25,z:.25},KI-cI,gi.dV).delay(bI-KI).animateTo({x:.5,y:.5,z:.5},nI-bI,gi.dV).animateTo({x:.05,y:.05,z:.05},eI-nI,gi.dV),Ci.M(p).delay(KI-$I).animateTo({progress:1},bI-KI,gi.dV)])}var LV;(function(y){y["TransitionToTopUp"]="TransitionPhase.TransitionToTopUp",y["TransitionToPachinko"]="TransitionPhase.TransitionToPachinko",y["TransitionToMain"]="TransitionPhase.TransitionToMain",y["None"]="TransitionPhase.None"})(LV||(LV={}));var pV=p(977536),NV=p(465300);function tV({state:y,actions:L,topUpSlotRef:p,transitionPhase:N,bonusOverlayRef:t,bonusLogoRef:j,bonusLogoShineRef:z}){const{size:O,viewport:m}=EQ(),{device:k,mainSlot:_,slotLayout:W}=ai.Pj(),{xxxtremeButton:g,hologram:C,infoBar:Q}=function(){const{references:y}=ai.Pj(),L=y.getReference(pV.C.HologramContainer),p=y.getReference(pV.C.XXXtremeButton),N=y.getReference(pV.C.InfoBar);return{hologram:h.useMemo((()=>L?new NV.a(L):null),[L]),xxxtremeButton:h.useMemo((()=>p?new NV.a(p):null),[p]),infoBar:h.useMemo((()=>N?new NV.a(N):null),[N])}}();h.useEffect((()=>{if(y.animationState===aI.AnimatingToTopUpSlot){if(p)return C&&Q||window.console.warn("useEffect::useSlotTransitions no element references",{hologram:C,infoBar:Q}),function(y){const{topUpSlot:L,size:p,onStart:N,onFinish:t,xxxtremeButton:j,hologram:z,infoBar:O,layoutMode:h,setMainSlotRenderRegion:m,fastForward:k}=y,_={x:0,y:0},W=new fN(0,0,0),g=GI(L.slot);m(_.x,_.y),L.group.worldToLocal(g),L.group.position.x=g.x;const C=HI*(W.x-L.group.position.x),Q=Qi.M();Q.callback(N).parallel([_?Ci.M(_).animateTo({y:-p.height},rI,gi.WD).onUpdate((()=>m(_.x,_.y))):Qi.M(),z?Ci.M(z).animateTo({opacity:0},0):Qi.M(),j?Ci.M(j).animateTo({opacity:0},0):Qi.M(),O?Ci.M(O).animateTo("mobilePortrait"===h?{opacity:0}:{x:-p.width},rI,gi.WD):Qi.M(),Ci.M(L.group.position).animateTo({x:C},JI,gi.WD).animateTo({x:W.x},XI,gi.WD)]).callback(t);const T=Ti.l({anim:Q});return k&&Q.fastForward(),()=>{Q.fastForward(),T()}}({topUpSlot:p,size:O,hologram:C,xxxtremeButton:g,infoBar:Q,onFinish:L.switchToTopUpFinished,onStart:L.switchToTopUpStarted,layoutMode:k.layoutMode,setMainSlotRenderRegion:_.setRenderRegion,fastForward:N!==LV.TransitionToTopUp});window.console.warn("useEffect::useSlotTransitions no element references",{topUpSlotRef:p})}}),[L.switchToTopUpFinished,L.switchToTopUpStarted,k.layoutMode,C,Q,O,y.animationState,g,_.setRenderRegion,N,p]),h.useEffect((()=>{if(y.animationState===aI.AnimatingToMainSlot)return C&&Q||window.console.warn("useEffect::animateGameResultToMain no element references",{hologram:C,infoBar:Q}),function(y){const{size:L,onStart:p,onFinish:N,xxxtremeButton:t,hologram:j,infoBar:z,layoutMode:O,setMainSlotRenderRegion:h,fastForward:m}=y,k={x:("mobilePortrait"===O?1:-1)*L.width,y:0};h(k.x,k.y);const _=-1*k.x;t&&(t.x=_,t.y=0,t.opacity=1),null!==j&&(j.x=_,j.y=0,j.opacity=1),null!==z&&(z.x=_,z.opacity=1,z.y=0);const W=-1*HI*k.x,g=-1*HI*_,C=Qi.M();C.callback(p).parallel([k?Ci.M(k).animateTo({x:W},JI,gi.WD).onUpdate((()=>h(k.x,k.y))).animateTo({x:0},XI,gi.WD).onUpdate((()=>h(k.x,k.y))):Qi.M(),j?Ci.M(j).animateTo({x:g},JI,gi.WD).animateTo({x:0},XI,gi.WD):Qi.M(),t?Ci.M(t).animateTo({x:g},JI,gi.WD).animateTo({x:0},XI,gi.WD):Qi.M(),z?Ci.M(z).animateTo({x:g},JI,gi.WD).animateTo({x:0},XI,gi.WD):Qi.M()]).callback(N);const Q=Ti.l({anim:C});return m&&C.fastForward(),()=>{C.fastForward(),Q()}}({size:O,hologram:C,xxxtremeButton:g,infoBar:Q,layoutMode:k.layoutMode,onStart:L.switchToMainStarted,onFinish:L.switchToMainFinished,setMainSlotRenderRegion:_.setRenderRegion,fastForward:N!==LV.TransitionToMain})}),[L.switchToMainFinished,L.switchToMainStarted,k.layoutMode,C,Q,O,y.animationState,g,_.setRenderRegion,N]),h.useEffect((()=>{if(y.animationState===aI.AnimatingToPachinko&&p&&t&&j&&z)return function(y){const{topUpSlot:L,bonusLogo:p,bonusOverlay:N,onStart:t,onFinish:j,fastForward:z,viewport:O,onHiddeTopSlot:h,bonusLogoShine:m,setTopUpSlotXPosition:k}=y,_=Qi.M().callback(t).sequence(function(y){const{ref:L,viewport:p,onReady:N,setTopUpSlotXPosition:t}=y,j=GI(L.slot);return t(.5*p.width+j.x),Ci.M(L.group.position).animateTo({x:.5*p.width+j.x},sI-$I,gi.dV).callback(N).callback((()=>{L.group.position.set(0,0,0)}))}({ref:L,viewport:O,onReady:h,setTopUpSlotXPosition:k})).parallel([ZI({ref:N}),yV({logo:p,shine:m})]).callback(j),W=Ti.l({anim:_});return z&&_.fastForward(),()=>{_.fastForward(),W()}}({topUpSlot:p,bonusLogo:j,bonusOverlay:t,bonusLogoShine:z,onFinish:L.switchToPachinkoFinished,onStart:L.switchToPachinkoStarted,viewport:m,fastForward:N!==LV.TransitionToPachinko,onHiddeTopSlot:L.switchToPachinkoFinishedTopSlotHidden,setTopUpSlotXPosition:y=>W.setTransitionEndXPosition(y)})}),[t,j,L.switchToPachinkoFinishedTopSlotHidden,L.switchToPachinkoFinished,L.switchToPachinkoStarted,y.animationState,p,N,m,z,W])}function jV(y,L,p){switch(y){case fI.Main:return L!==aI.AnimatingToMainSlot&&!(p===y&&L===aI.Idle);case fI.TopUp:return L!==aI.AnimatingToTopUpSlot&&!(p===y&&L===aI.Idle);case fI.NoSlot:case fI.Pachinko:return L!==aI.AnimatingToPachinko&&!(p===y&&L===aI.Idle)}}const zV=y=>{const{isPachinkoPhase:L,isTopUpSlotPhase:p,isMainSlotPhase:N,setMainSlotInScreen:t,setTopUpSlotInScreen:z,setPachinkoInScreen:O,setIsAnimating:m,isAnimating:k,transitionPhase:_,setTransitionFinished:W,isTopSlotInScreen:g}=y,[C,Q]=h.useState(),[T,i]=h.useState(),[D,w]=h.useState(),[x,d]=h.useState(null),[o,U]=h.useState({currentSlot:fI.NoSlot,animationState:aI.Idle}),I=h.useCallback((()=>{U({currentSlot:fI.Main,animationState:aI.Idle}),t(!0),O(!1),m(!1),W()}),[t,O,m,W]),V=h.useCallback((()=>{U({currentSlot:fI.TopUp,animationState:aI.Idle}),t(!1),z(!0),m(!1),W()}),[t,z,m,W]),F=h.useCallback((()=>{U({currentSlot:fI.Pachinko,animationState:aI.Idle}),t(!1),z(!1),m(!1),W(),O(!0)}),[m,t,O,z,W]),u=h.useCallback((()=>{m(!0)}),[m]),S=h.useCallback((()=>{z(!1)}),[z]),B=h.useMemo((()=>({switchToTopUpFinished:V,switchToPachinkoFinished:F,switchToMainFinished:I,switchToTopUpStarted:u,switchToMainStarted:u,switchToPachinkoStarted:u,switchToPachinkoFinishedTopSlotHidden:S})),[V,F,I,u,S]);tV({state:o,actions:B,topUpSlotRef:x,transitionPhase:_,bonusLogoRef:C,bonusLogoShineRef:T,bonusOverlayRef:D}),h.useEffect((()=>{t(o.currentSlot===fI.Main),z(o.currentSlot===fI.TopUp),O(o.currentSlot===fI.Pachinko)}),[]),h.useEffect((()=>{N||p||L?N&&!k&&jV(fI.Main,o.animationState,o.currentSlot)?U({animationState:aI.AnimatingToMainSlot,currentSlot:fI.Main}):p&&!k&&jV(fI.TopUp,o.animationState,o.currentSlot)?U((y=>({...y,animationState:aI.AnimatingToTopUpSlot}))):L&&jV(fI.Pachinko,o.animationState,o.currentSlot)&&U((y=>({...y,animationState:aI.AnimatingToPachinko}))):U({currentSlot:fI.NoSlot,animationState:aI.Idle})}),[N,L,k,m,p,U,o.animationState,o.currentSlot]);const R={[aI.Idle]:o.currentSlot===fI.Main,[aI.AnimatingToMainSlot]:k,[aI.AnimatingToTopUpSlot]:!0,[aI.AnimatingToPachinko]:!1}[o.animationState],Y={[aI.Idle]:o.currentSlot===fI.TopUp,[aI.AnimatingToMainSlot]:!1,[aI.AnimatingToTopUpSlot]:k,[aI.AnimatingToPachinko]:g}[o.animationState],E={[aI.Idle]:o.currentSlot===fI.Pachinko,[aI.AnimatingToMainSlot]:!1,[aI.AnimatingToTopUpSlot]:!1,[aI.AnimatingToPachinko]:!g}[o.animationState];return j.jsx(MI,{bonusLogoRef:Q,bonusLogoShineRef:i,bonusOverlayRef:w,setTopUpSlotRef:d,mainSlotVisible:R,topUpSlotVisible:Y,pachinkoVisible:E})},OV=Wi.PA((()=>{const y=ai.Pj(),L=h.useCallback((L=>{y.mainSlot.setIsInScreen(L)}),[y.mainSlot]),p=h.useCallback((L=>{y.topUpSlot.setIsInScreen(L)}),[y.topUpSlot]),N=h.useCallback((L=>{y.pachinko.setIsInScreen(L)}),[y.pachinko]),t=h.useCallback((()=>{y.phaseTransitions.setTransitionPhase(LV.None)}),[y.phaseTransitions]),z={isPachinkoPhase:y.pachinko.visible,isMainSlotPhase:y.mainSlot.visible,isTopUpSlotPhase:y.topUpSlot.visible,setIsAnimating:y.phaseTransitions.setIsAnimating,isAnimating:y.phaseTransitions.isAnimating,transitionPhase:y.phaseTransitions.phase,setMainSlotInScreen:L,setTopUpSlotInScreen:p,setPachinkoInScreen:N,setTransitionFinished:t,isTopSlotInScreen:y.topUpSlot.isInScreen};return j.jsx(zV,{...z})}));var hV=p(4961),mV=p(212429),kV=p(73816),_V=p(779204),WV=p(484802),gV=p(881357),CV=p(926610),QV=p(394532),TV=p(977804),iV=p(892510),DV=p(747992),wV=p(706809),xV=p(735821),dV=p(444792),oV=p(767359);function UV(y,L,p){const N=oV._9(IV(p,y));if(!N)return null;try{(function(y,L){if(!wV.A(y))throw new mV.ew("Autoplay state is not an object.");const{lastActiveSession:p,selectedRounds:N,isRunning:t}=y;if(p!==L)throw new mV.ew("Autoplay state contains stale data from a non-current session.");if(!xV.A(N))throw new mV.ew("Autoplay state contains invalid selectedRounds.");if(!dV.A(t))throw new mV.ew("Autoplay state contains invalid isRunning.")})(N,L);const{lastActiveSession:y,...p}=N;return p}catch(y){return 1&&window.console.warn(`Unable to load existing Autoplay state from session storage: ${y}`),null}}function IV(y,L){return`${y}-${L}`}function VV(){window.EVO_LOADER.sendLog("CLIENT_ERROR",{message:"Autoplay is unable to use session storage."})}const FV="SlotsAutoplayState";class uV{constructor(y,L){this.ag=y,this.options=L,this.isRunning=new WV.L(!1),this.isStartable=new WV.L(!1),this.isAvailable=new WV.L(!1),this.roundsLeft=new WV.L(0),this.selectedRounds=new WV.L(0),this.lossLimit=new WV.L(0),this.singleWin=new WV.L(0),this.totalBetToRepeat=new WV.L(0),this.limitsEnabled=new WV.L(!1),this.repeatCount=0,this.runningLoss=0,this.lastWin=0,this.pendingStopReason=null,this.unsubscribers={common:[],running:[],lossLimit:[]},this.start=()=>{if(!this.isStartable.value||this.isRunning.value)return;this.roundsLeft.value=this.selectedRounds.value,this.isRunning.value=!0,this.unsubscribers.running.push(this.ag.network.status.subscribe(this.trackNetworkStatus),this.ag.lifecycle.current.subscribe(this.trackLifecycle,!1),this.ag.compliance.realityCheck.status.subscribe(this.trackRealityCheck,!1)),this.limitsEnabled.value&&this.unsubscribers.running.push(this.ag.gameResult.amount.subscribe(this.trackLastWin,!1));const y=this.limitsEnabled.value?{lossLimit:this.lossLimit.value,singleWin:this.singleWin.value}:{};this.log({type:DV.Gn.ClientStartAutoplay,payload:{selectedRounds:this.selectedRounds.value,totalBet:this.totalBetToRepeat.value,...y}}),this.repeatBets()},this.stop=(y,L=!1)=>{if(!this.isRunning.value)return;if(L&&!SV(this.ag.lifecycle.current.value))return void(this.pendingStopReason=y);const p=this.repeatCount;this.unsubscribe(this.unsubscribers.running),this.isRunning.value=!1,this.roundsLeft.value=0,this.repeatCount=0,this.runningLoss=0,this.lastWin=0,this.pendingStopReason=null,this.log({type:DV.Gn.ClientStoppedAutoplay,payload:{reason:y,roundsPlayed:p}}),this.ag.autoplayUI.setStopReason(y)},this.dispose=()=>{Object.keys(this.unsubscribers).forEach((y=>this.unsubscribe(this.unsubscribers[y]))),this.stop(QV.G_.ManualStop),this.isStartable.value=!1},this.setSelectedRounds=y=>{const L=this.selectedRounds.value,p=Math.max(0,y);L!==p&&(this.selectedRounds.value=p,this.isRunning.value&&(this.roundsLeft.value=p),this.log({type:DV.Gn.ClientUpdateAutoplayRounds,payload:{previousSelectedRounds:L,selectedRounds:p}}))},this.setLossLimit=y=>{const L=this.lossLimit.value,p=Math.max(0,y);0!==p&&L!==p&&(this.unsubscribe(this.unsubscribers.lossLimit),this.lossLimit.value=p,this.log({type:DV.Gn.ClientUpdateAutoplayLossLimit,payload:{previousLossLimit:L,lossLimit:p}}))},this.setSingleWin=y=>{const L=this.singleWin.value,p=Math.max(0,y);L!==p&&(this.singleWin.value=p,this.log({type:DV.Gn.ClientUpdateAutoplaySingleWin,payload:{previousSingleWin:L,singleWin:p}}))},this.placeBets=()=>{this.repeatBets()},this.triggerBetsChanged=()=>{},this.trackLifecycle=y=>{if(SV(y)){if(this.pendingStopReason)return void this.stop(this.pendingStopReason);this.repeatBets()}},this.repeatBets=(y=!1)=>{var L,p,N;if(this.ag.balance.totalBet.value<=0||this.ag.balance.totalBetToRepeat.value<=0)return void console.error("SlotsAutoplay works based on the agreement that the game always has the total bet and the total bet to repeat > 0.",`Total bet: ${this.ag.balance.totalBet.value}.`,`Total bet to repeat: ${this.ag.balance.totalBetToRepeat.value}.`);if(!this.isRunning.value||!SV(this.ag.lifecycle.current.value))return;const t=null!==(L=this.ag.balance.server.value)&&void 0!==L?L:0,j=BV(this.ag.balance.activeId.value);if(!j&&this.totalBetToRepeat.value>t||j&&0===t)return void this.stop(QV.G_.NoBalance);const z=this.ag.popups.current.value,O=!!z&&z.id!==TV.QD.LOW_BALANCE,h=TV.Ns.includes(null==z?void 0:z.id)&&(null==z?void 0:z.isVisible);if(!O||O&&y&&h){if(!(this.selectedRounds.value<=0)){if(this.limitsEnabled.value&&this.repeatCount>0){if(this.runningLoss+this.totalBetToRepeat.value>this.lossLimit.value)return void this.stop(QV.G_.LossReached);if(0!==this.singleWin.value&&this.lastWin>=this.singleWin.value)return void this.stop(QV.G_.WinReached);this.lastWin=0}return this.roundsLeft.value--,this.repeatCount++,this.limitsEnabled.value&&(this.runningLoss+=this.ag.balance.totalBetToRepeat.value),this.options.repeatBets(),this.log({type:DV.Gn.ClientBetChip,payload:{type:"AutoPlay",roundsLeft:this.roundsLeft.value,...null===(N=(p=this.options).selectBetChipLogFields)||void 0===N?void 0:N.call(p)}},this.options.betChipLogEnhancers),this.roundsLeft.value<=0?this.stop(QV.G_.RoundsEnded,!0):void 0}this.stop(QV.G_.RoundsEnded)}else h||this.unsubscribers.common.push(this.ag.popups.current.subscribe(this.continueAutoplayAfterClosingPopup))},this.continueAutoplayAfterClosingPopup=y=>{y||this.repeatBets()},this.updateIsAvailable=({balance:y=0,balanceId:L,totalBetToRepeat:p})=>{BV(L)?this.isAvailable.value=y>0:this.isAvailable.value=y>0&&y>=p},this.updateIsStartable=({isAvailable:y,selectedRounds:L})=>{this.isStartable.value=y&&L>0},this.updateTotalBetToRepeat=({totalBetToRepeat:y})=>{const L=this.totalBetToRepeat.value;this.isRunning.value&&L!==y&&(console.warn(`A single spin bet changed during Autoplay run (${L} -> ${y}).`,"Autoplay forcibly stopped."),this.stop(QV.G_.ManualBetsReplaced)),this.totalBetToRepeat.value=y},this.updateLossLimit=({totalBetToRepeat:y,selectedRounds:L})=>{const p=this.lossLimit.value,N=L*y;p!==N&&(this.lossLimit.value=N,this.log({type:DV.Gn.ClientUpdateAutoplayLossLimit,payload:{previousLossLimit:p,lossLimit:N}}))},this.trackLastWin=y=>{y>0&&this.repeatCount>0&&(this.lastWin=y,this.runningLoss-=y)},this.trackNetworkStatus=y=>{[CV.XW.Reconnecting,CV.XW.Disconnected].includes(y)&&this.stop(QV.G_.Disconnected)},this.trackRealityCheck=y=>{switch(y){case hV.LK.Stopped:this.stop(QV.G_.ManualStop);break;case hV.LK.Inactive:this.repeatBets(!0)}},this.saveState=()=>{var y,L,p;y={isRunning:this.isRunning.value,selectedRounds:this.selectedRounds.value,lastActiveSession:this.ag.settings.bareSessionId()},L=this.ag.tableId,p=FV,oV.J2(IV(p,L),y,VV)},this.restoreState=()=>{let y=UV(this.ag.tableId,this.ag.settings.bareSessionId(),FV);if(y||(y=UV(this.ag.tableId,this.ag.settings.sessionId(),FV),y&&mV.vV(new mV.bE("Deprecated sessionId still in use","Deprecation"))),!y)return;const{selectedRounds:L,isRunning:p}=y;this.selectedRounds.value=L,this.isRunning.value=p},this.unsubscribe=y=>{y.forEach((y=>y())),y.length=0},this.log=(y,L=[])=>{this.ag.log(DV.CM(y,L))},this.restoreState(),this.limitsEnabled.value=y.settings.isUKGC(),this.isRunning.value&&this.stop(QV.G_.PageRefreshed),this.unsubscribers.common.push(gV.vT({balance:y.balance.server,balanceId:y.balance.activeId,totalBetToRepeat:this.totalBetToRepeat}).subscribe(this.updateIsAvailable),gV.vT({isAvailable:this.isAvailable,selectedRounds:this.selectedRounds}).subscribe(this.updateIsStartable),gV.vT({totalBetToRepeat:y.balance.totalBetToRepeat}).subscribe(this.updateTotalBetToRepeat),gV.vT({isRunning:this.isRunning,selectedRounds:this.selectedRounds}).subscribe(this.saveState)),this.limitsEnabled.value&&this.unsubscribers.lossLimit.push(gV.vT({totalBetToRepeat:this.totalBetToRepeat,selectedRounds:this.selectedRounds}).subscribe(this.updateLossLimit))}}function SV(y){return y===iV.P.BetsOpen||y===iV.P.InteractionOpen}function BV(y){const L=kV.Z2(y);return L===_V.D.FreeRounds||L===_V.D.SpinGifts}var RV=p(645264);function YV({gamePhase:y,isTurbo:L,trigger:p}){if(y===bD.Q.TopUpSlot)switch(p){case"Hotkey":return L?RV.r.TopUpSlotShortcutTurboSpin:RV.r.TopUpSlotShortcutSpin;case"AutoPlay":return L?RV.r.TopUpSlotAutoPlayTurboSpin:RV.r.TopUpSlotAutoPlaySpin;default:return L?RV.r.TopUpSlotTurboSpin:RV.r.TopUpSlotSpin}switch(p){case"Hotkey":return L?RV.r.MainSlotShortcutTurboSpin:RV.r.MainSlotShortcutSpin;case"AutoPlay":return L?RV.r.MainSlotAutoPlayTurboSpin:RV.r.MainSlotAutoPlaySpin;default:return L?RV.r.MainSlotTurboSpin:RV.r.MainSlotSpin}}var EV=p(804470);const PV={lastSessionId:"",counter:0};var lV;(function(y){y["FeatureScreenShowCountWithSessionId"]="featureScreenCountWithSessionId"})(lV||(lV={}));const MV={[lV.FeatureScreenShowCountWithSessionId]:{storageKey:"crazypachinko.common."+lV.FeatureScreenShowCountWithSessionId,getDefaultValue:()=>PV}};var fV=p(439895),aV=p(738849),HV=p(332635),XV=p(409860);function JV(y){return[rV(y),GV(y),$V(y),qV(y),AV(y),sV(y)]}function rV(y){return O.mJ((()=>({isMainSlotPaylineWin:y.gamePhase.mainSlotPhase===bw.WI.Result})),(({isMainSlotPaylineWin:L})=>{if(L)switch(y.youWin.winLevel){case"Small":y.sound.triggerEvent(KD.P.WinSlotSmall);break;case"Medium":case"Big":y.sound.triggerEvent(KD.P.WinSlotLarge)}}),{fireImmediately:!0})}function GV(y){return O.mJ((()=>({isTopUpVisible:y.topUpSlot.visible,isPachinkoVisible:y.pachinko.visible,gamePhase:y.gamePhase.phase})),(({isTopUpVisible:L,isPachinkoVisible:p,gamePhase:N},t)=>{N===bD.Q.TopUpSlot&&L&&y.sound.triggerEvent(KD.P.TopUpEnter),N===bD.Q.Pachinko&&p&&y.sound.triggerEvent(KD.P.PachinkoEnter),(null==t?void 0:t.gamePhase)===bD.Q.TopUpSlot&&N!==bD.Q.TopUpSlot&&y.sound.triggerEvent(KD.P.TopUpEnd),(null==t?void 0:t.gamePhase)===bD.Q.Pachinko&&N!==bD.Q.Pachinko&&y.sound.triggerEvent(KD.P.PachinkoExit)}),{fireImmediately:!0})}function $V(y){return O.mJ((()=>({isTurboMode:y.gamePhase.isTurboMode})),(({isTurboMode:L})=>{L?y.sound.triggerEvent(KD.P.GameSpeedFast):y.sound.triggerEvent(KD.P.GameSpeedSlow)}))}function qV(y){return O.mJ((()=>({activated:y.mainSlot.isXXXtremeSpinsActivated})),(({activated:L})=>{L?y.sound.triggerEvent(KD.P.XxxtremeSpinsActivated):y.sound.triggerEvent(KD.P.XxxtremeSpinsDeactivated)}))}function AV(y){return O.mJ((()=>({timeRemainingSec:y.qualificationTimer.timeRemainingSec,gamePhase:y.gamePhase.phase})),(({timeRemainingSec:L,gamePhase:p})=>{p!==bD.Q.TopUpSlot||L>KD.d||y.sound.triggerEvent(KD.P.TopUpCountDown,L)}))}function sV(y){return O.mJ((()=>({landedReelsWithScatters:y.mainSlot.landedReelsWithScatters})),(({landedReelsWithScatters:L},p)=>{const N=XV.A(L,...p.landedReelsWithScatters),t=L.length,j=1===t?KD.P.FirstScatter:2===t?KD.P.SecondScatter:KD.P.ThirdScatter;N.forEach((L=>{const p=L+1;y.sound.triggerEvent(j,p)}))}))}var cV=p(764522);class KV{constructor(y){this.props=y,O.Gn(this,{isMusicPlaybackAllowed:O.EW})}get isMusicPlaybackAllowed(){const{gameLoaded:y}=this.props.rootStore.abstractGame;return y}triggerEvent(y,L){cV.triggerEvent(y,L)}dispose(){cV.stopAll()}}function bV(y,L){void 0===L&&(L="Illegal state"),y||function(y){throw new Error("[mobx-utils] "+y)}(L)}var nV=function(y){return y&&y!==Object.prototype&&Object.getOwnPropertyNames(y).concat(nV(Object.getPrototypeOf(y))||[])},vV=function(y){return function(y){var L=nV(y);return L.filter((function(y,p){return L.indexOf(y)===p}))}(y).filter((function(y){return"constructor"!==y&&!~y.indexOf("__")}))},eV="pending",ZV="fulfilled",yF="rejected";function LF(y){switch(this.state){case eV:return y.pending&&y.pending(this.value);case yF:return y.rejected&&y.rejected(this.value);case ZV:return y.fulfilled?y.fulfilled(this.value):this.value}}function pF(y,L){if(bV(arguments.length<=2,"fromPromise expects up to two arguments"),bV("function"==typeof y||"object"==typeof y&&y&&"function"==typeof y.then,"Please pass a promise or function to fromPromise"),!0===y.isPromiseBasedObservable)return y;"function"==typeof y&&(y=new Promise(y));var p=y;y.then(O.XI("observableFromPromise-resolve",(function(y){p.value=y,p.state=ZV})),O.XI("observableFromPromise-reject",(function(y){p.value=y,p.state=yF}))),p.isPromiseBasedObservable=!0,p.case=LF;var N=L&&L.state===ZV?L.value:void 0;return O.kt(p,{value:N,state:eV},{},{deep:!1}),p}(function(y){y.reject=O.XI("fromPromise.reject",(function(L){var p=y(Promise.reject(L));return p.state=yF,p.value=L,p})),y.resolve=O.XI("fromPromise.resolve",(function(L){void 0===L&&(L=void 0);var p=y(Promise.resolve(L));return p.state=ZV,p.value=L,p}))})(pF||(pF={}));var NF=!1||function(y,L,p,N){var t,j=arguments.length,z=j<3?L:null===N?N=Object.getOwnPropertyDescriptor(L,p):N;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)z=Reflect.decorate(y,L,p,N);else for(var O=y.length-1;O>=0;O--)(t=y[O])&&(z=(j<3?t(z):j>3?t(L,p,z):t(L,p))||z);return j>3&&z&&Object.defineProperty(L,p,z),z};(function(){function y(y,L){var p=this;Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subscription",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),O.Gn(this),O.h5((function(){p.current=L,p.subscription=y.subscribe(p)}))}Object.defineProperty(y.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.subscription&&this.subscription.unsubscribe()}}),Object.defineProperty(y.prototype,"next",{enumerable:!1,configurable:!0,writable:!0,value:function(y){this.current=y}}),Object.defineProperty(y.prototype,"complete",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.dispose()}}),Object.defineProperty(y.prototype,"error",{enumerable:!1,configurable:!0,writable:!0,value:function(y){this.current=y,this.dispose()}}),NF([O.sH.ref],y.prototype,"current",void 0),NF([O.XI.bound],y.prototype,"next",null),NF([O.XI.bound],y.prototype,"complete",null),NF([O.XI.bound],y.prototype,"error",null)})();var tF=!1||function(){return tF=Object.assign||function(y){for(var L,p=1,N=arguments.length;p<N;p++)for(var t in L=arguments[p])Object.prototype.hasOwnProperty.call(L,t)&&(y[t]=L[t]);return y},tF.apply(this,arguments)},jF=!1||function(y,L,p,N){var t,j=arguments.length,z=j<3?L:null===N?N=Object.getOwnPropertyDescriptor(L,p):N;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)z=Reflect.decorate(y,L,p,N);else for(var O=y.length-1;O>=0;O--)(t=y[O])&&(z=(j<3?t(z):j>3?t(L,p,z):t(L,p))||z);return j>3&&z&&Object.defineProperty(L,p,z),z},zF=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function y(y){var L=this;Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:y}),Object.defineProperty(this,"localValues",{enumerable:!0,configurable:!0,writable:!0,value:O.sH.map({})}),Object.defineProperty(this,"localComputedValues",{enumerable:!0,configurable:!0,writable:!0,value:O.sH.map({})}),Object.defineProperty(this,"isPropertyDirty",{enumerable:!0,configurable:!0,writable:!0,value:function(y){return L.localValues.has(y)}}),O.Gn(this),bV(O.OB(y),"createViewModel expects an observable object");var p=vV(this);vV(y).forEach((function(N){var t;if(!p.includes(N)&&N!==O.BQ&&"__mobxDidRunLazyInitializers"!==N){if(bV(-1===zF.indexOf(N),"The propertyname "+N+" is reserved and cannot be used with viewModels"),O.H8(y,N)){var j=O.Mr(y,N),z=j.derivation.bind(L),h=null===(t=j.setter_)||void 0===t?void 0:t.bind(L);L.localComputedValues.set(N,O.EW(z,{set:h}))}var m=Object.getOwnPropertyDescriptor(y,N),k=m?{enumerable:m.enumerable}:{};Object.defineProperty(L,N,tF(tF({},k),{configurable:!0,get:function(){return O.H8(y,N)?L.localComputedValues.get(N).get():L.isPropertyDirty(N)?L.localValues.get(N):L.model[N]},set:O.XI((function(p){O.H8(y,N)?L.localComputedValues.get(N).set(p):p!==L.model[N]?L.localValues.set(N,p):L.localValues.delete(N)}))}))}}))}Object.defineProperty(y.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"changedValues",{get:function(){return new Map(this.localValues)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"submit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var y=this;O.HP(this.localValues).forEach((function(L){var p=y.localValues.get(L),N=y.model[L];O.Fq(N)?N.replace(p):O.uz(N)?(N.clear(),N.merge(p)):O.YQ(p)||(y.model[L]=p)})),this.localValues.clear()}}),Object.defineProperty(y.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.localValues.clear()}}),Object.defineProperty(y.prototype,"resetProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(y){this.localValues.delete(y)}}),jF([O.EW],y.prototype,"isDirty",null),jF([O.EW],y.prototype,"changedValues",null),jF([O.XI.bound],y.prototype,"submit",null),jF([O.XI.bound],y.prototype,"reset",null),jF([O.XI.bound],y.prototype,"resetProperty",null)})();var OF,hF=!1||(OF=function(y,L){return OF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,L){y.__proto__=L}||function(y,L){for(var p in L)Object.prototype.hasOwnProperty.call(L,p)&&(y[p]=L[p])},OF(y,L)},function(y,L){function p(){this.constructor=y}OF(y,L),y.prototype=null===L?Object.create(L):(p.prototype=L.prototype,new p)}),mF=(function(y){function L(L,p,N){var t=void 0===N?{}:N,j=t.name,z=void 0===j?"ogm"+(1e3*Math.random()|0):j,h=t.keyToName,m=void 0===h?function(y){return""+y}:h,k=y.call(this)||this;Object.defineProperty(k,"_base",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(k,"_ogmInfoKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(k,"_groupBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(k,"_keyToName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(k,"_disposeBaseObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),k._keyToName=m,k._groupBy=p,k._ogmInfoKey=Symbol("ogmInfo"+z),k._base=L;for(var _=0;_<L.length;_++)k._addItem(L[_]);return k._disposeBaseObserver=O.lB(k._base,(function(y){if("splice"===y.type)O.Rn((function(){for(var L=0,p=y.removed;L<p.length;L++){var N=p[L];k._removeItem(N)}for(var t=0,j=y.added;t<j.length;t++){var z=j[t];k._addItem(z)}}));else{if("update"!==y.type)throw new Error("illegal state");O.Rn((function(){k._removeItem(y.oldValue),k._addItem(y.newValue)}))}})),k}hF(L,y),Object.defineProperty(L.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){throw new Error("not supported")}}),Object.defineProperty(L.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(y){throw new Error("not supported")}}),Object.defineProperty(L.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(y,L){throw new Error("not supported")}}),Object.defineProperty(L.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposeBaseObserver();for(var y=0;y<this._base.length;y++){var L=this._base[y];L[this._ogmInfoKey].reaction(),delete L[this._ogmInfoKey]}}}),Object.defineProperty(L.prototype,"_getGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(L){var p=y.prototype.get.call(this,L);return void 0===p&&(p=O.sH([],{name:"GroupArray["+this._keyToName(L)+"]",deep:!1}),y.prototype.set.call(this,L,p)),p}}),Object.defineProperty(L.prototype,"_removeFromGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(L,p){var N=y.prototype.get.call(this,L);1===N.length?y.prototype.delete.call(this,L):(p===N.length-1||(N[p]=N[N.length-1],N[p][this._ogmInfoKey].groupArrIndex=p),N.length--)}}),Object.defineProperty(L.prototype,"_addItem",{enumerable:!1,configurable:!0,writable:!0,value:function(y){var L=this,p=this._groupBy(y),N=this._getGroupArr(p),t={groupByValue:p,groupArrIndex:N.length,reaction:O.mJ((function(){return L._groupBy(y)}),(function(p,N){var t=y[L._ogmInfoKey];L._removeFromGroupArr(t.groupByValue,t.groupArrIndex);var j=L._getGroupArr(p),z=j.length;j.push(y),t.groupByValue=p,t.groupArrIndex=z}))};Object.defineProperty(y,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:t}),N.push(y)}}),Object.defineProperty(L.prototype,"_removeItem",{enumerable:!1,configurable:!0,writable:!0,value:function(y){var L=y[this._ogmInfoKey];this._removeFromGroupArr(L.groupByValue,L.groupArrIndex),L.reaction(),delete y[this._ogmInfoKey]}})}(O.Es),function(){function y(y,L){Object.defineProperty(this,"base",{enumerable:!0,configurable:!0,writable:!0,value:y}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:L}),Object.defineProperty(this,"root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closestIdx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});for(var p=this.closest=this.root=y,N=0;N<this.args.length-1&&(p=p.get(L[N]));N++)this.closest=p;this.closestIdx=N}return Object.defineProperty(y.prototype,"exists",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertNotDisposed();var y=this.args.length;return this.closestIdx>=y-1&&this.closest.has(this.args[y-1])}}),Object.defineProperty(y.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])}}),Object.defineProperty(y.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(y){this.assertNotDisposed();for(var L=this.args.length,p=this.closest,N=this.closestIdx;N<L-1;N++){var t=new Map;p.set(this.args[N],t),p=t}this.closestIdx=L-1,this.closest=p,p.set(this.args[L-1],y)}}),Object.defineProperty(y.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var y=this.args.length;this.closest.delete(this.args[y-1]);for(var L=this.root,p=[L],N=0;N<y-1;N++)L=L.get(this.args[N]),p.push(L);for(N=p.length-1;N>0;N--)0===p[N].size&&p[N-1].delete(this.args[N-1]);this.isDisposed=!0}}),Object.defineProperty(y.prototype,"assertNotDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.isDisposed)throw new Error("Concurrent modification exception")}}),y}()),kF=function(){function y(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"argsLength",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(y.prototype,"entry",{enumerable:!1,configurable:!0,writable:!0,value:function(y){if(-1===this.argsLength)this.argsLength=y.length;else if(this.argsLength!==y.length)throw new Error("DeepMap should be used with functions with a consistent length, expected: "+this.argsLength+", got: "+y.length);return this.last&&(this.last.isDisposed=!0),this.last=new mF(this.store,y)}}),y}(),_F=!1||function(){return _F=Object.assign||function(y){for(var L,p=1,N=arguments.length;p<N;p++)for(var t in L=arguments[p])Object.prototype.hasOwnProperty.call(L,t)&&(y[t]=L[t]);return y},_F.apply(this,arguments)},WF=!1||function(){for(var y=0,L=0,p=arguments.length;L<p;L++)y+=arguments[L].length;var N=Array(y),t=0;for(L=0;L<p;L++)for(var j=arguments[L],z=0,O=j.length;z<O;z++,t++)N[t]=j[z];return N},gF=p(876700),CF=p(294851),QF=p(836871),TF=p(947548);class iF{constructor(y){this.props=y,this.balance=0,this.gameLoaded=!1,this.isPageVisible=!1,this.playMode="realMoney",this.orientation=T.t.Landscape,this.gameRoundId="",this.playerGameId="",this.currencySymbol="",this.currencyCode="",this.currentStream=0,this.currentPopup=void 0,this.currentLifecycle=iV.P.Init,this.connectionStatus=CV.XW.Idle,this.totalBetAmount=0,this.gameDimensions={containerHeight:0,containerWidth:0,left:0,top:0,height:0,width:0,boxHeight:0,boxWidth:0},this.preferencesLoaded=!1,this.getPreferencesValue=function(y,L){if(void 0===L&&(L=!1),O.ve(y))throw new Error("computedFn shouldn't be used on actions");var p=!1,N=0,t="boolean"==typeof L?{keepAlive:L}:L,j=new kF;return function(){for(var L=this,z=[],h=0;h<arguments.length;h++)z[h]=arguments[h];var m,k=j.entry(z);if(k.exists())return k.get().get();if(!t.keepAlive&&!O.Tx())return p||(console.warn("invoking a computedFn from outside an reactive context won't be memoized, unless keepAlive is set"),p=!0),y.apply(this,z);var _=O.EW((function(){return m=y.apply(L,z)}),_F(_F({},t),{name:"computedFn("+(t.name||y.name)+"#"+ ++N+")"}));return k.set(_),t.keepAlive||O.q$(_,(function(){j.entry(z).delete(),t.onCleanup&&t.onCleanup.apply(t,WF([m],z)),m=void 0})),_.get()}}((y=>this.preferences[y])),this.isDisposed=!1,this.disposers=[],this.gameDimensionsResizeRequestAnimationFrame=-1,this.reservedBet=0,this.preferences={},O.Gn(this,{gameDimensions:O.sH,isPageVisible:O.sH,orientation:O.sH,gameRoundId:O.sH,currencySymbol:O.sH,currencyCode:O.sH,connectionStatus:O.sH,gameLoaded:O.sH,playMode:O.sH,setPlayerGameId:O.XI,playerGameId:O.sH,balance:O.sH,currentStream:O.sH,currentPopup:O.sH,serverBalance:O.EW,totalBetAmount:O.sH,preferences:O.sH,preferencesLoaded:O.sH,setPreferences:O.XI.bound,setGameRoundId:O.XI})}get platform(){return this.api.platform}get isLowBalance(){return gF.ZX(this.playMode)?0===this.serverBalance:this.api.balance.isLow.value}get serverBalance(){return this.balance+this.reservedBet}get isServerBalanceFetched(){return void 0!==this.api.balance.server.value}setDefaultValues(){this.api.chipstack.hide(),this.api.layout.immersive.footer.collapse()}skipPastEvents(y){this.api.video.sync.skipPastEvents(null!=y?y:0)}setGameRoundId(y){this.gameRoundId=y}setGameTime(y){void 0!==y&&this.api.setGameTime(y)}setDealer(y){this.api.setDealer(y)}setGameResultAmount(y){this.api.gameResult.setAmount(y)}get videoInfo(){return this.api.video}get winnersList(){return this.api.winnersList}get onboardingBubbles(){return this.api.onboardingBubbles}get stopReason(){return this.api.autoplayUI.stopReason}get isSettingsWindowOpen(){return this.api.autoplayUI.isSettingsWindowOpen}get isSuggestionVisible(){return this.api.autoplayUI.isSuggestionVisible}get mobileDrawer(){return this.api.layout.drawer.mobile}get isBalancePaused(){return this.api.balance.isPaused.value}get sessionId(){return this.api.settings.sessionId()}clearStopReason(){this.api.autoplayUI.clearStopReason()}clearNotification(){this.api.autoplayUI.clearNotification()}hideAutoPlayIntro(){this.api.autoplayUI.hideIntro()}increaseRepeatBetCount(){this.api.autoplayUI.increaseRepeatBetCount()}closeSettings(){this.api.autoplayUI.closeSettings()}setServerBalance(y){this.api.balance.setServerBalance(y)}setTotalBet(y){this.api.balance.setTotalBet(y)}pauseBalanceUpdate(){this.api.balance.pauseBalanceUpdate()}resumeBalanceUpdate(){this.api.balance.resumeBalanceUpdate()}reserveBet(y){this.api.balance.reserveBet(y)}updateBalanceFromPayload(y){this.reserveBet(0),this.api.balance.updateFromPayload(y.payload,y.id||"")}setTotalBetLabelTranslationKey(y){this.api.totalBetLabel.setLabelTranslationKey(y)}setTotalBetToRepeat(y){this.api.balance.setTotalBetToRepeat(y)}setLowBalance(){this.api.balance.setLow()}checkIsBalanceLowWithPopup(){this.api.balance.checkIsBalanceLowWithPopup(!0)}closeLowBalancePopup(){this.api.balance.closeLowBalancePopup()}setEnoughBalance(){this.api.balance.setEnough()}setLifecycleOpenBets(){this.api.lifecycle.openBets()}setLifecycleCloseBets(){this.api.lifecycle.closeBets()}setLifecycleOpenInteraction(){this.api.lifecycle.openInteraction()}setLifecycleCloseInteraction(){this.api.lifecycle.closeInteraction()}setLifecycleResolved(){this.api.lifecycle.resolveGame({resetTotalBet:!1})}selectChip(y){this.api.betAmounts.selectBetAmount(y)}openPopup(y){this.api.popups.open(y)}closePopup(y){this.api.popups.close(y)}setScale(y){this.api.video.mobile.setScale(y)}setTranslate(y){this.api.video.mobile.setTranslate(y)}setPlayerGameId(y){this.playerGameId=y}setCurrentStream(y){this.currentStream=y}openMobileDrawer(y){this.api.layout.drawer.mobile.open(y)}closeMobileDrawer(y){this.api.layout.drawer.mobile.close(y)}addTooltip(y){this.api.tooltips.add(y)}hideTooltipsByType(y){this.api.tooltips.hideByType(y)}showGenericToast(y){this.api.toasts.show({type:CF.C.GenericToast,props:y})}closeCurrentToast(){this.api.toasts.dismiss()}showGameCancelledToast(){this.api.toasts.show(QF.Vy())}handleError(y){this.api.handleError(y)}openKickoutPopup(y){this.openPopup(TF.rN({kickoutReason:y,callback:()=>this.api.navigation.goToLobby()}))}log(y){this.api.log(y)}updatePreferenceValue(y,L){this.props.agApi.preferences.setPreferences({key:y,value:L})}getPreferenceValue(y){return this.preferences[y]}bindToAbstractGame(y){this.disposers.push(y.isPageVisible.subscribe(O.XI((y=>{this.isPageVisible=y}))),y.playMode.subscribe(O.XI((y=>{this.playMode=y}))),y.orientation.subscribe(O.XI((y=>{this.orientation=y}))),y.gameRoundId.subscribe(O.XI((y=>{this.gameRoundId=y}))),y.currencySymbol.subscribe(O.XI((y=>{this.currencySymbol=y}))),y.currency.code.subscribe(O.XI((y=>{this.currencyCode=y}))),y.lifecycle.current.subscribe(O.XI((y=>{this.currentLifecycle=y}))),y.network.status.subscribe(O.XI((y=>{this.connectionStatus=y}))),y.balance.available.subscribe(O.XI((y=>{this.balance=y}))),y.balance.reserved.subscribe(O.XI((y=>{this.reservedBet=y}))),y.balance.totalBet.subscribe(O.XI((y=>{this.totalBetAmount=y}))),y.gameDimensions.subscribe(O.XI((y=>{window.cancelAnimationFrame(this.gameDimensionsResizeRequestAnimationFrame),0===this.gameDimensions.width&&0===this.gameDimensions.height?this.gameDimensions=y:this.gameDimensionsResizeRequestAnimationFrame=window.requestAnimationFrame(O.XI((()=>{this.gameDimensions=y})))}))),y.video.currentStreamId.subscribe(O.XI((y=>{this.currentStream=y}))),y.preferences.values.subscribe(O.XI((y=>{this.setPreferences(y)}))),y.popups.current.subscribe(O.XI((y=>{this.currentPopup=y}))));const L=O.XI((()=>{this.isDisposed||(this.gameLoaded=!0)})),p=O.XI((()=>{this.isDisposed||(this.preferencesLoaded=!0)}));y.gameLoaded.then(L).catch(L),y.preferences.initialization.then(p).catch(p)}setVideoBlur(y){this.api.video.setBlur(y)}requestStreamById(y){this.api.video.requestStreamById(y)}dispose(){for(const y of this.disposers)y();O.h5((()=>{this.isDisposed=!0,this.gameLoaded=!1,this.preferencesLoaded=!1,window.cancelAnimationFrame(this.gameDimensionsResizeRequestAnimationFrame)}))}get api(){return this.props.agApi}setPreferences(y){this.preferences=y}}const DF=1.24,wF=1.52,xF=1.45;function dF(y){return O.mJ((()=>({gameDimensions:y.abstractGame.gameDimensions,slotRect:y.slotRect.slotContainerRect,gamePhase:y.gamePhase.phase})),(({gameDimensions:L,gamePhase:p,slotRect:N})=>{"mobileLandscape"!==y.device.layoutMode&&(function(y,L,p,N){const t=function(y,L,p,N){const{xS:t,yS:j,hS:z,wS:O,visibleHeightS:h}=L;return{desktop:()=>{var y;const L=null!==(y=p.reverseScale)&&void 0!==y?y:1,N=.444*(t-O),m=p.width*wF,k=p.height*wF;return[N,-2.8*(h-z+j),m/L,k/L]},mobilePortrait:()=>{if(N){const y=-p.width/2/4,L=p.width*DF,N=p.height*DF;return[y,-j,L,N]}const y=O*xF,L=z*xF;return[.22*-O,p.height-(j+L)+.265*y,y,L]},tablet:()=>{const y=O*xF,L=z*xF;return[t-.22*O,p.height-(j+L)+.2*y,y,L]}}[y]()}(y,L,p,N.isMainSlotShrinkFit);N.setScatterDimensions(t[0],t[1],t[2],t[3])}(y.device.layoutMode,N,L,y.slotLayout),p===bD.Q.MainSlot?function(y,L,p,N){const t=function(y,L,p,N){const{x:t,y:j,h:z,w:O,visibleHeight:h}=L;return{desktop:()=>{var y;const L=null!==(y=p.reverseScale)&&void 0!==y?y:1,N=.444*(t-O),m=p.width*wF,k=p.height*wF;return[N,-2.8*(h-z+j),m/L,k/L]},mobilePortrait:()=>{if(N){const y=-p.width/2/4,L=p.width*DF,N=p.height*DF;return[y,-j,L,N]}const y=O*xF,L=z*xF;return[.22*-O,p.height-(j+L)+.265*y,y,L]},tablet:()=>{const y=O*xF,L=z*xF;return[t-.22*O,p.height-(j+L)+.2*y,y,L]}}[y]()}(y,L,p,N.isMainSlotShrinkFit);N.setMainSlotDimensions(t[0],t[1],t[2],t[3])}(y.device.layoutMode,N,L,y.slotLayout):function(y,L,p,N){const t=function(y,L,p,N){const{x:t,y:j,h:z,w:O}=L;return{desktop:()=>{var y;const L=null!==(y=p.reverseScale)&&void 0!==y?y:1;return[.14*t,-j,1.3*p.width/L,1.3*p.height/L]},mobilePortrait:()=>{if(N){const y=0,L=50,N=p.width,t=p.height;return[y,.2164*p.height-L,N,t]}const y=1.325*O,L=1.325*z;return[.165*-O,p.height-(j+L)+.36*y,y,L]},tablet:()=>{const y=1.2,L=O*y,N=z*y;return[t-.095*O,p.height-(j+N)+.25*L,L,N]}}[y]()}(y,L,p,N.isTopUpSlotShrinkFit);N.setTopUpSlotDimensions(t[0],t[1],t[2],t[3])}(y.device.layoutMode,N,L,y.slotLayout))}))}function oF(y){return O.mJ((()=>({gamePhase:y.gamePhase.phase,connectionStatus:y.abstractGame.connectionStatus,mainSlotPhase:y.gamePhase.mainSlotPhase,topUpSlotPhase:y.gamePhase.topUpSlotPhase})),(({gamePhase:L,connectionStatus:p,mainSlotPhase:N,topUpSlotPhase:t})=>{p!==CV.XW.Disconnected&&p!==CV.XW.Reconnecting||(L===bD.Q.MainSlot&&N===bw.WI.Spinning&&y.mainSlot.processError(),L===bD.Q.TopUpSlot&&t===bw.WI.Spinning&&y.topUpSlot.processError())}),{fireImmediately:!0})}var UF=p(946574);class IF{constructor(y){this.props=y,this.isRunning=!1,this.stopReasonValue=null,this.isSettingsWindowOpen=!1,this.isSuggestionBubbleVisible=!1,this.roundsLeft=0,this.autoplayAPIDisposeBag=new HV.C,this.pendingSpin=!1,O.Gn(this,{isRunning:O.sH,isSettingsWindowOpen:O.sH,isSuggestionBubbleVisible:O.sH,roundsLeft:O.sH,bindAutoPlayAPI:O.XI,repeat:O.XI,stop:O.XI,incrementRepeatCount:O.XI,closeSettings:O.XI,dispose:O.XI})}bindAutoPlayAPI(y,L){this.autoplayAPIDisposeBag.dispose(),this.autoplayAPIDisposeBag.addDisposable((()=>L())),this.autoplayAPI=y,this.bindToAutoplayAPI(y)}repeat(){const{gamePhase:y,mainSlot:L,topUpSlot:p}=this.props.rootStore;this.pendingSpin=!0,window.setTimeout(O.XI((()=>{var N,t;this.pendingSpin=!1,y.phase===bD.Q.MainSlot?L.spin("AutoPlay"):y.phase===bD.Q.TopUpSlot&&(p.isTopUpClosed||!p.isBetValid?this.stop():p.spin("AutoPlay")),this.isRunning=null!==(t=null===(N=this.autoplayAPI)||void 0===N?void 0:N.isRunning.value)&&void 0!==t&&t})),0)}stop(y){var L;this.isRunning&&(null===(L=this.autoplayAPI)||void 0===L||L.stop(y||QV.G_.ManualStop))}incrementRepeatCount(){this.props.rootStore.abstractGame.increaseRepeatBetCount()}closeSettings(){this.isSettingsWindowOpen&&this.props.rootStore.abstractGame.closeSettings()}dispose(){this.autoplayAPIDisposeBag.dispose(),this.autoplayAPI=void 0}closeSettingsAndNotifications(){const{abstractGame:y}=this.props.rootStore;this.closeSettings(),y.clearStopReason(),y.clearNotification()}bindToAutoplayAPI(y){var L;this.autoplayAPIDisposeBag.addDisposables([y.isRunning.subscribe(O.XI((y=>{this.pendingSpin||(this.isRunning=y)}))),null===(L=y.roundsLeft)||void 0===L?void 0:L.subscribe(O.XI((y=>{this.roundsLeft=y}))),this.props.rootStore.abstractGame.isSettingsWindowOpen.subscribe(O.XI((y=>this.handleWindowOpen(y)))),this.props.rootStore.abstractGame.stopReason.subscribe(O.XI((y=>this.handleStopReason(y)))),this.props.rootStore.abstractGame.isSuggestionVisible.subscribe(O.XI((y=>{this.isSuggestionBubbleVisible=y})))])}handleWindowOpen(y){const L=this.isSettingsWindowOpen&&!y;this.isSettingsWindowOpen=y;const{rootStore:p}=this.props,{abstractGame:N,gamePhase:t}=p;L&&N.clearStopReason(),this.stopReasonValue!==QV.G_.RoundsEnded||!UF.f(p)&&t.mainSlotPhase!==bw.WI.Transition||this.closeSettingsAndNotifications()}handleStopReason(y){this.stopReasonValue=y}}function VF(y){return y.gamePhase.phase!==bD.Q.Pachinko&&(gF.ZX(y.abstractGame.playMode)?0===y.abstractGame.serverBalance:!!y.abstractGame.isServerBalanceFetched&&y.abstractGame.serverBalance<y.betStakeSelector.activeBetStake.minBetStake)}function FF(y){return y.gamePhase.phase===bD.Q.MainSlot?y.mainSlotBetStake.spinBet:y.gamePhase.phase===bD.Q.TopUpSlot?y.topUpSlotBetStake.spinBet:0}function uF(y){return O.mJ((()=>FF(y)),(()=>{y.autoPlay.isRunning&&!VF(y)&&y.autoPlay.stop(QV.G_.ManualBetsReplaced)}))}function SF(y){return O.mJ((()=>({phase:y.gamePhase.phase,qualified:y.gamePhase.qualified})),(({phase:L,qualified:p},N)=>{L!==(null==N?void 0:N.phase)&&y.autoPlay.closeSettings(),p&&!N.qualified&&y.autoPlay.closeSettingsAndNotifications()}))}var BF=p(360595);function RF(y){return O.mJ((()=>({animationsDisabled:BF.C(y)})),(({animationsDisabled:L})=>{Mw.o(L),y.settings.enableAnimations(!L)}))}function YF(y,L){const{abstractGame:p,settings:N}=L;return p.balance<y||N.tableBetMaxLimit<y||N.spinBetMaxLimit<y}class EF{constructor(y){this.props=y,this.baseBetStakes=[],this.spinBet=0,this.baseBet=0,this.setDefaultBetStakes(),O.Gn(this,{baseBet:O.sH,spinBet:O.sH,betStakes:O.EW,setSpinBet:O.XI,minBetStake:O.EW})}setSpinBet(y){var L,p;if(this.spinBet=y,this.props.rootStore.abstractGame.selectChip(y),"Normal"===this.props.rootStore.mainSlot.spinMode)this.baseBet=y;else{const N=this.betStakes;this.baseBet=null!==(p=null===(L=N.find((L=>L.value===y)))||void 0===L?void 0:L.denomination)&&void 0!==p?p:0}}get betStakes(){return"XXXtreme"===this.props.rootStore.mainSlot.spinMode?this.xxxtremeBetStakes:"FeatureBuy"===this.props.rootStore.mainSlot.spinMode?this.featureBuyBetStakes:this.baseBetStakes.map((y=>({denomination:y,value:y,enabled:!YF(y,this.props.rootStore)})))}get xxxtremeBetStakes(){const{settings:y}=this.props.rootStore;return this.baseBetStakes.map(((L,p)=>{const N=L*bw.bG;return{denomination:L,value:kw.rq(N),enabled:!YF(N,this.props.rootStore),hidden:0!==p&&N>y.tableBetMaxLimit}}))}get featureBuyBetStakes(){return this.baseBetStakes.map((y=>({denomination:y,value:kw.rq(y*bw.ue),enabled:!YF(y*bw.ue,this.props.rootStore)})))}get minBetStake(){return this.baseBetStakes.length>0?this.baseBetStakes[0]:0}setDefaultBetStakes(){const y=this.props.rootStore.settings.availableBetStakes;y.length>0&&(this.baseBetStakes=y,this.setSpinBet(y[this.props.rootStore.settings.defaultBetStake-1]))}}function PF(y){return O.mJ((()=>y.topUpSlotBetStake.betStakeMultiplier),(L=>y.topUpSlot.setSymbolsMap(L)),{fireImmediately:!0})}var lF,MF=p(77952),fF=p(335908),aF=p(16260);function HF(y,L){const p=function(y){const L=y.betStakeSelector.activeBetStake.betStakes,p=y.betStakeSelector.activeBetStake.spinBet;let N=L.findIndex((y=>y.value===p));for(;N>0;){const y=L[N];if(y.enabled)return y;N--}return L[0]}(L);p&&L.betStakeSelector.activeBetStake.setSpinBet(p.value),L.restore.isRestoring||(L.abstractGame.closeCurrentToast(),!p||UF.f(L)?L.autoPlay.closeSettingsAndNotifications():L.abstractGame.showGenericToast({title:fF.T(aF.X.BetChangedUppercase),description:fF.T(y)}))}function XF(y){return O.mJ((()=>({spinBet:y.betStakeSelector.activeBetStake.spinBet,balance:y.abstractGame.balance,isLowBalance:VF(y),topUpMaxBet:y.topUpSlotBetStake.topUpMaxBet,totalBetAmount:y.abstractGame.totalBetAmount})),(({spinBet:L,balance:p,isLowBalance:N,topUpMaxBet:t})=>{var j;const{abstractGame:z,betStakeSelector:O,gamePhase:h}=y,{isAnySlotSpinInProgress:m,isTransitionInProgress:k}=h,{activeBetStake:_}=O;m||k||gF.ZX(z.playMode)||h.phase===bD.Q.Pachinko||(N?_.setSpinBet(_.betStakes[0].value):(L!==(null===(j=_.betStakes[0])||void 0===j?void 0:j.value)||y.autoPlay.isRunning)&&(L>p&&z.isServerBalanceFetched&&HF(aF.X.ToastBetAmountDecreasedLowBalance,y),h.phase===bD.Q.TopUpSlot&&L>t&&HF(aF.X.ToastBetAmountDecreasedMaxPayout,y),h.phase===bD.Q.TopUpSlot&&MF.N(y,L)&&HF(aF.X.ToastBetAmountDecreasedTableLimit,y)))}),{fireImmediately:!0})}function JF(y){return O.mJ((()=>({isLowBalance:VF(y),playMode:y.abstractGame.playMode})),(({isLowBalance:L,playMode:p})=>{L?("playForFun"===p&&y.gamePhase.qualified?(y.abstractGame.setEnoughBalance(),y.abstractGame.closeLowBalancePopup()):y.abstractGame.setLowBalance(),y.abstractGame.checkIsBalanceLowWithPopup()):(y.abstractGame.setEnoughBalance(),y.abstractGame.closeLowBalancePopup())}),{fireImmediately:!0})}function rF(y){return O.mJ((()=>({baseBet:y.mainSlotBetStake.baseBet,spinMode:y.mainSlot.spinMode,isRestoring:y.restore.isRestoring})),(({baseBet:L,spinMode:p,isRestoring:N})=>{N||"FeatureBuy"===p||y.denominations.switchDenomination(L,p)}),{fireImmediately:!0})}function GF(y){return O.mJ((()=>FF(y)),(L=>{L>0&&y.abstractGame.setTotalBetToRepeat(L)}))}function $F(y){return O.mJ((()=>({spinBet:FF(y),gamePhase:y.gamePhase.phase,qualificationBet:y.topUpSlotBetStake.qualificationBet})),(({spinBet:L,gamePhase:p,qualificationBet:N})=>{switch(p){case bD.Q.MainSlot:y.abstractGame.setTotalBet(L);break;case bD.Q.Pachinko:y.abstractGame.setTotalBet(N)}}),{fireImmediately:!0})}function qF(y,L,p){return YF(y,p)||y>L||MF.N(p,y)}function AF(y,L){return kw.GB(y*L,2)}class sF{constructor(y){this.props=y,this.qualificationBet=0,this.spinBet=0,this.betStakeMultiplier=1,this.baseBetStakes=[],this.topUpMaxBet=0,O.Gn(this,{baseBetStakes:O.sH,betStakes:O.EW,spinBet:O.sH,setSpinBet:O.XI,betStakeMultiplier:O.sH,qualificationBet:O.sH,setBetStakeMultiplier:O.XI,setQualificationBet:O.XI,minBetStake:O.EW,topUpMaxBet:O.sH,isMaxPayoutReached:O.EW,isNextBetExceedingMaxPayout:O.EW,nextBetStake:O.EW})}setSpinBet(y){var L,p;this.spinBet=y,this.props.rootStore.abstractGame.selectChip(y),this.betStakeMultiplier=null!==(p=null===(L=this.baseBetStakes.find((L=>L.value===y)))||void 0===L?void 0:L.multiplier)&&void 0!==p?p:1}setBetStakeMultiplier(y){this.betStakeMultiplier=y}setQualificationBet(y){var L,p;this.qualificationBet=y,this.baseBetStakes=function({baseBet:y,maxMultiplier:L,topUpMaxBetLimit:p}){const N=[];if(0===y)return N;for(let j=0,z=1;z<=L;j++,z=((t=j)%9+1)*10**Math.floor(t/9)){const L=AF(y,z);if(p&&L>p)break;N.push({value:L,multiplier:z})}var t;return N}({baseBet:this.qualificationBet,maxMultiplier:this.props.rootStore.settings.maxTopUpBetMultiplier,topUpMaxBetLimit:this.props.rootStore.settings.topUpMaximumBetLimit}),this.spinBet=null!==(p=null===(L=this.baseBetStakes[0])||void 0===L?void 0:L.value)&&void 0!==p?p:0}setTopUpMaxBet(y){this.topUpMaxBet=y}get betStakes(){return this.baseBetStakes.map(((y,L)=>({value:y.value,enabled:!qF(y.value,this.topUpMaxBet,this.props.rootStore),hidden:0!==L&&MF.N(this.props.rootStore,y.value)})))}get minBetStake(){return this.betStakes.length>0?this.betStakes[0].value:0}get isMaxPayoutReached(){return this.spinBet>this.topUpMaxBet}get isNextBetExceedingMaxPayout(){return void 0!==this.nextBetStake&&this.nextBetStake.value>this.topUpMaxBet}get nextBetStake(){const y=this.betStakes.findIndex((y=>this.spinBet===y.value));if(y!==this.betStakes.length-1)return this.betStakes[y+1]}}class cF{constructor(y){this.props=y,O.Gn(this,{activeBetStake:O.EW})}get activeBetStake(){return this.props.rootStore.gamePhase.phase===bD.Q.TopUpSlot||this.props.rootStore.phaseTransitions.isTransitionToPachinko?this.props.rootStore.topUpSlotBetStake:this.props.rootStore.mainSlotBetStake}}(function(y){y["ChangeTurboMode"]="BubbleId.ChangeTurboMode"})(lF||(lF={}));const KF=300;function bF(y){let L=-1;const p=O.mJ((()=>function(y){return y.settings.turboModeAllowed&&y.settings.bubbleEnabled&&!y.autoPlay.isSuggestionBubbleVisible&&y.gamePhase.phase===bD.Q.MainSlot&&y.mainSlot.isInScreen}(y)),(p=>{window.clearTimeout(L),p&&(L=window.setTimeout((()=>{y.bubble.showBubble(lF.ChangeTurboMode)}),KF))}));return()=>{window.clearTimeout(L),p()}}const nF=y=>{const L=lF.ChangeTurboMode,p=y.device.isPortrait,N=y.device.isPhone&&y.device.isLandscape,t=p?"TopLeft":N?"TopRight":"TopCenter",j=y.device.isDesktop?"0.5rem":void 0,z=document.querySelector('[data-role="turbo-button"]');return{id:L,element:z,anchorPosition:"TopCenter",bubbleData:{contentTranslationKey:aF.X.TooltipTurboMode,position:t,showHintsOption:!1,autoClose:{timeout:4e3,callback:()=>function(y,L){L.bubble.hideBubble(y)}(L,y)},withArrow:!0,rootOffset:j,onClose:()=>function(y,L){L.bubble.hideBubble(y)}(L,y),isArrowPointOnCenter:!0}}};class vF{constructor(y){this.props=y,this.current=void 0,this.showedBubbles={},this.spinCountBubbleMap={[lF.ChangeTurboMode]:0},this.bubbleFactories={[lF.ChangeTurboMode]:nF},this.disposeBag=new HV.C,O.Gn(this,{current:O.sH,showedBubbles:O.sH,spinCountBubbleMap:O.sH,showBubble:O.XI,hideBubble:O.XI,showOnboardingBubble:O.XI,resetCurrentBubbleShowedStateOnBubbleSwitch:O.XI})}showBubble(y){this.showOnboardingBubble(y),this.resetCurrentBubbleShowedStateOnBubbleSwitch(y)}hideBubble(y){this.current&&this.current.id===y&&this.props.rootStore.abstractGame.onboardingBubbles.remove(this.current.id)}hideAllBubbles(){this.current&&this.hideBubble(this.current.id)}resize(){this.current&&this.showOnboardingBubble(this.current.id)}dispose(){this.disposeBag.dispose()}showOnboardingBubble(y){const L=this.bubbleFactories[y](this.props.rootStore);L.element&&(this.props.rootStore.abstractGame.onboardingBubbles.addOrUpdate({...L}),this.current=L,this.showedBubbles[y]=!0)}resetCurrentBubbleShowedStateOnBubbleSwitch(y){this.showedBubbles[y]=!1}}var eF=p(960921),ZF=p(449141);function yu(y,L=!1){return L?Promise.resolve():new Promise((L=>{setTimeout((()=>L()),y)}))}function Lu(y,L=!1){if(L)return{fastForward:()=>{},cancelled:Promise.resolve(!1)};let p,N=0;const t=new Promise((L=>{p=L,N=window.setTimeout((()=>L(!1)),y)}));return{fastForward:()=>{clearTimeout(N),p(!0)},cancelled:t}}function pu(y){return!y.gamePhase.qualified||y.gamePhase.phase!==bD.Q.Pachinko}function Nu(y,L){return 1===L?{...y}:Object.keys(y).reduce(((y,p)=>(y[p]*=L,y)),{...y})}function tu(y,L){return Object.keys(y).reduce(((y,p)=>{var N;return y[p]+=null!==(N=L[p])&&void 0!==N?N:0,y}),{...y})}const ju=2e4;let zu;var Ou,hu;function mu(y){y.abstractGame.setPlayerGameId(""),y.mainSlot.reset(),y.gamePhase.setQualified(!1),y.gamePhase.setPhase(bD.Q.MainSlot),y.gamePhase.setMainSlotPhase(bw.WI.Idle),y.gamePhase.setScattersPhase(Di.Idle),y.gamePhase.setIsPlayerTransferredToBonus(!1),y.topUpSlot.reset(),y.youWin.reset(),y.pachinko.reset(),y.continueTopUpPopup.reset(),y.timeout.clearAll()}(function(y){y["Table"]="ls2.table",y["ReelSets"]="ls2.reelSets",y["PayoutTable"]="ls2.payoutTable",y["GameStats"]="ls2.gameStats",y["WinningStatistics"]="ls2.winningStatistics",y["QualificationOpen"]="ls2.qualificationOpen",y["QualificationClosed"]="ls2.qualificationClosed",y["Winners"]="ls2.winnerList",y["Qualifying"]="ls2.qualifying",y["TopUp"]="ls2.topUp",y["PachinkoMultipliers"]="ls2.pachinkoMultipliers",y["FinishTopUp"]="FinishTopUp_client",y["GettingReady"]="ls2.gettingReady",y["ActionPerformed"]="ls2.actionPerformed",y["FinalDropResult"]="ls2.finalDropResult",y["DoubleDropResult"]="ls2.doubleDropResult",y["GameResolved"]="ls2.gameResolved",y["Error"]="ls2.error",y["RestoreEnd"]="ls2.restore.end",y["ContinueTopUp"]="ls2.continueTopUp",y["GameCancelled"]="ls2.gameCancelled",y["NoMoreQualification"]="ls2.noMoreQualification",y["SoftCloseQualification"]="ls2.softCloseQualification",y["GameMode"]="ls2.gameMode"})(Ou||(Ou={})),function(y){y["Spin"]="ls2.spinRequest",y["TopUp"]="ls2.topUpRequest",y["ContinueTopUp"]="ls2.continueTopUp"}(hu||(hu={}));var ku=p(688315),_u=p(167005),Wu=p(277082);function gu({distribution:y,addScatterSymbol:L=!1}){const p=y.length,N=[];for(let t=0;t<p;t++){const p=[],j=Cu(y[t]);j.forEach((()=>{p.push(j.splice(Uw.U4(0,j.length-1),1)[0])})),L&&p.splice(Uw.U4(0,p.length-1),0,"S"),N.push(p)}return N}function Cu(y){const L=Object.keys(y),p=[];for(const N of L){const L=y[N];if(void 0!==L)for(let y=0;y<L;y++)p.push(N)}return p}function Qu(y,L=Wu.CRAZY_PACHINKO_MAIN_SLOT_REEL_SIZE){const p=[];return y.forEach(((y,N)=>{const t=y.findIndex((y=>y in Wu.CRAZY_PACHINKO_SCATTER_VALUES));t>=0&&t<L-1&&p.push(N)})),p}const Tu=[Ou.PachinkoMultipliers,Ou.ActionPerformed,Ou.GettingReady,Ou.FinalDropResult,Ou.DoubleDropResult,Ou.GameResolved,Ou.Winners];function iu(y){return Tu.includes(y.type)||y.type===Ou.Qualifying&&void 0===y.payload.spinResult||y.type===Ou.Error}function Du(y){var L;return null!==(L=y.timestamp)&&void 0!==L?L:0}var wu=p(969695),xu=p(786596);const du=10;function ou(y,L){switch(y.type){case Ou.Table:return void function(y,L){O.h5((()=>{const{currentGame:p,dealer:N}=y.payload;p&&L.abstractGame.setGameTime(p.gameNumber),N&&L.abstractGame.setDealer(N.screenName)}))}(y,L);case Ou.ReelSets:return void function(y,L){O.h5((()=>{L.mainSlot.setReelStrip(function(y){const{mainSlot:L}=y.payload;return gu({distribution:L.Normal,addScatterSymbol:!0})}(y)),L.topUpSlot.generateReels(y.payload.topUpSlot)}))}(y,L);case Ou.Qualifying:return void function(y,L){O.h5((()=>{var p,N;const{spinResult:t,slotState:j,winLevel:z}=y.payload;(L.gamePhase.qualified||L.restore.isRestoring)&&mu(L),L.abstractGame.setGameTime(y.payload.spinNumber),y.payload.newSpinId&&L.spinId.setSpinId(y.payload.newSpinId),L.mainSlot.setPayLines(null!==(p=j.payoutMultipliers)&&void 0!==p?p:null),L.mainSlot.setInitialSymbols(j.grid),L.mainSlot.setNextRowSymbols(j.nextRowSymbols),j.denominations.length>0&&(L.denominations.setDenominations(j.denominations),L.denominations.setActiveDenomination(j.denominations[0])),"Stopped"===j.type?(L.gamePhase.setMainSlotPhase(bw.WI.ResponseReceived),L.mainSlot.setOutcome(j),t&&(L.mainSlot.setPayout(t.betPayout),L.mainSlot.setPayLines(null!==(N=j.payoutMultipliers)&&void 0!==N?N:null),L.youWin.winLevel=z)):"Spinning"===j.type&&L.gamePhase.setMainSlotPhase(bw.WI.Spinning),L.restore.isRestoring&&L.mainSlot.isXXXtremeSpinsActivated&&L.sound.triggerEvent(KD.P.GameInitXxxtremeSpinsActivated)}))}(y,L);case Ou.QualificationOpen:return void function(y,{abstractGame:L,continueTopUpPopup:p,gamePhase:N,qualificationTimer:t,restore:j}){O.h5((()=>{N.qualified||N.setPhase(bD.Q.MainSlot);const z=N.phase!==bD.Q.TopUpSlot||j.isRestoring||p.decision===eF.Fp.ContinueTopUp;t.running&&!z&&N.processDouble();const{gameRoundId:O,timeRemaining:h,mode:m}=y.payload;L.setGameRoundId(O);const k=!t.running&&!z;t.startTimer(h,k),N.setHasActiveQualification(!0),N.setGameRoundDuration(null!=m?m:"normal"),p.reset()}))}(y,L);case Ou.FinishTopUp:return void function({payload:y},L){O.h5((()=>{const{gamePhase:p,restore:N,pachinko:t}=L;N.isRestoring?(p.setQualified(!0),p.setPhase(bD.Q.Pachinko),L.sound.triggerEvent(KD.P.GameInitPachinko),L.continueTopUpPopup.reset()):p.phase!==bD.Q.Pachinko?(p.setIsPlayerTransferredToBonus(!0),p.setTopUpSlotPhase(bw.WI.Transition)):!0===y.undo&&t.reset()}))}(y,L);case Ou.PachinkoMultipliers:return void function({payload:y},L){O.h5((()=>{var p,N;const{abstractGame:t,gamePhase:j,mainSlot:z,restore:h,settings:m,topUpSlot:k,topUpSlotBetStake:_}=L;h.isRestoring&&(h.calculateSkippedPachinkoAnimations(null!==(p=y.timeSinceStarted)&&void 0!==p?p:0),void 0!==z.totalScatterMultiplier||h.getSkippedAnimations().includes("glowParallel")||(j.setScattersPhase(Di.Parking),z.setTotalScatterMultiplier(y.totalScatterMultiplier)),_.setQualificationBet(y.baseBetAmount),k.setMultipliers({...Nw.G7,...y.playerSpecificMultipliers},[])),t.setGameRoundId(y.gameRoundId),j.setIsPlayerTransferredToBonus(!0);const W=Object.values(y.afterMerge).includes("double"),g=m.animationsEnabled&&!y.undo;if(W||!0===y.undo){const p=()=>{var p;j.setBonusAnimationInProgress(!0),async function(y,L,p,N){const{abstractGame:t,settings:j,pachinko:z,gamePhase:O,topUpSlot:h,restore:m,sound:k}=y,_=m.getSkippedAnimations();m.isRestoring&&m.setIsRestoringPachinko(0!==_.length);let W=void 0===N.timeSinceStarted?0:N.timeSinceStarted;const g=Math.max(j.multipliersDistributionDelay-W,0);if(zu=Lu(g,!p),await zu.cancelled)return;g>0&&k.triggerEvent(KD.P.PachinkoUEMultiplierAnimations),W=Math.max(W-g,0);const C=(i=N.common,_U.A(Object.values(i)).length),Q=0===j.multipliersDistributionDelay?0:Math.max(C*j.singleMultiplierGroupDelay,0),T=Math.max(Q-W,0);var i;if(zu=Lu(T,!p),await zu.cancelled)return;W=Math.max(W-Q,0),z.setPhase(Nw.lj.ShowCommonMultipliers),O.setScattersPhase(Di.BonusGame),T>0&&N.totalScatterMultiplier>1&&k.triggerEvent(KD.P.PachinkoMultiAdd),z.setCommonMultipliers(N.common);const D=Math.max(j.showScatterDelay-W,0);if(W=Math.max(W-j.showScatterDelay,0),_.includes("glowParallel")||m.setIsRestoringPachinko(!1),zu=Lu(D,!p),await zu.cancelled)return;O.phase===bD.Q.TopUpSlot&&O.proceedToPachinkoPhase(),L>1?(z.setPhase(Nw.lj.ApplyScatter),z.setPlayerMultipliers(Nu(z.commonMultipliers,L))):z.setPlayerMultipliers(z.commonMultipliers);const w=Math.max(j.hideScatterDelay-W,0);if(W=Math.max(W-j.hideScatterDelay,0),zu=Lu(w,!p),await zu.cancelled)return;const x=Math.max(j.applyTopUpDelay-W,0);if(W=Math.max(W-j.applyTopUpDelay,0),_.includes("addTopUp")||m.setIsRestoringPachinko(!1),zu=Lu(x,!p),await zu.cancelled)return;if(z.setPhase(Nw.lj.AddTopUp),!m.getSkippedAnimations().includes("addTopUp")&&0!==W){const y=Object.keys(N.playerSpecificMultipliers).length>0;if(k.triggerEvent(KD.P.PachinkoMultiAddStart,y?"True":"False"),zu=Lu(100,!p),await zu.cancelled)return}const d=tu(Nu(z.commonMultipliers,L),N.playerSpecificMultipliers);z.setPlayerMultipliers(d),h.resetMultipliers();const o=Math.max(j.showDoubleEventDelay-W,0);if(W=Math.max(W-j.showDoubleEventDelay,0),zu=Lu(o,!p),await zu.cancelled)return;const U=Math.max(j.doubleMultipliersDelay-W,0);if(!0!==N.undo){if(0===U&&m.addSkippedAnimations(["fadeOut","fadeIn","removeTopUp"]),zu=Lu(U,!p),await zu.cancelled)return;W-j.doubleMultipliersDelay>ju?z.setPhase(Nw.lj.PuckDrop):z.setPhase(Nw.lj.AddDouble),o>0&&k.triggerEvent(KD.P.PachinkoDoubleAdded)}h.setMultipliers(Nw.mU.reduce(((y,L)=>(y[L]="double"!==N.afterMerge[L]?0:d[L],y)),{...Nw.G7}),[]),z.addDouble(N.afterMerge),zu=Lu(1e3*y.settings.fadeInAnimationDuration),await zu.cancelled||(t.log(EV.AD({finalMultipliers:N.afterMerge})),m.setIsRestoringPachinko(!1),m.resetSkippedAnimation())}(L,null!==(p=z.totalScatterMultiplier)&&void 0!==p?p:1,g,y).then((async()=>{j.setBonusAnimationInProgress(!1)}))};j.isBonusAnimationInProgress?(null==zu||zu.fastForward(),O.z7((()=>!j.isBonusAnimationInProgress),p)):p()}else j.setBonusAnimationInProgress(!0),async function(y,L,p,N){const{abstractGame:t,settings:j,pachinko:z,topUpSlot:O,restore:h}=y;if(y.restore.isRestoring)z.setPhase(Nw.lj.MergeWithTopUpAfterDoubling),h.addSkippedAnimations(["removeDoubledTopUp","addTopUp","glowSequence"]),z.setPlayerMultipliers(N.afterMerge);else{await yu(j.showDoubleDropResultDelay+j.dropZoomDelay,!p),z.setLandZone(void 0),z.setPhase(Nw.lj.PrepareForDouble),O.setMultipliers({...Nw.G7,...N.playerSpecificMultipliers},[]);const y=Nu(z.commonMultipliers,L);z.setPlayerMultipliers(y),await yu(j.removeTopUpFromPachinkoDelay,!p),z.setPhase(Nw.lj.DoubledMultipliers);const m=Nu(y,2);z.setPlayerMultipliers(m),await yu(j.doubleMultipliersDelay,!p),z.setPhase(Nw.lj.MergeWithTopUpAfterDoubling);const k=tu(m,N.playerSpecificMultipliers);z.setPlayerMultipliers(k),t.log(EV.AD({finalMultipliers:k})),O.resetMultipliers(),h.resetSkippedAnimation()}}(L,null!==(N=z.totalScatterMultiplier)&&void 0!==N?N:1,g,y).then((()=>{j.setBonusAnimationInProgress(!1)}))}))}(y,L);case Ou.QualificationClosed:return void function({continueTopUpPopup:y,qualificationTimer:L,sound:p,topUpSlot:N}){O.h5((()=>{N.isMultipliersAnimationCompleted||y.decision===eF.Fp.ContinueTopUp||N.setIsLastSpinInProgress(!0),y.decision!==eF.Fp.ContinueTopUp&&L.stopTimer(),y.isPopupVisible&&(p.triggerEvent(KD.P.BonusTimeOut),y.processAutoStayInBonus())}))}(L);case Ou.TopUp:return void function(y,L){O.h5((()=>{const{abstractGame:p,gamePhase:N,mainSlot:t,topUpSlot:j,youWin:z,topUpSlotBetStake:O,restore:h,spinId:m,continueTopUpPopup:k,sound:_,phaseTransitions:W,timeout:g}=L,{topUpMultipliers:C,topUpSlotState:Q,multiplierDestinations:T,totalScatterMultiplier:i,playerGameId:D,totalBetAmount:w,spinNumber:x,topUpMaxBet:d,betMultiplier:o,baseBetAmount:U,continueTopUp:I,newSpinId:V}=y.payload,F=!N.qualified,u=N.phase;p.setPlayerGameId(D),p.setTotalBet(w),p.setGameTime(x),N.setQualified(!0),t.setTotalScatterMultiplier(i),h.isRestoring?(W.reset(),N.setMainSlotPhase(bw.WI.Idle),N.setPhase(bD.Q.TopUpSlot),N.setScattersPhase(Di.Parking),_.triggerEvent(KD.P.GameInitTopUp)):u!==bD.Q.TopUpSlot&&(z.reset(),N.setMainSlotPhase(bw.WI.Transition),j.reset(),g.clear("WinnersList"),p.winnersList.hide()),O.setTopUpMaxBet(d),O.setBetStakeMultiplier(o),O.setQualificationBet(U),O.setSpinBet(kw.GB(U*o,2)),F&&I&&k.setContinueTopUpId(D);const S=!Array.isArray(C),B=S?{...Nw.G7,...C}:C.reduce(((y,L,p)=>(y[p+1]=L,y)),{...Nw.G7});j.setMultipliers(B,T.map((y=>({from:y.from,to:S?y.to:y.to+1})))),T.length>0&&T.length<Q.grid.filter((y=>0!==y)).length&&window.console.error("Count of flying multipliers does not match with multipliers on topUp slot"),V&&m.setSpinId(V),j.setOutcome(Q.grid),N.topUpSlotPhase!==bw.WI.Idle?N.setTopUpSlotPhase(bw.WI.ResponseReceived):N.setTopUpSlotPhase("Spinning"===Q.type?bw.WI.Spinning:bw.WI.Result)}))}(y,L);case Ou.GettingReady:return void function(y,L){O.h5((()=>{L.gamePhase.qualified&&(L.restore.isRestoring||pu(L)||L.sound.triggerEvent(KD.P.PachinkoRandomSelection),L.pachinko.setDropZone(y.payload.dropZone))}))}(y,L);case Ou.ActionPerformed:return void function(y,L){O.h5((async()=>{pu(L)||void 0===L.pachinko.landZone&&(zu=Lu(L.settings.dropZoomDelay),await zu.cancelled)||(L.restore.isRestoring?(L.sound.triggerEvent(KD.P.GameInitPachinkoDrop),void 0===L.pachinko.landZone?L.pachinko.setPhase(Nw.lj.PuckDrop):L.pachinko.setPhase(Nw.lj.PuckLanded)):(L.sound.triggerEvent(KD.P.PachinkoTimeToDrop),L.pachinko.phase!==Nw.lj.PuckLanded&&void 0===L.pachinko.landZone&&L.pachinko.setPhase(Nw.lj.PuckDrop)))}))}(0,L);case Ou.DoubleDropResult:return void function(y,L){O.h5((()=>{if(pu(L))return;const p=async()=>{L.sound.triggerEvent(KD.P.PachinkoGetDouble),zu=Lu(L.settings.dropZoomDelay),await zu.cancelled||(L.pachinko.setPhase(Nw.lj.PuckLanded),L.pachinko.setLandZone(y.payload.sector))};L.gamePhase.isBonusAnimationInProgress?O.z7((()=>!L.gamePhase.isBonusAnimationInProgress),p):p()}))}(y,L);case Ou.FinalDropResult:return void function(y,L){O.h5((()=>{if(pu(L))return;L.restore.resetSkippedAnimation();const p=()=>{if(L.pachinko.setPhase(Nw.lj.PuckLanded),L.pachinko.setLandZone(y.payload.sector),L.topUpSlot.reset(),L.youWin.setPayout(y.payload.winAmount,y.payload.winType),!L.restore.isRestoring)switch(y.payload.winType){case"Small":!1===L.settings.hideWinOnLowCelebration&&L.sound.triggerEvent(KD.P.PachinkoWin,"Low");break;case"Medium":L.sound.triggerEvent(KD.P.PachinkoWin,"Med");break;case"Big":L.sound.triggerEvent(KD.P.PachinkoWin,"High")}};L.gamePhase.isBonusAnimationInProgress?O.z7((()=>!L.gamePhase.isBonusAnimationInProgress),p):p()}))}(y,L);case Ou.GameResolved:return void function(y,L){O.h5((()=>{L.gamePhase.phase===bD.Q.Pachinko&&(L.gamePhase.setPhase(bD.Q.GameResult),L.abstractGame.skipPastEvents(y.timestamp),L.abstractGame.setPlayerGameId(""),L.gamePhase.setScattersPhase(Di.Idle))}))}(y,L);case Ou.RestoreEnd:return void function(y,L){O.h5((()=>{L.mainSlot.setIsInScreen(L.mainSlot.visible),L.topUpSlot.setIsInScreen(L.topUpSlot.visible),L.pachinko.setIsInScreen(L.pachinko.visible),L.restore.setIsRestoring(!1)}))}(0,L);case Ou.Winners:return void function(y,L){const{abstractGame:p,gamePhase:N,settings:t,timeout:j}=L;if(j.clear("WinnersList"),p.winnersList.hide(),y.payload.winners.length>0&&N.phase!==bD.Q.TopUpSlot){const L=N.phase===bD.Q.MainSlot?y.payload.winners.slice(0,du):y.payload.winners;j.set("WinnersList",(()=>{p.winnersList.setWinners([wu.Ko(y.payload.winnersCount,y.payload.totalAmount),...L.map((y=>({type:xu.Q.Winner,screenName:y.screenName,multiplier:y.multiplier,win:`${y.payout}`})))])}),N.phase===bD.Q.MainSlot?0:t.bonusWinDelay)}}(y,L);case Ou.GameStats:return void function(y,L){L.qualifiedPlayers.setTotalPlayerCount(y.payload.qualifying)}(y,L);case Ou.Error:return void function(y,L){O.h5((()=>{var p;const{abstractGame:N,gamePhase:t,mainSlotBetStake:j,mainSlot:z,topUpSlot:O,topUpSlotBetStake:h}=L;N.handleError({errorId:`error_${y.payload.errorCode}`}),N.log(EV.VT({amount:t.phase===bD.Q.Initial?j.spinBet:h.spinBet,spinId:null!==(p=y.payload.spinId)&&void 0!==p?p:"",errorId:y.payload.errorCode,errorMessage:y.payload.message,type:YV({gamePhase:t.phase,isTurbo:t.isTurboMode})})),t.phase===bD.Q.MainSlot?z.processError():O.processError()}))}(y,L);case ZF.fY:return void function(y,L){L.abstractGame.isBalancePaused||L.abstractGame.updateBalanceFromPayload(y)}(y,L);case Ou.PayoutTable:return void function(y,L){L.payoutTable.setPayouts(y.payload.payouts),L.payoutTable.setPaylineCombinations(y.payload.paylines)}(y,L);case Ou.GameCancelled:return void function(y,L){const{abstractGame:p,gamePhase:N,sound:t}=L;p.showGameCancelledToast(),N.phase===bD.Q.Pachinko&&t.triggerEvent(KD.P.GameCancelledPachinko),mu(L)}(0,L);case Ou.NoMoreQualification:return void function(y){O.h5((()=>{y.gamePhase.setHasActiveQualification(!1),y.gamePhase.qualified||y.abstractGame.openKickoutPopup(_u.J.TableClosed)}))}(L);case Ou.SoftCloseQualification:return void function({continueTopUpPopup:y,gamePhase:L}){O.h5((()=>{if(y.continueTopUpId){if(L.phase===bD.Q.TopUpSlot)return void y.showPopup();y.continueTopUp(!0)}}))}(L);case Ou.GameMode:return void function(y,L){L.gamePhase.setGameRoundDuration(y.payload.mode)}(y,L);case Ou.WinningStatistics:case Ou.ContinueTopUp:case"subscribe":case"connection.reconnectNow":case"ukgc.netposition":case"appInfo":case"metrics.pong":case"ls2.restore.begin":case"ls2.action":case"freeRoundBalance":case"rewardGameBalance":case"tableState":return}var p;p=y,window.console.error(`This scope should not be reachable: ${JSON.stringify(p)}`)}function Uu(y,L){return function(y,L,p,N,t){return function(j){const z=j;N(z)&&!y.restore.isRestoring?L.wait(ku.t(z,y,L,t)).then((()=>{p(z,y)})).catch((y=>{console.warn("VideoSync error:",y)})):p(z,y)}}(y,L,ou,iu,Du)}function Iu(y,L){y.sendMessage(L)}class Vu{constructor(y){this.props=y,this.isPopupVisible=!1,this.continueTopUpId=void 0,this.decision=void 0,O.Gn(this,{isPopupVisible:O.sH,continueTopUpId:O.sH,decision:O.sH,showPopup:O.XI,closePopup:O.XI,setContinueTopUpId:O.XI,reset:O.XI})}showPopup(){if(void 0===this.continueTopUpId||this.isPopupVisible)return;const{sound:y}=this.props.rootStore;y.triggerEvent(KD.P.BonusRoundBeginsMessage),this.props.rootStore.abstractGame.openPopup(new TV.$J({id:eF.fH}).addPriority(TV.bx.High).setIsAutoClosing(!1).addTitle(fF.T(aF.X.ContinueTopUpTitle)).addContentText(fF.T(aF.X.ContinueTopUpContent)).addButtons([{id:"Continue",labelTranslationId:aF.X.TopUp,dataRole:"continue-top-up"},{id:"Close",labelTranslationId:aF.X.Bonus,isDefault:!0,dataRole:"go-to-bonus-game"}]).addCallback((y=>{switch(y){case"Continue":this.continueTopUp();break;case"Close":this.proceedToBonusGame()}}))),this.isPopupVisible=!0}closePopup(){this.props.rootStore.abstractGame.closePopup(eF.fH),this.isPopupVisible=!1,this.continueTopUpId=void 0}setContinueTopUpId(y){this.continueTopUpId=y}continueTopUp(y=!1){const{abstractGame:L,transport:p,qualificationTimer:N,settings:t,sound:j}=this.props.rootStore;var z;void 0!==this.continueTopUpId&&(Iu(p,(z={playerGameId:this.continueTopUpId},{type:hu.ContinueTopUp,payload:z})),this.decision=eF.Fp.ContinueTopUp,N.startTimer(N.timeRemainingMs+t.bonusGameInterval),this.continueTopUpId=void 0,y||(j.triggerEvent(KD.P.TopUpChosen),L.log(EV.kR("TopUp")),this.closePopup()))}processAutoStayInBonus(){this.closePopup(),this.decision=eF.Fp.ContinueTopUp,this.props.rootStore.abstractGame.log(EV.kR("Skipped")),this.props.rootStore.abstractGame.showGenericToast({title:"",description:fF.T(aF.X.ToastAutomaticDecision)})}proceedToBonusGame(){this.props.rootStore.sound.triggerEvent(KD.P.BonusChosen),this.props.rootStore.abstractGame.log(EV.kR("Bonus")),this.decision=eF.Fp.Bonus,this.props.rootStore.phaseTransitions.transitionToPachinko(),this.closePopup()}reset(){this.closePopup(),this.decision=void 0}}class Fu{constructor(y){this.props=y,this.phase=Xx.Idle,this.activeDenominationGrid=void 0,this.denominations=[],this.selectedDenomination={denomination:0,spinMode:"Normal"},this.visibleDenomination={denomination:0,spinMode:"Normal"},O.Gn(this,{phase:O.sH,denominations:O.sH,activeDenominationGrid:O.sH,selectedDenomination:O.sH,isSpinning:O.EW,onSpinFinished:O.XI,switchDenomination:O.XI,setActiveDenominationGrid:O.XI,setDenominations:O.XI,setPhase:O.XI,isScatterDisabled:O.EW,setActiveDenomination:O.XI})}setDenominations(y){this.denominations=y}setPhase(y){this.phase=y}onSpinStarted(){this.phase=Xx.StopSpinning}onSpinFinished(){this.phase!==Xx.Spinning&&(this.phase=Xx.Idle,this.areDenominationsEqual(this.selectedDenomination,this.visibleDenomination)||this.switchDenomination(this.selectedDenomination.denomination,this.selectedDenomination.spinMode))}setActiveDenominationGrid(y){this.activeDenominationGrid=Wu.convertCrazyPachinkoSymbolsToReels(Fx(y))}switchDenomination(y,L){if(this.selectedDenomination={denomination:y,spinMode:L},this.phase===Xx.StopSpinning)return;const p=this.denominations.find((y=>this.areDenominationsEqual(y,this.selectedDenomination)));this.props.rootStore.mainSlot.clearLandedReelsWithScatters(),void 0===p||this.areDenominationsEqual(this.selectedDenomination,this.visibleDenomination)||(this.phase=Xx.Spinning,this.visibleDenomination={denomination:y,spinMode:L},this.setActiveDenominationGrid(p.grid),this.props.rootStore.gamePhase.setMainSlotPhase(bw.WI.Idle),this.props.rootStore.youWin.reset(),this.props.rootStore.mainSlot.setOutcome({grid:p.grid}),this.props.rootStore.mainSlot.setNextRowSymbols(p.nextRowSymbols),this.props.rootStore.mainSlot.setScatterMultipliers([]))}setActiveDenomination(y){var L;const{mainSlotBetStake:p,mainSlot:N}=this.props.rootStore,{xxxtremeBetStakes:t}=p;if("FeatureBuy"!==N.spinMode)if(this.setActiveDenominationGrid(y.grid),this.selectedDenomination={denomination:y.denomination,spinMode:y.spinMode},this.visibleDenomination=this.selectedDenomination,N.setSpinMode(y.spinMode),"XXXtreme"!==y.spinMode)p.setSpinBet(y.denomination);else{const N=null===(L=t.find((L=>L.denomination===y.denomination)))||void 0===L?void 0:L.value;void 0!==N&&p.setSpinBet(N)}}get isScatterDisabled(){return void 0===this.denominations.find((y=>this.areDenominationsEqual(y,this.selectedDenomination)))&&this.phase===Xx.Idle}get isSpinning(){return this.phase!==Xx.Idle}areDenominationsEqual(y,L){return y.denomination===L.denomination&&y.spinMode===L.spinMode}}class uu{constructor(y){this.props=y,O.Gn(this,{isPortrait:O.EW,isLandscape:O.EW,isDesktop:O.EW,isPhone:O.EW,isTablet:O.EW,layoutMode:O.EW,isLandscapeSmallDevice:O.EW})}get isPortrait(){return this.props.rootStore.abstractGame.orientation===T.t.Portrait}get isLandscape(){return this.props.rootStore.abstractGame.orientation===T.t.Landscape}get isDesktop(){const y=this.props.rootStore.abstractGame.platform,L=y===W.OD.Tablet&&_.DS.IS_DESKTOP;return y===W.OD.Desktop||L}get isPhone(){return this.props.rootStore.abstractGame.platform===W.OD.Phone}get isTablet(){return this.props.rootStore.abstractGame.platform===W.OD.Tablet&&!_.DS.IS_DESKTOP}get hasNotch(){return this.props.DS.HAS_NOTCH}get isAndroid(){return this.props.DS.IS_ANDROID}get isIOS(){return this.props.DS.IS_IOS}get layoutMode(){return this.isDesktop?"desktop":this.isTablet?"tablet":this.isLandscape?"mobileLandscape":"mobilePortrait"}get isLandscapeSmallDevice(){const{containerHeight:y,containerWidth:L}=this.props.rootStore.abstractGame.gameDimensions;return this.isPhone&&L/y<2}get shouldDelayVideoBlur(){return this.props.DS.IS_CHROME&&this.props.DS.IS_ANDROID8_0_0_PLUS&&!this.props.DS.IS_ANDROID9_0_0_PLUS}}function Su(y){return O.mJ((()=>({isPlayerTransferredToBonus:y.gamePhase.isPlayerTransferredToBonus,isAnimationCompleted:y.topUpSlot.isMultipliersAnimationCompleted})),(({isPlayerTransferredToBonus:L,isAnimationCompleted:p})=>{L&&p&&y.phaseTransitions.transitionToPachinko()}),{fireImmediately:!0})}let Bu="";function Ru(y){let L=-1;return O.mJ((()=>({gamePhase:y.gamePhase.phase,mainSlotPhase:y.gamePhase.mainSlotPhase,topUpSlotPhase:y.gamePhase.topUpSlotPhase,isTransitionInProgress:y.gamePhase.isTransitionInProgress})),(({gamePhase:p,mainSlotPhase:N,topUpSlotPhase:t,isTransitionInProgress:j})=>{switch(window.clearTimeout(L),p){case bD.Q.MainSlot:switch(N){case bw.WI.Idle:Bu=N,y.abstractGame.currentLifecycle!==iV.P.BetsOpen&&y.abstractGame.setLifecycleOpenBets(),y.abstractGame.reserveBet(0),y.abstractGame.resumeBalanceUpdate();break;case bw.WI.Spinning:y.abstractGame.currentLifecycle!==iV.P.BetsClosed&&y.abstractGame.setLifecycleCloseBets(),y.abstractGame.setGameResultAmount(0),y.abstractGame.reserveBet(y.mainSlotBetStake.spinBet),y.abstractGame.pauseBalanceUpdate(),y.youWin.reset();break;case bw.WI.Result:j||(y.abstractGame.reserveBet(0),y.abstractGame.resumeBalanceUpdate());const p=y.autoPlay.isRunning?y.settings.autoPlaySpinDelay:y.settings.pauseBetweenSpinAndResult;L=window.setTimeout((()=>{y.gamePhase.qualified||(y.abstractGame.setLifecycleResolved(),y.abstractGame.setLifecycleOpenBets())}),p);break;case bw.WI.Transition:y.autoPlay.stop()}break;case bD.Q.TopUpSlot:switch(t){case bw.WI.Idle:y.abstractGame.currentLifecycle!==iV.P.InteractionOpen&&y.abstractGame.setLifecycleOpenInteraction(),y.abstractGame.reserveBet(0),y.abstractGame.resumeBalanceUpdate();break;case bw.WI.Result:y.abstractGame.reserveBet(0),y.abstractGame.resumeBalanceUpdate(),Bu===bw.WI.Idle&&(y.autoPlay.stop(),Bu=""),L=window.setTimeout((()=>{y.abstractGame.setLifecycleOpenInteraction()}),y.autoPlay.isRunning?y.settings.autoPlaySpinDelay:0);break;case bw.WI.Spinning:y.abstractGame.currentLifecycle!==iV.P.InteractionClosed&&y.abstractGame.setLifecycleCloseInteraction(),y.abstractGame.reserveBet(y.topUpSlotBetStake.spinBet),y.abstractGame.pauseBalanceUpdate();break;case bw.WI.Transition:y.autoPlay.stop()}break;case bD.Q.Pachinko:y.abstractGame.currentLifecycle===iV.P.InteractionOpen?y.abstractGame.setLifecycleCloseInteraction():y.abstractGame.currentLifecycle!==iV.P.InteractionClosed&&y.abstractGame.currentLifecycle!==iV.P.BetsClosed&&y.abstractGame.setLifecycleCloseBets();break;case bD.Q.GameResult:y.abstractGame.setLifecycleResolved()}}),{fireImmediately:!0})}function Yu(y){return O.mJ((()=>({phase:y.gamePhase.phase})),(({phase:L},p)=>{L===bD.Q.MainSlot&&(null==p?void 0:p.phase)!==bD.Q.MainSlot&&y.youWin.reset()}))}function Eu(y){return O.mJ((()=>({gamePhase:y.gamePhase.phase,isDesktop:y.device.isDesktop})),(({gamePhase:L,isDesktop:p})=>{L===bD.Q.Pachinko?y.abstractGame.setTotalBetLabelTranslationKey(p?aF.X.BonusBetUppercase:aF.X.BonusBet):y.abstractGame.setTotalBetLabelTranslationKey(p?aF.X.TotalBetUppercase:aF.X.TotalBet)}),{fireImmediately:!0})}const Pu=500;function lu(y){let L=-1;const p=O.mJ((()=>({gamePhase:y.gamePhase.phase,mainSlotInScreen:y.mainSlot.isInScreen})),(({gamePhase:p,mainSlotInScreen:N})=>{window.clearTimeout(L),p===bD.Q.MainSlot?y.device.shouldDelayVideoBlur?N&&(L=window.setTimeout((()=>{y.abstractGame.setVideoBlur(y.settings.videoBlurForQualification)}),Pu)):y.abstractGame.setVideoBlur(y.settings.videoBlurForQualification):y.abstractGame.setVideoBlur(0)}),{fireImmediately:!0});return()=>{p(),window.clearTimeout(L)}}class Mu{constructor(y){this.props=y,this.mainSlotPhase=bw.WI.Idle,this.topUpSlotPhase=bw.WI.Idle,this.phase=bD.Q.Initial,this.gameRoundDuration="normal",this.isBonusAnimationInProgress=!1,this.scattersPhase=Di.Idle,this.isTurboMode=!1,this.qualified=!1,this.isTurboModeEnabledForSpin=!1,this.hasActiveQualification=!1,this.hasDoubleAppeared=!1,this.isPlayerTransferredToBonus=!1,this.mainSlotSwitchPhaseTimeout=0,this.topSlotSwitchPhaseTimeout=0,this.gameResultTimeout=0,this.doubleTimeout=0,O.Gn(this,{qualified:O.sH,mainSlotPhase:O.sH,topUpSlotPhase:O.sH,scattersPhase:O.sH,isBonusAnimationInProgress:O.sH,setBonusAnimationInProgress:O.XI,setTopUpSlotPhase:O.XI,setMainSlotPhase:O.XI,setScattersPhase:O.XI,phase:O.sH,gameRoundDuration:O.sH,setPhase:O.XI,isTurboMode:O.sH,toggleTurboMode:O.XI,setTurboModeForSpin:O.XI,setQualified:O.XI,proceedToPachinkoPhase:O.XI,isQualificationSpinInProgress:O.EW,isTopUpSpinInProgress:O.EW,isAnySlotSpinInProgress:O.EW,isTransitionInProgress:O.EW,isMainSlotToTopUpTransitionInProgress:O.EW,hasActiveQualification:O.sH,hasDoubleAppeared:O.sH,setHasActiveQualification:O.XI,isPlayerTransferredToBonus:O.sH,setIsPlayerTransferredToBonus:O.XI,setGameRoundDuration:O.XI,processDouble:O.XI})}toggleTurboMode(){this.isTurboMode=!this.isTurboMode,this.props.rootStore.abstractGame.log(EV.p7(this.isTurboMode)),this.setTurboModeForSpin()}setTurboModeForSpin(){(!this.isTurboMode||this.mainSlotPhase!==bw.WI.Spinning&&this.topUpSlotPhase!==bw.WI.Spinning)&&(this.isTurboModeEnabledForSpin=this.isTurboMode)}setGameRoundDuration(y){this.gameRoundDuration=y}setQualified(y){this.qualified=y}setBonusAnimationInProgress(y){this.isBonusAnimationInProgress=y,this.hasDoubleAppeared=!1}setPhase(y){clearTimeout(this.gameResultTimeout),(y!==bD.Q.Pachinko&&y!==bD.Q.GameResult||this.qualified)&&(y===bD.Q.GameResult&&(this.setQualified(!1),this.props.rootStore.mainSlot.reset(),this.props.rootStore.topUpSlot.reset(),this.setIsPlayerTransferredToBonus(!1),this.gameResultTimeout=setTimeout((()=>{this.props.rootStore.phaseTransitions.transitionToMain(),this.props.rootStore.youWin.reset(),this.props.rootStore.pachinko.reset(),this.hasActiveQualification||this.props.rootStore.abstractGame.openKickoutPopup(_u.J.TableClosed)}),this.props.rootStore.settings.gameResultShowDuration)),this.phase===bD.Q.Pachinko&&y===bD.Q.TopUpSlot||(this.phase=y))}setMainSlotPhase(y){clearTimeout(this.mainSlotSwitchPhaseTimeout),y===bw.WI.ResponseReceived&&(this.mainSlotSwitchPhaseTimeout=window.setTimeout((()=>{O.h5((()=>{this.mainSlotPhase=bw.WI.StopSpinning}))}),this.props.rootStore.settings.turboSpinMainSlotDuration)),this.mainSlotPhase=y,this.setTurboModeForSpin()}setTopUpSlotPhase(y){clearTimeout(this.topSlotSwitchPhaseTimeout),y===bw.WI.ResponseReceived&&(this.topSlotSwitchPhaseTimeout=window.setTimeout((()=>{O.h5((()=>{this.topUpSlotPhase=bw.WI.StopSpinning}))}),this.props.rootStore.settings.turboSpinTopUpSlotDuration)),this.topUpSlotPhase=y,this.setTurboModeForSpin()}setScattersPhase(y){this.scattersPhase=y}proceedToPachinkoPhase(){this.setPhase(bD.Q.Pachinko)}setIsPlayerTransferredToBonus(y){this.isPlayerTransferredToBonus=y}processDouble(){clearTimeout(this.doubleTimeout),this.hasDoubleAppeared=!0,this.doubleTimeout=window.setTimeout((()=>{O.h5((()=>{this.hasDoubleAppeared=!1}))}),5e3)}get isQualificationSpinInProgress(){return this.mainSlotPhase!==bw.WI.Idle&&this.mainSlotPhase!==bw.WI.Result||this.isMainSlotToTopUpTransitionInProgress}get isTopUpSpinInProgress(){return this.topUpSlotPhase!==bw.WI.Idle&&this.topUpSlotPhase!==bw.WI.Result}get isAnySlotSpinInProgress(){return this.isQualificationSpinInProgress||this.isTopUpSpinInProgress}get isMainSlotToTopUpTransitionInProgress(){return this.phase===bD.Q.MainSlot&&this.qualified}get isTransitionInProgress(){return this.isMainSlotToTopUpTransitionInProgress||this.topUpSlotPhase===bw.WI.Transition}dispose(){clearTimeout(this.gameResultTimeout),clearTimeout(this.mainSlotSwitchPhaseTimeout),clearTimeout(this.topSlotSwitchPhaseTimeout),clearTimeout(this.doubleTimeout)}setHasActiveQualification(y){this.hasActiveQualification=y}}function fu(y,L,p={}){const N={},{rotateAngle:t}=p;for(const[p,j]of Object.entries(L)){const L=au(y,j),z=new dk(L);void 0!==t&&(z.rotation=NN.degToRad(t),z.center=new tN(.5,.5)),z.encoding=nL,z.userData.symbol=p,N[p]=z}return N}function au(y,L){const[p,N,t,j]=L,z=document.createElement("canvas");z.width=t,z.height=j;const O=z.getContext("2d");return O?(O.drawImage(y,p,N,t,j,0,0,t,j),z):z}function Hu(y){if(!y.frames)throw new Error("Symbols metadata must be a valid JSON with frame definitions.");const{frames:L}=y,p={};return Object.entries(L).forEach((([y,L])=>{const{x:N,y:t,width:j,height:z}=L;p[y]=[N,t,j,z]})),p}const Xu=JSON.parse('{"frames":{"0-low":{"x":50,"y":0,"width":160,"height":256},"1-low":{"x":218,"y":0,"width":127,"height":256},"2-low":{"x":353,"y":0,"width":155,"height":256},"3-low":{"x":514,"y":0,"width":155,"height":256},"4-low":{"x":673,"y":0,"width":172,"height":256},"5-low":{"x":850,"y":0,"width":155,"height":256},"6-low":{"x":1012,"y":0,"width":175,"height":256},"7-low":{"x":1185,"y":0,"width":195,"height":256},"8-low":{"x":1380,"y":0,"width":170,"height":256},"9-low":{"x":1565,"y":0,"width":185,"height":256},"x-low":{"x":1750,"y":0,"width":180,"height":256},"0-mid":{"x":50,"y":256,"width":160,"height":256},"1-mid":{"x":218,"y":256,"width":127,"height":256},"2-mid":{"x":353,"y":256,"width":155,"height":256},"3-mid":{"x":514,"y":256,"width":155,"height":256},"4-mid":{"x":673,"y":256,"width":172,"height":256},"5-mid":{"x":850,"y":256,"width":155,"height":256},"6-mid":{"x":1012,"y":256,"width":175,"height":256},"7-mid":{"x":1185,"y":256,"width":195,"height":256},"8-mid":{"x":1380,"y":256,"width":170,"height":256},"9-mid":{"x":1565,"y":256,"width":185,"height":256},"x-mid":{"x":1750,"y":256,"width":180,"height":256},"0-high":{"x":50,"y":512,"width":160,"height":256},"1-high":{"x":218,"y":512,"width":127,"height":256},"2-high":{"x":353,"y":512,"width":155,"height":256},"3-high":{"x":514,"y":512,"width":155,"height":256},"4-high":{"x":673,"y":512,"width":172,"height":256},"5-high":{"x":850,"y":512,"width":155,"height":256},"6-high":{"x":1012,"y":512,"width":175,"height":256},"7-high":{"x":1185,"y":512,"width":195,"height":256},"8-high":{"x":1380,"y":512,"width":170,"height":256},"9-high":{"x":1565,"y":512,"width":185,"height":256},"x-high":{"x":1750,"y":512,"width":180,"height":256}}}'),Ju=JSON.parse('{"frames":{"0-low":{"x":0,"y":230,"width":170,"height":256},"1-low":{"x":200,"y":230,"width":170,"height":256},"2-low":{"x":400,"y":230,"width":170,"height":256},"3-low":{"x":600,"y":230,"width":170,"height":256},"4-low":{"x":795,"y":230,"width":170,"height":256},"5-low":{"x":1000,"y":230,"width":170,"height":256},"6-low":{"x":1195,"y":230,"width":170,"height":256},"7-low":{"x":1400,"y":230,"width":170,"height":256},"8-low":{"x":1600,"y":230,"width":170,"height":256},"9-low":{"x":1800,"y":230,"width":170,"height":256},"x-low":{"x":1980,"y":230,"width":160,"height":256},"0-mid":{"x":0,"y":470,"width":170,"height":256},"1-mid":{"x":200,"y":470,"width":170,"height":256},"2-mid":{"x":400,"y":470,"width":170,"height":256},"3-mid":{"x":600,"y":470,"width":170,"height":256},"4-mid":{"x":795,"y":470,"width":170,"height":256},"5-mid":{"x":1000,"y":470,"width":170,"height":256},"6-mid":{"x":1195,"y":470,"width":170,"height":256},"7-mid":{"x":1400,"y":470,"width":170,"height":256},"8-mid":{"x":1600,"y":470,"width":170,"height":256},"9-mid":{"x":1800,"y":470,"width":170,"height":256},"x-mid":{"x":1980,"y":470,"width":160,"height":256},"0-high":{"x":0,"y":-12,"width":170,"height":256},"1-high":{"x":200,"y":-12,"width":170,"height":256},"2-high":{"x":400,"y":-12,"width":170,"height":256},"3-high":{"x":600,"y":-12,"width":170,"height":256},"4-high":{"x":795,"y":-12,"width":170,"height":256},"5-high":{"x":1000,"y":-12,"width":170,"height":256},"6-high":{"x":1195,"y":-12,"width":170,"height":256},"7-high":{"x":1400,"y":-12,"width":170,"height":256},"8-high":{"x":1600,"y":-12,"width":170,"height":256},"9-high":{"x":1800,"y":-12,"width":170,"height":256},"x-high":{"x":1980,"y":-12,"width":160,"height":256}}}');class ru{constructor(){this.cache={},this.customTextures={},this.multiplierPool={[KT.FlyingWithX]:new Map,[KT.LongHorizontal]:new Map,[KT.WithShine]:new Map,[KT.WithX]:new Map,[KT.WithXExtraOffset]:new Map,[KT.WithXSlotSymbol]:new Map},this.baseMultiplierTextures={regular:null,italic:null},O.Gn(this,{cache:O.sH,addTexture:O.XI,baseMultiplierTextures:O.sH,addMultipliersToPool:O.XI,rebuildMultiplierTextures:O.XI,customTextures:O.sH,addCustomTexture:O.XI})}addTexture(y,L){var p;this.cache[y]&&(null===(p=this.cache[y])||void 0===p||p.dispose()),y===sT.MultiplierSymbolsRegular?(this.disposeBaseMultiplierTexture("regular"),this.baseMultiplierTextures.regular=fu(L.source.data,Hu(Ju))):y===sT.MultiplierSymbolsItalic&&(this.disposeBaseMultiplierTexture("italic"),this.baseMultiplierTextures.italic=fu(L.source.data,Hu(Xu))),this.cache[y]=L}addCustomTexture(y,L){this.customTextures[y]=L}addMultipliersToPool(y,L){const p=this.multiplierPool[y];for(const[y,N]of L)p.set(y,N);const N=bT[y];for(;N>0&&p.size>N;){const L=p.keys().next().value;this.multiplierPool[y].delete(L)}}getMultiplierFromPool(y,L){const p=this.multiplierPool[y],N=p.get(L);return void 0!==N&&(p.delete(L),p.set(L,N)),N}getOldestMultiplierFromPool(y){return this.multiplierPool[y].entries().next().value}rebuildMultiplierTextures(){this.disposeCustomTextures(),this.disposeMultiplierPool(),this.cache[sT.MultiplierSymbolsRegular]&&(this.disposeBaseMultiplierTexture("regular"),this.baseMultiplierTextures.regular=fu(this.cache[sT.MultiplierSymbolsRegular].source.data,Hu(Ju))),this.cache[sT.MultiplierSymbolsItalic]&&(this.disposeBaseMultiplierTexture("italic"),this.baseMultiplierTextures.italic=fu(this.cache[sT.MultiplierSymbolsItalic].source.data,Hu(Xu)))}dispose(){for(const y of Object.values(this.cache))null==y||y.dispose();this.disposeCustomTextures(),this.disposeBaseMultiplierTexture("regular"),this.disposeBaseMultiplierTexture("italic"),this.disposeMultiplierPool(),this.cache={}}disposeBaseMultiplierTexture(y){const L=this.baseMultiplierTextures[y];if(null!==L)for(const y of Object.values(L))y.dispose();this.baseMultiplierTextures[y]=null}disposeMultiplierPool(){for(const y of Object.keys(this.multiplierPool))this.multiplierPool[y].forEach((y=>{y.dispose()})),this.multiplierPool[y].clear()}disposeCustomTextures(){for(const y of Object.values(this.customTextures))y.dispose();this.customTextures={}}}function Gu(y){return O.z7((()=>y.abstractGame.gameLoaded&&y.abstractGame.preferencesLoaded),(()=>{const L=y.abstractGame.getPreferenceValue(lV.FeatureScreenShowCountWithSessionId),{lastSessionId:p,counter:N}=L;if(N<y.settings.featureScreenShowLimit&&(0||y.settings.displaySplashScreenOnLoad)&&(y.infoPanel.setIsVisible(!0),p!==y.abstractGame.sessionId)){const L={lastSessionId:y.abstractGame.sessionId,counter:N+1};y.abstractGame.updatePreferenceValue(lV.FeatureScreenShowCountWithSessionId,L)}}))}var $u=p(991924);class qu{constructor(y){this.props=y,this.isVisible=!1,this.view="presents",O.Gn(this,{isVisible:O.sH,view:O.sH,setIsVisible:O.XI,setView:O.XI})}setIsVisible(y){this.isVisible=y,this.props.rootStore.abstractGame.log(EV.Mk({closedBy:y?void 0:"Play"}))}setView(y){this.props.rootStore.abstractGame.log(EV.Mk({screenFrom:this.view,screenTo:y})),this.view=y}setViewFromPage(y){const L=$u.V.indexOf(this.view)+y,p=$u.V.length-1,N=$u.V[L>p?0:L<0?p:L];this.setView(N)}}function Au({gamePhase:y,amount:L,spinMode:p}){if(y===bD.Q.TopUpSlot)return{[Ux.nY.TopUp]:L};if(y===bD.Q.MainSlot)switch(p){case"Normal":return{[Ux.nY.Normal]:L};case"XXXtreme":return{[Ux.nY.XXXtreme]:L};case"FeatureBuy":return{[Ux.nY.FeatureBuy]:L}}return{}}var su=p(625678),cu=p(864442);function Ku(y){const{openMwTables:L,mwLayout:p}=cu.y();return{btMiniGame:su.Z.LS2,btVideoQuality:y.videoInfo.quality.value,btTableView:"view1",orientation:y.orientation,videoProtocol:y.videoInfo.playerName.value,openMwTables:String(L),mwLayout:String(p)}}class bu{constructor(y){this.props=y,this.reels=Jx.vy,this.rows=Jx.Jh,this.payLines=null,this.grid=[],this.isQuickStop=!1,this.initialSymbols=[],this.reelStrip=[],this.symbolsObjects=new Map,this.scatterMultipliers=[],this.totalScatterMultiplier=void 0,this.currentLine=0,this.payout=0,this.isInScreen=!1,this.nextRowSymbols=[],this.spinMode="Normal",this.nearWinReelIds=[],this.areSymbolsSynced=!1,this.areReelsReady=!1,this.renderRegion={x:0,y:0},this.allWinningSymbols=[],this.landedReelsWithScatters=[],this.spinRequests={},this.setSymbolObject=(y,L,p)=>{this.symbolsObjects.set(`${y}-${L}`,p)},this.setRenderRegion=(y,L)=>{this.renderRegion.x=y,this.renderRegion.y=L},O.Gn(this,{allWinningSymbols:O.sH,areReelsReady:O.sH,payLines:O.sH,grid:O.sH,isQuickStop:O.sH,currentLine:O.sH,payout:O.sH,scatterMultipliers:O.sH.ref,totalScatterMultiplier:O.sH,isInScreen:O.sH,initialSymbols:O.sH,nextRowSymbols:O.sH,spinMode:O.sH,landedReelsWithScatters:O.sH,setOutcome:O.XI.bound,setCurrentLine:O.XI.bound,setScatterMultipliers:O.XI.bound,setTotalScatterMultiplier:O.XI.bound,setPayLines:O.XI.bound,setInitialSymbols:O.XI.bound,setReelStrip:O.XI.bound,setPayout:O.XI.bound,setIsInScreen:O.XI.bound,setNextRowSymbols:O.XI.bound,setSpinMode:O.XI.bound,setAreReelsReady:O.XI.bound,isSpinButtonDisabled:O.EW,isTurboButtonDisabled:O.EW,visible:O.EW,nudgeReelIds:O.EW,teaseReelIds:O.EW,setNearWinReelIds:O.XI.bound,nearWinReelIds:O.sH,onSpinEnd:O.XI.bound,spin:O.XI.bound,reset:O.XI.bound,isXXXtremeSpinsActivated:O.EW,isInsufficientBalanceForSpin:O.EW,processError:O.XI.bound,currentWinLine:O.EW,isSymbolInWinSequence:O.sH,setLandedReelWithScatter:O.XI.bound,clearLandedReelsWithScatters:O.XI.bound,areSymbolsSynced:O.sH,setAreSymbolsSynced:O.XI.bound,showResult:O.EW})}get visible(){const{gamePhase:y}=this.props.rootStore;return y.phase===bD.Q.MainSlot}get isSpinButtonDisabled(){const{autoPlay:y,settings:L}=this.props.rootStore;return!this.canPlaceBet||y.roundsLeft>0||!L.slamStopEnabled&&this.phase!==bw.WI.Idle&&this.phase!==bw.WI.Result}get isTurboButtonDisabled(){return!this.canPlaceBet}get isInsufficientBalanceForSpin(){const{abstractGame:y,mainSlotBetStake:L}=this.props.rootStore;return this.phase!==bw.WI.Spinning&&(y.balance<L.spinBet||y.isLowBalance)}get nudgeReelIds(){return this.grid.length>0?Qu(this.grid):this.initialSymbols.length>0?Qu(this.initialSymbols):[]}get isXXXtremeSpinsActivated(){return"XXXtreme"===this.spinMode}get teaseReelIds(){if(!this.scatterMultipliers.length)return[];const y=this.scatterMultipliers.map((y=>y.reel)),L=Array.from({length:Jx.vy},((y,L)=>L));return XV.A(L,...y)}setPayout(y){this.payout=y}setOutcome(y){const L=Wu.convertCrazyPachinkoSymbolsToReels(y.grid);this.grid=L,this.setScatterMultipliers(Wu.getCrazyPachinkoScatterMultiplierPositions(L))}setPayLines(y){this.payLines=y}onSpinEnd(){const{abstractGame:y,youWin:L,phaseTransitions:p,mainSlot:N}=this.props.rootStore;this.phase!==bw.WI.Error?(this.allWinningSymbols=this.getWinningSymbols(),this.props.rootStore.sound.triggerEvent(KD.P.SpinComplete),this.phase!==bw.WI.Transition?L.setPayout(this.payout,L.winLevel):(y.winnersList.hide(),setTimeout((()=>{p.transitionToTopUp()}),null!==N.payLines?bw.qC:0)),this.setPhase(bw.WI.Result)):this.setPhase(bw.WI.Idle)}setScatterMultipliers(y=[]){this.scatterMultipliers=y}setTotalScatterMultiplier(y){this.totalScatterMultiplier=y}setCurrentLine(y){this.currentLine=y}getSymbolObject(y,L){return this.symbolsObjects.get(`${y}-${L}`)}setIsInScreen(y){this.isInScreen=y}setInitialSymbols(y){this.initialSymbols=Wu.convertCrazyPachinkoSymbolsToReels(y)}setReelStrip(y){this.reelStrip=y}setAreReelsReady(y){this.areReelsReady=y}setNextRowSymbols(y){this.nextRowSymbols=y}setSpinMode(y){this.spinMode=y}setNearWinReelIds(y){this.nearWinReelIds=y}reset(){if(this.setPhase(bw.WI.Idle),"FeatureBuy"===this.spinMode){this.setSpinMode("Normal");const{mainSlotBetStake:y}=this.props.rootStore;y.setSpinBet(y.baseBet)}this.spinRequests={},this.grid=[],this.payLines=null,this.payout=0,this.totalScatterMultiplier=void 0,this.landedReelsWithScatters=[]}spin(y){this.isSpinButtonDisabled&&0===this.props.rootStore.autoPlay.roundsLeft||(this.allWinningSymbols.length=0,this.isQuickStop=!this.canSpin(),this.isQuickStop?(this.props.rootStore.abstractGame.log(EV.Vu(this.props.rootStore.mainSlotBetStake.baseBet)),this.props.rootStore.sound.triggerEvent(KD.P.QuickStop)):(this.setCurrentLine(0),this.areSymbolsSynced=!1,this.setPhase(bw.WI.Spinning),"AutoPlay"!==y&&this.props.rootStore.abstractGame.log(EV.pX({amount:this.props.rootStore.mainSlotBetStake.spinBet,spinId:this.props.rootStore.spinId.spinId,codes:Au({gamePhase:this.props.rootStore.gamePhase.phase,amount:this.props.rootStore.mainSlotBetStake.spinBet,spinMode:this.spinMode}),type:YV({gamePhase:this.props.rootStore.gamePhase.phase,trigger:y,isTurbo:this.props.rootStore.gamePhase.isTurboMode}),timeBeforeNextQualification:this.props.rootStore.qualificationTimer.timeRemainingMs}))))}onSpinStarted(){const y=this.props.rootStore.spinId.spinId;if(y&&!this.spinRequests[y]){this.props.rootStore.sound.triggerEvent(KD.P.SpinStart),this.clearLandedReelsWithScatters(),this.spinRequests[y]=!0;const p=this.props.rootStore;Iu(p.transport,(L={spinId:y,betTags:Ku(p.abstractGame),betAmount:p.mainSlotBetStake.baseBet,spinMode:this.spinMode},{type:hu.Spin,payload:L}))}var L}get minSpinTime(){return this.props.rootStore.gamePhase.isTurboModeEnabledForSpin?this.props.rootStore.settings.turboSpinMainSlotDuration:this.props.rootStore.settings.minSpinMainSlotTime}processError(){this.props.rootStore.gamePhase.qualified||this.setPhase(bw.WI.Error),this.spinRequests={}}get currentWinLine(){var y;if(null!==this.payLines&&0!==this.payLines.length)return null===(y=this.payLines[this.currentLine])||void 0===y?void 0:y.payline}isSymbolInWinSequence(y,L){const p=hd(this.props.rootStore);return this.allWinningSymbols.some((N=>{var t;return N.symbol===y&&N.reel===L.reelIndex&&N.index===(null===(t=L.symbol)||void 0===t?void 0:t.landingPosition.symbolIndex)&&(p||N.currentLine===this.currentLine)}))}setLandedReelWithScatter(y){this.landedReelsWithScatters=[...this.landedReelsWithScatters,y]}clearLandedReelsWithScatters(){this.landedReelsWithScatters=[]}setAreSymbolsSynced(y){this.areSymbolsSynced=y}get showResult(){return this.areSymbolsSynced&&this.phase===bw.WI.Result}canSpin(){return(this.phase===bw.WI.Idle||this.phase===bw.WI.Result)&&this.isInScreen}get canPlaceBet(){const{gamePhase:y,denominations:L,xxxtremeSpin:p,abstractGame:N}=this.props.rootStore;return!(!this.canSpin()&&this.isQuickStop||!this.visible||this.isInsufficientBalanceForSpin||L.phase!==Xx.Idle||y.qualified&&this.phase===bw.WI.Result||"FeatureBuy"===this.spinMode&&y.isQualificationSpinInProgress||p.isDrawerOpen||void 0!==N.currentPopup)}setPhase(y){this.props.rootStore.gamePhase.setMainSlotPhase(y)}get phase(){return this.props.rootStore.gamePhase.mainSlotPhase}getWinningSymbols(){var y;const L=[];return 0===this.grid.length?(window.console.error(`Error at getWinningSymbols, grid is empty`),L):(null===(y=this.payLines)||void 0===y||y.forEach(((y,p)=>{const N=y.length;y.payline.forEach(((y,t)=>{const j=this.grid[t];(null==j?void 0:j[y])?t<N&&L.push({symbol:this.grid[t][y],reel:t,index:y,currentLine:p}):window.console.error(`Error at getWinningSymbols, not found reel by index ${t}`,this.grid)}))})),L)}}function nu(y){let L=!1;return O.mJ((()=>({isMainSlotPhase:y.mainSlot.visible,isRestoring:y.restore.isRestoring,triggerEvent:y.sound.triggerEvent})),(({isMainSlotPhase:y,isRestoring:p,triggerEvent:N})=>{p?L=!0:L&&y?N(KD.P.GameInitSlot):L=!1}),{fireImmediately:!0})}function vu(y){return O.mJ((()=>({mainSlotPhase:y.gamePhase.mainSlotPhase,nudgeReelIds:y.mainSlot.nudgeReelIds,scatterMultipliers:y.mainSlot.scatterMultipliers,spinMode:y.mainSlot.spinMode,gamePhase:y.gamePhase.phase})),(({mainSlotPhase:L,nudgeReelIds:p,scatterMultipliers:N,spinMode:t,gamePhase:j})=>{let z=[];if(L===bw.WI.Spinning&&(z=2===p.length?p:[]),L===bw.WI.ResponseReceived){const L="FeatureBuy"===t?[]:function(y,L){if(L.length<2)return[];const p=L.map((y=>y.reel));if(3===p.length){let L=0,N=p[2]+1,t=p;y.length?(N=XV.A(p,...y)[0]+1,t=y):L=p[1];const j=Array.from({length:N-L},((y,p)=>p+L));return XV.A(j,...t)}const N=Array.from({length:Jx.vy},((y,L)=>L));if(y.length)return XV.A(N,...y);const t=Math.max(...p);if(t<Jx.vy-1){const y=Jx.vy-t-1;return N.slice(-y)}return[]}(z,N);y.mainSlot.setNearWinReelIds(L),z.length&&(z=[])}j!==bD.Q.MainSlot&&(y.mainSlot.setNearWinReelIds([]),z=[])}))}class eu{constructor(y){this.props=y,this.phase=Nw.lj.Idle,this.isInScreen=!1,this.dropZone=void 0,this.landZone=void 0,this.commonMultipliers=Nw.G7,this.playerMultipliers=Nw.G7,O.Gn(this,{isInScreen:O.sH,playerMultipliers:O.sH,commonMultipliers:O.sH,dropZone:O.sH,landZone:O.sH,phase:O.sH,visible:O.EW,shouldShowCommonMultipliers:O.sH,setPhase:O.XI,setCommonMultipliers:O.XI,setPlayerMultipliers:O.XI,setDropZone:O.XI,setLandZone:O.XI,reset:O.XI,setIsInScreen:O.XI,addDouble:O.XI,resetCommonMultipliers:O.XI})}get visible(){return this.props.rootStore.gamePhase.phase===bD.Q.Pachinko}setPhase(y){this.phase=y}shouldShowCommonMultipliers(){return this.phase===Nw.lj.ShowCommonMultipliers}setCommonMultipliers(y){this.commonMultipliers=y}addDouble(y){this.setPlayerMultipliers(y)}setPlayerMultipliers(y){this.playerMultipliers=y}setDropZone(y){this.dropZone=y}setLandZone(y){this.landZone=y}reset(){this.resetCommonMultipliers(),this.setPlayerMultipliers(Nw.G7),this.setDropZone(void 0),this.setLandZone(void 0),this.setPhase(Nw.lj.Idle),this.setIsInScreen(!1)}setIsInScreen(y){this.isInScreen=y}resetCommonMultipliers(){this.commonMultipliers=Nw.G7}}class Zu{constructor(){this.payouts=void 0,this.paylineCombinations=[],O.Gn(this,{payouts:O.sH,paylineCombinations:O.sH,setPayouts:O.XI,setPaylineCombinations:O.XI})}setPayouts(y){this.payouts=y}setPaylineCombinations(y){this.paylineCombinations=y}}const yS=3e3;class LS{constructor(y){this.props=y,this.isAnimating=!1,this.phase=LV.None,O.Gn(this,{transitionToTopUp:O.XI.bound,transitionToPachinko:O.XI.bound,setIsAnimating:O.XI.bound,setTransitionPhase:O.XI.bound,isTransitionToTopUp:O.EW,isTransitionToPachinko:O.EW,isAnimating:O.sH,isTransitionToMain:O.EW,phase:O.sH,reset:O.XI.bound})}transitionToTopUp(){const{gamePhase:y,settings:L,timeout:p,mainSlot:N,abstractGame:t}=this.props.rootStore;y.mainSlotPhase===bw.WI.Result&&y.phase===bD.Q.MainSlot&&(this.setTransitionPhase(LV.TransitionToTopUp),y.setScattersPhase(Di.ToCenter),p.set("ScatterParking",(()=>{y.setScattersPhase(Di.Parking),p.set("TopUpTransition",(()=>{this.setTransitionPhase(LV.TransitionToTopUp),t.winnersList.hide(),N.setPayLines(null),y.setPhase(bD.Q.TopUpSlot),this.props.rootStore.timeout.clear("PopupScatter"),this.props.rootStore.mainSlot.clearLandedReelsWithScatters()}),L.animationsEnabled?1e3*ii.parkingAnimationDuration:0)}),yS))}transitionToMain(){const{gamePhase:y}=this.props.rootStore;y.phase===bD.Q.GameResult&&(this.setTransitionPhase(LV.TransitionToMain),y.setPhase(bD.Q.MainSlot))}get isTransitionToTopUp(){return this.phase===LV.TransitionToTopUp}get isTransitionToMain(){return this.phase===LV.TransitionToMain}get isTransitionToPachinko(){return this.phase===LV.TransitionToPachinko}setIsAnimating(y){this.isAnimating=y}setTransitionPhase(y){this.phase=y}transitionToPachinko(){const{gamePhase:y}=this.props.rootStore;y.phase===bD.Q.MainSlot&&y.setScattersPhase(Di.Parking),y.phase!==bD.Q.MainSlot&&y.phase!==bD.Q.TopUpSlot||(this.setTransitionPhase(LV.TransitionToPachinko),y.proceedToPachinkoPhase())}reset(){this.props.rootStore.timeout.clearAll(),this.isAnimating=!1,this.phase=LV.None}}var pS=p(757062);const NS=2e3;function tS(y,L){return y%L||L}const jS=3e3;class zS{constructor(y){this.props=y,this.running=!1,this.timeRemainingMs=0,this.totalQualificationTime=0,this.showInfinityTimer=!0,this.areBetsOpen=!1,this.step=100,this.tickTimer=y=>{this.timeoutId=window.setTimeout(O.XI((()=>{var y;const L=(p=this.finishTime||0,Math.max(0,p-Date.now()));var p;this.timeRemainingMs=L,L<1e3&&(this.areBetsOpen=!1),(null===(y=this.props.rootStore.autoTestStore)||void 0===y?void 0:y.isAnimationsDisabled)||(L>0?this.tickTimer(tS(L,this.step)):(this.stopTimer(),this.visible&&!this.infiniteTimeoutId&&(this.infiniteTimeoutId=window.setTimeout(O.XI((()=>{this.props.rootStore.sound.triggerEvent(KD.P.TopUpCountDownReset),this.infiniteTimeoutId=void 0})),jS))))})),y)},O.Gn(this,{running:O.sH,timeRemainingSec:O.EW,timeRemainingMs:O.sH,startTimer:O.XI,stopTimer:O.XI,visible:O.EW,areBetsOpen:O.sH,setAreBetsOpen:O.XI,showInfinityTimer:O.sH,totalQualificationTime:O.sH})}get visible(){return this.props.rootStore.gamePhase.phase===bD.Q.TopUpSlot&&this.props.rootStore.topUpSlot.isInScreen&&this.props.rootStore.gamePhase.topUpSlotPhase!==bw.WI.Transition&&!this.props.rootStore.gamePhase.isPlayerTransferredToBonus&&!this.props.rootStore.topUpSlot.isLastSpinInProgress}startTimer(y,L=!1){this.finishTime=Date.now()+y;const p=Math.floor(pS.rv(y));this.totalQualificationTime=p,this.infiniteTimeoutId&&(window.clearTimeout(this.infiniteTimeoutId),this.infiniteTimeoutId=void 0),this.openBetsDelayId&&(window.clearTimeout(this.openBetsDelayId),this.openBetsDelayId=void 0),this.visible&&this.props.rootStore.gamePhase.hasDoubleAppeared&&p>KD.d&&pS.rv(this.timeRemainingMs)<=KD.d&&this.props.rootStore.sound.triggerEvent(KD.P.TopUpCountDownReset),p>0?(this.running=!0,this.timeRemainingMs=y,this.tickTimer(tS(y,this.step)),this.setAreBetsOpen(!0,L)):this.props.rootStore.settings.disableTopUpWithoutTimer||this.setAreBetsOpen(!0,L)}stopTimer(){this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeRemainingMs=0,this.running=!1,this.props.rootStore.settings.disableTopUpWithoutTimer?this.setAreBetsOpen(!1):this.setAreBetsOpen(!0,!0)}setAreBetsOpen(y,L=!1){this.openBetsDelayId=setTimeout((()=>{O.h5((()=>{this.areBetsOpen=y,this.showInfinityTimer=!this.running}))}),L?NS:0)}get timeRemainingSec(){const{continueTopUpPopup:y,settings:L}=this.props.rootStore;return this.showInfinityTimer?0:Math.ceil(pS.rv(void 0!==y.continueTopUpId?this.timeRemainingMs-L.softCloseQualificationDuration:this.timeRemainingMs))}dispose(){this.stopTimer(),window.clearTimeout(this.infiniteTimeoutId),window.clearTimeout(this.openBetsDelayId)}}class OS{constructor(y){this.props=y,this.totalPlayers=0,O.Gn(this,{totalPlayers:O.sH,visible:O.EW,setTotalPlayerCount:O.XI})}get visible(){const{gamePhase:y}=this.props.rootStore,L=[bw.WI.StopSpinning,bw.WI.ResponseReceived].includes(y.mainSlotPhase);return this.totalPlayers>0&&(L||y.phase===bD.Q.MainSlot)}setTotalPlayerCount(y){this.totalPlayers=y}}class hS{constructor(){this.references={},O.Gn(this,{references:O.sH.shallow,setReference:O.XI,dispose:O.XI})}getReference(y){var L;return null!==(L=this.references[y])&&void 0!==L?L:null}setReference(y,L){this.references[y]=L}dispose(){this.references={}}}class mS{constructor(y){this.props=y,this.isRestoring=!0,this.isRestoringPachinko=!1,this.skippedAnimations=[],O.Gn(this,{isRestoring:O.sH,setIsRestoring:O.XI,isRestoringPachinko:O.sH,addSkippedAnimations:O.XI})}setIsRestoring(y){this.isRestoring=y}setIsRestoringPachinko(y){this.isRestoringPachinko=y}resetSkippedAnimation(){this.skippedAnimations.length=0}addSkippedAnimations(y){y.forEach((y=>{this.skippedAnimations.includes(y)||this.skippedAnimations.push(y)}))}getSkippedAnimations(){return this.skippedAnimations}calculateSkippedPachinkoAnimations(y){const{settings:L}=this.props.rootStore,p=[[L.multipliersDistributionDelay+L.showScatterDelay,["glowParallel"]],[L.hideScatterDelay+L.applyTopUpDelay,["addTopUp","glowSequence"]],[L.showDoubleEventDelay+L.doubleMultipliersDelay,["fadeOut","fadeIn","removeTopUp"]]];let N=0;for(const[L,t]of p)N+=L,N<=y&&this.addSkippedAnimations(t)}}var kS=p(57781);const _S=[0,0],WS=3200,gS=1500,CS=1e3,QS=2e3,TS=2e3,iS=3e3,DS=8e3,wS=6e3,xS=1e3,dS=2e3,oS=7e3,US=1500;class IS{constructor(y){this.props=y,this.animationsEnabled=!0,this.betLimitsForGroup=y=>{switch(y){case aV.Sr.Qualification:return _S;case aV.Sr.NormalSpin:case aV.Sr.XXXtremeSpin:case aV.Sr.FeatureBuy:return this.qualificationBetLimit[y];case aV.Sr.TopUp:return this.topUpBetLimit}},O.Gn(this,{animationsEnabled:O.sH,enableAnimations:O.XI}),this.qualificationBetLimit={[aV.Sr.NormalSpin]:[this.mainMinimumBetLimit,Math.min(this.mainMaximumBetLimit,this.tableBetMaxLimit,this.spinBetMaxLimit)],[aV.Sr.XXXtremeSpin]:[this.mainMinimumBetLimit*bw.bG,Math.min(this.mainMaximumBetLimit*bw.bG,this.tableBetMaxLimit,this.spinBetMaxLimit,this.maxAvailableXXXtremeBetStake)],[aV.Sr.FeatureBuy]:[this.mainMinimumBetLimit*bw.ue,Math.min(this.mainMaximumBetLimit*bw.ue,this.tableBetMaxLimit,this.spinBetMaxLimit,this.maxAvailableFeatureBuyBetStake)]},this.topUpBetLimit=[this.mainMinimumBetLimit,Math.min(this.topUpMaximumBetLimit,this.tableBetMaxLimit-this.mainMinimumBetLimit,this.spinBetMaxLimit)]}get availableBetStakes(){return this.props.gameSettings.getChipAmounts()}get defaultBetStake(){var y;return null!==(y=this.props.gameSettings.getDefaultChip())&&void 0!==y?y:1}get currencyDecimals(){return this.props.gameSettings.getCurrencyDecimals()}get currencySymbol(){return this.props.gameSettings.getCurrencySymbol()}get showDecimalsForOneMillionBalance(){return this.props.gameSettings.showDecimalsForOneMillionBalance()}get tableBetMaxLimit(){return kS.R(this.props.gameSettings.rawConfig.table_bet_max_limit,aV.iw)}get spinBetMaxLimit(){return kS.R(this.props.gameSettings.rawConfig.spin_bet_max_limit,aV.Oi)}get mainMinimumBetLimit(){return kS.R(this.props.gameSettings.rawConfig.main_bet_min_limit,0)}get mainMaximumBetLimit(){return kS.R(this.props.gameSettings.rawConfig.main_bet_max_limit,0)}get topUpMaximumBetLimit(){return kS.R(this.props.gameSettings.rawConfig.top_up_bet_max_limit,0)}get maxTopUpBetMultiplier(){return kS.R(this.props.gameSettings.rawConfig.max_top_up_bet_multiplier,aV.CP)}get payoutLimit(){return kS.R(this.props.gameSettings.rawConfig.payout_limit,0)}get slamStopEnabled(){return"true"===this.props.gameSettings.rawConfig.slam_stop}get turboModeAllowed(){return this.props.gameSettings.turboSpinEnabled}get turboSpinMainSlotDuration(){return kS.R(this.props.gameSettings.rawConfig.main_turbo_spin_duration,100)}get turboSpinTopUpSlotDuration(){return kS.R(this.props.gameSettings.rawConfig.topup_turbo_spin_duration,100)}get minSpinMainSlotTime(){return kS.R(this.props.gameSettings.rawConfig.main_slot_spin_duration,100)}get minSpinTopUpSlotTime(){return kS.R(this.props.gameSettings.rawConfig.topup_slot_spin_duration,100)}get autoplayEnabled(){return this.props.gameSettings.autoplayApiEnabled()}get enableXXXtremeSpins(){var y;return"true"===(null!==(y=this.props.gameSettings.rawConfig.enable_XXXtreme_spins)&&void 0!==y?y:"true")}get enableFeatureBuy(){var y;return"true"===(null!==(y=this.props.gameSettings.rawConfig.enable_feature_buy)&&void 0!==y?y:"true")}get enableUnreal(){var y;return"true"===(null!==(y=this.props.gameSettings.rawConfig.enable_unreal)&&void 0!==y?y:"true")}get disableCameraViewSwitching(){var y,L,p;return"true"===(null!==(p=null===(L=null===(y=this.props.gameSettings)||void 0===y?void 0:y.rawConfig)||void 0===L?void 0:L.disable_camera_view_switching)&&void 0!==p?p:"false")}get hideWinOnLowCelebration(){var y;return"true"===(null!==(y=this.props.gameSettings.rawConfig.hide_you_win_on_low_celebration)&&void 0!==y?y:"false")}get pauseBetweenSpinAndResult(){return kS.R(this.props.gameSettings.rawConfig.pause_between_spin_and_result,500)}get autoPlaySpinDelay(){return kS.R(this.props.gameSettings.rawConfig.autoplay_spin_delay,500)}get multipliersDistributionDelay(){return kS.R(this.props.gameSettings.rawConfig.multipliers_distribution_delay,this.enableUnreal?0?0:wS:0)}get singleMultiplierGroupDelay(){return kS.R(this.props.gameSettings.rawConfig.single_multiplier_group_delay,xS)}get winningAnimationDelay(){return kS.R(this.props.gameSettings.rawConfig.winning_animation_delay,DS)}get showScatterDelay(){return kS.R(this.props.gameSettings.rawConfig.show_scatter_delay,WS)}get hideCageDelay(){return kS.R(this.props.gameSettings.rawConfig.hide_cage_delay,0?0:dS)/1e3}get hideCageDelayAfterDouble(){return kS.R(this.props.gameSettings.rawConfig.hide_cage_delay_after_double,0?0:oS)/1e3}get hideScatterDelay(){return kS.R(this.props.gameSettings.rawConfig.hide_scatter_delay,gS)}get dropZoomDelay(){return kS.R(this.props.gameSettings.rawConfig.drop_zoom_delay,US)}get applyTopUpDelay(){return kS.R(this.props.gameSettings.rawConfig.apply_topup_delay,CS)}get showDoubleEventDelay(){return kS.R(this.props.gameSettings.rawConfig.show_double_event_delay,this.enableUnreal?2500:0)}get pushDoublesDelay(){return kS.R(this.props.gameSettings.rawConfig.push_doubles_delay,2e3)}get removeTopUpFromPachinkoDelay(){return kS.R(this.props.gameSettings.rawConfig.remove_topup_from_pachinko_delay,QS)}get doubleMultipliersDelay(){return kS.R(this.props.gameSettings.rawConfig.double_multipliers_delay,TS)}get showDoubleDropResultDelay(){return kS.R(this.props.gameSettings.rawConfig.show_double_drop_result_delay,this.enableUnreal?iS:0)}get topUpAnimationDuration(){return kS.R(this.props.gameSettings.rawConfig.topup_animation_duration,.3)}get doubleAnimationDuration(){return kS.R(this.props.gameSettings.rawConfig.double_animation_duration,.2)}get glowAnimationDuration(){return kS.R(this.props.gameSettings.rawConfig.glow_animation_duration,.2)}get fadeInAnimationDuration(){return kS.R(this.props.gameSettings.rawConfig.fadein_animation_duration,1)}get bonusWinDelay(){return kS.R(this.props.gameSettings.rawConfig.bonus_win_delay,4e3)}get featureScreenShowLimit(){return kS.R(this.props.gameSettings.rawConfig.feature_screen_show_limit,-1)}get bubbleEnabled(){var y;return"true"===(null!==(y=this.props.gameSettings.rawConfig.bubble_enabled)&&void 0!==y?y:"false")}get validateMessages(){var y;return"true"===(null!==(y=this.props.gameSettings.rawConfig.enable_events_validation)&&void 0!==y?y:"false")}get displayFakePachinkoWall(){var y;return"true"===(null!==(y=this.props.gameSettings.rawConfig.display_fake_pachinko_wall)&&void 0!==y?y:"false")}get displaySplashScreenOnLoad(){var y;return"true"===(null!==(y=this.props.gameSettings.rawConfig.display_splash_screen_on_load)&&void 0!==y?y:"false")}get disableTopUpWithoutTimer(){var y;return"true"===(null!==(y=this.props.gameSettings.rawConfig.disable_top_up_without_timer)&&void 0!==y?y:"false")}get tableName(){return this.props.gameSettings.getTableName()}get tableBetLimits(){return[this.props.gameSettings.minTableLimit(),this.props.gameSettings.maxTableLimit()]}enableAnimations(y){this.animationsEnabled=y}get videoBlurForQualification(){return kS.R(this.props.gameSettings.rawConfig.qualification_video_blur,5)}get gameResultShowDuration(){return kS.R(this.props.gameSettings.rawConfig.game_result_show_duration,3e3)}get softCloseQualificationDuration(){return kS.R(this.props.gameSettings.rawConfig.soft_close_qualification,5e3)}get bonusGameInterval(){return"slow"===this.props.rootStore.gamePhase.gameRoundDuration?kS.R(this.props.gameSettings.rawConfig["bonus_game_interval.slow"],9e4):kS.R(this.props.gameSettings.rawConfig.bonus_game_interval,6e4)}get maxAvailableXXXtremeBetStake(){return Math.max(...this.availableBetStakes.map((y=>y*bw.bG)).filter((y=>y<=this.tableBetMaxLimit)))}get maxAvailableFeatureBuyBetStake(){return Math.max(...this.availableBetStakes.map((y=>y*bw.ue)).filter((y=>y<=this.tableBetMaxLimit)))}}class VS{constructor(){this.isTopUpSlotShrinkFit=!1,this.isMainSlotShrinkFit=!1,this.isMainSlotShrinkFit=!1,this.transitionEndXPosition=0,this.mainSlotDimensions={x:0,y:0,width:0,height:0},this.topUpSlotDimensions={x:0,y:0,width:0,height:0},this.scatterDimensions={x:0,y:0,width:0,height:0},O.Gn(this,{transitionEndXPosition:O.sH,setTransitionEndXPosition:O.XI,mainSlotDimensions:O.sH,topUpSlotDimensions:O.sH,scatterDimensions:O.sH,setMainSlotDimensions:O.XI,setTopUpSlotDimensions:O.XI,setScatterDimensions:O.XI,isMainSlotShrinkFit:O.sH,isTopUpSlotShrinkFit:O.sH,setIsMainSlotShrinkFit:O.XI,setIsTopUpSlotShrinkFit:O.XI})}setMainSlotDimensions(y,L,p,N){this.mainSlotDimensions={x:y,y:L,width:p,height:N}}setTopUpSlotDimensions(y,L,p,N){this.topUpSlotDimensions={x:y,y:L,width:p,height:N}}setScatterDimensions(y,L,p,N){this.scatterDimensions={x:y,y:L,width:p,height:N}}setIsTopUpSlotShrinkFit(y){this.isTopUpSlotShrinkFit=y}setIsMainSlotShrinkFit(y){this.isMainSlotShrinkFit=y}setTransitionEndXPosition(y){this.transitionEndXPosition=y}}const FS=1.15,uS=15,SS=1.2,BS=50,RS=.017,YS=34;var ES=p(797635);class PS{constructor(y){this.props=y,O.Gn(this,{slotContainerRect:O.EW,isSpinIntersectingBetStake:O.EW})}get isSpinIntersectingBetStake(){return this.slotContainerRect.visibleHeight<ES.U}get slotContainerRect(){const{reverseScale:y=1,width:L,height:p}=this.props.rootStore.abstractGame.gameDimensions,{isPortrait:N,isDesktop:t,isTablet:j}=this.props.rootStore.device,{phase:z}=this.props.rootStore.gamePhase;let O,h,m,k,_=FS,W=0,g=0,C=0,Q=0,T=FS;if(t?(T=.98,W=.55*L,g=L-W-L*RS,C=.06*p,Q=p):j?(T=.68,Q=p,W=1.5*Q,g=L-p-.06*L-.26*p,C=50,Q=p):N&&(T=1.384,W=L,g=.5*(L-W),Q=W,C=p-Q-.35*p,C<30&&(C=30,Q=p-C,W=.85*(p-C),g=.5*(L-W))),t)_=.98,O=.55*L,h=L-O-L*RS,m=.06*p,k=p;else if(j)_=1.035,m=BS,k=p,O=k,h=L-O-.06*L;else if(N){const y=p-L-.4*p,N=p-L-.35*p;this.props.rootStore.slotLayout.setIsTopUpSlotShrinkFit(y<10),this.props.rootStore.slotLayout.setIsMainSlotShrinkFit(N<30),z===bD.Q.Pachinko||z===bD.Q.GameResult?(_=1.5,O=L,h=.5*(L-O),k=O,m=p-k-.4*p):z===bD.Q.TopUpSlot?(_=1.5,O=L,h=.5*(L-O),k=O,m=p-k-.4*p,m<10&&(_=1,m=10,k=p-m,O=.85*(p-m),h=.5*(L-O))):(_=1.384,O=L,h=.5*(L-O),k=O,m=p-k-.35*p,m<30&&(m=30,k=p-m,O=.85*(p-m),h=.5*(L-O)))}else m=uS,k=p-uS,O=k*SS,h=.5*(L-O)+YS;return{x:h/y,y:m/y,w:O/y,h:O*_/y,visibleHeight:k/y,xS:g/y,yS:C/y,wS:W/y,hS:W*T/y,visibleHeightS:Q/y}}}class lS{constructor(){this.spinId="",O.Gn(this,{spinId:O.sH,setSpinId:O.XI})}setSpinId(y){this.spinId=y}}const MS=3e3;class fS{constructor(y){this.props=y,this.displayMessage=void 0,O.Gn(this,{message:O.EW,displayMessage:O.sH,showMessage:O.XI})}get message(){return this.displayMessage}showMessage(y,L,p){const{timeout:N}=this.props.rootStore;this.displayMessage=y,N.set("StatusMessage",(()=>{O.h5((()=>{this.displayMessage=void 0,null==L||L()}))}),null!=p?p:MS)}}class aS{constructor(){this.timeoutMap={}}set(y,L,p){this.clear(y),this.timeoutMap[y]=window.setTimeout(L,p)}clear(y){this.timeoutMap[y]&&window.clearTimeout(this.timeoutMap[y]),this.timeoutMap[y]=void 0}clearAll(){for(const y of Object.values(this.timeoutMap))y&&window.clearTimeout(y);this.timeoutMap={}}dispose(){this.clearAll()}}var HS=p(882979);class XS{constructor(y){this.props=y,this.rows=4,this.columns=4,this.outcome=[],this.isInScreen=!1,this.multipliers=Nw.G7,this.multiplierDestinations=[],this.isQuickStop=!1,this.isMultipliersAnimationCompleted=!0,this.grid=[],this.reelStrips=[],this.symbolsMap=bw._u,this.isLastSpinInProgress=!1,this.isSlotReady=!1,this.multiplierDestinationsTemporary=[],this.isWaitingForResponse=!1,this.isBigMultipliers=!1,this.spinRequests={},O.Gn(this,{isInScreen:O.sH,outcome:O.sH,isQuickStop:O.sH,multipliers:O.sH,multiplierDestinations:O.sH,visible:O.EW,setIsInScreen:O.XI,setMultipliersDestinations:O.XI,setMultipliers:O.XI,resetMultipliers:O.XI,reset:O.XI,onSpinEnd:O.XI.bound,spin:O.XI.bound,setOutcome:O.XI.bound,isSpinButtonDisabled:O.EW,isTurboButtonDisabled:O.EW,onMultipliersAnimationComplete:O.XI.bound,onMultipliersAnimationStart:O.XI.bound,isMultipliersAnimationCompleted:O.sH,isSlotReady:O.sH,setIsSlotReady:O.XI,generateReels:O.XI,grid:O.sH,reelStrips:O.sH,onSpinStarted:O.XI,isInsufficientBalanceForSpin:O.EW,processError:O.XI,isBetValid:O.EW,symbolsMap:O.sH,setSymbolsMap:O.XI,setIsLastSpinInProgress:O.XI,isLastSpinInProgress:O.sH})}get isSpinButtonDisabled(){const{autoPlay:y,settings:L}=this.props.rootStore;return!this.canPlaceBet||y.roundsLeft>0||!L.slamStopEnabled&&this.phase!==bw.WI.Idle&&this.phase!==bw.WI.Result}get isTurboButtonDisabled(){return!this.canPlaceBet}get reels(){return this.columns*this.rows}spin(y){this.isSpinButtonDisabled&&0===this.props.rootStore.autoPlay.roundsLeft||(this.isQuickStop=!this.canSpin(),this.isQuickStop?(this.props.rootStore.abstractGame.log(EV.Vu(this.props.rootStore.topUpSlotBetStake.qualificationBet)),this.props.rootStore.sound.triggerEvent(KD.P.QuickStop)):(this.setPhase(bw.WI.Spinning),this.isWaitingForResponse=!0,"AutoPlay"!==y&&this.props.rootStore.abstractGame.log(EV.pX({spinId:this.props.rootStore.spinId.spinId,amount:this.props.rootStore.topUpSlotBetStake.spinBet,codes:Au({gamePhase:this.props.rootStore.gamePhase.phase,amount:this.props.rootStore.topUpSlotBetStake.spinBet}),type:YV({gamePhase:this.props.rootStore.gamePhase.phase,trigger:y,isTurbo:this.props.rootStore.gamePhase.isTurboMode}),timeBeforeNextQualification:this.props.rootStore.qualificationTimer.timeRemainingMs}))))}onSpinStarted(){const y=this.props.rootStore.spinId.spinId;if(y&&!this.spinRequests[y]){this.props.rootStore.sound.triggerEvent(KD.P.TopUpSpinStart),this.multiplierDestinationsTemporary=[],this.setMultipliersDestinations([]),this.spinRequests[y]=!0,this.isMultipliersAnimationCompleted=!1;const p=this.props.rootStore;Iu(p.transport,(L={spinId:y,betTags:Ku(p.abstractGame),playerGameId:p.abstractGame.playerGameId,betAmount:p.topUpSlotBetStake.spinBet},{type:hu.TopUp,payload:L}))}var L}onSpinEnd(){this.isLastSpinInProgress=!1,this.phase!==bw.WI.Error?(this.setPhase(bw.WI.Result),this.setMultipliersDestinations(this.multiplierDestinationsTemporary),this.isMultipliersAnimationCompleted=0===this.multiplierDestinationsTemporary.length,this.props.rootStore.sound.triggerEvent(KD.P.TopUpSpinComplete)):this.setPhase(bw.WI.Idle)}async setOutcome(y){const L=this.props.rootStore.restore.isRestoring&&0===HS.A(y);this.grid=0===y.length||L?[0,0,0,3,5,0,0,0,0,0,0,0,0,0,2,0]:y,this.outcome=this.grid.map((y=>{var L;return[null!==(L=this.symbolsMap[y])&&void 0!==L?L:0]})),this.isBigMultipliers=HS.A(Object.values(this.grid))>bw.dw}get visible(){const{gamePhase:y}=this.props.rootStore;return y.phase===bD.Q.TopUpSlot}setIsInScreen(y){this.isInScreen=y}setIsSlotReady(y){this.isSlotReady=y}setMultipliers(y,L){this.multipliers=y,this.multiplierDestinationsTemporary=L,this.isWaitingForResponse=!1}resetMultipliers(){this.multipliers=Nw.G7,this.isBigMultipliers=!1,this.multiplierDestinationsTemporary=[]}setMultipliersDestinations(y){this.multiplierDestinations=y}async onMultipliersAnimationComplete(){this.isWaitingForResponse||(this.props.rootStore.sound.triggerEvent(KD.P.TopUpMultiAdded,this.isBigMultipliers?"High":"Low"),this.phase===bw.WI.Result&&(this.isMultipliersAnimationCompleted=!0))}onMultipliersAnimationStart(){this.isWaitingForResponse||this.props.rootStore.sound.triggerEvent(KD.P.TopUpMultiFly,this.isBigMultipliers?"High":"Low")}reset(){this.resetMultipliers(),this.setMultipliersDestinations([]),this.setPhase(bw.WI.Idle),this.setIsInScreen(!1),this.spinRequests={},this.isMultipliersAnimationCompleted=!0,this.isLastSpinInProgress=!1,this.props.rootStore.continueTopUpPopup.reset()}get minSpinTime(){return this.props.rootStore.gamePhase.isTurboModeEnabledForSpin?this.props.rootStore.settings.turboSpinTopUpSlotDuration:this.props.rootStore.settings.minSpinTopUpSlotTime}generateReels(y){const L=[],p={};for(const L of Object.keys(y))p[bw._u[parseInt(L,10)]]=y[parseInt(L,10)];for(let y=0;y<this.reels;y++)L.push(gu({distribution:[p]})[0].map((y=>parseInt(y,10))));this.reelStrips=L}processError(){this.multiplierDestinationsTemporary=[],this.setMultipliersDestinations([]),this.setPhase(bw.WI.Error),this.spinRequests={},this.isMultipliersAnimationCompleted=!0}get isTopUpClosed(){return!this.props.rootStore.qualificationTimer.areBetsOpen||this.phase===bw.WI.Transition||this.props.rootStore.gamePhase.isPlayerTransferredToBonus||this.isLastSpinInProgress}get isInsufficientBalanceForSpin(){const{abstractGame:y,topUpSlotBetStake:L}=this.props.rootStore;return this.phase!==bw.WI.Spinning&&(y.balance<L.spinBet||y.isLowBalance)}get isBetValid(){return!this.props.rootStore.topUpSlotBetStake.isMaxPayoutReached&&!MF.N(this.props.rootStore)}setSymbolsMap(y){const L={},p=Object.keys(bw._u).map((y=>parseInt(y,10)));for(const N of p)L[N*y]=bw._u[N];this.symbolsMap={...L}}setIsLastSpinInProgress(y){this.isLastSpinInProgress=y}get canPlaceBet(){return!(!this.canSpin()&&this.isQuickStop||!this.visible||this.isInsufficientBalanceForSpin||this.isTopUpClosed||!this.isBetValid||void 0!==this.props.rootStore.abstractGame.currentPopup)}setPhase(y){this.props.rootStore.gamePhase.setTopUpSlotPhase(y)}get phase(){return this.props.rootStore.gamePhase.topUpSlotPhase}canSpin(){return(this.phase===bw.WI.Idle||this.phase===bw.WI.Result)&&this.isInScreen}}var JS=p(341626);function rS(y,L,p=1){return{x:y.x*L.w/p+L.x,y:y.y*L.h/p+L.y,w:y.w*L.w/p,h:y.h*L.h/p}}const GS=Object.values(JS.V);class $S{constructor(y){this.props=y,O.Gn(this,{rects:O.EW})}get rects(){const y={};for(const L of GS)y[L]=rS(JS.R[L],this.props.rootStore.videoRect.rect,this.props.rootStore.abstractGame.gameDimensions.reverseScale);return y}}function qS(y){return O.mJ((()=>({translate:y.videoRect.translate,phase:y.pachinko.phase,gameDimensions:y.abstractGame.gameDimensions})),(({translate:L})=>{y.abstractGame.setTranslate(`${L[0]}px, ${L[1]}px`)}),{fireImmediately:!0})}const AS=.2;class sS{constructor(y){this.props=y,O.Gn(this,{scale:O.EW,rect:O.EW,isZoomed:O.EW})}get scale(){const{abstractGame:y,device:{layoutMode:L},gamePhase:p,slotRect:N}=this.props.rootStore;if("desktop"===L)return 1;const{width:t,height:j,boxHeight:z,boxWidth:O}=y.gameDimensions;if("tablet"===L)return p.phase===bD.Q.Pachinko?j/z:Math.max(t/O,j/z,1);let h=z/j;switch(p.phase){case bD.Q.MainSlot:case bD.Q.TopUpSlot:h=(N.slotContainerRect.y+N.slotContainerRect.visibleHeight*AS)/j;break;case bD.Q.Pachinko:case bD.Q.GameResult:h=.86,this.isZoomed&&(h=t/j*2)}return Math.max(1,j*h/z)}get rect(){const{boxWidth:y,boxHeight:L,width:p}=this.props.rootStore.abstractGame.gameDimensions;return{x:(p-y*this.scale)/2,y:0,w:y*this.scale,h:L*this.scale}}get isZoomed(){const{device:{layoutMode:y},pachinko:L,youWin:p}=this.props.rootStore;return!(L.phase!==Nw.lj.PuckDrop||"mobilePortrait"!==y||p.showGameResult||void 0!==L.landZone&&"double"===L.playerMultipliers[L.landZone])}get translate(){const{device:{layoutMode:y},gamePhase:L,abstractGame:p}=this.props.rootStore;if("tablet"===y)return[0,0];if((L.phase===bD.Q.Pachinko||L.phase===bD.Q.GameResult)&&"mobilePortrait"===y){const{width:y,height:L,boxHeight:t}=p.gameDimensions;if(this.isZoomed){const p=(N=y/L)>.78?15*N:N>.62?10*N:N>.55?5*N:0;return[-1,(L-t*this.scale)/this.scale-.03*L+p]}return[0,-5]}var N;return[kw.GB(-this.rect.x/this.scale,2),0]}}var cS;function KS(y){return O.mJ((()=>y.gamePhase.phase),(L=>{y.settings.disableCameraViewSwitching||(L===bD.Q.Pachinko||L===bD.Q.GameResult?y.videoStream.setGameVideoStream(cS.Pachinko):L===bD.Q.TopUpSlot?y.videoStream.setGameVideoStream(cS.TopUp):y.videoStream.setGameVideoStream(cS.Standard))}),{fireImmediately:!0})}(function(y){y[y["Standard"]=0]="Standard",y[y["TopUp"]=1]="TopUp",y[y["Pachinko"]=2]="Pachinko"})(cS||(cS={}));class bS{constructor(y){this.props=y,this.currentGameStream=cS.Standard,O.Gn(this,{setGameVideoStream:O.XI})}setGameVideoStream(y){this.currentGameStream!==y&&(this.props.rootStore.abstractGame.requestStreamById(y),this.currentGameStream=y)}}var nS=p(16023);class vS{constructor(y){this.props=y,this.isDrawerOpen=!1,this.xxxtremeSpinBetStakeIndex=0,this.featureBuySpinBetStakeIndex=0,this.drawerId="xxxtremeSpinDrawer",O.Gn(this,{isDrawerOpen:O.sH,xxxtremeSpinBetStakeIndex:O.sH,featureBuySpinBetStakeIndex:O.sH,setXXXtremeSpinBetStakeIndex:O.XI,setFeatureBuySpinBetStakeIndex:O.XI,toggle:O.XI,decreaseXXXtremeSpinBetStake:O.XI,increaseXXXtremeSpinBetStake:O.XI,decreaseFeatureBuyBetStake:O.XI,increaseFeatureBuyBetStake:O.XI,openDrawer:O.XI,closeDrawer:O.XI,canIncreaseXXXtremeStake:O.EW,canDecreaseXXXtremeStake:O.EW,canIncreaseFeatureBuyStake:O.EW,canDecreaseFeatureBuyStake:O.EW,isXXXtremeButtonActive:O.EW,isFeatureBuyButtonActive:O.EW,isActivateXXXtremeButtonDisabled:O.EW,isBalanceTooLowForXXXtremeSpin:O.EW})}setXXXtremeSpinBetStakeIndex(y){this.xxxtremeSpinBetStakeIndex=y}setFeatureBuySpinBetStakeIndex(y){this.featureBuySpinBetStakeIndex=y}toggle(y){const{abstractGame:L,mainSlot:p,mainSlotBetStake:N}=this.props.rootStore;p.isXXXtremeSpinsActivated?(L.log(EV.gJ({spinModeFrom:p.spinMode,spinModeTo:"Normal",baseBet:N.baseBet,totalBet:N.baseBet,status:"Deactivated"})),p.setSpinMode("Normal"),N.setSpinBet(N.baseBet)):this.openDrawer(y)}activate(){if(!this.isXXXtremeButtonActive)return;const{mainSlot:y,mainSlotBetStake:L}=this.props.rootStore;this.props.rootStore.timeout.set("XXXtremeActiveDelay",(()=>{const p=L.xxxtremeBetStakes[this.xxxtremeSpinBetStakeIndex];this.props.rootStore.abstractGame.log(EV.gJ({spinModeFrom:y.spinMode,spinModeTo:"XXXtreme",baseBet:p.denomination,totalBet:p.value,status:"Activated"})),y.setSpinMode("XXXtreme"),L.setSpinBet(p.value)}),this.isDrawerOpen?nS.O:0),this.closeDrawer()}onFeatureBuyClick(){if(!this.isFeatureBuyButtonActive)return;const{mainSlot:y,mainSlotBetStake:L}=this.props.rootStore;this.props.rootStore.timeout.set("XXXtremeActiveDelay",(()=>{const p=L.featureBuyBetStakes[this.featureBuySpinBetStakeIndex];this.props.rootStore.abstractGame.log(EV.gJ({spinModeFrom:y.spinMode,spinModeTo:"FeatureBuy",baseBet:p.denomination,totalBet:p.value,status:"Activated"})),y.setSpinMode("FeatureBuy"),L.setSpinBet(p.value),y.spin()}),this.isDrawerOpen?nS.O:0),this.closeDrawer()}decreaseXXXtremeSpinBetStake(){this.canDecreaseXXXtremeStake&&this.setXXXtremeSpinBetStakeIndex(this.xxxtremeSpinBetStakeIndex-1)}increaseXXXtremeSpinBetStake(){this.setXXXtremeSpinBetStakeIndex(this.xxxtremeSpinBetStakeIndex+1)}decreaseFeatureBuyBetStake(){this.canDecreaseFeatureBuyStake&&this.setFeatureBuySpinBetStakeIndex(this.featureBuySpinBetStakeIndex-1)}increaseFeatureBuyBetStake(){this.setFeatureBuySpinBetStakeIndex(this.featureBuySpinBetStakeIndex+1)}get canIncreaseXXXtremeStake(){var y,L;return null!==(L=null===(y=this.props.rootStore.mainSlotBetStake.xxxtremeBetStakes[this.xxxtremeSpinBetStakeIndex+1])||void 0===y?void 0:y.enabled)&&void 0!==L&&L}get canDecreaseXXXtremeStake(){return this.xxxtremeSpinBetStakeIndex>0}get canIncreaseFeatureBuyStake(){var y,L;return null!==(L=null===(y=this.props.rootStore.mainSlotBetStake.featureBuyBetStakes[this.featureBuySpinBetStakeIndex+1])||void 0===y?void 0:y.enabled)&&void 0!==L&&L}get canDecreaseFeatureBuyStake(){return this.featureBuySpinBetStakeIndex>0}get isXXXtremeButtonActive(){var y,L;return null!==(L=(null===(y=this.props.rootStore.mainSlotBetStake.xxxtremeBetStakes[this.xxxtremeSpinBetStakeIndex])||void 0===y?void 0:y.enabled)&&0===this.props.rootStore.autoPlay.roundsLeft)&&void 0!==L&&L}get isFeatureBuyButtonActive(){var y,L;return null!==(L=null===(y=this.props.rootStore.mainSlotBetStake.featureBuyBetStakes[this.featureBuySpinBetStakeIndex])||void 0===y?void 0:y.enabled)&&void 0!==L&&L}get isBalanceTooLowForXXXtremeSpin(){const{abstractGame:y,mainSlotBetStake:L}=this.props.rootStore;return!this.props.rootStore.mainSlot.isXXXtremeSpinsActivated&&y.balance<L.baseBet*bw.bG}get isActivateXXXtremeButtonDisabled(){const{gamePhase:y,phaseTransitions:L,autoPlay:p}=this.props.rootStore;return y.isQualificationSpinInProgress||y.isTransitionInProgress||L.isTransitionToTopUp||p.roundsLeft>0||this.isBalanceTooLowForXXXtremeSpin}openDrawer(y){const{abstractGame:L,device:p,gamePhase:N}=this.props.rootStore;if(!N.isQualificationSpinInProgress&&(this.props.rootStore.abstractGame.log(EV.Z6()),this.props.rootStore.sound.triggerEvent(KD.P.XxxtremeMenuOpened),this.setClosestXXXtremeSpinBetStakeIndex(),this.setClosestFeatureBuyBetStakeIndex(),this.isDrawerOpen=!0,!p.isDesktop&&void 0!==y)){const p=C.W0.useLiteMobileDrawer()?{useDrawerLite:!0,id:this.drawerId,component:y,props:{portrait:{snapPoints:["90%"]},landscape:{snapPoints:["90%"]},onCloseClick:()=>{this.isDrawerOpen=!1}}}:{useDrawerLite:!1,id:this.drawerId,component:y,props:{portrait:{openHeight:95,portraitCloseBreakpoint:90},landscape:{openWidth:95,landscapeCloseBreakpoint:90},onClose:()=>{this.isDrawerOpen=!1}}};L.openMobileDrawer(p)}}closeDrawer(){this.props.rootStore.abstractGame.hideTooltipsByType(bw.Ib.XXXtremeDialog),this.isDrawerOpen=!1,this.props.rootStore.device.isDesktop||this.props.rootStore.abstractGame.closeMobileDrawer(this.drawerId)}setClosestXXXtremeSpinBetStakeIndex(){const{mainSlotBetStake:y}=this.props.rootStore;let L=y.xxxtremeBetStakes.findIndex((L=>L.denomination===y.baseBet));for(;L>0&&!this.props.rootStore.mainSlotBetStake.xxxtremeBetStakes[L].enabled;)L--;this.xxxtremeSpinBetStakeIndex=L>0?L:0}setClosestFeatureBuyBetStakeIndex(){const{mainSlotBetStake:y}=this.props.rootStore;let L=y.featureBuyBetStakes.findIndex((L=>L.denomination===y.baseBet));for(;L>0&&!this.props.rootStore.mainSlotBetStake.featureBuyBetStakes[L].enabled;)L--;this.featureBuySpinBetStakeIndex=L>0?L:0}}class eS{constructor(y){this.props=y,this.payout=void 0,this.winLevel=void 0,this.showGameResult=!1,this.gameResultTimeoutId=0,this.setResultAmountTimeoutId=0,O.Gn(this,{payout:O.sH,winLevel:O.sH,reset:O.XI.bound,setPayout:O.XI.bound,showGameResult:O.sH})}reset(){this.payout=void 0,this.showGameResult=!1,clearTimeout(this.gameResultTimeoutId),clearTimeout(this.setResultAmountTimeoutId)}setPayout(y,L){this.payout=y,this.winLevel=L,this.props.rootStore.abstractGame.reserveBet(0),this.props.rootStore.abstractGame.resumeBalanceUpdate(),this.props.rootStore.gamePhase.phase!==bD.Q.MainSlot?this.gameResultTimeoutId=setTimeout((()=>{this.showGameResult=!0,this.setResultAmountTimeoutId=setTimeout((()=>{this.props.rootStore.abstractGame.setGameResultAmount(y)}),bw.i0)}),bw.z2):this.props.rootStore.abstractGame.setGameResultAmount(y)}dispose(){clearTimeout(this.gameResultTimeoutId),clearTimeout(this.setResultAmountTimeoutId)}}class ZS{constructor(y){this.props=y,this.messageValidator=null,this.transport=y.transport,this.transport.onConnected((()=>y.rootStore.restore.setIsRestoring(!0))),this.transport.incomingMessages.onValue((L=>{if(this.validateMessage(L),L.type===Ou.PachinkoMultipliers){Uu(y.rootStore,y.agApi.video.sync)({...L,type:Ou.FinishTopUp});const p=L.payload,N=y.agApi.video.sync,t=N.videoTimestamp>0;if(y.rootStore.restore.isRestoring&&L.timestamp&&p.timeSinceStarted&&t){const y=L.timestamp-N.getVideoTime(),t=6e3;y>t&&window.console.warn("videoDelay",{videoDelay:y,timestamp:L.timestamp,videoTime:N.getVideoTime()}),y>0&&(p.timeSinceStarted+=Math.min(y,t))}}Uu(y.rootStore,y.agApi.video.sync)(L)}))}getPersistentTransport(){return this.transport}sendMessage(y){this.transport.sendStandardMessage(null,y)}async validateMessage(y){if(!this.messageValidator){const y=!1||this.props.rootStore.settings.validateMessages;this.messageValidator=y?await async function(){const{schema:y}=await p.e(65595).then(p.bind(p,550444)),{default:L}=await p.e(80468).then(p.t.bind(p,935312,23)),N=new L;return function(L){const p=L.type,t=y.anyOf.find((y=>y.properties.type.enum[0]===p));if(void 0!==t){const y=t,j=N.compile(y);if(!j(L))return window.console.groupCollapsed(`%cUpdate type definition for event ${p}`,"color: red"),window.console.error("Data:",JSON.stringify(L,null,"    ")),window.console.error("Errors:",JSON.stringify(j.errors,null,"    ")),window.console.error("Schema:",JSON.stringify(y)),window.console.groupEnd(),!1}return!0}}():z.A}this.messageValidator(y)}}class yB{constructor(y){this.disposeBag=new HV.C,this.abstractGame=this.disposeBag.addDisposable(function(y){return new iF(y)}({agApi:y.agApi,rootStore:this})),this.autoPlay=this.disposeBag.addDisposable(function(y){return new IF(y)}({rootStore:this})),this.bubble=this.disposeBag.addDisposable(function(y){return new vF(y)}({rootStore:this})),this.timeout=this.disposeBag.addDisposable(new aS),this.settings=function(y){return new IS(y)}({gameSettings:y.settings,rootStore:this}),this.betStakeSelector=function(y){return new cF(y)}({rootStore:this}),this.denominations=function(y){return new Fu(y)}({rootStore:this}),this.device=function(y){return new uu(y)}({rootStore:this,DS:y.DS}),this.gamePhase=function(y){return new Mu(y)}({rootStore:this}),this.mainSlot=function(y){return new bu(y)}({rootStore:this}),this.mainSlotBetStake=function(y){return new EF(y)}({rootStore:this}),this.pachinko=function(y){return new eu(y)}({rootStore:this}),this.qualificationTimer=function(y){return new zS(y)}({rootStore:this}),this.statusMessage=function(y){return new fS(y)}({rootStore:this}),this.topUpSlotBetStake=function(y){return new sF(y)}({rootStore:this}),this.topUpSlot=function(y){return new XS(y)}({rootStore:this}),this.transport=function(y){return new ZS(y)}({agApi:y.agApi,transport:y.transport,rootStore:this}),this.xxxtremeSpin=function(y){return new vS(y)}({rootStore:this}),this.youWin=function(y){return new eS(y)}({rootStore:this}),this.qualifiedPlayers=function(y){return new OS(y)}({rootStore:this}),this.slotRect=function(y){return new PS(y)}({rootStore:this}),this.videoRect=function(y){return new sS(y)}({rootStore:this}),this.continueTopUpPopup=function(y){return new Vu(y)}({rootStore:this}),this.phaseTransitions=function(y){return new LS(y)}({rootStore:this}),this.slotLayout=new VS,this.sound=this.disposeBag.addDisposable(function(y){return new KV(y)}({rootStore:this})),this.restore=function(y){return new mS(y)}({rootStore:this}),this.spinId=new lS,this.payoutTable=new Zu,this.videoStream=function(y){return new bS(y)}({rootStore:this}),this.infoPanel=function(y){return new qu(y)}({rootStore:this}),this.references=this.disposeBag.addDisposable(new hS),this.gameTexture=this.disposeBag.addDisposable(new ru),this.videoElementRect=function(y){return new $S(y)}({rootStore:this}),this.setDefaultValues(),this.bindSideEffects(y.agApi)}dispose(){this.disposeBag.dispose()}setDefaultValues(){this.abstractGame.setDefaultValues()}bindSideEffects(y){var L;this.abstractGame.bindToAbstractGame(y),this.disposeBag.addDisposables([(L=this,O.mJ((()=>L.videoRect.scale),(y=>{L.abstractGame.setScale(y)}),{fireImmediately:!0})),qS(this),$F(this),rF(this),GF(this),RF(this),uF(this),SF(this),Eu(this),Ru(this),Su(this),Yu(this),bF(this),vu(this),oF(this),Gu(this),nu(this),XF(this),lu(this),KS(this),JF(this),PF(this),dF(this),...JV(this)])}}var LB=p(805596);const pB=Symbol("evo-ls2");function NB(y,L){LB.gB(pB,y,L)}var tB=p(264064),jB=p(484584),zB=p(805480);O.jK({enforceActions:"always",reactionRequiresObservable:!0,isolateGlobalState:!0});const OB=({AGRoot:y,AgRootContent:L,root:p,canvas:N})=>j.jsx(jB.A.Provider,{value:{canvas:N,root:p},children:j.jsxs(y,{children:[L?j.jsx(L,{}):null,j.jsx(tB.Y,{customStyles:{pointerEvents:"none"}})]})});function hB(y){var L,p,N;let t=z.A;const O=new Promise((y=>{t=y}));C.W0._init(y.params.setup,y.params.styles,{...y.params.tableConfig,branded_cloth_gradient_dark:"49,16,30",branded_cloth_gradient_light:"0,0,0"},null!==(L=y.deviceSupport)&&void 0!==L?L:_.DS);const D=C.W0._extend(fV.$),{dispose:w,transport:x,ag:d,getReactRoot:o}=function(y,L,p){const{params:N,lobby:t,deviceSupport:j=_.DS,mockBalanceManager:z,transports:O}=y;g.JL(N.i18nData,"ls2");const h=j.IS_DESKTOP,m="true"===L.rawConfig.is_phone_landscape_orientation_disabled?T.t.Landscape:null,C=h?{[Wu.LayoutType.ImmersiveV2]:{videoStream:zB.VideoPlaylist.Default,labelTranslationId:"view",isFooterGradientVisible:!1}}:{[Wu.LayoutType.PhoneV2]:{videoStream:zB.VideoPlaylist.Default,layoutButtonTypeOverride:"customizable",disabledPhoneOrientation:m}},i=(D={config:{layout:{initialLayout:h?Wu.LayoutType.ImmersiveV2:Wu.LayoutType.PhoneV2,layoutClassicIsHidden:!0,layouts:C,hasHelpSupportChatButton:!0,autoplay:{disableButton:"all",disableControls:"desktop",bubblePosition:{phone:{portrait:"TopRight",landscape:"LeftCenter"},tablet:{landscape:"TopRight"}}},isMobileTableInfoGradientHidden:!0},helpNamespace:"ls2",chipstack:{disabledComponents:"all"},tableLimits:{min:L.minTableLimit(),max:L.maxTableLimit()},minBalance:L.minTableLimit(),compliance:{enableNetPosition:L.getComplianceNetposition()!==Q.d.None},promotions:{hasMinimumTotalBet:!0},soundSettings:{music:{enabled:!0,defaultValue:.3}},video:{enabled:!0}},settings:L,game:{createMiddlewares:()=>[],loader:N,mockBalanceManager:z,theme:aV.Sx,preferenceConfiguration:MV,getCustomLogEnhancers:()=>p},lobby:t},w=O,k.I({...D,game:{...D.game,mockTransports:w,gameFamily:"live"}}));var D,w;return function(y){const L=y.platform===W.OD.Phone||y.platform===W.OD.Tablet?y.video.mobile.scale.value:[3,3];y.video.mobile.setScale(L[0],L[1]);const p=_.DS.IS_TABLET||_.DS.IS_PHONE?"center top":"center center";y.video.mobile.setTransformOrigin(p)}(i.ag),i}(y,D,O),{agRootContent:U}=y,I=null!==(p=y.deviceSupport)&&void 0!==p?p:_.DS,V=new yB({agApi:d,transport:x,settings:D,DS:I});t&&t(function(y){return{gameId:L=>{const{abstractGame:p,continueTopUpPopup:N}=y;return{...L,playerGameId:p.playerGameId||void 0,gameRoundId:N.isPopupVisible?p.gameRoundId:void 0}},gamePhase:L=>{let p="Qualification";return y.gamePhase.phase===bD.Q.TopUpSlot?p="TopUp":y.gamePhase.phase===bD.Q.Pachinko&&(p="CrazyPachinkoBonusRound"),{...L,gamePhase:p}},spinMode:L=>({...L,spinMode:y.gamePhase.phase===bD.Q.MainSlot?y.mainSlot.spinMode:"Normal"})}}(V));const{layout:F,onGame3DLoaded:u,dispose:S}=function(y,L){const p=new i.h;return{onGame3DLoaded:p,layout:()=>j.jsx(h.Suspense,{fallback:null,children:j.jsx(eT,{onGame3DLoaded:p,gameTextures:y.gameTextureStore,children:j.jsx(L,{})})}),dispose:()=>{}}}({gameTextureStore:V.gameTexture},null!==(N=y.customSlot3DRoot)&&void 0!==N?N:OV),B=ai.jU(V,F),{root:R,canvas:Y,dispose:E}=function(y){const L=document.createElement("canvas"),p=$Q(L);return p.configure({events:Ni,gl:{useLegacyLights:!0},camera:{position:[0,0,5],fov:75,near:.1,far:1e3}}),p.render(y),{canvas:L,root:p,dispose:()=>{p.unmount()}}}(B);null==Y||Y.addEventListener("webglcontextrestored",(()=>{V.gameTexture.rebuildMultiplierTextures()}));const P=function({gameStore:y,clientApi:L,agApi:p}){if(!y.settings.autoplayEnabled)return;const{AutoplayProvider:N,autoplay:t,dispose:j}=function(y,L,p){return m.PS(uV,y,L,p)}(p,function(y){const L=y.spinId.spinId;return{repeatBets:()=>{y.autoPlay.repeat()},selectBetChipLogFields:()=>({amount:y.gamePhase.phase===bD.Q.MainSlot?y.mainSlotBetStake.spinBet:y.topUpSlotBetStake.spinBet,gamePhase:y.gamePhase.phase,gameRoundId:y.abstractGame.gameRoundId||"",playerGameId:L||"",type:YV({gamePhase:y.gamePhase.phase,trigger:"AutoPlay",isTurbo:y.gamePhase.isTurboMode})}),betChipLogEnhancers:EV.ju}}(y),L);return y.autoPlay.bindAutoPlayAPI(t,j),N}({agApi:d,clientApi:y.params.clientApi,gameStore:V});d.video.mobile.setShouldApplyTransform(I.IS_TABLET||I.IS_PHONE);const l=o(y.createComponentsMap()),M=m.pA(P,ai.jU(V,(()=>j.jsx(OB,{AGRoot:l,root:R,canvas:Y,AgRootContent:U}))));return D.enableTestingAPI()&&(function(y){var L;(function(y){NB("autoPlay",{hideAutoPlayIntro:()=>y.abstractGame.hideAutoPlayIntro()})})(y),function(y){NB("baseSlot",{getBaseBet:()=>y.mainSlotBetStake.baseBet,getBetType:()=>"FeatureBuy"===y.mainSlot.spinMode?"Feature Buy":y.mainSlot.spinMode,getDenominations:()=>y.denominations.denominations,getSelectedDenomination:()=>y.denominations.selectedDenomination,getActiveDenominationGrid:()=>y.denominations.activeDenominationGrid,getDenominationPhase:()=>y.denominations.phase,getDenominationScatterDisabled:()=>y.denominations.isScatterDisabled,getGamePhase:()=>y.gamePhase.phase,getMainSlotPhase:()=>y.gamePhase.mainSlotPhase,getPayLines:()=>y.mainSlot.payLines,getSlotTotalMultiplier:()=>{var L;const p=null===(L=y.mainSlot.payLines)||void 0===L?void 0:L.map((y=>y.multiplier));return p?p.reduce(((y,L)=>y+L),0):0},getScatterMultipliers:()=>y.mainSlot.scatterMultipliers,getSpinMode:()=>y.mainSlot.spinMode,getQualificationMultiplier:()=>y.mainSlot.totalScatterMultiplier,setQualified:()=>y.gamePhase.setQualified(!0),setXXXtremeMode:()=>y.mainSlot.setSpinMode("XXXtreme"),setFeatureBuyMode:()=>y.mainSlot.setSpinMode("FeatureBuy"),setPayoutLines:L=>y.mainSlot.setPayLines(L),setPayout:L=>y.mainSlot.setPayout(L),setMainSlotPhase:L=>y.gamePhase.setMainSlotPhase(L),setOutcome:L=>y.mainSlot.setOutcome(L),setAreSymbolsSynced:()=>y.mainSlot.setAreSymbolsSynced(!0),onSpinEnd:()=>y.mainSlot.onSpinEnd(),isInScreen:()=>y.mainSlot.isInScreen,getGrid:()=>y.mainSlot.grid,isQualified:()=>y.gamePhase.qualified})}(y),function(y){NB("pachinko",{getCommonMultipliers:()=>y.pachinko.commonMultipliers,getPlayerMultipliers:()=>y.pachinko.playerMultipliers,getPhase:()=>y.pachinko.phase,getPayoutLimit:()=>y.settings.payoutLimit,isVisible:()=>y.pachinko.visible})}(y),function(y){NB("timer",{getRemainingQualificationTime:()=>y.qualificationTimer.timeRemainingSec,getIsRunning:()=>y.qualificationTimer.running})}(y),function(y){NB("topUp",{getTopUpSlotPhase:()=>y.gamePhase.topUpSlotPhase,isMultipliersAnimationComplete:()=>y.topUpSlot.isInScreen&&y.topUpSlot.isMultipliersAnimationCompleted,getTopUpMultipliers:()=>y.topUpSlot.multipliers,getSpinBet:()=>y.topUpSlotBetStake.spinBet,getGrid:()=>y.topUpSlot.grid,showContinueTopUpMessage:()=>(y.continueTopUpPopup.setContinueTopUpId("123456"),y.continueTopUpPopup.showPopup()),getMaxBet:()=>y.topUpSlotBetStake.topUpMaxBet})}(y),function(y){NB("winMessage",{getPayout:()=>{var L;return null!==(L=y.youWin.payout)&&void 0!==L?L:0}})}(y),function(y){NB("player",{getBalance:()=>y.abstractGame.balance})}(y),function(y){NB("curtains",{hideCurtains:()=>{var L;null===(L=y.autoTestStore)||void 0===L||L.setCurtainVisible(!1)}})}(y),L=y.transport.getPersistentTransport(),NB("wsMessages",{registerIncomingMessageListener:y=>{L.incomingMessages.onValue(y),window.console.info("[Incoming] WS Message listener registered successfully")}}),LB.aF(pB)}(V),window.gameTestWSData={},window.autoTestsApi.wsMessages.registerIncomingMessageListener((y=>{var L;const p=y;switch(p.type){case"ls2.qualifying":if(p.payload.slotState.payoutMultipliers){const p=null===(L=y.payload.slotState.payoutMultipliers)||void 0===L?void 0:L.map((y=>y.multiplier));window.gameTestWSData.payoutMultiplier=p?p.reduce(((y,L)=>y+L),0):0}break;case"ls2.topUp":window.gameTestWSData.scatterMultiplier=p.payload.totalScatterMultiplier,window.gameTestWSData.topUpMultipliers=p.payload.topUpMultipliers;break;case"ls2.pachinkoMultipliers":JSON.stringify(p.payload.afterMerge).includes("double")&&(window.gameTestWSData.commonMultipliers=p.payload.common,window.gameTestWSData.multipliersWithDouble=p.payload.afterMerge)}}))),{layout:M,onGame3DLoaded:u,dispose:async()=>{V.dispose(),E(),Object.keys(dW.files).forEach((y=>{const L=dW.files[y];L instanceof FN&&L.dispose()})),dW.enabled=!1,S(),await w()},gameStore:V}}},645264:(y,L,p)=>{var N,t;p.d(L,{U:()=>N,r:()=>t}),function(y){y["ClientBetChip"]="CLIENT_BET_CHIP",y["ClientBetRejected"]="CLIENT_BET_REJECTED",y["ClientPopupDecisionMade"]="CLIENT_CP_DECISION_MADE",y["ClientPressedTurboButton"]="CLIENT_CP_PRESSED_TURBO_BUTTON",y["ClientPressedSpinStopButton"]="CLIENT_CP_PRESSED_SPIN_STOP",y["ClientOpenedXXXtremeSpins"]="CLIENT_CP_XXX_SPINS_OPEN",y["ClientToggledXXXtremeSpins"]="CLIENT_CP_XXX_SPINS",y["ClientFinalMultipliers"]="CLIENT_CP_FINAL_MULTIPLIERS",y["ClientPressedBetSelector"]="CLIENT_CP_PRESSED_BETSELECTOR",y["ClientPressedInfoScreen"]="CLIENT_CP_PRESSED_INFO_SCREEN"}(N||(N={})),function(y){y["MainSlotSpin"]="crazypachinko.spinRequest",y["MainSlotAutoPlaySpin"]="AutoPlay",y["MainSlotShortcutSpin"]="crazypachinko.spinRequest.shortcut",y["MainSlotTurboSpin"]="crazypachinko.spinRequest.turbo",y["MainSlotAutoPlayTurboSpin"]="AutoPlay.turbo",y["MainSlotShortcutTurboSpin"]="crazypachinko.spinRequest.shortcut.turbo",y["TopUpSlotSpin"]="crazypachinko.topUpRequest",y["TopUpSlotAutoPlaySpin"]="TopUpAutoPlay",y["TopUpSlotShortcutSpin"]="crazypachinko.topUpRequest.shortcut",y["TopUpSlotTurboSpin"]="crazypachinko.topUpRequest.turbo",y["TopUpSlotAutoPlayTurboSpin"]="TopUpAutoPlay.turbo",y["TopUpSlotShortcutTurboSpin"]="crazypachinko.topUpRequest.shortcut.turbo"}(t||(t={}))},804470:(y,L,p)=>{p.d(L,{AD:()=>T,Mk:()=>D,VT:()=>x,Vu:()=>g,W4:()=>i,Z6:()=>C,gJ:()=>Q,ju:()=>k,kR:()=>_,p7:()=>W,pX:()=>w});var N=p(645264),t=p(960921);const j=["currency"],z=["balance"],O=["gamePhase"],h=["spinMode"],m=[...z,...j,"tableLimits"],k=[...h,...z];function _(y){return{payload:{decisionType:y,popupId:t.fH},type:N.U.ClientPopupDecisionMade}}function W(y){return{payload:{speedFrom:y?"Normal":"Turbo",speedTo:y?"Turbo":"Normal"},type:N.U.ClientPressedTurboButton,enhancers:O}}function g(y){return{payload:{baseBet:y},type:N.U.ClientPressedSpinStopButton,enhancers:[...z,...j,...O,...h]}}function C(){return{type:N.U.ClientOpenedXXXtremeSpins,enhancers:j}}function Q(y){return{payload:y,type:N.U.ClientToggledXXXtremeSpins,enhancers:j}}function T(y){return{payload:y,type:N.U.ClientFinalMultipliers,enhancers:j}}function i(y){return{payload:y,type:N.U.ClientPressedBetSelector,enhancers:[...j,...O]}}function D(y){return{payload:y,type:N.U.ClientPressedInfoScreen,enhancers:[...j,...O]}}function w(y){return{payload:y,type:N.U.ClientBetChip,enhancers:j}}function x(y){return{payload:y,type:N.U.ClientBetRejected,enhancers:m}}},281249:(y,L,p)=>{p.d(L,{P:()=>t,d:()=>N});const N=20;var t;(function(y){y["GameInitSlot"]="gameInitSlot",y["GameInitTopUp"]="gameInitTopUp",y["GameInitPachinko"]="gameInitPachinko",y["GameInitPachinkoDrop"]="gameInitPachinkoDrop",y["GameInitXxxtremeSpinsActivated"]="gameInitXxxtremeSpinsActivated",y["GameCancelledPachinko"]="gameCancelledPachinko",y["ButtonSpin"]="buttonSpin",y["ButtonSpinPress"]="buttonSpinPress",y["ButtonSpinPressTopUp"]="buttonSpinPressTopUp",y["ButtonSpinRelease"]="buttonSpinRelease",y["ButtonSpinReleaseTopUp"]="buttonSpinReleaseTopUp",y["ButtonActivateXtreme"]="buttonActivateXtreme",y["ButtonActivateXtremePress"]="buttonActivateXtremePress",y["ButtonActivateXtremeRelease"]="buttonActivateXtremeRelease",y["ButtonXxxtremeSpinsIncrease"]="buttonXxxtremeSpinsIncrease",y["ButtonXxxtremeSpinsIncreasePress"]="buttonXxxtremeSpinsIncreasePress",y["ButtonXxxtremeSpinsIncreaseRelease"]="buttonXxxtremeSpinsIncreaseRelease",y["ButtonXxxtremeSpinsDecrease"]="buttonXxxtremeSpinsDecrease",y["ButtonXxxtremeSpinsDecreasePress"]="buttonXxxtremeSpinsDecreasePress",y["ButtonXxxtremeSpinsDecreaseRelease"]="buttonXxxtremeSpinsDecreaseRelease",y["ButtonXxxtremeSpinsActivate"]="buttonXxxtremeSpinsActivate",y["ButtonXxxtremeSpinsActivatePress"]="buttonXxxtremeSpinsActivatePress",y["ButtonXxxtremeSpinsActivateRelease"]="buttonXxxtremeSpinsActivateRelease",y["ButtonFeatureBuyIncrease"]="buttonFeatureBuyIncrease",y["ButtonFeatureBuyIncreasePress"]="buttonFeatureBuyIncreasePress",y["ButtonFeatureBuyIncreaseRelease"]="buttonFeatureBuyIncreaseRelease",y["ButtonFeatureBuyDecrease"]="buttonFeatureBuyDecrease",y["ButtonFeatureBuyDecreasePress"]="buttonFeatureBuyDecreasePress",y["ButtonFeatureBuyDecreaseRelease"]="buttonFeatureBuyDecreaseRelease",y["ButtonFeatureBuyBuy"]="buttonFeatureBuyBuy",y["ButtonFeatureBuyBuyPress"]="buttonFeatureBuyBuyPress",y["ButtonFeatureBuyBuyRelease"]="buttonFeatureBuyBuyRelease",y["ButtonActivateXtremeClose"]="buttonActivateXtremeClose",y["ButtonActivateXtremeClosePress"]="buttonActivateXtremeClosePress",y["ButtonActivateXtremeCloseRelease"]="buttonActivateXtremeCloseRelease",y["XxxtremeSpinsActivated"]="xxxtremeSpinsActivated",y["XxxtremeSpinsDeactivated"]="xxxtremeSpinsDeactivated",y["XxxtremeMenuOpened"]="xxxtremeMenuOpened",y["GameSpeedSlow"]="gameSpeedSlow",y["GameSpeedFast"]="gameSpeedFast",y["SpinStart"]="spinStart",y["SpinComplete"]="spinComplete",y["ReelAccelerationStart"]="reelAccelerationStart",y["ReelAccelerationStart1"]="reelAccelerationStart1",y["ReelAccelerationStart2"]="reelAccelerationStart2",y["ReelAccelerationStart3"]="reelAccelerationStart3",y["ReelAccelerationStart4"]="reelAccelerationStart4",y["ReelAccelerationStart5"]="reelAccelerationStart5",y["ReelBounce"]="reelBounce",y["ReelBounce1"]="reelBounce1",y["ReelBounce2"]="reelBounce2",y["ReelBounce3"]="reelBounce3",y["ReelBounce4"]="reelBounce4",y["ReelBounce5"]="reelBounce5",y["ReelBounceQuickStop"]="reelBounceQuickStop",y["ReelBounceQuickStop1"]="reelBounceQuickStop1",y["ReelBounceQuickStop2"]="reelBounceQuickStop2",y["ReelBounceQuickStop3"]="reelBounceQuickStop3",y["ReelBounceQuickStop4"]="reelBounceQuickStop4",y["ReelBounceQuickStop5"]="reelBounceQuickStop5",y["QuickStop"]="quickStop",y["FirstScatter"]="firstScatter",y["FirstScatter1"]="firstScatter1",y["FirstScatter2"]="firstScatter2",y["FirstScatter3"]="firstScatter3",y["FirstScatter4"]="firstScatter4",y["FirstScatter5"]="firstScatter5",y["SecondScatter"]="secondScatter",y["SecondScatter1"]="secondScatter1",y["SecondScatter2"]="secondScatter2",y["SecondScatter3"]="secondScatter3",y["SecondScatter4"]="secondScatter4",y["SecondScatter5"]="secondScatter5",y["ThirdScatter"]="thirdScatter",y["ThirdScatter1"]="thirdScatter1",y["ThirdScatter2"]="thirdScatter2",y["ThirdScatter3"]="thirdScatter3",y["ThirdScatter4"]="thirdScatter4",y["ThirdScatter5"]="thirdScatter5",y["StickyReelStart"]="stickyReelStart",y["StickyReelStart1"]="stickyReelStart1",y["StickyReelStart2"]="stickyReelStart2",y["StickyReelStart3"]="stickyReelStart3",y["StickyReelStart4"]="stickyReelStart4",y["StickyReelStart5"]="stickyReelStart5",y["StickyReelBounce"]="stickyReelBounce",y["StickyReelBounce1"]="stickyReelBounce1",y["StickyReelBounce2"]="stickyReelBounce2",y["StickyReelBounce3"]="stickyReelBounce3",y["StickyReelBounce4"]="stickyReelBounce4",y["StickyReelBounce5"]="stickyReelBounce5",y["ScatterHighLightReel"]="scatterHighLightReel",y["ScatterWinStart"]="scatterWinStart",y["ScatterWinMove"]="scatterWinMove",y["ScatterWinJoin"]="scatterWinJoin",y["ScatterWinFly"]="scatterWinFly",y["ScatterWinLand"]="scatterWinLand",y["ScatterWinLandNormal"]="scatterWinLandNormal",y["ScatterWinLandMultiplied"]="scatterWinLandMultiplied",y["WinSlotSmall"]="winSlotSmall",y["WinSlotLarge"]="winSlotLarge",y["NearWin"]="nearWin",y["NearWin1"]="nearWin1",y["NearWin2"]="nearWin2",y["NearWin3"]="nearWin3",y["NearWin4"]="nearWin4",y["NearWin5"]="nearWin5",y["BonusRoundBeginsMessage"]="bonusRoundBeginsMessage",y["TopUpChosen"]="topUpChosen",y["BonusChosen"]="bonusChosen",y["BonusTimeOut"]="bonusTimeOut",y["TopUpEnter"]="topUpEnter",y["TopUpSpinStart"]="topUpSpinStart",y["TopUpSpinComplete"]="topUpSpinComplete",y["TopUpReelBounce1True"]="topUpReelBounce1True",y["TopUpReelBounce1False"]="topUpReelBounce1False",y["TopUpReelBounce2True"]="topUpReelBounce2True",y["TopUpReelBounce2False"]="topUpReelBounce2False",y["TopUpReelBounce3True"]="topUpReelBounce3True",y["TopUpReelBounce3False"]="topUpReelBounce3False",y["TopUpReelBounce4True"]="topUpReelBounce4True",y["TopUpReelBounce4False"]="topUpReelBounce4False",y["TopUpReelBounce5True"]="topUpReelBounce5True",y["TopUpReelBounce5False"]="topUpReelBounce5False",y["TopUpReelBounce6True"]="topUpReelBounce6True",y["TopUpReelBounce6False"]="topUpReelBounce6False",y["TopUpReelBounce7True"]="topUpReelBounce7True",y["TopUpReelBounce7False"]="topUpReelBounce7False",y["TopUpReelBounce8True"]="topUpReelBounce8True",y["TopUpReelBounce8False"]="topUpReelBounce8False",y["TopUpReelBounce9True"]="topUpReelBounce9True",y["TopUpReelBounce9False"]="topUpReelBounce9False",y["TopUpReelBounce10True"]="topUpReelBounce10True",y["TopUpReelBounce10False"]="topUpReelBounce10False",y["TopUpReelBounce11True"]="topUpReelBounce11True",y["TopUpReelBounce11False"]="topUpReelBounce11False",y["TopUpReelBounce12True"]="topUpReelBounce12True",y["TopUpReelBounce12False"]="topUpReelBounce12False",y["TopUpReelBounce13True"]="topUpReelBounce13True",y["TopUpReelBounce13False"]="topUpReelBounce13False",y["TopUpReelBounce14True"]="topUpReelBounce14True",y["TopUpReelBounce14False"]="topUpReelBounce14False",y["TopUpReelBounce15True"]="topUpReelBounce15True",y["TopUpReelBounce15False"]="topUpReelBounce15False",y["TopUpReelBounce16True"]="topUpReelBounce16True",y["TopUpReelBounce16False"]="topUpReelBounce16False",y["TopUpReelBounceQuickStop"]="topUpReelBounceQuickStop",y["TopUpMultiFly"]="topUpMultiFly",y["TopUpMultiFlyLow"]="topUpMultiFlyLow",y["TopUpMultiFlyHigh"]="topUpMultiFlyHigh",y["TopUpMultiAdded"]="topUpMultiAdded",y["TopUpMultiAddedLow"]="topUpMultiAddedLow",y["TopUpMultiAddedHigh"]="topUpMultiAddedHigh",y["TopUpZone"]="topUpZone",y["TopUpZone1"]="topUpZone1",y["TopUpZone2"]="topUpZone2",y["TopUpZone3"]="topUpZone3",y["TopUpZone4"]="topUpZone4",y["TopUpQuickLand"]="topUpQuickLand",y["TopUpQuickLandNone"]="topUpQuickLandNone",y["TopUpQuickLandLow"]="topUpQuickLandLow",y["TopUpQuickLandHigh"]="topUpQuickLandHigh",y["TopUpCountDown"]="topUpCountDown",y["TopUpCountDown20"]="topUpCountDown20",y["TopUpCountDown10"]="topUpCountDown10",y["TopUpCountDown8"]="topUpCountDown8",y["TopUpCountDown6"]="topUpCountDown6",y["TopUpCountDown4"]="topUpCountDown4",y["TopUpCountDown2"]="topUpCountDown2",y["TopUpCountDownReset"]="topUpCountDownReset",y["TopUpEnd"]="topUpEnd",y["PachinkoEnter"]="pachinkoEnter",y["PachinkoUEMultiplierAnimations"]="pachinkoUEMultiplierAnimations",y["PachinkoDoubleAdded"]="pachinkoDoubleAdded",y["PachinkoMultiAddStart"]="pachinkoMultiAddStart",y["PachinkoMultiAddStartTrue"]="pachinkoMultiAddStartTrue",y["PachinkoMultiAddStartFalse"]="pachinkoMultiAddStartFalse",y["PachinkoMultiAdd"]="pachinkoMultiAdd",y["PachinkoRandomSelection"]="pachinkoRandomSelection",y["PachinkoTimeToDrop"]="pachinkoTimeToDrop",y["PachinkoGetDouble"]="pachinkoGetDouble",y["PachinkoWin"]="pachinkoWin",y["PachinkoWinLow"]="pachinkoWinLow",y["PachinkoWinMed"]="pachinkoWinMed",y["PachinkoWinHigh"]="pachinkoWinHigh",y["PachinkoExit"]="pachinkoExit",y["SlotMusicStart"]="slotMusicStart",y["TopUpMusicLoad"]="topUpMusicLoad",y["TopUpMusicStart"]="topUpMusicStart",y["PachinkoMusicLoad"]="pachinkoMusicLoad",y["PachinkoMusicStart"]="pachinkoMusicStart",y["LoadTheRest"]="loadTheRest"})(t||(t={}))},360595:(y,L,p)=>{function N(y){var L;return(null===(L=y.autoTestStore)||void 0===L?void 0:L.isAnimationsDisabled)||!1}p.d(L,{C:()=>N})},77952:(y,L,p)=>{function N({abstractGame:y,betStakeSelector:L,settings:p},N){const t=null!=N?N:L.activeBetStake.spinBet;return y.totalBetAmount+t>p.tableBetMaxLimit}p.d(L,{N:()=>N})},960921:(y,L,p)=>{p.d(L,{Fp:()=>j,fH:()=>N});const N="continueTopUpPopupId";var t,j;(function(y){y[y["ContinueTopUp"]=1]="ContinueTopUp",y[y["ProceedToBonusGame"]=2]="ProceedToBonusGame"})(t||(t={})),function(y){y["ContinueTopUp"]="ContinueTopUp",y["Bonus"]="Bonus"}(j||(j={}))},674833:(y,L,p)=>{var N;p.d(L,{Q:()=>N}),function(y){y["Initial"]="GamePhase.Initial",y["MainSlot"]="GamePhase.MainSlot",y["TopUpSlot"]="GamePhase.TopUpSlot",y["Pachinko"]="GamePhase.Pachinko",y["GameResult"]="GamePhase.GameResult"}(N||(N={}))},991924:(y,L,p)=>{p.d(L,{V:()=>N});const N=["presents","games","xxxtreme","symbols","winlines"]},4001:(y,L,p)=>{p.d(L,{Jh:()=>t,uh:()=>j,vy:()=>N,ye:()=>z});const N=5,t=3,j=5,z=25.7},542021:(y,L,p)=>{var N;p.d(L,{G7:()=>z,lj:()=>N,mU:()=>t,y8:()=>j}),function(y){y["Idle"]="PachinkoPhase.Idle",y["PrepareForDouble"]="PachinkoPhase.PrepareForDouble",y["ShowCommonMultipliers"]="PachinkoPhase.ShowCommonMultipliers",y["ApplyScatter"]="PachinkoPhase.ApplyScatter",y["AddTopUp"]="PachinkoPhase.AddTopUp",y["AddDouble"]="PachinkoPhase.AddDouble",y["DoubledMultipliers"]="PachinkoPhase.DoubledMultipliers",y["PuckDrop"]="PachinkoPhase.PuckDrop",y["PuckLanded"]="PachinkoPhase.PuckLanded",y["MergeWithTopUpAfterDoubling"]="PachinkoPhase.MergeWithTopUpAfterDoubling"}(N||(N={}));const t=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],j=t.length,z={1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0}},810156:(y,L,p)=>{function N(y){return y.phaseTransitions.isTransitionToTopUp||y.phaseTransitions.isTransitionToPachinko||y.phaseTransitions.isTransitionToMain}p.d(L,{y:()=>N})},977536:(y,L,p)=>{var N;p.d(L,{C:()=>N}),function(y){y["InfoBar"]="InfoBar",y["XXXtremeButton"]="XXXtremeButton",y["HologramContainer"]="HologramContainer"}(N||(N={}))},439895:(y,L,p)=>{p.d(L,{$:()=>z});var N=p(234658),t=p(738849),j=p(57781);function z(y){const L=y,p="false"!==L.rawConfig.enable_XXXtreme_spins,z=j.R(L.rawConfig.main_bet_min_limit,0),O=j.R(L.rawConfig.main_bet_max_limit,0),h=p?O*N.ue:O,m=j.R(L.rawConfig.top_up_bet_max_limit,0),k=j.R(L.rawConfig.table_bet_max_limit,t.iw),_=j.R(L.rawConfig.spin_bet_max_limit,t.Oi);return{minTableLimit:()=>z,maxTableLimit:()=>Math.min(Math.max(m,h),k,_),turboSpinEnabled:"true"===L.rawConfig.turbo_spin_enabled,volatilityIndex:()=>{var y;return null!==(y=parseFloat(L.rawConfig["volatility_index"]))&&void 0!==y?y:0}}}},738849:(y,L,p)=>{p.d(L,{CP:()=>z,IU:()=>m,Oi:()=>j,Sr:()=>h,Sx:()=>O,iw:()=>t});var N=p(127793);const t=Number.MAX_SAFE_INTEGER,j=Number.MAX_SAFE_INTEGER,z=100,O=N.q.Golden;var h,m;(function(y){y["Qualification"]="BetLimitGroup.Qualification",y["NormalSpin"]="BetLimitGroup.NormalSpin",y["XXXtremeSpin"]="BetLimitGroup.XXXtremeSpin",y["FeatureBuy"]="BetLimitGroup.FeatureBuy",y["TopUp"]="BetLimitGroup.TopUp"})(h||(h={})),function(y){y["SouthAfrica"]="southAfrica",y["Romania"]="romania",y["Georgia"]="georgia"}(m||(m={}))},57781:(y,L,p)=>{function N(y,L){if(!y)return L;const p=parseFloat(y);return Number.isNaN(p)?L:p}p.d(L,{R:()=>N})},946574:(y,L,p)=>{p.d(L,{f:()=>j});var N=p(674833),t=p(810156);function j(y){return(y.gamePhase.phase===N.Q.TopUpSlot?y.topUpSlot.isSpinButtonDisabled:y.mainSlot.isSpinButtonDisabled)||t.y(y)}},267851:(y,L,p)=>{p.d(L,{W:()=>z});var N=p(77952),t=p(674833),j=p(16260);function z(y){if(y.gamePhase.phase===t.Q.MainSlot&&y.mainSlot.isInsufficientBalanceForSpin)return j.X.BalanceTooLow;if(y.gamePhase.phase===t.Q.TopUpSlot){if(y.topUpSlotBetStake.isMaxPayoutReached)return j.X.MaxPayoutReached;if(y.topUpSlot.isInsufficientBalanceForSpin)return j.X.BalanceTooLow;if(y.topUpSlot.isTopUpClosed)return j.X.WaitUntilBonusRoundBegins;if(N.N(y))return j.X.TableBetMaxLimitReached}}},331094:(y,L,p)=>{p.d(L,{Pj:()=>O,jU:()=>z});var N=p(64922),t=p(377810);const j=t.createContext(null);function z(y,L){return N.jsx(j.Provider,{value:y,children:N.jsx(L,{})})}function O(){const y=t.useContext(j);if(!y)throw new Error("Store should be provided to StoreContext");return y}},341626:(y,L,p)=>{var N;p.d(L,{R:()=>t,V:()=>N}),function(y){y["PachinkoWall"]="VideoElements.PachinkoWall"}(N||(N={}));const t={[N.PachinkoWall]:{x:697/1920,y:221/1080,w:530/1920,h:689/1080}}},16023:(y,L,p)=>{p.d(L,{O:()=>N});const N=300},16260:(y,L,p)=>{var N;p.d(L,{X:()=>N}),function(y){y["Activate"]="activate",y["ActivateUppercase"]="activate.uppercase",y["BalanceTooLow"]="tooltip.balanceTooLow",y["BaseBet"]="baseBet",y["BetChangedUppercase"]="BetChangedTitle",y["BetLabel"]="betlabel",y["Bonus"]="info.games.bonus",y["BonusBet"]="bonusBet.capitalized",y["BonusBetUppercase"]="bonusBet",y["Buy"]="buy",y["Collect"]="Collect",y["ContinueTopUpContent"]="qualification.description",y["ContinueTopUpTitle"]="qualification.title",y["DeactivateUppercase"]="deactivate.uppercase",y["FeatureBuy"]="featureBuy",y["FeatureBuyActivated"]="FeatureBuyActivated",y["FeatureBuyContent"]="info.featureBuy.content",y["FeatureBuyTitle"]="info.featureBuy.title",y["HugeMultipliers"]="info.presents.hugeMultipliers",y["HugeMultipliersContent"]="info.presents.hugeMultipliers.content",y["InfoSymbolsTitle"]="info.symbols.title",y["InfoWinLinesText"]="info.winlines.text",y["InfoWinLinesTitle"]="info.winlines.title",y["InfoXXXTremeTitle"]="info.xxxtreme.title",y["LimitBasedOnBaseBet"]="betLimits.limitBasedOnBaseBet",y["MaxBetReached"]="tooltip.maxBetReached",y["MaxPayout"]="limitPlate.payoutLimit",y["MaxPayoutReached"]="tooltip.maxPayoutReached",y["MinBetReached"]="tooltip.minBetReached",y["NextPachinkoIn"]="nextPachinkoIn",y["No"]="no",y["NormalSpin"]="normalSpin",y["PachinkoLive"]="info.games.pachinko.title",y["PachinkoLiveContent1"]="info.games.pachinko.content.part1",y["PachinkoLiveContent2"]="info.games.pachinko.content.part2",y["Presents"]="info.presents",y["PriceUppercase"]="price.uppercase",y["Qualification"]="qualification",y["QualificationTitle"]="qualification.uppercase",y["QualificationContent"]="info.games.qualification.content",y["Qualified"]="qualified",y["Spin"]="spin.uppercase",y["StickyScatters"]="info.presents.stickyScatters.title",y["StickyScattersContent"]="info.presents.stickyScatters.content",y["SymbolPayoutsScatters"]="symbolPayouts.scatters",y["SymbolPayoutsTitle"]="symbolPayouts.title",y["SymbolsContent"]="info.symbols.content",y["TableBetMaxLimitReached"]="tooltip.tableBetMaxLimitReached",y["GamesTitle"]="info.games.title",y["ToQualify"]="ToQualify",y["ToastAutomaticDecision"]="error_8000",y["ToastBetAmountDecreasedLowBalance"]="toast.betamount.decreased.lowBalance",y["ToastBetAmountDecreasedMaxPayout"]="toast.betamount.decreased.payoutLimit",y["ToastBetAmountDecreasedTableLimit"]="toast.betamount.decreased.tableLimit",y["TooltipTurboMode"]="tooltip.turboMode",y["TopUp"]="topUp",y["TopUpBetUppercase"]="topUpBet.uppercase",y["TopUpContent"]="info.games.topUp.content",y["TotalBet"]="betV2",y["TotalBetUppercase"]="betV2.uppercase",y["WaitUntilBonusRoundBegins"]="tooltip.waitUntilBonusRoundBegins",y["XXXtremeSpin"]="xxxtremeSpin",y["XXXtremeSpinsActivated"]="XXXtremeSpinsActivated",y["XXXtremeSpinsContent"]="info.xxxtremeSpins.content",y["XXXtremeSpinsTitle"]="info.xxxtremeSpins.title",y["XxxtremeBonusGameTicket"]="xxxtremeBonusGameTicket",y["XxxtremeMoreMultipliers"]="xxxtremeMoreMultipliers",y["XxxtremeScatter"]="xxxtremeScatter",y["Yes"]="yes",y["YouQualifiedWith"]="youQualifiedWith",y["YouWin"]="youWin"}(N||(N={}))},207941:(y,L,p)=>{p.d(L,{Q:()=>O});var N=p(64922),t=p(346160),j=p(653677);const z={};function O(y,L){const p=t.gJ(y,L);return t.gD(p)||!z[y]?N.jsx(j.q,{htmlContent:!0,children:p}):N.jsxs(N.Fragment,{children:[z[y]," "]})}},335908:(y,L,p)=>{p.d(L,{T:()=>t});var N=p(346160);function t(y,L){return N.Tl(y,L)}},465300:(y,L,p)=>{p.d(L,{a:()=>z});var N,t=p(607439);(function(y){y["Center"]="TranslateOrigin.Center",y["RightCenter"]="TranslateOrigin.RightCenter",y["BottomCenter"]="TranslateOrigin.BottomCenter"})(N||(N={}));const j={[N.Center]:"translate(-50%, -50%)",[N.RightCenter]:"translate(0%, -50%)",[N.BottomCenter]:"translate(-50%, -100%)"};class z{constructor(y,L={}){this.options=L,this.position=[0,0],this.currentScale=[1,1],this.currentOpacity=1,this.currentRotation=0,this.currentForceHardwareAcceleration=!0,this.translateUnits="px",this.element=y,L.transformOrigin&&(y.style.transformOrigin=L.transformOrigin),L.translateUnits&&(this.translateUnits=L.translateUnits),void 0!==L.forceHardwareAcceleration&&(this.currentForceHardwareAcceleration=L.forceHardwareAcceleration),this.apply()}getBoundingClientRect(){return this.element.getBoundingClientRect()}get x(){return this.position[0]}set x(y){this.position[0]!==y&&(this.position[0]=y,this.apply())}get y(){return this.position[1]}set y(y){this.position[1]!==y&&(this.position[1]=y,this.apply())}get scale(){return this.currentScale[0]}set scale(y){this.currentScale[0]===y&&this.currentScale[1]===y||(this.currentScale[0]=y,this.currentScale[1]=y,this.apply())}get scaleX(){return this.currentScale[0]}set scaleX(y){this.currentScale[0]!==y&&(this.currentScale[0]=y,this.apply())}get scaleY(){return this.currentScale[1]}set scaleY(y){this.currentScale[1]!==y&&(this.currentScale[1]=y,this.apply())}get opacity(){return this.currentOpacity}set opacity(y){const L=t.A(y,0,1);this.currentOpacity!==L&&(this.currentOpacity=L,this.apply())}get rotation(){return this.currentRotation}set rotation(y){this.currentRotation!==y&&(this.currentRotation=y,this.apply())}get forceHardwareAcceleration(){return this.currentForceHardwareAcceleration}set forceHardwareAcceleration(y){this.currentForceHardwareAcceleration!==y&&(this.currentForceHardwareAcceleration=y,this.apply())}setStyle(y){const L=Object.keys(y);for(const p of L)this.element.style[p]=y[p]}apply(){this.willApply(this.element)}willApply(y){let L=`${this.options.translateOrigin?j[this.options.translateOrigin]:"translate(0, 0)"}`;L+=` translate(${this.position[0]}${this.translateUnits}, ${this.position[1]}${this.translateUnits})`,L+=` rotate(${this.rotation}deg)`,L+=` scale(${this.currentScale[0]}, ${this.currentScale[1]})`,this.currentForceHardwareAcceleration&&(L+=" translateZ(0px)"),y.style.transform=L,y.style.opacity=`${this.currentOpacity}`}}},180627:(y,L,p)=>{p.d(L,{r:()=>t});var N=p(674833);function t(y,L,p){return{[N.Q.MainSlot]:!y,[N.Q.TopUpSlot]:!L,[N.Q.Initial]:!0,[N.Q.Pachinko]:!1,[N.Q.GameResult]:!1}[p]}},574706:(y,L,p)=>{function N({x:y,y:L},p){return{left:y-(p.containerWidth-p.width)/2,top:L-(p.containerHeight-p.height)/2}}function t({rect:y,labelTranslationId:L,AGStore:p,type:t}){t&&p.hideTooltipsByType(t),p.addTooltip({labelTranslationId:L,type:t,...N({x:y.left+y.width/2,y:y.top},p.gameDimensions)})}p.d(L,{v:()=>t})},884544:(y,L,p)=>{var N=p(794140),t=p(809024),j=p(357947),z=p(419749),O=p(64922),h=p(525620),m=p(786803),k=p(10660),_=p(310605),W=p(484173),g=p(597951),C=p(653433),Q=p(248116),T=p(953845),i=p(331094),D=p(180627),w=p(699695),x=p(376028);const d="qualifiedPlayersContainer--20407",o="visible--ae5fa",U=({visible:y})=>O.jsx("div",{className:w.A(d,{[o]:y}),children:O.jsx(x.v,{})}),I=h.PA((()=>{const{qualifiedPlayers:y}=i.Pj();return O.jsx(U,{visible:y.visible})}));var V=p(377810),F=p(211958),u=p(291132),S=p(448951),B=p(234658),R=p(674833),Y=p(810156),E=p(494475),P=p(872443),l=p(346160),M=p(827424),f=p(28230),a=p(822381),H=p(205156);const X="container--a4d47",J="popupBubble--3ef4f";var r=p(13799),G=p(850449),$=p(864105),q=p(572989);const A=E.Oe((({state:y,ag:L})=>{const p=r.DB(y),{CustomBetPerRoundComponent:N,CustomBottomComponent:t}=$.R9().AutoplayCustomComponents||{},{isLargeScreen:j,isMediumScreen:z,isSmallScreen:O}=M.Qo(L.viewport.size.value);return{availableRounds:p.autoplayApiRounds(),currencySymbol:P.o2(y),gameTheme:G.SJ(y),gameDimensions:r.Ay(y),isDesktop:j,isLandscape:r.O5(y),isTablet:z,isMobile:O,isRtl:l.sU(),CustomBetPerRoundComponent:N,CustomBottomComponent:t,totalBet:L.balance.totalBet,isSettingsWindowOpen:L.autoplayUI.isSettingsWindowOpen,notification:L.autoplayUI.notification,closeSettings:L.autoplayUI.closeSettings,clearStopReason:L.autoplayUI.clearStopReason,setPreviousTotalBetVisibility:L.autoplayUI.setPreviousTotalBetVisibility}}),(y=>[y.viewport.size]))((({isSettingsWindowOpen:y,children:L,...p})=>{const{closeSettings:N,isLandscape:t}=p;return O.jsx(f.f,{position:"TopCenter",width:a.o1(42),isSlidingAppearance:!0,isCloseButtonEnabled:!0,isLandscape:t,visible:y,onClose:N,className:J,content:O.jsx("div",{className:X,children:O.jsx(H._,{...p,withTitle:!0})}),wrapContent:!1,children:L})}));A.displayName="AutoplaySettingsPopupConnectedToAg";const s=q.s((y=>({isRunning:y.isRunning,limitsEnabled:y.limitsEnabled,lossLimit:y.lossLimit,roundsLeft:y.roundsLeft,selectedRounds:y.selectedRounds,singleWin:y.singleWin,totalBetToRepeat:y.totalBetToRepeat})),(y=>({setLossLimit:y.setLossLimit,setSelectedRounds:y.setSelectedRounds,setSingleWin:y.setSingleWin,start:y.start,stop:y.stop})))(A);var c=p(383213);const K=({autoplayEnabled:y})=>y?O.jsx(s,{children:O.jsx(c.q,{})}):null,b=h.PA((()=>{const y={autoplayEnabled:i.Pj().settings.autoplayEnabled};return O.jsx(K,{...y})})),n="slotButtonContainer--a7ca0",v="topUp--6448d",e="hidden--3fd11",Z=h.PA((()=>{const y=i.Pj(),{abstractGame:L,gamePhase:p,topUpSlot:N,mainSlot:t}=i.Pj(),j=p.phase===R.Q.TopUpSlot&&N.isInScreen,z=p.phase===R.Q.MainSlot&&t.isInScreen,h=Y.y(y)||p.isPlayerTransferredToBonus,m=!(z||j)||h;return V.useEffect((()=>{m&&L.hideTooltipsByType(B.Ib.SpinButton)}),[L,m]),O.jsxs("div",{className:w.A(n,m&&e,j&&v),children:[O.jsx(F._,{}),O.jsx(S.vo,{}),O.jsx(u.h,{}),O.jsx(b,{})]})})),yy="overlayStatus--ad1a9",Ly="hidden--5fe23",py="gradient--957d4",Ny="phone--a073c",ty=({hasGradient:y=!0,hidden:L=!1,isPhone:p=!1,children:N})=>O.jsx("div",{className:w.A(yy,{[py]:y,[Ly]:L,[Ny]:p}),"data-role":"status-text",children:N});ty.displayName="OverlayStatus";const jy="statusOverlayWrapper--6673a",zy=({text:y})=>O.jsx("div",{className:jy,children:O.jsx(ty,{hidden:!y,children:y})}),Oy=h.PA((()=>{const y=i.Pj(),{statusMessage:L}=y;return O.jsx(zy,{text:L.message})}));var hy=p(101976),my=p(16023),ky=p(664887);const _y="wrapper--7e1e2",Wy="gradient--3f417",gy="open--0b38e",Cy="wrapperContent--6482f",Qy=h.PA((()=>{const{xxxtremeSpin:y}=i.Pj(),L=y.isDrawerOpen,p=V.useRef(null),N=function(y,L){const[p,N]=V.useState(!1);return V.useEffect((()=>{if(!y){const y=window.setTimeout((()=>{N(!1)}),L);return()=>window.clearTimeout(y)}N(!0)}),[y,L]),p}(L,my.O),t=V.useCallback((()=>{y.closeDrawer()}),[y]);return ky.L(p,!0,t),N?O.jsxs("div",{className:_y,style:{"--animationDuration":`${my.O}ms`},children:[O.jsx("div",{className:w.A(Wy,{[gy]:L})}),O.jsx("div",{className:w.A(Cy,{[gy]:L}),ref:p,children:O.jsx(hy.Q,{})})]}):null})),Ty="immersiveGameOverlay--c1add",iy="xxxtremeButtonContainer--3ef97",Dy="hologramContainer--e2b8b",wy="immersive-game-overlay",xy=({isHidden:y})=>O.jsxs(O.Fragment,{children:[O.jsx(Q.O,{}),O.jsxs("div",{"data-role":wy,className:Ty,children:[O.jsxs(C.q,{isHidden:y,children:[O.jsx(_.V,{}),O.jsx(Oy,{}),O.jsx("div",{className:Dy,children:O.jsx(k.k,{})}),O.jsx(Z,{}),O.jsx("div",{className:iy,children:O.jsx(T.U,{})}),O.jsx(g.p,{})]}),O.jsx(W.j,{isMobile:!1}),O.jsx(I,{}),O.jsx(Qy,{}),O.jsx(m.q,{})]})]}),dy=h.PA((()=>{const{gamePhase:y,mainSlot:L,topUpSlot:p}=i.Pj(),N=D.r(L.areReelsReady,p.isSlotReady,y.phase);return O.jsx(xy,{isHidden:N})})),oy=()=>O.jsx(dy,{});var Uy=p(50997),Iy=p(577250),Vy=p(115031),Fy=p(42782),uy=p(587698),Sy=p(252571);const By=h.PA((()=>{const y=i.Pj(),L={betLimitsForGroup:y.settings.betLimitsForGroup,payoutLimit:uy.ej(y.settings.payoutLimit,{currencySymbol:y.abstractGame.currencySymbol}),currencySymbol:y.abstractGame.currencySymbol,isMobile:!1,xxxtremeSpinsEnabled:y.settings.enableXXXtremeSpins,featureBuyEnabled:y.settings.enableFeatureBuy};return O.jsx(Sy.o,{...L})}));var Ry=p(897899);const Yy=()=>O.jsx(Ry.V,{showPayouts:!1}),Ey=()=>({...Fy.p,LayoutBetLimitsHeader:Yy,LayoutBetLimitsBody:By,LayoutBottomRightButtons:[Uy.H7],WinnerListMultiplierComponents:{WinnerMultiplier:Vy.Y},LayoutVideoLoadingIndicatorComponent:Iy.h});window.EVO_LOADER.publishApplication("/frontend/evo/r2/","ls2.desktop",{initialize:async function(y){const L=j.K({gameLoaderParams:y}),{layout:p,dispose:t,onGame3DLoaded:h}=function(y,L){return z.e({params:y,createComponentsMap:Ey,lobby:L,agRootContent:()=>O.jsx(oy,{})})}(y,L),m=N.H(y.getRoot());return m.render(p),await h,{abstractGameDispose:t,root:m}},dispose:t.L,applicationType:"game"})},722928:(y,L,p)=>{var N=p(794140),t=p(809024),j=p(357947),z=p(441650),O=p(671837),h=p(419749),m=p(577250),k=p(248116),_=p(115031),W=p(42782),g=p(64922),C=p(699695),Q=p(525620),T=p(755073),i=p(211958),D=p(786803),w=p(10660),x=p(310605),d=p(50997),o=p(484173),U=p(597951),I=p(653433),V=p(953845),F=p(674833),u=p(331094),S=p(180627),B=p(376028);const R="qualifiedPlayersContainer--c4282",Y="visible--5c552",E="landscape--5c52f",P="tablet--f3dde",l=({visible:y,landscape:L,tablet:p})=>g.jsx("div",{className:C.A(R,{[Y]:y,[E]:L,[P]:p}),children:g.jsx(B.v,{})}),M=Q.PA((()=>{const{qualifiedPlayers:y,device:L}=u.Pj();return g.jsx(l,{visible:y.visible,landscape:L.isLandscape,tablet:L.isTablet})}));var f=p(797635),a=p(264064);const H="gameOverlay--af6f0",X="tablet--7f4bc",J="betStake--22158",r="hidden--d70cd",G="portrait--4b0ef",$="xxxtremeButtonContainer--9c2aa",q="shrinkFit--affee",A="shrinkFitTop--85e81",s="hologramContainer--df7b6",c="menuButtonsContainer--a27f0",K="menuButtonSpace--2d251",b=()=>g.jsxs(T.MobileSafeContainerConnected,{isRng:!1,children:[g.jsx(x.V,{}),g.jsx(U.p,{}),g.jsx("div",{className:C.A(s),children:g.jsx(w.k,{})}),g.jsx("div",{className:$,children:g.jsx(V.U,{})}),g.jsx(D.q,{}),g.jsx(f.O,{}),g.jsx("div",{className:J,children:g.jsx(i._,{})}),g.jsx(M,{})]}),n=({isHidden:y})=>g.jsxs(g.Fragment,{children:[g.jsxs(I.q,{isHidden:y,children:[g.jsx(f.O,{}),g.jsx(x.V,{}),g.jsx(U.p,{}),g.jsx("div",{className:C.A(s,X),children:g.jsx(w.k,{})}),g.jsx("div",{className:C.A($,X),children:g.jsx(V.U,{})})]}),g.jsxs(T.MobileSafeContainerConnected,{isRng:!1,children:[g.jsx("div",{className:C.A(J,y&&r),children:g.jsx(i._,{})}),g.jsxs("div",{className:C.A(c,X),children:[g.jsx("div",{className:K}),g.jsx(d.H7,{})]}),g.jsx(D.q,{})]}),g.jsx(M,{})]}),v=Q.PA((({slotLayout:y,isTransitionInProgress:L,isHidden:p})=>g.jsxs(g.Fragment,{children:[g.jsxs(I.q,{isHidden:p,children:[g.jsx("div",{className:C.A(s,G,y.isMainSlotShrinkFit&&q,y.isTopUpSlotShrinkFit&&L&&!y.isMainSlotShrinkFit&&A),children:g.jsx(w.k,{isMobilePortrait:!0})}),g.jsx("div",{className:C.A($,G,y.isMainSlotShrinkFit&&q,y.isTopUpSlotShrinkFit&&L&&!y.isMainSlotShrinkFit&&A),children:g.jsx(V.U,{})}),g.jsx(x.V,{}),g.jsx(U.p,{}),g.jsx(f.O,{})]}),g.jsxs(T.MobileSafeContainerConnected,{isRng:!1,children:[g.jsx("div",{className:C.A(J,G,p&&r,y.isMainSlotShrinkFit&&q),children:g.jsx(i._,{})}),g.jsx("div",{className:C.A(c,G),children:g.jsx(d.H7,{})}),g.jsx(M,{}),g.jsx(D.q,{})]})]}))),e=Q.PA((({isLandscape:y,isTablet:L,slotLayout:p,isTransitionInProgress:N,isHidden:t})=>{let j={pointerEvents:"none"};return L&&(j={...j}),g.jsxs("div",{className:H,children:[g.jsx(a.Y,{customStyles:j}),y&&!L&&g.jsx(b,{}),!y&&!L&&g.jsx(v,{slotLayout:p,isTransitionInProgress:N,isHidden:t}),L&&g.jsx(n,{isHidden:t}),g.jsx(o.j,{isMobile:!0})]})})),Z=Q.PA((()=>{const{device:y,slotLayout:L,phaseTransitions:p,gamePhase:N,mainSlot:t,topUpSlot:j}=u.Pj(),z=S.r(t.areReelsReady,j.isSlotReady,N.phase);return g.jsx(e,{isHidden:z,isLandscape:y.isLandscape,isTablet:y.isTablet,slotLayout:L,isTransitionInProgress:p.isTransitionToTopUp&&N.phase===F.Q.TopUpSlot})}));var yy=p(587698),Ly=p(252571),py=p(377810),Ny=p(346160),ty=p(509407),jy=p(132006),zy=p(25581),Oy=p(897899),hy=p(744327);const my=({betMinLimit:y,betMaxLimit:L,currencySymbol:p,tableMinLimit:N,tableMaxLimit:t,tableName:j,tBodyComponent:z,preSection:O,areLimitsInlined:h=!1,hideTitle:m=!1,isTablet:k=!1,showPayouts:_,legacyMenuMode:W})=>{const Q=py.useContext(jy.lv),T=py.useMemo((()=>ty.Q({lowerLimit:y,upperLimit:L,currencySymbol:p})),[y,L,p]),i=py.useMemo((()=>{if(t&&N)return ty.Q({lowerLimit:N,upperLimit:t,currencySymbol:p})}),[N,t,p]);return g.jsxs(g.Fragment,{children:[g.jsx(zy.y,{className:hy.A.container,useMobileScrollable:!0,dataRole:W?void 0:"drawer-scrollable",hasContentFadeOut:!W,refCallback:null==Q?void 0:Q.assignScrollable,children:g.jsxs("div",{className:hy.A.scrollContainer,children:[!m&&g.jsxs("div",{className:C.A(hy.A.tableInfo,{[hy.A.tablet]:k}),children:[g.jsxs("div",{children:[`${Ny.Tl("table")}: `,g.jsx("span",{className:hy.A.tableName,children:j})]}),g.jsxs("div",{children:[g.jsx("span",{children:Ny.Tl("betlimits3")})," ",g.jsx("span",{className:hy.A.limits,children:T})]}),!!i&&g.jsxs("div",{"data-role":"table-limits",children:[g.jsx("span",{children:Ny.Tl("tableLimits3")})," ",g.jsx("span",{className:hy.A.limits,children:i})]})]}),O,g.jsxs("table",{className:hy.A.table,children:[g.jsx(Oy.V,{isMobile:!0,areLimitsInlined:h,showPayouts:_,legacyMenuMode:W}),z]})]})}),W&&g.jsx("div",{className:C.A(hy.A.shadow,{[hy.A.tablet]:k})})]})};my.displayName="MobileBetLimitsAndPayoutsTable";const ky=y=>{const{currencySymbol:L,isTablet:p,tableName:N,tableBetLimits:t}=y;return g.jsx(my,{showPayouts:!1,currencySymbol:L,betMinLimit:t[0],betMaxLimit:t[1],isTablet:p,tableName:N,tBodyComponent:g.jsx(Ly.o,{...y})})},_y={betLimits:Q.PA((()=>{const y=u.Pj(),L={betLimitsForGroup:y.settings.betLimitsForGroup,payoutLimit:yy.ej(y.settings.payoutLimit,{currencySymbol:y.abstractGame.currencySymbol}),tableBetLimits:y.settings.tableBetLimits,currencySymbol:y.abstractGame.currencySymbol,isTablet:y.device.isTablet,tableName:y.settings.tableName,isMobile:!0,xxxtremeSpinsEnabled:y.settings.enableXXXtremeSpins,featureBuyEnabled:y.settings.enableFeatureBuy};return g.jsx(ky,{...L})}))},Wy=()=>({...W.p,MobileGameOverlayContainer:Z,MobileMenuNavigationMap:_y,WinnerListMultiplierComponents:{WinnerMultiplier:_.Y},MobileVideoOverlays:[k.O],LayoutVideoLoadingIndicatorComponent:m.h});window.EVO_LOADER.publishApplication("/frontend/evo/r2/","ls2.mobile",{initialize:async function(y){const L=j.K({animation:z.hp.FromLeftToRight,backgroundGradientColor:O.n(y),gameLoaderParams:y}),{layout:p,dispose:t,onGame3DLoaded:m}=function(y,L){return h.e({params:y,createComponentsMap:Wy,lobby:L})}(y,L),k=N.H(y.getRoot());return k.render(p),await m,{abstractGameDispose:t,root:k}},dispose:t.L,applicationType:"game"})},797635:(y,L,p)=>{p.d(L,{U:()=>E,O:()=>l});var N=p(64922),t=p(699695),j=p(525620),z=p(377810),O=p(886490),h=p(837557),m=p(383213),k=p(50997),_=p(291132),W=p(448951),g=p(234658),C=p(674833),Q=p(810156),T=p(331094);const i="menuAndSpinButtonWrapper--968b0",D="spinButton--068ae",w="menuButtonsContainer--fbcd7",x="hidden--e6da6",d="slotButtons--76cd3",o="topUp--55d03",U="mainSlotShrinkFit--80094",I="topUpShrinkFit--867a7",V="turboButtonContainer--6d774",F="autoplayButtonContainer--86f47",u="hidden--86625",S="slotButtons--56d05",B="bigButton--e8587",R="mediumButton--cab2d",Y="hidden--df0a8",E=489,P=200,l=j.PA((()=>{const[y,L]=z.useState(1),p=z.useRef(0),j=T.Pj(),{abstractGame:E,gamePhase:l,topUpSlot:M,mainSlot:f,phaseTransitions:a,slotRect:H,slotLayout:X,device:J}=j,{isLandscape:r,isTablet:G}=J,{height:$}=j.abstractGame.gameDimensions,q=l.phase===C.Q.TopUpSlot&&M.isInScreen||a.isTransitionToPachinko,A=l.phase===C.Q.MainSlot&&f.isInScreen,s=Q.y(j),c=!(A||q)||s,K=!0===h.DS.IS_IN_NON_MW_IFRAME?400:350,b=X.isMainSlotShrinkFit&&H.isSpinIntersectingBetStake,n=H.slotContainerRect.visibleHeight<K&&H.slotContainerRect.y<70&&l.phase===C.Q.TopUpSlot;return z.useEffect((()=>{const y=O.w9((()=>{window.clearTimeout(p.current),L(1)}));return()=>y()}),[]),z.useEffect((()=>{c&&E.hideTooltipsByType(g.Ib.SpinButton)}),[E,c]),z.useEffect((()=>{window.clearTimeout(p.current),r||G?L(1):p.current=window.setTimeout((()=>{L(b||n?.0012*$:1)}),P)}),[$,r,G,b,n]),G?N.jsxs("div",{className:t.A(S,c&&Y),children:[N.jsx("div",{className:R,children:N.jsx(W.vo,{})}),N.jsx("div",{className:B,children:N.jsx(_.h,{})}),N.jsx("div",{className:R,children:N.jsx(m.q,{})})]}):r?N.jsxs("div",{className:t.A(i,c&&x),children:[N.jsx("div",{className:D,children:N.jsx(_.h,{})}),N.jsxs("div",{className:w,children:[N.jsx(k.H7,{}),N.jsx(m.q,{}),N.jsx(W.vo,{})]})]}):N.jsxs("div",{className:t.A(d,c&&u,q&&o,X.isMainSlotShrinkFit&&A&&U,X.isTopUpSlotShrinkFit&&q&&I),style:{"--buttonScale":`${y}`},children:[N.jsx("div",{className:t.A(V),children:N.jsx(W.vo,{})}),N.jsx(_.h,{}),N.jsx("div",{className:t.A(F,X.isMainSlotShrinkFit&&U),children:N.jsx(m.q,{})})]})}))},721120:(y,L,p)=>{function N(y,L){return(1-L)**2*L*3*y+3*(1-L)*L*L*y}function t(y,L,p,N){const t=1-N;return t**3*y+t**2*N*3*(y+p)+3*t*N*N*(L+p)+N*N*N*L}function j(y,L,p,N){const t=2*Math.PI/3,j=function(y,L,p){return(1-p)*y+p*L}(y,L,N);return j+2**(-10*N)*Math.sin(10*N*t)*p}p.d(L,{Cj:()=>j,a7:()=>t,ub:()=>N}),p(228174)},833141:(y,L,p)=>{p.d(L,{D:()=>z});var N=p(769413),t=p(584615);const j=30;function z(y,L){return new O(y,L)}class O extends N.v{static createStepEasing(y){const L=y-1;return 0===L?()=>0:p=>1===p?1:Math.floor(p*y)/L}constructor(y,L){var p;super(y),this.fps=null!==(p=null==L?void 0:L.fps)&&void 0!==p?p:j}animateTo(y,L,p,N){let t;const j=this.getPrevAnimationStep();t=j?j.propsTo[0].value:this.target.frame;const z=Math.abs(y.frame-t)+1;let h;return h=void 0===L?z/this.fps:0===z?0:L,super.animateTo(y,h,O.createStepEasing(z),N)}onTargetUpdated(){super.onTargetUpdated(),this.target.frame=Math.round(this.target.frame)}getPrevAnimationStep(){for(let y=this.steps.length;y--;){const L=this.steps[y];if(t.l(L))return L}}}},663062:(y,L,p)=>{var N;p.d(L,{l:()=>N}),function(y){y[y["None"]=0]="None",y[y["Symbols"]=1]="Symbols",y[y["Dimensions"]=2]="Dimensions",y[y["Outcome"]=4]="Outcome",y[y["Timers"]=8]="Timers"}(N||(N={}))},654560:(y,L,p)=>{p.d(L,{He:()=>t,X3:()=>_,bj:()=>j,nU:()=>N});var N,t,j,z=p(652958),O=p(746380),h=p(663062),m=p(885580),k=p(415215);(function(y){y[y["Absolute"]=0]="Absolute",y[y["Visible"]=1]="Visible"})(N||(N={})),function(y){y[y["SymbolHeight"]=0]="SymbolHeight",y[y["ReelHeight"]=1]="ReelHeight"}(t||(t={})),function(y){y[y["Center"]=0]="Center",y[y["Top"]=1]="Top",y[y["Bottom"]=2]="Bottom"}(j||(j={}));class _{constructor(y,L,p=""){this._timeScale=1,this._isSlowedDown=!1,this._wasSlowedDown=!1,this.forciblyStopped=!1,this.spinMechanics=[],this.currentSpinMechanicIndex=0,this.onStartSequenceBegin=O.lQ,this.onStartSequenceEnd=O.lQ,this.onStopSequenceBegin=O.lQ,this.onStopSequenceEnd=O.lQ,this.onStopBounceBegin=O.lQ,this.onStopBounceEnd=O.lQ,this.id=-1,this.syncSlaves=[],this.nextSequence=z.J.Spin,this.startPromise=Promise.resolve(),this.stopPromise=Promise.resolve(),this.isStarting=!1,this.isStopping=!1;const N={preBufferSize:null!==(W=null==(_=L)?void 0:_.preBufferSize)&&void 0!==W?W:1,postBufferSize:null!==(g=null==_?void 0:_.postBufferSize)&&void 0!==g?g:1,startDelay:null!==(C=null==_?void 0:_.startDelay)&&void 0!==C?C:0,stopDelay:null!==(Q=null==_?void 0:_.stopDelay)&&void 0!==Q?Q:0,reelStrip:null!==(T=null==_?void 0:_.reelStrip)&&void 0!==T?T:new m.x,normalizeTo:null!==(i=null==_?void 0:_.normalizeTo)&&void 0!==i?i:t.SymbolHeight,alignment:null!==(D=null==_?void 0:_.alignment)&&void 0!==D?D:j.Center};var _,W,g,C,Q,T,i,D;this.reelsetName=p,this._data={pool:y,symbolCount:0,visibleHeight:1,preBufferSize:N.preBufferSize,postBufferSize:N.postBufferSize,bufferSize:0,spinTimer:new k.C,startDelayTimer:new k.C(O.fP(N.startDelay)),stopDelayTimer:new k.C(O.fP(N.stopDelay)),buffer:[],outcome:[],outcomeDimensions:[],reelStrip:N.reelStrip,synchronizationFlags:h.l.None,normalizeTo:N.normalizeTo,alignment:N.alignment,targetHighestPointOffset:0}}desynchronize(){for(let y=0;y<this.syncSlaves.length;++y)this.syncSlaves[y]._syncMaster=void 0,this.syncSlaves[y]._data.synchronizationFlags=h.l.None;this.syncSlaves=[],this._syncMaster=void 0,this._data.synchronizationFlags=h.l.None}synchronize(y,L=h.l.None,p=!0){if(this.desynchronize(),L!==h.l.None){for(let L=0;L<y.length;++L)if(y[L].currentSpinMechanic.id!==this.currentSpinMechanic.id)throw new Error("Can not synchronize reels with different kinds of spin mechanics.");this._data.synchronizationFlags=L;for(let L=0;L<y.length;++L)this.syncSlaves.push(y[L]),y[L]._syncMaster=this,y[L].mimicReel(this,this._data.synchronizationFlags,p)}}mimicReel(y,L,p=!0){this._data.synchronizationFlags=L;const t=O._i(L,h.l.Symbols),j=O._i(L,h.l.Dimensions),z=O._i(L,h.l.Outcome),m=O._i(L,h.l.Timers),{outcome:k,buffer:_}=y._data,W=this._data.buffer;if(this._data.preBufferSize=y._data.preBufferSize,this._data.postBufferSize=y._data.postBufferSize,(j||t)&&this.updateBuffer(y._data.symbolCount),z){this._data.outcome=[];const y=this._data.outcome;for(let L=0;L<k.length;++L)y.push(k[L])}if(p){const y=Math.min(W.length,_.length);for(let L=0;L<y;++L){const y=_[L],p=W[L];if(t&&void 0===y&&void 0!==p)p.isDead=!0;else if(void 0!==y&&(t||j)){const z=void 0===p?void 0:p.id,h=t?y.id:z;if(void 0!==h){const t=j||void 0===p?O.Io(y.dimensions):O.Io(p.dimensions);this.setSymbolByID(h,L,N.Absolute,{landingPosition:O.a1(y.landingPosition),dimensions:t,isOutcome:y.isOutcome}).position=O.Io(y.position)}}}}m&&this.copyTimers(y),this.reelStrip.synchronize(y._data.reelStrip,null!=L?L:h.l.None)}copyTimers(y){this._data.startDelayTimer.accumulator=y._data.startDelayTimer.accumulator,this._data.startDelayTimer.stopTime=y._data.startDelayTimer.stopTime,this._data.stopDelayTimer.accumulator=y._data.stopDelayTimer.accumulator,this._data.stopDelayTimer.stopTime=y._data.stopDelayTimer.stopTime,this._data.spinTimer.accumulator=y._data.spinTimer.accumulator,this._data.spinTimer.stopTime=y._data.spinTimer.stopTime}updateBuffer(y){const L=0|y;this._data.symbolCount=L;const p=this._data.preBufferSize+L+this._data.postBufferSize,N=this._data.buffer;this._data.bufferSize=p;for(let y=N.length;y<p;++y)N.push(void 0)}clear(y=!1){const L=this._data.buffer;for(let y=0;y<L.length;++y){const p=L[y];void 0!==p&&this.destroySymbol(p),L[y]=void 0}this._data.outcome=[],this._data.outcomeDimensions=[],this._data.buffer=[],this._data.reelStrip=new m.x,this._data.bufferSize=0,this._data.symbolCount=0,this._data.synchronizationFlags=h.l.None,this._data.visibleHeight=0,y&&this.onDispose()}onDispose(){}setSymbol(y,L,p=N.Visible,t){const j=this._data.buffer,z=L+p*this._data.preBufferSize;if(z<j.length&&z>=0){const L=this.copyAndReplaceSymbol(y,z,{dimensions:t});return void 0!==L&&this.destroySymbol(L),y}throw new Error("Symbol index out of bounds.")}setSymbolByID(y,L,p=N.Visible,t){const j=this._data.buffer,z=L+p*this._data.preBufferSize,O=j.length;if(z<O&&z>=0){const L=this._data.pool.pop(y),p=this.copyAndReplaceSymbol(L,z,t);return L.onSpawn(),void 0!==p&&this.destroySymbol(p),L}throw new Error(`Symbol index (${z}) out of bounds (${O}).`)}swapSymbol(y,L,p=N.Visible,t){const j=this._data.buffer,z=L+p*this._data.preBufferSize;if(z<j.length&&z>=0)return this.copyAndReplaceSymbol(y,z,{dimensions:t});throw new Error("Symbol index out of bounds.")}copyAndReplaceSymbol(y,L,p){var N,t,j;const z=this._data.buffer,O=z[L];let h=!1,m={x:1,y:1},k={reelIndex:this.id,symbolIndex:NaN,reelsetName:this.reelsetName};return void 0!==O&&(h=O.isOutcome,k=O.landingPosition),void 0!==p?(h=null!==(N=p.isOutcome)&&void 0!==N?N:h,k=null!==(t=p.landingPosition)&&void 0!==t?t:k,m=null!==(j=p.dimensions)&&void 0!==j?j:this.currentSpinMechanic.defaultSymbolDimensions()):m=this.currentSpinMechanic.defaultSymbolDimensions(),y.isOutcome=h,y.dimensions={...m},y.landingPosition=k,y.position=this.currentSpinMechanic.getPositionForIndex(L),y.position.x=.5*(y.dimensions.x-1),z[L]=y,this.initializeSymbol(y),y.synchronize({x:0,y:0}),O}getSymbol(y,L=N.Visible){const p=this._data.buffer,t=this._data.preBufferSize,j=y+L*t;if(j<p.length&&j>=0)return p[y+L*t];console.warn(`Symbol index out of bounds for reel ${this.id}: Index is ${j}, buffer size is ${p.length} (prebufferSize = ${t}, symbolCount = ${this._data.symbolCount}, postBufferSize = ${this._data.postBufferSize}`)}forgetSymbol(y,L=N.Visible){const p=this._data.buffer,t=this._data.preBufferSize,j=y+L*t;if(j<p.length&&j>=0){const N=this.getSymbol(y,L);return p[y+L*t]=void 0,N}throw new Error("Symbol index out of bounds.")}destroySymbol(y){y.onDespawn(),this._data.pool.push(y)}addSpinMechanic(y){const L=this.spinMechanics.length;return this.spinMechanics.push(y),L}setCurrentMechanics(y){this.desynchronize(),this.currentSpinMechanic.onDeactivate(),this.currentSpinMechanicIndex=y,this.currentSpinMechanic.onActivate()}initSymbol(y){this.initializeSymbol(y)}updateSymbolLandingPositions(){for(let y=0;y<this._data.buffer.length;++y){const L=this._data.buffer[y];void 0!==L&&(L.landingPosition={reelIndex:this.id,symbolIndex:L.landingPosition.symbolIndex,reelsetName:this.reelsetName})}}destroyDeadSymbols(){const y=this._data.buffer;for(let L=y.length-1;L>=0;--L){const p=y[L];void 0!==p&&p.isDead&&(y[L]=void 0,this.destroySymbol(p))}}timeStep(y){const L=y*this._timeScale;if(this.isMaster){this.currentSpinMechanic.timeStep(L),this.destroyDeadSymbols();for(let y=0;y<this.syncSlaves.length;++y)this.syncSlaves[y].currentSpinMechanic.timeStep(L),this.syncSlaves[y].destroyDeadSymbols()}}async startSpinInternal(){this.isStarting=!0,this._wasSlowedDown=!1,this.nextSequence=z.J.Spin,await this._data.startDelayTimer.wait(),this.startSequenceBegin(),this.onStartSequenceBegin(this.id),this.currentSpinMechanic.setSpinSequence(z.J.Start);const y=this._data.spinTimer.wait();await y,this.startSequenceEnd(),this.onStartSequenceEnd(this.id),this.currentSpinMechanic.setSpinSequence(this.nextSequence),this.isStarting=!1}async startSpin(){return this.forciblyStopped=!1,this.isStarting||(this.startPromise=this.startSpinInternal()),this.startPromise}applyOutcome(){this.updateBuffer(this.outcome.length);const y=this._data.outcomeDimensions;if(this._data.normalizeTo===t.SymbolHeight)if(0===y.length)this._data.visibleHeight=this._data.outcome.length;else{let L=0;for(let p=0;p<y.length;++p)L+=y[p].y;this._data.visibleHeight=L}this.currentSpinMechanic.onOutcomeUpdated()}forceStop(){this.forciblyStopped=!0,this._data.stopDelayTimer.forceStop()}async stopSpinInternal(y){this.isStopping=!0,await this.startPromise,this.currentSpinMechanic.currentSpinSequence===z.J.Start&&(this.nextSequence=z.J.Stop,await this._data.spinTimer.wait()),y?await y:(this.forciblyStopped&&(this._data.stopDelayTimer.stopTime=0),await this._data.stopDelayTimer.wait()),this.applyOutcome(),this.stopSequenceBegin(),this.onStopSequenceBegin(this.id),this.currentSpinMechanic.setSpinSequence(z.J.Stop),this.levelSyncedReels(),await this._data.spinTimer.wait(),this.stopSequenceEnd(),this.onStopSequenceEnd(this.id),this.currentSpinMechanic.setSpinSequence(z.J.Idle),this.isStopping=!1}async stopSpin(y=null){this.isStopping||(this.stopPromise=this.stopSpinInternal(y)),await this.stopPromise}get currentSpinMechanic(){return this.spinMechanics[this.currentSpinMechanicIndex]}set visibleHeight(y){this._data.visibleHeight=y}get visibleHeight(){return this._data.visibleHeight}set timeScale(y){const L=Math.min(y,1),p=this._timeScale;p<1&&1===L?(this._isSlowedDown=!1,this._wasSlowedDown=!0):1===p&&L<1&&(this._isSlowedDown=!0,this._wasSlowedDown=!1),this._timeScale=L,this.data.spinTimer.timeScale=L,this.data.startDelayTimer.timeScale=L,this.data.stopDelayTimer.timeScale=L}get bufferSize(){return this._data.bufferSize}printState(){console.log(`State for Reel ${this.id}: `),console.log(`Visible height:  ${this._data.visibleHeight} `),console.log("Buffer:"),console.log(this._data.buffer)}setOutcome(y,L=[]){if(L.length>0&&L.length!==y.length)throw new Error(`Outcome dimensions length should be equal to 0 or the same length as outcome. Outcome length is ${y.length} and dimensions length is ${L.length}.`);const p=O._i(this._data.synchronizationFlags,h.l.Outcome);if((this.isMaster||!p)&&(this._data.outcome=y,this._data.outcomeDimensions=L,p))for(let L=0;L<this.syncSlaves.length;++L)this.syncSlaves[L]._data.outcome=y}presentOutcome(){if(this.isMaster||!O._i(this._data.synchronizationFlags,h.l.Outcome)){this.presentOutcomeInternal();for(let y=0;y<this.syncSlaves.length;++y)this.syncSlaves[y].presentOutcomeInternal()}}presentOutcomeInternal(){const y=this.outcome.length;this.applyOutcome();for(let L=0;L<y;++L){const y=this.outcome[L];this.setSymbolByID(y,L,N.Visible,{isOutcome:!0,landingPosition:{reelIndex:this.id,symbolIndex:L,reelsetName:this.reelsetName},dimensions:this._data.outcomeDimensions.length>0?this._data.outcomeDimensions[L]:void 0})}this._data.reelStrip.isEmpty()||this.currentSpinMechanic.fillWithReelStripSymbols();for(let y=0;y<this._data.bufferSize;++y){const L=this._data.buffer[y];void 0!==L&&(L.position=this.currentSpinMechanic.getPositionForIndex(y),L.synchronize({x:0,y:0}))}}setStartDelay(y,L=!0){if(this.isMaster&&(this.setStartDelayInternal(y,L),O._i(this._data.synchronizationFlags,h.l.Timers)))for(let p=0;p<this.syncSlaves.length;++p)this.syncSlaves[p].setStartDelayInternal(y,L)}setStartDelayInternal(y,L=!0){this._data.startDelayTimer.stopTime=O.fP(y),L&&(this._data.startDelayTimer.accumulator=0)}setStopDelay(y,L=!0){if(this.isMaster&&(this.setStopDelayInternal(y,L),O._i(this._data.synchronizationFlags,h.l.Timers)))for(let p=0;p<this.syncSlaves.length;++p)this.syncSlaves[p].setStopDelayInternal(y,L)}setAvalancheGravity(y){this._data.reelGravity=y}levelSyncedReels(){if(this.isMaster&&O._i(this._data.synchronizationFlags,h.l.Timers)){let y=this.getHighestPoint();for(let L=0;L<this.syncSlaves.length;++L){const p=this.syncSlaves[L].getHighestPoint();p>y&&(y=p)}this.setTargetHighestPoint(y);for(let L=0;L<this.syncSlaves.length;++L)this.syncSlaves[L].setTargetHighestPoint(y)}}getFirstInsertedOutcomeSymbol(){const y=this.getFirstInsertedOutcomeSymbolIndex();return this._data.buffer[y]}getFirstInsertedOutcomeSymbolIndex(){for(let y=this._data.buffer.length-1;y>=0;--y){const L=this._data.buffer[y];if(void 0!==L&&L.isOutcome)return y}return-1}alignOutcome(){var y;const L=O._i(this._data.synchronizationFlags,h.l.Timers);if(!this.isMaster&&L)return;const p=null!==(y=this._syncMaster)&&void 0!==y?y:this,N=p.getFirstInsertedOutcomeSymbol();if(void 0!==N)for(let y=0;y<p.syncSlaves.length;++y){const L=p.syncSlaves[y].getFirstInsertedOutcomeSymbolIndex();if(L>-1){const t=p.syncSlaves[y]._data.buffer[L];let j=N.position.y-.5*N.dimensions.y;t.position.y=j+.5*t.dimensions.y;let z=t.position.y+.5*t.dimensions.y;for(let N=L+1;N<p.syncSlaves[y]._data.buffer.length;++N){const L=p.syncSlaves[y]._data.buffer[N];void 0!==L&&(L.position.y=j-.5*L.dimensions.y,j-=L.dimensions.y)}for(let N=L-1;N>=0;--N){const L=p.syncSlaves[y]._data.buffer[N];void 0!==L&&(L.position.y=z+.5*L.dimensions.y,z+=L.dimensions.y)}}}}setStopDelayInternal(y,L=!0){this._data.stopDelayTimer.stopTime=O.fP(y),L&&(this._data.stopDelayTimer.accumulator=0)}setTargetHighestPoint(y){this.currentSpinMechanic.setTargetHighestPoint(y)}getHighestPoint(){return this.currentSpinMechanic.getHighestPoint()}get startDelay(){return O.Wj(this._data.startDelayTimer.stopTime)}get stopDelay(){return O.Wj(this._data.stopDelayTimer.stopTime)}get symbolCount(){return this._data.symbolCount}get outcomeSymbolCount(){return this.outcome.length}get preBufferSize(){return this._data.preBufferSize}get postBufferSize(){return this._data.postBufferSize}get reelStrip(){return this._data.reelStrip}get isMaster(){return void 0===this._syncMaster}get syncMaster(){return this._syncMaster}get visibleSymbolCountDuringSpin(){const y=this._data.buffer;let L=0;const p=.5*this.visibleHeight,N=-p;for(let t=0;t<y.length;t++){const j=y[t];if(void 0!==j){const y=.5*j.dimensions.y;j.position.y+y>=N&&j.position.y-y<=p&&++L}}return L}get outcome(){return this._data.outcome}get data(){return this._data}startSequenceBegin(){O.lQ()}startSequenceEnd(){O.lQ()}stopSequenceBegin(){O.lQ()}stopSequenceEnd(){O.lQ()}get isSlowedDown(){return this._isSlowedDown}get wasSlowedDown(){return this._wasSlowedDown}}},885580:(y,L,p)=>{p.d(L,{H:()=>N,x:()=>z});var N,t=p(746380),j=p(663062);(function(y){y[y["Forwards"]=1]="Forwards",y[y["Backwards"]=-1]="Backwards"})(N||(N={}));class z{constructor(){this.symbols=[],this.dimensions=[],this._possibleDimensions=[],this.symbolsIndex=0,this.dimensionsIndex=0}getNextSymbol(y){return{id:this.getNextSymbolID(y),dimensions:this.getNextSymbolDimensions(y)}}synchronize(y,L){t._i(L,j.l.Symbols)&&(this.symbols=y.symbols,this.symbolsIndex=y.symbolsIndex),t._i(L,j.l.Dimensions)&&(this.dimensions=y.dimensions,this.dimensionsIndex=y.dimensionsIndex)}getNextSymbolID(y){return this.symbolsIndex+=y,this.wrapSymbolsIndex(),this.symbols[this.symbolsIndex]}getNextSymbolDimensions(y){return this.dimensionsIndex+=y,this.wrapDimensionsIndex(),this.dimensions.length>0?this.dimensions[this.dimensionsIndex]:void 0}getCurrentSymbol(){return{id:this.getCurrentSymbolID(),dimensions:this.getCurrentSymbolDimensions()}}getCurrentSymbolID(){return this.symbols[this.symbolsIndex]}getCurrentSymbolDimensions(){return this.dimensions[this.dimensionsIndex]}setSymbols(y){this.symbols=y,this.symbolsIndex=this.symbols.length-1}setDimensions(y){this.dimensions=y,this.dimensionsIndex=this.dimensions.length-1,this.updatePossibleDimensions()}isEmpty(){return 0===this.symbols.length}applyIndexOffset(y){this.applySymbolIndexOffset(y),this.applyDimensionsIndexOffset(y)}applySymbolIndexOffset(y){this.symbolsIndex+=y,this.wrapSymbolsIndex()}applyDimensionsIndexOffset(y){this.dimensionsIndex+=y,this.wrapDimensionsIndex()}wrapSymbolsIndex(){this.symbolsIndex=t._g(this.symbolsIndex,this.symbols.length)}wrapDimensionsIndex(){this.dimensionsIndex=t._g(this.dimensionsIndex,this.dimensions.length)}get possibleDimensions(){return this._possibleDimensions}updatePossibleDimensions(){this._possibleDimensions=[];for(let y=0;y<this.dimensions.length;++y)void 0===this._possibleDimensions.find((L=>L.x===this.dimensions[y].x&&L.y===this.dimensions[y].y))&&this._possibleDimensions.push(this.dimensions[y])}}},415215:(y,L,p)=>{p.d(L,{C:()=>t});var N=p(746380);class t{constructor(y=0){this.accumulator=0,this.stopTime=0,this.onStop=N.lQ,this.promise=Promise.resolve(),this.isActive=!1,this._timeScale=1,this.resolve=N.lQ,this._isResolved=!1,this.stopTime=y}async wait(y=!0){return this.isActive||(this.promise=new Promise((L=>{this.resolve=L,this.start(y)}))),this.promise}create(){return this.isActive||(this.promise=new Promise((y=>{this.resolve=y}))),this.promise}forceStop(){if(this.resolve(),this._isResolved=!0,this.isActive){const y=t.timers;this.isActive=!1,y.splice(y.indexOf(this),1)}this.onStop()}start(y=!0){y&&(this.accumulator=0,this._isResolved=!1),this._isResolved||t.timers.includes(this)||(this.isActive=!0,t.timers.push(this))}get progress(){const y=this.accumulator/this.stopTime,L=Math.min(Math.max(y,0),1);return Number.isNaN(Number(L))?1:L}timestep(y){const L=y*this._timeScale;if(this.accumulator+=L,this.accumulator>=this.stopTime){this.accumulator=0;const y=t.timers;y.splice(y.indexOf(this),1),this.isActive=!1,this.resolve(),this._isResolved=!0,this.onStop()}}static timestep(y){const L=t.timers;for(let p=L.length-1;p>=0;--p)L[p].timestep(y)}get timeScale(){return this._timeScale}set timeScale(y){this._timeScale=Math.min(y,1)}}t.timers=[]},652958:(y,L,p)=>{var N;p.d(L,{J:()=>N}),function(y){y[y["Idle"]=0]="Idle",y[y["Start"]=1]="Start",y[y["Spin"]=2]="Spin",y[y["Stop"]=3]="Stop"}(N||(N={}))},821737:(y,L,p)=>{p.d(L,{e:()=>m});var N,t=p(721120),j=p(654560),z=p(885580),O=p(746380),h=p(206288);(function(y){y[y["SingleBounce"]=0]="SingleBounce",y[y["MultipleBounce"]=1]="MultipleBounce",y[y["BallBounce"]=2]="BallBounce"})(N||(N={}));class m extends h.${constructor(y,L){var p,N,t,j,z;super(y,"NormalSpin"),this.frameDistance=0,this.outcomeSymbolToAddIndex=0,this.accumulatedDistance=0,this.despawnPoint=0,this.isOutcomeLanding=!1,this.accumulatedBounceDistance=0,this.stopBounceThreshold=0,this.hasBounced=!1,this._startBounceDuration=.5,this._stopBounceDuration=.5,this._spinVelocity=5,this.currentVelocity=0,this._spinAcceleration=0,this.stopBounceFactor=.1,this.numberOfBounces=0,this._startBounceFactor=.2,this.lowestOutcomeSymbol=void 0,this.endBounceFunction=this.singleBounce,this.accumulatedFillDistance=0,this.endBounceFunctions=[this.singleBounce,this.multipleBounce,this.ballBounce],this._deaccelerationDistance=0,this._deaccelerationFinalVelocity=0,this.deaccelerationThreshold=0,this.currentAcceleration=0,this.hasStartedDeaccelerating=!1,this.currentDeaccelerationVelocity=0,this._startBounceFactor="number"==typeof L.startBounceFactor?L.startBounceFactor:L.startBounceFactor.normal,this.stopBounceFactor="number"==typeof L.stopBounceFactor?L.stopBounceFactor:L.stopBounceFactor.normal,this.numberOfBounces=null!==(p=L.numberOfBounces)&&void 0!==p?p:0,this.endBounceFunction=this.getEndBounceFunction(L.bounceType),this._deaccelerationDistance=null!==(N=L.deaccelerationDistance)&&void 0!==N?N:0,this._spinVelocity=O.fP("number"==typeof L.spinVelocity?L.spinVelocity:L.spinVelocity.normal),this._spinAcceleration="number"==typeof L.spinAcceleration?L.spinAcceleration:null!==(j=null===(t=L.spinAcceleration)||void 0===t?void 0:t.normal)&&void 0!==j?j:0,this._stopBounceDuration=O.fP("number"==typeof L.stopBounceDuration?L.stopBounceDuration:L.stopBounceDuration.normal),this._startBounceDuration=O.fP("number"==typeof L.startBounceDuration?L.startBounceDuration:L.startBounceDuration.normal),this._deaccelerationFinalVelocity=O.fP(null!==(z=L.deaccelerationFinalVelocity)&&void 0!==z?z:0)}onStartSpin(){this.lowestOutcomeSymbol=void 0,this.data.targetHighestPointOffset=-Number.MAX_VALUE,this.accumulatedDistance=0,this.accumulatedBounceDistance=0,this.data.spinTimer.stopTime=this._startBounceDuration,this.fillWithReelStripSymbols(),this.reel.reelStrip.applyIndexOffset(-this.data.preBufferSize-this.data.postBufferSize),this.snap(),this.hasBounced=!1,this.hasStartedDeaccelerating=!1,this.stopBounceThreshold=Number.POSITIVE_INFINITY,this.deaccelerationThreshold=Number.POSITIVE_INFINITY,this.currentDeaccelerationVelocity=Number.POSITIVE_INFINITY,this.currentAcceleration=Number.POSITIVE_INFINITY;const y=this.data.buffer,L=y.length;for(let p=0;p<L;++p){const L=y[p];void 0!==L&&void 0!==L.onStartSpin&&L.onStartSpin()}}startSpin(){const y=this.accumulatedBounceDistance,L=t.ub(this._startBounceFactor,this.data.spinTimer.progress);this.accumulatedBounceDistance=L,this.frameDistance=y-L,this.spinImplementation(),this.synchronizeSymbols()}onStopSpin(){this.outcomeSymbolToAddIndex=this.data.outcome.length,this.stopBounceThreshold=Number.POSITIVE_INFINITY,this.data.spinTimer.stopTime=Number.POSITIVE_INFINITY,this.data.spinTimer.accumulator=0,this.accumulatedFillDistance=0}onIdle(){this.isOutcomeLanding=!1;const y=this.data.outcome,L=y.length,p=this.data.buffer;this.squashPrebuffer();const N=this.data.preBufferSize;for(let t=0;t<L;++t){const L=t+N,z=p[L];void 0!==z&&z.id===y[t]||this.reel.setSymbolByID(y[t],L,j.nU.Absolute,{isOutcome:!0,landingPosition:{reelIndex:this.reel.id,symbolIndex:L,reelsetName:this.reel.reelsetName}})}this.frameDistance=0,this.currentVelocity=0,this.outcomeSymbolToAddIndex=0,this.snap(),this.stopBounceThreshold=Number.POSITIVE_INFINITY,this.synchronizeSymbols();for(let y=0;y<p.length;y++){const L=p[y];void 0!==L&&L.land()}this.reel.onStopBounceEnd(this.reel.id)}stopSpin(y){if(this.fillSymbols())return this.spinImplementation(),void this.synchronizeSymbols();this.calculateStoppingVelocity(y),this.spinImplementation(),this.prependOutcomeSymbols(),this.synchronizeSymbols(),this.calculateStopBounce(),this.checkForDeacceleration()}spin(y){this.setNextFrameDistance(y),this.spinImplementation(),this.prependReelStripSymbols(),this.synchronizeSymbols()}setNextFrameDistance(y){this._spinAcceleration&&this.currentVelocity<this._spinVelocity&&(this.currentVelocity+=this._spinAcceleration),(!this._spinAcceleration||this.currentVelocity>this._spinVelocity)&&(this.currentVelocity=this._spinVelocity),this.frameDistance=this.currentVelocity*y}spinImplementation(){const y=this.data.buffer;this.accumulatedDistance+=Math.abs(this.frameDistance);for(let L=0;L<y.length;L++){const p=y[L];void 0!==p&&(p.position.y-=this.frameDistance)}}onActivate(){this.onOutcomeUpdated()}onOutcomeUpdated(){this.despawnPoint=this.calculateDespawnPoint()}onOutcomeAppeared(y){this.lowestOutcomeSymbol=y,this.stopBounceThreshold=y.position.y-.5*y.dimensions.y-this.calculateVisibleAreaBottom(),this.deaccelerationThreshold=Math.max(0,this.stopBounceThreshold-this._deaccelerationDistance);const L=this._deaccelerationFinalVelocity-this.currentVelocity;this.currentAcceleration=(this.currentVelocity*L+L*L/2)/this._deaccelerationDistance,this.accumulatedDistance=0,this.isOutcomeLanding=!0}getClosestHeightFromReelstrip(y){const L=this.data.reelStrip.possibleDimensions;if(0===L.length)return y;let p=Number.MAX_VALUE,N=0;for(let t=0;t<L.length;++t){const j=Math.abs(L[t].y-y);j<p&&(p=j,N=t)}return L[N].y}fillSymbols(){if(this.accumulatedFillDistance<this.data.targetHighestPointOffset){const y=this.getHighestPoint();this.prependReelStripSymbols(0,{x:1,y:this.getClosestHeightFromReelstrip(this.data.targetHighestPointOffset)});const L=this.getHighestPoint()-y;return this.accumulatedFillDistance+=L,this.data.targetHighestPointOffset-=L,!0}return!1}calculateStoppingVelocity(y){if(this.accumulatedDistance>=this.stopBounceThreshold){const y=this.accumulatedBounceDistance,L=this.endBounceFunction(this.data.spinTimer.progress);this.accumulatedBounceDistance=L,this.frameDistance=L-y}else this.accumulatedDistance>=this.deaccelerationThreshold?(this.frameDistance=this.currentDeaccelerationVelocity*y+this.currentAcceleration*y*y/2,this.currentDeaccelerationVelocity+=this.currentAcceleration*y,this.accumulatedDistance+this.frameDistance>this.stopBounceThreshold&&(this.frameDistance=this.stopBounceThreshold-this.accumulatedDistance)):(this.setNextFrameDistance(y),this.accumulatedDistance+this.frameDistance>this.stopBounceThreshold?this.frameDistance=this.stopBounceThreshold-this.accumulatedDistance:this.accumulatedDistance+this.frameDistance>this.deaccelerationThreshold&&(this.frameDistance=this.deaccelerationThreshold-this.accumulatedDistance))}calculateStopBounce(){!this.hasBounced&&this.accumulatedDistance>=this.stopBounceThreshold&&(this.hasBounced=!0,this.data.spinTimer.accumulator=0,this.data.spinTimer.stopTime=this._stopBounceDuration,this.accumulatedDistance=this.stopBounceThreshold,this.accumulatedBounceDistance=0,this.frameDistance=0,this.notifyBounce())}checkForDeacceleration(){!this.hasStartedDeaccelerating&&this.accumulatedDistance>=this.deaccelerationThreshold&&(this.hasStartedDeaccelerating=!0,this.currentDeaccelerationVelocity=this.currentVelocity)}notifyBounce(){const y=this.data.buffer,L=y.length;for(let p=0;p<L;++p){const L=y[p];void 0!==L&&void 0!==L.bounce&&L.bounce()}this.reel.onStopBounceBegin(this.reel.id)}prependOutcomeSymbols(){var y;if(this.outcomeSymbolToAddIndex<0)return;const L=this.data.outcome,p=this.data.preBufferSize-1,N=this.data.buffer;let t=N[p];const O=this.calculateSpawnPoint();for(;void 0===t||t.position.y-.5*t.dimensions.y<=O;){if(--this.outcomeSymbolToAddIndex,this.outcomeSymbolToAddIndex<0){this.shiftSymbolsDown(this.data.preBufferSize);const L=this.data.preBufferSize;for(let p=0;p<L;++p){let t=this.reel.reelStrip.getNextSymbol(z.H.Backwards);for(;null===(y=t.dimensions)||void 0===y?void 0:y.colossalData;){const y=L-p,N=t.dimensions.colossalData,j=N.colossalSize.y-N.positionInColossalSpace.y;if(y>=j)break;this.reel.reelStrip.applyIndexOffset(-(j-1)),t=this.reel.reelStrip.getNextSymbol(z.H.Backwards)}const j=N[this.prependSymbol(t.id,{dimensions:t.dimensions,landingPosition:{reelIndex:this.reel.id,symbolIndex:NaN,reelsetName:this.reel.reelsetName},isOutcome:!1})];this.clampPrependedSymbolPosition(j)}break}const O=L[this.outcomeSymbolToAddIndex];this.shiftSymbolsDown(1);const h=this.prependSymbol(O,{dimensions:0===this.data.outcomeDimensions.length||this.data.normalizeTo===j.He.ReelHeight?this.defaultSymbolDimensions():this.data.outcomeDimensions[this.outcomeSymbolToAddIndex],landingPosition:{reelIndex:this.reel.id,symbolIndex:this.outcomeSymbolToAddIndex,reelsetName:this.reel.reelsetName},isOutcome:!0});if(h>-1){const y=N[h];this.clampPrependedSymbolPosition(y),this.outcomeSymbolToAddIndex===L.length-1&&this.onOutcomeAppeared(y)}t=N[p]}void 0!==this.lowestOutcomeSymbol&&(this.reel.alignOutcome(),this.onOutcomeAppeared(this.lowestOutcomeSymbol))}despawnSymbols(){const y=this.data.buffer,L=y.length;for(let p=this.isOutcomeLanding?this.data.bufferSize:0;p<L;++p){const L=y[p];void 0!==L&&L.position.y+.5*L.dimensions.y<this.despawnPoint&&(L.isDead=!0)}}clampPrependedSymbolPosition(y){void 0!==y&&y.position.y+.5*y.dimensions.y<this.despawnPoint&&(y.position.y=this.despawnPoint)}prependReelStripSymbols(y=0,L=void 0){const p=this.data.buffer,N=this.data.preBufferSize-1;let t=p[N];const j=this.calculateSpawnPoint();let O=0;for(;void 0===t||t.position.y-.5*t.dimensions.y<j;){this.squashPrebuffer();const j=this.reel.reelStrip.getNextSymbol(z.H.Backwards);this.shiftSymbolsDown(1);const h=p[this.prependSymbol(j.id,{dimensions:null!=L?L:j.dimensions,isOutcome:!1,landingPosition:{reelIndex:this.reel.id,symbolIndex:NaN,reelsetName:this.reel.reelsetName}})];if(this.clampPrependedSymbolPosition(h),t=p[N],y>0&&++O>=y)break}}synchronizeSymbols(){this.despawnSymbols();for(let y=0;y<this.data.buffer.length;y++){const L=this.data.buffer[y];void 0!==L&&L.synchronize({x:0,y:this.frameDistance})}}set startBounceDuration(y){this._startBounceDuration=O.fP(y)}get startBounceDuration(){return O.Wj(this._startBounceDuration)}set stopBounceDuration(y){this._stopBounceDuration=O.fP(y)}get stopBounceDuration(){return O.Wj(this._stopBounceDuration)}set spinVelocity(y){this._spinVelocity=O.fP(y)}get spinVelocity(){return O.Wj(this._spinVelocity)}set spinAcceleration(y){this._spinAcceleration=y}set startBounceFactor(y){this._startBounceFactor=y}setTargetHighestPoint(y){this.accumulatedFillDistance=0;const L=y-this.getHighestPoint();L>O.A1&&(this.data.targetHighestPointOffset=L)}getEndBounceFunction(y){return void 0===y?this.endBounceFunctions[0]:this.endBounceFunctions[y]}setEndBounceFunction(y){this.endBounceFunction=this.getEndBounceFunction(y)}singleBounce(y){return t.a7(0,0,this.stopBounceFactor,y)}multipleBounce(y){return t.Cj(0,0,this.stopBounceFactor,y)}ballBounce(y){return O.ys(this.stopBounceFactor,this.numberOfBounces,y)}}},206288:(y,L,p)=>{p.d(L,{$:()=>O});var N=p(654560),t=p(885580),j=p(746380),z=p(652958);class O{constructor(y,L){this.timestepFunction=j.lQ,this._spinMode=0,this._currentSpinSequence=z.J.Idle,this._id=L,this.reel=y,this.data=y.data}timeStep(y){this.timestepFunction(y)}setSpinSequence(y){if(y!==this.currentSpinSequence)switch(y){case z.J.Start:this._currentSpinSequence=z.J.Start,this.onStartSpin(),this.timestepFunction=this.startSpin.bind(this);break;case z.J.Stop:this._currentSpinSequence=z.J.Stop,this.onStopSpin(),this.timestepFunction=this.stopSpin.bind(this);break;case z.J.Spin:this._currentSpinSequence=z.J.Spin,this.onSpin(),this.timestepFunction=this.spin.bind(this);break;default:this._currentSpinSequence=z.J.Idle,this.onIdle(),this.timestepFunction=j.lQ}}synchronizeSymbols(){for(let y=0;y<this.data.buffer.length;y++){const L=this.data.buffer[y];void 0!==L&&L.synchronize({x:0,y:0})}}onIdle(){j.lQ()}onStartSpin(){j.lQ()}onSpin(){j.lQ()}onStopSpin(){j.lQ()}defaultSymbolDimensions(){const y={x:1,y:1};return this.data.normalizeTo===N.He.ReelHeight&&(y.y=this.data.visibleHeight/this.data.symbolCount),y}getPostBufferIndex(){return this.data.preBufferSize+this.data.symbolCount}getDimensionsForIndex(y){var L,p;return null!==(p=null===(L=this.data.buffer[y])||void 0===L?void 0:L.dimensions)&&void 0!==p?p:this.defaultSymbolDimensions()}getPositionForIndex(y){let L=0,p=0,t=0;const j=this.getPostBufferIndex();let z,O=0;for(let N=0;N<this.data.bufferSize;++N){const z=this.getDimensionsForIndex(N).y;L+=z,N<this.data.preBufferSize&&(p+=z),N>=j&&(t+=z),N<y&&(O+=z)}return z=this.data.alignment===N.bj.Bottom?this.calculateVisibleAreaBottom()-t+L-O-.5*this.getDimensionsForIndex(y).y:this.calculateVisibleAreaTop()+p-O-.5*this.getDimensionsForIndex(y).y,{x:0,y:z}}fillWithReelStripSymbols(){const y=this.reel.reelStrip,L=this.data.preBufferSize,p=this.data.bufferSize,j=this.data.buffer,z=this.getPostBufferIndex(),O=this.reel;for(let p=0;p<L;++p)if(void 0===j[p]){const j=y.getNextSymbol(t.H.Backwards);O.setSymbolByID(j.id,p-L,N.nU.Visible,{dimensions:j.dimensions})}y.applyIndexOffset(L);for(let L=z;L<p;++L)if(void 0===j[L]){const p=y.getNextSymbol(t.H.Forwards);O.setSymbolByID(p.id,L,N.nU.Absolute,{dimensions:p.dimensions})}}trimExcess(){const y=this.data.bufferSize,L=this.data.buffer;for(let p=y;p<L.length;++p)this.tryDestroySymbol(L[p]),L[p]=void 0}trimPreBuffer(){const y=this.data.preBufferSize,L=this.data.buffer;for(let p=0;p<y;++p)this.tryDestroySymbol(L[p]),L[p]=void 0}trimPostBuffer(){const y=this.data.preBufferSize,L=this.data.buffer;for(let p=y+this.data.symbolCount;p<L.length;++p)this.tryDestroySymbol(L[p]),L[p]=void 0}trimOffBuffers(){this.trimPreBuffer(),this.trimPostBuffer()}onActivate(){j.lQ()}onDeactivate(){j.lQ()}appendSymbol(y,L){const p=this.data.buffer,t=this.data.bufferSize-1;let j=t;for(let y=t;y>=0;y--)if(void 0!==p[y]){j=y;break}if(j===t)return-1;const z=j+1,O=this.reel.setSymbolByID(y,z,N.nU.Absolute,L),h=p[j];return void 0!==h&&(O.position.y=h.position.y-.5*h.dimensions.y-.5*O.dimensions.y,O.synchronize({x:0,y:0})),z}prependSymbol(y,L){let p=0;const t=this.data.buffer,j=this.data.bufferSize;for(let y=0;y<j;++y)if(void 0!==t[y]){p=y;break}if(0===p)return-1;const z=p-1,O=this.reel.setSymbolByID(y,z,N.nU.Absolute,L),h=t[p];return void 0!==h&&(O.position.y=h.position.y+.5*h.dimensions.y+.5*O.dimensions.y),z}shiftSymbolsDown(y){const L=this.data.buffer;let p=L.length-1,N=0;for(let t=p;t>=y;--t)if(void 0!==L[t]){N=t+y;for(let y=p;y<=N;++y)L.push(void 0),p=L.length-1;break}for(let N=p;N>=y;--N)L[N]=L[N-y];for(let p=0;p<y;++p)L[p]=void 0}shiftSymbolsUp(y){if(y<=0)return;const{buffer:L}=this.data,p=Math.min(y,L.length);for(let y=0;y<p;y++)this.tryDestroySymbol(L[y]);L.splice(0,p);for(let y=0;y<p;y++)L.push(void 0)}tryDestroySymbol(y){return void 0!==y&&(y.isDead=!0,this.reel.destroySymbol(y),!0)}setTargetHighestPoint(y){this.data.targetHighestPointOffset=y-this.getHighestPoint()}getHighestPoint(){for(let y=0;y<this.data.buffer.length;++y){const L=this.data.buffer[y];if(void 0!==L)return L.position.y+.5*L.dimensions.y}return 0}snap(){for(let y=0;y<this.data.buffer.length;++y){const L=this.data.buffer[y];void 0!==L&&(L.position.y=this.getPositionForIndex(y).y)}}calculateVisibleAreaTop(){switch(this.data.alignment){case N.bj.Bottom:return this.data.visibleHeight;case N.bj.Center:return.5*this.data.visibleHeight;case N.bj.Top:return 0;default:return.5*this.data.visibleHeight}}calculateVisibleAreaBottom(){switch(this.data.alignment){case N.bj.Bottom:return 0;case N.bj.Center:return.5*-this.data.visibleHeight;case N.bj.Top:return-this.data.visibleHeight;default:return.5*-this.data.visibleHeight}}squashPrebuffer(){for(let y=0;y<this.data.preBufferSize;++y)void 0===this.data.buffer[y]&&this.data.buffer.splice(y,1)}calculateSpawnPoint(){return this.calculateVisibleAreaTop()+this.defaultSymbolDimensions().y*this.data.preBufferSize}calculateDespawnPoint(){return this.calculateVisibleAreaBottom()-this.data.postBufferSize*this.defaultSymbolDimensions().y}onOutcomeUpdated(){j.lQ()}get id(){return this._id}set spinMode(y){this.reel.desynchronize(),this._spinMode=y}get spinMode(){return this._spinMode}get currentSpinSequence(){return this._currentSpinSequence}}},746380:(y,L,p)=>{p.d(L,{A1:()=>W,Io:()=>h,Wj:()=>_,_g:()=>j,_i:()=>O,a1:()=>m,fP:()=>k,lQ:()=>t,yL:()=>g,ys:()=>z});var N=p(721120);function t(){}const j=(y,L)=>(L+y%L)%L;function z(y,L,p){if(L<=0)return 0;let t=0,j=0;for(let N=0;N<L;N++){const z=1/L*N,O=1/L*(N+1),h=1-(1-z)*(1-z),m=1-(1-O)*(1-O);if(p>=h&&p<=m){const L=m-h;t=(p-h)/L,j=y*L;break}}return-N.ub(j,t)}const O=(y,L)=>(y&L)===L,h=y=>({x:y.x,y:y.y}),m=y=>({symbolIndex:y.symbolIndex,reelIndex:y.reelIndex,reelsetName:void 0===y.reelsetName?"":`${y.reelsetName}`}),k=y=>.001*y,_=y=>1e3*y,W=1e-4;function g(y){return null!==y&&"object"==typeof y&&"function"==typeof y.then&&"function"==typeof y.catch}},264064:(y,L,p)=>{p.d(L,{Y:()=>O});var N=p(64922),t=p(263601),j=p(377810),z=p(484584);const O=({customStyles:y})=>{const L=j.useRef(null),{canvas:p,root:O}=j.useContext(z.A);return j.useEffect((()=>{const y=L.current;return p&&y&&y.appendChild(p),()=>{p&&(null==y||y.removeChild(p))}}),[p]),j.useEffect((()=>{const y=L.current;if(!y)return;const p=t.A((y=>{if(!O)return;const L=y[0],{width:p,height:N,top:t,left:j}=L.contentRect;O.configure({camera:{aspect:p/N},size:{width:p,height:N,top:t,left:j}})}),0),N=new ResizeObserver(p);return N.observe(y),()=>{y&&N.unobserve(y),N.disconnect()}}),[O]),N.jsx("div",{style:{height:"100%",position:"relative",width:"100%",overflow:"hidden",pointerEvents:"auto",touchAction:"none",...y},ref:L})}},484584:(y,L,p)=>{p.d(L,{A:()=>N});const N=p(377810).createContext({canvas:null,root:null})},925877:(y,L,p)=>{p.d(L,{k:()=>I});var N=p(64922),t=p(699695),j=p(377810),z=p(168855),O=p(587698),h=p(346160),m=p(5519),k=p(710928),_=p(124315);function W({disabled:y,isSelectorVisible:L,isMobile:p}){const[N,t]=j.useState(!1),z=j.useRef(),O=j.useCallback((()=>t(!1)),[]);return j.useEffect((()=>{L&&t(!1)}),[L]),j.useEffect((()=>()=>{p&&(window.clearTimeout(z.current),t(!1),document.removeEventListener("touchstart",O))}),[y,p,O]),{tooltipVisible:N,handleMouseLeave:O,tooltipVisibilityHandler:N=>{"mousedown"===N.type&&!y||L||(window.clearTimeout(z.current),t(!0),p&&document.addEventListener("touchstart",O,{once:!0}),z.current=window.setTimeout((()=>{t(!1)}),k.p_))}}}var g=p(131660);const C={iconWrapper:"iconWrapper--c36a2",icon:"icon--26654",buttonBase:"buttonBase--8a4b7",midBorderBase:"midBorderBase--a672d",fill:"fill--17504",midBody:"midBody--9f4c6",default:"default--a5d09",mainLight:"mainLight--df42c",activated:"activated--b4d7a",disabled:"disabled--b5032",customColor:"customColor--a4694",button:"button--f4fb5",buttonModePhone:"buttonModePhone--15686",buttonModeSlots:"buttonModeSlots--ae69e",buttonContainer:"buttonContainer--74db6",buttonModeTablet:"buttonModeTablet--44642",promotion:"promotion--2c870",promotionActivated:"promotionActivated--98f99",callToAction:"callToAction--d3576",ctaPulseKeyframes:"ctaPulseKeyframes--438bb",showBetStakeActionButtons:"showBetStakeActionButtons--9a488",buttonContent:"buttonContent--dc729",buttonSection:"buttonSection--ce87a",buttonWrapper:"buttonWrapper--4e9f5",sideButtonWrapper:"sideButtonWrapper--c445a",middleSection:"middleSection--35e03",leftSection:"leftSection--6a185",rightSection:"rightSection--37600",highlight:"highlight--6e10a",buttonModeDesktop:"buttonModeDesktop--3e1a5",leftLine:"leftLine--4b930",rightLine:"rightLine--b4c3e",action:"action--10114",chooseBetStake:"chooseBetStake--9f350",label:"label--f4a59",stake:"stake--87a85",customStrokeColor:"customStrokeColor--1d47c",withoutBorders:"withoutBorders--847d5"},Q="bet-stake-middle",T=j.memo((({label:y,currentStake:L,currencySymbol:p,showBetStakeActionButtons:z,state:T,onClick:i,isPhone:D,isTablet:w,isSlots:x,isSelectorVisible:d,disabled:o,disableReason:U})=>{const I=j.useRef(null),V=j.useRef(null),F=j.useRef(null),u=_.i();j.useEffect((()=>{F.current&&I.current&&u&&g.mV(F.current,I.current)}),[u]),j.useEffect((()=>{F.current&&V.current&&u&&g.Bd({containerElement:F.current,amountElement:V.current,minFontSize:D?11:12,currentStake:L,currencySymbol:p})}),[L,u]);const S=L>=1e6?O.K3(L,p):O.ej(L,{currencySymbol:p}),B=j.useMemo((()=>N.jsxs("div",{className:C.chooseBetStake,ref:F,children:[N.jsx("div",{className:C.label,ref:I,children:y}),N.jsx("div",{className:C.stake,ref:V,children:S}),z&&N.jsxs(N.Fragment,{children:[N.jsx("div",{className:C.highlight}),N.jsx("div",{className:C.leftLine}),N.jsx("div",{className:C.rightLine})]})]})),[L,y,z,p]),R=d?void 0:o?g.IR(U):h.Tl("tooltip.SelectYourBet"),Y=D||w,{tooltipVisible:E,tooltipVisibilityHandler:P,handleMouseLeave:l}=W({disabled:o,isSelectorVisible:d,isMobile:Y});return N.jsxs("div",{className:C.buttonWrapper,onMouseDown:P,onTouchEnd:P,onMouseEnter:P,onMouseLeave:l,children:[R&&N.jsx(k.m_,{isVisible:E,label:R,verticalPosition:k.Ne.Top,animateTooltip:!0,hasAnchor:!Y}),N.jsx(m.S,{isPhone:D,isTablet:w,size:x?"L":void 0,state:T,buttonContent:B,role:Q,onClick:i,className:t.A(C.middleSection,{[C.disabled]:o,[C.buttonSection]:z,[C.buttonModeDesktop]:!D&&!w,[C.activated]:d}),roundedCorners:z?"None":"Both"})]})}));T.displayName="ChooseBetStake";const i=()=>N.jsx("svg",{viewBox:"0 0 12 5",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:N.jsx("path",{d:"M0 0.416626H12V4.91663H0V0.416626Z",fill:"#FEF0CC"})}),D="bet-stake-decrease",w=j.memo((({onClick:y,state:L,isPhone:p,isTablet:z,isSlots:O,disableReason:_,isSelectorVisible:Q})=>{const T=j.useMemo((()=>N.jsxs(N.Fragment,{children:[N.jsx("div",{className:C.highlight}),N.jsx("div",{className:C.action,children:N.jsx(i,{})})]})),[]),w=p||z,x="Disabled"===L,d=x?g.IR(_):w?void 0:h.Tl("tooltip.betSelector.decrease"),{tooltipVisible:o,tooltipVisibilityHandler:U,handleMouseLeave:I}=W({disabled:x,isSelectorVisible:Q,isMobile:w});return N.jsxs("div",{className:t.A(C.buttonWrapper,C.sideButtonWrapper),onMouseDown:U,onTouchEnd:U,onMouseEnter:U,onMouseLeave:I,children:[d&&N.jsx(k.m_,{isVisible:o,label:d,verticalPosition:k.Ne.Top,animateTooltip:!0,hasAnchor:!w}),N.jsx(m.S,{isPhone:p,isTablet:z,state:L,buttonContent:T,role:D,onClick:y,roundedCorners:"Left",className:t.A(C.leftSection,C.buttonSection,{[C.disabled]:x,[C.buttonModeDesktop]:!p&&!z}),size:O?"L":void 0})]})}));w.displayName="DecreaseBetStake";const x=()=>N.jsx("svg",{viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:N.jsx("path",{d:"M9.25 5.41663V0.916626H4.75L4.75 5.41663H0.25V9.91663H4.75L4.75 14.4166H9.25V9.91663H13.75V5.41663H9.25Z",fill:"#FEF0CC"})}),d="bet-stake-increase",o=j.memo((({onClick:y,state:L,isPhone:p,isTablet:z,isSlots:O,disableReason:_,isSelectorVisible:Q})=>{const T=j.useMemo((()=>N.jsxs(N.Fragment,{children:[N.jsx("div",{className:C.highlight}),N.jsx("div",{className:C.action,children:N.jsx(x,{})})]})),[]),i=z||p,D="Disabled"===L,w=D?g.IR(_):i?void 0:h.Tl("tooltip.betSelector.increase"),{tooltipVisible:o,tooltipVisibilityHandler:U,handleMouseLeave:I}=W({disabled:D,isSelectorVisible:Q,isMobile:i});return N.jsxs("div",{className:t.A(C.buttonWrapper,C.sideButtonWrapper),onMouseDown:U,onTouchEnd:U,onMouseEnter:U,onMouseLeave:I,children:[w&&N.jsx(k.m_,{isVisible:o,label:w,verticalPosition:k.Ne.Top,animateTooltip:!0,hasAnchor:!i}),N.jsx(m.S,{isPhone:p,isTablet:z,size:O?"L":void 0,state:L,buttonContent:T,role:d,onClick:y,roundedCorners:"Right",className:t.A(C.rightSection,C.buttonSection,{[C.disabled]:D,[C.buttonModeDesktop]:!p&&!z})})]})}));o.displayName="IncreaseBetStake";const U={Default:"default",Disabled:"disabled",Activated:"activated"},I=j.memo((({state:y,layerStyles:L,label:p="BET",currentStake:O,currencySymbol:h,decreaseButtonEnabled:m=!0,increaseButtonEnabled:k=!0,onIncreaseClick:_,onOpenSelector:W,onDecreaseClick:g,onCloseSelector:Q,showBetStakeActionButtons:i=!0,isPhone:D,isTablet:x,isSlots:d=!1,isSelectorVisible:I,buttonRef:V,disableReason:F,withoutBorders:u=!1,theme:S="default"})=>{var B;const R=z.F(["customizableButton","popupBubble","betStake"],L),Y=N.jsx("div",{className:C.buttonBase,"data-role":"betstake-base-border",children:N.jsx("div",{className:C.midBorderBase,"data-role":"betstake-mid-border",children:N.jsx("div",{className:C.fill,children:N.jsxs("div",{className:C.midBody,children:[N.jsx("div",{className:C.fill}),N.jsx("div",{className:C.mainLight})]})})})});let E=C[null!==(B=U[y])&&void 0!==B?B:"default"];"default"!==S&&(E=void 0);const P=t.A(C.button,C.buttonContainer,E,{[C.withoutBorders]:u,[C.showBetStakeActionButtons]:i,[C.buttonModePhone]:D,[C.buttonModeTablet]:x,[C.buttonModeSlots]:!D&&d,[C.promotion]:"promo"===S,[C.promotionActivated]:"promoActive"===S,[C.callToAction]:"callToAction"===S}),l=j.useCallback((y=>{m&&(null==y||y.preventDefault(),null==y||y.stopPropagation(),g())}),[g,m]),M=j.useCallback((y=>{k&&(null==y||y.preventDefault(),null==y||y.stopPropagation(),_())}),[_,k]),f=j.useCallback((y=>{null==y||y.preventDefault(),null==y||y.stopPropagation(),W()}),[W]),a="Activated"===y,H="Disabled"===y,X=m&&!H||a?y:"Disabled",J=k&&!H||a?y:"Disabled";return N.jsx("div",{className:P,"data-role":"bet-stake-button",ref:V,style:R,children:N.jsxs("span",{className:C.buttonContent,"data-role":"bet-stake-button-content",children:[Y,i&&N.jsx(w,{onClick:l,state:X,isPhone:D,isTablet:x,isSlots:d,disableReason:F,isSelectorVisible:I}),N.jsx(T,{label:p,currentStake:O,showBetStakeActionButtons:i,state:y,onClick:I?Q:f,isPhone:D,isTablet:x,isSlots:d,disabled:H&&!a,isSelectorVisible:I,disableReason:F,currencySymbol:h}),i&&N.jsx(o,{onClick:M,state:J,isPhone:D,isTablet:x,isSlots:d,disableReason:F,isSelectorVisible:I})]})})}));I.displayName="BetStakeButton"},131660:(y,L,p)=>{p.d(L,{Bd:()=>k,IR:()=>O,XT:()=>h,mV:()=>_});var N=p(346160),t=p(587698),j=p(328382),z=p(822381);function O(y){switch(y){case"lowBalance":return N.Tl("tooltip.balanceTooLow");case"gameRoundInProgress":return N.Tl("tooltip.waitForNextGame");case"minBetReached":return N.Tl("tooltip.minBetReached");case"maxBetReached":return N.Tl("tooltip.maxBetReached");case"autoplayRunning":return N.Tl("ap3.tooltip.noChangeBets");case"maxPayoutReached":return N.Tl("tooltip.maxPayoutReached");default:return}}function h({isGameRoundInProgress:y,isBalanceLow:L,selectedStakeIndex:p,lastStakeIndex:N,isForcefullyDisabled:t,isNextStakeDisabled:j,isAutoplayRunning:z,maxPayoutReached:O}){const h=p===N;switch(!0){case t:return;case z:return"autoplayRunning";case y:return"gameRoundInProgress";case!h&&j&&O:return"maxPayoutReached";case L:case!h&&j:return"lowBalance";case h:return"maxBetReached";case 0===p:return"minBetReached";default:return}}function m({containerElement:y,textElement:L,minFontSize:p,recalculated:N}){const t=window.getComputedStyle(L),O=parseFloat(t.fontSize),h=parseFloat(document.body.style.fontSize)||j.SG,m=y.clientWidth,k=L.scrollWidth,_=k>m,W=function(y,L,p){return p*(y/L)}(m,k,O),g=W/h,C=p/h;if(_){if(W<p){if(N){const y=g.toFixed(3);return z.o1(y)}if(p>h)return z.o1(1);const y=C.toFixed(3);return z.o1(y)}const y=g.toFixed(3);return z.o1(y)}return""}function k({containerElement:y,amountElement:L,minFontSize:p,currentStake:N,currencySymbol:j}){L.style.fontSize="";const z=""===j?2:void 0,O=window.getComputedStyle(L),h=document.createElement("div");document.body.appendChild(h),h.style.fontSize=O.fontSize,h.style.fontWeight=O.fontWeight,h.style.whiteSpace="nowrap",h.style.width=O.width,h.style.visibility="hidden",h.textContent=L.textContent,h.style.fontSize=m({containerElement:y,textElement:h,minFontSize:p}),h.scrollWidth-1>y.clientWidth&&(h.textContent=t.ej(N,{currencySymbol:j,maximumDecimalCount:z}),h.scrollWidth>y.clientWidth&&(h.style.fontSize=m({containerElement:y,textElement:h,minFontSize:p,recalculated:!0}))),L.style.fontSize=h.style.fontSize,L.textContent=h.textContent,document.body.removeChild(h)}function _(y,L){L.style.fontSize=m({containerElement:y,textElement:L,minFontSize:10})}},422599:(y,L,p)=>{p.d(L,{Fn:()=>N.cp,n0:()=>z});var N=p(548773);const t=10,j={0:12.24,1:10.17,2:12.06,3:11.05,4:11.94,5:11.8,6:11.88,7:11.58,8:11.44,9:11.99,"+":11.93};function z(y){return`${y}`.split("").reduce(((y,L)=>y+(j[L]||t)),0)}},548773:(y,L,p)=>{p.d(L,{cp:()=>x});var N=p(64922),t=p(377810),j=p(886490),z=p(775286),O=p(328382);function h(){const[y,L]=t.useState(null);return[y,t.useCallback((y=>{L(y)}),[])]}const m="strokeGradient",k="fillGradient",_="sign",W="text",g="#F9E6B9",C=.5,Q=4*C,T=-2,i=13,D=9.8,w={x:0,y:0,height:24,width:24},x=y=>{const{value:L,className:p,ignoreFontLoad:m=!1,width:k,signMargin:_=T}=y,W=void 0!==k,g=W?k:w.width,[C]=t.useState(`${Math.random()}`),[D,x]=t.useState(g+i),[I,V]=t.useState({...w,width:g}),[F,u]=h(),[S,B]=h(),[R,Y]=t.useState(m),E=t.useCallback((()=>{if(x(void 0),!F)return void V(w);const y=F.getBBox();V(y);const L=window.requestAnimationFrame((()=>{if(S){const y=function(y,L=1){const p=y.getBoundingClientRect();return{left:p.left/L,top:p.top/L,width:p.width/L,height:p.height/L}}(S,O.Rr());x(y.width)}}));return()=>{window.cancelAnimationFrame(L)}}),[S,F]);(W?t.useEffect:t.useLayoutEffect)((()=>{W||E()}),[L,F,E,W,R]),t.useEffect((()=>(W||j.w9(E),()=>j.Fu(E))),[E,W]);const P=t.useCallback((()=>{Y(!0)}),[]);return t.useEffect((()=>{if(!m){let y=!0;return z.Al("EvoMoneyWheelCommonMultiplier").then((()=>y&&P())).catch((()=>y&&P())),()=>{y=!1}}}),[P,m]),R&&0!==L.length?N.jsx("svg",{width:D,height:"100%",viewBox:`0 0 ${I.width+.5*Q+i} ${I.height}`,xmlns:"http://www.w3.org/2000/svg",id:`multiplier-${C}`,className:p,children:N.jsxs("g",{ref:B,children:[d({id:C,value:L}),o({id:C,setTextRef:u}),U({id:C,textRect:I,signMargin:_})]})}):null};function d(y){const{id:L,value:p}=y;return N.jsxs("defs",{children:[N.jsxs("linearGradient",{x1:"50%",y1:"101.538932%",x2:"49.7773808%",y2:"6.55214779%",id:`${k}-${L}`,children:[N.jsx("stop",{stopColor:"#FFE600",offset:"0%"}),N.jsx("stop",{stopColor:"#E19300",offset:"20.170604%"}),N.jsx("stop",{stopColor:"#FFD84A",offset:"44.7133657%"}),N.jsx("stop",{stopColor:"#FFFFFF",offset:"71.9602813%"}),N.jsx("stop",{stopColor:"#FFD84A",offset:"100%"})]}),N.jsxs("linearGradient",{x1:"50%",y1:"2.74948045%",x2:"50%",y2:"80.5577952%",id:`${m}-${L}`,children:[N.jsx("stop",{stopColor:"#B15323",offset:"0%"}),N.jsx("stop",{stopColor:"#901515",offset:"100%"})]}),N.jsx("text",{y:"50%",fontWeight:"normal",dominantBaseline:"middle",dx:.5*Q,dy:Q,id:`${W}-${L}`,style:{textShadow:"none"},fontFamily:"EvoMoneyWheelCommonMultiplier, Inter, Arial, sans-serif",fontSize:20,letterSpacing:3*C,children:p}),N.jsx("path",{id:`${_}-${L}`,d:"M6.1153-7.319 6.9186-6.1563 7.7114-7.319H11.7343L9.0936-3.7424 11.8611.0125H7.7113L6.8363-1.2731 5.907.0125H1.8064L4.6309-3.7443 1.9916-7.319H6.1153Z"})]})}function o(y){const{id:L,setTextRef:p}=y;return N.jsxs("g",{fill:"none",fillRule:"evenodd",children:[N.jsx("use",{strokeWidth:Q,stroke:`url(#${m}-${L})`,xlinkHref:`#${W}-${L}`}),N.jsx("use",{strokeWidth:C,stroke:g,fillRule:"nonzero",xlinkHref:`#${W}-${L}`,fill:`url(#${k}-${L})`,ref:p})]})}function U(y){const{id:L,textRect:p,signMargin:t}=y,j=p.x+p.width+t,z=p.height-.5*D;return N.jsxs("g",{fill:"none",fillRule:"evenodd",transform:`translate(${j} ${z})`,children:[N.jsx("use",{strokeWidth:Q,stroke:`url(#${m}-${L})`,xlinkHref:`#${_}-${L}`}),N.jsx("use",{strokeWidth:C,stroke:g,fillRule:"nonzero",xlinkHref:`#${_}-${L}`,fill:`url(#${k}-${L})`})]})}},940730:(y,L,p)=>{p.d(L,{q:()=>j});var N=p(64922),t=p(699695);const j=({textures:y,symbol:L,className:p,size:j})=>{const z=y[L];return z?N.jsx("div",{className:t.A(p),style:{backgroundImage:`url(${z})`,height:`${j}`,width:`${j}`,backgroundSize:`${j}`},"data-symbol":L}):null}},491851:(y,L,p)=>{p.d(L,{Db:()=>j.D,mJ:()=>N.mJ,po:()=>t.po,qY:()=>z.q,sq:()=>t.sq,yc:()=>N.yc});var N=p(94971),t=p(726066),j=p(477437),z=p(940730)},477437:(y,L,p)=>{p.d(L,{D:()=>j});var N=p(94971);const t=["W","B","C","A","K","Q","J",...Object.keys(N.mJ)];function j(){return t.reduce(((y,L)=>(y[L]=p(654354)(`./${L}.webp`),y)),{})}},235874:(y,L,p)=>{p.d(L,{M:()=>O,Y:()=>z});var N=p(64922),t=p(532836),j=p(33597);const z=({children:y,...L})=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:j.A.icon,...L,children:N.jsx("path",{d:"m15.78 17.31-4.95-4.95 4.95-4.95L14.37 6 8 12.36l6.37 6.36 1.41-1.41Z"})}),O=t.m(z);z.displayName="LeftSVG",O.displayName="Left"},124315:(y,L,p)=>{p.d(L,{i:()=>z});var N=p(377810);const t=new Set;function j(y){const L=document.fonts.check(y);return L&&!t.has(y)&&t.add(y),L}function z(y="10px / 12px Inter",...L){const p=[y,...L].filter(Boolean),z=p.join(),[O,h]=N.useState((()=>p.every((y=>j(y)))));return N.useEffect((()=>{const y=p.filter((y=>!j(y)));0!==y.length?Promise.all(y.map((async y=>await async function(y){const L=!!(await document.fonts.load(y))[0];return L&&t.add(y),L}(y)))).then((y=>{const L=y.every((y=>y));h(L)})):h(!0)}),[z]),O}},654354:(y,L,p)=>{var N={"./A.webp":439846,"./B.webp":39111,"./C.webp":975076,"./J.webp":509567,"./K.webp":8028,"./Q.webp":772246,"./S.webp":570260,"./S10.webp":758273,"./S2.webp":453046,"./S3.webp":553073,"./S5.webp":804891,"./W.webp":320952,"./double.webp":761678,"./doubleVertical.webp":725040,"./topUpSectors.webp":991198};function t(y){var L=j(y);return p(L)}function j(y){if(!p.o(N,y)){var L=new Error("Cannot find module '"+y+"'");throw L.code="MODULE_NOT_FOUND",L}return N[y]}t.keys=function(){return Object.keys(N)},t.resolve=j,y.exports=t,t.id=654354},424959:(y,L,p)=>{y.exports=p.p+"images/sidle.e25e7661.webp"},890179:(y,L,p)=>{y.exports=p.p+"images/mainslotsy.ab23b902.webp"},362709:(y,L,p)=>{y.exports=p.p+"images/infinity.5891bf0c.webp"},50397:(y,L,p)=>{y.exports=p.p+"images/big.a6a36846.webp"},60841:(y,L,p)=>{y.exports=p.p+"images/medium.ea0a79d3.webp"},439846:(y,L,p)=>{y.exports=p.p+"images/a.59804dd5.webp"},39111:(y,L,p)=>{y.exports=p.p+"images/b.4d7a3522.webp"},975076:(y,L,p)=>{y.exports=p.p+"images/c.190fdccc.webp"},509567:(y,L,p)=>{y.exports=p.p+"images/j.643085d9.webp"},8028:(y,L,p)=>{y.exports=p.p+"images/k.19c8c997.webp"},772246:(y,L,p)=>{y.exports=p.p+"images/q.98863ffd.webp"},570260:(y,L,p)=>{y.exports=p.p+"images/s.e25e7661.webp"},758273:(y,L,p)=>{y.exports=p.p+"images/s10.f4e6f27a.webp"},453046:(y,L,p)=>{y.exports=p.p+"images/s2.b672e27a.webp"},553073:(y,L,p)=>{y.exports=p.p+"images/s3.7275ff6b.webp"},804891:(y,L,p)=>{y.exports=p.p+"images/s5.53af27f4.webp"},320952:(y,L,p)=>{y.exports=p.p+"images/w.a600269e.webp"},761678:(y,L,p)=>{y.exports=p.p+"images/double.5226b187.webp"},725040:(y,L,p)=>{y.exports=p.p+"images/doublevert.6bb733e8.webp"},991198:(y,L,p)=>{y.exports=p.p+"images/topupsecto.aca16366.webp"},301654:y=>{y.exports=function(y){return y&&y.__esModule?y:{default:y}},y.exports.__esModule=!0,y.exports["default"]=y.exports},468840:(y,L,p)=>{p.d(L,{A:()=>_});var N=p(18272),t=p(56074),j=p(436897),z=p(207652);var O=p(489161),h=p(859446);var m=p(111100),k=p(678285);const _=function(y,L,p){L=L.length?N.A(L,(function(y){return k.A(y)?function(L){return t.A(L,1===y.length?y[0]:y)}:y})):[m.A];var _=-1;return L=N.A(L,O.A(j.A)),function(y,L){var p=y.length;for(y.sort(L);p--;)y[p]=y[p].value;return y}(z.A(y,(function(y,p,t){return{criteria:N.A(L,(function(L){return L(y)})),index:++_,value:y}})),(function(y,L){return function(y,L,p){for(var N=-1,t=y.criteria,j=L.criteria,z=t.length,O=p.length;++N<z;){var m=h.A(t[N],j[N]);if(m)return N>=O?m:m*("desc"==p[N]?-1:1)}return y.index-L.index}(y,L,p)}))}},859446:(y,L,p)=>{p.d(L,{A:()=>t});var N=p(478086);const t=function(y,L){if(y!==L){var p=void 0!==y,t=null===y,j=y==y,z=N.A(y),O=void 0!==L,h=null===L,m=L==L,k=N.A(L);if(!h&&!k&&!z&&y>L||z&&O&&m&&!h&&!k||t&&O&&m||!p&&m||!j)return 1;if(!t&&!z&&!k&&y<L||k&&p&&j&&!t&&!z||h&&p&&j||!O&&j||!m)return-1}return 0}},603183:(y,L,p)=>{p.d(L,{A:()=>t});var N=p(693653);const t=function(y,L){return function(p,t){return function(y,L,p,t){return N.A(y,(function(y,N,j){L(t,p(y),N,j)})),t}(p,y,L(t),{})}}},32742:(y,L,p)=>{p.d(L,{A:()=>O});var N=p(400946),t=p(603183),j=p(111100),z=Object.prototype.toString;const O=t.A((function(y,L,p){null!=L&&"function"!=typeof L.toString&&(L=z.call(L)),y[L]=p}),N.A(j.A))},444792:(y,L,p)=>{p.d(L,{A:()=>z});var N=p(156568),t=p(258214),j="[object Boolean]";const z=function(y){return!0===y||!1===y||t.A(y)&&N.A(y)==j}},515200:(y,L,p)=>{p.d(L,{A:()=>z});var N=p(608292),t=p(693653),j=p(436897);const z=function(y,L){var p={};return L=j.A(L,3),t.A(y,(function(y,t,j){N.A(p,t,L(y,t,j))})),p}},525707:(y,L,p)=>{p.d(L,{A:()=>O});var N=p(73501),t=p(468840),j=p(545186),z=p(56988);const O=j.A((function(y,L){if(null==y)return[];var p=L.length;return p>1&&z.A(y,L[0],L[1])?L=[]:p>2&&z.A(L[0],L[1],L[2])&&(L=[L[0]]),t.A(y,N.A(L,1),[])}))},409860:(y,L,p)=>{p.d(L,{A:()=>z});var N=p(146719),t=p(545186),j=p(676225);const z=t.A((function(y,L){return j.A(y)?N.A(y,L):[]}))},733049:y=>{y.exports=JSON.parse('{"frames":{"element01":{"x":1,"y":1,"width":39,"height":40},"element02":{"x":1,"y":43,"width":39,"height":40},"element03":{"x":30,"y":85,"width":19,"height":40},"element04":{"x":68,"y":85,"width":10,"height":40},"element05":{"x":42,"y":1,"width":39,"height":40},"element06":{"x":42,"y":43,"width":34,"height":40},"element07":{"x":78,"y":43,"width":19,"height":40},"element08":{"x":83,"y":1,"width":34,"height":34},"element09":{"x":1,"y":85,"width":27,"height":34},"element10":{"x":51,"y":85,"width":15,"height":34},"element11":{"x":99,"y":43,"width":13,"height":34},"element12":{"x":80,"y":85,"width":17,"height":17},"element13":{"x":99,"y":79,"width":14,"height":17},"element14":{"x":80,"y":104,"width":13,"height":17},"element15":{"x":114,"y":43,"width":11,"height":10},"element16":{"x":99,"y":98,"width":13,"height":10}},"meta":{"size":{"height":128,"width":128}}}')},42887:y=>{y.exports=JSON.parse('{"A_idle":{"x":0,"y":0,"width":256,"height":256},"A_win":{"x":256,"y":0,"width":256,"height":256},"B_idle":{"x":0,"y":256,"width":256,"height":256},"B_win":{"x":256,"y":256,"width":256,"height":256},"C_idle":{"x":512,"y":0,"width":256,"height":256},"C_win":{"x":0,"y":512,"width":256,"height":256},"J_idle":{"x":256,"y":512,"width":256,"height":256},"J_win":{"x":512,"y":256,"width":256,"height":256},"K_idle":{"x":512,"y":512,"width":256,"height":256},"K_win":{"x":768,"y":0,"width":256,"height":256},"Q_idle":{"x":0,"y":768,"width":256,"height":256},"Q_win":{"x":256,"y":768,"width":256,"height":256},"W_idle":{"x":768,"y":256,"width":256,"height":256}}')},197111:y=>{y.exports=JSON.parse('{"doubleTimer":{"x":0,"y":438,"width":324,"height":69},"glow":{"x":596,"y":0,"width":66,"height":180},"sectors":{"x":0,"y":304,"width":576,"height":132},"topUpTimerGreen":{"x":0,"y":0,"width":594,"height":150},"topUpTimerRed":{"x":0,"y":152,"width":594,"height":150}}')},969705:y=>{y.exports=JSON.parse('{"frames":{"10":{"x":140,"y":732,"width":140,"height":183},"11":{"x":700,"y":0,"width":140,"height":183},"12":{"x":560,"y":183,"width":140,"height":183},"13":{"x":280,"y":549,"width":140,"height":183},"14":{"x":280,"y":183,"width":140,"height":183},"15":{"x":420,"y":183,"width":140,"height":183},"16":{"x":420,"y":366,"width":140,"height":183},"17":{"x":0,"y":549,"width":140,"height":183},"18":{"x":420,"y":915,"width":140,"height":183},"19":{"x":140,"y":1098,"width":140,"height":183},"20":{"x":840,"y":183,"width":140,"height":183},"21":{"x":700,"y":366,"width":140,"height":183},"22":{"x":0,"y":915,"width":140,"height":183},"23":{"x":140,"y":915,"width":140,"height":183},"24":{"x":980,"y":366,"width":140,"height":183},"25":{"x":560,"y":915,"width":140,"height":183},"26":{"x":840,"y":549,"width":140,"height":183},"27":{"x":280,"y":915,"width":140,"height":183},"28":{"x":0,"y":366,"width":140,"height":183},"29":{"x":140,"y":366,"width":140,"height":183},"30":{"x":700,"y":732,"width":140,"height":183},"31":{"x":0,"y":1098,"width":140,"height":183},"32":{"x":980,"y":183,"width":140,"height":183},"33":{"x":980,"y":0,"width":140,"height":183},"34":{"x":700,"y":549,"width":140,"height":183},"35":{"x":560,"y":549,"width":140,"height":183},"36":{"x":840,"y":366,"width":140,"height":183},"37":{"x":560,"y":732,"width":140,"height":183},"38":{"x":280,"y":732,"width":140,"height":183},"39":{"x":420,"y":549,"width":140,"height":183},"40":{"x":1120,"y":366,"width":140,"height":183},"41":{"x":1120,"y":183,"width":140,"height":183},"42":{"x":1120,"y":0,"width":140,"height":183},"43":{"x":980,"y":549,"width":140,"height":183},"44":{"x":980,"y":732,"width":140,"height":183},"45":{"x":1120,"y":549,"width":140,"height":183},"46":{"x":980,"y":915,"width":140,"height":183},"47":{"x":1120,"y":732,"width":140,"height":183},"48":{"x":140,"y":0,"width":140,"height":183},"49":{"x":0,"y":183,"width":140,"height":183},"50":{"x":560,"y":1098,"width":140,"height":183},"51":{"x":840,"y":915,"width":140,"height":183},"52":{"x":840,"y":1098,"width":140,"height":183},"53":{"x":700,"y":1098,"width":140,"height":183},"54":{"x":420,"y":1098,"width":140,"height":183},"55":{"x":700,"y":915,"width":140,"height":183},"56":{"x":840,"y":732,"width":140,"height":183},"57":{"x":280,"y":1098,"width":140,"height":183},"58":{"x":280,"y":0,"width":140,"height":183},"59":{"x":140,"y":183,"width":140,"height":183},"60":{"x":0,"y":0,"width":140,"height":183},"01":{"x":420,"y":0,"width":140,"height":183},"02":{"x":560,"y":0,"width":140,"height":183},"03":{"x":280,"y":366,"width":140,"height":183},"04":{"x":0,"y":732,"width":140,"height":183},"05":{"x":700,"y":183,"width":140,"height":183},"06":{"x":140,"y":549,"width":140,"height":183},"07":{"x":560,"y":366,"width":140,"height":183},"08":{"x":420,"y":732,"width":140,"height":183},"09":{"x":840,"y":0,"width":140,"height":183}},"meta":{"size":{"height":1281,"width":1260}}}')},857045:y=>{y.exports=JSON.parse('{"frames":{"10":{"x":1405,"y":366,"width":281,"height":366},"11":{"x":1124,"y":732,"width":281,"height":366},"12":{"x":1124,"y":0,"width":281,"height":366},"13":{"x":281,"y":1098,"width":281,"height":366},"14":{"x":562,"y":366,"width":281,"height":366},"15":{"x":843,"y":0,"width":281,"height":366},"16":{"x":0,"y":1098,"width":281,"height":366},"17":{"x":562,"y":732,"width":281,"height":366},"18":{"x":1967,"y":366,"width":281,"height":366},"19":{"x":1124,"y":1830,"width":281,"height":366},"20":{"x":1686,"y":0,"width":281,"height":366},"21":{"x":562,"y":1464,"width":281,"height":366},"22":{"x":1686,"y":366,"width":281,"height":366},"23":{"x":1686,"y":732,"width":281,"height":366},"24":{"x":843,"y":1830,"width":281,"height":366},"25":{"x":1405,"y":1464,"width":281,"height":366},"26":{"x":1967,"y":0,"width":281,"height":366},"27":{"x":1124,"y":1464,"width":281,"height":366},"28":{"x":0,"y":732,"width":281,"height":366},"29":{"x":281,"y":732,"width":281,"height":366},"30":{"x":1686,"y":1098,"width":281,"height":366},"31":{"x":1967,"y":732,"width":281,"height":366},"32":{"x":562,"y":1830,"width":281,"height":366},"33":{"x":281,"y":1830,"width":281,"height":366},"34":{"x":843,"y":1464,"width":281,"height":366},"35":{"x":281,"y":1464,"width":281,"height":366},"36":{"x":1405,"y":1098,"width":281,"height":366},"37":{"x":0,"y":1830,"width":281,"height":366},"38":{"x":0,"y":1464,"width":281,"height":366},"39":{"x":562,"y":1098,"width":281,"height":366},"40":{"x":1405,"y":1830,"width":281,"height":366},"41":{"x":1967,"y":1098,"width":281,"height":366},"42":{"x":281,"y":2196,"width":281,"height":366},"43":{"x":1686,"y":1464,"width":281,"height":366},"44":{"x":843,"y":2196,"width":281,"height":366},"45":{"x":1124,"y":2196,"width":281,"height":366},"46":{"x":1405,"y":2196,"width":281,"height":366},"47":{"x":2248,"y":1098,"width":281,"height":366},"48":{"x":281,"y":0,"width":281,"height":366},"49":{"x":0,"y":366,"width":281,"height":366},"50":{"x":2248,"y":732,"width":281,"height":366},"51":{"x":1967,"y":1464,"width":281,"height":366},"52":{"x":2248,"y":1464,"width":281,"height":366},"53":{"x":1686,"y":1830,"width":281,"height":366},"54":{"x":2248,"y":366,"width":281,"height":366},"55":{"x":562,"y":2196,"width":281,"height":366},"56":{"x":0,"y":2196,"width":281,"height":366},"57":{"x":2248,"y":0,"width":281,"height":366},"58":{"x":562,"y":0,"width":281,"height":366},"59":{"x":281,"y":366,"width":281,"height":366},"60":{"x":0,"y":0,"width":281,"height":366},"01":{"x":0,"y":0,"width":281,"height":366},"02":{"x":0,"y":0,"width":281,"height":366},"03":{"x":843,"y":366,"width":281,"height":366},"04":{"x":1405,"y":0,"width":281,"height":366},"05":{"x":843,"y":1098,"width":281,"height":366},"06":{"x":843,"y":732,"width":281,"height":366},"07":{"x":1124,"y":366,"width":281,"height":366},"08":{"x":1405,"y":732,"width":281,"height":366},"09":{"x":1124,"y":1098,"width":281,"height":366}},"meta":{"size":{"height":2562,"width":2529}}}')},698117:y=>{y.exports=JSON.parse('{"frames":{"10":{"x":0,"y":199,"width":150,"height":197},"11":{"x":152,"y":0,"width":150,"height":197},"12":{"x":0,"y":0,"width":150,"height":197},"13":{"x":304,"y":397,"width":150,"height":196},"14":{"x":0,"y":596,"width":150,"height":196},"15":{"x":456,"y":396,"width":150,"height":196},"16":{"x":608,"y":0,"width":150,"height":196},"17":{"x":152,"y":596,"width":150,"height":196},"18":{"x":608,"y":198,"width":150,"height":196},"19":{"x":304,"y":595,"width":150,"height":196},"20":{"x":608,"y":396,"width":150,"height":196},"21":{"x":456,"y":594,"width":150,"height":196},"22":{"x":760,"y":0,"width":150,"height":196},"23":{"x":760,"y":198,"width":150,"height":196},"24":{"x":0,"y":794,"width":150,"height":196},"25":{"x":152,"y":794,"width":150,"height":196},"26":{"x":304,"y":793,"width":150,"height":196},"27":{"x":608,"y":594,"width":150,"height":196},"28":{"x":760,"y":396,"width":150,"height":196},"29":{"x":456,"y":792,"width":150,"height":196},"30":{"x":760,"y":594,"width":150,"height":196},"31":{"x":0,"y":992,"width":150,"height":196},"32":{"x":608,"y":792,"width":150,"height":196},"33":{"x":152,"y":992,"width":150,"height":196},"34":{"x":304,"y":991,"width":150,"height":196},"35":{"x":456,"y":990,"width":150,"height":196},"36":{"x":760,"y":792,"width":150,"height":196},"37":{"x":608,"y":990,"width":150,"height":196},"38":{"x":0,"y":1190,"width":150,"height":196},"39":{"x":152,"y":1190,"width":150,"height":196},"40":{"x":304,"y":1189,"width":150,"height":196},"41":{"x":760,"y":990,"width":150,"height":196},"42":{"x":456,"y":1188,"width":150,"height":196},"43":{"x":608,"y":1188,"width":150,"height":196},"44":{"x":0,"y":1388,"width":150,"height":196},"45":{"x":152,"y":1388,"width":150,"height":196},"46":{"x":456,"y":198,"width":150,"height":196},"47":{"x":456,"y":198,"width":150,"height":196},"48":{"x":456,"y":198,"width":150,"height":196},"01":{"x":456,"y":198,"width":150,"height":196},"02":{"x":456,"y":198,"width":150,"height":196},"03":{"x":456,"y":198,"width":150,"height":196},"04":{"x":456,"y":0,"width":150,"height":196},"05":{"x":152,"y":398,"width":150,"height":196},"06":{"x":0,"y":398,"width":150,"height":196},"07":{"x":304,"y":199,"width":150,"height":196},"08":{"x":304,"y":0,"width":150,"height":197},"09":{"x":152,"y":199,"width":150,"height":197}},"meta":{"size":{"height":2048,"width":1024}}}')},189395:y=>{y.exports=JSON.parse('{"frames":{"10":{"x":608,"y":198,"width":150,"height":196},"11":{"x":456,"y":396,"width":150,"height":196},"12":{"x":456,"y":198,"width":150,"height":196},"13":{"x":304,"y":396,"width":150,"height":196},"14":{"x":0,"y":0,"width":150,"height":196},"15":{"x":304,"y":0,"width":150,"height":196},"16":{"x":152,"y":396,"width":150,"height":196},"17":{"x":0,"y":396,"width":150,"height":196},"18":{"x":152,"y":990,"width":150,"height":196},"19":{"x":0,"y":1188,"width":150,"height":196},"20":{"x":760,"y":198,"width":150,"height":196},"21":{"x":608,"y":396,"width":150,"height":196},"22":{"x":152,"y":792,"width":150,"height":196},"23":{"x":760,"y":396,"width":150,"height":196},"24":{"x":456,"y":990,"width":150,"height":196},"25":{"x":760,"y":792,"width":150,"height":196},"26":{"x":608,"y":792,"width":150,"height":196},"27":{"x":456,"y":792,"width":150,"height":196},"28":{"x":152,"y":0,"width":150,"height":196},"29":{"x":0,"y":198,"width":150,"height":196},"30":{"x":304,"y":990,"width":150,"height":196},"31":{"x":608,"y":990,"width":150,"height":196},"32":{"x":0,"y":990,"width":150,"height":196},"33":{"x":760,"y":594,"width":150,"height":196},"34":{"x":0,"y":792,"width":150,"height":196},"35":{"x":304,"y":594,"width":150,"height":196},"36":{"x":304,"y":792,"width":150,"height":196},"37":{"x":608,"y":594,"width":150,"height":196},"38":{"x":152,"y":198,"width":150,"height":196},"01":{"x":152,"y":198,"width":150,"height":196},"02":{"x":152,"y":198,"width":150,"height":196},"03":{"x":304,"y":198,"width":150,"height":196},"04":{"x":152,"y":594,"width":150,"height":196},"05":{"x":608,"y":0,"width":150,"height":196},"06":{"x":456,"y":0,"width":150,"height":196},"07":{"x":0,"y":594,"width":150,"height":196},"08":{"x":760,"y":0,"width":150,"height":196},"09":{"x":456,"y":594,"width":150,"height":196}},"meta":{"size":{"height":2048,"width":1024}}}')}},h={};function m(y){var L=h[y];if(void 0!==L)return L.exports;var p=h[y]={id:y,loaded:!1,exports:{}};return O[y].call(p.exports,p,p.exports,m),p.loaded=!0,p.exports}m.m=O,y=[],m.O=(L,p,N,t)=>{if(!p){var j=1/0;for(k=0;k<y.length;k++){for(var[p,N,t]=y[k],z=!0,O=0;O<p.length;O++)(!1&t||j>=t)&&Object.keys(m.O).every((y=>m.O[y](p[O])))?p.splice(O--,1):(z=!1,t<j&&(j=t));if(z){y.splice(k--,1);var h=N();void 0!==h&&(L=h)}}return L}t=t||0;for(var k=y.length;k>0&&y[k-1][2]>t;k--)y[k]=y[k-1];y[k]=[p,N,t]},m.n=y=>{var L=y&&y.__esModule?()=>y["default"]:()=>y;return m.d(L,{a:L}),L},p=Object.getPrototypeOf?y=>Object.getPrototypeOf(y):y=>y.__proto__,m.t=function(y,N){if(1&N&&(y=this(y)),8&N)return y;if("object"==typeof y&&y){if(4&N&&y.__esModule)return y;if(16&N&&"function"==typeof y.then)return y}var t=Object.create(null);m.r(t);var j={};L=L||[null,p({}),p([]),p(p)];for(var z=2&N&&y;"object"==typeof z&&!~L.indexOf(z);z=p(z))Object.getOwnPropertyNames(z).forEach((L=>j[L]=()=>y[L]));return j["default"]=()=>y,m.d(t,j),t},m.d=(y,L)=>{for(var p in L)m.o(L,p)&&!m.o(y,p)&&Object.defineProperty(y,p,{enumerable:!0,get:L[p]})},m.f={},m.e=y=>Promise.all(Object.keys(m.f).reduce(((L,p)=>(m.f[p](y,L),L)),[])),m.u=y=>"js/"+({3474:"evo-promotions.SpinGiftsFrame",3863:"testTools",17474:"evo-game.mobileChat",22421:"testTools.PixiDevToolsPlugin",24622:"evo-promotions.SpinGiftsWheelAnimation",30164:"game-client-history-round-info",36302:"evo-promotions.SpinGiftsCampaignRules",39340:"history.roundView",41619:"help.ls2",44806:"gameTestToolsPlugins",47290:"evo-promotions.SpinGiftsTermsConditions",50967:"help.common",54504:"evo-promotions.cashGifts",59760:"evo-game.chat",65595:"IncomingLS2MessagesSchema",66703:"gameTestToolsSafeAreaPlugin",66885:"native-utilities",73375:"evo-promotions.spinGifts",73460:"evo-promotions.giftsWheel",77821:"evo-game.emojiMenu",80468:"ajv",80616:"video-lib-local",85687:"testTools.why-did-you-render"}[y]||y)+"."+{3474:"1a89cdcf",3863:"c68406f1",10306:"a97cff13",14291:"2f77c6ae",17474:"36703dd7",22421:"0fea869a",24622:"c19aa584",27672:"21b8bdb0",30164:"81c32c92",32184:"a21bca64",36302:"63c3f631",37927:"b03e4e3d",39340:"87393490",41619:"784e0c4d",42447:"0fe47cec",44806:"0741de9d",45444:"ef538133",47290:"25d266d1",50967:"2b6414a9",54504:"de8d33cf",59760:"c5c3f75e",65595:"1d5ec353",66703:"d22f8b42",66885:"cf7c7b01",73375:"74edf8f6",73460:"b312a388",77821:"cadc9005",80468:"5bf07473",80616:"10095eb7",85687:"8dab9d33"}[y]+".js",m.miniCssF=y=>3863===y?"styles/testtools.c68406f1.css":36302===y?"styles/evopromoti.spingiftsc.63c3f631.css":47290===y?"styles/evopromoti.spingiftst.25d266d1.css":50967===y?"styles/help.common.2b6414a9.css":30164===y?"styles/gameclient.81c32c92.css":39340===y?"styles/history.roundview.87393490.css":17474===y?"styles/evogame.mobilechat.36703dd7.css":59760===y?"styles/evogame.chat.c5c3f75e.css":54504===y?"styles/evopromoti.cashgifts.de8d33cf.css":73375===y?"styles/evopromoti.spingifts.74edf8f6.css":77821===y?"styles/evogame.emojimenu.cadc9005.css":44806===y?"styles/gametestto.0741de9d.css":41619===y?"styles/help.ls2.784e0c4d.css":73460===y?"styles/evopromoti.giftswheel.b312a388.css":24622===y?"styles/evopromoti.spingiftsw.c19aa584.css":3474===y?"styles/evopromoti.spingiftsf.1a89cdcf.css":22421===y?"styles/testtools.pixidevtoo.0fea869a.css":66703===y?"styles/gametestto.d22f8b42.css":void 0,m.hmd=y=>((y=Object.create(y)).children||(y.children=[]),Object.defineProperty(y,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+y.id)}}),y),m.o=(y,L)=>Object.prototype.hasOwnProperty.call(y,L),N={},t="/frontend/evo/r2/:",m.l=(y,L,p,j)=>{if(N[y])N[y].push(L);else{var z,O;if(void 0!==p)for(var h=document.getElementsByTagName("script"),k=0;k<h.length;k++){var _=h[k];if(_.getAttribute("src")==y||_.getAttribute("data-webpack")==t+p){z=_;break}}z||(O=!0,(z=document.createElement("script")).charset="utf-8",z.timeout=NaN,m.nc&&z.setAttribute("nonce",m.nc),z.setAttribute("data-webpack",t+p),z.src=y),N[y]=[L];var W=(L,p)=>{z.onerror=z.onload=null,clearTimeout(g);var t=N[y];if(delete N[y],z.parentNode&&z.parentNode.removeChild(z),t&&t.forEach((y=>y(p))),L)return L(p)},g=setTimeout(W.bind(null,void 0,{type:"timeout",target:z}),window.EVO_CDN?15e3:6e4);z.onerror=W.bind(null,z.onerror),z.onload=W.bind(null,z.onload),O&&document.head.appendChild(z)}},m.r=y=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})},m.nmd=y=>(y.paths=[],y.children||(y.children=[]),y),m.j=55148,m.p=(globalThis.EVO_CDN||"")+"/frontend/evo/r2/",j=y=>new Promise(((L,p)=>{var N=m.miniCssF(y),t=m.p+N;if(((y,L)=>{for(var p=document.getElementsByTagName("link"),N=0;N<p.length;N++){var t=(z=p[N]).getAttribute("data-href")||z.getAttribute("href");if("stylesheet"===z.rel&&(t===y||t===L))return z}var j=document.getElementsByTagName("style");for(N=0;N<j.length;N++){var z;if((t=(z=j[N]).getAttribute("data-href"))===y||t===L)return z}})(N,t))return L();((y,L,p,N)=>{var t=document.createElement("link");t.setAttribute("data-sandbox","ignore"),t.rel="stylesheet",t.type="text/css",t.onerror=t.onload=j=>{if(t.onerror=t.onload=null,"load"===j.type)p();else{var z=j&&("load"===j.type?"missing":j.type),O=j&&j.target&&j.target.href||L,h=new Error("Loading CSS chunk "+y+" failed.\n("+O+")");h.code="CSS_CHUNK_LOAD_FAILED",h.type=z,h.request=O,t.parentNode.removeChild(t),N(h)}},t.href=L,document.head.appendChild(t)})(y,t,L,p)})),z={55148:0},m.f.miniCss=(y,L)=>{z[y]?L.push(z[y]):0!==z[y]&&{3474:1,3863:1,17474:1,22421:1,24622:1,30164:1,36302:1,39340:1,41619:1,44806:1,47290:1,50967:1,54504:1,59760:1,66703:1,73375:1,73460:1,77821:1}[y]&&L.push(z[y]=j(y).then((()=>{z[y]=0}),(L=>{throw delete z[y],L})))},(()=>{var y={55148:0};m.f.j=(L,p)=>{var N=m.o(y,L)?y[L]:void 0;if(0!==N)if(N)p.push(N[2]);else if(1){var t=new Promise(((p,t)=>N=y[L]=[p,t]));p.push(N[2]=t);var j=m.p+m.u(L),z=new Error;m.l(j,(p=>{if(m.o(y,L)&&(0!==(N=y[L])&&(y[L]=void 0),N)){var t=p&&("load"===p.type?"missing":p.type),j=p&&p.target&&p.target.src;z.message="Loading chunk "+L+" failed.\n("+t+": "+j+")",z.name="ChunkLoadError",z.type=t,z.request=j,N[1](z)}}),"chunk-"+L,L)}},m.O.j=L=>0===y[L];var L=(L,p)=>{var N,t,[j,z,O]=p,h=0;if(j.some((L=>0!==y[L]))){for(N in z)m.o(z,N)&&(m.m[N]=z[N]);if(O)var k=O(m)}for(L&&L(p);h<j.length;h++)t=j[h],m.o(y,t)&&y[t]&&y[t][0](),y[t]=0;return m.O(k)},p=self["webpackChunk_frontend_evo_r2_"]=self["webpackChunk_frontend_evo_r2_"]||[];p.forEach(L.bind(null,0)),p.push=L.bind(null,p.push.bind(p))})(),m.O(void 0,[35375,79949],(()=>m(515924))),m.O(void 0,[35375,79949],(()=>m(884544)));var k=m.O(void 0,[35375,79949],(()=>m(722928)));k=m.O(k)})();
//# sourceMappingURL=https://sourcemaps.egcdn.com/frontend/evo/r2/js/ls2.0f9feaee.js.map