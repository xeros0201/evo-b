"use strict";(()=>{var x,o,c,L,T,h,A={110482:(x,o,c)=>{c.d(o,{A:()=>L});const L={svg:"svg--7e996",svgBetspot:"svgBetspot--43e31",gradientLight:"gradientLight--ba468",gradientDark:"gradientDark--2ae9f",strokeLight:"strokeLight--26bed",strokeDark:"strokeDark--60bd1",hasBet:"hasBet--8e3d4",blue:"blue--5d4e7",red:"red--7fb61",green:"green--1e33e",gray:"gray--61479",ochre:"ochre--aa19d",violet:"violet--0ac0a",disabled:"disabled--27322",win:"win--e65a1",bettingGrid:"bettingGrid--0835e",forceLayerToTop:"forceLayerToTop--0f0f9",mainContainer:"mainContainer--2572f",player:"player--b46f0",banker:"banker--abb19",tie:"tie--01ff7",short:"short--9aca2",wide:"wide--4b304",chipContainer:"chipContainer--9cdca",small:"small--639f1",bubble:"bubble--2b7a1",redEnvelopeBonus:"redEnvelopeBonus--36e84",isVertical:"isVertical--28984",betspot:"betspot--53c9f",right:"right--d8912",item:"item--8e08a",vertical:"vertical--98be1",left:"left--fcc6a",single:"single--27bc5",betspotTitle:"betspotTitle--d0907",payout:"payout--c827b",center:"center--4c7f4",envelopeContainer:"envelopeContainer--8d480",payoutContainer:"payoutContainer--a32db",animatedPayout:"animatedPayout--99187",bettingStatistics:"bettingStatistics--1bd62",indicatorPercentage:"indicatorPercentage--ac6cf",collapsed:"collapsed--a81f9",nonTransform:"nonTransform--9a65c",liveStatisticsContainer:"liveStatisticsContainer--fc00f",score:"score--393b3",redEnvelope:"redEnvelope--906c0",title:"title--967a1",hasLongBetSpotName:"hasLongBetSpotName--1cacc",spotTitleSmall:"spotTitleSmall--8dd7a",titleContainer:"titleContainer--98fa0",isSmallPayoutFontSize:"isSmallPayoutFontSize--fb42a",symbol:"symbol--a11ac",bettingTime:"bettingTime--7f9cd",isMirrored:"isMirrored--d9896",desktop:"desktop--53489",startGradient:"startGradient--8f326",stopGradient:"stopGradient--83651",gradientTransition:"gradientTransition--cfdc2",animate:"animate--6c17d",shape:"shape--84077",highlightSvgKeyframes:"highlightSvgKeyframes--56b80",mainShape:"mainShape--f586c",tieShape:"tieShape--d6bfd",highlight:"highlight--1cf10",allowOverflow:"allowOverflow--d7f75",rectShape:"rectShape--a9f3a",adaptiveSideBetSpots:"adaptiveSideBetSpots--53905",singleSideBetSpotsRow:"singleSideBetSpotsRow--8e650",onlyPairs:"onlyPairs--f14f6",adjustPayoutMarginTop:"adjustPayoutMarginTop--65847",sideBetSpots:"sideBetSpots--f61cf",addPayoutMarginBottom:"addPayoutMarginBottom--84002",animatedPayoutsContainer:"animatedPayoutsContainer--057ec",animateOut:"animateOut--d8168",skipAnimation:"skipAnimation--7f1bd",wrapBetSpotOverlay:"wrapBetSpotOverlay--418ff",betSpotOverlay:"betSpotOverlay--5247d",betSpotSecondOverlay:"betSpotSecondOverlay--3c814",faded:"faded--70f38",payoutSwitchContentKeyframes:"payoutSwitchContentKeyframes--6dc8f",payoutToggleKeyframes:"payoutToggleKeyframes--9c6cd"}},856062:(x,o,c)=>{c.d(o,{A:()=>L});const L={cardsHand:"cardsHand--538f4",enhanced:"enhanced--181e0",isPortrait:"isPortrait--28ada",decreased:"decreased--7c50a",toRight:"toRight--d458d",lifted:"lifted--caace",liftedCentral:"liftedCentral--747f2",simple:"simple--a062f",cards:"cards--d48f8",cardPlaceHolder:"cardPlaceHolder--ded29",card:"card--8d20a",horizontal:"horizontal--eb452",cardOverlayPosition:"cardOverlayPosition--8db88",isSmallIndent:"isSmallIndent--fa9ac",small:"small--90cfe",animatedCardAppearance:"animatedCardAppearance--1b7c0",fadeInFromBottomKeyframes:"fadeInFromBottomKeyframes--98c6a",fadeInFromRightKeyframes:"fadeInFromRightKeyframes--52cfe"}},32991:(x,o,c)=>{c.d(o,{A:()=>L});const L={svg:"svg--c8f9e",isHidden:"isHidden--3f361",animate:"animate--265bb",fadeInKeyframes:"fadeInKeyframes--e8a33",pulsing:"pulsing--39b17",pulsingKeyframes:"pulsingKeyframes--03bc4"}},78886:(x,o,c)=>{c.d(o,{j:()=>X,c:()=>r});var L=c(64922),T=c(699695),h=c(377810),A=c(414646),E=c(462566),H=c(891527),N=c(403414);const Q="showing--c8dbf",I="hiding--f0ae8",k="effects--f6681",_="tooltip--c9c35",X=({feePercentage:x,feeAmount:o,currency:c,animation:E,dimensions:X,isVisible:r,onFeeEffect:y,onPointerLeave:v,onPointerEnter:B,onPointerUp:Y,tooltipComponent:F,Effects:t,role:m,theme:C,animationDelay:V,animationDuration:i,disappearingDelay:M,feeThemes:Z,registerReference:S,isFeeAnimationDelayed:u,withAnimation:d=!0})=>{let O,j,e=1,q="100%",f="100%";!function(x){return"string"!=typeof x}(X)?(j=X,O=X):(e=X.scale,q=X.scaledWidth,O=X.scaledHeight,f=X.absoluteWidth,j=X.absoluteHeight);const U=h.useMemo((()=>t&&L.jsx("div",{className:k,children:L.jsx(t,{animation:E,onAnimation:y})})),[E,y,t]),s=function(x,o){const[c,L]=h.useState(!x&&0===o),T=h.useRef(0),A=()=>{T.current&&window.clearTimeout(T.current)};return h.useEffect((()=>(A(),x?L(!1):T.current=window.setTimeout((()=>{L(!0)}),o),()=>{A(),L(!x)})),[x,o]),c}(r,null!=M?M:i),D=H.Q(o,u?0:A.c);return s||!r&&!d?null:L.jsxs("div",{style:{width:q,height:O},onPointerLeave:v,onPointerEnter:B,onPointerUp:Y,className:_,children:[F,L.jsx(N.g,{style:{transform:`scale(${e})`,width:f,height:j,fontSize:N._(j),animationDelay:`${r?0:V}ms`,animationDuration:`${i}ms`},className:T.A({[Q]:r&&d,[I]:!r&&d}),role:m,theme:C,feePercentage:x,feeAmount:D,currency:c,effects:U,feeThemes:Z,registerReference:S})]})},r=E.u(X)},403414:(x,o,c)=>{c.d(o,{g:()=>F,_:()=>Y});var L=c(64922),T=c(699695),h=c(912986),A=c(377810),E=c(732319),H=c(929758),N=c(801399),Q=c(50649);const I="fee--2df1e",k="background--8e9c4",_="statusText--379fc",X="feeBackground--9a910",r="fill--982a1",y="borderTop--6f369",v="borderBottom--5a90d",B=.6;function Y(x){return"number"==typeof x?x*B+"px":`calc(${x} * ${B})`}const F=({feePercentage:x,feeAmount:o,currency:c,role:B,style:Y,className:F,effects:t,feeThemes:m,registerReference:C=h.A,theme:V=Q.m.Regular})=>{const i=A.useMemo((()=>({...Q.e,...m}[V]||Q.e[Q.m.Regular])),[m,V]),M=E.v(C,H.B.Fee),Z=A.useMemo((()=>({lightning:null==i?void 0:i.multiplierText,shadow:null==i?void 0:i.textShadow})),[null==i?void 0:i.multiplierText,null==i?void 0:i.textShadow]);return L.jsxs("div",{style:Y,className:T.A(I,F),"data-role":B,ref:M,children:[L.jsx("div",{className:k,children:L.jsxs("div",{className:X,children:[L.jsx("div",{className:T.A(y,null==i?void 0:i.borderTop)}),L.jsx("div",{className:T.A(r,null==i?void 0:i.fill)}),L.jsx("div",{className:T.A(v,null==i?void 0:i.borderBottom)})]})}),L.jsx("div",{className:_,children:L.jsx(N.g,{feePercentage:x,feeAmount:o,currency:c,className:null==i?void 0:i.statusTextContainer,theme:Z})}),t]})}},414646:(x,o,c)=>{c.d(o,{c:()=>L});const L=800},801399:(x,o,c)=>{c.d(o,{g:()=>Q});var L=c(64922),T=c(699695),h=c(377810),A=c(184787),E=c(587698),H=c(346160);const N="statusTextContainer--1edd5",Q=h.memo((({feePercentage:x,feeAmount:o,currency:c,className:h,theme:Q})=>{const I=o>0?E.ej(o,{currencySymbol:c}):`${H.Tl("percent_fee",{percent:x})}`;return L.jsx("div",{className:T.A(N,h),children:L.jsx(A.L,{text:I,theme:Q})})}))},496904:(x,o,c)=>{c.d(o,{t:()=>H});const L="borderTop--2efdb",T="borderBottom--50446",h="multiplierText--565ae",A="textShadow--c4804";var E;!function(x){x.Red="red",x.RedStrikeTime="redStrikeTime"}(E||(E={}));const H={[E.Red]:{borderTop:L,borderBottom:T,fill:"fill--5950a",multiplierText:h,textShadow:A},[E.RedStrikeTime]:{borderTop:L,borderBottom:T,fill:"fillStrikeTime--c5e4f",multiplierText:h,textShadow:A}}},50649:(x,o,c)=>{var L;c.d(o,{m:()=>L,e:()=>T}),function(x){x.Regular="regular",x.GoldenLine="goldenLine"}(L||(L={}));const T={[L.Regular]:{borderTop:"borderTop--505aa",borderBottom:"borderBottom--e5b20",fill:"fill--415e7"},[L.GoldenLine]:{borderTop:"borderTop--88cdd",borderBottom:"borderBottom--615a3",fill:"fill--9fffe"}}},261504:(x,o,c)=>{c.d(o,{u:()=>i,H:()=>V});var L=c(64922),T=c(699695),h=c(266600),A=c(377810),E=c(462566);const H="svgGameStatistics--acd83",N="darkFont--b144f",Q="itemWrapper--98ad7",I="item--92c48",k="phone--fe7e7",_="brightTheme--10344",X="isDesktop--dd104",r="largeIcons--23ec6",y="tablet--8ef78",v="faceLiftBright--0f3a4",B="landscape--42da8",Y="count--ae30a",F="baccaratV4Mode--69fa4",t="value--fa5ef",m="smallIcons--c830c",C=E.u((({item:x,count:o,itemStyle:c,countStyle:T,showTooltips:h,onPointerEnter:A,onPointerLeave:E,tooltipComponent:H})=>L.jsxs("div",{className:Q,onPointerEnter:A,onPointerLeave:E,children:[L.jsx("div",{className:c,children:x}),L.jsx("div",{className:T,children:o}),h&&H]})));var V;!function(x){x.Bright="Bright",x.FaceLiftBright="FaceLiftBright"}(V||(V={}));class i extends A.Component{shouldComponentUpdate(x){return!h.A(x,this.props)}render(){const{showTooltips:x,statistics:o,roadPredictionTheme:c,isDesktop:h=!1,largeIcons:A=!1,isBaccaratV4Mode:E=!1,tooltipPositionVertical:Q,isPhone:i=!1,isTablet:M=!1,isLandscape:Z=!1,isSmallIcons:S=!1,isDarkFont:u=!1,fontScale:d}=this.props;return L.jsx("div",{className:T.A(H,{[_]:c===V.Bright,[v]:c===V.FaceLiftBright,[X]:h,[k]:i,[y]:M,[B]:Z,[F]:E,[r]:A,[m]:S,[N]:u}),style:{"--font-scale":d},children:Object.keys(o).map((c=>{const A=o[c];return L.jsx(C,{item:A.icon,count:L.jsx("div",{"data-role":c,className:T.A({[t]:E}),children:A.value}),itemStyle:T.A(I,{[X]:h,[y]:M}),countStyle:T.A(Y,{[X]:h,[y]:M}),showTooltips:x,tooltip:A.tooltipLabel,tooltipPositionVertical:Q},c)}))})}}},71665:(x,o,c)=>{c.d(o,{Ot:()=>_,mW:()=>r});var L=c(64922),T=c(752490),h=c(730460),A=c(277082);const E=L.jsx("div",{children:"#"}),H=(x,o)=>L.jsx(A.RoadItemBaccarat,{roadType:A.RoadType.Bead,winnerType:A.WinnerTypeBaccarat.Banker,symbol:x,isLive:o},x),N=(x,o)=>L.jsx(A.RoadItemBaccarat,{roadType:A.RoadType.Bead,winnerType:A.WinnerTypeBaccarat.Player,symbol:x,isLive:o},x),Q=(x,o)=>L.jsx(A.RoadItemBaccarat,{roadType:A.RoadType.Bead,winnerType:A.WinnerTypeBaccarat.Tie,symbol:x,isLive:o},x),I=x=>L.jsx(A.RoadItemBaccarat,{roadType:A.RoadType.Bead,winnerType:A.WinnerTypeBaccarat.Legend,additionalType:A.AdditionalTypeBaccarat.Banker,isLive:x}),k=x=>L.jsx(A.RoadItemBaccarat,{roadType:A.RoadType.Bead,winnerType:A.WinnerTypeBaccarat.Legend,additionalType:A.AdditionalTypeBaccarat.Player,isLive:x});function _(x,o){switch(x){case h.I.Chinese:return T.Iq[o].ch;case h.I.Korean:return T.Iq[o].ko;default:return T.Iq[o].en}}function X(x,o,c){return{playerWins:{icon:N(_(o,A.WinnerTypeBaccarat.Player),c),tooltipLabel:"tooltip.player",value:x.playerWins},bankerWins:{icon:H(_(o,A.WinnerTypeBaccarat.Banker),c),tooltipLabel:"tooltip.banker",value:x.bankerWins},ties:{icon:Q(_(o,A.WinnerTypeBaccarat.Tie),c),tooltipLabel:"tooltip.tie",value:x.ties}}}function r(x,o,c,L){const T={gameCount:{icon:E,tooltipLabel:"tooltip.totalNumberOfRounds",value:x.gameCount},...X(x,o,L)};return c&&(T.playerPairs={icon:k(L),tooltipLabel:"tooltip.playerPair",value:x.playerPairs},T.bankerPairs={icon:I(L),tooltipLabel:"tooltip.bankerPair",value:x.bankerPairs}),T}},891527:(x,o,c)=>{c.d(o,{Q:()=>A});var L=c(377810),T=c(414646),h=c(876759);function A(x,o=T.c){const c=L.useRef(x),A=L.useMemo((()=>{const L=x>c.current?o:0;return c.current=x,L}),[x]);return function(x,o=0,c=!1){return function(x,o=0,c=!1){const T=L.useRef(x),h=L.useRef(new Set),[A,E]=L.useState(x);return L.useEffect((()=>()=>{for(const x of h.current)window.clearTimeout(x);h.current.clear()}),[]),L.useEffect((()=>{if(c){for(const x of h.current)window.clearTimeout(x);return h.current.clear(),E(x),void(T.current=x)}if(x!==T.current){const c=window.setTimeout((()=>{E(x),h.current.delete(c)}),o);h.current.add(c),T.current=x}}),[x,o,c]),A}(x,h.I()?0:o,c)}(x,A,0===A)}},184787:(x,o,c)=>{c.d(o,{L:()=>B});var L=c(64922),T=c(699695),h=c(95772),A=c(377810),E=c(837557);const H="textContainer--1a1ac",N="text--68a0b",Q="placeholder--6cec6",I="base--b286e",k="textBackground--cded2",_="lightning--2aac5",X="shadow--551ae";var r;!function(x){x.Base="multiplierBase"}(r||(r={}));const y=A.memo((({text:x,fontSize:o,theme:c,withShadow:h})=>{const A=function(x,o){return{fontSize:null!=x?x:"",WebkitTextStrokeWidth:o?"0.01px":void 0}}(o,E.DS.IS_FIREFOX),H=E.DS.IS_FIREFOX?{...A,opacity:.85}:A;return L.jsxs(L.Fragment,{children:[(null==c?void 0:c.textShadow)&&L.jsx("span",{className:T.A(N,null==c?void 0:c.textShadow),children:x}),L.jsx("span",{className:T.A(N,I,null==c?void 0:c.base),style:A,"data-role":r.Base,children:x}),h&&L.jsx("span",{className:T.A(N,X),style:A,children:x}),L.jsx("span",{className:T.A(N,k,(null==c?void 0:c.lightning)||_),style:H,children:x})]})}));var v;!function(x){x.Left="flex-start",x.Center="center",x.Right="flex-end"}(v||(v={}));const B=({text:x,theme:o,align:c=v.Center,isStatic:E=!1,withShadow:I=!0})=>{const k=A.useRef(null),_=A.useRef(null),X=A.useRef(void 0),[r,B]=A.useState({value:E?x:"",fontSize:void 0}),{value:Y,fontSize:F}=r,t={justifyContent:c},m=T.A(H,null==o?void 0:o.textContainer),C=A.useCallback((()=>{const o=k.current,c=_.current;if(!o||!c)return;const L=o.getBoundingClientRect().width,T=c.getBoundingClientRect().width,A=window.getComputedStyle(o).fontSize,E=L<T?h.A(L/T,4):1;B({fontSize:1!==E?`calc(${A}*${E})`:void 0,value:x})}),[x]);return A.useEffect((()=>(X.current=requestAnimationFrame(C),()=>{X.current&&cancelAnimationFrame(X.current)})),[C]),L.jsxs("span",{className:m,ref:k,style:t,children:[L.jsx("span",{className:T.A(N,Q),ref:_,children:x}),L.jsx(y,{text:Y,fontSize:F,theme:o,withShadow:I})]})}},941691:(x,o,c)=>{var L;c.d(o,{V:()=>L}),function(x){x.None="None",x.WinnerMultiplier="WinnerMultiplier",x.BetPlaced="BetPlaced",x.AnimationStart="AnimationStart"}(L||(L={}))},118812:(x,o,c)=>{c.d(o,{s:()=>_,P:()=>X});var L=c(64922),T=c(699695),h=c(912986),A=c(377810),E=c(732319),H=c(277082),N=c(462566),Q=c(261504);const I={icons:"icons--f4e38",brightTheme:"brightTheme--c1e55",faceLiftBright:"faceLiftBright--80399",wideButton:"wideButton--c3d67",item:"item--8df89",shortConvex:"shortConvex--3f76d",lastItem:"lastItem--89af0",isDesktop:"isDesktop--72c6f",tablet:"tablet--c47ba",prediction:"prediction--9877c",Player:"Player--d3a01",Banker:"Banker--84cf1",noSpacing:"noSpacing--42fa2",backgroundBorder:"backgroundBorder--49c52",borderBefore:"borderBefore--925a0",borderAfter:"borderAfter--0ce41",active:"active--8bbe2",phone:"phone--1043d",simpleSymbol:"simpleSymbol--f3e7d",simpleSvgSymbol:"simpleSvgSymbol--14682",small:"small--7fc43",rounded:"rounded--90c01"},k={[Q.H.Bright]:I.brightTheme,[Q.H.FaceLiftBright]:I.faceLiftBright},_=x=>{const{winnerType:o,probe:c,withTooltip:N,mapColorToWinnerType:_,RoadItem:X,symbol:B,isDesktop:Y,isTablet:F,isSmall:t,isShortConvex:m,roadPredictionTheme:C,tooltipComponent:V,registerRef:i=h.A,ignoreButtonSpacing:M,wideButton:Z,probesWinner:S,scorecardTheme:u,onInteraction:d,setProbesWinner:O,onPointerEnter:j,onPointerLeave:e,onPointerUp:q}=x,f=E.v(i,o),U=!!C,s=H.getScorecardTheme(u),D=A.useMemo((()=>U?{backgroundColor:"transparent",borderColor:"transparent"}:{backgroundColor:s.predictionBackground||s.fill,borderColor:s.predictionBackground||s.fill}),[U,s.fill,s.predictionBackground]),$=A.useCallback((()=>{null==d||d(),O(S&&S===o?void 0:o)}),[d,S,O,o]),a=A.useCallback((x=>{$(),null==q||q(x)}),[$,q]),z=A.useCallback((x=>{O(),null==e||e(x)}),[e,O]),l=A.useMemo((()=>Y?{onMouseDown:$,onPointerLeave:z}:{onPointerUp:a}),[$,a,z,Y]),G=A.useMemo((()=>{return m?I.shortConvex:C?(x=C,Array.isArray(x)?x.map((x=>k[x])):k[x]):void 0;var x}),[m,C]);return L.jsxs(L.Fragment,{children:[L.jsxs("div",{className:T.A(I.prediction,I.rounded,I[o],G,{[I.isDesktop]:Y,[I.noSpacing]:!!M,[I.tablet]:F,[I.phone]:!Y&&!F,[I.wideButton]:Y&&Z,[I.active]:o===S,[I.small]:t}),ref:f,"data-role":o,...l,onPointerEnter:j,children:[C===Q.H.FaceLiftBright&&L.jsxs(L.Fragment,{children:[L.jsx("div",{className:T.A(I.backgroundBorder,I.borderBefore)}),L.jsx("div",{className:T.A(I.backgroundBorder,I.borderAfter)})]}),m&&!Y?y(B):r(B,!m),L.jsxs("div",{className:T.A(I.icons,G),style:D,children:[v(X,_,H.RoadType.BigEye,c.bigEye,C),v(X,_,H.RoadType.Small,c.small,C),v(X,_,H.RoadType.Cockroach,c.cockroach,C)]})]}),N&&V]})},X=N.u(_);function r(x,o=!0){return L.jsxs("div",{className:I.simpleSymbol,children:[x,o?"?":""]})}function y(x){return L.jsx("div",{className:I.simpleSvgSymbol,children:L.jsx("svg",{width:"100%",height:"75%",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",children:L.jsx("text",{x:"0",y:"5",fill:"#fff",dominantBaseline:"central",children:x})})})}function v(x,o,c,h,A){if(null==h?void 0:h.color){const E={roadType:c,winnerType:o(h.color),isLive:A===Q.H.FaceLiftBright};return L.jsx("div",{className:T.A(I.item,{[I.lastItem]:c===H.RoadType.Cockroach}),"data-role":H.RoadType[c],children:L.jsx(x,{...E})})}}},507805:(x,o,c)=>{var L,T,h,A;c.d(o,{$e:()=>h,BV:()=>T,Xo:()=>A,ay:()=>L,ei:()=>N,uj:()=>E,v2:()=>H}),function(x){x.LightningCardBackground="lightningCardBackground",x.LightningCardBorder="lightningCardBorder",x.LightningStrike="LightningStrike",x.ExtraLightningStrike="ExtraLightningStrike",x.LightningBackground="LightningBackground",x.LightningRoad="LightningRoad",x.GameResult="GameResult"}(L||(L={})),function(x){x.Fee="Fee",x.BettingGridCardBorder="BettingGridCardBorder",x.BetSpotBorder="BetSpotBorder"}(T||(T={})),function(x){x.Enabled="Enabled",x.Disabled="Disabled"}(h||(h={})),function(x){x[x.BetsPlaced=1e3]="BetsPlaced",x[x.Charging=1e3]="Charging",x[x.Strike=1e3]="Strike",x[x.ExtraStrike=800]="ExtraStrike",x[x.CardAppearing=600]="CardAppearing",x[x.MaxDuration=3e6]="MaxDuration",x[x.FeeStart=1e3]="FeeStart",x[x.LightningRoad=900]="LightningRoad"}(A||(A={}));const E=A.Charging,H=A.Charging+A.CardAppearing+E+100,N=400},752490:(x,o,c)=>{c.d(o,{DC:()=>A,G6:()=>H,Iq:()=>Q,Iu:()=>_,LH:()=>h,Tf:()=>k,W2:()=>E,iG:()=>N,wq:()=>I});var L=c(277082),T=c(586234);const h=[L.ScorecardThemeNames.WhiteSolid,L.ScorecardThemeNames.BlackDot],A=[L.ScorecardThemeNames.BlackDot,L.ScorecardThemeNames.WhiteSolid],E=[T.K8.Player,T.K8.Banker,T.K8.Tie],H=new Set(E),N="chipstack",Q={[L.WinnerTypeBaccarat.Player]:{en:"P",ch:"闲",ko:"플"},[L.WinnerTypeBaccarat.Banker]:{en:"B",ch:"庄",ko:"뱅"},[L.WinnerTypeBaccarat.Tie]:{en:"T",ch:"和",ko:"무"}},I="baccarat.multiplay",k=150,_={leading:!0,trailing:!1}},731675:(x,o,c)=>{c.d(o,{Pj:()=>E,jU:()=>A});var L=c(64922),T=c(377810);const h=T.createContext(null);function A(x,o){return L.jsx(h.Provider,{value:x,children:L.jsx(o,{})})}function E(){const x=T.useContext(h);if(!x)throw new Error("Store should be provided to StoreContext");return x}},525912:(x,o,c)=>{c.d(o,{v:()=>T});var L=c(586234);const T=[L.K8.SuperSix,L.K8.PerfectPair,L.K8.EitherPair,L.K8.PlayerBonus,L.K8.PlayerPair,L.K8.BankerBonus,L.K8.BankerPair]},333634:(x,o,c)=>{var L,T,h,A,E;c.d(o,{AE:()=>L,Y0:()=>A,g8:()=>h,m1:()=>E,sh:()=>T}),function(x){x.ChipMoveInProgress="chipMoveInProgressValidator",x.BalanceTooLowBet="balanceTooLowBetValidator",x.BettingTime="bettingTimeValidator",x.BettingRestriction="bettingRestrictionValidator",x.MinTableValueBet="minTableValueBetValidator",x.MaxTableValueBet="maxTableValueBetValidator",x.MoveBetCoefficientReduction="moveBetCoefficientReductionValidator",x.BetCoefficientReduction="betCoefficientReductionValidator",x.MaxBetSpotValueBet="maxBetSpotValueBetValidator",x.MinBetSpotValueBet="minBetSpotValueBetValidator",x.NotEnoughMoneyBet="notEnoughMoneyBetValidator",x.CanPlaceBetOnlyOnAvailableSpot="canPlaceBetOnlyOnAvailableSpot"}(L||(L={})),function(x){x.MoveBetToFeeBetSpotInsufficientFund="moveBetToFeeBetSpotInsufficientFundValidator",x.FeeBetInsufficientFund="feeBetInsufficientFund"}(T||(T={})),function(x){x[x.Fatal=0]="Fatal",x[x.Warning=1]="Warning"}(h||(h={})),function(x){x.WaitingForNextGame="WaitingForNextGame",x.NotEnoughMoney="NotEnoughMoney",x.BalanceTooLow="BalanceTooLow",x.MaxBetSpotValue="MaxBetSpotValue",x.MinBetSpotValue="MinBetSpotValue",x.MaxTableValue="MaxTableValue",x.MinTableValue="MinTableValue",x.LowRiskOppositeBettingRestriction="LowRiskOppositeBettingRestriction",x.ChipMoveInProgress="ChipMoveInProgress",x.BetToMainBetsPercent="BetToMainBetsPercent",x.PlaceMainBetFirst="PlaceMainBetFirst",x.CanPlaceBetOnlyOnAvailableSpot="CanPlaceBetOnlyOnAvailableSpot",x.FeeBetInsufficientFund="FeeBetInsufficientFundValidator"}(A||(A={})),function(x){x.NotEnoughMoneyWithFee="NotEnoughMoneyWithFee",x.FeeBetInsufficientFund="FeeBetInsufficientFundValidator"}(E||(E={}))},386062:(x,o,c)=>{c.d(o,{MJ:()=>E,Zz:()=>T,_y:()=>H,ay:()=>A,qD:()=>h});var L=c(752490);function T(x){let o=0;for(const c in x)if(Object.prototype.hasOwnProperty.call(x,c)){const L=x[c];"number"==typeof L&&(o+=L)}return o}function h(x){return L.W2.reduce(((o,c)=>{var L;return o+(null!==(L=x[c])&&void 0!==L?L:0)}),0)}function A(x,o){const c={};return Object.keys({...x,...o}).forEach((L=>{var T,h;const A=(null!==(T=o[L])&&void 0!==T?T:0)-(null!==(h=x[L])&&void 0!==h?h:0);0!==A&&(c[L]=A)})),c}function E(x,o){return T(o)-T(x)}function H(x){return Object.keys(x).filter((o=>{const c=x[o];return void 0!==c&&c>0})).reduce(((o,c)=>(o[c]=x[c],o)),{})}},565488:(x,o,c)=>{c.d(o,{Ar:()=>r,JO:()=>y,TL:()=>V,Tp:()=>i,YJ:()=>m,cF:()=>B,oF:()=>Y,oY:()=>t,pl:()=>C,uE:()=>Z,uc:()=>M,xC:()=>F});var L=c(609835),T=c(693),h=c(752490),A=c(586234),E=(c(795192),c(149528)),H=c(346160),N=c(142130),Q=c(587698),I=c(523737),k=c(525912),_=c(333634),X=c(386062);const r=({coefficientReductions:x,isErrorMessageCropped:o})=>({bet:c,bets:L,betSpot:T})=>{var A;const Q=x[T];if(!Q)return;const r=T===h.iG?0:null!==(A=L[T])&&void 0!==A?A:0,y=X.qD(L);if(!k.v.includes(T))return;if(0===y)return{type:_.g8.Fatal,code:_.Y0.PlaceMainBetFirst,translatedMessage:H.Tl("tooltip.placeMainBetFirst")};const v=I.J0.multiply(y,Q);return r+c>v?{resultBet:N.ur(Math.min(c,v-r)),type:r===v?_.g8.Fatal:_.g8.Warning,code:_.Y0.BetToMainBetsPercent,translatedMessage:E.t(Q,E.Z.Tooltip,o)}:void 0},y=({coefficientReductions:x})=>({betSpot:o,betSpotFrom:c,bets:L})=>{if(void 0===c)return;if(!h.G6.has(c))return;if(h.G6.has(o))return;const T=L,A=k.v.filter((x=>T[x]));for(const o of A){const c=r({coefficientReductions:x,isErrorMessageCropped:!0})({betSpot:o,bet:0,bets:L});if(void 0!==c)return c}},v=[A.K8.Banker,A.K8.Player],B=({isLowRisk:x})=>({bets:o,betSpot:c})=>{const T={[A.K8.Banker]:H.Tl(`betSpot.${A.K8.Banker}`),[A.K8.Player]:H.Tl(`betSpot.${A.K8.Player}`)};if(x){const x=Object.keys(o).filter((x=>{const c=o[x];return L.A(c)&&c>0})),[h,A]=v;if(x.includes(h)&&c===A||x.includes(A)&&c===h)return{type:_.g8.Fatal,code:_.Y0.LowRiskOppositeBettingRestriction,translatedMessage:H.Tl("tooltip.oppositeBettingRestriction",{spotA:T[h]||h,spotB:T[A]||A})}}},Y=({isMoveInProgress:x})=>({betSpotFrom:o})=>{if(x&&!o)return{type:_.g8.Fatal,code:_.Y0.ChipMoveInProgress,suppressed:!0}},F=({isBettingTime:x,tooltipKey:o})=>({bets:c})=>{if(x)return;const L=o||(T.A(c)?"tooltip.waitForNextGame":"tooltip.betsClosed");return{type:_.g8.Fatal,code:_.Y0.WaitingForNextGame,translatedMessage:H.Tl(L)}},t=({maxBetSpotValues:x,allowTruncateBet:o=!0})=>({bet:c,bets:L,betSpot:T})=>{var A,E;const I=T===h.iG?Number.MAX_VALUE:null!==(A=x[T])&&void 0!==A?A:Number.MAX_VALUE,k=T===h.iG?0:null!==(E=L[T])&&void 0!==E?E:0;if(k+c>I){const x=I-k;return{type:I<=k||!o?_.g8.Fatal:_.g8.Warning,code:_.Y0.MaxBetSpotValue,resultBet:o?N.ur(Math.min(c,x)):void 0,translatedMessage:H.Tl("tooltip.maxBetIs",{amount:Q.ej(I)})}}},m=({minBetSpotValues:x})=>({bet:o,betSpot:c,bets:L})=>{var T,A;const E=c===h.iG?0:null!==(T=x[c])&&void 0!==T?T:0;if((c===h.iG?0:null!==(A=L[c])&&void 0!==A?A:0)+o<E)return{type:_.g8.Warning,code:_.Y0.MinBetSpotValue,translatedMessage:H.Tl("tooltip.minBetIs",{amount:Q.ej(E)})}},C=({maxTableValue:x})=>({bet:o,bets:c,betSpot:L})=>{if(L===h.iG)return;if(0===x)return;const T=X.Zz(c);if(T+o>x){const c=x-T;return{type:T>=x?_.g8.Fatal:_.g8.Warning,code:_.Y0.MaxTableValue,resultBet:N.ur(Math.min(o,c)),translatedMessage:H.Tl("tooltip.maxTableBetIs",{amount:Q.ej(x)})}}},V=({minTableValue:x})=>({bet:o,betSpot:c,bets:L})=>{if(c!==h.iG&&0!==x)return X.Zz(L)+o<x?{type:_.g8.Warning,code:_.Y0.MinTableValue,translatedMessage:H.Tl("tooltip.minTableBetIs",{amount:Q.ej(x)})}:void 0},i=({availableBalance:x})=>({bet:o,betSpotFrom:c})=>{if(x<o&&!c)return{type:_.g8.Fatal,code:_.Y0.NotEnoughMoney,translatedMessage:H.Tl("tooltip.balanceTooLow")}},M=({availableBalance:x,minBetSpotValues:o})=>({betSpotFrom:c,bet:L,bets:T,betSpot:A})=>{var E,N;const Q=A===h.iG?0:null!==(E=o[A])&&void 0!==E?E:0,I=A===h.iG?0:null!==(N=T[A])&&void 0!==N?N:0;if(!(c&&x+L>=Q))return 0===I&&Q>x?{type:_.g8.Fatal,code:_.Y0.BalanceTooLow,translatedMessage:H.Tl("tooltip.balanceTooLow")}:void 0},Z=({availableBalance:x,getAmountWithFee:o,feeBetSpots:c})=>({bet:L,betSpotFrom:T,betSpot:h})=>{if(T||c&&!c.includes(h))return;const A=o(L);return x>=L&&x<A?{type:_.g8.Fatal,code:_.m1.NotEnoughMoneyWithFee,translatedMessage:H.Tl("tooltip.insufficientFundsWithFee")}:void 0}},930104:(x,o,c)=>{var L;c.d(o,{U:()=>L}),function(x){x.Player="Player",x.Banker="Banker"}(L||(L={}))},246250:(x,o,c)=>{var L;c.d(o,{F:()=>L}),function(x){x.SuperSix="super_six_main_bet_coefficient_reductions",x.PerfectPair="perfect_pair_main_bet_coefficient_reductions",x.EitherPair="either_pair_main_bet_coefficient_reductions",x.PlayerBonus="player_bonus_main_bet_coefficient_reductions",x.PlayerPair="player_pair_main_bet_coefficient_reductions",x.BankerBonus="banker_bonus_main_bet_coefficient_reductions",x.BankerPair="banker_pair_main_bet_coefficient_reductions"}(L||(L={}))},929758:(x,o,c)=>{var L;c.d(o,{B:()=>L}),function(x){x.Fee="fee"}(L||(L={}))},732319:(x,o,c)=>{c.d(o,{v:()=>T});var L=c(377810);function T(x,o){const c=L.useRef(null);return L.useLayoutEffect((()=>(x(o,c.current),()=>{x(o,null)})),[o,x]),c}},588974:(x,o,c)=>{var L;c.d(o,{C:()=>L}),function(x){x.V1="v1",x.V2="v2"}(L||(L={}))},730460:(x,o,c)=>{var L,T;c.d(o,{I:()=>L,u:()=>T}),function(x){x.Normal="en",x.Number="sc",x.Chinese="ch",x.Korean="ko"}(L||(L={})),function(x){x.P="P",x.B="B"}(T||(T={}))},586234:(x,o,c)=>{var L,T,h,A,E,H,N,Q;c.d(o,{K8:()=>T,Qc:()=>h,ZF:()=>N,Zp:()=>L,ix:()=>H,uB:()=>A,uu:()=>E}),function(x){x.UnknownCard="XX",x.Clubs2="2C",x.Clubs3="3C",x.Clubs4="4C",x.Clubs5="5C",x.Clubs6="6C",x.Clubs7="7C",x.Clubs8="8C",x.Clubs9="9C",x.Clubs10="TC",x.ClubsJack="JC",x.ClubsQueen="QC",x.ClubsKing="KC",x.ClubsAce="AC",x.Diamonds2="2D",x.Diamonds3="3D",x.Diamonds4="4D",x.Diamonds5="5D",x.Diamonds6="6D",x.Diamonds7="7D",x.Diamonds8="8D",x.Diamonds9="9D",x.Diamonds10="TD",x.DiamondsJack="JD",x.DiamondsQueen="QD",x.DiamondsKing="KD",x.DiamondsAce="AD",x.Hearts2="2H",x.Hearts3="3H",x.Hearts4="4H",x.Hearts5="5H",x.Hearts6="6H",x.Hearts7="7H",x.Hearts8="8H",x.Hearts9="9H",x.Hearts10="TH",x.HeartsJack="JH",x.HeartsQueen="QH",x.HeartsKing="KH",x.HeartsAce="AH",x.Spades2="2S",x.Spades3="3S",x.Spades4="4S",x.Spades5="5S",x.Spades6="6S",x.Spades7="7S",x.Spades8="8S",x.Spades9="9S",x.Spades10="TS",x.SpadesJack="JS",x.SpadesQueen="QS",x.SpadesKing="KS",x.SpadesAce="AS",x.Eight="BAC8"}(L||(L={})),function(x){x.Banker="Banker",x.Player="Player",x.Tie="Tie",x.BankerBonus="BankerBonus",x.BankerPair="BankerPair",x.EitherPair="EitherPair",x.SuperSix="SuperSix",x.PlayerBonus="PlayerBonus",x.PlayerPair="PlayerPair",x.PerfectPair="PerfectPair"}(T||(T={})),function(x){x.NewGame="newGame",x.BetsOpen="betsOpen",x.BetsClosed="betsClosed",x.Dealing="dealing",x.Revealing="revealing",x.Resolved="resolved",x.Cancelled="cancelled"}(h||(h={})),function(x){x.Betting="Betting",x.Accepted="Accepted",x.BetsAccepted="Accepted",x.Rejected="Rejected",x.BetsRejected="Rejected",x.Cancelled="Cancelled",x.Idle="Idle"}(A||(A={})),function(x){x.Chip="Chip",x.Double="Double",x.Repeat="Repeat",x.Undo="Undo",x.UndoAll="UndoAll",x.Move="Move",x.Remove="Remove"}(E||(E={})),function(x){x.MainAndPairs="MainAndPairs",x.MainOnly="MainOnly",x.AllBets="AllBets"}(H||(H={})),function(x){x.Baccarat="baccarat"}(N||(N={})),function(x){x.Spade="S",x.Heart="H",x.Diamond="D",x.Club="C"}(Q||(Q={}))},149528:(x,o,c)=>{c.d(o,{Z:()=>L,t:()=>A});var L,T=c(346160),h=c(523737);function A(x,o,c){const L=[1,.5].includes(x),A=h.J0.multiply(x,100),E=`${o}.superSixCannotExceed${L?A:"X"}${c?"Crop":""}`;return T.Tl(E,{percent:A})}!function(x){x.LimitPlate="limitPlate",x.Tooltip="tooltip"}(L||(L={}))},795192:(x,o,c)=>{function L(x,o=2){const c=10**o;return Math.round(x*c)/c}function T(x,o=2){const c=10**o;return Math.floor(x*c)/c}c.d(o,{eS:()=>L,yv:()=>T})},973220:(x,o,c)=>{c.d(o,{C:()=>T,I5:()=>A,S4:()=>H,Vq:()=>N,i5:()=>E,pW:()=>h});var L=c(893903);function T(x){return x.replace(/(?:^|\.?)([A-Z])/g,((x,o)=>`_${o.toLowerCase()}`)).replace(/^[0_]/g,"")}const h=x=>`${x}-${Math.floor(1e9*Math.random())}-${+new Date}`;function A(x){return((1e4*parseFloat(x.toFixed(4))>>6<<6)/1e4).toFixed(4)}function E(x,o){return Object.prototype.hasOwnProperty.call(x,o)}function H(x,o){for(const o of Object.keys(x))if(x[o])return o;return o}function N(x){return!L.A(x)}},811914:(x,o,c)=>{c.d(o,{O8:()=>y});var L=c(64922),T=c(699695),h=c(236042),A=c(377810),E=c(752490),H=c(930104),N=c(586234),Q=c(166175),I=c(860785),k=c(99496),_=c(110482);const X={[N.K8.PlayerPair]:Q.RU.PLAYER,[N.K8.BankerPair]:Q.RU.BANKER},r={[N.K8.PlayerPair]:"#0096ff",[N.K8.BankerPair]:"#ff0006"},y=A.memo((({isNoCommission:x,leftBetSpots:o,rightBetSpots:c,isBettingTime:y,isDesktop:v,scale:B=1,scaledWidth:Y,scaledHeight:F,isVertical:t,redEnvelopeEnabled:m,betSpotSize:C,skipRegisterRefs:V=!1,isAdaptiveSideBetSpots:i=!1,isSingleSideBetSpotsRow:M=!1,isCollapsed:Z=!1,doNotTransformOnCollapse:S,preProcessBetSpotClick:u,betSpotHandlersActive:d,onBetSpotClick:O,bubbleRef:j,forceLayerToTop:e,isSmall:q,MainBetSpot:f,TieBetSpot:U,SideBetSpot:s,GridOverlay:D,isIOS:$})=>{const a=1===o.length&&1===c.length,z=0===o.length&&0===c.length,l=!t&&z,G=A.useCallback((x=>o=>(null==u||u(o,x),o.preventDefault(),O(x))),[O,u]),p=A.useCallback((x=>{if(Z&&!(null==d?void 0:d(x)))return{};const o=G(x),c=h.A(o,E.Tf,E.Iu),L=k.a(v);return{[L]:c}}),[Z,v,G,d]),P=A.useCallback(((x,o=!1,c,T)=>{const h=o&&c&&!t?I.BL.Semicircle:I.BL.Rect;return s?L.jsx(s,{betSpot:x,isSingleBetSpot:o,shape:h,mainShape:c,betSpotHandlers:p(x),size:C,skipRegisterRefs:V,customLabelColor:T,isIOS:$},x):null}),[t,s,p,C,V,$]),K=A.useCallback(((x,o)=>{const c=1===x.length;return x.map((x=>P(x,c,o)))}),[P]),J=A.useCallback((()=>[...o,...c].map((x=>P(x,M,X[x],M?r[x]:void 0)))),[P,M,o,c]);return L.jsx("div",{style:{width:Y,height:F},children:L.jsxs("div",{className:T.A(_.A.bettingGrid,{[_.A.bettingTime]:y,[_.A.desktop]:v,[_.A.isVertical]:t,[_.A.onlyPairs]:a,[_.A.redEnvelope]:m,[_.A.adaptiveSideBetSpots]:i,[_.A.singleSideBetSpotsRow]:i&&M,[_.A.forceLayerToTop]:e,[_.A.small]:q}),style:{transform:`scale(${B})`},"data-role":"betting-grid-container",children:[L.jsx("div",{className:_.A.bubble,ref:j}),D&&L.jsx(D,{}),L.jsxs("div",{className:T.A(_.A.mainContainer,{[_.A.wide]:l,[_.A.collapsed]:Z,[_.A.nonTransform]:S}),children:[L.jsx(f,{betSpot:N.K8.Player,role:"bet-spot-player",isCollapsed:Z,cardHand:H.U.Player,mainShapeType:Q.RU.PLAYER,betSpotHandlers:p(N.K8.Player),className:_.A.player,size:C,wide:l,skipRegisterRefs:V,small:q}),L.jsx(f,{betSpot:N.K8.Banker,role:"bet-spot-banker",isCollapsed:Z,cardHand:H.U.Banker,mainShapeType:Q.RU.BANKER,betSpotHandlers:p(N.K8.Banker),className:_.A.banker,size:C,wide:l,skipRegisterRefs:V,small:q}),L.jsx(U,{role:"bet-spot-tie",betSpotHandlers:p(N.K8.Tie),className:T.A(_.A.tie,{[_.A.short]:x}),size:C,skipRegisterRefs:V,small:q,isIOS:$}),x&&L.jsx("div",{className:T.A(_.A.betspot,_.A.center),children:P(N.K8.SuperSix)})]}),!i&&L.jsxs(L.Fragment,{children:[L.jsx("div",{className:T.A(_.A.betspot,_.A.left,{[_.A.wide]:l}),children:K(o,Q.RU.PLAYER)}),L.jsx("div",{className:T.A(_.A.betspot,_.A.right,{[_.A.wide]:l}),children:K(c,Q.RU.BANKER)})]}),i&&L.jsx("div",{className:_.A.sideBetSpots,children:J()})]})})}))},339212:(x,o,c)=>{c.d(o,{W:()=>Q});var L=c(64922),T=c(699695),h=c(377810),A=c(37270),E=c(346160),H=c(876759),N=c(110482);const Q=h.memo((({betSpotRef:x,scale:o,payouts:c,withBonus:Q,bonus:I,skipAnimation:k,color:_,isIOS:X})=>{const r=h.useRef(null),[y,v]=h.useState(void 0),B=c.length>1;h.useEffect((()=>{B&&r.current&&(null==x?void 0:x.current)&&r.current.clientWidth-7>x.current.clientWidth&&1!==o&&v(o)}),[x,B,o]);const Y=h.useMemo((()=>{const x=c.length;return Q&&I||!(x>1)?void 0:{animation:H.I()?"none":`${N.A.payoutSwitchContentKeyframes} ${3*x}s steps(${x}) infinite, ${N.A.payoutToggleKeyframes} 3s infinite`}}),[c.length,Q,I]),F=E.vL().smallSideTieBetSpotPayoutFontSize,t=E.vL().adjustSideTieBetSpotsPayoutMarginTop,m=E.vL().addSideTieBetSpotsPayoutMarginBottom,C=T.A(N.A.payout,{[N.A.isSmallPayoutFontSize]:F,[N.A.adjustPayoutMarginTop]:t,[N.A.animatedPayout]:c.length>1&&!(Q&&I)}),V={color:_};return y&&(V.transform=`scale(${y})`),L.jsx("div",{ref:r,className:T.A(N.A.payoutContainer,{[N.A.addPayoutMarginBottom]:m,[N.A.animatedPayoutsContainer]:B}),children:L.jsx("div",{style:Y,children:Q&&1===c.length?L.jsx(A.s,{payout:c[0],bonus:I,skipAnimation:k,payoutClassName:C,isIOS:X}):c.map(((x,o)=>L.jsx("div",{className:C,"data-role":"payout",style:V,children:x},o)))})})}))},258237:(x,o,c)=>{c.d(o,{W:()=>t,f:()=>F});var L=c(64922),T=c(525620),h=c(377810),A=c(368329),E=c(587698),H=c(699695);const N=h.memo((({color:x})=>L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 8 12",children:L.jsxs("g",{fill:x,fillRule:"evenodd",children:[L.jsx("circle",{cx:4,cy:3,r:3}),L.jsx("path",{d:"M4 6c2.21 0 4 1.151 4 2.571V12H0V8.571l.006-.14C.12 7.075 1.864 6 4 6z"})]})}))),Q={liveStatistics:"liveStatistics--951fa",symbol:"symbol--08ff1",count:"count--17131",horizontal:"horizontal--dc92b",currency:"currency--abe5b",LeftSpot:"LeftSpot--cfe31",RightSpot:"RightSpot--29540",Tie:"Tie--9449f",isPortrait:"isPortrait--b2a22",medium:"medium--0dfff",small:"small--07613",tiny:"tiny--48917"},I=({total:x,playersCount:o,mappedBetSpot:c,horizontal:T,currencySymbol:h,color:A,isPortrait:E})=>{const I=h?h.length:0,k=x.length+I;return L.jsxs("div",{className:H.A(Q.liveStatistics,Q[c],{[Q.horizontal]:T,[Q.isPortrait]:E,[Q.medium]:k>10,[Q.small]:k>12,[Q.tiny]:k>14}),style:{color:A},"data-role":"betting-stats","data-total-wager":x,"data-total-bettors":o,"data-currency-symbol":h,children:[L.jsxs("div",{className:Q.currency,children:[L.jsx("span",{className:Q.symbol,children:h}),L.jsx("span",{children:x})]}),L.jsxs("div",{className:Q.count,children:[L.jsx("span",{className:Q.symbol,children:L.jsx(N,{color:A})}),L.jsx("span",{children:o})]})]})};var k=c(346160),_=c(110482);const X=2*Math.PI*50,r=h.memo((({value:x,progressColor:o,betSpot:c})=>{const T=h.useRef(`${Math.random()}_id`).current,A=X*(1-x/100),E=k.Tl("percent_fee",{percent:x});return L.jsxs(L.Fragment,{children:[L.jsxs("svg",{"data-total-percent":x,width:108,height:108,viewBox:"0 0 108 108",children:[L.jsx("defs",{children:L.jsxs("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:`background_${c}${T}_gradient`,children:[L.jsx("stop",{stopColor:"#000",stopOpacity:.7,offset:"0%"}),L.jsx("stop",{stopColor:"#000",stopOpacity:0,offset:"100%"})]})}),L.jsx("circle",{cx:54,cy:54,r:54,fill:`url(#background_${c}${T}_gradient)`}),L.jsx("circle",{cx:54,cy:54,r:50,strokeWidth:8,fill:"none",stroke:o,strokeOpacity:.1}),L.jsx("circle",{cx:54,cy:54,r:50,strokeWidth:8,fill:"none",stroke:o,strokeDashoffset:A,strokeDasharray:X,transform:"rotate(-90 54 54)",style:{transition:"stroke-dashoffset 500ms"}})]}),L.jsx("span",{className:_.A.indicatorPercentage,style:{color:o},children:E})]})}));var y,v=c(586234);!function(x){x.LeftSpot="LeftSpot",x.RightSpot="RightSpot",x.Tie="Tie"}(y||(y={}));const B={[v.K8.Player]:"#0096FF",[v.K8.Banker]:"#FF0006",[v.K8.Tie]:"#00FF00"},Y={[v.K8.Player]:y.LeftSpot,[v.K8.Banker]:y.RightSpot,[v.K8.Tie]:y.Tie},F=h.memo((({betSpot:x,horizontalStatistics:o=!1,isPortrait:c,currencySymbol:T,statisticsItem:h})=>{const{amount:A,players:H,percentage:N}=h,Q=B[x];return L.jsxs(L.Fragment,{children:[L.jsx("div",{className:_.A.liveStatisticsContainer,children:L.jsx(I,{mappedBetSpot:Y[x],color:Q,horizontal:o,currencySymbol:T,playersCount:H,total:E.ej(A),isPortrait:c})}),L.jsx("div",{className:_.A.bettingStatistics,children:L.jsx(r,{betSpot:x,progressColor:Q,value:N})})]})})),t=T.PA((x=>{const o=A.P(),{betSpot:c}=x,T=o.bettingStatistics.stats[c];return L.jsx(F,{...x,currencySymbol:o.settings.currencySymbol,isPortrait:o.device.isPortrait,statisticsItem:T})}))},704249:(x,o,c)=>{c.d(o,{V:()=>k,w:()=>I});var L=c(64922),T=c(699695),h=c(525620),A=(c(377810),c(732319)),E=c(586234),H=c(68521),N=c(368329),Q=c(110482);const I=({betSpot:x,role:o,animate:c,hasBet:h,faded:E,isNoCommission:N,className:I,Shape:k,betSpotHandlers:_,size:X,hasBonus:r,paleBackground:y,BetSpotInfo:v,children:B,small:Y,highlightBorder:F=!1,registerBetSpotRef:t,skipRegisterRefs:m,ChipComponent:C=H.B,OverlayComponent:V})=>{const i=A.v(t,x);return L.jsxs("div",{ref:m?void 0:i,"data-betspot-destination":x,className:I,"data-role":o,..._,children:[L.jsx(k,{animate:c,highlightBorder:F,short:N,small:Y,size:X,hasBet:h,faded:E,paleBackground:y}),B,v&&L.jsx(v,{betSpot:x}),L.jsx("div",{className:T.A(Q.A.chipContainer,{[Q.A.redEnvelopeBonus]:r}),children:!m&&L.jsx(C,{betSpot:x})}),V&&L.jsx(V,{small:Y,shapeSize:X})]})},k=h.PA((x=>{const{betSpot:o,children:c}=x,T=N.P(),h=T.device.isPhone,A=!!T.bets.bets[o];return L.jsx(I,{...x,hasBet:A,faded:!T.gamePhase.isBetsOpen&&!A,paleBackground:h&&T.device.isLandscape,isMobile:h,isNoCommission:T.settings.noCommission&&T.betSpot.isSpotConfigured(E.K8.SuperSix),animate:T.gameResult.winningBetSpots.includes(o),registerBetSpotRef:T.reference.betSpot.set,children:c})}))},373595:(x,o,c)=>{c.d(o,{lN:()=>F,oi:()=>Y});var L=c(64922),T=c(699695),h=c(525620),A=c(377810),E=c(586234),H=c(935899),N=c(556182),Q=c(368329),I=c(346160),k=c(166175);const _=c.p+"images/bankersymb.78bc4fda.svg",X=c.p+"images/playersymb.ec2d1e8e.svg";function r(x){switch(x){case E.K8.Player:return X;case E.K8.Banker:return _}}var y=c(110482);const v="score",B=120;function Y({betSpot:x,role:o,score:c,cardHand:h,cardType:Q,showSymbol:_,className:X,betSpotHandlers:Y,mainShapeType:F,size:t,wide:m,small:C,skipRegisterRefs:V,CommonBetSpot:i,GridCard:M=H.A,isPortrait:Z,isDesktop:S,cards:u,liftedCardHand:d,liftedCentralCardHand:O,ChipComponent:j,ShapeComponent:e,OverlayComponent:q,TitleComponent:f,scoreLandscapePosition:U,cardsLandscapePosition:s,ExtraComponent:D,isScoreVisible:$=!0,reverseScale:a}){const z=A.useRef(null),[l,G]=A.useState({});A.useEffect((()=>{if(a&&S&&z.current&&z.current.clientWidth>B){const o=B/z.current.clientWidth,c=(100-100*o)/2,L=x===E.K8.Player?-1*c:c;G({transform:`translateX(${L}%) scale(${o})`})}}),[x,S,a]);const p=A.useCallback((x=>{const o=null!=e?e:k.RY;return L.jsx(o,{type:F,wide:m,...x})}),[e,F,m]),P=!Z&&U?{"--landscapePositionX":U.x,"--landscapePositionY":U.y}:{};return L.jsxs(i,{betSpot:x,role:o,className:X,betSpotHandlers:Y,Shape:p,size:t,small:C,skipRegisterRefs:V,ChipComponent:j,OverlayComponent:q,children:[D&&L.jsx(D,{betSpot:x}),$&&L.jsx("div",{className:y.A.score,style:P,"data-role":v,children:c}),_&&L.jsx("div",{className:y.A.symbol,children:L.jsx("img",{src:r(x)})}),L.jsx(N.s,{landscapePosition:s,hand:h,cardType:Q,decreased:C,Card:M,isPortrait:Z,isDesktop:S,cards:u,lifted:d,liftedCentral:O}),L.jsx("div",{ref:z,className:T.A(y.A.title,{[y.A.spotTitleSmall]:I.vL().smallFontBettingGridBetSpots,[y.A.hasLongBetSpotName]:I.vL().adjustLongBetSpotNames}),style:l,children:f?L.jsx(f,{betSpot:x,isDesktop:S}):L.jsx("div",{className:y.A.titleContainer,children:I.Tl(`betSpot.${x}`)})})]})}const F=h.PA((x=>{var o,c;const T=Q.P(),h=null!==(o=x.cards)&&void 0!==o?o:T.cards.getCards(x.cardHand),A=null!==(c=x.score)&&void 0!==c?c:T.cards.getScore(x.cardHand);return L.jsx(Y,{...x,isPortrait:T.device.isPortrait,reverseScale:T.ag.values.gameDimensions.reverseScale,isDesktop:T.device.isDesktop,cards:h,score:A,showSymbol:T.settings.hieroglyphsVisible})}))},656846:(x,o,c)=>{c.d(o,{k:()=>I});var L=c(64922),T=c(699695),h=(c(377810),c(586234)),A=c(346160),E=c(876759),H=c(339212),N=c(8568),Q=c(110482);function I({role:x,className:o,betSpotHandlers:c,withBonus:I,bonus:k,skipAnimation:_=E.I(),payouts:X,BonusWinComponent:r,BonusComponent:y,size:v,small:B,skipRegisterRefs:Y=!1,CommonBetSpot:F,OverlayComponent:t,isIOS:m}){const C=h.K8.Tie,V=I&&!!k,i=A.vL().smallFontBettingGridBetSpots;return L.jsxs(F,{betSpot:C,role:x,className:o,betSpotHandlers:c,Shape:N.IM,size:v,hasBonus:V,small:B,skipRegisterRefs:Y,OverlayComponent:t,children:[r&&L.jsx(r,{betSpot:C}),L.jsxs("div",{className:T.A(Q.A.title,{[Q.A.spotTitleSmall]:i,[Q.A.redEnvelopeBonus]:V,[Q.A.hasLongBetSpotName]:A.vL().adjustLongBetSpotNames}),"data-role":"payout",children:[L.jsxs("div",{className:T.A(Q.A.titleContainer,Q.A.single),children:[L.jsx("span",{className:T.A({[Q.A.animateOut]:V,[Q.A.skipAnimation]:_}),children:A.Tl(`betSpot.${C}`)}),V&&y&&L.jsx(y,{betSpot:C})]}),X.length>0&&L.jsx(H.W,{payouts:X,withBonus:I,bonus:k,skipAnimation:_,isIOS:m})]})]})}},895083:(x,o,c)=>{c.d(o,{ZE:()=>H,Mv:()=>X,qF:()=>I,gb:()=>Q,sj:()=>k,i_:()=>N,mb:()=>_});var L=c(64922),T=c(699695);c(377810);var h,A=c(110482);!function(x){x.Left="Left",x.Right="Right",x.Top="Top",x.Bottom="Bottom",x.All="All"}(h||(h={}));const E=({fillId:x,strokeId:o,color:c})=>L.jsxs(L.Fragment,{children:[L.jsxs("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:x,children:[L.jsx("stop",{stopOpacity:.8,className:T.A(A.A.gradientLight,A.A[c])}),L.jsx("stop",{offset:"1",stopOpacity:.8,className:T.A(A.A.gradientDark,A.A[c])})]}),L.jsxs("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:o,children:[L.jsx("stop",{stopOpacity:.8,className:T.A(A.A.strokeLight,A.A[c])}),L.jsx("stop",{offset:"1",stopOpacity:.8,className:T.A(A.A.strokeDark,A.A[c])})]})]}),H=x=>L.jsx(E,{...x,color:"blue"}),N=x=>L.jsx(E,{...x,color:"red"}),Q=x=>L.jsx(E,{...x,color:"green"}),I=x=>L.jsx(E,{...x,color:"gray"}),k=x=>L.jsx(E,{...x,color:"ochre"}),_=x=>L.jsx(E,{...x,color:"violet"}),X=({id:x})=>L.jsxs("linearGradient",{id:x,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[L.jsx("stop",{offset:"0%",stopColor:"#E0C064"}),L.jsx("stop",{offset:"22.78%",stopColor:"#E2BF50"}),L.jsx("stop",{offset:"28.07%",stopColor:"#FCFCFC"}),L.jsx("stop",{offset:"33.37%",stopColor:"#E0C164"}),L.jsx("stop",{offset:"80.88%",stopColor:"#D7A44A"}),L.jsx("stop",{offset:"87.78%",stopColor:"#FFFFFF"}),L.jsx("stop",{offset:"95.11%",stopColor:"#D6A147"}),L.jsx("stop",{offset:"100%",stopColor:"#D59D44"})]})},166175:(x,o,c)=>{c.d(o,{RU:()=>L,RY:()=>y});var L,T=c(64922),h=c(699695),A=c(504642),E=c(377810),H=c(895083),N=c(745186),Q=c(166958),I=c(110482);!function(x){x.BANKER="banker",x.PLAYER="player"}(L||(L={}));const k={[L.PLAYER]:H.ZE,[L.BANKER]:H.i_},_={[N.d.Default]:{path:"M241 1v16.135c-23.6 1.278-44.808 11.548-60.259 27.444-15.615 16.064-25.35 37.875-25.73 61.965h0L155 108v91H4a2.99 2.99 0 01-2.121-.879A2.99 2.99 0 011 196h0V4c0-.828.336-1.578.879-2.121C1.422 1.336 3.172 1 4 1h237z",width:242,height:200},[N.d.Landscape]:{path:"M156 1v9.807c-15.268.912-28.983 7.592-38.994 17.891-10.191 10.484-16.544 24.718-16.792 40.443h0l-.007.947V129H3.198a2.19 2.19 0 01-1.554-.644A2.19 2.19 0 011 126.802h0V3.198c0-.607.246-1.156.644-1.554A2.19 2.19 0 013.198 1H156z",width:157,height:130},[N.d.LandscapeWide]:{path:"M192 1v12.519c-18.797 1.067-35.686 9.267-48.001 21.937-12.488 12.847-20.273 30.29-20.577 49.558h0l-.009 1.163V159H3.198a2.19 2.19 0 01-1.554-.644A2.19 2.19 0 011 156.802h0V3.198c0-.607.246-1.156.644-1.554A2.19 2.19 0 013.198 1H192z",width:193,height:160},[N.d.Portrait]:{path:"M179.000,1.000 L179.000,12.116 C161.467,13.133 145.716,20.793 134.227,32.616 C122.563,44.620 115.292,60.915 115.009,78.914 L115.009,78.914 L115.000,80.000 L115.000,148.000 L3.198,148.000 C2.591,148.000 2.042,147.754 1.644,147.356 C1.246,146.958 1.000,146.409 1.000,145.802 L1.000,145.802 L1.000,3.198 C1.000,2.591 1.246,2.042 1.644,1.644 C2.042,1.246 2.591,1.000 3.198,1.000 L3.198,1.000 L179.000,1.000 Z",width:180,height:149}},X={[N.d.Default]:{path:"M289 1v16.135c-23.6 1.278-44.808 11.548-60.259 27.444-15.615 16.064-25.35 37.875-25.73 61.965h0L203 108v91H4a2.99 2.99 0 01-2.121-.879A2.99 2.99 0 011 196h0V4c0-.828.336-1.578.879-2.121A2.99 2.99 0 014 1h285z",width:290,height:200},[N.d.Landscape]:{path:"M189 1v9.807c-15.268.912-28.983 7.592-38.994 17.891-10.191 10.484-16.544 24.718-16.792 40.443h0l-.007.947V129H3.198a2.19 2.19 0 01-1.554-.644A2.19 2.19 0 011 126.802h0V3.198c0-.607.246-1.156.644-1.554A2.19 2.19 0 013.198 1H189z",width:190,height:130},[N.d.LandscapeWide]:{path:"M231 1v12.519c-18.797 1.067-35.686 9.267-48.001 21.937-12.488 12.847-20.273 30.29-20.577 49.558h0l-.009 1.163V159H3.198a2.19 2.19 0 01-1.554-.644A2.19 2.19 0 011 156.802h0V3.198c0-.607.246-1.156.644-1.554A2.19 2.19 0 013.198 1H231z",width:232,height:160}},r={[N.d.Default]:{path:"M241 1v16.135c-23.6 1.278-44.808 11.548-60.259 27.444-15.615 16.064-25.35 37.875-25.73 61.965h0L155 108v91H4a2.99 2.99 0 01-2.121-.879A2.99 2.99 0 011 196h0V4c0-.828.336-1.578.879-2.121C1.422 1.336 3.172 1 4 1h237z",width:242,height:200},[N.d.Portrait]:{path:"M179 1V5.90164C162.948 6.62202 149.493 13.4824 138.93 24.1908C128.169 35.0996 121.445 50.0017 121.183 66.4811L121.175 67.4737V109H4C3.17157 109 2.42157 108.664 1.87868 108.121C1.33579 107.578 1 106.828 1 106V4C1 3.17157 1.33579 2.42157 1.87868 1.87868C2.42157 1.33579 3.17157 1 4 1L179 1Z",width:180,height:110}},y=E.memo((({type:x,wide:o,small:c,animate:y,hasBet:v,faded:B,size:Y=N.d.Default,paleBackground:F,brightBackground:t,highlightBorder:m,shapeGradients:C,shadowFilter:V})=>{var i;const M=E.useRef(`${Math.random()}_id`).current,{width:Z,height:S,path:u}=c?r[Y]:o?X[Y]:_[Y],d=(null!=C?C:k)[x],O=y?2:1;return T.jsxs("svg",{className:h.A(I.A.svg,I.A.mainShape,I.A.svgBetspot,{[I.A.isMirrored]:x===L.BANKER,[I.A.animate]:!!y,[I.A.hasBet]:v&&!t,[I.A.disabled]:B,[I.A.win]:!F&&O>1},...null!==(i=null==V?void 0:V.classNames)&&void 0!==i?i:[]),preserveAspectRatio:"none",...Q.E(Z,S),children:[T.jsxs("defs",{children:[(null==V?void 0:V.element)&&(null==V?void 0:V.id)&&T.jsx(V.element,{id:V.id}),T.jsx(d,{fillId:`${x}${M}_fill`,strokeId:`${x}${M}_stroke`}),m&&T.jsx(H.Mv,{id:`mainShapeGradient${M}`})]}),T.jsx("g",{filter:(null==V?void 0:V.id)?`url(#${null==V?void 0:V.id}-${M})`:void 0,children:A.A(O,(o=>T.jsx("path",{d:u,fill:`url(#${x}${M}_fill)`,stroke:m?`url(#mainShapeGradient${M})`:`url(#${x}${M}_stroke)`,strokeWidth:2,fillRule:"evenodd",className:I.A.shape},o)))})]})}))},860785:(x,o,c)=>{c.d(o,{BL:()=>L,fI:()=>F});var L,T=c(64922),h=c(699695),A=c(504642),E=c(377810),H=c(586234),N=c(895083),Q=c(166175),I=c(745186),k=c(166958),_=c(110482);!function(x){x.Rect="rect",x.Semicircle="semicircle"}(L||(L={}));const X={[L.Rect]:x=>{const{highlightBorder:o,betSpot:c,className:L,Gradient:H,width:Q,height:I,faded:k,layerCount:X=1,paleBackground:r}=x,y=E.useRef(`${Math.random()}_id`).current,v=o?`url(#${c}${y}_rect_golden_stroke)`:`url(#${c}${y}_rect_stroke)`;return T.jsxs("svg",{className:h.A(L,_.A.rectShape,{[_.A.disabled]:k,[_.A.win]:!r&&X>1}),preserveAspectRatio:"none",width:Q,height:I,children:[T.jsxs("defs",{children:[o&&T.jsx(N.Mv,{id:`${c}${y}_rect_golden_stroke`}),T.jsx(H,{fillId:`${c}${y}_rect_fill`,strokeId:`${c}${y}_rect_stroke`})]}),A.A(X,(x=>T.jsx("rect",{width:"100%",height:"100%","data-width":Q,"data-height":I,rx:4,ry:4,fill:`url(#${c}${y}_rect_fill)`,stroke:v,strokeWidth:4,fillRule:"evenodd",className:_.A.shape},x)))]})},[L.Semicircle]:function({highlightBorder:x,betSpot:o,className:c,Gradient:L,width:H,height:Q,path:I,faded:X,layerCount:r=1,paleBackground:y}){const v=E.useRef(`${Math.random()}_id`).current;return T.jsxs("svg",{className:h.A(c,{[_.A.disabled]:X,[_.A.win]:!y&&r>1}),preserveAspectRatio:"none",...k.E(H,Q),children:[T.jsxs("defs",{children:[x&&T.jsx(N.Mv,{id:`${o}${v}_rect_golden_stroke`}),T.jsx(L,{fillId:`${o}${v}_semicircle_fill`,strokeId:`${o}${v}_semicircle_stroke`})]}),A.A(r,(c=>T.jsx("path",{fill:`url(#${o}${v}_semicircle_fill)`,stroke:x?`url(#${o}${v}_rect_golden_stroke)`:`url(#${o}${v}_semicircle_stroke)`,strokeWidth:2,fillRule:"evenodd",d:I,className:_.A.shape},c)))]})}},r={[Q.RU.PLAYER]:N.ZE,[Q.RU.BANKER]:N.i_},y={[H.K8.PerfectPair]:N.sj,[H.K8.EitherPair]:N.sj,[H.K8.SuperSix]:N.mb},v={[I.d.Default]:{path:"",width:106,height:64},[I.d.Landscape]:{path:"",width:65,height:40},[I.d.LandscapeWide]:{path:"",width:80,height:50},[I.d.Portrait]:{path:"",width:122,height:38}},B={[I.d.Default]:{path:"M99 1.008v197.984l-.637-.005c-26.984-.438-51.343-11.67-68.947-29.568C11.842 151.55 1 127.042 1 100c0-27.042 10.842-51.551 28.416-69.419C47.02 12.684 71.38 1.451 98.354 1.013h0L99 1.008z",width:100,height:200},[I.d.Landscape]:{path:"M63.933 1.009L64 128.992l-.059-.001c-17.443-.282-33.191-7.544-44.571-19.114C8.009 98.326 1 82.482 1 65c0-17.482 7.009-33.326 18.37-44.877C30.75 8.553 46.498 1.291 63.933 1.009h0z",width:65,height:130},[I.d.LandscapeWide]:{path:"M78.685 1.011L79 158.992l-.307-.003c-21.532-.349-40.97-9.312-55.017-23.594C9.652 121.137 1 101.579 1 80s8.652-41.137 22.676-55.395C37.723 10.323 57.161 1.36 78.685 1.011h0z",width:80,height:160},[I.d.Portrait]:{path:"",width:0,height:0}},Y={[L.Rect]:v,[L.Semicircle]:B},F=E.memo((({shape:x,mainShape:o,highlightBorder:c,betSpot:L,isSingleBetSpot:A,animate:E,hasBet:H,faded:k,size:v=I.d.Default,paleBackground:B,brightBackground:F})=>{const t=X[x];let m=y[L];m||(m=o?r[o]:N.qF);const C=E?2:1;return T.jsx(t,{highlightBorder:c,betSpot:L,className:h.A(_.A.svg,_.A.svgBetspot,{[_.A.isMirrored]:A&&o===Q.RU.BANKER,[_.A.hasBet]:H}),Gradient:m,layerCount:C,faded:k,paleBackground:B,brightBackground:F,...Y[x][v]})}))},8568:(x,o,c)=>{c.d(o,{IM:()=>X});var L=c(64922),T=c(699695),h=c(504642),A=c(377810),E=c(895083),H=c(745186),N=c(166958),Q=c(110482);const I={[H.d.Default]:{path:"M82 1c22.368 0 42.618 9.066 57.276 23.724C153.934 39.382 163 59.632 163 82h0v91H1V82c0-22.368 9.066-42.618 23.724-57.276C39.382 10.066 59.632 1 82 1z",width:164,height:174},[H.d.Landscape]:{path:"M53 1c14.359 0 27.359 5.82 36.77 15.23C99.18 25.641 105 38.641 105 53h0v59H1V53c0-14.359 5.82-27.359 15.23-36.77C25.641 6.82 38.641 1 53 1z",width:106,height:113},[H.d.LandscapeWide]:{path:"M65.5 1c17.811 0 33.936 7.219 45.608 18.892C122.781 31.564 130 47.689 130 65.5h0V138H1V65.5c0-17.811 7.219-33.936 18.892-45.608C31.564 8.219 47.689 1 65.5 1z",width:131,height:139},[H.d.Portrait]:{path:"M61.500,1.000 C78.207,1.000 93.332,7.772 104.280,18.720 C115.228,29.668 122.000,44.793 122.000,61.500 L122.000,61.500 L122.000,129.000 L1.000,129.000 L1.000,61.500 C1.000,44.793 7.772,29.668 18.720,18.720 C29.668,7.772 44.793,1.000 61.500,1.000 Z",width:123,height:130}},k={[H.d.Default]:{path:"M82 1c22.368 0 42.618 9.066 57.276 23.724C153.934 39.382 163 59.632 163 82h0v37H1V82c0-22.368 9.066-42.618 23.724-57.276C39.382 10.066 59.632 1 82 1z",width:164,height:120},[H.d.Landscape]:{path:"M53 1c14.359 0 27.359 5.82 36.77 15.23C99.18 25.641 105 38.641 105 53h0v15H1V53c0-14.359 5.82-27.359 15.23-36.77C25.641 6.82 38.641 1 53 1z",width:106,height:69},[H.d.LandscapeWide]:{path:"M65.5 1c17.811 0 33.936 7.219 45.608 18.892C122.781 31.564 130 47.689 130 65.5h0V84H1V65.5c0-17.811 7.219-33.936 18.892-45.608C31.564 8.219 47.689 1 65.5 1z",width:131,height:85},[H.d.Portrait]:{path:"M61.500,1.000 C78.207,1.000 93.332,7.772 104.280,18.720 C115.228,29.668 122.000,44.793 122.000,61.500 L122.000,61.500 L122.000,88.000 L1.000,88.000 L1.000,61.500 C1.000,44.793 7.772,29.668 18.720,18.720 C29.668,7.772 44.793,1.000 61.500,1.000 Z",width:123,height:89}},_={[H.d.Default]:{path:"M82 1c22.368 0 42.618 9.066 57.276 23.724C153.934 39.382 163 59.632 163 82h0v91H1V82c0-22.368 9.066-42.618 23.724-57.276C39.382 10.066 59.632 1 82 1z",width:164,height:174},[H.d.Portrait]:{path:"M57 1C72.464 1 86.464 7.26801 96.598 17.402C106.732 27.536 113 41.536 113 57V99H1V57C1 41.536 7.26802 27.536 17.402 17.402C27.536 7.26801 41.536 1 57 1Z",width:114,height:100}},X=A.memo((({animate:x,short:o=!1,small:c=!1,highlightBorder:X,faded:r,hasBet:y,size:v=H.d.Default,paleBackground:B})=>{const Y=A.useRef(`${Math.random()}_id`).current,{width:F,height:t,path:m}=function(x,o,c){return c?_[x]:o?k[x]:I[x]}(v,o,c),C=x?2:1;return L.jsxs("svg",{preserveAspectRatio:"none",className:T.A(Q.A.svg,Q.A.svgBetspot,Q.A.tieShape,{[Q.A.animate]:!!x,[Q.A.hasBet]:y,[Q.A.disabled]:r,[Q.A.win]:!B&&C>1}),...N.E(F,t),children:[L.jsxs("defs",{children:[X&&L.jsx(E.Mv,{id:`tieShapeGradient${Y}`}),L.jsx(E.gb,{fillId:`tie_fill${Y}`,strokeId:`tie_stroke${Y}`})]}),h.A(C,(x=>L.jsx("path",{d:m,fill:`url(#tie_fill${Y})`,stroke:X?`url(#tieShapeGradient${Y})`:`url(#tie_stroke${Y})`,strokeWidth:2,fillRule:"evenodd",className:Q.A.shape},x)))]})}))},745186:(x,o,c)=>{var L;c.d(o,{d:()=>L}),function(x){x.Default="default",x.Portrait="portrait",x.Landscape="landscape",x.LandscapeWide="landscapeWide"}(L||(L={}))},166958:(x,o,c)=>{c.d(o,{E:()=>L});const L=(x,o)=>({width:x,height:o,viewBox:`0 0 ${x} ${o}`})},905153:(x,o,c)=>{c.d(o,{W:()=>r,p:()=>y});var L=c(64922),T=c(699695),h=c(525620),A=c(377810),E=c(732319),H=c(68521),N=c(368329),Q=c(346160),I=c(876759),k=c(339212),_=c(860785),X=c(110482);function r({betSpot:x,reverseScale:o=1,hasBet:c,faded:h,shape:N,mainShape:r,betSpotHandlers:y,isPortrait:v,isSingleBetSpot:B,isWinning:Y,highlightBorder:F=!1,withBonus:t=!1,payouts:m,bonus:C,skipPayoutsAnimation:V=I.I(),size:i,ExtraComponent:M,paleBackground:Z,customLabelColor:S,BonusWinComponent:u,BonusComponent:d,skipRegisterRefs:O,registerBetSpotRef:j,OverlayComponent:e,isIOS:q}){const f=t&&!!C,U=E.v(j,x),s=A.useRef(null),[D,$]=A.useState(void 0);return A.useLayoutEffect((()=>{(Q.vL().adjustSideBetSpotNameScale||o>1)&&U.current&&s.current&&s.current.clientWidth+9>U.current.clientWidth&&$(U.current.clientWidth/s.current.clientWidth-(v?.15:.2))}),[U,v,o,B]),L.jsxs("div",{ref:O?void 0:U,"data-betspot-destination":x,className:T.A(X.A.item,{[X.A.single]:B&&!v,[X.A.animate]:Y,[X.A.vertical]:v}),"data-role":`bet-spot-${x}`,...y,children:[L.jsx(_.fI,{shape:N,mainShape:r,highlightBorder:F,betSpot:x,isSingleBetSpot:B,size:i,animate:Y,hasBet:c,faded:h,paleBackground:Z}),u&&L.jsx(u,{betSpot:x,sideShape:N,mainShape:r}),m.length>0&&L.jsx(k.W,{betSpotRef:U,scale:m.length>1?D:void 0,payouts:m,withBonus:t,bonus:C,skipAnimation:V,color:S,isIOS:q}),L.jsxs("div",{ref:s,className:X.A.betspotTitle,style:D?{transform:`scale(${D})`}:{},children:[L.jsx("span",{className:T.A({[X.A.animateOut]:f,[X.A.skipAnimation]:V}),style:{color:S},children:Q.Tl(`betSpot.${x}`)}),t&&!!C&&d&&L.jsx(d,{betSpot:x,isSingleBetSpot:B,sideShape:N,mainShape:r})]}),M&&L.jsx(M,{}),L.jsx("div",{className:T.A(X.A.chipContainer,{[X.A.redEnvelopeBonus]:f}),children:!O&&L.jsx(H.B,{betSpot:x})}),e&&L.jsx(e,{sideShape:N,mainShape:r,shapeSize:i})]})}const y=h.PA((x=>{const o=N.P(),c=x.betSpot,T=!!o.bets.bets[c];return L.jsx(r,{...x,hasBet:T,faded:!o.gamePhase.isBetsOpen&&!T,isPortrait:o.device.isPortrait,paleBackground:o.device.isPhone&&o.device.isLandscape,isWinning:o.gameResult.winningBetSpots.includes(c),registerBetSpotRef:o.reference.betSpot.set,reverseScale:o.device.dimensions.reverseScale})}))},935899:(x,o,c)=>{c.d(o,{A:()=>_});var L=c(64922),T=c(699695),h=(c(377810),c(595922)),A=c(808432);const E="card--367d0",H="border--2b2cc",N="left--c049d",Q="right--483f9",I="isPortrait--afa9b",k="isDesktop--19cae",_=({code:x,horizontalDirection:o,isDesktop:c,isPortrait:_,CardBorder:X,CardOverlay:r,index:y,hand:v,colorScheme:B})=>L.jsxs("div",{className:E,children:[X&&L.jsx("div",{className:T.A(H,{[N]:o===h.I.Left,[Q]:o===h.I.Right,[k]:c,[I]:_}),children:X},`${y}-${v}`),L.jsx(h.Z,{code:x,horizontalDirection:o,theme:A.Sx.Small,isAnimated:!0,isFlipped:"XX"!==x,colorScheme:B}),r]})},556182:(x,o,c)=>{c.d(o,{s:()=>I});var L=c(64922),T=c(699695),h=c(377810),A=c(930104),E=c(803729),H=c(595922),N=c(808432),Q=c(856062);const I=h.memo((({Card:x,cards:o,hand:c,cardType:h,animateCardAppearance:I,isPortrait:k=!1,decreased:_,isDesktop:X=!1,isSmallIndent:r=!1,lifted:y,liftedCentral:v,landscapePosition:B})=>{const Y=(c===A.U.Banker?E.p.Right:E.p.Left)===E.p.Right,F=h===E.b.Simple,t=h===E.b.Enhanced,m=Y?H.I.Left:H.I.Right,C=T.A(Q.A.cardsHand,{[Q.A.toRight]:Y,[Q.A.simple]:F,[Q.A.enhanced]:t,[Q.A.isPortrait]:k&&!F,[Q.A.decreased]:_,[Q.A.lifted]:y,[Q.A.liftedCentral]:v}),V=!Y&&1===o.length,i=B&&!k?{"--landscapeX":B.x,"--landscapeY":B.y}:{};return L.jsx("div",{className:C,style:i,children:L.jsxs("div",{className:T.A(Q.A.cards,{[Q.A.small]:F,[Q.A.enhanced]:t}),children:[o.map(((o,h)=>L.jsx("div",{className:T.A(Q.A.card,{[Q.A.horizontal]:2===h,[Q.A.small]:F,[Q.A.enhanced]:t,[Q.A.animatedCardAppearance]:I,[Q.A.isPortrait]:k&&!F,[Q.A.isSmallIndent]:r}),"data-role":"card","data-position":h,children:x?L.jsx(x,{code:o,isPortrait:k,isDesktop:X,horizontalDirection:2===h?m:H.I.None,hand:c,index:h}):L.jsx(H.Z,{theme:N.Sx.Small,code:o,horizontalDirection:2===h?m:H.I.None,isFlipped:"XX"!==o})},h))),V&&L.jsx("div",{className:T.A(Q.A.cardPlaceHolder,{[Q.A.small]:F,[Q.A.enhanced]:h===E.b.Enhanced,[Q.A.isPortrait]:k&&!F,[Q.A.isSmallIndent]:r})})]})})}))},803729:(x,o,c)=>{var L,T;c.d(o,{b:()=>T,p:()=>L}),function(x){x[x.Left=0]="Left",x[x.Right=1]="Right"}(L||(L={})),function(x){x.Simple="Simple",x.Regular="Regular",x.Enhanced="Enhanced"}(T||(T={}))},37270:(x,o,c)=>{c.d(o,{s:()=>N});var L=c(64922),T=c(699695),h=c(104480),A=c.n(h),E=c(377810);const H={risingNumbersContainer:"risingNumbersContainer--241cd",leftStartPayoutMimic:"leftStartPayoutMimic--92caf",risingNumber:"risingNumber--ced6f",hidden:"hidden--a61bd",leftContainer:"leftContainer--4e332",payout:"payout--ba5a3",animate:"animate--4b374",withoutGradient:"withoutGradient--3a885"};function N({payout:x,bonus:o,animationDelay:c=1800,skipAnimation:h,payoutClassName:N,delimiterClassName:Q,isIOS:I}){const[k,_]=E.useState(!1),[X,r]=x.split(":").map((x=>+x)),[y,v]=E.useState(0),B=o?o-X:0,Y=B?[]:null,F=E.useRef(null),t=E.useCallback((x=>{v(x.offsetHeight)}),[]);if(E.useEffect((()=>{const x=F.current;if(!x)return;const o=A()();return o.listenTo(x,t),t(x),()=>{o.removeListener(x,t),o.uninstall(x)}}),[t]),E.useLayoutEffect((()=>{if(_(!1),!o||X>=o)return;const x=window.setTimeout((()=>_(!0)),h?0:c);return()=>{window.clearTimeout(x)}}),[o,c,X]),o&&B)for(let x=X+1;x<=o;x++)null==Y||Y.push(L.jsx("span",{className:T.A(N,H.risingNumber),children:x},x));const m=.1*B,C={transform:"translate3d(0, -100%, 0)",transition:`transform ${h?0:.1}s linear`},V={top:y,transform:"translate3d(0, -100%, 0)",transition:`transform ${h?0:m>2?2:m}s linear`};return L.jsxs("div",{ref:F,className:T.A(N,H.payout,{[H.animate]:k,[H.withoutGradient]:I}),children:[L.jsxs("div",{className:H.leftContainer,children:[L.jsx("span",{className:T.A({[H.hidden]:Y}),children:X}),Y&&L.jsxs(L.Fragment,{children:[L.jsx("span",{className:H.leftStartPayoutMimic,style:k?C:void 0,children:X}),Y&&L.jsx("div",{className:T.A(H.risingNumbersContainer),style:k?V:void 0,children:Y})]})]}),L.jsx("span",{className:Q,children:":"}),L.jsx("span",{children:r})]})}},99496:(x,o,c)=>{c.d(o,{Z:()=>T,a:()=>h});var L=c(745186);function T(x){return x.isDesktop?L.d.Default:x.isPortrait?L.d.Portrait:x.DS.IS_IPHONE10_OR_NEWER?L.d.LandscapeWide:L.d.Landscape}function h(x){return x?"onClick":"onTouchEnd"}},693436:(x,o,c)=>{c.d(o,{k:()=>M});var L=c(64922),T=c(699695),h=c(377810),A=c(525620),E=c(368329),H=c(810770);const N=A.PA((x=>{const o=E.P();return L.jsx(H.v,{chipColors:o.ag.values.chipstackChipColors,...x})}));var Q=c(671984);class I{constructor(x){if(this.component=x,this.timeoutIds={},this.intervalIds={},this.clearInterval=x=>window.clearInterval(this.intervalIds[x]),this.clearTimeout=x=>window.clearTimeout(this.timeoutIds[x]),!this.component.componentWillUnmount)throw new Error("Target component shall have componentWillUnmount defined with `unmount` call")}setInterval(x,o,c,...L){return this.clearInterval(x),this.intervalIds[x]=window.setInterval(o,c,...L)}setTimeout(x,o,c,...L){return this.clearTimeout(x),this.timeoutIds[x]=window.setTimeout(o,c,...L)}unmount(){Object.keys(this.intervalIds).map(this.clearInterval),Object.keys(this.timeoutIds).map(this.clearTimeout)}getTimeoutIdByKey(x){return this.timeoutIds[x]}}var k=c(379268);const _="chipSize--1811f",X="relative--24c52",r="isPortrait--96aa8",y="mediumChip--83319",v="largeChip--3f23a",B="fullSize--f7f87",Y="chip--618c4",F="hidden--f4c2b",t="win--cc105",m="isActiveDraggableChip--30739",C="interactable--180c0",{fullAnimationDuration:V}=Q.w;var i;!function(x){x.ChangeValue="changeValue",x.UpdateActiveChip="updateActiveChip",x.HasActiveChip="hasActiveChip",x.ReadyToMove="readyToMove"}(i||(i={}));class M extends h.PureComponent{constructor(){super(...arguments),this.state={value:this.props.value,isActiveDraggableChip:this.props.isActiveDraggableChip,hasActiveDraggableChip:this.props.hasActiveDraggableChip},this.domTracker=new I(this),this.dragInitialized=!1,this.chipRef=h.createRef(),this.multiInstance=k.j(),this.updateValue=({newValue:x,prevValue:o,animationDuration:c,withDelay:L=!1})=>{L?(!!this.domTracker.getTimeoutIdByKey(i.ChangeValue)&&this.setValue(o),this.domTracker.setTimeout(i.ChangeValue,(()=>{this.domTracker.clearTimeout(i.ChangeValue),this.setValue(x)}),c)):(this.domTracker.clearTimeout(i.ChangeValue),this.setValue(x))},this.setValue=x=>this.setState({value:x}),this.updateActiveChip=(x,o,c=!1)=>{c?this.domTracker.setTimeout(i.UpdateActiveChip,(()=>this.setState({isActiveDraggableChip:x})),o):(this.domTracker.clearTimeout(i.UpdateActiveChip),this.setState({isActiveDraggableChip:x}))},this.updateHasActiveChip=(x,o=!1)=>{o?this.domTracker.setTimeout(i.HasActiveChip,(()=>this.setState({hasActiveDraggableChip:x})),V):(this.domTracker.clearTimeout(i.HasActiveChip),this.setState({hasActiveDraggableChip:x}))},this.subscribeTouchEndEvent=()=>{document.addEventListener("touchend",this.onTouchEnd,!0),document.addEventListener("mouseup",this.onTouchEnd,!0)},this.unsubscribeTouchEndEvent=()=>{document.removeEventListener("touchend",this.onTouchEnd,!0),document.removeEventListener("mouseup",this.onTouchEnd,!0)},this.handleMouseUpInIframe=x=>{var o;this.unsubscribeMouseUpEventInIframes();const c=null===(o=x.view)||void 0===o?void 0:o.document,L=document;c!==L&&L.dispatchEvent(new Event("mouseup"))},this.onTouchStart=()=>{const{isDragAllowed:x,betSpot:o,initMove:c,isFF:L,setDragChipRef:T}=this.props,{hasActiveDraggableChip:h}=this.state;x&&!h&&(this.dragInitialized=!1,L&&this.subscribeMouseUpEventInIframes(),this.subscribeTouchEndEvent(),this.domTracker.setTimeout(i.ReadyToMove,(()=>{this.unsubscribeTouchEndEvent(),this.props.isDragAllowed&&(this.dragInitialized=!0,T(this.chipRef.current),c(o))}),200))},this.onTouchEnd=x=>{this.dragInitialized&&(x.preventDefault(),x.stopPropagation(),this.dragInitialized=!1),this.domTracker.clearTimeout(i.ReadyToMove),this.unsubscribeTouchEndEvent()}}componentDidMount(){const{registerDestinationRef:x,betSpot:o}=this.props;x(o,this.chipRef.current)}componentDidUpdate(x){const{isChipStackHidden:o,registerDestinationRef:c,betSpot:L,isWinningChip:T,value:h,isActiveDraggableChip:A,hasActiveDraggableChip:E,isFlyAnimationAllowed:H,animationDuration:N}=this.props;!o&&x.isChipStackHidden&&c(L,this.chipRef.current),h<x.value||T||!H?this.updateValue({newValue:h,animationDuration:N}):h>x.value&&this.updateValue({newValue:h,prevValue:x.value,animationDuration:N,withDelay:!0}),x.isActiveDraggableChip&&!A&&h===x.value?this.updateActiveChip(A,N,!0):this.updateActiveChip(A,N),x.hasActiveDraggableChip&&!E?this.updateHasActiveChip(E,!0):this.updateHasActiveChip(E)}componentWillUnmount(){this.domTracker.unmount()}render(){const{isWinningChip:x,isPortrait:o,chipComponent:c,chipSize:h,commonChipSize:A,isInteractable:E}=this.props,{value:H,isActiveDraggableChip:Q}=this.state,I=h?{width:h,height:h}:{};return L.jsx("div",{ref:this.chipRef,className:T.A({[r]:o,[v]:"lg"===A,[y]:"md"===A,[X]:"relative"===A,[B]:"fullSize"===A},_),style:I,children:L.jsx("div",{"data-is-chip-visible":!!H,onMouseDown:this.onTouchStart,onTouchStart:this.onTouchStart,className:T.A({[F]:!H,[t]:x,[m]:Q,[C]:E},Y),children:c?L.jsx(c,{value:H,hasShadow:!x}):L.jsx(N,{value:H,hasShadow:!x,isCover:!0})})})}subscribeMouseUpEventInIframes(){var x;null===(x=this.multiInstance)||void 0===x||x.frames.forEach((x=>{var o;null===(o=x.frame.contentDocument)||void 0===o||o.addEventListener("mouseup",this.handleMouseUpInIframe,!0)}))}unsubscribeMouseUpEventInIframes(){var x;null===(x=this.multiInstance)||void 0===x||x.frames.forEach((x=>{var o;null===(o=x.frame.contentDocument)||void 0===o||o.removeEventListener("mouseup",this.handleMouseUpInIframe,!0)}))}}},68521:(x,o,c)=>{c.d(o,{B:()=>N});var L=c(64922),T=c(525620),h=c(94767),A=c(368329),E=c(671984),H=c(693436);const N=T.PA((({betSpot:x,commonChipSize:o})=>{const{ag:c,device:T,bets:N,gamePhase:Q,gameResult:I,reference:k,flyingChips:_,draggableChip:X}=A.P(),r=N.getBetSpotValue(x),y=I.winningBetSpots.includes(x)&&r>0,[,v]=h.J(k.common);return L.jsx(H.k,{betSpot:x,isChipStackHidden:c.values.chipstackHidden,isDragAllowed:Q.isBetsOpen,isInteractable:Q.isBetsOpen,value:r,isWinningChip:y,isPortrait:T.isPortrait,isFF:T.isFF,commonChipSize:null!=o?o:T.isPhone?"md":void 0,hasActiveDraggableChip:X.isDragInProgress,isActiveDraggableChip:x===X.from,initMove:X.updateFrom,registerDestinationRef:k.chip.set,isFlyAnimationAllowed:_.animationEnabled,animationDuration:E.w.flyAnimationDuration,setDragChipRef:v})}))},776924:(x,o,c)=>{c.d(o,{e:()=>p});var L=c(64922),T=c(699695),h=c(377810),A=c(890614),E=c(837557),H=c(346160);const N=[["#1a1a1a","#333333"],["#757272","#1a1a1a"],["#1a1a1a","#757272"],["#1a1a1a","#757272"],"#000000"],Q=[["#A1701B","#fff","#A1701B"],"rgba(255,255,255,0.30)"];var I,k;function _(x,o){const c=h.useRef(x);h.useEffect((()=>{c.current=x}),[x]),h.useEffect((()=>{if(null!==o){const x=window.setTimeout((function(){c.current()}),o);return()=>{window.clearTimeout(x)}}}),[o])}!function(x){x[x.NoAnimation=0]="NoAnimation",x[x.IconActionShrinking=1]="IconActionShrinking",x[x.IconCheckGrowing=2]="IconCheckGrowing",x[x.AnimationsFinished=3]="AnimationsFinished"}(I||(I={})),function(x){x[x.Inactive=0]="Inactive",x[x.Hovered=1]="Hovered",x[x.Pressed=2]="Pressed",x[x.InTransitionBetweenButtonStates=3]="InTransitionBetweenButtonStates",x[x.Disabled=4]="Disabled"}(k||(k={}));const X=()=>Math.floor(1e6*Math.random()),r="buttonFill--84c34",y="buttonInnerBorder--11ef2",v="button--8e600",B="animatingIconAction--584fb",Y="big--c4a72",F="enabled--27bab",t="visible--b0256",m="disabled--615f4",C="pressed--1ebcf",V="mobile--2fe7c",i="buttonSVG--c2730",M="shouldAnimateFill--5e1e6",Z="textFadeOut--1ecf4",S="textFadeIn--e2745",u="iconActionContainer--805aa",d="icon--640c1",O="iconCheckContainer--393e8",j="animatingIconCheck--2d35f",e="disabledAnimations--a71f9",q="buttonWrapper--86a37";var f,U;!function(x){x[x.Left=0]="Left",x[x.Right=1]="Right",x[x.Center=2]="Center"}(f||(f={})),function(x){x[x.Default=0]="Default",x[x.Hovered=1]="Hovered",x[x.Pressed=2]="Pressed",x[x.Accepted=3]="Accepted",x[x.Disabled=4]="Disabled"}(U||(U={}));const s={[f.Left]:"xMinYMid meet",[f.Center]:"xMidYMid meet",[f.Right]:"xMaxYMid meet"},D={},$={transition:"500ms"},a=x=>{const{fillColor:o,borderColor:c,textColor:A,label:E,position:H=f.Right,animationStep:N,pulsateButton:Q=!0,possibleLabels:k,iconActionPath:v,className:B,onMouseDown:Y,onPointerEnter:F,onPointerLeave:t,onTouchStart:m,onPointerUp:C,onClick:V,dataFields:d,hasCircleAroundIcon:j=!0,borderWidth:e=3,maxBorderWidth:q=3,innerBorderWidth:U=1,showInnerBorder:a=!0,fontWeight:z=500,shouldShowReminder:l,onRemindAnimationFinished:G,shouldAnimateStateTransition:p=!1,isVisible:P=!0}=x,K=h.useRef(X()),J=h.useRef(null),n=h.useRef(null),b=`actionNowBGGradient-${K.current}`,W=`actionNowGradient-${K.current}`,w=30-e,g=U>0?1:0,R=204-(q+U+g+13+36),xx=Array.isArray(c)?`url(#${W})`:c,ox=Array.isArray(o)?`url(#${b})`:o,cx=Q&&N<I.IconCheckGrowing,Lx=h.useRef(null),Tx=h.useRef(null),hx=h.useRef(null),[Ax,Ex]=h.useState(20),[Hx,Nx]=h.useState(R),[Qx,Ix]=h.useState(!1),kx=h.useRef(k?k.reduce(((x,o)=>{const c=x.replace(/\s+/,""),L=o.replace(/\s+/,"");return c.length>L.length?x:o})):E);h.useEffect((()=>{if(Lx.current&&Tx.current&&hx.current){const x=Lx.current.getBoundingClientRect().width,o=Tx.current.getBoundingClientRect().width,c=hx.current.getBoundingClientRect().width/204,L=12,T=15;if(x<=o-(L+T)*c)Nx(R-T);else if(x>o-L*c){const c=(o-L)/x;Ex((x=>x*c))}}Ix(!0)}),[R]);const _x=h.useCallback(((x="1s")=>{n.current&&(n.current.setAttribute("dur",x),"beginElement"in n.current&&n.current.beginElement())}),[]);_(_x,l?1e3:null),_((()=>null==G?void 0:G()),l?4e3:null),h.useEffect((()=>{l&&J.current&&n.current&&"beginElement"in n.current&&J.current.beginElement()}),[l]),h.useEffect((()=>{p&&_x("500ms")}),[p,_x]);let Xx="";p&&Array.isArray(k)&&(Xx=k[0]);const rx=p?$:D,yx=l,vx=l||p,Bx=p,Yx=X();return L.jsx("button",{type:"button",className:B,onTouchStart:m,onMouseDown:Y,onPointerEnter:F,onPointerLeave:t,onPointerUp:C,onClick:V,...d,children:L.jsxs("svg",{className:T.A(i,{[M]:cx}),width:"100%",height:"100%",viewBox:"0 0 204 60",preserveAspectRatio:s[H],ref:hx,children:[L.jsxs("defs",{children:[Array.isArray(c)&&L.jsx("linearGradient",{id:W,children:c.map(((x,o)=>L.jsx("stop",{stopColor:x,offset:o/(c.length-1)*100+"%"},function(x,o){return`${o}_${x}`}(x,o))))}),Array.isArray(o)&&L.jsxs("linearGradient",{id:b,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[L.jsx("stop",{style:rx,offset:"0%",stopColor:o[0]}),L.jsx("stop",{style:rx,offset:"100%",stopColor:o[1]})]}),L.jsx("filter",{id:`glowBlur-${K.current}`,children:L.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"4"})}),L.jsx("filter",{id:`lightStripeBlur-${K.current}`,children:L.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"6"})})]}),L.jsx("rect",{className:P?r:void 0,rx:w,ry:w,width:204-2*q,height:60-2*q,x:q,y:q,stroke:xx,strokeWidth:e,fill:ox,"data-role":"touchendable"}),L.jsx("clipPath",{id:`effectsClip-${K.current}`,children:L.jsx("rect",{rx:w-U,ry:w-U,width:204-2*(e+U+g),height:60-2*(e+U+g),x:e+U+g,y:e+U+g})}),yx&&L.jsxs(L.Fragment,{children:[L.jsx("rect",{id:`glow-${K.current}`,filter:`url(#glowBlur-${K.current})`,rx:w-U,ry:w-U,width:204-2*(e+U+g),height:60-2*(e+U+g),x:e+U+g,y:e+U+g,stroke:"#69EFCD",strokeWidth:"0",fill:"transparent",clipPath:`url(#effectsClip-${K.current})`}),L.jsx("animate",{xlinkHref:`#glow-${K.current}`,attributeName:"stroke-width",values:"0;8;8;0",dur:"4s",ref:J})]}),vx&&L.jsxs(L.Fragment,{children:[L.jsx("path",{d:"m 220 1 h 30 l -30 58 h -30 z",fill:"#fff",clipPath:`url(#effectsClip-${K.current})`,filter:`url(#lightStripeBlur-${K.current})`,opacity:"0.4",id:`lightStripe-${K.current}`}),L.jsx("animate",{xlinkHref:`#lightStripe-${K.current}`,attributeName:"d",attributeType:"XML",from:"m 220 1 h 30 l -30 58 h -30 z",to:"m -5 1 h 30 l -30 58 h -30 z",dur:"1s",ref:n})]}),a&&U>0&&L.jsx("rect",{className:y,rx:w-U,ry:w-U,width:204-2*(e+U+g),height:60-2*(e+U+g),x:e+U+g,y:e+U+g,stroke:"#20201C",strokeWidth:U}),j&&L.jsx("circle",{cx:31,cy:30,strokeWidth:1,stroke:A,r:18,fill:"none"}),N<I.IconCheckGrowing&&L.jsx("svg",{viewBox:"0 0 36 36",width:36,height:36,x:13,y:12,children:L.jsx("g",{className:u,fill:A,children:v})}),N>I.IconActionShrinking&&L.jsx("svg",{viewBox:"0 0 36 36",width:36,height:36,x:13,y:12,children:L.jsx("g",{className:O,fill:A,children:L.jsx("path",{d:"m24.4,11.7c.3,-.3 .8,-.3 1.2,.0l1.7,1.7c.0,.0 .0,.0 .0,.0c.3,.3 .3,.8 -.0,1.2l-8.6,8.5l-2.3,2.3c-.3,.3 -.8,.3 -1.2,-.0l-2.3,-2.3l-4.2,-4.1c-.3,-.3 -.3,-.9 .0,-1.2l1.7,-1.7c.3,-.3 .8,-.3 1.2,.0l4.2,4.1l8.6,-8.5z"})})}),L.jsxs("svg",{width:Hx,height:60-2*(e+U+g),x:49,y:e+U+g,children:[L.jsx("rect",{width:"100%",height:"100%",fill:"none",ref:Tx}),Bx&&L.jsx("text",{ref:Lx,className:Z,textAnchor:"middle",fontFamily:"Inter, Arial, sans-serif",fontSize:Ax,fontWeight:z,fill:Qx?A:"none",y:"50%",x:"50%",dominantBaseline:"central",children:Qx?Xx:kx.current},`${Yx}-animation-key`),L.jsx("text",{ref:Lx,className:Bx?S:"",textAnchor:"middle",fontFamily:"Inter, Arial, sans-serif",fontSize:Ax,fontWeight:z,fill:Qx?A:"none",y:"50%",x:"50%",dominantBaseline:"central",children:Qx?E:kx.current},Yx)]})]})})};var z;!function(x){x.Role="play-now-button"}(z||(z={}));const l={"data-role":z.Role};function G({status:x,isHovered:o,isPressed:c}){switch(!0){case x===A.Z.Disabled:return[k.Disabled,I.NoAnimation];case x===A.Z.Enabled&&c:return[k.Pressed,I.NoAnimation];case x===A.Z.Enabled&&o:return[k.Hovered,I.NoAnimation];case x===A.Z.Waiting:return[k.InTransitionBetweenButtonStates,I.IconCheckGrowing];case x===A.Z.Completed:return[k.Inactive,I.AnimationsFinished];default:return[k.Inactive,I.NoAnimation]}}const p=x=>{const{isVisible:o,isMobile:c,status:_,handleDealNow:X,setContainerVisibility:r,showDealNowTooltip:y,disableAnimations:i=!1}=x,[M,Z]=h.useState(!1),[S,u]=h.useState(!1),[[O,f],s]=h.useState(G({status:_,isHovered:M,isPressed:S})),D=O===k.Disabled,$=(z={animationStep:f,phase:O}).phase===k.Disabled?U.Disabled:z.animationStep>0?U.Accepted:z.phase===k.Pressed?U.Pressed:z.phase===k.Hovered&&E.DS.IS_DESKTOP?U.Hovered:U.Default;var z;const p=T.A(v,{[Y]:!c,[V]:c,[F]:o,[t]:o,[B]:f===I.IconActionShrinking,[j]:f===I.IconCheckGrowing,[C]:O===k.Pressed,[e]:i,[m]:D}),P=T.A(q,{[V]:c});h.useEffect((()=>{r&&r(o)}),[o,r]),h.useEffect((()=>{s(G({status:_,isHovered:M,isPressed:S}))}),[_,M,S]);const K=h.useCallback((x=>{if(_===A.Z.Disabled){const o=x.currentTarget.getBoundingClientRect();null==y||y(o)}}),[y,_]),J=h.useCallback((x=>{Z(!0),s(G({status:_,isHovered:!0,isPressed:S})),K(x)}),[_,S,K]),n=h.useCallback((()=>{Z(!1),u(!1),s(G({status:_,isHovered:!1,isPressed:S}))}),[_,S]),b=h.useCallback((x=>{u(!0),s(G({status:_,isHovered:M,isPressed:!0})),c&&K(x)}),[_,M,c,K]),W=h.useCallback((x=>{if(x.preventDefault(),_===A.Z.Disabled)return;const o=document.elementFromPoint(x.clientX,x.clientY);u(!1),s(G({status:_,isHovered:M,isPressed:!1})),(null==o?void 0:o.isSameNode(x.target))&&X()}),[M,X,_]),w=h.useCallback((()=>{_!==A.Z.Disabled&&(u(!1),s(G({status:_,isHovered:M,isPressed:!1})),X())}),[M,_,X]),g=L.jsx("path",{className:d,d:"M20.392 2.355l-1.082-.214v-1.07h-8.55a1.167 1.167 0 0 0-.19 0H3.082v23.55H4.38l-.216 1.071H3.082c-.598 0-1.082-.48-1.082-1.07V1.07C2 .479 2.484 0 3.082 0H19.31c.597 0 1.082.48 1.082 1.07v1.285zm-9.123-.848l15.874 3.339c.584.123.957.691.833 1.27l-4.948 23.036a1.082 1.082 0 0 1-1.284.824L5.871 26.638a1.07 1.07 0 0 1-.833-1.27L9.986 2.332a1.082 1.082 0 0 1 1.283-.825zm-.224 1.047L6.096 25.591l15.873 3.338 4.949-23.036-15.873-3.339zm-5.258 6.01c.435.416 1.524 1.074 1.617 1.923.101.928-1.182 1.088-1.516.486.022.43.254.803.254.803h-.71s.231-.365.253-.795c-.334.602-1.617.434-1.516-.494.093-.849 1.182-1.507 1.618-1.923zM17.182 12.6c.565.829 2.108 2.274 1.963 3.69-.16 1.547-2.308 1.368-2.641.272-.115.708.132 1.396.132 1.396l-1.158-.244s.506-.515.692-1.208c-.755.867-2.788.152-2.298-1.325.449-1.352 2.453-2.051 3.31-2.58zM7.409 2.698H7.02l.005 3.316s.024 1.478-1.386 1.48c-1.55 0-1.475-1.476-1.475-1.476V5.84l.779.004v.177s.034.774.682.773c.632 0 .623-.795.623-.795l-.005-3.3h-.39v-.556l1.555-.002.001.557zm11.882 19.649l-.317-.067.112-.523 1.216.258-.111.52-.318-.066-.021.871 1.06.223.337-.805-.318-.066.113-.524 1.216.258-.11.522-.32-.067-1.91 4.523-.741-.158.112-4.9zm1.4 1.717l-.846-.178-.074 2.404.92-2.226zM11.184 8.603l1.911-4.522.742.155-.113 4.9.32.068-.115.521-1.217-.254.112-.523.318.066.023-.87-1.06-.223-.339.804.318.067-.112.52-1.218-.253.113-.523.317.067zm1.986-1.005l.074-2.404-.92 2.226.846.178z"});return L.jsx("div",{className:P,children:L.jsx(a,{fillColor:N[$],borderColor:Q[0],pulsateButton:$===U.Default,label:H.Tl("dealNow.button"),possibleLabels:[H.Tl("dealNow.button")],animationStep:f,iconActionPath:g,className:p,onClick:w,onPointerEnter:c?void 0:J,onPointerLeave:c?void 0:n,onMouseDown:c?void 0:b,onTouchStart:c?b:void 0,onPointerUp:W,dataFields:l,shouldShowReminder:!1,hasCircleAroundIcon:[I.IconActionShrinking,I.IconCheckGrowing].includes(f),textColor:"#FFFFFF",borderWidth:D?1:3,isVisible:o})})}},94767:(x,o,c)=>{c.d(o,{J:()=>h});var L=c(377810);const T="dragChipOrigin";function h(x){return[L.useCallback((()=>x.get(T)),[x]),L.useCallback((o=>{x.set(T,o)}),[x])]}},898788:(x,o,c)=>{c.d(o,{K0:()=>N,Y7:()=>E,wy:()=>A});var L=c(730460),T=c(277082);const h={[T.WinnerTypeBaccarat.Player]:{en:"P",ch:"闲",ko:"플"},[T.WinnerTypeBaccarat.Banker]:{en:"B",ch:"庄",ko:"뱅"},[T.WinnerTypeBaccarat.Tie]:{en:"T",ch:"和",ko:"무"}};function A(x,o){const c=o.winner;switch(x){case L.I.Number:const x=c===T.WinnerTypeBaccarat.Player?o.playerScore:o.bankerScore;return void 0!==x?x:"";case L.I.Chinese:return h[c].ch;case L.I.Korean:return h[c].ko;default:return h[c].en}}const E=x=>({bankerPair:!1,bankerScore:0,natural:!1,playerPair:!1,playerScore:0,winner:x===T.WinnerTypeBaccarat.Banker?T.WinnerTypeBaccarat.Banker:T.WinnerTypeBaccarat.Player,isProbe:!0}),H=(x,o,c,L,h)=>({roadType:T.RoadType.Bead,winnerType:T.WinnerTypeBaccarat[x.winner],additionalType:T.getAdditionalTypeBaccarat(x.bankerPair,x.playerPair),symbol:A(o,x),animate:x.isProbe&&!L,isHidden:h,isPulsing:x.isProbe&&L,lightning:x.lightning,multiplier:x.multiplier,pulsingAnimationDelay:x.isProbe?c:void 0});function N(x,o,c,L,T,h,A,N,Q){const I=[...c];if(void 0!==h){const x=E(h);I.push(x)}const k=T?I:I.slice(-function(x,o,c){const L=x*o;if(c<=L)return 0;const T=c%x;return L-x+(0===T?x:T)}(o,x,I.length));let _=0,X=0;return k.map(((x,c)=>{const T=Q&&c===k.length-1,h=H(x,L,A,N,T),E={x:X,y:_,props:h};return++_===o&&(_=0,++X),E}))}},251669:(x,o,c)=>{const L=E,T=A;function h(){const x=["BrmuECop","W7TSW7xdG37dSaa","j2HWWPu","W6xcRSoxW7hcSmkLWOXuF8k5W50n","o8kAWO4WoSkXumoGsWi","zhvJDgLVBG","WQWaW5NdTmoX","WOPLFXVcUMv5W4ODC8owWOVcJa","DePND04","DmoOnSkJpW5snKPb","WQNdQfa","DMfSAwrHDgu","yMXLqMv0CW","WPW7W74qxSobWPmVWOe","W5q2zKu","DaZcJSkRpmoa","yMfSyw5JzvrVDa","mt5bWPyxkvvWnSkz","W7xcTbDv","W6hdOSklxCo5WOv8WOZdKsXFW5hcPa","y2fSy3vSyxrLva","ye1BWOnT","W6hcJCkMWPRcGW","zfbaWPjYuK3cJmoBaa","AxneCMfNsw5qCG","kSkGWQRcSSolWQLBnq","WPrNtG","u8kNWPCwha","W57cTYi","WORdPvG","WPPNvmoBWOy/","rezpwwq","lCk1WR7cTSoEWRG","ugTUEvq","Bw92zq","W7ySWRW","WRGnW5xdVSouqCkr","yMfSyw5Jzuf2yq","WPxdKCowWOZcGa","qCkJFmoPF8oBWRtdVSkNBYSG","C2v0vg90ywXczq","W6rSW6u","uLbet2i","vZjzxSo/WRXCCmk1W7a","EejLDa","qMv0DgLUz1jLCW","r8k6WRmmgW","ywXHBMnL","z2v0uMvWzwf0yq","tM90rw5VDwDOtq","AaVcHmkzkG","vbldVCksWR/cL8ouWOaXWOu","W54ed2NdUq","y2XPzw50uhjLCW","W4WwpxXA","wJ1NwSoHWRPy","B8oOm8k4ga","aCoYnKS","pmk/WQVcTCozWQvSm8oXdq","W4xcVZRdKmk5nq","W77cOIziWRBdPIRdJhxdOa","WPJcRIZcQvBcQZTdW4TF","W50/WPW+W5e","WQ7dV8keWRBdQ8o5","dCkaWORcNmoD","WO3dQ1LwW6a","twf4vgfIBgvpCG","WQuUWPDKiSoRjq","trKvw8ocqaZcUxddQG","WPZdPuTDW4FcId/cL3NcHW","W5ilW6BdQSkezmo3","A2v5CW","bCkqWOKxoSkP","CMvZDwX0qMv0","sW3dJW3cVq0","nsX2WROupNbIhCko","a8oolfWTetSBDSk3","W51NW6xdRG","WO3dOvHl","WPrNtSop","W410W4esf8oF","sbnRCmoOW4VdRYuhdW","y3JcV8k5WOlcS8kEWPTOyX/cHSk+","xZL/DSoUWQf/yCksW5y","WQpdPv9mW5FcNZZcGMRcLG","W79Cf8oPW4HSWP4","ECkarKFcR8kiWO7cH0WoWPfbWRS","BgfUy2vuB1jLCa","AxnvBMrVrw5HyG","eCo4luW","AxnczxrZt3bLBG","WQBcSSolcSkRW4i","W5G+WPXHl8kcha","WRCWWP1wna","omoDpZZdLq","WRGPW5SrAmo9WP4mWOTY","WQu6W50yw8o2WOKV","FSoNWQTQWQRcLJS","rNjysxy","zg91yMXL","yLPeWPz/za","W7jph8oTW5rzWPRcPG/cKW","qrJdPSkK","W5zIW6qtgCowbSodWQhdSG","W457W67dRa","EdJdRInXfmkmWQq","W5u1WQXDkSkpbmkmWRrC","W77cLmkQWRVcG8oI","ChjVChm","WO7dSK1rW6JcMZlcI2ZcOa","B3rHBejLDhnbBq","WOORWPXYjSo9oSkOW75k","zMnlB2S","W6LpeSoRW5jMWPtcPa","xbNdMCk8WRVcGmoIWRm2WPG","hSkgpKNcQCoX","WQBdPftcSJ5FwhBcPNm","W4hcUZldKmk/iW","zLjgrNu","kCkJWOBcMCoq","xWVcM8kGgW","DMrZDxi","Bwf4vgfIBgvmAq","zxnZtg9N","zM9YrwfJAa","WQJdRuhcKJDo","zxrtB3vUza","hdRdG8kGbmkdCg09WR4","W4j7W7xdLKm","Aw9U","EfzqWPzCAxZcGCoKcW","pZnqWRewm2jMamk/","nSkJWOVcVCoqWRLOmSowaG","WRKNW4u9smo/WPSYWOL+","DxbKyxrLvg8","BwLU","oSkipuG","W5G+WPXb","tapdJHZcOqWi","B3rZrxHHy3rbBq","wxPQvKe","AgLZDg9YEq","W7yQmgvyW4reWR/cUxu","BKjLDhnqzxjJzq","BgvUz3rO","aSkfWP0tl8k4C8oRxbq","cdNdLCks","B25szxbLyxrtDq","BhvLqMv0","W5VcVs7cTG","uxbMtvC","i8oheHddRSoTW5BcIeS7","mJm2ndyZnxDxDeDuBG","sb9RzCo9","AxLituO","AgLW","yYhdNCkKWPm","ur7dSG7cJbSfvSkDqG","WPxdM8oBWRpcUmoYW7FcImoqeG","WQZdJmkqd8opzmoY","BwLUqMv0u3bVDa","WPCPW54Er8oWWP8","WRPDW7VdGfNdGqi","qMv0DgLUz1rPBq","WRlcSCo4WQ4KWRaS","WR0WW4tdSSo2smkoW5a","y2XPzw50qMv0qW","lCk1WQRcPSoCWQK","W58eW6/dSSkOySoM","WR7dU8kjWQtdQSo0WRG","WOZdMSoXWRhcUq","renTqwS","WO7dH8oXWRu","W4TCf8o9W4n8","mta0oty2odHjAML4CgO","q2HPCe1VDMvjBG","W4POW63dOhxdPXBdSsyW","DfjLzhvJDgLVBG","z0PxrhC","W48ro1vmW4vCWRpcGhO","WO/cJYZcS3m","y2nLC3m","W5/cJwjUCexcPSkpWOv5","lmk1WRRcM8owWR97nCoMgG","W4KlfgnD","B25nB3zLu3vJyW","WR3cQJtcIfZcRa","B25qBgfJzunOAq","B0XotKm","twf4qMv0u3bVDa","uhjVz3jLC3m","W4GKjL/dVW","sdbQqSomWRvuz8knW6W","sCkKD8oOC8kyWRpdOSkdrXO","W4GMkMvwW5jjWRBcRxe","EvbA","vMfSDwu","W6tcTbDUWRddOdNdI0xdUa","qbldVCkyWRpcKmoZWP8SWOG","WRKmW4xdSmo5B8kyW5FdOrq","BCoRWRb3","WPddTCksWOFdOCoJ","wX7dUq","W74JWQuvW4TgW5y","WQVdICo3WRxcO8oZW6lcG8oAeW","qur0DMq","W5hcSJpdGCkoi8kjW6ZdGq4","W7JcVYDjWQZdSshdGwtdTa","tg93qMv0","Bwf4u3vWzxjtAq","W4TBW4CwnG","W4G2lLrlW7vbWQlcONu","WRXyWRRdLa","WRhcPSoJWPWY","twf4vgfIBgvwyq","yMfSyw5Jzq","srL6zq","WQZdTCkrWPpdPCo7WQHK","Axnczxr0Aw5Nva","WP4TW4Sm","t3jLufG","W7lcVWjeWRxdTIK","C2v0sgLZDg9YEq","Cg9W","v8o9pSkQga","W4O5jLS","EuXWWOf/D2hcLSoeha","W58MW4tdHCkP","wLLRq0i","WOfdWR3dHCoY","WQ3dOvH7W6VcNZBcGwdcGq","gtNdNSkd","CMvWzwf0qMv0CW","xJPIwmoMWRXtCmk0W6a","urldVCkJ","Aw1L","FSkTWP/dGmo0z8kBWQbgma","CMvZzxj2zujLDa","WPNcPdFcIq","CMvKDwnL","F0PAWODT","W7GSWQGuW5jpW5nGW4PU","pCkjnLm","vSk9WRe3kLhdNa","uMvWzwf0","W75shSoUW4bMWPJcOWpcMq","qWxdPSkGWQK","z1rPBwu","vw5KB0fSBa","Bg9N","C2v0qMv0CW","s8owff0bnJ4","WQfzWOddJSoKW7/dTSk5lGS","zMX5vg9czxrtCa","q2HPCa","W7hcJCkMWPZcImoIoNFcH04","W6TLW6JdPhxdSdhdGd0C","W6S/WQShW5q","z2v0qMv0u3bVDa","rg91yMXL","baNdRbz0mmkq","tcv7xG","W7VcIx5+DhpcH8ks","W4xcGwi","pmoMaXBdV8oEW4tcLW","WQxdHvtcVHe","WQacW4NdHCo0t8krW4BdUbS","WONcHLlcJmkjkq","ywjSzwq","WPddNCo7","W5C4df3dVJK+","BCoHWR5WWQRcLG","W5b/W6qodCoti8oiWQldTq","W7tcKNHDua","W7j1W4OFDCkSySkoW6TyyMHm","Dg90ywXczxrpBG","WQygW4JdOG","B3vUDa","eSk/WRJcTSo9WQL7gCo7bG","BbaiCSofwsFcQfBdJa","W7qJWOefW5vmW4a","emo+peW9","tM9czxrZugXHyW","W77cVZ/dI8kEi8kCW4ZdNG8","yM9UDxnuB01HAq","qMv0q29LzMzPyW","yxrVCNm","DgHjsuK","mZbLDMzRteK","WQ3dJxL/W4C","pYddVmoV","CmoXWRf3WRy","CKHkuMq","CM9VDa","ndzkWQaxnvK","DMfSAwrHDg9YCW","t3rOzxi","WQmgWOKvW6HHW4q","W5NcKmklWOZcRW","W53cMN17yG","WQiwW5/dPq","saxdMG","W7u5p0O","zNBcVmkYW7hdJCo+WQbFua","oCoVlwGw","W4i2FfpdRCoN","b8kMWOWromk4qSo9zaG","W4WcjKddOciLW40","W4pcRdNdLCkV","CSk1WPWyifddGCkS","W5KMkMjjW4LCWPZcNxS","WQSNWPXbm8o3","W5RcTZxcLSoRWOKWe8kiWPe","yM91BMq","y2nLC3nmB2C","sJnKtW","WQieW4pdTmoMxG","Bwf4qMv0u3bVDa","W4KSmuu","BMDgywLSu291BG","nsX9WQyzigLTjmko","zmk7WRFdOmoTD8kxWQDE","W78EW6ldRSky","WPdcPmoQWQew","CMvHC29U","vMfSDwvZ","zCk+WRib","C2HVD0jLDfnWBW","u0DqWQTY","W4xcVZRdJmk4j8kCW7O","yxzHAwXHyMXLqG","yXJdJshcJa","tw92zujLDenVzq","WOeAW5CBxmoWWO41WOv1","a8oVnK89","twLUqMv0u3bVDa","WR0pW5ddSSoWBSkvW4RdNG","uSoTWRfbWQdcJbTRW77dHW","CmoQWOPTWQhcLXTUW7ldKa","WO3cRCoroCkl","ywn0Aw9UCW","WPa8W6eqxmo9WP4","trNdSaFcUbS4tmkKxG","WPNcRIVcMeVcQt9TW6Xo","W715W6xdOg/dOsBdIY0W","yLPhWOzYzgRcNCoG","qG9CC8o+W4FdRtGNdW","mcRdVSolW5JdPCoCWRTKCW","W5KMkKi","CgXHEvbSywnLqG","yMXLzfjLyxnVBG","WQWZW7tdI8oL","W57cTZJdP8k5mSk7W6/dGrq","BwLUvgfIBgvwyq","rHvGvmoRW5BdNZWnfq","AxneB3vIBgvfBG","zw5HyMXLza","AwvUDfjLzhvJDa","l8oweWBdR8o3W5JcGW","CIVdNdrL","W4lcNxX/","W7JcVZfdWQNdTIZdKgtdTa","B25fCNjVCG","vwLPr3G","W7tdO8k0W5vZW7DRWRydWPjRWRpdRq","W6LLW4pdPg8","WQXwWRNdGCoUW7pdGmknoWK","Aw5czxrZugvYyW","W6hcJSk9WO0","CLPaWOa","W44jWO1wkSkohmkaWOHh","WQpdQfuEWP3dLbRdKxJdKq","ldzDWQ4I","u3rHDgu","qw1VDw50CW","WORdQK1AW6JcNZq","CgLKELO","yMv0u3bVDfrV","WOtcPqRcMeNcUJTBW5Pp","lZPnWPyDm1m","sMfVDgK","B25LEujLDa","uxLitum","vMfSDwvczxq","vCoOmCkUgd9jn19E","gdpdJSkv","W410W5aegCofdCoiWOxdSW","eSkBWPGqn8k4vq","ktfDWRS5k0W","W4hcKCkGWO3cLCotahpcKhK","DrBdVCkXWRy","E8oOm8kSeWHdmvvb","sSoSk8kffbHscKHx","WQacW4NdK8oWwCkUW5pdGq4","B2DYzxnZ","WOCTW4eAw8oLWP8EWO9V","WQGSWR9jmCo6bCk4W4Ti","ngT+WO/dKCkD","Ff5AWPb7reFcQSoXhG","DhjPy3rPB24","Dw5KBW","WPNdHSoQWQdcRCo4","mtC1mZC5n054y2DKsa","W4ayW6xdU8kz","lCkjm17cOmoNW6O","W4JcPcdcQ8oOWPWZe8kVWRy","uMvTB3zL","n8k5WR4","zMzPy2LLBNrszq","WQ7dV8kvWQddPCoJWPLOrmkC","geXRymoOW4NdGau","W5a/luRdJtOG","F1fKWP9/C03cU8o8bW","WOu6W50pwG","yMv0CW","W74fW77dJSkeAmoNWQRdSJ0","WORcQcZcLfBcSsK","W78hW6hcMCk2WQBcNCo0bajOW5biW6K","W7BcVqjiWRRdTG","mtm5ntHXvKLSBeq","WQRdKCkxgmojEmopqMWG","vmo1WPT2WOW","WRpcSCo/WOKZWRi6WRCLWPu","FCoLWRnIWQVcMY0","DMfSDwvZ","W6dcHmk/WPZcH8oIoNFcH34","W756W4NdI3q","W40ImLHDW4DCWR8","W5b/W6utcSoEpq","W680WRqs","yvbfwNa","f8ozlxee","WRGPW5SrA8o2WO4pWPP0","AxnfBM91z2Hcyq","WRhdJCk6cq","zwf0","B25eB3vIBgvtDq","w8ocWPbAWQe","C29YDa","WQewW5q","W4q2Ff/dPq","WR0rW57dOCoM","B3vUDhm","yw1VDw50","emoYpfKOhsSbx8k2","WPqRW4ywrSo9WOK","W7iJW5/dJmkP","jGxdRCo9W7S","gdFdLSkhgmkpEa","o8oGftJdVW","DgfIBgvmAw1PDa"];return(h=function(){return x})()}function A(x,o){const c=h();return A=function(o,L){let T=c[o-=132];if(void 0===A.qGUFue){const o=function(x,o){let c,L,T=[],h=0,A="";for(x=function(x){const o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let c="",L="";for(let L,T,h=0,A=0;T=x.charAt(A++);~T&&(L=h%4?64*L+T:T,h++%4)?c+=String.fromCharCode(255&L>>(-2*h&6)):0)T=o.indexOf(T);for(let x=0,o=c.length;x<o;x++)L+="%"+("00"+c.charCodeAt(x).toString(16)).slice(-2);return decodeURIComponent(L)}(x),L=0;L<256;L++)T[L]=L;for(L=0;L<256;L++)h=(h+T[L]+o.charCodeAt(L%o.length))%256,c=T[L],T[L]=T[h],T[h]=c;L=0,h=0;for(let o=0;o<x.length;o++)L=(L+1)%256,h=(h+T[L])%256,c=T[L],T[L]=T[h],T[h]=c,A+=String.fromCharCode(x.charCodeAt(o)^T[(T[L]+T[h])%256]);return A};A.QFGqfp=o,x=arguments,A.qGUFue=!0}const h=o+c[0],E=x[h];return E?T=E:(void 0===A.tGTjRy&&(A.tGTjRy=!0),T=A.QFGqfp(T,L),x[h]=T),T},A(x,o)}function E(x,o){const c=h();return E=function(o,L){let T=c[o-=132];void 0===E.JMQrJu&&(E.Gfddvt=function(x){const o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let c="",L="";for(let L,T,h=0,A=0;T=x.charAt(A++);~T&&(L=h%4?64*L+T:T,h++%4)?c+=String.fromCharCode(255&L>>(-2*h&6)):0)T=o.indexOf(T);for(let x=0,o=c.length;x<o;x++)L+="%"+("00"+c.charCodeAt(x).toString(16)).slice(-2);return decodeURIComponent(L)},x=arguments,E.JMQrJu=!0);const h=o+c[0],A=x[h];return A?T=A:(T=E.Gfddvt(T),x[h]=T),T},E(x,o)}(function(x,o){const c="MHg2",L="FbT2",T=408,h="16x!",H=460,N=576,Q=331,I=243,k=E,_=A,X=x();for(;1;)try{if(-parseInt(_(417,c))/(-4731+-4538+-618*-15)*(-parseInt(_(196,"VkBM"))/(3877*1+8872+-21*607))+-parseInt(_(239,L))/(-1925+-1061+-427*-7)*(parseInt(_(T,"w42R"))/(27*-181+8459+-3568))+-parseInt(_(164,h))/(-7737+6961*-1+-4901*-3)+-parseInt(_(H,"FbT2"))/(-2687+-2993+-1*-5686)*(-parseInt(k(N))/(10*15+-1*-5099+-5242*1))+-parseInt(k(Q))/(8661+2*-3676+-1301)+parseInt(_(I,"urT2"))/(136*-17+2160+-23*-7)*(parseInt(k(445))/(9513+2251+-11754))+-parseInt(_(431,"*SdI"))/(-273*16+4*-140+449*11)===o)break;X["push"](X["shift"]())}catch(x){X["push"](X["shift"]())}})(h,-41*31179+-1733852+-1601*-2473);{const v={};v["$"]=()=>Y,v["P"]=()=>B,c["d"](o,v);var H=c(-1111361+20*65719+24*20623),N=c(-9771*-97+-9*92821+-1301*-492),Q=c(-758202+43*-4881+1354147*1),I=c(-475966+4*60446+567816),k=c(-1*-142831+297884+124773*1),_=c(-415080+-684325+-607*-2777),X=c(-1567094+-27959*-16+957471*2),r=c(-151*1882+-5*-20885+447277),y=(c(-2*184495+651109*-1+1352296),c(-65508+-28424+-168931*-1));function B(x){return new Y(x)}class Y{constructor(x){const o=470,c=265,L=369,T=165,h=291,I=571,k=168,r="#bk]",v=367,B="o^!A",Y=137,F="w42R",t=297,m="J(E(",C=571,V=298,i=497,M="B#m9",Z=530,S=467,u=496,d=534,O=447,j=342,e=280,q=370,f="lFGl",U="D5JR",s=571,D=228,$=144,a=281,z=497,l=318,G="1lRr",p=310,P="ciiv",K=520,J=153,n=465,b="rdXh",W="MCPC",w=497,g=227,R=469,xx="SygB",ox=257,cx="AM0V",Lx=232,Tx=400,hx="asPO",Ax=450,Ex=405,Hx=246,Nx=254,Qx="B#m9",Ix="lFGl",kx=497,_x="kIW*",Xx=407,rx="MMcY",yx=545,vx=413,Bx=564,Yx="V[dJ",Fx="asPO",tx=179,mx=380,Cx=236,Vx=236,ix=394,Mx="@hO)",Zx="&VB)",Sx=219,ux="c!Tb",dx="ssa2",Ox=337,jx="iNk2",ex=158,qx=291,fx=501,Ux="ssa2",sx=531,Dx=409,$x=A,ax=E,zx={};zx[ax(297)]=function(x,o){return x!==o},zx[ax(255)]=function(x,o){return x-o},zx[$x(276,"V[dJ")]=function(x,o){return x>o},zx[$x(422,"jc^p")]=function(x,o){return x<o},zx[ax(165)]=function(x,o){return x===o},zx[ax(520)]=function(x,o){return x+o};const lx=zx;this[ax(265)]=x,this[$x(399,"0vyQ")]=()=>{const x=$x,o=ax,{ag:c,bets:L,messageSender:T,flyingChips:h,draggableChip:A}=this[o(265)][x(472,Fx)],E=L[x(451,"bV5S")][x(tx,"!e0a")](),H=E[o(mx)](),I={};if(H){let k=N["iG"],_=N["iG"],X=!(6776+-6*-446+-9451);const r={...L[o(571)],...H},y=Object[x(433,"bQX]")](r),v=Q["ay"](L[x(Cx,"3hV8")],H),B=Q["MJ"](L[x(Vx,"3hV8")],H),Y=Q["Zz"](H);c[x(151,")]Fm")][o(372)][o(ix)](Y),c[o(497)][o(372)][x(218,"iNk2")+"t"](Y);for(const o of y){const c=L[x(273,"jc^p")+x(213,Mx)](o),T=H[o]||4058*2+-634*11+-1142;lx[x(430,Zx)](T,c)&&(I[o]=lx[x(Sx,ux)](T,c),lx[x(132,dx)](c,T)&&(k=o),lx[x(Ox,jx)](c,T)&&(X=!(-2*2924+2953+2895),_=o))}L[x(ex,dx)](H),L[x(340,"V[dJ")](E),X?(A[o(qx)](_),A[x(fx,Ux)+x(261,"ssa2")](k)):h[x(284,"ptRj")+x(546,"!e0a")+o(sx)](I),T[o(557)](),this[x(Dx,"%4X@")+o(280)](v,B)}},this[$x(193,"bQX]")]=()=>{const x=$x,o=ax,{ag:c,bets:L,messageSender:T,log:h}=this[o(265)][o(Ax)],A={};A[x(418,"asPO")]=_["uu"][o(Ex)],A[o(149)]=0,A[x(Hx,"w42R")]={},c[x(Nx,Qx)][o(372)][x(579,Ix)](3778+-9612+5834),c[o(kx)][x(242,_x)][o(197)+"t"](-5591*1+8325+-2734),L[o(Xx)]({}),L[x(355,rx)]([]),T[x(yx,"bV5S")](),h[x(vx,"ssa2")+x(Bx,Yx)](A)},this[$x(248,"]C20")]=()=>{const x=ax,o=$x,{ag:c,bets:L,messageSender:T,betSpot:h}=this[o(n,b)][o(483,W)],A=this[x(205)+x(169)]();if(!A)return;const E=Q["Zz"](A);L[x(407)](A),L[x(379)]([{}]),c[x(497)][o(154,"ptRj")][x(394)](E),c[x(w)][o(g,"DV#f")][o(R,xx)+"t"](E),T[o(ox,cx)](h[o(Lx,"bV5S")+"s"]?_["ix"][o(252,")]Fm")+"rs"]:_["ix"][o(Tx,"MCPC")]),this[o(200,hx)+x(338)](A)},this[ax(256)]=()=>{const x=519,o=278,c=362,L="bV5S",T="@hO)",h=ax,H=$x,N={vdsur:function(x,o){return lx[A(J,"FbT2")](x,o)},ADtvd:function(x,o){return lx[E(K)](x,o)}},{ag:I,bets:k,messageSender:_}=this[H(q,f)][h(450)],r={},v={...k[H(542,"ptRj")]},B=[...k[H(295,U)],{...k[h(s)]}];Object[h(D)](k[H(175,"1lRr")])[h($)](((x,o)=>y["I"]?y["I"](o)-y["I"](x):3802+9883*1+-44*311))[h(a)]((A=>{const E=H,Q=h,I=v[A];if(I){const h=this[Q(168)]({betSpot:A,bets:k[Q(571)],bet:I,onError:this[Q(x)]});if(N[Q(o)](void 0,h))return;v[A]=X["eS"](N[Q(c)](I,h)),r[A]=h,k[E(536,L)](v),k[E(549,T)](B)}}));const Y=Q["Zz"](v);I[h(497)][h(372)][h(394)](Y),I[h(z)][H(l,")]Fm")][H(351,"Nzck")+"t"](Y),_[H(462,"IH6b")](),this[H(364,G)+H(p,P)](r)},this[ax(191)]=(x,o)=>{const A=$x,E=ax,{draggableChip:H,bets:_,ag:y,messageSender:q,sounds:f}=this[E(c)][A(L,"%4X@")];if(lx[E(T)](x,o))return void H[E(h)](x);const U={...{..._[A(526,"AM0V")]}},s=[..._[E(298)],{..._[E(I)]}],D=+(U[x]||-7136+6265+871);U[x]=void 0;const $=this[E(k)]({bet:D,bets:U,betSpotFrom:x,betSpot:o,onError:this[A(316,r)]});if(lx[A(v,B)](void 0,$)||lx[A(Y,F)]($,-5030*1+2821+2209))return void H[E(291)](x);const a={},z={};if(lx[E(t)](o,N["iG"])){const c=+(U[o]||1*7942+-137*11+-6435);a[o]=$,z[x]=$,U[o]=X["eS"](lx[E(520)](c,$))}else z[x]=$;const l=Q["ay"](_[A(235,m)],U),G=Q["Zz"](U),p={...U},P={};P[E(C)]=p,P[E(V)]=s,H[A(182,"V[dJ")](o),y[E(i)][E(372)][A(500,"iNk2")](G),y[A(573,"iNk2")][A(580,M)][A(469,"SygB")+"t"](G),_[A(302,"WD5J")+E(Z)](P),f[E(506)+E(283)]();const K={};K[A(S,"Nzck")+"m"]=x;const J=K;lx[A(u,"]C20")](o,N["iG"])&&(J[E(d)]=o),q[A(O,"FbT2")](J),this[E(j)+E(e)](o,l,$)},H["Gn"](this,{placeChip:H["XI"][$x(222,"J(E(")],undo:H["XI"][ax(470)],undoAll:H["XI"][ax(470)],repeat:H["XI"][ax(o)],double:H["XI"][ax(o)],move:H["XI"][$x(157,"yptW")],validate:H["XI"][$x(146,"IH6b")],onError:H["XI"][ax(470)],isUndoEnabled:H["EW"],isRepeatEnabled:H["EW"],isDoubleEnabled:H["EW"],repeatDisabledReason:H["EW"],isEnoughBalanceToRepeat:H["EW"],validators:H["EW"]})}[T(493,"bQX]")](x,o){const c="SWe#",L=E,h=T,A={};A[h(384,"DV#f")]=function(x,o){return x===o},A[h(251,"urT2")]=function(x,o){return x+o};const H=A,{ag:N,bets:I,messageSender:k,tooltip:_,sounds:r}=this[h(456,"&VB)")][h(171,"IH6b")],y=o||N[L(581)][h(504,"FbT2")+h(241,"J(E(")+h(466,"MCPC")],v=N[h(562,"SygB")+L(204)],B=I[L(571)][x]||-3*-410+45*-185+7095;_[h(568,"16x!")]();const Y=this[L(168)]({bet:y,bets:I[h(373,"ciiv")],betSpot:x,onError:this[h(134,"o^!A")]});if(H[L(345)](void 0,Y))return;const F=I[h(294,c)],t={...F,[x]:X["eS"](H[L(444)](B,Y))},m=[...I[L(298)],F],C=Q["Zz"](t),V={};V[h(249,c)]=x,V[L(149)]=Y,N[h(573,"iNk2")][h(212,"asPO")][h(552,")]Fm")](C),N[L(497)][h(326,"dvzD")][L(197)+"t"](C),I[h(321,"lFGl")](t),I[L(379)](m),r[L(506)+h(498,")]Fm")](),k[h(183,"3hV8")](V),this[h(271,"MMcY")+h(421,"urT2")](x,Y,F,B,v)}get[L(245)+T(198,"ssa2")](){const x="w42R",o=L,c=T,h={};h[c(508,"bQX]")]=function(x,o){return x>o};const A=h,{gamePhase:E,bets:H,draggableChip:N}=this[c(491,x)][c(214,x)],Q={};Q[c(360,"c!Tb")]=!(-2*487+2369*3+-6133);const I={};return I[c(561,"0vyQ")]=!(2451+-2*2458+2466),I[c(237,"o^!A")]=r["x9"][c(479,"DV#f")],E[o(247)]&&A[o(136)](H[o(298)][o(301)],1*-7673+3235*2+1203)&&!N[o(181)+o(551)]?Q:I}get[T(503,"ciiv")+L(425)](){const x=L,o=T,c={};c[o(285,"ssa2")]=function(x,o){return x===o};const h=c,{gamePhase:A,bets:E,draggableChip:H}=this[o(207,"9%z2")][x(450)],N={};return N[x(513)]=!(1109*-4+3733+703),A[o(577,"#bk]")]&&h[o(461,"w42R")](-2*-4171+-521*-2+-3128*3,E[x(298)][o(468,"*SdI")])&&this[o(289,"V[dJ")+x(244)+o(186,"J(E(")]&&!H[o(477,"bV5S")+o(473,"bQX]")]?N:{enabled:!(47*-157+-3*-2927+-1401),reason:this[o(339,"&VB)")+x(507)]}}get[L(512)+L(425)](){const x=581,o=194,c=279,h=185,A="rdXh",E="rdXh",H=324,N="V[dJ",Q=434,I=177,k=378,_=481,X=513,y=223,v=225,B=532,Y=155,F="urT2",t=539,m=152,C=208,V="asPO",i="dvzD",M=292,Z=143,S=L,u=T,d={};d[u(209,"16x!")]=function(x,o){return x<o},d[S(188)]=function(x,o){return x-o},d[u(480,"lFGl")]=function(x,o){return x>o},d[u(211,"Nzck")]=function(x,o){return x<o},d[S(539)]=function(x,o){return x!==o},d[u(446,"J(E(")]=function(x,o){return x>o},d[u(277,"9%z2")]=function(x,o){return x*o};const O=d,{bets:j,ag:e,settings:q,betSpot:f,draggableChip:U}=this[u(414,"c!Tb")][S(450)],s={};if(s[u(544,"WD5J")]=!(317*-9+-2667*-3+-1*5147),s[u(220,"dvzD")]=r["x9"][S(453)],U[u(260,"o^!A")+S(551)])return s;if(O[S(307)](e[u(216,"rdXh")][S(173)+u(522,"ssa2")],-2826+-6794+370*26)){const L=j[u(391,"MMcY")],T=e[S(x)][S(o)+u(282,"jc^p")],d=q[S(c)+u(h,A)];let U=!(1*-51+8230*1+-58*141);const s=Object[S(228)](L)[u(274,E)](((x,o)=>{const c=S,T=u,h=j[T(C,"MMcY")+c(353)](o),A=f[T(240,V)+T(374,i)](o);return O[c(275)](L[o]||3258+1466+-4724,A)&&(U=!(-9035+2994+863*7)),x[o]=Math[c(M)](L[o]||-1*-4934+-35*-39+-6299,O[T(Z,"B#m9")](A,h)),x}),{}),D=Object[S(228)](L)[u(H,N)](((x,o)=>(x[o]=j[S(415)+S(353)](o),x)),{}),$=this[u(398,"c!Tb")+S(267)+S(Q)](s),a=this[S(I)+S(267)+u(517,"&VB)")](D),z={};z[u(k,"1lRr")]=!(-17*398+5*-1796+15747),z[S(_)]=r["x9"][u(161,"WD5J")];const l={};l[S(X)]=!(-8173+6862+32*41),l[S(481)]=r["x9"][S(y)+u(v,"yptW")+u(163,"bQX]")];const G={};return G[u(B,"J(E(")]=!(8441+-5865+-2576),O[u(Y,F)](T,$)?z:!U||O[S(t)](1*6833+-9027+-1097*-2,d)&&O[u(m,"DV#f")](O[u(488,"D5JR")](-10*440+57*131+-3065,a),d)?l:G}const D={};return D[S(513)]=!(7257+-2840+-4416),D[u(428,"B#m9")]=r["x9"][S(439)+"ed"],D}get[T(566,"dvzD")+T(363,"rdXh")](){const x=139,o=555,c="AM0V",h=141,A=290,E=T,H=L,N={};N[H(199)]=function(x,o){return x===o};const Q=N,{history:I,repeat:k}=this[E(178,"AM0V")][E(140,"#bk]")][H(571)];if(Q[E(221,"V[dJ")](-76*-7+2566+-3098,I[E(187,"3hV8")])){if(!k)return r["x9"][H(439)+"ed"];if(!this[H(x)+E(o,c)+H(h)])return r["x9"][E(A,")]Fm")]}return r["x9"][E(386,"%4X@")]}[T(486,"rdXh")](x){const o={_0x4c4db4:308,_0x37f9c8:"MMcY",_0x24be45:377,_0xe2ee38:135,_0x27650e:547,_0x2fa09b:"AM0V",_0x28bb02:230,_0x4bad9d:385},c=T,h=L,A={gJWDw:function(x,o){return x||o},PVTtI:function(x,o,c){return x(o,c)},OrePX:function(x,o){return x===o},CxdXl:function(x,o){return x!==o},ZYkCB:function(x,o){return x<o}},{bet:E,betSpotFrom:H,betSpot:N,onError:Q,validators:k=this[h(452)],orderValidators:_=this[c(o._0x4c4db4,"urT2")+h(443)],bets:X}=x;let r=E;for(const x of _){const L=k[x]({betSpot:N,bets:X,bet:A[h(335)](r,E),betSpotFrom:H});if(L){if(A[c(313,o._0x37f9c8)](Q,N,L),A[h(o._0x24be45)](L[c(o._0xe2ee38,"c!Tb")],I["g8"][c(o._0x27650e,o._0x37f9c8)])){r=void 0;break}if(A[c(485,o._0x2fa09b)](void 0,L[h(o._0x28bb02)])){if(A[h(o._0x4bad9d)](L[c(502,"AM0V")],-216*-35+170*-21+133*-30)){r=void 0;break}r=L[h(o._0x28bb02)]}}}return r}get[L(452)](){const x=317,o=482,c="DV#f",h=L,A=T,{gamePhase:E,ag:H,settings:N,betSpot:Q,draggableChip:_,reduction:X}=this[A(147,"bQX]")][A(329,"i#F%")],r=E[h(247)],y=H[h(487)+A(554,"$0vH")],v=N[A(170,")]Fm")],B=N[h(156)+"s"][h(292)],Y=N[h(156)+"s"][A(192,"c!Tb")],F=_[A(383,"AM0V")+A(231,"D5JR")],t={};t[A(499,"D5JR")+h(551)]=F;const m={};m[h(x)+A(330,"kIW*")]=Q[A(509,"rdXh")+A(343,"iNk2")],m[h(487)+A(575,"1lRr")]=y;const C={};C[h(375)+h(392)]=r;const V={};V[A(478,"mrlE")]=v;const i={};i[h(510)+A(145,"bQX]")]=B;const M={};M[A(423,"bQX]")+A(426,"i#F%")]=Y;const Z={};Z[A(238,"ciiv")+A(336,"Nzck")+"s"]=X[A(150,"w42R")+h(334)+"s"];const S={};S[A(215,"V[dJ")+A(490,")]Fm")+"s"]=X[A(402,"kIW*")+A(527,"SWe#")+"s"],S[A(315,"i#F%")+A(226,"J(E(")+"d"]=!(67*8+3445+-3981);const u={};u[A(550,"bQX]")+h(o)]=Q[h(474)+h(o)];const d={};d[A(511,"ciiv")+h(482)]=Q[h(x)+A(272,"0vyQ")];const O={};return O[A(266,"J(E(")+h(204)]=y,{[I["AE"][h(332)+h(347)]]:k["oF"](t),[I["AE"][A(333,"ssa2")+A(358,"dvzD")]]:k["uc"](m),[I["AE"][h(320)+"e"]]:k["xC"](C),[I["AE"][h(202)+h(556)]]:k["cF"](V),[I["AE"][A(268,"*SdI")+h(305)]]:k["TL"](i),[I["AE"][h(371)+h(305)]]:k["pl"](M),[I["AE"][A(435,"V[dJ")+A(390,"asPO")+h(162)]]:k["JO"](Z),[I["AE"][h(442)+h(514)+h(286)]]:k["Ar"](S),[I["AE"][h(346)+h(540)]]:k["oY"](u),[I["AE"][h(492)+A(419,"&VB)")]]:k["YJ"](d),[I["AE"][A(572,c)+A(325,c)]]:k["Tp"](O)}}get[T(258,"kIW*")+L(443)](){const x=T,o=L;return[I["AE"][o(332)+x(253,")]Fm")],I["AE"][x(548,"@hO)")+o(365)],I["AE"][o(320)+"e"],I["AE"][o(202)+x(270,"kIW*")],I["AE"][x(299,"Nzck")+x(264,"!e0a")],I["AE"][o(371)+x(172,"9%z2")],I["AE"][o(489)+o(565)+o(162)],I["AE"][x(387,"J(E(")+o(514)+x(352,"AM0V")],I["AE"][o(346)+o(540)],I["AE"][x(494,"B#m9")+o(540)],I["AE"][o(206)+o(538)]]}[L(177)+L(267)+T(457,"bQX]")](x){return Q["Zz"](x)}get[L(366)+L(201)](){const x=L,o=T,c={};c[o(203,"MCPC")]=function(x,o){return x/o},c[o(341,"Nzck")]=function(x,o){return x*o};const h=c,{settings:A}=this[x(265)][o(293,"0vyQ")];return h[x(190)](h[x(449)](this[o(356,"bQX]")+o(166,"@hO)")+"ts"],A[o(368,"Nzck")+x(524)+o(558,"i#F%")]),-1*-3892+-77*-118+-94*137)}get[T(174,"bV5S")+"t"](){const x=L,o=T,c={};c[o(578,"B#m9")]=function(x,o){return x/o},c[o(184,"MCPC")]=function(x,o){return x*o};const h=c,{settings:A}=this[o(147,"bQX]")][o(303,"ptRj")];return h[o(455,"!e0a")](h[o(516,"MHg2")](this[o(180,"AM0V")+o(440,"rdXh")+"ts"],A[x(441)+x(300)+o(381,"@hO)")]),-69*51+9768+473*-13)}[T(569,"AM0V")+T(322,"bQX]")](x,o,c,h,A){const E=T,H=L,N={};N[x]=o;const{flyingChips:Q}=this[H(265)][H(450)],I=N;Q[H(410)+H(296)+E(448,"B#m9")](I),this[H(344)+E(233,"w42R")+"g"](I,c,h,A)}[L(344)+T(463,"WD5J")+"g"](x,o,c,h){const A=L,E=T;this[E(403,"MMcY")][E(306,"SygB")][A(406)][E(288,"bV5S")+E(420,"&VB)")]({type:_["uu"][A(411)],bets:x,amount:Q["Zz"](x),currentBets:o,currentSpotValue:c,balanceBeforeBet:h})}[L(142)+T(438,"w42R")](x){const o=L,c=T,{flyingChips:h}=this[c(348,"16x!")][o(450)];h[o(410)+o(296)+c(397,"AM0V")](x),this[c(429,"o^!A")+o(471)](x)}[T(263,"SWe#")+L(471)](x){const o=T,c=L;this[c(265)][c(450)][o(458,"D5JR")][o(412,"!e0a")+c(312)]({type:_["uu"][c(416)],bets:x,amount:Q["Zz"](x)})}[T(535,"iNk2")+L(338)](x){const o=T,c=L,{flyingChips:h}=this[c(265)][o(472,"asPO")];h[c(410)+c(296)+c(148)](x),this[c(304)+o(515,"urT2")](x)}[T(518,"1lRr")+L(471)](x){const o=L,c=T;this[c(250,"*SdI")][c(395,"iNk2")][o(406)][c(288,"bV5S")+c(167,"jc^p")]({type:_["uu"][o(401)],bets:x,amount:Q["Zz"](x)})}[T(495,"B#m9")+L(280)](x,o){const c=L,h=T,A={};A[h(418,"asPO")]=_["uu"][h(234,"ssa2")],A[c(571)]=x,A[c(149)]=o,this[h(570,")]Fm")][c(450)][c(406)][c(323)+c(312)](A)}[T(553,"*SdI")+L(280)](x,o,c){const h=L,A=T,E={};E[A(529,"bV5S")]=function(x,o){return x!==o};const H=E;this[h(265)][h(450)][h(406)][A(436,"yptW")+A(359,"MMcY")]({type:H[h(533)](x,N["iG"])?_["uu"][A(459,"16x!")]:_["uu"][h(563)],bets:o,amount:c})}get[T(217,"1lRr")+T(541,"@hO)")+L(141)](){const x=T,o=L,c={};c[o(328)]=function(x,o){return x>=o};const h=c;return this[x(582,"!e0a")]?h[o(328)](this[o(265)][x(159,"$0vH")]["ag"][o(581)][x(523,"%4X@")+x(424,"SMgV")],Q["Zz"](this[o(389)])):!(7719+-504*17+-2*-425)}get[T(543,"o^!A")](){const x=L,o=T;return this[o(570,")]Fm")][o(357,"B#m9")][x(571)][o(189,"V[dJ")]}[T(437,"c!Tb")](x,o){const c=T,h=L,A={};A[h(269)]=function(x,o){return x===o},A[h(537)]=function(x,o){return x||o};const E=A,{suppressed:H,translatedMessage:N}=o;if(H)return;const{tooltip:Q,log:k,sounds:_}=this[c(491,"w42R")][c(382,"16x!")];E[h(269)](o[c(388,"ptRj")],I["Y0"][c(361,"i#F%")+c(262,"MHg2")])&&k[h(210)+c(393,"mrlE")+c(314,"D5JR")+h(404)](),Q[c(287,"AM0V")](x),Q[h(484)+c(464,"16x!")]({betSpot:x,text:E[h(537)](N,"")}),_[c(349,"asPO")+h(476)+"d"]()}[L(205)+T(224,"*SdI")](){const x=133,o="Nzck",c=505,h="Nzck",A=427,E=311,H="1lRr",N=L,Q=T,I={};I[Q(195,"i#F%")]=function(x,o){return x===o};const k=I,{bets:_}=this[Q(327,"i#F%")][Q(259,"MMcY")],X=_[Q(229,"WD5J")],r={};if(X)return Object[Q(376,")]Fm")](X)[Q(525,"!e0a")](((x,o)=>y["I"](o)-y["I"](x)))[N(281)]((L=>{const T=N,I=Q,y=X[L];if(y){const N=this[I(x,o)]({betSpot:L,bets:_[I(c,h)],bet:y,onError:this[I(A,"16x!")]});if(k[T(E)](void 0,N))return;r[L]=N,_[T(407)](r),_[I(354,H)]([{}])}})),r}get[L(432)+T(138,")]Fm")+"ts"](){const x=T,o=L;return N["W2"][o(396)](((c,L)=>c+this[x(560,"DV#f")][x(475,"Nzck")][o(571)][o(415)+o(353)](L)),-780+1705+-185*5)}}}},74999:(x,o,c)=>{c.d(o,{I:()=>T});var L=c(752490);function T(x){return L.G6.has(x)?2:1}},368329:(x,o,c)=>{c.d(o,{P:()=>T});var L=c(731675);const T=()=>L.Pj()},890614:(x,o,c)=>{var L;c.d(o,{Z:()=>L}),function(x){x.Enabled="Enabled",x.Waiting="Waiting",x.Completed="Completed",x.Disabled="Disabled"}(L||(L={}))},671984:(x,o,c)=>{c.d(o,{w:()=>L});const L={fullAnimationDuration:500,flyAnimationDuration:440,chipLandPercentage:88,targetPulseDuration:300,winFlybackDelay:2e3}},80300:(x,o,c)=>{c.d(o,{d:()=>L});const L=20},971294:(x,o,c)=>{const L=E,T=A;function h(){const x=["jGxdRCo9W7S","B0XotKm","kSkGWQRcSSolWQLBnq","WQ/dL8kWp8oyFW","BwLUvgfIBgvwyq","qbldVCkyWRpcKmoZWP8SWOG","AbKvvSogqHdcO1BdMa","tM90rw5VDwDOtq","B25eB3vIBgvtDq","Aw9U","vCoOmCkUgd9jn19E","ur7dSG7cJbSfvSkDqG","W4xcVZRdKmk5nq","rezpwwq","bbldStfyaCkt","WPpdNCoWWRu","W7VcIx5+DhpcH8ks","W5C4df3dVJK+","WQmgWOKvW6HHW4q","WQWaW5NdTmoX","tw92zq","W6pcQbnd","F1fKWP9/C03cU8o8bW","W7Xjfmo6W5u","CmoQWOPTWQhcLXTUW7ldKa","W78EW6ldRSky","u3rHDgu","W6a8Ba","qCkJFmoPF8oBWRtdVSkNBYSG","CKHkuMq","qWxdPSkGWQK","WQBdPftcSJ5FwhBcPNm","WPCPW54Er8oWWP8","CMvHC29U","WONcHLlcJmkjkq","WRpcSCo/WOKZWRi6WRCLWPu","wxPQvKe","DhLWzq","mJe1nhvswMjMrq","pmoMaXBdV8oEW4tcLW","W5ykFfldOSoNgmkC","W457W67dRa","WPyRW5CmwG","Axnczxr0Aw5Nva","WO3cRCoroCkl","WOfdWR3dHCoY","WQRdKCkxgmojEmopqMWG","WQieW4pdTmoMxG","W4KTAf3dG8oNh8kCW4Ga","WOtcPqRcMeNcUJTBW5Pp","eCo4luW","eSk/WRJcTSo9WQL7gCo7bG","WQpdPv9mW5FcNZZcGMRcLG","ChjVChm","W4TCf8o9W4n8","B25fCNjVCG","W67cRmoqW7hcTSkHW61YqmkrW7GByW","WQ3dOvH7W6VcNZBcGwdcGq","vw5KB0fSBa","WQxdHvtcVHe","W5G+WPXHl8kcha","ldzDWQ4I","WRGnW5xdVSouqCkr","W5K3WOfxmCkzkSkmWPnQ","AwvUDfjLzhvJDa","W4hcKCkGWO3cLCotahpcKhK","z2v0qw1VDw50vW","W6TLW6JdPhxdSdhdGd0C","i8oheHddRSoTW5BcIeS7","BgvUz3rO","WQygW4JdOG","mJe4mZe4nZzlDLHrDLi","kCkJWOBcMCoq","zMX5rMvLt25czq","ywXHBMnL","omoDpZZdLq","WOrTvCoi","yvbfwNa","yMXLqMv0CW","u8kNWPCwha","WQddGCkWdSoor8oVvq","oSkipuG","mtm5ntHXvKLSBeq","DMfSDwvZ","W78hW6hcMCk2WQBcNCo0bajOW5biW6K","z2v0","C2v0vg90ywXczq","Ff5AWPb7reFcQSoXhG","tM9czxrZugXHyW","iJ3dPCo6W4y","W4O5jLS","pCkjnLm","W6hcJSk9WO0","Bwf4qMv0u3bVDa","W4i2FfpdRCoN","W77cLmkQWRVcG8oI","W4ayW6xdU8kz","W7xcTbDv","W7q/WQasW5v1W5n4W4zE","W40ImLHDW4DCWR8","l8oweWBdR8o3W5JcGW","WQrNv8otWOqY","W4G2lLrlW7vbWQlcONu","tcv7xG","zxnZtg9N","nsX2WROupNbIhCko","ugTUEvq","W6dcHmk/WPZcH8oIoNFcH34","nsX9WQyzigLTjmko","vmo1WPT2WOW","vbldVCksWR/cL8ouWOaXWOu","WORdPvG","W680WRqs","W6FcOWXwWQO","WQWZW7tdI8oL","EejLDa","W756W4NdI3q","WPNdHSoQWQdcRCo4","j2HWWPu","baNdRbz0mmkq","W57cTHSnWRBdIbBcNLRcOCk6jq","WQewW5q","W50/WPW+W5e","WPtdGCoU","hdRdG8kGbmkdCg09WR4","W7qJWOefW5vmW4a","WOu6W50pwG","EfzqWPzCAxZcGCoKcW","WRhcSmoTWPGKWQaDWPa0WPi","y3JcV8k5WOlcS8kEWPTOyX/cHSk+","hSkqWPCgcCk4vCo7sXm","WQBcSSolcSkRW4i","W79Cf8oPW4HSWP4","W7PMW67dTq","C2v0sgLZDg9YEq","o8oGftJdVW","yaKpyW","xbNdRmkPWPJcHSoZ","FSkTWP/dGmo0z8kBWQbgma","WQSpW4JdL8oWsmkYW43dRb8","trKvw8ocqaZcUxddQG","rHvGvmoRW5BdNZWnfq","yMfSyw5Jzq","W7yQmgvyW4reWR/cUxu","zNBcVmkYW7hdJCo+WQbFua","z0PxrhC","Bg9N","WPNcRIVcMeVcQt9TW6Xo","ye1BWOnT","W5q2zKu","CIVdNdrL","WO7dH8oXWRu","sdbQqSomWRvuz8knW6W","WQu6W50yw8o2WOKV","pmk/WQVcTCozWQvSm8oXdq","WOORWPXYjSo9oSkOW75k","geXRymoOW4NdGau","WOCTW4eAw8oLWP8EWO9V","qMv0q29LzMzPyW","yMXLzfjLyxnVBG","gdpdJSkv","Bw92zq","zCk+WRib","WP5fWRRdH8oYW7xdLSk/","zfbaWPjYuK3cJmoBaa","sSoSk8kffbHscKHx","y2XPzw50qMv0qW","y2XPzw50uhjLCW","W5S2WODhmCkz","WPW7W74qxSobWPmVWOe","WRpdKmk6dCoo","EuXWWOf/D2hcLSoeha","W5/cJwjUCexcPSkpWOv5","lmk1WRRcM8owWR97nCoMgG","DMrZDxi","B3vUDa","WQZdTCkrWPpdPCo7WQHK","Bwf4u3vWzxjtAq","hdRdG8kGe8kjuKeAWQ8","CmoXWRf3WRy","DfjLzhvJDgLVBG","WQddRuhcNJHo","q2HPCa","C2v0qMv0CW","WR0WW4tdSSo2smkoW5a","WQacW4NdHCo0t8krW4BdUbS","wrL+C8oVW5y","W4JcPcdcQ8oOWPWZe8kVWRy","CMvKDwnL","dCkaWORcNmoD","W5JcUwbUsW","sb9RzCo9","WQVdICo3WRxcO8oZW6lcG8oAeW","WPddNCo7","AgLZDg9YEq","WR7dU8kjWQtdQSo0WRG","o8kAWO4WoSkXumoGsWi","W5u1WQXDkSkpbmkmWRrC","WOPLFXVcUMv5W4ODC8owWOVcJa","W5NcKmklWOZcRW","EvbA","W4C0zKtdR8o2","W4pcRdNdLCkV","vt7dSYrfoCkoWQy","BwLUqMv0u3bVDa","WPrNtSop","pZnqWRewm2jMamk/","f8ozlxee","DMfSAwrHDg9YCW","yw1VDw50","cdNdLCks","tg93qMv0","W715W6xdOg/dOsBdIY0W","W6hdOSklxCo5WOv8WOZdKsXFW5hcPa","WOZdMSoXWRhcUq","tapdJHZcOqWi","W6xcRSoxW7hcSmkLWOXuF8k5W50n","lCk1WR7cTSoEWRG","Dw5KBW","BrmuECop","mta0oty2odHjAML4CgO","nSkJWOVcVCoqWRLOmSowaG","BwLU","W75shSoUW4bMWPJcOWpcMq","WPvJvSoFWOC7gCkQkw0","AgLW","WO/cJYZcS3m","WPOMW6aAwCo2WPSOWRLU","W6LpeSoRW5jMWPtcPa","FCoLWRnIWQVcMY0","WO3dQ1LwW6a","A2v5CW","W7tcKNHDua","AxnfBM91z2Hcyq","W5RdUWdcSMRcLIXK","z2v0rMvLqw1VDq","WPrNtG","WQfzWOddJSoKW7/dTSk5lGS","WQiwW5/dPq","W6hcJCkMWPRcGW","WR0rW57dOCoM","W5NcOc7cSSo3","uxLitum","emo+peW9","rbjEESoVW4hdQq8kca","AxrOrMvL","xJPIwmoMWRXtCmk0W6a","BhvLqMv0","E8oOm8kSeWHdmvvb","sW3dJW3cVq0","W4/cTYq","lCk1WQRcPSoCWQK","W4hcUZldKmk/iW","Aw5czxrZugvYyW","Aw1L","B25szxbLyxrtDq","y2nLC3m","C2HVD0jLDfnWBW","zmk7WRFdOmoTD8kxWQDE","W58eW6/dSSkOySoM","WPqRW4ywrSo9WOK","mJy1ndi2mhn3BfbtyW","a8oolfWTetSBDSk3","uSoTWRfbWQdcJbTRW77dHW","yMfSyw5JzvrVDa","W4TBW4CwnG","aSkfWP0tl8k4C8oRxbq","zM9YrwfJAa","AaVcHmkzkG","hSkgpKNcQCoX","s8owff0bnJ4","yxrVCNm","qMv0DgLUz1jLCW","W7JcVYDjWQZdSshdGwtdTa","omk1WRRcKSosWQn6nmoGna","mt5bWPyxkvvWnSkz","WPxdM8oBWRpcUmoYW7FcImoqeG","emoYpfKOhsSbx8k2","BgfUy2vuB1jLCa","WR3cQJtcIfZcRa","nZyZndyWogzTzevyAG","sMfVDgK","uMvWzwf0","zMX5vg9czxrtCa","mK9NzM50CG","wJ1NwSoHWRPy","kczjWRe","mZKZmZK5owXXBK1ova","a8oVnK89","WQFdP0NcKZjozxlcM2i","z8k1WRWbkKhdRCk9ar0","lZPnWPyDm1m","WQSNWPXbm8o3","vZjzxSo/WRXCCmk1W7a","W7lcVWjeWRxdTIK","WQ7dV8kvWQddPCoJWPLOrmkC","W73cLmkHWO0","uhjVz3jLC3m","wX7dUq","zw5HyMXLza","W4GMkMvwW5jjWRBcRxe","WOeAW5CBxmoWWO41WOv1","rbjBEmoQW43dNZKbaG","W54ed2NdUq","WPxdKCowWOZcGa","W410W4esf8oF","W4GKjL/dVW","W6S/WQShW5q","lCkjm17cOmoNW6O","zMzPy2LLBNrgDq","qrJdPSkK","wLLRq0i","W77cVZ/dI8kEi8kCW4ZdNG8","gdFdLSkhgmkpEa","yMfSyw5Jzuf2yq","W4POW63dOhxdPXBdSsyW","WRGPW5SrA8o2WO4pWPP0","yLPhWOzYzgRcNCoG","WPP3x8o+WPCJ","uMvTB3zL","AxneCMfNsw5qCG","WRFcTSoxdmk/W5OKWPVdMIG","FrKfySoisa","mte3tvjfBLnM","uxbMtvC","AxLituO","CMvZzxj2zujLDa","WQddP1asW6/cO3xdGLRdPx/dT8kX","W5VcVs7cTG","W6LLW4pdPg8","DgHjsuK","DhjPy3rPB24","W6SMjLVdVW","DrBdVCkXWRy","W5zIW6qtgCowbSodWQhdSG","DmoOnSkJpW5snKPb","Dg90ywXczxrpBG","CM9VDa","WPddTCksWOFdOCoJ","W6tcTbDUWRddOdNdI0xdUa","W5RcTZxcLSoRWOKWe8kiWPe","W77cOIziWRBdPIRdJhxdOa","WPZdPuTDW4FcId/cL3NcHW","mtbyt1njDKS","rWVdKqVcUXiqvSkrEq","aCoYnKS","r8k6WRmmgW","zg91yMXL","BbaiCSofwsFcQfBdJa","WQJdRuhcKJDo","WQ3dJxL/W4C","W5S1lfZdVW","B25nB3zLu3vJyW","t2dcJCoqtSkzDuOwWP8D","BKjLDhnqzxjJzq","zxrtB3vUza","FSoNWQTQWQRcLJS","W5a/luRdJtOG","WQGSWR9jmCo6bCk4W4Ti","zZyQW5xdH8kQlfBdRd8","Cfn1y2nLC3nmBW","WOtcVmolWQSq","vSk9WRe3kLhdNa","k8klo1NcOSo2W4ZcPSkNka","WO3dOvHl","DvfYzvO","WONdQfv+W7BcLt3cPwZcLG","W7TSW7xdG37dSaa","WRGPW5SrAmo9WP4mWOTY","mtC1mZC5n054y2DKsa","DaZcJSkRpmoa","W5G+WPXb","W5b/W6qodCoti8oiWQldTq","WPNcPdFcIq","WO7dSK1rW6JcMZlcI2ZcOa","BCoHWR5WWQRcLG","zLjgrNu","W51NW6xdRG","WRhdJCk6cq","WQNdQfa","twf4vgfIBgvwyq","W5CJj1S","WRlcSCo4WQ4KWRaS","WQacW4NdK8oWwCkUW5pdGq4","qw1VDw50CW","DgfIBgvmAw1PDa","WQXwWRNdGCoUW7pdGmknoWK","AxneB3vIBgvfBG","zwf0","z1rPBwu","trNdSaFcUbS4tmkKxG","Cfn1y2nLC3m","B8oOm8k4ga","ntqXnvvUzuztrG","sCkKD8oOC8kyWRpdOSkdrXO","pYddVmoV","CMvWzwf0qMv0CW","AxnczxrZt3bLBG","bCkqWOKxoSkP","u0DqWQTY","W7jph8oTW5rzWPRcPG/cKW","sJnKtW","renTqwS","W48ro1vmW4vCWRpcGhO","xbNdJCk/WQ/cGCoRWPunWOq","W5OUmurxW5i","W7TBeSoRW49QWPxcVIdcGG","WR0pW5ddSSoWBSkvW4RdNG","n8k5WR4","W5ilW6BdQSkezmo3","CLPaWOa","W53cMN17yG","W70+dMJdNq","B25qBgfJzunOAq","DMfSAwrHDgu","qG9CC8o+W4FdRtGNdW","oCoVlwGw","WQtdSLpcVdrm","BMDgywLSu291BG","W7hcJCkMWPZcImoIoNFcH04","zMnlB2S","CgrHDgvKqMv0CW","twLUqMv0u3bVDa","W44jWO1wkSkohmkaWOHh","W7u5p0O","WPNcVSovlCkVW4iwWP/dKaK","rg91yMXL","twf4qMv0u3bVDa","ywn0Aw9UCW","z2v0uMvWzwf0yq","eSkBWPGqn8k4vq","WRPDW7VdGfNdGqi","W7JcVZfdWQNdTIZdKgtdTa","DxbKyxrLvg8","WRCWWP1wna","W57cTZJdP8k5mSk7W6/dGrq","yXJdJshcJa","Aw5JBhvKzxm","W5b/W6utcSoEpq","v8o9pSkQga","C15yWPbRFeNcJmoXoG","W74fW77dJSkeAmoNWQRdSJ0","W74JWQuvW4TgW5y","WRhcPSoJWPWY","B2DYzxnZ","zMzPy2LLBNrszq","W7tdO8k0W5vZW7DRWRydWPjRWRpdRq","tw92zujLDenVzq","W7BcLSoKsmoOzCoLDfOi","W57cTYi","B3vUDhm","WORcQcZcLfBcSsK","yxzHAwXHyMXLqG","yYhdNCkKWPm","xbNdMCk8WRVcGmoIWRm2WPG","W6rSW6u","B25LEujLDa","srL6zq","w8ocWPbAWQe","WRKNW4u9smo/WPSYWOL+","W4j7W7xdLKm","zhvJDgLVBG","B3rHBejLDhnbBq","y2nLC3nmB2C","b8kMWOWromk4qSo9zaG","sHfHy8oGW5y","W5u1WRHEpSkodCkQWO9a","CgLKELO","W4KSmuu","W4WcjKddOciLW40","wZ9Usmo8","urldVCkJ","DePND04","rNjysxy","W5xdNatdMmoDoCoHWOtcHCkEFa","W4xcVZRdJmk4j8kCW7O","WQZdJmkqd8opzmoY","Bwf4vgfIBgvmAq","mcRdVSolW5JdPCoCWRTKCW","bc7dPSo/W5ddImomWQe","vwLPr3G","WO/cN13cMG","W4VcJxC","yMv0CW","vMfSDwvZ","WORdQK1AW6JcNZq","W5KMkMjjW4LCWPZcNxS","CgXHEvbSywnLqG","WPJcRIZcQvBcQZTdW4TF","CSk1WPWyifddGCkS","WPdcPmoQWQew","mJm2ndyZnxDxDeDuBG","BCoRWRb3","W7iJW5/dJmkP","z2v0qMv0u3bVDa","WQ7dV8keWRBdQ8o5","EdJdRInXfmkmWQq","F0PAWODT","W58MW4tdHCkP","Cg9W","mZbLDMzRteK","yM9UDxnuB01HAq","W7BcVqjiWRRdTG","WRKmW4xdSmo5B8kyW5FdOrq","t3jLufG","WQNcQJtcNfFcVd97W6zv","xZL/DSoUWQf/yCksW5y","saxdMG","W4lcNxX/","ktfDWRS5k0W","Ffbt","rMvLqMv0sw5ZDq","WQuUWPDKiSoRjq","xWVcM8kGgW","ndzkWQaxnvK","ACoLWRnQWQhcMtX0W6pdGa","W4KlfgnD","xJtdPG","W5q5lG","ngT+WO/dKCkD","W7j1W4OFDCkSySkoW6TyyMHm","WO/cHhFcGCkqlSoLWOtcMmk+","gtNdNSkd","vw5KBW","WPa8W6eqxmo9WP4","W5KMkKi","ywjSzwq","qMv0DgLUz1rPBq","uLbet2i","W4q2Ff/dPq","sbnRCmoOW4VdRYuhdW","W5hdMatdM8oxFSopWPJcMmkiFWq","AxnvBMrVrw5HyG","WP4TW4Sm","W5GImLjmW4PjWQ7cIKe","vMfSDwvczxq","vMfSDwu","yLPeWPz/za","mZfRWReiiKf3j8kj","WQpdQfuEWP3dLbRdKxJdKq","W410W5aegCofdCoiWOxdSW","W5hcSJpdGCkoi8kjW6ZdGq4","CMvZDwX0qMv0","ECkarKFcR8kiWO7cH0WoWPfbWRS","yMv0u3bVDfrV","twf4vgfIBgvpCG","qur0DMq","W7ySWRW","t3rOzxi","y2fSy3vSyxrLva","WRXyWRRdLa","W61zgSo8W4nRWRNcRXlcHa","W7GSWQGuW5jpW5nGW4PU","W4xcGwi","twLUvgfIBgvwyq","WOFcPd8","W75Cf8oRW5nJWPRcVGpcOG","eZNdLa","W55OW63dTh7dHHBdKq","W7CIWQm","C29YDa","W4WwpxXA","q2HPCe1VDMvjBG","yM91BMq","B3rZrxHHy3rbBq","y2fSy3vSyxrLvq","WPPNvmoBWOy/"];return(h=function(){return x})()}function A(x,o){const c=h();return A=function(o,L){let T=c[o-=132];if(void 0===A.lbzyZk){const o=function(x,o){let c,L,T=[],h=0,A="";for(x=function(x){const o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let c="",L="";for(let L,T,h=0,A=0;T=x.charAt(A++);~T&&(L=h%4?64*L+T:T,h++%4)?c+=String.fromCharCode(255&L>>(-2*h&6)):0)T=o.indexOf(T);for(let x=0,o=c.length;x<o;x++)L+="%"+("00"+c.charCodeAt(x).toString(16)).slice(-2);return decodeURIComponent(L)}(x),L=0;L<256;L++)T[L]=L;for(L=0;L<256;L++)h=(h+T[L]+o.charCodeAt(L%o.length))%256,c=T[L],T[L]=T[h],T[h]=c;L=0,h=0;for(let o=0;o<x.length;o++)L=(L+1)%256,h=(h+T[L])%256,c=T[L],T[L]=T[h],T[h]=c,A+=String.fromCharCode(x.charCodeAt(o)^T[(T[L]+T[h])%256]);return A};A.TjrdxO=o,x=arguments,A.lbzyZk=!0}const h=o+c[0],E=x[h];return E?T=E:(void 0===A.FsETsi&&(A.FsETsi=!0),T=A.TjrdxO(T,L),x[h]=T),T},A(x,o)}function E(x,o){const c=h();return E=function(o,L){let T=c[o-=132];void 0===E.UEdmfj&&(E.aqyiTd=function(x){const o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let c="",L="";for(let L,T,h=0,A=0;T=x.charAt(A++);~T&&(L=h%4?64*L+T:T,h++%4)?c+=String.fromCharCode(255&L>>(-2*h&6)):0)T=o.indexOf(T);for(let x=0,o=c.length;x<o;x++)L+="%"+("00"+c.charCodeAt(x).toString(16)).slice(-2);return decodeURIComponent(L)},x=arguments,E.UEdmfj=!0);const h=o+c[0],A=x[h];return A?T=A:(T=E.aqyiTd(T),x[h]=T),T},E(x,o)}(function(x,o){const c=237,L=557,T=596,h="ptRj",H=632,N=560,Q=344,I=E,k=A,_=x();for(;1;)try{if(-parseInt(k(c,"SMgV"))/(-381+1*139+243)*(parseInt(I(L))/(4223+-6260+-1*-2039))+-parseInt(I(T))/(1984+1329+-3310)*(-parseInt(k(626,h))/(-1*-4751+-6281+1534))+parseInt(I(666))/(541*7+2395+6177*-1)*(parseInt(k(H,"$0vH"))/(-6554+2635*-1+-3065*-3))+parseInt(k(329,"dvzD"))/(-5929+15*461+89*-11)+parseInt(k(600,"1lRr"))/(-6333+-3757+10098)+-parseInt(I(N))/(-1*2417+-3451+-5877*-1)*(-parseInt(I(616))/(6016+-3874+41*-52))+-parseInt(I(Q))/(-530*3+-1*4667+6268)===o)break;_["push"](_["shift"]())}catch(x){_["push"](_["shift"]())}})(h,-96782*-7+1*109379+-186189);{const x={};x["P"]=()=>h,c["d"](o,x);var H=c(-1378947+1*160318+1*1971119),N=c(-512641*1+417077+66*6503),Q=c(134*6529+-153298*1+31220*-5),I=c(1*531862+392575+538375*-1),k=c(-2*392379+-1*-1398733+9*35087),_=c(467714+118*1604+-70752),X=c(76422+-27980+203227*1),r=(c(-435081+-108*-430+821*878),c(-1*-78137+-112284+-15*-6193));const h=x=>new A(x);class A extends X["$"]{get[T(221,"B#m9")](){const x=E,o=T,{ag:c,fee:L}=this[o(362,"FbT2")][x(610)],h={};return h[x(158)+x(347)]=c[x(158)+o(454,"jc^p")],h[o(547,"V[dJ")+x(518)]=L[o(279,"yptW")+x(518)],{...super[x(481)],[N["sh"][x(217)+o(679,"kIW*")+"nd"]]:Q["uE"](h)}}get[T(371,"c!Tb")+T(296,"kIW*")](){const x=T,o=E;return[N["AE"][o(268)+x(436,"%4X@")],N["sh"][o(217)+o(582)+"nd"],N["AE"][x(211,"iNk2")+o(484)],N["AE"][o(233)+"e"],N["AE"][o(545)+o(604)],N["AE"][o(260)+x(591,"3hV8")],N["AE"][o(653)+x(276,"#bk]")],N["AE"][o(153)+x(562,"jc^p")+o(167)],N["AE"][o(431)+x(403,"WD5J")+x(263,"ptRj")],N["AE"][o(133)+x(264,"ssa2")],N["AE"][x(698,"]C20")+x(185,"FbT2")],N["AE"][o(280)+x(410,"MMcY")]]}[L(255)+L(168)+L(448)](x){const o=L,c=T,h=super[c(146,"AM0V")+c(321,"IH6b")+o(448)](x);return this[c(443,"#bk]")][c(349,"3hV8")][c(523,"SygB")][o(339)+o(518)](h)}[T(594,"]C20")+L(694)](x){const o=326,c=406,h=T,A=L;return Object[A(504)](x)[h(595,"yptW")](((L,T)=>{const E=h,H=A;if(!r["B"][H(143)](T)){L[T]=x[T];const h=r["m"][H(358)](T);h&&(L[h]=this[H(o)][E(c,"ssa2")][E(188,"&VB)")][H(508)+"nt"](x[T]||-1776+-4455+6231))}return L}),{})}[T(172,"SWe#")+L(664)](x,o){const c=T;super[L(686)+c(313,"IH6b")](x,o),this[c(412,"bQX]")+"t"]({[x]:o})}[T(470,"SWe#")+T(624,"16x!")](x){const o=L,c=T;super[c(227,"SMgV")+c(315,")]Fm")](x),this[o(346)+"t"](x)}[T(500,")]Fm")+T(176,"asPO")](x){const o=L;super[o(528)+o(529)](x),this[o(346)+"t"](x)}[T(517,"ciiv")+L(633)+"g"](x){const o=T,c=L,h=this[c(271)+o(257,"kIW*")](x),A=super[c(255)+c(168)+o(187,"SMgV")](h),E={};E[c(310)]=_["uu"][c(455)],E[c(189)]=h,E[o(678,"Nzck")]=A,this[c(326)][c(610)][c(419)][o(636,"0vyQ")+c(498)](E)}[T(677,"MMcY")+T(476,"MHg2")](x){const o=L,c=T,h=this[c(497,"3hV8")+c(563,"MCPC")](x),A=super[o(255)+o(168)+c(409,"yptW")](h),E={};E[o(310)]=_["uu"][o(132)],E[o(189)]=h,E[c(441,"SWe#")]=A,this[o(326)][c(256,"%4X@")][c(261,"iNk2")][c(336,"SWe#")+o(498)](E)}[T(244,"bV5S")+T(353,"#bk]")](x){const o=L,c=T,h=this[c(262,"kIW*")+o(694)](x),A=super[o(255)+o(168)+c(654,"16x!")](h),E={};E[c(294,"1lRr")]=_["uu"][o(555)],E[c(323,"w42R")]=h,E[c(171,"ciiv")]=A,this[o(326)][o(610)][c(224,"16x!")][o(439)+c(396,"i#F%")](E)}[T(575,"ciiv")+L(377)](x){const o=L,c=T,h=this[c(240,"Nzck")+o(694)](x),A=super[o(255)+o(168)+c(288,"i#F%")](h),E={};E[c(559,"bV5S")]=_["uu"][o(229)],E[o(189)]=h,E[c(474,"IH6b")]=A,this[c(399,")]Fm")][o(610)][c(216,"AM0V")][o(439)+c(223,"MHg2")](E)}[L(625)+T(690,"jc^p")](x,o){const c=L,h=T,A={};A[h(634,"lFGl")]=function(x,o){return x===o},A[c(638)]=function(x,o){return x!==o};const E=A,N=this[h(617,"D5JR")+h(401,"lFGl")](o),Q=E[h(685,"16x!")](x,H["iG"])?super[c(255)+c(168)+h(569,"!e0a")](N):super[c(255)+c(168)+c(448)](I["_y"](N));this[h(369,"DV#f")][c(610)][h(265,"c!Tb")][c(439)+c(498)]({type:E[h(463,"&VB)")](x,H["iG"])?_["uu"][c(293)]:_["uu"][h(374,"3hV8")],bets:N,amount:Q})}get[L(669)](){const x=L,o=T,c=this[o(514,"SygB")][x(610)][x(189)][o(459,"ciiv")];if(c)return this[x(271)+x(694)](c)}[T(451,"ptRj")+"t"](x){const o=L,c=T,{flyingFee:h}=this[c(386,"1lRr")][o(610)];h[c(639,"J(E(")+c(605,"16x!")](x,k["B"][c(300,"IH6b")])}}}},58748:(x,o,c)=>{c.d(o,{B:()=>h,m:()=>A});var L=c(586234),T=c(315281);const h=[T._.BankerLightning,T._.PlayerLightning,T._.TieLightning,T._.BankerPairLightning,T._.PlayerPairLightning],A=new Map([[L.K8.Player,T._.PlayerLightning],[L.K8.Banker,T._.BankerLightning],[L.K8.Tie,T._.TieLightning],[L.K8.PlayerPair,T._.PlayerPairLightning],[L.K8.BankerPair,T._.BankerPairLightning]])},315281:(x,o,c)=>{var L;c.d(o,{_:()=>L}),function(x){x.BankerLightning="BankerLightning",x.PlayerLightning="PlayerLightning",x.TieLightning="TieLightning",x.BankerPairLightning="BankerPairLightning",x.PlayerPairLightning="PlayerPairLightning"}(L||(L={}))},595656:(x,o,c)=>{var L=c(794140),T=c(731675),h=c(752490),A=c(588974),E=c(346160),H=c(277082),N=c(730460);const Q=[N.I.Normal,N.I.Chinese,N.I.Korean,N.I.Number],I={[H.WinnerTypeBaccarat.Player]:N.u.P,[H.WinnerTypeBaccarat.Banker]:N.u.B};function k(x){return"string"==typeof x}function _(x){return"boolean"==typeof x}function X(x){if(x)switch(typeof x){case"number":return x;case"string":return Number(x)}}function r(x,o){return x===A.C.V2?A.C.V2:o.default}function y(x){const o="immersive_logo",c=`${o}_${E.lr().iso}`;return x[c]?x[c]:x[o]}function v(x,o){switch(x){case"true":return!0;case"false":return!1;default:return o.default}}function B(x){return Q.includes(x)}function Y(x){return k(x)?x.split(",").filter(B):[]}function F(x){return k(x)&&h.LH.includes(x)}const t={min:0,max:0};function m(x){const o=x.rawConfig,c={min:X(o.table_bet_min_limit)||0,max:X(o.table_bet_max_limit)||0},L=0!==c.min&&0!==c.max;return{tiePays9to1:v(o.tie_pays_9_to_1,{default:!1}),tableLimits:L?c:t,tableLogo:y(o),excludedBeadRoadModes:Y(o.excluded_bead_road_modes),scorecardTheme:(T=o.roads_background,F(T)?T:void 0),mainBetsOnly:v(o.main_bets_only,{default:!1}),isFrozenSprites:v(o.isFrozenSprites,{default:!1}),isAllSideBetsEnabled:v(o.all_side_bets,{default:!0}),redEnvelopeMath:r(o.red_envelope_math,{default:A.C.V1}),isRedEnvelope:v(o.red_envelope,{default:!1}),volatility:v(x.rawConfig["regulatory.volatility_index_in_help_required"],{default:!1})};var T}var C,V=c(697971);function i(x){return V.mJ((()=>x.preferences.showOnboardingGameHints),((o,c)=>{for(const[,L]of x.bubble.preferencesOnGameHintChange)!c&&o&&x.preferences.updatePreferenceValue(L,0)}))}function M(x){let o=0,c=0;const L=V.mJ((()=>({isDesktopClassic:x.layout.isDesktopClassic,dimensions:x.device.dimensions})),(({isDesktopClassic:L,dimensions:T},{isDesktopClassic:h,dimensions:A})=>{const E=L!==h;T!==A?(window.clearTimeout(o),window.cancelAnimationFrame(c),o=window.setTimeout((()=>{c=window.requestAnimationFrame((()=>x.bubble.resize()))}),150)):E&&(window.clearTimeout(o),o=setTimeout((()=>{x.bubble.resize()}),1e3))}));return()=>{window.clearTimeout(o),L()}}function Z(x){return V.mJ((()=>({bets:x.bets.bets,isBetting:x.gamePhase.isBetsOpen})),(({bets:o,isBetting:c})=>{const L=function(x){return Object.values(x).reduce(((x,o)=>o?x+o:x),0)}(o),T=x.fee.getAmountWithFee(L),h=T-L;x.fee.set(h),c&&(x.ag.actions.balance.reserveBet(T),x.ag.actions.balance.setTotalBet(T))}))}!function(x){x.Betting="Betting",x.Welcome="Welcome"}(C||(C={}));class S{constructor(){this.history=[]}parse(x){this.history=this.formatHistoryPayload(x.history_v2);const{list:o,weight:c}=this.calculateBigRoad(this.history,!0),{list:L,weight:T}=this.calculateBigEyeRoad(o),{list:h,weight:A}=this.calculateSmallRoad(o),{list:E,weight:N}=this.calculateCockroachRoad(o),Q=this.mapHistoryToPattern(this.history);return{stats:x.stats,history:this.history,roads:{[H.RoadType.Big]:o,[H.RoadType.BigEye]:L,[H.RoadType.Small]:h,[H.RoadType.Cockroach]:E,probes:this.probes},weight:{[H.RoadType.Big]:c,[H.RoadType.BigEye]:T,[H.RoadType.Small]:A,[H.RoadType.Cockroach]:N},pattern:Q}}formatHistoryPayload(x){return x.map((x=>({bankerPair:x.bankerPair||!1,bankerScore:x.bankerScore||0,natural:x.natural||!1,playerPair:x.playerPair||!1,playerScore:x.playerScore||0,winner:x.winner,multiplier:x.multiplier})))}calculateBigRoad(x,o=!1){const c=H.calculateRoadBaccarat(x,o);return H.orderRoadBaccarat(c)}calculateBigEyeRoad(x){const o=H.getDerivedRoadBaccarat(x,1);return H.orderRoadBaccarat(o)}calculateSmallRoad(x){const o=H.getDerivedRoadBaccarat(x,2);return H.orderRoadBaccarat(o)}calculateCockroachRoad(x){const o=H.getDerivedRoadBaccarat(x,3);return H.orderRoadBaccarat(o)}calculateProbeRoad(x){return{row:x.row||0,col:x.col||0,color:x.color}}calculateLocation(x){return x?this.calculateProbeRoad(x):void 0}calculateProbes(x){const o={winner:x,bankerPair:!1,playerPair:!1,natural:!1,bankerScore:0,playerScore:0},c=this.history.concat(o),L=this.calculateBigRoad(c).list,T=this.calculateBigEyeRoad(L).list,h=this.calculateSmallRoad(L).list,A=this.calculateCockroachRoad(L).list;return{big:this.calculateLocation(L[L.length-1]),bigEye:this.calculateLocation(T[T.length-1]),small:this.calculateLocation(h[h.length-1]),cockroach:this.calculateLocation(A[A.length-1])}}mapHistoryToPattern(x){const o=[];return x.forEach((x=>{const c=x.winner;c!==H.WinnerTypeBaccarat.Player&&c!==H.WinnerTypeBaccarat.Banker||(0!==o.length&&o[o.length-1].key===c?o[o.length-1].val++:o.push({key:c,val:1}))})),o.map((x=>I[x.key]+x.val)).join("|")}get probes(){return{[H.WinnerTypeBaccarat.Player]:{...this.calculateProbes(H.WinnerTypeBaccarat.Player)},[H.WinnerTypeBaccarat.Banker]:{...this.calculateProbes(H.WinnerTypeBaccarat.Banker)}}}}function u(x){return new d(x)}class d{constructor(x){this.props=x,this.beadRoadMode=N.I.Normal,this.zoomedRoad=void 0,this.roads={probes:{Banker:{},Player:{}},[H.RoadType.Big]:[],[H.RoadType.BigEye]:[],[H.RoadType.Small]:[],[H.RoadType.Cockroach]:[]},this.stats={gameCount:0,playerWins:0,bankerWins:0,ties:0,playerPairs:0,bankerPairs:0},this.history=[],this.weight={[H.RoadType.Big]:0,[H.RoadType.BigEye]:0,[H.RoadType.Small]:0,[H.RoadType.Cockroach]:0},this.decoder=new S,V.Gn(this,{beadRoadMode:V.sH,zoomedRoad:V.sH,roads:V.sH,stats:V.sH,history:V.sH,excludedBeadRoadModes:V.EW,availableBeadRoadModes:V.EW,setShoeData:V.XI,updateShoeData:V.XI,setZoomedRoad:V.XI,setBeadRoadMode:V.XI})}setShoeData(x){const{roads:o,stats:c,history:L,pattern:T,weight:h}=this.decoder.parse(x);this.roads=o,this.stats=c,this.history=L,this.pattern=T,this.weight=h}updateShoeData(x){this.roads=x.roads,this.stats=x.stats,this.history=x.history,this.pattern=x.pattern}setBeadRoadMode(x){this.beadRoadMode=x}get excludedBeadRoadModes(){const x=new Set,{excludingBeadRoadMode:o}=E.vL();return o?x.add(N.I.Chinese):x.add(N.I.Korean),this.props.root.settings.excludedBeadRoadModes.forEach((o=>{x.add(o)})),x}get availableBeadRoadModes(){return Q.filter((x=>!this.excludedBeadRoadModes.has(x)))}getRoadItems(x){return this.roads[x]}resolveMultiplierTheme(x){return H.lightningTheme}setZoomedRoad(x){this.zoomedRoad=x}}var O,j,e,q,f,U,s=c(586234),D=c(456647),$=c(254545);!function(x){x.PressedSettings="CLIENT_PRESSED_SETTINGS",x.FourRoads="CLIENT_TAP_ROADS2",x.Prediction="CLIENT_PRESSED_PROB",x.BeadRoad="CLIENT_BEAD_ROAD",x.RedEnvelopePayoutDisplayed="CLIENT_BACCARAT_REDENVELOPE_PAYOUT_DISPLAYED",x.ClientReceivedBetResponse="CLIENT_RECEIVED_BET_RESPONSE",x.PressedButton="CLIENT_PRESSED_BUTTON"}(O||(O={})),function(x){x.Bets="bets",x.GameType="gameType",x.GameTime="gameTime",x.UserAgent="userAgent",x.Balance="balance",x.Currency="currency",x.ChipStack="chipStack",x.TableLimits="tableLimits",x.GameId="gameId",x.ShoeName="shoeName"}(j||(j={})),function(x){x.PeekControl="Peek",x.ChipStack="Chipstack"}(e||(e={})),function(x){x.Big="BigRoad",x.BigEye="BigEyeRoad",x.Cockroach="CockroachRoad",x.SmallEye="SmallEyeRoad"}(q||(q={})),function(x){x.Enlarged="Enlarged",x.Original="Original"}(f||(f={})),function(x){x.SoundMute="soundMute",x.SoundUnmute="soundUnmute"}(U||(U={}));const a=[j.Bets,j.GameType,j.GameTime,j.UserAgent,j.Balance,j.Currency],z=[j.Bets,j.GameType,j.GameTime,j.Currency,j.ChipStack,j.TableLimits,j.Balance];function l(x){return{[s.K8.Banker]:"BAC_Banker",[s.K8.Player]:"BAC_Player",[s.K8.Tie]:x.tiePays9to1?"BAC_Tie9to1":"BAC_Tie",[s.K8.BankerBonus]:"BAC_BankerBonus",[s.K8.BankerPair]:"BAC_BankerPair",[s.K8.EitherPair]:"BAC_EitherPair",[s.K8.SuperSix]:"BAC_SuperSix",[s.K8.PlayerBonus]:"BAC_PlayerBonus",[s.K8.PlayerPair]:"BAC_PlayerPair",[s.K8.PerfectPair]:"BAC_PerfectPair"}}function G(x){return o=>({...o,...x()})}class p{constructor(x){this.props=x}getCustomEnhancers(){return{[j.Bets]:G((()=>({bets:V.HO(this.props.root.bets.bets)}))),[j.GameType]:G((()=>({gameType:s.ZF.Baccarat}))),[j.UserAgent]:G((()=>({userAgent:this.props.root.device.DS.userAgent})))}}clientPressedSetting(x,o){this.commonLog({type:O.PressedSettings,payload:{settingName:x,newValue:o}})}clientPressedButton(x,o){this.commonLog({type:O.PressedButton,payload:{buttonName:x,...o}})}clientFourRoad(x,o){this.commonLog({type:O.FourRoads,payload:{mode:x,type:o}})}clientPrediction(x){this.commonLog({type:O.Prediction,payload:{mode:x}})}clientBeadRoad(x){this.commonLog({type:O.BeadRoad,payload:{mode:x}})}clientRedEnvelopePayoutDisplayed(x){this.commonLog({type:O.RedEnvelopePayoutDisplayed,payload:{bonus:x}})}clientBetChip(x){const o={},c=this.getBetExternalIds();Object.keys(x.bets).forEach((L=>{const T=c[L];T&&(o[T]=x.bets[L])}));const L={type:x.type,amount:x.amount,codes:o,currentBets:x.currentBets,currentSpotValue:x.currentSpotValue,balanceBeforeBet:x.balanceBeforeBet};this.log(D.Fv(L,this.betChipLogEnhancers))}clientPressedOnBetsOutOfBettingTime(){this.commonLog({type:$.L.PressedOnBetsOutOfBettingTime})}clientBetResponse(x){this.commonLog({type:O.ClientReceivedBetResponse,payload:x})}get defaultLogEnhancers(){return a}get betChipLogEnhancers(){return z}commonLog(x){this.log({...x,enhancers:this.defaultLogEnhancers})}log(x){this.props.root.ag.actions.log(x)}getBetExternalIds(){const{tiePays9to1:x,useRedEnvelopePayouts:o}=this.props.root.settings;return l({tiePays9to1:!o&&x})}}function P(x){return V.mJ((()=>x.gamePhase.isBetsClosed),(o=>{o&&x.ag.actions.betting.setHasValidBets(x.ag.values.balanceTotalBet>0)}))}function K(x){return V.mJ((()=>({amount:x.gameResult.amount,hasBets:Object.keys(x.bets.bets).length>0})),(({amount:o,hasBets:c})=>{(0!==o||c)&&x.ag.actions.gameResult.setAmount(o)}))}function J(x){return V.mJ((()=>x.gamePhase.value),((o,c)=>function(x,o,c){let L=!1;if(o!==c&&o!==s.Qc.NewGame)switch(L=!0,o){case s.Qc.BetsOpen:x.ag.actions.lifecycle.openBets();break;case s.Qc.BetsClosed:x.ag.actions.lifecycle.closeBets();break;case s.Qc.Resolved:x.ag.actions.lifecycle.resolveGame()}return L}(x,o,c)))}const n=(x,o)=>[K(x),P(x),...o?[J(x)]:[]];var b=c(933233),W=c(332635);class w{constructor(x){this.api=x.ag,this.values=function(x){const o={gamePaused:(c=x).gamePaused.state,orientation:c.orientation,isInFullscreen:c.fullscreen.isInFullscreen,isGoingLive:c.isGoingLive,gameDimensions:c.gameDimensions,preferences:c.preferences.values,gameRoundId:c.gameRoundId,playMode:c.playMode,isPageVisible:c.isPageVisible,chipstackHidden:c.chipstack.hidden,betAmountsLastSelectedAmount:c.betAmounts.lastSelectedAmount,chipstackChipColors:c.chipstack.chipColors,betAmounts:c.betAmounts.amounts,lifecycleCurrent:c.lifecycle.current,networkLatency:c.network.latency,decisionTimerHidden:c.decisionTimer.hidden,decisionTimerSecondsRemaining:c.decisionTimer.secondsRemaining,bettingTags:c.betting.tags,betModifier:c.betAmounts.betModifier,tooltipsCurrent:c.tooltips.current,gameNumber:c.gameNumber,tableName:c.tableName,layoutCurrent:c.layout.current,layoutImmersiveFooterCollapsed:c.layout.immersive.footer.collapsed,layoutClassicVideoIsExpanded:c.layout.classic.video.expanded,layoutOpenMobileDrawerId:c.layout.drawer.mobile.current,layoutDesktopDrawerCurrentOpenId:c.layout.drawer.desktop.current,menuOpenScreenId:c.menu.openScreenId,menuIsOpen:c.menu.isOpen,videoIsPlaying:c.video.isPlaying,videoQuality:c.video.quality,videoPlayerName:c.video.playerName,videoStreamForCurrentLayout:c.video.streamForCurrentLayout,videoMobileScale:c.video.mobile.scale,videoMobileScalingContainerHtmlElement:c.video.mobile.scalingContainerHtmlElement,videoInfoVisible:c.video.info.visible,gameResultAmount:c.gameResult.amount,statusBarProps:c.statusBar.props,statusBarOverlayProps:c.statusBar.overlayProps,balanceAvailable:c.balance.available,balanceReserved:c.balance.reserved,balanceReservedTip:c.balance.reservedTip,balanceServer:c.balance.server,balanceActiveId:c.balance.activeId,balanceTotalBet:c.balance.totalBet,balanceIsLow:c.balance.isLow,balanceIsPaused:c.balance.isPaused,winnersListHidden:c.winnersList.hidden,autoplayUIIsSettingsWindowOpen:c.autoplayUI.isSettingsWindowOpen,autoplayUIIsPreviousTotalBetVisible:c.autoplayUI.isPreviousTotalBetVisible,onboardingCurrent:c.onboardingBubbles.current,activeWallet:c.promotionsUI.activeWallet,currencyCode:c.currency.code,currencySymbol:c.currencySymbol,gameTheme:c.gameTheme,globalStylesCustomizableButton:c.globalStyles.current.customizableButton,tableLimitsMin:c.tableLimits.min,tableLimitsMax:c.tableLimits.max,tableLimitsPinned:c.tableLimits.ui.panel.isPinned,popupCurrent:c.popups.current,rootSize:c.rootSize};var c;return Object.keys(o).reduce(((x,c)=>{let L;const T=o[c],h=V.MN(c,(()=>{L=T.subscribe((()=>{h.reportChanged()}))}),(()=>null==L?void 0:L()));return Object.defineProperty(x,c,{get:()=>(h.reportObserved(),T.value)}),x}),{})}(x.ag)}get actions(){return this.api}get availableBalance(){return this.values.balanceAvailable}get lastSelectedChip(){return this.values.betAmountsLastSelectedAmount}get platform(){return this.api.platform}get balanceTotalBet(){return this.values.balanceTotalBet}get betAmounts(){return this.actions.betAmounts.amounts.value}get currentLayout(){return this.values.layoutCurrent}get gameTheme(){return this.values.gameTheme}}var g=c(693),R=c(973220);class xx{constructor(){this.bets={},this.rejectedBets=void 0,this.status=s.uB.Idle,this.repeat=void 0,this.history=[],V.Gn(this,{bets:V.sH,rejectedBets:V.sH,status:V.sH,repeat:V.sH,history:V.sH,hasBets:V.EW,updateBetsState:V.XI.bound,reset:V.XI.bound,setStatus:V.XI.bound,setRepeat:V.XI.bound,setBets:V.XI.bound}),this.getBetSpotValue=this.getBetSpotValue.bind(this)}setBets(x){this.bets=this.removeZeroes(x)}setHistory(x){this.history=x}setStatus(x){this.status=x}setRejectedBets(x){this.rejectedBets=x}setRepeat(x){this.repeat=x}updateBetsState(x){x.bets&&this.setBets(x.bets),x.history&&this.setHistory(x.history),x.status&&this.setStatus(x.status),R.i5(x,"rejectedBets")&&this.setRejectedBets(x.rejectedBets),R.i5(x,"repeat")&&this.setRepeat(x.repeat)}getBetSpotValue(x){const o=this.bets[x];return"number"==typeof o?o:0}reset(){this.bets={},this.status=s.uB.Idle,this.history=[]}get hasHistory(){return!!this.history.length}get hasBets(){return!g.A(this.bets)}removeZeroes(x){return Object.keys(x).reduce(((o,c)=>(x[c]&&(o[c]=x[c]),o)),{})}}var ox,cx=c(284824);!function(x){x.Background="background",x.AllSideBets="allSideBets",x.BettingGridBubbleShownTimes="bettingGridBubbleShownTimes",x.WelcomeBubbleShownTimes="welcomeBubbleShownTimes"}(ox||(ox={}));var Lx=c(822381);const Tx="onboarding.bubbleBetting",hx="onboarding.bubbleBettingTitle",Ax="onboarding.bubbleIntro",Ex=Lx.eI(40),Hx=Lx.eI(30),Nx={[C.Betting]:ox.BettingGridBubbleShownTimes,[C.Welcome]:ox.WelcomeBubbleShownTimes},Qx=[[C.Betting,ox.BettingGridBubbleShownTimes],[C.Welcome,ox.WelcomeBubbleShownTimes]];var Ix;!function(x){x.BettingGrid="bettingGrid"}(Ix||(Ix={}));class kx{constructor(x){this.props=x,this.current=null,this.timeToLiveId=0,V.Gn(this,{current:V.sH,showBubble:V.XI.bound,showWelcome:V.XI.bound,hideBubble:V.XI.bound,hideAllBubbles:V.XI.bound,autoHideBubble:V.XI.bound,resize:V.XI.bound,isGridBubbleVisible:V.EW,isWelcomeBubbleVisible:V.EW})}show(x,o=!1){const c=this.getRef(x);this.showBubble(x,c,o)}showBubble(x,o,c=!1){var L;if(!o||(null===(L=this.current)||void 0===L?void 0:L.id)===x&&!c||x===C.Welcome)return;this.current={id:x,ref:o};const T=this.bubbles[x],h=this.getBubbleLayoutOptions(T);this.props.root.ag.actions.onboardingBubbles.addOrUpdate({id:T.id,element:o,anchorPosition:h.anchorPosition,bubbleData:{position:h.bubblePosition,showHintsOption:void 0===T.showHintsOption||T.showHintsOption,width:h.bubbleWidth,withArrow:T.withArrow,titleTranslationKey:T.titleTranslationKey,contentTranslationKey:T.contentTranslationKey,rootOffset:h.offsetBubble,contentTranslationMapping:T.contentTranslationMapping,onClose:this.hideBubble.bind(this),hintsButtonCallback:this.hideAllBubbles.bind(this)}}),T.timeToLive&&(clearTimeout(this.timeToLiveId),this.timeToLiveId=setTimeout((()=>{var x;(null===(x=this.current)||void 0===x?void 0:x.id)===T.id&&this.autoHideBubble(this.current.id)}),T.timeToLive))}showWelcome(){var x;(null===(x=this.current)||void 0===x?void 0:x.id)!==C.Welcome&&(this.current={id:C.Welcome},this.props.root.ag.actions.onboardingBubbles.addWelcomeBubble({contentTranslationKey:this.bubbles[C.Welcome].contentTranslationKey,onClose:this.hideBubble.bind(this)}))}hideBubble(){if(!this.current)return;this.current.id===C.Welcome?this.props.root.ag.actions.onboardingBubbles.removeWelcomeBubble():this.props.root.ag.actions.onboardingBubbles.remove(this.current.id);const x=this.current.id;this.props.root.preferences.updatePreferenceValue(this.bubblePreferences[x],this.bubbles[x].timesToShow),this.current=null,clearTimeout(this.timeToLiveId)}autoHideBubble(x){if(this.current&&this.current.id===x){if(x===C.Welcome)this.props.root.ag.actions.onboardingBubbles.removeWelcomeBubble();else{this.props.root.ag.actions.onboardingBubbles.remove(x);const o=x,c=this.props.root.preferences.getValue(this.bubblePreferences[o]);this.props.root.preferences.updatePreferenceValue(this.bubblePreferences[o],c+1)}this.current=null,clearTimeout(this.timeToLiveId)}}hideAllBubbles(){this.current&&(this.props.root.ag.actions.onboardingBubbles.remove(this.current.id),this.props.root.preferences.updatePreferenceValue(cx.bR,!1),this.current=null,clearTimeout(this.timeToLiveId))}resize(){this.current&&this.show(this.current.id,!0)}get isWelcomeBubbleVisible(){return!1}get isGridBubbleVisible(){const{ag:x,gamePhase:o,preferences:c}=this.props.root,{showOnboardingGameHints:L,bettingGridBubbleShownTimes:T}=c;return!this.isWelcomeBubbleVisible&&T<this.bubbles[C.Betting].timesToShow&&!!this.gridRef&&0===x.balanceTotalBet&&o.isBetsOpen&&L}get bubblePreferences(){return Nx}get preferencesOnGameHintChange(){return Qx}getRef(x){var o;return x===C.Betting?this.gridRef:null===(o=this.current)||void 0===o?void 0:o.ref}getBubbleLayoutOptions(x){return this.props.root.layout.isDesktopImmersive?x.layoutPosition.desktop:this.props.root.layout.isDesktopClassic?x.layoutPosition.desktopClassic:this.props.root.device.isTablet&&x.layoutPosition.tablet?x.layoutPosition.tablet:this.props.root.device.isLandscape?x.layoutPosition.landscape:x.layoutPosition.portrait}get gridRef(){return this.props.root.reference.bubble.all[Ix.BettingGrid]}get bubbles(){return function({percentage:x=20}={}){return{[C.Welcome]:{id:C.Welcome,timesToShow:1,contentTranslationKey:Ax,layoutPosition:{}},[C.Betting]:{id:C.Betting,titleTranslationKey:hx,contentTranslationKey:Tx,contentTranslationMapping:{percentage:x},withArrow:!0,layoutPosition:{desktop:{anchorPosition:"TopCenter",bubblePosition:"TopCenter",bubbleWidth:Ex},desktopClassic:{anchorPosition:"TopCenter",bubblePosition:"TopCenter",bubbleWidth:Ex},landscape:{anchorPosition:"BottomCenter",bubblePosition:"BottomCenter",bubbleWidth:Hx},portrait:{anchorPosition:"TopCenter",bubblePosition:"TopCenter",bubbleWidth:Hx}},timesToShow:2}}}()}}var _x=c(930104);function Xx(){const x={cards:[],score:0};return{[_x.U.Banker]:x,[_x.U.Player]:x}}class rx{constructor(){this.hands=Xx(),this.cleared=!1,this.dealSoon=!1,V.Gn(this,{hands:V.sH,cleared:V.sH,dealSoon:V.sH,setHands:V.XI,setCleared:V.XI,setDealSoon:V.XI,dealtCards:V.EW,resetHands:V.XI})}setHands(x){this.hands=x}getCards(x){return this.hands[x].cards}hasOpenCard(x){return this.getCards(x).some((x=>x!==s.Zp.UnknownCard))}getScore(x){return this.hasOpenCard(x)?this.hands[x].score:void 0}get dealtCards(){const x=this.getCards(_x.U.Player),o=this.getCards(_x.U.Banker);return x.concat(o)}get dealtOrderedCards(){const x=this.getCards(_x.U.Player),o=this.getCards(_x.U.Banker),c=[];for(let L=0;L<3&&!(x.length<=L)&&(c.push(x[L]),!(o.length<=L));L++)c.push(o[L]);return c}resetHands(){this.setHands(Xx())}setCleared(x){this.cleared=x}setDealSoon(x){this.dealSoon=x}}var yx=c(170877),vx=c(436794);class Bx{constructor(x){this.props=x,V.Gn(this,{isDesktop:V.EW,isTablet:V.EW,isPhone:V.EW,isPortrait:V.EW,isLandscape:V.EW,dimensions:V.EW,aspectRatio:V.EW,isBigDeviceDimensions:V.EW,platform:V.EW,orientation:V.EW,isSmallDevice:V.EW,isSmallDeviceHeight:V.EW,isLargeDevice:V.EW,gameContainerDimensions:V.EW,rootSize:V.EW})}get isDesktop(){return this.props.root.ag.platform===yx.OD.Desktop}get DS(){return this.props.DS}get isTablet(){return this.platform===yx.OD.Tablet}get isPhone(){return this.platform===yx.OD.Phone}get orientation(){return this.props.root.ag.values.orientation}get platform(){return this.props.root.ag.platform}get isPortrait(){return this.orientation===vx.t.Portrait}get isLandscape(){return this.orientation===vx.t.Landscape}get dimensions(){return this.props.root.ag.values.gameDimensions}get rootSize(){return this.props.root.ag.values.rootSize}get aspectRatio(){const x=this.dimensions.containerWidth,o=this.dimensions.containerHeight;return Math.min(x,o)?Math.max(x,o)/Math.min(x,o):0}get isLowPerformanceDevice(){return this.DS.IS_ANDROID&&!this.DS.IS_ANDROID6_0_0_PLUS||this.DS.IS_IN_ANDROID_WEB_VIEW}get isBigDeviceDimensions(){return this.aspectRatio>1.85}get isFF(){return this.props.DS.IS_FIREFOX}get isSmallDevice(){const{width:x,height:o}=this.dimensions;return(this.isPortrait?x:o)<=320}get isSmallDeviceHeight(){const{width:x,height:o}=this.dimensions;return(this.isPortrait?o:x)<=600}get isLargeDevice(){const{width:x,height:o}=this.dimensions;return(this.isPortrait?o:x)>=812}get isNarrowScreenPhonePortrait(){const{height:x,width:o}=this.dimensions;return x>o&&o>=320&&o/x<=1e3/1900}get gameContainerDimensions(){const{boxWidth:x,boxHeight:o}=this.dimensions,c=this.dimensions.reverseScale||1;return{width:x/c,height:o/c,reverseScale:this.dimensions.reverseScale}}}class Yx{constructor(){this.isLongBetting=!1,this.phase=s.Qc.NewGame,V.Gn(this,{phase:V.sH,isLongBetting:V.sH,setPhase:V.XI,setIsLongBetting:V.XI,isGameResolved:V.EW,isBetsOpen:V.EW,isDealing:V.EW})}get isBetsOpen(){return this.phase===s.Qc.BetsOpen}get isDealing(){return this.phase===s.Qc.Dealing}get value(){return this.phase}setPhase(x){this.phase=x}setIsLongBetting(x){this.isLongBetting=x}get isGameResolved(){return this.value===s.Qc.Resolved}get isBetsClosed(){return this.value===s.Qc.BetsClosed}}var Fx,tx,mx,Cx=c(981298);class Vx{constructor(){this.winner=void 0,this.winningBetSpots=[],this.betsAcceptedBetSpots=[],this.amount=0,this.acceptedBetsAmount=0,this.winType=Cx.R.None,this.withEffect=!1,V.Gn(this,{winner:V.sH,winningBetSpots:V.sH,betsAcceptedBetSpots:V.sH,amount:V.sH,winType:V.sH,withEffect:V.sH,color:V.EW,resultLabel:V.EW,setGameResultData:V.XI,reset:V.XI,setWithEffect:V.XI})}get color(){switch(this.winner){case s.K8.Banker:return"255,15,15";case s.K8.Player:return"0,150,255";case s.K8.Tie:return"0,255,0";default:return""}}get resultLabel(){return this.winner?E.Tl(this.winner.toLowerCase()):""}setWithEffect(x){this.withEffect=x}setGameResultData({winner:x,winningBetSpots:o,betsAcceptedBetSpots:c,amount:L,winType:T,acceptedBetsAmount:h}){this.winner=x,this.winningBetSpots=o,this.betsAcceptedBetSpots=null!=c?c:[],this.amount=L,this.acceptedBetsAmount=h,this.winType=T}reset(){this.winner=void 0,this.winningBetSpots=[],this.betsAcceptedBetSpots=[],this.amount=0,this.acceptedBetsAmount=0,this.winType=Cx.R.None,this.setWithEffect(!1)}}!function(x){x.Desktop="ComponentLayout.Desktop",x.DesktopClassic="ComponentLayout.DesktopClassic",x.MobilePortrait="ComponentLayout.MobilePortrait",x.MobileLandscape="ComponentLayout.MobileLandscape",x.Tablet="ComponentLayout.Tablet"}(Fx||(Fx={})),function(x){x.DesktopImmersive="DesktopImmersive",x.DesktopClassic="DesktopClassic",x.TabletLive="TabletLive",x.PhonePortraitLive="PhonePortraitLive",x.PhoneLandscapeLive="PhoneLandscapeLive",x.ExtraLargeLandscape="ExtraLargeLandscape",x.LargeLandscape="LargeLandscape",x.SmallLandscape="SmallLandscape",x.PhonePortrait="PhonePortrait"}(tx||(tx={})),function(x){x[x.ThreeLines=0]="ThreeLines",x[x.TwoLinesPortrait=1]="TwoLinesPortrait",x[x.TwoLinesDesktopClassic=2]="TwoLinesDesktopClassic",x[x.TwoLinesDesktopImmersiveV2=3]="TwoLinesDesktopImmersiveV2",x[x.FourLinesDesktopClassic=4]="FourLinesDesktopClassic",x[x.Desktop=5]="Desktop",x[x.SixLinesPhoneV2=6]="SixLinesPhoneV2",x[x.Multiplay=7]="Multiplay"}(mx||(mx={}));class ix{constructor(x){this.props=x,V.Gn(this,{componentLayout:V.EW,isDesktopClassic:V.EW,isDesktopImmersive:V.EW})}get componentLayout(){return this.props.root.device.isDesktop?this.isDesktopClassic?Fx.DesktopClassic:Fx.Desktop:this.props.root.device.isTablet?Fx.Tablet:this.props.root.device.isLandscape?Fx.MobileLandscape:Fx.MobilePortrait}get isDesktopClassic(){return this.props.root.ag.values.layoutCurrent===H.LayoutType.Classic}get isDesktopImmersive(){return this.componentLayout===Fx.Desktop}get roadsDisplayMode(){const{isDesktopClassic:x,isDesktopImmersive:o}=this,{isPortrait:c,isTablet:L,isPhone:T}=this.props.root.device;return c?mx.TwoLinesPortrait:L||T?mx.SixLinesPhoneV2:x?mx.FourLinesDesktopClassic:o?mx.TwoLinesDesktopImmersiveV2:mx.ThreeLines}get beadRoadDisplayMode(){const{isDesktopClassic:x,isDesktopImmersive:o}=this,{isTablet:c,isPortrait:L,isBigDeviceDimensions:T}=this.props.root.device;return x||L&&T?tx.DesktopClassic:o?tx.DesktopImmersive:c?tx.TabletLive:L?tx.PhonePortraitLive:tx.PhoneLandscapeLive}get useInnerDimensions(){return[tx.DesktopImmersive,tx.DesktopClassic,tx.TabletLive].includes(this.beadRoadDisplayMode)}get hideYouWin(){return this.props.root.settings.hideYouWinOnLowCelebration&&this.props.root.gameResult.amount<=this.props.root.gameResult.acceptedBetsAmount}}class Mx{constructor(){this.winner=void 0,V.Gn(this,{winner:V.sH,setPrediction:V.XI,resetPrediction:V.XI})}setPrediction(x){this.winner=x}resetPrediction(){this.winner=void 0}}class Zx{constructor(){this.references=V.sH.map(),V.Gn(this,{set:V.XI.bound,all:V.EW,dispose:V.XI.bound,references:V.sH}),this.get=this.get.bind(this)}get all(){const x={};for(const[o,c]of this.references)x[o]=c;return x}set(x,o){this.references.set(x,o)}get(x){return this.references.get(x)}dispose(){this.references.clear()}}class Sx{constructor(){this.common=new Zx,this.bubble=new Zx}dispose(){this.common.dispose(),this.bubble.dispose()}}var ux=c(843717),dx=c(764522);class Ox{constructor(){this.playPlaceBetSound=()=>{this.fireSoundEvent(ux.Wo.PlaceChip)},this.playClickingFailSound=()=>{this.fireSoundEvent(ux.Wo.ClickingFail)},this.playClickButtonSound=()=>{this.fireSoundEvent(ux.Wo.ClickUIButton)},this.playChipStackSound=()=>{this.fireSoundEvent(ux.Wo.Chipstack)},this.playUndoSound=()=>{this.fireSoundEvent(ux.Wo.Undo)},this.playRepeatBetSound=()=>{this.fireSoundEvent(ux.Wo.RepeatDouble)}}fireSoundEvent(x,...o){dx.triggerEvent(x,...o)}}V.jK({enforceActions:"always"});class jx{constructor(x){this.disposeBagCallbacks=[],this.isDebug=null!==b.w(window.location.href).getParam("debug"),this.disposeBag=new W.C,this.ag=function(x){return new w(x)}({ag:x.ag}),this.device=function(x){return new Bx(x)}({root:this,DS:x.DS}),this.reference=new Sx,this.layout=function(x){return new ix(x)}({root:this}),this.gamePhase=new Yx,this.cards=new rx,this.shoe=u({root:this}),this.gameResult=new Vx,this.bets=new xx,this.prediction=new Mx,this.log=function(x){return new p(x)}({root:this}),this.bubble=function(x){return new kx(x)}({root:this}),this.sounds=new Ox,this.isDebug&&(window.__store=this)}dispose(){this.disposeBag.dispose()}initDisposables(x,o=!0){this.disposeBag.addDisposables([this.reference,...n(this,o),...this.disposeBagCallbacks.map((x=>x()))])}}const ex=[...a,j.ChipStack,j.TableLimits,j.GameId];var qx,fx,Ux,sx,Dx;!function(x){x.PressedDealNow="CLIENT_PRESSED_DEAL_NOW",x.TotalMultiplierDisplayed="CLIENT_BACCARAT_TOTAL_MULTIPLIER_DISPLAYED",x.PressedStatistics="CLIENT_PRESSED_STATISTICS",x.MinimizeGrid="CLIENT_MINIMIZE_GRID",x.ReceivePrivateWarning="CLIENT_RECEIVE_PRIVATE_WARNING",x.PressedPrivateWarningOk="CLIENT_PRESSED_PRIVATE_WARNING_OK"}(qx||(qx={})),function(x){x.Swipe="Swipe",x.ClickOnButton="ClickOnButton",x.ClickOnBackdrop="ClickOnBackdrop"}(fx||(fx={}));class $x extends p{constructor(x){super(x),this.props=x}clientPressedDealNow(){this.commonLog({type:qx.PressedDealNow})}clientTotalMultiplierDisplayed(x,o){this.commonLog({type:qx.TotalMultiplierDisplayed,payload:{betSpot:x,multiplier:o}})}clientPressedStatistics(x){this.commonLog({type:qx.PressedStatistics,payload:{show:x}})}clientMinimizeGrid(x){this.commonLog({type:qx.MinimizeGrid,payload:{actionType:x}})}clientBetAcceptedRejected(x){const{ag:o}=this.props.root;let c,L;const T=x.acceptedBets;if(T)for(const x of Object.keys(T)){const o=T[x];o&&(L||(L={}),L[x]=o.amount)}if(x.originalBets)c=x.originalBets;else{c={...L||{}};const o=x.rejectedBets;if(o)for(const x of Object.keys(o)){const L=o[x];L&&(c[x]=L.amount)}}const h={originalBet:c,confirmed:L,rejected:x.rejectedBets,layout:o.values.layoutCurrent,repeat:x.repeat,status:x.status,balance:x.balance,latency:o.values.networkLatency};let A=$.L.ClientBetAccepted;h.confirmed&&h.rejected?A=$.L.ClientBetAcceptedPartial:h.rejected&&(A=$.L.ClientBetRejected),this.betLog({type:A,payload:h})}clientReceivedPrivateTableIdleWarning(){this.commonLog({type:qx.ReceivePrivateWarning})}clientPressedPrivateTableIdleWarningOk(){this.commonLog({type:qx.PressedPrivateWarningOk})}getBetLogEnhancers(){return ex}betLog(x){this.log({...x,enhancers:this.getBetLogEnhancers()})}}!function(x){x.Banker="banker_reductions",x.Player="player_reductions",x.Tie="tie_reductions",x.BankerBonus="banker_bonus_reductions",x.BankerPair="banker_pair_reductions",x.EitherPair="either_pair_reductions",x.SuperSix="super_six_reductions",x.PlayerBonus="player_bonus_reductions",x.PlayerPair="player_pair_reductions",x.PerfectPair="perfect_pair_reductions"}(Ux||(Ux={})),function(x){x.WideShot="WideShot",x.CloseUp="CloseUp"}(sx||(sx={})),function(x){x.Address="address",x.BetsClosed="betsclosed",x.BetsOpen="betsopen",x.Dealing="dealing",x.Resolved="resolved",x.WideShotZoom="wideShotZoom",x.CloseUpZoom="closeUpZoom",x.WideShotY="wideShotY",x.CloseUpY="closeUpY",x.Duration="duration"}(Dx||(Dx={}));class ax{constructor(x){this.props=x,this.duration=1,this.scale=1,this.translateY=0,this.zoomMap={[sx.WideShot]:{translateY:0,scale:1},[sx.CloseUp]:{translateY:0,scale:1}},this.tasks=new Set,this.state="default",V.Gn(this,{scale:V.sH,translateY:V.sH,duration:V.sH,update:V.XI.bound,setState:V.XI.bound,addTask:V.XI.bound,removeTask:V.XI.bound});const o=this.props.root.settings.cameraOnRails;var c;this.duration=zx(o.duration,3),this.zoomMap[sx.WideShot].scale=zx(o.wideShotZoom,1),this.zoomMap[sx.WideShot].translateY=zx(o.wideShotY,0),this.zoomMap[sx.CloseUp].scale=zx(o.closeUpZoom,1.25),this.zoomMap[sx.CloseUp].translateY=zx(o.closeUpY,0),this.props.root.disposeBagCallbacks.push((c=this.props.root,()=>V.mJ((()=>c.gamePhase.value),(x=>{if(!c.videoZoom||c.videoZoom.state===x||c.device.isDesktop)return;c.videoZoom.setState(x);const o=c.settings.cameraOnRails[x];if(o){c.videoZoom.removeTask();for(const x of o){const o=window.setTimeout((()=>{c.videoZoom&&(c.videoZoom.removeTask(o),c.videoZoom.update({...c.videoZoom.zoomMap[x.state]}))}),x.delay);c.videoZoom.addTask(o)}}}),{fireImmediately:!0})))}setState(x){this.state=x}addTask(x){this.tasks.add(x)}removeTask(x){if(x)this.tasks.delete(x);else{for(const x of this.tasks)window.clearTimeout(x);this.tasks.clear()}}update(x){x.scale&&(this.scale=x.scale),x.translateY&&(this.translateY=x.translateY),x.duration&&(this.duration=x.duration)}}function zx(x,o){return x?Number(x):o}var lx=c(386062);class Gx{constructor(x){this.props=x,V.Gn(this,{isLowBalance:V.EW})}get isLowBalance(){const{betSpot:x,settings:o,ag:c,bets:L}=this.props.root,T=x.minBetSpotValues,h=Math.min(...o.chipAmounts),A=c.availableBalance,E=lx.Zz(L.bets);return Object.keys(T).length>0&&void 0!==A&&!E&&(this.isBalanceLowerMinBet||A<h)}get isBalanceLowerMinBet(){const{betSpot:x,ag:o}=this.props.root;return o.availableBalance<x.minBetSpotValue}}function px(x){return V.mJ((()=>x.balance.isLowBalance),(o=>{const c=x.ag.actions.balance;return o?c.setLow():c.setEnough()}),{fireImmediately:!0})}var Px=c(251669);function Kx(x){return V.mJ((()=>x.betProcessor.isUndoEnabled),(({enabled:o})=>{o?x.ag.actions.betting.undo.enable():x.ag.actions.betting.undo.disable()}))}function Jx(x){return V.mJ((()=>x.betProcessor.isRepeatEnabled),(o=>{o.enabled?x.ag.actions.betting.repeat.enable():x.ag.actions.betting.repeat.disable(o.reason)}),{fireImmediately:!0})}function nx(x){return V.mJ((()=>x.betProcessor.isDoubleEnabled),(o=>{o.enabled?x.ag.actions.betting.double.enable():x.ag.actions.betting.double.disable(o.reason)}),{fireImmediately:!0})}var bx=c(609835);const Wx=[],wx=[s.K8.PlayerPair],gx=[s.K8.PlayerBonus,s.K8.PerfectPair],Rx=[...gx,...wx],xo=[s.K8.BankerPair],oo=[s.K8.BankerBonus,s.K8.EitherPair],co=[...oo,...xo],Lo=[...gx,...oo],To=new Map([[s.K8.Player,!1],[s.K8.Banker,!1],[s.K8.Tie,!1],[s.K8.PlayerPair,!1],[s.K8.BankerPair,!1],[s.K8.PlayerBonus,!1],[s.K8.BankerBonus,!1],[s.K8.PerfectPair,!1],[s.K8.EitherPair,!1],[s.K8.SuperSix,!1]]);class ho{constructor(x){this.props=x,V.Gn(this,{getBetSpotPayoutMap:V.EW})}isSpotConfigured(x){try{const{rawConfig:o,prefixMinMax:c,postfixMin:L,postfixMax:T}=this.props.root.settings,h=R.C(x);if(!v(o[`${h}_enabled`],{default:!0}))return!1;const A=+o[`${c}${h}_${L}`],E=+o[`${c}${h}_${T}`];return A>0&&E>0}catch(x){return!1}}getMaxBetSpotValue(x){const{reduction:o}=this.props.root;return o.getReductedMaxBetSpotValue(x)}getMinBetSpotValue(x){return this.props.root.settings.getMinBetSpotValue(x)}get minBetSpotValues(){return Object.values(s.K8).reduce(((x,o)=>{const c=this.getMinBetSpotValue(o);return bx.A(c)&&Number.isFinite(c)?{...x,[o]:c}:x}),{})}get minBetSpotValue(){const x=Object.values(this.minBetSpotValues);return x.length?Math.min(...x):0}get maxBetSpotValues(){return Object.values(s.K8).reduce(((x,o)=>{const c=this.getMaxBetSpotValue(o);return bx.A(c)&&Number.isFinite(c)?{...x,[o]:c}:x}),{})}get tiePayout(){const{tiePays9to1:x,useRedEnvelopePayouts:o}=this.props.root.settings;return o?E.Tl("betSpot.Tie.payout.redenvelope"):x?E.Tl("betSpot.Tie.payout.9to1"):E.Tl("betSpot.Tie.payout")}get getBetSpotPayoutMap(){return Object.keys(s.K8).reduce(((x,o)=>{let c=[];switch(o){case s.K8.Tie:c=[this.tiePayout];break;case s.K8.PerfectPair:c=[E.Tl("betSpot.PerfectPair.payout.double"),E.Tl("betSpot.PerfectPair.payout.one")];break;case s.K8.PlayerPair:case s.K8.BankerPair:case s.K8.EitherPair:case s.K8.SuperSix:c=[E.Tl(`betSpot.${o}.payout`)]}return{...x,[o]:c}}),{})}}class Ao extends ho{constructor(x){super(x),this.props=x,V.Gn(this,{leftBetSpots:V.EW,rightBetSpots:V.EW,isOnlyMains:V.EW,isSingleSideBetsRow:V.EW,availableBetSpots:V.EW,isOnlyPairs:V.EW,hasExtraSideBetsConfigured:V.EW,hasExtraSideBetsPlacedBets:V.EW})}get availableBetSpots(){const x=new Map(To),o=this.props.root.reduction.mainOnlyReduction||this.props.root.settings.isMainBetsOnly,c=this.props.root.preferences.isAllSideBetsEnabled;for(const[L]of x){const T=this.isSpotConfigured(L);switch(L){case s.K8.Player:case s.K8.Banker:case s.K8.Tie:x.set(L,T);break;case s.K8.PlayerPair:case s.K8.BankerPair:x.set(L,T&&!o);break;case s.K8.PlayerBonus:case s.K8.BankerBonus:case s.K8.EitherPair:case s.K8.PerfectPair:x.set(L,T&&!o&&c);break;case s.K8.SuperSix:x.set(L,T&&this.props.root.settings.noCommission)}}return x}get leftBetSpots(){return this.sideBetSpots(wx,Rx)}get rightBetSpots(){return this.sideBetSpots(xo,co)}get isOnlyMains(){return 0===this.sideBetSpots(wx,Rx).length}get isSingleSideBetsRow(){return[...this.leftBetSpots,...this.rightBetSpots].length<=3}get isOnlyPairs(){return 1===this.leftBetSpots.length&&1===this.rightBetSpots.length&&this.leftBetSpots.includes(s.K8.PlayerPair)&&this.rightBetSpots.includes(s.K8.BankerPair)}get hasExtraSideBetsConfigured(){return Lo.some((x=>this.isSpotConfigured(x)))}get hasExtraSideBetsPlacedBets(){return Lo.reduce(((x,o)=>x+this.props.root.bets.getBetSpotValue(o)),0)>0}sideBetSpots(x,o){const c=this.props.root.reduction.mainOnlyReduction,L=this.props.root.preferences.isAllSideBetsEnabled,T=this.props.root.settings.isMainBetsOnly;return c||T?Wx:(L?o:x).filter((x=>this.isSpotConfigured(x)))}}const Eo={amount:0,percentage:0,players:0};class Ho{constructor(){this.stats={[s.K8.Player]:Eo,[s.K8.Tie]:Eo,[s.K8.Banker]:Eo},V.Gn(this,{stats:V.sH.ref,setStatistics:V.XI.bound})}setStatistics(x){this.stats=x}}var No=c(333634),Qo=c(565488),Io=c(717462);class ko{constructor(x){this.storageKey=x.key,this.storage=Io.i3(x.prefix),this.defaultValue=x.defaultValue}set(x){this.storage.setStorageKey(this.storageKey,x)}get(){var x;return null!==(x=this.storage.getStorageKey(this.storageKey))&&void 0!==x?x:this.defaultValue}}var _o,Xo=c(15621),ro=c(890614);!function(x){x.IdleRoundsLimitReached="IdleRoundsLimitReached",x.InvalidBetPlaced="InvalidBetPlaced"}(_o||(_o={}));class yo{constructor(x){this.props=x,this.status=ro.Z.Enabled,this.idleRoundsLeft=null,this.bubbleCount=new ko({key:"DealNowPromoBubbleImpressions",prefix:Io.Ib.Neon,defaultValue:0}),this.bubbleCountLimit=2,this.isBubbleOpen=!1,this.isFeatureEnabled=!1,V.Gn(this,{status:V.sH,isFeatureEnabled:V.sH,enableFeature:V.XI.bound,disableFeature:V.XI.bound,isBubbleOpen:V.sH,showBubble:V.XI.bound,closeBubble:V.XI.bound,isButtonVisible:V.EW,isBubbleVisible:V.EW,updateStatus:V.XI.bound,validators:V.EW,incrementBubbleCount:V.XI.bound,idleRoundsLeft:V.sH,updateIdleRoundsLeft:V.XI.bound,isIdleRoundsLimitEnabled:V.EW}),this.handleBetError=this.handleBetError.bind(this)}get isButtonVisible(){return this.isFeatureEnabled&&this.props.root.gamePhase.isBetsOpen&&!this.props.root.gamePhase.isLongBetting}get isBubbleVisible(){return this.isButtonVisible&&this.isBubbleOpen}closeBubble(){this.isBubbleOpen=!1}disableFeature(){this.isFeatureEnabled=!1}updateStatus(x){const o=this.status;this.status=x,o===ro.Z.Disabled&&x!==o&&this.props.root.tooltip.hideDealNowTooltip()}handleDealNowStateMessage(x){this.enableFeature();const o=this.deriveStatusFromDealNowStateMessage(x);this.updateStatus(o),this.updateIdleRoundsLeft(x.idleRoundsLeft),this.isBubbleCountLimitReached()||(this.showBubble(),this.incrementBubbleCount())}syncStatusWithBets(x){const o=this.getReasonToDisableButton(x,this.idleRoundsLeft);let c=this.status;o?c=ro.Z.Disabled:this.status===ro.Z.Disabled&&(c=ro.Z.Enabled),this.updateStatus(c)}showBetErrorTooltips(){const{bets:x,betProcessor:o}=this.props.root,c=x.bets;for(const x of Object.keys(c))o.validate({bet:0,bets:c,betSpot:x,validators:this.validators,orderValidators:this.orderValidators,onError:this.handleBetError})}showTooltip(x){const o=this.getReasonToDisableButton(this.props.root.bets.bets,this.idleRoundsLeft);if(o)switch(o){case _o.IdleRoundsLimitReached:{const o=this.props.root.device.isDesktop?"tooltip.freeGamesLimit":"tooltip.freeGamesLimitMobile";this.props.root.tooltip.showDealNowTooltip(o,x);break}case _o.InvalidBetPlaced:this.showBetErrorTooltips();break;default:Xo.xb(o)}}showBubble(){this.isBubbleOpen=!0}deriveStatusFromDealNowStateMessage({isButtonPressed:x,idleRoundsLeft:o}){return this.status===ro.Z.Waiting&&x?ro.Z.Completed:this.getReasonToDisableButton(this.props.root.bets.bets,null!=o?o:null)?ro.Z.Disabled:ro.Z.Enabled}updateIdleRoundsLeft(x){this.idleRoundsLeft=null!=x?x:null}getReasonToDisableButton(x,o){const c=this.isIdleRoundsLimitEnabled&&0===o,L=0===Object.keys(x).length,T=Object.keys(x).length>0,h=T&&this.checkIfHasValidBet(x);return c&&L?_o.IdleRoundsLimitReached:T&&!h?_o.InvalidBetPlaced:null}handleBetError(x,o){const{tooltip:c,sounds:L}=this.props.root;c.showBetSpotTooltip({betSpot:x,text:o.translatedMessage||""}),L.playClickingFailSound()}enableFeature(){this.isFeatureEnabled=!0}get validators(){const{betSpot:x,reduction:o}=this.props.root;return{[No.AE.BetCoefficientReduction]:Qo.Ar({coefficientReductions:o.coefficientReductions}),[No.AE.MinBetSpotValueBet]:Qo.YJ({minBetSpotValues:x.minBetSpotValues})}}get orderValidators(){return[No.AE.BetCoefficientReduction,No.AE.MinBetSpotValueBet]}isBubbleCountLimitReached(){return this.bubbleCount.get()>=this.bubbleCountLimit}incrementBubbleCount(){this.bubbleCount.set(this.bubbleCount.get()+1)}checkIfHasValidBet(x){const{betProcessor:o}=this.props.root;return Object.keys(x).some((c=>{let L=!0;return o.validate({bet:0,bets:x,betSpot:c,validators:this.validators,orderValidators:this.orderValidators,onError:()=>{L=!1}}),L}))}get isIdleRoundsLimitEnabled(){const{freeHandsLimit:x,isPrivateTable:o}=this.props.root.settings;return o&&x>0}}class vo{constructor(){this.from=void 0,this.to=void 0,this.undoFrom=void 0,this.animationEnabled=!0,this.isDragAllowed=!0,V.Gn(this,{from:V.sH,to:V.sH,undoFrom:V.sH,animationEnabled:V.sH,isDragAllowed:V.sH,updateFrom:V.XI.bound,updateUndoFrom:V.XI.bound,setAnimationEnabled:V.XI.bound,isDragInProgress:V.EW,setDragAllowed:V.XI.bound,updateTo:V.XI.bound})}updateFrom(x){this.from=x,this.updateTo(void 0),this.updateUndoFrom(void 0)}updateTo(x){this.to=x}updateUndoFrom(x){this.undoFrom=x}setAnimationEnabled(x){this.animationEnabled=x}get isDragInProgress(){return!!this.from}setDragAllowed(x){this.isDragAllowed=x}}function Bo(x,o,c,L="FlyingChip-move"){return`${L}-${c}-from-${x}-to-${o}-${(new Date).getTime()}`}class Yo{constructor(x){this.bodies=[],this.animationEnabled=!0,this.animationPrefix=x,V.Gn(this,{bodies:V.sH,animationEnabled:V.sH,setAnimationEnabled:V.XI.bound,removeBodies:V.XI.bound,playHideAnimations:V.XI.bound,setBodies:V.XI.bound})}setAnimationEnabled(x){this.animationEnabled=x}removeBodies(x){this.bodies=this.bodies.filter((o=>!x.includes(o.id)))}playHideAnimations(){for(const x of this.bodies)x.options={...x.options,playHideAnimation:!0}}setBodies(x){this.bodies=x}startAnimation(x,o){const c=Date.now(),L=this.bodies,T=[];for(const{from:L,to:h,value:A}of x)for(const x of h){const h={id:Bo(L,x,A,this.animationPrefix),from:L,startTime:c,to:x,value:A,options:o};this.onAnimationCreate(h),T.push(h)}this.setBodies([...L,...T])}onAnimationCreate(x){}}var Fo=c(467309),to=c(182728);class mo extends Yo{constructor(x){super(),this.props=x,V.Gn(this,{flyToBetSpotsExactAmounts:V.XI.bound,flyFromBetSpotsExactAmounts:V.XI.bound})}flyToBetSpotsExactAmounts(x,o){this.flyChips(x,((x,c)=>({from:null!=o?o:h.iG,to:[x],value:c.toString()})))}flyFromToExactAmount(x,o,c){c&&this.startAnimation([{from:x,to:[o],value:c.toString()}])}flyFromBetSpotsExactAmounts(x,o=h.iG){this.flyChips(x,((x,c)=>({from:x,to:[o],value:Math.abs(c).toString()})))}onAnimationCreate({from:x,to:o}){this.registerCoreElementsIfNeeded(x),this.registerCoreElementsIfNeeded(o)}flyChips(x,o){if(g.A(x))return;const c=[];for(const L of Object.keys(x)){const T=x[L];if(T){const x=o(L,T);c.push(x)}}this.startAnimation(c)}registerCoreElementsIfNeeded(x){const{reference:o}=this.props;switch(x){case h.iG:const x=Fo.CG(this.props.chipstackId);x&&o.common.set(h.iG,x);break;case"totalBetAmount":const c=to.T.totalBetAmount.current;c&&o.common.set("totalBetAmount",c);break;case"balanceLabelKey":const L=to.T.totalBetAmount.current;L&&o.common.set("balanceLabelKey",L)}}}const Co=[H.RoadType.Cockroach,H.RoadType.Small,H.RoadType.BigEye,H.RoadType.Big,H.RoadType.Bead];class Vo extends Yo{constructor(){super("flying-probes"),this.isAvailable=!1,V.Gn(this,{isAvailable:V.sH,setAvailable:V.XI})}setAvailable(x){this.isAvailable=x}flyFromPredictionButton(x){if(!this.animationEnabled||!this.isAvailable)return;this.bodies.length>0&&this.setBodies([]);const o=[];Co.forEach((c=>{o.push({from:x,to:[c],value:c})})),this.startAnimation(o)}}var io,Mo,Zo,So;!function(x){x.WinnerBallTo="WinnerBallTo",x.WinnerBallFrom="WinnerBallFrom",x.FlyingRoadsBodyContainer="FlyingRoadsBodyContainer"}(io||(io={})),function(x){x.FlyingProbesBodyContainer="FlyingProbesBodyContainer"}(Mo||(Mo={})),function(x){x.Bead="Bead",x.Four="Four"}(Zo||(Zo={})),function(x){x.WinnerBallFlying="WinnerBallFlying",x.AllRoadsLanded="AllRoadsLanded",x.Idle="Idle"}(So||(So={}));class uo extends Yo{constructor(){super("flying-win"),this.status=So.Idle,this.setAnimationEnabled(!1),this.flyRoadFromWinnerBall=this.flyRoadFromWinnerBall.bind(this),V.Gn(this,{status:V.sH,isWinnerBallFlying:V.EW,areAllRoadsLanded:V.EW,flyWinnerBall:V.XI,reset:V.XI})}get isWinnerBallFlying(){return this.status===So.WinnerBallFlying}get areAllRoadsLanded(){return this.status===So.AllRoadsLanded}flyWinnerBall(){this.status=So.WinnerBallFlying}reset(){this.status=So.Idle,this.bodies=[]}flyRoadFromWinnerBall(x){this.animationEnabled&&this.startAnimation([{from:io.WinnerBallTo,to:[x],value:x}])}removeBodies(x){this.status=So.AllRoadsLanded,super.removeBodies(x)}}var Oo=c(876759);const jo=s.Qc.BetsOpen;class eo{constructor(x){var o;this.props=x,this.gameCycleCompleted=Oo.I(),V.Gn(this,{gameCycleCompleted:V.sH,setGameCycleCompleted:V.XI.bound}),this.props.root.disposeBagCallbacks.push((o=this.props.root,()=>{const x=V.mJ((()=>o.gamePhase.value),(c=>{c===jo&&(o.gameCycle.setGameCycleCompleted(),x())}),{fireImmediately:!0});return x}))}setGameCycleCompleted(){this.gameCycleCompleted=!0}}var qo=c(228174);function fo(x,o,c=1.7777777777777777){const L=x/o>c;return{width:L?o*c:x,height:L?o:x/c}}const Uo={bottom:3,left:120,right:120,top:90},so={bottom:15.5,left:58,right:58,top:50.5},Do={bottom:0,left:5,right:5,top:0},$o={bottom:35.5,left:85,right:85,top:50.5};function ao(x,o,c,L,T=!1){const h=function(x,o,c){return c?$o:x===vx.t.Portrait?Do:o===yx.OD.Tablet?Uo:so}(c,L,T);return fo(x-(h.left+h.right),o-(h.top+h.bottom))}const zo={left:0,top:0,width:0,height:0,x:0,y:0};function lo(x,o=1){if(x){const c=x.getBoundingClientRect();return{left:c.left/o,top:c.top/o,width:c.width/o,height:c.height/o,x:c.x/o,y:c.y/o}}return zo}var Go=c(78350),po=c(73816),Po=c(779204),Ko=c(574044);const Jo={dangerZone:60,bigDeviceDangerZone:90,buttons:45,predictions:35,buttonsMargin:7};var no;!function(x){x.Prive="#001C0D",x.NoCommision="#1F0029",x.Default="#1C0E00"}(no||(no={}));const bo={[s.K8.Player]:["#003688","#003688","#003688","#003688"],[s.K8.Banker]:["#710808","#710808","#710808","#710808"],[s.K8.Tie]:["#004C25","#004C25","#004C25","#004C25"]},Wo=[],wo={[H.ScorecardThemeNames.WhiteSolid]:{...H.scorecardThemes[H.ScorecardThemeNames.WhiteSolid],stroke:"rgba(179, 179, 179, 0.5)",translate:.1,size:1.1}},go=[0,60,13];var Ro=c(607439);const xc=[[s.K8.PlayerPair,s.K8.PerfectPair,s.K8.SuperSix],[s.K8.EitherPair,s.K8.PerfectPair]];class oc{constructor(x){this.props=x,this.gridScale=1,this.freeSpace=0,this.videoOffset=0,V.Gn(this,{freeSpace:V.sH,gridScale:V.sH,setGridScale:V.XI.bound,setFreeSpace:V.XI.bound,gridHeightDecrease:V.EW,gridShiftDown:V.EW,gridHeight:V.EW,minMaxGridHeight:V.EW,gridHeightScaled:V.EW,extraSpotsHeight:V.EW,contentOverflowHeight:V.EW})}get isReady(){return 0!==this.freeSpace}setVideoOffset(x){this.videoOffset=x}get skipAnimations(){return!this.isReady||this.props.root.layout.resizeHappened}get scoresOffset(){return(this.props.root.preferences.swapStatsAndMedia?-2:-5)+this.gridShiftDown+this.contentOverflowHeight+this.gridHeightDecrease*this.gridScale-this.videoFreeSpace}get roadsOffset(){return this.props.root.preferences.swapStatsAndMedia?this.videoFreeSpace-this.props.root.device.dimensions.boxHeight:this.contentOverflowHeight+this.gridShiftDown+this.gridHeightDecrease*this.gridScale}get extraSpotsHeight(){const x=this.props.root.betSpot.availableBetSpots;return xc.reduce(((o,c)=>c.some((o=>x.get(o)))?o+38:o),0)}get minMaxGridHeight(){return{min:this.extraSpotsHeight+112,max:this.extraSpotsHeight+152}}get gridHeight(){return Ro.A(this.freeSpace,this.minMaxGridHeight.min,this.minMaxGridHeight.max)}get gridHeightScaled(){return Ro.A(this.freeSpace/this.gridScale,this.minMaxGridHeight.min,this.minMaxGridHeight.max)}get videoFreeSpace(){return 80*this.gridScale}get contentOverflowHeight(){return this.freeSpace-this.gridHeightScaled*this.gridScale}get gridHeightDecrease(){const x=this.gridHeightScaled-this.extraSpotsHeight-80,o=Ro.A(-this.contentOverflowHeight,30,x);return this.props.root.gamePhase.isBetsOpen?0:o}get gridShiftDown(){return this.props.root.gamePhase.isBetsOpen?0:Ro.A(-this.contentOverflowHeight,25,50)}setFreeSpace(x){this.freeSpace=x}setGridScale(x){this.gridScale=x}}function cc(x){return V.mJ((()=>({multiplierCardsExist:x.multipliers.multiplierCardsExist,componentLayout:x.layout.componentLayout})),(({multiplierCardsExist:o,componentLayout:c},L)=>{L.componentLayout===c?x.layout.setSkipLogoHiddenAnimation(o===L.multiplierCardsExist):x.layout.setSkipLogoHiddenAnimation(!0)}))}var Lc,Tc,hc,Ac;!function(x){x[x.Collapse=0]="Collapse",x[x.Expand=1]="Expand",x[x.Nothing=2]="Nothing"}(Lc||(Lc={})),function(x){x.Multiplay="multiplay"}(Tc||(Tc={})),function(x){x[x.Endless=0]="Endless",x[x.Countdown=1]="Countdown",x[x.Hidden=2]="Hidden"}(hc||(hc={}));class Ec extends ix{constructor(x){super(x),this.props=x,this.resizeHappened=!1,this.gameOverlayShiftStandardDevice=15,this.gameOverlayShiftSmallDevice=50,this.topVideoTranslateCoefficient=0,this.collapsedPhases=[s.Qc.BetsClosed],V.Gn(this,{resizeHappened:V.sH,availableRoadsHeight:V.EW,bettingGridScaleFactor:V.EW,mobileOverlayScale:V.EW,bettingGridSize:V.EW,gameOverlayShift:V.EW,gameOverlayTransformStyle:V.EW,overlayShift:V.EW,isBettingDown:V.EW,gameControlsAllowInteraction:V.EW,gameControlsAction:V.EW,bottomPositionStyle:V.EW,topPosition:V.EW,videoScaleFactor:V.EW,videoGradientBackgroundStyle:V.EW,gameGradientOpacity:V.EW,setLayoutClassicBackgroundColors:V.XI,timerStatus:V.EW,setResizeHappened:V.XI.bound});const{device:{isPhone:o},ag:c}=this.props.root;o&&c.actions.layout.mobile.setBackgroundColors(this.mobileGradientColors),this.isDesktopClassic&&this.setLayoutClassicBackgroundColors(),this.props.root.disposeBagCallbacks.push(function(x){let o=null;return()=>V.mJ((()=>x.device.dimensions),(()=>{x.layout.setResizeHappened(!0),o&&(window.clearTimeout(o),o=null),o=window.setTimeout((()=>{x.layout.setResizeHappened(!1)}),200)}),{fireImmediately:!0})}(this.props.root)),this.portrait=function(x){return new oc(x)}(x)}setResizeHappened(x){this.resizeHappened=x}get gameControlsAllowInteraction(){const{gamePhase:{value:x},device:{isPortrait:o}}=this.props.root;return o||!this.blockingInteractionPhases.includes(x)}get blockingInteractionPhases(){return Wo}get availableRoadsHeight(){const{device:x}=this.props.root;if(this.props.root.settings.isBaccaratV4){if(x.isPortrait){const x=this.props.root.device.dimensions,o=.46153846153846156*x.width;return Math.min(o,.25*x.containerHeight)}if(!x.isPortrait&&!x.isDesktop)return 0}if(x.isDesktop||x.isTablet)return 0;const o=this.topPosition||0,{scaledHeight:c}=this.bettingGridScaleFactor,{dangerZone:L,bigDeviceDangerZone:T,buttons:h,predictions:A,buttonsMargin:E}=Jo,H=(x.isPortrait?h+E:0)+(x.isNarrowScreenPhonePortrait?T:L),N=Ko.q1(),Q=x.dimensions.containerHeight-o-c-H-A-N.top-(this.roadsPredictionsContainerBorder?2:0)+this.gameOverlayShift;return Math.max(Math.floor(Q),60)}get bettingGridScaleFactor(){return this.getGameElementScaleFactor(this.bettingGridSize)}get mobileOverlayScale(){const{device:x,gamePhase:o}=this.props.root;if(!o.isBetsOpen){if(x.isTablet)return.8;if(x.isPhone&&x.isLandscape)return.6}return 1}get bettingGridSize(){const{device:x,betSpot:o}=this.props.root;let c=200;return x.isPortrait&&(c=o.isOnlyPairs?197:o.isOnlyMains?149:233),{width:x.isPortrait?364:708,height:c}}get gameOverlayShift(){const{device:x}=this.props.root;return x.isPortrait&&!x.isLargeDevice?x.isSmallDevice?this.gameOverlayShiftSmallDevice:this.gameOverlayShiftStandardDevice:0}get isBettingDown(){const{device:{isPortrait:x},gamePhase:{value:o},device:{isLargeDevice:c}}=this.props.root;return o===s.Qc.Resolved&&x&&!c}get overlayShift(){return this.isBettingDown?40:-this.gameOverlayShift}get gameOverlayTransformStyle(){const{ag:x}=this.props.root,o=x.values.chipstackHidden,c=[];return(0!==this.overlayShift&&!o||this.isBettingDown)&&c.push(`translateY(${this.overlayShift}px)`),c.join("")}get topPosition(){const{device:x}=this.props.root,o=x.isBigDeviceDimensions?0:20,c=x.gameContainerDimensions.height*(this.videoScaleFactor<=1.15?1:Math.min(this.videoScaleFactor,1.3)),L=Ko.q1();return x.isPortrait?Math.floor(c-o-L.top):void 0}get bottomPositionStyle(){return this.props.root.device.isPortrait?"auto":""}get videoScaleFactor(){const{device:x,settings:o}=this.props.root;return o.isBaccaratV4?x.isLandscape&&x.isPhone?x.dimensions.containerHeight>300?.7:.6:1:o.portraitVideoZoom||o.isCameraOnRails?1:x.isPortrait?x.isBigDeviceDimensions?1.3:1.15:1}get commonVideoGradientStyles(){const{isTablet:x,isPortrait:o,gameContainerDimensions:{height:c}}=this.props.root.device,L=c*(x?.13:o?.35:.5)*this.videoScaleFactor;return{height:L,transform:o?`translateY(${c*this.videoScaleFactor-L/2}px)`:`translateY(${c-L}px)`}}get mobileVideoTranslateHeight(){return 0}get videoGradientContainerStyles(){const{settings:x,preferences:o,device:c}=this.props.root,{isPortrait:L,isPhone:T,gameContainerDimensions:h,dimensions:A}=c;if(x.isBaccaratV4){if(c.isPortrait){const x=o.swapStatsAndMedia?this.portrait.videoOffset:0;return{height:A.containerHeight-A.boxHeight-x+40,transform:`translateY(${A.boxHeight-40}px)`}}const{gameContainerDimensions:{height:x}}=this.props.root.device;if(c.isLandscape&&c.isPhone){const o=x*this.videoScaleFactor;return{height:x-o+40,transform:`${`translateY(${o-40}px)`} scaleX(${this.videoScaleFactor-1e-5})`}}if(c.isTablet){const o=A.containerHeight-.6*x;return{height:o,transform:`translateY(${A.containerHeight-o}px)`}}}if(T&&L&&this.videoScaleFactor<=1.15){const{height:x}=h,o=(1.15-1)*(1-this.topVideoTranslateCoefficient),c=Math.floor(x*(.35+2*o)),L=Math.floor(x*(1+o)-c/2);return{height:+c.toFixed(2),transform:`translateY(${L.toFixed(2)}px)`}}return this.commonVideoGradientStyles}get gameColor(){const{settings:{gameColor:x}}=this.props.root;return x?`#${x}`:this.defaultGameColor}get gameUnderlayColor(){const{settings:{gameUnderlayColor:x}}=this.props.root;return x?`#${x}`:"#151515"}get gameGradientOpacity(){return this.props.root.settings.isBaccaratV4&&this.props.root.device.isPhone?0:1}get isBaccaratV4Roads(){return this.props.root.settings.isBaccaratV4&&!this.isDesktopClassic}get isBaccaratV4RoadsMobile(){return!this.props.root.device.isDesktop&&this.isBaccaratV4Roads}get framesAroundRoadsStyles(){if(this.isBaccaratV4Roads&&this.props.root.preferences.isWhiteScorecardTheme)return{stroke:"rgb(161, 161, 161)",strokeWidth:.08}}get roadsPredictionsContainerBackground(){if(this.isBaccaratV4RoadsMobile)return this.props.root.preferences.isWhiteScorecardTheme?"#fff":"#252525"}get roadsPredictionsContainerBorder(){if(this.isBaccaratV4RoadsMobile&&!this.props.root.preferences.isWhiteScorecardTheme&&!this.props.root.device.isLandscape)return"1px solid #555"}get statisticsContainerHeight(){if(this.props.root.settings.isBaccaratV4&&this.props.root.device.isPhone)return 25*this.props.root.layout.portrait.gridScale}get beadRoadDisplayMode(){const{isLandscape:x,isDesktop:o}=this.props.root.device;return this.isBaccaratV4RoadsMobile&&!o&&x?tx.PhonePortraitLive:super.beadRoadDisplayMode}get roadsDisplayMode(){const{isLandscape:x,isDesktop:o}=this.props.root.device;return this.isBaccaratV4RoadsMobile&&!o&&x?mx.TwoLinesPortrait:super.roadsDisplayMode}getScorecardThemesOverrides(x){if(this.isBaccaratV4RoadsMobile){switch(x){case H.RoadType.Big:return{...wo,[H.ScorecardThemeNames.WhiteSolid]:{...wo[H.ScorecardThemeNames.WhiteSolid],translate:.12,size:1.16}};case H.RoadType.Bead:return{...wo,[H.ScorecardThemeNames.WhiteSolid]:{...wo[H.ScorecardThemeNames.WhiteSolid],translate:.12,size:1.165}}}return wo}}get videoGradientBackgroundPhoneBaccaratV4(){var x;const{device:{isPortrait:o,isLandscape:c}}=this.props.root,L=go,T=Go.E2(this.gameColor),h=T&&null!==(x=Go.K6(T))&&void 0!==x?x:[0,0,0],A=h[2]-L[2],E=A<5?Math.min(L[2]-A,3):L[2];return o?`linear-gradient(${`\n                rgba(${T},0) 0%,\n                rgb(${T}) 40px,\n                hsl(${h[0]} ${L[1]}% ${E}%) 50%\n            `})`:c?`linear-gradient(${`\n                rgba(${T},0) 0%,\n                rgb(${T}) 40px,\n                hsl(${h[0]} 70% ${E}%) 100%\n            `})`:void 0}get videoGradientBackgroundStyle(){const{layout:{videoScaleFactor:x},device:{isPortrait:o,isTablet:c,isPhone:L,dimensions:T},settings:h}=this.props.root;if(h.isBaccaratV4){if(L)return this.videoGradientBackgroundPhoneBaccaratV4;if(c){const x=T.containerWidth/T.containerHeight<=1.1?34:40;return`linear-gradient(\n                    180deg, transparent 0%, ${this.gameColor} ${x}%, ${this.gameColor} 100%\n                )`}}const A=Go.E2(this.gameColor),E=Go.E2(this.gameUnderlayColor);return`linear-gradient(${c?`180deg, rgba(${E},0) 0%, rgba(${E},0.75) 48.16%, rgba(${E},1) 100%`:o?x<=1.15?`180deg, rgba(${A},0) 0%, rgba(${A},1) 27%, rgba(${E},1) 100%`:`180deg, rgba(${A},0) 0%, rgba(${A},1) 50%, rgba(${E},0) 100%`:`0deg, rgba(${E},1) 0%, rgba(${E},0) 100%`})`}getGameElementScaleFactor(x,o,c=!1){const{ag:L,device:T}=this.props.root,{width:h,height:A,reverseScale:E=1}=T.gameContainerDimensions,{width:H,height:N}=x;return function(x,o,c,L,T,h,A,E,H,N){const{immersive:Q=.375,classic:I=.6,portrait:k=1,landscape:_=1}=N||{},{width:X}=ao(L,T,o,x,H),r=o===vx.t.Portrait,y=x===yx.OD.Desktop?L*(c?I:Q):X*(r?k:_),{width:v,height:B}=fo(y,Number.MAX_VALUE,A/E);return{scale:qo.GB(v/A,2),scaledWidth:Math.round(v),scaledHeight:Math.round(B),reverseScale:h}}(L.platform,L.values.orientation,this.isDesktopClassic,h,A,E,H,N,c,o)}get gameControlsAction(){const{device:{isPortrait:x},gamePhase:{value:o}}=this.props.root,c=x||o===s.Qc.BetsOpen,L=this.collapsedPhases.includes(o);return c?Lc.Expand:L?Lc.Collapse:Lc.Nothing}setLayoutClassicBackgroundColors(){const{ag:{actions:{layout:x}}}=this.props.root;this.classicGradientColors&&x.classic.setBackgroundColors(this.classicGradientColors)}get isMultiplayAvailable(){const{settings:x,device:o,ag:c}=this.props.root;return x.isMultiplayEnabled&&!o.isTablet&&function(x){var o;if(!window.BUNDLE_MANIFEST)return!1;const c=function(x,o,c=!0,L=window.BUNDLE_MANIFEST){const T=(x.frontend_app||x.game||"lobby").split(",");for(const x of T){const c=x.trim(),T=L.apps[c];if(null==T?void 0:T.assets.length){const x=L.publicPath,h=T.adaptive||("desktop"===o?T.desktop:T.mobile);return{...T,assets:T.assets.map((o=>("number"==typeof o&&(o=L.commonAssets[o]),x+o))),application:c,loader:`${x}${h}`}}}if(c)throw new Error(`Cannot find any of the defined apps: ${T.join(", ")}`)}({game:x},null===(o=window.EVO_LOADER)||void 0===o?void 0:o.deviceInfo.deviceType,!1);return!!(null==c?void 0:c.assets.length)}(h.wq)&&po.Z2(c.values.balanceActiveId)!==Po.D.PlayForFun}get omittedOverlayButtons(){const x=[];return this.isMultiplayAvailable||x.push(Tc.Multiplay),x}get timerStatus(){const{gamePhase:{isBetsOpen:x,isLongBetting:o},settings:{showCountDownTimer:c}}=this.props.root;return x?o||!c?hc.Endless:hc.Countdown:hc.Hidden}get defaultGameColor(){const{settings:{noCommission:x,isPrivateTable:o}}=this.props.root;return o?no.Prive:x?no.NoCommision:no.Default}get mobileGradientColors(){var x;const{settings:o}=this.props.root,{light:c="0,0,0"}=null!==(x=o.brandedClothGradient)&&void 0!==x?x:{};return{light:c,dark:"0,0,0"}}get classicGradientColors(){const{gameResult:{winner:x},settings:{classicLayoutBackgroundColors:o}}=this.props.root;return x?bo[x]:o}}function Hc(x){return V.mJ((()=>({isFlyingWinAvailable:x.flyingWin.animationEnabled,winner:x.gameResult.winner})),(({isFlyingWinAvailable:o,winner:c})=>{o&&c&&x.prediction.resetPrediction()}))}function Nc(x){return[Hc(x)]}class Qc{constructor(x){this.props=x,this._ignoredField=null,this.isLoaded=!1,this.preferences={},V.Gn(this,{isLoaded:V.sH,preferences:V.sH,setPreferences:V.XI,scorecardTheme:V.EW,isWhiteScorecardTheme:V.EW,isAllSideBetsEnabled:V.EW,showOnboardingGameHints:V.EW,welcomeBubbleShownTimes:V.EW,bettingGridBubbleShownTimes:V.EW,volumeMusic:V.EW}),this.props.root.disposeBag.addDisposable(this.props.root.ag.actions.preferences.values.subscribe(V.XI((x=>{x.preferencesAreLoaded&&!this.isLoaded&&(this.isLoaded=x.preferencesAreLoaded),this.setPreferences(x)}))))}getValue(x){return this.preferences[x]}updatePreferenceValue(x,o){this.props.root.ag.actions.preferences.setPreferences({key:x,value:o})}setPreferences(x){this.preferences=x}get scorecardTheme(){return this.preferences.background||this.props.root.settings.scorecardTheme}get isWhiteScorecardTheme(){return this.scorecardTheme===H.ScorecardThemeNames.WhiteSolid}get isAllSideBetsEnabled(){return this.preferences.allSideBets}get showOnboardingGameHints(){return this.preferences[cx.bR]}get welcomeBubbleShownTimes(){return this.preferences.welcomeBubbleShownTimes}get bettingGridBubbleShownTimes(){return this.preferences.bettingGridBubbleShownTimes}get volumeMusic(){return this.preferences.volumeMusic}}!function(x){x.ShowBettingStats="showBettingStats",x.CameraMode="cameraMode",x.SwapStatsAndMedia="swapStatsAndMedia"}(Ac||(Ac={}));class Ic extends Qc{constructor(x){super(x),this.props=x,V.Gn(this,{isAllSideBetsCheckboxDisabled:V.EW,disabledAllSideBetsCheckboxTooltipKey:V.EW,showBettingStats:V.EW,swapStatsAndMedia:V.EW,toggleSwapStatsAndMedia:V.XI.bound})}get showBettingStats(){return this.preferences.showBettingStats}get cameraMode(){return this.preferences.cameraMode}get isAllSideBetsCheckboxDisabled(){const x=this.props.root.reduction.mainOnlyReduction,o=this.props.root.betSpot.hasExtraSideBetsConfigured,c=this.props.root.betSpot.hasExtraSideBetsPlacedBets;return!o||c||x}get disabledAllSideBetsCheckboxTooltipKey(){return this.props.root.reduction.mainOnlyReduction?"tooltip.sixDecksPlayed":"tooltip.hideSideBets"}get swapStatsAndMedia(){return this.preferences.swapStatsAndMedia}toggleSwapStatsAndMedia(){const x=this.swapStatsAndMedia;this.updatePreferenceValue(Ac.SwapStatsAndMedia,!x)}}class kc{constructor(){this.requiredBalance=0,this.currency="",V.Gn(this,{requiredBalance:V.sH,currency:V.sH,setSessionInfo:V.XI.bound})}setSessionInfo(x){this.requiredBalance=x.requiredBalance,this.currency=x.currency}}function _c(x,o){o?(x.ag.actions.chipstack.show(),x.ag.actions.layout.immersive.footer.expand()):(x.ag.actions.chipstack.hide(),x.ag.actions.layout.immersive.footer.collapse())}function Xc(x){return V.mJ((()=>x.gamePhase.isBetsOpen),(o=>{!function(x,o){o||x.tooltip.hideAll()}(x,o)}))}function rc(x){return yc(x,x.gamePhase.isBetsOpen,x.gameResult.winner,x.layout.isDesktopClassic),V.mJ((()=>({isBetsOpen:x.gamePhase.isBetsOpen,winner:x.gameResult.winner,isDesktopClassic:x.layout.isDesktopClassic})),(({isBetsOpen:o,winner:c,isDesktopClassic:L})=>{yc(x,o,c,L)}))}function yc(x,o,c,L){L&&(o||c)&&x.layout.setLayoutClassicBackgroundColors()}function vc(x){const o=x.ag.actions.statusBar;return V.mJ((()=>x.statusBar.gamePhaseProps),(x=>{o.setProps(x)}))}function Bc(x){return V.mJ((()=>x.bets.bets),(o=>x.dealNow.syncStatusWithBets(o)))}const Yc=[s.Qc.NewGame,s.Qc.BetsOpen,s.Qc.Cancelled],Fc=[s.Qc.Dealing,s.Qc.Resolved,s.Qc.BetsClosed];function tc(x){return V.mJ((()=>x.gamePhase.value),(o=>{!function(x,o){Yc.includes(x)?o.actions.balance.resumeBalanceUpdate():Fc.includes(x)&&o.actions.balance.pauseBalanceUpdate()}(o,x.ag)}))}var mc,Cc,Vc,ic;!function(x){x.BetsOpen="BetsOpen",x.BetsClosed="BetsClosed",x.BetsCancelled="Cancelled"}(mc||(mc={})),function(x){x.Idle="Idle",x.Dealing="Dealing",x.Revealing="Revealing",x.Finished="Finished",x.Cancelled="Cancelled"}(Cc||(Cc={})),function(x){x.Multi="multi",x.Single="single"}(Vc||(Vc={})),function(x){x.CameraMode="cameraMode",x.ShowBettingStatistics="showBettingStats"}(ic||(ic={}));var Mc=c(777506),Zc=c(805480);function Sc(x){return V.mJ((()=>({isDesktop:x.device.isDesktop,isDesktopClassic:x.layout.isDesktopClassic,cameraMode:x.preferences.cameraMode,desktopVideoPlaylist:x.settings.desktopVideoPlaylist})),(({isDesktop:o,isDesktopClassic:c,cameraMode:L,desktopVideoPlaylist:T})=>{if(!o)return Zc.VideoPlaylist.Default;const h=x=>x.find((x=>!!T[x])),A={[H.LayoutType.Classic]:{[Vc.Multi]:h([Zc.VideoPlaylist.Classic]),[Vc.Single]:h([Zc.VideoPlaylist.Classic4,Zc.VideoPlaylist.Classic])},[H.LayoutType.ImmersiveV2]:{[Vc.Multi]:h([Zc.VideoPlaylist.Default]),[Vc.Single]:h([Zc.VideoPlaylist.Classic3])}}[c?H.LayoutType.Classic:H.LayoutType.ImmersiveV2][L]||Zc.VideoPlaylist.Default;x.ag.actions.video.setStream(Mc.C(A))}))}var uc=c(266600);class dc{constructor(x){this.props=x,this.payouts={},this.skipAnimation=!1,this.isRedEnvelopeWinAnimation=!1,this.winningBetSpots=[],V.Gn(this,{payouts:V.sH,skipAnimation:V.sH,winningBetSpots:V.sH,isRedEnvelopeWinAnimation:V.sH,setWinningBetSpots:V.XI,handleRedEnvelope:V.XI,winningRedEnvelopeBetSpots:V.EW,hasRedEnvelopeWinning:V.EW,reset:V.XI,runRedEnvelopeWinAnimation:V.XI})}setWinningBetSpots(x){this.winningBetSpots=x}runRedEnvelopeWinAnimation(){this.hasRedEnvelopeWinning&&(this.isRedEnvelopeWinAnimation=!0)}reset(){this.payouts={},this.skipAnimation=!1,this.isRedEnvelopeWinAnimation=!1,this.winningBetSpots=[]}get hasRedEnvelopeWinning(){const x=Object.keys(this.payouts);return this.winningBetSpots.some((o=>x.includes(o)))}get winningRedEnvelopeBetSpots(){return this.skipRedEnvelope?[]:this.winningBetSpots.filter((x=>!!this.payouts[x]))}handleRedEnvelope(x,o=!1){if(!this.props.settings.useRedEnvelopePayouts)return;const c=this.getPayoutsFromGameData(x);if(c&&Object.keys(c).length>0&&!uc.A(this.payouts,c)){const L=!(o||!x.playerHand.cards.length&&!x.bankerHand.cards.length);this.setPayouts(c,L)}}getPayoutsFromGameData(x){switch(this.props.settings.redEnvelopeMath){case A.C.V1:return x.redEnvelopePayouts;case A.C.V2:return x.redEnvelopePayouts_v2}}get skipRedEnvelope(){return this.props.settings.isDualPlay}setPayouts(x,o){this.payouts=x,void 0!==o&&(this.skipAnimation=o)}}function Oc(x){return V.mJ((()=>({payouts:x.redEnvelope.payouts})),(({payouts:o})=>{Object.keys(o).length>0&&x.log.clientRedEnvelopePayoutDisplayed(o)}))}function jc(x){return[Oc(x)]}var ec=c(246250);const qc={[Ux.Banker]:s.K8.Banker,[Ux.Player]:s.K8.Player,[Ux.BankerBonus]:s.K8.BankerBonus,[Ux.BankerPair]:s.K8.BankerPair,[Ux.EitherPair]:s.K8.EitherPair,[Ux.SuperSix]:s.K8.SuperSix,[Ux.PlayerBonus]:s.K8.PlayerBonus,[Ux.PlayerPair]:s.K8.PlayerPair,[Ux.PerfectPair]:s.K8.PerfectPair,[Ux.Tie]:s.K8.Tie},fc={[ec.F.SuperSix]:s.K8.SuperSix,[ec.F.EitherPair]:s.K8.EitherPair,[ec.F.PerfectPair]:s.K8.PerfectPair,[ec.F.BankerBonus]:s.K8.BankerBonus,[ec.F.BankerPair]:s.K8.BankerPair,[ec.F.PlayerBonus]:s.K8.PlayerBonus,[ec.F.PlayerPair]:s.K8.PlayerPair};class Uc{constructor(x){this.props=x,this.limitReductions={},this.coefficientReductions={},this.mainOnlyReduction=!1,V.Gn(this,{limitReductions:V.sH,coefficientReductions:V.sH,mainOnlyReduction:V.sH,setLimitReductions:V.XI,resetLimitReductions:V.XI,handleLimitReduction:V.XI,setIsMainOnlyReduction:V.XI,handleMainOnlyReduction:V.XI,setCoefficientReductions:V.XI,resetCoefficientReductions:V.XI})}handleLimitReduction(x,o,c){if(!this.props.settings.isLimitReductionConfigured)return;const L=this.props.settings.limitReductionsConfig,T=Object.keys(L);if(T.length){const h=this.findCurrentBetSpotReduction(L,T,qc,x);this.setLimitReductions(h),o&&c&&Object.keys(o).some((x=>bx.A(o[x])&&bx.A(h[x])&&o[x]!==h[x]))&&c()}}handleCoefficientReduction(x){if(!this.props.settings.isCoefficientReductionConfigured)return;const o=this.props.settings.coefficientReductionsConfig,c=Object.keys(o);if(c.length){const L=this.findCurrentBetSpotReduction(o,c,fc,x);this.setCoefficientReductions(L)}}resetLimitReductions(){this.limitReductions={}}resetCoefficientReductions(){this.coefficientReductions={}}setLimitReductions(x){this.limitReductions=x}setCoefficientReductions(x){this.coefficientReductions=x}setIsMainOnlyReduction(x){this.mainOnlyReduction=x}handleMainOnlyReduction(x){if(this.props.settings.isMainOnlyReductionConfigured){const o=x>=this.props.settings.mainOnlyReductionThreshold;this.mainOnlyReduction!==o&&this.setIsMainOnlyReduction(o)}}getReductedMaxBetSpotValue(x){const{settings:o}=this.props,c=o.getMaxBetSpotValue(x),L=this.limitReductions[x];return L?Math.floor(c*L):c}findCurrentBetSpotReduction(x,o,c,L){return o.reduce(((o,T)=>{const h=x[T],A=Object.keys(h).map((x=>parseInt(x,10))).sort(((x,o)=>o-x)),E=A.findIndex((x=>L>=x));if(-1!==E){const x=c[T],L=A[E];o[x]=h[L]}return o}),{})}}class sc extends Sx{constructor(){super(...arguments),this.betSpot=new Zx,this.chip=new Zx,this.winAnimation=new Zx,this.winRoads=new Zx,this.roadProbe=new Zx,this.prediction=new Zx,this.roads=new Zx}dispose(){super.dispose(),this.betSpot.dispose(),this.winAnimation.dispose(),this.winRoads.dispose(),this.chip.dispose(),this.roadProbe.dispose(),this.roads.dispose(),this.prediction.dispose()}}var Dc=c(712011);const $c=[c(625678).Z.RNGBaccarat];class ac{constructor(x){this.props=x,this.getMinBetSpotValue=this.getMinBetSpotValue.bind(this),this.getMaxBetSpotValue=this.getMaxBetSpotValue.bind(this)}get currencyCode(){return this.props.settings.getCurrencyCode()}get currencySymbol(){return this.props.settings.getCurrencySymbol()}get redEnvelopeMath(){return this.props.settings.redEnvelopeMath}get currencyDecimals(){return this.props.settings.getCurrencyDecimals()}get tableName(){return this.props.settings.getTableName()}get betsClosingTime(){return this.props.settings.betsClosingTime()}get displayTableLimit(){return this.props.settings.displayTableLimit()}get tableLimits(){return this.props.settings.tableLimits}get tiePays9to1(){return this.props.settings.tiePays9to1}get tableLogo(){const x=this.props.settings.tableLogo;return Dc.d(x)||""}get excludedBeadRoadModes(){return this.props.settings.excludedBeadRoadModes}get scorecardTheme(){return this.props.settings.scorecardTheme||H.ScorecardThemeNames.WhiteSolid}get isMainBetsOnly(){return this.props.settings.mainBetsOnly}get isRng(){return $c.includes(this.props.settings.getGameType())}get prefixMinMax(){return this.props.settings.getPrefixMinMax()}get postfixMin(){return this.props.settings.getPostfixMin()}get postfixMax(){return this.props.settings.getPostfixMax()}get rawConfig(){return this.props.settings.rawConfig}get isFrozenSprites(){return this.props.settings.isFrozenSprites}get minTableLimit(){const{max:x,min:o}=this.props.settings.tableLimits;return o&&x?o:0}get maxTableLimit(){const{max:x,min:o}=this.props.settings.tableLimits;return x&&o?x:0}get payoutLimit(){return this.props.settings.payoutLimit()||0}getMinBetSpotValue(x){const{rawConfig:o}=this.props.settings;return+o[`${this.prefixMinMax}${R.C(x)}_${this.postfixMin}`]}getMaxBetSpotValue(x){const{rawConfig:o}=this.props.settings;return+o[`${this.prefixMinMax}${R.C(x)}_${this.postfixMax}`]}get useRedEnvelopePayouts(){return this.props.settings.isRedEnvelope}get sessionId(){return this.props.settings.sessionId()}get tableId(){return this.props.settings.getTableId()}get virtualTableId(){return this.props.settings.getVirtualTableId()}get volatility(){return this.props.settings.volatility}get hideYouWinOnLowCelebration(){return this.props.settings.hideYouWinOnLowCelebration()}}var zc=c(523737);const lc=[ec.F.SuperSix,ec.F.PerfectPair,ec.F.BankerBonus,ec.F.PlayerBonus],Gc={[Dx.BetsOpen]:s.Qc.BetsOpen,[Dx.BetsClosed]:s.Qc.BetsClosed,[Dx.Dealing]:s.Qc.Dealing,[Dx.Resolved]:s.Qc.Resolved};function pc(x){const o={};return Object.keys(x).forEach((c=>{const L=x[c];(function(x){return k(x)&&Object.values(Ux).includes(x)})(c)&&k(L)&&L&&(o[c]=L)})),o}function Pc(x){const o={};return Object.keys(ec.F).forEach((c=>{const L=ec.F[c],T=x[L];T&&k(T)&&(o[L]=T)})),o}class Kc extends ac{constructor(x){super(x),this.props=x}get privateTableWarningMinutes(){return this.props.settings.privateTableWarningMinutes()}get portraitVideoZoom(){return this.props.settings.portraitVideoZoom}get isBaccaratV4(){return this.props.settings.isBaccaratV4}get isCameraOnRails(){return!!this.props.settings.cameraOnRails.address}get noCommission(){return this.props.settings.noCommission()}get isLimitReductionConfigured(){return Object.values(this.props.settings.limitReductions).some(Boolean)}get isCoefficientReductionConfigured(){return!!this.props.settings.coefficientReductions}get limitReductionsConfig(){return Object.keys(this.props.settings.limitReductions).reduce(((x,o)=>{const c=this.props.settings.limitReductions[o];return c&&(x[o]=this.buildReductionLimitMap(c)),x}),{})}get coefficientReductionsConfig(){return(g.A(this.props.settings.coefficientReductions)?lc:Object.keys(this.props.settings.coefficientReductions)).reduce(((x,o)=>{const c=this.getCoefficientReduction(o);return c&&(x[o]=this.buildReductionLimitMap(c)),this.modifyCoefficientReduction(x,o),x}),{})}get cameraOnRails(){return this.props.settings.cameraOnRails}get isMainOnlyReductionConfigured(){return!!this.mainOnlyReductionRawThreshold}get hieroglyphsVisible(){const x=E.lr().iso.toLowerCase();return!this.props.settings.hideHieroglyphsIsoLangs().some((o=>o.toLowerCase()===x))}get mainOnlyReductionThreshold(){return function(x=""){const o=parseInt(x,10);return Number.isNaN(o)?(console.error("Wrong mainOnly reduction configuration, please check cards_out_to_trigger_main_only in table config"),416):o}(this.mainOnlyReductionRawThreshold)}get isDualPlay(){return this.props.settings.dualPlay()}get mainOnlyReductionRawThreshold(){return this.props.settings.mainOnlyReductionRawThreshold}get superSixMainBetsPercentage(){const{parsedTableConfig:x}=this.props.settings;return x.super_six_main_bets_percentage||100}get bonusToMainBetsPercentage(){const{parsedTableConfig:x}=this.props.settings;return x.bonus_main_bets_percentage||100}get isLowRisk(){const{parsedTableConfig:x}=this.props.settings;return!0===x.low_risk}get cardDealDelay(){const{parsedTableConfig:x}=this.props.settings;return x.card_delay||0}get gameResultDelay(){const{parsedTableConfig:x}=this.props.settings;return x.result_delay||0}get cardRevealDelay(){const{parsedTableConfig:x}=this.props.settings;return x.card_reveal||0}get gameColor(){const{rawConfig:x}=this.props.settings;return x.commonGameColor}get gameUnderlayColor(){const{rawConfig:x}=this.props.settings;return x.gameUnderlayColor}get isPrivateTable(){return this.props.settings.isPrivateTable()}get brandedClothGradient(){return this.props.settings.brandedClothGradient()}get betSpotLimits(){return this.props.settings.betSpotLimits}get freeHandsLimit(){return this.props.settings.freeHandsLimit}get dealNowMaxPlayers(){return this.props.settings.dealNowMaxPlayers()}get chipAmounts(){return this.props.settings.getChipAmounts()}get footerGradientHeight(){return this.props.settings.footerGradientHeight||this.isBaccaratV4?33:24.5}get classicLayoutBackgroundColors(){return this.props.settings.classicLayoutBackgroundColors()}get isMultiplayEnabled(){return this.props.settings.isMultiplayEnabled()}get desktopVideoPlaylist(){return this.props.settings.getDesktopVideoPlaylist()}get limitConfig(){return this.props.settings.limitConfig}get allowSpendingLowerThanSmallestChip(){return this.props.settings.allowSpendingLowerThanSmallestChip()}get showCountDownTimer(){return this.props.settings.showCountDownTimer()}get betweenGamesTime(){return this.props.settings.betweenGamesTime}modifyCoefficientReduction(x,o){var c;const L=lc.includes(o);x[o]||!L?x[o]&&L&&!(null===(c=x[o])||void 0===c?void 0:c[0])&&(x[o][0]=1):x[o]={0:1}}getCoefficientReduction(x){const o=this.props.settings.coefficientReductions[x];if(lc.includes(x)&&!o){const o=x===ec.F.SuperSix;return`0:${zc.J0.divide(o?this.superSixMainBetsPercentage:this.bonusToMainBetsPercentage,100)}`}return o}buildReductionLimitMap(x){return x.split(";").filter(Boolean).reduce(((x,o)=>{const[c,L]=o.split(":");return x[c]=Number(L),x}),{})}}var Jc;!function(x){x.GameOpenedBetsClosed="gameOpenedBetsClosed",x.GameOpenedBetsOpen="gameOpenedBetsOpen",x.BetsOpen="betsOpen",x.BetsOpenCountDown="betsOpenCountDown",x.BetsClosed="betsClosed",x.GameResult="gameResult",x.GameResultWinTie="gameResultWinTie",x.GameResultWinTieWithEffect="gameResultWinTieWithEffect",x.GameResultWin="gameResultWin",x.GameResultWinWithEffect="gameResultWinWithEffect"}(Jc||(Jc={}));class nc extends Ox{constructor(){super(...arguments),this.winTypeToWinEventArgMap={[Cx.R.Small]:0,[Cx.R.Medium]:1,[Cx.R.Big]:2}}playBetsOpen(){this.fireSoundEvent(Jc.BetsOpen)}playBetsOpenCountDown(x){this.fireSoundEvent(Jc.BetsOpenCountDown,x)}playBetsClosed(){this.fireSoundEvent(Jc.BetsClosed)}playGameOpenedBetsOpen(){this.fireSoundEvent(Jc.GameOpenedBetsOpen)}playGameOpenedBetsClosed(){this.fireSoundEvent(Jc.GameOpenedBetsClosed)}playGameResult(){this.fireSoundEvent(Jc.GameResult)}playGameResultWinTie(x){this.fireSoundEvent(Jc.GameResultWinTie,this.winTypeToWinEventArgMap[x])}playGameResultWinTieWithEffect(x){this.fireSoundEvent(Jc.GameResultWinTieWithEffect,this.winTypeToWinEventArgMap[x])}playGameResultWin(x){this.fireSoundEvent(Jc.GameResultWin,this.winTypeToWinEventArgMap[x])}playGameResultWinWithEffect(x){this.fireSoundEvent(Jc.GameResultWinWithEffect,this.winTypeToWinEventArgMap[x])}}function bc(x){let o=!1;return V.mJ((()=>({gamePhase:x.gamePhase.value,betsOpen:x.gamePhase.isBetsOpen})),(({betsOpen:c})=>{o||(c?x.sounds.playGameOpenedBetsOpen():x.sounds.playGameOpenedBetsClosed(),o=!0)}))}function Wc(x){return V.mJ((()=>x.gamePhase.isBetsOpen),(o=>{o?x.sounds.playBetsOpen():x.sounds.playBetsClosed()}))}function wc(x){return V.mJ((()=>({winner:x.gameResult.winner,winType:x.gameResult.winType,withEffect:x.gameResult.withEffect})),(({winner:o,winType:c,withEffect:L})=>{if(o){if(c===Cx.R.None)return void x.sounds.playGameResult();switch(o){case s.K8.Tie:L?x.sounds.playGameResultWinTieWithEffect(c):x.sounds.playGameResultWinTie(c);break;case s.K8.Player:case s.K8.Banker:L?x.sounds.playGameResultWinWithEffect(c):x.sounds.playGameResultWin(c)}}}))}function gc(x){return V.mJ((()=>x.timer.timeRemaining),(o=>{x.sounds.playBetsOpenCountDown(o)}))}function Rc(x){return[gc(x),bc(x),Wc(x),wc(x)]}var xL=c(587698);const oL=()=>({color:"grey",text:E.Tl("trafficlight.waitForNextGame2")}),cL={[s.K8.Banker]:{type:"gradient",stroke:"#FF0000",gradientStart:"#FF0000",gradientEnd:"#720000"},[s.K8.Player]:{type:"gradient",stroke:"#0067FF",gradientStart:"#0067FF",gradientEnd:"#002E72"},[s.K8.Tie]:{type:"gradient",stroke:"#3FA713",gradientStart:"#3FA713",gradientEnd:"#345211"}};class LL{constructor(x){this.props=x,V.Gn(this,{gamePhaseProps:V.EW})}get colors(){return cL}get gamePhaseProps(){switch(this.props.root.gamePhase.value){case s.Qc.Cancelled:return this.gameCancelledProps;case s.Qc.Dealing:return this.dealingProps;case s.Qc.Revealing:return this.revealingProps;case s.Qc.BetsClosed:return this.betsClosedProps;case s.Qc.Resolved:return this.gameResolvedProps;case s.Qc.BetsOpen:return this.betsOpenProps;default:return oL()}}get gameCancelledProps(){return{color:"grey",text:E.Tl("gamecancelled")}}get revealingProps(){return{color:"grey",text:this.props.root.ag.balanceTotalBet?E.Tl("trafficlight.revealing"):E.Tl("trafficlight.waitForNextGame2")}}get dealingProps(){return{color:"grey",text:this.props.root.ag.balanceTotalBet?E.Tl("dealing"):E.Tl("trafficlight.waitForNextGame2")}}get betsOpenProps(){const{timer:{timeRemaining:x},settings:{betsClosingTime:o,isDualPlay:c,isPrivateTable:L,showCountDownTimer:T},gamePhase:{isLongBetting:h}}=this.props.root,A=h||L||!T?void 0:{startTime:Date.now(),secondsInitial:x,animationStartValue:o/1e3};return{color:"green",text:E.Tl("placebets"),animate:!c,autoCountdown:A}}get betsClosedProps(){const{bets:{status:x,rejectedBets:o},ag:{values:{currencySymbol:c},balanceTotalBet:L}}=this.props.root;switch(x){case s.uB.Accepted:return o?{color:"grey",text:E.Tl("trafficlight.acceptedAmount.new",{amount:xL.ej(L,{currencySymbol:c})})}:{color:"grey",text:E.Tl("betsaccepted")};case s.uB.Rejected:return{color:"red",text:E.Tl("betsrejected")};default:return{color:"red",text:E.Tl("nomorebets")}}}get gameResolvedProps(){const{gameResult:{winner:x},layout:{isDesktopClassic:o}}=this.props.root;if(!x)return oL();const c=x===s.K8.Tie?x:`${x}handwins`;return{text:E.Tl(c.toLowerCase()),...o?{customColors:this.colors[x]}:{color:"gold"}}}}class TL{constructor(){this.timeRemaining=0,this.initialSeconds=0,this.skipHandling=!1,V.Gn(this,{timeRemaining:V.sH,initialSeconds:V.sH,skipHandling:V.sH,setSkipHandling:V.XI.bound,setTimeRemaining:V.XI,runTimer:V.XI})}setTimeRemaining(x,o,c=!1){this.timeRemaining=Math.ceil(x/1e3),this.initialSeconds=Math.ceil(o/1e3),this.stopTimer(),c&&this.runTimer(Date.now()+x)}dispose(){this.stopTimer()}stopTimer(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}setSkipHandling(x){this.skipHandling=x}runTimer(x){const o=x-Date.now(),c=Math.ceil(o/1e3),L=o%1e3||1e3;this.timeRemaining=c,c>0&&(this.timeoutId=setTimeout((()=>{this.runTimer(x)}),L))}}function hL(x){const{timer:o,ag:c,settings:L,layout:T}=x,{decisionTimer:h}=c.actions;return h.setValueAnimationStart(x.settings.betsClosingTime/1e3),V.mJ((()=>({timerStatus:T.timerStatus,initialSeconds:o.initialSeconds,timeRemaining:o.timeRemaining,isPrivateTable:L.isPrivateTable,skipHandling:o.skipHandling})),(({timerStatus:x,initialSeconds:o,timeRemaining:c,isPrivateTable:L,skipHandling:T})=>{L||T||function(x,o,c,L){switch(x.setStartTime(Date.now()),x.show(),o){case hc.Countdown:x.setIsCountdown(!0),x.setCountdownFromSeconds(c),x.setStartTime(Date.now()-1e3*(c-L));break;case hc.Endless:x.setIsCountdown(!1),x.setCountdownFromSeconds(1/0);break;case hc.Hidden:x.hide()}}(h,x,o,c)}))}var AL;!function(x){x.BetSpotValidation="BetSpotValidation",x.DealNowButton="DealNowTooltipId",x.RoadGrid="RoadGrid",x.BeadRoadGrid="BeadRoadGrid"}(AL||(AL={}));class EL{constructor(x){this.props=x,this.hideByType=this.hideByType.bind(this)}showBetSpotTooltip(x){const{betSpot:o,text:c}=x,{ag:L,reference:T}=this.props,h=T.chip.get(o);if(!h)return;const A=L.values.gameDimensions,E=h.getBoundingClientRect(),H=`${AL.BetSpotValidation}-${o}`;this.show({type:H,label:c,top:Math.round(E.top+E.height/10-A.top),left:Math.round(E.left+E.width/2-A.left),dataType:H})}showDealNowTooltip(x,o){const c=this.props.ag.values.gameDimensions,L=c.reverseScale||1;this.show({type:AL.DealNowButton,left:Math.round(o.left+o.width/2-c.left),labelTranslationId:x,top:Math.round(o.top+6*L-c.top),dataType:AL.DealNowButton})}hideDealNowTooltip(){this.hideByType(AL.DealNowButton)}showRoadGridTooltip(x,o){this.showGridTooltip(x,o,AL.RoadGrid)}showBeadRoadGridTooltip(x,o){this.showGridTooltip(x,o,AL.BeadRoadGrid)}hideRoadGridTooltip(){this.hideByType(AL.RoadGrid)}hideBeadRoadGridTooltip(){this.hideByType(AL.BeadRoadGrid)}hideAll(){this.props.ag.actions.tooltips.hideAll()}hideByType(x){this.props.ag.actions.tooltips.hideByType(x)}show(x){this.props.ag.actions.tooltips.add(x)}showGridTooltip(x,o,c){const{gameDimensions:L}=this.props.ag.values,T=L.reverseScale||1;this.hideAll(),this.show({labelTranslationId:x,type:c,left:Math.round(o.left+o.width/2-L.left),top:Math.round(o.top+6*T-L.top),hasAnchor:!0,dataType:c})}}class HL extends jx{constructor(x){super(x),this.settings=function(x){return new Kc(x)}({settings:x.settings}),this.preferences=function(x){return new Ic(x)}({root:this}),this.reduction=function(x){return new Uc(x)}({settings:this.settings}),this.layout=function(x){return new Ec(x)}({root:this}),this.timer=new TL,this.betSpot=function(x){return new Ao(x)}({root:this}),this.bettingStatistics=new Ho,this.private=new kc,this.log=function(x){return new $x(x)}({root:this}),this.redEnvelope=(x=>new dc(x))({settings:this.settings}),this.betProcessor=Px.P({root:this}),this.reference=new sc,this.dealNow=function(x){return new yo(x)}({root:this}),this.tooltip=function(x){return new EL(x)}({ag:this.ag,reference:this.reference}),this.flyingChips=function(x){return new mo(x)}({reference:this.reference}),this.draggableChip=new vo,this.balance=function(x){return new Gx(x)}({root:this}),this.statusBar=function(x){return new LL(x)}({root:this}),this.sounds=new nc,this.gameCycle=function(x){return new eo(x)}({root:this}),this.flyingWin=new uo,this.flyingProbes=new Vo,this.settings.isBaccaratV4&&(this.device.isDesktop||this.flyingWin.setAnimationEnabled(!0),this.flyingProbes.setAvailable(!0)),this.settings.isCameraOnRails&&(this.videoZoom=function(x){return new ax(x)}({root:this}))}reset(){this.gameResult.reset(),this.flyingWin.reset(),this.bets.reset()}initDisposables(x){var o;super.initDisposables(x),this.disposeBag.addDisposables([this.timer,hL(this),(o=this,_c(o,o.gamePhase.isBetsOpen),V.mJ((()=>o.gamePhase.isBetsOpen),(x=>_c(o,x)))),Xc(this),px(this),rc(this),vc(this),Kx(this),Jx(this),nx(this),Bc(this),tc(this),Sc(this),...Rc(this),...jc(this),...Nc(this),this.ag.actions.betting.undo.subscribe(this.betProcessor.undo.bind(this)),this.ag.actions.betting.undoAll.subscribe(this.betProcessor.undoAll.bind(this)),this.ag.actions.betting.repeat.subscribe(this.betProcessor.repeat.bind(this)),this.ag.actions.betting.double.subscribe(this.betProcessor.double.bind(this))])}}class NL extends Yo{constructor(x){super("FlyingFee-move"),this.props=x}flyFromBetSpot(x,o,c){if(!this.animationEnabled)return;const{fee:L}=this.props;this.startAnimation([{from:x,to:[c],value:L.getFeeAmount(o).toString()}])}flyFromBetSpots(x,o){if(!this.animationEnabled)return;const c=Object.keys(x);if(c.length){const{fee:L}=this.props,T=[];for(const h of c){const c=x[h];c&&T.push({from:h,to:[o],value:L.getFeeAmount(c).toString()})}this.startAnimation(T)}}}function QL(x){return V.mJ((()=>x.ag.currentLayout),(()=>{x.flyingFee.playHideAnimations()}))}function IL(x){return V.mJ((()=>({videoScaleFactor:x.layout.videoScaleFactor,isBaccaratV4:x.settings.isBaccaratV4})),(({videoScaleFactor:o,isBaccaratV4:c})=>{o<1&&c&&x.ag.actions.video.mobile.disableScaleAnimation(),x.ag.actions.video.mobile.setScale(o)}),{fireImmediately:!0})}function kL(x){return V.mJ((()=>x.layout.mobileVideoTranslateHeight),(o=>{x.ag.actions.video.mobile.setTranslate(`0px, ${o}px`)}),{fireImmediately:!0})}var _L,XL,rL=c(660622);!function(x){x.GameState="baccarat.gameState",x.BettingStatistics="baccarat.bettingStats",x.PotentialMultipliers="baccarat.potentialMultipliers",x.CardDealt="baccarat.cardDealt",x.CardsRevealed="baccarat.cardsRevealed",x.CardsCleared="baccarat.cardsCleared",x.CardsDealSoon="baccarat.virtual.CARDS_WILL_DEAL_SOON",x.TableState="baccarat.tableState",x.NewGame="baccarat.newGame",x.Winners="baccarat.gameWinners",x.Resolved="baccarat.resolved",x.PrivateTablesSessionInfo="privateTables.sessionInfo",x.PrivateTablesIdleWarning="privateTables.idleWarning",x.PrivateTablesProlongStatus="privateTables.prolongStatus",x.EncodedShoeState="baccarat.encodedShoeState",x.PlayerBettingState="baccarat.playerBettingState",x.DealNowState="baccarat.dealNowState",x.BetResponse="baccarat.playerBetResponse"}(_L||(_L={})),function(x){x.Bet="baccarat.playerBetRequest",x.DealNow="baccarat.dealNow"}(XL||(XL={}));const yL=new Set([_L.TableState,_L.BettingStatistics,_L.DealNowState,_L.PrivateTablesIdleWarning,_L.PrivateTablesSessionInfo,_L.PrivateTablesProlongStatus,rL.G.Subscribe,rL.G.Pong]),vL=new Set([s.Qc.NewGame,s.Qc.Resolved]),BL=new Set([s.uB.Accepted,s.uB.Rejected]),YL=new Set([_L.Resolved,_L.EncodedShoeState,_L.Winners]),FL=function(){let x=0;return(o,c)=>{const L=o.type,T=o.timestamp?+o.timestamp:0,{cardDealDelay:h,cardRevealDelay:A,gameResultDelay:E}=c.settings;if(L===_L.CardDealt){const o=T+h;return x=o,o}return L===_L.CardsRevealed?Math.max(x,T+A):YL.has(L)&&!vL.has(c.gamePhase.value)?T+Math.max(h,E):T}}();var tL,mL,CL=c(80300);class VL{constructor(x){this.isConnected=!1,this.transport=x.transport,V.Gn(this,{isConnected:V.sH,setIsConnected:V.XI,sendMessage:V.XI})}addHandler(x){this.transport.incomingMessages.onValue(x)}sendMessage(x){this.transport.sendStandardMessage(null,x).catch((()=>{}))}setIsConnected(x){this.isConnected=x}}class iL extends VL{constructor(x){super(x)}sendMessage(x){super.sendMessage(x)}}!function(x){x.Lightning="Lightning"}(tL||(tL={})),function(x){x.Betting="Betting",x.Accepted="Accepted",x.BetsAccepted="Accepted",x.Rejected="Rejected",x.BetsRejected="Rejected",x.Cancelled="Cancelled",x.Idle="Idle"}(mL||(mL={}));var ML=c(294851),ZL=c(885537);const SL=({playerHand:x,bankerHand:o})=>({[_x.U.Player]:x,[_x.U.Banker]:o});function uL(x,o=!1){o||x.bets.reset(),x.flyingWin.reset(),x.gameResult.reset(),x.cards.resetHands(),x.gamePhase.setPhase(s.Qc.NewGame),x.redEnvelope.reset(),x.reduction.resetLimitReductions(),x.reduction.resetCoefficientReductions()}function dL(x,o){x.gameNumber&&o.ag.actions.setGameTime(x.gameNumber),o.ag.actions.setGameRoundId(x.gameId)}function OL(x,o,c){const{betting:L,timeRemaining:T,timeInitial:h}=x;if(L===mc.BetsOpen&&T){const x=Math.max(0,T-c);o.timer.setTimeRemaining(x,h||T,!0)}}function jL(x,o){const{betting:c,dealing:L}=x;c===mc.BetsOpen?(o.gamePhase.setIsLongBetting(L===Cc.Dealing),o.gamePhase.setPhase(s.Qc.BetsOpen)):c===mc.BetsClosed&&L===Cc.Idle?(o.ag.actions.winnersList.hide(),o.gamePhase.setPhase(s.Qc.BetsClosed),o.dealNow.disableFeature()):L===Cc.Dealing?o.gamePhase.setPhase(s.Qc.Dealing):L===Cc.Revealing?o.gamePhase.setPhase(s.Qc.Revealing):L===Cc.Cancelled&&(o.gamePhase.setPhase(s.Qc.Cancelled),o.timer.setTimeRemaining(0,0),o.cards.resetHands(),o.ag.actions.toasts.show({type:ML.C.ErrorMessageToast,props:{title:E.Tl(ZL.Y6),reason:ZL.y$(ZL.D2),description:E.Tl(ZL.D2)}}),o.dealNow.disableFeature())}function eL(x){return x?Object.keys(x).reduce(((o,c)=>(function(x){return x in s.K8}(c)&&(o[c]=x[c]),o)),{}):{}}function qL(x,o,c){(function(x,o,c=""){const{status:L,balance:T,balances:h,rejectedBets:A,history:H,bets:N,repeat:Q,log:I}=o,k=o.totalAmount||0,_=x.ag.values.balanceTotalBet||0,X=L===mL.Cancelled;if(k===_||X||(x.ag.actions.balance.setTotalBet(k),L!==mL.Betting&&0!==k||x.ag.actions.balance.reserveBet(k)),L===mL.BetsAccepted&&(x.ag.actions.balance.reserveBet(0),(null==h?void 0:h.length)?x.ag.actions.balance.updateFromPayload({balances:h},c):"number"==typeof T&&x.ag.actions.balance.updateFromPayload({balance:T},c),A&&function(x,o){for(const c of Object.keys(o)){const L=o[c];if(L){const o=+L.error;x.ag.actions.toasts.show({type:ML.C.ErrorMessageToast,props:{title:E.Tl("betsPartiallyAccepted"),description:E.Tl("trafficlight.acceptedAmount.new",{amount:xL.ej(x.ag.values.balanceTotalBet,{currencySymbol:x.ag.values.currencySymbol})}),reason:ZL.y$(`error_${o}`)}});break}}}(x,A)),L===mL.BetsRejected&&x.ag.actions.balance.reserveBet(0),X){const o=_,L=x.ag.availableBalance+o,T=x.ag.values.balanceReservedTip;x.ag.actions.balance.reserveBet(0),x.ag.actions.balance.setTotalBet(0),x.ag.actions.balance.updateFromPayload({balance:L+T},c)}L===mL.BetsRejected&&A&&function(x,o){for(const c of Object.keys(o)){const L=o[c];if(L){const o=+L.error;ZL.O4[o]&&x.ag.actions.handleError({errorId:`error_${o}`});break}}}(x,A),[mL.BetsRejected,mL.BetsAccepted].includes(L)&&A&&function(x,o){const c={},L=x.bets.rejectedBets;for(const x of Object.keys(o)){const T=o[x],h=null==L?void 0:L[x];T&&!h&&(c[x]=T.amount)}g.A(c)||x.flyingChips.flyFromBetSpotsExactAmounts(c)}(x,A),x.log.clientBetAcceptedRejected({...o,...I}),x.bets.updateBetsState({history:H,bets:X?{}:N,status:L,rejectedBets:A,repeat:Q})})(x,function(x){const o=x.canRepeat.AllBets&&Object.keys(x.lastGameChips).length;return{history:x.chipHistory?x.chipHistory.map(eL).reverse():[],balance:po.l2(x),balances:x.balances,originalBets:x.originalBets,acceptedBets:Object.keys(x.acceptedBets).length?x.acceptedBets:void 0,rejectedBets:Object.keys(x.rejectedBets).length?x.rejectedBets:void 0,totalAmount:x.totalAmount,bets:eL(x.currentChips),status:x.status||mL.Idle,repeat:o?eL(x.lastGameChips):void 0,log:{repeat:o?x.lastGameChips:void 0}}}(o),c)}var fL=c(947548),UL=c(671984);function sL(x={}){return Object.keys(x).reduce(((o,c)=>{const L=x[c];return void 0!==L?o+(L.payoff||0):o}),0)}function DL(x={}){return Object.values(x).reduce(((x,o)=>x+((null==o?void 0:o.amount)||0)),0)}var $L,aL=c(969695);function zL(x,o,c){var L;switch(x.type){case rL.G.Subscribe:o.ag.actions.video.sync.skipPastEvents(null!==(L=x.timestamp)&&void 0!==L?L:0),o.reset();break;case _L.NewGame:!function(x,o){uL(o),dL(x.payload,o);const{shoeCardsOut:c}=x.payload;o.reduction.handleLimitReduction(c,o.reduction.limitReductions,(()=>{o.ag.actions.toasts.show({type:ML.C.GenericToast,props:{title:E.Tl("limitsChanged_uppercase"),description:E.Tl("openLimits")}})})),o.reduction.handleCoefficientReduction(c),o.reduction.handleMainOnlyReduction(c)}(x,o);break;case _L.TableState:!function(x,o,c){var L;uL(o,(null===(L=x.payload.currentGame)||void 0===L?void 0:L.dealing)===Cc.Dealing),x.payload.dealer&&o.ag.actions.setDealer(x.payload.dealer.screenName);const T=x.payload.currentGame;if(!T)return;dL(T,o);const h=SL(T.gameData);o.cards.setHands(h),jL(T,o),OL(T,o,c);const{shoeCardsOut:A}=x.payload;o.reduction.handleLimitReduction(A),o.reduction.handleCoefficientReduction(A),o.reduction.handleMainOnlyReduction(A),o.redEnvelope.handleRedEnvelope(T.gameData)}(x,o,c);break;case _L.GameState:!function(x,o,c){const{payload:L}=x;if(jL(L,o),OL(L,o,c),o.cards.cleared){const{playerHand:c,bankerHand:L}=x.payload.gameData;o.cards.setHands({[_x.U.Player]:c,[_x.U.Banker]:L}),o.cards.setCleared(!1)}o.redEnvelope.handleRedEnvelope(L.gameData,!0)}(x,o,c);break;case _L.CardDealt:!function(x,o){o.cards.setDealSoon(!1);const c=SL(x);o.cards.setHands(c)}(x.payload.gameData,o);break;case _L.CardsRevealed:!function(x,o){const c=SL(x);o.cards.setHands(c)}(x.payload.gameData,o);break;case _L.CardsCleared:!function(x){x.cards.resetHands(),x.cards.setDealSoon(!1),x.cards.setCleared(!0)}(o);break;case _L.CardsDealSoon:!function(x){x.cards.setDealSoon(!0)}(o);break;case _L.Winners:!function(x,o){const c=aL.kP({type:aL.Jh.Baccarat,winners:x.payload.winners});x.payload.totalWinners&&x.payload.totalAmount&&c.push(aL.Ko(x.payload.totalWinners,x.payload.totalAmount)),o.ag.actions.winnersList.setWinners(c)}(x,o);break;case _L.Resolved:(function(x,o){const{payload:c,id:L}=x;var T,A;o.gamePhase.setPhase(s.Qc.Resolved),o.ag.actions.lifecycle.resolveGame(),c.bets&&qL(o,(T=c.bets,{...T,currentChips:(A=T.acceptedBets,Object.keys(A).reduce(((x,o)=>{const c=A[o];return void 0!==c&&(x[o]=c.payoff),x}),{}))}),L);const E=function(x){var o,c;const L=(null===(o=x.bets)||void 0===o?void 0:o.acceptedBets)||{};return{winner:x.result.winner||"",winningBetSpots:x.winningSpots||[],amount:sL(L),acceptedBetsAmount:DL(L),winType:(null===(c=x.bets)||void 0===c?void 0:c.winType)||Cx.R.None,betsAcceptedBetSpots:Object.keys(L)}}(c);E.winningBetSpots.length>0&&E.amount>0&&setTimeout((()=>{const x=E.winningBetSpots.reduce(((x,c)=>(x[c]=o.bets.getBetSpotValue(c),x)),{}),c=o.ag.values.chipstackHidden?"balanceLabelKey":h.iG;o.flyingChips.flyFromBetSpotsExactAmounts(x,c),o.bets.reset(),o.sounds.playChipStackSound(),o.ag.actions.balance.reserveBet(0),o.ag.actions.balance.setTotalBet(0)}),UL.w.winFlybackDelay),V.h5((()=>{var c;o.gameResult.setGameResultData(E),o.gameResult.setWithEffect(null!==(c=x.payload.withLightning)&&void 0!==c&&c)}));const H=function(x){var o;return Object.keys((null===(o=x.bets)||void 0===o?void 0:o.acceptedBets)||{}).filter((o=>x.winningSpots.includes(o)))}(c);o.redEnvelope.setWinningBetSpots(H)})(x,o);break;case _L.PrivateTablesSessionInfo:!function(x,o){const{requiredBalance:c,currency:L}=x.payload;o.private.setSessionInfo({requiredBalance:c,currency:L})}(x,o);break;case _L.PrivateTablesIdleWarning:!function(x){x.log.clientReceivedPrivateTableIdleWarning(),x.ag.actions.popups.open(fL.cB({minutes:x.settings.privateTableWarningMinutes,callback:()=>x.log.clientPressedPrivateTableIdleWarningOk()}))}(o);break;case _L.PrivateTablesProlongStatus:!function(x,o){o.ag.actions.popups.open(fL.W6({message:E.Tl("privateTable.sessionProlonged",{minutes:x.payload.occupiedForMinutes}),buttonIds:["Ok"]}))}(x,o);break;case _L.BettingStatistics:!function(x,o){o.bettingStatistics.setStatistics(x.payload.stats)}(x,o);break;case _L.EncodedShoeState:!function(x,o){o.shoe.setShoeData(x.payload)}(x,o);break;case _L.PlayerBettingState:!function(x,o){o.gamePhase.value!==s.Qc.Resolved&&qL(o,x.payload.state,x.id)}(x,o);break;case _L.DealNowState:!function(x,o){o.dealNow.handleDealNowStateMessage({isButtonPressed:x.payload.buttonPressed,idleRoundsLeft:x.payload.privateTableDealNowIdleRoundsLeft})}(x,o);break;case _L.BetResponse:o.log.clientBetResponse(x.payload)}}function lL(x,o,c){var L;switch(x.type){case _L.CardsCleared:zL(x,o,c),o.multipliers.reset();break;case _L.TableState:zL(x,o,c),function(x){return x.type===_L.TableState}(x)&&((null===(L=x.payload.currentGame)||void 0===L?void 0:L.gameData.multipliers)?o.multipliers.setMultipliers(x.payload.currentGame.gameData.multipliers):(o.multipliers.setMultipliers([]),o.multipliers.setPotentialMultipliers({})));break;case _L.PotentialMultipliers:o.multipliers.setPotentialMultipliers(x.payload.multipliers);break;case _L.GameState:case _L.CardsRevealed:case _L.CardDealt:zL(x,o,c),function(x){return x.type===_L.GameState||x.type===_L.CardsRevealed||x.type===_L.CardDealt}(x)&&(x.payload.gameData.multipliers?o.multipliers.setMultipliers(x.payload.gameData.multipliers):(o.multipliers.setMultipliers([]),o.multipliers.setPotentialMultipliers({}))),function(x){return x.type===_L.GameState&&x.payload.dealing===tL.Lightning}(x)&&o.gamePhase.setPhase($L.Lightning);break;case _L.Resolved:zL(x,o,c),o.multipliers.calculateWinTotalMultiplier(o.bets.bets);break;case _L.NewGame:zL(x,o,c),o.multipliers.setPotentialMultipliers({});break;default:zL(x,o,c)}}function GL(){const x=function(){let x=!1;return o=>{if(yL.has(o.type))return!1;if(o.type===_L.GameState){const{betting:x,dealing:c}=o.payload;if(x===mc.BetsClosed&&c===Cc.Idle)return!1;if(x===mc.BetsCancelled&&c===Cc.Cancelled)return!1}if(o.type===_L.PlayerBettingState){const{status:x}=o.payload.state;return!o.payload.restore&&!BL.has(x)}return!(!x&&o.type===_L.EncodedShoeState&&(x=!0,1))}}();return o=>o.type===_L.PotentialMultipliers?!o.payload.restore:x(o)}function pL(x,o){const c=x.type,L=x.timestamp?+x.timestamp:0,T=o.settings.cardDealDelay;return c===_L.PotentialMultipliers?L+T:FL(x,o)}!function(x){x.Lightning="Lightning"}($L||($L={}));class PL extends Gx{constructor(x){super(x),this.props=x}get isBalanceLowerMinBet(){const{betSpot:x,ag:o,fee:c}=this.props.root,L=o.availableBalance,T=x.minBetSpotValue;return L<c.getAmountWithFee(T)}}var KL,JL,nL,bL=c(971294);!function(x){x.MultiplierBubbleShownTimes="multiplierBubbleShownTimes"}(KL||(KL={})),function(x){x.MultiplierCards="MultiplierCards"}(JL||(JL={})),function(x){x.MultipliersCards="multipliersCards"}(nL||(nL={}));const WL={[JL.MultiplierCards]:KL.MultiplierBubbleShownTimes},wL=[[JL.MultiplierCards,KL.MultiplierBubbleShownTimes]];class gL extends kx{constructor(x){super(x),this.props=x,V.Gn(this,{isMultiplierBubbleVisible:V.EW})}get isMultiplierBubbleVisible(){const{preferences:x,layout:o,gameCycle:c}=this.props.root,{showOnboardingGameHints:L,multiplierBubbleShownTimes:T}=x;return c.gameCycleCompleted&&o.isMultipliersCardsVisible&&!!this.multipliersCardsRef&&T<this.bubbles[JL.MultiplierCards].timesToShow&&L}get multipliersCardsRef(){return this.props.root.reference.bubble.all[nL.MultipliersCards]}getRef(x){return x===JL.MultiplierCards?this.multipliersCardsRef:super.getRef(x)}get bubblePreferences(){return WL}get preferencesOnGameHintChange(){return wL}get bubbles(){return{[JL.MultiplierCards]:{id:JL.MultiplierCards,contentTranslationKey:"lightning.onboarding.bubbleMultiplier",withArrow:!0,layoutPosition:{desktop:{anchorPosition:"TopCenter",bubblePosition:"TopCenter",bubbleWidth:Ex,offsetBubble:"6px"},desktopClassic:{anchorPosition:"BottomCenter",bubblePosition:"BottomCenter",bubbleWidth:Ex,offsetBubble:Lx._m(1.2)},landscape:{anchorPosition:"TopCenter",bubblePosition:"TopCenter",bubbleWidth:Ex},portrait:{anchorPosition:"TopCenter",bubblePosition:"TopCenter",bubbleWidth:Hx}},timesToShow:2}}}}var RL=c(941691),xT=c(795192);class oT{constructor(x){this.props=x,this.value=0,this.previousValue=0,this.percentage=x.percentage,V.Gn(this,{value:V.sH,set:V.XI.bound,getAmountWithFee:V.XI.bound,getAmountWithoutFee:V.XI.bound})}set(x){const o=this.value;this.value=x,o!==this.previousValue&&(this.previousValue=o)}getFeeAmount(x){return xT.eS(x*this.percentage/100,3)}getAmountWithFee(x){return xT.eS(x*(100+this.percentage)/100,3)}getAmountWithoutFee(x){return xT.yv(100*x/(100+this.percentage))}}class cT extends oT{constructor(x){super(x),this.props=x,V.Gn(this,{tooltipText:V.EW})}get tooltipText(){return this.value>0?{key:"tooltip.feeAdded",mappings:{percentage:this.percentage}}:this.props.root.device.isPhone?{key:"onboarding.feeAddedShort",mappings:{percentage:this.percentage}}:{key:"onboarding.feeAdded",mappings:{percentage:this.percentage}}}}class LT extends cT{constructor(x){super(x),this.props=x,V.Gn(this,{animation:V.EW})}get animation(){const x=this.props.root.gamePhase.value,o=this.value>0;switch(!0){case x===s.Qc.BetsOpen&&o:case x===s.Qc.BetsClosed&&o:return RL.V.BetPlaced;case x===$L.Lightning:return RL.V.AnimationStart;default:return RL.V.None}}}class TT extends Yx{constructor(){super(),V.Gn(this,{isLightning:V.EW})}get value(){return super.value}get isLightning(){return this.value===$L.Lightning}}var hT,AT=c(507805),ET=c(604929);!function(x){x.Normal="normal",x.Reverse="reverse",x.Alternate="alternate",x.AlternateReverse="alternate-reverse"}(hT||(hT={}));const HT={};async function NT(x,o,c){const L=x.spriteUrl,T=await ET.y(L),h=function(x,o,c,L,T=hT.Normal){const h=Math.floor(x/c),A=Math.floor(o/L),E=[];for(let x=0;x<A;x++)for(let o=0;o<h;o++)E.push({x:o*c,y:x*L});switch(T){case hT.Reverse:return E.reverse();case hT.Alternate:return E.concat(E.slice().reverse());case hT.AlternateReverse:return E.slice().reverse().concat(E);case hT.Normal:default:return E}}(T.width,T.height,o.width,o.height,x.direction);c[x.id]={image:T,framePositions:h}}class QT{constructor(x){this.currentAnimation=null,this.context2d=null,this.timelineStartedAt=0,this.currentTimelinePosition=0,this.currentFragment=null,this.currentFragmentTime=0,this.currentFragmentEndTime=0,this.currentAtlas=null,this.setOffset=!0,this.frameId=null,this.frameDuration=33.333333333333336,this.lastFrameTime=0,this.isFrozen=!1,this.renderCounter=0,this.setFrameDuration=x=>{this.frameDuration=x},this.setContext2d=x=>{this.context2d=x,this.updateState()},this.setCurrentAnimation=x=>{this.currentAnimation=x,this.currentTimelinePosition=0,this.setOffset=!0,this.updateState(),!this.frameId&&this.getHasActiveAnimation()?(this.frameId=window.requestAnimationFrame(this.renderFrame),this.callbacks.onAnimationStart&&this.currentAnimation&&this.callbacks.onAnimationStart(this.currentAnimation)):this.stopFrameRender()},this.destroy=()=>{this.stopFrameRender(),this.currentFragment=null,this.currentAtlas=null,this.context2d=null,this.animationTimelines=null},this.getHasActiveAnimation=()=>!!this.currentAnimation&&"None"!==this.currentAnimation,this.setLayerOptions=()=>{this.setFrameDuration(this.frameDuration)},this.render=(x,o)=>{let c=o;if(this.setOffset&&(this.timelineStartedAt=x,c=0,this.setOffset=!1),this.currentTimelinePosition=Math.floor(x-this.timelineStartedAt),this.currentTimelinePosition>=this.currentFragmentEndTime&&(this.updateCurrentFragment(),!this.currentFragment))return void this.stopFrameRender();if(!this.currentAtlas)return;const{framePositions:L}=this.currentAtlas,T=L[this.getFrameIndex(L)];T&&(this.updateContext2dProps(),this.context2d&&this.context2d.drawImage(this.currentAtlas.image,T.x,T.y,this.width,this.height,this.x,this.y,this.width,this.height),this.currentFragmentTime+=c)},this.getAtlases=()=>HT[this.layerId]||{},this.updateCurrentFragment=()=>{const x=this.animationTimeline;if(!x)return void(this.currentFragment=null);let o=0;for(const c of x)if(c&&(o+=c.duration,o>this.currentTimelinePosition))return this.currentFragment=c,this.currentFragmentTime=0,this.currentFragmentEndTime=o,void this.updateCurrentAtlas();this.currentFragment=null},this.updateCurrentAtlas=()=>{this.currentFragment&&(this.currentAtlas=this.getAtlases()[this.currentFragment.id])},this.updateContext2dProps=()=>{this.currentFragment&&this.context2d&&(this.context2d.globalAlpha=this.currentFragment.alpha||1,this.context2d.globalCompositeOperation=this.currentFragment.compositeOperation||"source-over")},this.updateState=()=>{this.updateCurrentFragment(),this.updateCurrentAtlas()},this.clearRect=()=>{this.context2d&&this.context2d.clearRect(0,0,this.context2d.canvas.width,this.context2d.canvas.height)},this.stopFrameRender=()=>{this.frameId&&(window.cancelAnimationFrame(this.frameId),this.frameId=null,this.isSeamlessAnimation||this.clearRect(),this.isFrozen&&(this.renderCounter=0))},this.renderFrame=x=>{const o=x-this.lastFrameTime;if(this.isSeamlessAnimation&&this.stopOnLastFrame&&this.isCurrentFragmentLastInTimeline()&&(this.isLastFramePosition()||this.isLastCurrentFragmentTime(o)))return this.stopFrameRender(),void(this.callbacks.onAnimationEnd&&this.currentAnimation&&this.callbacks.onAnimationEnd(this.currentAnimation));o>=this.frameDuration&&(this.lastFrameTime=x,this.clearRect(),this.render(x,o),this.isFrozen&&(this.renderCounter+=1)),this.isFrozen&&this.frameId&&this.renderCounter>=4?window.cancelAnimationFrame(this.frameId):this.frameId=window.requestAnimationFrame(this.renderFrame)};const{layerId:o,animationTimelines:c,x:L,y:T,width:h,height:A,isFrozen:E,stopOnLastFrame:H=!1,isSeamlessAnimation:N=!1,callbacks:Q={}}=x;this.layerId=o,this.animationTimelines=c,this.x=L,this.y=T,this.width=h,this.height=A,this.isFrozen=E,this.stopOnLastFrame=H,this.isSeamlessAnimation=N,this.callbacks=Q,HT[this.layerId]?this.onCacheLoad():async function(x){const{animationTimelines:o,layerId:c}=x,L=[],T={};for(const c in o){if(!Object.prototype.hasOwnProperty.call(o,c))continue;const h=o[c];if(h)for(const o of h)L.push(NT(o,x,T))}await Promise.all(L),HT[c]=T}(x).then((()=>{this.onCacheLoad()}))}onCacheLoad(){HT[this.layerId]&&(this.updateCurrentAtlas(),this.updateState())}isCurrentFragmentLastInTimeline(){var x;const o=this.animationTimeline;return!!o&&(!(!(null==o?void 0:o.length)||(null===(x=this.currentFragment)||void 0===x?void 0:x.id)!==o[o.length-1].id)||void 0)}isLastFramePosition(){if(this.currentAtlas){const{framePositions:x}=this.currentAtlas;return this.getFrameIndex(x)===x.length-1}return!1}isLastCurrentFragmentTime(x){return this.currentFragmentTime&&this.currentFragmentTime+x>=1e3}getFrameIndex(x){return this.isFrozen?Math.floor((x.length-1)/2):Math.floor(this.currentFragmentTime/this.frameDuration)%x.length}get animationTimeline(){if(this.currentAnimation&&this.animationTimelines&&this.currentAnimation in this.animationTimelines)return this.animationTimelines[this.currentAnimation]}}const IT={};class kT{constructor(){this.layer=null,this.context2d=null,this.setLayer=x=>{this.layer&&this.layer.destroy(),this.layer=new QT(x),this.layer.setLayerOptions()},this.setContext2d=x=>{this.context2d=x,this.updateLayersContext2d()},this.setCurrentAnimation=x=>{this.layer&&this.layer.setCurrentAnimation(x)},this.destroy=()=>{this.layer&&(this.layer.destroy(),this.layer=null)},this.updateLayersContext2d=()=>{this.layer&&this.layer.setContext2d(this.context2d)}}}var _T=c(391936);function XT(x,o){const{width:c,height:L,scale:T=1}=x,{width:h,reverseScale:A=1}=o,E=T*h/1400,H=c/A,N=L/A;return{scale:E,reverseScale:A,scaledWidth:Math.floor(H*E),scaledHeight:Math.floor(N*E),absoluteWidth:H,absoluteHeight:N}}function rT(x,o,c,L){const T=o?vx.t.Portrait:vx.t.Landscape,{width:h,height:A}=c,{width:E,height:H,reverseScale:N=1}=L,{width:Q}=ao(E,H,T,x),{width:I,height:k}=_T.v(Q,Number.MAX_VALUE,h/A);return{scale:I/h,reverseScale:N,scaledWidth:Math.round(I),scaledHeight:Math.round(k),absoluteWidth:h,absoluteHeight:A}}const yT=[s.Qc.BetsClosed,s.Qc.Cancelled,s.Qc.Dealing,s.Qc.Resolved,$L.Lightning],vT=c.p+"images/gameresult.054550f8.webp";class BT extends Ec{constructor(x){super(x),this.props=x,this.isMultipliersCardsVisible=!1,this.skipLogoHiddenAnimation=!1,this.gameOverlayShiftStandardDevice=45,this.gameOverlayShiftSmallDevice=60,this.topVideoTranslateCoefficient=.5,this.collapsedPhases=[s.Qc.BetsClosed,s.Qc.Cancelled,s.Qc.Dealing,s.Qc.Resolved,$L.Lightning],this.gameOverlayShiftResolvedPhase=60,V.Gn(this,{isMultipliersCardsVisible:V.sH,skipLogoHiddenAnimation:V.sH,setIsMultipliersCardsVisible:V.XI.bound,setSkipLogoHiddenAnimation:V.XI.bound,feeDimensions:V.EW,lightningStrikeDimensions:V.EW,lightningCardsDimensions:V.EW})}get blockingInteractionPhases(){return yT}get topPosition(){const x=this.props.root.device.isBigDeviceDimensions?0:40,o=this.props.root.device.gameContainerDimensions.height*(this.videoScaleFactor<=1.15?1:Math.min(this.videoScaleFactor,1.3)),c=Ko.q1();return this.props.root.device.isPortrait?Math.floor(o-x-c.top):void 0}get overlayShift(){return this.isBettingDown?this.props.root.device.isBigDeviceDimensions?-20:this.gameOverlayShiftResolvedPhase:-this.gameOverlayShift}get gameOverlayTransformStyle(){const x=[],o=this.props.root.ag.values.chipstackHidden,{dimensions:{containerHeight:c,containerWidth:L},isPortrait:T,isTablet:h,isPhone:A}=this.props.root.device;if(h&&L/c>1.6666666666666667||A&&!T){const o=R.I5((c-45)/c);x.push(`scale(${o})`)}return(0!==this.overlayShift&&!o||this.isBettingDown)&&x.push(`translateY(${this.overlayShift}px)`),x.join("")}get mobileVideoTranslateHeight(){const{isPortrait:x,isPhone:o}=this.props.root.device;if(o&&x&&this.videoScaleFactor<=1.15){const{height:x}=this.props.root.device.gameContainerDimensions;return+(-x*(this.videoScaleFactor-1)*.5).toFixed(2)}return 0}setIsMultipliersCardsVisible(x){this.isMultipliersCardsVisible=x}get defaultGameColor(){return"#1F0029"}get gameColor(){return"#130505"}get gameResultLayer(){if(!this.props.root.gameResult.withEffect)return;const x=AT.ay.GameResult;return{layerId:x,animationTimelines:{[AT.$e.Enabled]:[{id:x,spriteUrl:vT,duration:4294967295}]},x:0,y:0,width:640,height:240,isFrozen:!1}}get availableRoadsHeight(){const x=super.availableRoadsHeight;if(0===x)return 0;const{isPortrait:o}=this.props.root.device,c=o?this.feeDimensions.scaledHeight:0,L=Math.floor(x-c);return Math.max(L,60)}get feeDimensions(){const x=this.props.root.device.platform,o=this.props.root.layout.isDesktopClassic,c=this.props.root.device.isPortrait,L=this.props.root.device.dimensions;return x===yx.OD.Desktop?XT({width:o?408:428,height:26},L):rT(x,c,{width:c?312:500,height:25},L)}get lightningStrikeDimensions(){const{scaledWidth:x}=this.feeDimensions,o=Math.floor(.76*x);return{scale:1,reverseScale:1,scaledWidth:x,scaledHeight:o,absoluteWidth:x,absoluteHeight:o}}get lightningCardsDimensions(){const x=this.props.root.device.platform,o=this.props.root.layout.isDesktopClassic,c=this.props.root.device.isPortrait,L=this.props.root.device.dimensions;return x===yx.OD.Desktop?XT({width:o?408:428,height:154},L):rT(x,c,{width:c?360:650,height:150},L)}setSkipLogoHiddenAnimation(x){this.skipLogoHiddenAnimation=x}}var YT,FT=c(149528),tT=c(639972),mT=c(123550);!function(x){x.Player="player",x.Banker="banker",x.BankerNC="banker_nc",x.BankerNC6="banker_nc6",x.Tie="tie",x.BankerPair="banker_pair",x.PlayerPair="player_pair",x.PlayerBankerPair="player_banker_pair",x.PerfectPair="perfect_pair",x.PerfectOneHand="one_hand",x.PerfectBothsHands="both_hands",x.EitherPair="either_pair",x.SuperSix="super_six",x.PlayerBankerBonus="player_banker_bonus",x.NaturalWin="natural_win",x.NaturalTie="natural_tie",x.WinBy9="win_by_9",x.WinBy8="win_by_8",x.WinBy7="win_by_7",x.WinBy6="win_by_6",x.WinBy5="win_by_5",x.WinBy4="win_by_4"}(YT||(YT={}));const CT=()=>({[YT.Player]:{labelTranslationId:"limitPlate.player",betSpot:s.K8.Player,payoutTranslationId:`limitPlate.${YT.Player}.payout`},[YT.Banker]:{labelTranslationId:"limitPlate.banker",betSpot:s.K8.Banker,payoutTranslationId:`limitPlate.${YT.Banker}.payout`},[YT.BankerNC]:{labelTranslationId:"limitPlate.banker",payoutTranslationId:`limitPlate.${YT.BankerNC}.payout`},[YT.BankerNC6]:{labelTranslationId:"limitPlate.bankerWinsOnSix",payoutTranslationId:`limitPlate.${YT.BankerNC6}.payout`},[YT.Tie]:{betSpot:s.K8.Tie,labelTranslationId:"limitPlate.tie"},[YT.PlayerBankerPair]:{betSpot:s.K8.PlayerPair,labelTranslationId:"limitPlate.playerbankerPair",payoutTranslationId:`limitPlate.${YT.PlayerBankerPair}.payout`,requiredBetSpots:[s.K8.PlayerPair,s.K8.BankerPair]},[YT.PlayerPair]:{labelTranslationId:"limitPlate.playerPair",payoutTranslationId:`limitPlate.${YT.PlayerPair}.payout`,betSpot:s.K8.PlayerPair,requiredBetSpots:[s.K8.PlayerPair]},[YT.BankerPair]:{betSpot:s.K8.BankerPair,labelTranslationId:"limitPlate.bankerPair",payoutTranslationId:`limitPlate.${YT.BankerPair}.payout`,requiredBetSpots:[s.K8.BankerPair]},[YT.PerfectPair]:{betSpot:s.K8.PerfectPair,labelTranslationId:"limitPlate.perfectPair",requiredBetSpots:[s.K8.PerfectPair]},[YT.PerfectOneHand]:{labelTranslationId:"limitPlate.oneHand",payoutTranslationId:`limitPlate.${YT.PerfectOneHand}.payout`,requiredBetSpots:[s.K8.PerfectPair]},[YT.PerfectBothsHands]:{labelTranslationId:"limitPlate.bothHands",payoutTranslationId:`limitPlate.${YT.PerfectBothsHands}.payout`,requiredBetSpots:[s.K8.PerfectPair]},[YT.EitherPair]:{betSpot:s.K8.EitherPair,labelTranslationId:"limitPlate.eitherPair",payoutTranslationId:`limitPlate.${YT.EitherPair}.payout`,requiredBetSpots:[s.K8.EitherPair]},[YT.SuperSix]:{betSpot:s.K8.SuperSix,labelTranslationId:"limitPlate.superSix",payoutTranslationId:`limitPlate.${YT.SuperSix}.payout`,requiredBetSpots:[s.K8.SuperSix]},[YT.PlayerBankerBonus]:{betSpot:s.K8.PlayerBonus,labelTranslationId:"limitPlate.playerbankerBonus"},[YT.NaturalWin]:{labelTranslationId:"limitPlate.naturalWin",payoutTranslationId:`limitPlate.${YT.NaturalWin}.payout`},[YT.NaturalTie]:{labelTranslationId:"limitPlate.naturalTie",payoutTranslationId:"limitPlate.push"},[YT.WinBy9]:{labelTranslationId:"limitPlate.winBy9",payoutTranslationId:`limitPlate.${YT.WinBy9}.payout`},[YT.WinBy8]:{labelTranslationId:"limitPlate.winBy8",payoutTranslationId:`limitPlate.${YT.WinBy8}.payout`},[YT.WinBy7]:{labelTranslationId:"limitPlate.winBy7",payoutTranslationId:`limitPlate.${YT.WinBy7}.payout`},[YT.WinBy6]:{labelTranslationId:"limitPlate.winBy6",payoutTranslationId:`limitPlate.${YT.WinBy6}.payout`},[YT.WinBy5]:{labelTranslationId:"limitPlate.winBy5",payoutTranslationId:`limitPlate.${YT.WinBy5}.payout`},[YT.WinBy4]:{labelTranslationId:"limitPlate.winBy4",payoutTranslationId:`limitPlate.${YT.WinBy4}.payout`}}),VT=[YT.Player,YT.Banker,YT.BankerNC,YT.BankerNC6,YT.Tie],iT=[YT.PlayerPair,YT.BankerPair,YT.PlayerBankerPair,YT.PerfectPair,YT.PerfectOneHand,YT.PerfectBothsHands,YT.EitherPair,YT.SuperSix],MT=[YT.PlayerBankerBonus,YT.NaturalWin,YT.NaturalTie,YT.WinBy9,YT.WinBy8,YT.WinBy7,YT.WinBy6,YT.WinBy5,YT.WinBy4],ZT={[YT.Banker]:[s.K8.Banker],[YT.SuperSix]:[s.K8.SuperSix],[YT.PerfectPair]:[s.K8.PerfectPair],[YT.EitherPair]:[s.K8.EitherPair],[YT.PlayerPair]:[s.K8.PlayerPair],[YT.BankerPair]:[s.K8.BankerPair],[YT.PlayerBankerPair]:[s.K8.PlayerPair,s.K8.BankerPair],[YT.PlayerBankerBonus]:[s.K8.PlayerBonus,s.K8.BankerBonus]};class ST{constructor(x){this.props=x,this.skipMainBetLimitsAsterisk=!0,V.Gn(this,{footnotes:V.EW,betLimitsRows:V.EW,mainBetLimits:V.EW,sideBetLimits:V.EW,bonusBetLimits:V.EW})}get footnotes(){const{reduction:x}=this.props.root,o=new Set,c=[];return this.betLimitsRows.forEach((L=>{const{asterisk:T,betKey:h}=L;if(!o.has(T)&&T){o.add(T);const L=h,A=tT.A(ZT[L]),E=VT.includes(L);if(A&&E)return void this.addMainBetLimitFootnote(c,T,A);if(A){const o=x.coefficientReductions[A];o&&this.addSideBetLimitFootnote(c,T,o)}}})),c}get betLimitsRows(){const{minTableLimit:x,maxTableLimit:o,currencySymbol:c,displayTableLimit:L}=this.props.root.settings,T=L&&x>0&&o>0,h=[...this.mainBetLimits,...this.sideBetLimits,...this.bonusBetLimits];return T&&this.props.isDesktop&&h.push(...function(x,o,c,L){return[{},{betKey:"tableLimits",betTitle:E.Tl("tableLimits"),min:x,max:o,isMobile:c,currencySymbol:L}]}(x,o,!this.props.isDesktop,c)),this.injectAsterisks(h)}get mainBetLimits(){const{noCommission:x}=this.props.root.settings;return VT.filter((o=>x||!x&&![YT.BankerNC,YT.BankerNC6].includes(o))).map((o=>{const c=this.createLimitRowProps(o,"");return o===YT.Banker&&x&&(c.payout=""),this.extendMainBetLimitsRow(c,o)}))}get sideBetLimits(){const x=!this.props.isDesktop,o=[],c=this.filterSideBetLimitsRows(iT);return c.length>0&&(o.push({isMobile:x}),c.forEach((x=>{o.push(this.extendSideBetLimitsRow(this.createLimitRowProps(x,""),x))}))),o}get bonusBetLimits(){return this.playerBankerBonusEnabled()?MT.map((x=>this.createLimitRowProps(x,""))):[]}createLimitRowProps(x,o=""){const{currencySymbol:c}=this.props.root.settings,{betSpot:L,labelTranslationId:T,payoutTranslationId:h,payout:A}=CT()[x],H=L?this.props.root.betSpot.getMinBetSpotValue(L):void 0,N=L?this.props.root.betSpot.getMaxBetSpotValue(L):void 0,Q=void 0!==H&&void 0!==N?`${T}_uppercase`:T;return{betKey:x,betTitle:`${E.Tl(Q)}${o}`,min:H,max:N,payout:h?E.Tl(h):A,isMobile:!this.props.isDesktop,currencySymbol:c}}playerBankerBonusEnabled(){return this.props.root.betSpot.isSpotConfigured(s.K8.PlayerBonus)&&this.props.root.betSpot.isSpotConfigured(s.K8.BankerBonus)}processAsterisk(x,o){var c;const L=null!==(c=mT.A(x.uniqueSymbols))&&void 0!==c?c:"";let T="";return x.distribution[`${o}`]?T=x.distribution[`${o}`]:(T=`${L}*`,x.distribution[`${o}`]=T,x.uniqueSymbols.push(T)),T}getAsterisk(x,o,c){const L=VT.includes(c),T=ZT[c],h=tT.A(T);let A="";if(h&&T){if(L&&!this.skipMainBetLimitsAsterisk)return A=this.processAsterisk(x,c),A;const T=o[h];if(!L&&T)return A=this.processAsterisk(x,`${T}`),A}return A}injectAsterisks(x){const{coefficientReductions:o}=this.props.root.reduction,c={distribution:{},uniqueSymbols:[]};return x.map((x=>{const L={...x},{betKey:T,betTitle:h}=L;if(T&&ZT[T]){const x=this.getAsterisk(c,o,T);x&&h&&(L.asterisk=x,L.betTitle+=x)}return L}))}}class uT extends ST{constructor(x){super(x),this.props=x,this.skipMainBetLimitsAsterisk=!1}addMainBetLimitFootnote(x,o,c){const{payoutLimit:L,currencySymbol:T}=this.props.root.settings,h=E.Tl(`limitPlate.${c.toLocaleLowerCase()}LightningFeeInfo`);if(x.push(`${o} ${h}`),L>0){const o=xL.ej(L,{currencySymbol:T}),c=E.Tl("limitPlate.payoutLimit"),h=E.Tl("limitPlate.plusInitialBet");x.push(`${c} ${o} ${h}`)}}addSideBetLimitFootnote(x,o,c){const L=FT.t(c,FT.Z.LimitPlate);x.push(`${o} ${L}`)}extendMainBetLimitsRow(x,o){const c={...x},{payoutLimit:L,currencySymbol:T,isNoMaxPayoutLimitInfo:h}=this.props.root.settings;switch(o){case YT.Banker:case YT.Player:c.payout=E.Tl(`lightning.limitPlate.${o}.payout`);break;case YT.Tie:if(h){c.payout=E.Tl("limitPlate.short");break}const x=xL.ej(L,{currencySymbol:T});c.payout=E.Tl("limitPlate.upTo.new",{payoutLimit:x})}return c}extendSideBetLimitsRow(x,o){const c={...x};switch(o){case YT.BankerPair:case YT.PlayerPair:c.payout=E.Tl(`lightning.limitPlate.${o}.payout`)}return c}filterSideBetLimitsRows(x){return x.filter((x=>{if(x===YT.PlayerBankerPair)return!1;const o=CT()[x];return!o.requiredBetSpots||o.requiredBetSpots.every((x=>this.props.root.betSpot.isSpotConfigured(x)))}))}}var dT=c(315281);class OT extends $x{constructor(x){super(x),this.props=x}getCustomEnhancers(){const{betProcessor:x,bets:o,device:c}=this.props.root;return{[j.Bets]:G((()=>({bets:x.calculateUpdatedBets(V.HO(o.bets))}))),[j.GameType]:G((()=>({gameType:s.ZF.Baccarat}))),[j.UserAgent]:G((()=>({userAgent:c.DS.userAgent})))}}getBetExternalIds(){const{tiePays9to1:x}=this.props.root.settings;return{...l({tiePays9to1:x}),[dT._.PlayerLightning]:"BAC_Player_Lightning",[dT._.PlayerPairLightning]:"BAC_PlayerPair_Lightning",[dT._.BankerLightning]:"BAC_Banker_Lightning",[dT._.BankerPairLightning]:"BAC_BankerPair_Lightning",[dT._.TieLightning]:"BAC_Tie_Lightning"}}}var jT=c(710913);class eT{constructor(x){this.props=x,this.bet=this.bet.bind(this),this.undo=this.undo.bind(this),this.undoAll=this.undoAll.bind(this),this.repeat=this.repeat.bind(this),this.double=this.double.bind(this),this.dealNow=this.dealNow.bind(this)}bet(x){const{betSpot:o,amount:c}=x,L=jT.k(this.props.ag.values.gameRoundId,this.props.ag.actions.settings.rawSetup.currencyCode||"",c);this.props.transport.sendMessage(this.composeBetMessage({name:"Chips",chips:{[o]:c}},L))}undo(){this.props.transport.sendMessage(this.composeBetMessage({name:s.uu.Undo}))}undoAll(){this.props.transport.sendMessage(this.composeBetMessage({name:s.uu.UndoAll}))}repeat(x){this.props.transport.sendMessage(this.composeBetMessage({name:s.uu.Repeat,mode:x}))}double(){this.props.transport.sendMessage(this.composeBetMessage({name:s.uu.Double}))}move(x){this.props.transport.sendMessage(this.composeBetMessage({name:s.uu.Move,...x}))}dealNow(){this.props.transport.sendMessage({type:XL.DealNow,payload:this.getBasePayload(XL.DealNow)})}getBasePayload(x){return{gameId:this.props.ag.values.gameRoundId,replyId:R.pW(x),timestamp:+new Date}}composeBetMessage(x,o){return{type:XL.Bet,payload:{...this.getBasePayload(XL.Bet),betTags:this.getBetTags(),action:x,correlationId:o}}}getBetTags(){return{...this.props.ag.values.bettingTags,btTableView:`${this.props.ag.values.videoStreamForCurrentLayout}`,orientation:this.props.ag.values.orientation}}}var qT,fT=c(405215),UT=c.n(fT);!function(x){x.Player0="player0",x.Player1="player1",x.Player2="player2",x.Banker0="banker0",x.Banker1="banker1",x.Banker2="banker2"}(qT||(qT={}));const sT=[qT.Player0,qT.Banker0,qT.Player1,qT.Banker1,qT.Player2,qT.Banker2];class DT{constructor(x){this.props=x,this.values=[],this.mapValues=V.sH.map(),this.potentialMultipliers={},this.cardsVisible=!1,V.Gn(this,{values:V.sH.ref,mapValues:V.sH,potentialMultipliers:V.sH,setMultipliers:V.XI.bound,setPotentialMultipliers:V.XI.bound,reset:V.XI.bound,multiplierCardsExist:V.EW,multipliersCards:V.EW,matchedCards:V.EW,multiplierCardsDealtCount:V.EW,cardsVisible:V.sH,setCardsVisible:V.XI.bound})}setMultipliers(x){if(!UT()(x,this.values)){this.values=x,this.mapValues.clear();for(const o of x)this.mapValues.set(o.card,o.value);0===x.length&&(this.cardsVisible=!1)}}setPotentialMultipliers(x){this.potentialMultipliers=x}get multiplierCardsDealtCount(){const{Banker:x,Player:o}=this.matchedCards;return x.length+o.length}getBetSpotMultiplier(x){return this.potentialMultipliers[x]||0}reset(){this.values=[],this.potentialMultipliers={},this.mapValues.clear(),this.cardsVisible=!1}get multipliersCards(){const{dealtCards:x}=this.props.cards;return this.values.map((o=>({card:o.card,multiplier:o.value,isDealt:x.includes(o.card),baseTime:this.props.baseTime||0,cardTime:this.props.cardTime||0})))}get multiplierCardsExist(){return this.values.length>0}checkIfCardMatched(x,o,c){const L=this.props.gameResult.winner,T=this.mapValues.has(x);return L?(L===s.K8.Tie||L===o||c<2&&o===_x.U.Banker&&this.getBetSpotMultiplier(s.K8.BankerPair)>1||c<2&&o===_x.U.Player&&this.getBetSpotMultiplier(s.K8.PlayerPair)>1)&&T:T}get matchedCards(){return{[_x.U.Player]:this.getMatchedCardsByHand(_x.U.Player),[_x.U.Banker]:this.getMatchedCardsByHand(_x.U.Banker)}}get dealtCardMultiplier(){var x;const o=this.props.cards.dealtOrderedCards,c={};for(let L=0;L<sT.length;L++)c[sT[L]]=o.length>L&&null!==(x=this.mapValues.get(o[L]))&&void 0!==x?x:0;return c}setCardsVisible(){this.cardsVisible=!0}getMatchedCardsByHand(x){return this.props.cards.hands[x].cards.filter(((o,c)=>this.checkIfCardMatched(o,x,c)))}}class $T extends DT{constructor(x){super(x),this.props=x,this._winTotalMultiplier=void 0}get winTotalMultiplier(){return this._winTotalMultiplier||0}calculateWinTotalMultiplier(x){const{winningBetSpots:o}=this.props.gameResult;this._winTotalMultiplier=o.map((o=>x[o]?this.getBetSpotMultiplier(o):0)).sort(((x,o)=>o-x)).shift()}reset(){super.reset(),this._winTotalMultiplier=void 0}}class aT extends Ic{constructor(x){super(x),this.props=x}get isAllSideBetsEnabled(){return!1}get multiplierBubbleShownTimes(){return this.preferences.multiplierBubbleShownTimes}}function zT(x){return V.mJ((()=>x.preferences.scorecardTheme),(()=>{x.ag.actions.setHelpCustomConfig(function({betSpot:x,settings:o,isMultiplayAvailable:c,scorecardTheme:L}){return{playerBankerPairEnabled:x.isSpotConfigured(s.K8.PlayerPair)&&x.isSpotConfigured(s.K8.BankerPair),scorecardTheme:L,isNoMaxPayoutLimitInfo:o.isNoMaxPayoutLimitInfo,isMultiplayEnabled:c,coefficientReductionsConfig:o.coefficientReductionsConfig,isRtpProbabilityV2:o.isRtpProbabilityV2,volatility:o.volatility}}({betSpot:x.betSpot,settings:x.settings,isMultiplayAvailable:x.layout.isMultiplayAvailable,scorecardTheme:x.preferences.scorecardTheme}))}),{fireImmediately:!0})}class lT extends Kc{constructor(x){super(x),this.props=x}get isNoMaxPayoutLimitInfo(){return this.props.settings.isNoMaxPayoutLimitInfo}get lightningBaseTime(){return this.props.settings.lightningBaseTime}get lightningCardTime(){return this.props.settings.lightningCardTime}get isRtpProbabilityV2(){return this.props.settings.isRtpProbabilityV2}}var GT;!function(x){x.MultiplierAppear="multiplierAppear",x.MultiplierMatch="multiplierMatch",x.ChargeLoopStart="chargeLoopStart",x.ChargeLoopStop="chargeLoopStop",x.Charge="charge",x.WinCounterLoopStart="winCounterLoopStart",x.WinCounterLoopEnd="winCounterLoopEnd"}(GT||(GT={}));class pT extends nc{constructor(){super(),this.playWinCountUpLoopStart=this.playWinCountUpLoopStart.bind(this),this.playWinCountUpLoopEnd=this.playWinCountUpLoopEnd.bind(this)}playTombstoneCard(){this.fireSoundEvent(GT.MultiplierAppear)}playTombstoneCardMatch(){this.fireSoundEvent(GT.MultiplierMatch)}playWinCountUpLoopStart(){this.fireSoundEvent(GT.WinCounterLoopStart)}playWinCountUpLoopEnd(){this.fireSoundEvent(GT.WinCounterLoopEnd)}}class PT extends LL{constructor(x){super(x),this.props=x}get gamePhaseProps(){switch(this.props.root.gamePhase.value){case s.Qc.Cancelled:return this.gameCancelledProps;case s.Qc.Dealing:return this.dealingProps;case s.Qc.Revealing:return this.revealingProps;case s.Qc.BetsClosed:return this.betsClosedProps;case s.Qc.Resolved:return this.gameResolvedProps;case s.Qc.BetsOpen:return this.betsOpenProps;case $L.Lightning:return this.lightningPhaseProps;default:return oL()}}get lightningPhaseProps(){return{color:"lightning",text:E.Tl("trafficlight.lightningRound")}}}class KT extends HL{constructor(x){super(x),this.transport=function(x){return new iL(x)}({transport:x.transport});const o=function({store:x,videoSync:o,gameMessageHandler:c,shouldBeSynced:L,getMessageTime:T}){return h=>{if(!L(h,x))return void c(h,x,0);const A=h.timestamp?+h.timestamp:0,E=o.getVideoTime()+o.getMaxEventVideoTimeDiff();let H=T(h,x);A<E&&H>E&&(H=E),o.wait(H).then((o=>{c(h,x,o)})).catch((x=>{console.warn("VideoSync error:",x)}))}}({store:this,videoSync:x.ag.video.sync,gameMessageHandler:lL,shouldBeSynced:GL(),getMessageTime:pL});this.transport.addHandler(o),this.preferences=function(x){return new aT(x)}({root:this}),this.gamePhase=new TT,this.settings=function(x){return new lT(x)}({settings:x.settings}),this.multipliers=function(x){return new $T(x)}({cards:this.cards,gameResult:this.gameResult,baseTime:this.settings.lightningBaseTime,cardTime:this.settings.lightningCardTime}),this.fee=function(x){return new LT(x)}({root:this,percentage:CL.d}),this.flyingFee=(x=>new NL(x))({fee:this.fee}),this.messageSender=function(x){return new eT(x)}({ag:this.ag,transport:this.transport}),this.layout=function(x){return new BT(x)}({root:this}),this.balance=function(x){return new PL(x)}({root:this}),this.betProcessor=bL.P({root:this}),this.limits=function(x){return new uT(x)}({root:this,isDesktop:this.device.isDesktop}),this.statusBar=function(x){return new PT(x)}({root:this}),this.bubble=function(x){return new gL(x)}({root:this}),this.shoe=u({root:this}),this.sounds=new pT,this.log=function(x){return new OT(x)}({root:this}),this.initDisposables(x.bubblesEnabled)}reset(){super.reset(),this.multipliers.reset()}initDisposables(x){const o=x?[(c=this,V.mJ((()=>c.bubble.isMultiplierBubbleVisible),(x=>{const{bubble:o}=c;x?o.show(JL.MultiplierCards):o.autoHideBubble(JL.MultiplierCards)}))),i(this),M(this)]:[];var c;super.initDisposables(x),this.disposeBag.addDisposables([Z(this),IL(this),kL(this),QL(this),zT(this),cc(this),...o])}}const JT=(x,o)=>({[ox.AllSideBets]:{storageKey:"baccarat.common."+ox.AllSideBets,isValidValue:_,getDefaultValue:()=>x.isAllSideBetsEnabled},[ox.Background]:{storageKey:"baccarat.common."+ox.Background,isValidValue:F,getDefaultValue:()=>H.ScorecardThemeNames.WhiteSolid},[ox.BettingGridBubbleShownTimes]:{storageKey:o+ox.BettingGridBubbleShownTimes,isValidValue:Number.isFinite,getDefaultValue:()=>0},[ox.WelcomeBubbleShownTimes]:{storageKey:o+ox.WelcomeBubbleShownTimes,isValidValue:Number.isFinite,getDefaultValue:()=>0}});function nT(x,o){return{...JT(x,o),[Ac.SwapStatsAndMedia]:{storageKey:"baccarat.common."+Ac.SwapStatsAndMedia,isValidValue:_,getDefaultValue:()=>!1},[Ac.ShowBettingStats]:{storageKey:"baccarat.common."+x.getTableId()+Ac.ShowBettingStats,isValidValue:_,getDefaultValue:()=>!1!==x.showBettingStatistics},[Ac.CameraMode]:{storageKey:"baccarat.common."+Ac.CameraMode,isValidValue:k,getDefaultValue:()=>"view2"===x.rawConfig.default_view?Vc.Single:Vc.Multi}}}function bT(x){return{...nT(x,"baccarat.live.lightning"),[ox.Background]:{storageKey:"baccarat.common."+ox.Background,isValidValue:F,getDefaultValue:()=>H.ScorecardThemeNames.BlackDot},[KL.MultiplierBubbleShownTimes]:{storageKey:"baccarat.live.lightning"+KL.MultiplierBubbleShownTimes,isValidValue:Number.isFinite,getDefaultValue:()=>0}}}var WT=c(447833);function wT(x){const o=Number(x.portraitVideoZoom);return Number.isNaN(o)?void 0:o}function gT(x,o,c){const L=X(c);return WT.A(L)?console.error(`${x} limit has invalid value, please check configuration for table ${o}`):void 0===L&&console.error(`${x} limit is not specified, please check configuration for table ${o}`),L||0}function RT(x){var o;const c=x.rawConfig,L=x.getTableId(),T={playerMinBet:gT("player_min_bet",L,c.player_min_bet),playerMaxBet:gT("player_max_bet",L,c.player_max_bet),bankerMinBet:gT("banker_min_bet",L,c.banker_min_bet),bankerMaxBet:gT("banker_max_bet",L,c.banker_max_bet)};return{mainOnlyReductionRawThreshold:c.cards_out_to_trigger_main_only,limitReductions:pc(c),coefficientReductions:Pc(c),showBettingStatistics:v(c.show_betting_statistics,{default:void 0}),betweenGamesTime:X(c.between_games_time)||0,betSpotLimits:{min:Math.max(T.playerMinBet,T.bankerMinBet),max:Math.max(T.playerMaxBet,T.bankerMaxBet)},freeHandsLimit:null!==(o=X(c.free_hands_limit))&&void 0!==o?o:0,footerGradientHeight:X(c.footerGradientHeight),limitConfig:X(c.idle_limit_games)||null,cameraOnRails:(h=c,Object.keys(h).reduce(((x,o)=>{if(o.startsWith("camera_on_rails.")){const c=o.replace("camera_on_rails.","");if(c in Gc){const L=Gc[c];L&&(x[L]=h[o].split(",").map((x=>function(x){if(o=x,Object.values(sx).includes(o))return{delay:0,state:x};var o;const[c,L]=x.split(":");return{delay:Number(c),state:L}}(x))))}else x[c]=h[o]}return x}),{})),portraitVideoZoom:wT(c),isBaccaratV4:v(c.baccarat_v4,{default:!1}),isHelpRedEnvelopeSpotsSingleRtp:v(c.help_red_envelope_single_rtp,{default:!1})};var h}function xh(x){const o=x.rawConfig;return{...RT(x),lightningBaseTime:X(o.lightning_base_time)||2e3,lightningCardTime:X(o.lightning_card_time)||600,isNoMaxPayoutLimitInfo:v(o.noMaxPayoutLimitInfo,{default:!1}),isRtpProbabilityV2:v(o.help_RTP_probability_v2,{default:!1})}}var oh=c(755073),ch=c(85),Lh=c(523219);var Th=c(64922),hh=c(525620),Ah=c(377810),Eh=c.t(Ah,2),Hh=c(699695),Nh=c(119313),Qh=c(653677);function Ih(x,o){const c=[];for(let L=0;L<x;L++)c.push(o);return c}function kh({icons:x,rows:o,columns:c}){var L;const T=[];for(let h=0;h<c;h++)for(let c=0;c<o;c++)(null===(L=x[h])||void 0===L?void 0:L[c])&&T.push({x:h,y:c,props:{roadType:H.RoadType.Big,...x[h][c]}});return T}const _h=kh({icons:[Ih(2,{winnerType:H.WinnerTypeBaccarat.Player,additionalType:H.AdditionalTypeBaccarat.Tie}),[...Ih(3,{winnerType:H.WinnerTypeBaccarat.Banker}),...Ih(2,{winnerType:H.WinnerTypeBaccarat.Banker,additionalType:H.AdditionalTypeBaccarat.Tie})],Ih(1,{winnerType:H.WinnerTypeBaccarat.Player}),Ih(10,{winnerType:H.WinnerTypeBaccarat.Banker}),Ih(4,{winnerType:H.WinnerTypeBaccarat.Player}),Ih(2,{winnerType:H.WinnerTypeBaccarat.Banker}),Ih(6,{winnerType:H.WinnerTypeBaccarat.Player}),Ih(2,{winnerType:H.WinnerTypeBaccarat.Banker}),Ih(3,{winnerType:H.WinnerTypeBaccarat.Player}),Ih(5,{winnerType:H.WinnerTypeBaccarat.Banker}),Ih(1,{winnerType:H.WinnerTypeBaccarat.Player}),Ih(3,{winnerType:H.WinnerTypeBaccarat.Banker})],rows:6,columns:15}),Xh=kh({icons:[Ih(2,{winnerType:H.WinnerTypeBaccarat.Player,additionalType:H.AdditionalTypeBaccarat.Tie}),Ih(3,{winnerType:H.WinnerTypeBaccarat.Banker}),Ih(1,{winnerType:H.WinnerTypeBaccarat.Player})],rows:3,columns:3}),rh=[{x:11,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:11,y:1,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:11,y:2,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:10,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:9,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:9,y:1,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:9,y:2,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:9,y:3,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:9,y:4,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:8,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:8,y:1,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:8,y:2,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:7,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:7,y:1,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:7,y:4,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:7,y:5,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:6,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:6,y:1,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:6,y:2,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:6,y:3,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:6,y:4,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:6,y:5,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:5,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:5,y:1,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:5,y:5,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:4,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:4,y:1,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:4,y:2,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:4,y:3,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:4,y:5,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:3,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:3,y:1,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:3,y:2,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:3,y:3,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:3,y:4,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:3,y:5,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:2,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:1,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:1,y:1,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:1,y:2,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:1,y:3,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker,additionalType:6}},{x:1,y:4,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker,additionalType:6}},{x:0,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player,additionalType:6}},{x:0,y:1,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player,additionalType:6}}],yh="container--1f8f1",vh="isMobile--fc8c9",Bh="label--c2fdc",Yh=x=>{const{color:o,fill:c,stroke:L,isMobile:T,isLive:h=!1,IconShapeComponent:A}=x,E=T?(x=>({columnCount:3,rowCount:3,strokeWidth:.1,icons:H.mapIconsToRoadItemsBaccarat(Xh,x)}))(h):(x=>({columnCount:15,rowCount:6,strokeWidth:.1,icons:H.mapIconsToRoadItemsBaccarat(x?_h:rh,x)}))(h);return Th.jsxs("div",{className:Hh.A(yh,{[vh]:T}),children:[Th.jsx(H.GridView,{IconShapeComponent:A,...E,icons:E.icons,fill:c,stroke:L}),Th.jsx("span",{className:Bh,children:o})]})},Fh="container--38690",th="isMobile--9c478",mh="isFlattened--f0f23",Ch="selectorHolder--e2807",Vh="heading--e73d1",ih={[H.ScorecardThemeNames.WhiteSolid]:({isDesktop:x,isRng:o})=>Th.jsx(Yh,{fill:H.getScorecardTheme(H.ScorecardThemeNames.WhiteSolid).fill,stroke:H.getScorecardTheme(H.ScorecardThemeNames.WhiteSolid).stroke,color:E.Tl("settings.scorecards.background.classic"),isMobile:!x,isLive:!o}),[H.ScorecardThemeNames.BlackDot]:({isDesktop:x,isRng:o})=>Th.jsx(Yh,{IconShapeComponent:H.EmptyRoadItem,fill:H.getScorecardTheme(H.ScorecardThemeNames.BlackDot).fill,stroke:H.getScorecardTheme(H.ScorecardThemeNames.BlackDot).stroke,color:E.Tl("settings.scorecards.background.immersive"),isMobile:!x,isLive:!o})},Mh=[H.ScorecardThemeNames.WhiteSolid,H.ScorecardThemeNames.BlackDot],Zh=({scorecardTheme:x,setScorecardTheme:o,isDesktop:c,isFlattened:L=!1,themes:T=Mh,isRng:h})=>{const A=Ah.useMemo((()=>function({isDesktop:x,themes:o,isRng:c}){return o.map((o=>({value:o,component:ih[o]({isDesktop:x,isRng:c})})))}({isDesktop:c,themes:T,isRng:h})),[c,h,T]);return Th.jsxs("div",{className:Hh.A(Fh,{[th]:!c,[mh]:L}),children:[Th.jsx(Qh.q,{className:Hh.A(Vh,{[mh]:L}),children:"settings.scorecards."+(c?"background":"background_uppercase")}),Th.jsx("div",{className:Ch,children:Th.jsx(Nh.P,{setValue:o,value:x,options:A,variant:"with-anchor-cell"})})]})},Sh=hh.PA((({isFlattened:x,isRng:o=!1})=>{var c;const L=T.Pj(),A=Ah.useCallback((x=>{L.preferences.updatePreferenceValue(ox.Background,x),L.log.clientPressedSetting(ox.Background,x)}),[L]);return Th.jsx(Zh,{isRng:null!==(c=L.settings.isRng)&&void 0!==c?c:o,setScorecardTheme:A,isDesktop:L.device.isDesktop,scorecardTheme:L.preferences.scorecardTheme,themes:h.LH,isFlattened:x})})),uh=[{component:Sh,labelTranslationId:"settings.scorecards",tabId:"SCORECARDS"}];var dh=c(368329);const Oh="maxPayoutAmount--18149",jh=Ah.memo((({footNotes:x})=>Th.jsx("div",{"data-role":"max-payout-amount",className:Oh,children:x.map(((x,o)=>Th.jsx("div",{children:x},`footnote-${o}`)))})));var eh=c(837557),qh=c(671860),fh=c(509407),Uh=c(808432),sh=c(525019);const Dh="red--3ffaa",$h="black--f01d3";function ah(x,o,c,L){return Th.jsx("use",{xlinkHref:x,x:o,y:c,height:L})}sh.z();const zh=Ah.memo((({rank:x,suit:o})=>{let c;switch(x){case"2":case"6":c="36";break;case"3":case"9":c="35";break;case"4":c="34";break;case"5":case"J":c="38";break;case"7":c="40";break;case"8":c="39";break;case"10":c="0";break;case"Q":case"A":c="19";break;default:c="17"}const L=[Uh.KY.D,Uh.KY.H].includes(o)?Dh:$h,T=ah(`#rank-${x}`,c,"10","86"),h=ah(`#suit-${Uh.KY[o]}`,"100","0","106");return Th.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 184 106",preserveAspectRatio:"xMidYMid meet",className:L,children:[T,h]})}));zh.displayName="RankAndSuit";const lh="indented--d520e",Gh="doubleIndented--68144",ph="bold--37d87",Ph="bet--7d654",Kh="betLimits--3cf27",Jh="payout--46826",nh="ranksAndSuits--7b0b6",bh="mobileRanksAndSuits--7a895",Wh="cardsDelimiter--55498",wh="disabled--fc044",gh="topPadding--64914",Rh="rtl--1eee5",xA="mobile--a40d9",oA="cellContent--e7e92",cA="sectionHeader--a6eff",LA="hasContent--7f13d",TA="middleDataCell--a2446",hA="fixedColumnWidths--a60d9",AA="hasBottomBorder--87313",EA="hasIncreasedNotch--5fff3",HA="hasNotch--42e7b",NA="legacyMenuMode--041c5",QA=Ah.memo((x=>{const{betKey:o,betTitle:c,min:L,max:T,payout:h,isIndented:A=!1,areLimitsInlined:H,cards:N,middleComponent:Q,hasBottomBorder:I=!0,isMobile:k=!1,currencySymbol:_="",fixedColumnWidths:X=!0,showPayouts:r=!0,isSectionHeader:y=!1,hasSectionPadding:v=!1,disabled:B=!1,legacyMenuMode:Y}=x,F=A&&v,t=Hh.A({[lh]:!F&&(A||v),[Gh]:F}),m=void 0===c&&o?Th.jsx(Qh.q,{className:t,"data-role":"title",children:o}):Th.jsx("span",{"data-role":"title",className:t,children:null!=c?c:String.fromCharCode(8203)}),C=Ah.useMemo((()=>{if(L&&T)return fh.Q({lowerLimit:L,upperLimit:T,currencySymbol:_});const x=null!=L?L:T;return x?xL.ej(x,{currencySymbol:_}):void 0}),[L,T,_]),V=Ah.useMemo((()=>null==N?void 0:N.map(((x,o)=>function(x,o){const c=x.slice(0,-1);let L=null;switch(x.slice(-1)){case"C":L=Uh.KY.C;break;case"D":L=Uh.KY.D;break;case"H":L=Uh.KY.H;break;case"S":L=Uh.KY.S}return"|"===x?Th.jsx("span",{className:Wh,children:x}):c&&null!==L?Th.jsx(zh,{rank:c,suit:L},o):null}(x,o)))),[N]),i=!!(c||o||C||V||Q||h);return Th.jsxs("tr",{"data-role":`bet-limits_${o}`,className:Hh.A({[xA]:k,[wh]:B,[LA]:i,[AA]:I,[hA]:X,[HA]:eh.DS.HAS_NOTCH,[EA]:eh.DS.IS_IPHONE14_PRO}),children:[Th.jsx("td",{className:Hh.A(Ph,{[ph]:!A&&!k,[gh]:H,[cA]:y}),colSpan:H?2:1,children:Th.jsxs("div",{className:oA,children:[m,H&&!!C&&Th.jsxs("span",{className:Kh,"data-min":L,"data-max":T,"data-role":"limits",children:[qh.be,C]})]})}),!H&&Th.jsx("td",{className:TA,children:Th.jsx("div",{className:oA,children:V?Th.jsxs("div",{"data-role":"ranks-and-suits",className:Hh.A(nh,{[bh]:k}),children:[...V]}):Q||!H&&Th.jsx("div",{"data-role":"min-max",className:Kh,"data-min":L,"data-max":T,children:C})})}),r&&Th.jsx("td",{className:Hh.A(Jh,{[gh]:H}),children:Th.jsx("div",{className:Hh.A(oA,{[NA]:Y,[Rh]:E.sU()}),"data-role":"payout",children:h})})]})}));QA.displayName="BetLimitsAndPayoutsRow";const IA="footerContentWrapper--24329",kA="mobile--5a6b8",_A=Ah.memo((({children:x,isMobile:o})=>Th.jsx("tr",{"data-role":"bet-limits-footer",children:Th.jsx("td",{colSpan:3,className:Hh.A(IA,{[kA]:o}),children:x})})));function XA(x){return void 0!==x.content}function rA(x){return void 0!==x.betKey}_A.displayName="BetLimitsAndPayoutsFooter";class yA extends Ah.Component{constructor(){super(...arguments),this.mapper=(x,o)=>{const{isDesktop:c}=this.props;if(void 0===(L=x).content&&void 0===L.betKey)return Th.jsx(QA,{isMobile:!c},o);var L;if(rA(x)){const{min:L,max:T,betTitle:h}=x,A=void 0===L&&void 0===T;return Ah.createElement(QA,{...x,key:o,isIndented:A,betTitle:h,isMobile:!c})}if(XA(x))return Th.jsx(_A,{isMobile:!c,children:x.content},o);throw new Error(`Component with '${JSON.stringify(x)}' props is not mapped`)}}shouldComponentUpdate(x){const{limitRows:o}=this.props;return function(x,o){var c,L;if(x.length!==o.length)return!1;let T=!0;for(let h=0;h<x.length;h++){const A=x[h],E=o[h];if(rA(A)&&rA(E)?T=A.betKey===E.betKey:XA(A)&&XA(E)&&(T=(null===(c=A.content)||void 0===c?void 0:c.toString())===(null===(L=E.content)||void 0===L?void 0:L.toString())),!T)break}return T}(x.limitRows,o)}render(){const{limitRows:x}=this.props;return x.map(this.mapper)}}const vA=hh.PA((()=>{const x=dh.P(),{betLimitsRows:o,footnotes:c}=x.limits,{isDesktop:L}=x.device,T=Ah.useMemo((()=>{return{content:(x=c,Th.jsx(jh,{footNotes:x})),isMobile:!L};var x}),[L,c]);return Th.jsx(yA,{limitRows:[...o,T],isDesktop:L})})),BA=Ah.memo((()=>Th.jsx("tbody",{children:Th.jsx(vA,{})}))),YA="footerGradient--f2e30",FA="blendedGameColorGradient--82edf",tA=hh.PA((()=>{const x=dh.P(),o=x.settings.isBaccaratV4?function(x,o){const c=Go.E2(x);return{height:Lx._m(1.2*o),"--game-color":c}}(x.layout.gameColor,x.settings.footerGradientHeight):function(x,o){const c=Go.E2(x),L=`\n        linear-gradient(\n            180deg,\n            rgba(${c},0) 0%,\n            rgba(${c},0.75) 39.04%,\n            ${x} 100%\n        )`;return{height:Lx._m(1.2*o),background:L}}(x.layout.gameUnderlayColor,x.settings.footerGradientHeight);return Th.jsx("div",{"data-role":"footer-gradient",className:Hh.A(YA,{[FA]:x.settings.isBaccaratV4}),style:o})}));var mA=c(573701);const CA={role:H.MultiplayButtonRoles.Game,tooltip:"tooltip.baccaratMultiplay"},VA=Ah.memo((({multiplayAvailable:x,app:o,setIsMultiplayOpened:c,isDesktop:L})=>{const{isOpened:T,toggleSidebar:h}=mA.M({app:o,sidebarFrameKey:o,logData:{type:"CLIENT_MULTIPLAY_PRESSED_FROM_TABLE"}});return Ah.useEffect((()=>{x&&c&&c(T)}),[T,x]),x?Th.jsx(H.MultiplayButton,{...L&&CA,state:T?"Activated":"Default",onClick:h,soundToPlay:ux.Wo.ClickUIButton}):null})),iA=hh.PA((()=>{const{layout:x,device:o}=dh.P();return Th.jsx(VA,{multiplayAvailable:x.isMultiplayAvailable,app:h.wq,isDesktop:o.isDesktop,isLandscape:o.isLandscape})})),MA="cameraSwitcher--1c917",ZA="desktop--cbb07",SA="heading--f339b",uA="standalone--4ca50",dA=[{value:Vc.Multi,translationKey:"settings.video.multipleCameras"},{value:Vc.Single,translationKey:"settings.video.singleCamera"}],OA=({hasMultipleStreams:x,cameraMode:o,standalone:c,setCameraMode:L,className:T})=>x?Th.jsxs("div",{className:Hh.A(MA,T,{[uA]:c}),children:[Th.jsx(Qh.q,{className:SA,children:"settings.video."+(c?"videoContent_uppercase":"videoContent")}),dA.length>0&&Th.jsx(Nh.P,{setValue:L,value:o,options:dA,variant:"with-anchor"})]}):null,jA=hh.PA((x=>{const o=dh.P(),c=!(!o.settings.desktopVideoPlaylist[Zc.VideoPlaylist.Classic3]&&!o.settings.desktopVideoPlaylist[Zc.VideoPlaylist.Classic4]),L=Ah.useCallback((x=>{o.preferences.updatePreferenceValue(Ac.CameraMode,x),o.log.clientPressedSetting(Ac.CameraMode,x)}),[o.preferences,o.log]);return Th.jsx(OA,{className:o.device.isDesktop?ZA:void 0,hasMultipleStreams:c,cameraMode:o.preferences.cameraMode,standalone:x.standalone,setCameraMode:L})}));var eA=c(806479);const qA=(fA=({checked:x,disabled:o,gameTheme:c,onChange:L,labelTranslationId:T})=>Th.jsx(eA.m,{checked:x,disabled:o,gameTheme:c,labelTranslationId:T,setChecked:L}),x=>({component:hh.PA((()=>{const o=T.Pj(),{key:c,disabled:L,hidden:h,labelTranslationId:A,tooltipTranslationId:E,role:H,onChange:N}=x(o),Q=c,I=Ah.useCallback((x=>{o.preferences.updatePreferenceValue(Q,x),null==N||N(x)}),[o,Q,N]);return h?null:Th.jsx(fA,{checked:o.preferences.getValue(Q),disabled:!!L,gameTheme:o.ag.gameTheme,onChange:I,role:H,labelTranslationId:A,tooltipTranslationId:E})}))}));var fA;const UA=[function(x){const o=qA((o=>{const{hidden:c,disabled:L}=x(o);return{key:ox.AllSideBets,labelTranslationId:"settings.sideBets.show",disabled:L,hidden:c}})).component;return{component:hh.PA((()=>{const c=T.Pj(),{hidden:L,disabled:h,tooltipTranslationId:A="tooltip.hideSideBets"}=x(c),H=Ah.useCallback((x=>{if(!h)return;const o=x.currentTarget.getBoundingClientRect(),{gameDimensions:L}=c.ag.values;c.ag.actions.tooltips.add({left:Math.round(o.left-L.left),top:Math.round(o.top-L.top),label:E.Tl(A),type:"hideSideBets"})}),[c,h,A]),N=Ah.useCallback((()=>{h&&c.ag.actions.tooltips.hideByType("hideSideBets")}),[c,h]);return L?null:Th.jsx("div",{onMouseEnter:H,onMouseLeave:N,children:Th.jsx(o,{})})}))}}((x=>({disabled:x.preferences.isAllSideBetsCheckboxDisabled,tooltipTranslationId:x.preferences.disabledAllSideBetsCheckboxTooltipKey,hidden:!x.betSpot.hasExtraSideBetsConfigured||x.settings.isMainBetsOnly}))),qA((x=>({key:Ac.ShowBettingStats,labelTranslationId:"settings.showStatistics",onChange:o=>x.log.clientPressedStatistics(o)})))];var sA=c(184787);const DA=Ah.memo((function({value:x,sign:o,align:c,theme:L,isStatic:T,withShadow:h}){const A=xL.ej(x),E="x"===o,H=E?A:`${o} ${A}`,N=E?`${H}${o}`:H;return Th.jsx(sA.L,{text:N,align:c,theme:L,isStatic:T,withShadow:h})})),$A="winnerMultiplierGroup--8c6eb",aA="isMobile--02ce6",zA="multiplier--9e7a2",lA=({multiplier:x})=>x?Th.jsx("span",{className:Hh.A($A,{[aA]:!eh.DS.IS_DESKTOP}),children:x.map(((x,o)=>{const c=`${x.value}-${o}`;return Th.jsx("span",{className:zA,children:Th.jsx(DA,{value:x.value,sign:"x",theme:x.theme,isStatic:!0})},c)}))}):null,GA=({multiplier:x})=>{if(!x)return null;const o=x.map((x=>({value:x})));return Th.jsx(lA,{multiplier:o})};var pA=c(528981),PA=c(99210);const KA=async(x,o,{customConfig:L,currencySymbol:T,gameTheme:h,customizableButton:A})=>{const{ReturnToPlayerChapter:H,SideBetsChapter:N}=await c.e(74695).then(c.bind(c,893438)),{GameRulesChapter:Q,PayoutsChapter:I}=await c.e(74695).then(c.bind(c,453082)),{GameObjectiveChapter:k,ScorecardsChapter:_,BetStatisticsChapter:X,MoreGamesChapter:r,PlaceBetsChapter:y}=await c.e(74695).then(c.bind(c,237107)),{SettingsChapter:v}=await c.e(5463).then(c.bind(c,867242));if(!L)throw new Error("Please provide all necessary props for customConfig");const{playerBankerPairEnabled:B,scorecardTheme:Y,isMultiplayEnabled:F,coefficientReductionsConfig:t,isNoMaxPayoutLimitInfo:m,isRtpProbabilityV2:C,volatility:V}=L,i=o.getTableName(),M=o.getChipAmounts(),Z=!B,S=Math.max(0,o.payoutLimit()),u=xL.ej(S,{currencySymbol:T}),d=o.useRedesignedDrawerHelp(),O=x===yx.OD.Desktop,j={id:"GameObjective",title:E.Tl("help.gameObjective.title"),content:Th.jsx(k,{tableName:i,lightning:!0})},e={id:"GameRulesLightning",title:E.Tl("help.gameRulesLightning.title"),content:Th.jsx(Q,{isHelpRedesigned:d,currencySymbol:T})},q={id:"Payouts",title:E.Tl("help.payouts.title"),content:Th.jsx(I,{payoutLimit:u,playerBankerPairEnabled:B,isHelpRedesigned:!O&&d,isNoMaxPayoutLimitInfo:m})},f={id:"Sidebets",title:E.Tl("help.sideBets.title"),content:Th.jsx(N,{perfectPairEnabled:!1,eitherPairEnabled:!1,superSixEnabled:!1,playerBankerBonusEnabled:!1,playerBankerPairEnabled:B,isHelpRedesigned:d,coefficientReductionsConfig:t})},U={id:"ReturnToPlayer",title:E.Tl("help.returnToPlayer.title"),content:Th.jsx(H,{noCommission:!1,perfectPairEnabled:!1,eitherPairEnabled:!1,superSixEnabled:!1,playerBankerBonusEnabled:!1,playerBankerPairEnabled:B,lightning:!0,isMainBetsOnly:Z,payoutLimit:u,isHelpRedesigned:d,probabilityPrizeForTie:C?"help.returnToPlayer.probabilityPrizeForTieV2":"help.returnToPlayer.probabilityPrizeForTie",volatility:V})},s=Math.max(Number(o.rawConfig.player_max_bet),Number(o.rawConfig.banker_max_bet)),D=Math.min(Number(o.rawConfig.player_min_bet),Number(o.rawConfig.banker_min_bet)),$={id:"PlaceBets",title:E.Tl("help.placeBets.title"),content:Th.jsx(y,{tableName:i,currencySymbol:T,maxLimit:s,minLimit:D,platform:x,dynamicLimits:{},dynamicOrder:[],chipAmounts:M,customizableButton:A})},a={id:"ScoreCards",title:E.Tl("help.scorecards.title"),content:Th.jsx(_,{lightning:!0,platform:x,scorecardTheme:Y})},z={id:"BetStatistics",title:E.Tl("help.betStatistics.title"),content:Th.jsx(X,{})},l={id:pA.t.MoreGames,title:E.Tl("help.moreGames.title"),content:Th.jsx(r,{platform:x,isMultiplayEnabled:F,gameTheme:h,isHelpRedesigned:d})},G={id:pA.t.Settings,title:E.Tl("help.settings.title"),content:Th.jsx(v,{platform:x,showScorecards:!0,showSideBets:!1,buttonType:A.all?"customizable":"secondary",isHelpRedesigned:d})};return[j,e,!Z&&f,q,U,$,pA.t.LiveSupport,z,pA.t.Chat,pA.t.Tipping,a,pA.t.GameNumber,pA.t.Sound,pA.t.GameHistory,G,pA.t.DepositAndWithdraw,pA.t.ResponsibleGaming,pA.t.InformazioniAams,pA.t.ErrorHandling,pA.t.DisconnectionPolicy,pA.t.AutomatedDecision,pA.t.Shuffling,l,pA.t.MultiGamePlay,pA.t.ShortcutKeys,pA.t.Home]},JA=async({settings:x,customConfig:o,currencySymbol:L,customizableButton:T})=>{const{ReturnToPlayerChapter:h,SideBetsChapter:A}=await c.e(74695).then(c.bind(c,893438)),{GameRulesChapter:H,PayoutsChapter:N}=await c.e(74695).then(c.bind(c,453082)),{GameObjectiveChapter:Q,ScorecardsChapter:I,BetStatisticsChapter:k,MultiplayChapter:_,PlaceBetsChapter:X}=await c.e(74695).then(c.bind(c,237107)),r=x.DeviceSupport.PLATFORM,{playerBankerPairEnabled:y,scorecardTheme:v,isMultiplayEnabled:B,coefficientReductionsConfig:Y,isNoMaxPayoutLimitInfo:F,isRtpProbabilityV2:t,volatility:m}=o,C=x.getTableName(),V=x.getChipAmounts(),i=!y,M=Math.max(0,x.payoutLimit()),Z=xL.ej(M,{currencySymbol:L}),S=x.useRedesignedDrawerHelp(),u=Math.max(Number(x.rawConfig.player_max_bet),Number(x.rawConfig.banker_max_bet)),d=Math.min(Number(x.rawConfig.player_min_bet),Number(x.rawConfig.banker_min_bet));return{customChapters:{gameDetails:[{chapters:[{id:"GameObjective",title:E.Tl("help.gameObjective.title"),content:Th.jsx(Q,{dualPlay:!1,tableName:C,lightning:!0,isGoldenWealth:!1,isPeek:!1,isXtreme:!1})},{id:"GameRulesLightning",title:E.Tl("help.gameRulesLightning.title"),content:Th.jsx(H,{isHelpRedesigned:S,currencySymbol:L})},{id:"Sidebets",title:E.Tl("help.sideBets.title"),content:Th.jsx(A,{perfectPairEnabled:!1,eitherPairEnabled:!1,superSixEnabled:!1,playerBankerBonusEnabled:!1,playerBankerPairEnabled:y,isHelpRedesigned:S,coefficientReductionsConfig:Y})},{id:"PlaceBets",title:E.Tl("help.placeBets.title"),content:Th.jsx(X,{tableName:C,currencySymbol:L,maxLimit:u,minLimit:d,platform:r,dynamicLimits:{},dynamicOrder:[],hasReductions:!1,chipAmounts:V,isMainOnlyReductionConfigured:!1,customizableButton:T})},{id:"Payouts",title:E.Tl("help.payouts.title"),content:Th.jsx(N,{payoutLimit:Z,playerBankerPairEnabled:y,isHelpRedesigned:S,isNoMaxPayoutLimitInfo:F})},{id:"ReturnToPlayer",title:E.Tl("help.returnToPlayer.title"),content:Th.jsx(h,{isXtreme:!1,noCommission:!1,perfectPairEnabled:!1,eitherPairEnabled:!1,superSixEnabled:!1,playerBankerBonusEnabled:!1,playerBankerPairEnabled:y,lightning:!0,useRedEnvelope:!1,isMainBetsOnly:i,isGoldenWealth:!1,isPeek:!1,tiePayoutNine:!1,payoutLimit:Z,isHelpRedesigned:S,probabilityPrizeForTie:t?"help.returnToPlayer.probabilityPrizeForTieV2":"help.returnToPlayer.probabilityPrizeForTie",volatility:m})},{id:"BetStatistics",title:E.Tl("help.betStatistics.title"),content:Th.jsx(k,{})},{id:"ScoreCards",title:E.Tl("help.scorecards.title"),content:Th.jsx(I,{lightning:!0,platform:r,scorecardTheme:v,isGoldenWealth:!1,isXtreme:!1})},{id:"Multiplay",title:E.Tl("help.multiplay.title"),content:Th.jsx(_,{platform:r})}]}]},filterMap:{overrideDefault:{[PA.C.SpeedMode]:!1},custom:{Sidebets:!i,Multiplay:B}}}};var nA=c(973580),bA=c(28230),WA=c(13799);const wA={logClientPopupBubbleAction:D.ID},gA=nA.gv((function(x){return{isLandscape:WA.V6(x)===vx.t.Landscape}}),wA)(bA.f),RA="bubble--5d42a",xE="phone--d1ed1",oE="landscape--ad7b8",cE="popupBubbleRoot--b93d0";function LE(x){const{platform:o,orientation:c,visible:L,onClose:T,label:h}=x,A=o===yx.OD.Desktop,E=A||c!==vx.t.Landscape?"TopCenter":"TopRight",H=Hh.A(RA,{[xE]:o===yx.OD.Phone,[oE]:c===vx.t.Landscape});return Th.jsx(gA,{width:A?Lx._m(50.4):void 0,isFloating:!0,position:E,className:H,visible:L,onClose:T,label:h,loggedFeatureName:"DealNowWarning",isArrowPointOnCenter:!0,rootPositionClassName:Hh.A({[cE]:"TopRight"===E})})}const TE=hh.PA((()=>{const x=dh.P(),o=Ah.useCallback((()=>x.dealNow.closeBubble()),[x.dealNow]);return Th.jsx(LE,{visible:x.dealNow.isBubbleVisible,label:E.Tl("bubble.takeYourTime"),orientation:x.device.orientation,platform:x.device.platform,onClose:o})}));var hE=c(776924);const AE=hh.PA((({setContainerVisibility:x})=>{const o=dh.P(),c=Ah.useCallback((()=>{o.dealNow.updateStatus(ro.Z.Waiting),o.messageSender.dealNow(),o.log.clientPressedDealNow()}),[o]),L=Ah.useCallback((x=>o.dealNow.showTooltip(x)),[o.dealNow]);return Th.jsx(hE.e,{isMobile:!o.device.isDesktop,disableAnimations:!1,isVisible:o.dealNow.isButtonVisible,status:o.dealNow.status,handleDealNow:c,showDealNowTooltip:L,setContainerVisibility:x})})),EE="container--05371",HE="toCollapsed--bbc7c",NE="fromCollapsed--dd518",QE="collapsed--69ab9",IE="perspective--54735",kE="footerPreOverlay--f30bd",_E="indented--51209",XE=({children:x,isBettingTime:o,timeRemaining:c,liftUpTimer:L})=>{const[T,h]=Ah.useState(QE),A=function(){const[x,o]=Ah.useState(!0);return Ah.useLayoutEffect((()=>{o(!1)}),[]),x}(),E=dh.P().dealNow.isButtonVisible;return Ah.useEffect((()=>{o&&h(HE)}),[o]),A?null:Th.jsxs("div",{className:IE,children:[E&&Th.jsxs("div",{className:kE,children:[Th.jsx(TE,{}),Th.jsx(AE,{})]}),Th.jsx("div",{className:Hh.A(EE,{[T]:!o,[NE]:o&&c>5,[_E]:L}),children:x})]})};var rE=c(732319),yE=c(811914),vE=c(99496);const BE=hh.PA((x=>{const o=dh.P(),{scale:c,scaledWidth:L,scaledHeight:T}=o.layout.bettingGridScaleFactor,h=rE.v(o.reference.bubble.set,Ix.BettingGrid);return Th.jsx(yE.O8,{...x,bubbleRef:h,isVertical:o.device.isPortrait,isBettingTime:o.gamePhase.isBetsOpen,isDesktop:o.device.isDesktop,betSpotSize:vE.Z(o.device),leftBetSpots:o.betSpot.leftBetSpots,rightBetSpots:o.betSpot.rightBetSpots,scale:c,scaledWidth:L,scaledHeight:T,isSingleSideBetSpotsRow:o.betSpot.isSingleSideBetsRow,redEnvelopeEnabled:o.settings.useRedEnvelopePayouts,isIOS:o.device.DS.IS_IOS})}));var YE;!function(x){x.None="none",x.Yellow="yellow"}(YE||(YE={}));class FE{constructor(x,o,c){this.lightningCreator=x,this.scene3d=o,this.orientation=c,this.borders=new Map}update(x){var o,c;for(const L of x){const x=this.borders.get(L.name);if(x)x.color!==L.color&&(x.color=L.color,x.lightning.changeColor(L.color));else{const x=this.lightningCreator.create(L,this.scene3d,this.orientation);this.borders.set(L.name,{color:L.color,lightning:x})}L.color!==YE.None?null===(o=this.borders.get(L.name))||void 0===o||o.lightning.start():null===(c=this.borders.get(L.name))||void 0===c||c.lightning.stop()}}hide(x){if(x){const o=this.borders.get(x);o&&o.lightning.stop()}else for(const[,x]of this.borders)x.lightning.stop()}reset(){for(const[,x]of this.borders)x.lightning.dispose();this.borders.clear()}setScene(x){this.scene3d=x}setOrientation(x){this.orientation=x}}const tE=0,mE=1,CE=2,VE=100,iE=101,ME=102,ZE=200,SE=201,uE=202,dE=203,OE=204,jE=205,eE=206,qE=207,fE=208,UE=209,sE=210,DE=1e3,$E=1001,aE=1002,zE=1003,lE=1004,GE=1005,pE=1006,PE=1007,KE=1008,JE="srgb",nE="srgb-linear",bE="display-p3",WE=512,wE=513,gE=514,RE=515,xH=516,oH=517,cH=518,LH=519;class TH{addEventListener(x,o){void 0===this._listeners&&(this._listeners={});const c=this._listeners;void 0===c[x]&&(c[x]=[]),-1===c[x].indexOf(o)&&c[x].push(o)}hasEventListener(x,o){if(void 0===this._listeners)return!1;const c=this._listeners;return void 0!==c[x]&&-1!==c[x].indexOf(o)}removeEventListener(x,o){if(void 0===this._listeners)return;const c=this._listeners[x];if(void 0!==c){const x=c.indexOf(o);-1!==x&&c.splice(x,1)}}dispatchEvent(x){if(void 0===this._listeners)return;const o=this._listeners[x.type];if(void 0!==o){x.target=this;const c=o.slice(0);for(let o=0,L=c.length;o<L;o++)c[o].call(this,x);x.target=null}}}const hH=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],AH=Math.PI/180,EH=180/Math.PI;function HH(){const x=4294967295*Math.random()|0,o=4294967295*Math.random()|0,c=4294967295*Math.random()|0,L=4294967295*Math.random()|0;return(hH[255&x]+hH[x>>8&255]+hH[x>>16&255]+hH[x>>24&255]+"-"+hH[255&o]+hH[o>>8&255]+"-"+hH[o>>16&15|64]+hH[o>>24&255]+"-"+hH[63&c|128]+hH[c>>8&255]+"-"+hH[c>>16&255]+hH[c>>24&255]+hH[255&L]+hH[L>>8&255]+hH[L>>16&255]+hH[L>>24&255]).toLowerCase()}function NH(x,o,c){return Math.max(o,Math.min(c,x))}function QH(x,o,c){return(1-c)*x+c*o}function IH(x){return!(x&x-1)&&0!==x}function kH(x){return Math.pow(2,Math.floor(Math.log(x)/Math.LN2))}function _H(x,o){switch(o.constructor){case Float32Array:return x;case Uint32Array:return x/4294967295;case Uint16Array:return x/65535;case Uint8Array:return x/255;case Int32Array:return Math.max(x/2147483647,-1);case Int16Array:return Math.max(x/32767,-1);case Int8Array:return Math.max(x/127,-1);default:throw new Error("Invalid component type.")}}function XH(x,o){switch(o.constructor){case Float32Array:return x;case Uint32Array:return Math.round(4294967295*x);case Uint16Array:return Math.round(65535*x);case Uint8Array:return Math.round(255*x);case Int32Array:return Math.round(2147483647*x);case Int16Array:return Math.round(32767*x);case Int8Array:return Math.round(127*x);default:throw new Error("Invalid component type.")}}class rH{constructor(x=0,o=0){rH.prototype.isVector2=!0,this.x=x,this.y=o}get width(){return this.x}set width(x){this.x=x}get height(){return this.y}set height(x){this.y=x}set(x,o){return this.x=x,this.y=o,this}setScalar(x){return this.x=x,this.y=x,this}setX(x){return this.x=x,this}setY(x){return this.y=x,this}setComponent(x,o){switch(x){case 0:this.x=o;break;case 1:this.y=o;break;default:throw new Error("index is out of range: "+x)}return this}getComponent(x){switch(x){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+x)}}clone(){return new this.constructor(this.x,this.y)}copy(x){return this.x=x.x,this.y=x.y,this}add(x){return this.x+=x.x,this.y+=x.y,this}addScalar(x){return this.x+=x,this.y+=x,this}addVectors(x,o){return this.x=x.x+o.x,this.y=x.y+o.y,this}addScaledVector(x,o){return this.x+=x.x*o,this.y+=x.y*o,this}sub(x){return this.x-=x.x,this.y-=x.y,this}subScalar(x){return this.x-=x,this.y-=x,this}subVectors(x,o){return this.x=x.x-o.x,this.y=x.y-o.y,this}multiply(x){return this.x*=x.x,this.y*=x.y,this}multiplyScalar(x){return this.x*=x,this.y*=x,this}divide(x){return this.x/=x.x,this.y/=x.y,this}divideScalar(x){return this.multiplyScalar(1/x)}applyMatrix3(x){const o=this.x,c=this.y,L=x.elements;return this.x=L[0]*o+L[3]*c+L[6],this.y=L[1]*o+L[4]*c+L[7],this}min(x){return this.x=Math.min(this.x,x.x),this.y=Math.min(this.y,x.y),this}max(x){return this.x=Math.max(this.x,x.x),this.y=Math.max(this.y,x.y),this}clamp(x,o){return this.x=Math.max(x.x,Math.min(o.x,this.x)),this.y=Math.max(x.y,Math.min(o.y,this.y)),this}clampScalar(x,o){return this.x=Math.max(x,Math.min(o,this.x)),this.y=Math.max(x,Math.min(o,this.y)),this}clampLength(x,o){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(x,Math.min(o,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(x){return this.x*x.x+this.y*x.y}cross(x){return this.x*x.y-this.y*x.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(x){const o=Math.sqrt(this.lengthSq()*x.lengthSq());if(0===o)return Math.PI/2;const c=this.dot(x)/o;return Math.acos(NH(c,-1,1))}distanceTo(x){return Math.sqrt(this.distanceToSquared(x))}distanceToSquared(x){const o=this.x-x.x,c=this.y-x.y;return o*o+c*c}manhattanDistanceTo(x){return Math.abs(this.x-x.x)+Math.abs(this.y-x.y)}setLength(x){return this.normalize().multiplyScalar(x)}lerp(x,o){return this.x+=(x.x-this.x)*o,this.y+=(x.y-this.y)*o,this}lerpVectors(x,o,c){return this.x=x.x+(o.x-x.x)*c,this.y=x.y+(o.y-x.y)*c,this}equals(x){return x.x===this.x&&x.y===this.y}fromArray(x,o=0){return this.x=x[o],this.y=x[o+1],this}toArray(x=[],o=0){return x[o]=this.x,x[o+1]=this.y,x}fromBufferAttribute(x,o){return this.x=x.getX(o),this.y=x.getY(o),this}rotateAround(x,o){const c=Math.cos(o),L=Math.sin(o),T=this.x-x.x,h=this.y-x.y;return this.x=T*c-h*L+x.x,this.y=T*L+h*c+x.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class yH{constructor(x,o,c,L,T,h,A,E,H){yH.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==x&&this.set(x,o,c,L,T,h,A,E,H)}set(x,o,c,L,T,h,A,E,H){const N=this.elements;return N[0]=x,N[1]=L,N[2]=A,N[3]=o,N[4]=T,N[5]=E,N[6]=c,N[7]=h,N[8]=H,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(x){const o=this.elements,c=x.elements;return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],this}extractBasis(x,o,c){return x.setFromMatrix3Column(this,0),o.setFromMatrix3Column(this,1),c.setFromMatrix3Column(this,2),this}setFromMatrix4(x){const o=x.elements;return this.set(o[0],o[4],o[8],o[1],o[5],o[9],o[2],o[6],o[10]),this}multiply(x){return this.multiplyMatrices(this,x)}premultiply(x){return this.multiplyMatrices(x,this)}multiplyMatrices(x,o){const c=x.elements,L=o.elements,T=this.elements,h=c[0],A=c[3],E=c[6],H=c[1],N=c[4],Q=c[7],I=c[2],k=c[5],_=c[8],X=L[0],r=L[3],y=L[6],v=L[1],B=L[4],Y=L[7],F=L[2],t=L[5],m=L[8];return T[0]=h*X+A*v+E*F,T[3]=h*r+A*B+E*t,T[6]=h*y+A*Y+E*m,T[1]=H*X+N*v+Q*F,T[4]=H*r+N*B+Q*t,T[7]=H*y+N*Y+Q*m,T[2]=I*X+k*v+_*F,T[5]=I*r+k*B+_*t,T[8]=I*y+k*Y+_*m,this}multiplyScalar(x){const o=this.elements;return o[0]*=x,o[3]*=x,o[6]*=x,o[1]*=x,o[4]*=x,o[7]*=x,o[2]*=x,o[5]*=x,o[8]*=x,this}determinant(){const x=this.elements,o=x[0],c=x[1],L=x[2],T=x[3],h=x[4],A=x[5],E=x[6],H=x[7],N=x[8];return o*h*N-o*A*H-c*T*N+c*A*E+L*T*H-L*h*E}invert(){const x=this.elements,o=x[0],c=x[1],L=x[2],T=x[3],h=x[4],A=x[5],E=x[6],H=x[7],N=x[8],Q=N*h-A*H,I=A*E-N*T,k=H*T-h*E,_=o*Q+c*I+L*k;if(0===_)return this.set(0,0,0,0,0,0,0,0,0);const X=1/_;return x[0]=Q*X,x[1]=(L*H-N*c)*X,x[2]=(A*c-L*h)*X,x[3]=I*X,x[4]=(N*o-L*E)*X,x[5]=(L*T-A*o)*X,x[6]=k*X,x[7]=(c*E-H*o)*X,x[8]=(h*o-c*T)*X,this}transpose(){let x;const o=this.elements;return x=o[1],o[1]=o[3],o[3]=x,x=o[2],o[2]=o[6],o[6]=x,x=o[5],o[5]=o[7],o[7]=x,this}getNormalMatrix(x){return this.setFromMatrix4(x).invert().transpose()}transposeIntoArray(x){const o=this.elements;return x[0]=o[0],x[1]=o[3],x[2]=o[6],x[3]=o[1],x[4]=o[4],x[5]=o[7],x[6]=o[2],x[7]=o[5],x[8]=o[8],this}setUvTransform(x,o,c,L,T,h,A){const E=Math.cos(T),H=Math.sin(T);return this.set(c*E,c*H,-c*(E*h+H*A)+h+x,-L*H,L*E,-L*(-H*h+E*A)+A+o,0,0,1),this}scale(x,o){return this.premultiply(vH.makeScale(x,o)),this}rotate(x){return this.premultiply(vH.makeRotation(-x)),this}translate(x,o){return this.premultiply(vH.makeTranslation(x,o)),this}makeTranslation(x,o){return x.isVector2?this.set(1,0,x.x,0,1,x.y,0,0,1):this.set(1,0,x,0,1,o,0,0,1),this}makeRotation(x){const o=Math.cos(x),c=Math.sin(x);return this.set(o,-c,0,c,o,0,0,0,1),this}makeScale(x,o){return this.set(x,0,0,0,o,0,0,0,1),this}equals(x){const o=this.elements,c=x.elements;for(let x=0;x<9;x++)if(o[x]!==c[x])return!1;return!0}fromArray(x,o=0){for(let c=0;c<9;c++)this.elements[c]=x[c+o];return this}toArray(x=[],o=0){const c=this.elements;return x[o]=c[0],x[o+1]=c[1],x[o+2]=c[2],x[o+3]=c[3],x[o+4]=c[4],x[o+5]=c[5],x[o+6]=c[6],x[o+7]=c[7],x[o+8]=c[8],x}clone(){return(new this.constructor).fromArray(this.elements)}}const vH=new yH;function BH(x){for(let o=x.length-1;o>=0;--o)if(x[o]>=65535)return!0;return!1}function YH(x){return document.createElementNS("http://www.w3.org/1999/xhtml",x)}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const FH={};function tH(x){x in FH||(FH[x]=!0,console.warn(x))}function mH(x){return x<.04045?.0773993808*x:Math.pow(.9478672986*x+.0521327014,2.4)}function CH(x){return x<.0031308?12.92*x:1.055*Math.pow(x,.41666)-.055}const VH=(new yH).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),iH=(new yH).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),MH={[nE]:x=>x,[JE]:x=>x.convertSRGBToLinear(),[bE]:function(x){return x.convertSRGBToLinear().applyMatrix3(iH)}},ZH={[nE]:x=>x,[JE]:x=>x.convertLinearToSRGB(),[bE]:function(x){return x.applyMatrix3(VH).convertLinearToSRGB()}},SH={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(x){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!x},get workingColorSpace(){return"srgb-linear"},set workingColorSpace(x){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(x,o,c){if(!1===this.enabled||o===c||!o||!c)return x;const L=MH[o],T=ZH[c];if(void 0===L||void 0===T)throw new Error(`Unsupported color space conversion, "${o}" to "${c}".`);return T(L(x))},fromWorkingColorSpace:function(x,o){return this.convert(x,this.workingColorSpace,o)},toWorkingColorSpace:function(x,o){return this.convert(x,o,this.workingColorSpace)}};let uH;class dH{static getDataURL(x){if(/^data:/i.test(x.src))return x.src;if("undefined"==typeof HTMLCanvasElement)return x.src;let o;if(x instanceof HTMLCanvasElement)o=x;else{void 0===uH&&(uH=YH("canvas")),uH.width=x.width,uH.height=x.height;const c=uH.getContext("2d");x instanceof ImageData?c.putImageData(x,0,0):c.drawImage(x,0,0,x.width,x.height),o=uH}return o.width>2048||o.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",x),o.toDataURL("image/jpeg",.6)):o.toDataURL("image/png")}static sRGBToLinear(x){if("undefined"!=typeof HTMLImageElement&&x instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&x instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&x instanceof ImageBitmap){const o=YH("canvas");o.width=x.width,o.height=x.height;const c=o.getContext("2d");c.drawImage(x,0,0,x.width,x.height);const L=c.getImageData(0,0,x.width,x.height),T=L.data;for(let x=0;x<T.length;x++)T[x]=255*mH(T[x]/255);return c.putImageData(L,0,0),o}if(x.data){const o=x.data.slice(0);for(let x=0;x<o.length;x++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[x]=Math.floor(255*mH(o[x]/255)):o[x]=mH(o[x]);return{data:o,width:x.width,height:x.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),x}}let OH=0;class jH{constructor(x=null){this.isSource=!0,Object.defineProperty(this,"id",{value:OH++}),this.uuid=HH(),this.data=x,this.version=0}set needsUpdate(x){!0===x&&this.version++}toJSON(x){const o=void 0===x||"string"==typeof x;if(!o&&void 0!==x.images[this.uuid])return x.images[this.uuid];const c={uuid:this.uuid,url:""},L=this.data;if(null!==L){let x;if(Array.isArray(L)){x=[];for(let o=0,c=L.length;o<c;o++)L[o].isDataTexture?x.push(eH(L[o].image)):x.push(eH(L[o]))}else x=eH(L);c.url=x}return o||(x.images[this.uuid]=c),c}}function eH(x){return"undefined"!=typeof HTMLImageElement&&x instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&x instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&x instanceof ImageBitmap?dH.getDataURL(x):x.data?{data:Array.from(x.data),width:x.width,height:x.height,type:x.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let qH=0;class fH extends TH{constructor(x=fH.DEFAULT_IMAGE,o=fH.DEFAULT_MAPPING,c=1001,L=1001,T=1006,h=1008,A=1023,E=1009,H=fH.DEFAULT_ANISOTROPY,N=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:qH++}),this.uuid=HH(),this.name="",this.source=new jH(x),this.mipmaps=[],this.mapping=o,this.channel=0,this.wrapS=c,this.wrapT=L,this.magFilter=T,this.minFilter=h,this.anisotropy=H,this.format=A,this.internalFormat=null,this.type=E,this.offset=new rH(0,0),this.repeat=new rH(1,1),this.center=new rH(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yH,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof N?this.colorSpace=N:(tH("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=3001===N?"srgb":""),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(x=null){this.source.data=x}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(x){return this.name=x.name,this.source=x.source,this.mipmaps=x.mipmaps.slice(0),this.mapping=x.mapping,this.channel=x.channel,this.wrapS=x.wrapS,this.wrapT=x.wrapT,this.magFilter=x.magFilter,this.minFilter=x.minFilter,this.anisotropy=x.anisotropy,this.format=x.format,this.internalFormat=x.internalFormat,this.type=x.type,this.offset.copy(x.offset),this.repeat.copy(x.repeat),this.center.copy(x.center),this.rotation=x.rotation,this.matrixAutoUpdate=x.matrixAutoUpdate,this.matrix.copy(x.matrix),this.generateMipmaps=x.generateMipmaps,this.premultiplyAlpha=x.premultiplyAlpha,this.flipY=x.flipY,this.unpackAlignment=x.unpackAlignment,this.colorSpace=x.colorSpace,this.userData=JSON.parse(JSON.stringify(x.userData)),this.needsUpdate=!0,this}toJSON(x){const o=void 0===x||"string"==typeof x;if(!o&&void 0!==x.textures[this.uuid])return x.textures[this.uuid];const c={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(x).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(c.userData=this.userData),o||(x.textures[this.uuid]=c),c}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(x){if(300!==this.mapping)return x;if(x.applyMatrix3(this.matrix),x.x<0||x.x>1)switch(this.wrapS){case 1e3:x.x=x.x-Math.floor(x.x);break;case 1001:x.x=x.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(x.x)%2)?x.x=Math.ceil(x.x)-x.x:x.x=x.x-Math.floor(x.x)}if(x.y<0||x.y>1)switch(this.wrapT){case 1e3:x.y=x.y-Math.floor(x.y);break;case 1001:x.y=x.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(x.y)%2)?x.y=Math.ceil(x.y)-x.y:x.y=x.y-Math.floor(x.y)}return this.flipY&&(x.y=1-x.y),x}set needsUpdate(x){!0===x&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return tH("THREE.Texture: Property .encoding has been replaced by .colorSpace."),"srgb"===this.colorSpace?3001:3e3}set encoding(x){tH("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=3001===x?"srgb":""}}fH.DEFAULT_IMAGE=null,fH.DEFAULT_MAPPING=300,fH.DEFAULT_ANISOTROPY=1;class UH{constructor(x=0,o=0,c=0,L=1){UH.prototype.isVector4=!0,this.x=x,this.y=o,this.z=c,this.w=L}get width(){return this.z}set width(x){this.z=x}get height(){return this.w}set height(x){this.w=x}set(x,o,c,L){return this.x=x,this.y=o,this.z=c,this.w=L,this}setScalar(x){return this.x=x,this.y=x,this.z=x,this.w=x,this}setX(x){return this.x=x,this}setY(x){return this.y=x,this}setZ(x){return this.z=x,this}setW(x){return this.w=x,this}setComponent(x,o){switch(x){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;case 3:this.w=o;break;default:throw new Error("index is out of range: "+x)}return this}getComponent(x){switch(x){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+x)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(x){return this.x=x.x,this.y=x.y,this.z=x.z,this.w=void 0!==x.w?x.w:1,this}add(x){return this.x+=x.x,this.y+=x.y,this.z+=x.z,this.w+=x.w,this}addScalar(x){return this.x+=x,this.y+=x,this.z+=x,this.w+=x,this}addVectors(x,o){return this.x=x.x+o.x,this.y=x.y+o.y,this.z=x.z+o.z,this.w=x.w+o.w,this}addScaledVector(x,o){return this.x+=x.x*o,this.y+=x.y*o,this.z+=x.z*o,this.w+=x.w*o,this}sub(x){return this.x-=x.x,this.y-=x.y,this.z-=x.z,this.w-=x.w,this}subScalar(x){return this.x-=x,this.y-=x,this.z-=x,this.w-=x,this}subVectors(x,o){return this.x=x.x-o.x,this.y=x.y-o.y,this.z=x.z-o.z,this.w=x.w-o.w,this}multiply(x){return this.x*=x.x,this.y*=x.y,this.z*=x.z,this.w*=x.w,this}multiplyScalar(x){return this.x*=x,this.y*=x,this.z*=x,this.w*=x,this}applyMatrix4(x){const o=this.x,c=this.y,L=this.z,T=this.w,h=x.elements;return this.x=h[0]*o+h[4]*c+h[8]*L+h[12]*T,this.y=h[1]*o+h[5]*c+h[9]*L+h[13]*T,this.z=h[2]*o+h[6]*c+h[10]*L+h[14]*T,this.w=h[3]*o+h[7]*c+h[11]*L+h[15]*T,this}divideScalar(x){return this.multiplyScalar(1/x)}setAxisAngleFromQuaternion(x){this.w=2*Math.acos(x.w);const o=Math.sqrt(1-x.w*x.w);return o<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=x.x/o,this.y=x.y/o,this.z=x.z/o),this}setAxisAngleFromRotationMatrix(x){let o,c,L,T;const h=x.elements,A=h[0],E=h[4],H=h[8],N=h[1],Q=h[5],I=h[9],k=h[2],_=h[6],X=h[10];if(Math.abs(E-N)<.01&&Math.abs(H-k)<.01&&Math.abs(I-_)<.01){if(Math.abs(E+N)<.1&&Math.abs(H+k)<.1&&Math.abs(I+_)<.1&&Math.abs(A+Q+X-3)<.1)return this.set(1,0,0,0),this;o=Math.PI;const x=(A+1)/2,h=(Q+1)/2,r=(X+1)/2,y=(E+N)/4,v=(H+k)/4,B=(I+_)/4;return x>h&&x>r?x<.01?(c=0,L=.707106781,T=.707106781):(c=Math.sqrt(x),L=y/c,T=v/c):h>r?h<.01?(c=.707106781,L=0,T=.707106781):(L=Math.sqrt(h),c=y/L,T=B/L):r<.01?(c=.707106781,L=.707106781,T=0):(T=Math.sqrt(r),c=v/T,L=B/T),this.set(c,L,T,o),this}let r=Math.sqrt((_-I)*(_-I)+(H-k)*(H-k)+(N-E)*(N-E));return Math.abs(r)<.001&&(r=1),this.x=(_-I)/r,this.y=(H-k)/r,this.z=(N-E)/r,this.w=Math.acos((A+Q+X-1)/2),this}min(x){return this.x=Math.min(this.x,x.x),this.y=Math.min(this.y,x.y),this.z=Math.min(this.z,x.z),this.w=Math.min(this.w,x.w),this}max(x){return this.x=Math.max(this.x,x.x),this.y=Math.max(this.y,x.y),this.z=Math.max(this.z,x.z),this.w=Math.max(this.w,x.w),this}clamp(x,o){return this.x=Math.max(x.x,Math.min(o.x,this.x)),this.y=Math.max(x.y,Math.min(o.y,this.y)),this.z=Math.max(x.z,Math.min(o.z,this.z)),this.w=Math.max(x.w,Math.min(o.w,this.w)),this}clampScalar(x,o){return this.x=Math.max(x,Math.min(o,this.x)),this.y=Math.max(x,Math.min(o,this.y)),this.z=Math.max(x,Math.min(o,this.z)),this.w=Math.max(x,Math.min(o,this.w)),this}clampLength(x,o){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(x,Math.min(o,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(x){return this.x*x.x+this.y*x.y+this.z*x.z+this.w*x.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(x){return this.normalize().multiplyScalar(x)}lerp(x,o){return this.x+=(x.x-this.x)*o,this.y+=(x.y-this.y)*o,this.z+=(x.z-this.z)*o,this.w+=(x.w-this.w)*o,this}lerpVectors(x,o,c){return this.x=x.x+(o.x-x.x)*c,this.y=x.y+(o.y-x.y)*c,this.z=x.z+(o.z-x.z)*c,this.w=x.w+(o.w-x.w)*c,this}equals(x){return x.x===this.x&&x.y===this.y&&x.z===this.z&&x.w===this.w}fromArray(x,o=0){return this.x=x[o],this.y=x[o+1],this.z=x[o+2],this.w=x[o+3],this}toArray(x=[],o=0){return x[o]=this.x,x[o+1]=this.y,x[o+2]=this.z,x[o+3]=this.w,x}fromBufferAttribute(x,o){return this.x=x.getX(o),this.y=x.getY(o),this.z=x.getZ(o),this.w=x.getW(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class sH extends TH{constructor(x=1,o=1,c={}){super(),this.isRenderTarget=!0,this.width=x,this.height=o,this.depth=1,this.scissor=new UH(0,0,x,o),this.scissorTest=!1,this.viewport=new UH(0,0,x,o);const L={width:x,height:o,depth:1};void 0!==c.encoding&&(tH("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),c.colorSpace=3001===c.encoding?"srgb":""),this.texture=new fH(L,c.mapping,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==c.generateMipmaps&&c.generateMipmaps,this.texture.internalFormat=void 0!==c.internalFormat?c.internalFormat:null,this.texture.minFilter=void 0!==c.minFilter?c.minFilter:1006,this.depthBuffer=void 0===c.depthBuffer||c.depthBuffer,this.stencilBuffer=void 0!==c.stencilBuffer&&c.stencilBuffer,this.depthTexture=void 0!==c.depthTexture?c.depthTexture:null,this.samples=void 0!==c.samples?c.samples:0}setSize(x,o,c=1){this.width===x&&this.height===o&&this.depth===c||(this.width=x,this.height=o,this.depth=c,this.texture.image.width=x,this.texture.image.height=o,this.texture.image.depth=c,this.dispose()),this.viewport.set(0,0,x,o),this.scissor.set(0,0,x,o)}clone(){return(new this.constructor).copy(this)}copy(x){this.width=x.width,this.height=x.height,this.depth=x.depth,this.scissor.copy(x.scissor),this.scissorTest=x.scissorTest,this.viewport.copy(x.viewport),this.texture=x.texture.clone(),this.texture.isRenderTargetTexture=!0;const o=Object.assign({},x.texture.image);return this.texture.source=new jH(o),this.depthBuffer=x.depthBuffer,this.stencilBuffer=x.stencilBuffer,null!==x.depthTexture&&(this.depthTexture=x.depthTexture.clone()),this.samples=x.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class DH extends sH{constructor(x=1,o=1,c={}){super(x,o,c),this.isWebGLRenderTarget=!0}}class $H extends fH{constructor(x=null,o=1,c=1,L=1){super(null),this.isDataArrayTexture=!0,this.image={data:x,width:o,height:c,depth:L},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class aH{constructor(x=0,o=0,c=0,L=1){this.isQuaternion=!0,this._x=x,this._y=o,this._z=c,this._w=L}static slerpFlat(x,o,c,L,T,h,A){let E=c[L+0],H=c[L+1],N=c[L+2],Q=c[L+3];const I=T[h+0],k=T[h+1],_=T[h+2],X=T[h+3];if(0===A)return x[o+0]=E,x[o+1]=H,x[o+2]=N,void(x[o+3]=Q);if(1===A)return x[o+0]=I,x[o+1]=k,x[o+2]=_,void(x[o+3]=X);if(Q!==X||E!==I||H!==k||N!==_){let x=1-A;const o=E*I+H*k+N*_+Q*X,c=o>=0?1:-1,L=1-o*o;if(L>Number.EPSILON){const T=Math.sqrt(L),h=Math.atan2(T,o*c);x=Math.sin(x*h)/T,A=Math.sin(A*h)/T}const T=A*c;if(E=E*x+I*T,H=H*x+k*T,N=N*x+_*T,Q=Q*x+X*T,x===1-A){const x=1/Math.sqrt(E*E+H*H+N*N+Q*Q);E*=x,H*=x,N*=x,Q*=x}}x[o]=E,x[o+1]=H,x[o+2]=N,x[o+3]=Q}static multiplyQuaternionsFlat(x,o,c,L,T,h){const A=c[L],E=c[L+1],H=c[L+2],N=c[L+3],Q=T[h],I=T[h+1],k=T[h+2],_=T[h+3];return x[o]=A*_+N*Q+E*k-H*I,x[o+1]=E*_+N*I+H*Q-A*k,x[o+2]=H*_+N*k+A*I-E*Q,x[o+3]=N*_-A*Q-E*I-H*k,x}get x(){return this._x}set x(x){this._x=x,this._onChangeCallback()}get y(){return this._y}set y(x){this._y=x,this._onChangeCallback()}get z(){return this._z}set z(x){this._z=x,this._onChangeCallback()}get w(){return this._w}set w(x){this._w=x,this._onChangeCallback()}set(x,o,c,L){return this._x=x,this._y=o,this._z=c,this._w=L,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(x){return this._x=x.x,this._y=x.y,this._z=x.z,this._w=x.w,this._onChangeCallback(),this}setFromEuler(x,o){const c=x._x,L=x._y,T=x._z,h=x._order,A=Math.cos,E=Math.sin,H=A(c/2),N=A(L/2),Q=A(T/2),I=E(c/2),k=E(L/2),_=E(T/2);switch(h){case"XYZ":this._x=I*N*Q+H*k*_,this._y=H*k*Q-I*N*_,this._z=H*N*_+I*k*Q,this._w=H*N*Q-I*k*_;break;case"YXZ":this._x=I*N*Q+H*k*_,this._y=H*k*Q-I*N*_,this._z=H*N*_-I*k*Q,this._w=H*N*Q+I*k*_;break;case"ZXY":this._x=I*N*Q-H*k*_,this._y=H*k*Q+I*N*_,this._z=H*N*_+I*k*Q,this._w=H*N*Q-I*k*_;break;case"ZYX":this._x=I*N*Q-H*k*_,this._y=H*k*Q+I*N*_,this._z=H*N*_-I*k*Q,this._w=H*N*Q+I*k*_;break;case"YZX":this._x=I*N*Q+H*k*_,this._y=H*k*Q+I*N*_,this._z=H*N*_-I*k*Q,this._w=H*N*Q-I*k*_;break;case"XZY":this._x=I*N*Q-H*k*_,this._y=H*k*Q-I*N*_,this._z=H*N*_+I*k*Q,this._w=H*N*Q+I*k*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+h)}return!1!==o&&this._onChangeCallback(),this}setFromAxisAngle(x,o){const c=o/2,L=Math.sin(c);return this._x=x.x*L,this._y=x.y*L,this._z=x.z*L,this._w=Math.cos(c),this._onChangeCallback(),this}setFromRotationMatrix(x){const o=x.elements,c=o[0],L=o[4],T=o[8],h=o[1],A=o[5],E=o[9],H=o[2],N=o[6],Q=o[10],I=c+A+Q;if(I>0){const x=.5/Math.sqrt(I+1);this._w=.25/x,this._x=(N-E)*x,this._y=(T-H)*x,this._z=(h-L)*x}else if(c>A&&c>Q){const x=2*Math.sqrt(1+c-A-Q);this._w=(N-E)/x,this._x=.25*x,this._y=(L+h)/x,this._z=(T+H)/x}else if(A>Q){const x=2*Math.sqrt(1+A-c-Q);this._w=(T-H)/x,this._x=(L+h)/x,this._y=.25*x,this._z=(E+N)/x}else{const x=2*Math.sqrt(1+Q-c-A);this._w=(h-L)/x,this._x=(T+H)/x,this._y=(E+N)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(x,o){let c=x.dot(o)+1;return c<Number.EPSILON?(c=0,Math.abs(x.x)>Math.abs(x.z)?(this._x=-x.y,this._y=x.x,this._z=0,this._w=c):(this._x=0,this._y=-x.z,this._z=x.y,this._w=c)):(this._x=x.y*o.z-x.z*o.y,this._y=x.z*o.x-x.x*o.z,this._z=x.x*o.y-x.y*o.x,this._w=c),this.normalize()}angleTo(x){return 2*Math.acos(Math.abs(NH(this.dot(x),-1,1)))}rotateTowards(x,o){const c=this.angleTo(x);if(0===c)return this;const L=Math.min(1,o/c);return this.slerp(x,L),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(x){return this._x*x._x+this._y*x._y+this._z*x._z+this._w*x._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let x=this.length();return 0===x?(this._x=0,this._y=0,this._z=0,this._w=1):(x=1/x,this._x=this._x*x,this._y=this._y*x,this._z=this._z*x,this._w=this._w*x),this._onChangeCallback(),this}multiply(x){return this.multiplyQuaternions(this,x)}premultiply(x){return this.multiplyQuaternions(x,this)}multiplyQuaternions(x,o){const c=x._x,L=x._y,T=x._z,h=x._w,A=o._x,E=o._y,H=o._z,N=o._w;return this._x=c*N+h*A+L*H-T*E,this._y=L*N+h*E+T*A-c*H,this._z=T*N+h*H+c*E-L*A,this._w=h*N-c*A-L*E-T*H,this._onChangeCallback(),this}slerp(x,o){if(0===o)return this;if(1===o)return this.copy(x);const c=this._x,L=this._y,T=this._z,h=this._w;let A=h*x._w+c*x._x+L*x._y+T*x._z;if(A<0?(this._w=-x._w,this._x=-x._x,this._y=-x._y,this._z=-x._z,A=-A):this.copy(x),A>=1)return this._w=h,this._x=c,this._y=L,this._z=T,this;const E=1-A*A;if(E<=Number.EPSILON){const x=1-o;return this._w=x*h+o*this._w,this._x=x*c+o*this._x,this._y=x*L+o*this._y,this._z=x*T+o*this._z,this.normalize(),this._onChangeCallback(),this}const H=Math.sqrt(E),N=Math.atan2(H,A),Q=Math.sin((1-o)*N)/H,I=Math.sin(o*N)/H;return this._w=h*Q+this._w*I,this._x=c*Q+this._x*I,this._y=L*Q+this._y*I,this._z=T*Q+this._z*I,this._onChangeCallback(),this}slerpQuaternions(x,o,c){return this.copy(x).slerp(o,c)}random(){const x=Math.random(),o=Math.sqrt(1-x),c=Math.sqrt(x),L=2*Math.PI*Math.random(),T=2*Math.PI*Math.random();return this.set(o*Math.cos(L),c*Math.sin(T),c*Math.cos(T),o*Math.sin(L))}equals(x){return x._x===this._x&&x._y===this._y&&x._z===this._z&&x._w===this._w}fromArray(x,o=0){return this._x=x[o],this._y=x[o+1],this._z=x[o+2],this._w=x[o+3],this._onChangeCallback(),this}toArray(x=[],o=0){return x[o]=this._x,x[o+1]=this._y,x[o+2]=this._z,x[o+3]=this._w,x}fromBufferAttribute(x,o){return this._x=x.getX(o),this._y=x.getY(o),this._z=x.getZ(o),this._w=x.getW(o),this}toJSON(){return this.toArray()}_onChange(x){return this._onChangeCallback=x,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class zH{constructor(x=0,o=0,c=0){zH.prototype.isVector3=!0,this.x=x,this.y=o,this.z=c}set(x,o,c){return void 0===c&&(c=this.z),this.x=x,this.y=o,this.z=c,this}setScalar(x){return this.x=x,this.y=x,this.z=x,this}setX(x){return this.x=x,this}setY(x){return this.y=x,this}setZ(x){return this.z=x,this}setComponent(x,o){switch(x){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;default:throw new Error("index is out of range: "+x)}return this}getComponent(x){switch(x){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+x)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(x){return this.x=x.x,this.y=x.y,this.z=x.z,this}add(x){return this.x+=x.x,this.y+=x.y,this.z+=x.z,this}addScalar(x){return this.x+=x,this.y+=x,this.z+=x,this}addVectors(x,o){return this.x=x.x+o.x,this.y=x.y+o.y,this.z=x.z+o.z,this}addScaledVector(x,o){return this.x+=x.x*o,this.y+=x.y*o,this.z+=x.z*o,this}sub(x){return this.x-=x.x,this.y-=x.y,this.z-=x.z,this}subScalar(x){return this.x-=x,this.y-=x,this.z-=x,this}subVectors(x,o){return this.x=x.x-o.x,this.y=x.y-o.y,this.z=x.z-o.z,this}multiply(x){return this.x*=x.x,this.y*=x.y,this.z*=x.z,this}multiplyScalar(x){return this.x*=x,this.y*=x,this.z*=x,this}multiplyVectors(x,o){return this.x=x.x*o.x,this.y=x.y*o.y,this.z=x.z*o.z,this}applyEuler(x){return this.applyQuaternion(GH.setFromEuler(x))}applyAxisAngle(x,o){return this.applyQuaternion(GH.setFromAxisAngle(x,o))}applyMatrix3(x){const o=this.x,c=this.y,L=this.z,T=x.elements;return this.x=T[0]*o+T[3]*c+T[6]*L,this.y=T[1]*o+T[4]*c+T[7]*L,this.z=T[2]*o+T[5]*c+T[8]*L,this}applyNormalMatrix(x){return this.applyMatrix3(x).normalize()}applyMatrix4(x){const o=this.x,c=this.y,L=this.z,T=x.elements,h=1/(T[3]*o+T[7]*c+T[11]*L+T[15]);return this.x=(T[0]*o+T[4]*c+T[8]*L+T[12])*h,this.y=(T[1]*o+T[5]*c+T[9]*L+T[13])*h,this.z=(T[2]*o+T[6]*c+T[10]*L+T[14])*h,this}applyQuaternion(x){const o=this.x,c=this.y,L=this.z,T=x.x,h=x.y,A=x.z,E=x.w,H=E*o+h*L-A*c,N=E*c+A*o-T*L,Q=E*L+T*c-h*o,I=-T*o-h*c-A*L;return this.x=H*E+I*-T+N*-A-Q*-h,this.y=N*E+I*-h+Q*-T-H*-A,this.z=Q*E+I*-A+H*-h-N*-T,this}project(x){return this.applyMatrix4(x.matrixWorldInverse).applyMatrix4(x.projectionMatrix)}unproject(x){return this.applyMatrix4(x.projectionMatrixInverse).applyMatrix4(x.matrixWorld)}transformDirection(x){const o=this.x,c=this.y,L=this.z,T=x.elements;return this.x=T[0]*o+T[4]*c+T[8]*L,this.y=T[1]*o+T[5]*c+T[9]*L,this.z=T[2]*o+T[6]*c+T[10]*L,this.normalize()}divide(x){return this.x/=x.x,this.y/=x.y,this.z/=x.z,this}divideScalar(x){return this.multiplyScalar(1/x)}min(x){return this.x=Math.min(this.x,x.x),this.y=Math.min(this.y,x.y),this.z=Math.min(this.z,x.z),this}max(x){return this.x=Math.max(this.x,x.x),this.y=Math.max(this.y,x.y),this.z=Math.max(this.z,x.z),this}clamp(x,o){return this.x=Math.max(x.x,Math.min(o.x,this.x)),this.y=Math.max(x.y,Math.min(o.y,this.y)),this.z=Math.max(x.z,Math.min(o.z,this.z)),this}clampScalar(x,o){return this.x=Math.max(x,Math.min(o,this.x)),this.y=Math.max(x,Math.min(o,this.y)),this.z=Math.max(x,Math.min(o,this.z)),this}clampLength(x,o){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(x,Math.min(o,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(x){return this.x*x.x+this.y*x.y+this.z*x.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(x){return this.normalize().multiplyScalar(x)}lerp(x,o){return this.x+=(x.x-this.x)*o,this.y+=(x.y-this.y)*o,this.z+=(x.z-this.z)*o,this}lerpVectors(x,o,c){return this.x=x.x+(o.x-x.x)*c,this.y=x.y+(o.y-x.y)*c,this.z=x.z+(o.z-x.z)*c,this}cross(x){return this.crossVectors(this,x)}crossVectors(x,o){const c=x.x,L=x.y,T=x.z,h=o.x,A=o.y,E=o.z;return this.x=L*E-T*A,this.y=T*h-c*E,this.z=c*A-L*h,this}projectOnVector(x){const o=x.lengthSq();if(0===o)return this.set(0,0,0);const c=x.dot(this)/o;return this.copy(x).multiplyScalar(c)}projectOnPlane(x){return lH.copy(this).projectOnVector(x),this.sub(lH)}reflect(x){return this.sub(lH.copy(x).multiplyScalar(2*this.dot(x)))}angleTo(x){const o=Math.sqrt(this.lengthSq()*x.lengthSq());if(0===o)return Math.PI/2;const c=this.dot(x)/o;return Math.acos(NH(c,-1,1))}distanceTo(x){return Math.sqrt(this.distanceToSquared(x))}distanceToSquared(x){const o=this.x-x.x,c=this.y-x.y,L=this.z-x.z;return o*o+c*c+L*L}manhattanDistanceTo(x){return Math.abs(this.x-x.x)+Math.abs(this.y-x.y)+Math.abs(this.z-x.z)}setFromSpherical(x){return this.setFromSphericalCoords(x.radius,x.phi,x.theta)}setFromSphericalCoords(x,o,c){const L=Math.sin(o)*x;return this.x=L*Math.sin(c),this.y=Math.cos(o)*x,this.z=L*Math.cos(c),this}setFromCylindrical(x){return this.setFromCylindricalCoords(x.radius,x.theta,x.y)}setFromCylindricalCoords(x,o,c){return this.x=x*Math.sin(o),this.y=c,this.z=x*Math.cos(o),this}setFromMatrixPosition(x){const o=x.elements;return this.x=o[12],this.y=o[13],this.z=o[14],this}setFromMatrixScale(x){const o=this.setFromMatrixColumn(x,0).length(),c=this.setFromMatrixColumn(x,1).length(),L=this.setFromMatrixColumn(x,2).length();return this.x=o,this.y=c,this.z=L,this}setFromMatrixColumn(x,o){return this.fromArray(x.elements,4*o)}setFromMatrix3Column(x,o){return this.fromArray(x.elements,3*o)}setFromEuler(x){return this.x=x._x,this.y=x._y,this.z=x._z,this}setFromColor(x){return this.x=x.r,this.y=x.g,this.z=x.b,this}equals(x){return x.x===this.x&&x.y===this.y&&x.z===this.z}fromArray(x,o=0){return this.x=x[o],this.y=x[o+1],this.z=x[o+2],this}toArray(x=[],o=0){return x[o]=this.x,x[o+1]=this.y,x[o+2]=this.z,x}fromBufferAttribute(x,o){return this.x=x.getX(o),this.y=x.getY(o),this.z=x.getZ(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const x=2*(Math.random()-.5),o=Math.random()*Math.PI*2,c=Math.sqrt(1-x**2);return this.x=c*Math.cos(o),this.y=c*Math.sin(o),this.z=x,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const lH=new zH,GH=new aH;class pH{constructor(x=new zH(1/0,1/0,1/0),o=new zH(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=x,this.max=o}set(x,o){return this.min.copy(x),this.max.copy(o),this}setFromArray(x){this.makeEmpty();for(let o=0,c=x.length;o<c;o+=3)this.expandByPoint(KH.fromArray(x,o));return this}setFromBufferAttribute(x){this.makeEmpty();for(let o=0,c=x.count;o<c;o++)this.expandByPoint(KH.fromBufferAttribute(x,o));return this}setFromPoints(x){this.makeEmpty();for(let o=0,c=x.length;o<c;o++)this.expandByPoint(x[o]);return this}setFromCenterAndSize(x,o){const c=KH.copy(o).multiplyScalar(.5);return this.min.copy(x).sub(c),this.max.copy(x).add(c),this}setFromObject(x,o=!1){return this.makeEmpty(),this.expandByObject(x,o)}clone(){return(new this.constructor).copy(this)}copy(x){return this.min.copy(x.min),this.max.copy(x.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(x){return this.isEmpty()?x.set(0,0,0):x.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(x){return this.isEmpty()?x.set(0,0,0):x.subVectors(this.max,this.min)}expandByPoint(x){return this.min.min(x),this.max.max(x),this}expandByVector(x){return this.min.sub(x),this.max.add(x),this}expandByScalar(x){return this.min.addScalar(-x),this.max.addScalar(x),this}expandByObject(x,o=!1){if(x.updateWorldMatrix(!1,!1),void 0!==x.boundingBox)null===x.boundingBox&&x.computeBoundingBox(),JH.copy(x.boundingBox),JH.applyMatrix4(x.matrixWorld),this.union(JH);else{const c=x.geometry;if(void 0!==c)if(o&&void 0!==c.attributes&&void 0!==c.attributes.position){const o=c.attributes.position;for(let c=0,L=o.count;c<L;c++)KH.fromBufferAttribute(o,c).applyMatrix4(x.matrixWorld),this.expandByPoint(KH)}else null===c.boundingBox&&c.computeBoundingBox(),JH.copy(c.boundingBox),JH.applyMatrix4(x.matrixWorld),this.union(JH)}const c=x.children;for(let x=0,L=c.length;x<L;x++)this.expandByObject(c[x],o);return this}containsPoint(x){return!(x.x<this.min.x||x.x>this.max.x||x.y<this.min.y||x.y>this.max.y||x.z<this.min.z||x.z>this.max.z)}containsBox(x){return this.min.x<=x.min.x&&x.max.x<=this.max.x&&this.min.y<=x.min.y&&x.max.y<=this.max.y&&this.min.z<=x.min.z&&x.max.z<=this.max.z}getParameter(x,o){return o.set((x.x-this.min.x)/(this.max.x-this.min.x),(x.y-this.min.y)/(this.max.y-this.min.y),(x.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(x){return!(x.max.x<this.min.x||x.min.x>this.max.x||x.max.y<this.min.y||x.min.y>this.max.y||x.max.z<this.min.z||x.min.z>this.max.z)}intersectsSphere(x){return this.clampPoint(x.center,KH),KH.distanceToSquared(x.center)<=x.radius*x.radius}intersectsPlane(x){let o,c;return x.normal.x>0?(o=x.normal.x*this.min.x,c=x.normal.x*this.max.x):(o=x.normal.x*this.max.x,c=x.normal.x*this.min.x),x.normal.y>0?(o+=x.normal.y*this.min.y,c+=x.normal.y*this.max.y):(o+=x.normal.y*this.max.y,c+=x.normal.y*this.min.y),x.normal.z>0?(o+=x.normal.z*this.min.z,c+=x.normal.z*this.max.z):(o+=x.normal.z*this.max.z,c+=x.normal.z*this.min.z),o<=-x.constant&&c>=-x.constant}intersectsTriangle(x){if(this.isEmpty())return!1;this.getCenter(xN),oN.subVectors(this.max,xN),nH.subVectors(x.a,xN),bH.subVectors(x.b,xN),WH.subVectors(x.c,xN),wH.subVectors(bH,nH),gH.subVectors(WH,bH),RH.subVectors(nH,WH);let o=[0,-wH.z,wH.y,0,-gH.z,gH.y,0,-RH.z,RH.y,wH.z,0,-wH.x,gH.z,0,-gH.x,RH.z,0,-RH.x,-wH.y,wH.x,0,-gH.y,gH.x,0,-RH.y,RH.x,0];return!!TN(o,nH,bH,WH,oN)&&(o=[1,0,0,0,1,0,0,0,1],!!TN(o,nH,bH,WH,oN)&&(cN.crossVectors(wH,gH),o=[cN.x,cN.y,cN.z],TN(o,nH,bH,WH,oN)))}clampPoint(x,o){return o.copy(x).clamp(this.min,this.max)}distanceToPoint(x){return this.clampPoint(x,KH).distanceTo(x)}getBoundingSphere(x){return this.isEmpty()?x.makeEmpty():(this.getCenter(x.center),x.radius=.5*this.getSize(KH).length()),x}intersect(x){return this.min.max(x.min),this.max.min(x.max),this.isEmpty()&&this.makeEmpty(),this}union(x){return this.min.min(x.min),this.max.max(x.max),this}applyMatrix4(x){return this.isEmpty()||(PH[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(x),PH[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(x),PH[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(x),PH[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(x),PH[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(x),PH[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(x),PH[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(x),PH[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(x),this.setFromPoints(PH)),this}translate(x){return this.min.add(x),this.max.add(x),this}equals(x){return x.min.equals(this.min)&&x.max.equals(this.max)}}const PH=[new zH,new zH,new zH,new zH,new zH,new zH,new zH,new zH],KH=new zH,JH=new pH,nH=new zH,bH=new zH,WH=new zH,wH=new zH,gH=new zH,RH=new zH,xN=new zH,oN=new zH,cN=new zH,LN=new zH;function TN(x,o,c,L,T){for(let h=0,A=x.length-3;h<=A;h+=3){LN.fromArray(x,h);const A=T.x*Math.abs(LN.x)+T.y*Math.abs(LN.y)+T.z*Math.abs(LN.z),E=o.dot(LN),H=c.dot(LN),N=L.dot(LN);if(Math.max(-Math.max(E,H,N),Math.min(E,H,N))>A)return!1}return!0}const hN=new pH,AN=new zH,EN=new zH;class HN{constructor(x=new zH,o=-1){this.center=x,this.radius=o}set(x,o){return this.center.copy(x),this.radius=o,this}setFromPoints(x,o){const c=this.center;void 0!==o?c.copy(o):hN.setFromPoints(x).getCenter(c);let L=0;for(let o=0,T=x.length;o<T;o++)L=Math.max(L,c.distanceToSquared(x[o]));return this.radius=Math.sqrt(L),this}copy(x){return this.center.copy(x.center),this.radius=x.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(x){return x.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(x){return x.distanceTo(this.center)-this.radius}intersectsSphere(x){const o=this.radius+x.radius;return x.center.distanceToSquared(this.center)<=o*o}intersectsBox(x){return x.intersectsSphere(this)}intersectsPlane(x){return Math.abs(x.distanceToPoint(this.center))<=this.radius}clampPoint(x,o){const c=this.center.distanceToSquared(x);return o.copy(x),c>this.radius*this.radius&&(o.sub(this.center).normalize(),o.multiplyScalar(this.radius).add(this.center)),o}getBoundingBox(x){return this.isEmpty()?(x.makeEmpty(),x):(x.set(this.center,this.center),x.expandByScalar(this.radius),x)}applyMatrix4(x){return this.center.applyMatrix4(x),this.radius=this.radius*x.getMaxScaleOnAxis(),this}translate(x){return this.center.add(x),this}expandByPoint(x){if(this.isEmpty())return this.center.copy(x),this.radius=0,this;AN.subVectors(x,this.center);const o=AN.lengthSq();if(o>this.radius*this.radius){const x=Math.sqrt(o),c=.5*(x-this.radius);this.center.addScaledVector(AN,c/x),this.radius+=c}return this}union(x){return x.isEmpty()?this:this.isEmpty()?(this.copy(x),this):(!0===this.center.equals(x.center)?this.radius=Math.max(this.radius,x.radius):(EN.subVectors(x.center,this.center).setLength(x.radius),this.expandByPoint(AN.copy(x.center).add(EN)),this.expandByPoint(AN.copy(x.center).sub(EN))),this)}equals(x){return x.center.equals(this.center)&&x.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const NN=new zH,QN=new zH,IN=new zH,kN=new zH,_N=new zH,XN=new zH,rN=new zH;class yN{constructor(x,o,c,L,T,h,A,E,H,N,Q,I,k,_,X,r){yN.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==x&&this.set(x,o,c,L,T,h,A,E,H,N,Q,I,k,_,X,r)}set(x,o,c,L,T,h,A,E,H,N,Q,I,k,_,X,r){const y=this.elements;return y[0]=x,y[4]=o,y[8]=c,y[12]=L,y[1]=T,y[5]=h,y[9]=A,y[13]=E,y[2]=H,y[6]=N,y[10]=Q,y[14]=I,y[3]=k,y[7]=_,y[11]=X,y[15]=r,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new yN).fromArray(this.elements)}copy(x){const o=this.elements,c=x.elements;return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],this}copyPosition(x){const o=this.elements,c=x.elements;return o[12]=c[12],o[13]=c[13],o[14]=c[14],this}setFromMatrix3(x){const o=x.elements;return this.set(o[0],o[3],o[6],0,o[1],o[4],o[7],0,o[2],o[5],o[8],0,0,0,0,1),this}extractBasis(x,o,c){return x.setFromMatrixColumn(this,0),o.setFromMatrixColumn(this,1),c.setFromMatrixColumn(this,2),this}makeBasis(x,o,c){return this.set(x.x,o.x,c.x,0,x.y,o.y,c.y,0,x.z,o.z,c.z,0,0,0,0,1),this}extractRotation(x){const o=this.elements,c=x.elements,L=1/vN.setFromMatrixColumn(x,0).length(),T=1/vN.setFromMatrixColumn(x,1).length(),h=1/vN.setFromMatrixColumn(x,2).length();return o[0]=c[0]*L,o[1]=c[1]*L,o[2]=c[2]*L,o[3]=0,o[4]=c[4]*T,o[5]=c[5]*T,o[6]=c[6]*T,o[7]=0,o[8]=c[8]*h,o[9]=c[9]*h,o[10]=c[10]*h,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromEuler(x){const o=this.elements,c=x.x,L=x.y,T=x.z,h=Math.cos(c),A=Math.sin(c),E=Math.cos(L),H=Math.sin(L),N=Math.cos(T),Q=Math.sin(T);if("XYZ"===x.order){const x=h*N,c=h*Q,L=A*N,T=A*Q;o[0]=E*N,o[4]=-E*Q,o[8]=H,o[1]=c+L*H,o[5]=x-T*H,o[9]=-A*E,o[2]=T-x*H,o[6]=L+c*H,o[10]=h*E}else if("YXZ"===x.order){const x=E*N,c=E*Q,L=H*N,T=H*Q;o[0]=x+T*A,o[4]=L*A-c,o[8]=h*H,o[1]=h*Q,o[5]=h*N,o[9]=-A,o[2]=c*A-L,o[6]=T+x*A,o[10]=h*E}else if("ZXY"===x.order){const x=E*N,c=E*Q,L=H*N,T=H*Q;o[0]=x-T*A,o[4]=-h*Q,o[8]=L+c*A,o[1]=c+L*A,o[5]=h*N,o[9]=T-x*A,o[2]=-h*H,o[6]=A,o[10]=h*E}else if("ZYX"===x.order){const x=h*N,c=h*Q,L=A*N,T=A*Q;o[0]=E*N,o[4]=L*H-c,o[8]=x*H+T,o[1]=E*Q,o[5]=T*H+x,o[9]=c*H-L,o[2]=-H,o[6]=A*E,o[10]=h*E}else if("YZX"===x.order){const x=h*E,c=h*H,L=A*E,T=A*H;o[0]=E*N,o[4]=T-x*Q,o[8]=L*Q+c,o[1]=Q,o[5]=h*N,o[9]=-A*N,o[2]=-H*N,o[6]=c*Q+L,o[10]=x-T*Q}else if("XZY"===x.order){const x=h*E,c=h*H,L=A*E,T=A*H;o[0]=E*N,o[4]=-Q,o[8]=H*N,o[1]=x*Q+T,o[5]=h*N,o[9]=c*Q-L,o[2]=L*Q-c,o[6]=A*N,o[10]=T*Q+x}return o[3]=0,o[7]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromQuaternion(x){return this.compose(YN,x,FN)}lookAt(x,o,c){const L=this.elements;return CN.subVectors(x,o),0===CN.lengthSq()&&(CN.z=1),CN.normalize(),tN.crossVectors(c,CN),0===tN.lengthSq()&&(1===Math.abs(c.z)?CN.x+=1e-4:CN.z+=1e-4,CN.normalize(),tN.crossVectors(c,CN)),tN.normalize(),mN.crossVectors(CN,tN),L[0]=tN.x,L[4]=mN.x,L[8]=CN.x,L[1]=tN.y,L[5]=mN.y,L[9]=CN.y,L[2]=tN.z,L[6]=mN.z,L[10]=CN.z,this}multiply(x){return this.multiplyMatrices(this,x)}premultiply(x){return this.multiplyMatrices(x,this)}multiplyMatrices(x,o){const c=x.elements,L=o.elements,T=this.elements,h=c[0],A=c[4],E=c[8],H=c[12],N=c[1],Q=c[5],I=c[9],k=c[13],_=c[2],X=c[6],r=c[10],y=c[14],v=c[3],B=c[7],Y=c[11],F=c[15],t=L[0],m=L[4],C=L[8],V=L[12],i=L[1],M=L[5],Z=L[9],S=L[13],u=L[2],d=L[6],O=L[10],j=L[14],e=L[3],q=L[7],f=L[11],U=L[15];return T[0]=h*t+A*i+E*u+H*e,T[4]=h*m+A*M+E*d+H*q,T[8]=h*C+A*Z+E*O+H*f,T[12]=h*V+A*S+E*j+H*U,T[1]=N*t+Q*i+I*u+k*e,T[5]=N*m+Q*M+I*d+k*q,T[9]=N*C+Q*Z+I*O+k*f,T[13]=N*V+Q*S+I*j+k*U,T[2]=_*t+X*i+r*u+y*e,T[6]=_*m+X*M+r*d+y*q,T[10]=_*C+X*Z+r*O+y*f,T[14]=_*V+X*S+r*j+y*U,T[3]=v*t+B*i+Y*u+F*e,T[7]=v*m+B*M+Y*d+F*q,T[11]=v*C+B*Z+Y*O+F*f,T[15]=v*V+B*S+Y*j+F*U,this}multiplyScalar(x){const o=this.elements;return o[0]*=x,o[4]*=x,o[8]*=x,o[12]*=x,o[1]*=x,o[5]*=x,o[9]*=x,o[13]*=x,o[2]*=x,o[6]*=x,o[10]*=x,o[14]*=x,o[3]*=x,o[7]*=x,o[11]*=x,o[15]*=x,this}determinant(){const x=this.elements,o=x[0],c=x[4],L=x[8],T=x[12],h=x[1],A=x[5],E=x[9],H=x[13],N=x[2],Q=x[6],I=x[10],k=x[14];return x[3]*(+T*E*Q-L*H*Q-T*A*I+c*H*I+L*A*k-c*E*k)+x[7]*(+o*E*k-o*H*I+T*h*I-L*h*k+L*H*N-T*E*N)+x[11]*(+o*H*Q-o*A*k-T*h*Q+c*h*k+T*A*N-c*H*N)+x[15]*(-L*A*N-o*E*Q+o*A*I+L*h*Q-c*h*I+c*E*N)}transpose(){const x=this.elements;let o;return o=x[1],x[1]=x[4],x[4]=o,o=x[2],x[2]=x[8],x[8]=o,o=x[6],x[6]=x[9],x[9]=o,o=x[3],x[3]=x[12],x[12]=o,o=x[7],x[7]=x[13],x[13]=o,o=x[11],x[11]=x[14],x[14]=o,this}setPosition(x,o,c){const L=this.elements;return x.isVector3?(L[12]=x.x,L[13]=x.y,L[14]=x.z):(L[12]=x,L[13]=o,L[14]=c),this}invert(){const x=this.elements,o=x[0],c=x[1],L=x[2],T=x[3],h=x[4],A=x[5],E=x[6],H=x[7],N=x[8],Q=x[9],I=x[10],k=x[11],_=x[12],X=x[13],r=x[14],y=x[15],v=Q*r*H-X*I*H+X*E*k-A*r*k-Q*E*y+A*I*y,B=_*I*H-N*r*H-_*E*k+h*r*k+N*E*y-h*I*y,Y=N*X*H-_*Q*H+_*A*k-h*X*k-N*A*y+h*Q*y,F=_*Q*E-N*X*E-_*A*I+h*X*I+N*A*r-h*Q*r,t=o*v+c*B+L*Y+T*F;if(0===t)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const m=1/t;return x[0]=v*m,x[1]=(X*I*T-Q*r*T-X*L*k+c*r*k+Q*L*y-c*I*y)*m,x[2]=(A*r*T-X*E*T+X*L*H-c*r*H-A*L*y+c*E*y)*m,x[3]=(Q*E*T-A*I*T-Q*L*H+c*I*H+A*L*k-c*E*k)*m,x[4]=B*m,x[5]=(N*r*T-_*I*T+_*L*k-o*r*k-N*L*y+o*I*y)*m,x[6]=(_*E*T-h*r*T-_*L*H+o*r*H+h*L*y-o*E*y)*m,x[7]=(h*I*T-N*E*T+N*L*H-o*I*H-h*L*k+o*E*k)*m,x[8]=Y*m,x[9]=(_*Q*T-N*X*T-_*c*k+o*X*k+N*c*y-o*Q*y)*m,x[10]=(h*X*T-_*A*T+_*c*H-o*X*H-h*c*y+o*A*y)*m,x[11]=(N*A*T-h*Q*T-N*c*H+o*Q*H+h*c*k-o*A*k)*m,x[12]=F*m,x[13]=(N*X*L-_*Q*L+_*c*I-o*X*I-N*c*r+o*Q*r)*m,x[14]=(_*A*L-h*X*L-_*c*E+o*X*E+h*c*r-o*A*r)*m,x[15]=(h*Q*L-N*A*L+N*c*E-o*Q*E-h*c*I+o*A*I)*m,this}scale(x){const o=this.elements,c=x.x,L=x.y,T=x.z;return o[0]*=c,o[4]*=L,o[8]*=T,o[1]*=c,o[5]*=L,o[9]*=T,o[2]*=c,o[6]*=L,o[10]*=T,o[3]*=c,o[7]*=L,o[11]*=T,this}getMaxScaleOnAxis(){const x=this.elements,o=x[0]*x[0]+x[1]*x[1]+x[2]*x[2],c=x[4]*x[4]+x[5]*x[5]+x[6]*x[6],L=x[8]*x[8]+x[9]*x[9]+x[10]*x[10];return Math.sqrt(Math.max(o,c,L))}makeTranslation(x,o,c){return x.isVector3?this.set(1,0,0,x.x,0,1,0,x.y,0,0,1,x.z,0,0,0,1):this.set(1,0,0,x,0,1,0,o,0,0,1,c,0,0,0,1),this}makeRotationX(x){const o=Math.cos(x),c=Math.sin(x);return this.set(1,0,0,0,0,o,-c,0,0,c,o,0,0,0,0,1),this}makeRotationY(x){const o=Math.cos(x),c=Math.sin(x);return this.set(o,0,c,0,0,1,0,0,-c,0,o,0,0,0,0,1),this}makeRotationZ(x){const o=Math.cos(x),c=Math.sin(x);return this.set(o,-c,0,0,c,o,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(x,o){const c=Math.cos(o),L=Math.sin(o),T=1-c,h=x.x,A=x.y,E=x.z,H=T*h,N=T*A;return this.set(H*h+c,H*A-L*E,H*E+L*A,0,H*A+L*E,N*A+c,N*E-L*h,0,H*E-L*A,N*E+L*h,T*E*E+c,0,0,0,0,1),this}makeScale(x,o,c){return this.set(x,0,0,0,0,o,0,0,0,0,c,0,0,0,0,1),this}makeShear(x,o,c,L,T,h){return this.set(1,c,T,0,x,1,h,0,o,L,1,0,0,0,0,1),this}compose(x,o,c){const L=this.elements,T=o._x,h=o._y,A=o._z,E=o._w,H=T+T,N=h+h,Q=A+A,I=T*H,k=T*N,_=T*Q,X=h*N,r=h*Q,y=A*Q,v=E*H,B=E*N,Y=E*Q,F=c.x,t=c.y,m=c.z;return L[0]=(1-(X+y))*F,L[1]=(k+Y)*F,L[2]=(_-B)*F,L[3]=0,L[4]=(k-Y)*t,L[5]=(1-(I+y))*t,L[6]=(r+v)*t,L[7]=0,L[8]=(_+B)*m,L[9]=(r-v)*m,L[10]=(1-(I+X))*m,L[11]=0,L[12]=x.x,L[13]=x.y,L[14]=x.z,L[15]=1,this}decompose(x,o,c){const L=this.elements;let T=vN.set(L[0],L[1],L[2]).length();const h=vN.set(L[4],L[5],L[6]).length(),A=vN.set(L[8],L[9],L[10]).length();this.determinant()<0&&(T=-T),x.x=L[12],x.y=L[13],x.z=L[14],BN.copy(this);const E=1/T,H=1/h,N=1/A;return BN.elements[0]*=E,BN.elements[1]*=E,BN.elements[2]*=E,BN.elements[4]*=H,BN.elements[5]*=H,BN.elements[6]*=H,BN.elements[8]*=N,BN.elements[9]*=N,BN.elements[10]*=N,o.setFromRotationMatrix(BN),c.x=T,c.y=h,c.z=A,this}makePerspective(x,o,c,L,T,h,A=2e3){const E=this.elements,H=2*T/(o-x),N=2*T/(c-L),Q=(o+x)/(o-x),I=(c+L)/(c-L);let k,_;if(2e3===A)k=-(h+T)/(h-T),_=-2*h*T/(h-T);else{if(2001!==A)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+A);k=-h/(h-T),_=-h*T/(h-T)}return E[0]=H,E[4]=0,E[8]=Q,E[12]=0,E[1]=0,E[5]=N,E[9]=I,E[13]=0,E[2]=0,E[6]=0,E[10]=k,E[14]=_,E[3]=0,E[7]=0,E[11]=-1,E[15]=0,this}makeOrthographic(x,o,c,L,T,h,A=2e3){const E=this.elements,H=1/(o-x),N=1/(c-L),Q=1/(h-T),I=(o+x)*H,k=(c+L)*N;let _,X;if(2e3===A)_=(h+T)*Q,X=-2*Q;else{if(2001!==A)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+A);_=T*Q,X=-1*Q}return E[0]=2*H,E[4]=0,E[8]=0,E[12]=-I,E[1]=0,E[5]=2*N,E[9]=0,E[13]=-k,E[2]=0,E[6]=0,E[10]=X,E[14]=-_,E[3]=0,E[7]=0,E[11]=0,E[15]=1,this}equals(x){const o=this.elements,c=x.elements;for(let x=0;x<16;x++)if(o[x]!==c[x])return!1;return!0}fromArray(x,o=0){for(let c=0;c<16;c++)this.elements[c]=x[c+o];return this}toArray(x=[],o=0){const c=this.elements;return x[o]=c[0],x[o+1]=c[1],x[o+2]=c[2],x[o+3]=c[3],x[o+4]=c[4],x[o+5]=c[5],x[o+6]=c[6],x[o+7]=c[7],x[o+8]=c[8],x[o+9]=c[9],x[o+10]=c[10],x[o+11]=c[11],x[o+12]=c[12],x[o+13]=c[13],x[o+14]=c[14],x[o+15]=c[15],x}}const vN=new zH,BN=new yN,YN=new zH(0,0,0),FN=new zH(1,1,1),tN=new zH,mN=new zH,CN=new zH,VN=new yN,iN=new aH;class MN{constructor(x=0,o=0,c=0,L=MN.DEFAULT_ORDER){this.isEuler=!0,this._x=x,this._y=o,this._z=c,this._order=L}get x(){return this._x}set x(x){this._x=x,this._onChangeCallback()}get y(){return this._y}set y(x){this._y=x,this._onChangeCallback()}get z(){return this._z}set z(x){this._z=x,this._onChangeCallback()}get order(){return this._order}set order(x){this._order=x,this._onChangeCallback()}set(x,o,c,L=this._order){return this._x=x,this._y=o,this._z=c,this._order=L,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(x){return this._x=x._x,this._y=x._y,this._z=x._z,this._order=x._order,this._onChangeCallback(),this}setFromRotationMatrix(x,o=this._order,c=!0){const L=x.elements,T=L[0],h=L[4],A=L[8],E=L[1],H=L[5],N=L[9],Q=L[2],I=L[6],k=L[10];switch(o){case"XYZ":this._y=Math.asin(NH(A,-1,1)),Math.abs(A)<.9999999?(this._x=Math.atan2(-N,k),this._z=Math.atan2(-h,T)):(this._x=Math.atan2(I,H),this._z=0);break;case"YXZ":this._x=Math.asin(-NH(N,-1,1)),Math.abs(N)<.9999999?(this._y=Math.atan2(A,k),this._z=Math.atan2(E,H)):(this._y=Math.atan2(-Q,T),this._z=0);break;case"ZXY":this._x=Math.asin(NH(I,-1,1)),Math.abs(I)<.9999999?(this._y=Math.atan2(-Q,k),this._z=Math.atan2(-h,H)):(this._y=0,this._z=Math.atan2(E,T));break;case"ZYX":this._y=Math.asin(-NH(Q,-1,1)),Math.abs(Q)<.9999999?(this._x=Math.atan2(I,k),this._z=Math.atan2(E,T)):(this._x=0,this._z=Math.atan2(-h,H));break;case"YZX":this._z=Math.asin(NH(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(-N,H),this._y=Math.atan2(-Q,T)):(this._x=0,this._y=Math.atan2(A,k));break;case"XZY":this._z=Math.asin(-NH(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(I,H),this._y=Math.atan2(A,T)):(this._x=Math.atan2(-N,k),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+o)}return this._order=o,!0===c&&this._onChangeCallback(),this}setFromQuaternion(x,o,c){return VN.makeRotationFromQuaternion(x),this.setFromRotationMatrix(VN,o,c)}setFromVector3(x,o=this._order){return this.set(x.x,x.y,x.z,o)}reorder(x){return iN.setFromEuler(this),this.setFromQuaternion(iN,x)}equals(x){return x._x===this._x&&x._y===this._y&&x._z===this._z&&x._order===this._order}fromArray(x){return this._x=x[0],this._y=x[1],this._z=x[2],void 0!==x[3]&&(this._order=x[3]),this._onChangeCallback(),this}toArray(x=[],o=0){return x[o]=this._x,x[o+1]=this._y,x[o+2]=this._z,x[o+3]=this._order,x}_onChange(x){return this._onChangeCallback=x,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}MN.DEFAULT_ORDER="XYZ";class ZN{constructor(){this.mask=1}set(x){this.mask=1<<x>>>0}enable(x){this.mask|=1<<x}enableAll(){this.mask=-1}toggle(x){this.mask^=1<<x}disable(x){this.mask&=~(1<<x)}disableAll(){this.mask=0}test(x){return!!(this.mask&x.mask)}isEnabled(x){return!!(this.mask&1<<x)}}let SN=0;const uN=new zH,dN=new aH,ON=new yN,jN=new zH,eN=new zH,qN=new zH,fN=new aH,UN=new zH(1,0,0),sN=new zH(0,1,0),DN=new zH(0,0,1),$N={type:"added"},aN={type:"removed"};class zN extends TH{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:SN++}),this.uuid=HH(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=zN.DEFAULT_UP.clone();const x=new zH,o=new MN,c=new aH,L=new zH(1,1,1);o._onChange((function(){c.setFromEuler(o,!1)})),c._onChange((function(){o.setFromQuaternion(c,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:x},rotation:{configurable:!0,enumerable:!0,value:o},quaternion:{configurable:!0,enumerable:!0,value:c},scale:{configurable:!0,enumerable:!0,value:L},modelViewMatrix:{value:new yN},normalMatrix:{value:new yH}}),this.matrix=new yN,this.matrixWorld=new yN,this.matrixAutoUpdate=zN.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=zN.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new ZN,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(x){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(x),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(x){return this.quaternion.premultiply(x),this}setRotationFromAxisAngle(x,o){this.quaternion.setFromAxisAngle(x,o)}setRotationFromEuler(x){this.quaternion.setFromEuler(x,!0)}setRotationFromMatrix(x){this.quaternion.setFromRotationMatrix(x)}setRotationFromQuaternion(x){this.quaternion.copy(x)}rotateOnAxis(x,o){return dN.setFromAxisAngle(x,o),this.quaternion.multiply(dN),this}rotateOnWorldAxis(x,o){return dN.setFromAxisAngle(x,o),this.quaternion.premultiply(dN),this}rotateX(x){return this.rotateOnAxis(UN,x)}rotateY(x){return this.rotateOnAxis(sN,x)}rotateZ(x){return this.rotateOnAxis(DN,x)}translateOnAxis(x,o){return uN.copy(x).applyQuaternion(this.quaternion),this.position.add(uN.multiplyScalar(o)),this}translateX(x){return this.translateOnAxis(UN,x)}translateY(x){return this.translateOnAxis(sN,x)}translateZ(x){return this.translateOnAxis(DN,x)}localToWorld(x){return this.updateWorldMatrix(!0,!1),x.applyMatrix4(this.matrixWorld)}worldToLocal(x){return this.updateWorldMatrix(!0,!1),x.applyMatrix4(ON.copy(this.matrixWorld).invert())}lookAt(x,o,c){x.isVector3?jN.copy(x):jN.set(x,o,c);const L=this.parent;this.updateWorldMatrix(!0,!1),eN.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ON.lookAt(eN,jN,this.up):ON.lookAt(jN,eN,this.up),this.quaternion.setFromRotationMatrix(ON),L&&(ON.extractRotation(L.matrixWorld),dN.setFromRotationMatrix(ON),this.quaternion.premultiply(dN.invert()))}add(x){if(arguments.length>1){for(let x=0;x<arguments.length;x++)this.add(arguments[x]);return this}return x===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",x),this):(x&&x.isObject3D?(null!==x.parent&&x.parent.remove(x),x.parent=this,this.children.push(x),x.dispatchEvent($N)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",x),this)}remove(x){if(arguments.length>1){for(let x=0;x<arguments.length;x++)this.remove(arguments[x]);return this}const o=this.children.indexOf(x);return-1!==o&&(x.parent=null,this.children.splice(o,1),x.dispatchEvent(aN)),this}removeFromParent(){const x=this.parent;return null!==x&&x.remove(this),this}clear(){for(let x=0;x<this.children.length;x++){const o=this.children[x];o.parent=null,o.dispatchEvent(aN)}return this.children.length=0,this}attach(x){return this.updateWorldMatrix(!0,!1),ON.copy(this.matrixWorld).invert(),null!==x.parent&&(x.parent.updateWorldMatrix(!0,!1),ON.multiply(x.parent.matrixWorld)),x.applyMatrix4(ON),this.add(x),x.updateWorldMatrix(!1,!0),this}getObjectById(x){return this.getObjectByProperty("id",x)}getObjectByName(x){return this.getObjectByProperty("name",x)}getObjectByProperty(x,o){if(this[x]===o)return this;for(let c=0,L=this.children.length;c<L;c++){const L=this.children[c].getObjectByProperty(x,o);if(void 0!==L)return L}}getObjectsByProperty(x,o){let c=[];this[x]===o&&c.push(this);for(let L=0,T=this.children.length;L<T;L++){const T=this.children[L].getObjectsByProperty(x,o);T.length>0&&(c=c.concat(T))}return c}getWorldPosition(x){return this.updateWorldMatrix(!0,!1),x.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(x){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(eN,x,qN),x}getWorldScale(x){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(eN,fN,x),x}getWorldDirection(x){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return x.set(o[8],o[9],o[10]).normalize()}raycast(){}traverse(x){x(this);const o=this.children;for(let c=0,L=o.length;c<L;c++)o[c].traverse(x)}traverseVisible(x){if(!1===this.visible)return;x(this);const o=this.children;for(let c=0,L=o.length;c<L;c++)o[c].traverseVisible(x)}traverseAncestors(x){const o=this.parent;null!==o&&(x(o),o.traverseAncestors(x))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(x){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||x)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,x=!0);const o=this.children;for(let c=0,L=o.length;c<L;c++){const L=o[c];!0!==L.matrixWorldAutoUpdate&&!0!==x||L.updateMatrixWorld(x)}}updateWorldMatrix(x,o){const c=this.parent;if(!0===x&&null!==c&&!0===c.matrixWorldAutoUpdate&&c.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===o){const x=this.children;for(let o=0,c=x.length;o<c;o++){const c=x[o];!0===c.matrixWorldAutoUpdate&&c.updateWorldMatrix(!1,!0)}}}toJSON(x){const o=void 0===x||"string"==typeof x,c={};o&&(x={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},c.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const L={};function T(o,c){return void 0===o[c.uuid]&&(o[c.uuid]=c.toJSON(x)),c.uuid}if(L.uuid=this.uuid,L.type=this.type,""!==this.name&&(L.name=this.name),!0===this.castShadow&&(L.castShadow=!0),!0===this.receiveShadow&&(L.receiveShadow=!0),!1===this.visible&&(L.visible=!1),!1===this.frustumCulled&&(L.frustumCulled=!1),0!==this.renderOrder&&(L.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(L.userData=this.userData),L.layers=this.layers.mask,L.matrix=this.matrix.toArray(),L.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(L.matrixAutoUpdate=!1),this.isInstancedMesh&&(L.type="InstancedMesh",L.count=this.count,L.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(L.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?L.background=this.background.toJSON():this.background.isTexture&&(L.background=this.background.toJSON(x).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(L.environment=this.environment.toJSON(x).uuid);else if(this.isMesh||this.isLine||this.isPoints){L.geometry=T(x.geometries,this.geometry);const o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){const c=o.shapes;if(Array.isArray(c))for(let o=0,L=c.length;o<L;o++){const L=c[o];T(x.shapes,L)}else T(x.shapes,c)}}if(this.isSkinnedMesh&&(L.bindMode=this.bindMode,L.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(T(x.skeletons,this.skeleton),L.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const o=[];for(let c=0,L=this.material.length;c<L;c++)o.push(T(x.materials,this.material[c]));L.material=o}else L.material=T(x.materials,this.material);if(this.children.length>0){L.children=[];for(let o=0;o<this.children.length;o++)L.children.push(this.children[o].toJSON(x).object)}if(this.animations.length>0){L.animations=[];for(let o=0;o<this.animations.length;o++){const c=this.animations[o];L.animations.push(T(x.animations,c))}}if(o){const o=h(x.geometries),L=h(x.materials),T=h(x.textures),A=h(x.images),E=h(x.shapes),H=h(x.skeletons),N=h(x.animations),Q=h(x.nodes);o.length>0&&(c.geometries=o),L.length>0&&(c.materials=L),T.length>0&&(c.textures=T),A.length>0&&(c.images=A),E.length>0&&(c.shapes=E),H.length>0&&(c.skeletons=H),N.length>0&&(c.animations=N),Q.length>0&&(c.nodes=Q)}return c.object=L,c;function h(x){const o=[];for(const c in x){const L=x[c];delete L.metadata,o.push(L)}return o}}clone(x){return(new this.constructor).copy(this,x)}copy(x,o=!0){if(this.name=x.name,this.up.copy(x.up),this.position.copy(x.position),this.rotation.order=x.rotation.order,this.quaternion.copy(x.quaternion),this.scale.copy(x.scale),this.matrix.copy(x.matrix),this.matrixWorld.copy(x.matrixWorld),this.matrixAutoUpdate=x.matrixAutoUpdate,this.matrixWorldNeedsUpdate=x.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=x.matrixWorldAutoUpdate,this.layers.mask=x.layers.mask,this.visible=x.visible,this.castShadow=x.castShadow,this.receiveShadow=x.receiveShadow,this.frustumCulled=x.frustumCulled,this.renderOrder=x.renderOrder,this.animations=x.animations.slice(),this.userData=JSON.parse(JSON.stringify(x.userData)),!0===o)for(let o=0;o<x.children.length;o++){const c=x.children[o];this.add(c.clone())}return this}}zN.DEFAULT_UP=new zH(0,1,0),zN.DEFAULT_MATRIX_AUTO_UPDATE=!0,zN.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const lN=new zH,GN=new zH,pN=new zH,PN=new zH,KN=new zH,JN=new zH,nN=new zH,bN=new zH,WN=new zH,wN=new zH;let gN=!1;class RN{constructor(x=new zH,o=new zH,c=new zH){this.a=x,this.b=o,this.c=c}static getNormal(x,o,c,L){L.subVectors(c,o),lN.subVectors(x,o),L.cross(lN);const T=L.lengthSq();return T>0?L.multiplyScalar(1/Math.sqrt(T)):L.set(0,0,0)}static getBarycoord(x,o,c,L,T){lN.subVectors(L,o),GN.subVectors(c,o),pN.subVectors(x,o);const h=lN.dot(lN),A=lN.dot(GN),E=lN.dot(pN),H=GN.dot(GN),N=GN.dot(pN),Q=h*H-A*A;if(0===Q)return T.set(-2,-1,-1);const I=1/Q,k=(H*E-A*N)*I,_=(h*N-A*E)*I;return T.set(1-k-_,_,k)}static containsPoint(x,o,c,L){return this.getBarycoord(x,o,c,L,PN),PN.x>=0&&PN.y>=0&&PN.x+PN.y<=1}static getUV(x,o,c,L,T,h,A,E){return!1===gN&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),gN=!0),this.getInterpolation(x,o,c,L,T,h,A,E)}static getInterpolation(x,o,c,L,T,h,A,E){return this.getBarycoord(x,o,c,L,PN),E.setScalar(0),E.addScaledVector(T,PN.x),E.addScaledVector(h,PN.y),E.addScaledVector(A,PN.z),E}static isFrontFacing(x,o,c,L){return lN.subVectors(c,o),GN.subVectors(x,o),lN.cross(GN).dot(L)<0}set(x,o,c){return this.a.copy(x),this.b.copy(o),this.c.copy(c),this}setFromPointsAndIndices(x,o,c,L){return this.a.copy(x[o]),this.b.copy(x[c]),this.c.copy(x[L]),this}setFromAttributeAndIndices(x,o,c,L){return this.a.fromBufferAttribute(x,o),this.b.fromBufferAttribute(x,c),this.c.fromBufferAttribute(x,L),this}clone(){return(new this.constructor).copy(this)}copy(x){return this.a.copy(x.a),this.b.copy(x.b),this.c.copy(x.c),this}getArea(){return lN.subVectors(this.c,this.b),GN.subVectors(this.a,this.b),.5*lN.cross(GN).length()}getMidpoint(x){return x.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(x){return RN.getNormal(this.a,this.b,this.c,x)}getPlane(x){return x.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(x,o){return RN.getBarycoord(x,this.a,this.b,this.c,o)}getUV(x,o,c,L,T){return!1===gN&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),gN=!0),RN.getInterpolation(x,this.a,this.b,this.c,o,c,L,T)}getInterpolation(x,o,c,L,T){return RN.getInterpolation(x,this.a,this.b,this.c,o,c,L,T)}containsPoint(x){return RN.containsPoint(x,this.a,this.b,this.c)}isFrontFacing(x){return RN.isFrontFacing(this.a,this.b,this.c,x)}intersectsBox(x){return x.intersectsTriangle(this)}closestPointToPoint(x,o){const c=this.a,L=this.b,T=this.c;let h,A;KN.subVectors(L,c),JN.subVectors(T,c),bN.subVectors(x,c);const E=KN.dot(bN),H=JN.dot(bN);if(E<=0&&H<=0)return o.copy(c);WN.subVectors(x,L);const N=KN.dot(WN),Q=JN.dot(WN);if(N>=0&&Q<=N)return o.copy(L);const I=E*Q-N*H;if(I<=0&&E>=0&&N<=0)return h=E/(E-N),o.copy(c).addScaledVector(KN,h);wN.subVectors(x,T);const k=KN.dot(wN),_=JN.dot(wN);if(_>=0&&k<=_)return o.copy(T);const X=k*H-E*_;if(X<=0&&H>=0&&_<=0)return A=H/(H-_),o.copy(c).addScaledVector(JN,A);const r=N*_-k*Q;if(r<=0&&Q-N>=0&&k-_>=0)return nN.subVectors(T,L),A=(Q-N)/(Q-N+(k-_)),o.copy(L).addScaledVector(nN,A);const y=1/(r+X+I);return h=X*y,A=I*y,o.copy(c).addScaledVector(KN,h).addScaledVector(JN,A)}equals(x){return x.a.equals(this.a)&&x.b.equals(this.b)&&x.c.equals(this.c)}}let xQ=0;class oQ extends TH{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:xQ++}),this.uuid=HH(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(x){this._alphaTest>0!=x>0&&this.version++,this._alphaTest=x}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(x){if(void 0!==x)for(const o in x){const c=x[o];if(void 0===c){console.warn(`THREE.Material: parameter '${o}' has value of undefined.`);continue}const L=this[o];void 0!==L?L&&L.isColor?L.set(c):L&&L.isVector3&&c&&c.isVector3?L.copy(c):this[o]=c:console.warn(`THREE.Material: '${o}' is not a property of THREE.${this.type}.`)}}toJSON(x){const o=void 0===x||"string"==typeof x;o&&(x={textures:{},images:{}});const c={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function L(x){const o=[];for(const c in x){const L=x[c];delete L.metadata,o.push(L)}return o}if(c.uuid=this.uuid,c.type=this.type,""!==this.name&&(c.name=this.name),this.color&&this.color.isColor&&(c.color=this.color.getHex()),void 0!==this.roughness&&(c.roughness=this.roughness),void 0!==this.metalness&&(c.metalness=this.metalness),void 0!==this.sheen&&(c.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(c.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(c.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(c.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(c.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(c.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(c.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(c.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(c.shininess=this.shininess),void 0!==this.clearcoat&&(c.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(c.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(c.clearcoatMap=this.clearcoatMap.toJSON(x).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(c.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(x).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(c.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(x).uuid,c.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(c.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(c.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(c.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(c.iridescenceMap=this.iridescenceMap.toJSON(x).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(c.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(x).uuid),void 0!==this.anisotropy&&(c.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(c.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(c.anisotropyMap=this.anisotropyMap.toJSON(x).uuid),this.map&&this.map.isTexture&&(c.map=this.map.toJSON(x).uuid),this.matcap&&this.matcap.isTexture&&(c.matcap=this.matcap.toJSON(x).uuid),this.alphaMap&&this.alphaMap.isTexture&&(c.alphaMap=this.alphaMap.toJSON(x).uuid),this.lightMap&&this.lightMap.isTexture&&(c.lightMap=this.lightMap.toJSON(x).uuid,c.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(c.aoMap=this.aoMap.toJSON(x).uuid,c.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(c.bumpMap=this.bumpMap.toJSON(x).uuid,c.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(c.normalMap=this.normalMap.toJSON(x).uuid,c.normalMapType=this.normalMapType,c.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(c.displacementMap=this.displacementMap.toJSON(x).uuid,c.displacementScale=this.displacementScale,c.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(c.roughnessMap=this.roughnessMap.toJSON(x).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(c.metalnessMap=this.metalnessMap.toJSON(x).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(c.emissiveMap=this.emissiveMap.toJSON(x).uuid),this.specularMap&&this.specularMap.isTexture&&(c.specularMap=this.specularMap.toJSON(x).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(c.specularIntensityMap=this.specularIntensityMap.toJSON(x).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(c.specularColorMap=this.specularColorMap.toJSON(x).uuid),this.envMap&&this.envMap.isTexture&&(c.envMap=this.envMap.toJSON(x).uuid,void 0!==this.combine&&(c.combine=this.combine)),void 0!==this.envMapIntensity&&(c.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(c.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(c.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(c.gradientMap=this.gradientMap.toJSON(x).uuid),void 0!==this.transmission&&(c.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(c.transmissionMap=this.transmissionMap.toJSON(x).uuid),void 0!==this.thickness&&(c.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(c.thicknessMap=this.thicknessMap.toJSON(x).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(c.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(c.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(c.size=this.size),null!==this.shadowSide&&(c.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(c.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(c.blending=this.blending),0!==this.side&&(c.side=this.side),this.vertexColors&&(c.vertexColors=!0),this.opacity<1&&(c.opacity=this.opacity),!0===this.transparent&&(c.transparent=this.transparent),c.depthFunc=this.depthFunc,c.depthTest=this.depthTest,c.depthWrite=this.depthWrite,c.colorWrite=this.colorWrite,c.stencilWrite=this.stencilWrite,c.stencilWriteMask=this.stencilWriteMask,c.stencilFunc=this.stencilFunc,c.stencilRef=this.stencilRef,c.stencilFuncMask=this.stencilFuncMask,c.stencilFail=this.stencilFail,c.stencilZFail=this.stencilZFail,c.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(c.rotation=this.rotation),!0===this.polygonOffset&&(c.polygonOffset=!0),0!==this.polygonOffsetFactor&&(c.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(c.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(c.linewidth=this.linewidth),void 0!==this.dashSize&&(c.dashSize=this.dashSize),void 0!==this.gapSize&&(c.gapSize=this.gapSize),void 0!==this.scale&&(c.scale=this.scale),!0===this.dithering&&(c.dithering=!0),this.alphaTest>0&&(c.alphaTest=this.alphaTest),!0===this.alphaHash&&(c.alphaHash=this.alphaHash),!0===this.alphaToCoverage&&(c.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(c.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(c.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(c.wireframe=this.wireframe),this.wireframeLinewidth>1&&(c.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(c.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(c.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(c.flatShading=this.flatShading),!1===this.visible&&(c.visible=!1),!1===this.toneMapped&&(c.toneMapped=!1),!1===this.fog&&(c.fog=!1),Object.keys(this.userData).length>0&&(c.userData=this.userData),o){const o=L(x.textures),T=L(x.images);o.length>0&&(c.textures=o),T.length>0&&(c.images=T)}return c}clone(){return(new this.constructor).copy(this)}copy(x){this.name=x.name,this.blending=x.blending,this.side=x.side,this.vertexColors=x.vertexColors,this.opacity=x.opacity,this.transparent=x.transparent,this.blendSrc=x.blendSrc,this.blendDst=x.blendDst,this.blendEquation=x.blendEquation,this.blendSrcAlpha=x.blendSrcAlpha,this.blendDstAlpha=x.blendDstAlpha,this.blendEquationAlpha=x.blendEquationAlpha,this.depthFunc=x.depthFunc,this.depthTest=x.depthTest,this.depthWrite=x.depthWrite,this.stencilWriteMask=x.stencilWriteMask,this.stencilFunc=x.stencilFunc,this.stencilRef=x.stencilRef,this.stencilFuncMask=x.stencilFuncMask,this.stencilFail=x.stencilFail,this.stencilZFail=x.stencilZFail,this.stencilZPass=x.stencilZPass,this.stencilWrite=x.stencilWrite;const o=x.clippingPlanes;let c=null;if(null!==o){const x=o.length;c=new Array(x);for(let L=0;L!==x;++L)c[L]=o[L].clone()}return this.clippingPlanes=c,this.clipIntersection=x.clipIntersection,this.clipShadows=x.clipShadows,this.shadowSide=x.shadowSide,this.colorWrite=x.colorWrite,this.precision=x.precision,this.polygonOffset=x.polygonOffset,this.polygonOffsetFactor=x.polygonOffsetFactor,this.polygonOffsetUnits=x.polygonOffsetUnits,this.dithering=x.dithering,this.alphaTest=x.alphaTest,this.alphaHash=x.alphaHash,this.alphaToCoverage=x.alphaToCoverage,this.premultipliedAlpha=x.premultipliedAlpha,this.forceSinglePass=x.forceSinglePass,this.visible=x.visible,this.toneMapped=x.toneMapped,this.userData=JSON.parse(JSON.stringify(x.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(x){!0===x&&this.version++}}const cQ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},LQ={h:0,s:0,l:0},TQ={h:0,s:0,l:0};function hQ(x,o,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?x+6*(o-x)*c:c<.5?o:c<2/3?x+6*(o-x)*(2/3-c):x}class AQ{constructor(x,o,c){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(x,o,c)}set(x,o,c){if(void 0===o&&void 0===c){const o=x;o&&o.isColor?this.copy(o):"number"==typeof o?this.setHex(o):"string"==typeof o&&this.setStyle(o)}else this.setRGB(x,o,c);return this}setScalar(x){return this.r=x,this.g=x,this.b=x,this}setHex(x,o="srgb"){return x=Math.floor(x),this.r=(x>>16&255)/255,this.g=(x>>8&255)/255,this.b=(255&x)/255,SH.toWorkingColorSpace(this,o),this}setRGB(x,o,c,L=SH.workingColorSpace){return this.r=x,this.g=o,this.b=c,SH.toWorkingColorSpace(this,L),this}setHSL(x,o,c,L=SH.workingColorSpace){if(x=(x%(T=1)+T)%T,o=NH(o,0,1),c=NH(c,0,1),0===o)this.r=this.g=this.b=c;else{const L=c<=.5?c*(1+o):c+o-c*o,T=2*c-L;this.r=hQ(T,L,x+1/3),this.g=hQ(T,L,x),this.b=hQ(T,L,x-1/3)}var T;return SH.toWorkingColorSpace(this,L),this}setStyle(x,o="srgb"){function c(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+x+" will be ignored.")}let L;if(L=/^(\w+)\(([^\)]*)\)/.exec(x)){let T;const h=L[1],A=L[2];switch(h){case"rgb":case"rgba":if(T=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return c(T[4]),this.setRGB(Math.min(255,parseInt(T[1],10))/255,Math.min(255,parseInt(T[2],10))/255,Math.min(255,parseInt(T[3],10))/255,o);if(T=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return c(T[4]),this.setRGB(Math.min(100,parseInt(T[1],10))/100,Math.min(100,parseInt(T[2],10))/100,Math.min(100,parseInt(T[3],10))/100,o);break;case"hsl":case"hsla":if(T=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return c(T[4]),this.setHSL(parseFloat(T[1])/360,parseFloat(T[2])/100,parseFloat(T[3])/100,o);break;default:console.warn("THREE.Color: Unknown color model "+x)}}else if(L=/^\#([A-Fa-f\d]+)$/.exec(x)){const c=L[1],T=c.length;if(3===T)return this.setRGB(parseInt(c.charAt(0),16)/15,parseInt(c.charAt(1),16)/15,parseInt(c.charAt(2),16)/15,o);if(6===T)return this.setHex(parseInt(c,16),o);console.warn("THREE.Color: Invalid hex color "+x)}else if(x&&x.length>0)return this.setColorName(x,o);return this}setColorName(x,o="srgb"){const c=cQ[x.toLowerCase()];return void 0!==c?this.setHex(c,o):console.warn("THREE.Color: Unknown color "+x),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(x){return this.r=x.r,this.g=x.g,this.b=x.b,this}copySRGBToLinear(x){return this.r=mH(x.r),this.g=mH(x.g),this.b=mH(x.b),this}copyLinearToSRGB(x){return this.r=CH(x.r),this.g=CH(x.g),this.b=CH(x.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(x="srgb"){return SH.fromWorkingColorSpace(EQ.copy(this),x),65536*Math.round(NH(255*EQ.r,0,255))+256*Math.round(NH(255*EQ.g,0,255))+Math.round(NH(255*EQ.b,0,255))}getHexString(x="srgb"){return("000000"+this.getHex(x).toString(16)).slice(-6)}getHSL(x,o=SH.workingColorSpace){SH.fromWorkingColorSpace(EQ.copy(this),o);const c=EQ.r,L=EQ.g,T=EQ.b,h=Math.max(c,L,T),A=Math.min(c,L,T);let E,H;const N=(A+h)/2;if(A===h)E=0,H=0;else{const x=h-A;switch(H=N<=.5?x/(h+A):x/(2-h-A),h){case c:E=(L-T)/x+(L<T?6:0);break;case L:E=(T-c)/x+2;break;case T:E=(c-L)/x+4}E/=6}return x.h=E,x.s=H,x.l=N,x}getRGB(x,o=SH.workingColorSpace){return SH.fromWorkingColorSpace(EQ.copy(this),o),x.r=EQ.r,x.g=EQ.g,x.b=EQ.b,x}getStyle(x="srgb"){SH.fromWorkingColorSpace(EQ.copy(this),x);const o=EQ.r,c=EQ.g,L=EQ.b;return"srgb"!==x?`color(${x} ${o.toFixed(3)} ${c.toFixed(3)} ${L.toFixed(3)})`:`rgb(${Math.round(255*o)},${Math.round(255*c)},${Math.round(255*L)})`}offsetHSL(x,o,c){return this.getHSL(LQ),LQ.h+=x,LQ.s+=o,LQ.l+=c,this.setHSL(LQ.h,LQ.s,LQ.l),this}add(x){return this.r+=x.r,this.g+=x.g,this.b+=x.b,this}addColors(x,o){return this.r=x.r+o.r,this.g=x.g+o.g,this.b=x.b+o.b,this}addScalar(x){return this.r+=x,this.g+=x,this.b+=x,this}sub(x){return this.r=Math.max(0,this.r-x.r),this.g=Math.max(0,this.g-x.g),this.b=Math.max(0,this.b-x.b),this}multiply(x){return this.r*=x.r,this.g*=x.g,this.b*=x.b,this}multiplyScalar(x){return this.r*=x,this.g*=x,this.b*=x,this}lerp(x,o){return this.r+=(x.r-this.r)*o,this.g+=(x.g-this.g)*o,this.b+=(x.b-this.b)*o,this}lerpColors(x,o,c){return this.r=x.r+(o.r-x.r)*c,this.g=x.g+(o.g-x.g)*c,this.b=x.b+(o.b-x.b)*c,this}lerpHSL(x,o){this.getHSL(LQ),x.getHSL(TQ);const c=QH(LQ.h,TQ.h,o),L=QH(LQ.s,TQ.s,o),T=QH(LQ.l,TQ.l,o);return this.setHSL(c,L,T),this}setFromVector3(x){return this.r=x.x,this.g=x.y,this.b=x.z,this}applyMatrix3(x){const o=this.r,c=this.g,L=this.b,T=x.elements;return this.r=T[0]*o+T[3]*c+T[6]*L,this.g=T[1]*o+T[4]*c+T[7]*L,this.b=T[2]*o+T[5]*c+T[8]*L,this}equals(x){return x.r===this.r&&x.g===this.g&&x.b===this.b}fromArray(x,o=0){return this.r=x[o],this.g=x[o+1],this.b=x[o+2],this}toArray(x=[],o=0){return x[o]=this.r,x[o+1]=this.g,x[o+2]=this.b,x}fromBufferAttribute(x,o){return this.r=x.getX(o),this.g=x.getY(o),this.b=x.getZ(o),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const EQ=new AQ;AQ.NAMES=cQ;class HQ extends oQ{constructor(x){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new AQ(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(x)}copy(x){return super.copy(x),this.color.copy(x.color),this.map=x.map,this.lightMap=x.lightMap,this.lightMapIntensity=x.lightMapIntensity,this.aoMap=x.aoMap,this.aoMapIntensity=x.aoMapIntensity,this.specularMap=x.specularMap,this.alphaMap=x.alphaMap,this.envMap=x.envMap,this.combine=x.combine,this.reflectivity=x.reflectivity,this.refractionRatio=x.refractionRatio,this.wireframe=x.wireframe,this.wireframeLinewidth=x.wireframeLinewidth,this.wireframeLinecap=x.wireframeLinecap,this.wireframeLinejoin=x.wireframeLinejoin,this.fog=x.fog,this}}const NQ=new zH,QQ=new rH;class IQ{constructor(x,o,c=!1){if(Array.isArray(x))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=x,this.itemSize=o,this.count=void 0!==x?x.length/o:0,this.normalized=c,this.usage=35044,this.updateRange={offset:0,count:-1},this.gpuType=1015,this.version=0}onUploadCallback(){}set needsUpdate(x){!0===x&&this.version++}setUsage(x){return this.usage=x,this}copy(x){return this.name=x.name,this.array=new x.array.constructor(x.array),this.itemSize=x.itemSize,this.count=x.count,this.normalized=x.normalized,this.usage=x.usage,this.gpuType=x.gpuType,this}copyAt(x,o,c){x*=this.itemSize,c*=o.itemSize;for(let L=0,T=this.itemSize;L<T;L++)this.array[x+L]=o.array[c+L];return this}copyArray(x){return this.array.set(x),this}applyMatrix3(x){if(2===this.itemSize)for(let o=0,c=this.count;o<c;o++)QQ.fromBufferAttribute(this,o),QQ.applyMatrix3(x),this.setXY(o,QQ.x,QQ.y);else if(3===this.itemSize)for(let o=0,c=this.count;o<c;o++)NQ.fromBufferAttribute(this,o),NQ.applyMatrix3(x),this.setXYZ(o,NQ.x,NQ.y,NQ.z);return this}applyMatrix4(x){for(let o=0,c=this.count;o<c;o++)NQ.fromBufferAttribute(this,o),NQ.applyMatrix4(x),this.setXYZ(o,NQ.x,NQ.y,NQ.z);return this}applyNormalMatrix(x){for(let o=0,c=this.count;o<c;o++)NQ.fromBufferAttribute(this,o),NQ.applyNormalMatrix(x),this.setXYZ(o,NQ.x,NQ.y,NQ.z);return this}transformDirection(x){for(let o=0,c=this.count;o<c;o++)NQ.fromBufferAttribute(this,o),NQ.transformDirection(x),this.setXYZ(o,NQ.x,NQ.y,NQ.z);return this}set(x,o=0){return this.array.set(x,o),this}getComponent(x,o){let c=this.array[x*this.itemSize+o];return this.normalized&&(c=_H(c,this.array)),c}setComponent(x,o,c){return this.normalized&&(c=XH(c,this.array)),this.array[x*this.itemSize+o]=c,this}getX(x){let o=this.array[x*this.itemSize];return this.normalized&&(o=_H(o,this.array)),o}setX(x,o){return this.normalized&&(o=XH(o,this.array)),this.array[x*this.itemSize]=o,this}getY(x){let o=this.array[x*this.itemSize+1];return this.normalized&&(o=_H(o,this.array)),o}setY(x,o){return this.normalized&&(o=XH(o,this.array)),this.array[x*this.itemSize+1]=o,this}getZ(x){let o=this.array[x*this.itemSize+2];return this.normalized&&(o=_H(o,this.array)),o}setZ(x,o){return this.normalized&&(o=XH(o,this.array)),this.array[x*this.itemSize+2]=o,this}getW(x){let o=this.array[x*this.itemSize+3];return this.normalized&&(o=_H(o,this.array)),o}setW(x,o){return this.normalized&&(o=XH(o,this.array)),this.array[x*this.itemSize+3]=o,this}setXY(x,o,c){return x*=this.itemSize,this.normalized&&(o=XH(o,this.array),c=XH(c,this.array)),this.array[x+0]=o,this.array[x+1]=c,this}setXYZ(x,o,c,L){return x*=this.itemSize,this.normalized&&(o=XH(o,this.array),c=XH(c,this.array),L=XH(L,this.array)),this.array[x+0]=o,this.array[x+1]=c,this.array[x+2]=L,this}setXYZW(x,o,c,L,T){return x*=this.itemSize,this.normalized&&(o=XH(o,this.array),c=XH(c,this.array),L=XH(L,this.array),T=XH(T,this.array)),this.array[x+0]=o,this.array[x+1]=c,this.array[x+2]=L,this.array[x+3]=T,this}onUpload(x){return this.onUploadCallback=x,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const x={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(x.name=this.name),35044!==this.usage&&(x.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(x.updateRange=this.updateRange),x}}class kQ extends IQ{constructor(x,o,c){super(new Uint16Array(x),o,c)}}class _Q extends IQ{constructor(x,o,c){super(new Uint32Array(x),o,c)}}class XQ extends IQ{constructor(x,o,c){super(new Float32Array(x),o,c)}}let rQ=0;const yQ=new yN,vQ=new zN,BQ=new zH,YQ=new pH,FQ=new pH,tQ=new zH;class mQ extends TH{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:rQ++}),this.uuid=HH(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(x){return Array.isArray(x)?this.index=new(BH(x)?_Q:kQ)(x,1):this.index=x,this}getAttribute(x){return this.attributes[x]}setAttribute(x,o){return this.attributes[x]=o,this}deleteAttribute(x){return delete this.attributes[x],this}hasAttribute(x){return void 0!==this.attributes[x]}addGroup(x,o,c=0){this.groups.push({start:x,count:o,materialIndex:c})}clearGroups(){this.groups=[]}setDrawRange(x,o){this.drawRange.start=x,this.drawRange.count=o}applyMatrix4(x){const o=this.attributes.position;void 0!==o&&(o.applyMatrix4(x),o.needsUpdate=!0);const c=this.attributes.normal;if(void 0!==c){const o=(new yH).getNormalMatrix(x);c.applyNormalMatrix(o),c.needsUpdate=!0}const L=this.attributes.tangent;return void 0!==L&&(L.transformDirection(x),L.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(x){return yQ.makeRotationFromQuaternion(x),this.applyMatrix4(yQ),this}rotateX(x){return yQ.makeRotationX(x),this.applyMatrix4(yQ),this}rotateY(x){return yQ.makeRotationY(x),this.applyMatrix4(yQ),this}rotateZ(x){return yQ.makeRotationZ(x),this.applyMatrix4(yQ),this}translate(x,o,c){return yQ.makeTranslation(x,o,c),this.applyMatrix4(yQ),this}scale(x,o,c){return yQ.makeScale(x,o,c),this.applyMatrix4(yQ),this}lookAt(x){return vQ.lookAt(x),vQ.updateMatrix(),this.applyMatrix4(vQ.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(BQ).negate(),this.translate(BQ.x,BQ.y,BQ.z),this}setFromPoints(x){const o=[];for(let c=0,L=x.length;c<L;c++){const L=x[c];o.push(L.x,L.y,L.z||0)}return this.setAttribute("position",new XQ(o,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new pH);const x=this.attributes.position,o=this.morphAttributes.position;if(x&&x.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new zH(-1/0,-1/0,-1/0),new zH(1/0,1/0,1/0));if(void 0!==x){if(this.boundingBox.setFromBufferAttribute(x),o)for(let x=0,c=o.length;x<c;x++){const c=o[x];YQ.setFromBufferAttribute(c),this.morphTargetsRelative?(tQ.addVectors(this.boundingBox.min,YQ.min),this.boundingBox.expandByPoint(tQ),tQ.addVectors(this.boundingBox.max,YQ.max),this.boundingBox.expandByPoint(tQ)):(this.boundingBox.expandByPoint(YQ.min),this.boundingBox.expandByPoint(YQ.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new HN);const x=this.attributes.position,o=this.morphAttributes.position;if(x&&x.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new zH,1/0);if(x){const c=this.boundingSphere.center;if(YQ.setFromBufferAttribute(x),o)for(let x=0,c=o.length;x<c;x++){const c=o[x];FQ.setFromBufferAttribute(c),this.morphTargetsRelative?(tQ.addVectors(YQ.min,FQ.min),YQ.expandByPoint(tQ),tQ.addVectors(YQ.max,FQ.max),YQ.expandByPoint(tQ)):(YQ.expandByPoint(FQ.min),YQ.expandByPoint(FQ.max))}YQ.getCenter(c);let L=0;for(let o=0,T=x.count;o<T;o++)tQ.fromBufferAttribute(x,o),L=Math.max(L,c.distanceToSquared(tQ));if(o)for(let T=0,h=o.length;T<h;T++){const h=o[T],A=this.morphTargetsRelative;for(let o=0,T=h.count;o<T;o++)tQ.fromBufferAttribute(h,o),A&&(BQ.fromBufferAttribute(x,o),tQ.add(BQ)),L=Math.max(L,c.distanceToSquared(tQ))}this.boundingSphere.radius=Math.sqrt(L),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const x=this.index,o=this.attributes;if(null===x||void 0===o.position||void 0===o.normal||void 0===o.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const c=x.array,L=o.position.array,T=o.normal.array,h=o.uv.array,A=L.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new IQ(new Float32Array(4*A),4));const E=this.getAttribute("tangent").array,H=[],N=[];for(let x=0;x<A;x++)H[x]=new zH,N[x]=new zH;const Q=new zH,I=new zH,k=new zH,_=new rH,X=new rH,r=new rH,y=new zH,v=new zH;function B(x,o,c){Q.fromArray(L,3*x),I.fromArray(L,3*o),k.fromArray(L,3*c),_.fromArray(h,2*x),X.fromArray(h,2*o),r.fromArray(h,2*c),I.sub(Q),k.sub(Q),X.sub(_),r.sub(_);const T=1/(X.x*r.y-r.x*X.y);isFinite(T)&&(y.copy(I).multiplyScalar(r.y).addScaledVector(k,-X.y).multiplyScalar(T),v.copy(k).multiplyScalar(X.x).addScaledVector(I,-r.x).multiplyScalar(T),H[x].add(y),H[o].add(y),H[c].add(y),N[x].add(v),N[o].add(v),N[c].add(v))}let Y=this.groups;0===Y.length&&(Y=[{start:0,count:c.length}]);for(let x=0,o=Y.length;x<o;++x){const o=Y[x],L=o.start;for(let x=L,T=L+o.count;x<T;x+=3)B(c[x+0],c[x+1],c[x+2])}const F=new zH,t=new zH,m=new zH,C=new zH;function V(x){m.fromArray(T,3*x),C.copy(m);const o=H[x];F.copy(o),F.sub(m.multiplyScalar(m.dot(o))).normalize(),t.crossVectors(C,o);const c=t.dot(N[x])<0?-1:1;E[4*x]=F.x,E[4*x+1]=F.y,E[4*x+2]=F.z,E[4*x+3]=c}for(let x=0,o=Y.length;x<o;++x){const o=Y[x],L=o.start;for(let x=L,T=L+o.count;x<T;x+=3)V(c[x+0]),V(c[x+1]),V(c[x+2])}}computeVertexNormals(){const x=this.index,o=this.getAttribute("position");if(void 0!==o){let c=this.getAttribute("normal");if(void 0===c)c=new IQ(new Float32Array(3*o.count),3),this.setAttribute("normal",c);else for(let x=0,o=c.count;x<o;x++)c.setXYZ(x,0,0,0);const L=new zH,T=new zH,h=new zH,A=new zH,E=new zH,H=new zH,N=new zH,Q=new zH;if(x)for(let I=0,k=x.count;I<k;I+=3){const k=x.getX(I+0),_=x.getX(I+1),X=x.getX(I+2);L.fromBufferAttribute(o,k),T.fromBufferAttribute(o,_),h.fromBufferAttribute(o,X),N.subVectors(h,T),Q.subVectors(L,T),N.cross(Q),A.fromBufferAttribute(c,k),E.fromBufferAttribute(c,_),H.fromBufferAttribute(c,X),A.add(N),E.add(N),H.add(N),c.setXYZ(k,A.x,A.y,A.z),c.setXYZ(_,E.x,E.y,E.z),c.setXYZ(X,H.x,H.y,H.z)}else for(let x=0,A=o.count;x<A;x+=3)L.fromBufferAttribute(o,x+0),T.fromBufferAttribute(o,x+1),h.fromBufferAttribute(o,x+2),N.subVectors(h,T),Q.subVectors(L,T),N.cross(Q),c.setXYZ(x+0,N.x,N.y,N.z),c.setXYZ(x+1,N.x,N.y,N.z),c.setXYZ(x+2,N.x,N.y,N.z);this.normalizeNormals(),c.needsUpdate=!0}}normalizeNormals(){const x=this.attributes.normal;for(let o=0,c=x.count;o<c;o++)tQ.fromBufferAttribute(x,o),tQ.normalize(),x.setXYZ(o,tQ.x,tQ.y,tQ.z)}toNonIndexed(){function x(x,o){const c=x.array,L=x.itemSize,T=x.normalized,h=new c.constructor(o.length*L);let A=0,E=0;for(let T=0,H=o.length;T<H;T++){A=x.isInterleavedBufferAttribute?o[T]*x.data.stride+x.offset:o[T]*L;for(let x=0;x<L;x++)h[E++]=c[A++]}return new IQ(h,L,T)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const o=new mQ,c=this.index.array,L=this.attributes;for(const T in L){const h=x(L[T],c);o.setAttribute(T,h)}const T=this.morphAttributes;for(const L in T){const h=[],A=T[L];for(let o=0,L=A.length;o<L;o++){const L=x(A[o],c);h.push(L)}o.morphAttributes[L]=h}o.morphTargetsRelative=this.morphTargetsRelative;const h=this.groups;for(let x=0,c=h.length;x<c;x++){const c=h[x];o.addGroup(c.start,c.count,c.materialIndex)}return o}toJSON(){const x={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(x.uuid=this.uuid,x.type=this.type,""!==this.name&&(x.name=this.name),Object.keys(this.userData).length>0&&(x.userData=this.userData),void 0!==this.parameters){const o=this.parameters;for(const c in o)void 0!==o[c]&&(x[c]=o[c]);return x}x.data={attributes:{}};const o=this.index;null!==o&&(x.data.index={type:o.array.constructor.name,array:Array.prototype.slice.call(o.array)});const c=this.attributes;for(const o in c){const L=c[o];x.data.attributes[o]=L.toJSON(x.data)}const L={};let T=!1;for(const o in this.morphAttributes){const c=this.morphAttributes[o],h=[];for(let o=0,L=c.length;o<L;o++){const L=c[o];h.push(L.toJSON(x.data))}h.length>0&&(L[o]=h,T=!0)}T&&(x.data.morphAttributes=L,x.data.morphTargetsRelative=this.morphTargetsRelative);const h=this.groups;h.length>0&&(x.data.groups=JSON.parse(JSON.stringify(h)));const A=this.boundingSphere;return null!==A&&(x.data.boundingSphere={center:A.center.toArray(),radius:A.radius}),x}clone(){return(new this.constructor).copy(this)}copy(x){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const o={};this.name=x.name;const c=x.index;null!==c&&this.setIndex(c.clone(o));const L=x.attributes;for(const x in L){const c=L[x];this.setAttribute(x,c.clone(o))}const T=x.morphAttributes;for(const x in T){const c=[],L=T[x];for(let x=0,T=L.length;x<T;x++)c.push(L[x].clone(o));this.morphAttributes[x]=c}this.morphTargetsRelative=x.morphTargetsRelative;const h=x.groups;for(let x=0,o=h.length;x<o;x++){const o=h[x];this.addGroup(o.start,o.count,o.materialIndex)}const A=x.boundingBox;null!==A&&(this.boundingBox=A.clone());const E=x.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.drawRange.start=x.drawRange.start,this.drawRange.count=x.drawRange.count,this.userData=x.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const CQ=new yN,VQ=new class{constructor(x=new zH,o=new zH(0,0,-1)){this.origin=x,this.direction=o}set(x,o){return this.origin.copy(x),this.direction.copy(o),this}copy(x){return this.origin.copy(x.origin),this.direction.copy(x.direction),this}at(x,o){return o.copy(this.origin).addScaledVector(this.direction,x)}lookAt(x){return this.direction.copy(x).sub(this.origin).normalize(),this}recast(x){return this.origin.copy(this.at(x,NN)),this}closestPointToPoint(x,o){o.subVectors(x,this.origin);const c=o.dot(this.direction);return c<0?o.copy(this.origin):o.copy(this.origin).addScaledVector(this.direction,c)}distanceToPoint(x){return Math.sqrt(this.distanceSqToPoint(x))}distanceSqToPoint(x){const o=NN.subVectors(x,this.origin).dot(this.direction);return o<0?this.origin.distanceToSquared(x):(NN.copy(this.origin).addScaledVector(this.direction,o),NN.distanceToSquared(x))}distanceSqToSegment(x,o,c,L){QN.copy(x).add(o).multiplyScalar(.5),IN.copy(o).sub(x).normalize(),kN.copy(this.origin).sub(QN);const T=.5*x.distanceTo(o),h=-this.direction.dot(IN),A=kN.dot(this.direction),E=-kN.dot(IN),H=kN.lengthSq(),N=Math.abs(1-h*h);let Q,I,k,_;if(N>0)if(Q=h*E-A,I=h*A-E,_=T*N,Q>=0)if(I>=-_)if(I<=_){const x=1/N;Q*=x,I*=x,k=Q*(Q+h*I+2*A)+I*(h*Q+I+2*E)+H}else I=T,Q=Math.max(0,-(h*I+A)),k=-Q*Q+I*(I+2*E)+H;else I=-T,Q=Math.max(0,-(h*I+A)),k=-Q*Q+I*(I+2*E)+H;else I<=-_?(Q=Math.max(0,-(-h*T+A)),I=Q>0?-T:Math.min(Math.max(-T,-E),T),k=-Q*Q+I*(I+2*E)+H):I<=_?(Q=0,I=Math.min(Math.max(-T,-E),T),k=I*(I+2*E)+H):(Q=Math.max(0,-(h*T+A)),I=Q>0?T:Math.min(Math.max(-T,-E),T),k=-Q*Q+I*(I+2*E)+H);else I=h>0?-T:T,Q=Math.max(0,-(h*I+A)),k=-Q*Q+I*(I+2*E)+H;return c&&c.copy(this.origin).addScaledVector(this.direction,Q),L&&L.copy(QN).addScaledVector(IN,I),k}intersectSphere(x,o){NN.subVectors(x.center,this.origin);const c=NN.dot(this.direction),L=NN.dot(NN)-c*c,T=x.radius*x.radius;if(L>T)return null;const h=Math.sqrt(T-L),A=c-h,E=c+h;return E<0?null:A<0?this.at(E,o):this.at(A,o)}intersectsSphere(x){return this.distanceSqToPoint(x.center)<=x.radius*x.radius}distanceToPlane(x){const o=x.normal.dot(this.direction);if(0===o)return 0===x.distanceToPoint(this.origin)?0:null;const c=-(this.origin.dot(x.normal)+x.constant)/o;return c>=0?c:null}intersectPlane(x,o){const c=this.distanceToPlane(x);return null===c?null:this.at(c,o)}intersectsPlane(x){const o=x.distanceToPoint(this.origin);return 0===o||x.normal.dot(this.direction)*o<0}intersectBox(x,o){let c,L,T,h,A,E;const H=1/this.direction.x,N=1/this.direction.y,Q=1/this.direction.z,I=this.origin;return H>=0?(c=(x.min.x-I.x)*H,L=(x.max.x-I.x)*H):(c=(x.max.x-I.x)*H,L=(x.min.x-I.x)*H),N>=0?(T=(x.min.y-I.y)*N,h=(x.max.y-I.y)*N):(T=(x.max.y-I.y)*N,h=(x.min.y-I.y)*N),c>h||T>L?null:((T>c||isNaN(c))&&(c=T),(h<L||isNaN(L))&&(L=h),Q>=0?(A=(x.min.z-I.z)*Q,E=(x.max.z-I.z)*Q):(A=(x.max.z-I.z)*Q,E=(x.min.z-I.z)*Q),c>E||A>L?null:((A>c||c!=c)&&(c=A),(E<L||L!=L)&&(L=E),L<0?null:this.at(c>=0?c:L,o)))}intersectsBox(x){return null!==this.intersectBox(x,NN)}intersectTriangle(x,o,c,L,T){_N.subVectors(o,x),XN.subVectors(c,x),rN.crossVectors(_N,XN);let h,A=this.direction.dot(rN);if(A>0){if(L)return null;h=1}else{if(!(A<0))return null;h=-1,A=-A}kN.subVectors(this.origin,x);const E=h*this.direction.dot(XN.crossVectors(kN,XN));if(E<0)return null;const H=h*this.direction.dot(_N.cross(kN));if(H<0)return null;if(E+H>A)return null;const N=-h*kN.dot(rN);return N<0?null:this.at(N/A,T)}applyMatrix4(x){return this.origin.applyMatrix4(x),this.direction.transformDirection(x),this}equals(x){return x.origin.equals(this.origin)&&x.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}},iQ=new HN,MQ=new zH,ZQ=new zH,SQ=new zH,uQ=new zH,dQ=new zH,OQ=new zH,jQ=new rH,eQ=new rH,qQ=new rH,fQ=new zH,UQ=new zH,sQ=new zH,DQ=new zH,$Q=new zH;class aQ extends zN{constructor(x=new mQ,o=new HQ){super(),this.isMesh=!0,this.type="Mesh",this.geometry=x,this.material=o,this.updateMorphTargets()}copy(x,o){return super.copy(x,o),void 0!==x.morphTargetInfluences&&(this.morphTargetInfluences=x.morphTargetInfluences.slice()),void 0!==x.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},x.morphTargetDictionary)),this.material=x.material,this.geometry=x.geometry,this}updateMorphTargets(){const x=this.geometry.morphAttributes,o=Object.keys(x);if(o.length>0){const c=x[o[0]];if(void 0!==c){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let x=0,o=c.length;x<o;x++){const o=c[x].name||String(x);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=x}}}}getVertexPosition(x,o){const c=this.geometry,L=c.attributes.position,T=c.morphAttributes.position,h=c.morphTargetsRelative;o.fromBufferAttribute(L,x);const A=this.morphTargetInfluences;if(T&&A){OQ.set(0,0,0);for(let c=0,L=T.length;c<L;c++){const L=A[c],E=T[c];0!==L&&(dQ.fromBufferAttribute(E,x),h?OQ.addScaledVector(dQ,L):OQ.addScaledVector(dQ.sub(o),L))}o.add(OQ)}return o}raycast(x,o){const c=this.geometry,L=this.material,T=this.matrixWorld;if(void 0!==L){if(null===c.boundingSphere&&c.computeBoundingSphere(),iQ.copy(c.boundingSphere),iQ.applyMatrix4(T),VQ.copy(x.ray).recast(x.near),!1===iQ.containsPoint(VQ.origin)){if(null===VQ.intersectSphere(iQ,MQ))return;if(VQ.origin.distanceToSquared(MQ)>(x.far-x.near)**2)return}CQ.copy(T).invert(),VQ.copy(x.ray).applyMatrix4(CQ),null!==c.boundingBox&&!1===VQ.intersectsBox(c.boundingBox)||this._computeIntersections(x,o,VQ)}}_computeIntersections(x,o,c){let L;const T=this.geometry,h=this.material,A=T.index,E=T.attributes.position,H=T.attributes.uv,N=T.attributes.uv1,Q=T.attributes.normal,I=T.groups,k=T.drawRange;if(null!==A)if(Array.isArray(h))for(let T=0,E=I.length;T<E;T++){const E=I[T],_=h[E.materialIndex];for(let T=Math.max(E.start,k.start),h=Math.min(A.count,Math.min(E.start+E.count,k.start+k.count));T<h;T+=3)L=zQ(this,_,x,c,H,N,Q,A.getX(T),A.getX(T+1),A.getX(T+2)),L&&(L.faceIndex=Math.floor(T/3),L.face.materialIndex=E.materialIndex,o.push(L))}else for(let T=Math.max(0,k.start),E=Math.min(A.count,k.start+k.count);T<E;T+=3)L=zQ(this,h,x,c,H,N,Q,A.getX(T),A.getX(T+1),A.getX(T+2)),L&&(L.faceIndex=Math.floor(T/3),o.push(L));else if(void 0!==E)if(Array.isArray(h))for(let T=0,A=I.length;T<A;T++){const A=I[T],_=h[A.materialIndex];for(let T=Math.max(A.start,k.start),h=Math.min(E.count,Math.min(A.start+A.count,k.start+k.count));T<h;T+=3)L=zQ(this,_,x,c,H,N,Q,T,T+1,T+2),L&&(L.faceIndex=Math.floor(T/3),L.face.materialIndex=A.materialIndex,o.push(L))}else for(let T=Math.max(0,k.start),A=Math.min(E.count,k.start+k.count);T<A;T+=3)L=zQ(this,h,x,c,H,N,Q,T,T+1,T+2),L&&(L.faceIndex=Math.floor(T/3),o.push(L))}}function zQ(x,o,c,L,T,h,A,E,H,N){x.getVertexPosition(E,ZQ),x.getVertexPosition(H,SQ),x.getVertexPosition(N,uQ);const Q=function(x,o,c,L,T,h,A,E){let H;if(H=1===o.side?L.intersectTriangle(A,h,T,!0,E):L.intersectTriangle(T,h,A,0===o.side,E),null===H)return null;$Q.copy(E),$Q.applyMatrix4(x.matrixWorld);const N=c.ray.origin.distanceTo($Q);return N<c.near||N>c.far?null:{distance:N,point:$Q.clone(),object:x}}(x,o,c,L,ZQ,SQ,uQ,DQ);if(Q){T&&(jQ.fromBufferAttribute(T,E),eQ.fromBufferAttribute(T,H),qQ.fromBufferAttribute(T,N),Q.uv=RN.getInterpolation(DQ,ZQ,SQ,uQ,jQ,eQ,qQ,new rH)),h&&(jQ.fromBufferAttribute(h,E),eQ.fromBufferAttribute(h,H),qQ.fromBufferAttribute(h,N),Q.uv1=RN.getInterpolation(DQ,ZQ,SQ,uQ,jQ,eQ,qQ,new rH),Q.uv2=Q.uv1),A&&(fQ.fromBufferAttribute(A,E),UQ.fromBufferAttribute(A,H),sQ.fromBufferAttribute(A,N),Q.normal=RN.getInterpolation(DQ,ZQ,SQ,uQ,fQ,UQ,sQ,new zH),Q.normal.dot(L.direction)>0&&Q.normal.multiplyScalar(-1));const x={a:E,b:H,c:N,normal:new zH,materialIndex:0};RN.getNormal(ZQ,SQ,uQ,x.normal),Q.face=x}return Q}class lQ extends mQ{constructor(x=1,o=1,c=1,L=1,T=1,h=1){super(),this.type="BoxGeometry",this.parameters={width:x,height:o,depth:c,widthSegments:L,heightSegments:T,depthSegments:h};const A=this;L=Math.floor(L),T=Math.floor(T),h=Math.floor(h);const E=[],H=[],N=[],Q=[];let I=0,k=0;function _(x,o,c,L,T,h,_,X,r,y,v){const B=h/r,Y=_/y,F=h/2,t=_/2,m=X/2,C=r+1,V=y+1;let i=0,M=0;const Z=new zH;for(let h=0;h<V;h++){const A=h*Y-t;for(let E=0;E<C;E++){const I=E*B-F;Z[x]=I*L,Z[o]=A*T,Z[c]=m,H.push(Z.x,Z.y,Z.z),Z[x]=0,Z[o]=0,Z[c]=X>0?1:-1,N.push(Z.x,Z.y,Z.z),Q.push(E/r),Q.push(1-h/y),i+=1}}for(let x=0;x<y;x++)for(let o=0;o<r;o++){const c=I+o+C*x,L=I+o+C*(x+1),T=I+(o+1)+C*(x+1),h=I+(o+1)+C*x;E.push(c,L,h),E.push(L,T,h),M+=6}A.addGroup(k,M,v),k+=M,I+=i}_("z","y","x",-1,-1,c,o,x,h,T,0),_("z","y","x",1,-1,c,o,-x,h,T,1),_("x","z","y",1,1,x,c,o,L,h,2),_("x","z","y",1,-1,x,c,-o,L,h,3),_("x","y","z",1,-1,x,o,c,L,T,4),_("x","y","z",-1,-1,x,o,-c,L,T,5),this.setIndex(E),this.setAttribute("position",new XQ(H,3)),this.setAttribute("normal",new XQ(N,3)),this.setAttribute("uv",new XQ(Q,2))}copy(x){return super.copy(x),this.parameters=Object.assign({},x.parameters),this}static fromJSON(x){return new lQ(x.width,x.height,x.depth,x.widthSegments,x.heightSegments,x.depthSegments)}}function GQ(x){const o={};for(const c in x){o[c]={};for(const L in x[c]){const T=x[c][L];T&&(T.isColor||T.isMatrix3||T.isMatrix4||T.isVector2||T.isVector3||T.isVector4||T.isTexture||T.isQuaternion)?T.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),o[c][L]=null):o[c][L]=T.clone():Array.isArray(T)?o[c][L]=T.slice():o[c][L]=T}}return o}function pQ(x){const o={};for(let c=0;c<x.length;c++){const L=GQ(x[c]);for(const x in L)o[x]=L[x]}return o}function PQ(x){return null===x.getRenderTarget()?x.outputColorSpace:"srgb-linear"}const KQ={clone:GQ,merge:pQ};class JQ extends oQ{constructor(x){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==x&&this.setValues(x)}copy(x){return super.copy(x),this.fragmentShader=x.fragmentShader,this.vertexShader=x.vertexShader,this.uniforms=GQ(x.uniforms),this.uniformsGroups=function(x){const o=[];for(let c=0;c<x.length;c++)o.push(x[c].clone());return o}(x.uniformsGroups),this.defines=Object.assign({},x.defines),this.wireframe=x.wireframe,this.wireframeLinewidth=x.wireframeLinewidth,this.fog=x.fog,this.lights=x.lights,this.clipping=x.clipping,this.extensions=Object.assign({},x.extensions),this.glslVersion=x.glslVersion,this}toJSON(x){const o=super.toJSON(x);o.glslVersion=this.glslVersion,o.uniforms={};for(const c in this.uniforms){const L=this.uniforms[c].value;L&&L.isTexture?o.uniforms[c]={type:"t",value:L.toJSON(x).uuid}:L&&L.isColor?o.uniforms[c]={type:"c",value:L.getHex()}:L&&L.isVector2?o.uniforms[c]={type:"v2",value:L.toArray()}:L&&L.isVector3?o.uniforms[c]={type:"v3",value:L.toArray()}:L&&L.isVector4?o.uniforms[c]={type:"v4",value:L.toArray()}:L&&L.isMatrix3?o.uniforms[c]={type:"m3",value:L.toArray()}:L&&L.isMatrix4?o.uniforms[c]={type:"m4",value:L.toArray()}:o.uniforms[c]={value:L}}Object.keys(this.defines).length>0&&(o.defines=this.defines),o.vertexShader=this.vertexShader,o.fragmentShader=this.fragmentShader,o.lights=this.lights,o.clipping=this.clipping;const c={};for(const x in this.extensions)!0===this.extensions[x]&&(c[x]=!0);return Object.keys(c).length>0&&(o.extensions=c),o}}class nQ extends zN{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new yN,this.projectionMatrix=new yN,this.projectionMatrixInverse=new yN,this.coordinateSystem=2e3}copy(x,o){return super.copy(x,o),this.matrixWorldInverse.copy(x.matrixWorldInverse),this.projectionMatrix.copy(x.projectionMatrix),this.projectionMatrixInverse.copy(x.projectionMatrixInverse),this.coordinateSystem=x.coordinateSystem,this}getWorldDirection(x){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return x.set(-o[8],-o[9],-o[10]).normalize()}updateMatrixWorld(x){super.updateMatrixWorld(x),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(x,o){super.updateWorldMatrix(x,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class bQ extends nQ{constructor(x=50,o=1,c=.1,L=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=x,this.zoom=1,this.near=c,this.far=L,this.focus=10,this.aspect=o,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(x,o){return super.copy(x,o),this.fov=x.fov,this.zoom=x.zoom,this.near=x.near,this.far=x.far,this.focus=x.focus,this.aspect=x.aspect,this.view=null===x.view?null:Object.assign({},x.view),this.filmGauge=x.filmGauge,this.filmOffset=x.filmOffset,this}setFocalLength(x){const o=.5*this.getFilmHeight()/x;this.fov=2*EH*Math.atan(o),this.updateProjectionMatrix()}getFocalLength(){const x=Math.tan(.5*AH*this.fov);return.5*this.getFilmHeight()/x}getEffectiveFOV(){return 2*EH*Math.atan(Math.tan(.5*AH*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(x,o,c,L,T,h){this.aspect=x/o,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=x,this.view.fullHeight=o,this.view.offsetX=c,this.view.offsetY=L,this.view.width=T,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const x=this.near;let o=x*Math.tan(.5*AH*this.fov)/this.zoom,c=2*o,L=this.aspect*c,T=-.5*L;const h=this.view;if(null!==this.view&&this.view.enabled){const x=h.fullWidth,A=h.fullHeight;T+=h.offsetX*L/x,o-=h.offsetY*c/A,L*=h.width/x,c*=h.height/A}const A=this.filmOffset;0!==A&&(T+=x*A/this.getFilmWidth()),this.projectionMatrix.makePerspective(T,T+L,o,o-c,x,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(x){const o=super.toJSON(x);return o.object.fov=this.fov,o.object.zoom=this.zoom,o.object.near=this.near,o.object.far=this.far,o.object.focus=this.focus,o.object.aspect=this.aspect,null!==this.view&&(o.object.view=Object.assign({},this.view)),o.object.filmGauge=this.filmGauge,o.object.filmOffset=this.filmOffset,o}}class WQ extends zN{constructor(x,o,c){super(),this.type="CubeCamera",this.renderTarget=c,this.coordinateSystem=null;const L=new bQ(-90,1,x,o);L.layers=this.layers,this.add(L);const T=new bQ(-90,1,x,o);T.layers=this.layers,this.add(T);const h=new bQ(-90,1,x,o);h.layers=this.layers,this.add(h);const A=new bQ(-90,1,x,o);A.layers=this.layers,this.add(A);const E=new bQ(-90,1,x,o);E.layers=this.layers,this.add(E);const H=new bQ(-90,1,x,o);H.layers=this.layers,this.add(H)}updateCoordinateSystem(){const x=this.coordinateSystem,o=this.children.concat(),[c,L,T,h,A,E]=o;for(const x of o)this.remove(x);if(2e3===x)c.up.set(0,1,0),c.lookAt(1,0,0),L.up.set(0,1,0),L.lookAt(-1,0,0),T.up.set(0,0,-1),T.lookAt(0,1,0),h.up.set(0,0,1),h.lookAt(0,-1,0),A.up.set(0,1,0),A.lookAt(0,0,1),E.up.set(0,1,0),E.lookAt(0,0,-1);else{if(2001!==x)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+x);c.up.set(0,-1,0),c.lookAt(-1,0,0),L.up.set(0,-1,0),L.lookAt(1,0,0),T.up.set(0,0,1),T.lookAt(0,1,0),h.up.set(0,0,-1),h.lookAt(0,-1,0),A.up.set(0,-1,0),A.lookAt(0,0,1),E.up.set(0,-1,0),E.lookAt(0,0,-1)}for(const x of o)this.add(x),x.updateMatrixWorld()}update(x,o){null===this.parent&&this.updateMatrixWorld();const c=this.renderTarget;this.coordinateSystem!==x.coordinateSystem&&(this.coordinateSystem=x.coordinateSystem,this.updateCoordinateSystem());const[L,T,h,A,E,H]=this.children,N=x.getRenderTarget(),Q=x.xr.enabled;x.xr.enabled=!1;const I=c.texture.generateMipmaps;c.texture.generateMipmaps=!1,x.setRenderTarget(c,0),x.render(o,L),x.setRenderTarget(c,1),x.render(o,T),x.setRenderTarget(c,2),x.render(o,h),x.setRenderTarget(c,3),x.render(o,A),x.setRenderTarget(c,4),x.render(o,E),c.texture.generateMipmaps=I,x.setRenderTarget(c,5),x.render(o,H),x.setRenderTarget(N),x.xr.enabled=Q,c.texture.needsPMREMUpdate=!0}}class wQ extends fH{constructor(x,o,c,L,T,h,A,E,H,N){super(x=void 0!==x?x:[],o=void 0!==o?o:301,c,L,T,h,A,E,H,N),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(x){this.image=x}}class gQ extends DH{constructor(x=1,o={}){super(x,x,o),this.isWebGLCubeRenderTarget=!0;const c={width:x,height:x,depth:1},L=[c,c,c,c,c,c];void 0!==o.encoding&&(tH("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),o.colorSpace=3001===o.encoding?"srgb":""),this.texture=new wQ(L,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==o.generateMipmaps&&o.generateMipmaps,this.texture.minFilter=void 0!==o.minFilter?o.minFilter:1006}fromEquirectangularTexture(x,o){this.texture.type=o.type,this.texture.colorSpace=o.colorSpace,this.texture.generateMipmaps=o.generateMipmaps,this.texture.minFilter=o.minFilter,this.texture.magFilter=o.magFilter;const c=new lQ(5,5,5),L=new JQ({name:"CubemapFromEquirect",uniforms:GQ({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:1,blending:0});L.uniforms.tEquirect.value=o;const T=new aQ(c,L),h=o.minFilter;return 1008===o.minFilter&&(o.minFilter=1006),new WQ(1,10,this).update(x,T),o.minFilter=h,T.geometry.dispose(),T.material.dispose(),this}clear(x,o,c,L){const T=x.getRenderTarget();for(let T=0;T<6;T++)x.setRenderTarget(this,T),x.clear(o,c,L);x.setRenderTarget(T)}}const RQ=new zH,xI=new zH,oI=new yH;class cI{constructor(x=new zH(1,0,0),o=0){this.isPlane=!0,this.normal=x,this.constant=o}set(x,o){return this.normal.copy(x),this.constant=o,this}setComponents(x,o,c,L){return this.normal.set(x,o,c),this.constant=L,this}setFromNormalAndCoplanarPoint(x,o){return this.normal.copy(x),this.constant=-o.dot(this.normal),this}setFromCoplanarPoints(x,o,c){const L=RQ.subVectors(c,o).cross(xI.subVectors(x,o)).normalize();return this.setFromNormalAndCoplanarPoint(L,x),this}copy(x){return this.normal.copy(x.normal),this.constant=x.constant,this}normalize(){const x=1/this.normal.length();return this.normal.multiplyScalar(x),this.constant*=x,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(x){return this.normal.dot(x)+this.constant}distanceToSphere(x){return this.distanceToPoint(x.center)-x.radius}projectPoint(x,o){return o.copy(x).addScaledVector(this.normal,-this.distanceToPoint(x))}intersectLine(x,o){const c=x.delta(RQ),L=this.normal.dot(c);if(0===L)return 0===this.distanceToPoint(x.start)?o.copy(x.start):null;const T=-(x.start.dot(this.normal)+this.constant)/L;return T<0||T>1?null:o.copy(x.start).addScaledVector(c,T)}intersectsLine(x){const o=this.distanceToPoint(x.start),c=this.distanceToPoint(x.end);return o<0&&c>0||c<0&&o>0}intersectsBox(x){return x.intersectsPlane(this)}intersectsSphere(x){return x.intersectsPlane(this)}coplanarPoint(x){return x.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(x,o){const c=o||oI.getNormalMatrix(x),L=this.coplanarPoint(RQ).applyMatrix4(x),T=this.normal.applyMatrix3(c).normalize();return this.constant=-L.dot(T),this}translate(x){return this.constant-=x.dot(this.normal),this}equals(x){return x.normal.equals(this.normal)&&x.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const LI=new HN,TI=new zH;class hI{constructor(x=new cI,o=new cI,c=new cI,L=new cI,T=new cI,h=new cI){this.planes=[x,o,c,L,T,h]}set(x,o,c,L,T,h){const A=this.planes;return A[0].copy(x),A[1].copy(o),A[2].copy(c),A[3].copy(L),A[4].copy(T),A[5].copy(h),this}copy(x){const o=this.planes;for(let c=0;c<6;c++)o[c].copy(x.planes[c]);return this}setFromProjectionMatrix(x,o=2e3){const c=this.planes,L=x.elements,T=L[0],h=L[1],A=L[2],E=L[3],H=L[4],N=L[5],Q=L[6],I=L[7],k=L[8],_=L[9],X=L[10],r=L[11],y=L[12],v=L[13],B=L[14],Y=L[15];if(c[0].setComponents(E-T,I-H,r-k,Y-y).normalize(),c[1].setComponents(E+T,I+H,r+k,Y+y).normalize(),c[2].setComponents(E+h,I+N,r+_,Y+v).normalize(),c[3].setComponents(E-h,I-N,r-_,Y-v).normalize(),c[4].setComponents(E-A,I-Q,r-X,Y-B).normalize(),2e3===o)c[5].setComponents(E+A,I+Q,r+X,Y+B).normalize();else{if(2001!==o)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+o);c[5].setComponents(A,Q,X,B).normalize()}return this}intersectsObject(x){if(void 0!==x.boundingSphere)null===x.boundingSphere&&x.computeBoundingSphere(),LI.copy(x.boundingSphere).applyMatrix4(x.matrixWorld);else{const o=x.geometry;null===o.boundingSphere&&o.computeBoundingSphere(),LI.copy(o.boundingSphere).applyMatrix4(x.matrixWorld)}return this.intersectsSphere(LI)}intersectsSprite(x){return LI.center.set(0,0,0),LI.radius=.7071067811865476,LI.applyMatrix4(x.matrixWorld),this.intersectsSphere(LI)}intersectsSphere(x){const o=this.planes,c=x.center,L=-x.radius;for(let x=0;x<6;x++)if(o[x].distanceToPoint(c)<L)return!1;return!0}intersectsBox(x){const o=this.planes;for(let c=0;c<6;c++){const L=o[c];if(TI.x=L.normal.x>0?x.max.x:x.min.x,TI.y=L.normal.y>0?x.max.y:x.min.y,TI.z=L.normal.z>0?x.max.z:x.min.z,L.distanceToPoint(TI)<0)return!1}return!0}containsPoint(x){const o=this.planes;for(let c=0;c<6;c++)if(o[c].distanceToPoint(x)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function AI(){let x=null,o=!1,c=null,L=null;function T(o,h){c(o,h),L=x.requestAnimationFrame(T)}return{start:function(){!0!==o&&null!==c&&(L=x.requestAnimationFrame(T),o=!0)},stop:function(){x.cancelAnimationFrame(L),o=!1},setAnimationLoop:function(x){c=x},setContext:function(o){x=o}}}function EI(x,o){const c=o.isWebGL2,L=new WeakMap;return{get:function(x){return x.isInterleavedBufferAttribute&&(x=x.data),L.get(x)},remove:function(o){o.isInterleavedBufferAttribute&&(o=o.data);const c=L.get(o);c&&(x.deleteBuffer(c.buffer),L.delete(o))},update:function(o,T){if(o.isGLBufferAttribute){const x=L.get(o);return void((!x||x.version<o.version)&&L.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version}))}o.isInterleavedBufferAttribute&&(o=o.data);const h=L.get(o);void 0===h?L.set(o,function(o,L){const T=o.array,h=o.usage,A=x.createBuffer();let E;if(x.bindBuffer(L,A),x.bufferData(L,T,h),o.onUploadCallback(),T instanceof Float32Array)E=x.FLOAT;else if(T instanceof Uint16Array)if(o.isFloat16BufferAttribute){if(!c)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");E=x.HALF_FLOAT}else E=x.UNSIGNED_SHORT;else if(T instanceof Int16Array)E=x.SHORT;else if(T instanceof Uint32Array)E=x.UNSIGNED_INT;else if(T instanceof Int32Array)E=x.INT;else if(T instanceof Int8Array)E=x.BYTE;else if(T instanceof Uint8Array)E=x.UNSIGNED_BYTE;else{if(!(T instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+T);E=x.UNSIGNED_BYTE}return{buffer:A,type:E,bytesPerElement:T.BYTES_PER_ELEMENT,version:o.version}}(o,T)):h.version<o.version&&(function(o,L,T){const h=L.array,A=L.updateRange;x.bindBuffer(T,o),-1===A.count?x.bufferSubData(T,0,h):(c?x.bufferSubData(T,A.offset*h.BYTES_PER_ELEMENT,h,A.offset,A.count):x.bufferSubData(T,A.offset*h.BYTES_PER_ELEMENT,h.subarray(A.offset,A.offset+A.count)),A.count=-1),L.onUploadCallback()}(h.buffer,o,T),h.version=o.version)}}}class HI extends mQ{constructor(x=1,o=1,c=1,L=1){super(),this.type="PlaneGeometry",this.parameters={width:x,height:o,widthSegments:c,heightSegments:L};const T=x/2,h=o/2,A=Math.floor(c),E=Math.floor(L),H=A+1,N=E+1,Q=x/A,I=o/E,k=[],_=[],X=[],r=[];for(let x=0;x<N;x++){const o=x*I-h;for(let c=0;c<H;c++){const L=c*Q-T;_.push(L,-o,0),X.push(0,0,1),r.push(c/A),r.push(1-x/E)}}for(let x=0;x<E;x++)for(let o=0;o<A;o++){const c=o+H*x,L=o+H*(x+1),T=o+1+H*(x+1),h=o+1+H*x;k.push(c,L,h),k.push(L,T,h)}this.setIndex(k),this.setAttribute("position",new XQ(_,3)),this.setAttribute("normal",new XQ(X,3)),this.setAttribute("uv",new XQ(r,2))}copy(x){return super.copy(x),this.parameters=Object.assign({},x.parameters),this}static fromJSON(x){return new HI(x.width,x.height,x.widthSegments,x.heightSegments)}}const NI={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},QI={common:{diffuse:{value:new AQ(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new yH},alphaMap:{value:null},alphaMapTransform:{value:new yH},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new yH}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new yH}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new yH}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new yH},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new yH},normalScale:{value:new rH(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new yH},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new yH}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new yH}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new yH}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new AQ(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new AQ(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new yH},alphaTest:{value:0},uvTransform:{value:new yH}},sprite:{diffuse:{value:new AQ(16777215)},opacity:{value:1},center:{value:new rH(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new yH},alphaMap:{value:null},alphaMapTransform:{value:new yH},alphaTest:{value:0}}},II={basic:{uniforms:pQ([QI.common,QI.specularmap,QI.envmap,QI.aomap,QI.lightmap,QI.fog]),vertexShader:NI.meshbasic_vert,fragmentShader:NI.meshbasic_frag},lambert:{uniforms:pQ([QI.common,QI.specularmap,QI.envmap,QI.aomap,QI.lightmap,QI.emissivemap,QI.bumpmap,QI.normalmap,QI.displacementmap,QI.fog,QI.lights,{emissive:{value:new AQ(0)}}]),vertexShader:NI.meshlambert_vert,fragmentShader:NI.meshlambert_frag},phong:{uniforms:pQ([QI.common,QI.specularmap,QI.envmap,QI.aomap,QI.lightmap,QI.emissivemap,QI.bumpmap,QI.normalmap,QI.displacementmap,QI.fog,QI.lights,{emissive:{value:new AQ(0)},specular:{value:new AQ(1118481)},shininess:{value:30}}]),vertexShader:NI.meshphong_vert,fragmentShader:NI.meshphong_frag},standard:{uniforms:pQ([QI.common,QI.envmap,QI.aomap,QI.lightmap,QI.emissivemap,QI.bumpmap,QI.normalmap,QI.displacementmap,QI.roughnessmap,QI.metalnessmap,QI.fog,QI.lights,{emissive:{value:new AQ(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:NI.meshphysical_vert,fragmentShader:NI.meshphysical_frag},toon:{uniforms:pQ([QI.common,QI.aomap,QI.lightmap,QI.emissivemap,QI.bumpmap,QI.normalmap,QI.displacementmap,QI.gradientmap,QI.fog,QI.lights,{emissive:{value:new AQ(0)}}]),vertexShader:NI.meshtoon_vert,fragmentShader:NI.meshtoon_frag},matcap:{uniforms:pQ([QI.common,QI.bumpmap,QI.normalmap,QI.displacementmap,QI.fog,{matcap:{value:null}}]),vertexShader:NI.meshmatcap_vert,fragmentShader:NI.meshmatcap_frag},points:{uniforms:pQ([QI.points,QI.fog]),vertexShader:NI.points_vert,fragmentShader:NI.points_frag},dashed:{uniforms:pQ([QI.common,QI.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:NI.linedashed_vert,fragmentShader:NI.linedashed_frag},depth:{uniforms:pQ([QI.common,QI.displacementmap]),vertexShader:NI.depth_vert,fragmentShader:NI.depth_frag},normal:{uniforms:pQ([QI.common,QI.bumpmap,QI.normalmap,QI.displacementmap,{opacity:{value:1}}]),vertexShader:NI.meshnormal_vert,fragmentShader:NI.meshnormal_frag},sprite:{uniforms:pQ([QI.sprite,QI.fog]),vertexShader:NI.sprite_vert,fragmentShader:NI.sprite_frag},background:{uniforms:{uvTransform:{value:new yH},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:NI.background_vert,fragmentShader:NI.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:NI.backgroundCube_vert,fragmentShader:NI.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:NI.cube_vert,fragmentShader:NI.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:NI.equirect_vert,fragmentShader:NI.equirect_frag},distanceRGBA:{uniforms:pQ([QI.common,QI.displacementmap,{referencePosition:{value:new zH},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:NI.distanceRGBA_vert,fragmentShader:NI.distanceRGBA_frag},shadow:{uniforms:pQ([QI.lights,QI.fog,{color:{value:new AQ(0)},opacity:{value:1}}]),vertexShader:NI.shadow_vert,fragmentShader:NI.shadow_frag}};II.physical={uniforms:pQ([II.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new yH},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new yH},clearcoatNormalScale:{value:new rH(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new yH},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new yH},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new yH},sheen:{value:0},sheenColor:{value:new AQ(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new yH},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new yH},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new yH},transmissionSamplerSize:{value:new rH},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new yH},attenuationDistance:{value:0},attenuationColor:{value:new AQ(0)},specularColor:{value:new AQ(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new yH},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new yH},anisotropyVector:{value:new rH},anisotropyMap:{value:null},anisotropyMapTransform:{value:new yH}}]),vertexShader:NI.meshphysical_vert,fragmentShader:NI.meshphysical_frag};const kI={r:0,b:0,g:0};function _I(x,o,c,L,T,h,A){const E=new AQ(0);let H,N,Q=!0===h?0:1,I=null,k=0,_=null;function X(o,c){o.getRGB(kI,PQ(x)),L.buffers.color.setClear(kI.r,kI.g,kI.b,c,A)}return{getClearColor:function(){return E},setClearColor:function(x,o=1){E.set(x),Q=o,X(E,Q)},getClearAlpha:function(){return Q},setClearAlpha:function(x){Q=x,X(E,Q)},render:function(h,r){let y=!1,v=!0===r.isScene?r.background:null;switch(v&&v.isTexture&&(v=(r.backgroundBlurriness>0?c:o).get(v)),null===v?X(E,Q):v&&v.isColor&&(X(v,1),y=!0),x.xr.getEnvironmentBlendMode()){case"opaque":y=!0;break;case"additive":L.buffers.color.setClear(0,0,0,1,A),y=!0;break;case"alpha-blend":L.buffers.color.setClear(0,0,0,0,A),y=!0}(x.autoClear||y)&&x.clear(x.autoClearColor,x.autoClearDepth,x.autoClearStencil),v&&(v.isCubeTexture||306===v.mapping)?(void 0===N&&(N=new aQ(new lQ(1,1,1),new JQ({name:"BackgroundCubeMaterial",uniforms:GQ(II.backgroundCube.uniforms),vertexShader:II.backgroundCube.vertexShader,fragmentShader:II.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),N.geometry.deleteAttribute("normal"),N.geometry.deleteAttribute("uv"),N.onBeforeRender=function(x,o,c){this.matrixWorld.copyPosition(c.matrixWorld)},Object.defineProperty(N.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),T.update(N)),N.material.uniforms.envMap.value=v,N.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,N.material.uniforms.backgroundBlurriness.value=r.backgroundBlurriness,N.material.uniforms.backgroundIntensity.value=r.backgroundIntensity,N.material.toneMapped="srgb"!==v.colorSpace,I===v&&k===v.version&&_===x.toneMapping||(N.material.needsUpdate=!0,I=v,k=v.version,_=x.toneMapping),N.layers.enableAll(),h.unshift(N,N.geometry,N.material,0,0,null)):v&&v.isTexture&&(void 0===H&&(H=new aQ(new HI(2,2),new JQ({name:"BackgroundMaterial",uniforms:GQ(II.background.uniforms),vertexShader:II.background.vertexShader,fragmentShader:II.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),H.geometry.deleteAttribute("normal"),Object.defineProperty(H.material,"map",{get:function(){return this.uniforms.t2D.value}}),T.update(H)),H.material.uniforms.t2D.value=v,H.material.uniforms.backgroundIntensity.value=r.backgroundIntensity,H.material.toneMapped="srgb"!==v.colorSpace,!0===v.matrixAutoUpdate&&v.updateMatrix(),H.material.uniforms.uvTransform.value.copy(v.matrix),I===v&&k===v.version&&_===x.toneMapping||(H.material.needsUpdate=!0,I=v,k=v.version,_=x.toneMapping),H.layers.enableAll(),h.unshift(H,H.geometry,H.material,0,0,null))}}}function XI(x,o,c,L){const T=x.getParameter(x.MAX_VERTEX_ATTRIBS),h=L.isWebGL2?null:o.get("OES_vertex_array_object"),A=L.isWebGL2||null!==h,E={},H=_(null);let N=H,Q=!1;function I(o){return L.isWebGL2?x.bindVertexArray(o):h.bindVertexArrayOES(o)}function k(o){return L.isWebGL2?x.deleteVertexArray(o):h.deleteVertexArrayOES(o)}function _(x){const o=[],c=[],L=[];for(let x=0;x<T;x++)o[x]=0,c[x]=0,L[x]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:o,enabledAttributes:c,attributeDivisors:L,object:x,attributes:{},index:null}}function X(){const x=N.newAttributes;for(let o=0,c=x.length;o<c;o++)x[o]=0}function r(x){y(x,0)}function y(c,T){const h=N.newAttributes,A=N.enabledAttributes,E=N.attributeDivisors;h[c]=1,0===A[c]&&(x.enableVertexAttribArray(c),A[c]=1),E[c]!==T&&((L.isWebGL2?x:o.get("ANGLE_instanced_arrays"))[L.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](c,T),E[c]=T)}function v(){const o=N.newAttributes,c=N.enabledAttributes;for(let L=0,T=c.length;L<T;L++)c[L]!==o[L]&&(x.disableVertexAttribArray(L),c[L]=0)}function B(o,c,L,T,h,A,E){!0===E?x.vertexAttribIPointer(o,c,L,h,A):x.vertexAttribPointer(o,c,L,T,h,A)}function Y(){F(),Q=!0,N!==H&&(N=H,I(N.object))}function F(){H.geometry=null,H.program=null,H.wireframe=!1}return{setup:function(T,H,k,Y,F){let t=!1;if(A){const o=function(o,c,T){const A=!0===T.wireframe;let H=E[o.id];void 0===H&&(H={},E[o.id]=H);let N=H[c.id];void 0===N&&(N={},H[c.id]=N);let Q=N[A];return void 0===Q&&(Q=_(L.isWebGL2?x.createVertexArray():h.createVertexArrayOES()),N[A]=Q),Q}(Y,k,H);N!==o&&(N=o,I(N.object)),t=function(x,o,c,L){const T=N.attributes,h=o.attributes;let A=0;const E=c.getAttributes();for(const o in E)if(E[o].location>=0){const c=T[o];let L=h[o];if(void 0===L&&("instanceMatrix"===o&&x.instanceMatrix&&(L=x.instanceMatrix),"instanceColor"===o&&x.instanceColor&&(L=x.instanceColor)),void 0===c)return!0;if(c.attribute!==L)return!0;if(L&&c.data!==L.data)return!0;A++}return N.attributesNum!==A||N.index!==L}(T,Y,k,F),t&&function(x,o,c,L){const T={},h=o.attributes;let A=0;const E=c.getAttributes();for(const o in E)if(E[o].location>=0){let c=h[o];void 0===c&&("instanceMatrix"===o&&x.instanceMatrix&&(c=x.instanceMatrix),"instanceColor"===o&&x.instanceColor&&(c=x.instanceColor));const L={};L.attribute=c,c&&c.data&&(L.data=c.data),T[o]=L,A++}N.attributes=T,N.attributesNum=A,N.index=L}(T,Y,k,F)}else{const x=!0===H.wireframe;N.geometry===Y.id&&N.program===k.id&&N.wireframe===x||(N.geometry=Y.id,N.program=k.id,N.wireframe=x,t=!0)}null!==F&&c.update(F,x.ELEMENT_ARRAY_BUFFER),(t||Q)&&(Q=!1,function(T,h,A,E){if(!1===L.isWebGL2&&(T.isInstancedMesh||E.isInstancedBufferGeometry)&&null===o.get("ANGLE_instanced_arrays"))return;X();const H=E.attributes,N=A.getAttributes(),Q=h.defaultAttributeValues;for(const o in N){const h=N[o];if(h.location>=0){let A=H[o];if(void 0===A&&("instanceMatrix"===o&&T.instanceMatrix&&(A=T.instanceMatrix),"instanceColor"===o&&T.instanceColor&&(A=T.instanceColor)),void 0!==A){const o=A.normalized,H=A.itemSize,N=c.get(A);if(void 0===N)continue;const Q=N.buffer,I=N.type,k=N.bytesPerElement,_=!0===L.isWebGL2&&(I===x.INT||I===x.UNSIGNED_INT||1013===A.gpuType);if(A.isInterleavedBufferAttribute){const c=A.data,L=c.stride,N=A.offset;if(c.isInstancedInterleavedBuffer){for(let x=0;x<h.locationSize;x++)y(h.location+x,c.meshPerAttribute);!0!==T.isInstancedMesh&&void 0===E._maxInstanceCount&&(E._maxInstanceCount=c.meshPerAttribute*c.count)}else for(let x=0;x<h.locationSize;x++)r(h.location+x);x.bindBuffer(x.ARRAY_BUFFER,Q);for(let x=0;x<h.locationSize;x++)B(h.location+x,H/h.locationSize,I,o,L*k,(N+H/h.locationSize*x)*k,_)}else{if(A.isInstancedBufferAttribute){for(let x=0;x<h.locationSize;x++)y(h.location+x,A.meshPerAttribute);!0!==T.isInstancedMesh&&void 0===E._maxInstanceCount&&(E._maxInstanceCount=A.meshPerAttribute*A.count)}else for(let x=0;x<h.locationSize;x++)r(h.location+x);x.bindBuffer(x.ARRAY_BUFFER,Q);for(let x=0;x<h.locationSize;x++)B(h.location+x,H/h.locationSize,I,o,H*k,H/h.locationSize*x*k,_)}}else if(void 0!==Q){const c=Q[o];if(void 0!==c)switch(c.length){case 2:x.vertexAttrib2fv(h.location,c);break;case 3:x.vertexAttrib3fv(h.location,c);break;case 4:x.vertexAttrib4fv(h.location,c);break;default:x.vertexAttrib1fv(h.location,c)}}}}v()}(T,H,k,Y),null!==F&&x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,c.get(F).buffer))},reset:Y,resetDefaultState:F,dispose:function(){Y();for(const x in E){const o=E[x];for(const x in o){const c=o[x];for(const x in c)k(c[x].object),delete c[x];delete o[x]}delete E[x]}},releaseStatesOfGeometry:function(x){if(void 0===E[x.id])return;const o=E[x.id];for(const x in o){const c=o[x];for(const x in c)k(c[x].object),delete c[x];delete o[x]}delete E[x.id]},releaseStatesOfProgram:function(x){for(const o in E){const c=E[o];if(void 0===c[x.id])continue;const L=c[x.id];for(const x in L)k(L[x].object),delete L[x];delete c[x.id]}},initAttributes:X,enableAttribute:r,disableUnusedAttributes:v}}function rI(x,o,c,L){const T=L.isWebGL2;let h;this.setMode=function(x){h=x},this.render=function(o,L){x.drawArrays(h,o,L),c.update(L,h,1)},this.renderInstances=function(L,A,E){if(0===E)return;let H,N;if(T)H=x,N="drawArraysInstanced";else if(H=o.get("ANGLE_instanced_arrays"),N="drawArraysInstancedANGLE",null===H)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");H[N](h,L,A,E),c.update(A,h,E)}}function yI(x,o,c){let L;function T(o){if("highp"===o){if(x.getShaderPrecisionFormat(x.VERTEX_SHADER,x.HIGH_FLOAT).precision>0&&x.getShaderPrecisionFormat(x.FRAGMENT_SHADER,x.HIGH_FLOAT).precision>0)return"highp";o="mediump"}return"mediump"===o&&x.getShaderPrecisionFormat(x.VERTEX_SHADER,x.MEDIUM_FLOAT).precision>0&&x.getShaderPrecisionFormat(x.FRAGMENT_SHADER,x.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const h="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===x.constructor.name;let A=void 0!==c.precision?c.precision:"highp";const E=T(A);E!==A&&(console.warn("THREE.WebGLRenderer:",A,"not supported, using",E,"instead."),A=E);const H=h||o.has("WEBGL_draw_buffers"),N=!0===c.logarithmicDepthBuffer,Q=x.getParameter(x.MAX_TEXTURE_IMAGE_UNITS),I=x.getParameter(x.MAX_VERTEX_TEXTURE_IMAGE_UNITS),k=x.getParameter(x.MAX_TEXTURE_SIZE),_=x.getParameter(x.MAX_CUBE_MAP_TEXTURE_SIZE),X=x.getParameter(x.MAX_VERTEX_ATTRIBS),r=x.getParameter(x.MAX_VERTEX_UNIFORM_VECTORS),y=x.getParameter(x.MAX_VARYING_VECTORS),v=x.getParameter(x.MAX_FRAGMENT_UNIFORM_VECTORS),B=I>0,Y=h||o.has("OES_texture_float");return{isWebGL2:h,drawBuffers:H,getMaxAnisotropy:function(){if(void 0!==L)return L;if(!0===o.has("EXT_texture_filter_anisotropic")){const c=o.get("EXT_texture_filter_anisotropic");L=x.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else L=0;return L},getMaxPrecision:T,precision:A,logarithmicDepthBuffer:N,maxTextures:Q,maxVertexTextures:I,maxTextureSize:k,maxCubemapSize:_,maxAttributes:X,maxVertexUniforms:r,maxVaryings:y,maxFragmentUniforms:v,vertexTextures:B,floatFragmentTextures:Y,floatVertexTextures:B&&Y,maxSamples:h?x.getParameter(x.MAX_SAMPLES):0}}function vI(x){const o=this;let c=null,L=0,T=!1,h=!1;const A=new cI,E=new yH,H={value:null,needsUpdate:!1};function N(x,c,L,T){const h=null!==x?x.length:0;let N=null;if(0!==h){if(N=H.value,!0!==T||null===N){const o=L+4*h,T=c.matrixWorldInverse;E.getNormalMatrix(T),(null===N||N.length<o)&&(N=new Float32Array(o));for(let o=0,c=L;o!==h;++o,c+=4)A.copy(x[o]).applyMatrix4(T,E),A.normal.toArray(N,c),N[c+3]=A.constant}H.value=N,H.needsUpdate=!0}return o.numPlanes=h,o.numIntersection=0,N}this.uniform=H,this.numPlanes=0,this.numIntersection=0,this.init=function(x,o){const c=0!==x.length||o||0!==L||T;return T=o,L=x.length,c},this.beginShadows=function(){h=!0,N(null)},this.endShadows=function(){h=!1},this.setGlobalState=function(x,o){c=N(x,o,0)},this.setState=function(A,E,Q){const I=A.clippingPlanes,k=A.clipIntersection,_=A.clipShadows,X=x.get(A);if(!T||null===I||0===I.length||h&&!_)h?N(null):(H.value!==c&&(H.value=c,H.needsUpdate=L>0),o.numPlanes=L,o.numIntersection=0);else{const x=h?0:L,o=4*x;let T=X.clippingState||null;H.value=T,T=N(I,E,o,Q);for(let x=0;x!==o;++x)T[x]=c[x];X.clippingState=T,this.numIntersection=k?this.numPlanes:0,this.numPlanes+=x}}}function BI(x){let o=new WeakMap;function c(x,o){return 303===o?x.mapping=301:304===o&&(x.mapping=302),x}function L(x){const c=x.target;c.removeEventListener("dispose",L);const T=o.get(c);void 0!==T&&(o.delete(c),T.dispose())}return{get:function(T){if(T&&T.isTexture&&!1===T.isRenderTargetTexture){const h=T.mapping;if(303===h||304===h){if(o.has(T))return c(o.get(T).texture,T.mapping);{const h=T.image;if(h&&h.height>0){const A=new gQ(h.height/2);return A.fromEquirectangularTexture(x,T),o.set(T,A),T.addEventListener("dispose",L),c(A.texture,T.mapping)}return null}}}return T},dispose:function(){o=new WeakMap}}}class YI extends nQ{constructor(x=-1,o=1,c=1,L=-1,T=.1,h=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=x,this.right=o,this.top=c,this.bottom=L,this.near=T,this.far=h,this.updateProjectionMatrix()}copy(x,o){return super.copy(x,o),this.left=x.left,this.right=x.right,this.top=x.top,this.bottom=x.bottom,this.near=x.near,this.far=x.far,this.zoom=x.zoom,this.view=null===x.view?null:Object.assign({},x.view),this}setViewOffset(x,o,c,L,T,h){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=x,this.view.fullHeight=o,this.view.offsetX=c,this.view.offsetY=L,this.view.width=T,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const x=(this.right-this.left)/(2*this.zoom),o=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,L=(this.top+this.bottom)/2;let T=c-x,h=c+x,A=L+o,E=L-o;if(null!==this.view&&this.view.enabled){const x=(this.right-this.left)/this.view.fullWidth/this.zoom,o=(this.top-this.bottom)/this.view.fullHeight/this.zoom;T+=x*this.view.offsetX,h=T+x*this.view.width,A-=o*this.view.offsetY,E=A-o*this.view.height}this.projectionMatrix.makeOrthographic(T,h,A,E,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(x){const o=super.toJSON(x);return o.object.zoom=this.zoom,o.object.left=this.left,o.object.right=this.right,o.object.top=this.top,o.object.bottom=this.bottom,o.object.near=this.near,o.object.far=this.far,null!==this.view&&(o.object.view=Object.assign({},this.view)),o}}const FI=[.125,.215,.35,.446,.526,.582],tI=new YI,mI=new AQ;let CI=null;const VI=(1+Math.sqrt(5))/2,iI=1/VI,MI=[new zH(1,1,1),new zH(-1,1,1),new zH(1,1,-1),new zH(-1,1,-1),new zH(0,VI,iI),new zH(0,VI,-iI),new zH(iI,0,VI),new zH(-iI,0,VI),new zH(VI,iI,0),new zH(-VI,iI,0)];class ZI{constructor(x){this._renderer=x,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(x,o=0,c=.1,L=100){CI=this._renderer.getRenderTarget(),this._setSize(256);const T=this._allocateTargets();return T.depthBuffer=!0,this._sceneToCubeUV(x,c,L,T),o>0&&this._blur(T,0,0,o),this._applyPMREM(T),this._cleanup(T),T}fromEquirectangular(x,o=null){return this._fromTexture(x,o)}fromCubemap(x,o=null){return this._fromTexture(x,o)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=OI(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=dI(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(x){this._lodMax=Math.floor(Math.log2(x)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let x=0;x<this._lodPlanes.length;x++)this._lodPlanes[x].dispose()}_cleanup(x){this._renderer.setRenderTarget(CI),x.scissorTest=!1,uI(x,0,0,x.width,x.height)}_fromTexture(x,o){301===x.mapping||302===x.mapping?this._setSize(0===x.image.length?16:x.image[0].width||x.image[0].image.width):this._setSize(x.image.width/4),CI=this._renderer.getRenderTarget();const c=o||this._allocateTargets();return this._textureToCubeUV(x,c),this._applyPMREM(c),this._cleanup(c),c}_allocateTargets(){const x=3*Math.max(this._cubeSize,112),o=4*this._cubeSize,c={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,colorSpace:"srgb-linear",depthBuffer:!1},L=SI(x,o,c);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==x||this._pingPongRenderTarget.height!==o){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=SI(x,o,c);const{_lodMax:L}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(x){const o=[],c=[],L=[];let T=x;const h=x-4+1+FI.length;for(let A=0;A<h;A++){const h=Math.pow(2,T);c.push(h);let E=1/h;A>x-4?E=FI[A-x+4-1]:0===A&&(E=0),L.push(E);const H=1/(h-2),N=-H,Q=1+H,I=[N,N,Q,N,Q,Q,N,N,Q,Q,N,Q],k=6,_=6,X=3,r=2,y=1,v=new Float32Array(X*_*k),B=new Float32Array(r*_*k),Y=new Float32Array(y*_*k);for(let x=0;x<k;x++){const o=x%3*2/3-1,c=x>2?0:-1,L=[o,c,0,o+2/3,c,0,o+2/3,c+1,0,o,c,0,o+2/3,c+1,0,o,c+1,0];v.set(L,X*_*x),B.set(I,r*_*x);const T=[x,x,x,x,x,x];Y.set(T,y*_*x)}const F=new mQ;F.setAttribute("position",new IQ(v,X)),F.setAttribute("uv",new IQ(B,r)),F.setAttribute("faceIndex",new IQ(Y,y)),o.push(F),T>4&&T--}return{lodPlanes:o,sizeLods:c,sigmas:L}}(L)),this._blurMaterial=function(x,o,c){const L=new Float32Array(20),T=new zH(0,1,0);return new JQ({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/o,CUBEUV_TEXEL_HEIGHT:1/c,CUBEUV_MAX_MIP:`${x}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:L},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:T}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(L,x,o)}return L}_compileMaterial(x){const o=new aQ(this._lodPlanes[0],x);this._renderer.compile(o,tI)}_sceneToCubeUV(x,o,c,L){const T=new bQ(90,1,o,c),h=[1,-1,1,1,1,1],A=[1,1,1,-1,-1,-1],E=this._renderer,H=E.autoClear,N=E.toneMapping;E.getClearColor(mI),E.toneMapping=0,E.autoClear=!1;const Q=new HQ({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),I=new aQ(new lQ,Q);let k=!1;const _=x.background;_?_.isColor&&(Q.color.copy(_),x.background=null,k=!0):(Q.color.copy(mI),k=!0);for(let o=0;o<6;o++){const c=o%3;0===c?(T.up.set(0,h[o],0),T.lookAt(A[o],0,0)):1===c?(T.up.set(0,0,h[o]),T.lookAt(0,A[o],0)):(T.up.set(0,h[o],0),T.lookAt(0,0,A[o]));const H=this._cubeSize;uI(L,c*H,o>2?H:0,H,H),E.setRenderTarget(L),k&&E.render(I,T),E.render(x,T)}I.geometry.dispose(),I.material.dispose(),E.toneMapping=N,E.autoClear=H,x.background=_}_textureToCubeUV(x,o){const c=this._renderer,L=301===x.mapping||302===x.mapping;L?(null===this._cubemapMaterial&&(this._cubemapMaterial=OI()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===x.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=dI());const T=L?this._cubemapMaterial:this._equirectMaterial,h=new aQ(this._lodPlanes[0],T);T.uniforms.envMap.value=x;const A=this._cubeSize;uI(o,0,0,3*A,2*A),c.setRenderTarget(o),c.render(h,tI)}_applyPMREM(x){const o=this._renderer,c=o.autoClear;o.autoClear=!1;for(let o=1;o<this._lodPlanes.length;o++){const c=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),L=MI[(o-1)%MI.length];this._blur(x,o-1,o,c,L)}o.autoClear=c}_blur(x,o,c,L,T){const h=this._pingPongRenderTarget;this._halfBlur(x,h,o,c,L,"latitudinal",T),this._halfBlur(h,x,c,c,L,"longitudinal",T)}_halfBlur(x,o,c,L,T,h,A){const E=this._renderer,H=this._blurMaterial;"latitudinal"!==h&&"longitudinal"!==h&&console.error("blur direction must be either latitudinal or longitudinal!");const N=new aQ(this._lodPlanes[L],H),Q=H.uniforms,I=this._sizeLods[c]-1,k=isFinite(T)?Math.PI/(2*I):2*Math.PI/39,_=T/k,X=isFinite(T)?1+Math.floor(3*_):20;X>20&&console.warn(`sigmaRadians, ${T}, is too large and will clip, as it requested ${X} samples when the maximum is set to 20`);const r=[];let y=0;for(let x=0;x<20;++x){const o=x/_,c=Math.exp(-o*o/2);r.push(c),0===x?y+=c:x<X&&(y+=2*c)}for(let x=0;x<r.length;x++)r[x]=r[x]/y;Q.envMap.value=x.texture,Q.samples.value=X,Q.weights.value=r,Q.latitudinal.value="latitudinal"===h,A&&(Q.poleAxis.value=A);const{_lodMax:v}=this;Q.dTheta.value=k,Q.mipInt.value=v-c;const B=this._sizeLods[L];uI(o,3*B*(L>v-4?L-v+4:0),4*(this._cubeSize-B),3*B,2*B),E.setRenderTarget(o),E.render(N,tI)}}function SI(x,o,c){const L=new DH(x,o,c);return L.texture.mapping=306,L.texture.name="PMREM.cubeUv",L.scissorTest=!0,L}function uI(x,o,c,L,T){x.viewport.set(o,c,L,T),x.scissor.set(o,c,L,T)}function dI(){return new JQ({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function OI(){return new JQ({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function jI(x){let o=new WeakMap,c=null;function L(x){const c=x.target;c.removeEventListener("dispose",L);const T=o.get(c);void 0!==T&&(o.delete(c),T.dispose())}return{get:function(T){if(T&&T.isTexture){const h=T.mapping,A=303===h||304===h,E=301===h||302===h;if(A||E){if(T.isRenderTargetTexture&&!0===T.needsPMREMUpdate){T.needsPMREMUpdate=!1;let L=o.get(T);return null===c&&(c=new ZI(x)),L=A?c.fromEquirectangular(T,L):c.fromCubemap(T,L),o.set(T,L),L.texture}if(o.has(T))return o.get(T).texture;{const h=T.image;if(A&&h&&h.height>0||E&&h&&function(x){let o=0;const c=6;for(let L=0;L<c;L++)void 0!==x[L]&&o++;return o===c}(h)){null===c&&(c=new ZI(x));const h=A?c.fromEquirectangular(T):c.fromCubemap(T);return o.set(T,h),T.addEventListener("dispose",L),h.texture}return null}}}return T},dispose:function(){o=new WeakMap,null!==c&&(c.dispose(),c=null)}}}function eI(x){const o={};function c(c){if(void 0!==o[c])return o[c];let L;switch(c){case"WEBGL_depth_texture":L=x.getExtension("WEBGL_depth_texture")||x.getExtension("MOZ_WEBGL_depth_texture")||x.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":L=x.getExtension("EXT_texture_filter_anisotropic")||x.getExtension("MOZ_EXT_texture_filter_anisotropic")||x.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":L=x.getExtension("WEBGL_compressed_texture_s3tc")||x.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||x.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":L=x.getExtension("WEBGL_compressed_texture_pvrtc")||x.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:L=x.getExtension(c)}return o[c]=L,L}return{has:function(x){return null!==c(x)},init:function(x){x.isWebGL2?c("EXT_color_buffer_float"):(c("WEBGL_depth_texture"),c("OES_texture_float"),c("OES_texture_half_float"),c("OES_texture_half_float_linear"),c("OES_standard_derivatives"),c("OES_element_index_uint"),c("OES_vertex_array_object"),c("ANGLE_instanced_arrays")),c("OES_texture_float_linear"),c("EXT_color_buffer_half_float"),c("WEBGL_multisampled_render_to_texture")},get:function(x){const o=c(x);return null===o&&console.warn("THREE.WebGLRenderer: "+x+" extension not supported."),o}}}function qI(x,o,c,L){const T={},h=new WeakMap;function A(x){const E=x.target;null!==E.index&&o.remove(E.index);for(const x in E.attributes)o.remove(E.attributes[x]);for(const x in E.morphAttributes){const c=E.morphAttributes[x];for(let x=0,L=c.length;x<L;x++)o.remove(c[x])}E.removeEventListener("dispose",A),delete T[E.id];const H=h.get(E);H&&(o.remove(H),h.delete(E)),L.releaseStatesOfGeometry(E),!0===E.isInstancedBufferGeometry&&delete E._maxInstanceCount,c.memory.geometries--}function E(x){const c=[],L=x.index,T=x.attributes.position;let A=0;if(null!==L){const x=L.array;A=L.version;for(let o=0,L=x.length;o<L;o+=3){const L=x[o+0],T=x[o+1],h=x[o+2];c.push(L,T,T,h,h,L)}}else{if(void 0===T)return;{const x=T.array;A=T.version;for(let o=0,L=x.length/3-1;o<L;o+=3){const x=o+0,L=o+1,T=o+2;c.push(x,L,L,T,T,x)}}}const E=new(BH(c)?_Q:kQ)(c,1);E.version=A;const H=h.get(x);H&&o.remove(H),h.set(x,E)}return{get:function(x,o){return!0===T[o.id]||(o.addEventListener("dispose",A),T[o.id]=!0,c.memory.geometries++),o},update:function(c){const L=c.attributes;for(const c in L)o.update(L[c],x.ARRAY_BUFFER);const T=c.morphAttributes;for(const c in T){const L=T[c];for(let c=0,T=L.length;c<T;c++)o.update(L[c],x.ARRAY_BUFFER)}},getWireframeAttribute:function(x){const o=h.get(x);if(o){const c=x.index;null!==c&&o.version<c.version&&E(x)}else E(x);return h.get(x)}}}function fI(x,o,c,L){const T=L.isWebGL2;let h,A,E;this.setMode=function(x){h=x},this.setIndex=function(x){A=x.type,E=x.bytesPerElement},this.render=function(o,L){x.drawElements(h,L,A,o*E),c.update(L,h,1)},this.renderInstances=function(L,H,N){if(0===N)return;let Q,I;if(T)Q=x,I="drawElementsInstanced";else if(Q=o.get("ANGLE_instanced_arrays"),I="drawElementsInstancedANGLE",null===Q)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");Q[I](h,H,A,L*E,N),c.update(H,h,N)}}function UI(x){const o={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:o,programs:null,autoReset:!0,reset:function(){o.calls=0,o.triangles=0,o.points=0,o.lines=0},update:function(c,L,T){switch(o.calls++,L){case x.TRIANGLES:o.triangles+=T*(c/3);break;case x.LINES:o.lines+=T*(c/2);break;case x.LINE_STRIP:o.lines+=T*(c-1);break;case x.LINE_LOOP:o.lines+=T*c;break;case x.POINTS:o.points+=T*c;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",L)}}}}function sI(x,o){return x[0]-o[0]}function DI(x,o){return Math.abs(o[1])-Math.abs(x[1])}function $I(x,o,c){const L={},T=new Float32Array(8),h=new WeakMap,A=new UH,E=[];for(let x=0;x<8;x++)E[x]=[x,0];return{update:function(H,N,Q){const I=H.morphTargetInfluences;if(!0===o.isWebGL2){const k=N.morphAttributes.position||N.morphAttributes.normal||N.morphAttributes.color,_=void 0!==k?k.length:0;let X=h.get(N);if(void 0===X||X.count!==_){void 0!==X&&X.texture.dispose();const v=void 0!==N.morphAttributes.position,B=void 0!==N.morphAttributes.normal,Y=void 0!==N.morphAttributes.color,F=N.morphAttributes.position||[],t=N.morphAttributes.normal||[],m=N.morphAttributes.color||[];let C=0;!0===v&&(C=1),!0===B&&(C=2),!0===Y&&(C=3);let V=N.attributes.position.count*C,i=1;V>o.maxTextureSize&&(i=Math.ceil(V/o.maxTextureSize),V=o.maxTextureSize);const M=new Float32Array(V*i*4*_),Z=new $H(M,V,i,_);Z.type=1015,Z.needsUpdate=!0;const S=4*C;for(let d=0;d<_;d++){const O=F[d],j=t[d],e=m[d],q=V*i*4*d;for(let f=0;f<O.count;f++){const U=f*S;!0===v&&(A.fromBufferAttribute(O,f),M[q+U+0]=A.x,M[q+U+1]=A.y,M[q+U+2]=A.z,M[q+U+3]=0),!0===B&&(A.fromBufferAttribute(j,f),M[q+U+4]=A.x,M[q+U+5]=A.y,M[q+U+6]=A.z,M[q+U+7]=0),!0===Y&&(A.fromBufferAttribute(e,f),M[q+U+8]=A.x,M[q+U+9]=A.y,M[q+U+10]=A.z,M[q+U+11]=4===e.itemSize?A.w:1)}}function u(){Z.dispose(),h.delete(N),N.removeEventListener("dispose",u)}X={count:_,texture:Z,size:new rH(V,i)},h.set(N,X),N.addEventListener("dispose",u)}let r=0;for(let s=0;s<I.length;s++)r+=I[s];const y=N.morphTargetsRelative?1:1-r;Q.getUniforms().setValue(x,"morphTargetBaseInfluence",y),Q.getUniforms().setValue(x,"morphTargetInfluences",I),Q.getUniforms().setValue(x,"morphTargetsTexture",X.texture,c),Q.getUniforms().setValue(x,"morphTargetsTextureSize",X.size)}else{const D=void 0===I?0:I.length;let $=L[N.id];if(void 0===$||$.length!==D){$=[];for(let p=0;p<D;p++)$[p]=[p,0];L[N.id]=$}for(let P=0;P<D;P++){const K=$[P];K[0]=P,K[1]=I[P]}$.sort(DI);for(let J=0;J<8;J++)J<D&&$[J][1]?(E[J][0]=$[J][0],E[J][1]=$[J][1]):(E[J][0]=Number.MAX_SAFE_INTEGER,E[J][1]=0);E.sort(sI);const a=N.morphAttributes.position,z=N.morphAttributes.normal;let l=0;for(let n=0;n<8;n++){const b=E[n],W=b[0],w=b[1];W!==Number.MAX_SAFE_INTEGER&&w?(a&&N.getAttribute("morphTarget"+n)!==a[W]&&N.setAttribute("morphTarget"+n,a[W]),z&&N.getAttribute("morphNormal"+n)!==z[W]&&N.setAttribute("morphNormal"+n,z[W]),T[n]=w,l+=w):(a&&!0===N.hasAttribute("morphTarget"+n)&&N.deleteAttribute("morphTarget"+n),z&&!0===N.hasAttribute("morphNormal"+n)&&N.deleteAttribute("morphNormal"+n),T[n]=0)}const G=N.morphTargetsRelative?1:1-l;Q.getUniforms().setValue(x,"morphTargetBaseInfluence",G),Q.getUniforms().setValue(x,"morphTargetInfluences",T)}}}}function aI(x,o,c,L){let T=new WeakMap;function h(x){const o=x.target;o.removeEventListener("dispose",h),c.remove(o.instanceMatrix),null!==o.instanceColor&&c.remove(o.instanceColor)}return{update:function(A){const E=L.render.frame,H=A.geometry,N=o.get(A,H);if(T.get(N)!==E&&(o.update(N),T.set(N,E)),A.isInstancedMesh&&(!1===A.hasEventListener("dispose",h)&&A.addEventListener("dispose",h),T.get(A)!==E&&(c.update(A.instanceMatrix,x.ARRAY_BUFFER),null!==A.instanceColor&&c.update(A.instanceColor,x.ARRAY_BUFFER),T.set(A,E))),A.isSkinnedMesh){const x=A.skeleton;T.get(x)!==E&&(x.update(),T.set(x,E))}return N},dispose:function(){T=new WeakMap}}}const zI=new fH,lI=new $H,GI=new class extends fH{constructor(x=null,o=1,c=1,L=1){super(null),this.isData3DTexture=!0,this.image={data:x,width:o,height:c,depth:L},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},pI=new wQ,PI=[],KI=[],JI=new Float32Array(16),nI=new Float32Array(9),bI=new Float32Array(4);function WI(x,o,c){const L=x[0];if(L<=0||L>0)return x;const T=o*c;let h=PI[T];if(void 0===h&&(h=new Float32Array(T),PI[T]=h),0!==o){L.toArray(h,0);for(let L=1,T=0;L!==o;++L)T+=c,x[L].toArray(h,T)}return h}function wI(x,o){if(x.length!==o.length)return!1;for(let c=0,L=x.length;c<L;c++)if(x[c]!==o[c])return!1;return!0}function gI(x,o){for(let c=0,L=o.length;c<L;c++)x[c]=o[c]}function RI(x,o){let c=KI[o];void 0===c&&(c=new Int32Array(o),KI[o]=c);for(let L=0;L!==o;++L)c[L]=x.allocateTextureUnit();return c}function xk(x,o){const c=this.cache;c[0]!==o&&(x.uniform1f(this.addr,o),c[0]=o)}function ok(x,o){const c=this.cache;if(void 0!==o.x)c[0]===o.x&&c[1]===o.y||(x.uniform2f(this.addr,o.x,o.y),c[0]=o.x,c[1]=o.y);else{if(wI(c,o))return;x.uniform2fv(this.addr,o),gI(c,o)}}function ck(x,o){const c=this.cache;if(void 0!==o.x)c[0]===o.x&&c[1]===o.y&&c[2]===o.z||(x.uniform3f(this.addr,o.x,o.y,o.z),c[0]=o.x,c[1]=o.y,c[2]=o.z);else if(void 0!==o.r)c[0]===o.r&&c[1]===o.g&&c[2]===o.b||(x.uniform3f(this.addr,o.r,o.g,o.b),c[0]=o.r,c[1]=o.g,c[2]=o.b);else{if(wI(c,o))return;x.uniform3fv(this.addr,o),gI(c,o)}}function Lk(x,o){const c=this.cache;if(void 0!==o.x)c[0]===o.x&&c[1]===o.y&&c[2]===o.z&&c[3]===o.w||(x.uniform4f(this.addr,o.x,o.y,o.z,o.w),c[0]=o.x,c[1]=o.y,c[2]=o.z,c[3]=o.w);else{if(wI(c,o))return;x.uniform4fv(this.addr,o),gI(c,o)}}function Tk(x,o){const c=this.cache,L=o.elements;if(void 0===L){if(wI(c,o))return;x.uniformMatrix2fv(this.addr,!1,o),gI(c,o)}else{if(wI(c,L))return;bI.set(L),x.uniformMatrix2fv(this.addr,!1,bI),gI(c,L)}}function hk(x,o){const c=this.cache,L=o.elements;if(void 0===L){if(wI(c,o))return;x.uniformMatrix3fv(this.addr,!1,o),gI(c,o)}else{if(wI(c,L))return;nI.set(L),x.uniformMatrix3fv(this.addr,!1,nI),gI(c,L)}}function Ak(x,o){const c=this.cache,L=o.elements;if(void 0===L){if(wI(c,o))return;x.uniformMatrix4fv(this.addr,!1,o),gI(c,o)}else{if(wI(c,L))return;JI.set(L),x.uniformMatrix4fv(this.addr,!1,JI),gI(c,L)}}function Ek(x,o){const c=this.cache;c[0]!==o&&(x.uniform1i(this.addr,o),c[0]=o)}function Hk(x,o){const c=this.cache;if(void 0!==o.x)c[0]===o.x&&c[1]===o.y||(x.uniform2i(this.addr,o.x,o.y),c[0]=o.x,c[1]=o.y);else{if(wI(c,o))return;x.uniform2iv(this.addr,o),gI(c,o)}}function Nk(x,o){const c=this.cache;if(void 0!==o.x)c[0]===o.x&&c[1]===o.y&&c[2]===o.z||(x.uniform3i(this.addr,o.x,o.y,o.z),c[0]=o.x,c[1]=o.y,c[2]=o.z);else{if(wI(c,o))return;x.uniform3iv(this.addr,o),gI(c,o)}}function Qk(x,o){const c=this.cache;if(void 0!==o.x)c[0]===o.x&&c[1]===o.y&&c[2]===o.z&&c[3]===o.w||(x.uniform4i(this.addr,o.x,o.y,o.z,o.w),c[0]=o.x,c[1]=o.y,c[2]=o.z,c[3]=o.w);else{if(wI(c,o))return;x.uniform4iv(this.addr,o),gI(c,o)}}function Ik(x,o){const c=this.cache;c[0]!==o&&(x.uniform1ui(this.addr,o),c[0]=o)}function kk(x,o){const c=this.cache;if(void 0!==o.x)c[0]===o.x&&c[1]===o.y||(x.uniform2ui(this.addr,o.x,o.y),c[0]=o.x,c[1]=o.y);else{if(wI(c,o))return;x.uniform2uiv(this.addr,o),gI(c,o)}}function _k(x,o){const c=this.cache;if(void 0!==o.x)c[0]===o.x&&c[1]===o.y&&c[2]===o.z||(x.uniform3ui(this.addr,o.x,o.y,o.z),c[0]=o.x,c[1]=o.y,c[2]=o.z);else{if(wI(c,o))return;x.uniform3uiv(this.addr,o),gI(c,o)}}function Xk(x,o){const c=this.cache;if(void 0!==o.x)c[0]===o.x&&c[1]===o.y&&c[2]===o.z&&c[3]===o.w||(x.uniform4ui(this.addr,o.x,o.y,o.z,o.w),c[0]=o.x,c[1]=o.y,c[2]=o.z,c[3]=o.w);else{if(wI(c,o))return;x.uniform4uiv(this.addr,o),gI(c,o)}}function rk(x,o,c){const L=this.cache,T=c.allocateTextureUnit();L[0]!==T&&(x.uniform1i(this.addr,T),L[0]=T),c.setTexture2D(o||zI,T)}function yk(x,o,c){const L=this.cache,T=c.allocateTextureUnit();L[0]!==T&&(x.uniform1i(this.addr,T),L[0]=T),c.setTexture3D(o||GI,T)}function vk(x,o,c){const L=this.cache,T=c.allocateTextureUnit();L[0]!==T&&(x.uniform1i(this.addr,T),L[0]=T),c.setTextureCube(o||pI,T)}function Bk(x,o,c){const L=this.cache,T=c.allocateTextureUnit();L[0]!==T&&(x.uniform1i(this.addr,T),L[0]=T),c.setTexture2DArray(o||lI,T)}function Yk(x,o){x.uniform1fv(this.addr,o)}function Fk(x,o){const c=WI(o,this.size,2);x.uniform2fv(this.addr,c)}function tk(x,o){const c=WI(o,this.size,3);x.uniform3fv(this.addr,c)}function mk(x,o){const c=WI(o,this.size,4);x.uniform4fv(this.addr,c)}function Ck(x,o){const c=WI(o,this.size,4);x.uniformMatrix2fv(this.addr,!1,c)}function Vk(x,o){const c=WI(o,this.size,9);x.uniformMatrix3fv(this.addr,!1,c)}function ik(x,o){const c=WI(o,this.size,16);x.uniformMatrix4fv(this.addr,!1,c)}function Mk(x,o){x.uniform1iv(this.addr,o)}function Zk(x,o){x.uniform2iv(this.addr,o)}function Sk(x,o){x.uniform3iv(this.addr,o)}function uk(x,o){x.uniform4iv(this.addr,o)}function dk(x,o){x.uniform1uiv(this.addr,o)}function Ok(x,o){x.uniform2uiv(this.addr,o)}function jk(x,o){x.uniform3uiv(this.addr,o)}function ek(x,o){x.uniform4uiv(this.addr,o)}function qk(x,o,c){const L=this.cache,T=o.length,h=RI(c,T);wI(L,h)||(x.uniform1iv(this.addr,h),gI(L,h));for(let x=0;x!==T;++x)c.setTexture2D(o[x]||zI,h[x])}function fk(x,o,c){const L=this.cache,T=o.length,h=RI(c,T);wI(L,h)||(x.uniform1iv(this.addr,h),gI(L,h));for(let x=0;x!==T;++x)c.setTexture3D(o[x]||GI,h[x])}function Uk(x,o,c){const L=this.cache,T=o.length,h=RI(c,T);wI(L,h)||(x.uniform1iv(this.addr,h),gI(L,h));for(let x=0;x!==T;++x)c.setTextureCube(o[x]||pI,h[x])}function sk(x,o,c){const L=this.cache,T=o.length,h=RI(c,T);wI(L,h)||(x.uniform1iv(this.addr,h),gI(L,h));for(let x=0;x!==T;++x)c.setTexture2DArray(o[x]||lI,h[x])}class Dk{constructor(x,o,c){this.id=x,this.addr=c,this.cache=[],this.setValue=function(x){switch(x){case 5126:return xk;case 35664:return ok;case 35665:return ck;case 35666:return Lk;case 35674:return Tk;case 35675:return hk;case 35676:return Ak;case 5124:case 35670:return Ek;case 35667:case 35671:return Hk;case 35668:case 35672:return Nk;case 35669:case 35673:return Qk;case 5125:return Ik;case 36294:return kk;case 36295:return _k;case 36296:return Xk;case 35678:case 36198:case 36298:case 36306:case 35682:return rk;case 35679:case 36299:case 36307:return yk;case 35680:case 36300:case 36308:case 36293:return vk;case 36289:case 36303:case 36311:case 36292:return Bk}}(o.type)}}class $k{constructor(x,o,c){this.id=x,this.addr=c,this.cache=[],this.size=o.size,this.setValue=function(x){switch(x){case 5126:return Yk;case 35664:return Fk;case 35665:return tk;case 35666:return mk;case 35674:return Ck;case 35675:return Vk;case 35676:return ik;case 5124:case 35670:return Mk;case 35667:case 35671:return Zk;case 35668:case 35672:return Sk;case 35669:case 35673:return uk;case 5125:return dk;case 36294:return Ok;case 36295:return jk;case 36296:return ek;case 35678:case 36198:case 36298:case 36306:case 35682:return qk;case 35679:case 36299:case 36307:return fk;case 35680:case 36300:case 36308:case 36293:return Uk;case 36289:case 36303:case 36311:case 36292:return sk}}(o.type)}}class ak{constructor(x){this.id=x,this.seq=[],this.map={}}setValue(x,o,c){const L=this.seq;for(let T=0,h=L.length;T!==h;++T){const h=L[T];h.setValue(x,o[h.id],c)}}}const zk=/(\w+)(\])?(\[|\.)?/g;function lk(x,o){x.seq.push(o),x.map[o.id]=o}function Gk(x,o,c){const L=x.name,T=L.length;for(zk.lastIndex=0;;){const h=zk.exec(L),A=zk.lastIndex;let E=h[1];const H="]"===h[2],N=h[3];if(H&&(E|=0),void 0===N||"["===N&&A+2===T){lk(c,void 0===N?new Dk(E,x,o):new $k(E,x,o));break}{let x=c.map[E];void 0===x&&(x=new ak(E),lk(c,x)),c=x}}}class pk{constructor(x,o){this.seq=[],this.map={};const c=x.getProgramParameter(o,x.ACTIVE_UNIFORMS);for(let L=0;L<c;++L){const c=x.getActiveUniform(o,L);Gk(c,x.getUniformLocation(o,c.name),this)}}setValue(x,o,c,L){const T=this.map[o];void 0!==T&&T.setValue(x,c,L)}setOptional(x,o,c){const L=o[c];void 0!==L&&this.setValue(x,c,L)}static upload(x,o,c,L){for(let T=0,h=o.length;T!==h;++T){const h=o[T],A=c[h.id];!1!==A.needsUpdate&&h.setValue(x,A.value,L)}}static seqWithValue(x,o){const c=[];for(let L=0,T=x.length;L!==T;++L){const T=x[L];T.id in o&&c.push(T)}return c}}function Pk(x,o,c){const L=x.createShader(o);return x.shaderSource(L,c),x.compileShader(L),L}let Kk=0;function Jk(x,o,c){const L=x.getShaderParameter(o,x.COMPILE_STATUS),T=x.getShaderInfoLog(o).trim();if(L&&""===T)return"";const h=/ERROR: 0:(\d+)/.exec(T);if(h){const L=parseInt(h[1]);return c.toUpperCase()+"\n\n"+T+"\n\n"+function(x,o){const c=x.split("\n"),L=[],T=Math.max(o-6,0),h=Math.min(o+6,c.length);for(let x=T;x<h;x++){const T=x+1;L.push(`${T===o?">":" "} ${T}: ${c[x]}`)}return L.join("\n")}(x.getShaderSource(o),L)}return T}function nk(x,o){const c=function(x){switch(x){case"srgb-linear":return["Linear","( value )"];case"srgb":return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",x),["Linear","( value )"]}}(o);return"vec4 "+x+"( vec4 value ) { return LinearTo"+c[0]+c[1]+"; }"}function bk(x,o){let c;switch(o){case 1:c="Linear";break;case 2:c="Reinhard";break;case 3:c="OptimizedCineon";break;case 4:c="ACESFilmic";break;case 5:c="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",o),c="Linear"}return"vec3 "+x+"( vec3 color ) { return "+c+"ToneMapping( color ); }"}function Wk(x){return""!==x}function wk(x,o){const c=o.numSpotLightShadows+o.numSpotLightMaps-o.numSpotLightShadowsWithMaps;return x.replace(/NUM_DIR_LIGHTS/g,o.numDirLights).replace(/NUM_SPOT_LIGHTS/g,o.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,o.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,c).replace(/NUM_RECT_AREA_LIGHTS/g,o.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,o.numPointLights).replace(/NUM_HEMI_LIGHTS/g,o.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,o.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,o.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,o.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,o.numPointLightShadows)}function gk(x,o){return x.replace(/NUM_CLIPPING_PLANES/g,o.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,o.numClippingPlanes-o.numClipIntersection)}const Rk=/^[ \t]*#include +<([\w\d./]+)>/gm;function x_(x){return x.replace(Rk,c_)}const o_=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function c_(x,o){let c=NI[o];if(void 0===c){const x=o_.get(o);if(void 0===x)throw new Error("Can not resolve #include <"+o+">");c=NI[x],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',o,x)}return x_(c)}const L_=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function T_(x){return x.replace(L_,h_)}function h_(x,o,c,L){let T="";for(let x=parseInt(o);x<parseInt(c);x++)T+=L.replace(/\[\s*i\s*\]/g,"[ "+x+" ]").replace(/UNROLLED_LOOP_INDEX/g,x);return T}function A_(x){let o="precision "+x.precision+" float;\nprecision "+x.precision+" int;";return"highp"===x.precision?o+="\n#define HIGH_PRECISION":"mediump"===x.precision?o+="\n#define MEDIUM_PRECISION":"lowp"===x.precision&&(o+="\n#define LOW_PRECISION"),o}function E_(x,o,c,L){const T=x.getContext(),h=c.defines;let A=c.vertexShader,E=c.fragmentShader;const H=function(x){let o="SHADOWMAP_TYPE_BASIC";return 1===x.shadowMapType?o="SHADOWMAP_TYPE_PCF":2===x.shadowMapType?o="SHADOWMAP_TYPE_PCF_SOFT":3===x.shadowMapType&&(o="SHADOWMAP_TYPE_VSM"),o}(c),N=function(x){let o="ENVMAP_TYPE_CUBE";if(x.envMap)switch(x.envMapMode){case 301:case 302:o="ENVMAP_TYPE_CUBE";break;case 306:o="ENVMAP_TYPE_CUBE_UV"}return o}(c),Q=function(x){let o="ENVMAP_MODE_REFLECTION";return x.envMap&&302===x.envMapMode&&(o="ENVMAP_MODE_REFRACTION"),o}(c),I=function(x){let o="ENVMAP_BLENDING_NONE";if(x.envMap)switch(x.combine){case 0:o="ENVMAP_BLENDING_MULTIPLY";break;case 1:o="ENVMAP_BLENDING_MIX";break;case 2:o="ENVMAP_BLENDING_ADD"}return o}(c),k=function(x){const o=x.envMapCubeUVHeight;if(null===o)return null;const c=Math.log2(o)-2,L=1/o;return{texelWidth:1/(3*Math.max(Math.pow(2,c),112)),texelHeight:L,maxMip:c}}(c),_=c.isWebGL2?"":function(x){return[x.extensionDerivatives||x.envMapCubeUVHeight||x.bumpMap||x.normalMapTangentSpace||x.clearcoatNormalMap||x.flatShading||"physical"===x.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(x.extensionFragDepth||x.logarithmicDepthBuffer)&&x.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",x.extensionDrawBuffers&&x.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(x.extensionShaderTextureLOD||x.envMap||x.transmission)&&x.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Wk).join("\n")}(c),X=function(x){const o=[];for(const c in x){const L=x[c];!1!==L&&o.push("#define "+c+" "+L)}return o.join("\n")}(h),r=T.createProgram();let y,v,B=c.glslVersion?"#version "+c.glslVersion+"\n":"";c.isRawShaderMaterial?(y=["#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,X].filter(Wk).join("\n"),y.length>0&&(y+="\n"),v=[_,"#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,X].filter(Wk).join("\n"),v.length>0&&(v+="\n")):(y=[A_(c),"#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,X,c.instancing?"#define USE_INSTANCING":"",c.instancingColor?"#define USE_INSTANCING_COLOR":"",c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp2?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+Q:"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",c.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",c.displacementMap?"#define USE_DISPLACEMENTMAP":"",c.emissiveMap?"#define USE_EMISSIVEMAP":"",c.anisotropyMap?"#define USE_ANISOTROPYMAP":"",c.clearcoatMap?"#define USE_CLEARCOATMAP":"",c.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",c.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",c.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",c.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",c.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.alphaHash?"#define USE_ALPHAHASH":"",c.transmission?"#define USE_TRANSMISSION":"",c.transmissionMap?"#define USE_TRANSMISSIONMAP":"",c.thicknessMap?"#define USE_THICKNESSMAP":"",c.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",c.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",c.mapUv?"#define MAP_UV "+c.mapUv:"",c.alphaMapUv?"#define ALPHAMAP_UV "+c.alphaMapUv:"",c.lightMapUv?"#define LIGHTMAP_UV "+c.lightMapUv:"",c.aoMapUv?"#define AOMAP_UV "+c.aoMapUv:"",c.emissiveMapUv?"#define EMISSIVEMAP_UV "+c.emissiveMapUv:"",c.bumpMapUv?"#define BUMPMAP_UV "+c.bumpMapUv:"",c.normalMapUv?"#define NORMALMAP_UV "+c.normalMapUv:"",c.displacementMapUv?"#define DISPLACEMENTMAP_UV "+c.displacementMapUv:"",c.metalnessMapUv?"#define METALNESSMAP_UV "+c.metalnessMapUv:"",c.roughnessMapUv?"#define ROUGHNESSMAP_UV "+c.roughnessMapUv:"",c.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+c.anisotropyMapUv:"",c.clearcoatMapUv?"#define CLEARCOATMAP_UV "+c.clearcoatMapUv:"",c.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+c.clearcoatNormalMapUv:"",c.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+c.clearcoatRoughnessMapUv:"",c.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+c.iridescenceMapUv:"",c.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+c.iridescenceThicknessMapUv:"",c.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+c.sheenColorMapUv:"",c.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+c.sheenRoughnessMapUv:"",c.specularMapUv?"#define SPECULARMAP_UV "+c.specularMapUv:"",c.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+c.specularColorMapUv:"",c.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+c.specularIntensityMapUv:"",c.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+c.transmissionMapUv:"",c.thicknessMapUv?"#define THICKNESSMAP_UV "+c.thicknessMapUv:"",c.vertexTangents&&!1===c.flatShading?"#define USE_TANGENT":"",c.vertexColors?"#define USE_COLOR":"",c.vertexAlphas?"#define USE_COLOR_ALPHA":"",c.vertexUv1s?"#define USE_UV1":"",c.vertexUv2s?"#define USE_UV2":"",c.vertexUv3s?"#define USE_UV3":"",c.pointsUvs?"#define USE_POINTS_UV":"",c.flatShading?"#define FLAT_SHADED":"",c.skinning?"#define USE_SKINNING":"",c.morphTargets?"#define USE_MORPHTARGETS":"",c.morphNormals&&!1===c.flatShading?"#define USE_MORPHNORMALS":"",c.morphColors&&c.isWebGL2?"#define USE_MORPHCOLORS":"",c.morphTargetsCount>0&&c.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",c.morphTargetsCount>0&&c.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+c.morphTextureStride:"",c.morphTargetsCount>0&&c.isWebGL2?"#define MORPHTARGETS_COUNT "+c.morphTargetsCount:"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+H:"",c.sizeAttenuation?"#define USE_SIZEATTENUATION":"",c.useLegacyLights?"#define LEGACY_LIGHTS":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.logarithmicDepthBuffer&&c.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Wk).join("\n"),v=[_,A_(c),"#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,X,c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp2?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.matcap?"#define USE_MATCAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+N:"",c.envMap?"#define "+Q:"",c.envMap?"#define "+I:"",k?"#define CUBEUV_TEXEL_WIDTH "+k.texelWidth:"",k?"#define CUBEUV_TEXEL_HEIGHT "+k.texelHeight:"",k?"#define CUBEUV_MAX_MIP "+k.maxMip+".0":"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",c.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",c.emissiveMap?"#define USE_EMISSIVEMAP":"",c.anisotropy?"#define USE_ANISOTROPY":"",c.anisotropyMap?"#define USE_ANISOTROPYMAP":"",c.clearcoat?"#define USE_CLEARCOAT":"",c.clearcoatMap?"#define USE_CLEARCOATMAP":"",c.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",c.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",c.iridescence?"#define USE_IRIDESCENCE":"",c.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",c.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",c.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.alphaTest?"#define USE_ALPHATEST":"",c.alphaHash?"#define USE_ALPHAHASH":"",c.sheen?"#define USE_SHEEN":"",c.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",c.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",c.transmission?"#define USE_TRANSMISSION":"",c.transmissionMap?"#define USE_TRANSMISSIONMAP":"",c.thicknessMap?"#define USE_THICKNESSMAP":"",c.vertexTangents&&!1===c.flatShading?"#define USE_TANGENT":"",c.vertexColors||c.instancingColor?"#define USE_COLOR":"",c.vertexAlphas?"#define USE_COLOR_ALPHA":"",c.vertexUv1s?"#define USE_UV1":"",c.vertexUv2s?"#define USE_UV2":"",c.vertexUv3s?"#define USE_UV3":"",c.pointsUvs?"#define USE_POINTS_UV":"",c.gradientMap?"#define USE_GRADIENTMAP":"",c.flatShading?"#define FLAT_SHADED":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+H:"",c.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",c.useLegacyLights?"#define LEGACY_LIGHTS":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.logarithmicDepthBuffer&&c.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==c.toneMapping?"#define TONE_MAPPING":"",0!==c.toneMapping?NI.tonemapping_pars_fragment:"",0!==c.toneMapping?bk("toneMapping",c.toneMapping):"",c.dithering?"#define DITHERING":"",c.opaque?"#define OPAQUE":"",NI.colorspace_pars_fragment,nk("linearToOutputTexel",c.outputColorSpace),c.useDepthPacking?"#define DEPTH_PACKING "+c.depthPacking:"","\n"].filter(Wk).join("\n")),A=x_(A),A=wk(A,c),A=gk(A,c),E=x_(E),E=wk(E,c),E=gk(E,c),A=T_(A),E=T_(E),c.isWebGL2&&!0!==c.isRawShaderMaterial&&(B="#version 300 es\n",y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+y,v=["#define varying in","300 es"===c.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===c.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const Y=B+y+A,F=B+v+E,t=Pk(T,T.VERTEX_SHADER,Y),m=Pk(T,T.FRAGMENT_SHADER,F);if(T.attachShader(r,t),T.attachShader(r,m),void 0!==c.index0AttributeName?T.bindAttribLocation(r,0,c.index0AttributeName):!0===c.morphTargets&&T.bindAttribLocation(r,0,"position"),T.linkProgram(r),x.debug.checkShaderErrors){const o=T.getProgramInfoLog(r).trim(),c=T.getShaderInfoLog(t).trim(),L=T.getShaderInfoLog(m).trim();let h=!0,A=!0;if(!1===T.getProgramParameter(r,T.LINK_STATUS))if(h=!1,"function"==typeof x.debug.onShaderError)x.debug.onShaderError(T,r,t,m);else{const x=Jk(T,t,"vertex"),c=Jk(T,m,"fragment");console.error("THREE.WebGLProgram: Shader Error "+T.getError()+" - VALIDATE_STATUS "+T.getProgramParameter(r,T.VALIDATE_STATUS)+"\n\nProgram Info Log: "+o+"\n"+x+"\n"+c)}else""!==o?console.warn("THREE.WebGLProgram: Program Info Log:",o):""!==c&&""!==L||(A=!1);A&&(this.diagnostics={runnable:h,programLog:o,vertexShader:{log:c,prefix:y},fragmentShader:{log:L,prefix:v}})}let C,V;return T.deleteShader(t),T.deleteShader(m),this.getUniforms=function(){return void 0===C&&(C=new pk(T,r)),C},this.getAttributes=function(){return void 0===V&&(V=function(x,o){const c={},L=x.getProgramParameter(o,x.ACTIVE_ATTRIBUTES);for(let T=0;T<L;T++){const L=x.getActiveAttrib(o,T),h=L.name;let A=1;L.type===x.FLOAT_MAT2&&(A=2),L.type===x.FLOAT_MAT3&&(A=3),L.type===x.FLOAT_MAT4&&(A=4),c[h]={type:L.type,location:x.getAttribLocation(o,h),locationSize:A}}return c}(T,r)),V},this.destroy=function(){L.releaseStatesOfProgram(this),T.deleteProgram(r),this.program=void 0},this.type=c.shaderType,this.name=c.shaderName,this.id=Kk++,this.cacheKey=o,this.usedTimes=1,this.program=r,this.vertexShader=t,this.fragmentShader=m,this}let H_=0;class N_{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(x){const o=x.vertexShader,c=x.fragmentShader,L=this._getShaderStage(o),T=this._getShaderStage(c),h=this._getShaderCacheForMaterial(x);return!1===h.has(L)&&(h.add(L),L.usedTimes++),!1===h.has(T)&&(h.add(T),T.usedTimes++),this}remove(x){const o=this.materialCache.get(x);for(const x of o)x.usedTimes--,0===x.usedTimes&&this.shaderCache.delete(x.code);return this.materialCache.delete(x),this}getVertexShaderID(x){return this._getShaderStage(x.vertexShader).id}getFragmentShaderID(x){return this._getShaderStage(x.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(x){const o=this.materialCache;let c=o.get(x);return void 0===c&&(c=new Set,o.set(x,c)),c}_getShaderStage(x){const o=this.shaderCache;let c=o.get(x);return void 0===c&&(c=new Q_(x),o.set(x,c)),c}}class Q_{constructor(x){this.id=H_++,this.code=x,this.usedTimes=0}}function I_(x,o,c,L,T,h,A){const E=new ZN,H=new N_,N=[],Q=T.isWebGL2,I=T.logarithmicDepthBuffer,k=T.vertexTextures;let _=T.precision;const X={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function r(x){return 0===x?"uv":`uv${x}`}return{getParameters:function(h,E,N,y,v){const B=y.fog,Y=v.geometry,F=h.isMeshStandardMaterial?y.environment:null,t=(h.isMeshStandardMaterial?c:o).get(h.envMap||F),m=t&&306===t.mapping?t.image.height:null,C=X[h.type];null!==h.precision&&(_=T.getMaxPrecision(h.precision),_!==h.precision&&console.warn("THREE.WebGLProgram.getParameters:",h.precision,"not supported, using",_,"instead."));const V=Y.morphAttributes.position||Y.morphAttributes.normal||Y.morphAttributes.color,i=void 0!==V?V.length:0;let M,Z,S,u,d=0;if(void 0!==Y.morphAttributes.position&&(d=1),void 0!==Y.morphAttributes.normal&&(d=2),void 0!==Y.morphAttributes.color&&(d=3),C){const x=II[C];M=x.vertexShader,Z=x.fragmentShader}else M=h.vertexShader,Z=h.fragmentShader,H.update(h),S=H.getVertexShaderID(h),u=H.getFragmentShaderID(h);const O=x.getRenderTarget(),j=!0===v.isInstancedMesh,e=!!h.map,q=!!h.matcap,f=!!t,U=!!h.aoMap,s=!!h.lightMap,D=!!h.bumpMap,$=!!h.normalMap,a=!!h.displacementMap,z=!!h.emissiveMap,l=!!h.metalnessMap,G=!!h.roughnessMap,p=h.anisotropy>0,P=h.clearcoat>0,K=h.iridescence>0,J=h.sheen>0,n=h.transmission>0,b=p&&!!h.anisotropyMap,W=P&&!!h.clearcoatMap,w=P&&!!h.clearcoatNormalMap,g=P&&!!h.clearcoatRoughnessMap,R=K&&!!h.iridescenceMap,xx=K&&!!h.iridescenceThicknessMap,ox=J&&!!h.sheenColorMap,cx=J&&!!h.sheenRoughnessMap,Lx=!!h.specularMap,Tx=!!h.specularColorMap,hx=!!h.specularIntensityMap,Ax=n&&!!h.transmissionMap,Ex=n&&!!h.thicknessMap,Hx=!!h.gradientMap,Nx=!!h.alphaMap,Qx=h.alphaTest>0,Ix=!!h.alphaHash,kx=!!h.extensions,_x=!!Y.attributes.uv1,Xx=!!Y.attributes.uv2,rx=!!Y.attributes.uv3;let yx=0;return h.toneMapped&&(null!==O&&!0!==O.isXRRenderTarget||(yx=x.toneMapping)),{isWebGL2:Q,shaderID:C,shaderType:h.type,shaderName:h.name,vertexShader:M,fragmentShader:Z,defines:h.defines,customVertexShaderID:S,customFragmentShaderID:u,isRawShaderMaterial:!0===h.isRawShaderMaterial,glslVersion:h.glslVersion,precision:_,instancing:j,instancingColor:j&&null!==v.instanceColor,supportsVertexTextures:k,outputColorSpace:null===O?x.outputColorSpace:!0===O.isXRRenderTarget?O.texture.colorSpace:"srgb-linear",map:e,matcap:q,envMap:f,envMapMode:f&&t.mapping,envMapCubeUVHeight:m,aoMap:U,lightMap:s,bumpMap:D,normalMap:$,displacementMap:k&&a,emissiveMap:z,normalMapObjectSpace:$&&1===h.normalMapType,normalMapTangentSpace:$&&0===h.normalMapType,metalnessMap:l,roughnessMap:G,anisotropy:p,anisotropyMap:b,clearcoat:P,clearcoatMap:W,clearcoatNormalMap:w,clearcoatRoughnessMap:g,iridescence:K,iridescenceMap:R,iridescenceThicknessMap:xx,sheen:J,sheenColorMap:ox,sheenRoughnessMap:cx,specularMap:Lx,specularColorMap:Tx,specularIntensityMap:hx,transmission:n,transmissionMap:Ax,thicknessMap:Ex,gradientMap:Hx,opaque:!1===h.transparent&&1===h.blending,alphaMap:Nx,alphaTest:Qx,alphaHash:Ix,combine:h.combine,mapUv:e&&r(h.map.channel),aoMapUv:U&&r(h.aoMap.channel),lightMapUv:s&&r(h.lightMap.channel),bumpMapUv:D&&r(h.bumpMap.channel),normalMapUv:$&&r(h.normalMap.channel),displacementMapUv:a&&r(h.displacementMap.channel),emissiveMapUv:z&&r(h.emissiveMap.channel),metalnessMapUv:l&&r(h.metalnessMap.channel),roughnessMapUv:G&&r(h.roughnessMap.channel),anisotropyMapUv:b&&r(h.anisotropyMap.channel),clearcoatMapUv:W&&r(h.clearcoatMap.channel),clearcoatNormalMapUv:w&&r(h.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:g&&r(h.clearcoatRoughnessMap.channel),iridescenceMapUv:R&&r(h.iridescenceMap.channel),iridescenceThicknessMapUv:xx&&r(h.iridescenceThicknessMap.channel),sheenColorMapUv:ox&&r(h.sheenColorMap.channel),sheenRoughnessMapUv:cx&&r(h.sheenRoughnessMap.channel),specularMapUv:Lx&&r(h.specularMap.channel),specularColorMapUv:Tx&&r(h.specularColorMap.channel),specularIntensityMapUv:hx&&r(h.specularIntensityMap.channel),transmissionMapUv:Ax&&r(h.transmissionMap.channel),thicknessMapUv:Ex&&r(h.thicknessMap.channel),alphaMapUv:Nx&&r(h.alphaMap.channel),vertexTangents:!!Y.attributes.tangent&&($||p),vertexColors:h.vertexColors,vertexAlphas:!0===h.vertexColors&&!!Y.attributes.color&&4===Y.attributes.color.itemSize,vertexUv1s:_x,vertexUv2s:Xx,vertexUv3s:rx,pointsUvs:!0===v.isPoints&&!!Y.attributes.uv&&(e||Nx),fog:!!B,useFog:!0===h.fog,fogExp2:B&&B.isFogExp2,flatShading:!0===h.flatShading,sizeAttenuation:!0===h.sizeAttenuation,logarithmicDepthBuffer:I,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==Y.morphAttributes.position,morphNormals:void 0!==Y.morphAttributes.normal,morphColors:void 0!==Y.morphAttributes.color,morphTargetsCount:i,morphTextureStride:d,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numClippingPlanes:A.numPlanes,numClipIntersection:A.numIntersection,dithering:h.dithering,shadowMapEnabled:x.shadowMap.enabled&&N.length>0,shadowMapType:x.shadowMap.type,toneMapping:yx,useLegacyLights:x._useLegacyLights,premultipliedAlpha:h.premultipliedAlpha,doubleSided:2===h.side,flipSided:1===h.side,useDepthPacking:h.depthPacking>=0,depthPacking:h.depthPacking||0,index0AttributeName:h.index0AttributeName,extensionDerivatives:kx&&!0===h.extensions.derivatives,extensionFragDepth:kx&&!0===h.extensions.fragDepth,extensionDrawBuffers:kx&&!0===h.extensions.drawBuffers,extensionShaderTextureLOD:kx&&!0===h.extensions.shaderTextureLOD,rendererExtensionFragDepth:Q||L.has("EXT_frag_depth"),rendererExtensionDrawBuffers:Q||L.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:Q||L.has("EXT_shader_texture_lod"),customProgramCacheKey:h.customProgramCacheKey()}},getProgramCacheKey:function(o){const c=[];if(o.shaderID?c.push(o.shaderID):(c.push(o.customVertexShaderID),c.push(o.customFragmentShaderID)),void 0!==o.defines)for(const x in o.defines)c.push(x),c.push(o.defines[x]);return!1===o.isRawShaderMaterial&&(function(x,o){x.push(o.precision),x.push(o.outputColorSpace),x.push(o.envMapMode),x.push(o.envMapCubeUVHeight),x.push(o.mapUv),x.push(o.alphaMapUv),x.push(o.lightMapUv),x.push(o.aoMapUv),x.push(o.bumpMapUv),x.push(o.normalMapUv),x.push(o.displacementMapUv),x.push(o.emissiveMapUv),x.push(o.metalnessMapUv),x.push(o.roughnessMapUv),x.push(o.anisotropyMapUv),x.push(o.clearcoatMapUv),x.push(o.clearcoatNormalMapUv),x.push(o.clearcoatRoughnessMapUv),x.push(o.iridescenceMapUv),x.push(o.iridescenceThicknessMapUv),x.push(o.sheenColorMapUv),x.push(o.sheenRoughnessMapUv),x.push(o.specularMapUv),x.push(o.specularColorMapUv),x.push(o.specularIntensityMapUv),x.push(o.transmissionMapUv),x.push(o.thicknessMapUv),x.push(o.combine),x.push(o.fogExp2),x.push(o.sizeAttenuation),x.push(o.morphTargetsCount),x.push(o.morphAttributeCount),x.push(o.numDirLights),x.push(o.numPointLights),x.push(o.numSpotLights),x.push(o.numSpotLightMaps),x.push(o.numHemiLights),x.push(o.numRectAreaLights),x.push(o.numDirLightShadows),x.push(o.numPointLightShadows),x.push(o.numSpotLightShadows),x.push(o.numSpotLightShadowsWithMaps),x.push(o.shadowMapType),x.push(o.toneMapping),x.push(o.numClippingPlanes),x.push(o.numClipIntersection),x.push(o.depthPacking)}(c,o),function(x,o){E.disableAll(),o.isWebGL2&&E.enable(0),o.supportsVertexTextures&&E.enable(1),o.instancing&&E.enable(2),o.instancingColor&&E.enable(3),o.matcap&&E.enable(4),o.envMap&&E.enable(5),o.normalMapObjectSpace&&E.enable(6),o.normalMapTangentSpace&&E.enable(7),o.clearcoat&&E.enable(8),o.iridescence&&E.enable(9),o.alphaTest&&E.enable(10),o.vertexColors&&E.enable(11),o.vertexAlphas&&E.enable(12),o.vertexUv1s&&E.enable(13),o.vertexUv2s&&E.enable(14),o.vertexUv3s&&E.enable(15),o.vertexTangents&&E.enable(16),o.anisotropy&&E.enable(17),x.push(E.mask),E.disableAll(),o.fog&&E.enable(0),o.useFog&&E.enable(1),o.flatShading&&E.enable(2),o.logarithmicDepthBuffer&&E.enable(3),o.skinning&&E.enable(4),o.morphTargets&&E.enable(5),o.morphNormals&&E.enable(6),o.morphColors&&E.enable(7),o.premultipliedAlpha&&E.enable(8),o.shadowMapEnabled&&E.enable(9),o.useLegacyLights&&E.enable(10),o.doubleSided&&E.enable(11),o.flipSided&&E.enable(12),o.useDepthPacking&&E.enable(13),o.dithering&&E.enable(14),o.transmission&&E.enable(15),o.sheen&&E.enable(16),o.opaque&&E.enable(17),o.pointsUvs&&E.enable(18),x.push(E.mask)}(c,o),c.push(x.outputColorSpace)),c.push(o.customProgramCacheKey),c.join()},getUniforms:function(x){const o=X[x.type];let c;if(o){const x=II[o];c=KQ.clone(x.uniforms)}else c=x.uniforms;return c},acquireProgram:function(o,c){let L;for(let x=0,o=N.length;x<o;x++){const o=N[x];if(o.cacheKey===c){L=o,++L.usedTimes;break}}return void 0===L&&(L=new E_(x,c,o,h),N.push(L)),L},releaseProgram:function(x){if(0==--x.usedTimes){const o=N.indexOf(x);N[o]=N[N.length-1],N.pop(),x.destroy()}},releaseShaderCache:function(x){H.remove(x)},programs:N,dispose:function(){H.dispose()}}}function k_(){let x=new WeakMap;return{get:function(o){let c=x.get(o);return void 0===c&&(c={},x.set(o,c)),c},remove:function(o){x.delete(o)},update:function(o,c,L){x.get(o)[c]=L},dispose:function(){x=new WeakMap}}}function __(x,o){return x.groupOrder!==o.groupOrder?x.groupOrder-o.groupOrder:x.renderOrder!==o.renderOrder?x.renderOrder-o.renderOrder:x.material.id!==o.material.id?x.material.id-o.material.id:x.z!==o.z?x.z-o.z:x.id-o.id}function X_(x,o){return x.groupOrder!==o.groupOrder?x.groupOrder-o.groupOrder:x.renderOrder!==o.renderOrder?x.renderOrder-o.renderOrder:x.z!==o.z?o.z-x.z:x.id-o.id}function r_(){const x=[];let o=0;const c=[],L=[],T=[];function h(c,L,T,h,A,E){let H=x[o];return void 0===H?(H={id:c.id,object:c,geometry:L,material:T,groupOrder:h,renderOrder:c.renderOrder,z:A,group:E},x[o]=H):(H.id=c.id,H.object=c,H.geometry=L,H.material=T,H.groupOrder=h,H.renderOrder=c.renderOrder,H.z=A,H.group=E),o++,H}return{opaque:c,transmissive:L,transparent:T,init:function(){o=0,c.length=0,L.length=0,T.length=0},push:function(x,o,A,E,H,N){const Q=h(x,o,A,E,H,N);A.transmission>0?L.push(Q):!0===A.transparent?T.push(Q):c.push(Q)},unshift:function(x,o,A,E,H,N){const Q=h(x,o,A,E,H,N);A.transmission>0?L.unshift(Q):!0===A.transparent?T.unshift(Q):c.unshift(Q)},finish:function(){for(let c=o,L=x.length;c<L;c++){const o=x[c];if(null===o.id)break;o.id=null,o.object=null,o.geometry=null,o.material=null,o.group=null}},sort:function(x,o){c.length>1&&c.sort(x||__),L.length>1&&L.sort(o||X_),T.length>1&&T.sort(o||X_)}}}function y_(){let x=new WeakMap;return{get:function(o,c){const L=x.get(o);let T;return void 0===L?(T=new r_,x.set(o,[T])):c>=L.length?(T=new r_,L.push(T)):T=L[c],T},dispose:function(){x=new WeakMap}}}function v_(){const x={};return{get:function(o){if(void 0!==x[o.id])return x[o.id];let c;switch(o.type){case"DirectionalLight":c={direction:new zH,color:new AQ};break;case"SpotLight":c={position:new zH,direction:new zH,color:new AQ,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":c={position:new zH,color:new AQ,distance:0,decay:0};break;case"HemisphereLight":c={direction:new zH,skyColor:new AQ,groundColor:new AQ};break;case"RectAreaLight":c={color:new AQ,position:new zH,halfWidth:new zH,halfHeight:new zH}}return x[o.id]=c,c}}}let B_=0;function Y_(x,o){return(o.castShadow?2:0)-(x.castShadow?2:0)+(o.map?1:0)-(x.map?1:0)}function F_(x,o){const c=new v_,L=function(){const x={};return{get:function(o){if(void 0!==x[o.id])return x[o.id];let c;switch(o.type){case"DirectionalLight":case"SpotLight":c={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rH};break;case"PointLight":c={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rH,shadowCameraNear:1,shadowCameraFar:1e3}}return x[o.id]=c,c}}}(),T={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let x=0;x<9;x++)T.probe.push(new zH);const h=new zH,A=new yN,E=new yN;return{setup:function(h,A){let E=0,H=0,N=0;for(let x=0;x<9;x++)T.probe[x].set(0,0,0);let Q=0,I=0,k=0,_=0,X=0,r=0,y=0,v=0,B=0,Y=0;h.sort(Y_);const F=!0===A?Math.PI:1;for(let x=0,o=h.length;x<o;x++){const o=h[x],A=o.color,t=o.intensity,m=o.distance,C=o.shadow&&o.shadow.map?o.shadow.map.texture:null;if(o.isAmbientLight)E+=A.r*t*F,H+=A.g*t*F,N+=A.b*t*F;else if(o.isLightProbe)for(let x=0;x<9;x++)T.probe[x].addScaledVector(o.sh.coefficients[x],t);else if(o.isDirectionalLight){const x=c.get(o);if(x.color.copy(o.color).multiplyScalar(o.intensity*F),o.castShadow){const x=o.shadow,c=L.get(o);c.shadowBias=x.bias,c.shadowNormalBias=x.normalBias,c.shadowRadius=x.radius,c.shadowMapSize=x.mapSize,T.directionalShadow[Q]=c,T.directionalShadowMap[Q]=C,T.directionalShadowMatrix[Q]=o.shadow.matrix,r++}T.directional[Q]=x,Q++}else if(o.isSpotLight){const x=c.get(o);x.position.setFromMatrixPosition(o.matrixWorld),x.color.copy(A).multiplyScalar(t*F),x.distance=m,x.coneCos=Math.cos(o.angle),x.penumbraCos=Math.cos(o.angle*(1-o.penumbra)),x.decay=o.decay,T.spot[k]=x;const h=o.shadow;if(o.map&&(T.spotLightMap[B]=o.map,B++,h.updateMatrices(o),o.castShadow&&Y++),T.spotLightMatrix[k]=h.matrix,o.castShadow){const x=L.get(o);x.shadowBias=h.bias,x.shadowNormalBias=h.normalBias,x.shadowRadius=h.radius,x.shadowMapSize=h.mapSize,T.spotShadow[k]=x,T.spotShadowMap[k]=C,v++}k++}else if(o.isRectAreaLight){const x=c.get(o);x.color.copy(A).multiplyScalar(t),x.halfWidth.set(.5*o.width,0,0),x.halfHeight.set(0,.5*o.height,0),T.rectArea[_]=x,_++}else if(o.isPointLight){const x=c.get(o);if(x.color.copy(o.color).multiplyScalar(o.intensity*F),x.distance=o.distance,x.decay=o.decay,o.castShadow){const x=o.shadow,c=L.get(o);c.shadowBias=x.bias,c.shadowNormalBias=x.normalBias,c.shadowRadius=x.radius,c.shadowMapSize=x.mapSize,c.shadowCameraNear=x.camera.near,c.shadowCameraFar=x.camera.far,T.pointShadow[I]=c,T.pointShadowMap[I]=C,T.pointShadowMatrix[I]=o.shadow.matrix,y++}T.point[I]=x,I++}else if(o.isHemisphereLight){const x=c.get(o);x.skyColor.copy(o.color).multiplyScalar(t*F),x.groundColor.copy(o.groundColor).multiplyScalar(t*F),T.hemi[X]=x,X++}}_>0&&(o.isWebGL2||!0===x.has("OES_texture_float_linear")?(T.rectAreaLTC1=QI.LTC_FLOAT_1,T.rectAreaLTC2=QI.LTC_FLOAT_2):!0===x.has("OES_texture_half_float_linear")?(T.rectAreaLTC1=QI.LTC_HALF_1,T.rectAreaLTC2=QI.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),T.ambient[0]=E,T.ambient[1]=H,T.ambient[2]=N;const t=T.hash;t.directionalLength===Q&&t.pointLength===I&&t.spotLength===k&&t.rectAreaLength===_&&t.hemiLength===X&&t.numDirectionalShadows===r&&t.numPointShadows===y&&t.numSpotShadows===v&&t.numSpotMaps===B||(T.directional.length=Q,T.spot.length=k,T.rectArea.length=_,T.point.length=I,T.hemi.length=X,T.directionalShadow.length=r,T.directionalShadowMap.length=r,T.pointShadow.length=y,T.pointShadowMap.length=y,T.spotShadow.length=v,T.spotShadowMap.length=v,T.directionalShadowMatrix.length=r,T.pointShadowMatrix.length=y,T.spotLightMatrix.length=v+B-Y,T.spotLightMap.length=B,T.numSpotLightShadowsWithMaps=Y,t.directionalLength=Q,t.pointLength=I,t.spotLength=k,t.rectAreaLength=_,t.hemiLength=X,t.numDirectionalShadows=r,t.numPointShadows=y,t.numSpotShadows=v,t.numSpotMaps=B,T.version=B_++)},setupView:function(x,o){let c=0,L=0,H=0,N=0,Q=0;const I=o.matrixWorldInverse;for(let o=0,k=x.length;o<k;o++){const k=x[o];if(k.isDirectionalLight){const x=T.directional[c];x.direction.setFromMatrixPosition(k.matrixWorld),h.setFromMatrixPosition(k.target.matrixWorld),x.direction.sub(h),x.direction.transformDirection(I),c++}else if(k.isSpotLight){const x=T.spot[H];x.position.setFromMatrixPosition(k.matrixWorld),x.position.applyMatrix4(I),x.direction.setFromMatrixPosition(k.matrixWorld),h.setFromMatrixPosition(k.target.matrixWorld),x.direction.sub(h),x.direction.transformDirection(I),H++}else if(k.isRectAreaLight){const x=T.rectArea[N];x.position.setFromMatrixPosition(k.matrixWorld),x.position.applyMatrix4(I),E.identity(),A.copy(k.matrixWorld),A.premultiply(I),E.extractRotation(A),x.halfWidth.set(.5*k.width,0,0),x.halfHeight.set(0,.5*k.height,0),x.halfWidth.applyMatrix4(E),x.halfHeight.applyMatrix4(E),N++}else if(k.isPointLight){const x=T.point[L];x.position.setFromMatrixPosition(k.matrixWorld),x.position.applyMatrix4(I),L++}else if(k.isHemisphereLight){const x=T.hemi[Q];x.direction.setFromMatrixPosition(k.matrixWorld),x.direction.transformDirection(I),Q++}}},state:T}}function t_(x,o){const c=new F_(x,o),L=[],T=[];return{init:function(){L.length=0,T.length=0},state:{lightsArray:L,shadowsArray:T,lights:c},setupLights:function(x){c.setup(L,x)},setupLightsView:function(x){c.setupView(L,x)},pushLight:function(x){L.push(x)},pushShadow:function(x){T.push(x)}}}function m_(x,o){let c=new WeakMap;return{get:function(L,T=0){const h=c.get(L);let A;return void 0===h?(A=new t_(x,o),c.set(L,[A])):T>=h.length?(A=new t_(x,o),h.push(A)):A=h[T],A},dispose:function(){c=new WeakMap}}}class C_ extends oQ{constructor(x){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(x)}copy(x){return super.copy(x),this.depthPacking=x.depthPacking,this.map=x.map,this.alphaMap=x.alphaMap,this.displacementMap=x.displacementMap,this.displacementScale=x.displacementScale,this.displacementBias=x.displacementBias,this.wireframe=x.wireframe,this.wireframeLinewidth=x.wireframeLinewidth,this}}class V_ extends oQ{constructor(x){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(x)}copy(x){return super.copy(x),this.map=x.map,this.alphaMap=x.alphaMap,this.displacementMap=x.displacementMap,this.displacementScale=x.displacementScale,this.displacementBias=x.displacementBias,this}}function i_(x,o,c){let L=new hI;const T=new rH,h=new rH,A=new UH,E=new C_({depthPacking:3201}),H=new V_,N={},Q=c.maxTextureSize,I={[tE]:1,[mE]:0,[CE]:2},k=new JQ({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new rH},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),_=k.clone();_.defines.HORIZONTAL_PASS=1;const X=new mQ;X.setAttribute("position",new IQ(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const r=new aQ(X,k),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let v=this.type;function B(c,L){const h=o.update(r);k.defines.VSM_SAMPLES!==c.blurSamples&&(k.defines.VSM_SAMPLES=c.blurSamples,_.defines.VSM_SAMPLES=c.blurSamples,k.needsUpdate=!0,_.needsUpdate=!0),null===c.mapPass&&(c.mapPass=new DH(T.x,T.y)),k.uniforms.shadow_pass.value=c.map.texture,k.uniforms.resolution.value=c.mapSize,k.uniforms.radius.value=c.radius,x.setRenderTarget(c.mapPass),x.clear(),x.renderBufferDirect(L,null,h,k,r,null),_.uniforms.shadow_pass.value=c.mapPass.texture,_.uniforms.resolution.value=c.mapSize,_.uniforms.radius.value=c.radius,x.setRenderTarget(c.map),x.clear(),x.renderBufferDirect(L,null,h,_,r,null)}function Y(o,c,L,T){let h=null;const A=!0===L.isPointLight?o.customDistanceMaterial:o.customDepthMaterial;if(void 0!==A)h=A;else if(h=!0===L.isPointLight?H:E,x.localClippingEnabled&&!0===c.clipShadows&&Array.isArray(c.clippingPlanes)&&0!==c.clippingPlanes.length||c.displacementMap&&0!==c.displacementScale||c.alphaMap&&c.alphaTest>0||c.map&&c.alphaTest>0){const x=h.uuid,o=c.uuid;let L=N[x];void 0===L&&(L={},N[x]=L);let T=L[o];void 0===T&&(T=h.clone(),L[o]=T),h=T}return h.visible=c.visible,h.wireframe=c.wireframe,h.side=3===T?null!==c.shadowSide?c.shadowSide:c.side:null!==c.shadowSide?c.shadowSide:I[c.side],h.alphaMap=c.alphaMap,h.alphaTest=c.alphaTest,h.map=c.map,h.clipShadows=c.clipShadows,h.clippingPlanes=c.clippingPlanes,h.clipIntersection=c.clipIntersection,h.displacementMap=c.displacementMap,h.displacementScale=c.displacementScale,h.displacementBias=c.displacementBias,h.wireframeLinewidth=c.wireframeLinewidth,h.linewidth=c.linewidth,!0===L.isPointLight&&!0===h.isMeshDistanceMaterial&&(x.properties.get(h).light=L),h}function F(c,T,h,A,E){if(!1===c.visible)return;if(c.layers.test(T.layers)&&(c.isMesh||c.isLine||c.isPoints)&&(c.castShadow||c.receiveShadow&&3===E)&&(!c.frustumCulled||L.intersectsObject(c))){c.modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,c.matrixWorld);const L=o.update(c),T=c.material;if(Array.isArray(T)){const o=L.groups;for(let H=0,N=o.length;H<N;H++){const N=o[H],Q=T[N.materialIndex];if(Q&&Q.visible){const o=Y(c,Q,A,E);x.renderBufferDirect(h,null,L,o,c,N)}}}else if(T.visible){const o=Y(c,T,A,E);x.renderBufferDirect(h,null,L,o,c,null)}}const H=c.children;for(let x=0,o=H.length;x<o;x++)F(H[x],T,h,A,E)}this.render=function(o,c,E){if(!1===y.enabled)return;if(!1===y.autoUpdate&&!1===y.needsUpdate)return;if(0===o.length)return;const H=x.getRenderTarget(),N=x.getActiveCubeFace(),I=x.getActiveMipmapLevel(),k=x.state;k.setBlending(0),k.buffers.color.setClear(1,1,1,1),k.buffers.depth.setTest(!0),k.setScissorTest(!1);const _=3!==v&&3===this.type,X=3===v&&3!==this.type;for(let H=0,N=o.length;H<N;H++){const N=o[H],I=N.shadow;if(void 0===I){console.warn("THREE.WebGLShadowMap:",N,"has no shadow.");continue}if(!1===I.autoUpdate&&!1===I.needsUpdate)continue;T.copy(I.mapSize);const r=I.getFrameExtents();if(T.multiply(r),h.copy(I.mapSize),(T.x>Q||T.y>Q)&&(T.x>Q&&(h.x=Math.floor(Q/r.x),T.x=h.x*r.x,I.mapSize.x=h.x),T.y>Q&&(h.y=Math.floor(Q/r.y),T.y=h.y*r.y,I.mapSize.y=h.y)),null===I.map||!0===_||!0===X){const x=3!==this.type?{minFilter:1003,magFilter:1003}:{};null!==I.map&&I.map.dispose(),I.map=new DH(T.x,T.y,x),I.map.texture.name=N.name+".shadowMap",I.camera.updateProjectionMatrix()}x.setRenderTarget(I.map),x.clear();const y=I.getViewportCount();for(let x=0;x<y;x++){const o=I.getViewport(x);A.set(h.x*o.x,h.y*o.y,h.x*o.z,h.y*o.w),k.viewport(A),I.updateMatrices(N,x),L=I.getFrustum(),F(c,E,I.camera,N,this.type)}!0!==I.isPointLightShadow&&3===this.type&&B(I,E),I.needsUpdate=!1}v=this.type,y.needsUpdate=!1,x.setRenderTarget(H,N,I)}}function M_(x,o,c){const L=c.isWebGL2,T=new function(){let o=!1;const c=new UH;let L=null;const T=new UH(0,0,0,0);return{setMask:function(c){L===c||o||(x.colorMask(c,c,c,c),L=c)},setLocked:function(x){o=x},setClear:function(o,L,h,A,E){!0===E&&(o*=A,L*=A,h*=A),c.set(o,L,h,A),!1===T.equals(c)&&(x.clearColor(o,L,h,A),T.copy(c))},reset:function(){o=!1,L=null,T.set(-1,0,0,0)}}},h=new function(){let o=!1,c=null,L=null,T=null;return{setTest:function(o){o?a(x.DEPTH_TEST):z(x.DEPTH_TEST)},setMask:function(L){c===L||o||(x.depthMask(L),c=L)},setFunc:function(o){if(L!==o){switch(o){case 0:x.depthFunc(x.NEVER);break;case 1:x.depthFunc(x.ALWAYS);break;case 2:x.depthFunc(x.LESS);break;case 3:default:x.depthFunc(x.LEQUAL);break;case 4:x.depthFunc(x.EQUAL);break;case 5:x.depthFunc(x.GEQUAL);break;case 6:x.depthFunc(x.GREATER);break;case 7:x.depthFunc(x.NOTEQUAL)}L=o}},setLocked:function(x){o=x},setClear:function(o){T!==o&&(x.clearDepth(o),T=o)},reset:function(){o=!1,c=null,L=null,T=null}}},A=new function(){let o=!1,c=null,L=null,T=null,h=null,A=null,E=null,H=null,N=null;return{setTest:function(c){o||(c?a(x.STENCIL_TEST):z(x.STENCIL_TEST))},setMask:function(L){c===L||o||(x.stencilMask(L),c=L)},setFunc:function(o,c,A){L===o&&T===c&&h===A||(x.stencilFunc(o,c,A),L=o,T=c,h=A)},setOp:function(o,c,L){A===o&&E===c&&H===L||(x.stencilOp(o,c,L),A=o,E=c,H=L)},setLocked:function(x){o=x},setClear:function(o){N!==o&&(x.clearStencil(o),N=o)},reset:function(){o=!1,c=null,L=null,T=null,h=null,A=null,E=null,H=null,N=null}}},E=new WeakMap,H=new WeakMap;let N={},Q={},I=new WeakMap,k=[],_=null,X=!1,r=null,y=null,v=null,B=null,Y=null,F=null,t=null,m=!1,C=null,V=null,i=null,M=null,Z=null;const S=x.getParameter(x.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let u=!1,d=0;const O=x.getParameter(x.VERSION);-1!==O.indexOf("WebGL")?(d=parseFloat(/^WebGL (\d)/.exec(O)[1]),u=d>=1):-1!==O.indexOf("OpenGL ES")&&(d=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),u=d>=2);let j=null,e={};const q=x.getParameter(x.SCISSOR_BOX),f=x.getParameter(x.VIEWPORT),U=(new UH).fromArray(q),s=(new UH).fromArray(f);function D(o,c,T,h){const A=new Uint8Array(4),E=x.createTexture();x.bindTexture(o,E),x.texParameteri(o,x.TEXTURE_MIN_FILTER,x.NEAREST),x.texParameteri(o,x.TEXTURE_MAG_FILTER,x.NEAREST);for(let E=0;E<T;E++)!L||o!==x.TEXTURE_3D&&o!==x.TEXTURE_2D_ARRAY?x.texImage2D(c+E,0,x.RGBA,1,1,0,x.RGBA,x.UNSIGNED_BYTE,A):x.texImage3D(c,0,x.RGBA,1,1,h,0,x.RGBA,x.UNSIGNED_BYTE,A);return E}const $={};function a(o){!0!==N[o]&&(x.enable(o),N[o]=!0)}function z(o){!1!==N[o]&&(x.disable(o),N[o]=!1)}$[x.TEXTURE_2D]=D(x.TEXTURE_2D,x.TEXTURE_2D,1),$[x.TEXTURE_CUBE_MAP]=D(x.TEXTURE_CUBE_MAP,x.TEXTURE_CUBE_MAP_POSITIVE_X,6),L&&($[x.TEXTURE_2D_ARRAY]=D(x.TEXTURE_2D_ARRAY,x.TEXTURE_2D_ARRAY,1,1),$[x.TEXTURE_3D]=D(x.TEXTURE_3D,x.TEXTURE_3D,1,1)),T.setClear(0,0,0,1),h.setClear(1),A.setClear(0),a(x.DEPTH_TEST),h.setFunc(3),P(!1),K(1),a(x.CULL_FACE),p(0);const l={[VE]:x.FUNC_ADD,[iE]:x.FUNC_SUBTRACT,[ME]:x.FUNC_REVERSE_SUBTRACT};if(L)l[103]=x.MIN,l[104]=x.MAX;else{const x=o.get("EXT_blend_minmax");null!==x&&(l[103]=x.MIN_EXT,l[104]=x.MAX_EXT)}const G={[ZE]:x.ZERO,[SE]:x.ONE,[uE]:x.SRC_COLOR,[OE]:x.SRC_ALPHA,[sE]:x.SRC_ALPHA_SATURATE,[fE]:x.DST_COLOR,[eE]:x.DST_ALPHA,[dE]:x.ONE_MINUS_SRC_COLOR,[jE]:x.ONE_MINUS_SRC_ALPHA,[UE]:x.ONE_MINUS_DST_COLOR,[qE]:x.ONE_MINUS_DST_ALPHA};function p(o,c,L,T,h,A,E,H){if(0!==o){if(!1===X&&(a(x.BLEND),X=!0),5===o)h=h||c,A=A||L,E=E||T,c===y&&h===Y||(x.blendEquationSeparate(l[c],l[h]),y=c,Y=h),L===v&&T===B&&A===F&&E===t||(x.blendFuncSeparate(G[L],G[T],G[A],G[E]),v=L,B=T,F=A,t=E),r=o,m=!1;else if(o!==r||H!==m){if(100===y&&100===Y||(x.blendEquation(x.FUNC_ADD),y=100,Y=100),H)switch(o){case 1:x.blendFuncSeparate(x.ONE,x.ONE_MINUS_SRC_ALPHA,x.ONE,x.ONE_MINUS_SRC_ALPHA);break;case 2:x.blendFunc(x.ONE,x.ONE);break;case 3:x.blendFuncSeparate(x.ZERO,x.ONE_MINUS_SRC_COLOR,x.ZERO,x.ONE);break;case 4:x.blendFuncSeparate(x.ZERO,x.SRC_COLOR,x.ZERO,x.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",o)}else switch(o){case 1:x.blendFuncSeparate(x.SRC_ALPHA,x.ONE_MINUS_SRC_ALPHA,x.ONE,x.ONE_MINUS_SRC_ALPHA);break;case 2:x.blendFunc(x.SRC_ALPHA,x.ONE);break;case 3:x.blendFuncSeparate(x.ZERO,x.ONE_MINUS_SRC_COLOR,x.ZERO,x.ONE);break;case 4:x.blendFunc(x.ZERO,x.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",o)}v=null,B=null,F=null,t=null,r=o,m=H}}else!0===X&&(z(x.BLEND),X=!1)}function P(o){C!==o&&(o?x.frontFace(x.CW):x.frontFace(x.CCW),C=o)}function K(o){0!==o?(a(x.CULL_FACE),o!==V&&(1===o?x.cullFace(x.BACK):2===o?x.cullFace(x.FRONT):x.cullFace(x.FRONT_AND_BACK))):z(x.CULL_FACE),V=o}function J(o,c,L){o?(a(x.POLYGON_OFFSET_FILL),M===c&&Z===L||(x.polygonOffset(c,L),M=c,Z=L)):z(x.POLYGON_OFFSET_FILL)}return{buffers:{color:T,depth:h,stencil:A},enable:a,disable:z,bindFramebuffer:function(o,c){return Q[o]!==c&&(x.bindFramebuffer(o,c),Q[o]=c,L&&(o===x.DRAW_FRAMEBUFFER&&(Q[x.FRAMEBUFFER]=c),o===x.FRAMEBUFFER&&(Q[x.DRAW_FRAMEBUFFER]=c)),!0)},drawBuffers:function(L,T){let h=k,A=!1;if(L)if(h=I.get(T),void 0===h&&(h=[],I.set(T,h)),L.isWebGLMultipleRenderTargets){const o=L.texture;if(h.length!==o.length||h[0]!==x.COLOR_ATTACHMENT0){for(let c=0,L=o.length;c<L;c++)h[c]=x.COLOR_ATTACHMENT0+c;h.length=o.length,A=!0}}else h[0]!==x.COLOR_ATTACHMENT0&&(h[0]=x.COLOR_ATTACHMENT0,A=!0);else h[0]!==x.BACK&&(h[0]=x.BACK,A=!0);A&&(c.isWebGL2?x.drawBuffers(h):o.get("WEBGL_draw_buffers").drawBuffersWEBGL(h))},useProgram:function(o){return _!==o&&(x.useProgram(o),_=o,!0)},setBlending:p,setMaterial:function(o,c){2===o.side?z(x.CULL_FACE):a(x.CULL_FACE);let L=1===o.side;c&&(L=!L),P(L),1===o.blending&&!1===o.transparent?p(0):p(o.blending,o.blendEquation,o.blendSrc,o.blendDst,o.blendEquationAlpha,o.blendSrcAlpha,o.blendDstAlpha,o.premultipliedAlpha),h.setFunc(o.depthFunc),h.setTest(o.depthTest),h.setMask(o.depthWrite),T.setMask(o.colorWrite);const E=o.stencilWrite;A.setTest(E),E&&(A.setMask(o.stencilWriteMask),A.setFunc(o.stencilFunc,o.stencilRef,o.stencilFuncMask),A.setOp(o.stencilFail,o.stencilZFail,o.stencilZPass)),J(o.polygonOffset,o.polygonOffsetFactor,o.polygonOffsetUnits),!0===o.alphaToCoverage?a(x.SAMPLE_ALPHA_TO_COVERAGE):z(x.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:P,setCullFace:K,setLineWidth:function(o){o!==i&&(u&&x.lineWidth(o),i=o)},setPolygonOffset:J,setScissorTest:function(o){o?a(x.SCISSOR_TEST):z(x.SCISSOR_TEST)},activeTexture:function(o){void 0===o&&(o=x.TEXTURE0+S-1),j!==o&&(x.activeTexture(o),j=o)},bindTexture:function(o,c,L){void 0===L&&(L=null===j?x.TEXTURE0+S-1:j);let T=e[L];void 0===T&&(T={type:void 0,texture:void 0},e[L]=T),T.type===o&&T.texture===c||(j!==L&&(x.activeTexture(L),j=L),x.bindTexture(o,c||$[o]),T.type=o,T.texture=c)},unbindTexture:function(){const o=e[j];void 0!==o&&void 0!==o.type&&(x.bindTexture(o.type,null),o.type=void 0,o.texture=void 0)},compressedTexImage2D:function(){try{x.compressedTexImage2D.apply(x,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},compressedTexImage3D:function(){try{x.compressedTexImage3D.apply(x,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},texImage2D:function(){try{x.texImage2D.apply(x,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},texImage3D:function(){try{x.texImage3D.apply(x,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},updateUBOMapping:function(o,c){let L=H.get(c);void 0===L&&(L=new WeakMap,H.set(c,L));let T=L.get(o);void 0===T&&(T=x.getUniformBlockIndex(c,o.name),L.set(o,T))},uniformBlockBinding:function(o,c){const L=H.get(c).get(o);E.get(c)!==L&&(x.uniformBlockBinding(c,L,o.__bindingPointIndex),E.set(c,L))},texStorage2D:function(){try{x.texStorage2D.apply(x,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},texStorage3D:function(){try{x.texStorage3D.apply(x,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},texSubImage2D:function(){try{x.texSubImage2D.apply(x,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},texSubImage3D:function(){try{x.texSubImage3D.apply(x,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},compressedTexSubImage2D:function(){try{x.compressedTexSubImage2D.apply(x,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},compressedTexSubImage3D:function(){try{x.compressedTexSubImage3D.apply(x,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},scissor:function(o){!1===U.equals(o)&&(x.scissor(o.x,o.y,o.z,o.w),U.copy(o))},viewport:function(o){!1===s.equals(o)&&(x.viewport(o.x,o.y,o.z,o.w),s.copy(o))},reset:function(){x.disable(x.BLEND),x.disable(x.CULL_FACE),x.disable(x.DEPTH_TEST),x.disable(x.POLYGON_OFFSET_FILL),x.disable(x.SCISSOR_TEST),x.disable(x.STENCIL_TEST),x.disable(x.SAMPLE_ALPHA_TO_COVERAGE),x.blendEquation(x.FUNC_ADD),x.blendFunc(x.ONE,x.ZERO),x.blendFuncSeparate(x.ONE,x.ZERO,x.ONE,x.ZERO),x.colorMask(!0,!0,!0,!0),x.clearColor(0,0,0,0),x.depthMask(!0),x.depthFunc(x.LESS),x.clearDepth(1),x.stencilMask(4294967295),x.stencilFunc(x.ALWAYS,0,4294967295),x.stencilOp(x.KEEP,x.KEEP,x.KEEP),x.clearStencil(0),x.cullFace(x.BACK),x.frontFace(x.CCW),x.polygonOffset(0,0),x.activeTexture(x.TEXTURE0),x.bindFramebuffer(x.FRAMEBUFFER,null),!0===L&&(x.bindFramebuffer(x.DRAW_FRAMEBUFFER,null),x.bindFramebuffer(x.READ_FRAMEBUFFER,null)),x.useProgram(null),x.lineWidth(1),x.scissor(0,0,x.canvas.width,x.canvas.height),x.viewport(0,0,x.canvas.width,x.canvas.height),N={},j=null,e={},Q={},I=new WeakMap,k=[],_=null,X=!1,r=null,y=null,v=null,B=null,Y=null,F=null,t=null,m=!1,C=null,V=null,i=null,M=null,Z=null,U.set(0,0,x.canvas.width,x.canvas.height),s.set(0,0,x.canvas.width,x.canvas.height),T.reset(),h.reset(),A.reset()}}}function Z_(x,o,c,L,T,h,A){const E=T.isWebGL2,H=T.maxTextures,N=T.maxCubemapSize,Q=T.maxTextureSize,I=T.maxSamples,k=o.has("WEBGL_multisampled_render_to_texture")?o.get("WEBGL_multisampled_render_to_texture"):null,_="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),X=new WeakMap;let r;const y=new WeakMap;let v=!1;try{v="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(x){}function B(x,o){return v?new OffscreenCanvas(x,o):YH("canvas")}function Y(x,o,c,L){let T=1;if((x.width>L||x.height>L)&&(T=L/Math.max(x.width,x.height)),T<1||!0===o){if("undefined"!=typeof HTMLImageElement&&x instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&x instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&x instanceof ImageBitmap){const L=o?kH:Math.floor,h=L(T*x.width),A=L(T*x.height);void 0===r&&(r=B(h,A));const E=c?B(h,A):r;return E.width=h,E.height=A,E.getContext("2d").drawImage(x,0,0,h,A),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+x.width+"x"+x.height+") to ("+h+"x"+A+")."),E}return"data"in x&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+x.width+"x"+x.height+")."),x}return x}function F(x){return IH(x.width)&&IH(x.height)}function t(x,o){return x.generateMipmaps&&o&&1003!==x.minFilter&&1006!==x.minFilter}function m(o){x.generateMipmap(o)}function C(c,L,T,h,A=!1){if(!1===E)return L;if(null!==c){if(void 0!==x[c])return x[c];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+c+"'")}let H=L;return L===x.RED&&(T===x.FLOAT&&(H=x.R32F),T===x.HALF_FLOAT&&(H=x.R16F),T===x.UNSIGNED_BYTE&&(H=x.R8)),L===x.RED_INTEGER&&(T===x.UNSIGNED_BYTE&&(H=x.R8UI),T===x.UNSIGNED_SHORT&&(H=x.R16UI),T===x.UNSIGNED_INT&&(H=x.R32UI),T===x.BYTE&&(H=x.R8I),T===x.SHORT&&(H=x.R16I),T===x.INT&&(H=x.R32I)),L===x.RG&&(T===x.FLOAT&&(H=x.RG32F),T===x.HALF_FLOAT&&(H=x.RG16F),T===x.UNSIGNED_BYTE&&(H=x.RG8)),L===x.RGBA&&(T===x.FLOAT&&(H=x.RGBA32F),T===x.HALF_FLOAT&&(H=x.RGBA16F),T===x.UNSIGNED_BYTE&&(H="srgb"===h&&!1===A?x.SRGB8_ALPHA8:x.RGBA8),T===x.UNSIGNED_SHORT_4_4_4_4&&(H=x.RGBA4),T===x.UNSIGNED_SHORT_5_5_5_1&&(H=x.RGB5_A1)),H!==x.R16F&&H!==x.R32F&&H!==x.RG16F&&H!==x.RG32F&&H!==x.RGBA16F&&H!==x.RGBA32F||o.get("EXT_color_buffer_float"),H}function V(x,o,c){return!0===t(x,c)||x.isFramebufferTexture&&1003!==x.minFilter&&1006!==x.minFilter?Math.log2(Math.max(o.width,o.height))+1:void 0!==x.mipmaps&&x.mipmaps.length>0?x.mipmaps.length:x.isCompressedTexture&&Array.isArray(x.image)?o.mipmaps.length:1}function i(o){return 1003===o||1004===o||1005===o?x.NEAREST:x.LINEAR}function M(x){const o=x.target;o.removeEventListener("dispose",M),function(x){const o=L.get(x);if(void 0===o.__webglInit)return;const c=x.source,T=y.get(c);if(T){const L=T[o.__cacheKey];L.usedTimes--,0===L.usedTimes&&S(x),0===Object.keys(T).length&&y.delete(c)}L.remove(x)}(o),o.isVideoTexture&&X.delete(o)}function Z(o){const c=o.target;c.removeEventListener("dispose",Z),function(o){const c=o.texture,T=L.get(o),h=L.get(c);if(void 0!==h.__webglTexture&&(x.deleteTexture(h.__webglTexture),A.memory.textures--),o.depthTexture&&o.depthTexture.dispose(),o.isWebGLCubeRenderTarget)for(let o=0;o<6;o++){if(Array.isArray(T.__webglFramebuffer[o]))for(let c=0;c<T.__webglFramebuffer[o].length;c++)x.deleteFramebuffer(T.__webglFramebuffer[o][c]);else x.deleteFramebuffer(T.__webglFramebuffer[o]);T.__webglDepthbuffer&&x.deleteRenderbuffer(T.__webglDepthbuffer[o])}else{if(Array.isArray(T.__webglFramebuffer))for(let o=0;o<T.__webglFramebuffer.length;o++)x.deleteFramebuffer(T.__webglFramebuffer[o]);else x.deleteFramebuffer(T.__webglFramebuffer);if(T.__webglDepthbuffer&&x.deleteRenderbuffer(T.__webglDepthbuffer),T.__webglMultisampledFramebuffer&&x.deleteFramebuffer(T.__webglMultisampledFramebuffer),T.__webglColorRenderbuffer)for(let o=0;o<T.__webglColorRenderbuffer.length;o++)T.__webglColorRenderbuffer[o]&&x.deleteRenderbuffer(T.__webglColorRenderbuffer[o]);T.__webglDepthRenderbuffer&&x.deleteRenderbuffer(T.__webglDepthRenderbuffer)}if(o.isWebGLMultipleRenderTargets)for(let o=0,T=c.length;o<T;o++){const T=L.get(c[o]);T.__webglTexture&&(x.deleteTexture(T.__webglTexture),A.memory.textures--),L.remove(c[o])}L.remove(c),L.remove(o)}(c)}function S(o){const c=L.get(o);x.deleteTexture(c.__webglTexture);const T=o.source;delete y.get(T)[c.__cacheKey],A.memory.textures--}let u=0;function d(o,T){const h=L.get(o);if(o.isVideoTexture&&function(x){const o=A.render.frame;X.get(x)!==o&&(X.set(x,o),x.update())}(o),!1===o.isRenderTargetTexture&&o.version>0&&h.__version!==o.version){const x=o.image;if(null===x)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==x.complete)return void U(h,o,T);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}c.bindTexture(x.TEXTURE_2D,h.__webglTexture,x.TEXTURE0+T)}const O={[DE]:x.REPEAT,[$E]:x.CLAMP_TO_EDGE,[aE]:x.MIRRORED_REPEAT},j={[zE]:x.NEAREST,[lE]:x.NEAREST_MIPMAP_NEAREST,[GE]:x.NEAREST_MIPMAP_LINEAR,[pE]:x.LINEAR,[PE]:x.LINEAR_MIPMAP_NEAREST,[KE]:x.LINEAR_MIPMAP_LINEAR},e={[WE]:x.NEVER,[LH]:x.ALWAYS,[wE]:x.LESS,[RE]:x.LEQUAL,[gE]:x.EQUAL,[cH]:x.GEQUAL,[xH]:x.GREATER,[oH]:x.NOTEQUAL};function q(c,h,A){if(A?(x.texParameteri(c,x.TEXTURE_WRAP_S,O[h.wrapS]),x.texParameteri(c,x.TEXTURE_WRAP_T,O[h.wrapT]),c!==x.TEXTURE_3D&&c!==x.TEXTURE_2D_ARRAY||x.texParameteri(c,x.TEXTURE_WRAP_R,O[h.wrapR]),x.texParameteri(c,x.TEXTURE_MAG_FILTER,j[h.magFilter]),x.texParameteri(c,x.TEXTURE_MIN_FILTER,j[h.minFilter])):(x.texParameteri(c,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(c,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),c!==x.TEXTURE_3D&&c!==x.TEXTURE_2D_ARRAY||x.texParameteri(c,x.TEXTURE_WRAP_R,x.CLAMP_TO_EDGE),1001===h.wrapS&&1001===h.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),x.texParameteri(c,x.TEXTURE_MAG_FILTER,i(h.magFilter)),x.texParameteri(c,x.TEXTURE_MIN_FILTER,i(h.minFilter)),1003!==h.minFilter&&1006!==h.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),h.compareFunction&&(x.texParameteri(c,x.TEXTURE_COMPARE_MODE,x.COMPARE_REF_TO_TEXTURE),x.texParameteri(c,x.TEXTURE_COMPARE_FUNC,e[h.compareFunction])),!0===o.has("EXT_texture_filter_anisotropic")){const A=o.get("EXT_texture_filter_anisotropic");if(1003===h.magFilter)return;if(1005!==h.minFilter&&1008!==h.minFilter)return;if(1015===h.type&&!1===o.has("OES_texture_float_linear"))return;if(!1===E&&1016===h.type&&!1===o.has("OES_texture_half_float_linear"))return;(h.anisotropy>1||L.get(h).__currentAnisotropy)&&(x.texParameterf(c,A.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(h.anisotropy,T.getMaxAnisotropy())),L.get(h).__currentAnisotropy=h.anisotropy)}}function f(o,c){let L=!1;void 0===o.__webglInit&&(o.__webglInit=!0,c.addEventListener("dispose",M));const T=c.source;let h=y.get(T);void 0===h&&(h={},y.set(T,h));const E=function(x){const o=[];return o.push(x.wrapS),o.push(x.wrapT),o.push(x.wrapR||0),o.push(x.magFilter),o.push(x.minFilter),o.push(x.anisotropy),o.push(x.internalFormat),o.push(x.format),o.push(x.type),o.push(x.generateMipmaps),o.push(x.premultiplyAlpha),o.push(x.flipY),o.push(x.unpackAlignment),o.push(x.colorSpace),o.join()}(c);if(E!==o.__cacheKey){void 0===h[E]&&(h[E]={texture:x.createTexture(),usedTimes:0},A.memory.textures++,L=!0),h[E].usedTimes++;const T=h[o.__cacheKey];void 0!==T&&(h[o.__cacheKey].usedTimes--,0===T.usedTimes&&S(c)),o.__cacheKey=E,o.__webglTexture=h[E].texture}return L}function U(o,T,A){let H=x.TEXTURE_2D;(T.isDataArrayTexture||T.isCompressedArrayTexture)&&(H=x.TEXTURE_2D_ARRAY),T.isData3DTexture&&(H=x.TEXTURE_3D);const N=f(o,T),I=T.source;c.bindTexture(H,o.__webglTexture,x.TEXTURE0+A);const k=L.get(I);if(I.version!==k.__version||!0===N){c.activeTexture(x.TEXTURE0+A),x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,T.flipY),x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),x.pixelStorei(x.UNPACK_ALIGNMENT,T.unpackAlignment),x.pixelStorei(x.UNPACK_COLORSPACE_CONVERSION_WEBGL,x.NONE);const o=function(x){return!E&&(1001!==x.wrapS||1001!==x.wrapT||1003!==x.minFilter&&1006!==x.minFilter)}(T)&&!1===F(T.image);let L=Y(T.image,o,!1,Q);L=l(T,L);const _=F(L)||E,X=h.convert(T.format,T.colorSpace);let r,y=h.convert(T.type),v=C(T.internalFormat,X,y,T.colorSpace);q(H,T,_);const B=T.mipmaps,i=E&&!0!==T.isVideoTexture,M=void 0===k.__version||!0===N,Z=V(T,L,_);if(T.isDepthTexture)v=x.DEPTH_COMPONENT,E?v=1015===T.type?x.DEPTH_COMPONENT32F:1014===T.type?x.DEPTH_COMPONENT24:1020===T.type?x.DEPTH24_STENCIL8:x.DEPTH_COMPONENT16:1015===T.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===T.format&&v===x.DEPTH_COMPONENT&&1012!==T.type&&1014!==T.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),T.type=1014,y=h.convert(T.type)),1027===T.format&&v===x.DEPTH_COMPONENT&&(v=x.DEPTH_STENCIL,1020!==T.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),T.type=1020,y=h.convert(T.type))),M&&(i?c.texStorage2D(x.TEXTURE_2D,1,v,L.width,L.height):c.texImage2D(x.TEXTURE_2D,0,v,L.width,L.height,0,X,y,null));else if(T.isDataTexture)if(B.length>0&&_){i&&M&&c.texStorage2D(x.TEXTURE_2D,Z,v,B[0].width,B[0].height);for(let o=0,L=B.length;o<L;o++)r=B[o],i?c.texSubImage2D(x.TEXTURE_2D,o,0,0,r.width,r.height,X,y,r.data):c.texImage2D(x.TEXTURE_2D,o,v,r.width,r.height,0,X,y,r.data);T.generateMipmaps=!1}else i?(M&&c.texStorage2D(x.TEXTURE_2D,Z,v,L.width,L.height),c.texSubImage2D(x.TEXTURE_2D,0,0,0,L.width,L.height,X,y,L.data)):c.texImage2D(x.TEXTURE_2D,0,v,L.width,L.height,0,X,y,L.data);else if(T.isCompressedTexture)if(T.isCompressedArrayTexture){i&&M&&c.texStorage3D(x.TEXTURE_2D_ARRAY,Z,v,B[0].width,B[0].height,L.depth);for(let o=0,h=B.length;o<h;o++)r=B[o],1023!==T.format?null!==X?i?c.compressedTexSubImage3D(x.TEXTURE_2D_ARRAY,o,0,0,0,r.width,r.height,L.depth,X,r.data,0,0):c.compressedTexImage3D(x.TEXTURE_2D_ARRAY,o,v,r.width,r.height,L.depth,0,r.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i?c.texSubImage3D(x.TEXTURE_2D_ARRAY,o,0,0,0,r.width,r.height,L.depth,X,y,r.data):c.texImage3D(x.TEXTURE_2D_ARRAY,o,v,r.width,r.height,L.depth,0,X,y,r.data)}else{i&&M&&c.texStorage2D(x.TEXTURE_2D,Z,v,B[0].width,B[0].height);for(let o=0,L=B.length;o<L;o++)r=B[o],1023!==T.format?null!==X?i?c.compressedTexSubImage2D(x.TEXTURE_2D,o,0,0,r.width,r.height,X,r.data):c.compressedTexImage2D(x.TEXTURE_2D,o,v,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i?c.texSubImage2D(x.TEXTURE_2D,o,0,0,r.width,r.height,X,y,r.data):c.texImage2D(x.TEXTURE_2D,o,v,r.width,r.height,0,X,y,r.data)}else if(T.isDataArrayTexture)i?(M&&c.texStorage3D(x.TEXTURE_2D_ARRAY,Z,v,L.width,L.height,L.depth),c.texSubImage3D(x.TEXTURE_2D_ARRAY,0,0,0,0,L.width,L.height,L.depth,X,y,L.data)):c.texImage3D(x.TEXTURE_2D_ARRAY,0,v,L.width,L.height,L.depth,0,X,y,L.data);else if(T.isData3DTexture)i?(M&&c.texStorage3D(x.TEXTURE_3D,Z,v,L.width,L.height,L.depth),c.texSubImage3D(x.TEXTURE_3D,0,0,0,0,L.width,L.height,L.depth,X,y,L.data)):c.texImage3D(x.TEXTURE_3D,0,v,L.width,L.height,L.depth,0,X,y,L.data);else if(T.isFramebufferTexture){if(M)if(i)c.texStorage2D(x.TEXTURE_2D,Z,v,L.width,L.height);else{let o=L.width,T=L.height;for(let L=0;L<Z;L++)c.texImage2D(x.TEXTURE_2D,L,v,o,T,0,X,y,null),o>>=1,T>>=1}}else if(B.length>0&&_){i&&M&&c.texStorage2D(x.TEXTURE_2D,Z,v,B[0].width,B[0].height);for(let o=0,L=B.length;o<L;o++)r=B[o],i?c.texSubImage2D(x.TEXTURE_2D,o,0,0,X,y,r):c.texImage2D(x.TEXTURE_2D,o,v,X,y,r);T.generateMipmaps=!1}else i?(M&&c.texStorage2D(x.TEXTURE_2D,Z,v,L.width,L.height),c.texSubImage2D(x.TEXTURE_2D,0,0,0,X,y,L)):c.texImage2D(x.TEXTURE_2D,0,v,X,y,L);t(T,_)&&m(H),k.__version=I.version,T.onUpdate&&T.onUpdate(T)}o.__version=T.version}function s(o,T,A,E,H,N){const Q=h.convert(A.format,A.colorSpace),I=h.convert(A.type),_=C(A.internalFormat,Q,I,A.colorSpace);if(!L.get(T).__hasExternalTextures){const o=Math.max(1,T.width>>N),L=Math.max(1,T.height>>N);H===x.TEXTURE_3D||H===x.TEXTURE_2D_ARRAY?c.texImage3D(H,N,_,o,L,T.depth,0,Q,I,null):c.texImage2D(H,N,_,o,L,0,Q,I,null)}c.bindFramebuffer(x.FRAMEBUFFER,o),z(T)?k.framebufferTexture2DMultisampleEXT(x.FRAMEBUFFER,E,H,L.get(A).__webglTexture,0,a(T)):(H===x.TEXTURE_2D||H>=x.TEXTURE_CUBE_MAP_POSITIVE_X&&H<=x.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&x.framebufferTexture2D(x.FRAMEBUFFER,E,H,L.get(A).__webglTexture,N),c.bindFramebuffer(x.FRAMEBUFFER,null)}function D(o,c,L){if(x.bindRenderbuffer(x.RENDERBUFFER,o),c.depthBuffer&&!c.stencilBuffer){let T=x.DEPTH_COMPONENT16;if(L||z(c)){const o=c.depthTexture;o&&o.isDepthTexture&&(1015===o.type?T=x.DEPTH_COMPONENT32F:1014===o.type&&(T=x.DEPTH_COMPONENT24));const L=a(c);z(c)?k.renderbufferStorageMultisampleEXT(x.RENDERBUFFER,L,T,c.width,c.height):x.renderbufferStorageMultisample(x.RENDERBUFFER,L,T,c.width,c.height)}else x.renderbufferStorage(x.RENDERBUFFER,T,c.width,c.height);x.framebufferRenderbuffer(x.FRAMEBUFFER,x.DEPTH_ATTACHMENT,x.RENDERBUFFER,o)}else if(c.depthBuffer&&c.stencilBuffer){const T=a(c);L&&!1===z(c)?x.renderbufferStorageMultisample(x.RENDERBUFFER,T,x.DEPTH24_STENCIL8,c.width,c.height):z(c)?k.renderbufferStorageMultisampleEXT(x.RENDERBUFFER,T,x.DEPTH24_STENCIL8,c.width,c.height):x.renderbufferStorage(x.RENDERBUFFER,x.DEPTH_STENCIL,c.width,c.height),x.framebufferRenderbuffer(x.FRAMEBUFFER,x.DEPTH_STENCIL_ATTACHMENT,x.RENDERBUFFER,o)}else{const o=!0===c.isWebGLMultipleRenderTargets?c.texture:[c.texture];for(let T=0;T<o.length;T++){const A=o[T],E=h.convert(A.format,A.colorSpace),H=h.convert(A.type),N=C(A.internalFormat,E,H,A.colorSpace),Q=a(c);L&&!1===z(c)?x.renderbufferStorageMultisample(x.RENDERBUFFER,Q,N,c.width,c.height):z(c)?k.renderbufferStorageMultisampleEXT(x.RENDERBUFFER,Q,N,c.width,c.height):x.renderbufferStorage(x.RENDERBUFFER,N,c.width,c.height)}}x.bindRenderbuffer(x.RENDERBUFFER,null)}function $(o){const T=L.get(o),h=!0===o.isWebGLCubeRenderTarget;if(o.depthTexture&&!T.__autoAllocateDepthBuffer){if(h)throw new Error("target.depthTexture not supported in Cube render targets");!function(o,T){if(T&&T.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(c.bindFramebuffer(x.FRAMEBUFFER,o),!T.depthTexture||!T.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");L.get(T.depthTexture).__webglTexture&&T.depthTexture.image.width===T.width&&T.depthTexture.image.height===T.height||(T.depthTexture.image.width=T.width,T.depthTexture.image.height=T.height,T.depthTexture.needsUpdate=!0),d(T.depthTexture,0);const h=L.get(T.depthTexture).__webglTexture,A=a(T);if(1026===T.depthTexture.format)z(T)?k.framebufferTexture2DMultisampleEXT(x.FRAMEBUFFER,x.DEPTH_ATTACHMENT,x.TEXTURE_2D,h,0,A):x.framebufferTexture2D(x.FRAMEBUFFER,x.DEPTH_ATTACHMENT,x.TEXTURE_2D,h,0);else{if(1027!==T.depthTexture.format)throw new Error("Unknown depthTexture format");z(T)?k.framebufferTexture2DMultisampleEXT(x.FRAMEBUFFER,x.DEPTH_STENCIL_ATTACHMENT,x.TEXTURE_2D,h,0,A):x.framebufferTexture2D(x.FRAMEBUFFER,x.DEPTH_STENCIL_ATTACHMENT,x.TEXTURE_2D,h,0)}}(T.__webglFramebuffer,o)}else if(h){T.__webglDepthbuffer=[];for(let L=0;L<6;L++)c.bindFramebuffer(x.FRAMEBUFFER,T.__webglFramebuffer[L]),T.__webglDepthbuffer[L]=x.createRenderbuffer(),D(T.__webglDepthbuffer[L],o,!1)}else c.bindFramebuffer(x.FRAMEBUFFER,T.__webglFramebuffer),T.__webglDepthbuffer=x.createRenderbuffer(),D(T.__webglDepthbuffer,o,!1);c.bindFramebuffer(x.FRAMEBUFFER,null)}function a(x){return Math.min(I,x.samples)}function z(x){const c=L.get(x);return E&&x.samples>0&&!0===o.has("WEBGL_multisampled_render_to_texture")&&!1!==c.__useRenderToTexture}function l(x,c){const L=x.colorSpace,T=x.format,h=x.type;return!0===x.isCompressedTexture||1035===x.format||"srgb-linear"!==L&&""!==L&&("srgb"===L?!1===E?!0===o.has("EXT_sRGB")&&1023===T?(x.format=1035,x.minFilter=1006,x.generateMipmaps=!1):c=dH.sRGBToLinear(c):1023===T&&1009===h||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",L)),c}this.allocateTextureUnit=function(){const x=u;return x>=H&&console.warn("THREE.WebGLTextures: Trying to use "+x+" texture units while this GPU supports only "+H),u+=1,x},this.resetTextureUnits=function(){u=0},this.setTexture2D=d,this.setTexture2DArray=function(o,T){const h=L.get(o);o.version>0&&h.__version!==o.version?U(h,o,T):c.bindTexture(x.TEXTURE_2D_ARRAY,h.__webglTexture,x.TEXTURE0+T)},this.setTexture3D=function(o,T){const h=L.get(o);o.version>0&&h.__version!==o.version?U(h,o,T):c.bindTexture(x.TEXTURE_3D,h.__webglTexture,x.TEXTURE0+T)},this.setTextureCube=function(o,T){const A=L.get(o);o.version>0&&A.__version!==o.version?function(o,T,A){if(6!==T.image.length)return;const H=f(o,T),Q=T.source;c.bindTexture(x.TEXTURE_CUBE_MAP,o.__webglTexture,x.TEXTURE0+A);const I=L.get(Q);if(Q.version!==I.__version||!0===H){c.activeTexture(x.TEXTURE0+A),x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,T.flipY),x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),x.pixelStorei(x.UNPACK_ALIGNMENT,T.unpackAlignment),x.pixelStorei(x.UNPACK_COLORSPACE_CONVERSION_WEBGL,x.NONE);const o=T.isCompressedTexture||T.image[0].isCompressedTexture,L=T.image[0]&&T.image[0].isDataTexture,k=[];for(let x=0;x<6;x++)k[x]=o||L?L?T.image[x].image:T.image[x]:Y(T.image[x],!1,!0,N),k[x]=l(T,k[x]);const _=k[0],X=F(_)||E,r=h.convert(T.format,T.colorSpace),y=h.convert(T.type),v=C(T.internalFormat,r,y,T.colorSpace),B=E&&!0!==T.isVideoTexture,i=void 0===I.__version||!0===H;let M,Z=V(T,_,X);if(q(x.TEXTURE_CUBE_MAP,T,X),o){B&&i&&c.texStorage2D(x.TEXTURE_CUBE_MAP,Z,v,_.width,_.height);for(let o=0;o<6;o++){M=k[o].mipmaps;for(let L=0;L<M.length;L++){const h=M[L];1023!==T.format?null!==r?B?c.compressedTexSubImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+o,L,0,0,h.width,h.height,r,h.data):c.compressedTexImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+o,L,v,h.width,h.height,0,h.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):B?c.texSubImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+o,L,0,0,h.width,h.height,r,y,h.data):c.texImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+o,L,v,h.width,h.height,0,r,y,h.data)}}}else{M=T.mipmaps,B&&i&&(M.length>0&&Z++,c.texStorage2D(x.TEXTURE_CUBE_MAP,Z,v,k[0].width,k[0].height));for(let o=0;o<6;o++)if(L){B?c.texSubImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,0,0,k[o].width,k[o].height,r,y,k[o].data):c.texImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,v,k[o].width,k[o].height,0,r,y,k[o].data);for(let L=0;L<M.length;L++){const T=M[L].image[o].image;B?c.texSubImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+o,L+1,0,0,T.width,T.height,r,y,T.data):c.texImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+o,L+1,v,T.width,T.height,0,r,y,T.data)}}else{B?c.texSubImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,0,0,r,y,k[o]):c.texImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,v,r,y,k[o]);for(let L=0;L<M.length;L++){const T=M[L];B?c.texSubImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+o,L+1,0,0,r,y,T.image[o]):c.texImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+o,L+1,v,r,y,T.image[o])}}}t(T,X)&&m(x.TEXTURE_CUBE_MAP),I.__version=Q.version,T.onUpdate&&T.onUpdate(T)}o.__version=T.version}(A,o,T):c.bindTexture(x.TEXTURE_CUBE_MAP,A.__webglTexture,x.TEXTURE0+T)},this.rebindTextures=function(o,c,T){const h=L.get(o);void 0!==c&&s(h.__webglFramebuffer,o,o.texture,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,0),void 0!==T&&$(o)},this.setupRenderTarget=function(o){const H=o.texture,N=L.get(o),Q=L.get(H);o.addEventListener("dispose",Z),!0!==o.isWebGLMultipleRenderTargets&&(void 0===Q.__webglTexture&&(Q.__webglTexture=x.createTexture()),Q.__version=H.version,A.memory.textures++);const I=!0===o.isWebGLCubeRenderTarget,k=!0===o.isWebGLMultipleRenderTargets,_=F(o)||E;if(I){N.__webglFramebuffer=[];for(let o=0;o<6;o++)if(E&&H.mipmaps&&H.mipmaps.length>0){N.__webglFramebuffer[o]=[];for(let c=0;c<H.mipmaps.length;c++)N.__webglFramebuffer[o][c]=x.createFramebuffer()}else N.__webglFramebuffer[o]=x.createFramebuffer()}else{if(E&&H.mipmaps&&H.mipmaps.length>0){N.__webglFramebuffer=[];for(let o=0;o<H.mipmaps.length;o++)N.__webglFramebuffer[o]=x.createFramebuffer()}else N.__webglFramebuffer=x.createFramebuffer();if(k)if(T.drawBuffers){const c=o.texture;for(let o=0,T=c.length;o<T;o++){const T=L.get(c[o]);void 0===T.__webglTexture&&(T.__webglTexture=x.createTexture(),A.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(E&&o.samples>0&&!1===z(o)){const L=k?H:[H];N.__webglMultisampledFramebuffer=x.createFramebuffer(),N.__webglColorRenderbuffer=[],c.bindFramebuffer(x.FRAMEBUFFER,N.__webglMultisampledFramebuffer);for(let c=0;c<L.length;c++){const T=L[c];N.__webglColorRenderbuffer[c]=x.createRenderbuffer(),x.bindRenderbuffer(x.RENDERBUFFER,N.__webglColorRenderbuffer[c]);const A=h.convert(T.format,T.colorSpace),E=h.convert(T.type),H=C(T.internalFormat,A,E,T.colorSpace,!0===o.isXRRenderTarget),Q=a(o);x.renderbufferStorageMultisample(x.RENDERBUFFER,Q,H,o.width,o.height),x.framebufferRenderbuffer(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0+c,x.RENDERBUFFER,N.__webglColorRenderbuffer[c])}x.bindRenderbuffer(x.RENDERBUFFER,null),o.depthBuffer&&(N.__webglDepthRenderbuffer=x.createRenderbuffer(),D(N.__webglDepthRenderbuffer,o,!0)),c.bindFramebuffer(x.FRAMEBUFFER,null)}}if(I){c.bindTexture(x.TEXTURE_CUBE_MAP,Q.__webglTexture),q(x.TEXTURE_CUBE_MAP,H,_);for(let c=0;c<6;c++)if(E&&H.mipmaps&&H.mipmaps.length>0)for(let L=0;L<H.mipmaps.length;L++)s(N.__webglFramebuffer[c][L],o,H,x.COLOR_ATTACHMENT0,x.TEXTURE_CUBE_MAP_POSITIVE_X+c,L);else s(N.__webglFramebuffer[c],o,H,x.COLOR_ATTACHMENT0,x.TEXTURE_CUBE_MAP_POSITIVE_X+c,0);t(H,_)&&m(x.TEXTURE_CUBE_MAP),c.unbindTexture()}else if(k){const T=o.texture;for(let h=0,A=T.length;h<A;h++){const A=T[h],E=L.get(A);c.bindTexture(x.TEXTURE_2D,E.__webglTexture),q(x.TEXTURE_2D,A,_),s(N.__webglFramebuffer,o,A,x.COLOR_ATTACHMENT0+h,x.TEXTURE_2D,0),t(A,_)&&m(x.TEXTURE_2D)}c.unbindTexture()}else{let L=x.TEXTURE_2D;if((o.isWebGL3DRenderTarget||o.isWebGLArrayRenderTarget)&&(E?L=o.isWebGL3DRenderTarget?x.TEXTURE_3D:x.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),c.bindTexture(L,Q.__webglTexture),q(L,H,_),E&&H.mipmaps&&H.mipmaps.length>0)for(let c=0;c<H.mipmaps.length;c++)s(N.__webglFramebuffer[c],o,H,x.COLOR_ATTACHMENT0,L,c);else s(N.__webglFramebuffer,o,H,x.COLOR_ATTACHMENT0,L,0);t(H,_)&&m(L),c.unbindTexture()}o.depthBuffer&&$(o)},this.updateRenderTargetMipmap=function(o){const T=F(o)||E,h=!0===o.isWebGLMultipleRenderTargets?o.texture:[o.texture];for(let A=0,E=h.length;A<E;A++){const E=h[A];if(t(E,T)){const T=o.isWebGLCubeRenderTarget?x.TEXTURE_CUBE_MAP:x.TEXTURE_2D,h=L.get(E).__webglTexture;c.bindTexture(T,h),m(T),c.unbindTexture()}}},this.updateMultisampleRenderTarget=function(o){if(E&&o.samples>0&&!1===z(o)){const T=o.isWebGLMultipleRenderTargets?o.texture:[o.texture],h=o.width,A=o.height;let E=x.COLOR_BUFFER_BIT;const H=[],N=o.stencilBuffer?x.DEPTH_STENCIL_ATTACHMENT:x.DEPTH_ATTACHMENT,Q=L.get(o),I=!0===o.isWebGLMultipleRenderTargets;if(I)for(let o=0;o<T.length;o++)c.bindFramebuffer(x.FRAMEBUFFER,Q.__webglMultisampledFramebuffer),x.framebufferRenderbuffer(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0+o,x.RENDERBUFFER,null),c.bindFramebuffer(x.FRAMEBUFFER,Q.__webglFramebuffer),x.framebufferTexture2D(x.DRAW_FRAMEBUFFER,x.COLOR_ATTACHMENT0+o,x.TEXTURE_2D,null,0);c.bindFramebuffer(x.READ_FRAMEBUFFER,Q.__webglMultisampledFramebuffer),c.bindFramebuffer(x.DRAW_FRAMEBUFFER,Q.__webglFramebuffer);for(let c=0;c<T.length;c++){H.push(x.COLOR_ATTACHMENT0+c),o.depthBuffer&&H.push(N);const k=void 0!==Q.__ignoreDepthValues&&Q.__ignoreDepthValues;if(!1===k&&(o.depthBuffer&&(E|=x.DEPTH_BUFFER_BIT),o.stencilBuffer&&(E|=x.STENCIL_BUFFER_BIT)),I&&x.framebufferRenderbuffer(x.READ_FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.RENDERBUFFER,Q.__webglColorRenderbuffer[c]),!0===k&&(x.invalidateFramebuffer(x.READ_FRAMEBUFFER,[N]),x.invalidateFramebuffer(x.DRAW_FRAMEBUFFER,[N])),I){const o=L.get(T[c]).__webglTexture;x.framebufferTexture2D(x.DRAW_FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,o,0)}x.blitFramebuffer(0,0,h,A,0,0,h,A,E,x.NEAREST),_&&x.invalidateFramebuffer(x.READ_FRAMEBUFFER,H)}if(c.bindFramebuffer(x.READ_FRAMEBUFFER,null),c.bindFramebuffer(x.DRAW_FRAMEBUFFER,null),I)for(let o=0;o<T.length;o++){c.bindFramebuffer(x.FRAMEBUFFER,Q.__webglMultisampledFramebuffer),x.framebufferRenderbuffer(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0+o,x.RENDERBUFFER,Q.__webglColorRenderbuffer[o]);const h=L.get(T[o]).__webglTexture;c.bindFramebuffer(x.FRAMEBUFFER,Q.__webglFramebuffer),x.framebufferTexture2D(x.DRAW_FRAMEBUFFER,x.COLOR_ATTACHMENT0+o,x.TEXTURE_2D,h,0)}c.bindFramebuffer(x.DRAW_FRAMEBUFFER,Q.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=$,this.setupFrameBufferTexture=s,this.useMultisampledRTT=z}function S_(x,o,c){const L=c.isWebGL2;return{convert:function(c,T=""){let h;if(1009===c)return x.UNSIGNED_BYTE;if(1017===c)return x.UNSIGNED_SHORT_4_4_4_4;if(1018===c)return x.UNSIGNED_SHORT_5_5_5_1;if(1010===c)return x.BYTE;if(1011===c)return x.SHORT;if(1012===c)return x.UNSIGNED_SHORT;if(1013===c)return x.INT;if(1014===c)return x.UNSIGNED_INT;if(1015===c)return x.FLOAT;if(1016===c)return L?x.HALF_FLOAT:(h=o.get("OES_texture_half_float"),null!==h?h.HALF_FLOAT_OES:null);if(1021===c)return x.ALPHA;if(1023===c)return x.RGBA;if(1024===c)return x.LUMINANCE;if(1025===c)return x.LUMINANCE_ALPHA;if(1026===c)return x.DEPTH_COMPONENT;if(1027===c)return x.DEPTH_STENCIL;if(1035===c)return h=o.get("EXT_sRGB"),null!==h?h.SRGB_ALPHA_EXT:null;if(1028===c)return x.RED;if(1029===c)return x.RED_INTEGER;if(1030===c)return x.RG;if(1031===c)return x.RG_INTEGER;if(1033===c)return x.RGBA_INTEGER;if(33776===c||33777===c||33778===c||33779===c)if("srgb"===T){if(h=o.get("WEBGL_compressed_texture_s3tc_srgb"),null===h)return null;if(33776===c)return h.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===c)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===c)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===c)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(h=o.get("WEBGL_compressed_texture_s3tc"),null===h)return null;if(33776===c)return h.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===c)return h.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===c)return h.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===c)return h.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===c||35841===c||35842===c||35843===c){if(h=o.get("WEBGL_compressed_texture_pvrtc"),null===h)return null;if(35840===c)return h.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===c)return h.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===c)return h.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===c)return h.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===c)return h=o.get("WEBGL_compressed_texture_etc1"),null!==h?h.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===c||37496===c){if(h=o.get("WEBGL_compressed_texture_etc"),null===h)return null;if(37492===c)return"srgb"===T?h.COMPRESSED_SRGB8_ETC2:h.COMPRESSED_RGB8_ETC2;if(37496===c)return"srgb"===T?h.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:h.COMPRESSED_RGBA8_ETC2_EAC}if(37808===c||37809===c||37810===c||37811===c||37812===c||37813===c||37814===c||37815===c||37816===c||37817===c||37818===c||37819===c||37820===c||37821===c){if(h=o.get("WEBGL_compressed_texture_astc"),null===h)return null;if(37808===c)return"srgb"===T?h.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:h.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===c)return"srgb"===T?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:h.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===c)return"srgb"===T?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:h.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===c)return"srgb"===T?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:h.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===c)return"srgb"===T?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:h.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===c)return"srgb"===T?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:h.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===c)return"srgb"===T?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:h.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===c)return"srgb"===T?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:h.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===c)return"srgb"===T?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:h.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===c)return"srgb"===T?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:h.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===c)return"srgb"===T?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:h.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===c)return"srgb"===T?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:h.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===c)return"srgb"===T?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:h.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===c)return"srgb"===T?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:h.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===c){if(h=o.get("EXT_texture_compression_bptc"),null===h)return null;if(36492===c)return"srgb"===T?h.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:h.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===c||36284===c||36285===c||36286===c){if(h=o.get("EXT_texture_compression_rgtc"),null===h)return null;if(36492===c)return h.COMPRESSED_RED_RGTC1_EXT;if(36284===c)return h.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===c)return h.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===c)return h.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return 1020===c?L?x.UNSIGNED_INT_24_8:(h=o.get("WEBGL_depth_texture"),null!==h?h.UNSIGNED_INT_24_8_WEBGL:null):void 0!==x[c]?x[c]:null}}}class u_ extends bQ{constructor(x=[]){super(),this.isArrayCamera=!0,this.cameras=x}}class d_ extends zN{constructor(){super(),this.isGroup=!0,this.type="Group"}}const O_={type:"move"};class j_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new d_,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new d_,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new zH,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new zH),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new d_,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new zH,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new zH),this._grip}dispatchEvent(x){return null!==this._targetRay&&this._targetRay.dispatchEvent(x),null!==this._grip&&this._grip.dispatchEvent(x),null!==this._hand&&this._hand.dispatchEvent(x),this}connect(x){if(x&&x.hand){const o=this._hand;if(o)for(const c of x.hand.values())this._getHandJoint(o,c)}return this.dispatchEvent({type:"connected",data:x}),this}disconnect(x){return this.dispatchEvent({type:"disconnected",data:x}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(x,o,c){let L=null,T=null,h=null;const A=this._targetRay,E=this._grip,H=this._hand;if(x&&"visible-blurred"!==o.session.visibilityState){if(H&&x.hand){h=!0;for(const L of x.hand.values()){const x=o.getJointPose(L,c),T=this._getHandJoint(H,L);null!==x&&(T.matrix.fromArray(x.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.matrixWorldNeedsUpdate=!0,T.jointRadius=x.radius),T.visible=null!==x}const L=H.joints["index-finger-tip"],T=H.joints["thumb-tip"],A=L.position.distanceTo(T.position),E=.02,N=.005;H.inputState.pinching&&A>E+N?(H.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:x.handedness,target:this})):!H.inputState.pinching&&A<=E-N&&(H.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:x.handedness,target:this}))}else null!==E&&x.gripSpace&&(T=o.getPose(x.gripSpace,c),null!==T&&(E.matrix.fromArray(T.transform.matrix),E.matrix.decompose(E.position,E.rotation,E.scale),E.matrixWorldNeedsUpdate=!0,T.linearVelocity?(E.hasLinearVelocity=!0,E.linearVelocity.copy(T.linearVelocity)):E.hasLinearVelocity=!1,T.angularVelocity?(E.hasAngularVelocity=!0,E.angularVelocity.copy(T.angularVelocity)):E.hasAngularVelocity=!1));null!==A&&(L=o.getPose(x.targetRaySpace,c),null===L&&null!==T&&(L=T),null!==L&&(A.matrix.fromArray(L.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.matrixWorldNeedsUpdate=!0,L.linearVelocity?(A.hasLinearVelocity=!0,A.linearVelocity.copy(L.linearVelocity)):A.hasLinearVelocity=!1,L.angularVelocity?(A.hasAngularVelocity=!0,A.angularVelocity.copy(L.angularVelocity)):A.hasAngularVelocity=!1,this.dispatchEvent(O_)))}return null!==A&&(A.visible=null!==L),null!==E&&(E.visible=null!==T),null!==H&&(H.visible=null!==h),this}_getHandJoint(x,o){if(void 0===x.joints[o.jointName]){const c=new d_;c.matrixAutoUpdate=!1,c.visible=!1,x.joints[o.jointName]=c,x.add(c)}return x.joints[o.jointName]}}class e_ extends fH{constructor(x,o,c,L,T,h,A,E,H,N){if(1026!==(N=void 0!==N?N:1026)&&1027!==N)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===c&&1026===N&&(c=1014),void 0===c&&1027===N&&(c=1020),super(null,L,T,h,A,E,N,c,H),this.isDepthTexture=!0,this.image={width:x,height:o},this.magFilter=void 0!==A?A:1003,this.minFilter=void 0!==E?E:1003,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(x){return super.copy(x),this.compareFunction=x.compareFunction,this}toJSON(x){const o=super.toJSON(x);return null!==this.compareFunction&&(o.compareFunction=this.compareFunction),o}}class q_ extends TH{constructor(x,o){super();const c=this;let L=null,T=1,h=null,A="local-floor",E=1,H=null,N=null,Q=null,I=null,k=null,_=null;const X=o.getContextAttributes();let r=null,y=null;const v=[],B=[],Y=new bQ;Y.layers.enable(1),Y.viewport=new UH;const F=new bQ;F.layers.enable(2),F.viewport=new UH;const t=[Y,F],m=new u_;m.layers.enable(1),m.layers.enable(2);let C=null,V=null;function i(x){const o=B.indexOf(x.inputSource);if(-1===o)return;const c=v[o];void 0!==c&&(c.update(x.inputSource,x.frame,H||h),c.dispatchEvent({type:x.type,data:x.inputSource}))}function M(){L.removeEventListener("select",i),L.removeEventListener("selectstart",i),L.removeEventListener("selectend",i),L.removeEventListener("squeeze",i),L.removeEventListener("squeezestart",i),L.removeEventListener("squeezeend",i),L.removeEventListener("end",M),L.removeEventListener("inputsourceschange",Z);for(let x=0;x<v.length;x++){const o=B[x];null!==o&&(B[x]=null,v[x].disconnect(o))}C=null,V=null,x.setRenderTarget(r),k=null,I=null,Q=null,L=null,y=null,j.stop(),c.isPresenting=!1,c.dispatchEvent({type:"sessionend"})}function Z(x){for(let o=0;o<x.removed.length;o++){const c=x.removed[o],L=B.indexOf(c);L>=0&&(B[L]=null,v[L].disconnect(c))}for(let o=0;o<x.added.length;o++){const c=x.added[o];let L=B.indexOf(c);if(-1===L){for(let x=0;x<v.length;x++){if(x>=B.length){B.push(c),L=x;break}if(null===B[x]){B[x]=c,L=x;break}}if(-1===L)break}const T=v[L];T&&T.connect(c)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(x){let o=v[x];return void 0===o&&(o=new j_,v[x]=o),o.getTargetRaySpace()},this.getControllerGrip=function(x){let o=v[x];return void 0===o&&(o=new j_,v[x]=o),o.getGripSpace()},this.getHand=function(x){let o=v[x];return void 0===o&&(o=new j_,v[x]=o),o.getHandSpace()},this.setFramebufferScaleFactor=function(x){T=x,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(x){A=x,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return H||h},this.setReferenceSpace=function(x){H=x},this.getBaseLayer=function(){return null!==I?I:k},this.getBinding=function(){return Q},this.getFrame=function(){return _},this.getSession=function(){return L},this.setSession=async function(N){if(L=N,null!==L){if(r=x.getRenderTarget(),L.addEventListener("select",i),L.addEventListener("selectstart",i),L.addEventListener("selectend",i),L.addEventListener("squeeze",i),L.addEventListener("squeezestart",i),L.addEventListener("squeezeend",i),L.addEventListener("end",M),L.addEventListener("inputsourceschange",Z),!0!==X.xrCompatible&&await o.makeXRCompatible(),void 0===L.renderState.layers||!1===x.capabilities.isWebGL2){const c={antialias:void 0!==L.renderState.layers||X.antialias,alpha:!0,depth:X.depth,stencil:X.stencil,framebufferScaleFactor:T};k=new XRWebGLLayer(L,o,c),L.updateRenderState({baseLayer:k}),y=new DH(k.framebufferWidth,k.framebufferHeight,{format:1023,type:1009,colorSpace:x.outputColorSpace,stencilBuffer:X.stencil})}else{let c=null,h=null,A=null;X.depth&&(A=X.stencil?o.DEPTH24_STENCIL8:o.DEPTH_COMPONENT24,c=X.stencil?1027:1026,h=X.stencil?1020:1014);const E={colorFormat:o.RGBA8,depthFormat:A,scaleFactor:T};Q=new XRWebGLBinding(L,o),I=Q.createProjectionLayer(E),L.updateRenderState({layers:[I]}),y=new DH(I.textureWidth,I.textureHeight,{format:1023,type:1009,depthTexture:new e_(I.textureWidth,I.textureHeight,h,void 0,void 0,void 0,void 0,void 0,void 0,c),stencilBuffer:X.stencil,colorSpace:x.outputColorSpace,samples:X.antialias?4:0}),x.properties.get(y).__ignoreDepthValues=I.ignoreDepthValues}y.isXRRenderTarget=!0,this.setFoveation(E),H=null,h=await L.requestReferenceSpace(A),j.setContext(L),j.start(),c.isPresenting=!0,c.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==L)return L.environmentBlendMode};const S=new zH,u=new zH;function d(x,o){null===o?x.matrixWorld.copy(x.matrix):x.matrixWorld.multiplyMatrices(o.matrixWorld,x.matrix),x.matrixWorldInverse.copy(x.matrixWorld).invert()}this.updateCamera=function(x){if(null===L)return;m.near=F.near=Y.near=x.near,m.far=F.far=Y.far=x.far,C===m.near&&V===m.far||(L.updateRenderState({depthNear:m.near,depthFar:m.far}),C=m.near,V=m.far);const o=x.parent,c=m.cameras;d(m,o);for(let x=0;x<c.length;x++)d(c[x],o);2===c.length?function(x,o,c){S.setFromMatrixPosition(o.matrixWorld),u.setFromMatrixPosition(c.matrixWorld);const L=S.distanceTo(u),T=o.projectionMatrix.elements,h=c.projectionMatrix.elements,A=T[14]/(T[10]-1),E=T[14]/(T[10]+1),H=(T[9]+1)/T[5],N=(T[9]-1)/T[5],Q=(T[8]-1)/T[0],I=(h[8]+1)/h[0],k=A*Q,_=A*I,X=L/(-Q+I),r=X*-Q;o.matrixWorld.decompose(x.position,x.quaternion,x.scale),x.translateX(r),x.translateZ(X),x.matrixWorld.compose(x.position,x.quaternion,x.scale),x.matrixWorldInverse.copy(x.matrixWorld).invert();const y=A+X,v=E+X,B=k-r,Y=_+(L-r),F=H*E/v*y,t=N*E/v*y;x.projectionMatrix.makePerspective(B,Y,F,t,y,v),x.projectionMatrixInverse.copy(x.projectionMatrix).invert()}(m,Y,F):m.projectionMatrix.copy(Y.projectionMatrix),function(x,o,c){null===c?x.matrix.copy(o.matrixWorld):(x.matrix.copy(c.matrixWorld),x.matrix.invert(),x.matrix.multiply(o.matrixWorld)),x.matrix.decompose(x.position,x.quaternion,x.scale),x.updateMatrixWorld(!0);const L=x.children;for(let x=0,o=L.length;x<o;x++)L[x].updateMatrixWorld(!0);x.projectionMatrix.copy(o.projectionMatrix),x.projectionMatrixInverse.copy(o.projectionMatrixInverse),x.isPerspectiveCamera&&(x.fov=2*EH*Math.atan(1/x.projectionMatrix.elements[5]),x.zoom=1)}(x,m,o)},this.getCamera=function(){return m},this.getFoveation=function(){if(null!==I||null!==k)return E},this.setFoveation=function(x){E=x,null!==I&&(I.fixedFoveation=x),null!==k&&void 0!==k.fixedFoveation&&(k.fixedFoveation=x)};let O=null;const j=new AI;j.setAnimationLoop((function(o,L){if(N=L.getViewerPose(H||h),_=L,null!==N){const o=N.views;null!==k&&(x.setRenderTargetFramebuffer(y,k.framebuffer),x.setRenderTarget(y));let c=!1;o.length!==m.cameras.length&&(m.cameras.length=0,c=!0);for(let L=0;L<o.length;L++){const T=o[L];let h=null;if(null!==k)h=k.getViewport(T);else{const o=Q.getViewSubImage(I,T);h=o.viewport,0===L&&(x.setRenderTargetTextures(y,o.colorTexture,I.ignoreDepthValues?void 0:o.depthStencilTexture),x.setRenderTarget(y))}let A=t[L];void 0===A&&(A=new bQ,A.layers.enable(L),A.viewport=new UH,t[L]=A),A.matrix.fromArray(T.transform.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale),A.projectionMatrix.fromArray(T.projectionMatrix),A.projectionMatrixInverse.copy(A.projectionMatrix).invert(),A.viewport.set(h.x,h.y,h.width,h.height),0===L&&(m.matrix.copy(A.matrix),m.matrix.decompose(m.position,m.quaternion,m.scale)),!0===c&&m.cameras.push(A)}}for(let x=0;x<v.length;x++){const o=B[x],c=v[x];null!==o&&void 0!==c&&c.update(o,L,H||h)}O&&O(o,L),L.detectedPlanes&&c.dispatchEvent({type:"planesdetected",data:L}),_=null})),this.setAnimationLoop=function(x){O=x},this.dispose=function(){}}}function f_(x,o){function c(x,o){!0===x.matrixAutoUpdate&&x.updateMatrix(),o.value.copy(x.matrix)}function L(L,T){L.opacity.value=T.opacity,T.color&&L.diffuse.value.copy(T.color),T.emissive&&L.emissive.value.copy(T.emissive).multiplyScalar(T.emissiveIntensity),T.map&&(L.map.value=T.map,c(T.map,L.mapTransform)),T.alphaMap&&(L.alphaMap.value=T.alphaMap,c(T.alphaMap,L.alphaMapTransform)),T.bumpMap&&(L.bumpMap.value=T.bumpMap,c(T.bumpMap,L.bumpMapTransform),L.bumpScale.value=T.bumpScale,1===T.side&&(L.bumpScale.value*=-1)),T.normalMap&&(L.normalMap.value=T.normalMap,c(T.normalMap,L.normalMapTransform),L.normalScale.value.copy(T.normalScale),1===T.side&&L.normalScale.value.negate()),T.displacementMap&&(L.displacementMap.value=T.displacementMap,c(T.displacementMap,L.displacementMapTransform),L.displacementScale.value=T.displacementScale,L.displacementBias.value=T.displacementBias),T.emissiveMap&&(L.emissiveMap.value=T.emissiveMap,c(T.emissiveMap,L.emissiveMapTransform)),T.specularMap&&(L.specularMap.value=T.specularMap,c(T.specularMap,L.specularMapTransform)),T.alphaTest>0&&(L.alphaTest.value=T.alphaTest);const h=o.get(T).envMap;if(h&&(L.envMap.value=h,L.flipEnvMap.value=h.isCubeTexture&&!1===h.isRenderTargetTexture?-1:1,L.reflectivity.value=T.reflectivity,L.ior.value=T.ior,L.refractionRatio.value=T.refractionRatio),T.lightMap){L.lightMap.value=T.lightMap;const o=!0===x._useLegacyLights?Math.PI:1;L.lightMapIntensity.value=T.lightMapIntensity*o,c(T.lightMap,L.lightMapTransform)}T.aoMap&&(L.aoMap.value=T.aoMap,L.aoMapIntensity.value=T.aoMapIntensity,c(T.aoMap,L.aoMapTransform))}return{refreshFogUniforms:function(o,c){c.color.getRGB(o.fogColor.value,PQ(x)),c.isFog?(o.fogNear.value=c.near,o.fogFar.value=c.far):c.isFogExp2&&(o.fogDensity.value=c.density)},refreshMaterialUniforms:function(x,T,h,A,E){T.isMeshBasicMaterial||T.isMeshLambertMaterial?L(x,T):T.isMeshToonMaterial?(L(x,T),function(x,o){o.gradientMap&&(x.gradientMap.value=o.gradientMap)}(x,T)):T.isMeshPhongMaterial?(L(x,T),function(x,o){x.specular.value.copy(o.specular),x.shininess.value=Math.max(o.shininess,1e-4)}(x,T)):T.isMeshStandardMaterial?(L(x,T),function(x,L){x.metalness.value=L.metalness,L.metalnessMap&&(x.metalnessMap.value=L.metalnessMap,c(L.metalnessMap,x.metalnessMapTransform)),x.roughness.value=L.roughness,L.roughnessMap&&(x.roughnessMap.value=L.roughnessMap,c(L.roughnessMap,x.roughnessMapTransform)),o.get(L).envMap&&(x.envMapIntensity.value=L.envMapIntensity)}(x,T),T.isMeshPhysicalMaterial&&function(x,o,L){x.ior.value=o.ior,o.sheen>0&&(x.sheenColor.value.copy(o.sheenColor).multiplyScalar(o.sheen),x.sheenRoughness.value=o.sheenRoughness,o.sheenColorMap&&(x.sheenColorMap.value=o.sheenColorMap,c(o.sheenColorMap,x.sheenColorMapTransform)),o.sheenRoughnessMap&&(x.sheenRoughnessMap.value=o.sheenRoughnessMap,c(o.sheenRoughnessMap,x.sheenRoughnessMapTransform))),o.clearcoat>0&&(x.clearcoat.value=o.clearcoat,x.clearcoatRoughness.value=o.clearcoatRoughness,o.clearcoatMap&&(x.clearcoatMap.value=o.clearcoatMap,c(o.clearcoatMap,x.clearcoatMapTransform)),o.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=o.clearcoatRoughnessMap,c(o.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),o.clearcoatNormalMap&&(x.clearcoatNormalMap.value=o.clearcoatNormalMap,c(o.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(o.clearcoatNormalScale),1===o.side&&x.clearcoatNormalScale.value.negate())),o.iridescence>0&&(x.iridescence.value=o.iridescence,x.iridescenceIOR.value=o.iridescenceIOR,x.iridescenceThicknessMinimum.value=o.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=o.iridescenceThicknessRange[1],o.iridescenceMap&&(x.iridescenceMap.value=o.iridescenceMap,c(o.iridescenceMap,x.iridescenceMapTransform)),o.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=o.iridescenceThicknessMap,c(o.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),o.transmission>0&&(x.transmission.value=o.transmission,x.transmissionSamplerMap.value=L.texture,x.transmissionSamplerSize.value.set(L.width,L.height),o.transmissionMap&&(x.transmissionMap.value=o.transmissionMap,c(o.transmissionMap,x.transmissionMapTransform)),x.thickness.value=o.thickness,o.thicknessMap&&(x.thicknessMap.value=o.thicknessMap,c(o.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=o.attenuationDistance,x.attenuationColor.value.copy(o.attenuationColor)),o.anisotropy>0&&(x.anisotropyVector.value.set(o.anisotropy*Math.cos(o.anisotropyRotation),o.anisotropy*Math.sin(o.anisotropyRotation)),o.anisotropyMap&&(x.anisotropyMap.value=o.anisotropyMap,c(o.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=o.specularIntensity,x.specularColor.value.copy(o.specularColor),o.specularColorMap&&(x.specularColorMap.value=o.specularColorMap,c(o.specularColorMap,x.specularColorMapTransform)),o.specularIntensityMap&&(x.specularIntensityMap.value=o.specularIntensityMap,c(o.specularIntensityMap,x.specularIntensityMapTransform))}(x,T,E)):T.isMeshMatcapMaterial?(L(x,T),function(x,o){o.matcap&&(x.matcap.value=o.matcap)}(x,T)):T.isMeshDepthMaterial?L(x,T):T.isMeshDistanceMaterial?(L(x,T),function(x,c){const L=o.get(c).light;x.referencePosition.value.setFromMatrixPosition(L.matrixWorld),x.nearDistance.value=L.shadow.camera.near,x.farDistance.value=L.shadow.camera.far}(x,T)):T.isMeshNormalMaterial?L(x,T):T.isLineBasicMaterial?(function(x,o){x.diffuse.value.copy(o.color),x.opacity.value=o.opacity,o.map&&(x.map.value=o.map,c(o.map,x.mapTransform))}(x,T),T.isLineDashedMaterial&&function(x,o){x.dashSize.value=o.dashSize,x.totalSize.value=o.dashSize+o.gapSize,x.scale.value=o.scale}(x,T)):T.isPointsMaterial?function(x,o,L,T){x.diffuse.value.copy(o.color),x.opacity.value=o.opacity,x.size.value=o.size*L,x.scale.value=.5*T,o.map&&(x.map.value=o.map,c(o.map,x.uvTransform)),o.alphaMap&&(x.alphaMap.value=o.alphaMap,c(o.alphaMap,x.alphaMapTransform)),o.alphaTest>0&&(x.alphaTest.value=o.alphaTest)}(x,T,h,A):T.isSpriteMaterial?function(x,o){x.diffuse.value.copy(o.color),x.opacity.value=o.opacity,x.rotation.value=o.rotation,o.map&&(x.map.value=o.map,c(o.map,x.mapTransform)),o.alphaMap&&(x.alphaMap.value=o.alphaMap,c(o.alphaMap,x.alphaMapTransform)),o.alphaTest>0&&(x.alphaTest.value=o.alphaTest)}(x,T):T.isShadowMaterial?(x.color.value.copy(T.color),x.opacity.value=T.opacity):T.isShaderMaterial&&(T.uniformsNeedUpdate=!1)}}}function U_(x,o,c,L){let T={},h={},A=[];const E=c.isWebGL2?x.getParameter(x.MAX_UNIFORM_BUFFER_BINDINGS):0;function H(x,o,c){const L=x.value;if(void 0===c[o]){if("number"==typeof L)c[o]=L;else{const x=Array.isArray(L)?L:[L],T=[];for(let o=0;o<x.length;o++)T.push(x[o].clone());c[o]=T}return!0}if("number"==typeof L){if(c[o]!==L)return c[o]=L,!0}else{const x=Array.isArray(c[o])?c[o]:[c[o]],T=Array.isArray(L)?L:[L];for(let o=0;o<x.length;o++){const c=x[o];if(!1===c.equals(T[o]))return c.copy(T[o]),!0}}return!1}function N(x){const o={boundary:0,storage:0};return"number"==typeof x?(o.boundary=4,o.storage=4):x.isVector2?(o.boundary=8,o.storage=8):x.isVector3||x.isColor?(o.boundary=16,o.storage=12):x.isVector4?(o.boundary=16,o.storage=16):x.isMatrix3?(o.boundary=48,o.storage=48):x.isMatrix4?(o.boundary=64,o.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),o}function Q(o){const c=o.target;c.removeEventListener("dispose",Q);const L=A.indexOf(c.__bindingPointIndex);A.splice(L,1),x.deleteBuffer(T[c.id]),delete T[c.id],delete h[c.id]}return{bind:function(x,o){const c=o.program;L.uniformBlockBinding(x,c)},update:function(c,I){let k=T[c.id];void 0===k&&(function(x){const o=x.uniforms;let c=0;const L=16;let T=0;for(let x=0,h=o.length;x<h;x++){const h=o[x],A={boundary:0,storage:0},E=Array.isArray(h.value)?h.value:[h.value];for(let x=0,o=E.length;x<o;x++){const o=N(E[x]);A.boundary+=o.boundary,A.storage+=o.storage}h.__data=new Float32Array(A.storage/Float32Array.BYTES_PER_ELEMENT),h.__offset=c,x>0&&(T=c%L,0!==T&&L-T-A.boundary<0&&(c+=L-T,h.__offset=c)),c+=A.storage}T=c%L,T>0&&(c+=L-T),x.__size=c,x.__cache={}}(c),k=function(o){const c=function(){for(let x=0;x<E;x++)if(-1===A.indexOf(x))return A.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();o.__bindingPointIndex=c;const L=x.createBuffer(),T=o.__size,h=o.usage;return x.bindBuffer(x.UNIFORM_BUFFER,L),x.bufferData(x.UNIFORM_BUFFER,T,h),x.bindBuffer(x.UNIFORM_BUFFER,null),x.bindBufferBase(x.UNIFORM_BUFFER,c,L),L}(c),T[c.id]=k,c.addEventListener("dispose",Q));const _=I.program;L.updateUBOMapping(c,_);const X=o.render.frame;h[c.id]!==X&&(function(o){const c=T[o.id],L=o.uniforms,h=o.__cache;x.bindBuffer(x.UNIFORM_BUFFER,c);for(let o=0,c=L.length;o<c;o++){const c=L[o];if(!0===H(c,o,h)){const o=c.__offset,L=Array.isArray(c.value)?c.value:[c.value];let T=0;for(let h=0;h<L.length;h++){const A=L[h],E=N(A);"number"==typeof A?(c.__data[0]=A,x.bufferSubData(x.UNIFORM_BUFFER,o+T,c.__data)):A.isMatrix3?(c.__data[0]=A.elements[0],c.__data[1]=A.elements[1],c.__data[2]=A.elements[2],c.__data[3]=A.elements[0],c.__data[4]=A.elements[3],c.__data[5]=A.elements[4],c.__data[6]=A.elements[5],c.__data[7]=A.elements[0],c.__data[8]=A.elements[6],c.__data[9]=A.elements[7],c.__data[10]=A.elements[8],c.__data[11]=A.elements[0]):(A.toArray(c.__data,T),T+=E.storage/Float32Array.BYTES_PER_ELEMENT)}x.bufferSubData(x.UNIFORM_BUFFER,o,c.__data)}}x.bindBuffer(x.UNIFORM_BUFFER,null)}(c),h[c.id]=X)},dispose:function(){for(const o in T)x.deleteBuffer(T[o]);A=[],T={},h={}}}}function s_(){const x=YH("canvas");return x.style.display="block",x}class D_{constructor(x={}){const{canvas:o=s_(),context:c=null,depth:L=!0,stencil:T=!0,alpha:h=!1,antialias:A=!1,premultipliedAlpha:E=!0,preserveDrawingBuffer:H=!1,powerPreference:N="default",failIfMajorPerformanceCaveat:Q=!1}=x;let I;this.isWebGLRenderer=!0,I=null!==c?c.getContextAttributes().alpha:h;const k=new Uint32Array(4),_=new Int32Array(4);let X=null,r=null;const y=[],v=[];this.domElement=o,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace="srgb",this._useLegacyLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const B=this;let Y=!1,F=0,t=0,m=null,C=-1,V=null;const i=new UH,M=new UH;let Z=null;const S=new AQ(0);let u=0,d=o.width,O=o.height,j=1,e=null,q=null;const f=new UH(0,0,d,O),U=new UH(0,0,d,O);let s=!1;const D=new hI;let $=!1,a=!1,z=null;const l=new yN,G=new rH,p=new zH,P={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function K(){return null===m?j:1}let J,n,b,W,w,g,R,xx,ox,cx,Lx,Tx,hx,Ax,Ex,Hx,Nx,Qx,Ix,kx,_x,Xx,rx,yx,vx=c;function Bx(x,c){for(let L=0;L<x.length;L++){const T=x[L],h=o.getContext(T,c);if(null!==h)return h}return null}try{const x={alpha:!0,depth:L,stencil:T,antialias:A,premultipliedAlpha:E,preserveDrawingBuffer:H,powerPreference:N,failIfMajorPerformanceCaveat:Q};if("setAttribute"in o&&o.setAttribute("data-engine","three.js r155"),o.addEventListener("webglcontextlost",tx,!1),o.addEventListener("webglcontextrestored",mx,!1),o.addEventListener("webglcontextcreationerror",Cx,!1),null===vx){const o=["webgl2","webgl","experimental-webgl"];if(!0===B.isWebGL1Renderer&&o.shift(),vx=Bx(o,x),null===vx)throw Bx(o)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!=typeof WebGLRenderingContext&&vx instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===vx.getShaderPrecisionFormat&&(vx.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(x){throw console.error("THREE.WebGLRenderer: "+x.message),x}function Yx(){J=new eI(vx),n=new yI(vx,J,x),J.init(n),Xx=new S_(vx,J,n),b=new M_(vx,J,n),W=new UI(vx),w=new k_,g=new Z_(vx,J,b,w,n,Xx,W),R=new BI(B),xx=new jI(B),ox=new EI(vx,n),rx=new XI(vx,J,ox,n),cx=new qI(vx,ox,W,rx),Lx=new aI(vx,cx,ox,W),Ix=new $I(vx,n,g),Hx=new vI(w),Tx=new I_(B,R,xx,J,n,rx,Hx),hx=new f_(B,w),Ax=new y_,Ex=new m_(J,n),Qx=new _I(B,R,xx,b,Lx,I,E),Nx=new i_(B,Lx,n),yx=new U_(vx,W,n,b),kx=new rI(vx,J,W,n),_x=new fI(vx,J,W,n),W.programs=Tx.programs,B.capabilities=n,B.extensions=J,B.properties=w,B.renderLists=Ax,B.shadowMap=Nx,B.state=b,B.info=W}Yx();const Fx=new q_(B,vx);function tx(x){x.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Y=!0}function mx(){console.log("THREE.WebGLRenderer: Context Restored."),Y=!1;const x=W.autoReset,o=Nx.enabled,c=Nx.autoUpdate,L=Nx.needsUpdate,T=Nx.type;Yx(),W.autoReset=x,Nx.enabled=o,Nx.autoUpdate=c,Nx.needsUpdate=L,Nx.type=T}function Cx(x){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",x.statusMessage)}function Vx(x){const o=x.target;o.removeEventListener("dispose",Vx),function(x){(function(x){const o=w.get(x).programs;void 0!==o&&(o.forEach((function(x){Tx.releaseProgram(x)})),x.isShaderMaterial&&Tx.releaseShaderCache(x))})(x),w.remove(x)}(o)}this.xr=Fx,this.getContext=function(){return vx},this.getContextAttributes=function(){return vx.getContextAttributes()},this.forceContextLoss=function(){const x=J.get("WEBGL_lose_context");x&&x.loseContext()},this.forceContextRestore=function(){const x=J.get("WEBGL_lose_context");x&&x.restoreContext()},this.getPixelRatio=function(){return j},this.setPixelRatio=function(x){void 0!==x&&(j=x,this.setSize(d,O,!1))},this.getSize=function(x){return x.set(d,O)},this.setSize=function(x,c,L=!0){Fx.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(d=x,O=c,o.width=Math.floor(x*j),o.height=Math.floor(c*j),!0===L&&(o.style.width=x+"px",o.style.height=c+"px"),this.setViewport(0,0,x,c))},this.getDrawingBufferSize=function(x){return x.set(d*j,O*j).floor()},this.setDrawingBufferSize=function(x,c,L){d=x,O=c,j=L,o.width=Math.floor(x*L),o.height=Math.floor(c*L),this.setViewport(0,0,x,c)},this.getCurrentViewport=function(x){return x.copy(i)},this.getViewport=function(x){return x.copy(f)},this.setViewport=function(x,o,c,L){x.isVector4?f.set(x.x,x.y,x.z,x.w):f.set(x,o,c,L),b.viewport(i.copy(f).multiplyScalar(j).floor())},this.getScissor=function(x){return x.copy(U)},this.setScissor=function(x,o,c,L){x.isVector4?U.set(x.x,x.y,x.z,x.w):U.set(x,o,c,L),b.scissor(M.copy(U).multiplyScalar(j).floor())},this.getScissorTest=function(){return s},this.setScissorTest=function(x){b.setScissorTest(s=x)},this.setOpaqueSort=function(x){e=x},this.setTransparentSort=function(x){q=x},this.getClearColor=function(x){return x.copy(Qx.getClearColor())},this.setClearColor=function(){Qx.setClearColor.apply(Qx,arguments)},this.getClearAlpha=function(){return Qx.getClearAlpha()},this.setClearAlpha=function(){Qx.setClearAlpha.apply(Qx,arguments)},this.clear=function(x=!0,o=!0,c=!0){let L=0;if(x){let x=!1;if(null!==m){const o=m.texture.format;x=1033===o||1031===o||1029===o}if(x){const x=m.texture.type,o=1009===x||1014===x||1012===x||1020===x||1017===x||1018===x,c=Qx.getClearColor(),L=Qx.getClearAlpha(),T=c.r,h=c.g,A=c.b;o?(k[0]=T,k[1]=h,k[2]=A,k[3]=L,vx.clearBufferuiv(vx.COLOR,0,k)):(_[0]=T,_[1]=h,_[2]=A,_[3]=L,vx.clearBufferiv(vx.COLOR,0,_))}else L|=vx.COLOR_BUFFER_BIT}o&&(L|=vx.DEPTH_BUFFER_BIT),c&&(L|=vx.STENCIL_BUFFER_BIT),vx.clear(L)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){o.removeEventListener("webglcontextlost",tx,!1),o.removeEventListener("webglcontextrestored",mx,!1),o.removeEventListener("webglcontextcreationerror",Cx,!1),Ax.dispose(),Ex.dispose(),w.dispose(),R.dispose(),xx.dispose(),Lx.dispose(),rx.dispose(),yx.dispose(),Tx.dispose(),Fx.dispose(),Fx.removeEventListener("sessionstart",Mx),Fx.removeEventListener("sessionend",Zx),z&&(z.dispose(),z=null),Sx.stop()},this.renderBufferDirect=function(x,o,c,L,T,h){null===o&&(o=P);const A=T.isMesh&&T.matrixWorld.determinant()<0,E=function(x,o,c,L,T){!0!==o.isScene&&(o=P),g.resetTextureUnits();const h=o.fog,A=L.isMeshStandardMaterial?o.environment:null,E=null===m?B.outputColorSpace:!0===m.isXRRenderTarget?m.texture.colorSpace:"srgb-linear",H=(L.isMeshStandardMaterial?xx:R).get(L.envMap||A),N=!0===L.vertexColors&&!!c.attributes.color&&4===c.attributes.color.itemSize,Q=!!c.attributes.tangent&&(!!L.normalMap||L.anisotropy>0),I=!!c.morphAttributes.position,k=!!c.morphAttributes.normal,_=!!c.morphAttributes.color;let X=0;L.toneMapped&&(null!==m&&!0!==m.isXRRenderTarget||(X=B.toneMapping));const y=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,v=void 0!==y?y.length:0,Y=w.get(L),F=r.state.lights;if(!0===$&&(!0===a||x!==V)){const o=x===V&&L.id===C;Hx.setState(L,x,o)}let t=!1;L.version===Y.__version?Y.needsLights&&Y.lightsStateVersion!==F.state.version||Y.outputColorSpace!==E||T.isInstancedMesh&&!1===Y.instancing?t=!0:T.isInstancedMesh||!0!==Y.instancing?T.isSkinnedMesh&&!1===Y.skinning?t=!0:T.isSkinnedMesh||!0!==Y.skinning?T.isInstancedMesh&&!0===Y.instancingColor&&null===T.instanceColor||T.isInstancedMesh&&!1===Y.instancingColor&&null!==T.instanceColor||Y.envMap!==H||!0===L.fog&&Y.fog!==h?t=!0:void 0===Y.numClippingPlanes||Y.numClippingPlanes===Hx.numPlanes&&Y.numIntersection===Hx.numIntersection?(Y.vertexAlphas!==N||Y.vertexTangents!==Q||Y.morphTargets!==I||Y.morphNormals!==k||Y.morphColors!==_||Y.toneMapping!==X||!0===n.isWebGL2&&Y.morphTargetsCount!==v)&&(t=!0):t=!0:t=!0:t=!0:(t=!0,Y.__version=L.version);let i=Y.currentProgram;!0===t&&(i=ex(L,o,T));let M=!1,Z=!1,S=!1;const u=i.getUniforms(),d=Y.uniforms;if(b.useProgram(i.program)&&(M=!0,Z=!0,S=!0),L.id!==C&&(C=L.id,Z=!0),M||V!==x){if(u.setValue(vx,"projectionMatrix",x.projectionMatrix),n.logarithmicDepthBuffer&&u.setValue(vx,"logDepthBufFC",2/(Math.log(x.far+1)/Math.LN2)),V!==x&&(V=x,Z=!0,S=!0),L.isShaderMaterial||L.isMeshPhongMaterial||L.isMeshToonMaterial||L.isMeshStandardMaterial||L.envMap){const o=u.map.cameraPosition;void 0!==o&&o.setValue(vx,p.setFromMatrixPosition(x.matrixWorld))}(L.isMeshPhongMaterial||L.isMeshToonMaterial||L.isMeshLambertMaterial||L.isMeshBasicMaterial||L.isMeshStandardMaterial||L.isShaderMaterial)&&u.setValue(vx,"isOrthographic",!0===x.isOrthographicCamera),(L.isMeshPhongMaterial||L.isMeshToonMaterial||L.isMeshLambertMaterial||L.isMeshBasicMaterial||L.isMeshStandardMaterial||L.isShaderMaterial||L.isShadowMaterial||T.isSkinnedMesh)&&u.setValue(vx,"viewMatrix",x.matrixWorldInverse)}if(T.isSkinnedMesh){u.setOptional(vx,T,"bindMatrix"),u.setOptional(vx,T,"bindMatrixInverse");const x=T.skeleton;x&&(n.floatVertexTextures?(null===x.boneTexture&&x.computeBoneTexture(),u.setValue(vx,"boneTexture",x.boneTexture,g),u.setValue(vx,"boneTextureSize",x.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const e=c.morphAttributes;var q,f;if((void 0!==e.position||void 0!==e.normal||void 0!==e.color&&!0===n.isWebGL2)&&Ix.update(T,c,i),(Z||Y.receiveShadow!==T.receiveShadow)&&(Y.receiveShadow=T.receiveShadow,u.setValue(vx,"receiveShadow",T.receiveShadow)),L.isMeshGouraudMaterial&&null!==L.envMap&&(d.envMap.value=H,d.flipEnvMap.value=H.isCubeTexture&&!1===H.isRenderTargetTexture?-1:1),Z&&(u.setValue(vx,"toneMappingExposure",B.toneMappingExposure),Y.needsLights&&(f=S,(q=d).ambientLightColor.needsUpdate=f,q.lightProbe.needsUpdate=f,q.directionalLights.needsUpdate=f,q.directionalLightShadows.needsUpdate=f,q.pointLights.needsUpdate=f,q.pointLightShadows.needsUpdate=f,q.spotLights.needsUpdate=f,q.spotLightShadows.needsUpdate=f,q.rectAreaLights.needsUpdate=f,q.hemisphereLights.needsUpdate=f),h&&!0===L.fog&&hx.refreshFogUniforms(d,h),hx.refreshMaterialUniforms(d,L,j,O,z),pk.upload(vx,Y.uniformsList,d,g)),L.isShaderMaterial&&!0===L.uniformsNeedUpdate&&(pk.upload(vx,Y.uniformsList,d,g),L.uniformsNeedUpdate=!1),L.isSpriteMaterial&&u.setValue(vx,"center",T.center),u.setValue(vx,"modelViewMatrix",T.modelViewMatrix),u.setValue(vx,"normalMatrix",T.normalMatrix),u.setValue(vx,"modelMatrix",T.matrixWorld),L.isShaderMaterial||L.isRawShaderMaterial){const x=L.uniformsGroups;for(let o=0,c=x.length;o<c;o++)if(n.isWebGL2){const c=x[o];yx.update(c,i),yx.bind(c,i)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return i}(x,o,c,L,T);b.setMaterial(L,A);let H=c.index,N=1;if(!0===L.wireframe){if(H=cx.getWireframeAttribute(c),void 0===H)return;N=2}const Q=c.drawRange,I=c.attributes.position;let k=Q.start*N,_=(Q.start+Q.count)*N;null!==h&&(k=Math.max(k,h.start*N),_=Math.min(_,(h.start+h.count)*N)),null!==H?(k=Math.max(k,0),_=Math.min(_,H.count)):null!=I&&(k=Math.max(k,0),_=Math.min(_,I.count));const X=_-k;if(X<0||X===1/0)return;let y;rx.setup(T,L,E,c,H);let v=kx;if(null!==H&&(y=ox.get(H),v=_x,v.setIndex(y)),T.isMesh)!0===L.wireframe?(b.setLineWidth(L.wireframeLinewidth*K()),v.setMode(vx.LINES)):v.setMode(vx.TRIANGLES);else if(T.isLine){let x=L.linewidth;void 0===x&&(x=1),b.setLineWidth(x*K()),T.isLineSegments?v.setMode(vx.LINES):T.isLineLoop?v.setMode(vx.LINE_LOOP):v.setMode(vx.LINE_STRIP)}else T.isPoints?v.setMode(vx.POINTS):T.isSprite&&v.setMode(vx.TRIANGLES);if(T.isInstancedMesh)v.renderInstances(k,X,T.count);else if(c.isInstancedBufferGeometry){const x=void 0!==c._maxInstanceCount?c._maxInstanceCount:1/0,o=Math.min(c.instanceCount,x);v.renderInstances(k,X,o)}else v.render(k,X)},this.compile=function(x,o){function c(x,o,c){!0===x.transparent&&2===x.side&&!1===x.forceSinglePass?(x.side=1,x.needsUpdate=!0,ex(x,o,c),x.side=0,x.needsUpdate=!0,ex(x,o,c),x.side=2):ex(x,o,c)}r=Ex.get(x),r.init(),v.push(r),x.traverseVisible((function(x){x.isLight&&x.layers.test(o.layers)&&(r.pushLight(x),x.castShadow&&r.pushShadow(x))})),r.setupLights(B._useLegacyLights),x.traverse((function(o){const L=o.material;if(L)if(Array.isArray(L))for(let T=0;T<L.length;T++)c(L[T],x,o);else c(L,x,o)})),v.pop(),r=null};let ix=null;function Mx(){Sx.stop()}function Zx(){Sx.start()}const Sx=new AI;function ux(x,o,c,L){if(!1===x.visible)return;if(x.layers.test(o.layers))if(x.isGroup)c=x.renderOrder;else if(x.isLOD)!0===x.autoUpdate&&x.update(o);else if(x.isLight)r.pushLight(x),x.castShadow&&r.pushShadow(x);else if(x.isSprite){if(!x.frustumCulled||D.intersectsSprite(x)){L&&p.setFromMatrixPosition(x.matrixWorld).applyMatrix4(l);const o=Lx.update(x),T=x.material;T.visible&&X.push(x,o,T,c,p.z,null)}}else if((x.isMesh||x.isLine||x.isPoints)&&(!x.frustumCulled||D.intersectsObject(x))){const o=Lx.update(x),T=x.material;if(L&&(void 0!==x.boundingSphere?(null===x.boundingSphere&&x.computeBoundingSphere(),p.copy(x.boundingSphere.center)):(null===o.boundingSphere&&o.computeBoundingSphere(),p.copy(o.boundingSphere.center)),p.applyMatrix4(x.matrixWorld).applyMatrix4(l)),Array.isArray(T)){const L=o.groups;for(let h=0,A=L.length;h<A;h++){const A=L[h],E=T[A.materialIndex];E&&E.visible&&X.push(x,o,E,c,p.z,A)}}else T.visible&&X.push(x,o,T,c,p.z,null)}const T=x.children;for(let x=0,h=T.length;x<h;x++)ux(T[x],o,c,L)}function dx(x,o,c,L){const T=x.opaque,h=x.transmissive,A=x.transparent;r.setupLightsView(c),!0===$&&Hx.setGlobalState(B.clippingPlanes,c),h.length>0&&function(x,o,c,L){const T=n.isWebGL2;null===z&&(z=new DH(1,1,{generateMipmaps:!0,type:J.has("EXT_color_buffer_half_float")?1016:1009,minFilter:1008,samples:T?4:0})),B.getDrawingBufferSize(G),T?z.setSize(G.x,G.y):z.setSize(kH(G.x),kH(G.y));const h=B.getRenderTarget();B.setRenderTarget(z),B.getClearColor(S),u=B.getClearAlpha(),u<1&&B.setClearColor(16777215,.5),B.clear();const A=B.toneMapping;B.toneMapping=0,Ox(x,c,L),g.updateMultisampleRenderTarget(z),g.updateRenderTargetMipmap(z);let E=!1;for(let x=0,T=o.length;x<T;x++){const T=o[x],h=T.object,A=T.geometry,H=T.material,N=T.group;if(2===H.side&&h.layers.test(L.layers)){const x=H.side;H.side=1,H.needsUpdate=!0,jx(h,c,L,A,H,N),H.side=x,H.needsUpdate=!0,E=!0}}!0===E&&(g.updateMultisampleRenderTarget(z),g.updateRenderTargetMipmap(z)),B.setRenderTarget(h),B.setClearColor(S,u),B.toneMapping=A}(T,h,o,c),L&&b.viewport(i.copy(L)),T.length>0&&Ox(T,o,c),h.length>0&&Ox(h,o,c),A.length>0&&Ox(A,o,c),b.buffers.depth.setTest(!0),b.buffers.depth.setMask(!0),b.buffers.color.setMask(!0),b.setPolygonOffset(!1)}function Ox(x,o,c){const L=!0===o.isScene?o.overrideMaterial:null;for(let T=0,h=x.length;T<h;T++){const h=x[T],A=h.object,E=h.geometry,H=null===L?h.material:L,N=h.group;A.layers.test(c.layers)&&jx(A,o,c,E,H,N)}}function jx(x,o,c,L,T,h){x.onBeforeRender(B,o,c,L,T,h),x.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,x.matrixWorld),x.normalMatrix.getNormalMatrix(x.modelViewMatrix),T.onBeforeRender(B,o,c,L,x,h),!0===T.transparent&&2===T.side&&!1===T.forceSinglePass?(T.side=1,T.needsUpdate=!0,B.renderBufferDirect(c,o,L,T,x,h),T.side=0,T.needsUpdate=!0,B.renderBufferDirect(c,o,L,T,x,h),T.side=2):B.renderBufferDirect(c,o,L,T,x,h),x.onAfterRender(B,o,c,L,T,h)}function ex(x,o,c){!0!==o.isScene&&(o=P);const L=w.get(x),T=r.state.lights,h=r.state.shadowsArray,A=T.state.version,E=Tx.getParameters(x,T.state,h,o,c),H=Tx.getProgramCacheKey(E);let N=L.programs;L.environment=x.isMeshStandardMaterial?o.environment:null,L.fog=o.fog,L.envMap=(x.isMeshStandardMaterial?xx:R).get(x.envMap||L.environment),void 0===N&&(x.addEventListener("dispose",Vx),N=new Map,L.programs=N);let Q=N.get(H);if(void 0!==Q){if(L.currentProgram===Q&&L.lightsStateVersion===A)return qx(x,E),Q}else E.uniforms=Tx.getUniforms(x),x.onBuild(c,E,B),x.onBeforeCompile(E,B),Q=Tx.acquireProgram(E,H),N.set(H,Q),L.uniforms=E.uniforms;const I=L.uniforms;(x.isShaderMaterial||x.isRawShaderMaterial)&&!0!==x.clipping||(I.clippingPlanes=Hx.uniform),qx(x,E),L.needsLights=function(x){return x.isMeshLambertMaterial||x.isMeshToonMaterial||x.isMeshPhongMaterial||x.isMeshStandardMaterial||x.isShadowMaterial||x.isShaderMaterial&&!0===x.lights}(x),L.lightsStateVersion=A,L.needsLights&&(I.ambientLightColor.value=T.state.ambient,I.lightProbe.value=T.state.probe,I.directionalLights.value=T.state.directional,I.directionalLightShadows.value=T.state.directionalShadow,I.spotLights.value=T.state.spot,I.spotLightShadows.value=T.state.spotShadow,I.rectAreaLights.value=T.state.rectArea,I.ltc_1.value=T.state.rectAreaLTC1,I.ltc_2.value=T.state.rectAreaLTC2,I.pointLights.value=T.state.point,I.pointLightShadows.value=T.state.pointShadow,I.hemisphereLights.value=T.state.hemi,I.directionalShadowMap.value=T.state.directionalShadowMap,I.directionalShadowMatrix.value=T.state.directionalShadowMatrix,I.spotShadowMap.value=T.state.spotShadowMap,I.spotLightMatrix.value=T.state.spotLightMatrix,I.spotLightMap.value=T.state.spotLightMap,I.pointShadowMap.value=T.state.pointShadowMap,I.pointShadowMatrix.value=T.state.pointShadowMatrix);const k=Q.getUniforms(),_=pk.seqWithValue(k.seq,I);return L.currentProgram=Q,L.uniformsList=_,Q}function qx(x,o){const c=w.get(x);c.outputColorSpace=o.outputColorSpace,c.instancing=o.instancing,c.instancingColor=o.instancingColor,c.skinning=o.skinning,c.morphTargets=o.morphTargets,c.morphNormals=o.morphNormals,c.morphColors=o.morphColors,c.morphTargetsCount=o.morphTargetsCount,c.numClippingPlanes=o.numClippingPlanes,c.numIntersection=o.numClipIntersection,c.vertexAlphas=o.vertexAlphas,c.vertexTangents=o.vertexTangents,c.toneMapping=o.toneMapping}Sx.setAnimationLoop((function(x){ix&&ix(x)})),"undefined"!=typeof self&&Sx.setContext(self),this.setAnimationLoop=function(x){ix=x,Fx.setAnimationLoop(x),null===x?Sx.stop():Sx.start()},Fx.addEventListener("sessionstart",Mx),Fx.addEventListener("sessionend",Zx),this.render=function(x,o){if(void 0!==o&&!0!==o.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===Y)return;!0===x.matrixWorldAutoUpdate&&x.updateMatrixWorld(),null===o.parent&&!0===o.matrixWorldAutoUpdate&&o.updateMatrixWorld(),!0===Fx.enabled&&!0===Fx.isPresenting&&(!0===Fx.cameraAutoUpdate&&Fx.updateCamera(o),o=Fx.getCamera()),!0===x.isScene&&x.onBeforeRender(B,x,o,m),r=Ex.get(x,v.length),r.init(),v.push(r),l.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),D.setFromProjectionMatrix(l),a=this.localClippingEnabled,$=Hx.init(this.clippingPlanes,a),X=Ax.get(x,y.length),X.init(),y.push(X),ux(x,o,0,B.sortObjects),X.finish(),!0===B.sortObjects&&X.sort(e,q),this.info.render.frame++,!0===$&&Hx.beginShadows();const c=r.state.shadowsArray;if(Nx.render(c,x,o),!0===$&&Hx.endShadows(),!0===this.info.autoReset&&this.info.reset(),Qx.render(X,x),r.setupLights(B._useLegacyLights),o.isArrayCamera){const c=o.cameras;for(let o=0,L=c.length;o<L;o++){const L=c[o];dx(X,x,L,L.viewport)}}else dx(X,x,o);null!==m&&(g.updateMultisampleRenderTarget(m),g.updateRenderTargetMipmap(m)),!0===x.isScene&&x.onAfterRender(B,x,o),rx.resetDefaultState(),C=-1,V=null,v.pop(),r=v.length>0?v[v.length-1]:null,y.pop(),X=y.length>0?y[y.length-1]:null},this.getActiveCubeFace=function(){return F},this.getActiveMipmapLevel=function(){return t},this.getRenderTarget=function(){return m},this.setRenderTargetTextures=function(x,o,c){w.get(x.texture).__webglTexture=o,w.get(x.depthTexture).__webglTexture=c;const L=w.get(x);L.__hasExternalTextures=!0,L.__hasExternalTextures&&(L.__autoAllocateDepthBuffer=void 0===c,L.__autoAllocateDepthBuffer||!0===J.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),L.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(x,o){const c=w.get(x);c.__webglFramebuffer=o,c.__useDefaultFramebuffer=void 0===o},this.setRenderTarget=function(x,o=0,c=0){m=x,F=o,t=c;let L=!0,T=null,h=!1,A=!1;if(x){const E=w.get(x);void 0!==E.__useDefaultFramebuffer?(b.bindFramebuffer(vx.FRAMEBUFFER,null),L=!1):void 0===E.__webglFramebuffer?g.setupRenderTarget(x):E.__hasExternalTextures&&g.rebindTextures(x,w.get(x.texture).__webglTexture,w.get(x.depthTexture).__webglTexture);const H=x.texture;(H.isData3DTexture||H.isDataArrayTexture||H.isCompressedArrayTexture)&&(A=!0);const N=w.get(x).__webglFramebuffer;x.isWebGLCubeRenderTarget?(T=Array.isArray(N[o])?N[o][c]:N[o],h=!0):T=n.isWebGL2&&x.samples>0&&!1===g.useMultisampledRTT(x)?w.get(x).__webglMultisampledFramebuffer:Array.isArray(N)?N[c]:N,i.copy(x.viewport),M.copy(x.scissor),Z=x.scissorTest}else i.copy(f).multiplyScalar(j).floor(),M.copy(U).multiplyScalar(j).floor(),Z=s;if(b.bindFramebuffer(vx.FRAMEBUFFER,T)&&n.drawBuffers&&L&&b.drawBuffers(x,T),b.viewport(i),b.scissor(M),b.setScissorTest(Z),h){const L=w.get(x.texture);vx.framebufferTexture2D(vx.FRAMEBUFFER,vx.COLOR_ATTACHMENT0,vx.TEXTURE_CUBE_MAP_POSITIVE_X+o,L.__webglTexture,c)}else if(A){const L=w.get(x.texture),T=o||0;vx.framebufferTextureLayer(vx.FRAMEBUFFER,vx.COLOR_ATTACHMENT0,L.__webglTexture,c||0,T)}C=-1},this.readRenderTargetPixels=function(x,o,c,L,T,h,A){if(!x||!x.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let E=w.get(x).__webglFramebuffer;if(x.isWebGLCubeRenderTarget&&void 0!==A&&(E=E[A]),E){b.bindFramebuffer(vx.FRAMEBUFFER,E);try{const A=x.texture,E=A.format,H=A.type;if(1023!==E&&Xx.convert(E)!==vx.getParameter(vx.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const N=1016===H&&(J.has("EXT_color_buffer_half_float")||n.isWebGL2&&J.has("EXT_color_buffer_float"));if(!(1009===H||Xx.convert(H)===vx.getParameter(vx.IMPLEMENTATION_COLOR_READ_TYPE)||1015===H&&(n.isWebGL2||J.has("OES_texture_float")||J.has("WEBGL_color_buffer_float"))||N))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");o>=0&&o<=x.width-L&&c>=0&&c<=x.height-T&&vx.readPixels(o,c,L,T,Xx.convert(E),Xx.convert(H),h)}finally{const x=null!==m?w.get(m).__webglFramebuffer:null;b.bindFramebuffer(vx.FRAMEBUFFER,x)}}},this.copyFramebufferToTexture=function(x,o,c=0){const L=Math.pow(2,-c),T=Math.floor(o.image.width*L),h=Math.floor(o.image.height*L);g.setTexture2D(o,0),vx.copyTexSubImage2D(vx.TEXTURE_2D,c,0,0,x.x,x.y,T,h),b.unbindTexture()},this.copyTextureToTexture=function(x,o,c,L=0){const T=o.image.width,h=o.image.height,A=Xx.convert(c.format),E=Xx.convert(c.type);g.setTexture2D(c,0),vx.pixelStorei(vx.UNPACK_FLIP_Y_WEBGL,c.flipY),vx.pixelStorei(vx.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.premultiplyAlpha),vx.pixelStorei(vx.UNPACK_ALIGNMENT,c.unpackAlignment),o.isDataTexture?vx.texSubImage2D(vx.TEXTURE_2D,L,x.x,x.y,T,h,A,E,o.image.data):o.isCompressedTexture?vx.compressedTexSubImage2D(vx.TEXTURE_2D,L,x.x,x.y,o.mipmaps[0].width,o.mipmaps[0].height,A,o.mipmaps[0].data):vx.texSubImage2D(vx.TEXTURE_2D,L,x.x,x.y,A,E,o.image),0===L&&c.generateMipmaps&&vx.generateMipmap(vx.TEXTURE_2D),b.unbindTexture()},this.copyTextureToTexture3D=function(x,o,c,L,T=0){if(B.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const h=x.max.x-x.min.x+1,A=x.max.y-x.min.y+1,E=x.max.z-x.min.z+1,H=Xx.convert(L.format),N=Xx.convert(L.type);let Q;if(L.isData3DTexture)g.setTexture3D(L,0),Q=vx.TEXTURE_3D;else{if(!L.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");g.setTexture2DArray(L,0),Q=vx.TEXTURE_2D_ARRAY}vx.pixelStorei(vx.UNPACK_FLIP_Y_WEBGL,L.flipY),vx.pixelStorei(vx.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),vx.pixelStorei(vx.UNPACK_ALIGNMENT,L.unpackAlignment);const I=vx.getParameter(vx.UNPACK_ROW_LENGTH),k=vx.getParameter(vx.UNPACK_IMAGE_HEIGHT),_=vx.getParameter(vx.UNPACK_SKIP_PIXELS),X=vx.getParameter(vx.UNPACK_SKIP_ROWS),r=vx.getParameter(vx.UNPACK_SKIP_IMAGES),y=c.isCompressedTexture?c.mipmaps[0]:c.image;vx.pixelStorei(vx.UNPACK_ROW_LENGTH,y.width),vx.pixelStorei(vx.UNPACK_IMAGE_HEIGHT,y.height),vx.pixelStorei(vx.UNPACK_SKIP_PIXELS,x.min.x),vx.pixelStorei(vx.UNPACK_SKIP_ROWS,x.min.y),vx.pixelStorei(vx.UNPACK_SKIP_IMAGES,x.min.z),c.isDataTexture||c.isData3DTexture?vx.texSubImage3D(Q,T,o.x,o.y,o.z,h,A,E,H,N,y.data):c.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),vx.compressedTexSubImage3D(Q,T,o.x,o.y,o.z,h,A,E,H,y.data)):vx.texSubImage3D(Q,T,o.x,o.y,o.z,h,A,E,H,N,y),vx.pixelStorei(vx.UNPACK_ROW_LENGTH,I),vx.pixelStorei(vx.UNPACK_IMAGE_HEIGHT,k),vx.pixelStorei(vx.UNPACK_SKIP_PIXELS,_),vx.pixelStorei(vx.UNPACK_SKIP_ROWS,X),vx.pixelStorei(vx.UNPACK_SKIP_IMAGES,r),0===T&&L.generateMipmaps&&vx.generateMipmap(Q),b.unbindTexture()},this.initTexture=function(x){x.isCubeTexture?g.setTextureCube(x,0):x.isData3DTexture?g.setTexture3D(x,0):x.isDataArrayTexture||x.isCompressedArrayTexture?g.setTexture2DArray(x,0):g.setTexture2D(x,0),b.unbindTexture()},this.resetState=function(){F=0,t=0,m=null,b.reset(),rx.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return 2e3}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(x){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!x}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),"srgb"===this.outputColorSpace?3001:3e3}set outputEncoding(x){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=3001===x?"srgb":"srgb-linear"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(x){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=x}}(class extends D_{}).prototype.isWebGL1Renderer=!0;class $_ extends zN{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(x,o){return super.copy(x,o),null!==x.background&&(this.background=x.background.clone()),null!==x.environment&&(this.environment=x.environment.clone()),null!==x.fog&&(this.fog=x.fog.clone()),this.backgroundBlurriness=x.backgroundBlurriness,this.backgroundIntensity=x.backgroundIntensity,null!==x.overrideMaterial&&(this.overrideMaterial=x.overrideMaterial.clone()),this.matrixAutoUpdate=x.matrixAutoUpdate,this}toJSON(x){const o=super.toJSON(x);return null!==this.fog&&(o.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(o.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(o.object.backgroundIntensity=this.backgroundIntensity),o}}class a_{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(x,o){const c=this.getUtoTmapping(x);return this.getPoint(c,o)}getPoints(x=5){const o=[];for(let c=0;c<=x;c++)o.push(this.getPoint(c/x));return o}getSpacedPoints(x=5){const o=[];for(let c=0;c<=x;c++)o.push(this.getPointAt(c/x));return o}getLength(){const x=this.getLengths();return x[x.length-1]}getLengths(x=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===x+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const o=[];let c,L=this.getPoint(0),T=0;o.push(0);for(let h=1;h<=x;h++)c=this.getPoint(h/x),T+=c.distanceTo(L),o.push(T),L=c;return this.cacheArcLengths=o,o}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(x,o){const c=this.getLengths();let L=0;const T=c.length;let h;h=o||x*c[T-1];let A,E=0,H=T-1;for(;E<=H;)if(L=Math.floor(E+(H-E)/2),A=c[L]-h,A<0)E=L+1;else{if(!(A>0)){H=L;break}H=L-1}if(L=H,c[L]===h)return L/(T-1);const N=c[L];return(L+(h-N)/(c[L+1]-N))/(T-1)}getTangent(x,o){let c=x-1e-4,L=x+1e-4;c<0&&(c=0),L>1&&(L=1);const T=this.getPoint(c),h=this.getPoint(L),A=o||(T.isVector2?new rH:new zH);return A.copy(h).sub(T).normalize(),A}getTangentAt(x,o){const c=this.getUtoTmapping(x);return this.getTangent(c,o)}computeFrenetFrames(x,o){const c=new zH,L=[],T=[],h=[],A=new zH,E=new yN;for(let o=0;o<=x;o++){const c=o/x;L[o]=this.getTangentAt(c,new zH)}T[0]=new zH,h[0]=new zH;let H=Number.MAX_VALUE;const N=Math.abs(L[0].x),Q=Math.abs(L[0].y),I=Math.abs(L[0].z);N<=H&&(H=N,c.set(1,0,0)),Q<=H&&(H=Q,c.set(0,1,0)),I<=H&&c.set(0,0,1),A.crossVectors(L[0],c).normalize(),T[0].crossVectors(L[0],A),h[0].crossVectors(L[0],T[0]);for(let o=1;o<=x;o++){if(T[o]=T[o-1].clone(),h[o]=h[o-1].clone(),A.crossVectors(L[o-1],L[o]),A.length()>Number.EPSILON){A.normalize();const x=Math.acos(NH(L[o-1].dot(L[o]),-1,1));T[o].applyMatrix4(E.makeRotationAxis(A,x))}h[o].crossVectors(L[o],T[o])}if(!0===o){let o=Math.acos(NH(T[0].dot(T[x]),-1,1));o/=x,L[0].dot(A.crossVectors(T[0],T[x]))>0&&(o=-o);for(let c=1;c<=x;c++)T[c].applyMatrix4(E.makeRotationAxis(L[c],o*c)),h[c].crossVectors(L[c],T[c])}return{tangents:L,normals:T,binormals:h}}clone(){return(new this.constructor).copy(this)}copy(x){return this.arcLengthDivisions=x.arcLengthDivisions,this}toJSON(){const x={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return x.arcLengthDivisions=this.arcLengthDivisions,x.type=this.type,x}fromJSON(x){return this.arcLengthDivisions=x.arcLengthDivisions,this}}class z_ extends a_{constructor(x=0,o=0,c=1,L=1,T=0,h=2*Math.PI,A=!1,E=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=x,this.aY=o,this.xRadius=c,this.yRadius=L,this.aStartAngle=T,this.aEndAngle=h,this.aClockwise=A,this.aRotation=E}getPoint(x,o){const c=o||new rH,L=2*Math.PI;let T=this.aEndAngle-this.aStartAngle;const h=Math.abs(T)<Number.EPSILON;for(;T<0;)T+=L;for(;T>L;)T-=L;T<Number.EPSILON&&(T=h?0:L),!0!==this.aClockwise||h||(T===L?T=-L:T-=L);const A=this.aStartAngle+x*T;let E=this.aX+this.xRadius*Math.cos(A),H=this.aY+this.yRadius*Math.sin(A);if(0!==this.aRotation){const x=Math.cos(this.aRotation),o=Math.sin(this.aRotation),c=E-this.aX,L=H-this.aY;E=c*x-L*o+this.aX,H=c*o+L*x+this.aY}return c.set(E,H)}copy(x){return super.copy(x),this.aX=x.aX,this.aY=x.aY,this.xRadius=x.xRadius,this.yRadius=x.yRadius,this.aStartAngle=x.aStartAngle,this.aEndAngle=x.aEndAngle,this.aClockwise=x.aClockwise,this.aRotation=x.aRotation,this}toJSON(){const x=super.toJSON();return x.aX=this.aX,x.aY=this.aY,x.xRadius=this.xRadius,x.yRadius=this.yRadius,x.aStartAngle=this.aStartAngle,x.aEndAngle=this.aEndAngle,x.aClockwise=this.aClockwise,x.aRotation=this.aRotation,x}fromJSON(x){return super.fromJSON(x),this.aX=x.aX,this.aY=x.aY,this.xRadius=x.xRadius,this.yRadius=x.yRadius,this.aStartAngle=x.aStartAngle,this.aEndAngle=x.aEndAngle,this.aClockwise=x.aClockwise,this.aRotation=x.aRotation,this}}function l_(){let x=0,o=0,c=0,L=0;function T(T,h,A,E){x=T,o=A,c=-3*T+3*h-2*A-E,L=2*T-2*h+A+E}return{initCatmullRom:function(x,o,c,L,h){T(o,c,h*(c-x),h*(L-o))},initNonuniformCatmullRom:function(x,o,c,L,h,A,E){let H=(o-x)/h-(c-x)/(h+A)+(c-o)/A,N=(c-o)/A-(L-o)/(A+E)+(L-c)/E;H*=A,N*=A,T(o,c,H,N)},calc:function(T){const h=T*T;return x+o*T+c*h+L*(h*T)}}}const G_=new zH,p_=new l_,P_=new l_,K_=new l_;function J_(x,o,c,L,T){const h=.5*(L-o),A=.5*(T-c),E=x*x;return(2*c-2*L+h+A)*(x*E)+(-3*c+3*L-2*h-A)*E+h*x+c}function n_(x,o,c,L){return function(x,o){const c=1-x;return c*c*o}(x,o)+function(x,o){return 2*(1-x)*x*o}(x,c)+function(x,o){return x*x*o}(x,L)}function b_(x,o,c,L,T){return function(x,o){const c=1-x;return c*c*c*o}(x,o)+function(x,o){const c=1-x;return 3*c*c*x*o}(x,c)+function(x,o){return 3*(1-x)*x*x*o}(x,L)+function(x,o){return x*x*x*o}(x,T)}class W_ extends a_{constructor(x=new rH,o=new rH,c=new rH,L=new rH){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=x,this.v1=o,this.v2=c,this.v3=L}getPoint(x,o=new rH){const c=o,L=this.v0,T=this.v1,h=this.v2,A=this.v3;return c.set(b_(x,L.x,T.x,h.x,A.x),b_(x,L.y,T.y,h.y,A.y)),c}copy(x){return super.copy(x),this.v0.copy(x.v0),this.v1.copy(x.v1),this.v2.copy(x.v2),this.v3.copy(x.v3),this}toJSON(){const x=super.toJSON();return x.v0=this.v0.toArray(),x.v1=this.v1.toArray(),x.v2=this.v2.toArray(),x.v3=this.v3.toArray(),x}fromJSON(x){return super.fromJSON(x),this.v0.fromArray(x.v0),this.v1.fromArray(x.v1),this.v2.fromArray(x.v2),this.v3.fromArray(x.v3),this}}class w_ extends a_{constructor(x=new rH,o=new rH){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=x,this.v2=o}getPoint(x,o=new rH){const c=o;return 1===x?c.copy(this.v2):(c.copy(this.v2).sub(this.v1),c.multiplyScalar(x).add(this.v1)),c}getPointAt(x,o){return this.getPoint(x,o)}getTangent(x,o=new rH){return o.subVectors(this.v2,this.v1).normalize()}getTangentAt(x,o){return this.getTangent(x,o)}copy(x){return super.copy(x),this.v1.copy(x.v1),this.v2.copy(x.v2),this}toJSON(){const x=super.toJSON();return x.v1=this.v1.toArray(),x.v2=this.v2.toArray(),x}fromJSON(x){return super.fromJSON(x),this.v1.fromArray(x.v1),this.v2.fromArray(x.v2),this}}class g_ extends a_{constructor(x=new rH,o=new rH,c=new rH){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=x,this.v1=o,this.v2=c}getPoint(x,o=new rH){const c=o,L=this.v0,T=this.v1,h=this.v2;return c.set(n_(x,L.x,T.x,h.x),n_(x,L.y,T.y,h.y)),c}copy(x){return super.copy(x),this.v0.copy(x.v0),this.v1.copy(x.v1),this.v2.copy(x.v2),this}toJSON(){const x=super.toJSON();return x.v0=this.v0.toArray(),x.v1=this.v1.toArray(),x.v2=this.v2.toArray(),x}fromJSON(x){return super.fromJSON(x),this.v0.fromArray(x.v0),this.v1.fromArray(x.v1),this.v2.fromArray(x.v2),this}}class R_ extends a_{constructor(x=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=x}getPoint(x,o=new rH){const c=o,L=this.points,T=(L.length-1)*x,h=Math.floor(T),A=T-h,E=L[0===h?h:h-1],H=L[h],N=L[h>L.length-2?L.length-1:h+1],Q=L[h>L.length-3?L.length-1:h+2];return c.set(J_(A,E.x,H.x,N.x,Q.x),J_(A,E.y,H.y,N.y,Q.y)),c}copy(x){super.copy(x),this.points=[];for(let o=0,c=x.points.length;o<c;o++){const c=x.points[o];this.points.push(c.clone())}return this}toJSON(){const x=super.toJSON();x.points=[];for(let o=0,c=this.points.length;o<c;o++){const c=this.points[o];x.points.push(c.toArray())}return x}fromJSON(x){super.fromJSON(x),this.points=[];for(let o=0,c=x.points.length;o<c;o++){const c=x.points[o];this.points.push((new rH).fromArray(c))}return this}}var xX=Object.freeze({__proto__:null,ArcCurve:class extends z_{constructor(x,o,c,L,T,h){super(x,o,c,c,L,T,h),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends a_{constructor(x=[],o=!1,c="centripetal",L=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=x,this.closed=o,this.curveType=c,this.tension=L}getPoint(x,o=new zH){const c=o,L=this.points,T=L.length,h=(T-(this.closed?0:1))*x;let A,E,H=Math.floor(h),N=h-H;this.closed?H+=H>0?0:(Math.floor(Math.abs(H)/T)+1)*T:0===N&&H===T-1&&(H=T-2,N=1),this.closed||H>0?A=L[(H-1)%T]:(G_.subVectors(L[0],L[1]).add(L[0]),A=G_);const Q=L[H%T],I=L[(H+1)%T];if(this.closed||H+2<T?E=L[(H+2)%T]:(G_.subVectors(L[T-1],L[T-2]).add(L[T-1]),E=G_),"centripetal"===this.curveType||"chordal"===this.curveType){const x="chordal"===this.curveType?.5:.25;let o=Math.pow(A.distanceToSquared(Q),x),c=Math.pow(Q.distanceToSquared(I),x),L=Math.pow(I.distanceToSquared(E),x);c<1e-4&&(c=1),o<1e-4&&(o=c),L<1e-4&&(L=c),p_.initNonuniformCatmullRom(A.x,Q.x,I.x,E.x,o,c,L),P_.initNonuniformCatmullRom(A.y,Q.y,I.y,E.y,o,c,L),K_.initNonuniformCatmullRom(A.z,Q.z,I.z,E.z,o,c,L)}else"catmullrom"===this.curveType&&(p_.initCatmullRom(A.x,Q.x,I.x,E.x,this.tension),P_.initCatmullRom(A.y,Q.y,I.y,E.y,this.tension),K_.initCatmullRom(A.z,Q.z,I.z,E.z,this.tension));return c.set(p_.calc(N),P_.calc(N),K_.calc(N)),c}copy(x){super.copy(x),this.points=[];for(let o=0,c=x.points.length;o<c;o++){const c=x.points[o];this.points.push(c.clone())}return this.closed=x.closed,this.curveType=x.curveType,this.tension=x.tension,this}toJSON(){const x=super.toJSON();x.points=[];for(let o=0,c=this.points.length;o<c;o++){const c=this.points[o];x.points.push(c.toArray())}return x.closed=this.closed,x.curveType=this.curveType,x.tension=this.tension,x}fromJSON(x){super.fromJSON(x),this.points=[];for(let o=0,c=x.points.length;o<c;o++){const c=x.points[o];this.points.push((new zH).fromArray(c))}return this.closed=x.closed,this.curveType=x.curveType,this.tension=x.tension,this}},CubicBezierCurve:W_,CubicBezierCurve3:class extends a_{constructor(x=new zH,o=new zH,c=new zH,L=new zH){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=x,this.v1=o,this.v2=c,this.v3=L}getPoint(x,o=new zH){const c=o,L=this.v0,T=this.v1,h=this.v2,A=this.v3;return c.set(b_(x,L.x,T.x,h.x,A.x),b_(x,L.y,T.y,h.y,A.y),b_(x,L.z,T.z,h.z,A.z)),c}copy(x){return super.copy(x),this.v0.copy(x.v0),this.v1.copy(x.v1),this.v2.copy(x.v2),this.v3.copy(x.v3),this}toJSON(){const x=super.toJSON();return x.v0=this.v0.toArray(),x.v1=this.v1.toArray(),x.v2=this.v2.toArray(),x.v3=this.v3.toArray(),x}fromJSON(x){return super.fromJSON(x),this.v0.fromArray(x.v0),this.v1.fromArray(x.v1),this.v2.fromArray(x.v2),this.v3.fromArray(x.v3),this}},EllipseCurve:z_,LineCurve:w_,LineCurve3:class extends a_{constructor(x=new zH,o=new zH){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=x,this.v2=o}getPoint(x,o=new zH){const c=o;return 1===x?c.copy(this.v2):(c.copy(this.v2).sub(this.v1),c.multiplyScalar(x).add(this.v1)),c}getPointAt(x,o){return this.getPoint(x,o)}getTangent(x,o=new zH){return o.subVectors(this.v2,this.v1).normalize()}getTangentAt(x,o){return this.getTangent(x,o)}copy(x){return super.copy(x),this.v1.copy(x.v1),this.v2.copy(x.v2),this}toJSON(){const x=super.toJSON();return x.v1=this.v1.toArray(),x.v2=this.v2.toArray(),x}fromJSON(x){return super.fromJSON(x),this.v1.fromArray(x.v1),this.v2.fromArray(x.v2),this}},QuadraticBezierCurve:g_,QuadraticBezierCurve3:class extends a_{constructor(x=new zH,o=new zH,c=new zH){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=x,this.v1=o,this.v2=c}getPoint(x,o=new zH){const c=o,L=this.v0,T=this.v1,h=this.v2;return c.set(n_(x,L.x,T.x,h.x),n_(x,L.y,T.y,h.y),n_(x,L.z,T.z,h.z)),c}copy(x){return super.copy(x),this.v0.copy(x.v0),this.v1.copy(x.v1),this.v2.copy(x.v2),this}toJSON(){const x=super.toJSON();return x.v0=this.v0.toArray(),x.v1=this.v1.toArray(),x.v2=this.v2.toArray(),x}fromJSON(x){return super.fromJSON(x),this.v0.fromArray(x.v0),this.v1.fromArray(x.v1),this.v2.fromArray(x.v2),this}},SplineCurve:R_});class oX extends a_{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(x){this.curves.push(x)}closePath(){const x=this.curves[0].getPoint(0),o=this.curves[this.curves.length-1].getPoint(1);x.equals(o)||this.curves.push(new w_(o,x))}getPoint(x,o){const c=x*this.getLength(),L=this.getCurveLengths();let T=0;for(;T<L.length;){if(L[T]>=c){const x=L[T]-c,h=this.curves[T],A=h.getLength(),E=0===A?0:1-x/A;return h.getPointAt(E,o)}T++}return null}getLength(){const x=this.getCurveLengths();return x[x.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const x=[];let o=0;for(let c=0,L=this.curves.length;c<L;c++)o+=this.curves[c].getLength(),x.push(o);return this.cacheLengths=x,x}getSpacedPoints(x=40){const o=[];for(let c=0;c<=x;c++)o.push(this.getPoint(c/x));return this.autoClose&&o.push(o[0]),o}getPoints(x=12){const o=[];let c;for(let L=0,T=this.curves;L<T.length;L++){const h=T[L],A=h.isEllipseCurve?2*x:h.isLineCurve||h.isLineCurve3?1:h.isSplineCurve?x*h.points.length:x,E=h.getPoints(A);for(let x=0;x<E.length;x++){const L=E[x];c&&c.equals(L)||(o.push(L),c=L)}}return this.autoClose&&o.length>1&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o}copy(x){super.copy(x),this.curves=[];for(let o=0,c=x.curves.length;o<c;o++){const c=x.curves[o];this.curves.push(c.clone())}return this.autoClose=x.autoClose,this}toJSON(){const x=super.toJSON();x.autoClose=this.autoClose,x.curves=[];for(let o=0,c=this.curves.length;o<c;o++){const c=this.curves[o];x.curves.push(c.toJSON())}return x}fromJSON(x){super.fromJSON(x),this.autoClose=x.autoClose,this.curves=[];for(let o=0,c=x.curves.length;o<c;o++){const c=x.curves[o];this.curves.push((new xX[c.type]).fromJSON(c))}return this}}class cX extends oX{constructor(x){super(),this.type="Path",this.currentPoint=new rH,x&&this.setFromPoints(x)}setFromPoints(x){this.moveTo(x[0].x,x[0].y);for(let o=1,c=x.length;o<c;o++)this.lineTo(x[o].x,x[o].y);return this}moveTo(x,o){return this.currentPoint.set(x,o),this}lineTo(x,o){const c=new w_(this.currentPoint.clone(),new rH(x,o));return this.curves.push(c),this.currentPoint.set(x,o),this}quadraticCurveTo(x,o,c,L){const T=new g_(this.currentPoint.clone(),new rH(x,o),new rH(c,L));return this.curves.push(T),this.currentPoint.set(c,L),this}bezierCurveTo(x,o,c,L,T,h){const A=new W_(this.currentPoint.clone(),new rH(x,o),new rH(c,L),new rH(T,h));return this.curves.push(A),this.currentPoint.set(T,h),this}splineThru(x){const o=[this.currentPoint.clone()].concat(x),c=new R_(o);return this.curves.push(c),this.currentPoint.copy(x[x.length-1]),this}arc(x,o,c,L,T,h){const A=this.currentPoint.x,E=this.currentPoint.y;return this.absarc(x+A,o+E,c,L,T,h),this}absarc(x,o,c,L,T,h){return this.absellipse(x,o,c,c,L,T,h),this}ellipse(x,o,c,L,T,h,A,E){const H=this.currentPoint.x,N=this.currentPoint.y;return this.absellipse(x+H,o+N,c,L,T,h,A,E),this}absellipse(x,o,c,L,T,h,A,E){const H=new z_(x,o,c,L,T,h,A,E);if(this.curves.length>0){const x=H.getPoint(0);x.equals(this.currentPoint)||this.lineTo(x.x,x.y)}this.curves.push(H);const N=H.getPoint(1);return this.currentPoint.copy(N),this}copy(x){return super.copy(x),this.currentPoint.copy(x.currentPoint),this}toJSON(){const x=super.toJSON();return x.currentPoint=this.currentPoint.toArray(),x}fromJSON(x){return super.fromJSON(x),this.currentPoint.fromArray(x.currentPoint),this}}class LX extends cX{constructor(x){super(x),this.uuid=HH(),this.type="Shape",this.holes=[]}getPointsHoles(x){const o=[];for(let c=0,L=this.holes.length;c<L;c++)o[c]=this.holes[c].getPoints(x);return o}extractPoints(x){return{shape:this.getPoints(x),holes:this.getPointsHoles(x)}}copy(x){super.copy(x),this.holes=[];for(let o=0,c=x.holes.length;o<c;o++){const c=x.holes[o];this.holes.push(c.clone())}return this}toJSON(){const x=super.toJSON();x.uuid=this.uuid,x.holes=[];for(let o=0,c=this.holes.length;o<c;o++){const c=this.holes[o];x.holes.push(c.toJSON())}return x}fromJSON(x){super.fromJSON(x),this.uuid=x.uuid,this.holes=[];for(let o=0,c=x.holes.length;o<c;o++){const c=x.holes[o];this.holes.push((new cX).fromJSON(c))}return this}}function TX(x,o,c,L,T){let h,A;if(T===function(x,o,c,L){let T=0;for(let h=o,A=c-L;h<c;h+=L)T+=(x[A]-x[h])*(x[h+1]+x[A+1]),A=h;return T}(x,o,c,L)>0)for(h=o;h<c;h+=L)A=iX(h,x[h],x[h+1],A);else for(h=c-L;h>=o;h-=L)A=iX(h,x[h],x[h+1],A);return A&&YX(A,A.next)&&(MX(A),A=A.next),A}function hX(x,o){if(!x)return x;o||(o=x);let c,L=x;do{if(c=!1,L.steiner||!YX(L,L.next)&&0!==BX(L.prev,L,L.next))L=L.next;else{if(MX(L),L=o=L.prev,L===L.next)break;c=!0}}while(c||L!==o);return o}function AX(x,o,c,L,T,h,A){if(!x)return;!A&&h&&function(x,o,c,L){let T=x;do{0===T.z&&(T.z=XX(T.x,T.y,o,c,L)),T.prevZ=T.prev,T.nextZ=T.next,T=T.next}while(T!==x);T.prevZ.nextZ=null,T.prevZ=null,function(x){let o,c,L,T,h,A,E,H,N=1;do{for(c=x,x=null,h=null,A=0;c;){for(A++,L=c,E=0,o=0;o<N&&(E++,L=L.nextZ,L);o++);for(H=N;E>0||H>0&&L;)0!==E&&(0===H||!L||c.z<=L.z)?(T=c,c=c.nextZ,E--):(T=L,L=L.nextZ,H--),h?h.nextZ=T:x=T,T.prevZ=h,h=T;c=L}h.nextZ=null,N*=2}while(A>1)}(T)}(x,L,T,h);let E,H,N=x;for(;x.prev!==x.next;)if(E=x.prev,H=x.next,h?HX(x,L,T,h):EX(x))o.push(E.i/c|0),o.push(x.i/c|0),o.push(H.i/c|0),MX(x),x=H.next,N=H.next;else if((x=H)===N){A?1===A?AX(x=NX(hX(x),o,c),o,c,L,T,h,2):2===A&&QX(x,o,c,L,T,h):AX(hX(x),o,c,L,T,h,1);break}}function EX(x){const o=x.prev,c=x,L=x.next;if(BX(o,c,L)>=0)return!1;const T=o.x,h=c.x,A=L.x,E=o.y,H=c.y,N=L.y,Q=T<h?T<A?T:A:h<A?h:A,I=E<H?E<N?E:N:H<N?H:N,k=T>h?T>A?T:A:h>A?h:A,_=E>H?E>N?E:N:H>N?H:N;let X=L.next;for(;X!==o;){if(X.x>=Q&&X.x<=k&&X.y>=I&&X.y<=_&&yX(T,E,h,H,A,N,X.x,X.y)&&BX(X.prev,X,X.next)>=0)return!1;X=X.next}return!0}function HX(x,o,c,L){const T=x.prev,h=x,A=x.next;if(BX(T,h,A)>=0)return!1;const E=T.x,H=h.x,N=A.x,Q=T.y,I=h.y,k=A.y,_=E<H?E<N?E:N:H<N?H:N,X=Q<I?Q<k?Q:k:I<k?I:k,r=E>H?E>N?E:N:H>N?H:N,y=Q>I?Q>k?Q:k:I>k?I:k,v=XX(_,X,o,c,L),B=XX(r,y,o,c,L);let Y=x.prevZ,F=x.nextZ;for(;Y&&Y.z>=v&&F&&F.z<=B;){if(Y.x>=_&&Y.x<=r&&Y.y>=X&&Y.y<=y&&Y!==T&&Y!==A&&yX(E,Q,H,I,N,k,Y.x,Y.y)&&BX(Y.prev,Y,Y.next)>=0)return!1;if(Y=Y.prevZ,F.x>=_&&F.x<=r&&F.y>=X&&F.y<=y&&F!==T&&F!==A&&yX(E,Q,H,I,N,k,F.x,F.y)&&BX(F.prev,F,F.next)>=0)return!1;F=F.nextZ}for(;Y&&Y.z>=v;){if(Y.x>=_&&Y.x<=r&&Y.y>=X&&Y.y<=y&&Y!==T&&Y!==A&&yX(E,Q,H,I,N,k,Y.x,Y.y)&&BX(Y.prev,Y,Y.next)>=0)return!1;Y=Y.prevZ}for(;F&&F.z<=B;){if(F.x>=_&&F.x<=r&&F.y>=X&&F.y<=y&&F!==T&&F!==A&&yX(E,Q,H,I,N,k,F.x,F.y)&&BX(F.prev,F,F.next)>=0)return!1;F=F.nextZ}return!0}function NX(x,o,c){let L=x;do{const T=L.prev,h=L.next.next;!YX(T,h)&&FX(T,L,L.next,h)&&CX(T,h)&&CX(h,T)&&(o.push(T.i/c|0),o.push(L.i/c|0),o.push(h.i/c|0),MX(L),MX(L.next),L=x=h),L=L.next}while(L!==x);return hX(L)}function QX(x,o,c,L,T,h){let A=x;do{let x=A.next.next;for(;x!==A.prev;){if(A.i!==x.i&&vX(A,x)){let E=VX(A,x);return A=hX(A,A.next),E=hX(E,E.next),AX(A,o,c,L,T,h,0),void AX(E,o,c,L,T,h,0)}x=x.next}A=A.next}while(A!==x)}function IX(x,o){return x.x-o.x}function kX(x,o){const c=function(x,o){let c,L=o,T=-1/0;const h=x.x,A=x.y;do{if(A<=L.y&&A>=L.next.y&&L.next.y!==L.y){const x=L.x+(A-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(x<=h&&x>T&&(T=x,c=L.x<L.next.x?L:L.next,x===h))return c}L=L.next}while(L!==o);if(!c)return null;const E=c,H=c.x,N=c.y;let Q,I=1/0;L=c;do{h>=L.x&&L.x>=H&&h!==L.x&&yX(A<N?h:T,A,H,N,A<N?T:h,A,L.x,L.y)&&(Q=Math.abs(A-L.y)/(h-L.x),CX(L,x)&&(Q<I||Q===I&&(L.x>c.x||L.x===c.x&&_X(c,L)))&&(c=L,I=Q)),L=L.next}while(L!==E);return c}(x,o);if(!c)return o;const L=VX(c,x);return hX(L,L.next),hX(c,c.next)}function _X(x,o){return BX(x.prev,x,o.prev)<0&&BX(o.next,x,x.next)<0}function XX(x,o,c,L,T){return(x=1431655765&((x=858993459&((x=252645135&((x=16711935&((x=(x-c)*T|0)|x<<8))|x<<4))|x<<2))|x<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-L)*T|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function rX(x){let o=x,c=x;do{(o.x<c.x||o.x===c.x&&o.y<c.y)&&(c=o),o=o.next}while(o!==x);return c}function yX(x,o,c,L,T,h,A,E){return(T-A)*(o-E)>=(x-A)*(h-E)&&(x-A)*(L-E)>=(c-A)*(o-E)&&(c-A)*(h-E)>=(T-A)*(L-E)}function vX(x,o){return x.next.i!==o.i&&x.prev.i!==o.i&&!function(x,o){let c=x;do{if(c.i!==x.i&&c.next.i!==x.i&&c.i!==o.i&&c.next.i!==o.i&&FX(c,c.next,x,o))return!0;c=c.next}while(c!==x);return!1}(x,o)&&(CX(x,o)&&CX(o,x)&&function(x,o){let c=x,L=!1;const T=(x.x+o.x)/2,h=(x.y+o.y)/2;do{c.y>h!=c.next.y>h&&c.next.y!==c.y&&T<(c.next.x-c.x)*(h-c.y)/(c.next.y-c.y)+c.x&&(L=!L),c=c.next}while(c!==x);return L}(x,o)&&(BX(x.prev,x,o.prev)||BX(x,o.prev,o))||YX(x,o)&&BX(x.prev,x,x.next)>0&&BX(o.prev,o,o.next)>0)}function BX(x,o,c){return(o.y-x.y)*(c.x-o.x)-(o.x-x.x)*(c.y-o.y)}function YX(x,o){return x.x===o.x&&x.y===o.y}function FX(x,o,c,L){const T=mX(BX(x,o,c)),h=mX(BX(x,o,L)),A=mX(BX(c,L,x)),E=mX(BX(c,L,o));return T!==h&&A!==E||!(0!==T||!tX(x,c,o))||!(0!==h||!tX(x,L,o))||!(0!==A||!tX(c,x,L))||!(0!==E||!tX(c,o,L))}function tX(x,o,c){return o.x<=Math.max(x.x,c.x)&&o.x>=Math.min(x.x,c.x)&&o.y<=Math.max(x.y,c.y)&&o.y>=Math.min(x.y,c.y)}function mX(x){return x>0?1:x<0?-1:0}function CX(x,o){return BX(x.prev,x,x.next)<0?BX(x,o,x.next)>=0&&BX(x,x.prev,o)>=0:BX(x,o,x.prev)<0||BX(x,x.next,o)<0}function VX(x,o){const c=new ZX(x.i,x.x,x.y),L=new ZX(o.i,o.x,o.y),T=x.next,h=o.prev;return x.next=o,o.prev=x,c.next=T,T.prev=c,L.next=c,c.prev=L,h.next=L,L.prev=h,L}function iX(x,o,c,L){const T=new ZX(x,o,c);return L?(T.next=L.next,T.prev=L,L.next.prev=T,L.next=T):(T.prev=T,T.next=T),T}function MX(x){x.next.prev=x.prev,x.prev.next=x.next,x.prevZ&&(x.prevZ.nextZ=x.nextZ),x.nextZ&&(x.nextZ.prevZ=x.prevZ)}function ZX(x,o,c){this.i=x,this.x=o,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class SX{static area(x){const o=x.length;let c=0;for(let L=o-1,T=0;T<o;L=T++)c+=x[L].x*x[T].y-x[T].x*x[L].y;return.5*c}static isClockWise(x){return SX.area(x)<0}static triangulateShape(x,o){const c=[],L=[],T=[];uX(x),dX(c,x);let h=x.length;o.forEach(uX);for(let x=0;x<o.length;x++)L.push(h),h+=o[x].length,dX(c,o[x]);const A=function(x,o,c=2){const L=o&&o.length,T=L?o[0]*c:x.length;let h=TX(x,0,T,c,!0);const A=[];if(!h||h.next===h.prev)return A;let E,H,N,Q,I,k,_;if(L&&(h=function(x,o,c,L){const T=[];let h,A,E,H,N;for(h=0,A=o.length;h<A;h++)E=o[h]*L,H=h<A-1?o[h+1]*L:x.length,N=TX(x,E,H,L,!1),N===N.next&&(N.steiner=!0),T.push(rX(N));for(T.sort(IX),h=0;h<T.length;h++)c=kX(T[h],c);return c}(x,o,h,c)),x.length>80*c){E=N=x[0],H=Q=x[1];for(let o=c;o<T;o+=c)I=x[o],k=x[o+1],I<E&&(E=I),k<H&&(H=k),I>N&&(N=I),k>Q&&(Q=k);_=Math.max(N-E,Q-H),_=0!==_?32767/_:0}return AX(h,A,c,E,H,_,0),A}(c,L);for(let x=0;x<A.length;x+=3)T.push(A.slice(x,x+3));return T}}function uX(x){const o=x.length;o>2&&x[o-1].equals(x[0])&&x.pop()}function dX(x,o){for(let c=0;c<o.length;c++)x.push(o[c].x),x.push(o[c].y)}function OX(x,o,c){return eX(x)?new x.constructor(x.subarray(o,void 0!==c?c:x.length)):x.slice(o,c)}function jX(x,o,c){return!x||!c&&x.constructor===o?x:"number"==typeof o.BYTES_PER_ELEMENT?new o(x):Array.prototype.slice.call(x)}function eX(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)}class qX{constructor(x,o,c,L){this.parameterPositions=x,this._cachedIndex=0,this.resultBuffer=void 0!==L?L:new o.constructor(c),this.sampleValues=o,this.valueSize=c,this.settings=null,this.DefaultSettings_={}}evaluate(x){const o=this.parameterPositions;let c=this._cachedIndex,L=o[c],T=o[c-1];x:{o:{let h;c:{L:if(!(x<L)){for(let h=c+2;;){if(void 0===L){if(x<T)break L;return c=o.length,this._cachedIndex=c,this.copySampleValue_(c-1)}if(c===h)break;if(T=L,L=o[++c],x<L)break o}h=o.length;break c}if(x>=T)break x;{const A=o[1];x<A&&(c=2,T=A);for(let h=c-2;;){if(void 0===T)return this._cachedIndex=0,this.copySampleValue_(0);if(c===h)break;if(L=T,T=o[--c-1],x>=T)break o}h=c,c=0}}for(;c<h;){const L=c+h>>>1;x<o[L]?h=L:c=L+1}if(L=o[c],T=o[c-1],void 0===T)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===L)return c=o.length,this._cachedIndex=c,this.copySampleValue_(c-1)}this._cachedIndex=c,this.intervalChanged_(c,T,L)}return this.interpolate_(c,T,x,L)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(x){const o=this.resultBuffer,c=this.sampleValues,L=this.valueSize,T=x*L;for(let x=0;x!==L;++x)o[x]=c[T+x];return o}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class fX extends qX{constructor(x,o,c,L){super(x,o,c,L),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(x,o,c){const L=this.parameterPositions;let T=x-2,h=x+1,A=L[T],E=L[h];if(void 0===A)switch(this.getSettings_().endingStart){case 2401:T=x,A=2*o-c;break;case 2402:T=L.length-2,A=o+L[T]-L[T+1];break;default:T=x,A=c}if(void 0===E)switch(this.getSettings_().endingEnd){case 2401:h=x,E=2*c-o;break;case 2402:h=1,E=c+L[1]-L[0];break;default:h=x-1,E=o}const H=.5*(c-o),N=this.valueSize;this._weightPrev=H/(o-A),this._weightNext=H/(E-c),this._offsetPrev=T*N,this._offsetNext=h*N}interpolate_(x,o,c,L){const T=this.resultBuffer,h=this.sampleValues,A=this.valueSize,E=x*A,H=E-A,N=this._offsetPrev,Q=this._offsetNext,I=this._weightPrev,k=this._weightNext,_=(c-o)/(L-o),X=_*_,r=X*_,y=-I*r+2*I*X-I*_,v=(1+I)*r+(-1.5-2*I)*X+(-.5+I)*_+1,B=(-1-k)*r+(1.5+k)*X+.5*_,Y=k*r-k*X;for(let x=0;x!==A;++x)T[x]=y*h[N+x]+v*h[H+x]+B*h[E+x]+Y*h[Q+x];return T}}class UX extends qX{constructor(x,o,c,L){super(x,o,c,L)}interpolate_(x,o,c,L){const T=this.resultBuffer,h=this.sampleValues,A=this.valueSize,E=x*A,H=E-A,N=(c-o)/(L-o),Q=1-N;for(let x=0;x!==A;++x)T[x]=h[H+x]*Q+h[E+x]*N;return T}}class sX extends qX{constructor(x,o,c,L){super(x,o,c,L)}interpolate_(x){return this.copySampleValue_(x-1)}}class DX{constructor(x,o,c,L){if(void 0===x)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===o||0===o.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+x);this.name=x,this.times=jX(o,this.TimeBufferType),this.values=jX(c,this.ValueBufferType),this.setInterpolation(L||this.DefaultInterpolation)}static toJSON(x){const o=x.constructor;let c;if(o.toJSON!==this.toJSON)c=o.toJSON(x);else{c={name:x.name,times:jX(x.times,Array),values:jX(x.values,Array)};const o=x.getInterpolation();o!==x.DefaultInterpolation&&(c.interpolation=o)}return c.type=x.ValueTypeName,c}InterpolantFactoryMethodDiscrete(x){return new sX(this.times,this.values,this.getValueSize(),x)}InterpolantFactoryMethodLinear(x){return new UX(this.times,this.values,this.getValueSize(),x)}InterpolantFactoryMethodSmooth(x){return new fX(this.times,this.values,this.getValueSize(),x)}setInterpolation(x){let o;switch(x){case 2300:o=this.InterpolantFactoryMethodDiscrete;break;case 2301:o=this.InterpolantFactoryMethodLinear;break;case 2302:o=this.InterpolantFactoryMethodSmooth}if(void 0===o){const o="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(x===this.DefaultInterpolation)throw new Error(o);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",o),this}return this.createInterpolant=o,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(x){if(0!==x){const o=this.times;for(let c=0,L=o.length;c!==L;++c)o[c]+=x}return this}scale(x){if(1!==x){const o=this.times;for(let c=0,L=o.length;c!==L;++c)o[c]*=x}return this}trim(x,o){const c=this.times,L=c.length;let T=0,h=L-1;for(;T!==L&&c[T]<x;)++T;for(;-1!==h&&c[h]>o;)--h;if(++h,0!==T||h!==L){T>=h&&(h=Math.max(h,1),T=h-1);const x=this.getValueSize();this.times=OX(c,T,h),this.values=OX(this.values,T*x,h*x)}return this}validate(){let x=!0;const o=this.getValueSize();o-Math.floor(o)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),x=!1);const c=this.times,L=this.values,T=c.length;0===T&&(console.error("THREE.KeyframeTrack: Track is empty.",this),x=!1);let h=null;for(let o=0;o!==T;o++){const L=c[o];if("number"==typeof L&&isNaN(L)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,L),x=!1;break}if(null!==h&&h>L){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,L,h),x=!1;break}h=L}if(void 0!==L&&eX(L))for(let o=0,c=L.length;o!==c;++o){const c=L[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),x=!1;break}}return x}optimize(){const x=OX(this.times),o=OX(this.values),c=this.getValueSize(),L=2302===this.getInterpolation(),T=x.length-1;let h=1;for(let A=1;A<T;++A){let T=!1;const E=x[A];if(E!==x[A+1]&&(1!==A||E!==x[0]))if(L)T=!0;else{const x=A*c,L=x-c,h=x+c;for(let A=0;A!==c;++A){const c=o[x+A];if(c!==o[L+A]||c!==o[h+A]){T=!0;break}}}if(T){if(A!==h){x[h]=x[A];const L=A*c,T=h*c;for(let x=0;x!==c;++x)o[T+x]=o[L+x]}++h}}if(T>0){x[h]=x[T];for(let x=T*c,L=h*c,A=0;A!==c;++A)o[L+A]=o[x+A];++h}return h!==x.length?(this.times=OX(x,0,h),this.values=OX(o,0,h*c)):(this.times=x,this.values=o),this}clone(){const x=OX(this.times,0),o=OX(this.values,0),c=new(0,this.constructor)(this.name,x,o);return c.createInterpolant=this.createInterpolant,c}}DX.prototype.TimeBufferType=Float32Array,DX.prototype.ValueBufferType=Float32Array,DX.prototype.DefaultInterpolation=2301;class $X extends DX{}$X.prototype.ValueTypeName="bool",$X.prototype.ValueBufferType=Array,$X.prototype.DefaultInterpolation=2300,$X.prototype.InterpolantFactoryMethodLinear=void 0,$X.prototype.InterpolantFactoryMethodSmooth=void 0,class extends DX{}.prototype.ValueTypeName="color",class extends DX{}.prototype.ValueTypeName="number";class aX extends qX{constructor(x,o,c,L){super(x,o,c,L)}interpolate_(x,o,c,L){const T=this.resultBuffer,h=this.sampleValues,A=this.valueSize,E=(c-o)/(L-o);let H=x*A;for(let x=H+A;H!==x;H+=4)aH.slerpFlat(T,0,h,H-A,h,H,E);return T}}class zX extends DX{InterpolantFactoryMethodLinear(x){return new aX(this.times,this.values,this.getValueSize(),x)}}zX.prototype.ValueTypeName="quaternion",zX.prototype.DefaultInterpolation=2301,zX.prototype.InterpolantFactoryMethodSmooth=void 0;class lX extends DX{}lX.prototype.ValueTypeName="string",lX.prototype.ValueBufferType=Array,lX.prototype.DefaultInterpolation=2300,lX.prototype.InterpolantFactoryMethodLinear=void 0,lX.prototype.InterpolantFactoryMethodSmooth=void 0,class extends DX{}.prototype.ValueTypeName="vector";const GX={enabled:!1,files:{},add:function(x,o){!1!==this.enabled&&(this.files[x]=o)},get:function(x){if(!1!==this.enabled)return this.files[x]},remove:function(x){delete this.files[x]},clear:function(){this.files={}}},pX=new class{constructor(x,o,c){const L=this;let T,h=!1,A=0,E=0;const H=[];this.onStart=void 0,this.onLoad=x,this.onProgress=o,this.onError=c,this.itemStart=function(x){E++,!1===h&&void 0!==L.onStart&&L.onStart(x,A,E),h=!0},this.itemEnd=function(x){A++,void 0!==L.onProgress&&L.onProgress(x,A,E),A===E&&(h=!1,void 0!==L.onLoad&&L.onLoad())},this.itemError=function(x){void 0!==L.onError&&L.onError(x)},this.resolveURL=function(x){return T?T(x):x},this.setURLModifier=function(x){return T=x,this},this.addHandler=function(x,o){return H.push(x,o),this},this.removeHandler=function(x){const o=H.indexOf(x);return-1!==o&&H.splice(o,2),this},this.getHandler=function(x){for(let o=0,c=H.length;o<c;o+=2){const c=H[o],L=H[o+1];if(c.global&&(c.lastIndex=0),c.test(x))return L}return null}}};class PX{constructor(x){this.manager=void 0!==x?x:pX,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(x,o){const c=this;return new Promise((function(L,T){c.load(x,L,o,T)}))}parse(){}setCrossOrigin(x){return this.crossOrigin=x,this}setWithCredentials(x){return this.withCredentials=x,this}setPath(x){return this.path=x,this}setResourcePath(x){return this.resourcePath=x,this}setRequestHeader(x){return this.requestHeader=x,this}}PX.DEFAULT_MATERIAL_NAME="__DEFAULT";const KX={};class JX extends Error{constructor(x,o){super(x),this.response=o}}class nX extends PX{constructor(x){super(x)}load(x,o,c,L){void 0===x&&(x=""),void 0!==this.path&&(x=this.path+x),x=this.manager.resolveURL(x);const T=GX.get(x);if(void 0!==T)return this.manager.itemStart(x),setTimeout((()=>{o&&o(T),this.manager.itemEnd(x)}),0),T;if(void 0!==KX[x])return void KX[x].push({onLoad:o,onProgress:c,onError:L});KX[x]=[],KX[x].push({onLoad:o,onProgress:c,onError:L});const h=new Request(x,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),A=this.mimeType,E=this.responseType;fetch(h).then((o=>{if(200===o.status||0===o.status){if(0===o.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===o.body||void 0===o.body.getReader)return o;const c=KX[x],L=o.body.getReader(),T=o.headers.get("Content-Length")||o.headers.get("X-File-Size"),h=T?parseInt(T):0,A=0!==h;let E=0;const H=new ReadableStream({start(x){!function o(){L.read().then((({done:L,value:T})=>{if(L)x.close();else{E+=T.byteLength;const L=new ProgressEvent("progress",{lengthComputable:A,loaded:E,total:h});for(let x=0,o=c.length;x<o;x++){const o=c[x];o.onProgress&&o.onProgress(L)}x.enqueue(T),o()}}))}()}});return new Response(H)}throw new JX(`fetch for "${o.url}" responded with ${o.status}: ${o.statusText}`,o)})).then((x=>{switch(E){case"arraybuffer":return x.arrayBuffer();case"blob":return x.blob();case"document":return x.text().then((x=>(new DOMParser).parseFromString(x,A)));case"json":return x.json();default:if(void 0===A)return x.text();{const o=/charset="?([^;"\s]*)"?/i.exec(A),c=o&&o[1]?o[1].toLowerCase():void 0,L=new TextDecoder(c);return x.arrayBuffer().then((x=>L.decode(x)))}}})).then((o=>{GX.add(x,o);const c=KX[x];delete KX[x];for(let x=0,L=c.length;x<L;x++){const L=c[x];L.onLoad&&L.onLoad(o)}})).catch((o=>{const c=KX[x];if(void 0===c)throw this.manager.itemError(x),o;delete KX[x];for(let x=0,L=c.length;x<L;x++){const L=c[x];L.onError&&L.onError(o)}this.manager.itemError(x)})).finally((()=>{this.manager.itemEnd(x)})),this.manager.itemStart(x)}setResponseType(x){return this.responseType=x,this}setMimeType(x){return this.mimeType=x,this}}class bX{constructor(x=!0){this.autoStart=x,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=WX(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let x=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const o=WX();x=(o-this.oldTime)/1e3,this.oldTime=o,this.elapsedTime+=x}return x}}function WX(){return("undefined"==typeof performance?Date:performance).now()}const wX=new RegExp("[\\[\\]\\.:\\/]","g"),gX="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",RX=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]")+/(WCOD+)?/.source.replace("WCOD",gX)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]")+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]")+"$"),xr=["material","materials","bones","map"];class or{constructor(x,o,c){this.path=o,this.parsedPath=c||or.parseTrackName(o),this.node=or.findNode(x,this.parsedPath.nodeName),this.rootNode=x,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(x,o,c){return x&&x.isAnimationObjectGroup?new or.Composite(x,o,c):new or(x,o,c)}static sanitizeNodeName(x){return x.replace(/\s/g,"_").replace(wX,"")}static parseTrackName(x){const o=RX.exec(x);if(null===o)throw new Error("PropertyBinding: Cannot parse trackName: "+x);const c={nodeName:o[2],objectName:o[3],objectIndex:o[4],propertyName:o[5],propertyIndex:o[6]},L=c.nodeName&&c.nodeName.lastIndexOf(".");if(void 0!==L&&-1!==L){const x=c.nodeName.substring(L+1);-1!==xr.indexOf(x)&&(c.nodeName=c.nodeName.substring(0,L),c.objectName=x)}if(null===c.propertyName||0===c.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+x);return c}static findNode(x,o){if(void 0===o||""===o||"."===o||-1===o||o===x.name||o===x.uuid)return x;if(x.skeleton){const c=x.skeleton.getBoneByName(o);if(void 0!==c)return c}if(x.children){const c=function(x){for(let L=0;L<x.length;L++){const T=x[L];if(T.name===o||T.uuid===o)return T;const h=c(T.children);if(h)return h}return null},L=c(x.children);if(L)return L}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(x,o){x[o]=this.targetObject[this.propertyName]}_getValue_array(x,o){const c=this.resolvedProperty;for(let L=0,T=c.length;L!==T;++L)x[o++]=c[L]}_getValue_arrayElement(x,o){x[o]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(x,o){this.resolvedProperty.toArray(x,o)}_setValue_direct(x,o){this.targetObject[this.propertyName]=x[o]}_setValue_direct_setNeedsUpdate(x,o){this.targetObject[this.propertyName]=x[o],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(x,o){this.targetObject[this.propertyName]=x[o],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(x,o){const c=this.resolvedProperty;for(let L=0,T=c.length;L!==T;++L)c[L]=x[o++]}_setValue_array_setNeedsUpdate(x,o){const c=this.resolvedProperty;for(let L=0,T=c.length;L!==T;++L)c[L]=x[o++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(x,o){const c=this.resolvedProperty;for(let L=0,T=c.length;L!==T;++L)c[L]=x[o++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(x,o){this.resolvedProperty[this.propertyIndex]=x[o]}_setValue_arrayElement_setNeedsUpdate(x,o){this.resolvedProperty[this.propertyIndex]=x[o],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(x,o){this.resolvedProperty[this.propertyIndex]=x[o],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(x,o){this.resolvedProperty.fromArray(x,o)}_setValue_fromArray_setNeedsUpdate(x,o){this.resolvedProperty.fromArray(x,o),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(x,o){this.resolvedProperty.fromArray(x,o),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(x,o){this.bind(),this.getValue(x,o)}_setValue_unbound(x,o){this.bind(),this.setValue(x,o)}bind(){let x=this.node;const o=this.parsedPath,c=o.objectName,L=o.propertyName;let T=o.propertyIndex;if(x||(x=or.findNode(this.rootNode,o.nodeName),this.node=x),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!x)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(c){let L=o.objectIndex;switch(c){case"materials":if(!x.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!x.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);x=x.material.materials;break;case"bones":if(!x.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);x=x.skeleton.bones;for(let o=0;o<x.length;o++)if(x[o].name===L){L=o;break}break;case"map":if("map"in x){x=x.map;break}if(!x.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!x.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);x=x.material.map;break;default:if(void 0===x[c])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);x=x[c]}if(void 0!==L){if(void 0===x[L])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,x);x=x[L]}}const h=x[L];if(void 0===h){const c=o.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+L+" but it wasn't found.",x)}let A=this.Versioning.None;this.targetObject=x,void 0!==x.needsUpdate?A=this.Versioning.NeedsUpdate:void 0!==x.matrixWorldNeedsUpdate&&(A=this.Versioning.MatrixWorldNeedsUpdate);let E=this.BindingType.Direct;if(void 0!==T){if("morphTargetInfluences"===L){if(!x.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!x.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==x.morphTargetDictionary[T]&&(T=x.morphTargetDictionary[T])}E=this.BindingType.ArrayElement,this.resolvedProperty=h,this.propertyIndex=T}else void 0!==h.fromArray&&void 0!==h.toArray?(E=this.BindingType.HasFromToArray,this.resolvedProperty=h):Array.isArray(h)?(E=this.BindingType.EntireArray,this.resolvedProperty=h):this.propertyName=L;this.getValue=this.GetterByBindingType[E],this.setValue=this.SetterByBindingTypeAndVersioning[E][A]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}or.Composite=class{constructor(x,o,c){const L=c||or.parseTrackName(o);this._targetGroup=x,this._bindings=x.subscribe_(o,L)}getValue(x,o){this.bind();const c=this._targetGroup.nCachedObjects_,L=this._bindings[c];void 0!==L&&L.getValue(x,o)}setValue(x,o){const c=this._bindings;for(let L=this._targetGroup.nCachedObjects_,T=c.length;L!==T;++L)c[L].setValue(x,o)}bind(){const x=this._bindings;for(let o=this._targetGroup.nCachedObjects_,c=x.length;o!==c;++o)x[o].bind()}unbind(){const x=this._bindings;for(let o=this._targetGroup.nCachedObjects_,c=x.length;o!==c;++o)x[o].unbind()}},or.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},or.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},or.prototype.GetterByBindingType=[or.prototype._getValue_direct,or.prototype._getValue_array,or.prototype._getValue_arrayElement,or.prototype._getValue_toArray],or.prototype.SetterByBindingTypeAndVersioning=[[or.prototype._setValue_direct,or.prototype._setValue_direct_setNeedsUpdate,or.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[or.prototype._setValue_array,or.prototype._setValue_array_setNeedsUpdate,or.prototype._setValue_array_setMatrixWorldNeedsUpdate],[or.prototype._setValue_arrayElement,or.prototype._setValue_arrayElement_setNeedsUpdate,or.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[or.prototype._setValue_fromArray,or.prototype._setValue_fromArray_setNeedsUpdate,or.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);const cr=new rH;class Lr{constructor(x=new rH(1/0,1/0),o=new rH(-1/0,-1/0)){this.isBox2=!0,this.min=x,this.max=o}set(x,o){return this.min.copy(x),this.max.copy(o),this}setFromPoints(x){this.makeEmpty();for(let o=0,c=x.length;o<c;o++)this.expandByPoint(x[o]);return this}setFromCenterAndSize(x,o){const c=cr.copy(o).multiplyScalar(.5);return this.min.copy(x).sub(c),this.max.copy(x).add(c),this}clone(){return(new this.constructor).copy(this)}copy(x){return this.min.copy(x.min),this.max.copy(x.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(x){return this.isEmpty()?x.set(0,0):x.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(x){return this.isEmpty()?x.set(0,0):x.subVectors(this.max,this.min)}expandByPoint(x){return this.min.min(x),this.max.max(x),this}expandByVector(x){return this.min.sub(x),this.max.add(x),this}expandByScalar(x){return this.min.addScalar(-x),this.max.addScalar(x),this}containsPoint(x){return!(x.x<this.min.x||x.x>this.max.x||x.y<this.min.y||x.y>this.max.y)}containsBox(x){return this.min.x<=x.min.x&&x.max.x<=this.max.x&&this.min.y<=x.min.y&&x.max.y<=this.max.y}getParameter(x,o){return o.set((x.x-this.min.x)/(this.max.x-this.min.x),(x.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(x){return!(x.max.x<this.min.x||x.min.x>this.max.x||x.max.y<this.min.y||x.min.y>this.max.y)}clampPoint(x,o){return o.copy(x).clamp(this.min,this.max)}distanceToPoint(x){return this.clampPoint(x,cr).distanceTo(x)}intersect(x){return this.min.max(x.min),this.max.min(x.max),this.isEmpty()&&this.makeEmpty(),this}union(x){return this.min.min(x.min),this.max.max(x.max),this}translate(x){return this.min.add(x),this.max.add(x),this}equals(x){return x.min.equals(this.min)&&x.max.equals(this.max)}}class Tr{constructor(){this.type="ShapePath",this.color=new AQ,this.subPaths=[],this.currentPath=null}moveTo(x,o){return this.currentPath=new cX,this.subPaths.push(this.currentPath),this.currentPath.moveTo(x,o),this}lineTo(x,o){return this.currentPath.lineTo(x,o),this}quadraticCurveTo(x,o,c,L){return this.currentPath.quadraticCurveTo(x,o,c,L),this}bezierCurveTo(x,o,c,L,T,h){return this.currentPath.bezierCurveTo(x,o,c,L,T,h),this}splineThru(x){return this.currentPath.splineThru(x),this}toShapes(x){function o(x,o){const c=o.length;let L=!1;for(let T=c-1,h=0;h<c;T=h++){let c=o[T],A=o[h],E=A.x-c.x,H=A.y-c.y;if(Math.abs(H)>Number.EPSILON){if(H<0&&(c=o[h],E=-E,A=o[T],H=-H),x.y<c.y||x.y>A.y)continue;if(x.y===c.y){if(x.x===c.x)return!0}else{const o=H*(x.x-c.x)-E*(x.y-c.y);if(0===o)return!0;if(o<0)continue;L=!L}}else{if(x.y!==c.y)continue;if(A.x<=x.x&&x.x<=c.x||c.x<=x.x&&x.x<=A.x)return!0}}return L}const c=SX.isClockWise,L=this.subPaths;if(0===L.length)return[];let T,h,A;const E=[];if(1===L.length)return h=L[0],A=new LX,A.curves=h.curves,E.push(A),E;let H=!c(L[0].getPoints());H=x?!H:H;const N=[],Q=[];let I,k,_=[],X=0;Q[X]=void 0,_[X]=[];for(let o=0,A=L.length;o<A;o++)h=L[o],I=h.getPoints(),T=c(I),T=x?!T:T,T?(!H&&Q[X]&&X++,Q[X]={s:new LX,p:I},Q[X].s.curves=h.curves,H&&X++,_[X]=[]):_[X].push({h,p:I[0]});if(!Q[0])return function(x){const o=[];for(let c=0,L=x.length;c<L;c++){const L=x[c],T=new LX;T.curves=L.curves,o.push(T)}return o}(L);if(Q.length>1){let x=!1,c=0;for(let x=0,o=Q.length;x<o;x++)N[x]=[];for(let L=0,T=Q.length;L<T;L++){const T=_[L];for(let h=0;h<T.length;h++){const A=T[h];let E=!0;for(let T=0;T<Q.length;T++)o(A.p,Q[T].p)&&(L!==T&&c++,E?(E=!1,N[T].push(A)):x=!0);E&&N[L].push(A)}}c>0&&!1===x&&(_=N)}for(let x=0,o=Q.length;x<o;x++){A=Q[x].s,E.push(A),k=_[x];for(let x=0,o=k.length;x<o;x++)A.holes.push(k[x].h)}return E}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"155"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="155");class hr{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Ar=new YI(-1,1,1,-1,0,1),Er=new mQ;Er.setAttribute("position",new XQ([-1,3,0,-1,-1,0,3,-1,0],3)),Er.setAttribute("uv",new XQ([0,2,0,0,2,0],2));class Hr{constructor(x){this._mesh=new aQ(Er,x)}dispose(){this._mesh.geometry.dispose()}render(x){x.render(this._mesh,Ar)}get material(){return this._mesh.material}set material(x){this._mesh.material=x}}const Nr={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}"};class Qr extends hr{constructor(x,o,c,L){super(),this.renderScene=o,this.renderCamera=c,this.selectedObjects=void 0!==L?L:[],this.visibleEdgeColor=new AQ(1,1,1),this.hiddenEdgeColor=new AQ(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=void 0!==x?new rH(x.x,x.y):new rH(256,256);const T=Math.round(this.resolution.x/this.downSampleRatio),h=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new DH(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new C_,this.depthMaterial.side=2,this.depthMaterial.depthPacking=3201,this.depthMaterial.blending=0,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=2,this.prepareMaskMaterial.fragmentShader=function(x,o){const c=o.isPerspectiveCamera?"perspective":"orthographic";return x.replace(/DEPTH_TO_VIEW_Z/g,c+"DepthToViewZ")}(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new DH(this.resolution.x,this.resolution.y,{type:1016}),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new DH(T,h,{type:1016}),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new DH(T,h,{type:1016}),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new DH(Math.round(T/2),Math.round(h/2),{type:1016}),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new DH(T,h,{type:1016}),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new DH(Math.round(T/2),Math.round(h/2),{type:1016}),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1,this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value.set(T,h),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(T/2),Math.round(h/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial();const A=Nr;this.copyUniforms=KQ.clone(A.uniforms),this.materialCopy=new JQ({uniforms:this.copyUniforms,vertexShader:A.vertexShader,fragmentShader:A.fragmentShader,blending:0,depthTest:!1,depthWrite:!1}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new AQ,this.oldClearAlpha=1,this.fsQuad=new Hr(null),this.tempPulseColor1=new AQ,this.tempPulseColor2=new AQ,this.textureMatrix=new yN}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(x,o){this.renderTargetMaskBuffer.setSize(x,o),this.renderTargetDepthBuffer.setSize(x,o);let c=Math.round(x/this.downSampleRatio),L=Math.round(o/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(c,L),this.renderTargetBlurBuffer1.setSize(c,L),this.renderTargetEdgeBuffer1.setSize(c,L),this.separableBlurMaterial1.uniforms.texSize.value.set(c,L),c=Math.round(c/2),L=Math.round(L/2),this.renderTargetBlurBuffer2.setSize(c,L),this.renderTargetEdgeBuffer2.setSize(c,L),this.separableBlurMaterial2.uniforms.texSize.value.set(c,L)}changeVisibilityOfSelectedObjects(x){const o=this._visibilityCache;function c(c){c.isMesh&&(!0===x?c.visible=o.get(c):(o.set(c,c.visible),c.visible=x))}for(let x=0;x<this.selectedObjects.length;x++)this.selectedObjects[x].traverse(c)}changeVisibilityOfNonSelectedObjects(x){const o=this._visibilityCache,c=[];function L(x){x.isMesh&&c.push(x)}for(let x=0;x<this.selectedObjects.length;x++)this.selectedObjects[x].traverse(L);this.renderScene.traverse((function(L){if(L.isMesh||L.isSprite){let T=!1;for(let x=0;x<c.length;x++)if(c[x].id===L.id){T=!0;break}if(!1===T){const c=L.visible;!1!==x&&!0!==o.get(L)||(L.visible=x),o.set(L,c)}}else(L.isPoints||L.isLine)&&(!0===x?L.visible=o.get(L):(o.set(L,L.visible),L.visible=x))}))}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(x,o,c,L,T){if(this.selectedObjects.length>0){x.getClearColor(this._oldClearColor),this.oldClearAlpha=x.getClearAlpha();const o=x.autoClear;x.autoClear=!1,T&&x.state.buffers.stencil.setTest(!1),x.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const L=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,x.setRenderTarget(this.renderTargetDepthBuffer),x.clear(),x.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,x.setRenderTarget(this.renderTargetMaskBuffer),x.clear(),x.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=L,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,x.setRenderTarget(this.renderTargetMaskDownSampleBuffer),x.clear(),this.fsQuad.render(x),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const x=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(x),this.tempPulseColor2.multiplyScalar(x)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,x.setRenderTarget(this.renderTargetEdgeBuffer1),x.clear(),this.fsQuad.render(x),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Qr.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,x.setRenderTarget(this.renderTargetBlurBuffer1),x.clear(),this.fsQuad.render(x),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Qr.BlurDirectionY,x.setRenderTarget(this.renderTargetEdgeBuffer1),x.clear(),this.fsQuad.render(x),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=Qr.BlurDirectionX,x.setRenderTarget(this.renderTargetBlurBuffer2),x.clear(),this.fsQuad.render(x),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=Qr.BlurDirectionY,x.setRenderTarget(this.renderTargetEdgeBuffer2),x.clear(),this.fsQuad.render(x),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,T&&x.state.buffers.stencil.setTest(!0),x.setRenderTarget(c),this.fsQuad.render(x),x.setClearColor(this._oldClearColor,this.oldClearAlpha),x.autoClear=o}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=c.texture,x.setRenderTarget(null),this.fsQuad.render(x))}getPrepareMaskMaterial(){return new JQ({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new rH(.5,.5)},textureMatrix:{value:null}},vertexShader:"#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <morphtarget_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t\tvPosition = mvPosition;\n\n\t\t\t\t\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t\t\t\t\t#ifdef USE_INSTANCING\n\n\t\t\t\t\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t\t\t\t\t#endif\n\t\t\t\t\t\n\t\t\t\t\tworldPosition = modelMatrix * worldPosition;\n\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\n\t\t\t\t}",fragmentShader:"#include <packing>\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n\t\t\t\t\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n\n\t\t\t\t}"})}getEdgeDetectionMaterial(){return new JQ({uniforms:{maskTexture:{value:null},texSize:{value:new rH(.5,.5)},visibleEdgeColor:{value:new zH(1,1,1)},hiddenEdgeColor:{value:new zH(1,1,1)}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec3 visibleEdgeColor;\n\t\t\t\tuniform vec3 hiddenEdgeColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n\t\t\t\t}"})}getSeperableBlurMaterial(x){return new JQ({defines:{MAX_RADIUS:x},uniforms:{colorTexture:{value:null},texSize:{value:new rH(.5,.5)},direction:{value:new rH(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float kernelRadius;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat sigma = kernelRadius/2.0;\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, sigma);\n\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n\t\t\t\t\tvec2 uvOffset = delta;\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = kernelRadius * float(i) / float(MAX_RADIUS);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, sigma);\n\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\t\t\tuvOffset += delta;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})}getOverlayMaterial(){return new JQ({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform sampler2D edgeTexture1;\n\t\t\t\tuniform sampler2D edgeTexture2;\n\t\t\t\tuniform sampler2D patternTexture;\n\t\t\t\tuniform float edgeStrength;\n\t\t\t\tuniform float edgeGlow;\n\t\t\t\tuniform bool usePatternTexture;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n\t\t\t\t\tif(usePatternTexture)\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n\t\t\t\t\tgl_FragColor = finalColor;\n\t\t\t\t}",blending:2,depthTest:!1,depthWrite:!1,transparent:!0})}}Qr.BlurDirectionX=new rH(1,0),Qr.BlurDirectionY=new rH(0,1);class Ir{constructor(x=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let o=0;o<256;o++)this.p[o]=Math.floor(256*x.random());this.perm=[];for(let x=0;x<512;x++)this.perm[x]=this.p[255&x];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(x,o,c){return x[0]*o+x[1]*c}dot3(x,o,c,L){return x[0]*o+x[1]*c+x[2]*L}dot4(x,o,c,L,T){return x[0]*o+x[1]*c+x[2]*L+x[3]*T}noise(x,o){let c,L,T;const h=(x+o)*(.5*(Math.sqrt(3)-1)),A=Math.floor(x+h),E=Math.floor(o+h),H=(3-Math.sqrt(3))/6,N=(A+E)*H,Q=x-(A-N),I=o-(E-N);let k,_;Q>I?(k=1,_=0):(k=0,_=1);const X=Q-k+H,r=I-_+H,y=Q-1+2*H,v=I-1+2*H,B=255&A,Y=255&E,F=this.perm[B+this.perm[Y]]%12,t=this.perm[B+k+this.perm[Y+_]]%12,m=this.perm[B+1+this.perm[Y+1]]%12;let C=.5-Q*Q-I*I;C<0?c=0:(C*=C,c=C*C*this.dot(this.grad3[F],Q,I));let V=.5-X*X-r*r;V<0?L=0:(V*=V,L=V*V*this.dot(this.grad3[t],X,r));let i=.5-y*y-v*v;return i<0?T=0:(i*=i,T=i*i*this.dot(this.grad3[m],y,v)),70*(c+L+T)}noise3d(x,o,c){let L,T,h,A;const E=(x+o+c)*(1/3),H=Math.floor(x+E),N=Math.floor(o+E),Q=Math.floor(c+E),I=1/6,k=(H+N+Q)*I,_=x-(H-k),X=o-(N-k),r=c-(Q-k);let y,v,B,Y,F,t;_>=X?X>=r?(y=1,v=0,B=0,Y=1,F=1,t=0):_>=r?(y=1,v=0,B=0,Y=1,F=0,t=1):(y=0,v=0,B=1,Y=1,F=0,t=1):X<r?(y=0,v=0,B=1,Y=0,F=1,t=1):_<r?(y=0,v=1,B=0,Y=0,F=1,t=1):(y=0,v=1,B=0,Y=1,F=1,t=0);const m=_-y+I,C=X-v+I,V=r-B+I,i=_-Y+2*I,M=X-F+2*I,Z=r-t+2*I,S=_-1+.5,u=X-1+.5,d=r-1+.5,O=255&H,j=255&N,e=255&Q,q=this.perm[O+this.perm[j+this.perm[e]]]%12,f=this.perm[O+y+this.perm[j+v+this.perm[e+B]]]%12,U=this.perm[O+Y+this.perm[j+F+this.perm[e+t]]]%12,s=this.perm[O+1+this.perm[j+1+this.perm[e+1]]]%12;let D=.6-_*_-X*X-r*r;D<0?L=0:(D*=D,L=D*D*this.dot3(this.grad3[q],_,X,r));let $=.6-m*m-C*C-V*V;$<0?T=0:($*=$,T=$*$*this.dot3(this.grad3[f],m,C,V));let a=.6-i*i-M*M-Z*Z;a<0?h=0:(a*=a,h=a*a*this.dot3(this.grad3[U],i,M,Z));let z=.6-S*S-u*u-d*d;return z<0?A=0:(z*=z,A=z*z*this.dot3(this.grad3[s],S,u,d)),32*(L+T+h+A)}noise4d(x,o,c,L){const T=this.grad4,h=this.simplex,A=this.perm,E=(Math.sqrt(5)-1)/4,H=(5-Math.sqrt(5))/20;let N,Q,I,k,_;const X=(x+o+c+L)*E,r=Math.floor(x+X),y=Math.floor(o+X),v=Math.floor(c+X),B=Math.floor(L+X),Y=(r+y+v+B)*H,F=x-(r-Y),t=o-(y-Y),m=c-(v-Y),C=L-(B-Y),V=(F>t?32:0)+(F>m?16:0)+(t>m?8:0)+(F>C?4:0)+(t>C?2:0)+(m>C?1:0),i=h[V][0]>=3?1:0,M=h[V][1]>=3?1:0,Z=h[V][2]>=3?1:0,S=h[V][3]>=3?1:0,u=h[V][0]>=2?1:0,d=h[V][1]>=2?1:0,O=h[V][2]>=2?1:0,j=h[V][3]>=2?1:0,e=h[V][0]>=1?1:0,q=h[V][1]>=1?1:0,f=h[V][2]>=1?1:0,U=h[V][3]>=1?1:0,s=F-i+H,D=t-M+H,$=m-Z+H,a=C-S+H,z=F-u+2*H,l=t-d+2*H,G=m-O+2*H,p=C-j+2*H,P=F-e+3*H,K=t-q+3*H,J=m-f+3*H,n=C-U+3*H,b=F-1+4*H,W=t-1+4*H,w=m-1+4*H,g=C-1+4*H,R=255&r,xx=255&y,ox=255&v,cx=255&B,Lx=A[R+A[xx+A[ox+A[cx]]]]%32,Tx=A[R+i+A[xx+M+A[ox+Z+A[cx+S]]]]%32,hx=A[R+u+A[xx+d+A[ox+O+A[cx+j]]]]%32,Ax=A[R+e+A[xx+q+A[ox+f+A[cx+U]]]]%32,Ex=A[R+1+A[xx+1+A[ox+1+A[cx+1]]]]%32;let Hx=.6-F*F-t*t-m*m-C*C;Hx<0?N=0:(Hx*=Hx,N=Hx*Hx*this.dot4(T[Lx],F,t,m,C));let Nx=.6-s*s-D*D-$*$-a*a;Nx<0?Q=0:(Nx*=Nx,Q=Nx*Nx*this.dot4(T[Tx],s,D,$,a));let Qx=.6-z*z-l*l-G*G-p*p;Qx<0?I=0:(Qx*=Qx,I=Qx*Qx*this.dot4(T[hx],z,l,G,p));let Ix=.6-P*P-K*K-J*J-n*n;Ix<0?k=0:(Ix*=Ix,k=Ix*Ix*this.dot4(T[Ax],P,K,J,n));let kx=.6-b*b-W*W-w*w-g*g;return kx<0?_=0:(kx*=kx,_=kx*kx*this.dot4(T[Ex],b,W,w,g)),27*(N+Q+I+k+_)}}var kr;!function(x){x.Main="main",x.Branch="branch",x.Shadow="shadow"}(kr||(kr={}));const _r=new zH,Xr=new zH,rr=new zH;function yr(x){const o=x.segments[x.segments.length-1];_r.subVectors(x.props.points[x.props.points.length-1],o.p1).normalize();const c=25+100*Math.random(),L=Math.random()>.5?1:-1;Xr.set(-_r.y,_r.x,0).multiplyScalar(c*L),rr.addVectors(x.props.points[x.props.points.length-1],Xr),x.generateSegments({points:[o.p1,rr.clone()],type:kr.Branch,radius0:o.r1,radius1:x.props.branch.radius1,lid:0,branchDepth:o.level+1})}function vr(x){const o=x.segments[x.segments.length-1];x.generateSegments({points:[x.segments[x.shadow.startIndex].p0,o.p1],type:kr.Shadow,radius0:x.props.shadow.radius0,radius1:x.props.shadow.radius1,branchDepth:0,lid:1}),x.shadow.startIndex=x.segments.length}class Br{constructor(x){this.segments=[],this.shadow={startIndex:0,spacing:0},this.segmentIndex=0,this.segmentsIndex=0,this.props=Br.prepareProps(x),this.name=x.name,this.noise={[kr.Main]:new Ir(this.props.seedGenerator),[kr.Branch]:new Ir(this.props.seedGenerator),[kr.Shadow]:new Ir(this.props.seedGenerator)},this.generateSegments({lid:0,branchDepth:0,points:x.points,radius0:x.main.radius0,radius1:x.main.radius1,type:kr.Main},!0),this.update(0)}update(x){for(const o of this.segments){const c=o.type===kr.Branch?o.level:1,L=this.props[o.type].dispersion/c;o.ignoreNoise||o.p1.set(o.p1default.x+this.noise[o.type].noise3d(o.p1default.x,o.p1default.y,x*this.props[o.type].timeFactor)*L,o.p1default.y+this.noise[o.type].noise3d(o.p1default.y,o.p1default.x,x*this.props[o.type].timeFactor)*L,o.p1default.z)}}generateSegments(x,o=!1){const c=this.segmentsIndex++,L=x.radius1-x.radius0;for(let o=1;o<x.points.length;o++){const T=x.points[o-1],h=x.points[o],A=x.radius0+L*(o-1)/(x.points.length-1),E=x.radius0+L*o/(x.points.length-1),H=this.props[x.type].maxSegmentLength,N=T.distanceTo(h);if(N>H){const o=Math.floor(N/H),L=1/(o+1),Q=E-A;let I=T,k=A;for(let E=1;E<=o;E++){const o=A+Q*L*E,H=(new zH).lerpVectors(T,h,L*E);this.addSegment(I,H,k,o,x.branchDepth,c,x.lid,x.type),k=o,I=H}this.addSegment(I,h,k,E,x.branchDepth,c,x.lid,x.type,x.type===kr.Shadow)}else this.addSegment(T,h,A,E,x.branchDepth,c,x.lid,x.type)}o&&(this.segments.length>0&&(this.segments[this.segments.length-1].ignoreNoise=!0),this.shadow.startIndex<this.segments.length-1&&this.tryGenerateShadow(0,!0))}addSegment(x,o,c,L,T,h,A,E,H=!1){this.segments.push({p0:x,p1:o,r0:c,r1:L,pid:h,level:T,lid:A,type:E,p0default:x.clone(),p1default:o.clone(),id:this.segmentIndex++,ignoreNoise:H}),E===kr.Main&&this.tryGenerateShadow(T),this.tryGenerateBranch()}tryGenerateShadow(x,o=!1){0===x&&this.props.shadow.count>0&&(this.shadow.spacing++,(this.shadow.spacing%this.props.shadow.spacing==0||Number.isNaN(this.shadow.spacing%this.props.shadow.spacing)||o)&&(this.props.callback.createShadowBranch(this),this.segments.length>0&&(this.segments[this.segments.length-1].ignoreNoise=!0)))}tryGenerateBranch(){const x=this.segments[this.segments.length-1];x.level<this.props.branch.branchDepth&&x.r1>this.props.branch.branchMinRadiusForBranch<<x.level&&this.props.seedGenerator.random()<this.props.branch.branchProbability&&this.props.callback.createBranch(this)}}Br.prepareProps=function(x){var o,c,L,T,h,A,E,H,N,Q,I,k,_,X,r,y,v,B,Y,F,t,m,C,V,i,M,Z,S,u,d,O,j,e,q,f,U,s,D,$,a,z;return{points:x.points,seedGenerator:null!==(o=x.seedGenerator)&&void 0!==o?o:Math,name:x.name,callback:{createBranch:null!==(L=null===(c=x.callback)||void 0===c?void 0:c.createBranch)&&void 0!==L?L:yr,createShadowBranch:null!==(h=null===(T=x.callback)||void 0===T?void 0:T.createShadowBranch)&&void 0!==h?h:vr},[kr.Main]:x.main,[kr.Branch]:{branchDepth:null!==(E=null===(A=x[kr.Branch])||void 0===A?void 0:A.branchDepth)&&void 0!==E?E:0,branchLength:null!==(N=null===(H=x[kr.Branch])||void 0===H?void 0:H.branchLength)&&void 0!==N?N:30,branchProbability:null!==(I=null===(Q=x[kr.Branch])||void 0===Q?void 0:Q.branchProbability)&&void 0!==I?I:0,branchDispersionFactor:null!==(_=null===(k=x[kr.Branch])||void 0===k?void 0:k.branchDispersionFactor)&&void 0!==_?_:1,branchMinRadiusForBranch:null!==(r=null===(X=x[kr.Branch])||void 0===X?void 0:X.branchMinRadiusForBranch)&&void 0!==r?r:1,radius0:null!==(v=null===(y=x[kr.Branch])||void 0===y?void 0:y.radius0)&&void 0!==v?v:x[kr.Main].radius0,radius1:null!==(Y=null===(B=x[kr.Branch])||void 0===B?void 0:B.radius1)&&void 0!==Y?Y:x[kr.Main].radius1,branchMaxSegmentLengthFactor:null!==(t=null===(F=x[kr.Branch])||void 0===F?void 0:F.branchMaxSegmentLengthFactor)&&void 0!==t?t:1,dispersion:null!==(C=null===(m=x[kr.Branch])||void 0===m?void 0:m.dispersion)&&void 0!==C?C:x[kr.Main].dispersion,timeFactor:null!==(i=null===(V=x[kr.Branch])||void 0===V?void 0:V.timeFactor)&&void 0!==i?i:x[kr.Main].timeFactor,maxSegmentLength:null!==(Z=null===(M=x[kr.Branch])||void 0===M?void 0:M.maxSegmentLength)&&void 0!==Z?Z:x[kr.Main].maxSegmentLength},[kr.Shadow]:{count:null!==(u=null===(S=x[kr.Shadow])||void 0===S?void 0:S.count)&&void 0!==u?u:0,spacing:null!==(O=null===(d=x[kr.Shadow])||void 0===d?void 0:d.spacing)&&void 0!==O?O:5,radius0:null!==(e=null===(j=x[kr.Shadow])||void 0===j?void 0:j.radius0)&&void 0!==e?e:x[kr.Main].radius0,radius1:null!==(f=null===(q=x[kr.Shadow])||void 0===q?void 0:q.radius1)&&void 0!==f?f:x[kr.Main].radius1,dispersion:null!==(s=null===(U=x[kr.Shadow])||void 0===U?void 0:U.dispersion)&&void 0!==s?s:x[kr.Main].dispersion,timeFactor:null!==($=null===(D=x[kr.Shadow])||void 0===D?void 0:D.timeFactor)&&void 0!==$?$:x[kr.Main].timeFactor,maxSegmentLength:null!==(z=null===(a=x[kr.Shadow])||void 0===a?void 0:a.maxSegmentLength)&&void 0!==z?z:x[kr.Main].maxSegmentLength}}};const Yr=Math.cos(30*Math.PI/180),Fr=Math.sin(30*Math.PI/180);class tr extends Br{constructor(x){super(x),this.pid=-1,this.indicesIndex=0,this.verticesIndex=0,this.prevLightningId=-1,this.side=new zH,this.down=new zH,this.forwards=new zH,this.up=new zH(0,0,1),this.cache=new Map,this.buildVertices=(x=!1)=>{if(0!==this.segments.length){this.pid=this.segments[0].pid;for(const o of this.segments){let c;this.pid!==o.pid&&(this.cache.set(this.pid,this.verticesIndex/3-3),c=this.cache.get(o.pid),this.cache.delete(o.pid)),this.pid=o.pid,this.forwards.subVectors(o.p1,o.p0).normalize(),this.addTriangleVertices(o),x&&this.addIndexes(c)}}},this.addTriangleVertices=x=>{this.prevLightningId!==x.lid&&(this.prevLightningId=x.lid,this.side.crossVectors(this.up,this.forwards).multiplyScalar(Yr*x.r0),this.down.copy(this.up).multiplyScalar(-x.r0*Fr),this.verticesBuffer[this.verticesIndex++]=x.p0.x-this.side.x+this.down.x,this.verticesBuffer[this.verticesIndex++]=x.p0.y-this.side.y+this.down.y,this.verticesBuffer[this.verticesIndex++]=x.p0.z-this.side.z+this.down.z,this.verticesBuffer[this.verticesIndex++]=x.p0.x+this.side.x+this.down.x,this.verticesBuffer[this.verticesIndex++]=x.p0.y+this.side.y+this.down.y,this.verticesBuffer[this.verticesIndex++]=x.p0.z+this.side.z+this.down.z,this.verticesBuffer[this.verticesIndex++]=x.p0.x+x.r0*this.up.x,this.verticesBuffer[this.verticesIndex++]=x.p0.y+x.r0*this.up.y,this.verticesBuffer[this.verticesIndex++]=x.p0.z+x.r0*this.up.z),this.side.crossVectors(this.up,this.forwards).multiplyScalar(Yr*x.r1),this.down.copy(this.up).multiplyScalar(-x.r1*Fr),this.verticesBuffer[this.verticesIndex++]=x.p1.x-this.side.x+this.down.x,this.verticesBuffer[this.verticesIndex++]=x.p1.y-this.side.y+this.down.y,this.verticesBuffer[this.verticesIndex++]=x.p1.z-this.side.z+this.down.z,this.verticesBuffer[this.verticesIndex++]=x.p1.x+this.side.x+this.down.x,this.verticesBuffer[this.verticesIndex++]=x.p1.y+this.side.y+this.down.y,this.verticesBuffer[this.verticesIndex++]=x.p1.z+this.side.z+this.down.z,this.verticesBuffer[this.verticesIndex++]=x.p1.x+x.r1*this.up.x,this.verticesBuffer[this.verticesIndex++]=x.p1.y+x.r1*this.up.y,this.verticesBuffer[this.verticesIndex++]=x.p1.z+x.r1*this.up.z},this.addIndexes=x=>{const o=this.verticesIndex/3-6;this.indicesBuffer[this.indicesIndex++]=x?x+1:o+1,this.indicesBuffer[this.indicesIndex++]=x?x+2:o+2,this.indicesBuffer[this.indicesIndex++]=o+5,this.indicesBuffer[this.indicesIndex++]=x?x+1:o+1,this.indicesBuffer[this.indicesIndex++]=o+5,this.indicesBuffer[this.indicesIndex++]=o+4,this.indicesBuffer[this.indicesIndex++]=null!=x?x:o,this.indicesBuffer[this.indicesIndex++]=x?x+1:o+1,this.indicesBuffer[this.indicesIndex++]=o+4,this.indicesBuffer[this.indicesIndex++]=null!=x?x:o,this.indicesBuffer[this.indicesIndex++]=o+4,this.indicesBuffer[this.indicesIndex++]=o+3,this.indicesBuffer[this.indicesIndex++]=x?x+2:o+2,this.indicesBuffer[this.indicesIndex++]=null!=x?x:o,this.indicesBuffer[this.indicesIndex++]=o+3,this.indicesBuffer[this.indicesIndex++]=x?x+2:o+2,this.indicesBuffer[this.indicesIndex++]=o+3,this.indicesBuffer[this.indicesIndex++]=o+5},this.verticesBuffer=new Float32Array(18*this.segments.length+9),this.indicesBuffer=new Uint32Array(36*this.segments.length),this.buildVertices(!0)}update(x){super.update(x),this.verticesIndex=0,this.indicesIndex=0,this.prevLightningId=-1,this.buildVertices()}}var mr;!function(x){x.Stop="stop",x.Start="start"}(mr||(mr={}));class Cr extends tr{constructor(x,o){var c;super(o),this.state=mr.Stop,this.appearance={total:0,current:0},this.time=0,this.start=()=>{this.state!==mr.Start&&(this.outline.enabled=!0,this.mesh.visible=!0,this.state=mr.Start,this.time=this.lightningThreeProps.scene3d.clock.getElapsedTime(),0===this.lightningThreeProps.appearanceTime&&(this.geometry.setDrawRange(0,this.appearance.total),this.appearance.current=this.appearance.total))},this.stop=()=>{this.outline.enabled=!1,this.mesh.visible=!1,this.state=mr.Stop,this.geometry.setDrawRange(0,0),this.appearance.current=0},this.dispose=()=>{this.lightningThreeProps.scene3d.removeAnimationCallback(this.update),this.geometry.dispose(),this.material.dispose(),this.lightningThreeProps.outline||(this.lightningThreeProps.scene3d.composer.removePass(this.outline),this.outline.dispose()),this.lightningThreeProps.scene3d.scene.remove(this.mesh)},this.getOutline=()=>{var x;const o=null!==(x=this.lightningThreeProps.outline)&&void 0!==x?x:new Qr(new rH(this.lightningThreeProps.scene3d.renderer.domElement.width,this.lightningThreeProps.scene3d.renderer.domElement.height),this.lightningThreeProps.scene3d.scene,this.lightningThreeProps.scene3d.camera);return o.renderToScreen=!0,o.hiddenEdgeColor.set(0),o.selectedObjects.push(this.mesh),o.edgeGlow=this.lightningThreeProps.outlineGlow,o.edgeStrength=this.lightningThreeProps.outlineStrength,o.edgeThickness=this.lightningThreeProps.outlineThickness,o.visibleEdgeColor=this.lightningThreeProps.outlineColor,this.lightningThreeProps.scene3d.composer.passes.includes(o)||this.lightningThreeProps.scene3d.composer.addPass(o),o},this.lightningThreeProps=x,this.geometry=new mQ,this.material=new HQ({side:2,color:x.color,wireframe:x.wireframe}),this.geometry.setAttribute("position",new IQ(this.verticesBuffer,3)),this.geometry.setIndex(new IQ(this.indicesBuffer,1)),this.geometry.computeBoundingBox(),this.mesh=new aQ(this.geometry,this.material),x.offset&&this.mesh.position.copy(x.offset),this.lightningThreeProps.scene3d.scene.add(this.mesh),this.outline=this.getOutline(),this.outline.enabled=!1,this.mesh.visible=!1,(null===(c=this.geometry.index)||void 0===c?void 0:c.count)&&(this.appearance.total=this.geometry.index.count),this.update=this.update.bind(this),this.lightningThreeProps.scene3d.addAnimationCallback(this.update)}update(x){if(this.state===mr.Start){super.update(x),this.geometry.attributes.position.needsUpdate=!0;const o=x-this.time;this.appearance.current<this.appearance.total&&(this.appearance.current=Math.trunc(this.appearance.total*o/this.lightningThreeProps.appearanceTime),this.geometry.setDrawRange(0,Math.min(this.appearance.current,this.appearance.total)))}}}class Vr extends Cr{constructor(x,o,c){var L;c&&(o.seedGenerator=(L=.2,{random:()=>L}),x.appearanceTime=0,o.branch&&(o.branch.branchProbability=0),o.shadow&&(o.shadow.count=0)),super(x,o),this.freeze=c}update(x){this.freeze?super.update(0):super.update(x)}}const ir=new zH;function Mr(x){const o=x.segments[x.segments.length-1],c=2*(Math.random()-.5),L=2*(Math.random()-.5);ir.set(c,L,0).multiplyScalar(x.props.branch.branchLength).add(o.p1),x.generateSegments({points:[o.p1,ir.clone()],type:kr.Branch,radius0:o.r1,radius1:x.props.branch.radius1,lid:0,branchDepth:o.level+1})}const Zr={[YE.Yellow]:new AQ("#fff7e2"),[YE.None]:new AQ("#000000")},Sr={[YE.Yellow]:new AQ("#fff7e2"),[YE.None]:new AQ("#000000")},ur={callback:{createBranch:Mr},main:{radius0:1,radius1:1,dispersion:.5,timeFactor:3,maxSegmentLength:6}},dr={wireframe:!1,appearanceTime:3,outlineStrength:1.2,outlineGlow:1.5,outlineThickness:3},Or={[vx.t.Portrait]:{[qT.Player0]:{offset:new zH(47,91)},[qT.Player1]:{offset:new zH(81,91)},[qT.Player2]:{offset:new zH(4,94)},[qT.Banker0]:{offset:new zH(256,91)},[qT.Banker1]:{offset:new zH(290,91)},[qT.Banker2]:{offset:new zH(324,94)}},[vx.t.Landscape]:{[qT.Player0]:{offset:new zH(182,54)},[qT.Player1]:{offset:new zH(221,54)},[qT.Player2]:{offset:new zH(132,58)},[qT.Banker0]:{offset:new zH(455,54)},[qT.Banker1]:{offset:new zH(494,54)},[qT.Banker2]:{offset:new zH(533,58)}}},jr={[vx.t.Portrait]:{width:27,height:36},[vx.t.Landscape]:{width:32,height:43}};class er extends Vr{constructor(x){const o=function(x,o){const c=jr[x];let L=c.width,T=c.height;o!==qT.Banker2&&o!==qT.Player2||(L=c.height,T=c.width);const h=[];return h.push(new zH(0,2)),h.push(new zH(0,T-2)),h.push(new zH(2,T)),h.push(new zH(L-2,T)),h.push(new zH(L,T-2)),h.push(new zH(L,2)),h.push(new zH(L-2,0)),h.push(new zH(2,0)),h.push(new zH(0,2)),h}(x.orientation,x.name);super({...dr,color:Zr[x.color],outlineColor:Zr[x.color],scene3d:x.scene3d,offset:Or[x.orientation][x.name].offset},{...ur,points:o,name:x.name},!!x.freeze)}changeColor(x){this.material.color=Zr[x],this.outline.visibleEdgeColor=Sr[x]}}class qr extends PX{constructor(x){super(x),this.defaultDPI=90,this.defaultUnit="px"}load(x,o,c,L){const T=this,h=new nX(T.manager);h.setPath(T.path),h.setRequestHeader(T.requestHeader),h.setWithCredentials(T.withCredentials),h.load(x,(function(c){try{o(T.parse(c))}catch(o){L?L(o):console.error(o),T.manager.itemError(x)}}),c,L)}parse(x){const o=this;function c(x,o,c,T,h,A,E,H){if(0==o||0==c)return void x.lineTo(H.x,H.y);T=T*Math.PI/180,o=Math.abs(o),c=Math.abs(c);const N=(E.x-H.x)/2,Q=(E.y-H.y)/2,I=Math.cos(T)*N+Math.sin(T)*Q,k=-Math.sin(T)*N+Math.cos(T)*Q;let _=o*o,X=c*c;const r=I*I,y=k*k,v=r/_+y/X;if(v>1){const x=Math.sqrt(v);_=(o*=x)*o,X=(c*=x)*c}const B=_*y+X*r,Y=(_*X-B)/B;let F=Math.sqrt(Math.max(0,Y));h===A&&(F=-F);const t=F*o*k/c,m=-F*c*I/o,C=Math.cos(T)*t-Math.sin(T)*m+(E.x+H.x)/2,V=Math.sin(T)*t+Math.cos(T)*m+(E.y+H.y)/2,i=L(1,0,(I-t)/o,(k-m)/c),M=L((I-t)/o,(k-m)/c,(-I-t)/o,(-k-m)/c)%(2*Math.PI);x.currentPath.absellipse(C,V,o,c,i,i+M,0===A,T)}function L(x,o,c,L){const T=x*c+o*L,h=Math.sqrt(x*x+o*o)*Math.sqrt(c*c+L*L);let A=Math.acos(Math.max(-1,Math.min(1,T/h)));return x*L-o*c<0&&(A=-A),A}function T(x,o){o=Object.assign({},o);let c={};if(x.hasAttribute("class")){const o=x.getAttribute("class").split(/\s/).filter(Boolean).map((x=>x.trim()));for(let x=0;x<o.length;x++)c=Object.assign(c,r["."+o[x]])}function L(L,T,h){void 0===h&&(h=function(x){return x.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),x}),x.hasAttribute(L)&&(o[T]=h(x.getAttribute(L))),c[L]&&(o[T]=h(c[L])),x.style&&""!==x.style[L]&&(o[T]=h(x.style[L]))}function T(x){return Math.max(0,Math.min(1,N(x)))}function h(x){return Math.max(0,N(x))}return x.hasAttribute("id")&&(c=Object.assign(c,r["#"+x.getAttribute("id")])),L("fill","fill"),L("fill-opacity","fillOpacity",T),L("fill-rule","fillRule"),L("opacity","opacity",T),L("stroke","stroke"),L("stroke-opacity","strokeOpacity",T),L("stroke-width","strokeWidth",h),L("stroke-linejoin","strokeLineJoin"),L("stroke-linecap","strokeLineCap"),L("stroke-miterlimit","strokeMiterLimit",h),L("visibility","visibility"),o}function h(x,o){return x-(o-x)}function A(x,o,c){if("string"!=typeof x)throw new TypeError("Invalid input: "+typeof x);const L={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/};let T=0,h=!0,A="",E="";const H=[];function N(x,o,c){const L=new SyntaxError('Unexpected character "'+x+'" at index '+o+".");throw L.partial=c,L}function Q(){""!==A&&(""===E?H.push(Number(A)):H.push(Number(A)*Math.pow(10,Number(E)))),A="",E=""}let I;const k=x.length;for(let _=0;_<k;_++)if(I=x[_],Array.isArray(o)&&o.includes(H.length%c)&&L.FLAGS.test(I))T=1,A=I,Q();else{if(0===T){if(L.WHITESPACE.test(I))continue;if(L.DIGIT.test(I)||L.SIGN.test(I)){T=1,A=I;continue}if(L.POINT.test(I)){T=2,A=I;continue}L.COMMA.test(I)&&(h&&N(I,_,H),h=!0)}if(1===T){if(L.DIGIT.test(I)){A+=I;continue}if(L.POINT.test(I)){A+=I,T=2;continue}if(L.EXP.test(I)){T=3;continue}L.SIGN.test(I)&&1===A.length&&L.SIGN.test(A[0])&&N(I,_,H)}if(2===T){if(L.DIGIT.test(I)){A+=I;continue}if(L.EXP.test(I)){T=3;continue}L.POINT.test(I)&&"."===A[A.length-1]&&N(I,_,H)}if(3===T){if(L.DIGIT.test(I)){E+=I;continue}if(L.SIGN.test(I)){if(""===E){E+=I;continue}1===E.length&&L.SIGN.test(E)&&N(I,_,H)}}L.WHITESPACE.test(I)?(Q(),T=0,h=!1):L.COMMA.test(I)?(Q(),T=0,h=!0):L.SIGN.test(I)?(Q(),T=1,A=I):L.POINT.test(I)?(Q(),T=2,A=I):N(I,_,H)}return Q(),H}const E=["mm","cm","in","pt","pc","px"],H={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function N(x){let c,L="px";if("string"==typeof x||x instanceof String)for(let o=0,c=E.length;o<c;o++){const c=E[o];if(x.endsWith(c)){L=c,x=x.substring(0,x.length-c.length);break}}return"px"===L&&"px"!==o.defaultUnit?c=H.in[o.defaultUnit]/o.defaultDPI:(c=H[L][o.defaultUnit],c<0&&(c=H[L].in*o.defaultDPI)),c*parseFloat(x)}function Q(x){const o=x.elements;return o[0]*o[4]-o[1]*o[3]<0}function I(x){const o=x.elements,c=o[0]*o[3]+o[1]*o[4];if(0===c)return!1;const L=k(x),T=_(x);return Math.abs(c/(L*T))>Number.EPSILON}function k(x){const o=x.elements;return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function _(x){const o=x.elements;return Math.sqrt(o[3]*o[3]+o[4]*o[4])}const X=[],r={},y=[],v=new yH,B=new yH,Y=new yH,F=new yH,t=new rH,m=new zH,C=new yH,V=(new DOMParser).parseFromString(x,"image/svg+xml");return function x(o,L){if(1!==o.nodeType)return;const E=function(x){if(!(x.hasAttribute("transform")||"use"===x.nodeName&&(x.hasAttribute("x")||x.hasAttribute("y"))))return null;const o=function(x){const o=new yH,c=v;if("use"===x.nodeName&&(x.hasAttribute("x")||x.hasAttribute("y"))){const c=N(x.getAttribute("x")),L=N(x.getAttribute("y"));o.translate(c,L)}if(x.hasAttribute("transform")){const L=x.getAttribute("transform").split(")");for(let x=L.length-1;x>=0;x--){const T=L[x].trim();if(""===T)continue;const h=T.indexOf("("),E=T.length;if(h>0&&h<E){const x=T.slice(0,h),o=A(T.slice(h+1));switch(c.identity(),x){case"translate":if(o.length>=1){const x=o[0];let L=0;o.length>=2&&(L=o[1]),c.translate(x,L)}break;case"rotate":if(o.length>=1){let x=0,L=0,T=0;x=o[0]*Math.PI/180,o.length>=3&&(L=o[1],T=o[2]),B.makeTranslation(-L,-T),Y.makeRotation(x),F.multiplyMatrices(Y,B),B.makeTranslation(L,T),c.multiplyMatrices(B,F)}break;case"scale":if(o.length>=1){const x=o[0];let L=x;o.length>=2&&(L=o[1]),c.scale(x,L)}break;case"skewX":1===o.length&&c.set(1,Math.tan(o[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===o.length&&c.set(1,0,0,Math.tan(o[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===o.length&&c.set(o[0],o[2],o[4],o[1],o[3],o[5],0,0,1)}}o.premultiply(c)}}return o}(x);return y.length>0&&o.premultiply(y[y.length-1]),C.copy(o),y.push(o),o}(o);let H=!1,V=null;switch(o.nodeName){case"svg":case"g":L=T(o,L);break;case"style":!function(x){if(x.sheet&&x.sheet.cssRules&&x.sheet.cssRules.length)for(let o=0;o<x.sheet.cssRules.length;o++){const c=x.sheet.cssRules[o];if(1!==c.type)continue;const L=c.selectorText.split(/,/gm).filter(Boolean).map((x=>x.trim()));for(let x=0;x<L.length;x++){const o=Object.fromEntries(Object.entries(c.style).filter((([,x])=>""!==x)));r[L[x]]=Object.assign(r[L[x]]||{},o)}}}(o);break;case"path":L=T(o,L),o.hasAttribute("d")&&(V=function(x){const o=new Tr,L=new rH,T=new rH,E=new rH;let H=!0,N=!1;const Q=x.getAttribute("d");if(""===Q||"none"===Q)return null;const I=Q.match(/[a-df-z][^a-df-z]*/gi);for(let x=0,Q=I.length;x<Q;x++){const Q=I[x],k=Q.charAt(0),_=Q.slice(1).trim();let X;switch(!0===H&&(N=!0,H=!1),k){case"M":X=A(_);for(let x=0,c=X.length;x<c;x+=2)L.x=X[x+0],L.y=X[x+1],T.x=L.x,T.y=L.y,0===x?o.moveTo(L.x,L.y):o.lineTo(L.x,L.y),0===x&&E.copy(L);break;case"H":X=A(_);for(let x=0,c=X.length;x<c;x++)L.x=X[x],T.x=L.x,T.y=L.y,o.lineTo(L.x,L.y),0===x&&!0===N&&E.copy(L);break;case"V":X=A(_);for(let x=0,c=X.length;x<c;x++)L.y=X[x],T.x=L.x,T.y=L.y,o.lineTo(L.x,L.y),0===x&&!0===N&&E.copy(L);break;case"L":X=A(_);for(let x=0,c=X.length;x<c;x+=2)L.x=X[x+0],L.y=X[x+1],T.x=L.x,T.y=L.y,o.lineTo(L.x,L.y),0===x&&!0===N&&E.copy(L);break;case"C":X=A(_);for(let x=0,c=X.length;x<c;x+=6)o.bezierCurveTo(X[x+0],X[x+1],X[x+2],X[x+3],X[x+4],X[x+5]),T.x=X[x+2],T.y=X[x+3],L.x=X[x+4],L.y=X[x+5],0===x&&!0===N&&E.copy(L);break;case"S":X=A(_);for(let x=0,c=X.length;x<c;x+=4)o.bezierCurveTo(h(L.x,T.x),h(L.y,T.y),X[x+0],X[x+1],X[x+2],X[x+3]),T.x=X[x+0],T.y=X[x+1],L.x=X[x+2],L.y=X[x+3],0===x&&!0===N&&E.copy(L);break;case"Q":X=A(_);for(let x=0,c=X.length;x<c;x+=4)o.quadraticCurveTo(X[x+0],X[x+1],X[x+2],X[x+3]),T.x=X[x+0],T.y=X[x+1],L.x=X[x+2],L.y=X[x+3],0===x&&!0===N&&E.copy(L);break;case"T":X=A(_);for(let x=0,c=X.length;x<c;x+=2){const c=h(L.x,T.x),A=h(L.y,T.y);o.quadraticCurveTo(c,A,X[x+0],X[x+1]),T.x=c,T.y=A,L.x=X[x+0],L.y=X[x+1],0===x&&!0===N&&E.copy(L)}break;case"A":X=A(_,[3,4],7);for(let x=0,h=X.length;x<h;x+=7){if(X[x+5]==L.x&&X[x+6]==L.y)continue;const h=L.clone();L.x=X[x+5],L.y=X[x+6],T.x=L.x,T.y=L.y,c(o,X[x],X[x+1],X[x+2],X[x+3],X[x+4],h,L),0===x&&!0===N&&E.copy(L)}break;case"m":X=A(_);for(let x=0,c=X.length;x<c;x+=2)L.x+=X[x+0],L.y+=X[x+1],T.x=L.x,T.y=L.y,0===x?o.moveTo(L.x,L.y):o.lineTo(L.x,L.y),0===x&&E.copy(L);break;case"h":X=A(_);for(let x=0,c=X.length;x<c;x++)L.x+=X[x],T.x=L.x,T.y=L.y,o.lineTo(L.x,L.y),0===x&&!0===N&&E.copy(L);break;case"v":X=A(_);for(let x=0,c=X.length;x<c;x++)L.y+=X[x],T.x=L.x,T.y=L.y,o.lineTo(L.x,L.y),0===x&&!0===N&&E.copy(L);break;case"l":X=A(_);for(let x=0,c=X.length;x<c;x+=2)L.x+=X[x+0],L.y+=X[x+1],T.x=L.x,T.y=L.y,o.lineTo(L.x,L.y),0===x&&!0===N&&E.copy(L);break;case"c":X=A(_);for(let x=0,c=X.length;x<c;x+=6)o.bezierCurveTo(L.x+X[x+0],L.y+X[x+1],L.x+X[x+2],L.y+X[x+3],L.x+X[x+4],L.y+X[x+5]),T.x=L.x+X[x+2],T.y=L.y+X[x+3],L.x+=X[x+4],L.y+=X[x+5],0===x&&!0===N&&E.copy(L);break;case"s":X=A(_);for(let x=0,c=X.length;x<c;x+=4)o.bezierCurveTo(h(L.x,T.x),h(L.y,T.y),L.x+X[x+0],L.y+X[x+1],L.x+X[x+2],L.y+X[x+3]),T.x=L.x+X[x+0],T.y=L.y+X[x+1],L.x+=X[x+2],L.y+=X[x+3],0===x&&!0===N&&E.copy(L);break;case"q":X=A(_);for(let x=0,c=X.length;x<c;x+=4)o.quadraticCurveTo(L.x+X[x+0],L.y+X[x+1],L.x+X[x+2],L.y+X[x+3]),T.x=L.x+X[x+0],T.y=L.y+X[x+1],L.x+=X[x+2],L.y+=X[x+3],0===x&&!0===N&&E.copy(L);break;case"t":X=A(_);for(let x=0,c=X.length;x<c;x+=2){const c=h(L.x,T.x),A=h(L.y,T.y);o.quadraticCurveTo(c,A,L.x+X[x+0],L.y+X[x+1]),T.x=c,T.y=A,L.x=L.x+X[x+0],L.y=L.y+X[x+1],0===x&&!0===N&&E.copy(L)}break;case"a":X=A(_,[3,4],7);for(let x=0,h=X.length;x<h;x+=7){if(0==X[x+5]&&0==X[x+6])continue;const h=L.clone();L.x+=X[x+5],L.y+=X[x+6],T.x=L.x,T.y=L.y,c(o,X[x],X[x+1],X[x+2],X[x+3],X[x+4],h,L),0===x&&!0===N&&E.copy(L)}break;case"Z":case"z":o.currentPath.autoClose=!0,o.currentPath.curves.length>0&&(L.copy(E),o.currentPath.currentPoint.copy(L),H=!0);break;default:console.warn(Q)}N=!1}return o}(o));break;case"rect":L=T(o,L),V=function(x){const o=N(x.getAttribute("x")||0),c=N(x.getAttribute("y")||0),L=N(x.getAttribute("rx")||x.getAttribute("ry")||0),T=N(x.getAttribute("ry")||x.getAttribute("rx")||0),h=N(x.getAttribute("width")),A=N(x.getAttribute("height")),E=.448084975506,H=new Tr;return H.moveTo(o+L,c),H.lineTo(o+h-L,c),(0!==L||0!==T)&&H.bezierCurveTo(o+h-L*E,c,o+h,c+T*E,o+h,c+T),H.lineTo(o+h,c+A-T),(0!==L||0!==T)&&H.bezierCurveTo(o+h,c+A-T*E,o+h-L*E,c+A,o+h-L,c+A),H.lineTo(o+L,c+A),(0!==L||0!==T)&&H.bezierCurveTo(o+L*E,c+A,o,c+A-T*E,o,c+A-T),H.lineTo(o,c+T),(0!==L||0!==T)&&H.bezierCurveTo(o,c+T*E,o+L*E,c,o+L,c),H}(o);break;case"polygon":L=T(o,L),V=function(x){const o=new Tr;let c=0;return x.getAttribute("points").replace(/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,(function(x,L,T){const h=N(L),A=N(T);0===c?o.moveTo(h,A):o.lineTo(h,A),c++})),o.currentPath.autoClose=!0,o}(o);break;case"polyline":L=T(o,L),V=function(x){const o=new Tr;let c=0;return x.getAttribute("points").replace(/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,(function(x,L,T){const h=N(L),A=N(T);0===c?o.moveTo(h,A):o.lineTo(h,A),c++})),o.currentPath.autoClose=!1,o}(o);break;case"circle":L=T(o,L),V=function(x){const o=N(x.getAttribute("cx")||0),c=N(x.getAttribute("cy")||0),L=N(x.getAttribute("r")||0),T=new cX;T.absarc(o,c,L,0,2*Math.PI);const h=new Tr;return h.subPaths.push(T),h}(o);break;case"ellipse":L=T(o,L),V=function(x){const o=N(x.getAttribute("cx")||0),c=N(x.getAttribute("cy")||0),L=N(x.getAttribute("rx")||0),T=N(x.getAttribute("ry")||0),h=new cX;h.absellipse(o,c,L,T,0,2*Math.PI);const A=new Tr;return A.subPaths.push(h),A}(o);break;case"line":L=T(o,L),V=function(x){const o=N(x.getAttribute("x1")||0),c=N(x.getAttribute("y1")||0),L=N(x.getAttribute("x2")||0),T=N(x.getAttribute("y2")||0),h=new Tr;return h.moveTo(o,c),h.lineTo(L,T),h.currentPath.autoClose=!1,h}(o);break;case"defs":H=!0;break;case"use":L=T(o,L);const E=(o.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),Q=o.viewportElement.getElementById(E);Q?x(Q,L):console.warn("SVGLoader: 'use node' references non-existent node id: "+E)}V&&(void 0!==L.fill&&"none"!==L.fill&&V.color.setStyle(L.fill,"srgb"),function(x,o){function c(x){m.set(x.x,x.y,1).applyMatrix3(o),x.set(m.x,m.y)}function L(x){const c=x.xRadius,L=x.yRadius,T=Math.cos(x.aRotation),h=Math.sin(x.aRotation),A=new zH(c*T,c*h,0),E=new zH(-L*h,L*T,0),H=A.applyMatrix3(o),N=E.applyMatrix3(o),I=v.set(H.x,N.x,0,H.y,N.y,0,0,0,1),k=B.copy(I).invert(),_=Y.copy(k).transpose().multiply(k).elements,X=function(x,o,c){let L,T,h,A,E;const H=x+c,N=x-c,Q=Math.sqrt(N*N+4*o*o);return H>0?(L=.5*(H+Q),E=1/L,T=x*E*c-o*E*o):H<0?T=.5*(H-Q):(L=.5*Q,T=-.5*Q),h=N>0?N+Q:N-Q,Math.abs(h)>2*Math.abs(o)?(E=-2*o/h,A=1/Math.sqrt(1+E*E),h=E*A):0===Math.abs(o)?(h=1,A=0):(E=-.5*h/o,h=1/Math.sqrt(1+E*E),A=E*h),N>0&&(E=h,h=-A,A=E),{rt1:L,rt2:T,cs:h,sn:A}}(_[0],_[1],_[4]),r=Math.sqrt(X.rt1),y=Math.sqrt(X.rt2);if(x.xRadius=1/r,x.yRadius=1/y,x.aRotation=Math.atan2(X.sn,X.cs),!((x.aEndAngle-x.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const c=B.set(r,0,0,0,y,0,0,0,1),L=Y.set(X.cs,X.sn,0,-X.sn,X.cs,0,0,0,1),T=c.multiply(L).multiply(I),h=x=>{const{x:o,y:c}=new zH(Math.cos(x),Math.sin(x),0).applyMatrix3(T);return Math.atan2(c,o)};x.aStartAngle=h(x.aStartAngle),x.aEndAngle=h(x.aEndAngle),Q(o)&&(x.aClockwise=!x.aClockwise)}}function T(x){const c=k(o),L=_(o);x.xRadius*=c,x.yRadius*=L;const T=c>Number.EPSILON?Math.atan2(o.elements[1],o.elements[0]):Math.atan2(-o.elements[3],o.elements[4]);x.aRotation+=T,Q(o)&&(x.aStartAngle*=-1,x.aEndAngle*=-1,x.aClockwise=!x.aClockwise)}const h=x.subPaths;for(let x=0,A=h.length;x<A;x++){const A=h[x].curves;for(let x=0;x<A.length;x++){const h=A[x];h.isLineCurve?(c(h.v1),c(h.v2)):h.isCubicBezierCurve?(c(h.v0),c(h.v1),c(h.v2),c(h.v3)):h.isQuadraticBezierCurve?(c(h.v0),c(h.v1),c(h.v2)):h.isEllipseCurve&&(t.set(h.aX,h.aY),c(t),h.aX=t.x,h.aY=t.y,I(o)?L(h):T(h))}}}(V,C),X.push(V),V.userData={node:o,style:L});const i=o.childNodes;for(let o=0;o<i.length;o++){const c=i[o];H&&"style"!==c.nodeName&&"defs"!==c.nodeName||x(c,L)}E&&(y.pop(),y.length>0?C.copy(y[y.length-1]):C.identity())}(V.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:X,xml:V.documentElement}}static createShapes(x){const o=0,c=1,L=2,T=3,h=4,A=5,E=6,H={loc:o,t:0};function N(x,c,T,h){const A=x.x,E=c.x,N=T.x,I=h.x,k=x.y,_=c.y,X=T.y,r=h.y,y=(I-N)*(k-X)-(r-X)*(A-N),v=(r-X)*(E-A)-(I-N)*(_-k),B=y/v,Y=((E-A)*(k-X)-(_-k)*(A-N))/v;if(0===v&&0!==y||B<=0||B>=1||Y<0||Y>1)return null;if(0===y&&0===v){for(let N=0;N<2;N++){if(Q(0===N?T:h,x,c),H.loc==o){const x=0===N?T:h;return{x:x.x,y:x.y,t:H.t}}if(H.loc==L)return{x:+(A+H.t*(E-A)).toPrecision(10),y:+(k+H.t*(_-k)).toPrecision(10),t:H.t}}return null}for(let L=0;L<2;L++)if(Q(0===L?T:h,x,c),H.loc==o){const x=0===L?T:h;return{x:x.x,y:x.y,t:H.t}}return{x:+(A+B*(E-A)).toPrecision(10),y:+(k+B*(_-k)).toPrecision(10),t:B}}function Q(x,N,Q){const I=Q.x-N.x,k=Q.y-N.y,_=x.x-N.x,X=x.y-N.y,r=I*X-_*k;if(x.x===N.x&&x.y===N.y)return H.loc=o,void(H.t=0);if(x.x===Q.x&&x.y===Q.y)return H.loc=c,void(H.t=1);if(r<-Number.EPSILON)return void(H.loc=T);if(r>Number.EPSILON)return void(H.loc=h);if(I*_<0||k*X<0)return void(H.loc=A);if(Math.sqrt(I*I+k*k)<Math.sqrt(_*_+X*X))return void(H.loc=E);let y;y=0!==I?_/I:X/k,H.loc=L,H.t=y}let I=999999999,k=-999999999,_=x.subPaths.map((x=>{const o=x.getPoints();let c=-999999999,L=999999999,T=-999999999,h=999999999;for(let x=0;x<o.length;x++){const A=o[x];A.y>c&&(c=A.y),A.y<L&&(L=A.y),A.x>T&&(T=A.x),A.x<h&&(h=A.x)}return k<=T&&(k=T+1),I>=h&&(I=h-1),{curves:x.curves,points:o,isCW:SX.isClockWise(o),identifier:-1,boundingBox:new Lr(new rH(h,L),new rH(T,c))}}));_=_.filter((x=>x.points.length>1));for(let x=0;x<_.length;x++)_[x].identifier=x;const X=_.map((o=>function(x,o,c,L,T){null!=T&&""!==T||(T="nonzero");const h=new rH;x.boundingBox.getCenter(h);const A=function(x,o,c){const L=new rH;o.getCenter(L);const T=[];return c.forEach((o=>{o.boundingBox.containsPoint(L)&&function(x,o){const c=[],L=[];for(let T=1;T<x.length;T++){const h=x[T-1],A=x[T];for(let x=1;x<o.length;x++){const T=N(h,A,o[x-1],o[x]);null!==T&&void 0===c.find((x=>x.t<=T.t+Number.EPSILON&&x.t>=T.t-Number.EPSILON))&&(c.push(T),L.push(new rH(T.x,T.y)))}}return L}(x,o.points).forEach((x=>{T.push({identifier:o.identifier,isCW:o.isCW,point:x})}))})),T.sort(((x,o)=>x.point.x-o.point.x)),T}([new rH(c,h.y),new rH(L,h.y)],x.boundingBox,o);A.sort(((x,o)=>x.point.x-o.point.x));const E=[],H=[];A.forEach((o=>{o.identifier===x.identifier?E.push(o):H.push(o)}));const Q=E[0].point.x,I=[];let k=0;for(;k<H.length&&H[k].point.x<Q;)I.length>0&&I[I.length-1]===H[k].identifier?I.pop():I.push(H[k].identifier),k++;if(I.push(x.identifier),"evenodd"===T){const o=I.length%2==0,c=I[I.length-2];return{identifier:x.identifier,isHole:o,for:c}}if("nonzero"===T){let c=!0,L=null,T=null;for(let x=0;x<I.length;x++){const h=I[x];c?(T=o[h].isCW,c=!1,L=h):T!==o[h].isCW&&(T=o[h].isCW,c=!0)}return{identifier:x.identifier,isHole:c,for:L}}console.warn('fill-rule: "'+T+'" is currently not implemented.')}(o,_,I,k,x.userData?x.userData.style.fillRule:void 0))),r=[];return _.forEach((x=>{if(!X[x.identifier].isHole){const o=new LX;o.curves=x.curves,X.filter((o=>o.isHole&&o.for===x.identifier)).forEach((x=>{const c=_[x.identifier],L=new cX;L.curves=c.curves,o.holes.push(L)})),r.push(o)}})),r}static getStrokeStyle(x,o,c,L,T){return{strokeColor:o=void 0!==o?o:"#000",strokeWidth:x=void 0!==x?x:1,strokeLineJoin:c=void 0!==c?c:"miter",strokeLineCap:L=void 0!==L?L:"butt",strokeMiterLimit:T=void 0!==T?T:4}}static pointsToStroke(x,o,c,L){const T=[],h=[],A=[];if(0===qr.pointsToStrokeWithBuffers(x,o,c,L,T,h,A))return null;const E=new mQ;return E.setAttribute("position",new XQ(T,3)),E.setAttribute("normal",new XQ(h,3)),E.setAttribute("uv",new XQ(A,2)),E}static pointsToStrokeWithBuffers(x,o,c,L,T,h,A,E){const H=new rH,N=new rH,Q=new rH,I=new rH,k=new rH,_=new rH,X=new rH,r=new rH,y=new rH,v=new rH,B=new rH,Y=new rH,F=new rH,t=new rH,m=new rH,C=new rH,V=new rH;c=void 0!==c?c:12,L=void 0!==L?L:.001,E=void 0!==E?E:0;const i=(x=function(x){let o=!1;for(let c=1,T=x.length-1;c<T;c++)if(x[c].distanceTo(x[c+1])<L){o=!0;break}if(!o)return x;const c=[];c.push(x[0]);for(let o=1,T=x.length-1;o<T;o++)x[o].distanceTo(x[o+1])>=L&&c.push(x[o]);return c.push(x[x.length-1]),c}(x)).length;if(i<2)return 0;const M=x[0].equals(x[i-1]);let Z,S,u=x[0];const d=o.strokeWidth/2,O=1/(i-1);let j,e,q,f,U=0,s=!1,D=0,$=3*E,a=2*E;z(x[0],x[1],H).multiplyScalar(d),r.copy(x[0]).sub(H),y.copy(x[0]).add(H),v.copy(r),B.copy(y);for(let c=1;c<i;c++){Z=x[c],S=c===i-1?M?x[1]:void 0:x[c+1];const L=H;if(z(u,Z,L),Q.copy(L).multiplyScalar(d),Y.copy(Z).sub(Q),F.copy(Z).add(Q),j=U+O,e=!1,void 0!==S){z(Z,S,N),Q.copy(N).multiplyScalar(d),t.copy(Z).sub(Q),m.copy(Z).add(Q),q=!0,Q.subVectors(S,u),L.dot(Q)<0&&(q=!1),1===c&&(s=q),Q.subVectors(S,Z),Q.normalize();const x=Math.abs(L.dot(Q));if(x>Number.EPSILON){const c=d/x;Q.multiplyScalar(-c),I.subVectors(Z,u),k.copy(I).setLength(c).add(Q),C.copy(k).negate();const L=k.length(),T=I.length();I.divideScalar(T),_.subVectors(S,Z);const h=_.length();switch(_.divideScalar(h),I.dot(C)<T&&_.dot(C)<h&&(e=!0),V.copy(k).add(Z),C.add(Z),f=!1,e?q?(m.copy(C),F.copy(C)):(t.copy(C),Y.copy(C)):p(),o.strokeLineJoin){case"bevel":P(q,e,j);break;case"round":K(q,e),q?G(Z,Y,t,j,0):G(Z,m,F,j,1);break;default:const x=d*o.strokeMiterLimit/L;if(x<1){if("miter-clip"!==o.strokeLineJoin){P(q,e,j);break}K(q,e),q?(_.subVectors(V,Y).multiplyScalar(x).add(Y),X.subVectors(V,t).multiplyScalar(x).add(t),l(Y,j,0),l(_,j,0),l(Z,j,.5),l(Z,j,.5),l(_,j,0),l(X,j,0),l(Z,j,.5),l(X,j,0),l(t,j,0)):(_.subVectors(V,F).multiplyScalar(x).add(F),X.subVectors(V,m).multiplyScalar(x).add(m),l(F,j,1),l(_,j,1),l(Z,j,.5),l(Z,j,.5),l(_,j,1),l(X,j,1),l(Z,j,.5),l(X,j,1),l(m,j,1))}else e?(q?(l(y,U,1),l(r,U,0),l(V,j,0),l(y,U,1),l(V,j,0),l(C,j,1)):(l(y,U,1),l(r,U,0),l(V,j,1),l(r,U,0),l(C,j,0),l(V,j,1)),q?t.copy(V):m.copy(V)):q?(l(Y,j,0),l(V,j,0),l(Z,j,.5),l(Z,j,.5),l(V,j,0),l(t,j,0)):(l(F,j,1),l(V,j,1),l(Z,j,.5),l(Z,j,.5),l(V,j,1),l(m,j,1)),f=!0}}else p()}else p();M||c!==i-1||J(x[0],v,B,q,!0,U),U=j,u=Z,r.copy(t),y.copy(m)}if(M){if(e&&T){let x=V,o=C;s!==q&&(x=C,o=V),q?(f||s)&&(o.toArray(T,0),o.toArray(T,9),f&&x.toArray(T,3)):!f&&s||(o.toArray(T,3),o.toArray(T,9),f&&x.toArray(T,0))}}else J(Z,Y,F,q,!1,j);return D;function z(x,o,c){return c.subVectors(o,x),c.set(-c.y,c.x).normalize()}function l(x,o,c){T&&(T[$]=x.x,T[$+1]=x.y,T[$+2]=0,h&&(h[$]=0,h[$+1]=0,h[$+2]=1),$+=3,A&&(A[a]=o,A[a+1]=c,a+=2)),D+=3}function G(x,o,L,T,h){H.copy(o).sub(x).normalize(),N.copy(L).sub(x).normalize();let A=Math.PI;const E=H.dot(N);Math.abs(E)<1&&(A=Math.abs(Math.acos(E))),A/=c,Q.copy(o);for(let o=0,L=c-1;o<L;o++)I.copy(Q).rotateAround(x,A),l(Q,T,h),l(I,T,h),l(x,T,.5),Q.copy(I);l(I,T,h),l(L,T,h),l(x,T,.5)}function p(){l(y,U,1),l(r,U,0),l(Y,j,0),l(y,U,1),l(Y,j,1),l(F,j,0)}function P(x,o,c){o?x?(l(y,U,1),l(r,U,0),l(Y,j,0),l(y,U,1),l(Y,j,0),l(C,j,1),l(Y,c,0),l(t,c,0),l(C,c,.5)):(l(y,U,1),l(r,U,0),l(F,j,1),l(r,U,0),l(C,j,0),l(F,j,1),l(F,c,1),l(m,c,0),l(C,c,.5)):x?(l(Y,c,0),l(t,c,0),l(Z,c,.5)):(l(F,c,1),l(m,c,0),l(Z,c,.5))}function K(x,o){o&&(x?(l(y,U,1),l(r,U,0),l(Y,j,0),l(y,U,1),l(Y,j,0),l(C,j,1),l(Y,U,0),l(Z,j,.5),l(C,j,1),l(Z,j,.5),l(t,U,0),l(C,j,1)):(l(y,U,1),l(r,U,0),l(F,j,1),l(r,U,0),l(C,j,0),l(F,j,1),l(F,U,1),l(C,j,0),l(Z,j,.5),l(Z,j,.5),l(C,j,0),l(m,U,1)))}function J(x,c,L,h,A,E){switch(o.strokeLineCap){case"round":A?G(x,L,c,E,.5):G(x,c,L,E,.5);break;case"square":if(A)H.subVectors(c,x),N.set(H.y,-H.x),Q.addVectors(H,N).add(x),I.subVectors(N,H).add(x),h?(Q.toArray(T,3),I.toArray(T,0),I.toArray(T,9)):(Q.toArray(T,3),Q.toArray(T,9),I.toArray(T,0));else{H.subVectors(L,x),N.set(H.y,-H.x),Q.addVectors(H,N).add(x),I.subVectors(N,H).add(x);const o=T.length;h?(Q.toArray(T,o-3),I.toArray(T,o-6),I.toArray(T,o-12)):(Q.toArray(T,o-6),I.toArray(T,o-3),I.toArray(T,o-12))}}}}}const fr={[YE.Yellow]:new AQ("#fff7e2"),[YE.None]:new AQ("#000000")},Ur={[YE.Yellow]:new AQ("#fff7e2"),[YE.None]:new AQ("#000000")},sr={callback:{createBranch:Mr},main:{radius0:1,radius1:1,dispersion:1.8,timeFactor:5,maxSegmentLength:6},branch:{radius0:1,radius1:0,dispersion:3,timeFactor:2,branchDepth:1,branchLength:16,maxSegmentLength:6,branchProbability:.01,branchDispersionFactor:.5,branchMinRadiusForBranch:.6},shadow:{count:1,radius0:.5,radius1:.5,spacing:6,dispersion:4,timeFactor:3,maxSegmentLength:12}},Dr={wireframe:!1,outlineStrength:1,appearanceTime:3,outlineGlow:2,outlineThickness:3},$r={[vx.t.Portrait]:{[s.K8.Player]:{isMirror:!1,offset:new zH(0,48)},[s.K8.Banker]:{isMirror:!0,offset:new zH(184,48)},[s.K8.Tie]:{isMirror:!1,offset:new zH(121,48)},[s.K8.PlayerPair]:{isMirror:!1,offset:new zH(0,0)},[s.K8.BankerPair]:{isMirror:!0,offset:new zH(184,0)}},[vx.t.Landscape]:{[s.K8.Player]:{isMirror:!1,offset:new zH(110,0)},[s.K8.Banker]:{isMirror:!0,offset:new zH(356,0)},[s.K8.Tie]:{isMirror:!1,offset:new zH(272,0)},[s.K8.PlayerPair]:{isMirror:!1,offset:new zH(0,0)},[s.K8.BankerPair]:{isMirror:!0,offset:new zH(602,0)}}};class ar extends Vr{constructor(x){const o=function(x){var o,c,L,T;const{svg:h,divisions:A=3,isMirror:E=!1,isMirrorV:H=!1,fitToParent:N=!0}=x;if(!h)return[];const Q=h.parentElement;let I=function(x){const o=x.cloneNode(!0),c=o.querySelectorAll("path, rect");for(const x of c)x.removeAttribute("fill"),x.removeAttribute("stroke");const L=o.querySelector("rect");if(L){const x=L.dataset.width,o=L.dataset.height;x&&o&&(L.setAttribute("width",x),L.setAttribute("height",o))}return o}(h);const k=null!==(o=null==Q?void 0:Q.offsetHeight)&&void 0!==o?o:document.body.offsetHeight,_=null!==(c=null==Q?void 0:Q.offsetWidth)&&void 0!==c?c:document.body.offsetWidth,X=Number(null!==(L=I.getAttribute("height"))&&void 0!==L?L:1),r=k/X,y=_/Number(null!==(T=I.getAttribute("width"))&&void 0!==T?T:1);let v=X;if(N&&(1!==y||1!==r)){const x=document.createElementNS("http://www.w3.org/2000/svg","g");x.innerHTML=I.outerHTML,x.setAttribute("transform",`scale(${y} ${r})`),I=x,v*=r}if(E){const x=document.createElementNS("http://www.w3.org/2000/svg","g");x.innerHTML=I.outerHTML,x.setAttribute("transform",`scale(-1, 1) translate(-${_}, 0)`),I=x}if(H){const x=document.createElementNS("http://www.w3.org/2000/svg","g");x.innerHTML=I.outerHTML,x.setAttribute("transform",`scale(1, -1) translate(0, -${k})`),I=x}const B=I.outerHTML,Y=(new qr).parse(B),F=[];for(const x of Y.paths){const o=x.toShapes(!0);for(const x of o){const o=x.getPoints(A);for(const x of o)F.push(new zH(x.x,v-x.y,0))}}return F}({svg:x.element.querySelector("svg"),isMirror:$r[x.orientation][x.name].isMirror});super({...Dr,color:fr[x.color],outlineColor:fr[x.color],scene3d:x.scene3d,offset:$r[x.orientation][x.name].offset},{...sr,points:o,name:x.name},!!x.freeze)}changeColor(x){this.material.color=fr[x],this.outline.visibleEdgeColor=Ur[x]}}class zr{create(x,o,c){if(function(x){return x&&"element"in x}(x))return new ar({name:x.name,element:x.element,color:x.color,orientation:c,scene3d:o,freeze:!1});if(function(x){return x&&!("element"in x)}(x))return new er({name:x.name,color:x.color,orientation:c,scene3d:o,freeze:!1});throw new Error("Please provide data for Card or BetSpot...")}}const lr=()=>T.Pj();class Gr extends hr{constructor(x,o){super(),this.textureID=void 0!==o?o:"tDiffuse",x instanceof JQ?(this.uniforms=x.uniforms,this.material=x):x&&(this.uniforms=KQ.clone(x.uniforms),this.material=new JQ({name:void 0!==x.name?x.name:"unspecified",defines:Object.assign({},x.defines),uniforms:this.uniforms,vertexShader:x.vertexShader,fragmentShader:x.fragmentShader})),this.fsQuad=new Hr(this.material)}render(x,o,c){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=c.texture),this.fsQuad.material=this.material,this.renderToScreen?(x.setRenderTarget(null),this.fsQuad.render(x)):(x.setRenderTarget(o),this.clear&&x.clear(x.autoClearColor,x.autoClearDepth,x.autoClearStencil),this.fsQuad.render(x))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class pr extends hr{constructor(x,o){super(),this.scene=x,this.camera=o,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(x,o,c){const L=x.getContext(),T=x.state;let h,A;T.buffers.color.setMask(!1),T.buffers.depth.setMask(!1),T.buffers.color.setLocked(!0),T.buffers.depth.setLocked(!0),this.inverse?(h=0,A=1):(h=1,A=0),T.buffers.stencil.setTest(!0),T.buffers.stencil.setOp(L.REPLACE,L.REPLACE,L.REPLACE),T.buffers.stencil.setFunc(L.ALWAYS,h,4294967295),T.buffers.stencil.setClear(A),T.buffers.stencil.setLocked(!0),x.setRenderTarget(c),this.clear&&x.clear(),x.render(this.scene,this.camera),x.setRenderTarget(o),this.clear&&x.clear(),x.render(this.scene,this.camera),T.buffers.color.setLocked(!1),T.buffers.depth.setLocked(!1),T.buffers.color.setMask(!0),T.buffers.depth.setMask(!0),T.buffers.stencil.setLocked(!1),T.buffers.stencil.setFunc(L.EQUAL,1,4294967295),T.buffers.stencil.setOp(L.KEEP,L.KEEP,L.KEEP),T.buffers.stencil.setLocked(!0)}}class Pr extends hr{constructor(){super(),this.needsSwap=!1}render(x){x.state.buffers.stencil.setLocked(!1),x.state.buffers.stencil.setTest(!1)}}class Kr{constructor(x,o){if(this.renderer=x,this._pixelRatio=x.getPixelRatio(),void 0===o){const c=x.getSize(new rH);this._width=c.width,this._height=c.height,(o=new DH(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:1016})).texture.name="EffectComposer.rt1"}else this._width=o.width,this._height=o.height;this.renderTarget1=o,this.renderTarget2=o.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Gr(Nr),this.copyPass.material.blending=0,this.clock=new bX}swapBuffers(){const x=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=x}addPass(x){this.passes.push(x),x.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(x,o){this.passes.splice(o,0,x),x.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(x){const o=this.passes.indexOf(x);-1!==o&&this.passes.splice(o,1)}isLastEnabledPass(x){for(let o=x+1;o<this.passes.length;o++)if(this.passes[o].enabled)return!1;return!0}render(x){void 0===x&&(x=this.clock.getDelta());const o=this.renderer.getRenderTarget();let c=!1;for(let o=0,L=this.passes.length;o<L;o++){const L=this.passes[o];if(!1!==L.enabled){if(L.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),L.render(this.renderer,this.writeBuffer,this.readBuffer,x,c),L.needsSwap){if(c){const o=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,x),c.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==pr&&(L instanceof pr?c=!0:L instanceof Pr&&(c=!1))}}this.renderer.setRenderTarget(o)}reset(x){if(void 0===x){const o=this.renderer.getSize(new rH);this._pixelRatio=this.renderer.getPixelRatio(),this._width=o.width,this._height=o.height,(x=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=x,this.renderTarget2=x.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(x,o){this._width=x,this._height=o;const c=this._width*this._pixelRatio,L=this._height*this._pixelRatio;this.renderTarget1.setSize(c,L),this.renderTarget2.setSize(c,L);for(let x=0;x<this.passes.length;x++)this.passes[x].setSize(c,L)}setPixelRatio(x){this._pixelRatio=x,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Jr extends hr{constructor(x,o,c,L,T){super(),this.scene=x,this.camera=o,this.overrideMaterial=c,this.clearColor=L,this.clearAlpha=void 0!==T?T:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new AQ}render(x,o,c){const L=x.autoClear;let T,h;x.autoClear=!1,void 0!==this.overrideMaterial&&(h=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(x.getClearColor(this._oldClearColor),T=x.getClearAlpha(),x.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&x.clearDepth(),x.setRenderTarget(this.renderToScreen?null:c),this.clear&&x.clear(x.autoClearColor,x.autoClearDepth,x.autoClearStencil),x.render(this.scene,this.camera),this.clearColor&&x.setClearColor(this._oldClearColor,T),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=h),x.autoClear=L}}class nr{constructor(x){this.time=0,this.raf=null,this.callbacks=new Set,this.animate=()=>{this.stop();const x=()=>{this.time=this.clock.getElapsedTime();for(const x of this.callbacks)x(this.time);this.composer.render(),this.raf=window.requestAnimationFrame(x)};x()},this.stop=()=>{this.raf&&(window.cancelAnimationFrame(this.raf),this.raf=null),this.composer.render()},this.dispose=()=>{for(const x of this.composer.passes)this.composer.removePass(x);this.composer.passes.length=0,this.scene.clear(),this.removeAnimationCallback(),this.stop(),this.composer.reset(),this.renderer.clear(),this.renderer.dispose()},this.addAnimationCallback=x=>{this.callbacks.add(x)},this.removeAnimationCallback=x=>{x?this.callbacks.delete(x):this.callbacks.clear()},this.addEffect=x=>{this.composer.addPass(x)},this.props=nr.parseParams(x),this.scene=new $_,this.camera=new YI(-this.props.offset,this.props.width+this.props.offset,this.props.height+this.props.offset,-this.props.offset,-50,50),this.renderer=new D_({canvas:this.props.canvas,antialias:this.props.antialias,alpha:this.props.alpha}),nr.prepareCanvas(this.renderer,this.props),this.composer=new Kr(this.renderer),this.renderPass=new Jr(this.scene,this.camera),this.composer.addPass(this.renderPass),this.clock=new bX}reset(){this.scene.clear(),this.time=0,this.renderer.clear(),this.renderer.state.reset(),this.composer.reset()}resize(x,o){this.props.width=x,this.props.height=o,this.camera.left=-this.props.offset,this.camera.right=this.props.width+this.props.offset,this.camera.top=this.props.height+this.props.offset,this.camera.bottom=-this.props.offset,this.camera.updateProjectionMatrix(),nr.prepareCanvas(this.renderer,this.props)}}nr.parseParams=function(x){var o,c,L;return{width:x.width,height:x.height,canvas:x.canvas,alpha:null===(o=x.alpha)||void 0===o||o,antialias:null===(c=x.antialias)||void 0===c||c,offset:null!==(L=x.offset)&&void 0!==L?L:0}},nr.prepareCanvas=function(x,o){x.setPixelRatio(window.devicePixelRatio),x.domElement.style.position="absolute",x.domElement.style.height=`${o.height+2*o.offset}px`,x.domElement.style.width=`${o.width+2*o.offset}px`,x.domElement.style.top=`-${o.offset}px`,x.domElement.style.left=`-${o.offset}px`,x.setClearColor(0,0),x.setSize(o.width+2*o.offset,o.height+2*o.offset)};const br="LightningGridOverlay--86db0",Wr=[s.K8.Player,s.K8.Banker,s.K8.Tie,s.K8.PlayerPair,s.K8.BankerPair],wr=({width:x,height:o,orientation:c,borders:L,hasMultipliers:T})=>{const h=Ah.useRef(null),A=Ah.useRef(null),[E,H]=Ah.useState(null);Ah.useEffect((()=>{null==E||E.reset()}),[x,o,E]);const N=function(x){const[o,c]=Ah.useState(null);return Ah.useEffect((()=>{Oo.I()||x.canvas&&(o?o.resize(x.width,x.height):c(new nr({canvas:x.canvas,width:x.width,height:x.height,offset:x.offset})))}),[x.canvas,x.height,x.offset,x.width,o,c]),o}({canvas:h.current,width:x,height:o,offset:20});return Ah.useEffect((()=>{N&&(E?(E.setScene(N),E.setOrientation(c)):H(new FE(new zr,N,c)))}),[N,E,c]),Ah.useEffect((()=>{L&&E&&N&&E.update(L)}),[E,L,N]),Ah.useEffect((()=>{N&&(T?N.animate():N.stop())}),[N,T]),Th.jsx("div",{className:br,ref:A,children:Th.jsx("canvas",{ref:h})})},gr=hh.PA((()=>{const x=lr(),o=x.multipliers.potentialMultipliers,c=x.multipliers.multiplierCardsExist,L=x.bets.bets,T=x.multipliers.dealtCardMultiplier,h=x.reference.betSpot.all,A=x.isDebug,E=Ah.useMemo((()=>{const c=[];if(Wr.every((x=>{return(o=h)&&x in o;var o}))){for(const T of Wr){const h=x.reference.betSpot.get(T);h&&c.push({name:T,element:h,color:L[T]&&(o[T]||A)?YE.Yellow:YE.None})}for(const x of Object.keys(T))c.push({name:x,color:T[x]||A?YE.Yellow:YE.None})}return c}),[h,x.reference.betSpot,L,o,T,A]);return Th.jsx(wr,{...x.layout.bettingGridSize,borders:E,orientation:x.ag.values.orientation,hasMultipliers:c})}));var Rr=c(373595),xy=c(935899),oy=c(803729),cy=c(704249),Ly=c(258237);const Ty=hh.PA((x=>{const o=lr(),c=o.cards.dealtCards.length>0||Object.keys(o.multipliers.potentialMultipliers).length>0;return!o.preferences.showBettingStats||c?null:Th.jsx(Ly.W,{...x,horizontalStatistics:x.betSpot===s.K8.Tie})}));var hy,Ay=c(757069),Ey=c(663078);!function(x){x.Idle="idle",x.Waiting="waiting",x.Ready="ready",x.InProgress="in_progress"}(hy||(hy={}));class Hy{constructor(x,o){this.fps=30,this.options={from:0,to:0},this.duration=x,this.delay=o||0,this.status=this.delay>0?hy.Idle:hy.Ready}get state(){return this.status}get frameTime(){return 1e3/this.fps}run(x){x.from!==x.to&&(this.status===hy.InProgress&&this.finish(),this.options=x,this.status!==hy.Idle?this.status===hy.Ready&&this.start():this.wait((()=>this.start())))}dispose(){var x,o;this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=void 0),this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0,null===(o=(x=this.options).onFinish)||void 0===o||o.call(x))}wait(x){this.status=hy.Waiting,this.delayTimeoutId=setTimeout((()=>{this.status=hy.Ready,x()}),this.delay)}start(){var x,o;this.status=hy.InProgress,this.rafId=requestAnimationFrame((x=>this.animate(x))),null===(o=(x=this.options).onStart)||void 0===o||o.call(x)}shouldEmitChangeInCurrentFrame(x){if(void 0===this.lastFrameTimestamp)return this.lastFrameTimestamp=x,!1;const o=x+16,c=this.lastFrameTimestamp+this.frameTime;return c<=o&&(this.lastFrameTimestamp=c,!0)}animate(x){this.startTimestamp||(this.startTimestamp=x);const o=(x-this.startTimestamp)/this.duration;if(o>=1)this.finish();else{if(this.shouldEmitChangeInCurrentFrame(x)){const x=this.computeNextValue(o);this.emit(x)}this.rafId=requestAnimationFrame((x=>this.animate(x)))}}computeNextValue(x){const{from:o,to:c}=this.options,L=o+(c-o)*x,T=10**function(x){const o=x.toString(),c=o.indexOf(".");return-1===c?0:o.length-c-1}(c);return Math.round(L*T)/T}emit(x){var o,c;this.previousValue!==x&&(this.previousValue=x,null===(c=(o=this.options).onChange)||void 0===c||c.call(o,x))}finish(){this.dispose(),this.emit(this.options.to),this.lastFrameTimestamp=void 0,this.startTimestamp=void 0,this.status=hy.Ready}}const{useState:Ny,useRef:Qy}=Eh,Iy=Ah.memo((({children:x,duration:o,value:c,delay:L,disabled:T,forceFromInitialValue:h,onStart:A,onFinish:E,skipSetTargetValueWhenDisabled:H=!1})=>{const N=Oo.I()?0:o,Q=Qy(new Hy(N,L)),[I,k]=Ny(0),_=Ay.Z(c);T&&I!==c&&!H&&k(c),Ah.useEffect((()=>{T||Q.current.run({from:h?0:null!=_?_:0,to:c,onChange:k,onStart:A,onFinish:E})}),[T,E,A,c,_,h]),Ey.i((()=>Q.current.dispose()));const X=x(I,I===c);return X&&Ah.Children.only(X)})),ky=Ah.memo((function({duration:x,value:o,isCounterEnabled:c=!1,...L}){return Th.jsx(Iy,{value:o,duration:x,disabled:!c,children:x=>Th.jsx(DA,{value:x,...L})})})),_y="appearingMultiplier--a36e6",Xy="multiplier--fe086",ry=({animationDelay:x=0,animationDuration:o=0,value:c,countingDuration:L=0,skipAnimation:T=!1,countingEnabled:h=!1,align:A,withShadow:E=!0,getMultiplierTheme:H})=>{const[N,Q]=Ah.useState(T),I=Number(N),k=Ah.useCallback((()=>{N||Q(!0)}),[N]),_=N?void 0:{animationDelay:`${x}ms`,animationDuration:`${o}ms`};return Th.jsx("div",{className:N?Xy:_y,style:_,onAnimationEnd:k,children:Th.jsx(ky,{value:c,sign:"x",duration:L,isCounterEnabled:N&&h,align:A,theme:null==H?void 0:H(c),withShadow:E},I)})},yy="multiplierContainer--7f5ed",vy="small--be963",By="portrait--ec945",Yy="landscape--cf355",Fy={[s.K8.Player]:"player--49445",[s.K8.Banker]:"banker--9eac0",[s.K8.Tie]:"tie--0c662",[s.K8.PlayerPair]:"playerPair--e3829",[s.K8.BankerPair]:"bankerPair--e1eec"},ty=Ah.memo((({betSpot:x,multiplier:o,isPortrait:c,containerClassNames:L,withShadow:T,onMultiplierChange:h,getMultiplierTheme:A})=>{const H=function(x=[]){const o=Ah.useRef(!1);return Ah.useEffect((()=>(o.current=!0,()=>{o.current=!1})),x),o.current}(),N=o>1;Ah.useEffect((()=>{N&&h&&h(o)}),[N,o,h]);const Q=new Set([s.K8.PlayerPair,s.K8.BankerPair]).has(x),{smallMultiplierOnSideBetSpot:I}=E.vL();return N?Th.jsx("div",{className:Hh.A(yy,Fy[x],L,{[By]:c,[Yy]:!c,[vy]:Q&&!!I}),children:Th.jsx(ry,{value:o,countingDuration:500,countingEnabled:H&&!Oo.I(),skipAnimation:!0,withShadow:T,getMultiplierTheme:A})}):null})),my=hh.PA((({betSpot:x,getMultiplierTheme:o})=>{var c;const L=lr(),T=L.gamePhase.value,h=Ah.useCallback((o=>{T===s.Qc.Resolved&&L.log.clientTotalMultiplierDisplayed(x,o)}),[x,T,L.log]);return Th.jsx(ty,{betSpot:x,isPortrait:L.device.isPortrait,onMultiplierChange:h,multiplier:null!==(c=L.multipliers.potentialMultipliers[x])&&void 0!==c?c:0,getMultiplierTheme:o})})),Cy=x=>{const{children:o,betSpot:c}=x;return Th.jsxs(cy.V,{...x,BetSpotInfo:Ty,children:[Th.jsx(my,{betSpot:c}),o]})},Vy=x=>Th.jsx(Rr.lN,{...x,GridCard:xy.A,CommonBetSpot:Cy,cardType:oy.b.Enhanced});var iy=c(656846);const My=x=>Th.jsx(iy.k,{...x,CommonBetSpot:Cy,payouts:[E.Tl("lightning.betSpot.Tie.payout")]});var Zy=c(905153);function Sy(x){return[E.Tl(`lightning.betSpot.${x}.payout`)]}const uy=x=>{const{betSpot:o}=x,c=o,L=Ah.useCallback((()=>Th.jsx(my,{betSpot:c})),[c]);return Th.jsx(Zy.p,{...x,payouts:Sy(o),ExtraComponent:L})},dy=hh.PA((({isCollapsed:x})=>{const o=lr(),L=Ah.lazy((()=>c.e(24451).then(c.bind(c,962567)).then((x=>({default:x.FpsMeter}))))),{isBetsOpen:T}=o.gamePhase,h=Ah.useCallback((()=>!T),[T]);return Th.jsxs(Th.Fragment,{children:[o.isDebug&&Th.jsx(Ah.Suspense,{children:Th.jsx(L,{})}),Th.jsx(BE,{onBetSpotClick:o.betProcessor.placeChip,MainBetSpot:Vy,TieBetSpot:My,SideBetSpot:uy,isCollapsed:x,GridOverlay:gr,betSpotHandlersActive:h})]})})),Oy=hh.PA((()=>{const x=lr(),o=x.gamePhase.isBetsOpen,c=x.timer.timeRemaining;return Th.jsx(XE,{isBettingTime:o,timeRemaining:c,children:Th.jsx(dy,{})})})),jy="leftFooter--7be2d",ey="shadow--50a62",qy=({children:x})=>Th.jsxs("div",{className:jy,children:[Th.jsx("div",{className:ey}),x]}),fy="logo--43fd7",Uy=({tableLogo:x})=>x?Th.jsx("div",{className:fy,children:Th.jsx("img",{src:x})}):null,sy="hidden--b2d3a",Dy="noAnimation--852ad",$y="logo--12ecd",ay=hh.PA((({isVisible:x,skipHideAnimation:o})=>{const c=dh.P();return Th.jsx("div",{className:Hh.A($y,{[sy]:!x,[Dy]:!x&&o}),children:Th.jsx(Uy,{tableLogo:c.settings.tableLogo})})})),zy="feeBox--ffb1c",ly="desktopLayout--8348e",Gy="classicLayout--1d5f5",py="fixedHeight--36b3a",Py="logo--24052",Ky="fee--63053",Jy="cards--bfbed",ny="effects--8dca2",by="fromBottom--18e74";function Wy(x,o){return x?{}:{height:`calc(100% - ${o}px)`,marginTop:Math.floor(1.3*o)}}const wy=({minHeight:x,isClassicLayout:o,isDesktop:c,isLogoVisible:L,skipLogoHiddenAnimation:T,isCollapsed:h,components:A})=>{const{Fee:E,Cards:H,BoxEffects:N}=A;return Th.jsxs("div",{className:Hh.A(zy,{[ly]:c&&!o,[Gy]:o,[py]:c,[by]:c&&o}),style:{minHeight:x},children:[c&&Th.jsx("div",{className:Py,style:Wy(o,x),children:Th.jsx(ay,{isVisible:L,skipHideAnimation:T})}),Th.jsx("div",{className:Ky,children:Th.jsx(E,{isCollapsed:h})}),H&&Th.jsx("div",{className:Hh.A(Jy,{[Gy]:o}),children:Th.jsx(H,{})}),N&&Th.jsx("div",{className:ny,children:Th.jsx(N,{})})]})};var gy=c(78886);const Ry="container--bed95",xv=Ah.memo((({createFeeSounds:x,...o})=>{const c=Ah.useRef(x());Ah.useEffect((()=>{c.current=x()}),[x]),Ah.useEffect((()=>()=>{c.current&&c.current.dispose()}),[]);const L=Ah.useCallback((x=>{c.current&&c.current.playEffect(x)}),[]);return Th.jsx("div",{className:Ry,children:Th.jsx(gy.c,{...o,onFeeEffect:L,role:"fee-with-sounds"})})}));var ov;!function(x){x.ChargeLoopStart="chargeLoopStart",x.ChargeLoopStop="chargeLoopStop",x.ChargeHeavy="charge"}(ov||(ov={}));class cv{constructor(){this.isLoopPlaying=!1}playEffect(x){switch(x){case RL.V.BetPlaced:this.playChargeLightLoop();break;case RL.V.AnimationStart:this.playChargingHeavy();break;case RL.V.None:this.stopChargeLightLoop()}}dispose(){}playChargeLightLoop(){this.isLoopPlaying||(dx.triggerEvent(ov.ChargeLoopStart),this.isLoopPlaying=!0)}stopChargeLightLoop(){this.isLoopPlaying&&(dx.triggerEvent(ov.ChargeLoopStop),this.isLoopPlaying=!1)}playChargingHeavy(){dx.triggerEvent(ov.ChargeHeavy)}}function Lv(){return new cv}const Tv=c.p+"images/background.b2c884df.webp",hv=c.p+"images/borderloop.c55570cc.webp",Av=c.p+"images/borderstar.65180209.webp",Ev=c.p+"images/feeloop.67f213d8.webp",Hv=c.p+"images/feestart.cb7010e3.webp",Nv=(c.p,c.p+"images/lightnings.c50e8712.webp"),Qv=c.p+"images/background.432f216d.webp",Iv=c.p+"images/borderloop.d0b52734.webp",kv=c.p+"images/borderstar.0fe44e46.webp",_v=(c.p,c.p+"images/feeloop.2f8e391c.webp"),Xv=c.p+"images/feestart.3c311cb2.webp",rv=c.p+"images/lightnings.9414bddb.webp";var yv,vv;!function(x){x.Red="red",x.Golden="golden"}(yv||(yv={})),function(x){x.TombstoneBorderStart="tombstoneBorderStart",x.TombstoneBorderLoop="tombstoneBorderLoop",x.FeeLoop="feeLoop",x.FeeStart="feeStart",x.LightningStrike="lightningStrike",x.TombstoneBackground="tombstoneBackground"}(vv||(vv={}));const Bv=yv.Golden,Yv={[yv.Red]:{[vv.TombstoneBorderLoop]:Iv,[vv.TombstoneBorderStart]:kv,[vv.FeeLoop]:_v,[vv.FeeStart]:Xv,[vv.LightningStrike]:rv,[vv.TombstoneBackground]:Qv},[yv.Golden]:{[vv.TombstoneBorderStart]:Av,[vv.TombstoneBorderLoop]:hv,[vv.FeeLoop]:Ev,[vv.FeeStart]:Hv,[vv.LightningStrike]:Nv,[vv.TombstoneBackground]:Tv}};function Fv(x,o){const c=x?.9:.4;return[{id:"feeBetPlaced1",spriteUrl:Yv[o].feeStart,duration:AT.Xo.BetsPlaced,alpha:c},{id:"feeBetPlaced2",spriteUrl:Yv[o].feeLoop,duration:4294967295,alpha:c,direction:hT.Alternate}]}function tv(x,o=AT.Xo.MaxDuration,c=!0){const L=Oo.I();return function(x,o=AT.Xo.MaxDuration,c=!0){const[L,T]=Ah.useState(!1),h=Ah.useRef(0),A=Ah.useRef(0),E=()=>{h.current&&window.clearTimeout(h.current),A.current&&window.clearTimeout(A.current)};return Ah.useEffect((()=>{if(E(),c)return h.current=window.setTimeout((()=>{T(!0),A.current=window.setTimeout((()=>{T(!1)}),o)}),x),()=>{E()};L&&T(!1)}),[x,c,o]),Ah.useEffect((()=>()=>T(!1)),[]),L}(L?0:x,L?0:o,c)}function mv(x,o,c=0){Ah.useEffect((()=>{if(x&&o){const x=window.setTimeout(o,c);return()=>{window.clearTimeout(x)}}}),[x,o,c])}function Cv(x){return`sprite-effect-${x}`}AT.ay.GameResult,AT.$e.Enabled,AT.ay.GameResult;const Vv=({id:x,currentAnimation:o,layer:c,isFrozenSprites:L=!1,onAnimationEnd:T,onAnimationStart:h})=>{const A=Ah.useRef(null),E=function(x){const[o,c]=Ah.useState(null);return Ah.useEffect((()=>{x.current?c(x.current.getContext("2d")):c(null)}),[x.current]),o}(A),H=function(x){return IT[x]||(IT[x]=new kT),IT[x]}(x);return Ah.useEffect((()=>{H.setLayer({...c,isFrozen:L,callbacks:{onAnimationStart:h,onAnimationEnd:T}})}),[c,L,H,T,h]),Ah.useEffect((()=>{H.setContext2d(E)}),[E,H]),Ah.useEffect((()=>(H.setCurrentAnimation(o),()=>{H.setCurrentAnimation("")})),[o,H]),Th.jsx("canvas",{ref:A,width:c.width,height:c.height,style:{width:"100%",height:"100%"},"data-role":Cv(x)})},iv="container--9bff5",Mv=({animation:x,onAnimation:o,layerOptions:c})=>(Ah.useEffect((()=>{null==o||o(x)}),[x,o]),Th.jsx("div",{className:iv,children:Th.jsx(Vv,{id:AT.BV.Fee,layer:c,currentAnimation:x})})),Zv=function(x=Bv){return{layerId:AT.BV.Fee,animationTimelines:{[RL.V.BetPlaced]:Fv(!1,x),[RL.V.AnimationStart]:Fv(!0,x)},x:0,y:0,width:846,height:160,isFrozen:!1}}(yv.Golden),Sv=x=>Th.jsx(Mv,{...x,layerOptions:Zv});var uv=c(496904);const dv=AT.v2-AT.uj,Ov=hh.PA((()=>{const x=lr(),{key:o,mappings:c}=x.fee.tooltipText,L=E.Tl(o,c);return Th.jsx(xv,{feeAmount:x.fee.value,feePercentage:x.fee.percentage,currency:x.settings.currencySymbol,orientation:x.device.orientation,tooltipLabel:L,animation:x.fee.animation,dimensions:x.layout.feeDimensions,isVisible:!x.multipliers.multiplierCardsExist,withAnimation:x.gamePhase.isLightning,animationDuration:AT.ei,animationDelay:dv,disappearingDelay:AT.v2,Effects:Sv,createFeeSounds:Lv,feeThemes:uv.t,registerReference:x.reference.common.set})}));var jv=c(912986),ev=c(886490);function qv({children:x,className:o,isLandscape:c}){const L=Ah.useRef(null),[T,h]=Ah.useState(""),A=Ah.useCallback((()=>{const x=L.current;if(x){const o=`${x.offsetHeight}px`;h(o)}}),[]);return Ah.useLayoutEffect((()=>{A()}),[c]),Ah.useEffect((()=>ev.w9(A)),[]),Th.jsx("div",{ref:L,className:o,style:{fontSize:T},children:x})}const fv=(Uv=["#F4E2C5","#635541","#A79375"],["data",`image/svg+xml,${encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="58" height="99" preserveAspectRatio="none">\n            <defs>\n                <linearGradient id="b" x1="50%" x2="50%" y1="0%" y2="100%">\n                    <stop stop-color="#2D2926" offset="0%" />\n                    <stop stop-color="#2C2926" offset="100%" />\n                </linearGradient>\n                <linearGradient id="a" x1="50%" x2="50%" y1="0%" y2="100%">\n                    <stop stop-color="${Uv[0]}" offset="0%" /><stop stop-color="${Uv[1]}" offset="91%" />\n                    <stop stop-color="#978468" offset="97%" /><stop stop-color="${Uv[2]}" offset="100%" />\n                </linearGradient>\n                <radialGradient id="c" cx="53%" cy="58%" r="116%" fx="53%" fy="588%" gradientTransform="matrix(0 .57 -1 0 1.11 .278)">\n                    <stop stop-color="${Uv[0]}" offset="0%" />\n                    <stop stop-color="${Uv[1]}" offset="54%" />\n                    <stop stop-color="${Uv[2]}" offset="100%" />\n                </radialGradient>\n            </defs>\n            <g fill="none">\n                <path id="Rectangle" fill="url(#b)" stroke="url(#a)" stroke-width="3.38" d="M29.15 97.35l23.72-2.56c1.5-.17 2.64-1.5 2.57-3L53.36 48.1v-.17l2.04-36.1c.08-1.5-1.02-2.83-2.52-3l-9.1-1.15L43 4.56 29.15 1.8 14.7 4.54l-.4 3.13-9.62 1.17c-1.5.18-2.6 1.5-2.53 3.02L4.2 47.94v.18L2.12 91.78c-.08 1.52 1.05 2.83 2.57 3l24.45 2.57z" />\n                <path stroke="url(#c)" stroke-width=".85" d="M44.04 3.48L29.14.5l-15.6 2.97-.38 3.07L4.53 7.6C2.35 7.84.76 9.74.9 11.93l2.03 36.12L.85 91.72c-.1 2.2 1.52 4.1 3.7 4.32l24.56 2.6 23.9-2.6c2.18-.23 3.8-2.12 3.7-4.3L54.62 48l2.04-36.1c.13-2.17-1.46-4.07-3.62-4.34L44.8 6.55l-.76-3.07z" />\n            </g>\n        </svg>`)}`].join(":"));var Uv,sv=c(595922);const Dv=({index:x,delay:o,layerTheme:c=yv.Golden})=>{const L=tv(o)?AT.$e.Enabled:AT.$e.Disabled,T=Ah.useMemo((()=>function(x=Bv){return{layerId:`${AT.ay.LightningBackground}-${x}`,animationTimelines:{[AT.$e.Enabled]:[{id:`lightningBackground-01-${x}`,spriteUrl:Yv[x].tombstoneBackground,duration:AT.Xo.FeeStart}]},x:0,y:0,width:194,height:132,isFrozen:!1}}(c)),[c]);return Th.jsx(Vv,{id:`${AT.ay.LightningCardBackground}-${x}`,layer:T,currentAnimation:L})},$v=Ah.memo((({index:x,delay:o,layerTheme:c=yv.Golden})=>{const L=tv(o),T=Ah.useMemo((()=>L?AT.$e.Enabled:AT.$e.Disabled),[L]),h=Ah.useMemo((()=>function(x=Bv){return{layerId:`${AT.ay.LightningCardBorder}-${x}`,animationTimelines:{[AT.$e.Enabled]:[{id:`lightningCardBorder-1-${x}`,spriteUrl:Yv[x].tombstoneBorderStart,duration:AT.Xo.FeeStart},{id:`lightningCardBorder-2-${x}`,spriteUrl:Yv[x].tombstoneBorderLoop,duration:4294967295}]},x:0,y:0,width:194,height:276,isFrozen:!1}}(c)),[c]);return Th.jsx(Vv,{id:`${AT.ay.LightningCardBorder}-${x}`,layer:h,currentAnimation:T})})),av="container--5cb15",zv="noAnimation--94619",lv="shell--013b5",Gv="lightningBackground--b8654",pv="lightningBorder--21495",Pv="elements--d38d6",Kv="cardContainer--68186",Jv="card--88842",nv="cardAppear--752e9",bv="cardBorder--a2a73",Wv="flare--eb6d0",wv="multiplier--22733",gv=({card:x,multiplier:o,index:c,isDealt:L,baseTime:T,cardTime:h,withAnimation:A,onCardDisplay:E,layerTheme:H,onCardReveal:N,theme:Q,isLandscape:I,onAnimationEnd:k})=>{const _=Ah.useRef(null),X=Ah.useCallback((()=>{E&&E({card:x,multiplier:o})}),[E,x,o]),r=Ah.useCallback((()=>{N&&N({card:x,multiplier:o})}),[N,x,o]),y=h-250,v=A?T+y*c:0,B=A?v+y:0,Y=A?y:0,F=A?Y+y:0;mv(A,X,v),mv(L,r,v);const t=Ah.useCallback((x=>{x.target===_.current&&(null==k||k())}),[k]);return Th.jsxs("div",{className:Hh.A(av,{[zv]:!A}),style:{animationDelay:`${v}ms`,animationDuration:`${Y}ms`},onAnimationEnd:t,ref:_,children:[Th.jsx("div",{className:Hh.A(lv,null==Q?void 0:Q.shell),style:{backgroundImage:`url("${(null==Q?void 0:Q.tombstoneBackgroundSvg)||fv}")`}}),Th.jsxs("div",{className:Pv,children:[o&&Th.jsx(qv,{className:wv,isLandscape:I,children:Th.jsx(ry,{value:o,animationDelay:v,animationDuration:F})}),Th.jsxs("div",{className:Kv,children:[Th.jsx("div",{className:Hh.A(Jv,{[nv]:L}),children:Th.jsx(sv.Z,{code:x,theme:Uh.Sx.Default,colorScheme:L?Uh.zM.Default:Uh.zM.Dark})}),Th.jsx("div",{className:(null==Q?void 0:Q.borderColor)||bv})]}),L&&Th.jsx("div",{className:Wv})]}),A&&Th.jsx("div",{className:Gv,children:Th.jsx(Dv,{index:c,delay:B,layerTheme:H},c)}),Th.jsx("div",{className:Hh.A(pv),children:Th.jsx($v,{index:c,delay:B,layerTheme:H},c)})]})},Rv="lightningCards--13a84",xB="fromBottom--29d65",oB="fromCenter--08bae",cB="lightningCard--9ec39",LB="bubbleRef--f7a84",TB="bubblePosition--d6b43",hB="desktop--36d4c",AB="classicLayout--3adb2",EB="landscape--06876",HB="mobile--4607f",NB="portrait--49b56",QB="twoCards--4ca7e",IB="oneCard--a7d9e",kB="threeCards--72213",_B="fourCards--8b11f",XB=Ah.forwardRef((({cardCount:x,isDesktop:o,isClassicLayout:c,isLandscape:L,role:T,children:h,isBubbleRef:A},E)=>Th.jsx("div",{ref:E,"data-role":T,className:Hh.A(cB,{[hB]:o,[AB]:c,[EB]:L&&!o,[HB]:!o,[NB]:!L,[IB]:1===x,[QB]:2===x,[kB]:3===x,[_B]:4===x,[LB]:A}),children:h}))),rB=({lightningCards:x,dimensions:o,isDesktop:c,withAnimation:L,onAnimationEnd:T,isLandscape:h,isClassicLayout:A,getLayerTheme:E,getTombstoneTheme:H,onCardDisplay:N,onCardReveal:Q,registerBubbleRef:I=jv.A})=>{const k=rE.v(I,nL.MultipliersCards),[_,X]=Ah.useState(0);Ah.useEffect((()=>{L&&x.length>0&&_===x.length&&(null==T||T())}),[_,x.length]);const r=Ah.useCallback((()=>{X((x=>x+1))}),[]),y=x.length,{scale:v,scaledWidth:B,scaledHeight:Y,absoluteWidth:F,absoluteHeight:t,reverseScale:m}=o,C={"--cardMaxHeight":`${t}px`,"--cardMaxWidth":52/(90/t)+"px","--reverseScale":m};return Th.jsx("div",{style:{width:B,height:Y},children:Th.jsxs("div",{style:{transform:`scale(${v})`,width:F,height:t,...C},className:Hh.A(Rv,{[xB]:c&&!A,[oB]:A}),"data-role":"lightning-cards",children:[Th.jsx(XB,{isBubbleRef:!0,isDesktop:c,isLandscape:h,cardCount:y,children:Th.jsx("div",{className:TB,ref:k})},"multiplier-bubble-ref"),x.map(((x,o)=>{const{card:T,multiplier:I,isDealt:k}=x,_=null==H?void 0:H(I),X=null==E?void 0:E(I),v=`card${o}`;return Th.jsx(XB,{role:`card-${T}-multiplier-${I}-lightning-${k}`,isDesktop:c,isLandscape:h,isClassicLayout:A,cardCount:y,children:Ah.createElement(gv,{...x,withAnimation:L,index:o,key:v,theme:_,layerTheme:X,isLandscape:h,onAnimationEnd:L?r:void 0,onCardDisplay:N,onCardReveal:Q})},v)}))]})})},yB=hh.PA((()=>{const x=lr(),o=x.multipliers.multipliersCards,c=x.layout.lightningCardsDimensions,L=x.multipliers.multiplierCardsExist,T=x.gamePhase.isLightning,h=x.device.isDesktop,A=x.device.isLandscape,E=x.layout.isDesktopClassic,H=Ah.useCallback((()=>{x.layout.setIsMultipliersCardsVisible(!0)}),[x.multipliers]);Ah.useEffect((()=>{L&&!T&&x.layout.setIsMultipliersCardsVisible(!0),L||x.layout.setIsMultipliersCardsVisible(!1)}),[L,x.layout,T]);const N=Ah.useCallback((()=>{x.multipliers.setCardsVisible(),x.sounds.playTombstoneCard()}),[x.sounds,x.multipliers]),Q=Ah.useCallback((()=>{x.sounds.playTombstoneCardMatch()}),[x.sounds]);return L?Th.jsx(rB,{registerBubbleRef:x.reference.bubble.set,lightningCards:o,dimensions:c,withAnimation:T,isDesktop:h,isLandscape:A,isClassicLayout:E,onAnimationEnd:H,onCardDisplay:N,onCardReveal:Q}):null})),vB="strike--95ccc",BB=({isVisible:x,dimensions:o,top:c,layerTheme:L})=>{const T=tv(AT.uj,AT.Xo.Strike,x),h=Ah.useMemo((()=>function(x){const o=null!=x?x:yv.Golden;return{layerId:AT.ay.LightningStrike,animationTimelines:{[AT.$e.Enabled]:[{id:"lightningStrike",spriteUrl:Yv[o].lightningStrike,duration:AT.Xo.Strike}]},x:0,y:0,width:360,height:272,isFrozen:!1}}(L)),[L]);if(!T)return null;const{scaledWidth:A,scaledHeight:E}=o;return Th.jsx("div",{className:vB,style:{width:A,height:E,marginTop:c},children:Th.jsx(Vv,{id:AT.ay.LightningStrike,layer:h,currentAnimation:AT.$e.Enabled})})},YB={Cards:yB,BoxEffects:hh.PA((()=>{const x=lr(),o=x.layout.lightningStrikeDimensions,c=x.gamePhase.isLightning&&!x.multipliers.cardsVisible,L=x.layout.feeDimensions.scaledHeight;return Th.jsx(BB,{isVisible:c,top:L,dimensions:o,layerTheme:yv.Golden})})),Fee:Ov},FB=hh.PA((()=>{const x=lr();return Th.jsx(wy,{minHeight:x.layout.feeDimensions.scaledHeight,isClassicLayout:x.layout.isDesktopClassic,isDesktop:x.device.isDesktop,isLogoVisible:!x.multipliers.multiplierCardsExist,skipLogoHiddenAnimation:x.layout.skipLogoHiddenAnimation,components:YB})})),tB="roads--d0173",mB="white--48bfa",CB="noPadding--52fc3",VB="left--4936f",iB="rounded--adbc9",MB="right--94e52";var ZB;function SB({children:x,whiteBackground:o,position:c,isDesktop:L,rounded:T,displayMode:h}){return x&&Th.jsx("div",{className:Hh.A(tB,{[mB]:o,[VB]:c===ZB.Left,[MB]:c===ZB.Right,[iB]:T,[CB]:!L||h===mx.FourLinesDesktopClassic}),children:x})}!function(x){x.Left="left",x.Right="right"}(ZB||(ZB={}));const uB=hh.PA((function({children:x,whiteBackground:o,position:c}){const L=dh.P(),T=L.device.isDesktop,h=L.layout.roadsDisplayMode,A=L.settings.isBaccaratV4;return Th.jsx(SB,{whiteBackground:o,position:c,isDesktop:T,displayMode:h,rounded:T&&A,children:x})})),dB=new Map([[N.I.Chinese,"chinese"],[N.I.Normal,"normal"],[N.I.Korean,"korean"],[N.I.Number,"number"]]),OB="beadRoad--9fce3";function jB(x){switch(x){case tx.DesktopImmersive:return 26;case tx.DesktopClassic:return 21;case tx.TabletLive:case tx.PhoneLandscapeLive:return 10;case tx.PhonePortraitLive:return 26;case tx.ExtraLargeLandscape:return 15;case tx.LargeLandscape:return 10;case tx.SmallLandscape:return 8;case tx.PhonePortrait:return 5;default:Xo.xb(x)}}function eB(x){return{columnCount:jB(x),rowCount:6}}function qB(x,o){return o[(o.indexOf(x)+1)%o.length]}const fB=Ah.memo((({withTooltip:x,displayMode:o,gridIcons:c,scorecardTheme:L,mode:T,modes:h,onModeChanged:A,hideTooltip:E,showTooltip:N,skipFirstLastLines:Q,columnsCount:I,scorecardThemesOverrides:k,IconShapeComponent:_})=>{const X=()=>{E&&E()},{rowCount:r}=eB(o),y={rowCount:r,columnCount:I,scorecardTheme:L,gridIcons:c,isInterlacedMode:!1,IconShapeComponent:_,skipFirstLastLines:Q,defaultIconId:"bead-road",scorecardThemesOverrides:k},v={onClick:o=>{o.preventDefault();const c=qB(T,h);A({mode:c}),x&&X()}};return x&&(v.onMouseEnter=x=>{if(N){const o=qB(T,h);N(`tooltip.beadRoad.${dB.get(o)}`,lo(x.currentTarget))}},v.onMouseLeave=X),Th.jsx("svg",{...v,"data-role":`${H.RoadType.Bead}-road`,"data-mode":T,viewBox:`0 0 ${I} ${r}`,className:OB,children:Th.jsx(H.RoadMemo,{...y,...v})})}),uc.A);function UB({containerWidth:x,containerHeight:o,containerPadding:c=0,spaceBetweenBigDerivatives:L=0},T=Math.ceil){const h=9+L,A=6+L,E=3*T(x/o*(h+c)/3),N=E/3,Q=E-2*N;return{container:{width:E,height:h},roads:{[H.RoadType.Big]:{x:0,y:0,width:E,height:6,interlaced:!1},[H.RoadType.BigEye]:{x:0,y:A,width:N,height:3,interlaced:!0},[H.RoadType.Small]:{x:N,y:A,width:Q,height:3,interlaced:!0},[H.RoadType.Cockroach]:{x:N+Q,y:A,width:N,height:3,interlaced:!0},[H.RoadType.Bead]:{x:0,y:0,width:0,height:0,interlaced:!0}}}}function sB(x){return UB(x)}function DB({containerWidth:x,containerHeight:o,beadColumns:c,beadRows:L,directionRow:T,containerPadding:h=0,spaceBetweenBlocks:A=0,spaceBetweenBigDerivatives:E=0}){const N=9+(T?E:0);if(T){const T=N*c/L,A=sB({containerWidth:x-o*T/N,containerHeight:o,containerPadding:h,spaceBetweenBigDerivatives:E});return A.roads[H.RoadType.Bead].width=T,A.roads[H.RoadType.Bead].height=N,A}const Q=c*N/L,I=o-x/c*L,k=sB({containerWidth:x,containerHeight:I-o/(N+N*Q/(3*Math.ceil(x/I*N/3))+A)*A,containerPadding:h,spaceBetweenBigDerivatives:E});return k.roads[H.RoadType.Bead].width=Q,k.roads[H.RoadType.Bead].height=N,k}var $B,aB=c(765198);function zB(x,o){return aB.A(Object.keys(o).map((c=>{const L=x.roads[c];return PB(L,GB(L,x.container,o[c]),c)})))}!function(x){x.Idle="Idle",x.ZoomingIn="ZoomingIn",x.ZoomingOut="ZoomingOut",x.Zoomed="Zoomed"}($B||($B={}));const lB=.8;function GB(x,o,c){const L=o.height/x.height*x.width,T=L*(Number.isNaN(c)?0:c)/100;let h=0;if(L<o.width)h=(o.width-L)/2;else if(T>o.width*lB){const c=L/x.width,A=Math.ceil((o.width*lB-T)/c)*c;h=Math.max(o.width-L,A)}return{x:h,y:0,height:o.height,width:L,interlaced:x.interlaced}}const pB=["x","y","width","height"];function PB(x,o,c,L){return pB.filter((c=>x[c]!==o[c])).map((T=>({from:x[T],to:o[T],attr:T,disabled:!!L,target:c,key:c+T+String(x[T]>o[T])}))).filter((({to:x,from:o})=>!Number.isNaN(x)&&!Number.isNaN(o)))}function KB(x,o,c={}){var L;const T=(null!==(L=Number(c.strokeWidth))&&void 0!==L?L:0)/2;switch(x){case H.RoadType.Big:return Th.jsx("line",{x1:0,y1:o.height,x2:o.width,y2:o.height,...c},`${x}-bottom`);case H.RoadType.BigEye:return Th.jsxs(Th.Fragment,{children:[Th.jsx("line",{x1:o.x,y1:o.y,x2:o.width,y2:o.y,...c},`${x}-top`),Th.jsx("line",{x1:o.width,y1:o.y,x2:o.width,y2:o.y+o.height,...c},`${x}-right`)]});case H.RoadType.Small:return Th.jsxs(Th.Fragment,{children:[Th.jsx("line",{x1:o.x,y1:o.y,x2:o.x+o.width,y2:o.y,...c},`${x}-top`),Th.jsx("line",{x1:o.x,y1:o.y+T,x2:o.x,y2:o.y+o.height,...c},`${x}-left`),Th.jsx("line",{x1:o.x+o.width,y1:o.y+T,x2:o.x+o.width,y2:o.y+o.height,...c},`${x}-right`)]});case H.RoadType.Cockroach:return Th.jsxs(Th.Fragment,{children:[Th.jsx("line",{x1:o.x,y1:o.y,x2:o.x+o.width,y2:o.y,...c},`${x}-top`),Th.jsx("line",{x1:o.x,y1:o.y+T,x2:o.x,y2:o.y+o.height,...c},`${x}-left`)]})}return null}function JB(x=[],o,c){const L=[...x].sort(((x,o)=>o.col-x.col)),T=L.length?L[0].col:0,h=c?2*o:o;let A=0;return T>h?A=100:(A=Math.ceil(T/h*100),A=Number.isNaN(A)?0:A),A}const nB=Ah.memo((function({roads:x,roadsProgress:o,showTooltip:c,hideTooltip:L,layout:T,onFocusedRoadChange:h,isStatic:A=!1,uniqId:E,zoomRoadOverflow:H=!1,framesAroundRoadsStyles:N,RoadContainer:Q,onClick:I}){const[k,_]=Ah.useState(void 0),[X,r]=Ah.useState(x),y=Ah.useRef(null!=E?E:String(Math.random())),[v,B,Y]=function(x,o,c){const[L,T]=Ah.useState(zB(o,c)),[h,A]=Ah.useState(o.roads),[E,H]=function(x){const[o,c]=Ah.useState(void 0),[L,T]=Ah.useState($B.Idle);return Ah.useEffect((()=>{L===$B.Idle&&x?(c(x),T($B.ZoomingIn),setTimeout((()=>T($B.Zoomed)),400)):L!==$B.Zoomed||x||(T($B.ZoomingOut),setTimeout((()=>{T($B.Idle),c(void 0)}),400))}),[L,x]),[o,L]}(x);return Ah.useEffect((()=>{if(H===$B.ZoomingIn){const x=o.roads[E],L=GB(x,o.container,c[E]);T(PB(x,L,E,!0))}else if(H===$B.Zoomed){const x=o.roads[E],L=GB(x,o.container,c[E]),h={...o.roads,[E]:L};T(PB(L,x,E)),A(h)}else if(H===$B.ZoomingOut){const x=o.roads[E],L=GB(x,o.container,c[E]);T(PB(L,x,E,!0))}else H===$B.Idle&&(A(o.roads),T(zB(o,c)))}),[E,o,H,c]),[h,L,H===$B.Idle||H===$B.Zoomed]}(k,T,o),F=Ah.useCallback((x=>()=>{if(null==I||I(),Y){r((o=>[...o.filter((o=>o!==x)),x]));const o=k?void 0:x;_(o),h&&h(o),null==L||L()}}),[L,h,k,Y,I]),t=Ah.useCallback((x=>o=>{if(c){const L=k===x?"tooltip.clickToMinimize":"tooltip.clickToEnlarge",T=o.currentTarget.getBoundingClientRect();c(L,T)}}),[c,k]);return Th.jsxs("svg",{viewBox:`0 0 ${T.container.width} ${T.container.height}`,xmlns:"http://www.w3.org/2000/svg",children:[X.map((x=>{const o=H&&k&&k!==x,c=N&&k!==x;return Th.jsxs("g",{children:[Th.jsx(Q,{x:v[x].x,y:v[x].y,onMouseEnter:A?void 0:t(x),onMouseLeave:A?void 0:L,onClick:A?void 0:F(x),id:`${x}-${y.current}`,width:v[x].width,height:v[x].height,hidden:o,layout:T,roadType:x,focusedRoad:k},`${x}`),c&&KB(x,v[x],N)]},x)})),!A&&B.map((({target:x,attr:o,from:c,to:L,disabled:T,key:h})=>Th.jsx("animate",{xlinkHref:`#${x}-${y.current}`,from:c,to:L,attributeName:o,dur:"400ms",begin:T?"indefinite":"click",fill:"freeze"},h)))]})}),uc.A),bB=hh.PA((({roads:x,roadsData:o,zoomRoadOverflow:c,gridLayout:L,showTooltip:h,hideTooltip:A,RoadContainer:E,framesAroundRoadsStyles:N,onFocusedRoadChange:Q})=>{const I=T.Pj(),k=Object.keys(L.roads).reduce(((x,c)=>Object.assign(x,{[c]:JB(o[c],L.roads[c].width,L.roads[c].interlaced)})),{}),_=Ah.useCallback((x=>{const o=function(x){switch(x){case H.RoadType.Big:return q.Big;case H.RoadType.Small:return q.SmallEye;case H.RoadType.Cockroach:return q.Cockroach;case H.RoadType.BigEye:return q.BigEye;default:return}}(x),c=x?f.Enlarged:f.Original;null==Q||Q(x),I.log.clientFourRoad(c,o)}),[Q,I.log]),X=Ah.useCallback((()=>{I.sounds.playClickButtonSound()}),[I.sounds]);return Th.jsx(nB,{roads:x,layout:L,roadsProgress:k,isStatic:!1,onFocusedRoadChange:_,zoomRoadOverflow:c,showTooltip:h,hideTooltip:A,RoadContainer:E,onClick:X,framesAroundRoadsStyles:N})}));var WB=c(278982);const wB="flyingBodies--27a9a",gB="isDesktop--22d39",RB="flyingBody--6d663",xY="pulse--3be52",oY="hiding--715aa";function cY(x,o,c){return hY(o,c)?x+.1:TY(o)?0:x}const LY={};function TY(x){return 1===x}function hY(x,o){const c=function(x){return x/100}(o);return x>=c&&!TY(x)}function AY(x,o){return Date.now()-o>x.startTime}const EY=({Component:x,bodies:o,defaultBodyValue:c,isAnimationEnabled:L,isDesktop:T,releaseBodies:h,scale:A=1,zIndex:E,animationDuration:H,animationLandPercentage:N,pulseAnimationDuration:Q,scaleFunction:I,registerBodyContainerRef:k,getBodyRef:_,bodiesKey:X,reverseScale:r,skipVisibilityCheck:y=!1,autoDetectScale:v=!1,flyingBodiesContainerKey:B="flying-bodies-box-key"})=>{const Y=rE.v(k,B),F=Ah.useRef(),t=Ah.useRef(),m=Ah.useRef(2*H),C=Ah.useRef(null),V=Ah.useCallback((()=>{F.current&&(cancelAnimationFrame(F.current),F.current=void 0)}),[]),i=Ah.useCallback((()=>{t.current&&(clearTimeout(t.current),t.current=void 0)}),[]);return Ah.useEffect((()=>{function x(o){var c,L;if(g.A(o))V();else{const T=v?(L=_(B))?L.getBoundingClientRect().width/L.offsetWidth:1:r;(function({bodies:x,originalScale:o,animationDuration:c,maxAnimationDuration:L,animationLandPercentage:T,pulseAnimationDuration:h,scaleFunction:A=cY,bodySize:E,getBodyRef:H,skipVisibilityCheck:N,reverseScale:Q,flyingBodiesContainerKey:I="flying-bodies-box-key"}){x.forEach((x=>{if(AY(x,L))return;const{from:k,id:_,startTime:X,to:r}=x,y=H(k),v=H(r),B=H(I);if(!y||!v||!B)return;if(!(y.offsetParent&&v.offsetParent||N))return;const Y=function(x,o){const c=(L=0,T=o,h=Date.now()-x,Math.min(Math.max(L,h),T)/o);var L,T,h;return WB.rH(c)}(X,c),F=function(x,o,c,L,T,h){const A=lo(x,h),E=lo(o,h),H=lo(c,h),N=(A.width-T)/2,Q=(A.height-T)/2,I=E.x-A.x-N,k=E.y-A.y-Q,_=(E.width-T)/2,X=(E.height-T)/2,r=A.x+N+_*L+I*L,y=A.y+Q+X*L+k*L,v=r-H.x,B=y-H.y;return[Math.round(v),Math.round(B)]}(y,v,B,Y,E,Q);if(void 0===F)return;const t=A(o,Y,T);h&&function(x,o,c,L,T){hY(c,T)&&(clearTimeout(LY[o]),x.classList.add(xY),LY[o]=setTimeout((()=>x.classList.remove(xY)),L))}(v,r,Y,h,T),function(x,o,c){const L=document.getElementById(x);if(L){const[x,T]=o;L.style.transform=`translate(${x}px, ${T}px) scale(${c})`}}(_,F,t)}))})({bodies:o,originalScale:v?A/(null!=T?T:1):A,animationDuration:H,maxAnimationDuration:m.current,animationLandPercentage:N,pulseAnimationDuration:Q,scaleFunction:I,bodySize:(null===(c=C.current)||void 0===c?void 0:c.offsetHeight)||0,getBodyRef:_,reverseScale:T,skipVisibilityCheck:y,flyingBodiesContainerKey:B}),F.current=requestAnimationFrame((()=>x(o)))}}return V(),L&&(F.current=requestAnimationFrame((()=>x(o)))),V}),[o]),Ah.useEffect((()=>(t.current=setTimeout((()=>{const x=o.filter(AY).map((c="id",x=>x[c]));var c;g.A(x)||h(x)}),m.current),i)),[o,i,h]),L?Th.jsxs("div",{ref:Y,className:Hh.A(wB,{[gB]:T}),"data-bodies":X,"data-no-flying-bodies":g.A(o),style:{zIndex:E},children:[o.map((({id:o,options:L,value:T})=>{const h=null==L?void 0:L.playHideAnimation,A=Hh.A(RB,{[oY]:h});return Th.jsx("div",{id:o,className:A,children:Th.jsx(x,{value:T||c})},o)})),Th.jsx("div",{className:RB,ref:C,children:Th.jsx(x,{value:c})})]}):null};var HY=c(898788);const NY="flyingProbe--68d15",QY=hh.PA((({value:x})=>{const o=dh.P(),c=o.prediction.winner;if(!c)return null;const{zoomedRoad:L}=o.shoe,T=x===H.RoadType.Bead;if(L&&L!==x&&!T)return null;const h=lo(o.reference.roadProbe.get(x),o.ag.values.gameDimensions.reverseScale),A=o.shoe.roads.probes[c][x],E={roadType:x,winnerType:T?c:A?H.getWinnerTypeBaccarat(A.color):H.WinnerTypeBaccarat.Legend,isLive:!0,symbol:T?String(HY.wy(o.shoe.beadRoadMode,HY.Y7(c))):void 0};return Th.jsx("div",{style:{width:`${h.width}px`,height:`${h.height}px`},className:NY,children:Th.jsx(H.RoadItemBaccarat,{...E})})})),IY=hh.PA((()=>{const{reference:x,flyingProbes:o,device:c}=dh.P(),L=Ah.useCallback((o=>[H.WinnerTypeBaccarat.Banker,H.WinnerTypeBaccarat.Player,Mo.FlyingProbesBodyContainer].includes(o)?x.prediction.get(o):Object.values(H.RoadType).includes(o)?x.roadProbe.get(o):void 0),[x.prediction,x.roadProbe]),T=Ah.useMemo((()=>o.bodies.length>0&&Object.values(x.roadProbe.all).reduce(((x,o)=>o?x+1:x),0)===o.bodies.length?o.bodies:[]),[o.bodies,x.roadProbe.all]),h=Ah.useCallback(((o,c)=>{x.prediction.set(Mo.FlyingProbesBodyContainer,c)}),[x.prediction]);return o.isAvailable?Th.jsx(EY,{autoDetectScale:!0,defaultBodyValue:"0",scale:1.15,isAnimationEnabled:o.animationEnabled,bodies:T,animationDuration:500,animationLandPercentage:100,isDesktop:c.isDesktop,Component:QY,releaseBodies:o.removeBodies,registerBodyContainerRef:h,flyingBodiesContainerKey:Mo.FlyingProbesBodyContainer,getBodyRef:L,skipVisibilityCheck:!0,bodiesKey:"flying-probes"}):null})),kY=hh.PA((({columnsCount:x})=>{const o=dh.P(),{animationEnabled:c,areAllRoadsLanded:L}=o.flyingWin,T=c&&!!o.gameResult.winner&&!L,h=o.layout.beadRoadDisplayMode,A=o.device.isDesktop,E=o.shoe.beadRoadMode,N=eB(h),Q=x||N.columnCount,I=A?2:1,k=Ah.useCallback(((x,c)=>{o.reference.roadProbe.set(H.RoadType.Bead,c)}),[o.reference.roadProbe]),_=Ah.useCallback(((x,c)=>{o.reference.winRoads.set(H.RoadType.Bead,c)}),[o.reference.winRoads]),X=HY.K0(Q-I,N.rowCount,o.shoe.history,E,o.layout.isDesktopImmersive,o.prediction.winner,o.flyingProbes.animationEnabled?.42:void 0,o.flyingProbes.isAvailable,T),r=H.mapIconsToRoadItemsBaccarat(X,!0,void 0,o.shoe.resolveMultiplierTheme,k,c?_:void 0),y=o.preferences.isWhiteScorecardTheme?H.ScorecardThemeNames.WhiteSolid:H.ScorecardThemeNames.BlackDot,v=Ah.useCallback((x=>{o.shoe.setBeadRoadMode(x.mode),o.sounds.playClickButtonSound(),o.log.clientBeadRoad(x.mode)}),[o.log,o.shoe,o.sounds]),B=Ah.useCallback(((x,c)=>{o.tooltip.showBeadRoadGridTooltip(x,c)}),[o.tooltip]),Y=Ah.useCallback((()=>{o.tooltip.hideBeadRoadGridTooltip()}),[o.tooltip]),F=o.layout.getScorecardThemesOverrides(H.RoadType.Bead);return Th.jsx(fB,{columnsCount:Q,displayMode:h,mode:E,modes:o.shoe.availableBeadRoadModes,gridIcons:r,IconShapeComponent:H.EmptyRoadItem,scorecardTheme:y,onModeChanged:v,withTooltip:o.device.isDesktop,showTooltip:B,hideTooltip:Y,skipFirstLastLines:!!o.layout.framesAroundRoadsStyles,scorecardThemesOverrides:F})})),_Y=hh.PA((({type:x,scorecardTheme:o,emptyIconShape:c,extraShapes:L,probeExtraShapes:T,rowCount:h,columnCount:A,isInterlacedMode:E})=>{const N=dh.P(),{animationEnabled:Q,areAllRoadsLanded:I}=N.flyingWin,{winner:k}=N.gameResult,_=Q&&k,X=N.shoe.getRoadItems(x),r=N.layout.getScorecardThemesOverrides(x),y=N.prediction.winner,v=Ah.useCallback(((x,o)=>{N.reference.roadProbe.set(x,o)}),[N.reference.roadProbe]),B=Ah.useCallback(((x,o)=>{N.reference.winRoads.set(x,o)}),[N.reference.winRoads]),Y=Ah.useMemo((()=>L||_?X.map(((x,o)=>({...x,extraShapes:L&&x.extraShapes?[...x.extraShapes,...L]:L,isHidden:_&&!I&&o===X.length-1}))):X),[L,_,I,X]);return Th.jsx(H.RoadBaccarat,{currentWinnerType:Q&&k?H.WinnerTypeBaccarat[k]:void 0,pulsingAnimationDelay:N.flyingProbes.animationEnabled?.42:void 0,isProbePulsing:N.flyingProbes.isAvailable,registerProbeRef:N.flyingProbes.isAvailable?v:void 0,registerLastRoadRef:_?B:void 0,type:x,scorecardTheme:o||N.preferences.scorecardTheme,roadItems:Y,probes:N.shoe.roads.probes,probesWinnerType:y,isLive:!0,emptyIconShape:c,probeExtraShapes:T,rowCount:h,columnCount:A,skipFirstLastLines:!!N.layout.framesAroundRoadsStyles,isInterlacedMode:E,multiplierThemeResolver:N.shoe.resolveMultiplierTheme,scorecardThemesOverrides:r})})),XY="gridCreator--b3937",rY="roadGrid--aaa62",yY="fitToContainer--0c0cd";function vY(x){switch(x){case H.RoadType.Big:return H.RoadType.Big;case H.RoadType.BigEye:return H.RoadType.BigEye;case H.RoadType.Small:return H.RoadType.Small;case H.RoadType.Cockroach:return H.RoadType.Cockroach;default:Xo.xb(x)}}function BY({id:x,onMouseEnter:o,onMouseLeave:c,onClick:L,x:T,y:h=0,width:A,height:E,hidden:H,roadType:N,layout:Q}){const I=Q.roads[N];return Th.jsx("svg",{onMouseEnter:o,onMouseLeave:c,onClick:L,id:x,x:T,y:h,width:A,height:E,"data-role":`${N}-road`,style:H?{opacity:0}:void 0,children:Th.jsx(_Y,{type:vY(N),columnCount:I.width,rowCount:I.height,isInterlacedMode:I.interlaced,defaultIconId:N})})}const YY=[H.RoadType.Big,H.RoadType.BigEye,H.RoadType.Small,H.RoadType.Cockroach],FY=hh.PA((({roadContainerLayout:x,zoomRoadOverflow:o,beadRight:c,beadColumns:L,isVerticalBead:T,wrapperPadding:h,spaceBetweenBlocks:A})=>{const E=dh.P(),N=E.device.isDesktop,Q=E.layout.isDesktopImmersive,I=E.layout.isBaccaratV4RoadsMobile,k=E.layout.isBaccaratV4Roads,_=E.layout.framesAroundRoadsStyles,X=!!_,r=k&&Q?((null==_?void 0:_.strokeWidth)||0)/2:0,y=I?h:.3,v=Ah.useCallback((x=>{E.shoe.setZoomedRoad(x)}),[E.shoe]),B=Ah.useCallback(((x,o)=>{N&&E.tooltip.showRoadGridTooltip(x,o)}),[N,E.tooltip]),Y=Ah.useCallback((()=>{N&&E.tooltip.hideRoadGridTooltip()}),[N,E.tooltip]),{roads:F,container:t}=x,m=2*h,C=t.height+m,V=C*F[H.RoadType.Bead].width/t.width,i=T?F[H.RoadType.Bead].height+V+A:C,M=0!==F[H.RoadType.Bead].width&&0!==F[H.RoadType.Bead].height,Z=T||k?t.width:t.width+m,S=F[H.RoadType.Bead].width+m,u=T?F[H.RoadType.Bead].width:Z+S+A,d=Ah.useCallback((x=>{E.reference.roads.set(Zo.Bead,x)}),[E.reference.roads]),O=Ah.useCallback((x=>{E.reference.roads.set(Zo.Four,x)}),[E.reference.roads]);return Th.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${u} ${i}`,className:XY,children:[h&&!k?T?Th.jsx(CY,{width:u,height:i,radius:h}):Th.jsxs(Th.Fragment,{children:[Th.jsx(CY,{x:c?0:S+A,width:Z,height:i,radius:h}),Th.jsx(CY,{x:c?Z+A:0,width:S,height:i,radius:h})]}):null,M&&Th.jsx("svg",{x:c?Z+A+h:h,y:h,width:T?F[H.RoadType.Bead].width-m:F[H.RoadType.Bead].width,height:F[H.RoadType.Bead].height,clipPath:X?"url(#roundedBeadRoadFrame)":void 0,ref:d,children:Th.jsx(kY,{columnsCount:L})}),Th.jsx("svg",{x:T||c?h:S+A+h,y:T?F[H.RoadType.Bead].height+A:0,width:T?u-m:t.width,height:T?V:void 0,clipPath:X?"url(#roundedRoadGridFrame)":void 0,ref:O,children:Th.jsx(bB,{roads:YY,roadsData:E.shoe.roads,zoomRoadOverflow:o,onFocusedRoadChange:v,gridLayout:x,showTooltip:B,hideTooltip:Y,framesAroundRoadsStyles:_,RoadContainer:BY})}),X&&Th.jsxs(Th.Fragment,{children:[Th.jsxs("defs",{children:[Th.jsx("clipPath",{id:"roundedRoadGridFrame",children:Th.jsx(CY,{x:r,y:r||h,width:r?t.width-2*r:t.width,height:r?t.height-2*r:t.height,radius:y})}),M&&Th.jsx("clipPath",{id:"roundedBeadRoadFrame",children:Th.jsx(CY,{x:0,y:0,width:F[H.RoadType.Bead].width,height:F[H.RoadType.Bead].height,radius:h})})]}),Th.jsx(CY,{x:r||h,y:r||h,width:r?t.width-2*r:t.width,height:r?t.height-2*r:t.height,radius:y,fill:"none",stroke:null==_?void 0:_.stroke,strokeWidth:String(null==_?void 0:_.strokeWidth)}),M&&Th.jsx(CY,{x:Z+A+h,y:h,width:F[H.RoadType.Bead].width,height:F[H.RoadType.Bead].height,radius:h,fill:"none",stroke:null==_?void 0:_.stroke,strokeWidth:String(null==_?void 0:_.strokeWidth)})]})]})})),tY=Ah.memo(FY,uc.A),mY=hh.PA((({roadsHeight:x,roadsWidth:o,isFeeGame:c=!1})=>{const L=dh.P(),T=Ah.useRef(null),[h,A]=Ah.useState(void 0),E=L.layout.beadRoadDisplayMode,N=L.layout.roadsDisplayMode,{columnCount:Q,rowCount:I}=eB(E),k=L.shoe.history.length,_=L.preferences.scorecardTheme,X=L.device.isDesktop,r=L.preferences.isWhiteScorecardTheme,y=N===mx.FourLinesDesktopClassic,v=L.layout.isBaccaratV4RoadsMobile,B=r&&(!X||y),Y=B||y,F=_===H.ScorecardThemeNames.BlackDot?.5:0,t=v?.3:B?y?.7:.2:0,m=v?.3:Y?N===mx.FourLinesDesktopClassic?c?.5:1.3:.2:0,C=2*t,V=Ah.useRef(Q);Ah.useEffect((()=>{const[L,h]=(k={width:v?0:o,height:x},_=T.current,[k.width||(_?_.clientWidth:0),k.height||(_?_.clientHeight:0)]);var k,_;if(h&&L){if(E===tx.PhonePortraitLive||N===mx.TwoLinesPortrait){const x=h/(6+.6666666666666666*C);V.current=Math.ceil(L/1.95/x)}else if([tx.PhoneLandscapeLive,tx.TabletLive].includes(E)||E===tx.DesktopClassic&&c){const x=h/(6+.6666666666666666*C),o=.2*L;V.current=Math.ceil(o/x)}else V.current=Q;if(N===mx.SixLinesPhoneV2||N===mx.TwoLinesPortrait||N===mx.FourLinesDesktopClassic&&c)A(DB({containerWidth:L,containerHeight:h,beadColumns:V.current,beadRows:I,directionRow:!0,containerPadding:C,spaceBetweenBigDerivatives:F}));else if(N===mx.FourLinesDesktopClassic){const x=.43*h/6;V.current=Math.ceil(L/x),A(DB({containerWidth:L,containerHeight:h,beadColumns:V.current,containerPadding:C,beadRows:I,directionRow:!1,spaceBetweenBlocks:m,spaceBetweenBigDerivatives:F}))}else N===mx.ThreeLines?A(function(x,o){const c=2*Math.ceil(x/o*12/2),L=c/2;return{container:{width:c,height:12},roads:{[H.RoadType.Big]:{x:0,y:0,width:c,height:6,interlaced:!1},[H.RoadType.BigEye]:{x:0,y:6,width:c,height:3,interlaced:!0},[H.RoadType.Small]:{x:0,y:9,width:L,height:3,interlaced:!0},[H.RoadType.Cockroach]:{x:L,y:9,width:L,height:3,interlaced:!0},[H.RoadType.Bead]:{x:0,y:0,width:0,height:0,interlaced:!0}}}}(L,h)):A(X?UB({containerWidth:L,containerHeight:h,spaceBetweenBigDerivatives:F},Math.round):sB({containerWidth:L,containerHeight:h,spaceBetweenBigDerivatives:F}))}}),[Q,I,k,E,N,C,c,X,m,r,x,o,F,L.ag.values.gameDimensions,v]);const i=N===mx.FourLinesDesktopClassic&&X&&!c;return Th.jsx("div",{ref:T,className:Hh.A(rY,{[yY]:v}),children:h&&Th.jsx(tY,{roadContainerLayout:h,zoomRoadOverflow:!r,beadRight:N===mx.TwoLinesPortrait&&!i,beadColumns:V.current,isVerticalBead:i,wrapperPadding:t,spaceBetweenBlocks:m})})})),CY=({x=0,y:o=0,width:c,height:L,radius:T,fill:h="#fff",stroke:A="none",strokeWidth:E="none"})=>Th.jsx("rect",{width:c,height:L,rx:T,fill:h,x,y:o,stroke:A,strokeWidth:E,style:{pointerEvents:"none"}}),VY=hh.PA((({roadsHeight:x,roadsWidth:o,isFeeGame:c})=>{const L=dh.P();return Th.jsx(uB,{whiteBackground:L.preferences.isWhiteScorecardTheme,position:ZB.Right,children:Th.jsx(mY,{roadsHeight:x,roadsWidth:o,isFeeGame:c})})}));var iY=c(261504),MY=c(71665),ZY=c(710928);const SY=hh.PA((()=>{const x=dh.P(),o=MY.mW(x.shoe.stats,x.shoe.beadRoadMode,x.device.isDesktop,!0);return Th.jsx(iY.u,{statistics:o,fontScale:x.settings.isBaccaratV4&&x.device.isPortrait?x.layout.portrait.gridScale:void 0,showTooltips:x.device.isDesktop,roadPredictionTheme:iY.H.FaceLiftBright,isPhone:x.device.isPhone,isTablet:x.device.isTablet,isDesktop:x.device.isDesktop,isLandscape:x.device.isLandscape,isDarkFont:x.layout.isBaccaratV4RoadsMobile&&x.preferences.isWhiteScorecardTheme,isBaccaratV4Mode:x.layout.isBaccaratV4RoadsMobile,tooltipPositionVertical:x.layout.isDesktopClassic?ZY.Ne.Bottom:ZY.Ne.Top})})),uY="goldenLine--e70dd",dY="withSpacing--5aa12",OY=({withSpacing:x})=>Th.jsx("div",{className:Hh.A(uY,{[dY]:x})}),jY=[H.RoadType.Cockroach,H.RoadType.Small,H.RoadType.BigEye,H.RoadType.Big,H.RoadType.Bead],eY=[H.RoadType.Cockroach,H.RoadType.Small,H.RoadType.BigEye],qY={delay:.6,duration:.3},fY={duration:400,originalScale:1.15,landPercentage:100,roadDelay:150},UY={header:qY,winnerBall:qY,winnerBallFly:{delay:qY.delay+qY.duration,flyDuration:.3,landScale:.76,disappearDuration:.8},flyingRoads:fY,pulseRoad:{scaleOutDelay:fY.duration/1e3+.3,scaleInDelay:fY.duration/1e3,duration:.1,syncCoefficient:1.5}},sY="flyingRoadItem--1613c",DY=UY.pulseRoad,$Y=hh.PA((({value:x})=>{const{reference:o,ag:c,shoe:L,layout:{roadsPredictionsContainerBackground:T},preferences:h,gameResult:A}=dh.P(),{zoomedRoad:E}=L,{winner:N}=A;let Q=E?[E,H.RoadType.Bead]:jY;if(N===s.K8.Tie&&(Q=Q.filter((x=>!eY.includes(x)))),!Q.includes(x))return null;const I=lo(o.winRoads.get(x),c.values.gameDimensions.reverseScale),k=L.roads[x],_=x===H.RoadType.Bead,X=_?L.history[L.history.length-1]:k[k.length-1];if(!X)return null;const r=_?H.WinnerTypeBaccarat[X.winner]:H.getWinnerTypeBaccarat(X.color),y=X.ties||0,v={roadType:x,winnerType:r,additionalType:H.getAdditionalTypeBaccarat(X.bankerPair,X.playerPair,y),isLive:!0,theme:h.scorecardTheme,symbol:_?HY.wy(L.beadRoadMode,X):y>1||r===H.WinnerTypeBaccarat.Tie?X.ties:void 0},B=jY.indexOf(x),Y=DY.scaleOutDelay+DY.duration*DY.syncCoefficient*B,F={width:`${I.width}px`,height:`${I.height}px`,"--scale-out-delay":`${Y}s`,"--scale-in-delay":`${DY.scaleInDelay}s`,"--duration":`${DY.duration}s`,"--background":y>0?T:"transparent"};return Th.jsx("div",{style:F,className:sY,children:Th.jsx(H.RoadItemBaccarat,{...v})})})),aY=UY.flyingRoads,zY=x=>x,lY=hh.PA((()=>{const{flyingWin:x,reference:o,device:c}=dh.P(),L=Ah.useCallback((x=>[io.WinnerBallTo,io.FlyingRoadsBodyContainer].includes(x)?o.winAnimation.get(x):Object.values(H.RoadType).includes(x)?o.winRoads.get(x):void 0),[o.winAnimation,o.winRoads]),T=Ah.useCallback(((x,c)=>{o.winAnimation.set(io.FlyingRoadsBodyContainer,c)}),[o.winAnimation]);return Th.jsx(EY,{autoDetectScale:!0,defaultBodyValue:"0",scale:aY.originalScale,isAnimationEnabled:x.animationEnabled,bodies:x.bodies,animationDuration:aY.duration,animationLandPercentage:aY.landPercentage,isDesktop:c.isDesktop,Component:$Y,releaseBodies:x.removeBodies,scaleFunction:zY,registerBodyContainerRef:T,flyingBodiesContainerKey:io.FlyingRoadsBodyContainer,getBodyRef:L,skipVisibilityCheck:!0,bodiesKey:"flying-win-roads"})}));var GY=c(25581),pY=c(118812);const PY=hh.PA((({tooltip:x,tooltipPositionVertical:o,tooltipPositionHorizontal:c,winnerType:L})=>{const T=dh.P(),h=MY.Ot(T.shoe.beadRoadMode,L)||L.charAt(0),A=Ah.useCallback((x=>{if(!T.flyingWin.isWinnerBallFlying)if(x){if(T.flyingProbes.isAvailable){T.prediction.resetPrediction();const o=setTimeout((()=>{T.prediction.setPrediction(x),T.flyingProbes.flyFromPredictionButton(x),clearTimeout(o)}),0)}else T.prediction.setPrediction(x);T.log.clientPrediction(x)}else T.prediction.resetPrediction()}),[T.flyingProbes,T.log,T.prediction]);return Th.jsx(pY.P,{winnerType:L,registerRef:T.flyingProbes.isAvailable?T.reference.prediction.set:void 0,probe:T.shoe.roads.probes[L],withTooltip:!!x,tooltip:x,tooltipPositionVertical:o,tooltipPositionHorizontal:c,isDesktop:T.device.isDesktop,isShortConvex:T.settings.isBaccaratV4,isTablet:T.device.isTablet,scorecardTheme:T.preferences.scorecardTheme,mapColorToWinnerType:H.getWinnerTypeBaccarat,RoadItem:H.RoadItemBaccarat,symbol:h,roadPredictionTheme:iY.H.FaceLiftBright,probesWinner:T.prediction.winner,ignoreButtonSpacing:T.settings.isRng,wideButton:T.settings.isRng,setProbesWinner:A,onInteraction:T.sounds.playClickButtonSound})})),KY="roadsContainer--67673",JY="isDesktop--83af4",nY="fitToContainer--effc5",bY="statisticsContainer--d6f82",WY="isTablet--b8230",wY="statistics--2b5d9",gY="brightTheme--c2aa0",RY="predictions--c3611",xF="faceLiftBright--09348",oF="fourRoads--4b982",cF="isPortrait--9df54",LF="isLandscapePhone--7b93d",TF="reducedHeight--86cb1",hF="smallDevices--716f3",AF="isPortraitWidePhone--d8ba9",EF="roadsPredictionsContainer--0dbff",HF="isCollapsed--3da4e",NF="isLandscape--78ca2",QF="isPhone--72c48",IF="classicLayout--c2710",kF="predictionContainerSpacing--86210",_F="baccaratV4Desktop--a1a67",XF="baccaratV4Mode--ffabd",rF="prediction--53c61",yF="withScroll--d9099",vF="scrollContent--6aa96",BF="leftShadow--bd11d",YF="rightShadow--dc0c8",FF="innerShadow--d6dc8";var tF,mF;!function(x){x.LeftRight="LeftRight",x.Left="Left",x.Right="Right"}(tF||(tF={})),function(x){x.Left="Left",x.Right="Right"}(mF||(mF={}));const CF=({deviceRatio:x,FourRoadsContainer:o=VY,GameStatisticsContainer:c,hasPredictionContainerSpacing:L,isClassicLayout:T,isCollapsed:h,isBaccaratV4Roads:A=!1,containerBackground:E,containerBorder:H,isDesktop:N,isPhone:Q,isPortrait:I,isReducedHeight:k,isScrollable:_,isSmallDevice:X,isTablet:r,predictionContainers:y,roadPredictionTheme:v,roadsHeight:B,getRoadsRef:Y,statisticsContainerHeight:F,shadowColor:t="#281718",useInnerDimensions:m=!0,registerWinnerBallRef:C=jv.A})=>{const V=Ah.useRef(null),[i,M]=Ah.useState(0),[Z,S]=Ah.useState(null),[u,d]=Ah.useState(null),O=Ah.useRef(0),j=Ah.useRef(null),e=Ah.useRef(0),q=A&&!N&&!I,f=rE.v(C,io.WinnerBallTo);Ah.useLayoutEffect((()=>{V.current&&M(m?0:V.current.clientWidth)}),[B,m]);const U=Ah.useCallback((()=>{var x;if(null===Z||null===V)return;let o=null;Z.scrollLeft>0&&(o=tF.Left);const c=Z.scrollLeft+Z.getBoundingClientRect().width,L=Math.ceil(c);(L<Z.scrollWidth||L<Number(null===(x=V.current)||void 0===x?void 0:x.clientWidth))&&(o=o?tF.LeftRight:tF.Right),d(o)}),[Z,d]),s=Ah.useCallback((()=>{const c=q?"100%":A&&I?"auto":0===B?void 0:B;return Th.jsx("div",{ref:V,style:{height:c},className:Hh.A(oF,{[cF]:I,[AF]:I&&x>1.85,[LF]:!I&&!r&&!N,[WY]:r,[TF]:k,[hF]:X}),children:Th.jsx(o,{roadsHeight:B,roadsWidth:i})})}),[o,x,A,N,q,I,k,X,r,i,B]),D=Ah.useCallback((()=>{const x=j.current===mF.Right?Y(Zo.Bead):Y(Zo.Four);Z&&x&&null!==j.current&&(j.current===mF.Right?x.scrollIntoView({behavior:"smooth",block:"start",inline:"start"}):"function"==typeof Z.scrollTo&&Z.scrollTo({left:0,behavior:"smooth"}))}),[Y,Z]);Ah.useEffect((()=>{if(!Z)return;const x=()=>{clearTimeout(e.current)};return Z.addEventListener("pointerdown",x),Z.addEventListener("pointerup",D),()=>{Z.removeEventListener("pointerdown",x),Z.removeEventListener("pointerup",D)}}),[D,Z]);const $=Ah.useCallback((x=>{if(x.scrollLeft<0||O.current<0||x&&x.clientWidth&&x.clientWidth-x.scrollLeft<40)return;x.scrollLeft<O.current&&O.current-x.scrollLeft>2&&(j.current=mF.Left),x.scrollLeft>O.current&&x.scrollLeft-O.current>2&&(j.current=mF.Right);const o=x.scrollLeft!==O.current;O.current=x.scrollLeft,o&&(clearTimeout(e.current),e.current=setTimeout((()=>{D()}),600))}),[D]),a=Ah.useCallback((x=>{const o=Go.E2(x),c={background:`linear-gradient(90deg, rgb(${o}) 0%, rgba(${o},0) 100%)`},L={background:`linear-gradient(-90deg, rgb(${o}) 0%, rgba(${o},0) 100%)`};return Th.jsxs(Th.Fragment,{children:[Th.jsx(GY.y,{refCallback:S,onPositionChanged:U,onCustomScroll:$,className:Hh.A(yF,{[nY]:q}),children:Th.jsx("div",{ref:V,style:{height:q?"100%":void 0},className:Hh.A(vF,{[nY]:A&&Q}),children:s()})}),(u===tF.Left||u===tF.LeftRight)&&Th.jsx("div",{className:Hh.A(BF,{[FF]:A&&!N}),style:c}),(u===tF.Right||u===tF.LeftRight)&&Th.jsx("div",{className:Hh.A(YF,{[FF]:A&&!N}),style:L})]})}),[U,q,Q,s,u,A,$]),z=Ah.useMemo((()=>Th.jsx("div",{className:Hh.A(KY,{[nY]:q}),children:_?a(t):s()},"roads")),[q,_,s,a,t]),l=E?{background:E}:{};H&&(l.borderBottom=H,l.borderTop=H);const G=Ah.useMemo((()=>{const x=E&&I?{background:E}:{};return F&&(x.height=`${F}px`),Th.jsxs("div",{className:Hh.A(bY,{[WY]:r,[XF]:A&&!N}),style:x,children:[Th.jsx("div",{className:wY,children:Th.jsx(c,{})}),Th.jsx("div",{className:RY,children:y.map((x=>Th.jsx("div",{className:rF,children:Th.jsx(x,{tooltip:"tooltip.clickToSeeNextValue",tooltipPositionVertical:T?ZY.Ne.Bottom:ZY.Ne.Top})},Math.random())))})]},"statistics")}),[I,F,c,E,A,T,r,N,y]),p=Th.jsx(OY,{withSpacing:!0}),P=A?N?[G,p,z]:[z,G]:[G,z];return Th.jsxs("div",{ref:f,style:l,className:Hh.A(EF,{[JY]:N,[nY]:q,[QF]:Q,[WY]:r,[HF]:!!h,[NF]:!I,[gY]:v===iY.H.Bright,[xF]:v===iY.H.FaceLiftBright,[kF]:L,[_F]:A&&N,[IF]:T}),children:[...P,!N&&A&&Th.jsxs(Th.Fragment,{children:[Th.jsx(IY,{}),Th.jsx(lY,{})]})]})},VF=[function({tooltip:x,tooltipPositionVertical:o,tooltipPositionHorizontal:c}){const L=H.WinnerTypeBaccarat.Player;return Th.jsx(PY,{winnerType:L,tooltip:x,tooltipPositionVertical:o,tooltipPositionHorizontal:c})},function({tooltip:x,tooltipPositionVertical:o,tooltipPositionHorizontal:c}){const L=H.WinnerTypeBaccarat.Banker;return Th.jsx(PY,{winnerType:L,tooltip:x,tooltipPositionVertical:o,tooltipPositionHorizontal:c})}],iF=hh.PA((x=>{const o=dh.P();return Th.jsx(CF,{...x,registerWinnerBallRef:o.reference.winAnimation.set,deviceRatio:o.device.aspectRatio,GameStatisticsContainer:SY,hasPredictionContainerSpacing:o.device.isDesktop&&!o.layout.isDesktopClassic,isClassicLayout:o.layout.isDesktopClassic,statisticsContainerHeight:o.layout.statisticsContainerHeight,isCollapsed:!1,isBaccaratV4Roads:o.layout.isBaccaratV4Roads,containerBackground:o.layout.roadsPredictionsContainerBackground,containerBorder:o.layout.roadsPredictionsContainerBorder,isDesktop:o.device.isDesktop,isPhone:o.device.isPhone,isPortrait:o.device.isPortrait,isReducedHeight:!o.device.isDesktop,isScrollable:o.device.isPortrait||o.layout.isBaccaratV4RoadsMobile,isSmallDevice:o.device.isSmallDevice,isTablet:o.device.isTablet,roadPredictionTheme:iY.H.FaceLiftBright,roadsHeight:o.layout.availableRoadsHeight,useInnerDimensions:o.layout.useInnerDimensions,predictionContainers:VF,shadowColor:o.layout.isBaccaratV4RoadsMobile?o.layout.roadsPredictionsContainerBackground:o.layout.gameUnderlayColor,getRoadsRef:o.reference.roads.get})})),MF=x=>Th.jsx(VY,{...x,isFeeGame:!0}),ZF=()=>Th.jsx(iF,{FourRoadsContainer:MF,shadowColor:"#fff"}),SF="rightFooter--488b0",uF="roadsContainer--e5135",dF="topRightComponent--6d1bd";var OF=c(991548),jF=c(827424),eF=c(48415);function qF(x,o){let c;const L=.3*o,T=.7*o;return c=x<L?x/L:x<T?1:Math.max(1-(x-T)/L,0),c}var fF=c(680151),UF=c(328382);const sF="container--727e8",DF="maxSizeFull--3c948",$F="useMediaContainer--c1a8b",aF="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAASFBMVEW+mwAAAAChfAC8lgDDnwDFngDJowC1jADLpADIogDHoQDNpgDMpQDIogDKowDGoADLpQDMpQDLpADMpgDLpADLpQDMpgDNpwA8whaAAAAAGHRSTlMWAAYRHCA0DEctJG9PODAnWFI/XTpjYWWZkBniAAAA8ElEQVQoz53SV27DMBAE0PU29mYpzv1vGsqOiikhATx/xAMXIHfg9kd2RAMsAmTwhMhqrb33JE/4hghzs06YgaVoEnNAlBYdwxpJjjZEP1kPW4jYZbMiT1bgGALnzAsp1n5vUBVcEF3IMCKJmgWpNoGTQhbsKEHhjORzR9RQ4EJZTUf7JVcICjcwceJP8J+xmIK/Qk7Un1KCXqFX7AiPyFdT/YI4BwenyEzPj+epymicPD4RXbAyWFbzu0+TBmVdhi740up4o3KfAQ8FKzVE9cIs3t1tprdqIrn2/agtxmYV9mrunS5Zc2EaSr0Ge47nH/PICJioE/XSAAAAAElFTkSuQmCC",zF="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABDCAMAAADXusmpAAAAmVBMVEUAAAAuLgDJyR/u3T3t5UXw4D3h0S6qqiuAgAD254f26Gnr4Tjp3Tjl1zba1y/253ry5lvy5Uzw5knv5FDu4kT79dX36p/3547154H26Hv16HD152X052H89+D57a747Kn254v16HX052zz5lv05VHy5E+ZmQD8+en58b3366P37Kf255T27Kr255T05mvz51vy5Wn05lX///8KzdSXAAAAMnRSTlMAAgkdJiAQBgSjbBkWEw2HSzozLyrkv7OWj3lkX+3Jxq2CdFJDOAXy1MG5tq6KclROSOzvFrEAAAElSURBVFjD7dTXboNAEAXQu4WlFxtsU1zjkt74/4/Lgx9ASsAYJiKR9zztSqPVzmh0MQqfgxxj0LT+PhmosZnAr+MgZ73i74gsULNWEuRYhxJPgdokywVonYrVeoIeAtto/meaG33myDeyudT10UW8nIIY391nCgN5AnVWMXc4Bko3AeoCqTBUHDE04AbIfcxcUFNH1rhv5ORcgZoIObT/yJRTcV6yfA8iyW7hnMPDvgMNdngs7Rg9NSRsEj6/CfS0/rk1M5kYDD1Z0LQbZz5wVJ4SUJCocVl19lxQ8+ytgctOyqwufHlAG3cxlx1GF4X7anj+bMvRxpBduklLW1QJFcXfn/FxJV4sHIU2LxmuFUj/QoEJTRvZ0REgxsLyHdSmjsCIvgA08QtzF1artgAAAABJRU5ErkJggg==",lF="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAABTCAMAAACrvdnDAAAAz1BMVEUAAACMjARVVQDa1i3w4UEAAACqqivt3T28vCXj1Svv3z/z6F7z6FXz51Pv5Eng0Tr57a3z5k3x5Unu40fr4Tj26Iv154H153D26Gr06F7z5lry5WDs40D365325of253n153L16G315mf05lT05VTt4ULw5EXo3DrS0i359M/48Lr57rL255T16HT154b152Py5Evw5Fb8+uz8+OT79tz58cL58sL255L37bH26Hz26Hz366X154bn2zf79dX58sn47p705Xbz51Px43n///+3xuR8AAAARHRSTlMABAMNIQIGHAcSH1VLQS8QyT00LBitmnpvWlFOJ72ki351Z0ZEKiUWC+DSzLeDZ2I3M/Xv6djRr6aSkXt7FOTc0EU/N0kQ5+4AAAIASURBVGje7dVnj+IwEAbg13acTkIJvXdY4IBtt/Xq/v/fdFpOOkVREiAKwx6b51OkyGPZM57Bp2DZIPKli4tl9G3QKH2rMJDgozE+CG0CGrycN0CjOeA4LaYgJbzjII74ml6XKOGyFUFEPuBkxtiH/c1mEYCZE0jsN/ZQfLW3um3gSByJ1DtH5/H5Q1S2AirPLaRKSBBhs7Ncn8r9p30rBf4OkArhwl0NdP+Zgm9giiQagSHtdR9Nc97WkA72apqu3H3d1wLdKH+/UXNbjjiqJn3BPCNmbA7X9YInd4tYIIjdENinmc/hn8JT1UQEY9RtL6ubGQ5hluJ3Ugc3iwIiaPXl9W3HNnCI/o8hdnq+NukrGFmo9BRE8Kzy/K4ydBFUC1nSvLOwIwF4nZBcaFNEEcVa5XE9VhHkhqRIar5M6lscx3BGuZYABV0IhmReQEXiP8RA5cECEc5xRoyDBG/ZBQMnJaZ459Xy5RzDKb20d7emPF0vGjrCaBKpeFXwzrUqPQdh9BsbqTJaJkMYWZohk7lkKqOaVOUu0qEsW4jV/IV0TPIOMuRkbQMa6lUfRHSeShSnKECiWG4PJQ4lBBLLLb7XGQ6kVVcTJDWtrxVE4VUHfoWruY3EmBpXdRb8tH5PAQ2mI3NePxuINKqCiGPhImggMnszQCR7oxlC7haH+gMolhyEpPrLPgAAAABJRU5ErkJggg==",GF="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAABLCAMAAAD0x38HAAAAmVBMVEUAAAAAAABhYQDc1C7Cwh6qqiXy51jz51Hx5Ffp3Tv05l/y5Wju4kjk1jvMzBr16Zf153T152f15mb05lLv5Enw4Ubt3T78+uv79+D477f366H154T26Hr16HX15nj052Hz52Py5Vjv5V/s4kXv3z38+/P79df58sj58sf355H578D1537253j152/053T05m/y5k3s4IP///91k58SAAAAMnRSTlMAAgMOCAZOQTUWXEwqEgq5fmpmRS4hG/Ts0MCgjoRnYFQ6MCcf+ebb27WhlIp5YUc8KZAGwKkAAAEASURBVFjD7ZVHCsMwEEVHsiU77nFJ7723+x8uZJGAshBYn4QUv4XBSI8RjOaL3gND5Fp9JMxtZ9FpALX3nk3mcEYVhoguYnO/vDOuE4C/pT8mkYh9HNO3E1uIPamC4kPgSN5HXhKY27O46QG1011OJTgLNW4jJcygKHT9+/NJAGEzVP49tUaqHzj2VFvdPWjlyMkKTr+OTVocV7vaz5huxtproancv/S0vXUL0pD1JNAdFv1wayddSP/7N6rmnCxjmctO7DBTWwyXbeBeT9PhDAkDu1x0ILQC5Ko1bp9NQB/BIHkcS5a3g/wReCsLGVtBFa+hkEhjDvMMsKejkN7IFVI0CVRTnLcDAAAAAElFTkSuQmCC",pF="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAAA9CAMAAAA9KQ86AAAAnFBMVEUAAAA3NwCiohfv5EfKyiTp3jbi1DHy5E3u4kDd1C/t3jzU1Cy6uiL254Xz51v26H3052z06F7y5lj05lX05lDx417254n16ID15nH06HD051ft4kTw4Dr79t369M/58sn58cL58b758L3253f9/Pb59Mv577H57a337Kj354/36Z316HX36qb15mf052Hz53fy5lny5XGSkib///+mKr4eAAAAM3RSTlMAAgUvCRYRNyYOHAsHoFSTc1lOR0I0qJZ8eUoqIOvg3NfVzYr73svIubSmhXtmX1ZQTwSDlyIfAAABIklEQVRYw+3W126EMBAF0GtjMJ2lLm17ei///2952yATFpmMlCBx3iwX2XMlazBzMmhBpD4YoOJgQVE0H5OIfQxFHiWYJLeheLk6cdAwYwMLhdcYFkjwbB0kAnqY6zL0OM/Xm8qEHmMd/ZAvT4v70Ous8jGKJbtdgj5Lyu6lnqQ6n6HHLksbRJzfJmXpXyUNB9J2oes1wmJ2/BpUrAdoCm0Q4ccVqLAPaBI3FqjkDH/FkyamEVC8bSbm4RxT9eMP6ok5vttQcMwQM0El3pKdxSXD/+HRJXtX6fQ3Lb80LXT6m0B+b7RdTJfut+E5nOa2cDDE9HFZu6qa88AtHgcfJA6r0Yyc7kBgUL408iO46YMGC4OYg4Q4fUYWaGRlxkCEqFRfojILLn7a+80AAAAASUVORK5CYII=",PF=c.p+"images/star.529998ec.png",KF=[];let JF;const nF=2*Math.PI,bF=Math.PI/180;class WF extends Ah.Component{constructor(x){super(x),this.canvasScale=1,this.coins=[],this.particles=[],this.stars=[],this.width=0,this.height=0,this.coinSize=0,this.updateTime=0,this.coinCount=0,this.starCount=0,this.isComponentMounted=!1,this.animationFrameRequestId=0,this.updateSizeDependantValues=()=>{if(!this.canvas||!this.ctx)return this.handleMountingException();const{width:x,height:o}=this.canvas.getBoundingClientRect();this.width=x,this.canvas.width=x,this.height=o,this.canvas.height=o,this.canvasScale=Math.round(this.width/800*1e3)/1e3,this.coinSize=18*this.canvasScale,this.coinGradient=this.ctx.createLinearGradient(-this.coinSize,0,this.coinSize,0),this.coinGradient.addColorStop(.02,"#DE8A25"),this.coinGradient.addColorStop(.18,"#FED049"),this.coinGradient.addColorStop(.26,"#FBDA78"),this.coinGradient.addColorStop(.38,"#F8E8BF"),this.coinGradient.addColorStop(.4,"#F7E8B9"),this.coinGradient.addColorStop(.43,"#F7E8A9"),this.coinGradient.addColorStop(.47,"#F7E88F"),this.coinGradient.addColorStop(.48,"#F7E887"),this.coinGradient.addColorStop(.51,"#F7E581"),this.coinGradient.addColorStop(.55,"#F7DE71"),this.coinGradient.addColorStop(.6,"#F6D358"),this.coinGradient.addColorStop(.65,"#F5C239"),this.coinGradient.addColorStop(1,"#DA8022"),this.coinEdgeGradient=this.ctx.createLinearGradient(-this.coinSize,0,this.coinSize,0),this.coinEdgeGradient.addColorStop(0,"#794200"),this.coinEdgeGradient.addColorStop(.42,"#FFB40F"),this.coinEdgeGradient.addColorStop(.58,"#FFE2A3"),this.coinEdgeGradient.addColorStop(.73,"#FFB000"),this.coinEdgeGradient.addColorStop(1,"#936724")},this.renderFrame=()=>{const x=performance.now()/1e3;this.update(x-this.updateTime),this.updateTime=x,this.animationFrameRequestId=window.requestAnimationFrame(this.renderFrame)},this.drawMirrorImage=(x,o)=>{x.width<1||(o.save(),o.translate(800*this.canvasScale,0),o.scale(-1,1),o.drawImage(x,0,0),o.restore())},this.drawStars=(x,o)=>{for(let c=0;c<this.starCount;c++)o.save(),this.updateStar(x,this.stars[c]),o.restore()},this.drawCoins=(x,o)=>{for(let c=0;c<this.coinCount;c++)o.save(),this.updateCoin(x,this.coins[c]),o.restore()},this.drawParticles=(x,o)=>{for(const c of this.particles)o.save(),this.updateParticle(x,c),o.restore()},this.drawEllipse=(x,o)=>{if(!this.ctx)return this.handleMountingException();this.ctx.ellipse?this.ctx.ellipse(0,x*this.canvasScale,this.coinSize,o,0,0,nF):(this.ctx.save(),this.ctx.translate(0,x*this.canvasScale),this.ctx.scale(this.coinSize,o),this.ctx.arc(0,0,1,0,nF,!1),this.ctx.restore())},this.setCanvas=this.setCanvas.bind(this),this.coinCount=x.useLiteRenderMode?15:40,this.starCount=x.useLiteRenderMode?8:10}componentDidMount(){this.isComponentMounted=!0;const{displayStars:x,displayCoins:o}=this.props;if(!x)return null;if(this.updateTime=performance.now()/1e3,!this.canvas)return this.handleMountingException();const c=this.canvas.getContext("2d");if(!c)return fF.M("Canvas context is empty");this.ctx=c,JF||(JF=[aF,zF,lF,GF,pF,PF].map(((x,o)=>new Promise((c=>{const L=new Image;L.onload=()=>c(),L.onerror=()=>c(),L.src=x,KF[o]=L}))))),ev.w9(this.updateSizeDependantValues),this.updateSizeDependantValues();const L=400,T=200;if(o)for(let x=0;x<this.coinCount;x++){const o=T+(Math.random()>.5?1:-1)*Math.random()*400*.05,c=360*Math.random(),h=360*Math.random(),A=100*Math.random()+300,E=120*(.5*Math.random()+.5);let H,N,Q,I=800*Math.random()*.15;x%2?(I+=L+100,H=(800-I)/E,o<T?(Q=(90*Math.random()-90)*bF,N=o/E):(N=(400-o)/E,Q=90*Math.random()*bF)):(I=L-100-I,H=I/E,o<T?(N=o/E,Q=(180+90*Math.random())*bF):(N=(400-o)/E,Q=(90+90*Math.random())*bF));const k=Math.min(H,N),_=1200/k;this.coins.push({flipCount:0,lifeTime:0,x:I,y:o,flipDegrees:c,rotationOffset:h,distance:1200,movementAngle:Q,speedZ:_,speedXY:E,moveTime:k,flipSpeed:A})}for(let x=0;x<this.starCount;x++){const o=T+(Math.random()>.5?1:-1)*Math.random()*400*.15;let c=800*Math.random()*.2;x%2?c+=L+100:c=L-100-c;const h=360*Math.random(),A=x<this.starCount/2?.5*Math.random()+.5:1*Math.random()+1,E=x<this.starCount/2?0:2.5*Math.random()*.25,H=.3*Math.random()*2.5+1.75;this.stars.push({x:c,y:o,lifeTime:0,scale:A,rotation:h,delay:E,animationTime:H,img:KF[5]})}this.particles=[{x:280,y:188,lifeTime:0,animationTime:1.1,img:KF[0],scale:.6},{x:268,y:216,lifeTime:0,animationTime:1.2,img:KF[0],scale:.67},{x:800*.29,y:132,lifeTime:0,animationTime:1.3,img:KF[0],scale:1.35},{x:208,y:152,lifeTime:0,animationTime:1.2,img:KF[0],scale:.7},{x:196,y:176,lifeTime:0,animationTime:1.1,img:KF[0],scale:.7},{x:800*.28,y:200,lifeTime:0,animationTime:1.1,img:KF[0],scale:.7},{x:208,y:400*.55,lifeTime:0,animationTime:1.2,img:KF[0],scale:1},{x:168,y:132,lifeTime:0,animationTime:1.1,img:KF[0],scale:.7},{x:136,y:144,lifeTime:0,animationTime:1.2,img:KF[0],scale:.7},{x:144,y:204,lifeTime:0,animationTime:1.1,img:KF[0],scale:1},{x:120,y:120,lifeTime:0,animationTime:1.1,img:KF[4],scale:1.3},{x:152,y:182,lifeTime:0,animationTime:1.1,img:KF[3],scale:1.35},{x:164,y:164,lifeTime:0,animationTime:1.1,img:KF[2],scale:1.3},{x:208,y:400*.29,lifeTime:0,animationTime:1.1,img:KF[1],scale:1.3}],Promise.all(JF).then((()=>{this.isComponentMounted&&(this.animationFrameRequestId=window.requestAnimationFrame(this.renderFrame))}))}componentWillUnmount(){this.isComponentMounted=!1,window.cancelAnimationFrame(this.animationFrameRequestId),ev.Fu(this.updateSizeDependantValues)}render(){const{maxSizeFull:x,useMediaContainer:o,scale:c,displayStars:L}=this.props;if(!L)return null;const T=Hh.A(sF,{[DF]:x,[$F]:o}),h=c||WF.defaultProps.scale,A=800/UF.SG*h,E=400/UF.SG*h;return Th.jsx("canvas",{className:T,ref:this.setCanvas,"data-role":"coins-and-stars",style:{width:Lx.o1(A),height:Lx.o1(E)}})}setCanvas(x){x&&(this.canvas=x)}update(x){if(!this.canvas||!this.ctx)return this.handleMountingException();const{useLiteRenderMode:o,displayCoins:c,displayStars:L}=this.props;this.ctx.clearRect(0,0,this.width,this.height),L&&(this.drawParticles(x,this.ctx),o||this.drawMirrorImage(this.canvas,this.ctx),this.drawStars(x,this.ctx),c&&this.drawCoins(x,this.ctx),o&&this.drawMirrorImage(this.canvas,this.ctx))}updateCoin(x,o){if(o.lifeTime+=x,o.lifeTime>o.moveTime)return;o.flipDegrees+=Math.floor(o.flipSpeed*x),o.distance-=Math.floor(o.speedZ*x);const c=o.speedXY*x;o.x+=c*Math.cos(o.movementAngle),o.y+=c*Math.sin(o.movementAngle);const L=Math.min((1200-o.distance)/1200,1);if(!this.ctx||!this.coinEdgeGradient||!this.coinGradient)return this.handleMountingException();const{useLiteRenderMode:T}=this.props;if(!T){const x=function(x,o){const c=.7*o,L=.9*o;let T=1;if(x>c)if(x<L){const o=x-c;T=Math.max(1-o/(L-c),0)}else T=0;return T}(o.lifeTime,o.moveTime);if(0===x)return;x<1&&(this.ctx.globalAlpha=x)}const h=Math.floor(o.flipDegrees)%90?o.flipDegrees:o.flipDegrees+1;let A=Math.abs(Math.sin(h*bF))*this.coinSize;A=Math.round(1e3*A)/1e3,this.ctx.translate(this.canvasScale*o.x,this.canvasScale*o.y),this.ctx.rotate((o.rotationOffset+h)/2*bF),this.ctx.scale(this.canvasScale*L,this.canvasScale*L);const E=1-A/this.coinSize;if(this.ctx.beginPath(),this.ctx.fillStyle=T?"#FBDA78":this.coinEdgeGradient,!T){let x=-4;for(;x<=4;)this.drawEllipse(L*x*E*this.canvasScale,A),x+=.25}this.ctx.fill(),this.ctx.beginPath(),T||(this.ctx.fillStyle=this.coinGradient);const H=o.flipCount%2?1:-1;this.drawEllipse(4*L*E*H,A),this.ctx.fill(),o.flipCount=Math.max(Math.floor(h/90),o.flipCount)}updateParticle(x,o){o.lifeTime+=x;const c=qF(o.lifeTime,o.animationTime);if(!c)return;if(!this.ctx)return this.handleMountingException();const L=o.scale*o.img.width*this.canvasScale,T=o.scale*o.img.height*this.canvasScale;this.ctx.globalAlpha=c,this.ctx.translate(o.x*this.canvasScale,o.y*this.canvasScale),this.ctx.drawImage(o.img,0,0,L,T)}updateStar(x,o){if(o.delay>0)return void(o.delay-=x);o.lifeTime+=x,o.rotation+=150*x;const c=qF(o.lifeTime,o.animationTime);if(!c)return;if(!this.ctx)return this.handleMountingException();const L=o.scale*function(x,o){let c=1;const L=.2*o;return x<L&&(c=x/L),c}(o.lifeTime,o.animationTime),T=L*o.img.width*this.canvasScale,h=L*o.img.height*this.canvasScale,A=T/2,E=h/2;this.ctx.globalAlpha=c,this.ctx.translate(o.x*this.canvasScale-A,o.y*this.canvasScale-E),this.ctx.translate(A,E),this.ctx.rotate(o.rotation*bF),this.ctx.drawImage(o.img,-A,-E,T,h)}handleMountingException(){return fF.M("Trying to access context before it was mounted")}}WF.displayName="CoinsAndStars",WF.defaultProps={displayCoins:!0,displayStars:!0,maxSizeFull:!1,useMediaContainer:!1,scale:1,useLiteRenderMode:!1};const wF=c(494475).Oe((({state:x,ownProps:o})=>{var c,L;const T=WA.md(x),h=WA.uD(x),{isLargeScreen:A}=jF.Qo(eF.Q.size.value),E=!Oo.I()&&(A||h.IS_IOS||h.IS_ANDROID5_0_0_PLUS||!1);let H=null!==(c=o.displayStars)&&void 0!==c?c:E,N=null!==(L=o.displayCoins)&&void 0!==L?L:E;var Q;return void 0!==o.winType&&(H=E&&((Q=o.winType)===Cx.R.Medium||Q===Cx.R.Big),N=E&&function(x){return x===Cx.R.Big}(o.winType)),{displayStars:H,displayCoins:N,useLiteRenderMode:T!==yx.OD.Desktop}}),(()=>[eF.Q.size]))(WF);var gF;!function(x){x.Winner="game-result-winner",x.Message="winning-message",x.Text="winning-message-text",x.Amount="winning-message-amount"}(gF||(gF={}));const RF=(xt=({winType:x,scale:o})=>Th.jsx(wF,{winType:x,scale:o}),ot={Phone:.5},hh.PA((x=>{var o;const c=T.Pj(),L=null!==(o=ot[c.ag.platform])&&void 0!==o?o:1;return Th.jsx(xt,{...x,scale:L})})));var xt,ot,ct;!function(x){x.DarkSemicircle="darkSemicircle",x.Big="big"}(ct||(ct={}));var Lt=c(148999);function Tt(x=[]){return x.map((x=>Th.jsx(x,{},Lt.MZ())))}function ht(x,o){const[c,L,T]=Array.isArray(x)?x:[x,x,x];return{"--gradientColor0":`rgba(${c}, 0)`,"--gradientColor1":`rgba(${L}, ${o})`,"--gradientColor2":`rgba(${T}, 0)`}}function At(x,o,c,L){const T=c?Math.floor(o):o;return xL.ej(T,{currencySymbol:x,maximumDecimalCount:L})}const Et="appearing--1f7c1",Ht=({amount:x,isAnimated:o,currency:c,currencyDecimals:L,onCounterAnimationStart:T,onCounterAnimationEnd:h,scale:A})=>{const[E,H]=Ah.useState(!0);function N(){H(!1)}return o?Th.jsx(Iy,{duration:1540,value:x,disabled:E,onStart:T,onFinish:h,forceFromInitialValue:!0,skipSetTargetValueWhenDisabled:!0,children:o=>Th.jsx("div",{className:Et,onAnimationEnd:N,style:{"--scale":A},children:At(c,E?0:o,x!==o,L)})}):Th.jsx(Th.Fragment,{children:At(c,x,!1,L)})},Nt=hh.PA((x=>{const o=T.Pj(),c=Ah.useMemo((()=>o.device.isDesktop?x.scales.isDesktop:o.device.isTablet?x.scales.isTablet:o.device.isLandscape?x.scales.phoneLandscape:x.scales.phonePortrait),[o.device.isDesktop,o.device.isTablet,o.device.isLandscape,x.scales]);return Th.jsx(Ht,{...x,currency:o.settings.currencySymbol,currencyDecimals:o.settings.currencyDecimals,scale:c})})),Qt="effects--28df4",It="isDesktop--a8e7d",kt="isTablet--5ae0b",_t="isMobile--d2fa5",Xt="isLandscape--02131",rt="gameResultElements--81495",yt="hasWin--ce559",vt="alignedTop--e592c",Bt="gameResultContainer--374ad",Yt="isLargeDevice--710cc",Ft="isPortrait--01bd0",tt="shiftBottom--027e5",mt="winner--6aa50",Ct="genericPhrase--d0b15",Vt="golden--8dfe8",it="message--f7a3d",Mt="noResultLabel--5f200",Zt="amount--47c0e",St="big--0a4b6",ut="multiplay--4bb1b",dt="bold--1a72c",Ot="winAnimationWrapper--313ed",jt={[ct.DarkSemicircle]:{themeGameResultElements:"themeGameResultElements--d90ac",messageBackground:"messageBackground--98a5a",themeMessage:"themeMessage--f3b49",winner:"winner--4ac67",genericPhrase:"genericPhrase--8bc03",amount:"amount--ea642",isDesktop:"isDesktop--0942a",isMobile:"isMobile--8e692",isTablet:"isTablet--0a9c8",isLandscape:"isLandscape--2d274",noResultLabel:"noResultLabel--bf155",scales:{isDesktop:4,phonePortrait:2.4,phoneLandscape:2.4,isTablet:2.4}}},et={isDesktop:2.5,phonePortrait:1,phoneLandscape:1,isTablet:1},qt=({amount:x,resultLabel:o,isPhone:c,isTablet:L,isPortrait:T,shiftBottomMobile:h,winType:A,isAmountBold:H,theme:N,isBig:Q=!1,isMultiplay:I=!1,isLargeDevice:k=!1,animation:_,backgroundColors:X,backgroundOpacity:r="0.9",setConsecutiveWinsCount:y,hideResultLabel:v,winAnimationStarted:B,resultCounterAnimated:Y=!1,alignedTop:F=!1,onCounterAnimationStart:t,onCounterAnimationEnd:m,WinAnimationComponent:C=RF,Overlays:V=[],Effects:i,WinAmountComponent:M=Nt})=>{var Z,S,u,d,O,j,e,q;const f=N?jt[N]:void 0,U=Ah.useMemo((()=>!!o&&!v),[o,v]),s=Ah.useMemo((()=>x>0),[x]);Ah.useEffect((()=>{B&&s&&A!==Cx.R.None&&B()}),[B,s,A]),Ah.useEffect((()=>{U&&s&&y&&y(A)}),[U,s,y,A]);const D=Ah.useMemo((()=>i&&_&&!v&&Th.jsx("div",{className:Qt,children:Th.jsx(i,{animation:_})})),[_,i,v]);if(!U&&!s)return null;const $=Hh.A(Bt,{[ut]:I,[St]:Q,[null!==(Z=null==f?void 0:f.isDesktop)&&void 0!==Z?Z:It]:!L&&!c,[null!==(S=null==f?void 0:f.isTablet)&&void 0!==S?S:kt]:L,[null!==(u=null==f?void 0:f.isMobile)&&void 0!==u?u:_t]:c,[null!==(d=null==f?void 0:f.isLandscape)&&void 0!==d?d:Xt]:!T,[null!==(O=null==f?void 0:f.noResultLabel)&&void 0!==O?O:Mt]:v,[Ft]:T,[yt]:s,[Mt]:v,[Yt]:k&&!Q,[tt]:h});return Th.jsxs(Th.Fragment,{children:[Th.jsxs("div",{className:$,children:[Th.jsxs("div",{className:Hh.A(rt,null==f?void 0:f.themeGameResultElements,{[vt]:F}),children:[U&&Th.jsx("div",{className:null!==(j=null==f?void 0:f.winner)&&void 0!==j?j:mt,style:ht(X,r),children:Th.jsx("span",{className:Hh.A(null!==(e=null==f?void 0:f.genericPhrase)&&void 0!==e?e:Ct,{[Vt]:!!_}),"data-role":gF.Winner,children:o})}),s&&Th.jsxs(Th.Fragment,{children:[(null==f?void 0:f.messageBackground)&&Th.jsx("div",{className:null==f?void 0:f.messageBackground}),Th.jsxs("div",{className:Hh.A(it,null==f?void 0:f.themeMessage),"data-role":gF.Message,children:[Th.jsx("div",{"data-role":gF.Text,children:A!==Cx.R.None?E.Tl("youWin"):""}),Th.jsx("div",{className:Hh.A(null!==(q=null==f?void 0:f.amount)&&void 0!==q?q:Zt,{[dt]:H}),"data-role":gF.Amount,children:Th.jsx(M,{amount:x,isAnimated:Y,onCounterAnimationStart:t,onCounterAnimationEnd:m,scales:(null==f?void 0:f.scales)||et})})]})]})]}),Tt(V),D]}),I?null:Th.jsx("div",{className:Hh.A(Ot,{[_t]:c,[Ft]:T,[Xt]:!T,[Yt]:k&&!Q,[St]:Q}),children:Th.jsx(C,{winType:A})})]})},ft=hh.PA((x=>{const o=T.Pj(),c=o.layout.hideYouWin?void 0:x.WinAnimationComponent,L=o.layout.hideYouWin?void 0:x.Overlays,h=o.layout.hideYouWin?void 0:x.Effects,A=o.layout.hideYouWin?Cx.R.Small:o.gameResult.winType;return Th.jsx(qt,{...x,Overlays:L,Effects:h,WinAnimationComponent:c,isLargeDevice:o.device.isLargeDevice,amount:o.gameResult.amount,winType:A,resultLabel:o.gameResult.resultLabel,isPhone:o.device.isPhone,isTablet:o.device.isTablet,isPortrait:o.device.isPortrait,hideResultLabel:o.layout.isDesktopClassic,backgroundColors:o.gameResult.color,setConsecutiveWinsCount:OF.Br})})),Ut="effect--110f4",st="mobile--fc57d",Dt="isPhone--f91c0",$t="isLandscape--bedf0",at=hh.PA((()=>{const x=lr(),o=x.gameResult.withEffect,c=x.device.isDesktop,L=x.device.isLandscape,T=x.device.isPhone,h=x.settings.isFrozenSprites,A=x.layout.gameResultLayer;return o&&A?Th.jsx("div",{className:Hh.A(Ut,{[st]:!c,[$t]:L,[Dt]:T}),children:Th.jsx(Vv,{id:A.layerId,layer:A,currentAnimation:AT.$e.Enabled,isFrozenSprites:h})}):null})),zt=hh.PA((()=>{const x=lr();return Th.jsx(ft,{resultCounterAnimated:x.gameResult.withEffect,onCounterAnimationStart:x.sounds.playWinCountUpLoopStart,onCounterAnimationEnd:x.sounds.playWinCountUpLoopEnd,Overlays:[at]})})),lt="mobileGameOverlay--20d72",Gt=()=>Th.jsx("div",{className:Hh.A(lt),children:Th.jsx(zt,{})}),pt="videoOverlayContainer--bfd57",Pt="gameOverlayContainer--db7e0",Kt="dealNowContainer--c7e3a";var Jt=c(414646);const nt="feeWrapper--1cfaa",bt="fee--850e1",Wt=({value:x,theme:o})=>{const c=dh.P();return Th.jsx("div",{className:nt,children:Th.jsx("div",{className:bt,children:Th.jsx(DA,{value:x,sign:c.settings.currencySymbol,theme:o})})})},wt=(x,o,c)=>hY(o,c)?.4:TY(o)?0:x-(x-.4)*o,gt=hh.PA((({FeeComponent:x=Wt})=>{const o=T.Pj(),c=Ah.useCallback((x=>Object.values(s.K8).includes(x)?o.reference.chip.get(x):o.reference.common.get(x)),[o.reference.chip,o.reference.common]);return Th.jsx(EY,{reverseScale:o.ag.values.gameDimensions.reverseScale,defaultBodyValue:"1",scale:1,isAnimationEnabled:!0,bodies:o.flyingFee.bodies,animationDuration:Jt.c,animationLandPercentage:95,isDesktop:o.device.isDesktop,Component:x,scaleFunction:wt,releaseBodies:o.flyingFee.removeBodies,registerBodyContainerRef:o.reference.common.set,getBodyRef:c,bodiesKey:"fee"})}));var Rt=c(236042),xm=c(722483),om=c(253613);const{chipLandPercentage:cm,fullAnimationDuration:Lm}=UL.w;function Tm({fromX:x,fromY:o,toX:c,toY:L,scale:T,prefix:h}){const A=`\n        0% {\n            ${hm(`translate(${x}px, ${o}px)`,`scale(${T})`)}\n        }\n        ${cm-3}% {\n            ${hm(`translate(${c}px, ${L}px)`,`scale(${T})`)}\n        }\n        ${cm}% {\n            ${hm(`translate(${c}px, ${L}px)`,`scale(${T+.1})`)}\n        }\n        100% {\n            ${hm(`translate(${c}px, ${L}px)`,`scale(${T})`)}\n        }\n    `;return function(x){const{animationName:o,keyframes:c,animationDuration:L,animationFunction:T="ease-in-out",animationDelay:h=0,animationIterations:A=1}=x;return[`@-webkit-keyframes ${o} {${c}}`,`@-moz-keyframes ${o} {${c}}`,`@-o-keyframes ${o} {${c}}`,`@keyframes ${o} {${c}}`,`.${o} {\n            -webkit-animation: ${o} ${L}ms ${T} ${h}ms ${A};\n            -moz-animation: ${o} ${L}ms ${T} ${h}ms ${A};\n            -o-animation: ${o} ${L}ms ${T} ${h}ms ${A};\n            animation: ${o} ${L}ms ${T} ${h}ms ${A};\n        }`].join("\n")}({animationName:Am(x,o,c,L,h),keyframes:A,animationDuration:Lm})}function hm(...x){return`transform: ${x.join(" ")}`}function Am(x,o,c,L,T){return`${T}-${x}-${o}-${c}-${L}`}const Em="container--75075",Hm="chipContainer--7219d",Nm="chipTransformWrapper--5204d";class Qm extends Ah.PureComponent{constructor(){super(...arguments),this.state={animation:null,animationClassName:"",chipValue:0},this.clientX=0,this.clientY=0,this.handleMove=Rt.A((x=>{const{movedFromBetSpotKey:o}=this.props;o&&("touchmove"===x.type&&x.preventDefault(),this.nextAnimationFrame&&window.cancelAnimationFrame(this.nextAnimationFrame),this.nextAnimationFrame=window.requestAnimationFrame((()=>{const{clientX:o,clientY:c}="touchmove"===x.type?x.touches[0]:x;this.updateChipPosition(o,c)})))}),15),this.setDraggableChipRef=x=>{this.draggableChipRef=x},this.setContainerRef=x=>{this.containerRef=x},this.updateChipPosition=(x,o)=>{const{getDragChipRef:c,reverseScale:L}=this.props,T=c(),h=this.draggableChipRef,A=this.containerRef,{scale:E}=this.props;if(T&&h&&A){const{top:c,left:T}=A.getBoundingClientRect(),{x:H,y:N}=h.getBoundingClientRect();if(H===x&&N===o)return;this.clientX=x,this.clientY=o,h.style.transform=`translate(${(this.clientX-T)/L}px,${(this.clientY-c)/L}px)\n                 scale(${E})`}},this.generateAnimation=()=>{const{scale:x,movedToBetSpotKey:o,undoFromBetSpotKey:c,getBetSpotChipRect:L,setDragChipRef:T,updateMovedFromBetSpotKey:h,reverseScale:A}=this.props,E=this.draggableChipRef;if(!E||!o||!this.containerRef)return;const H=c?L(c):E.getBoundingClientRect(),{top:N,left:Q}=this.containerRef.getBoundingClientRect(),I=c?this.calculateBetSpotChipRectCenter(H):{x:Math.round(H.left),y:Math.round(H.top)},k=L(o),_=this.calculateBetSpotChipRectCenter(k),X=`DraggableChip-${Date.now()}`,r=Math.round((I.x-Q)/A),y=Math.round((I.y-N)/A),v=Math.round((_.x-Q)/A),B=Math.round((_.y-N)/A),Y=Am(r,y,v,B,X);this.setState({animation:Th.jsx("style",{children:Tm({fromX:r,fromY:y,toX:v,toY:B,scale:x,prefix:X})},Y),animationClassName:Y},(()=>{E.style.transform="scale(0.05)",Oo.I()&&(E.style.animation="none")})),T(void 0),h(),E.style.transform="",this.clientX=0,this.clientY=0},this.handleTouchEnd=x=>{const{getDragChipRef:o}=this.props,c=o(),L=this.draggableChipRef,{movedFromBetSpotKey:T,updateMovedFromBetSpotKey:h}=this.props;L&&T&&!c&&h(),L&&c&&T&&(x.preventDefault(),x.stopPropagation(),this.returnBackChip(T))},this.returnBackChip=x=>{const{move:o,updateMovedFromBetSpotKey:c,reverseScale:L,setDragAllowed:T}=this.props,A=this.betSpotAtLocation(this.clientX,this.clientY,x)||h.iG;this.nextAnimationFrame&&window.cancelAnimationFrame(this.nextAnimationFrame),this.finishAnimationFrame&&window.cancelAnimationFrame(this.finishAnimationFrame),this.finishAnimationFrame=window.requestAnimationFrame((()=>{const{top:h,left:E}=lo(this.containerRef);xm.flushSync((()=>{o(x,A,{x:(this.clientX-E)/L,y:(this.clientY-h)/L})})),xm.flushSync((()=>{c()})),null==T||T(!0)}))},this.betSpotAtLocation=(x,o,c)=>{const{getBetSpotRefs:L}=this.props,T=document.elementFromPoint(x,o),h=L(),A=Object.keys(h);let E;if(!T)return;const H=T.closest("[data-betspot-destination]");if(!H)return T.closest('[data-role="betting-grid-container"]')?c:void 0;const N=A.filter((x=>h[x]===H));return N.length&&(E=N[0]),E}}static getDerivedStateFromProps(x,o){return{...o,chipValue:x.chipValue||o.chipValue}}componentDidMount(){document.addEventListener("mousemove",this.handleMove,!1),document.addEventListener("touchmove",this.handleMove,{passive:!1,capture:!1}),document.addEventListener("touchend",this.handleTouchEnd,!0),document.addEventListener("mouseup",this.handleTouchEnd,!0)}componentWillUnmount(){document.removeEventListener("mousemove",this.handleMove,!1),document.removeEventListener("touchmove",this.handleMove,!1),this.handleMove.cancel(),document.removeEventListener("touchend",this.handleTouchEnd,!0),document.removeEventListener("mouseup",this.handleTouchEnd,!0),this.finishAnimationFrame&&window.cancelAnimationFrame(this.finishAnimationFrame),this.nextAnimationFrame&&window.cancelAnimationFrame(this.nextAnimationFrame)}componentDidUpdate(x){const{isDragAllowed:o,movedToBetSpotKey:c,movedFromBetSpotKey:L}=this.props;c!==x.movedToBetSpotKey&&this.generateAnimation(),o!==x.isDragAllowed&&!1===o&&L&&this.returnBackChip(L)}render(){this.initialRender();const{chipComponent:x,chipSize:o}=this.props,{animation:c,animationClassName:L,chipValue:T}=this.state,h=o?{width:o.size,height:o.size,fontSize:o.fontSize||void 0}:{};return Th.jsxs("div",{className:Hh.A(Em),ref:this.setContainerRef,children:[c,Th.jsx("div",{ref:this.setDraggableChipRef,className:Hh.A(Hm,L),style:h,children:Th.jsx("div",{className:Nm,children:x?Th.jsx(x,{value:T,hasShadow:!1}):Th.jsx(om.w,{value:T,hasShadow:!1})})})]})}initialRender(){const{movedFromBetSpotKey:x,getDragChipRef:o}=this.props;if(!x)return;const c=o();if(c&&!this.clientY&&!this.clientX){const x=c.getBoundingClientRect();this.updateChipPosition(x.left+x.width/2,x.top+x.height/2)}}calculateBetSpotChipRectCenter(x){return{x:Math.round(x.left+x.width/2),y:Math.round(x.top+x.height/2)}}}var Im=c(94767);const km=hh.PA((()=>{var x;const o=dh.P(),c=o.draggableChip.undoFrom?o.draggableChip.to:o.draggableChip.from,L=null!==(x=o.ag.values.gameDimensions.reverseScale)&&void 0!==x?x:1,T=o.bets.getBetSpotValue(c),A=Ah.useCallback((()=>o.reference.betSpot.all),[o.reference.betSpot]),E=Ah.useCallback((x=>lo(x===h.iG?Fo.CG():o.reference.chip.get(x))),[o.reference.chip]),[H,N]=Im.J(o.reference.common),{scale:Q,reverseScale:I}=o.layout.bettingGridScaleFactor;return Th.jsx(Qm,{reverseScale:L,chipValue:T,movedFromBetSpotKey:o.draggableChip.from,movedToBetSpotKey:o.draggableChip.to,isDragAllowed:o.gamePhase.isBetsOpen,move:o.betProcessor.move,updateMovedFromBetSpotKey:o.draggableChip.updateFrom,getBetSpotRefs:A,undoFromBetSpotKey:o.draggableChip.undoFrom,scale:Q*I/L,getBetSpotChipRect:E,getDragChipRef:H,setDragChipRef:N})})),_m=hh.PA((()=>{const x=dh.P(),o=Ah.useCallback((o=>Object.values(s.K8).includes(o)?x.reference.chip.get(o):x.reference.common.get(o)),[x.reference.chip,x.reference.common]);return Th.jsx(EY,{reverseScale:x.ag.values.gameDimensions.reverseScale,Component:om.w,bodies:x.flyingChips.bodies,defaultBodyValue:x.ag.lastSelectedChip.toString(),isAnimationEnabled:x.flyingChips.animationEnabled,releaseBodies:x.flyingChips.removeBodies,animationDuration:UL.w.fullAnimationDuration,animationLandPercentage:UL.w.chipLandPercentage,pulseAnimationDuration:UL.w.targetPulseDuration,isDesktop:x.device.isDesktop,getBodyRef:o,registerBodyContainerRef:x.reference.common.set,bodiesKey:"chips"})})),Xm=()=>{const x=Lt.MZ(),o=`radialBlur-${x}`,c=`shineGradient-${x}`,L=`rayGradient-${x}`,T=`rayBlur-${x}`;return Th.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 82 82",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Th.jsx("g",{filter:`url(#${o})`,children:Th.jsx("ellipse",{cx:"41",cy:"41",rx:"25",ry:"25",fill:`url(#${c})`})}),Th.jsx("g",{filter:`url(#${T})`,children:Th.jsx("ellipse",{cx:"41",cy:"41",rx:"1.5",ry:"41",fill:`url(#${L})`})}),Th.jsx("g",{filter:`url(#${T})`,children:Th.jsx("ellipse",{cx:"41",cy:"41",rx:"1.5",ry:"41",transform:"rotate(70 41 41)",fill:`url(#${L})`})}),Th.jsx("g",{filter:`url(#${T})`,children:Th.jsx("ellipse",{cx:"41",cy:"41",rx:"1",ry:"22",transform:"rotate(123 41 41)",fill:`url(#${L})`})}),Th.jsxs("defs",{children:[Th.jsx("filter",{id:T,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:Th.jsx("feGaussianBlur",{stdDeviation:"1.2",result:"blurStar"})}),Th.jsx("filter",{id:o,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:Th.jsx("feGaussianBlur",{stdDeviation:"7",result:"blurStar"})}),Th.jsxs("radialGradient",{id:L,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",children:[Th.jsx("stop",{stopColor:"white"}),Th.jsx("stop",{offset:"1",stopColor:"white",stopOpacity:"0.5"})]}),Th.jsxs("radialGradient",{id:c,cx:"41",cy:"41",r:"35",gradientUnits:"userSpaceOnUse",children:[Th.jsx("stop",{stopColor:"white"}),Th.jsx("stop",{offset:"1",stopColor:"#FFF495",stopOpacity:"0.1"})]})]})]})},rm="winnerBall--cb850",ym="content--27f8b",vm="background--121b8",Bm="label--f162d",Ym="star--a0c0c",Fm=UY.winnerBall,tm={[s.K8.Player]:["#003CFF","#0021DE"],[s.K8.Tie]:["#06AB05","#02AF01"],[s.K8.Banker]:["#E10202","#BA0202"]},mm=({winner:x,symbol:o})=>{const c=tm[x],L={"--animation-duration":`${Fm.duration}s`,"--animation-delay":`${Fm.delay}s`,"--gradient-color-from":c[0],"--gradient-color-to":c[1]};return Th.jsxs("div",{className:rm,style:L,children:[Th.jsx("svg",{height:"100%",viewBox:"0 0 1 1",preserveAspectRatio:"xMidYMid meet",children:Th.jsx("rect",{width:"1",height:"1",fill:"none"})}),Th.jsxs("div",{className:ym,children:[Th.jsx("div",{className:vm}),Th.jsx("div",{className:Bm,"data-text":o,children:o}),Th.jsx("div",{className:Ym,children:Th.jsx(Xm,{})})]})]})};var Cm=c(315049),Vm=c(769413);function im(x){const o=/([+-]?\d*\.?\d+)(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(x);return o?[o[1],o[2]]:null}function Mm(x){const o=im(x);return o&&o[1]||""}function Zm(x,o){return x in o.style}const Sm=["perspective","translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY","scale","scaleX","scaleY","scaleZ"];function um(x){const o=x.includes("translate"),c=x.includes("perspective");if(o||c)return"px";const L=x.includes("rotate"),T=x.includes("rotate");return L||T?"deg":""}const dm=Symbol("CSSTween: Transform Cache");function Om(x){return new jm(x)}class jm extends Vm.v{constructor(x){super({}),this.initialValues=x,this.tweeningProperties={transform:{},style:{},properties:{}},this.node=null,this.applyStyles=()=>{if(!this.node)return;const x=Object.entries(this.tweeningProperties.style);for(const[o,c]of x){const{cssName:x,unit:L}=c;this.node.style[x]=`${this.target[o]}${L}`}const o=Object.entries(this.tweeningProperties.properties);for(const[x,c]of o){const{unit:o}=c,L=x;this.node.style.setProperty(x,`${this.target[L]}${o}`)}const c=Object.entries(this.tweeningProperties.transform),L=this.node[dm];for(const[x,o]of c){const{cssName:c,unit:T}=o,h=x;L[h]=`${c}(${this.target[h]}${T})`}this.node.style.transform=function(x){const o=[];for(const c of Sm){const L=x[c];L&&o.push(L)}return o.join(" ")}(L)},this.setDefaultValues()}applyToNode(x){if(!x)return this;const o=x;return o[dm]||(o[dm]={}),this.tweeningProperties=this.getTweeiningMap(x),this.node=o,this.applyStyles(),this}onTargetUpdated(){super.onTargetUpdated(),this.applyStyles()}setDefaultValues(){var x;const o=Object.keys(this.initialValues);for(const c of o){const o=this.initialValues[c];if("number"==typeof o)this.target[c]=o;else{const L=im(o);this.target[c]=null!==(x=L&&Number.parseFloat(L[0]))&&void 0!==x?x:o}}}getTweeiningMap(x){const o={transform:{},style:{},properties:{}},c=Object.entries(this.initialValues),L=getComputedStyle(x);for(const[h,A]of c)if(void 0!==A)if(T=h,Sm.includes(T)){const{unit:x}=this.extractTransformUnitAndValue(h,A);o.transform[h]={cssName:h,unit:x,name:h}}else if(Zm(h,x)){const c=h.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),T=this.extractStyleUnitAndValue(c,A,x,L);if(null===T)continue;o.style[h]={cssName:c,unit:T.unit,name:h}}else if(h.startsWith("--")){const x=im(String(A));if(!x)continue;o.properties[h]={cssName:h,unit:x[1]||"",name:h}}var T;return o}extractStyleUnitAndValue(x,o,c,L){const T=function(x,o,c){return(x.style[c]?x.style[c]:o.getPropertyValue(c))||"0"}(c,L,x);if("number"==typeof o)return{value:o,unit:Mm(T)};const h=im(o);return h?{value:Number.parseFloat(h[0]),unit:h[1]}:null}extractTransformUnitAndValue(x,o){if("number"==typeof o)return{value:o,unit:um(x)};const c=im(o);return c?{value:Number.parseFloat(c[0]),unit:c[1]}:{value:0,unit:um(x)}}}var em=c(234341);function qm(x,o){return{x:x.x+x.width/2-o.width/2,y:x.y+x.height/2-o.height/2}}function fm(x,o,c){const L=x[x.length-1];if(L){o(L);const T=setTimeout((()=>{fm(x.slice(0,-1),o,c),clearTimeout(T)}),c)}}const Um="winnerBall--ad5b6",sm=UY.flyingRoads,Dm=hh.PA((()=>{const{flyingWin:x,ag:o,reference:c,gameResult:L,shoe:T,device:h}=dh.P(),[A,E]=Ah.useState(!1),H=Ah.useRef(null),{winner:N}=L,{isWinnerBallFlying:Q,animationEnabled:I}=x,{reverseScale:k}=o.values.gameDimensions,_=N&&Q&&A&&I;Ah.useEffect((()=>{c.winAnimation.all[io.WinnerBallTo]&&E(!0)}),[c.winAnimation.all]),Ah.useEffect((()=>{x.reset()}),[h.orientation,x]);const X=Ah.useCallback((()=>{fm(jY,x.flyRoadFromWinnerBall,sm.roadDelay)}),[x.flyRoadFromWinnerBall]);if(Ah.useEffect((()=>{if(H.current&&_){const x=c.winAnimation.get(io.WinnerBallTo),o=c.winAnimation.get(io.WinnerBallFrom);if(!o||!x)return;const L=function(x,o,c=1,L=!1){const{from:T,to:h,delay:A,flyDuration:E,disappearDuration:H,landScale:N,onLand:Q}=o,I=lo(T,c),k=lo(h,c),_=lo(x,c),X=qm(I,_),r=qm(k,_);if(!L)return em.M().sequence(Om({translateX:X.x,translateY:X.y,scale:1}).delay(A).animateTo({translateX:r.x,translateY:r.y,scale:N},E).callback(Q).animateTo({scale:0},H).applyToNode(x));Om({translateX:X.x,translateY:0,scale:1}).applyToNode(x)}(H.current,{from:o,to:x,onLand:X,...UY.winnerBallFly},k,Oo.I());if(L)return Cm.l({anim:L})}}),[k,c.winAnimation,_,X]),!_)return null;const r=T.history.slice(-1)[0],y=r?String(HY.wy(T.beadRoadMode,r)):N.charAt(0);return Th.jsx("div",{"data-role":"winner-ball",ref:H,className:Um,children:Th.jsx(mm,{winner:N,symbol:y})})})),$m=hh.PA((()=>{const x=dh.P();return Th.jsxs(Th.Fragment,{children:[Th.jsx(km,{}),Th.jsx(_m,{}),x.settings.isBaccaratV4&&Th.jsxs(Th.Fragment,{children:[x.device.isDesktop&&Th.jsx(IY,{}),Th.jsx(Dm,{})]})]})})),am=()=>Th.jsxs(Th.Fragment,{children:[Th.jsx($m,{}),Th.jsx(gt,{})]}),zm="classicOverlay--7c50a",lm="bettingGrid--a5bff",Gm="scaled--bcc22",pm=hh.PA((()=>{const x=lr();return Th.jsx("div",{className:zm,children:Th.jsx("div",{className:Hh.A(lm,{[Gm]:!x.gamePhase.isBetsOpen}),children:Th.jsx(dy,{})})})})),Pm="gameResult--c5737",Km=()=>Th.jsx("div",{className:Pm,children:Th.jsx(zt,{})}),Jm="gameOverlay--d5be4",nm={PreferencesCheckboxes:UA,PreferencesTabs:uh,PreferencesVideoComponents:[jA],LayoutBottomRightButtons:[iA],LayoutImmersiveFooterLeftComponent:()=>Th.jsx(qy,{children:Th.jsx(FB,{})}),LayoutImmersiveFooterBettingGrid:Oy,LayoutImmersiveFooterRightComponent:()=>Th.jsx("div",{className:SF,children:Th.jsx(ZF,{})}),LayoutImmersiveFooterGradientComponent:tA,GameOverlays:hh.PA((()=>{const x=lr();return Th.jsxs(Th.Fragment,{children:[Th.jsx(am,{}),Th.jsx("div",{className:Jm,children:x.layout.isDesktopClassic?Th.jsx(pm,{}):Th.jsx(Km,{})})]})})),LayoutClassicTopRightComponent:()=>Th.jsxs("div",{className:dF,children:[Th.jsx("div",{className:uF,children:Th.jsx(ZF,{})}),Th.jsx(FB,{})]}),LayoutClassicVideoOverlayComponent:()=>Th.jsxs("div",{className:pt,children:[Th.jsx("div",{className:Pt,children:Th.jsx(Gt,{})}),Th.jsxs("div",{className:Kt,children:[Th.jsx(TE,{}),Th.jsx(AE,{})]})]}),LayoutBetLimitsBody:BA,WinnerListMultiplierComponents:{WinnerMultiplier:GA},HelpComponentListCreator:KA,HelpCreator:JA},bm="gameUnderlay--be9f5";var Wm;!function(x){x.Container="container"}(Wm||(Wm={}));var wm=c(340680);const gm=function(x){return o=>hh.PA((()=>{const c=T.Pj(),{hidden:L,description:h,label:A,role:H,key:N,onChange:Q,isDisabled:I}=o(c),k=N,_=Ah.useCallback((x=>{c.preferences.updatePreferenceValue(k,x),null==Q||Q(x)}),[c,k,Q]);if(L)return null;const X=E.sU();return Th.jsx(x,{isChecked:c.preferences.getValue(k),gameTheme:c.ag.gameTheme,onChange:_,role:H,label:A,description:h,isDisabled:I,isRtl:X})}))}((({isChecked:x,gameTheme:o,onChange:c,label:L,description:T,role:h,isDisabled:A})=>Th.jsx(wm.o,{gameTheme:o,label:L,isRtl:E.sU(),role:h,onChange:c,isChecked:x,description:T,isDisabled:A})));var Rm=c(636874),xC=c(850449),oC=c(137832),cC=c(94501);function LC(x){const o=oC.P(xC.SJ),c=E.sU();return Th.jsx(cC.a,{...x,gameTheme:o,isRtl:c})}var TC=c(127793);const hC=kh({icons:[Ih(2,{winnerType:H.WinnerTypeBaccarat.Player,additionalType:H.AdditionalTypeBaccarat.Tie}),[...Ih(3,{winnerType:H.WinnerTypeBaccarat.Banker}),...Ih(1,{winnerType:H.WinnerTypeBaccarat.Banker,additionalType:H.AdditionalTypeBaccarat.Tie})],Ih(1,{winnerType:H.WinnerTypeBaccarat.Player}),Ih(4,{winnerType:H.WinnerTypeBaccarat.Banker}),Ih(4,{winnerType:H.WinnerTypeBaccarat.Player}),Ih(2,{winnerType:H.WinnerTypeBaccarat.Banker}),Ih(4,{winnerType:H.WinnerTypeBaccarat.Player}),Ih(2,{winnerType:H.WinnerTypeBaccarat.Banker})],rows:4,columns:8}),AC=[{x:0,y:0,props:{roadType:H.RoadType.Cockroach,winnerType:H.WinnerTypeBaccarat.Tie}},{x:0,y:1,props:{roadType:H.RoadType.Cockroach,winnerType:H.WinnerTypeBaccarat.Tie}},{x:1,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:1,y:1,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:2,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:2,y:1,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:2,y:2,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:3,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:4,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:5,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:5,y:1,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:5,y:2,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:5,y:3,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Player}},{x:6,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}},{x:7,y:0,props:{roadType:H.RoadType.Big,winnerType:H.WinnerTypeBaccarat.Banker}}],EC="container--3e726",HC="gridWrap--5bb13",NC="isSelected--32eda",QC="golden--67604",IC=({color:x,fill:o,stroke:c,isLive:L=!1,IconShapeComponent:T,theme:h,scorecardTheme:A,gameTheme:E,background:N})=>{const Q=Ah.useMemo((()=>(x=>({columnCount:8,rowCount:4,strokeWidth:.1,icons:H.mapIconsToRoadItemsBaccarat(x?hC:AC,x)}))(L)),[L]),I=h===A;return Th.jsxs("div",{className:EC,"data-role":"scorecard-theme-option-container",children:[Th.jsx("div",{style:{background:N},className:Hh.A(HC,{[NC]:I,[QC]:E===TC.q.Golden}),children:Th.jsx(H.GridView,{IconShapeComponent:T,...Q,icons:Q.icons,fill:o,stroke:c,redesigned:!0})}),h&&Th.jsx(LC,{id:x,role:x,value:h,bulletPosition:"left",isChecked:I,isDesktop:!1,children:x})]})},kC={[H.ScorecardThemeNames.BlackDot]:({isRng:x,theme:o,scorecardTheme:c,gameTheme:L})=>Th.jsx(IC,{IconShapeComponent:H.EmptyRoadItem,fill:H.getScorecardTheme(H.ScorecardThemeNames.BlackDot).fill,stroke:H.getScorecardTheme(H.ScorecardThemeNames.BlackDot).stroke,color:E.Tl("settings.gameSpecifics.scorecards.immersive"),isLive:!x,theme:o,scorecardTheme:c,gameTheme:L,background:H.getScorecardTheme(H.ScorecardThemeNames.BlackDot).background}),[H.ScorecardThemeNames.WhiteSolid]:({isRng:x,theme:o,scorecardTheme:c,gameTheme:L})=>Th.jsx(IC,{fill:H.getScorecardTheme(H.ScorecardThemeNames.WhiteSolid).fill,stroke:H.getScorecardTheme(H.ScorecardThemeNames.WhiteSolid).stroke,color:E.Tl("settings.gameSpecifics.scorecards.classic"),isLive:!x,theme:o,scorecardTheme:c,gameTheme:L,background:H.getScorecardTheme(H.ScorecardThemeNames.WhiteSolid).background})},_C=[H.ScorecardThemeNames.BlackDot,H.ScorecardThemeNames.WhiteSolid],XC=({gameTheme:x,scorecardTheme:o,setScorecardTheme:c,themes:L=_C,isRng:T,isRtl:h})=>{const A=Ah.useMemo((()=>function({themes:x,isRng:o,scorecardTheme:c,gameTheme:L}){return x.map((x=>({value:x,component:kC[x]({isRng:o,scorecardTheme:c,theme:x,gameTheme:L})})))}({themes:L,isRng:T,scorecardTheme:o,gameTheme:x})),[T,L,o,x]);return Th.jsxs(Th.Fragment,{children:[Th.jsx(Rm.m,{isRtl:!!h,label:E.Tl("settings.gameSpecifics.scorecards")}),Th.jsx(Nh.P,{setValue:c,value:o,options:A,variant:"simple"})]})},rC=hh.PA((({isRng:x=!1})=>{const o=T.Pj(),c=Ah.useCallback((x=>{o.preferences.updatePreferenceValue(ox.Background,x),o.log.clientPressedSetting(ox.Background,x)}),[o]);return Th.jsx(XC,{gameTheme:o.ag.gameTheme,isRng:x,setScorecardTheme:c,scorecardTheme:o.preferences.scorecardTheme,themes:h.DC,isRtl:E.sU()})}));var yC=c(132006),vC=c(897899),BC=c(744327);const YC=({betMinLimit:x,betMaxLimit:o,currencySymbol:c,tableMinLimit:L,tableMaxLimit:T,tableName:h,tBodyComponent:A,preSection:H,areLimitsInlined:N=!1,hideTitle:Q=!1,isTablet:I=!1,showPayouts:k,legacyMenuMode:_})=>{const X=Ah.useContext(yC.lv),r=Ah.useMemo((()=>fh.Q({lowerLimit:x,upperLimit:o,currencySymbol:c})),[x,o,c]),y=Ah.useMemo((()=>{if(T&&L)return fh.Q({lowerLimit:L,upperLimit:T,currencySymbol:c})}),[L,T,c]);return Th.jsxs(Th.Fragment,{children:[Th.jsx(GY.y,{className:BC.A.container,useMobileScrollable:!0,dataRole:_?void 0:"drawer-scrollable",hasContentFadeOut:!_,refCallback:null==X?void 0:X.assignScrollable,children:Th.jsxs("div",{className:BC.A.scrollContainer,children:[!Q&&Th.jsxs("div",{className:Hh.A(BC.A.tableInfo,{[BC.A.tablet]:I}),children:[Th.jsxs("div",{children:[`${E.Tl("table")}: `,Th.jsx("span",{className:BC.A.tableName,children:h})]}),Th.jsxs("div",{children:[Th.jsx("span",{children:E.Tl("betlimits3")})," ",Th.jsx("span",{className:BC.A.limits,children:r})]}),!!y&&Th.jsxs("div",{"data-role":"table-limits",children:[Th.jsx("span",{children:E.Tl("tableLimits3")})," ",Th.jsx("span",{className:BC.A.limits,children:y})]})]}),H,Th.jsxs("table",{className:BC.A.table,children:[Th.jsx(vC.V,{isMobile:!0,areLimitsInlined:N,showPayouts:k,legacyMenuMode:_}),A]})]})}),_&&Th.jsx("div",{className:Hh.A(BC.A.shadow,{[BC.A.tablet]:I})})]})};YC.displayName="MobileBetLimitsAndPayoutsTable";const FC=hh.PA((()=>{const x=dh.P(),{tableName:o,currencySymbol:c,tableLimits:L,betSpotLimits:T,displayTableLimit:h}=x.settings,A=L.min>0&&L.max>0&&h;return Th.jsx(YC,{tableName:o,currencySymbol:c,betMinLimit:T.min,betMaxLimit:T.max,tableMinLimit:A?L.min:void 0,tableMaxLimit:A?L.max:void 0,tBodyComponent:Th.jsx(BA,{}),isTablet:x.device.isTablet})})),tC=0,mC=1,CC=0,VC=0,iC="50% 50%",MC="zoom--61717",ZC="zoomInner--097ac",SC=({children:x,scale:o,origin:c,translateX:L,translateY:T,duration:h})=>{const A=Ah.useMemo((()=>({"--origin":null!=c?c:iC,"--scale":null!=o?o:mC,"--transformX":`${null!=L?L:CC}%`,"--transformY":`${null!=T?T:VC}%`,"--duration":`${null!=h?h:tC}s`})),[c,o,L,T,h]);return Th.jsx("div",{className:MC,children:Th.jsx("div",{className:ZC,style:A,children:x})})},uC=hh.PA((({children:x})=>{var o,c,L;const T=dh.P(),h=null===(o=T.videoZoom)||void 0===o?void 0:o.scale,A=null===(c=T.videoZoom)||void 0===c?void 0:c.translateY,E=null===(L=T.videoZoom)||void 0===L?void 0:L.duration,H=Ah.useMemo((()=>T.settings.isCameraOnRails&&T.device.isPortrait?h:T.settings.portraitVideoZoom&&T.device.isPortrait?T.device.isBigDeviceDimensions?T.settings.portraitVideoZoom:T.settings.portraitVideoZoom-.15:1),[T.device.isBigDeviceDimensions,T.settings.portraitVideoZoom,T.device.isPortrait,T.settings.isCameraOnRails,h]),N=Ah.useMemo((()=>T.settings.isCameraOnRails&&T.device.isPortrait?A:0),[T.device.isPortrait,T.settings.isCameraOnRails,A]),Q=Ah.useMemo((()=>T.settings.isCameraOnRails&&T.device.isPortrait?E:0),[T.device.isPortrait,T.settings.isCameraOnRails,E]);return Th.jsx(SC,{scale:H,duration:Q,translateY:N,origin:"50% 0%",children:x})}));var dC=c(95772),OC=c(361494);const jC="backdrop--251c9",eC="collapsed--0d380",qC="invisibleCollapsed--6c6fc",fC="isPortrait--0f397",UC="isLandscape--f347a",sC="hideBackdropBackground--76225",DC="bottomBackdrop--defc4",$C="visible--2a622",aC="bottomBackdropV2--766c3",zC=({isPortrait:x,backgroundStyle:o,hideBackdropBackground:c,showBottomBackdrop:L,isPhone:T,isCollapsed:h,invisibleCollapsed:A=!0,onClick:E})=>{const H=Ah.useMemo((()=>Hh.A(jC,{[fC]:x,[UC]:!x,[sC]:c,[eC]:h,[qC]:h&&A})),[x,c,h]),N=Ah.useMemo((()=>Hh.A(DC,{[aC]:T,[$C]:L,[fC]:x})),[T,L,x]),Q=Ah.useMemo((()=>({background:o})),[o]),I=Ah.useMemo((()=>x?void 0:E),[x,E]);return Th.jsxs(Th.Fragment,{children:[Th.jsx("div",{className:H,style:Q,onClick:I}),Th.jsx("div",{className:N})]})};var lC=c(504642),GC=c(715907);const pC=Th.jsx("img",{src:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2220%22%20height%3D%2212%22%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23D5D3D0%22%20fill-rule%3D%22nonzero%22%20d%3D%22M10%208.95%2018.2.3l1.45%201.38-9.67%2010.16L.34%201.69%201.8.3z%22%2F%3E%0A%3C%2Fsvg%3E%0A"}),PC=x=>Th.jsx(GC.$,{...x,role:"minimizeButton",iconComponent:pC,type:"secondary"}),KC="buttonContainer--8c7a9",JC="isLeft--03674",nC="isTablet--e7894",bC="menuButtonSpacer--222f9",WC="minimizeButtonContainer--4004c",wC="isLandscape--48011",gC="minimizeButtonVisible--4fdfc",RC=({isMenuButtonOnBottom:x,isTablet:o,isCollapsed:c,isPortrait:L,buttons:T,onMinimizeButtonClick:h,containerClassName:A})=>{const E=Ah.useMemo((()=>T?Object.values(T).filter(R.Vq):[]),[T]),H=E.length,N=Ah.useMemo((()=>!c&&!L),[c,L]),Q=Ah.useMemo((()=>({onClick:h,...!N&&{state:"Disabled"}})),[N,h]),I=Ah.useMemo((()=>Hh.A(bC,{[nC]:o})),[o]),k=Ah.useCallback(((o=0)=>lC.A(x&&o>0?o+1:o,(x=>Th.jsx("div",{className:I},x)))),[x,I]),_=Ah.useMemo((()=>Hh.A(WC,KC,A,{[gC]:N,[nC]:o,[wC]:!L})),[o,L,N,A]),X=Ah.useMemo((()=>Hh.A(KC,A,{[JC]:L,[nC]:o})),[L,o,A]);return Th.jsxs(Th.Fragment,{children:[Th.jsxs("div",{className:_,children:[Th.jsx(PC,{...Q}),k(H+1)]}),E.map(((x,o)=>Th.jsxs("div",{className:X,children:[Th.jsx(x,{}),k(L?0:o+1)]},o)))]})},xV=x=>{const{children:o,...c}=x,L=Ah.useRef(),T=Ah.useCallback((x=>{L.current=x.target}),[]),h=Ah.useCallback((x=>{var o,c;const T=x.changedTouches[0],h=document.elementFromPoint(T.clientX,T.clientY);"touchendable"!==(null===(c=null===(o=null==L?void 0:L.current)||void 0===o?void 0:o.dataset)||void 0===c?void 0:c.role)&&L.current!==h&&x.stopPropagation()}),[]);return Th.jsx("div",{...c,onTouchStart:T,onTouchEndCapture:h,children:o})},oV="gameControls--ab9e4",cV="isLandscape--7f615",LV=Ah.memo((({isLandscape:x,className:o,children:c,...L})=>{const T=Hh.A(oV,x&&cV,o);return Th.jsx("div",{className:T,"data-role":"expand-betting-grid",...L,children:Th.jsx(xV,{children:c})})})),TV="overlay--e3c59",hV="gameControlsWrapper--9fbf7",AV="isLandscape--61724",EV="isScaled--7087f",HV=({isPortrait:x,isTablet:o,isPhone:c,allowInteraction:L,isScaled:T,isMenuButtonOnBottom:h,hideBackdropBackground:A=!1,enableScrollable:E,action:H,backdropBackgroundStyle:N,getBackdropBackgroundStyle:Q,backdropInvisibleCollapsed:I,transformStyle:k,topPositionStyle:_,bottomPositionStyle:X,getGameControlsClassName:r,getGameControlsWrapperClassName:y,gameOverlayContainers:{content:v,preOverlays:B=[],postOverlays:Y=[],buttons:F},setIsExpanded:t,handleCardsContainerUpdate:m,removeAllAbsTooltips:C,clientTapMinimizeGridLog:V})=>{const i=Ay.Z(x),M=Ay.Z(H),[Z,S]=Ah.useState(H!==Lc.Expand),[u,d]=Ah.useState(0),[O,j]=Ah.useState(0),e=Ah.useRef(null),q=Ah.useCallback((()=>{setTimeout((()=>{C()}),0)}),[C]),f=Ah.useCallback((x=>{const o=x.touches[0];j(o.clientY)}),[]),U=Ah.useCallback((x=>{const o=x.changedTouches[0].clientY,c=Math.abs(O-o)>40;return{modeChangeTriggered:c,shouldBeCollapsed:c&&O<o}}),[O]),s=Ah.useCallback((()=>u>Date.now()-450),[u]),D=Ah.useCallback((x=>{Z!==x&&(S(x),d(Date.now()),t(!x),q())}),[Z,q,t]),$=Ah.useCallback(((x,o)=>{L&&!s()&&(D(x),x&&o&&V(o))}),[L,V,D,s]),a=Ah.useCallback((()=>$(!1)),[$]),z=Ah.useCallback((x=>{const{modeChangeTriggered:o}=U(x);(o||s())&&(x.stopPropagation(),q()),Z&&L&&(x.preventDefault(),a())}),[L,U,a,s,Z,q]),l=Ah.useCallback((()=>$(!0,fx.Swipe)),[$]),G=Ah.useCallback((x=>{const{modeChangeTriggered:o,shouldBeCollapsed:c}=U(x);c?l():o&&a()}),[U,l,a]),p=Ah.useCallback((x=>{const o=x.target;"transform"===x.propertyName&&"expand-betting-grid"===o.getAttribute("data-role")&&(null==m||m())}),[m]),P=Ah.useCallback((()=>$(!0,fx.ClickOnButton)),[$]),K=Ah.useCallback((()=>$(!0,fx.ClickOnBackdrop)),[$]),J=x=>{x.preventDefault()},n=Ah.useMemo((()=>!x&&{onTouchStart:f,onTouchEnd:z,onTouchMove:G,...m&&{onTransitionEnd:p}}),[m,x,p,z,G,f]),b=Ah.useMemo((()=>Hh.A(hV,{[AV]:!x,[EV]:T},null==y?void 0:y({isLandscape:!x,isTablet:o}))),[y,x,o,T]);Ah.useEffect((()=>{x&&m&&m()}),[x,m,_]),Ah.useEffect((()=>{const o=void 0!==i&&i!==x,c=void 0!==M&&M!==H;x?Z&&(S(!1),d(0)):(o||c&&H!==Lc.Nothing)&&D(H!==Lc.Expand)}),[x,Z,i,H,M,D]);const W=Ah.useMemo((()=>({transform:k,top:_,bottom:X})),[k,_,X]),w=Ah.useMemo((()=>null==r?void 0:r({collapsed:Z,isLandscape:!x,isTablet:o})),[r,Z,x,o]);return Th.jsxs(Th.Fragment,{children:[Th.jsx(zC,{isPortrait:x,isPhone:c,isCollapsed:Z,hideBackdropBackground:A,backgroundStyle:(null==Q?void 0:Q(Z))||N,invisibleCollapsed:I,showBottomBackdrop:!!k,onClick:K}),Th.jsxs(oh.MobileSafeContainerConnected,{isRng:!1,children:[Th.jsx("div",{className:TV,ref:x=>{E||(e.current&&e.current.removeEventListener("touchmove",J,{capture:!1}),x&&(e.current=x,e.current.addEventListener("touchmove",J,{passive:!1,capture:!1})))},children:Th.jsxs("div",{className:b,style:W,"data-role":"gameControlsWrapper",...m&&{onTransitionEnd:x=>{"gameControlsWrapper"===x.target.getAttribute("data-role")&&(null==m||m())}},children:[B.map(((x,o)=>Th.jsx(x,{isCollapsed:Z},((x,o="key")=>`${o}-${x}`)(o,"overlay")))),Th.jsx(LV,{"data-expanded":Z?"false":"true",isLandscape:!x,className:w,...n,children:Th.jsx(v,{isCollapsed:Z,isPortrait:x,isTablet:o})}),Y.map((x=>Th.jsx(x,{})))]})}),Th.jsx(RC,{buttons:F,onMinimizeButtonClick:P,isMenuButtonOnBottom:h,isTablet:o,isPortrait:x,isCollapsed:Z})]})]})},NV=hh.PA((x=>{const o=dh.P(),c=x.gameOverlayContainers,L={...c,buttons:c.buttons?OC.A(c.buttons,o.layout.omittedOverlayButtons):void 0},T=Ah.useCallback((()=>{o.tooltip.hideAll()}),[o.tooltip]),h=Ah.useCallback((x=>{o.log.clientMinimizeGrid(x)}),[o.log]);return Th.jsx(HV,{...x,isPortrait:o.device.isPortrait,isTablet:o.device.isTablet,isPhone:o.device.isPhone,enableScrollable:!0,gameOverlayContainers:L,action:o.layout.gameControlsAction,removeAllAbsTooltips:T,clientTapMinimizeGridLog:h})})),QV="roads--a31b6",IV="dealNow--971b0",kV="bettingGrid--a60ca",_V="portrait--55ead",XV="hidden--c5c76",rV="tablet--dc6ed",yV="roadsPredictionsArea--0e2da",vV="roadsPredictions--efdfd",BV="isCollapsed--8d94e",YV="isHidden--a4536",FV="fitToContainer--0b917",tV="roadsPredictionsGradient--83b8d",mV="visible--57829",CV=({isCollapsed:x,isMultipliersCardsVisible:o,RoadsPredictions:c,color:L,isBettingDown:T=!1,isGradientDisabled:h=!1,isFitToContainer:A=!1})=>Th.jsxs("div",{className:Hh.A(yV,{[BV]:!!x,[YV]:o,[FV]:A}),children:[!h&&Th.jsx(VV,{isVisible:T,color:L}),Th.jsx("div",{className:Hh.A(vV),children:Th.jsx(c,{})})]}),VV=({color:x,isVisible:o})=>Th.jsx("div",{className:Hh.A(tV,{[mV]:o}),style:{background:`linear-gradient(360deg, ${x} 26.65%, rgba(19, 5, 5, 0.0001) 100%)`}}),iV=(hh.PA((({isCollapsed:x})=>{const{layout:o,device:c}=dh.P(),L=o.isBettingDown,T=o.gameUnderlayColor;return Th.jsx(CV,{isCollapsed:x,isFitToContainer:o.isBaccaratV4RoadsMobile&&!c.isDesktop&&!c.isPortrait,isMultipliersCardsVisible:!1,isGradientDisabled:o.isBaccaratV4RoadsMobile,RoadsPredictions:iF,isBettingDown:L,color:T})})),"cardsBox--02284"),MV="isCollapsed--42cbb",ZV="isLandscape--4d56b",SV="cardsAreVisible--e02bd",uV="isBetsOpen--f6f38",dV=hh.PA((({isCollapsed:x})=>{const o=lr(),c=o.device.isLandscape,L=o.gamePhase.isBetsOpen,T=o.multipliers.multiplierCardsExist,h=o.layout.isBettingDown,A=o.layout.gameColor;return Th.jsxs(Th.Fragment,{children:[Th.jsx("div",{className:Hh.A(iV,{[MV]:!!x,[SV]:T,[ZV]:c,[uV]:L}),children:Th.jsx(FB,{})}),Th.jsx(CV,{isCollapsed:x,isMultipliersCardsVisible:T,RoadsPredictions:iF,isBettingDown:h,color:A})]})})),OV="lightning--c50ec",jV="landscape--cde9c",eV="isTablet--3b952",qV="collapsed--b4b90",fV=({isTablet:x,isLandscape:o,collapsed:c})=>o&&c?Hh.A(OV,qV,{[eV]:x}):void 0,UV=({isLandscape:x,isTablet:o})=>x?Hh.A(OV,jV,{[eV]:o}):void 0,sV={content:function(x){const{BettingGridContainer:o,RoadsPredictionsContainer:c,DealNowButtonContainer:L,DealNowBubbleContainer:T,CircleTimerContainer:h,TopContainer:A}=x;return x=>{const[E,H]=Ah.useState(!!L),{isCollapsed:N,isPortrait:Q,isTablet:I}=x;return Th.jsxs("div",{children:[h&&Th.jsx(h,{}),A&&Th.jsx(A,{isCollapsed:N}),Th.jsx("div",{className:kV,children:Th.jsx(o,{isCollapsed:N})}),c&&Th.jsx("div",{className:Hh.A(QV,{[rV]:I}),children:Th.jsx(c,{isCollapsed:N})}),L&&Th.jsxs("div",{className:Hh.A(IV,{[_V]:Q,[XV]:!E}),children:[T&&Th.jsx(T,{}),Th.jsx(L,{setContainerVisibility:H})]})]})}}({BettingGridContainer:dy,RoadsPredictionsContainer:dV,DealNowBubbleContainer:TE,DealNowButtonContainer:AE}),buttons:{[Tc.Multiplay]:iA}},DV=hh.PA((()=>{const{device:x,layout:o,draggableChip:c,flyingChips:L}=lr(),{containerWidth:T,containerHeight:h}=x.dimensions,A=dC.A(T/h,2);return Th.jsx(NV,{allowInteraction:!c.isDragInProgress&&o.gameControlsAllowInteraction,setIsExpanded:L.playHideAnimations,gameOverlayContainers:sV,getGameControlsClassName:fV,getGameControlsWrapperClassName:UV,transformStyle:o.gameOverlayTransformStyle,bottomPositionStyle:o.bottomPositionStyle,topPositionStyle:o.topPosition,isScaled:1.89===A&&!x.isPortrait})})),$V="gradientWrapper--3d7b6",aV="noAnimation--4aa9f",zV="videoGradient--10404",lV="blendedOverlay--e4295",GV=({isPortrait:x,skipHeightTransition:o,containerStyles:c,backgroundStyle:L,withBlendedOverlay:T})=>{const[h,A]=Ah.useState(!1),[E,H]=Ah.useState(x);return Ah.useEffect((()=>{A(E!==x),H(x)}),[E,x]),Th.jsx("div",{style:c,className:Hh.A($V,{[aV]:h||o}),children:Th.jsx("div",{style:{background:L},className:Hh.A(zV,{[lV]:T})})})},pV=hh.PA((x=>{const o=dh.P(),{isPortrait:c,isTablet:L}=o.device;return Th.jsx(GV,{...x,isPortrait:c,skipHeightTransition:!c||o.settings.isBaccaratV4,withBlendedOverlay:L&&o.settings.isBaccaratV4})})),PV=hh.PA((()=>{const x=lr();return Th.jsx(pV,{backgroundStyle:x.layout.videoGradientBackgroundStyle,containerStyles:x.layout.videoGradientContainerStyles})})),KV="video-overlay-gradient--966bf";function JV(){const[x,o]=Ah.useState({width:0,height:0});function c(){o({width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)})}Ah.useEffect((()=>(c(),ev.w9(c))),[]);const L=x.width,T=x.height/UF.Yf.height*UF.Yf.width,h=(L-T)/2,A=.05*T,E={backgroundImage:`linear-gradient(\n90deg,\nrgba(0, 0, 0, 1) ${h}px,\nrgba(0, 0, 0, 0) ${h+A}px,\nrgba(0, 0, 0, 0) ${h+T-A}px,\nrgba(0, 0, 0, 1) ${h+T}px,\nrgba(0, 0, 0, 1) 100%\n)`};return L>T+10?Th.jsx("div",{className:KV,style:E}):null}JV.displayName="VideoOverlayGradient";const nV={MobileGameOverlayContainer:DV,MobileLayoutUnderlays:[()=>{const x=dh.P(),o={background:x.layout.gameUnderlayColor,opacity:x.layout.gameGradientOpacity};return Th.jsx("div",{className:bm,style:o,"data-role":Wm.Container})}],MobileVideoOverlays:[Gt],MobileVideoGradients:[PV,JV],MobileMenuNavigationMap:{betLimits:()=>Th.jsx(FC,{})},MobileSettings:{CustomGameSpecific:function(){const x=gm((x=>({key:ox.AllSideBets,label:E.Tl("settings.gameSpecifics.showSideBets"),role:"all-side-bets",isDisabled:x.preferences.isAllSideBetsCheckboxDisabled,description:x.preferences.isAllSideBetsCheckboxDisabled?E.Tl(x.preferences.disabledAllSideBetsCheckboxTooltipKey||"tooltip.hideSideBets"):void 0,hidden:!x.betSpot.hasExtraSideBetsConfigured||x.settings.isMainBetsOnly}))),o=gm((x=>({key:Ac.ShowBettingStats,label:E.Tl("settings.gameSpecifics.betStatistics"),description:E.Tl("settings.gameSpecifics.betStatistics.message"),role:"betting-statistics",onChange:o=>x.log.clientPressedStatistics(o)})));return Ah.memo((function(){return Th.jsxs(Th.Fragment,{children:[Th.jsx(x,{}),Th.jsx(o,{}),Th.jsx(rC,{})]})}))}()},MobileLayoutOverlays:[am],HelpComponentListCreator:KA,HelpCreator:JA,WinnerListMultiplierComponents:{WinnerMultiplier:GA},PreferencesVideoComponents:[jA],MobileBasicVideoWrapper:uC};var bV=c(809024),WV=c(357947),wV=c(441650),gV=c(671837);window.EVO_LOADER.publishApplication("/frontend/evo/r2/","baccarat.lightning",{initialize:async function(x){E.JL(x.i18nData,"baccarat");const o=WV.K({gameLoaderParams:x,...eh.DS.IS_PHONE&&{animation:wV.hp.FromLeftToRight,backgroundGradientColor:gV.n(x)}}),{layout:c,storeCreated:h,videoIsReady:A,dispose:N}=function({gameLoaderParams:x,deviceSupport:o,lobby:c,initialLayout:L}){const h=o.IS_DESKTOP;return function(x){Lh.W0._init(x.params.setup,x.params.styles,x.params.tableConfig,x.deviceSupport);const o=Lh.W0._extend(m)._extend(xh),{getCustomLogEnhancers:c,resolveCustomLogEnhancers:L}=function(){let x;const o=new Promise((o=>{x=o}));return{getCustomLogEnhancers:()=>o,resolveCustomLogEnhancers(o){x(o)}}}(),{dispose:h,getReactRoot:A,transport:E,ag:N}=function(x,o,c){const{params:L,lobby:T,deviceSupport:h,mockBalanceManager:A,transports:E,menuButtonsConfig:N}=x,Q=h.IS_DESKTOP,I=Q?{[H.LayoutType.ImmersiveV2]:{videoStream:Zc.VideoPlaylist.Default,labelTranslationId:"view",winnersList:{height:68}},[H.LayoutType.Classic]:{videoStream:Zc.VideoPlaylist.Classic,labelTranslationId:Zc.VideoPlaylist.Classic}}:{[H.LayoutType.PhoneV2]:{videoStream:Zc.VideoPlaylist.Default}};return k={config:{layout:{initialLayout:x.initialLayout?x.initialLayout:Q?H.LayoutType.ImmersiveV2:H.LayoutType.PhoneV2,layoutClassicIsHidden:!1,layouts:I,hasHelpSupportChatButton:!0},chipstack:{position:{tablet:oh.ChipStackTabletPosition.Left,phonePortrait:oh.ChipStackPhonePortraitPosition.BottomCentered,phoneLandscape:oh.ChipStackPhoneLandscapePosition.Left}},tableLimits:{min:o.betSpotLimits.min,max:o.betSpotLimits.max},helpNamespace:"baccarat",app3DEnabled:!0,showOnboardingHintsOptionInSettings:!0,video:{enabled:!0}},settings:o,game:{loader:L,mockBalanceManager:A,menuButtonsConfig:N,preferenceConfiguration:bT(o),getCustomLogEnhancers:c},lobby:T},_=E,ch.I({...k,game:{...k.game,mockTransports:_,gameFamily:"live"}});var k,_}(x,o,c),Q=(I={ag:N,transport:E,settings:o,DS:x.deviceSupport,bubblesEnabled:x.bubblesEnabled},new KT(I));var I;L(Q.log.getCustomEnhancers());const k=A(x.componentsMap);return{layout:T.jU(Q,k),storeCreated:N.preferences.initialization,videoIsReady:N.video.ready,transport:E,store:Q,dispose:async()=>{Q.dispose(),await h()}}}({params:x,componentsMap:h?nm:nV,lobby:c,deviceSupport:o,initialLayout:L,bubblesEnabled:h})}({gameLoaderParams:x,deviceSupport:eh.DS,lobby:o});await h;const Q=L.H(x.getRoot());return Q.render(c),await A,{abstractGameDispose:N,root:Q}},dispose:bV.L,applicationType:"game"})},710913:(x,o,c)=>{function L(x,o){const c=T();return L=function(o,T){let h=c[o-=132];if(void 0===L.PtTgYA){const o=function(x,o){let c,L,T=[],h=0,A="";for(x=function(x){const o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let c="",L="";for(let L,T,h=0,A=0;T=x.charAt(A++);~T&&(L=h%4?64*L+T:T,h++%4)?c+=String.fromCharCode(255&L>>(-2*h&6)):0)T=o.indexOf(T);for(let x=0,o=c.length;x<o;x++)L+="%"+("00"+c.charCodeAt(x).toString(16)).slice(-2);return decodeURIComponent(L)}(x),L=0;L<256;L++)T[L]=L;for(L=0;L<256;L++)h=(h+T[L]+o.charCodeAt(L%o.length))%256,c=T[L],T[L]=T[h],T[h]=c;L=0,h=0;for(let o=0;o<x.length;o++)L=(L+1)%256,h=(h+T[L])%256,c=T[L],T[L]=T[h],T[h]=c,A+=String.fromCharCode(x.charCodeAt(o)^T[(T[L]+T[h])%256]);return A};L.MUiNYJ=o,x=arguments,L.PtTgYA=!0}const A=o+c[0],E=x[A];return E?h=E:(void 0===L.NozgZJ&&(L.NozgZJ=!0),h=L.MUiNYJ(h,T),x[A]=h),h},L(x,o)}function T(){const x=["WQJdRuhcKJDo","ugTUEvq","ECkarKFcR8kiWO7cH0WoWPfbWRS","WOZdMSoXWRhcUq","twLUqMv0u3bVDa","k8klo1NcOSo2W4ZcPSkNka","W7JcVZfdWQNdTIZdKgtdTa","WQFdP0NcKZjozxlcM2i","pmoMaXBdV8oEW4tcLW","A2v5CW","WQmgWOKvW6HHW4q","pmk/WQVcTCozWQvSm8oXdq","xbNdJCk/WQ/cGCoRWPunWOq","y2nLC3m","WQ7dV8keWRBdQ8o5","B3rHBejLDhnbBq","W7qJWOefW5vmW4a","C2v0qMv0CW","W5CJj1S","W7ySWRW","Axnczxr0Aw5Nva","BwLUqMv0u3bVDa","geXRymoOW4NdGau","W6tcTbDUWRddOdNdI0xdUa","Bwf4vgfIBgvmAq","ntqXnvvUzuztrG","B25eB3vIBgvtDq","mti3mdHlqwvPsNO","trNdSaFcUbS4tmkKxG","W5xdNatdMmoDoCoHWOtcHCkEFa","zw5HyMXLza","z2v0rMvLqw1VDq","gtNdNSkd","odm1nwDiBu1yva","CMvHC29U","W74JWQuvW4TgW5y","hdRdG8kGe8kjuKeAWQ8","i8oheHddRSoTW5BcIeS7","uMvTB3zL","W4i2FfpdRCoN","z2v0uMvWzwf0yq","z8k1WRWbkKhdRCk9ar0","WRlcSCo4WQ4KWRaS","W4lcNxX/","eZNdLa","W5S1lfZdVW","AwvUDfjLzhvJDa","W4KSmuu","a8oVnK89","W4KlfgnD","WPW7W74qxSobWPmVWOe","BKjLDhnqzxjJzq","pYddVmoV","DhLWzq","DMfSAwrHDgu","Bw92zq","EdJdRInXfmkmWQq","WOCTW4eAw8oLWP8EWO9V","Aw5JBhvKzxm","u3rHDgu","uSoTWRfbWQdcJbTRW77dHW","WQ3dOvH7W6VcNZBcGwdcGq","pCkjnLm","lCk1WR7cTSoEWRG","W7q/WQasW5v1W5n4W4zE","BwLUvgfIBgvwyq","mte4mNLQy0XSAq","WQVdICo3WRxcO8oZW6lcG8oAeW","W55OW63dTh7dHHBdKq","AgLZDg9YEq","rezpwwq","WPCPW54Er8oWWP8","rbjEESoVW4hdQq8kca","W7xcTbDv","mK9NzM50CG","DvfYzvO","r8k6WRmmgW","srL6zq","CM9VDa","mt5bWPyxkvvWnSkz","W410W5aegCofdCoiWOxdSW","WOrTvCoi","mtm5ntHXvKLSBeq","W7TBeSoRW49QWPxcVIdcGG","ye1BWOnT","uHVdSdHg","uLbet2i","WQBcSSolcSkRW4i","WPNcVSovlCkVW4iwWP/dKaK","WPxdKCowWOZcGa","W7GSWQGuW5jpW5nGW4PU","ACoLWRnQWQhcMtX0W6pdGa","W67cRmoqW7hcTSkHW61YqmkrW7GByW","W4GMkMvwW5jjWRBcRxe","W7jph8oTW5rzWPRcPG/cKW","vSk9WRe3kLhdNa","Aw9U","vw5KB0fSBa","W5G+WPXb","W4/cTYq","W67cQ8oxW7tcTSkGW690uSkvW4OLzq","Dg9tDhjPBMC","sSoSk8kffbHscKHx","Bwf4qMv0u3bVDa","WO/cN13cMG","kczjWRe","dCkaWORcNmoD","WR0rW57dOCoM","w8ocWPbAWQe","W73cLmkHWO0","twf4vgfIBgvwyq","WQieW4pdTmoMxG","W5VcVs7cTG","W61zgSo8W4nRWRNcRXlcHa","WQygW4JdOG","W70+dMJdNq","WOfBWRlcUCktBCoXWOhdTHK","tg93qMv0","zmk7WRFdOmoTD8kxWQDE","WPddTCksWOFdOCoJ","WRXyWRRdLa","ChjVChm","W7BcVqjiWRRdTG","CIVdNdrL","BbaiCSofwsFcQfBdJa","AxnvBMrVrw5HyG","nSkJWOVcVCoqWRLOmSowaG","Ffbt","W7j1W4OFDCkSySkoW6TyyMHm","WPJcRIZcQvBcQZTdW4TF","xZL/DSoUWQf/yCksW5y","W40ImLHDW4DCWR8","W7BcLSoKsmoOzCoLDfOi","vbldVCksWR/cL8ouWOaXWOu","BwLU","bbldStfyaCkt","n8k5WR4","WQWaW5NdTmoX","Ff5AWPb7reFcQSoXhG","WPxdM8oBWRpcUmoYW7FcImoqeG","yLPeWPz/za","z1rPBwu","hdRdG8kGbmkdCg09WR4","WPNcRIVcMeVcQt9TW6Xo","q2HPCe1VDMvjBG","W53cMN17yG","WO3dOvHl","WOORWPXYjSo9oSkOW75k","WQpdQfuEWP3dLbRdKxJdKq","W457W67dRa","W5RcTZxcLSoRWOKWe8kiWPe","DhjPy3rPB24","W4xcVZRdKmk5nq","WQ7dV8kvWQddPCoJWPLOrmkC","WP4TW4Sm","sdbQqSomWRvuz8knW6W","omk1WRRcKSosWQn6nmoGna","z2v0","W77cLmkQWRVcG8oI","o8kAWO4WoSkXumoGsWi","BgvUz3rO","zhvJDgLVBG","W5u1WRHEpSkodCkQWO9a","WQpdPv9mW5FcNZZcGMRcLG","tM90rw5VDwDOtq","bCkqWOKxoSkP","uxbMtvC","v8o9pSkQga","W5S2WODhmCkz","W7yQmgvyW4reWR/cUxu","BhvLqMv0","DMrZDxi","mtq5mZi4oujXq2DiBq","B25qBgfJzunOAq","WORdPvG","hSkgpKNcQCoX","mtC1mZC5n054y2DKsa","CgrHDgvKqMv0CW","yxrVCNm","yMXLqMv0CW","WONcHLlcJmkjkq","zfbaWPjYuK3cJmoBaa","a8oolfWTetSBDSk3","rMvLqMv0sw5ZDq","WQuTW5OxBG","uMvWzwf0","mcRdVSolW5JdPCoCWRTKCW","wJ1NwSoHWRPy","lCkjm17cOmoNW6O","WQacW4NdHCo0t8krW4BdUbS","eCo4luW","z2v0qw1VDw50vW","Dw5KBW","yxzHAwXHyMXLqG","FCoLWRnIWQVcMY0","ur7dSG7cJbSfvSkDqG","WQddRuhcNJHo","Aw1L","vCoOmCkUgd9jn19E","WO3dQ1LwW6a","WQGSWR9jmCo6bCk4W4Ti","W6pcQbnd","WQNcQJtcNfFcVd97W6zv","W4POW63dOhxdPXBdSsyW","CMvKDwnL","zwf0","W6ZdPmkowSkTW74OWQldPYK","u8kNWPCwha","W7CIWQm","B25nB3zLu3vJyW","DfjLzhvJDgLVBG","omoDpZZdLq","W7iJW5/dJmkP","ywn0Aw9UCW","wX7dUq","oSkipuG","F1fKWP9/C03cU8o8bW","WP5fWRRdH8oYW7xdLSk/","W5u1WQXDkSkpbmkmWRrC","W4pcRdNdLCkV","WRpdKmk6dCoo","W4WcjKddOciLW40","b8kuWP0Hl8k8q8o6","W6FcOWXwWQO","W54ed2NdUq","WPpdNCoWWRu","AxrOrMvL","zMX5vg9czxrtCa","rNjysxy","baNdRbz0mmkq","WQiwW5/dPq","W680WRqs","W715W6xdOg/dOsBdIY0W","qur0DMq","WOPLFXVcUMv5W4ODC8owWOVcJa","vMfSDwvZ","EfzqWPzCAxZcGCoKcW","CKHkuMq","sbnRCmoOW4VdRYuhdW","WO7dH8oXWRu","mtbyt1njDKS","A2Xfuw8","W5GImLjmW4PjWQ7cIKe","W6LLW4pdPg8","W4j7W7xdLKm","WQSpW4JdL8oWsmkYW43dRb8","Cfn1y2nLC3nmBW","B3rZrxHHy3rbBq","EejLDa","vw5KBW","qG9CC8o+W4FdRtGNdW","qufLDxG","mte3tvjfBLnM","z0PxrhC","xJtdPG","t2dcJCoqtSkzDuOwWP8D","CLPaWOa","W5q2zKu","tcv7xG","WRKNW4u9smo/WPSYWOL+","DePND04","nsX2WROupNbIhCko","y2fSy3vSyxrLva","CMvZDwX0qMv0","gdFdLSkhgmkpEa","W6hdOSklxCo5WOv8WOZdKsXFW5hcPa","W5hcSJpdGCkoi8kjW6ZdGq4","E8oOm8kSeWHdmvvb","WO3cRCoroCkl","sb9RzCo9","W4VcJxC","emo+peW9","ldzDWQ4I","yM91BMq","C15yWPbRFeNcJmoXoG","W5ilW6BdQSkezmo3","saxdMG","lCk1WQRcPSoCWQK","WPZdPuTDW4FcId/cL3NcHW","W4JcPcdcQ8oOWPWZe8kVWRy","zM9YrwfJAa","W5RcVIJcOCoH","WPPNvmoBWOy/","vLHUt1q","W7Xjfmo6W5u","W57cTHSnWRBdIbBcNLRcOCk6jq","mZKZmZK5owXXBK1ova","rWVdKqVcUXiqvSkrEq","sJnKtW","WQSNWPXbm8o3","W7TSW7xdG37dSaa","yw1VDw50","WPP3x8o+WPCJ","WRPDW7VdGfNdGqi","WRhcPSoJWPWY","FrKfySoisa","WRhcSmoTWPGKWQaDWPa0WPi","CMvWzwf0qMv0CW","WOFcPd8","rdldOZLs","W5NcOc7cSSo3","DMfSAwrHDg9YCW","yXJdJshcJa","W5a/luRdJtOG","WPtdGCoU","W6S/WQShW5q","t3rOzxi","qMv0DgLUz1rPBq","xWVcM8kGgW","FSkTWP/dGmo0z8kBWQbgma","W51NW6xdRG","rg91yMXL","W7u5p0O","sMfVDgK","twLUvgfIBgvwyq","W5OUmurxW5i","W6hcJSk9WO0","C2HVD0jLDfnWBW","W6a8Ba","C2v0sgLZDg9YEq","sW3dJW3cVq0","zs/dP8kFWO4","C29YDa","nZyZndyWogzTzevyAG","pZnqWRewm2jMamk/","jGxdRCo9W7S","zCk+WRib","W50/WPW+W5e","sHfHy8oGW5y","wrL+C8oVW5y","ispdO8oPW5a","C2XPy2u","kSkGWQRcSSolWQLBnq","C2v0vg90ywXczq","W75shSoUW4bMWPJcOWpcMq","W5KMkKi","EuXWWOf/D2hcLSoeha","WRGPW5SrA8o2WO4pWPP0","WRKmW4xdSmo5B8kyW5FdOrq","WQRdKCkxgmojEmopqMWG","f8ozlxee","W77cVZ/dI8kEi8kCW4ZdNG8","zxrtB3vUza","CMvZzxj2zujLDa","EvbA","ode0mZeXr2DeA0rW","CgXHEvbSywnLqG","AxneB3vIBgvfBG","WOeAW5CBxmoWWO41WOv1","ktfDWRS5k0W","j2HWWPu","W4hcKCkGWO3cLCotahpcKhK","W4GKjL/dVW","WQddGCkWdSoor8oVvq","W74fW77dJSkeAmoNWQRdSJ0","WPNdHSoQWQdcRCo4","WPqRW4ywrSo9WOK","gdpdJSkv","urldVCkJ","uxLitum","W5/cJwjUCexcPSkpWOv5","zMzPy2LLBNrgDq","BrmuECop","WR3cQJtcIfZcRa","W75Cf8oRW5nJWPRcVGpcOG","nsX9WQyzigLTjmko","W4G2lLrlW7vbWQlcONu","Cg9W","B2DYzxnZ","yaKpyW","W6rSW6u","Aw5czxrZugvYyW","vMfSDwvczxq","WQZdJmkqd8opzmoY","bc7dPSo/W5ddImomWQe","zxnZtg9N","zg91yMXL","W7JcVYDjWQZdSshdGwtdTa","aCoYnKS","WPa8W6eqxmo9WP4","WORdQK1AW6JcNZq","tw92zq","WQ3dJxL/W4C","W6xcRSoxW7hcSmkLWOXuF8k5W50n","lmk1WRRcM8owWR97nCoMgG","y2nLC3nmB2C","eSkBWPGqn8k4vq","W58MW4tdHCkP","zLjgrNu","Dg90ywXczxrpBG","WQZdTCkrWPpdPCo7WQHK","Bwf4u3vWzxjtAq","W7tcKNHDua","WOfdWR3dHCoY","W57cTZJdP8k5mSk7W6/dGrq","W57cTbKnWRtcGZZcTwFcQSka","W4q2Ff/dPq","WRCWWP1wna","WQ/dL8kWp8oyFW","F0PAWODT","WPrNtSop","mJm2ndyZnxDxDeDuBG","WRGPW5SrAmo9WP4mWOTY","B25fCNjVCG","W7lcVWjeWRxdTIK","CmoQWOPTWQhcLXTUW7ldKa","WPvJvSoFWOC7gCkQkw0","twf4vgfIBgvpCG","DgHjsuK","uhjVz3jLC3m","WPxcUmocWPyB","BMDgywLSu291BG","tM9czxrZugXHyW","B3vUDa","rHvGvmoRW5BdNZWnfq","gKG3jCk8WPRcTq4tiSojW6JcLG","W5hdMatdM8oxFSopWPJcMmkiFWq","DgfIBgvmAw1PDa","zNBcVmkYW7hdJCo+WQbFua","mta0oty2odHjAML4CgO","aSkfWP0tl8k4C8oRxbq","W7hcJCkMWPZcImoIoNFcH04","ywjSzwq","tapdJHZcOqWi","Cfn1y2nLC3m","W57cNWFdVmkw","WQWZW7tdI8oL","W5JcUwbUsW","qbldVCkyWRpcKmoZWP8SWOG","WR0WW4tdSSo2smkoW5a","wxPQvKe","WPNcPdFcIq","DaZcJSkRpmoa","WQXwWRNdGCoUW7pdGmknoWK","wLLRq0i","t3jLufG","W79Cf8oPW4HSWP4","qw1VDw50CW","WO/cHhFcGCkqlSoLWOtcMmk+","vt7dSYrfoCkoWQy","xJPIwmoMWRXtCmk0W6a","b8kMWOWromk4qSo9zaG","W53cVrlcTSo2WPq/ga","emoYpfKOhsSbx8k2","yMv0u3bVDfrV","W4ayW6xdU8kz","WQrNv8otWOqY","wZ9Usmo8","W44jWO1wkSkohmkaWOHh","W78hW6hcMCk2WQBcNCo0bajOW5biW6K","WRGnW5xdVSouqCkr","ywXHBMnL","WRFcTSoxdmk/W5OKWPVdMIG","WO/cJYZcS3m","mta1ntb5BfjUsg0","WOtcVmolWQSq","qCkJFmoPF8oBWRtdVSkNBYSG","zMnlB2S","W4hcUZldKmk/iW","DMfSDwvZ","iJ3dPCo6W4y","W410W4esf8oF","B3vUDhm","DISWxSo8","mJe4mZe4nZzlDLHrDLi","eSk/WRJcTSo9WQL7gCo7bG","WQBdPftcSJ5FwhBcPNm","qrJdPSkK","u0DqWQTY","W58eW6/dSSkOySoM","vZjzxSo/WRXCCmk1W7a","WOu6W50pwG","B25LEujLDa","yM9UDxnuB01HAq","BgfUy2vuB1jLCa","otrjD3H4EuO","WQxdHvtcVHe","tw92zujLDenVzq","WQuUWPDKiSoRjq","yMfSyw5Jzuf2yq","s8owff0bnJ4","trKvw8ocqaZcUxddQG","zMzPy2LLBNrszq","WR7dU8kjWQtdQSo0WRG","kCkJWOBcMCoq","l8oweWBdR8o3W5JcGW","WPddNCo7","AxneCMfNsw5qCG","W77cOIziWRBdPIRdJhxdOa","ndy5ndu4ne56qNHXqG","yMv0CW","W5KMkMjjW4LCWPZcNxS","DmoOnSkJpW5snKPb","vmo1WPT2WOW","W6hcJCkMWPRcGW","WQu6W50yw8o2WOKV","WORcQcZcLfBcSsK","zezMB3a","WQacW4NdK8oWwCkUW5pdGq4","ngT+WO/dKCkD","WO7dSK1rW6JcMZlcI2ZcOa","yLPhWOzYzgRcNCoG","AgLW","WQfzWOddJSoKW7/dTSk5lGS","W4WwpxXA","WP/dPNhcLSo9WPmEemk8","y2XPzw50uhjLCW","zMX5rMvLt25czq","cdNdLCks","ndzkWQaxnvK","BCoHWR5WWQRcLG","qWxdPSkGWQK","z0flv0e","yMXLzfjLyxnVBG","yMfSyw5Jzq","sCkKD8oOC8kyWRpdOSkdrXO","WR0pW5ddSSoWBSkvW4RdNG","WQddP1asW6/cO3xdGLRdPx/dT8kX","y3JcV8k5WOlcS8kEWPTOyX/cHSk+","W7VcIx5+DhpcH8ks","W5b/W6utcSoEpq","twf4qMv0u3bVDa","AbKvvSogqHdcO1BdMa","W6TLW6JdPhxdSdhdGd0C","WPOMW6aAwCo2WPSOWRLU","qMv0DgLUz1jLCW","y2fSy3vSyxrLvq","hSkqWPCgcCk4vCo7sXm","DxbKyxrLvg8","y2XPzw50qMv0qW","W5RdUWdcSMRcLIXK","B0XotKm","WOtcPqRcMeNcUJTBW5Pp","B25szxbLyxrtDq","WRpcSCo/WOKZWRi6WRCLWPu","W4C0zKtdR8o2","lZPnWPyDm1m","iG4gW4iSjXRcJCoXbSkuC8of","oCoVlwGw","yMfSyw5JzvrVDa","vwLPr3G","y33cVCk6WO3dGCoOWRb5sGi","FSoNWQTQWQRcLJS","W7tdO8k0W5vZW7DRWRydWPjRWRpdRq","W4KTAf3dG8oNh8kCW4Ga","AaVcHmkzkG","q2HPCa","WPrNtG","W5NcKmklWOZcRW","DtJcUSkWeW","o8oGftJdVW","W4xcGwi","WPyRW5CmwG","W5C4df3dVJK+","W7TLW6JdON4","Duv6zwe","W57cTYi","W5zIW6qtgCowbSodWQhdSG","WQNdQfa","z2v0qMv0u3bVDa","rbjBEmoQW43dNZKbaG","W5q5lG","renTqwS","zZyQW5xdH8kQlfBdRd8","W4TCf8o9W4n8","mZfRWReiiKf3j8kj","W48ro1vmW4vCWRpcGhO","qMv0q29LzMzPyW","AxnfBM91z2Hcyq","vMfSDwu","W756W4NdI3q","DrBdVCkXWRy","W7PMW67dTq","W5ykFfldOSoNgmkC","W5G+WPXHl8kcha","AxnczxrZt3bLBG","mZbLDMzRteK","B8oOm8k4ga","BCoRWRb3","W4xcVZRdJmk4j8kCW7O","Bg9N","WRhdJCk6cq","CgLKELO","W5K3WOfxmCkzkSkmWPnQ","WPdcPmoQWQew","WRhcTCoOWR81WQuTWOe","xbNdRmkPWPJcHSoZ","W4TBW4CwnG","W4O5jLS","W78EW6ldRSky","nJqWvhLUt292","WQtdSLpcVdrm","WQewW5q","CSk1WPWyifddGCkS","mJe1nhvswMjMrq","W6SMjLVdVW","yvbfwNa","W6LpeSoRW5jMWPtcPa","yYhdNCkKWPm","mJy1ndi2mhn3BfbtyW","W6dcHmk/WPZcH8oIoNFcH34","W5b/W6qodCoti8oiWQldTq","CgfKu3rHCNq","AxLituO","WONdQfv+W7BcLt3cPwZcLG","xbNdMCk8WRVcGmoIWRm2WPG","CmoXWRf3WRy"];return(T=function(){return x})()}function h(x,o){const c=T();return h=function(o,L){let T=c[o-=132];void 0===h.rMUPWF&&(h.zvdGPS=function(x){const o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let c="",L="";for(let L,T,h=0,A=0;T=x.charAt(A++);~T&&(L=h%4?64*L+T:T,h++%4)?c+=String.fromCharCode(255&L>>(-2*h&6)):0)T=o.indexOf(T);for(let x=0,o=c.length;x<o;x++)L+="%"+("00"+c.charCodeAt(x).toString(16)).slice(-2);return decodeURIComponent(L)},x=arguments,h.rMUPWF=!0);const A=o+c[0],E=x[A];return E?T=E:(T=h.zvdGPS(T),x[A]=T),T},h(x,o)}(function(x,o){const c=658,T=243,A="AM0V",E="]C20",H=429,N=728,Q="ciiv",I=247,k="FbT2",_=L,X=h,r=x();for(;1;)try{if(-parseInt(X(181))/(5874+-91*-29+-8512)*(-parseInt(X(160))/(3199+-4490+1*1293))+-parseInt(X(c))/(-7773+-200*23+728*17)+parseInt(_(T,A))/(-731*-3+-9087+-6898*-1)+-parseInt(_(519,E))/(-9794+1*6026+-11*-343)*(-parseInt(_(H,"DV#f"))/(-371+-5532+5909))+-parseInt(_(N,Q))/(9820+-9623+-19*10)+-parseInt(X(195))/(3208*-2+-35*-20+5724)+-parseInt(_(I,k))/(3914+3*-677+-1*1874)*(-parseInt(X(296))/(-178*-8+-652*2+-110))===o)break;r["push"](r["shift"]())}catch(x){r["push"](r["shift"]())}})(T,-679052+-166995*-3+-17813*-31);{const A={};function E(x,o,c){const T=554,A=564,E=643,H=398,N="MHg2",Q="yptW",I=260,k=261,_=h,X=L,r={mAQYJ:function(x,o){return x+o},VXnOT:function(x,o){return x&o},AAeux:function(x,o,c){return x(o,c)},TlNzZ:function(x,o){return x*o},klEQo:function(x,o){return x<o},gAKWA:function(x,o){return x+o},dFfop:function(x,o){return x^o},yWQIW:function(x,o,c){return x(o,c)},uEzea:function(x,o){return x+o},PehhG:function(x,o,c){return x(o,c)}};let y=2668+8627+-11295,v="";const B=r[X(738,"rdXh")](r[X(634,"MMcY")](20*-1132+1*-84897+1492*116,r[_(564)](parseInt,o,3987+-8582*1+11*421))[_(414)](-7322+2017+5321)[X(535,"WD5J")](-3313+-21*359+236*46,"0"),Math[X(612,"MHg2")](r[X(723,"lFGl")](-1056+-1007*-7+-5893,c))[_(414)](6493+-8148+-557*-3)[_(308)](6*1414+1*5609+1*-14083,"0")),Y=x[_(644)](-(-2187*-1+-8934+6761));for(let x=-8480+-43*67+-7*-1623;r[_(T)](x,-2443+-7708+10165);x+=-3593*-2+-4*-2481+14*-1222){const o=r[_(A)](parseInt,B[X(E,"FbT2")](x,r[_(218)](x,-27*141+-3*2647+11750)),1*1145+-5686+4557);y^=o,v+=r[X(H,N)](r[X(169,Q)](parseInt,Y[X(I,"ssa2")](x,r[_(k)](x,9367+8336*-1+-1029)),-7841+-1*-2194+5663),o)[_(414)](1*6789+1*3835+-10608)[X(291,"lFGl")](9193+-5*-281+-12*883,"0")}return v=r[X(255,"9%z2")](r[_(203)](r[X(497,")]Fm")](parseInt,x[X(594,"SygB")](-(-5879+-6858+12753),-(-1*1109+7*1412+1*-8761)),-1*5378+-7703+13097*1),r[_(596)](-9198+-364*-1+-61*-149,y))[X(148,"SygB")](2*-4357+4*-1511+14774)[_(308)](6535+3*1019+-1*9590,"0"),v),v}A["k"]=()=>E,c["d"](o,A),c(239+-1*111949+443907)}},855276:(x,o,c)=>{c.d(o,{BQ:()=>T.UH,Dc:()=>I.I,Dr:()=>E.w,G6:()=>Q.h8,S3:()=>T.S3,YY:()=>L.N,h2:()=>T.h2,he:()=>h.uu,kw:()=>h.vc,pj:()=>h.Qm,xD:()=>H.U,yQ:()=>N.x,z6:()=>A.G});var L=c(924740),T=c(977638),h=c(999289),A=c(700367),E=c(74329),H=c(20629),N=c(572532),Q=c(676700),I=c(800355)},924740:(x,o,c)=>{c.d(o,{N:()=>Q});var L=c(64922),T=c(377810),h=c(470800),A=c(965460),E=c(113364),H=c(329232),N=c(20629);function Q({roadItems:x,type:o,columnCount:c,rowCount:Q,probes:I,probesWinnerType:k,scorecardTheme:_,isInterlacedMode:X=!1,isLive:r,emptyIconShape:y=!1,probeExtraShapes:v,patternScheme:B,multiplierThemeResolver:Y,scorecardThemesOverrides:F,skipFirstLastLines:t,registerProbeRef:m,pulsingAnimationDelay:C,isProbePulsing:V,registerLastRoadRef:i,currentWinnerType:M}){const Z=T.useMemo((()=>{const L=H.W(c*(X?2:1),o,x,I,k,v,B,C,V,M);return N.U(L,r,_,Y,m,i)}),[c,C,X,o,x,I,k,v,r,_,B,Y,m,V,i]);return L.jsx(h.V,{gridIcons:Z,scorecardTheme:_,columnCount:c,rowCount:Q,isInterlacedMode:X,scorecardThemesOverrides:F,skipFirstLastLines:t,IconShapeComponent:y||_!==A.a.BlackDot?void 0:E.p})}},977638:(x,o,c)=>{c.d(o,{UH:()=>C,S3:()=>F,h2:()=>t});var L=c(64922),T=c(377810);const h="\n    M265 759 c-201 -65 -310 -283 -245 -490 64 -205 283 -315 491 -249\n    205 64 315 283 249 491 -65 205 -286 316 -495 248z\n",A="\n    M308 768 c-27 -5 -48 -14 -48 -18 0 -4 7 -24 15 -43 56 -135 -71\n    -282 -215 -249 -25 6 -47 8 -50 5 -3 -2 -5 -40 -4 -84 1 -69 5 -87 37 -152 44\n    -90 103 -147 195 -190 59 -27 78 -31 152 -31 74 0 93 4 152 31 92 43 151 100\n    195 191 34 69 37 81 37 162 0 81 -3 93 -37 162 -44 89 -103 148 -190 188 -71\n    34 -166 45 -239 28z\n",E="\n    M312 770 c-64 -13 -157 -67 -203 -117 -22 -24 -55 -74 -72 -111 -27\n    -59 -31 -78 -31 -152 0 -74 4 -93 31 -152 78 -167 244 -259 416 -228 37 6 67\n    15 67 20 0 4 -7 24 -15 43 -56 135 71 282 215 249 25 -6 47 -8 50 -5 3 2 5 40\n    4 84 -1 69 -5 87 -37 152 -44 88 -103 147 -190 187 -69 33 -165 45 -235 30z\n",H="\n    M290 769 c-19 -6 -36 -12 -38 -13 -1 -2 5 -19 13 -39 48 -114 -25\n    -243 -144 -255 -27 -2 -63 0 -80 6 -36 13 -41 4 -41 -78 0 -212 175 -390 383\n    -390 54 0 147 17 147 27 0 2 -8 15 -17 30 -23 35 -23 118 1 167 12 23 38 50\n    65 68 40 25 54 29 101 25 30 -2 62 -7 71 -11 14 -6 18 1 24 42 21 156 -80 329\n    -232 399 -65 30 -190 41 -253 22z\n",N="\n    M275 764 c-103 -37 -194 -110 -228 -184 -81 -174 -56 -342 67 -466\n    154 -153 398 -153 552 0 123 124 148 292 67 466 -21 44 -109 132 -153 153\n    -105 48 -221 60 -305 31z m179 -123 c3 -4 19 -11 36 -15 40 -8 128 -96 136\n    -136 4 -17 11 -33 15 -36 5 -3 9 -32 9 -64 0 -32 -4 -61 -9 -64 -4 -3 -11 -19\n    -15 -36 -8 -40 -96 -128 -136 -136 -17 -4 -33 -11 -36 -15 -3 -5 -32 -9 -64\n    -9 -32 0 -61 4 -64 9 -3 4 -19 11 -36 15 -40 8 -128 96 -136 136 -4 17 -11 33\n    -15 36 -12 7 -12 121 0 128 4 3 11 19 15 36 8 40 96 128 136 136 17 4 33 11\n    36 15 3 5 32 9 64 9 32 0 61 -4 64 -9z\n",Q="\n    M288 767 c-28 -11 -38 -40 -18 -52 6 -3 10 -22 10 -41 0 -37 22 -56\n    43 -35 13 13 123 15 131 2 3 -4 19 -11 36 -15 40 -8 128 -96 136 -136 4 -17\n    11 -33 15 -36 5 -3 9 -32 9 -64 0 -32 -4 -61 -9 -64 -4 -3 -11 -19 -15 -36 -8\n    -40 -96 -128 -136 -136 -17 -4 -33 -11 -36 -15 -7 -12 -121 -12 -128 0 -3 4\n    -19 11 -36 15 -38 7 -127 94 -136 133 -4 15 -11 33 -16 40 -5 6 -8 37 -7 67 1\n    31 1 57 -2 60 -2 2 -32 6 -67 10 l-62 7 0 -73 c0 -115 37 -206 114 -284 154\n    -153 398 -153 552 0 153 154 153 398 0 552 -52 52 -84 71 -166 98 -51 18 -171\n    19 -212 3z\n",I="\n    M275 764 c-78 -28 -110 -48 -161 -98 -123 -124 -148 -292 -67 -466\n    21 -44 109 -132 153 -153 102 -47 215 -61 287 -35 32 12 45 40 23 53 -5 3 -10\n    22 -10 41 0 37 -22 56 -43 35 -13 -13 -123 -15 -131 -2 -3 4 -19 11 -36 15\n    -40 8 -128 96 -136 136 -4 17 -11 33 -15 36 -12 7 -12 121 0 128 4 3 11 19 15\n    36 8 40 96 128 136 136 17 4 33 11 36 15 3 5 32 9 64 9 32 0 61 -4 64 -9 3 -4\n    19 -11 36 -15 38 -7 127 -94 136 -133 4 -15 11 -33 16 -40 5 -6 8 -37 7 -67\n    -1 -31 -1 -57 2 -60 2 -2 32 -6 67 -10 l62 -7 0 73 c0 115 -37 206 -114 284\n    -52 52 -84 71 -166 98 -55 19 -171 19 -225 0z\n",k="\n    M283 767 c-36 -12 -42 -27 -18 -47 9 -7 15 -29 15 -51 0 -32 4 -39\n    19 -39 11 0 23 5 26 10 8 12 122 13 129 1 3 -4 19 -11 36 -15 38 -7 127 -94\n    136 -133 4 -15 11 -33 16 -40 5 -6 8 -38 7 -70 l-3 -58 58 -8 c32 -5 61 -5 65\n    -2 10 11 6 137 -7 182 -34 121 -137 227 -259 266 -57 19 -169 20 -220 4z\n",_="\n    M0 398 c1 -187 107 -329 291 -387 47 -15 154 -14 196 1 32 12 43 31\n    24 43 -6 3 -13 26 -17 50 -6 43 -24 59 -39 35 -8 -12 -122 -13 -129 -1 -3 4\n    -19 11 -36 15 -38 7 -127 94 -136 133 -4 15 -11 33 -16 40 -5 6 -8 37 -7 67 1\n    31 1 57 -2 60 -2 2 -32 6 -66 10 l-63 7 0 -73z\n";var X=c(471065),r=c(965460),y=c(999289);function v(x,o){if(o)switch(x){case y.Qm.Player:return"#2E83FF";case y.Qm.Banker:return"#EC2024";case y.Qm.Tie:return"#159252";case y.Qm.Legend:return"#9B9B9B";default:return"transparent"}switch(x){case y.Qm.Player:return"#185CC6";case y.Qm.Banker:return"#C52123";case y.Qm.Tie:return"#51A548";case y.Qm.Legend:return"#a7a9ac";default:return"transparent"}}function B(x,o,c){return{path:x,color:v(o,c)}}var Y=c(32991);const F={colors:["lightningCircleGradient","#956723","#c69844","#f4e584"],faceliftColors:["lightningCircleGradientFaceLift","#dcb51b","#ffffff","#c8a311"]},t={colors:["redCircleGradient","#953423","#c66744","#f4ab84"],faceliftColors:["redCircleGradientFaceLift","#dc7c1b","#ffffff","#c85d11"]},m=[h,N,I,Q,E,A,H,_,k],C=({lightning:x,multiplier:o,extraShapes:c,roadType:t,winnerType:C,isLive:V,animate:i,additionalType:M,pulsingAnimationDelay:Z=0,isPulsing:S=!1,isHidden:u=!1,multiplierThemeResolver:d,theme:O,symbol:j,registerRef:e})=>{const q=T.useRef(null);T.useLayoutEffect((()=>{if(e)return e(t,q.current),()=>{e(t,null)}}),[e,t,C]);const f=[],U=[],s=[],D=x||o&&o>0;if(c&&f.push(...c),(t===X.t.Bead||t===X.t.Small||t===X.t.Big&&D)&&(U[0]=B(h,C,V)),t===X.t.Bead||t===X.t.Big&&D)switch(M){case y.uu.Banker:U[0]=B(E,C,V);break;case y.uu.Player:U[0]=B(A,C,V);break;case y.uu.BankerPlayer:case y.uu.TieBankerPlayer:U[0]=B(H,C,V)}if((t===X.t.Big&&!D||t===X.t.BigEye)&&(U[0]=B(N,C,V)),t===X.t.Bead&&D){const x=(d&&o?d(o):F).faceliftColors;switch(s.push(L.jsxs("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:x[0],children:[L.jsx("stop",{stopColor:x[1],offset:"0%"}),L.jsx("stop",{stopColor:x[2],offset:"46.0800918%"}),L.jsx("stop",{stopColor:x[3],offset:"100%"})]},x[0])),U[1]={path:"M40,390a350,350 0 1,0 700,0a350,350 0 1,0 -700,0",color:"none",stroke:`url(#${x[0]})`,strokeWidth:80},M){case y.uu.Banker:U[1].strokeDasharray="1175, 350";break;case y.uu.Player:U[1].strokeDasharray="75, 350, 1800";break;case y.uu.BankerPlayer:case y.uu.TieBankerPlayer:U[1].strokeDasharray="80, 340, 760, 340, 730"}}if(t===X.t.Big&&!D)switch(M){case y.uu.Banker:case y.uu.TieBanker:U[0]=B(I,C,V);break;case y.uu.Player:case y.uu.TiePlayer:U[0]=B(Q,C,V);break;case y.uu.BankerPlayer:case y.uu.TieBankerPlayer:U[0]=B(k,C,V),U[1]=B(_,C,V)}if(t===X.t.Big&&D){const x=(d&&o?d(o):F).colors;U.forEach((o=>{m.includes(o.path)&&(o.color=`url(#${x[0]})`)})),s.push(L.jsxs("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:x[0],children:[L.jsx("stop",{stopColor:x[1],offset:"0%"}),L.jsx("stop",{stopColor:x[2],offset:"56%"}),L.jsx("stop",{stopColor:x[3],offset:"100%"})]},x[0]))}f.push(L.jsx("g",{transform:"translate(0,78) scale(0.1,-0.1)",fill:v(C,V),stroke:"none","data-type":"roadItemColor",children:U.map(((x,o)=>L.jsx("path",{d:x.path,fill:x.color,stroke:x.stroke,strokeWidth:x.strokeWidth,strokeDasharray:x.strokeDasharray},o)))},"BankerPlayer")),t===X.t.Big&&D&&f.push(L.jsx("circle",{"data-type":"lightning-circle",fill:v(C,V),cx:"39",cy:"39",r:"22"},"lightning-circle")),(t===X.t.Cockroach||t===X.t.Big&&[y.uu.TieBanker,y.uu.TiePlayer,y.uu.TieBankerPlayer,y.uu.Tie].some((x=>x===M)))&&f.push(L.jsx("g",{transform:"translate(0,78) scale(0.1,-0.1)",fill:v(C,V),stroke:"none","data-type":"roadItemColor",children:L.jsx("path",{d:"\n    M260 360 l-255 -255 60 -60 60 -60 410 410 255 255 -60 60 -60 60\n",fill:v(t===X.t.Cockroach?C:y.Qm.Tie,V)},"SLASH")},"BankerPlayerSlash")),[y.uu.Banker,y.uu.TieBanker,y.uu.BankerPlayer,y.uu.TieBankerPlayer].some((x=>x===M))&&f.push(L.jsx("circle",{cx:"67",cy:"63",r:"10",fill:v(y.Qm.Banker,V)},"circle-banker")),[y.uu.Player,y.uu.TiePlayer,y.uu.BankerPlayer,y.uu.TieBankerPlayer].some((x=>x===M))&&f.push(L.jsx("circle",{cx:"10",cy:"14",r:"10",fill:v(y.Qm.Player,V)},"circle-player")),(t===X.t.Bead||t===X.t.Big&&void 0!==j)&&f.push(L.jsx("text",{x:"50%",y:"75%",textAnchor:"middle",fontSize:55,fill:t===X.t.Bead||O===r.a.BlackDot?"white":"black",children:j},"symbol"));const $=[Y.A.svg],a={};u&&$.push(Y.A.isHidden,"isHidden"),i&&$.push(Y.A.animate,"animate"),S&&($.push(Y.A.pulsing,"pulsing"),Z&&(a.animationDelay=`${Z}s`));const z=void 0!==M?` ${y.uu[M]}`:"",l=`${y.Qm[C]}${z}`;return L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:$.join(" "),viewBox:"0 0 80 80","data-type":"roadItem",name:l,ref:e?q:null,children:[L.jsx("defs",{children:s}),L.jsx("g",{style:a,children:L.jsx("svg",{width:"68px",height:"68px",x:"6",y:"6",viewBox:"0 0 80 80",children:f})})]})}},999289:(x,o,c)=>{var L,T,h;c.d(o,{Qm:()=>L,uu:()=>T,vc:()=>h}),function(x){x.Player="Player",x.Banker="Banker",x.Tie="Tie",x.Legend="Legend",x.None="None"}(L||(L={})),function(x){x[x.Banker=0]="Banker",x[x.Player=1]="Player",x[x.BankerPlayer=2]="BankerPlayer",x[x.TieBanker=3]="TieBanker",x[x.TiePlayer=4]="TiePlayer",x[x.TieBankerPlayer=5]="TieBankerPlayer",x[x.Tie=6]="Tie"}(T||(T={})),function(x){x.Blue="Blue",x.Red="Red",x.None="None",x.Green="Green"}(h||(h={}))},572532:(x,o,c)=>{c.d(o,{x:()=>T});var L=c(999289);function T(x,o=!1){return x.reduce(((x,c)=>{var T,h,A,E;const H=x.length,N=function(x){switch(x.winner){case L.Qm.Banker:return L.vc.Red;case L.Qm.Player:return L.vc.Blue;default:return L.vc.None}}(c),Q=x[0],I=c.playerPair||c.bankerPair?{playerPair:c.playerPair,bankerPair:c.bankerPair}:void 0;if(N===L.vc.None&&H>0)x[H-1].ties+=1,x[H-1].pairsOrder&&I&&o&&(x[H-1].pairsOrder=[...null!==(T=x[H-1].pairsOrder)&&void 0!==T?T:[],I]),Q.color===L.vc.None?x[0]={...x[0],bankerPair:Q.bankerPair||c.bankerPair,playerPair:Q.playerPair||c.playerPair,natural:Q.natural||c.natural,lightning:Q.lightning||c.lightning,multiplier:Q.multiplier||c.multiplier,row:0,col:0,pairsOrder:o&&I?[...null!==(h=x[0].pairsOrder)&&void 0!==h?h:[],I]:void 0}:(x[H-1].bankerPair=x[H-1].bankerPair||c.bankerPair,x[H-1].playerPair=x[H-1].playerPair||c.playerPair,x[H-1].lightning=x[H-1].lightning||c.lightning,x[H-1].multiplier=x[H-1].multiplier||c.multiplier,x[H-1].pairsOrder=o&&I?[...null!==(A=x[H-1].pairsOrder)&&void 0!==A?A:[],I]:void 0);else if(Q&&Q.color===L.vc.None)x[0]={ties:Q.ties,playerPair:c.playerPair||Q.playerPair,bankerPair:c.bankerPair||Q.bankerPair,natural:c.natural,lightning:c.lightning||Q.lightning,multiplier:c.multiplier||Q.multiplier,color:N,row:0,col:0,pairsOrder:o&&I?[...null!==(E=x[0].pairsOrder)&&void 0!==E?E:[],I]:void 0};else{const T={ties:N===L.vc.None?1:0,playerPair:c.playerPair,bankerPair:c.bankerPair,color:N,natural:c.natural,lightning:c.lightning,multiplier:c.multiplier,row:0,col:0,pairsOrder:o&&I?[I]:void 0};x.push(T)}return x}),[])}},700367:(x,o,c)=>{c.d(o,{G:()=>T});var L=c(999289);function T(x,o,c){return x&&o?c?L.uu.TieBankerPlayer:L.uu.BankerPlayer:x?c?L.uu.TieBanker:L.uu.Banker:o?c?L.uu.TiePlayer:L.uu.Player:c?L.uu.Tie:void 0}},800355:(x,o,c)=>{c.d(o,{I:()=>T});var L=c(999289);function T(x,o){const c=function(x){let o;return x.reduce(((x,c)=>(0===x.length||c.color!==o?x=x.concat([[c]]):x[x.length-1]=x[x.length-1].concat(c),o=c.color,x)),[])}(x);return c.reduce(((x,T,h)=>(T.forEach(((T,A)=>{if(h<o)return;if(h===o&&0===A)return;if(T.color===L.vc.None)return;let E;E=0===A?c[h-1].length===c[h-(o+1)].length?L.vc.Red:L.vc.Blue:!c[h-o][A-1]==!c[h-o][A]?L.vc.Red:L.vc.Blue;const H={color:E,col:0,row:0};x.push(H)})),x)),[])}},74329:(x,o,c)=>{c.d(o,{w:()=>T});var L=c(999289);function T(x){switch(x){case"Red":return L.Qm.Banker;case"Blue":return L.Qm.Player;case"Green":return L.Qm.Tie;case"None":return L.Qm.None;default:return L.Qm.Legend}}},20629:(x,o,c)=>{c.d(o,{U:()=>h});var L=c(64922),T=c(977638);function h(x,o,c,h,A,E){return x?x.map(((H,N)=>({x:H.x||0,y:H.y||0,withDefaultIcon:(A||E)&&H.props.withDefaultIcon,jsx:L.jsx(T.UH,{...H.props,theme:c,pulsingAnimationDelay:H.props.pulsingAnimationDelay,registerRef:H.props.isPulsing?A:E&&N===x.length-1?E:void 0,isLive:o,multiplierThemeResolver:h})}))):[]}},329232:(x,o,c)=>{c.d(o,{W:()=>A});var L=c(999289);const T=(x,o,c)=>({...x[L.Qm[o]][c],isProbe:!0});var h=c(841026);function A(x,o,c,L,A,E,H,N,Q,I){const k=o.charAt(0).toLowerCase()+o.slice(1),_=[...c||[]],X=x-1-4;if(L&&void 0!==A){const x=T(L,A,k);x.pulsingAnimationDelay=N,E&&(x.extraShapes=E),_.push(x)}const r=_.map((x=>x.col)),y=Math.max(...r),v=Math.floor(X-y>0?0:y-X);return _.filter((x=>!v||x.col>v-1)).map((x=>{const c=x.col-v,L=x.row,T=!!(null==H?void 0:H.find((x=>x.x===c&&x.y===L))),A=h.j(o,x,T,Q,I);return{x:c,y:L,props:A}}))}},841026:(x,o,c)=>{c.d(o,{j:()=>E});var L=c(471065),T=c(999289),h=c(700367),A=c(74329);function E(x,o,c,E,H){var N,Q;const I=o.isHidden&&!(H===T.Qm.Tie&&x!==L.t.Big),k=o.ties||0,_=I&&H===T.Qm.Tie&&1===k,X=(null==o?void 0:o.pairsOrder)?o.pairsOrder.pop():void 0,r=I&&(null==X?void 0:X.playerPair)&&!(null===(N=null==o?void 0:o.pairsOrder)||void 0===N?void 0:N.find((({playerPair:x})=>!!x))),y=I&&(null==X?void 0:X.bankerPair)&&!(null===(Q=null==o?void 0:o.pairsOrder)||void 0===Q?void 0:Q.find((({bankerPair:x})=>!!x))),v={roadType:x,winnerType:I&&H!==T.Qm.Tie?T.Qm.None:A.w(o.color),additionalType:h.G(!y&&o.bankerPair,!r&&o.playerPair,_?0:k),animate:o.isProbe&&!E,isPulsing:o.isProbe&&E,withDefaultIcon:o.isProbe&&E||I||_,isHidden:I&&!k,pulsingAnimationDelay:o.pulsingAnimationDelay,lightning:o.lightning,multiplier:o.multiplier,extraShapes:c?void 0:o.extraShapes},B=I&&H===T.Qm.Tie&&k>1?k-1:k;return(B>1||v.winnerType===T.Qm.Tie)&&(v.symbol=B),v}},676700:(x,o,c)=>{c.d(o,{h8:()=>h});const L=208;function T(x,o){return x*L+o}function h(x){let o=0,c=0,L=0,h=null,A=!1;const E=(x,o,c)=>(x.row=o,x.col=c,x),H=x.reduce(((x,T)=>{if(0===x.length)return L++,x.concat(E(T,0,0));const H=x[x.length-1];if(T.color===H.color){if(L++,!h){const L=x.find((x=>x.col===o&&x.row===c+1));(5===c||L)&&(h=o,A=!0)}A?o+=1:c+=1}else{if(A=!1,null!==h)for(0!==c&&(o=h),h=null;x.find((x=>0===x.row&&x.col===o));)o+=1;else o+=1;L=1,c=0}return x.push(E(T,c,o)),x}),[]);return{list:H,weight:T(L,H.length)}}},386351:(x,o,c)=>{c.d(o,{EN:()=>I,ty:()=>Q,j9:()=>N});var L=c(64922),T=c(715907),h=c(377810),A=c(532836);const E="icon--136ed",H=h.memo((({children:x,...o})=>L.jsx("svg",{className:E,fill:"none",viewBox:"0 0 24 24",...o,xmlns:"http://www.w3.org/2000/svg",children:L.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M12.0042 6.35163C10.8048 6.35163 9.63338 5.98849 8.64424 5.31C7.25248 5.35955 5.93717 5.95901 4.98674 6.97692C4.03631 7.99483 3.52835 9.34811 3.57424 10.74C3.56892 12.128 4.11453 13.4614 5.09131 14.4476C6.06809 15.4337 7.39624 15.9921 8.78424 16H15.2242C16.6114 15.9894 17.938 15.4303 18.9142 14.4447C19.8905 13.4591 20.4369 12.1272 20.4342 10.74C20.4801 9.34811 19.9722 7.99483 19.0217 6.97692C18.0713 5.95901 16.756 5.35955 15.3642 5.31C14.3751 5.98849 13.2037 6.35163 12.0042 6.35163ZM15.5742 17.31H8.43424V17.33C7.57978 17.3209 6.73551 17.1433 5.94973 16.8076C5.16395 16.4718 4.45209 15.9844 3.85487 15.3733C3.25765 14.7621 2.78679 14.0392 2.46924 13.2459C2.15169 12.4526 1.99368 11.6044 2.00424 10.75C1.94204 9.02551 2.56601 7.34668 3.73942 6.08143C4.91282 4.81618 6.53995 4.06769 8.26424 4H8.44424V4.48C9.49614 5.18892 10.7358 5.56764 12.0042 5.56764C13.2727 5.56764 14.5123 5.18892 15.5642 4.48V4H15.7442C17.4685 4.07286 19.0941 4.8243 20.2667 6.09056C21.4393 7.35681 22.0638 9.03523 22.0042 10.76C22.0176 12.4805 21.3482 14.1361 20.1429 15.3639C18.9376 16.5917 17.2947 17.2915 15.5742 17.31ZM19.944 16.9077C18.7586 18.019 17.199 18.6444 15.5742 18.66H8.43424C6.80292 18.6566 5.2333 18.0361 4.04059 16.9231C2.84788 15.8102 2.1204 14.2872 2.00424 12.66V13.42C1.98556 15.1449 2.65223 16.8067 3.85783 18.0404C5.06343 19.2741 6.70939 19.9789 8.43424 20H15.5742C17.2956 19.971 18.9354 19.2614 20.1348 18.0264C21.3343 16.7913 21.9956 15.1315 21.9742 13.41V12.66C21.854 14.2804 21.1293 15.7964 19.944 16.9077Z"})})));H.displayName="MultiplaySVG";const N=A.m(H);var Q;!function(x){x.Game="close-button",x.Lobby="multiplay-lobby-button"}(Q||(Q={}));const I=({type:x="secondary",...o})=>L.jsx(T.g,{type:x,iconComponent:L.jsx(N,{}),...o})},113364:(x,o,c)=>{c.d(o,{p:()=>h});var L=c(64922),T=c(32991);const h=()=>L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:T.A.svg,viewBox:"0 0 80 80","data-type":"emptyRoadItem",children:L.jsx("svg",{height:"100",width:"100",children:L.jsx("circle",{cx:"40",cy:"40",r:"8",fill:"rgba(255,255,255,0.15)"})})})},470800:(x,o,c)=>{c.d(o,{V:()=>H});var L=c(64922),T=c(266600),h=c(377810),A=c(239956),E=c(965460);const H=h.memo((({scorecardTheme:x,columnCount:o,rowCount:c,isInterlacedMode:T,gridIcons:h,IconShapeComponent:H,defaultIconId:N,scorecardThemesOverrides:Q,skipFirstLastLines:I})=>{const k=E.Aw(x,Q);return L.jsx(A.gf,{columnCount:o*(T?2:1),rowCount:c*(T?2:1),icons:h,isInterlacedMode:T,strokeWidth:T?.1:.05,...k,IconShapeComponent:H,defaultIconId:N,skipFirstLastLines:I})}),T.A)},782437:(x,o,c)=>{c.d(o,{G:()=>T});var L=c(64922);const T=c(377810).memo((({rowCount:x,columnCount:o,isInterlacedMode:c,strokeWidth:T,stroke:h,redesigned:A,skipFirstLastLines:E})=>{const H=[],N=T/2;for(let Q=0;Q<=x;Q++){if(c&&Q%2!=0)continue;const I=0===Q,k=Q===x;if((A||E)&&(I||k))continue;const _=I?N:k?-N:0;H.push(L.jsx("line",{x1:0,x2:o,y1:Q+_,y2:Q+_,stroke:h,style:{strokeWidth:T}},`h-${Q}`))}for(let Q=0;Q<=o;Q++){if(c&&Q%2!=0)continue;const I=0===Q,k=Q===o;if((A||E)&&(I||k))continue;const _=I?N:k?-N:0;H.push(L.jsx("line",{x1:Q+_,x2:Q+_,y1:0,y2:x,stroke:h,style:{strokeWidth:T}},`v-${Q}`))}return L.jsx(L.Fragment,{children:H})}))},239956:(x,o,c)=>{c.d(o,{gf:()=>X});var L=c(64922),T=c(699695),h=c(929468),A=c(377810);const E=A.memo((({column:x,row:o,iconId:c})=>L.jsx("use",{xlinkHref:`#${c}`,x,y:o})),((x,o)=>x.column===o.column&&x.row===o.row&&x.iconId===o.iconId)),H=A.memo((({rowCount:x,columnCount:o,IconShapeComponent:c,icons:T,defaultIconId:H})=>{const N=A.useRef(H||h.A()),Q=[];for(let c=0;c<x;c++)for(let x=0;x<o;x++)T.some((o=>o.x===x&&o.y===c))||Q.push(L.jsx(E,{column:x,row:c,iconId:N.current},`default-icon-usage-${x}-${c}-${N.current}`));return L.jsxs(L.Fragment,{children:[L.jsx("defs",{children:L.jsx("svg",{id:`${N.current}`,width:1,height:1,children:L.jsx(c,{})},`default-icon-shape-${N.current}`)}),Q]})}),((x,o)=>x.rowCount===o.rowCount&&x.columnCount===o.columnCount&&x.icons.length===o.icons.length&&x.defaultIconId===o.defaultIconId));var N=c(782437);const Q="svg--eb430",I="fitToWidth--3e2d4",k="fitToHeight--761b3";var _;!function(x){x[x.Height=0]="Height",x[x.Width=1]="Width"}(_||(_={}));const X=({fill:x="transparent",stroke:o="#000000",icons:c=[],strokeWidth:h=0,translate:A,size:E=1,isInterlacedMode:X=!1,skipFirstLastLines:r=!1,fitTo:y,onClick:v,columnCount:B,rowCount:Y,IconShapeComponent:F,defaultIconId:t,redesigned:m})=>{const C=B,V=Y,i=`0 0 ${C} ${V}`,M=null!=A?A:h,Z=[];for(const x of c){const{x:o,y:c,jsx:T,key:A=`icon-${x.x}-${x.y}`}=x;Z.push(L.jsx("svg",{width:E-h,height:E-h,x:o-(E-1)+M,y:c-(E-1)+M,"data-type":"coordinates","data-x":o,"data-y":c,children:T},A))}const S=T.A(Q,{[I]:y===_.Width,[k]:y===_.Height}),u=c.filter((x=>!x.withDefaultIcon));return L.jsxs("svg",{className:S,viewBox:i,onClick:v,children:[L.jsx("rect",{x:"0",y:"0",rx:m?"0.3":void 0,fill:x,width:C,height:V,stroke:m?o:void 0,strokeWidth:m?h:void 0}),F&&L.jsx(H,{rowCount:Y,columnCount:B,IconShapeComponent:F,icons:u,defaultIconId:t}),h&&L.jsx(N.G,{isInterlacedMode:X,skipFirstLastLines:r,rowCount:Y,columnCount:B,strokeWidth:h,stroke:o,redesigned:m}),Z]})}},786532:(x,o,c)=>{c.d(o,{gf:()=>L.gf});var L=c(239956)},106944:(x,o,c)=>{c.d(o,{Aw:()=>h.Aw,LH:()=>h.LH,V4:()=>T.V,a:()=>h.a,gf:()=>E.gf,p3:()=>L.p,tb:()=>A.t});var L=c(113364),T=c(470800),h=c(965460),A=c(471065),E=c(786532)},965460:(x,o,c)=>{var L;c.d(o,{Aw:()=>h,LH:()=>T,a:()=>L}),function(x){x.WhiteSolid="WhiteSolid",x.WhiteTransparent="WhiteTransparent",x.BlackTransparent="BlackTransparent",x.Transparent="Transparent",x.BlackDot="BlackDot"}(L||(L={}));const T={[L.WhiteSolid]:{fill:"#ffffff",stroke:"rgba(167, 169, 172, 0.5)",symbolColor:"#ffffff",background:"rgba(255, 255, 255, 0.97)"},[L.WhiteTransparent]:{fill:"transparent",stroke:"transparent",strokeWidth:0,symbolColor:"#ffffff"},[L.BlackTransparent]:{fill:"#1A1A1A",stroke:"#4A4A4A",symbolColor:"#ffffff"},[L.Transparent]:{fill:"#1A1A1A",stroke:"#4A4A4A",symbolColor:"#ffffff",predictionBackground:"transparent"},[L.BlackDot]:{fill:"transparent",stroke:"transparent",strokeWidth:0,symbolColor:"#ffffff",predictionBackground:"transparent",emptyIconColor:"rgba(255,255,255,0.15)",background:"rgba(255, 255, 255, 0.05)"}};function h(x,o={}){const c={...T,...o};return c[x]||c[L.WhiteSolid]}},471065:(x,o,c)=>{var L;c.d(o,{t:()=>L}),function(x){x.Bead="Bead",x.Big="Big",x.BigEye="BigEye",x.Small="Small",x.Cockroach="Cockroach"}(L||(L={}))},633918:(x,o,c)=>{c.d(o,{A:()=>T});var L=c(111100);const T=function(x){return"function"==typeof x?x:L.A}},639972:(x,o,c)=>{c.d(o,{A:()=>L});const L=function(x){return x&&x.length?x[0]:void 0}},447833:(x,o,c)=>{c.d(o,{A:()=>T});var L=c(609835);const T=function(x){return L.A(x)&&x!=+x}},504642:(x,o,c)=>{c.d(o,{A:()=>E});var L=c(192028),T=c(633918),h=c(510405),A=Math.min;const E=function(x,o){if((x=h.A(x))<1||x>9007199254740991)return[];var c=4294967295,E=A(x,4294967295);o=T.A(o),x-=4294967295;for(var H=L.A(E,o);++c<x;)o(c);return H}},929468:(x,o,c)=>{c.d(o,{A:()=>h});var L=c(957842),T=0;const h=function(x){var o=++T;return L.A(x)+o}}},E={};function H(x){var o=E[x];if(void 0!==o)return o.exports;var c=E[x]={id:x,loaded:!1,exports:{}};return A[x].call(c.exports,c,c.exports,H),c.loaded=!0,c.exports}H.m=A,x=[],H.O=(o,c,L,T)=>{if(!c){var h=1/0;for(Q=0;Q<x.length;Q++){for(var[c,L,T]=x[Q],A=!0,E=0;E<c.length;E++)(!1&T||h>=T)&&Object.keys(H.O).every((x=>H.O[x](c[E])))?c.splice(E--,1):(A=!1,T<h&&(h=T));if(A){x.splice(Q--,1);var N=L();void 0!==N&&(o=N)}}return o}T=T||0;for(var Q=x.length;Q>0&&x[Q-1][2]>T;Q--)x[Q]=x[Q-1];x[Q]=[c,L,T]},H.n=x=>{var o=x&&x.__esModule?()=>x.default:()=>x;return H.d(o,{a:o}),o},c=Object.getPrototypeOf?x=>Object.getPrototypeOf(x):x=>x.__proto__,H.t=function(x,L){if(1&L&&(x=this(x)),8&L)return x;if("object"==typeof x&&x){if(4&L&&x.__esModule)return x;if(16&L&&"function"==typeof x.then)return x}var T=Object.create(null);H.r(T);var h={};o=o||[null,c({}),c([]),c(c)];for(var A=2&L&&x;"object"==typeof A&&!~o.indexOf(A);A=c(A))Object.getOwnPropertyNames(A).forEach((o=>h[o]=()=>x[o]));return h.default=()=>x,H.d(T,h),T},H.d=(x,o)=>{for(var c in o)H.o(o,c)&&!H.o(x,c)&&Object.defineProperty(x,c,{enumerable:!0,get:o[c]})},H.f={},H.e=x=>Promise.all(Object.keys(H.f).reduce(((o,c)=>(H.f[c](x,o),o)),[])),H.u=x=>"js/"+({3474:"evo-promotions.SpinGiftsFrame",3863:"testTools",5463:"help.baccarat",17474:"evo-game.mobileChat",22421:"testTools.PixiDevToolsPlugin",24451:"baccarat.live.debug",24622:"evo-promotions.SpinGiftsWheelAnimation",30164:"game-client-history-round-info",36302:"evo-promotions.SpinGiftsCampaignRules",39340:"history.roundView",44806:"gameTestToolsPlugins",47290:"evo-promotions.SpinGiftsTermsConditions",50967:"help.common",54504:"evo-promotions.cashGifts",59760:"evo-game.chat",66703:"gameTestToolsSafeAreaPlugin",66885:"native-utilities",73375:"evo-promotions.spinGifts",73460:"evo-promotions.giftsWheel",74695:"help.baccarat.v2",77821:"evo-game.emojiMenu",80616:"video-lib-local",85687:"testTools.why-did-you-render"}[x]||x)+"."+{3474:"1a89cdcf",3863:"c68406f1",5463:"52825036",10306:"a97cff13",14291:"2f77c6ae",17474:"36703dd7",22421:"0fea869a",24451:"33cf75d2",24622:"c19aa584",27672:"21b8bdb0",30164:"81c32c92",32184:"a21bca64",36302:"63c3f631",37927:"b03e4e3d",39340:"87393490",42447:"0fe47cec",44806:"0741de9d",45444:"ef538133",47290:"25d266d1",50967:"2b6414a9",54504:"de8d33cf",59760:"c5c3f75e",66703:"d22f8b42",66885:"cf7c7b01",73375:"74edf8f6",73460:"b312a388",74695:"d63bc130",77821:"cadc9005",80616:"10095eb7",85687:"8dab9d33"}[x]+".js",H.miniCssF=x=>3863===x?"styles/testtools.c68406f1.css":36302===x?"styles/evopromoti.spingiftsc.63c3f631.css":47290===x?"styles/evopromoti.spingiftst.25d266d1.css":50967===x?"styles/help.common.2b6414a9.css":30164===x?"styles/gameclient.81c32c92.css":39340===x?"styles/history.roundview.87393490.css":17474===x?"styles/evogame.mobilechat.36703dd7.css":59760===x?"styles/evogame.chat.c5c3f75e.css":54504===x?"styles/evopromoti.cashgifts.de8d33cf.css":73375===x?"styles/evopromoti.spingifts.74edf8f6.css":77821===x?"styles/evogame.emojimenu.cadc9005.css":44806===x?"styles/gametestto.0741de9d.css":74695===x?"styles/help.baccarat.v2.d63bc130.css":5463===x?"styles/help.baccarat.52825036.css":24451===x?"styles/baccarat.live.debug.33cf75d2.css":73460===x?"styles/evopromoti.giftswheel.b312a388.css":24622===x?"styles/evopromoti.spingiftsw.c19aa584.css":3474===x?"styles/evopromoti.spingiftsf.1a89cdcf.css":22421===x?"styles/testtools.pixidevtoo.0fea869a.css":66703===x?"styles/gametestto.d22f8b42.css":void 0,H.hmd=x=>((x=Object.create(x)).children||(x.children=[]),Object.defineProperty(x,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+x.id)}}),x),H.o=(x,o)=>Object.prototype.hasOwnProperty.call(x,o),L={},H.l=(x,o,c,T)=>{if(L[x])L[x].push(o);else{var h,A;if(void 0!==c)for(var E=document.getElementsByTagName("script"),N=0;N<E.length;N++){var Q=E[N];if(Q.getAttribute("src")==x||Q.getAttribute("data-webpack")=="/frontend/evo/r2/:"+c){h=Q;break}}h||(A=!0,(h=document.createElement("script")).charset="utf-8",h.timeout=NaN,H.nc&&h.setAttribute("nonce",H.nc),h.setAttribute("data-webpack","/frontend/evo/r2/:"+c),h.src=x),L[x]=[o];var I=(o,c)=>{h.onerror=h.onload=null,clearTimeout(k);var T=L[x];if(delete L[x],h.parentNode&&h.parentNode.removeChild(h),T&&T.forEach((x=>x(c))),o)return o(c)},k=setTimeout(I.bind(null,void 0,{type:"timeout",target:h}),window.EVO_CDN?15e3:6e4);h.onerror=I.bind(null,h.onerror),h.onload=I.bind(null,h.onload),A&&document.head.appendChild(h)}},H.r=x=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})},H.nmd=x=>(x.paths=[],x.children||(x.children=[]),x),H.j=49966,H.p=(globalThis.EVO_CDN||"")+"/frontend/evo/r2/",T=x=>new Promise(((o,c)=>{var L=H.miniCssF(x),T=H.p+L;if(((x,o)=>{for(var c=document.getElementsByTagName("link"),L=0;L<c.length;L++){var T=(A=c[L]).getAttribute("data-href")||A.getAttribute("href");if("stylesheet"===A.rel&&(T===x||T===o))return A}var h=document.getElementsByTagName("style");for(L=0;L<h.length;L++){var A;if((T=(A=h[L]).getAttribute("data-href"))===x||T===o)return A}})(L,T))return o();((x,o,c,L)=>{var T=document.createElement("link");T.setAttribute("data-sandbox","ignore"),T.rel="stylesheet",T.type="text/css",T.onerror=T.onload=h=>{if(T.onerror=T.onload=null,"load"===h.type)c();else{var A=h&&("load"===h.type?"missing":h.type),E=h&&h.target&&h.target.href||o,H=new Error("Loading CSS chunk "+x+" failed.\n("+E+")");H.code="CSS_CHUNK_LOAD_FAILED",H.type=A,H.request=E,T.parentNode.removeChild(T),L(H)}},T.href=o,document.head.appendChild(T)})(x,T,o,c)})),h={49966:0},H.f.miniCss=(x,o)=>{h[x]?o.push(h[x]):0!==h[x]&&{3474:1,3863:1,5463:1,17474:1,22421:1,24451:1,24622:1,30164:1,36302:1,39340:1,44806:1,47290:1,50967:1,54504:1,59760:1,66703:1,73375:1,73460:1,74695:1,77821:1}[x]&&o.push(h[x]=T(x).then((()=>{h[x]=0}),(o=>{throw delete h[x],o})))},(()=>{var x={49966:0};H.f.j=(o,c)=>{var L=H.o(x,o)?x[o]:void 0;if(0!==L)if(L)c.push(L[2]);else{var T=new Promise(((c,T)=>L=x[o]=[c,T]));c.push(L[2]=T);var h=H.p+H.u(o),A=new Error;H.l(h,(c=>{if(H.o(x,o)&&(0!==(L=x[o])&&(x[o]=void 0),L)){var T=c&&("load"===c.type?"missing":c.type),h=c&&c.target&&c.target.src;A.message="Loading chunk "+o+" failed.\n("+T+": "+h+")",A.name="ChunkLoadError",A.type=T,A.request=h,L[1](A)}}),"chunk-"+o,o)}},H.O.j=o=>0===x[o];var o=(o,c)=>{var L,T,[h,A,E]=c,N=0;if(h.some((o=>0!==x[o]))){for(L in A)H.o(A,L)&&(H.m[L]=A[L]);if(E)var Q=E(H)}for(o&&o(c);N<h.length;N++)T=h[N],H.o(x,T)&&x[T]&&x[T][0](),x[T]=0;return H.O(Q)},c=self.webpackChunk_frontend_evo_r2_=self.webpackChunk_frontend_evo_r2_||[];c.forEach(o.bind(null,0)),c.push=o.bind(null,c.push.bind(c))})(),H.O(void 0,[35375,79949],(()=>H(515924)));var N=H.O(void 0,[35375,79949],(()=>H(595656)));N=H.O(N)})();
//# sourceMappingURL=https://sourcemaps.egcdn.com/frontend/evo/r2/js/baccarat.lightning.84ff82f7.js.map