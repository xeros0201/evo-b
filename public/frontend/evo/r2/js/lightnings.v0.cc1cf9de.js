"use strict";(()=>{var W,y,M,U,i,x,n,k={86977:(W,y,M)=>{M.d(y,{A:()=>U});const U={helpComponentContainer:"helpComponentContainer--faa7d",block:"block--2a07c",noMargin:"noMargin--96c39",menuItemIcon:"menuItemIcon--daeea",colorInfo:"colorInfo--50ed2",colorGolden:"colorGolden--35786",cellHighlight:"cellHighlight--44708",redesigned:"redesigned--6dd19",listMargin:"listMargin--b6342",twoColumnTable:"twoColumnTable--146ac"}},71036:(W,y,M)=>{M.d(y,{A:()=>U});const U={chipStackContainer:"chipStackContainer--2f7e7",revolverWrapper:"revolverWrapper--af495",chipStackRevolver:"chipStackRevolver--5d89e",scrollingWrapper:"scrollingWrapper--289ce",expanded:"expanded--7a8dd",sm:"sm--6e7ab",expandedWrapper:"expandedWrapper--b2045"}},89228:(W,y,M)=>{M.d(y,{A:()=>U});const U={trafficLightContainer:"trafficLightContainer--33636",trafficLight:"trafficLight--da89f"}},320680:W=>{function y(W,y,M){var U,i,x,n,k;function g(){var u=Date.now()-n;u<y&&u>=0?U=setTimeout(g,y-u):(U=null,M||(k=W.apply(x,i),x=i=null))}null==y&&(y=100);var u=function(){x=this,i=arguments,n=Date.now();var u=M&&!U;return U||(U=setTimeout(g,y)),u&&(k=W.apply(x,i),x=i=null),k};return u.clear=function(){U&&(clearTimeout(U),U=null)},u.flush=function(){U&&(k=W.apply(x,i),x=i=null,clearTimeout(U),U=null)},u}y.debounce=y,W.exports=y},686418:W=>{var y=Object.prototype.hasOwnProperty,M="~";function U(){}function i(W,y,M){this.fn=W,this.context=y,this.once=M||!1}function x(W,y,U,x,n){if("function"!=typeof U)throw new TypeError("The listener must be a function");var k=new i(U,x||W,n),g=M?M+y:y;return W._events[g]?W._events[g].fn?W._events[g]=[W._events[g],k]:W._events[g].push(k):(W._events[g]=k,W._eventsCount++),W}function n(W,y){0==--W._eventsCount?W._events=new U:delete W._events[y]}function k(){this._events=new U,this._eventsCount=0}Object.create&&(U.prototype=Object.create(null),(new U).__proto__||(M=!1)),k.prototype.eventNames=function(){var W,U,i=[];if(0===this._eventsCount)return i;for(U in W=this._events)y.call(W,U)&&i.push(M?U.slice(1):U);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(W)):i},k.prototype.listeners=function(W){var y=M?M+W:W,U=this._events[y];if(!U)return[];if(U.fn)return[U.fn];for(var i=0,x=U.length,n=new Array(x);i<x;i++)n[i]=U[i].fn;return n},k.prototype.listenerCount=function(W){var y=M?M+W:W,U=this._events[y];return U?U.fn?1:U.length:0},k.prototype.emit=function(W,y,U,i,x,n){var k=M?M+W:W;if(!this._events[k])return!1;var g,u,e=this._events[k],l=arguments.length;if(e.fn){switch(e.once&&this.removeListener(W,e.fn,void 0,!0),l){case 1:return e.fn.call(e.context),!0;case 2:return e.fn.call(e.context,y),!0;case 3:return e.fn.call(e.context,y,U),!0;case 4:return e.fn.call(e.context,y,U,i),!0;case 5:return e.fn.call(e.context,y,U,i,x),!0;case 6:return e.fn.call(e.context,y,U,i,x,n),!0}for(u=1,g=new Array(l-1);u<l;u++)g[u-1]=arguments[u];e.fn.apply(e.context,g)}else{var G,Y=e.length;for(u=0;u<Y;u++)switch(e[u].once&&this.removeListener(W,e[u].fn,void 0,!0),l){case 1:e[u].fn.call(e[u].context);break;case 2:e[u].fn.call(e[u].context,y);break;case 3:e[u].fn.call(e[u].context,y,U);break;case 4:e[u].fn.call(e[u].context,y,U,i);break;default:if(!g)for(G=1,g=new Array(l-1);G<l;G++)g[G-1]=arguments[G];e[u].fn.apply(e[u].context,g)}}return!0},k.prototype.on=function(W,y,M){return x(this,W,y,M,!1)},k.prototype.once=function(W,y,M){return x(this,W,y,M,!0)},k.prototype.removeListener=function(W,y,U,i){var x=M?M+W:W;if(!this._events[x])return this;if(!y)return n(this,x),this;var k=this._events[x];if(k.fn)k.fn!==y||i&&!k.once||U&&k.context!==U||n(this,x);else{for(var g=0,u=[],e=k.length;g<e;g++)(k[g].fn!==y||i&&!k[g].once||U&&k[g].context!==U)&&u.push(k[g]);u.length?this._events[x]=1===u.length?u[0]:u:n(this,x)}return this},k.prototype.removeAllListeners=function(W){var y;return W?(y=M?M+W:W,this._events[y]&&n(this,y)):(this._events=new U,this._eventsCount=0),this},k.prototype.off=k.prototype.removeListener,k.prototype.addListener=k.prototype.on,k.prefixed=M,k.EventEmitter=k,1&&(W.exports=k)},625021:(W,y)=>{y.ConcurrentRoot=1,y.ContinuousEventPriority=4,y.DefaultEventPriority=16,y.DiscreteEventPriority=1},32501:(W,y,M)=>{W.exports=function(W){var y={},U=M(377810),i=M(882328),x=Object.assign;function n(W){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+W,M=1;M<arguments.length;M++)y+="&args[]="+encodeURIComponent(arguments[M]);return"Minified React error #"+W+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k=U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,g=Symbol.for("react.element"),u=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),c=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),r=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var h=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var S=Symbol.iterator;function o(W){return null===W||"object"!=typeof W?null:"function"==typeof(W=S&&W[S]||W["@@iterator"])?W:null}function d(W){if(null==W)return null;if("function"==typeof W)return W.displayName||W.name||null;if("string"==typeof W)return W;switch(W){case e:return"Fragment";case u:return"Portal";case G:return"Profiler";case l:return"StrictMode";case r:return"Suspense";case A:return"SuspenseList"}if("object"==typeof W)switch(W.$$typeof){case c:return(W.displayName||"Context")+".Consumer";case Y:return(W._context.displayName||"Context")+".Provider";case D:var y=W.render;return(W=W.displayName)||(W=""!==(W=y.displayName||y.name||"")?"ForwardRef("+W+")":"ForwardRef"),W;case T:return null!==(y=W.displayName||null)?y:d(W.type)||"Memo";case O:y=W._payload,W=W._init;try{return d(W(y))}catch(W){}}return null}function q(W){var y=W.type;switch(W.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return W=(W=y.render).displayName||W.name||"",y.displayName||(""!==W?"ForwardRef("+W+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return d(y);case 8:return y===l?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof y)return y.displayName||y.name||null;if("string"==typeof y)return y}return null}function s(W){var y=W,M=W;if(W.alternate)for(;y.return;)y=y.return;else{W=y;do{!!(4098&(y=W).flags)&&(M=y.return),W=y.return}while(W)}return 3===y.tag?M:null}function N(W){if(s(W)!==W)throw Error(n(188))}function _(W){var y=W.alternate;if(!y){if(null===(y=s(W)))throw Error(n(188));return y!==W?null:W}for(var M=W,U=y;;){var i=M.return;if(null===i)break;var x=i.alternate;if(null===x){if(null!==(U=i.return)){M=U;continue}break}if(i.child===x.child){for(x=i.child;x;){if(x===M)return N(i),W;if(x===U)return N(i),y;x=x.sibling}throw Error(n(188))}if(M.return!==U.return)M=i,U=x;else{for(var k=!1,g=i.child;g;){if(g===M){k=!0,M=i,U=x;break}if(g===U){k=!0,U=i,M=x;break}g=g.sibling}if(!k){for(g=x.child;g;){if(g===M){k=!0,M=x,U=i;break}if(g===U){k=!0,U=x,M=i;break}g=g.sibling}if(!k)throw Error(n(189))}}if(M.alternate!==U)throw Error(n(190))}if(3!==M.tag)throw Error(n(188));return M.stateNode.current===M?W:y}function p(W){return null!==(W=_(W))?b(W):null}function b(W){if(5===W.tag||6===W.tag)return W;for(W=W.child;null!==W;){var y=b(W);if(null!==y)return y;W=W.sibling}return null}function m(W){if(5===W.tag||6===W.tag)return W;for(W=W.child;null!==W;){if(4!==W.tag){var y=m(W);if(null!==y)return y}W=W.sibling}return null}var z,K=Array.isArray,P=W.getPublicInstance,R=W.getRootHostContext,I=W.getChildHostContext,E=W.prepareForCommit,Z=W.resetAfterCommit,f=W.createInstance,V=W.appendInitialChild,$=W.finalizeInitialChildren,a=W.prepareUpdate,H=W.shouldSetTextContent,B=W.createTextInstance,v=W.scheduleTimeout,L=W.cancelTimeout,X=W.noTimeout,w=W.isPrimaryRenderer,F=W.supportsMutation,t=W.supportsPersistence,J=W.supportsHydration,j=W.getInstanceFromNode,C=W.preparePortalMount,Q=W.getCurrentEventPriority,WW=W.detachDeletedInstance,yW=W.supportsMicrotasks,MW=W.scheduleMicrotask,UW=W.supportsTestSelectors,iW=W.findFiberRoot,xW=W.getBoundingRect,nW=W.getTextContent,kW=W.isHiddenSubtree,gW=W.matchAccessibilityRole,uW=W.setFocusIfFocusable,eW=W.setupIntersectionObserver,lW=W.appendChild,GW=W.appendChildToContainer,YW=W.commitTextUpdate,cW=W.commitMount,DW=W.commitUpdate,rW=W.insertBefore,AW=W.insertInContainerBefore,TW=W.removeChild,OW=W.removeChildFromContainer,hW=W.resetTextContent,SW=W.hideInstance,oW=W.hideTextInstance,dW=W.unhideInstance,qW=W.unhideTextInstance,sW=W.clearContainer,NW=W.cloneInstance,_W=W.createContainerChildSet,pW=W.appendChildToContainerChildSet,bW=W.finalizeContainerChildren,mW=W.replaceContainerChildren,zW=W.cloneHiddenInstance,KW=W.cloneHiddenTextInstance,PW=W.canHydrateInstance,RW=W.canHydrateTextInstance,IW=W.canHydrateSuspenseInstance,EW=W.isSuspenseInstancePending,ZW=W.isSuspenseInstanceFallback,fW=W.getSuspenseInstanceFallbackErrorDetails,VW=W.registerSuspenseInstanceRetry,$W=W.getNextHydratableSibling,aW=W.getFirstHydratableChild,HW=W.getFirstHydratableChildWithinContainer,BW=W.getFirstHydratableChildWithinSuspenseInstance,vW=W.hydrateInstance,LW=W.hydrateTextInstance,XW=W.hydrateSuspenseInstance,wW=W.getNextHydratableInstanceAfterSuspenseInstance,FW=W.commitHydratedContainer,tW=W.commitHydratedSuspenseInstance,JW=W.clearSuspenseBoundary,jW=W.clearSuspenseBoundaryFromContainer,CW=W.shouldDeleteUnhydratedTailInstances,QW=W.didNotMatchHydratedContainerTextInstance,Wy=W.didNotMatchHydratedTextInstance;function yy(W){if(void 0===z)try{throw Error()}catch(W){var y=W.stack.trim().match(/\n( *(at )?)/);z=y&&y[1]||""}return"\n"+z+W}var My=!1;function Uy(W,y){if(!W||My)return"";My=!0;var M=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(y,[])}catch(W){var U=W}Reflect.construct(W,[],y)}else{try{y.call()}catch(W){U=W}W.call(y.prototype)}else{try{throw Error()}catch(W){U=W}W()}}catch(y){if(y&&U&&"string"==typeof y.stack){for(var i=y.stack.split("\n"),x=U.stack.split("\n"),n=i.length-1,k=x.length-1;1<=n&&0<=k&&i[n]!==x[k];)k--;for(;1<=n&&0<=k;n--,k--)if(i[n]!==x[k]){if(1!==n||1!==k)do{if(n--,0>--k||i[n]!==x[k]){var g="\n"+i[n].replace(" at new "," at ");return W.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",W.displayName)),g}}while(1<=n&&0<=k);break}}}finally{My=!1,Error.prepareStackTrace=M}return(W=W?W.displayName||W.name:"")?yy(W):""}var iy=Object.prototype.hasOwnProperty,xy=[],ny=-1;function ky(W){return{current:W}}function gy(W){0>ny||(W.current=xy[ny],xy[ny]=null,ny--)}function uy(W,y){ny++,xy[ny]=W.current,W.current=y}var ey={},ly=ky(ey),Gy=ky(!1),Yy=ey;function cy(W,y){var M=W.type.contextTypes;if(!M)return ey;var U=W.stateNode;if(U&&U.__reactInternalMemoizedUnmaskedChildContext===y)return U.__reactInternalMemoizedMaskedChildContext;var i,x={};for(i in M)x[i]=y[i];return U&&((W=W.stateNode).__reactInternalMemoizedUnmaskedChildContext=y,W.__reactInternalMemoizedMaskedChildContext=x),x}function Dy(W){return null!=W.childContextTypes}function ry(){gy(Gy),gy(ly)}function Ay(W,y,M){if(ly.current!==ey)throw Error(n(168));uy(ly,y),uy(Gy,M)}function Ty(W,y,M){var U=W.stateNode;if(y=y.childContextTypes,"function"!=typeof U.getChildContext)return M;for(var i in U=U.getChildContext())if(!(i in y))throw Error(n(108,q(W)||"Unknown",i));return x({},M,U)}function Oy(W){return W=(W=W.stateNode)&&W.__reactInternalMemoizedMergedChildContext||ey,Yy=ly.current,uy(ly,W),uy(Gy,Gy.current),!0}function hy(W,y,M){var U=W.stateNode;if(!U)throw Error(n(169));M?(W=Ty(W,y,Yy),U.__reactInternalMemoizedMergedChildContext=W,gy(Gy),gy(ly),uy(ly,W)):gy(Gy),uy(Gy,M)}var Sy=Math.clz32?Math.clz32:function(W){return 0==(W>>>=0)?32:31-(oy(W)/dy|0)|0},oy=Math.log,dy=Math.LN2,qy=64,sy=4194304;function Ny(W){switch(W&-W){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&W;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&W;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return W}}function _y(W,y){var M=W.pendingLanes;if(0===M)return 0;var U=0,i=W.suspendedLanes,x=W.pingedLanes,n=268435455&M;if(0!==n){var k=n&~i;0!==k?U=Ny(k):0!=(x&=n)&&(U=Ny(x))}else 0!=(n=M&~i)?U=Ny(n):0!==x&&(U=Ny(x));if(0===U)return 0;if(0!==y&&y!==U&&!(y&i)&&((i=U&-U)>=(x=y&-y)||16===i&&4194240&x))return y;if(4&U&&(U|=16&M),0!==(y=W.entangledLanes))for(W=W.entanglements,y&=U;0<y;)i=1<<(M=31-Sy(y)),U|=W[M],y&=~i;return U}function py(W,y){switch(W){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;default:return-1}}function by(W){return 0!=(W=-1073741825&W.pendingLanes)?W:1073741824&W?1073741824:0}function my(){var W=qy;return!(4194240&(qy<<=1))&&(qy=64),W}function zy(W){for(var y=[],M=0;31>M;M++)y.push(W);return y}function Ky(W,y,M){W.pendingLanes|=y,536870912!==y&&(W.suspendedLanes=0,W.pingedLanes=0),(W=W.eventTimes)[y=31-Sy(y)]=M}function Py(W,y){var M=W.entangledLanes|=y;for(W=W.entanglements;M;){var U=31-Sy(M),i=1<<U;i&y|W[U]&y&&(W[U]|=y),M&=~i}}var Ry=0;function Iy(W){return 1<(W&=-W)?4<W?268435455&W?16:536870912:4:1}var Ey=i.unstable_scheduleCallback,Zy=i.unstable_cancelCallback,fy=i.unstable_shouldYield,Vy=i.unstable_requestPaint,$y=i.unstable_now,ay=i.unstable_ImmediatePriority,Hy=i.unstable_UserBlockingPriority,By=i.unstable_NormalPriority,vy=i.unstable_IdlePriority,Ly=null,Xy=null,wy="function"==typeof Object.is?Object.is:function(W,y){return W===y&&(0!==W||1/W==1/y)||W!=W&&y!=y},Fy=null,ty=!1,Jy=!1;function jy(W){null===Fy?Fy=[W]:Fy.push(W)}function Cy(){if(!Jy&&null!==Fy){Jy=!0;var W=0,y=Ry;try{var M=Fy;for(Ry=1;W<M.length;W++){var U=M[W];do{U=U(!0)}while(null!==U)}Fy=null,ty=!1}catch(y){throw null!==Fy&&(Fy=Fy.slice(W+1)),Ey(ay,Cy),y}finally{Ry=y,Jy=!1}}return null}var Qy=[],WM=0,yM=null,MM=0,UM=[],iM=0,xM=null,nM=1,kM="";function gM(W,y){Qy[WM++]=MM,Qy[WM++]=yM,yM=W,MM=y}function uM(W,y,M){UM[iM++]=nM,UM[iM++]=kM,UM[iM++]=xM,xM=W;var U=nM;W=kM;var i=32-Sy(U)-1;U&=~(1<<i),M+=1;var x=32-Sy(y)+i;if(30<x){var n=i-i%5;x=(U&(1<<n)-1).toString(32),U>>=n,i-=n,nM=1<<32-Sy(y)+i|M<<i|U,kM=x+W}else nM=1<<x|M<<i|U,kM=W}function eM(W){null!==W.return&&(gM(W,1),uM(W,1,0))}function lM(W){for(;W===yM;)yM=Qy[--WM],Qy[WM]=null,MM=Qy[--WM],Qy[WM]=null;for(;W===xM;)xM=UM[--iM],UM[iM]=null,kM=UM[--iM],UM[iM]=null,nM=UM[--iM],UM[iM]=null}var GM=null,YM=null,cM=!1,DM=!1,rM=null;function AM(W,y){var M=nk(5,null,null,0);M.elementType="DELETED",M.stateNode=y,M.return=W,null===(y=W.deletions)?(W.deletions=[M],W.flags|=16):y.push(M)}function TM(W,y){switch(W.tag){case 5:return null!==(y=PW(y,W.type,W.pendingProps))&&(W.stateNode=y,GM=W,YM=aW(y),!0);case 6:return null!==(y=RW(y,W.pendingProps))&&(W.stateNode=y,GM=W,YM=null,!0);case 13:if(null!==(y=IW(y))){var M=null!==xM?{id:nM,overflow:kM}:null;return W.memoizedState={dehydrated:y,treeContext:M,retryLane:1073741824},(M=nk(18,null,null,0)).stateNode=y,M.return=W,W.child=M,GM=W,YM=null,!0}return!1;default:return!1}}function OM(W){return!(!(1&W.mode)||128&W.flags)}function hM(W){if(cM){var y=YM;if(y){var M=y;if(!TM(W,y)){if(OM(W))throw Error(n(418));y=$W(M);var U=GM;y&&TM(W,y)?AM(U,M):(W.flags=-4097&W.flags|2,cM=!1,GM=W)}}else{if(OM(W))throw Error(n(418));W.flags=-4097&W.flags|2,cM=!1,GM=W}}}function SM(W){for(W=W.return;null!==W&&5!==W.tag&&3!==W.tag&&13!==W.tag;)W=W.return;GM=W}function oM(W){if(!J||W!==GM)return!1;if(!cM)return SM(W),cM=!0,!1;if(3!==W.tag&&(5!==W.tag||CW(W.type)&&!H(W.type,W.memoizedProps))){var y=YM;if(y){if(OM(W))throw dM(),Error(n(418));for(;y;)AM(W,y),y=$W(y)}}if(SM(W),13===W.tag){if(!J)throw Error(n(316));if(!(W=null!==(W=W.memoizedState)?W.dehydrated:null))throw Error(n(317));YM=wW(W)}else YM=GM?$W(W.stateNode):null;return!0}function dM(){for(var W=YM;W;)W=$W(W)}function qM(){J&&(YM=GM=null,DM=cM=!1)}function sM(W){null===rM?rM=[W]:rM.push(W)}var NM=k.ReactCurrentBatchConfig;function _M(W,y){if(wy(W,y))return!0;if("object"!=typeof W||null===W||"object"!=typeof y||null===y)return!1;var M=Object.keys(W),U=Object.keys(y);if(M.length!==U.length)return!1;for(U=0;U<M.length;U++){var i=M[U];if(!iy.call(y,i)||!wy(W[i],y[i]))return!1}return!0}function pM(W){switch(W.tag){case 5:return yy(W.type);case 16:return yy("Lazy");case 13:return yy("Suspense");case 19:return yy("SuspenseList");case 0:case 2:case 15:return Uy(W.type,!1);case 11:return Uy(W.type.render,!1);case 1:return Uy(W.type,!0);default:return""}}function bM(W,y){if(W&&W.defaultProps){for(var M in y=x({},y),W=W.defaultProps)void 0===y[M]&&(y[M]=W[M]);return y}return y}var mM=ky(null),zM=null,KM=null,PM=null;function RM(){PM=KM=zM=null}function IM(W,y,M){w?(uy(mM,y._currentValue),y._currentValue=M):(uy(mM,y._currentValue2),y._currentValue2=M)}function EM(W){var y=mM.current;gy(mM),w?W._currentValue=y:W._currentValue2=y}function ZM(W,y,M){for(;null!==W;){var U=W.alternate;if((W.childLanes&y)!==y?(W.childLanes|=y,null!==U&&(U.childLanes|=y)):null!==U&&(U.childLanes&y)!==y&&(U.childLanes|=y),W===M)break;W=W.return}}function fM(W,y){zM=W,PM=KM=null,null!==(W=W.dependencies)&&null!==W.firstContext&&(!!(W.lanes&y)&&(Pi=!0),W.firstContext=null)}function VM(W){var y=w?W._currentValue:W._currentValue2;if(PM!==W)if(W={context:W,memoizedValue:y,next:null},null===KM){if(null===zM)throw Error(n(308));KM=W,zM.dependencies={lanes:0,firstContext:W}}else KM=KM.next=W;return y}var $M=null;function aM(W){null===$M?$M=[W]:$M.push(W)}function HM(W,y,M,U){var i=y.interleaved;return null===i?(M.next=M,aM(y)):(M.next=i.next,i.next=M),y.interleaved=M,BM(W,U)}function BM(W,y){W.lanes|=y;var M=W.alternate;for(null!==M&&(M.lanes|=y),M=W,W=W.return;null!==W;)W.childLanes|=y,null!==(M=W.alternate)&&(M.childLanes|=y),M=W,W=W.return;return 3===M.tag?M.stateNode:null}var vM=!1;function LM(W){W.updateQueue={baseState:W.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XM(W,y){W=W.updateQueue,y.updateQueue===W&&(y.updateQueue={baseState:W.baseState,firstBaseUpdate:W.firstBaseUpdate,lastBaseUpdate:W.lastBaseUpdate,shared:W.shared,effects:W.effects})}function wM(W,y){return{eventTime:W,lane:y,tag:0,payload:null,callback:null,next:null}}function FM(W,y,M){var U=W.updateQueue;if(null===U)return null;if(U=U.shared,2&yn){var i=U.pending;return null===i?y.next=y:(y.next=i.next,i.next=y),U.pending=y,BM(W,M)}return null===(i=U.interleaved)?(y.next=y,aM(U)):(y.next=i.next,i.next=y),U.interleaved=y,BM(W,M)}function tM(W,y,M){if(null!==(y=y.updateQueue)&&(y=y.shared,4194240&M)){var U=y.lanes;M|=U&=W.pendingLanes,y.lanes=M,Py(W,M)}}function JM(W,y){var M=W.updateQueue,U=W.alternate;if(null!==U&&M===(U=U.updateQueue)){var i=null,x=null;if(null!==(M=M.firstBaseUpdate)){do{var n={eventTime:M.eventTime,lane:M.lane,tag:M.tag,payload:M.payload,callback:M.callback,next:null};null===x?i=x=n:x=x.next=n,M=M.next}while(null!==M);null===x?i=x=y:x=x.next=y}else i=x=y;return M={baseState:U.baseState,firstBaseUpdate:i,lastBaseUpdate:x,shared:U.shared,effects:U.effects},void(W.updateQueue=M)}null===(W=M.lastBaseUpdate)?M.firstBaseUpdate=y:W.next=y,M.lastBaseUpdate=y}function jM(W,y,M,U){var i=W.updateQueue;vM=!1;var n=i.firstBaseUpdate,k=i.lastBaseUpdate,g=i.shared.pending;if(null!==g){i.shared.pending=null;var u=g,e=u.next;u.next=null,null===k?n=e:k.next=e,k=u;var l=W.alternate;null!==l&&(g=(l=l.updateQueue).lastBaseUpdate)!==k&&(null===g?l.firstBaseUpdate=e:g.next=e,l.lastBaseUpdate=u)}if(null!==n){var G=i.baseState;k=0,l=e=u=null,g=n;do{var Y=g.lane,c=g.eventTime;if((U&Y)===Y){null!==l&&(l=l.next={eventTime:c,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});W:{var D=W,r=g;switch(Y=y,c=M,r.tag){case 1:if("function"==typeof(D=r.payload)){G=D.call(c,G,Y);break W}G=D;break W;case 3:D.flags=-65537&D.flags|128;case 0:if(null==(Y="function"==typeof(D=r.payload)?D.call(c,G,Y):D))break W;G=x({},G,Y);break W;case 2:vM=!0}}null!==g.callback&&0!==g.lane&&(W.flags|=64,null===(Y=i.effects)?i.effects=[g]:Y.push(g))}else c={eventTime:c,lane:Y,tag:g.tag,payload:g.payload,callback:g.callback,next:null},null===l?(e=l=c,u=G):l=l.next=c,k|=Y;if(null===(g=g.next)){if(null===(g=i.shared.pending))break;g=(Y=g).next,Y.next=null,i.lastBaseUpdate=Y,i.shared.pending=null}}while(1);if(null===l&&(u=G),i.baseState=u,i.firstBaseUpdate=e,i.lastBaseUpdate=l,null!==(y=i.shared.interleaved)){i=y;do{k|=i.lane,i=i.next}while(i!==y)}else null===n&&(i.shared.lanes=0);en|=k,W.lanes=k,W.memoizedState=G}}function CM(W,y,M){if(W=y.effects,y.effects=null,null!==W)for(y=0;y<W.length;y++){var U=W[y],i=U.callback;if(null!==i){if(U.callback=null,U=M,"function"!=typeof i)throw Error(n(191,i));i.call(U)}}}var QM=(new U.Component).refs;function WU(W,y,M,U){M=null==(M=M(U,y=W.memoizedState))?y:x({},y,M),W.memoizedState=M,0===W.lanes&&(W.updateQueue.baseState=M)}var yU={isMounted:function(W){return!!(W=W._reactInternals)&&s(W)===W},enqueueSetState:function(W,y,M){W=W._reactInternals;var U=mn(),i=zn(W),x=wM(U,i);x.payload=y,null!=M&&(x.callback=M),null!==(y=FM(W,x,i))&&(Kn(y,W,i,U),tM(y,W,i))},enqueueReplaceState:function(W,y,M){W=W._reactInternals;var U=mn(),i=zn(W),x=wM(U,i);x.tag=1,x.payload=y,null!=M&&(x.callback=M),null!==(y=FM(W,x,i))&&(Kn(y,W,i,U),tM(y,W,i))},enqueueForceUpdate:function(W,y){W=W._reactInternals;var M=mn(),U=zn(W),i=wM(M,U);i.tag=2,null!=y&&(i.callback=y),null!==(y=FM(W,i,U))&&(Kn(y,W,U,M),tM(y,W,U))}};function MU(W,y,M,U,i,x,n){return"function"==typeof(W=W.stateNode).shouldComponentUpdate?W.shouldComponentUpdate(U,x,n):!(y.prototype&&y.prototype.isPureReactComponent&&_M(M,U)&&_M(i,x))}function UU(W,y,M){var U=!1,i=ey,x=y.contextType;return"object"==typeof x&&null!==x?x=VM(x):(i=Dy(y)?Yy:ly.current,x=(U=null!=(U=y.contextTypes))?cy(W,i):ey),y=new y(M,x),W.memoizedState=null!==y.state&&void 0!==y.state?y.state:null,y.updater=yU,W.stateNode=y,y._reactInternals=W,U&&((W=W.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,W.__reactInternalMemoizedMaskedChildContext=x),y}function iU(W,y,M,U){W=y.state,"function"==typeof y.componentWillReceiveProps&&y.componentWillReceiveProps(M,U),"function"==typeof y.UNSAFE_componentWillReceiveProps&&y.UNSAFE_componentWillReceiveProps(M,U),y.state!==W&&yU.enqueueReplaceState(y,y.state,null)}function xU(W,y,M,U){var i=W.stateNode;i.props=M,i.state=W.memoizedState,i.refs=QM,LM(W);var x=y.contextType;"object"==typeof x&&null!==x?i.context=VM(x):(x=Dy(y)?Yy:ly.current,i.context=cy(W,x)),i.state=W.memoizedState,"function"==typeof(x=y.getDerivedStateFromProps)&&(WU(W,y,x,M),i.state=W.memoizedState),"function"==typeof y.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(y=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),y!==i.state&&yU.enqueueReplaceState(i,i.state,null),jM(W,M,i,U),i.state=W.memoizedState),"function"==typeof i.componentDidMount&&(W.flags|=4194308)}function nU(W,y,M){if(null!==(W=M.ref)&&"function"!=typeof W&&"object"!=typeof W){if(M._owner){if(M=M._owner){if(1!==M.tag)throw Error(n(309));var U=M.stateNode}if(!U)throw Error(n(147,W));var i=U,x=""+W;return null!==y&&null!==y.ref&&"function"==typeof y.ref&&y.ref._stringRef===x?y.ref:(y=function(W){var y=i.refs;y===QM&&(y=i.refs={}),null===W?delete y[x]:y[x]=W},y._stringRef=x,y)}if("string"!=typeof W)throw Error(n(284));if(!M._owner)throw Error(n(290,W))}return W}function kU(W,y){throw W=Object.prototype.toString.call(y),Error(n(31,"[object Object]"===W?"object with keys {"+Object.keys(y).join(", ")+"}":W))}function gU(W){return(0,W._init)(W._payload)}function uU(W){function y(y,M){if(W){var U=y.deletions;null===U?(y.deletions=[M],y.flags|=16):U.push(M)}}function M(M,U){if(!W)return null;for(;null!==U;)y(M,U),U=U.sibling;return null}function U(W,y){for(W=new Map;null!==y;)null!==y.key?W.set(y.key,y):W.set(y.index,y),y=y.sibling;return W}function i(W,y){return(W=gk(W,y)).index=0,W.sibling=null,W}function x(y,M,U){return y.index=U,W?null!==(U=y.alternate)?(U=U.index)<M?(y.flags|=2,M):U:(y.flags|=2,M):(y.flags|=1048576,M)}function k(y){return W&&null===y.alternate&&(y.flags|=2),y}function l(W,y,M,U){return null===y||6!==y.tag?((y=Gk(M,W.mode,U)).return=W,y):((y=i(y,M)).return=W,y)}function G(W,y,M,U){var x=M.type;return x===e?c(W,y,M.props.children,U,M.key):null!==y&&(y.elementType===x||"object"==typeof x&&null!==x&&x.$$typeof===O&&gU(x)===y.type)?((U=i(y,M.props)).ref=nU(W,y,M),U.return=W,U):((U=uk(M.type,M.key,M.props,null,W.mode,U)).ref=nU(W,y,M),U.return=W,U)}function Y(W,y,M,U){return null===y||4!==y.tag||y.stateNode.containerInfo!==M.containerInfo||y.stateNode.implementation!==M.implementation?((y=Yk(M,W.mode,U)).return=W,y):((y=i(y,M.children||[])).return=W,y)}function c(W,y,M,U,x){return null===y||7!==y.tag?((y=ek(M,W.mode,U,x)).return=W,y):((y=i(y,M)).return=W,y)}function D(W,y,M){if("string"==typeof y&&""!==y||"number"==typeof y)return(y=Gk(""+y,W.mode,M)).return=W,y;if("object"==typeof y&&null!==y){switch(y.$$typeof){case g:return(M=uk(y.type,y.key,y.props,null,W.mode,M)).ref=nU(W,null,y),M.return=W,M;case u:return(y=Yk(y,W.mode,M)).return=W,y;case O:return D(W,(0,y._init)(y._payload),M)}if(K(y)||o(y))return(y=ek(y,W.mode,M,null)).return=W,y;kU(W,y)}return null}function r(W,y,M,U){var i=null!==y?y.key:null;if("string"==typeof M&&""!==M||"number"==typeof M)return null!==i?null:l(W,y,""+M,U);if("object"==typeof M&&null!==M){switch(M.$$typeof){case g:return M.key===i?G(W,y,M,U):null;case u:return M.key===i?Y(W,y,M,U):null;case O:return r(W,y,(i=M._init)(M._payload),U)}if(K(M)||o(M))return null!==i?null:c(W,y,M,U,null);kU(W,M)}return null}function A(W,y,M,U,i){if("string"==typeof U&&""!==U||"number"==typeof U)return l(y,W=W.get(M)||null,""+U,i);if("object"==typeof U&&null!==U){switch(U.$$typeof){case g:return G(y,W=W.get(null===U.key?M:U.key)||null,U,i);case u:return Y(y,W=W.get(null===U.key?M:U.key)||null,U,i);case O:return A(W,y,M,(0,U._init)(U._payload),i)}if(K(U)||o(U))return c(y,W=W.get(M)||null,U,i,null);kU(y,U)}return null}function T(i,n,k,g){for(var u=null,e=null,l=n,G=n=0,Y=null;null!==l&&G<k.length;G++){l.index>G?(Y=l,l=null):Y=l.sibling;var c=r(i,l,k[G],g);if(null===c){null===l&&(l=Y);break}W&&l&&null===c.alternate&&y(i,l),n=x(c,n,G),null===e?u=c:e.sibling=c,e=c,l=Y}if(G===k.length)return M(i,l),cM&&gM(i,G),u;if(null===l){for(;G<k.length;G++)null!==(l=D(i,k[G],g))&&(n=x(l,n,G),null===e?u=l:e.sibling=l,e=l);return cM&&gM(i,G),u}for(l=U(i,l);G<k.length;G++)null!==(Y=A(l,i,G,k[G],g))&&(W&&null!==Y.alternate&&l.delete(null===Y.key?G:Y.key),n=x(Y,n,G),null===e?u=Y:e.sibling=Y,e=Y);return W&&l.forEach((function(W){return y(i,W)})),cM&&gM(i,G),u}function h(i,k,g,u){var e=o(g);if("function"!=typeof e)throw Error(n(150));if(null==(g=e.call(g)))throw Error(n(151));for(var l=e=null,G=k,Y=k=0,c=null,T=g.next();null!==G&&!T.done;Y++,T=g.next()){G.index>Y?(c=G,G=null):c=G.sibling;var O=r(i,G,T.value,u);if(null===O){null===G&&(G=c);break}W&&G&&null===O.alternate&&y(i,G),k=x(O,k,Y),null===l?e=O:l.sibling=O,l=O,G=c}if(T.done)return M(i,G),cM&&gM(i,Y),e;if(null===G){for(;!T.done;Y++,T=g.next())null!==(T=D(i,T.value,u))&&(k=x(T,k,Y),null===l?e=T:l.sibling=T,l=T);return cM&&gM(i,Y),e}for(G=U(i,G);!T.done;Y++,T=g.next())null!==(T=A(G,i,Y,T.value,u))&&(W&&null!==T.alternate&&G.delete(null===T.key?Y:T.key),k=x(T,k,Y),null===l?e=T:l.sibling=T,l=T);return W&&G.forEach((function(W){return y(i,W)})),cM&&gM(i,Y),e}return function W(U,x,n,l){if("object"==typeof n&&null!==n&&n.type===e&&null===n.key&&(n=n.props.children),"object"==typeof n&&null!==n){switch(n.$$typeof){case g:W:{for(var G=n.key,Y=x;null!==Y;){if(Y.key===G){if((G=n.type)===e){if(7===Y.tag){M(U,Y.sibling),(x=i(Y,n.props.children)).return=U,U=x;break W}}else if(Y.elementType===G||"object"==typeof G&&null!==G&&G.$$typeof===O&&gU(G)===Y.type){M(U,Y.sibling),(x=i(Y,n.props)).ref=nU(U,Y,n),x.return=U,U=x;break W}M(U,Y);break}y(U,Y),Y=Y.sibling}n.type===e?((x=ek(n.props.children,U.mode,l,n.key)).return=U,U=x):((l=uk(n.type,n.key,n.props,null,U.mode,l)).ref=nU(U,x,n),l.return=U,U=l)}return k(U);case u:W:{for(Y=n.key;null!==x;){if(x.key===Y){if(4===x.tag&&x.stateNode.containerInfo===n.containerInfo&&x.stateNode.implementation===n.implementation){M(U,x.sibling),(x=i(x,n.children||[])).return=U,U=x;break W}M(U,x);break}y(U,x),x=x.sibling}(x=Yk(n,U.mode,l)).return=U,U=x}return k(U);case O:return W(U,x,(Y=n._init)(n._payload),l)}if(K(n))return T(U,x,n,l);if(o(n))return h(U,x,n,l);kU(U,n)}return"string"==typeof n&&""!==n||"number"==typeof n?(n=""+n,null!==x&&6===x.tag?(M(U,x.sibling),(x=i(x,n)).return=U,U=x):(M(U,x),(x=Gk(n,U.mode,l)).return=U,U=x),k(U)):M(U,x)}}var eU=uU(!0),lU=uU(!1),GU={},YU=ky(GU),cU=ky(GU),DU=ky(GU);function rU(W){if(W===GU)throw Error(n(174));return W}function AU(W,y){uy(DU,y),uy(cU,W),uy(YU,GU),W=R(y),gy(YU),uy(YU,W)}function TU(){gy(YU),gy(cU),gy(DU)}function OU(W){var y=rU(DU.current),M=rU(YU.current);M!==(y=I(M,W.type,y))&&(uy(cU,W),uy(YU,y))}function hU(W){cU.current===W&&(gy(YU),gy(cU))}var SU=ky(0);function oU(W){for(var y=W;null!==y;){if(13===y.tag){var M=y.memoizedState;if(null!==M&&(null===(M=M.dehydrated)||EW(M)||ZW(M)))return y}else if(19===y.tag&&void 0!==y.memoizedProps.revealOrder){if(128&y.flags)return y}else if(null!==y.child){y.child.return=y,y=y.child;continue}if(y===W)break;for(;null===y.sibling;){if(null===y.return||y.return===W)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var dU=[];function qU(){for(var W=0;W<dU.length;W++){var y=dU[W];w?y._workInProgressVersionPrimary=null:y._workInProgressVersionSecondary=null}dU.length=0}var sU=k.ReactCurrentDispatcher,NU=k.ReactCurrentBatchConfig,_U=0,pU=null,bU=null,mU=null,zU=!1,KU=!1,PU=0,RU=0;function IU(){throw Error(n(321))}function EU(W,y){if(null===y)return!1;for(var M=0;M<y.length&&M<W.length;M++)if(!wy(W[M],y[M]))return!1;return!0}function ZU(W,y,M,U,i,x){if(_U=x,pU=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,sU.current=null===W||null===W.memoizedState?hi:Si,W=M(U,i),KU){x=0;do{if(KU=!1,PU=0,25<=x)throw Error(n(301));x+=1,mU=bU=null,y.updateQueue=null,sU.current=oi,W=M(U,i)}while(KU)}if(sU.current=Oi,y=null!==bU&&null!==bU.next,_U=0,mU=bU=pU=null,zU=!1,y)throw Error(n(300));return W}function fU(){var W=0!==PU;return PU=0,W}function VU(){var W={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mU?pU.memoizedState=mU=W:mU=mU.next=W,mU}function $U(){if(null===bU){var W=pU.alternate;W=null!==W?W.memoizedState:null}else W=bU.next;var y=null===mU?pU.memoizedState:mU.next;if(null!==y)mU=y,bU=W;else{if(null===W)throw Error(n(310));W={memoizedState:(bU=W).memoizedState,baseState:bU.baseState,baseQueue:bU.baseQueue,queue:bU.queue,next:null},null===mU?pU.memoizedState=mU=W:mU=mU.next=W}return mU}function aU(W,y){return"function"==typeof y?y(W):y}function HU(W){var y=$U(),M=y.queue;if(null===M)throw Error(n(311));M.lastRenderedReducer=W;var U=bU,i=U.baseQueue,x=M.pending;if(null!==x){if(null!==i){var k=i.next;i.next=x.next,x.next=k}U.baseQueue=i=x,M.pending=null}if(null!==i){x=i.next,U=U.baseState;var g=k=null,u=null,e=x;do{var l=e.lane;if((_U&l)===l)null!==u&&(u=u.next={lane:0,action:e.action,hasEagerState:e.hasEagerState,eagerState:e.eagerState,next:null}),U=e.hasEagerState?e.eagerState:W(U,e.action);else{var G={lane:l,action:e.action,hasEagerState:e.hasEagerState,eagerState:e.eagerState,next:null};null===u?(g=u=G,k=U):u=u.next=G,pU.lanes|=l,en|=l}e=e.next}while(null!==e&&e!==x);null===u?k=U:u.next=g,wy(U,y.memoizedState)||(Pi=!0),y.memoizedState=U,y.baseState=k,y.baseQueue=u,M.lastRenderedState=U}if(null!==(W=M.interleaved)){i=W;do{x=i.lane,pU.lanes|=x,en|=x,i=i.next}while(i!==W)}else null===i&&(M.lanes=0);return[y.memoizedState,M.dispatch]}function BU(W){var y=$U(),M=y.queue;if(null===M)throw Error(n(311));M.lastRenderedReducer=W;var U=M.dispatch,i=M.pending,x=y.memoizedState;if(null!==i){M.pending=null;var k=i=i.next;do{x=W(x,k.action),k=k.next}while(k!==i);wy(x,y.memoizedState)||(Pi=!0),y.memoizedState=x,null===y.baseQueue&&(y.baseState=x),M.lastRenderedState=x}return[x,U]}function vU(){}function LU(W,y){var M=pU,U=$U(),i=y(),x=!wy(U.memoizedState,i);if(x&&(U.memoizedState=i,Pi=!0),U=U.queue,Ui(FU.bind(null,M,U,W),[W]),U.getSnapshot!==y||x||null!==mU&&1&mU.memoizedState.tag){if(M.flags|=2048,CU(9,wU.bind(null,M,U,i,y),void 0,null),null===Mn)throw Error(n(349));30&_U||XU(M,y,i)}return i}function XU(W,y,M){W.flags|=16384,W={getSnapshot:y,value:M},null===(y=pU.updateQueue)?(y={lastEffect:null,stores:null},pU.updateQueue=y,y.stores=[W]):null===(M=y.stores)?y.stores=[W]:M.push(W)}function wU(W,y,M,U){y.value=M,y.getSnapshot=U,tU(y)&&JU(W)}function FU(W,y,M){return M((function(){tU(y)&&JU(W)}))}function tU(W){var y=W.getSnapshot;W=W.value;try{var M=y();return!wy(W,M)}catch(W){return!0}}function JU(W){var y=BM(W,1);null!==y&&Kn(y,W,1,-1)}function jU(W){var y=VU();return"function"==typeof W&&(W=W()),y.memoizedState=y.baseState=W,W={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:aU,lastRenderedState:W},y.queue=W,W=W.dispatch=Di.bind(null,pU,W),[y.memoizedState,W]}function CU(W,y,M,U){return W={tag:W,create:y,destroy:M,deps:U,next:null},null===(y=pU.updateQueue)?(y={lastEffect:null,stores:null},pU.updateQueue=y,y.lastEffect=W.next=W):null===(M=y.lastEffect)?y.lastEffect=W.next=W:(U=M.next,M.next=W,W.next=U,y.lastEffect=W),W}function QU(){return $U().memoizedState}function Wi(W,y,M,U){var i=VU();pU.flags|=W,i.memoizedState=CU(1|y,M,void 0,void 0===U?null:U)}function yi(W,y,M,U){var i=$U();U=void 0===U?null:U;var x=void 0;if(null!==bU){var n=bU.memoizedState;if(x=n.destroy,null!==U&&EU(U,n.deps))return void(i.memoizedState=CU(y,M,x,U))}pU.flags|=W,i.memoizedState=CU(1|y,M,x,U)}function Mi(W,y){return Wi(8390656,8,W,y)}function Ui(W,y){return yi(2048,8,W,y)}function ii(W,y){return yi(4,2,W,y)}function xi(W,y){return yi(4,4,W,y)}function ni(W,y){return"function"==typeof y?(W=W(),y(W),function(){y(null)}):null!=y?(W=W(),y.current=W,function(){y.current=null}):void 0}function ki(W,y,M){return M=null!=M?M.concat([W]):null,yi(4,4,ni.bind(null,y,W),M)}function gi(){}function ui(W,y){var M=$U();y=void 0===y?null:y;var U=M.memoizedState;return null!==U&&null!==y&&EU(y,U[1])?U[0]:(M.memoizedState=[W,y],W)}function ei(W,y){var M=$U();y=void 0===y?null:y;var U=M.memoizedState;return null!==U&&null!==y&&EU(y,U[1])?U[0]:(W=W(),M.memoizedState=[W,y],W)}function li(W,y,M){return 21&_U?(wy(M,y)||(M=my(),pU.lanes|=M,en|=M,W.baseState=!0),y):(W.baseState&&(W.baseState=!1,Pi=!0),W.memoizedState=M)}function Gi(W,y){var M=Ry;Ry=0!==M&&4>M?M:4,W(!0);var U=NU.transition;NU.transition={};try{W(!1),y()}finally{Ry=M,NU.transition=U}}function Yi(){return $U().memoizedState}function ci(W,y,M){var U=zn(W);M={lane:U,action:M,hasEagerState:!1,eagerState:null,next:null},ri(W)?Ai(y,M):null!==(M=HM(W,y,M,U))&&(Kn(M,W,U,mn()),Ti(M,y,U))}function Di(W,y,M){var U=zn(W),i={lane:U,action:M,hasEagerState:!1,eagerState:null,next:null};if(ri(W))Ai(y,i);else{var x=W.alternate;if(0===W.lanes&&(null===x||0===x.lanes)&&null!==(x=y.lastRenderedReducer))try{var n=y.lastRenderedState,k=x(n,M);if(i.hasEagerState=!0,i.eagerState=k,wy(k,n)){var g=y.interleaved;return null===g?(i.next=i,aM(y)):(i.next=g.next,g.next=i),void(y.interleaved=i)}}catch(W){}null!==(M=HM(W,y,i,U))&&(Kn(M,W,U,i=mn()),Ti(M,y,U))}}function ri(W){var y=W.alternate;return W===pU||null!==y&&y===pU}function Ai(W,y){KU=zU=!0;var M=W.pending;null===M?y.next=y:(y.next=M.next,M.next=y),W.pending=y}function Ti(W,y,M){if(4194240&M){var U=y.lanes;M|=U&=W.pendingLanes,y.lanes=M,Py(W,M)}}var Oi={readContext:VM,useCallback:IU,useContext:IU,useEffect:IU,useImperativeHandle:IU,useInsertionEffect:IU,useLayoutEffect:IU,useMemo:IU,useReducer:IU,useRef:IU,useState:IU,useDebugValue:IU,useDeferredValue:IU,useTransition:IU,useMutableSource:IU,useSyncExternalStore:IU,useId:IU,unstable_isNewReconciler:!1},hi={readContext:VM,useCallback:function(W,y){return VU().memoizedState=[W,void 0===y?null:y],W},useContext:VM,useEffect:Mi,useImperativeHandle:function(W,y,M){return M=null!=M?M.concat([W]):null,Wi(4194308,4,ni.bind(null,y,W),M)},useLayoutEffect:function(W,y){return Wi(4194308,4,W,y)},useInsertionEffect:function(W,y){return Wi(4,2,W,y)},useMemo:function(W,y){var M=VU();return y=void 0===y?null:y,W=W(),M.memoizedState=[W,y],W},useReducer:function(W,y,M){var U=VU();return y=void 0!==M?M(y):y,U.memoizedState=U.baseState=y,W={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:W,lastRenderedState:y},U.queue=W,W=W.dispatch=ci.bind(null,pU,W),[U.memoizedState,W]},useRef:function(W){return W={current:W},VU().memoizedState=W},useState:jU,useDebugValue:gi,useDeferredValue:function(W){return VU().memoizedState=W},useTransition:function(){var W=jU(!1),y=W[0];return W=Gi.bind(null,W[1]),VU().memoizedState=W,[y,W]},useMutableSource:function(){},useSyncExternalStore:function(W,y,M){var U=pU,i=VU();if(cM){if(void 0===M)throw Error(n(407));M=M()}else{if(M=y(),null===Mn)throw Error(n(349));30&_U||XU(U,y,M)}i.memoizedState=M;var x={value:M,getSnapshot:y};return i.queue=x,Mi(FU.bind(null,U,x,W),[W]),U.flags|=2048,CU(9,wU.bind(null,U,x,M,y),void 0,null),M},useId:function(){var W=VU(),y=Mn.identifierPrefix;if(cM){var M=kM;y=":"+y+"R"+(M=(nM&~(1<<32-Sy(nM)-1)).toString(32)+M),0<(M=PU++)&&(y+="H"+M.toString(32)),y+=":"}else y=":"+y+"r"+(M=RU++).toString(32)+":";return W.memoizedState=y},unstable_isNewReconciler:!1},Si={readContext:VM,useCallback:ui,useContext:VM,useEffect:Ui,useImperativeHandle:ki,useInsertionEffect:ii,useLayoutEffect:xi,useMemo:ei,useReducer:HU,useRef:QU,useState:function(){return HU(aU)},useDebugValue:gi,useDeferredValue:function(W){return li($U(),bU.memoizedState,W)},useTransition:function(){return[HU(aU)[0],$U().memoizedState]},useMutableSource:vU,useSyncExternalStore:LU,useId:Yi,unstable_isNewReconciler:!1},oi={readContext:VM,useCallback:ui,useContext:VM,useEffect:Ui,useImperativeHandle:ki,useInsertionEffect:ii,useLayoutEffect:xi,useMemo:ei,useReducer:BU,useRef:QU,useState:function(){return BU(aU)},useDebugValue:gi,useDeferredValue:function(W){var y=$U();return null===bU?y.memoizedState=W:li(y,bU.memoizedState,W)},useTransition:function(){return[BU(aU)[0],$U().memoizedState]},useMutableSource:vU,useSyncExternalStore:LU,useId:Yi,unstable_isNewReconciler:!1};function di(W,y){try{var M="",U=y;do{M+=pM(U),U=U.return}while(U);var i=M}catch(W){i="\nError generating stack: "+W.message+"\n"+W.stack}return{value:W,source:y,stack:i,digest:null}}function qi(W,y,M){return{value:W,source:null,stack:null!=M?M:null,digest:null!=y?y:null}}function si(W,y){try{console.error(y.value)}catch(W){setTimeout((function(){throw W}))}}var Ni="function"==typeof WeakMap?WeakMap:Map;function _i(W,y,M){(M=wM(-1,M)).tag=3,M.payload={element:null};var U=y.value;return M.callback=function(){hn||(hn=!0,Sn=U),si(0,y)},M}function pi(W,y,M){(M=wM(-1,M)).tag=3;var U=W.type.getDerivedStateFromError;if("function"==typeof U){var i=y.value;M.payload=function(){return U(i)},M.callback=function(){si(0,y)}}var x=W.stateNode;return null!==x&&"function"==typeof x.componentDidCatch&&(M.callback=function(){si(0,y),"function"!=typeof U&&(null===on?on=new Set([this]):on.add(this));var W=y.stack;this.componentDidCatch(y.value,{componentStack:null!==W?W:""})}),M}function bi(W,y,M){var U=W.pingCache;if(null===U){U=W.pingCache=new Ni;var i=new Set;U.set(y,i)}else void 0===(i=U.get(y))&&(i=new Set,U.set(y,i));i.has(M)||(i.add(M),W=Wk.bind(null,W,y,M),y.then(W,W))}function mi(W){do{var y;if((y=13===W.tag)&&(y=null===(y=W.memoizedState)||null!==y.dehydrated),y)return W;W=W.return}while(null!==W);return null}function zi(W,y,M,U,i){return 1&W.mode?(W.flags|=65536,W.lanes=i,W):(W===y?W.flags|=65536:(W.flags|=128,M.flags|=131072,M.flags&=-52805,1===M.tag&&(null===M.alternate?M.tag=17:((y=wM(-1,1)).tag=2,FM(M,y,1))),M.lanes|=1),W)}var Ki=k.ReactCurrentOwner,Pi=!1;function Ri(W,y,M,U){y.child=null===W?lU(y,null,M,U):eU(y,W.child,M,U)}function Ii(W,y,M,U,i){M=M.render;var x=y.ref;return fM(y,i),U=ZU(W,y,M,U,x,i),M=fU(),null===W||Pi?(cM&&M&&eM(y),y.flags|=1,Ri(W,y,U,i),y.child):(y.updateQueue=W.updateQueue,y.flags&=-2053,W.lanes&=~i,ix(W,y,i))}function Ei(W,y,M,U,i){if(null===W){var x=M.type;return"function"!=typeof x||kk(x)||void 0!==x.defaultProps||null!==M.compare||void 0!==M.defaultProps?((W=uk(M.type,null,U,y,y.mode,i)).ref=y.ref,W.return=y,y.child=W):(y.tag=15,y.type=x,Zi(W,y,x,U,i))}if(x=W.child,!(W.lanes&i)){var n=x.memoizedProps;if((M=null!==(M=M.compare)?M:_M)(n,U)&&W.ref===y.ref)return ix(W,y,i)}return y.flags|=1,(W=gk(x,U)).ref=y.ref,W.return=y,y.child=W}function Zi(W,y,M,U,i){if(null!==W){var x=W.memoizedProps;if(_M(x,U)&&W.ref===y.ref){if(Pi=!1,y.pendingProps=U=x,!(W.lanes&i))return y.lanes=W.lanes,ix(W,y,i);131072&W.flags&&(Pi=!0)}}return $i(W,y,M,U,i)}function fi(W,y,M){var U=y.pendingProps,i=U.children,x=null!==W?W.memoizedState:null;if("hidden"===U.mode)if(1&y.mode){if(!(1073741824&M))return W=null!==x?x.baseLanes|M:M,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:W,cachePool:null,transitions:null},y.updateQueue=null,uy(kn,nn),nn|=W,null;y.memoizedState={baseLanes:0,cachePool:null,transitions:null},U=null!==x?x.baseLanes:M,uy(kn,nn),nn|=U}else y.memoizedState={baseLanes:0,cachePool:null,transitions:null},uy(kn,nn),nn|=M;else null!==x?(U=x.baseLanes|M,y.memoizedState=null):U=M,uy(kn,nn),nn|=U;return Ri(W,y,i,M),y.child}function Vi(W,y){var M=y.ref;(null===W&&null!==M||null!==W&&W.ref!==M)&&(y.flags|=512,y.flags|=2097152)}function $i(W,y,M,U,i){var x=Dy(M)?Yy:ly.current;return x=cy(y,x),fM(y,i),M=ZU(W,y,M,U,x,i),U=fU(),null===W||Pi?(cM&&U&&eM(y),y.flags|=1,Ri(W,y,M,i),y.child):(y.updateQueue=W.updateQueue,y.flags&=-2053,W.lanes&=~i,ix(W,y,i))}function ai(W,y,M,U,i){if(Dy(M)){var x=!0;Oy(y)}else x=!1;if(fM(y,i),null===y.stateNode)Ux(W,y),UU(y,M,U),xU(y,M,U,i),U=!0;else if(null===W){var n=y.stateNode,k=y.memoizedProps;n.props=k;var g=n.context,u=M.contextType;u="object"==typeof u&&null!==u?VM(u):cy(y,u=Dy(M)?Yy:ly.current);var e=M.getDerivedStateFromProps,l="function"==typeof e||"function"==typeof n.getSnapshotBeforeUpdate;l||"function"!=typeof n.UNSAFE_componentWillReceiveProps&&"function"!=typeof n.componentWillReceiveProps||(k!==U||g!==u)&&iU(y,n,U,u),vM=!1;var G=y.memoizedState;n.state=G,jM(y,U,n,i),g=y.memoizedState,k!==U||G!==g||Gy.current||vM?("function"==typeof e&&(WU(y,M,e,U),g=y.memoizedState),(k=vM||MU(y,M,k,U,G,g,u))?(l||"function"!=typeof n.UNSAFE_componentWillMount&&"function"!=typeof n.componentWillMount||("function"==typeof n.componentWillMount&&n.componentWillMount(),"function"==typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount()),"function"==typeof n.componentDidMount&&(y.flags|=4194308)):("function"==typeof n.componentDidMount&&(y.flags|=4194308),y.memoizedProps=U,y.memoizedState=g),n.props=U,n.state=g,n.context=u,U=k):("function"==typeof n.componentDidMount&&(y.flags|=4194308),U=!1)}else{n=y.stateNode,XM(W,y),k=y.memoizedProps,u=y.type===y.elementType?k:bM(y.type,k),n.props=u,l=y.pendingProps,G=n.context,g="object"==typeof(g=M.contextType)&&null!==g?VM(g):cy(y,g=Dy(M)?Yy:ly.current);var Y=M.getDerivedStateFromProps;(e="function"==typeof Y||"function"==typeof n.getSnapshotBeforeUpdate)||"function"!=typeof n.UNSAFE_componentWillReceiveProps&&"function"!=typeof n.componentWillReceiveProps||(k!==l||G!==g)&&iU(y,n,U,g),vM=!1,G=y.memoizedState,n.state=G,jM(y,U,n,i);var c=y.memoizedState;k!==l||G!==c||Gy.current||vM?("function"==typeof Y&&(WU(y,M,Y,U),c=y.memoizedState),(u=vM||MU(y,M,u,U,G,c,g)||!1)?(e||"function"!=typeof n.UNSAFE_componentWillUpdate&&"function"!=typeof n.componentWillUpdate||("function"==typeof n.componentWillUpdate&&n.componentWillUpdate(U,c,g),"function"==typeof n.UNSAFE_componentWillUpdate&&n.UNSAFE_componentWillUpdate(U,c,g)),"function"==typeof n.componentDidUpdate&&(y.flags|=4),"function"==typeof n.getSnapshotBeforeUpdate&&(y.flags|=1024)):("function"!=typeof n.componentDidUpdate||k===W.memoizedProps&&G===W.memoizedState||(y.flags|=4),"function"!=typeof n.getSnapshotBeforeUpdate||k===W.memoizedProps&&G===W.memoizedState||(y.flags|=1024),y.memoizedProps=U,y.memoizedState=c),n.props=U,n.state=c,n.context=g,U=u):("function"!=typeof n.componentDidUpdate||k===W.memoizedProps&&G===W.memoizedState||(y.flags|=4),"function"!=typeof n.getSnapshotBeforeUpdate||k===W.memoizedProps&&G===W.memoizedState||(y.flags|=1024),U=!1)}return Hi(W,y,M,U,x,i)}function Hi(W,y,M,U,i,x){Vi(W,y);var n=!!(128&y.flags);if(!U&&!n)return i&&hy(y,M,!1),ix(W,y,x);U=y.stateNode,Ki.current=y;var k=n&&"function"!=typeof M.getDerivedStateFromError?null:U.render();return y.flags|=1,null!==W&&n?(y.child=eU(y,W.child,null,x),y.child=eU(y,null,k,x)):Ri(W,y,k,x),y.memoizedState=U.state,i&&hy(y,M,!0),y.child}function Bi(W){var y=W.stateNode;y.pendingContext?Ay(0,y.pendingContext,y.pendingContext!==y.context):y.context&&Ay(0,y.context,!1),AU(W,y.containerInfo)}function vi(W,y,M,U,i){return qM(),sM(i),y.flags|=256,Ri(W,y,M,U),y.child}var Li,Xi,wi,Fi,ti={dehydrated:null,treeContext:null,retryLane:0};function Ji(W){return{baseLanes:W,cachePool:null,transitions:null}}function ji(W,y,M){var U,i=y.pendingProps,x=SU.current,k=!1,g=!!(128&y.flags);if((U=g)||(U=(null===W||null!==W.memoizedState)&&!!(2&x)),U?(k=!0,y.flags&=-129):null!==W&&null===W.memoizedState||(x|=1),uy(SU,1&x),null===W)return hM(y),null!==(W=y.memoizedState)&&null!==(W=W.dehydrated)?(1&y.mode?ZW(W)?y.lanes=8:y.lanes=1073741824:y.lanes=1,null):(g=i.children,W=i.fallback,k?(i=y.mode,k=y.child,g={mode:"hidden",children:g},1&i||null===k?k=lk(g,i,0,null):(k.childLanes=0,k.pendingProps=g),W=ek(W,i,M,null),k.return=y,W.return=y,k.sibling=W,y.child=k,y.child.memoizedState=Ji(M),y.memoizedState=ti,W):Ci(y,g));if(null!==(x=W.memoizedState)&&null!==(U=x.dehydrated))return function(W,y,M,U,i,x,k){if(M)return 256&y.flags?(y.flags&=-257,Qi(W,y,k,U=qi(Error(n(422))))):null!==y.memoizedState?(y.child=W.child,y.flags|=128,null):(x=U.fallback,i=y.mode,U=lk({mode:"visible",children:U.children},i,0,null),(x=ek(x,i,k,null)).flags|=2,U.return=y,x.return=y,U.sibling=x,y.child=U,1&y.mode&&eU(y,W.child,null,k),y.child.memoizedState=Ji(k),y.memoizedState=ti,x);if(!(1&y.mode))return Qi(W,y,k,null);if(ZW(i))return U=fW(i).digest,Qi(W,y,k,U=qi(x=Error(n(419)),U,void 0));if(M=!!(k&W.childLanes),Pi||M){if(null!==(U=Mn)){switch(k&-k){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=i&(U.suspendedLanes|k)?0:i)&&i!==x.retryLane&&(x.retryLane=i,BM(W,i),Kn(U,W,i,-1))}return vn(),Qi(W,y,k,U=qi(Error(n(421))))}return EW(i)?(y.flags|=128,y.child=W.child,y=Mk.bind(null,W),VW(i,y),null):(W=x.treeContext,J&&(YM=BW(i),GM=y,cM=!0,rM=null,DM=!1,null!==W&&(UM[iM++]=nM,UM[iM++]=kM,UM[iM++]=xM,nM=W.id,kM=W.overflow,xM=y)),(y=Ci(y,U.children)).flags|=4096,y)}(W,y,g,i,U,x,M);if(k){k=i.fallback,g=y.mode,U=(x=W.child).sibling;var u={mode:"hidden",children:i.children};return 1&g||y.child===x?(i=gk(x,u)).subtreeFlags=14680064&x.subtreeFlags:((i=y.child).childLanes=0,i.pendingProps=u,y.deletions=null),null!==U?k=gk(U,k):(k=ek(k,g,M,null)).flags|=2,k.return=y,i.return=y,i.sibling=k,y.child=i,i=k,k=y.child,g=null===(g=W.child.memoizedState)?Ji(M):{baseLanes:g.baseLanes|M,cachePool:null,transitions:g.transitions},k.memoizedState=g,k.childLanes=W.childLanes&~M,y.memoizedState=ti,i}return W=(k=W.child).sibling,i=gk(k,{mode:"visible",children:i.children}),!(1&y.mode)&&(i.lanes=M),i.return=y,i.sibling=null,null!==W&&(null===(M=y.deletions)?(y.deletions=[W],y.flags|=16):M.push(W)),y.child=i,y.memoizedState=null,i}function Ci(W,y){return(y=lk({mode:"visible",children:y},W.mode,0,null)).return=W,W.child=y}function Qi(W,y,M,U){return null!==U&&sM(U),eU(y,W.child,null,M),(W=Ci(y,y.pendingProps.children)).flags|=2,y.memoizedState=null,W}function Wx(W,y,M){W.lanes|=y;var U=W.alternate;null!==U&&(U.lanes|=y),ZM(W.return,y,M)}function yx(W,y,M,U,i){var x=W.memoizedState;null===x?W.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:U,tail:M,tailMode:i}:(x.isBackwards=y,x.rendering=null,x.renderingStartTime=0,x.last=U,x.tail=M,x.tailMode=i)}function Mx(W,y,M){var U=y.pendingProps,i=U.revealOrder,x=U.tail;if(Ri(W,y,U.children,M),2&(U=SU.current))U=1&U|2,y.flags|=128;else{if(null!==W&&128&W.flags)W:for(W=y.child;null!==W;){if(13===W.tag)null!==W.memoizedState&&Wx(W,M,y);else if(19===W.tag)Wx(W,M,y);else if(null!==W.child){W.child.return=W,W=W.child;continue}if(W===y)break W;for(;null===W.sibling;){if(null===W.return||W.return===y)break W;W=W.return}W.sibling.return=W.return,W=W.sibling}U&=1}if(uy(SU,U),1&y.mode)switch(i){case"forwards":for(M=y.child,i=null;null!==M;)null!==(W=M.alternate)&&null===oU(W)&&(i=M),M=M.sibling;null===(M=i)?(i=y.child,y.child=null):(i=M.sibling,M.sibling=null),yx(y,!1,i,M,x);break;case"backwards":for(M=null,i=y.child,y.child=null;null!==i;){if(null!==(W=i.alternate)&&null===oU(W)){y.child=i;break}W=i.sibling,i.sibling=M,M=i,i=W}yx(y,!0,M,null,x);break;case"together":yx(y,!1,null,null,void 0);break;default:y.memoizedState=null}else y.memoizedState=null;return y.child}function Ux(W,y){!(1&y.mode)&&null!==W&&(W.alternate=null,y.alternate=null,y.flags|=2)}function ix(W,y,M){if(null!==W&&(y.dependencies=W.dependencies),en|=y.lanes,!(M&y.childLanes))return null;if(null!==W&&y.child!==W.child)throw Error(n(153));if(null!==y.child){for(M=gk(W=y.child,W.pendingProps),y.child=M,M.return=y;null!==W.sibling;)W=W.sibling,(M=M.sibling=gk(W,W.pendingProps)).return=y;M.sibling=null}return y.child}function xx(W){W.flags|=4}function nx(W,y){if(null!==W&&W.child===y.child)return!0;if(16&y.flags)return!1;for(W=y.child;null!==W;){if(12854&W.flags||12854&W.subtreeFlags)return!1;W=W.sibling}return!0}if(F)Li=function(W,y){for(var M=y.child;null!==M;){if(5===M.tag||6===M.tag)V(W,M.stateNode);else if(4!==M.tag&&null!==M.child){M.child.return=M,M=M.child;continue}if(M===y)break;for(;null===M.sibling;){if(null===M.return||M.return===y)return;M=M.return}M.sibling.return=M.return,M=M.sibling}},Xi=function(){},wi=function(W,y,M,U,i){if((W=W.memoizedProps)!==U){var x=y.stateNode,n=rU(YU.current);M=a(x,M,W,U,i,n),(y.updateQueue=M)&&xx(y)}},Fi=function(W,y,M,U){M!==U&&xx(y)};else if(t){Li=function(W,y,M,U){for(var i=y.child;null!==i;){if(5===i.tag){var x=i.stateNode;M&&U&&(x=zW(x,i.type,i.memoizedProps,i)),V(W,x)}else if(6===i.tag)x=i.stateNode,M&&U&&(x=KW(x,i.memoizedProps,i)),V(W,x);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(x=i.child)&&(x.return=i),Li(W,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===y)break;for(;null===i.sibling;){if(null===i.return||i.return===y)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var kx=function(W,y,M,U){for(var i=y.child;null!==i;){if(5===i.tag){var x=i.stateNode;M&&U&&(x=zW(x,i.type,i.memoizedProps,i)),pW(W,x)}else if(6===i.tag)x=i.stateNode,M&&U&&(x=KW(x,i.memoizedProps,i)),pW(W,x);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(x=i.child)&&(x.return=i),kx(W,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===y)break;for(;null===i.sibling;){if(null===i.return||i.return===y)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Xi=function(W,y){var M=y.stateNode;if(!nx(W,y)){W=M.containerInfo;var U=_W(W);kx(U,y,!1,!1),M.pendingChildren=U,xx(y),bW(W,U)}},wi=function(W,y,M,U,i){var x=W.stateNode,n=W.memoizedProps;if((W=nx(W,y))&&n===U)y.stateNode=x;else{var k=y.stateNode,g=rU(YU.current),u=null;n!==U&&(u=a(k,M,n,U,i,g)),W&&null===u?y.stateNode=x:(x=NW(x,u,M,n,U,y,W,k),$(x,M,U,i,g)&&xx(y),y.stateNode=x,W?xx(y):Li(x,y,!1,!1))}},Fi=function(W,y,M,U){M!==U?(W=rU(DU.current),M=rU(YU.current),y.stateNode=B(U,W,M,y),xx(y)):y.stateNode=W.stateNode}}else Xi=function(){},wi=function(){},Fi=function(){};function gx(W,y){if(!cM)switch(W.tailMode){case"hidden":y=W.tail;for(var M=null;null!==y;)null!==y.alternate&&(M=y),y=y.sibling;null===M?W.tail=null:M.sibling=null;break;case"collapsed":M=W.tail;for(var U=null;null!==M;)null!==M.alternate&&(U=M),M=M.sibling;null===U?y||null===W.tail?W.tail=null:W.tail.sibling=null:U.sibling=null}}function ux(W){var y=null!==W.alternate&&W.alternate.child===W.child,M=0,U=0;if(y)for(var i=W.child;null!==i;)M|=i.lanes|i.childLanes,U|=14680064&i.subtreeFlags,U|=14680064&i.flags,i.return=W,i=i.sibling;else for(i=W.child;null!==i;)M|=i.lanes|i.childLanes,U|=i.subtreeFlags,U|=i.flags,i.return=W,i=i.sibling;return W.subtreeFlags|=U,W.childLanes=M,y}function ex(W,y,M){var U=y.pendingProps;switch(lM(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ux(y),null;case 1:case 17:return Dy(y.type)&&ry(),ux(y),null;case 3:return M=y.stateNode,TU(),gy(Gy),gy(ly),qU(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),null!==W&&null!==W.child||(oM(y)?xx(y):null===W||W.memoizedState.isDehydrated&&!(256&y.flags)||(y.flags|=1024,null!==rM&&(En(rM),rM=null))),Xi(W,y),ux(y),null;case 5:hU(y),M=rU(DU.current);var i=y.type;if(null!==W&&null!=y.stateNode)wi(W,y,i,U,M),W.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!U){if(null===y.stateNode)throw Error(n(166));return ux(y),null}if(W=rU(YU.current),oM(y)){if(!J)throw Error(n(175));W=vW(y.stateNode,y.type,y.memoizedProps,M,W,y,!DM),y.updateQueue=W,null!==W&&xx(y)}else{var x=f(i,U,M,W,y);Li(x,y,!1,!1),y.stateNode=x,$(x,i,U,M,W)&&xx(y)}null!==y.ref&&(y.flags|=512,y.flags|=2097152)}return ux(y),null;case 6:if(W&&null!=y.stateNode)Fi(W,y,W.memoizedProps,U);else{if("string"!=typeof U&&null===y.stateNode)throw Error(n(166));if(W=rU(DU.current),M=rU(YU.current),oM(y)){if(!J)throw Error(n(176));if(W=y.stateNode,M=y.memoizedProps,(U=LW(W,M,y,!DM))&&null!==(i=GM))switch(i.tag){case 3:QW(i.stateNode.containerInfo,W,M,!!(1&i.mode));break;case 5:Wy(i.type,i.memoizedProps,i.stateNode,W,M,!!(1&i.mode))}U&&xx(y)}else y.stateNode=B(U,W,M,y)}return ux(y),null;case 13:if(gy(SU),U=y.memoizedState,null===W||null!==W.memoizedState&&null!==W.memoizedState.dehydrated){if(cM&&null!==YM&&1&y.mode&&!(128&y.flags))dM(),qM(),y.flags|=98560,i=!1;else if(i=oM(y),null!==U&&null!==U.dehydrated){if(null===W){if(!i)throw Error(n(318));if(!J)throw Error(n(344));if(!(i=null!==(i=y.memoizedState)?i.dehydrated:null))throw Error(n(317));XW(i,y)}else qM(),!(128&y.flags)&&(y.memoizedState=null),y.flags|=4;ux(y),i=!1}else null!==rM&&(En(rM),rM=null),i=!0;if(!i)return 65536&y.flags?y:null}return 128&y.flags?(y.lanes=M,y):((M=null!==U)!=(null!==W&&null!==W.memoizedState)&&M&&(y.child.flags|=8192,1&y.mode&&(null===W||1&SU.current?0===gn&&(gn=3):vn())),null!==y.updateQueue&&(y.flags|=4),ux(y),null);case 4:return TU(),Xi(W,y),null===W&&C(y.stateNode.containerInfo),ux(y),null;case 10:return EM(y.type._context),ux(y),null;case 19:if(gy(SU),null===(i=y.memoizedState))return ux(y),null;if(U=!!(128&y.flags),null===(x=i.rendering))if(U)gx(i,!1);else{if(0!==gn||null!==W&&128&W.flags)for(W=y.child;null!==W;){if(null!==(x=oU(W))){for(y.flags|=128,gx(i,!1),null!==(W=x.updateQueue)&&(y.updateQueue=W,y.flags|=4),y.subtreeFlags=0,W=M,M=y.child;null!==M;)i=W,(U=M).flags&=14680066,null===(x=U.alternate)?(U.childLanes=0,U.lanes=i,U.child=null,U.subtreeFlags=0,U.memoizedProps=null,U.memoizedState=null,U.updateQueue=null,U.dependencies=null,U.stateNode=null):(U.childLanes=x.childLanes,U.lanes=x.lanes,U.child=x.child,U.subtreeFlags=0,U.deletions=null,U.memoizedProps=x.memoizedProps,U.memoizedState=x.memoizedState,U.updateQueue=x.updateQueue,U.type=x.type,i=x.dependencies,U.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),M=M.sibling;return uy(SU,1&SU.current|2),y.child}W=W.sibling}null!==i.tail&&$y()>rn&&(y.flags|=128,U=!0,gx(i,!1),y.lanes=4194304)}else{if(!U)if(null!==(W=oU(x))){if(y.flags|=128,U=!0,null!==(W=W.updateQueue)&&(y.updateQueue=W,y.flags|=4),gx(i,!0),null===i.tail&&"hidden"===i.tailMode&&!x.alternate&&!cM)return ux(y),null}else 2*$y()-i.renderingStartTime>rn&&1073741824!==M&&(y.flags|=128,U=!0,gx(i,!1),y.lanes=4194304);i.isBackwards?(x.sibling=y.child,y.child=x):(null!==(W=i.last)?W.sibling=x:y.child=x,i.last=x)}return null!==i.tail?(y=i.tail,i.rendering=y,i.tail=y.sibling,i.renderingStartTime=$y(),y.sibling=null,W=SU.current,uy(SU,U?1&W|2:1&W),y):(ux(y),null);case 22:case 23:return $n(),M=null!==y.memoizedState,null!==W&&null!==W.memoizedState!==M&&(y.flags|=8192),M&&1&y.mode?!!(1073741824&nn)&&(ux(y),F&&6&y.subtreeFlags&&(y.flags|=8192)):ux(y),null;case 24:case 25:return null}throw Error(n(156,y.tag))}function lx(W,y){switch(lM(y),y.tag){case 1:return Dy(y.type)&&ry(),65536&(W=y.flags)?(y.flags=-65537&W|128,y):null;case 3:return TU(),gy(Gy),gy(ly),qU(),65536&(W=y.flags)&&!(128&W)?(y.flags=-65537&W|128,y):null;case 5:return hU(y),null;case 13:if(gy(SU),null!==(W=y.memoizedState)&&null!==W.dehydrated){if(null===y.alternate)throw Error(n(340));qM()}return 65536&(W=y.flags)?(y.flags=-65537&W|128,y):null;case 19:return gy(SU),null;case 4:return TU(),null;case 10:return EM(y.type._context),null;case 22:case 23:return $n(),null;default:return null}}var Gx=!1,Yx=!1,cx="function"==typeof WeakSet?WeakSet:Set,Dx=null;function rx(W,y){var M=W.ref;if(null!==M)if("function"==typeof M)try{M(null)}catch(M){Qn(W,y,M)}else M.current=null}function Ax(W,y,M){try{M()}catch(M){Qn(W,y,M)}}var Tx=!1;function Ox(W,y,M){var U=y.updateQueue;if(null!==(U=null!==U?U.lastEffect:null)){var i=U=U.next;do{if((i.tag&W)===W){var x=i.destroy;i.destroy=void 0,void 0!==x&&Ax(y,M,x)}i=i.next}while(i!==U)}}function hx(W,y){if(null!==(y=null!==(y=y.updateQueue)?y.lastEffect:null)){var M=y=y.next;do{if((M.tag&W)===W){var U=M.create;M.destroy=U()}M=M.next}while(M!==y)}}function Sx(W){var y=W.ref;if(null!==y){var M=W.stateNode;W=5===W.tag?P(M):M,"function"==typeof y?y(W):y.current=W}}function ox(W){var y=W.alternate;null!==y&&(W.alternate=null,ox(y)),W.child=null,W.deletions=null,W.sibling=null,5===W.tag&&null!==(y=W.stateNode)&&WW(y),W.stateNode=null,W.return=null,W.dependencies=null,W.memoizedProps=null,W.memoizedState=null,W.pendingProps=null,W.stateNode=null,W.updateQueue=null}function dx(W){return 5===W.tag||3===W.tag||4===W.tag}function qx(W){W:for(;;){for(;null===W.sibling;){if(null===W.return||dx(W.return))return null;W=W.return}for(W.sibling.return=W.return,W=W.sibling;5!==W.tag&&6!==W.tag&&18!==W.tag;){if(2&W.flags)continue W;if(null===W.child||4===W.tag)continue W;W.child.return=W,W=W.child}if(!(2&W.flags))return W.stateNode}}function sx(W,y,M){var U=W.tag;if(5===U||6===U)W=W.stateNode,y?AW(M,W,y):GW(M,W);else if(4!==U&&null!==(W=W.child))for(sx(W,y,M),W=W.sibling;null!==W;)sx(W,y,M),W=W.sibling}function Nx(W,y,M){var U=W.tag;if(5===U||6===U)W=W.stateNode,y?rW(M,W,y):lW(M,W);else if(4!==U&&null!==(W=W.child))for(Nx(W,y,M),W=W.sibling;null!==W;)Nx(W,y,M),W=W.sibling}var _x=null,px=!1;function bx(W,y,M){for(M=M.child;null!==M;)mx(W,y,M),M=M.sibling}function mx(W,y,M){if(Xy&&"function"==typeof Xy.onCommitFiberUnmount)try{Xy.onCommitFiberUnmount(Ly,M)}catch(W){}switch(M.tag){case 5:Yx||rx(M,y);case 6:if(F){var U=_x,i=px;_x=null,bx(W,y,M),px=i,null!==(_x=U)&&(px?OW(_x,M.stateNode):TW(_x,M.stateNode))}else bx(W,y,M);break;case 18:F&&null!==_x&&(px?jW(_x,M.stateNode):JW(_x,M.stateNode));break;case 4:F?(U=_x,i=px,_x=M.stateNode.containerInfo,px=!0,bx(W,y,M),_x=U,px=i):(t&&(U=M.stateNode.containerInfo,i=_W(U),mW(U,i)),bx(W,y,M));break;case 0:case 11:case 14:case 15:if(!Yx&&null!==(U=M.updateQueue)&&null!==(U=U.lastEffect)){i=U=U.next;do{var x=i,n=x.destroy;x=x.tag,void 0!==n&&(2&x||4&x)&&Ax(M,y,n),i=i.next}while(i!==U)}bx(W,y,M);break;case 1:if(!Yx&&(rx(M,y),"function"==typeof(U=M.stateNode).componentWillUnmount))try{U.props=M.memoizedProps,U.state=M.memoizedState,U.componentWillUnmount()}catch(W){Qn(M,y,W)}bx(W,y,M);break;case 21:bx(W,y,M);break;case 22:1&M.mode?(Yx=(U=Yx)||null!==M.memoizedState,bx(W,y,M),Yx=U):bx(W,y,M);break;default:bx(W,y,M)}}function zx(W){var y=W.updateQueue;if(null!==y){W.updateQueue=null;var M=W.stateNode;null===M&&(M=W.stateNode=new cx),y.forEach((function(y){var U=Uk.bind(null,W,y);M.has(y)||(M.add(y),y.then(U,U))}))}}function Kx(W,y){var M=y.deletions;if(null!==M)for(var U=0;U<M.length;U++){var i=M[U];try{var x=W,k=y;if(F){var g=k;W:for(;null!==g;){switch(g.tag){case 5:_x=g.stateNode,px=!1;break W;case 3:case 4:_x=g.stateNode.containerInfo,px=!0;break W}g=g.return}if(null===_x)throw Error(n(160));mx(x,k,i),_x=null,px=!1}else mx(x,k,i);var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(W){Qn(i,y,W)}}if(12854&y.subtreeFlags)for(y=y.child;null!==y;)Px(y,W),y=y.sibling}function Px(W,y){var M=W.alternate,U=W.flags;switch(W.tag){case 0:case 11:case 14:case 15:if(Kx(y,W),Rx(W),4&U){try{Ox(3,W,W.return),hx(3,W)}catch(y){Qn(W,W.return,y)}try{Ox(5,W,W.return)}catch(y){Qn(W,W.return,y)}}break;case 1:Kx(y,W),Rx(W),512&U&&null!==M&&rx(M,M.return);break;case 5:if(Kx(y,W),Rx(W),512&U&&null!==M&&rx(M,M.return),F){if(32&W.flags){var i=W.stateNode;try{hW(i)}catch(y){Qn(W,W.return,y)}}if(4&U&&null!=(i=W.stateNode)){var x=W.memoizedProps;if(M=null!==M?M.memoizedProps:x,U=W.type,y=W.updateQueue,W.updateQueue=null,null!==y)try{DW(i,y,U,M,x,W)}catch(y){Qn(W,W.return,y)}}}break;case 6:if(Kx(y,W),Rx(W),4&U&&F){if(null===W.stateNode)throw Error(n(162));i=W.stateNode,x=W.memoizedProps,M=null!==M?M.memoizedProps:x;try{YW(i,M,x)}catch(y){Qn(W,W.return,y)}}break;case 3:if(Kx(y,W),Rx(W),4&U){if(F&&J&&null!==M&&M.memoizedState.isDehydrated)try{FW(y.containerInfo)}catch(y){Qn(W,W.return,y)}if(t){i=y.containerInfo,x=y.pendingChildren;try{mW(i,x)}catch(y){Qn(W,W.return,y)}}}break;case 4:if(Kx(y,W),Rx(W),4&U&&t){i=(x=W.stateNode).containerInfo,x=x.pendingChildren;try{mW(i,x)}catch(y){Qn(W,W.return,y)}}break;case 13:Kx(y,W),Rx(W),8192&(i=W.child).flags&&(x=null!==i.memoizedState,i.stateNode.isHidden=x,!x||null!==i.alternate&&null!==i.alternate.memoizedState||(Dn=$y())),4&U&&zx(W);break;case 22:var k=null!==M&&null!==M.memoizedState;if(1&W.mode?(Yx=(M=Yx)||k,Kx(y,W),Yx=M):Kx(y,W),Rx(W),8192&U){if(M=null!==W.memoizedState,(W.stateNode.isHidden=M)&&!k&&1&W.mode)for(Dx=W,U=W.child;null!==U;){for(y=Dx=U;null!==Dx;){var g=(k=Dx).child;switch(k.tag){case 0:case 11:case 14:case 15:Ox(4,k,k.return);break;case 1:rx(k,k.return);var u=k.stateNode;if("function"==typeof u.componentWillUnmount){var e=k,l=k.return;try{var G=e;u.props=G.memoizedProps,u.state=G.memoizedState,u.componentWillUnmount()}catch(W){Qn(e,l,W)}}break;case 5:rx(k,k.return);break;case 22:if(null!==k.memoizedState){fx(y);continue}}null!==g?(g.return=k,Dx=g):fx(y)}U=U.sibling}if(F)W:if(U=null,F)for(y=W;;){if(5===y.tag){if(null===U){U=y;try{i=y.stateNode,M?SW(i):dW(y.stateNode,y.memoizedProps)}catch(y){Qn(W,W.return,y)}}}else if(6===y.tag){if(null===U)try{x=y.stateNode,M?oW(x):qW(x,y.memoizedProps)}catch(y){Qn(W,W.return,y)}}else if((22!==y.tag&&23!==y.tag||null===y.memoizedState||y===W)&&null!==y.child){y.child.return=y,y=y.child;continue}if(y===W)break W;for(;null===y.sibling;){if(null===y.return||y.return===W)break W;U===y&&(U=null),y=y.return}U===y&&(U=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Kx(y,W),Rx(W),4&U&&zx(W);break;case 21:break;default:Kx(y,W),Rx(W)}}function Rx(W){var y=W.flags;if(2&y){try{if(F){W:{for(var M=W.return;null!==M;){if(dx(M)){var U=M;break W}M=M.return}throw Error(n(160))}switch(U.tag){case 5:var i=U.stateNode;32&U.flags&&(hW(i),U.flags&=-33),Nx(W,qx(W),i);break;case 3:case 4:var x=U.stateNode.containerInfo;sx(W,qx(W),x);break;default:throw Error(n(161))}}}catch(y){Qn(W,W.return,y)}W.flags&=-3}4096&y&&(W.flags&=-4097)}function Ix(W,y,M){Dx=W,Ex(W,y,M)}function Ex(W,y,M){for(var U=!!(1&W.mode);null!==Dx;){var i=Dx,x=i.child;if(22===i.tag&&U){var n=null!==i.memoizedState||Gx;if(!n){var k=i.alternate,g=null!==k&&null!==k.memoizedState||Yx;k=Gx;var u=Yx;if(Gx=n,(Yx=g)&&!u)for(Dx=i;null!==Dx;)g=(n=Dx).child,22===n.tag&&null!==n.memoizedState?Vx(i):null!==g?(g.return=n,Dx=g):Vx(i);for(;null!==x;)Dx=x,Ex(x,y,M),x=x.sibling;Dx=i,Gx=k,Yx=u}Zx(W)}else 8772&i.subtreeFlags&&null!==x?(x.return=i,Dx=x):Zx(W)}}function Zx(W){for(;null!==Dx;){var y=Dx;if(8772&y.flags){var M=y.alternate;try{if(8772&y.flags)switch(y.tag){case 0:case 11:case 15:Yx||hx(5,y);break;case 1:var U=y.stateNode;if(4&y.flags&&!Yx)if(null===M)U.componentDidMount();else{var i=y.elementType===y.type?M.memoizedProps:bM(y.type,M.memoizedProps);U.componentDidUpdate(i,M.memoizedState,U.__reactInternalSnapshotBeforeUpdate)}var x=y.updateQueue;null!==x&&CM(y,x,U);break;case 3:var k=y.updateQueue;if(null!==k){if(M=null,null!==y.child)switch(y.child.tag){case 5:M=P(y.child.stateNode);break;case 1:M=y.child.stateNode}CM(y,k,M)}break;case 5:var g=y.stateNode;null===M&&4&y.flags&&cW(g,y.type,y.memoizedProps,y);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(J&&null===y.memoizedState){var u=y.alternate;if(null!==u){var e=u.memoizedState;if(null!==e){var l=e.dehydrated;null!==l&&tW(l)}}}break;default:throw Error(n(163))}Yx||512&y.flags&&Sx(y)}catch(W){Qn(y,y.return,W)}}if(y===W){Dx=null;break}if(null!==(M=y.sibling)){M.return=y.return,Dx=M;break}Dx=y.return}}function fx(W){for(;null!==Dx;){var y=Dx;if(y===W){Dx=null;break}var M=y.sibling;if(null!==M){M.return=y.return,Dx=M;break}Dx=y.return}}function Vx(W){for(;null!==Dx;){var y=Dx;try{switch(y.tag){case 0:case 11:case 15:var M=y.return;try{hx(4,y)}catch(W){Qn(y,M,W)}break;case 1:var U=y.stateNode;if("function"==typeof U.componentDidMount){var i=y.return;try{U.componentDidMount()}catch(W){Qn(y,i,W)}}var x=y.return;try{Sx(y)}catch(W){Qn(y,x,W)}break;case 5:var n=y.return;try{Sx(y)}catch(W){Qn(y,n,W)}}}catch(W){Qn(y,y.return,W)}if(y===W){Dx=null;break}var k=y.sibling;if(null!==k){k.return=y.return,Dx=k;break}Dx=y.return}}var $x=0,ax=1,Hx=2,Bx=3,vx=4;if("function"==typeof Symbol&&Symbol.for){var Lx=Symbol.for;$x=Lx("selector.component"),ax=Lx("selector.has_pseudo_class"),Hx=Lx("selector.role"),Bx=Lx("selector.test_id"),vx=Lx("selector.text")}function Xx(W){var y=j(W);if(null!=y){if("string"!=typeof y.memoizedProps["data-testname"])throw Error(n(364));return y}if(null===(W=iW(W)))throw Error(n(362));return W.stateNode.current}function wx(W,y){switch(y.$$typeof){case $x:if(W.type===y.value)return!0;break;case ax:W:{y=y.value,W=[W,0];for(var M=0;M<W.length;){var U=W[M++],i=W[M++],x=y[i];if(5!==U.tag||!kW(U)){for(;null!=x&&wx(U,x);)x=y[++i];if(i===y.length){y=!0;break W}for(U=U.child;null!==U;)W.push(U,i),U=U.sibling}}y=!1}return y;case Hx:if(5===W.tag&&gW(W.stateNode,y.value))return!0;break;case vx:if((5===W.tag||6===W.tag)&&null!==(W=nW(W))&&0<=W.indexOf(y.value))return!0;break;case Bx:if(5===W.tag&&"string"==typeof(W=W.memoizedProps["data-testname"])&&W.toLowerCase()===y.value.toLowerCase())return!0;break;default:throw Error(n(365))}return!1}function Fx(W){switch(W.$$typeof){case $x:return"<"+(d(W.value)||"Unknown")+">";case ax:return":has("+(Fx(W)||"")+")";case Hx:return'[role="'+W.value+'"]';case vx:return'"'+W.value+'"';case Bx:return'[data-testname="'+W.value+'"]';default:throw Error(n(365))}}function tx(W,y){var M=[];W=[W,0];for(var U=0;U<W.length;){var i=W[U++],x=W[U++],n=y[x];if(5!==i.tag||!kW(i)){for(;null!=n&&wx(i,n);)n=y[++x];if(x===y.length)M.push(i);else for(i=i.child;null!==i;)W.push(i,x),i=i.sibling}}return M}function Jx(W,y){if(!UW)throw Error(n(363));W=tx(W=Xx(W),y),y=[],W=Array.from(W);for(var M=0;M<W.length;){var U=W[M++];if(5===U.tag)kW(U)||y.push(U.stateNode);else for(U=U.child;null!==U;)W.push(U),U=U.sibling}return y}var jx=Math.ceil,Cx=k.ReactCurrentDispatcher,Qx=k.ReactCurrentOwner,Wn=k.ReactCurrentBatchConfig,yn=0,Mn=null,Un=null,xn=0,nn=0,kn=ky(0),gn=0,un=null,en=0,ln=0,Gn=0,Yn=null,cn=null,Dn=0,rn=1/0,An=null;function Tn(){rn=$y()+500}var On,hn=!1,Sn=null,on=null,dn=!1,qn=null,sn=0,Nn=0,_n=null,pn=-1,bn=0;function mn(){return 6&yn?$y():-1!==pn?pn:pn=$y()}function zn(W){return 1&W.mode?2&yn&&0!==xn?xn&-xn:null!==NM.transition?(0===bn&&(bn=my()),bn):0!==(W=Ry)?W:Q():1}function Kn(W,y,M,U){if(50<Nn)throw Nn=0,_n=null,Error(n(185));Ky(W,M,U),2&yn&&W===Mn||(W===Mn&&(!(2&yn)&&(ln|=M),4===gn&&Zn(W,xn)),Pn(W,U),1===M&&0===yn&&!(1&y.mode)&&(Tn(),ty&&Cy()))}function Pn(W,y){var M=W.callbackNode;(function(W,y){for(var M=W.suspendedLanes,U=W.pingedLanes,i=W.expirationTimes,x=W.pendingLanes;0<x;){var n=31-Sy(x),k=1<<n,g=i[n];-1===g?k&M&&!(k&U)||(i[n]=py(k,y)):g<=y&&(W.expiredLanes|=k),x&=~k}})(W,y);var U=_y(W,W===Mn?xn:0);if(0===U)null!==M&&Zy(M),W.callbackNode=null,W.callbackPriority=0;else if(y=U&-U,W.callbackPriority!==y){if(null!=M&&Zy(M),1===y)0===W.tag?function(W){ty=!0,jy(W)}(fn.bind(null,W)):jy(fn.bind(null,W)),yW?MW((function(){!(6&yn)&&Cy()})):Ey(ay,Cy),M=null;else{switch(Iy(U)){case 1:M=ay;break;case 4:M=Hy;break;case 16:default:M=By;break;case 536870912:M=vy}M=ik(M,Rn.bind(null,W))}W.callbackPriority=y,W.callbackNode=M}}function Rn(W,y){if(pn=-1,bn=0,6&yn)throw Error(n(327));var M=W.callbackNode;if(jn()&&W.callbackNode!==M)return null;var U=_y(W,W===Mn?xn:0);if(0===U)return null;if(30&U||U&W.expiredLanes||y)y=Ln(W,U);else{y=U;var i=yn;yn|=2;var x=Bn();Mn===W&&xn===y||(An=null,Tn(),an(W,y));do{try{wn();break}catch(y){Hn(W,y)}}while(1);RM(),Cx.current=x,yn=i,null!==Un?y=0:(Mn=null,xn=0,y=gn)}if(0!==y){if(2===y&&0!==(i=by(W))&&(U=i,y=In(W,i)),1===y)throw M=un,an(W,0),Zn(W,U),Pn(W,$y()),M;if(6===y)Zn(W,U);else{if(i=W.current.alternate,!(30&U||function(W){for(var y=W;;){if(16384&y.flags){var M=y.updateQueue;if(null!==M&&null!==(M=M.stores))for(var U=0;U<M.length;U++){var i=M[U],x=i.getSnapshot;i=i.value;try{if(!wy(x(),i))return!1}catch(W){return!1}}}if(M=y.child,16384&y.subtreeFlags&&null!==M)M.return=y,y=M;else{if(y===W)break;for(;null===y.sibling;){if(null===y.return||y.return===W)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}(i)||(y=Ln(W,U),2===y&&(x=by(W),0!==x&&(U=x,y=In(W,x))),1!==y)))throw M=un,an(W,0),Zn(W,U),Pn(W,$y()),M;switch(W.finishedWork=i,W.finishedLanes=U,y){case 0:case 1:throw Error(n(345));case 2:case 5:Jn(W,cn,An);break;case 3:if(Zn(W,U),(130023424&U)===U&&10<(y=Dn+500-$y())){if(0!==_y(W,0))break;if(((i=W.suspendedLanes)&U)!==U){mn(),W.pingedLanes|=W.suspendedLanes&i;break}W.timeoutHandle=v(Jn.bind(null,W,cn,An),y);break}Jn(W,cn,An);break;case 4:if(Zn(W,U),(4194240&U)===U)break;for(y=W.eventTimes,i=-1;0<U;){var k=31-Sy(U);x=1<<k,(k=y[k])>i&&(i=k),U&=~x}if(U=i,10<(U=(120>(U=$y()-U)?120:480>U?480:1080>U?1080:1920>U?1920:3e3>U?3e3:4320>U?4320:1960*jx(U/1960))-U)){W.timeoutHandle=v(Jn.bind(null,W,cn,An),U);break}Jn(W,cn,An);break;default:throw Error(n(329))}}}return Pn(W,$y()),W.callbackNode===M?Rn.bind(null,W):null}function In(W,y){var M=Yn;return W.current.memoizedState.isDehydrated&&(an(W,y).flags|=256),2!==(W=Ln(W,y))&&(y=cn,cn=M,null!==y&&En(y)),W}function En(W){null===cn?cn=W:cn.push.apply(cn,W)}function Zn(W,y){for(y&=~Gn,y&=~ln,W.suspendedLanes|=y,W.pingedLanes&=~y,W=W.expirationTimes;0<y;){var M=31-Sy(y),U=1<<M;W[M]=-1,y&=~U}}function fn(W){if(6&yn)throw Error(n(327));jn();var y=_y(W,0);if(!(1&y))return Pn(W,$y()),null;var M=Ln(W,y);if(0!==W.tag&&2===M){var U=by(W);0!==U&&(y=U,M=In(W,U))}if(1===M)throw M=un,an(W,0),Zn(W,y),Pn(W,$y()),M;if(6===M)throw Error(n(345));return W.finishedWork=W.current.alternate,W.finishedLanes=y,Jn(W,cn,An),Pn(W,$y()),null}function Vn(W){null!==qn&&0===qn.tag&&!(6&yn)&&jn();var y=yn;yn|=1;var M=Wn.transition,U=Ry;try{if(Wn.transition=null,Ry=1,W)return W()}finally{Ry=U,Wn.transition=M,!(6&(yn=y))&&Cy()}}function $n(){nn=kn.current,gy(kn)}function an(W,y){W.finishedWork=null,W.finishedLanes=0;var M=W.timeoutHandle;if(M!==X&&(W.timeoutHandle=X,L(M)),null!==Un)for(M=Un.return;null!==M;){var U=M;switch(lM(U),U.tag){case 1:null!=(U=U.type.childContextTypes)&&ry();break;case 3:TU(),gy(Gy),gy(ly),qU();break;case 5:hU(U);break;case 4:TU();break;case 13:case 19:gy(SU);break;case 10:EM(U.type._context);break;case 22:case 23:$n()}M=M.return}if(Mn=W,Un=W=gk(W.current,null),xn=nn=y,gn=0,un=null,Gn=ln=en=0,cn=Yn=null,null!==$M){for(y=0;y<$M.length;y++)if(null!==(U=(M=$M[y]).interleaved)){M.interleaved=null;var i=U.next,x=M.pending;if(null!==x){var n=x.next;x.next=i,U.next=n}M.pending=U}$M=null}return W}function Hn(W,y){do{var M=Un;try{if(RM(),sU.current=Oi,zU){for(var U=pU.memoizedState;null!==U;){var i=U.queue;null!==i&&(i.pending=null),U=U.next}zU=!1}if(_U=0,mU=bU=pU=null,KU=!1,PU=0,Qx.current=null,null===M||null===M.return){gn=1,un=y,Un=null;break}W:{var x=W,k=M.return,g=M,u=y;if(y=xn,g.flags|=32768,null!==u&&"object"==typeof u&&"function"==typeof u.then){var e=u,l=g,G=l.tag;if(!(1&l.mode||0!==G&&11!==G&&15!==G)){var Y=l.alternate;Y?(l.updateQueue=Y.updateQueue,l.memoizedState=Y.memoizedState,l.lanes=Y.lanes):(l.updateQueue=null,l.memoizedState=null)}var c=mi(k);if(null!==c){c.flags&=-257,zi(c,k,g,0,y),1&c.mode&&bi(x,e,y),u=e;var D=(y=c).updateQueue;if(null===D){var r=new Set;r.add(u),y.updateQueue=r}else D.add(u);break W}if(!(1&y)){bi(x,e,y),vn();break W}u=Error(n(426))}else if(cM&&1&g.mode){var A=mi(k);if(null!==A){!(65536&A.flags)&&(A.flags|=256),zi(A,k,g,0,y),sM(di(u,g));break W}}x=u=di(u,g),4!==gn&&(gn=2),null===Yn?Yn=[x]:Yn.push(x),x=k;do{switch(x.tag){case 3:x.flags|=65536,y&=-y,x.lanes|=y,JM(x,_i(0,u,y));break W;case 1:g=u;var T=x.type,O=x.stateNode;if(!(128&x.flags||"function"!=typeof T.getDerivedStateFromError&&(null===O||"function"!=typeof O.componentDidCatch||null!==on&&on.has(O)))){x.flags|=65536,y&=-y,x.lanes|=y,JM(x,pi(x,g,y));break W}}x=x.return}while(null!==x)}tn(M)}catch(W){y=W,Un===M&&null!==M&&(Un=M=M.return);continue}break}while(1)}function Bn(){var W=Cx.current;return Cx.current=Oi,null===W?Oi:W}function vn(){0!==gn&&3!==gn&&2!==gn||(gn=4),null===Mn||!(268435455&en)&&!(268435455&ln)||Zn(Mn,xn)}function Ln(W,y){var M=yn;yn|=2;var U=Bn();Mn===W&&xn===y||(An=null,an(W,y));do{try{Xn();break}catch(y){Hn(W,y)}}while(1);if(RM(),yn=M,Cx.current=U,null!==Un)throw Error(n(261));return Mn=null,xn=0,gn}function Xn(){for(;null!==Un;)Fn(Un)}function wn(){for(;null!==Un&&!fy();)Fn(Un)}function Fn(W){var y=On(W.alternate,W,nn);W.memoizedProps=W.pendingProps,null===y?tn(W):Un=y,Qx.current=null}function tn(W){var y=W;do{var M=y.alternate;if(W=y.return,32768&y.flags){if(null!==(M=lx(M,y)))return M.flags&=32767,void(Un=M);if(null===W)return gn=6,void(Un=null);W.flags|=32768,W.subtreeFlags=0,W.deletions=null}else if(null!==(M=ex(M,y,nn)))return void(Un=M);if(null!==(y=y.sibling))return void(Un=y);Un=y=W}while(null!==y);0===gn&&(gn=5)}function Jn(W,y,M){var U=Ry,i=Wn.transition;try{Wn.transition=null,Ry=1,function(W,y,M,U){do{jn()}while(null!==qn);if(6&yn)throw Error(n(327));M=W.finishedWork;var i=W.finishedLanes;if(null===M)return null;if(W.finishedWork=null,W.finishedLanes=0,M===W.current)throw Error(n(177));W.callbackNode=null,W.callbackPriority=0;var x=M.lanes|M.childLanes;if(function(W,y){var M=W.pendingLanes&~y;W.pendingLanes=y,W.suspendedLanes=0,W.pingedLanes=0,W.expiredLanes&=y,W.mutableReadLanes&=y,W.entangledLanes&=y,y=W.entanglements;var U=W.eventTimes;for(W=W.expirationTimes;0<M;){var i=31-Sy(M),x=1<<i;y[i]=0,U[i]=-1,W[i]=-1,M&=~x}}(W,x),W===Mn&&(Un=Mn=null,xn=0),!(2064&M.subtreeFlags)&&!(2064&M.flags)||dn||(dn=!0,ik(By,(function(){return jn(),null}))),x=!!(15990&M.flags),15990&M.subtreeFlags||x){x=Wn.transition,Wn.transition=null;var k=Ry;Ry=1;var g=yn;yn|=4,Qx.current=null,function(W,y){for(E(W.containerInfo),Dx=y;null!==Dx;)if(y=(W=Dx).child,1028&W.subtreeFlags&&null!==y)y.return=W,Dx=y;else for(;null!==Dx;){W=Dx;try{var M=W.alternate;if(1024&W.flags)switch(W.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==M){var U=M.memoizedProps,i=M.memoizedState,x=W.stateNode,k=x.getSnapshotBeforeUpdate(W.elementType===W.type?U:bM(W.type,U),i);x.__reactInternalSnapshotBeforeUpdate=k}break;case 3:F&&sW(W.stateNode.containerInfo);break;default:throw Error(n(163))}}catch(y){Qn(W,W.return,y)}if(null!==(y=W.sibling)){y.return=W.return,Dx=y;break}Dx=W.return}M=Tx,Tx=!1}(W,M),Px(M,W),Z(W.containerInfo),W.current=M,Ix(M,W,i),Vy(),yn=g,Ry=k,Wn.transition=x}else W.current=M;if(dn&&(dn=!1,qn=W,sn=i),0===(x=W.pendingLanes)&&(on=null),function(W){if(Xy&&"function"==typeof Xy.onCommitFiberRoot)try{Xy.onCommitFiberRoot(Ly,W,void 0,!(128&~W.current.flags))}catch(W){}}(M.stateNode),Pn(W,$y()),null!==y)for(U=W.onRecoverableError,M=0;M<y.length;M++)U((i=y[M]).value,{componentStack:i.stack,digest:i.digest});if(hn)throw hn=!1,W=Sn,Sn=null,W;!!(1&sn)&&0!==W.tag&&jn(),1&(x=W.pendingLanes)?W===_n?Nn++:(Nn=0,_n=W):Nn=0,Cy()}(W,y,M,U)}finally{Wn.transition=i,Ry=U}return null}function jn(){if(null!==qn){var W=Iy(sn),y=Wn.transition,M=Ry;try{if(Wn.transition=null,Ry=16>W?16:W,null===qn)var U=!1;else{if(W=qn,qn=null,sn=0,6&yn)throw Error(n(331));var i=yn;for(yn|=4,Dx=W.current;null!==Dx;){var x=Dx,k=x.child;if(16&Dx.flags){var g=x.deletions;if(null!==g){for(var u=0;u<g.length;u++){var e=g[u];for(Dx=e;null!==Dx;){var l=Dx;switch(l.tag){case 0:case 11:case 15:Ox(8,l,x)}var G=l.child;if(null!==G)G.return=l,Dx=G;else for(;null!==Dx;){var Y=(l=Dx).sibling,c=l.return;if(ox(l),l===e){Dx=null;break}if(null!==Y){Y.return=c,Dx=Y;break}Dx=c}}}var D=x.alternate;if(null!==D){var r=D.child;if(null!==r){D.child=null;do{var A=r.sibling;r.sibling=null,r=A}while(null!==r)}}Dx=x}}if(2064&x.subtreeFlags&&null!==k)k.return=x,Dx=k;else W:for(;null!==Dx;){if(2048&(x=Dx).flags)switch(x.tag){case 0:case 11:case 15:Ox(9,x,x.return)}var T=x.sibling;if(null!==T){T.return=x.return,Dx=T;break W}Dx=x.return}}var O=W.current;for(Dx=O;null!==Dx;){var h=(k=Dx).child;if(2064&k.subtreeFlags&&null!==h)h.return=k,Dx=h;else W:for(k=O;null!==Dx;){if(2048&(g=Dx).flags)try{switch(g.tag){case 0:case 11:case 15:hx(9,g)}}catch(W){Qn(g,g.return,W)}if(g===k){Dx=null;break W}var S=g.sibling;if(null!==S){S.return=g.return,Dx=S;break W}Dx=g.return}}if(yn=i,Cy(),Xy&&"function"==typeof Xy.onPostCommitFiberRoot)try{Xy.onPostCommitFiberRoot(Ly,W)}catch(W){}U=!0}return U}finally{Ry=M,Wn.transition=y}}return!1}function Cn(W,y,M){W=FM(W,y=_i(0,y=di(M,y),1),1),y=mn(),null!==W&&(Ky(W,1,y),Pn(W,y))}function Qn(W,y,M){if(3===W.tag)Cn(W,W,M);else for(;null!==y;){if(3===y.tag){Cn(y,W,M);break}if(1===y.tag){var U=y.stateNode;if("function"==typeof y.type.getDerivedStateFromError||"function"==typeof U.componentDidCatch&&(null===on||!on.has(U))){y=FM(y,W=pi(y,W=di(M,W),1),1),W=mn(),null!==y&&(Ky(y,1,W),Pn(y,W));break}}y=y.return}}function Wk(W,y,M){var U=W.pingCache;null!==U&&U.delete(y),y=mn(),W.pingedLanes|=W.suspendedLanes&M,Mn===W&&(xn&M)===M&&(4===gn||3===gn&&(130023424&xn)===xn&&500>$y()-Dn?an(W,0):Gn|=M),Pn(W,y)}function yk(W,y){0===y&&(1&W.mode?(y=sy,!(130023424&(sy<<=1))&&(sy=4194304)):y=1);var M=mn();null!==(W=BM(W,y))&&(Ky(W,y,M),Pn(W,M))}function Mk(W){var y=W.memoizedState,M=0;null!==y&&(M=y.retryLane),yk(W,M)}function Uk(W,y){var M=0;switch(W.tag){case 13:var U=W.stateNode,i=W.memoizedState;null!==i&&(M=i.retryLane);break;case 19:U=W.stateNode;break;default:throw Error(n(314))}null!==U&&U.delete(y),yk(W,M)}function ik(W,y){return Ey(W,y)}function xk(W,y,M,U){this.tag=W,this.key=M,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=U,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nk(W,y,M,U){return new xk(W,y,M,U)}function kk(W){return!(!(W=W.prototype)||!W.isReactComponent)}function gk(W,y){var M=W.alternate;return null===M?((M=nk(W.tag,y,W.key,W.mode)).elementType=W.elementType,M.type=W.type,M.stateNode=W.stateNode,M.alternate=W,W.alternate=M):(M.pendingProps=y,M.type=W.type,M.flags=0,M.subtreeFlags=0,M.deletions=null),M.flags=14680064&W.flags,M.childLanes=W.childLanes,M.lanes=W.lanes,M.child=W.child,M.memoizedProps=W.memoizedProps,M.memoizedState=W.memoizedState,M.updateQueue=W.updateQueue,y=W.dependencies,M.dependencies=null===y?null:{lanes:y.lanes,firstContext:y.firstContext},M.sibling=W.sibling,M.index=W.index,M.ref=W.ref,M}function uk(W,y,M,U,i,x){var k=2;if(U=W,"function"==typeof W)kk(W)&&(k=1);else if("string"==typeof W)k=5;else W:switch(W){case e:return ek(M.children,i,x,y);case l:k=8,i|=8;break;case G:return(W=nk(12,M,y,2|i)).elementType=G,W.lanes=x,W;case r:return(W=nk(13,M,y,i)).elementType=r,W.lanes=x,W;case A:return(W=nk(19,M,y,i)).elementType=A,W.lanes=x,W;case h:return lk(M,i,x,y);default:if("object"==typeof W&&null!==W)switch(W.$$typeof){case Y:k=10;break W;case c:k=9;break W;case D:k=11;break W;case T:k=14;break W;case O:k=16,U=null;break W}throw Error(n(130,null==W?W:typeof W,""))}return(y=nk(k,M,y,i)).elementType=W,y.type=U,y.lanes=x,y}function ek(W,y,M,U){return(W=nk(7,W,U,y)).lanes=M,W}function lk(W,y,M,U){return(W=nk(22,W,U,y)).elementType=h,W.lanes=M,W.stateNode={isHidden:!1},W}function Gk(W,y,M){return(W=nk(6,W,null,y)).lanes=M,W}function Yk(W,y,M){return(y=nk(4,null!==W.children?W.children:[],W.key,y)).lanes=M,y.stateNode={containerInfo:W.containerInfo,pendingChildren:null,implementation:W.implementation},y}function ck(W,y,M,U,i){this.tag=y,this.containerInfo=W,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=X,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zy(0),this.expirationTimes=zy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zy(0),this.identifierPrefix=U,this.onRecoverableError=i,J&&(this.mutableSourceEagerHydrationData=null)}function Dk(W,y,M,U,i,x,n,k,g){return W=new ck(W,y,M,k,g),1===y?(y=1,!0===x&&(y|=8)):y=0,x=nk(3,null,null,y),W.current=x,x.stateNode=W,x.memoizedState={element:U,isDehydrated:M,cache:null,transitions:null,pendingSuspenseBoundaries:null},LM(x),W}function rk(W){if(!W)return ey;W:{if(s(W=W._reactInternals)!==W||1!==W.tag)throw Error(n(170));var y=W;do{switch(y.tag){case 3:y=y.stateNode.context;break W;case 1:if(Dy(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break W}}y=y.return}while(null!==y);throw Error(n(171))}if(1===W.tag){var M=W.type;if(Dy(M))return Ty(W,M,y)}return y}function Ak(W){var y=W._reactInternals;if(void 0===y){if("function"==typeof W.render)throw Error(n(188));throw W=Object.keys(W).join(","),Error(n(268,W))}return null===(W=p(y))?null:W.stateNode}function Tk(W,y){if(null!==(W=W.memoizedState)&&null!==W.dehydrated){var M=W.retryLane;W.retryLane=0!==M&&M<y?M:y}}function Ok(W,y){Tk(W,y),(W=W.alternate)&&Tk(W,y)}function hk(W){return null===(W=p(W))?null:W.stateNode}function Sk(){return null}return On=function(W,y,M){if(null!==W)if(W.memoizedProps!==y.pendingProps||Gy.current)Pi=!0;else{if(!(W.lanes&M||128&y.flags))return Pi=!1,function(W,y,M){switch(y.tag){case 3:Bi(y),qM();break;case 5:OU(y);break;case 1:Dy(y.type)&&Oy(y);break;case 4:AU(y,y.stateNode.containerInfo);break;case 10:IM(0,y.type._context,y.memoizedProps.value);break;case 13:var U=y.memoizedState;if(null!==U)return null!==U.dehydrated?(uy(SU,1&SU.current),y.flags|=128,null):M&y.child.childLanes?ji(W,y,M):(uy(SU,1&SU.current),null!==(W=ix(W,y,M))?W.sibling:null);uy(SU,1&SU.current);break;case 19:if(U=!!(M&y.childLanes),128&W.flags){if(U)return Mx(W,y,M);y.flags|=128}var i=y.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),uy(SU,SU.current),U)break;return null;case 22:case 23:return y.lanes=0,fi(W,y,M)}return ix(W,y,M)}(W,y,M);Pi=!!(131072&W.flags)}else Pi=!1,cM&&1048576&y.flags&&uM(y,MM,y.index);switch(y.lanes=0,y.tag){case 2:var U=y.type;Ux(W,y),W=y.pendingProps;var i=cy(y,ly.current);fM(y,M),i=ZU(null,y,U,W,i,M);var x=fU();return y.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(y.tag=1,y.memoizedState=null,y.updateQueue=null,Dy(U)?(x=!0,Oy(y)):x=!1,y.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,LM(y),i.updater=yU,y.stateNode=i,i._reactInternals=y,xU(y,U,W,M),y=Hi(null,y,U,!0,x,M)):(y.tag=0,cM&&x&&eM(y),Ri(null,y,i,M),y=y.child),y;case 16:U=y.elementType;W:{switch(Ux(W,y),W=y.pendingProps,U=(i=U._init)(U._payload),y.type=U,i=y.tag=function(W){if("function"==typeof W)return kk(W)?1:0;if(null!=W){if((W=W.$$typeof)===D)return 11;if(W===T)return 14}return 2}(U),W=bM(U,W),i){case 0:y=$i(null,y,U,W,M);break W;case 1:y=ai(null,y,U,W,M);break W;case 11:y=Ii(null,y,U,W,M);break W;case 14:y=Ei(null,y,U,bM(U.type,W),M);break W}throw Error(n(306,U,""))}return y;case 0:return U=y.type,i=y.pendingProps,$i(W,y,U,i=y.elementType===U?i:bM(U,i),M);case 1:return U=y.type,i=y.pendingProps,ai(W,y,U,i=y.elementType===U?i:bM(U,i),M);case 3:W:{if(Bi(y),null===W)throw Error(n(387));U=y.pendingProps,i=(x=y.memoizedState).element,XM(W,y),jM(y,U,null,M);var k=y.memoizedState;if(U=k.element,J&&x.isDehydrated){if(x={element:U,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},y.updateQueue.baseState=x,y.memoizedState=x,256&y.flags){y=vi(W,y,U,M,i=di(Error(n(423)),y));break W}if(U!==i){y=vi(W,y,U,M,i=di(Error(n(424)),y));break W}for(J&&(YM=HW(y.stateNode.containerInfo),GM=y,cM=!0,rM=null,DM=!1),M=lU(y,null,U,M),y.child=M;M;)M.flags=-3&M.flags|4096,M=M.sibling}else{if(qM(),U===i){y=ix(W,y,M);break W}Ri(W,y,U,M)}y=y.child}return y;case 5:return OU(y),null===W&&hM(y),U=y.type,i=y.pendingProps,x=null!==W?W.memoizedProps:null,k=i.children,H(U,i)?k=null:null!==x&&H(U,x)&&(y.flags|=32),Vi(W,y),Ri(W,y,k,M),y.child;case 6:return null===W&&hM(y),null;case 13:return ji(W,y,M);case 4:return AU(y,y.stateNode.containerInfo),U=y.pendingProps,null===W?y.child=eU(y,null,U,M):Ri(W,y,U,M),y.child;case 11:return U=y.type,i=y.pendingProps,Ii(W,y,U,i=y.elementType===U?i:bM(U,i),M);case 7:return Ri(W,y,y.pendingProps,M),y.child;case 8:case 12:return Ri(W,y,y.pendingProps.children,M),y.child;case 10:W:{if(U=y.type._context,i=y.pendingProps,x=y.memoizedProps,IM(0,U,k=i.value),null!==x)if(wy(x.value,k)){if(x.children===i.children&&!Gy.current){y=ix(W,y,M);break W}}else for(null!==(x=y.child)&&(x.return=y);null!==x;){var g=x.dependencies;if(null!==g){k=x.child;for(var u=g.firstContext;null!==u;){if(u.context===U){if(1===x.tag){(u=wM(-1,M&-M)).tag=2;var e=x.updateQueue;if(null!==e){var l=(e=e.shared).pending;null===l?u.next=u:(u.next=l.next,l.next=u),e.pending=u}}x.lanes|=M,null!==(u=x.alternate)&&(u.lanes|=M),ZM(x.return,M,y),g.lanes|=M;break}u=u.next}}else if(10===x.tag)k=x.type===y.type?null:x.child;else if(18===x.tag){if(null===(k=x.return))throw Error(n(341));k.lanes|=M,null!==(g=k.alternate)&&(g.lanes|=M),ZM(k,M,y),k=x.sibling}else k=x.child;if(null!==k)k.return=x;else for(k=x;null!==k;){if(k===y){k=null;break}if(null!==(x=k.sibling)){x.return=k.return,k=x;break}k=k.return}x=k}Ri(W,y,i.children,M),y=y.child}return y;case 9:return i=y.type,U=y.pendingProps.children,fM(y,M),U=U(i=VM(i)),y.flags|=1,Ri(W,y,U,M),y.child;case 14:return i=bM(U=y.type,y.pendingProps),Ei(W,y,U,i=bM(U.type,i),M);case 15:return Zi(W,y,y.type,y.pendingProps,M);case 17:return U=y.type,i=y.pendingProps,i=y.elementType===U?i:bM(U,i),Ux(W,y),y.tag=1,Dy(U)?(W=!0,Oy(y)):W=!1,fM(y,M),UU(y,U,i),xU(y,U,i,M),Hi(null,y,U,!0,W,M);case 19:return Mx(W,y,M);case 22:return fi(W,y,M)}throw Error(n(156,y.tag))},y.attemptContinuousHydration=function(W){if(13===W.tag){var y=BM(W,134217728);null!==y&&Kn(y,W,134217728,mn()),Ok(W,134217728)}},y.attemptDiscreteHydration=function(W){if(13===W.tag){var y=BM(W,1);null!==y&&Kn(y,W,1,mn()),Ok(W,1)}},y.attemptHydrationAtCurrentPriority=function(W){if(13===W.tag){var y=zn(W),M=BM(W,y);null!==M&&Kn(M,W,y,mn()),Ok(W,y)}},y.attemptSynchronousHydration=function(W){switch(W.tag){case 3:var y=W.stateNode;if(y.current.memoizedState.isDehydrated){var M=Ny(y.pendingLanes);0!==M&&(Py(y,1|M),Pn(y,$y()),!(6&yn)&&(Tn(),Cy()))}break;case 13:Vn((function(){var y=BM(W,1);if(null!==y){var M=mn();Kn(y,W,1,M)}})),Ok(W,1)}},y.batchedUpdates=function(W,y){var M=yn;yn|=1;try{return W(y)}finally{0===(yn=M)&&(Tn(),ty&&Cy())}},y.createComponentSelector=function(W){return{$$typeof:$x,value:W}},y.createContainer=function(W,y,M,U,i,x,n){return Dk(W,y,!1,null,0,U,0,x,n)},y.createHasPseudoClassSelector=function(W){return{$$typeof:ax,value:W}},y.createHydrationContainer=function(W,y,M,U,i,x,n,k,g){return(W=Dk(M,U,!0,W,0,x,0,k,g)).context=rk(null),M=W.current,(x=wM(U=mn(),i=zn(M))).callback=null!=y?y:null,FM(M,x,i),W.current.lanes=i,Ky(W,i,U),Pn(W,U),W},y.createPortal=function(W,y,M){var U=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:u,key:null==U?null:""+U,children:W,containerInfo:y,implementation:M}},y.createRoleSelector=function(W){return{$$typeof:Hx,value:W}},y.createTestNameSelector=function(W){return{$$typeof:Bx,value:W}},y.createTextSelector=function(W){return{$$typeof:vx,value:W}},y.deferredUpdates=function(W){var y=Ry,M=Wn.transition;try{return Wn.transition=null,Ry=16,W()}finally{Ry=y,Wn.transition=M}},y.discreteUpdates=function(W,y,M,U,i){var x=Ry,n=Wn.transition;try{return Wn.transition=null,Ry=1,W(y,M,U,i)}finally{Ry=x,Wn.transition=n,0===yn&&Tn()}},y.findAllNodes=Jx,y.findBoundingRects=function(W,y){if(!UW)throw Error(n(363));y=Jx(W,y),W=[];for(var M=0;M<y.length;M++)W.push(xW(y[M]));for(y=W.length-1;0<y;y--)for(var U=(M=W[y]).x,i=U+M.width,x=M.y,k=x+M.height,g=y-1;0<=g;g--)if(y!==g){var u=W[g],e=u.x,l=e+u.width,G=u.y,Y=G+u.height;if(U>=e&&x>=G&&i<=l&&k<=Y){W.splice(y,1);break}if(!(U!==e||M.width!==u.width||Y<x||G>k)){G>x&&(u.height+=G-x,u.y=x),Y<k&&(u.height=k-G),W.splice(y,1);break}if(!(x!==G||M.height!==u.height||l<U||e>i)){e>U&&(u.width+=e-U,u.x=U),l<i&&(u.width=i-e),W.splice(y,1);break}}return W},y.findHostInstance=Ak,y.findHostInstanceWithNoPortals=function(W){return null===(W=null!==(W=_(W))?m(W):null)?null:W.stateNode},y.findHostInstanceWithWarning=function(W){return Ak(W)},y.flushControlled=function(W){var y=yn;yn|=1;var M=Wn.transition,U=Ry;try{Wn.transition=null,Ry=1,W()}finally{Ry=U,Wn.transition=M,0===(yn=y)&&(Tn(),Cy())}},y.flushPassiveEffects=jn,y.flushSync=Vn,y.focusWithin=function(W,y){if(!UW)throw Error(n(363));for(y=tx(W=Xx(W),y),y=Array.from(y),W=0;W<y.length;){var M=y[W++];if(!kW(M)){if(5===M.tag&&uW(M.stateNode))return!0;for(M=M.child;null!==M;)y.push(M),M=M.sibling}}return!1},y.getCurrentUpdatePriority=function(){return Ry},y.getFindAllNodesFailureDescription=function(W,y){if(!UW)throw Error(n(363));var M=0,U=[];W=[Xx(W),0];for(var i=0;i<W.length;){var x=W[i++],k=W[i++],g=y[k];if((5!==x.tag||!kW(x))&&(wx(x,g)&&(U.push(Fx(g)),++k>M&&(M=k)),k<y.length))for(x=x.child;null!==x;)W.push(x,k),x=x.sibling}if(M<y.length){for(W=[];M<y.length;M++)W.push(Fx(y[M]));return"findAllNodes was able to match part of the selector:\n  "+U.join(" > ")+"\n\nNo matching component was found for:\n  "+W.join(" > ")}return null},y.getPublicRootInstance=function(W){return(W=W.current).child?5===W.child.tag?P(W.child.stateNode):W.child.stateNode:null},y.injectIntoDevTools=function(W){if(W={bundleType:W.bundleType,version:W.version,rendererPackageName:W.rendererPackageName,rendererConfig:W.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:hk,findFiberByHostInstance:W.findFiberByHostInstance||Sk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)W=!1;else{var y=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(y.isDisabled||!y.supportsFiber)W=!0;else{try{Ly=y.inject(W),Xy=y}catch(W){}W=!!y.checkDCE}}return W},y.isAlreadyRendering=function(){return!1},y.observeVisibleRects=function(W,y,M,U){if(!UW)throw Error(n(363));W=Jx(W,y);var i=eW(W,M,U).disconnect;return{disconnect:function(){i()}}},y.registerMutableSourceForHydration=function(W,y){var M=y._getVersion;M=M(y._source),null==W.mutableSourceEagerHydrationData?W.mutableSourceEagerHydrationData=[y,M]:W.mutableSourceEagerHydrationData.push(y,M)},y.runWithPriority=function(W,y){var M=Ry;try{return Ry=W,y()}finally{Ry=M}},y.shouldError=function(){return null},y.shouldSuspend=function(){return!1},y.updateContainer=function(W,y,M,U){var i=y.current,x=mn(),n=zn(i);return M=rk(M),null===y.context?y.context=M:y.pendingContext=M,(y=wM(x,n)).payload={element:W},null!==(U=void 0===U?null:U)&&(y.callback=U),null!==(W=FM(i,y,n))&&(Kn(W,i,n,x),tM(W,i,n)),n},y}},933506:(W,y,M)=>{1&&(W.exports=M(625021))},60607:(W,y,M)=>{1&&(W.exports=M(32501))},260525:(W,y,M)=>{M.d(y,{o:()=>xW});var U,i=M(64922),x=M(346160);(function(W){W[W["Fixed"]=1]="Fixed",W[W["UpToLimit"]=2]="UpToLimit"})(U||(U={}));var n,k=M(99200),g=M(421645);(function(W){W["EvenMoney"]="BetLimitCategory.EvenMoney",W["Number"]="BetLimitCategory.Number",W["StormChaser"]="BetLimitCategory.StormChaser",W["XChaser"]="BetLimitCategory.XChaser"})(n||(n={}));const u={[n.EvenMoney]:void 0,[n.Number]:g.X.BetLimitGroupNumbers,[n.StormChaser]:g.X.BetLimitGroupStormChaser,[n.XChaser]:g.X.BetLimitGroupXChaser},e={[n.EvenMoney]:{payoutType:U.Fixed,amount:"1:1"},[n.Number]:{payoutType:U.UpToLimit},[n.StormChaser]:{payoutType:U.UpToLimit},[n.XChaser]:{payoutType:U.UpToLimit}},l={[n.Number]:k.Sr.Number,[n.EvenMoney]:k.Sr.EvenMoney,[n.StormChaser]:k.Sr.StormChaser,[n.XChaser]:k.Sr.XChaser},G=[n.EvenMoney,n.Number,n.StormChaser,n.XChaser];var Y=M(587698);function c(W){const{payout:y}=W;switch(y.payoutType){case U.Fixed:return y.amount;case U.UpToLimit:const{limit:M,currencySymbol:i}=W,n=Y.ej(M);return x.Tl(g.X.LimitUpTo,{currency:i,payoutLimit:n})}}function D(W,y){const M=Y.ej(W,{currencySymbol:y});return`${x.Tl(g.X.LimitMaxPayout)} ${M}`}function r(W,y){const M=Y.ej(W,{currencySymbol:y});return x.Tl(g.X.MaxBonusBet,{maxBonusBet:M})}var A=M(822381),T=M(939009),O=M(699695),h=M(377810),S=M(837557),o=M(653677),d=M(671860),q=M(509407),s=M(808432),N=M(525019);const _="red--3ffaa",p="black--f01d3";function b(W,y,M,U){return i.jsx("use",{xlinkHref:W,x:y,y:M,height:U})}N.z();const m=h.memo((({rank:W,suit:y})=>{let M;switch(W){case"2":case"6":M="36";break;case"3":case"9":M="35";break;case"4":M="34";break;case"5":case"J":M="38";break;case"7":M="40";break;case"8":M="39";break;case"10":M="0";break;case"Q":case"A":M="19";break;default:M="17"}const U=[s.KY.D,s.KY.H].includes(y)?_:p,x=b(`#rank-${W}`,M,"10","86"),n=b(`#suit-${s.KY[y]}`,"100","0","106");return i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 184 106",preserveAspectRatio:"xMidYMid meet",className:U,children:[x,n]})}));m.displayName="RankAndSuit";const z="indented--d520e",K="doubleIndented--68144",P="bold--37d87",R="bet--7d654",I="betLimits--3cf27",E="payout--46826",Z="ranksAndSuits--7b0b6",f="mobileRanksAndSuits--7a895",V="cardsDelimiter--55498",$="disabled--fc044",a="topPadding--64914",H="rtl--1eee5",B="mobile--a40d9",v="cellContent--e7e92",L="sectionHeader--a6eff",X="hasContent--7f13d",w="middleDataCell--a2446",F="fixedColumnWidths--a60d9",t="hasBottomBorder--87313",J="hasIncreasedNotch--5fff3",j="hasNotch--42e7b",C="legacyMenuMode--041c5",Q=h.memo((W=>{const{betKey:y,betTitle:M,min:U,max:n,payout:k,isIndented:g=!1,areLimitsInlined:u,cards:e,middleComponent:l,hasBottomBorder:G=!0,isMobile:c=!1,currencySymbol:D="",fixedColumnWidths:r=!0,showPayouts:A=!0,isSectionHeader:T=!1,hasSectionPadding:N=!1,disabled:_=!1,legacyMenuMode:p}=W,b=g&&N,Q=O.A({[z]:!b&&(g||N),[K]:b}),WW=void 0===M&&y?i.jsx(o.q,{className:Q,"data-role":"title",children:y}):i.jsx("span",{"data-role":"title",className:Q,children:null!=M?M:String.fromCharCode(8203)}),yW=h.useMemo((()=>{if(U&&n)return q.Q({lowerLimit:U,upperLimit:n,currencySymbol:D});const W=null!=U?U:n;return W?Y.ej(W,{currencySymbol:D}):void 0}),[U,n,D]),MW=h.useMemo((()=>null==e?void 0:e.map(((W,y)=>function(W,y){const M=W.slice(0,-1);let U=null;switch(W.slice(-1)){case"C":U=s.KY.C;break;case"D":U=s.KY.D;break;case"H":U=s.KY.H;break;case"S":U=s.KY.S}return"|"===W?i.jsx("span",{className:V,children:W}):M&&null!==U?i.jsx(m,{rank:M,suit:U},y):null}(W,y)))),[e]),UW=!!(M||y||yW||MW||l||k);return i.jsxs("tr",{"data-role":`bet-limits_${y}`,className:O.A({[B]:c,[$]:_,[X]:UW,[t]:G,[F]:r,[j]:S.DS.HAS_NOTCH,[J]:S.DS.IS_IPHONE14_PRO}),children:[i.jsx("td",{className:O.A(R,{[P]:!g&&!c,[a]:u,[L]:T}),colSpan:u?2:1,children:i.jsxs("div",{className:v,children:[WW,u&&!!yW&&i.jsxs("span",{className:I,"data-min":U,"data-max":n,"data-role":"limits",children:[d.be,yW]})]})}),!u&&i.jsx("td",{className:w,children:i.jsx("div",{className:v,children:MW?i.jsxs("div",{"data-role":"ranks-and-suits",className:O.A(Z,{[f]:c}),children:[...MW]}):l||!u&&i.jsx("div",{"data-role":"min-max",className:I,"data-min":U,"data-max":n,children:yW})})}),A&&i.jsx("td",{className:O.A(E,{[a]:u}),children:i.jsx("div",{className:O.A(v,{[C]:p,[H]:x.sU()}),"data-role":"payout",children:k})})]})}));Q.displayName="BetLimitsAndPayoutsRow";const WW="footerContentWrapper--24329",yW="mobile--5a6b8",MW=h.memo((({children:W,isMobile:y})=>i.jsx("tr",{"data-role":"bet-limits-footer",children:i.jsx("td",{colSpan:3,className:O.A(WW,{[yW]:y}),children:W})})));MW.displayName="BetLimitsAndPayoutsFooter";const UW="footer--48a9a",iW="bet-limits-test-id",xW=W=>{const{getMinBetGroupLimit:y,getMaxBetGroupLimit:M,currencySymbol:U,payoutLimit:k,isMobile:g,maxBonusBet:Y}=W,O=G.map((W=>{let G;return G=W===n.EvenMoney?i.jsx("div",{style:{height:`calc(${A._m(g?1.2:1)} * 1.26)`},children:i.jsx(T.Z,{})}):void 0!==u[W]?x.Tl(u[W]):"",i.jsx(Q,{betKey:W,max:M(l[W]),min:y(l[W]),betTitle:G,isMobile:g,payout:c({payout:e[W],currencySymbol:U,limit:k}),currencySymbol:U},W)})),h=i.jsx("span",{children:D(k,U)}),S=void 0!==Y?i.jsx("span",{children:r(Y,U)}):null;return i.jsxs("tbody",{"data-role":iW,children:[O,i.jsx(MW,{isMobile:g,children:i.jsxs("div",{className:UW,children:[S,h]})})]})}},129987:(W,y,M)=>{M.d(y,{O:()=>xi});var U=M(64922),i=M(699695),x=M(525620),n=M(377810),k=M(276111),g=M(769413),u=M(234341),e=M(315049),l=M(876429),G=M(341360),Y=M(277082),c=M(236042),D=M(346160),r=M(876759);const A=0,T=.065,O=.23;function h(W){const{ref:y,options:M}=W,U=n.useRef(void 0),i=n.useRef(M);return i.current=M,n.useCallback((()=>{var W;if(null===(W=U.current)||void 0===W||W.call(U),U.current=void 0,y.current){const W=new G.a(y.current,i.current);W.scale=1;const M=g.M(W).animateTo({scale:.93},T-A,k.dV).animateTo({scale:1},O-T,k.dV);U.current=e.l({anim:M})}}),[y])}var S;(function(W){W["Even"]="BetOnAllButtonType.Even",W["Odd"]="BetOnAllButtonType.Odd"})(S||(S={}));var o=M(427069),d=M(980733);const q="background--a97c8",s="backgroundHover--6b7c0",N="inactiveOverlay--6e820",_="inactive--05fb2",p="hoverEnabled--9d98c",b=({alignment:W,buttonType:y,isInactive:M,hoverEnabled:x})=>{const k=n.useMemo((()=>`${String(Math.random())}-bet-on-all-background-${W}-${y}`),[W,y]),g=function(W,y){return W===o.C1.Horizontal?"0 0 80 113":y===S.Odd?"0 0 180 40":"0 0 181 40"}(W,y),u=function(W,y){return W===o.C1.Horizontal?y===S.Odd?"M0 2.095V112h79.932V16.383c0-.555-.231-1.085-.638-1.463L63.927.631a1.998 1.998 0 00-1.36-.535H1.997A1.998 1.998 0 000 2.095z":"M0 112.896V.992h79.932V97.48l-16.58 15.417H0z":y===S.Odd?"M179 27.683V1H1v26.172a1 1 0 00.293.707L12.12 38.707a1 1 0 00.707.293H179V27.683z":"M0 0v40h169l12-12V0H0z"}(W,y),e=function(W){return W===o.C1.Horizontal?[43.962,.992,43.962,112.896]:[90.5,0,90.5,40]}(W),l=function(W,y){return W===o.C1.Horizontal?y===S.Odd?"M16.718 107.911h58.22V17.547L61.554 4.999H4.998v102.912h11.72z":"M16.718 5.995h58.22V95.38l-13.405 13.526H4.998V5.995h11.72z":y===S.Odd?"M175 5H5v21.555L14.384 35H175V5z":"M5 5h171v21.555L166.616 35H5V5z"}(W,y),G=function(W,y){return W===o.C1.Horizontal?y===S.Odd?"M1 1h62.586l15.415 15.414V112H.999V.999z":"M63.116 112.134H.997V.99H78.93v95.329c0 .265-.105.519-.292.706l-14.816 14.816a1.001 1.001 0 01-.706.293z":y===S.Odd?"M179 27.683V1H1v26.172a1 1 0 00.293.707L12.12 38.707a1 1 0 00.707.293H179V27.683z":"M1 27.683V1h179v26.172c0 .265-.105.52-.293.707l-10.828 10.828a1.001 1.001 0 01-.707.293H1V27.683z"}(W,y),Y=function(W,y){return W===o.C1.Horizontal?y===S.Odd?[40,0,40,112]:[39.964,113.133,39.964,-.01]:[0,0,100,100]}(W,y),c=function(W,y){return W===o.C1.Horizontal?y===S.Odd?["#BFA772","#E2C995","#F4E6B9"]:["#9B7338","#795212","#F4E6B9"]:["#916A31","#916A31","#916A31"]}(W,y);return U.jsxs("svg",{className:i.A(q,{[p]:x}),id:k,preserveAspectRatio:"none",width:"100%",height:"100%",viewBox:g,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("use",{xlinkHref:`#${k}-shapePath`,fill:"#000",fillOpacity:".74"}),y===S.Even&&U.jsx("use",{xlinkHref:`#${k}-shapePath`,fill:`url(#${k}-paint0)`,fillOpacity:".45"}),U.jsx("path",{opacity:".3",d:l,stroke:"#927034",strokeWidth:"2"}),U.jsx("use",{className:s,xlinkHref:`#${k}-shapePath`,fill:"#FFE98E"}),U.jsx("use",{className:i.A(N,{[_]:M}),xlinkHref:`#${k}-shapePath`,fill:"#000"}),U.jsx("use",{xlinkHref:`#${k}-outerStroke`,stroke:`url(#${k}-paint1)`,strokeWidth:"2"}),U.jsx("use",{className:i.A(N,{[_]:M}),xlinkHref:`#${k}-outerStroke`,stroke:"#000",strokeWidth:"2"}),U.jsxs("defs",{children:[U.jsx("path",{id:`${k}-shapePath`,d:u}),U.jsx("path",{id:`${k}-outerStroke`,d:G}),U.jsxs("linearGradient",{id:`${k}-paint0`,x1:e[0],y1:e[1],x2:e[2],y2:e[3],gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#464646"}),U.jsx("stop",{offset:"1",stopColor:"#090909"})]}),U.jsxs("linearGradient",{id:`${k}-paint1`,x1:Y[0],y1:Y[1],x2:Y[2],y2:Y[3],gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:c[0]}),U.jsx("stop",{offset:".503",stopColor:c[1]}),U.jsx("stop",{offset:"1",stopColor:c[2]})]})]})]})},m=x.PA((W=>{const y={...W,hoverEnabled:d.g().ui.betSpot.isHoverActive};return U.jsx(b,{...y})}));function z(W,y){switch(y){case o.C1.Horizontal:return W===S.Even?"left top":"left bottom";case o.C1.Vertical:return W===S.Even?"left top":"right top"}}function K(W){var y,M;return`${Number(W.isTrusted)}_${null!==(M=null===(y=W.nativeEvent)||void 0===y?void 0:y.pointerId)&&void 0!==M?M:-2}_${Math.round(W.clientX)}_${Math.round(W.clientY)}`}var P=M(410004),R=M(590257),I=M(421645);const E="betOnAllButton--c6a3c",Z="background--f7370",f="title--8aaef",V="inactive--ed46c",$="enabled--a9e5b",a="isVisualTest--cf9cb",H={[S.Even]:I.X.BetOnAllEven,[S.Odd]:I.X.BetOnAllOdd},B={[S.Even]:R.Or.BetOnAllEven,[S.Odd]:R.Or.BetOnAllOdd},v=W=>{const{buttonType:y,alignment:M,isInactive:x,onClick:k,setReference:g,enabled:u}=W,e=n.useRef(null),l=P.v(B[y],g),G=n.useCallback((W=>{e.current=W,l(W)}),[l]),Y=h({ref:e,options:{transformOrigin:z(y,M)}}),A=n.useCallback(c.A((W=>{Y(),k(y,K(W))}),o.DO),[k,y,Y]),T=n.useMemo((()=>M===o.C1.Vertical?D.vL()[I.G.BetOnAllMobileFontSize]||1.4:D.vL()[I.G.BetOnAllDesktopFontSize]||1.27),[M]);return U.jsxs("div",{ref:G,onClick:A,className:i.A(E,{[$]:u}),"data-role":y,children:[U.jsx("div",{className:Z,children:U.jsx(m,{alignment:M,buttonType:y,isInactive:x})}),U.jsx("div",{className:i.A(f,{[V]:x,[a]:r.I()}),style:{"--betOnAllTitleSize":`calc(var(--bettingGridSize) * ${T})`},children:D.Tl(H[y],{spacing:M===o.C1.Horizontal?"\n":" "})})]})},L=x.PA((W=>{const y=d.g(),M={...W,onClick:n.useCallback(((W,M)=>{W===S.Even?y.bets.betOnAllEven(M):W===S.Odd&&y.bets.betOnAllOdd(M)}),[y]),setReference:y.references.setReference,isInactive:y.ui.betOnAll.isInactive};return U.jsx(v,{...M})}));var X=M(697971),w=M(653677);const F=30,t="container--96d20",J="pointerEventsEnabled--55392",j=W=>{const{children:y,className:M,betCode:x,isClickBlocked:k,onClick:g,setReference:u}=W,[,e]=function(W,y){const[M,U]=n.useState();return[M,n.useCallback((M=>{y(W,M),U(M)}),[y,W])]}(x,u),l=n.useCallback(c.A((W=>{g(x,K(W))}),o.DO),[g,x]),[G,Y]=function(W,y){const M=n.useRef(!1),U=n.useRef(null),i=n.useRef(W);W&&(M.current=!1),i.current=W;const x=n.useCallback((()=>{M.current=!1,i.current=!1,U.current=null}),[]);return n.useEffect((()=>(document.addEventListener("pointerup",x),()=>{document.removeEventListener("pointerup",x)})),[x]),[n.useCallback((W=>{i.current||(U.current={x:W.clientX,y:W.clientY},M.current=!0)}),[]),n.useCallback((W=>{M.current&&U.current&&Math.sqrt((U.current.x-W.clientX)**2+(U.current.y-W.clientY)**2)<F&&y(W),x()}),[y,x])]}(k,l);return U.jsx("div",{ref:e,"data-role":`bet-spot-${x}`,className:i.A(t,{[J]:!k},M),onPointerDown:G,onPointerUp:Y,children:y})},C=x.PA((W=>{const y=d.g(),{onClick:M,setRef:i}=W,x=n.useCallback(((W,U)=>{null==M||M(W),y.bets.placeBet(W,U)}),[y,M]),k=n.useCallback(((W,M)=>{y.references.setBetSpotReference(W,M),null==i||i(M)}),[i,y]),g={...W,isClickBlocked:y.ui.betSpot.getIsClickBlocked(W.betCode),setReference:k,onClick:x};return U.jsx(j,{...g})}));var Q=M(713861);const WW="backgroundWrapper--42a8d",yW="background--cc24f",MW="hoverOverlay--ce25f",UW="inactiveOverlay--b2e24",iW="inactive--995a4",xW="hoverEnabled--ce4da",nW="isVisualTest--fcebc",kW={[Q.m.Inactive]:iW,[Q.m.BonusTransition]:iW},gW=W=>{const{alignment:y,backgroundState:M,betCode:x,hoverEnabled:k,children:g}=W,u=n.useMemo((()=>`${String(Math.random())}-chaser-background-${y}-${x}`),[y,x]),e=function(W){return W===o.C1.Horizontal?"0 0 217 57":"0 0 176 56"}(y),l=function(W){return W===o.C1.Horizontal?"M216 12.421V44l-11.898 12H12L0 44V12.422L12 0h192.102L216 12.421":"M0 12.421V44l11.898 12H164l12-12V12.422L164 0H11.898L0 12.421z"}(y),G=function(W){return W===o.C1.Horizontal?"M0 22h215.5V12l-12-12H12L0 12v10z":"M0 22H175.5V12L163.5 0H12L0 12V22Z"}(y),Y=function(W){return W===o.C1.Horizontal?"M215 43.588V12.823L203.676 1H12.424L1 12.826V43.586L12.414 55h191.272L215 43.588z":"M1 43.588V12.823L12.325 1h151.251L175 12.826V43.586L163.586 55H12.314L1 43.588z"}(y),c=function(W){return W===o.C1.Horizontal?[110,56.078,110,0]:[88,56.078,88,0]}(y),D=function(W){return W===o.C1.Horizontal?U.jsxs(U.Fragment,{children:[U.jsx("stop",{stopColor:"#9C753A"}),U.jsx("stop",{offset:"1",stopColor:"#C0A773"})]}):U.jsxs(U.Fragment,{children:[U.jsx("stop",{stopColor:"#8E7336"}),U.jsx("stop",{offset:".493",stopColor:"#D1BF71"}),U.jsx("stop",{offset:"1",stopColor:"#916A31"})]})}(y);return U.jsxs("div",{className:i.A(WW,{[xW]:k,[nW]:r.I()}),children:[U.jsxs("svg",{className:yW,id:u,width:"100%",height:"100%",viewBox:e,preserveAspectRatio:"none",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("use",{className:MW,xlinkHref:`#${u}-shapePath`,fill:"#FFE98E"}),U.jsx("path",{opacity:".1",d:G,fill:"#FFFBDA"}),U.jsx("use",{xlinkHref:`#${u}-shapePath`,className:i.A(UW,kW[M]),fill:"#000"}),U.jsx("use",{xlinkHref:`#${u}-strokePath`,stroke:`url(#${u}-paint1)`,strokeWidth:"2"}),U.jsx("use",{className:i.A(UW,kW[M]),xlinkHref:`#${u}-strokePath`,stroke:"#000",strokeWidth:"2"}),U.jsxs("defs",{children:[U.jsx("path",{id:`${u}-shapePath`,d:l}),U.jsx("path",{id:`${u}-strokePath`,d:Y}),U.jsx("linearGradient",{id:`${u}-paint1`,x1:c[0],y1:c[1],x2:c[2],y2:c[3],gradientUnits:"userSpaceOnUse",children:D})]})]}),g]})},uW=x.PA((W=>{const y={...W,hoverEnabled:d.g().ui.betSpot.isHoverActive};return U.jsx(gW,{...y})})),eW=.2*Q.r,lW=-27,GW=1.05,YW=1.05;var cW=M(542031),DW=M(617401);const rW="chipContainer--b818c",AW="visible--158b1",TW=200,OW=120,hW={[DW._.Desktop]:TW,[DW._.DesktopClassic]:TW,[DW._.MobilePortrait]:OW,[DW._.MobileLandscape]:OW,[DW._.Tablet]:OW};class SW extends n.PureComponent{constructor(){super(...arguments),this.lastAmountValue=0,this.onTouchStart=W=>{const{longPressEnabled:y}=this.props;"button"in W&&0!==W.button?this.onTouchEnd():y&&void 0===this.longPressTimeout&&(this.longPressTimeout=window.setTimeout(this.onLongPressReady,hW[this.props.componentLayout]))},this.onTouchEnd=()=>{window.clearTimeout(this.longPressTimeout),this.longPressTimeout=void 0},this.onLongPressReady=()=>{const{onLongPress:W}=this.props;W(),this.longPressTimeout=void 0}}render(){const{state:W,amount:y,chipRef:M,visible:x,chipFontSize:n}=this.props,k=y>0?y:this.lastAmountValue;return y>0&&(this.lastAmountValue=y),U.jsx("div",{ref:M,className:i.A(rW,{[AW]:x}),style:{"--size":`calc(var(--bettingGridSize) * ${n})`},onMouseDown:this.onTouchStart,onTouchStart:this.onTouchStart,onMouseUp:this.onTouchEnd,onTouchEnd:this.onTouchEnd,children:U.jsx(cW.v,{state:W,amount:k,hasShadow:!0})})}componentWillUnmount(){window.clearTimeout(this.longPressTimeout),this.longPressTimeout=void 0}}const oW=x.PA((W=>{const y=d.g(),M=n.useCallback((()=>{y.draggableChip.onStart(1,W.betCode)}),[W.betCode,y]),i=(x=W.betCode,k=R.Ip.Regular,g=y.references.setBetSpotChipReference,n.useCallback((W=>{g(k,x,W)}),[g,k,x]));var x,k,g;const u=y.ui.betSpot.getChipAmount(W.betCode),e=u>0,l={amount:u,state:y.ui.betSpot.getChipState(W.betCode),longPressEnabled:y.ui.betSpotChipContainer.getCanDragChip(e),chipRef:i,visible:y.ui.betSpotChipContainer.getIsVisible(e,W.betCode),chipFontSize:y.ui.betSpotChipContainer.chipFontSize,onLongPress:M,componentLayout:y.device.componentLayout};return U.jsx(SW,{...l})}));var dW=M(128546),qW=M(869743),sW=M(619608),NW=M(835132),_W=M(757069),pW=M(423441);const bW=M.p+"images/border.eadd6314.webp",mW="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgMTIgMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTYgMi44OUEzLjEyIDMuMTIgMCAwMDIuODgyIDYuMDEgMy4xMiAzLjEyIDAgMDA2IDkuMTI3YTMuMTIgMy4xMiAwIDAwMy4xMTgtMy4xMThBMy4xMiAzLjEyIDAgMDA2IDIuODl6IiBmaWxsPSIjRENDQTk1Ii8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDZhNiA2IDAgMTExMiAwYzAgMy4zMS0yLjY5IDYtNiA2UzAgOS4zMSAwIDZ6TTcuMzk3LjY0OGwtLjIxIDEuMzA4Yy42NjUuMTkyIDEuMjU4LjU1IDEuNzM5IDEuMDEzbDEuMDMtLjgzOEE1LjU1OCA1LjU1OCAwIDAwNy4zOTcuNjQ4em0yLjI1NCA2LjJhMy43MTggMy43MTggMCAwMDAtMS42NzcgMy43ODIgMy43ODIgMCAwMC0xLjEtMS45MDVjLS40MTEtLjM4NC0uOS0uNjgtMS40NS0uODQ3YTMuODczIDMuODczIDAgMDAtMS4xMS0uMTY2QTMuNzU0IDMuNzU0IDAgMDAzLjQ1IDMuMjU4YTMuNzgzIDMuNzgzIDAgMDAtMS4xIDEuODk1IDMuNzE4IDMuNzE4IDAgMDAwIDEuNjc3IDMuNzgyIDMuNzgyIDAgMDAxLjEgMS45MDRjLjQxLjM4NC45LjY4IDEuNDUuODQ3LjM0OS4xMDUuNzI0LjE2NiAxLjEwOS4xNjZBMy43NTQgMy43NTQgMCAwMDguNTUgOC43NDJhMy43ODMgMy43ODMgMCAwMDEuMS0xLjg5NXpNNC44MzggMS45NTVsLS4yMS0xLjMxYTUuNTQyIDUuNTQyIDAgMDAtMi41NjcgMS40NzZsMS4wMy44MzlhNC4yNjYgNC4yNjYgMCAwMTEuNzQ3LTEuMDA1ek0uNjcyIDcuNDczQTUuNDc3IDUuNDc3IDAgMDEuNDYyIDZjMC0uNTE1LjA4LTEuMDEzLjIxLTEuNDkzbDEuMjQuNDhBNC4yOTMgNC4yOTMgMCAwMDEuNzgzIDZjMCAuMzUuMDQzLjY4MS4xMjIuOTk2bC0xLjIzMi40Nzd6bTMuOTMxIDMuODc5YTUuNTU4IDUuNTU4IDAgMDEtMi41Ni0xLjQ4M2wxLjAzMS0uODM4Yy40OC40NjIgMS4wODMuODIgMS43MzggMS4wMTNsLS4yMDkgMS4zMDh6bTIuNzY4IDBhNS41MjcgNS41MjcgMCAwMDIuNTY4LTEuNDc0bC0xLjAzLS44MzlhNC4yNjYgNC4yNjYgMCAwMS0xLjc0NyAxLjAwNWwuMjA5IDEuMzA4ek0xMC4yMTggNmMwIC4zNS0uMDUyLjY5LS4xMyAxLjAxM2guMDA4bDEuMjQuNDhjLjEzMS0uNDguMjEtLjk3OC4yMS0xLjQ5MyAwLS41MTUtLjA3OS0xLjAwNC0uMjEtMS40NzZsLTEuMjQuNDhjLjA3OS4zMTUuMTIyLjY0Ny4xMjIuOTk2eiIgZmlsbD0iI0RDQ0E5NSIvPjwvc3ZnPgo=",zW=M.p+"images/x.bbdf5d1b.webp",KW="chaser--8cc23",PW="content--c2894",RW="inactive--9521f",IW="titleLabel--12a59",EW="icon--e2517",ZW="vertical--1220f",fW="fee--5e3d1",VW="feeLabel--9cde9",$W="feeMultiplierLabel--022fe",aW="coin--df23a",HW="chipContainerWrapper--04b58",BW="borderSprite--5da48",vW="backgroundGradientClip--4cef0",LW="backgroundGradient--4b3d4",XW={[Y.LightningStormBetCode.StormChaser]:pW,[Y.LightningStormBetCode.XChaser]:zW},wW={[Y.LightningStormBetCode.StormChaser]:"stormChaser--239cc",[Y.LightningStormBetCode.XChaser]:"xChaser--9622a"},FW={[Y.LightningStormBetCode.StormChaser]:I.X.StormChaser,[Y.LightningStormBetCode.XChaser]:I.X.XChaser},tW={[Q.m.Inactive]:RW,[Q.m.BonusTransition]:RW},JW=W=>{const{alignment:y,betCode:M,showFeeLabel:x,backgroundState:l,isAnimationRunning:G,setReference:c,setBackgroundGradientReference:r,lightningBorderActive:A}=W,[T,O]=sW.K({},{opacity:.4,rotation:-12}),[S,d]=n.useState(null),[q,s]=n.useState(null);(function({iconRef:W,isRunning:y}){n.useEffect((()=>{if(!W||!y)return;const M=u.M().delay(1.1*Q.r).parallel([g.M(W).animateTo({rotation:lW},eW,k.dV).animateTo({rotation:-12},eW,k.dV),g.M(W).animateTo({scaleX:GW,scaleY:YW},eW,k.dV).animateTo({scaleX:1,scaleY:1},eW,k.dV)]).delay(.5*Q.r),U=e.l({anim:M,repeat:Number.MAX_VALUE});return()=>{M.fastForward(),U()}}),[W,y])})({iconRef:T,isRunning:G});const N=n.useRef(M);N.current=M,n.useEffect((()=>{c(M,S)}),[M,S,c]),n.useEffect((()=>{r(M,q)}),[M,q,r]),n.useEffect((()=>()=>{r(N.current,void 0),c(M,null)}),[M,r,c]);const _=n.useMemo((()=>y===o.C1.Vertical?D.vL()[I.G.ChaserLabelMobileFontSize]||1.35:D.vL()[I.G.ChaserLabelDesktopFontSize]||1.32),[y]),p=U.jsx(Y.LightningStormGradientStrokeText,{className:IW,textStyle:{fontSize:`calc(var(--bettingGridSize) * ${_})`},children:D.Tl(FW[M])}),b=n.useRef(null),m=n.useCallback((W=>{b.current=W}),[]),z=h({ref:b,options:{transformOrigin:"center center"}});return U.jsxs(C,{betCode:M,setRef:m,onClick:z,className:i.A(KW,wW[M],tW[l],{[ZW]:y===o.C1.Vertical}),children:[U.jsx("div",{className:i.A(vW),children:U.jsx("div",{ref:s,className:i.A(LW)})}),U.jsxs(uW,{alignment:y,backgroundState:l,betCode:M,children:[U.jsx("div",{className:EW,ref:O,children:U.jsx(NW.w,{src:XW[M]})}),U.jsxs("div",{className:PW,children:[p,x&&U.jsx(jW,{betCode:M})]}),U.jsx("div",{className:HW,children:U.jsx(oW,{betCode:M})})]}),A&&U.jsx(dW.d,{setRef:d,src:bW,spriteClass:BW})]})},jW=x.PA((({betCode:W})=>{const y=d.g(),M=X.EW((()=>!!y.ui.chaser.getFeeAmount(W))).get(),[i,x]=sW.K({},{scale:1}),l=_W.Z(M),G=n.useMemo((()=>{var y;return U.jsx(w.q,{className:VW,htmlContent:!0,mappings:{fee:null!==(y=qW.cd[W])&&void 0!==y?y:1,multiplier:`<span class=${$W}>x</span>`,coin:`<img class=${aW} src=${mW} />`},children:I.X.ChaserFee})}),[W]),[Y,c]=n.useState(M?U.jsx(CW,{betCode:W}):G);return n.useEffect((()=>{if(!i)return;const y=u.M();l!==M&&y.sequence(g.M(i).animateTo({scale:.75},.065,k.dV)).callback((()=>c(M?U.jsx(CW,{betCode:W}):G))).sequence(g.M(i).animateTo({scale:1},.065,k.dV));const x=e.l({anim:y});return()=>{y.fastForward(),x()}}),[G,W,M,i,l]),U.jsx("div",{className:fW,ref:x,children:Y})})),CW=x.PA((({betCode:W})=>{const y=d.g().ui.chaser.getFeeAmount(W),M=_W.Z(y);return U.jsx("span",{children:y||M})})),QW=x.PA((W=>{const y=d.g(),M={...W,showFeeLabel:y.bets.isBettingEnabled,backgroundState:y.ui.betSpot.getBackgroundState(W.betCode),isAnimationRunning:y.ui.chaser.animateIcons,setReference:y.references.setChaserBorderReference,setBackgroundGradientReference:y.references.setChaserBackgroundGradientReferences,lightningBorderActive:W.betCode===Y.LightningStormBetCode.StormChaser?y.ui.chaserDistribution.isStormChaserAnimate:y.ui.chaserDistribution.isXChaserAnimate};return U.jsx(JW,{...M})})),Wy="evenMoneyBackgroundWrapper--11786",yy="backgroundImg--98122",My="hoverOverlay--529dc",Uy="inactiveOverlay--65989",iy="inactive--1ff18",xy="winOverlay--02759",ny="hoverEnabled--7789e",ky={[Q.m.Inactive]:iy,[Q.m.BonusTransition]:iy,[Q.m.Win]:"win--2f3d4"},gy=W=>{const{alignment:y,hoverEnabled:M,children:x,backgroundState:k}=W,g=n.useMemo((()=>`${String(Math.random())}-even-money-background-${y}`),[y]),u=function(W){return W===o.C1.Horizontal?"0 0 80 224":"0 0 287 54"}(y),e=function(W){return W===o.C1.Horizontal?"M16.8284 1H79V223H16.8284C16.5632 223 16.3089 222.895 16.1213 222.707L1.2929 207.879C1.10535 207.691 1 207.437 1 207.172V16.8284C1 16.5632 1.10536 16.3089 1.29289 16.1213L16.1213 1.29289C16.3089 1.10536 16.5632 1 16.8284 1Z":"M286 12.4142V53H1V12.4142L12.4142 1H274.586L286 12.4142Z"}(y),l=function(W){return W===o.C1.Horizontal?[44,0,44,224]:[143.5,0,143.5,54]}(y),G=function(W){return W===o.C1.Horizontal?U.jsxs(U.Fragment,{children:[U.jsx("stop",{stopColor:"#BFA772"}),U.jsx("stop",{offset:"0.257241",stopColor:"#E5CD98"}),U.jsx("stop",{offset:"0.497503",stopColor:"#F4E7BA"}),U.jsx("stop",{offset:"0.758103",stopColor:"#795212"}),U.jsx("stop",{offset:"1",stopColor:"#9B7338"})]}):U.jsxs(U.Fragment,{children:[U.jsx("stop",{stopColor:"#C1A874"}),U.jsx("stop",{offset:"1",stopColor:"#E6CD99"})]})}(y);return U.jsxs("div",{className:i.A(Wy,{[ny]:M}),children:[U.jsxs("svg",{className:i.A(yy,ky[k]),id:g,preserveAspectRatio:"none",width:"100%",height:"100%",viewBox:u,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("use",{xlinkHref:`#${g}-path`,fill:"black",fillOpacity:"0.6"}),U.jsx("use",{xlinkHref:`#${g}-path`,fill:"#1F3043",fillOpacity:"0.8"}),U.jsx("use",{className:My,xlinkHref:`#${g}-path`,fill:"#BDFBFF",fillOpacity:".2"}),U.jsx("use",{xlinkHref:`#${g}-path`,fill:"#000",className:Uy}),U.jsx("use",{xlinkHref:`#${g}-path`,fill:"#4D8A98",className:xy}),U.jsx("use",{xlinkHref:`#${g}-path`,stroke:`url(#${g}-paint1)`,strokeWidth:"2"}),U.jsx("use",{className:Uy,xlinkHref:`#${g}-path`,stroke:"#000",strokeWidth:"2"}),U.jsxs("defs",{children:[U.jsx("path",{id:`${g}-path`,d:e}),U.jsxs("linearGradient",{id:`${g}-paint0`,x1:l[0],y1:l[1],x2:l[2],y2:l[3],gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#A8F0FF"}),U.jsx("stop",{offset:"1",stopColor:"#090909",stopOpacity:"0"})]}),U.jsx("linearGradient",{id:`${g}-paint1`,x1:l[0],y1:l[1],x2:l[2],y2:l[3],gradientUnits:"userSpaceOnUse",children:G})]})]}),x]})},uy=x.PA((W=>{const y=d.g(),M={...W,hoverEnabled:y.ui.betSpot.isHoverActive,backgroundState:y.ui.betSpot.getBackgroundState(Y.LightningStormBetCode.EvenMoney)};return U.jsx(gy,{...M})}));function ey(W){switch(W){case o.C1.Horizontal:return"right center";case o.C1.Vertical:return"center bottom"}}const ly="payoutPlate--026fd",Gy="hidden--33bb4",Yy="vertical--88c89",cy=n.forwardRef(((W,y)=>{const{visible:M,className:x,dataRole:n,alignment:k}=W;return U.jsx("div",{ref:y,className:i.A(ly,x,{[Gy]:!M,[Yy]:k===o.C1.Vertical}),"data-role":n,children:"1:1"})})),Dy="evenMoney--6833d",ry="iconWrapper--ebd5d",Ay="vertical--e9dbb",Ty="showPayout--83071",Oy="inactive--21a5b",hy="icon--fa06e",Sy="payoutPlate--c291e",oy="chipContainerWrapper--c3832",dy={[Q.m.Inactive]:Oy,[Q.m.BonusTransition]:Oy},qy=({alignment:W,backgroundState:y,showPayout:M})=>{const x=Y.LightningStormBetCode.EvenMoney,k=n.useRef(null),g=n.useCallback((W=>{k.current=W}),[]),u=h({ref:k,options:{transformOrigin:ey(W)}});return U.jsx(C,{betCode:x,setRef:g,onClick:u,className:i.A(Dy,dy[y],W===o.C1.Vertical&&Ay),children:U.jsxs(uy,{alignment:W,backgroundState:y,children:[U.jsxs("div",{className:i.A(ry,{[Ty]:M}),children:[U.jsx(Y.LightningStormIconEvenMoney,{className:hy}),U.jsx(cy,{visible:M,className:Sy,alignment:W})]}),U.jsx("div",{className:oy,children:U.jsx(oW,{betCode:x})})]})})},sy=x.PA((W=>{const y=d.g(),M={...W,backgroundState:y.ui.betSpot.getBackgroundState(Y.LightningStormBetCode.EvenMoney),showPayout:y.ui.evenMoney.isPayoutVisible};return U.jsx(qy,{...M})})),Ny=2,_y=n.memo((({alignment:W,inactive:y})=>{const M=n.useMemo((()=>`${String(Math.random())}-numbers-background-${W}-${y}`),[W,y]),i=function(W){return W===o.C1.Horizontal?[0,0,440,224]:[0,0,359,219]}(W),x=function(W){return W?U.jsxs(U.Fragment,{children:[U.jsx("stop",{stopColor:"#736444"}),U.jsx("stop",{offset:"1",stopColor:"#5E4522"})]}):U.jsxs(U.Fragment,{children:[U.jsx("stop",{stopColor:"#BFA772"}),U.jsx("stop",{offset:"0.257241",stopColor:"#E5CD98"}),U.jsx("stop",{offset:"0.497503",stopColor:"#F4E7BA"}),U.jsx("stop",{offset:"0.758103",stopColor:"#795212"}),U.jsx("stop",{offset:"1",stopColor:"#9B7338"})]})}(y);return U.jsxs("svg",{id:M,width:"100%",height:"100%",viewBox:`${i[0]} ${i[1]} ${i[2]} ${i[3]}`,preserveAspectRatio:"none",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{display:"block"},children:[U.jsx("rect",{x:.5*Ny,y:.5*Ny,width:i[2]-Ny,height:i[3]-Ny,stroke:`url(#${M}-paint0)`,strokeWidth:Ny}),U.jsx("defs",{children:U.jsx("linearGradient",{id:`${M}-paint0`,x1:.5*i[2],y1:"0",x2:.5*i[2],y2:i[3],gradientUnits:"userSpaceOnUse",children:x})})]})})),py="numberBetSpotBackground--f4851",by="oddNumber--c591d",my="evenNumber--d9cfe",zy="animatedBackground--54012",Ky="stormBonus--9fb74",Py="hoverEnabled--1c844",Ry=W=>{const{betCode:y,hoverEnabled:M,children:x,setAnimatedBackgroundRef:k,isWinningBetSpot:g,bonusGame:u}=W,e=function(W){return Y.lightningStormOddBetSpotGroup.includes(W)?by:Y.lightningStormEvenBetSpotGroup.includes(W)?my:void 0}(y),[G,c]=n.useState(null);return n.useEffect((()=>(G&&k({animatedBackground:G}),()=>{k(null)})),[k,G]),U.jsxs("div",{className:i.A(py,e,{[Py]:M}),children:[U.jsx("div",{className:i.A(zy,{[Ky]:u===Y.LightningStormBonusGame.StormBonus}),style:u&&g?{"--animatedBackgroundColor":`rgb(${l.Ls[u]})`}:{},ref:c}),x]})},Iy=x.PA((W=>{const y=d.g(),M={...W,hoverEnabled:y.ui.betSpot.isHoverActive,bonusGame:y.wheel.getBonusGameFor(W.betCode),isWinningBetSpot:y.ui.betSpot.getIsWinningBetSpot(W.betCode)};return U.jsx(Ry,{...M})}));var Ey=M(93727),Zy=M(87600),fy=M(295213),Vy=M(843826);const $y={[Y.LightningStormBonusGame.StormBonus]:pW,[Y.LightningStormBonusGame.Fireball]:Zy,[Y.LightningStormBonusGame.HotSpot]:fy,[Y.LightningStormBonusGame.MonsterMash]:Vy,[Y.LightningStormBonusGame.BatteryCharger]:Ey},ay="bonusBackground--aa8a6",Hy="noBetWrapper--49c84",By="active--0876d",vy="iconWrapper--e177d",Ly="icon--259f1",Xy="visible--c2e19",wy=W=>{const{elementsAreFullyVisible:y,bonusGame:M,setRefs:x,betCode:k,hasBet:g,isWinningBetSpot:u}=W,[e,l]=n.useState(null),[G,c]=n.useState(null);return n.useEffect((()=>{x(e&&G?{wrapper:e,icon:G}:null)}),[e,G,x,k]),n.useEffect((()=>()=>{x(null)}),[x]),M?U.jsxs(U.Fragment,{children:[U.jsx("div",{ref:l,className:ay}),U.jsx("div",{className:i.A(Hy,{[By]:!g&&!u}),children:U.jsx("div",{className:vy,children:U.jsx("div",{className:i.A(Ly,{[Xy]:y}),ref:c,children:U.jsx(Y.LightningStormBonusGameImage,{bonus:M,catalog:$y})})})})]}):null},Fy=x.PA((W=>{const y=d.g(),M={...W,elementsAreFullyVisible:y.ui.numberBetSpot.isBonusElementsFullyVisible(W.betCode),bonusGame:y.wheel.getBonusGameFor(W.betCode),hasBet:y.ui.betSpot.getContainsBet(W.betCode),isWinningBetSpot:y.ui.betSpot.getIsWinningBetSpot(W.betCode)};return U.jsx(wy,{...M})})),ty="boldMultiplierBorder--2c108",Jy="visible--eadcd",jy=W=>{const{alignment:y,setRef:M,visible:x,active:k}=W,[g,u]=n.useState(null);return n.useEffect((()=>{M(g?{multiplierBorder:g}:null)}),[g,M]),n.useEffect((()=>()=>{M(null)}),[M]),k?U.jsx("div",{ref:u,className:i.A(ty,{[Jy]:x}),children:U.jsx(Qy,{alignment:y})}):null},Cy=x.PA((W=>{const y=d.g(),M={...W,active:y.ui.numberBetSpot.getIsBoldMultiplierBorderActive(W.betCode),visible:y.ui.numberBetSpot.getIsBoldMultiplierBorderVisible(W.betCode)};return U.jsx(jy,{...M})})),Qy=({alignment:W})=>{const y=n.useMemo((()=>`${String(Math.random())}-bold-multiplier-background-${W}`),[W]),M=function(W){return W===o.C1.Horizontal?[0,0,74,49]:[0,0,54,41]}(W),i=function(W){return W===o.C1.Horizontal?"M71 2H2v44h69V2zM2 0H0v48h73V0H2z":"M51.328 1.667H1.672v36.666h49.656V1.667zM1.672 0H0v40H53V0H1.672z"}(W);return U.jsxs("svg",{id:y,width:"100%",height:"100%",viewBox:`${M[0]} ${M[1]} ${M[2]} ${M[3]}`,fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{display:"block"},children:[U.jsx("g",{children:U.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:i,fill:`url(#${y}-paint0)`})}),U.jsx("defs",{children:U.jsxs("linearGradient",{id:`${y}-paint0`,x1:.5*M[2],y1:"0",x2:.5*M[2],y2:M[3]-1,gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#CB9E27"}),U.jsx("stop",{offset:".378",stopColor:"#FFFAED"}),U.jsx("stop",{offset:".642",stopColor:"#FFFDF7"}),U.jsx("stop",{offset:"1",stopColor:"#C18F13"})]})})]})},WM=1,yM=n.memo((({alignment:W,inactive:y})=>{const M=n.useMemo((()=>`${String(Math.random())}-number-background-${W}-${y}`),[W,y]),i=function(W){return W===o.C1.Horizontal?[0,0,88,56]:[0,0,74,55]}(W),x=function(W){return W?U.jsxs(U.Fragment,{children:[U.jsx("stop",{stopColor:"#857451"}),U.jsx("stop",{offset:"1",stopColor:"#57401E"})]}):U.jsxs(U.Fragment,{children:[U.jsx("stop",{stopColor:"#DDC087"}),U.jsx("stop",{offset:"1",stopColor:"#916A31"})]})}(y);return U.jsxs("svg",{id:M,width:"100%",height:"100%",viewBox:`${i[0]} ${i[1]} ${i[2]} ${i[3]}`,fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{display:"block"},children:[U.jsx("rect",{x:.5*WM,y:.5*WM,width:i[2]-WM,height:i[3]-WM,stroke:`url(#${M}-paint0)`,strokeWidth:WM}),U.jsx("defs",{children:U.jsx("linearGradient",{id:`${M}-paint0`,x1:.5*i[2],y1:WM,x2:.5*i[2],y2:i[3]-WM,gradientUnits:"userSpaceOnUse",children:x})})]})})),MM="overlay--10f3f",UM="visible--f734c",iM="winningBetSpotAnimating--bfc17",xM=W=>{const{visible:y,isWinningBetSpotAnimating:M}=W;return U.jsx("div",{className:i.A(MM,{[UM]:y,[iM]:M})})},nM=x.PA((W=>{const y=d.g(),M={visible:y.ui.numberBetSpot.getIsInactiveOverlayVisible(W.betCode),isWinningBetSpotAnimating:y.ui.bettingGrid.isWinningBetSpotAnimating};return U.jsx(xM,{...M})})),kM="multiplierWrapper--eaf6f",gM="inactive--5d087",uM="gradient--c6df7",eM="visible--5ee74",lM="multiplier--cf8da",GM="vertical--6a3f5",YM="multiplierShadowWrapper--7b2dd",cM={[Y.LightningStormBonusGame.BatteryCharger]:"batteryCharger--39620",[Y.LightningStormBonusGame.MonsterMash]:"monsterMash--65b64",[Y.LightningStormBonusGame.HotSpot]:"hotSpot--3403c",[Y.LightningStormBonusGame.StormBonus]:"stormBonus--27d91",[Y.LightningStormBonusGame.Fireball]:"fireball--81f63"},DM=W=>{const{multiplier:y,visible:M,setRefs:x,bonusGame:k,alignment:g,isInactive:u}=W,[e,l]=n.useState(null),[G,c]=n.useState(null);return n.useEffect((()=>{x(e&&G?{multiplierGradient:e,multiplier:G}:null)}),[e,G,x]),n.useEffect((()=>()=>{x(null)}),[x]),y&&0!==y?U.jsxs("div",{className:i.A(kM,{[gM]:u}),children:[U.jsx("div",{ref:l,className:i.A(uM,k&&cM[k],{[eM]:M})}),U.jsx("div",{ref:c,className:i.A(lM,{[eM]:M,[GM]:g===o.C1.Vertical}),children:U.jsx("div",{className:i.A(YM,{[GM]:g===o.C1.Vertical}),children:U.jsx(Y.LightningStormMultiplier,{value:`${y}x`})})})]}):null},rM=x.PA((W=>{const y=d.g(),M={...W,multiplier:y.ui.numberBetSpot.getMultiplier(W.betCode),visible:y.ui.numberBetSpot.getIsMultiplierVisible(W.betCode),bonusGame:y.wheel.getBonusGameFor(W.betCode),isInactive:y.ui.numberBetSpot.isMultiplierInactive};return U.jsx(DM,{...M})})),AM="numbers--c6818",TM="vertical--43062",OM="number--286bf",hM="border--ab2c1",SM="numberBetCodeWrapper--371d9",oM="numberBetCode--0877f",dM="sideBetCode--15140",qM="sideBetCodeNoBets--312e5",sM="chipContainerWrapper--452cc",NM="clickOverlay--6333e",_M="winningBetSpot--f2280",pM={[DW._.MobilePortrait]:"portrait--ab06b",[DW._.Tablet]:"tablet--ab2a7"},bM=W=>{const{betCode:y,setNumberRef:M,lightningRoundActive:x,isBonusShootAnimating:l,hasBonusGame:c,setBonusRef:D,layout:r,alignment:h,isInactive:S,multiplierVisible:o,hasBet:d,isWinningBetSpot:q}=W,[s,N]=sW.K(),[_,p]=sW.K(),b=n.useRef(null),[m,z]=n.useState(null),[K,P]=n.useState(null),[R,I]=n.useState(null),[E,Z]=n.useState(null),f=n.useRef(y);f.current=y,n.useEffect((()=>{var W,M,U,i;D(y,R?{...R,multiplier:null!==(W=null==m?void 0:m.multiplier)&&void 0!==W?W:null,multiplierGradient:null!==(M=null==m?void 0:m.multiplierGradient)&&void 0!==M?M:null,multiplierBorder:null!==(U=null==K?void 0:K.multiplierBorder)&&void 0!==U?U:null,animatedBackground:null!==(i=null==E?void 0:E.animatedBackground)&&void 0!==i?i:null}:void 0)}),[y,R,m,K,D,E]),n.useEffect((()=>{s&&_?M(y,{center:s,side:_}):M(f.current,void 0)}),[y,s,_,M]),n.useEffect((()=>{x||l||s&&_&&(s.opacity=c?0:1,_.opacity=c?o?0:1:0)}),[x,c,_,s,o,l]);const V=function(W){const{labelRef:y,overlayRef:M}=W,U=n.useRef(void 0),i=n.useRef(y);return i.current=y,n.useCallback((()=>{var W;if(null===(W=U.current)||void 0===W||W.call(U),U.current=void 0,M.current&&i.current){i.current.scale=1;const W=new G.a(M.current);W.opacity=0;const y=u.M();y.parallel([g.M(W).animateTo({opacity:1},T-A,k.dV).animateTo({opacity:0},O-T,k.dV),g.M(i.current).animateTo({scale:.93},T-A,k.dV).animateTo({scale:1},O-T,k.dV)]),U.current=e.l({anim:y})}}),[M,i])}({labelRef:s,overlayRef:b});return n.useEffect((()=>()=>{M(f.current,void 0),D(f.current,void 0)}),[D,M]),U.jsxs(C,{betCode:y,onClick:V,className:i.A(OM,{[_M]:q}),children:[U.jsxs(Iy,{betCode:y,setAnimatedBackgroundRef:Z,children:[U.jsx(Fy,{betCode:y,setRefs:I}),U.jsx("div",{ref:b,className:NM}),U.jsx("div",{className:SM,children:U.jsx(Y.LightningStormGradientStrokeText,{ref:N,className:oM,children:y})}),U.jsx(nM,{betCode:y}),U.jsx("div",{ref:p,className:dM,children:U.jsx("span",{className:i.A({[qM]:!d}),children:y})}),U.jsx(rM,{setRefs:z,betCode:y,alignment:h}),U.jsx("div",{className:i.A(sM,pM[r]),children:U.jsx(oW,{betCode:y})})]}),U.jsx("div",{className:hM,children:U.jsx(yM,{alignment:h,inactive:S})}),U.jsx(Cy,{alignment:h,betCode:y,setRef:P})]})},mM=x.PA((W=>{const y=d.g(),M={...W,setNumberRef:y.references.setBetSpotNumberTextReference,hasBonusGame:!!y.wheel.getBonusGameFor(W.betCode),multiplierVisible:y.ui.numberBetSpot.getIsMultiplierVisible(W.betCode),lightningRoundActive:y.lightningRound.isActive,isBonusShootAnimating:y.lightningRound.isBonusShootAnimating,setBonusRef:y.references.setBetSpotBonusBackgroundRef,hasBet:y.ui.betSpot.getContainsBet(W.betCode),layout:y.device.componentLayout,isWinningBetSpot:y.ui.betSpot.getIsWinningBetSpot(W.betCode)};return U.jsx(bM,{...M})})),zM=n.memo((({alignment:W,children:y,isInactive:M})=>{const x=Y.lightningStormNumberBetSpotGroup;return U.jsxs("div",{className:i.A(AM,{[TM]:W===o.C1.Vertical}),children:[x.map((y=>U.jsx(mM,{betCode:y,isInactive:M,alignment:W},y))),y,U.jsx("div",{className:hM,children:U.jsx(_y,{alignment:W,inactive:M})})]})})),KM=x.PA((W=>{const y={...W,isInactive:d.g().ui.numberBetSpot.isInactiveNumbers};return U.jsx(zM,{...y})})),PM="chaser-expander",RM="chaser-expander-arrow";var IM=M(850999),EM=M(253796);const ZM="chaserExpanderWrapper--d9703",fM="chaserExpander--6c268",VM="backgroundHover--93421",$M=W=>{const{expanded:y,alignment:M,className:x,onClick:k,setReference:g}=W,u=n.useMemo((()=>y?-50:M===o.C1.Vertical?-27.5:-50),[M,y]),[e,l]=sW.K({translateUnits:"%"},{x:-50,y:u,opacity:0}),[G,Y]=n.useState(null),c=n.useMemo((()=>`${String(Math.random())}-chaser-expander-${M}-${y}`),[M,y]),D=function(W){return W===o.C1.Horizontal?[0,0,68,50]:[0,0,60,58]}(M),r=function(W){return W===o.C1.Horizontal?"M9.804 3.497A2 2 0 0111.74 2h44.52a2 2 0 011.936 1.497L63 22l-4.804 18.503A2 2 0 0156.26 42H11.74a2 2 0 01-1.936-1.497L5 22 9.804 3.497z":"M10.708 3.802A2.4 2.4 0 0113.032 2h33.45a2.4 2.4 0 012.324 1.802L54.514 26l-5.708 22.198A2.4 2.4 0 0146.482 50h-33.45a2.4 2.4 0 01-2.324-1.802L5 26l5.708-22.198z"}(M),A=function(W){return W===o.C1.Horizontal?"M6 22h57L58.16 2H10.84L6 22z":"M4 26h51.2L48.192 2H11.008L4 26z"}(M),T=function(W,y){return W===o.C1.Horizontal?y?"M10.824 3.207A.275.275 0 0111.091 3h45.818c.126 0 .236.085.267.207l4.775 18.725a.276.276 0 010 .136l-4.775 18.725a.275.275 0 01-.267.207H11.091a.275.275 0 01-.267-.207L6.05 22.068a.275.275 0 010-.136l4.775-18.725z":"M10.839 3.15a.2.2 0 01.193-.15h45.936a.2.2 0 01.193.15l4.794 18.8a.2.2 0 010 .1l-4.794 18.8a.2.2 0 01-.193.15H11.032a.2.2 0 01-.193-.15l-4.794-18.8a.2.2 0 010-.1l4.794-18.8z":"M10.859 3.15a.2.2 0 01.193-.15h37.096a.2.2 0 01.193.15l5.814 22.8a.2.2 0 010 .1l-5.814 22.8a.2.2 0 01-.193.15H11.052a.2.2 0 01-.193-.15l-5.814-22.8a.2.2 0 010-.1l5.814-22.8z"}(M,y),O=function(W){return W===o.C1.Horizontal?["M14.21 6L10 22l4.21 16","M54 6l4.21 16L54 38"]:["M14 7L9 26l5 19","M45 7l5 19-5 19"]}(M),h=function(W){return W===o.C1.Horizontal?"M40.703 14L34 20.703 27.297 14 26 15.297l8 8 8-8L40.703 14zm0 6.154L34 26.857l-6.703-6.703L26 21.452l8 8 8-8-1.297-1.298z":"M35.784 19L29.5 25.284 23.216 19 22 20.216l7.5 7.5 7.5-7.5L35.784 19zm0 5.77L29.5 31.054l-6.284-6.284L22 25.986l7.5 7.5 7.5-7.5-1.216-1.216z"}(M),S=function(W){return W?["#897148","#846C35"]:["#9E7B43","#BFA672"]}(y);return n.useEffect((()=>{g(e&&G?{expanderButton:e,arrow:G}:void 0)}),[e,G,g]),n.useEffect((()=>()=>{g(void 0)}),[g]),U.jsx("div",{className:i.A(ZM,x),onClick:k,"data-role":PM,"data-expanded":y,ref:l,children:U.jsxs("svg",{className:fM,width:"100%",height:"100%",viewBox:`${D[0]} ${D[1]} ${D[2]} ${D[3]}`,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsxs("g",{filter:`url(#${c}-filter0)`,shapeRendering:"crispEdges",children:[U.jsx("use",{xlinkHref:`#${c}-backgroundShape`,fill:"#000",fillOpacity:".96"}),y&&U.jsx("use",{xlinkHref:`#${c}-backgroundShape`,fill:"#280804",fillOpacity:".96"})]}),U.jsx("path",{opacity:".1",d:A,fill:"#FFFBDA"}),U.jsx("use",{className:VM,xlinkHref:`#${c}-backgroundShape`,fill:"#FFE98E"}),U.jsx("use",{xlinkHref:`#${c}-borderShape`,stroke:`url(#${c}-paint0)`,strokeWidth:"2"}),y&&U.jsx("use",{xlinkHref:`#${c}-borderShape`,stroke:"#000",strokeOpacity:".2",strokeWidth:"2"}),!y&&U.jsxs(U.Fragment,{children:[U.jsx("path",{opacity:".6",d:O[0],stroke:`url(#${c}-paint1)`,strokeWidth:"2"}),U.jsx("path",{opacity:".6",d:O[1],stroke:`url(#${c}-paint2)`,strokeWidth:"2"})]}),U.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:h,fill:`url(#${c}-paint3)`,ref:Y,"data-role":RM}),U.jsxs("defs",{children:[U.jsx("path",{id:`${c}-backgroundShape`,d:r}),U.jsx("path",{id:`${c}-borderShape`,d:T}),U.jsxs("linearGradient",{id:`${c}-paint0`,x1:"50%",y1:"2",x2:"58%",y2:"84%",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#916A31"}),U.jsx("stop",{offset:".485",stopColor:"#C0A773"}),U.jsx("stop",{offset:"1",stopColor:"#78531C"})]}),U.jsxs("linearGradient",{id:`${c}-paint1`,x1:"20%",y1:"76%",x2:"20%",y2:"12%",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#926C32",stopOpacity:"0"}),U.jsx("stop",{offset:".503",stopColor:"#926C32"}),U.jsx("stop",{offset:"1",stopColor:"#926C32",stopOpacity:"0"})]}),U.jsxs("linearGradient",{id:`${c}-paint2`,x1:"80%",y1:"76%",x2:"80%",y2:"12%",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#926C32",stopOpacity:"0"}),U.jsx("stop",{offset:".503",stopColor:"#926C32"}),U.jsx("stop",{offset:"1",stopColor:"#926C32",stopOpacity:"0"})]}),U.jsxs("linearGradient",{id:`${c}-paint3`,x1:"50%",y1:"28%",x2:"50%",y2:"58%",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:S[0]}),U.jsx("stop",{offset:"1",stopColor:S[1]})]}),U.jsxs("filter",{id:`${c}-filter0`,x:"0",y:"0",width:D[2],height:D[3],filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[U.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),U.jsx("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),U.jsx("feOffset",{dy:"3"}),U.jsx("feGaussianBlur",{stdDeviation:"2.5"}),U.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),U.jsx("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0"}),U.jsx("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_9171_91299"}),U.jsx("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_9171_91299",result:"shape"})]})]})]})})},aM=x.PA((W=>{const y=d.g(),M={...W,onClick:n.useCallback((()=>{const W=y.preferences.getValue(IM._.ChasersEnabled);y.preferences.updatePreferenceValue(IM._.ChasersEnabled,!W),W?y.sound.playSound({event:EM.PZ.CloseChasersMenu}):y.sound.playSound({event:EM.PZ.OpenChasersMenu})}),[y]),setReference:y.references.setChaserExpanderReferenceType};return U.jsx($M,{...M})}));var HM;(function(W){W["Left"]="DecorPosition.Left",W["Right"]="DecorPosition.Right"})(HM||(HM={}));const BM="decor--223ac",vM="vertical--8be56",LM="sideLines--ecb12",XM="hidden--240bc",wM={[HM.Left]:void 0,[HM.Right]:"right--559a0"},FM=n.memo((W=>{const{alignment:y,position:M,showSideLines:x,active:k}=W,g=n.useMemo((()=>`${String(Math.random())}-betting-grid-decor-${y}-${M}-${k}`),[y,M,k]),u=function(W,y){switch(W){case o.C1.Horizontal:return y?["#AD9C53","#9A7237"]:["#7C5926","#9A7237"];case o.C1.Vertical:return["#C1A874","#C1A874"]}}(y,k);return U.jsxs("div",{className:i.A(BM,wM[M],{[vM]:y===o.C1.Vertical}),children:[y===o.C1.Horizontal&&U.jsxs("svg",{id:`${g}-lines`,className:i.A(LM,{[XM]:!x}),width:"100%",height:"100%",viewBox:"0 0 187 37",fill:"none",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 32h181.001v-2.207H0V32zm0-10.444h181.001v-1.103H0v1.103zM64 16.5h87.001v-1h-87v1zm123.001 10h-87v-1h87v1zm-155 10h87v-1h-87v1z",fill:`url(#${g}-lines-paint0)`}),U.jsx("defs",{children:U.jsxs("linearGradient",{id:`${g}-lines-paint0`,x1:"128",y1:"36",x2:"0",y2:"36",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#473E21"}),U.jsx("stop",{offset:"1",stopColor:"#AC9A52"})]})})]}),U.jsxs("svg",{id:g,width:"100%",height:"100%",viewBox:`0 0 32 ${y===o.C1.Horizontal?37:32}`,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("use",{fillRule:"evenodd",clipRule:"evenodd",xlinkHref:`#${g}-path`,fill:`url(#${g}-paint0)`}),!k&&U.jsx("use",{fillRule:"evenodd",clipRule:"evenodd",xlinkHref:`#${g}-path`,fill:"black",fillOpacity:"0.4"}),U.jsxs("defs",{children:[U.jsx("path",{id:`${g}-path`,d:"M32 29.793H19.861v-8.237H32v-1.103H19.861v-8.315h-8.275V.039h-1.103v12.099H2.206V0H0V14.345H10.483v7.211H17.655V32H32v-2.207zm-14.346-9.34h-6.068v-6.108h6.068v6.108z"}),U.jsxs("linearGradient",{id:`${g}-paint0`,x1:"32",y1:"32",x2:"1.39876e-06",y2:"-1.39877e-06",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:u[0]}),U.jsx("stop",{offset:"1",stopColor:u[1]})]})]})]})]})})),tM=.1,JM=.165,jM=.2,CM=.435;function QM(W){const{arrow:y,stormChaser:M,xChaser:U,expanderButton:i}=W.animatables,x=g.M(i).animateTo({scale:.5},tM,k.dV).animateTo({scale:.75,y:-50},jM-tM,k.dV),n=g.M(y).animateTo({scale:1,x:0,y:0,rotation:0},0,k.dV).delay(tM).animateTo({rotation:180,x:0,y:-12},CM-tM,k.dV),e=g.M(M).animateTo({x:50,opacity:0},0,k.dV).delay(tM).animateTo({x:0,opacity:1},CM-tM,k.dV),l=g.M(U).animateTo({x:-50,opacity:0},0,k.dV).delay(tM).animateTo({x:0,opacity:1},CM-tM,k.dV);return u.M().parallel([x,e,l,n])}function WU(W){const{alignment:y,animatables:{xChaser:M,stormChaser:U,expanderButton:i,arrow:x}}=W,n=y===o.C1.Vertical?-27.5:-50,e=g.M(i).animateTo({scale:.75,y:-50},0,k.dV).animateTo({scale:.3,y:-50},JM,k.dV).animateTo({scale:1,y:n},jM,k.dV),l=g.M(x).animateTo({scale:1,rotation:180,x:0,y:-12},0,k.dV).delay(tM).animateTo({rotation:0,x:0,y:0},CM-tM,k.dV),G=g.M(U).animateTo({x:0,opacity:1},0,k.dV).delay(tM).animateTo({x:50,opacity:0},CM-tM,k.dV),Y=g.M(M).animateTo({x:0,opacity:1},0,k.dV).delay(tM).animateTo({x:-50,opacity:0},CM-tM,k.dV);return u.M().parallel([G,Y,l,e])}var yU=M(547526);function MU(W){const{expanderRef:{expanderButton:y}}=W;return g.M(y).animateTo({opacity:0},.5*yU.f,k.dV)}function UU(W){const{expanderRef:{expanderButton:y}}=W;return g.M(y).animateTo({opacity:1},yU.f,k.dV)}const iU=1.8,xU=1.8,nU=45,kU=23,gU=23;var uU=M(803903);const eU="lightSweepOuter--68ae8",lU="chasersEnabled--4d501",GU="lightSweepInner--c9422",YU="lightSweep--a949b",cU={[o.C1.Vertical]:"vertical--7fa45",[o.C1.Horizontal]:"horizontal--fb142"},DU=n.memo((({isAnimationRunning:W,alignment:y,chasersEnabled:M})=>{const[x,l]=sW.K({translateOrigin:uU.t.Center,transformOrigin:"center bottom"}),[G,Y]=sW.K({translateUnits:"%"});return function({lightSweepRef:W,lightSweepContainerRef:y,isRunning:M}){n.useEffect((()=>{if(!W||!y||!M)return;const U=Q.r/2;W.rotation=-1*nU,y.x=-1*kU,y.y=gU;const i=u.M().parallel([g.M(W).animateTo({rotation:nU},Q.r,k.dV),g.M(y).animateTo({x:0,y:0},U,k.Do).animateTo({x:kU,y:gU},U,k.WD)]).delay(Q.r);return e.l({anim:i,repeat:Number.MAX_VALUE})}),[W,y,M])}({lightSweepRef:x,lightSweepContainerRef:G,isRunning:W}),W?U.jsx("div",{className:i.A(eU,cU[y],{[lU]:M}),children:U.jsx("div",{className:GU,ref:Y,children:U.jsx("div",{className:i.A(YU,cU[y]),ref:l})})}):null})),rU=x.PA((W=>{const y={...W,isAnimationRunning:d.g().ui.bettingGrid.invitingAnimationRunning};return U.jsx(DU,{...y})}));var AU=M(797238);const TU="corner-ball",OU="data:image/webp;base64,UklGRiQDAABXRUJQVlA4WAoAAAAQAAAAIwAAIwAAQUxQSEkBAAABkFXbtug0V0IkPCk4SRwEJ6kD6oA6QMJzwHPQOFjz4948kBAREzBOb/eP48n//fO+jV++fUVZ79ffeDsqJU05rj+5PORkFB6XU9sOJWlaH9uJ7YCQlzV1bC8uR8iiKRHZL6sHIUJOJo/FrROvEwW9TQcpy5Q5CY4xxhWihZyOXMfYJ3ndKeFrbIpehJJWwvbudU4vkur9c5V1SJqRfOw6kVZkXTmeEgQpCTXNT4WihAoRFcqyECJSyOT/IjJHBJmr56HV6aS8bP9rWSUVBCmqf/dFFPlpwfvWNBd1Kpq38bUqJXNoCvYxbgQhc5NJ6jrGOLJoKpSUyTHGGG/mcr5ocZ3GY6FUrZD5z1hedmcXkeX3ZTW2o6nI6Xxv4/V2TOumIvZtnL08UGjK8nEZP7wdcrJyvI1fvO2JJr6u45e3++f+5Hl83LdxGgBWUDggtAEAALAKAJ0BKiQAJAA+gTSSR6UjIaE1XV1QoBAJaAC/cUFWfntPOPQjHwltspzvH9y6YDfAOlmK8EMv8dhaSs4ppimbNZYAEevj2x+xTpeMX0aPYqVr4PsKONxbN42oPEAAnO+kPSBOYlwzn/gp2bbubGliIL8LFTuf5vH5b+Iz49we5teSGbYalV7KyEas/LJo17lKwdfEe2CodO5hNxTCorWmKvJvgDw1BF7y+/EIHFmAW2uKZ78E9oRfguzOe37XIRq+ckSHy0Qftig/dd5khNkPnUCFIwAykfAeeoK4AEudUibo9ycZ6sjVGGW8ZP/udVcYy8JxYmgDDC9CGAG4D0BKFHTGzl2RvnAHPaaQbVGtObgrHLnv5/8EkOZzM8xaPos1nn0R+ob7yyOVlxzW1TzNvovluw3c/0eeVPbC3W+N3urq0C/YN+OUxTctAuy3mbphDagfAMfE71W7SQbltGByF7XuvnBfL3PwJekBGgNqM5N8ABvR93kLGGHseT6CcRLTf8+HTt50qqEInWfK6ev/APUWhbaeawXpddz2b8kcRtHhWuP6LoDY+b+1iTR8+a6AAAA=",hU=M.p+"images/ballactive.fef0ecbc.webp",SU=M.p+"images/lightning.92008ecf.webp",oU="corner--46233",dU="ball--8ecc1",qU="inactiveBall--40a59",sU="activeBall--531d8",NU="lightningWrapper--30c1d",_U="lightning--137cc",pU={[R.kt.RightTop]:"rightTop--ac3f7",[R.kt.LeftBottom]:"leftBottom--3586f",[R.kt.RightBottom]:"rightBottom--35cd2"},bU=W=>{const{corner:y,setRef:M}=W,[x,k]=n.useState(null),[g,u]=n.useState(null),[e,l]=n.useState(null);return n.useEffect((()=>{M(x&&g&&e?{ballWrapper:x,activeBall:g,lightning:e}:null)}),[x,g,e,M]),n.useEffect((()=>()=>{M(null)}),[M]),U.jsxs("div",{className:i.A(oU,pU[y]),children:[U.jsx("div",{className:NU,children:U.jsx(dW.d,{setRef:l,src:SU,spriteClass:_U})}),U.jsxs("div",{ref:k,className:dU,"data-role":TU,children:[U.jsx(NW.w,{className:qU,src:OU,alt:"corner"}),U.jsx(NW.w,{ref:u,className:sU,src:hU,alt:"corner_active"})]})]})},mU="grid-corners",zU="container--876a5",KU="hidden--60039",PU="corners--55ac2",RU="lines--f44e8",IU="line--ec4e3",EU="vertical--3c6a4",ZU="horizontal--f5d57",fU=W=>{const{visible:y,setLightningGridCorners:M}=W,[x,k]=n.useState(null),[g,u]=n.useState(null),[e,l]=n.useState(null),[G,Y]=n.useState(null),c=AU.R(y,1e3);return n.useEffect((()=>{M(G&&x&&e&&g?{[R.kt.RightBottom]:e,[R.kt.RightTop]:g,[R.kt.LeftTop]:x,[R.kt.LeftBottom]:G}:void 0)}),[x,G,e,g,M]),n.useEffect((()=>()=>{M(void 0)}),[M]),c?U.jsxs("div",{className:i.A(zU,{[KU]:!y}),style:{"--gridMargin":1},children:[U.jsxs("div",{className:RU,children:[U.jsx("div",{className:i.A(IU,ZU)}),U.jsx("div",{className:i.A(IU,EU)}),U.jsx("div",{className:i.A(IU,ZU)}),U.jsx("div",{className:i.A(IU,EU)})]}),U.jsxs("div",{className:PU,"data-role":mU,"data-visible":y,children:[U.jsx(bU,{corner:R.kt.LeftTop,setRef:k}),U.jsx(bU,{corner:R.kt.RightTop,setRef:u}),U.jsx(bU,{corner:R.kt.LeftBottom,setRef:Y}),U.jsx(bU,{corner:R.kt.RightBottom,setRef:l})]})]}):null},VU=x.PA((()=>{const W=d.g(),y={visible:W.lightningRound.isActive,setLightningGridCorners:W.references.setLightningGridCorners};return U.jsx(fU,{...y})})),$U="bettingGrid--ebe6f",aU="vertical--6614d",HU="collapseBetOnaAll--9ed57",BU="collapseChasers--462a0",vU="mainContentWrapper--00988",LU="lightningRound--d5ba8",XU="evenMoneyContainerWrapper--8eb39",wU="evenMoneyWrapper--eea98",FU="numbersWrapper--e7c91",tU="betOnAllWrapper--81499",JU="catcherContainerWrapper--854e4",jU="catcherWrapper--f1f5c",CU="chaserExpander--8dc3a",QU="hidden--54673",Wi="decor--69ab8",yi="left--a083f",Mi="right--bc180",Ui="observingBonusGame--cd6ad",ii=W=>{const{visible:y,alignment:M,showBetOnAll:x,showSideDecors:c,setReference:D,isLightningRoundActive:r,isBettingEnabled:A,showChasersExpandButton:T,chasersEnabled:O,xChaserRef:h,stormChaserRef:d,expanderRef:q,onChaserAnimationStart:s,onChaserAnimationEnd:N,observingBonusGame:_,winningBetCode:p,isWinningBetSpotAnimating:b,betSpotBackgroundRefs:m,getBetSpotReference:z,getBonusGameForBetSpot:K,setIsWinningBetSpotAnimating:I}=W,E=P.v(R.Or.BettingGrid,D),Z=M===o.C1.Vertical,f=!O&&(Z||!T),[V,$]=function({isLightningRoundActive:W,isVertical:y}){const[M,U]=n.useState(0),[i,x]=n.useState(0);return n.useEffect((()=>{y?(U(0),x(W?iU:0)):(x(W?iU:0),U(W?xU:0))}),[y,W]),[M,i]}({isVertical:Z,isLightningRoundActive:r});(function(W){const{isExpanding:y,alignment:M,onStart:U,onEnd:i}=W,x=n.useRef(),k=n.useMemo((()=>{if(!W.expanderRef||!W.stormChaserRef||!W.xChaserRef)return;const y={arrow:new G.a(W.expanderRef.arrow,{translateUnits:"%",transformOrigin:"center"}),expanderButton:W.expanderRef.expanderButton,stormChaser:new G.a(W.stormChaserRef,{translateUnits:"%"}),xChaser:new G.a(W.xChaserRef,{translateUnits:"%"})};return y.expanderButton.scale=1,y.arrow.x=100,y.arrow.y=80,y.stormChaser.x=50,y.stormChaser.opacity=0,y.xChaser.x=50,y.xChaser.opacity=0,y}),[W.expanderRef,W.stormChaserRef,W.xChaserRef]);n.useEffect((()=>{if(!k)return;const W=y?QM:WU,n=u.M().callback(U).sequence(W({alignment:M,animatables:k})).callback(i),g=e.l({anim:n});return void 0!==x.current&&x.current!==y||n.fastForward(),x.current=y,()=>{n.fastForward(),g()}}),[k,y,M,U,i])})({xChaserRef:h,stormChaserRef:d,expanderRef:q,isExpanding:O,alignment:M,onStart:s,onEnd:N}),function(W){const{expanderRef:y,showChasersExpandButton:M}=W,U=n.useRef();n.useEffect((()=>{if(!y)return;const W=(M?UU:MU)({expanderRef:y}),i=e.l({anim:W});return void 0!==U.current&&U.current!==M||W.fastForward(),U.current=M,()=>{W.fastForward(),i()}}),[y,M])}({expanderRef:q,showChasersExpandButton:T}),function({betSpotBackgroundRefs:W,winningBetCode:y,isWinningBetSpotAnimating:M,getBetSpotReference:U,getBonusGameForBetSpot:i,setIsWinningBetSpotAnimating:x}){n.useEffect((()=>{var n;if(!y||!M)return;const c=U(y);if(!c)return;let D;if(y===Y.LightningStormBetCode.EvenMoney)D=g.M({glow:0}).animateTo({glow:.5},l.X2,k.dV).animateTo({glow:.1},l.QJ-l.X2,k.dV).animateTo({glow:.5},l.Xl-l.QJ,k.dV).animateTo({glow:0},l.Qi-l.Xl,k.dV).onUpdate((W=>{c.style.filter=`brightness(${W.glow+1}) contrast(${.3*W.glow+1})`}));else{const M=null===(n=W[y])||void 0===n?void 0:n.animatedBackground;if(!M)return;const U=new G.a(M);U.opacity=0,D=g.M(U).animateTo({opacity:1},l.X2,k.dV).animateTo({opacity:.3},l.QJ-l.X2,k.dV).animateTo({opacity:1},l.Xl-l.QJ,k.dV).animateTo({opacity:.3},l.Qi-l.Xl,k.dV).onUpdate((W=>{A&&(c.style.boxShadow=`0 0 calc(var(--bettingGridSize) * 3) calc(var(--betingGridSize) * 0.4)rgba(${l.Ls[A]},\n                        ${.8*W.opacity})`)}))}const r=u.M(),A=i(y);r.sequence(D).callback((()=>{x(!1),y===Y.LightningStormBetCode.EvenMoney?c.style.filter="none":c.style.boxShadow="none"}));const T=e.l({anim:r});return()=>{r.fastForward(),T()}}),[W,y,M,U,i,x])}({betSpotBackgroundRefs:m,winningBetCode:p,isWinningBetSpotAnimating:b,getBetSpotReference:z,getBonusGameForBetSpot:K,setIsWinningBetSpotAnimating:I});const a=U.jsx("div",{className:i.A(Wi,yi,{[QU]:!c}),children:U.jsx(FM,{alignment:M,position:HM.Left,showSideLines:!O,active:A})}),H=U.jsx("div",{className:i.A(Wi,Mi,{[QU]:!c}),children:U.jsx(FM,{alignment:M,position:HM.Right,showSideLines:!O,active:A})});return U.jsxs("div",{ref:E,className:i.A($U,{[QU]:!y,[aU]:Z,[LU]:r,[HU]:Z&&!x,[BU]:f,[Ui]:_}),style:{"--lightningGapX":`calc(var(--bettingGridSize) * ${V})`,"--lightningGapY":`calc(var(--bettingGridSize) * ${$})`},children:[U.jsxs("div",{className:vU,children:[U.jsxs("div",{className:XU,children:[Z&&a,U.jsx("div",{className:wU,children:U.jsx(sy,{alignment:M})}),Z&&H]}),U.jsx("div",{className:FU,children:U.jsx(KM,{alignment:M,children:U.jsx(VU,{})})}),U.jsxs("div",{className:i.A(tU,{[QU]:!x}),children:[U.jsx(L,{buttonType:S.Odd,alignment:M,enabled:y}),U.jsx(L,{buttonType:S.Even,alignment:M,enabled:y})]})]}),U.jsxs("div",{className:JU,children:[!Z&&a,U.jsxs("div",{className:jU,children:[U.jsx(QW,{alignment:M,betCode:Y.LightningStormBetCode.StormChaser}),U.jsx(QW,{alignment:M,betCode:Y.LightningStormBetCode.XChaser})]}),!Z&&H,U.jsx(aM,{className:i.A(CU,{[QU]:!T}),expanded:O,alignment:M})]}),U.jsx(rU,{alignment:M,chasersEnabled:O})]})},xi=x.PA((()=>{const W=d.g(),y=n.useCallback((()=>{W.ui.bettingGrid.setIsChaserAnimating(!0)}),[W]),M=n.useCallback((()=>{W.ui.bettingGrid.setIsChaserAnimating(!1)}),[W]),i={isLightningRoundActive:W.lightningRound.isActive,visible:W.ui.bettingGrid.visible,alignment:W.ui.bettingGrid.alignment,showBetOnAll:W.ui.bettingGrid.showBetOnAll,showSideDecors:W.ui.bettingGrid.showSideDecors,setReference:W.references.setReference,isBettingEnabled:W.bets.isBettingEnabled,showChasersExpandButton:W.ui.bettingGrid.showChasersExpandButton,chasersEnabled:W.ui.bettingGrid.chasersEnabled,xChaserRef:W.references.getBetSpotReference(Y.LightningStormBetCode.XChaser),stormChaserRef:W.references.getBetSpotReference(Y.LightningStormBetCode.StormChaser),expanderRef:W.references.chaserExpanderReference,onChaserAnimationStart:y,onChaserAnimationEnd:M,observingBonusGame:W.bonus.isBonusObservingMode,betSpotBackgroundRefs:W.references.betSpotBonusBackgroundReferences,winningBetCode:W.wheel.outcome,isWinningBetSpotAnimating:W.ui.bettingGrid.isWinningBetSpotAnimating,getBetSpotReference:W.references.getBetSpotReference,getBonusGameForBetSpot:W.wheel.getBonusGameFor,setIsWinningBetSpotAnimating:W.ui.bettingGrid.setIsWinningBetSpotAnimating};return U.jsx(ii,{...i})}))},876429:(W,y,M)=>{M.d(y,{Ls:()=>g,QJ:()=>x,Qi:()=>k,X2:()=>i,Xl:()=>n});var U=M(277082);const i=.533,x=1.067,n=1.567,k=2.133,g={[U.LightningStormBonusGame.StormBonus]:"244, 0, 6",[U.LightningStormBonusGame.BatteryCharger]:"10, 241, 0",[U.LightningStormBonusGame.MonsterMash]:"7, 174, 232",[U.LightningStormBonusGame.HotSpot]:"206, 35, 255",[U.LightningStormBonusGame.Fireball]:"239, 116, 3"}},713861:(W,y,M)=>{var U;M.d(y,{m:()=>U,r:()=>i}),function(W){W["Idle"]="BackgroundState.Idle",W["Inactive"]="BackgroundState.Inactive",W["BonusTransition"]="BackgroundState.BonusTransition",W["Win"]="BackgroundState.Win"}(U||(U={}));const i=1.9},427069:(W,y,M)=>{var U;M.d(y,{C1:()=>U,DO:()=>n,Tx:()=>x,ji:()=>i}),function(W){W["Vertical"]="Alignment.Vertical",W["Horizontal"]="Alignment.Horizontal"}(U||(U={}));const i={[U.Horizontal]:2.069,[U.Vertical]:.959},x=.8,n=100},283876:(W,y,M)=>{M.d(y,{R:()=>u,U:()=>g});var U=M(64922),i=M(525620),x=M(757062),n=M(460786),k=M(980733);const g=W=>{const{visible:y,totalTime:M,timeRemaining:i,pulseStartTime:x,running:k,tickingSoundThreshold:g}=W;return y?U.jsx(n.C,{totalTime:M,timeRemaining:i,running:k,pulseStartTime:x,hasLightning:!1,tickingSoundThreshold:g}):null},u=i.PA((()=>{const W=k.g(),y={visible:W.ui.bettingTimer.isVisible,totalTime:W.bettingTimer.totalTime,timeRemaining:W.bettingTimer.timeRemaining,pulseStartTime:x.rv(W.settings.betsClosingTime),running:W.bettingTimer.running,tickingSoundThreshold:W.bettingTimer.tickingSoundThreshold};return U.jsx(g,{...y})}))},650276:(W,y,M)=>{M.d(y,{qe:()=>Y,lN:()=>l,Lz:()=>e,YO:()=>G,L6:()=>u});var U=M(277082);const i=M.p+"images/batterycha.8b3457d4.webp",x=M.p+"images/fireball.cef9bfd8.webp",n=M.p+"images/hotspot.f6b82dc3.webp",k=M.p+"images/lightnings.6c5125e0.webp",g=M.p+"images/monstermas.5d9db121.webp",u={[U.LightningStormBonusGame.HotSpot]:n,[U.LightningStormBonusGame.MonsterMash]:g,[U.LightningStormBonusGame.Fireball]:x,[U.LightningStormBonusGame.StormBonus]:k,[U.LightningStormBonusGame.BatteryCharger]:i},e=1,l=.3,G=.835,Y=2},435972:(W,y,M)=>{M.d(y,{u:()=>_y});var U=M(64922),i=M(699695),x=M(525620),n=M(377810),k=M(277082);function g(W){const y=function(W){switch(W){case k.LightningStormBonusGame.BatteryCharger:return["#115408","#115408","#23810F","#115408","#0A2B04"];case k.LightningStormBonusGame.HotSpot:return["#60096B","#60096B","#8F1299","#60096B","#2A042F"];case k.LightningStormBonusGame.StormBonus:return["#6D090A","#6D090A","#910E0C","#6D090A","#3E0706"];case k.LightningStormBonusGame.MonsterMash:return["#095062","#095062","#0C6886","#095062","#052D38"];case k.LightningStormBonusGame.Fireball:return["#862504","#862504","#B33E08","#862504","#491303"]}}(W);return U.jsxs(U.Fragment,{children:[U.jsx("stop",{stopColor:y[0],stopOpacity:"0"}),U.jsx("stop",{offset:"0.26",stopColor:y[1],stopOpacity:"0.8"}),U.jsx("stop",{offset:"0.47",stopColor:y[2],stopOpacity:"0.8"}),U.jsx("stop",{offset:"0.72",stopColor:y[3],stopOpacity:"0.88"}),U.jsx("stop",{offset:"1",stopColor:y[4],stopOpacity:"0.88"})]})}function u(W){const y=function(W){switch(W){case k.LightningStormBonusGame.BatteryCharger:return["#268A16","#10390A"];case k.LightningStormBonusGame.HotSpot:return["#A111B4","#29062D"];case k.LightningStormBonusGame.StormBonus:return["#93110E","#39110A"];case k.LightningStormBonusGame.MonsterMash:return["#0D779A","#0A2539"];case k.LightningStormBonusGame.Fireball:return["#AC400E","#521B0A"]}}(W);return U.jsxs(U.Fragment,{children:[U.jsx("stop",{stopColor:y[0]}),U.jsx("stop",{offset:".823",stopColor:y[1]})]})}function e(W){const y=function(W){switch(W){case k.LightningStormBonusGame.BatteryCharger:return["#125708","#0A2705"];case k.LightningStormBonusGame.HotSpot:return["#660B72","#29062D"];case k.LightningStormBonusGame.StormBonus:return["#750F0D","#3A0706"];case k.LightningStormBonusGame.MonsterMash:return["#084357","#082E38"];case k.LightningStormBonusGame.Fireball:return["#8A320A","#521B0A"]}}(W);return U.jsxs(U.Fragment,{children:[U.jsx("stop",{stopColor:y[0],offset:".279"}),U.jsx("stop",{stopColor:y[1],offset:"1"})]})}function l(){return U.jsxs(U.Fragment,{children:[U.jsx("stop",{stopColor:"#BD955D"}),U.jsx("stop",{offset:".28",stopColor:"#966F40"}),U.jsx("stop",{offset:".43",stopColor:"#C99B61"}),U.jsx("stop",{offset:".56",stopColor:"#F0BD7A"}),U.jsx("stop",{offset:".63",stopColor:"#FFCA84"}),U.jsx("stop",{offset:".71",stopColor:"#EDBA78"}),U.jsx("stop",{offset:".87",stopColor:"#C0935B"}),U.jsx("stop",{offset:"1",stopColor:"#966F40"})]})}const G=W=>{const{bonus:y,className:M}=W,i=n.useMemo((()=>`${String(Math.random())}-bonus-bet-spot-landscape-background-${y}`),[y]),x=g(y),k=u(y),G=e(y),Y=l();return U.jsxs("svg",{id:i,className:M,width:"100%",height:"100%",viewBox:"0 0 462 219",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("path",{d:"M434.882 8.545A2 2 0 00433.509 8H-3l-23 22.36V219h484V30.36L434.882 8.545z",fill:`url(#${i}-paint15)`}),U.jsx("path",{d:"M434.882 8.545A2 2 0 00433.509 8H-3l-23 22.36V219h484V30.36L434.882 8.545z",fill:`url(#${i}-paint0)`}),U.jsx("mask",{id:`${i}-maskA`,style:{mask:"alpha"},maskUnits:"userSpaceOnUse",x:"388",y:"8",width:"70",height:"212",children:U.jsx("path",{d:"M388 8h70v212h-70V8z",fill:`url(#${i}-paint1)`})}),U.jsx("g",{mask:`url(#${i}-maskA)`,children:U.jsx("path",{d:"M388 10a2 2 0 012-2h44.145a2 2 0 011.399.571l21.855 21.404c.385.376.601.891.601 1.429V218a2 2 0 01-2 2h-66a2 2 0 01-2-2V10z",fill:`url(#${i}-paint2)`})}),U.jsx("mask",{id:`${i}-maskB`,style:{mask:"alpha"},maskUnits:"userSpaceOnUse",x:"-24",y:"8",width:"70",height:"212",children:U.jsx("path",{d:"M46 8h-70v212h70V8z",fill:`url(#${i}-paint3)`})}),U.jsx("g",{mask:`url(#${i}-maskB)`,children:U.jsx("path",{d:"M46 10a2 2 0 00-2-2H-.145a2 2 0 00-1.399.571l-21.855 21.404A2 2 0 00-24 31.404V218a2 2 0 002 2h66a2 2 0 002-2V10z",fill:`url(#${i}-paint4)`})}),U.jsx("path",{d:"M452 266V33l-20-20H0l-20 20v233",stroke:`url(#${i}-paint5)`}),U.jsx("path",{d:"M457 266V30.5L434 8H-3l-22.5 22v236",stroke:`url(#${i}-paint6)`,strokeWidth:"2"}),U.jsx("path",{d:"M461.001 65.874a.665.665 0 00-.282-.544l-4.334-3.059a.665.665 0 00-.768 0l-4.328 3.06a.667.667 0 00-.281.543v75.244c0 .216.105.418.281.543l4.328 3.066c.23.164.538.164.769.001l4.334-3.067a.666.666 0 00.281-.543V65.874z",fill:`url(#${i}-paint7)`}),U.jsx("path",{d:"M455.616 63.27a.666.666 0 01.768 0l3.668 2.59a.665.665 0 01.282.545v74.181c0 .217-.105.42-.282.544l-3.668 2.591a.668.668 0 01-.768 0l-3.668-2.591a.663.663 0 01-.282-.544V66.405c0-.217.105-.42.282-.544l3.668-2.59zm.768-.999a.666.666 0 00-.768 0l-4.334 3.06a.665.665 0 00-.282.543v75.243c0 .216.105.419.282.544l4.334 3.059c.23.163.538.163.768 0l4.334-3.059a.666.666 0 00.282-.544V65.874a.665.665 0 00-.282-.544l-4.334-3.059z",fill:`url(#${i}-paint8)`}),U.jsx("path",{d:"M456.385 62.271a.665.665 0 00-.768 0l-4.328 3.06a.667.667 0 00-.281.543v8.214c0 .54.609.855 1.05.543l3.559-2.515a.665.665 0 01.768 0l3.566 2.516a.666.666 0 001.05-.544v-8.214a.665.665 0 00-.282-.544l-4.334-3.059z",fill:`url(#${i}-paint9)`}),U.jsx("path",{d:"M456.385 134.875a.664.664 0 01-.768 0l-3.559-2.516a.666.666 0 00-1.05.544v8.214c0 .216.105.419.281.544l4.328 3.066c.23.163.538.163.769 0l4.334-3.067a.665.665 0 00.281-.543v-8.215a.666.666 0 00-1.05-.544l-3.566 2.517z",fill:`url(#${i}-paint10)`}),U.jsx("path",{d:"M456 75.683v55.766",stroke:`url(#${i}-paint11)`,strokeWidth:".679",strokeMiterlimit:"10"}),U.jsx("path",{d:"M455.616 63.27a.666.666 0 01.768 0l3.668 2.59a.665.665 0 01.282.545v6.215c0 .54-.609.855-1.05.544l-2.971-2.098a.542.542 0 00-.626 0l-2.971 2.098a.666.666 0 01-1.05-.544v-6.215c0-.217.105-.42.282-.544l3.668-2.59zm.768-.999a.666.666 0 00-.768 0l-4.334 3.06a.665.665 0 00-.282.543v8.215c0 .54.609.855 1.05.543l3.566-2.517a.666.666 0 01.768 0l3.566 2.517a.666.666 0 001.05-.544v-8.214a.665.665 0 00-.282-.544l-4.334-3.059z",fill:`url(#${i}-paint12)`}),U.jsx("path",{d:"M459.284 133.836a.666.666 0 011.05.544v6.216a.666.666 0 01-.282.544l-3.668 2.59a.668.668 0 01-.768 0l-3.668-2.59a.666.666 0 01-.282-.544v-6.216c0-.54.609-.855 1.05-.544l2.971 2.098a.54.54 0 00.626 0l2.971-2.098zm1.716-.924a.666.666 0 00-1.05-.544l-3.566 2.517a.664.664 0 01-.768 0l-3.566-2.517a.666.666 0 00-1.05.544v8.214c0 .217.105.419.282.544l4.334 3.059c.23.163.538.163.768 0l4.334-3.059a.665.665 0 00.282-.544v-8.214z",fill:`url(#${i}-paint13)`}),U.jsx("path",{d:"M455.614 76.504a.666.666 0 01.769 0l2.011 1.422a.667.667 0 01.281.543v50.063a.665.665 0 01-.281.543l-2.011 1.422a.666.666 0 01-.769 0l-2.011-1.422a.665.665 0 01-.281-.543V78.469c0-.216.105-.418.281-.543l2.011-1.422zm.769-1a.667.667 0 00-.769 0l-2.676 1.891a.665.665 0 00-.282.544v51.123c0 .217.105.419.282.544l2.676 1.891a.666.666 0 00.769 0l2.676-1.891a.665.665 0 00.282-.544V77.939a.665.665 0 00-.282-.544l-2.676-1.891z",fill:`url(#${i}-paint14)`}),U.jsxs("defs",{children:[U.jsx("linearGradient",{id:`${i}-paint0`,x1:"200.918",y1:"187.151",x2:"200.918",y2:"8",gradientUnits:"userSpaceOnUse",children:x}),U.jsxs("linearGradient",{id:`${i}-paint1`,x1:"423",y1:"0",x2:"423",y2:"220",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{}),U.jsx("stop",{offset:".716"}),U.jsx("stop",{offset:".837",stopOpacity:"0"}),U.jsx("stop",{offset:"1",stopOpacity:"0"})]}),U.jsxs("linearGradient",{id:`${i}-paint2`,x1:"388",y1:"95.168",x2:"457.199",y2:"95.168",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopOpacity:"0"}),U.jsx("stop",{offset:"1",stopOpacity:".4"})]}),U.jsxs("linearGradient",{id:`${i}-paint3`,x1:"11",y1:"0",x2:"11",y2:"220",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{}),U.jsx("stop",{offset:".716"}),U.jsx("stop",{offset:".837",stopOpacity:"0"}),U.jsx("stop",{offset:"1",stopOpacity:"0"})]}),U.jsxs("linearGradient",{id:`${i}-paint4`,x1:"46",y1:"95.168",x2:"-23.199",y2:"95.168",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopOpacity:"0"}),U.jsx("stop",{offset:"1",stopOpacity:".4"})]}),U.jsxs("linearGradient",{id:`${i}-paint5`,x1:"401.926",y1:"10.577",x2:"401.926",y2:"224.803",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#BD955D"}),U.jsx("stop",{offset:".258",stopColor:"#966F40"}),U.jsx("stop",{offset:".43",stopColor:"#C99B61"}),U.jsx("stop",{offset:".771",stopColor:"#2A1F11",stopOpacity:"0"})]}),U.jsxs("linearGradient",{id:`${i}-paint6`,x1:"405.812",y1:"5.529",x2:"405.812",y2:"223.989",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#BD955D"}),U.jsx("stop",{offset:".258",stopColor:"#966F40"}),U.jsx("stop",{offset:".43",stopColor:"#C99B61"}),U.jsx("stop",{offset:".771",stopColor:"#2A1F11",stopOpacity:"0"})]}),U.jsx("radialGradient",{id:`${i}-paint7`,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(22.370 0 0 29.718 456.001 96.5)",children:G}),U.jsx("linearGradient",{id:`${i}-paint8`,x1:"451.007",y1:"103.5",x2:"461",y2:"103.5",gradientUnits:"userSpaceOnUse",children:Y}),U.jsx("radialGradient",{id:`${i}-paint9`,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(-9.995 625.92 -2571.534) scale(5.300 6.949)",children:k}),U.jsx("radialGradient",{id:`${i}-paint10`,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(4.886 1.039 -1.355 6.374 456.134 137.269)",children:k}),U.jsx("linearGradient",{id:`${i}-paint11`,x1:"456",y1:"103.566",x2:"457",y2:"103.566",gradientUnits:"userSpaceOnUse",children:Y}),U.jsx("linearGradient",{id:`${i}-paint12`,x1:"451.007",y1:"68.687",x2:"461",y2:"68.687",gradientUnits:"userSpaceOnUse",children:Y}),U.jsx("linearGradient",{id:`${i}-paint13`,x1:"451.007",y1:"138.305",x2:"461",y2:"138.305",gradientUnits:"userSpaceOnUse",children:Y}),U.jsx("linearGradient",{id:`${i}-paint14`,x1:"452.656",y1:"103.501",x2:"459.347",y2:"103.501",gradientUnits:"userSpaceOnUse",children:Y}),U.jsxs("linearGradient",{id:`${i}-paint15`,x1:"200.918",y1:"187.151",x2:"200.918",y2:"8",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopOpacity:"0"}),U.jsx("stop",{offset:"0.245779",stopColor:"#000000",stopOpacity:"0.5"}),U.jsx("stop",{offset:"1",stopColor:"#000000",stopOpacity:"0.5"})]})]})]})};var Y=M(617401);const c="background--4b343",D={[Y._.MobilePortrait]:W=>{const{bonus:y,className:M}=W,i=n.useMemo((()=>`${String(Math.random())}-bonus-bet-spot-portrait-background-${y}`),[y]),x=g(y),k=u(y),G=e(y),Y=l();return U.jsxs("svg",{id:i,className:M,width:"100%",height:"100%",viewBox:"0 0 233 172",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("path",{d:"M220.198 6.137a1.285 1.285 0 00-1.014-.495H13.332l-10.86 14.36V141.145h228.529V20.001L220.198 6.137z",fill:`url(#${i}-paint23)`}),U.jsx("path",{d:"M220.198 6.137a1.285 1.285 0 00-1.014-.495H13.332l-10.86 14.36V141.145h228.529V20.001L220.198 6.137z",fill:`url(#${i}-paint0)`}),U.jsx("mask",{id:`${i}-maskA`,style:{mask:"alpha"},maskUnits:"userSpaceOnUse",x:"185",y:"5",width:"46",height:"137",children:U.jsx("path",{d:"M185.969 5.645H231v136.14h-45.031V5.645z",fill:`url(#${i}-paint1)`})}),U.jsx("g",{mask:`url(#${i}-maskA)`,children:U.jsx("path",{d:"M185.969 6.931c0-.71.576-1.286 1.286-1.286h32.279c.406 0 .788.191 1.03.516l10.18 13.63c.166.223.256.493.256.77v119.937c0 .711-.576 1.287-1.287 1.287h-42.458c-.71 0-1.286-.576-1.286-1.287V6.931z",fill:`url(#${i}-paint2)`})}),U.jsx("mask",{id:`${i}-maskB`,style:{mask:"alpha"},maskUnits:"userSpaceOnUse",x:"2",y:"5",width:"46",height:"137",children:U.jsx("path",{d:"M48 5.643H2.97v136.14H48V5.643z",fill:`url(#${i}-paint3)`})}),U.jsx("g",{mask:`url(#${i}-maskB)`,children:U.jsx("path",{d:"M48 6.93c0-.711-.576-1.287-1.287-1.287H14.435c-.406 0-.788.191-1.03.516L3.224 19.79a1.287 1.287 0 00-.256.77v119.937c0 .711.576 1.287 1.287 1.287h42.457c.711 0 1.287-.576 1.287-1.287V6.929z",fill:`url(#${i}-paint4)`})}),U.jsx("path",{d:"M228.169 171.331V21.698l-9.444-12.844H14.75L5.307 21.698V171.33",stroke:`url(#${i}-paint5)`,strokeWidth:".643"}),U.jsx("path",{d:"M230.529 171.33V20.091l-10.86-14.45H13.333L2.709 19.77v151.56",stroke:`url(#${i}-paint6)`,strokeWidth:"1.287"}),U.jsx("path",{d:"M232.931 42.81c0-.14-.068-.27-.182-.35l-2.788-1.965a.429.429 0 00-.494 0l-2.784 1.965a.43.43 0 00-.181.35v48.32c0 .14.067.27.181.35l2.784 1.97a.428.428 0 00.494 0l2.788-1.97a.428.428 0 00.182-.35V42.81z",fill:`url(#${i}-paint7)`}),U.jsx("path",{d:"M229.466 41.137a.427.427 0 01.493 0l2.36 1.663c.114.08.182.211.182.35v47.64c0 .138-.068.269-.182.35l-2.36 1.663a.427.427 0 01-.493 0l-2.36-1.664a.428.428 0 01-.182-.35V43.151c0-.14.068-.27.182-.35l2.36-1.664zm.493-.642a.428.428 0 00-.493 0l-2.788 1.965a.428.428 0 00-.182.35v48.32c0 .14.068.27.182.35l2.788 1.965a.427.427 0 00.493 0l2.788-1.965a.428.428 0 00.182-.35V42.81c0-.14-.068-.27-.182-.35l-2.788-1.965z",fill:`url(#${i}-paint8)`}),U.jsx("path",{d:"M229.961 40.495a.429.429 0 00-.494 0l-2.784 1.965a.43.43 0 00-.181.35v5.273c0 .348.391.55.675.35l2.29-1.616a.429.429 0 01.494 0l2.295 1.617c.283.2.675-.003.675-.35V42.81c0-.14-.068-.27-.182-.35l-2.788-1.965z",fill:`url(#${i}-paint9)`}),U.jsx("path",{d:"M229.961 87.122a.429.429 0 01-.494 0l-2.29-1.616a.428.428 0 00-.675.35v5.274c0 .139.067.27.181.35l2.784 1.969a.428.428 0 00.494 0l2.788-1.97a.428.428 0 00.182-.35v-5.274a.428.428 0 00-.675-.35l-2.295 1.617z",fill:`url(#${i}-paint10)`}),U.jsx("path",{d:"M229.713 49.108v35.814",stroke:`url(#${i}-paint11)`,strokeWidth:".437",strokeMiterlimit:"10"}),U.jsx("path",{d:"M229.466 41.137a.427.427 0 01.493 0l2.36 1.663c.114.08.182.211.182.35v3.99c0 .348-.392.551-.675.351l-1.912-1.347a.35.35 0 00-.403 0l-1.912 1.347a.428.428 0 01-.675-.35v-3.99c0-.14.068-.27.182-.35l2.36-1.664zm.493-.642a.428.428 0 00-.493 0l-2.788 1.965a.428.428 0 00-.182.35v5.274c0 .347.391.55.675.35l2.295-1.617a.428.428 0 01.493 0l2.295 1.617c.284.2.675-.003.675-.35V42.81c0-.14-.068-.27-.182-.35l-2.788-1.965z",fill:`url(#${i}-paint12)`}),U.jsx("path",{d:"M231.826 86.454c.283-.2.675.003.675.35v3.99c0 .14-.068.27-.182.35l-2.36 1.664a.427.427 0 01-.493 0l-2.36-1.664a.428.428 0 01-.182-.35v-3.99c0-.347.392-.55.675-.35l1.912 1.347a.35.35 0 00.403 0l1.912-1.347zm1.103-.593a.428.428 0 00-.675-.35l-2.295 1.617a.427.427 0 01-.493 0l-2.295-1.617a.428.428 0 00-.675.35v5.274c0 .14.068.27.182.35l2.788 1.965a.428.428 0 00.493 0l2.788-1.965a.429.429 0 00.182-.35v-5.274z",fill:`url(#${i}-paint13)`}),U.jsx("path",{d:"M229.466 49.636a.428.428 0 01.494 0l1.293.913c.114.08.181.21.181.35v32.149c0 .139-.067.27-.181.35l-1.293.913a.428.428 0 01-.494 0l-1.294-.913a.427.427 0 01-.181-.35v-32.15c0-.139.067-.269.181-.35l1.294-.912zm.493-.643a.427.427 0 00-.493 0l-1.722 1.215a.428.428 0 00-.182.35v32.83c0 .14.068.27.182.35l1.722 1.215a.427.427 0 00.493 0l1.722-1.215a.428.428 0 00.182-.35v-32.83c0-.14-.068-.27-.182-.35l-1.722-1.215z",fill:`url(#${i}-paint14)`}),U.jsx("path",{d:"M7.15 42.81c0-.14-.068-.27-.182-.35L4.18 40.495a.428.428 0 00-.494 0L.902 42.46a.428.428 0 00-.181.35v48.32c0 .14.067.27.18.35l2.785 1.97a.428.428 0 00.494 0l2.788-1.97a.428.428 0 00.181-.35V42.81z",fill:`url(#${i}-paint15)`}),U.jsx("path",{d:"M3.685 41.137a.428.428 0 01.493 0l2.36 1.663c.114.08.182.211.182.35v47.64c0 .138-.068.269-.182.35l-2.36 1.663a.428.428 0 01-.493 0l-2.36-1.664a.428.428 0 01-.182-.35V43.151c0-.14.068-.27.182-.35l2.36-1.664zm.493-.642a.428.428 0 00-.493 0L.896 42.46a.428.428 0 00-.181.35v48.32c0 .14.068.27.181.35l2.789 1.965a.428.428 0 00.493 0l2.788-1.965a.428.428 0 00.182-.35V42.81c0-.14-.068-.27-.182-.35l-2.788-1.965z",fill:`url(#${i}-paint16)`}),U.jsx("path",{d:"M4.18 40.495a.428.428 0 00-.494 0L.902 42.46a.428.428 0 00-.181.35v5.273c0 .348.391.55.675.35l2.29-1.616a.428.428 0 01.494 0l2.294 1.617c.284.2.675-.003.675-.35V42.81c0-.14-.067-.27-.181-.35L4.18 40.495z",fill:`url(#${i}-paint17)`}),U.jsx("path",{d:"M4.18 87.122a.428.428 0 01-.494 0l-2.29-1.616a.428.428 0 00-.675.35v5.274c0 .139.067.27.18.35l2.785 1.969a.428.428 0 00.494 0l2.788-1.97a.428.428 0 00.181-.35v-5.274a.428.428 0 00-.675-.35L4.18 87.122z",fill:`url(#${i}-paint18)`}),U.jsx("path",{d:"M3.932 49.108v35.814",stroke:`url(#${i}-paint19)`,strokeWidth:".437",strokeMiterlimit:"10"}),U.jsx("path",{d:"M3.685 41.137a.428.428 0 01.493 0l2.36 1.663c.114.08.182.211.182.35v3.99c0 .348-.392.551-.676.351l-1.911-1.347a.349.349 0 00-.403 0L1.818 47.49a.428.428 0 01-.675-.35v-3.99c0-.14.068-.27.182-.35l2.36-1.664zm.493-.642a.428.428 0 00-.493 0L.896 42.46a.428.428 0 00-.181.35v5.274c0 .347.391.55.675.35l2.295-1.617a.428.428 0 01.493 0l2.295 1.617c.284.2.675-.003.675-.35V42.81c0-.14-.068-.27-.182-.35l-2.788-1.965z",fill:`url(#${i}-paint20)`}),U.jsx("path",{d:"M6.044 86.454c.284-.2.676.003.676.35v3.99c0 .14-.068.27-.182.35l-2.36 1.664a.428.428 0 01-.493 0l-2.36-1.664a.428.428 0 01-.182-.35v-3.99c0-.347.391-.55.675-.35L3.73 87.8a.35.35 0 00.403 0l1.911-1.347zm1.104-.593a.428.428 0 00-.675-.35l-2.295 1.617a.428.428 0 01-.493 0L1.39 85.51a.428.428 0 00-.675.35v5.274c0 .14.068.27.181.35l2.789 1.965a.428.428 0 00.493 0l2.788-1.965a.429.429 0 00.182-.35v-5.274z",fill:`url(#${i}-paint21)`}),U.jsx("path",{d:"M3.684 49.636a.428.428 0 01.494 0l1.294.913c.113.08.181.21.181.35v32.149c0 .139-.068.27-.181.35l-1.294.913a.428.428 0 01-.494 0l-1.293-.913a.428.428 0 01-.181-.35v-32.15c0-.139.067-.269.18-.35l1.294-.912zm.494-.643a.428.428 0 00-.494 0l-1.721 1.215a.428.428 0 00-.182.35v32.83c0 .14.068.27.182.35l1.721 1.215a.428.428 0 00.494 0L5.9 83.738a.428.428 0 00.181-.35v-32.83c0-.14-.067-.27-.181-.35l-1.722-1.215z",fill:`url(#${i}-paint22)`}),U.jsxs("defs",{children:[U.jsx("linearGradient",{id:`${i}-paint0`,x1:"109.615",y1:"120.693",x2:"109.615",y2:"5.642",gradientUnits:"userSpaceOnUse",children:x}),U.jsxs("linearGradient",{id:`${i}-paint1`,x1:"208.484",y1:".507",x2:"208.484",y2:"141.785",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{}),U.jsx("stop",{offset:".716"}),U.jsx("stop",{offset:".837",stopOpacity:"0"}),U.jsx("stop",{offset:"1",stopOpacity:"0"})]}),U.jsxs("linearGradient",{id:`${i}-paint2`,x1:"185.969",y1:"61.621",x2:"230.484",y2:"61.621",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopOpacity:"0"}),U.jsx("stop",{offset:"1",stopOpacity:".4"})]}),U.jsxs("linearGradient",{id:`${i}-paint3`,x1:"25.485",y1:".505",x2:"25.485",y2:"141.783",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{}),U.jsx("stop",{offset:".716"}),U.jsx("stop",{offset:".837",stopOpacity:"0"}),U.jsx("stop",{offset:"1",stopOpacity:"0"})]}),U.jsxs("linearGradient",{id:`${i}-paint4`,x1:"48",y1:"61.619",x2:"3.484",y2:"61.619",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopOpacity:"0"}),U.jsx("stop",{offset:"1",stopOpacity:".4"})]}),U.jsxs("linearGradient",{id:`${i}-paint5`,x1:"204.525",y1:"7.297",x2:"204.525",y2:"144.874",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#BD955D"}),U.jsx("stop",{offset:".258",stopColor:"#966F40"}),U.jsx("stop",{offset:".43",stopColor:"#C99B61"}),U.jsx("stop",{offset:".771",stopColor:"#2A1F11",stopOpacity:"0"})]}),U.jsxs("linearGradient",{id:`${i}-paint6`,x1:"206.36",y1:"4.055",x2:"206.36",y2:"144.35",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#BD955D"}),U.jsx("stop",{offset:".258",stopColor:"#966F40"}),U.jsx("stop",{offset:".43",stopColor:"#C99B61"}),U.jsx("stop",{offset:".771",stopColor:"#2A1F11",stopOpacity:"0"})]}),U.jsx("radialGradient",{id:`${i}-paint7`,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(14.390 0 0 19.085 229.714 66.973)",children:G}),U.jsx("linearGradient",{id:`${i}-paint8`,x1:"226.5",y1:"66.973",x2:"232.929",y2:"66.973",gradientUnits:"userSpaceOnUse",children:Y}),U.jsx("radialGradient",{id:`${i}-paint9`,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(3.357 -.590 .773 4.395 229.586 45.206)",children:k}),U.jsx("radialGradient",{id:`${i}-paint10`,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(3.143 .667 -.869 4.094 229.8 88.659)",children:k}),U.jsx("linearGradient",{id:`${i}-paint11`,x1:"229.713",y1:"67.0151",x2:"230.713",y2:"67.0151",gradientUnits:"userSpaceOnUse",children:Y}),U.jsx("linearGradient",{id:`${i}-paint12`,x1:"226.5",y1:"44.615",x2:"232.929",y2:"44.615",gradientUnits:"userSpaceOnUse",children:Y}),U.jsx("linearGradient",{id:`${i}-paint13`,x1:"226.5",y1:"89.324",x2:"232.929",y2:"89.324",gradientUnits:"userSpaceOnUse",children:Y}),U.jsx("linearGradient",{id:`${i}-paint14`,x1:"227.562",y1:"66.973",x2:"231.867",y2:"66.973",gradientUnits:"userSpaceOnUse",children:Y}),U.jsx("radialGradient",{id:`${i}-paint15`,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(14.390 0 0 19.085 3.933 66.973)",children:G}),U.jsx("linearGradient",{id:`${i}-paint16`,x1:".719",y1:"66.973",x2:"7.148",y2:"66.973",gradientUnits:"userSpaceOnUse",children:Y}),U.jsx("radialGradient",{id:`${i}-paint17`,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(3.357 -.590 .773 4.395 3.805 45.206)",children:k}),U.jsx("radialGradient",{id:`${i}-paint18`,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(3.143 .667 -.869 4.094 4.019 88.659)",children:k}),U.jsx("linearGradient",{id:`${i}-paint19`,x1:"3.932",y1:"67.015",x2:"4.932",y2:"67.015",gradientUnits:"userSpaceOnUse",children:Y}),U.jsx("linearGradient",{id:`${i}-paint20`,x1:".719",y1:"44.615",x2:"7.148",y2:"44.615",gradientUnits:"userSpaceOnUse",children:Y}),U.jsx("linearGradient",{id:`${i}-paint21`,x1:".719",y1:"89.324",x2:"7.148",y2:"89.324",gradientUnits:"userSpaceOnUse",children:Y}),U.jsx("linearGradient",{id:`${i}-paint22`,x1:"1.781",y1:"66.973",x2:"6.086",y2:"66.973",gradientUnits:"userSpaceOnUse",children:Y}),U.jsxs("linearGradient",{id:`${i}-paint23`,x1:"109.615",y1:"120.693",x2:"109.615",y2:"5.642",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopOpacity:"0"}),U.jsx("stop",{offset:"0.245779",stopOpacity:"0.5"}),U.jsx("stop",{offset:"1",stopOpacity:"0.3"})]})]})]})},[Y._.Desktop]:G,[Y._.Tablet]:W=>{const{bonus:y,className:M}=W,i=n.useMemo((()=>`${String(Math.random())}-bonus-bet-spot-tablet-background-${y}`),[y]),x=g(y),k=u(y),G=e(y),Y=l();return U.jsxs("svg",{id:i,className:M,width:"100%",height:"100%",viewBox:"0 0 263 154",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsxs("g",{clipPath:`url(#${i}-clip0)`,children:[U.jsx("path",{d:"M247.848 5.04674C247.604 4.7888 247.266 4.64258 246.911 4.64258H135.711H-2.29263L-15.4287 19.0022V46.5784V77.6545V125.781V140.147H135.711H261V125.781V77.6545V46.5784V19.0022L247.848 5.04674Z",fill:`url(#${i}-paint11)`}),U.jsx("path",{d:"M247.848 5.04674C247.604 4.7888 247.266 4.64258 246.911 4.64258H135.711H-2.29263L-15.4287 19.0022V46.5784V77.6545V125.781V140.147H135.711H261V125.781V77.6545V46.5784V19.0022L247.848 5.04674Z",fill:`url(#${i}-paint0)`}),U.jsx("mask",{id:`${i}-maskA`,style:{mask:"alpha"},maskUnits:"userSpaceOnUse",x:"215",y:"4",width:"46",height:"137",children:U.jsx("path",{d:"M215.969 4.64258H261V140.783H215.969V4.64258Z",fill:"url(#paint1_linear_9983_191539)"})}),U.jsx("g",{mask:`url(#${i}-maskA)`,children:U.jsx("path",{d:"M215.969 5.92917C215.969 5.2186 216.545 4.64258 217.255 4.64258H245.654C245.99 4.64258 246.313 4.77416 246.554 5.00917L260.612 18.7534C260.86 18.9954 261 19.3271 261 19.6734V38.5831V64.3809V128.857V139.496C261 140.207 260.424 140.783 259.713 140.783H217.255C216.545 140.783 215.969 140.207 215.969 139.496V5.92917Z",fill:`url(#${i}-paint2)`})}),U.jsx("mask",{id:`${i}-maskB`,style:{mask:"alpha"},maskUnits:"userSpaceOnUse",x:"-15",y:"4",width:"46",height:"137",children:U.jsx("path",{d:"M30.9604 4.64453H-14.0705V140.785H30.9604V4.64453Z",fill:`url(#${i}-paint3)`})}),U.jsx("g",{mask:`url(#${i}-maskB)`,children:U.jsx("path",{d:"M30.9604 5.93112C30.9604 5.22056 30.3844 4.64453 29.6739 4.64453H1.27505C0.938868 4.64453 0.616038 4.77612 0.375645 5.01113L-13.6833 18.7553C-13.9309 18.9974 -14.0705 19.329 -14.0705 19.6753V38.5851V64.3829V128.859V139.498C-14.0705 140.209 -13.4945 140.785 -12.7839 140.785H29.6738C30.3844 140.785 30.9604 140.209 30.9604 139.498V5.93112Z",fill:`url(#${i}-paint4)`})}),U.jsx("path",{d:"M257.573 170.331V20.6976L246.151 7.85352H-0.579271L-12.002 20.6976V170.331",stroke:`url(#${i}-paint5)`,strokeWidth:"0.643299"}),U.jsx("path",{d:"M260.429 170.331V19.0921L247.293 4.64258H-2.29304L-15.1436 18.771V170.331",stroke:`url(#${i}-paint6)`,strokeWidth:"1.2866"}),U.jsx("path",{d:"M262.93 40.5257C262.93 40.3864 262.862 40.2558 262.749 40.1755L259.961 38.2111C259.813 38.1068 259.615 38.1068 259.467 38.2112L256.683 40.1755C256.569 40.2558 256.501 40.3863 256.501 40.5255V88.8461C256.501 88.9851 256.569 89.1155 256.682 89.1958L259.467 91.165C259.615 91.2698 259.813 91.2699 259.961 91.1652L262.749 89.1958C262.863 89.1155 262.93 88.9851 262.93 88.846V40.5257Z",fill:`url(#${i}-paint7)`}),U.jsx("path",{d:"M259.961 38.2111C259.813 38.1068 259.615 38.1068 259.467 38.2112L256.683 40.1755C256.569 40.2558 256.501 40.3863 256.501 40.5255V45.7992C256.501 46.1464 256.893 46.3493 257.177 46.1491L259.467 44.5332C259.615 44.4288 259.813 44.4288 259.961 44.5331L262.255 46.1499C262.539 46.3498 262.93 46.1469 262.93 45.7998V40.5257C262.93 40.3864 262.862 40.2558 262.749 40.1755L259.961 38.2111Z",fill:`url(#${i}-paint8)`}),U.jsx("path",{d:"M259.961 84.8385C259.813 84.9428 259.615 84.9428 259.467 84.8384L257.177 83.2225C256.893 83.0223 256.501 83.2252 256.501 83.5725V88.8465C256.501 88.9855 256.569 89.1159 256.682 89.1961L259.467 91.1654C259.615 91.2702 259.813 91.2702 259.961 91.1655L262.749 89.1961C262.863 89.1159 262.93 88.9854 262.93 88.8463V83.5718C262.93 83.2247 262.539 83.0218 262.255 83.2217L259.961 84.8385Z",fill:`url(#${i}-paint9)`}),U.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M259.466 38.8543C259.614 38.7497 259.812 38.7497 259.96 38.8543L262.32 40.5205C262.434 40.6008 262.501 40.7313 262.501 40.8704V44.8688C262.501 45.2161 262.11 45.4189 261.826 45.2186L259.914 43.869C259.794 43.7837 259.632 43.7837 259.512 43.869L257.6 45.2186C257.317 45.4189 256.925 45.2161 256.925 44.8688V40.8704C256.925 40.7313 256.992 40.6008 257.106 40.5205L259.466 38.8543ZM256.497 45.8134V40.5291C256.497 40.3899 256.564 40.2594 256.678 40.1792L259.466 38.2112C259.614 38.1067 259.812 38.1067 259.96 38.2112L262.748 40.1792C262.862 40.2594 262.93 40.3899 262.93 40.5291V45.8134V83.6544V88.9328V88.9387C262.93 89.0779 262.862 89.2084 262.748 89.2886L259.96 91.2566C259.812 91.3611 259.614 91.3611 259.466 91.2566L256.678 89.2886C256.564 89.2084 256.497 89.0779 256.497 88.9387V88.9328V83.6544V45.8134ZM262.501 46.2425V83.2253C262.418 83.225 262.332 83.2496 262.254 83.3044L259.96 84.9238C259.812 85.0283 259.614 85.0283 259.466 84.9238L257.172 83.3044C257.094 83.2496 257.008 83.225 256.925 83.2253V46.2425C257.008 46.2428 257.094 46.2182 257.172 46.1633L259.466 44.544C259.614 44.4395 259.812 44.4395 259.96 44.544L262.254 46.1633C262.332 46.2182 262.418 46.2428 262.501 46.2425ZM256.925 88.5915V84.599C256.925 84.2517 257.317 84.0488 257.6 84.2492L259.512 85.5988C259.632 85.6841 259.794 85.6841 259.914 85.5988L261.826 84.2492C262.11 84.0488 262.501 84.2517 262.501 84.599V88.5914C262.501 88.7306 262.434 88.8611 262.32 88.9413L259.96 90.6076C259.812 90.7122 259.614 90.7122 259.466 90.6076L257.106 88.9413C256.992 88.8611 256.925 88.7306 256.925 88.5915ZM259.932 47.349C259.941 47.3546 259.95 47.3607 259.959 47.3671L261.253 48.2819C261.366 48.3621 261.434 48.4925 261.434 48.6316V80.8367C261.434 80.9757 261.366 81.1061 261.253 81.1864L259.959 82.1011C259.95 82.1076 259.941 82.1136 259.932 82.1193V47.349ZM259.495 47.3478V82.1204C259.484 82.1144 259.475 82.108 259.465 82.1011L258.171 81.1864C258.058 81.1061 257.99 80.9757 257.99 80.8367V48.6316C257.99 48.4925 258.058 48.3621 258.171 48.2819L259.465 47.3671C259.475 47.3602 259.484 47.3538 259.495 47.3478ZM259.465 46.7239C259.613 46.6192 259.811 46.6192 259.959 46.7239L261.681 47.9405C261.795 48.0207 261.862 48.1512 261.862 48.2903V81.178C261.862 81.3171 261.795 81.4475 261.681 81.5278L259.959 82.7443C259.811 82.849 259.613 82.849 259.465 82.7443L257.743 81.5278C257.63 81.4475 257.562 81.3171 257.562 81.178V48.2903C257.562 48.1512 257.63 48.0207 257.743 47.9405L259.465 46.7239Z",fill:`url(#${i}-paint10)`})]}),U.jsxs("defs",{children:[U.jsxs("linearGradient",{id:`${i}-paint2`,x1:"215.969",y1:"60.6193",x2:"260.484",y2:"60.6193",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopOpacity:"0"}),U.jsx("stop",{offset:"1",stopOpacity:"0.4"})]}),U.jsxs("linearGradient",{id:`${i}-paint3`,x1:"8.44498",y1:"-0.492835",x2:"8.44498",y2:"140.785",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{}),U.jsx("stop",{offset:"0.715937"}),U.jsx("stop",{offset:"0.837081",stopOpacity:"0"}),U.jsx("stop",{offset:"1",stopOpacity:"0"})]}),U.jsxs("linearGradient",{id:`${i}-paint4`,x1:"30.9604",y1:"60.6213",x2:"-13.5553",y2:"60.6213",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopOpacity:"0"}),U.jsx("stop",{offset:"1",stopOpacity:"0.4"})]}),U.jsx("linearGradient",{id:`${i}-paint0`,x1:"114.172",y1:"119.694",x2:"114.172",y2:"4.64258",gradientUnits:"userSpaceOnUse",children:x}),U.jsxs("linearGradient",{id:`${i}-paint5`,x1:"228.975",y1:"6.29722",x2:"228.975",y2:"143.874",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#BD955D"}),U.jsx("stop",{offset:"0.258184",stopColor:"#966F40"}),U.jsx("stop",{offset:"0.43",stopColor:"#C99B61"}),U.jsx("stop",{offset:"0.771443",stopColor:"#2A1F11",stopOpacity:"0"})]}),U.jsxs("linearGradient",{id:`${i}-paint6`,x1:"231.194",y1:"3.05553",x2:"231.194",y2:"143.351",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#BD955D"}),U.jsx("stop",{offset:"0.258184",stopColor:"#966F40"}),U.jsx("stop",{offset:"0.43",stopColor:"#C99B61"}),U.jsx("stop",{offset:"0.771443",stopColor:"#2A1F11",stopOpacity:"0"})]}),U.jsx("radialGradient",{id:`${i}-paint7`,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(259.712 65.0096) rotate(90) scale(26.3303 100.759)",children:G}),U.jsx("radialGradient",{id:`${i}-paint8`,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(259.585 42.922) rotate(-9.97788) scale(3.40932 4.46296)",children:k}),U.jsx("radialGradient",{id:`${i}-paint9`,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(259.585 87.6343) rotate(-9.98435) scale(3.40938 4.46583)",children:k}),U.jsx("linearGradient",{id:`${i}-paint10`,x1:"256.496",y1:"64.7339",x2:"262.929",y2:"64.7339",gradientUnits:"userSpaceOnUse",children:Y}),U.jsxs("linearGradient",{id:`${i}-paint11`,x1:"114.172",y1:"119.694",x2:"114.172",y2:"4.64258",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopOpacity:"0"}),U.jsx("stop",{offset:"0.245779",stopOpacity:"0.5"}),U.jsx("stop",{offset:"1",stopOpacity:"0.5"})]}),U.jsx("clipPath",{id:`${i}-clip0`,children:U.jsx("rect",{width:"263",height:"154",fill:"white"})})]})]})},[Y._.DesktopClassic]:G,[Y._.MobileLandscape]:G},r=n.memo(n.forwardRef(((W,y)=>{const{layout:M}=W,i=D[M];return U.jsx("div",{ref:y,className:c,children:U.jsx(i,{...W})})})));var A=M(650276);const T="bonus-bet-spot",O="bonus-multiplier",h="wheel-multiplier";var S=M(276111),o=M(234341),d=M(769413),q=M(315049);const s=.2,N=.533,_=1.05,p=1.1,b=1.2;var m=M(253796),z=M(341360),K=M(803903),P=M(163828);const R=.35,I=10,E=0,Z=.2,f=.533,V=.867,$=1.2,a=1.4,H=1.5,B=1.534,v=1.6,L=1.8;function X(W){const{lightSweepContainerRef:y,lightSweepRef:M}=W,U=new z.a(y);return M.x=-50,M.y=25,U.rotation=45,d.M(M).animateTo({x:100,opacity:1},H-E,S.ME)}const w=10;function F(W){return d.M(W.multiplierContainerRef).animateTo({x:5},Z,S.ME).animateTo({x:-100-w,opacity:0},f-Z,S.ME)}function t(W){const{chipRef:y,chipGlowRef:M,chipOuterGlowRef:U,chipContainerRef:i,chipAndMultiplierContainerRef:x,setChipAmountCallback:n,payout:k}=W,g=d.M(y).delay(Z-E).animateTo({scale:1.7},V-Z,S.ME).callback((()=>n(k))).animateTo({scale:.9},$-V,S.ME).animateTo({scale:1},a-$,S.ME).animateTo({scale:.95},v-a,S.ME).animateTo({scale:1},L-v,S.ME),u=d.M(M).delay(Z-E).animateTo({lightness:.7},V-Z,S.ME).delay($-V).animateTo({lightness:0},B-$,S.ME),e=d.M(i).delay(Z-E).animateTo({x:-50},V-Z,S.ME),l=d.M(x).delay(Z-E).animateTo({x:0},V-Z,S.ME),G=d.M(U).delay(Z-E).animateTo({opacity:1},V-Z,S.ME).animateTo({opacity:0},$-V,S.ME);return o.M().parallel([g,e,u,G,l])}var J=M(217368),j=M(228174);const C=76,Q=2,WW=n.memo((W=>{const{className:y,multiplier:M}=W,i=n.useMemo((()=>`${Math.random()}-bonus-multiplier-background$`),[]),x="#140601",[g,u]=n.useState(168),e=.5*Q,l=n.useMemo((()=>M.split("").length),[M]),G=n.useMemo((()=>[Math.min(7+l,15),Math.min(9+l,11)]),[l]);return n.useEffect((()=>{u(M.split("").map((W=>{var y;return j.GB((null!==(y=k.lightningStormMultiplierSymbolRatios[W])&&void 0!==y?y:0)*C,2)})).reduce(((W,y)=>W+y),0))}),[M]),U.jsxs("svg",{className:y,id:i,width:"100%",height:"100%",viewBox:`0 0 ${g+Q} ${C}`,preserveAspectRatio:"none",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("polygon",{points:`\n                    ${e} ${e},\n                    ${g-G[0]} ${e},\n                    ${g-e} ${G[1]},\n                    ${g-e} ${C-G[1]},\n                    ${g-G[0]} ${C-e},\n                    ${e} ${C-e}`,fill:`url(#${i}-paint0)`,fillOpacity:"0.4",stroke:`url(#${i}-paint1)`,strokeWidth:Q}),U.jsxs("defs",{children:[U.jsxs("linearGradient",{id:`${i}-paint0`,x1:g,y1:"37.9999",x2:`${.03*g}`,y2:"37.9999",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:x}),U.jsx("stop",{offset:"0.957608",stopColor:x,stopOpacity:"0.6"}),U.jsx("stop",{offset:"1",stopColor:x,stopOpacity:"0"})]}),U.jsxs("linearGradient",{id:`${i}-paint1`,x1:g,y1:"39.9912",x2:`${.072*g}`,y2:"39.9912",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#BD955D"}),U.jsx("stop",{offset:"0.192708",stopColor:"#966F40"}),U.jsx("stop",{offset:"0.590956",stopColor:"#C99B61"}),U.jsx("stop",{offset:"0.983546",stopColor:"#7E613B",stopOpacity:"0.6"}),U.jsx("stop",{offset:"1",stopColor:"#182A11",stopOpacity:"0"})]})]})]})})),yW=n.memo((W=>{const{bonus:y,className:M}=W,i=n.useMemo((()=>`${String(Math.random())}-bonus-bet-spot-top-wheel-${y}`),[y]),x=function(W){switch(W){case k.LightningStormBonusGame.BatteryCharger:return"#0E3207";case k.LightningStormBonusGame.HotSpot:return"#310839";case k.LightningStormBonusGame.StormBonus:return"#3A0808";case k.LightningStormBonusGame.MonsterMash:return"#092A38";case k.LightningStormBonusGame.Fireball:return"#401707"}}(y);return U.jsxs("svg",{id:i,className:M,width:"100%",height:"100%",viewBox:"0 0 128 71",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("mask",{id:`${i}-maskA`,style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"25",y:"0",width:"79",height:"71",children:U.jsx("path",{fill:`url(#${i}-paint0)`,d:"M25 0h78.714v70.641H25z"})}),U.jsxs("g",{mask:`url(#${i}-maskA)`,children:[U.jsx("g",{filter:`url(#${i}-filter0)`,children:U.jsx("path",{d:"M97.34 9.564L63.983 123.446 30.992 9.439c22.157-6.292 44.274-6.25 66.349.125z",fill:x})}),U.jsx("g",{filter:`url(#${i}-filter1)`,children:U.jsx("path",{d:"M98.204 9.817a.9.9 0 00-.613-1.118c-22.238-6.422-44.526-6.464-66.845-.125a.9.9 0 00-.618 1.116l32.99 114.006a.901.901 0 001.727.003L98.206 9.817z",stroke:`url(#${i}-paint1)`,strokeWidth:"1.8",strokeLinejoin:"round"})})]}),U.jsxs("defs",{children:[U.jsxs("linearGradient",{id:`${i}-paint0`,x1:"64.357",y1:"0",x2:"64.357",y2:"70.641",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#D9D9D9"}),U.jsx("stop",{offset:".68",stopColor:"#737373"}),U.jsx("stop",{offset:".865",stopColor:"#737373",stopOpacity:"0"})]}),U.jsxs("linearGradient",{id:`${i}-paint1`,x1:"30.974",y1:"57.416",x2:"97.341",y2:"57.416",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#BD955D"}),U.jsx("stop",{offset:".247",stopColor:"#966F40"}),U.jsx("stop",{offset:".501",stopColor:"#F0BD7A"}),U.jsx("stop",{offset:".785",stopColor:"#C0935B"}),U.jsx("stop",{offset:"1",stopColor:"#966F40"})]}),U.jsxs("linearGradient",{id:`${i}-paint2`,x1:"64.541",y1:"21.027",x2:"64.541",y2:"42.027",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#FFF4A8"}),U.jsx("stop",{offset:"1",stopColor:"#B79F4F"})]}),U.jsxs("filter",{id:`${i}-filter0`,x:"-1.33957",y:"1.81828",width:"128",height:"71",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[U.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),U.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),U.jsx("feOffset",{dy:"4.39906"}),U.jsx("feGaussianBlur",{stdDeviation:"3.66588"}),U.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),U.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"}),U.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_9_1101"}),U.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_9_1101",result:"shape"})]}),U.jsxs("filter",{id:`${i}-filter1`,x:"-3.13938",y:"0.0184717",width:"128",height:"71",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[U.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),U.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),U.jsx("feOffset",{dy:"4.39906"}),U.jsx("feGaussianBlur",{stdDeviation:"3.66588"}),U.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),U.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"}),U.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_9_1101"}),U.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_9_1101",result:"shape"})]})]})]})}));var MW=M(738759),UW=M(604929),iW=M(722950),xW=M(890023),nW=M(294116),kW=M(894962),gW=M(61106);const uW=JSON.parse('{"systemSize":{"width":1219,"height":1450},"fps":60,"fixedDt":false,"randomSeed":"","blendMode":"default","controllerConfigs":{"CANVAS_PARTICLES":{"autoStart":false,"loop":false,"explosiveness":true,"amount":150,"emissionDelay":0,"particlesPerWave":150,"particle":{"colors":{"gradient":false,"mode":"Random","colors":["#67D411","#02AEE4","#C92EFF","#E40097"]},"damping":0.015,"gravityVector":[0,2000],"directionVector":[-2.0816681711721685e-17,2.0816681711721685e-17],"spread":180,"angularVelocity":{"min":3.2608695652173916,"max":11.304347826086955,"curve":[]},"initialRotation":{"min":0,"max":6.283185307179586},"opacity":{"min":0.29347826086956524,"max":1,"curve":[{"point":[0,1],"easing":"linear"},{"point":[0.69,0.98],"easing":"linear"},{"point":[0.78,0.82],"easing":"linear"},{"point":[0.82,0.94],"easing":"linear"},{"point":[0.88,0.82],"easing":"linear"},{"point":[0.93,0.89],"easing":"linear"},{"point":[1,0.82],"easing":"linear"}]},"lifetime":{"min":1,"max":2},"scale":{"min":1.19,"max":2.27,"curve":[{"point":[0,1],"easing":"linear"},{"point":[0.3,0.7],"easing":"linear"},{"point":[1,0],"easing":"linear"}]},"initialVelocity":{"min":521.8217391304348,"max":2641.316304347826},"linearAcceleration":{"min":-300,"max":174,"curve":[{"point":[0,2],"easing":"linear"},{"point":[1,1],"easing":"linear"}]},"tangentialAcceleration":{"min":0,"max":60,"curve":[]},"radialAcceleration":{"min":0,"max":283,"curve":[]}},"emitter":{"position":[0.5,0.5],"type":"ellipse","width":70,"height":0}}},"graphicsConfig":{"CANVAS_PARTICLES":{"textureId":"b46fd53b-544f-4147-be10-67e409751357","fps":60,"randomFrameStart":false,"frames":[]}},"controllerIdToConfigId":{"CANVAS_PARTICLES":"CANVAS_PARTICLES"},"controllers":{"CANVAS_PARTICLES":{"plugins":{}}}}'),eW="data:image/webp;base64,UklGRvADAABXRUJQVlA4WAoAAAAQAAAAMQAAMQAAQUxQSK8BAAABGTVtG7C482sj+h/rDTm2bS1vc+4nJgfMrQcQapPpp8UBpDVKMgh++r4b1Po/la4iJmACiOedYhDbHzFATMwAsX0QExOIAQKTRPYBAkhgAgOQAALJJRZABAFE7J9BJjFAEARdPT1dHYgatVojkkAkhwkg0jEwMjIyFEi0VdgqlESQ10SkY2hi6qWZiaGktvHgwaMN+TsHAusYGHnh0JFjApmyO7fmHnWICHKKBcHQzGvnBvD3uQ9K1+a6EgCQ1sREukZmTozgvx9t3OoCBIK2JQmArpGZQ9jxjbnADDnFEHT0TU3scmHFogQirRkEEgR92HmqVmsA1hrE0GKp0gCkPROYNWoTO62sVBKDtQcDarW1lQs7/DT1pBAhp5hZtPVo7q0dfjj0pBCZZQCQNAqP7qx88p/Pxo6sVBLkNIFFhSdz1wofnANw6YuBM4c2GmY5YEBU2Xowd+uOzdiT4MiRQy8UIuRPKqW1pVt3rs0tPNqoJSbILCYwqxTWVh48erJRaCQQAJLln5ZElUqhVGlECcxkHwxIEkuSKDGDCWDILgYzgxkACPZTDGIwAIbntQBWUDggGgIAAPANAJ0BKjIAMgA+kUCdSiWjoqGmFVsQsBIJaADTmcC1J3nruNk18ADbAeYD9M/1m4QD+3f4DrJfQA/SX0sP23+Df9lfS1TwHuheVrrlFKTILfTJ/tBUu0Ww8Ivcm4fzCArmWQu0WQylTpQctrWhN/P4cbrKcWZZAAD+9fd//2mP/+0hf//ZwGT9fne5btgo5l+KFHqXMfhaprdhtHwqfXIblrHCHYfuasYRnC8CrE2ij/5JjSaD232Mf/FX/QI1PTh+q/zpxPvzcJQWtkqcvBq4FOWbZ/IsKIFC4I57gmvY38mHtxf+5o8/7U3lDGdanEoK7IAaYP5m/T5+UQkmnMst1G1nsC6u90K546jekFNQdl/37Gi6zsMfObmvthunpPytYjnNMCHeqTCNNZkgu8mwhfJsZ1LMullZmgNWASaKCcBw4zfORb14AvhFFzqk2fj1gCZIq05q2Z43MGHwr9ZhVCFEpqLN6QuwJLaCUWX6KPsBqfd7dF02YymCFCrtoB+85KSptcm51fAZ+6u4BJ+7Q/j/g2jf+HusR++NHYCf/89wn15xc0ig2dhBBBinThUZvHsP57hFxT5pwVwYafhmy07g68gWsxjdWY9FBZap/DoVfAELDwXQXnhVJdtRLaY+TuR3265FLjbeC9HHJaW/0ubytXceDY+Hx4bMl00uFQFeNqpxUWvhNd+6LGHR1IRIMJwAcoPwAAA=",lW="xxxtremeLogoParticles--780ac",GW="CANVAS_PARTICLES",YW=n.memo((({setParticlesSystem:W})=>{const[y,M]=n.useState(null),i=n.useMemo((()=>MW.mZ()),[]),[x,k,g]=xW.K(void 0),[u,e]=n.useState(void 0);n.useEffect((()=>{UW.y(eW).then((W=>{e(W)}))}),[]),n.useEffect((()=>{if(!y)return;if(!nW.y(uW)){if(1)return;throw new Error("xxxtremeLogoParticles >> invalid particle json")}const M=gW.f.spawnSystem({canvas:y,config:uW,dpr:i,systemScale:1,autoStart:!1});return k(M),W(M),()=>{M.pause(),M.reset(),M.dispose(),k(void 0),W(void 0)}}),[i,y,W,k]),n.useEffect((()=>{if(!x||!u)return;const W=x.getController(GW);W&&W.graphics.setTextureAndFrames(u)}),[x,u]);const l=n.useCallback(((W,y)=>{if(g.current){const M=kW.ok.calcScaleBySizes(g.current.systemSize,{width:W,height:y});g.current.updateSystemScale(M)}}),[g]);return U.jsx(iW.IB,{className:lW,ref:M,onResize:l,dpr:i})}));var cW=M(542031),DW=M(128546),rW=M(924009),AW=M(590257),TW=M(980733),OW=M(521353),hW=M(719630),SW=M(619608),oW=M(835132);const dW="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgODYgODYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBvcGFjaXR5PSIuNCIgY3g9IjQyLjUiIGN5PSI0My4yNSIgcj0iNDIuNSIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik00MyA4MUMyMi4wNTIgODEgNSA2My45NDggNSA0M1MyMi4wNTIgNSA0MyA1czM4IDE3LjA1MiAzOCAzOC0xNy4wNTIgMzgtMzggMzh6bTAtNzMuMjg0QzIzLjUzOCA3LjcxNiA3LjcxNiAyMy41MzggNy43MTYgNDNTMjMuNTM4IDc4LjI4NCA0MyA3OC4yODQgNzguMjg0IDYyLjQ2MiA3OC4yODQgNDMgNjIuNDYyIDcuNzE2IDQzIDcuNzE2eiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzEyNDkzXzEwOTg1NCkiLz48Y2lyY2xlIGN4PSI0MyIgY3k9IjQzIiByPSI0MS44IiBzdHJva2U9InVybCgjcGFpbnQxX2xpbmVhcl8xMjQ5M18xMDk4NTQpIiBzdHJva2Utd2lkdGg9IjEuNiIvPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl8xMjQ5M18xMDk4NTQiIHgxPSIxNi4xNDgiIHkxPSI2OS44NjIiIHgyPSI2OS44NjIiIHkyPSIxNi4xMzgiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjOTE2QTMxIi8+PHN0b3Agb2Zmc2V0PSIuMjYiIHN0b3AtY29sb3I9IiNGQ0Q4NjciLz48c3RvcCBvZmZzZXQ9Ii42MiIgc3RvcC1jb2xvcj0iIzkxNkEzMSIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0ZDRDg2OCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJwYWludDFfbGluZWFyXzEyNDkzXzEwOTg1NCIgeDE9IjE0LjAyMSIgeTE9IjE0LjAzMSIgeDI9IjcxLjk3OCIgeTI9IjcxLjk4OCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiM5MTZBMzEiLz48c3RvcCBvZmZzZXQ9Ii4zNSIgc3RvcC1jb2xvcj0iI0ZDRDg5QSIvPjxzdG9wIG9mZnNldD0iLjY1IiBzdG9wLWNvbG9yPSIjOTE2QTMxIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkNEODlBIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PC9zdmc+",qW=M.p+"images/xxxtreme.50585423.webp",sW="bonusBetSpot--ce07d",NW="background--ce7af",_W="wheelSectorWrapper--43173",pW="wheelSector--9cfb3",bW="iconWrapper--d29a2",mW="xxxtremeMode--2ce27",zW="xxxtremeLogoWrapper--127cf",KW="xxxtremeLogoGlow--72dea",PW="xxxtremeLogo--5bd1d",RW="icon--24ca1",IW="wheelMultiplierWrapper--5e05b",EW="wheelMultiplier--646dc",ZW="wheelMultiplierGlow--198cf",fW="chipAndMultiplierWrapper--0bbda",VW="chipContainer--10364",$W="chipPlacement--b07e7",aW="chip--bddaa",HW="chipGlowWrapper--ef8ac",BW="chipOuterGlow--540b9",vW="chipLightSweepContainer--7881a",LW="chipLightSweep--6616b",XW="bonusMultiplierMask--81377",wW="bonusMultiplierContainer--88e2f",FW="bonusMultiplierBackground--ab3f7",tW="bonusMultiplierText--75868",JW="betCode--aca34",jW="sideLightningSpriteWrapper--d84da",CW="sideLightningSprite--31e10",QW="topLightningSprite--fc848",Wy="xxxtremeLightningSprite--1ca9d",yy="xxxtremeLightningBallSprite--930cf",My="xxxxtremeParticlesWrapper--5f913",Uy=M.p+"images/lightningh.86f9efef.webp",iy=M.p+"images/lightningv.a58697cb.webp",xy=M.p+"images/xxxtremeli.09e94af5.webp",ny=M.p+"images/xxxtrememu.4c39129e.webp",ky={[k.LightningStormBonusGame.BatteryCharger]:"batteryCharger--8859d",[k.LightningStormBonusGame.Fireball]:"fireball--ccd28",[k.LightningStormBonusGame.HotSpot]:"hotSpot--46ba4",[k.LightningStormBonusGame.MonsterMash]:void 0,[k.LightningStormBonusGame.StormBonus]:"storm--012a3"},gy={[Y._.Tablet]:"tablet--7cc75",[Y._.MobilePortrait]:"portrait--71d2a"},uy=W=>{const{betCode:y,bonus:M,chipAmount:x,setChipReference:g,chipState:u,isParticipating:e,setReference:l,wheelMultiplier:G,formattedBonusMultiplier:Y,showBonusMultiplier:c,showWheelMultiplier:D,flyingWheelMultiplier:E,flyingMultiplierRefs:Z,flyingWheelMultiplierDestinationRect:f,gameDimensions:V,onFlyWheelMultiplierEnd:$,layout:a,isBonusTransitionDone:H,isXXXtremeMode:B,logCornerCardUpdated:v,playSound:L,payout:w}=W,j=n.useRef(y);j.current=y;const[C,Q]=SW.K({forceHardwareAcceleration:!1,translateUnits:"%"},{opacity:0}),[MW,UW]=SW.K({forceHardwareAcceleration:!1}),[iW,xW]=SW.K({forceHardwareAcceleration:!1},void 0,((W,y)=>new hW.c(W,y))),[nW,kW]=SW.K({translateUnits:"%"},{x:-50,y:-50,opacity:0}),[gW,uW]=SW.K({translateOrigin:K.t.Center,translateUnits:"%"},{opacity:0}),[eW,lW]=n.useState(null),[GW,rW]=SW.K({forceHardwareAcceleration:!1},void 0,((W,y)=>new hW.c(W,y))),[TW,OW]=SW.K({translateUnits:"%"},{opacity:0}),[uy,ey]=SW.K({translateUnits:"%",forceHardwareAcceleration:!1},{x:-50}),[ly,Gy]=SW.K({forceHardwareAcceleration:!1},{opacity:e?A.lN:A.Lz,scale:e?1:A.YO}),[Yy,cy]=SW.K({forceHardwareAcceleration:!1,translateUnits:"%",transformOrigin:"center bottom"},{x:-50,y:-55},((W,y)=>new hW.c(W,y))),[Dy,ry]=SW.K({translateUnits:"%"},{x:-50,y:-50,opacity:0}),[Ay,Ty]=SW.K({forceHardwareAcceleration:!1}),[Oy,hy]=SW.K({translateUnits:"%",forceHardwareAcceleration:!1},{x:-50}),[Sy,oy]=SW.K({forceHardwareAcceleration:!1}),[dy,qy]=n.useState(null),[sy,Ny]=n.useState(null),[_y,py]=SW.K({translateUnits:"%"});_y&&(_y.opacity=e?1:0);const[by,my]=SW.K({translateUnits:"%"},{x:-100}),[zy,Ky]=SW.K({translateUnits:"%"},{x:-50}),[Py,Ry]=SW.K({translateOrigin:K.t.Center,transformOrigin:"center bottom"}),[Iy,Ey]=n.useState(null),[Zy,fy]=n.useState(null),[Vy,$y]=n.useState(void 0),ay=n.useRef(x),[Hy,By]=n.useState(x>0?x:ay.current);x>0&&(ay.current=x);const vy=x>0&&e,Ly=B&&!H;return n.useEffect((()=>{e&&c&&v()}),[e,v,c]),n.useEffect((()=>{g(AW.Ip.Bonus,y,null==gW?void 0:gW.element)}),[y,gW,g]),n.useEffect((()=>{l(C&&MW&&iW&&Ay&&ly&&Oy&&Sy&&gW&&eW&&uy?{container:C,bonusMultiplier:MW,wheelMultiplier:iW,wheelMultiplierGlow:nW,background:Ay,logo:ly,betCodeSymbol:Oy,chipPlaceholder:Sy,lightningTop:dy,lightningSide:sy,topPart:uy,chip:gW,chipLightsweepContainer:eW,xxxtremeLogo:Yy,xxxtremeLogoGlow:Dy,xxxtremeLightning:Iy,xxxtremeLightningBall:Zy,xxxtremeParticles:Vy}:void 0)}),[uy,C,MW,iW,Ay,l,ly,Oy,Sy,gW,dy,sy,Yy,Iy,Zy,nW,Vy,Dy,eW]),n.useEffect((()=>()=>{l(void 0),g(AW.Ip.Bonus,j.current,null)}),[g,l]),function(W){const{bonusLogoRef:y,containerRef:M,xxxtremeLogoRef:U,isBonusTransitionDone:i,isParticipating:x}=W;n.useEffect((()=>{i&&M&&y&&(M.opacity=1,y.opacity=x?A.lN:A.Lz,y.scale=x?1:A.YO,U&&(U.opacity=y.opacity,U.scale=y.scale))}),[i,M,y,x,U])}({isBonusTransitionDone:H,containerRef:C,isParticipating:e,bonusLogoRef:ly,xxxtremeLogoRef:Yy}),function(W){const{showBonusMultiplier:y,bonusMultiplierContainerRef:M,chipContainerRef:U,chipAndMultiplierContainerRef:i}=W,x=n.useRef(y);n.useEffect((()=>{if(M&&U&&i)if(y){if(!x.current){x.current=!0,M.x=-100-I,M.opacity=1,U.x=-50,i.x=0;const W=o.M().parallel([d.M(M).animateTo({x:I},R,S.dV).animateTo({x:0},R,S.dV),d.M(U).animateTo({x:-I},R,S.dV).animateTo({x:0},R,S.dV),d.M(i).animateTo({x:-50},R,S.dV)]),y=q.l({anim:W});return()=>{W.fastForward(),y()}}M.x=0,U.x=0,i.x=-50}else x.current=!1,M.x=-100-I,U.x=-50,i.x=0}),[y,M,U,i])}({showBonusMultiplier:c,bonusMultiplierContainerRef:by,chipContainerRef:zy,chipAndMultiplierContainerRef:_y}),function(W){const{isBonusTransitionDone:y,wheelMultiplierRef:M,showWheelMultiplier:U}=W;n.useEffect((()=>{y&&M&&(M.opacity=U?1:0)}),[y,U,M])}({isBonusTransitionDone:H,wheelMultiplierRef:iW,showWheelMultiplier:D}),function(W){const{isBonusTransitionDone:y,chipRef:M,showChip:U}=W;n.useEffect((()=>{if(y&&M){const W=d.M(M).callback((()=>{U&&M.setStyle({visibility:"visible"})})).animateTo({opacity:U?1:0},.1).callback((()=>{U||M.setStyle({visibility:"hidden"})})),y=q.l({anim:W});return()=>{W.fastForward(),y()}}}),[y,U,M])}({isBonusTransitionDone:H,chipRef:gW,showChip:vy}),function(W){const{endPosition:y,gameDimensions:M,wheelMultiplier:U,flyingMultiplier:i,flyingMultiplierRefs:x,onFlyWheelMultiplierEnd:k,playSound:g}=W,u=n.useRef(y);u.current=y;const e=n.useRef(M);e.current=M,n.useEffect((()=>{if(!U||!i||!x)return;const W=x.blurred,y=x.main,M=P.G(U.element,e.current),n=P.G(y,e.current),l=new z.a(y,{translateOrigin:K.t.Center}),G=new z.a(W);G.opacity=0,G.scale=1.2,l.x=M.left+.5*M.width,l.y=M.top+.5*M.height;const Y=M.height/n.height,c=2*Y;l.scale=Y,l.opacity=1;const D=o.M().callback((()=>{g({event:m.PZ.WheelMultiplierFly})})).parallel([d.M(l).delay(_).animateTo({opacity:0},b-_,S.Do),d.M(l).delay(s).animateTo({x:u.current.x,y:u.current.y,scale:c},b-s,S.Do),d.M({contrast:0,brightness:0}).animateTo({contrast:1,brightness:.7},s,S.AU).animateTo({brightness:.8},p-s,S.AU).onUpdate((W=>{y.style.filter=`brightness(${.3*W.brightness+1}) contrast(${.3*W.contrast+1})`})),d.M(G).animateTo({opacity:.5},s,S.p_).animateTo({opacity:.3},N-s).animateTo({opacity:1},p-N,S.AU)]).callback(k),r=q.l({anim:D});return()=>{D.fastForward(),r()}}),[x,i,U,k,g])}({flyingMultiplier:E,flyingMultiplierRefs:Z,gameDimensions:V,wheelMultiplier:iW,endPosition:f,onFlyWheelMultiplierEnd:$,playSound:L}),function(W){const{bonusMultiplierContainerRef:y,chipRef:M,chipPlaceholderRef:U,lightSweepContainerRef:i,chipContainerRef:x,lightSweepRef:k,chipGlowRef:g,chipOuterGlowRef:u,chipAndMultiplierContainerRef:e,topLightningRef:l,payout:G,setChipAmountCallback:Y}=W;n.useEffect((()=>{if(!(y&&e&&M&&x&&U&&i&&k&&g&&u&&l&&G))return;const W=o.M().parallel([t({chipPlaceholderRef:U,chipRef:M,chipContainerRef:x,chipGlowRef:g,chipOuterGlowRef:u,chipAndMultiplierContainerRef:e,payout:G,setChipAmountCallback:Y}),F({multiplierContainerRef:y}),X({lightSweepContainerRef:i,lightSweepRef:k}),J.z({element:l,delay:1})]),n=q.l({anim:W});return()=>{W.fastForward(),n()}}),[y,M,U,G,e,x,g,u,i,k,Y,l])}({chipPlaceholderRef:Sy,chipRef:gW,chipContainerRef:zy,bonusMultiplierContainerRef:by,lightSweepContainerRef:eW,setChipAmountCallback:By,lightSweepRef:Py,chipGlowRef:GW,chipOuterGlowRef:TW,chipAndMultiplierContainerRef:_y,topLightningRef:dy,payout:w}),U.jsxs("div",{ref:Q,className:i.A(sW,gy[a]),"data-role":T,children:[e&&U.jsxs(U.Fragment,{children:[U.jsx(DW.d,{setRef:qy,src:iy,spriteClass:i.A(QW,ky[M])}),U.jsx("div",{className:i.A(jW,ky[M]),children:U.jsx(DW.d,{setRef:Ny,src:Uy,spriteClass:CW})})]}),U.jsx(r,{ref:Ty,className:NW,bonus:M,layout:a}),Ly&&U.jsx(DW.d,{setRef:Ey,src:xy,spriteClass:Wy}),U.jsx("div",{ref:ey,className:_W,children:U.jsx(yW,{className:pW,bonus:M})}),U.jsxs("div",{className:i.A(bW,{[mW]:B}),children:[U.jsx(k.LightningStormBonusGameImage,{ref:Gy,className:RW,bonus:M,catalog:A.L6}),Ly&&U.jsx("div",{className:My,children:U.jsx(YW,{setParticlesSystem:$y})}),B&&U.jsxs("div",{ref:cy,className:zW,children:[Ly&&U.jsx("div",{className:KW,ref:ry,children:U.jsx(oW.w,{className:PW,src:qW})}),U.jsx(oW.w,{className:PW,src:qW})]})]}),U.jsx(k.LightningStormGradientStrokeText,{ref:hy,className:JW,children:y}),U.jsxs("div",{className:IW,children:[Ly&&U.jsx(DW.d,{setRef:fy,src:ny,spriteClass:yy}),U.jsx("div",{ref:xW,className:EW,"data-role":h,"data-value":`${G}x`,children:G>0&&U.jsxs(U.Fragment,{children:[Ly&&U.jsx("div",{className:ZW,ref:kW,children:U.jsx(k.LightningStormMultiplier,{value:`${G}x`})}),U.jsx(k.LightningStormMultiplier,{value:`${G}x`})]})})]}),U.jsxs("div",{ref:py,className:fW,children:[U.jsx("div",{className:i.A(XW,gy[a]),children:U.jsxs("div",{ref:my,className:i.A(wW,gy[a]),"data-role":O,"data-value":Y,children:[c&&U.jsx(WW,{className:FW,multiplier:Y}),U.jsx("div",{ref:UW,className:i.A(tW,gy[a]),children:c&&U.jsx(k.LightningStormMultiplier,{value:Y})})]})}),U.jsxs("div",{ref:Ky,className:VW,children:[U.jsx(oW.w,{ref:oy,className:i.A($W,gy[a]),src:dW,alt:"ring"}),U.jsx("div",{className:BW,ref:OW}),U.jsx("div",{className:HW,ref:rW,children:U.jsxs("div",{className:i.A(aW,gy[a]),ref:uW,children:[U.jsx(cW.v,{state:u,amount:Hy}),U.jsx("div",{className:vW,ref:lW,children:U.jsx("div",{ref:Ry,className:LW})})]})})]})]})]})},ey=x.PA((W=>{const y=TW.g(),M=n.useRef(W.bonus);M.current=W.bonus;const i=n.useRef(W.bonusMultiplier);i.current=W.bonusMultiplier;const x=n.useCallback((()=>{y.bonus.clearFlyingWheelMultiplier()}),[y]),g=n.useCallback((()=>{const W="number"==typeof i.current?i.current:i.current.value;y.log.log(rW.Gl({multiplier:W,bonusType:M.current}))}),[y]),u={...W,formattedBonusMultiplier:(e=W.bonusMultiplier,"number"==typeof e?`${e}x`:e.type===k.LightningStormBonusMultiplierType.Special?`x${e.value}`:`${e.value}x`),chipAmount:y.ui.betSpot.getChipAmount(W.betCode),setChipReference:y.references.setBetSpotChipReference,chipState:y.ui.betSpot.getChipState(W.betCode),setReference:y.references.setBonusBetSpotReferences,isParticipating:y.bonus.isParticipating,flyingMultiplierRefs:y.references.bonusFlyingWheelMultiplier,flyingWheelMultiplier:y.bonus.flyingWheelMultiplier,flyingWheelMultiplierDestinationRect:y.videoElementRects.rects[OW.V.WheelMultiplierEnd],gameDimensions:y.abstractGame.values.gameDimensions,wheelMultiplier:y.ui.bonusBetSpot.wheelMultiplier,onFlyWheelMultiplierEnd:x,layout:y.device.componentLayout,isBonusTransitionDone:y.bonusGameTransition.isTransitionDone,logCornerCardUpdated:g,isXXXtremeMode:y.bonus.isXXXtremeMode,playSound:y.sound.playSound,payout:y.result.chipWinAmount};var e;return U.jsx(uy,{...u})}));function ly(W){return"number"==typeof W?W>0:W.type===k.LightningStormBonusMultiplierType.Regular&&W.value>0}const Gy=W=>{const{betCode:y,showWheelMultiplier:M,bonusMultiplier:i}=W;return U.jsx(ey,{betCode:y,bonus:k.LightningStormBonusGame.BatteryCharger,bonusMultiplier:i,showBonusMultiplier:ly(i),showWheelMultiplier:M})},Yy=x.PA((W=>{const y=TW.g(),M={...W,showWheelMultiplier:y.ui.batteryChargerBonusBetSpot.showWheelMultiplier,bonusMultiplier:y.batteryCharger.bonusMultiplier};return U.jsx(Gy,{...M})})),cy=W=>{const{betCode:y,showWheelMultiplier:M,bonusMultiplier:i}=W;return U.jsx(ey,{betCode:y,bonus:k.LightningStormBonusGame.Fireball,bonusMultiplier:i,showBonusMultiplier:ly(i),showWheelMultiplier:M})},Dy=x.PA((W=>{const y=TW.g(),M={...W,bonusMultiplier:y.fireball.multiplier,showWheelMultiplier:y.ui.fireballBonusBetSpot.showWheelMultiplier};return U.jsx(cy,{...M})})),ry=W=>{const{betCode:y,showWheelMultiplier:M,bonusMultiplier:i}=W;return U.jsx(ey,{betCode:y,bonus:k.LightningStormBonusGame.HotSpot,bonusMultiplier:i,showBonusMultiplier:ly(i),showWheelMultiplier:M})},Ay=x.PA((W=>{const y=TW.g(),M={...W,showWheelMultiplier:y.ui.hotSpotBonusBetSpot.showWheelMultiplier,bonusMultiplier:y.ui.hotSpotBonusBetSpot.bonusMultiplier};return U.jsx(ry,{...M})})),Ty=W=>{const{betCode:y,showWheelMultiplier:M,bonusMultiplier:i}=W;return U.jsx(ey,{betCode:y,bonus:k.LightningStormBonusGame.MonsterMash,bonusMultiplier:i,showBonusMultiplier:ly(i),showWheelMultiplier:M})},Oy=x.PA((W=>{const y=TW.g(),M={...W,showWheelMultiplier:y.ui.monsterMashBonusBetSpot.showWheelMultiplier,bonusMultiplier:y.monsterMash.multiplier};return U.jsx(Ty,{...M})})),hy=W=>{const{betCode:y,showWheelMultiplier:M,bonusMultiplier:i}=W;return U.jsx(ey,{betCode:y,bonus:k.LightningStormBonusGame.StormBonus,bonusMultiplier:i,showBonusMultiplier:ly(i),showWheelMultiplier:M})},Sy=x.PA((W=>{const y=TW.g(),M={...W,showWheelMultiplier:y.ui.stormBonusBetSpot.showWheelMultiplier,bonusMultiplier:y.stormBonus.multiplier};return U.jsx(hy,{...M})}));var oy=M(797238),dy=M(822381);const qy="bonusBetSpot--a0133",sy={[Y._.Tablet]:"tablet--77a98",[Y._.MobilePortrait]:"portrait--919b5"},Ny=W=>{const{bonus:y,outcome:M,visible:x,layout:n,size:g}=W,u=oy.R(x,800),e=function(W,y){if(!y)return null;switch(W){case k.LightningStormBonusGame.StormBonus:return U.jsx(Sy,{betCode:y});case k.LightningStormBonusGame.BatteryCharger:return U.jsx(Yy,{betCode:y});case k.LightningStormBonusGame.HotSpot:return U.jsx(Ay,{betCode:y});case k.LightningStormBonusGame.MonsterMash:return U.jsx(Oy,{betCode:y});case k.LightningStormBonusGame.Fireball:return U.jsx(Dy,{betCode:y});default:return null}}(y,M);return u?U.jsx("div",{className:i.A(qy,sy[n]),style:{"--bonusBetSpotSize":dy._m(g)},children:e}):null},_y=x.PA((()=>{const W=TW.g(),y={bonus:W.bonus.currentBonus,visible:W.ui.bonusBetSpot.isVisible,outcome:W.wheel.outcome,size:W.ui.bonusBetSpot.bonusBetSpotSize,layout:W.device.componentLayout};return U.jsx(Ny,{...y})}))},722950:(W,y,M)=>{M.d(y,{IB:()=>l});var U=M(64922),i=M(263601),x=M(525620),n=M(377810),k=M(738759),g=M(980733);const u=100,e=n.forwardRef(((W,y)=>{const{className:M,gameDimensions:x,onResize:g,dpr:e=k.mZ()}=W,[l,G]=n.useState();n.useImperativeHandle(y,(()=>l),[l]);const Y=n.useMemo((()=>i.A(((W,y)=>{const{reverseScale:M=1}=y,U=W.offsetWidth*M,i=W.offsetHeight*M;W.width=U*e,W.height=i*e,null==g||g(U,i)}),u)),[g,e]);return n.useLayoutEffect((()=>(l&&Y(l,x),()=>{Y.cancel()})),[x,l,Y]),U.jsx("canvas",{className:M,ref:G})})),l=x.PA(n.forwardRef(((W,y)=>{const M={...W,gameDimensions:g.g().abstractGame.values.gameDimensions};return U.jsx(e,{ref:y,...M})})))},784692:(W,y,M)=>{M.d(y,{l:()=>G});var U=M(64922),i=M(525620),x=M(377810),n=M(253613);const k="animatedChip--0235d",g="lightSweep--6afa4",u=W=>{const{chipData:y,setChipReference:M}=W,[i,u]=x.useState(null),[e,l]=x.useState(null),[G,Y]=x.useState(y.amount);return x.useEffect((()=>{e&&i&&M({sweep:e,chip:i,setAmount:Y},y.id)}),[e,i,y.id,M]),U.jsxs("div",{className:k,ref:u,children:[U.jsx(n.w,{value:G}),U.jsx("div",{className:g,ref:l})]})};var e=M(980733);const l=W=>{const{chips:y,setChipReference:M}=W,i=x.useMemo((()=>y.map((W=>U.jsx(u,{chipData:W,setChipReference:M},W.id)))),[y,M]);return U.jsx(U.Fragment,{children:i})},G=i.PA((()=>{const W=e.g(),y={chips:W.chaserDistribute.chaserChips,setChipReference:W.references.setChaserAnimatedChipsReference};return U.jsx(l,{...y})}))},134633:(W,y,M)=>{M.d(y,{u:()=>cW});var U=M(64922),i=M(525620),x=M(377810),n=M(693),k=M(234341),g=M(315049),u=M(276111),e=M(769413),l=M(625915),G=M(341360),Y=M(277082);const c={[Y.LightningStormBonusGame.BatteryCharger]:"inset 0px 0px 10px 2px rgba(100,241,0,0.7), 0px 0px 6px 1px rgba(100,241,0,0.8)",[Y.LightningStormBonusGame.MonsterMash]:"inset 0px 0px 10px 2px rgba(0,191,255,0.7), 0px 0px 6px 1px rgba(0,191,255,0.8)",[Y.LightningStormBonusGame.HotSpot]:"inset 0px 0px 10px 2px rgba(206,35,255,0.7), 0px 0px 6px 1px rgba(206,35,255,0.8)",[Y.LightningStormBonusGame.StormBonus]:"inset 0px 0px 10px 2px rgba(244,0,6,0.7), 0px 0px 6px 1px rgba(244,0,6,0.8)",[Y.LightningStormBonusGame.Fireball]:"inset 0px 0px 10px 2px rgba(239,116,3,0.7), 0px 0px 6px 1px rgba(239,116,3,0.8)"};class D extends G.a{constructor(){super(...arguments),this.currentFlash=0,this.currentShadow=!1,this.currentBonusGame=void 0}get bonusGame(){return this.currentBonusGame}set bonusGame(W){this.currentBonusGame!==W&&(this.currentBonusGame=W)}get flash(){return this.currentFlash}set flash(W){const y=Math.max(W,0);this.currentFlash!==y&&(this.currentFlash=y,this.apply())}get shadow(){return this.currentShadow}set shadow(W){this.currentShadow!==W&&(this.currentShadow=W,!0===W&&this.currentBonusGame?this.element.style.boxShadow=c[this.currentBonusGame]:this.element.style.boxShadow="")}willApply(W){super.willApply(W),this.flash>0?(W.style.mixBlendMode="lighten",W.style.filter=`brightness(${.9+this.flash})                saturate(${.7+this.flash})`):(W.style.filter="",W.style.mixBlendMode="")}}const r=.067,A=.133,T=.2,O=.467,h=.6,S=.633,o=.667,d=.9,q=1.067,s=1.233,N=1.4,_=1.567,p=.067;var b=M(908249);function m(W){const{betSpotBonusBackgroundRefs:y,bonus:M,betSpotNumberTextRefs:U}=W,i=null==y?void 0:y.multiplier,x=null==y?void 0:y.multiplierGradient,n=null==y?void 0:y.multiplierBorder,g=null==y?void 0:y.icon,l=null==y?void 0:y.wrapper,G=null==U?void 0:U.side;if(!(i&&x&&g&&l&&G))return k.M();const Y=new D(i);Y.scale=0,Y.flash=0,Y.opacity=0;const c=new D(x);c.opacity=0;const A=new D(g,{translateUnits:"%"});A.scale=1,A.x=-50,A.y=-50;const h=new D(l);h.bonusGame=M;const p=e.M(A).animateTo({scale:1.2},o,u.p_).animateTo({scale:1},d-o,u.AU),b=e.M(Y).delay(O).animateTo({scale:2,flash:.4,opacity:1},S-O,u.p_).animateTo({scale:.96,flash:0},d-S,u.AU).animateTo({scale:1.2},q-d,u.p_).animateTo({scale:.98},s-q,u.p_).animateTo({scale:1.12},N-s,u.p_).animateTo({scale:1},_-N,u.p_),m=e.M(c).delay(T-r).animateTo({opacity:1,flash:1},o,u.ME).animateTo({flash:0},d-o,u.AU),K=e.M(h).callback((()=>{h.shadow=!0})).animateTo({flash:1},o,u.p_).animateTo({flash:0},d-o,u.AU).callback((()=>{h.shadow=!1})),P=e.M(G).delay(T-r).animateTo({opacity:0},o,u.ME),R=[b,m,p,K,z(A),P];if(n){const W=new D(n);W.opacity=0;const y=e.M(W).delay(d-r).animateTo({opacity:1},_-d,u.ME);R.push(y)}return k.M().parallel(R)}function z(W){const y={valueX:0,valueY:0};let M=0;const U=h-A,i=_-S,x=l.B((U=>{M+=U,y.valueY+=.5,W.x+=b.e(y.valueX,50,M),W.y+=b.e(y.valueY,55,M)})),n=e.M(y).animateTo({valueX:1.5,valueY:5},U).delay(o-h).animateTo({valueX:1.5,valueY:5},i),g=k.M(),G=e.M(W).delay(U).animateTo({x:-50,y:-50},q-d,u.AU).callback((()=>{x.dispose()}));return g.delay(r).parallel([x,n,G]),g}var K=M(253796);function P(W){switch(W.level){case"Low":default:return K.PZ.LowXAdded;case"Medium":return K.PZ.MediumXAdded;case"High":return K.PZ.LargeXAdded}}const R=.667,I=.8,E=.933,Z=1.067,f=1.2,V=1.333,$=1.467,a=1.933,H=0,B=.333,v=.667,L=1,X=.75;var w=M(803903),F=M(855500),t=M(150702),J=M(164956);const j=JSON.parse('{"frames":{"frame_12":{"x":195,"y":204,"width":195,"height":68},"frame_13":{"x":195,"y":272,"width":195,"height":68},"frame_14":{"x":0,"y":136,"width":195,"height":68},"frame_15":{"x":195,"y":68,"width":195,"height":68},"frame_16":{"x":0,"y":68,"width":195,"height":68},"frame_17":{"x":0,"y":0,"width":195,"height":68},"frame_18":{"x":195,"y":476,"width":195,"height":68},"frame_19":{"x":0,"y":612,"width":195,"height":68},"frame_20":{"x":390,"y":272,"width":195,"height":68},"frame_21":{"x":195,"y":408,"width":195,"height":68},"frame_22":{"x":195,"y":340,"width":195,"height":68},"frame_23":{"x":390,"y":136,"width":195,"height":68},"frame_24":{"x":0,"y":544,"width":195,"height":68},"frame_25":{"x":390,"y":408,"width":195,"height":68},"frame_26":{"x":390,"y":612,"width":195,"height":68},"frame_27":{"x":390,"y":476,"width":195,"height":68},"frame_28":{"x":195,"y":0,"width":195,"height":68},"frame_29":{"x":0,"y":204,"width":195,"height":68},"frame_30":{"x":390,"y":340,"width":195,"height":68},"frame_31":{"x":195,"y":544,"width":195,"height":68},"frame_32":{"x":390,"y":544,"width":195,"height":68},"frame_33":{"x":195,"y":612,"width":195,"height":68},"frame_34":{"x":0,"y":476,"width":195,"height":68},"frame_35":{"x":390,"y":204,"width":195,"height":68},"frame_36":{"x":390,"y":68,"width":195,"height":68},"frame_37":{"x":0,"y":408,"width":195,"height":68},"frame_38":{"x":0,"y":272,"width":195,"height":68},"frame_39":{"x":195,"y":136,"width":195,"height":68},"frame_40":{"x":390,"y":0,"width":195,"height":68},"frame_41":{"x":0,"y":340,"width":195,"height":68}},"meta":{"size":{"height":680,"width":585}}}'),C=t.S(j);var Q=M(238618);const WW=.165,yW=.23,MW=.33,UW=.43,iW=.735,xW=1.07;function nW(W){const{from:y,to:M,chip:U,onReady:i,chipIndex:x,sweep:n,onChipLanded:g,stormBonusBetSpotBackgroundAnimated:l,delay:G,playSound:Y}=W,[c,D]=function(W,y){return[.5*(y.width-W.width),.5*(y.height-W.height)]}(y,M),r=k.M();l&&r.sequence(e.M(l).animateTo({opacity:1},yW,u.dV).animateTo({opacity:.6},MW-yW,u.dV).animateTo({opacity:1},UW-MW,u.dV).animateTo({opacity:.6},iW-UW,u.dV).animateTo({opacity:0},xW-iW,u.dV));const A=G+Q.ML+.15*x,T=e.M(U).callback(Y).animateTo({x:M.left+c,y:M.top+D},yW,u.dV).callback(g),O=e.M(U).animateTo({scale:1.8},WW,u.dV).animateTo({scale:1},yW-WW,u.dV).animateTo({scale:2.2},MW-yW,u.dV).animateTo({scale:1},UW-MW,u.dV),h=e.M(n).delay(UW).animateTo({x:50,y:50},iW-UW,u.dV);return k.M().delay(A).parallel([T,O,r,h]).callback(i)}var kW=M(109922),gW=M(73682),uW=M(163828);function eW(W){const{active:y,borderLightningRef:M,backgroundGradientRef:U,pendingBets:i,setAnimatedChipsData:n,onReady:l,chaserChipsRef:Y,gameDimensions:c,chaserAnimatedChipsData:D,getChipTargetReference:r,betSpotBackgroundRefs:A}=W,T=x.useRef(),O=x.useRef(c);O.current=c;const h=x.useRef(A);h.current=A,x.useEffect((()=>{y&&i&&n(i)}),[y,i,n]),x.useEffect((()=>{var W;if(!y||!M||!U)return gW.s1(T.current),void(T.current=void 0);if(!D.length||Object.keys(Y).length!==D.length)return;gW.s1(T.current);const i=k.M(),x=[],n=[];for(const y of D)if(Y[y.id]){const M=r(y.from),U=r(y.to);if(!M||!U)return void y.onDidFly();const i=uW.G(M,O.current),x=uW.G(U,O.current),k=new G.a(Y[y.id].chip);k.x=i.left,k.y=i.top,k.element.style.width=`${i.height}px`,k.element.style.height=`${i.height}px`,k.element.style.visibility="visible";const g=new G.a(Y[y.id].sweep,{translateUnits:"%"});g.y=-50,g.x=-50;let u=null;const e=null===(W=h.current[y.targetBetCode])||void 0===W?void 0:W.animatedBackground;e&&y.animationType===kW.tE.StormChaser&&(u=new G.a(e),u.opacity=0);const l=nW({chip:k,sweep:g,from:i,to:x,chipIndex:y.chipIndex,onChipLanded:()=>{Y[y.id].setAmount(y.totalAmount)},stormBonusBetSpotBackgroundAnimated:u,onReady:y.onDidFly,delay:X+(B-H),playSound:y.playSound});n.push(l)}x.push(function(W){const{ref:y}=W,M=new F.s(y,{translateOrigin:w.t.Center});M.opacity=0;const U=e.M(M).callback((()=>M.setStyle({visibility:"inherit"}))).animateTo({opacity:1},B-H).delay(v-B).animateTo({opacity:0},L-v).callback((()=>M.setStyle({visibility:"hidden"}))),i=J.Gn({frames:C,element:M,duration:L-H,automaticallyShow:!1,automaticallyHide:!1});return k.M().delay(X).parallel([U,i])}({ref:M})),x.push(function({ref:W}){const y=new G.a(W,{translateUnits:"%"});y.y=-50;const M={contrastValue:0,brightnessValue:0},U=y=>{W.style.filter=`brightness(${y.brightnessValue+1}) contrast(${.3*y.contrastValue+1})`};return k.M().parallel([e.M(y).animateTo({scale:3.7,x:100},I,u.dV).delay($-I).animateTo({x:0,scale:1},a-$,u.dV),e.M(M).animateTo({contrastValue:1},R,u.dV).delay($-R).animateTo({contrastValue:0},a-$).onUpdate(U),e.M(M).animateTo({brightnessValue:1},R,u.dV).animateTo({brightnessValue:.6},I-R,u.dV).animateTo({brightnessValue:1},E-I,u.dV).animateTo({brightnessValue:.6},Z-E,u.dV).animateTo({brightnessValue:1},f-Z,u.dV).animateTo({brightnessValue:.6},V-f,u.dV).animateTo({brightnessValue:1},$-V,u.dV).animateTo({brightnessValue:0},a-$,u.dV).onUpdate(U)])}({ref:U})),i.parallel([...x,...n]),i.delay(Q.kJ+Q.ML),i.callback(l);const c=g.l({anim:i});T.current={dispose:c,timeline:i}}),[M,U,n,y,l,i,D,Y,r])}var lW=M(980733);function GW(W){let y;const M=Object.keys(W);for(const U of M)if(W[U]){const M=W[U];if(!y){y=W[U];continue}y.value<M.value&&(y=W[U])}return y}const YW=W=>{const{chaserBorderRefs:y,chaserBackgroundGradientRefs:M,betSpotBonusBackgroundRefs:U,betSpotNumberTextRefs:i,pendingXChaserBets:u,pendingStormChaserBets:e,animateStormChaser:l,animateBonusMultipliers:G,animateXChaser:c,wheelMultipliers:D,setStormChaserAnimatedChips:r,setXChaserAnimatedChips:A,onStepReady:T,getBonusGameCallback:O,hasBetCallback:h,playSound:S,chaserChipsRef:o,chaserAnimatedChipsData:d,gameDimensions:q,getChipTargetReference:s,betSpotBackgroundRefs:N}=W;return eW({borderLightningRef:y[Y.LightningStormBetCode.StormChaser],backgroundGradientRef:M[Y.LightningStormBetCode.StormChaser],pendingBets:e,active:l,setAnimatedChipsData:r,onReady:T,chaserChipsRef:o,chaserAnimatedChipsData:d,gameDimensions:q,getChipTargetReference:s,betSpotBackgroundRefs:N}),function(W){const{active:y,bonusRefs:M,betSpotNumberTextRefs:U,multipliers:i,onReady:u,getBonusGameCallback:e,playSound:l,hasBetCallback:G}=W;x.useEffect((()=>{if(!y||n.A(i))return;const W=Object.keys(i).sort(((W,y)=>parseInt(W,10)-parseInt(y,10)));for(const y of W)if(!M[y]||!U[y])return;const x=[];for(let y=0;y<W.length;y++){const n=W[y];x.push(k.M().delay(y*p).callback((()=>{if(i[n]){const W=i[n];l({event:P(W),args:[G(n)?K.V5.OnBet:K.V5.NotOnBet]})}})).sequence(m({bonus:e(n),betSpotBonusBackgroundRefs:M[n],betSpotNumberTextRefs:U[n]})))}const Y=k.M().parallel(x).callback(u),c=g.l({anim:Y});return()=>{Y.fastForward(),c()}}),[y,i,M,U,u,l,G,e])}({active:G,bonusRefs:U,betSpotNumberTextRefs:i,multipliers:D,onReady:T,getBonusGameCallback:O,playSound:S,hasBetCallback:h}),eW({borderLightningRef:y[Y.LightningStormBetCode.XChaser],backgroundGradientRef:M[Y.LightningStormBetCode.XChaser],pendingBets:u,active:c,setAnimatedChipsData:A,onReady:T,chaserChipsRef:o,chaserAnimatedChipsData:d,gameDimensions:q,getChipTargetReference:s,betSpotBackgroundRefs:N}),null},cW=i.PA((()=>{const W=lW.g(),y=x.useCallback((y=>{const M=W.bets.bets;W.bets.setBet(y),W.bets.clearPendingStormChaserBet(),function(W){const{store:y,bonuses:M,currentBets:U}=W;y.sound.playSound({event:K.PZ.StormChaserApplied});const{[Y.LightningStormBetCode.StormChaser]:i=0}=U;if(i<=0)return;const x=Object.keys(M).filter((W=>M[W]===Y.LightningStormBonusGame.StormBonus));n.A(x)||y.chaserDistribute.addAnimatedChaserChips(x,Y.LightningStormBetCode.StormChaser,i,y.bets.bets,kW.tE.StormChaser)}({currentBets:M,store:W,bonuses:W.wheel.bonusBetCodes})}),[W]),M=x.useCallback((y=>{const M=W.bets.bets;W.bets.setBet(y),W.bets.clearPendingXChaserBet(),function(W){var y;const{store:M,bonuses:U,currentBets:i,wheelMultipliers:x}=W;M.sound.playSound({event:K.PZ.XChaserApplied,args:[null===(y=GW(x))||void 0===y?void 0:y.level]});const{[Y.LightningStormBetCode.XChaser]:k=0}=i;if(k<=0)return;const g=Object.keys(U).filter((W=>!!x[W]));n.A(g)||M.chaserDistribute.addAnimatedChaserChips(g,Y.LightningStormBetCode.XChaser,k,M.bets.bets,kW.tE.XChaser)}({currentBets:M,store:W,bonuses:W.wheel.bonusBetCodes,wheelMultipliers:W.wheel.multipliers})}),[W]),i=x.useCallback((()=>{W.chaserDistribute.setCurrentPhaseDone()}),[W]),k=x.useCallback((y=>{W.sound.playSound(y)}),[W]),g=x.useCallback((y=>W.bets.getBetCodeBet(y)>0),[W]),u={pendingStormChaserBets:W.bets.pendingStormChaserBets,pendingXChaserBets:W.bets.pendingXChaserBets,setStormChaserAnimatedChips:y,setXChaserAnimatedChips:M,chaserBorderRefs:W.references.chaserBorderReferences,chaserBackgroundGradientRefs:W.references.chaserBackgroundGradientReferences,betSpotBonusBackgroundRefs:W.references.betSpotBonusBackgroundReferences,betSpotNumberTextRefs:W.references.betSpotNumberTextReferences,animateStormChaser:W.ui.chaserDistribution.isStormChaserAnimate,animateBonusMultipliers:W.ui.chaserDistribution.isWheelMultiplierAnimate,animateXChaser:W.ui.chaserDistribution.isXChaserAnimate,wheelMultipliers:W.wheel.multipliers,onStepReady:i,getBonusGameCallback:W.wheel.getBonusGameFor,hasBetCallback:g,playSound:k,chaserChipsRef:W.references.chaserAnimatedChipsReference,chaserAnimatedChipsData:W.chaserDistribute.chaserChips,gameDimensions:W.abstractGame.values.gameDimensions,getChipTargetReference:W.ui.flyingChips.getTargetElement,betSpotBackgroundRefs:W.references.betSpotBonusBackgroundReferences};return U.jsx(YW,{...u})}))},542031:(W,y,M)=>{M.d(y,{v:()=>e});var U=M(64922),i=M(699695),x=M(377810),n=M(253613),k=M(46602);const g="chip--a64ce",u="winning--938fb",e=x.memo((W=>{const{amount:y,state:M,hasShadow:x=!1}=W;return U.jsx("div",{className:i.A(g,{[u]:M===k.Y.Winning}),children:U.jsx(n.w,{value:y,hasGhostAnimation:M===k.Y.Ghost,hasShadow:x})})}))},46602:(W,y,M)=>{var U;M.d(y,{Y:()=>U}),function(W){W["Normal"]="ChipState.Normal",W["Ghost"]="ChipState.Ghost",W["Winning"]="ChipState.Winning",W["Losing"]="ChipState.Losing"}(U||(U={}))},460786:(W,y,M)=>{M.d(y,{C:()=>Z});var U=M(64922),i=M(699695),x=M(377810);const n=`decision-timer`;var k=M(625915),g=M(234341),u=M(315049),e=M(769413);const l=10;var G=M(855500),Y=M(150702),c=M(164956);const D=JSON.parse('{"frames":{"frame_00":{"x":0,"y":270,"width":438,"height":30},"frame_01":{"x":0,"y":300,"width":438,"height":30},"frame_02":{"x":0,"y":450,"width":438,"height":30},"frame_03":{"x":0,"y":360,"width":438,"height":30},"frame_04":{"x":0,"y":180,"width":438,"height":30},"frame_05":{"x":0,"y":150,"width":438,"height":30},"frame_06":{"x":0,"y":0,"width":438,"height":30},"frame_07":{"x":0,"y":90,"width":438,"height":30},"frame_08":{"x":0,"y":510,"width":438,"height":30},"frame_09":{"x":0,"y":480,"width":438,"height":30},"frame_10":{"x":0,"y":210,"width":438,"height":30},"frame_11":{"x":0,"y":120,"width":438,"height":30},"frame_12":{"x":0,"y":30,"width":438,"height":30},"frame_13":{"x":0,"y":60,"width":438,"height":30},"frame_14":{"x":0,"y":240,"width":438,"height":30},"frame_15":{"x":0,"y":330,"width":438,"height":30},"frame_16":{"x":0,"y":420,"width":438,"height":30},"frame_17":{"x":0,"y":390,"width":438,"height":30}},"meta":{"size":{"height":540,"width":438}}}'),r=Y.S(D);var A=M(849935),T=M(128546),O=M(619608),h=M(161090);const S=M.p+"images/timerlight.c684ed44.webp",o="decisionTimer--32674",d="hidden--1e15d",q="timerBoxWrapper--cc0f6",s="timerBoxInnerWrapper--369d2",N="timerBox--44397",_="timerBoxPulse--5f3a4",p="visible--a4d26",b="timerText--5d60a",m="pulse--7b16b",z="timerProgressBarWrapper--311b0",K="hasLightning--32b6b",P="timerProgressBar--99bfe",R="timerProgressBarPulse--51fc8",I="lightningWrapper--c73d3",E="lightning--e0801",Z=W=>{const{totalTime:y,timeRemaining:M,running:Y,pulseStartTime:D,hasLightning:T,tickingSoundThreshold:S}=W,[N,_]=A.G(),[p,z]=O.K({translateUnits:"%"}),[K,P]=O.K({translateUnits:"%"},{y:-50}),[R,I]=x.useState(null),E=Math.ceil(M),Z=Y&&D>0&&E<=D;return h.o(S,E,!1),function(W){const{timerProgressBarRef:y,timerBoxRef:M,timerInnerBoxRef:U,totalTime:i,timeRemaining:n,running:Y,onReady:D=()=>{},lightningRef:A,hasLightning:T}=W,O=x.useRef({time:-1,running:!1}),h=x.useRef();x.useEffect((()=>{var W;if(y&&M&&U&&(!T||A))if(n>0&&i>0){if(O.current.time<n||O.current.running!==Y){let W;if(h.current&&h.current(),A){const y=new G.s(A,{translateUnits:"%"});y.x=-50,y.y=-50,W=k.$(c.Gn({element:y,duration:r.length/c.J_,frames:r,automaticallyHide:!1})).onDispose((()=>{y.opacity=0}))}const x=function(W){const{remaining:y,total:M,running:U,timerBox:i,timerProgressBar:x,timerInnerBox:n}=W,k=M>0?Math.min(Math.round(y/M*100)-100,0):-100,g=U?-100:k,u=U?y:0,G={frame:k};return[e.M(G).animateTo({frame:g},u,void 0,(()=>{var W,y,M,U,i;x.style.setProperty("--progress",G.frame.toString()),n.x=(W=G.frame,y=Math.abs(W),M=0,(U=l)===(i=100-l)?U:(i-U)*(y-M)/(100-M)+U)})),e.M(i).callback((()=>{i.x=k})).animateTo({x:g},u)]}({timerProgressBar:y,timerBox:M,timerInnerBox:U,running:Y,remaining:n,total:i}),T=g.M();let O=x;W&&(O=x.concat(W)),T.parallel(O),T.callback(D),h.current=u.l({anim:T,skipOnPageHidden:!1})}O.current.time=n,O.current.running=Y}else null===(W=h.current)||void 0===W||W.call(h),h.current=void 0,O.current.time=-1,O.current.running=!1}),[A,D,Y,n,M,y,i,T]),x.useEffect((()=>()=>{var W;null===(W=h.current)||void 0===W||W.call(h)}),[])}({hasLightning:T,lightningRef:R,timerBoxRef:p,timerInnerBoxRef:K,timerProgressBarRef:N,running:Y,timeRemaining:M,totalTime:y}),U.jsxs("div",{className:i.A(o,{[d]:0===E,[m]:Z}),children:[U.jsx(f,{hasLightning:T,pulseActive:Z,setTimerProgressBarRef:_,setLightningRef:I}),U.jsx("div",{className:q,ref:z,children:U.jsxs("div",{className:s,ref:P,children:[U.jsx(V,{pulseActive:Z}),U.jsx("span",{className:i.A(b,{[m]:Z}),"data-role":n,children:E},E)]})})]})},f=x.memo((W=>{const{hasLightning:y,pulseActive:M,setTimerProgressBarRef:x,setLightningRef:n}=W;return U.jsxs("div",{className:i.A(z,{[K]:y}),ref:x,children:[U.jsx("div",{className:P}),U.jsx("div",{className:i.A(R,{[p]:M})}),y&&U.jsx("div",{className:I,children:U.jsx(T.d,{setRef:n,src:S,spriteClass:E})})]})})),V=x.memo((W=>{const{pulseActive:y}=W;return U.jsxs(U.Fragment,{children:[U.jsx("div",{className:i.A(N,{[d]:y})}),U.jsx("div",{className:i.A(_,{[p]:y})})]})}))},743935:(W,y,M)=>{M.d(y,{N:()=>A});var U=M(64922),i=M(699695),x=M(525620),n=M(377810),k=M(253613),g=M(869743),u=M(590257),e=M(980733),l=M(163828);function G(W,y,M){return W>=M.left&&W<=M.left+M.width&&y>=M.top&&y<=M.top+M.height}const Y="container--d11fc",c="chipContainer--8d02e",D="chip--84d01";class r extends n.PureComponent{constructor(){super(...arguments),this.isInitialPositionSet=!1,this.position={x:0,y:0},this.onChipRef=W=>{if(W){const{visible:y,setReference:M}=this.props;this.chipRef=W,M(u.Or.DraggableChip,W),y&&!this.isInitialPositionSet&&this.canSetInitialPosition()&&this.onStartDrag()}else this.chipRef=void 0},this.handleMove=W=>{const{visible:y}=this.props;y&&this.chipRef&&("touchmove"===W.type&&W.preventDefault(),this.updatePositions(W),this.moveChip(this.chipRef))},this.onTouchEnd=W=>{const{visible:y,getBetSpotRect:M,gameDimension:U,onDragEnd:i}=this.props;if(y&&this.chipRef){let y;"touchend"===W.type&&W.preventDefault();const x=l.x(this.chipRef,U.reverseScale);for(const W of g.Fl){const U=M(W);if(U&&G(x.left,x.top,U)){y=W;break}}i(y)}}}render(){const{value:W,visible:y}=this.props;return y?U.jsx("div",{className:i.A(Y),children:U.jsx("div",{ref:this.onChipRef,className:c,children:U.jsx("div",{className:i.A(D),children:U.jsx(k.w,{value:W,hasShadow:!1})})})}):null}componentDidUpdate(W){const{visible:y}=this.props;y&&W.visible!==y?this.isInitialPositionSet=!1:y||(this.isInitialPositionSet=!0),y&&!this.isInitialPositionSet&&this.canSetInitialPosition()&&this.onStartDrag()}componentDidMount(){document.addEventListener("mousemove",this.handleMove),document.addEventListener("touchmove",this.handleMove),document.addEventListener("touchend",this.onTouchEnd),document.addEventListener("mouseup",this.onTouchEnd)}componentWillUnmount(){document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("touchmove",this.handleMove),document.removeEventListener("touchend",this.onTouchEnd),document.removeEventListener("mouseup",this.onTouchEnd)}canSetInitialPosition(){const{startChipRef:W}=this.props;return!!W&&!!this.chipRef}updatePositions(W){var y;const{gameDimension:M}=this.props,{clientX:U,clientY:i}="touches"in W?W.touches[0]:W,x=null!==(y=M.reverseScale)&&void 0!==y?y:1;this.position.x=U/x-M.left/x,this.position.y=i/x-M.top/x}onStartDrag(){var W;const{startChipRef:y,gameDimension:M}=this.props;if(!y||!this.chipRef)return;this.isInitialPositionSet=!0;const U=null!==(W=M.reverseScale)&&void 0!==W?W:1,i=l.x(y,U),x=i.width>0?.5*i.width:0,n=i.height>0?.5*i.height:0;this.position.x=i.left+x-M.left/U,this.position.y=i.top+n-M.top/U,this.chipRef.style.width=`${i.width}px`,this.chipRef.style.height=`${i.height}px`,this.moveChip(this.chipRef)}moveChip(W){W.style.transform=`translate3d(${this.position.x}px, ${this.position.y}px, 0)`}}const A=x.PA((()=>{var W;const y=e.g(),M=null===(W=y.draggableChip.draggedChipInfo)||void 0===W?void 0:W.start,i={visible:y.draggableChip.isDragging,startChipRef:M?y.references.getBetSpotChipReference(u.Ip.Regular,M):null,value:M?y.bets.getBetCodeBet(M):0,onDragEnd:y.draggableChip.onEnd,setReference:y.references.setReference,getBetSpotRect:y.references.getBetSpotRect,gameDimension:y.abstractGame.values.gameDimensions};return U.jsx(r,{...i})}))},124323:(W,y,M)=>{M.d(y,{j:()=>q});var U=M(64922),i=M(525620),x=M(377810),n=M(699695),k=M(253613),g=M(315049),u=M(276111),e=M(234341),l=M(769413),G=M(238618),Y=M(849935),c=M(744015),D=M(341360);const r="flyingChip--aea53",A="shadow--e8413",T=W=>{const{chipData:y,getBoundingRect:M,getChipFontSize:i}=W,[T,O]=Y.G();return x.useEffect((()=>{if(!T)return;const W=M(y.from),U=M(y.to),x=i();if(!W||!U)return void y.onDidFly();const n=new D.a(T);let k;n.x=W.left,n.y=W.top,T.style.width=`${W.width}px`,T.style.height=`${W.height}px`,T.style.visibility="visible",x&&T.style.setProperty("--size",`${x}em`),k=y.animationType===c.W.Bounce?function(W){const{chip:y,onReady:M}=W,U=G.el,i=.3*U;return y.scale=1.4,y.opacity=0,e.M().parallel([l.M(y).animateTo({scale:1},U,u.dV),l.M(y).animateTo({opacity:1},i,u.dV)]).callback(M)}({chip:n,onReady:y.onDidFly}):function(W){const{from:y,to:M,chip:U,onReady:i}=W,x=function(W,y){return W.height>y.height?y.height/W.height:1}(y,M),[n,k]=function(W,y){return[(y.width-W.width)/2,(y.height-W.height)/2]}(y,M);return l.M(U).delay(G.ML).animateTo({scale:x,x:M.left+n,y:M.top+k},G.kJ,u.dV).callback(i)}({chip:n,onReady:y.onDidFly,from:W,to:U});const Y=g.l({anim:k});return()=>{k.fastForward(),Y(),T.style.visibility="hidden"}}),[y,M,i,T]),U.jsx("div",{className:n.A(r,A),ref:O,children:U.jsx(k.w,{value:y.amount})})};var O=M(590257),h=M(163828),S=M(277082),o=M(980733);const d=W=>{const{chips:y,gameDimensions:M,isBonusRound:i,isBettingTransitioning:n,chipstackLastSelectedChip:k,chasersEnabled:g,getReference:u}=W,e=function(W){const{gameDimensions:y,isBonusRound:M,isBettingTransitioning:U,chipstackLastSelectedChip:i,getReference:n,chasersEnabled:k}=W,g=x.useRef(y);g.current=y;const u=x.useRef({}),e=x.useCallback((W=>{if(!u.current[W]){const y=n(W);if(!y)return;const M=h.G(y,g.current);if(W===O.Or.DraggableChip||W===S.LightningStormBetCode.EvenMoney)return M;u.current[W]=M}return u.current[W]}),[g,n]);return x.useEffect((()=>{u.current[O.Or.SelectedChip]=void 0}),[i]),x.useEffect((()=>{u.current={}}),[y,M,U,k]),e}({gameDimensions:M,isBonusRound:i,isBettingTransitioning:n,chipstackLastSelectedChip:k,getReference:u,chasersEnabled:g}),l=function(W){const{gameDimensions:y,getReference:M}=W,U=x.useRef(void 0),i=x.useCallback((()=>{var W;if(U.current)return U.current;const y=null!==(W=M(O.Or.SelectedChip))&&void 0!==W?W:M(O.Or.Chipstack);return y?(U.current=parseFloat(getComputedStyle(y).fontSize),U.current):void 0}),[M]);return x.useEffect((()=>{U.current=void 0}),[y]),i}({gameDimensions:M,getReference:u}),G=x.useMemo((()=>y.map((W=>U.jsx(T,{chipData:W,getBoundingRect:e,getChipFontSize:l},W.id)))),[y,e,l]);return U.jsx(U.Fragment,{children:G})},q=i.PA((()=>{const W=o.g(),y=x.useCallback((y=>W.ui.flyingChips.getTargetElement(y)),[W]),M={chips:W.flyingChips.chips,gameDimensions:W.abstractGame.values.gameDimensions,isBonusRound:W.bonus.isActive,chipstackLastSelectedChip:W.abstractGame.values.betAmountsLastSelectedAmount,isBettingTransitioning:W.ui.bettingGridTransition.isTransitioning,getReference:y,chasersEnabled:W.ui.bettingGrid.chasersEnabled};return U.jsx(d,{...M})}))},238618:(W,y,M)=>{M.d(y,{ML:()=>x,el:()=>i,kJ:()=>U});const U=.5,i=.335,x=.1},681031:(W,y,M)=>{M.d(y,{W:()=>O});var U=M(64922),i=M(699695),x=M(525620),n=M(377810),k=M(84537);const g="footerGradient--01aac",u="portrait--07c39",e="footerGradientTop--59cf3",l={[k.fk.BonusGameColor]:"bonusGameColor--518df",[k.fk.StandardColor]:"standardColor--79ffa",[k.fk.ResultPhaseColor]:"resultPhaseColor--ddb08"},G={[k.p2.StandardColor]:"standardColor--89404",[k.p2.BatteryCharger]:"batteryCharger--815d6",[k.p2.HotSpot]:"hotSpot--15714",[k.p2.MonsterMash]:"monsterMash--2e65c",[k.p2.StormBonusHigh]:"stormBonusHigh--e49bd",[k.p2.StormBonusRegular]:"stormBonusRegular--a580e",[k.p2.Fireball]:"fireball--d5d95"},Y={[k.p2.StandardColor]:"standardColor--7bc2b",[k.p2.BatteryCharger]:"batteryCharger--2f6a2",[k.p2.HotSpot]:"hotSpot--89fd2",[k.p2.MonsterMash]:"monsterMash--22be7",[k.p2.StormBonusHigh]:"stormBonusHigh--130de",[k.p2.StormBonusRegular]:"stormBonusRegular--eaf13",[k.p2.Fireball]:"fireball--42512"},c={[k.P9.BettingClosed]:"bettingClosed--73d3b",[k.P9.BettingOpened]:"bettingOpened--d422e",[k.P9.BonusGame]:"bonusGame--01aa1"};var D=M(410004),r=M(590257),A=M(980733);const T=W=>{const{visible:y,color:M,isPortrait:x,setReference:k,topGradientSize:A}=W,T=D.v(r.Or.FooterGradient,k),O=n.useMemo((()=>x?Y[M]:l[M]),[M,x]);return y?U.jsx("div",{ref:T,className:i.A(g,O,x&&u),children:x&&U.jsx("div",{className:i.A(e,G[M],c[A])})}):null},O=x.PA((()=>{var W,y;const M=A.g(),i={color:M.ui.footerGradient.color,isPortrait:M.device.isPortrait,visible:null===(y=null===(W=M.testTools)||void 0===W?void 0:W.footerGradientVisible)||void 0===y||y,setReference:M.references.setReference,topGradientSize:M.ui.footerGradient.topGradientSize};return U.jsx(T,{...i})}))},902388:(W,y,M)=>{M.d(y,{n:()=>c});var U=M(64922),i=M(699695),x=M(525620),n=M(377810),k=M(982341),g=M(980733);const u="container--6b46a",e="allowPointerEvents--1c753",l="cursorPointer--3c5d5",G="hidden--47e9d",Y=({allowPointerEvents:W,visible:y,hasCursorPointer:M})=>{const x=k.h().renderer.domElement,[g,Y]=n.useState(null);return n.useEffect((()=>{null==g||g.appendChild(x)}),[g,x]),U.jsx("div",{ref:Y,className:i.A(u,{[e]:W,[G]:!y,[l]:M})})},c=x.PA((()=>{const W=g.g(),y={allowPointerEvents:W.ui.fullScreen3dOverlay.canvasAllowPointerEvents,visible:W.ui.fullScreen3dOverlay.visible,hasCursorPointer:W.ui.fullScreen3dOverlay.hasCursorPointer};return U.jsx(Y,{...y})}))},666622:(W,y,M)=>{M.d(y,{$:()=>p});var U=M(64922),i=M(525620),x=M(377810);const n="bonus-flying-multiplier";var k=M(980733),g=M(277082);const u="main--a04b8",e="blurred--279f2",l=W=>{const{multiplier:y,setReference:M}=W,[i,k]=x.useState(null),[l,G]=x.useState(null);return x.useEffect((()=>{M(i&&l?{main:i,blurred:l}:null)}),[i,l,M]),x.useEffect((()=>()=>{M(null)}),[M]),y?U.jsxs("div",{className:u,"data-role":n,ref:k,children:[U.jsx("div",{ref:G,className:e,children:U.jsx(g.LightningStormMultiplier,{value:`${y.amount}x`})}),U.jsx("div",{children:U.jsx(g.LightningStormMultiplier,{value:`${y.amount}x`})})]}):null},G=i.PA((()=>{const W=k.g(),y={setReference:W.references.setBonusFlyingWheelMultiplierReferences,multiplier:W.bonus.flyingWheelMultiplier};return U.jsx(l,{...y})}));var Y=M(699695),c=M(410004),D=M(617401),r=M(590257);const A="container--19788",T={[D._.MobilePortrait]:"portrait--83fb6"},O=W=>{const{layout:y,setReference:M}=W,i=c.v(r.Or.BonusTransitionCenter,M);return U.jsx("div",{ref:i,className:Y.A(A,T[y])})},h=i.PA((()=>{const W=k.g(),y={layout:W.device.componentLayout,setReference:W.references.setReference};return U.jsx(O,{...y})}));var S=M(276111),o=M(769413),d=M(315049),q=M(426331);const s="container--98d2c",N=W=>{const{videoSource:y,onReady:M,logo:i}=W,n=x.useRef(null),k=x.useRef(null),g=x.useCallback((()=>{if(n.current){const W={opacity:1},y=o.M(W).animateTo({opacity:0},.5,void 0,(()=>{n.current&&(n.current.style.opacity=`${W.opacity}`)})).callback(M);return d.l({anim:y})}}),[M]),u=x.useCallback((()=>{if(i){const W={opacity:1},y=o.M(W).animateTo({opacity:0},.5,S.dV,(()=>{i.logo.style.opacity=`${W.opacity}`}));return d.l({anim:y})}}),[i]);return x.useEffect((()=>{n.current&&k.current&&(n.current.onended=()=>{g()},n.current.onerror=()=>{M()},k.current.onerror=()=>{M()},n.current.play().then((()=>{u()})).catch((()=>{M()})))}),[u,M,g]),U.jsx("video",{ref:n,className:s,controls:!1,playsInline:!0,autoPlay:!0,loop:!1,muted:!0,preload:"auto",children:U.jsx("source",{ref:k,src:y,type:"video/mp4"})})},_=i.PA((()=>{const W=k.g(),y=x.useCallback((()=>{W.intro.done()}),[W]);if(!W.intro.src||W.intro.phase!==q.G.ReadyToPlay)return null;const M={videoSource:W.intro.src,onReady:y,logo:W.intro.logo};return U.jsx(N,{...M})})),p=()=>U.jsxs(U.Fragment,{children:[U.jsx(G,{}),U.jsx(h,{}),U.jsx(_,{})]})},871521:(W,y,M)=>{M.d(y,{O:()=>g});var U=M(377810),i=M(276111),x=M(769413),n=M(315049),k=M(228174);function g(W){const{value:y,setValue:M,duration:g,frequency:u,roundToDecimals:e=0,ignoreInitialValue:l=!0}=W,G=U.useRef();U.useEffect((()=>{var W;if(!l||void 0!==G.current&&G.current!==y&&y){const U=function(W,y,M,U,i){if(M<=0||U<=0||W===y)return[y];const x=[],n=Math.max(Math.round(M/U),0);if(n<=0)return[y];const g=(y-W)/n;for(let y=1;y<n;y++){const M=k.GB(W+y*g,i);x[x.length-1]!==M&&x.push(M)}return x.push(y),x}(null!==(W=G.current)&&void 0!==W?W:0,y,g,u,e),l={frame:0},Y=x.M(l).animateTo({frame:U.length-1},g,i.dV,(()=>{M(U[Math.round(l.frame)])})).callback((()=>{M(y)})),c=n.l({anim:Y});return G.current=y,()=>{Y.fastForward(),c()}}G.current=y,M(y)}),[y,M,g,u,e,l])}},849935:(W,y,M)=>{M.d(y,{G:()=>i});var U=M(377810);function i(){const[W,y]=U.useState(null);return[W,U.useCallback((W=>{y(W)}),[])]}},410004:(W,y,M)=>{M.d(y,{v:()=>i});var U=M(377810);function i(W,y){return U.useCallback((M=>{y(W,M)}),[y,W])}},797238:(W,y,M)=>{M.d(y,{R:()=>i});var U=M(377810);function i(W,y){const[M,i]=U.useState(!1);return U.useEffect((()=>{if(!W){const W=window.setTimeout((()=>{i(!1)}),y);return()=>window.clearTimeout(W)}i(!0)}),[W,y]),M}},890023:(W,y,M)=>{M.d(y,{K:()=>i});var U=M(377810);function i(W){const y=U.useRef(W),[M,i]=U.useState(W);return[M,U.useCallback((W=>{y.current=W,i(W)}),[]),y]}},956908:(W,y,M)=>{M.d(y,{F:()=>L});var U=M(64922),i=M(525620);const x="hot-spot-container";var n=M(699695),k=M(377810),g=M(757062),u=M(460786),e=M(583233),l=M(617401),G=M(253796),Y=M(481522),c=M(980733),D=M(521353),r=M(421645);const A="hotSpotDecisionTimer--a07c6",T="background--236cf",O="statusWrapper--9362b",h="timerWrapper--ce8bc",S={[l._.MobilePortrait]:"portrait--312f7",[l._.Tablet]:"tablet--320cc"},o=W=>{const{visible:y,totalTime:M,remainingTime:i,pulseStartTime:x,isTimerRunning:g,wallBottomRect:c,componentLayout:D,playSound:o}=W;(function(W){const{remainingTime:y,playSound:M,visible:U}=W,i=k.useMemo((()=>Math.ceil(y)),[y]);k.useEffect((()=>{i&&U&&M({event:G.PZ.HotSpotMakeDecision,args:[i]})}),[i,U,M])})({remainingTime:i,visible:y,playSound:o});const d=function(W){const{wallBottomRect:y,componentLayout:M}=W;switch(M){case l._.MobilePortrait:return.008*y.h;case l._.Tablet:return.85;default:return 1}}({wallBottomRect:c,componentLayout:D});return y?U.jsxs("div",{className:n.A(A,S[D]),style:{left:`${c.x}px`,top:`${c.y}px`,width:`${c.w}px`,height:`${c.h}px`,"--visibleDelay":`${e.J1-e.Qo}s`,"--visibleDuration":`${e.wZ-e.J1}s`},children:[U.jsx("div",{className:T}),U.jsx("div",{className:O,children:U.jsx(Y.M,{label:r.X.HotSpotMakeDecision,visible:y,hasGradient:!0})}),U.jsx("div",{className:h,style:{"--timerSize":`calc(var(--lmw-size) * ${d})`},children:U.jsx(u.C,{totalTime:M,timeRemaining:i,running:g,pulseStartTime:x,hasLightning:!0})})]}):null},d=i.PA((()=>{const W=c.g(),y=k.useCallback((y=>{W.sound.playSound(y)}),[W]),M={totalTime:W.hotSpot.decisionTotalTime,remainingTime:W.hotSpot.decisionTimeRemaining,pulseStartTime:g.rv(W.settings.makeDecisionClosingTime),isTimerRunning:W.ui.hotSpotGrid.isTimerRunning,wallBottomRect:W.videoElementRects.rects[D.V.HotSpotDecisionWallBottom],visible:W.ui.hotSpotGrid.isTimerVisible,componentLayout:W.device.componentLayout,playSound:y};return U.jsx(o,{...M})}));var q=M(876759),s=M(871521),N=M(965804),_=M(341360);class p extends _.a{constructor(){super(...arguments),this.currentFlash=0}get flash(){return this.currentFlash}set flash(W){const y=Math.max(W,0);this.currentFlash!==y&&(this.currentFlash=y,this.apply())}willApply(W){super.willApply(W),this.flash>0?W.style.filter=`brightness(${1+.6*this.flash})                contrast(${1+this.flash})                blur(${this.flash}px)`:W.style.filter=""}}var b=M(228174),m=M(625756),z=M(803903),K=M(822381),P=M(277082);const R="multiplier--9eccd",I="isVisualTest--4f4c0",E=W=>{const{multiplier:y,selectedPosition:M,wallRect:i,setRef:x,layout:g}=W,[u,e]=function(W,y){if(!y)return[-100,-100];const M=W.w/m.YB,U=W.h/m.Ge,i=M*y[0]+.5*M,x=U*y[1]+.5*U;return[b.GB(i/W.w*100,2),b.GB(x/W.h*100,2)]}(i,M),[G,Y]=k.useState(null),[c,D]=k.useState(0);k.useEffect((()=>{if(G){const W=new p(G,{translateOrigin:z.t.Center});W.opacity=0,x({counter:W})}else x(null)}),[G,x]),s.O({value:y,setValue:D,duration:N.Xl-N.Qo,frequency:.15}),k.useEffect((()=>()=>{x(null)}),[x]);const r=k.useMemo((()=>{const W=2,y=g===l._.Tablet?1:1.2;return g===l._.MobilePortrait?`calc(${K._m(1)}*${i.w/m.YB*W*.022})`:`calc(${K._m(y)}*${W})`}),[i,g]);return U.jsx("div",{className:n.A(R,{[I]:q.I()}),style:{left:`${u}%`,top:`${e}%`,"--lmw-multiplier-size":`${r}`},ref:Y,children:c>0&&U.jsx(P.LightningStormMultiplier,{value:`${c}x`})})},Z=i.PA((()=>{const W=c.g(),y={multiplier:W.hotSpot.multiplier,selectedPosition:W.hotSpot.selectedSpotCoordinate,wallRect:W.videoElementRects.rects[D.V.HotSpotDecisionWall],setRef:W.references.setHotSpotMultiplierReference,layout:W.device.componentLayout};return U.jsx(E,{...y})})),f="hotSpotGridPlaceholder--a896f",V="pointer--faa37",$="hidden--c03b2",a=W=>{const{active:y,visible:M,wallRect:i,isDecision:x}=W;return y?U.jsx("div",{className:n.A(f,{[V]:x,[$]:!M}),style:{left:`${i.x}px`,top:`${i.y}px`,width:`${i.w}px`,height:`${i.h}px`},children:U.jsx(Z,{})}):null},H=i.PA((()=>{const W=c.g(),y={visible:W.ui.hotSpotGrid.isVisible,active:W.ui.hotSpotGrid.isActive,wallRect:W.videoElementRects.rects[D.V.HotSpotDecisionWall],isDecision:W.hotSpot.isDecisionTime};return U.jsx(a,{...y})})),B="hotSpotContainer--48587",v=({active:W})=>W?U.jsxs("div",{className:B,"data-role":x,children:[U.jsx(H,{}),U.jsx(d,{})]}):null,L=i.PA((()=>{const W={active:c.g().hotSpot.isActive};return U.jsx(v,{...W})}))},583233:(W,y,M)=>{M.d(y,{DH:()=>Y,Dm:()=>O,Dv:()=>S,FK:()=>A,J1:()=>g,K0:()=>T,K9:()=>h,Mg:()=>G,QD:()=>u,QJ:()=>x,Qi:()=>k,Qo:()=>U,TU:()=>D,X2:()=>i,Xf:()=>e,Xl:()=>n,cU:()=>l,wK:()=>r,wZ:()=>c});const U=0,i=.1,x=.2,n=.3,k=.4,g=.467,u=.5,e=.567,l=.6,G=.633,Y=.667,c=.7,D=.733,r=.767,A=.8,T=.833,O=.967,h=1.467,S=1.967},965804:(W,y,M)=>{M.d(y,{QJ:()=>x,Qi:()=>k,Qo:()=>U,X2:()=>i,Xl:()=>n});const U=0,i=.167,x=.467,n=.833,k=1.233},34416:(W,y,M)=>{M.d(y,{R:()=>hW});var U=M(64922),i=M(699695),x=M(525620),n=M(377810),k=M(266600),g=M(757062),u=M(234341),e=M(315049),l=M(276111),G=M(769413);const Y=0,c=.335,D=.435,r=.47,A=.6,T=.67,O=.77,h=.835,S=1,o=1.1;var d=M(341360),q=M(803903),s=M(150702),N=M(164956);const _=JSON.parse('{"frames":{"SW_00":{"x":0,"y":0,"width":150,"height":150},"SW_01":{"x":150,"y":0,"width":150,"height":150},"SW_02":{"x":0,"y":150,"width":150,"height":150},"SW_03":{"x":150,"y":150,"width":150,"height":150},"SW_04":{"x":300,"y":0,"width":150,"height":150},"SW_05":{"x":0,"y":300,"width":150,"height":150},"SW_06":{"x":150,"y":300,"width":150,"height":150},"SW_07":{"x":300,"y":150,"width":150,"height":150},"SW_08":{"x":300,"y":300,"width":150,"height":150},"SW_09":{"x":450,"y":0,"width":150,"height":150},"SW_10":{"x":0,"y":450,"width":150,"height":150},"SW_11":{"x":150,"y":450,"width":150,"height":150},"SW_12":{"x":450,"y":150,"width":150,"height":150},"SW_13":{"x":300,"y":450,"width":150,"height":150},"SW_14":{"x":450,"y":300,"width":150,"height":150},"SW_15":{"x":600,"y":0,"width":150,"height":150},"SW_16":{"x":600,"y":150,"width":150,"height":150},"SW_17":{"x":450,"y":450,"width":150,"height":150},"SW_18":{"x":600,"y":300,"width":150,"height":150},"SW_19":{"x":600,"y":450,"width":150,"height":150}},"meta":{"size":{"height":600,"width":750}}}'),p=s.S(_);function b(W){const{betSpotBonusBackgroundRefs:y,betSpotNumberTextRef:M,lightningShockwave:U,betSpotRect:i,bonus:x}=W,n=new d.a(y.icon,{translateOrigin:q.t.Center});n.scale=0,M.center.opacity=1,M.side.opacity=0;const k=u.M().delay(D-Y).sequence((()=>(U.bonusGame=x,U.x=i.left+.5*i.width,U.y=i.top+.5*i.height,U.opacity=.7,U.setStyle({visibility:"visible"}),N.Gn({element:U,duration:o-D,frames:p,automaticallyShow:!1,automaticallyHide:!1})))).callback((()=>{U.setStyle({visibility:"hidden"})})),g=G.M(n).delay(D-Y).animateTo({scale:2},A-D,l.dV).animateTo({scale:1},O-A,l.dV),e=G.M(M.center).delay(D-Y).animateTo({opacity:0},O-D),c=G.M(M.side).delay(D-Y).animateTo({opacity:1},O-D);return u.M().parallel([k,g,e,c])}const m=JSON.parse('{"frames":{"CL_01":{"x":0,"y":0,"width":200,"height":110},"CL_02":{"x":0,"y":110,"width":200,"height":110},"CL_03":{"x":200,"y":0,"width":200,"height":110},"CL_04":{"x":0,"y":220,"width":200,"height":110},"CL_05":{"x":200,"y":110,"width":200,"height":110},"CL_06":{"x":200,"y":220,"width":200,"height":110},"CL_07":{"x":0,"y":330,"width":200,"height":110},"CL_08":{"x":200,"y":330,"width":200,"height":110},"CL_09":{"x":400,"y":0,"width":200,"height":110},"CL_10":{"x":400,"y":110,"width":200,"height":110},"CL_11":{"x":0,"y":440,"width":200,"height":110},"CL_12":{"x":400,"y":220,"width":200,"height":110},"CL_13":{"x":200,"y":440,"width":200,"height":110},"CL_14":{"x":400,"y":330,"width":200,"height":110},"CL_15":{"x":0,"y":550,"width":200,"height":110},"CL_16":{"x":200,"y":550,"width":200,"height":110},"CL_17":{"x":400,"y":440,"width":200,"height":110},"CL_18":{"x":600,"y":0,"width":200,"height":110},"CL_19":{"x":600,"y":110,"width":200,"height":110},"CL_20":{"x":600,"y":220,"width":200,"height":110},"CL_21":{"x":0,"y":660,"width":200,"height":110},"CL_22":{"x":400,"y":550,"width":200,"height":110},"CL_23":{"x":600,"y":330,"width":200,"height":110},"CL_24":{"x":200,"y":660,"width":200,"height":110},"CL_25":{"x":600,"y":440,"width":200,"height":110},"CL_26":{"x":0,"y":770,"width":200,"height":110},"CL_27":{"x":400,"y":660,"width":200,"height":110},"CL_28":{"x":200,"y":770,"width":200,"height":110},"CL_29":{"x":600,"y":550,"width":200,"height":110},"CL_30":{"x":400,"y":770,"width":200,"height":110}},"meta":{"size":{"height":880,"width":800}}}'),z=s.S(m);function K(W){const{corner:y,cornerElements:M}=W,U=M[y],i=G.M(U.activeBall).animateTo({opacity:1},c-Y).delay(T-c).animateTo({opacity:0},S-T),x=u.M().parallel([G.M(U.lightning).callback((()=>{U.lightning.setStyle({visibility:"visible"})})).animateTo({opacity:1},c-Y).delay(T-c).animateTo({opacity:0},S-A).callback((()=>{U.lightning.setStyle({visibility:"hidden"})})),u.M().delay(c-Y).sequence(N.Gn({element:U.lightning,duration:S-c,automaticallyHide:!1,frames:z}))]);return u.M().parallel([i,x])}var P=M(625915);const R=JSON.parse('{"frames":{"587":{"x":0,"y":0,"width":90,"height":60},"588":{"x":0,"y":60,"width":90,"height":60},"589":{"x":90,"y":0,"width":90,"height":60},"590":{"x":90,"y":60,"width":90,"height":60},"591":{"x":0,"y":120,"width":90,"height":60},"592":{"x":90,"y":120,"width":90,"height":60},"593":{"x":180,"y":0,"width":90,"height":60},"594":{"x":0,"y":180,"width":90,"height":60},"595":{"x":180,"y":60,"width":90,"height":60},"596":{"x":90,"y":180,"width":90,"height":60},"597":{"x":180,"y":120,"width":90,"height":60},"598":{"x":0,"y":240,"width":90,"height":60},"599":{"x":180,"y":180,"width":90,"height":60},"600":{"x":90,"y":240,"width":90,"height":60},"601":{"x":270,"y":0,"width":90,"height":60},"602":{"x":270,"y":60,"width":90,"height":60},"603":{"x":270,"y":120,"width":90,"height":60},"604":{"x":180,"y":240,"width":90,"height":60},"605":{"x":270,"y":180,"width":90,"height":60},"606":{"x":270,"y":240,"width":90,"height":60}},"meta":{"size":{"height":300,"width":360}}}'),I=s.S(R);function E(W){const{lightningBorder:y,betSpotRect:M,bonus:U}=W;return u.M().callback((()=>{y.opacity=0,y.bonusGame=U,y.x=M.left+.5*M.width,y.y=M.top+.5*M.height,y.scaleX=1.28,y.scaleY=1.4,y.setSize([M.width,M.height]),y.setStyle({visibility:"visible"})})).delay(D-Y).parallel([G.M(y).animateTo({opacity:1},r-D).delay(h-r).animateTo({opacity:0},o-h),G.M(y).callback((()=>{y.tint=0})).animateTo({tint:1},r-D),u.M().sequence((()=>{const W=N.Gn({element:y,duration:I.length/N.J_,frames:I,automaticallyShow:!1,automaticallyHide:!1});return P.$(W).onDispose((()=>{y.opacity=0,y.setStyle({visibility:"hidden"})}))}))])}const Z=JSON.parse('{"frames":{"frame_001":{"x":220,"y":160,"width":220,"height":160},"frame_002":{"x":0,"y":160,"width":220,"height":160},"frame_003":{"x":0,"y":0,"width":220,"height":160},"frame_004":{"x":440,"y":160,"width":220,"height":160},"frame_005":{"x":440,"y":0,"width":220,"height":160},"frame_006":{"x":220,"y":480,"width":220,"height":160},"frame_007":{"x":440,"y":480,"width":220,"height":160},"frame_008":{"x":440,"y":640,"width":220,"height":160},"frame_009":{"x":220,"y":640,"width":220,"height":160},"frame_010":{"x":0,"y":480,"width":220,"height":160},"frame_011":{"x":220,"y":320,"width":220,"height":160},"frame_012":{"x":440,"y":320,"width":220,"height":160},"frame_013":{"x":0,"y":640,"width":220,"height":160},"frame_014":{"x":220,"y":0,"width":220,"height":160},"frame_015":{"x":0,"y":320,"width":220,"height":160}},"meta":{"size":{"height":800,"width":660}}}'),f=s.S(Z),V=[220,160];var $=M(590257);function a(W){const{element:y,from:M,to:U,corner:i}=W,x=function(W){switch(W){case $.kt.LeftTop:return[1,-1,35];case $.kt.LeftBottom:return[-1,-1,145];case $.kt.RightTop:return[1,1,-35];case $.kt.RightBottom:return[-1,-1,-215]}}(i),n=function(W,y){switch(y){case $.kt.LeftTop:return{x:W.left,y:W.top};case $.kt.RightTop:return{x:W.left+W.width,y:W.top};case $.kt.LeftBottom:return{x:W.left,y:W.top+W.height};case $.kt.RightBottom:return{x:W.left+W.width,y:W.top+W.height}}}(M,i),k=function(W,y){const M=.18*W.width,U=.25*W.height,i=W.left+.5*W.width,x=W.top+.5*W.height;switch(y){case $.kt.LeftTop:return{x:i+M,y:x+U};case $.kt.RightTop:return{x:i-M,y:x+U};case $.kt.LeftBottom:return{x:i+M,y:x-U};case $.kt.RightBottom:return{x:i-M,y:x-U}}return{x:W.left+.5*W.width,y:W.top+.5*W.height}}(U,i),g=Math.sqrt(V[0]**2+V[1]**2);var e,l;const D=1.1*(e=n,l=k,Math.sqrt((l.x-e.x)**2+(l.y-e.y)**2))/g;return u.M().parallel([G.M(y).delay(T-Y).animateTo({opacity:0},h-T),u.M().delay(c-Y).callback((()=>{y.x=n.x,y.y=n.y,y.scaleX=D*x[0],y.scaleY=D*x[1],y.rotation=function(W,y){return 180*Math.atan2(y.y-W.y,y.x-W.x)/Math.PI}(n,k)+x[2],y.setStyle({visibility:"visible"}),y.opacity=1})).sequence((()=>N.Gn({element:y,duration:h-c,automaticallyHide:!1,frames:f}))).callback((()=>{y.setStyle({visibility:"hidden"}),y.opacity=0}))])}var H=M(277082);$.kt.LeftTop,$.kt.RightTop,$.kt.RightBottom,$.kt.LeftBottom;const B={[$.kt.LeftTop]:[H.LightningStormBetCode.One,H.LightningStormBetCode.Two,H.LightningStormBetCode.Three,H.LightningStormBetCode.Six,H.LightningStormBetCode.Seven],[$.kt.LeftBottom]:[H.LightningStormBetCode.Eleven,H.LightningStormBetCode.Twelve,H.LightningStormBetCode.Thirteen,H.LightningStormBetCode.Sixteen,H.LightningStormBetCode.Seventeen],[$.kt.RightTop]:[H.LightningStormBetCode.Four,H.LightningStormBetCode.Five,H.LightningStormBetCode.Eight,H.LightningStormBetCode.Nine,H.LightningStormBetCode.Ten],[$.kt.RightBottom]:[H.LightningStormBetCode.Fourteen,H.LightningStormBetCode.Fifteen,H.LightningStormBetCode.Eighteen,H.LightningStormBetCode.Nineteen,H.LightningStormBetCode.Twenty]};function v(W){for(const y of Object.keys(B))if(B[y].includes(W))return y;return $.kt.LeftTop}var L=M(253796),X=M(73682);function w(W){switch(W){case $.kt.LeftTop:return{event:L.PZ.LightningFromLeftTop};case $.kt.RightTop:return{event:L.PZ.LightningFromRightTop};case $.kt.LeftBottom:return{event:L.PZ.LightningFromLeftBottom};case $.kt.RightBottom:return{event:L.PZ.LightningFromRightBottom};default:return{event:L.PZ.LightningFromLeftTop}}}var F=M(163828),t=M(855500);const J=6;var j=M(228174);const C={[H.LightningStormBonusGame.BatteryCharger]:"hue-rotate(460deg) brightness(1.5) saturate(1.3)",[H.LightningStormBonusGame.MonsterMash]:"hue-rotate(2350deg) brightness(1.5) saturate(1.2)",[H.LightningStormBonusGame.HotSpot]:"hue-rotate(300deg) brightness(1) saturate(1)",[H.LightningStormBonusGame.StormBonus]:"hue-rotate(5deg) brightness(1) saturate(0.8)",[H.LightningStormBonusGame.Fireball]:"hue-rotate(60deg) brightness(1.5) saturate(1.5)"};class Q extends t.s{constructor(){super(...arguments),this.currentBonusGame=void 0,this.currentTint=1,this.currentSize=[-1,-1]}get bonusGame(){return this.currentBonusGame}set bonusGame(W){this.currentBonusGame!==W&&(this.currentBonusGame=W,this.apply())}get tint(){return this.currentTint}set tint(W){this.currentTint!==W&&(this.currentTint=W,this.apply())}setSize(W){const y=j.GB(W[0],1),M=j.GB(W[1],1);this.currentSize[0]===y&&this.currentSize[1]===M||(this.currentSize=[y,M],this.setStyle({width:`${y}px`,height:`${M}px`}))}willApply(W){super.willApply(W);let y=`grayscale(${1-this.currentTint})`;this.currentBonusGame&&(y+=` ${C[this.currentBonusGame]}`),W.style.filter=y}}var WW=M(128546);const yW=M.p+"images/lightningb.37d8b49f.webp",MW="lightningBorder--a7607",UW=n.memo((({setLightningBordersRef:W})=>{const[y,M]=n.useState([]),i=n.useCallback(((W,y)=>{M((M=>{const U=[...M];return y?U[W]=new Q(y,{translateOrigin:q.t.Center}):U.splice(W,1),U}))}),[]);n.useEffect((()=>{y.length===J?W([...y]):W(void 0)}),[y,W]),n.useEffect((()=>()=>{W(void 0)}),[W]);const x=n.useMemo((()=>[...Array(J)].map(((W,y)=>U.jsx(iW,{index:y,setRef:i},y)))),[i]);return U.jsx(U.Fragment,{children:x})})),iW=W=>{const{index:y,setRef:M}=W,i=n.useCallback((W=>{M(y,W)}),[M,y]);return U.jsx(WW.d,{setRef:i,src:yW,spriteClass:MW})},xW={[H.LightningStormBonusGame.BatteryCharger]:"hue-rotate(450deg) saturate(1.1)",[H.LightningStormBonusGame.MonsterMash]:"hue-rotate(2350deg) saturate(1.1)",[H.LightningStormBonusGame.HotSpot]:"hue-rotate(300deg) saturate(1.1)",[H.LightningStormBonusGame.StormBonus]:"hue-rotate(10deg) brightness(1.1) saturate(1.1)",[H.LightningStormBonusGame.Fireball]:"hue-rotate(60deg) saturate(1.5)"};class nW extends t.s{constructor(){super(...arguments),this.currentBonusGame=void 0}get bonusGame(){return this.currentBonusGame}set bonusGame(W){this.currentBonusGame!==W&&(this.currentBonusGame=W,this.setStyle({filter:xW[W]}))}}const kW=M.p+"images/shockwave.1c6241b7.webp",gW="shockwave--4f5c2",uW=n.memo((({setLightningShockwavesRef:W})=>{const[y,M]=n.useState([]),i=n.useCallback(((W,y)=>{M((M=>{const U=[...M];return y?U[W]=new nW(y,{translateOrigin:q.t.Center}):U.splice(W,1),U}))}),[]);n.useEffect((()=>{y.length===J?W([...y]):W(void 0)}),[y,W]),n.useEffect((()=>()=>{W(void 0)}),[W]);const x=n.useMemo((()=>[...Array(J)].map(((W,y)=>U.jsx(eW,{index:y,setRef:i},y)))),[i]);return U.jsx(U.Fragment,{children:x})})),eW=W=>{const{index:y,setRef:M}=W,i=n.useCallback((W=>{M(y,W)}),[M,y]);return U.jsx(WW.d,{setRef:i,src:kW,spriteClass:gW})},lW=M.p+"images/strike.b4820e81.webp",GW="lightning--0929a",YW=n.memo((({setLightningStrikesRef:W})=>{const[y,M]=n.useState([]),i=n.useCallback(((W,y)=>{M((M=>{const U=[...M];return y?U[W]=new t.s(y,{transformOrigin:"left top"}):U.splice(W,1),U}))}),[]);n.useEffect((()=>{y.length===J?W([...y]):W(void 0)}),[y,W]),n.useEffect((()=>()=>{W(void 0)}),[W]);const x=n.useMemo((()=>[...Array(J)].map(((W,y)=>U.jsx(cW,{index:y,setRef:i},y)))),[i]);return U.jsx(U.Fragment,{children:x})})),cW=W=>{const{index:y,setRef:M}=W,i=n.useCallback((W=>{M(y,W)}),[M,y]);return U.jsx(WW.d,{setRef:i,src:lW,spriteStyle:{"--strikeWidth":`${V[0]}px`,"--strikeHeight":`${V[1]}px`},spriteClass:GW})};var DW=M(617401),rW=M(980733);const AW="container--a453b",TW={[DW._.Desktop]:"desktopImmersive--b9e6e"},OW=W=>{const{corners:y,isActive:M,getBetSpot:x,gameDimensions:l,bonusShoots:G,onBonusShootStart:c,onBonusShootReady:D,betSpotNumberTextRefs:r,betSpotBonusBackgroundRefs:A,displayBonusDelay:T,getBetSpotReference:h,playSound:S,chasersEnabled:o,isClassicLayout:s,isChaserAnimating:N,layout:_,isPageReady:p,isInFullscreen:m}=W,[z,P]=n.useState(void 0),[R,I]=n.useState(void 0),[Z,f]=n.useState(void 0),V=function(W){return n.useMemo((()=>{if(W)return Object.keys(W).reduce(((y,M)=>{const U=W[M],i=new d.a(U.ballWrapper),x=new d.a(U.activeBall,{translateOrigin:q.t.Center});x.opacity=0;const n=new t.s(U.lightning,{translateUnits:"%"});return n.setStyle({visibility:"hidden"}),n.opacity=0,y[M]={ballWrapper:i,activeBall:x,lightning:n},y}),{})}),[W])}(y),B=function(W){const{gameDimensions:y,cornerElements:M,getBetSpotReference:U,lightningBorders:i}=W,x=n.useRef(y);x.current=y,n.useRef(i).current=i;const k=n.useCallback((W=>{const{reverseScale:y=1,left:M,top:i}=x.current,n=U(W);if(!n)return;let k=F.x(n,y);return k?(k={...k,left:k.left-M/y,top:k.top-i/y},k):void 0}),[U]),g=n.useCallback((W=>{if(!M)return;const y=M[W];return F.G(y.ballWrapper.element,x.current)}),[M]);return n.useMemo((()=>({betSpot:k,corner:g})),[k,g])}({gameDimensions:l,cornerElements:V,getBetSpotReference:h,lightningBorders:Z});return function(W){const{isActive:y,bonusShoots:M,cornerElements:U,betSpotNumberTextRefs:i,getBetSpot:x,gameDimensions:l,onBonusShootStart:G,onBonusShootReady:c,betSpotBonusBackgroundRefs:D,lightningStrikes:r,lightningShockwaves:A,lightningBorders:T,displayBonusDelay:h,referenceRects:S,playSound:o,chasersEnabled:d,isClassicLayout:q,isChaserAnimating:s,isPageReady:N,isInFullscreen:_}=W,p=n.useRef({});n.useEffect((()=>{if(!y){for(const W of Object.keys(p.current))X.VA(W,p.current);return void(p.current={})}if(!U||!r||!A||!T||s||!N)return;if(k.A(Object.keys(p.current),M.map((W=>W.id))))return;for(const W of Object.values(p.current))X.s1(W);const W=Object.keys(p.current),n=M.filter((y=>!W.includes(y.id))),l=n.map((W=>W.betSpots)).reduce(((W,y)=>[...W,...y]),[]);for(const W of l){const y=i[W],M=D[W],U=x(W);if(!y||!M||!U)return}for(let W=0;W<n.length;W++){const y=n[W],M=u.M();M.delay(g.rv(h));const x=[],k=[],l=u.M().callback((()=>{o({event:L.PZ.BetGridCharge})}));x.push(l);for(let W=0;W<y.betSpots.length;W++){const M=y.betSpots[W];let n=[v(M)];y.id===H.LightningStormBonusGame.StormBonus&&1===y.betSpots.length&&(n=Object.values($.kt));const g=i[M],u=D[M],e=S.betSpot(M);if(!g||!u||!e)return;for(let y=0;y<n.length;y++){const M=n[y],i=S.corner(M);if(!i)continue;const g=K({corner:M,cornerElements:U}),u=a({element:r[W+y],from:i,to:e,corner:M});x.push(g,u),k.includes(M)||k.push(M)}const l=E({lightningBorder:T[W],bonus:y.id,betSpotRect:e});x.push(l);const G=b({betSpotNumberTextRef:g,betSpotBonusBackgroundRefs:u,lightningShockwave:A[W],bonus:y.id,betSpotRect:e});x.push(G)}x.push(u.M().delay(O-Y).callback((()=>{o({event:L.PZ.BonusReveal,args:[L.aN[y.id]]})}))),M.callback((()=>{for(const W of k)o(w(W))})).parallel(x).callback((()=>{c(y)})),G();const d=e.l({anim:M});p.current[y.id]={timeline:M,dispose:d},(y.done||W<n.length-1)&&X.s1(p.current[y.id])}}),[y,M,U,x,G,c,i,D,r,A,T,h,o,S,s,N]),n.useEffect((()=>{for(const W of Object.values(p.current))X.s1(W)}),[l,d,q,s,N,_])}({isActive:M,bonusShoots:G,cornerElements:V,getBetSpot:x,gameDimensions:l,onBonusShootStart:c,onBonusShootReady:D,lightningShockwaves:R,betSpotNumberTextRefs:r,betSpotBonusBackgroundRefs:A,lightningStrikes:z,displayBonusDelay:T,lightningBorders:Z,referenceRects:B,playSound:S,chasersEnabled:o,isClassicLayout:s,isChaserAnimating:N,isPageReady:p,isInFullscreen:m}),M?U.jsxs("div",{className:i.A(AW,TW[_]),children:[U.jsx(uW,{setLightningShockwavesRef:I}),U.jsx(UW,{setLightningBordersRef:f}),U.jsx(YW,{setLightningStrikesRef:P})]}):null},hW=x.PA((()=>{const W=rW.g(),y=n.useCallback((()=>{W.lightningRound.setIsBonusShootAnimating(!0)}),[W]),M=n.useCallback((y=>{W.lightningRound.finishBonusShoot(y.id),W.lightningRound.setIsBonusShootAnimating(!1)}),[W]),i=n.useCallback((y=>{W.sound.playSound(y)}),[W]),x={isActive:W.lightningRound.isActive,corners:W.references.lightningGridCorners,getBetSpot:W.references.getBetSpotReference,gameDimensions:W.abstractGame.values.gameDimensions,bonusShoots:W.lightningRound.bonusShoots,onBonusShootStart:y,onBonusShootReady:M,betSpotNumberTextRefs:W.references.betSpotNumberTextReferences,betSpotBonusBackgroundRefs:W.references.betSpotBonusBackgroundReferences,displayBonusDelay:W.settings.displayBonusDelay,getBetSpotReference:W.references.getBetSpotReference,playSound:i,chasersEnabled:W.ui.bettingGrid.chasersEnabled,isClassicLayout:W.device.isClassicLayout,isChaserAnimating:W.ui.bettingGrid.isChaserAnimating,layout:W.device.componentLayout,isPageReady:W.abstractGame.isPageReady,isInFullscreen:W.abstractGame.values.isInFullscreen};return U.jsx(OW,{...x})}))},215038:(W,y,M)=>{M.d(y,{x:()=>e});var U=M(64922),i=M(525620),x=M(797238),n=M(481522),k=M(980733),g=M(421645);const u=W=>{const{isVisible:y}=W;return x.R(y,300)?U.jsx(n.M,{label:g.X.PlaceYourBets,visible:y}):null},e=i.PA((()=>{const W={isVisible:k.g().ui.placeYourBets.isVisible};return U.jsx(u,{...W})}))},128546:(W,y,M)=>{M.d(y,{d:()=>k});var U=M(64922),i=M(699695),x=M(377810);const n="image--f34bc",k=x.memo((({setRef:W,src:y,spriteClass:M,spriteStyle:k})=>{const[g,u]=x.useState(null);return x.useEffect((()=>{W(g)}),[g,W]),x.useEffect((()=>()=>{W(null)}),[W]),U.jsx("div",{ref:u,style:{...k,backgroundImage:`url(${y})`},className:i.A(n,M)})}))},958551:(W,y,M)=>{M.d(y,{K:()=>_});var U=M(64922),i=M(699695),x=M(377810);const n=`statistics-container`;var k=M(234341),g=M(315049),u=M(769413),e=M(276111);const l=.25,G=.35;function Y(W){const{delay:y,item:M}=W,U=k.M();return U.sequence(u.M({}).delay(y)),U.parallel([u.M(M).animateTo({x:0},l,e.WD),u.M(M).animateTo({scale:.75},.25*G,e.WD).animateTo({scale:1},.75*G,e.WD)]),U}const c=.06;function D(W){const{index:y,delay:M,items:U,onInsertRowAnimationReady:i}=W,x=k.M();x.sequence(u.M({}).delay(M));const n=[];for(let W=0;W<U.length;W++){const y=U[W];n.push(Y({item:y,delay:W*c}))}return x.parallel(n),x.callback((()=>null==i?void 0:i(y))),x}var r=M(196758),A=M(341360);class T extends A.a{willApply(W){if(this.x<0){let y=`translate(calc(${this.x}% + var(--cellSpacing) * ${this.x/100}), 0)`;y+=` scale(${this.scale})`,this.forceHardwareAcceleration&&(y+=" translateZ(0px)"),W.style.transform=y}else W.style.transform=""}}var O=M(277082);const h="gridItem--58d9d",S="hidden--5252e",o=W=>{const{index:y,item:M,visible:n,highlight:k,bottomMultipliers:g,setContainerRef:u}=W,e=x.useRef(null);x.useEffect((()=>{e.current?u(y,e.current):u(y,null)}),[y,u]);const l=x.useCallback((W=>{if(W){const M=new T(W);e.current=M,u(y,M)}else e.current=null,u(y,null)}),[u,y]);return U.jsx("div",{className:i.A(h,{[S]:!n}),ref:l,children:M&&U.jsx(O.LightningStormStatisticsCell,{withFrame:k,result:M,bottomMultipliers:g})})},d="container--23d17",q="mobile--f85f7",s="grid--e0734",N="willAnimateInsert--27fa1",_=W=>{const{statistics:y,rowCount:M,visibleRowCount:u=M,columnCount:e,isMobile:l,bottomMultipliers:G,animateNewItems:Y=!1,onInsertRowAnimationReady:A}=W,T=Math.min(M,Math.ceil(y.data.length/e)),O=x.useRef([]),h=x.useCallback(((W,y)=>{y?y!==O.current[W]&&(O.current[W]=y):delete O.current[W]}),[]);x.useEffect((()=>{O.current.length=0}),[T,e]),function(W){const{rowCount:y,columnCount:M,statistics:U,itemRefs:i,animate:n,onInsertRowAnimationReady:u}=W,e=x.useRef(),l=x.useRef({action:r.I5.Insert,data:[]});x.useLayoutEffect((()=>{const W=y*(M+1),x=0!==l.current.data.length&&l.current!==U,G=n&&U.action===r.I5.Insert;if(l.current=U,i.current.length!==W||!G||!x){i.current.forEach((W=>{W.x=0}));for(let W=0;W<y;W++)null==u||u(W);return}i.current.forEach((W=>{W.x=-100}));const Y=k.M(),A=[],T=M+1;for(let W=0;W<y;W++){const y=W*T,U=i.current.slice(y,y+T);A.push(D({index:W,items:U,delay:W*c*M,onInsertRowAnimationReady:u}))}return Y.parallel(A),e.current={timeline:Y,dispose:g.l({anim:Y})},()=>{var W,y;null===(W=e.current)||void 0===W||W.timeline.fastForward(),null===(y=e.current)||void 0===y||y.dispose(),e.current=void 0}}),[y,M,n,i,u,U])}({rowCount:T,columnCount:e,statistics:y,itemRefs:O,animate:Y,onInsertRowAnimationReady:A});const S=[];for(let W=0;W<T;W++){const M=W*e,i=Y?M+e+1:M+e,x=u>W;for(let n=M;n<i;n++){const M=n+(Y?W:0),k=y.data.length>n?y.data[n]:void 0,g=0===W&&0===n;let u;u=k?Y&&n+1===i?`${k.id}-fake`:k.id:`${M}`,S.push(U.jsx(o,{index:M,highlight:g,item:k,visible:x,bottomMultipliers:G,setContainerRef:h},u))}}return U.jsx("div",{className:i.A(d,{[q]:l}),"data-role":n,style:{"--columnCount":e,"--rowCount":T},children:U.jsx("div",{className:i.A(s,{[N]:Y}),children:S})})}},481522:(W,y,M)=>{M.d(y,{M:()=>D});var U=M(64922),i=M(525620),x=M(377810),n=M(346160),k=M(980733),g=M(699695);const u="overlayStatus--ad1a9",e="hidden--5fe23",l="gradient--957d4",G="phone--a073c",Y=({hasGradient:W=!0,hidden:y=!1,isPhone:M=!1,children:i})=>U.jsx("div",{className:g.A(u,{[l]:W,[e]:y,[G]:M}),"data-role":"status-text",children:i});Y.displayName="OverlayStatus";const c=W=>{const{isPhone:y,visible:M,visibleDelay:i,label:k,hasGradient:g=!0}=W,[u,e]=x.useState(!(i>0)&&M),[l,G]=x.useState(k);return x.useEffect((()=>{if(i>0&&M){const W=window.setTimeout((()=>{e(M)}),i);return()=>window.clearTimeout(W)}e(M)}),[M,i]),x.useEffect((()=>{u&&G(k)}),[k,u]),U.jsx(Y,{isPhone:y,hidden:!u,hasGradient:g,children:n.Tl(l)})},D=i.PA((W=>{const y=k.g(),M={...W,visibleDelay:y.ui.statusMessage.visibleDelay,isPhone:y.device.isPhone};return U.jsx(c,{...M})}))},899872:(W,y,M)=>{M.d(y,{i:()=>UM});var U=M(64922),i=M(525620);const x="storm-bonus-container";var n=M(699695),k=M(377810),g=M(234341),u=M(315049),e=M(769413);function l(W,y){W.element.style.setProperty("--maskTop",y.toString())}function G(W,y){W.element.style.setProperty("--maskBottom",y.toString())}function Y(W){const y=100;l(W,100),G(W,y)}function c(W){const{element:y,duration:M,easing:U}=W,i={top:100,bottom:100};return e.M(i).animateTo({top:0,bottom:100},M,U,(()=>{l(y,i.top),G(y,i.bottom)}))}function D(W){const{element:y,duration:M,easing:U}=W,i={top:0,bottom:100};return e.M(i).animateTo({top:0,bottom:0},M,U,(()=>{l(y,i.top),G(y,i.bottom)}))}var r=M(78915);function A(W){const{box:y,selectedBox:M,frame:U,shadow:i,selectedGradient:x,gradient:n,zap:k,arrow:g,container:u}=W;u.scale=1,y.container.scale=1,y.lightSweep.y=100,Y(y.container),y.number.opacity=0,y.stats.opacity=0,U.opacity=0,i.opacity=0,x.opacity=0,n.opacity=0,M.number.opacity=0,M.fill.opacity=0,y.fill.opacity=0,y.highlight.opacity=0,y.hover.opacity=0,k.opacity=0,y.emboss.opacity=0,y.number.brightness=0,y.number.contrast=0,g.opacity=0,y.container.brightness=0,y.container.contrast=0}var T=M(276111),O=M(625915),h=M(150702);const S=JSON.parse('{"frames":{"frame_000":{"x":0,"y":0,"width":171,"height":157},"frame_001":{"x":0,"y":157,"width":171,"height":157},"frame_002":{"x":171,"y":0,"width":171,"height":157},"frame_003":{"x":171,"y":157,"width":171,"height":157},"frame_004":{"x":0,"y":314,"width":171,"height":157},"frame_005":{"x":342,"y":0,"width":171,"height":157},"frame_006":{"x":171,"y":314,"width":171,"height":157},"frame_007":{"x":342,"y":157,"width":171,"height":157},"frame_008":{"x":342,"y":314,"width":171,"height":157},"frame_009":{"x":0,"y":471,"width":171,"height":157},"frame_010":{"x":171,"y":471,"width":171,"height":157},"frame_011":{"x":513,"y":0,"width":171,"height":157},"frame_012":{"x":513,"y":157,"width":171,"height":157},"frame_013":{"x":342,"y":471,"width":171,"height":157},"frame_014":{"x":513,"y":314,"width":171,"height":157},"frame_015":{"x":0,"y":628,"width":171,"height":157},"frame_016":{"x":171,"y":628,"width":171,"height":157},"frame_017":{"x":513,"y":471,"width":171,"height":157},"frame_018":{"x":342,"y":628,"width":171,"height":157},"frame_019":{"x":513,"y":628,"width":171,"height":157}},"meta":{"size":{"height":785,"width":684}}}'),o=[r.LS.First,r.LS.Second,r.LS.Third],d=h.S(S),q=1;var s=M(164956);function N(W){return O.$(s.Gn({element:W,duration:d.length/s.J_,frames:d,automaticallyHide:!1,automaticallyShow:!1}))}const _=0,p=.033,b=.1,m=.166,z=.3,K=.333,P=3,R=3.033,I=3.066,E=3.3;function Z(W){const y=()=>{W.opacity=1},M=()=>{W.opacity=0};return e.M(W).delay(p-_).callback(y).delay(b-p).callback(M).delay(m-b).callback(y).delay(z-m).callback(M).delay(K-z).callback(y).delay(P-K).callback(M).delay(R-P).callback(y).delay(I-R).callback(M)}const f=.1,V=0,$=.333,a=.667,H=1;function B(W){const{ref:y,delay:M}=W,{box:U,frame:i,shadow:x}=y;return g.M().callback((()=>{U.number.opacity=0,U.stats.opacity=0,i.opacity=0,x.opacity=0,U.container.scale=.85,U.lightSweep.y=70,U.fill.opacity=1,U.highlight.opacity=q,Y(U.container)})).delay(M).parallel([e.M(U.number).delay($-V).animateTo({opacity:1},a-$,T.ME),e.M(U.stats).delay($-V).animateTo({opacity:1},a-$,T.ME),e.M(U.container).animateTo({scale:1},H-V,T.ME),e.M(i).delay($-V).animateTo({opacity:1},a-$,T.ME),e.M(x).animateTo({opacity:1},H-V,T.ME),c({element:U.container,duration:H-V,easing:T.ME}),e.M(U.lightSweep).animateTo({y:0},H-V,T.ME).callback((()=>{U.lightSweep.y=-80}))])}const v=0,L=.333,X=1;function w(W){const{box:y,shadow:M,selectedBox:U}=W;return g.M().callback((()=>{U.number.opacity=0,U.fill.opacity=0,y.number.opacity=1,y.stats.opacity=1,y.highlight.opacity=q,M.opacity=1,function(W){const y=100;l(W,0),G(W,y)}(y.container),y.lightSweep.y=0})).parallel([e.M(y.number).animateTo({opacity:0},L-v),e.M(y.stats).animateTo({opacity:0},L-v),e.M(y.highlight).animateTo({opacity:0},L-v),e.M(M).animateTo({opacity:0},X-v),D({element:y.container,duration:X-v}),e.M(y.lightSweep).animateTo({y:-80},X-v+.2*(X-v))])}const F=0,t=.1,J=.133,j=.167,C=.2,Q=.267,WW=.367,yW=.467;function MW(W){const{box:y,selectedBox:M,shadow:U,selectedGradient:i,zap:x}=W;return g.M().callback((()=>{M.number.opacity=0,y.number.opacity=1,y.stats.opacity=1,y.highlight.opacity=q,y.container.brightness=0,y.container.scale=1.12,y.emboss.opacity=0,U.opacity=1,i.opacity=0,x.opacity=0})).parallel([N(x),e.M(y.number).animateTo({opacity:0},j-F,T.ME),e.M(y.stats).animateTo({opacity:0},j-F,T.ME),e.M(M.number).delay(j-F).animateTo({opacity:1},yW-j,T.ME),e.M(y.highlight).animateTo({opacity:0},j-F,T.ME),e.M(M.fill).animateTo({opacity:1},yW-F,T.ME),e.M(y.fill).animateTo({opacity:0},yW-F,T.ME),e.M(y.container).animateTo({brightness:1.5},j-F,T.ME).animateTo({brightness:0},yW-j,T.ME),e.M(y.container).animateTo({scale:.85},j-F,T.ME).animateTo({scale:1.05},Q-j,T.ME).animateTo({scale:.99},WW-Q,T.ME).animateTo({scale:1},yW-WW,T.ME),e.M(y.emboss).animateTo({opacity:1},j-F,T.ME).animateTo({opacity:0},yW-j,T.ME),e.M(U).animateTo({opacity:0},WW-F,T.ME),e.M(i).animateTo({opacity:1},j-F,T.ME).animateTo({opacity:0},yW-j,T.ME),UW(x)])}function UW(W){const y=()=>{W.opacity=1},M=()=>{W.opacity=0};return e.M(W).delay(t-F).callback(y).delay(J-t).callback(M).delay(j-J).callback(y).delay(C-j).callback(M).delay(Q-C).callback(y).delay(WW-Q).callback(M)}const iW=0,xW=.667;var nW=M(219071);function kW(W){const{stage:y,refs:M,selected:U}=W;switch(y.type){case nW.T.None:return g.M().callback((()=>{(function(W){const{refs:y}=W,M=y[r.LS.First],U=y[r.LS.Second],i=y[r.LS.Third];A(M),A(U),A(i)})({refs:M})}));case nW.T.Intro:return function(W){const{refs:y}=W,M=y[r.LS.First],U=y[r.LS.Second],i=y[r.LS.Third],x=g.M();return x.parallel([B({ref:M,delay:0}),B({ref:U,delay:f}),B({ref:i,delay:2*f})]),x}({refs:M});case nW.T.Idle:return g.M();case nW.T.Selected:return U?function(W){const{refs:y,selected:M}=W,U=g.M(),i=[];for(const W of o)W===M?i.push(MW(y[W])):i.push(w(y[W]));return U.parallel(i),U}({refs:M,selected:U}):g.M();case nW.T.SpotLight:return U?function(W){const{refs:y,battery:M,selected:U}=W;return g.M().sequence(function(W){const{ref:y,selected:M}=W,{selectedGradient:U,gradient:i,arrow:x}=y,n=M?U:i;return g.M().callback((()=>{U.opacity=0,i.opacity=0})).parallel([e.M(x).animateTo({opacity:1},xW-iW,T.ME),e.M(n).animateTo({opacity:1},xW-iW,T.ME)])}({ref:y[M],selected:M===U}))}({refs:M,battery:y.battery,selected:U}):g.M();case nW.T.Charge:return U?function(W){const{refs:y,battery:M,selected:U}=W;return g.M().sequence(function(W){const{ref:y,selected:M}=W,{selectedGradient:U,gradient:i,arrow:x,frame:n,zap:k}=y,u=M?U:i;return g.M().callback((()=>{u.opacity=1,n.opacity=1,k.opacity=1})).parallel([N(k),Z(k),e.M(x).delay(P-_).animateTo({opacity:0},E-P,T.ME),e.M(u).delay(P-_).animateTo({opacity:0},E-P,T.ME),e.M(n).delay(P-_).animateTo({opacity:0},E-P,T.ME)])}({ref:y[M],selected:M===U}))}({refs:M,battery:y.battery,selected:U}):g.M();case nW.T.Outro:return g.M()}return g.M()}function gW(W){const{stage:y,refs:M,selected:U}=W,i=[],x=nW.X.findIndex((W=>y.type===nW.T.SpotLight||y.type===nW.T.Charge?W.type===y.type&&W.battery===y.battery:W.type===y.type));if(x<0)return g.M();for(let W=0;W<x;W++){const y=nW.X[W];i.push(kW({stage:y,refs:M,selected:U}))}return g.M().parallel(i)}var uW=M(73682);const eW=0,lW=.133;var GW=M(128546),YW=M(855500);class cW extends YW.s{constructor(){super(...arguments),this.currentBrightness=0,this.currentContrast=0}get brightness(){return this.currentBrightness}set brightness(W){this.currentBrightness=Math.max(W,0),this.apply()}get contrast(){return this.currentContrast}set contrast(W){this.currentContrast=Math.max(W,0),this.apply()}willApply(W){super.willApply(W),W.style.filter=this.createFilters()}createFilters(){let W="";return this.brightness>0&&(W+=` brightness(${1+this.brightness})`),this.contrast>0&&(W+=` contrast(${1+this.contrast})`),W}}var DW=M(346160),rW=M(876759);const AW="storm-bonus-decision-label";var TW=M(617401),OW=M(980733),hW=M(421645),SW=M(803903),oW=M(835132),dW=M(277082),qW=M(454342);const sW="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTEwIiB2aWV3Qm94PSIwIDAgMTIwIDExMCIgZmlsbD0ibm9uZSI+PGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjBfaWlfMTE4MzFfODQyNTIpIj48cGF0aCBmaWxsPSIjNDg0ODQ4IiBmaWxsLW9wYWNpdHk9Ii4yIiBkPSJNMCAxMDEuNzI3VjBoMTIwdjEwMS43MjdMMTExLjc0NyAxMTBIOC4yNTNMMCAxMDEuNzI3WiIvPjwvZz48ZGVmcz48ZmlsdGVyIGlkPSJmaWx0ZXIwX2lpXzExODMxXzg0MjUyIiB3aWR0aD0iMTM0LjgiIGhlaWdodD0iMTI0LjgiIHg9Ii04IiB5PSItOCIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiPjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+PGZlQmxlbmQgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9InNoYXBlIi8+PGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9ImhhcmRBbHBoYSIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIvPjxmZU9mZnNldCBkeD0iOCIgZHk9IjgiLz48ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzLjQiLz48ZmVDb21wb3NpdGUgaW4yPSJoYXJkQWxwaGEiIGsyPSItMSIgazM9IjEiIG9wZXJhdG9yPSJhcml0aG1ldGljIi8+PGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwLjUgMCIvPjxmZUJsZW5kIGluMj0ic2hhcGUiIHJlc3VsdD0iZWZmZWN0MV9pbm5lclNoYWRvd18xMTgzMV84NDI1MiIvPjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJoYXJkQWxwaGEiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiLz48ZmVPZmZzZXQgZHg9Ii04IiBkeT0iLTgiLz48ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSI0LjUiLz48ZmVDb21wb3NpdGUgaW4yPSJoYXJkQWxwaGEiIGsyPSItMSIgazM9IjEiIG9wZXJhdG9yPSJhcml0aG1ldGljIi8+PGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAuODIgMCAwIDAgMCAwLjgxNiAwIDAgMCAwIDAuNzk2IDAgMCAwIDAuMjUgMCIvPjxmZUJsZW5kIGluMj0iZWZmZWN0MV9pbm5lclNoYWRvd18xMTgzMV84NDI1MiIgcmVzdWx0PSJlZmZlY3QyX2lubmVyU2hhZG93XzExODMxXzg0MjUyIi8+PC9maWx0ZXI+PC9kZWZzPjwvc3ZnPgo=",NW="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTEwIiB2aWV3Qm94PSIwIDAgMTIwIDExMCIgZmlsbD0ibm9uZSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PHBhdGggZmlsbD0idXJsKCNwYWludDBfcmFkaWFsXzBfMykiIGQ9Ik0wIDEwMS43MjdWMGgxMjB2MTAxLjcyN0wxMTEuNzQ3IDExMEg4LjI1M0wwIDEwMS43MjdaIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI3BhaW50MV9saW5lYXJfMF8zKSIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNOC42NjggMTA5IDEgMTAxLjMxM1YxaDExOHYxMDAuMzEzTDExMS4zMzIgMTA5SDguNjY4WiIvPjxkZWZzPjxyYWRpYWxHcmFkaWVudCBpZD0icGFpbnQwX3JhZGlhbF8wXzMiIGN4PSIwIiBjeT0iMCIgcj0iMSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCg2OC45MDkgMCAwIDQyLjU5IDYwLjA3OCA2NykiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjRjEzMTI0Ii8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNTgwQzA1Ii8+PC9yYWRpYWxHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MV9saW5lYXJfMF8zIiB4MT0iNjAiIHgyPSI2MCIgeTE9IjExNy4wNjYiIHkyPSIxOC4wNiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiNGRkNBODQiLz48c3RvcCBvZmZzZXQ9Ii4xOCIgc3RvcC1jb2xvcj0iIzk2NkY0MCIvPjxzdG9wIG9mZnNldD0iLjUwNiIgc3RvcC1jb2xvcj0iI0JEOTU1RCIvPjxzdG9wIG9mZnNldD0iLjgyNyIgc3RvcC1jb2xvcj0iIzk2NkY0MCIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0ZGQ0E4NCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjwvc3ZnPgo=",_W="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMzUiIGhlaWdodD0iMTI0IiB2aWV3Qm94PSIxMzUgMTI0IiBmaWxsPSJub25lIj48cGF0aCBmaWxsPSIjRkZFOThFIiBmaWxsLW9wYWNpdHk9Ii4xNSIgZD0iTTAgMTE0LjEwMVYuMDAxaDY3LjI5OEwxMzQuNTk3IDB2MTE0LjEwMWwtOS4yNTggOS4yNzlIOS4yNTdMMCAxMTQuMTAxWiIvPjwvc3ZnPgo=",pW="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHdpZHRoPSIyMSIgaGVpZ2h0PSIzMSIgdmlld0JveD0iMCAwIDIxIDMxIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTYuOTcxIDMuMjAzSDUuMzg2Yy0uODEzIDIuNjIzLTEuODMgOC44MTMtNC4yNjkgMTQuNjg4aDkuNzU3TDMuNTU2IDMwLjQ4aDEuODk3TDIwLjYzIDEzLjY5M0g5LjY1NGw3LjMxNy0xMC40OXoiLz48cGF0aCBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMTEzNDBfODI3ODgpIiBkPSJNMTUuODU0Ljk2OUg0LjI2OEMzLjQ1NSAzLjU5MiAyLjQ0IDkuNzggMCAxNS42NTdoOS43NTZMMi40NCAyOC4yNDVoMS44OTdMMTkuNTEzIDExLjQ2SDguNTM3TDE1Ljg1NC45Njl6Ii8+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzExMzQwXzgyNzg4IiB4MT0iOS43NTYiIHgyPSI5Ljc1NiIgeTE9IjYuMTE1IiB5Mj0iMjIuODQyIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIuMDAxIiBzdG9wLWNvbG9yPSIjRkZGNEE4Ii8+PHN0b3Agb2Zmc2V0PSIuMzQ2IiBzdG9wLWNvbG9yPSIjRkZGNEE4Ii8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjQjc5RjRGIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PC9zdmc+Cg==",bW="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOTciIGhlaWdodD0iMTI4IiB2aWV3Qm94PSIwIDAgMTk3IDEyOCIgZmlsbD0ibm9uZSI+PGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjBfZl8xMTY5NF82MjkwNykiIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTpwbHVzLWxpZ2h0ZXIiPjxwYXRoIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iLjkiIGQ9Ik0xNSAxNWgxNjYuNXY0MGgtMThsLTE0IDU3LjUtMTUtNTcuNUgxNVYxNVoiLz48L2c+PGRlZnM+PGZpbHRlciBpZD0iZmlsdGVyMF9mXzExNjk0XzYyOTA3IiB3aWR0aD0iMTk2LjUiIGhlaWdodD0iMTI3LjUiIHg9IjAiIHk9IjAiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIwIiByZXN1bHQ9IkJhY2tncm91bmRJbWFnZUZpeCIvPjxmZUJsZW5kIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJzaGFwZSIvPjxmZUdhdXNzaWFuQmx1ciByZXN1bHQ9ImVmZmVjdDFfZm9yZWdyb3VuZEJsdXJfMTE2OTRfNjI5MDciIHN0ZERldmlhdGlvbj0iNy41Ii8+PC9maWx0ZXI+PC9kZWZzPjwvc3ZnPgo=",mW="box--4d4a9",zW="background--d1e09",KW="highlight--0b7a7",PW="emboss--da073",RW="hover--cdfce",IW="contentWrapper--dff8a",EW="decisionLabel--152ac",ZW="decisionLabelText--48ab5",fW="lightningIcon--6a2a3",VW="statsContainer--b1c4c",$W="playerIcon--6c6bb",aW="statsLabel--294b4",HW="sweepContainer--28c75",BW="topSweep--05d43",vW="bottomSweep--11b37",LW="isVisualTest--6b504",XW={[TW._.MobilePortrait]:"portrait--2ed87",[TW._.DesktopClassic]:"classic--a3ad0",[TW._.Tablet]:"tablet--37972"},wW={[r.LS.First]:hW.X.First,[r.LS.Second]:hW.X.Second,[r.LS.Third]:hW.X.Third},FW=W=>{const{strikeNumber:y,onSelect:M,setRef:i,onHover:x,onHoverOut:g,strikeStats:u,layout:e}=W,[l,G]=k.useState(null),[Y,c]=k.useState(null),[D,r]=k.useState(null),[A,T]=k.useState(null),[O,h]=k.useState(null),[S,o]=k.useState(null),[d,q]=k.useState(null),[s,N]=k.useState(null);k.useEffect((()=>{i(l&&Y&&D&&A&&O&&S&&d&&s?{number:new cW(l),emboss:new cW(Y,{translateOrigin:SW.t.Center}),fill:new cW(D),highlight:new cW(A,{translateOrigin:SW.t.Center}),hover:new cW(O,{translateOrigin:SW.t.Center}),container:new cW(S),lightSweep:new cW(d,{translateOrigin:SW.t.Center,translateUnits:"%"}),stats:new cW(s)}:void 0)}),[l,Y,D,A,O,S,d,s,i]),k.useEffect((()=>()=>{i(void 0)}),[i]);const _=k.useCallback((()=>{x(y)}),[x,y]),p=k.useCallback((()=>{g(y)}),[g,y]);return U.jsxs("div",{className:n.A(mW,XW[e]),ref:o,onClick:M,onMouseEnter:_,onMouseLeave:p,children:[U.jsx(oW.w,{className:n.A(zW,{[LW]:rW.I()}),src:NW,ref:r}),U.jsx("div",{className:KW,ref:T}),U.jsx(oW.w,{className:PW,src:sW,ref:c}),U.jsx(oW.w,{className:RW,src:_W,ref:h}),U.jsxs("div",{className:n.A(IW,{[LW]:rW.I()}),children:[U.jsxs("div",{className:EW,"data-role":AW,ref:G,children:[U.jsx(dW.LightningStormGradientStrokeText,{className:ZW,children:U.jsx("div",{dangerouslySetInnerHTML:{__html:DW.Tl(wW[y])}})}),U.jsx(oW.w,{src:pW,className:fW})]}),U.jsxs("div",{className:VW,ref:N,children:[U.jsx(qW.m,{className:$W}),U.jsx("div",{className:aW,children:`${u}%`})]})]}),U.jsxs("div",{className:HW,ref:q,children:[U.jsx(oW.w,{className:BW,src:bW}),U.jsx(oW.w,{className:vW,src:bW})]})]})},tW=i.PA((W=>{const y=OW.g(),M={...W,strikeStats:y.stormBonus.statistics.offers[W.strikeNumber],layout:y.device.componentLayout};return U.jsx(FW,{...M})})),JW="storm-bonus-decision-strike-label",jW="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjExMCIgdmlld0JveD0iMCAwIDEyMCAxMTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgMTAxLjQxOFYwaDEyMHYxMDEuNDE4TDExMS43NDcgMTEwSDguMjUzTDAgMTAxLjQxOHoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8xMDhfNTI2NikiLz48cGF0aCBkPSJNOC42MjQgMTA5LjEwOGwtNy43MzItNy43NVYuODkyaDExOC4yMTZ2MTAwLjQ2NmwtNy43MzIgNy43NUg4LjYyNHoiIHN0cm9rZT0idXJsKCNwYWludDFfbGluZWFyXzEwOF81MjY2KSIgc3Ryb2tlLXdpZHRoPSIxLjc4NCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl8xMDhfNTI2NiIgeDE9IjYwIiB5MT0iMTA3Ljc3OSIgeDI9IjYwIiB5Mj0iMi4yMjEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjRTUyMTA2Ii8+PHN0b3Agb2Zmc2V0PSIuNTA2IiBzdG9wLWNvbG9yPSIjQzIxRDA2IiBzdG9wLW9wYWNpdHk9Ii44Ii8+PHN0b3Agb2Zmc2V0PSIuNzUzIiBzdG9wLWNvbG9yPSIjNjkxMjA2IiBzdG9wLW9wYWNpdHk9Ii4yIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNjkxMjA2IiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhcl8xMDhfNTI2NiIgeDE9IjYwIiB5MT0iMTA5Ljk2OCIgeDI9IjYwIiB5Mj0iMjQuMDMyIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iIzk2NkY0MCIvPjxzdG9wIG9mZnNldD0iLjQxOSIgc3RvcC1jb2xvcj0iI0YwQkQ3QSIvPjxzdG9wIG9mZnNldD0iLjk3NSIgc3RvcC1jb2xvcj0iI0YwQkQ3QSIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PC9zdmc+Cg==",CW="selectedBox--1282d",QW="background--0496b",Wy="strikeLabel--a54c0",yy="classicLayout--ef9a3",My="portraitLayout--755a5",Uy="strikeLabelText--dacdc",iy="lightningIcon--5acea",xy={[r.LS.First]:1,[r.LS.Second]:2,[r.LS.Third]:3},ny=W=>{const{strikeNumber:y,setRef:M,layout:i}=W,[x,g]=k.useState(null),[u,e]=k.useState(null);return k.useEffect((()=>{M(x&&u?{fill:new cW(x),number:new cW(u)}:void 0)}),[x,u,M]),k.useEffect((()=>()=>{M(void 0)}),[M]),U.jsxs("div",{className:n.A(CW,{[yy]:i===TW._.DesktopClassic,[My]:i===TW._.MobilePortrait}),children:[U.jsx(oW.w,{className:QW,src:jW,ref:g}),U.jsxs("div",{className:Wy,"data-role":JW,ref:e,children:[U.jsx("span",{className:Uy,children:U.jsx(dW.LightningStormGradientStrokeText,{children:xy[y]})}),U.jsx(oW.w,{className:iy,src:pW})]})]})},ky=W=>{const y={...W,layout:OW.g().device.componentLayout};return U.jsx(ny,{...y})},gy="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyOCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iIDAgMCAyOCAxNCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzExOTQ2Xzg0NzIwKSIgZD0iTTEzLjU3MyAwIDAgMTRoMjcuMTQ2TDEzLjU3MyAwWiIvPjxwYXRoIGZpbGw9IiNGRURCQTkiIGQ9Ik0xMy41NzMgMCAwIDE0aDI3LjE0NkwxMy41NzMgMFoiLz48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMTE5NDZfODQ3MjAiIHgxPSItNzcuNzE2IiB4Mj0iMTA0LjgxMiIgeTE9Ii0xNy42NzEiIHkyPSItMTcuNjcxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI0JEOTU1RCIvPjxzdG9wIG9mZnNldD0iLjI0NyIgc3RvcC1jb2xvcj0iIzk2NkY0MCIvPjxzdG9wIG9mZnNldD0iLjUwMSIgc3RvcC1jb2xvcj0iI0YwQkQ3QSIvPjxzdG9wIG9mZnNldD0iLjc4NSIgc3RvcC1jb2xvcj0iI0MwOTM1QiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzk2NkY0MCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjwvc3ZnPgo=",uy="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTM0IiBoZWlnaHQ9IjEzNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMTM0IDEzNCI+PHBhdGggc3Ryb2tlPSJ1cmwoI3BhaW50MF9saW5lYXJfMTE4MjdfODQ0MTkpIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEuOCIgZD0iTS44NzUgOS45NDV2MTE0LjM2OWw4LjYgOC41OTloMTE1LjIwOGw4LjU5OS04LjU5OVY5Ljk0NSIvPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl8xMTgyN184NDQxOSIgeDE9IjY5LjI0OSIgeDI9IjY5LjI0OSIgeTE9IjkuNzc1IiB5Mj0iMTMyLjkxMyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiM5QTcyMzciIHN0b3Atb3BhY2l0eT0iMCIvPjxzdG9wIG9mZnNldD0iLjMzIiBzdG9wLWNvbG9yPSIjQjM5NDVFIiBzdG9wLW9wYWNpdHk9Ii42Ii8+PHN0b3Agb2Zmc2V0PSIuNTEiIHN0b3AtY29sb3I9IiNDMEE3NzMiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM2MjQzMTgiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48L3N2Zz4K",ey="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMzQiIGhlaWdodD0iMTM0IiBmaWxsPSJub25lIj48cGF0aCBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMTE4MjdfODQ0MTIpIiBkPSJNMTAuNSAxMzRMMiAxMjUuNVYyM2gxMzJ2MTAyLjVsLTguNSA4LjVoLTExNXoiLz48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMTE4MjdfODQ0MTIiIHgxPSI2OCIgeTE9IjIzIiB4Mj0iNjgiIHkyPSIxMzUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjRDNBNDY3IiBzdG9wLW9wYWNpdHk9IjAiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGRkM3NTYiIHN0b3Atb3BhY2l0eT0iLjUiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48L3N2Zz4=",ly="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMzQiIGhlaWdodD0iMTM0IiBmaWxsPSJub25lIj48cGF0aCBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMTE4MjdfODQzOTkpIiBkPSJNMTAuNSAxMzRMMiAxMjUuNVYyM2gxMzJ2MTAyLjVsLTguNSA4LjVoLTExNXoiLz48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMTE4MjdfODQzOTkiIHgxPSI2OCIgeTE9IjIzIiB4Mj0iNjgiIHkyPSIxMzUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjRDNBNDY3IiBzdG9wLW9wYWNpdHk9IjAiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMyOTVBODgiIHN0b3Atb3BhY2l0eT0iLjUiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48L3N2Zz4=",Gy="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNjQiIGhlaWdodD0iMTUxIiB2aWV3Qm94PSIwIDAgMTY0IDE1MSIgZmlsbD0ibm9uZSI+PGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjBfZl8xMTgyN184NDQ2MikiIG9wYWNpdHk9Ii44OCI+PGVsbGlwc2UgY3g9IjgxLjkwNSIgY3k9Ijc1Ljc2OSIgZmlsbD0iIzAwMCIgcng9IjUzLjkwNSIgcnk9IjQ3Ljc2OSIvPjwvZz48ZGVmcz48ZmlsdGVyIGlkPSJmaWx0ZXIwX2ZfMTE4MjdfODQ0NjIiIHdpZHRoPSIxNjIuMzY3IiBoZWlnaHQ9IjE1MC4wOTMiIHg9Ii43MjMiIHk9Ii43MjMiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIwIiByZXN1bHQ9IkJhY2tncm91bmRJbWFnZUZpeCIvPjxmZUJsZW5kIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJzaGFwZSIvPjxmZUdhdXNzaWFuQmx1ciByZXN1bHQ9ImVmZmVjdDFfZm9yZWdyb3VuZEJsdXJfMTE4MjdfODQ0NjIiIHN0ZERldmlhdGlvbj0iMTMuNjM5Ii8+PC9maWx0ZXI+PC9kZWZzPjwvc3ZnPgo=",Yy=M.p+"images/zap.4586c27b.webp",cy="decisionBox--94669",Dy="shadow--159a1",ry="frame--26942",Ay="gradient--794f6",Ty="selectedGradient--83994",Oy="selectedBoxWrapper--de346",hy="boxWrapper--9c515",Sy="enabled--5eaee",oy="arrow--f7ba5",dy="zapSprite--5e2c9",qy=W=>{const{strikeNumber:y,onSelect:M,setRef:i,onHover:x,onHoverOut:g,style:u,enabled:e}=W,[l,G]=k.useState(null),[Y,c]=k.useState(null),[D,r]=k.useState(void 0),[A,T]=k.useState(null),[O,h]=k.useState(null),[S,o]=k.useState(null),[d,q]=k.useState(void 0),[s,N]=k.useState(null),[_,p]=k.useState(null);return k.useEffect((()=>{if(l&&Y&&D&&A&&O&&S&&d&&s&&_){const W=new cW(A);W.scale=0,i({arrow:new cW(l,{translateOrigin:SW.t.CenterTop}),gradient:new cW(Y,{translateOrigin:SW.t.CenterBottom}),box:D,selectedBox:d,container:W,frame:new cW(O),selectedGradient:new cW(S,{translateOrigin:SW.t.CenterBottom}),shadow:new cW(s,{translateOrigin:SW.t.CenterTop}),zap:new cW(_,{translateUnits:"%",translateOrigin:SW.t.CenterTop})})}else i(void 0)}),[l,Y,D,d,A,O,S,i,s,_]),k.useEffect((()=>()=>{i(void 0)}),[i]),U.jsxs("div",{className:cy,"data-role":`storm-bonus-decision-${y}`,style:u,ref:T,children:[U.jsx(oW.w,{className:Dy,src:Gy,ref:N}),U.jsx(oW.w,{className:Ay,src:ey,ref:c}),U.jsx(oW.w,{className:Ty,src:ly,ref:o}),U.jsx(oW.w,{className:ry,src:uy,ref:h}),U.jsx(GW.d,{setRef:p,src:Yy,spriteClass:dy}),U.jsx("div",{className:Oy,children:U.jsx(ky,{strikeNumber:y,setRef:q})}),U.jsx("div",{className:n.A(hy,{[Sy]:e}),children:U.jsx(tW,{onHover:x,onHoverOut:g,strikeNumber:y,onSelect:M,setRef:r})}),U.jsx(oW.w,{className:oy,src:gy,ref:G})]})};var sy=M(890023),Ny=M(757062),_y=M(460786),py=M(481522);const by="storm-bonus-decision-timer";var my=M(253796);const zy="stormBonusDecisionTimer--0a2fe",Ky="statusWrapper--3a893",Py="portrait--23eb4",Ry="timerWrapper--1e125",Iy=W=>{const{visible:y,totalTime:M,remainingTime:i,pulseStartTime:x,isTimerRunning:g,playSound:u,isPortrait:e}=W;return function(W){const{playSound:y,remainingTime:M,visible:U}=W,i=k.useMemo((()=>Math.ceil(M)),[M]);k.useEffect((()=>{i&&U&&y({event:my.PZ.LightningStormMakeDecision,args:[i]})}),[i,U,y])}({playSound:u,remainingTime:i,visible:y}),y?U.jsxs("div",{className:n.A(zy),"data-role":by,children:[U.jsx("div",{className:n.A(Ky,{[Py]:e}),children:U.jsx(py.M,{label:hW.X.StormBonusMakeDecision,visible:!0,hasGradient:!1})}),U.jsx("div",{className:Ry,children:U.jsx(_y.C,{totalTime:M,timeRemaining:i,running:g,pulseStartTime:x,hasLightning:!0})})]}):null},Ey=i.PA((()=>{const W=OW.g(),y=k.useCallback((y=>{W.sound.playSound(y)}),[W]),M={totalTime:W.stormBonus.decisionTotalTime,remainingTime:W.stormBonus.decisionTimeRemaining,pulseStartTime:Ny.rv(W.settings.makeDecisionClosingTime),isTimerRunning:W.ui.stormDecision.isTimerRunning,visible:W.ui.stormDecision.isTimerVisible,playSound:y,isPortrait:W.device.isPortrait};return U.jsx(Iy,{...M})})),Zy=1.6,fy=11.147,Vy=3,$y=10,ay={[TW._.Desktop]:150,[TW._.DesktopClassic]:150,[TW._.MobilePortrait]:120,[TW._.MobileLandscape]:120,[TW._.Tablet]:130};function Hy(W,y,M){return y?{height:`${1.2*M*Zy*fy}px`,width:`${1.2*M*Zy*fy}px`}:{height:`${W.h}px`,width:`${W.w}px`,left:`${W.x}px`,top:`${W.y}px`}}var By=M(924009),vy=M(521353),Ly=M(822381);const Xy="stormBonusDecision--cdd9e",wy="decisionBoxWrapper--73dc2",Fy="bottomWrapper--06cd4",ty="backgroundGradient--900d4",Jy="timerWrapper--e23a1",jy={[TW._.MobilePortrait]:"portrait--26354",[TW._.DesktopClassic]:"classic--4754f",[TW._.Tablet]:"tablet--72df9"},Cy={[TW._.MobilePortrait]:1,[TW._.MobileLandscape]:1,[TW._.Tablet]:1,[TW._.DesktopClassic]:1.2,[TW._.Desktop]:1.2},Qy=W=>{const{visible:y,layout:M,onSelect:i,logStormDecisionOffered:x,firstBoxRect:l,secondBoxRect:G,thirdBoxRect:Y,animationStage:c,onIntroReady:D,isDecisionTime:A,selectedOffer:O,isPageVisible:h,rootSize:S}=W,[o,d,q]=function(W){const[y,M,U]=sy.K(void 0),i=k.useRef(W);return i.current=W,!W&&U.current&&M(void 0),[y,k.useCallback((W=>{i.current&&M(W)}),[M]),k.useCallback((W=>{U.current===W&&M(void 0)}),[U,M])]}(A),s=M===TW._.DesktopClassic,[N,_]=k.useState(void 0),[p,b]=k.useState(void 0),[m,z]=k.useState(void 0),[K,P]=k.useState(void 0),R=k.useRef({});k.useEffect((()=>{P(N&&p&&m?{[r.LS.First]:N,[r.LS.Second]:p,[r.LS.Third]:m}:void 0)}),[N,p,m]),k.useEffect((()=>()=>{P(void 0)}),[P]);const I=k.useCallback((()=>{i(r.LS.First)}),[i]),E=k.useCallback((()=>{i(r.LS.Second)}),[i]),Z=k.useCallback((()=>{i(r.LS.Third)}),[i]);k.useEffect((()=>{y&&x()}),[x,y]);const f=k.useMemo((()=>Hy(l,s,S)),[l,s,S]),V=k.useMemo((()=>Hy(G,s,S)),[G,s,S]),$=k.useMemo((()=>Hy(Y,s,S)),[Y,s,S]),a=k.useMemo((()=>function(W,y){return y===TW._.DesktopClassic?Zy:W.w/ay[y]}(l,M)),[l,M]),H=k.useMemo((()=>function(W,y){const M=y===TW._.MobilePortrait?$y:Vy;return W.y+W.h+W.h/M}(l,M)),[l,M]),B=A&&c.type===nW.T.Idle;return function(W){const{animationsRef:y,isPageVisible:M}=W;k.useEffect((()=>{for(const W of Object.keys(y.current))uW.VA(W,y.current)}),[M,y])}({animationsRef:R,isPageVisible:h,stage:c}),function(W){const{refs:y,stage:M,animationsRef:U}=W;k.useEffect((()=>{if(M.type!==nW.T.None||!y)return;const W=kW({stage:M,refs:y,selected:void 0}),i=u.l({anim:W});U.current[M.type]={dispose:i,timeline:W};const x=U.current;return()=>{uW.VA(nW.T.None,x)}}),[M,y,U])}({stage:c,refs:K,animationsRef:R}),function(W){const{stage:y,refs:M,onReady:U,animationsRef:i}=W,x=k.useRef(),n=k.useRef(void 0);k.useEffect((()=>{if(y.type!==nW.T.Intro)return void(n.current=y);if(!M)return;const W=!n.current,k=[];W&&k.push(gW({stage:y,refs:M,selected:void 0})),k.push(kW({stage:y,refs:M,selected:void 0}));const e=g.M().parallel(k).callback(U);x.current={timeline:e,dispose:u.l({anim:e})},W&&e.fastForward(),n.current=y,i.current[y.type]=x.current;const l=i.current;return()=>{uW.s1(x.current),x.current=void 0,uW.VA(nW.T.Intro,l)}}),[y,M,U,i])}({stage:c,refs:K,onReady:D,animationsRef:R}),function(W){const{stage:y,refs:M,hover:U,animationsRef:i}=W,x=k.useRef({[r.LS.First]:{in:void 0,out:void 0},[r.LS.Second]:{in:void 0,out:void 0},[r.LS.Third]:{in:void 0,out:void 0}}),n=k.useRef(void 0),l=k.useRef(void 0);k.useEffect((()=>{if(!M)return;const W=x.current,k=n.current;if(k&&k!==U){uW.a(W[k].in),uW.a(W[k].out);const U=function(W){const{ref:y}=W,{box:M}=y;return g.M().parallel([e.M(M.number).animateTo({brightness:0,contrast:0},lW-eW,T.ME),e.M(M.container).animateTo({scale:1},lW-eW,T.ME),e.M(M.hover).animateTo({opacity:0},lW-eW,T.ME)])}({ref:M[k]}),x=u.l({anim:U});W[k].out={timeline:U,dispose:x},i.current[y.type]={timeline:U,dispose:x},y.type!==nW.T.Idle&&(uW.s1(W[k].out),W[k].out=void 0),n.current=void 0}if(y.type===nW.T.Idle&&!l.current){const W=gW({stage:y,refs:M,selected:void 0});W.activate(),W.fastForward()}if(U&&y.type===nW.T.Idle){uW.a(W[U].in),uW.a(W[U].out);const x=function(W){const{ref:y}=W,{box:M}=y;return g.M().parallel([e.M(M.number).animateTo({brightness:.4,contrast:.4},lW-eW,T.ME),e.M(M.container).animateTo({scale:1.12},lW-eW,T.ME),e.M(M.hover).animateTo({opacity:1},lW-eW,T.ME)])}({ref:M[U]}),k=u.l({anim:x});W[U].in={timeline:x,dispose:k},n.current=U,i.current[y.type]={timeline:x,dispose:k}}l.current=y;const G=i.current;return()=>{if(y.type!==nW.T.Idle){const y=Object.values(W);for(const W of y)uW.a(W.in),uW.s1(W.out),W.in=void 0,W.out=void 0}uW.VA(y.type,G)}}),[y,M,U,i])}({stage:c,refs:K,hover:o,animationsRef:R}),function(W){const{stage:y,refs:M,selected:U,animationsRef:i}=W,x=k.useRef(void 0);k.useEffect((()=>{if(y.type!==nW.T.Selected)return void(x.current=y);if(!M||!U)return;const W=!x.current||x.current.type===nW.T.None,n=[];W&&n.push(gW({stage:y,refs:M,selected:U})),n.push(kW({stage:y,refs:M,selected:U}));const k=g.M().parallel(n),e=u.l({anim:k});i.current[y.type]={timeline:k,dispose:e},W&&k.fastForward(),x.current=y;const l=i.current;return()=>{k.fastForward(),e(),uW.VA(y.type,l)}}),[y,M,U,i])}({stage:c,refs:K,selected:O,animationsRef:R}),function(W){const{stage:y,refs:M,selected:U,animationsRef:i}=W,x=k.useRef({}),n=k.useRef(void 0);k.useEffect((()=>{if(y.type!==nW.T.SpotLight)return void(n.current=y);if(!M||!U)return;const W=!n.current||n.current.type===nW.T.None,k=[];W&&k.push(gW({stage:y,refs:M,selected:U})),k.push(kW({stage:y,refs:M,selected:U}));const e=x.current,l=g.M().parallel(k),G=u.l({anim:l});e[y.battery]={timeline:l,dispose:G},i.current[`${y.type}${y.battery}`]={timeline:l,dispose:G},W&&l.fastForward(),n.current=y;const Y=i.current;return()=>{if(y.type!==nW.T.SpotLight){const W=Object.values(e);for(const y of W)uW.s1(y);x.current={}}uW.VA(`${y.type}${y.battery}`,Y)}}),[y,M,U,i])}({stage:c,refs:K,selected:O,animationsRef:R}),function(W){const{stage:y,refs:M,selected:U,animationsRef:i}=W,x=k.useRef({}),n=k.useRef(void 0);k.useEffect((()=>{if(y.type!==nW.T.Charge)return void(n.current=y);if(y.type!==nW.T.Charge||!M)return;if(!M||!U)return;const W=!n.current||n.current.type===nW.T.None,k=[];W&&k.push(gW({stage:y,refs:M,selected:U})),k.push(kW({stage:y,refs:M,selected:U}));const e=x.current,l=g.M().parallel(k),G=u.l({anim:l});e[y.battery]={timeline:l,dispose:G},W&&l.fastForward(),i.current[`${y.type}${y.battery}`]={timeline:l,dispose:G},n.current=y;const Y=i.current;return()=>{if(y.type!==nW.T.Charge){const W=Object.values(e);for(const y of W)uW.s1(y);x.current={}}uW.VA(`${y.type}${y.battery}`,Y)}}),[y,M,U,i])}({stage:c,refs:K,selected:O,animationsRef:R}),U.jsxs("div",{className:ty,children:[U.jsx("div",{className:n.A(Xy,jy[M]),style:{top:`${H}px`},children:U.jsx("div",{className:n.A(Fy,jy[M]),children:U.jsx("div",{className:n.A(Jy,jy[M]),children:U.jsx(Ey,{})})})}),U.jsxs("div",{className:n.A(wy,jy[M]),style:{"--decisionBoxWrapperSize":Ly._m(Cy[M]*a)},children:[U.jsx(qy,{strikeNumber:r.LS.First,onSelect:I,style:f,setRef:_,onHover:d,onHoverOut:q,enabled:B}),U.jsx(qy,{strikeNumber:r.LS.Second,onSelect:E,style:V,setRef:b,onHover:d,onHoverOut:q,enabled:B}),U.jsx(qy,{strikeNumber:r.LS.Third,onSelect:Z,style:$,setRef:z,onHover:d,onHoverOut:q,enabled:B})]})]})},WM=i.PA((()=>{const W=OW.g(),y=k.useCallback((y=>{W.stormBonus.select(y),W.sound.playSound({event:my.PZ.LightningStormDecisionMade,args:[y]}),W.log.log(By.mT({selectedDecision:y,remainingDecisionTime:W.stormBonus.decisionTimeRemaining,auto:!1}))}),[W]),M=k.useCallback((()=>{W.log.log(By.Ye({decisionTime:W.stormBonus.decisionTimeRemaining}))}),[W]),i=k.useCallback((()=>{W.stormBonus.decisionAnimationManager.onIntroReady()}),[W]);if(!W.ui.stormDecision.isVisible)return null;const x={visible:W.ui.stormDecision.isVisible,logStormDecisionOffered:M,layout:W.device.componentLayout,onSelect:y,firstBoxRect:W.videoElementRects.rects[vy.V.StormBonusFirstBox],secondBoxRect:W.videoElementRects.rects[vy.V.StormBonusSecondBox],thirdBoxRect:W.videoElementRects.rects[vy.V.StormBonusThirdBox],animationStage:W.stormBonus.decisionAnimationManager.stage,onIntroReady:i,isDecisionTime:W.stormBonus.isDecisionTime,selectedOffer:W.stormBonus.selectedOffer,isPageVisible:W.abstractGame.values.isPageVisible,rootSize:W.abstractGame.values.rootSize};return U.jsx(Qy,{...x})})),yM="stormBonusContainer--4c514",MM=({active:W})=>W?U.jsx("div",{className:yM,"data-role":x,children:U.jsx(WM,{})}):null,UM=i.PA((()=>{const W={active:OW.g().stormBonus.isActive};return U.jsx(MM,{...W})}))},231546:(W,y,M)=>{M.d(y,{H:()=>a});var U=M(64922),i=M(699695),x=M(525620),n=M(346160),k=M(377810);const g="current-number",u="animatedCounter--703b7",e="previousNumber--6059c",l="animate--c7464",G="currentNumber--c7cd1";var Y;(function(W){W["Increasing"]="increasing",W["Decreasing"]="decreasing"})(Y||(Y={}));const c={[Y.Increasing]:"increasing--f3239",[Y.Decreasing]:"decreasing--7b8b3"},D=({className:W,count:y,render:M})=>{const[x,n]=k.useState({current:y,previous:y}),D=function(){const W=k.useRef(!1);return k.useEffect((()=>(W.current=!0,()=>{W.current=!1})),[]),W.current}();k.useEffect((()=>{x.current!==y&&n({current:y,previous:x.current})}),[x,y]);const r=x.current>x.previous?Y.Increasing:Y.Decreasing,A=D&&x.current>0&&x.previous>0;return U.jsxs("div",{className:i.A(u,W,c[r],{[l]:A}),children:[U.jsx("div",{className:G,"data-role":g,children:M?M(x.current):x.current}),U.jsx("div",{className:e,children:M?M(x.previous):x.previous})]},`animated-count-${x.current}`)},r="decision-bettors",A="progressBalls--8b38d",T=({className:W})=>U.jsxs("div",{className:i.A(A,W),children:[U.jsx("div",{}),U.jsx("div",{}),U.jsx("div",{})]});var O=M(980733),h=M(421645),S=M(454342);const o="decisionBettors--5c93f",d="amount--f5ffc",q="playerIcon--c52c3",s="text--09fbb",N=({visible:W,amount:y})=>W?U.jsxs("div",{className:o,"data-role":r,children:[U.jsx(D,{className:d,count:y}),U.jsx(S.m,{className:q}),U.jsx(T,{}),U.jsx("div",{className:s,children:n.Tl(h.X.MakingDecision)})]}):null,_=x.PA((()=>{const W=O.g().ui.decisionBettors.decisionBettors,y={visible:W.visible,amount:W.amount};return U.jsx(N,{...y})}));var p=M(797238),b=M(481522),m=M(617401),z=M(277082);const K="trafficLightContainer--66136",P="portrait--34bdc",R="hidden--b003c",I="withChaserBetSpots--359e5",E="bonusRound--db032",Z="decisionBettorsContainer--d2c48",f={[m._.Desktop]:void 0,[m._.DesktopClassic]:void 0,[m._.Tablet]:"tablet--0b917",[m._.MobilePortrait]:P},V={[z.LightningStormBonusGame.HotSpot]:"hotSpot--ac513",[z.LightningStormBonusGame.StormBonus]:"stormBonus--264a5"},$=W=>{var y;const{bonusGame:M,layout:x,isBonusRound:n,isMessageVisible:k,isHidden:g,isChaserBetSpotVisible:u,portraitLayoutWidthLimit:e}=W,l=null!==(y=M&&V[M])&&void 0!==y?y:E;return p.R(!g,300)?U.jsxs("div",{style:{"--portraitLayoutWidthLimit":e},className:i.A(K,f[x],{[I]:u&&!n,[l]:n,[R]:g}),children:[U.jsx(b.M,{label:h.X.WaitForNextGame,visible:k}),U.jsx("div",{className:i.A(Z,{[P]:x===m._.MobilePortrait}),children:U.jsx(_,{})})]}):null},a=x.PA((()=>{const W=O.g(),y={bonusGame:W.bonus.currentBonus,layout:W.device.componentLayout,isBonusRound:W.ui.trafficLightContainer.isInBonusRoundView,isHidden:W.ui.trafficLightContainer.shouldHideDuringAnimation,isMessageVisible:W.ui.trafficLightContainer.isWaitForNextGameVisible,isChaserBetSpotVisible:W.ui.bettingGrid.chasersEnabled,portraitLayoutWidthLimit:W.ui.trafficLightContainer.portraitLayoutWidthLimit};return U.jsx($,{...y})}))},878273:(W,y,M)=>{M.d(y,{h2:()=>KM});var U=M(64922),i=M(699695),x=M(525620),n=M(377810),k=M(542031),g=M(46602),u=M(128546);const e=[0,0,444,228],l=5,G=({className:W})=>{const y=n.useMemo((()=>`${String(Math.random())}-transition-bet-spot-border`),[]);return U.jsxs("svg",{id:y,className:W,width:"100%",height:"100%",viewBox:`${e[0]} ${e[1]} ${e[2]} ${e[3]}`,fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[U.jsx("rect",{x:.5*l,y:.5*l,width:e[2]-l,height:e[3]-l,stroke:`url(#${y}-paint0)`,strokeWidth:l}),U.jsx("defs",{children:U.jsxs("linearGradient",{id:`${y}-paint0`,x1:.5*e[2],y1:0,x2:.5*e[2],y2:e[3],gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#F8F0D6"}),U.jsx("stop",{offset:"0.595258",stopColor:"#D4B97F"}),U.jsx("stop",{offset:"1",stopColor:"#89642A"})]})})]})};var Y=M(277082);const c=M.p+"images/bc.1afae4e9.webp",D=M.p+"images/fb.9dc88bb3.webp",r=M.p+"images/hs.8ead6623.webp",A=M.p+"images/ls.21d0f3e8.webp",T=M.p+"images/mm.1153e88f.webp",O={[Y.LightningStormBonusGame.StormBonus]:A,[Y.LightningStormBonusGame.Fireball]:D,[Y.LightningStormBonusGame.HotSpot]:r,[Y.LightningStormBonusGame.MonsterMash]:T,[Y.LightningStormBonusGame.BatteryCharger]:c},h="transition-bet-spot";var S=M(234341),o=M(315049),d=M(876429),q=M(276111),s=M(769413),N=M(650276);const _=0,p=.33,b=.4,m=.5,z=.6,K=1,P=1.235,R=1.265,I=1.335,E=1.4,Z=1.565,f=1.737;function V(W){const{bonusCornerRef:y}=W,{container:M,logo:U,wheelMultiplier:i,betCodeSymbol:x,background:n,chipPlaceholder:k,topPart:g,chip:u}=y;return S.M().parallel([(e=M,e.opacity=0,s.M(e).delay(b-_).animateTo({opacity:1},0)),a(g),$(n),H(U),B(x),v(k),L(i),X(u)]);var e}function $(W){W.opacity=0,W.scale=0,W.forceHardwareAcceleration=!0;const y=s.M(W).delay(P-_).animateTo({opacity:1},E-P,q.dV),M=s.M(W).delay(P-_).animateTo({scale:1},E-P,q.dV);return S.M().parallel([y,M]).callback((()=>{W.forceHardwareAcceleration=!1}))}function a(W){return W.opacity=0,W.forceHardwareAcceleration=!0,s.M(W).delay(I-_).animateTo({opacity:1},E-I,q.dV).callback((()=>{W.forceHardwareAcceleration=!1}))}function H(W){return W.scale=0,W.opacity=0,W.forceHardwareAcceleration=!0,s.M(W).delay(P-_).callback((()=>{W.opacity=N.lN})).animateTo({scale:1.5},E-P,q.$g).animateTo({scale:1},Z-E,q.$g).callback((()=>{W.forceHardwareAcceleration=!1}))}function B(W){return W.scale=0,W.forceHardwareAcceleration=!0,s.M(W).delay(I-_).animateTo({scale:1},E-I,q.dV).callback((()=>{W.forceHardwareAcceleration=!1}))}function v(W){return W.scale=0,W.forceHardwareAcceleration=!0,s.M(W).delay(P-_).animateTo({scale:1.5},E-P,q.dV).animateTo({scale:1},Z-E,q.dV).callback((()=>{W.forceHardwareAcceleration=!1}))}function L(W){return W.scale=0,W.forceHardwareAcceleration=!0,s.M(W).delay(E-_).animateTo({scale:2},Z-E,q.dV).animateTo({scale:1},f-Z,q.dV).callback((()=>{W.forceHardwareAcceleration=!1}))}function X(W){W.opacity=0,W.scale=.1,W.forceHardwareAcceleration=!0,W.setStyle({visibility:"hidden"});const y=s.M(W).delay(E-_).callback((()=>{W.setStyle({visibility:"visible"})})).animateTo({opacity:1},Z-E,q.dV),M=s.M(W).delay(E-_).animateTo({scale:2},Z-E,q.dV).animateTo({scale:1},f-Z,q.dV);return S.M().parallel([y,M]).callback((()=>{W.forceHardwareAcceleration=!1}))}function w(W){const y=/([+-]?\d*\.?\d+)(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(W);return y?[y[1],y[2]]:null}function F(W){const y=w(W);return y&&y[1]||""}function t(W,y){return W in y.style}const J=["perspective","translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY","scale","scaleX","scaleY","scaleZ"];function j(W){const y=W.includes("translate"),M=W.includes("perspective");if(y||M)return"px";const U=W.includes("rotate"),i=W.includes("rotate");return U||i?"deg":""}const C=Symbol("CSSTween: Transform Cache");class Q extends s.v{constructor(W){super({}),this.initialValues=W,this.tweeningProperties={transform:{},style:{},properties:{}},this.node=null,this.applyStyles=()=>{if(!this.node)return;const W=Object.entries(this.tweeningProperties.style);for(const[y,M]of W){const{cssName:W,unit:U}=M;this.node.style[W]=`${this.target[y]}${U}`}const y=Object.entries(this.tweeningProperties.properties);for(const[W,M]of y){const{unit:y}=M,U=W;this.node.style.setProperty(W,`${this.target[U]}${y}`)}const M=Object.entries(this.tweeningProperties.transform),U=this.node[C];for(const[W,y]of M){const{cssName:M,unit:i}=y,x=W;U[x]=`${M}(${this.target[x]}${i})`}this.node.style.transform=function(W){const y=[];for(const M of J){const U=W[M];U&&y.push(U)}return y.join(" ")}(U)},this.setDefaultValues()}applyToNode(W){if(!W)return this;const y=W;return y[C]||(y[C]={}),this.tweeningProperties=this.getTweeiningMap(W),this.node=y,this.applyStyles(),this}onTargetUpdated(){super.onTargetUpdated(),this.applyStyles()}setDefaultValues(){var W;const y=Object.keys(this.initialValues);for(const M of y){const y=this.initialValues[M];if("number"==typeof y)this.target[M]=y;else{const U=w(y);this.target[M]=null!==(W=U&&Number.parseFloat(U[0]))&&void 0!==W?W:y}}}getTweeiningMap(W){const y={transform:{},style:{},properties:{}},M=Object.entries(this.initialValues),U=getComputedStyle(W);for(const[x,n]of M)if(void 0!==n)if(i=x,J.includes(i)){const{unit:W}=this.extractTransformUnitAndValue(x,n);y.transform[x]={cssName:x,unit:W,name:x}}else if(t(x,W)){const M=x.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=this.extractStyleUnitAndValue(M,n,W,U);if(null===i)continue;y.style[x]={cssName:M,unit:i.unit,name:x}}else if(x.startsWith("--")){const W=w(String(n));if(!W)continue;y.properties[x]={cssName:x,unit:W[1]||"",name:x}}var i;return y}extractStyleUnitAndValue(W,y,M,U){const i=function(W,y,M){return(W.style[M]?W.style[M]:y.getPropertyValue(M))||"0"}(M,U,W);if("number"==typeof y)return{value:y,unit:F(i)};const x=w(y);return x?{value:Number.parseFloat(x[0]),unit:x[1]}:null}extractTransformUnitAndValue(W,y){if("number"==typeof y)return{value:y,unit:j(W)};const M=w(y);return M?{value:Number.parseFloat(M[0]),unit:M[1]}:{value:0,unit:j(W)}}}var WW=M(625915),yW=M(341360),MW=M(803903),UW=M(908249);function iW(W){const{containerRef:y,innerContainerRef:M,shineRef:U,glowRef:i,footerLogo:x,initialScale:n,endScale:k,initialPosition:g,bottomPosition:u,finalPosition:e,onParked:l}=W,G=new yW.a(y,{translateOrigin:MW.t.Center}),Y=new yW.a(M,{transformOrigin:"center"}),c=new yW.a(U,{translateUnits:"%"});return c.x=-100,G.x=g.left,G.y=g.top,G.scale=n,G.opacity=0,S.M().parallel([(D=G,s.M(D).animateTo({opacity:1},p-_,q.dV)),xW(G,k),nW({element:G,bottomPosition:u,finalPosition:e}),kW(c),gW(i),uW(Y),eW(x)]).callback(l);var D}function xW(W,y){return s.M(W).animateTo({scale:1.5*y},p-_,q.dV).animateTo({scale:y},m-p,q.dV).delay(P-m-.165).animateTo({scale:0},E-P+.15,q.dV)}function nW(W){const{element:y,bottomPosition:M,finalPosition:U}=W;return s.M(y).animateTo({x:M.left,y:M.top},p-_,q.dV).delay(K-p).animateTo({x:U.left,y:U.top},I-K,q.$g)}function kW(W){return s.M(W).animateTo({x:100},K-_,q.dV)}function gW(W){return(y={opacity:0},new Q(y)).delay(z-_).animateTo({opacity:1},K-z).applyToNode(W);var y}function uW(W){const y={value:0};let M=0;const U=K-m,i=WW.B((U=>{M+=U,W.x=UW.e(y.value,40,M),W.y=UW.e(y.value,35,M)})),x=s.M(y).animateTo({value:10},U),n=s.M(W).delay(U).callback((()=>{i.dispose()}));return S.M().delay(m-_).parallel([x,n,i])}function eW(W){return W?s.M(W).delay(P-_-.165).animateTo({scale:0,opacity:0},E-P+.13,q.dV):S.M()}var lW=M(855500),GW=M(150702),YW=M(164956);const cW=JSON.parse('{"frames":{"frame_000":{"x":0,"y":567,"width":450,"height":189},"frame_001":{"x":450,"y":378,"width":450,"height":189},"frame_002":{"x":450,"y":0,"width":450,"height":189},"frame_003":{"x":0,"y":0,"width":450,"height":189},"frame_004":{"x":900,"y":0,"width":450,"height":189},"frame_005":{"x":450,"y":756,"width":450,"height":189},"frame_006":{"x":0,"y":945,"width":450,"height":189},"frame_007":{"x":900,"y":567,"width":450,"height":189},"frame_008":{"x":1350,"y":0,"width":450,"height":189},"frame_009":{"x":900,"y":945,"width":450,"height":189},"frame_010":{"x":900,"y":189,"width":450,"height":189},"frame_011":{"x":0,"y":756,"width":450,"height":189},"frame_012":{"x":900,"y":378,"width":450,"height":189},"frame_013":{"x":450,"y":945,"width":450,"height":189},"frame_014":{"x":450,"y":189,"width":450,"height":189},"frame_015":{"x":450,"y":567,"width":450,"height":189},"frame_016":{"x":0,"y":378,"width":450,"height":189},"frame_017":{"x":0,"y":189,"width":450,"height":189},"frame_018":{"x":1350,"y":378,"width":450,"height":189},"frame_019":{"x":1350,"y":756,"width":450,"height":189},"frame_020":{"x":1350,"y":189,"width":450,"height":189},"frame_021":{"x":450,"y":1134,"width":450,"height":189},"frame_022":{"x":0,"y":1134,"width":450,"height":189},"frame_023":{"x":900,"y":756,"width":450,"height":189},"frame_024":{"x":900,"y":1134,"width":450,"height":189},"frame_025":{"x":1350,"y":567,"width":450,"height":189},"frame_026":{"x":1350,"y":1134,"width":450,"height":189},"frame_027":{"x":1350,"y":945,"width":450,"height":189},"frame_028":{"x":0,"y":567,"width":450,"height":189}},"meta":{"size":{"height":1323,"width":1800}}}'),DW=GW.S(cW);function rW(W){const{element:y,delay:M}=W;if(!y)return S.M();const U=new lW.s(y);return U.opacity=0,S.M().delay(M).sequence(YW.Gn({frames:DW,element:U,duration:DW.length/34}))}var AW=M(217368),TW=M(617401),OW=M(163828);function hW(W){return{left:W.left+.5*W.width,top:W.top+.5*W.height}}const SW=0,oW=.335,dW=.67;function qW(W,y){return y===TW._.MobilePortrait?(W.y=100,W.opacity=1,s.M(W).delay(oW-SW).animateTo({y:0},dW-oW,q.dV)):(W.x=-100,W.opacity=1,s.M(W).delay(oW-SW).animateTo({x:0},dW-oW,q.dV))}function sW(W){return W?s.M(W).delay(oW-SW).animateTo({scale:0},dW-oW,q.dV).callback((()=>{W.opacity=0})):S.M()}const NW=0,_W=.167,pW=.233,bW=.267,mW=.3,zW=.333,KW=.433,PW=.5,RW=.533,IW=.567,EW=.633,ZW=.667,fW=.7,VW=.767,$W=1.167,aW=1.33,HW=1.867,BW=1.967,vW=2.033,LW=2.067,XW=2.2,wW=2.3,FW=2.5,tW=2.8,JW=3.03,jW=3.3,CW=4,QW=5,Wy=0,yy=.3,My=.5,Uy=.633,iy=.767,xy=.9,ny=.933,ky=1,gy=1.33,uy=1.9,ey=2.167,ly=2.3,Gy=2.8,Yy=3,cy=3.1,Dy=3.2,ry=7.4,Ay=8.4;var Ty=M(417550);const Oy=JSON.parse('{"frames":{"frame_00":{"x":0,"y":0,"width":191,"height":177},"frame_01":{"x":0,"y":177,"width":191,"height":177},"frame_02":{"x":191,"y":0,"width":191,"height":177},"frame_03":{"x":191,"y":177,"width":191,"height":177},"frame_04":{"x":0,"y":354,"width":191,"height":177},"frame_05":{"x":382,"y":0,"width":191,"height":177},"frame_06":{"x":191,"y":354,"width":191,"height":177},"frame_07":{"x":382,"y":177,"width":191,"height":177},"frame_08":{"x":382,"y":354,"width":191,"height":177},"frame_09":{"x":0,"y":531,"width":191,"height":177},"frame_10":{"x":191,"y":531,"width":191,"height":177},"frame_11":{"x":573,"y":0,"width":191,"height":177},"frame_12":{"x":573,"y":177,"width":191,"height":177},"frame_13":{"x":382,"y":531,"width":191,"height":177},"frame_14":{"x":573,"y":354,"width":191,"height":177},"frame_15":{"x":0,"y":708,"width":191,"height":177},"frame_16":{"x":191,"y":708,"width":191,"height":177},"frame_17":{"x":764,"y":0,"width":191,"height":177},"frame_18":{"x":573,"y":531,"width":191,"height":177},"frame_19":{"x":764,"y":177,"width":191,"height":177},"frame_20":{"x":382,"y":708,"width":191,"height":177},"frame_21":{"x":764,"y":354,"width":191,"height":177},"frame_22":{"x":0,"y":885,"width":191,"height":177},"frame_23":{"x":191,"y":885,"width":191,"height":177},"frame_24":{"x":573,"y":708,"width":191,"height":177},"frame_25":{"x":764,"y":531,"width":191,"height":177},"frame_26":{"x":955,"y":0,"width":191,"height":177},"frame_27":{"x":382,"y":885,"width":191,"height":177},"frame_28":{"x":955,"y":177,"width":191,"height":177},"frame_29":{"x":955,"y":354,"width":191,"height":177},"frame_30":{"x":764,"y":708,"width":191,"height":177}},"meta":{"size":{"height":1062,"width":1146}}}'),hy=JSON.parse('{"frames":{"frame_00":{"x":0,"y":0,"width":158,"height":158},"frame_01":{"x":158,"y":0,"width":158,"height":158},"frame_02":{"x":0,"y":158,"width":158,"height":158},"frame_03":{"x":158,"y":158,"width":158,"height":158},"frame_04":{"x":316,"y":0,"width":158,"height":158},"frame_05":{"x":0,"y":316,"width":158,"height":158},"frame_06":{"x":158,"y":316,"width":158,"height":158},"frame_07":{"x":316,"y":158,"width":158,"height":158},"frame_08":{"x":316,"y":316,"width":158,"height":158},"frame_09":{"x":474,"y":0,"width":158,"height":158},"frame_10":{"x":0,"y":474,"width":158,"height":158},"frame_11":{"x":158,"y":474,"width":158,"height":158},"frame_12":{"x":474,"y":158,"width":158,"height":158},"frame_13":{"x":316,"y":474,"width":158,"height":158},"frame_14":{"x":474,"y":316,"width":158,"height":158},"frame_15":{"x":632,"y":0,"width":158,"height":158},"frame_16":{"x":0,"y":632,"width":158,"height":158},"frame_17":{"x":158,"y":632,"width":158,"height":158},"frame_18":{"x":632,"y":158,"width":158,"height":158},"frame_19":{"x":474,"y":474,"width":158,"height":158},"frame_20":{"x":316,"y":632,"width":158,"height":158},"frame_21":{"x":632,"y":316,"width":158,"height":158},"frame_22":{"x":474,"y":632,"width":158,"height":158},"frame_23":{"x":632,"y":474,"width":158,"height":158},"frame_24":{"x":790,"y":0,"width":158,"height":158},"frame_25":{"x":790,"y":158,"width":158,"height":158},"frame_26":{"x":790,"y":316,"width":158,"height":158},"frame_27":{"x":632,"y":632,"width":158,"height":158}},"meta":{"size":{"height":790,"width":948}}}'),Sy=GW.S(Oy),oy=GW.S(hy);function dy(W){const{bonusCornerRef:y,vibrate:M}=W,{container:U,logo:i,wheelMultiplier:x,wheelMultiplierGlow:n,betCodeSymbol:k,background:g,chipPlaceholder:u,topPart:e,chip:l,xxxtremeLogo:G,xxxtremeLogoGlow:Y,xxxtremeLightning:c,xxxtremeLightningBall:D,lightningTop:r,xxxtremeParticles:A}=y;return S.M().parallel([by(U),S.M().delay(cy).parallel([qy(l),(O=u,O.opacity=0,O.forceHardwareAcceleration=!0,s.M(O).delay(pW-NW).animateTo({opacity:1},zW-pW).callback((()=>{O.forceHardwareAcceleration=!1}))),by(U),sy(x),(T=A,T?S.M().delay(bW-NW).callback((()=>{T.start()})):S.M()),Ny(n),_y(G),py(Y),my(c),zy(D,M),AW.z({element:r,delay:mW-NW}),Ky(i),Py(g),Ry(e),Iy(k)])]);var T,O}function qy(W){W.opacity=0,W.scale=.1,W.forceHardwareAcceleration=!0,W.setStyle({visibility:"hidden"});const y=s.M(W).callback((()=>{W.setStyle({visibility:"visible"})})).animateTo({opacity:1},pW-NW,q.ME),M=s.M(W).animateTo({scale:2},pW-NW,q.ME).animateTo({scale:.86},zW-pW,q.ME).animateTo({scale:1.05},KW-zW,q.ME).animateTo({scale:.97},RW-KW,q.ME).animateTo({scale:1},EW-RW,q.ME);return S.M().parallel([y,M]).callback((()=>{W.forceHardwareAcceleration=!1}))}function sy(W){return W.scale=0,W.opacity=0,W.forceHardwareAcceleration=!0,S.M().parallel([s.M(W).delay(HW-NW).animateTo({scale:1.44},LW-HW,q.ME).animateTo({scale:.91},wW-LW,q.ME).animateTo({scale:1.03},FW-wW,q.ME).animateTo({scale:.98},tW-FW,q.ME).animateTo({scale:1},JW-tW,q.ME),s.M(W).delay(BW-NW).animateTo({opacity:1},vW-BW,q.ME),s.M(W).delay(LW-NW).animateTo({brightness:.3,contrast:.3},FW-LW,q.ME).animateTo({brightness:.1,contrast:.1},jW-LW,q.ME),S.M().delay(jW-NW).sequence(s.M(W).animateTo({brightness:.5,contrast:.5},CW-jW,q.ME).animateTo({brightness:0,contrast:0},QW-CW,q.ME).animateTo({brightness:.5,contrast:.5},CW-jW,q.ME).animateTo({brightness:0,contrast:0},QW-CW,q.ME))]).callback((()=>{W.forceHardwareAcceleration=!1}))}function Ny(W){return W?(W.opacity=0,W.scale=1.1,S.M().parallel([s.M(W).delay(LW-NW).animateTo({opacity:.8},FW-LW,q.ME).animateTo({opacity:0},jW-LW,q.ME),S.M().delay(jW-NW).sequence(s.M(W).animateTo({opacity:.8},CW-jW,q.ME).animateTo({opacity:0},QW-CW,q.ME).animateTo({opacity:.8},CW-jW,q.ME).animateTo({opacity:0},QW-CW,q.ME))])):S.M()}function _y(W){return W?(W.scale=0,W.forceHardwareAcceleration=!0,S.M().parallel([S.M().delay($W-NW).sequence(Ty.i({element:W,duration:XW-$W,amplitude:[.05,.05],frequency:25})),s.M(W).animateTo({scale:1.4},_W-NW,q.ME).animateTo({scale:.92},zW-_W,q.ME).animateTo({scale:1.02},PW-zW,q.ME).animateTo({scale:1},ZW-PW,q.ME).delay($W-ZW).animateTo({scale:1.2},BW-$W,q.ME).animateTo({scale:1.03},vW-BW,q.ME).animateTo({scale:1},LW-vW,q.ME),s.M(W).callback((()=>{W.opacity=N.lN})).delay(zW-NW).animateTo({opacity:1},KW-zW,q.ME).delay(HW-KW).animateTo({opacity:N.lN},LW-HW,q.ME),s.M(W).delay(zW-NW).animateTo({brightness:.15,contrast:.15},KW-zW,q.ME).animateTo({brightness:.1,contrast:.1},PW-KW,q.ME).animateTo({brightness:.13,contrast:.13},IW-PW,q.ME).animateTo({brightness:.05,contrast:.05},EW-IW,q.ME).animateTo({brightness:.1,contrast:.1},fW-EW,q.ME).animateTo({brightness:.03,contrast:.03},VW-fW,q.ME).animateTo({brightness:0,contrast:0},$W-VW,q.ME).animateTo({brightness:.22,contrast:.22},aW-$W,q.ME).delay(HW-aW).animateTo({brightness:0,contrast:0},LW-HW,q.ME)]).callback((()=>{W.forceHardwareAcceleration=!1}))):S.M()}function py(W){return W?(W.scale=1,W.opacity=0,s.M(W).delay(zW-NW).animateTo({opacity:.9},KW-zW,q.ME).animateTo({opacity:.7},PW-KW,q.ME).animateTo({opacity:.8},IW-PW,q.ME).animateTo({opacity:.6},EW-IW,q.ME).animateTo({opacity:.7},fW-EW,q.ME).animateTo({opacity:.3},VW-fW,q.ME).animateTo({opacity:0},$W-VW,q.ME).animateTo({opacity:1},aW-$W,q.ME).delay(HW-aW).animateTo({opacity:0},LW-HW,q.ME)):S.M()}function by(W){return W.opacity=0,s.M(W).animateTo({opacity:1},_W-NW,q.ME)}function my(W){if(!W)return S.M();const y=new lW.s(W,{translateOrigin:MW.t.Center});y.opacity=0;const M=YW.Gn({frames:Sy,element:y,duration:vW-$W});return S.M().delay($W-NW).sequence(M)}function zy(W,y){if(!W)return S.M();const M=new lW.s(W,{translateOrigin:MW.t.Center});M.opacity=0;const U=YW.Gn({frames:oy,element:M,duration:XW-$W});return S.M().delay($W-NW).callback(y).sequence(U)}function Ky(W){return W.scale=0,W.opacity=N.lN,W.forceHardwareAcceleration=!0,s.M(W).animateTo({scale:1.4},_W-NW,q.ME).animateTo({scale:.92},zW-_W,q.ME).animateTo({scale:1.02},PW-zW,q.ME).animateTo({scale:1},ZW-PW,q.ME).callback((()=>{W.forceHardwareAcceleration=!1}))}function Py(W){W.opacity=0,W.scale=0,W.forceHardwareAcceleration=!0;const y=s.M(W).animateTo({opacity:1},_W-NW,q.ME),M=s.M(W).animateTo({scale:1},_W-NW,q.ME);return S.M().parallel([y,M]).callback((()=>{W.forceHardwareAcceleration=!1}))}function Ry(W){return W.opacity=0,W.forceHardwareAcceleration=!0,s.M(W).delay(_W-NW).animateTo({opacity:1},pW-_W,q.ME).callback((()=>{W.forceHardwareAcceleration=!1}))}function Iy(W){return W.scale=0,W.forceHardwareAcceleration=!0,s.M(W).delay(_W-NW).animateTo({scale:1},pW-_W,q.ME).callback((()=>{W.forceHardwareAcceleration=!1}))}var Ey=M(719630);const Zy=JSON.parse('{"frames":{"frame_00":{"x":0,"y":0,"width":213,"height":106},"frame_01":{"x":0,"y":106,"width":213,"height":106},"frame_02":{"x":0,"y":212,"width":213,"height":106},"frame_03":{"x":213,"y":0,"width":213,"height":106},"frame_04":{"x":213,"y":106,"width":213,"height":106},"frame_05":{"x":213,"y":212,"width":213,"height":106},"frame_06":{"x":0,"y":318,"width":213,"height":106},"frame_07":{"x":213,"y":318,"width":213,"height":106},"frame_08":{"x":0,"y":424,"width":213,"height":106},"frame_09":{"x":426,"y":0,"width":213,"height":106},"frame_10":{"x":426,"y":106,"width":213,"height":106},"frame_11":{"x":213,"y":424,"width":213,"height":106},"frame_12":{"x":426,"y":212,"width":213,"height":106},"frame_13":{"x":426,"y":318,"width":213,"height":106},"frame_14":{"x":426,"y":424,"width":213,"height":106}},"meta":{"size":{"height":530,"width":639}}}'),fy=JSON.parse('{"frames":{"frame_01":{"x":0,"y":0,"width":214,"height":121},"frame_02":{"x":0,"y":121,"width":214,"height":121},"frame_03":{"x":214,"y":0,"width":214,"height":121},"frame_04":{"x":0,"y":242,"width":214,"height":121},"frame_05":{"x":214,"y":121,"width":214,"height":121},"frame_06":{"x":214,"y":242,"width":214,"height":121}},"meta":{"size":{"height":363,"width":428}}}'),Vy=JSON.parse('{"frames":{"frame_31":{"x":0,"y":0,"width":1004,"height":105},"frame_32":{"x":0,"y":105,"width":1004,"height":105},"frame_33":{"x":0,"y":210,"width":1004,"height":105},"frame_34":{"x":0,"y":315,"width":1004,"height":105},"frame_35":{"x":0,"y":420,"width":1004,"height":105},"frame_36":{"x":0,"y":525,"width":1004,"height":105},"frame_37":{"x":0,"y":630,"width":1004,"height":105},"frame_38":{"x":0,"y":735,"width":1004,"height":105},"frame_39":{"x":0,"y":840,"width":1004,"height":105},"frame_40":{"x":0,"y":945,"width":1004,"height":105},"frame_41":{"x":1004,"y":0,"width":1004,"height":105},"frame_42":{"x":1004,"y":105,"width":1004,"height":105},"frame_43":{"x":1004,"y":210,"width":1004,"height":105},"frame_44":{"x":0,"y":1050,"width":1004,"height":105},"frame_45":{"x":1004,"y":315,"width":1004,"height":105},"frame_46":{"x":1004,"y":420,"width":1004,"height":105},"frame_47":{"x":1004,"y":525,"width":1004,"height":105},"frame_48":{"x":0,"y":1155,"width":1004,"height":105},"frame_49":{"x":1004,"y":630,"width":1004,"height":105},"frame_50":{"x":1004,"y":735,"width":1004,"height":105},"frame_51":{"x":0,"y":1260,"width":1004,"height":105},"frame_52":{"x":1004,"y":840,"width":1004,"height":105},"frame_53":{"x":0,"y":1365,"width":1004,"height":105},"frame_54":{"x":1004,"y":945,"width":1004,"height":105},"frame_55":{"x":1004,"y":1050,"width":1004,"height":105},"frame_56":{"x":1004,"y":1155,"width":1004,"height":105},"frame_57":{"x":1004,"y":1260,"width":1004,"height":105}},"meta":{"size":{"height":1470,"width":2008}}}'),$y=GW.S(Vy),ay=GW.S(fy),Hy=GW.S(Zy);function By(W){const{containerRef:y,innerContainerRef:M,logoRef:U,shineRef:i,glowRef:x,backgroundRef:n,footerLogo:k,initialScale:g,endScale:u,initialPosition:e,bottomPosition:l,finalPosition:G,xxxtremeLogoRef:Y,xxxtremeLightningBackgroundRef:c,xxxtremeLightningBorderRef:D,onParked:r,xxxtremeMaskRef:A,studioGradientRef:T,horizontalLightningRef:O,vibrate:h}=W,o=new yW.a(y,{translateOrigin:MW.t.Center}),d=new yW.a(M,{transformOrigin:"center"}),N=new yW.a(i,{translateUnits:"%"}),_=new Ey.c(U,{translateOrigin:MW.t.Center}),p=new yW.a(x),b=new Ey.c(n);return N.x=-100,o.x=e.left,o.y=e.top,o.scale=g,o.opacity=0,p.opacity=0,S.M().parallel([vy(Y,h),(m=_,S.M().parallel([s.M(m).animateTo({opacity:1},yy-Wy,q.ME),s.M(m).delay(ny-Wy).callback((()=>{m.lightness=0})).animateTo({lightness:1},ky-ny,q.ME).animateTo({lightness:0},uy-ky,q.ME)])),Ly(D),Xy(c),wy(A),Fy(N),ty(d),Jy(p),jy(k),Cy({element:o,bottomPosition:l,finalPosition:G,endScale:u}),Qy(b),WM(T),rW({element:O,delay:ey-Wy})]).callback(r);var m}function vy(W,y){const M=new lW.s(W,{translateUnits:"%"});return M.x=-50,M.y=-47,M.opacity=0,S.M().parallel([S.M().delay(ny-Wy).callback(y).sequence(YW.Gn({frames:$y,element:M,duration:uy-ny,automaticallyHide:!1,resetAfterDone:!1})),s.M(M).delay(Yy-Wy).animateTo({opacity:0},Dy-Yy,q.ME)])}function Ly(W){const y=new lW.s(W,{translateUnits:"%"});y.opacity=0;const M=WW.$(YW.Gn({frames:Hy,element:y,duration:Hy.length/YW.J_,automaticallyShow:!1,automaticallyHide:!1}));return S.M().parallel([S.M().delay(ey-Wy).sequence(M),s.M(y).delay(ey-Wy).animateTo({opacity:1},ly-ey,q.ME).delay(Yy-ly).animateTo({opacity:0},cy-Yy,q.ME).callback((()=>{M.dispose()}))]).onDispose((()=>{M.dispose()}))}function Xy(W){const y=new lW.s(W,{translateOrigin:MW.t.Center});return y.opacity=0,S.M().parallel([S.M().delay(iy-Wy).sequence(YW.Gn({frames:ay,element:y,duration:ay.length/YW.J_,automaticallyHide:!1,resetAfterDone:!1})),s.M(y).delay(ny-Wy).animateTo({opacity:0},ey-ny,q.ME)])}function wy(W){const y={mask:0};return s.M(y).delay(ny-Wy).animateTo({mask:1},ky-ny,q.ME,(()=>{W.style.setProperty("--maskPercentage",`${y.mask}`)}))}function Fy(W){return s.M(W).animateTo({x:100},xy-Wy,q.ME)}function ty(W){const y={value:0};let M=0;const U=cy-ly,i=WW.B((U=>{M+=U,W.x=UW.e(y.value,25,M),W.y=UW.e(y.value,20,M)})),x=s.M(y).animateTo({value:10},U),n=s.M(W).delay(U).callback((()=>{i.dispose()}));return S.M().delay(ly-Wy).parallel([x,n,i])}function Jy(W){return W.opacity=0,s.M(W).delay(ey-Wy).animateTo({opacity:1},Yy-ey,q.ME).animateTo({opacity:0},cy-Yy,q.ME)}function jy(W){return W?s.M(W).delay(Yy-Wy-.1).animateTo({scale:0,opacity:0},cy-Yy+.1,q.ME):S.M()}function Cy(W){const{element:y,endScale:M,bottomPosition:U,finalPosition:i}=W;return S.M().parallel([s.M(y).animateTo({opacity:1},yy-Wy,q.ME).delay(Yy-yy).animateTo({opacity:0},cy-Yy,q.ME),s.M(y).animateTo({scale:1.5*M},yy-Wy,q.ME).animateTo({scale:.96*M},My-yy,q.ME).animateTo({scale:1.04*M},Uy-My,q.ME).animateTo({scale:.98*M},iy-Uy,q.ME).animateTo({scale:M},xy-iy,q.ME).delay(Yy-xy-.165).animateTo({scale:0},Dy-Yy+.15,q.ME),s.M(y).animateTo({x:U.left,y:U.top},yy-Wy,q.ME).delay(Gy-yy).animateTo({x:i.left,y:i.top},cy-Gy,q.ME)])}function Qy(W){return W.brightness=0,s.M(W).delay(yy-Wy).animateTo({brightness:-.5},ny-yy,q.ME).animateTo({brightness:1.5},ky-ny,q.ME).animateTo({brightness:-.5},uy-ky,q.ME).delay(ey-uy).animateTo({brightness:1.2},ly-ey,q.ME)}function WM(W){if(!W)return S.M();const y=new yW.a(W);return y.opacity=0,s.M(y).delay(ny-Wy).animateTo({opacity:.65},gy-ny,q.ME).delay(ry-gy).animateTo({opacity:0},Ay-ry,q.ME)}var yM=M(590257),MM=M(980733),UM=M(835132);const iM="data:image/webp;base64,UklGRoYCAABXRUJQVlA4IHoCAADQHACdASqwAHAAPpE6mEgloyUlrbm7cLASCWluDjBoYFABXxrGaxoyRIXfPfpafR/kgmpj47m40VMzA1fYrqLGq+GS4xks9FE4QfmzCqIsflN2fiExbbDLwgXazPUziu+lIn8lClwsKhhGiW0SmSKQd6BYIIHoFUPeJba6hd70EuBfSLkdB8xVwfb8KWG+HoKF740MnreJPS0ksUTFjCJazgweEv4ThqX/thKdt3NoVyYUNvQ3mne5lvkIBoXc1dswL7buqcTxnxg4outmt/Gy0lDGsAoOFbA5L2CohAyNaeIgYvWuZJIIVMbZhtamAAD+2vv1s7Fwv7GmiSGJ2+26jbzjGaGUbhkT4+xPPD+Wiaf4UmdYlu+g+GcpdTSOvQ8iqnzlIjMz62v22cIs7xWyJcRVPLzdU5S65tDPl894SlONZZpAPAn/wJMAjbWaBi5nN4gCVlAK8cP/2aTaeeuCCR5qaQmED0JVVW6C9iPsn0JdJExTNj1wUpencmpLWUWO+XxQbcR85ALfzVIRkkuh34iBc8Ica7JNvzVge82rh83+VwxHOkMiDoR3v1kvb5BGiTuFES4QekSQHT23E2NGAb6ZSu+I1/9bHKDFockJ7Sp+FPRusvbzM3D23ScmVIiTun1oVQHSQzvwVyBWZpIZ3VmK/7Gvpr4EMl3+qpIO6oeKXgrM2d5vh2M4g0NvmC8mhpRlwG9dwUcIa/ZMca1pMdu7vvlwIT2G6Epx3qWmQ82G8k8cyiR1QCsN2vfQBHqQA9oerkUzA31+6L68gGarOi/T/u5RClFRd3oVubUkMVGpByI/CpMzEnPe7vZj2EVQiiXGYkCzzQAA",xM=M.p+"images/lightningb.30d614f2.webp",nM=M.p+"images/xxxtremeli.a33e03eb.webp",kM=M.p+"images/xxxtremelo.89e8bf2e.webp",gM="transitionBetSpotWrapper--bfd58",uM="transitionBetStudioGradient--9804c",eM="transitionBetSpot--a5604",lM="innerContainer--9bab7",GM="xxxtremeMask--b72bc",YM="showMask--0a4c5",cM="border--0756c",DM="icon--13b94",rM="background--47505",AM="backgroundImg--cdf5e",TM="xxxtremeBackgroundLightningContainer--1b36c",OM="xxxtremeBackgroundLightningSprite--b9012",hM="backgroundOverlay--b9caa",SM="chip--3a1b8",oM="xxxtremeLogoSprite--4b580",dM="multiplier--28397",qM="shineClipWrapper--186d8",sM="shineWrapper--4bbff",NM="shine--8a937",_M="glow--45baa",pM="xxxtremeMode--53722",bM="xxxtremeBorderLightningSprite--d4c99",mM={[Y.LightningStormBonusGame.BatteryCharger]:"batteryCharger--99130",[Y.LightningStormBonusGame.StormBonus]:"stormBonus--7616a",[Y.LightningStormBonusGame.HotSpot]:"hotSpot--c07a9",[Y.LightningStormBonusGame.Fireball]:"fireball--0dd9b",[Y.LightningStormBonusGame.MonsterMash]:"monsterMash--f994d"},zM=W=>{const{bonusGame:y,multiplier:M,chipAmount:x,gameDimensions:e,bonusCornerRef:l,winningBetSpotRef:c,bonusTransitionCenterRef:D,footerLogo:r,onTransitionEnd:A,isParticipating:T,onParked:q,bettingGridRef:s,componentLayout:N,isXXXtremeMode:p,vibrate:m}=W,[z,K]=n.useState(null),[P,I]=n.useState(null),[E,Z]=n.useState(null),[f,$]=n.useState(null),[a,H]=n.useState(null),[B,v]=n.useState(null),[L,X]=n.useState(null),[w,F]=n.useState(null),[t,J]=n.useState(null),[j,C]=n.useState(null),[Q,WW]=n.useState(null);return function(W){const{bettingGridRef:y,bonusCornerRef:M,bonusTransitionBetSpotContainerRef:U,bonusTransitionBetSpotGradientRef:i,bonusTransitionBetSpotGlowRef:x,bonusTransitionBetSpotInnerContainerRef:k,bonusTransitionBetSpotBackgroundRef:g,bonusTransitionBetSpotXXXtremeMaskRef:u,bonusTransitionBetSpotStudioGradientRef:e,winningBetSpotRef:l,bottomPlaceholderRef:G,footerLogo:Y,xxxtremeLogoRef:c,xxxtremeLightningBackgroundRef:D,xxxtremeLightningBorderRef:r,bonusTransitionBetSpotLogoRef:A,gameDimensions:T,componentLayout:O,onReady:h,onParked:q,isParticipating:s,isXXXtremeMode:N,vibrate:_}=W,p=n.useRef(T);p.current=T,n.useEffect((()=>{if(!(M&&M.xxxtremeLogo&&M.xxxtremeLightning&&M.xxxtremeLightningBall&&M.wheelMultiplierGlow&&M.xxxtremeParticles&&M.xxxtremeLogoGlow&&M.lightningSide&&M.lightningTop&&y&&U&&i&&k&&x&&A&&g&&u&&(O!==TW._.Desktop||e)&&l&&G&&(O!==TW._.Desktop||Y)&&c&&D&&r&&s&&N))return;const W=OW.G(y,p.current),n=OW.G(l,p.current),T=hW(n),b=OW.G(U,p.current),m=hW(OW.G(G,p.current)),z=hW(OW.G(M.container.element,p.current)),K=S.M();K.delay(d.Qi),K.parallel([dy({bonusCornerRef:M,vibrate:_}),By({containerRef:U,innerContainerRef:k,logoRef:A,shineRef:i,glowRef:x,backgroundRef:g,xxxtremeMaskRef:u,footerLogo:Y,xxxtremeLogoRef:c,xxxtremeLightningBackgroundRef:D,xxxtremeLightningBorderRef:r,studioGradientRef:e,horizontalLightningRef:M.lightningSide,initialPosition:T,initialScale:n.height/b.height,endScale:.7*W.width/b.width,bottomPosition:m,finalPosition:z,onParked:q,vibrate:_})]),K.callback(h);const P=o.l({anim:K});return()=>{K.fastForward(),P()}}),[h,q,U,i,x,A,g,u,e,M,G,l,k,y,Y,c,D,r,O,s,N,_])}({bettingGridRef:s,bonusTransitionBetSpotContainerRef:z,bonusTransitionBetSpotGradientRef:P,bonusTransitionBetSpotGlowRef:E,bonusTransitionBetSpotInnerContainerRef:f,bonusTransitionBetSpotLogoRef:a,bonusTransitionBetSpotBackgroundRef:B,bonusTransitionBetSpotXXXtremeMaskRef:j,bonusTransitionBetSpotStudioGradientRef:Q,gameDimensions:e,bottomPlaceholderRef:D,bonusCornerRef:l,winningBetSpotRef:c,footerLogo:r,xxxtremeLogoRef:t,xxxtremeLightningBackgroundRef:L,xxxtremeLightningBorderRef:w,onReady:A,onParked:q,isParticipating:T,componentLayout:N,isXXXtremeMode:p,vibrate:m}),function(W){const{bettingGridRef:y,bonusCornerRef:M,bonusTransitionBetSpotContainerRef:U,bonusTransitionBetSpotGradientRef:i,bonusTransitionBetSpotGlowRef:x,bonusTransitionBetSpotInnerContainerRef:k,winningBetSpotRef:g,bottomPlaceholderRef:u,footerLogo:e,gameDimensions:l,componentLayout:G,onReady:Y,onParked:c,isParticipating:D,isXXXtremeMode:r}=W,A=n.useRef(l);A.current=l,n.useEffect((()=>{if(!M||!M.lightningSide||!M.lightningTop||!y||!U||!i||!k||!x||!g||!u||G===TW._.Desktop&&!e||!D||r)return;const W=OW.G(y,A.current),n=OW.G(g,A.current),l=hW(n),T=OW.G(U,A.current),O=hW(OW.G(u,A.current)),h=hW(OW.G(M.container.element,A.current)),q=S.M();q.delay(d.Qi),q.parallel([V({bonusCornerRef:M}),rW({element:M.lightningSide,delay:b-_}),AW.z({element:M.lightningTop,delay:R-_}),iW({containerRef:U,innerContainerRef:k,shineRef:i,glowRef:x,footerLogo:e,initialPosition:l,initialScale:n.height/T.height,endScale:.74*W.width/T.width,bottomPosition:O,finalPosition:h,onParked:c})]),q.callback(Y);const s=o.l({anim:q});return()=>{q.fastForward(),s()}}),[Y,c,U,i,x,M,u,g,k,y,e,G,D,r])}({bettingGridRef:s,bonusTransitionBetSpotContainerRef:z,bonusTransitionBetSpotGradientRef:P,bonusTransitionBetSpotGlowRef:E,bonusTransitionBetSpotInnerContainerRef:f,gameDimensions:e,bottomPlaceholderRef:D,bonusCornerRef:l,winningBetSpotRef:c,footerLogo:r,onReady:A,onParked:q,isParticipating:T,componentLayout:N,isXXXtremeMode:p}),function(W){const{bonusCornerRef:y,onReady:M,onParked:U,isParticipating:i,footerLogo:x,componentLayout:k}=W;n.useEffect((()=>{if(i||!(null==y?void 0:y.container)||k===TW._.Desktop&&!x)return;const W=S.M();W.delay(d.Qi),W.parallel([qW(y.container,k),sW(x)]),W.callback(U),W.callback(M);const n=o.l({anim:W});return()=>{W.fastForward(),n()}}),[M,U,i,null==y?void 0:y.container,k,x])}({bonusCornerRef:l,onReady:A,onParked:q,isParticipating:T,componentLayout:N,footerLogo:r}),T?U.jsxs("div",{className:gM,children:[N===TW._.Desktop&&p&&U.jsx("div",{ref:WW,className:uM}),U.jsx("div",{className:eM,"data-role":h,ref:K,children:U.jsxs("div",{ref:$,className:lM,children:[U.jsx("div",{ref:Z,className:i.A(_M,mM[y],{[pM]:p})}),U.jsxs("div",{ref:C,className:i.A(GM,{[YM]:p}),children:[U.jsxs("div",{ref:v,className:rM,children:[U.jsx(UM.w,{className:AM,src:iM,alt:"bg"}),U.jsx("div",{className:i.A(hM,mM[y])})]}),U.jsx("div",{className:qM,children:U.jsx("div",{ref:I,className:sM,children:U.jsx("div",{className:NM})})}),U.jsx(G,{className:cM})]}),p&&U.jsx("div",{className:TM,children:U.jsx(u.d,{setRef:X,src:nM,spriteClass:i.A(OM,mM[y])})}),U.jsx(Y.LightningStormBonusGameImage,{ref:H,bonus:y,catalog:O,className:DM}),p&&U.jsxs(U.Fragment,{children:[U.jsx(u.d,{setRef:F,src:xM,spriteClass:bM}),U.jsx(u.d,{setRef:J,src:kM,spriteClass:oM})]}),void 0!==M&&M>1&&U.jsx("div",{className:dM,children:U.jsx(Y.LightningStormMultiplier,{value:`${M}x`})}),x>0&&U.jsx("div",{className:SM,children:U.jsx(k.v,{state:g.Y.Normal,amount:x})})]})})]}):null},KM=x.PA((()=>{var W;const y=MM.g(),M=y.wheel.outcome,i=y.bonusGameTransition.isTransitioning,x=n.useCallback((()=>{y.bonusGameTransition.setIsTransitionDone(!0),y.bonusGameTransition.setIsTransitioning(!1)}),[y]),k=n.useCallback((()=>{y.bonusGameTransition.setIsBetSpotParked(!0)}),[y]),g=n.useCallback((()=>{var W,M;y.settings.xxxTremeModeHaptic&&(null===(M=null===(W=window.navigator)||void 0===W?void 0:W.vibrate)||void 0===M||M.call(W,y.settings.xxxTremeModeHaptic))}),[y]);if(!M||!i)return null;const u=y.wheel.getBonusGameFor(M);if(!u)return null;const e={chipAmount:y.ui.betSpot.getChipAmount(M),bonusGame:u,multiplier:null===(W=y.wheel.outcomeMultiplier)||void 0===W?void 0:W.value,gameDimensions:y.abstractGame.values.gameDimensions,bonusCornerRef:y.references.bonusBetSpotReferences,winningBetSpotRef:y.ui.transitionBetSpot.winningBetSpotRef,bonusTransitionCenterRef:y.references.getReference(yM.Or.BonusTransitionCenter),footerLogo:y.references.footerLogoReference,onTransitionEnd:x,onParked:k,bettingGridRef:y.references.getReference(yM.Or.BettingGrid),isParticipating:y.bonus.isParticipating,componentLayout:y.device.componentLayout,isXXXtremeMode:y.bonus.isXXXtremeMode,vibrate:g};return U.jsx(zM,{...e})}))},217368:(W,y,M)=>{M.d(y,{z:()=>u});var U=M(234341),i=M(855500),x=M(150702),n=M(164956);const k=JSON.parse('{"frames":{"frame00":{"x":458,"y":0,"width":229,"height":448},"frame01":{"x":458,"y":0,"width":229,"height":448},"frame02":{"x":458,"y":0,"width":229,"height":448},"frame03":{"x":0,"y":0,"width":229,"height":448},"frame04":{"x":916,"y":0,"width":229,"height":448},"frame05":{"x":0,"y":896,"width":229,"height":448},"frame06":{"x":458,"y":896,"width":229,"height":448},"frame07":{"x":1145,"y":0,"width":229,"height":448},"frame08":{"x":1374,"y":0,"width":229,"height":448},"frame09":{"x":229,"y":1344,"width":229,"height":448},"frame10":{"x":229,"y":896,"width":229,"height":448},"frame11":{"x":687,"y":448,"width":229,"height":448},"frame12":{"x":916,"y":448,"width":229,"height":448},"frame13":{"x":687,"y":896,"width":229,"height":448},"frame14":{"x":229,"y":448,"width":229,"height":448},"frame15":{"x":687,"y":0,"width":229,"height":448},"frame16":{"x":0,"y":448,"width":229,"height":448},"frame17":{"x":229,"y":0,"width":229,"height":448},"frame18":{"x":1374,"y":448,"width":229,"height":448},"frame19":{"x":916,"y":1344,"width":229,"height":448},"frame20":{"x":458,"y":1344,"width":229,"height":448},"frame21":{"x":0,"y":1344,"width":229,"height":448},"frame22":{"x":1145,"y":448,"width":229,"height":448},"frame23":{"x":916,"y":896,"width":229,"height":448},"frame24":{"x":1145,"y":896,"width":229,"height":448},"frame25":{"x":687,"y":1344,"width":229,"height":448},"frame26":{"x":1145,"y":1344,"width":229,"height":448},"frame27":{"x":1374,"y":896,"width":229,"height":448},"frame28":{"x":458,"y":448,"width":229,"height":448}},"meta":{"size":{"height":1792,"width":1603}}}'),g=x.S(k);function u(W){const{element:y,delay:M}=W;if(!y)return U.M();const x=new i.s(y,{translateUnits:"%"});x.x=-50,x.y=-100,x.opacity=0;const k=n.Gn({frames:g,element:x,duration:g.length/n.J_});return U.M().delay(M).sequence(k)}},697231:(W,y,M)=>{M.d(y,{Q:()=>A});var U=M(64922),i=M(525620),x=M(377810),n=M(266600),k=M(276111),g=M(769413),u=M(234341),e=M(315049),l=M(757069);const G=1;var Y=M(590257),c=M(980733),D=M(341360);const r=W=>{const{videoScalingContainer:y,footerGradientElement:M,videoScale:U,footerGradientHeight:i,isPortrait:Y,gameDimensions:c}=W,r=x.useMemo((()=>{if(y)return new D.a(y,{transformOrigin:"center top"})}),[y]);return function(W){const{videoElement:y,footerGradient:M,videoScale:U,footerGradientHeight:i,isPortrait:Y,gameDimensions:c}=W,D=x.useRef(!0),r=l.Z(c);x.useEffect((()=>{if(!y&&!M)return;const W=D.current||!n.A(r,c);D.current=!1;const x=W?0:G,l=[];y&&l.push(g.M(y).animateTo({scale:U},x,k.dV)),M&&l.push(g.M(M).animateTo(Y?{y:i,scaleY:1}:{scaleY:i,y:0},x,k.dV));const A=u.M().parallel(l);return e.l({anim:A})}),[y,M,U,i,Y,c,r])}({videoScale:U,footerGradient:x.useMemo((()=>{if(M)return new D.a(M,{translateUnits:"%",transformOrigin:"center bottom"})}),[M]),footerGradientHeight:i,isPortrait:Y,videoElement:r,gameDimensions:c}),null},A=i.PA((()=>{const W=c.g(),y={videoScalingContainer:W.abstractGame.values.videoMobileScalingContainerHtmlElement,footerGradientElement:W.references.getReference(Y.Or.FooterGradient),videoScale:W.videoRect.scale,footerGradientHeight:W.ui.videoFooterAnimator.gradientHeightPercentage,isPortrait:W.device.isPortrait,gameDimensions:W.abstractGame.values.gameDimensions};return U.jsx(r,{...y})}))},996468:(W,y,M)=>{M.d(y,{k:()=>cM});var U,i,x=M(64922),n=M(699695),k=M(525620),g=M(377810),u=M(346160),e=M(587698),l=M(876759),G=M(890023),Y=M(277082),c=M(981298);(function(W){W["EvenMoney"]="EvenMoney",W[W["HotSpot"]=Y.LightningStormBonusGame.HotSpot]="HotSpot",W[W["MonsterMash"]=Y.LightningStormBonusGame.MonsterMash]="MonsterMash",W[W["BatteryCharger"]=Y.LightningStormBonusGame.BatteryCharger]="BatteryCharger",W[W["Fireball"]=Y.LightningStormBonusGame.Fireball]="Fireball",W[W["StormBonus"]=Y.LightningStormBonusGame.StormBonus]="StormBonus"})(U||(U={})),function(W){W["None"]="YouWinAnimationStage.None",W["Show"]="YouWinAnimationStage.Show",W["Hide"]="YouWinAnimationStage.Hide"}(i||(i={}));const D=[c.R.Medium,c.R.Big],r=[c.R.Big],A=[c.R.Medium,c.R.Big],T=3,O="game-win-result",h="winning-message",S="amount";var o=M(769413),d=M(315049);const q=0,s=.1,N=.267,_=.33,p=.433,b=.567,m=.667,z=.7,K=.8,P=.9,R=1.467,I=2.2,E=2.4,Z=2.5,f=2.6,V=2.7,$=2.8,a=2.9,H=3,B=3.3,v=3.4,L=3.8;var X=M(276111),w=M(234341),F=M(625915);function t(W){const{wheelRef:y}=W,M=F.$(o.M(y.wheel).callback((()=>{y.wheel.rotation=0})).animateTo({rotation:360},L-q));return w.M().sequence(M).onDispose((()=>{M.dispose()}))}function J(W){const{gradientRef:y,winLevel:M}=W;return y.forceHardwareAcceleration=!0,w.M().parallel([o.M(y).callback((()=>{y.brightness=0})).delay(p-q).animateTo({brightness:M===c.R.Big?1.5:.7},b-p,X.ot).animateTo({brightness:0},R-b,X.RN).animateTo({brightness:M===c.R.Big?1.18:.7},E-R,X.ot).animateTo({brightness:0},f-E,X.ot),o.M(y).callback((()=>{y.contrast=0})).delay(p-q).animateTo({contrast:1},b-p,X.ot).animateTo({contrast:0},R-b,X.RN).animateTo({contrast:.5},E-R,X.ot).animateTo({contrast:0},f-E,X.ot),o.M(y).callback((()=>{y.lightness=0})).delay(E-q).animateTo({lightness:M===c.R.Big?.8:.6},Z-E,X.ME).animateTo({lightness:0},f-Z,X.ME),o.M(y).callback((()=>{y.opacity=0})).delay(p-q).animateTo({opacity:1},b-p,X.ot),o.M(y).callback((()=>{y.scale=.9})).delay(E-q).animateTo({scale:1.09},Z-E,X.$g).animateTo({scale:1},$-Z,X.$g)]).callback((()=>{y.forceHardwareAcceleration=!1}))}function j(W,y){return W/y}function C(W){const{iconRef:y,winLevel:M}=W,U=o.M(y).callback((()=>{y.brightness=0})).animateTo({brightness:M===c.R.Big?1.5:.7},_-q,X.ME).animateTo({brightness:0},P-_,X.ME);M!==c.R.Small&&U.delay(R-P).animateTo({brightness:M===c.R.Big?1.18:.7},E-R,X.p2).animateTo({brightness:0},Z-E,X.ED);const i=o.M(y).callback((()=>{y.contrast=0})).animateTo({contrast:1},_-q,X.ME).animateTo({contrast:0},P-_,X.ME);M!==c.R.Small&&i.delay(R-P).animateTo({contrast:.5},E-R,X.p2).animateTo({contrast:0},Z-E,X.ED);const x=o.M(y).callback((()=>{y.scale=j(3,T)})).delay(N-q).animateTo({scale:j(.9,T)},b-N,X.ME).animateTo({scale:j(1.04,T)},z-b,X.ME).animateTo({scale:j(.98,T)},K-z,X.ME).animateTo({scale:j(1,T)},P-K,X.ME);return M!==c.R.Small&&x.animateTo({scale:j(1.1,T)},E-P,X.ME).animateTo({scale:j(1,T)},Z-E,X.hb),y.forceHardwareAcceleration=!0,w.M().parallel([U,i,x,o.M(y).callback((()=>{y.opacity=0})).animateTo({opacity:1},s-q,X.ME)]).callback((()=>{y.forceHardwareAcceleration=!1}))}function Q(W){const{gradientRef:y,winLevel:M}=W;return w.M().parallel([o.M(y).callback((()=>{y.scale=3})).delay(N-q).animateTo({scale:.9},b-N,X.ME).animateTo({scale:1.04},z-b,X.ME).animateTo({scale:.98},K-z,X.ME).animateTo({scale:1},P-K,X.ME).animateTo({scale:1.1},E-P,X.ME).animateTo({scale:1},Z-E,X.hb),o.M(y).callback((()=>{y.brightness=0})).animateTo({brightness:M===c.R.Big?1.5:.7},N-q,X.ot).animateTo({brightness:0},z-N,X.RN),o.M(y).callback((()=>{y.contrast=0})).animateTo({contrast:1},N-q,X.ot).animateTo({contrast:0},z-N,X.RN),o.M(y).callback((()=>{y.opacity=0})).animateTo({opacity:1},b-q,X.RN)])}var WW=M(855500),yW=M(150702),MW=M(164956);const UW=JSON.parse('{"frames":{"frame_17":{"x":564,"y":573,"width":187,"height":190},"frame_18":{"x":376,"y":573,"width":187,"height":190},"frame_19":{"x":564,"y":382,"width":187,"height":190},"frame_20":{"x":188,"y":573,"width":187,"height":190},"frame_21":{"x":564,"y":191,"width":187,"height":190},"frame_22":{"x":0,"y":573,"width":187,"height":190},"frame_23":{"x":564,"y":0,"width":187,"height":190},"frame_24":{"x":376,"y":382,"width":187,"height":190},"frame_25":{"x":188,"y":382,"width":187,"height":190},"frame_26":{"x":376,"y":191,"width":187,"height":190},"frame_27":{"x":0,"y":382,"width":187,"height":190},"frame_28":{"x":376,"y":0,"width":187,"height":190},"frame_29":{"x":188,"y":191,"width":187,"height":190},"frame_30":{"x":0,"y":191,"width":187,"height":190},"frame_31":{"x":188,"y":0,"width":187,"height":190},"frame_32":{"x":0,"y":0,"width":187,"height":190}},"meta":{"size":{"height":764,"width":752}}}'),iW=yW.S(UW);function xW(W){const{multiplierRef:y}=W;return o.M(y).callback((()=>{y.scale=0})).animateTo({scale:1.18},b-q,X.$g).animateTo({scale:.96},z-b,X.$g).animateTo({scale:1.02},K-z,X.$g).animateTo({scale:1},P-K,X.$g).animateTo({scale:1.1},E-P,X.$g).animateTo({scale:.96},Z-E,X.$g).animateTo({scale:1.02},f-Z,X.$g).animateTo({scale:.98},V-f,X.$g).animateTo({scale:1},$-V,X.$g)}function nW(W){const{elementRef:y,winLevel:M}=W,U=o.M(y).callback((()=>{y.brightness=M===c.R.Big?1.5:.7})).delay(b-q).animateTo({brightness:0},R-b,X.$g);M!==c.R.Small&&U.animateTo({brightness:M===c.R.Big?1.18:.5},E-R,X.AU).animateTo({brightness:0},Z-E,X.lu);const i=o.M(y).callback((()=>{y.contrast=1})).delay(b-q).animateTo({contrast:0},R-b,X.lu);M!==c.R.Small&&i.animateTo({contrast:.5},E-R,X.AU).animateTo({contrast:0},Z-E,X.lu);const x=o.M(y).callback((()=>{y.lightness=0}));M!==c.R.Small&&x.delay(E-q).animateTo({lightness:M===c.R.Big?.5:.6},Z-E,X.ME).animateTo({lightness:0},f-Z,X.ME);const n=o.M(y).callback((()=>{y.scale=.5})).delay(p-q).animateTo({scaleX:1.06,scaleY:1},b-p,X.$g).animateTo({scaleX:.98,scaleY:1},z-b,X.$g).animateTo({scale:1},K-z,X.$g).delay(P-K);return M!==c.R.Small&&n.animateTo({scale:1.4},E-P,X.$g).animateTo({scale:.94},Z-E,X.$g).animateTo({scale:1.02},f-Z,X.$g).animateTo({scale:.98},V-f,X.$g).animateTo({scale:1},$-V,X.$g),y.forceHardwareAcceleration=!0,w.M().parallel([U,i,x,n,o.M(y).callback((()=>{y.opacity=0})).delay(p-q).animateTo({opacity:1},b-p,X.RN)]).callback((()=>{y.forceHardwareAcceleration=!1}))}var kW=M(417550);function gW(W){const{shapeRef:y,winLevel:M}=W,U=[nW({elementRef:y,winLevel:M})];return M===c.R.Big&&U.push(w.M().delay(P-q).sequence(kW.i({element:y,duration:Z-P,amplitude:[.05,.01],frequency:30}))),w.M().parallel(U)}var uW=M(384511),eW=M(228174);function lW(W){return new GW(W)}class GW{constructor(W){this.props=W,this.time=0,this.done=!1,this.currentStepIndex=0,this.currentCycleTime=0,this.totalTime=1e3*this.props.duration,this.currentValue=this.props.steps[0].valuePercent*this.props.value}get value(){return this.currentValue}get cycleEnded(){return this.done}get currentTime(){return this.currentCycleTime}update(W){for(this.done&&(this.time=0,this.done=!1,this.currentStepIndex=0);W>this.totalTime;)W-=this.totalTime;this.time+=W,this.currentStepIndex=this.getCurrentStepIndex(this.time),this.updateValue(this.time),this.currentCycleTime=Math.min(this.time/this.totalTime,1),this.time>=this.totalTime&&(this.done=!0)}reset(){this.time=0,this.done=!1,this.currentStepIndex=0,this.currentValue=this.props.steps[0].valuePercent*this.props.value,this.currentCycleTime=0}fastForward(){for(;!this.done;)this.update(this.totalTime)}getCurrentStepIndex(W){for(let y=1;y<this.props.steps.length;y++){const M=this.props.steps[y-1],U=this.props.steps[y],i=M.durationPercent*this.totalTime,x=U.durationPercent*this.totalTime;if(W>=i&&W<x)return y-1}return this.props.steps.length-1}updateValue(W){var y;const M=this.props.steps[this.currentStepIndex];if(this.currentStepIndex===this.props.steps.length-1)return void(this.currentValue=M.valuePercent*this.props.value);const U=this.props.steps[this.currentStepIndex+1<this.props.steps.length?this.currentStepIndex+1:0],i=M.valuePercent*this.props.value,x=U.valuePercent*this.props.value,n=M.durationPercent*this.totalTime,k=U.durationPercent*this.totalTime,g=W-n,u=null!==(y=M.easing)&&void 0!==y?y:X.sn,e=g<=0?0:eW.GB(u(uW.qE(g/(k-n),0,1)),4);this.currentValue=uW.Cc(i,x,e)}}var YW=M(297462);function cW(W){return new DW(W)}class DW{constructor(W){this.props=W,this.state=YW.c.Idle}get active(){return this.state===YW.c.Active}get done(){return this.state===YW.c.Done}tick(W){return!this.active||this.done||(this.props.animator.update(W),this.props.onUpdate(this.props.animator.value),this.props.animator.cycleEnded&&(this.state=YW.c.Done)),this.state}activate(){this.done||this.active||(this.state=YW.c.Active)}reset(){this.props.animator.reset(),this.state=YW.c.Idle}fastForward(){this.active&&(this.props.animator.fastForward(),this.props.onUpdate(this.props.animator.value),this.state=YW.c.Done)}dispose(){this.reset()}toJSON(){return{kind:"timeline",steps:[]}}}const rW=B-q;function AW(W){const{wheelRef:y,winLevel:M}=W;let U;switch(M){case c.R.Big:U=lW({value:291,duration:rW,steps:[{durationPercent:0,valuePercent:0},{durationPercent:R/rW,valuePercent:.5,easing:X.ED},{durationPercent:E/rW,valuePercent:.61,easing:X.ED},{durationPercent:B/rW,valuePercent:1,easing:X.ED}]});break;case c.R.Medium:U=lW({value:241,duration:rW,steps:[{durationPercent:0,valuePercent:0},{durationPercent:R/rW,valuePercent:.51,easing:X.ED},{durationPercent:E/rW,valuePercent:.65,easing:X.ED},{durationPercent:B/rW,valuePercent:1,easing:X.ED}]});break;default:U=lW({value:241,duration:rW,steps:[{durationPercent:0,valuePercent:0},{durationPercent:R/rW,valuePercent:.5,easing:X.ED},{durationPercent:B/rW,valuePercent:1,easing:X.ED}]})}return y.container.forceHardwareAcceleration=!0,w.M().parallel([o.M(y.container).callback((()=>{y.container.scale=0})).animateTo({scale:1.18},b-q,X.$g).animateTo({scale:.96},z-b,X.$g).animateTo({scale:1.02},K-z,X.$g).animateTo({scale:1},P-K,X.$g).animateTo({scale:1.1},E-P,X.$g).animateTo({scale:.96},Z-E,X.$g).animateTo({scale:1.02},f-Z,X.$g).animateTo({scale:.98},V-f,X.$g).animateTo({scale:1},$-V,X.$g),o.M(y.container).callback((()=>{y.container.lightness=0})).delay(E-q).animateTo({lightness:M===c.R.Big?.8:.6},Z-E,X.ME).animateTo({lightness:0},f-Z,X.ME),w.M().callback((()=>{y.wheel.rotation=0})).sequence(cW({animator:U,onUpdate:W=>{y.wheel.rotation=W}}))]).callback((()=>{y.container.forceHardwareAcceleration=!1}))}function TW(W){const{amountRef:y,winLevel:M}=W,U=o.M(y).callback((()=>{y.brightness=0}));M!==c.R.Small&&U.delay(s-q).animateTo({brightness:.6},I-s,X.AU).animateTo({brightness:0},Z-I,X.AU);const i=o.M(y).callback((()=>{y.scale=.5})).delay(p-q).animateTo({scale:1.08},b-p,X.$g).animateTo({scale:.91},z-b,X.$g).animateTo({scale:.96},K-z,X.$g).animateTo({scale:M===c.R.Small?1:.945},P-K,X.$g);return M!==c.R.Small&&i.animateTo({scale:M===c.R.Big?1.57:1.35},E-P,X.$g).animateTo({scale:M===c.R.Big?.87:1},Z-E,X.$g).animateTo({scale:M===c.R.Big?1.03:.92},f-Z,X.$g).animateTo({scale:M===c.R.Big?.965:1.02},V-f,X.$g).animateTo({scale:(c.R.Big,1.01)},$-V,X.$g).animateTo({scale:M===c.R.Big?.99:1},a-$,X.$g).animateTo({scale:1},H-a,X.$g),w.M().parallel([U,i,o.M(y).callback((()=>{y.opacity=0})).delay(p-q).animateTo({opacity:1},b-p,X.$g)])}function OW(W){const{titleRef:y,winLevel:M}=W,U=[nW({elementRef:y,winLevel:M}),o.M(y).callback((()=>{y.y=-9})).delay(N-q).animateTo({y:0},m-N,X.xZ)];return M===c.R.Big&&U.push(w.M().delay(P-q).sequence(kW.i({element:y,duration:Z-P,amplitude:[.1,.05],frequency:30}))),w.M().parallel(U)}var hW=M(738759),SW=M(604929),oW=M(722950),dW=M(294116),qW=M(894962),sW=M(61106);const NW="data:image/webp;base64,UklGRkIDAABXRUJQVlA4WAoAAAAQAAAAGAAAGAAAQUxQSHMBAAANmYzof0CObNuqrcy1zrn/f9xdQrKfQQ8oGk0biD1yd5e798KlBxETMAHEf5dmTSTCmjWRJr+SkGZtKAKEhEUzAJCQAAQBhEiTkBCECJq1IRAixSKkWYQhrIWEWBOTAimBYk0gghisDGIytLBWopQWIYAMhogFzAzSWimrVbQCwwQbRDDZhCHiDWDa8tkzEljEwizMhkEmeQm/3O24964aYmGTCMwmG17D7/c65ophMBuamcjwEf70kDfewSAiCMMZt/0RzrnsLIg0SMMdl9z0R7dcdBdQpEhpscc+z/zBc7vt11qRJl+htNV5j7z1m7ceuqCUVhoiVqVgtW2Hh94D8M5jW7a1Fb6IBimlrSJiOGTx2SefbThgioavsAprBVEaQiZZ2DQZgCglWgCtSIFITLKAiYWt0LCCFWshgTaFmMTUpFhEM4gUQxMAgjAAEiEhYcUQghCENYEEIGgCNAEQAoQ1ixAJaQIAgl+HhABASAh+BgBWUDggqAEAABALAJ0BKhkAGQA+kT6XSSWjIiEoDVCwEglsAJ0vbfpvCEuB1Sf5n+MGOA/Tf/Gfyv3quiq6ivnmf10+Dv9p/RmTwIZp5HkQAPv/oJGG2WvtfOKkZ0LuaEaJX/QA4JmzakAA/rQOu51EYFQLXwg2HvUN2luyzeSAqcTLlKjf5J/TazcqBRY3sHF6K+QywA+KsIqKvlJyw+ba/WZwT8rG0c3J0uxSyrMTf0zbel+lEhAmpL/kd5PR8pVDK1K4MkDJ46DLGd4P/+6C9e09QSbFeb06SO1oYxgzgqRKgLEhx3w3NRuRkrAqrE3L84e2lKwLtZHX2YakHAp4bY5zDTzxqvmTRZkHa82R4qhmU/irhRrjAG+IWVJtoXF7X53D+5NcTdyIfLO+xWRwx+2NLAn26706ecvUxXtW9l2AVZsdtIPvUyKKy+35zdEIKi/9QeOumvi1/l+RkE18Mp8B2Rr/xZ3vp/+llb5VH5zF9zYvQS9fi5aKXFPNBx4K7/GfgX8pBMjSvLtvfMbqsDCKdE9dcNz6f9+VWzz7A8Jglfj97J974FgducgAAAA=",_W="data:image/webp;base64,UklGRkoDAABXRUJQVlA4WAoAAAAQAAAAGAAAGAAAQUxQSHMBAAANmYzof4BybduqrWrMuc7B3a3oriHQSJsMqDkld3c5e03s359CxARMAPG/pQn+WwIh0kSaAGFN/iUNFhIQNJEmCEFYBKQZAtaAEBskICEymEgzBGwoiJDBQiIsICFAM4FAImRhC2kCiIQF2gRWWmmBIRYxBEJgJgaRApuEDFgs2k8xNIHJBEViYlbMGj4Ayno/vASITTBDFJSZmL2Ff250wGc3SJE1MBFYsVLew39vts91mMgMzQzFvsKqO330XpEiEgI75L6VcNg1+00GiwgbHrrqrpXuueKRBjQbBrQtNntthVe22cAWaNKiLdpw2XMf/MdHz12An2JogfZTDANO2OipzwB88tw6p0VbtGGQ1vBDxCC20+y7b76b7VSiYRE/ARED2kIQMyuTUgqAQX6QBaRh0azBUMyswBAYogHWQiJCIBAxgQQiJEJaaYIAQiQMYU2kSQAhYQ2wJgELSEhA0AQChAAh0qxZAJAIwcohISFYEQBWUDggsAEAAPAJAJ0BKhkAGQA+kT6XSKWjIiEoDVCwEglsAJ0vbfptMv0gH4q+gBpAP0U/qvto6YBzxn66fBZ5JP//cCTUAI2XdwBxmcWvj2cjmbiCOaHdrMHRSwrZ5/oA/pUIwzpPGcmS45bfhMLMv19k4G8Wk4gfkfF5ihs8OrKuLk3votVi3Hbzm5m+B0orWUPmew7fnRWEv6+08f9pR9iI7AAY1w/y4keSY+Xunh5Aiflm0Z3nJ2amA34MnwzpYkbxv29P/d60REXSItvM/zpI8yU5g0afYtzzH9wLbuOpF31d5J4dFphkg37fDv4V4H769vKDBGbi86H6XJ8EolpM3ONylxeSi3kP/rNdyoemVaqw8GVxBGhwUP/u6dRR+VD/cBft9KbnI1g0fQja1pcY1P8wLZA7Jdn8CZpaVg7xKf8zPXriuC9V3UeG/7UQVuZCO//qjkn/bQIVQ+KyyWr+fP6rVvfZ9Bh/4YAxZOwofAJOjBpu0/o/ofefeuw+6U6P+gt7vs71Y+d85SMjE+v4fX/X/4o0H/cF494RTp7wV1A5svHVqk/79oUc9/+JW+MC36wAAA==",pW="data:image/webp;base64,UklGRlQDAABXRUJQVlA4WAoAAAAQAAAAGAAAGAAAQUxQSHABAAANmYzof0BybNuqrcy193nfBfeu0/0pQNSEQAL8Hu7ucPZe6P0pREzABBALpQmOKmYCAGIm0kKT/0gTgQEwEbNQkgEmYgDEgNAsGGAIJaClZmIQCyYlWQvNRMpQgpQECAQCSDOZxDCtlNSSSWgBKQCCYqUVm4YpWcBKa0EGGxCsWZumqeGnABlEhoAQhhBE2gfAsOG7V8KUkgwyAIMMMoQ38M8d53xyDyQNQWBpkJTew//3nHVXSjIkEwmSvsLSkz76QJLAQpNwyX2LcNkdlwQxtNDwwG2HFh265bFiYigotmfXawte27WvWBGD/WSlHHjug/989MyBqRX8BLOp2GQ3bXnqMwCfPLPtOrPSfhDIZFNrZuG04btvvls5BaG1UvBDaEVKQQuQtJJSShastdZgQEEBDClISgGpBLNJJgiaoEhLFkQgwaTBpAQIYJZKMEAsABBrqQECEwslABaaQAwQlIB/W7AmYoKFYv+ACY5qAlZQOCC+AQAAsAoAnQEqGQAZAD6RQJhJpaOiISgKqLASCWwAnTLVQX+q8IS4HVP/nOcAeoD9E/87/APeS6JLqIOeV/aP4QPJSJnjyQt1ADr7ii3uY2MJcQVhqJmGGNj/XQJQmtx1YAD7I+nbP3ZZdqsW03FunA+6wcugRdTEss64iPuhszus7pveoV7CqepfZj8ci4TiVpd8PCH/WF1xN/V7Y8fLW7zXJiNmnA3/raHhuz8XlP34FdLUyas423+YB5HJ/P2/egEXWvybBidds3KquH1ee73pzHPyxOxB/tswZlQLxHJaLrpyc1wfOhOsXdmHS/P7wFOv5gWDj/yj0Z37KvVUudJaqVqFpf6dkHaEFQgU9fuH7mhben3BD6LVJ/1GO/OmxFZuVYY4928Qg67UR+ZV00m6OGk253gD/dks0prXR5Wvl40v/pCrhB/0/4j6b9cOqArvw6tiU5N/gnb7j14X/63s4PnX+LbfxcSr/PZd1Pwef0d9ZXP4c6/S6YUVDcXkklHgmLDRDiPNqQ4q+wD6ta7OfROHjBH3AJLJGH/6/BORTTb4e8sH/Vn0DZs+aFeUnATKF4uf/w2lGa/C+aFKgAA=",bW="data:image/webp;base64,UklGRjIDAABXRUJQVlA4WAoAAAAQAAAAGAAAGAAAQUxQSHMBAAANmYzof0CSJNuqrdTa537c3Vu0CFoEE/BpMwK67u76/f+718JhCBETMAHEn8UE/1ECgWICCSCKyW8kEMUGg5iEIIqJmEggCgLFECIREsUgIQIrCJRAFJOwoUmUkJCI0opIiETAEE0ACEQgMcQkBtgwM7MWYVGkCAagDFKkwMw2tdYaxIYiE0hMBkwGwBYBw3brPrEopUxkiEFkwVDwBX67y1GrbhEZJqVIDBOZYBH+vNsxN5VBFsAGyIB1+NuDFn01FEwkRHDGE3+Fs244QQQRgD133T1/9cAlrwRaRFjYHrt99Bcf7bZXs0BIm4XNLnpj0R8WvXEB2qwBaLbJIs7Z7q0lAJa8tc15YZvQZoho2NRCygFbrdqwZsFBQ4Q1a63ETDYhApjIAtmilBJoaNECMDNYEQyyICYCCcQsAIFJhBhKTEIKJKRFMREEBCYQKyHFikmUCIkQMQkJiRIAEAUwASAICQGiGAQSYoJ/DQEQEoLfAwBWUDggmAEAAHALAJ0BKhkAGQA+kT6XSSWjIiEoDVCwEglsAJ0v1voH4V8IFBQcCN1/0n8ZvkB9me4Z+oD9E/6fvQHWO+gB5O/7d/Bh+3fowuGRasZ35FfdoWSsZHzDQTy6E1/T+uzwmufP1fgA/tSRJoYewma+uNatW+f012WKvdTAioQWklw9bXq/6QvjW9e8HLW3MX9jJoCHyK6SFUI+QOx0jkQhpUvypPglIU3+v9VasvVv/0xB9M4dyVt9zcVsryTFU/VfIvMd/uOQVPgpXrR2NAk4QElZ68003CsRWmqXVbHsu9g7ZWpb7+ZNFLwCfvIMufJmcSxPX66visL7voRPyosnLebcCtNkGMFcSckulxexrhvTm+SLAL+kKlraoxocOxYihTzhtgSVBdPfmbJOJjtI9L6Yo0G6ejy4IbWf+qNHBy6Ei/346FeKgRTPeuV7RW6l/xuzBhb60XA4pLWa53ZY5540F6LJeFc2loZN/8Yz1ZYZcR0kcMr2UHQMIAp79nmlf7u/ghitI1HYPl4sPkceKhS2CNAuUAAAAA==",mW="data:image/webp;base64,UklGRnoDAABXRUJQVlA4WAoAAAAQAAAAGAAAGAAAQUxQSHQBAAANmYzof0CSJNuqrdTa51zcXZsOrT8HGDVDoO3u7s59Z63OfS+CGURMgAK3bZQxH76C+C8Uk0UcgEQI1jYhYU0AEmIlrIgJrFlur5gEJCCGsvSGIgIrAZHAImAlQiQEASsQCAAxi4AJIAKJKNGggcAw2IDBFtueoAgaTIAmZGbDMLMBQGmiKxJdka4LDD8A3XazDwIiXSPdYlJp8AUWuNspP9xSSumKRJGmdPgOa4h9jrupaWQiYp1I+QOb8LAfvigNytBENGc9gY14zg1nRYMyCOKZa+7bCPdc94wMYhEWts9eH22Aj/bZI8IsZCVWzLa8880afPfGFtjMDBhsFgMu2+W1nwD88NYOV2FmNpgM5Z9YCVhz2OSPf/6YHNZE2GA2QP4ptgKDdKUrzURKBGwlIkoMERECaaQrUiABsxgKYiEBoBGBSCCsLOYiIAYRACiBKFYGSBkKAGsiIIgSEIQEABMsgiJWbJGVtb+JNQyJ5d4QAgBWUDgg4AEAALALAJ0BKhkAGQA+kT6XSKWjIiEoDVCwEglsAJ0y3sF/qu8smAVdX+gfirogHqA/SX/Vf0D3ldMA9ADyb/2g+Db7ZvZc//5UH/9f5j0WYI73kv5S0l2x2Jg1asAO6EaP9BbUB0tEgADOPlrwwado6USJGZrQOipTFs/NSC6JWjz9JkaKferFNz9WRoIT/KEpvF38DZbR+AtEzLHwBsCV6d4+MMU4M+XG0rnCU4RrP1v2F/R3kRvnAHVvy9pMafts6RFcPcY2vAK/6n9dyyAIL7OfmPQ5CP70GF9CKYKlx9zI/kO4rF1VOz7Z3kHvMqjgskczvtPT+qHinJv6dzc7TA2ZcDjGraJPzUXwg6dAT5BGI2aEWc2RJNnzMHGv3+9GJn/0e05bhRbo9f3EqYv9GB6W7WnShH4Xmnrdr/i93Fve8u01UWmGX1nOrHlgfwx6+WISkXl0mh0zaH+uRt3cl3H/3MlmY+JsezmDAhEvgkSHrF3OtZbX6mfpGn/y45lAgfyCq7XoIUEC/pd88g/V5+X+vnqLE2pS4v9pOgKvp5eAIXoAUf/mocvJCpTJ937//w71C/b6HN9YrLyMTNu5yolF0n/76znAVg9lNmPdJ+EY3f8jcqIdu1AfW+BcvIagAA==",zW="data:image/webp;base64,UklGRkwDAABXRUJQVlA4WAoAAAAQAAAAGAAAGAAAQUxQSHEBAAANmYzof0BybNuqrcy1zr0fd7emdyECT5oQ6Lu7u3P3XrhkEDEBE0D8Z4mfQiBNpMlP0kSaNQsAgmhDhAAhaCJtKBaCgDQIAtZgzSwgIWEBoEHQRJqFSEEIINYEaEAJIEQkxMLaRIZmaCixiIIGgZmYtQkmmARQ2hfxVSwAmA0wxMRsMIt4AxjW+OyFFmaDzBCD2MQGvIJfrrfLBxdZrMBkgNgEM3kDv99olwsmmJlImEzwCf50m7deGwyTJhDsd8cf4aDzDoAAaMA9J13zR1ecc4ugNKCV2GiD5/7guQ02ihKQKK2VcsJjb/zmjSeOW7T4KgKllIJyzDqPvAPgvYfWOibwVWlNin3VFk1Ctpt99sknK7azwCIWUSBfSJRoIjLMhokMIlHQFgBk0RABMZNhMGsWKGhNAtIQCMEQFpMyW0igWWlDgwQgzQKGsCZhTQIWgrAmIQgBJCBo1gQ/SzGEhAWkDGiCEPwyBCFASAhC8GsAVlA4ILQBAACwCgCdASoZABkAPpE+mUmloyIhKAqosBIJbACdMyYBf47xBrgdTP+geKBpAP0T/u38r97rTJfQA8pb9mfgk/bj0fHDItLk5r7/68XAiRCvJN7JThaPsz+JupaEvKQAAP7JZwC4aGlOqFXl6M6KC7+GtyzExm+GRpyiWu/YIPHtmm/kiPbyissiFxFAaX0Lpxp4yQJQxl/xlV+8s/xotWm9j6cbxUtNoEmUSbL/9EDN5xO7tGFF4JLVytwsFs+xGOAd7T/97yM3orxNHIZf522CQrOok0B+5GOEZYCls1n7Ezdn7De7GwX/HEvDxFH5306+uoJoxHwa0K2eP+NJL3uZj2arMTdCfJKz5DrYPZsURsfPmzag1c57RU+isrlRnAj6nbVi9a27uVixQkO4jucX3yJtWvt+Hxw8BPL3ntZk5w8i2WY1mdPS/6rPv/n//7EeRnwTb/5vnh+xbhYVghdx7F1MgfJo7ns4VOoHqF7o+Asp5NBYZLEGllg9P1zpBwVV74E1X04VbS3ktVuVzD2vgi8WNqf50sfVtL/+SX8D7TT9be6uDeUkVDe2viN5MS2ErwAA",KW=JSON.parse('{"systemSize":{"width":1219,"height":1450},"fps":60,"fixedDt":false,"randomSeed":"","blendMode":"default","controllerConfigs":{"CANVAS_PARTICLES":{"autoStart":false,"loop":false,"explosiveness":true,"amount":150,"emissionDelay":0,"particlesPerWave":150,"particle":{"colors":{"gradient":false,"mode":"Random","colors":["#67D411","#02AEE4","#C92EFF","#E40097"]},"damping":0.015,"gravityVector":[0,2000],"directionVector":[-2.0816681711721685e-17,2.0816681711721685e-17],"spread":180,"angularVelocity":{"min":3.2608695652173916,"max":11.304347826086955,"curve":[]},"initialRotation":{"min":0,"max":6.283185307179586},"opacity":{"min":0,"max":1,"curve":[{"point":[0,1],"easing":"linear"},{"point":[0.25,0.72],"easing":"linear"},{"point":[0.4,0],"easing":"linear"},{"point":[0.42,1],"easing":"linear"},{"point":[0.49,0],"easing":"linear"},{"point":[0.57,1],"easing":"linear"},{"point":[0.6,0],"easing":"linear"},{"point":[0.7,1],"easing":"linear"},{"point":[0.73,0],"easing":"linear"},{"point":[0.84,1],"easing":"linear"},{"point":[0.9,0],"easing":"linear"},{"point":[0.91,1],"easing":"linear"},{"point":[1,0.02],"easing":"linear"}]},"lifetime":{"min":1,"max":2},"scale":{"min":1.19,"max":2.27,"curve":[{"point":[0,1],"easing":"linear"},{"point":[0.3,0.7],"easing":"linear"},{"point":[1,0],"easing":"linear"}]},"initialVelocity":{"min":50,"max":2000},"linearAcceleration":{"min":-300,"max":174,"curve":[{"point":[0,2],"easing":"linear"},{"point":[1,1],"easing":"linear"}]},"tangentialAcceleration":{"min":0,"max":60,"curve":[]},"radialAcceleration":{"min":0,"max":283,"curve":[]}},"emitter":{"position":[0.5,0.45],"type":"ellipse","width":70,"height":0}}},"graphicsConfig":{"CANVAS_PARTICLES":{"textureId":"991a0ba4-64d4-4349-a1f7-918396a3295b","fps":60,"randomFrameStart":false,"frames":[]}},"controllerIdToConfigId":{"CANVAS_PARTICLES":"CANVAS_PARTICLES"},"controllers":{"CANVAS_PARTICLES":{"plugins":{}}}}'),PW="youWinParticles--34bcd",RW="CANVAS_PARTICLES",IW=1.2,EW=({theme:W,setParticlesSystem:y,winLevel:M})=>{const[i,n]=g.useState(null),[k,u,e]=G.K(void 0),l=g.useMemo((()=>hW.mZ()),[]),[Y,D]=g.useState(void 0);g.useEffect((()=>{Promise.all([SW.y(_W),SW.y(NW),SW.y(bW),SW.y(pW),SW.y(zW),SW.y(mW)]).then((W=>{D({[U.EvenMoney]:W[0],[U.BatteryCharger]:W[1],[U.HotSpot]:W[2],[U.Fireball]:W[3],[U.MonsterMash]:W[4],[U.StormBonus]:W[5]})}))}),[]),g.useEffect((()=>{if(!i)return;if(!dW.y(KW)){if(1)return;throw new Error("youWinParticles >> invalid particle json")}const W=sW.f.spawnSystem({canvas:i,config:{...KW,systemSize:{width:KW.systemSize.width*IW,height:KW.systemSize.height*IW}},dpr:l,systemScale:1,autoStart:!1});return u(W),y(W),()=>{W.pause(),W.reset(),u(void 0),y(void 0)}}),[l,i,y,u]),g.useEffect((()=>{if(!k||!Y)return;const y=k.getController(RW);y&&y.graphics.setTextureAndFrames(Y[W])}),[W,k,Y]),g.useEffect((()=>{if(!k)return;const W=k.getConfig(RW);W&&(W.amount=M===c.R.Big?150:50)}),[M,k]);const r=g.useCallback(((W,y)=>{if(e.current){const M=qW.ok.calcScaleBySizes(e.current.systemSize,{width:W,height:y});e.current.updateSystemScale(M)}}),[e]);return x.jsx(oW.IB,{className:PW,ref:n,onResize:r,dpr:l})};var ZW=M(128546);const fW={[U.EvenMoney]:{strokeColor:"#296266",gradient0Colors:["#11585F","#1FA4B0","#0C4145"],gradient1Colors:[{color:"#000808",opacity:.9},{color:"#134C51",opacity:.6},{color:"#134C51",opacity:.5},{color:"#000809",opacity:.9}],gradient2Colors:["#12AFBD",void 0],gradient3Colors:["#C2F1F4","#D6F5F8","#C1C7F4","#618587","#6FB0B4","#81E2E9","#B6EEF2"],lightningBorderHueRotation:"50deg"},[U.StormBonus]:{strokeColor:"#8D6F16",gradient0Colors:["#840002","#E30004","#660002"],gradient1Colors:[{color:"#1C0401",opacity:.7},{color:"#7A0C0C",opacity:.6},{color:"#7A0C0C",opacity:.6},{color:"#1C0401",opacity:.7}],gradient2Colors:["#C7121D","#010806"],gradient3Colors:["#FFF9CC","#FFFAE3","#FFF8CB","#B96844","#D9995F","#FFD37F","#FFF5BE"],lightningBorderHueRotation:"220deg"},[U.Fireball]:{strokeColor:"#9A3700",gradient0Colors:["#7A2D00","#D94F00","#5C2200"],gradient1Colors:[{color:"#130900",opacity:.9},{color:"#C43000",opacity:.6},{color:"#C43000",opacity:.6},{color:"#130A00",opacity:.9}],gradient2Colors:["#C7121D",void 0],gradient3Colors:["#EFFFC2","#F7FFD9","#F0FFC1","#F3A800","#FFE22F","#FAFF75","#EEFFB4"],lightningBorderHueRotation:"240deg"},[U.MonsterMash]:{strokeColor:"#007287",gradient0Colors:["#00637A","#00B1D9","#004B5C"],gradient1Colors:[{color:"#010D12",opacity:.9},{color:"#15475A",opacity:.5},{color:"#15475A",opacity:.5},{color:"#010D12",opacity:.9}],gradient2Colors:["#12ACC7",void 0],gradient3Colors:["#C7C2FF","#DAD9FF","#C5C1FF","#4179B2","#5780D7","#7589FF","#B7B4FF"],lightningBorderHueRotation:"70deg"},[U.HotSpot]:{strokeColor:"#9B1953",gradient0Colors:["#730093","#BE00F2","#5C0075"],gradient1Colors:[{color:"#110112",opacity:.9},{color:"#56155A",opacity:.5},{color:"#56155A",opacity:.5},{color:"#120112",opacity:.9}],gradient2Colors:["#BE12C7",void 0],gradient3Colors:["#FFDBE7","#FFF2F7","#FFDAE7","#BE4EB2","#DC6BBD","#FF8ECC","#FFCDDF"],lightningBorderHueRotation:"170deg"},[U.BatteryCharger]:{strokeColor:"#15853A",gradient0Colors:["#357A00","#5ED900","#285C00"],gradient1Colors:[{color:"#011201",opacity:.9},{color:"#165A15",opacity:.5},{color:"#165A15",opacity:.5},{color:"#011201",opacity:.9}],gradient2Colors:["#15C712",void 0],gradient3Colors:["#C2FFDE","#D9FFE8","#C1FFDD","#4DB241","#57D75E","#75FF96","#B4FFD4"],lightningBorderHueRotation:"0deg"}};var VW=M(619608);const $W=M.p+"images/lightningb.de020103.webp",aW="container--2a44d",HW="lightningBorderSprite--ac74c",BW="mirrored--fae20",vW=({theme:W,showLightningBorder:y,setRef:M,isMirrored:U=!1})=>{const i=g.useMemo((()=>{const y=Math.round(1e6*Math.random());return{image:`image_${W}_${y}`,mask:`mask_${W}_${y}`,imageFilter:`imageFilter_${W}_${y}`,gradient0:`gradient0_${W}_${y}`,gradient1:`gradient1_${W}_${y}`,gradient2:`gradient2_${W}_${y}`,gradient3:`gradient3_${W}_${y}`}}),[W]),k=fW[W],{strokeColor:u,gradient0Colors:e,gradient1Colors:l,gradient2Colors:G,gradient3Colors:Y,lightningBorderHueRotation:c}=k,[D,r]=VW.K(),[A,T]=g.useState(null);return g.useEffect((()=>{M(D?{shape:D,lightningBorder:A}:null)}),[D,A,M]),g.useEffect((()=>()=>{M(null)}),[M]),x.jsxs("div",{className:n.A(aW,{[BW]:U}),children:[x.jsxs("svg",{width:"100%",height:"100%",viewBox:"19 16 220 185",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",preserveAspectRatio:"none",ref:r,children:[x.jsxs("g",{children:[x.jsx("path",{d:"M22.2937 105.102H21.2454L21.5124 106.115L22.321 109.186L22.3209 109.186L22.3243 109.198L47.3096 198.4L47.4891 199.041L48.1525 198.988L240.693 183.48L433.234 198.988L433.899 199.041L434.077 198.398L459.871 105.398L460.155 104.374H459.093H444.468L461.341 18.1552L461.559 17.0396L460.434 17.2001L240.693 48.5339L21.1141 17.2001L19.9927 17.0401L20.2065 18.1525L36.9214 105.102H22.2937Z",fill:`url(#${i.gradient0})`}),x.jsx("path",{d:"M22.2937 105.102H21.2454L21.5124 106.115L22.321 109.186L22.3209 109.186L22.3243 109.198L47.3096 198.4L47.4891 199.041L48.1525 198.988L240.693 183.48L433.234 198.988L433.899 199.041L434.077 198.398L459.871 105.398L460.155 104.374H459.093H444.468L461.341 18.1552L461.559 17.0396L460.434 17.2001L240.693 48.5339L21.1141 17.2001L19.9927 17.0401L20.2065 18.1525L36.9214 105.102H22.2937Z",fill:`url(#${i.gradient1})`}),x.jsx("path",{d:"M22.2937 105.102H21.2454L21.5124 106.115L22.321 109.186L22.3209 109.186L22.3243 109.198L47.3096 198.4L47.4891 199.041L48.1525 198.988L240.693 183.48L433.234 198.988L433.899 199.041L434.077 198.398L459.871 105.398L460.155 104.374H459.093H444.468L461.341 18.1552L461.559 17.0396L460.434 17.2001L240.693 48.5339L21.1141 17.2001L19.9927 17.0401L20.2065 18.1525L36.9214 105.102H22.2937Z",fill:`url(#${i.gradient2})`}),x.jsx("path",{d:"M22.2937 105.102H21.2454L21.5124 106.115L22.321 109.186L22.3209 109.186L22.3243 109.198L47.3096 198.4L47.4891 199.041L48.1525 198.988L240.693 183.48L433.234 198.988L433.899 199.041L434.077 198.398L459.871 105.398L460.155 104.374H459.093H444.468L461.341 18.1552L461.559 17.0396L460.434 17.2001L240.693 48.5339L21.1141 17.2001L19.9927 17.0401L20.2065 18.1525L36.9214 105.102H22.2937Z",stroke:u,strokeWidth:"1.61599"}),x.jsx("path",{d:"M22.2937 105.102H21.2454L21.5124 106.115L22.321 109.186L22.3209 109.186L22.3243 109.198L47.3096 198.4L47.4891 199.041L48.1525 198.988L240.693 183.48L433.234 198.988L433.899 199.041L434.077 198.398L459.871 105.398L460.155 104.374H459.093H444.468L461.341 18.1552L461.559 17.0396L460.434 17.2001L240.693 48.5339L21.1141 17.2001L19.9927 17.0401L20.2065 18.1525L36.9214 105.102H22.2937Z",stroke:`url(#${i.gradient3})`,strokeOpacity:"0.5",strokeWidth:"1.61599"}),x.jsx("mask",{id:i.mask,children:x.jsx("path",{d:"M51.1991 192.042L36.0027 116.951H49.8665H51.3307L51.0571 115.512L34.6209 29.0947L240.562 53.5916L240.705 53.6087L240.848 53.5916L446.924 29.0952L430.345 114.822L430.066 116.264H431.535H445.414L430.196 192.042L240.8 177.102L240.705 177.094L240.61 177.102L51.1991 192.042Z",fill:"white"})})]}),x.jsxs("defs",{children:[x.jsxs("linearGradient",{id:i.gradient0,x1:"268.132",y1:"378.365",x2:"268.132",y2:"18",gradientUnits:"userSpaceOnUse",children:[x.jsx("stop",{stopColor:e[0]}),x.jsx("stop",{offset:"0.345",stopColor:e[1]}),x.jsx("stop",{offset:"1",stopColor:e[2]})]}),x.jsxs("linearGradient",{id:i.gradient1,x1:"460.183",y1:"108.276",x2:"21.2033",y2:"111.292",gradientUnits:"userSpaceOnUse",children:[x.jsx("stop",{stopColor:l[0].color,stopOpacity:l[0].opacity}),x.jsx("stop",{offset:"0.301423",stopColor:l[1].color,stopOpacity:l[1].opacity}),x.jsx("stop",{offset:"0.704371",stopColor:l[2].color,stopOpacity:l[2].opacity}),x.jsx("stop",{offset:"1",stopColor:l[3].color,stopOpacity:l[3].opacity})]}),x.jsxs("radialGradient",{id:i.gradient2,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(241.183 118.32) scale(276 86.6866)",children:[x.jsx("stop",{offset:"0.012",stopColor:G[0],stopOpacity:"0"}),x.jsx("stop",{offset:"0.998745",stopColor:G[1],stopOpacity:"0.5"})]}),x.jsxs("linearGradient",{id:i.gradient3,x1:"280.192",y1:"185.843",x2:"225.16",y2:"37.5369",gradientUnits:"userSpaceOnUse",children:[x.jsx("stop",{offset:"0.011",stopColor:Y[0]}),x.jsx("stop",{offset:"0.039",stopColor:Y[1]}),x.jsx("stop",{offset:"0.457",stopColor:Y[2]}),x.jsx("stop",{offset:"0.46",stopColor:Y[3]}),x.jsx("stop",{offset:"0.601",stopColor:Y[4]}),x.jsx("stop",{offset:"0.753",stopColor:Y[5]}),x.jsx("stop",{offset:"0.971",stopColor:Y[6]})]})]})]}),y&&x.jsx(ZW.d,{setRef:T,src:$W,spriteClass:HW,spriteStyle:{"--hueRotation":c}})]})},LW="plateHalf--d9de6",XW=({className:W,theme:y,showLightningBorder:M,setRef:U})=>{const[i,n]=g.useState(null),[k,u]=g.useState(null);return g.useEffect((()=>{U(i&&k?[i,k]:null)}),[i,k,U]),g.useEffect((()=>()=>{U(null)}),[U]),x.jsxs("div",{className:W,children:[x.jsx("div",{className:LW,children:x.jsx(vW,{showLightningBorder:M,theme:y,setRef:n})}),x.jsx("div",{className:LW,children:x.jsx(vW,{showLightningBorder:M,theme:y,setRef:u,isMirrored:!0})})]})};var wW=M(222356),FW=M(253796);const tW={[Y.LightningStormBonusGame.BatteryCharger]:FW.PZ.BatteryChargerResultRegular,[Y.LightningStormBonusGame.HotSpot]:FW.PZ.HotSpotResultRegular,[Y.LightningStormBonusGame.MonsterMash]:FW.PZ.MonsterMashResultRegular,[Y.LightningStormBonusGame.Fireball]:FW.PZ.FireballResultRegular,[Y.LightningStormBonusGame.StormBonus]:FW.PZ.LightningStormResultRegular},JW={[Y.LightningStormBonusGame.BatteryCharger]:FW.PZ.BatteryChargerResultLowX,[Y.LightningStormBonusGame.HotSpot]:FW.PZ.HotSpotResultLowX,[Y.LightningStormBonusGame.MonsterMash]:FW.PZ.MonsterMashResultLowX,[Y.LightningStormBonusGame.Fireball]:FW.PZ.FireballResultLowX,[Y.LightningStormBonusGame.StormBonus]:FW.PZ.LightningStormResultLowX},jW={[Y.LightningStormBonusGame.BatteryCharger]:FW.PZ.BatteryChargerResultMediumX,[Y.LightningStormBonusGame.HotSpot]:FW.PZ.HotSpotResultMediumX,[Y.LightningStormBonusGame.MonsterMash]:FW.PZ.MonsterMashResultMediumX,[Y.LightningStormBonusGame.Fireball]:FW.PZ.FireballResultMediumX,[Y.LightningStormBonusGame.StormBonus]:FW.PZ.LightningStormResultMediumX},CW={[Y.LightningStormBonusGame.BatteryCharger]:FW.PZ.BatteryChargerResultLargeX,[Y.LightningStormBonusGame.HotSpot]:FW.PZ.HotSpotResultLargeX,[Y.LightningStormBonusGame.MonsterMash]:FW.PZ.MonsterMashResultLargeX,[Y.LightningStormBonusGame.Fireball]:FW.PZ.FireballResultLargeX,[Y.LightningStormBonusGame.StormBonus]:FW.PZ.LightningStormResultLargeX};function QW(W,y){const M=y[W.outcome];if(M)switch(M.level){case"Low":return FW.PZ[JW[W.bonusGame]];case"Medium":return FW.PZ[jW[W.bonusGame]];case"High":return FW.PZ[CW[W.bonusGame]]}return FW.PZ[tW[W.bonusGame]]}const Wy={[U.EvenMoney]:"#023437",[U.StormBonus]:"#7C0503",[U.Fireball]:"#912400",[U.MonsterMash]:"#003957",[U.HotSpot]:"#8A0091",[U.BatteryCharger]:"#026800"};function yy(W){const y=Wy[W];return`radial-gradient(closest-side, ${y} 0%, ${y} 33%, ${y}B2 67%, transparent 100%)`}const My={[Y.LightningStormBonusGame.BatteryCharger]:"95%",[Y.LightningStormBonusGame.StormBonus]:"105%",[Y.LightningStormBonusGame.Fireball]:"98%",[Y.LightningStormBonusGame.HotSpot]:"96%",[Y.LightningStormBonusGame.MonsterMash]:"97%"};function Uy(W){return(null==W?void 0:W.bonusGame)?My[W.bonusGame]:"96%"}var iy=M(142130);function xy(W){var y,M;switch(W.resultType){case wW.l.Payout:return W.payout.amount;case wW.l.Observing:return iy.ur(null!==(M=null===(y=W.winners)||void 0===y?void 0:y.totalAmount)&&void 0!==M?M:0,0);default:return 0}}var ny=M(719630),ky=M(835132);const gy=M.p+"images/wheel.c0301997.webp",uy=M.p+"images/wheelframe.b344efe3.webp",ey=M.p+"images/wheelmask.2177f56f.webp",ly="wheelPart--0ed39",Gy=({className:W,setRef:y})=>{const[M,U]=VW.K({forceHardwareAcceleration:!1},void 0,((W,y)=>new ny.c(W,y))),[i,n]=VW.K(void 0,void 0,((W,y)=>new ny.c(W,y)));return g.useEffect((()=>{y(M&&i?{container:M,wheel:i}:null)}),[y,M,i]),g.useEffect((()=>()=>{y(null)}),[y]),x.jsxs("div",{className:W,ref:U,children:[x.jsx(ky.w,{className:ly,src:uy}),x.jsx(ky.w,{className:ly,ref:n,src:gy}),x.jsx(ky.w,{className:ly,src:ey})]})};var Yy=M(421645),cy=M(454342);const Dy="totalWinners--4f09d",ry="text--99bdd",Ay="playerIcon--0ce6d",Ty=({amount:W})=>x.jsxs("div",{className:Dy,children:[W>0&&x.jsx("div",{className:ry,children:W}),x.jsx(cy.m,{className:Ay}),x.jsx("div",{className:ry,children:u.Tl(Yy.X.WonUppercase)})]});var Oy=M(871521);const hy="youWinAmount--62b9e",Sy="front--a4e37",oy="back--00f5e",dy=g.forwardRef(((W,y)=>{const{amount:M,formatWinAmount:U,animateWinAmountCounter:i,className:k}=W,[u,e]=g.useState(U(0)),l=g.useCallback((W=>{e(U(W))}),[U]);return Oy.O({value:M,setValue:l,duration:i?I-q:0,frequency:.03,roundToDecimals:2,ignoreInitialValue:!1}),x.jsxs("div",{ref:y,className:k,children:[x.jsx(Y.LightningStormGradientStrokeText,{className:n.A(hy,oy),children:u}),x.jsx(Y.LightningStormGradientStrokeText,{className:n.A(hy,Sy),children:x.jsx("span",{"data-role":S,children:u})})]})})),qy="hidden--51d9e",sy="title--9b714",Ny="youWinLabel--7a299",_y="youWinAmountWrapper--e06c4",py=({roundResult:W,formatWinAmount:y,setRef:M})=>{var U;const i=(null==W?void 0:W.result.resultType)===wW.l.Observing,k=(null==W?void 0:W.result.resultType)===wW.l.None,e=i&&(null===(U=null==W?void 0:W.result.winners)||void 0===U?void 0:U.winnersCount)||0,l=k||i&&!e,G=(null==W?void 0:W.result.resultType)===wW.l.Payout&&A.includes(null==W?void 0:W.result.payout.level),c=W?xy(W.result):0,[D,r]=VW.K(void 0,void 0,((W,y)=>new ny.c(W,y))),[T,O]=VW.K(void 0,void 0,((W,y)=>new ny.c(W,y)));return g.useEffect((()=>{M(D&&T?{title:D,amount:T}:null)}),[M,D,T]),g.useEffect((()=>()=>{M(null)}),[M]),x.jsxs("div",{className:n.A({[qy]:l}),"data-role":h,children:[x.jsx("div",{ref:r,className:sy,children:i?x.jsx(Ty,{amount:e}):x.jsx(Y.LightningStormGradientStrokeText,{className:Ny,children:u.Tl(Yy.X.YouWin)})}),x.jsx(dy,{ref:O,className:_y,amount:c,formatWinAmount:y,animateWinAmountCounter:G})]})},by="you-win-icon";var my=M(93727),zy=M(87600),Ky=M(295213),Py=M(423441),Ry=M(843826);const Iy="iconAndGradientContainer--8840c",Ey="iconContainer--e29c9",Zy="icon--9a723",fy="evenMoney--f4f48",Vy="backgroundGradient--cc103",$y={[U.EvenMoney]:"#058B95",[U.StormBonus]:"#FF0000",[U.Fireball]:"#FF5500",[U.MonsterMash]:"#055695",[U.HotSpot]:"#FF00FD",[U.BatteryCharger]:"#05951F"},ay=({theme:W,roundPayoutType:y,setRef:M})=>{const i=function(W){if(W===U.EvenMoney)return x.jsx(Y.LightningStormIconEvenMoney,{className:n.A(Zy,fy)});let y;switch(W){case U.StormBonus:y=Py;break;case U.Fireball:y=zy;break;case U.MonsterMash:y=Ry;break;case U.HotSpot:y=Ky;break;case U.BatteryCharger:y=my}return x.jsx(ky.w,{className:Zy,alt:"Icon",src:y})}(W),k=function(W,y){const M=$y[W];return y&&y===wW.l.None?`radial-gradient(circle closest-side at center, ${M}80 0%, transparent 80%)`:`radial-gradient(circle closest-side at center, ${M}aa 0%, ${M}80 66.95%, transparent 100%)`}(W,y),[u,e]=VW.K({forceHardwareAcceleration:!1,translateUnits:"%"},{scale:j(1,T),x:-50,y:-50},((W,y)=>new ny.c(W,y))),[l,G]=VW.K(void 0,void 0,((W,y)=>new ny.c(W,y)));return g.useEffect((()=>{M(u&&l?{icon:u,gradient:l}:null)}),[M,u,l]),g.useEffect((()=>()=>{M(null)}),[M]),x.jsxs("div",{className:Iy,"data-role":by,children:[x.jsx("div",{ref:e,className:Ey,children:i}),x.jsx("div",{ref:G,className:Vy,style:{background:k}})]})};var Hy=M(617401),By=M(924009),vy=M(980733),Ly=M(610570);const Xy="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDE2IDE2NiIgZmlsbD0ibm9uZSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTguMjY0IDE2NC4zNDZMMy4wNjcgODkuMjU1SDE4LjM5NWwtLjI3My0xLjQzOEwxLjY4NSAxLjM5OWwyMDUuOTQxIDI0LjQ5Ny4xNDMuMDE3LjE0My0uMDE3TDQxMy45ODkgMS4zOTkgMzk3LjQxIDg3LjEyNmwtLjI3OSAxLjQ0MmgxNS4zNDdsLTE1LjIxOCA3NS43NzgtMTg5LjM5NS0xNC45NC0uMDk2LS4wMDctLjA5NS4wMDctMTg5LjQxIDE0Ljk0eiIgc3Ryb2tlPSJ1cmwoI3BhaW50MF9saW5lYXJfMzM2XzgwMjcyKSIgc3Ryb2tlLXdpZHRoPSIyLjQyNCIvPjxwYXRoIGQ9Ik0xOC4yNjQgMTY0LjM0NkwzLjA2NyA4OS4yNTVIMTguMzk1bC0uMjczLTEuNDM4TDEuNjg1IDEuMzk5bDIwNS45NDEgMjQuNDk3LjE0My4wMTcuMTQzLS4wMTdMNDEzLjk4OSAxLjM5OSAzOTcuNDEgODcuMTI2bC0uMjc5IDEuNDQyaDE1LjM0N2wtMTUuMjE4IDc1Ljc3OC0xODkuMzk1LTE0Ljk0LS4wOTYtLjAwNy0uMDk1LjAwNy0xODkuNDEgMTQuOTR6IiBzdHJva2U9InVybCgjcGFpbnQxX2xpbmVhcl8zMzZfODAyNzIpIiBzdHJva2Utb3BhY2l0eT0iLjUiIHN0cm9rZS13aWR0aD0iMi40MjQiLz48cGF0aCBkPSJNMTguMjY0IDE2NC4zNDZMMy4wNjcgODkuMjU1SDE4LjM5NWwtLjI3My0xLjQzOEwxLjY4NSAxLjM5OWwyMDUuOTQxIDI0LjQ5Ny4xNDMuMDE3LjE0My0uMDE3TDQxMy45ODkgMS4zOTkgMzk3LjQxIDg3LjEyNmwtLjI3OSAxLjQ0MmgxNS4zNDdsLTE1LjIxOCA3NS43NzgtMTg5LjM5NS0xNC45NC0uMDk2LS4wMDctLjA5NS4wMDctMTg5LjQxIDE0Ljk0eiIgc3Ryb2tlPSJ1cmwoI3BhaW50Ml9saW5lYXJfMzM2XzgwMjcyKSIgc3Ryb2tlLXdpZHRoPSIyLjQyNCIvPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl8zMzZfODAyNzIiIHgxPSIxMjUuNjg0IiB5MT0iMTY1LjYzOSIgeDI9IjIwNS42NzMiIHkyPSItNDcuNjYxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI0VCREI4MiIvPjxzdG9wIG9mZnNldD0iLjEwNyIgc3RvcC1jb2xvcj0iI0M5QTY1NiIvPjxzdG9wIG9mZnNldD0iLjIxMSIgc3RvcC1jb2xvcj0iI0E2NkYyOSIvPjxzdG9wIG9mZnNldD0iLjQ1OSIgc3RvcC1jb2xvcj0iI0Y1RUI5QyIvPjxzdG9wIG9mZnNldD0iLjY2NSIgc3RvcC1jb2xvcj0iI0M1NzYwRiIvPjxzdG9wIG9mZnNldD0iLjc4NCIgc3RvcC1jb2xvcj0iIzc3NEYzOSIvPjxzdG9wIG9mZnNldD0iLjg5NyIgc3RvcC1jb2xvcj0iI0EzNkUyOSIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0RFQUY1MyIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJwYWludDFfbGluZWFyXzMzNl84MDI3MiIgeDE9IjIwNy44NDEiIHkxPSItMTUuNzU0IiB4Mj0iMjA3Ljg0MSIgeTI9IjE2My45MDUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9Ii4wMTEiIHN0b3AtY29sb3I9IiNGRkY5Q0MiLz48c3RvcCBvZmZzZXQ9Ii4wMzkiIHN0b3AtY29sb3I9IiNGRkZBRTMiLz48c3RvcCBvZmZzZXQ9Ii40NTciIHN0b3AtY29sb3I9IiNGRkY4Q0IiLz48c3RvcCBvZmZzZXQ9Ii40NiIgc3RvcC1jb2xvcj0iI0I5Njg0NCIvPjxzdG9wIG9mZnNldD0iLjYwMSIgc3RvcC1jb2xvcj0iI0Q5OTk1RiIvPjxzdG9wIG9mZnNldD0iLjc1MyIgc3RvcC1jb2xvcj0iI0ZGRDM3RiIvPjxzdG9wIG9mZnNldD0iLjk3MSIgc3RvcC1jb2xvcj0iI0ZGRjVCRSIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJwYWludDJfbGluZWFyXzMzNl84MDI3MiIgeDE9IjIxLjAzNCIgeTE9IjM5LjIzIiB4Mj0iNDQ1LjMzNiIgeTI9IjEzMy43NDgiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjRUJEQjgyIi8+PHN0b3Agb2Zmc2V0PSIuMjcyIiBzdG9wLWNvbG9yPSIjQTY2RjI5Ii8+PHN0b3Agb2Zmc2V0PSIuNTA1IiBzdG9wLWNvbG9yPSIjRjVFQjlDIi8+PHN0b3Agb2Zmc2V0PSIuNzk5IiBzdG9wLWNvbG9yPSIjQzU3NjBGIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRjFFQ0Q3Ii8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PC9zdmc+Cg==",wy="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjI3IDE3IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xIC43MzhsMTE1LjEyOCAxNS41TDIyNi41LjczOCIgc3Ryb2tlPSJ1cmwoI3BhaW50MF9saW5lYXJfNDIxXzE0MzExKSIgc3Ryb2tlLXdpZHRoPSIxLjMiLz48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfNDIxXzE0MzExIiB4MT0iMSIgeTE9IjQuNDYiIHgyPSIyMjYuNSIgeTI9IjQuNDYiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjQ0U4QTI4IiBzdG9wLW9wYWNpdHk9IjAiLz48c3RvcCBvZmZzZXQ9Ii4zNzUiIHN0b3AtY29sb3I9IiNENEIxNjAiLz48c3RvcCBvZmZzZXQ9Ii41MTUiIHN0b3AtY29sb3I9IiNENkJCNkYiIHN0b3Atb3BhY2l0eT0iLjM1Ii8+PHN0b3Agb2Zmc2V0PSIuNjY1IiBzdG9wLWNvbG9yPSIjRDRCMTYxIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjQ0U4QTI4IiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48L3N2Zz4K",Fy="container--bb28b",ty="isVisualTest--b3d4f",Jy="gradient--65122",jy="plateContainer--20904",Cy="plateShadow--d22e9",Qy="plate--4f230",WM="wheelContainer--c563b",yM="noWin--17633",MM="wheelInnerGradient--d3603",UM="wheel--17ff6",iM="lineShape--f4150",xM="innerBorder--18f73",nM="particlesWrapper--29e44",kM="youWinContent--75b58",gM="iconWrapper--e6478",uM="multiplierWrapper--04b62",eM="observing--503bb",lM={[Hy._.MobilePortrait]:"portrait--d7ab0",[Hy._.Tablet]:"tablet--276c8"},GM={[Y.LightningStormBonusGame.StormBonus]:"storm--0386c",[Y.LightningStormBonusGame.Fireball]:"fireball--e9c30",[Y.LightningStormBonusGame.BatteryCharger]:"bateryCharger--fed7c",[Y.LightningStormBonusGame.MonsterMash]:"monsterMash--174f9",[Y.LightningStormBonusGame.HotSpot]:"hotSpot--5ee19"},YM=W=>{const{roundResult:y,onShow:M,winningAnimationStarted:k,layout:u,portraitLayoutWidthLimit:e,formatWinAmount:A}=W,[h,S]=g.useState(),[s,N,_]=G.K(i.None),p=g.useRef(!0),b=(null==h?void 0:h.result.resultType)===wW.l.None||(null==h?void 0:h.result.resultType)===wW.l.Observing,m=(null==h?void 0:h.result.resultType)===wW.l.Payout?null==h?void 0:h.result.payout.level:c.R.None,z=function(W){return(null==W?void 0:W.bonusGame)?U[W.bonusGame]:U.EvenMoney}(h),K=(null==h?void 0:h.bonusGame)?GM[h.bonusGame]:void 0,P=s===i.None||!h,f=(null==h?void 0:h.result)&&"winningMultiplier"in h.result?h.result.winningMultiplier:0,V=!((null==h?void 0:h.result.resultType)!==wW.l.Payout||!h.result.blockCelebration),$=D.includes(m)&&!l.I()&&!V,a=r.includes(m)&&!l.I()&&!V,[H,B]=VW.K({translateUnits:"%",forceHardwareAcceleration:!1},{scale:0,x:-50,y:-50}),[j,yW]=VW.K({translateUnits:"%",forceHardwareAcceleration:!1},{x:-50,y:-40},((W,y)=>new ny.c(W,y))),[UW,nW]=g.useState(null),[kW,uW]=g.useState(null),[eW,lW]=VW.K(),[GW,YW]=VW.K({translateUnits:"%",forceHardwareAcceleration:!1},{x:-50,y:-50},((W,y)=>new ny.c(W,y))),[cW,DW]=g.useState(null),[rW,hW]=g.useState(null),[SW,oW]=VW.K({translateUnits:"%"},{x:-50,y:-50}),[dW,qW]=g.useState(void 0);g.useEffect((()=>{y&&S({...y})}),[y]),g.useEffect((()=>{p.current&&!P&&M(),p.current=P}),[P,M]),g.useEffect((()=>{(null==y?void 0:y.result.resultType)===wW.l.Payout&&k()}),[k,null==y?void 0:y.result.resultType]),g.useEffect((()=>{y?N(i.Show):_.current!==i.None?N(i.Hide):(N(i.None),S(void 0))}),[y,N,_]);const sW=g.useCallback((()=>{_.current===i.Hide&&(N(i.None),S(void 0))}),[_,N]);return function(W){const{stage:y,youWinContainer:M,backgroundGradient:U,icon:x,multiplier:n,plateContainer:k,plate:u,content:e,wheel:l,winLevel:G,particlesSystem:Y,particlesWrapper:D,showParticles:r,showLightningBorder:A}=W;g.useEffect((()=>{if(y!==i.Show||G===c.R.None)return;if(!M||!l||!U||!x||!n||!k||!u||!e||r&&(!D||!Y)||A&&u.filter((W=>null===W.lightningBorder)).length>0)return;M.forceHardwareAcceleration=!0;const W=[o.M(M).callback((()=>{M.scale=1,M.opacity=1})),C({iconRef:x.icon,winLevel:G}),OW({titleRef:e.title,winLevel:G}),TW({amountRef:e.amount,winLevel:G}),gW({shapeRef:k,winLevel:G}),Q({gradientRef:x.gradient,winLevel:G}),AW({wheelRef:l,winLevel:G}),J({gradientRef:U,winLevel:G}),xW({multiplierRef:n})];r&&D&&Y&&W.push(function(W){const{particlesWrapper:y,particlesSystem:M}=W;return w.M().callback((()=>{M.reset()})).delay(E-q).callback((()=>{y.setStyle({visibility:"inherit"}),M.start()}))}({particlesWrapper:D,particlesSystem:Y})),A&&W.push(...u.map((W=>W.lightningBorder?function(W){const{borderRef:y}=W,M=new WW.s(y);M.x=1.5;const U=o.M(M).callback((()=>{M.setStyle({visibility:"inherit"}),M.opacity=0})).animateTo({opacity:1},I-R,X.$g).delay(E-I).animateTo({opacity:0},Z-E,X.$g).callback((()=>M.setStyle({visibility:"hidden"}))),i=F.$(MW.Gn({frames:iW,element:M,duration:iW.length/MW.J_,automaticallyShow:!1,automaticallyHide:!1})),x=w.M().delay(Z-R).callback((()=>{i.dispose()}));return w.M().delay(R-q).parallel([U,i,x])}({borderRef:W.lightningBorder}):w.M())));const g=w.M().parallel(W).callback((()=>{M.forceHardwareAcceleration=!1})),T=d.l({anim:g});return()=>{g.fastForward(),T()}}),[y,l,M,G,U,x,n,k,u,e,Y,D,r,A])}({stage:s,youWinContainer:H,backgroundGradient:j,icon:kW,multiplier:eW,plateContainer:GW,plate:cW,content:rW,wheel:UW,winLevel:m,particlesWrapper:SW,particlesSystem:dW,showParticles:$,showLightningBorder:a}),function(W){const{stage:y,youWinContainer:M,wheel:U,winLevel:x}=W;g.useEffect((()=>{if(y!==i.Show||x!==c.R.None||!M||!U)return;const W=w.M().parallel([o.M(M).callback((()=>{M.scale=0,M.opacity=1,M.forceHardwareAcceleration=!0})).animateTo({scale:1},L-v,X.dV),t({wheelRef:U})]).callback((()=>{M.forceHardwareAcceleration=!1})),n=d.l({anim:W});return()=>{W.fastForward(),n()}}),[M,y,x,U])}({stage:s,youWinContainer:H,wheel:UW,winLevel:m}),function(W){const{stage:y,youWinContainer:M,particlesWrapper:U,particlesSystem:x,showParticles:n,onReady:k}=W;g.useEffect((()=>{if(y!==i.Hide||!M)return;if(n&&(!U||!x))return;null==U||U.setStyle({visibility:"hidden"}),null==x||x.reset(),null==x||x.pause();const W=o.M(M).callback((()=>{M.opacity=1,M.scale=1,M.forceHardwareAcceleration=!0})).animateTo({opacity:0},L-v).callback((()=>{M.forceHardwareAcceleration=!1})).callback(k),g=d.l({anim:W});return()=>{W.fastForward(),g()}}),[k,M,y,U,x,n])}({stage:s,youWinContainer:H,onReady:sW,particlesWrapper:SW,particlesSystem:dW,showParticles:$}),P?null:x.jsxs("div",{className:n.A(Fy,lM[u],K),"data-role":O,style:{"--portraitLayoutWidthLimit":e,"--verticalBettingGridWidthPercentage":Ly.ag,"--maxVerticalBettingGridWidth":Ly.q$,"--elementScaleFactor":T},ref:B,children:[x.jsx("div",{ref:yW,className:Jy,style:{background:yy(z)}}),x.jsxs("div",{className:n.A([WM,{[yM]:b}]),children:[b&&x.jsx("div",{className:MM,style:{backgroundImage:(NW=z,`radial-gradient( ellipse 84% 61% at 50% 90%, ${Wy[NW]}ff 71%, #02343700 100%)`)}}),x.jsx(Gy,{className:n.A(UM,lM[u]),setRef:nW})]}),b&&x.jsx(ky.w,{className:iM,src:wy,alt:"Line shape"}),!b&&x.jsx("div",{ref:YW,className:jy,"data-role":"plate-container",children:x.jsxs("div",{className:n.A(Cy,{[ty]:l.I()}),children:[x.jsx(XW,{className:Qy,theme:z,setRef:DW,showLightningBorder:a}),x.jsx(ky.w,{className:xM,src:Xy,alt:""})]})}),$&&x.jsx("div",{className:nM,ref:oW,children:x.jsx(EW,{theme:z,setParticlesSystem:qW,winLevel:m})}),x.jsx("div",{className:n.A(kM,{[ty]:l.I()}),children:x.jsx(py,{roundResult:h,setRef:hW,formatWinAmount:A})}),x.jsxs("div",{className:gM,children:[x.jsx(ay,{theme:z,roundPayoutType:(null==h?void 0:h.result.resultType)||wW.l.None,setRef:uW}),x.jsx("div",{className:n.A(uM,{[eM]:b}),style:{left:Uy(h)},ref:lW,children:!!f&&x.jsx(Y.LightningStormMultiplier,{value:`${f}x`})})]})]});var NW},cM=k.PA((()=>{const W=vy.g(),y=g.useCallback((()=>{W.abstractGame.actions.lifecycle.winningAnimationStarted()}),[W]),M=g.useCallback((y=>u.Tl(Yy.X.CurrencyAmount,{amount:e.ej(y,{currencySymbol:W.abstractGame.values.currencySymbol,maximumDecimalCount:W.settings.currencyDecimals})})),[W]),U={winningAnimationStarted:y,onShow:g.useCallback((()=>{var y,U,i,x;W.wheel.outcome&&W.log.log(By.Gt({winningSector:W.wheel.outcome})),function(W){const y=W.ui.youWin.roundResult,M=W.wheel.multipliers;y&&((null==y?void 0:y.result.resultType)===wW.l.Payout&&y.bonusGame&&!y.result.blockCelebration?W.sound.playSound({event:QW(y,M),args:[FW.iQ[y.result.payout.level]]}):(null==y?void 0:y.result.resultType)===wW.l.Observing?W.sound.playSound({event:QW(y,M),args:[FW.YX.NoWin]}):(null==y?void 0:y.result.resultType)!==wW.l.Payout||y.bonusGame||y.result.blockCelebration?(null==y?void 0:y.result.resultType)===wW.l.None&&W.sound.playSound({event:FW.PZ.WheelResultLeaf,args:[FW.YX.NoWin]}):W.sound.playSound({event:FW.PZ.WheelResultLeaf,args:[FW.iQ[y.result.payout.level]]}))}(W),W.log.log(By.OZ({wheelMultiplier:W.result.winningMultiplier,winAmount:M(W.ui.youWin.roundResult?xy(W.ui.youWin.roundResult.result):0),winningResult:null===(y=W.ui.youWin.roundResult)||void 0===y?void 0:y.outcome,winningBonus:null===(U=W.ui.youWin.roundResult)||void 0===U?void 0:U.bonusGame,totalWinAmount:null===(i=W.result.winners)||void 0===i?void 0:i.totalAmount,totalPlayers:null===(x=W.result.winners)||void 0===x?void 0:x.winnersCount}))}),[W,M]),roundResult:W.ui.youWin.roundResult,layout:W.device.componentLayout,portraitLayoutWidthLimit:W.ui.youWin.portraitLayoutWidthLimit,formatWinAmount:M};return x.jsx(YM,{...U})}))},222356:(W,y,M)=>{var U;M.d(y,{l:()=>U}),function(W){W["None"]="RoundPayoutType.None",W["Payout"]="RoundPayoutType.Payout",W["Observing"]="RoundPayoutType.Observing"}(U||(U={}))},917422:(W,y,M)=>{M.d(y,{p:()=>a});var U=M(64922),i=M(277082);const x="winnersListMultiplier--5d624";var n=M(346160),k=M(587698),g=M(377810),u=M(170877),e=M(653677),l=M(283876),G=M(822381),Y=M(236035),c=M(940531),D=M(756786),r=M(946872),A=M(561424);const T=g.memo((({platform:W,chipAmounts:y})=>{const M=W===u.OD.Desktop,i=W===u.OD.Phone,x={[u.OD.Desktop]:{"--lmw-size":G._m(2),"--timerSize":"var(--lmw-size)",width:"80%",margin:`${G._m(1.5)} 0`},[u.OD.Phone]:{"--lmw-size":G._m(1),"--timerSize":"var(--lmw-size)",width:"calc(var(--lmw-size) * 5)",height:"calc(var(--lmw-size) * 5)"},[u.OD.Tablet]:{"--lmw-size":G._m(1),"--timerSize":"var(--lmw-size)",width:"80%",margin:`${G._m(1.5)} 0`}}[W];return U.jsxs(U.Fragment,{children:[U.jsx("p",{children:U.jsx(e.q,{children:"help.timer"})}),U.jsx(Y.Y,{style:{width:"100%"},children:U.jsx("div",{style:x,children:i?U.jsx(c.u,{secondsRemaining:14,contentState:"idle",secondsInitial:16,color:D.Q1.Green}):U.jsx(l.U,{totalTime:12,timeRemaining:10,pulseStartTime:5,visible:!0,running:!1})})}),M&&U.jsx(r.D,{isDesktop:M}),U.jsx(A.Q5,{chipAmounts:y,platform:W})]})}));var O=M(699695),h=M(958551),S=M(196758);const o="container--606f0",d="portrait--97408",q=3,s=8,N={action:S.I5.Set,data:function(W){const y=[],M=Object.values(i.LightningStormBetCode).filter((W=>W!==i.LightningStormBetCode.StormChaser&&W!==i.LightningStormBetCode.XChaser)),U=Object.values(i.LightningStormBonusGame);let x=0,n=0;for(let k=0;k<W;k++)y.push({result:M[x],id:`${Math.random()}`,bonus:M[x]===i.LightningStormBetCode.EvenMoney?void 0:{bonusId:U[n]}}),x++,n++,x>=M.length&&(x=0),n>=U.length&&(n=0);return y}(q*s)},_=({platform:W})=>{const y=W===u.OD.Phone,M={[u.OD.Desktop]:{"--lmw-size":G._m(1),"--statisticsSize":"var(--lmw-size)"},[u.OD.Phone]:{"--lmw-size":G._m(1),"--statisticsSize":"calc(var(--lmw-size) * 0.7)"},[u.OD.Tablet]:{"--lmw-size":G._m(1),"--statisticsSize":"calc(var(--lmw-size) * 0.5)"}}[W];return U.jsx("div",{className:O.A(o,{[d]:y}),style:M,children:U.jsx(h.K,{statistics:N,rowCount:q,columnCount:s,isMobile:!1})})},p=g.memo((({platform:W})=>U.jsxs(U.Fragment,{children:[U.jsx("p",{children:U.jsx(e.q,{children:"help.statistics.description"})}),U.jsx(Y.Y,{children:U.jsx(_,{platform:W})}),U.jsx("p",{children:U.jsx(e.q,{children:"help.statistics.statisticsButtonDesktop"})})]})));var b=M(528981),m=M(99210),z=M(525620),K=M(129987),P=M(427069),R=M(215038),I=M(980733),E=M(619608);const Z="bettingGrid--33c49",f="placeYourBets--7adeb",V="bettingTimer--773a1",$=({setReference:W})=>{const[y,M]=E.K({transformOrigin:"bottom center"});return g.useEffect((()=>{W(y)}),[W,y]),g.useEffect((()=>()=>{W(null)}),[W]),U.jsxs("div",{ref:M,className:Z,style:{"--bettingGridHorizontalRatio":P.ji[P.C1.Horizontal]},"data-role":"betting-grid",children:[U.jsx("div",{className:f,children:U.jsx(R.x,{})}),U.jsx("div",{className:O.A(V),children:U.jsx(l.R,{})}),U.jsx(K.O,{})]})},a={HelpComponentListCreator:async(W,y,{currencySymbol:i,customizableButton:x})=>{const{GameObjectiveChapter:g,GameRulesChapter:u,PayoutChapter:e,ReturnToPlayerChapter:l}=await M.e(35213).then(M.bind(M,120054)),{PlaceBetsChapter:G}=await M.e(35213).then(M.bind(M,665444)),Y=y.tableBetLimits[0]||0,c=y.tableBetLimits[1]||0,D=y.getTableName(),r=Math.max(0,y.payoutLimit()),A=y.getChipAmounts(),O=y.showVolatilityIndex,h={id:"GameObjective",title:n.Tl("help.gameObjective.title"),content:U.jsx(g,{})},S={id:"GameRules",title:n.Tl("help.gameRules.title"),content:U.jsx(u,{lightningStormBackgroundSong1Enabled:y.lightningStormBackgroundSong1Enabled})},o={id:"Payouts",title:n.Tl("help.payouts.title"),content:U.jsx(e,{payoutLimit:k.ej(r,{currencySymbol:i})})},d={id:"RTP",title:n.Tl("help.returnToPlayer.title"),content:U.jsx(l,{showVolatilityIndex:O})},q={id:"PlaceBets",title:n.Tl("help.placeBets.title"),content:U.jsx(G,{tableName:D,currencySymbol:i,maxLimit:c,minLimit:Y,platform:W,shouldHaveNote:!0,chipAmounts:A,customizableButton:x,ChipDisplaySection:U.jsx(T,{platform:W,chipAmounts:A})})},s={id:"Statistics",title:n.Tl("help.statistics.title"),content:U.jsx(p,{platform:W})};return[h,S,o,d,q,b.t.LiveSupport,b.t.AutoplayApi,b.t.Chat,s,b.t.Tipping,b.t.GameNumber,b.t.Sound,b.t.GameHistory,b.t.SettingsWithoutSideBets,b.t.DepositAndWithdraw,b.t.ResponsibleGaming,b.t.InformazioniAams,b.t.ErrorHandling,b.t.DisconnectionPolicy,b.t.AutomatedDecision,b.t.MoreGames,b.t.MultiGamePlay,b.t.ShortcutKeys,b.t.Home]},HelpCreator:async({settings:W,currencySymbol:y,customizableButton:i})=>{const{GameObjectiveChapter:x,GameRulesChapter:g,PayoutChapter:u,ReturnToPlayerChapter:e}=await M.e(35213).then(M.bind(M,120054)),{PlaceBetsChapter:l}=await M.e(35213).then(M.bind(M,356308)),G=W.tableBetLimits[0]||0,Y=W.tableBetLimits[1]||0,c=W.getTableName(),D=Math.max(0,W.payoutLimit()),r=W.getChipAmounts(),A=W.DeviceSupport.PLATFORM,O=W.showVolatilityIndex;return{customChapters:{gameDetails:[{chapters:[{id:"GameObjective",title:n.Tl("help.gameObjective.title"),content:U.jsx(x,{})},{id:"GameRules",title:n.Tl("help.gameRules.title"),content:U.jsx(g,{lightningStormBackgroundSong1Enabled:W.lightningStormBackgroundSong1Enabled})},{id:"Payouts",title:n.Tl("help.payouts.title"),content:U.jsx(u,{payoutLimit:k.ej(D,{currencySymbol:y})})},{id:"ReturnToPlayer",title:n.Tl("help.returnToPlayer.title"),content:U.jsx(e,{showVolatilityIndex:O})},{id:"PlaceBets",title:n.Tl("help.placeBets.title"),content:U.jsx(l,{tableName:c,currencySymbol:y,maxLimit:Y,minLimit:G,platform:A,shouldHaveNote:!0,chipAmounts:r,customizableButton:i,ChipDisplaySection:U.jsx(T,{platform:A,chipAmounts:r})})},{id:"Statistics",title:n.Tl("help.statistics.title"),content:U.jsx(p,{platform:A})}]}]},filterMap:{overrideDefault:{[m.C.Shuffling]:!1,[m.C.SpeedMode]:!1}}}},WinnerListMultiplierComponents:{WinnerMultiplier:({multiplier:W})=>W?U.jsx("span",{className:x,children:U.jsx(i.LightningStormMultiplier,{value:`${W}x`})}):null},LayoutImmersiveFooterBettingGrid:z.PA((()=>{const W={setReference:I.g().references.setBettingGridContainerReference};return U.jsx($,{...W})}))}},982341:(W,y,M)=>{M.d(y,{Z:()=>i,h:()=>x});var U=M(377810);const i=U.createContext(null);function x(){const W=U.useContext(i);if(!W)throw new Error("Stage3d should be provided to Stage3dContext");return W}},834055:(W,y,M)=>{M.d(y,{e:()=>Cd});var U={};M.r(U),M.d(U,{ACESFilmicToneMapping:()=>Uy,AddEquation:()=>NW,AddOperation:()=>CW,AdditiveAnimationBlendMode:()=>KM,AdditiveBlending:()=>oW,AlphaFormat:()=>Iy,AlwaysCompare:()=>DU,AlwaysDepth:()=>BW,AlwaysStencilFunc:()=>kU,AmbientLight:()=>ZY,AmbientLightProbe:()=>Wc,AnimationAction:()=>pc,AnimationClip:()=>kY,AnimationLoader:()=>rY,AnimationMixer:()=>mc,AnimationObjectGroup:()=>_c,AnimationUtils:()=>FG,ArcCurve:()=>Gl,ArrayCamera:()=>Ru,ArrowHelper:()=>SD,Audio:()=>Gc,AudioAnalyser:()=>Tc,AudioContext:()=>jY,AudioListener:()=>lc,AudioLoader:()=>CY,AxesHelper:()=>oD,BackSide:()=>AW,BasicDepthPacking:()=>fM,BasicShadowMap:()=>GW,Bone:()=>Ne,BooleanKeyframeTrack:()=>WY,Box2:()=>Hc,Box3:()=>Ni,Box3Helper:()=>rD,BoxGeometry:()=>fn,BoxHelper:()=>DD,BufferAttribute:()=>Qx,BufferGeometry:()=>Tn,BufferGeometryLoader:()=>vY,ByteType:()=>sy,Cache:()=>uY,Camera:()=>Xn,CameraHelper:()=>GD,CanvasTexture:()=>ul,CapsuleGeometry:()=>Pl,CatmullRomCurve3:()=>Tl,CineonToneMapping:()=>My,CircleGeometry:()=>Rl,ClampToEdgeWrapping:()=>Gy,Clock:()=>xc,Color:()=>Bx,ColorKeyframeTrack:()=>yY,ColorManagement:()=>ni,CompressedArrayTexture:()=>kl,CompressedCubeTexture:()=>gl,CompressedTexture:()=>nl,CompressedTextureLoader:()=>AY,ConeGeometry:()=>El,CubeCamera:()=>Jn,CubeReflectionMapping:()=>ny,CubeRefractionMapping:()=>ky,CubeTexture:()=>jn,CubeTextureLoader:()=>OY,CubeUVReflectionMapping:()=>ey,CubicBezierCurve:()=>ol,CubicBezierCurve3:()=>dl,CubicInterpolant:()=>JG,CullFaceBack:()=>uW,CullFaceFront:()=>eW,CullFaceFrontBack:()=>lW,CullFaceNone:()=>gW,Curve:()=>el,CurvePath:()=>ml,CustomBlending:()=>sW,CustomToneMapping:()=>iy,CylinderGeometry:()=>Il,Cylindrical:()=>$c,Data3DTexture:()=>Oi,DataArrayTexture:()=>Ai,DataTexture:()=>_e,DataTextureLoader:()=>hY,DataUtils:()=>Jx,DecrementStencilOp:()=>JM,DecrementWrapStencilOp:()=>CM,DefaultLoadingManager:()=>lY,DepthFormat:()=>Vy,DepthStencilFormat:()=>$y,DepthTexture:()=>fu,DirectionalLight:()=>EY,DirectionalLightHelper:()=>uD,DiscreteInterpolant:()=>CG,DisplayP3ColorSpace:()=>LM,DodecahedronGeometry:()=>fl,DoubleSide:()=>TW,DstAlphaFactor:()=>ZW,DstColorFactor:()=>VW,DynamicCopyUsage:()=>dU,DynamicDrawUsage:()=>AU,DynamicReadUsage:()=>hU,EdgesGeometry:()=>Bl,EllipseCurve:()=>ll,EqualCompare:()=>eU,EqualDepth:()=>XW,EqualStencilFunc:()=>MU,EquirectangularReflectionMapping:()=>gy,EquirectangularRefractionMapping:()=>uy,Euler:()=>ux,EventDispatcher:()=>mU,ExtrudeGeometry:()=>TG,FileLoader:()=>DY,Float16BufferAttribute:()=>gn,Float32BufferAttribute:()=>un,Float64BufferAttribute:()=>en,FloatType:()=>my,Fog:()=>Xu,FogExp2:()=>Lu,FramebufferTexture:()=>xl,FrontSide:()=>rW,Frustum:()=>xk,GLBufferAttribute:()=>Ic,GLSL1:()=>sU,GLSL3:()=>NU,GreaterCompare:()=>GU,GreaterDepth:()=>FW,GreaterEqualCompare:()=>cU,GreaterEqualDepth:()=>wW,GreaterEqualStencilFunc:()=>nU,GreaterStencilFunc:()=>iU,GridHelper:()=>iD,Group:()=>Iu,HalfFloatType:()=>zy,HemisphereLight:()=>dY,HemisphereLightHelper:()=>UD,HemisphereLightProbe:()=>QY,IcosahedronGeometry:()=>hG,ImageBitmapLoader:()=>tY,ImageLoader:()=>TY,ImageUtils:()=>gi,IncrementStencilOp:()=>tM,IncrementWrapStencilOp:()=>jM,InstancedBufferAttribute:()=>ze,InstancedBufferGeometry:()=>BY,InstancedInterleavedBuffer:()=>Rc,InstancedMesh:()=>Ve,Int16BufferAttribute:()=>Un,Int32BufferAttribute:()=>nn,Int8BufferAttribute:()=>Wn,IntType:()=>py,InterleavedBuffer:()=>Fu,InterleavedBufferAttribute:()=>Ju,Interpolant:()=>tG,InterpolateDiscrete:()=>sM,InterpolateLinear:()=>NM,InterpolateSmooth:()=>_M,InvertStencilOp:()=>QM,KeepStencilOp:()=>wM,KeyframeTrack:()=>QG,LOD:()=>De,LatheGeometry:()=>Kl,Layers:()=>ex,LessCompare:()=>uU,LessDepth:()=>vW,LessEqualCompare:()=>lU,LessEqualDepth:()=>LW,LessEqualStencilFunc:()=>UU,LessStencilFunc:()=>yU,Light:()=>oY,LightProbe:()=>$Y,Line:()=>Xe,Line3:()=>Lc,LineBasicMaterial:()=>$e,LineCurve:()=>ql,LineCurve3:()=>sl,LineDashedMaterial:()=>aG,LineLoop:()=>Je,LineSegments:()=>te,LinearEncoding:()=>EM,LinearFilter:()=>Oy,LinearInterpolant:()=>jG,LinearMipMapLinearFilter:()=>dy,LinearMipMapNearestFilter:()=>Sy,LinearMipmapLinearFilter:()=>oy,LinearMipmapNearestFilter:()=>hy,LinearSRGBColorSpace:()=>vM,LinearToneMapping:()=>Wy,Loader:()=>GY,LoaderUtils:()=>HY,LoadingManager:()=>eY,LoopOnce:()=>oM,LoopPingPong:()=>qM,LoopRepeat:()=>dM,LuminanceAlphaFormat:()=>fy,LuminanceFormat:()=>Zy,MOUSE:()=>nW,Material:()=>fx,MaterialLoader:()=>aY,MathUtils:()=>vU,Matrix3:()=>XU,Matrix4:()=>Qi,MaxEquation:()=>mW,Mesh:()=>En,MeshBasicMaterial:()=>Lx,MeshDepthMaterial:()=>Nu,MeshDistanceMaterial:()=>_u,MeshLambertMaterial:()=>VG,MeshMatcapMaterial:()=>$G,MeshNormalMaterial:()=>fG,MeshPhongMaterial:()=>EG,MeshPhysicalMaterial:()=>IG,MeshStandardMaterial:()=>RG,MeshToonMaterial:()=>ZG,MinEquation:()=>bW,MirroredRepeatWrapping:()=>Yy,MixOperation:()=>jW,MultiplyBlending:()=>qW,MultiplyOperation:()=>JW,NearestFilter:()=>cy,NearestMipMapLinearFilter:()=>Ty,NearestMipMapNearestFilter:()=>ry,NearestMipmapLinearFilter:()=>Ay,NearestMipmapNearestFilter:()=>Dy,NeverCompare:()=>gU,NeverDepth:()=>HW,NeverStencilFunc:()=>WU,NoBlending:()=>hW,NoColorSpace:()=>HM,NoToneMapping:()=>QW,NormalAnimationBlendMode:()=>zM,NormalBlending:()=>SW,NotEqualCompare:()=>YU,NotEqualDepth:()=>tW,NotEqualStencilFunc:()=>xU,NumberKeyframeTrack:()=>MY,Object3D:()=>qx,ObjectLoader:()=>LY,ObjectSpaceNormalMap:()=>aM,OctahedronGeometry:()=>SG,OneFactor:()=>KW,OneMinusDstAlphaFactor:()=>fW,OneMinusDstColorFactor:()=>$W,OneMinusSrcAlphaFactor:()=>EW,OneMinusSrcColorFactor:()=>RW,OrthographicCamera:()=>Ok,PCFShadowMap:()=>YW,PCFSoftShadowMap:()=>cW,PMREMGenerator:()=>bk,Path:()=>zl,PerspectiveCamera:()=>wn,Plane:()=>Mk,PlaneGeometry:()=>gk,PlaneHelper:()=>AD,PointLight:()=>RY,PointLightHelper:()=>Qc,Points:()=>Ml,PointsMaterial:()=>je,PolarGridHelper:()=>xD,PolyhedronGeometry:()=>Zl,PositionalAudio:()=>Ac,PropertyBinding:()=>Nc,PropertyMixer:()=>Oc,QuadraticBezierCurve:()=>Nl,QuadraticBezierCurve3:()=>_l,Quaternion:()=>oi,QuaternionKeyframeTrack:()=>iY,QuaternionLinearInterpolant:()=>UY,RED_GREEN_RGTC2_Format:()=>hM,RED_RGTC1_Format:()=>TM,REVISION:()=>xW,RGBADepthPacking:()=>VM,RGBAFormat:()=>Ey,RGBAIntegerFormat:()=>Ly,RGBA_ASTC_10x10_Format:()=>cM,RGBA_ASTC_10x5_Format:()=>lM,RGBA_ASTC_10x6_Format:()=>GM,RGBA_ASTC_10x8_Format:()=>YM,RGBA_ASTC_12x10_Format:()=>DM,RGBA_ASTC_12x12_Format:()=>rM,RGBA_ASTC_4x4_Format:()=>UM,RGBA_ASTC_5x4_Format:()=>iM,RGBA_ASTC_5x5_Format:()=>xM,RGBA_ASTC_6x5_Format:()=>nM,RGBA_ASTC_6x6_Format:()=>kM,RGBA_ASTC_8x5_Format:()=>gM,RGBA_ASTC_8x6_Format:()=>uM,RGBA_ASTC_8x8_Format:()=>eM,RGBA_BPTC_Format:()=>AM,RGBA_ETC2_EAC_Format:()=>MM,RGBA_PVRTC_2BPPV1_Format:()=>Qy,RGBA_PVRTC_4BPPV1_Format:()=>Cy,RGBA_S3TC_DXT1_Format:()=>wy,RGBA_S3TC_DXT3_Format:()=>Fy,RGBA_S3TC_DXT5_Format:()=>ty,RGB_ETC1_Format:()=>WM,RGB_ETC2_Format:()=>yM,RGB_PVRTC_2BPPV1_Format:()=>jy,RGB_PVRTC_4BPPV1_Format:()=>Jy,RGB_S3TC_DXT1_Format:()=>Xy,RGFormat:()=>By,RGIntegerFormat:()=>vy,RawShaderMaterial:()=>PG,Ray:()=>Ci,Raycaster:()=>Ec,RectAreaLight:()=>fY,RedFormat:()=>ay,RedIntegerFormat:()=>Hy,ReinhardToneMapping:()=>yy,RenderTarget:()=>Di,RepeatWrapping:()=>ly,ReplaceStencilOp:()=>FM,ReverseSubtractEquation:()=>pW,RingGeometry:()=>oG,SIGNED_RED_GREEN_RGTC2_Format:()=>SM,SIGNED_RED_RGTC1_Format:()=>OM,SRGBColorSpace:()=>BM,Scene:()=>wu,ShaderChunk:()=>uk,ShaderLib:()=>lk,ShaderMaterial:()=>Ln,ShadowMaterial:()=>KG,Shape:()=>vl,ShapeGeometry:()=>dG,ShapePath:()=>dD,ShapeUtils:()=>DG,ShortType:()=>Ny,Skeleton:()=>me,SkeletonHelper:()=>jc,SkinnedMesh:()=>se,Source:()=>ei,Sphere:()=>vi,SphereGeometry:()=>qG,Spherical:()=>Vc,SphericalHarmonics3:()=>VY,SplineCurve:()=>pl,SpotLight:()=>bY,SpotLightHelper:()=>wc,Sprite:()=>le,SpriteMaterial:()=>ju,SrcAlphaFactor:()=>IW,SrcAlphaSaturateFactor:()=>aW,SrcColorFactor:()=>PW,StaticCopyUsage:()=>oU,StaticDrawUsage:()=>rU,StaticReadUsage:()=>OU,StereoCamera:()=>ic,StreamCopyUsage:()=>qU,StreamDrawUsage:()=>TU,StreamReadUsage:()=>SU,StringKeyframeTrack:()=>xY,SubtractEquation:()=>_W,SubtractiveBlending:()=>dW,TOUCH:()=>kW,TangentSpaceNormalMap:()=>$M,TetrahedronGeometry:()=>sG,Texture:()=>Yi,TextureLoader:()=>SY,TorusGeometry:()=>NG,TorusKnotGeometry:()=>_G,Triangle:()=>Ex,TriangleFanDrawMode:()=>IM,TriangleStripDrawMode:()=>RM,TrianglesDrawMode:()=>PM,TubeGeometry:()=>pG,TwoPassDoubleSide:()=>OW,UVMapping:()=>xy,Uint16BufferAttribute:()=>xn,Uint32BufferAttribute:()=>kn,Uint8BufferAttribute:()=>yn,Uint8ClampedBufferAttribute:()=>Mn,Uniform:()=>zc,UniformsGroup:()=>Pc,UniformsLib:()=>ek,UniformsUtils:()=>Hn,UnsignedByteType:()=>qy,UnsignedInt248Type:()=>Ry,UnsignedIntType:()=>by,UnsignedShort4444Type:()=>Ky,UnsignedShort5551Type:()=>Py,UnsignedShortType:()=>_y,VSMShadowMap:()=>DW,Vector2:()=>LU,Vector3:()=>di,Vector4:()=>ci,VectorKeyframeTrack:()=>nY,VideoTexture:()=>il,WebGL1Renderer:()=>vu,WebGL3DRenderTarget:()=>hi,WebGLArrayRenderTarget:()=>Ti,WebGLCoordinateSystem:()=>pU,WebGLCubeRenderTarget:()=>Cn,WebGLMultipleRenderTargets:()=>Si,WebGLRenderTarget:()=>ri,WebGLRenderer:()=>Bu,WebGLUtils:()=>Pu,WebGPUCoordinateSystem:()=>bU,WireframeGeometry:()=>bG,WrapAroundEnding:()=>mM,ZeroCurvatureEnding:()=>pM,ZeroFactor:()=>zW,ZeroSlopeEnding:()=>bM,ZeroStencilOp:()=>XM,_SRGBAFormat:()=>_U,sRGBEncoding:()=>ZM});var i,x=M(64922),n=M(697971),k=M(36638),g=M(755073),u=M(85),e=M(212429);(function(W){W["BrowserNotSupported"]="message.unsupportedBrowserAdvice",W["DeviceNotSupported"]="mobile.unsupportedDevice_short",W["AssetNotLoaded"]="message.unableLoadGame",W["SomethingWentWrong"]="message.unableLoadGame"})(i||(i={}));var l=M(837557),G=M(436794),Y=M(346160),c=M(523219),D=M(357117),r=M(4961),A=M(484802),T=M(881357),O=M(926610),h=M(892510),S=M(977804),o=M(394532),d=M(947548),q=M(747992),s=M(706809),N=M(735821),_=M(444792),p=M(767359);function b(W,y,M){const U=p._9(m(M,W));if(!U)return null;try{(function(W,y){if(!s.A(W))throw new e.ew("Autoplay state is not an object.");const{lastActiveSession:M,selectedRounds:U,isRunning:i}=W;if(M!==y)throw new e.ew("Autoplay state contains stale data from a non-current session.");if(!N.A(U))throw new e.ew("Autoplay state contains invalid selectedRounds.");if(!_.A(i))throw new e.ew("Autoplay state contains invalid isRunning.")})(U,y);const{lastActiveSession:W,...M}=U;return M}catch(W){return 1&&window.console.warn(`Unable to load existing Autoplay state from session storage: ${W}`),null}}function m(W,y){return`${W}-${y}`}function z(){window.EVO_LOADER.sendLog("CLIENT_ERROR",{message:"Autoplay is unable to use session storage."})}var K=M(872443),P=M(827424),R=M(587698),I=M(555213);const E="title--59bd2",Z="rounds--f5b0d",f="roundsLabel--5bd23",V="roundsAmount--0a709",$="roundsMultiplier--f0508",a="roundsBet--97136";var H=M(494475),B=M(13799),v=M(850449),L=M(572989);const X=H.Oe((({state:W,ag:y})=>{const{isLargeScreen:M,isMediumScreen:U}=P.Qo(y.viewport.size.value);return{gameTheme:v.SJ(W),currencySymbol:K.o2(W),gameDimensions:B.Ay(W),isDesktop:M,isLandscape:B.O5(W),isTablet:U,isRtl:Y.sU(),isSettingsWindowOpen:y.autoplayUI.isSettingsWindowOpen}}),(W=>[W.viewport.size]))((({totalBetToRepeat:W,roundsLeft:y,limitsEnabled:M,...U})=>{const{currencySymbol:i}=U;return x.jsxs(x.Fragment,{children:[x.jsx("div",{className:E,children:Y.Tl("ap3.popup.shouldContinueAutoPlay")}),M&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:Z,children:[x.jsxs("label",{className:f,children:[Y.Tl("ap3.label.AutoplayCaps"),":"," "]}),x.jsxs("span",{children:[x.jsx("label",{className:V,children:Y.Tl("ap3.rounds",{value:y})}),x.jsx("label",{className:$,children:""}),x.jsx("label",{className:a,children:R.ej(W,{currencySymbol:i})})]})]}),x.jsx(I.k,{...U,usedInPopup:!0})]})]})}));X.displayName="BetsChangedPopupContentConnectedToAg";const w=L.s((W=>({totalBetToRepeat:W.totalBetToRepeat,roundsLeft:W.roundsLeft,lossLimit:W.lossLimit,singleWin:W.singleWin,isRunning:W.isRunning,limitsEnabled:W.limitsEnabled})),(W=>({setSingleWin:W.setSingleWin,setLossLimit:W.setLossLimit})))(X),F="AutoplayState";class t{constructor(W,y){this.ag=W,this.options=y,this.isRunning=new A.L(!1),this.isStartable=new A.L(!1),this.isAvailable=new A.L(!1),this.roundsLeft=new A.L(0),this.selectedRounds=new A.L(0),this.lossLimit=new A.L(0),this.singleWin=new A.L(0),this.totalBetToRepeat=new A.L(0),this.limitsEnabled=new A.L(!1),this.lastTotalBetToRepeat=new A.L(0),this.repeatCount=0,this.runningLoss=0,this.lastWin=0,this.hasUnconfirmedBetChanges=!1,this.shouldShowBetsChangedPopup=!1,this.pendingStopReason=null,this.unsubscribers={common:[],running:[],lossLimit:[]},this.start=()=>{if(!this.isStartable.value||this.isRunning.value)return;this.roundsLeft.value=this.selectedRounds.value,this.isRunning.value=!0;const W=0!==this.ag.balance.totalBet.value;this.lastTotalBetToRepeat.value=W&&this.ag.lifecycle.current.value===h.P.BetsOpen?this.ag.balance.totalBet.value:this.ag.balance.totalBetToRepeat.value,this.unsubscribers.running.push(this.ag.network.status.subscribe(this.trackNetworkStatus),this.ag.lifecycle.current.subscribe(this.trackLifecycle,!1),this.ag.compliance.realityCheck.status.subscribe(this.trackRealityCheck,!1)),this.limitsEnabled.value&&this.unsubscribers.running.push(this.ag.gameResult.amount.subscribe(this.trackLastWin,!1));const y=this.limitsEnabled.value?{lossLimit:this.lossLimit.value,singleWin:this.singleWin.value}:{};this.log({type:q.Gn.ClientStartAutoplay,payload:{selectedRounds:this.selectedRounds.value,totalBet:this.lastTotalBetToRepeat.value,...y}}),this.repeatBets(!0)},this.stop=(W,y=!1)=>{if(!this.isRunning.value)return;if(y&&this.ag.lifecycle.current.value!==h.P.BetsOpen)return void(this.pendingStopReason=W);const M=this.repeatCount;this.unsubscribe(this.unsubscribers.running),this.isRunning.value=!1,this.roundsLeft.value=0,this.lastTotalBetToRepeat.value=0,this.repeatCount=0,this.runningLoss=0,this.lastWin=0,this.hasUnconfirmedBetChanges=!1,this.shouldShowBetsChangedPopup=!1,this.pendingStopReason=null,this.log({type:q.Gn.ClientStoppedAutoplay,payload:{reason:W,roundsPlayed:M}}),this.ag.popups.close(S.QD.AUTOPLAY_BETS_CHANGED),this.ag.autoplayUI.setStopReason(W)},this.dispose=()=>{Object.keys(this.unsubscribers).forEach((W=>this.unsubscribe(this.unsubscribers[W]))),this.stop(o.G_.ManualStop),this.isStartable.value=!1},this.setSelectedRounds=W=>{const y=this.selectedRounds.value,M=Math.max(0,W);y!==M&&(this.selectedRounds.value=M,this.isRunning.value&&(this.roundsLeft.value=M),this.log({type:q.Gn.ClientUpdateAutoplayRounds,payload:{previousSelectedRounds:y,selectedRounds:M}}))},this.setLossLimit=W=>{const y=this.lossLimit.value,M=Math.max(0,W);0!==M&&y!==M&&(this.unsubscribe(this.unsubscribers.lossLimit),this.lossLimit.value=M,this.log({type:q.Gn.ClientUpdateAutoplayLossLimit,payload:{previousLossLimit:y,lossLimit:M}}))},this.setSingleWin=W=>{const y=this.singleWin.value,M=Math.max(0,W);y!==M&&(this.singleWin.value=M,this.log({type:q.Gn.ClientUpdateAutoplaySingleWin,payload:{previousSingleWin:y,singleWin:M}}))},this.placeBets=()=>{this.repeatBets()},this.triggerBetsChanged=(W=!0)=>{this.shouldShowBetsChangedPopup=W},this.trackLifecycle=W=>{switch(W){case h.P.BetsOpen:if(this.pendingStopReason)return void this.stop(this.pendingStopReason);this.repeatBets();break;case h.P.GameResolved:this.limitsEnabled.value&&this.repeatCount>0&&(this.runningLoss+=this.ag.balance.totalBet.value);break;case h.P.BetsClosed:{const W=this.ag.popups.current.value,y=S.Ns.includes(null==W?void 0:W.id)&&(null==W?void 0:W.isVisible);if(this.hasUnconfirmedBetChanges||y)return void this.stop(o.G_.MissedRound);const M=this.ag.balance.totalBet.value;if(0===M)return void this.stop(o.G_.ManualBetsReplaced);(this.shouldShowBetsChangedPopup||M!==this.lastTotalBetToRepeat.value)&&(this.lastTotalBetToRepeat.value=M,this.log({type:q.Gn.ClientUpdateAutoplayBets,payload:{totalBet:this.lastTotalBetToRepeat.value}}),this.hasUnconfirmedBetChanges=!0,this.ag.popups.open(d.$o((()=>this.stop(o.G_.ManualStop)),(()=>{this.ag.popups.close(S.QD.AUTOPLAY_BETS_CHANGED),this.hasUnconfirmedBetChanges=!1,this.shouldShowBetsChangedPopup=!1,this.repeatBets()}),w)));break}}},this.repeatBets=(W=!1,y=!1)=>{var M;const U=0!==this.ag.balance.totalBet.value,i=W||!U;if(!this.isRunning.value||this.ag.lifecycle.current.value!==h.P.BetsOpen||!i)return;const x=null!==(M=this.ag.balance.server.value)&&void 0!==M?M:0;if(this.lastTotalBetToRepeat.value>x)return void this.stop(o.G_.NoBalance);const n=this.ag.popups.current.value,k=!!n&&n.id!==S.QD.LOW_BALANCE,g=S.Ns.includes(null==n?void 0:n.id)&&(null==n?void 0:n.isVisible);if(k&&!(k&&y&&g)){const W=(null==n?void 0:n.id)===S.QD.AUTOPLAY_BETS_CHANGED;return void(!this.ag.isRngGame||g||W||this.unsubscribers.common.push(this.ag.popups.current.subscribe(this.continueAutoplayAfterClosingPopup)))}if(0===this.selectedRounds.value)return void this.stop(o.G_.RoundsEnded);const u=this.ag.balance.totalBetToRepeat.value;if(this.limitsEnabled.value&&this.repeatCount>0){if(this.runningLoss+u>this.lossLimit.value)return void this.stop(o.G_.LossReached);if(0!==this.singleWin.value&&this.lastWin>=this.singleWin.value)return void this.stop(o.G_.WinReached);this.lastWin=0}if(W||0!==u){this.roundsLeft.value--,this.repeatCount++;const y=!W||this.ag.isRngGame||!U;let M;y&&(M=this.options.repeatBets());const i=W&&this.ag.isRngGame&&U;if(y&&!i){const W=()=>{var W,y;this.log({type:q.Gn.ClientBetChip,payload:{type:"AutoPlay",roundsLeft:this.roundsLeft.value,...null===(y=(W=this.options).selectBetChipLogFields)||void 0===y?void 0:y.call(W)}},this.options.betChipLogEnhancers)};M instanceof Promise?M.then(W):W()}}return this.roundsLeft.value<=0?this.stop(o.G_.RoundsEnded):void 0},this.continueAutoplayAfterClosingPopup=W=>{W||this.repeatBets()},this.updateIsAvailable=({balance:W=0,totalBet:y,totalBetToRepeat:M,lifecycle:U,isRunning:i})=>{if(i&&U!==h.P.BetsOpen)return;const x=M>0&&M<=W;this.isAvailable.value=y>0||x},this.updateIsStartable=({isAvailable:W,selectedRounds:y})=>{this.isStartable.value=W&&y>0},this.updateTotalBetToRepeat=({totalBet:W,totalBetToRepeat:y,lastTotalBetToRepeat:M,lifecycle:U,isRunning:i})=>{this.totalBetToRepeat.value=U===h.P.BetsOpen?W||y:i?M:y||W},this.updateLossLimit=({totalBetToRepeat:W,selectedRounds:y})=>{const M=this.lossLimit.value,U=y*W;M!==U&&(this.lossLimit.value=U,this.log({type:q.Gn.ClientUpdateAutoplayLossLimit,payload:{previousLossLimit:M,lossLimit:U}}))},this.trackLastWin=W=>{W>0&&this.repeatCount>0&&(this.lastWin=W,this.runningLoss-=W)},this.trackNetworkStatus=W=>{[O.XW.Reconnecting,O.XW.Disconnected].includes(W)&&this.stop(o.G_.Disconnected)},this.trackRealityCheck=W=>{switch(W){case r.LK.Stopped:this.stop(o.G_.ManualStop);break;case r.LK.Inactive:this.repeatBets(!1,!0)}},this.saveState=()=>{var W,y,M;W={isRunning:this.isRunning.value,selectedRounds:this.selectedRounds.value,lastActiveSession:this.ag.settings.bareSessionId()},y=this.ag.tableId,M=F,p.J2(m(M,y),W,z)},this.restoreState=()=>{let W=b(this.ag.tableId,this.ag.settings.bareSessionId(),F);if(W||(W=b(this.ag.tableId,this.ag.settings.sessionId(),F),W&&e.vV(new e.bE("Deprecated sessionId still in use","Deprecation"))),!W)return;const{selectedRounds:y,isRunning:M}=W;this.selectedRounds.value=y,this.isRunning.value=M},this.unsubscribe=W=>{W.forEach((W=>W())),W.length=0},this.log=(W,y)=>{this.ag.log(q.CM(W,y))},this.restoreState(),this.limitsEnabled.value=W.settings.isUKGC(),this.isRunning.value&&this.stop(o.G_.PageRefreshed),this.unsubscribers.common.push(T.vT({balance:W.balance.server,totalBet:W.balance.totalBet,totalBetToRepeat:W.balance.totalBetToRepeat,lifecycle:W.lifecycle.current,isRunning:this.isRunning}).subscribe(this.updateIsAvailable),T.vT({isAvailable:this.isAvailable,selectedRounds:this.selectedRounds}).subscribe(this.updateIsStartable),T.vT({lifecycle:W.lifecycle.current,totalBet:W.balance.totalBet,totalBetToRepeat:W.balance.totalBetToRepeat,isRunning:this.isRunning,lastTotalBetToRepeat:this.lastTotalBetToRepeat}).subscribe(this.updateTotalBetToRepeat),T.vT({isRunning:this.isRunning,selectedRounds:this.selectedRounds}).subscribe(this.saveState)),this.limitsEnabled.value&&this.unsubscribers.lossLimit.push(T.vT({totalBetToRepeat:this.totalBetToRepeat,selectedRounds:this.selectedRounds}).subscribe(this.updateLossLimit))}}var J=M(320693),j=M(869743),C=M(924009),Q=M(42948);function WW(W,y,M,U){return new Promise(((i,x)=>{const n=W[M];n?Array.isArray(n)?Promise.all(n.map((W=>W(y)))).then((x=>{let n={...y};for(const W of x)W&&(n={...n,...W});i(WW(W,n,M+1,U))})).catch((W=>{x(W)})):n(y).then((x=>{const n=x?{...y,...x}:y;i(WW(W,n,M+1,U))})).catch((W=>{x(W)})):i(y)}))}function yW(W,y={},M){return WW(W,y,0,M)}var MW=M(525620),UW=M(377810),iW=M(890023);const xW="155",nW={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},kW={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},gW=0,uW=1,eW=2,lW=3,GW=0,YW=1,cW=2,DW=3,rW=0,AW=1,TW=2,OW=2,hW=0,SW=1,oW=2,dW=3,qW=4,sW=5,NW=100,_W=101,pW=102,bW=103,mW=104,zW=200,KW=201,PW=202,RW=203,IW=204,EW=205,ZW=206,fW=207,VW=208,$W=209,aW=210,HW=0,BW=1,vW=2,LW=3,XW=4,wW=5,FW=6,tW=7,JW=0,jW=1,CW=2,QW=0,Wy=1,yy=2,My=3,Uy=4,iy=5,xy=300,ny=301,ky=302,gy=303,uy=304,ey=306,ly=1e3,Gy=1001,Yy=1002,cy=1003,Dy=1004,ry=1004,Ay=1005,Ty=1005,Oy=1006,hy=1007,Sy=1007,oy=1008,dy=1008,qy=1009,sy=1010,Ny=1011,_y=1012,py=1013,by=1014,my=1015,zy=1016,Ky=1017,Py=1018,Ry=1020,Iy=1021,Ey=1023,Zy=1024,fy=1025,Vy=1026,$y=1027,ay=1028,Hy=1029,By=1030,vy=1031,Ly=1033,Xy=33776,wy=33777,Fy=33778,ty=33779,Jy=35840,jy=35841,Cy=35842,Qy=35843,WM=36196,yM=37492,MM=37496,UM=37808,iM=37809,xM=37810,nM=37811,kM=37812,gM=37813,uM=37814,eM=37815,lM=37816,GM=37817,YM=37818,cM=37819,DM=37820,rM=37821,AM=36492,TM=36283,OM=36284,hM=36285,SM=36286,oM=2200,dM=2201,qM=2202,sM=2300,NM=2301,_M=2302,pM=2400,bM=2401,mM=2402,zM=2500,KM=2501,PM=0,RM=1,IM=2,EM=3e3,ZM=3001,fM=3200,VM=3201,$M=0,aM=1,HM="",BM="srgb",vM="srgb-linear",LM="display-p3",XM=0,wM=7680,FM=7681,tM=7682,JM=7683,jM=34055,CM=34056,QM=5386,WU=512,yU=513,MU=514,UU=515,iU=516,xU=517,nU=518,kU=519,gU=512,uU=513,eU=514,lU=515,GU=516,YU=517,cU=518,DU=519,rU=35044,AU=35048,TU=35040,OU=35045,hU=35049,SU=35041,oU=35046,dU=35050,qU=35042,sU="100",NU="300 es",_U=1035,pU=2e3,bU=2001;class mU{addEventListener(W,y){void 0===this._listeners&&(this._listeners={});const M=this._listeners;void 0===M[W]&&(M[W]=[]),-1===M[W].indexOf(y)&&M[W].push(y)}hasEventListener(W,y){if(void 0===this._listeners)return!1;const M=this._listeners;return void 0!==M[W]&&-1!==M[W].indexOf(y)}removeEventListener(W,y){if(void 0===this._listeners)return;const M=this._listeners[W];if(void 0!==M){const W=M.indexOf(y);-1!==W&&M.splice(W,1)}}dispatchEvent(W){if(void 0===this._listeners)return;const y=this._listeners[W.type];if(void 0!==y){W.target=this;const M=y.slice(0);for(let y=0,U=M.length;y<U;y++)M[y].call(this,W);W.target=null}}}const zU=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let KU=1234567;const PU=Math.PI/180,RU=180/Math.PI;function IU(){const W=4294967295*Math.random()|0,y=4294967295*Math.random()|0,M=4294967295*Math.random()|0,U=4294967295*Math.random()|0;return(zU[255&W]+zU[W>>8&255]+zU[W>>16&255]+zU[W>>24&255]+"-"+zU[255&y]+zU[y>>8&255]+"-"+zU[y>>16&15|64]+zU[y>>24&255]+"-"+zU[63&M|128]+zU[M>>8&255]+"-"+zU[M>>16&255]+zU[M>>24&255]+zU[255&U]+zU[U>>8&255]+zU[U>>16&255]+zU[U>>24&255]).toLowerCase()}function EU(W,y,M){return Math.max(y,Math.min(M,W))}function ZU(W,y){return(W%y+y)%y}function fU(W,y,M){return(1-M)*W+M*y}function VU(W){return!(W&W-1)&&0!==W}function $U(W){return Math.pow(2,Math.ceil(Math.log(W)/Math.LN2))}function aU(W){return Math.pow(2,Math.floor(Math.log(W)/Math.LN2))}function HU(W,y){switch(y.constructor){case Float32Array:return W;case Uint32Array:return W/4294967295;case Uint16Array:return W/65535;case Uint8Array:return W/255;case Int32Array:return Math.max(W/2147483647,-1);case Int16Array:return Math.max(W/32767,-1);case Int8Array:return Math.max(W/127,-1);default:throw new Error("Invalid component type.")}}function BU(W,y){switch(y.constructor){case Float32Array:return W;case Uint32Array:return Math.round(4294967295*W);case Uint16Array:return Math.round(65535*W);case Uint8Array:return Math.round(255*W);case Int32Array:return Math.round(2147483647*W);case Int16Array:return Math.round(32767*W);case Int8Array:return Math.round(127*W);default:throw new Error("Invalid component type.")}}const vU={DEG2RAD:PU,RAD2DEG:RU,generateUUID:IU,clamp:EU,euclideanModulo:ZU,mapLinear:function(W,y,M,U,i){return U+(W-y)*(i-U)/(M-y)},inverseLerp:function(W,y,M){return W!==y?(M-W)/(y-W):0},lerp:fU,damp:function(W,y,M,U){return fU(W,y,1-Math.exp(-M*U))},pingpong:function(W,y=1){return y-Math.abs(ZU(W,2*y)-y)},smoothstep:function(W,y,M){return W<=y?0:W>=M?1:(W=(W-y)/(M-y))*W*(3-2*W)},smootherstep:function(W,y,M){return W<=y?0:W>=M?1:(W=(W-y)/(M-y))*W*W*(W*(6*W-15)+10)},randInt:function(W,y){return W+Math.floor(Math.random()*(y-W+1))},randFloat:function(W,y){return W+Math.random()*(y-W)},randFloatSpread:function(W){return W*(.5-Math.random())},seededRandom:function(W){void 0!==W&&(KU=W);let y=KU+=1831565813;return y=Math.imul(y^y>>>15,1|y),y^=y+Math.imul(y^y>>>7,61|y),((y^y>>>14)>>>0)/4294967296},degToRad:function(W){return W*PU},radToDeg:function(W){return W*RU},isPowerOfTwo:VU,ceilPowerOfTwo:$U,floorPowerOfTwo:aU,setQuaternionFromProperEuler:function(W,y,M,U,i){const x=Math.cos,n=Math.sin,k=x(M/2),g=n(M/2),u=x((y+U)/2),e=n((y+U)/2),l=x((y-U)/2),G=n((y-U)/2),Y=x((U-y)/2),c=n((U-y)/2);switch(i){case"XYX":W.set(k*e,g*l,g*G,k*u);break;case"YZY":W.set(g*G,k*e,g*l,k*u);break;case"ZXZ":W.set(g*l,g*G,k*e,k*u);break;case"XZX":W.set(k*e,g*c,g*Y,k*u);break;case"YXY":W.set(g*Y,k*e,g*c,k*u);break;case"ZYZ":W.set(g*c,g*Y,k*e,k*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:BU,denormalize:HU};class LU{constructor(W=0,y=0){LU.prototype.isVector2=!0,this.x=W,this.y=y}get width(){return this.x}set width(W){this.x=W}get height(){return this.y}set height(W){this.y=W}set(W,y){return this.x=W,this.y=y,this}setScalar(W){return this.x=W,this.y=W,this}setX(W){return this.x=W,this}setY(W){return this.y=W,this}setComponent(W,y){switch(W){case 0:this.x=y;break;case 1:this.y=y;break;default:throw new Error("index is out of range: "+W)}return this}getComponent(W){switch(W){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+W)}}clone(){return new this.constructor(this.x,this.y)}copy(W){return this.x=W.x,this.y=W.y,this}add(W){return this.x+=W.x,this.y+=W.y,this}addScalar(W){return this.x+=W,this.y+=W,this}addVectors(W,y){return this.x=W.x+y.x,this.y=W.y+y.y,this}addScaledVector(W,y){return this.x+=W.x*y,this.y+=W.y*y,this}sub(W){return this.x-=W.x,this.y-=W.y,this}subScalar(W){return this.x-=W,this.y-=W,this}subVectors(W,y){return this.x=W.x-y.x,this.y=W.y-y.y,this}multiply(W){return this.x*=W.x,this.y*=W.y,this}multiplyScalar(W){return this.x*=W,this.y*=W,this}divide(W){return this.x/=W.x,this.y/=W.y,this}divideScalar(W){return this.multiplyScalar(1/W)}applyMatrix3(W){const y=this.x,M=this.y,U=W.elements;return this.x=U[0]*y+U[3]*M+U[6],this.y=U[1]*y+U[4]*M+U[7],this}min(W){return this.x=Math.min(this.x,W.x),this.y=Math.min(this.y,W.y),this}max(W){return this.x=Math.max(this.x,W.x),this.y=Math.max(this.y,W.y),this}clamp(W,y){return this.x=Math.max(W.x,Math.min(y.x,this.x)),this.y=Math.max(W.y,Math.min(y.y,this.y)),this}clampScalar(W,y){return this.x=Math.max(W,Math.min(y,this.x)),this.y=Math.max(W,Math.min(y,this.y)),this}clampLength(W,y){const M=this.length();return this.divideScalar(M||1).multiplyScalar(Math.max(W,Math.min(y,M)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(W){return this.x*W.x+this.y*W.y}cross(W){return this.x*W.y-this.y*W.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(W){const y=Math.sqrt(this.lengthSq()*W.lengthSq());if(0===y)return Math.PI/2;const M=this.dot(W)/y;return Math.acos(EU(M,-1,1))}distanceTo(W){return Math.sqrt(this.distanceToSquared(W))}distanceToSquared(W){const y=this.x-W.x,M=this.y-W.y;return y*y+M*M}manhattanDistanceTo(W){return Math.abs(this.x-W.x)+Math.abs(this.y-W.y)}setLength(W){return this.normalize().multiplyScalar(W)}lerp(W,y){return this.x+=(W.x-this.x)*y,this.y+=(W.y-this.y)*y,this}lerpVectors(W,y,M){return this.x=W.x+(y.x-W.x)*M,this.y=W.y+(y.y-W.y)*M,this}equals(W){return W.x===this.x&&W.y===this.y}fromArray(W,y=0){return this.x=W[y],this.y=W[y+1],this}toArray(W=[],y=0){return W[y]=this.x,W[y+1]=this.y,W}fromBufferAttribute(W,y){return this.x=W.getX(y),this.y=W.getY(y),this}rotateAround(W,y){const M=Math.cos(y),U=Math.sin(y),i=this.x-W.x,x=this.y-W.y;return this.x=i*M-x*U+W.x,this.y=i*U+x*M+W.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class XU{constructor(W,y,M,U,i,x,n,k,g){XU.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==W&&this.set(W,y,M,U,i,x,n,k,g)}set(W,y,M,U,i,x,n,k,g){const u=this.elements;return u[0]=W,u[1]=U,u[2]=n,u[3]=y,u[4]=i,u[5]=k,u[6]=M,u[7]=x,u[8]=g,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(W){const y=this.elements,M=W.elements;return y[0]=M[0],y[1]=M[1],y[2]=M[2],y[3]=M[3],y[4]=M[4],y[5]=M[5],y[6]=M[6],y[7]=M[7],y[8]=M[8],this}extractBasis(W,y,M){return W.setFromMatrix3Column(this,0),y.setFromMatrix3Column(this,1),M.setFromMatrix3Column(this,2),this}setFromMatrix4(W){const y=W.elements;return this.set(y[0],y[4],y[8],y[1],y[5],y[9],y[2],y[6],y[10]),this}multiply(W){return this.multiplyMatrices(this,W)}premultiply(W){return this.multiplyMatrices(W,this)}multiplyMatrices(W,y){const M=W.elements,U=y.elements,i=this.elements,x=M[0],n=M[3],k=M[6],g=M[1],u=M[4],e=M[7],l=M[2],G=M[5],Y=M[8],c=U[0],D=U[3],r=U[6],A=U[1],T=U[4],O=U[7],h=U[2],S=U[5],o=U[8];return i[0]=x*c+n*A+k*h,i[3]=x*D+n*T+k*S,i[6]=x*r+n*O+k*o,i[1]=g*c+u*A+e*h,i[4]=g*D+u*T+e*S,i[7]=g*r+u*O+e*o,i[2]=l*c+G*A+Y*h,i[5]=l*D+G*T+Y*S,i[8]=l*r+G*O+Y*o,this}multiplyScalar(W){const y=this.elements;return y[0]*=W,y[3]*=W,y[6]*=W,y[1]*=W,y[4]*=W,y[7]*=W,y[2]*=W,y[5]*=W,y[8]*=W,this}determinant(){const W=this.elements,y=W[0],M=W[1],U=W[2],i=W[3],x=W[4],n=W[5],k=W[6],g=W[7],u=W[8];return y*x*u-y*n*g-M*i*u+M*n*k+U*i*g-U*x*k}invert(){const W=this.elements,y=W[0],M=W[1],U=W[2],i=W[3],x=W[4],n=W[5],k=W[6],g=W[7],u=W[8],e=u*x-n*g,l=n*k-u*i,G=g*i-x*k,Y=y*e+M*l+U*G;if(0===Y)return this.set(0,0,0,0,0,0,0,0,0);const c=1/Y;return W[0]=e*c,W[1]=(U*g-u*M)*c,W[2]=(n*M-U*x)*c,W[3]=l*c,W[4]=(u*y-U*k)*c,W[5]=(U*i-n*y)*c,W[6]=G*c,W[7]=(M*k-g*y)*c,W[8]=(x*y-M*i)*c,this}transpose(){let W;const y=this.elements;return W=y[1],y[1]=y[3],y[3]=W,W=y[2],y[2]=y[6],y[6]=W,W=y[5],y[5]=y[7],y[7]=W,this}getNormalMatrix(W){return this.setFromMatrix4(W).invert().transpose()}transposeIntoArray(W){const y=this.elements;return W[0]=y[0],W[1]=y[3],W[2]=y[6],W[3]=y[1],W[4]=y[4],W[5]=y[7],W[6]=y[2],W[7]=y[5],W[8]=y[8],this}setUvTransform(W,y,M,U,i,x,n){const k=Math.cos(i),g=Math.sin(i);return this.set(M*k,M*g,-M*(k*x+g*n)+x+W,-U*g,U*k,-U*(-g*x+k*n)+n+y,0,0,1),this}scale(W,y){return this.premultiply(wU.makeScale(W,y)),this}rotate(W){return this.premultiply(wU.makeRotation(-W)),this}translate(W,y){return this.premultiply(wU.makeTranslation(W,y)),this}makeTranslation(W,y){return W.isVector2?this.set(1,0,W.x,0,1,W.y,0,0,1):this.set(1,0,W,0,1,y,0,0,1),this}makeRotation(W){const y=Math.cos(W),M=Math.sin(W);return this.set(y,-M,0,M,y,0,0,0,1),this}makeScale(W,y){return this.set(W,0,0,0,y,0,0,0,1),this}equals(W){const y=this.elements,M=W.elements;for(let W=0;W<9;W++)if(y[W]!==M[W])return!1;return!0}fromArray(W,y=0){for(let M=0;M<9;M++)this.elements[M]=W[M+y];return this}toArray(W=[],y=0){const M=this.elements;return W[y]=M[0],W[y+1]=M[1],W[y+2]=M[2],W[y+3]=M[3],W[y+4]=M[4],W[y+5]=M[5],W[y+6]=M[6],W[y+7]=M[7],W[y+8]=M[8],W}clone(){return(new this.constructor).fromArray(this.elements)}}const wU=new XU;function FU(W){for(let y=W.length-1;y>=0;--y)if(W[y]>=65535)return!0;return!1}const tU={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function JU(W,y){return new tU[W](y)}function jU(W){return document.createElementNS("http://www.w3.org/1999/xhtml",W)}const CU={};function QU(W){W in CU||(CU[W]=!0,console.warn(W))}function Wi(W){return W<.04045?.0773993808*W:Math.pow(.9478672986*W+.0521327014,2.4)}function yi(W){return W<.0031308?12.92*W:1.055*Math.pow(W,.41666)-.055}const Mi=(new XU).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Ui=(new XU).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),ii={[vM]:W=>W,[BM]:W=>W.convertSRGBToLinear(),[LM]:function(W){return W.convertSRGBToLinear().applyMatrix3(Ui)}},xi={[vM]:W=>W,[BM]:W=>W.convertLinearToSRGB(),[LM]:function(W){return W.applyMatrix3(Mi).convertLinearToSRGB()}},ni={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(W){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!W},get workingColorSpace(){return vM},set workingColorSpace(W){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(W,y,M){if(!1===this.enabled||y===M||!y||!M)return W;const U=ii[y],i=xi[M];if(void 0===U||void 0===i)throw new Error(`Unsupported color space conversion, "${y}" to "${M}".`);return i(U(W))},fromWorkingColorSpace:function(W,y){return this.convert(W,this.workingColorSpace,y)},toWorkingColorSpace:function(W,y){return this.convert(W,y,this.workingColorSpace)}};let ki;class gi{static getDataURL(W){if(/^data:/i.test(W.src))return W.src;if("undefined"==typeof HTMLCanvasElement)return W.src;let y;if(W instanceof HTMLCanvasElement)y=W;else{void 0===ki&&(ki=jU("canvas")),ki.width=W.width,ki.height=W.height;const M=ki.getContext("2d");W instanceof ImageData?M.putImageData(W,0,0):M.drawImage(W,0,0,W.width,W.height),y=ki}return y.width>2048||y.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",W),y.toDataURL("image/jpeg",.6)):y.toDataURL("image/png")}static sRGBToLinear(W){if("undefined"!=typeof HTMLImageElement&&W instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&W instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&W instanceof ImageBitmap){const y=jU("canvas");y.width=W.width,y.height=W.height;const M=y.getContext("2d");M.drawImage(W,0,0,W.width,W.height);const U=M.getImageData(0,0,W.width,W.height),i=U.data;for(let W=0;W<i.length;W++)i[W]=255*Wi(i[W]/255);return M.putImageData(U,0,0),y}if(W.data){const y=W.data.slice(0);for(let W=0;W<y.length;W++)y instanceof Uint8Array||y instanceof Uint8ClampedArray?y[W]=Math.floor(255*Wi(y[W]/255)):y[W]=Wi(y[W]);return{data:y,width:W.width,height:W.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),W}}let ui=0;class ei{constructor(W=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ui++}),this.uuid=IU(),this.data=W,this.version=0}set needsUpdate(W){!0===W&&this.version++}toJSON(W){const y=void 0===W||"string"==typeof W;if(!y&&void 0!==W.images[this.uuid])return W.images[this.uuid];const M={uuid:this.uuid,url:""},U=this.data;if(null!==U){let W;if(Array.isArray(U)){W=[];for(let y=0,M=U.length;y<M;y++)U[y].isDataTexture?W.push(li(U[y].image)):W.push(li(U[y]))}else W=li(U);M.url=W}return y||(W.images[this.uuid]=M),M}}function li(W){return"undefined"!=typeof HTMLImageElement&&W instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&W instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&W instanceof ImageBitmap?gi.getDataURL(W):W.data?{data:Array.from(W.data),width:W.width,height:W.height,type:W.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Gi=0;class Yi extends mU{constructor(W=Yi.DEFAULT_IMAGE,y=Yi.DEFAULT_MAPPING,M=Gy,U=Gy,i=Oy,x=oy,n=Ey,k=qy,g=Yi.DEFAULT_ANISOTROPY,u=HM){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Gi++}),this.uuid=IU(),this.name="",this.source=new ei(W),this.mipmaps=[],this.mapping=y,this.channel=0,this.wrapS=M,this.wrapT=U,this.magFilter=i,this.minFilter=x,this.anisotropy=g,this.format=n,this.internalFormat=null,this.type=k,this.offset=new LU(0,0),this.repeat=new LU(1,1),this.center=new LU(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new XU,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof u?this.colorSpace=u:(QU("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===ZM?BM:HM),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(W=null){this.source.data=W}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(W){return this.name=W.name,this.source=W.source,this.mipmaps=W.mipmaps.slice(0),this.mapping=W.mapping,this.channel=W.channel,this.wrapS=W.wrapS,this.wrapT=W.wrapT,this.magFilter=W.magFilter,this.minFilter=W.minFilter,this.anisotropy=W.anisotropy,this.format=W.format,this.internalFormat=W.internalFormat,this.type=W.type,this.offset.copy(W.offset),this.repeat.copy(W.repeat),this.center.copy(W.center),this.rotation=W.rotation,this.matrixAutoUpdate=W.matrixAutoUpdate,this.matrix.copy(W.matrix),this.generateMipmaps=W.generateMipmaps,this.premultiplyAlpha=W.premultiplyAlpha,this.flipY=W.flipY,this.unpackAlignment=W.unpackAlignment,this.colorSpace=W.colorSpace,this.userData=JSON.parse(JSON.stringify(W.userData)),this.needsUpdate=!0,this}toJSON(W){const y=void 0===W||"string"==typeof W;if(!y&&void 0!==W.textures[this.uuid])return W.textures[this.uuid];const M={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(W).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(M.userData=this.userData),y||(W.textures[this.uuid]=M),M}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(W){if(this.mapping!==xy)return W;if(W.applyMatrix3(this.matrix),W.x<0||W.x>1)switch(this.wrapS){case ly:W.x=W.x-Math.floor(W.x);break;case Gy:W.x=W.x<0?0:1;break;case Yy:1===Math.abs(Math.floor(W.x)%2)?W.x=Math.ceil(W.x)-W.x:W.x=W.x-Math.floor(W.x)}if(W.y<0||W.y>1)switch(this.wrapT){case ly:W.y=W.y-Math.floor(W.y);break;case Gy:W.y=W.y<0?0:1;break;case Yy:1===Math.abs(Math.floor(W.y)%2)?W.y=Math.ceil(W.y)-W.y:W.y=W.y-Math.floor(W.y)}return this.flipY&&(W.y=1-W.y),W}set needsUpdate(W){!0===W&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return QU("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===BM?ZM:EM}set encoding(W){QU("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=W===ZM?BM:HM}}Yi.DEFAULT_IMAGE=null,Yi.DEFAULT_MAPPING=xy,Yi.DEFAULT_ANISOTROPY=1;class ci{constructor(W=0,y=0,M=0,U=1){ci.prototype.isVector4=!0,this.x=W,this.y=y,this.z=M,this.w=U}get width(){return this.z}set width(W){this.z=W}get height(){return this.w}set height(W){this.w=W}set(W,y,M,U){return this.x=W,this.y=y,this.z=M,this.w=U,this}setScalar(W){return this.x=W,this.y=W,this.z=W,this.w=W,this}setX(W){return this.x=W,this}setY(W){return this.y=W,this}setZ(W){return this.z=W,this}setW(W){return this.w=W,this}setComponent(W,y){switch(W){case 0:this.x=y;break;case 1:this.y=y;break;case 2:this.z=y;break;case 3:this.w=y;break;default:throw new Error("index is out of range: "+W)}return this}getComponent(W){switch(W){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+W)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(W){return this.x=W.x,this.y=W.y,this.z=W.z,this.w=void 0!==W.w?W.w:1,this}add(W){return this.x+=W.x,this.y+=W.y,this.z+=W.z,this.w+=W.w,this}addScalar(W){return this.x+=W,this.y+=W,this.z+=W,this.w+=W,this}addVectors(W,y){return this.x=W.x+y.x,this.y=W.y+y.y,this.z=W.z+y.z,this.w=W.w+y.w,this}addScaledVector(W,y){return this.x+=W.x*y,this.y+=W.y*y,this.z+=W.z*y,this.w+=W.w*y,this}sub(W){return this.x-=W.x,this.y-=W.y,this.z-=W.z,this.w-=W.w,this}subScalar(W){return this.x-=W,this.y-=W,this.z-=W,this.w-=W,this}subVectors(W,y){return this.x=W.x-y.x,this.y=W.y-y.y,this.z=W.z-y.z,this.w=W.w-y.w,this}multiply(W){return this.x*=W.x,this.y*=W.y,this.z*=W.z,this.w*=W.w,this}multiplyScalar(W){return this.x*=W,this.y*=W,this.z*=W,this.w*=W,this}applyMatrix4(W){const y=this.x,M=this.y,U=this.z,i=this.w,x=W.elements;return this.x=x[0]*y+x[4]*M+x[8]*U+x[12]*i,this.y=x[1]*y+x[5]*M+x[9]*U+x[13]*i,this.z=x[2]*y+x[6]*M+x[10]*U+x[14]*i,this.w=x[3]*y+x[7]*M+x[11]*U+x[15]*i,this}divideScalar(W){return this.multiplyScalar(1/W)}setAxisAngleFromQuaternion(W){this.w=2*Math.acos(W.w);const y=Math.sqrt(1-W.w*W.w);return y<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=W.x/y,this.y=W.y/y,this.z=W.z/y),this}setAxisAngleFromRotationMatrix(W){let y,M,U,i;const x=.01,n=.1,k=W.elements,g=k[0],u=k[4],e=k[8],l=k[1],G=k[5],Y=k[9],c=k[2],D=k[6],r=k[10];if(Math.abs(u-l)<x&&Math.abs(e-c)<x&&Math.abs(Y-D)<x){if(Math.abs(u+l)<n&&Math.abs(e+c)<n&&Math.abs(Y+D)<n&&Math.abs(g+G+r-3)<n)return this.set(1,0,0,0),this;y=Math.PI;const W=(g+1)/2,k=(G+1)/2,A=(r+1)/2,T=(u+l)/4,O=(e+c)/4,h=(Y+D)/4;return W>k&&W>A?W<x?(M=0,U=.707106781,i=.707106781):(M=Math.sqrt(W),U=T/M,i=O/M):k>A?k<x?(M=.707106781,U=0,i=.707106781):(U=Math.sqrt(k),M=T/U,i=h/U):A<x?(M=.707106781,U=.707106781,i=0):(i=Math.sqrt(A),M=O/i,U=h/i),this.set(M,U,i,y),this}let A=Math.sqrt((D-Y)*(D-Y)+(e-c)*(e-c)+(l-u)*(l-u));return Math.abs(A)<.001&&(A=1),this.x=(D-Y)/A,this.y=(e-c)/A,this.z=(l-u)/A,this.w=Math.acos((g+G+r-1)/2),this}min(W){return this.x=Math.min(this.x,W.x),this.y=Math.min(this.y,W.y),this.z=Math.min(this.z,W.z),this.w=Math.min(this.w,W.w),this}max(W){return this.x=Math.max(this.x,W.x),this.y=Math.max(this.y,W.y),this.z=Math.max(this.z,W.z),this.w=Math.max(this.w,W.w),this}clamp(W,y){return this.x=Math.max(W.x,Math.min(y.x,this.x)),this.y=Math.max(W.y,Math.min(y.y,this.y)),this.z=Math.max(W.z,Math.min(y.z,this.z)),this.w=Math.max(W.w,Math.min(y.w,this.w)),this}clampScalar(W,y){return this.x=Math.max(W,Math.min(y,this.x)),this.y=Math.max(W,Math.min(y,this.y)),this.z=Math.max(W,Math.min(y,this.z)),this.w=Math.max(W,Math.min(y,this.w)),this}clampLength(W,y){const M=this.length();return this.divideScalar(M||1).multiplyScalar(Math.max(W,Math.min(y,M)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(W){return this.x*W.x+this.y*W.y+this.z*W.z+this.w*W.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(W){return this.normalize().multiplyScalar(W)}lerp(W,y){return this.x+=(W.x-this.x)*y,this.y+=(W.y-this.y)*y,this.z+=(W.z-this.z)*y,this.w+=(W.w-this.w)*y,this}lerpVectors(W,y,M){return this.x=W.x+(y.x-W.x)*M,this.y=W.y+(y.y-W.y)*M,this.z=W.z+(y.z-W.z)*M,this.w=W.w+(y.w-W.w)*M,this}equals(W){return W.x===this.x&&W.y===this.y&&W.z===this.z&&W.w===this.w}fromArray(W,y=0){return this.x=W[y],this.y=W[y+1],this.z=W[y+2],this.w=W[y+3],this}toArray(W=[],y=0){return W[y]=this.x,W[y+1]=this.y,W[y+2]=this.z,W[y+3]=this.w,W}fromBufferAttribute(W,y){return this.x=W.getX(y),this.y=W.getY(y),this.z=W.getZ(y),this.w=W.getW(y),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Di extends mU{constructor(W=1,y=1,M={}){super(),this.isRenderTarget=!0,this.width=W,this.height=y,this.depth=1,this.scissor=new ci(0,0,W,y),this.scissorTest=!1,this.viewport=new ci(0,0,W,y);const U={width:W,height:y,depth:1};void 0!==M.encoding&&(QU("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),M.colorSpace=M.encoding===ZM?BM:HM),this.texture=new Yi(U,M.mapping,M.wrapS,M.wrapT,M.magFilter,M.minFilter,M.format,M.type,M.anisotropy,M.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==M.generateMipmaps&&M.generateMipmaps,this.texture.internalFormat=void 0!==M.internalFormat?M.internalFormat:null,this.texture.minFilter=void 0!==M.minFilter?M.minFilter:Oy,this.depthBuffer=void 0===M.depthBuffer||M.depthBuffer,this.stencilBuffer=void 0!==M.stencilBuffer&&M.stencilBuffer,this.depthTexture=void 0!==M.depthTexture?M.depthTexture:null,this.samples=void 0!==M.samples?M.samples:0}setSize(W,y,M=1){this.width===W&&this.height===y&&this.depth===M||(this.width=W,this.height=y,this.depth=M,this.texture.image.width=W,this.texture.image.height=y,this.texture.image.depth=M,this.dispose()),this.viewport.set(0,0,W,y),this.scissor.set(0,0,W,y)}clone(){return(new this.constructor).copy(this)}copy(W){this.width=W.width,this.height=W.height,this.depth=W.depth,this.scissor.copy(W.scissor),this.scissorTest=W.scissorTest,this.viewport.copy(W.viewport),this.texture=W.texture.clone(),this.texture.isRenderTargetTexture=!0;const y=Object.assign({},W.texture.image);return this.texture.source=new ei(y),this.depthBuffer=W.depthBuffer,this.stencilBuffer=W.stencilBuffer,null!==W.depthTexture&&(this.depthTexture=W.depthTexture.clone()),this.samples=W.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ri extends Di{constructor(W=1,y=1,M={}){super(W,y,M),this.isWebGLRenderTarget=!0}}class Ai extends Yi{constructor(W=null,y=1,M=1,U=1){super(null),this.isDataArrayTexture=!0,this.image={data:W,width:y,height:M,depth:U},this.magFilter=cy,this.minFilter=cy,this.wrapR=Gy,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ti extends ri{constructor(W=1,y=1,M=1){super(W,y),this.isWebGLArrayRenderTarget=!0,this.depth=M,this.texture=new Ai(null,W,y,M),this.texture.isRenderTargetTexture=!0}}class Oi extends Yi{constructor(W=null,y=1,M=1,U=1){super(null),this.isData3DTexture=!0,this.image={data:W,width:y,height:M,depth:U},this.magFilter=cy,this.minFilter=cy,this.wrapR=Gy,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class hi extends ri{constructor(W=1,y=1,M=1){super(W,y),this.isWebGL3DRenderTarget=!0,this.depth=M,this.texture=new Oi(null,W,y,M),this.texture.isRenderTargetTexture=!0}}class Si extends ri{constructor(W=1,y=1,M=1,U={}){super(W,y,U),this.isWebGLMultipleRenderTargets=!0;const i=this.texture;this.texture=[];for(let W=0;W<M;W++)this.texture[W]=i.clone(),this.texture[W].isRenderTargetTexture=!0}setSize(W,y,M=1){if(this.width!==W||this.height!==y||this.depth!==M){this.width=W,this.height=y,this.depth=M;for(let U=0,i=this.texture.length;U<i;U++)this.texture[U].image.width=W,this.texture[U].image.height=y,this.texture[U].image.depth=M;this.dispose()}this.viewport.set(0,0,W,y),this.scissor.set(0,0,W,y)}copy(W){this.dispose(),this.width=W.width,this.height=W.height,this.depth=W.depth,this.scissor.copy(W.scissor),this.scissorTest=W.scissorTest,this.viewport.copy(W.viewport),this.depthBuffer=W.depthBuffer,this.stencilBuffer=W.stencilBuffer,null!==W.depthTexture&&(this.depthTexture=W.depthTexture.clone()),this.texture.length=0;for(let y=0,M=W.texture.length;y<M;y++)this.texture[y]=W.texture[y].clone(),this.texture[y].isRenderTargetTexture=!0;return this}}class oi{constructor(W=0,y=0,M=0,U=1){this.isQuaternion=!0,this._x=W,this._y=y,this._z=M,this._w=U}static slerpFlat(W,y,M,U,i,x,n){let k=M[U+0],g=M[U+1],u=M[U+2],e=M[U+3];const l=i[x+0],G=i[x+1],Y=i[x+2],c=i[x+3];if(0===n)return W[y+0]=k,W[y+1]=g,W[y+2]=u,void(W[y+3]=e);if(1===n)return W[y+0]=l,W[y+1]=G,W[y+2]=Y,void(W[y+3]=c);if(e!==c||k!==l||g!==G||u!==Y){let W=1-n;const y=k*l+g*G+u*Y+e*c,M=y>=0?1:-1,U=1-y*y;if(U>Number.EPSILON){const i=Math.sqrt(U),x=Math.atan2(i,y*M);W=Math.sin(W*x)/i,n=Math.sin(n*x)/i}const i=n*M;if(k=k*W+l*i,g=g*W+G*i,u=u*W+Y*i,e=e*W+c*i,W===1-n){const W=1/Math.sqrt(k*k+g*g+u*u+e*e);k*=W,g*=W,u*=W,e*=W}}W[y]=k,W[y+1]=g,W[y+2]=u,W[y+3]=e}static multiplyQuaternionsFlat(W,y,M,U,i,x){const n=M[U],k=M[U+1],g=M[U+2],u=M[U+3],e=i[x],l=i[x+1],G=i[x+2],Y=i[x+3];return W[y]=n*Y+u*e+k*G-g*l,W[y+1]=k*Y+u*l+g*e-n*G,W[y+2]=g*Y+u*G+n*l-k*e,W[y+3]=u*Y-n*e-k*l-g*G,W}get x(){return this._x}set x(W){this._x=W,this._onChangeCallback()}get y(){return this._y}set y(W){this._y=W,this._onChangeCallback()}get z(){return this._z}set z(W){this._z=W,this._onChangeCallback()}get w(){return this._w}set w(W){this._w=W,this._onChangeCallback()}set(W,y,M,U){return this._x=W,this._y=y,this._z=M,this._w=U,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(W){return this._x=W.x,this._y=W.y,this._z=W.z,this._w=W.w,this._onChangeCallback(),this}setFromEuler(W,y){const M=W._x,U=W._y,i=W._z,x=W._order,n=Math.cos,k=Math.sin,g=n(M/2),u=n(U/2),e=n(i/2),l=k(M/2),G=k(U/2),Y=k(i/2);switch(x){case"XYZ":this._x=l*u*e+g*G*Y,this._y=g*G*e-l*u*Y,this._z=g*u*Y+l*G*e,this._w=g*u*e-l*G*Y;break;case"YXZ":this._x=l*u*e+g*G*Y,this._y=g*G*e-l*u*Y,this._z=g*u*Y-l*G*e,this._w=g*u*e+l*G*Y;break;case"ZXY":this._x=l*u*e-g*G*Y,this._y=g*G*e+l*u*Y,this._z=g*u*Y+l*G*e,this._w=g*u*e-l*G*Y;break;case"ZYX":this._x=l*u*e-g*G*Y,this._y=g*G*e+l*u*Y,this._z=g*u*Y-l*G*e,this._w=g*u*e+l*G*Y;break;case"YZX":this._x=l*u*e+g*G*Y,this._y=g*G*e+l*u*Y,this._z=g*u*Y-l*G*e,this._w=g*u*e-l*G*Y;break;case"XZY":this._x=l*u*e-g*G*Y,this._y=g*G*e-l*u*Y,this._z=g*u*Y+l*G*e,this._w=g*u*e+l*G*Y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+x)}return!1!==y&&this._onChangeCallback(),this}setFromAxisAngle(W,y){const M=y/2,U=Math.sin(M);return this._x=W.x*U,this._y=W.y*U,this._z=W.z*U,this._w=Math.cos(M),this._onChangeCallback(),this}setFromRotationMatrix(W){const y=W.elements,M=y[0],U=y[4],i=y[8],x=y[1],n=y[5],k=y[9],g=y[2],u=y[6],e=y[10],l=M+n+e;if(l>0){const W=.5/Math.sqrt(l+1);this._w=.25/W,this._x=(u-k)*W,this._y=(i-g)*W,this._z=(x-U)*W}else if(M>n&&M>e){const W=2*Math.sqrt(1+M-n-e);this._w=(u-k)/W,this._x=.25*W,this._y=(U+x)/W,this._z=(i+g)/W}else if(n>e){const W=2*Math.sqrt(1+n-M-e);this._w=(i-g)/W,this._x=(U+x)/W,this._y=.25*W,this._z=(k+u)/W}else{const W=2*Math.sqrt(1+e-M-n);this._w=(x-U)/W,this._x=(i+g)/W,this._y=(k+u)/W,this._z=.25*W}return this._onChangeCallback(),this}setFromUnitVectors(W,y){let M=W.dot(y)+1;return M<Number.EPSILON?(M=0,Math.abs(W.x)>Math.abs(W.z)?(this._x=-W.y,this._y=W.x,this._z=0,this._w=M):(this._x=0,this._y=-W.z,this._z=W.y,this._w=M)):(this._x=W.y*y.z-W.z*y.y,this._y=W.z*y.x-W.x*y.z,this._z=W.x*y.y-W.y*y.x,this._w=M),this.normalize()}angleTo(W){return 2*Math.acos(Math.abs(EU(this.dot(W),-1,1)))}rotateTowards(W,y){const M=this.angleTo(W);if(0===M)return this;const U=Math.min(1,y/M);return this.slerp(W,U),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(W){return this._x*W._x+this._y*W._y+this._z*W._z+this._w*W._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let W=this.length();return 0===W?(this._x=0,this._y=0,this._z=0,this._w=1):(W=1/W,this._x=this._x*W,this._y=this._y*W,this._z=this._z*W,this._w=this._w*W),this._onChangeCallback(),this}multiply(W){return this.multiplyQuaternions(this,W)}premultiply(W){return this.multiplyQuaternions(W,this)}multiplyQuaternions(W,y){const M=W._x,U=W._y,i=W._z,x=W._w,n=y._x,k=y._y,g=y._z,u=y._w;return this._x=M*u+x*n+U*g-i*k,this._y=U*u+x*k+i*n-M*g,this._z=i*u+x*g+M*k-U*n,this._w=x*u-M*n-U*k-i*g,this._onChangeCallback(),this}slerp(W,y){if(0===y)return this;if(1===y)return this.copy(W);const M=this._x,U=this._y,i=this._z,x=this._w;let n=x*W._w+M*W._x+U*W._y+i*W._z;if(n<0?(this._w=-W._w,this._x=-W._x,this._y=-W._y,this._z=-W._z,n=-n):this.copy(W),n>=1)return this._w=x,this._x=M,this._y=U,this._z=i,this;const k=1-n*n;if(k<=Number.EPSILON){const W=1-y;return this._w=W*x+y*this._w,this._x=W*M+y*this._x,this._y=W*U+y*this._y,this._z=W*i+y*this._z,this.normalize(),this._onChangeCallback(),this}const g=Math.sqrt(k),u=Math.atan2(g,n),e=Math.sin((1-y)*u)/g,l=Math.sin(y*u)/g;return this._w=x*e+this._w*l,this._x=M*e+this._x*l,this._y=U*e+this._y*l,this._z=i*e+this._z*l,this._onChangeCallback(),this}slerpQuaternions(W,y,M){return this.copy(W).slerp(y,M)}random(){const W=Math.random(),y=Math.sqrt(1-W),M=Math.sqrt(W),U=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(y*Math.cos(U),M*Math.sin(i),M*Math.cos(i),y*Math.sin(U))}equals(W){return W._x===this._x&&W._y===this._y&&W._z===this._z&&W._w===this._w}fromArray(W,y=0){return this._x=W[y],this._y=W[y+1],this._z=W[y+2],this._w=W[y+3],this._onChangeCallback(),this}toArray(W=[],y=0){return W[y]=this._x,W[y+1]=this._y,W[y+2]=this._z,W[y+3]=this._w,W}fromBufferAttribute(W,y){return this._x=W.getX(y),this._y=W.getY(y),this._z=W.getZ(y),this._w=W.getW(y),this}toJSON(){return this.toArray()}_onChange(W){return this._onChangeCallback=W,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class di{constructor(W=0,y=0,M=0){di.prototype.isVector3=!0,this.x=W,this.y=y,this.z=M}set(W,y,M){return void 0===M&&(M=this.z),this.x=W,this.y=y,this.z=M,this}setScalar(W){return this.x=W,this.y=W,this.z=W,this}setX(W){return this.x=W,this}setY(W){return this.y=W,this}setZ(W){return this.z=W,this}setComponent(W,y){switch(W){case 0:this.x=y;break;case 1:this.y=y;break;case 2:this.z=y;break;default:throw new Error("index is out of range: "+W)}return this}getComponent(W){switch(W){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+W)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(W){return this.x=W.x,this.y=W.y,this.z=W.z,this}add(W){return this.x+=W.x,this.y+=W.y,this.z+=W.z,this}addScalar(W){return this.x+=W,this.y+=W,this.z+=W,this}addVectors(W,y){return this.x=W.x+y.x,this.y=W.y+y.y,this.z=W.z+y.z,this}addScaledVector(W,y){return this.x+=W.x*y,this.y+=W.y*y,this.z+=W.z*y,this}sub(W){return this.x-=W.x,this.y-=W.y,this.z-=W.z,this}subScalar(W){return this.x-=W,this.y-=W,this.z-=W,this}subVectors(W,y){return this.x=W.x-y.x,this.y=W.y-y.y,this.z=W.z-y.z,this}multiply(W){return this.x*=W.x,this.y*=W.y,this.z*=W.z,this}multiplyScalar(W){return this.x*=W,this.y*=W,this.z*=W,this}multiplyVectors(W,y){return this.x=W.x*y.x,this.y=W.y*y.y,this.z=W.z*y.z,this}applyEuler(W){return this.applyQuaternion(si.setFromEuler(W))}applyAxisAngle(W,y){return this.applyQuaternion(si.setFromAxisAngle(W,y))}applyMatrix3(W){const y=this.x,M=this.y,U=this.z,i=W.elements;return this.x=i[0]*y+i[3]*M+i[6]*U,this.y=i[1]*y+i[4]*M+i[7]*U,this.z=i[2]*y+i[5]*M+i[8]*U,this}applyNormalMatrix(W){return this.applyMatrix3(W).normalize()}applyMatrix4(W){const y=this.x,M=this.y,U=this.z,i=W.elements,x=1/(i[3]*y+i[7]*M+i[11]*U+i[15]);return this.x=(i[0]*y+i[4]*M+i[8]*U+i[12])*x,this.y=(i[1]*y+i[5]*M+i[9]*U+i[13])*x,this.z=(i[2]*y+i[6]*M+i[10]*U+i[14])*x,this}applyQuaternion(W){const y=this.x,M=this.y,U=this.z,i=W.x,x=W.y,n=W.z,k=W.w,g=k*y+x*U-n*M,u=k*M+n*y-i*U,e=k*U+i*M-x*y,l=-i*y-x*M-n*U;return this.x=g*k+l*-i+u*-n-e*-x,this.y=u*k+l*-x+e*-i-g*-n,this.z=e*k+l*-n+g*-x-u*-i,this}project(W){return this.applyMatrix4(W.matrixWorldInverse).applyMatrix4(W.projectionMatrix)}unproject(W){return this.applyMatrix4(W.projectionMatrixInverse).applyMatrix4(W.matrixWorld)}transformDirection(W){const y=this.x,M=this.y,U=this.z,i=W.elements;return this.x=i[0]*y+i[4]*M+i[8]*U,this.y=i[1]*y+i[5]*M+i[9]*U,this.z=i[2]*y+i[6]*M+i[10]*U,this.normalize()}divide(W){return this.x/=W.x,this.y/=W.y,this.z/=W.z,this}divideScalar(W){return this.multiplyScalar(1/W)}min(W){return this.x=Math.min(this.x,W.x),this.y=Math.min(this.y,W.y),this.z=Math.min(this.z,W.z),this}max(W){return this.x=Math.max(this.x,W.x),this.y=Math.max(this.y,W.y),this.z=Math.max(this.z,W.z),this}clamp(W,y){return this.x=Math.max(W.x,Math.min(y.x,this.x)),this.y=Math.max(W.y,Math.min(y.y,this.y)),this.z=Math.max(W.z,Math.min(y.z,this.z)),this}clampScalar(W,y){return this.x=Math.max(W,Math.min(y,this.x)),this.y=Math.max(W,Math.min(y,this.y)),this.z=Math.max(W,Math.min(y,this.z)),this}clampLength(W,y){const M=this.length();return this.divideScalar(M||1).multiplyScalar(Math.max(W,Math.min(y,M)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(W){return this.x*W.x+this.y*W.y+this.z*W.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(W){return this.normalize().multiplyScalar(W)}lerp(W,y){return this.x+=(W.x-this.x)*y,this.y+=(W.y-this.y)*y,this.z+=(W.z-this.z)*y,this}lerpVectors(W,y,M){return this.x=W.x+(y.x-W.x)*M,this.y=W.y+(y.y-W.y)*M,this.z=W.z+(y.z-W.z)*M,this}cross(W){return this.crossVectors(this,W)}crossVectors(W,y){const M=W.x,U=W.y,i=W.z,x=y.x,n=y.y,k=y.z;return this.x=U*k-i*n,this.y=i*x-M*k,this.z=M*n-U*x,this}projectOnVector(W){const y=W.lengthSq();if(0===y)return this.set(0,0,0);const M=W.dot(this)/y;return this.copy(W).multiplyScalar(M)}projectOnPlane(W){return qi.copy(this).projectOnVector(W),this.sub(qi)}reflect(W){return this.sub(qi.copy(W).multiplyScalar(2*this.dot(W)))}angleTo(W){const y=Math.sqrt(this.lengthSq()*W.lengthSq());if(0===y)return Math.PI/2;const M=this.dot(W)/y;return Math.acos(EU(M,-1,1))}distanceTo(W){return Math.sqrt(this.distanceToSquared(W))}distanceToSquared(W){const y=this.x-W.x,M=this.y-W.y,U=this.z-W.z;return y*y+M*M+U*U}manhattanDistanceTo(W){return Math.abs(this.x-W.x)+Math.abs(this.y-W.y)+Math.abs(this.z-W.z)}setFromSpherical(W){return this.setFromSphericalCoords(W.radius,W.phi,W.theta)}setFromSphericalCoords(W,y,M){const U=Math.sin(y)*W;return this.x=U*Math.sin(M),this.y=Math.cos(y)*W,this.z=U*Math.cos(M),this}setFromCylindrical(W){return this.setFromCylindricalCoords(W.radius,W.theta,W.y)}setFromCylindricalCoords(W,y,M){return this.x=W*Math.sin(y),this.y=M,this.z=W*Math.cos(y),this}setFromMatrixPosition(W){const y=W.elements;return this.x=y[12],this.y=y[13],this.z=y[14],this}setFromMatrixScale(W){const y=this.setFromMatrixColumn(W,0).length(),M=this.setFromMatrixColumn(W,1).length(),U=this.setFromMatrixColumn(W,2).length();return this.x=y,this.y=M,this.z=U,this}setFromMatrixColumn(W,y){return this.fromArray(W.elements,4*y)}setFromMatrix3Column(W,y){return this.fromArray(W.elements,3*y)}setFromEuler(W){return this.x=W._x,this.y=W._y,this.z=W._z,this}setFromColor(W){return this.x=W.r,this.y=W.g,this.z=W.b,this}equals(W){return W.x===this.x&&W.y===this.y&&W.z===this.z}fromArray(W,y=0){return this.x=W[y],this.y=W[y+1],this.z=W[y+2],this}toArray(W=[],y=0){return W[y]=this.x,W[y+1]=this.y,W[y+2]=this.z,W}fromBufferAttribute(W,y){return this.x=W.getX(y),this.y=W.getY(y),this.z=W.getZ(y),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const W=2*(Math.random()-.5),y=Math.random()*Math.PI*2,M=Math.sqrt(1-W**2);return this.x=M*Math.cos(y),this.y=M*Math.sin(y),this.z=W,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const qi=new di,si=new oi;class Ni{constructor(W=new di(+1/0,+1/0,+1/0),y=new di(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=W,this.max=y}set(W,y){return this.min.copy(W),this.max.copy(y),this}setFromArray(W){this.makeEmpty();for(let y=0,M=W.length;y<M;y+=3)this.expandByPoint(pi.fromArray(W,y));return this}setFromBufferAttribute(W){this.makeEmpty();for(let y=0,M=W.count;y<M;y++)this.expandByPoint(pi.fromBufferAttribute(W,y));return this}setFromPoints(W){this.makeEmpty();for(let y=0,M=W.length;y<M;y++)this.expandByPoint(W[y]);return this}setFromCenterAndSize(W,y){const M=pi.copy(y).multiplyScalar(.5);return this.min.copy(W).sub(M),this.max.copy(W).add(M),this}setFromObject(W,y=!1){return this.makeEmpty(),this.expandByObject(W,y)}clone(){return(new this.constructor).copy(this)}copy(W){return this.min.copy(W.min),this.max.copy(W.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=+1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(W){return this.isEmpty()?W.set(0,0,0):W.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(W){return this.isEmpty()?W.set(0,0,0):W.subVectors(this.max,this.min)}expandByPoint(W){return this.min.min(W),this.max.max(W),this}expandByVector(W){return this.min.sub(W),this.max.add(W),this}expandByScalar(W){return this.min.addScalar(-W),this.max.addScalar(W),this}expandByObject(W,y=!1){if(W.updateWorldMatrix(!1,!1),void 0!==W.boundingBox)null===W.boundingBox&&W.computeBoundingBox(),bi.copy(W.boundingBox),bi.applyMatrix4(W.matrixWorld),this.union(bi);else{const M=W.geometry;if(void 0!==M)if(y&&void 0!==M.attributes&&void 0!==M.attributes.position){const y=M.attributes.position;for(let M=0,U=y.count;M<U;M++)pi.fromBufferAttribute(y,M).applyMatrix4(W.matrixWorld),this.expandByPoint(pi)}else null===M.boundingBox&&M.computeBoundingBox(),bi.copy(M.boundingBox),bi.applyMatrix4(W.matrixWorld),this.union(bi)}const M=W.children;for(let W=0,U=M.length;W<U;W++)this.expandByObject(M[W],y);return this}containsPoint(W){return!(W.x<this.min.x||W.x>this.max.x||W.y<this.min.y||W.y>this.max.y||W.z<this.min.z||W.z>this.max.z)}containsBox(W){return this.min.x<=W.min.x&&W.max.x<=this.max.x&&this.min.y<=W.min.y&&W.max.y<=this.max.y&&this.min.z<=W.min.z&&W.max.z<=this.max.z}getParameter(W,y){return y.set((W.x-this.min.x)/(this.max.x-this.min.x),(W.y-this.min.y)/(this.max.y-this.min.y),(W.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(W){return!(W.max.x<this.min.x||W.min.x>this.max.x||W.max.y<this.min.y||W.min.y>this.max.y||W.max.z<this.min.z||W.min.z>this.max.z)}intersectsSphere(W){return this.clampPoint(W.center,pi),pi.distanceToSquared(W.center)<=W.radius*W.radius}intersectsPlane(W){let y,M;return W.normal.x>0?(y=W.normal.x*this.min.x,M=W.normal.x*this.max.x):(y=W.normal.x*this.max.x,M=W.normal.x*this.min.x),W.normal.y>0?(y+=W.normal.y*this.min.y,M+=W.normal.y*this.max.y):(y+=W.normal.y*this.max.y,M+=W.normal.y*this.min.y),W.normal.z>0?(y+=W.normal.z*this.min.z,M+=W.normal.z*this.max.z):(y+=W.normal.z*this.max.z,M+=W.normal.z*this.min.z),y<=-W.constant&&M>=-W.constant}intersectsTriangle(W){if(this.isEmpty())return!1;this.getCenter(Ei),Zi.subVectors(this.max,Ei),mi.subVectors(W.a,Ei),zi.subVectors(W.b,Ei),Ki.subVectors(W.c,Ei),Pi.subVectors(zi,mi),Ri.subVectors(Ki,zi),Ii.subVectors(mi,Ki);let y=[0,-Pi.z,Pi.y,0,-Ri.z,Ri.y,0,-Ii.z,Ii.y,Pi.z,0,-Pi.x,Ri.z,0,-Ri.x,Ii.z,0,-Ii.x,-Pi.y,Pi.x,0,-Ri.y,Ri.x,0,-Ii.y,Ii.x,0];return!!$i(y,mi,zi,Ki,Zi)&&(y=[1,0,0,0,1,0,0,0,1],!!$i(y,mi,zi,Ki,Zi)&&(fi.crossVectors(Pi,Ri),y=[fi.x,fi.y,fi.z],$i(y,mi,zi,Ki,Zi)))}clampPoint(W,y){return y.copy(W).clamp(this.min,this.max)}distanceToPoint(W){return this.clampPoint(W,pi).distanceTo(W)}getBoundingSphere(W){return this.isEmpty()?W.makeEmpty():(this.getCenter(W.center),W.radius=.5*this.getSize(pi).length()),W}intersect(W){return this.min.max(W.min),this.max.min(W.max),this.isEmpty()&&this.makeEmpty(),this}union(W){return this.min.min(W.min),this.max.max(W.max),this}applyMatrix4(W){return this.isEmpty()||(_i[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(W),_i[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(W),_i[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(W),_i[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(W),_i[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(W),_i[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(W),_i[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(W),_i[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(W),this.setFromPoints(_i)),this}translate(W){return this.min.add(W),this.max.add(W),this}equals(W){return W.min.equals(this.min)&&W.max.equals(this.max)}}const _i=[new di,new di,new di,new di,new di,new di,new di,new di],pi=new di,bi=new Ni,mi=new di,zi=new di,Ki=new di,Pi=new di,Ri=new di,Ii=new di,Ei=new di,Zi=new di,fi=new di,Vi=new di;function $i(W,y,M,U,i){for(let x=0,n=W.length-3;x<=n;x+=3){Vi.fromArray(W,x);const n=i.x*Math.abs(Vi.x)+i.y*Math.abs(Vi.y)+i.z*Math.abs(Vi.z),k=y.dot(Vi),g=M.dot(Vi),u=U.dot(Vi);if(Math.max(-Math.max(k,g,u),Math.min(k,g,u))>n)return!1}return!0}const ai=new Ni,Hi=new di,Bi=new di;class vi{constructor(W=new di,y=-1){this.center=W,this.radius=y}set(W,y){return this.center.copy(W),this.radius=y,this}setFromPoints(W,y){const M=this.center;void 0!==y?M.copy(y):ai.setFromPoints(W).getCenter(M);let U=0;for(let y=0,i=W.length;y<i;y++)U=Math.max(U,M.distanceToSquared(W[y]));return this.radius=Math.sqrt(U),this}copy(W){return this.center.copy(W.center),this.radius=W.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(W){return W.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(W){return W.distanceTo(this.center)-this.radius}intersectsSphere(W){const y=this.radius+W.radius;return W.center.distanceToSquared(this.center)<=y*y}intersectsBox(W){return W.intersectsSphere(this)}intersectsPlane(W){return Math.abs(W.distanceToPoint(this.center))<=this.radius}clampPoint(W,y){const M=this.center.distanceToSquared(W);return y.copy(W),M>this.radius*this.radius&&(y.sub(this.center).normalize(),y.multiplyScalar(this.radius).add(this.center)),y}getBoundingBox(W){return this.isEmpty()?(W.makeEmpty(),W):(W.set(this.center,this.center),W.expandByScalar(this.radius),W)}applyMatrix4(W){return this.center.applyMatrix4(W),this.radius=this.radius*W.getMaxScaleOnAxis(),this}translate(W){return this.center.add(W),this}expandByPoint(W){if(this.isEmpty())return this.center.copy(W),this.radius=0,this;Hi.subVectors(W,this.center);const y=Hi.lengthSq();if(y>this.radius*this.radius){const W=Math.sqrt(y),M=.5*(W-this.radius);this.center.addScaledVector(Hi,M/W),this.radius+=M}return this}union(W){return W.isEmpty()?this:this.isEmpty()?(this.copy(W),this):(!0===this.center.equals(W.center)?this.radius=Math.max(this.radius,W.radius):(Bi.subVectors(W.center,this.center).setLength(W.radius),this.expandByPoint(Hi.copy(W.center).add(Bi)),this.expandByPoint(Hi.copy(W.center).sub(Bi))),this)}equals(W){return W.center.equals(this.center)&&W.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Li=new di,Xi=new di,wi=new di,Fi=new di,ti=new di,Ji=new di,ji=new di;class Ci{constructor(W=new di,y=new di(0,0,-1)){this.origin=W,this.direction=y}set(W,y){return this.origin.copy(W),this.direction.copy(y),this}copy(W){return this.origin.copy(W.origin),this.direction.copy(W.direction),this}at(W,y){return y.copy(this.origin).addScaledVector(this.direction,W)}lookAt(W){return this.direction.copy(W).sub(this.origin).normalize(),this}recast(W){return this.origin.copy(this.at(W,Li)),this}closestPointToPoint(W,y){y.subVectors(W,this.origin);const M=y.dot(this.direction);return M<0?y.copy(this.origin):y.copy(this.origin).addScaledVector(this.direction,M)}distanceToPoint(W){return Math.sqrt(this.distanceSqToPoint(W))}distanceSqToPoint(W){const y=Li.subVectors(W,this.origin).dot(this.direction);return y<0?this.origin.distanceToSquared(W):(Li.copy(this.origin).addScaledVector(this.direction,y),Li.distanceToSquared(W))}distanceSqToSegment(W,y,M,U){Xi.copy(W).add(y).multiplyScalar(.5),wi.copy(y).sub(W).normalize(),Fi.copy(this.origin).sub(Xi);const i=.5*W.distanceTo(y),x=-this.direction.dot(wi),n=Fi.dot(this.direction),k=-Fi.dot(wi),g=Fi.lengthSq(),u=Math.abs(1-x*x);let e,l,G,Y;if(u>0)if(e=x*k-n,l=x*n-k,Y=i*u,e>=0)if(l>=-Y)if(l<=Y){const W=1/u;e*=W,l*=W,G=e*(e+x*l+2*n)+l*(x*e+l+2*k)+g}else l=i,e=Math.max(0,-(x*l+n)),G=-e*e+l*(l+2*k)+g;else l=-i,e=Math.max(0,-(x*l+n)),G=-e*e+l*(l+2*k)+g;else l<=-Y?(e=Math.max(0,-(-x*i+n)),l=e>0?-i:Math.min(Math.max(-i,-k),i),G=-e*e+l*(l+2*k)+g):l<=Y?(e=0,l=Math.min(Math.max(-i,-k),i),G=l*(l+2*k)+g):(e=Math.max(0,-(x*i+n)),l=e>0?i:Math.min(Math.max(-i,-k),i),G=-e*e+l*(l+2*k)+g);else l=x>0?-i:i,e=Math.max(0,-(x*l+n)),G=-e*e+l*(l+2*k)+g;return M&&M.copy(this.origin).addScaledVector(this.direction,e),U&&U.copy(Xi).addScaledVector(wi,l),G}intersectSphere(W,y){Li.subVectors(W.center,this.origin);const M=Li.dot(this.direction),U=Li.dot(Li)-M*M,i=W.radius*W.radius;if(U>i)return null;const x=Math.sqrt(i-U),n=M-x,k=M+x;return k<0?null:n<0?this.at(k,y):this.at(n,y)}intersectsSphere(W){return this.distanceSqToPoint(W.center)<=W.radius*W.radius}distanceToPlane(W){const y=W.normal.dot(this.direction);if(0===y)return 0===W.distanceToPoint(this.origin)?0:null;const M=-(this.origin.dot(W.normal)+W.constant)/y;return M>=0?M:null}intersectPlane(W,y){const M=this.distanceToPlane(W);return null===M?null:this.at(M,y)}intersectsPlane(W){const y=W.distanceToPoint(this.origin);return 0===y||W.normal.dot(this.direction)*y<0}intersectBox(W,y){let M,U,i,x,n,k;const g=1/this.direction.x,u=1/this.direction.y,e=1/this.direction.z,l=this.origin;return g>=0?(M=(W.min.x-l.x)*g,U=(W.max.x-l.x)*g):(M=(W.max.x-l.x)*g,U=(W.min.x-l.x)*g),u>=0?(i=(W.min.y-l.y)*u,x=(W.max.y-l.y)*u):(i=(W.max.y-l.y)*u,x=(W.min.y-l.y)*u),M>x||i>U?null:((i>M||isNaN(M))&&(M=i),(x<U||isNaN(U))&&(U=x),e>=0?(n=(W.min.z-l.z)*e,k=(W.max.z-l.z)*e):(n=(W.max.z-l.z)*e,k=(W.min.z-l.z)*e),M>k||n>U?null:((n>M||M!=M)&&(M=n),(k<U||U!=U)&&(U=k),U<0?null:this.at(M>=0?M:U,y)))}intersectsBox(W){return null!==this.intersectBox(W,Li)}intersectTriangle(W,y,M,U,i){ti.subVectors(y,W),Ji.subVectors(M,W),ji.crossVectors(ti,Ji);let x,n=this.direction.dot(ji);if(n>0){if(U)return null;x=1}else{if(!(n<0))return null;x=-1,n=-n}Fi.subVectors(this.origin,W);const k=x*this.direction.dot(Ji.crossVectors(Fi,Ji));if(k<0)return null;const g=x*this.direction.dot(ti.cross(Fi));if(g<0)return null;if(k+g>n)return null;const u=-x*Fi.dot(ji);return u<0?null:this.at(u/n,i)}applyMatrix4(W){return this.origin.applyMatrix4(W),this.direction.transformDirection(W),this}equals(W){return W.origin.equals(this.origin)&&W.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Qi{constructor(W,y,M,U,i,x,n,k,g,u,e,l,G,Y,c,D){Qi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==W&&this.set(W,y,M,U,i,x,n,k,g,u,e,l,G,Y,c,D)}set(W,y,M,U,i,x,n,k,g,u,e,l,G,Y,c,D){const r=this.elements;return r[0]=W,r[4]=y,r[8]=M,r[12]=U,r[1]=i,r[5]=x,r[9]=n,r[13]=k,r[2]=g,r[6]=u,r[10]=e,r[14]=l,r[3]=G,r[7]=Y,r[11]=c,r[15]=D,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Qi).fromArray(this.elements)}copy(W){const y=this.elements,M=W.elements;return y[0]=M[0],y[1]=M[1],y[2]=M[2],y[3]=M[3],y[4]=M[4],y[5]=M[5],y[6]=M[6],y[7]=M[7],y[8]=M[8],y[9]=M[9],y[10]=M[10],y[11]=M[11],y[12]=M[12],y[13]=M[13],y[14]=M[14],y[15]=M[15],this}copyPosition(W){const y=this.elements,M=W.elements;return y[12]=M[12],y[13]=M[13],y[14]=M[14],this}setFromMatrix3(W){const y=W.elements;return this.set(y[0],y[3],y[6],0,y[1],y[4],y[7],0,y[2],y[5],y[8],0,0,0,0,1),this}extractBasis(W,y,M){return W.setFromMatrixColumn(this,0),y.setFromMatrixColumn(this,1),M.setFromMatrixColumn(this,2),this}makeBasis(W,y,M){return this.set(W.x,y.x,M.x,0,W.y,y.y,M.y,0,W.z,y.z,M.z,0,0,0,0,1),this}extractRotation(W){const y=this.elements,M=W.elements,U=1/Wx.setFromMatrixColumn(W,0).length(),i=1/Wx.setFromMatrixColumn(W,1).length(),x=1/Wx.setFromMatrixColumn(W,2).length();return y[0]=M[0]*U,y[1]=M[1]*U,y[2]=M[2]*U,y[3]=0,y[4]=M[4]*i,y[5]=M[5]*i,y[6]=M[6]*i,y[7]=0,y[8]=M[8]*x,y[9]=M[9]*x,y[10]=M[10]*x,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,this}makeRotationFromEuler(W){const y=this.elements,M=W.x,U=W.y,i=W.z,x=Math.cos(M),n=Math.sin(M),k=Math.cos(U),g=Math.sin(U),u=Math.cos(i),e=Math.sin(i);if("XYZ"===W.order){const W=x*u,M=x*e,U=n*u,i=n*e;y[0]=k*u,y[4]=-k*e,y[8]=g,y[1]=M+U*g,y[5]=W-i*g,y[9]=-n*k,y[2]=i-W*g,y[6]=U+M*g,y[10]=x*k}else if("YXZ"===W.order){const W=k*u,M=k*e,U=g*u,i=g*e;y[0]=W+i*n,y[4]=U*n-M,y[8]=x*g,y[1]=x*e,y[5]=x*u,y[9]=-n,y[2]=M*n-U,y[6]=i+W*n,y[10]=x*k}else if("ZXY"===W.order){const W=k*u,M=k*e,U=g*u,i=g*e;y[0]=W-i*n,y[4]=-x*e,y[8]=U+M*n,y[1]=M+U*n,y[5]=x*u,y[9]=i-W*n,y[2]=-x*g,y[6]=n,y[10]=x*k}else if("ZYX"===W.order){const W=x*u,M=x*e,U=n*u,i=n*e;y[0]=k*u,y[4]=U*g-M,y[8]=W*g+i,y[1]=k*e,y[5]=i*g+W,y[9]=M*g-U,y[2]=-g,y[6]=n*k,y[10]=x*k}else if("YZX"===W.order){const W=x*k,M=x*g,U=n*k,i=n*g;y[0]=k*u,y[4]=i-W*e,y[8]=U*e+M,y[1]=e,y[5]=x*u,y[9]=-n*u,y[2]=-g*u,y[6]=M*e+U,y[10]=W-i*e}else if("XZY"===W.order){const W=x*k,M=x*g,U=n*k,i=n*g;y[0]=k*u,y[4]=-e,y[8]=g*u,y[1]=W*e+i,y[5]=x*u,y[9]=M*e-U,y[2]=U*e-M,y[6]=n*u,y[10]=i*e+W}return y[3]=0,y[7]=0,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,this}makeRotationFromQuaternion(W){return this.compose(Mx,W,Ux)}lookAt(W,y,M){const U=this.elements;return nx.subVectors(W,y),0===nx.lengthSq()&&(nx.z=1),nx.normalize(),ix.crossVectors(M,nx),0===ix.lengthSq()&&(1===Math.abs(M.z)?nx.x+=1e-4:nx.z+=1e-4,nx.normalize(),ix.crossVectors(M,nx)),ix.normalize(),xx.crossVectors(nx,ix),U[0]=ix.x,U[4]=xx.x,U[8]=nx.x,U[1]=ix.y,U[5]=xx.y,U[9]=nx.y,U[2]=ix.z,U[6]=xx.z,U[10]=nx.z,this}multiply(W){return this.multiplyMatrices(this,W)}premultiply(W){return this.multiplyMatrices(W,this)}multiplyMatrices(W,y){const M=W.elements,U=y.elements,i=this.elements,x=M[0],n=M[4],k=M[8],g=M[12],u=M[1],e=M[5],l=M[9],G=M[13],Y=M[2],c=M[6],D=M[10],r=M[14],A=M[3],T=M[7],O=M[11],h=M[15],S=U[0],o=U[4],d=U[8],q=U[12],s=U[1],N=U[5],_=U[9],p=U[13],b=U[2],m=U[6],z=U[10],K=U[14],P=U[3],R=U[7],I=U[11],E=U[15];return i[0]=x*S+n*s+k*b+g*P,i[4]=x*o+n*N+k*m+g*R,i[8]=x*d+n*_+k*z+g*I,i[12]=x*q+n*p+k*K+g*E,i[1]=u*S+e*s+l*b+G*P,i[5]=u*o+e*N+l*m+G*R,i[9]=u*d+e*_+l*z+G*I,i[13]=u*q+e*p+l*K+G*E,i[2]=Y*S+c*s+D*b+r*P,i[6]=Y*o+c*N+D*m+r*R,i[10]=Y*d+c*_+D*z+r*I,i[14]=Y*q+c*p+D*K+r*E,i[3]=A*S+T*s+O*b+h*P,i[7]=A*o+T*N+O*m+h*R,i[11]=A*d+T*_+O*z+h*I,i[15]=A*q+T*p+O*K+h*E,this}multiplyScalar(W){const y=this.elements;return y[0]*=W,y[4]*=W,y[8]*=W,y[12]*=W,y[1]*=W,y[5]*=W,y[9]*=W,y[13]*=W,y[2]*=W,y[6]*=W,y[10]*=W,y[14]*=W,y[3]*=W,y[7]*=W,y[11]*=W,y[15]*=W,this}determinant(){const W=this.elements,y=W[0],M=W[4],U=W[8],i=W[12],x=W[1],n=W[5],k=W[9],g=W[13],u=W[2],e=W[6],l=W[10],G=W[14];return W[3]*(+i*k*e-U*g*e-i*n*l+M*g*l+U*n*G-M*k*G)+W[7]*(+y*k*G-y*g*l+i*x*l-U*x*G+U*g*u-i*k*u)+W[11]*(+y*g*e-y*n*G-i*x*e+M*x*G+i*n*u-M*g*u)+W[15]*(-U*n*u-y*k*e+y*n*l+U*x*e-M*x*l+M*k*u)}transpose(){const W=this.elements;let y;return y=W[1],W[1]=W[4],W[4]=y,y=W[2],W[2]=W[8],W[8]=y,y=W[6],W[6]=W[9],W[9]=y,y=W[3],W[3]=W[12],W[12]=y,y=W[7],W[7]=W[13],W[13]=y,y=W[11],W[11]=W[14],W[14]=y,this}setPosition(W,y,M){const U=this.elements;return W.isVector3?(U[12]=W.x,U[13]=W.y,U[14]=W.z):(U[12]=W,U[13]=y,U[14]=M),this}invert(){const W=this.elements,y=W[0],M=W[1],U=W[2],i=W[3],x=W[4],n=W[5],k=W[6],g=W[7],u=W[8],e=W[9],l=W[10],G=W[11],Y=W[12],c=W[13],D=W[14],r=W[15],A=e*D*g-c*l*g+c*k*G-n*D*G-e*k*r+n*l*r,T=Y*l*g-u*D*g-Y*k*G+x*D*G+u*k*r-x*l*r,O=u*c*g-Y*e*g+Y*n*G-x*c*G-u*n*r+x*e*r,h=Y*e*k-u*c*k-Y*n*l+x*c*l+u*n*D-x*e*D,S=y*A+M*T+U*O+i*h;if(0===S)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const o=1/S;return W[0]=A*o,W[1]=(c*l*i-e*D*i-c*U*G+M*D*G+e*U*r-M*l*r)*o,W[2]=(n*D*i-c*k*i+c*U*g-M*D*g-n*U*r+M*k*r)*o,W[3]=(e*k*i-n*l*i-e*U*g+M*l*g+n*U*G-M*k*G)*o,W[4]=T*o,W[5]=(u*D*i-Y*l*i+Y*U*G-y*D*G-u*U*r+y*l*r)*o,W[6]=(Y*k*i-x*D*i-Y*U*g+y*D*g+x*U*r-y*k*r)*o,W[7]=(x*l*i-u*k*i+u*U*g-y*l*g-x*U*G+y*k*G)*o,W[8]=O*o,W[9]=(Y*e*i-u*c*i-Y*M*G+y*c*G+u*M*r-y*e*r)*o,W[10]=(x*c*i-Y*n*i+Y*M*g-y*c*g-x*M*r+y*n*r)*o,W[11]=(u*n*i-x*e*i-u*M*g+y*e*g+x*M*G-y*n*G)*o,W[12]=h*o,W[13]=(u*c*U-Y*e*U+Y*M*l-y*c*l-u*M*D+y*e*D)*o,W[14]=(Y*n*U-x*c*U-Y*M*k+y*c*k+x*M*D-y*n*D)*o,W[15]=(x*e*U-u*n*U+u*M*k-y*e*k-x*M*l+y*n*l)*o,this}scale(W){const y=this.elements,M=W.x,U=W.y,i=W.z;return y[0]*=M,y[4]*=U,y[8]*=i,y[1]*=M,y[5]*=U,y[9]*=i,y[2]*=M,y[6]*=U,y[10]*=i,y[3]*=M,y[7]*=U,y[11]*=i,this}getMaxScaleOnAxis(){const W=this.elements,y=W[0]*W[0]+W[1]*W[1]+W[2]*W[2],M=W[4]*W[4]+W[5]*W[5]+W[6]*W[6],U=W[8]*W[8]+W[9]*W[9]+W[10]*W[10];return Math.sqrt(Math.max(y,M,U))}makeTranslation(W,y,M){return W.isVector3?this.set(1,0,0,W.x,0,1,0,W.y,0,0,1,W.z,0,0,0,1):this.set(1,0,0,W,0,1,0,y,0,0,1,M,0,0,0,1),this}makeRotationX(W){const y=Math.cos(W),M=Math.sin(W);return this.set(1,0,0,0,0,y,-M,0,0,M,y,0,0,0,0,1),this}makeRotationY(W){const y=Math.cos(W),M=Math.sin(W);return this.set(y,0,M,0,0,1,0,0,-M,0,y,0,0,0,0,1),this}makeRotationZ(W){const y=Math.cos(W),M=Math.sin(W);return this.set(y,-M,0,0,M,y,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(W,y){const M=Math.cos(y),U=Math.sin(y),i=1-M,x=W.x,n=W.y,k=W.z,g=i*x,u=i*n;return this.set(g*x+M,g*n-U*k,g*k+U*n,0,g*n+U*k,u*n+M,u*k-U*x,0,g*k-U*n,u*k+U*x,i*k*k+M,0,0,0,0,1),this}makeScale(W,y,M){return this.set(W,0,0,0,0,y,0,0,0,0,M,0,0,0,0,1),this}makeShear(W,y,M,U,i,x){return this.set(1,M,i,0,W,1,x,0,y,U,1,0,0,0,0,1),this}compose(W,y,M){const U=this.elements,i=y._x,x=y._y,n=y._z,k=y._w,g=i+i,u=x+x,e=n+n,l=i*g,G=i*u,Y=i*e,c=x*u,D=x*e,r=n*e,A=k*g,T=k*u,O=k*e,h=M.x,S=M.y,o=M.z;return U[0]=(1-(c+r))*h,U[1]=(G+O)*h,U[2]=(Y-T)*h,U[3]=0,U[4]=(G-O)*S,U[5]=(1-(l+r))*S,U[6]=(D+A)*S,U[7]=0,U[8]=(Y+T)*o,U[9]=(D-A)*o,U[10]=(1-(l+c))*o,U[11]=0,U[12]=W.x,U[13]=W.y,U[14]=W.z,U[15]=1,this}decompose(W,y,M){const U=this.elements;let i=Wx.set(U[0],U[1],U[2]).length();const x=Wx.set(U[4],U[5],U[6]).length(),n=Wx.set(U[8],U[9],U[10]).length();this.determinant()<0&&(i=-i),W.x=U[12],W.y=U[13],W.z=U[14],yx.copy(this);const k=1/i,g=1/x,u=1/n;return yx.elements[0]*=k,yx.elements[1]*=k,yx.elements[2]*=k,yx.elements[4]*=g,yx.elements[5]*=g,yx.elements[6]*=g,yx.elements[8]*=u,yx.elements[9]*=u,yx.elements[10]*=u,y.setFromRotationMatrix(yx),M.x=i,M.y=x,M.z=n,this}makePerspective(W,y,M,U,i,x,n=pU){const k=this.elements,g=2*i/(y-W),u=2*i/(M-U),e=(y+W)/(y-W),l=(M+U)/(M-U);let G,Y;if(n===pU)G=-(x+i)/(x-i),Y=-2*x*i/(x-i);else{if(n!==bU)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+n);G=-x/(x-i),Y=-x*i/(x-i)}return k[0]=g,k[4]=0,k[8]=e,k[12]=0,k[1]=0,k[5]=u,k[9]=l,k[13]=0,k[2]=0,k[6]=0,k[10]=G,k[14]=Y,k[3]=0,k[7]=0,k[11]=-1,k[15]=0,this}makeOrthographic(W,y,M,U,i,x,n=pU){const k=this.elements,g=1/(y-W),u=1/(M-U),e=1/(x-i),l=(y+W)*g,G=(M+U)*u;let Y,c;if(n===pU)Y=(x+i)*e,c=-2*e;else{if(n!==bU)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+n);Y=i*e,c=-1*e}return k[0]=2*g,k[4]=0,k[8]=0,k[12]=-l,k[1]=0,k[5]=2*u,k[9]=0,k[13]=-G,k[2]=0,k[6]=0,k[10]=c,k[14]=-Y,k[3]=0,k[7]=0,k[11]=0,k[15]=1,this}equals(W){const y=this.elements,M=W.elements;for(let W=0;W<16;W++)if(y[W]!==M[W])return!1;return!0}fromArray(W,y=0){for(let M=0;M<16;M++)this.elements[M]=W[M+y];return this}toArray(W=[],y=0){const M=this.elements;return W[y]=M[0],W[y+1]=M[1],W[y+2]=M[2],W[y+3]=M[3],W[y+4]=M[4],W[y+5]=M[5],W[y+6]=M[6],W[y+7]=M[7],W[y+8]=M[8],W[y+9]=M[9],W[y+10]=M[10],W[y+11]=M[11],W[y+12]=M[12],W[y+13]=M[13],W[y+14]=M[14],W[y+15]=M[15],W}}const Wx=new di,yx=new Qi,Mx=new di(0,0,0),Ux=new di(1,1,1),ix=new di,xx=new di,nx=new di,kx=new Qi,gx=new oi;class ux{constructor(W=0,y=0,M=0,U=ux.DEFAULT_ORDER){this.isEuler=!0,this._x=W,this._y=y,this._z=M,this._order=U}get x(){return this._x}set x(W){this._x=W,this._onChangeCallback()}get y(){return this._y}set y(W){this._y=W,this._onChangeCallback()}get z(){return this._z}set z(W){this._z=W,this._onChangeCallback()}get order(){return this._order}set order(W){this._order=W,this._onChangeCallback()}set(W,y,M,U=this._order){return this._x=W,this._y=y,this._z=M,this._order=U,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(W){return this._x=W._x,this._y=W._y,this._z=W._z,this._order=W._order,this._onChangeCallback(),this}setFromRotationMatrix(W,y=this._order,M=!0){const U=W.elements,i=U[0],x=U[4],n=U[8],k=U[1],g=U[5],u=U[9],e=U[2],l=U[6],G=U[10];switch(y){case"XYZ":this._y=Math.asin(EU(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(-u,G),this._z=Math.atan2(-x,i)):(this._x=Math.atan2(l,g),this._z=0);break;case"YXZ":this._x=Math.asin(-EU(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(n,G),this._z=Math.atan2(k,g)):(this._y=Math.atan2(-e,i),this._z=0);break;case"ZXY":this._x=Math.asin(EU(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(-e,G),this._z=Math.atan2(-x,g)):(this._y=0,this._z=Math.atan2(k,i));break;case"ZYX":this._y=Math.asin(-EU(e,-1,1)),Math.abs(e)<.9999999?(this._x=Math.atan2(l,G),this._z=Math.atan2(k,i)):(this._x=0,this._z=Math.atan2(-x,g));break;case"YZX":this._z=Math.asin(EU(k,-1,1)),Math.abs(k)<.9999999?(this._x=Math.atan2(-u,g),this._y=Math.atan2(-e,i)):(this._x=0,this._y=Math.atan2(n,G));break;case"XZY":this._z=Math.asin(-EU(x,-1,1)),Math.abs(x)<.9999999?(this._x=Math.atan2(l,g),this._y=Math.atan2(n,i)):(this._x=Math.atan2(-u,G),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+y)}return this._order=y,!0===M&&this._onChangeCallback(),this}setFromQuaternion(W,y,M){return kx.makeRotationFromQuaternion(W),this.setFromRotationMatrix(kx,y,M)}setFromVector3(W,y=this._order){return this.set(W.x,W.y,W.z,y)}reorder(W){return gx.setFromEuler(this),this.setFromQuaternion(gx,W)}equals(W){return W._x===this._x&&W._y===this._y&&W._z===this._z&&W._order===this._order}fromArray(W){return this._x=W[0],this._y=W[1],this._z=W[2],void 0!==W[3]&&(this._order=W[3]),this._onChangeCallback(),this}toArray(W=[],y=0){return W[y]=this._x,W[y+1]=this._y,W[y+2]=this._z,W[y+3]=this._order,W}_onChange(W){return this._onChangeCallback=W,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ux.DEFAULT_ORDER="XYZ";class ex{constructor(){this.mask=1|0}set(W){this.mask=(1<<W|0)>>>0}enable(W){this.mask|=1<<W|0}enableAll(){this.mask=4294967295|0}toggle(W){this.mask^=1<<W|0}disable(W){this.mask&=~(1<<W|0)}disableAll(){this.mask=0}test(W){return!!(this.mask&W.mask)}isEnabled(W){return!!(this.mask&(1<<W|0))}}let lx=0;const Gx=new di,Yx=new oi,cx=new Qi,Dx=new di,rx=new di,Ax=new di,Tx=new oi,Ox=new di(1,0,0),hx=new di(0,1,0),Sx=new di(0,0,1),ox={type:"added"},dx={type:"removed"};class qx extends mU{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:lx++}),this.uuid=IU(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=qx.DEFAULT_UP.clone();const W=new di,y=new ux,M=new oi,U=new di(1,1,1);y._onChange((function(){M.setFromEuler(y,!1)})),M._onChange((function(){y.setFromQuaternion(M,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:W},rotation:{configurable:!0,enumerable:!0,value:y},quaternion:{configurable:!0,enumerable:!0,value:M},scale:{configurable:!0,enumerable:!0,value:U},modelViewMatrix:{value:new Qi},normalMatrix:{value:new XU}}),this.matrix=new Qi,this.matrixWorld=new Qi,this.matrixAutoUpdate=qx.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=qx.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new ex,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(W){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(W),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(W){return this.quaternion.premultiply(W),this}setRotationFromAxisAngle(W,y){this.quaternion.setFromAxisAngle(W,y)}setRotationFromEuler(W){this.quaternion.setFromEuler(W,!0)}setRotationFromMatrix(W){this.quaternion.setFromRotationMatrix(W)}setRotationFromQuaternion(W){this.quaternion.copy(W)}rotateOnAxis(W,y){return Yx.setFromAxisAngle(W,y),this.quaternion.multiply(Yx),this}rotateOnWorldAxis(W,y){return Yx.setFromAxisAngle(W,y),this.quaternion.premultiply(Yx),this}rotateX(W){return this.rotateOnAxis(Ox,W)}rotateY(W){return this.rotateOnAxis(hx,W)}rotateZ(W){return this.rotateOnAxis(Sx,W)}translateOnAxis(W,y){return Gx.copy(W).applyQuaternion(this.quaternion),this.position.add(Gx.multiplyScalar(y)),this}translateX(W){return this.translateOnAxis(Ox,W)}translateY(W){return this.translateOnAxis(hx,W)}translateZ(W){return this.translateOnAxis(Sx,W)}localToWorld(W){return this.updateWorldMatrix(!0,!1),W.applyMatrix4(this.matrixWorld)}worldToLocal(W){return this.updateWorldMatrix(!0,!1),W.applyMatrix4(cx.copy(this.matrixWorld).invert())}lookAt(W,y,M){W.isVector3?Dx.copy(W):Dx.set(W,y,M);const U=this.parent;this.updateWorldMatrix(!0,!1),rx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?cx.lookAt(rx,Dx,this.up):cx.lookAt(Dx,rx,this.up),this.quaternion.setFromRotationMatrix(cx),U&&(cx.extractRotation(U.matrixWorld),Yx.setFromRotationMatrix(cx),this.quaternion.premultiply(Yx.invert()))}add(W){if(arguments.length>1){for(let W=0;W<arguments.length;W++)this.add(arguments[W]);return this}return W===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",W),this):(W&&W.isObject3D?(null!==W.parent&&W.parent.remove(W),W.parent=this,this.children.push(W),W.dispatchEvent(ox)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",W),this)}remove(W){if(arguments.length>1){for(let W=0;W<arguments.length;W++)this.remove(arguments[W]);return this}const y=this.children.indexOf(W);return-1!==y&&(W.parent=null,this.children.splice(y,1),W.dispatchEvent(dx)),this}removeFromParent(){const W=this.parent;return null!==W&&W.remove(this),this}clear(){for(let W=0;W<this.children.length;W++){const y=this.children[W];y.parent=null,y.dispatchEvent(dx)}return this.children.length=0,this}attach(W){return this.updateWorldMatrix(!0,!1),cx.copy(this.matrixWorld).invert(),null!==W.parent&&(W.parent.updateWorldMatrix(!0,!1),cx.multiply(W.parent.matrixWorld)),W.applyMatrix4(cx),this.add(W),W.updateWorldMatrix(!1,!0),this}getObjectById(W){return this.getObjectByProperty("id",W)}getObjectByName(W){return this.getObjectByProperty("name",W)}getObjectByProperty(W,y){if(this[W]===y)return this;for(let M=0,U=this.children.length;M<U;M++){const U=this.children[M].getObjectByProperty(W,y);if(void 0!==U)return U}}getObjectsByProperty(W,y){let M=[];this[W]===y&&M.push(this);for(let U=0,i=this.children.length;U<i;U++){const i=this.children[U].getObjectsByProperty(W,y);i.length>0&&(M=M.concat(i))}return M}getWorldPosition(W){return this.updateWorldMatrix(!0,!1),W.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(W){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rx,W,Ax),W}getWorldScale(W){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rx,Tx,W),W}getWorldDirection(W){this.updateWorldMatrix(!0,!1);const y=this.matrixWorld.elements;return W.set(y[8],y[9],y[10]).normalize()}raycast(){}traverse(W){W(this);const y=this.children;for(let M=0,U=y.length;M<U;M++)y[M].traverse(W)}traverseVisible(W){if(!1===this.visible)return;W(this);const y=this.children;for(let M=0,U=y.length;M<U;M++)y[M].traverseVisible(W)}traverseAncestors(W){const y=this.parent;null!==y&&(W(y),y.traverseAncestors(W))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(W){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||W)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,W=!0);const y=this.children;for(let M=0,U=y.length;M<U;M++){const U=y[M];!0!==U.matrixWorldAutoUpdate&&!0!==W||U.updateMatrixWorld(W)}}updateWorldMatrix(W,y){const M=this.parent;if(!0===W&&null!==M&&!0===M.matrixWorldAutoUpdate&&M.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===y){const W=this.children;for(let y=0,M=W.length;y<M;y++){const M=W[y];!0===M.matrixWorldAutoUpdate&&M.updateWorldMatrix(!1,!0)}}}toJSON(W){const y=void 0===W||"string"==typeof W,M={};y&&(W={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},M.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const U={};function i(y,M){return void 0===y[M.uuid]&&(y[M.uuid]=M.toJSON(W)),M.uuid}if(U.uuid=this.uuid,U.type=this.type,""!==this.name&&(U.name=this.name),!0===this.castShadow&&(U.castShadow=!0),!0===this.receiveShadow&&(U.receiveShadow=!0),!1===this.visible&&(U.visible=!1),!1===this.frustumCulled&&(U.frustumCulled=!1),0!==this.renderOrder&&(U.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(U.userData=this.userData),U.layers=this.layers.mask,U.matrix=this.matrix.toArray(),U.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(U.matrixAutoUpdate=!1),this.isInstancedMesh&&(U.type="InstancedMesh",U.count=this.count,U.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(U.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?U.background=this.background.toJSON():this.background.isTexture&&(U.background=this.background.toJSON(W).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(U.environment=this.environment.toJSON(W).uuid);else if(this.isMesh||this.isLine||this.isPoints){U.geometry=i(W.geometries,this.geometry);const y=this.geometry.parameters;if(void 0!==y&&void 0!==y.shapes){const M=y.shapes;if(Array.isArray(M))for(let y=0,U=M.length;y<U;y++){const U=M[y];i(W.shapes,U)}else i(W.shapes,M)}}if(this.isSkinnedMesh&&(U.bindMode=this.bindMode,U.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(W.skeletons,this.skeleton),U.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const y=[];for(let M=0,U=this.material.length;M<U;M++)y.push(i(W.materials,this.material[M]));U.material=y}else U.material=i(W.materials,this.material);if(this.children.length>0){U.children=[];for(let y=0;y<this.children.length;y++)U.children.push(this.children[y].toJSON(W).object)}if(this.animations.length>0){U.animations=[];for(let y=0;y<this.animations.length;y++){const M=this.animations[y];U.animations.push(i(W.animations,M))}}if(y){const y=x(W.geometries),U=x(W.materials),i=x(W.textures),n=x(W.images),k=x(W.shapes),g=x(W.skeletons),u=x(W.animations),e=x(W.nodes);y.length>0&&(M.geometries=y),U.length>0&&(M.materials=U),i.length>0&&(M.textures=i),n.length>0&&(M.images=n),k.length>0&&(M.shapes=k),g.length>0&&(M.skeletons=g),u.length>0&&(M.animations=u),e.length>0&&(M.nodes=e)}return M.object=U,M;function x(W){const y=[];for(const M in W){const U=W[M];delete U.metadata,y.push(U)}return y}}clone(W){return(new this.constructor).copy(this,W)}copy(W,y=!0){if(this.name=W.name,this.up.copy(W.up),this.position.copy(W.position),this.rotation.order=W.rotation.order,this.quaternion.copy(W.quaternion),this.scale.copy(W.scale),this.matrix.copy(W.matrix),this.matrixWorld.copy(W.matrixWorld),this.matrixAutoUpdate=W.matrixAutoUpdate,this.matrixWorldNeedsUpdate=W.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=W.matrixWorldAutoUpdate,this.layers.mask=W.layers.mask,this.visible=W.visible,this.castShadow=W.castShadow,this.receiveShadow=W.receiveShadow,this.frustumCulled=W.frustumCulled,this.renderOrder=W.renderOrder,this.animations=W.animations.slice(),this.userData=JSON.parse(JSON.stringify(W.userData)),!0===y)for(let y=0;y<W.children.length;y++){const M=W.children[y];this.add(M.clone())}return this}}qx.DEFAULT_UP=new di(0,1,0),qx.DEFAULT_MATRIX_AUTO_UPDATE=!0,qx.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const sx=new di,Nx=new di,_x=new di,px=new di,bx=new di,mx=new di,zx=new di,Kx=new di,Px=new di,Rx=new di;let Ix=!1;class Ex{constructor(W=new di,y=new di,M=new di){this.a=W,this.b=y,this.c=M}static getNormal(W,y,M,U){U.subVectors(M,y),sx.subVectors(W,y),U.cross(sx);const i=U.lengthSq();return i>0?U.multiplyScalar(1/Math.sqrt(i)):U.set(0,0,0)}static getBarycoord(W,y,M,U,i){sx.subVectors(U,y),Nx.subVectors(M,y),_x.subVectors(W,y);const x=sx.dot(sx),n=sx.dot(Nx),k=sx.dot(_x),g=Nx.dot(Nx),u=Nx.dot(_x),e=x*g-n*n;if(0===e)return i.set(-2,-1,-1);const l=1/e,G=(g*k-n*u)*l,Y=(x*u-n*k)*l;return i.set(1-G-Y,Y,G)}static containsPoint(W,y,M,U){return this.getBarycoord(W,y,M,U,px),px.x>=0&&px.y>=0&&px.x+px.y<=1}static getUV(W,y,M,U,i,x,n,k){return!1===Ix&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ix=!0),this.getInterpolation(W,y,M,U,i,x,n,k)}static getInterpolation(W,y,M,U,i,x,n,k){return this.getBarycoord(W,y,M,U,px),k.setScalar(0),k.addScaledVector(i,px.x),k.addScaledVector(x,px.y),k.addScaledVector(n,px.z),k}static isFrontFacing(W,y,M,U){return sx.subVectors(M,y),Nx.subVectors(W,y),sx.cross(Nx).dot(U)<0}set(W,y,M){return this.a.copy(W),this.b.copy(y),this.c.copy(M),this}setFromPointsAndIndices(W,y,M,U){return this.a.copy(W[y]),this.b.copy(W[M]),this.c.copy(W[U]),this}setFromAttributeAndIndices(W,y,M,U){return this.a.fromBufferAttribute(W,y),this.b.fromBufferAttribute(W,M),this.c.fromBufferAttribute(W,U),this}clone(){return(new this.constructor).copy(this)}copy(W){return this.a.copy(W.a),this.b.copy(W.b),this.c.copy(W.c),this}getArea(){return sx.subVectors(this.c,this.b),Nx.subVectors(this.a,this.b),.5*sx.cross(Nx).length()}getMidpoint(W){return W.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(W){return Ex.getNormal(this.a,this.b,this.c,W)}getPlane(W){return W.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(W,y){return Ex.getBarycoord(W,this.a,this.b,this.c,y)}getUV(W,y,M,U,i){return!1===Ix&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ix=!0),Ex.getInterpolation(W,this.a,this.b,this.c,y,M,U,i)}getInterpolation(W,y,M,U,i){return Ex.getInterpolation(W,this.a,this.b,this.c,y,M,U,i)}containsPoint(W){return Ex.containsPoint(W,this.a,this.b,this.c)}isFrontFacing(W){return Ex.isFrontFacing(this.a,this.b,this.c,W)}intersectsBox(W){return W.intersectsTriangle(this)}closestPointToPoint(W,y){const M=this.a,U=this.b,i=this.c;let x,n;bx.subVectors(U,M),mx.subVectors(i,M),Kx.subVectors(W,M);const k=bx.dot(Kx),g=mx.dot(Kx);if(k<=0&&g<=0)return y.copy(M);Px.subVectors(W,U);const u=bx.dot(Px),e=mx.dot(Px);if(u>=0&&e<=u)return y.copy(U);const l=k*e-u*g;if(l<=0&&k>=0&&u<=0)return x=k/(k-u),y.copy(M).addScaledVector(bx,x);Rx.subVectors(W,i);const G=bx.dot(Rx),Y=mx.dot(Rx);if(Y>=0&&G<=Y)return y.copy(i);const c=G*g-k*Y;if(c<=0&&g>=0&&Y<=0)return n=g/(g-Y),y.copy(M).addScaledVector(mx,n);const D=u*Y-G*e;if(D<=0&&e-u>=0&&G-Y>=0)return zx.subVectors(i,U),n=(e-u)/(e-u+(G-Y)),y.copy(U).addScaledVector(zx,n);const r=1/(D+c+l);return x=c*r,n=l*r,y.copy(M).addScaledVector(bx,x).addScaledVector(mx,n)}equals(W){return W.a.equals(this.a)&&W.b.equals(this.b)&&W.c.equals(this.c)}}let Zx=0;class fx extends mU{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Zx++}),this.uuid=IU(),this.name="",this.type="Material",this.blending=SW,this.side=rW,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=IW,this.blendDst=EW,this.blendEquation=NW,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LW,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=kU,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=wM,this.stencilZFail=wM,this.stencilZPass=wM,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(W){this._alphaTest>0!=W>0&&this.version++,this._alphaTest=W}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(W){if(void 0!==W)for(const y in W){const M=W[y];if(void 0===M){console.warn(`THREE.Material: parameter '${y}' has value of undefined.`);continue}const U=this[y];void 0!==U?U&&U.isColor?U.set(M):U&&U.isVector3&&M&&M.isVector3?U.copy(M):this[y]=M:console.warn(`THREE.Material: '${y}' is not a property of THREE.${this.type}.`)}}toJSON(W){const y=void 0===W||"string"==typeof W;y&&(W={textures:{},images:{}});const M={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function U(W){const y=[];for(const M in W){const U=W[M];delete U.metadata,y.push(U)}return y}if(M.uuid=this.uuid,M.type=this.type,""!==this.name&&(M.name=this.name),this.color&&this.color.isColor&&(M.color=this.color.getHex()),void 0!==this.roughness&&(M.roughness=this.roughness),void 0!==this.metalness&&(M.metalness=this.metalness),void 0!==this.sheen&&(M.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(M.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(M.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(M.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(M.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(M.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(M.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(M.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(M.shininess=this.shininess),void 0!==this.clearcoat&&(M.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(M.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(M.clearcoatMap=this.clearcoatMap.toJSON(W).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(M.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(W).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(M.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(W).uuid,M.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(M.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(M.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(M.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(M.iridescenceMap=this.iridescenceMap.toJSON(W).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(M.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(W).uuid),void 0!==this.anisotropy&&(M.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(M.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(M.anisotropyMap=this.anisotropyMap.toJSON(W).uuid),this.map&&this.map.isTexture&&(M.map=this.map.toJSON(W).uuid),this.matcap&&this.matcap.isTexture&&(M.matcap=this.matcap.toJSON(W).uuid),this.alphaMap&&this.alphaMap.isTexture&&(M.alphaMap=this.alphaMap.toJSON(W).uuid),this.lightMap&&this.lightMap.isTexture&&(M.lightMap=this.lightMap.toJSON(W).uuid,M.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(M.aoMap=this.aoMap.toJSON(W).uuid,M.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(M.bumpMap=this.bumpMap.toJSON(W).uuid,M.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(M.normalMap=this.normalMap.toJSON(W).uuid,M.normalMapType=this.normalMapType,M.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(M.displacementMap=this.displacementMap.toJSON(W).uuid,M.displacementScale=this.displacementScale,M.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(M.roughnessMap=this.roughnessMap.toJSON(W).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(M.metalnessMap=this.metalnessMap.toJSON(W).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(M.emissiveMap=this.emissiveMap.toJSON(W).uuid),this.specularMap&&this.specularMap.isTexture&&(M.specularMap=this.specularMap.toJSON(W).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(M.specularIntensityMap=this.specularIntensityMap.toJSON(W).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(M.specularColorMap=this.specularColorMap.toJSON(W).uuid),this.envMap&&this.envMap.isTexture&&(M.envMap=this.envMap.toJSON(W).uuid,void 0!==this.combine&&(M.combine=this.combine)),void 0!==this.envMapIntensity&&(M.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(M.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(M.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(M.gradientMap=this.gradientMap.toJSON(W).uuid),void 0!==this.transmission&&(M.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(M.transmissionMap=this.transmissionMap.toJSON(W).uuid),void 0!==this.thickness&&(M.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(M.thicknessMap=this.thicknessMap.toJSON(W).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(M.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(M.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(M.size=this.size),null!==this.shadowSide&&(M.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(M.sizeAttenuation=this.sizeAttenuation),this.blending!==SW&&(M.blending=this.blending),this.side!==rW&&(M.side=this.side),this.vertexColors&&(M.vertexColors=!0),this.opacity<1&&(M.opacity=this.opacity),!0===this.transparent&&(M.transparent=this.transparent),M.depthFunc=this.depthFunc,M.depthTest=this.depthTest,M.depthWrite=this.depthWrite,M.colorWrite=this.colorWrite,M.stencilWrite=this.stencilWrite,M.stencilWriteMask=this.stencilWriteMask,M.stencilFunc=this.stencilFunc,M.stencilRef=this.stencilRef,M.stencilFuncMask=this.stencilFuncMask,M.stencilFail=this.stencilFail,M.stencilZFail=this.stencilZFail,M.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(M.rotation=this.rotation),!0===this.polygonOffset&&(M.polygonOffset=!0),0!==this.polygonOffsetFactor&&(M.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(M.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(M.linewidth=this.linewidth),void 0!==this.dashSize&&(M.dashSize=this.dashSize),void 0!==this.gapSize&&(M.gapSize=this.gapSize),void 0!==this.scale&&(M.scale=this.scale),!0===this.dithering&&(M.dithering=!0),this.alphaTest>0&&(M.alphaTest=this.alphaTest),!0===this.alphaHash&&(M.alphaHash=this.alphaHash),!0===this.alphaToCoverage&&(M.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(M.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(M.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(M.wireframe=this.wireframe),this.wireframeLinewidth>1&&(M.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(M.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(M.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(M.flatShading=this.flatShading),!1===this.visible&&(M.visible=!1),!1===this.toneMapped&&(M.toneMapped=!1),!1===this.fog&&(M.fog=!1),Object.keys(this.userData).length>0&&(M.userData=this.userData),y){const y=U(W.textures),i=U(W.images);y.length>0&&(M.textures=y),i.length>0&&(M.images=i)}return M}clone(){return(new this.constructor).copy(this)}copy(W){this.name=W.name,this.blending=W.blending,this.side=W.side,this.vertexColors=W.vertexColors,this.opacity=W.opacity,this.transparent=W.transparent,this.blendSrc=W.blendSrc,this.blendDst=W.blendDst,this.blendEquation=W.blendEquation,this.blendSrcAlpha=W.blendSrcAlpha,this.blendDstAlpha=W.blendDstAlpha,this.blendEquationAlpha=W.blendEquationAlpha,this.depthFunc=W.depthFunc,this.depthTest=W.depthTest,this.depthWrite=W.depthWrite,this.stencilWriteMask=W.stencilWriteMask,this.stencilFunc=W.stencilFunc,this.stencilRef=W.stencilRef,this.stencilFuncMask=W.stencilFuncMask,this.stencilFail=W.stencilFail,this.stencilZFail=W.stencilZFail,this.stencilZPass=W.stencilZPass,this.stencilWrite=W.stencilWrite;const y=W.clippingPlanes;let M=null;if(null!==y){const W=y.length;M=new Array(W);for(let U=0;U!==W;++U)M[U]=y[U].clone()}return this.clippingPlanes=M,this.clipIntersection=W.clipIntersection,this.clipShadows=W.clipShadows,this.shadowSide=W.shadowSide,this.colorWrite=W.colorWrite,this.precision=W.precision,this.polygonOffset=W.polygonOffset,this.polygonOffsetFactor=W.polygonOffsetFactor,this.polygonOffsetUnits=W.polygonOffsetUnits,this.dithering=W.dithering,this.alphaTest=W.alphaTest,this.alphaHash=W.alphaHash,this.alphaToCoverage=W.alphaToCoverage,this.premultipliedAlpha=W.premultipliedAlpha,this.forceSinglePass=W.forceSinglePass,this.visible=W.visible,this.toneMapped=W.toneMapped,this.userData=JSON.parse(JSON.stringify(W.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(W){!0===W&&this.version++}}const Vx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},$x={h:0,s:0,l:0},ax={h:0,s:0,l:0};function Hx(W,y,M){return M<0&&(M+=1),M>1&&(M-=1),M<1/6?W+6*(y-W)*M:M<1/2?y:M<2/3?W+6*(y-W)*(2/3-M):W}class Bx{constructor(W,y,M){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(W,y,M)}set(W,y,M){if(void 0===y&&void 0===M){const y=W;y&&y.isColor?this.copy(y):"number"==typeof y?this.setHex(y):"string"==typeof y&&this.setStyle(y)}else this.setRGB(W,y,M);return this}setScalar(W){return this.r=W,this.g=W,this.b=W,this}setHex(W,y=BM){return W=Math.floor(W),this.r=(W>>16&255)/255,this.g=(W>>8&255)/255,this.b=(255&W)/255,ni.toWorkingColorSpace(this,y),this}setRGB(W,y,M,U=ni.workingColorSpace){return this.r=W,this.g=y,this.b=M,ni.toWorkingColorSpace(this,U),this}setHSL(W,y,M,U=ni.workingColorSpace){if(W=ZU(W,1),y=EU(y,0,1),M=EU(M,0,1),0===y)this.r=this.g=this.b=M;else{const U=M<=.5?M*(1+y):M+y-M*y,i=2*M-U;this.r=Hx(i,U,W+1/3),this.g=Hx(i,U,W),this.b=Hx(i,U,W-1/3)}return ni.toWorkingColorSpace(this,U),this}setStyle(W,y=BM){function M(y){void 0!==y&&parseFloat(y)<1&&console.warn("THREE.Color: Alpha component of "+W+" will be ignored.")}let U;if(U=/^(\w+)\(([^\)]*)\)/.exec(W)){let i;const x=U[1],n=U[2];switch(x){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n))return M(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,y);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n))return M(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,y);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n))return M(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,y);break;default:console.warn("THREE.Color: Unknown color model "+W)}}else if(U=/^\#([A-Fa-f\d]+)$/.exec(W)){const M=U[1],i=M.length;if(3===i)return this.setRGB(parseInt(M.charAt(0),16)/15,parseInt(M.charAt(1),16)/15,parseInt(M.charAt(2),16)/15,y);if(6===i)return this.setHex(parseInt(M,16),y);console.warn("THREE.Color: Invalid hex color "+W)}else if(W&&W.length>0)return this.setColorName(W,y);return this}setColorName(W,y=BM){const M=Vx[W.toLowerCase()];return void 0!==M?this.setHex(M,y):console.warn("THREE.Color: Unknown color "+W),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(W){return this.r=W.r,this.g=W.g,this.b=W.b,this}copySRGBToLinear(W){return this.r=Wi(W.r),this.g=Wi(W.g),this.b=Wi(W.b),this}copyLinearToSRGB(W){return this.r=yi(W.r),this.g=yi(W.g),this.b=yi(W.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(W=BM){return ni.fromWorkingColorSpace(vx.copy(this),W),65536*Math.round(EU(255*vx.r,0,255))+256*Math.round(EU(255*vx.g,0,255))+Math.round(EU(255*vx.b,0,255))}getHexString(W=BM){return("000000"+this.getHex(W).toString(16)).slice(-6)}getHSL(W,y=ni.workingColorSpace){ni.fromWorkingColorSpace(vx.copy(this),y);const M=vx.r,U=vx.g,i=vx.b,x=Math.max(M,U,i),n=Math.min(M,U,i);let k,g;const u=(n+x)/2;if(n===x)k=0,g=0;else{const W=x-n;switch(g=u<=.5?W/(x+n):W/(2-x-n),x){case M:k=(U-i)/W+(U<i?6:0);break;case U:k=(i-M)/W+2;break;case i:k=(M-U)/W+4}k/=6}return W.h=k,W.s=g,W.l=u,W}getRGB(W,y=ni.workingColorSpace){return ni.fromWorkingColorSpace(vx.copy(this),y),W.r=vx.r,W.g=vx.g,W.b=vx.b,W}getStyle(W=BM){ni.fromWorkingColorSpace(vx.copy(this),W);const y=vx.r,M=vx.g,U=vx.b;return W!==BM?`color(${W} ${y.toFixed(3)} ${M.toFixed(3)} ${U.toFixed(3)})`:`rgb(${Math.round(255*y)},${Math.round(255*M)},${Math.round(255*U)})`}offsetHSL(W,y,M){return this.getHSL($x),$x.h+=W,$x.s+=y,$x.l+=M,this.setHSL($x.h,$x.s,$x.l),this}add(W){return this.r+=W.r,this.g+=W.g,this.b+=W.b,this}addColors(W,y){return this.r=W.r+y.r,this.g=W.g+y.g,this.b=W.b+y.b,this}addScalar(W){return this.r+=W,this.g+=W,this.b+=W,this}sub(W){return this.r=Math.max(0,this.r-W.r),this.g=Math.max(0,this.g-W.g),this.b=Math.max(0,this.b-W.b),this}multiply(W){return this.r*=W.r,this.g*=W.g,this.b*=W.b,this}multiplyScalar(W){return this.r*=W,this.g*=W,this.b*=W,this}lerp(W,y){return this.r+=(W.r-this.r)*y,this.g+=(W.g-this.g)*y,this.b+=(W.b-this.b)*y,this}lerpColors(W,y,M){return this.r=W.r+(y.r-W.r)*M,this.g=W.g+(y.g-W.g)*M,this.b=W.b+(y.b-W.b)*M,this}lerpHSL(W,y){this.getHSL($x),W.getHSL(ax);const M=fU($x.h,ax.h,y),U=fU($x.s,ax.s,y),i=fU($x.l,ax.l,y);return this.setHSL(M,U,i),this}setFromVector3(W){return this.r=W.x,this.g=W.y,this.b=W.z,this}applyMatrix3(W){const y=this.r,M=this.g,U=this.b,i=W.elements;return this.r=i[0]*y+i[3]*M+i[6]*U,this.g=i[1]*y+i[4]*M+i[7]*U,this.b=i[2]*y+i[5]*M+i[8]*U,this}equals(W){return W.r===this.r&&W.g===this.g&&W.b===this.b}fromArray(W,y=0){return this.r=W[y],this.g=W[y+1],this.b=W[y+2],this}toArray(W=[],y=0){return W[y]=this.r,W[y+1]=this.g,W[y+2]=this.b,W}fromBufferAttribute(W,y){return this.r=W.getX(y),this.g=W.getY(y),this.b=W.getZ(y),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const vx=new Bx;Bx.NAMES=Vx;class Lx extends fx{constructor(W){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Bx(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=JW,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(W)}copy(W){return super.copy(W),this.color.copy(W.color),this.map=W.map,this.lightMap=W.lightMap,this.lightMapIntensity=W.lightMapIntensity,this.aoMap=W.aoMap,this.aoMapIntensity=W.aoMapIntensity,this.specularMap=W.specularMap,this.alphaMap=W.alphaMap,this.envMap=W.envMap,this.combine=W.combine,this.reflectivity=W.reflectivity,this.refractionRatio=W.refractionRatio,this.wireframe=W.wireframe,this.wireframeLinewidth=W.wireframeLinewidth,this.wireframeLinecap=W.wireframeLinecap,this.wireframeLinejoin=W.wireframeLinejoin,this.fog=W.fog,this}}const Xx=wx();function wx(){const W=new ArrayBuffer(4),y=new Float32Array(W),M=new Uint32Array(W),U=new Uint32Array(512),i=new Uint32Array(512);for(let W=0;W<256;++W){const y=W-127;y<-27?(U[W]=0,U[256|W]=32768,i[W]=24,i[256|W]=24):y<-14?(U[W]=1024>>-y-14,U[256|W]=1024>>-y-14|32768,i[W]=-y-1,i[256|W]=-y-1):y<=15?(U[W]=y+15<<10,U[256|W]=y+15<<10|32768,i[W]=13,i[256|W]=13):y<128?(U[W]=31744,U[256|W]=64512,i[W]=24,i[256|W]=24):(U[W]=31744,U[256|W]=64512,i[W]=13,i[256|W]=13)}const x=new Uint32Array(2048),n=new Uint32Array(64),k=new Uint32Array(64);for(let W=1;W<1024;++W){let y=W<<13,M=0;for(;!(8388608&y);)y<<=1,M-=8388608;y&=~8388608,M+=947912704,x[W]=y|M}for(let W=1024;W<2048;++W)x[W]=939524096+(W-1024<<13);for(let W=1;W<31;++W)n[W]=W<<23;n[31]=1199570944,n[32]=2147483648;for(let W=33;W<63;++W)n[W]=2147483648+(W-32<<23);n[63]=3347054592;for(let W=1;W<64;++W)32!==W&&(k[W]=1024);return{floatView:y,uint32View:M,baseTable:U,shiftTable:i,mantissaTable:x,exponentTable:n,offsetTable:k}}function Fx(W){Math.abs(W)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),W=EU(W,-65504,65504),Xx.floatView[0]=W;const y=Xx.uint32View[0],M=y>>23&511;return Xx.baseTable[M]+((8388607&y)>>Xx.shiftTable[M])}function tx(W){const y=W>>10;return Xx.uint32View[0]=Xx.mantissaTable[Xx.offsetTable[y]+(1023&W)]+Xx.exponentTable[y],Xx.floatView[0]}const Jx={toHalfFloat:Fx,fromHalfFloat:tx},jx=new di,Cx=new LU;class Qx{constructor(W,y,M=!1){if(Array.isArray(W))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=W,this.itemSize=y,this.count=void 0!==W?W.length/y:0,this.normalized=M,this.usage=rU,this.updateRange={offset:0,count:-1},this.gpuType=my,this.version=0}onUploadCallback(){}set needsUpdate(W){!0===W&&this.version++}setUsage(W){return this.usage=W,this}copy(W){return this.name=W.name,this.array=new W.array.constructor(W.array),this.itemSize=W.itemSize,this.count=W.count,this.normalized=W.normalized,this.usage=W.usage,this.gpuType=W.gpuType,this}copyAt(W,y,M){W*=this.itemSize,M*=y.itemSize;for(let U=0,i=this.itemSize;U<i;U++)this.array[W+U]=y.array[M+U];return this}copyArray(W){return this.array.set(W),this}applyMatrix3(W){if(2===this.itemSize)for(let y=0,M=this.count;y<M;y++)Cx.fromBufferAttribute(this,y),Cx.applyMatrix3(W),this.setXY(y,Cx.x,Cx.y);else if(3===this.itemSize)for(let y=0,M=this.count;y<M;y++)jx.fromBufferAttribute(this,y),jx.applyMatrix3(W),this.setXYZ(y,jx.x,jx.y,jx.z);return this}applyMatrix4(W){for(let y=0,M=this.count;y<M;y++)jx.fromBufferAttribute(this,y),jx.applyMatrix4(W),this.setXYZ(y,jx.x,jx.y,jx.z);return this}applyNormalMatrix(W){for(let y=0,M=this.count;y<M;y++)jx.fromBufferAttribute(this,y),jx.applyNormalMatrix(W),this.setXYZ(y,jx.x,jx.y,jx.z);return this}transformDirection(W){for(let y=0,M=this.count;y<M;y++)jx.fromBufferAttribute(this,y),jx.transformDirection(W),this.setXYZ(y,jx.x,jx.y,jx.z);return this}set(W,y=0){return this.array.set(W,y),this}getComponent(W,y){let M=this.array[W*this.itemSize+y];return this.normalized&&(M=HU(M,this.array)),M}setComponent(W,y,M){return this.normalized&&(M=BU(M,this.array)),this.array[W*this.itemSize+y]=M,this}getX(W){let y=this.array[W*this.itemSize];return this.normalized&&(y=HU(y,this.array)),y}setX(W,y){return this.normalized&&(y=BU(y,this.array)),this.array[W*this.itemSize]=y,this}getY(W){let y=this.array[W*this.itemSize+1];return this.normalized&&(y=HU(y,this.array)),y}setY(W,y){return this.normalized&&(y=BU(y,this.array)),this.array[W*this.itemSize+1]=y,this}getZ(W){let y=this.array[W*this.itemSize+2];return this.normalized&&(y=HU(y,this.array)),y}setZ(W,y){return this.normalized&&(y=BU(y,this.array)),this.array[W*this.itemSize+2]=y,this}getW(W){let y=this.array[W*this.itemSize+3];return this.normalized&&(y=HU(y,this.array)),y}setW(W,y){return this.normalized&&(y=BU(y,this.array)),this.array[W*this.itemSize+3]=y,this}setXY(W,y,M){return W*=this.itemSize,this.normalized&&(y=BU(y,this.array),M=BU(M,this.array)),this.array[W+0]=y,this.array[W+1]=M,this}setXYZ(W,y,M,U){return W*=this.itemSize,this.normalized&&(y=BU(y,this.array),M=BU(M,this.array),U=BU(U,this.array)),this.array[W+0]=y,this.array[W+1]=M,this.array[W+2]=U,this}setXYZW(W,y,M,U,i){return W*=this.itemSize,this.normalized&&(y=BU(y,this.array),M=BU(M,this.array),U=BU(U,this.array),i=BU(i,this.array)),this.array[W+0]=y,this.array[W+1]=M,this.array[W+2]=U,this.array[W+3]=i,this}onUpload(W){return this.onUploadCallback=W,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const W={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(W.name=this.name),this.usage!==rU&&(W.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(W.updateRange=this.updateRange),W}}class Wn extends Qx{constructor(W,y,M){super(new Int8Array(W),y,M)}}class yn extends Qx{constructor(W,y,M){super(new Uint8Array(W),y,M)}}class Mn extends Qx{constructor(W,y,M){super(new Uint8ClampedArray(W),y,M)}}class Un extends Qx{constructor(W,y,M){super(new Int16Array(W),y,M)}}class xn extends Qx{constructor(W,y,M){super(new Uint16Array(W),y,M)}}class nn extends Qx{constructor(W,y,M){super(new Int32Array(W),y,M)}}class kn extends Qx{constructor(W,y,M){super(new Uint32Array(W),y,M)}}class gn extends Qx{constructor(W,y,M){super(new Uint16Array(W),y,M),this.isFloat16BufferAttribute=!0}getX(W){let y=tx(this.array[W*this.itemSize]);return this.normalized&&(y=HU(y,this.array)),y}setX(W,y){return this.normalized&&(y=BU(y,this.array)),this.array[W*this.itemSize]=Fx(y),this}getY(W){let y=tx(this.array[W*this.itemSize+1]);return this.normalized&&(y=HU(y,this.array)),y}setY(W,y){return this.normalized&&(y=BU(y,this.array)),this.array[W*this.itemSize+1]=Fx(y),this}getZ(W){let y=tx(this.array[W*this.itemSize+2]);return this.normalized&&(y=HU(y,this.array)),y}setZ(W,y){return this.normalized&&(y=BU(y,this.array)),this.array[W*this.itemSize+2]=Fx(y),this}getW(W){let y=tx(this.array[W*this.itemSize+3]);return this.normalized&&(y=HU(y,this.array)),y}setW(W,y){return this.normalized&&(y=BU(y,this.array)),this.array[W*this.itemSize+3]=Fx(y),this}setXY(W,y,M){return W*=this.itemSize,this.normalized&&(y=BU(y,this.array),M=BU(M,this.array)),this.array[W+0]=Fx(y),this.array[W+1]=Fx(M),this}setXYZ(W,y,M,U){return W*=this.itemSize,this.normalized&&(y=BU(y,this.array),M=BU(M,this.array),U=BU(U,this.array)),this.array[W+0]=Fx(y),this.array[W+1]=Fx(M),this.array[W+2]=Fx(U),this}setXYZW(W,y,M,U,i){return W*=this.itemSize,this.normalized&&(y=BU(y,this.array),M=BU(M,this.array),U=BU(U,this.array),i=BU(i,this.array)),this.array[W+0]=Fx(y),this.array[W+1]=Fx(M),this.array[W+2]=Fx(U),this.array[W+3]=Fx(i),this}}class un extends Qx{constructor(W,y,M){super(new Float32Array(W),y,M)}}class en extends Qx{constructor(W,y,M){super(new Float64Array(W),y,M)}}let ln=0;const Gn=new Qi,Yn=new qx,cn=new di,Dn=new Ni,rn=new Ni,An=new di;class Tn extends mU{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ln++}),this.uuid=IU(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(W){return Array.isArray(W)?this.index=new(FU(W)?kn:xn)(W,1):this.index=W,this}getAttribute(W){return this.attributes[W]}setAttribute(W,y){return this.attributes[W]=y,this}deleteAttribute(W){return delete this.attributes[W],this}hasAttribute(W){return void 0!==this.attributes[W]}addGroup(W,y,M=0){this.groups.push({start:W,count:y,materialIndex:M})}clearGroups(){this.groups=[]}setDrawRange(W,y){this.drawRange.start=W,this.drawRange.count=y}applyMatrix4(W){const y=this.attributes.position;void 0!==y&&(y.applyMatrix4(W),y.needsUpdate=!0);const M=this.attributes.normal;if(void 0!==M){const y=(new XU).getNormalMatrix(W);M.applyNormalMatrix(y),M.needsUpdate=!0}const U=this.attributes.tangent;return void 0!==U&&(U.transformDirection(W),U.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(W){return Gn.makeRotationFromQuaternion(W),this.applyMatrix4(Gn),this}rotateX(W){return Gn.makeRotationX(W),this.applyMatrix4(Gn),this}rotateY(W){return Gn.makeRotationY(W),this.applyMatrix4(Gn),this}rotateZ(W){return Gn.makeRotationZ(W),this.applyMatrix4(Gn),this}translate(W,y,M){return Gn.makeTranslation(W,y,M),this.applyMatrix4(Gn),this}scale(W,y,M){return Gn.makeScale(W,y,M),this.applyMatrix4(Gn),this}lookAt(W){return Yn.lookAt(W),Yn.updateMatrix(),this.applyMatrix4(Yn.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(cn).negate(),this.translate(cn.x,cn.y,cn.z),this}setFromPoints(W){const y=[];for(let M=0,U=W.length;M<U;M++){const U=W[M];y.push(U.x,U.y,U.z||0)}return this.setAttribute("position",new un(y,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ni);const W=this.attributes.position,y=this.morphAttributes.position;if(W&&W.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new di(-1/0,-1/0,-1/0),new di(+1/0,+1/0,+1/0));if(void 0!==W){if(this.boundingBox.setFromBufferAttribute(W),y)for(let W=0,M=y.length;W<M;W++){const M=y[W];Dn.setFromBufferAttribute(M),this.morphTargetsRelative?(An.addVectors(this.boundingBox.min,Dn.min),this.boundingBox.expandByPoint(An),An.addVectors(this.boundingBox.max,Dn.max),this.boundingBox.expandByPoint(An)):(this.boundingBox.expandByPoint(Dn.min),this.boundingBox.expandByPoint(Dn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new vi);const W=this.attributes.position,y=this.morphAttributes.position;if(W&&W.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new di,1/0);if(W){const M=this.boundingSphere.center;if(Dn.setFromBufferAttribute(W),y)for(let W=0,M=y.length;W<M;W++){const M=y[W];rn.setFromBufferAttribute(M),this.morphTargetsRelative?(An.addVectors(Dn.min,rn.min),Dn.expandByPoint(An),An.addVectors(Dn.max,rn.max),Dn.expandByPoint(An)):(Dn.expandByPoint(rn.min),Dn.expandByPoint(rn.max))}Dn.getCenter(M);let U=0;for(let y=0,i=W.count;y<i;y++)An.fromBufferAttribute(W,y),U=Math.max(U,M.distanceToSquared(An));if(y)for(let i=0,x=y.length;i<x;i++){const x=y[i],n=this.morphTargetsRelative;for(let y=0,i=x.count;y<i;y++)An.fromBufferAttribute(x,y),n&&(cn.fromBufferAttribute(W,y),An.add(cn)),U=Math.max(U,M.distanceToSquared(An))}this.boundingSphere.radius=Math.sqrt(U),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const W=this.index,y=this.attributes;if(null===W||void 0===y.position||void 0===y.normal||void 0===y.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const M=W.array,U=y.position.array,i=y.normal.array,x=y.uv.array,n=U.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Qx(new Float32Array(4*n),4));const k=this.getAttribute("tangent").array,g=[],u=[];for(let W=0;W<n;W++)g[W]=new di,u[W]=new di;const e=new di,l=new di,G=new di,Y=new LU,c=new LU,D=new LU,r=new di,A=new di;function T(W,y,M){e.fromArray(U,3*W),l.fromArray(U,3*y),G.fromArray(U,3*M),Y.fromArray(x,2*W),c.fromArray(x,2*y),D.fromArray(x,2*M),l.sub(e),G.sub(e),c.sub(Y),D.sub(Y);const i=1/(c.x*D.y-D.x*c.y);isFinite(i)&&(r.copy(l).multiplyScalar(D.y).addScaledVector(G,-c.y).multiplyScalar(i),A.copy(G).multiplyScalar(c.x).addScaledVector(l,-D.x).multiplyScalar(i),g[W].add(r),g[y].add(r),g[M].add(r),u[W].add(A),u[y].add(A),u[M].add(A))}let O=this.groups;0===O.length&&(O=[{start:0,count:M.length}]);for(let W=0,y=O.length;W<y;++W){const y=O[W],U=y.start;for(let W=U,i=U+y.count;W<i;W+=3)T(M[W+0],M[W+1],M[W+2])}const h=new di,S=new di,o=new di,d=new di;function q(W){o.fromArray(i,3*W),d.copy(o);const y=g[W];h.copy(y),h.sub(o.multiplyScalar(o.dot(y))).normalize(),S.crossVectors(d,y);const M=S.dot(u[W])<0?-1:1;k[4*W]=h.x,k[4*W+1]=h.y,k[4*W+2]=h.z,k[4*W+3]=M}for(let W=0,y=O.length;W<y;++W){const y=O[W],U=y.start;for(let W=U,i=U+y.count;W<i;W+=3)q(M[W+0]),q(M[W+1]),q(M[W+2])}}computeVertexNormals(){const W=this.index,y=this.getAttribute("position");if(void 0!==y){let M=this.getAttribute("normal");if(void 0===M)M=new Qx(new Float32Array(3*y.count),3),this.setAttribute("normal",M);else for(let W=0,y=M.count;W<y;W++)M.setXYZ(W,0,0,0);const U=new di,i=new di,x=new di,n=new di,k=new di,g=new di,u=new di,e=new di;if(W)for(let l=0,G=W.count;l<G;l+=3){const G=W.getX(l+0),Y=W.getX(l+1),c=W.getX(l+2);U.fromBufferAttribute(y,G),i.fromBufferAttribute(y,Y),x.fromBufferAttribute(y,c),u.subVectors(x,i),e.subVectors(U,i),u.cross(e),n.fromBufferAttribute(M,G),k.fromBufferAttribute(M,Y),g.fromBufferAttribute(M,c),n.add(u),k.add(u),g.add(u),M.setXYZ(G,n.x,n.y,n.z),M.setXYZ(Y,k.x,k.y,k.z),M.setXYZ(c,g.x,g.y,g.z)}else for(let W=0,n=y.count;W<n;W+=3)U.fromBufferAttribute(y,W+0),i.fromBufferAttribute(y,W+1),x.fromBufferAttribute(y,W+2),u.subVectors(x,i),e.subVectors(U,i),u.cross(e),M.setXYZ(W+0,u.x,u.y,u.z),M.setXYZ(W+1,u.x,u.y,u.z),M.setXYZ(W+2,u.x,u.y,u.z);this.normalizeNormals(),M.needsUpdate=!0}}normalizeNormals(){const W=this.attributes.normal;for(let y=0,M=W.count;y<M;y++)An.fromBufferAttribute(W,y),An.normalize(),W.setXYZ(y,An.x,An.y,An.z)}toNonIndexed(){function W(W,y){const M=W.array,U=W.itemSize,i=W.normalized,x=new M.constructor(y.length*U);let n=0,k=0;for(let i=0,g=y.length;i<g;i++){n=W.isInterleavedBufferAttribute?y[i]*W.data.stride+W.offset:y[i]*U;for(let W=0;W<U;W++)x[k++]=M[n++]}return new Qx(x,U,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const y=new Tn,M=this.index.array,U=this.attributes;for(const i in U){const x=W(U[i],M);y.setAttribute(i,x)}const i=this.morphAttributes;for(const U in i){const x=[],n=i[U];for(let y=0,U=n.length;y<U;y++){const U=W(n[y],M);x.push(U)}y.morphAttributes[U]=x}y.morphTargetsRelative=this.morphTargetsRelative;const x=this.groups;for(let W=0,M=x.length;W<M;W++){const M=x[W];y.addGroup(M.start,M.count,M.materialIndex)}return y}toJSON(){const W={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(W.uuid=this.uuid,W.type=this.type,""!==this.name&&(W.name=this.name),Object.keys(this.userData).length>0&&(W.userData=this.userData),void 0!==this.parameters){const y=this.parameters;for(const M in y)void 0!==y[M]&&(W[M]=y[M]);return W}W.data={attributes:{}};const y=this.index;null!==y&&(W.data.index={type:y.array.constructor.name,array:Array.prototype.slice.call(y.array)});const M=this.attributes;for(const y in M){const U=M[y];W.data.attributes[y]=U.toJSON(W.data)}const U={};let i=!1;for(const y in this.morphAttributes){const M=this.morphAttributes[y],x=[];for(let y=0,U=M.length;y<U;y++){const U=M[y];x.push(U.toJSON(W.data))}x.length>0&&(U[y]=x,i=!0)}i&&(W.data.morphAttributes=U,W.data.morphTargetsRelative=this.morphTargetsRelative);const x=this.groups;x.length>0&&(W.data.groups=JSON.parse(JSON.stringify(x)));const n=this.boundingSphere;return null!==n&&(W.data.boundingSphere={center:n.center.toArray(),radius:n.radius}),W}clone(){return(new this.constructor).copy(this)}copy(W){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const y={};this.name=W.name;const M=W.index;null!==M&&this.setIndex(M.clone(y));const U=W.attributes;for(const W in U){const M=U[W];this.setAttribute(W,M.clone(y))}const i=W.morphAttributes;for(const W in i){const M=[],U=i[W];for(let W=0,i=U.length;W<i;W++)M.push(U[W].clone(y));this.morphAttributes[W]=M}this.morphTargetsRelative=W.morphTargetsRelative;const x=W.groups;for(let W=0,y=x.length;W<y;W++){const y=x[W];this.addGroup(y.start,y.count,y.materialIndex)}const n=W.boundingBox;null!==n&&(this.boundingBox=n.clone());const k=W.boundingSphere;return null!==k&&(this.boundingSphere=k.clone()),this.drawRange.start=W.drawRange.start,this.drawRange.count=W.drawRange.count,this.userData=W.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const On=new Qi,hn=new Ci,Sn=new vi,on=new di,dn=new di,qn=new di,sn=new di,Nn=new di,_n=new di,pn=new LU,bn=new LU,mn=new LU,zn=new di,Kn=new di,Pn=new di,Rn=new di,In=new di;class En extends qx{constructor(W=new Tn,y=new Lx){super(),this.isMesh=!0,this.type="Mesh",this.geometry=W,this.material=y,this.updateMorphTargets()}copy(W,y){return super.copy(W,y),void 0!==W.morphTargetInfluences&&(this.morphTargetInfluences=W.morphTargetInfluences.slice()),void 0!==W.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},W.morphTargetDictionary)),this.material=W.material,this.geometry=W.geometry,this}updateMorphTargets(){const W=this.geometry.morphAttributes,y=Object.keys(W);if(y.length>0){const M=W[y[0]];if(void 0!==M){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let W=0,y=M.length;W<y;W++){const y=M[W].name||String(W);this.morphTargetInfluences.push(0),this.morphTargetDictionary[y]=W}}}}getVertexPosition(W,y){const M=this.geometry,U=M.attributes.position,i=M.morphAttributes.position,x=M.morphTargetsRelative;y.fromBufferAttribute(U,W);const n=this.morphTargetInfluences;if(i&&n){_n.set(0,0,0);for(let M=0,U=i.length;M<U;M++){const U=n[M],k=i[M];0!==U&&(Nn.fromBufferAttribute(k,W),x?_n.addScaledVector(Nn,U):_n.addScaledVector(Nn.sub(y),U))}y.add(_n)}return y}raycast(W,y){const M=this.geometry,U=this.material,i=this.matrixWorld;if(void 0!==U){if(null===M.boundingSphere&&M.computeBoundingSphere(),Sn.copy(M.boundingSphere),Sn.applyMatrix4(i),hn.copy(W.ray).recast(W.near),!1===Sn.containsPoint(hn.origin)){if(null===hn.intersectSphere(Sn,on))return;if(hn.origin.distanceToSquared(on)>(W.far-W.near)**2)return}On.copy(i).invert(),hn.copy(W.ray).applyMatrix4(On),null!==M.boundingBox&&!1===hn.intersectsBox(M.boundingBox)||this._computeIntersections(W,y,hn)}}_computeIntersections(W,y,M){let U;const i=this.geometry,x=this.material,n=i.index,k=i.attributes.position,g=i.attributes.uv,u=i.attributes.uv1,e=i.attributes.normal,l=i.groups,G=i.drawRange;if(null!==n)if(Array.isArray(x))for(let i=0,k=l.length;i<k;i++){const k=l[i],Y=x[k.materialIndex];for(let i=Math.max(k.start,G.start),x=Math.min(n.count,Math.min(k.start+k.count,G.start+G.count));i<x;i+=3)U=Zn(this,Y,W,M,g,u,e,n.getX(i),n.getX(i+1),n.getX(i+2)),U&&(U.faceIndex=Math.floor(i/3),U.face.materialIndex=k.materialIndex,y.push(U))}else for(let i=Math.max(0,G.start),k=Math.min(n.count,G.start+G.count);i<k;i+=3)U=Zn(this,x,W,M,g,u,e,n.getX(i),n.getX(i+1),n.getX(i+2)),U&&(U.faceIndex=Math.floor(i/3),y.push(U));else if(void 0!==k)if(Array.isArray(x))for(let i=0,n=l.length;i<n;i++){const n=l[i],Y=x[n.materialIndex];for(let i=Math.max(n.start,G.start),x=Math.min(k.count,Math.min(n.start+n.count,G.start+G.count));i<x;i+=3)U=Zn(this,Y,W,M,g,u,e,i,i+1,i+2),U&&(U.faceIndex=Math.floor(i/3),U.face.materialIndex=n.materialIndex,y.push(U))}else for(let i=Math.max(0,G.start),n=Math.min(k.count,G.start+G.count);i<n;i+=3)U=Zn(this,x,W,M,g,u,e,i,i+1,i+2),U&&(U.faceIndex=Math.floor(i/3),y.push(U))}}function Zn(W,y,M,U,i,x,n,k,g,u){W.getVertexPosition(k,dn),W.getVertexPosition(g,qn),W.getVertexPosition(u,sn);const e=function(W,y,M,U,i,x,n,k){let g;if(g=y.side===AW?U.intersectTriangle(n,x,i,!0,k):U.intersectTriangle(i,x,n,y.side===rW,k),null===g)return null;In.copy(k),In.applyMatrix4(W.matrixWorld);const u=M.ray.origin.distanceTo(In);return u<M.near||u>M.far?null:{distance:u,point:In.clone(),object:W}}(W,y,M,U,dn,qn,sn,Rn);if(e){i&&(pn.fromBufferAttribute(i,k),bn.fromBufferAttribute(i,g),mn.fromBufferAttribute(i,u),e.uv=Ex.getInterpolation(Rn,dn,qn,sn,pn,bn,mn,new LU)),x&&(pn.fromBufferAttribute(x,k),bn.fromBufferAttribute(x,g),mn.fromBufferAttribute(x,u),e.uv1=Ex.getInterpolation(Rn,dn,qn,sn,pn,bn,mn,new LU),e.uv2=e.uv1),n&&(zn.fromBufferAttribute(n,k),Kn.fromBufferAttribute(n,g),Pn.fromBufferAttribute(n,u),e.normal=Ex.getInterpolation(Rn,dn,qn,sn,zn,Kn,Pn,new di),e.normal.dot(U.direction)>0&&e.normal.multiplyScalar(-1));const W={a:k,b:g,c:u,normal:new di,materialIndex:0};Ex.getNormal(dn,qn,sn,W.normal),e.face=W}return e}class fn extends Tn{constructor(W=1,y=1,M=1,U=1,i=1,x=1){super(),this.type="BoxGeometry",this.parameters={width:W,height:y,depth:M,widthSegments:U,heightSegments:i,depthSegments:x};const n=this;U=Math.floor(U),i=Math.floor(i),x=Math.floor(x);const k=[],g=[],u=[],e=[];let l=0,G=0;function Y(W,y,M,U,i,x,Y,c,D,r,A){const T=x/D,O=Y/r,h=x/2,S=Y/2,o=c/2,d=D+1,q=r+1;let s=0,N=0;const _=new di;for(let x=0;x<q;x++){const n=x*O-S;for(let k=0;k<d;k++){const l=k*T-h;_[W]=l*U,_[y]=n*i,_[M]=o,g.push(_.x,_.y,_.z),_[W]=0,_[y]=0,_[M]=c>0?1:-1,u.push(_.x,_.y,_.z),e.push(k/D),e.push(1-x/r),s+=1}}for(let W=0;W<r;W++)for(let y=0;y<D;y++){const M=l+y+d*W,U=l+y+d*(W+1),i=l+(y+1)+d*(W+1),x=l+(y+1)+d*W;k.push(M,U,x),k.push(U,i,x),N+=6}n.addGroup(G,N,A),G+=N,l+=s}Y("z","y","x",-1,-1,M,y,W,x,i,0),Y("z","y","x",1,-1,M,y,-W,x,i,1),Y("x","z","y",1,1,W,M,y,U,x,2),Y("x","z","y",1,-1,W,M,-y,U,x,3),Y("x","y","z",1,-1,W,y,M,U,i,4),Y("x","y","z",-1,-1,W,y,-M,U,i,5),this.setIndex(k),this.setAttribute("position",new un(g,3)),this.setAttribute("normal",new un(u,3)),this.setAttribute("uv",new un(e,2))}copy(W){return super.copy(W),this.parameters=Object.assign({},W.parameters),this}static fromJSON(W){return new fn(W.width,W.height,W.depth,W.widthSegments,W.heightSegments,W.depthSegments)}}function Vn(W){const y={};for(const M in W){y[M]={};for(const U in W[M]){const i=W[M][U];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),y[M][U]=null):y[M][U]=i.clone():Array.isArray(i)?y[M][U]=i.slice():y[M][U]=i}}return y}function $n(W){const y={};for(let M=0;M<W.length;M++){const U=Vn(W[M]);for(const W in U)y[W]=U[W]}return y}function an(W){return null===W.getRenderTarget()?W.outputColorSpace:vM}const Hn={clone:Vn,merge:$n};var Bn="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",vn="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class Ln extends fx{constructor(W){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Bn,this.fragmentShader=vn,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==W&&this.setValues(W)}copy(W){return super.copy(W),this.fragmentShader=W.fragmentShader,this.vertexShader=W.vertexShader,this.uniforms=Vn(W.uniforms),this.uniformsGroups=function(W){const y=[];for(let M=0;M<W.length;M++)y.push(W[M].clone());return y}(W.uniformsGroups),this.defines=Object.assign({},W.defines),this.wireframe=W.wireframe,this.wireframeLinewidth=W.wireframeLinewidth,this.fog=W.fog,this.lights=W.lights,this.clipping=W.clipping,this.extensions=Object.assign({},W.extensions),this.glslVersion=W.glslVersion,this}toJSON(W){const y=super.toJSON(W);y.glslVersion=this.glslVersion,y.uniforms={};for(const M in this.uniforms){const U=this.uniforms[M].value;U&&U.isTexture?y.uniforms[M]={type:"t",value:U.toJSON(W).uuid}:U&&U.isColor?y.uniforms[M]={type:"c",value:U.getHex()}:U&&U.isVector2?y.uniforms[M]={type:"v2",value:U.toArray()}:U&&U.isVector3?y.uniforms[M]={type:"v3",value:U.toArray()}:U&&U.isVector4?y.uniforms[M]={type:"v4",value:U.toArray()}:U&&U.isMatrix3?y.uniforms[M]={type:"m3",value:U.toArray()}:U&&U.isMatrix4?y.uniforms[M]={type:"m4",value:U.toArray()}:y.uniforms[M]={value:U}}Object.keys(this.defines).length>0&&(y.defines=this.defines),y.vertexShader=this.vertexShader,y.fragmentShader=this.fragmentShader,y.lights=this.lights,y.clipping=this.clipping;const M={};for(const W in this.extensions)!0===this.extensions[W]&&(M[W]=!0);return Object.keys(M).length>0&&(y.extensions=M),y}}class Xn extends qx{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Qi,this.projectionMatrix=new Qi,this.projectionMatrixInverse=new Qi,this.coordinateSystem=pU}copy(W,y){return super.copy(W,y),this.matrixWorldInverse.copy(W.matrixWorldInverse),this.projectionMatrix.copy(W.projectionMatrix),this.projectionMatrixInverse.copy(W.projectionMatrixInverse),this.coordinateSystem=W.coordinateSystem,this}getWorldDirection(W){this.updateWorldMatrix(!0,!1);const y=this.matrixWorld.elements;return W.set(-y[8],-y[9],-y[10]).normalize()}updateMatrixWorld(W){super.updateMatrixWorld(W),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(W,y){super.updateWorldMatrix(W,y),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class wn extends Xn{constructor(W=50,y=1,M=.1,U=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=W,this.zoom=1,this.near=M,this.far=U,this.focus=10,this.aspect=y,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(W,y){return super.copy(W,y),this.fov=W.fov,this.zoom=W.zoom,this.near=W.near,this.far=W.far,this.focus=W.focus,this.aspect=W.aspect,this.view=null===W.view?null:Object.assign({},W.view),this.filmGauge=W.filmGauge,this.filmOffset=W.filmOffset,this}setFocalLength(W){const y=.5*this.getFilmHeight()/W;this.fov=2*RU*Math.atan(y),this.updateProjectionMatrix()}getFocalLength(){const W=Math.tan(.5*PU*this.fov);return.5*this.getFilmHeight()/W}getEffectiveFOV(){return 2*RU*Math.atan(Math.tan(.5*PU*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(W,y,M,U,i,x){this.aspect=W/y,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=W,this.view.fullHeight=y,this.view.offsetX=M,this.view.offsetY=U,this.view.width=i,this.view.height=x,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const W=this.near;let y=W*Math.tan(.5*PU*this.fov)/this.zoom,M=2*y,U=this.aspect*M,i=-.5*U;const x=this.view;if(null!==this.view&&this.view.enabled){const W=x.fullWidth,n=x.fullHeight;i+=x.offsetX*U/W,y-=x.offsetY*M/n,U*=x.width/W,M*=x.height/n}const n=this.filmOffset;0!==n&&(i+=W*n/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+U,y,y-M,W,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(W){const y=super.toJSON(W);return y.object.fov=this.fov,y.object.zoom=this.zoom,y.object.near=this.near,y.object.far=this.far,y.object.focus=this.focus,y.object.aspect=this.aspect,null!==this.view&&(y.object.view=Object.assign({},this.view)),y.object.filmGauge=this.filmGauge,y.object.filmOffset=this.filmOffset,y}}const Fn=-90,tn=1;class Jn extends qx{constructor(W,y,M){super(),this.type="CubeCamera",this.renderTarget=M,this.coordinateSystem=null;const U=new wn(Fn,tn,W,y);U.layers=this.layers,this.add(U);const i=new wn(Fn,tn,W,y);i.layers=this.layers,this.add(i);const x=new wn(Fn,tn,W,y);x.layers=this.layers,this.add(x);const n=new wn(Fn,tn,W,y);n.layers=this.layers,this.add(n);const k=new wn(Fn,tn,W,y);k.layers=this.layers,this.add(k);const g=new wn(Fn,tn,W,y);g.layers=this.layers,this.add(g)}updateCoordinateSystem(){const W=this.coordinateSystem,y=this.children.concat(),[M,U,i,x,n,k]=y;for(const W of y)this.remove(W);if(W===pU)M.up.set(0,1,0),M.lookAt(1,0,0),U.up.set(0,1,0),U.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),x.up.set(0,0,1),x.lookAt(0,-1,0),n.up.set(0,1,0),n.lookAt(0,0,1),k.up.set(0,1,0),k.lookAt(0,0,-1);else{if(W!==bU)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+W);M.up.set(0,-1,0),M.lookAt(-1,0,0),U.up.set(0,-1,0),U.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),x.up.set(0,0,-1),x.lookAt(0,-1,0),n.up.set(0,-1,0),n.lookAt(0,0,1),k.up.set(0,-1,0),k.lookAt(0,0,-1)}for(const W of y)this.add(W),W.updateMatrixWorld()}update(W,y){null===this.parent&&this.updateMatrixWorld();const M=this.renderTarget;this.coordinateSystem!==W.coordinateSystem&&(this.coordinateSystem=W.coordinateSystem,this.updateCoordinateSystem());const[U,i,x,n,k,g]=this.children,u=W.getRenderTarget(),e=W.xr.enabled;W.xr.enabled=!1;const l=M.texture.generateMipmaps;M.texture.generateMipmaps=!1,W.setRenderTarget(M,0),W.render(y,U),W.setRenderTarget(M,1),W.render(y,i),W.setRenderTarget(M,2),W.render(y,x),W.setRenderTarget(M,3),W.render(y,n),W.setRenderTarget(M,4),W.render(y,k),M.texture.generateMipmaps=l,W.setRenderTarget(M,5),W.render(y,g),W.setRenderTarget(u),W.xr.enabled=e,M.texture.needsPMREMUpdate=!0}}class jn extends Yi{constructor(W,y,M,U,i,x,n,k,g,u){super(W=void 0!==W?W:[],y=void 0!==y?y:ny,M,U,i,x,n,k,g,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(W){this.image=W}}class Cn extends ri{constructor(W=1,y={}){super(W,W,y),this.isWebGLCubeRenderTarget=!0;const M={width:W,height:W,depth:1},U=[M,M,M,M,M,M];void 0!==y.encoding&&(QU("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),y.colorSpace=y.encoding===ZM?BM:HM),this.texture=new jn(U,y.mapping,y.wrapS,y.wrapT,y.magFilter,y.minFilter,y.format,y.type,y.anisotropy,y.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==y.generateMipmaps&&y.generateMipmaps,this.texture.minFilter=void 0!==y.minFilter?y.minFilter:Oy}fromEquirectangularTexture(W,y){this.texture.type=y.type,this.texture.colorSpace=y.colorSpace,this.texture.generateMipmaps=y.generateMipmaps,this.texture.minFilter=y.minFilter,this.texture.magFilter=y.magFilter;const M={uniforms:{tEquirect:{value:null}},vertexShader:`\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t`,fragmentShader:`\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t`},U=new fn(5,5,5),i=new Ln({name:"CubemapFromEquirect",uniforms:Vn(M.uniforms),vertexShader:M.vertexShader,fragmentShader:M.fragmentShader,side:AW,blending:hW});i.uniforms.tEquirect.value=y;const x=new En(U,i),n=y.minFilter;return y.minFilter===oy&&(y.minFilter=Oy),new Jn(1,10,this).update(W,x),y.minFilter=n,x.geometry.dispose(),x.material.dispose(),this}clear(W,y,M,U){const i=W.getRenderTarget();for(let i=0;i<6;i++)W.setRenderTarget(this,i),W.clear(y,M,U);W.setRenderTarget(i)}}const Qn=new di,Wk=new di,yk=new XU;class Mk{constructor(W=new di(1,0,0),y=0){this.isPlane=!0,this.normal=W,this.constant=y}set(W,y){return this.normal.copy(W),this.constant=y,this}setComponents(W,y,M,U){return this.normal.set(W,y,M),this.constant=U,this}setFromNormalAndCoplanarPoint(W,y){return this.normal.copy(W),this.constant=-y.dot(this.normal),this}setFromCoplanarPoints(W,y,M){const U=Qn.subVectors(M,y).cross(Wk.subVectors(W,y)).normalize();return this.setFromNormalAndCoplanarPoint(U,W),this}copy(W){return this.normal.copy(W.normal),this.constant=W.constant,this}normalize(){const W=1/this.normal.length();return this.normal.multiplyScalar(W),this.constant*=W,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(W){return this.normal.dot(W)+this.constant}distanceToSphere(W){return this.distanceToPoint(W.center)-W.radius}projectPoint(W,y){return y.copy(W).addScaledVector(this.normal,-this.distanceToPoint(W))}intersectLine(W,y){const M=W.delta(Qn),U=this.normal.dot(M);if(0===U)return 0===this.distanceToPoint(W.start)?y.copy(W.start):null;const i=-(W.start.dot(this.normal)+this.constant)/U;return i<0||i>1?null:y.copy(W.start).addScaledVector(M,i)}intersectsLine(W){const y=this.distanceToPoint(W.start),M=this.distanceToPoint(W.end);return y<0&&M>0||M<0&&y>0}intersectsBox(W){return W.intersectsPlane(this)}intersectsSphere(W){return W.intersectsPlane(this)}coplanarPoint(W){return W.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(W,y){const M=y||yk.getNormalMatrix(W),U=this.coplanarPoint(Qn).applyMatrix4(W),i=this.normal.applyMatrix3(M).normalize();return this.constant=-U.dot(i),this}translate(W){return this.constant-=W.dot(this.normal),this}equals(W){return W.normal.equals(this.normal)&&W.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Uk=new vi,ik=new di;class xk{constructor(W=new Mk,y=new Mk,M=new Mk,U=new Mk,i=new Mk,x=new Mk){this.planes=[W,y,M,U,i,x]}set(W,y,M,U,i,x){const n=this.planes;return n[0].copy(W),n[1].copy(y),n[2].copy(M),n[3].copy(U),n[4].copy(i),n[5].copy(x),this}copy(W){const y=this.planes;for(let M=0;M<6;M++)y[M].copy(W.planes[M]);return this}setFromProjectionMatrix(W,y=pU){const M=this.planes,U=W.elements,i=U[0],x=U[1],n=U[2],k=U[3],g=U[4],u=U[5],e=U[6],l=U[7],G=U[8],Y=U[9],c=U[10],D=U[11],r=U[12],A=U[13],T=U[14],O=U[15];if(M[0].setComponents(k-i,l-g,D-G,O-r).normalize(),M[1].setComponents(k+i,l+g,D+G,O+r).normalize(),M[2].setComponents(k+x,l+u,D+Y,O+A).normalize(),M[3].setComponents(k-x,l-u,D-Y,O-A).normalize(),M[4].setComponents(k-n,l-e,D-c,O-T).normalize(),y===pU)M[5].setComponents(k+n,l+e,D+c,O+T).normalize();else{if(y!==bU)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+y);M[5].setComponents(n,e,c,T).normalize()}return this}intersectsObject(W){if(void 0!==W.boundingSphere)null===W.boundingSphere&&W.computeBoundingSphere(),Uk.copy(W.boundingSphere).applyMatrix4(W.matrixWorld);else{const y=W.geometry;null===y.boundingSphere&&y.computeBoundingSphere(),Uk.copy(y.boundingSphere).applyMatrix4(W.matrixWorld)}return this.intersectsSphere(Uk)}intersectsSprite(W){return Uk.center.set(0,0,0),Uk.radius=.7071067811865476,Uk.applyMatrix4(W.matrixWorld),this.intersectsSphere(Uk)}intersectsSphere(W){const y=this.planes,M=W.center,U=-W.radius;for(let W=0;W<6;W++)if(y[W].distanceToPoint(M)<U)return!1;return!0}intersectsBox(W){const y=this.planes;for(let M=0;M<6;M++){const U=y[M];if(ik.x=U.normal.x>0?W.max.x:W.min.x,ik.y=U.normal.y>0?W.max.y:W.min.y,ik.z=U.normal.z>0?W.max.z:W.min.z,U.distanceToPoint(ik)<0)return!1}return!0}containsPoint(W){const y=this.planes;for(let M=0;M<6;M++)if(y[M].distanceToPoint(W)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function nk(){let W=null,y=!1,M=null,U=null;function i(y,x){M(y,x),U=W.requestAnimationFrame(i)}return{start:function(){!0!==y&&null!==M&&(U=W.requestAnimationFrame(i),y=!0)},stop:function(){W.cancelAnimationFrame(U),y=!1},setAnimationLoop:function(W){M=W},setContext:function(y){W=y}}}function kk(W,y){const M=y.isWebGL2,U=new WeakMap;return{get:function(W){return W.isInterleavedBufferAttribute&&(W=W.data),U.get(W)},remove:function(y){y.isInterleavedBufferAttribute&&(y=y.data);const M=U.get(y);M&&(W.deleteBuffer(M.buffer),U.delete(y))},update:function(y,i){if(y.isGLBufferAttribute){const W=U.get(y);return void((!W||W.version<y.version)&&U.set(y,{buffer:y.buffer,type:y.type,bytesPerElement:y.elementSize,version:y.version}))}y.isInterleavedBufferAttribute&&(y=y.data);const x=U.get(y);void 0===x?U.set(y,function(y,U){const i=y.array,x=y.usage,n=W.createBuffer();let k;if(W.bindBuffer(U,n),W.bufferData(U,i,x),y.onUploadCallback(),i instanceof Float32Array)k=W.FLOAT;else if(i instanceof Uint16Array)if(y.isFloat16BufferAttribute){if(!M)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");k=W.HALF_FLOAT}else k=W.UNSIGNED_SHORT;else if(i instanceof Int16Array)k=W.SHORT;else if(i instanceof Uint32Array)k=W.UNSIGNED_INT;else if(i instanceof Int32Array)k=W.INT;else if(i instanceof Int8Array)k=W.BYTE;else if(i instanceof Uint8Array)k=W.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);k=W.UNSIGNED_BYTE}return{buffer:n,type:k,bytesPerElement:i.BYTES_PER_ELEMENT,version:y.version}}(y,i)):x.version<y.version&&(function(y,U,i){const x=U.array,n=U.updateRange;W.bindBuffer(i,y),-1===n.count?W.bufferSubData(i,0,x):(M?W.bufferSubData(i,n.offset*x.BYTES_PER_ELEMENT,x,n.offset,n.count):W.bufferSubData(i,n.offset*x.BYTES_PER_ELEMENT,x.subarray(n.offset,n.offset+n.count)),n.count=-1),U.onUploadCallback()}(x.buffer,y,i),x.version=y.version)}}}class gk extends Tn{constructor(W=1,y=1,M=1,U=1){super(),this.type="PlaneGeometry",this.parameters={width:W,height:y,widthSegments:M,heightSegments:U};const i=W/2,x=y/2,n=Math.floor(M),k=Math.floor(U),g=n+1,u=k+1,e=W/n,l=y/k,G=[],Y=[],c=[],D=[];for(let W=0;W<u;W++){const y=W*l-x;for(let M=0;M<g;M++){const U=M*e-i;Y.push(U,-y,0),c.push(0,0,1),D.push(M/n),D.push(1-W/k)}}for(let W=0;W<k;W++)for(let y=0;y<n;y++){const M=y+g*W,U=y+g*(W+1),i=y+1+g*(W+1),x=y+1+g*W;G.push(M,U,x),G.push(U,i,x)}this.setIndex(G),this.setAttribute("position",new un(Y,3)),this.setAttribute("normal",new un(c,3)),this.setAttribute("uv",new un(D,2))}copy(W){return super.copy(W),this.parameters=Object.assign({},W.parameters),this}static fromJSON(W){return new gk(W.width,W.height,W.widthSegments,W.heightSegments)}}const uk={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},ek={common:{diffuse:{value:new Bx(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new XU},alphaMap:{value:null},alphaMapTransform:{value:new XU},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new XU}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new XU}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new XU}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new XU},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new XU},normalScale:{value:new LU(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new XU},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new XU}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new XU}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new XU}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Bx(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Bx(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new XU},alphaTest:{value:0},uvTransform:{value:new XU}},sprite:{diffuse:{value:new Bx(16777215)},opacity:{value:1},center:{value:new LU(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new XU},alphaMap:{value:null},alphaMapTransform:{value:new XU},alphaTest:{value:0}}},lk={basic:{uniforms:$n([ek.common,ek.specularmap,ek.envmap,ek.aomap,ek.lightmap,ek.fog]),vertexShader:uk.meshbasic_vert,fragmentShader:uk.meshbasic_frag},lambert:{uniforms:$n([ek.common,ek.specularmap,ek.envmap,ek.aomap,ek.lightmap,ek.emissivemap,ek.bumpmap,ek.normalmap,ek.displacementmap,ek.fog,ek.lights,{emissive:{value:new Bx(0)}}]),vertexShader:uk.meshlambert_vert,fragmentShader:uk.meshlambert_frag},phong:{uniforms:$n([ek.common,ek.specularmap,ek.envmap,ek.aomap,ek.lightmap,ek.emissivemap,ek.bumpmap,ek.normalmap,ek.displacementmap,ek.fog,ek.lights,{emissive:{value:new Bx(0)},specular:{value:new Bx(1118481)},shininess:{value:30}}]),vertexShader:uk.meshphong_vert,fragmentShader:uk.meshphong_frag},standard:{uniforms:$n([ek.common,ek.envmap,ek.aomap,ek.lightmap,ek.emissivemap,ek.bumpmap,ek.normalmap,ek.displacementmap,ek.roughnessmap,ek.metalnessmap,ek.fog,ek.lights,{emissive:{value:new Bx(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:uk.meshphysical_vert,fragmentShader:uk.meshphysical_frag},toon:{uniforms:$n([ek.common,ek.aomap,ek.lightmap,ek.emissivemap,ek.bumpmap,ek.normalmap,ek.displacementmap,ek.gradientmap,ek.fog,ek.lights,{emissive:{value:new Bx(0)}}]),vertexShader:uk.meshtoon_vert,fragmentShader:uk.meshtoon_frag},matcap:{uniforms:$n([ek.common,ek.bumpmap,ek.normalmap,ek.displacementmap,ek.fog,{matcap:{value:null}}]),vertexShader:uk.meshmatcap_vert,fragmentShader:uk.meshmatcap_frag},points:{uniforms:$n([ek.points,ek.fog]),vertexShader:uk.points_vert,fragmentShader:uk.points_frag},dashed:{uniforms:$n([ek.common,ek.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:uk.linedashed_vert,fragmentShader:uk.linedashed_frag},depth:{uniforms:$n([ek.common,ek.displacementmap]),vertexShader:uk.depth_vert,fragmentShader:uk.depth_frag},normal:{uniforms:$n([ek.common,ek.bumpmap,ek.normalmap,ek.displacementmap,{opacity:{value:1}}]),vertexShader:uk.meshnormal_vert,fragmentShader:uk.meshnormal_frag},sprite:{uniforms:$n([ek.sprite,ek.fog]),vertexShader:uk.sprite_vert,fragmentShader:uk.sprite_frag},background:{uniforms:{uvTransform:{value:new XU},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:uk.background_vert,fragmentShader:uk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:uk.backgroundCube_vert,fragmentShader:uk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:uk.cube_vert,fragmentShader:uk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:uk.equirect_vert,fragmentShader:uk.equirect_frag},distanceRGBA:{uniforms:$n([ek.common,ek.displacementmap,{referencePosition:{value:new di},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:uk.distanceRGBA_vert,fragmentShader:uk.distanceRGBA_frag},shadow:{uniforms:$n([ek.lights,ek.fog,{color:{value:new Bx(0)},opacity:{value:1}}]),vertexShader:uk.shadow_vert,fragmentShader:uk.shadow_frag}};lk.physical={uniforms:$n([lk.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new XU},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new XU},clearcoatNormalScale:{value:new LU(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new XU},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new XU},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new XU},sheen:{value:0},sheenColor:{value:new Bx(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new XU},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new XU},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new XU},transmissionSamplerSize:{value:new LU},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new XU},attenuationDistance:{value:0},attenuationColor:{value:new Bx(0)},specularColor:{value:new Bx(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new XU},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new XU},anisotropyVector:{value:new LU},anisotropyMap:{value:null},anisotropyMapTransform:{value:new XU}}]),vertexShader:uk.meshphysical_vert,fragmentShader:uk.meshphysical_frag};const Gk={r:0,b:0,g:0};function Yk(W,y,M,U,i,x,n){const k=new Bx(0);let g,u,e=!0===x?0:1,l=null,G=0,Y=null;function c(y,M){y.getRGB(Gk,an(W)),U.buffers.color.setClear(Gk.r,Gk.g,Gk.b,M,n)}return{getClearColor:function(){return k},setClearColor:function(W,y=1){k.set(W),e=y,c(k,e)},getClearAlpha:function(){return e},setClearAlpha:function(W){e=W,c(k,e)},render:function(x,D){let r=!1,A=!0===D.isScene?D.background:null;switch(A&&A.isTexture&&(A=(D.backgroundBlurriness>0?M:y).get(A)),null===A?c(k,e):A&&A.isColor&&(c(A,1),r=!0),W.xr.getEnvironmentBlendMode()){case"opaque":r=!0;break;case"additive":U.buffers.color.setClear(0,0,0,1,n),r=!0;break;case"alpha-blend":U.buffers.color.setClear(0,0,0,0,n),r=!0}(W.autoClear||r)&&W.clear(W.autoClearColor,W.autoClearDepth,W.autoClearStencil),A&&(A.isCubeTexture||A.mapping===ey)?(void 0===u&&(u=new En(new fn(1,1,1),new Ln({name:"BackgroundCubeMaterial",uniforms:Vn(lk.backgroundCube.uniforms),vertexShader:lk.backgroundCube.vertexShader,fragmentShader:lk.backgroundCube.fragmentShader,side:AW,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(W,y,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=A,u.material.uniforms.flipEnvMap.value=A.isCubeTexture&&!1===A.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,u.material.toneMapped=A.colorSpace!==BM,l===A&&G===A.version&&Y===W.toneMapping||(u.material.needsUpdate=!0,l=A,G=A.version,Y=W.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null)):A&&A.isTexture&&(void 0===g&&(g=new En(new gk(2,2),new Ln({name:"BackgroundMaterial",uniforms:Vn(lk.background.uniforms),vertexShader:lk.background.vertexShader,fragmentShader:lk.background.fragmentShader,side:rW,depthTest:!1,depthWrite:!1,fog:!1})),g.geometry.deleteAttribute("normal"),Object.defineProperty(g.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(g)),g.material.uniforms.t2D.value=A,g.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,g.material.toneMapped=A.colorSpace!==BM,!0===A.matrixAutoUpdate&&A.updateMatrix(),g.material.uniforms.uvTransform.value.copy(A.matrix),l===A&&G===A.version&&Y===W.toneMapping||(g.material.needsUpdate=!0,l=A,G=A.version,Y=W.toneMapping),g.layers.enableAll(),x.unshift(g,g.geometry,g.material,0,0,null))}}}function ck(W,y,M,U){const i=W.getParameter(W.MAX_VERTEX_ATTRIBS),x=U.isWebGL2?null:y.get("OES_vertex_array_object"),n=U.isWebGL2||null!==x,k={},g=Y(null);let u=g,e=!1;function l(y){return U.isWebGL2?W.bindVertexArray(y):x.bindVertexArrayOES(y)}function G(y){return U.isWebGL2?W.deleteVertexArray(y):x.deleteVertexArrayOES(y)}function Y(W){const y=[],M=[],U=[];for(let W=0;W<i;W++)y[W]=0,M[W]=0,U[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:y,enabledAttributes:M,attributeDivisors:U,object:W,attributes:{},index:null}}function c(){const W=u.newAttributes;for(let y=0,M=W.length;y<M;y++)W[y]=0}function D(W){r(W,0)}function r(M,i){const x=u.newAttributes,n=u.enabledAttributes,k=u.attributeDivisors;x[M]=1,0===n[M]&&(W.enableVertexAttribArray(M),n[M]=1),k[M]!==i&&((U.isWebGL2?W:y.get("ANGLE_instanced_arrays"))[U.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](M,i),k[M]=i)}function A(){const y=u.newAttributes,M=u.enabledAttributes;for(let U=0,i=M.length;U<i;U++)M[U]!==y[U]&&(W.disableVertexAttribArray(U),M[U]=0)}function T(y,M,U,i,x,n,k){!0===k?W.vertexAttribIPointer(y,M,U,x,n):W.vertexAttribPointer(y,M,U,i,x,n)}function O(){h(),e=!0,u!==g&&(u=g,l(u.object))}function h(){g.geometry=null,g.program=null,g.wireframe=!1}return{setup:function(i,g,G,O,h){let S=!1;if(n){const y=function(y,M,i){const n=!0===i.wireframe;let g=k[y.id];void 0===g&&(g={},k[y.id]=g);let u=g[M.id];void 0===u&&(u={},g[M.id]=u);let e=u[n];return void 0===e&&(e=Y(U.isWebGL2?W.createVertexArray():x.createVertexArrayOES()),u[n]=e),e}(O,G,g);u!==y&&(u=y,l(u.object)),S=function(W,y,M,U){const i=u.attributes,x=y.attributes;let n=0;const k=M.getAttributes();for(const y in k)if(k[y].location>=0){const M=i[y];let U=x[y];if(void 0===U&&("instanceMatrix"===y&&W.instanceMatrix&&(U=W.instanceMatrix),"instanceColor"===y&&W.instanceColor&&(U=W.instanceColor)),void 0===M)return!0;if(M.attribute!==U)return!0;if(U&&M.data!==U.data)return!0;n++}return u.attributesNum!==n||u.index!==U}(i,O,G,h),S&&function(W,y,M,U){const i={},x=y.attributes;let n=0;const k=M.getAttributes();for(const y in k)if(k[y].location>=0){let M=x[y];void 0===M&&("instanceMatrix"===y&&W.instanceMatrix&&(M=W.instanceMatrix),"instanceColor"===y&&W.instanceColor&&(M=W.instanceColor));const U={};U.attribute=M,M&&M.data&&(U.data=M.data),i[y]=U,n++}u.attributes=i,u.attributesNum=n,u.index=U}(i,O,G,h)}else{const W=!0===g.wireframe;u.geometry===O.id&&u.program===G.id&&u.wireframe===W||(u.geometry=O.id,u.program=G.id,u.wireframe=W,S=!0)}null!==h&&M.update(h,W.ELEMENT_ARRAY_BUFFER),(S||e)&&(e=!1,function(i,x,n,k){if(!1===U.isWebGL2&&(i.isInstancedMesh||k.isInstancedBufferGeometry)&&null===y.get("ANGLE_instanced_arrays"))return;c();const g=k.attributes,u=n.getAttributes(),e=x.defaultAttributeValues;for(const y in u){const x=u[y];if(x.location>=0){let n=g[y];if(void 0===n&&("instanceMatrix"===y&&i.instanceMatrix&&(n=i.instanceMatrix),"instanceColor"===y&&i.instanceColor&&(n=i.instanceColor)),void 0!==n){const y=n.normalized,g=n.itemSize,u=M.get(n);if(void 0===u)continue;const e=u.buffer,l=u.type,G=u.bytesPerElement,Y=!0===U.isWebGL2&&(l===W.INT||l===W.UNSIGNED_INT||n.gpuType===py);if(n.isInterleavedBufferAttribute){const M=n.data,U=M.stride,u=n.offset;if(M.isInstancedInterleavedBuffer){for(let W=0;W<x.locationSize;W++)r(x.location+W,M.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===k._maxInstanceCount&&(k._maxInstanceCount=M.meshPerAttribute*M.count)}else for(let W=0;W<x.locationSize;W++)D(x.location+W);W.bindBuffer(W.ARRAY_BUFFER,e);for(let W=0;W<x.locationSize;W++)T(x.location+W,g/x.locationSize,l,y,U*G,(u+g/x.locationSize*W)*G,Y)}else{if(n.isInstancedBufferAttribute){for(let W=0;W<x.locationSize;W++)r(x.location+W,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===k._maxInstanceCount&&(k._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let W=0;W<x.locationSize;W++)D(x.location+W);W.bindBuffer(W.ARRAY_BUFFER,e);for(let W=0;W<x.locationSize;W++)T(x.location+W,g/x.locationSize,l,y,g*G,g/x.locationSize*W*G,Y)}}else if(void 0!==e){const M=e[y];if(void 0!==M)switch(M.length){case 2:W.vertexAttrib2fv(x.location,M);break;case 3:W.vertexAttrib3fv(x.location,M);break;case 4:W.vertexAttrib4fv(x.location,M);break;default:W.vertexAttrib1fv(x.location,M)}}}}A()}(i,g,G,O),null!==h&&W.bindBuffer(W.ELEMENT_ARRAY_BUFFER,M.get(h).buffer))},reset:O,resetDefaultState:h,dispose:function(){O();for(const W in k){const y=k[W];for(const W in y){const M=y[W];for(const W in M)G(M[W].object),delete M[W];delete y[W]}delete k[W]}},releaseStatesOfGeometry:function(W){if(void 0===k[W.id])return;const y=k[W.id];for(const W in y){const M=y[W];for(const W in M)G(M[W].object),delete M[W];delete y[W]}delete k[W.id]},releaseStatesOfProgram:function(W){for(const y in k){const M=k[y];if(void 0===M[W.id])continue;const U=M[W.id];for(const W in U)G(U[W].object),delete U[W];delete M[W.id]}},initAttributes:c,enableAttribute:D,disableUnusedAttributes:A}}function Dk(W,y,M,U){const i=U.isWebGL2;let x;this.setMode=function(W){x=W},this.render=function(y,U){W.drawArrays(x,y,U),M.update(U,x,1)},this.renderInstances=function(U,n,k){if(0===k)return;let g,u;if(i)g=W,u="drawArraysInstanced";else if(g=y.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===g)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");g[u](x,U,n,k),M.update(n,x,k)}}function rk(W,y,M){let U;function i(y){if("highp"===y){if(W.getShaderPrecisionFormat(W.VERTEX_SHADER,W.HIGH_FLOAT).precision>0&&W.getShaderPrecisionFormat(W.FRAGMENT_SHADER,W.HIGH_FLOAT).precision>0)return"highp";y="mediump"}return"mediump"===y&&W.getShaderPrecisionFormat(W.VERTEX_SHADER,W.MEDIUM_FLOAT).precision>0&&W.getShaderPrecisionFormat(W.FRAGMENT_SHADER,W.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const x="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===W.constructor.name;let n=void 0!==M.precision?M.precision:"highp";const k=i(n);k!==n&&(console.warn("THREE.WebGLRenderer:",n,"not supported, using",k,"instead."),n=k);const g=x||y.has("WEBGL_draw_buffers"),u=!0===M.logarithmicDepthBuffer,e=W.getParameter(W.MAX_TEXTURE_IMAGE_UNITS),l=W.getParameter(W.MAX_VERTEX_TEXTURE_IMAGE_UNITS),G=W.getParameter(W.MAX_TEXTURE_SIZE),Y=W.getParameter(W.MAX_CUBE_MAP_TEXTURE_SIZE),c=W.getParameter(W.MAX_VERTEX_ATTRIBS),D=W.getParameter(W.MAX_VERTEX_UNIFORM_VECTORS),r=W.getParameter(W.MAX_VARYING_VECTORS),A=W.getParameter(W.MAX_FRAGMENT_UNIFORM_VECTORS),T=l>0,O=x||y.has("OES_texture_float");return{isWebGL2:x,drawBuffers:g,getMaxAnisotropy:function(){if(void 0!==U)return U;if(!0===y.has("EXT_texture_filter_anisotropic")){const M=y.get("EXT_texture_filter_anisotropic");U=W.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else U=0;return U},getMaxPrecision:i,precision:n,logarithmicDepthBuffer:u,maxTextures:e,maxVertexTextures:l,maxTextureSize:G,maxCubemapSize:Y,maxAttributes:c,maxVertexUniforms:D,maxVaryings:r,maxFragmentUniforms:A,vertexTextures:T,floatFragmentTextures:O,floatVertexTextures:T&&O,maxSamples:x?W.getParameter(W.MAX_SAMPLES):0}}function Ak(W){const y=this;let M=null,U=0,i=!1,x=!1;const n=new Mk,k=new XU,g={value:null,needsUpdate:!1};function u(W,M,U,i){const x=null!==W?W.length:0;let u=null;if(0!==x){if(u=g.value,!0!==i||null===u){const y=U+4*x,i=M.matrixWorldInverse;k.getNormalMatrix(i),(null===u||u.length<y)&&(u=new Float32Array(y));for(let y=0,M=U;y!==x;++y,M+=4)n.copy(W[y]).applyMatrix4(i,k),n.normal.toArray(u,M),u[M+3]=n.constant}g.value=u,g.needsUpdate=!0}return y.numPlanes=x,y.numIntersection=0,u}this.uniform=g,this.numPlanes=0,this.numIntersection=0,this.init=function(W,y){const M=0!==W.length||y||0!==U||i;return i=y,U=W.length,M},this.beginShadows=function(){x=!0,u(null)},this.endShadows=function(){x=!1},this.setGlobalState=function(W,y){M=u(W,y,0)},this.setState=function(n,k,e){const l=n.clippingPlanes,G=n.clipIntersection,Y=n.clipShadows,c=W.get(n);if(!i||null===l||0===l.length||x&&!Y)x?u(null):(g.value!==M&&(g.value=M,g.needsUpdate=U>0),y.numPlanes=U,y.numIntersection=0);else{const W=x?0:U,y=4*W;let i=c.clippingState||null;g.value=i,i=u(l,k,y,e);for(let W=0;W!==y;++W)i[W]=M[W];c.clippingState=i,this.numIntersection=G?this.numPlanes:0,this.numPlanes+=W}}}function Tk(W){let y=new WeakMap;function M(W,y){return y===gy?W.mapping=ny:y===uy&&(W.mapping=ky),W}function U(W){const M=W.target;M.removeEventListener("dispose",U);const i=y.get(M);void 0!==i&&(y.delete(M),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const x=i.mapping;if(x===gy||x===uy){if(y.has(i))return M(y.get(i).texture,i.mapping);{const x=i.image;if(x&&x.height>0){const n=new Cn(x.height/2);return n.fromEquirectangularTexture(W,i),y.set(i,n),i.addEventListener("dispose",U),M(n.texture,i.mapping)}return null}}}return i},dispose:function(){y=new WeakMap}}}class Ok extends Xn{constructor(W=-1,y=1,M=1,U=-1,i=.1,x=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=W,this.right=y,this.top=M,this.bottom=U,this.near=i,this.far=x,this.updateProjectionMatrix()}copy(W,y){return super.copy(W,y),this.left=W.left,this.right=W.right,this.top=W.top,this.bottom=W.bottom,this.near=W.near,this.far=W.far,this.zoom=W.zoom,this.view=null===W.view?null:Object.assign({},W.view),this}setViewOffset(W,y,M,U,i,x){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=W,this.view.fullHeight=y,this.view.offsetX=M,this.view.offsetY=U,this.view.width=i,this.view.height=x,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const W=(this.right-this.left)/(2*this.zoom),y=(this.top-this.bottom)/(2*this.zoom),M=(this.right+this.left)/2,U=(this.top+this.bottom)/2;let i=M-W,x=M+W,n=U+y,k=U-y;if(null!==this.view&&this.view.enabled){const W=(this.right-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=W*this.view.offsetX,x=i+W*this.view.width,n-=y*this.view.offsetY,k=n-y*this.view.height}this.projectionMatrix.makeOrthographic(i,x,n,k,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(W){const y=super.toJSON(W);return y.object.zoom=this.zoom,y.object.left=this.left,y.object.right=this.right,y.object.top=this.top,y.object.bottom=this.bottom,y.object.near=this.near,y.object.far=this.far,null!==this.view&&(y.object.view=Object.assign({},this.view)),y}}const hk=4,Sk=[.125,.215,.35,.446,.526,.582],ok=20,dk=new Ok,qk=new Bx;let sk=null;const Nk=(1+Math.sqrt(5))/2,_k=1/Nk,pk=[new di(1,1,1),new di(-1,1,1),new di(1,1,-1),new di(-1,1,-1),new di(0,Nk,_k),new di(0,Nk,-_k),new di(_k,0,Nk),new di(-_k,0,Nk),new di(Nk,_k,0),new di(-Nk,_k,0)];class bk{constructor(W){this._renderer=W,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(W,y=0,M=.1,U=100){sk=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(W,M,U,i),y>0&&this._blur(i,0,0,y),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(W,y=null){return this._fromTexture(W,y)}fromCubemap(W,y=null){return this._fromTexture(W,y)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Pk(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Kk(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(W){this._lodMax=Math.floor(Math.log2(W)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let W=0;W<this._lodPlanes.length;W++)this._lodPlanes[W].dispose()}_cleanup(W){this._renderer.setRenderTarget(sk),W.scissorTest=!1,zk(W,0,0,W.width,W.height)}_fromTexture(W,y){W.mapping===ny||W.mapping===ky?this._setSize(0===W.image.length?16:W.image[0].width||W.image[0].image.width):this._setSize(W.image.width/4),sk=this._renderer.getRenderTarget();const M=y||this._allocateTargets();return this._textureToCubeUV(W,M),this._applyPMREM(M),this._cleanup(M),M}_allocateTargets(){const W=3*Math.max(this._cubeSize,16*7),y=4*this._cubeSize,M={magFilter:Oy,minFilter:Oy,generateMipmaps:!1,type:zy,format:Ey,colorSpace:vM,depthBuffer:!1},U=mk(W,y,M);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==W||this._pingPongRenderTarget.height!==y){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=mk(W,y,M);const{_lodMax:U}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(W){const y=[],M=[],U=[];let i=W;const x=W-hk+1+Sk.length;for(let n=0;n<x;n++){const x=Math.pow(2,i);M.push(x);let k=1/x;n>W-hk?k=Sk[n-W+hk-1]:0===n&&(k=0),U.push(k);const g=1/(x-2),u=-g,e=1+g,l=[u,u,e,u,e,e,u,u,e,e,u,e],G=6,Y=6,c=3,D=2,r=1,A=new Float32Array(c*Y*G),T=new Float32Array(D*Y*G),O=new Float32Array(r*Y*G);for(let W=0;W<G;W++){const y=W%3*2/3-1,M=W>2?0:-1,U=[y,M,0,y+2/3,M,0,y+2/3,M+1,0,y,M,0,y+2/3,M+1,0,y,M+1,0];A.set(U,c*Y*W),T.set(l,D*Y*W);const i=[W,W,W,W,W,W];O.set(i,r*Y*W)}const h=new Tn;h.setAttribute("position",new Qx(A,c)),h.setAttribute("uv",new Qx(T,D)),h.setAttribute("faceIndex",new Qx(O,r)),y.push(h),i>hk&&i--}return{lodPlanes:y,sizeLods:M,sigmas:U}}(U)),this._blurMaterial=function(W,y,M){const U=new Float32Array(ok),i=new di(0,1,0);return new Ln({name:"SphericalGaussianBlur",defines:{n:ok,CUBEUV_TEXEL_WIDTH:1/y,CUBEUV_TEXEL_HEIGHT:1/M,CUBEUV_MAX_MIP:`${W}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:U},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Rk(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t`,blending:hW,depthTest:!1,depthWrite:!1})}(U,W,y)}return U}_compileMaterial(W){const y=new En(this._lodPlanes[0],W);this._renderer.compile(y,dk)}_sceneToCubeUV(W,y,M,U){const i=new wn(90,1,y,M),x=[1,-1,1,1,1,1],n=[1,1,1,-1,-1,-1],k=this._renderer,g=k.autoClear,u=k.toneMapping;k.getClearColor(qk),k.toneMapping=QW,k.autoClear=!1;const e=new Lx({name:"PMREM.Background",side:AW,depthWrite:!1,depthTest:!1}),l=new En(new fn,e);let G=!1;const Y=W.background;Y?Y.isColor&&(e.color.copy(Y),W.background=null,G=!0):(e.color.copy(qk),G=!0);for(let y=0;y<6;y++){const M=y%3;0===M?(i.up.set(0,x[y],0),i.lookAt(n[y],0,0)):1===M?(i.up.set(0,0,x[y]),i.lookAt(0,n[y],0)):(i.up.set(0,x[y],0),i.lookAt(0,0,n[y]));const g=this._cubeSize;zk(U,M*g,y>2?g:0,g,g),k.setRenderTarget(U),G&&k.render(l,i),k.render(W,i)}l.geometry.dispose(),l.material.dispose(),k.toneMapping=u,k.autoClear=g,W.background=Y}_textureToCubeUV(W,y){const M=this._renderer,U=W.mapping===ny||W.mapping===ky;U?(null===this._cubemapMaterial&&(this._cubemapMaterial=Pk()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===W.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Kk());const i=U?this._cubemapMaterial:this._equirectMaterial,x=new En(this._lodPlanes[0],i);i.uniforms["envMap"].value=W;const n=this._cubeSize;zk(y,0,0,3*n,2*n),M.setRenderTarget(y),M.render(x,dk)}_applyPMREM(W){const y=this._renderer,M=y.autoClear;y.autoClear=!1;for(let y=1;y<this._lodPlanes.length;y++){const M=Math.sqrt(this._sigmas[y]*this._sigmas[y]-this._sigmas[y-1]*this._sigmas[y-1]),U=pk[(y-1)%pk.length];this._blur(W,y-1,y,M,U)}y.autoClear=M}_blur(W,y,M,U,i){const x=this._pingPongRenderTarget;this._halfBlur(W,x,y,M,U,"latitudinal",i),this._halfBlur(x,W,M,M,U,"longitudinal",i)}_halfBlur(W,y,M,U,i,x,n){const k=this._renderer,g=this._blurMaterial;"latitudinal"!==x&&"longitudinal"!==x&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new En(this._lodPlanes[U],g),e=g.uniforms,l=this._sizeLods[M]-1,G=isFinite(i)?Math.PI/(2*l):2*Math.PI/(2*ok-1),Y=i/G,c=isFinite(i)?1+Math.floor(3*Y):ok;c>ok&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${c} samples when the maximum is set to ${ok}`);const D=[];let r=0;for(let W=0;W<ok;++W){const y=W/Y,M=Math.exp(-y*y/2);D.push(M),0===W?r+=M:W<c&&(r+=2*M)}for(let W=0;W<D.length;W++)D[W]=D[W]/r;e["envMap"].value=W.texture,e["samples"].value=c,e["weights"].value=D,e["latitudinal"].value="latitudinal"===x,n&&(e["poleAxis"].value=n);const{_lodMax:A}=this;e["dTheta"].value=G,e["mipInt"].value=A-M;const T=this._sizeLods[U];zk(y,3*T*(U>A-hk?U-A+hk:0),4*(this._cubeSize-T),3*T,2*T),k.setRenderTarget(y),k.render(u,dk)}}function mk(W,y,M){const U=new ri(W,y,M);return U.texture.mapping=ey,U.texture.name="PMREM.cubeUv",U.scissorTest=!0,U}function zk(W,y,M,U,i){W.viewport.set(y,M,U,i),W.scissor.set(y,M,U,i)}function Kk(){return new Ln({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Rk(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t`,blending:hW,depthTest:!1,depthWrite:!1})}function Pk(){return new Ln({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Rk(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t`,blending:hW,depthTest:!1,depthWrite:!1})}function Rk(){return`\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t`}function Ik(W){let y=new WeakMap,M=null;function U(W){const M=W.target;M.removeEventListener("dispose",U);const i=y.get(M);void 0!==i&&(y.delete(M),i.dispose())}return{get:function(i){if(i&&i.isTexture){const x=i.mapping,n=x===gy||x===uy,k=x===ny||x===ky;if(n||k){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let U=y.get(i);return null===M&&(M=new bk(W)),U=n?M.fromEquirectangular(i,U):M.fromCubemap(i,U),y.set(i,U),U.texture}if(y.has(i))return y.get(i).texture;{const x=i.image;if(n&&x&&x.height>0||k&&x&&function(W){let y=0;const M=6;for(let U=0;U<M;U++)void 0!==W[U]&&y++;return y===M}(x)){null===M&&(M=new bk(W));const x=n?M.fromEquirectangular(i):M.fromCubemap(i);return y.set(i,x),i.addEventListener("dispose",U),x.texture}return null}}}return i},dispose:function(){y=new WeakMap,null!==M&&(M.dispose(),M=null)}}}function Ek(W){const y={};function M(M){if(void 0!==y[M])return y[M];let U;switch(M){case"WEBGL_depth_texture":U=W.getExtension("WEBGL_depth_texture")||W.getExtension("MOZ_WEBGL_depth_texture")||W.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":U=W.getExtension("EXT_texture_filter_anisotropic")||W.getExtension("MOZ_EXT_texture_filter_anisotropic")||W.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":U=W.getExtension("WEBGL_compressed_texture_s3tc")||W.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||W.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":U=W.getExtension("WEBGL_compressed_texture_pvrtc")||W.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:U=W.getExtension(M)}return y[M]=U,U}return{has:function(W){return null!==M(W)},init:function(W){W.isWebGL2?M("EXT_color_buffer_float"):(M("WEBGL_depth_texture"),M("OES_texture_float"),M("OES_texture_half_float"),M("OES_texture_half_float_linear"),M("OES_standard_derivatives"),M("OES_element_index_uint"),M("OES_vertex_array_object"),M("ANGLE_instanced_arrays")),M("OES_texture_float_linear"),M("EXT_color_buffer_half_float"),M("WEBGL_multisampled_render_to_texture")},get:function(W){const y=M(W);return null===y&&console.warn("THREE.WebGLRenderer: "+W+" extension not supported."),y}}}function Zk(W,y,M,U){const i={},x=new WeakMap;function n(W){const k=W.target;null!==k.index&&y.remove(k.index);for(const W in k.attributes)y.remove(k.attributes[W]);for(const W in k.morphAttributes){const M=k.morphAttributes[W];for(let W=0,U=M.length;W<U;W++)y.remove(M[W])}k.removeEventListener("dispose",n),delete i[k.id];const g=x.get(k);g&&(y.remove(g),x.delete(k)),U.releaseStatesOfGeometry(k),!0===k.isInstancedBufferGeometry&&delete k._maxInstanceCount,M.memory.geometries--}function k(W){const M=[],U=W.index,i=W.attributes.position;let n=0;if(null!==U){const W=U.array;n=U.version;for(let y=0,U=W.length;y<U;y+=3){const U=W[y+0],i=W[y+1],x=W[y+2];M.push(U,i,i,x,x,U)}}else{if(void 0===i)return;{const W=i.array;n=i.version;for(let y=0,U=W.length/3-1;y<U;y+=3){const W=y+0,U=y+1,i=y+2;M.push(W,U,U,i,i,W)}}}const k=new(FU(M)?kn:xn)(M,1);k.version=n;const g=x.get(W);g&&y.remove(g),x.set(W,k)}return{get:function(W,y){return!0===i[y.id]||(y.addEventListener("dispose",n),i[y.id]=!0,M.memory.geometries++),y},update:function(M){const U=M.attributes;for(const M in U)y.update(U[M],W.ARRAY_BUFFER);const i=M.morphAttributes;for(const M in i){const U=i[M];for(let M=0,i=U.length;M<i;M++)y.update(U[M],W.ARRAY_BUFFER)}},getWireframeAttribute:function(W){const y=x.get(W);if(y){const M=W.index;null!==M&&y.version<M.version&&k(W)}else k(W);return x.get(W)}}}function fk(W,y,M,U){const i=U.isWebGL2;let x,n,k;this.setMode=function(W){x=W},this.setIndex=function(W){n=W.type,k=W.bytesPerElement},this.render=function(y,U){W.drawElements(x,U,n,y*k),M.update(U,x,1)},this.renderInstances=function(U,g,u){if(0===u)return;let e,l;if(i)e=W,l="drawElementsInstanced";else if(e=y.get("ANGLE_instanced_arrays"),l="drawElementsInstancedANGLE",null===e)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");e[l](x,g,n,U*k,u),M.update(g,x,u)}}function Vk(W){const y={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:y,programs:null,autoReset:!0,reset:function(){y.calls=0,y.triangles=0,y.points=0,y.lines=0},update:function(M,U,i){switch(y.calls++,U){case W.TRIANGLES:y.triangles+=i*(M/3);break;case W.LINES:y.lines+=i*(M/2);break;case W.LINE_STRIP:y.lines+=i*(M-1);break;case W.LINE_LOOP:y.lines+=i*M;break;case W.POINTS:y.points+=i*M;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",U)}}}}function $k(W,y){return W[0]-y[0]}function ak(W,y){return Math.abs(y[1])-Math.abs(W[1])}function Hk(W,y,M){const U={},i=new Float32Array(8),x=new WeakMap,n=new ci,k=[];for(let W=0;W<8;W++)k[W]=[W,0];return{update:function(g,u,e){const l=g.morphTargetInfluences;if(!0===y.isWebGL2){const G=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,Y=void 0!==G?G.length:0;let c=x.get(u);if(void 0===c||c.count!==Y){void 0!==c&&c.texture.dispose();const A=void 0!==u.morphAttributes.position,T=void 0!==u.morphAttributes.normal,O=void 0!==u.morphAttributes.color,h=u.morphAttributes.position||[],S=u.morphAttributes.normal||[],o=u.morphAttributes.color||[];let d=0;!0===A&&(d=1),!0===T&&(d=2),!0===O&&(d=3);let q=u.attributes.position.count*d,s=1;q>y.maxTextureSize&&(s=Math.ceil(q/y.maxTextureSize),q=y.maxTextureSize);const N=new Float32Array(q*s*4*Y),_=new Ai(N,q,s,Y);_.type=my,_.needsUpdate=!0;const p=4*d;for(let m=0;m<Y;m++){const z=h[m],K=S[m],P=o[m],R=q*s*4*m;for(let I=0;I<z.count;I++){const E=I*p;!0===A&&(n.fromBufferAttribute(z,I),N[R+E+0]=n.x,N[R+E+1]=n.y,N[R+E+2]=n.z,N[R+E+3]=0),!0===T&&(n.fromBufferAttribute(K,I),N[R+E+4]=n.x,N[R+E+5]=n.y,N[R+E+6]=n.z,N[R+E+7]=0),!0===O&&(n.fromBufferAttribute(P,I),N[R+E+8]=n.x,N[R+E+9]=n.y,N[R+E+10]=n.z,N[R+E+11]=4===P.itemSize?n.w:1)}}function b(){_.dispose(),x.delete(u),u.removeEventListener("dispose",b)}c={count:Y,texture:_,size:new LU(q,s)},x.set(u,c),u.addEventListener("dispose",b)}let D=0;for(let Z=0;Z<l.length;Z++)D+=l[Z];const r=u.morphTargetsRelative?1:1-D;e.getUniforms().setValue(W,"morphTargetBaseInfluence",r),e.getUniforms().setValue(W,"morphTargetInfluences",l),e.getUniforms().setValue(W,"morphTargetsTexture",c.texture,M),e.getUniforms().setValue(W,"morphTargetsTextureSize",c.size)}else{const f=void 0===l?0:l.length;let V=U[u.id];if(void 0===V||V.length!==f){V=[];for(let v=0;v<f;v++)V[v]=[v,0];U[u.id]=V}for(let L=0;L<f;L++){const X=V[L];X[0]=L,X[1]=l[L]}V.sort(ak);for(let w=0;w<8;w++)w<f&&V[w][1]?(k[w][0]=V[w][0],k[w][1]=V[w][1]):(k[w][0]=Number.MAX_SAFE_INTEGER,k[w][1]=0);k.sort($k);const $=u.morphAttributes.position,a=u.morphAttributes.normal;let H=0;for(let F=0;F<8;F++){const t=k[F],J=t[0],j=t[1];J!==Number.MAX_SAFE_INTEGER&&j?($&&u.getAttribute("morphTarget"+F)!==$[J]&&u.setAttribute("morphTarget"+F,$[J]),a&&u.getAttribute("morphNormal"+F)!==a[J]&&u.setAttribute("morphNormal"+F,a[J]),i[F]=j,H+=j):($&&!0===u.hasAttribute("morphTarget"+F)&&u.deleteAttribute("morphTarget"+F),a&&!0===u.hasAttribute("morphNormal"+F)&&u.deleteAttribute("morphNormal"+F),i[F]=0)}const B=u.morphTargetsRelative?1:1-H;e.getUniforms().setValue(W,"morphTargetBaseInfluence",B),e.getUniforms().setValue(W,"morphTargetInfluences",i)}}}}function Bk(W,y,M,U){let i=new WeakMap;function x(W){const y=W.target;y.removeEventListener("dispose",x),M.remove(y.instanceMatrix),null!==y.instanceColor&&M.remove(y.instanceColor)}return{update:function(n){const k=U.render.frame,g=n.geometry,u=y.get(n,g);if(i.get(u)!==k&&(y.update(u),i.set(u,k)),n.isInstancedMesh&&(!1===n.hasEventListener("dispose",x)&&n.addEventListener("dispose",x),i.get(n)!==k&&(M.update(n.instanceMatrix,W.ARRAY_BUFFER),null!==n.instanceColor&&M.update(n.instanceColor,W.ARRAY_BUFFER),i.set(n,k))),n.isSkinnedMesh){const W=n.skeleton;i.get(W)!==k&&(W.update(),i.set(W,k))}return u},dispose:function(){i=new WeakMap}}}const vk=new Yi,Lk=new Ai,Xk=new Oi,wk=new jn,Fk=[],tk=[],Jk=new Float32Array(16),jk=new Float32Array(9),Ck=new Float32Array(4);function Qk(W,y,M){const U=W[0];if(U<=0||U>0)return W;const i=y*M;let x=Fk[i];if(void 0===x&&(x=new Float32Array(i),Fk[i]=x),0!==y){U.toArray(x,0);for(let U=1,i=0;U!==y;++U)i+=M,W[U].toArray(x,i)}return x}function Wg(W,y){if(W.length!==y.length)return!1;for(let M=0,U=W.length;M<U;M++)if(W[M]!==y[M])return!1;return!0}function yg(W,y){for(let M=0,U=y.length;M<U;M++)W[M]=y[M]}function Mg(W,y){let M=tk[y];void 0===M&&(M=new Int32Array(y),tk[y]=M);for(let U=0;U!==y;++U)M[U]=W.allocateTextureUnit();return M}function Ug(W,y){const M=this.cache;M[0]!==y&&(W.uniform1f(this.addr,y),M[0]=y)}function ig(W,y){const M=this.cache;if(void 0!==y.x)M[0]===y.x&&M[1]===y.y||(W.uniform2f(this.addr,y.x,y.y),M[0]=y.x,M[1]=y.y);else{if(Wg(M,y))return;W.uniform2fv(this.addr,y),yg(M,y)}}function xg(W,y){const M=this.cache;if(void 0!==y.x)M[0]===y.x&&M[1]===y.y&&M[2]===y.z||(W.uniform3f(this.addr,y.x,y.y,y.z),M[0]=y.x,M[1]=y.y,M[2]=y.z);else if(void 0!==y.r)M[0]===y.r&&M[1]===y.g&&M[2]===y.b||(W.uniform3f(this.addr,y.r,y.g,y.b),M[0]=y.r,M[1]=y.g,M[2]=y.b);else{if(Wg(M,y))return;W.uniform3fv(this.addr,y),yg(M,y)}}function ng(W,y){const M=this.cache;if(void 0!==y.x)M[0]===y.x&&M[1]===y.y&&M[2]===y.z&&M[3]===y.w||(W.uniform4f(this.addr,y.x,y.y,y.z,y.w),M[0]=y.x,M[1]=y.y,M[2]=y.z,M[3]=y.w);else{if(Wg(M,y))return;W.uniform4fv(this.addr,y),yg(M,y)}}function kg(W,y){const M=this.cache,U=y.elements;if(void 0===U){if(Wg(M,y))return;W.uniformMatrix2fv(this.addr,!1,y),yg(M,y)}else{if(Wg(M,U))return;Ck.set(U),W.uniformMatrix2fv(this.addr,!1,Ck),yg(M,U)}}function gg(W,y){const M=this.cache,U=y.elements;if(void 0===U){if(Wg(M,y))return;W.uniformMatrix3fv(this.addr,!1,y),yg(M,y)}else{if(Wg(M,U))return;jk.set(U),W.uniformMatrix3fv(this.addr,!1,jk),yg(M,U)}}function ug(W,y){const M=this.cache,U=y.elements;if(void 0===U){if(Wg(M,y))return;W.uniformMatrix4fv(this.addr,!1,y),yg(M,y)}else{if(Wg(M,U))return;Jk.set(U),W.uniformMatrix4fv(this.addr,!1,Jk),yg(M,U)}}function eg(W,y){const M=this.cache;M[0]!==y&&(W.uniform1i(this.addr,y),M[0]=y)}function lg(W,y){const M=this.cache;if(void 0!==y.x)M[0]===y.x&&M[1]===y.y||(W.uniform2i(this.addr,y.x,y.y),M[0]=y.x,M[1]=y.y);else{if(Wg(M,y))return;W.uniform2iv(this.addr,y),yg(M,y)}}function Gg(W,y){const M=this.cache;if(void 0!==y.x)M[0]===y.x&&M[1]===y.y&&M[2]===y.z||(W.uniform3i(this.addr,y.x,y.y,y.z),M[0]=y.x,M[1]=y.y,M[2]=y.z);else{if(Wg(M,y))return;W.uniform3iv(this.addr,y),yg(M,y)}}function Yg(W,y){const M=this.cache;if(void 0!==y.x)M[0]===y.x&&M[1]===y.y&&M[2]===y.z&&M[3]===y.w||(W.uniform4i(this.addr,y.x,y.y,y.z,y.w),M[0]=y.x,M[1]=y.y,M[2]=y.z,M[3]=y.w);else{if(Wg(M,y))return;W.uniform4iv(this.addr,y),yg(M,y)}}function cg(W,y){const M=this.cache;M[0]!==y&&(W.uniform1ui(this.addr,y),M[0]=y)}function Dg(W,y){const M=this.cache;if(void 0!==y.x)M[0]===y.x&&M[1]===y.y||(W.uniform2ui(this.addr,y.x,y.y),M[0]=y.x,M[1]=y.y);else{if(Wg(M,y))return;W.uniform2uiv(this.addr,y),yg(M,y)}}function rg(W,y){const M=this.cache;if(void 0!==y.x)M[0]===y.x&&M[1]===y.y&&M[2]===y.z||(W.uniform3ui(this.addr,y.x,y.y,y.z),M[0]=y.x,M[1]=y.y,M[2]=y.z);else{if(Wg(M,y))return;W.uniform3uiv(this.addr,y),yg(M,y)}}function Ag(W,y){const M=this.cache;if(void 0!==y.x)M[0]===y.x&&M[1]===y.y&&M[2]===y.z&&M[3]===y.w||(W.uniform4ui(this.addr,y.x,y.y,y.z,y.w),M[0]=y.x,M[1]=y.y,M[2]=y.z,M[3]=y.w);else{if(Wg(M,y))return;W.uniform4uiv(this.addr,y),yg(M,y)}}function Tg(W,y,M){const U=this.cache,i=M.allocateTextureUnit();U[0]!==i&&(W.uniform1i(this.addr,i),U[0]=i),M.setTexture2D(y||vk,i)}function Og(W,y,M){const U=this.cache,i=M.allocateTextureUnit();U[0]!==i&&(W.uniform1i(this.addr,i),U[0]=i),M.setTexture3D(y||Xk,i)}function hg(W,y,M){const U=this.cache,i=M.allocateTextureUnit();U[0]!==i&&(W.uniform1i(this.addr,i),U[0]=i),M.setTextureCube(y||wk,i)}function Sg(W,y,M){const U=this.cache,i=M.allocateTextureUnit();U[0]!==i&&(W.uniform1i(this.addr,i),U[0]=i),M.setTexture2DArray(y||Lk,i)}function og(W,y){W.uniform1fv(this.addr,y)}function dg(W,y){const M=Qk(y,this.size,2);W.uniform2fv(this.addr,M)}function qg(W,y){const M=Qk(y,this.size,3);W.uniform3fv(this.addr,M)}function sg(W,y){const M=Qk(y,this.size,4);W.uniform4fv(this.addr,M)}function Ng(W,y){const M=Qk(y,this.size,4);W.uniformMatrix2fv(this.addr,!1,M)}function _g(W,y){const M=Qk(y,this.size,9);W.uniformMatrix3fv(this.addr,!1,M)}function pg(W,y){const M=Qk(y,this.size,16);W.uniformMatrix4fv(this.addr,!1,M)}function bg(W,y){W.uniform1iv(this.addr,y)}function mg(W,y){W.uniform2iv(this.addr,y)}function zg(W,y){W.uniform3iv(this.addr,y)}function Kg(W,y){W.uniform4iv(this.addr,y)}function Pg(W,y){W.uniform1uiv(this.addr,y)}function Rg(W,y){W.uniform2uiv(this.addr,y)}function Ig(W,y){W.uniform3uiv(this.addr,y)}function Eg(W,y){W.uniform4uiv(this.addr,y)}function Zg(W,y,M){const U=this.cache,i=y.length,x=Mg(M,i);Wg(U,x)||(W.uniform1iv(this.addr,x),yg(U,x));for(let W=0;W!==i;++W)M.setTexture2D(y[W]||vk,x[W])}function fg(W,y,M){const U=this.cache,i=y.length,x=Mg(M,i);Wg(U,x)||(W.uniform1iv(this.addr,x),yg(U,x));for(let W=0;W!==i;++W)M.setTexture3D(y[W]||Xk,x[W])}function Vg(W,y,M){const U=this.cache,i=y.length,x=Mg(M,i);Wg(U,x)||(W.uniform1iv(this.addr,x),yg(U,x));for(let W=0;W!==i;++W)M.setTextureCube(y[W]||wk,x[W])}function $g(W,y,M){const U=this.cache,i=y.length,x=Mg(M,i);Wg(U,x)||(W.uniform1iv(this.addr,x),yg(U,x));for(let W=0;W!==i;++W)M.setTexture2DArray(y[W]||Lk,x[W])}class ag{constructor(W,y,M){this.id=W,this.addr=M,this.cache=[],this.setValue=function(W){switch(W){case 5126:return Ug;case 35664:return ig;case 35665:return xg;case 35666:return ng;case 35674:return kg;case 35675:return gg;case 35676:return ug;case 5124:case 35670:return eg;case 35667:case 35671:return lg;case 35668:case 35672:return Gg;case 35669:case 35673:return Yg;case 5125:return cg;case 36294:return Dg;case 36295:return rg;case 36296:return Ag;case 35678:case 36198:case 36298:case 36306:case 35682:return Tg;case 35679:case 36299:case 36307:return Og;case 35680:case 36300:case 36308:case 36293:return hg;case 36289:case 36303:case 36311:case 36292:return Sg}}(y.type)}}class Hg{constructor(W,y,M){this.id=W,this.addr=M,this.cache=[],this.size=y.size,this.setValue=function(W){switch(W){case 5126:return og;case 35664:return dg;case 35665:return qg;case 35666:return sg;case 35674:return Ng;case 35675:return _g;case 35676:return pg;case 5124:case 35670:return bg;case 35667:case 35671:return mg;case 35668:case 35672:return zg;case 35669:case 35673:return Kg;case 5125:return Pg;case 36294:return Rg;case 36295:return Ig;case 36296:return Eg;case 35678:case 36198:case 36298:case 36306:case 35682:return Zg;case 35679:case 36299:case 36307:return fg;case 35680:case 36300:case 36308:case 36293:return Vg;case 36289:case 36303:case 36311:case 36292:return $g}}(y.type)}}class Bg{constructor(W){this.id=W,this.seq=[],this.map={}}setValue(W,y,M){const U=this.seq;for(let i=0,x=U.length;i!==x;++i){const x=U[i];x.setValue(W,y[x.id],M)}}}const vg=/(\w+)(\])?(\[|\.)?/g;function Lg(W,y){W.seq.push(y),W.map[y.id]=y}function Xg(W,y,M){const U=W.name,i=U.length;for(vg.lastIndex=0;1;){const x=vg.exec(U),n=vg.lastIndex;let k=x[1];const g="]"===x[2],u=x[3];if(g&&(k|=0),void 0===u||"["===u&&n+2===i){Lg(M,void 0===u?new ag(k,W,y):new Hg(k,W,y));break}{let W=M.map[k];void 0===W&&(W=new Bg(k),Lg(M,W)),M=W}}}class wg{constructor(W,y){this.seq=[],this.map={};const M=W.getProgramParameter(y,W.ACTIVE_UNIFORMS);for(let U=0;U<M;++U){const M=W.getActiveUniform(y,U);Xg(M,W.getUniformLocation(y,M.name),this)}}setValue(W,y,M,U){const i=this.map[y];void 0!==i&&i.setValue(W,M,U)}setOptional(W,y,M){const U=y[M];void 0!==U&&this.setValue(W,M,U)}static upload(W,y,M,U){for(let i=0,x=y.length;i!==x;++i){const x=y[i],n=M[x.id];!1!==n.needsUpdate&&x.setValue(W,n.value,U)}}static seqWithValue(W,y){const M=[];for(let U=0,i=W.length;U!==i;++U){const i=W[U];i.id in y&&M.push(i)}return M}}function Fg(W,y,M){const U=W.createShader(y);return W.shaderSource(U,M),W.compileShader(U),U}let tg=0;function Jg(W,y,M){const U=W.getShaderParameter(y,W.COMPILE_STATUS),i=W.getShaderInfoLog(y).trim();if(U&&""===i)return"";const x=/ERROR: 0:(\d+)/.exec(i);if(x){const U=parseInt(x[1]);return M.toUpperCase()+"\n\n"+i+"\n\n"+function(W,y){const M=W.split("\n"),U=[],i=Math.max(y-6,0),x=Math.min(y+6,M.length);for(let W=i;W<x;W++){const i=W+1;U.push(`${i===y?">":" "} ${i}: ${M[W]}`)}return U.join("\n")}(W.getShaderSource(y),U)}return i}function jg(W,y){const M=function(W){switch(W){case vM:return["Linear","( value )"];case BM:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",W),["Linear","( value )"]}}(y);return"vec4 "+W+"( vec4 value ) { return LinearTo"+M[0]+M[1]+"; }"}function Cg(W,y){let M;switch(y){case Wy:M="Linear";break;case yy:M="Reinhard";break;case My:M="OptimizedCineon";break;case Uy:M="ACESFilmic";break;case iy:M="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",y),M="Linear"}return"vec3 "+W+"( vec3 color ) { return "+M+"ToneMapping( color ); }"}function Qg(W){return""!==W}function Wu(W,y){const M=y.numSpotLightShadows+y.numSpotLightMaps-y.numSpotLightShadowsWithMaps;return W.replace(/NUM_DIR_LIGHTS/g,y.numDirLights).replace(/NUM_SPOT_LIGHTS/g,y.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,y.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,M).replace(/NUM_RECT_AREA_LIGHTS/g,y.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,y.numPointLights).replace(/NUM_HEMI_LIGHTS/g,y.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,y.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,y.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,y.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,y.numPointLightShadows)}function yu(W,y){return W.replace(/NUM_CLIPPING_PLANES/g,y.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,y.numClippingPlanes-y.numClipIntersection)}const Mu=/^[ \t]*#include +<([\w\d./]+)>/gm;function Uu(W){return W.replace(Mu,xu)}const iu=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function xu(W,y){let M=uk[y];if(void 0===M){const W=iu.get(y);if(void 0===W)throw new Error("Can not resolve #include <"+y+">");M=uk[W],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',y,W)}return Uu(M)}const nu=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ku(W){return W.replace(nu,gu)}function gu(W,y,M,U){let i="";for(let W=parseInt(y);W<parseInt(M);W++)i+=U.replace(/\[\s*i\s*\]/g,"[ "+W+" ]").replace(/UNROLLED_LOOP_INDEX/g,W);return i}function uu(W){let y="precision "+W.precision+" float;\nprecision "+W.precision+" int;";return"highp"===W.precision?y+="\n#define HIGH_PRECISION":"mediump"===W.precision?y+="\n#define MEDIUM_PRECISION":"lowp"===W.precision&&(y+="\n#define LOW_PRECISION"),y}function eu(W,y,M,U){const i=W.getContext(),x=M.defines;let n=M.vertexShader,k=M.fragmentShader;const g=function(W){let y="SHADOWMAP_TYPE_BASIC";return W.shadowMapType===YW?y="SHADOWMAP_TYPE_PCF":W.shadowMapType===cW?y="SHADOWMAP_TYPE_PCF_SOFT":W.shadowMapType===DW&&(y="SHADOWMAP_TYPE_VSM"),y}(M),u=function(W){let y="ENVMAP_TYPE_CUBE";if(W.envMap)switch(W.envMapMode){case ny:case ky:y="ENVMAP_TYPE_CUBE";break;case ey:y="ENVMAP_TYPE_CUBE_UV"}return y}(M),e=function(W){let y="ENVMAP_MODE_REFLECTION";return W.envMap&&W.envMapMode===ky&&(y="ENVMAP_MODE_REFRACTION"),y}(M),l=function(W){let y="ENVMAP_BLENDING_NONE";if(W.envMap)switch(W.combine){case JW:y="ENVMAP_BLENDING_MULTIPLY";break;case jW:y="ENVMAP_BLENDING_MIX";break;case CW:y="ENVMAP_BLENDING_ADD"}return y}(M),G=function(W){const y=W.envMapCubeUVHeight;if(null===y)return null;const M=Math.log2(y)-2,U=1/y;return{texelWidth:1/(3*Math.max(Math.pow(2,M),7*16)),texelHeight:U,maxMip:M}}(M),Y=M.isWebGL2?"":function(W){return[W.extensionDerivatives||W.envMapCubeUVHeight||W.bumpMap||W.normalMapTangentSpace||W.clearcoatNormalMap||W.flatShading||"physical"===W.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(W.extensionFragDepth||W.logarithmicDepthBuffer)&&W.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",W.extensionDrawBuffers&&W.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(W.extensionShaderTextureLOD||W.envMap||W.transmission)&&W.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Qg).join("\n")}(M),c=function(W){const y=[];for(const M in W){const U=W[M];!1!==U&&y.push("#define "+M+" "+U)}return y.join("\n")}(x),D=i.createProgram();let r,A,T=M.glslVersion?"#version "+M.glslVersion+"\n":"";M.isRawShaderMaterial?(r=["#define SHADER_TYPE "+M.shaderType,"#define SHADER_NAME "+M.shaderName,c].filter(Qg).join("\n"),r.length>0&&(r+="\n"),A=[Y,"#define SHADER_TYPE "+M.shaderType,"#define SHADER_NAME "+M.shaderName,c].filter(Qg).join("\n"),A.length>0&&(A+="\n")):(r=[uu(M),"#define SHADER_TYPE "+M.shaderType,"#define SHADER_NAME "+M.shaderName,c,M.instancing?"#define USE_INSTANCING":"",M.instancingColor?"#define USE_INSTANCING_COLOR":"",M.useFog&&M.fog?"#define USE_FOG":"",M.useFog&&M.fogExp2?"#define FOG_EXP2":"",M.map?"#define USE_MAP":"",M.envMap?"#define USE_ENVMAP":"",M.envMap?"#define "+e:"",M.lightMap?"#define USE_LIGHTMAP":"",M.aoMap?"#define USE_AOMAP":"",M.bumpMap?"#define USE_BUMPMAP":"",M.normalMap?"#define USE_NORMALMAP":"",M.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",M.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",M.displacementMap?"#define USE_DISPLACEMENTMAP":"",M.emissiveMap?"#define USE_EMISSIVEMAP":"",M.anisotropyMap?"#define USE_ANISOTROPYMAP":"",M.clearcoatMap?"#define USE_CLEARCOATMAP":"",M.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",M.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",M.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",M.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",M.specularMap?"#define USE_SPECULARMAP":"",M.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",M.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",M.roughnessMap?"#define USE_ROUGHNESSMAP":"",M.metalnessMap?"#define USE_METALNESSMAP":"",M.alphaMap?"#define USE_ALPHAMAP":"",M.alphaHash?"#define USE_ALPHAHASH":"",M.transmission?"#define USE_TRANSMISSION":"",M.transmissionMap?"#define USE_TRANSMISSIONMAP":"",M.thicknessMap?"#define USE_THICKNESSMAP":"",M.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",M.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",M.mapUv?"#define MAP_UV "+M.mapUv:"",M.alphaMapUv?"#define ALPHAMAP_UV "+M.alphaMapUv:"",M.lightMapUv?"#define LIGHTMAP_UV "+M.lightMapUv:"",M.aoMapUv?"#define AOMAP_UV "+M.aoMapUv:"",M.emissiveMapUv?"#define EMISSIVEMAP_UV "+M.emissiveMapUv:"",M.bumpMapUv?"#define BUMPMAP_UV "+M.bumpMapUv:"",M.normalMapUv?"#define NORMALMAP_UV "+M.normalMapUv:"",M.displacementMapUv?"#define DISPLACEMENTMAP_UV "+M.displacementMapUv:"",M.metalnessMapUv?"#define METALNESSMAP_UV "+M.metalnessMapUv:"",M.roughnessMapUv?"#define ROUGHNESSMAP_UV "+M.roughnessMapUv:"",M.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+M.anisotropyMapUv:"",M.clearcoatMapUv?"#define CLEARCOATMAP_UV "+M.clearcoatMapUv:"",M.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+M.clearcoatNormalMapUv:"",M.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+M.clearcoatRoughnessMapUv:"",M.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+M.iridescenceMapUv:"",M.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+M.iridescenceThicknessMapUv:"",M.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+M.sheenColorMapUv:"",M.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+M.sheenRoughnessMapUv:"",M.specularMapUv?"#define SPECULARMAP_UV "+M.specularMapUv:"",M.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+M.specularColorMapUv:"",M.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+M.specularIntensityMapUv:"",M.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+M.transmissionMapUv:"",M.thicknessMapUv?"#define THICKNESSMAP_UV "+M.thicknessMapUv:"",M.vertexTangents&&!1===M.flatShading?"#define USE_TANGENT":"",M.vertexColors?"#define USE_COLOR":"",M.vertexAlphas?"#define USE_COLOR_ALPHA":"",M.vertexUv1s?"#define USE_UV1":"",M.vertexUv2s?"#define USE_UV2":"",M.vertexUv3s?"#define USE_UV3":"",M.pointsUvs?"#define USE_POINTS_UV":"",M.flatShading?"#define FLAT_SHADED":"",M.skinning?"#define USE_SKINNING":"",M.morphTargets?"#define USE_MORPHTARGETS":"",M.morphNormals&&!1===M.flatShading?"#define USE_MORPHNORMALS":"",M.morphColors&&M.isWebGL2?"#define USE_MORPHCOLORS":"",M.morphTargetsCount>0&&M.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",M.morphTargetsCount>0&&M.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+M.morphTextureStride:"",M.morphTargetsCount>0&&M.isWebGL2?"#define MORPHTARGETS_COUNT "+M.morphTargetsCount:"",M.doubleSided?"#define DOUBLE_SIDED":"",M.flipSided?"#define FLIP_SIDED":"",M.shadowMapEnabled?"#define USE_SHADOWMAP":"",M.shadowMapEnabled?"#define "+g:"",M.sizeAttenuation?"#define USE_SIZEATTENUATION":"",M.useLegacyLights?"#define LEGACY_LIGHTS":"",M.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",M.logarithmicDepthBuffer&&M.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Qg).join("\n"),A=[Y,uu(M),"#define SHADER_TYPE "+M.shaderType,"#define SHADER_NAME "+M.shaderName,c,M.useFog&&M.fog?"#define USE_FOG":"",M.useFog&&M.fogExp2?"#define FOG_EXP2":"",M.map?"#define USE_MAP":"",M.matcap?"#define USE_MATCAP":"",M.envMap?"#define USE_ENVMAP":"",M.envMap?"#define "+u:"",M.envMap?"#define "+e:"",M.envMap?"#define "+l:"",G?"#define CUBEUV_TEXEL_WIDTH "+G.texelWidth:"",G?"#define CUBEUV_TEXEL_HEIGHT "+G.texelHeight:"",G?"#define CUBEUV_MAX_MIP "+G.maxMip+".0":"",M.lightMap?"#define USE_LIGHTMAP":"",M.aoMap?"#define USE_AOMAP":"",M.bumpMap?"#define USE_BUMPMAP":"",M.normalMap?"#define USE_NORMALMAP":"",M.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",M.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",M.emissiveMap?"#define USE_EMISSIVEMAP":"",M.anisotropy?"#define USE_ANISOTROPY":"",M.anisotropyMap?"#define USE_ANISOTROPYMAP":"",M.clearcoat?"#define USE_CLEARCOAT":"",M.clearcoatMap?"#define USE_CLEARCOATMAP":"",M.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",M.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",M.iridescence?"#define USE_IRIDESCENCE":"",M.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",M.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",M.specularMap?"#define USE_SPECULARMAP":"",M.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",M.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",M.roughnessMap?"#define USE_ROUGHNESSMAP":"",M.metalnessMap?"#define USE_METALNESSMAP":"",M.alphaMap?"#define USE_ALPHAMAP":"",M.alphaTest?"#define USE_ALPHATEST":"",M.alphaHash?"#define USE_ALPHAHASH":"",M.sheen?"#define USE_SHEEN":"",M.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",M.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",M.transmission?"#define USE_TRANSMISSION":"",M.transmissionMap?"#define USE_TRANSMISSIONMAP":"",M.thicknessMap?"#define USE_THICKNESSMAP":"",M.vertexTangents&&!1===M.flatShading?"#define USE_TANGENT":"",M.vertexColors||M.instancingColor?"#define USE_COLOR":"",M.vertexAlphas?"#define USE_COLOR_ALPHA":"",M.vertexUv1s?"#define USE_UV1":"",M.vertexUv2s?"#define USE_UV2":"",M.vertexUv3s?"#define USE_UV3":"",M.pointsUvs?"#define USE_POINTS_UV":"",M.gradientMap?"#define USE_GRADIENTMAP":"",M.flatShading?"#define FLAT_SHADED":"",M.doubleSided?"#define DOUBLE_SIDED":"",M.flipSided?"#define FLIP_SIDED":"",M.shadowMapEnabled?"#define USE_SHADOWMAP":"",M.shadowMapEnabled?"#define "+g:"",M.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",M.useLegacyLights?"#define LEGACY_LIGHTS":"",M.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",M.logarithmicDepthBuffer&&M.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",M.toneMapping!==QW?"#define TONE_MAPPING":"",M.toneMapping!==QW?uk["tonemapping_pars_fragment"]:"",M.toneMapping!==QW?Cg("toneMapping",M.toneMapping):"",M.dithering?"#define DITHERING":"",M.opaque?"#define OPAQUE":"",uk["colorspace_pars_fragment"],jg("linearToOutputTexel",M.outputColorSpace),M.useDepthPacking?"#define DEPTH_PACKING "+M.depthPacking:"","\n"].filter(Qg).join("\n")),n=Uu(n),n=Wu(n,M),n=yu(n,M),k=Uu(k),k=Wu(k,M),k=yu(k,M),n=ku(n),k=ku(k),M.isWebGL2&&!0!==M.isRawShaderMaterial&&(T="#version 300 es\n",r=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,A=["#define varying in",M.glslVersion===NU?"":"layout(location = 0) out highp vec4 pc_fragColor;",M.glslVersion===NU?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+A);const O=T+r+n,h=T+A+k,S=Fg(i,i.VERTEX_SHADER,O),o=Fg(i,i.FRAGMENT_SHADER,h);if(i.attachShader(D,S),i.attachShader(D,o),void 0!==M.index0AttributeName?i.bindAttribLocation(D,0,M.index0AttributeName):!0===M.morphTargets&&i.bindAttribLocation(D,0,"position"),i.linkProgram(D),W.debug.checkShaderErrors){const y=i.getProgramInfoLog(D).trim(),M=i.getShaderInfoLog(S).trim(),U=i.getShaderInfoLog(o).trim();let x=!0,n=!0;if(!1===i.getProgramParameter(D,i.LINK_STATUS))if(x=!1,"function"==typeof W.debug.onShaderError)W.debug.onShaderError(i,D,S,o);else{const W=Jg(i,S,"vertex"),M=Jg(i,o,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - "+"VALIDATE_STATUS "+i.getProgramParameter(D,i.VALIDATE_STATUS)+"\n\n"+"Program Info Log: "+y+"\n"+W+"\n"+M)}else""!==y?console.warn("THREE.WebGLProgram: Program Info Log:",y):""!==M&&""!==U||(n=!1);n&&(this.diagnostics={runnable:x,programLog:y,vertexShader:{log:M,prefix:r},fragmentShader:{log:U,prefix:A}})}let d,q;return i.deleteShader(S),i.deleteShader(o),this.getUniforms=function(){return void 0===d&&(d=new wg(i,D)),d},this.getAttributes=function(){return void 0===q&&(q=function(W,y){const M={},U=W.getProgramParameter(y,W.ACTIVE_ATTRIBUTES);for(let i=0;i<U;i++){const U=W.getActiveAttrib(y,i),x=U.name;let n=1;U.type===W.FLOAT_MAT2&&(n=2),U.type===W.FLOAT_MAT3&&(n=3),U.type===W.FLOAT_MAT4&&(n=4),M[x]={type:U.type,location:W.getAttribLocation(y,x),locationSize:n}}return M}(i,D)),q},this.destroy=function(){U.releaseStatesOfProgram(this),i.deleteProgram(D),this.program=void 0},this.type=M.shaderType,this.name=M.shaderName,this.id=tg++,this.cacheKey=y,this.usedTimes=1,this.program=D,this.vertexShader=S,this.fragmentShader=o,this}let lu=0;class Gu{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(W){const y=W.vertexShader,M=W.fragmentShader,U=this._getShaderStage(y),i=this._getShaderStage(M),x=this._getShaderCacheForMaterial(W);return!1===x.has(U)&&(x.add(U),U.usedTimes++),!1===x.has(i)&&(x.add(i),i.usedTimes++),this}remove(W){const y=this.materialCache.get(W);for(const W of y)W.usedTimes--,0===W.usedTimes&&this.shaderCache.delete(W.code);return this.materialCache.delete(W),this}getVertexShaderID(W){return this._getShaderStage(W.vertexShader).id}getFragmentShaderID(W){return this._getShaderStage(W.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(W){const y=this.materialCache;let M=y.get(W);return void 0===M&&(M=new Set,y.set(W,M)),M}_getShaderStage(W){const y=this.shaderCache;let M=y.get(W);return void 0===M&&(M=new Yu(W),y.set(W,M)),M}}class Yu{constructor(W){this.id=lu++,this.code=W,this.usedTimes=0}}function cu(W,y,M,U,i,x,n){const k=new ex,g=new Gu,u=[],e=i.isWebGL2,l=i.logarithmicDepthBuffer,G=i.vertexTextures;let Y=i.precision;const c={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function D(W){return 0===W?"uv":`uv${W}`}return{getParameters:function(x,k,u,r,A){const T=r.fog,O=A.geometry,h=x.isMeshStandardMaterial?r.environment:null,S=(x.isMeshStandardMaterial?M:y).get(x.envMap||h),o=S&&S.mapping===ey?S.image.height:null,d=c[x.type];null!==x.precision&&(Y=i.getMaxPrecision(x.precision),Y!==x.precision&&console.warn("THREE.WebGLProgram.getParameters:",x.precision,"not supported, using",Y,"instead."));const q=O.morphAttributes.position||O.morphAttributes.normal||O.morphAttributes.color,s=void 0!==q?q.length:0;let N,_,p,b,m=0;if(void 0!==O.morphAttributes.position&&(m=1),void 0!==O.morphAttributes.normal&&(m=2),void 0!==O.morphAttributes.color&&(m=3),d){const W=lk[d];N=W.vertexShader,_=W.fragmentShader}else N=x.vertexShader,_=x.fragmentShader,g.update(x),p=g.getVertexShaderID(x),b=g.getFragmentShaderID(x);const z=W.getRenderTarget(),K=!0===A.isInstancedMesh,P=!!x.map,R=!!x.matcap,I=!!S,E=!!x.aoMap,Z=!!x.lightMap,f=!!x.bumpMap,V=!!x.normalMap,$=!!x.displacementMap,a=!!x.emissiveMap,H=!!x.metalnessMap,B=!!x.roughnessMap,v=x.anisotropy>0,L=x.clearcoat>0,X=x.iridescence>0,w=x.sheen>0,F=x.transmission>0,t=v&&!!x.anisotropyMap,J=L&&!!x.clearcoatMap,j=L&&!!x.clearcoatNormalMap,C=L&&!!x.clearcoatRoughnessMap,Q=X&&!!x.iridescenceMap,WW=X&&!!x.iridescenceThicknessMap,yW=w&&!!x.sheenColorMap,MW=w&&!!x.sheenRoughnessMap,UW=!!x.specularMap,iW=!!x.specularColorMap,xW=!!x.specularIntensityMap,nW=F&&!!x.transmissionMap,kW=F&&!!x.thicknessMap,gW=!!x.gradientMap,uW=!!x.alphaMap,eW=x.alphaTest>0,lW=!!x.alphaHash,GW=!!x.extensions,YW=!!O.attributes.uv1,cW=!!O.attributes.uv2,DW=!!O.attributes.uv3;let rW=QW;return x.toneMapped&&(null!==z&&!0!==z.isXRRenderTarget||(rW=W.toneMapping)),{isWebGL2:e,shaderID:d,shaderType:x.type,shaderName:x.name,vertexShader:N,fragmentShader:_,defines:x.defines,customVertexShaderID:p,customFragmentShaderID:b,isRawShaderMaterial:!0===x.isRawShaderMaterial,glslVersion:x.glslVersion,precision:Y,instancing:K,instancingColor:K&&null!==A.instanceColor,supportsVertexTextures:G,outputColorSpace:null===z?W.outputColorSpace:!0===z.isXRRenderTarget?z.texture.colorSpace:vM,map:P,matcap:R,envMap:I,envMapMode:I&&S.mapping,envMapCubeUVHeight:o,aoMap:E,lightMap:Z,bumpMap:f,normalMap:V,displacementMap:G&&$,emissiveMap:a,normalMapObjectSpace:V&&x.normalMapType===aM,normalMapTangentSpace:V&&x.normalMapType===$M,metalnessMap:H,roughnessMap:B,anisotropy:v,anisotropyMap:t,clearcoat:L,clearcoatMap:J,clearcoatNormalMap:j,clearcoatRoughnessMap:C,iridescence:X,iridescenceMap:Q,iridescenceThicknessMap:WW,sheen:w,sheenColorMap:yW,sheenRoughnessMap:MW,specularMap:UW,specularColorMap:iW,specularIntensityMap:xW,transmission:F,transmissionMap:nW,thicknessMap:kW,gradientMap:gW,opaque:!1===x.transparent&&x.blending===SW,alphaMap:uW,alphaTest:eW,alphaHash:lW,combine:x.combine,mapUv:P&&D(x.map.channel),aoMapUv:E&&D(x.aoMap.channel),lightMapUv:Z&&D(x.lightMap.channel),bumpMapUv:f&&D(x.bumpMap.channel),normalMapUv:V&&D(x.normalMap.channel),displacementMapUv:$&&D(x.displacementMap.channel),emissiveMapUv:a&&D(x.emissiveMap.channel),metalnessMapUv:H&&D(x.metalnessMap.channel),roughnessMapUv:B&&D(x.roughnessMap.channel),anisotropyMapUv:t&&D(x.anisotropyMap.channel),clearcoatMapUv:J&&D(x.clearcoatMap.channel),clearcoatNormalMapUv:j&&D(x.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:C&&D(x.clearcoatRoughnessMap.channel),iridescenceMapUv:Q&&D(x.iridescenceMap.channel),iridescenceThicknessMapUv:WW&&D(x.iridescenceThicknessMap.channel),sheenColorMapUv:yW&&D(x.sheenColorMap.channel),sheenRoughnessMapUv:MW&&D(x.sheenRoughnessMap.channel),specularMapUv:UW&&D(x.specularMap.channel),specularColorMapUv:iW&&D(x.specularColorMap.channel),specularIntensityMapUv:xW&&D(x.specularIntensityMap.channel),transmissionMapUv:nW&&D(x.transmissionMap.channel),thicknessMapUv:kW&&D(x.thicknessMap.channel),alphaMapUv:uW&&D(x.alphaMap.channel),vertexTangents:!!O.attributes.tangent&&(V||v),vertexColors:x.vertexColors,vertexAlphas:!0===x.vertexColors&&!!O.attributes.color&&4===O.attributes.color.itemSize,vertexUv1s:YW,vertexUv2s:cW,vertexUv3s:DW,pointsUvs:!0===A.isPoints&&!!O.attributes.uv&&(P||uW),fog:!!T,useFog:!0===x.fog,fogExp2:T&&T.isFogExp2,flatShading:!0===x.flatShading,sizeAttenuation:!0===x.sizeAttenuation,logarithmicDepthBuffer:l,skinning:!0===A.isSkinnedMesh,morphTargets:void 0!==O.morphAttributes.position,morphNormals:void 0!==O.morphAttributes.normal,morphColors:void 0!==O.morphAttributes.color,morphTargetsCount:s,morphTextureStride:m,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numClippingPlanes:n.numPlanes,numClipIntersection:n.numIntersection,dithering:x.dithering,shadowMapEnabled:W.shadowMap.enabled&&u.length>0,shadowMapType:W.shadowMap.type,toneMapping:rW,useLegacyLights:W._useLegacyLights,premultipliedAlpha:x.premultipliedAlpha,doubleSided:x.side===TW,flipSided:x.side===AW,useDepthPacking:x.depthPacking>=0,depthPacking:x.depthPacking||0,index0AttributeName:x.index0AttributeName,extensionDerivatives:GW&&!0===x.extensions.derivatives,extensionFragDepth:GW&&!0===x.extensions.fragDepth,extensionDrawBuffers:GW&&!0===x.extensions.drawBuffers,extensionShaderTextureLOD:GW&&!0===x.extensions.shaderTextureLOD,rendererExtensionFragDepth:e||U.has("EXT_frag_depth"),rendererExtensionDrawBuffers:e||U.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:e||U.has("EXT_shader_texture_lod"),customProgramCacheKey:x.customProgramCacheKey()}},getProgramCacheKey:function(y){const M=[];if(y.shaderID?M.push(y.shaderID):(M.push(y.customVertexShaderID),M.push(y.customFragmentShaderID)),void 0!==y.defines)for(const W in y.defines)M.push(W),M.push(y.defines[W]);return!1===y.isRawShaderMaterial&&(function(W,y){W.push(y.precision),W.push(y.outputColorSpace),W.push(y.envMapMode),W.push(y.envMapCubeUVHeight),W.push(y.mapUv),W.push(y.alphaMapUv),W.push(y.lightMapUv),W.push(y.aoMapUv),W.push(y.bumpMapUv),W.push(y.normalMapUv),W.push(y.displacementMapUv),W.push(y.emissiveMapUv),W.push(y.metalnessMapUv),W.push(y.roughnessMapUv),W.push(y.anisotropyMapUv),W.push(y.clearcoatMapUv),W.push(y.clearcoatNormalMapUv),W.push(y.clearcoatRoughnessMapUv),W.push(y.iridescenceMapUv),W.push(y.iridescenceThicknessMapUv),W.push(y.sheenColorMapUv),W.push(y.sheenRoughnessMapUv),W.push(y.specularMapUv),W.push(y.specularColorMapUv),W.push(y.specularIntensityMapUv),W.push(y.transmissionMapUv),W.push(y.thicknessMapUv),W.push(y.combine),W.push(y.fogExp2),W.push(y.sizeAttenuation),W.push(y.morphTargetsCount),W.push(y.morphAttributeCount),W.push(y.numDirLights),W.push(y.numPointLights),W.push(y.numSpotLights),W.push(y.numSpotLightMaps),W.push(y.numHemiLights),W.push(y.numRectAreaLights),W.push(y.numDirLightShadows),W.push(y.numPointLightShadows),W.push(y.numSpotLightShadows),W.push(y.numSpotLightShadowsWithMaps),W.push(y.shadowMapType),W.push(y.toneMapping),W.push(y.numClippingPlanes),W.push(y.numClipIntersection),W.push(y.depthPacking)}(M,y),function(W,y){k.disableAll(),y.isWebGL2&&k.enable(0),y.supportsVertexTextures&&k.enable(1),y.instancing&&k.enable(2),y.instancingColor&&k.enable(3),y.matcap&&k.enable(4),y.envMap&&k.enable(5),y.normalMapObjectSpace&&k.enable(6),y.normalMapTangentSpace&&k.enable(7),y.clearcoat&&k.enable(8),y.iridescence&&k.enable(9),y.alphaTest&&k.enable(10),y.vertexColors&&k.enable(11),y.vertexAlphas&&k.enable(12),y.vertexUv1s&&k.enable(13),y.vertexUv2s&&k.enable(14),y.vertexUv3s&&k.enable(15),y.vertexTangents&&k.enable(16),y.anisotropy&&k.enable(17),W.push(k.mask),k.disableAll(),y.fog&&k.enable(0),y.useFog&&k.enable(1),y.flatShading&&k.enable(2),y.logarithmicDepthBuffer&&k.enable(3),y.skinning&&k.enable(4),y.morphTargets&&k.enable(5),y.morphNormals&&k.enable(6),y.morphColors&&k.enable(7),y.premultipliedAlpha&&k.enable(8),y.shadowMapEnabled&&k.enable(9),y.useLegacyLights&&k.enable(10),y.doubleSided&&k.enable(11),y.flipSided&&k.enable(12),y.useDepthPacking&&k.enable(13),y.dithering&&k.enable(14),y.transmission&&k.enable(15),y.sheen&&k.enable(16),y.opaque&&k.enable(17),y.pointsUvs&&k.enable(18),W.push(k.mask)}(M,y),M.push(W.outputColorSpace)),M.push(y.customProgramCacheKey),M.join()},getUniforms:function(W){const y=c[W.type];let M;if(y){const W=lk[y];M=Hn.clone(W.uniforms)}else M=W.uniforms;return M},acquireProgram:function(y,M){let U;for(let W=0,y=u.length;W<y;W++){const y=u[W];if(y.cacheKey===M){U=y,++U.usedTimes;break}}return void 0===U&&(U=new eu(W,M,y,x),u.push(U)),U},releaseProgram:function(W){if(0==--W.usedTimes){const y=u.indexOf(W);u[y]=u[u.length-1],u.pop(),W.destroy()}},releaseShaderCache:function(W){g.remove(W)},programs:u,dispose:function(){g.dispose()}}}function Du(){let W=new WeakMap;return{get:function(y){let M=W.get(y);return void 0===M&&(M={},W.set(y,M)),M},remove:function(y){W.delete(y)},update:function(y,M,U){W.get(y)[M]=U},dispose:function(){W=new WeakMap}}}function ru(W,y){return W.groupOrder!==y.groupOrder?W.groupOrder-y.groupOrder:W.renderOrder!==y.renderOrder?W.renderOrder-y.renderOrder:W.material.id!==y.material.id?W.material.id-y.material.id:W.z!==y.z?W.z-y.z:W.id-y.id}function Au(W,y){return W.groupOrder!==y.groupOrder?W.groupOrder-y.groupOrder:W.renderOrder!==y.renderOrder?W.renderOrder-y.renderOrder:W.z!==y.z?y.z-W.z:W.id-y.id}function Tu(){const W=[];let y=0;const M=[],U=[],i=[];function x(M,U,i,x,n,k){let g=W[y];return void 0===g?(g={id:M.id,object:M,geometry:U,material:i,groupOrder:x,renderOrder:M.renderOrder,z:n,group:k},W[y]=g):(g.id=M.id,g.object=M,g.geometry=U,g.material=i,g.groupOrder=x,g.renderOrder=M.renderOrder,g.z=n,g.group=k),y++,g}return{opaque:M,transmissive:U,transparent:i,init:function(){y=0,M.length=0,U.length=0,i.length=0},push:function(W,y,n,k,g,u){const e=x(W,y,n,k,g,u);n.transmission>0?U.push(e):!0===n.transparent?i.push(e):M.push(e)},unshift:function(W,y,n,k,g,u){const e=x(W,y,n,k,g,u);n.transmission>0?U.unshift(e):!0===n.transparent?i.unshift(e):M.unshift(e)},finish:function(){for(let M=y,U=W.length;M<U;M++){const y=W[M];if(null===y.id)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}},sort:function(W,y){M.length>1&&M.sort(W||ru),U.length>1&&U.sort(y||Au),i.length>1&&i.sort(y||Au)}}}function Ou(){let W=new WeakMap;return{get:function(y,M){const U=W.get(y);let i;return void 0===U?(i=new Tu,W.set(y,[i])):M>=U.length?(i=new Tu,U.push(i)):i=U[M],i},dispose:function(){W=new WeakMap}}}function hu(){const W={};return{get:function(y){if(void 0!==W[y.id])return W[y.id];let M;switch(y.type){case"DirectionalLight":M={direction:new di,color:new Bx};break;case"SpotLight":M={position:new di,direction:new di,color:new Bx,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":M={position:new di,color:new Bx,distance:0,decay:0};break;case"HemisphereLight":M={direction:new di,skyColor:new Bx,groundColor:new Bx};break;case"RectAreaLight":M={color:new Bx,position:new di,halfWidth:new di,halfHeight:new di}}return W[y.id]=M,M}}}let Su=0;function ou(W,y){return(y.castShadow?2:0)-(W.castShadow?2:0)+(y.map?1:0)-(W.map?1:0)}function du(W,y){const M=new hu,U=function(){const W={};return{get:function(y){if(void 0!==W[y.id])return W[y.id];let M;switch(y.type){case"DirectionalLight":case"SpotLight":M={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new LU};break;case"PointLight":M={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new LU,shadowCameraNear:1,shadowCameraFar:1e3}}return W[y.id]=M,M}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let W=0;W<9;W++)i.probe.push(new di);const x=new di,n=new Qi,k=new Qi;return{setup:function(x,n){let k=0,g=0,u=0;for(let W=0;W<9;W++)i.probe[W].set(0,0,0);let e=0,l=0,G=0,Y=0,c=0,D=0,r=0,A=0,T=0,O=0;x.sort(ou);const h=!0===n?Math.PI:1;for(let W=0,y=x.length;W<y;W++){const y=x[W],n=y.color,S=y.intensity,o=y.distance,d=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)k+=n.r*S*h,g+=n.g*S*h,u+=n.b*S*h;else if(y.isLightProbe)for(let W=0;W<9;W++)i.probe[W].addScaledVector(y.sh.coefficients[W],S);else if(y.isDirectionalLight){const W=M.get(y);if(W.color.copy(y.color).multiplyScalar(y.intensity*h),y.castShadow){const W=y.shadow,M=U.get(y);M.shadowBias=W.bias,M.shadowNormalBias=W.normalBias,M.shadowRadius=W.radius,M.shadowMapSize=W.mapSize,i.directionalShadow[e]=M,i.directionalShadowMap[e]=d,i.directionalShadowMatrix[e]=y.shadow.matrix,D++}i.directional[e]=W,e++}else if(y.isSpotLight){const W=M.get(y);W.position.setFromMatrixPosition(y.matrixWorld),W.color.copy(n).multiplyScalar(S*h),W.distance=o,W.coneCos=Math.cos(y.angle),W.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),W.decay=y.decay,i.spot[G]=W;const x=y.shadow;if(y.map&&(i.spotLightMap[T]=y.map,T++,x.updateMatrices(y),y.castShadow&&O++),i.spotLightMatrix[G]=x.matrix,y.castShadow){const W=U.get(y);W.shadowBias=x.bias,W.shadowNormalBias=x.normalBias,W.shadowRadius=x.radius,W.shadowMapSize=x.mapSize,i.spotShadow[G]=W,i.spotShadowMap[G]=d,A++}G++}else if(y.isRectAreaLight){const W=M.get(y);W.color.copy(n).multiplyScalar(S),W.halfWidth.set(.5*y.width,0,0),W.halfHeight.set(0,.5*y.height,0),i.rectArea[Y]=W,Y++}else if(y.isPointLight){const W=M.get(y);if(W.color.copy(y.color).multiplyScalar(y.intensity*h),W.distance=y.distance,W.decay=y.decay,y.castShadow){const W=y.shadow,M=U.get(y);M.shadowBias=W.bias,M.shadowNormalBias=W.normalBias,M.shadowRadius=W.radius,M.shadowMapSize=W.mapSize,M.shadowCameraNear=W.camera.near,M.shadowCameraFar=W.camera.far,i.pointShadow[l]=M,i.pointShadowMap[l]=d,i.pointShadowMatrix[l]=y.shadow.matrix,r++}i.point[l]=W,l++}else if(y.isHemisphereLight){const W=M.get(y);W.skyColor.copy(y.color).multiplyScalar(S*h),W.groundColor.copy(y.groundColor).multiplyScalar(S*h),i.hemi[c]=W,c++}}Y>0&&(y.isWebGL2||!0===W.has("OES_texture_float_linear")?(i.rectAreaLTC1=ek.LTC_FLOAT_1,i.rectAreaLTC2=ek.LTC_FLOAT_2):!0===W.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=ek.LTC_HALF_1,i.rectAreaLTC2=ek.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=k,i.ambient[1]=g,i.ambient[2]=u;const S=i.hash;S.directionalLength===e&&S.pointLength===l&&S.spotLength===G&&S.rectAreaLength===Y&&S.hemiLength===c&&S.numDirectionalShadows===D&&S.numPointShadows===r&&S.numSpotShadows===A&&S.numSpotMaps===T||(i.directional.length=e,i.spot.length=G,i.rectArea.length=Y,i.point.length=l,i.hemi.length=c,i.directionalShadow.length=D,i.directionalShadowMap.length=D,i.pointShadow.length=r,i.pointShadowMap.length=r,i.spotShadow.length=A,i.spotShadowMap.length=A,i.directionalShadowMatrix.length=D,i.pointShadowMatrix.length=r,i.spotLightMatrix.length=A+T-O,i.spotLightMap.length=T,i.numSpotLightShadowsWithMaps=O,S.directionalLength=e,S.pointLength=l,S.spotLength=G,S.rectAreaLength=Y,S.hemiLength=c,S.numDirectionalShadows=D,S.numPointShadows=r,S.numSpotShadows=A,S.numSpotMaps=T,i.version=Su++)},setupView:function(W,y){let M=0,U=0,g=0,u=0,e=0;const l=y.matrixWorldInverse;for(let y=0,G=W.length;y<G;y++){const G=W[y];if(G.isDirectionalLight){const W=i.directional[M];W.direction.setFromMatrixPosition(G.matrixWorld),x.setFromMatrixPosition(G.target.matrixWorld),W.direction.sub(x),W.direction.transformDirection(l),M++}else if(G.isSpotLight){const W=i.spot[g];W.position.setFromMatrixPosition(G.matrixWorld),W.position.applyMatrix4(l),W.direction.setFromMatrixPosition(G.matrixWorld),x.setFromMatrixPosition(G.target.matrixWorld),W.direction.sub(x),W.direction.transformDirection(l),g++}else if(G.isRectAreaLight){const W=i.rectArea[u];W.position.setFromMatrixPosition(G.matrixWorld),W.position.applyMatrix4(l),k.identity(),n.copy(G.matrixWorld),n.premultiply(l),k.extractRotation(n),W.halfWidth.set(.5*G.width,0,0),W.halfHeight.set(0,.5*G.height,0),W.halfWidth.applyMatrix4(k),W.halfHeight.applyMatrix4(k),u++}else if(G.isPointLight){const W=i.point[U];W.position.setFromMatrixPosition(G.matrixWorld),W.position.applyMatrix4(l),U++}else if(G.isHemisphereLight){const W=i.hemi[e];W.direction.setFromMatrixPosition(G.matrixWorld),W.direction.transformDirection(l),e++}}},state:i}}function qu(W,y){const M=new du(W,y),U=[],i=[];return{init:function(){U.length=0,i.length=0},state:{lightsArray:U,shadowsArray:i,lights:M},setupLights:function(W){M.setup(U,W)},setupLightsView:function(W){M.setupView(U,W)},pushLight:function(W){U.push(W)},pushShadow:function(W){i.push(W)}}}function su(W,y){let M=new WeakMap;return{get:function(U,i=0){const x=M.get(U);let n;return void 0===x?(n=new qu(W,y),M.set(U,[n])):i>=x.length?(n=new qu(W,y),x.push(n)):n=x[i],n},dispose:function(){M=new WeakMap}}}class Nu extends fx{constructor(W){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=fM,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(W)}copy(W){return super.copy(W),this.depthPacking=W.depthPacking,this.map=W.map,this.alphaMap=W.alphaMap,this.displacementMap=W.displacementMap,this.displacementScale=W.displacementScale,this.displacementBias=W.displacementBias,this.wireframe=W.wireframe,this.wireframeLinewidth=W.wireframeLinewidth,this}}class _u extends fx{constructor(W){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(W)}copy(W){return super.copy(W),this.map=W.map,this.alphaMap=W.alphaMap,this.displacementMap=W.displacementMap,this.displacementScale=W.displacementScale,this.displacementBias=W.displacementBias,this}}const pu="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",bu="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function mu(W,y,M){let U=new xk;const i=new LU,x=new LU,n=new ci,k=new Nu({depthPacking:VM}),g=new _u,u={},e=M.maxTextureSize,l={[rW]:AW,[AW]:rW,[TW]:TW},G=new Ln({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new LU},radius:{value:4}},vertexShader:pu,fragmentShader:bu}),Y=G.clone();Y.defines.HORIZONTAL_PASS=1;const c=new Tn;c.setAttribute("position",new Qx(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const D=new En(c,G),r=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=YW;let A=this.type;function T(M,U){const x=y.update(D);G.defines.VSM_SAMPLES!==M.blurSamples&&(G.defines.VSM_SAMPLES=M.blurSamples,Y.defines.VSM_SAMPLES=M.blurSamples,G.needsUpdate=!0,Y.needsUpdate=!0),null===M.mapPass&&(M.mapPass=new ri(i.x,i.y)),G.uniforms.shadow_pass.value=M.map.texture,G.uniforms.resolution.value=M.mapSize,G.uniforms.radius.value=M.radius,W.setRenderTarget(M.mapPass),W.clear(),W.renderBufferDirect(U,null,x,G,D,null),Y.uniforms.shadow_pass.value=M.mapPass.texture,Y.uniforms.resolution.value=M.mapSize,Y.uniforms.radius.value=M.radius,W.setRenderTarget(M.map),W.clear(),W.renderBufferDirect(U,null,x,Y,D,null)}function O(y,M,U,i){let x=null;const n=!0===U.isPointLight?y.customDistanceMaterial:y.customDepthMaterial;if(void 0!==n)x=n;else if(x=!0===U.isPointLight?g:k,W.localClippingEnabled&&!0===M.clipShadows&&Array.isArray(M.clippingPlanes)&&0!==M.clippingPlanes.length||M.displacementMap&&0!==M.displacementScale||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const W=x.uuid,y=M.uuid;let U=u[W];void 0===U&&(U={},u[W]=U);let i=U[y];void 0===i&&(i=x.clone(),U[y]=i),x=i}return x.visible=M.visible,x.wireframe=M.wireframe,x.side=i===DW?null!==M.shadowSide?M.shadowSide:M.side:null!==M.shadowSide?M.shadowSide:l[M.side],x.alphaMap=M.alphaMap,x.alphaTest=M.alphaTest,x.map=M.map,x.clipShadows=M.clipShadows,x.clippingPlanes=M.clippingPlanes,x.clipIntersection=M.clipIntersection,x.displacementMap=M.displacementMap,x.displacementScale=M.displacementScale,x.displacementBias=M.displacementBias,x.wireframeLinewidth=M.wireframeLinewidth,x.linewidth=M.linewidth,!0===U.isPointLight&&!0===x.isMeshDistanceMaterial&&(W.properties.get(x).light=U),x}function h(M,i,x,n,k){if(!1===M.visible)return;if(M.layers.test(i.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&k===DW)&&(!M.frustumCulled||U.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(x.matrixWorldInverse,M.matrixWorld);const U=y.update(M),i=M.material;if(Array.isArray(i)){const y=U.groups;for(let g=0,u=y.length;g<u;g++){const u=y[g],e=i[u.materialIndex];if(e&&e.visible){const y=O(M,e,n,k);W.renderBufferDirect(x,null,U,y,M,u)}}}else if(i.visible){const y=O(M,i,n,k);W.renderBufferDirect(x,null,U,y,M,null)}}const g=M.children;for(let W=0,y=g.length;W<y;W++)h(g[W],i,x,n,k)}this.render=function(y,M,k){if(!1===r.enabled)return;if(!1===r.autoUpdate&&!1===r.needsUpdate)return;if(0===y.length)return;const g=W.getRenderTarget(),u=W.getActiveCubeFace(),l=W.getActiveMipmapLevel(),G=W.state;G.setBlending(hW),G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);const Y=A!==DW&&this.type===DW,c=A===DW&&this.type!==DW;for(let g=0,u=y.length;g<u;g++){const u=y[g],l=u.shadow;if(void 0===l){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===l.autoUpdate&&!1===l.needsUpdate)continue;i.copy(l.mapSize);const D=l.getFrameExtents();if(i.multiply(D),x.copy(l.mapSize),(i.x>e||i.y>e)&&(i.x>e&&(x.x=Math.floor(e/D.x),i.x=x.x*D.x,l.mapSize.x=x.x),i.y>e&&(x.y=Math.floor(e/D.y),i.y=x.y*D.y,l.mapSize.y=x.y)),null===l.map||!0===Y||!0===c){const W=this.type!==DW?{minFilter:cy,magFilter:cy}:{};null!==l.map&&l.map.dispose(),l.map=new ri(i.x,i.y,W),l.map.texture.name=u.name+".shadowMap",l.camera.updateProjectionMatrix()}W.setRenderTarget(l.map),W.clear();const r=l.getViewportCount();for(let W=0;W<r;W++){const y=l.getViewport(W);n.set(x.x*y.x,x.y*y.y,x.x*y.z,x.y*y.w),G.viewport(n),l.updateMatrices(u,W),U=l.getFrustum(),h(M,k,l.camera,u,this.type)}!0!==l.isPointLightShadow&&this.type===DW&&T(l,k),l.needsUpdate=!1}A=this.type,r.needsUpdate=!1,W.setRenderTarget(g,u,l)}}function zu(W,y,M){const U=M.isWebGL2,i=new function(){let y=!1;const M=new ci;let U=null;const i=new ci(0,0,0,0);return{setMask:function(M){U===M||y||(W.colorMask(M,M,M,M),U=M)},setLocked:function(W){y=W},setClear:function(y,U,x,n,k){!0===k&&(y*=n,U*=n,x*=n),M.set(y,U,x,n),!1===i.equals(M)&&(W.clearColor(y,U,x,n),i.copy(M))},reset:function(){y=!1,U=null,i.set(-1,0,0,0)}}},x=new function(){let y=!1,M=null,U=null,i=null;return{setTest:function(y){y?$(W.DEPTH_TEST):a(W.DEPTH_TEST)},setMask:function(U){M===U||y||(W.depthMask(U),M=U)},setFunc:function(y){if(U!==y){switch(y){case HW:W.depthFunc(W.NEVER);break;case BW:W.depthFunc(W.ALWAYS);break;case vW:W.depthFunc(W.LESS);break;case LW:W.depthFunc(W.LEQUAL);break;case XW:W.depthFunc(W.EQUAL);break;case wW:W.depthFunc(W.GEQUAL);break;case FW:W.depthFunc(W.GREATER);break;case tW:W.depthFunc(W.NOTEQUAL);break;default:W.depthFunc(W.LEQUAL)}U=y}},setLocked:function(W){y=W},setClear:function(y){i!==y&&(W.clearDepth(y),i=y)},reset:function(){y=!1,M=null,U=null,i=null}}},n=new function(){let y=!1,M=null,U=null,i=null,x=null,n=null,k=null,g=null,u=null;return{setTest:function(M){y||(M?$(W.STENCIL_TEST):a(W.STENCIL_TEST))},setMask:function(U){M===U||y||(W.stencilMask(U),M=U)},setFunc:function(y,M,n){U===y&&i===M&&x===n||(W.stencilFunc(y,M,n),U=y,i=M,x=n)},setOp:function(y,M,U){n===y&&k===M&&g===U||(W.stencilOp(y,M,U),n=y,k=M,g=U)},setLocked:function(W){y=W},setClear:function(y){u!==y&&(W.clearStencil(y),u=y)},reset:function(){y=!1,M=null,U=null,i=null,x=null,n=null,k=null,g=null,u=null}}},k=new WeakMap,g=new WeakMap;let u={},e={},l=new WeakMap,G=[],Y=null,c=!1,D=null,r=null,A=null,T=null,O=null,h=null,S=null,o=!1,d=null,q=null,s=null,N=null,_=null;const p=W.getParameter(W.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let b=!1,m=0;const z=W.getParameter(W.VERSION);-1!==z.indexOf("WebGL")?(m=parseFloat(/^WebGL (\d)/.exec(z)[1]),b=m>=1):-1!==z.indexOf("OpenGL ES")&&(m=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),b=m>=2);let K=null,P={};const R=W.getParameter(W.SCISSOR_BOX),I=W.getParameter(W.VIEWPORT),E=(new ci).fromArray(R),Z=(new ci).fromArray(I);function f(y,M,i,x){const n=new Uint8Array(4),k=W.createTexture();W.bindTexture(y,k),W.texParameteri(y,W.TEXTURE_MIN_FILTER,W.NEAREST),W.texParameteri(y,W.TEXTURE_MAG_FILTER,W.NEAREST);for(let k=0;k<i;k++)!U||y!==W.TEXTURE_3D&&y!==W.TEXTURE_2D_ARRAY?W.texImage2D(M+k,0,W.RGBA,1,1,0,W.RGBA,W.UNSIGNED_BYTE,n):W.texImage3D(M,0,W.RGBA,1,1,x,0,W.RGBA,W.UNSIGNED_BYTE,n);return k}const V={};function $(y){!0!==u[y]&&(W.enable(y),u[y]=!0)}function a(y){!1!==u[y]&&(W.disable(y),u[y]=!1)}V[W.TEXTURE_2D]=f(W.TEXTURE_2D,W.TEXTURE_2D,1),V[W.TEXTURE_CUBE_MAP]=f(W.TEXTURE_CUBE_MAP,W.TEXTURE_CUBE_MAP_POSITIVE_X,6),U&&(V[W.TEXTURE_2D_ARRAY]=f(W.TEXTURE_2D_ARRAY,W.TEXTURE_2D_ARRAY,1,1),V[W.TEXTURE_3D]=f(W.TEXTURE_3D,W.TEXTURE_3D,1,1)),i.setClear(0,0,0,1),x.setClear(1),n.setClear(0),$(W.DEPTH_TEST),x.setFunc(LW),L(!1),X(uW),$(W.CULL_FACE),v(hW);const H={[NW]:W.FUNC_ADD,[_W]:W.FUNC_SUBTRACT,[pW]:W.FUNC_REVERSE_SUBTRACT};if(U)H[bW]=W.MIN,H[mW]=W.MAX;else{const W=y.get("EXT_blend_minmax");null!==W&&(H[bW]=W.MIN_EXT,H[mW]=W.MAX_EXT)}const B={[zW]:W.ZERO,[KW]:W.ONE,[PW]:W.SRC_COLOR,[IW]:W.SRC_ALPHA,[aW]:W.SRC_ALPHA_SATURATE,[VW]:W.DST_COLOR,[ZW]:W.DST_ALPHA,[RW]:W.ONE_MINUS_SRC_COLOR,[EW]:W.ONE_MINUS_SRC_ALPHA,[$W]:W.ONE_MINUS_DST_COLOR,[fW]:W.ONE_MINUS_DST_ALPHA};function v(y,M,U,i,x,n,k,g){if(y!==hW){if(!1===c&&($(W.BLEND),c=!0),y===sW)x=x||M,n=n||U,k=k||i,M===r&&x===O||(W.blendEquationSeparate(H[M],H[x]),r=M,O=x),U===A&&i===T&&n===h&&k===S||(W.blendFuncSeparate(B[U],B[i],B[n],B[k]),A=U,T=i,h=n,S=k),D=y,o=!1;else if(y!==D||g!==o){if(r===NW&&O===NW||(W.blendEquation(W.FUNC_ADD),r=NW,O=NW),g)switch(y){case SW:W.blendFuncSeparate(W.ONE,W.ONE_MINUS_SRC_ALPHA,W.ONE,W.ONE_MINUS_SRC_ALPHA);break;case oW:W.blendFunc(W.ONE,W.ONE);break;case dW:W.blendFuncSeparate(W.ZERO,W.ONE_MINUS_SRC_COLOR,W.ZERO,W.ONE);break;case qW:W.blendFuncSeparate(W.ZERO,W.SRC_COLOR,W.ZERO,W.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",y)}else switch(y){case SW:W.blendFuncSeparate(W.SRC_ALPHA,W.ONE_MINUS_SRC_ALPHA,W.ONE,W.ONE_MINUS_SRC_ALPHA);break;case oW:W.blendFunc(W.SRC_ALPHA,W.ONE);break;case dW:W.blendFuncSeparate(W.ZERO,W.ONE_MINUS_SRC_COLOR,W.ZERO,W.ONE);break;case qW:W.blendFunc(W.ZERO,W.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",y)}A=null,T=null,h=null,S=null,D=y,o=g}}else!0===c&&(a(W.BLEND),c=!1)}function L(y){d!==y&&(y?W.frontFace(W.CW):W.frontFace(W.CCW),d=y)}function X(y){y!==gW?($(W.CULL_FACE),y!==q&&(y===uW?W.cullFace(W.BACK):y===eW?W.cullFace(W.FRONT):W.cullFace(W.FRONT_AND_BACK))):a(W.CULL_FACE),q=y}function w(y,M,U){y?($(W.POLYGON_OFFSET_FILL),N===M&&_===U||(W.polygonOffset(M,U),N=M,_=U)):a(W.POLYGON_OFFSET_FILL)}return{buffers:{color:i,depth:x,stencil:n},enable:$,disable:a,bindFramebuffer:function(y,M){return e[y]!==M&&(W.bindFramebuffer(y,M),e[y]=M,U&&(y===W.DRAW_FRAMEBUFFER&&(e[W.FRAMEBUFFER]=M),y===W.FRAMEBUFFER&&(e[W.DRAW_FRAMEBUFFER]=M)),!0)},drawBuffers:function(U,i){let x=G,n=!1;if(U)if(x=l.get(i),void 0===x&&(x=[],l.set(i,x)),U.isWebGLMultipleRenderTargets){const y=U.texture;if(x.length!==y.length||x[0]!==W.COLOR_ATTACHMENT0){for(let M=0,U=y.length;M<U;M++)x[M]=W.COLOR_ATTACHMENT0+M;x.length=y.length,n=!0}}else x[0]!==W.COLOR_ATTACHMENT0&&(x[0]=W.COLOR_ATTACHMENT0,n=!0);else x[0]!==W.BACK&&(x[0]=W.BACK,n=!0);n&&(M.isWebGL2?W.drawBuffers(x):y.get("WEBGL_draw_buffers").drawBuffersWEBGL(x))},useProgram:function(y){return Y!==y&&(W.useProgram(y),Y=y,!0)},setBlending:v,setMaterial:function(y,M){y.side===TW?a(W.CULL_FACE):$(W.CULL_FACE);let U=y.side===AW;M&&(U=!U),L(U),y.blending===SW&&!1===y.transparent?v(hW):v(y.blending,y.blendEquation,y.blendSrc,y.blendDst,y.blendEquationAlpha,y.blendSrcAlpha,y.blendDstAlpha,y.premultipliedAlpha),x.setFunc(y.depthFunc),x.setTest(y.depthTest),x.setMask(y.depthWrite),i.setMask(y.colorWrite);const k=y.stencilWrite;n.setTest(k),k&&(n.setMask(y.stencilWriteMask),n.setFunc(y.stencilFunc,y.stencilRef,y.stencilFuncMask),n.setOp(y.stencilFail,y.stencilZFail,y.stencilZPass)),w(y.polygonOffset,y.polygonOffsetFactor,y.polygonOffsetUnits),!0===y.alphaToCoverage?$(W.SAMPLE_ALPHA_TO_COVERAGE):a(W.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:L,setCullFace:X,setLineWidth:function(y){y!==s&&(b&&W.lineWidth(y),s=y)},setPolygonOffset:w,setScissorTest:function(y){y?$(W.SCISSOR_TEST):a(W.SCISSOR_TEST)},activeTexture:function(y){void 0===y&&(y=W.TEXTURE0+p-1),K!==y&&(W.activeTexture(y),K=y)},bindTexture:function(y,M,U){void 0===U&&(U=null===K?W.TEXTURE0+p-1:K);let i=P[U];void 0===i&&(i={type:void 0,texture:void 0},P[U]=i),i.type===y&&i.texture===M||(K!==U&&(W.activeTexture(U),K=U),W.bindTexture(y,M||V[y]),i.type=y,i.texture=M)},unbindTexture:function(){const y=P[K];void 0!==y&&void 0!==y.type&&(W.bindTexture(y.type,null),y.type=void 0,y.texture=void 0)},compressedTexImage2D:function(){try{W.compressedTexImage2D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},compressedTexImage3D:function(){try{W.compressedTexImage3D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},texImage2D:function(){try{W.texImage2D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},texImage3D:function(){try{W.texImage3D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},updateUBOMapping:function(y,M){let U=g.get(M);void 0===U&&(U=new WeakMap,g.set(M,U));let i=U.get(y);void 0===i&&(i=W.getUniformBlockIndex(M,y.name),U.set(y,i))},uniformBlockBinding:function(y,M){const U=g.get(M).get(y);k.get(M)!==U&&(W.uniformBlockBinding(M,U,y.__bindingPointIndex),k.set(M,U))},texStorage2D:function(){try{W.texStorage2D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},texStorage3D:function(){try{W.texStorage3D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},texSubImage2D:function(){try{W.texSubImage2D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},texSubImage3D:function(){try{W.texSubImage3D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},compressedTexSubImage2D:function(){try{W.compressedTexSubImage2D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},compressedTexSubImage3D:function(){try{W.compressedTexSubImage3D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},scissor:function(y){!1===E.equals(y)&&(W.scissor(y.x,y.y,y.z,y.w),E.copy(y))},viewport:function(y){!1===Z.equals(y)&&(W.viewport(y.x,y.y,y.z,y.w),Z.copy(y))},reset:function(){W.disable(W.BLEND),W.disable(W.CULL_FACE),W.disable(W.DEPTH_TEST),W.disable(W.POLYGON_OFFSET_FILL),W.disable(W.SCISSOR_TEST),W.disable(W.STENCIL_TEST),W.disable(W.SAMPLE_ALPHA_TO_COVERAGE),W.blendEquation(W.FUNC_ADD),W.blendFunc(W.ONE,W.ZERO),W.blendFuncSeparate(W.ONE,W.ZERO,W.ONE,W.ZERO),W.colorMask(!0,!0,!0,!0),W.clearColor(0,0,0,0),W.depthMask(!0),W.depthFunc(W.LESS),W.clearDepth(1),W.stencilMask(4294967295),W.stencilFunc(W.ALWAYS,0,4294967295),W.stencilOp(W.KEEP,W.KEEP,W.KEEP),W.clearStencil(0),W.cullFace(W.BACK),W.frontFace(W.CCW),W.polygonOffset(0,0),W.activeTexture(W.TEXTURE0),W.bindFramebuffer(W.FRAMEBUFFER,null),!0===U&&(W.bindFramebuffer(W.DRAW_FRAMEBUFFER,null),W.bindFramebuffer(W.READ_FRAMEBUFFER,null)),W.useProgram(null),W.lineWidth(1),W.scissor(0,0,W.canvas.width,W.canvas.height),W.viewport(0,0,W.canvas.width,W.canvas.height),u={},K=null,P={},e={},l=new WeakMap,G=[],Y=null,c=!1,D=null,r=null,A=null,T=null,O=null,h=null,S=null,o=!1,d=null,q=null,s=null,N=null,_=null,E.set(0,0,W.canvas.width,W.canvas.height),Z.set(0,0,W.canvas.width,W.canvas.height),i.reset(),x.reset(),n.reset()}}}function Ku(W,y,M,U,i,x,n){const k=i.isWebGL2,g=i.maxTextures,u=i.maxCubemapSize,e=i.maxTextureSize,l=i.maxSamples,G=y.has("WEBGL_multisampled_render_to_texture")?y.get("WEBGL_multisampled_render_to_texture"):null,Y="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new WeakMap;let D;const r=new WeakMap;let A=!1;try{A="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(W){}function T(W,y){return A?new OffscreenCanvas(W,y):jU("canvas")}function O(W,y,M,U){let i=1;if((W.width>U||W.height>U)&&(i=U/Math.max(W.width,W.height)),i<1||!0===y){if("undefined"!=typeof HTMLImageElement&&W instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&W instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&W instanceof ImageBitmap){const U=y?aU:Math.floor,x=U(i*W.width),n=U(i*W.height);void 0===D&&(D=T(x,n));const k=M?T(x,n):D;return k.width=x,k.height=n,k.getContext("2d").drawImage(W,0,0,x,n),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+W.width+"x"+W.height+") to ("+x+"x"+n+")."),k}return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+W.width+"x"+W.height+")."),W}return W}function h(W){return VU(W.width)&&VU(W.height)}function S(W,y){return W.generateMipmaps&&y&&W.minFilter!==cy&&W.minFilter!==Oy}function o(y){W.generateMipmap(y)}function d(M,U,i,x,n=!1){if(!1===k)return U;if(null!==M){if(void 0!==W[M])return W[M];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+M+"'")}let g=U;return U===W.RED&&(i===W.FLOAT&&(g=W.R32F),i===W.HALF_FLOAT&&(g=W.R16F),i===W.UNSIGNED_BYTE&&(g=W.R8)),U===W.RED_INTEGER&&(i===W.UNSIGNED_BYTE&&(g=W.R8UI),i===W.UNSIGNED_SHORT&&(g=W.R16UI),i===W.UNSIGNED_INT&&(g=W.R32UI),i===W.BYTE&&(g=W.R8I),i===W.SHORT&&(g=W.R16I),i===W.INT&&(g=W.R32I)),U===W.RG&&(i===W.FLOAT&&(g=W.RG32F),i===W.HALF_FLOAT&&(g=W.RG16F),i===W.UNSIGNED_BYTE&&(g=W.RG8)),U===W.RGBA&&(i===W.FLOAT&&(g=W.RGBA32F),i===W.HALF_FLOAT&&(g=W.RGBA16F),i===W.UNSIGNED_BYTE&&(g=x===BM&&!1===n?W.SRGB8_ALPHA8:W.RGBA8),i===W.UNSIGNED_SHORT_4_4_4_4&&(g=W.RGBA4),i===W.UNSIGNED_SHORT_5_5_5_1&&(g=W.RGB5_A1)),g!==W.R16F&&g!==W.R32F&&g!==W.RG16F&&g!==W.RG32F&&g!==W.RGBA16F&&g!==W.RGBA32F||y.get("EXT_color_buffer_float"),g}function q(W,y,M){return!0===S(W,M)||W.isFramebufferTexture&&W.minFilter!==cy&&W.minFilter!==Oy?Math.log2(Math.max(y.width,y.height))+1:void 0!==W.mipmaps&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?y.mipmaps.length:1}function s(y){return y===cy||y===Dy||y===Ay?W.NEAREST:W.LINEAR}function N(W){const y=W.target;y.removeEventListener("dispose",N),function(W){const y=U.get(W);if(void 0===y.__webglInit)return;const M=W.source,i=r.get(M);if(i){const U=i[y.__cacheKey];U.usedTimes--,0===U.usedTimes&&p(W),0===Object.keys(i).length&&r.delete(M)}U.remove(W)}(y),y.isVideoTexture&&c.delete(y)}function _(y){const M=y.target;M.removeEventListener("dispose",_),function(y){const M=y.texture,i=U.get(y),x=U.get(M);if(void 0!==x.__webglTexture&&(W.deleteTexture(x.__webglTexture),n.memory.textures--),y.depthTexture&&y.depthTexture.dispose(),y.isWebGLCubeRenderTarget)for(let y=0;y<6;y++){if(Array.isArray(i.__webglFramebuffer[y]))for(let M=0;M<i.__webglFramebuffer[y].length;M++)W.deleteFramebuffer(i.__webglFramebuffer[y][M]);else W.deleteFramebuffer(i.__webglFramebuffer[y]);i.__webglDepthbuffer&&W.deleteRenderbuffer(i.__webglDepthbuffer[y])}else{if(Array.isArray(i.__webglFramebuffer))for(let y=0;y<i.__webglFramebuffer.length;y++)W.deleteFramebuffer(i.__webglFramebuffer[y]);else W.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer&&W.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&W.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let y=0;y<i.__webglColorRenderbuffer.length;y++)i.__webglColorRenderbuffer[y]&&W.deleteRenderbuffer(i.__webglColorRenderbuffer[y]);i.__webglDepthRenderbuffer&&W.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(y.isWebGLMultipleRenderTargets)for(let y=0,i=M.length;y<i;y++){const i=U.get(M[y]);i.__webglTexture&&(W.deleteTexture(i.__webglTexture),n.memory.textures--),U.remove(M[y])}U.remove(M),U.remove(y)}(M)}function p(y){const M=U.get(y);W.deleteTexture(M.__webglTexture);const i=y.source;delete r.get(i)[M.__cacheKey],n.memory.textures--}let b=0;function m(y,i){const x=U.get(y);if(y.isVideoTexture&&function(W){const y=n.render.frame;c.get(W)!==y&&(c.set(W,y),W.update())}(y),!1===y.isRenderTargetTexture&&y.version>0&&x.__version!==y.version){const W=y.image;if(null===W)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==W.complete)return void E(x,y,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}M.bindTexture(W.TEXTURE_2D,x.__webglTexture,W.TEXTURE0+i)}const z={[ly]:W.REPEAT,[Gy]:W.CLAMP_TO_EDGE,[Yy]:W.MIRRORED_REPEAT},K={[cy]:W.NEAREST,[Dy]:W.NEAREST_MIPMAP_NEAREST,[Ay]:W.NEAREST_MIPMAP_LINEAR,[Oy]:W.LINEAR,[hy]:W.LINEAR_MIPMAP_NEAREST,[oy]:W.LINEAR_MIPMAP_LINEAR},P={[gU]:W.NEVER,[DU]:W.ALWAYS,[uU]:W.LESS,[lU]:W.LEQUAL,[eU]:W.EQUAL,[cU]:W.GEQUAL,[GU]:W.GREATER,[YU]:W.NOTEQUAL};function R(M,x,n){if(n?(W.texParameteri(M,W.TEXTURE_WRAP_S,z[x.wrapS]),W.texParameteri(M,W.TEXTURE_WRAP_T,z[x.wrapT]),M!==W.TEXTURE_3D&&M!==W.TEXTURE_2D_ARRAY||W.texParameteri(M,W.TEXTURE_WRAP_R,z[x.wrapR]),W.texParameteri(M,W.TEXTURE_MAG_FILTER,K[x.magFilter]),W.texParameteri(M,W.TEXTURE_MIN_FILTER,K[x.minFilter])):(W.texParameteri(M,W.TEXTURE_WRAP_S,W.CLAMP_TO_EDGE),W.texParameteri(M,W.TEXTURE_WRAP_T,W.CLAMP_TO_EDGE),M!==W.TEXTURE_3D&&M!==W.TEXTURE_2D_ARRAY||W.texParameteri(M,W.TEXTURE_WRAP_R,W.CLAMP_TO_EDGE),x.wrapS===Gy&&x.wrapT===Gy||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),W.texParameteri(M,W.TEXTURE_MAG_FILTER,s(x.magFilter)),W.texParameteri(M,W.TEXTURE_MIN_FILTER,s(x.minFilter)),x.minFilter!==cy&&x.minFilter!==Oy&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),x.compareFunction&&(W.texParameteri(M,W.TEXTURE_COMPARE_MODE,W.COMPARE_REF_TO_TEXTURE),W.texParameteri(M,W.TEXTURE_COMPARE_FUNC,P[x.compareFunction])),!0===y.has("EXT_texture_filter_anisotropic")){const n=y.get("EXT_texture_filter_anisotropic");if(x.magFilter===cy)return;if(x.minFilter!==Ay&&x.minFilter!==oy)return;if(x.type===my&&!1===y.has("OES_texture_float_linear"))return;if(!1===k&&x.type===zy&&!1===y.has("OES_texture_half_float_linear"))return;(x.anisotropy>1||U.get(x).__currentAnisotropy)&&(W.texParameterf(M,n.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(x.anisotropy,i.getMaxAnisotropy())),U.get(x).__currentAnisotropy=x.anisotropy)}}function I(y,M){let U=!1;void 0===y.__webglInit&&(y.__webglInit=!0,M.addEventListener("dispose",N));const i=M.source;let x=r.get(i);void 0===x&&(x={},r.set(i,x));const k=function(W){const y=[];return y.push(W.wrapS),y.push(W.wrapT),y.push(W.wrapR||0),y.push(W.magFilter),y.push(W.minFilter),y.push(W.anisotropy),y.push(W.internalFormat),y.push(W.format),y.push(W.type),y.push(W.generateMipmaps),y.push(W.premultiplyAlpha),y.push(W.flipY),y.push(W.unpackAlignment),y.push(W.colorSpace),y.join()}(M);if(k!==y.__cacheKey){void 0===x[k]&&(x[k]={texture:W.createTexture(),usedTimes:0},n.memory.textures++,U=!0),x[k].usedTimes++;const i=x[y.__cacheKey];void 0!==i&&(x[y.__cacheKey].usedTimes--,0===i.usedTimes&&p(M)),y.__cacheKey=k,y.__webglTexture=x[k].texture}return U}function E(y,i,n){let g=W.TEXTURE_2D;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(g=W.TEXTURE_2D_ARRAY),i.isData3DTexture&&(g=W.TEXTURE_3D);const u=I(y,i),l=i.source;M.bindTexture(g,y.__webglTexture,W.TEXTURE0+n);const G=U.get(l);if(l.version!==G.__version||!0===u){M.activeTexture(W.TEXTURE0+n),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,i.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,i.unpackAlignment),W.pixelStorei(W.UNPACK_COLORSPACE_CONVERSION_WEBGL,W.NONE);const y=function(W){return!k&&(W.wrapS!==Gy||W.wrapT!==Gy||W.minFilter!==cy&&W.minFilter!==Oy)}(i)&&!1===h(i.image);let U=O(i.image,y,!1,e);U=H(i,U);const Y=h(U)||k,c=x.convert(i.format,i.colorSpace);let D,r=x.convert(i.type),A=d(i.internalFormat,c,r,i.colorSpace);R(g,i,Y);const T=i.mipmaps,s=k&&!0!==i.isVideoTexture,N=void 0===G.__version||!0===u,_=q(i,U,Y);if(i.isDepthTexture)A=W.DEPTH_COMPONENT,k?A=i.type===my?W.DEPTH_COMPONENT32F:i.type===by?W.DEPTH_COMPONENT24:i.type===Ry?W.DEPTH24_STENCIL8:W.DEPTH_COMPONENT16:i.type===my&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Vy&&A===W.DEPTH_COMPONENT&&i.type!==_y&&i.type!==by&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=by,r=x.convert(i.type)),i.format===$y&&A===W.DEPTH_COMPONENT&&(A=W.DEPTH_STENCIL,i.type!==Ry&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Ry,r=x.convert(i.type))),N&&(s?M.texStorage2D(W.TEXTURE_2D,1,A,U.width,U.height):M.texImage2D(W.TEXTURE_2D,0,A,U.width,U.height,0,c,r,null));else if(i.isDataTexture)if(T.length>0&&Y){s&&N&&M.texStorage2D(W.TEXTURE_2D,_,A,T[0].width,T[0].height);for(let y=0,U=T.length;y<U;y++)D=T[y],s?M.texSubImage2D(W.TEXTURE_2D,y,0,0,D.width,D.height,c,r,D.data):M.texImage2D(W.TEXTURE_2D,y,A,D.width,D.height,0,c,r,D.data);i.generateMipmaps=!1}else s?(N&&M.texStorage2D(W.TEXTURE_2D,_,A,U.width,U.height),M.texSubImage2D(W.TEXTURE_2D,0,0,0,U.width,U.height,c,r,U.data)):M.texImage2D(W.TEXTURE_2D,0,A,U.width,U.height,0,c,r,U.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){s&&N&&M.texStorage3D(W.TEXTURE_2D_ARRAY,_,A,T[0].width,T[0].height,U.depth);for(let y=0,x=T.length;y<x;y++)D=T[y],i.format!==Ey?null!==c?s?M.compressedTexSubImage3D(W.TEXTURE_2D_ARRAY,y,0,0,0,D.width,D.height,U.depth,c,D.data,0,0):M.compressedTexImage3D(W.TEXTURE_2D_ARRAY,y,A,D.width,D.height,U.depth,0,D.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):s?M.texSubImage3D(W.TEXTURE_2D_ARRAY,y,0,0,0,D.width,D.height,U.depth,c,r,D.data):M.texImage3D(W.TEXTURE_2D_ARRAY,y,A,D.width,D.height,U.depth,0,c,r,D.data)}else{s&&N&&M.texStorage2D(W.TEXTURE_2D,_,A,T[0].width,T[0].height);for(let y=0,U=T.length;y<U;y++)D=T[y],i.format!==Ey?null!==c?s?M.compressedTexSubImage2D(W.TEXTURE_2D,y,0,0,D.width,D.height,c,D.data):M.compressedTexImage2D(W.TEXTURE_2D,y,A,D.width,D.height,0,D.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):s?M.texSubImage2D(W.TEXTURE_2D,y,0,0,D.width,D.height,c,r,D.data):M.texImage2D(W.TEXTURE_2D,y,A,D.width,D.height,0,c,r,D.data)}else if(i.isDataArrayTexture)s?(N&&M.texStorage3D(W.TEXTURE_2D_ARRAY,_,A,U.width,U.height,U.depth),M.texSubImage3D(W.TEXTURE_2D_ARRAY,0,0,0,0,U.width,U.height,U.depth,c,r,U.data)):M.texImage3D(W.TEXTURE_2D_ARRAY,0,A,U.width,U.height,U.depth,0,c,r,U.data);else if(i.isData3DTexture)s?(N&&M.texStorage3D(W.TEXTURE_3D,_,A,U.width,U.height,U.depth),M.texSubImage3D(W.TEXTURE_3D,0,0,0,0,U.width,U.height,U.depth,c,r,U.data)):M.texImage3D(W.TEXTURE_3D,0,A,U.width,U.height,U.depth,0,c,r,U.data);else if(i.isFramebufferTexture){if(N)if(s)M.texStorage2D(W.TEXTURE_2D,_,A,U.width,U.height);else{let y=U.width,i=U.height;for(let U=0;U<_;U++)M.texImage2D(W.TEXTURE_2D,U,A,y,i,0,c,r,null),y>>=1,i>>=1}}else if(T.length>0&&Y){s&&N&&M.texStorage2D(W.TEXTURE_2D,_,A,T[0].width,T[0].height);for(let y=0,U=T.length;y<U;y++)D=T[y],s?M.texSubImage2D(W.TEXTURE_2D,y,0,0,c,r,D):M.texImage2D(W.TEXTURE_2D,y,A,c,r,D);i.generateMipmaps=!1}else s?(N&&M.texStorage2D(W.TEXTURE_2D,_,A,U.width,U.height),M.texSubImage2D(W.TEXTURE_2D,0,0,0,c,r,U)):M.texImage2D(W.TEXTURE_2D,0,A,c,r,U);S(i,Y)&&o(g),G.__version=l.version,i.onUpdate&&i.onUpdate(i)}y.__version=i.version}function Z(y,i,n,k,g,u){const e=x.convert(n.format,n.colorSpace),l=x.convert(n.type),Y=d(n.internalFormat,e,l,n.colorSpace);if(!U.get(i).__hasExternalTextures){const y=Math.max(1,i.width>>u),U=Math.max(1,i.height>>u);g===W.TEXTURE_3D||g===W.TEXTURE_2D_ARRAY?M.texImage3D(g,u,Y,y,U,i.depth,0,e,l,null):M.texImage2D(g,u,Y,y,U,0,e,l,null)}M.bindFramebuffer(W.FRAMEBUFFER,y),a(i)?G.framebufferTexture2DMultisampleEXT(W.FRAMEBUFFER,k,g,U.get(n).__webglTexture,0,$(i)):(g===W.TEXTURE_2D||g>=W.TEXTURE_CUBE_MAP_POSITIVE_X&&g<=W.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&W.framebufferTexture2D(W.FRAMEBUFFER,k,g,U.get(n).__webglTexture,u),M.bindFramebuffer(W.FRAMEBUFFER,null)}function f(y,M,U){if(W.bindRenderbuffer(W.RENDERBUFFER,y),M.depthBuffer&&!M.stencilBuffer){let i=W.DEPTH_COMPONENT16;if(U||a(M)){const y=M.depthTexture;y&&y.isDepthTexture&&(y.type===my?i=W.DEPTH_COMPONENT32F:y.type===by&&(i=W.DEPTH_COMPONENT24));const U=$(M);a(M)?G.renderbufferStorageMultisampleEXT(W.RENDERBUFFER,U,i,M.width,M.height):W.renderbufferStorageMultisample(W.RENDERBUFFER,U,i,M.width,M.height)}else W.renderbufferStorage(W.RENDERBUFFER,i,M.width,M.height);W.framebufferRenderbuffer(W.FRAMEBUFFER,W.DEPTH_ATTACHMENT,W.RENDERBUFFER,y)}else if(M.depthBuffer&&M.stencilBuffer){const i=$(M);U&&!1===a(M)?W.renderbufferStorageMultisample(W.RENDERBUFFER,i,W.DEPTH24_STENCIL8,M.width,M.height):a(M)?G.renderbufferStorageMultisampleEXT(W.RENDERBUFFER,i,W.DEPTH24_STENCIL8,M.width,M.height):W.renderbufferStorage(W.RENDERBUFFER,W.DEPTH_STENCIL,M.width,M.height),W.framebufferRenderbuffer(W.FRAMEBUFFER,W.DEPTH_STENCIL_ATTACHMENT,W.RENDERBUFFER,y)}else{const y=!0===M.isWebGLMultipleRenderTargets?M.texture:[M.texture];for(let i=0;i<y.length;i++){const n=y[i],k=x.convert(n.format,n.colorSpace),g=x.convert(n.type),u=d(n.internalFormat,k,g,n.colorSpace),e=$(M);U&&!1===a(M)?W.renderbufferStorageMultisample(W.RENDERBUFFER,e,u,M.width,M.height):a(M)?G.renderbufferStorageMultisampleEXT(W.RENDERBUFFER,e,u,M.width,M.height):W.renderbufferStorage(W.RENDERBUFFER,u,M.width,M.height)}}W.bindRenderbuffer(W.RENDERBUFFER,null)}function V(y){const i=U.get(y),x=!0===y.isWebGLCubeRenderTarget;if(y.depthTexture&&!i.__autoAllocateDepthBuffer){if(x)throw new Error("target.depthTexture not supported in Cube render targets");(function(y,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(M.bindFramebuffer(W.FRAMEBUFFER,y),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");U.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),m(i.depthTexture,0);const x=U.get(i.depthTexture).__webglTexture,n=$(i);if(i.depthTexture.format===Vy)a(i)?G.framebufferTexture2DMultisampleEXT(W.FRAMEBUFFER,W.DEPTH_ATTACHMENT,W.TEXTURE_2D,x,0,n):W.framebufferTexture2D(W.FRAMEBUFFER,W.DEPTH_ATTACHMENT,W.TEXTURE_2D,x,0);else{if(i.depthTexture.format!==$y)throw new Error("Unknown depthTexture format");a(i)?G.framebufferTexture2DMultisampleEXT(W.FRAMEBUFFER,W.DEPTH_STENCIL_ATTACHMENT,W.TEXTURE_2D,x,0,n):W.framebufferTexture2D(W.FRAMEBUFFER,W.DEPTH_STENCIL_ATTACHMENT,W.TEXTURE_2D,x,0)}})(i.__webglFramebuffer,y)}else if(x){i.__webglDepthbuffer=[];for(let U=0;U<6;U++)M.bindFramebuffer(W.FRAMEBUFFER,i.__webglFramebuffer[U]),i.__webglDepthbuffer[U]=W.createRenderbuffer(),f(i.__webglDepthbuffer[U],y,!1)}else M.bindFramebuffer(W.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=W.createRenderbuffer(),f(i.__webglDepthbuffer,y,!1);M.bindFramebuffer(W.FRAMEBUFFER,null)}function $(W){return Math.min(l,W.samples)}function a(W){const M=U.get(W);return k&&W.samples>0&&!0===y.has("WEBGL_multisampled_render_to_texture")&&!1!==M.__useRenderToTexture}function H(W,M){const U=W.colorSpace,i=W.format,x=W.type;return!0===W.isCompressedTexture||W.format===_U||U!==vM&&U!==HM&&(U===BM?!1===k?!0===y.has("EXT_sRGB")&&i===Ey?(W.format=_U,W.minFilter=Oy,W.generateMipmaps=!1):M=gi.sRGBToLinear(M):i===Ey&&x===qy||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",U)),M}this.allocateTextureUnit=function(){const W=b;return W>=g&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+g),b+=1,W},this.resetTextureUnits=function(){b=0},this.setTexture2D=m,this.setTexture2DArray=function(y,i){const x=U.get(y);y.version>0&&x.__version!==y.version?E(x,y,i):M.bindTexture(W.TEXTURE_2D_ARRAY,x.__webglTexture,W.TEXTURE0+i)},this.setTexture3D=function(y,i){const x=U.get(y);y.version>0&&x.__version!==y.version?E(x,y,i):M.bindTexture(W.TEXTURE_3D,x.__webglTexture,W.TEXTURE0+i)},this.setTextureCube=function(y,i){const n=U.get(y);y.version>0&&n.__version!==y.version?function(y,i,n){if(6!==i.image.length)return;const g=I(y,i),e=i.source;M.bindTexture(W.TEXTURE_CUBE_MAP,y.__webglTexture,W.TEXTURE0+n);const l=U.get(e);if(e.version!==l.__version||!0===g){M.activeTexture(W.TEXTURE0+n),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,i.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,i.unpackAlignment),W.pixelStorei(W.UNPACK_COLORSPACE_CONVERSION_WEBGL,W.NONE);const y=i.isCompressedTexture||i.image[0].isCompressedTexture,U=i.image[0]&&i.image[0].isDataTexture,G=[];for(let W=0;W<6;W++)G[W]=y||U?U?i.image[W].image:i.image[W]:O(i.image[W],!1,!0,u),G[W]=H(i,G[W]);const Y=G[0],c=h(Y)||k,D=x.convert(i.format,i.colorSpace),r=x.convert(i.type),A=d(i.internalFormat,D,r,i.colorSpace),T=k&&!0!==i.isVideoTexture,s=void 0===l.__version||!0===g;let N,_=q(i,Y,c);if(R(W.TEXTURE_CUBE_MAP,i,c),y){T&&s&&M.texStorage2D(W.TEXTURE_CUBE_MAP,_,A,Y.width,Y.height);for(let y=0;y<6;y++){N=G[y].mipmaps;for(let U=0;U<N.length;U++){const x=N[U];i.format!==Ey?null!==D?T?M.compressedTexSubImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+y,U,0,0,x.width,x.height,D,x.data):M.compressedTexImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+y,U,A,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):T?M.texSubImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+y,U,0,0,x.width,x.height,D,r,x.data):M.texImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+y,U,A,x.width,x.height,0,D,r,x.data)}}}else{N=i.mipmaps,T&&s&&(N.length>0&&_++,M.texStorage2D(W.TEXTURE_CUBE_MAP,_,A,G[0].width,G[0].height));for(let y=0;y<6;y++)if(U){T?M.texSubImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+y,0,0,0,G[y].width,G[y].height,D,r,G[y].data):M.texImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+y,0,A,G[y].width,G[y].height,0,D,r,G[y].data);for(let U=0;U<N.length;U++){const i=N[U].image[y].image;T?M.texSubImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+y,U+1,0,0,i.width,i.height,D,r,i.data):M.texImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+y,U+1,A,i.width,i.height,0,D,r,i.data)}}else{T?M.texSubImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+y,0,0,0,D,r,G[y]):M.texImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+y,0,A,D,r,G[y]);for(let U=0;U<N.length;U++){const i=N[U];T?M.texSubImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+y,U+1,0,0,D,r,i.image[y]):M.texImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+y,U+1,A,D,r,i.image[y])}}}S(i,c)&&o(W.TEXTURE_CUBE_MAP),l.__version=e.version,i.onUpdate&&i.onUpdate(i)}y.__version=i.version}(n,y,i):M.bindTexture(W.TEXTURE_CUBE_MAP,n.__webglTexture,W.TEXTURE0+i)},this.rebindTextures=function(y,M,i){const x=U.get(y);void 0!==M&&Z(x.__webglFramebuffer,y,y.texture,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,0),void 0!==i&&V(y)},this.setupRenderTarget=function(y){const g=y.texture,u=U.get(y),e=U.get(g);y.addEventListener("dispose",_),!0!==y.isWebGLMultipleRenderTargets&&(void 0===e.__webglTexture&&(e.__webglTexture=W.createTexture()),e.__version=g.version,n.memory.textures++);const l=!0===y.isWebGLCubeRenderTarget,G=!0===y.isWebGLMultipleRenderTargets,Y=h(y)||k;if(l){u.__webglFramebuffer=[];for(let y=0;y<6;y++)if(k&&g.mipmaps&&g.mipmaps.length>0){u.__webglFramebuffer[y]=[];for(let M=0;M<g.mipmaps.length;M++)u.__webglFramebuffer[y][M]=W.createFramebuffer()}else u.__webglFramebuffer[y]=W.createFramebuffer()}else{if(k&&g.mipmaps&&g.mipmaps.length>0){u.__webglFramebuffer=[];for(let y=0;y<g.mipmaps.length;y++)u.__webglFramebuffer[y]=W.createFramebuffer()}else u.__webglFramebuffer=W.createFramebuffer();if(G)if(i.drawBuffers){const M=y.texture;for(let y=0,i=M.length;y<i;y++){const i=U.get(M[y]);void 0===i.__webglTexture&&(i.__webglTexture=W.createTexture(),n.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(k&&y.samples>0&&!1===a(y)){const U=G?g:[g];u.__webglMultisampledFramebuffer=W.createFramebuffer(),u.__webglColorRenderbuffer=[],M.bindFramebuffer(W.FRAMEBUFFER,u.__webglMultisampledFramebuffer);for(let M=0;M<U.length;M++){const i=U[M];u.__webglColorRenderbuffer[M]=W.createRenderbuffer(),W.bindRenderbuffer(W.RENDERBUFFER,u.__webglColorRenderbuffer[M]);const n=x.convert(i.format,i.colorSpace),k=x.convert(i.type),g=d(i.internalFormat,n,k,i.colorSpace,!0===y.isXRRenderTarget),e=$(y);W.renderbufferStorageMultisample(W.RENDERBUFFER,e,g,y.width,y.height),W.framebufferRenderbuffer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0+M,W.RENDERBUFFER,u.__webglColorRenderbuffer[M])}W.bindRenderbuffer(W.RENDERBUFFER,null),y.depthBuffer&&(u.__webglDepthRenderbuffer=W.createRenderbuffer(),f(u.__webglDepthRenderbuffer,y,!0)),M.bindFramebuffer(W.FRAMEBUFFER,null)}}if(l){M.bindTexture(W.TEXTURE_CUBE_MAP,e.__webglTexture),R(W.TEXTURE_CUBE_MAP,g,Y);for(let M=0;M<6;M++)if(k&&g.mipmaps&&g.mipmaps.length>0)for(let U=0;U<g.mipmaps.length;U++)Z(u.__webglFramebuffer[M][U],y,g,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+M,U);else Z(u.__webglFramebuffer[M],y,g,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+M,0);S(g,Y)&&o(W.TEXTURE_CUBE_MAP),M.unbindTexture()}else if(G){const i=y.texture;for(let x=0,n=i.length;x<n;x++){const n=i[x],k=U.get(n);M.bindTexture(W.TEXTURE_2D,k.__webglTexture),R(W.TEXTURE_2D,n,Y),Z(u.__webglFramebuffer,y,n,W.COLOR_ATTACHMENT0+x,W.TEXTURE_2D,0),S(n,Y)&&o(W.TEXTURE_2D)}M.unbindTexture()}else{let U=W.TEXTURE_2D;if((y.isWebGL3DRenderTarget||y.isWebGLArrayRenderTarget)&&(k?U=y.isWebGL3DRenderTarget?W.TEXTURE_3D:W.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),M.bindTexture(U,e.__webglTexture),R(U,g,Y),k&&g.mipmaps&&g.mipmaps.length>0)for(let M=0;M<g.mipmaps.length;M++)Z(u.__webglFramebuffer[M],y,g,W.COLOR_ATTACHMENT0,U,M);else Z(u.__webglFramebuffer,y,g,W.COLOR_ATTACHMENT0,U,0);S(g,Y)&&o(U),M.unbindTexture()}y.depthBuffer&&V(y)},this.updateRenderTargetMipmap=function(y){const i=h(y)||k,x=!0===y.isWebGLMultipleRenderTargets?y.texture:[y.texture];for(let n=0,k=x.length;n<k;n++){const k=x[n];if(S(k,i)){const i=y.isWebGLCubeRenderTarget?W.TEXTURE_CUBE_MAP:W.TEXTURE_2D,x=U.get(k).__webglTexture;M.bindTexture(i,x),o(i),M.unbindTexture()}}},this.updateMultisampleRenderTarget=function(y){if(k&&y.samples>0&&!1===a(y)){const i=y.isWebGLMultipleRenderTargets?y.texture:[y.texture],x=y.width,n=y.height;let k=W.COLOR_BUFFER_BIT;const g=[],u=y.stencilBuffer?W.DEPTH_STENCIL_ATTACHMENT:W.DEPTH_ATTACHMENT,e=U.get(y),l=!0===y.isWebGLMultipleRenderTargets;if(l)for(let y=0;y<i.length;y++)M.bindFramebuffer(W.FRAMEBUFFER,e.__webglMultisampledFramebuffer),W.framebufferRenderbuffer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0+y,W.RENDERBUFFER,null),M.bindFramebuffer(W.FRAMEBUFFER,e.__webglFramebuffer),W.framebufferTexture2D(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0+y,W.TEXTURE_2D,null,0);M.bindFramebuffer(W.READ_FRAMEBUFFER,e.__webglMultisampledFramebuffer),M.bindFramebuffer(W.DRAW_FRAMEBUFFER,e.__webglFramebuffer);for(let M=0;M<i.length;M++){g.push(W.COLOR_ATTACHMENT0+M),y.depthBuffer&&g.push(u);const G=void 0!==e.__ignoreDepthValues&&e.__ignoreDepthValues;if(!1===G&&(y.depthBuffer&&(k|=W.DEPTH_BUFFER_BIT),y.stencilBuffer&&(k|=W.STENCIL_BUFFER_BIT)),l&&W.framebufferRenderbuffer(W.READ_FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.RENDERBUFFER,e.__webglColorRenderbuffer[M]),!0===G&&(W.invalidateFramebuffer(W.READ_FRAMEBUFFER,[u]),W.invalidateFramebuffer(W.DRAW_FRAMEBUFFER,[u])),l){const y=U.get(i[M]).__webglTexture;W.framebufferTexture2D(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,y,0)}W.blitFramebuffer(0,0,x,n,0,0,x,n,k,W.NEAREST),Y&&W.invalidateFramebuffer(W.READ_FRAMEBUFFER,g)}if(M.bindFramebuffer(W.READ_FRAMEBUFFER,null),M.bindFramebuffer(W.DRAW_FRAMEBUFFER,null),l)for(let y=0;y<i.length;y++){M.bindFramebuffer(W.FRAMEBUFFER,e.__webglMultisampledFramebuffer),W.framebufferRenderbuffer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0+y,W.RENDERBUFFER,e.__webglColorRenderbuffer[y]);const x=U.get(i[y]).__webglTexture;M.bindFramebuffer(W.FRAMEBUFFER,e.__webglFramebuffer),W.framebufferTexture2D(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0+y,W.TEXTURE_2D,x,0)}M.bindFramebuffer(W.DRAW_FRAMEBUFFER,e.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=V,this.setupFrameBufferTexture=Z,this.useMultisampledRTT=a}function Pu(W,y,M){const U=M.isWebGL2;return{convert:function(M,i=HM){let x;if(M===qy)return W.UNSIGNED_BYTE;if(M===Ky)return W.UNSIGNED_SHORT_4_4_4_4;if(M===Py)return W.UNSIGNED_SHORT_5_5_5_1;if(M===sy)return W.BYTE;if(M===Ny)return W.SHORT;if(M===_y)return W.UNSIGNED_SHORT;if(M===py)return W.INT;if(M===by)return W.UNSIGNED_INT;if(M===my)return W.FLOAT;if(M===zy)return U?W.HALF_FLOAT:(x=y.get("OES_texture_half_float"),null!==x?x.HALF_FLOAT_OES:null);if(M===Iy)return W.ALPHA;if(M===Ey)return W.RGBA;if(M===Zy)return W.LUMINANCE;if(M===fy)return W.LUMINANCE_ALPHA;if(M===Vy)return W.DEPTH_COMPONENT;if(M===$y)return W.DEPTH_STENCIL;if(M===_U)return x=y.get("EXT_sRGB"),null!==x?x.SRGB_ALPHA_EXT:null;if(M===ay)return W.RED;if(M===Hy)return W.RED_INTEGER;if(M===By)return W.RG;if(M===vy)return W.RG_INTEGER;if(M===Ly)return W.RGBA_INTEGER;if(M===Xy||M===wy||M===Fy||M===ty)if(i===BM){if(x=y.get("WEBGL_compressed_texture_s3tc_srgb"),null===x)return null;if(M===Xy)return x.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(M===wy)return x.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(M===Fy)return x.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(M===ty)return x.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(x=y.get("WEBGL_compressed_texture_s3tc"),null===x)return null;if(M===Xy)return x.COMPRESSED_RGB_S3TC_DXT1_EXT;if(M===wy)return x.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(M===Fy)return x.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(M===ty)return x.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(M===Jy||M===jy||M===Cy||M===Qy){if(x=y.get("WEBGL_compressed_texture_pvrtc"),null===x)return null;if(M===Jy)return x.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(M===jy)return x.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(M===Cy)return x.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(M===Qy)return x.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(M===WM)return x=y.get("WEBGL_compressed_texture_etc1"),null!==x?x.COMPRESSED_RGB_ETC1_WEBGL:null;if(M===yM||M===MM){if(x=y.get("WEBGL_compressed_texture_etc"),null===x)return null;if(M===yM)return i===BM?x.COMPRESSED_SRGB8_ETC2:x.COMPRESSED_RGB8_ETC2;if(M===MM)return i===BM?x.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:x.COMPRESSED_RGBA8_ETC2_EAC}if(M===UM||M===iM||M===xM||M===nM||M===kM||M===gM||M===uM||M===eM||M===lM||M===GM||M===YM||M===cM||M===DM||M===rM){if(x=y.get("WEBGL_compressed_texture_astc"),null===x)return null;if(M===UM)return i===BM?x.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:x.COMPRESSED_RGBA_ASTC_4x4_KHR;if(M===iM)return i===BM?x.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:x.COMPRESSED_RGBA_ASTC_5x4_KHR;if(M===xM)return i===BM?x.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:x.COMPRESSED_RGBA_ASTC_5x5_KHR;if(M===nM)return i===BM?x.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:x.COMPRESSED_RGBA_ASTC_6x5_KHR;if(M===kM)return i===BM?x.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:x.COMPRESSED_RGBA_ASTC_6x6_KHR;if(M===gM)return i===BM?x.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:x.COMPRESSED_RGBA_ASTC_8x5_KHR;if(M===uM)return i===BM?x.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:x.COMPRESSED_RGBA_ASTC_8x6_KHR;if(M===eM)return i===BM?x.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:x.COMPRESSED_RGBA_ASTC_8x8_KHR;if(M===lM)return i===BM?x.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:x.COMPRESSED_RGBA_ASTC_10x5_KHR;if(M===GM)return i===BM?x.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:x.COMPRESSED_RGBA_ASTC_10x6_KHR;if(M===YM)return i===BM?x.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:x.COMPRESSED_RGBA_ASTC_10x8_KHR;if(M===cM)return i===BM?x.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:x.COMPRESSED_RGBA_ASTC_10x10_KHR;if(M===DM)return i===BM?x.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:x.COMPRESSED_RGBA_ASTC_12x10_KHR;if(M===rM)return i===BM?x.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:x.COMPRESSED_RGBA_ASTC_12x12_KHR}if(M===AM){if(x=y.get("EXT_texture_compression_bptc"),null===x)return null;if(M===AM)return i===BM?x.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:x.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(M===TM||M===OM||M===hM||M===SM){if(x=y.get("EXT_texture_compression_rgtc"),null===x)return null;if(M===AM)return x.COMPRESSED_RED_RGTC1_EXT;if(M===OM)return x.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(M===hM)return x.COMPRESSED_RED_GREEN_RGTC2_EXT;if(M===SM)return x.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return M===Ry?U?W.UNSIGNED_INT_24_8:(x=y.get("WEBGL_depth_texture"),null!==x?x.UNSIGNED_INT_24_8_WEBGL:null):void 0!==W[M]?W[M]:null}}}class Ru extends wn{constructor(W=[]){super(),this.isArrayCamera=!0,this.cameras=W}}class Iu extends qx{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Eu={type:"move"};class Zu{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Iu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Iu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new di,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new di),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Iu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new di,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new di),this._grip}dispatchEvent(W){return null!==this._targetRay&&this._targetRay.dispatchEvent(W),null!==this._grip&&this._grip.dispatchEvent(W),null!==this._hand&&this._hand.dispatchEvent(W),this}connect(W){if(W&&W.hand){const y=this._hand;if(y)for(const M of W.hand.values())this._getHandJoint(y,M)}return this.dispatchEvent({type:"connected",data:W}),this}disconnect(W){return this.dispatchEvent({type:"disconnected",data:W}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(W,y,M){let U=null,i=null,x=null;const n=this._targetRay,k=this._grip,g=this._hand;if(W&&"visible-blurred"!==y.session.visibilityState){if(g&&W.hand){x=!0;for(const U of W.hand.values()){const W=y.getJointPose(U,M),i=this._getHandJoint(g,U);null!==W&&(i.matrix.fromArray(W.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=W.radius),i.visible=null!==W}const U=g.joints["index-finger-tip"],i=g.joints["thumb-tip"],n=U.position.distanceTo(i.position),k=.02,u=.005;g.inputState.pinching&&n>k+u?(g.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:W.handedness,target:this})):!g.inputState.pinching&&n<=k-u&&(g.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:W.handedness,target:this}))}else null!==k&&W.gripSpace&&(i=y.getPose(W.gripSpace,M),null!==i&&(k.matrix.fromArray(i.transform.matrix),k.matrix.decompose(k.position,k.rotation,k.scale),k.matrixWorldNeedsUpdate=!0,i.linearVelocity?(k.hasLinearVelocity=!0,k.linearVelocity.copy(i.linearVelocity)):k.hasLinearVelocity=!1,i.angularVelocity?(k.hasAngularVelocity=!0,k.angularVelocity.copy(i.angularVelocity)):k.hasAngularVelocity=!1));null!==n&&(U=y.getPose(W.targetRaySpace,M),null===U&&null!==i&&(U=i),null!==U&&(n.matrix.fromArray(U.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.matrixWorldNeedsUpdate=!0,U.linearVelocity?(n.hasLinearVelocity=!0,n.linearVelocity.copy(U.linearVelocity)):n.hasLinearVelocity=!1,U.angularVelocity?(n.hasAngularVelocity=!0,n.angularVelocity.copy(U.angularVelocity)):n.hasAngularVelocity=!1,this.dispatchEvent(Eu)))}return null!==n&&(n.visible=null!==U),null!==k&&(k.visible=null!==i),null!==g&&(g.visible=null!==x),this}_getHandJoint(W,y){if(void 0===W.joints[y.jointName]){const M=new Iu;M.matrixAutoUpdate=!1,M.visible=!1,W.joints[y.jointName]=M,W.add(M)}return W.joints[y.jointName]}}class fu extends Yi{constructor(W,y,M,U,i,x,n,k,g,u){if((u=void 0!==u?u:Vy)!==Vy&&u!==$y)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===M&&u===Vy&&(M=by),void 0===M&&u===$y&&(M=Ry),super(null,U,i,x,n,k,u,M,g),this.isDepthTexture=!0,this.image={width:W,height:y},this.magFilter=void 0!==n?n:cy,this.minFilter=void 0!==k?k:cy,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(W){return super.copy(W),this.compareFunction=W.compareFunction,this}toJSON(W){const y=super.toJSON(W);return null!==this.compareFunction&&(y.compareFunction=this.compareFunction),y}}class Vu extends mU{constructor(W,y){super();const M=this;let U=null,i=1,x=null,n="local-floor",k=1,g=null,u=null,e=null,l=null,G=null,Y=null;const c=y.getContextAttributes();let D=null,r=null;const A=[],T=[],O=new wn;O.layers.enable(1),O.viewport=new ci;const h=new wn;h.layers.enable(2),h.viewport=new ci;const S=[O,h],o=new Ru;o.layers.enable(1),o.layers.enable(2);let d=null,q=null;function s(W){const y=T.indexOf(W.inputSource);if(-1===y)return;const M=A[y];void 0!==M&&(M.update(W.inputSource,W.frame,g||x),M.dispatchEvent({type:W.type,data:W.inputSource}))}function N(){U.removeEventListener("select",s),U.removeEventListener("selectstart",s),U.removeEventListener("selectend",s),U.removeEventListener("squeeze",s),U.removeEventListener("squeezestart",s),U.removeEventListener("squeezeend",s),U.removeEventListener("end",N),U.removeEventListener("inputsourceschange",_);for(let W=0;W<A.length;W++){const y=T[W];null!==y&&(T[W]=null,A[W].disconnect(y))}d=null,q=null,W.setRenderTarget(D),G=null,l=null,e=null,U=null,r=null,K.stop(),M.isPresenting=!1,M.dispatchEvent({type:"sessionend"})}function _(W){for(let y=0;y<W.removed.length;y++){const M=W.removed[y],U=T.indexOf(M);U>=0&&(T[U]=null,A[U].disconnect(M))}for(let y=0;y<W.added.length;y++){const M=W.added[y];let U=T.indexOf(M);if(-1===U){for(let W=0;W<A.length;W++){if(W>=T.length){T.push(M),U=W;break}if(null===T[W]){T[W]=M,U=W;break}}if(-1===U)break}const i=A[U];i&&i.connect(M)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(W){let y=A[W];return void 0===y&&(y=new Zu,A[W]=y),y.getTargetRaySpace()},this.getControllerGrip=function(W){let y=A[W];return void 0===y&&(y=new Zu,A[W]=y),y.getGripSpace()},this.getHand=function(W){let y=A[W];return void 0===y&&(y=new Zu,A[W]=y),y.getHandSpace()},this.setFramebufferScaleFactor=function(W){i=W,!0===M.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(W){n=W,!0===M.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return g||x},this.setReferenceSpace=function(W){g=W},this.getBaseLayer=function(){return null!==l?l:G},this.getBinding=function(){return e},this.getFrame=function(){return Y},this.getSession=function(){return U},this.setSession=async function(u){if(U=u,null!==U){if(D=W.getRenderTarget(),U.addEventListener("select",s),U.addEventListener("selectstart",s),U.addEventListener("selectend",s),U.addEventListener("squeeze",s),U.addEventListener("squeezestart",s),U.addEventListener("squeezeend",s),U.addEventListener("end",N),U.addEventListener("inputsourceschange",_),!0!==c.xrCompatible&&await y.makeXRCompatible(),void 0===U.renderState.layers||!1===W.capabilities.isWebGL2){const M={antialias:void 0!==U.renderState.layers||c.antialias,alpha:!0,depth:c.depth,stencil:c.stencil,framebufferScaleFactor:i};G=new XRWebGLLayer(U,y,M),U.updateRenderState({baseLayer:G}),r=new ri(G.framebufferWidth,G.framebufferHeight,{format:Ey,type:qy,colorSpace:W.outputColorSpace,stencilBuffer:c.stencil})}else{let M=null,x=null,n=null;c.depth&&(n=c.stencil?y.DEPTH24_STENCIL8:y.DEPTH_COMPONENT24,M=c.stencil?$y:Vy,x=c.stencil?Ry:by);const k={colorFormat:y.RGBA8,depthFormat:n,scaleFactor:i};e=new XRWebGLBinding(U,y),l=e.createProjectionLayer(k),U.updateRenderState({layers:[l]}),r=new ri(l.textureWidth,l.textureHeight,{format:Ey,type:qy,depthTexture:new fu(l.textureWidth,l.textureHeight,x,void 0,void 0,void 0,void 0,void 0,void 0,M),stencilBuffer:c.stencil,colorSpace:W.outputColorSpace,samples:c.antialias?4:0}),W.properties.get(r).__ignoreDepthValues=l.ignoreDepthValues}r.isXRRenderTarget=!0,this.setFoveation(k),g=null,x=await U.requestReferenceSpace(n),K.setContext(U),K.start(),M.isPresenting=!0,M.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==U)return U.environmentBlendMode};const p=new di,b=new di;function m(W,y){null===y?W.matrixWorld.copy(W.matrix):W.matrixWorld.multiplyMatrices(y.matrixWorld,W.matrix),W.matrixWorldInverse.copy(W.matrixWorld).invert()}this.updateCamera=function(W){if(null===U)return;o.near=h.near=O.near=W.near,o.far=h.far=O.far=W.far,d===o.near&&q===o.far||(U.updateRenderState({depthNear:o.near,depthFar:o.far}),d=o.near,q=o.far);const y=W.parent,M=o.cameras;m(o,y);for(let W=0;W<M.length;W++)m(M[W],y);2===M.length?function(W,y,M){p.setFromMatrixPosition(y.matrixWorld),b.setFromMatrixPosition(M.matrixWorld);const U=p.distanceTo(b),i=y.projectionMatrix.elements,x=M.projectionMatrix.elements,n=i[14]/(i[10]-1),k=i[14]/(i[10]+1),g=(i[9]+1)/i[5],u=(i[9]-1)/i[5],e=(i[8]-1)/i[0],l=(x[8]+1)/x[0],G=n*e,Y=n*l,c=U/(-e+l),D=c*-e;y.matrixWorld.decompose(W.position,W.quaternion,W.scale),W.translateX(D),W.translateZ(c),W.matrixWorld.compose(W.position,W.quaternion,W.scale),W.matrixWorldInverse.copy(W.matrixWorld).invert();const r=n+c,A=k+c,T=G-D,O=Y+(U-D),h=g*k/A*r,S=u*k/A*r;W.projectionMatrix.makePerspective(T,O,h,S,r,A),W.projectionMatrixInverse.copy(W.projectionMatrix).invert()}(o,O,h):o.projectionMatrix.copy(O.projectionMatrix),function(W,y,M){null===M?W.matrix.copy(y.matrixWorld):(W.matrix.copy(M.matrixWorld),W.matrix.invert(),W.matrix.multiply(y.matrixWorld)),W.matrix.decompose(W.position,W.quaternion,W.scale),W.updateMatrixWorld(!0);const U=W.children;for(let W=0,y=U.length;W<y;W++)U[W].updateMatrixWorld(!0);W.projectionMatrix.copy(y.projectionMatrix),W.projectionMatrixInverse.copy(y.projectionMatrixInverse),W.isPerspectiveCamera&&(W.fov=2*RU*Math.atan(1/W.projectionMatrix.elements[5]),W.zoom=1)}(W,o,y)},this.getCamera=function(){return o},this.getFoveation=function(){if(null!==l||null!==G)return k},this.setFoveation=function(W){k=W,null!==l&&(l.fixedFoveation=W),null!==G&&void 0!==G.fixedFoveation&&(G.fixedFoveation=W)};let z=null;const K=new nk;K.setAnimationLoop((function(y,U){if(u=U.getViewerPose(g||x),Y=U,null!==u){const y=u.views;null!==G&&(W.setRenderTargetFramebuffer(r,G.framebuffer),W.setRenderTarget(r));let M=!1;y.length!==o.cameras.length&&(o.cameras.length=0,M=!0);for(let U=0;U<y.length;U++){const i=y[U];let x=null;if(null!==G)x=G.getViewport(i);else{const y=e.getViewSubImage(l,i);x=y.viewport,0===U&&(W.setRenderTargetTextures(r,y.colorTexture,l.ignoreDepthValues?void 0:y.depthStencilTexture),W.setRenderTarget(r))}let n=S[U];void 0===n&&(n=new wn,n.layers.enable(U),n.viewport=new ci,S[U]=n),n.matrix.fromArray(i.transform.matrix),n.matrix.decompose(n.position,n.quaternion,n.scale),n.projectionMatrix.fromArray(i.projectionMatrix),n.projectionMatrixInverse.copy(n.projectionMatrix).invert(),n.viewport.set(x.x,x.y,x.width,x.height),0===U&&(o.matrix.copy(n.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale)),!0===M&&o.cameras.push(n)}}for(let W=0;W<A.length;W++){const y=T[W],M=A[W];null!==y&&void 0!==M&&M.update(y,U,g||x)}z&&z(y,U),U.detectedPlanes&&M.dispatchEvent({type:"planesdetected",data:U}),Y=null})),this.setAnimationLoop=function(W){z=W},this.dispose=function(){}}}function $u(W,y){function M(W,y){!0===W.matrixAutoUpdate&&W.updateMatrix(),y.value.copy(W.matrix)}function U(U,i){U.opacity.value=i.opacity,i.color&&U.diffuse.value.copy(i.color),i.emissive&&U.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(U.map.value=i.map,M(i.map,U.mapTransform)),i.alphaMap&&(U.alphaMap.value=i.alphaMap,M(i.alphaMap,U.alphaMapTransform)),i.bumpMap&&(U.bumpMap.value=i.bumpMap,M(i.bumpMap,U.bumpMapTransform),U.bumpScale.value=i.bumpScale,i.side===AW&&(U.bumpScale.value*=-1)),i.normalMap&&(U.normalMap.value=i.normalMap,M(i.normalMap,U.normalMapTransform),U.normalScale.value.copy(i.normalScale),i.side===AW&&U.normalScale.value.negate()),i.displacementMap&&(U.displacementMap.value=i.displacementMap,M(i.displacementMap,U.displacementMapTransform),U.displacementScale.value=i.displacementScale,U.displacementBias.value=i.displacementBias),i.emissiveMap&&(U.emissiveMap.value=i.emissiveMap,M(i.emissiveMap,U.emissiveMapTransform)),i.specularMap&&(U.specularMap.value=i.specularMap,M(i.specularMap,U.specularMapTransform)),i.alphaTest>0&&(U.alphaTest.value=i.alphaTest);const x=y.get(i).envMap;if(x&&(U.envMap.value=x,U.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1,U.reflectivity.value=i.reflectivity,U.ior.value=i.ior,U.refractionRatio.value=i.refractionRatio),i.lightMap){U.lightMap.value=i.lightMap;const y=!0===W._useLegacyLights?Math.PI:1;U.lightMapIntensity.value=i.lightMapIntensity*y,M(i.lightMap,U.lightMapTransform)}i.aoMap&&(U.aoMap.value=i.aoMap,U.aoMapIntensity.value=i.aoMapIntensity,M(i.aoMap,U.aoMapTransform))}return{refreshFogUniforms:function(y,M){M.color.getRGB(y.fogColor.value,an(W)),M.isFog?(y.fogNear.value=M.near,y.fogFar.value=M.far):M.isFogExp2&&(y.fogDensity.value=M.density)},refreshMaterialUniforms:function(W,i,x,n,k){i.isMeshBasicMaterial||i.isMeshLambertMaterial?U(W,i):i.isMeshToonMaterial?(U(W,i),function(W,y){y.gradientMap&&(W.gradientMap.value=y.gradientMap)}(W,i)):i.isMeshPhongMaterial?(U(W,i),function(W,y){W.specular.value.copy(y.specular),W.shininess.value=Math.max(y.shininess,1e-4)}(W,i)):i.isMeshStandardMaterial?(U(W,i),function(W,U){W.metalness.value=U.metalness,U.metalnessMap&&(W.metalnessMap.value=U.metalnessMap,M(U.metalnessMap,W.metalnessMapTransform)),W.roughness.value=U.roughness,U.roughnessMap&&(W.roughnessMap.value=U.roughnessMap,M(U.roughnessMap,W.roughnessMapTransform));y.get(U).envMap&&(W.envMapIntensity.value=U.envMapIntensity)}(W,i),i.isMeshPhysicalMaterial&&function(W,y,U){W.ior.value=y.ior,y.sheen>0&&(W.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),W.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(W.sheenColorMap.value=y.sheenColorMap,M(y.sheenColorMap,W.sheenColorMapTransform)),y.sheenRoughnessMap&&(W.sheenRoughnessMap.value=y.sheenRoughnessMap,M(y.sheenRoughnessMap,W.sheenRoughnessMapTransform))),y.clearcoat>0&&(W.clearcoat.value=y.clearcoat,W.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(W.clearcoatMap.value=y.clearcoatMap,M(y.clearcoatMap,W.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(W.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,M(y.clearcoatRoughnessMap,W.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(W.clearcoatNormalMap.value=y.clearcoatNormalMap,M(y.clearcoatNormalMap,W.clearcoatNormalMapTransform),W.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===AW&&W.clearcoatNormalScale.value.negate())),y.iridescence>0&&(W.iridescence.value=y.iridescence,W.iridescenceIOR.value=y.iridescenceIOR,W.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],W.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(W.iridescenceMap.value=y.iridescenceMap,M(y.iridescenceMap,W.iridescenceMapTransform)),y.iridescenceThicknessMap&&(W.iridescenceThicknessMap.value=y.iridescenceThicknessMap,M(y.iridescenceThicknessMap,W.iridescenceThicknessMapTransform))),y.transmission>0&&(W.transmission.value=y.transmission,W.transmissionSamplerMap.value=U.texture,W.transmissionSamplerSize.value.set(U.width,U.height),y.transmissionMap&&(W.transmissionMap.value=y.transmissionMap,M(y.transmissionMap,W.transmissionMapTransform)),W.thickness.value=y.thickness,y.thicknessMap&&(W.thicknessMap.value=y.thicknessMap,M(y.thicknessMap,W.thicknessMapTransform)),W.attenuationDistance.value=y.attenuationDistance,W.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(W.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(W.anisotropyMap.value=y.anisotropyMap,M(y.anisotropyMap,W.anisotropyMapTransform))),W.specularIntensity.value=y.specularIntensity,W.specularColor.value.copy(y.specularColor),y.specularColorMap&&(W.specularColorMap.value=y.specularColorMap,M(y.specularColorMap,W.specularColorMapTransform)),y.specularIntensityMap&&(W.specularIntensityMap.value=y.specularIntensityMap,M(y.specularIntensityMap,W.specularIntensityMapTransform))}(W,i,k)):i.isMeshMatcapMaterial?(U(W,i),function(W,y){y.matcap&&(W.matcap.value=y.matcap)}(W,i)):i.isMeshDepthMaterial?U(W,i):i.isMeshDistanceMaterial?(U(W,i),function(W,M){const U=y.get(M).light;W.referencePosition.value.setFromMatrixPosition(U.matrixWorld),W.nearDistance.value=U.shadow.camera.near,W.farDistance.value=U.shadow.camera.far}(W,i)):i.isMeshNormalMaterial?U(W,i):i.isLineBasicMaterial?(function(W,y){W.diffuse.value.copy(y.color),W.opacity.value=y.opacity,y.map&&(W.map.value=y.map,M(y.map,W.mapTransform))}(W,i),i.isLineDashedMaterial&&function(W,y){W.dashSize.value=y.dashSize,W.totalSize.value=y.dashSize+y.gapSize,W.scale.value=y.scale}(W,i)):i.isPointsMaterial?function(W,y,U,i){W.diffuse.value.copy(y.color),W.opacity.value=y.opacity,W.size.value=y.size*U,W.scale.value=.5*i,y.map&&(W.map.value=y.map,M(y.map,W.uvTransform)),y.alphaMap&&(W.alphaMap.value=y.alphaMap,M(y.alphaMap,W.alphaMapTransform)),y.alphaTest>0&&(W.alphaTest.value=y.alphaTest)}(W,i,x,n):i.isSpriteMaterial?function(W,y){W.diffuse.value.copy(y.color),W.opacity.value=y.opacity,W.rotation.value=y.rotation,y.map&&(W.map.value=y.map,M(y.map,W.mapTransform)),y.alphaMap&&(W.alphaMap.value=y.alphaMap,M(y.alphaMap,W.alphaMapTransform)),y.alphaTest>0&&(W.alphaTest.value=y.alphaTest)}(W,i):i.isShadowMaterial?(W.color.value.copy(i.color),W.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function au(W,y,M,U){let i={},x={},n=[];const k=M.isWebGL2?W.getParameter(W.MAX_UNIFORM_BUFFER_BINDINGS):0;function g(W,y,M){const U=W.value;if(void 0===M[y]){if("number"==typeof U)M[y]=U;else{const W=Array.isArray(U)?U:[U],i=[];for(let y=0;y<W.length;y++)i.push(W[y].clone());M[y]=i}return!0}if("number"==typeof U){if(M[y]!==U)return M[y]=U,!0}else{const W=Array.isArray(M[y])?M[y]:[M[y]],i=Array.isArray(U)?U:[U];for(let y=0;y<W.length;y++){const M=W[y];if(!1===M.equals(i[y]))return M.copy(i[y]),!0}}return!1}function u(W){const y={boundary:0,storage:0};return"number"==typeof W?(y.boundary=4,y.storage=4):W.isVector2?(y.boundary=8,y.storage=8):W.isVector3||W.isColor?(y.boundary=16,y.storage=12):W.isVector4?(y.boundary=16,y.storage=16):W.isMatrix3?(y.boundary=48,y.storage=48):W.isMatrix4?(y.boundary=64,y.storage=64):W.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",W),y}function e(y){const M=y.target;M.removeEventListener("dispose",e);const U=n.indexOf(M.__bindingPointIndex);n.splice(U,1),W.deleteBuffer(i[M.id]),delete i[M.id],delete x[M.id]}return{bind:function(W,y){const M=y.program;U.uniformBlockBinding(W,M)},update:function(M,l){let G=i[M.id];void 0===G&&(function(W){const y=W.uniforms;let M=0;const U=16;let i=0;for(let W=0,x=y.length;W<x;W++){const x=y[W],n={boundary:0,storage:0},k=Array.isArray(x.value)?x.value:[x.value];for(let W=0,y=k.length;W<y;W++){const y=u(k[W]);n.boundary+=y.boundary,n.storage+=y.storage}x.__data=new Float32Array(n.storage/Float32Array.BYTES_PER_ELEMENT),x.__offset=M,W>0&&(i=M%U,0!==i&&U-i-n.boundary<0&&(M+=U-i,x.__offset=M)),M+=n.storage}i=M%U,i>0&&(M+=U-i),W.__size=M,W.__cache={}}(M),G=function(y){const M=function(){for(let W=0;W<k;W++)if(-1===n.indexOf(W))return n.push(W),W;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();y.__bindingPointIndex=M;const U=W.createBuffer(),i=y.__size,x=y.usage;return W.bindBuffer(W.UNIFORM_BUFFER,U),W.bufferData(W.UNIFORM_BUFFER,i,x),W.bindBuffer(W.UNIFORM_BUFFER,null),W.bindBufferBase(W.UNIFORM_BUFFER,M,U),U}(M),i[M.id]=G,M.addEventListener("dispose",e));const Y=l.program;U.updateUBOMapping(M,Y);const c=y.render.frame;x[M.id]!==c&&(function(y){const M=i[y.id],U=y.uniforms,x=y.__cache;W.bindBuffer(W.UNIFORM_BUFFER,M);for(let y=0,M=U.length;y<M;y++){const M=U[y];if(!0===g(M,y,x)){const y=M.__offset,U=Array.isArray(M.value)?M.value:[M.value];let i=0;for(let x=0;x<U.length;x++){const n=U[x],k=u(n);"number"==typeof n?(M.__data[0]=n,W.bufferSubData(W.UNIFORM_BUFFER,y+i,M.__data)):n.isMatrix3?(M.__data[0]=n.elements[0],M.__data[1]=n.elements[1],M.__data[2]=n.elements[2],M.__data[3]=n.elements[0],M.__data[4]=n.elements[3],M.__data[5]=n.elements[4],M.__data[6]=n.elements[5],M.__data[7]=n.elements[0],M.__data[8]=n.elements[6],M.__data[9]=n.elements[7],M.__data[10]=n.elements[8],M.__data[11]=n.elements[0]):(n.toArray(M.__data,i),i+=k.storage/Float32Array.BYTES_PER_ELEMENT)}W.bufferSubData(W.UNIFORM_BUFFER,y,M.__data)}}W.bindBuffer(W.UNIFORM_BUFFER,null)}(M),x[M.id]=c)},dispose:function(){for(const y in i)W.deleteBuffer(i[y]);n=[],i={},x={}}}}function Hu(){const W=jU("canvas");return W.style.display="block",W}class Bu{constructor(W={}){const{canvas:y=Hu(),context:M=null,depth:U=!0,stencil:i=!0,alpha:x=!1,antialias:n=!1,premultipliedAlpha:k=!0,preserveDrawingBuffer:g=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:e=!1}=W;let l;this.isWebGLRenderer=!0,l=null!==M?M.getContextAttributes().alpha:x;const G=new Uint32Array(4),Y=new Int32Array(4);let c=null,D=null;const r=[],A=[];this.domElement=y,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=BM,this._useLegacyLights=!1,this.toneMapping=QW,this.toneMappingExposure=1;const T=this;let O=!1,h=0,S=0,o=null,d=-1,q=null;const s=new ci,N=new ci;let _=null;const p=new Bx(0);let b=0,m=y.width,z=y.height,K=1,P=null,R=null;const I=new ci(0,0,m,z),E=new ci(0,0,m,z);let Z=!1;const f=new xk;let V=!1,$=!1,a=null;const H=new Qi,B=new LU,v=new di,L={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function X(){return null===o?K:1}let w,F,t,J,j,C,Q,WW,yW,MW,UW,iW,nW,kW,gW,uW,eW,lW,GW,YW,cW,DW,OW,hW,SW=M;function oW(W,M){for(let U=0;U<W.length;U++){const i=W[U],x=y.getContext(i,M);if(null!==x)return x}return null}try{const W={alpha:!0,depth:U,stencil:i,antialias:n,premultipliedAlpha:k,preserveDrawingBuffer:g,powerPreference:u,failIfMajorPerformanceCaveat:e};if("setAttribute"in y&&y.setAttribute("data-engine",`three.js r${xW}`),y.addEventListener("webglcontextlost",sW,!1),y.addEventListener("webglcontextrestored",NW,!1),y.addEventListener("webglcontextcreationerror",_W,!1),null===SW){const y=["webgl2","webgl","experimental-webgl"];if(!0===T.isWebGL1Renderer&&y.shift(),SW=oW(y,W),null===SW)throw oW(y)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!=typeof WebGLRenderingContext&&SW instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===SW.getShaderPrecisionFormat&&(SW.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(W){throw console.error("THREE.WebGLRenderer: "+W.message),W}function dW(){w=new Ek(SW),F=new rk(SW,w,W),w.init(F),DW=new Pu(SW,w,F),t=new zu(SW,w,F),J=new Vk(SW),j=new Du,C=new Ku(SW,w,t,j,F,DW,J),Q=new Tk(T),WW=new Ik(T),yW=new kk(SW,F),OW=new ck(SW,w,yW,F),MW=new Zk(SW,yW,J,OW),UW=new Bk(SW,MW,yW,J),GW=new Hk(SW,F,C),uW=new Ak(j),iW=new cu(T,Q,WW,w,F,OW,uW),nW=new $u(T,j),kW=new Ou,gW=new su(w,F),lW=new Yk(T,Q,WW,t,UW,l,k),eW=new mu(T,UW,F),hW=new au(SW,J,F,t),YW=new Dk(SW,w,J,F),cW=new fk(SW,w,J,F),J.programs=iW.programs,T.capabilities=F,T.extensions=w,T.properties=j,T.renderLists=kW,T.shadowMap=eW,T.state=t,T.info=J}dW();const qW=new Vu(T,SW);function sW(W){W.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),O=!0}function NW(){console.log("THREE.WebGLRenderer: Context Restored."),O=!1;const W=J.autoReset,y=eW.enabled,M=eW.autoUpdate,U=eW.needsUpdate,i=eW.type;dW(),J.autoReset=W,eW.enabled=y,eW.autoUpdate=M,eW.needsUpdate=U,eW.type=i}function _W(W){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",W.statusMessage)}function pW(W){const y=W.target;y.removeEventListener("dispose",pW),function(W){(function(W){const y=j.get(W).programs;void 0!==y&&(y.forEach((function(W){iW.releaseProgram(W)})),W.isShaderMaterial&&iW.releaseShaderCache(W))})(W),j.remove(W)}(y)}this.xr=qW,this.getContext=function(){return SW},this.getContextAttributes=function(){return SW.getContextAttributes()},this.forceContextLoss=function(){const W=w.get("WEBGL_lose_context");W&&W.loseContext()},this.forceContextRestore=function(){const W=w.get("WEBGL_lose_context");W&&W.restoreContext()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(W){void 0!==W&&(K=W,this.setSize(m,z,!1))},this.getSize=function(W){return W.set(m,z)},this.setSize=function(W,M,U=!0){qW.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(m=W,z=M,y.width=Math.floor(W*K),y.height=Math.floor(M*K),!0===U&&(y.style.width=W+"px",y.style.height=M+"px"),this.setViewport(0,0,W,M))},this.getDrawingBufferSize=function(W){return W.set(m*K,z*K).floor()},this.setDrawingBufferSize=function(W,M,U){m=W,z=M,K=U,y.width=Math.floor(W*U),y.height=Math.floor(M*U),this.setViewport(0,0,W,M)},this.getCurrentViewport=function(W){return W.copy(s)},this.getViewport=function(W){return W.copy(I)},this.setViewport=function(W,y,M,U){W.isVector4?I.set(W.x,W.y,W.z,W.w):I.set(W,y,M,U),t.viewport(s.copy(I).multiplyScalar(K).floor())},this.getScissor=function(W){return W.copy(E)},this.setScissor=function(W,y,M,U){W.isVector4?E.set(W.x,W.y,W.z,W.w):E.set(W,y,M,U),t.scissor(N.copy(E).multiplyScalar(K).floor())},this.getScissorTest=function(){return Z},this.setScissorTest=function(W){t.setScissorTest(Z=W)},this.setOpaqueSort=function(W){P=W},this.setTransparentSort=function(W){R=W},this.getClearColor=function(W){return W.copy(lW.getClearColor())},this.setClearColor=function(){lW.setClearColor.apply(lW,arguments)},this.getClearAlpha=function(){return lW.getClearAlpha()},this.setClearAlpha=function(){lW.setClearAlpha.apply(lW,arguments)},this.clear=function(W=!0,y=!0,M=!0){let U=0;if(W){let W=!1;if(null!==o){const y=o.texture.format;W=y===Ly||y===vy||y===Hy}if(W){const W=o.texture.type,y=W===qy||W===by||W===_y||W===Ry||W===Ky||W===Py,M=lW.getClearColor(),U=lW.getClearAlpha(),i=M.r,x=M.g,n=M.b;y?(G[0]=i,G[1]=x,G[2]=n,G[3]=U,SW.clearBufferuiv(SW.COLOR,0,G)):(Y[0]=i,Y[1]=x,Y[2]=n,Y[3]=U,SW.clearBufferiv(SW.COLOR,0,Y))}else U|=SW.COLOR_BUFFER_BIT}y&&(U|=SW.DEPTH_BUFFER_BIT),M&&(U|=SW.STENCIL_BUFFER_BIT),SW.clear(U)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){y.removeEventListener("webglcontextlost",sW,!1),y.removeEventListener("webglcontextrestored",NW,!1),y.removeEventListener("webglcontextcreationerror",_W,!1),kW.dispose(),gW.dispose(),j.dispose(),Q.dispose(),WW.dispose(),UW.dispose(),OW.dispose(),hW.dispose(),iW.dispose(),qW.dispose(),qW.removeEventListener("sessionstart",mW),qW.removeEventListener("sessionend",zW),a&&(a.dispose(),a=null),KW.stop()},this.renderBufferDirect=function(W,y,M,U,i,x){null===y&&(y=L);const n=i.isMesh&&i.matrixWorld.determinant()<0,k=function(W,y,M,U,i){!0!==y.isScene&&(y=L),C.resetTextureUnits();const x=y.fog,n=U.isMeshStandardMaterial?y.environment:null,k=null===o?T.outputColorSpace:!0===o.isXRRenderTarget?o.texture.colorSpace:vM,g=(U.isMeshStandardMaterial?WW:Q).get(U.envMap||n),u=!0===U.vertexColors&&!!M.attributes.color&&4===M.attributes.color.itemSize,e=!!M.attributes.tangent&&(!!U.normalMap||U.anisotropy>0),l=!!M.morphAttributes.position,G=!!M.morphAttributes.normal,Y=!!M.morphAttributes.color;let c=QW;U.toneMapped&&(null!==o&&!0!==o.isXRRenderTarget||(c=T.toneMapping));const r=M.morphAttributes.position||M.morphAttributes.normal||M.morphAttributes.color,A=void 0!==r?r.length:0,O=j.get(U),h=D.state.lights;if(!0===V&&(!0===$||W!==q)){const y=W===q&&U.id===d;uW.setState(U,W,y)}let S=!1;U.version===O.__version?O.needsLights&&O.lightsStateVersion!==h.state.version||O.outputColorSpace!==k||i.isInstancedMesh&&!1===O.instancing?S=!0:i.isInstancedMesh||!0!==O.instancing?i.isSkinnedMesh&&!1===O.skinning?S=!0:i.isSkinnedMesh||!0!==O.skinning?i.isInstancedMesh&&!0===O.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===O.instancingColor&&null!==i.instanceColor||O.envMap!==g||!0===U.fog&&O.fog!==x?S=!0:void 0===O.numClippingPlanes||O.numClippingPlanes===uW.numPlanes&&O.numIntersection===uW.numIntersection?(O.vertexAlphas!==u||O.vertexTangents!==e||O.morphTargets!==l||O.morphNormals!==G||O.morphColors!==Y||O.toneMapping!==c||!0===F.isWebGL2&&O.morphTargetsCount!==A)&&(S=!0):S=!0:S=!0:S=!0:(S=!0,O.__version=U.version);let s=O.currentProgram;!0===S&&(s=ZW(U,y,i));let N=!1,_=!1,p=!1;const b=s.getUniforms(),m=O.uniforms;if(t.useProgram(s.program)&&(N=!0,_=!0,p=!0),U.id!==d&&(d=U.id,_=!0),N||q!==W){if(b.setValue(SW,"projectionMatrix",W.projectionMatrix),F.logarithmicDepthBuffer&&b.setValue(SW,"logDepthBufFC",2/(Math.log(W.far+1)/Math.LN2)),q!==W&&(q=W,_=!0,p=!0),U.isShaderMaterial||U.isMeshPhongMaterial||U.isMeshToonMaterial||U.isMeshStandardMaterial||U.envMap){const y=b.map.cameraPosition;void 0!==y&&y.setValue(SW,v.setFromMatrixPosition(W.matrixWorld))}(U.isMeshPhongMaterial||U.isMeshToonMaterial||U.isMeshLambertMaterial||U.isMeshBasicMaterial||U.isMeshStandardMaterial||U.isShaderMaterial)&&b.setValue(SW,"isOrthographic",!0===W.isOrthographicCamera),(U.isMeshPhongMaterial||U.isMeshToonMaterial||U.isMeshLambertMaterial||U.isMeshBasicMaterial||U.isMeshStandardMaterial||U.isShaderMaterial||U.isShadowMaterial||i.isSkinnedMesh)&&b.setValue(SW,"viewMatrix",W.matrixWorldInverse)}if(i.isSkinnedMesh){b.setOptional(SW,i,"bindMatrix"),b.setOptional(SW,i,"bindMatrixInverse");const W=i.skeleton;W&&(F.floatVertexTextures?(null===W.boneTexture&&W.computeBoneTexture(),b.setValue(SW,"boneTexture",W.boneTexture,C),b.setValue(SW,"boneTextureSize",W.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const P=M.morphAttributes;var R,I;if((void 0!==P.position||void 0!==P.normal||void 0!==P.color&&!0===F.isWebGL2)&&GW.update(i,M,s),(_||O.receiveShadow!==i.receiveShadow)&&(O.receiveShadow=i.receiveShadow,b.setValue(SW,"receiveShadow",i.receiveShadow)),U.isMeshGouraudMaterial&&null!==U.envMap&&(m.envMap.value=g,m.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1),_&&(b.setValue(SW,"toneMappingExposure",T.toneMappingExposure),O.needsLights&&(I=p,(R=m).ambientLightColor.needsUpdate=I,R.lightProbe.needsUpdate=I,R.directionalLights.needsUpdate=I,R.directionalLightShadows.needsUpdate=I,R.pointLights.needsUpdate=I,R.pointLightShadows.needsUpdate=I,R.spotLights.needsUpdate=I,R.spotLightShadows.needsUpdate=I,R.rectAreaLights.needsUpdate=I,R.hemisphereLights.needsUpdate=I),x&&!0===U.fog&&nW.refreshFogUniforms(m,x),nW.refreshMaterialUniforms(m,U,K,z,a),wg.upload(SW,O.uniformsList,m,C)),U.isShaderMaterial&&!0===U.uniformsNeedUpdate&&(wg.upload(SW,O.uniformsList,m,C),U.uniformsNeedUpdate=!1),U.isSpriteMaterial&&b.setValue(SW,"center",i.center),b.setValue(SW,"modelViewMatrix",i.modelViewMatrix),b.setValue(SW,"normalMatrix",i.normalMatrix),b.setValue(SW,"modelMatrix",i.matrixWorld),U.isShaderMaterial||U.isRawShaderMaterial){const W=U.uniformsGroups;for(let y=0,M=W.length;y<M;y++)if(F.isWebGL2){const M=W[y];hW.update(M,s),hW.bind(M,s)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return s}(W,y,M,U,i);t.setMaterial(U,n);let g=M.index,u=1;if(!0===U.wireframe){if(g=MW.getWireframeAttribute(M),void 0===g)return;u=2}const e=M.drawRange,l=M.attributes.position;let G=e.start*u,Y=(e.start+e.count)*u;null!==x&&(G=Math.max(G,x.start*u),Y=Math.min(Y,(x.start+x.count)*u)),null!==g?(G=Math.max(G,0),Y=Math.min(Y,g.count)):null!=l&&(G=Math.max(G,0),Y=Math.min(Y,l.count));const c=Y-G;if(c<0||c===1/0)return;let r;OW.setup(i,U,k,M,g);let A=YW;if(null!==g&&(r=yW.get(g),A=cW,A.setIndex(r)),i.isMesh)!0===U.wireframe?(t.setLineWidth(U.wireframeLinewidth*X()),A.setMode(SW.LINES)):A.setMode(SW.TRIANGLES);else if(i.isLine){let W=U.linewidth;void 0===W&&(W=1),t.setLineWidth(W*X()),i.isLineSegments?A.setMode(SW.LINES):i.isLineLoop?A.setMode(SW.LINE_LOOP):A.setMode(SW.LINE_STRIP)}else i.isPoints?A.setMode(SW.POINTS):i.isSprite&&A.setMode(SW.TRIANGLES);if(i.isInstancedMesh)A.renderInstances(G,c,i.count);else if(M.isInstancedBufferGeometry){const W=void 0!==M._maxInstanceCount?M._maxInstanceCount:1/0,y=Math.min(M.instanceCount,W);A.renderInstances(G,c,y)}else A.render(G,c)},this.compile=function(W,y){function M(W,y,M){!0===W.transparent&&W.side===TW&&!1===W.forceSinglePass?(W.side=AW,W.needsUpdate=!0,ZW(W,y,M),W.side=rW,W.needsUpdate=!0,ZW(W,y,M),W.side=TW):ZW(W,y,M)}D=gW.get(W),D.init(),A.push(D),W.traverseVisible((function(W){W.isLight&&W.layers.test(y.layers)&&(D.pushLight(W),W.castShadow&&D.pushShadow(W))})),D.setupLights(T._useLegacyLights),W.traverse((function(y){const U=y.material;if(U)if(Array.isArray(U))for(let i=0;i<U.length;i++)M(U[i],W,y);else M(U,W,y)})),A.pop(),D=null};let bW=null;function mW(){KW.stop()}function zW(){KW.start()}const KW=new nk;function PW(W,y,M,U){if(!1===W.visible)return;if(W.layers.test(y.layers))if(W.isGroup)M=W.renderOrder;else if(W.isLOD)!0===W.autoUpdate&&W.update(y);else if(W.isLight)D.pushLight(W),W.castShadow&&D.pushShadow(W);else if(W.isSprite){if(!W.frustumCulled||f.intersectsSprite(W)){U&&v.setFromMatrixPosition(W.matrixWorld).applyMatrix4(H);const y=UW.update(W),i=W.material;i.visible&&c.push(W,y,i,M,v.z,null)}}else if((W.isMesh||W.isLine||W.isPoints)&&(!W.frustumCulled||f.intersectsObject(W))){const y=UW.update(W),i=W.material;if(U&&(void 0!==W.boundingSphere?(null===W.boundingSphere&&W.computeBoundingSphere(),v.copy(W.boundingSphere.center)):(null===y.boundingSphere&&y.computeBoundingSphere(),v.copy(y.boundingSphere.center)),v.applyMatrix4(W.matrixWorld).applyMatrix4(H)),Array.isArray(i)){const U=y.groups;for(let x=0,n=U.length;x<n;x++){const n=U[x],k=i[n.materialIndex];k&&k.visible&&c.push(W,y,k,M,v.z,n)}}else i.visible&&c.push(W,y,i,M,v.z,null)}const i=W.children;for(let W=0,x=i.length;W<x;W++)PW(i[W],y,M,U)}function RW(W,y,M,U){const i=W.opaque,x=W.transmissive,n=W.transparent;D.setupLightsView(M),!0===V&&uW.setGlobalState(T.clippingPlanes,M),x.length>0&&function(W,y,M,U){const i=F.isWebGL2;null===a&&(a=new ri(1,1,{generateMipmaps:!0,type:w.has("EXT_color_buffer_half_float")?zy:qy,minFilter:oy,samples:i?4:0})),T.getDrawingBufferSize(B),i?a.setSize(B.x,B.y):a.setSize(aU(B.x),aU(B.y));const x=T.getRenderTarget();T.setRenderTarget(a),T.getClearColor(p),b=T.getClearAlpha(),b<1&&T.setClearColor(16777215,.5),T.clear();const n=T.toneMapping;T.toneMapping=QW,IW(W,M,U),C.updateMultisampleRenderTarget(a),C.updateRenderTargetMipmap(a);let k=!1;for(let W=0,i=y.length;W<i;W++){const i=y[W],x=i.object,n=i.geometry,g=i.material,u=i.group;if(g.side===TW&&x.layers.test(U.layers)){const W=g.side;g.side=AW,g.needsUpdate=!0,EW(x,M,U,n,g,u),g.side=W,g.needsUpdate=!0,k=!0}}!0===k&&(C.updateMultisampleRenderTarget(a),C.updateRenderTargetMipmap(a)),T.setRenderTarget(x),T.setClearColor(p,b),T.toneMapping=n}(i,x,y,M),U&&t.viewport(s.copy(U)),i.length>0&&IW(i,y,M),x.length>0&&IW(x,y,M),n.length>0&&IW(n,y,M),t.buffers.depth.setTest(!0),t.buffers.depth.setMask(!0),t.buffers.color.setMask(!0),t.setPolygonOffset(!1)}function IW(W,y,M){const U=!0===y.isScene?y.overrideMaterial:null;for(let i=0,x=W.length;i<x;i++){const x=W[i],n=x.object,k=x.geometry,g=null===U?x.material:U,u=x.group;n.layers.test(M.layers)&&EW(n,y,M,k,g,u)}}function EW(W,y,M,U,i,x){W.onBeforeRender(T,y,M,U,i,x),W.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,W.matrixWorld),W.normalMatrix.getNormalMatrix(W.modelViewMatrix),i.onBeforeRender(T,y,M,U,W,x),!0===i.transparent&&i.side===TW&&!1===i.forceSinglePass?(i.side=AW,i.needsUpdate=!0,T.renderBufferDirect(M,y,U,i,W,x),i.side=rW,i.needsUpdate=!0,T.renderBufferDirect(M,y,U,i,W,x),i.side=TW):T.renderBufferDirect(M,y,U,i,W,x),W.onAfterRender(T,y,M,U,i,x)}function ZW(W,y,M){!0!==y.isScene&&(y=L);const U=j.get(W),i=D.state.lights,x=D.state.shadowsArray,n=i.state.version,k=iW.getParameters(W,i.state,x,y,M),g=iW.getProgramCacheKey(k);let u=U.programs;U.environment=W.isMeshStandardMaterial?y.environment:null,U.fog=y.fog,U.envMap=(W.isMeshStandardMaterial?WW:Q).get(W.envMap||U.environment),void 0===u&&(W.addEventListener("dispose",pW),u=new Map,U.programs=u);let e=u.get(g);if(void 0!==e){if(U.currentProgram===e&&U.lightsStateVersion===n)return fW(W,k),e}else k.uniforms=iW.getUniforms(W),W.onBuild(M,k,T),W.onBeforeCompile(k,T),e=iW.acquireProgram(k,g),u.set(g,e),U.uniforms=k.uniforms;const l=U.uniforms;(W.isShaderMaterial||W.isRawShaderMaterial)&&!0!==W.clipping||(l.clippingPlanes=uW.uniform),fW(W,k),U.needsLights=function(W){return W.isMeshLambertMaterial||W.isMeshToonMaterial||W.isMeshPhongMaterial||W.isMeshStandardMaterial||W.isShadowMaterial||W.isShaderMaterial&&!0===W.lights}(W),U.lightsStateVersion=n,U.needsLights&&(l.ambientLightColor.value=i.state.ambient,l.lightProbe.value=i.state.probe,l.directionalLights.value=i.state.directional,l.directionalLightShadows.value=i.state.directionalShadow,l.spotLights.value=i.state.spot,l.spotLightShadows.value=i.state.spotShadow,l.rectAreaLights.value=i.state.rectArea,l.ltc_1.value=i.state.rectAreaLTC1,l.ltc_2.value=i.state.rectAreaLTC2,l.pointLights.value=i.state.point,l.pointLightShadows.value=i.state.pointShadow,l.hemisphereLights.value=i.state.hemi,l.directionalShadowMap.value=i.state.directionalShadowMap,l.directionalShadowMatrix.value=i.state.directionalShadowMatrix,l.spotShadowMap.value=i.state.spotShadowMap,l.spotLightMatrix.value=i.state.spotLightMatrix,l.spotLightMap.value=i.state.spotLightMap,l.pointShadowMap.value=i.state.pointShadowMap,l.pointShadowMatrix.value=i.state.pointShadowMatrix);const G=e.getUniforms(),Y=wg.seqWithValue(G.seq,l);return U.currentProgram=e,U.uniformsList=Y,e}function fW(W,y){const M=j.get(W);M.outputColorSpace=y.outputColorSpace,M.instancing=y.instancing,M.instancingColor=y.instancingColor,M.skinning=y.skinning,M.morphTargets=y.morphTargets,M.morphNormals=y.morphNormals,M.morphColors=y.morphColors,M.morphTargetsCount=y.morphTargetsCount,M.numClippingPlanes=y.numClippingPlanes,M.numIntersection=y.numClipIntersection,M.vertexAlphas=y.vertexAlphas,M.vertexTangents=y.vertexTangents,M.toneMapping=y.toneMapping}KW.setAnimationLoop((function(W){bW&&bW(W)})),"undefined"!=typeof self&&KW.setContext(self),this.setAnimationLoop=function(W){bW=W,qW.setAnimationLoop(W),null===W?KW.stop():KW.start()},qW.addEventListener("sessionstart",mW),qW.addEventListener("sessionend",zW),this.render=function(W,y){if(void 0!==y&&!0!==y.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===O)return;!0===W.matrixWorldAutoUpdate&&W.updateMatrixWorld(),null===y.parent&&!0===y.matrixWorldAutoUpdate&&y.updateMatrixWorld(),!0===qW.enabled&&!0===qW.isPresenting&&(!0===qW.cameraAutoUpdate&&qW.updateCamera(y),y=qW.getCamera()),!0===W.isScene&&W.onBeforeRender(T,W,y,o),D=gW.get(W,A.length),D.init(),A.push(D),H.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),f.setFromProjectionMatrix(H),$=this.localClippingEnabled,V=uW.init(this.clippingPlanes,$),c=kW.get(W,r.length),c.init(),r.push(c),PW(W,y,0,T.sortObjects),c.finish(),!0===T.sortObjects&&c.sort(P,R),this.info.render.frame++,!0===V&&uW.beginShadows();const M=D.state.shadowsArray;if(eW.render(M,W,y),!0===V&&uW.endShadows(),!0===this.info.autoReset&&this.info.reset(),lW.render(c,W),D.setupLights(T._useLegacyLights),y.isArrayCamera){const M=y.cameras;for(let y=0,U=M.length;y<U;y++){const U=M[y];RW(c,W,U,U.viewport)}}else RW(c,W,y);null!==o&&(C.updateMultisampleRenderTarget(o),C.updateRenderTargetMipmap(o)),!0===W.isScene&&W.onAfterRender(T,W,y),OW.resetDefaultState(),d=-1,q=null,A.pop(),D=A.length>0?A[A.length-1]:null,r.pop(),c=r.length>0?r[r.length-1]:null},this.getActiveCubeFace=function(){return h},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return o},this.setRenderTargetTextures=function(W,y,M){j.get(W.texture).__webglTexture=y,j.get(W.depthTexture).__webglTexture=M;const U=j.get(W);U.__hasExternalTextures=!0,U.__hasExternalTextures&&(U.__autoAllocateDepthBuffer=void 0===M,U.__autoAllocateDepthBuffer||!0===w.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),U.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(W,y){const M=j.get(W);M.__webglFramebuffer=y,M.__useDefaultFramebuffer=void 0===y},this.setRenderTarget=function(W,y=0,M=0){o=W,h=y,S=M;let U=!0,i=null,x=!1,n=!1;if(W){const k=j.get(W);void 0!==k.__useDefaultFramebuffer?(t.bindFramebuffer(SW.FRAMEBUFFER,null),U=!1):void 0===k.__webglFramebuffer?C.setupRenderTarget(W):k.__hasExternalTextures&&C.rebindTextures(W,j.get(W.texture).__webglTexture,j.get(W.depthTexture).__webglTexture);const g=W.texture;(g.isData3DTexture||g.isDataArrayTexture||g.isCompressedArrayTexture)&&(n=!0);const u=j.get(W).__webglFramebuffer;W.isWebGLCubeRenderTarget?(i=Array.isArray(u[y])?u[y][M]:u[y],x=!0):i=F.isWebGL2&&W.samples>0&&!1===C.useMultisampledRTT(W)?j.get(W).__webglMultisampledFramebuffer:Array.isArray(u)?u[M]:u,s.copy(W.viewport),N.copy(W.scissor),_=W.scissorTest}else s.copy(I).multiplyScalar(K).floor(),N.copy(E).multiplyScalar(K).floor(),_=Z;if(t.bindFramebuffer(SW.FRAMEBUFFER,i)&&F.drawBuffers&&U&&t.drawBuffers(W,i),t.viewport(s),t.scissor(N),t.setScissorTest(_),x){const U=j.get(W.texture);SW.framebufferTexture2D(SW.FRAMEBUFFER,SW.COLOR_ATTACHMENT0,SW.TEXTURE_CUBE_MAP_POSITIVE_X+y,U.__webglTexture,M)}else if(n){const U=j.get(W.texture),i=y||0;SW.framebufferTextureLayer(SW.FRAMEBUFFER,SW.COLOR_ATTACHMENT0,U.__webglTexture,M||0,i)}d=-1},this.readRenderTargetPixels=function(W,y,M,U,i,x,n){if(!W||!W.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let k=j.get(W).__webglFramebuffer;if(W.isWebGLCubeRenderTarget&&void 0!==n&&(k=k[n]),k){t.bindFramebuffer(SW.FRAMEBUFFER,k);try{const n=W.texture,k=n.format,g=n.type;if(k!==Ey&&DW.convert(k)!==SW.getParameter(SW.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const u=g===zy&&(w.has("EXT_color_buffer_half_float")||F.isWebGL2&&w.has("EXT_color_buffer_float"));if(!(g===qy||DW.convert(g)===SW.getParameter(SW.IMPLEMENTATION_COLOR_READ_TYPE)||g===my&&(F.isWebGL2||w.has("OES_texture_float")||w.has("WEBGL_color_buffer_float"))||u))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");y>=0&&y<=W.width-U&&M>=0&&M<=W.height-i&&SW.readPixels(y,M,U,i,DW.convert(k),DW.convert(g),x)}finally{const W=null!==o?j.get(o).__webglFramebuffer:null;t.bindFramebuffer(SW.FRAMEBUFFER,W)}}},this.copyFramebufferToTexture=function(W,y,M=0){const U=Math.pow(2,-M),i=Math.floor(y.image.width*U),x=Math.floor(y.image.height*U);C.setTexture2D(y,0),SW.copyTexSubImage2D(SW.TEXTURE_2D,M,0,0,W.x,W.y,i,x),t.unbindTexture()},this.copyTextureToTexture=function(W,y,M,U=0){const i=y.image.width,x=y.image.height,n=DW.convert(M.format),k=DW.convert(M.type);C.setTexture2D(M,0),SW.pixelStorei(SW.UNPACK_FLIP_Y_WEBGL,M.flipY),SW.pixelStorei(SW.UNPACK_PREMULTIPLY_ALPHA_WEBGL,M.premultiplyAlpha),SW.pixelStorei(SW.UNPACK_ALIGNMENT,M.unpackAlignment),y.isDataTexture?SW.texSubImage2D(SW.TEXTURE_2D,U,W.x,W.y,i,x,n,k,y.image.data):y.isCompressedTexture?SW.compressedTexSubImage2D(SW.TEXTURE_2D,U,W.x,W.y,y.mipmaps[0].width,y.mipmaps[0].height,n,y.mipmaps[0].data):SW.texSubImage2D(SW.TEXTURE_2D,U,W.x,W.y,n,k,y.image),0===U&&M.generateMipmaps&&SW.generateMipmap(SW.TEXTURE_2D),t.unbindTexture()},this.copyTextureToTexture3D=function(W,y,M,U,i=0){if(T.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const x=W.max.x-W.min.x+1,n=W.max.y-W.min.y+1,k=W.max.z-W.min.z+1,g=DW.convert(U.format),u=DW.convert(U.type);let e;if(U.isData3DTexture)C.setTexture3D(U,0),e=SW.TEXTURE_3D;else{if(!U.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");C.setTexture2DArray(U,0),e=SW.TEXTURE_2D_ARRAY}SW.pixelStorei(SW.UNPACK_FLIP_Y_WEBGL,U.flipY),SW.pixelStorei(SW.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),SW.pixelStorei(SW.UNPACK_ALIGNMENT,U.unpackAlignment);const l=SW.getParameter(SW.UNPACK_ROW_LENGTH),G=SW.getParameter(SW.UNPACK_IMAGE_HEIGHT),Y=SW.getParameter(SW.UNPACK_SKIP_PIXELS),c=SW.getParameter(SW.UNPACK_SKIP_ROWS),D=SW.getParameter(SW.UNPACK_SKIP_IMAGES),r=M.isCompressedTexture?M.mipmaps[0]:M.image;SW.pixelStorei(SW.UNPACK_ROW_LENGTH,r.width),SW.pixelStorei(SW.UNPACK_IMAGE_HEIGHT,r.height),SW.pixelStorei(SW.UNPACK_SKIP_PIXELS,W.min.x),SW.pixelStorei(SW.UNPACK_SKIP_ROWS,W.min.y),SW.pixelStorei(SW.UNPACK_SKIP_IMAGES,W.min.z),M.isDataTexture||M.isData3DTexture?SW.texSubImage3D(e,i,y.x,y.y,y.z,x,n,k,g,u,r.data):M.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),SW.compressedTexSubImage3D(e,i,y.x,y.y,y.z,x,n,k,g,r.data)):SW.texSubImage3D(e,i,y.x,y.y,y.z,x,n,k,g,u,r),SW.pixelStorei(SW.UNPACK_ROW_LENGTH,l),SW.pixelStorei(SW.UNPACK_IMAGE_HEIGHT,G),SW.pixelStorei(SW.UNPACK_SKIP_PIXELS,Y),SW.pixelStorei(SW.UNPACK_SKIP_ROWS,c),SW.pixelStorei(SW.UNPACK_SKIP_IMAGES,D),0===i&&U.generateMipmaps&&SW.generateMipmap(e),t.unbindTexture()},this.initTexture=function(W){W.isCubeTexture?C.setTextureCube(W,0):W.isData3DTexture?C.setTexture3D(W,0):W.isDataArrayTexture||W.isCompressedArrayTexture?C.setTexture2DArray(W,0):C.setTexture2D(W,0),t.unbindTexture()},this.resetState=function(){h=0,S=0,o=null,t.reset(),OW.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return pU}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(W){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!W}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===BM?ZM:EM}set outputEncoding(W){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=W===ZM?BM:vM}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(W){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=W}}class vu extends Bu{}vu.prototype.isWebGL1Renderer=!0;class Lu{constructor(W,y=25e-5){this.isFogExp2=!0,this.name="",this.color=new Bx(W),this.density=y}clone(){return new Lu(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Xu{constructor(W,y=1,M=1e3){this.isFog=!0,this.name="",this.color=new Bx(W),this.near=y,this.far=M}clone(){return new Xu(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class wu extends qx{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(W,y){return super.copy(W,y),null!==W.background&&(this.background=W.background.clone()),null!==W.environment&&(this.environment=W.environment.clone()),null!==W.fog&&(this.fog=W.fog.clone()),this.backgroundBlurriness=W.backgroundBlurriness,this.backgroundIntensity=W.backgroundIntensity,null!==W.overrideMaterial&&(this.overrideMaterial=W.overrideMaterial.clone()),this.matrixAutoUpdate=W.matrixAutoUpdate,this}toJSON(W){const y=super.toJSON(W);return null!==this.fog&&(y.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(y.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(y.object.backgroundIntensity=this.backgroundIntensity),y}}class Fu{constructor(W,y){this.isInterleavedBuffer=!0,this.array=W,this.stride=y,this.count=void 0!==W?W.length/y:0,this.usage=rU,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=IU()}onUploadCallback(){}set needsUpdate(W){!0===W&&this.version++}setUsage(W){return this.usage=W,this}copy(W){return this.array=new W.array.constructor(W.array),this.count=W.count,this.stride=W.stride,this.usage=W.usage,this}copyAt(W,y,M){W*=this.stride,M*=y.stride;for(let U=0,i=this.stride;U<i;U++)this.array[W+U]=y.array[M+U];return this}set(W,y=0){return this.array.set(W,y),this}clone(W){void 0===W.arrayBuffers&&(W.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=IU()),void 0===W.arrayBuffers[this.array.buffer._uuid]&&(W.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const y=new this.array.constructor(W.arrayBuffers[this.array.buffer._uuid]),M=new this.constructor(y,this.stride);return M.setUsage(this.usage),M}onUpload(W){return this.onUploadCallback=W,this}toJSON(W){return void 0===W.arrayBuffers&&(W.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=IU()),void 0===W.arrayBuffers[this.array.buffer._uuid]&&(W.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const tu=new di;class Ju{constructor(W,y,M,U=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=W,this.itemSize=y,this.offset=M,this.normalized=U}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(W){this.data.needsUpdate=W}applyMatrix4(W){for(let y=0,M=this.data.count;y<M;y++)tu.fromBufferAttribute(this,y),tu.applyMatrix4(W),this.setXYZ(y,tu.x,tu.y,tu.z);return this}applyNormalMatrix(W){for(let y=0,M=this.count;y<M;y++)tu.fromBufferAttribute(this,y),tu.applyNormalMatrix(W),this.setXYZ(y,tu.x,tu.y,tu.z);return this}transformDirection(W){for(let y=0,M=this.count;y<M;y++)tu.fromBufferAttribute(this,y),tu.transformDirection(W),this.setXYZ(y,tu.x,tu.y,tu.z);return this}setX(W,y){return this.normalized&&(y=BU(y,this.array)),this.data.array[W*this.data.stride+this.offset]=y,this}setY(W,y){return this.normalized&&(y=BU(y,this.array)),this.data.array[W*this.data.stride+this.offset+1]=y,this}setZ(W,y){return this.normalized&&(y=BU(y,this.array)),this.data.array[W*this.data.stride+this.offset+2]=y,this}setW(W,y){return this.normalized&&(y=BU(y,this.array)),this.data.array[W*this.data.stride+this.offset+3]=y,this}getX(W){let y=this.data.array[W*this.data.stride+this.offset];return this.normalized&&(y=HU(y,this.array)),y}getY(W){let y=this.data.array[W*this.data.stride+this.offset+1];return this.normalized&&(y=HU(y,this.array)),y}getZ(W){let y=this.data.array[W*this.data.stride+this.offset+2];return this.normalized&&(y=HU(y,this.array)),y}getW(W){let y=this.data.array[W*this.data.stride+this.offset+3];return this.normalized&&(y=HU(y,this.array)),y}setXY(W,y,M){return W=W*this.data.stride+this.offset,this.normalized&&(y=BU(y,this.array),M=BU(M,this.array)),this.data.array[W+0]=y,this.data.array[W+1]=M,this}setXYZ(W,y,M,U){return W=W*this.data.stride+this.offset,this.normalized&&(y=BU(y,this.array),M=BU(M,this.array),U=BU(U,this.array)),this.data.array[W+0]=y,this.data.array[W+1]=M,this.data.array[W+2]=U,this}setXYZW(W,y,M,U,i){return W=W*this.data.stride+this.offset,this.normalized&&(y=BU(y,this.array),M=BU(M,this.array),U=BU(U,this.array),i=BU(i,this.array)),this.data.array[W+0]=y,this.data.array[W+1]=M,this.data.array[W+2]=U,this.data.array[W+3]=i,this}clone(W){if(void 0===W){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const W=[];for(let y=0;y<this.count;y++){const M=y*this.data.stride+this.offset;for(let y=0;y<this.itemSize;y++)W.push(this.data.array[M+y])}return new Qx(new this.array.constructor(W),this.itemSize,this.normalized)}return void 0===W.interleavedBuffers&&(W.interleavedBuffers={}),void 0===W.interleavedBuffers[this.data.uuid]&&(W.interleavedBuffers[this.data.uuid]=this.data.clone(W)),new Ju(W.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(W){if(void 0===W){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const W=[];for(let y=0;y<this.count;y++){const M=y*this.data.stride+this.offset;for(let y=0;y<this.itemSize;y++)W.push(this.data.array[M+y])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:W,normalized:this.normalized}}return void 0===W.interleavedBuffers&&(W.interleavedBuffers={}),void 0===W.interleavedBuffers[this.data.uuid]&&(W.interleavedBuffers[this.data.uuid]=this.data.toJSON(W)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ju extends fx{constructor(W){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Bx(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(W)}copy(W){return super.copy(W),this.color.copy(W.color),this.map=W.map,this.alphaMap=W.alphaMap,this.rotation=W.rotation,this.sizeAttenuation=W.sizeAttenuation,this.fog=W.fog,this}}let Cu;const Qu=new di,We=new di,ye=new di,Me=new LU,Ue=new LU,ie=new Qi,xe=new di,ne=new di,ke=new di,ge=new LU,ue=new LU,ee=new LU;class le extends qx{constructor(W){if(super(),this.isSprite=!0,this.type="Sprite",void 0===Cu){Cu=new Tn;const W=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),y=new Fu(W,5);Cu.setIndex([0,1,2,0,2,3]),Cu.setAttribute("position",new Ju(y,3,0,!1)),Cu.setAttribute("uv",new Ju(y,2,3,!1))}this.geometry=Cu,this.material=void 0!==W?W:new ju,this.center=new LU(.5,.5)}raycast(W,y){null===W.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),We.setFromMatrixScale(this.matrixWorld),ie.copy(W.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(W.camera.matrixWorldInverse,this.matrixWorld),ye.setFromMatrixPosition(this.modelViewMatrix),W.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&We.multiplyScalar(-ye.z);const M=this.material.rotation;let U,i;0!==M&&(i=Math.cos(M),U=Math.sin(M));const x=this.center;Ge(xe.set(-.5,-.5,0),ye,x,We,U,i),Ge(ne.set(.5,-.5,0),ye,x,We,U,i),Ge(ke.set(.5,.5,0),ye,x,We,U,i),ge.set(0,0),ue.set(1,0),ee.set(1,1);let n=W.ray.intersectTriangle(xe,ne,ke,!1,Qu);if(null===n&&(Ge(ne.set(-.5,.5,0),ye,x,We,U,i),ue.set(0,1),n=W.ray.intersectTriangle(xe,ke,ne,!1,Qu),null===n))return;const k=W.ray.origin.distanceTo(Qu);k<W.near||k>W.far||y.push({distance:k,point:Qu.clone(),uv:Ex.getInterpolation(Qu,xe,ne,ke,ge,ue,ee,new LU),face:null,object:this})}copy(W,y){return super.copy(W,y),void 0!==W.center&&this.center.copy(W.center),this.material=W.material,this}}function Ge(W,y,M,U,i,x){Me.subVectors(W,M).addScalar(.5).multiply(U),void 0!==i?(Ue.x=x*Me.x-i*Me.y,Ue.y=i*Me.x+x*Me.y):Ue.copy(Me),W.copy(y),W.x+=Ue.x,W.y+=Ue.y,W.applyMatrix4(ie)}const Ye=new di,ce=new di;class De extends qx{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(W){super.copy(W,!1);const y=W.levels;for(let W=0,M=y.length;W<M;W++){const M=y[W];this.addLevel(M.object.clone(),M.distance,M.hysteresis)}return this.autoUpdate=W.autoUpdate,this}addLevel(W,y=0,M=0){y=Math.abs(y);const U=this.levels;let i;for(i=0;i<U.length&&!(y<U[i].distance);i++);return U.splice(i,0,{distance:y,hysteresis:M,object:W}),this.add(W),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(W){const y=this.levels;if(y.length>0){let M,U;for(M=1,U=y.length;M<U;M++){let U=y[M].distance;if(y[M].object.visible&&(U-=U*y[M].hysteresis),W<U)break}return y[M-1].object}return null}raycast(W,y){if(this.levels.length>0){Ye.setFromMatrixPosition(this.matrixWorld);const M=W.ray.origin.distanceTo(Ye);this.getObjectForDistance(M).raycast(W,y)}}update(W){const y=this.levels;if(y.length>1){Ye.setFromMatrixPosition(W.matrixWorld),ce.setFromMatrixPosition(this.matrixWorld);const M=Ye.distanceTo(ce)/W.zoom;let U,i;for(y[0].object.visible=!0,U=1,i=y.length;U<i;U++){let W=y[U].distance;if(y[U].object.visible&&(W-=W*y[U].hysteresis),!(M>=W))break;y[U-1].object.visible=!1,y[U].object.visible=!0}for(this._currentLevel=U-1;U<i;U++)y[U].object.visible=!1}}toJSON(W){const y=super.toJSON(W);!1===this.autoUpdate&&(y.object.autoUpdate=!1),y.object.levels=[];const M=this.levels;for(let W=0,U=M.length;W<U;W++){const U=M[W];y.object.levels.push({object:U.object.uuid,distance:U.distance,hysteresis:U.hysteresis})}return y}}const re=new di,Ae=new ci,Te=new ci,Oe=new di,he=new Qi,Se=new di,oe=new vi,de=new Qi,qe=new Ci;class se extends En{constructor(W,y){super(W,y),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Qi,this.bindMatrixInverse=new Qi,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const W=this.geometry;null===this.boundingBox&&(this.boundingBox=new Ni),this.boundingBox.makeEmpty();const y=W.getAttribute("position");for(let W=0;W<y.count;W++)Se.fromBufferAttribute(y,W),this.applyBoneTransform(W,Se),this.boundingBox.expandByPoint(Se)}computeBoundingSphere(){const W=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new vi),this.boundingSphere.makeEmpty();const y=W.getAttribute("position");for(let W=0;W<y.count;W++)Se.fromBufferAttribute(y,W),this.applyBoneTransform(W,Se),this.boundingSphere.expandByPoint(Se)}copy(W,y){return super.copy(W,y),this.bindMode=W.bindMode,this.bindMatrix.copy(W.bindMatrix),this.bindMatrixInverse.copy(W.bindMatrixInverse),this.skeleton=W.skeleton,null!==W.boundingBox&&(this.boundingBox=W.boundingBox.clone()),null!==W.boundingSphere&&(this.boundingSphere=W.boundingSphere.clone()),this}raycast(W,y){const M=this.material,U=this.matrixWorld;void 0!==M&&(null===this.boundingSphere&&this.computeBoundingSphere(),oe.copy(this.boundingSphere),oe.applyMatrix4(U),!1!==W.ray.intersectsSphere(oe)&&(de.copy(U).invert(),qe.copy(W.ray).applyMatrix4(de),null!==this.boundingBox&&!1===qe.intersectsBox(this.boundingBox)||this._computeIntersections(W,y,qe)))}getVertexPosition(W,y){return super.getVertexPosition(W,y),this.applyBoneTransform(W,y),y}bind(W,y){this.skeleton=W,void 0===y&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),y=this.matrixWorld),this.bindMatrix.copy(y),this.bindMatrixInverse.copy(y).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const W=new ci,y=this.geometry.attributes.skinWeight;for(let M=0,U=y.count;M<U;M++){W.fromBufferAttribute(y,M);const U=1/W.manhattanLength();U!==1/0?W.multiplyScalar(U):W.set(1,0,0,0),y.setXYZW(M,W.x,W.y,W.z,W.w)}}updateMatrixWorld(W){super.updateMatrixWorld(W),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(W,y){const M=this.skeleton,U=this.geometry;Ae.fromBufferAttribute(U.attributes.skinIndex,W),Te.fromBufferAttribute(U.attributes.skinWeight,W),re.copy(y).applyMatrix4(this.bindMatrix),y.set(0,0,0);for(let W=0;W<4;W++){const U=Te.getComponent(W);if(0!==U){const i=Ae.getComponent(W);he.multiplyMatrices(M.bones[i].matrixWorld,M.boneInverses[i]),y.addScaledVector(Oe.copy(re).applyMatrix4(he),U)}}return y.applyMatrix4(this.bindMatrixInverse)}boneTransform(W,y){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(W,y)}}class Ne extends qx{constructor(){super(),this.isBone=!0,this.type="Bone"}}class _e extends Yi{constructor(W=null,y=1,M=1,U,i,x,n,k,g=cy,u=cy,e,l){super(null,x,n,k,g,u,U,i,e,l),this.isDataTexture=!0,this.image={data:W,width:y,height:M},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const pe=new Qi,be=new Qi;class me{constructor(W=[],y=[]){this.uuid=IU(),this.bones=W.slice(0),this.boneInverses=y,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const W=this.bones,y=this.boneInverses;if(this.boneMatrices=new Float32Array(16*W.length),0===y.length)this.calculateInverses();else if(W.length!==y.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let W=0,y=this.bones.length;W<y;W++)this.boneInverses.push(new Qi)}}calculateInverses(){this.boneInverses.length=0;for(let W=0,y=this.bones.length;W<y;W++){const y=new Qi;this.bones[W]&&y.copy(this.bones[W].matrixWorld).invert(),this.boneInverses.push(y)}}pose(){for(let W=0,y=this.bones.length;W<y;W++){const y=this.bones[W];y&&y.matrixWorld.copy(this.boneInverses[W]).invert()}for(let W=0,y=this.bones.length;W<y;W++){const y=this.bones[W];y&&(y.parent&&y.parent.isBone?(y.matrix.copy(y.parent.matrixWorld).invert(),y.matrix.multiply(y.matrixWorld)):y.matrix.copy(y.matrixWorld),y.matrix.decompose(y.position,y.quaternion,y.scale))}}update(){const W=this.bones,y=this.boneInverses,M=this.boneMatrices,U=this.boneTexture;for(let U=0,i=W.length;U<i;U++){const i=W[U]?W[U].matrixWorld:be;pe.multiplyMatrices(i,y[U]),pe.toArray(M,16*U)}null!==U&&(U.needsUpdate=!0)}clone(){return new me(this.bones,this.boneInverses)}computeBoneTexture(){let W=Math.sqrt(4*this.bones.length);W=$U(W),W=Math.max(W,4);const y=new Float32Array(W*W*4);y.set(this.boneMatrices);const M=new _e(y,W,W,Ey,my);return M.needsUpdate=!0,this.boneMatrices=y,this.boneTexture=M,this.boneTextureSize=W,this}getBoneByName(W){for(let y=0,M=this.bones.length;y<M;y++){const M=this.bones[y];if(M.name===W)return M}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(W,y){this.uuid=W.uuid;for(let M=0,U=W.bones.length;M<U;M++){const U=W.bones[M];let i=y[U];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",U),i=new Ne),this.bones.push(i),this.boneInverses.push((new Qi).fromArray(W.boneInverses[M]))}return this.init(),this}toJSON(){const W={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};W.uuid=this.uuid;const y=this.bones,M=this.boneInverses;for(let U=0,i=y.length;U<i;U++){const i=y[U];W.bones.push(i.uuid);const x=M[U];W.boneInverses.push(x.toArray())}return W}}class ze extends Qx{constructor(W,y,M,U=1){super(W,y,M),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=U}copy(W){return super.copy(W),this.meshPerAttribute=W.meshPerAttribute,this}toJSON(){const W=super.toJSON();return W.meshPerAttribute=this.meshPerAttribute,W.isInstancedBufferAttribute=!0,W}}const Ke=new Qi,Pe=new Qi,Re=[],Ie=new Ni,Ee=new Qi,Ze=new En,fe=new vi;class Ve extends En{constructor(W,y,M){super(W,y),this.isInstancedMesh=!0,this.instanceMatrix=new ze(new Float32Array(16*M),16),this.instanceColor=null,this.count=M,this.boundingBox=null,this.boundingSphere=null;for(let W=0;W<M;W++)this.setMatrixAt(W,Ee)}computeBoundingBox(){const W=this.geometry,y=this.count;null===this.boundingBox&&(this.boundingBox=new Ni),null===W.boundingBox&&W.computeBoundingBox(),this.boundingBox.makeEmpty();for(let M=0;M<y;M++)this.getMatrixAt(M,Ke),Ie.copy(W.boundingBox).applyMatrix4(Ke),this.boundingBox.union(Ie)}computeBoundingSphere(){const W=this.geometry,y=this.count;null===this.boundingSphere&&(this.boundingSphere=new vi),null===W.boundingSphere&&W.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let M=0;M<y;M++)this.getMatrixAt(M,Ke),fe.copy(W.boundingSphere).applyMatrix4(Ke),this.boundingSphere.union(fe)}copy(W,y){return super.copy(W,y),this.instanceMatrix.copy(W.instanceMatrix),null!==W.instanceColor&&(this.instanceColor=W.instanceColor.clone()),this.count=W.count,null!==W.boundingBox&&(this.boundingBox=W.boundingBox.clone()),null!==W.boundingSphere&&(this.boundingSphere=W.boundingSphere.clone()),this}getColorAt(W,y){y.fromArray(this.instanceColor.array,3*W)}getMatrixAt(W,y){y.fromArray(this.instanceMatrix.array,16*W)}raycast(W,y){const M=this.matrixWorld,U=this.count;if(Ze.geometry=this.geometry,Ze.material=this.material,void 0!==Ze.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),fe.copy(this.boundingSphere),fe.applyMatrix4(M),!1!==W.ray.intersectsSphere(fe)))for(let i=0;i<U;i++){this.getMatrixAt(i,Ke),Pe.multiplyMatrices(M,Ke),Ze.matrixWorld=Pe,Ze.raycast(W,Re);for(let W=0,M=Re.length;W<M;W++){const M=Re[W];M.instanceId=i,M.object=this,y.push(M)}Re.length=0}}setColorAt(W,y){null===this.instanceColor&&(this.instanceColor=new ze(new Float32Array(3*this.instanceMatrix.count),3)),y.toArray(this.instanceColor.array,3*W)}setMatrixAt(W,y){y.toArray(this.instanceMatrix.array,16*W)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class $e extends fx{constructor(W){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Bx(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(W)}copy(W){return super.copy(W),this.color.copy(W.color),this.map=W.map,this.linewidth=W.linewidth,this.linecap=W.linecap,this.linejoin=W.linejoin,this.fog=W.fog,this}}const ae=new di,He=new di,Be=new Qi,ve=new Ci,Le=new vi;class Xe extends qx{constructor(W=new Tn,y=new $e){super(),this.isLine=!0,this.type="Line",this.geometry=W,this.material=y,this.updateMorphTargets()}copy(W,y){return super.copy(W,y),this.material=W.material,this.geometry=W.geometry,this}computeLineDistances(){const W=this.geometry;if(null===W.index){const y=W.attributes.position,M=[0];for(let W=1,U=y.count;W<U;W++)ae.fromBufferAttribute(y,W-1),He.fromBufferAttribute(y,W),M[W]=M[W-1],M[W]+=ae.distanceTo(He);W.setAttribute("lineDistance",new un(M,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(W,y){const M=this.geometry,U=this.matrixWorld,i=W.params.Line.threshold,x=M.drawRange;if(null===M.boundingSphere&&M.computeBoundingSphere(),Le.copy(M.boundingSphere),Le.applyMatrix4(U),Le.radius+=i,!1===W.ray.intersectsSphere(Le))return;Be.copy(U).invert(),ve.copy(W.ray).applyMatrix4(Be);const n=i/((this.scale.x+this.scale.y+this.scale.z)/3),k=n*n,g=new di,u=new di,e=new di,l=new di,G=this.isLineSegments?2:1,Y=M.index,c=M.attributes.position;if(null!==Y)for(let M=Math.max(0,x.start),U=Math.min(Y.count,x.start+x.count)-1;M<U;M+=G){const U=Y.getX(M),i=Y.getX(M+1);if(g.fromBufferAttribute(c,U),u.fromBufferAttribute(c,i),ve.distanceSqToSegment(g,u,l,e)>k)continue;l.applyMatrix4(this.matrixWorld);const x=W.ray.origin.distanceTo(l);x<W.near||x>W.far||y.push({distance:x,point:e.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}else for(let M=Math.max(0,x.start),U=Math.min(c.count,x.start+x.count)-1;M<U;M+=G){if(g.fromBufferAttribute(c,M),u.fromBufferAttribute(c,M+1),ve.distanceSqToSegment(g,u,l,e)>k)continue;l.applyMatrix4(this.matrixWorld);const U=W.ray.origin.distanceTo(l);U<W.near||U>W.far||y.push({distance:U,point:e.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const W=this.geometry.morphAttributes,y=Object.keys(W);if(y.length>0){const M=W[y[0]];if(void 0!==M){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let W=0,y=M.length;W<y;W++){const y=M[W].name||String(W);this.morphTargetInfluences.push(0),this.morphTargetDictionary[y]=W}}}}}const we=new di,Fe=new di;class te extends Xe{constructor(W,y){super(W,y),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const W=this.geometry;if(null===W.index){const y=W.attributes.position,M=[];for(let W=0,U=y.count;W<U;W+=2)we.fromBufferAttribute(y,W),Fe.fromBufferAttribute(y,W+1),M[W]=0===W?0:M[W-1],M[W+1]=M[W]+we.distanceTo(Fe);W.setAttribute("lineDistance",new un(M,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Je extends Xe{constructor(W,y){super(W,y),this.isLineLoop=!0,this.type="LineLoop"}}class je extends fx{constructor(W){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Bx(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(W)}copy(W){return super.copy(W),this.color.copy(W.color),this.map=W.map,this.alphaMap=W.alphaMap,this.size=W.size,this.sizeAttenuation=W.sizeAttenuation,this.fog=W.fog,this}}const Ce=new Qi,Qe=new Ci,Wl=new vi,yl=new di;class Ml extends qx{constructor(W=new Tn,y=new je){super(),this.isPoints=!0,this.type="Points",this.geometry=W,this.material=y,this.updateMorphTargets()}copy(W,y){return super.copy(W,y),this.material=W.material,this.geometry=W.geometry,this}raycast(W,y){const M=this.geometry,U=this.matrixWorld,i=W.params.Points.threshold,x=M.drawRange;if(null===M.boundingSphere&&M.computeBoundingSphere(),Wl.copy(M.boundingSphere),Wl.applyMatrix4(U),Wl.radius+=i,!1===W.ray.intersectsSphere(Wl))return;Ce.copy(U).invert(),Qe.copy(W.ray).applyMatrix4(Ce);const n=i/((this.scale.x+this.scale.y+this.scale.z)/3),k=n*n,g=M.index,u=M.attributes.position;if(null!==g)for(let M=Math.max(0,x.start),i=Math.min(g.count,x.start+x.count);M<i;M++){const i=g.getX(M);yl.fromBufferAttribute(u,i),Ul(yl,i,k,U,W,y,this)}else for(let M=Math.max(0,x.start),i=Math.min(u.count,x.start+x.count);M<i;M++)yl.fromBufferAttribute(u,M),Ul(yl,M,k,U,W,y,this)}updateMorphTargets(){const W=this.geometry.morphAttributes,y=Object.keys(W);if(y.length>0){const M=W[y[0]];if(void 0!==M){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let W=0,y=M.length;W<y;W++){const y=M[W].name||String(W);this.morphTargetInfluences.push(0),this.morphTargetDictionary[y]=W}}}}}function Ul(W,y,M,U,i,x,n){const k=Qe.distanceSqToPoint(W);if(k<M){const M=new di;Qe.closestPointToPoint(W,M),M.applyMatrix4(U);const g=i.ray.origin.distanceTo(M);if(g<i.near||g>i.far)return;x.push({distance:g,distanceToRay:Math.sqrt(k),point:M,index:y,face:null,object:n})}}class il extends Yi{constructor(W,y,M,U,i,x,n,k,g){super(W,y,M,U,i,x,n,k,g),this.isVideoTexture=!0,this.minFilter=void 0!==x?x:Oy,this.magFilter=void 0!==i?i:Oy,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in W&&W.requestVideoFrameCallback((function y(){u.needsUpdate=!0,W.requestVideoFrameCallback(y)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const W=this.image;!1=="requestVideoFrameCallback"in W&&W.readyState>=W.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class xl extends Yi{constructor(W,y){super({width:W,height:y}),this.isFramebufferTexture=!0,this.magFilter=cy,this.minFilter=cy,this.generateMipmaps=!1,this.needsUpdate=!0}}class nl extends Yi{constructor(W,y,M,U,i,x,n,k,g,u,e,l){super(null,x,n,k,g,u,U,i,e,l),this.isCompressedTexture=!0,this.image={width:y,height:M},this.mipmaps=W,this.flipY=!1,this.generateMipmaps=!1}}class kl extends nl{constructor(W,y,M,U,i,x){super(W,y,M,i,x),this.isCompressedArrayTexture=!0,this.image.depth=U,this.wrapR=Gy}}class gl extends nl{constructor(W,y,M){super(void 0,W[0].width,W[0].height,y,M,ny),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=W}}class ul extends Yi{constructor(W,y,M,U,i,x,n,k,g){super(W,y,M,U,i,x,n,k,g),this.isCanvasTexture=!0,this.needsUpdate=!0}}class el{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(W,y){const M=this.getUtoTmapping(W);return this.getPoint(M,y)}getPoints(W=5){const y=[];for(let M=0;M<=W;M++)y.push(this.getPoint(M/W));return y}getSpacedPoints(W=5){const y=[];for(let M=0;M<=W;M++)y.push(this.getPointAt(M/W));return y}getLength(){const W=this.getLengths();return W[W.length-1]}getLengths(W=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===W+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const y=[];let M,U=this.getPoint(0),i=0;y.push(0);for(let x=1;x<=W;x++)M=this.getPoint(x/W),i+=M.distanceTo(U),y.push(i),U=M;return this.cacheArcLengths=y,y}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(W,y){const M=this.getLengths();let U=0;const i=M.length;let x;x=y||W*M[i-1];let n,k=0,g=i-1;for(;k<=g;)if(U=Math.floor(k+(g-k)/2),n=M[U]-x,n<0)k=U+1;else{if(!(n>0)){g=U;break}g=U-1}if(U=g,M[U]===x)return U/(i-1);const u=M[U];return(U+(x-u)/(M[U+1]-u))/(i-1)}getTangent(W,y){const M=1e-4;let U=W-M,i=W+M;U<0&&(U=0),i>1&&(i=1);const x=this.getPoint(U),n=this.getPoint(i),k=y||(x.isVector2?new LU:new di);return k.copy(n).sub(x).normalize(),k}getTangentAt(W,y){const M=this.getUtoTmapping(W);return this.getTangent(M,y)}computeFrenetFrames(W,y){const M=new di,U=[],i=[],x=[],n=new di,k=new Qi;for(let y=0;y<=W;y++){const M=y/W;U[y]=this.getTangentAt(M,new di)}i[0]=new di,x[0]=new di;let g=Number.MAX_VALUE;const u=Math.abs(U[0].x),e=Math.abs(U[0].y),l=Math.abs(U[0].z);u<=g&&(g=u,M.set(1,0,0)),e<=g&&(g=e,M.set(0,1,0)),l<=g&&M.set(0,0,1),n.crossVectors(U[0],M).normalize(),i[0].crossVectors(U[0],n),x[0].crossVectors(U[0],i[0]);for(let y=1;y<=W;y++){if(i[y]=i[y-1].clone(),x[y]=x[y-1].clone(),n.crossVectors(U[y-1],U[y]),n.length()>Number.EPSILON){n.normalize();const W=Math.acos(EU(U[y-1].dot(U[y]),-1,1));i[y].applyMatrix4(k.makeRotationAxis(n,W))}x[y].crossVectors(U[y],i[y])}if(!0===y){let y=Math.acos(EU(i[0].dot(i[W]),-1,1));y/=W,U[0].dot(n.crossVectors(i[0],i[W]))>0&&(y=-y);for(let M=1;M<=W;M++)i[M].applyMatrix4(k.makeRotationAxis(U[M],y*M)),x[M].crossVectors(U[M],i[M])}return{tangents:U,normals:i,binormals:x}}clone(){return(new this.constructor).copy(this)}copy(W){return this.arcLengthDivisions=W.arcLengthDivisions,this}toJSON(){const W={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return W.arcLengthDivisions=this.arcLengthDivisions,W.type=this.type,W}fromJSON(W){return this.arcLengthDivisions=W.arcLengthDivisions,this}}class ll extends el{constructor(W=0,y=0,M=1,U=1,i=0,x=2*Math.PI,n=!1,k=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=W,this.aY=y,this.xRadius=M,this.yRadius=U,this.aStartAngle=i,this.aEndAngle=x,this.aClockwise=n,this.aRotation=k}getPoint(W,y){const M=y||new LU,U=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const x=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=U;for(;i>U;)i-=U;i<Number.EPSILON&&(i=x?0:U),!0!==this.aClockwise||x||(i===U?i=-U:i-=U);const n=this.aStartAngle+W*i;let k=this.aX+this.xRadius*Math.cos(n),g=this.aY+this.yRadius*Math.sin(n);if(0!==this.aRotation){const W=Math.cos(this.aRotation),y=Math.sin(this.aRotation),M=k-this.aX,U=g-this.aY;k=M*W-U*y+this.aX,g=M*y+U*W+this.aY}return M.set(k,g)}copy(W){return super.copy(W),this.aX=W.aX,this.aY=W.aY,this.xRadius=W.xRadius,this.yRadius=W.yRadius,this.aStartAngle=W.aStartAngle,this.aEndAngle=W.aEndAngle,this.aClockwise=W.aClockwise,this.aRotation=W.aRotation,this}toJSON(){const W=super.toJSON();return W.aX=this.aX,W.aY=this.aY,W.xRadius=this.xRadius,W.yRadius=this.yRadius,W.aStartAngle=this.aStartAngle,W.aEndAngle=this.aEndAngle,W.aClockwise=this.aClockwise,W.aRotation=this.aRotation,W}fromJSON(W){return super.fromJSON(W),this.aX=W.aX,this.aY=W.aY,this.xRadius=W.xRadius,this.yRadius=W.yRadius,this.aStartAngle=W.aStartAngle,this.aEndAngle=W.aEndAngle,this.aClockwise=W.aClockwise,this.aRotation=W.aRotation,this}}class Gl extends ll{constructor(W,y,M,U,i,x){super(W,y,M,M,U,i,x),this.isArcCurve=!0,this.type="ArcCurve"}}function Yl(){let W=0,y=0,M=0,U=0;function i(i,x,n,k){W=i,y=n,M=-3*i+3*x-2*n-k,U=2*i-2*x+n+k}return{initCatmullRom:function(W,y,M,U,x){i(y,M,x*(M-W),x*(U-y))},initNonuniformCatmullRom:function(W,y,M,U,x,n,k){let g=(y-W)/x-(M-W)/(x+n)+(M-y)/n,u=(M-y)/n-(U-y)/(n+k)+(U-M)/k;g*=n,u*=n,i(y,M,g,u)},calc:function(i){const x=i*i;return W+y*i+M*x+U*(x*i)}}}const cl=new di,Dl=new Yl,rl=new Yl,Al=new Yl;class Tl extends el{constructor(W=[],y=!1,M="centripetal",U=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=W,this.closed=y,this.curveType=M,this.tension=U}getPoint(W,y=new di){const M=y,U=this.points,i=U.length,x=(i-(this.closed?0:1))*W;let n,k,g=Math.floor(x),u=x-g;this.closed?g+=g>0?0:(Math.floor(Math.abs(g)/i)+1)*i:0===u&&g===i-1&&(g=i-2,u=1),this.closed||g>0?n=U[(g-1)%i]:(cl.subVectors(U[0],U[1]).add(U[0]),n=cl);const e=U[g%i],l=U[(g+1)%i];if(this.closed||g+2<i?k=U[(g+2)%i]:(cl.subVectors(U[i-1],U[i-2]).add(U[i-1]),k=cl),"centripetal"===this.curveType||"chordal"===this.curveType){const W="chordal"===this.curveType?.5:.25;let y=Math.pow(n.distanceToSquared(e),W),M=Math.pow(e.distanceToSquared(l),W),U=Math.pow(l.distanceToSquared(k),W);M<1e-4&&(M=1),y<1e-4&&(y=M),U<1e-4&&(U=M),Dl.initNonuniformCatmullRom(n.x,e.x,l.x,k.x,y,M,U),rl.initNonuniformCatmullRom(n.y,e.y,l.y,k.y,y,M,U),Al.initNonuniformCatmullRom(n.z,e.z,l.z,k.z,y,M,U)}else"catmullrom"===this.curveType&&(Dl.initCatmullRom(n.x,e.x,l.x,k.x,this.tension),rl.initCatmullRom(n.y,e.y,l.y,k.y,this.tension),Al.initCatmullRom(n.z,e.z,l.z,k.z,this.tension));return M.set(Dl.calc(u),rl.calc(u),Al.calc(u)),M}copy(W){super.copy(W),this.points=[];for(let y=0,M=W.points.length;y<M;y++){const M=W.points[y];this.points.push(M.clone())}return this.closed=W.closed,this.curveType=W.curveType,this.tension=W.tension,this}toJSON(){const W=super.toJSON();W.points=[];for(let y=0,M=this.points.length;y<M;y++){const M=this.points[y];W.points.push(M.toArray())}return W.closed=this.closed,W.curveType=this.curveType,W.tension=this.tension,W}fromJSON(W){super.fromJSON(W),this.points=[];for(let y=0,M=W.points.length;y<M;y++){const M=W.points[y];this.points.push((new di).fromArray(M))}return this.closed=W.closed,this.curveType=W.curveType,this.tension=W.tension,this}}function Ol(W,y,M,U,i){const x=.5*(U-y),n=.5*(i-M),k=W*W;return(2*M-2*U+x+n)*(W*k)+(-3*M+3*U-2*x-n)*k+x*W+M}function hl(W,y,M,U){return function(W,y){const M=1-W;return M*M*y}(W,y)+function(W,y){return 2*(1-W)*W*y}(W,M)+function(W,y){return W*W*y}(W,U)}function Sl(W,y,M,U,i){return function(W,y){const M=1-W;return M*M*M*y}(W,y)+function(W,y){const M=1-W;return 3*M*M*W*y}(W,M)+function(W,y){return 3*(1-W)*W*W*y}(W,U)+function(W,y){return W*W*W*y}(W,i)}class ol extends el{constructor(W=new LU,y=new LU,M=new LU,U=new LU){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=W,this.v1=y,this.v2=M,this.v3=U}getPoint(W,y=new LU){const M=y,U=this.v0,i=this.v1,x=this.v2,n=this.v3;return M.set(Sl(W,U.x,i.x,x.x,n.x),Sl(W,U.y,i.y,x.y,n.y)),M}copy(W){return super.copy(W),this.v0.copy(W.v0),this.v1.copy(W.v1),this.v2.copy(W.v2),this.v3.copy(W.v3),this}toJSON(){const W=super.toJSON();return W.v0=this.v0.toArray(),W.v1=this.v1.toArray(),W.v2=this.v2.toArray(),W.v3=this.v3.toArray(),W}fromJSON(W){return super.fromJSON(W),this.v0.fromArray(W.v0),this.v1.fromArray(W.v1),this.v2.fromArray(W.v2),this.v3.fromArray(W.v3),this}}class dl extends el{constructor(W=new di,y=new di,M=new di,U=new di){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=W,this.v1=y,this.v2=M,this.v3=U}getPoint(W,y=new di){const M=y,U=this.v0,i=this.v1,x=this.v2,n=this.v3;return M.set(Sl(W,U.x,i.x,x.x,n.x),Sl(W,U.y,i.y,x.y,n.y),Sl(W,U.z,i.z,x.z,n.z)),M}copy(W){return super.copy(W),this.v0.copy(W.v0),this.v1.copy(W.v1),this.v2.copy(W.v2),this.v3.copy(W.v3),this}toJSON(){const W=super.toJSON();return W.v0=this.v0.toArray(),W.v1=this.v1.toArray(),W.v2=this.v2.toArray(),W.v3=this.v3.toArray(),W}fromJSON(W){return super.fromJSON(W),this.v0.fromArray(W.v0),this.v1.fromArray(W.v1),this.v2.fromArray(W.v2),this.v3.fromArray(W.v3),this}}class ql extends el{constructor(W=new LU,y=new LU){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=W,this.v2=y}getPoint(W,y=new LU){const M=y;return 1===W?M.copy(this.v2):(M.copy(this.v2).sub(this.v1),M.multiplyScalar(W).add(this.v1)),M}getPointAt(W,y){return this.getPoint(W,y)}getTangent(W,y=new LU){return y.subVectors(this.v2,this.v1).normalize()}getTangentAt(W,y){return this.getTangent(W,y)}copy(W){return super.copy(W),this.v1.copy(W.v1),this.v2.copy(W.v2),this}toJSON(){const W=super.toJSON();return W.v1=this.v1.toArray(),W.v2=this.v2.toArray(),W}fromJSON(W){return super.fromJSON(W),this.v1.fromArray(W.v1),this.v2.fromArray(W.v2),this}}class sl extends el{constructor(W=new di,y=new di){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=W,this.v2=y}getPoint(W,y=new di){const M=y;return 1===W?M.copy(this.v2):(M.copy(this.v2).sub(this.v1),M.multiplyScalar(W).add(this.v1)),M}getPointAt(W,y){return this.getPoint(W,y)}getTangent(W,y=new di){return y.subVectors(this.v2,this.v1).normalize()}getTangentAt(W,y){return this.getTangent(W,y)}copy(W){return super.copy(W),this.v1.copy(W.v1),this.v2.copy(W.v2),this}toJSON(){const W=super.toJSON();return W.v1=this.v1.toArray(),W.v2=this.v2.toArray(),W}fromJSON(W){return super.fromJSON(W),this.v1.fromArray(W.v1),this.v2.fromArray(W.v2),this}}class Nl extends el{constructor(W=new LU,y=new LU,M=new LU){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=W,this.v1=y,this.v2=M}getPoint(W,y=new LU){const M=y,U=this.v0,i=this.v1,x=this.v2;return M.set(hl(W,U.x,i.x,x.x),hl(W,U.y,i.y,x.y)),M}copy(W){return super.copy(W),this.v0.copy(W.v0),this.v1.copy(W.v1),this.v2.copy(W.v2),this}toJSON(){const W=super.toJSON();return W.v0=this.v0.toArray(),W.v1=this.v1.toArray(),W.v2=this.v2.toArray(),W}fromJSON(W){return super.fromJSON(W),this.v0.fromArray(W.v0),this.v1.fromArray(W.v1),this.v2.fromArray(W.v2),this}}class _l extends el{constructor(W=new di,y=new di,M=new di){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=W,this.v1=y,this.v2=M}getPoint(W,y=new di){const M=y,U=this.v0,i=this.v1,x=this.v2;return M.set(hl(W,U.x,i.x,x.x),hl(W,U.y,i.y,x.y),hl(W,U.z,i.z,x.z)),M}copy(W){return super.copy(W),this.v0.copy(W.v0),this.v1.copy(W.v1),this.v2.copy(W.v2),this}toJSON(){const W=super.toJSON();return W.v0=this.v0.toArray(),W.v1=this.v1.toArray(),W.v2=this.v2.toArray(),W}fromJSON(W){return super.fromJSON(W),this.v0.fromArray(W.v0),this.v1.fromArray(W.v1),this.v2.fromArray(W.v2),this}}class pl extends el{constructor(W=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=W}getPoint(W,y=new LU){const M=y,U=this.points,i=(U.length-1)*W,x=Math.floor(i),n=i-x,k=U[0===x?x:x-1],g=U[x],u=U[x>U.length-2?U.length-1:x+1],e=U[x>U.length-3?U.length-1:x+2];return M.set(Ol(n,k.x,g.x,u.x,e.x),Ol(n,k.y,g.y,u.y,e.y)),M}copy(W){super.copy(W),this.points=[];for(let y=0,M=W.points.length;y<M;y++){const M=W.points[y];this.points.push(M.clone())}return this}toJSON(){const W=super.toJSON();W.points=[];for(let y=0,M=this.points.length;y<M;y++){const M=this.points[y];W.points.push(M.toArray())}return W}fromJSON(W){super.fromJSON(W),this.points=[];for(let y=0,M=W.points.length;y<M;y++){const M=W.points[y];this.points.push((new LU).fromArray(M))}return this}}var bl=Object.freeze({__proto__:null,ArcCurve:Gl,CatmullRomCurve3:Tl,CubicBezierCurve:ol,CubicBezierCurve3:dl,EllipseCurve:ll,LineCurve:ql,LineCurve3:sl,QuadraticBezierCurve:Nl,QuadraticBezierCurve3:_l,SplineCurve:pl});class ml extends el{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(W){this.curves.push(W)}closePath(){const W=this.curves[0].getPoint(0),y=this.curves[this.curves.length-1].getPoint(1);W.equals(y)||this.curves.push(new ql(y,W))}getPoint(W,y){const M=W*this.getLength(),U=this.getCurveLengths();let i=0;for(;i<U.length;){if(U[i]>=M){const W=U[i]-M,x=this.curves[i],n=x.getLength(),k=0===n?0:1-W/n;return x.getPointAt(k,y)}i++}return null}getLength(){const W=this.getCurveLengths();return W[W.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const W=[];let y=0;for(let M=0,U=this.curves.length;M<U;M++)y+=this.curves[M].getLength(),W.push(y);return this.cacheLengths=W,W}getSpacedPoints(W=40){const y=[];for(let M=0;M<=W;M++)y.push(this.getPoint(M/W));return this.autoClose&&y.push(y[0]),y}getPoints(W=12){const y=[];let M;for(let U=0,i=this.curves;U<i.length;U++){const x=i[U],n=x.isEllipseCurve?2*W:x.isLineCurve||x.isLineCurve3?1:x.isSplineCurve?W*x.points.length:W,k=x.getPoints(n);for(let W=0;W<k.length;W++){const U=k[W];M&&M.equals(U)||(y.push(U),M=U)}}return this.autoClose&&y.length>1&&!y[y.length-1].equals(y[0])&&y.push(y[0]),y}copy(W){super.copy(W),this.curves=[];for(let y=0,M=W.curves.length;y<M;y++){const M=W.curves[y];this.curves.push(M.clone())}return this.autoClose=W.autoClose,this}toJSON(){const W=super.toJSON();W.autoClose=this.autoClose,W.curves=[];for(let y=0,M=this.curves.length;y<M;y++){const M=this.curves[y];W.curves.push(M.toJSON())}return W}fromJSON(W){super.fromJSON(W),this.autoClose=W.autoClose,this.curves=[];for(let y=0,M=W.curves.length;y<M;y++){const M=W.curves[y];this.curves.push((new bl[M.type]).fromJSON(M))}return this}}class zl extends ml{constructor(W){super(),this.type="Path",this.currentPoint=new LU,W&&this.setFromPoints(W)}setFromPoints(W){this.moveTo(W[0].x,W[0].y);for(let y=1,M=W.length;y<M;y++)this.lineTo(W[y].x,W[y].y);return this}moveTo(W,y){return this.currentPoint.set(W,y),this}lineTo(W,y){const M=new ql(this.currentPoint.clone(),new LU(W,y));return this.curves.push(M),this.currentPoint.set(W,y),this}quadraticCurveTo(W,y,M,U){const i=new Nl(this.currentPoint.clone(),new LU(W,y),new LU(M,U));return this.curves.push(i),this.currentPoint.set(M,U),this}bezierCurveTo(W,y,M,U,i,x){const n=new ol(this.currentPoint.clone(),new LU(W,y),new LU(M,U),new LU(i,x));return this.curves.push(n),this.currentPoint.set(i,x),this}splineThru(W){const y=[this.currentPoint.clone()].concat(W),M=new pl(y);return this.curves.push(M),this.currentPoint.copy(W[W.length-1]),this}arc(W,y,M,U,i,x){const n=this.currentPoint.x,k=this.currentPoint.y;return this.absarc(W+n,y+k,M,U,i,x),this}absarc(W,y,M,U,i,x){return this.absellipse(W,y,M,M,U,i,x),this}ellipse(W,y,M,U,i,x,n,k){const g=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(W+g,y+u,M,U,i,x,n,k),this}absellipse(W,y,M,U,i,x,n,k){const g=new ll(W,y,M,U,i,x,n,k);if(this.curves.length>0){const W=g.getPoint(0);W.equals(this.currentPoint)||this.lineTo(W.x,W.y)}this.curves.push(g);const u=g.getPoint(1);return this.currentPoint.copy(u),this}copy(W){return super.copy(W),this.currentPoint.copy(W.currentPoint),this}toJSON(){const W=super.toJSON();return W.currentPoint=this.currentPoint.toArray(),W}fromJSON(W){return super.fromJSON(W),this.currentPoint.fromArray(W.currentPoint),this}}class Kl extends Tn{constructor(W=[new LU(0,-.5),new LU(.5,0),new LU(0,.5)],y=12,M=0,U=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:W,segments:y,phiStart:M,phiLength:U},y=Math.floor(y),U=EU(U,0,2*Math.PI);const i=[],x=[],n=[],k=[],g=[],u=1/y,e=new di,l=new LU,G=new di,Y=new di,c=new di;let D=0,r=0;for(let y=0;y<=W.length-1;y++)switch(y){case 0:D=W[y+1].x-W[y].x,r=W[y+1].y-W[y].y,G.x=1*r,G.y=-D,G.z=0*r,c.copy(G),G.normalize(),k.push(G.x,G.y,G.z);break;case W.length-1:k.push(c.x,c.y,c.z);break;default:D=W[y+1].x-W[y].x,r=W[y+1].y-W[y].y,G.x=1*r,G.y=-D,G.z=0*r,Y.copy(G),G.x+=c.x,G.y+=c.y,G.z+=c.z,G.normalize(),k.push(G.x,G.y,G.z),c.copy(Y)}for(let i=0;i<=y;i++){const G=M+i*u*U,Y=Math.sin(G),c=Math.cos(G);for(let M=0;M<=W.length-1;M++){e.x=W[M].x*Y,e.y=W[M].y,e.z=W[M].x*c,x.push(e.x,e.y,e.z),l.x=i/y,l.y=M/(W.length-1),n.push(l.x,l.y);const U=k[3*M+0]*Y,u=k[3*M+1],G=k[3*M+0]*c;g.push(U,u,G)}}for(let M=0;M<y;M++)for(let y=0;y<W.length-1;y++){const U=y+M*W.length,x=U,n=U+W.length,k=U+W.length+1,g=U+1;i.push(x,n,g),i.push(k,g,n)}this.setIndex(i),this.setAttribute("position",new un(x,3)),this.setAttribute("uv",new un(n,2)),this.setAttribute("normal",new un(g,3))}copy(W){return super.copy(W),this.parameters=Object.assign({},W.parameters),this}static fromJSON(W){return new Kl(W.points,W.segments,W.phiStart,W.phiLength)}}class Pl extends Kl{constructor(W=1,y=1,M=4,U=8){const i=new zl;i.absarc(0,-y/2,W,1.5*Math.PI,0),i.absarc(0,y/2,W,0,.5*Math.PI),super(i.getPoints(M),U),this.type="CapsuleGeometry",this.parameters={radius:W,length:y,capSegments:M,radialSegments:U}}static fromJSON(W){return new Pl(W.radius,W.length,W.capSegments,W.radialSegments)}}class Rl extends Tn{constructor(W=1,y=32,M=0,U=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:W,segments:y,thetaStart:M,thetaLength:U},y=Math.max(3,y);const i=[],x=[],n=[],k=[],g=new di,u=new LU;x.push(0,0,0),n.push(0,0,1),k.push(.5,.5);for(let i=0,e=3;i<=y;i++,e+=3){const l=M+i/y*U;g.x=W*Math.cos(l),g.y=W*Math.sin(l),x.push(g.x,g.y,g.z),n.push(0,0,1),u.x=(x[e]/W+1)/2,u.y=(x[e+1]/W+1)/2,k.push(u.x,u.y)}for(let W=1;W<=y;W++)i.push(W,W+1,0);this.setIndex(i),this.setAttribute("position",new un(x,3)),this.setAttribute("normal",new un(n,3)),this.setAttribute("uv",new un(k,2))}copy(W){return super.copy(W),this.parameters=Object.assign({},W.parameters),this}static fromJSON(W){return new Rl(W.radius,W.segments,W.thetaStart,W.thetaLength)}}class Il extends Tn{constructor(W=1,y=1,M=1,U=32,i=1,x=!1,n=0,k=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:W,radiusBottom:y,height:M,radialSegments:U,heightSegments:i,openEnded:x,thetaStart:n,thetaLength:k};const g=this;U=Math.floor(U),i=Math.floor(i);const u=[],e=[],l=[],G=[];let Y=0;const c=[],D=M/2;let r=0;function A(M){const i=Y,x=new LU,c=new di;let A=0;const T=!0===M?W:y,O=!0===M?1:-1;for(let W=1;W<=U;W++)e.push(0,D*O,0),l.push(0,O,0),G.push(.5,.5),Y++;const h=Y;for(let W=0;W<=U;W++){const y=W/U*k+n,M=Math.cos(y),i=Math.sin(y);c.x=T*i,c.y=D*O,c.z=T*M,e.push(c.x,c.y,c.z),l.push(0,O,0),x.x=.5*M+.5,x.y=.5*i*O+.5,G.push(x.x,x.y),Y++}for(let W=0;W<U;W++){const y=i+W,U=h+W;!0===M?u.push(U,U+1,y):u.push(U+1,U,y),A+=3}g.addGroup(r,A,!0===M?1:2),r+=A}(function(){const x=new di,A=new di;let T=0;const O=(y-W)/M;for(let g=0;g<=i;g++){const u=[],r=g/i,T=r*(y-W)+W;for(let W=0;W<=U;W++){const y=W/U,i=y*k+n,g=Math.sin(i),c=Math.cos(i);A.x=T*g,A.y=-r*M+D,A.z=T*c,e.push(A.x,A.y,A.z),x.set(g,O,c).normalize(),l.push(x.x,x.y,x.z),G.push(y,1-r),u.push(Y++)}c.push(u)}for(let W=0;W<U;W++)for(let y=0;y<i;y++){const M=c[y][W],U=c[y+1][W],i=c[y+1][W+1],x=c[y][W+1];u.push(M,U,x),u.push(U,i,x),T+=6}g.addGroup(r,T,0),r+=T})(),!1===x&&(W>0&&A(!0),y>0&&A(!1)),this.setIndex(u),this.setAttribute("position",new un(e,3)),this.setAttribute("normal",new un(l,3)),this.setAttribute("uv",new un(G,2))}copy(W){return super.copy(W),this.parameters=Object.assign({},W.parameters),this}static fromJSON(W){return new Il(W.radiusTop,W.radiusBottom,W.height,W.radialSegments,W.heightSegments,W.openEnded,W.thetaStart,W.thetaLength)}}class El extends Il{constructor(W=1,y=1,M=32,U=1,i=!1,x=0,n=2*Math.PI){super(0,W,y,M,U,i,x,n),this.type="ConeGeometry",this.parameters={radius:W,height:y,radialSegments:M,heightSegments:U,openEnded:i,thetaStart:x,thetaLength:n}}static fromJSON(W){return new El(W.radius,W.height,W.radialSegments,W.heightSegments,W.openEnded,W.thetaStart,W.thetaLength)}}class Zl extends Tn{constructor(W=[],y=[],M=1,U=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:W,indices:y,radius:M,detail:U};const i=[],x=[];function n(W,y,M,U){const i=U+1,x=[];for(let U=0;U<=i;U++){x[U]=[];const n=W.clone().lerp(M,U/i),k=y.clone().lerp(M,U/i),g=i-U;for(let W=0;W<=g;W++)x[U][W]=0===W&&U===i?n:n.clone().lerp(k,W/g)}for(let W=0;W<i;W++)for(let y=0;y<2*(i-W)-1;y++){const M=Math.floor(y/2);y%2==0?(k(x[W][M+1]),k(x[W+1][M]),k(x[W][M])):(k(x[W][M+1]),k(x[W+1][M+1]),k(x[W+1][M]))}}function k(W){i.push(W.x,W.y,W.z)}function g(y,M){const U=3*y;M.x=W[U+0],M.y=W[U+1],M.z=W[U+2]}function u(W,y,M,U){U<0&&1===W.x&&(x[y]=W.x-1),0===M.x&&0===M.z&&(x[y]=U/2/Math.PI+.5)}function e(W){return Math.atan2(W.z,-W.x)}(function(W){const M=new di,U=new di,i=new di;for(let x=0;x<y.length;x+=3)g(y[x+0],M),g(y[x+1],U),g(y[x+2],i),n(M,U,i,W)})(U),function(W){const y=new di;for(let M=0;M<i.length;M+=3)y.x=i[M+0],y.y=i[M+1],y.z=i[M+2],y.normalize().multiplyScalar(W),i[M+0]=y.x,i[M+1]=y.y,i[M+2]=y.z}(M),function(){const W=new di;for(let M=0;M<i.length;M+=3){W.x=i[M+0],W.y=i[M+1],W.z=i[M+2];const U=e(W)/2/Math.PI+.5,n=(y=W,Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))/Math.PI+.5);x.push(U,1-n)}var y;(function(){const W=new di,y=new di,M=new di,U=new di,n=new LU,k=new LU,g=new LU;for(let l=0,G=0;l<i.length;l+=9,G+=6){W.set(i[l+0],i[l+1],i[l+2]),y.set(i[l+3],i[l+4],i[l+5]),M.set(i[l+6],i[l+7],i[l+8]),n.set(x[G+0],x[G+1]),k.set(x[G+2],x[G+3]),g.set(x[G+4],x[G+5]),U.copy(W).add(y).add(M).divideScalar(3);const Y=e(U);u(n,G+0,W,Y),u(k,G+2,y,Y),u(g,G+4,M,Y)}})(),function(){for(let W=0;W<x.length;W+=6){const y=x[W+0],M=x[W+2],U=x[W+4],i=Math.max(y,M,U),n=Math.min(y,M,U);i>.9&&n<.1&&(y<.2&&(x[W+0]+=1),M<.2&&(x[W+2]+=1),U<.2&&(x[W+4]+=1))}}()}(),this.setAttribute("position",new un(i,3)),this.setAttribute("normal",new un(i.slice(),3)),this.setAttribute("uv",new un(x,2)),0===U?this.computeVertexNormals():this.normalizeNormals()}copy(W){return super.copy(W),this.parameters=Object.assign({},W.parameters),this}static fromJSON(W){return new Zl(W.vertices,W.indices,W.radius,W.details)}}class fl extends Zl{constructor(W=1,y=0){const M=(1+Math.sqrt(5))/2,U=1/M;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-U,-M,0,-U,M,0,U,-M,0,U,M,-U,-M,0,-U,M,0,U,-M,0,U,M,0,-M,0,-U,M,0,-U,-M,0,U,M,0,U],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],W,y),this.type="DodecahedronGeometry",this.parameters={radius:W,detail:y}}static fromJSON(W){return new fl(W.radius,W.detail)}}const Vl=new di,$l=new di,al=new di,Hl=new Ex;class Bl extends Tn{constructor(W=null,y=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:W,thresholdAngle:y},null!==W){const M=4,U=Math.pow(10,M),i=Math.cos(PU*y),x=W.getIndex(),n=W.getAttribute("position"),k=x?x.count:n.count,g=[0,0,0],u=["a","b","c"],e=new Array(3),l={},G=[];for(let W=0;W<k;W+=3){x?(g[0]=x.getX(W),g[1]=x.getX(W+1),g[2]=x.getX(W+2)):(g[0]=W,g[1]=W+1,g[2]=W+2);const{a:y,b:M,c:k}=Hl;if(y.fromBufferAttribute(n,g[0]),M.fromBufferAttribute(n,g[1]),k.fromBufferAttribute(n,g[2]),Hl.getNormal(al),e[0]=`${Math.round(y.x*U)},${Math.round(y.y*U)},${Math.round(y.z*U)}`,e[1]=`${Math.round(M.x*U)},${Math.round(M.y*U)},${Math.round(M.z*U)}`,e[2]=`${Math.round(k.x*U)},${Math.round(k.y*U)},${Math.round(k.z*U)}`,e[0]!==e[1]&&e[1]!==e[2]&&e[2]!==e[0])for(let W=0;W<3;W++){const y=(W+1)%3,M=e[W],U=e[y],x=Hl[u[W]],n=Hl[u[y]],k=`${M}_${U}`,Y=`${U}_${M}`;Y in l&&l[Y]?(al.dot(l[Y].normal)<=i&&(G.push(x.x,x.y,x.z),G.push(n.x,n.y,n.z)),l[Y]=null):k in l||(l[k]={index0:g[W],index1:g[y],normal:al.clone()})}}for(const W in l)if(l[W]){const{index0:y,index1:M}=l[W];Vl.fromBufferAttribute(n,y),$l.fromBufferAttribute(n,M),G.push(Vl.x,Vl.y,Vl.z),G.push($l.x,$l.y,$l.z)}this.setAttribute("position",new un(G,3))}}copy(W){return super.copy(W),this.parameters=Object.assign({},W.parameters),this}}class vl extends zl{constructor(W){super(W),this.uuid=IU(),this.type="Shape",this.holes=[]}getPointsHoles(W){const y=[];for(let M=0,U=this.holes.length;M<U;M++)y[M]=this.holes[M].getPoints(W);return y}extractPoints(W){return{shape:this.getPoints(W),holes:this.getPointsHoles(W)}}copy(W){super.copy(W),this.holes=[];for(let y=0,M=W.holes.length;y<M;y++){const M=W.holes[y];this.holes.push(M.clone())}return this}toJSON(){const W=super.toJSON();W.uuid=this.uuid,W.holes=[];for(let y=0,M=this.holes.length;y<M;y++){const M=this.holes[y];W.holes.push(M.toJSON())}return W}fromJSON(W){super.fromJSON(W),this.uuid=W.uuid,this.holes=[];for(let y=0,M=W.holes.length;y<M;y++){const M=W.holes[y];this.holes.push((new zl).fromJSON(M))}return this}}function Ll(W,y,M,U,i){let x,n;if(i===function(W,y,M,U){let i=0;for(let x=y,n=M-U;x<M;x+=U)i+=(W[n]-W[x])*(W[x+1]+W[n+1]),n=x;return i}(W,y,M,U)>0)for(x=y;x<M;x+=U)n=GG(x,W[x],W[x+1],n);else for(x=M-U;x>=y;x-=U)n=GG(x,W[x],W[x+1],n);return n&&nG(n,n.next)&&(YG(n),n=n.next),n}function Xl(W,y){if(!W)return W;y||(y=W);let M,U=W;do{if(M=!1,U.steiner||!nG(U,U.next)&&0!==xG(U.prev,U,U.next))U=U.next;else{if(YG(U),U=y=U.prev,U===U.next)break;M=!0}}while(M||U!==y);return y}function wl(W,y,M,U,i,x,n){if(!W)return;!n&&x&&function(W,y,M,U){let i=W;do{0===i.z&&(i.z=yG(i.x,i.y,y,M,U)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==W);i.prevZ.nextZ=null,i.prevZ=null,function(W){let y,M,U,i,x,n,k,g,u=1;do{for(M=W,W=null,x=null,n=0;M;){for(n++,U=M,k=0,y=0;y<u&&(k++,U=U.nextZ,U);y++);for(g=u;k>0||g>0&&U;)0!==k&&(0===g||!U||M.z<=U.z)?(i=M,M=M.nextZ,k--):(i=U,U=U.nextZ,g--),x?x.nextZ=i:W=i,i.prevZ=x,x=i;M=U}x.nextZ=null,u*=2}while(n>1)}(i)}(W,U,i,x);let k,g,u=W;for(;W.prev!==W.next;)if(k=W.prev,g=W.next,x?tl(W,U,i,x):Fl(W))y.push(k.i/M|0),y.push(W.i/M|0),y.push(g.i/M|0),YG(W),W=g.next,u=g.next;else if((W=g)===u){n?1===n?wl(W=Jl(Xl(W),y,M),y,M,U,i,x,2):2===n&&jl(W,y,M,U,i,x):wl(Xl(W),y,M,U,i,x,1);break}}function Fl(W){const y=W.prev,M=W,U=W.next;if(xG(y,M,U)>=0)return!1;const i=y.x,x=M.x,n=U.x,k=y.y,g=M.y,u=U.y,e=i<x?i<n?i:n:x<n?x:n,l=k<g?k<u?k:u:g<u?g:u,G=i>x?i>n?i:n:x>n?x:n,Y=k>g?k>u?k:u:g>u?g:u;let c=U.next;for(;c!==y;){if(c.x>=e&&c.x<=G&&c.y>=l&&c.y<=Y&&UG(i,k,x,g,n,u,c.x,c.y)&&xG(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function tl(W,y,M,U){const i=W.prev,x=W,n=W.next;if(xG(i,x,n)>=0)return!1;const k=i.x,g=x.x,u=n.x,e=i.y,l=x.y,G=n.y,Y=k<g?k<u?k:u:g<u?g:u,c=e<l?e<G?e:G:l<G?l:G,D=k>g?k>u?k:u:g>u?g:u,r=e>l?e>G?e:G:l>G?l:G,A=yG(Y,c,y,M,U),T=yG(D,r,y,M,U);let O=W.prevZ,h=W.nextZ;for(;O&&O.z>=A&&h&&h.z<=T;){if(O.x>=Y&&O.x<=D&&O.y>=c&&O.y<=r&&O!==i&&O!==n&&UG(k,e,g,l,u,G,O.x,O.y)&&xG(O.prev,O,O.next)>=0)return!1;if(O=O.prevZ,h.x>=Y&&h.x<=D&&h.y>=c&&h.y<=r&&h!==i&&h!==n&&UG(k,e,g,l,u,G,h.x,h.y)&&xG(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;O&&O.z>=A;){if(O.x>=Y&&O.x<=D&&O.y>=c&&O.y<=r&&O!==i&&O!==n&&UG(k,e,g,l,u,G,O.x,O.y)&&xG(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;h&&h.z<=T;){if(h.x>=Y&&h.x<=D&&h.y>=c&&h.y<=r&&h!==i&&h!==n&&UG(k,e,g,l,u,G,h.x,h.y)&&xG(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function Jl(W,y,M){let U=W;do{const i=U.prev,x=U.next.next;!nG(i,x)&&kG(i,U,U.next,x)&&eG(i,x)&&eG(x,i)&&(y.push(i.i/M|0),y.push(U.i/M|0),y.push(x.i/M|0),YG(U),YG(U.next),U=W=x),U=U.next}while(U!==W);return Xl(U)}function jl(W,y,M,U,i,x){let n=W;do{let W=n.next.next;for(;W!==n.prev;){if(n.i!==W.i&&iG(n,W)){let k=lG(n,W);return n=Xl(n,n.next),k=Xl(k,k.next),wl(n,y,M,U,i,x,0),void wl(k,y,M,U,i,x,0)}W=W.next}n=n.next}while(n!==W)}function Cl(W,y){return W.x-y.x}function Ql(W,y){const M=function(W,y){let M,U=y,i=-1/0;const x=W.x,n=W.y;do{if(n<=U.y&&n>=U.next.y&&U.next.y!==U.y){const W=U.x+(n-U.y)*(U.next.x-U.x)/(U.next.y-U.y);if(W<=x&&W>i&&(i=W,M=U.x<U.next.x?U:U.next,W===x))return M}U=U.next}while(U!==y);if(!M)return null;const k=M,g=M.x,u=M.y;let e,l=1/0;U=M;do{x>=U.x&&U.x>=g&&x!==U.x&&UG(n<u?x:i,n,g,u,n<u?i:x,n,U.x,U.y)&&(e=Math.abs(n-U.y)/(x-U.x),eG(U,W)&&(e<l||e===l&&(U.x>M.x||U.x===M.x&&WG(M,U)))&&(M=U,l=e)),U=U.next}while(U!==k);return M}(W,y);if(!M)return y;const U=lG(M,W);return Xl(U,U.next),Xl(M,M.next)}function WG(W,y){return xG(W.prev,W,y.prev)<0&&xG(y.next,W,W.next)<0}function yG(W,y,M,U,i){return(W=1431655765&((W=858993459&((W=252645135&((W=16711935&((W=(W-M)*i|0)|W<<8))|W<<4))|W<<2))|W<<1))|(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y=(y-U)*i|0)|y<<8))|y<<4))|y<<2))|y<<1))<<1}function MG(W){let y=W,M=W;do{(y.x<M.x||y.x===M.x&&y.y<M.y)&&(M=y),y=y.next}while(y!==W);return M}function UG(W,y,M,U,i,x,n,k){return(i-n)*(y-k)>=(W-n)*(x-k)&&(W-n)*(U-k)>=(M-n)*(y-k)&&(M-n)*(x-k)>=(i-n)*(U-k)}function iG(W,y){return W.next.i!==y.i&&W.prev.i!==y.i&&!function(W,y){let M=W;do{if(M.i!==W.i&&M.next.i!==W.i&&M.i!==y.i&&M.next.i!==y.i&&kG(M,M.next,W,y))return!0;M=M.next}while(M!==W);return!1}(W,y)&&(eG(W,y)&&eG(y,W)&&function(W,y){let M=W,U=!1;const i=(W.x+y.x)/2,x=(W.y+y.y)/2;do{M.y>x!=M.next.y>x&&M.next.y!==M.y&&i<(M.next.x-M.x)*(x-M.y)/(M.next.y-M.y)+M.x&&(U=!U),M=M.next}while(M!==W);return U}(W,y)&&(xG(W.prev,W,y.prev)||xG(W,y.prev,y))||nG(W,y)&&xG(W.prev,W,W.next)>0&&xG(y.prev,y,y.next)>0)}function xG(W,y,M){return(y.y-W.y)*(M.x-y.x)-(y.x-W.x)*(M.y-y.y)}function nG(W,y){return W.x===y.x&&W.y===y.y}function kG(W,y,M,U){const i=uG(xG(W,y,M)),x=uG(xG(W,y,U)),n=uG(xG(M,U,W)),k=uG(xG(M,U,y));return i!==x&&n!==k||!(0!==i||!gG(W,M,y))||!(0!==x||!gG(W,U,y))||!(0!==n||!gG(M,W,U))||!(0!==k||!gG(M,y,U))}function gG(W,y,M){return y.x<=Math.max(W.x,M.x)&&y.x>=Math.min(W.x,M.x)&&y.y<=Math.max(W.y,M.y)&&y.y>=Math.min(W.y,M.y)}function uG(W){return W>0?1:W<0?-1:0}function eG(W,y){return xG(W.prev,W,W.next)<0?xG(W,y,W.next)>=0&&xG(W,W.prev,y)>=0:xG(W,y,W.prev)<0||xG(W,W.next,y)<0}function lG(W,y){const M=new cG(W.i,W.x,W.y),U=new cG(y.i,y.x,y.y),i=W.next,x=y.prev;return W.next=y,y.prev=W,M.next=i,i.prev=M,U.next=M,M.prev=U,x.next=U,U.prev=x,U}function GG(W,y,M,U){const i=new cG(W,y,M);return U?(i.next=U.next,i.prev=U,U.next.prev=i,U.next=i):(i.prev=i,i.next=i),i}function YG(W){W.next.prev=W.prev,W.prev.next=W.next,W.prevZ&&(W.prevZ.nextZ=W.nextZ),W.nextZ&&(W.nextZ.prevZ=W.prevZ)}function cG(W,y,M){this.i=W,this.x=y,this.y=M,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class DG{static area(W){const y=W.length;let M=0;for(let U=y-1,i=0;i<y;U=i++)M+=W[U].x*W[i].y-W[i].x*W[U].y;return.5*M}static isClockWise(W){return DG.area(W)<0}static triangulateShape(W,y){const M=[],U=[],i=[];rG(W),AG(M,W);let x=W.length;y.forEach(rG);for(let W=0;W<y.length;W++)U.push(x),x+=y[W].length,AG(M,y[W]);const n=function(W,y,M=2){const U=y&&y.length,i=U?y[0]*M:W.length;let x=Ll(W,0,i,M,!0);const n=[];if(!x||x.next===x.prev)return n;let k,g,u,e,l,G,Y;if(U&&(x=function(W,y,M,U){const i=[];let x,n,k,g,u;for(x=0,n=y.length;x<n;x++)k=y[x]*U,g=x<n-1?y[x+1]*U:W.length,u=Ll(W,k,g,U,!1),u===u.next&&(u.steiner=!0),i.push(MG(u));for(i.sort(Cl),x=0;x<i.length;x++)M=Ql(i[x],M);return M}(W,y,x,M)),W.length>80*M){k=u=W[0],g=e=W[1];for(let y=M;y<i;y+=M)l=W[y],G=W[y+1],l<k&&(k=l),G<g&&(g=G),l>u&&(u=l),G>e&&(e=G);Y=Math.max(u-k,e-g),Y=0!==Y?32767/Y:0}return wl(x,n,M,k,g,Y,0),n}(M,U);for(let W=0;W<n.length;W+=3)i.push(n.slice(W,W+3));return i}}function rG(W){const y=W.length;y>2&&W[y-1].equals(W[0])&&W.pop()}function AG(W,y){for(let M=0;M<y.length;M++)W.push(y[M].x),W.push(y[M].y)}class TG extends Tn{constructor(W=new vl([new LU(.5,.5),new LU(-.5,.5),new LU(-.5,-.5),new LU(.5,-.5)]),y={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:W,options:y},W=Array.isArray(W)?W:[W];const M=this,U=[],i=[];for(let y=0,M=W.length;y<M;y++)x(W[y]);function x(W){const x=[],n=void 0!==y.curveSegments?y.curveSegments:12,k=void 0!==y.steps?y.steps:1,g=void 0!==y.depth?y.depth:1;let u=void 0===y.bevelEnabled||y.bevelEnabled,e=void 0!==y.bevelThickness?y.bevelThickness:.2,l=void 0!==y.bevelSize?y.bevelSize:e-.1,G=void 0!==y.bevelOffset?y.bevelOffset:0,Y=void 0!==y.bevelSegments?y.bevelSegments:3;const c=y.extrudePath,D=void 0!==y.UVGenerator?y.UVGenerator:OG;let r,A,T,O,h,S=!1;c&&(r=c.getSpacedPoints(k),S=!0,u=!1,A=c.computeFrenetFrames(k,!1),T=new di,O=new di,h=new di),u||(Y=0,e=0,l=0,G=0);const o=W.extractPoints(n);let d=o.shape;const q=o.holes;if(!DG.isClockWise(d)){d=d.reverse();for(let W=0,y=q.length;W<y;W++){const y=q[W];DG.isClockWise(y)&&(q[W]=y.reverse())}}const s=DG.triangulateShape(d,q),N=d;for(let W=0,y=q.length;W<y;W++){const y=q[W];d=d.concat(y)}function _(W,y,M){return y||console.error("THREE.ExtrudeGeometry: vec does not exist"),W.clone().addScaledVector(y,M)}const p=d.length,b=s.length;function m(W,y,M){let U,i,x;const n=W.x-y.x,k=W.y-y.y,g=M.x-W.x,u=M.y-W.y,e=n*n+k*k,l=n*u-k*g;if(Math.abs(l)>Number.EPSILON){const l=Math.sqrt(e),G=Math.sqrt(g*g+u*u),Y=y.x-k/l,c=y.y+n/l,D=((M.x-u/G-Y)*u-(M.y+g/G-c)*g)/(n*u-k*g);U=Y+n*D-W.x,i=c+k*D-W.y;const r=U*U+i*i;if(r<=2)return new LU(U,i);x=Math.sqrt(r/2)}else{let W=!1;n>Number.EPSILON?g>Number.EPSILON&&(W=!0):n<-Number.EPSILON?g<-Number.EPSILON&&(W=!0):Math.sign(k)===Math.sign(u)&&(W=!0),W?(U=-k,i=n,x=Math.sqrt(e)):(U=n,i=k,x=Math.sqrt(e/2))}return new LU(U/x,i/x)}const z=[];for(let W=0,y=N.length,M=y-1,U=W+1;W<y;W++,M++,U++)M===y&&(M=0),U===y&&(U=0),z[W]=m(N[W],N[M],N[U]);const K=[];let P,R=z.concat();for(let W=0,y=q.length;W<y;W++){const y=q[W];P=[];for(let W=0,M=y.length,U=M-1,i=W+1;W<M;W++,U++,i++)U===M&&(U=0),i===M&&(i=0),P[W]=m(y[W],y[U],y[i]);K.push(P),R=R.concat(P)}for(let W=0;W<Y;W++){const y=W/Y,M=e*Math.cos(y*Math.PI/2),U=l*Math.sin(y*Math.PI/2)+G;for(let W=0,y=N.length;W<y;W++){const y=_(N[W],z[W],U);Z(y.x,y.y,-M)}for(let W=0,y=q.length;W<y;W++){const y=q[W];P=K[W];for(let W=0,i=y.length;W<i;W++){const i=_(y[W],P[W],U);Z(i.x,i.y,-M)}}}const I=l+G;for(let W=0;W<p;W++){const y=u?_(d[W],R[W],I):d[W];S?(O.copy(A.normals[0]).multiplyScalar(y.x),T.copy(A.binormals[0]).multiplyScalar(y.y),h.copy(r[0]).add(O).add(T),Z(h.x,h.y,h.z)):Z(y.x,y.y,0)}for(let W=1;W<=k;W++)for(let y=0;y<p;y++){const M=u?_(d[y],R[y],I):d[y];S?(O.copy(A.normals[W]).multiplyScalar(M.x),T.copy(A.binormals[W]).multiplyScalar(M.y),h.copy(r[W]).add(O).add(T),Z(h.x,h.y,h.z)):Z(M.x,M.y,g/k*W)}for(let W=Y-1;W>=0;W--){const y=W/Y,M=e*Math.cos(y*Math.PI/2),U=l*Math.sin(y*Math.PI/2)+G;for(let W=0,y=N.length;W<y;W++){const y=_(N[W],z[W],U);Z(y.x,y.y,g+M)}for(let W=0,y=q.length;W<y;W++){const y=q[W];P=K[W];for(let W=0,i=y.length;W<i;W++){const i=_(y[W],P[W],U);S?Z(i.x,i.y+r[k-1].y,r[k-1].x+M):Z(i.x,i.y,g+M)}}}function E(W,y){let M=W.length;for(;--M>=0;){const U=M;let i=M-1;i<0&&(i=W.length-1);for(let W=0,M=k+2*Y;W<M;W++){const M=p*W,x=p*(W+1);V(y+U+M,y+i+M,y+i+x,y+U+x)}}}function Z(W,y,M){x.push(W),x.push(y),x.push(M)}function f(W,y,i){$(W),$(y),$(i);const x=U.length/3,n=D.generateTopUV(M,U,x-3,x-2,x-1);a(n[0]),a(n[1]),a(n[2])}function V(W,y,i,x){$(W),$(y),$(x),$(y),$(i),$(x);const n=U.length/3,k=D.generateSideWallUV(M,U,n-6,n-3,n-2,n-1);a(k[0]),a(k[1]),a(k[3]),a(k[1]),a(k[2]),a(k[3])}function $(W){U.push(x[3*W+0]),U.push(x[3*W+1]),U.push(x[3*W+2])}function a(W){i.push(W.x),i.push(W.y)}(function(){const W=U.length/3;if(u){let W=0,y=p*W;for(let W=0;W<b;W++){const M=s[W];f(M[2]+y,M[1]+y,M[0]+y)}W=k+2*Y,y=p*W;for(let W=0;W<b;W++){const M=s[W];f(M[0]+y,M[1]+y,M[2]+y)}}else{for(let W=0;W<b;W++){const y=s[W];f(y[2],y[1],y[0])}for(let W=0;W<b;W++){const y=s[W];f(y[0]+p*k,y[1]+p*k,y[2]+p*k)}}M.addGroup(W,U.length/3-W,0)})(),function(){const W=U.length/3;let y=0;E(N,y),y+=N.length;for(let W=0,M=q.length;W<M;W++){const M=q[W];E(M,y),y+=M.length}M.addGroup(W,U.length/3-W,1)}()}this.setAttribute("position",new un(U,3)),this.setAttribute("uv",new un(i,2)),this.computeVertexNormals()}copy(W){return super.copy(W),this.parameters=Object.assign({},W.parameters),this}toJSON(){const W=super.toJSON();return function(W,y,M){if(M.shapes=[],Array.isArray(W))for(let y=0,U=W.length;y<U;y++){const U=W[y];M.shapes.push(U.uuid)}else M.shapes.push(W.uuid);return M.options=Object.assign({},y),void 0!==y.extrudePath&&(M.options.extrudePath=y.extrudePath.toJSON()),M}(this.parameters.shapes,this.parameters.options,W)}static fromJSON(W,y){const M=[];for(let U=0,i=W.shapes.length;U<i;U++){const i=y[W.shapes[U]];M.push(i)}const U=W.options.extrudePath;return void 0!==U&&(W.options.extrudePath=(new bl[U.type]).fromJSON(U)),new TG(M,W.options)}}const OG={generateTopUV:function(W,y,M,U,i){const x=y[3*M],n=y[3*M+1],k=y[3*U],g=y[3*U+1],u=y[3*i],e=y[3*i+1];return[new LU(x,n),new LU(k,g),new LU(u,e)]},generateSideWallUV:function(W,y,M,U,i,x){const n=y[3*M],k=y[3*M+1],g=y[3*M+2],u=y[3*U],e=y[3*U+1],l=y[3*U+2],G=y[3*i],Y=y[3*i+1],c=y[3*i+2],D=y[3*x],r=y[3*x+1],A=y[3*x+2];return Math.abs(k-e)<Math.abs(n-u)?[new LU(n,1-g),new LU(u,1-l),new LU(G,1-c),new LU(D,1-A)]:[new LU(k,1-g),new LU(e,1-l),new LU(Y,1-c),new LU(r,1-A)]}};class hG extends Zl{constructor(W=1,y=0){const M=(1+Math.sqrt(5))/2;super([-1,M,0,1,M,0,-1,-M,0,1,-M,0,0,-1,M,0,1,M,0,-1,-M,0,1,-M,M,0,-1,M,0,1,-M,0,-1,-M,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],W,y),this.type="IcosahedronGeometry",this.parameters={radius:W,detail:y}}static fromJSON(W){return new hG(W.radius,W.detail)}}class SG extends Zl{constructor(W=1,y=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],W,y),this.type="OctahedronGeometry",this.parameters={radius:W,detail:y}}static fromJSON(W){return new SG(W.radius,W.detail)}}class oG extends Tn{constructor(W=.5,y=1,M=32,U=1,i=0,x=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:W,outerRadius:y,thetaSegments:M,phiSegments:U,thetaStart:i,thetaLength:x},M=Math.max(3,M);const n=[],k=[],g=[],u=[];let e=W;const l=(y-W)/(U=Math.max(1,U)),G=new di,Y=new LU;for(let W=0;W<=U;W++){for(let W=0;W<=M;W++){const U=i+W/M*x;G.x=e*Math.cos(U),G.y=e*Math.sin(U),k.push(G.x,G.y,G.z),g.push(0,0,1),Y.x=(G.x/y+1)/2,Y.y=(G.y/y+1)/2,u.push(Y.x,Y.y)}e+=l}for(let W=0;W<U;W++){const y=W*(M+1);for(let W=0;W<M;W++){const U=W+y,i=U,x=U+M+1,k=U+M+2,g=U+1;n.push(i,x,g),n.push(x,k,g)}}this.setIndex(n),this.setAttribute("position",new un(k,3)),this.setAttribute("normal",new un(g,3)),this.setAttribute("uv",new un(u,2))}copy(W){return super.copy(W),this.parameters=Object.assign({},W.parameters),this}static fromJSON(W){return new oG(W.innerRadius,W.outerRadius,W.thetaSegments,W.phiSegments,W.thetaStart,W.thetaLength)}}class dG extends Tn{constructor(W=new vl([new LU(0,.5),new LU(-.5,-.5),new LU(.5,-.5)]),y=12){super(),this.type="ShapeGeometry",this.parameters={shapes:W,curveSegments:y};const M=[],U=[],i=[],x=[];let n=0,k=0;if(!1===Array.isArray(W))g(W);else for(let y=0;y<W.length;y++)g(W[y]),this.addGroup(n,k,y),n+=k,k=0;function g(W){const n=U.length/3,g=W.extractPoints(y);let u=g.shape;const e=g.holes;!1===DG.isClockWise(u)&&(u=u.reverse());for(let W=0,y=e.length;W<y;W++){const y=e[W];!0===DG.isClockWise(y)&&(e[W]=y.reverse())}const l=DG.triangulateShape(u,e);for(let W=0,y=e.length;W<y;W++){const y=e[W];u=u.concat(y)}for(let W=0,y=u.length;W<y;W++){const y=u[W];U.push(y.x,y.y,0),i.push(0,0,1),x.push(y.x,y.y)}for(let W=0,y=l.length;W<y;W++){const y=l[W],U=y[0]+n,i=y[1]+n,x=y[2]+n;M.push(U,i,x),k+=3}}this.setIndex(M),this.setAttribute("position",new un(U,3)),this.setAttribute("normal",new un(i,3)),this.setAttribute("uv",new un(x,2))}copy(W){return super.copy(W),this.parameters=Object.assign({},W.parameters),this}toJSON(){const W=super.toJSON();return function(W,y){if(y.shapes=[],Array.isArray(W))for(let M=0,U=W.length;M<U;M++){const U=W[M];y.shapes.push(U.uuid)}else y.shapes.push(W.uuid);return y}(this.parameters.shapes,W)}static fromJSON(W,y){const M=[];for(let U=0,i=W.shapes.length;U<i;U++){const i=y[W.shapes[U]];M.push(i)}return new dG(M,W.curveSegments)}}class qG extends Tn{constructor(W=1,y=32,M=16,U=0,i=2*Math.PI,x=0,n=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:W,widthSegments:y,heightSegments:M,phiStart:U,phiLength:i,thetaStart:x,thetaLength:n},y=Math.max(3,Math.floor(y)),M=Math.max(2,Math.floor(M));const k=Math.min(x+n,Math.PI);let g=0;const u=[],e=new di,l=new di,G=[],Y=[],c=[],D=[];for(let G=0;G<=M;G++){const r=[],A=G/M;let T=0;0===G&&0===x?T=.5/y:G===M&&k===Math.PI&&(T=-.5/y);for(let M=0;M<=y;M++){const k=M/y;e.x=-W*Math.cos(U+k*i)*Math.sin(x+A*n),e.y=W*Math.cos(x+A*n),e.z=W*Math.sin(U+k*i)*Math.sin(x+A*n),Y.push(e.x,e.y,e.z),l.copy(e).normalize(),c.push(l.x,l.y,l.z),D.push(k+T,1-A),r.push(g++)}u.push(r)}for(let W=0;W<M;W++)for(let U=0;U<y;U++){const y=u[W][U+1],i=u[W][U],n=u[W+1][U],g=u[W+1][U+1];(0!==W||x>0)&&G.push(y,i,g),(W!==M-1||k<Math.PI)&&G.push(i,n,g)}this.setIndex(G),this.setAttribute("position",new un(Y,3)),this.setAttribute("normal",new un(c,3)),this.setAttribute("uv",new un(D,2))}copy(W){return super.copy(W),this.parameters=Object.assign({},W.parameters),this}static fromJSON(W){return new qG(W.radius,W.widthSegments,W.heightSegments,W.phiStart,W.phiLength,W.thetaStart,W.thetaLength)}}class sG extends Zl{constructor(W=1,y=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],W,y),this.type="TetrahedronGeometry",this.parameters={radius:W,detail:y}}static fromJSON(W){return new sG(W.radius,W.detail)}}class NG extends Tn{constructor(W=1,y=.4,M=12,U=48,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:W,tube:y,radialSegments:M,tubularSegments:U,arc:i},M=Math.floor(M),U=Math.floor(U);const x=[],n=[],k=[],g=[],u=new di,e=new di,l=new di;for(let x=0;x<=M;x++)for(let G=0;G<=U;G++){const Y=G/U*i,c=x/M*Math.PI*2;e.x=(W+y*Math.cos(c))*Math.cos(Y),e.y=(W+y*Math.cos(c))*Math.sin(Y),e.z=y*Math.sin(c),n.push(e.x,e.y,e.z),u.x=W*Math.cos(Y),u.y=W*Math.sin(Y),l.subVectors(e,u).normalize(),k.push(l.x,l.y,l.z),g.push(G/U),g.push(x/M)}for(let W=1;W<=M;W++)for(let y=1;y<=U;y++){const M=(U+1)*W+y-1,i=(U+1)*(W-1)+y-1,n=(U+1)*(W-1)+y,k=(U+1)*W+y;x.push(M,i,k),x.push(i,n,k)}this.setIndex(x),this.setAttribute("position",new un(n,3)),this.setAttribute("normal",new un(k,3)),this.setAttribute("uv",new un(g,2))}copy(W){return super.copy(W),this.parameters=Object.assign({},W.parameters),this}static fromJSON(W){return new NG(W.radius,W.tube,W.radialSegments,W.tubularSegments,W.arc)}}class _G extends Tn{constructor(W=1,y=.4,M=64,U=8,i=2,x=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:W,tube:y,tubularSegments:M,radialSegments:U,p:i,q:x},M=Math.floor(M),U=Math.floor(U);const n=[],k=[],g=[],u=[],e=new di,l=new di,G=new di,Y=new di,c=new di,D=new di,r=new di;for(let n=0;n<=M;++n){const T=n/M*i*Math.PI*2;A(T,i,x,W,G),A(T+.01,i,x,W,Y),D.subVectors(Y,G),r.addVectors(Y,G),c.crossVectors(D,r),r.crossVectors(c,D),c.normalize(),r.normalize();for(let W=0;W<=U;++W){const i=W/U*Math.PI*2,x=-y*Math.cos(i),Y=y*Math.sin(i);e.x=G.x+(x*r.x+Y*c.x),e.y=G.y+(x*r.y+Y*c.y),e.z=G.z+(x*r.z+Y*c.z),k.push(e.x,e.y,e.z),l.subVectors(e,G).normalize(),g.push(l.x,l.y,l.z),u.push(n/M),u.push(W/U)}}for(let W=1;W<=M;W++)for(let y=1;y<=U;y++){const M=(U+1)*(W-1)+(y-1),i=(U+1)*W+(y-1),x=(U+1)*W+y,k=(U+1)*(W-1)+y;n.push(M,i,k),n.push(i,x,k)}function A(W,y,M,U,i){const x=Math.cos(W),n=Math.sin(W),k=M/y*W,g=Math.cos(k);i.x=U*(2+g)*.5*x,i.y=U*(2+g)*n*.5,i.z=U*Math.sin(k)*.5}this.setIndex(n),this.setAttribute("position",new un(k,3)),this.setAttribute("normal",new un(g,3)),this.setAttribute("uv",new un(u,2))}copy(W){return super.copy(W),this.parameters=Object.assign({},W.parameters),this}static fromJSON(W){return new _G(W.radius,W.tube,W.tubularSegments,W.radialSegments,W.p,W.q)}}class pG extends Tn{constructor(W=new _l(new di(-1,-1,0),new di(-1,1,0),new di(1,1,0)),y=64,M=1,U=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:W,tubularSegments:y,radius:M,radialSegments:U,closed:i};const x=W.computeFrenetFrames(y,i);this.tangents=x.tangents,this.normals=x.normals,this.binormals=x.binormals;const n=new di,k=new di,g=new LU;let u=new di;const e=[],l=[],G=[],Y=[];function c(i){u=W.getPointAt(i/y,u);const g=x.normals[i],G=x.binormals[i];for(let W=0;W<=U;W++){const y=W/U*Math.PI*2,i=Math.sin(y),x=-Math.cos(y);k.x=x*g.x+i*G.x,k.y=x*g.y+i*G.y,k.z=x*g.z+i*G.z,k.normalize(),l.push(k.x,k.y,k.z),n.x=u.x+M*k.x,n.y=u.y+M*k.y,n.z=u.z+M*k.z,e.push(n.x,n.y,n.z)}}(function(){for(let W=0;W<y;W++)c(W);c(!1===i?y:0),function(){for(let W=0;W<=y;W++)for(let M=0;M<=U;M++)g.x=W/y,g.y=M/U,G.push(g.x,g.y)}(),function(){for(let W=1;W<=y;W++)for(let y=1;y<=U;y++){const M=(U+1)*(W-1)+(y-1),i=(U+1)*W+(y-1),x=(U+1)*W+y,n=(U+1)*(W-1)+y;Y.push(M,i,n),Y.push(i,x,n)}}()})(),this.setIndex(Y),this.setAttribute("position",new un(e,3)),this.setAttribute("normal",new un(l,3)),this.setAttribute("uv",new un(G,2))}copy(W){return super.copy(W),this.parameters=Object.assign({},W.parameters),this}toJSON(){const W=super.toJSON();return W.path=this.parameters.path.toJSON(),W}static fromJSON(W){return new pG((new bl[W.path.type]).fromJSON(W.path),W.tubularSegments,W.radius,W.radialSegments,W.closed)}}class bG extends Tn{constructor(W=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:W},null!==W){const y=[],M=new Set,U=new di,i=new di;if(null!==W.index){const x=W.attributes.position,n=W.index;let k=W.groups;0===k.length&&(k=[{start:0,count:n.count,materialIndex:0}]);for(let W=0,g=k.length;W<g;++W){const g=k[W],u=g.start;for(let W=u,k=u+g.count;W<k;W+=3)for(let k=0;k<3;k++){const g=n.getX(W+k),u=n.getX(W+(k+1)%3);U.fromBufferAttribute(x,g),i.fromBufferAttribute(x,u),!0===mG(U,i,M)&&(y.push(U.x,U.y,U.z),y.push(i.x,i.y,i.z))}}}else{const x=W.attributes.position;for(let W=0,n=x.count/3;W<n;W++)for(let n=0;n<3;n++){const k=3*W+n,g=3*W+(n+1)%3;U.fromBufferAttribute(x,k),i.fromBufferAttribute(x,g),!0===mG(U,i,M)&&(y.push(U.x,U.y,U.z),y.push(i.x,i.y,i.z))}}this.setAttribute("position",new un(y,3))}}copy(W){return super.copy(W),this.parameters=Object.assign({},W.parameters),this}}function mG(W,y,M){const U=`${W.x},${W.y},${W.z}-${y.x},${y.y},${y.z}`,i=`${y.x},${y.y},${y.z}-${W.x},${W.y},${W.z}`;return!0!==M.has(U)&&!0!==M.has(i)&&(M.add(U),M.add(i),!0)}var zG=Object.freeze({__proto__:null,BoxGeometry:fn,CapsuleGeometry:Pl,CircleGeometry:Rl,ConeGeometry:El,CylinderGeometry:Il,DodecahedronGeometry:fl,EdgesGeometry:Bl,ExtrudeGeometry:TG,IcosahedronGeometry:hG,LatheGeometry:Kl,OctahedronGeometry:SG,PlaneGeometry:gk,PolyhedronGeometry:Zl,RingGeometry:oG,ShapeGeometry:dG,SphereGeometry:qG,TetrahedronGeometry:sG,TorusGeometry:NG,TorusKnotGeometry:_G,TubeGeometry:pG,WireframeGeometry:bG});class KG extends fx{constructor(W){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Bx(0),this.transparent=!0,this.fog=!0,this.setValues(W)}copy(W){return super.copy(W),this.color.copy(W.color),this.fog=W.fog,this}}class PG extends Ln{constructor(W){super(W),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class RG extends fx{constructor(W){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Bx(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bx(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$M,this.normalScale=new LU(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(W)}copy(W){return super.copy(W),this.defines={STANDARD:""},this.color.copy(W.color),this.roughness=W.roughness,this.metalness=W.metalness,this.map=W.map,this.lightMap=W.lightMap,this.lightMapIntensity=W.lightMapIntensity,this.aoMap=W.aoMap,this.aoMapIntensity=W.aoMapIntensity,this.emissive.copy(W.emissive),this.emissiveMap=W.emissiveMap,this.emissiveIntensity=W.emissiveIntensity,this.bumpMap=W.bumpMap,this.bumpScale=W.bumpScale,this.normalMap=W.normalMap,this.normalMapType=W.normalMapType,this.normalScale.copy(W.normalScale),this.displacementMap=W.displacementMap,this.displacementScale=W.displacementScale,this.displacementBias=W.displacementBias,this.roughnessMap=W.roughnessMap,this.metalnessMap=W.metalnessMap,this.alphaMap=W.alphaMap,this.envMap=W.envMap,this.envMapIntensity=W.envMapIntensity,this.wireframe=W.wireframe,this.wireframeLinewidth=W.wireframeLinewidth,this.wireframeLinecap=W.wireframeLinecap,this.wireframeLinejoin=W.wireframeLinejoin,this.flatShading=W.flatShading,this.fog=W.fog,this}}class IG extends RG{constructor(W){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new LU(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return EU(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(W){this.ior=(1+.4*W)/(1-.4*W)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Bx(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Bx(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Bx(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(W)}get anisotropy(){return this._anisotropy}set anisotropy(W){this._anisotropy>0!=W>0&&this.version++,this._anisotropy=W}get clearcoat(){return this._clearcoat}set clearcoat(W){this._clearcoat>0!=W>0&&this.version++,this._clearcoat=W}get iridescence(){return this._iridescence}set iridescence(W){this._iridescence>0!=W>0&&this.version++,this._iridescence=W}get sheen(){return this._sheen}set sheen(W){this._sheen>0!=W>0&&this.version++,this._sheen=W}get transmission(){return this._transmission}set transmission(W){this._transmission>0!=W>0&&this.version++,this._transmission=W}copy(W){return super.copy(W),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=W.anisotropy,this.anisotropyRotation=W.anisotropyRotation,this.anisotropyMap=W.anisotropyMap,this.clearcoat=W.clearcoat,this.clearcoatMap=W.clearcoatMap,this.clearcoatRoughness=W.clearcoatRoughness,this.clearcoatRoughnessMap=W.clearcoatRoughnessMap,this.clearcoatNormalMap=W.clearcoatNormalMap,this.clearcoatNormalScale.copy(W.clearcoatNormalScale),this.ior=W.ior,this.iridescence=W.iridescence,this.iridescenceMap=W.iridescenceMap,this.iridescenceIOR=W.iridescenceIOR,this.iridescenceThicknessRange=[...W.iridescenceThicknessRange],this.iridescenceThicknessMap=W.iridescenceThicknessMap,this.sheen=W.sheen,this.sheenColor.copy(W.sheenColor),this.sheenColorMap=W.sheenColorMap,this.sheenRoughness=W.sheenRoughness,this.sheenRoughnessMap=W.sheenRoughnessMap,this.transmission=W.transmission,this.transmissionMap=W.transmissionMap,this.thickness=W.thickness,this.thicknessMap=W.thicknessMap,this.attenuationDistance=W.attenuationDistance,this.attenuationColor.copy(W.attenuationColor),this.specularIntensity=W.specularIntensity,this.specularIntensityMap=W.specularIntensityMap,this.specularColor.copy(W.specularColor),this.specularColorMap=W.specularColorMap,this}}class EG extends fx{constructor(W){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Bx(16777215),this.specular=new Bx(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bx(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$M,this.normalScale=new LU(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=JW,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(W)}copy(W){return super.copy(W),this.color.copy(W.color),this.specular.copy(W.specular),this.shininess=W.shininess,this.map=W.map,this.lightMap=W.lightMap,this.lightMapIntensity=W.lightMapIntensity,this.aoMap=W.aoMap,this.aoMapIntensity=W.aoMapIntensity,this.emissive.copy(W.emissive),this.emissiveMap=W.emissiveMap,this.emissiveIntensity=W.emissiveIntensity,this.bumpMap=W.bumpMap,this.bumpScale=W.bumpScale,this.normalMap=W.normalMap,this.normalMapType=W.normalMapType,this.normalScale.copy(W.normalScale),this.displacementMap=W.displacementMap,this.displacementScale=W.displacementScale,this.displacementBias=W.displacementBias,this.specularMap=W.specularMap,this.alphaMap=W.alphaMap,this.envMap=W.envMap,this.combine=W.combine,this.reflectivity=W.reflectivity,this.refractionRatio=W.refractionRatio,this.wireframe=W.wireframe,this.wireframeLinewidth=W.wireframeLinewidth,this.wireframeLinecap=W.wireframeLinecap,this.wireframeLinejoin=W.wireframeLinejoin,this.flatShading=W.flatShading,this.fog=W.fog,this}}class ZG extends fx{constructor(W){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Bx(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bx(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$M,this.normalScale=new LU(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(W)}copy(W){return super.copy(W),this.color.copy(W.color),this.map=W.map,this.gradientMap=W.gradientMap,this.lightMap=W.lightMap,this.lightMapIntensity=W.lightMapIntensity,this.aoMap=W.aoMap,this.aoMapIntensity=W.aoMapIntensity,this.emissive.copy(W.emissive),this.emissiveMap=W.emissiveMap,this.emissiveIntensity=W.emissiveIntensity,this.bumpMap=W.bumpMap,this.bumpScale=W.bumpScale,this.normalMap=W.normalMap,this.normalMapType=W.normalMapType,this.normalScale.copy(W.normalScale),this.displacementMap=W.displacementMap,this.displacementScale=W.displacementScale,this.displacementBias=W.displacementBias,this.alphaMap=W.alphaMap,this.wireframe=W.wireframe,this.wireframeLinewidth=W.wireframeLinewidth,this.wireframeLinecap=W.wireframeLinecap,this.wireframeLinejoin=W.wireframeLinejoin,this.fog=W.fog,this}}class fG extends fx{constructor(W){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$M,this.normalScale=new LU(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(W)}copy(W){return super.copy(W),this.bumpMap=W.bumpMap,this.bumpScale=W.bumpScale,this.normalMap=W.normalMap,this.normalMapType=W.normalMapType,this.normalScale.copy(W.normalScale),this.displacementMap=W.displacementMap,this.displacementScale=W.displacementScale,this.displacementBias=W.displacementBias,this.wireframe=W.wireframe,this.wireframeLinewidth=W.wireframeLinewidth,this.flatShading=W.flatShading,this}}class VG extends fx{constructor(W){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Bx(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bx(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$M,this.normalScale=new LU(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=JW,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(W)}copy(W){return super.copy(W),this.color.copy(W.color),this.map=W.map,this.lightMap=W.lightMap,this.lightMapIntensity=W.lightMapIntensity,this.aoMap=W.aoMap,this.aoMapIntensity=W.aoMapIntensity,this.emissive.copy(W.emissive),this.emissiveMap=W.emissiveMap,this.emissiveIntensity=W.emissiveIntensity,this.bumpMap=W.bumpMap,this.bumpScale=W.bumpScale,this.normalMap=W.normalMap,this.normalMapType=W.normalMapType,this.normalScale.copy(W.normalScale),this.displacementMap=W.displacementMap,this.displacementScale=W.displacementScale,this.displacementBias=W.displacementBias,this.specularMap=W.specularMap,this.alphaMap=W.alphaMap,this.envMap=W.envMap,this.combine=W.combine,this.reflectivity=W.reflectivity,this.refractionRatio=W.refractionRatio,this.wireframe=W.wireframe,this.wireframeLinewidth=W.wireframeLinewidth,this.wireframeLinecap=W.wireframeLinecap,this.wireframeLinejoin=W.wireframeLinejoin,this.flatShading=W.flatShading,this.fog=W.fog,this}}class $G extends fx{constructor(W){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Bx(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$M,this.normalScale=new LU(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(W)}copy(W){return super.copy(W),this.defines={MATCAP:""},this.color.copy(W.color),this.matcap=W.matcap,this.map=W.map,this.bumpMap=W.bumpMap,this.bumpScale=W.bumpScale,this.normalMap=W.normalMap,this.normalMapType=W.normalMapType,this.normalScale.copy(W.normalScale),this.displacementMap=W.displacementMap,this.displacementScale=W.displacementScale,this.displacementBias=W.displacementBias,this.alphaMap=W.alphaMap,this.flatShading=W.flatShading,this.fog=W.fog,this}}class aG extends $e{constructor(W){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(W)}copy(W){return super.copy(W),this.scale=W.scale,this.dashSize=W.dashSize,this.gapSize=W.gapSize,this}}function HG(W,y,M){return vG(W)?new W.constructor(W.subarray(y,void 0!==M?M:W.length)):W.slice(y,M)}function BG(W,y,M){return!W||!M&&W.constructor===y?W:"number"==typeof y.BYTES_PER_ELEMENT?new y(W):Array.prototype.slice.call(W)}function vG(W){return ArrayBuffer.isView(W)&&!(W instanceof DataView)}function LG(W){const y=W.length,M=new Array(y);for(let W=0;W!==y;++W)M[W]=W;return M.sort((function(y,M){return W[y]-W[M]})),M}function XG(W,y,M){const U=W.length,i=new W.constructor(U);for(let x=0,n=0;n!==U;++x){const U=M[x]*y;for(let M=0;M!==y;++M)i[n++]=W[U+M]}return i}function wG(W,y,M,U){let i=1,x=W[0];for(;void 0!==x&&void 0===x[U];)x=W[i++];if(void 0===x)return;let n=x[U];if(void 0!==n)if(Array.isArray(n))do{n=x[U],void 0!==n&&(y.push(x.time),M.push.apply(M,n)),x=W[i++]}while(void 0!==x);else if(void 0!==n.toArray)do{n=x[U],void 0!==n&&(y.push(x.time),n.toArray(M,M.length)),x=W[i++]}while(void 0!==x);else do{n=x[U],void 0!==n&&(y.push(x.time),M.push(n)),x=W[i++]}while(void 0!==x)}const FG={arraySlice:HG,convertArray:BG,isTypedArray:vG,getKeyframeOrder:LG,sortedArray:XG,flattenJSON:wG,subclip:function(W,y,M,U,i=30){const x=W.clone();x.name=y;const n=[];for(let W=0;W<x.tracks.length;++W){const y=x.tracks[W],k=y.getValueSize(),g=[],u=[];for(let W=0;W<y.times.length;++W){const x=y.times[W]*i;if(!(x<M||x>=U)){g.push(y.times[W]);for(let M=0;M<k;++M)u.push(y.values[W*k+M])}}0!==g.length&&(y.times=BG(g,y.times.constructor),y.values=BG(u,y.values.constructor),n.push(y))}x.tracks=n;let k=1/0;for(let W=0;W<x.tracks.length;++W)k>x.tracks[W].times[0]&&(k=x.tracks[W].times[0]);for(let W=0;W<x.tracks.length;++W)x.tracks[W].shift(-1*k);return x.resetDuration(),x},makeClipAdditive:function(W,y=0,M=W,U=30){U<=0&&(U=30);const i=M.tracks.length,x=y/U;for(let y=0;y<i;++y){const U=M.tracks[y],i=U.ValueTypeName;if("bool"===i||"string"===i)continue;const n=W.tracks.find((function(W){return W.name===U.name&&W.ValueTypeName===i}));if(void 0===n)continue;let k=0;const g=U.getValueSize();U.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(k=g/3);let u=0;const e=n.getValueSize();n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=e/3);const l=U.times.length-1;let G;if(x<=U.times[0]){const W=k,y=g-k;G=HG(U.values,W,y)}else if(x>=U.times[l]){const W=l*g+k,y=W+g-k;G=HG(U.values,W,y)}else{const W=U.createInterpolant(),y=k,M=g-k;W.evaluate(x),G=HG(W.resultBuffer,y,M)}"quaternion"===i&&(new oi).fromArray(G).normalize().conjugate().toArray(G);const Y=n.times.length;for(let W=0;W<Y;++W){const y=W*e+u;if("quaternion"===i)oi.multiplyQuaternionsFlat(n.values,y,G,0,n.values,y);else{const W=e-2*u;for(let M=0;M<W;++M)n.values[y+M]-=G[M]}}}return W.blendMode=KM,W}};class tG{constructor(W,y,M,U){this.parameterPositions=W,this._cachedIndex=0,this.resultBuffer=void 0!==U?U:new y.constructor(M),this.sampleValues=y,this.valueSize=M,this.settings=null,this.DefaultSettings_={}}evaluate(W){const y=this.parameterPositions;let M=this._cachedIndex,U=y[M],i=y[M-1];W:{y:{let x;M:{U:if(!(W<U)){for(let x=M+2;;){if(void 0===U){if(W<i)break U;return M=y.length,this._cachedIndex=M,this.copySampleValue_(M-1)}if(M===x)break;if(i=U,U=y[++M],W<U)break y}x=y.length;break M}if(W>=i)break W;{const n=y[1];W<n&&(M=2,i=n);for(let x=M-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(M===x)break;if(U=i,i=y[--M-1],W>=i)break y}x=M,M=0}}for(;M<x;){const U=M+x>>>1;W<y[U]?x=U:M=U+1}if(U=y[M],i=y[M-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===U)return M=y.length,this._cachedIndex=M,this.copySampleValue_(M-1)}this._cachedIndex=M,this.intervalChanged_(M,i,U)}return this.interpolate_(M,i,W,U)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(W){const y=this.resultBuffer,M=this.sampleValues,U=this.valueSize,i=W*U;for(let W=0;W!==U;++W)y[W]=M[i+W];return y}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class JG extends tG{constructor(W,y,M,U){super(W,y,M,U),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:pM,endingEnd:pM}}intervalChanged_(W,y,M){const U=this.parameterPositions;let i=W-2,x=W+1,n=U[i],k=U[x];if(void 0===n)switch(this.getSettings_().endingStart){case bM:i=W,n=2*y-M;break;case mM:i=U.length-2,n=y+U[i]-U[i+1];break;default:i=W,n=M}if(void 0===k)switch(this.getSettings_().endingEnd){case bM:x=W,k=2*M-y;break;case mM:x=1,k=M+U[1]-U[0];break;default:x=W-1,k=y}const g=.5*(M-y),u=this.valueSize;this._weightPrev=g/(y-n),this._weightNext=g/(k-M),this._offsetPrev=i*u,this._offsetNext=x*u}interpolate_(W,y,M,U){const i=this.resultBuffer,x=this.sampleValues,n=this.valueSize,k=W*n,g=k-n,u=this._offsetPrev,e=this._offsetNext,l=this._weightPrev,G=this._weightNext,Y=(M-y)/(U-y),c=Y*Y,D=c*Y,r=-l*D+2*l*c-l*Y,A=(1+l)*D+(-1.5-2*l)*c+(-.5+l)*Y+1,T=(-1-G)*D+(1.5+G)*c+.5*Y,O=G*D-G*c;for(let W=0;W!==n;++W)i[W]=r*x[u+W]+A*x[g+W]+T*x[k+W]+O*x[e+W];return i}}class jG extends tG{constructor(W,y,M,U){super(W,y,M,U)}interpolate_(W,y,M,U){const i=this.resultBuffer,x=this.sampleValues,n=this.valueSize,k=W*n,g=k-n,u=(M-y)/(U-y),e=1-u;for(let W=0;W!==n;++W)i[W]=x[g+W]*e+x[k+W]*u;return i}}class CG extends tG{constructor(W,y,M,U){super(W,y,M,U)}interpolate_(W){return this.copySampleValue_(W-1)}}class QG{constructor(W,y,M,U){if(void 0===W)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===y||0===y.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+W);this.name=W,this.times=BG(y,this.TimeBufferType),this.values=BG(M,this.ValueBufferType),this.setInterpolation(U||this.DefaultInterpolation)}static toJSON(W){const y=W.constructor;let M;if(y.toJSON!==this.toJSON)M=y.toJSON(W);else{M={name:W.name,times:BG(W.times,Array),values:BG(W.values,Array)};const y=W.getInterpolation();y!==W.DefaultInterpolation&&(M.interpolation=y)}return M.type=W.ValueTypeName,M}InterpolantFactoryMethodDiscrete(W){return new CG(this.times,this.values,this.getValueSize(),W)}InterpolantFactoryMethodLinear(W){return new jG(this.times,this.values,this.getValueSize(),W)}InterpolantFactoryMethodSmooth(W){return new JG(this.times,this.values,this.getValueSize(),W)}setInterpolation(W){let y;switch(W){case sM:y=this.InterpolantFactoryMethodDiscrete;break;case NM:y=this.InterpolantFactoryMethodLinear;break;case _M:y=this.InterpolantFactoryMethodSmooth}if(void 0===y){const y="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(W===this.DefaultInterpolation)throw new Error(y);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",y),this}return this.createInterpolant=y,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return sM;case this.InterpolantFactoryMethodLinear:return NM;case this.InterpolantFactoryMethodSmooth:return _M}}getValueSize(){return this.values.length/this.times.length}shift(W){if(0!==W){const y=this.times;for(let M=0,U=y.length;M!==U;++M)y[M]+=W}return this}scale(W){if(1!==W){const y=this.times;for(let M=0,U=y.length;M!==U;++M)y[M]*=W}return this}trim(W,y){const M=this.times,U=M.length;let i=0,x=U-1;for(;i!==U&&M[i]<W;)++i;for(;-1!==x&&M[x]>y;)--x;if(++x,0!==i||x!==U){i>=x&&(x=Math.max(x,1),i=x-1);const W=this.getValueSize();this.times=HG(M,i,x),this.values=HG(this.values,i*W,x*W)}return this}validate(){let W=!0;const y=this.getValueSize();y-Math.floor(y)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),W=!1);const M=this.times,U=this.values,i=M.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),W=!1);let x=null;for(let y=0;y!==i;y++){const U=M[y];if("number"==typeof U&&isNaN(U)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,y,U),W=!1;break}if(null!==x&&x>U){console.error("THREE.KeyframeTrack: Out of order keys.",this,y,U,x),W=!1;break}x=U}if(void 0!==U&&vG(U))for(let y=0,M=U.length;y!==M;++y){const M=U[y];if(isNaN(M)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,y,M),W=!1;break}}return W}optimize(){const W=HG(this.times),y=HG(this.values),M=this.getValueSize(),U=this.getInterpolation()===_M,i=W.length-1;let x=1;for(let n=1;n<i;++n){let i=!1;const k=W[n];if(k!==W[n+1]&&(1!==n||k!==W[0]))if(U)i=!0;else{const W=n*M,U=W-M,x=W+M;for(let n=0;n!==M;++n){const M=y[W+n];if(M!==y[U+n]||M!==y[x+n]){i=!0;break}}}if(i){if(n!==x){W[x]=W[n];const U=n*M,i=x*M;for(let W=0;W!==M;++W)y[i+W]=y[U+W]}++x}}if(i>0){W[x]=W[i];for(let W=i*M,U=x*M,n=0;n!==M;++n)y[U+n]=y[W+n];++x}return x!==W.length?(this.times=HG(W,0,x),this.values=HG(y,0,x*M)):(this.times=W,this.values=y),this}clone(){const W=HG(this.times,0),y=HG(this.values,0),M=new(0,this.constructor)(this.name,W,y);return M.createInterpolant=this.createInterpolant,M}}QG.prototype.TimeBufferType=Float32Array,QG.prototype.ValueBufferType=Float32Array,QG.prototype.DefaultInterpolation=NM;class WY extends QG{}WY.prototype.ValueTypeName="bool",WY.prototype.ValueBufferType=Array,WY.prototype.DefaultInterpolation=sM,WY.prototype.InterpolantFactoryMethodLinear=void 0,WY.prototype.InterpolantFactoryMethodSmooth=void 0;class yY extends QG{}yY.prototype.ValueTypeName="color";class MY extends QG{}MY.prototype.ValueTypeName="number";class UY extends tG{constructor(W,y,M,U){super(W,y,M,U)}interpolate_(W,y,M,U){const i=this.resultBuffer,x=this.sampleValues,n=this.valueSize,k=(M-y)/(U-y);let g=W*n;for(let W=g+n;g!==W;g+=4)oi.slerpFlat(i,0,x,g-n,x,g,k);return i}}class iY extends QG{InterpolantFactoryMethodLinear(W){return new UY(this.times,this.values,this.getValueSize(),W)}}iY.prototype.ValueTypeName="quaternion",iY.prototype.DefaultInterpolation=NM,iY.prototype.InterpolantFactoryMethodSmooth=void 0;class xY extends QG{}xY.prototype.ValueTypeName="string",xY.prototype.ValueBufferType=Array,xY.prototype.DefaultInterpolation=sM,xY.prototype.InterpolantFactoryMethodLinear=void 0,xY.prototype.InterpolantFactoryMethodSmooth=void 0;class nY extends QG{}nY.prototype.ValueTypeName="vector";class kY{constructor(W,y=-1,M,U=zM){this.name=W,this.tracks=M,this.duration=y,this.blendMode=U,this.uuid=IU(),this.duration<0&&this.resetDuration()}static parse(W){const y=[],M=W.tracks,U=1/(W.fps||1);for(let W=0,i=M.length;W!==i;++W)y.push(gY(M[W]).scale(U));const i=new this(W.name,W.duration,y,W.blendMode);return i.uuid=W.uuid,i}static toJSON(W){const y=[],M=W.tracks,U={name:W.name,duration:W.duration,tracks:y,uuid:W.uuid,blendMode:W.blendMode};for(let W=0,U=M.length;W!==U;++W)y.push(QG.toJSON(M[W]));return U}static CreateFromMorphTargetSequence(W,y,M,U){const i=y.length,x=[];for(let W=0;W<i;W++){let n=[],k=[];n.push((W+i-1)%i,W,(W+1)%i),k.push(0,1,0);const g=LG(n);n=XG(n,1,g),k=XG(k,1,g),U||0!==n[0]||(n.push(i),k.push(k[0])),x.push(new MY(".morphTargetInfluences["+y[W].name+"]",n,k).scale(1/M))}return new this(W,-1,x)}static findByName(W,y){let M=W;if(!Array.isArray(W)){const y=W;M=y.geometry&&y.geometry.animations||y.animations}for(let W=0;W<M.length;W++)if(M[W].name===y)return M[W];return null}static CreateClipsFromMorphTargetSequences(W,y,M){const U={},i=/^([\w-]*?)([\d]+)$/;for(let y=0,M=W.length;y<M;y++){const M=W[y],x=M.name.match(i);if(x&&x.length>1){const W=x[1];let y=U[W];y||(U[W]=y=[]),y.push(M)}}const x=[];for(const W in U)x.push(this.CreateFromMorphTargetSequence(W,U[W],y,M));return x}static parseAnimation(W,y){if(!W)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const M=function(W,y,M,U,i){if(0!==M.length){const x=[],n=[];wG(M,x,n,U),0!==x.length&&i.push(new W(y,x,n))}},U=[],i=W.name||"default",x=W.fps||30,n=W.blendMode;let k=W.length||-1;const g=W.hierarchy||[];for(let W=0;W<g.length;W++){const i=g[W].keys;if(i&&0!==i.length)if(i[0].morphTargets){const W={};let y;for(y=0;y<i.length;y++)if(i[y].morphTargets)for(let M=0;M<i[y].morphTargets.length;M++)W[i[y].morphTargets[M]]=-1;for(const M in W){const W=[],x=[];for(let U=0;U!==i[y].morphTargets.length;++U){const U=i[y];W.push(U.time),x.push(U.morphTarget===M?1:0)}U.push(new MY(".morphTargetInfluence["+M+"]",W,x))}k=W.length*x}else{const x=".bones["+y[W].name+"]";M(nY,x+".position",i,"pos",U),M(iY,x+".quaternion",i,"rot",U),M(nY,x+".scale",i,"scl",U)}}return 0===U.length?null:new this(i,k,U,n)}resetDuration(){let W=0;for(let y=0,M=this.tracks.length;y!==M;++y){const M=this.tracks[y];W=Math.max(W,M.times[M.times.length-1])}return this.duration=W,this}trim(){for(let W=0;W<this.tracks.length;W++)this.tracks[W].trim(0,this.duration);return this}validate(){let W=!0;for(let y=0;y<this.tracks.length;y++)W=W&&this.tracks[y].validate();return W}optimize(){for(let W=0;W<this.tracks.length;W++)this.tracks[W].optimize();return this}clone(){const W=[];for(let y=0;y<this.tracks.length;y++)W.push(this.tracks[y].clone());return new this.constructor(this.name,this.duration,W,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function gY(W){if(void 0===W.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const y=function(W){switch(W.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return MY;case"vector":case"vector2":case"vector3":case"vector4":return nY;case"color":return yY;case"quaternion":return iY;case"bool":case"boolean":return WY;case"string":return xY}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+W)}(W.type);if(void 0===W.times){const y=[],M=[];wG(W.keys,y,M,"value"),W.times=y,W.values=M}return void 0!==y.parse?y.parse(W):new y(W.name,W.times,W.values,W.interpolation)}const uY={enabled:!1,files:{},add:function(W,y){!1!==this.enabled&&(this.files[W]=y)},get:function(W){if(!1!==this.enabled)return this.files[W]},remove:function(W){delete this.files[W]},clear:function(){this.files={}}};class eY{constructor(W,y,M){const U=this;let i,x=!1,n=0,k=0;const g=[];this.onStart=void 0,this.onLoad=W,this.onProgress=y,this.onError=M,this.itemStart=function(W){k++,!1===x&&void 0!==U.onStart&&U.onStart(W,n,k),x=!0},this.itemEnd=function(W){n++,void 0!==U.onProgress&&U.onProgress(W,n,k),n===k&&(x=!1,void 0!==U.onLoad&&U.onLoad())},this.itemError=function(W){void 0!==U.onError&&U.onError(W)},this.resolveURL=function(W){return i?i(W):W},this.setURLModifier=function(W){return i=W,this},this.addHandler=function(W,y){return g.push(W,y),this},this.removeHandler=function(W){const y=g.indexOf(W);return-1!==y&&g.splice(y,2),this},this.getHandler=function(W){for(let y=0,M=g.length;y<M;y+=2){const M=g[y],U=g[y+1];if(M.global&&(M.lastIndex=0),M.test(W))return U}return null}}}const lY=new eY;class GY{constructor(W){this.manager=void 0!==W?W:lY,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(W,y){const M=this;return new Promise((function(U,i){M.load(W,U,y,i)}))}parse(){}setCrossOrigin(W){return this.crossOrigin=W,this}setWithCredentials(W){return this.withCredentials=W,this}setPath(W){return this.path=W,this}setResourcePath(W){return this.resourcePath=W,this}setRequestHeader(W){return this.requestHeader=W,this}}GY.DEFAULT_MATERIAL_NAME="__DEFAULT";const YY={};class cY extends Error{constructor(W,y){super(W),this.response=y}}class DY extends GY{constructor(W){super(W)}load(W,y,M,U){void 0===W&&(W=""),void 0!==this.path&&(W=this.path+W),W=this.manager.resolveURL(W);const i=uY.get(W);if(void 0!==i)return this.manager.itemStart(W),setTimeout((()=>{y&&y(i),this.manager.itemEnd(W)}),0),i;if(void 0!==YY[W])return void YY[W].push({onLoad:y,onProgress:M,onError:U});YY[W]=[],YY[W].push({onLoad:y,onProgress:M,onError:U});const x=new Request(W,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),n=this.mimeType,k=this.responseType;fetch(x).then((y=>{if(200===y.status||0===y.status){if(0===y.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===y.body||void 0===y.body.getReader)return y;const M=YY[W],U=y.body.getReader(),i=y.headers.get("Content-Length")||y.headers.get("X-File-Size"),x=i?parseInt(i):0,n=0!==x;let k=0;const g=new ReadableStream({start(W){(function y(){U.read().then((({done:U,value:i})=>{if(U)W.close();else{k+=i.byteLength;const U=new ProgressEvent("progress",{lengthComputable:n,loaded:k,total:x});for(let W=0,y=M.length;W<y;W++){const y=M[W];y.onProgress&&y.onProgress(U)}W.enqueue(i),y()}}))})()}});return new Response(g)}throw new cY(`fetch for "${y.url}" responded with ${y.status}: ${y.statusText}`,y)})).then((W=>{switch(k){case"arraybuffer":return W.arrayBuffer();case"blob":return W.blob();case"document":return W.text().then((W=>(new DOMParser).parseFromString(W,n)));case"json":return W.json();default:if(void 0===n)return W.text();{const y=/charset="?([^;"\s]*)"?/i.exec(n),M=y&&y[1]?y[1].toLowerCase():void 0,U=new TextDecoder(M);return W.arrayBuffer().then((W=>U.decode(W)))}}})).then((y=>{uY.add(W,y);const M=YY[W];delete YY[W];for(let W=0,U=M.length;W<U;W++){const U=M[W];U.onLoad&&U.onLoad(y)}})).catch((y=>{const M=YY[W];if(void 0===M)throw this.manager.itemError(W),y;delete YY[W];for(let W=0,U=M.length;W<U;W++){const U=M[W];U.onError&&U.onError(y)}this.manager.itemError(W)})).finally((()=>{this.manager.itemEnd(W)})),this.manager.itemStart(W)}setResponseType(W){return this.responseType=W,this}setMimeType(W){return this.mimeType=W,this}}class rY extends GY{constructor(W){super(W)}load(W,y,M,U){const i=this,x=new DY(this.manager);x.setPath(this.path),x.setRequestHeader(this.requestHeader),x.setWithCredentials(this.withCredentials),x.load(W,(function(M){try{y(i.parse(JSON.parse(M)))}catch(y){U?U(y):console.error(y),i.manager.itemError(W)}}),M,U)}parse(W){const y=[];for(let M=0;M<W.length;M++){const U=kY.parse(W[M]);y.push(U)}return y}}class AY extends GY{constructor(W){super(W)}load(W,y,M,U){const i=this,x=[],n=new nl,k=new DY(this.manager);k.setPath(this.path),k.setResponseType("arraybuffer"),k.setRequestHeader(this.requestHeader),k.setWithCredentials(i.withCredentials);let g=0;function u(u){k.load(W[u],(function(W){const M=i.parse(W,!0);x[u]={width:M.width,height:M.height,format:M.format,mipmaps:M.mipmaps},g+=1,6===g&&(1===M.mipmapCount&&(n.minFilter=Oy),n.image=x,n.format=M.format,n.needsUpdate=!0,y&&y(n))}),M,U)}if(Array.isArray(W))for(let y=0,M=W.length;y<M;++y)u(y);else k.load(W,(function(W){const M=i.parse(W,!0);if(M.isCubemap){const W=M.mipmaps.length/M.mipmapCount;for(let y=0;y<W;y++){x[y]={mipmaps:[]};for(let W=0;W<M.mipmapCount;W++)x[y].mipmaps.push(M.mipmaps[y*M.mipmapCount+W]),x[y].format=M.format,x[y].width=M.width,x[y].height=M.height}n.image=x}else n.image.width=M.width,n.image.height=M.height,n.mipmaps=M.mipmaps;1===M.mipmapCount&&(n.minFilter=Oy),n.format=M.format,n.needsUpdate=!0,y&&y(n)}),M,U);return n}}class TY extends GY{constructor(W){super(W)}load(W,y,M,U){void 0!==this.path&&(W=this.path+W),W=this.manager.resolveURL(W);const i=this,x=uY.get(W);if(void 0!==x)return i.manager.itemStart(W),setTimeout((function(){y&&y(x),i.manager.itemEnd(W)}),0),x;const n=jU("img");function k(){u(),uY.add(W,this),y&&y(this),i.manager.itemEnd(W)}function g(y){u(),U&&U(y),i.manager.itemError(W),i.manager.itemEnd(W)}function u(){n.removeEventListener("load",k,!1),n.removeEventListener("error",g,!1)}return n.addEventListener("load",k,!1),n.addEventListener("error",g,!1),"data:"!==W.slice(0,5)&&void 0!==this.crossOrigin&&(n.crossOrigin=this.crossOrigin),i.manager.itemStart(W),n.src=W,n}}class OY extends GY{constructor(W){super(W)}load(W,y,M,U){const i=new jn;i.colorSpace=BM;const x=new TY(this.manager);x.setCrossOrigin(this.crossOrigin),x.setPath(this.path);let n=0;function k(M){x.load(W[M],(function(W){i.images[M]=W,n++,6===n&&(i.needsUpdate=!0,y&&y(i))}),void 0,U)}for(let y=0;y<W.length;++y)k(y);return i}}class hY extends GY{constructor(W){super(W)}load(W,y,M,U){const i=this,x=new _e,n=new DY(this.manager);return n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setPath(this.path),n.setWithCredentials(i.withCredentials),n.load(W,(function(W){let M;try{M=i.parse(W)}catch(W){if(void 0===U)return void console.error(W);U(W)}if(!M)return U();void 0!==M.image?x.image=M.image:void 0!==M.data&&(x.image.width=M.width,x.image.height=M.height,x.image.data=M.data),x.wrapS=void 0!==M.wrapS?M.wrapS:Gy,x.wrapT=void 0!==M.wrapT?M.wrapT:Gy,x.magFilter=void 0!==M.magFilter?M.magFilter:Oy,x.minFilter=void 0!==M.minFilter?M.minFilter:Oy,x.anisotropy=void 0!==M.anisotropy?M.anisotropy:1,void 0!==M.colorSpace?x.colorSpace=M.colorSpace:void 0!==M.encoding&&(x.encoding=M.encoding),void 0!==M.flipY&&(x.flipY=M.flipY),void 0!==M.format&&(x.format=M.format),void 0!==M.type&&(x.type=M.type),void 0!==M.mipmaps&&(x.mipmaps=M.mipmaps,x.minFilter=oy),1===M.mipmapCount&&(x.minFilter=Oy),void 0!==M.generateMipmaps&&(x.generateMipmaps=M.generateMipmaps),x.needsUpdate=!0,y&&y(x,M)}),M,U),x}}class SY extends GY{constructor(W){super(W)}load(W,y,M,U){const i=new Yi,x=new TY(this.manager);return x.setCrossOrigin(this.crossOrigin),x.setPath(this.path),x.load(W,(function(W){i.image=W,i.needsUpdate=!0,void 0!==y&&y(i)}),M,U),i}}class oY extends qx{constructor(W,y=1){super(),this.isLight=!0,this.type="Light",this.color=new Bx(W),this.intensity=y}dispose(){}copy(W,y){return super.copy(W,y),this.color.copy(W.color),this.intensity=W.intensity,this}toJSON(W){const y=super.toJSON(W);return y.object.color=this.color.getHex(),y.object.intensity=this.intensity,void 0!==this.groundColor&&(y.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(y.object.distance=this.distance),void 0!==this.angle&&(y.object.angle=this.angle),void 0!==this.decay&&(y.object.decay=this.decay),void 0!==this.penumbra&&(y.object.penumbra=this.penumbra),void 0!==this.shadow&&(y.object.shadow=this.shadow.toJSON()),y}}class dY extends oY{constructor(W,y,M){super(W,M),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(qx.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Bx(y)}copy(W,y){return super.copy(W,y),this.groundColor.copy(W.groundColor),this}}const qY=new Qi,sY=new di,NY=new di;class _Y{constructor(W){this.camera=W,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new LU(512,512),this.map=null,this.mapPass=null,this.matrix=new Qi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new xk,this._frameExtents=new LU(1,1),this._viewportCount=1,this._viewports=[new ci(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(W){const y=this.camera,M=this.matrix;sY.setFromMatrixPosition(W.matrixWorld),y.position.copy(sY),NY.setFromMatrixPosition(W.target.matrixWorld),y.lookAt(NY),y.updateMatrixWorld(),qY.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qY),M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(qY)}getViewport(W){return this._viewports[W]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(W){return this.camera=W.camera.clone(),this.bias=W.bias,this.radius=W.radius,this.mapSize.copy(W.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const W={};return 0!==this.bias&&(W.bias=this.bias),0!==this.normalBias&&(W.normalBias=this.normalBias),1!==this.radius&&(W.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(W.mapSize=this.mapSize.toArray()),W.camera=this.camera.toJSON(!1).object,delete W.camera.matrix,W}}class pY extends _Y{constructor(){super(new wn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(W){const y=this.camera,M=2*RU*W.angle*this.focus,U=this.mapSize.width/this.mapSize.height,i=W.distance||y.far;M===y.fov&&U===y.aspect&&i===y.far||(y.fov=M,y.aspect=U,y.far=i,y.updateProjectionMatrix()),super.updateMatrices(W)}copy(W){return super.copy(W),this.focus=W.focus,this}}class bY extends oY{constructor(W,y,M=0,U=Math.PI/3,i=0,x=2){super(W,y),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(qx.DEFAULT_UP),this.updateMatrix(),this.target=new qx,this.distance=M,this.angle=U,this.penumbra=i,this.decay=x,this.map=null,this.shadow=new pY}get power(){return this.intensity*Math.PI}set power(W){this.intensity=W/Math.PI}dispose(){this.shadow.dispose()}copy(W,y){return super.copy(W,y),this.distance=W.distance,this.angle=W.angle,this.penumbra=W.penumbra,this.decay=W.decay,this.target=W.target.clone(),this.shadow=W.shadow.clone(),this}}const mY=new Qi,zY=new di,KY=new di;class PY extends _Y{constructor(){super(new wn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new LU(4,2),this._viewportCount=6,this._viewports=[new ci(2,1,1,1),new ci(0,1,1,1),new ci(3,1,1,1),new ci(1,1,1,1),new ci(3,0,1,1),new ci(1,0,1,1)],this._cubeDirections=[new di(1,0,0),new di(-1,0,0),new di(0,0,1),new di(0,0,-1),new di(0,1,0),new di(0,-1,0)],this._cubeUps=[new di(0,1,0),new di(0,1,0),new di(0,1,0),new di(0,1,0),new di(0,0,1),new di(0,0,-1)]}updateMatrices(W,y=0){const M=this.camera,U=this.matrix,i=W.distance||M.far;i!==M.far&&(M.far=i,M.updateProjectionMatrix()),zY.setFromMatrixPosition(W.matrixWorld),M.position.copy(zY),KY.copy(M.position),KY.add(this._cubeDirections[y]),M.up.copy(this._cubeUps[y]),M.lookAt(KY),M.updateMatrixWorld(),U.makeTranslation(-zY.x,-zY.y,-zY.z),mY.multiplyMatrices(M.projectionMatrix,M.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mY)}}class RY extends oY{constructor(W,y,M=0,U=2){super(W,y),this.isPointLight=!0,this.type="PointLight",this.distance=M,this.decay=U,this.shadow=new PY}get power(){return 4*this.intensity*Math.PI}set power(W){this.intensity=W/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(W,y){return super.copy(W,y),this.distance=W.distance,this.decay=W.decay,this.shadow=W.shadow.clone(),this}}class IY extends _Y{constructor(){super(new Ok(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class EY extends oY{constructor(W,y){super(W,y),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(qx.DEFAULT_UP),this.updateMatrix(),this.target=new qx,this.shadow=new IY}dispose(){this.shadow.dispose()}copy(W){return super.copy(W),this.target=W.target.clone(),this.shadow=W.shadow.clone(),this}}class ZY extends oY{constructor(W,y){super(W,y),this.isAmbientLight=!0,this.type="AmbientLight"}}class fY extends oY{constructor(W,y,M=10,U=10){super(W,y),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=M,this.height=U}get power(){return this.intensity*this.width*this.height*Math.PI}set power(W){this.intensity=W/(this.width*this.height*Math.PI)}copy(W){return super.copy(W),this.width=W.width,this.height=W.height,this}toJSON(W){const y=super.toJSON(W);return y.object.width=this.width,y.object.height=this.height,y}}class VY{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let W=0;W<9;W++)this.coefficients.push(new di)}set(W){for(let y=0;y<9;y++)this.coefficients[y].copy(W[y]);return this}zero(){for(let W=0;W<9;W++)this.coefficients[W].set(0,0,0);return this}getAt(W,y){const M=W.x,U=W.y,i=W.z,x=this.coefficients;return y.copy(x[0]).multiplyScalar(.282095),y.addScaledVector(x[1],.488603*U),y.addScaledVector(x[2],.488603*i),y.addScaledVector(x[3],.488603*M),y.addScaledVector(x[4],1.092548*(M*U)),y.addScaledVector(x[5],1.092548*(U*i)),y.addScaledVector(x[6],.315392*(3*i*i-1)),y.addScaledVector(x[7],1.092548*(M*i)),y.addScaledVector(x[8],.546274*(M*M-U*U)),y}getIrradianceAt(W,y){const M=W.x,U=W.y,i=W.z,x=this.coefficients;return y.copy(x[0]).multiplyScalar(.886227),y.addScaledVector(x[1],2*.511664*U),y.addScaledVector(x[2],2*.511664*i),y.addScaledVector(x[3],2*.511664*M),y.addScaledVector(x[4],2*.429043*M*U),y.addScaledVector(x[5],2*.429043*U*i),y.addScaledVector(x[6],.743125*i*i-.247708),y.addScaledVector(x[7],2*.429043*M*i),y.addScaledVector(x[8],.429043*(M*M-U*U)),y}add(W){for(let y=0;y<9;y++)this.coefficients[y].add(W.coefficients[y]);return this}addScaledSH(W,y){for(let M=0;M<9;M++)this.coefficients[M].addScaledVector(W.coefficients[M],y);return this}scale(W){for(let y=0;y<9;y++)this.coefficients[y].multiplyScalar(W);return this}lerp(W,y){for(let M=0;M<9;M++)this.coefficients[M].lerp(W.coefficients[M],y);return this}equals(W){for(let y=0;y<9;y++)if(!this.coefficients[y].equals(W.coefficients[y]))return!1;return!0}copy(W){return this.set(W.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(W,y=0){const M=this.coefficients;for(let U=0;U<9;U++)M[U].fromArray(W,y+3*U);return this}toArray(W=[],y=0){const M=this.coefficients;for(let U=0;U<9;U++)M[U].toArray(W,y+3*U);return W}static getBasisAt(W,y){const M=W.x,U=W.y,i=W.z;y[0]=.282095,y[1]=.488603*U,y[2]=.488603*i,y[3]=.488603*M,y[4]=1.092548*M*U,y[5]=1.092548*U*i,y[6]=.315392*(3*i*i-1),y[7]=1.092548*M*i,y[8]=.546274*(M*M-U*U)}}class $Y extends oY{constructor(W=new VY,y=1){super(void 0,y),this.isLightProbe=!0,this.sh=W}copy(W){return super.copy(W),this.sh.copy(W.sh),this}fromJSON(W){return this.intensity=W.intensity,this.sh.fromArray(W.sh),this}toJSON(W){const y=super.toJSON(W);return y.object.sh=this.sh.toArray(),y}}class aY extends GY{constructor(W){super(W),this.textures={}}load(W,y,M,U){const i=this,x=new DY(i.manager);x.setPath(i.path),x.setRequestHeader(i.requestHeader),x.setWithCredentials(i.withCredentials),x.load(W,(function(M){try{y(i.parse(JSON.parse(M)))}catch(y){U?U(y):console.error(y),i.manager.itemError(W)}}),M,U)}parse(W){const y=this.textures;function M(W){return void 0===y[W]&&console.warn("THREE.MaterialLoader: Undefined texture",W),y[W]}const U=aY.createMaterialFromType(W.type);if(void 0!==W.uuid&&(U.uuid=W.uuid),void 0!==W.name&&(U.name=W.name),void 0!==W.color&&void 0!==U.color&&U.color.setHex(W.color),void 0!==W.roughness&&(U.roughness=W.roughness),void 0!==W.metalness&&(U.metalness=W.metalness),void 0!==W.sheen&&(U.sheen=W.sheen),void 0!==W.sheenColor&&(U.sheenColor=(new Bx).setHex(W.sheenColor)),void 0!==W.sheenRoughness&&(U.sheenRoughness=W.sheenRoughness),void 0!==W.emissive&&void 0!==U.emissive&&U.emissive.setHex(W.emissive),void 0!==W.specular&&void 0!==U.specular&&U.specular.setHex(W.specular),void 0!==W.specularIntensity&&(U.specularIntensity=W.specularIntensity),void 0!==W.specularColor&&void 0!==U.specularColor&&U.specularColor.setHex(W.specularColor),void 0!==W.shininess&&(U.shininess=W.shininess),void 0!==W.clearcoat&&(U.clearcoat=W.clearcoat),void 0!==W.clearcoatRoughness&&(U.clearcoatRoughness=W.clearcoatRoughness),void 0!==W.iridescence&&(U.iridescence=W.iridescence),void 0!==W.iridescenceIOR&&(U.iridescenceIOR=W.iridescenceIOR),void 0!==W.iridescenceThicknessRange&&(U.iridescenceThicknessRange=W.iridescenceThicknessRange),void 0!==W.transmission&&(U.transmission=W.transmission),void 0!==W.thickness&&(U.thickness=W.thickness),void 0!==W.attenuationDistance&&(U.attenuationDistance=W.attenuationDistance),void 0!==W.attenuationColor&&void 0!==U.attenuationColor&&U.attenuationColor.setHex(W.attenuationColor),void 0!==W.anisotropy&&(U.anisotropy=W.anisotropy),void 0!==W.anisotropyRotation&&(U.anisotropyRotation=W.anisotropyRotation),void 0!==W.fog&&(U.fog=W.fog),void 0!==W.flatShading&&(U.flatShading=W.flatShading),void 0!==W.blending&&(U.blending=W.blending),void 0!==W.combine&&(U.combine=W.combine),void 0!==W.side&&(U.side=W.side),void 0!==W.shadowSide&&(U.shadowSide=W.shadowSide),void 0!==W.opacity&&(U.opacity=W.opacity),void 0!==W.transparent&&(U.transparent=W.transparent),void 0!==W.alphaTest&&(U.alphaTest=W.alphaTest),void 0!==W.alphaHash&&(U.alphaHash=W.alphaHash),void 0!==W.depthTest&&(U.depthTest=W.depthTest),void 0!==W.depthWrite&&(U.depthWrite=W.depthWrite),void 0!==W.colorWrite&&(U.colorWrite=W.colorWrite),void 0!==W.stencilWrite&&(U.stencilWrite=W.stencilWrite),void 0!==W.stencilWriteMask&&(U.stencilWriteMask=W.stencilWriteMask),void 0!==W.stencilFunc&&(U.stencilFunc=W.stencilFunc),void 0!==W.stencilRef&&(U.stencilRef=W.stencilRef),void 0!==W.stencilFuncMask&&(U.stencilFuncMask=W.stencilFuncMask),void 0!==W.stencilFail&&(U.stencilFail=W.stencilFail),void 0!==W.stencilZFail&&(U.stencilZFail=W.stencilZFail),void 0!==W.stencilZPass&&(U.stencilZPass=W.stencilZPass),void 0!==W.wireframe&&(U.wireframe=W.wireframe),void 0!==W.wireframeLinewidth&&(U.wireframeLinewidth=W.wireframeLinewidth),void 0!==W.wireframeLinecap&&(U.wireframeLinecap=W.wireframeLinecap),void 0!==W.wireframeLinejoin&&(U.wireframeLinejoin=W.wireframeLinejoin),void 0!==W.rotation&&(U.rotation=W.rotation),1!==W.linewidth&&(U.linewidth=W.linewidth),void 0!==W.dashSize&&(U.dashSize=W.dashSize),void 0!==W.gapSize&&(U.gapSize=W.gapSize),void 0!==W.scale&&(U.scale=W.scale),void 0!==W.polygonOffset&&(U.polygonOffset=W.polygonOffset),void 0!==W.polygonOffsetFactor&&(U.polygonOffsetFactor=W.polygonOffsetFactor),void 0!==W.polygonOffsetUnits&&(U.polygonOffsetUnits=W.polygonOffsetUnits),void 0!==W.dithering&&(U.dithering=W.dithering),void 0!==W.alphaToCoverage&&(U.alphaToCoverage=W.alphaToCoverage),void 0!==W.premultipliedAlpha&&(U.premultipliedAlpha=W.premultipliedAlpha),void 0!==W.forceSinglePass&&(U.forceSinglePass=W.forceSinglePass),void 0!==W.visible&&(U.visible=W.visible),void 0!==W.toneMapped&&(U.toneMapped=W.toneMapped),void 0!==W.userData&&(U.userData=W.userData),void 0!==W.vertexColors&&("number"==typeof W.vertexColors?U.vertexColors=W.vertexColors>0:U.vertexColors=W.vertexColors),void 0!==W.uniforms)for(const y in W.uniforms){const i=W.uniforms[y];switch(U.uniforms[y]={},i.type){case"t":U.uniforms[y].value=M(i.value);break;case"c":U.uniforms[y].value=(new Bx).setHex(i.value);break;case"v2":U.uniforms[y].value=(new LU).fromArray(i.value);break;case"v3":U.uniforms[y].value=(new di).fromArray(i.value);break;case"v4":U.uniforms[y].value=(new ci).fromArray(i.value);break;case"m3":U.uniforms[y].value=(new XU).fromArray(i.value);break;case"m4":U.uniforms[y].value=(new Qi).fromArray(i.value);break;default:U.uniforms[y].value=i.value}}if(void 0!==W.defines&&(U.defines=W.defines),void 0!==W.vertexShader&&(U.vertexShader=W.vertexShader),void 0!==W.fragmentShader&&(U.fragmentShader=W.fragmentShader),void 0!==W.glslVersion&&(U.glslVersion=W.glslVersion),void 0!==W.extensions)for(const y in W.extensions)U.extensions[y]=W.extensions[y];if(void 0!==W.lights&&(U.lights=W.lights),void 0!==W.clipping&&(U.clipping=W.clipping),void 0!==W.size&&(U.size=W.size),void 0!==W.sizeAttenuation&&(U.sizeAttenuation=W.sizeAttenuation),void 0!==W.map&&(U.map=M(W.map)),void 0!==W.matcap&&(U.matcap=M(W.matcap)),void 0!==W.alphaMap&&(U.alphaMap=M(W.alphaMap)),void 0!==W.bumpMap&&(U.bumpMap=M(W.bumpMap)),void 0!==W.bumpScale&&(U.bumpScale=W.bumpScale),void 0!==W.normalMap&&(U.normalMap=M(W.normalMap)),void 0!==W.normalMapType&&(U.normalMapType=W.normalMapType),void 0!==W.normalScale){let y=W.normalScale;!1===Array.isArray(y)&&(y=[y,y]),U.normalScale=(new LU).fromArray(y)}return void 0!==W.displacementMap&&(U.displacementMap=M(W.displacementMap)),void 0!==W.displacementScale&&(U.displacementScale=W.displacementScale),void 0!==W.displacementBias&&(U.displacementBias=W.displacementBias),void 0!==W.roughnessMap&&(U.roughnessMap=M(W.roughnessMap)),void 0!==W.metalnessMap&&(U.metalnessMap=M(W.metalnessMap)),void 0!==W.emissiveMap&&(U.emissiveMap=M(W.emissiveMap)),void 0!==W.emissiveIntensity&&(U.emissiveIntensity=W.emissiveIntensity),void 0!==W.specularMap&&(U.specularMap=M(W.specularMap)),void 0!==W.specularIntensityMap&&(U.specularIntensityMap=M(W.specularIntensityMap)),void 0!==W.specularColorMap&&(U.specularColorMap=M(W.specularColorMap)),void 0!==W.envMap&&(U.envMap=M(W.envMap)),void 0!==W.envMapIntensity&&(U.envMapIntensity=W.envMapIntensity),void 0!==W.reflectivity&&(U.reflectivity=W.reflectivity),void 0!==W.refractionRatio&&(U.refractionRatio=W.refractionRatio),void 0!==W.lightMap&&(U.lightMap=M(W.lightMap)),void 0!==W.lightMapIntensity&&(U.lightMapIntensity=W.lightMapIntensity),void 0!==W.aoMap&&(U.aoMap=M(W.aoMap)),void 0!==W.aoMapIntensity&&(U.aoMapIntensity=W.aoMapIntensity),void 0!==W.gradientMap&&(U.gradientMap=M(W.gradientMap)),void 0!==W.clearcoatMap&&(U.clearcoatMap=M(W.clearcoatMap)),void 0!==W.clearcoatRoughnessMap&&(U.clearcoatRoughnessMap=M(W.clearcoatRoughnessMap)),void 0!==W.clearcoatNormalMap&&(U.clearcoatNormalMap=M(W.clearcoatNormalMap)),void 0!==W.clearcoatNormalScale&&(U.clearcoatNormalScale=(new LU).fromArray(W.clearcoatNormalScale)),void 0!==W.iridescenceMap&&(U.iridescenceMap=M(W.iridescenceMap)),void 0!==W.iridescenceThicknessMap&&(U.iridescenceThicknessMap=M(W.iridescenceThicknessMap)),void 0!==W.transmissionMap&&(U.transmissionMap=M(W.transmissionMap)),void 0!==W.thicknessMap&&(U.thicknessMap=M(W.thicknessMap)),void 0!==W.anisotropyMap&&(U.anisotropyMap=M(W.anisotropyMap)),void 0!==W.sheenColorMap&&(U.sheenColorMap=M(W.sheenColorMap)),void 0!==W.sheenRoughnessMap&&(U.sheenRoughnessMap=M(W.sheenRoughnessMap)),U}setTextures(W){return this.textures=W,this}static createMaterialFromType(W){return new{ShadowMaterial:KG,SpriteMaterial:ju,RawShaderMaterial:PG,ShaderMaterial:Ln,PointsMaterial:je,MeshPhysicalMaterial:IG,MeshStandardMaterial:RG,MeshPhongMaterial:EG,MeshToonMaterial:ZG,MeshNormalMaterial:fG,MeshLambertMaterial:VG,MeshDepthMaterial:Nu,MeshDistanceMaterial:_u,MeshBasicMaterial:Lx,MeshMatcapMaterial:$G,LineDashedMaterial:aG,LineBasicMaterial:$e,Material:fx}[W]}}class HY{static decodeText(W){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(W);let y="";for(let M=0,U=W.length;M<U;M++)y+=String.fromCharCode(W[M]);try{return decodeURIComponent(escape(y))}catch(W){return y}}static extractUrlBase(W){const y=W.lastIndexOf("/");return-1===y?"./":W.slice(0,y+1)}static resolveURL(W,y){return"string"!=typeof W||""===W?"":(/^https?:\/\//i.test(y)&&/^\//.test(W)&&(y=y.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(W)||/^data:.*,.*$/i.test(W)||/^blob:.*$/i.test(W)?W:y+W)}}class BY extends Tn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(W){return super.copy(W),this.instanceCount=W.instanceCount,this}toJSON(){const W=super.toJSON();return W.instanceCount=this.instanceCount,W.isInstancedBufferGeometry=!0,W}}class vY extends GY{constructor(W){super(W)}load(W,y,M,U){const i=this,x=new DY(i.manager);x.setPath(i.path),x.setRequestHeader(i.requestHeader),x.setWithCredentials(i.withCredentials),x.load(W,(function(M){try{y(i.parse(JSON.parse(M)))}catch(y){U?U(y):console.error(y),i.manager.itemError(W)}}),M,U)}parse(W){const y={},M={};function U(W,U){if(void 0!==y[U])return y[U];const i=W.interleavedBuffers[U],x=function(W,y){if(void 0!==M[y])return M[y];const U=W.arrayBuffers[y],i=new Uint32Array(U).buffer;return M[y]=i,i}(W,i.buffer),n=JU(i.type,x),k=new Fu(n,i.stride);return k.uuid=i.uuid,y[U]=k,k}const i=W.isInstancedBufferGeometry?new BY:new Tn,x=W.data.index;if(void 0!==x){const W=JU(x.type,x.array);i.setIndex(new Qx(W,1))}const n=W.data.attributes;for(const y in n){const M=n[y];let x;if(M.isInterleavedBufferAttribute){const y=U(W.data,M.data);x=new Ju(y,M.itemSize,M.offset,M.normalized)}else{const W=JU(M.type,M.array);x=new(M.isInstancedBufferAttribute?ze:Qx)(W,M.itemSize,M.normalized)}void 0!==M.name&&(x.name=M.name),void 0!==M.usage&&x.setUsage(M.usage),void 0!==M.updateRange&&(x.updateRange.offset=M.updateRange.offset,x.updateRange.count=M.updateRange.count),i.setAttribute(y,x)}const k=W.data.morphAttributes;if(k)for(const y in k){const M=k[y],x=[];for(let y=0,i=M.length;y<i;y++){const i=M[y];let n;if(i.isInterleavedBufferAttribute){const y=U(W.data,i.data);n=new Ju(y,i.itemSize,i.offset,i.normalized)}else{const W=JU(i.type,i.array);n=new Qx(W,i.itemSize,i.normalized)}void 0!==i.name&&(n.name=i.name),x.push(n)}i.morphAttributes[y]=x}W.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const g=W.data.groups||W.data.drawcalls||W.data.offsets;if(void 0!==g)for(let W=0,y=g.length;W!==y;++W){const y=g[W];i.addGroup(y.start,y.count,y.materialIndex)}const u=W.data.boundingSphere;if(void 0!==u){const W=new di;void 0!==u.center&&W.fromArray(u.center),i.boundingSphere=new vi(W,u.radius)}return W.name&&(i.name=W.name),W.userData&&(i.userData=W.userData),i}}class LY extends GY{constructor(W){super(W)}load(W,y,M,U){const i=this,x=""===this.path?HY.extractUrlBase(W):this.path;this.resourcePath=this.resourcePath||x;const n=new DY(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(W,(function(M){let x=null;try{x=JSON.parse(M)}catch(y){return void 0!==U&&U(y),void console.error("THREE:ObjectLoader: Can't parse "+W+".",y.message)}const n=x.metadata;if(void 0===n||void 0===n.type||"geometry"===n.type.toLowerCase())return void 0!==U&&U(new Error("THREE.ObjectLoader: Can't load "+W)),void console.error("THREE.ObjectLoader: Can't load "+W);i.parse(x,y)}),M,U)}async loadAsync(W,y){const M=""===this.path?HY.extractUrlBase(W):this.path;this.resourcePath=this.resourcePath||M;const U=new DY(this.manager);U.setPath(this.path),U.setRequestHeader(this.requestHeader),U.setWithCredentials(this.withCredentials);const i=await U.loadAsync(W,y),x=JSON.parse(i),n=x.metadata;if(void 0===n||void 0===n.type||"geometry"===n.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+W);return await this.parseAsync(x)}parse(W,y){const M=this.parseAnimations(W.animations),U=this.parseShapes(W.shapes),i=this.parseGeometries(W.geometries,U),x=this.parseImages(W.images,(function(){void 0!==y&&y(g)})),n=this.parseTextures(W.textures,x),k=this.parseMaterials(W.materials,n),g=this.parseObject(W.object,i,k,n,M),u=this.parseSkeletons(W.skeletons,g);if(this.bindSkeletons(g,u),void 0!==y){let W=!1;for(const y in x)if(x[y].data instanceof HTMLImageElement){W=!0;break}!1===W&&y(g)}return g}async parseAsync(W){const y=this.parseAnimations(W.animations),M=this.parseShapes(W.shapes),U=this.parseGeometries(W.geometries,M),i=await this.parseImagesAsync(W.images),x=this.parseTextures(W.textures,i),n=this.parseMaterials(W.materials,x),k=this.parseObject(W.object,U,n,x,y),g=this.parseSkeletons(W.skeletons,k);return this.bindSkeletons(k,g),k}parseShapes(W){const y={};if(void 0!==W)for(let M=0,U=W.length;M<U;M++){const U=(new vl).fromJSON(W[M]);y[U.uuid]=U}return y}parseSkeletons(W,y){const M={},U={};if(y.traverse((function(W){W.isBone&&(U[W.uuid]=W)})),void 0!==W)for(let y=0,i=W.length;y<i;y++){const i=(new me).fromJSON(W[y],U);M[i.uuid]=i}return M}parseGeometries(W,y){const M={};if(void 0!==W){const U=new vY;for(let i=0,x=W.length;i<x;i++){let x;const n=W[i];switch(n.type){case"BufferGeometry":case"InstancedBufferGeometry":x=U.parse(n);break;default:n.type in zG?x=zG[n.type].fromJSON(n,y):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${n.type}"`)}x.uuid=n.uuid,void 0!==n.name&&(x.name=n.name),void 0!==n.userData&&(x.userData=n.userData),M[n.uuid]=x}}return M}parseMaterials(W,y){const M={},U={};if(void 0!==W){const i=new aY;i.setTextures(y);for(let y=0,x=W.length;y<x;y++){const x=W[y];void 0===M[x.uuid]&&(M[x.uuid]=i.parse(x)),U[x.uuid]=M[x.uuid]}}return U}parseAnimations(W){const y={};if(void 0!==W)for(let M=0;M<W.length;M++){const U=W[M],i=kY.parse(U);y[i.uuid]=i}return y}parseImages(W,y){const M=this,U={};let i;function x(W){if("string"==typeof W){const y=W;return function(W){return M.manager.itemStart(W),i.load(W,(function(){M.manager.itemEnd(W)}),void 0,(function(){M.manager.itemError(W),M.manager.itemEnd(W)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(y)?y:M.resourcePath+y)}return W.data?{data:JU(W.type,W.data),width:W.width,height:W.height}:null}if(void 0!==W&&W.length>0){const M=new eY(y);i=new TY(M),i.setCrossOrigin(this.crossOrigin);for(let y=0,M=W.length;y<M;y++){const M=W[y],i=M.url;if(Array.isArray(i)){const W=[];for(let y=0,M=i.length;y<M;y++){const M=x(i[y]);null!==M&&(M instanceof HTMLImageElement?W.push(M):W.push(new _e(M.data,M.width,M.height)))}U[M.uuid]=new ei(W)}else{const W=x(M.url);U[M.uuid]=new ei(W)}}}return U}async parseImagesAsync(W){const y=this,M={};let U;async function i(W){if("string"==typeof W){const M=W,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(M)?M:y.resourcePath+M;return await U.loadAsync(i)}return W.data?{data:JU(W.type,W.data),width:W.width,height:W.height}:null}if(void 0!==W&&W.length>0){U=new TY(this.manager),U.setCrossOrigin(this.crossOrigin);for(let y=0,U=W.length;y<U;y++){const U=W[y],x=U.url;if(Array.isArray(x)){const W=[];for(let y=0,M=x.length;y<M;y++){const M=x[y],U=await i(M);null!==U&&(U instanceof HTMLImageElement?W.push(U):W.push(new _e(U.data,U.width,U.height)))}M[U.uuid]=new ei(W)}else{const W=await i(U.url);M[U.uuid]=new ei(W)}}}return M}parseTextures(W,y){function M(W,y){return"number"==typeof W?W:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",W),y[W])}const U={};if(void 0!==W)for(let i=0,x=W.length;i<x;i++){const x=W[i];void 0===x.image&&console.warn('THREE.ObjectLoader: No "image" specified for',x.uuid),void 0===y[x.image]&&console.warn("THREE.ObjectLoader: Undefined image",x.image);const n=y[x.image],k=n.data;let g;Array.isArray(k)?(g=new jn,6===k.length&&(g.needsUpdate=!0)):(g=k&&k.data?new _e:new Yi,k&&(g.needsUpdate=!0)),g.source=n,g.uuid=x.uuid,void 0!==x.name&&(g.name=x.name),void 0!==x.mapping&&(g.mapping=M(x.mapping,XY)),void 0!==x.channel&&(g.channel=x.channel),void 0!==x.offset&&g.offset.fromArray(x.offset),void 0!==x.repeat&&g.repeat.fromArray(x.repeat),void 0!==x.center&&g.center.fromArray(x.center),void 0!==x.rotation&&(g.rotation=x.rotation),void 0!==x.wrap&&(g.wrapS=M(x.wrap[0],wY),g.wrapT=M(x.wrap[1],wY)),void 0!==x.format&&(g.format=x.format),void 0!==x.internalFormat&&(g.internalFormat=x.internalFormat),void 0!==x.type&&(g.type=x.type),void 0!==x.colorSpace&&(g.colorSpace=x.colorSpace),void 0!==x.encoding&&(g.encoding=x.encoding),void 0!==x.minFilter&&(g.minFilter=M(x.minFilter,FY)),void 0!==x.magFilter&&(g.magFilter=M(x.magFilter,FY)),void 0!==x.anisotropy&&(g.anisotropy=x.anisotropy),void 0!==x.flipY&&(g.flipY=x.flipY),void 0!==x.generateMipmaps&&(g.generateMipmaps=x.generateMipmaps),void 0!==x.premultiplyAlpha&&(g.premultiplyAlpha=x.premultiplyAlpha),void 0!==x.unpackAlignment&&(g.unpackAlignment=x.unpackAlignment),void 0!==x.compareFunction&&(g.compareFunction=x.compareFunction),void 0!==x.userData&&(g.userData=x.userData),U[x.uuid]=g}return U}parseObject(W,y,M,U,i){let x,n,k;function g(W){return void 0===y[W]&&console.warn("THREE.ObjectLoader: Undefined geometry",W),y[W]}function u(W){if(void 0!==W){if(Array.isArray(W)){const y=[];for(let U=0,i=W.length;U<i;U++){const i=W[U];void 0===M[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),y.push(M[i])}return y}return void 0===M[W]&&console.warn("THREE.ObjectLoader: Undefined material",W),M[W]}}function e(W){return void 0===U[W]&&console.warn("THREE.ObjectLoader: Undefined texture",W),U[W]}switch(W.type){case"Scene":x=new wu,void 0!==W.background&&(Number.isInteger(W.background)?x.background=new Bx(W.background):x.background=e(W.background)),void 0!==W.environment&&(x.environment=e(W.environment)),void 0!==W.fog&&("Fog"===W.fog.type?x.fog=new Xu(W.fog.color,W.fog.near,W.fog.far):"FogExp2"===W.fog.type&&(x.fog=new Lu(W.fog.color,W.fog.density))),void 0!==W.backgroundBlurriness&&(x.backgroundBlurriness=W.backgroundBlurriness),void 0!==W.backgroundIntensity&&(x.backgroundIntensity=W.backgroundIntensity);break;case"PerspectiveCamera":x=new wn(W.fov,W.aspect,W.near,W.far),void 0!==W.focus&&(x.focus=W.focus),void 0!==W.zoom&&(x.zoom=W.zoom),void 0!==W.filmGauge&&(x.filmGauge=W.filmGauge),void 0!==W.filmOffset&&(x.filmOffset=W.filmOffset),void 0!==W.view&&(x.view=Object.assign({},W.view));break;case"OrthographicCamera":x=new Ok(W.left,W.right,W.top,W.bottom,W.near,W.far),void 0!==W.zoom&&(x.zoom=W.zoom),void 0!==W.view&&(x.view=Object.assign({},W.view));break;case"AmbientLight":x=new ZY(W.color,W.intensity);break;case"DirectionalLight":x=new EY(W.color,W.intensity);break;case"PointLight":x=new RY(W.color,W.intensity,W.distance,W.decay);break;case"RectAreaLight":x=new fY(W.color,W.intensity,W.width,W.height);break;case"SpotLight":x=new bY(W.color,W.intensity,W.distance,W.angle,W.penumbra,W.decay);break;case"HemisphereLight":x=new dY(W.color,W.groundColor,W.intensity);break;case"LightProbe":x=(new $Y).fromJSON(W);break;case"SkinnedMesh":n=g(W.geometry),k=u(W.material),x=new se(n,k),void 0!==W.bindMode&&(x.bindMode=W.bindMode),void 0!==W.bindMatrix&&x.bindMatrix.fromArray(W.bindMatrix),void 0!==W.skeleton&&(x.skeleton=W.skeleton);break;case"Mesh":n=g(W.geometry),k=u(W.material),x=new En(n,k);break;case"InstancedMesh":n=g(W.geometry),k=u(W.material);const y=W.count,M=W.instanceMatrix,U=W.instanceColor;x=new Ve(n,k,y),x.instanceMatrix=new ze(new Float32Array(M.array),16),void 0!==U&&(x.instanceColor=new ze(new Float32Array(U.array),U.itemSize));break;case"LOD":x=new De;break;case"Line":x=new Xe(g(W.geometry),u(W.material));break;case"LineLoop":x=new Je(g(W.geometry),u(W.material));break;case"LineSegments":x=new te(g(W.geometry),u(W.material));break;case"PointCloud":case"Points":x=new Ml(g(W.geometry),u(W.material));break;case"Sprite":x=new le(u(W.material));break;case"Group":x=new Iu;break;case"Bone":x=new Ne;break;default:x=new qx}if(x.uuid=W.uuid,void 0!==W.name&&(x.name=W.name),void 0!==W.matrix?(x.matrix.fromArray(W.matrix),void 0!==W.matrixAutoUpdate&&(x.matrixAutoUpdate=W.matrixAutoUpdate),x.matrixAutoUpdate&&x.matrix.decompose(x.position,x.quaternion,x.scale)):(void 0!==W.position&&x.position.fromArray(W.position),void 0!==W.rotation&&x.rotation.fromArray(W.rotation),void 0!==W.quaternion&&x.quaternion.fromArray(W.quaternion),void 0!==W.scale&&x.scale.fromArray(W.scale)),void 0!==W.up&&x.up.fromArray(W.up),void 0!==W.castShadow&&(x.castShadow=W.castShadow),void 0!==W.receiveShadow&&(x.receiveShadow=W.receiveShadow),W.shadow&&(void 0!==W.shadow.bias&&(x.shadow.bias=W.shadow.bias),void 0!==W.shadow.normalBias&&(x.shadow.normalBias=W.shadow.normalBias),void 0!==W.shadow.radius&&(x.shadow.radius=W.shadow.radius),void 0!==W.shadow.mapSize&&x.shadow.mapSize.fromArray(W.shadow.mapSize),void 0!==W.shadow.camera&&(x.shadow.camera=this.parseObject(W.shadow.camera))),void 0!==W.visible&&(x.visible=W.visible),void 0!==W.frustumCulled&&(x.frustumCulled=W.frustumCulled),void 0!==W.renderOrder&&(x.renderOrder=W.renderOrder),void 0!==W.userData&&(x.userData=W.userData),void 0!==W.layers&&(x.layers.mask=W.layers),void 0!==W.children){const n=W.children;for(let W=0;W<n.length;W++)x.add(this.parseObject(n[W],y,M,U,i))}if(void 0!==W.animations){const y=W.animations;for(let W=0;W<y.length;W++){const M=y[W];x.animations.push(i[M])}}if("LOD"===W.type){void 0!==W.autoUpdate&&(x.autoUpdate=W.autoUpdate);const y=W.levels;for(let W=0;W<y.length;W++){const M=y[W],U=x.getObjectByProperty("uuid",M.object);void 0!==U&&x.addLevel(U,M.distance,M.hysteresis)}}return x}bindSkeletons(W,y){0!==Object.keys(y).length&&W.traverse((function(W){if(!0===W.isSkinnedMesh&&void 0!==W.skeleton){const M=y[W.skeleton];void 0===M?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",W.skeleton):W.bind(M,W.bindMatrix)}}))}}const XY={UVMapping:xy,CubeReflectionMapping:ny,CubeRefractionMapping:ky,EquirectangularReflectionMapping:gy,EquirectangularRefractionMapping:uy,CubeUVReflectionMapping:ey},wY={RepeatWrapping:ly,ClampToEdgeWrapping:Gy,MirroredRepeatWrapping:Yy},FY={NearestFilter:cy,NearestMipmapNearestFilter:Dy,NearestMipmapLinearFilter:Ay,LinearFilter:Oy,LinearMipmapNearestFilter:hy,LinearMipmapLinearFilter:oy};class tY extends GY{constructor(W){super(W),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(W){return this.options=W,this}load(W,y,M,U){void 0===W&&(W=""),void 0!==this.path&&(W=this.path+W),W=this.manager.resolveURL(W);const i=this,x=uY.get(W);if(void 0!==x)return i.manager.itemStart(W),setTimeout((function(){y&&y(x),i.manager.itemEnd(W)}),0),x;const n={};n.credentials="anonymous"===this.crossOrigin?"same-origin":"include",n.headers=this.requestHeader,fetch(W,n).then((function(W){return W.blob()})).then((function(W){return createImageBitmap(W,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(M){uY.add(W,M),y&&y(M),i.manager.itemEnd(W)})).catch((function(y){U&&U(y),i.manager.itemError(W),i.manager.itemEnd(W)})),i.manager.itemStart(W)}}let JY;class jY{static getContext(){return void 0===JY&&(JY=new(window.AudioContext||window.webkitAudioContext)),JY}static setContext(W){JY=W}}class CY extends GY{constructor(W){super(W)}load(W,y,M,U){const i=this,x=new DY(this.manager);function n(y){U?U(y):console.error(y),i.manager.itemError(W)}x.setResponseType("arraybuffer"),x.setPath(this.path),x.setRequestHeader(this.requestHeader),x.setWithCredentials(this.withCredentials),x.load(W,(function(W){try{const M=W.slice(0);jY.getContext().decodeAudioData(M,(function(W){y(W)}),n)}catch(W){n(W)}}),M,U)}}class QY extends $Y{constructor(W,y,M=1){super(void 0,M),this.isHemisphereLightProbe=!0;const U=(new Bx).set(W),i=(new Bx).set(y),x=new di(U.r,U.g,U.b),n=new di(i.r,i.g,i.b),k=Math.sqrt(Math.PI),g=k*Math.sqrt(.75);this.sh.coefficients[0].copy(x).add(n).multiplyScalar(k),this.sh.coefficients[1].copy(x).sub(n).multiplyScalar(g)}}class Wc extends $Y{constructor(W,y=1){super(void 0,y),this.isAmbientLightProbe=!0;const M=(new Bx).set(W);this.sh.coefficients[0].set(M.r,M.g,M.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const yc=new Qi,Mc=new Qi,Uc=new Qi;class ic{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new wn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new wn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(W){const y=this._cache;if(y.focus!==W.focus||y.fov!==W.fov||y.aspect!==W.aspect*this.aspect||y.near!==W.near||y.far!==W.far||y.zoom!==W.zoom||y.eyeSep!==this.eyeSep){y.focus=W.focus,y.fov=W.fov,y.aspect=W.aspect*this.aspect,y.near=W.near,y.far=W.far,y.zoom=W.zoom,y.eyeSep=this.eyeSep,Uc.copy(W.projectionMatrix);const M=y.eyeSep/2,U=M*y.near/y.focus,i=y.near*Math.tan(PU*y.fov*.5)/y.zoom;let x,n;Mc.elements[12]=-M,yc.elements[12]=M,x=-i*y.aspect+U,n=i*y.aspect+U,Uc.elements[0]=2*y.near/(n-x),Uc.elements[8]=(n+x)/(n-x),this.cameraL.projectionMatrix.copy(Uc),x=-i*y.aspect-U,n=i*y.aspect-U,Uc.elements[0]=2*y.near/(n-x),Uc.elements[8]=(n+x)/(n-x),this.cameraR.projectionMatrix.copy(Uc)}this.cameraL.matrixWorld.copy(W.matrixWorld).multiply(Mc),this.cameraR.matrixWorld.copy(W.matrixWorld).multiply(yc)}}class xc{constructor(W=!0){this.autoStart=W,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=nc(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let W=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const y=nc();W=(y-this.oldTime)/1e3,this.oldTime=y,this.elapsedTime+=W}return W}}function nc(){return("undefined"==typeof performance?Date:performance).now()}const kc=new di,gc=new oi,uc=new di,ec=new di;class lc extends qx{constructor(){super(),this.type="AudioListener",this.context=jY.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new xc}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(W){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=W,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(W){return this.gain.gain.setTargetAtTime(W,this.context.currentTime,.01),this}updateMatrixWorld(W){super.updateMatrixWorld(W);const y=this.context.listener,M=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(kc,gc,uc),ec.set(0,0,-1).applyQuaternion(gc),y.positionX){const W=this.context.currentTime+this.timeDelta;y.positionX.linearRampToValueAtTime(kc.x,W),y.positionY.linearRampToValueAtTime(kc.y,W),y.positionZ.linearRampToValueAtTime(kc.z,W),y.forwardX.linearRampToValueAtTime(ec.x,W),y.forwardY.linearRampToValueAtTime(ec.y,W),y.forwardZ.linearRampToValueAtTime(ec.z,W),y.upX.linearRampToValueAtTime(M.x,W),y.upY.linearRampToValueAtTime(M.y,W),y.upZ.linearRampToValueAtTime(M.z,W)}else y.setPosition(kc.x,kc.y,kc.z),y.setOrientation(ec.x,ec.y,ec.z,M.x,M.y,M.z)}}class Gc extends qx{constructor(W){super(),this.type="Audio",this.listener=W,this.context=W.context,this.gain=this.context.createGain(),this.gain.connect(W.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(W){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=W,this.connect(),this}setMediaElementSource(W){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(W),this.connect(),this}setMediaStreamSource(W){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(W),this.connect(),this}setBuffer(W){return this.buffer=W,this.sourceType="buffer",this.autoplay&&this.play(),this}play(W=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+W;const y=this.context.createBufferSource();return y.buffer=this.buffer,y.loop=this.loop,y.loopStart=this.loopStart,y.loopEnd=this.loopEnd,y.onended=this.onEnded.bind(this),y.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=y,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let W=1,y=this.filters.length;W<y;W++)this.filters[W-1].connect(this.filters[W]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let W=1,y=this.filters.length;W<y;W++)this.filters[W-1].disconnect(this.filters[W]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(W){return W||(W=[]),!0===this._connected?(this.disconnect(),this.filters=W.slice(),this.connect()):this.filters=W.slice(),this}setDetune(W){if(this.detune=W,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(W){return this.setFilters(W?[W]:[])}setPlaybackRate(W){if(!1!==this.hasPlaybackControl)return this.playbackRate=W,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(W){if(!1!==this.hasPlaybackControl)return this.loop=W,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(W){return this.loopStart=W,this}setLoopEnd(W){return this.loopEnd=W,this}getVolume(){return this.gain.gain.value}setVolume(W){return this.gain.gain.setTargetAtTime(W,this.context.currentTime,.01),this}}const Yc=new di,cc=new oi,Dc=new di,rc=new di;class Ac extends Gc{constructor(W){super(W),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(W){return this.panner.refDistance=W,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(W){return this.panner.rolloffFactor=W,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(W){return this.panner.distanceModel=W,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(W){return this.panner.maxDistance=W,this}setDirectionalCone(W,y,M){return this.panner.coneInnerAngle=W,this.panner.coneOuterAngle=y,this.panner.coneOuterGain=M,this}updateMatrixWorld(W){if(super.updateMatrixWorld(W),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Yc,cc,Dc),rc.set(0,0,1).applyQuaternion(cc);const y=this.panner;if(y.positionX){const W=this.context.currentTime+this.listener.timeDelta;y.positionX.linearRampToValueAtTime(Yc.x,W),y.positionY.linearRampToValueAtTime(Yc.y,W),y.positionZ.linearRampToValueAtTime(Yc.z,W),y.orientationX.linearRampToValueAtTime(rc.x,W),y.orientationY.linearRampToValueAtTime(rc.y,W),y.orientationZ.linearRampToValueAtTime(rc.z,W)}else y.setPosition(Yc.x,Yc.y,Yc.z),y.setOrientation(rc.x,rc.y,rc.z)}}class Tc{constructor(W,y=2048){this.analyser=W.context.createAnalyser(),this.analyser.fftSize=y,this.data=new Uint8Array(this.analyser.frequencyBinCount),W.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let W=0;const y=this.getFrequencyData();for(let M=0;M<y.length;M++)W+=y[M];return W/y.length}}class Oc{constructor(W,y,M){let U,i,x;switch(this.binding=W,this.valueSize=M,y){case"quaternion":U=this._slerp,i=this._slerpAdditive,x=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*M),this._workIndex=5;break;case"string":case"bool":U=this._select,i=this._select,x=this._setAdditiveIdentityOther,this.buffer=new Array(5*M);break;default:U=this._lerp,i=this._lerpAdditive,x=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*M)}this._mixBufferRegion=U,this._mixBufferRegionAdditive=i,this._setIdentity=x,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(W,y){const M=this.buffer,U=this.valueSize,i=W*U+U;let x=this.cumulativeWeight;if(0===x){for(let W=0;W!==U;++W)M[i+W]=M[W];x=y}else{x+=y;const W=y/x;this._mixBufferRegion(M,i,0,W,U)}this.cumulativeWeight=x}accumulateAdditive(W){const y=this.buffer,M=this.valueSize,U=M*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(y,U,0,W,M),this.cumulativeWeightAdditive+=W}apply(W){const y=this.valueSize,M=this.buffer,U=W*y+y,i=this.cumulativeWeight,x=this.cumulativeWeightAdditive,n=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const W=y*this._origIndex;this._mixBufferRegion(M,U,W,1-i,y)}x>0&&this._mixBufferRegionAdditive(M,U,this._addIndex*y,1,y);for(let W=y,i=y+y;W!==i;++W)if(M[W]!==M[W+y]){n.setValue(M,U);break}}saveOriginalState(){const W=this.binding,y=this.buffer,M=this.valueSize,U=M*this._origIndex;W.getValue(y,U);for(let W=M,i=U;W!==i;++W)y[W]=y[U+W%M];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const W=3*this.valueSize;this.binding.setValue(this.buffer,W)}_setAdditiveIdentityNumeric(){const W=this._addIndex*this.valueSize,y=W+this.valueSize;for(let M=W;M<y;M++)this.buffer[M]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const W=this._origIndex*this.valueSize,y=this._addIndex*this.valueSize;for(let M=0;M<this.valueSize;M++)this.buffer[y+M]=this.buffer[W+M]}_select(W,y,M,U,i){if(U>=.5)for(let U=0;U!==i;++U)W[y+U]=W[M+U]}_slerp(W,y,M,U){oi.slerpFlat(W,y,W,y,W,M,U)}_slerpAdditive(W,y,M,U,i){const x=this._workIndex*i;oi.multiplyQuaternionsFlat(W,x,W,y,W,M),oi.slerpFlat(W,y,W,y,W,x,U)}_lerp(W,y,M,U,i){const x=1-U;for(let n=0;n!==i;++n){const i=y+n;W[i]=W[i]*x+W[M+n]*U}}_lerpAdditive(W,y,M,U,i){for(let x=0;x!==i;++x){const i=y+x;W[i]=W[i]+W[M+x]*U}}}const hc="\\[\\]\\.:\\/",Sc=new RegExp("["+hc+"]","g"),oc="[^"+hc+"]",dc="[^"+hc.replace("\\.","")+"]",qc=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",oc)+/(WCOD+)?/.source.replace("WCOD",dc)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",oc)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",oc)+"$"),sc=["material","materials","bones","map"];class Nc{constructor(W,y,M){this.path=y,this.parsedPath=M||Nc.parseTrackName(y),this.node=Nc.findNode(W,this.parsedPath.nodeName),this.rootNode=W,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(W,y,M){return W&&W.isAnimationObjectGroup?new Nc.Composite(W,y,M):new Nc(W,y,M)}static sanitizeNodeName(W){return W.replace(/\s/g,"_").replace(Sc,"")}static parseTrackName(W){const y=qc.exec(W);if(null===y)throw new Error("PropertyBinding: Cannot parse trackName: "+W);const M={nodeName:y[2],objectName:y[3],objectIndex:y[4],propertyName:y[5],propertyIndex:y[6]},U=M.nodeName&&M.nodeName.lastIndexOf(".");if(void 0!==U&&-1!==U){const W=M.nodeName.substring(U+1);-1!==sc.indexOf(W)&&(M.nodeName=M.nodeName.substring(0,U),M.objectName=W)}if(null===M.propertyName||0===M.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+W);return M}static findNode(W,y){if(void 0===y||""===y||"."===y||-1===y||y===W.name||y===W.uuid)return W;if(W.skeleton){const M=W.skeleton.getBoneByName(y);if(void 0!==M)return M}if(W.children){const M=function(W){for(let U=0;U<W.length;U++){const i=W[U];if(i.name===y||i.uuid===y)return i;const x=M(i.children);if(x)return x}return null},U=M(W.children);if(U)return U}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(W,y){W[y]=this.targetObject[this.propertyName]}_getValue_array(W,y){const M=this.resolvedProperty;for(let U=0,i=M.length;U!==i;++U)W[y++]=M[U]}_getValue_arrayElement(W,y){W[y]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(W,y){this.resolvedProperty.toArray(W,y)}_setValue_direct(W,y){this.targetObject[this.propertyName]=W[y]}_setValue_direct_setNeedsUpdate(W,y){this.targetObject[this.propertyName]=W[y],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(W,y){this.targetObject[this.propertyName]=W[y],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(W,y){const M=this.resolvedProperty;for(let U=0,i=M.length;U!==i;++U)M[U]=W[y++]}_setValue_array_setNeedsUpdate(W,y){const M=this.resolvedProperty;for(let U=0,i=M.length;U!==i;++U)M[U]=W[y++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(W,y){const M=this.resolvedProperty;for(let U=0,i=M.length;U!==i;++U)M[U]=W[y++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(W,y){this.resolvedProperty[this.propertyIndex]=W[y]}_setValue_arrayElement_setNeedsUpdate(W,y){this.resolvedProperty[this.propertyIndex]=W[y],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(W,y){this.resolvedProperty[this.propertyIndex]=W[y],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(W,y){this.resolvedProperty.fromArray(W,y)}_setValue_fromArray_setNeedsUpdate(W,y){this.resolvedProperty.fromArray(W,y),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(W,y){this.resolvedProperty.fromArray(W,y),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(W,y){this.bind(),this.getValue(W,y)}_setValue_unbound(W,y){this.bind(),this.setValue(W,y)}bind(){let W=this.node;const y=this.parsedPath,M=y.objectName,U=y.propertyName;let i=y.propertyIndex;if(W||(W=Nc.findNode(this.rootNode,y.nodeName),this.node=W),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!W)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(M){let U=y.objectIndex;switch(M){case"materials":if(!W.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!W.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);W=W.material.materials;break;case"bones":if(!W.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);W=W.skeleton.bones;for(let y=0;y<W.length;y++)if(W[y].name===U){U=y;break}break;case"map":if("map"in W){W=W.map;break}if(!W.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!W.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);W=W.material.map;break;default:if(void 0===W[M])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);W=W[M]}if(void 0!==U){if(void 0===W[U])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,W);W=W[U]}}const x=W[U];if(void 0===x){const M=y.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+M+"."+U+" but it wasn't found.",W)}let n=this.Versioning.None;this.targetObject=W,void 0!==W.needsUpdate?n=this.Versioning.NeedsUpdate:void 0!==W.matrixWorldNeedsUpdate&&(n=this.Versioning.MatrixWorldNeedsUpdate);let k=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===U){if(!W.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!W.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==W.morphTargetDictionary[i]&&(i=W.morphTargetDictionary[i])}k=this.BindingType.ArrayElement,this.resolvedProperty=x,this.propertyIndex=i}else void 0!==x.fromArray&&void 0!==x.toArray?(k=this.BindingType.HasFromToArray,this.resolvedProperty=x):Array.isArray(x)?(k=this.BindingType.EntireArray,this.resolvedProperty=x):this.propertyName=U;this.getValue=this.GetterByBindingType[k],this.setValue=this.SetterByBindingTypeAndVersioning[k][n]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Nc.Composite=class{constructor(W,y,M){const U=M||Nc.parseTrackName(y);this._targetGroup=W,this._bindings=W.subscribe_(y,U)}getValue(W,y){this.bind();const M=this._targetGroup.nCachedObjects_,U=this._bindings[M];void 0!==U&&U.getValue(W,y)}setValue(W,y){const M=this._bindings;for(let U=this._targetGroup.nCachedObjects_,i=M.length;U!==i;++U)M[U].setValue(W,y)}bind(){const W=this._bindings;for(let y=this._targetGroup.nCachedObjects_,M=W.length;y!==M;++y)W[y].bind()}unbind(){const W=this._bindings;for(let y=this._targetGroup.nCachedObjects_,M=W.length;y!==M;++y)W[y].unbind()}},Nc.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Nc.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Nc.prototype.GetterByBindingType=[Nc.prototype._getValue_direct,Nc.prototype._getValue_array,Nc.prototype._getValue_arrayElement,Nc.prototype._getValue_toArray],Nc.prototype.SetterByBindingTypeAndVersioning=[[Nc.prototype._setValue_direct,Nc.prototype._setValue_direct_setNeedsUpdate,Nc.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nc.prototype._setValue_array,Nc.prototype._setValue_array_setNeedsUpdate,Nc.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nc.prototype._setValue_arrayElement,Nc.prototype._setValue_arrayElement_setNeedsUpdate,Nc.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nc.prototype._setValue_fromArray,Nc.prototype._setValue_fromArray_setNeedsUpdate,Nc.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class _c{constructor(){this.isAnimationObjectGroup=!0,this.uuid=IU(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const W={};this._indicesByUUID=W;for(let y=0,M=arguments.length;y!==M;++y)W[arguments[y].uuid]=y;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const y=this;this.stats={objects:{get total(){return y._objects.length},get inUse(){return this.total-y.nCachedObjects_}},get bindingsPerObject(){return y._bindings.length}}}add(){const W=this._objects,y=this._indicesByUUID,M=this._paths,U=this._parsedPaths,i=this._bindings,x=i.length;let n,k=W.length,g=this.nCachedObjects_;for(let u=0,e=arguments.length;u!==e;++u){const e=arguments[u],l=e.uuid;let G=y[l];if(void 0===G){G=k++,y[l]=G,W.push(e);for(let W=0,y=x;W!==y;++W)i[W].push(new Nc(e,M[W],U[W]))}else if(G<g){n=W[G];const k=--g,u=W[k];y[u.uuid]=G,W[G]=u,y[l]=k,W[k]=e;for(let W=0,y=x;W!==y;++W){const y=i[W],x=y[k];let n=y[G];y[G]=x,void 0===n&&(n=new Nc(e,M[W],U[W])),y[k]=n}}else W[G]!==n&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID "+"detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=g}remove(){const W=this._objects,y=this._indicesByUUID,M=this._bindings,U=M.length;let i=this.nCachedObjects_;for(let x=0,n=arguments.length;x!==n;++x){const n=arguments[x],k=n.uuid,g=y[k];if(void 0!==g&&g>=i){const x=i++,u=W[x];y[u.uuid]=g,W[g]=u,y[k]=x,W[x]=n;for(let W=0,y=U;W!==y;++W){const y=M[W],U=y[x],i=y[g];y[g]=U,y[x]=i}}}this.nCachedObjects_=i}uncache(){const W=this._objects,y=this._indicesByUUID,M=this._bindings,U=M.length;let i=this.nCachedObjects_,x=W.length;for(let n=0,k=arguments.length;n!==k;++n){const k=arguments[n].uuid,g=y[k];if(void 0!==g)if(delete y[k],g<i){const n=--i,k=W[n],u=--x,e=W[u];y[k.uuid]=g,W[g]=k,y[e.uuid]=n,W[n]=e,W.pop();for(let W=0,y=U;W!==y;++W){const y=M[W],U=y[n],i=y[u];y[g]=U,y[n]=i,y.pop()}}else{const i=--x,n=W[i];i>0&&(y[n.uuid]=g),W[g]=n,W.pop();for(let W=0,y=U;W!==y;++W){const y=M[W];y[g]=y[i],y.pop()}}}this.nCachedObjects_=i}subscribe_(W,y){const M=this._bindingsIndicesByPath;let U=M[W];const i=this._bindings;if(void 0!==U)return i[U];const x=this._paths,n=this._parsedPaths,k=this._objects,g=k.length,u=this.nCachedObjects_,e=new Array(g);U=i.length,M[W]=U,x.push(W),n.push(y),i.push(e);for(let M=u,U=k.length;M!==U;++M){const U=k[M];e[M]=new Nc(U,W,y)}return e}unsubscribe_(W){const y=this._bindingsIndicesByPath,M=y[W];if(void 0!==M){const U=this._paths,i=this._parsedPaths,x=this._bindings,n=x.length-1,k=x[n];y[W[n]]=M,x[M]=k,x.pop(),i[M]=i[n],i.pop(),U[M]=U[n],U.pop()}}}class pc{constructor(W,y,M=null,U=y.blendMode){this._mixer=W,this._clip=y,this._localRoot=M,this.blendMode=U;const i=y.tracks,x=i.length,n=new Array(x),k={endingStart:pM,endingEnd:pM};for(let W=0;W!==x;++W){const y=i[W].createInterpolant(null);n[W]=y,y.settings=k}this._interpolantSettings=k,this._interpolants=n,this._propertyBindings=new Array(x),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=dM,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(W){return this._startTime=W,this}setLoop(W,y){return this.loop=W,this.repetitions=y,this}setEffectiveWeight(W){return this.weight=W,this._effectiveWeight=this.enabled?W:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(W){return this._scheduleFading(W,0,1)}fadeOut(W){return this._scheduleFading(W,1,0)}crossFadeFrom(W,y,M){if(W.fadeOut(y),this.fadeIn(y),M){const M=this._clip.duration,U=W._clip.duration,i=U/M,x=M/U;W.warp(1,i,y),this.warp(x,1,y)}return this}crossFadeTo(W,y,M){return W.crossFadeFrom(this,y,M)}stopFading(){const W=this._weightInterpolant;return null!==W&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(W)),this}setEffectiveTimeScale(W){return this.timeScale=W,this._effectiveTimeScale=this.paused?0:W,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(W){return this.timeScale=this._clip.duration/W,this.stopWarping()}syncWith(W){return this.time=W.time,this.timeScale=W.timeScale,this.stopWarping()}halt(W){return this.warp(this._effectiveTimeScale,0,W)}warp(W,y,M){const U=this._mixer,i=U.time,x=this.timeScale;let n=this._timeScaleInterpolant;null===n&&(n=U._lendControlInterpolant(),this._timeScaleInterpolant=n);const k=n.parameterPositions,g=n.sampleValues;return k[0]=i,k[1]=i+M,g[0]=W/x,g[1]=y/x,this}stopWarping(){const W=this._timeScaleInterpolant;return null!==W&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(W)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(W,y,M,U){if(!this.enabled)return void this._updateWeight(W);const i=this._startTime;if(null!==i){const U=(W-i)*M;U<0||0===M?y=0:(this._startTime=null,y=M*U)}y*=this._updateTimeScale(W);const x=this._updateTime(y),n=this._updateWeight(W);if(n>0){const W=this._interpolants,y=this._propertyBindings;if(this.blendMode===KM)for(let M=0,U=W.length;M!==U;++M)W[M].evaluate(x),y[M].accumulateAdditive(n);else for(let M=0,i=W.length;M!==i;++M)W[M].evaluate(x),y[M].accumulate(U,n)}}_updateWeight(W){let y=0;if(this.enabled){y=this.weight;const M=this._weightInterpolant;if(null!==M){const U=M.evaluate(W)[0];y*=U,W>M.parameterPositions[1]&&(this.stopFading(),0===U&&(this.enabled=!1))}}return this._effectiveWeight=y,y}_updateTimeScale(W){let y=0;if(!this.paused){y=this.timeScale;const M=this._timeScaleInterpolant;null!==M&&(y*=M.evaluate(W)[0],W>M.parameterPositions[1]&&(this.stopWarping(),0===y?this.paused=!0:this.timeScale=y))}return this._effectiveTimeScale=y,y}_updateTime(W){const y=this._clip.duration,M=this.loop;let U=this.time+W,i=this._loopCount;const x=M===qM;if(0===W)return-1===i||!x||1&~i?U:y-U;if(M===oM){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));W:{if(U>=y)U=y;else{if(!(U<0)){this.time=U;break W}U=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=U,this._mixer.dispatchEvent({type:"finished",action:this,direction:W<0?-1:1})}}else{if(-1===i&&(W>=0?(i=0,this._setEndings(!0,0===this.repetitions,x)):this._setEndings(0===this.repetitions,!0,x)),U>=y||U<0){const M=Math.floor(U/y);U-=y*M,i+=Math.abs(M);const n=this.repetitions-i;if(n<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,U=W>0?y:0,this.time=U,this._mixer.dispatchEvent({type:"finished",action:this,direction:W>0?1:-1});else{if(1===n){const y=W<0;this._setEndings(y,!y,x)}else this._setEndings(!1,!1,x);this._loopCount=i,this.time=U,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:M})}}else this.time=U;if(x&&!(1&~i))return y-U}return U}_setEndings(W,y,M){const U=this._interpolantSettings;M?(U.endingStart=bM,U.endingEnd=bM):(U.endingStart=W?this.zeroSlopeAtStart?bM:pM:mM,U.endingEnd=y?this.zeroSlopeAtEnd?bM:pM:mM)}_scheduleFading(W,y,M){const U=this._mixer,i=U.time;let x=this._weightInterpolant;null===x&&(x=U._lendControlInterpolant(),this._weightInterpolant=x);const n=x.parameterPositions,k=x.sampleValues;return n[0]=i,k[0]=y,n[1]=i+W,k[1]=M,this}}const bc=new Float32Array(1);class mc extends mU{constructor(W){super(),this._root=W,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(W,y){const M=W._localRoot||this._root,U=W._clip.tracks,i=U.length,x=W._propertyBindings,n=W._interpolants,k=M.uuid,g=this._bindingsByRootAndName;let u=g[k];void 0===u&&(u={},g[k]=u);for(let W=0;W!==i;++W){const i=U[W],g=i.name;let e=u[g];if(void 0!==e)++e.referenceCount,x[W]=e;else{if(e=x[W],void 0!==e){null===e._cacheIndex&&(++e.referenceCount,this._addInactiveBinding(e,k,g));continue}const U=y&&y._propertyBindings[W].binding.parsedPath;e=new Oc(Nc.create(M,g,U),i.ValueTypeName,i.getValueSize()),++e.referenceCount,this._addInactiveBinding(e,k,g),x[W]=e}n[W].resultBuffer=e.buffer}}_activateAction(W){if(!this._isActiveAction(W)){if(null===W._cacheIndex){const y=(W._localRoot||this._root).uuid,M=W._clip.uuid,U=this._actionsByClip[M];this._bindAction(W,U&&U.knownActions[0]),this._addInactiveAction(W,M,y)}const y=W._propertyBindings;for(let W=0,M=y.length;W!==M;++W){const M=y[W];0==M.useCount++&&(this._lendBinding(M),M.saveOriginalState())}this._lendAction(W)}}_deactivateAction(W){if(this._isActiveAction(W)){const y=W._propertyBindings;for(let W=0,M=y.length;W!==M;++W){const M=y[W];0==--M.useCount&&(M.restoreOriginalState(),this._takeBackBinding(M))}this._takeBackAction(W)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const W=this;this.stats={actions:{get total(){return W._actions.length},get inUse(){return W._nActiveActions}},bindings:{get total(){return W._bindings.length},get inUse(){return W._nActiveBindings}},controlInterpolants:{get total(){return W._controlInterpolants.length},get inUse(){return W._nActiveControlInterpolants}}}}_isActiveAction(W){const y=W._cacheIndex;return null!==y&&y<this._nActiveActions}_addInactiveAction(W,y,M){const U=this._actions,i=this._actionsByClip;let x=i[y];if(void 0===x)x={knownActions:[W],actionByRoot:{}},W._byClipCacheIndex=0,i[y]=x;else{const y=x.knownActions;W._byClipCacheIndex=y.length,y.push(W)}W._cacheIndex=U.length,U.push(W),x.actionByRoot[M]=W}_removeInactiveAction(W){const y=this._actions,M=y[y.length-1],U=W._cacheIndex;M._cacheIndex=U,y[U]=M,y.pop(),W._cacheIndex=null;const i=W._clip.uuid,x=this._actionsByClip,n=x[i],k=n.knownActions,g=k[k.length-1],u=W._byClipCacheIndex;g._byClipCacheIndex=u,k[u]=g,k.pop(),W._byClipCacheIndex=null,delete n.actionByRoot[(W._localRoot||this._root).uuid],0===k.length&&delete x[i],this._removeInactiveBindingsForAction(W)}_removeInactiveBindingsForAction(W){const y=W._propertyBindings;for(let W=0,M=y.length;W!==M;++W){const M=y[W];0==--M.referenceCount&&this._removeInactiveBinding(M)}}_lendAction(W){const y=this._actions,M=W._cacheIndex,U=this._nActiveActions++,i=y[U];W._cacheIndex=U,y[U]=W,i._cacheIndex=M,y[M]=i}_takeBackAction(W){const y=this._actions,M=W._cacheIndex,U=--this._nActiveActions,i=y[U];W._cacheIndex=U,y[U]=W,i._cacheIndex=M,y[M]=i}_addInactiveBinding(W,y,M){const U=this._bindingsByRootAndName,i=this._bindings;let x=U[y];void 0===x&&(x={},U[y]=x),x[M]=W,W._cacheIndex=i.length,i.push(W)}_removeInactiveBinding(W){const y=this._bindings,M=W.binding,U=M.rootNode.uuid,i=M.path,x=this._bindingsByRootAndName,n=x[U],k=y[y.length-1],g=W._cacheIndex;k._cacheIndex=g,y[g]=k,y.pop(),delete n[i],0===Object.keys(n).length&&delete x[U]}_lendBinding(W){const y=this._bindings,M=W._cacheIndex,U=this._nActiveBindings++,i=y[U];W._cacheIndex=U,y[U]=W,i._cacheIndex=M,y[M]=i}_takeBackBinding(W){const y=this._bindings,M=W._cacheIndex,U=--this._nActiveBindings,i=y[U];W._cacheIndex=U,y[U]=W,i._cacheIndex=M,y[M]=i}_lendControlInterpolant(){const W=this._controlInterpolants,y=this._nActiveControlInterpolants++;let M=W[y];return void 0===M&&(M=new jG(new Float32Array(2),new Float32Array(2),1,bc),M.__cacheIndex=y,W[y]=M),M}_takeBackControlInterpolant(W){const y=this._controlInterpolants,M=W.__cacheIndex,U=--this._nActiveControlInterpolants,i=y[U];W.__cacheIndex=U,y[U]=W,i.__cacheIndex=M,y[M]=i}clipAction(W,y,M){const U=y||this._root,i=U.uuid;let x="string"==typeof W?kY.findByName(U,W):W;const n=null!==x?x.uuid:W,k=this._actionsByClip[n];let g=null;if(void 0===M&&(M=null!==x?x.blendMode:zM),void 0!==k){const W=k.actionByRoot[i];if(void 0!==W&&W.blendMode===M)return W;g=k.knownActions[0],null===x&&(x=g._clip)}if(null===x)return null;const u=new pc(this,x,y,M);return this._bindAction(u,g),this._addInactiveAction(u,n,i),u}existingAction(W,y){const M=y||this._root,U=M.uuid,i="string"==typeof W?kY.findByName(M,W):W,x=i?i.uuid:W,n=this._actionsByClip[x];return void 0!==n&&n.actionByRoot[U]||null}stopAllAction(){const W=this._actions;for(let y=this._nActiveActions-1;y>=0;--y)W[y].stop();return this}update(W){W*=this.timeScale;const y=this._actions,M=this._nActiveActions,U=this.time+=W,i=Math.sign(W),x=this._accuIndex^=1;for(let n=0;n!==M;++n)y[n]._update(U,W,i,x);const n=this._bindings,k=this._nActiveBindings;for(let W=0;W!==k;++W)n[W].apply(x);return this}setTime(W){this.time=0;for(let W=0;W<this._actions.length;W++)this._actions[W].time=0;return this.update(W)}getRoot(){return this._root}uncacheClip(W){const y=this._actions,M=W.uuid,U=this._actionsByClip,i=U[M];if(void 0!==i){const W=i.knownActions;for(let M=0,U=W.length;M!==U;++M){const U=W[M];this._deactivateAction(U);const i=U._cacheIndex,x=y[y.length-1];U._cacheIndex=null,U._byClipCacheIndex=null,x._cacheIndex=i,y[i]=x,y.pop(),this._removeInactiveBindingsForAction(U)}delete U[M]}}uncacheRoot(W){const y=W.uuid,M=this._actionsByClip;for(const W in M){const U=M[W].actionByRoot[y];void 0!==U&&(this._deactivateAction(U),this._removeInactiveAction(U))}const U=this._bindingsByRootAndName[y];if(void 0!==U)for(const W in U){const y=U[W];y.restoreOriginalState(),this._removeInactiveBinding(y)}}uncacheAction(W,y){const M=this.existingAction(W,y);null!==M&&(this._deactivateAction(M),this._removeInactiveAction(M))}}class zc{constructor(W){this.value=W}clone(){return new zc(void 0===this.value.clone?this.value:this.value.clone())}}let Kc=0;class Pc extends mU{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Kc++}),this.name="",this.usage=rU,this.uniforms=[]}add(W){return this.uniforms.push(W),this}remove(W){const y=this.uniforms.indexOf(W);return-1!==y&&this.uniforms.splice(y,1),this}setName(W){return this.name=W,this}setUsage(W){return this.usage=W,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(W){this.name=W.name,this.usage=W.usage;const y=W.uniforms;this.uniforms.length=0;for(let W=0,M=y.length;W<M;W++)this.uniforms.push(y[W].clone());return this}clone(){return(new this.constructor).copy(this)}}class Rc extends Fu{constructor(W,y,M=1){super(W,y),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=M}copy(W){return super.copy(W),this.meshPerAttribute=W.meshPerAttribute,this}clone(W){const y=super.clone(W);return y.meshPerAttribute=this.meshPerAttribute,y}toJSON(W){const y=super.toJSON(W);return y.isInstancedInterleavedBuffer=!0,y.meshPerAttribute=this.meshPerAttribute,y}}class Ic{constructor(W,y,M,U,i){this.isGLBufferAttribute=!0,this.name="",this.buffer=W,this.type=y,this.itemSize=M,this.elementSize=U,this.count=i,this.version=0}set needsUpdate(W){!0===W&&this.version++}setBuffer(W){return this.buffer=W,this}setType(W,y){return this.type=W,this.elementSize=y,this}setItemSize(W){return this.itemSize=W,this}setCount(W){return this.count=W,this}}class Ec{constructor(W,y,M=0,U=1/0){this.ray=new Ci(W,y),this.near=M,this.far=U,this.camera=null,this.layers=new ex,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(W,y){this.ray.set(W,y)}setFromCamera(W,y){y.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(y.matrixWorld),this.ray.direction.set(W.x,W.y,.5).unproject(y).sub(this.ray.origin).normalize(),this.camera=y):y.isOrthographicCamera?(this.ray.origin.set(W.x,W.y,(y.near+y.far)/(y.near-y.far)).unproject(y),this.ray.direction.set(0,0,-1).transformDirection(y.matrixWorld),this.camera=y):console.error("THREE.Raycaster: Unsupported camera type: "+y.type)}intersectObject(W,y=!0,M=[]){return fc(W,this,M,y),M.sort(Zc),M}intersectObjects(W,y=!0,M=[]){for(let U=0,i=W.length;U<i;U++)fc(W[U],this,M,y);return M.sort(Zc),M}}function Zc(W,y){return W.distance-y.distance}function fc(W,y,M,U){if(W.layers.test(y.layers)&&W.raycast(y,M),!0===U){const U=W.children;for(let W=0,i=U.length;W<i;W++)fc(U[W],y,M,!0)}}class Vc{constructor(W=1,y=0,M=0){return this.radius=W,this.phi=y,this.theta=M,this}set(W,y,M){return this.radius=W,this.phi=y,this.theta=M,this}copy(W){return this.radius=W.radius,this.phi=W.phi,this.theta=W.theta,this}makeSafe(){const W=1e-6;return this.phi=Math.max(W,Math.min(Math.PI-W,this.phi)),this}setFromVector3(W){return this.setFromCartesianCoords(W.x,W.y,W.z)}setFromCartesianCoords(W,y,M){return this.radius=Math.sqrt(W*W+y*y+M*M),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(W,M),this.phi=Math.acos(EU(y/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class $c{constructor(W=1,y=0,M=0){return this.radius=W,this.theta=y,this.y=M,this}set(W,y,M){return this.radius=W,this.theta=y,this.y=M,this}copy(W){return this.radius=W.radius,this.theta=W.theta,this.y=W.y,this}setFromVector3(W){return this.setFromCartesianCoords(W.x,W.y,W.z)}setFromCartesianCoords(W,y,M){return this.radius=Math.sqrt(W*W+M*M),this.theta=Math.atan2(W,M),this.y=y,this}clone(){return(new this.constructor).copy(this)}}const ac=new LU;class Hc{constructor(W=new LU(+1/0,+1/0),y=new LU(-1/0,-1/0)){this.isBox2=!0,this.min=W,this.max=y}set(W,y){return this.min.copy(W),this.max.copy(y),this}setFromPoints(W){this.makeEmpty();for(let y=0,M=W.length;y<M;y++)this.expandByPoint(W[y]);return this}setFromCenterAndSize(W,y){const M=ac.copy(y).multiplyScalar(.5);return this.min.copy(W).sub(M),this.max.copy(W).add(M),this}clone(){return(new this.constructor).copy(this)}copy(W){return this.min.copy(W.min),this.max.copy(W.max),this}makeEmpty(){return this.min.x=this.min.y=+1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(W){return this.isEmpty()?W.set(0,0):W.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(W){return this.isEmpty()?W.set(0,0):W.subVectors(this.max,this.min)}expandByPoint(W){return this.min.min(W),this.max.max(W),this}expandByVector(W){return this.min.sub(W),this.max.add(W),this}expandByScalar(W){return this.min.addScalar(-W),this.max.addScalar(W),this}containsPoint(W){return!(W.x<this.min.x||W.x>this.max.x||W.y<this.min.y||W.y>this.max.y)}containsBox(W){return this.min.x<=W.min.x&&W.max.x<=this.max.x&&this.min.y<=W.min.y&&W.max.y<=this.max.y}getParameter(W,y){return y.set((W.x-this.min.x)/(this.max.x-this.min.x),(W.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(W){return!(W.max.x<this.min.x||W.min.x>this.max.x||W.max.y<this.min.y||W.min.y>this.max.y)}clampPoint(W,y){return y.copy(W).clamp(this.min,this.max)}distanceToPoint(W){return this.clampPoint(W,ac).distanceTo(W)}intersect(W){return this.min.max(W.min),this.max.min(W.max),this.isEmpty()&&this.makeEmpty(),this}union(W){return this.min.min(W.min),this.max.max(W.max),this}translate(W){return this.min.add(W),this.max.add(W),this}equals(W){return W.min.equals(this.min)&&W.max.equals(this.max)}}const Bc=new di,vc=new di;class Lc{constructor(W=new di,y=new di){this.start=W,this.end=y}set(W,y){return this.start.copy(W),this.end.copy(y),this}copy(W){return this.start.copy(W.start),this.end.copy(W.end),this}getCenter(W){return W.addVectors(this.start,this.end).multiplyScalar(.5)}delta(W){return W.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(W,y){return this.delta(y).multiplyScalar(W).add(this.start)}closestPointToPointParameter(W,y){Bc.subVectors(W,this.start),vc.subVectors(this.end,this.start);const M=vc.dot(vc);let U=vc.dot(Bc)/M;return y&&(U=EU(U,0,1)),U}closestPointToPoint(W,y,M){const U=this.closestPointToPointParameter(W,y);return this.delta(M).multiplyScalar(U).add(this.start)}applyMatrix4(W){return this.start.applyMatrix4(W),this.end.applyMatrix4(W),this}equals(W){return W.start.equals(this.start)&&W.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Xc=new di;class wc extends qx{constructor(W,y){super(),this.light=W,this.matrix=W.matrixWorld,this.matrixAutoUpdate=!1,this.color=y,this.type="SpotLightHelper";const M=new Tn,U=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let W=0,y=1,M=32;W<M;W++,y++){const i=W/M*Math.PI*2,x=y/M*Math.PI*2;U.push(Math.cos(i),Math.sin(i),1,Math.cos(x),Math.sin(x),1)}M.setAttribute("position",new un(U,3));const i=new $e({fog:!1,toneMapped:!1});this.cone=new te(M,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const W=this.light.distance?this.light.distance:1e3,y=W*Math.tan(this.light.angle);this.cone.scale.set(y,y,W),Xc.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Xc),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Fc=new di,tc=new Qi,Jc=new Qi;class jc extends te{constructor(W){const y=Cc(W),M=new Tn,U=[],i=[],x=new Bx(0,0,1),n=new Bx(0,1,0);for(let W=0;W<y.length;W++){const M=y[W];M.parent&&M.parent.isBone&&(U.push(0,0,0),U.push(0,0,0),i.push(x.r,x.g,x.b),i.push(n.r,n.g,n.b))}M.setAttribute("position",new un(U,3)),M.setAttribute("color",new un(i,3)),super(M,new $e({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=W,this.bones=y,this.matrix=W.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(W){const y=this.bones,M=this.geometry,U=M.getAttribute("position");Jc.copy(this.root.matrixWorld).invert();for(let W=0,M=0;W<y.length;W++){const i=y[W];i.parent&&i.parent.isBone&&(tc.multiplyMatrices(Jc,i.matrixWorld),Fc.setFromMatrixPosition(tc),U.setXYZ(M,Fc.x,Fc.y,Fc.z),tc.multiplyMatrices(Jc,i.parent.matrixWorld),Fc.setFromMatrixPosition(tc),U.setXYZ(M+1,Fc.x,Fc.y,Fc.z),M+=2)}M.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(W)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Cc(W){const y=[];!0===W.isBone&&y.push(W);for(let M=0;M<W.children.length;M++)y.push.apply(y,Cc(W.children[M]));return y}class Qc extends En{constructor(W,y,M){super(new qG(y,4,2),new Lx({wireframe:!0,fog:!1,toneMapped:!1})),this.light=W,this.color=M,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const WD=new di,yD=new Bx,MD=new Bx;class UD extends qx{constructor(W,y,M){super(),this.light=W,this.matrix=W.matrixWorld,this.matrixAutoUpdate=!1,this.color=M,this.type="HemisphereLightHelper";const U=new SG(y);U.rotateY(.5*Math.PI),this.material=new Lx({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=U.getAttribute("position"),x=new Float32Array(3*i.count);U.setAttribute("color",new Qx(x,3)),this.add(new En(U,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const W=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const y=W.geometry.getAttribute("color");yD.copy(this.light.color),MD.copy(this.light.groundColor);for(let W=0,M=y.count;W<M;W++){const U=W<M/2?yD:MD;y.setXYZ(W,U.r,U.g,U.b)}y.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),W.lookAt(WD.setFromMatrixPosition(this.light.matrixWorld).negate())}}class iD extends te{constructor(W=10,y=10,M=4473924,U=8947848){M=new Bx(M),U=new Bx(U);const i=y/2,x=W/y,n=W/2,k=[],g=[];for(let W=0,u=0,e=-n;W<=y;W++,e+=x){k.push(-n,0,e,n,0,e),k.push(e,0,-n,e,0,n);const y=W===i?M:U;y.toArray(g,u),u+=3,y.toArray(g,u),u+=3,y.toArray(g,u),u+=3,y.toArray(g,u),u+=3}const u=new Tn;u.setAttribute("position",new un(k,3)),u.setAttribute("color",new un(g,3)),super(u,new $e({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class xD extends te{constructor(W=10,y=16,M=8,U=64,i=4473924,x=8947848){i=new Bx(i),x=new Bx(x);const n=[],k=[];if(y>1)for(let M=0;M<y;M++){const U=M/y*(2*Math.PI),g=Math.sin(U)*W,u=Math.cos(U)*W;n.push(0,0,0),n.push(g,0,u);const e=1&M?i:x;k.push(e.r,e.g,e.b),k.push(e.r,e.g,e.b)}for(let y=0;y<M;y++){const g=1&y?i:x,u=W-W/M*y;for(let W=0;W<U;W++){let y=W/U*(2*Math.PI),M=Math.sin(y)*u,i=Math.cos(y)*u;n.push(M,0,i),k.push(g.r,g.g,g.b),y=(W+1)/U*(2*Math.PI),M=Math.sin(y)*u,i=Math.cos(y)*u,n.push(M,0,i),k.push(g.r,g.g,g.b)}}const g=new Tn;g.setAttribute("position",new un(n,3)),g.setAttribute("color",new un(k,3)),super(g,new $e({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const nD=new di,kD=new di,gD=new di;class uD extends qx{constructor(W,y,M){super(),this.light=W,this.matrix=W.matrixWorld,this.matrixAutoUpdate=!1,this.color=M,this.type="DirectionalLightHelper",void 0===y&&(y=1);let U=new Tn;U.setAttribute("position",new un([-y,y,0,y,y,0,y,-y,0,-y,-y,0,-y,y,0],3));const i=new $e({fog:!1,toneMapped:!1});this.lightPlane=new Xe(U,i),this.add(this.lightPlane),U=new Tn,U.setAttribute("position",new un([0,0,0,0,0,1],3)),this.targetLine=new Xe(U,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),nD.setFromMatrixPosition(this.light.matrixWorld),kD.setFromMatrixPosition(this.light.target.matrixWorld),gD.subVectors(kD,nD),this.lightPlane.lookAt(kD),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(kD),this.targetLine.scale.z=gD.length()}}const eD=new di,lD=new Xn;class GD extends te{constructor(W){const y=new Tn,M=new $e({color:16777215,vertexColors:!0,toneMapped:!1}),U=[],i=[],x={};function n(W,y){k(W),k(y)}function k(W){U.push(0,0,0),i.push(0,0,0),void 0===x[W]&&(x[W]=[]),x[W].push(U.length/3-1)}n("n1","n2"),n("n2","n4"),n("n4","n3"),n("n3","n1"),n("f1","f2"),n("f2","f4"),n("f4","f3"),n("f3","f1"),n("n1","f1"),n("n2","f2"),n("n3","f3"),n("n4","f4"),n("p","n1"),n("p","n2"),n("p","n3"),n("p","n4"),n("u1","u2"),n("u2","u3"),n("u3","u1"),n("c","t"),n("p","c"),n("cn1","cn2"),n("cn3","cn4"),n("cf1","cf2"),n("cf3","cf4"),y.setAttribute("position",new un(U,3)),y.setAttribute("color",new un(i,3)),super(y,M),this.type="CameraHelper",this.camera=W,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=W.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=x,this.update();const g=new Bx(16755200),u=new Bx(16711680),e=new Bx(43775),l=new Bx(16777215),G=new Bx(3355443);this.setColors(g,u,e,l,G)}setColors(W,y,M,U,i){const x=this.geometry.getAttribute("color");x.setXYZ(0,W.r,W.g,W.b),x.setXYZ(1,W.r,W.g,W.b),x.setXYZ(2,W.r,W.g,W.b),x.setXYZ(3,W.r,W.g,W.b),x.setXYZ(4,W.r,W.g,W.b),x.setXYZ(5,W.r,W.g,W.b),x.setXYZ(6,W.r,W.g,W.b),x.setXYZ(7,W.r,W.g,W.b),x.setXYZ(8,W.r,W.g,W.b),x.setXYZ(9,W.r,W.g,W.b),x.setXYZ(10,W.r,W.g,W.b),x.setXYZ(11,W.r,W.g,W.b),x.setXYZ(12,W.r,W.g,W.b),x.setXYZ(13,W.r,W.g,W.b),x.setXYZ(14,W.r,W.g,W.b),x.setXYZ(15,W.r,W.g,W.b),x.setXYZ(16,W.r,W.g,W.b),x.setXYZ(17,W.r,W.g,W.b),x.setXYZ(18,W.r,W.g,W.b),x.setXYZ(19,W.r,W.g,W.b),x.setXYZ(20,W.r,W.g,W.b),x.setXYZ(21,W.r,W.g,W.b),x.setXYZ(22,W.r,W.g,W.b),x.setXYZ(23,W.r,W.g,W.b),x.setXYZ(24,y.r,y.g,y.b),x.setXYZ(25,y.r,y.g,y.b),x.setXYZ(26,y.r,y.g,y.b),x.setXYZ(27,y.r,y.g,y.b),x.setXYZ(28,y.r,y.g,y.b),x.setXYZ(29,y.r,y.g,y.b),x.setXYZ(30,y.r,y.g,y.b),x.setXYZ(31,y.r,y.g,y.b),x.setXYZ(32,M.r,M.g,M.b),x.setXYZ(33,M.r,M.g,M.b),x.setXYZ(34,M.r,M.g,M.b),x.setXYZ(35,M.r,M.g,M.b),x.setXYZ(36,M.r,M.g,M.b),x.setXYZ(37,M.r,M.g,M.b),x.setXYZ(38,U.r,U.g,U.b),x.setXYZ(39,U.r,U.g,U.b),x.setXYZ(40,i.r,i.g,i.b),x.setXYZ(41,i.r,i.g,i.b),x.setXYZ(42,i.r,i.g,i.b),x.setXYZ(43,i.r,i.g,i.b),x.setXYZ(44,i.r,i.g,i.b),x.setXYZ(45,i.r,i.g,i.b),x.setXYZ(46,i.r,i.g,i.b),x.setXYZ(47,i.r,i.g,i.b),x.setXYZ(48,i.r,i.g,i.b),x.setXYZ(49,i.r,i.g,i.b),x.needsUpdate=!0}update(){const W=this.geometry,y=this.pointMap,M=1,U=1;lD.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),YD("c",y,W,lD,0,0,-1),YD("t",y,W,lD,0,0,1),YD("n1",y,W,lD,-M,-U,-1),YD("n2",y,W,lD,M,-U,-1),YD("n3",y,W,lD,-M,U,-1),YD("n4",y,W,lD,M,U,-1),YD("f1",y,W,lD,-M,-U,1),YD("f2",y,W,lD,M,-U,1),YD("f3",y,W,lD,-M,U,1),YD("f4",y,W,lD,M,U,1),YD("u1",y,W,lD,.7*M,1.1*U,-1),YD("u2",y,W,lD,.7*-M,1.1*U,-1),YD("u3",y,W,lD,0,2*U,-1),YD("cf1",y,W,lD,-M,0,1),YD("cf2",y,W,lD,M,0,1),YD("cf3",y,W,lD,0,-U,1),YD("cf4",y,W,lD,0,U,1),YD("cn1",y,W,lD,-M,0,-1),YD("cn2",y,W,lD,M,0,-1),YD("cn3",y,W,lD,0,-U,-1),YD("cn4",y,W,lD,0,U,-1),W.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function YD(W,y,M,U,i,x,n){eD.set(i,x,n).unproject(U);const k=y[W];if(void 0!==k){const W=M.getAttribute("position");for(let y=0,M=k.length;y<M;y++)W.setXYZ(k[y],eD.x,eD.y,eD.z)}}const cD=new Ni;class DD extends te{constructor(W,y=16776960){const M=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),U=new Float32Array(8*3),i=new Tn;i.setIndex(new Qx(M,1)),i.setAttribute("position",new Qx(U,3)),super(i,new $e({color:y,toneMapped:!1})),this.object=W,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(W){if(void 0!==W&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&cD.setFromObject(this.object),cD.isEmpty())return;const y=cD.min,M=cD.max,U=this.geometry.attributes.position,i=U.array;i[0]=M.x,i[1]=M.y,i[2]=M.z,i[3]=y.x,i[4]=M.y,i[5]=M.z,i[6]=y.x,i[7]=y.y,i[8]=M.z,i[9]=M.x,i[10]=y.y,i[11]=M.z,i[12]=M.x,i[13]=M.y,i[14]=y.z,i[15]=y.x,i[16]=M.y,i[17]=y.z,i[18]=y.x,i[19]=y.y,i[20]=y.z,i[21]=M.x,i[22]=y.y,i[23]=y.z,U.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(W){return this.object=W,this.update(),this}copy(W,y){return super.copy(W,y),this.object=W.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class rD extends te{constructor(W,y=16776960){const M=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),U=new Tn;U.setIndex(new Qx(M,1)),U.setAttribute("position",new un([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(U,new $e({color:y,toneMapped:!1})),this.box=W,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(W){const y=this.box;y.isEmpty()||(y.getCenter(this.position),y.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(W))}dispose(){this.geometry.dispose(),this.material.dispose()}}class AD extends Xe{constructor(W,y=1,M=16776960){const U=M,i=new Tn;i.setAttribute("position",new un([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new $e({color:U,toneMapped:!1})),this.type="PlaneHelper",this.plane=W,this.size=y;const x=new Tn;x.setAttribute("position",new un([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),x.computeBoundingSphere(),this.add(new En(x,new Lx({color:U,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(W){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(W)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const TD=new di;let OD,hD;class SD extends qx{constructor(W=new di(0,0,1),y=new di(0,0,0),M=1,U=16776960,i=.2*M,x=.2*i){super(),this.type="ArrowHelper",void 0===OD&&(OD=new Tn,OD.setAttribute("position",new un([0,0,0,0,1,0],3)),hD=new Il(0,.5,1,5,1),hD.translate(0,-.5,0)),this.position.copy(y),this.line=new Xe(OD,new $e({color:U,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new En(hD,new Lx({color:U,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(W),this.setLength(M,i,x)}setDirection(W){if(W.y>.99999)this.quaternion.set(0,0,0,1);else if(W.y<-.99999)this.quaternion.set(1,0,0,0);else{TD.set(W.z,0,-W.x).normalize();const y=Math.acos(W.y);this.quaternion.setFromAxisAngle(TD,y)}}setLength(W,y=.2*W,M=.2*y){this.line.scale.set(1,Math.max(1e-4,W-y),1),this.line.updateMatrix(),this.cone.scale.set(M,y,M),this.cone.position.y=W,this.cone.updateMatrix()}setColor(W){this.line.material.color.set(W),this.cone.material.color.set(W)}copy(W){return super.copy(W,!1),this.line.copy(W.line),this.cone.copy(W.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class oD extends te{constructor(W=1){const y=[0,0,0,W,0,0,0,0,0,0,W,0,0,0,0,0,0,W],M=new Tn;M.setAttribute("position",new un(y,3)),M.setAttribute("color",new un([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(M,new $e({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(W,y,M){const U=new Bx,i=this.geometry.attributes.color.array;return U.set(W),U.toArray(i,0),U.toArray(i,3),U.set(y),U.toArray(i,6),U.toArray(i,9),U.set(M),U.toArray(i,12),U.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class dD{constructor(){this.type="ShapePath",this.color=new Bx,this.subPaths=[],this.currentPath=null}moveTo(W,y){return this.currentPath=new zl,this.subPaths.push(this.currentPath),this.currentPath.moveTo(W,y),this}lineTo(W,y){return this.currentPath.lineTo(W,y),this}quadraticCurveTo(W,y,M,U){return this.currentPath.quadraticCurveTo(W,y,M,U),this}bezierCurveTo(W,y,M,U,i,x){return this.currentPath.bezierCurveTo(W,y,M,U,i,x),this}splineThru(W){return this.currentPath.splineThru(W),this}toShapes(W){function y(W,y){const M=y.length;let U=!1;for(let i=M-1,x=0;x<M;i=x++){let M=y[i],n=y[x],k=n.x-M.x,g=n.y-M.y;if(Math.abs(g)>Number.EPSILON){if(g<0&&(M=y[x],k=-k,n=y[i],g=-g),W.y<M.y||W.y>n.y)continue;if(W.y===M.y){if(W.x===M.x)return!0}else{const y=g*(W.x-M.x)-k*(W.y-M.y);if(0===y)return!0;if(y<0)continue;U=!U}}else{if(W.y!==M.y)continue;if(n.x<=W.x&&W.x<=M.x||M.x<=W.x&&W.x<=n.x)return!0}}return U}const M=DG.isClockWise,U=this.subPaths;if(0===U.length)return[];let i,x,n;const k=[];if(1===U.length)return x=U[0],n=new vl,n.curves=x.curves,k.push(n),k;let g=!M(U[0].getPoints());g=W?!g:g;const u=[],e=[];let l,G,Y=[],c=0;e[c]=void 0,Y[c]=[];for(let y=0,n=U.length;y<n;y++)x=U[y],l=x.getPoints(),i=M(l),i=W?!i:i,i?(!g&&e[c]&&c++,e[c]={s:new vl,p:l},e[c].s.curves=x.curves,g&&c++,Y[c]=[]):Y[c].push({h:x,p:l[0]});if(!e[0])return function(W){const y=[];for(let M=0,U=W.length;M<U;M++){const U=W[M],i=new vl;i.curves=U.curves,y.push(i)}return y}(U);if(e.length>1){let W=!1,M=0;for(let W=0,y=e.length;W<y;W++)u[W]=[];for(let U=0,i=e.length;U<i;U++){const i=Y[U];for(let x=0;x<i.length;x++){const n=i[x];let k=!0;for(let i=0;i<e.length;i++)y(n.p,e[i].p)&&(U!==i&&M++,k?(k=!1,u[i].push(n)):W=!0);k&&u[U].push(n)}}M>0&&!1===W&&(Y=u)}for(let W=0,y=e.length;W<y;W++){n=e[W].s,k.push(n),G=Y[W];for(let W=0,y=G.length;W<y;W++)n.holes.push(G[W].h)}return k}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:xW}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=xW);var qD=M(933506);const sD="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?UW.useEffect:UW.useLayoutEffect;function ND(W){const y="function"==typeof W?function(W){let y;const M=new Set,U=(W,U)=>{const i="function"==typeof W?W(y):W;if(i!==y){const W=y;y=U?i:Object.assign({},y,i),M.forEach((M=>M(y,W)))}},i=()=>y,x={setState:U,getState:i,subscribe:(W,U,x)=>U||x?((W,U=i,x=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let n=U(y);function k(){const M=U(y);if(!x(n,M)){const y=n;W(n=M,y)}}return M.add(k),()=>M.delete(k)})(W,U,x):(M.add(W),()=>M.delete(W)),destroy:()=>M.clear()};return y=W(U,i,x),x}(W):W,M=(W=y.getState,M=Object.is)=>{const[,U]=UW.useReducer((W=>W+1),0),i=y.getState(),x=UW.useRef(i),n=UW.useRef(W),k=UW.useRef(M),g=UW.useRef(!1),u=UW.useRef();let e;void 0===u.current&&(u.current=W(i));let l=!1;(x.current!==i||n.current!==W||k.current!==M||g.current)&&(e=W(i),l=!M(u.current,e)),sD((()=>{l&&(u.current=e),x.current=i,n.current=W,k.current=M,g.current=!1}));const G=UW.useRef(i);sD((()=>{const W=()=>{try{const W=y.getState(),M=n.current(W);k.current(u.current,M)||(x.current=W,u.current=M,U())}catch(W){g.current=!0,U()}},M=y.subscribe(W);return y.getState()!==G.current&&W(),M}),[]);const Y=l?e:u.current;return UW.useDebugValue(Y),Y};return Object.assign(M,y),M[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const W=[M,y];return{next(){const y=W.length<=0;return{value:W.shift(),done:y}}}},M}var _D=M(60607),pD=M.n(_D),bD=M(882328);const mD=[];function zD(W,y,M=(W,y)=>W===y){if(W===y)return!0;if(!W||!y)return!1;const U=W.length;if(y.length!==U)return!1;for(let i=0;i<U;i++)if(!M(W[i],y[i]))return!1;return!0}function KD(W,y=null,M=!1,U={}){null===y&&(y=[W]);for(const W of mD)if(zD(y,W.keys,W.equal)){if(M)return;if(Object.prototype.hasOwnProperty.call(W,"error"))throw W.error;if(Object.prototype.hasOwnProperty.call(W,"response"))return U.lifespan&&U.lifespan>0&&(W.timeout&&clearTimeout(W.timeout),W.timeout=setTimeout(W.remove,U.lifespan)),W.response;if(!M)throw W.promise}const i={keys:y,equal:U.equal,remove:()=>{const W=mD.indexOf(i);-1!==W&&mD.splice(W,1)},promise:(x=W,"object"==typeof x&&"function"==typeof x.then?W:W(...y)).then((W=>{i.response=W,U.lifespan&&U.lifespan>0&&(i.timeout=setTimeout(i.remove,U.lifespan))})).catch((W=>i.error=W))};var x;if(mD.push(i),!M)throw i.promise}const PD={},RD=W=>{Object.assign(PD,W)};var ID,ED;const ZD=W=>"colorSpace"in W||"outputColorSpace"in W,fD=()=>{var W;return null!=(W=PD.ColorManagement)?W:null},VD=W=>W&&W.isOrthographicCamera,$D="undefined"!=typeof window&&(null!=(ID=window.document)&&ID.createElement||"ReactNative"===(null==(ED=window.navigator)?void 0:ED.product))?UW.useLayoutEffect:UW.useEffect;class aD extends UW.Component{constructor(...W){super(...W),this.state={error:!1}}componentDidCatch(W){this.props.set(W)}render(){return this.state.error?null:this.props.children}}aD.getDerivedStateFromError=()=>({error:!0});const HD="__default",BD=new Map;function vD(W){var y;const M="undefined"!=typeof window?null!=(y=window.devicePixelRatio)?y:2:1;return Array.isArray(W)?Math.min(Math.max(W[0],M),W[1]):W}const LD=W=>{var y;return null==(y=W.__r3f)?void 0:y.root.getState()},XD={obj:W=>W===Object(W)&&!XD.arr(W)&&"function"!=typeof W,fun:W=>"function"==typeof W,str:W=>"string"==typeof W,num:W=>"number"==typeof W,boo:W=>"boolean"==typeof W,und:W=>void 0===W,arr:W=>Array.isArray(W),equ(W,y,{arrays:M="shallow",objects:U="reference",strict:i=!0}={}){if(typeof W!=typeof y||!!W!=!!y)return!1;if(XD.str(W)||XD.num(W))return W===y;const x=XD.obj(W);if(x&&"reference"===U)return W===y;const n=XD.arr(W);if(n&&"reference"===M)return W===y;if((n||x)&&W===y)return!0;let k;for(k in W)if(!(k in y))return!1;if(x&&"shallow"===M&&"shallow"===U){for(k in i?y:W)if(!XD.equ(W[k],y[k],{strict:i,objects:"reference"}))return!1}else for(k in i?y:W)if(W[k]!==y[k])return!1;if(XD.und(k)){if(n&&0===W.length&&0===y.length)return!0;if(x&&0===Object.keys(W).length&&0===Object.keys(y).length)return!0;if(W!==y)return!1}return!0}};function wD(W,y){return W.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...y},W}function FD(W,y){let M=W;if(y.includes("-")){const U=y.split("-"),i=U.pop();return M=U.reduce(((W,y)=>W[y]),W),{target:M,key:i}}return{target:M,key:y}}const tD=/-\d+$/;function JD(W,y,M){if(XD.str(M)){if(tD.test(M)){const y=M.replace(tD,""),{target:U,key:i}=FD(W,y);Array.isArray(U[i])||(U[i]=[])}const{target:U,key:i}=FD(W,M);y.__r3f.previousAttach=U[i],U[i]=y}else y.__r3f.previousAttach=M(W,y)}function jD(W,y,M){var U,i;if(XD.str(M)){const{target:U,key:i}=FD(W,M),x=y.__r3f.previousAttach;void 0===x?delete U[i]:U[i]=x}else null==(U=y.__r3f)||null==U.previousAttach||U.previousAttach(W,y);null==(i=y.__r3f)||delete i.previousAttach}function CD(W,{children:y,key:M,ref:U,...i},{children:x,key:n,ref:k,...g}={},u=!1){var e;const l=null!=(e=null==W?void 0:W.__r3f)?e:{},G=Object.entries(i),Y=[];if(u){const W=Object.keys(g);for(let y=0;y<W.length;y++)i.hasOwnProperty(W[y])||G.unshift([W[y],HD+"remove"])}G.forEach((([y,M])=>{var U;if(null!=(U=W.__r3f)&&U.primitive&&"object"===y)return;if(XD.equ(M,g[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return Y.push([y,M,!0,[]]);let x=[];y.includes("-")&&(x=y.split("-")),Y.push([y,M,!1,x]);for(const W in i){const M=i[W];W.startsWith(`${y}-`)&&Y.push([W,M,!1,W.split("-")])}}));const c={...i};return l.memoizedProps&&l.memoizedProps.args&&(c.args=l.memoizedProps.args),l.memoizedProps&&l.memoizedProps.attach&&(c.attach=l.memoizedProps.attach),{memoized:c,changes:Y}}function QD(W,y){var M,U,i;const x=null!=(M=W.__r3f)?M:{},n=x.root,k=null!=(U=null==n||null==n.getState?void 0:n.getState())?U:{},{memoized:g,changes:u}=(l=y)&&l.memoized&&l.changes?y:CD(W,y),e=x.eventCount;var l;W.__r3f&&(W.__r3f.memoizedProps=g);for(let y=0;y<u.length;y++){let[M,U,i,n]=u[y];if(ZD(W)){const W=3001,y="srgb",i="srgb-linear";"encoding"===M?(M="colorSpace",U=U===W?y:i):"outputEncoding"===M&&(M="outputColorSpace",U=U===W?y:i)}let g=W,e=g[M];if(n.length&&(e=n.reduce(((W,y)=>W[y]),W),!e||!e.set)){const[y,...U]=n.reverse();g=U.reverse().reduce(((W,y)=>W[y]),W),M=y}if(U===HD+"remove")if(g.constructor){let W=BD.get(g.constructor);W||(W=new g.constructor,BD.set(g.constructor,W)),U=W[M]}else U=0;if(i)U?x.handlers[M]=U:delete x.handlers[M],x.eventCount=Object.keys(x.handlers).length;else if(e&&e.set&&(e.copy||e instanceof ex)){if(Array.isArray(U))e.fromArray?e.fromArray(U):e.set(...U);else if(e.copy&&U&&U.constructor&&e.constructor===U.constructor)e.copy(U);else if(void 0!==U){const W=e instanceof Bx;!W&&e.setScalar?e.setScalar(U):e instanceof ex&&U instanceof ex?e.mask=U.mask:e.set(U),fD()||k.linear||!W||e.convertSRGBToLinear()}}else if(g[M]=U,g[M]instanceof Yi&&g[M].format===Ey&&g[M].type===qy){const W=g[M];ZD(W)&&ZD(k.gl)?W.colorSpace=k.gl.outputColorSpace:W.encoding=k.gl.outputEncoding}Wr(W)}if(x.parent&&k.internal&&W.raycast&&e!==x.eventCount){const y=k.internal.interaction.indexOf(W);y>-1&&k.internal.interaction.splice(y,1),x.eventCount&&k.internal.interaction.push(W)}return!(1===u.length&&"onUpdate"===u[0][0])&&u.length&&null!=(i=W.__r3f)&&i.parent&&yr(W),W}function Wr(W){var y,M;const U=null==(y=W.__r3f)||null==(M=y.root)||null==M.getState?void 0:M.getState();U&&0===U.internal.frames&&U.invalidate()}function yr(W){null==W.onUpdate||W.onUpdate(W)}function Mr(W){return(W.eventObject||W.object).uuid+"/"+W.index+W.instanceId}function Ur(W,y,M,U){const i=M.get(y);i&&(M.delete(y),0===M.size&&(W.delete(U),i.target.releasePointerCapture(U)))}const ir=W=>!(null==W||!W.render),xr=UW.createContext(null),nr=(W,y)=>{const M=ND(((M,U)=>{const i=new di,x=new di,n=new di;function k(W=U().camera,y=x,M=U().size){const{width:k,height:g,top:u,left:e}=M,l=k/g;y instanceof di?n.copy(y):n.set(...y);const G=W.getWorldPosition(i).distanceTo(n);if(VD(W))return{width:k/W.zoom,height:g/W.zoom,top:u,left:e,factor:1,distance:G,aspect:l};{const y=W.fov*Math.PI/180,M=2*Math.tan(y/2)*G,U=M*(k/g);return{width:U,height:M,top:u,left:e,factor:k/U,distance:G,aspect:l}}}let g;const u=W=>M((y=>({performance:{...y.performance,current:W}}))),e=new LU,l={set:M,get:U,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(y=1)=>W(U(),y),advance:(W,M)=>y(W,M,U()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new xc,pointer:e,mouse:e,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const W=U();g&&clearTimeout(g),W.performance.current!==W.performance.min&&u(W.performance.min),g=setTimeout((()=>u(U().performance.max)),W.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:k},setEvents:W=>M((y=>({...y,events:{...y.events,...W}}))),setSize:(W,y,i,n,g)=>{const u=U().camera,e={width:W,height:y,top:n||0,left:g||0,updateStyle:i};M((W=>({size:e,viewport:{...W.viewport,...k(u,x,e)}})))},setDpr:W=>M((y=>{const M=vD(W);return{viewport:{...y.viewport,dpr:M,initialDpr:y.viewport.initialDpr||M}}})),setFrameloop:(W="always")=>{const y=U().clock;y.stop(),y.elapsedTime=0,"never"!==W&&(y.start(),y.elapsedTime=0),M((()=>({frameloop:W})))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:UW.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(W,y,M)=>{const i=U().internal;return i.priority=i.priority+(y>0?1:0),i.subscribers.push({ref:W,priority:y,store:M}),i.subscribers=i.subscribers.sort(((W,y)=>W.priority-y.priority)),()=>{const M=U().internal;null!=M&&M.subscribers&&(M.priority=M.priority-(y>0?1:0),M.subscribers=M.subscribers.filter((y=>y.ref!==W)))}}}};return l})),U=M.getState();let i=U.size,x=U.viewport.dpr,n=U.camera;return M.subscribe((()=>{const{camera:W,size:y,viewport:U,gl:k,set:g}=M.getState();if(y!==i||U.dpr!==x){var u;i=y,x=U.dpr,function(W,y){W.manual||(VD(W)?(W.left=y.width/-2,W.right=y.width/2,W.top=y.height/2,W.bottom=y.height/-2):W.aspect=y.width/y.height,W.updateProjectionMatrix(),W.updateMatrixWorld())}(W,y),k.setPixelRatio(U.dpr);const M=null!=(u=y.updateStyle)?u:"undefined"!=typeof HTMLCanvasElement&&k.domElement instanceof HTMLCanvasElement;k.setSize(y.width,y.height,M)}W!==n&&(n=W,g((y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(W)}}))))})),M.subscribe((y=>W(y))),M};let kr,gr,ur,er=new Set,lr=new Set,Gr=new Set;function Yr(W,y){if(W.size)for(const{callback:M}of W.values())M(y)}function cr(W,y){switch(W){case"before":return Yr(er,y);case"after":return Yr(lr,y);case"tail":return Yr(Gr,y)}}function Dr(W,y,M){let U=y.clock.getDelta();for("never"===y.frameloop&&"number"==typeof W&&(U=W-y.clock.elapsedTime,y.clock.oldTime=y.clock.elapsedTime,y.clock.elapsedTime=W),gr=y.internal.subscribers,kr=0;kr<gr.length;kr++)ur=gr[kr],ur.ref.current(ur.store.getState(),U,M);return!y.internal.priority&&y.gl.render&&y.gl.render(y.scene,y.camera),y.internal.frames=Math.max(0,y.internal.frames-1),"always"===y.frameloop?1:y.internal.frames}function rr(W=W=>W,y){return function(){const W=UW.useContext(xr);if(!W)throw new Error("R3F: Hooks can only be used within the Canvas component!");return W}()(W,y)}function Ar(W,y){return function(M,...U){const i=new M;return W&&W(i),Promise.all(U.map((W=>new Promise(((M,U)=>i.load(W,(W=>{W.scene&&Object.assign(W,function(W){const y={nodes:{},materials:{}};return W&&W.traverse((W=>{W.name&&(y.nodes[W.name]=W),W.material&&!y.materials[W.material.name]&&(y.materials[W.material.name]=W.material)})),y}(W.scene)),M(W)}),y,(y=>U(new Error(`Could not load ${W}: ${y.message}`)))))))))}}function Tr(W,y,M,U){const i=Array.isArray(y)?y:[y],x=((W,y,M)=>KD(W,y,!1,M))(Ar(M,U),[W,...i],{equal:XD.equ});return Array.isArray(y)?x:x[0]}Tr.preload=function(W,y,M){const U=Array.isArray(y)?y:[y];return((W,y)=>{KD(W,y,!0,void 0)})(Ar(M),[W,...U])},Tr.clear=function(W,y){return(W=>{if(void 0===W||0===W.length)mD.splice(0,mD.length);else{const y=mD.find((y=>zD(W,y.keys,y.equal)));y&&y.remove()}})([W,...Array.isArray(y)?y:[y]])};const Or=new Map,{invalidate:hr,advance:Sr}=function(W){let y,M,U,i=!1;function x(n){M=requestAnimationFrame(x,"sandboxIgnore"),i=!0,y=0,cr("before",n);for(const M of W.values()){var k;U=M.store.getState(),!U.internal.active||!("always"===U.frameloop||U.internal.frames>0)||null!=(k=U.gl.xr)&&k.isPresenting||(y+=Dr(n,U))}if(cr("after",n),0===y)return cr("tail",n),i=!1,cancelAnimationFrame(M)}return{loop:x,invalidate:function y(M,U=1){var n;if(!M)return W.forEach((W=>y(W.store.getState())),U);null!=(n=M.gl.xr)&&n.isPresenting||!M.internal.active||"never"===M.frameloop||(M.internal.frames=Math.min(60,M.internal.frames+U),i||(i=!0,requestAnimationFrame(x)))},advance:function(y,M=!0,U,i){if(M&&cr("before",y),U)Dr(y,U,i);else for(const M of W.values())Dr(y,M.store.getState());M&&cr("after",y)}}}(Or),{reconciler:or,applyProps:dr}=function(W,y){function M(W,{args:y=[],attach:M,...U},i){let x,n=`${W[0].toUpperCase()}${W.slice(1)}`;if("primitive"===W){if(void 0===U.object)throw new Error("R3F: Primitives without 'object' are invalid!");x=wD(U.object,{type:W,root:i,attach:M,primitive:!0})}else{const U=PD[n];if(!U)throw new Error(`R3F: ${n} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(y))throw new Error("R3F: The args prop must be an array!");x=wD(new U(...y),{type:W,root:i,attach:M,memoizedProps:{args:y}})}return void 0===x.__r3f.attach&&(x instanceof Tn?x.__r3f.attach="geometry":x instanceof fx&&(x.__r3f.attach="material")),"inject"!==n&&QD(x,U),x}function U(W,y){let M=!1;var U,i;y&&(null!=(U=y.__r3f)&&U.attach?JD(W,y,y.__r3f.attach):y.isObject3D&&W.isObject3D&&(W.add(y),M=!0),M||null==(i=W.__r3f)||i.objects.push(y),y.__r3f||wD(y,{}),y.__r3f.parent=W,yr(y),Wr(y))}function i(W,y,M){let U=!1;if(y){var i,x;if(null!=(i=y.__r3f)&&i.attach)JD(W,y,y.__r3f.attach);else if(y.isObject3D&&W.isObject3D){y.parent=W,y.dispatchEvent({type:"added"});const i=W.children.filter((W=>W!==y)),x=i.indexOf(M);W.children=[...i.slice(0,x),y,...i.slice(x)],U=!0}U||null==(x=W.__r3f)||x.objects.push(y),y.__r3f||wD(y,{}),y.__r3f.parent=W,yr(y),Wr(y)}}function x(W,y,M=!1){W&&[...W].forEach((W=>n(y,W,M)))}function n(W,y,M){if(y){var U,i,n;if(y.__r3f&&(y.__r3f.parent=null),null!=(U=W.__r3f)&&U.objects&&(W.__r3f.objects=W.__r3f.objects.filter((W=>W!==y))),null!=(i=y.__r3f)&&i.attach)jD(W,y,y.__r3f.attach);else if(y.isObject3D&&W.isObject3D){var k;W.remove(y),null!=(k=y.__r3f)&&k.root&&function(W,y){const{internal:M}=W.getState();M.interaction=M.interaction.filter((W=>W!==y)),M.initialHits=M.initialHits.filter((W=>W!==y)),M.hovered.forEach(((W,U)=>{W.eventObject!==y&&W.object!==y||M.hovered.delete(U)})),M.capturedMap.forEach(((W,U)=>{Ur(M.capturedMap,y,W,U)}))}(y.__r3f.root,y)}const u=null==(n=y.__r3f)?void 0:n.primitive,e=void 0===M?null!==y.dispose&&!u:M;var g;u||(x(null==(g=y.__r3f)?void 0:g.objects,y,e),x(y.children,y,e)),delete y.__r3f,e&&y.dispose&&"Scene"!==y.type&&bD.unstable_scheduleCallback(bD.unstable_IdlePriority,(()=>{try{y.dispose()}catch(W){}})),Wr(W)}}const k=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:pD()({createInstance:M,removeChild:n,appendChild:U,appendInitialChild:U,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(W,y)=>{if(!y)return;const M=W.getState().scene;M.__r3f&&(M.__r3f.root=W,U(M,y))},removeChildFromContainer:(W,y)=>{y&&n(W.getState().scene,y)},insertInContainerBefore:(W,y,M)=>{if(!y||!M)return;const U=W.getState().scene;U.__r3f&&i(U,y,M)},getRootHostContext:()=>null,getChildHostContext:W=>W,finalizeInitialChildren(W){var y;const M=null!=(y=null==W?void 0:W.__r3f)?y:{};return Boolean(M.handlers)},prepareUpdate(W,y,M,U){var i;if((null!=(i=null==W?void 0:W.__r3f)?i:{}).primitive&&U.object&&U.object!==W)return[!0];{const{args:y=[],children:i,...x}=U,{args:n=[],children:k,...g}=M;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some(((W,y)=>W!==n[y])))return[!0];const u=CD(W,x,g,!0);return u.changes.length?[!1,u]:null}},commitUpdate(W,[y,i],x,k,g,u){y?function(W,y,i,x){var k;const g=null==(k=W.__r3f)?void 0:k.parent;if(!g)return;const u=M(y,i,W.__r3f.root);if(W.children){for(const y of W.children)y.__r3f&&U(u,y);W.children=W.children.filter((W=>!W.__r3f))}W.__r3f.objects.forEach((W=>U(u,W))),W.__r3f.objects=[],W.__r3f.autoRemovedBeforeAppend||n(g,W),u.parent&&(u.__r3f.autoRemovedBeforeAppend=!0),U(g,u),u.raycast&&u.__r3f.eventCount&&u.__r3f.root.getState().internal.interaction.push(u),[x,x.alternate].forEach((W=>{null!==W&&(W.stateNode=u,W.ref&&("function"==typeof W.ref?W.ref(u):W.ref.current=u))}))}(W,x,g,u):QD(W,i)},commitMount(W,y,M,U){var i;const x=null!=(i=W.__r3f)?i:{};W.raycast&&x.handlers&&x.eventCount&&W.__r3f.root.getState().internal.interaction.push(W)},getPublicInstance:W=>W,prepareForCommit:()=>null,preparePortalMount:W=>wD(W.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(W){var y;const{attach:M,parent:U}=null!=(y=W.__r3f)?y:{};M&&U&&jD(U,W,M),W.isObject3D&&(W.visible=!1),Wr(W)},unhideInstance(W,y){var M;const{attach:U,parent:i}=null!=(M=W.__r3f)?M:{};U&&i&&JD(i,W,U),(W.isObject3D&&null==y.visible||y.visible)&&(W.visible=!0),Wr(W)},createTextInstance:k,hideTextInstance:k,unhideTextInstance:k,getCurrentEventPriority:()=>y?y():qD.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!=typeof performance&&XD.fun(performance.now)?performance.now:XD.fun(Date.now)?Date.now:()=>0,scheduleTimeout:XD.fun(setTimeout)?setTimeout:void 0,cancelTimeout:XD.fun(clearTimeout)?clearTimeout:void 0}),applyProps:QD}}(0,(function(){var W;const y="undefined"!=typeof self&&self||"undefined"!=typeof window&&window;if(!y)return qD.DefaultEventPriority;switch(null==(W=y.event)?void 0:W.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return qD.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return qD.ContinuousEventPriority;default:return qD.DefaultEventPriority}})),qr={objects:"shallow",strict:!1},sr=(W,y)=>{const M="function"==typeof W?W(y):W;return ir(M)?M:new Bu({powerPreference:"high-performance",canvas:y,antialias:!0,alpha:!0,...W})};function Nr(W){const y=Or.get(W),M=null==y?void 0:y.fiber,U=null==y?void 0:y.store;y&&console.warn("R3F.createRoot should only be called once!");const i="function"==typeof reportError?reportError:console.error,x=U||nr(hr,Sr),n=M||or.createContainer(x,qD.ConcurrentRoot,null,!1,null,"",i,null);let k;y||Or.set(W,{fiber:n,store:x});let g,u=!1;return{configure(y={}){let{gl:M,size:U,scene:i,events:n,onCreated:e,shadows:l=!1,linear:G=!1,flat:Y=!1,legacy:c=!1,orthographic:D=!1,frameloop:r="always",dpr:A=[1,2],performance:T,raycaster:O,camera:h,onPointerMissed:S}=y,o=x.getState(),d=o.gl;o.gl||o.set({gl:d=sr(M,W)});let q=o.raycaster;q||o.set({raycaster:q=new Ec});const{params:s,...N}=O||{};if(XD.equ(N,q,qr)||dr(q,{...N}),XD.equ(s,q.params,qr)||dr(q,{params:{...q.params,...s}}),!o.camera||o.camera===g&&!XD.equ(g,h,qr)){g=h;const W=h instanceof Xn,y=W?h:D?new Ok(0,0,0,0,.1,1e3):new wn(75,0,.1,1e3);W||(y.position.z=5,h&&dr(y,h),o.camera||null!=h&&h.rotation||y.lookAt(0,0,0)),o.set({camera:y})}if(!o.scene){let W;i instanceof wu?W=i:(W=new wu,i&&dr(W,i)),o.set({scene:wD(W)})}if(!o.xr){var _;const W=(W,y)=>{const M=x.getState();"never"!==M.frameloop&&Sr(W,!0,M,y)},y=()=>{const y=x.getState();y.gl.xr.enabled=y.gl.xr.isPresenting,y.gl.xr.setAnimationLoop(y.gl.xr.isPresenting?W:null),y.gl.xr.isPresenting||hr(y)},M={connect(){const W=x.getState().gl;W.xr.addEventListener("sessionstart",y),W.xr.addEventListener("sessionend",y)},disconnect(){const W=x.getState().gl;W.xr.removeEventListener("sessionstart",y),W.xr.removeEventListener("sessionend",y)}};"function"==typeof(null==(_=d.xr)?void 0:_.addEventListener)&&M.connect(),o.set({xr:M})}if(d.shadowMap){const W=d.shadowMap.enabled,y=d.shadowMap.type;if(d.shadowMap.enabled=!!l,XD.boo(l))d.shadowMap.type=cW;else if(XD.str(l)){var p;const W={basic:GW,percentage:YW,soft:cW,variance:DW};d.shadowMap.type=null!=(p=W[l])?p:cW}else XD.obj(l)&&Object.assign(d.shadowMap,l);W===d.shadowMap.enabled&&y===d.shadowMap.type||(d.shadowMap.needsUpdate=!0)}const b=fD();b&&("enabled"in b?b.enabled=!c:"legacyMode"in b&&(b.legacyMode=c)),dr(d,{outputEncoding:G?3e3:3001,toneMapping:Y?QW:Uy}),o.legacy!==c&&o.set((()=>({legacy:c}))),o.linear!==G&&o.set((()=>({linear:G}))),o.flat!==Y&&o.set((()=>({flat:Y}))),!M||XD.fun(M)||ir(M)||XD.equ(M,d,qr)||dr(d,M),n&&!o.events.handlers&&o.set({events:n(x)});const m=function(W,y){if(y)return y;if("undefined"!=typeof HTMLCanvasElement&&W instanceof HTMLCanvasElement&&W.parentElement){const{width:y,height:M,top:U,left:i}=W.parentElement.getBoundingClientRect();return{width:y,height:M,top:U,left:i}}return"undefined"!=typeof OffscreenCanvas&&W instanceof OffscreenCanvas?{width:W.width,height:W.height,top:0,left:0}:{width:0,height:0,top:0,left:0}}(W,U);return XD.equ(m,o.size,qr)||o.setSize(m.width,m.height,m.updateStyle,m.top,m.left),A&&o.viewport.dpr!==vD(A)&&o.setDpr(A),o.frameloop!==r&&o.setFrameloop(r),o.onPointerMissed||o.set({onPointerMissed:S}),T&&!XD.equ(T,o.performance,qr)&&o.set((W=>({performance:{...W.performance,...T}}))),k=e,u=!0,this},render(y){return u||this.configure(),or.updateContainer(UW.createElement(_r,{store:x,children:y,onCreated:k,rootElement:W}),n,null,(()=>{})),x},unmount(){(function(W,y){const M=Or.get(W),U=null==M?void 0:M.fiber;if(U){const i=null==M?void 0:M.store.getState();i&&(i.internal.active=!1),or.updateContainer(null,U,null,(()=>{i&&setTimeout((()=>{try{var M,U,x,n;null==i.events.disconnect||i.events.disconnect(),null==(M=i.gl)||null==(U=M.renderLists)||null==U.dispose||U.dispose(),null==(x=i.gl)||null==x.forceContextLoss||x.forceContextLoss(),null!=(n=i.gl)&&n.xr&&i.xr.disconnect(),function(W){W.dispose&&"Scene"!==W.type&&W.dispose();for(const y in W)null==y.dispose||y.dispose(),delete W[y]}(i),Or.delete(W),y&&y(W)}catch(W){}}),500)}))}})(W)}}}function _r({store:W,children:y,onCreated:M,rootElement:U}){return $D((()=>{const y=W.getState();y.set((W=>({internal:{...W.internal,active:!0}}))),M&&M(y),W.getState().events.connected||null==y.events.connect||y.events.connect(U)}),[]),UW.createElement(xr.Provider,{value:W},y)}or.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:UW.version}),UW.unstable_act;const pr=[1,1];var br;(function(W){W["None"]="BoardInteractionType.None",W["Press"]="BoardInteractionType.Press",W["Dragging"]="BoardInteractionType.Dragging",W["Canceled"]="BoardInteractionType.Canceled"})(br||(br={}));var mr=M(982341);const zr=-1,Kr=W=>{const{onRelease:y}=W,{size:M}=rr(),{camera:U}=mr.h(),[i,n]=UW.useState([0,0]);return UW.useEffect((()=>{const W=Math.tan(vU.degToRad(.5*U.fov))*Math.abs(zr-U.position.z)*2,y=W*(M.width/M.height);n([y,W])}),[U.fov,U.position.z,M]),x.jsxs("mesh",{"position-z":zr,"scale-x":i[0],"scale-y":i[1],onPointerUp:y,children:[x.jsx("planeGeometry",{args:pr}),x.jsx("meshBasicMaterial",{transparent:!0,opacity:0})]})};var Pr=M(625756);function Rr(W){const{rect:y,spot:M,output:U}=W,i=y.w,x=y.h,n=i/Pr.YB,k=x/Pr.Ge;let g=y.x-.5*i,u=y.y+.5*x;g+=M[0]*n+.5*n,u+=-(M[1]*k+.5*k),U.set(g,u,0)}const Ir=W=>{const{texture:y,size:M,setRef:U,flipX:i=!1,flipY:n=!1}=W,[k,g]=UW.useState(null),[u,e]=UW.useState(null),l=i?-1:1,G=n?-1:1;return UW.useEffect((()=>{U(k&&u?{mesh:u,material:k}:null)}),[u,k,U]),x.jsx("group",{ref:e,visible:!!y,children:x.jsxs("mesh",{"scale-x":M[0]*l,"scale-y":M[1]*G,children:[x.jsx("planeGeometry",{args:pr}),x.jsx("spriteAnimationMaterial",{ref:g,diffuseTexture:y,side:TW})]})})};var Er=M(604929);function Zr(W,y=null,M=15e3,U=!0,i=3,x=500,n=1.5){return new Promise(((k,g)=>{Er.y(W,y,M,U).then(k).catch((u=>{i<=0?g(u):window.setTimeout((()=>{Zr(W,y,M,U,i-1,x*n,n).then(k).catch(g)}),x)}))}))}function fr(W){const y=UW.useMemo((()=>new Yi),[]);return UW.useEffect((()=>{Zr(W,"anonymous").then((W=>{y.image=W,y.needsUpdate=!0})).catch((()=>{}))}),[W,y]),y}const Vr="data:image/webp;base64,UklGRtoCAABXRUJQVlA4IM4CAAAQKACdASoAAQABPpFGnUqnp6MhptiYwPASCWluu8BOa8O9x21wBNxME5A1Oq+nArJyk6FeHMVKmwbYhk6P+jtgA5EQakW7oD02qhiBRfnqkumF9dAkuDy0jWPA+VV99FFpj/UtWnHfMypdljPHGmkCdxOZbZs+tGX3N9GJFR74MZ41fZFuk/vk4H9Y7ij0j1Aeb2hDYO1vSnAAuJC0of0onKXCwjf1vbQ5Y9f52nR7qJQpEcVvdacBJJWow1xYGq2UNvya+7QLjLnrqd44JoTdhTI1//pCCo5dtJ+fx5p8nZvIRvcbfnFSfreCTn05yMio3VhQfRfA9RqQuBpjwVo1mo9dHqZGeON1MvFB9F8D1M2PcQsx1rdKh1MxGVPyef81S0dRc6aPs2l+YKKLbURTEioNW9A2+gGQ3oSEBK+Trk3fm5RRV2f1yAD+/m4+XOuIwnH/g72NJZq+aMwC4rcvAp8DCeLkZVCpWx7/36LarZx65iVZ/cez4yfkhJ9zgj9vRmAxJZpN1leFzWyZmcm1ztp3/GEpOUtYW+irGrhezkCQB9x+h+wID4LUg5RwTEVo+N5Xd1G9JhctCGFoGAN/yhFRT6Yt4vdMlD+kOgumv6IpnEkjuXTpxYH5uG/DP/7jRMiXQbrhT6wFUhXk7eI9PIl3xvQJdzARGTbP8lX4k1eEHchg5EOHt4aPqwmRs/KjJZ3VhRraO/bIp557NDr0FLbapXyH2f1LBYt6/D+KTLqZZRXrimqkX3zgd3PZpueDL25KxYDCU6zX0+HQBVcjAgGHT9+2YohaK6d7CW1BmZy+0AVBe95JAS7mhAhFa6guSdh/ATegjA0hDG4C/tNqxXUuCqWfXbxzY3Ctalv8vHnkAbMip03MnEAGzJTrV6abAeuLm6p29UZ5oHJqyB7UV0qVXDJcHg4btkkc6jMQq9L8lxDOEK4hC1VAgAAA",$r=M.p+"images/frameanima.141ae5a7.webp",ar=M.p+"images/symbollill.4b5e308b.webp",Hr=M.p+"images/symbolwhit.8fc83788.webp",Br=W=>{const{cellSize:y,frameSize:M,setRef:U}=W,i=fr(Vr),n=fr($r),k=fr(ar),g=fr(Hr),[u,e]=UW.useState(null),[l,G]=UW.useState(null),[Y,c]=UW.useState(null),[D,r]=UW.useState(null),[A,T]=UW.useState(null),[O,h]=UW.useState(null),[S,o]=UW.useState(null),[d,q]=UW.useState(null);return UW.useEffect((()=>{u&&Y&&D&&d&&A&&O&&S&&l&&U({container:u,innerContainer:l,background:{mesh:O,material:S},icon:{mesh:Y,material:D},iconWhite:{mesh:Y,material:A},frame:d})}),[S,O,u,l,d,D,Y,A,U]),x.jsxs("group",{ref:e,children:[x.jsx("group",{ref:h,children:x.jsxs("mesh",{"scale-x":y,"scale-y":y,children:[x.jsx("planeGeometry",{args:pr}),x.jsx("meshBasicMaterial",{ref:o,map:i,depthTest:!1,depthWrite:!1,transparent:!0})]})}),x.jsxs("group",{ref:G,children:[x.jsx(Ir,{size:[M,M],texture:n,setRef:q}),x.jsxs("group",{ref:c,children:[x.jsxs("mesh",{"scale-x":y,"scale-y":y,children:[x.jsx("planeGeometry",{args:pr}),x.jsx("meshBasicMaterial",{ref:r,map:k,depthTest:!1,depthWrite:!1,transparent:!0})]}),x.jsxs("mesh",{"scale-x":y,"scale-y":y,children:[x.jsx("planeGeometry",{args:pr}),x.jsx("meshBasicMaterial",{ref:T,map:g,depthTest:!1,depthWrite:!1,transparent:!0})]})]})]})]})},vr="data:image/webp;base64,UklGRjwJAABXRUJQVlA4WAoAAAAQAAAAPgAAPgAAQUxQSBkEAAAN8GvbtrFt27a1Pk4cuGzbtm0bKc/oUoR1YHbdvjPbtm3b9mmUso8WbAf2fVuCiJgAph+WNGBkzDEMJYCxOoBjSccMEkMQMRrAWcVADIkJSATDJFGJM4lUh7IMhQmA0KQFNDgDIgWUFUg1SQdBkQY0OKUAAYoEilDSZWiAFlWQ6YeySFEhhoBpSu00ijSAq8ugYoWiIAkmICjSNDYdxLgqYkFSVEISktBlpKOiLdpGOq4sQEhIVUiK7HfaaYfP7T23a+PWv/72x39RpW2RCaRZZUwSqqykMnfnGXux5Nxeex5+4ll86of/tGm6Na3BlUTKJJWsITV32xWs9qjbTv3JBzY3rbZCE1cAoUglReqsh5jm4k1Xf+BbjfZAaVYYQookqYV7DmXKB27497t22bS2gMvFskIqlcXnmOG9l7y0pVUbXS4YkqSo7PEsMz1xwwvb2260CQ4ggSRZw/pnmPGRjz+/w2YCSMdBsBLWxHqQmR97yftU20ZkaJEkVF247+y4788/7E4riIMyCVnDnncwxqfftN1uaCMQTEiF3Mwo973yY0pjMzShCMmB54yD2760QxEVCJZJijMZ6V7Xf0haIwiusQjhhrFw3g/pqAIBYhIOZ7QnbvwP0oAMkxhOHw9n/yhNVIaBxBwzojN/qoIRCEDiYSM6+o+WghGIAbL7iBZ2IsjSVgT2HNGemwfEJcCYrB/RwnZKEDERiO6cH8/O9TESIBoE2Lj3eDbuPQmFBIyAYcfCeDbtVgYTMSDQ/OXI8fz50AiFARA0/vis8fzqWAogAB0U+cmIvn96LAIB0gL6n40njuX3OYxQFgSMKvrjc8fy0euKwiIIiCh+4Ia9xrHtp2cRkrBso7Q7v3TbOD50zoEZkAACSoMfu3KfMfzzq1dBiiIs2VSr7ba3PDWGN163e1URQpaASZpWv/+3e2f33v0vpEKRyNCItGq/99JjZ/Wrr12ZIkmZOABUYaI7nn/8yNn88Q1XzSVFxTWyrAjdqtte3HDCLH776mv2sJKKa8gyElqa1t788qX3TO+9X71moYo1JsUKoINNa+Oud/5nw4HT+e8rB185V0mxJiS4gihM0jqR/tYHrrp5cXUbP/K5687NsEIRwgo1dNoWm978wR+fdsvRK/vldz595ZVzSSqhirDqDkq3DRP+8cNPc+YJR+y519z2Tdv++IPv733GFfOpUEklkKzGdJqGCd3pTPjLT377ly2bds3vvnD46afvW7EyrIRQrgYzqUaZ0Cp2jJhICBkWRUiYphFpaJfEiASgGFAJBQGngICi2IiKhZBAhmYNJsh0DZ1GpFEwXRKAIqFiEWTaGkVBRAQJJLGgGEZmKMNGwTAgmMQQEpEZCwiSiVBIgITISGVJDUqZADJuQRDTIJFpAwBWUDgg/AQAABAXAJ0BKj8APwA+kUKaSSWkIqEsFVmYsBIJZQDOe7MO936J4b8YDkdNFvzfDbtV737MZ4Q/8/x36VzMl/tH+Z9UX/W8zH0v/uPcE/kX87/0v9s7Ov7Y+xl+oy2Z1i2eXm+xCj4fs2XJkHBOh/jP09rx8Bo+ogL5eVVMlaz1OZOvUOiYBXwpNQXjPhHrH+mfntewiM6iEyHM6IX9NZR6MI/dwMoP/7gZttNDp9YoH0faOkVg6XMwh0WWcMCoOk/DaEAA/v858/PfdKfHWMkZw1PH2uY18OJooaZvRYgb4f8wOCveX8uPOeXds1Z49AcAnUIkZazmrNKRC1nRDXjq0uaV4zpefcl9i7o+S/zF66dYYow8ziWBiXx414B+UQG8CRC2RBKMBC1FnX/GjjExoGknmBAhMS/ycIKHu2CW2Y/xPjGE/SHtHCaiC8CT9LC02R9yoPfkw7flpF4JJOe3Al80v99tBdXyGNSq6RmRlvdSrJC+UGFQkII6f+D8e84MgeK70O7q6YD64M1Ul3zz7OQajnHQjAIx+BmT9lnizxmznschaQb6DzcIl0ojLEKNCdh1TgTMVP29xW05Si0jMjZjlc/lmzfptmP/9y424/FdrYFqqGW0nzF9wUQq7u/4x+0ng1nneQ9dDyX7ppA24n0h8ktJu/+Wtev5yBw742vBZGZHo1/on2UX2hTwUGMaF8UZOUDwk8qJjw5jIHGTyFYteSV9CQcdCg7nRrqJNEffzXly9k1Svr9bj9bFTsR81cBgxOVJjd3Q4/+79h/kRg1BMyUrEl/ikg5afOCWh1/YJpDGpZNPP0jSG7l3chUi5b/jgBO3QsrPYKCiyf6rvQAZ0MWbzXYhk0QbRc84YVxhsHh7MFflMiq8anZLL0vyyuuzOEcRZ8ICwV5pBczs+TluAZpTFBHfIfu0koTy67ifn+4Y4vdh54kQWbFOBjJQviEJav0udkIP2IdTvLJFqZ6mDseAL1c7mVRCDIluX9c+ES7N+V7RZJExZbh3QwDXtVxOWkvAR11/kgSpRlWlflf9j10xWGnGYtItX+rYgE9N91hf0mcqDFjgcc89JdGyMzFTr9z/kQfWgtB1lpwNUc4C0YF5NaIIyMXIfKcZwHimNJ/lWSdHnD97d0WW35EFL/UUaYN3VeBkWn5N71OBRGvtGZKaSbI2IR6V78DkR++6r4OiRt/4ZsYjrqLl8NNUgbNTlpcEVtVmn/X2i48nYP7YvHrAfkWIqkWyHKFuaDVmTCaKFy/4aSU7mWT4o0610hpFLqBfM3vnG5P4Cwg2oj6R/JBBPzKPSRyxppBTajmtm5cLKfltomxa05O8J+HG1GtvKrc+b2/zgkFNtCOv+8JwkjGxpcHaP8ub/gaegVd46qoy1TtzNkRIyB6Pr/7OD/z30GcOW0CupgcwHtz2hb/apNQGHejIP8Jk8pe4hk8yVfTrIsochI2Y38fdYNzOkO30rxRkb+oJ+V30kho4DqZZR9WlKkrN3/LTMu3h+gWc7aI4xN1RoKSBI/u6PKBN7DYDl0w8HgoUYaHXa5liw37wenS8F5/jlLte49SUzRBL9Jt1sAeU+x1c5S8wS9N/UtxVaz4BK3TiylYFCYIb+pXhQIQKa8bmWR1MHiPDX5TjlIg/bP9//z0BiZSCaH9sD746vIKftZw59YQ4v2qiAa3au+Toh0q/JcAAAAA=",Lr=M.p+"images/rivet.27a30aa2.webp",Xr=W=>{const{size:y,setRef:M,positionY:U=0}=W,i=2.5*y,n=fr(vr),k=fr(Lr),[g,u]=UW.useState(null),[e,l]=UW.useState(null),[G,Y]=UW.useState(null),[c,D]=UW.useState(null);return UW.useEffect((()=>{g&&e&&G&&c&&M({knob:{mesh:g,material:e},glow:{mesh:G,material:c}})}),[M,e,g,G,c]),x.jsxs("group",{"position-y":U,children:[x.jsx("group",{ref:u,children:x.jsxs("mesh",{"scale-x":y,"scale-y":y,children:[x.jsx("planeGeometry",{args:pr}),x.jsx("meshBasicMaterial",{ref:l,map:n,transparent:!0})]})}),x.jsx("group",{ref:Y,children:x.jsxs("mesh",{"scale-x":i,"scale-y":i,children:[x.jsx("planeGeometry",{args:pr}),x.jsx("meshBasicMaterial",{ref:D,map:k,transparent:!0})]})})]})},wr=M.p+"images/lineanimat.8ea98beb.webp",Fr=W=>{const{length:y,width:M,setRef:U,rotation:i=0}=W,n=fr(wr),k=1.9*M,[g,u]=UW.useState(null),[e,l]=UW.useState(null),[G,Y]=UW.useState(null),[c,D]=UW.useState(null),[r,A]=UW.useState(null);return UW.useEffect((()=>{c&&r&&g&&e&&G&&U({container:g,topKnob:c,bottomKnob:r,topLine:e,bottomLine:G})}),[r,g,e,G,U,c]),x.jsxs("group",{ref:u,"rotation-z":i,children:[x.jsx("group",{"position-y":.25*y,children:x.jsx(Ir,{size:[M,.5*y],texture:n,setRef:l})}),x.jsx("group",{"position-y":.75*y,children:x.jsx(Ir,{size:[M,.5*y],texture:n,setRef:Y,flipY:!0})}),x.jsx(Xr,{size:k,setRef:D}),x.jsx(Xr,{size:k,positionY:y,setRef:A})]})},tr=new di,Jr=W=>{const{selection:y,wallRect:M,wallBorderRect:U,setRef:i}=W,n=M.w/Pr.YB,k=1.2*n,[g,u]=UW.useState(null),[e,l]=UW.useState(null),[G,Y]=UW.useState(null),[c,D]=UW.useState(null);UW.useEffect((()=>{g&&e&&G&&(Rr({rect:{...M,x:0,y:0},spot:y,output:tr}),G.container.position.x=tr.x,G.container.position.y=tr.y,g.container.position.y=-(.5*U.h+Math.abs(M.y-U.y)),g.container.position.x=tr.x,e.container.position.x=-(.5*U.w+Math.abs(M.x-U.x)),e.container.position.y=tr.y)}),[g,e,y,M,U,G]),UW.useEffect((()=>{g&&e&&G&&c&&i({container:c,verticalLine:g,horizontalLine:e,aim:G})}),[G,c,e,i,g]);const r=.065*M.w;return x.jsxs("group",{ref:D,children:[x.jsx(Fr,{setRef:u,length:U.h,width:r}),x.jsx(Fr,{setRef:l,length:U.w,width:r,rotation:vU.degToRad(-90)}),x.jsx(Br,{setRef:Y,cellSize:n,frameSize:k})]})},jr=M.p+"images/inactiveba.a69088b9.webp",Cr=[Math.round(.5*Pr.YB),Math.round(.5*Pr.Ge)],Qr=W=>{const{wallRect:y,wallBorderRect:M,onEnter:U,onLeave:i,onMove:n,onPress:k,onRelease:g,aimPosition:u,setFrameRef:e,setBoardRef:l}=W,[G,Y]=UW.useState(null),[c,D]=UW.useState(null),r=fr(jr);return UW.useEffect((()=>{G&&c&&l({mesh:G,material:c})}),[c,G,l]),x.jsxs("group",{"position-x":y.x,"position-y":y.y,children:[x.jsxs("mesh",{ref:Y,onPointerMove:n,onPointerEnter:U,onPointerLeave:i,onPointerUp:g,onPointerDown:k,onPointerCancel:g,"scale-x":y.w,"scale-y":y.h,children:[x.jsx("planeGeometry",{args:pr}),x.jsx("boardMaterial",{ref:D,cellBgTexture:r})]}),x.jsx(Jr,{setRef:e,selection:null!=u?u:Cr,wallRect:y,wallBorderRect:M})]})};var WA;(function(W){W["Auto"]="AimState.Auto",W["Move"]="AimState.Move",W["Selected"]="AimState.Selected"})(WA||(WA={}));var yA=M(234341),MA=M(384511),UA=M(253796),iA=M(73682),xA=M(315049);function nA(W){const{ticker:y,...M}=W;return xA.l({...M,ticker:y.onFrame})}const kA={0:UA.PZ.HotSpotPlacedAuto0,1:UA.PZ.HotSpotPlacedAuto1,2:UA.PZ.HotSpotPlacedAuto2,3:UA.PZ.HotSpotPlacedAuto3,4:UA.PZ.HotSpotPlacedAuto4,5:UA.PZ.HotSpotPlacedAuto5,6:UA.PZ.HotSpotPlacedAuto6,7:UA.PZ.HotSpotPlacedAuto7,8:UA.PZ.HotSpotPlacedAuto8,9:UA.PZ.HotSpotPlacedAuto9,10:UA.PZ.HotSpotPlacedAuto10,11:UA.PZ.HotSpotPlacedAuto11};var gA=M(266600),uA=M(607439);function eA(W){const y=pr[0],M=pr[1],U=W.x+.5*y,i=1-(W.y+.5*M),x=y/Pr.YB,n=M/Pr.Ge;return[uA.A(Math.floor(U/x),0,Pr.YB-1),uA.A(Math.floor(i/n),0,Pr.Ge-1)]}const lA=-1;function GA(W){return W.current.type===br.None}function YA(W){return W.current.type===br.Dragging}function cA(W){W.current.type=br.None,W.current.pointerId=lA}var DA,rA=M(541211);function AA(W,y,M){return function(W,y,M,U){M.updateMatrixWorld(!0);const i=new di,x=new di;i.set(W/U.width*2-1,-y/U.height*2+1,.5),i.unproject(M),i.sub(M.position).normalize();const n=-M.position.z/i.z;return x.copy(M.position).add(i.multiplyScalar(n)),x}(W.x,W.y,y,M)}function TA(W){const{wallRect:y,camera:M}=W,{size:U}=rr();return UW.useMemo((()=>function(W,y,M){const U=AA(new LU(W.x,W.y),y,M),i=AA(new LU(W.x+W.w,W.y),y,M),x=AA(new LU(W.x,W.y+W.h),y,M),n=Math.abs(U.x-i.x),k=Math.abs(U.y-x.y);return{x:U.x+.5*n,y:U.y-.5*k,w:n,h:k}}(y,M,U)),[M,y,U])}(function(W){W["Initial"]="Initial",W["Intro"]="Intro",W["Decision"]="Decision",W["DecisionEnd"]="DecisionEnd",W["MultiplierReveal"]="MultiplierReveal",W["MultiplierDouble"]="MultiplierDouble"})(DA||(DA={}));const OA={0:UA.PZ.HotSpotPlaced0,1:UA.PZ.HotSpotPlaced1,2:UA.PZ.HotSpotPlaced2,3:UA.PZ.HotSpotPlaced3,4:UA.PZ.HotSpotPlaced4,5:UA.PZ.HotSpotPlaced5,6:UA.PZ.HotSpotPlaced6,7:UA.PZ.HotSpotPlaced7,8:UA.PZ.HotSpotPlaced8,9:UA.PZ.HotSpotPlaced9,10:UA.PZ.HotSpotPlaced10,11:UA.PZ.HotSpotPlaced11};var hA=M(276111),SA=M(769413),oA=M(625915);const dA=new di(0,0,0),qA=new di(1,1,1);var sA=M(583233);function NA(W,y){return Object.keys(W.frames).sort().map((M=>function(W,y,M,U=.5){const{x:i,y:x,width:n,height:k}=W;return new ci((i+U)/y,1-(x+U)/M,(n-2*U)/y,(k-2*U)/M)}(W.frames[M],W.meta.size.width,W.meta.size.height,y)))}var _A=M(164956),pA=M(833141);const bA=new ci;function mA(W){const{frames:y,element:M,duration:U}=W,i={frame:0},x=y.length-1;return pA.D(i).animateTo({frame:x},U,void 0,(()=>{const W=Math.round(i.frame),U=y[W];W>=x||0===x||(M.frame=U)})).onDispose((()=>{M.frame=bA}))}const zA=NA(JSON.parse('{"frames":{"frame_000":{"x":0,"y":0,"width":175,"height":175},"frame_001":{"x":175,"y":0,"width":175,"height":175},"frame_002":{"x":0,"y":175,"width":175,"height":175},"frame_003":{"x":175,"y":175,"width":175,"height":175},"frame_004":{"x":350,"y":0,"width":175,"height":175},"frame_005":{"x":0,"y":350,"width":175,"height":175},"frame_006":{"x":175,"y":350,"width":175,"height":175},"frame_007":{"x":350,"y":175,"width":175,"height":175},"frame_008":{"x":350,"y":350,"width":175,"height":175},"frame_009":{"x":525,"y":0,"width":175,"height":175},"frame_010":{"x":0,"y":525,"width":175,"height":175},"frame_011":{"x":175,"y":525,"width":175,"height":175},"frame_012":{"x":525,"y":175,"width":175,"height":175},"frame_013":{"x":350,"y":525,"width":175,"height":175},"frame_014":{"x":525,"y":350,"width":175,"height":175},"frame_015":{"x":700,"y":0,"width":175,"height":175},"frame_016":{"x":0,"y":700,"width":175,"height":175},"frame_017":{"x":175,"y":700,"width":175,"height":175},"frame_018":{"x":700,"y":175,"width":175,"height":175}},"meta":{"size":{"height":1024,"width":1024}}}'));function KA(W){const{element:y}=W,{container:M,innerContainer:U,frame:i,icon:x,iconWhite:n,background:k}=y,g=yA.M();return U.scale.setScalar(2.5),M.visible=!1,i.material.opacity=0,g.parallel([PA(M,U),RA(i),IA(x,n),EA(k)]),g}function PA(W,y){return SA.M(y).delay(sA.J1-sA.Qo).callback((()=>{W.visible=!0})).animateTo({scale:qA},sA.wZ-sA.J1,hA.ME)}function RA(W){const{material:y,mesh:M}=W;return yA.M().delay(sA.J1-sA.Qo).parallel([SA.M(y).animateTo({opacity:1},sA.wZ-sA.J1,hA.ME),oA.$(mA({duration:zA.length/_A.J_,frames:zA,element:y})),oA.$(SA.M(M).delay(sA.J1-sA.Qo).animateTo({scale:new di(1.15,1.15,1.15)},sA.Dm-sA.J1,hA.ME).animateTo({scale:qA},sA.K9-sA.Dm,hA.ME))])}function IA(W,y){return yA.M().parallel([SA.M(W.material).delay(sA.Xf-sA.Qo).animateTo({opacity:0},sA.cU-sA.Xf,hA.ME).delay(sA.Mg-sA.cU).animateTo({opacity:1},sA.DH-sA.Mg,hA.ME).animateTo({opacity:0},sA.wZ-sA.DH,hA.ME).delay(sA.TU-sA.wZ).animateTo({opacity:1},sA.wK-sA.TU,hA.ME).animateTo({opacity:0},sA.FK-sA.wK,hA.ME).animateTo({opacity:1},sA.K0-sA.FK,hA.ME).delay(sA.Dm-sA.K0).animateTo({opacity:0},sA.Dv-sA.Dm,hA.ME),SA.M(y.material).delay(sA.Dm-sA.Qo).animateTo({opacity:1},sA.Dv-sA.Dm,hA.ME)])}function EA(W){return SA.M(W.material).delay(sA.QD-sA.Qo).animateTo({opacity:1},.1,hA.ME)}function ZA(W){const{element:y}=W,{material:M,mesh:U}=y;return U.visible=!0,M.opacity=0,SA.M(M).delay(sA.QD-sA.Qo).animateTo({opacity:1},.1,hA.ME)}function fA(W){const{knob:y,delay:M}=W,U=yA.M();return U.delay(M),U.parallel([VA({element:y.knob}),$A({element:y.glow})]),U}function VA(W){const{element:y}=W,{mesh:M,material:U}=y;return M.scale.copy(dA),U.opacity=1,SA.M(M).animateTo({scale:qA},sA.X2-sA.Qo,hA.ED)}function $A(W){const{element:y}=W,{mesh:M,material:U}=y;U.opacity=0,M.scale.copy(qA);const i=SA.M(U).animateTo({opacity:.25},sA.X2-sA.Qo,hA.$g).animateTo({opacity:.42},sA.QJ-sA.X2,hA.$g).animateTo({opacity:.75},sA.Xl-sA.QJ,hA.$g).animateTo({opacity:.53},sA.Qi-sA.Xl,hA.$g).animateTo({opacity:1},sA.QD-sA.Qi,hA.$g).animateTo({opacity:.7},sA.cU-sA.QD,hA.$g).animateTo({opacity:0},sA.wZ-sA.cU,hA.$g),x=SA.M(M.rotation).animateTo({z:vU.degToRad(15)},sA.wZ-sA.Qo,hA.ED),n=new di(1.1,1.1,1.1),k=SA.M(M).delay(sA.QJ-sA.Qo).animateTo({scale:n},sA.Xl-sA.QJ,hA.$g).animateTo({scale:qA},sA.Qi-sA.Xl,hA.$g).animateTo({scale:n},sA.QD-sA.Qi,hA.$g).animateTo({scale:qA},sA.cU-sA.QD,hA.$g);return yA.M().parallel([i,x,k])}const aA=NA(JSON.parse('{"frames":{"frame_031":{"x":0,"y":0,"width":70,"height":710},"frame_032":{"x":70,"y":0,"width":70,"height":710},"frame_033":{"x":140,"y":0,"width":70,"height":710},"frame_034":{"x":210,"y":0,"width":70,"height":710},"frame_035":{"x":280,"y":0,"width":70,"height":710},"frame_036":{"x":350,"y":0,"width":70,"height":710},"frame_037":{"x":420,"y":0,"width":70,"height":710},"frame_038":{"x":490,"y":0,"width":70,"height":710},"frame_039":{"x":560,"y":0,"width":70,"height":710},"frame_040":{"x":630,"y":0,"width":70,"height":710},"frame_041":{"x":700,"y":0,"width":70,"height":710},"frame_042":{"x":770,"y":0,"width":70,"height":710},"frame_043":{"x":840,"y":0,"width":70,"height":710},"frame_044":{"x":910,"y":0,"width":70,"height":710},"frame_045":{"x":980,"y":0,"width":70,"height":710},"frame_046":{"x":1050,"y":0,"width":70,"height":710}},"meta":{"size":{"height":1024,"width":2048}}}'));function HA(W){const{element:y}=W,{mesh:M,material:U}=y,i=yA.M();return U.opacity=0,M.scale.x=0,i.delay(sA.QD-sA.Qo).parallel([SA.M(U).animateTo({opacity:1},sA.cU-sA.QD,hA.ME),SA.M(M.scale).animateTo({x:1},sA.cU-sA.QD,hA.ME),oA.$(mA({duration:aA.length/_A.J_,frames:aA,element:U}))]),i}var BA=M(965804);function vA(W){const{frame:y}=W,{material:M,mesh:U}=y;return yA.M().callback((()=>{M.opacity=0,U.scale.setScalar(1),U.visible=!0})).parallel([SA.M(M).animateTo({opacity:1},BA.X2-BA.Qo,hA.dV).delay(BA.Xl-BA.X2).animateTo({opacity:0},BA.Qi-BA.Xl,hA.dV),SA.M(U).animateTo({scale:new di(1.3,1.3,1.3)},BA.X2-BA.Qo,hA.dV).delay(BA.QJ-BA.X2).animateTo({scale:qA},BA.Xl-BA.QJ,hA.dV)]).callback((()=>{U.visible=!1}))}function LA(W){const{multiplier:y}=W;return yA.M().callback((()=>{y.flash=0,y.scale=1,y.opacity=1})).parallel([SA.M(y).animateTo({scale:1.7},BA.X2-BA.Qo,hA.dV).delay(BA.QJ-BA.X2).animateTo({scale:1},BA.Xl-BA.QJ,hA.dV),SA.M(y).animateTo({flash:1},BA.X2-BA.Qo,hA.dV).delay(BA.QJ-BA.X2).animateTo({flash:0},BA.Xl-BA.QJ,hA.dV)])}function XA(W){const{multiplier:y}=W;return yA.M().callback((()=>{y.opacity=0,y.flash=1,y.scale=1.7})).parallel([SA.M(y).delay(BA.X2-BA.Qo).animateTo({opacity:1},BA.QJ-BA.X2,hA.dV),SA.M(y).delay(BA.X2-BA.Qo).animateTo({scale:1},BA.QJ-BA.X2,hA.dV),SA.M(y).delay(BA.QJ-BA.Qo).animateTo({flash:0},BA.Qi-BA.QJ,hA.dV)])}const wA=0,FA=.233,tA=.467,JA=.633,jA=1.233;function CA(W){const{frame:y,iconWhite:M}=W;return y.mesh.scale.setScalar(1),yA.M().parallel([SA.M(y.mesh).animateTo({scale:new di(1.3,1.3,1.3)},FA-wA,hA.ME).animateTo({scale:qA},tA-FA,hA.ME),SA.M(y.material).delay(FA-wA).animateTo({opacity:0},tA-FA,hA.ME),SA.M(M.material).delay(FA-wA).animateTo({opacity:0},JA-FA,hA.ME),SA.M(M.mesh).delay(FA-wA).animateTo({scale:new di(.8,.8,.8)},JA-FA,hA.ME)])}function QA(W){return W.mesh.scale.setScalar(1),W.material.opacity=1,yA.M().parallel([SA.M(W.mesh.scale).animateTo({x:2},FA-wA,hA.ME),SA.M(W.material).delay(FA-wA).animateTo({opacity:0},tA-FA,hA.ME)])}function WT(W){return yA.M().parallel([SA.M(W.knob.material).delay(FA-wA).animateTo({opacity:0},tA-FA,hA.ME)])}const yT=M.p+"images/rayswithse.1954d963.webp",MT=W=>{const{size:y,setRef:M}=W,U=fr(yT),[i,n]=UW.useState(null),[k,g]=UW.useState(null);return UW.useEffect((()=>{i&&k&&M({mesh:i,material:k})}),[k,i,M]),x.jsx("group",{ref:n,children:x.jsxs("mesh",{"scale-x":y,"scale-y":y,children:[x.jsx("planeGeometry",{args:pr}),x.jsx("meshBasicMaterial",{ref:g,map:U,depthTest:!1,depthWrite:!1,transparent:!0})]})})},UT=M.p+"images/goldenbord.b318d8df.webp",iT=W=>{const{size:y,active:M,setRef:U}=W,i=fr(UT),[n,k]=UW.useState(null),[g,u]=UW.useState(null);return function(W){const{active:y,ref:M}=W,{loop:U}=mr.h();UW.useEffect((()=>{if(!M||!y)return;M.glowPositionY=0;const W=oA.$(SA.M(M).animateTo({glowPositionY:1},BA.QJ-BA.Qo).delay(1.5)),i=nA({anim:W,ticker:U});return()=>{W.fastForward(),M.glowPositionY=0,i()}}),[y,U,M])}({active:M,ref:g}),UW.useEffect((()=>{n&&g&&U({mesh:n,material:g})}),[g,n,U]),x.jsx("group",{ref:k,children:x.jsxs("mesh",{"scale-x":y,"scale-y":y,children:[x.jsx("planeGeometry",{args:pr}),x.jsx("borderMaterial",{ref:u,diffuseTexture:i})]})})},xT=M.p+"images/rays.d5a5aaf3.webp",nT=W=>{const{size:y,setRef:M}=W,U=fr(xT),[i,n]=UW.useState(null),[k,g]=UW.useState(null);return UW.useEffect((()=>{i&&k&&M({mesh:i,material:k})}),[k,i,M]),x.jsx("group",{ref:n,children:x.jsxs("mesh",{"scale-x":y,"scale-y":y,children:[x.jsx("planeGeometry",{args:pr}),x.jsx("meshBasicMaterial",{ref:g,map:U,depthTest:!1,depthWrite:!1,transparent:!0})]})})},kT=new di,gT=W=>{const{rect:y,selection:M,setRef:U,isBorderGlowActive:i}=W,n=y.w/Pr.YB,[k,g]=UW.useState(null),[u,e]=UW.useState(null),[l,G]=UW.useState(null),[Y,c]=UW.useState(null);return UW.useEffect((()=>{k&&M&&(Rr({rect:y,spot:M,output:kT}),k.position.copy(kT))}),[k,y,M]),UW.useEffect((()=>{l&&u&&Y&&k&&U({container:k,border:u,appearOverlay:l,multipleirOverlay:Y})}),[l,u,k,Y,U]),x.jsxs("group",{ref:g,children:[x.jsx(iT,{size:n,active:i,setRef:e}),x.jsx(MT,{size:1.65*n,setRef:G}),x.jsx(nT,{size:1.65*n,setRef:c})]})};function uT(W){const y=Pr.yi[W[1]],M=Pr.Ky[W[0]];if(y&&M)return`${y}${M}`}var eT=M(980733),lT=M(521353);const GT=W=>{const{visible:y,isDecision:M,selected:U,wallRect:i,wallBorderRect:n,onSelect:k,uiPhase:g,onIntroReady:u,multiplierRef:e,isBorderGlowActive:l,onAutoSelect:G,setIsHovering:Y,playSound:c}=W,D=mr.h(),[r,A]=function(){const[W,y]=UW.useState(null);return[W,UW.useCallback((W=>{W&&(W.visible=!1),y(W)}),[])]}(),[T,O,h]=iW.K(null),[S,o]=UW.useState(null),d=UW.useRef(M),[q,s]=iW.K(null);d.current=M;const[N,_,p]=iW.K(U?WA.Selected:WA.Auto),b=UW.useRef({type:br.None,pointerId:lA}),[m,z,K]=iW.K(U),P=UW.useRef({}),R=TA({wallRect:i,camera:D.camera}),I=TA({wallRect:n,camera:D.camera});UW.useRef(R).current=R,function(W){const{selected:y,setAimPosition:M,currentSelection:U,setAimState:i}=W;UW.useEffect((()=>{y&&!gA.A(y,U.current)&&(M(y),i(WA.Selected))}),[U,y,M,i])}({selected:U,setAimPosition:z,currentSelection:K,setAimState:_});const E=function(W){const{aimStateRef:y,setAimState:M,setAimPosition:U}=W;return UW.useCallback((W=>{y.current!==WA.Selected&&M(WA.Selected),U(W)}),[y,U,M])}({aimStateRef:p,setAimState:_,setAimPosition:z}),Z=function(W){const{setAimPosition:y,onSelect:M,playSound:U}=W;return UW.useCallback((W=>{U({event:OA[W[1]],args:[W[0]]}),y(W),M(W,rA.K.Click)}),[M,y,U])}({onSelect:k,setAimPosition:E,playSound:c}),f=function(W){const{boardRef:y,enabledRef:M,aimStateRef:U,interaction:i,setAimPosition:x}=W;return UW.useCallback((W=>{if(!y.current||!M.current)return;const n=eA(y.current.mesh.worldToLocal(W.point.clone()));(U.current===WA.Move||U.current===WA.Selected&&YA(i))&&x(n)}),[U,y,M,i,x])}({boardRef:h,enabledRef:d,aimStateRef:p,interaction:b,setAimPosition:z}),{onEnterCallback:V,onLeaveCallback:$}=function(W){const{aimStateRef:y,setAimState:M,enabledRef:U,setIsHovering:i}=W;return{onEnterCallback:UW.useCallback((()=>{U.current&&(i(!0),y.current!==WA.Selected&&M(WA.Move))}),[y,U,M,i]),onLeaveCallback:UW.useCallback((()=>{i(!1),U.current&&y.current!==WA.Selected&&M(WA.Auto)}),[y,U,M,i])}}({enabledRef:d,aimStateRef:p,setAimState:_,setIsHovering:Y}),{onPressCallback:a,onReleaseCallback:H,onReleaseOutsideCallback:B}=function(W){const{boardRef:y,enabledRef:M,interaction:U,onSelect:i,currentSelection:x}=W;return{onPressCallback:UW.useCallback((W=>{if(!M.current||U.current.type!==br.None||!y.current)return;const i=y.current.mesh.worldToLocal(W.point);x.current&&gA.A(eA(i),x.current)?U.current.type=br.Dragging:U.current.type=br.Press,U.current.pointerId=W.pointerId}),[y,x,M,U]),onReleaseCallback:UW.useCallback((W=>{if(GA(U)||U.current.pointerId!==W.pointerId)return;const x=function(W){return W.current.type===br.Canceled}(U);if(cA(U),!y.current||!M.current||x)return;const n=eA(y.current.mesh.worldToLocal(W.point));i(n,rA.K.DragAndDrop)}),[y,M,U,i]),onReleaseOutsideCallback:UW.useCallback((W=>{GA(U)||U.current.pointerId!==W.pointerId||(YA(U)&&x.current&&i(x.current,rA.K.DragAndDrop),cA(U))}),[x,U,i])}}({boardRef:h,enabledRef:d,interaction:b,onSelect:Z,currentSelection:K});return function(W){const{active:y,onSelect:M,loop:U,rect:i,playSound:x,onAutoSelect:n}=W,[k,g]=UW.useState(!1),u=UW.useRef([0,0]),e=UW.useRef(),l=UW.useCallback((()=>{g(!0)}),[]),G=UW.useCallback((()=>{g(!1)}),[]);UW.useEffect((()=>{if(!y||k||0===i.w||0===i.h)return;iA.a(e.current);const W=yA.M().callback(l).delay(1).callback((()=>{const W=function(W){let y=MA.U4(0,Pr.YB-2),M=MA.U4(0,Pr.Ge-2);W&&y===W[0]&&y++,W&&M===W[1]&&M++;const U=void 0||[y,M];return U[0]=y,U[1]=M,U}(u.current);n(M,W),x({event:kA[W[1]],args:[W[0]]}),M(W)})).callback((()=>{G()}));e.current={timeline:W,dispose:nA({anim:W,ticker:U})}}),[y,M,k,U,G,l,i,n,x]),UW.useEffect((()=>{!y&&e.current&&(iA.a(e.current),e.current=void 0,g(!1))}),[y])}({rect:R,onSelect:z,onAutoSelect:G,active:N===WA.Auto&&g===DA.Decision&&!U,loop:D.loop,playSound:c}),function(W){const{aimStateRef:y,selected:M,setAimPosition:U,rect:i}=W;UW.useEffect((()=>{y.current===WA.Selected&&M.current&&U(M.current)}),[y,M,U,i])}({aimStateRef:p,selected:K,setAimPosition:z,rect:R}),function(W){const{enabled:y,interaction:M,currentSelection:U,setAimPosition:i,setIsHovering:x}=W;UW.useEffect((()=>{y||(x(!1),cA(M),U.current&&i(U.current))}),[y,M,U,i,x])}({enabled:M,interaction:b,currentSelection:K,setAimPosition:E,setIsHovering:Y}),function(W){const{visible:y,currentSelection:M,setAimState:U,interaction:i,enabledRef:x,animationMap:n,setIsHovering:k}=W;UW.useEffect((()=>{if(!y){k(!1),M.current=void 0,U(WA.Auto),cA(i),x.current=!1;for(const W of Object.keys(n.current))iA.VA(W,n.current)}}),[n,M,x,i,U,k,y])}({enabledRef:d,currentSelection:K,interaction:b,setAimState:_,visible:y,animationMap:P,setIsHovering:Y}),function(W){const{uiPhase:y,container:M,selectionFrame:U,selection:i,board:x}=W,n=UW.useRef(void 0);UW.useEffect((()=>{U&&i&&x&&M&&(void 0!==n.current&&y!==DA.Initial||(U.container.visible=!1,i.container.visible=!1,i.appearOverlay.mesh.visible=!1,i.multipleirOverlay.mesh.visible=!1,i.border.mesh.visible=!1,U.aim.iconWhite.material.opacity=0,U.aim.background.material.opacity=0,x.material.opacity=0,x.mesh.visible=!0,M.visible=!0),n.current=y)}),[x,M,i,U,y])}({uiPhase:g,selectionFrame:q,selection:S,container:r,board:T}),function(W){const{uiPhase:y,onIntroReady:M,animationMap:U,selectionFrame:i,selection:x,multiplier:n,board:k,playSound:g}=W,u=UW.useRef(void 0),{loop:e}=mr.h();UW.useEffect((()=>{if(!(i&&x&&n&&k))return;let W;switch(y){case DA.Intro:W=function(W){const{onReady:y,selectionFrame:M}=W;return yA.M().callback((()=>{M.container.visible=!0})).parallel([fA({knob:M.verticalLine.bottomKnob,delay:0}),fA({knob:M.horizontalLine.bottomKnob,delay:.1}),fA({knob:M.verticalLine.topKnob,delay:.2}),fA({knob:M.horizontalLine.topKnob,delay:.3}),HA({element:M.horizontalLine.topLine}),HA({element:M.horizontalLine.bottomLine}),HA({element:M.verticalLine.topLine}),HA({element:M.verticalLine.bottomLine}),KA({element:M.aim}),ZA({element:W.board})]).callback(y)}({selectionFrame:i,board:k,onReady:M});break;case DA.DecisionEnd:W=function(W){const{selection:y,selectionFrame:M,board:U,onReady:i}=W;return yA.M().callback((()=>{y.container.visible=!0,y.appearOverlay.mesh.visible=!0,y.appearOverlay.material.opacity=0,y.appearOverlay.mesh.scale.setScalar(1)})).parallel([SA.M(U.material).animateTo({opacity:0},.1,hA.ME).callback((()=>{U.mesh.visible=!1})),SA.M(y.appearOverlay.material).animateTo({opacity:1},FA-wA,hA.ME).callback((()=>{y.border.mesh.visible=!0})).animateTo({opacity:0},jA-FA,hA.ME),SA.M(y.appearOverlay.mesh).animateTo({scale:new di(1.3,1.3,1.3)},FA-wA,hA.ME).animateTo({scale:qA},jA-FA,hA.ME),yA.M().parallel([CA(M.aim),QA(M.horizontalLine.bottomLine),QA(M.horizontalLine.topLine),QA(M.verticalLine.bottomLine),QA(M.verticalLine.topLine),WT(M.verticalLine.topKnob),WT(M.verticalLine.bottomKnob),WT(M.horizontalLine.topKnob),WT(M.horizontalLine.bottomKnob)]).callback((()=>{M.container.visible=!1}))]).callback((()=>{y.appearOverlay.mesh.visible=!1,i()}))}({selection:x,selectionFrame:i,board:k,onReady:()=>{iA.VA(DA.Intro,U.current)}});break;case DA.MultiplierReveal:W=function(W){const{selection:y,multiplier:M,playSound:U}=W;return yA.M().callback((()=>{y.border.mesh.visible=!0,y.container.visible=!0,U({event:UA.PZ.HotSpotMultiplierReveal})})).parallel([vA({frame:y.multipleirOverlay}),XA({multiplier:M.counter})])}({selection:x,multiplier:n,playSound:g});break;case DA.MultiplierDouble:W=function(W){const{selection:y,multiplier:M,playSound:U}=W;return yA.M().callback((()=>{y.border.mesh.visible=!0,y.container.visible=!0,U({event:UA.PZ.HotSpotDoubler})})).parallel([vA({frame:y.multipleirOverlay}),LA({multiplier:M.counter})])}({selection:x,multiplier:n,playSound:g})}if(W){const M=nA({anim:W,ticker:e,skipOnPageHidden:!1});u.current||W.fastForward(),iA.VA(y,U.current),U.current[y]={dispose:M,timeline:W}}u.current=y}),[U,i,e,n,M,x,y,k,g])}({uiPhase:g,onIntroReady:u,animationMap:P,selectionFrame:q,selection:S,multiplier:e,board:T,playSound:c}),x.jsx("group",{visible:y,children:x.jsx(UW.Suspense,{fallback:null,children:x.jsxs("group",{ref:A,children:[x.jsx(Kr,{onRelease:B}),x.jsx(Qr,{setFrameRef:s,setBoardRef:O,aimPosition:m,wallRect:R,wallBorderRect:I,onMove:f,onEnter:V,onLeave:$,onPress:a,onRelease:H}),x.jsx(gT,{setRef:o,rect:R,selection:!M&&U?U:m,isBorderGlowActive:l})]})})})},YT=MW.PA((()=>{const W=eT.g(),y=UW.useCallback(((y,M)=>{const U=uT(y);U&&(W.hotSpot.select(U),W.log.log(C.Te({remainingDecisionTime:W.hotSpot.decisionTimeRemaining,action:M,to:U})))}),[W]),M=UW.useCallback(((y,M)=>{y(M),W.log.log(C.Te({remainingDecisionTime:W.hotSpot.decisionTimeRemaining,action:rA.K.Auto,to:uT(M)}))}),[W]),U=UW.useCallback((()=>{W.ui.hotSpotGrid.setPhase(DA.Decision),C.af(W.hotSpot.decisionTimeRemaining)}),[W]),i=UW.useCallback((y=>{W.sound.playSound(y)}),[W]),n=UW.useCallback((y=>{W.ui.hotSpotGrid.setIsHoveringGrid(y)}),[W]),k={visible:W.ui.hotSpotGrid.isVisible,isDecision:W.hotSpot.isDecisionTime,selected:W.hotSpot.selectedSpotCoordinate,wallRect:W.videoElementRects.rects[lT.V.HotSpotDecisionWall],wallBorderRect:W.videoElementRects.rects[lT.V.HotSpotDecisionWallBorder],onAutoSelect:M,onSelect:y,uiPhase:W.ui.hotSpotGrid.phase,onIntroReady:U,multiplierRef:W.references.hotSpotMultiplierReference,isBorderGlowActive:W.ui.hotSpotGrid.isBorderGlowActive,playSound:i,setIsHovering:n};return x.jsx(GT,{...k})})),cT=W=>{const{stage3d:y,paused:M}=W,{loop:U}=y,{advance:i}=rr(),x=UW.useCallback((W=>{i(W,!0),y.renderer.render(y.scene,y.camera)}),[i,y]);return UW.useEffect((()=>{U.setPaused(M)}),[U,M]),UW.useEffect((()=>{U.onFrame(x)}),[U,x]),null},DT=MW.PA((()=>{const W=eT.g(),y={stage3d:mr.h(),paused:!W.ui.overlay3d.isActive};return x.jsx(cT,{...y})})),rT=()=>x.jsxs(x.Fragment,{children:[x.jsx(DT,{}),x.jsx(YT,{})]});var AT=M(199002),TT=M(136685);const OT=16;class hT{constructor(){this.isPaused=!0,this.lastFrameTime=-1,this.frameDelta=OT,this.listeners=[],this.onFrame=W=>(this.listeners.push(W),()=>{const y=this.listeners.indexOf(W);y>=0&&this.listeners.splice(y,1)}),this.loop=W=>{this.updateDeltaTime(W);for(const W of this.listeners)W(this.frameDelta);this.lastFrameTime=W,this.isPaused||(this.cancelRender=window.requestAnimationFrame(this.loop))}}setPaused(W){this.isPaused!==W&&(this.stopRender(),this.isPaused=W,W||(this.frameDelta=OT,this.lastFrameTime=-1,this.startRender()))}dispose(){this.stopRender(),this.listeners.length=0}startRender(){this.cancelRender=window.requestAnimationFrame(this.loop)}stopRender(){void 0!==this.cancelRender&&(window.cancelAnimationFrame(this.cancelRender),this.cancelRender=void 0)}updateDeltaTime(W){-1!==this.lastFrameTime&&(this.frameDelta=W-this.lastFrameTime)}}const ST={copy:W=>W.clone(),lerp:(W,y,M,U)=>{U.lerpVectors(W,y,M)}},oT={copy:W=>W.clone(),lerp:(W,y,M,U)=>{U.lerpVectors(W,y,M)}},dT={copy:W=>(new ci).copy(W),lerp:(W,y,M,U)=>{U.lerpVectors(W,y,M)}},qT={copy:W=>(new Bx).copy(W),lerp:(W,y,M,U)=>{U.lerpColors(W,y,M)}},sT={copy:W=>(new ux).copy(W),lerp:(W,y,M,U)=>{U.set(MA.Cc(W.x,y.x,M),MA.Cc(W.y,y.y,M),MA.Cc(W.z,y.z,M))}},NT=[W=>{if(W instanceof LU)return ST},W=>{if(W instanceof di)return oT},W=>{if(W instanceof ci)return dT},W=>{if(W instanceof Bx)return qT},W=>{if(W instanceof ux)return sT}],_T="__THREE__";M(964180),M(320680),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,function(W){try{return Object.defineProperties(W,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(y){return W}}(UW.createContext(null)),UW.Component;const{ReactCurrentOwner:pT,ReactCurrentDispatcher:bT}=UW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mT={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function zT(W){const{handlePointer:y}=function(W){function y(W){return W.filter((W=>["Move","Over","Enter","Out","Leave"].some((y=>{var M;return null==(M=W.__r3f)?void 0:M.handlers["onPointer"+y]}))))}function M(y){const{internal:M}=W.getState();for(const W of M.hovered.values())if(!y.length||!y.find((y=>y.object===W.object&&y.index===W.index&&y.instanceId===W.instanceId))){const U=W.eventObject.__r3f,i=null==U?void 0:U.handlers;if(M.hovered.delete(Mr(W)),null!=U&&U.eventCount){const M={...W,intersections:y};null==i.onPointerOut||i.onPointerOut(M),null==i.onPointerLeave||i.onPointerLeave(M)}}}function U(W,y){for(let M=0;M<y.length;M++){const U=y[M].__r3f;null==U||null==U.handlers.onPointerMissed||U.handlers.onPointerMissed(W)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>M([]);case"onLostPointerCapture":return y=>{const{internal:U}=W.getState();"pointerId"in y&&U.capturedMap.has(y.pointerId)&&requestAnimationFrame((()=>{U.capturedMap.has(y.pointerId)&&(U.capturedMap.delete(y.pointerId),M([]))}))}}return function(x){const{onPointerMissed:n,internal:k}=W.getState();k.lastEvent.current=x;const g="onPointerMove"===i,u="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,e=function(y,M){const U=W.getState(),i=new Set,x=[],n=M?M(U.internal.interaction):U.internal.interaction;for(let W=0;W<n.length;W++){const y=LD(n[W]);y&&(y.raycaster.camera=void 0)}U.previousRoot||null==U.events.compute||U.events.compute(y,U);let k=n.flatMap((function(W){const M=LD(W);return M&&M.events.enabled&&null!==M.raycaster.camera?(void 0===M.raycaster.camera&&(null==M.events.compute||M.events.compute(y,M,null==(U=M.previousRoot)?void 0:U.getState()),void 0===M.raycaster.camera&&(M.raycaster.camera=null)),M.raycaster.camera?M.raycaster.intersectObject(W,!0):[]):[];var U})).sort(((W,y)=>{const M=LD(W.object),U=LD(y.object);return M&&U&&U.events.priority-M.events.priority||W.distance-y.distance})).filter((W=>{const y=Mr(W);return!i.has(y)&&(i.add(y),!0)}));U.events.filter&&(k=U.events.filter(k,U));for(const W of k){let y=W.object;for(;y;){var g;null!=(g=y.__r3f)&&g.eventCount&&x.push({...W,eventObject:y}),y=y.parent}}if("pointerId"in y&&U.internal.capturedMap.has(y.pointerId))for(let W of U.internal.capturedMap.get(y.pointerId).values())i.has(Mr(W.intersection))||x.push(W.intersection);return x}(x,g?y:void 0),l=u?function(y){const{internal:M}=W.getState(),U=y.offsetX-M.initialClick[0],i=y.offsetY-M.initialClick[1];return Math.round(Math.sqrt(U*U+i*i))}(x):0;"onPointerDown"===i&&(k.initialClick=[x.offsetX,x.offsetY],k.initialHits=e.map((W=>W.eventObject))),u&&!e.length&&l<=2&&(U(x,k.interaction),n&&n(x)),g&&M(e),function(y,U,i,x){const n=W.getState();if(y.length){const W={stopped:!1};for(const k of y){const g=LD(k.object)||n,{raycaster:u,pointer:e,camera:l,internal:G}=g,Y=new di(e.x,e.y,0).unproject(l),c=W=>{var y,M;return null!=(y=null==(M=G.capturedMap.get(W))?void 0:M.has(k.eventObject))&&y},D=W=>{const y={intersection:k,target:U.target};G.capturedMap.has(W)?G.capturedMap.get(W).set(k.eventObject,y):G.capturedMap.set(W,new Map([[k.eventObject,y]])),U.target.setPointerCapture(W)},r=W=>{const y=G.capturedMap.get(W);y&&Ur(G.capturedMap,k.eventObject,y,W)};let A={};for(let W in U){let y=U[W];"function"!=typeof y&&(A[W]=y)}let T={...k,...A,pointer:e,intersections:y,stopped:W.stopped,delta:i,unprojectedPoint:Y,ray:u.ray,camera:l,stopPropagation(){const i="pointerId"in U&&G.capturedMap.get(U.pointerId);(!i||i.has(k.eventObject))&&(T.stopped=W.stopped=!0,G.hovered.size&&Array.from(G.hovered.values()).find((W=>W.eventObject===k.eventObject)))&&M([...y.slice(0,y.indexOf(k)),k])},target:{hasPointerCapture:c,setPointerCapture:D,releasePointerCapture:r},currentTarget:{hasPointerCapture:c,setPointerCapture:D,releasePointerCapture:r},nativeEvent:U};if(x(T),!0===W.stopped)break}}}(e,x,l,(function(W){const y=W.eventObject,M=y.__r3f,n=null==M?void 0:M.handlers;if(null!=M&&M.eventCount)if(g){if(n.onPointerOver||n.onPointerEnter||n.onPointerOut||n.onPointerLeave){const y=Mr(W),M=k.hovered.get(y);M?M.stopped&&W.stopPropagation():(k.hovered.set(y,W),null==n.onPointerOver||n.onPointerOver(W),null==n.onPointerEnter||n.onPointerEnter(W))}null==n.onPointerMove||n.onPointerMove(W)}else{const M=n[i];M?u&&!k.initialHits.includes(y)||(U(x,k.interaction.filter((W=>!k.initialHits.includes(W)))),M(W)):u&&k.initialHits.includes(y)&&U(x,k.interaction.filter((W=>!k.initialHits.includes(W))))}}))}}}}(W);return{priority:1,enabled:!0,compute(W,y,M){y.pointer.set(W.offsetX/y.size.width*2-1,-W.offsetY/y.size.height*2+1),y.raycaster.setFromCamera(y.pointer,y.camera)},connected:void 0,handlers:Object.keys(mT).reduce(((W,M)=>({...W,[M]:y(M)})),{}),update:()=>{var y;const{events:M,internal:U}=W.getState();null!=(y=U.lastEvent)&&y.current&&M.handlers&&M.handlers.onPointerMove(U.lastEvent.current)},connect:y=>{var M;const{set:U,events:i}=W.getState();null==i.disconnect||i.disconnect(),U((W=>({events:{...W.events,connected:y}}))),Object.entries(null!=(M=i.handlers)?M:[]).forEach((([W,M])=>{const[U,i]=mT[W];y.addEventListener(U,M,{passive:i})}))},disconnect:()=>{const{set:y,events:M}=W.getState();var U;M.connected&&(Object.entries(null!=(U=M.handlers)?U:[]).forEach((([W,y])=>{if(M&&M.connected instanceof HTMLElement){const[U]=mT[W];M.connected.removeEventListener(U,y)}})),y((W=>({events:{...W.events,connected:void 0}}))))}}}function KT(W,y,M,U){const i=class extends Ln{constructor(i={}){const x=Object.entries(W);super({uniforms:x.reduce(((W,[y,M])=>({...W,...Hn.clone({[y]:{value:M}})})),{}),vertexShader:y,fragmentShader:M}),this.key="",x.forEach((([W])=>Object.defineProperty(this,W,{get:()=>this.uniforms[W].value,set:y=>this.uniforms[W].value=y}))),Object.assign(this,i),U&&U(this)}};return i.key=vU.generateUUID(),i}const PT=KT({cellBgTexture:null,boardSize:new LU(Pr.YB,Pr.Ge),opacity:1},"precision highp float;precision highp int;varying vec2 vUV;void main(){vUV=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}","uniform vec2 boardSize;uniform sampler2D cellBgTexture;uniform float opacity;uniform vec2 hover;float scaleInRange(float value,float fromMin,float fromMax,float toMin,float toMax){return(toMax-toMin)*(value-fromMin)/(fromMax-fromMin)+toMin;}varying vec2 vUV;void main(){float cellWidth=1./boardSize.x;float cellHeight=1./boardSize.y;vec2 currentTile=vec2(floor(vUV.x/cellWidth),floor((1.-vUV.y)/cellHeight));float positionX=floor(vUV.x/cellWidth)*cellWidth;float positionY=floor((vUV.y)/cellHeight)*cellHeight;vec2 positionInCell=vec2(scaleInRange(vUV.x,positionX,positionX+cellWidth,0.,1.),scaleInRange(vUV.y,positionY,positionY+cellHeight,0.,1.));vec4 cellBgColor=texture2D(cellBgTexture,positionInCell);gl_FragColor=cellBgColor*opacity;\n#include <tonemapping_fragment>\n#include <colorspace_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",(W=>{W&&(W.depthTest=!0,W.transparent=!0,W.needsUpdate=!0)})),RT=KT({diffuseTexture:null,opacity:1,glowPositionY:0},"precision highp float;precision highp int;varying vec2 vUV;void main(){vUV=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}","uniform sampler2D diffuseTexture;uniform float opacity;uniform float glowPositionY;float scaleInRange(float value,float fromMin,float fromMax,float toMin,float toMax){return(toMax-toMin)*(value-fromMin)/(fromMax-fromMin)+toMin;}varying vec2 vUV;void main(){vec4 transparent=vec4(0.);vec4 lineColor=vec4(1.,1.,1.,0.6);vec4 backgroundColor=vec4(0.,0.,0.,0.6);float lineWidth=0.6;float halfLineWidth=lineWidth*0.5;float currentGlowPositionY=scaleInRange(1.-glowPositionY,0.,1.,-halfLineWidth,1.+halfLineWidth);float line=smoothstep(currentGlowPositionY-halfLineWidth,currentGlowPositionY,vUV.y)*(1.-smoothstep(currentGlowPositionY,currentGlowPositionY+halfLineWidth,vUV.y))*(1.-smoothstep(0.,halfLineWidth,abs(vUV.y-currentGlowPositionY)));vec4 borderColor=texture2D(diffuseTexture,vUV);vec4 borderWithShineColor=(borderColor+mix(transparent,lineColor*line,borderColor.a));gl_FragColor=mix(backgroundColor,borderWithShineColor,borderWithShineColor.a)*opacity;\n#include <tonemapping_fragment>\n#include <colorspace_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",(W=>{W&&(W.depthWrite=!1,W.depthTest=!1,W.transparent=!0,W.needsUpdate=!0)})),IT=KT({opacity:0,diffuseTexture:null,frame:new ci},"varying vec2 vUV;void main(){vUV=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}","uniform sampler2D diffuseTexture;uniform vec4 frame;varying vec2 vUV;uniform float opacity;vec2 spriteSheet(vec2 uv,vec4 spriteRect){return vec2(spriteRect.x+uv.x*spriteRect.z,spriteRect.y-(1.-uv.y)*spriteRect.w);}void main(){vec4 color=texture2D(diffuseTexture,spriteSheet(vUV,frame));gl_FragColor=color*opacity;\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",(W=>{W&&(W.depthTest=!1,W.depthWrite=!1,W.transparent=!0,W.needsUpdate=!0)}));var ET=M(426331),ZT=M(4032),fT=M(850999);const VT=()=>({[fT._.ChasersEnabled]:{storageKey:fT.h+fT._.ChasersEnabled,isValidValue:W=>void 0!==W,getDefaultValue:()=>!1}});var $T=M(99200);function aT(W,y){if(!W)return y;const M=parseFloat(W);return Number.isNaN(M)?y:M}function HT(W){const y=W.rawConfig[$T.xB.TableBetMaxLimit],M=y=>{const M=`${y}_bet_min_limit`;return aT(W.rawConfig[M],0)},U=M=>{const U=`${M}_bet_max_limit`,i=aT(W.rawConfig[U],0);return y?Math.min(i,y):i},i=Math.min(...$T.OV.map((W=>M(W)))),x=Math.max(...$T.OV.map((W=>U(W)))),n=function(W){if(void 0===W||""===W)return;const y=parseFloat(W);return Number.isNaN(y)?void 0:y}(W.rawConfig[$T.xB.MaxBonusLimit]);return{getMaxBetGroupLimit:U,getMinBetGroupLimit:M,tableBetLimits:[i,x],classicLayoutEnabled:"true"===W.rawConfig[$T.xB.ClassicLayoutEnabled],lightningStormBackgroundSong1Enabled:"true"===W.rawConfig[$T.xB.LightningStormBackgroundSong1Enabled],tableMaxBetLimit:y,bonusMaxBet:n,showVolatilityIndex:"true"===W.rawConfig[$T.xB.VolatilityIndexRequired]}}var BT,vT=M(332635);class LT{constructor(W){this.props=W,this.gameLoaded=!1,this.isDisposed=!1,this.values=function(W){const y={gamePaused:(M=W).gamePaused.state,orientation:M.orientation,isInFullscreen:M.fullscreen.isInFullscreen,isGoingLive:M.isGoingLive,gameDimensions:M.gameDimensions,preferences:M.preferences.values,gameRoundId:M.gameRoundId,playMode:M.playMode,isPageVisible:M.isPageVisible,chipstackHidden:M.chipstack.hidden,betAmountsLastSelectedAmount:M.betAmounts.lastSelectedAmount,chipstackChipColors:M.chipstack.chipColors,betAmounts:M.betAmounts.amounts,lifecycleCurrent:M.lifecycle.current,networkLatency:M.network.latency,decisionTimerHidden:M.decisionTimer.hidden,decisionTimerSecondsRemaining:M.decisionTimer.secondsRemaining,bettingTags:M.betting.tags,betModifier:M.betAmounts.betModifier,tooltipsCurrent:M.tooltips.current,gameNumber:M.gameNumber,tableName:M.tableName,layoutCurrent:M.layout.current,layoutImmersiveFooterCollapsed:M.layout.immersive.footer.collapsed,layoutClassicVideoIsExpanded:M.layout.classic.video.expanded,layoutOpenMobileDrawerId:M.layout.drawer.mobile.current,layoutDesktopDrawerCurrentOpenId:M.layout.drawer.desktop.current,menuOpenScreenId:M.menu.openScreenId,menuIsOpen:M.menu.isOpen,videoIsPlaying:M.video.isPlaying,videoQuality:M.video.quality,videoPlayerName:M.video.playerName,videoStreamForCurrentLayout:M.video.streamForCurrentLayout,videoMobileScale:M.video.mobile.scale,videoMobileScalingContainerHtmlElement:M.video.mobile.scalingContainerHtmlElement,videoInfoVisible:M.video.info.visible,gameResultAmount:M.gameResult.amount,statusBarProps:M.statusBar.props,statusBarOverlayProps:M.statusBar.overlayProps,balanceAvailable:M.balance.available,balanceReserved:M.balance.reserved,balanceReservedTip:M.balance.reservedTip,balanceServer:M.balance.server,balanceActiveId:M.balance.activeId,balanceTotalBet:M.balance.totalBet,balanceIsLow:M.balance.isLow,balanceIsPaused:M.balance.isPaused,winnersListHidden:M.winnersList.hidden,autoplayUIIsSettingsWindowOpen:M.autoplayUI.isSettingsWindowOpen,autoplayUIIsPreviousTotalBetVisible:M.autoplayUI.isPreviousTotalBetVisible,onboardingCurrent:M.onboardingBubbles.current,activeWallet:M.promotionsUI.activeWallet,currencyCode:M.currency.code,currencySymbol:M.currencySymbol,gameTheme:M.gameTheme,globalStylesCustomizableButton:M.globalStyles.current.customizableButton,tableLimitsMin:M.tableLimits.min,tableLimitsMax:M.tableLimits.max,tableLimitsPinned:M.tableLimits.ui.panel.isPinned,popupCurrent:M.popups.current,rootSize:M.rootSize};var M;return Object.keys(y).reduce(((W,M)=>{let U;const i=y[M],x=n.MN(M,(()=>{U=i.subscribe((()=>{x.reportChanged()}))}),(()=>null==U?void 0:U()));return 0||Object.defineProperty(W,M,{get:()=>(x.reportObserved(),i.value)}),W}),{})}(W.agApi),this.isPageReady=W.agApi.isPageVisible.value,n.Gn(this,{gameLoaded:n.sH,isPageReady:n.sH,isLowBalance:n.EW,setIsPageReady:n.XI,dispose:n.XI});const y=n.XI((()=>{this.isDisposed||(this.gameLoaded=!0)}));W.agApi.gameLoaded.then(y).catch(y)}get actions(){return this.props.agApi}get platform(){return this.props.agApi.platform}get isLowBalance(){return this.values.balanceAvailable<this.props.rootStore.settings.minBetAmount}setIsPageReady(W){this.isPageReady=W}dispose(){this.isDisposed=!0,this.gameLoaded=!1,this.isPageReady=!1}}function XT(W){return n.mJ((()=>({gameDimensions:W.abstractGame.values.gameDimensions,isClassicLayout:W.device.isClassicLayout})),(()=>{W.flyingChips.clearAll(),W.draggableChip.onCancel(),W.bonus.clearFlyingWheelMultiplier(),W.ui.bettingGrid.setIsWinningBetSpotAnimating(!1),W.bonusGameTransition.isTransitioning&&W.bonusGameTransition.fastForward()}))}function wT(W){return n.mJ((()=>({betStatus:W.bets.status,isWinningChipFlying:W.flyingChips.isWinningChipFlying})),((y,M)=>{y.betStatus!==j.eT.Settled||!0===(null==M?void 0:M.isWinningChipFlying)&&!y.isWinningChipFlying?W.abstractGame.actions.balance.resumeBalanceUpdate():0!==W.result.payout.amount&&W.abstractGame.actions.balance.pauseBalanceUpdate()}),{fireImmediately:!0})}function FT(W){return n.mJ((()=>W.gamePhase.phase),(y=>{y===BT.BetsOpen?(W.abstractGame.actions.layout.immersive.footer.expand(),W.abstractGame.actions.chipstack.show()):(W.abstractGame.actions.layout.immersive.footer.collapse(),W.abstractGame.actions.chipstack.hide())}),{fireImmediately:!0})}function tT(W){return n.mJ((()=>({gameLoaded:W.abstractGame.gameLoaded})),(({gameLoaded:y})=>{y&&W.intro.src&&W.intro.phase===ET.G.Loaded&&W.intro.setPhase(ET.G.ReadyToPlay)}))}(function(W){W["Initial"]="GamePhase.Initial",W["BetsOpen"]="GamePhase.BetsOpen",W["BetsClosed"]="GamePhase.BetsClosed",W["DisplayBonuses"]="GamePhase.DisplayBonuses",W["WheelSpinning"]="GamePhase.WheelSpinning",W["WheelStopped"]="GamePhase.WheelStopped",W["WheelResult"]="GamePhase.WheelResult",W["StormBonus"]="GamePhase.StormBonus",W["HotSpot"]="GamePhase.HotSpot",W["BatteryCharger"]="GamePhase.BatteryCharger",W["Fireball"]="GamePhase.Fireball",W["MonsterMash"]="GamePhase.MonsterMash",W["GameResolved"]="GamePhase.GameResolved",W["GameCancelled"]="GamePhase.GameCancelled",W["GameCleared"]="GamePhase.GameCleared"})(BT||(BT={})),Object.values(BT),BT.StormBonus,BT.HotSpot,BT.BatteryCharger,BT.Fireball,BT.MonsterMash;const JT=300;function jT(W){let y;return n.mJ((()=>({isPageVisible:W.abstractGame.values.isPageVisible,componentLayout:W.device.componentLayout,isFullscreen:W.abstractGame.values.isInFullscreen})),(({isPageVisible:M})=>{window.clearTimeout(y),W.abstractGame.setIsPageReady(!1),M&&(y=window.setTimeout((()=>{W.abstractGame.setIsPageReady(!0)}),JT))}))}var CT=M(836871);function QT(W){return n.mJ((()=>({gamePhase:W.gamePhase.phase,hotSpotPhase:W.hotSpot.phase})),(({gamePhase:y,hotSpotPhase:M})=>{switch(y){case BT.Initial:case BT.GameCleared:break;case BT.BetsOpen:W.abstractGame.actions.lifecycle.openBets();break;case BT.HotSpot:switch(M){case Pr.bK.DecisionsOpen:W.hotSpot.isDecisionTime?W.abstractGame.actions.lifecycle.openInteraction():W.abstractGame.actions.lifecycle.closeBets();break;case Pr.bK.DecisionsClosed:W.abstractGame.values.lifecycleCurrent===h.P.InteractionOpen?W.abstractGame.actions.lifecycle.closeInteraction():W.abstractGame.actions.lifecycle.closeBets()}break;case BT.GameResolved:W.abstractGame.actions.lifecycle.resolveGame({resetTotalBet:!1});break;case BT.GameCancelled:W.abstractGame.actions.lifecycle.resolveGame({resetTotalBet:!1}),W.abstractGame.actions.toasts.show(CT.Vy());break;default:W.abstractGame.actions.lifecycle.closeBets()}}),{fireImmediately:!0})}const WO=[BT.BetsClosed,BT.DisplayBonuses,BT.WheelSpinning,BT.WheelStopped,BT.WheelResult,BT.StormBonus,BT.HotSpot,BT.BatteryCharger,BT.Fireball,BT.MonsterMash];function yO(W){return n.mJ((()=>({gamePhase:W.gamePhase.phase})),(({gamePhase:y})=>{!W.abstractGame.values.winnersListHidden&&WO.includes(y)&&W.abstractGame.actions.winnersList.hide()}))}var MO,UO,iO,xO,nO,kO;(function(W){W["FlyWinningChip"]="TimeoutId.FlyWinningChip",W["AutoplayRepeat"]="TimeoutId.AutoplayRepeat",W["WinningChipFlyDelay"]="TimeoutId.WinningChipFlyDelay"})(MO||(MO={})),function(W){W["RequestAnimationFrame"]="TimeoutType.RequestAnimationFrame",W["Regular"]="TimeoutType.Regular"}(UO||(UO={}));class gO{constructor(W){this.props=W,this.needToRepeatBets=!1,this.isRunning=!1,this.autoplayAPIDisposeBag=new vT.C,n.Gn(this,{needToRepeatBets:n.sH,isRunning:n.sH,repeatBets:n.XI,clearPendingState:n.XI,dispose:n.XI})}repeatBets(){this.props.rootStore.timeout.set(MO.AutoplayRepeat,n.XI((()=>{this.needToRepeatBets=!0})),0,UO.Regular)}bindAutoPlayAPI(W){this.autoplayAPIDisposeBag.dispose(),this.bindToAutoplayAPI(W)}clearPendingState(){this.needToRepeatBets=!1,this.props.rootStore.timeout.clear(MO.AutoplayRepeat)}dispose(){this.clearPendingState(),this.autoplayAPIDisposeBag.dispose()}bindToAutoplayAPI(W){this.autoplayAPIDisposeBag.addDisposables([W.isRunning.subscribe(n.XI((W=>{this.isRunning=W})))])}}function uO(W){return n.mJ((()=>{const y=W.ui.bettingGridTransition.currentTransitionState===iO.Expanded;return W.autoplay.needToRepeatBets&&(y||!W.abstractGame.values.isPageVisible)}),(y=>{y&&(W.bets.autoplayRepeat(),W.autoplay.clearPendingState())}))}(function(W){W["Collapsed"]="BettingGridTransitionState.Collapsed",W["Transitioning"]="BettingGridTransitionState.Transitioning",W["Expanded"]="BettingGridTransitionState.Expanded"})(iO||(iO={})),function(W){W["Initial"]="Initial",W["Intro"]="Intro",W["WheelMultiplierUpdate"]="MultiplierUpdate",W["ReadyForLever"]="ReadyForLever",W["LoadingBattery"]="LoadingBattery",W["WheelSpinning"]="WheelSpinning",W["BatteryTested"]="BatteryTested",W["BatteryCharged"]="BatteryCharged",W["GlobalMultiplier"]="GlobalMultiplier",W["LastBatteryReached"]="LastBatteryReached",W["Celebration"]="Celebration"}(xO||(xO={})),function(W){W["Pending"]="Pending",W["Loaded"]="Loaded",W["Tested"]="Tested",W["Charged"]="Charged"}(nO||(nO={})),function(W){W["Regular"]="Regular",W["Global"]="Global"}(kO||(kO={}));class eO{constructor(){this.phase=xO.Initial,this.bonusMultiplier=0,this.batteries=[],n.Gn(this,{phase:n.sH,bonusMultiplier:n.sH,batteryInTestIndex:n.EW,isLastBatteryReached:n.EW,isWheelSpinning:n.EW,batteries:n.sH,setPhase:n.XI,setBonusMultiplier:n.XI,setBatteries:n.XI})}get batteryInTestIndex(){if(0===this.batteries.length)return-1;for(let W=this.batteries.length-1;W>=0;W--)if(this.batteries[W].status!==nO.Pending)return W;return-1}get isLastBatteryReached(){return this.batteryInTestIndex===this.batteries.length-1}get isWheelSpinning(){return this.phase===xO.WheelSpinning}setPhase(W){this.phase=W}setBonusMultiplier(W){this.bonusMultiplier=W}setBatteries(W){this.batteries=W}reset(){this.setPhase(xO.Initial),this.setBonusMultiplier(0),this.setBatteries([])}}var lO=M(693);function GO(W,y){void 0===y&&(y="Illegal state"),W||function(W){throw new Error("[mobx-utils] "+W)}(y)}var YO=function(W){return W&&W!==Object.prototype&&Object.getOwnPropertyNames(W).concat(YO(Object.getPrototypeOf(W))||[])},cO=function(W){return function(W){var y=YO(W);return y.filter((function(W,M){return y.indexOf(W)===M}))}(W).filter((function(W){return"constructor"!==W&&!~W.indexOf("__")}))},DO="pending",rO="fulfilled",AO="rejected";function TO(W){switch(this.state){case DO:return W.pending&&W.pending(this.value);case AO:return W.rejected&&W.rejected(this.value);case rO:return W.fulfilled?W.fulfilled(this.value):this.value}}function OO(W,y){if(GO(arguments.length<=2,"fromPromise expects up to two arguments"),GO("function"==typeof W||"object"==typeof W&&W&&"function"==typeof W.then,"Please pass a promise or function to fromPromise"),!0===W.isPromiseBasedObservable)return W;"function"==typeof W&&(W=new Promise(W));var M=W;W.then(n.XI("observableFromPromise-resolve",(function(W){M.value=W,M.state=rO})),n.XI("observableFromPromise-reject",(function(W){M.value=W,M.state=AO}))),M.isPromiseBasedObservable=!0,M.case=TO;var U=y&&y.state===rO?y.value:void 0;return n.kt(M,{value:U,state:DO},{},{deep:!1}),M}(function(W){W.reject=n.XI("fromPromise.reject",(function(y){var M=W(Promise.reject(y));return M.state=AO,M.value=y,M})),W.resolve=n.XI("fromPromise.resolve",(function(y){void 0===y&&(y=void 0);var M=W(Promise.resolve(y));return M.state=rO,M.value=y,M}))})(OO||(OO={}));var hO=!1||function(W,y,M,U){var i,x=arguments.length,n=x<3?y:null===U?U=Object.getOwnPropertyDescriptor(y,M):U;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(W,y,M,U);else for(var k=W.length-1;k>=0;k--)(i=W[k])&&(n=(x<3?i(n):x>3?i(y,M,n):i(y,M))||n);return x>3&&n&&Object.defineProperty(y,M,n),n};(function(){function W(W,y){var M=this;Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subscription",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.Gn(this),n.h5((function(){M.current=y,M.subscription=W.subscribe(M)}))}Object.defineProperty(W.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.subscription&&this.subscription.unsubscribe()}}),Object.defineProperty(W.prototype,"next",{enumerable:!1,configurable:!0,writable:!0,value:function(W){this.current=W}}),Object.defineProperty(W.prototype,"complete",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.dispose()}}),Object.defineProperty(W.prototype,"error",{enumerable:!1,configurable:!0,writable:!0,value:function(W){this.current=W,this.dispose()}}),hO([n.sH.ref],W.prototype,"current",void 0),hO([n.XI.bound],W.prototype,"next",null),hO([n.XI.bound],W.prototype,"complete",null),hO([n.XI.bound],W.prototype,"error",null)})();var SO=!1||function(){return SO=Object.assign||function(W){for(var y,M=1,U=arguments.length;M<U;M++)for(var i in y=arguments[M])Object.prototype.hasOwnProperty.call(y,i)&&(W[i]=y[i]);return W},SO.apply(this,arguments)},oO=!1||function(W,y,M,U){var i,x=arguments.length,n=x<3?y:null===U?U=Object.getOwnPropertyDescriptor(y,M):U;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(W,y,M,U);else for(var k=W.length-1;k>=0;k--)(i=W[k])&&(n=(x<3?i(n):x>3?i(y,M,n):i(y,M))||n);return x>3&&n&&Object.defineProperty(y,M,n),n},dO=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function W(W){var y=this;Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:W}),Object.defineProperty(this,"localValues",{enumerable:!0,configurable:!0,writable:!0,value:n.sH.map({})}),Object.defineProperty(this,"localComputedValues",{enumerable:!0,configurable:!0,writable:!0,value:n.sH.map({})}),Object.defineProperty(this,"isPropertyDirty",{enumerable:!0,configurable:!0,writable:!0,value:function(W){return y.localValues.has(W)}}),n.Gn(this),GO(n.OB(W),"createViewModel expects an observable object");var M=cO(this);cO(W).forEach((function(U){var i;if(!M.includes(U)&&U!==n.BQ&&"__mobxDidRunLazyInitializers"!==U){if(GO(-1===dO.indexOf(U),"The propertyname "+U+" is reserved and cannot be used with viewModels"),n.H8(W,U)){var x=n.Mr(W,U),k=x.derivation.bind(y),g=null===(i=x.setter_)||void 0===i?void 0:i.bind(y);y.localComputedValues.set(U,n.EW(k,{set:g}))}var u=Object.getOwnPropertyDescriptor(W,U),e=u?{enumerable:u.enumerable}:{};Object.defineProperty(y,U,SO(SO({},e),{configurable:!0,get:function(){return n.H8(W,U)?y.localComputedValues.get(U).get():y.isPropertyDirty(U)?y.localValues.get(U):y.model[U]},set:n.XI((function(M){n.H8(W,U)?y.localComputedValues.get(U).set(M):M!==y.model[U]?y.localValues.set(U,M):y.localValues.delete(U)}))}))}}))}Object.defineProperty(W.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"changedValues",{get:function(){return new Map(this.localValues)},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"submit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var W=this;n.HP(this.localValues).forEach((function(y){var M=W.localValues.get(y),U=W.model[y];n.Fq(U)?U.replace(M):n.uz(U)?(U.clear(),U.merge(M)):n.YQ(M)||(W.model[y]=M)})),this.localValues.clear()}}),Object.defineProperty(W.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.localValues.clear()}}),Object.defineProperty(W.prototype,"resetProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(W){this.localValues.delete(W)}}),oO([n.EW],W.prototype,"isDirty",null),oO([n.EW],W.prototype,"changedValues",null),oO([n.XI.bound],W.prototype,"submit",null),oO([n.XI.bound],W.prototype,"reset",null),oO([n.XI.bound],W.prototype,"resetProperty",null)})();var qO,sO=!1||(qO=function(W,y){return qO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,y){W.__proto__=y}||function(W,y){for(var M in y)Object.prototype.hasOwnProperty.call(y,M)&&(W[M]=y[M])},qO(W,y)},function(W,y){function M(){this.constructor=W}qO(W,y),W.prototype=null===y?Object.create(y):(M.prototype=y.prototype,new M)}),NO=(function(W){function y(y,M,U){var i=void 0===U?{}:U,x=i.name,k=void 0===x?"ogm"+(1e3*Math.random()|0):x,g=i.keyToName,u=void 0===g?function(W){return""+W}:g,e=W.call(this)||this;Object.defineProperty(e,"_base",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_ogmInfoKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_groupBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_keyToName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_disposeBaseObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e._keyToName=u,e._groupBy=M,e._ogmInfoKey=Symbol("ogmInfo"+k),e._base=y;for(var l=0;l<y.length;l++)e._addItem(y[l]);return e._disposeBaseObserver=n.lB(e._base,(function(W){if("splice"===W.type)n.Rn((function(){for(var y=0,M=W.removed;y<M.length;y++){var U=M[y];e._removeItem(U)}for(var i=0,x=W.added;i<x.length;i++){var n=x[i];e._addItem(n)}}));else{if("update"!==W.type)throw new Error("illegal state");n.Rn((function(){e._removeItem(W.oldValue),e._addItem(W.newValue)}))}})),e}sO(y,W),Object.defineProperty(y.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){throw new Error("not supported")}}),Object.defineProperty(y.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(W){throw new Error("not supported")}}),Object.defineProperty(y.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(W,y){throw new Error("not supported")}}),Object.defineProperty(y.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposeBaseObserver();for(var W=0;W<this._base.length;W++){var y=this._base[W];y[this._ogmInfoKey].reaction(),delete y[this._ogmInfoKey]}}}),Object.defineProperty(y.prototype,"_getGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(y){var M=W.prototype.get.call(this,y);return void 0===M&&(M=n.sH([],{name:"GroupArray["+this._keyToName(y)+"]",deep:!1}),W.prototype.set.call(this,y,M)),M}}),Object.defineProperty(y.prototype,"_removeFromGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(y,M){var U=W.prototype.get.call(this,y);1===U.length?W.prototype.delete.call(this,y):(M===U.length-1||(U[M]=U[U.length-1],U[M][this._ogmInfoKey].groupArrIndex=M),U.length--)}}),Object.defineProperty(y.prototype,"_addItem",{enumerable:!1,configurable:!0,writable:!0,value:function(W){var y=this,M=this._groupBy(W),U=this._getGroupArr(M),i={groupByValue:M,groupArrIndex:U.length,reaction:n.mJ((function(){return y._groupBy(W)}),(function(M,U){var i=W[y._ogmInfoKey];y._removeFromGroupArr(i.groupByValue,i.groupArrIndex);var x=y._getGroupArr(M),n=x.length;x.push(W),i.groupByValue=M,i.groupArrIndex=n}))};Object.defineProperty(W,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:i}),U.push(W)}}),Object.defineProperty(y.prototype,"_removeItem",{enumerable:!1,configurable:!0,writable:!0,value:function(W){var y=W[this._ogmInfoKey];this._removeFromGroupArr(y.groupByValue,y.groupArrIndex),y.reaction(),delete W[this._ogmInfoKey]}})}(n.Es),function(){function W(W,y){Object.defineProperty(this,"base",{enumerable:!0,configurable:!0,writable:!0,value:W}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:y}),Object.defineProperty(this,"root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closestIdx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});for(var M=this.closest=this.root=W,U=0;U<this.args.length-1&&(M=M.get(y[U]));U++)this.closest=M;this.closestIdx=U}return Object.defineProperty(W.prototype,"exists",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertNotDisposed();var W=this.args.length;return this.closestIdx>=W-1&&this.closest.has(this.args[W-1])}}),Object.defineProperty(W.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])}}),Object.defineProperty(W.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(W){this.assertNotDisposed();for(var y=this.args.length,M=this.closest,U=this.closestIdx;U<y-1;U++){var i=new Map;M.set(this.args[U],i),M=i}this.closestIdx=y-1,this.closest=M,M.set(this.args[y-1],W)}}),Object.defineProperty(W.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var W=this.args.length;this.closest.delete(this.args[W-1]);for(var y=this.root,M=[y],U=0;U<W-1;U++)y=y.get(this.args[U]),M.push(y);for(U=M.length-1;U>0;U--)0===M[U].size&&M[U-1].delete(this.args[U-1]);this.isDisposed=!0}}),Object.defineProperty(W.prototype,"assertNotDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.isDisposed)throw new Error("Concurrent modification exception")}}),W}()),_O=function(){function W(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"argsLength",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(W.prototype,"entry",{enumerable:!1,configurable:!0,writable:!0,value:function(W){if(-1===this.argsLength)this.argsLength=W.length;else if(this.argsLength!==W.length)throw new Error("DeepMap should be used with functions with a consistent length, expected: "+this.argsLength+", got: "+W.length);return this.last&&(this.last.isDisposed=!0),this.last=new NO(this.store,W)}}),W}(),pO=!1||function(){return pO=Object.assign||function(W){for(var y,M=1,U=arguments.length;M<U;M++)for(var i in y=arguments[M])Object.prototype.hasOwnProperty.call(y,i)&&(W[i]=y[i]);return W},pO.apply(this,arguments)},bO=!1||function(){for(var W=0,y=0,M=arguments.length;y<M;y++)W+=arguments[y].length;var U=Array(W),i=0;for(y=0;y<M;y++)for(var x=arguments[y],n=0,k=x.length;n<k;n++,i++)U[i]=x[n];return U};function mO(W,y){if(void 0===y&&(y=!1),n.ve(W))throw new Error("computedFn shouldn't be used on actions");var M=!1,U=0,i="boolean"==typeof y?{keepAlive:y}:y,x=new _O;return function(){for(var y=this,k=[],g=0;g<arguments.length;g++)k[g]=arguments[g];var u,e=x.entry(k);if(e.exists())return e.get().get();if(!i.keepAlive&&!n.Tx())return M||(console.warn("invoking a computedFn from outside an reactive context won't be memoized, unless keepAlive is set"),M=!0),W.apply(this,k);var l=n.EW((function(){return u=W.apply(y,k)}),pO(pO({},i),{name:"computedFn("+(i.name||W.name)+"#"+ ++U+")"}));return e.set(l),i.keepAlive||n.q$(l,(function(){x.entry(k).delete(),i.onCleanup&&i.onCleanup.apply(i,bO([u],k)),u=void 0})),l.get()}}var zO,KO,PO=M(267520),RO=M(843717),IO=M(142130);(function(W){W["Warning"]="Warning",W["Error"]="Error"})(zO||(zO={})),function(W){W["WaitForNextGame"]="WaitForNextGame",W["LowBalance"]="LowBalance",W["LowBalanceChaser"]="LowBalanceChaser",W["ChaserMinBet"]="ChaserMinBet",W["TableBetMaxLimitReached"]="TableBetMaxLimitReached",W["TableSingleBetMaxLimitReached"]="TableSingleBetMaxLimitReached",W["MaxBetLimit"]="MaxBetLimit",W["MinBetLimit"]="MinBetLimit",W["BetsClosed"]="BetsClosed",W["BonusMaxLimitReached"]="BonusMaxLimitReached"}(KO||(KO={}));var EO=M(277082);function ZO(W){const{results:y,actionType:M,store:U}=W,i=function(W){const y=Object.values(W);let M=null;for(const W of y){if((null==W?void 0:W.type)===zO.Error)return zO.Error;(null==W?void 0:W.type)===zO.Warning&&(M=zO.Warning)}return M}(y);if(i===zO.Error)U.sound.playSound({event:RO.Wo.ClickingFail});else switch(M){case j.uu.Chip:const{betCode:y}=W;EO.LightningStormBetCode.StormChaser===y?U.sound.playSound({event:UA.PZ.BetPlacedOnStormChaser}):EO.LightningStormBetCode.XChaser===y?U.sound.playSound({event:UA.PZ.BetPlacedOnXChaser}):EO.LightningStormBetCode.EvenMoney===y?U.sound.playSound({event:UA.PZ.BetPlacedOnLeaf}):U.sound.playSound({event:UA.PZ.BetPlaced,args:[y]}),i===zO.Warning&&U.sound.playSound({event:RO.Wo.ClickingFail});break;case j.uu.Move:U.sound.playSound({event:RO.Wo.PlaceChip}),i===zO.Warning&&U.sound.playSound({event:RO.Wo.ClickingFail});break;case j.uu.BetOnAllEven:U.sound.playSound({event:UA.PZ.BetPlacedOnEven}),i===zO.Warning&&U.sound.playSound({event:RO.Wo.ClickingFail});break;case j.uu.BetOnAllOdd:U.sound.playSound({event:UA.PZ.BetPlacedOnOdd}),i===zO.Warning&&U.sound.playSound({event:RO.Wo.ClickingFail});break;case j.uu.AutoPlay:U.sound.playSound({event:RO.Wo.RepeatDouble}),i===zO.Warning&&U.sound.playSound({event:RO.Wo.ClickingFail})}}function fO(W,y){const M=W[y];return!!M&&M>0}function VO(W){for(const y of EO.lightningStormChaserBetCodes)if(fO(W,y))return!0;return!1}function $O(W,y){VO(W)&&!1===y.preferences.getValue(fT._.ChasersEnabled)&&y.preferences.updatePreferenceValue(fT._.ChasersEnabled,!0)}function aO(W){switch(null==W?void 0:W.payload.code){case KO.LowBalance:return PO.x9.LowBalance;case KO.TableBetMaxLimitReached:case KO.MaxBetLimit:case KO.TableSingleBetMaxLimitReached:return PO.x9.MaxTableOrBetLimitReached;default:return PO.x9.Other}}var HO=M(625678),BO=M(864442);function vO(W,y){return W[y]||0}var LO=M(213205);function XO(W){var y,M;const U=Object.values(W);return 0===U.length?null:null!==(M=null!==(y=U.find((W=>(null==W?void 0:W.type)===zO.Error)))&&void 0!==y?y:U[0])&&void 0!==M?M:null}var wO=M(421645);function FO(W){switch(W.payload.code){case KO.WaitForNextGame:return Y.Tl(wO.X.WaitingForNextGameTooltip);case KO.BetsClosed:return Y.Tl(wO.X.BetsClosedTooltip);case KO.LowBalance:return Y.Tl(wO.X.BalanceTooLowTooltip);case KO.LowBalanceChaser:return Y.Tl(wO.X.BalanceTooLowChaserTooltip);case KO.ChaserMinBet:return Y.Tl(wO.X.ChaserMinBetTooltip,{minChaserBet:R.ej(W.payload.amount),feeMultiplier:R.ej(W.payload.multiplier)});case KO.TableBetMaxLimitReached:return Y.Tl(wO.X.TableBetMaxLimitReachedTooltip);case KO.BonusMaxLimitReached:return Y.Tl(wO.X.BonusMaxLimitReached);case KO.TableSingleBetMaxLimitReached:return Y.Tl(wO.X.TableSingleBetMaxLimitReachedTooltip,{amount:R.ej(W.payload.limit)});case KO.MaxBetLimit:return Y.Tl(wO.X.MaxBetSpotValueTooltip,{amount:R.ej(W.payload.limit)});case KO.MinBetLimit:return Y.Tl(wO.X.MinBetSpotValueTooltip,{amount:R.ej(W.payload.limit)})}}var tO,JO=M(590257);(function(W){W["BetSpotValidation"]="TooltipType.BetSpotValidation",W["WaitForNextGame"]="TooltipType.WaitForNextGame"})(tO||(tO={}));const jO={[j.uu.BetOnAllEven]:JO.Or.BetOnAllEven,[j.uu.BetOnAllOdd]:JO.Or.BetOnAllOdd};function CO(W){var y;const{results:M,validationSource:U,store:i}=W;i.tooltips.hideTooltip(tO.BetSpotValidation);const x=Object.values(M);if(0===x.length)return;const n=XO(M);switch(U){case j.uu.BetOnAllEven:case j.uu.BetOnAllOdd:case j.uu.Repeat:case j.uu.Double:if(n){const W=null!==(y=jO[U])&&void 0!==y?y:n.betCode;i.tooltips.showBetSpotTooltip(W,tO.BetSpotValidation,FO(n))}break;default:for(const W of x)W&&i.tooltips.showBetSpotTooltip(W.betCode,tO.BetSpotValidation,FO(W))}}function QO(W){var y;const{betsOnTable:M,betCode:U,bonusMaxLimit:i}=W,x=IO.ur(j.U_.reduce(((W,y)=>{var U;return W+(null!==(U=M[y])&&void 0!==U?U:0)}),0)),n=j.U_.includes(U)?IO.ur(EO.lightningStormNumberBetSpotGroup.reduce(((W,y)=>{var U;return Math.max(W,null!==(U=M[y])&&void 0!==U?U:0)}),0)):null!==(y=M[U])&&void 0!==y?y:0;return IO.ur(Math.max(i-x-n,0))}const Wh=[(W,y)=>{var M;const{bet:U,betCodes:i}=W,x={};if(y.bets.isBettingEnabled&&1===i.length&&j.U_.includes(i[0])){const W=LO.d(U);if(y.abstractGame.values.balanceAvailable<W){const W=i[0];let U=!1;for(const M of y.abstractGame.values.betAmounts){if(!M.enabled)continue;const i=LO.d({[W]:M.value});if(y.abstractGame.values.balanceAvailable>=i){U=!0;break}}x[W]=U?{type:zO.Error,betCode:W,payload:{code:KO.LowBalanceChaser}}:{type:zO.Error,betCode:W,payload:{code:KO.ChaserMinBet,multiplier:null!==(M=j.cd[W])&&void 0!==M?M:1,amount:y.settings.getMinBetLimit(W)}}}}return x},(W,y)=>{const{bet:M,betCodes:U}=W,i=LO.d(M),x={};if(y.abstractGame.values.balanceAvailable<i)for(const W of U)x[W]={type:zO.Error,betCode:W,payload:{code:KO.LowBalance}};return x},(W,y)=>{const{betCodes:M}=W,U={};if(!y.bets.isBettingEnabled){const W=y.bets.totalBet>0?KO.BetsClosed:KO.WaitForNextGame;for(const y of M)U[y]={type:zO.Error,betCode:y,payload:{code:W}}}return U},(W,y)=>{var M;const{bet:U,betCodes:i}=W,x=y.settings.tableMaxBetLimit,n={};if(void 0===x)return n;const k=LO.d(y.bets.bets),g=LO.d(U);if(i.length>1){if(x<g+k)for(const W of i)n[W]={type:zO.Error,betCode:W,payload:{code:KO.TableBetMaxLimitReached,limit:x}}}else if(1===i.length){const W=i[0],y=IO.ur(x-k);if(g>y)if(y>0){const U=null!==(M=j.cd[W])&&void 0!==M?M:1;n[W]={type:zO.Warning,payload:{code:KO.TableSingleBetMaxLimitReached,limit:x},betCode:W,adjustedAmount:IO.ur(y/U)}}else n[W]={type:zO.Error,payload:{code:KO.TableSingleBetMaxLimitReached,limit:x},betCode:W}}return n},(W,y)=>{var M,U;const{bet:i}=W,x={},n=y.settings.bonusMaxBet;if(void 0===n)return x;const k=function(W){var y;const M={add:{},remove:{}},U=Object.keys(W);for(const i of U){const U=null!==(y=W[i])&&void 0!==y?y:0;0!==U&&(U<0?M.remove[i]=U:M.add[i]=U)}return M}(i),g=function(W,y){var M,U;const i={},x=Object.keys(W);for(const n of x){const x=null!==(M=W[n])&&void 0!==M?M:0,k=Math.abs(null!==(U=y.remove[n])&&void 0!==U?U:0),g=Math.max(x-k,0);g>0&&(i[n]=g)}return i}({...y.bets.bets},k),u=Object.keys(k.add),e=Object.keys(g).some((W=>j.U_.includes(W)&&!!g[W])),l=u.some((W=>j.U_.includes(W)));if(!e&&!l)return x;const G=u.filter((W=>W!==EO.LightningStormBetCode.EvenMoney));if(G.length>1){let W=!0;for(const y of G){const U=k.add[y];if(!U||U<=0)continue;const i=U+(null!==(M=g[y])&&void 0!==M?M:0);if(U>QO({betCode:y,betsOnTable:g,bonusMaxLimit:n})){W=!1;break}g[y]=i}if(!W)for(const W of u)x[W]={type:zO.Error,betCode:W,payload:{code:KO.BonusMaxLimitReached}}}else if(1===G.length){const W=G[0],y=null!==(U=k.add[W])&&void 0!==U?U:0,M=QO({betCode:W,betsOnTable:g,bonusMaxLimit:n});y>M&&(x[W]=M>0?{type:zO.Warning,payload:{code:KO.BonusMaxLimitReached},betCode:W,adjustedAmount:M}:{type:zO.Error,payload:{code:KO.BonusMaxLimitReached},betCode:W})}return x},(W,y)=>{var M;const{bet:U,betCodes:i}=W,x={};for(const W of i){const i=U[W];if(!i||i<=0)continue;const n=y.settings.getMaxBetLimit(W),k=null!==(M=y.bets.bets[W])&&void 0!==M?M:0;if(i+k<=n)continue;const g=IO.ur(n-k);x[W]=g>0?{type:zO.Warning,payload:{code:KO.MaxBetLimit,limit:n},betCode:W,adjustedAmount:g}:{type:zO.Error,payload:{code:KO.MaxBetLimit,limit:n},betCode:W}}return x},(W,y)=>{var M;const{bet:U,betCodes:i}=W,x={};for(const W of i){const i=U[W];if(!i||i<=0)continue;const n=y.settings.getMinBetLimit(W);i+(null!==(M=y.bets.bets[W])&&void 0!==M?M:0)>=n||(x[W]={type:zO.Warning,payload:{code:KO.MinBetLimit,limit:n},adjustedAmount:i,betCode:W})}return x}];function yh(W,y){const M=Object.keys(W),U={},i={};for(const U of Wh)Mh(i,U({bet:W,betCodes:M},y));if(lO.A(i))return{bet:W,resultsMap:{}};for(const y of M){const M=i[y];M?M.type===zO.Warning&&(U[y]=M.adjustedAmount):U[y]=W[y]}return{bet:lO.A(U)?void 0:U,resultsMap:i}}function Mh(W,y){const M=Object.keys(y);for(const U of M){const M=W[U],i=y[U];if(M&&i){if(M.type===zO.Error)continue;(i.type===zO.Error||M.type===zO.Warning&&i.type===zO.Warning&&M.adjustedAmount>i.adjustedAmount)&&(W[U]=i)}else i&&(W[U]=i)}return W}var Uh,ih=M(744015);(function(W){W["PlaceChips"]="lightningstorm.placeChips"})(Uh||(Uh={}));class xh{constructor(W){this.props=W,this.status=j.eT.Idle,this.repeatBet=void 0,this.getBetCodeBet=mO((W=>vO(this.bets,W))),this.pendingStormChaserBets=void 0,this.pendingXChaserBets=void 0,this.betHistory=[],this.acceptedBets={},this.moveBet=(W,y)=>{if(W===y||!this.isBettingEnabled)return;const M=vO(this.bets,W);if(M<=0)return;const U={[y]:M,[W]:-M},{bet:i,resultsMap:x}=yh(U,this.props.rootStore),n=j.uu.Move,k=null==i?void 0:i[y];if(void 0!==(null==i?void 0:i[W])&&void 0!==k&&k>0){const x=U[y]-k,g={[y]:i[y],[W]:-(M-x)},u={type:j.yt.Move,bet:g,from:W,to:y};this.betHistory=[...this.betHistory,u],this.props.rootStore.flyingChips.add({...u,bet:{[y]:this.getBetCodeBet(y)}},ih.W.Bounce),this.sendBets(n,u.bet)}CO({results:x,validationSource:n,store:this.props.rootStore}),ZO({actionType:n,results:x,store:this.props.rootStore})},this.removeBet=W=>{const y=vO(this.bets,W);if(y<=0||!this.isBettingEnabled)return;const M={type:j.yt.Remove,bet:{[W]:-y}};this.betHistory=[...this.betHistory,M],this.sendBets(j.uu.Move,M.bet),this.props.rootStore.sound.playSound({event:RO.Wo.Undo})},this.getBetCodesBets=W=>{const y={};for(const M of W)y[M]=this.bets[M];return y},n.Gn(this,{status:n.sH,bets:n.EW,acceptedBets:n.sH,totalBet:n.EW,betHistory:n.sH,repeatBet:n.sH,pendingStormChaserBets:n.sH,pendingXChaserBets:n.sH,isBettingEnabled:n.EW,isDoubleEnabled:n.EW,isRepeatEnabled:n.EW,isUndoEnabled:n.EW,isBetConfirmed:n.EW,hasBets:n.EW,isRepeatVisible:n.EW,setStatus:n.XI,placeBet:n.XI,undo:n.XI,undoAll:n.XI,repeat:n.XI,double:n.XI,setRepeatBet:n.XI,setBet:n.XI,repeatBets:n.XI,setAcceptedBets:n.XI,betOnAll:n.XI,betOnAllEven:n.XI,betOnAllOdd:n.XI,clearBets:n.XI,moveBet:n.XI,removeBet:n.XI,reset:n.XI,setPendingChaserBet:n.XI,clearPendingStormChaserBet:n.XI,clearPendingXChaserBet:n.XI,clearPendingChaserBets:n.XI})}get bets(){const W=this.betHistory.reduce(((W,y)=>{const M=Object.keys(y.bet);for(const U of M){const M=y.bet[U]||0,i=W[U]||0;W[U]=i?IO.ur(i+M):M}return W}),{}),y=Object.keys(W);for(const M of y)0===W[M]&&delete W[M];return W}get totalBet(){return LO.d(this.acceptedBets)||LO.d(this.bets)}get isBettingEnabled(){return this.props.rootStore.gamePhase.phase===BT.BetsOpen}get isDoubleEnabled(){if(this.props.rootStore.abstractGame.isLowBalance)return{enabled:!1,disableReason:PO.x9.LowBalance};if(this.props.rootStore.draggableChip.isDragging)return{enabled:!1,disableReason:PO.x9.Other};if(0===this.totalBet)return{enabled:!1,disableReason:PO.x9.NoBetsPlaced};const W=yh(this.bets,this.props.rootStore);return void 0===W.bet?{enabled:!1,disableReason:aO(XO(W.resultsMap))}:{enabled:!0}}get isRepeatEnabled(){if(this.props.rootStore.abstractGame.isLowBalance)return{enabled:!1,disableReason:PO.x9.LowBalance};if(this.props.rootStore.draggableChip.isDragging)return{enabled:!1,disableReason:PO.x9.Other};if(void 0===this.repeatBet||lO.A(this.repeatBet))return{enabled:!1,disableReason:PO.x9.NoBetsPlaced};if(0!==this.totalBet)return{enabled:!1,disableReason:PO.x9.Other};const W=yh(this.repeatBet,this.props.rootStore);return void 0===W.bet?{enabled:!1,disableReason:aO(XO(W.resultsMap))}:{enabled:!0}}get isRepeatVisible(){return this.isBettingEnabled&&!lO.A(this.repeatBet)&&0===this.totalBet}get isUndoEnabled(){const W=this.betHistory.length>0;return this.isBettingEnabled&&W&&!this.props.rootStore.draggableChip.isDragging?{enabled:!0}:{enabled:!1,disableReason:W?PO.x9.Other:PO.x9.NoBetsPlaced}}get isBetConfirmed(){return j.NX.includes(this.status)}get hasBets(){return this.totalBet>0}setStatus(W){this.status=W}placeBet(W,y){const M=this.props.rootStore.abstractGame.values.betAmountsLastSelectedAmount,{bet:U,resultsMap:i}=yh({[W]:M},this.props.rootStore),x=j.uu.Chip;if(U){const M={type:j.yt.Place,bet:U};$O(U,this.props.rootStore),this.betHistory=[...this.betHistory,M],this.props.rootStore.flyingChips.add({...M,bet:{[W]:this.getBetCodeBet(W)}},ih.W.Bounce),this.sendBets(x,M.bet,y)}CO({results:i,validationSource:x,store:this.props.rootStore}),ZO({actionType:x,betCode:W,results:i,store:this.props.rootStore})}repeat(){this.repeatBets(j.uu.Repeat)}autoplayRepeat(){this.repeatBets(j.uu.AutoPlay)}double(){if(!this.isDoubleEnabled.enabled)return;const{bet:W,resultsMap:y}=yh(this.bets,this.props.rootStore),M=j.uu.Double;if(W){const y={type:j.yt.Place,bet:W};this.betHistory=[...this.betHistory,y],this.props.rootStore.flyingChips.add({...y,bet:this.getBetCodesBets(Object.keys(W))},ih.W.Bounce),this.sendBets(j.uu.Double,y.bet)}CO({results:y,validationSource:M,store:this.props.rootStore})}undo(){if(!this.isUndoEnabled.enabled)return;const W=this.betHistory.slice(),y=W.pop();if(y){this.betHistory=W;let M={};switch(y.type){case j.yt.Place:for(const W of Object.keys(y.bet)){const U=y.bet[W]||0;M[W]=-U}break;case j.yt.Remove:for(const W of Object.keys(y.bet)){const U=y.bet[W]||0;M[W]=-U}break;case j.yt.Move:const W=y.from,U=y.to;M={[W]:y.bet[U],[U]:y.bet[W]}}this.sendBets(j.uu.Undo,M)}this.props.rootStore.tooltips.hideTooltip(tO.BetSpotValidation)}undoAll(){if(!this.isUndoEnabled.enabled)return;const W={};for(const y of Object.keys(this.bets)){const M=this.bets[y]||0;M&&(W[y]=-M)}this.betHistory=[],this.sendBets(j.uu.Undo,W),this.props.rootStore.tooltips.hideTooltip(tO.BetSpotValidation)}betOnAllEven(W){this.betOnAll(j.uu.BetOnAllEven,EO.lightningStormEvenBetSpotGroup,W)}betOnAllOdd(W){this.betOnAll(j.uu.BetOnAllOdd,EO.lightningStormOddBetSpotGroup,W)}setRepeatBet(W){this.repeatBet=W}setBet(W){lO.A(W)?this.betHistory.length>0&&this.clearBets():($O(W,this.props.rootStore),this.betHistory=[{type:j.yt.Place,bet:W}])}setAcceptedBets(W){this.acceptedBets=Object.entries(W).reduce(((W,[y,M])=>(W[y]=M.amount,W)),{})}setPendingChaserBet(W){this.pendingStormChaserBets=W.stormChaser,this.pendingXChaserBets=W.xChaser}clearBets(){this.betHistory=[],this.acceptedBets={}}clearPendingStormChaserBet(){this.pendingStormChaserBets=void 0}clearPendingXChaserBet(){this.pendingXChaserBets=void 0}clearPendingChaserBets(){this.clearPendingStormChaserBet(),this.clearPendingXChaserBet()}reset(){this.status=j.eT.Idle,this.clearPendingChaserBets(),this.clearBets()}repeatBets(W){if(!this.isRepeatEnabled.enabled||!this.repeatBet||lO.A(this.repeatBet))return;const{bet:y,resultsMap:M}=yh(this.repeatBet,this.props.rootStore);if(y){const M={type:j.yt.Place,bet:y};this.betHistory=[...this.betHistory,M],VO(y)&&!1===this.props.rootStore.preferences.getValue(fT._.ChasersEnabled)?this.props.rootStore.preferences.updatePreferenceValue(fT._.ChasersEnabled,!0):this.props.rootStore.flyingChips.add({...M,bet:this.getBetCodesBets(Object.keys(y))},ih.W.Bounce),this.sendBets(W,M.bet)}CO({results:M,validationSource:W,store:this.props.rootStore}),ZO({actionType:W,results:M,store:this.props.rootStore})}betOnAll(W,y,M){const U=this.props.rootStore.abstractGame.values.betAmountsLastSelectedAmount,i={};for(const W of y)i[W]=U;const{bet:x,resultsMap:n}=yh(i,this.props.rootStore);if(x){const y={type:j.yt.Place,bet:x};this.betHistory=[...this.betHistory,y],this.props.rootStore.flyingChips.add({...y,bet:this.getBetCodesBets(Object.keys(x))},ih.W.Bounce),this.sendBets(W,y.bet,M)}CO({results:n,validationSource:W,store:this.props.rootStore}),ZO({actionType:W,results:n,store:this.props.rootStore})}sendBets(W,y,M){this.props.rootStore.transport.sendMessage(function(W,y,M){return{type:Uh.PlaceChips,payload:{chips:M,gameId:W,betTags:y}}}(this.props.rootStore.abstractGame.values.gameRoundId,function(W){const{openMwTables:y,mwLayout:M}=BO.y();return{btMiniGame:HO.Z.LightningStorm,btVideoQuality:W.values.videoQuality,btTableView:`${W.values.videoStreamForCurrentLayout}`,orientation:W.values.orientation,videoProtocol:W.values.videoPlayerName,openMwTables:String(y),mwLayout:String(M)}}(this.props.rootStore.abstractGame),this.bets)),W!==j.uu.AutoPlay&&this.props.rootStore.log.log(C.sN(this.props.rootStore,W,y,M))}}function nh(W){const y=n.mJ((()=>({isRepeatEnabled:W.bets.isRepeatEnabled,isRepeatVisible:W.bets.isRepeatVisible})),(({isRepeatEnabled:y,isRepeatVisible:M})=>{y.enabled?W.abstractGame.actions.betting.repeat.enable():W.abstractGame.actions.betting.repeat.disable(y.disableReason),W.abstractGame.actions.betting.repeat.setVisible(M)}),{fireImmediately:!0}),M=W.abstractGame.actions.betting.repeat.subscribe((()=>W.bets.repeat()));return()=>{y(),M()}}function kh(W){const y=n.mJ((()=>W.bets.isDoubleEnabled),(y=>{y.enabled?W.abstractGame.actions.betting.double.enable():W.abstractGame.actions.betting.double.disable(y.disableReason)}),{fireImmediately:!0}),M=W.abstractGame.actions.betting.double.subscribe((()=>W.bets.double()));return()=>{y(),M()}}function gh(W){const y=n.mJ((()=>W.bets.isUndoEnabled),(y=>{y.enabled?W.abstractGame.actions.betting.undo.enable():W.abstractGame.actions.betting.undo.disable()}),{fireImmediately:!0}),M=W.abstractGame.actions.betting.undo.subscribe((()=>W.bets.undo())),U=W.abstractGame.actions.betting.undoAll.subscribe((()=>W.bets.undoAll()));return()=>{y(),M(),U()}}function uh(W){return n.mJ((()=>({totalBet:W.bets.totalBet})),(({totalBet:y})=>{W.bets.status===j.eT.Open&&W.abstractGame.actions.balance.reserveBet(y)}),{fireImmediately:!0})}function eh(W){return n.mJ((()=>({totalBet:W.bets.totalBet,outcome:W.wheel.outcome,isBonusRound:W.bonus.isActive,bets:W.bets.bets,isDesktop:W.device.isDesktop})),(({totalBet:y,isBonusRound:M,outcome:U,bets:i,isDesktop:x})=>{var n;y>0&&W.abstractGame.values.gameResultAmount>0&&W.abstractGame.actions.gameResult.setAmount(0),W.abstractGame.actions.balance.setTotalBet(y),M&&U?(W.abstractGame.actions.balance.setBonusBet(null!==(n=i[U])&&void 0!==n?n:0),W.abstractGame.actions.totalBetLabel.setLabelTranslationKey(x?wO.X.BonusBetUppercase:wO.X.BonusBet)):(W.abstractGame.actions.balance.setBonusBet(null),W.abstractGame.actions.totalBetLabel.setLabelTranslationKey(x?wO.X.TotalBetUppercase:wO.X.TotalBet))}),{fireImmediately:!0})}function lh(W){return n.mJ((()=>W.bets.repeatBet),(y=>{W.abstractGame.actions.balance.setTotalBetToRepeat(y?LO.d(y):0)}),{fireImmediately:!0})}var Gh=M(757062);function Yh(W){return W/1e3}function ch(W){return 1e3*W}function Dh(W,y){return W%y||y}function rh(W){return new Ah(W)}class Ah{constructor(W){this.props=W,this.running=!1,this.totalTimeRemainingSec=0,this.timeRemainingSec=0,this.finishTime=0,this.tickTimer=W=>{this.timeoutId=window.setTimeout(n.XI((()=>{const W=(y=this.finishTime,Math.max(0,y-Date.now()));var y;const M=Yh(W);this.timeRemainingSec=M,M>0?this.tickTimer(Dh(W,this.props.step)):this.stopTimer()})),W)},n.Gn(this,{running:n.sH,totalTimeRemainingSec:n.sH,timeRemainingSec:n.sH,startTimer:n.XI,stopTimer:n.XI,pauseTimer:n.XI,resumeTimer:n.XI,setTimeRemaining:n.XI})}startTimer(W,y){this.stopTimer(),this.finishTime=Date.now()+W;const M=Yh(W),U=Yh(y||W);M>0&&(this.running=!0,this.totalTimeRemainingSec=U,this.timeRemainingSec=M,this.tickTimer(Dh(W,this.props.step)))}pauseTimer(){this.timeoutId&&window.clearTimeout(this.timeoutId),this.running=!1}resumeTimer(){if(this.timeRemainingSec>0&&!this.running){this.timeoutId&&window.clearTimeout(this.timeoutId);const W=1e3*this.timeRemainingSec;this.finishTime=Date.now()+W,this.tickTimer(Dh(W,this.props.step)),this.running=!0}}stopTimer(){this.timeoutId&&window.clearTimeout(this.timeoutId),this.totalTimeRemainingSec=0,this.timeRemainingSec>0&&(this.timeRemainingSec=0),this.running=!1}setTimeRemaining(W){this.timeRemainingSec=Yh(W)}dispose(){this.stopTimer()}}class Th{constructor(W){this.props=W,this.timer=rh({step:1e3}),n.Gn(this,{tickingSoundThreshold:n.EW,totalTime:n.EW,timeRemaining:n.EW,running:n.EW})}get tickingSoundThreshold(){return 0===this.props.rootStore.bets.totalBet?this.props.rootStore.settings.timerSoundTickingThreshold:void 0}get totalTime(){return this.timer.totalTimeRemainingSec}get timeRemaining(){return this.timer.timeRemainingSec}get betsClosingSoon(){return ch(this.timeRemaining)<=this.props.rootStore.settings.betsClosingTime}get running(){return this.timer.running}start(W){this.timer.startTimer(W,W)}stop(){this.timer.stopTimer()}stopAt(W){const y=Gh.rv(W),M=ch(this.totalTime);this.timer.stopTimer(),this.timer.startTimer(W,M),this.timer.pauseTimer();const U=this.props.rootStore.abstractGame.actions.decisionTimer.hidden.value;this.props.rootStore.abstractGame.actions.decisionTimer.hide(),this.props.rootStore.abstractGame.actions.decisionTimer.setCountdownFromSeconds(y),this.props.rootStore.abstractGame.actions.decisionTimer.setStartTime(void 0),this.props.rootStore.abstractGame.actions.decisionTimer.setSecondsRemaining(y),U||this.props.rootStore.abstractGame.actions.decisionTimer.show()}reset(){this.stop()}}var Oh,hh,Sh=M(912986);function oh(W){return W.device.isDesktop||W.device.isTablet?Sh.A:n.mJ((()=>({phase:W.gamePhase.phase,bettingTime:W.bettingTimer.totalTime})),(({phase:y,bettingTime:M})=>{y===BT.BetsOpen&&M>0?(W.abstractGame.actions.decisionTimer.show(),W.abstractGame.actions.decisionTimer.setIsCountdown(!0),W.abstractGame.actions.decisionTimer.setValueAnimationStart(Gh.rv(W.settings.betsClosingTime)),W.abstractGame.actions.decisionTimer.setStartTime(Date.now()),W.abstractGame.actions.decisionTimer.setCountdownFromSeconds(M)):W.abstractGame.actions.decisionTimer.hide()}),{fireImmediately:!0})}function dh(W){return n.mJ((()=>({wheelOutcome:W.wheel.outcome,isBetConfirmed:W.bets.isBetConfirmed,bets:W.bets.bets,bonusBetCodes:W.wheel.bonusBetCodes})),(({wheelOutcome:y,isBetConfirmed:M,bets:U,bonusBetCodes:i})=>{y&&M&&fO(U,y)&&void 0!==i[y]&&W.bonus.setIsParticipating(!0)}),{fireImmediately:!0})}function qh(W){return n.mJ((()=>W.ui.fireballBonusBetSpot.showWheelMultiplier||W.ui.hotSpotBonusBetSpot.showWheelMultiplier||W.ui.batteryChargerBonusBetSpot.showWheelMultiplier||W.ui.monsterMashBonusBetSpot.showWheelMultiplier||W.ui.stormBonusBetSpot.showWheelMultiplier),((y,M)=>{var U,i;const x=null!==(i=null===(U=W.wheel.outcomeMultiplier)||void 0===U?void 0:U.value)&&void 0!==i?i:0,n=W.abstractGame.values.isPageVisible,k=W.restore.isRestoring;M&&!y&&x>0&&n&&!k&&W.bonus.flyWheelMultiplier(x)}),{fireImmediately:!0})}function sh(W){return n.mJ((()=>W.gamePhase.phase),(y=>{switch(y){case BT.HotSpot:W.bonus.setCurrentBonus(EO.LightningStormBonusGame.HotSpot);break;case BT.MonsterMash:W.bonus.setCurrentBonus(EO.LightningStormBonusGame.MonsterMash);break;case BT.Fireball:W.bonus.setCurrentBonus(EO.LightningStormBonusGame.Fireball);break;case BT.BatteryCharger:W.bonus.setCurrentBonus(EO.LightningStormBonusGame.BatteryCharger);break;case BT.StormBonus:W.bonus.setCurrentBonus(EO.LightningStormBonusGame.StormBonus)}}),{fireImmediately:!0})}class Nh{constructor(W){this.props=W,this.isParticipating=!1,this.currentBonus=void 0,this.flyingWheelMultiplier=void 0,n.Gn(this,{isParticipating:n.sH,isActive:n.EW,currentBonus:n.sH,flyingWheelMultiplier:n.sH,isBonusObservingMode:n.EW,isXXXtremeMode:n.EW,setIsParticipating:n.XI,setCurrentBonus:n.XI,flyWheelMultiplier:n.XI,clearFlyingWheelMultiplier:n.XI,reset:n.XI})}get isActive(){return void 0!==this.currentBonus}get isBonusObservingMode(){return this.isActive&&!this.isParticipating}get isXXXtremeMode(){var W;return(null===(W=this.props.rootStore.wheel.outcomeMultiplier)||void 0===W?void 0:W.level)===EO.LightningStormMultiplierLevel.High}setIsParticipating(W){this.isParticipating=W}setCurrentBonus(W){this.currentBonus=W}flyWheelMultiplier(W){this.flyingWheelMultiplier={id:`bonus-wheel-multiplier-${Math.random()}`,amount:W,done:!1}}clearFlyingWheelMultiplier(){this.flyingWheelMultiplier=void 0}reset(){this.isParticipating=!1,this.currentBonus=void 0,this.flyingWheelMultiplier=void 0}}(function(W){W["Initial"]="Initial",W["Intro"]="Intro",W["MultiplierDisplay"]="MultiplierDisplay",W["MultiplierUpdate"]="MultiplierUpdate",W["ReadyForBall"]="ReadyForBall",W["BallLaunched"]="BallLaunched",W["MultiplyingGrid"]="MultiplyingGrid",W["FinalResult"]="FinalResult",W["Celebration"]="Celebration"})(Oh||(Oh={})),function(W){W["Initial"]="Initial",W["Intro"]="Intro",W["WheelMultiplierUpdate"]="MultiplierUpdate",W["ReadyForSpin"]="ReadyForSpin",W["ReelSpinning"]="ReelSpin",W["Celebration"]="Celebration"}(hh||(hh={}));var _h=M(78915);function ph(W){return n.mJ((()=>({phase:W.gamePhase.phase,stormPhase:W.stormBonus.phase,batteryChargerPhase:W.batteryCharger.phase,hotSpotPhase:W.hotSpot.phase,fireballPhase:W.fireball.phase,monsterMashPhase:W.monsterMash.phase})),(({phase:y,stormPhase:M,batteryChargerPhase:U,hotSpotPhase:i,fireballPhase:x,monsterMashPhase:n})=>{switch(y){case BT.StormBonus:M!==_h.uG.Initial&&M!==_h.uG.Intro&&W.bonusGameTransition.isTransitioning&&(W.bonusGameTransition.fastForward(),W.ui.bettingGrid.setIsWinningBetSpotAnimating(!1));break;case BT.BatteryCharger:U!==xO.Initial&&U!==xO.Intro&&W.bonusGameTransition.isTransitioning&&(W.bonusGameTransition.fastForward(),W.ui.bettingGrid.setIsWinningBetSpotAnimating(!1));break;case BT.HotSpot:i!==Pr.bK.Initial&&i!==Pr.bK.Intro&&W.bonusGameTransition.isTransitioning&&(W.bonusGameTransition.fastForward(),W.ui.bettingGrid.setIsWinningBetSpotAnimating(!1));break;case BT.Fireball:x!==Oh.Initial&&x!==Oh.Intro&&W.bonusGameTransition.isTransitioning&&(W.bonusGameTransition.fastForward(),W.ui.bettingGrid.setIsWinningBetSpotAnimating(!1));break;case BT.MonsterMash:n!==hh.Initial&&n!==hh.Intro&&W.bonusGameTransition.isTransitioning&&(W.bonusGameTransition.fastForward(),W.ui.bettingGrid.setIsWinningBetSpotAnimating(!1))}}))}class bh{constructor(){this.isTransitioning=!1,this.isTransitionDone=!1,this.isBetSpotParked=!1,n.Gn(this,{isTransitioning:n.sH,isTransitionDone:n.sH,isBetSpotParked:n.sH,setIsTransitioning:n.XI,setIsTransitionDone:n.XI,setIsBetSpotParked:n.XI,reset:n.XI})}setIsTransitioning(W){this.isTransitioning=W}setIsTransitionDone(W){this.isTransitionDone=W}setIsBetSpotParked(W){this.isBetSpotParked=W}fastForward(){this.isTransitioning&&(this.setIsBetSpotParked(!0),this.setIsTransitionDone(!0),this.setIsTransitioning(!1))}reset(){this.setIsTransitionDone(!1),this.setIsTransitioning(!1),this.setIsBetSpotParked(!1)}}var mh=M(109922);function zh(){return`flyingChip-${Math.random()}`}class Kh{get phase(){return 0===this.flow.length?mh.tM.None:this.flow[0]}constructor(W){this.props=W,this.isPhaseDone=mO((W=>this.donePhases.includes(W))),this.chaserChips=[],this.flow=[],this.donePhases=[],this.onChipLanded=n.XI((W=>{this.chaserChips=this.chaserChips.filter((y=>y.id!==W)),delete this.props.rootStore.references.chaserAnimatedChipsReference[W]})),n.Gn(this,{chaserChips:n.sH,flow:n.sH,donePhases:n.sH,phase:n.EW,setFlow:n.XI,setCurrentPhaseDone:n.XI,finishFlow:n.XI,reset:n.XI})}setFlow(W){this.donePhases=[];for(const y of mh.wt)W.includes(y)||(this.donePhases=[...this.donePhases,y]);this.flow=W}setCurrentPhaseDone(){if(this.flow.length>0){const W=this.flow[0];this.flow=this.flow.slice(1),this.donePhases=[...this.donePhases,W]}}finishFlow(){this.donePhases=mh.wt.slice(),this.flow=[]}get enabled(){return!this.props.rootStore.ui.bettingGridTransition.isTransitioning}addAnimatedChaserChips(W,y,M,U,i){if(0===M||!this.enabled)return;const x=[];W.forEach(((W,n)=>{const k=zh();x.push({id:k,from:y,to:W,amount:M,animationType:i,chipIndex:n,totalAmount:U[W]||M,onDidFly:()=>{this.onChipLanded(k)},targetBetCode:W,playSound:()=>{var y;if(i===mh.tE.XChaser){const M=null===(y=this.props.rootStore.wheel.getMultiplierFor(W))||void 0===y?void 0:y.level;if(!M)return;this.props.rootStore.sound.playSound({event:UA.PZ.XChaserChipAnimating,args:[M]})}}})})),x&&x.length>0&&(this.chaserChips=[...this.chaserChips,...x])}reset(){this.flow=[],this.donePhases=[],this.chaserChips=[]}}var Ph=M(170877),Rh=M(617401);class Ih{constructor(W){this.props=W,n.Gn(this,{isPortrait:n.EW,isLandscape:n.EW,componentLayout:n.EW,isClassicLayout:n.EW})}get isPortrait(){return this.props.rootStore.abstractGame.values.orientation===G.t.Portrait}get isLandscape(){return this.props.rootStore.abstractGame.values.orientation===G.t.Landscape}get isPhoneSquareScreen(){const{height:W,width:y}=this.props.rootStore.abstractGame.values.gameDimensions;return W/y<1.15&&this.isPhone}get isDesktop(){return this.props.rootStore.abstractGame.platform===Ph.OD.Desktop}get isPhone(){return this.props.rootStore.abstractGame.platform===Ph.OD.Phone}get isTablet(){return this.props.rootStore.abstractGame.platform===Ph.OD.Tablet}get componentLayout(){return this.isDesktop?this.isClassicLayout?Rh._.DesktopClassic:Rh._.Desktop:this.isTablet?Rh._.Tablet:this.isLandscape?Rh._.MobileLandscape:Rh._.MobilePortrait}get isClassicLayout(){return this.props.rootStore.abstractGame.values.layoutCurrent===EO.LayoutType.Classic}get userAgent(){return this.props.DS.userAgent}}function Eh(W){return n.mJ((()=>{var y,M;return{isBettingEnabled:W.bets.isBettingEnabled,dragBetValue:(null===(y=W.draggableChip.draggedChipInfo)||void 0===y?void 0:y.start)?W.bets.getBetCodeBet(null===(M=W.draggableChip.draggedChipInfo)||void 0===M?void 0:M.start):0}}),(({isBettingEnabled:y,dragBetValue:M})=>{(!y||M<=0)&&W.draggableChip.isDragging&&W.draggableChip.onCancel()}))}class Zh{constructor(W){this.props=W,this.draggedChipInfo=void 0,this.isChipDraggedFor=mO((W=>{var y;return(null===(y=this.draggedChipInfo)||void 0===y?void 0:y.start)===W})),this.onStart=(W,y)=>{this.draggedChipInfo||(this.draggedChipInfo={initiator:W,start:y})},this.onEnd=W=>{this.draggedChipInfo&&(W&&this.draggedChipInfo.start!==W?this.props.rootStore.bets.moveBet(this.draggedChipInfo.start,W):W||this.props.rootStore.bets.removeBet(this.draggedChipInfo.start),this.draggedChipInfo=void 0)},this.onCancel=()=>{this.draggedChipInfo&&(this.draggedChipInfo=void 0)},n.Gn(this,{draggedChipInfo:n.sH,canDrag:n.EW,isDragging:n.EW,onStart:n.XI,onEnd:n.XI,onCancel:n.XI})}get canDrag(){return this.isDraggingEnabled&&this.props.rootStore.bets.isBettingEnabled}get isDraggingEnabled(){return this.props.rootStore.settings.isChipDragDropEnabled}get isDragging(){return void 0!==this.draggedChipInfo}}const fh={type:EO.LightningStormBonusMultiplierType.Regular,value:0};class Vh{constructor(){this.phase=Oh.Initial,this.multiplier=fh,n.Gn(this,{phase:n.sH,multiplier:n.sH,setPhase:n.XI,setMultiplier:n.XI})}setPhase(W){this.phase=W}setMultiplier(W){this.multiplier=W}reset(){this.setPhase(Oh.Initial),this.setMultiplier(fh)}}class $h{get enabled(){return!this.props.rootStore.ui.bettingGridTransition.isTransitioning}constructor(W){this.props=W,this.chips=[],this.isWinningChipFlying=!1,this.onChipLanded=n.XI((W=>{this.chips=this.chips.filter((y=>y.id!==W))})),this.flyWinningChip=(W,y)=>{if(0===y||!this.enabled)return;this.isWinningChipFlying=!0;const M=zh(),U="rewardGames"===this.props.rootStore.abstractGame.values.playMode?JO.Or.TotalAmount:JO.Or.Balance,i={id:M,addType:ih.m.Winning,from:W,to:U,amount:y,animationType:ih.W.Fly,onDidFly:n.XI((()=>{this.isWinningChipFlying=!1,this.onChipLanded(M)}))};this.chips=[i]},n.Gn(this,{enabled:n.EW,chips:n.sH,isWinningChipFlying:n.sH,add:n.XI,remove:n.XI,flyWinningChip:n.XI,clearAll:n.XI})}add(W,y=ih.W.Fly){if(!this.enabled)return;let M;switch(W.type){case j.yt.Move:M=this.getAddMoveChips(W,y);break;case j.yt.Place:M=this.getAddPlaceChips(W,y)}M&&M.length>0&&(this.chips=[...this.chips,...M])}remove(W){if(!this.enabled)return;let y;switch(W.type){case j.yt.Move:y=this.getRemoveMoveChips(W);break;case j.yt.Place:y=this.getRemovePlaceChips(W);break;case j.yt.Remove:y=this.getRemoveChips(W)}y&&y.length>0&&(this.chips=[...this.chips,...y])}clearAll(){this.chips=[],this.isWinningChipFlying=!1}dispose(){this.clearAll()}getAddMoveChips(W,y=ih.W.Fly){const M=[],U=zh();return M.push({id:U,addType:ih.m.Betting,from:y===ih.W.Fly?JO.Or.DraggableChip:W.to,to:W.to,amount:W.bet[W.to]||0,onDidFly:()=>this.onChipLanded(U),animationType:y}),M}getAddPlaceChips(W,y=ih.W.Fly){const M=[],U=Object.keys(W.bet);for(const i of U){const U=W.bet[i];if(U){const W=zh();M.push({id:W,addType:ih.m.Betting,from:y===ih.W.Fly?JO.Or.SelectedChip:i,to:i,amount:U,onDidFly:()=>this.onChipLanded(W),animationType:y})}}return M}getRemoveMoveChips(W){const y=[],M=zh(),U=W.bet[W.from];return U&&y.push({id:M,addType:ih.m.Betting,from:W.to,to:W.from,amount:-U,onDidFly:()=>this.onChipLanded(M),animationType:ih.W.Fly}),y}getRemovePlaceChips(W){const y=[],M=Object.keys(W.bet);for(const U of M){const M=W.bet[U];if(M){const W=zh();y.push({id:W,addType:ih.m.Betting,from:U,to:this.props.rootStore.abstractGame.values.chipstackHidden?JO.Or.Chipstack:JO.Or.SelectedChip,amount:M,onDidFly:()=>this.onChipLanded(W),animationType:ih.W.Fly})}}return y}getRemoveChips(W){const y=[],M=Object.keys(W.bet);for(const U of M){const M=W.bet[U];if(M){const W=zh();y.push({id:W,addType:ih.m.Betting,from:JO.Or.DraggableChip,to:JO.Or.SelectedChip,amount:-M,onDidFly:()=>this.onChipLanded(W),animationType:ih.W.Fly})}}return y}}class ah{constructor(){this.phase=BT.Initial,n.Gn(this,{phase:n.sH,setPhase:n.XI})}setPhase(W){this.phase=W}}var Hh;(function(W){W["Decision"]="lightningstorm.hotSpot.decision"})(Hh||(Hh={}));class Bh{constructor(W){this.props=W,this.phase=Pr.bK.Initial,this.multiplier=0,this.selectedSpot=void 0,this.statistics=Pr.Y8,this.timer=rh({step:1e3}),n.Gn(this,{phase:n.sH,multiplier:n.sH,selectedSpot:n.sH,statistics:n.sH.struct,decisionTimeRemaining:n.EW,decisionTotalTime:n.EW,decisionTimerRunning:n.EW,isDecisionTime:n.EW,selectedSpotCoordinate:n.EW,isActive:n.EW,setPhase:n.XI,setMultiplier:n.XI,select:n.XI,setSelectedSpot:n.XI,setStatistics:n.XI,reset:n.XI})}get isActive(){return this.props.rootStore.bonus.currentBonus===EO.LightningStormBonusGame.HotSpot}get decisionTimeRemaining(){return this.timer.timeRemainingSec}get decisionTotalTime(){return this.timer.totalTimeRemainingSec}get decisionTimerRunning(){return this.timer.running}get isDecisionTime(){return this.decisionTimeRemaining>0&&this.phase===Pr.bK.DecisionsOpen&&this.props.rootStore.bonus.isParticipating}get selectedSpotCoordinate(){if(this.selectedSpot)return function(W){const y=W.slice(0,1),M=W.slice(1),U=Pr.Ky.indexOf(M),i=Pr.yi.indexOf(y);if(-1!==U&&-1!==i)return[U,i]}(this.selectedSpot)}setPhase(W){this.phase=W}setMultiplier(W){this.multiplier=W}startDecisionTimer(W){this.timer.startTimer(W,this.props.rootStore.settings.hotSpotDecisionTime)}stopDecisionTimer(){this.timer.stopTimer()}stopDecisionTimerAt(W){const y=ch(this.decisionTotalTime);this.timer.stopTimer(),this.timer.startTimer(W,y),this.timer.pauseTimer()}select(W){this.isDecisionTime&&(this.setSelectedSpot(W),this.props.rootStore.transport.sendMessage(function(W,y){return{type:Hh.Decision,payload:{position:y,gameId:W}}}(this.props.rootStore.abstractGame.values.gameRoundId,W)))}setSelectedSpot(W){this.selectedSpot=W}setStatistics(W){this.statistics=W}reset(){this.setPhase(Pr.bK.Initial),this.setMultiplier(0),this.timer.stopTimer(),this.selectedSpot=void 0,this.setStatistics(Pr.Y8)}}class vh{constructor(){this.phase=ET.G.Idle,this.src=void 0,this.logo=void 0,this.onReady=new AT.h,n.Gn(this,{phase:n.sH,src:n.sH,logo:n.sH,setPhase:n.XI,setSource:n.XI,setLogo:n.XI,done:n.XI})}setPhase(W){this.phase=W}setSource(W){this.src=W}setLogo(W){this.logo=W}done(){var W;this.setPhase(ET.G.Done),this.onReady.resolve(),null===(W=this.logo)||void 0===W||W.release(),this.logo=void 0,this.src&&URL.revokeObjectURL(this.src),this.src=void 0}}const Lh=[BT.BetsClosed,BT.DisplayBonuses];function Xh(W){return n.mJ((()=>({phase:W.gamePhase.phase,bettingGridTransition:W.ui.bettingGridTransition.currentTransitionState})),(({phase:y})=>{Lh.includes(y)&&W.lightningRound.setIsActive(!0)}),{fireImmediately:!0})}function wh(W){return n.mJ((()=>({phase:W.gamePhase.phase,isBonusShootAnimating:W.lightningRound.isBonusShootAnimating,multipliers:W.wheel.multipliers})),(({phase:y,isBonusShootAnimating:M,multipliers:U})=>{Lh.includes(y)&&!(Object.values(U).length>0)||M||W.lightningRound.setIsActive(!1)}),{fireImmediately:!0})}class Fh{constructor(){this.isActive=!1,this.bonusShoots=[],this.isBonusShootAnimating=!1,n.Gn(this,{isActive:n.sH,bonusShoots:n.sH,isBonusShootAnimating:n.sH,setIsActive:n.XI,addBonusShoot:n.XI,finishBonusShoot:n.XI,setIsBonusShootAnimating:n.XI,reset:n.XI})}setIsActive(W){this.isActive=W}addBonusShoot(W){this.bonusShoots=[...this.bonusShoots,W]}finishBonusShoot(W){const y=this.bonusShoots.findIndex((y=>y.id===W));if(y>=0){const W=[...this.bonusShoots];W[y]={...W[y],done:!0},this.bonusShoots=W}}setIsBonusShootAnimating(W){this.isBonusShootAnimating=W}reset(){this.isActive=!1,this.bonusShoots=[]}}class th{constructor(W){this.props=W,this.log=W=>{this.props.rootStore.abstractGame.actions.log(W)}}}class Jh{constructor(){this.phase=hh.Initial,this.multiplier=0,n.Gn(this,{phase:n.sH,multiplier:n.sH,setPhase:n.XI,setMultiplier:n.XI})}setPhase(W){this.phase=W}setMultiplier(W){this.multiplier=W}reset(){this.setPhase(hh.Initial),this.setMultiplier(0)}}class jh{get preferences(){return this.props.rootStore.abstractGame.values.preferences}constructor(W){this.props=W,this.isLoaded=!1,this.getValue=mO((W=>this.preferences[W])),this.isDisposed=!1,n.Gn(this,{isLoaded:n.sH,preferences:n.EW,dispose:n.XI});const y=n.XI((()=>{this.isDisposed||(this.isLoaded=!0)}));W.rootStore.abstractGame.actions.preferences.initialization.then(y).catch(y)}updatePreferenceValue(W,y){this.props.rootStore.abstractGame.actions.preferences.setPreferences({key:W,value:y})}dispose(){this.isDisposed=!0,this.isLoaded=!1}}function Ch(W){return n.mJ((()=>({gameDimensions:W.abstractGame.values.gameDimensions,layout:W.abstractGame.values.layoutCurrent,bettingGridTransition:W.ui.bettingGridTransition.isTransitioning,chasersEnable:W.ui.bettingGrid.chasersEnabled})),(()=>{W.references.clearBetSpotRects()}),{fireImmediately:!0})}var Qh=M(163828),WS=M(467309),yS=M(182728);class MS{constructor(W){this.props=W,this.bonusBetSpotReferences=void 0,this.lightningGridCorners=void 0,this.betSpotNumberTextReferences={},this.betSpotBonusBackgroundReferences={},this.chaserBorderReferences={},this.bonusFlyingWheelMultiplier=null,this.chaserBackgroundGradientReferences={},this.footerLogoReference=null,this.chaserExpanderReference=void 0,this.hotSpotMultiplierReference=null,this.bettingGridRefs={container:null},this.chaserAnimatedChipsReference={},this.references={},this.betSpotRects={},this.setReference=(W,y)=>{this.references={...this.references,[W]:y}},this.getReference=W=>{switch(W){case JO.Or.Chipstack:return WS.du();case JO.Or.SelectedChip:return WS.CG();case JO.Or.Balance:return yS.T.balance.current;case JO.Or.TotalAmount:return yS.T.totalBetAmount.current;default:return this.references[W]}},this.setBetSpotReference=(W,y)=>{this.references={...this.references,[W]:y}},this.getBetSpotReference=W=>this.references[W],this.setBetSpotChipReference=(W,y,M)=>{this.references={...this.references,[`${W}_${y}_chip`]:M}},this.getBetSpotChipReference=(W,y)=>this.references[`${W}_${y}_chip`],this.setBetSpotNumberTextReference=(W,y)=>{this.betSpotNumberTextReferences={...this.betSpotNumberTextReferences,[W]:y}},this.getBetSpotRect=W=>{let y=this.betSpotRects[W];if(y)return y;const M=this.getBetSpotReference(W);return M&&(y=Qh.x(M,this.props.rootStore.abstractGame.values.gameDimensions.reverseScale),this.betSpotRects[W]=y),y},this.setBonusBetSpotReferences=W=>{this.bonusBetSpotReferences=W?{...W}:void 0},this.clearBetSpotRects=()=>{this.betSpotRects={}},this.setLightningGridCorners=W=>{this.lightningGridCorners=W},this.setBetSpotBonusBackgroundRef=(W,y)=>{this.betSpotBonusBackgroundReferences={...this.betSpotBonusBackgroundReferences,[W]:y}},this.setBonusFlyingWheelMultiplierReferences=W=>{this.bonusFlyingWheelMultiplier=W},this.setChaserBorderReference=(W,y)=>{this.chaserBorderReferences={...this.chaserBorderReferences,[W]:y}},this.setChaserBackgroundGradientReferences=(W,y)=>{this.chaserBackgroundGradientReferences={...this.chaserBackgroundGradientReferences,[W]:y}},this.setFooterLogoReference=W=>{this.footerLogoReference=W},this.setChaserExpanderReferenceType=W=>{this.chaserExpanderReference=W},this.setHotSpotMultiplierReference=W=>{this.hotSpotMultiplierReference=W},this.setBettingGridContainerReference=W=>{this.bettingGridRefs.container=W},this.setChaserAnimatedChipsReference=(W,y)=>{this.chaserAnimatedChipsReference={...this.chaserAnimatedChipsReference,[y]:W}},n.Gn(this,{references:n.sH.shallow,bonusBetSpotReferences:n.sH.shallow,lightningGridCorners:n.sH.shallow,betSpotNumberTextReferences:n.sH.shallow,betSpotBonusBackgroundReferences:n.sH.shallow,chaserBorderReferences:n.sH.shallow,bonusFlyingWheelMultiplier:n.sH.shallow,footerLogoReference:n.sH,chaserExpanderReference:n.sH.shallow,hotSpotMultiplierReference:n.sH.shallow,bettingGridRefs:n.sH.shallow,chaserAnimatedChipsReference:n.sH.shallow,chaserBackgroundGradientReferences:n.sH.shallow,setReference:n.XI,setBetSpotReference:n.XI,setBetSpotChipReference:n.XI,setBonusBetSpotReferences:n.XI,setLightningGridCorners:n.XI,setBetSpotNumberTextReference:n.XI,setBetSpotBonusBackgroundRef:n.XI,setChaserBorderReference:n.XI,setBonusFlyingWheelMultiplierReferences:n.XI,setFooterLogoReference:n.XI,setChaserExpanderReferenceType:n.XI,setHotSpotMultiplierReference:n.XI,setBettingGridContainerReference:n.XI,setChaserAnimatedChipsReference:n.XI,setChaserBackgroundGradientReferences:n.XI,dispose:n.XI})}dispose(){this.references={},this.lightningGridCorners=void 0,this.bonusBetSpotReferences=void 0,this.betSpotNumberTextReferences={},this.betSpotBonusBackgroundReferences={},this.footerLogoReference=null,this.bettingGridRefs={container:null},this.chaserAnimatedChipsReference={}}}class US{constructor(){this.isRestoring=!0,n.Gn(this,{isRestoring:n.sH,setIsRestoring:n.XI})}setIsRestoring(W){this.isRestoring=W}}function iS(W){return n.mJ((()=>({showGameResult:W.result.showGameResult,payout:W.result.payout})),(({showGameResult:y,payout:M})=>{y&&M.amount>0&&W.abstractGame.actions.gameResult.setAmount(M.amount)}),{fireImmediately:!0})}var xS=M(981298),nS=M(294851);const kS={amount:0,level:xS.R.None};class gS{constructor(W){this.props=W,this.payout=kS,this.chipWinAmount=0,this.winners=void 0,this.winningMultiplier=0,this.timeRemaining=0,this.blockCelebration=!1,this.setChipWinAmount=W=>{this.chipWinAmount=W},this.setBlockCelebration=W=>{this.blockCelebration=W},n.Gn(this,{payout:n.sH,chipWinAmount:n.sH,winners:n.sH,winningMultiplier:n.sH,timeRemaining:n.sH,blockCelebration:n.sH,bonusOutcome:n.EW,showGameResult:n.EW,setPayout:n.XI,setChipWinAmount:n.XI,setWinners:n.XI,setWinningMultiplier:n.XI,setTimeRemaining:n.XI,setBlockCelebration:n.XI,reset:n.XI})}get bonusOutcome(){if(this.props.rootStore.wheel.outcome)return this.props.rootStore.wheel.bonusBetCodes[this.props.rootStore.wheel.outcome]}setWinningMultiplier(W){this.winningMultiplier=W}setPayout(W){this.payout=W}get showGameResult(){return this.props.rootStore.gamePhase.phase===BT.GameResolved}setWinners(W){this.winners=W}showMaxMultiplierToast(W){this.props.rootStore.bets.hasBets&&this.props.rootStore.abstractGame.actions.toasts.show({type:nS.C.GenericToast,props:{title:Y.Tl(wO.X.MaxMultiplierTitle),description:Y.Tl(wO.X.MaxMultiplierMessage,{amount:W})}})}setTimeRemaining(W){this.timeRemaining=W}reset(){this.setPayout(kS),this.setChipWinAmount(0),this.setWinningMultiplier(0),this.setTimeRemaining(0),this.winners=void 0,this.blockCelebration=!1}}var uS=M(712011);class eS{constructor(W){this.props=W,this.getMaxBetLimit=W=>this.props.gameSettings.getMaxBetGroupLimit($T.uR[W]),this.getMinBetLimit=W=>this.props.gameSettings.getMinBetGroupLimit($T.uR[W]),this.getMinBetGroupLimit=W=>this.props.gameSettings.getMinBetGroupLimit(W),this.getMaxBetGroupLimit=W=>this.props.gameSettings.getMaxBetGroupLimit(W);const y=W.gameSettings.rawConfig[$T.xB.XXXtremeModeHaptic];y&&(this.xxxTremeModeHaptic=y.split(",").map((W=>parseInt(W,10))))}get currencyCode(){return this.props.gameSettings.getCurrencyCode()}get currencyDecimals(){return this.props.gameSettings.getCurrencyDecimals()}get showDecimalsForOneMillionBalance(){return this.props.gameSettings.showDecimalsForOneMillionBalance()}get tableName(){return this.props.gameSettings.getTableName()}get tableId(){return this.props.gameSettings.getTableId()}get payoutLimit(){return this.props.gameSettings.payoutLimit()}get tableBetLimits(){return this.props.gameSettings.tableBetLimits}get minBetAmount(){return this.tableBetLimits[0]}get tableLogo(){const W=`immersive_logo_${Y.vL().immersiveLogo||this.props.gameSettings.getLanguageCode()}`,y=this.props.gameSettings.rawConfig[W];return uS.d(y||this.props.gameSettings.rawConfig.immersive_logo)}get betsClosingTime(){return this.props.gameSettings.betsClosingTime()}get showCountDownTimer(){return this.props.gameSettings.showCountDownTimer()}get bonusMaxBet(){return this.props.gameSettings.bonusMaxBet}get historyScrollableColumnCount(){return aT(this.props.gameSettings.rawConfig[$T.xB.HistoryScrollableColumnCount],0)}get isChipDragDropEnabled(){return"true"===this.props.gameSettings.rawConfig[$T.xB.IsDraggableChipSupported]}get tableMaxBetLimit(){return this.props.gameSettings.tableMaxBetLimit}get hotSpotDecisionTime(){return aT(this.props.gameSettings.rawConfig[$T.xB.HotSpotDecisionTime],15e3)}get stormBonusDecisionTime(){return aT(this.props.gameSettings.rawConfig[$T.xB.StormBonusDecisionTime],15e3)}get makeDecisionClosingTime(){return aT(this.props.gameSettings.rawConfig[$T.xB.MakeDecisionClosingTime],5e3)}get displayBonusDelay(){return aT(this.props.gameSettings.rawConfig[$T.xB.DisplayBonusDelay],0)}get introTimeout(){return aT(this.props.gameSettings.rawConfig[$T.xB.IntroTimeout],15e3)}get hideYouWinOnLowCelebration(){return this.props.gameSettings.hideYouWinOnLowCelebration()}get timerSoundTickingThreshold(){return this.props.gameSettings.getTimerSoundTickingThreshold()}}var lS=M(764522);class GS{constructor(W){this.props=W,this.playSound=W=>{this.props.rootStore.abstractGame.values.gamePaused||("args"in W?lS.triggerEvent(W.event,W.args):lS.triggerEvent(W.event))}}}var YS=M(196758);function cS(W){return n.mJ((()=>W.device.isClassicLayout),(y=>{y?(W.abstractGame.actions.layout.drawer.desktop.disallow(YS.fK),W.abstractGame.actions.layout.drawer.desktop.close(YS.fK)):W.abstractGame.actions.layout.drawer.desktop.allow(YS.fK)}))}class DS{constructor(W){this.props=W,this.immersiveDrawerView=YS.Uo.Full,this.spinHistory={action:YS.I5.Set,data:[]},this.pendingSpinHistory=void 0,this.isDrawerClosing=!1,n.l_(this,{spinHistory:n.sH.deep},{autoBind:!0})}get isImmersiveStatisticsExpanded(){for(const W of this.props.rootStore.abstractGame.values.layoutDesktopDrawerCurrentOpenId)if(W.id===YS.fK&&!this.isDrawerClosing)return!0;return!1}setSpinHistory(W){this.spinHistory=W,this.pendingSpinHistory=void 0}setPendingSpinHistory(W){this.pendingSpinHistory=W}toggleImmersiveStatistics(){this.isImmersiveStatisticsExpanded?this.props.rootStore.abstractGame.actions.layout.drawer.desktop.close(YS.fK):this.props.rootStore.abstractGame.actions.layout.drawer.desktop.open(YS.fK,{onCloseAnimationStart:this.onDrawerCloseAnimationStart,onClose:this.onDrawerClose})}setSpinHistoryFromPendingList(){this.pendingSpinHistory&&(this.setSpinHistory(this.pendingSpinHistory),this.pendingSpinHistory=void 0)}setImmersiveDrawerView(W){this.immersiveDrawerView=W}onDrawerCloseAnimationStart(){this.isDrawerClosing=!0}onDrawerClose(){this.isDrawerClosing=!1}}var rS=M(219071);const AS={type:rS.T.None};class TS{constructor(){this.stage=AS,this.onIntroStart=()=>{this.stage.type===rS.T.None&&(this.stage={type:rS.T.Intro})},this.onIntroReady=()=>{this.stage.type===rS.T.Intro&&(this.stage={type:rS.T.Idle})},this.onSelectStart=()=>{this.stage={type:rS.T.Selected}},this.onSpotLight=W=>{this.stage={type:rS.T.SpotLight,battery:W}},this.onCharge=W=>{this.stage={type:rS.T.Charge,battery:W}},this.onOutroStart=()=>{this.stage={type:rS.T.Outro}},n.Gn(this,{stage:n.sH.struct,onIntroStart:n.XI,onIntroReady:n.XI,onSelectStart:n.XI,onSpotLight:n.XI,onCharge:n.XI,onOutroStart:n.XI,reset:n.XI})}reset(){this.stage=AS}}var OS;(function(W){W["Decision"]="lightningstorm.stormBonus.decision"})(OS||(OS={}));class hS{constructor(W){this.props=W,this.isSelected=mO((W=>this.selectedOffer===W)),this.phase=_h.uG.Initial,this.statistics=_h.cV,this.selectedOffer=void 0,this.multiplier=0,this.decisionAnimationManager=new TS,this.timer=rh({step:1e3}),n.Gn(this,{hasMadeDecision:n.EW,phase:n.sH,selectedOffer:n.sH,multiplier:n.sH,decisionTimeRemaining:n.EW,decisionTotalTime:n.EW,decisionTimerRunning:n.EW,isDecisionTime:n.EW,hasSelection:n.EW,isActive:n.EW,statistics:n.sH.struct,setPhase:n.XI,setSelectedOffer:n.XI,setStatistics:n.XI,setMultiplier:n.XI})}get isActive(){return this.props.rootStore.bonus.currentBonus===EO.LightningStormBonusGame.StormBonus}get hasMadeDecision(){return void 0!==this.selectedOffer}get decisionTimeRemaining(){return this.timer.timeRemainingSec}get decisionTotalTime(){return this.timer.totalTimeRemainingSec}get decisionTimerRunning(){return this.timer.running}get isDecisionTime(){return this.decisionTimeRemaining>0&&this.phase===_h.uG.DecisionsOpen&&!this.hasMadeDecision&&this.props.rootStore.bonus.isParticipating}setPhase(W){this.phase=W}select(W){this.isDecisionTime&&(void 0===this.selectedOffer&&(this.decisionAnimationManager.onSelectStart(),this.props.rootStore.transport.sendMessage(function(W,y){return{type:OS.Decision,payload:{gameId:W,offer:y}}}(this.props.rootStore.abstractGame.values.gameRoundId,W))),this.setSelectedOffer(W))}setSelectedOffer(W){this.selectedOffer=W}get hasSelection(){return void 0!==this.selectedOffer}startDecisionTimer(W){this.timer.startTimer(W,this.props.rootStore.settings.stormBonusDecisionTime)}stopDecisionTimer(){this.timer.stopTimer()}stopTimerAt(W){const y=ch(this.decisionTotalTime);this.timer.stopTimer(),this.timer.startTimer(W,y),this.timer.pauseTimer()}setStatistics(W){this.statistics=W}setMultiplier(W){this.multiplier=W}reset(){this.setPhase(_h.uG.Initial),this.timer.stopTimer(),this.selectedOffer=void 0,this.setStatistics(_h.cV),this.setMultiplier(0),this.decisionAnimationManager.reset()}}class SS{constructor(){this.footerGradientVisible=!0,n.Gn(this,{footerGradientVisible:n.sH,setFooterGradientVisible:n.XI})}setFooterGradientVisible(W){this.footerGradientVisible=W}}class oS{constructor(){this.timeoutTypeFactoryMap={[UO.Regular]:qS,[UO.RequestAnimationFrame]:dS},this.timeoutMap={}}set(W,y,M,U=UO.Regular){this.clear(W),this.timeoutMap[W]={disposeRef:this.timeoutTypeFactoryMap[U]((()=>{y(),this.clear(W)}),M),callback:y}}fastForward(W){const y=this.timeoutMap[W];y&&(y.callback(),this.clear(W))}clear(W){const y=this.timeoutMap[W];y&&y.disposeRef.current(),this.timeoutMap[W]=void 0}clearAll(){for(const W of Object.values(this.timeoutMap))W&&W.disposeRef.current();this.timeoutMap={}}dispose(){this.clearAll()}}function dS(W,y){const M=(new Date).getTime(),U={current:Sh.A},i=()=>{if((new Date).getTime()-M>=y)return void W();const x=window.requestAnimationFrame(i);U.current=()=>window.cancelAnimationFrame(x)},x=window.requestAnimationFrame(i);return U.current=()=>window.cancelAnimationFrame(x),U}function qS(W,y){const M=window.setTimeout((()=>{W()}),y);return{current:()=>window.clearTimeout(M)}}function sS(W){return j.Fl.includes(W)}class NS{constructor(W){this.props=W}showBetSpotTooltip(W,y,M){let U;U=sS(W)?this.props.rootStore.references.getBetSpotReference(W):this.props.rootStore.references.getReference(W),U&&this.showTooltip(function(W){const{element:y,id:M,text:U,gameDimension:i,tooltipType:x,isDesktop:n}=W,k=i.reverseScale||1,g=Qh.x(y,k),u=n?g.top-i.top/k:g.top+.5*g.height-i.top/k;return{id:M,label:U,left:g.left+.5*g.width-i.left/k,top:u,type:x,isDesktop:n}}({element:U,id:W,tooltipType:y,text:M,gameDimension:this.props.rootStore.abstractGame.values.gameDimensions,isDesktop:this.props.rootStore.device.isDesktop}))}showWaitNextGameTooltip(W,y){const{gameDimensions:M}=this.props.rootStore.abstractGame.values,U=M.reverseScale||1;this.showTooltip({id:tO.WaitForNextGame,label:Y.Tl(wO.X.WaitingForNextGameTooltip),left:W-M.left/U,top:y-M.top/U,type:tO.WaitForNextGame,isDesktop:this.props.rootStore.device.isDesktop})}hideTooltip(W){this.props.rootStore.abstractGame.actions.tooltips.hideByType(W)}showTooltip(W){this.props.rootStore.abstractGame.actions.tooltips.add(W)}}var _S=M(427069);function pS(W){let y;return(...M)=>{null==y||y(),y=W(...M)}}function bS(W){return n.mJ((()=>W.lightningRound.isActive),pS((()=>{W.ui.bettingGridTransition.setIsLightningGapTransitioning(!0);const y=window.setTimeout((()=>{W.ui.bettingGridTransition.setIsLightningGapTransitioning(!1)}),1e3*_S.Tx);return()=>window.clearTimeout(y)})))}var mS=M(547526);function zS(W){return n.mJ((()=>({state:W.ui.bettingGridTransition.shouldMoveToTransitionState,bettingGridContainer:W.references.bettingGridRefs.container,rootSize:W.abstractGame.values.rootSize})),pS(((y,M)=>{const{state:U,bettingGridContainer:i,rootSize:x}=y;if(!i)return;const n=!M||U===(null==M?void 0:M.state),k=yA.M().callback((()=>{W.ui.bettingGridTransition.setTransitionState(iO.Transitioning)}));switch(U){case iO.Expanded:k.sequence(function(W){const{container:y,layout:M,rootSize:U,isSquareLayout:i}=W,x=i?-55:-75;let n;switch(M){case Rh._.Desktop:n=SA.M(y).animateTo({y:1.05*U,scale:1},mS.f,hA.dV);break;case Rh._.DesktopClassic:n=SA.M(y).animateTo({x:-50,y:0,scale:1},mS.f,hA.dV);break;case Rh._.Tablet:case Rh._.MobileLandscape:n=SA.M(y).animateTo({y:0,scale:1},mS.f,hA.dV);break;case Rh._.MobilePortrait:n=SA.M(y).animateTo({y:x,scale:1},mS.f,hA.dV)}return yA.M().sequence(n).callback((()=>{y.element.setAttribute("data-expanded","true")}))}({container:i,layout:W.device.componentLayout,rootSize:x,isSquareLayout:W.device.isPhoneSquareScreen}));break;case iO.Collapsed:k.sequence(function(W){const{container:y,layout:M,rootSize:U}=W;let i;switch(M){case Rh._.Desktop:i=SA.M(y).animateTo({y:10.2*U,scale:.817},mS.f,hA.dV);break;case Rh._.DesktopClassic:i=SA.M(y).animateTo({x:-50,y:15,scale:.9},mS.f,hA.dV);break;case Rh._.Tablet:case Rh._.MobileLandscape:i=SA.M(y).animateTo({y:0,scale:.802},mS.f,hA.dV);break;case Rh._.MobilePortrait:i=SA.M(y).animateTo({y:0,scale:.75},mS.f,hA.dV)}return yA.M().sequence(i).callback((()=>{y.element.setAttribute("data-expanded","false")}))}({container:i,layout:W.device.componentLayout,rootSize:x}))}k.callback((()=>{W.ui.bettingGridTransition.setTransitionState(U)}));const g=xA.l({anim:k});return n&&k.fastForward(),g})),{fireImmediately:!0})}const KS={[EO.LightningStormBonusGame.BatteryCharger]:["#092804","#22820D","#22820D","#092804"],[EO.LightningStormBonusGame.Fireball]:["#301306","#B53D09","#B53D09","#301306"],[EO.LightningStormBonusGame.HotSpot]:["#2A042F","#8F1299","#8F1299","#2A042F"],[EO.LightningStormBonusGame.MonsterMash]:["#042127","#1097C1","#1097C1","#042127"],[EO.LightningStormBonusGame.StormBonus]:["#270303","#A31111","#A31111","#270303"]};function PS(W){return n.mJ((()=>({phase:W.gamePhase.phase,outcome:W.wheel.outcome,bonus:W.bonus.currentBonus})),(({phase:y,outcome:M,bonus:U})=>{const i=function(W){const{bonus:y,wheelResult:M,phase:U}=W;return M===EO.LightningStormBetCode.EvenMoney&&U===BT.GameResolved?["#083035","#44979C","#44979C","#083035"]:y?KS[y]:["#17283D","#3D6385","#3D6385","#17283D"]}({bonus:U,phase:y,wheelResult:M});W.abstractGame.actions.layout.classic.setBackgroundColors(i)}),{fireImmediately:!0})}function RS(W){let y=0;const M=n.mJ((()=>({trafficLight:W.ui.classicLayoutTrafficLight.trafficLight,isClassicLayout:W.device.isClassicLayout,phase:W.gamePhase.phase})),(({trafficLight:M,isClassicLayout:U})=>{window.clearTimeout(y),U&&(M.delay?y=window.setTimeout((()=>{W.abstractGame.actions.statusBar.setProps(M)}),M.delay):W.abstractGame.actions.statusBar.setProps(M))}),{fireImmediately:!0});return()=>{M(),window.clearTimeout(y)}}const IS=[Pr.bK.Initial,Pr.bK.Celebration];function ES(W){return n.mJ((()=>({phase:W.gamePhase.phase,hotSpotPhase:W.hotSpot.phase,isBonusGameTransitioning:W.bonusGameTransition.isTransitioning})),(({phase:y,hotSpotPhase:M,isBonusGameTransitioning:U})=>{y!==BT.HotSpot||IS.includes(M)?W.abstractGame.values.layoutClassicVideoIsExpanded&&W.abstractGame.actions.layout.classic.video.collapse():W.abstractGame.values.layoutClassicVideoIsExpanded||U||W.abstractGame.actions.layout.classic.video.expand()}),{fireImmediately:!0})}const ZS=[xO.Initial,xO.Intro];class fS{constructor(W){this.props=W,n.Gn(this,{showWheelMultiplier:n.EW})}get showWheelMultiplier(){var W,y;const M=null!==(y=null===(W=this.props.rootStore.wheel.outcomeMultiplier)||void 0===W?void 0:W.value)&&void 0!==y?y:0;return this.props.rootStore.gamePhase.phase===BT.BatteryCharger&&ZS.includes(this.props.rootStore.batteryCharger.phase)&&M>0}}class VS{constructor(W){this.props=W,n.Gn(this,{isInactive:n.EW})}get isInactive(){return!this.props.rootStore.bets.isBettingEnabled}}var $S=M(713861),aS=M(46602);const HS=[BT.StormBonus,BT.HotSpot,BT.BatteryCharger,BT.Fireball,BT.MonsterMash,BT.GameResolved,BT.GameCancelled,BT.GameCleared],BS=[BT.WheelResult,BT.BatteryCharger,BT.HotSpot,BT.StormBonus,BT.Fireball,BT.MonsterMash];class vS{constructor(W){this.props=W,this.getChipAmount=mO((W=>{var y,M,U,i,x;switch(this.getChipState(W)){case aS.Y.Winning:return this.props.rootStore.result.chipWinAmount;case aS.Y.Ghost:return null!==(M=null===(y=this.props.rootStore.bets.repeatBet)||void 0===y?void 0:y[W])&&void 0!==M?M:0;case aS.Y.Losing:return null!==(U=this.props.rootStore.bets.bets[W])&&void 0!==U?U:0;case aS.Y.Normal:{const y=null!==(i=this.props.rootStore.bets.bets[W])&&void 0!==i?i:0,M=this.props.rootStore.flyingChips.chips.filter((y=>y.to===W&&y.animationType!==ih.W.Bounce)).reduce(((W,y)=>W+y.amount),0),U=this.props.rootStore.chaserDistribute.chaserChips.filter((y=>y.to===W)).reduce(((W,y)=>W+y.amount),0),n=BS.includes(this.props.rootStore.gamePhase.phase)&&!this.getIsWinningBetSpot(W)&&null!==(x=this.props.rootStore.bets.bets[W])&&void 0!==x?x:0;return Math.max(y-M-U-n,0)}}})),this.getBackgroundState=mO((W=>{const y=this.getIsWinning(W),M=this.getIsInactive(W);return y?$S.m.Win:M?$S.m.Inactive:$S.m.Idle})),this.getChipState=mO((W=>{const{rootStore:y}=this.props;return y.result.showGameResult&&y.wheel.outcome===W?aS.Y.Winning:y.gamePhase.phase===BT.GameResolved&&y.wheel.outcome!==W?aS.Y.Losing:y.bets.hasBets||!y.abstractGame.values.autoplayUIIsPreviousTotalBetVisible||y.lightningRound.isActive||HS.includes(y.gamePhase.phase)?aS.Y.Normal:aS.Y.Ghost})),this.getIsInactive=mO((W=>{const y=this.getChipAmount(W),M=this.props.rootStore.bets.isBettingEnabled,U=this.getChipState(W);return(y<=0||U===aS.Y.Ghost)&&!M})),this.getIsClickBlocked=mO((W=>!this.props.rootStore.ui.bettingGrid.visible||!(!EO.lightningStormChaserBetCodes.includes(W)||this.props.rootStore.ui.bettingGrid.chasersEnabled)||this.props.rootStore.draggableChip.isChipDraggedFor(W))),this.getIsWinning=mO((W=>this.props.rootStore.result.showGameResult&&this.props.rootStore.wheel.outcome===W)),this.getContainsBet=mO((W=>this.getChipAmount(W)>0)),this.getIsWinningBetSpot=mO((W=>this.props.rootStore.wheel.outcome===W)),n.Gn(this,{isHoverActive:n.EW})}get isHoverActive(){return this.props.rootStore.bets.isBettingEnabled}}const LS={[Rh._.Desktop]:.68,[Rh._.DesktopClassic]:.76,[Rh._.Tablet]:.647,[Rh._.MobilePortrait]:.894,[Rh._.MobileLandscape]:.876};class XS{constructor(W){this.props=W,this.getIsVisible=mO(((W,y)=>!this.props.rootStore.draggableChip.isChipDraggedFor(y)&&W)),this.getCanDragChip=mO((W=>this.props.rootStore.draggableChip.canDrag&&W)),n.Gn(this,{chipFontSize:n.EW})}get chipFontSize(){return LS[this.props.rootStore.device.componentLayout]}}class wS{constructor(W){this.props=W,this.isChaserAnimating=!1,this.isWinningBetSpotAnimating=!1,this.setIsWinningBetSpotAnimating=W=>{this.isWinningBetSpotAnimating=W},n.Gn(this,{isChaserAnimating:n.sH,isWinningBetSpotAnimating:n.sH,visible:n.EW,alignment:n.EW,chasersEnabled:n.EW,hasGhostChipsOnChasers:n.EW,invitingAnimationRunning:n.EW,showBetOnAll:n.EW,showChasersExpandButton:n.EW,showSideDecors:n.EW,setIsChaserAnimating:n.XI})}get visible(){return(!this.props.rootStore.bonus.isActive||this.isWinningBetSpotAnimating)&&this.props.rootStore.gamePhase.phase!==BT.Initial}get alignment(){return this.props.rootStore.device.isPortrait&&!this.props.rootStore.device.isTablet?_S.C1.Vertical:_S.C1.Horizontal}get hasGhostChipsOnChasers(){let W=!1;for(const y of EO.lightningStormChaserBetCodes)if(this.props.rootStore.ui.betSpot.getChipState(y)===aS.Y.Ghost&&this.props.rootStore.ui.betSpot.getChipAmount(y)>0){W=!0;break}return W}get chasersEnabled(){const W=!1!==this.props.rootStore.preferences.getValue(fT._.ChasersEnabled);if(this.props.rootStore.bets.isBettingEnabled||this.alignment===_S.C1.Horizontal)return W||this.hasGhostChipsOnChasers;if(mh.Q2.includes(this.props.rootStore.chaserDistribute.phase)){for(const W of mh.Q2)if(!1===this.props.rootStore.chaserDistribute.isPhaseDone(W))return!0;return!1}return this.hasGhostChipsOnChasers||VO(this.props.rootStore.bets.bets)}get invitingAnimationRunning(){return this.props.rootStore.bets.isBettingEnabled&&!this.props.rootStore.bets.hasBets&&!this.props.rootStore.ui.bettingGridTransition.isTransitioning}get showBetOnAll(){return this.alignment!==_S.C1.Vertical||this.props.rootStore.bets.isBettingEnabled}get showChasersExpandButton(){return!!this.props.rootStore.bets.isBettingEnabled&&!VO(this.props.rootStore.bets.bets)}get showSideDecors(){return this.alignment===_S.C1.Vertical||this.props.rootStore.bets.isBettingEnabled||this.props.rootStore.preferences.getValue(fT._.ChasersEnabled)}setIsChaserAnimating(W){this.isChaserAnimating=W}}class FS{get shouldMoveToTransitionState(){return this.props.rootStore.bets.isBettingEnabled?iO.Expanded:iO.Collapsed}get isTransitioning(){return this.currentTransitionState===iO.Transitioning}constructor(W){this.props=W,this.currentTransitionState=iO.Expanded,this.isLightningGapTransitioning=!1,n.Gn(this,{currentTransitionState:n.sH,shouldMoveToTransitionState:n.EW,isTransitioning:n.EW,isLightningGapTransitioning:n.sH,setTransitionState:n.XI,setIsLightningGapTransitioning:n.XI})}setTransitionState(W){this.currentTransitionState=W}setIsLightningGapTransitioning(W){this.isLightningGapTransitioning=W}}class tS{constructor(W){this.props=W,n.Gn(this,{isVisible:n.EW})}get isVisible(){return this.props.rootStore.gamePhase.phase===BT.BetsOpen&&this.props.rootStore.bettingTimer.timeRemaining>0}}class JS{constructor(W){this.props=W,n.Gn(this,{isVisible:n.EW,wheelMultiplier:n.EW,bonusBetSpotSize:n.EW})}get isVisible(){return(this.props.rootStore.gamePhase.phase!==BT.GameResolved||0!==this.props.rootStore.result.chipWinAmount)&&this.props.rootStore.bonus.isActive&&(!this.props.rootStore.bets.hasBets||this.props.rootStore.bets.isBetConfirmed)}get wheelMultiplier(){var W,y;return null!==(y=null===(W=this.props.rootStore.wheel.outcomeMultiplier)||void 0===W?void 0:W.value)&&void 0!==y?y:0}get bonusBetSpotSize(){switch(this.props.rootStore.device.componentLayout){case Rh._.MobilePortrait:return this.props.rootStore.abstractGame.values.gameDimensions.width/375;case Rh._.Tablet:return.85;default:return 1.2}}}class jS{get animateIcons(){const W=!1!==this.props.rootStore.preferences.getValue(fT._.ChasersEnabled);return this.props.rootStore.ui.bettingGrid.invitingAnimationRunning&&W}constructor(W){this.props=W,this.getFeeAmount=mO((W=>{var y;const M=this.props.rootStore.bets.bets[W]||0,U=null!==(y=j.cd[W])&&void 0!==y?y:1;if(M>0)return i=M*U,x=this.props.rootStore,R.ej(i,{currencySymbol:x.abstractGame.values.currencySymbol});var i,x})),n.Gn(this,{animateIcons:n.EW})}}class CS{constructor(W){this.props=W,n.Gn(this,{isStormChaserAnimate:n.EW,isWheelMultiplierAnimate:n.EW,isXChaserAnimate:n.EW})}get isStormChaserAnimate(){return this.props.rootStore.chaserDistribute.phase===mh.tM.StormChaser&&!this.props.rootStore.lightningRound.isActive&&!this.props.rootStore.ui.bettingGridTransition.isLightningGapTransitioning&&this.props.rootStore.abstractGame.values.isPageVisible}get isWheelMultiplierAnimate(){return this.props.rootStore.chaserDistribute.phase===mh.tM.Multiplier&&!this.props.rootStore.lightningRound.isActive&&!this.props.rootStore.ui.bettingGridTransition.isLightningGapTransitioning&&this.props.rootStore.abstractGame.values.isPageVisible}get isXChaserAnimate(){return this.props.rootStore.chaserDistribute.phase===mh.tM.XChaser&&!this.props.rootStore.lightningRound.isActive&&!this.props.rootStore.ui.bettingGridTransition.isLightningGapTransitioning&&this.props.rootStore.abstractGame.values.isPageVisible}}class QS{constructor(W){this.props=W,n.Gn(this,{isWatermarkVisible:n.EW})}get isWatermarkVisible(){const W=this.props.rootStore.gamePhase.phase,y=this.props.rootStore.bonus.currentBonus;return y!==EO.LightningStormBonusGame.HotSpot&&W!==BT.GameResolved&&W!==BT.GameCancelled&&(y===EO.LightningStormBonusGame.StormBonus&&this.props.rootStore.bonus.isParticipating?this.props.rootStore.bonus.isActive&&(this.props.rootStore.stormBonus.phase===_h.uG.Initial||this.props.rootStore.stormBonus.phase===_h.uG.Intro):this.props.rootStore.bonus.isActive)}}const Wo={[EO.LightningStormBonusGame.BatteryCharger]:"BATTERY CHARGER",[EO.LightningStormBonusGame.HotSpot]:"HOT SPOT",[EO.LightningStormBonusGame.Fireball]:"FIREBALL",[EO.LightningStormBonusGame.MonsterMash]:"MONSTER MASH",[EO.LightningStormBonusGame.StormBonus]:"LIGHTNING STORM"},yo={[EO.LightningStormBonusGame.BatteryCharger]:{type:"flat",fill:"#23810f",stroke:"#23810f"},[EO.LightningStormBonusGame.HotSpot]:{type:"flat",fill:"#8F1299",stroke:"#8F1299"},[EO.LightningStormBonusGame.Fireball]:{type:"flat",fill:"#b33e08",stroke:"#b33e08"},[EO.LightningStormBonusGame.MonsterMash]:{type:"flat",fill:"#0c6886",stroke:"#0c6886"},[EO.LightningStormBonusGame.StormBonus]:{type:"flat",fill:"#910e0c",stroke:"#910e0c"}};var Mo=M(959508);class Uo{constructor(W){this.props=W,this.betsOpenTrafficLight=W=>{const y=W.bettingTimer.betsClosingSoon,M=W.settings.showCountDownTimer,U=y?"yellow":"green";return{text:(y?Y.Tl(wO.X.BetsClosing):Y.Tl(wO.X.PlaceYourBets))+(M?` ${Math.ceil(W.bettingTimer.timeRemaining)}`:""),color:U}},this.betsClosedTrafficLight=W=>W.bets.status===j.eT.Accepted?{text:Y.Tl(wO.X.BetsAccepted),color:"grey"}:W.bets.status===j.eT.PartialAccepted?{text:Y.Tl(wO.X.BetsPartiallyAccepted,{amount:R.ej(W.bets.totalBet,{currencySymbol:W.abstractGame.values.currencySymbol})}),color:"grey"}:W.bets.status===j.eT.Rejected?{text:Y.Tl(wO.X.BetsRejected),color:"red"}:{text:Y.Tl(wO.X.BetsClosed),color:"red"},this.wheelResultTrafficLight=()=>this.props.rootStore.bets.hasBets?{text:Y.Tl(wO.X.SpinningWheel),color:"grey"}:this.waitForNextGameTrafficLight(this.props.rootStore),this.gameCancelledTrafficLight=()=>({text:Y.Tl(wO.X.GameCancelled),color:"grey"}),this.waitForNextGameTrafficLight=()=>({text:Y.Tl(wO.X.WaitForNextGame),color:"grey",delay:300}),this.evenMoneyTrafficLight=()=>({text:Y.Tl(wO.X.Result,{number:"",color:""}),customColors:{type:"flat",fill:"#046970",stroke:"#046970"},textIcon:x.jsx(EO.LightningStormIconEvenMoney,{}),textIconAlignment:Mo.Q.Right}),this.getGameResolvedTrafficLight=()=>{const W=this.props.rootStore.wheel.outcome,y=this.props.rootStore.bonus.currentBonus;return W?W===EO.LightningStormBetCode.EvenMoney?this.evenMoneyTrafficLight(this.props.rootStore):void 0!==W&&void 0!==y?this.bonusGameTrafficLight(this.props.rootStore):this.waitForNextGameTrafficLight(this.props.rootStore):this.waitForNextGameTrafficLight(this.props.rootStore)},this.stormBonusTrafficLight=()=>{if(this.props.rootStore.stormBonus.isDecisionTime&&!this.props.rootStore.stormBonus.hasMadeDecision){const W=Math.ceil(this.props.rootStore.stormBonus.decisionTimeRemaining),y=ch(W)<=this.props.rootStore.settings.makeDecisionClosingTime;return{text:`${Y.Tl(wO.X.StormBonusMakeDecision)} ${W}`,color:y?"yellow":"green"}}return this.bonusGameTrafficLight(this.props.rootStore)},this.bonusGameTrafficLight=()=>{const W=this.props.rootStore.bonus.currentBonus;return W?{text:this.getBonusGameTrafficLightText(),customColors:yo[W]}:this.wheelResultTrafficLight(this.props.rootStore)},this.trafficLightGamePhaseMap={[BT.Initial]:this.waitForNextGameTrafficLight,[BT.BetsOpen]:this.betsOpenTrafficLight,[BT.BetsClosed]:this.betsClosedTrafficLight,[BT.WheelSpinning]:this.wheelResultTrafficLight,[BT.WheelResult]:this.wheelResultTrafficLight,[BT.BatteryCharger]:this.bonusGameTrafficLight,[BT.HotSpot]:this.bonusGameTrafficLight,[BT.Fireball]:this.bonusGameTrafficLight,[BT.MonsterMash]:this.bonusGameTrafficLight,[BT.StormBonus]:this.stormBonusTrafficLight,[BT.GameResolved]:this.getGameResolvedTrafficLight,[BT.GameCancelled]:this.gameCancelledTrafficLight,[BT.WheelStopped]:this.wheelResultTrafficLight,[BT.DisplayBonuses]:this.wheelResultTrafficLight,[BT.GameCleared]:this.waitForNextGameTrafficLight},n.Gn(this,{trafficLight:n.EW})}get trafficLight(){return this.trafficLightGamePhaseMap[this.props.rootStore.gamePhase.phase](this.props.rootStore)}getBonusGameTrafficLightText(){const W=this.props.rootStore.bonus.currentBonus,y=this.props.rootStore.bonus.isParticipating;return W&&(this.props.rootStore.bonusGameTransition.isTransitioning||y)?Wo[W]:Y.Tl(wO.X.WaitForNextGame)}}class io{constructor(W){this.props=W,n.Gn(this,{decisionBettors:n.EW})}get decisionBettors(){if(this.props.rootStore.gamePhase.phase===BT.HotSpot&&!this.props.rootStore.bonus.isParticipating){const W=this.props.rootStore.hotSpot.statistics.undecided;return{visible:this.props.rootStore.hotSpot.phase===Pr.bK.DecisionsOpen&&W>0,amount:W}}if(this.props.rootStore.gamePhase.phase===BT.StormBonus&&(!this.props.rootStore.bonus.isParticipating||this.props.rootStore.stormBonus.hasMadeDecision)){const W=this.props.rootStore.stormBonus.statistics.undecided;return{visible:this.props.rootStore.stormBonus.phase===_h.uG.DecisionsOpen&&W>0,amount:W}}return{visible:!1,amount:0}}}class xo{constructor(W){this.props=W,n.Gn(this,{isPayoutVisible:n.EW})}get isPayoutVisible(){return this.props.rootStore.bets.isBettingEnabled}}const no=[Oh.Initial,Oh.Intro,Oh.MultiplierDisplay];class ko{constructor(W){this.props=W,n.Gn(this,{showWheelMultiplier:n.EW})}get showWheelMultiplier(){var W,y;const M=null!==(y=null===(W=this.props.rootStore.wheel.outcomeMultiplier)||void 0===W?void 0:W.value)&&void 0!==y?y:0;return this.props.rootStore.gamePhase.phase===BT.Fireball&&no.includes(this.props.rootStore.fireball.phase)&&M>0}}class go{constructor(W){this.props=W,this.getTargetElement=mO((W=>{if(sS(W)){const y=this.props.rootStore.bonus.isActive?JO.Ip.Bonus:JO.Ip.Regular;return this.props.rootStore.references.getBetSpotChipReference(y,W)}return this.props.rootStore.references.getReference(W)}))}}var uo=M(84537);class eo{get color(){return this.props.rootStore.device.componentLayout===Rh._.MobilePortrait?this.colorPortrait:this.colorLandscape}get topGradientSize(){switch(this.props.rootStore.gamePhase.phase){case BT.BetsOpen:return uo.P9.BettingOpened;case BT.StormBonus:case BT.HotSpot:case BT.BatteryCharger:case BT.Fireball:case BT.MonsterMash:return uo.P9.BonusGame;case BT.BetsClosed:case BT.DisplayBonuses:case BT.WheelSpinning:case BT.WheelStopped:case BT.WheelResult:return uo.P9.BettingClosed;case BT.GameResolved:return this.props.rootStore.wheel.outcome!==EO.LightningStormBetCode.EvenMoney?uo.P9.BonusGame:uo.P9.BettingClosed;default:return uo.P9.BettingClosed}}constructor(W){this.props=W,n.Gn(this,{color:n.EW,topGradientSize:n.EW,colorLandscape:n.EW,colorPortrait:n.EW})}get colorPortrait(){var W;if(this.props.rootStore.bonus.isActive&&this.props.rootStore.bonus.currentBonus)switch(this.props.rootStore.bonus.currentBonus){case EO.LightningStormBonusGame.BatteryCharger:return uo.p2.BatteryCharger;case EO.LightningStormBonusGame.HotSpot:return uo.p2.HotSpot;case EO.LightningStormBonusGame.MonsterMash:return uo.p2.MonsterMash;case EO.LightningStormBonusGame.StormBonus:return[EO.LightningStormMultiplierLevel.High,EO.LightningStormMultiplierLevel.Medium].includes(null===(W=this.props.rootStore.wheel.outcomeMultiplier)||void 0===W?void 0:W.level)?uo.p2.StormBonusHigh:uo.p2.StormBonusRegular;case EO.LightningStormBonusGame.Fireball:return uo.p2.Fireball;default:return uo.p2.StandardColor}return uo.p2.StandardColor}get colorLandscape(){return this.props.rootStore.bonus.isActive&&this.props.rootStore.bonus.currentBonus?uo.fk.BonusGameColor:this.props.rootStore.gamePhase.phase===BT.WheelResult||this.props.rootStore.gamePhase.phase===BT.GameResolved?uo.fk.ResultPhaseColor:uo.fk.StandardColor}}class lo{constructor(W){this.props=W,n.Gn(this,{isVisible:n.EW})}get isVisible(){return!this.props.rootStore.bonusGameTransition.isBetSpotParked&&!this.props.rootStore.bonusGameTransition.isTransitionDone&&this.props.rootStore.gamePhase.phase!==BT.Initial}}class Go{constructor(W){this.props=W,n.Gn(this,{hasCursorPointer:n.EW,canvasAllowPointerEvents:n.EW,visible:n.EW})}get canvasAllowPointerEvents(){return this.props.rootStore.gamePhase.phase===BT.HotSpot&&this.props.rootStore.hotSpot.phase===Pr.bK.DecisionsOpen}get visible(){return this.props.rootStore.ui.overlay3d.isActive}get hasCursorPointer(){return this.props.rootStore.ui.hotSpotGrid.isHoveringGrid}}const Yo=[Pr.bK.Initial,Pr.bK.Intro];class co{constructor(W){this.props=W,n.Gn(this,{showWheelMultiplier:n.EW,bonusMultiplier:n.EW})}get showWheelMultiplier(){var W,y;const M=null!==(y=null===(W=this.props.rootStore.wheel.outcomeMultiplier)||void 0===W?void 0:W.value)&&void 0!==y?y:0;return this.props.rootStore.gamePhase.phase===BT.HotSpot&&Yo.includes(this.props.rootStore.hotSpot.phase)&&M>0}get bonusMultiplier(){return this.props.rootStore.hotSpot.phase===Pr.bK.Celebration?this.props.rootStore.hotSpot.multiplier:0}}const Do=[DA.Intro,DA.Decision],ro=[Pr.bK.DecisionsOpen,Pr.bK.DecisionsClosed,Pr.bK.MultiplierReveal,Pr.bK.MultiplierDouble,Pr.bK.Celebration],Ao=[DA.MultiplierReveal,DA.MultiplierDouble],To=[DA.DecisionEnd,DA.MultiplierReveal,DA.MultiplierDouble];class Oo{constructor(W){this.props=W,this.phase=DA.Initial,this.isHoveringGrid=!1,n.Gn(this,{isHoveringGrid:n.sH,phase:n.sH,isActive:n.EW,isVisible:n.EW,showSelectedMultiplier:n.EW,isTimerRunning:n.EW,isTimerVisible:n.EW,isBorderGlowActive:n.EW,setPhase:n.XI,setIsHoveringGrid:n.XI})}get isActive(){return this.props.rootStore.bonus.isParticipating&&this.props.rootStore.bonus.currentBonus===EO.LightningStormBonusGame.HotSpot&&!this.props.rootStore.result.showGameResult}get isVisible(){return this.isActive&&ro.includes(this.props.rootStore.hotSpot.phase)}get showSelectedMultiplier(){return!!this.props.rootStore.hotSpot.selectedSpotCoordinate&&this.props.rootStore.hotSpot.multiplier>0&&Ao.includes(this.phase)}get isTimerRunning(){return this.props.rootStore.hotSpot.decisionTimerRunning&&this.props.rootStore.abstractGame.values.isPageVisible}get isTimerVisible(){return this.props.rootStore.hotSpot.isDecisionTime&&Do.includes(this.phase)}get isBorderGlowActive(){return!(this.props.rootStore.autoTestStore&&!this.props.rootStore.autoTestStore.isHotSpotSelectionGlowAnimationActive)&&this.isActive&&To.includes(this.phase)}setPhase(W){this.phase=W}setIsHoveringGrid(W){this.isHoveringGrid=W}reset(){this.setPhase(DA.Initial),this.setIsHoveringGrid(!1)}}class ho{constructor(W){this.props=W,n.Gn(this,{isVisible:n.EW})}get isVisible(){return this.props.rootStore.bets.isBettingEnabled}}const So=[hh.Initial,hh.Intro];class oo{constructor(W){this.props=W,n.Gn(this,{showWheelMultiplier:n.EW})}get showWheelMultiplier(){var W,y;const M=null!==(y=null===(W=this.props.rootStore.wheel.outcomeMultiplier)||void 0===W?void 0:W.value)&&void 0!==y?y:0;return this.props.rootStore.gamePhase.phase===BT.MonsterMash&&So.includes(this.props.rootStore.monsterMash.phase)&&M>0}}const qo=[BT.DisplayBonuses,BT.WheelSpinning],so=[$S.m.Inactive,$S.m.BonusTransition];class No{constructor(W){this.props=W,this.getMultiplier=mO((W=>{var y;return null===(y=this.props.rootStore.wheel.getMultiplierFor(W))||void 0===y?void 0:y.value})),this.getIsInactiveOverlayVisible=mO((W=>{const y=this.props.rootStore.ui.betSpot.getBackgroundState(W);return so.includes(y)&&!this.props.rootStore.ui.betSpot.getIsWinningBetSpot(W)})),this.isBonusElementsFullyVisible=mO((W=>!this.props.rootStore.lightningRound.isActive&&!!this.props.rootStore.wheel.getBonusGameFor(W))),this.getIsBoldMultiplierBorderActive=mO((W=>{const y=this.getMultiplier(W),M=void 0!==y&&y>0,U=this.props.rootStore.bets.getBetCodeBet(W)>0;return M&&U})),this.getIsBoldMultiplierBorderVisible=mO((W=>this.getIsBoldMultiplierBorderActive(W)&&this.getIsMultiplierVisible(W))),this.getIsMultiplierVisible=mO((W=>{const y=this.getMultiplier(W);return void 0!==y&&y>0&&(!qo.includes(this.props.rootStore.gamePhase.phase)||this.props.rootStore.chaserDistribute.isPhaseDone(mh.tM.Multiplier))})),n.Gn(this,{isInactiveNumbers:n.EW,isMultiplierInactive:n.EW})}get isInactiveNumbers(){if(this.props.rootStore.bets.isBettingEnabled)return!1;let W=!1;for(const y of EO.lightningStormNumberBetSpotGroup)if(this.props.rootStore.bets.getBetCodeBet(y)){W=!0;break}return!W}get isMultiplierInactive(){return this.props.rootStore.wheel.outcome===EO.LightningStormBetCode.EvenMoney&&this.props.rootStore.gamePhase.phase===BT.GameResolved}}class _o{constructor(W){this.props=W,n.Gn(this,{isActive:n.EW})}get isActive(){return!this.props.rootStore.abstractGame.values.gamePaused&&this.props.rootStore.bonus.currentBonus===EO.LightningStormBonusGame.HotSpot&&this.props.rootStore.bonus.isParticipating}}class po{constructor(W){this.props=W,n.Gn(this,{isVisible:n.EW})}get isVisible(){return!this.props.rootStore.device.isClassicLayout&&this.props.rootStore.bets.isBettingEnabled&&!this.props.rootStore.ui.bettingGridTransition.isTransitioning&&!this.props.rootStore.bets.hasBets}}class bo{constructor(W){this.props=W,n.Gn(this,{isVisible:n.EW,statisticsDrawerView:n.EW,visibleRowCount:n.EW})}get isVisible(){return!this.props.rootStore.device.isClassicLayout}get statisticsDrawerView(){return this.props.rootStore.statistics.isImmersiveStatisticsExpanded?YS.Uo.Full:this.props.rootStore.statistics.immersiveDrawerView}get visibleRowCount(){if(this.props.rootStore.statistics.isImmersiveStatisticsExpanded)return 6;switch(this.props.rootStore.statistics.immersiveDrawerView){case YS.Uo.Full:return 3;case YS.Uo.Reduced:return 1}}}class mo{constructor(W){this.props=W,n.Gn(this,{visibleDelay:n.EW})}get visibleDelay(){return this.props.rootStore.gamePhase.phase===BT.GameCleared?1e3:0}}const zo=[_h.uG.Initial,_h.uG.Intro];class Ko{constructor(W){this.props=W,n.Gn(this,{showWheelMultiplier:n.EW})}get showWheelMultiplier(){var W,y;const M=null!==(y=null===(W=this.props.rootStore.wheel.outcomeMultiplier)||void 0===W?void 0:W.value)&&void 0!==y?y:0;return this.props.rootStore.gamePhase.phase===BT.StormBonus&&zo.includes(this.props.rootStore.stormBonus.phase)&&M>0}}class Po{constructor(W){this.props=W,this.showStrikeFrame=mO((W=>!(this.props.rootStore.stormBonus.phase!==_h.uG.DecisionsOpen&&this.props.rootStore.stormBonus.phase!==_h.uG.DecisionsClosed&&!this.props.rootStore.device.isClassicLayout)||!!this.props.rootStore.stormBonus.isSelected(W)||void 0!==this.props.rootStore.ui.stormDecision.activeStrike&&(this.props.rootStore.ui.stormDecision.activeStrike===W||_h.OY[W]>=_h.OY[this.props.rootStore.ui.stormDecision.activeStrike]))),n.Gn(this,{activeStrike:n.EW,isVisible:n.EW,isTimerRunning:n.EW})}get isVisible(){return this.props.rootStore.bonus.isParticipating&&this.props.rootStore.bonus.currentBonus===EO.LightningStormBonusGame.StormBonus&&_h.ZQ.includes(this.props.rootStore.stormBonus.phase)}get isTimerRunning(){return this.props.rootStore.stormBonus.decisionTimerRunning&&this.props.rootStore.abstractGame.values.isPageVisible}get activeStrike(){return _h.Ef[this.props.rootStore.stormBonus.phase]}get isTimerVisible(){return this.props.rootStore.stormBonus.isDecisionTime&&!this.props.rootStore.device.isClassicLayout}}var Ro=M(610570);const Io=[BT.Initial,BT.BetsOpen,BT.GameResolved];class Eo{constructor(W){this.props=W,n.Gn(this,{isWaitForNextGameVisible:n.EW,shouldHideDuringAnimation:n.EW,isInBonusRoundView:n.EW,portraitLayoutWidthLimit:n.EW})}get isWaitForNextGameVisible(){return!(this.props.rootStore.device.isClassicLayout||Io.includes(this.props.rootStore.gamePhase.phase)||0!==this.props.rootStore.result.chipWinAmount||this.props.rootStore.ui.bettingGridTransition.isTransitioning)&&(this.props.rootStore.bonus.isBonusObservingMode||!this.props.rootStore.bets.hasBets)}get shouldHideDuringAnimation(){return this.props.rootStore.bonus.isActive&&!this.props.rootStore.bonusGameTransition.isBetSpotParked}get isInBonusRoundView(){return this.props.rootStore.bonus.isActive&&this.props.rootStore.bonusGameTransition.isBetSpotParked}get portraitLayoutWidthLimit(){return Math.min(this.props.rootStore.abstractGame.values.gameDimensions.containerWidth,Ro.q$)}}class Zo{constructor(W){this.props=W,n.Gn(this,{winningBetSpotRef:n.EW})}get winningBetSpotRef(){if(this.props.rootStore.wheel.outcome)return this.props.rootStore.references.getBetSpotReference(this.props.rootStore.wheel.outcome)}}class fo{constructor(W){this.props=W,n.Gn(this,{gradientHeightPercentage:n.EW})}get gradientHeightPercentage(){if(this.props.rootStore.device.isPhone&&this.props.rootStore.device.isPortrait){const W=this.props.rootStore.videoRect.rect.h/this.props.rootStore.abstractGame.values.gameDimensions.height*100;return Math.min(W,85)}let W=0;return W=this.props.rootStore.bonus.isActive?13:this.props.rootStore.bets.isBettingEnabled?37.1:23,W/100}}var Vo=M(222356);class $o{constructor(W){this.props=W,n.Gn(this,{roundResult:n.EW,portraitLayoutWidthLimit:n.EW})}get roundResult(){if(this.props.rootStore.result.showGameResult&&this.props.rootStore.wheel.outcome)return this.props.rootStore.result.payout.amount>0?{result:{resultType:Vo.l.Payout,payout:this.props.rootStore.result.payout,winningMultiplier:this.props.rootStore.result.winningMultiplier,blockCelebration:this.props.rootStore.result.blockCelebration},bonusGame:this.props.rootStore.result.bonusOutcome,outcome:this.props.rootStore.wheel.outcome}:this.props.rootStore.bonus.isBonusObservingMode?{result:{resultType:Vo.l.Observing,winners:this.props.rootStore.result.winners,winningMultiplier:this.props.rootStore.result.winningMultiplier},bonusGame:this.props.rootStore.result.bonusOutcome,outcome:this.props.rootStore.wheel.outcome}:{result:{resultType:Vo.l.None},outcome:this.props.rootStore.wheel.outcome,bonusGame:this.props.rootStore.result.bonusOutcome}}get portraitLayoutWidthLimit(){return Math.min(this.props.rootStore.abstractGame.values.gameDimensions.containerWidth,Ro.q$)}}class ao{constructor(W){this.bettingGrid=function(W){return new wS(W)}(W),this.betSpot=function(W){return new vS(W)}(W),this.betOnAll=function(W){return new VS(W)}(W),this.chaser=function(W){return new jS(W)}(W),this.betSpotChipContainer=function(W){return new XS(W)}(W),this.evenMoney=function(W){return new xo(W)}(W),this.numberBetSpot=function(W){return new No(W)}(W),this.bettingTimer=function(W){return new tS(W)}(W),this.youWin=function(W){return new $o(W)}(W),this.videoFooterAnimator=function(W){return new fo(W)}(W),this.transitionBetSpot=function(W){return new Zo(W)}(W),this.trafficLightContainer=function(W){return new Eo(W)}(W),this.statusMessage=function(W){return new mo(W)}(W),this.placeYourBets=function(W){return new po(W)}(W),this.flyingChips=function(W){return new go(W)}(W),this.decisionBettors=function(W){return new io(W)}(W),this.chaserDistribution=function(W){return new CS(W)}(W),this.hotSpotGrid=function(W){return new Oo(W)}(W),this.stormDecision=function(W){return new Po(W)}(W),this.bonusBetSpot=function(W){return new JS(W)}(W),this.batteryChargerBonusBetSpot=function(W){return new fS(W)}(W),this.fireballBonusBetSpot=function(W){return new ko(W)}(W),this.hotSpotBonusBetSpot=function(W){return new co(W)}(W),this.monsterMashBonusBetSpot=function(W){return new oo(W)}(W),this.stormBonusBetSpot=function(W){return new Ko(W)}(W),this.fullScreen3dOverlay=function(W){return new Go(W)}(W),this.statisticsDrawer=function(W){return new bo(W)}(W),this.footerLeft=function(W){return new lo(W)}(W),this.mobileStatistics=function(W){return new ho(W)}(W),this.footerGradient=function(W){return new eo(W)}(W),this.overlay3d=function(W){return new _o(W)}(W),this.classicLayoutTrafficLight=function(W){return new Uo(W)}(W),this.classicLayoutStore=function(W){return new QS(W)}(W),this.bettingGridTransition=function(W){return new FS(W)}(W)}dispose(){}}function Ho(W,y,M=1){return{x:W.x*y.w/M+y.x,y:W.y*y.h/M+y.y,w:W.w*y.w/M,h:W.h*y.h/M}}const Bo=Object.values(lT.V);class vo{constructor(W){this.props=W,n.Gn(this,{rects:n.EW})}get rects(){const W={};for(const y of Bo)W[y]=Ho(lT.R[y],this.props.rootStore.videoRect.rect,this.props.rootStore.abstractGame.values.gameDimensions.reverseScale);return W}}function Lo(W){let y=-1;const M=n.mJ((()=>W.videoRect.scale),(M=>{window.clearTimeout(y),y=window.setTimeout((()=>{W.abstractGame.actions.video.mobile.setScale(M)}))}),{fireImmediately:!0});return()=>{M(),window.clearTimeout(y)}}const Xo=.34,wo=.65,Fo=.86,to=.45;class Jo{constructor(W){this.props=W,n.Gn(this,{scale:n.EW,rect:n.EW,isBonusVideo:n.EW})}get scale(){if(this.props.rootStore.device.isDesktop)return 1;const{height:W,boxHeight:y,width:M,boxWidth:U}=this.props.rootStore.abstractGame.values.gameDimensions;if(this.props.rootStore.device.isLandscape)return Math.max(Math.max(M/U,1),Math.max(W/y,1));let i=W*function(W){switch(W.gamePhase.phase){case BT.BetsOpen:return to;case BT.HotSpot:case BT.StormBonus:case BT.BatteryCharger:case BT.Fireball:case BT.MonsterMash:return Fo;case BT.GameResolved:return W.wheel.outcome!==EO.LightningStormBetCode.EvenMoney?Fo:wo;default:return wo}}(this.props.rootStore)/y;return this.isBonusVideo&&M/(U*i)<Xo&&(i=M/Xo/U),Math.max(1,i)}get rect(){const{boxWidth:W,boxHeight:y,width:M}=this.props.rootStore.abstractGame.values.gameDimensions;let U=W,i=y,x=0;return this.props.rootStore.device.isClassicLayout&&(x=.0799*y,this.props.rootStore.abstractGame.values.layoutClassicVideoIsExpanded?(i=.8317*y,U=.8317*W):(i=.3877*y,U=.3877*W)),{x:.5*(M-U)+.5*(U-U*this.scale),y:x*this.scale,w:U*this.scale,h:i*this.scale}}get isBonusVideo(){switch(this.props.rootStore.gamePhase.phase){case BT.HotSpot:case BT.StormBonus:case BT.BatteryCharger:case BT.Fireball:case BT.MonsterMash:return!0;case BT.GameResolved:return this.props.rootStore.wheel.outcome!==EO.LightningStormBetCode.EvenMoney;default:return!1}}}const jo={},Co={};class Qo{constructor(){this.multipliers=jo,this.bonusBetCodes=Co,this.outcome=void 0,this.getMultiplierFor=mO((W=>this.multipliers[W])),this.getBonusGameFor=mO((W=>this.bonusBetCodes[W])),n.Gn(this,{outcome:n.sH,multipliers:n.sH.struct,bonusBetCodes:n.sH.struct,outcomeMultiplier:n.EW,setOutcome:n.XI,setMultipliers:n.XI,setBonusBetCodes:n.XI,reset:n.XI})}get outcomeMultiplier(){if(this.outcome)return this.getMultiplierFor(this.outcome)}setOutcome(W){this.outcome=W}setMultipliers(W){this.multipliers=W}setBonusBetCodes(W){this.bonusBetCodes=W}reset(){this.outcome=void 0,this.multipliers=jo,this.bonusBetCodes=Co}}var Wd,yd,Md,Ud,id=M(449141);function xd(W){switch(W){case Md.Small:return xS.R.Small;case Md.Medium:return xS.R.Medium;case Md.Big:return xS.R.Big;default:return xS.R.None}}function nd(W){const y=new Set(function(W){const y=[];for(const M of Object.keys(W)){const U=W[M];U&&y.push(U.error.code)}return y}(W.invalidBets));return W.errorCode&&y.add(W.errorCode),y}function kd(W){return(y,M)=>{const U=null==M?void 0:M[W];return U?y+U:y}}(function(W){W["BatteryChargerBonus"]="lightningstorm.batteryCharger"})(Wd||(Wd={})),function(W){W["Bets"]="lightningstorm.bets",W["BetsOpen"]="lightningstorm.betsOpen",W["BetsClosed"]="lightningstorm.betsClosed"}(yd||(yd={})),function(W){W["Small"]="Small",W["Medium"]="Medium",W["Big"]="Big"}(Md||(Md={})),function(W){W["Amount"]="amount",W["Payout"]="payout"}(Ud||(Ud={}));var gd,ud,ed,ld=M(605283);function Gd(W){var y,M;const{newBets:U,currentBets:i,store:x}=W;if(!x.restore.isRestoring&&!gA.A(i,U))if(lO.A(U))x.flyingChips.remove({type:j.yt.Place,bet:i});else{const W={},n={},k=ld.A([...Object.keys(U),...Object.keys(i)]);for(const x of k){const k=null!==(y=i[x])&&void 0!==y?y:0,g=null!==(M=U[x])&&void 0!==M?M:0;k>g?n[x]=k-g:k<g&&(W[x]=g-k)}x.flyingChips.add({type:j.yt.Place,bet:W}),x.flyingChips.remove({type:j.yt.Place,bet:n})}}function Yd(W,y){n.h5((()=>{const{state:M}=W.payload,{chips:U,repeat:i,acceptedBets:x}=M;if(y.restore.isRestoring&&y.bets.status===j.eT.Open&&M.status===j.eT.Open&&W.payload.gameId===y.abstractGame.values.gameRoundId)return;if(LO.d(i)>0&&y.bets.setRepeatBet(i),y.gamePhase.phase===BT.GameCancelled)return;const n=nd(M).size>0,k=y.bets.bets;let g=M.status;if(g===j.eT.Accepted&&n&&(g=j.eT.PartialAccepted),g===j.eT.AcceptedWithBonuses)if(y.restore.isRestoring||!y.abstractGame.values.isPageVisible)y.bets.setBet(U);else{const W=function(W){const{currentBets:y,chips:M,bonuses:U,wheelMultipliers:i}=W,{[EO.LightningStormBetCode.StormChaser]:x=0,[EO.LightningStormBetCode.XChaser]:n=0}=y,k=n>0,g=x>0,u=Object.keys(U).filter((W=>U[W]===EO.LightningStormBonusGame.StormBonus)),e=Object.keys(U).filter((W=>!!i[W])),l=g&&u.length>0?Object.keys(M).reduce(((W,y)=>{var U;let i=null!==(U=M[y])&&void 0!==U?U:0;return e.includes(y)&&k&&(i-=n),i>0&&(W[y]=i),W}),{}):void 0;return l&&k&&(l[EO.LightningStormBetCode.XChaser]=n),{xChaser:k?M:void 0,stormChaser:l}}({chips:U,currentBets:y.bets.bets,bonuses:y.wheel.bonusBetCodes,wheelMultipliers:y.wheel.multipliers});y.bets.setPendingChaserBet(W)}else y.bets.setBet(U);switch(y.bets.setAcceptedBets(x),y.bets.setStatus(g),g){case j.eT.Accepted:(function(W,y){const{chips:M}=W;y.log.log(C.Cd(M))})(M,y),Gd({currentBets:k,newBets:U,store:y});break;case j.eT.PartialAccepted:(function(W,y){const{acceptedBets:M}=W,U=function(W){var y;let M=0;const U=Object.keys(W);for(const i of U){let U=null===(y=W[i])||void 0===y?void 0:y[Ud.Amount];if(U){const W=j.cd[i];void 0!==W&&(U*=W),M+=U}}return M}(M),i={},x={};for(const y of Object.keys(W.acceptedBets)){const M=W.acceptedBets[y];M&&(i[y]=M.amount,x[y]=M.amount)}for(const y of Object.keys(W.invalidBets)){const M=W.invalidBets[y];M&&(x[y]=M.amount)}U>0&&(y.abstractGame.actions.toasts.show({type:nS.C.GenericToast,props:{title:Y.Tl(wO.X.BetsPartiallyAccepted),description:Y.Tl(wO.X.AcceptedBetsAmount,{amount:R.ej(U,{currencySymbol:y.abstractGame.values.currencySymbol})})}}),y.log.log(C.pe(x,i)))})(M,y),Gd({currentBets:k,newBets:U,store:y});break;case j.eT.Rejected:(function(W,y){const M={};for(const y of Object.keys(W.invalidBets)){const U=W.invalidBets[y];U&&(M[y]=U.amount)}if(!y.restore.isRestoring){const M=nd(W);for(const W of M)y.abstractGame.actions.handleError({errorId:`error_${W}`})}y.abstractGame.actions.balance.reserveBet(0),y.log.log(C.VT(M))})(M,y),Gd({currentBets:k,newBets:U,store:y});break;case j.eT.Settled:(function(W,y){const{acceptedBets:M,winType:U}=W,i=Object.values(M).reduce(kd(Ud.Payout),0),x=Object.values(M).reduce(kd(Ud.Amount),0);y.bets.clearPendingChaserBets(),y.chaserDistribute.finishFlow(),y.result.setPayout({amount:i,level:xd(U)}),y.result.setChipWinAmount(i),y.result.setBlockCelebration(y.settings.hideYouWinOnLowCelebration&&i<=x)})(M,y)}}))}function cd(W,y=0){n.h5((()=>{W.abstractGame.actions.video.sync.skipPastEvents(y),W.batteryCharger.reset(),W.hotSpot.reset(),W.monsterMash.reset(),W.fireball.reset(),W.stormBonus.reset(),W.wheel.reset(),W.bets.reset(),W.bonus.reset(),W.result.reset(),W.timeout.clear(MO.FlyWinningChip),W.statistics.setSpinHistoryFromPendingList(),W.statistics.setImmersiveDrawerView(YS.Uo.Full),W.lightningRound.reset(),W.chaserDistribute.reset(),W.bonusGameTransition.reset(),W.ui.hotSpotGrid.reset()}))}(function(W){W["GameCancelled"]="lightningstorm.gameCancelled"})(gd||(gd={})),function(W){W["Clear"]="lightningstorm.gameCleared"}(ud||(ud={})),function(W){W["DisplayBonus"]="lightningstorm.displayingBonuses"}(ed||(ed={}));var Dd,rd,Ad=M(361494);function Td(W){return Object.keys(W).reduce(((y,M)=>{var U;const i=null===(U=W[M])||void 0===U?void 0:U.bonusId;return void 0!==i&&(y[M]=i),y}),{})}function Od(W){return Object.keys(W).reduce(((y,M)=>{var U;const i=null===(U=W[M])||void 0===U?void 0:U.multiplier;return void 0!==i&&i.value>1&&(y[M]={...i}),y}),{})}(function(W){W["FireballBonus"]="lightningstorm.fireball"})(Dd||(Dd={})),function(W){W["HotSpotBonus"]="lightningstorm.hotSpot",W["Decision"]="lightningstorm.hotSpot.decision",W["DecisionFinal"]="lightningstorm.hotSpot.decision.final",W["Statistics"]="lightningstorm.hotSpot.decisionStats"}(rd||(rd={}));var hd=M(885537);var Sd,od,dd,qd=M(688315);(function(W){W["MonsterMashBonus"]="lightningstorm.monsterMash"})(Sd||(Sd={})),function(W){W["Begin"]="lightningstorm.restore.begin",W["End"]="lightningstorm.restore.end"}(od||(od={})),function(W){W["GameResolved"]="lightningstorm.gameResolved"}(dd||(dd={}));var sd,Nd=M(650276);(function(W){W["SpinHistory"]="lightningstorm.spinHistory"})(sd||(sd={}));const _d=73;var pd;(function(W){W["StormBonus"]="lightningstorm.stormBonus",W["DecisionMade"]="lightningstorm.stormBonus.decision",W["Statistics"]="lightningstorm.stormBonus.decisionStats"})(pd||(pd={}));const bd={[_h.uG.FirstStrikeFinished]:_h.LS.First,[_h.uG.SecondStrikeFinished]:_h.LS.Second,[_h.uG.ThirdStrikeFinished]:_h.LS.Third};function md(W,y){y.stormBonus.setMultiplier(W.total.value),W.total.capped&&y.result.showMaxMultiplierToast(W.total.value)}var zd;(function(W){W["Table"]="lightningstorm.table"})(zd||(zd={}));const Kd=[j.eT.Open,j.eT.AcceptedWithBonuses],Pd=[od.Begin,od.End,yd.BetsClosed,rd.Decision,pd.DecisionMade,gd.GameCancelled];function Rd(W,y){if(y.restore.isRestoring)return!1;switch(W.type){case id.fY:return function(W,y){return y.gamePhase.phase===BT.GameResolved||y.settings.tableId===W.payload.tableId&&y.bets.status===j.eT.Settled}(W,y);case yd.Bets:return function(W){return Kd.includes(W.payload.state.status)}(W);case rd.HotSpotBonus:return function(W){return W.payload.bonus.type!==Pr.bK.DecisionsClosed}(W);case pd.StormBonus:return function(W){return W.payload.bonus.type!==_h.uG.DecisionsClosed}(W);default:return!Pd.includes(W.type)}}function Id(W){var y;return null!==(y=W.timestamp)&&void 0!==y?y:0}var Ed;(function(W){W["Spinning"]="lightningstorm.wheelSpinning",W["Stopped"]="lightningstorm.wheelStopped",W["Result"]="lightningstorm.wheelResult"})(Ed||(Ed={}));const Zd={[EO.LightningStormBonusGame.HotSpot]:BT.HotSpot,[EO.LightningStormBonusGame.StormBonus]:BT.StormBonus,[EO.LightningStormBonusGame.BatteryCharger]:BT.BatteryCharger,[EO.LightningStormBonusGame.MonsterMash]:BT.MonsterMash,[EO.LightningStormBonusGame.Fireball]:BT.Fireball};function fd(W,y){y.wheel.setMultipliers(Od(W)),y.wheel.setBonusBetCodes(Td(W))}var Vd;(function(W){W["WinnersList"]="lightningstorm.winners"})(Vd||(Vd={}));var $d=M(969695),ad=M(786596);function Hd(W,y,M){switch(W.type){case id.fY:(function(W,y){y.bets.status!==j.eT.Open&&y.abstractGame.actions.balance.reserveBet(0),y.abstractGame.actions.balance.updateFromPayload(W.payload,W.id||"")})(W,M);break;case zd.Table:(function(W,y){n.h5((()=>{const{currentGame:M,dealer:U}=W.payload;y.abstractGame.values.gameRoundId!==(null==M?void 0:M.gameId)&&cd(y,W.timestamp),M&&(y.abstractGame.actions.setGameRoundId(M.gameId),y.abstractGame.actions.setGameTime(M.gameNumber)),U&&y.abstractGame.actions.setDealer(U.screenName)}))})(W,M);break;case od.Begin:(function(W,y){var M;y.abstractGame.actions.video.sync.skipPastEvents(null!==(M=W.timestamp)&&void 0!==M?M:0),y.restore.setIsRestoring(!0)})(W,M);break;case od.End:(function(W,y){y.restore.setIsRestoring(!1)})(0,M);break;case gd.GameCancelled:(function(W,y){n.h5((()=>{y.gamePhase.setPhase(BT.GameCancelled),y.abstractGame.actions.winnersList.hide(),y.flyingChips.clearAll(),y.bets.status===j.eT.Open&&y.abstractGame.actions.balance.reserveBet(0),cd(y,W.timestamp)}))})(W,M);break;case yd.BetsOpen:(function(W,y,M){n.h5((()=>{y.abstractGame.actions.setGameRoundId(W.payload.gameId),y.abstractGame.actions.setGameTime(W.payload.gameNumber);const U=W.payload.timeRemaining-M;U>0&&(y.gamePhase.setPhase(BT.BetsOpen),y.bettingTimer.start(U),y.sound.playSound({event:UA.PZ.BetsOpen}))}))})(W,M,y);break;case yd.BetsClosed:(function(W,y){n.h5((()=>{y.bets.totalBet>0?(y.bets.setStatus(j.eT.Pending),y.bets.setRepeatBet(y.bets.bets)):y.bets.setStatus(j.eT.NoBets),y.gamePhase.setPhase(BT.BetsClosed),y.bettingTimer.stop(),y.flyingChips.clearAll(),y.sound.playSound({event:UA.PZ.BetsClosed,args:[y.bets.hasBets?UA.gi.WithBets:UA.gi.WithOutBets]})}))})(0,M);break;case yd.Bets:Yd(W,M);break;case Wd.BatteryChargerBonus:(function(W,y){n.h5((()=>{y.gamePhase.setPhase(BT.BatteryCharger);const M=W.payload.bonus;switch(M.type){case xO.Intro:(function(W,y){y.batteryCharger.setPhase(xO.Intro),y.batteryCharger.setBatteries(W.batteries)})(M,y);break;case xO.WheelMultiplierUpdate:(function(W,y){y.batteryCharger.setPhase(xO.WheelMultiplierUpdate),y.batteryCharger.setBatteries(W.batteries)})(M,y);break;case xO.LoadingBattery:(function(W,y){y.batteryCharger.setPhase(xO.LoadingBattery),y.batteryCharger.setBatteries(W.batteries)})(M,y);break;case xO.WheelSpinning:(function(W,y){y.batteryCharger.setPhase(xO.WheelSpinning),y.batteryCharger.setBatteries(W.batteries)})(M,y);break;case xO.BatteryTested:(function(W,y){y.batteryCharger.setPhase(xO.BatteryTested),y.batteryCharger.setBatteries(W.batteries)})(M,y);break;case xO.BatteryCharged:case xO.GlobalMultiplier:(function(W,y){y.batteryCharger.setPhase(xO.BatteryCharged),y.batteryCharger.setBatteries(W.batteries)})(M,y);break;case xO.LastBatteryReached:(function(W,y){y.batteryCharger.setPhase(xO.LastBatteryReached),y.batteryCharger.setBatteries(W.batteries)})(M,y);break;case xO.Celebration:(function(W,y){y.batteryCharger.setPhase(xO.Celebration),y.batteryCharger.setBatteries(W.batteries),y.batteryCharger.setBonusMultiplier(W.bonusMultiplier)})(M,y)}}))})(W,M);break;case rd.HotSpotBonus:(function(W,y,M){n.h5((()=>{y.gamePhase.setPhase(BT.HotSpot);const U=W.payload.bonus;switch(U.type){case Pr.bK.Intro:(function(W,y){y.hotSpot.setPhase(Pr.bK.Intro)})(0,y);break;case Pr.bK.MultiplierUpdate:(function(W,y){y.hotSpot.setPhase(Pr.bK.MultiplierUpdate)})(0,y);break;case Pr.bK.MultiplierShuffle:(function(W,y){y.hotSpot.setPhase(Pr.bK.MultiplierShuffle)})(0,y);break;case Pr.bK.DecisionsOpen:(function(W,y,M){y.hotSpot.setPhase(Pr.bK.DecisionsOpen);const U=W.timeRemaining-M;U>0&&y.bonus.isParticipating&&(y.hotSpot.startDecisionTimer(U),y.ui.hotSpotGrid.setPhase(DA.Intro),y.sound.playSound({event:UA.PZ.HotSpotDecisionStart}))})(U,y,M);break;case Pr.bK.DecisionsClosed:(function(W,y){y.hotSpot.setPhase(Pr.bK.DecisionsClosed),y.hotSpot.stopDecisionTimer(),y.sound.playSound({event:UA.PZ.HotSpotDecisionEnd})})(0,y);break;case Pr.bK.MultiplierReveal:(function(W,y){y.hotSpot.setPhase(Pr.bK.MultiplierReveal)})(0,y);break;case Pr.bK.MultiplierDouble:(function(W,y){y.hotSpot.setPhase(Pr.bK.MultiplierDouble)})(0,y);break;case Pr.bK.Celebration:(function(W,y){y.hotSpot.setPhase(Pr.bK.Celebration)})(0,y)}}))})(W,M,y);break;case rd.Decision:(function(W,y){n.h5((()=>{y.hotSpot.selectedSpot!==W.payload.position&&y.hotSpot.setSelectedSpot(W.payload.position),W.payload.auto&&!y.restore.isRestoring&&y.abstractGame.actions.handleError({errorId:hd.Ql.LateCallDecision}),y.restore.isRestoring&&W.payload.multiplier?(y.hotSpot.setMultiplier(W.payload.multiplier),y.ui.hotSpotGrid.setPhase(DA.MultiplierReveal)):y.ui.hotSpotGrid.setPhase(DA.DecisionEnd)}))})(W,M);break;case rd.DecisionFinal:(function(W,y){n.h5((()=>{y.hotSpot.selectedSpot!==W.payload.position&&y.hotSpot.setSelectedSpot(W.payload.position);const M=y.hotSpot.multiplier;y.hotSpot.setMultiplier(W.payload.multiplier),y.hotSpot.phase===Pr.bK.MultiplierReveal||y.restore.isRestoring?(y.hotSpot.phase!==Pr.bK.MultiplierReveal||y.restore.isRestoring||y.log.log(C.MO({to:W.payload.position})),y.ui.hotSpotGrid.setPhase(DA.MultiplierReveal)):y.hotSpot.phase===Pr.bK.MultiplierDouble&&M!==W.payload.multiplier&&y.ui.hotSpotGrid.setPhase(DA.MultiplierDouble)}))})(W,M);break;case rd.Statistics:(function(W,y){y.hotSpot.setStatistics(W.payload)})(W,M);break;case pd.StormBonus:(function(W,y,M){n.h5((()=>{y.gamePhase.setPhase(BT.StormBonus);const U=W.payload.bonus;switch(U.type){case _h.uG.Intro:(function(W,y){y.stormBonus.setPhase(_h.uG.Intro)})(0,y);break;case _h.uG.WheelMultiplierUpdate:(function(W,y){y.stormBonus.setPhase(_h.uG.WheelMultiplierUpdate)})(0,y);break;case _h.uG.DecisionsOpen:(function(W,y,M){y.stormBonus.setPhase(_h.uG.DecisionsOpen);const U=W.timeRemaining-M;U>0&&y.bonus.isParticipating&&!y.stormBonus.hasMadeDecision&&(y.stormBonus.startDecisionTimer(U),y.stormBonus.decisionAnimationManager.onIntroStart())})(U,y,M);break;case _h.uG.FirstStrike:case _h.uG.SecondStrike:case _h.uG.ThirdStrike:(function(W,y){if(y.stormBonus.setPhase(W.type),y.bonus.isParticipating&&y.stormBonus.selectedOffer)switch(W.type){case _h.uG.FirstStrike:y.stormBonus.decisionAnimationManager.onSpotLight(_h.LS.First);break;case _h.uG.SecondStrike:y.stormBonus.decisionAnimationManager.onSpotLight(_h.LS.Second);break;case _h.uG.ThirdStrike:y.stormBonus.decisionAnimationManager.onSpotLight(_h.LS.Third)}y.stormBonus.selectedOffer===_h.LS.First&&W.firstOffer?y.stormBonus.setMultiplier(W.firstOffer):y.stormBonus.selectedOffer===_h.LS.Second&&W.secondOffer&&y.stormBonus.setMultiplier(W.secondOffer)})(U,y);break;case _h.uG.FirstStrikeFinished:case _h.uG.SecondStrikeFinished:case _h.uG.ThirdStrikeFinished:(function(W,y){if(y.stormBonus.setPhase(W.type),y.bonus.isParticipating)switch(W.type){case _h.uG.FirstStrikeFinished:y.stormBonus.decisionAnimationManager.onCharge(_h.LS.First);break;case _h.uG.SecondStrikeFinished:y.stormBonus.decisionAnimationManager.onCharge(_h.LS.Second);break;case _h.uG.ThirdStrikeFinished:y.stormBonus.decisionAnimationManager.onCharge(_h.LS.Third)}y.stormBonus.selectedOffer===_h.LS.First&&W.firstOffer?y.stormBonus.setMultiplier(W.firstOffer):y.stormBonus.selectedOffer===_h.LS.Second&&W.secondOffer?y.stormBonus.setMultiplier(W.secondOffer):bd[W.type]===y.stormBonus.selectedOffer&&md(W.multipliers,y)})(U,y);break;case _h.uG.DecisionsClosed:(function(W,y){y.stormBonus.setPhase(_h.uG.DecisionsClosed)})(0,y);break;case _h.uG.Celebration:(function(W,y){switch(y.stormBonus.selectedOffer){case _h.LS.First:md(W.firstOffer,y);break;case _h.LS.Second:md(W.secondOffer,y);break;case _h.LS.Third:md(W.finalOffer,y)}y.stormBonus.setPhase(_h.uG.Celebration),y.bonus.isParticipating&&y.stormBonus.decisionAnimationManager.onOutroStart()})(U,y)}}))})(W,M,y);break;case pd.DecisionMade:(function(W,y){n.h5((()=>{W.payload.offerId&&y.stormBonus.selectedOffer!==W.payload.offerId&&y.stormBonus.setSelectedOffer(W.payload.offerId),W.payload.auto&&!y.restore.isRestoring&&(y.abstractGame.actions.handleError({errorId:hd.Ql.LateCallDecision}),y.stormBonus.decisionAnimationManager.onSelectStart()),y.restore.isRestoring&&y.stormBonus.decisionAnimationManager.onSelectStart(),y.stormBonus.stopDecisionTimer()}))})(W,M);break;case pd.Statistics:(function(W,y){y.stormBonus.setStatistics(W.payload)})(W,M);break;case Sd.MonsterMashBonus:(function(W,y){n.h5((()=>{y.gamePhase.setPhase(BT.MonsterMash);const M=W.payload.bonus;switch(M.type){case hh.Intro:(function(W,y){y.monsterMash.setPhase(hh.Intro)})(0,y);break;case hh.WheelMultiplierUpdate:(function(W,y){y.monsterMash.setPhase(hh.WheelMultiplierUpdate)})(0,y);break;case hh.ReadyForSpin:(function(W,y){y.monsterMash.setPhase(hh.ReadyForSpin)})(0,y);break;case hh.ReelSpinning:(function(W,y){y.monsterMash.setPhase(hh.ReelSpinning),W.bonusMultiplier&&y.monsterMash.setMultiplier(W.bonusMultiplier.value)})(M,y);break;case hh.Celebration:(function(W,y){W.bonusMultiplier.capped&&y.result.showMaxMultiplierToast(W.bonusMultiplier.value),y.monsterMash.setPhase(hh.Celebration),y.monsterMash.setMultiplier(W.bonusMultiplier.value)})(M,y)}}))})(W,M);break;case Dd.FireballBonus:(function(W,y){n.h5((()=>{y.gamePhase.setPhase(BT.Fireball);const M=W.payload.bonus;switch(M.type){case Oh.Intro:(function(W,y){y.fireball.setPhase(Oh.Intro)})(0,y);break;case Oh.MultiplierDisplay:(function(W,y){y.fireball.setPhase(Oh.MultiplierDisplay)})(0,y);break;case Oh.MultiplierUpdate:(function(W,y){y.fireball.setPhase(Oh.MultiplierUpdate)})(0,y);break;case Oh.ReadyForBall:(function(W,y){y.fireball.setPhase(Oh.ReadyForBall),y.fireball.setMultiplier(fh)})(0,y);break;case Oh.BallLaunched:(function(W,y){y.fireball.setPhase(Oh.BallLaunched)})(0,y);break;case Oh.MultiplyingGrid:(function(W,y){y.fireball.setPhase(Oh.MultiplyingGrid),y.fireball.setMultiplier(W.bonusMultiplier)})(M,y);break;case Oh.FinalResult:(function(W,y){y.fireball.setPhase(Oh.FinalResult),y.fireball.setMultiplier({type:EO.LightningStormBonusMultiplierType.Regular,value:W.bonusMultiplier.value})})(M,y);break;case Oh.Celebration:(function(W,y){W.bonusMultiplier.capped&&y.result.showMaxMultiplierToast(W.bonusMultiplier.value),y.fireball.setPhase(Oh.Celebration),y.fireball.setMultiplier({type:EO.LightningStormBonusMultiplierType.Regular,value:W.bonusMultiplier.value})})(M,y)}}))})(W,M);break;case Vd.WinnersList:(function(W,y){var M;const{totalAmount:U,winners:i,winnersCount:x}=W.payload,n=(null===(M=y.ui.youWin.roundResult)||void 0===M?void 0:M.result.resultType)===Vo.l.Observing?IO.ur(U,0):U;y.result.setWinners({winnersCount:x,totalAmount:n}),x>0&&y.abstractGame.actions.winnersList.setWinners([$d.Ko(x,n),...i.map((W=>({type:ad.Q.Winner,screenName:W.screenName,win:`${W.payout}`,multiplier:W.multiplier})))])})(W,M);break;case dd.GameResolved:(function(W,y){n.h5((()=>{y.gamePhase.setPhase(BT.GameResolved)})),n.h5((()=>{const{result:M,bonuses:U,totalMultiplier:i,timeRemaining:x}=W.payload;y.bets.clearBets(),y.statistics.setSpinHistoryFromPendingList(),y.wheel.setOutcome(M),y.wheel.setMultipliers(Od(U)),y.wheel.setBonusBetCodes(Td(U)),y.result.bonusOutcome&&y.result.setWinningMultiplier(i),y.result.setTimeRemaining(x);const n=y.restore.isRestoring&&y.result.bonusOutcome;if(n&&(y.bonus.setCurrentBonus(y.result.bonusOutcome),y.bonusGameTransition.setIsBetSpotParked(!0),y.bonusGameTransition.setIsTransitionDone(!0),i))switch(y.result.bonusOutcome){case EO.LightningStormBonusGame.MonsterMash:y.monsterMash.setMultiplier(i);break;case EO.LightningStormBonusGame.Fireball:y.fireball.setMultiplier({type:EO.LightningStormBonusMultiplierType.Regular,value:i});break;case EO.LightningStormBonusGame.StormBonus:y.stormBonus.setMultiplier(i);break;case EO.LightningStormBonusGame.HotSpot:y.hotSpot.setMultiplier(i);break;case EO.LightningStormBonusGame.BatteryCharger:y.batteryCharger.setBonusMultiplier(i)}const k=y.wheel.outcome,g=y.result.chipWinAmount;g>0&&k&&(n&&y.bonus.setIsParticipating(!0),y.timeout.set(MO.WinningChipFlyDelay,(()=>{y.flyingChips.flyWinningChip(k,g),y.result.setChipWinAmount(0)}),1e3*Nd.qe))}))})(W,M);break;case ud.Clear:(function(W,y){n.h5((()=>{y.gamePhase.setPhase(BT.GameCleared),cd(y,W.timestamp)}))})(W,M);break;case ed.DisplayBonus:(function(W,y){n.h5((()=>{var M,U;const{bonuses:i}=W.payload,x=Od(i);y.gamePhase.setPhase(BT.DisplayBonuses),y.wheel.setMultipliers(x);const n=y.wheel.bonusBetCodes,k=Td(i),g=Ad.A(k,Object.keys(n)),u={};for(const W of Object.keys(g)){const y=g[W];y&&(u[y]||(u[y]=[]),null===(M=u[y])||void 0===M||M.push(W))}for(const W of Object.keys(u))y.lightningRound.addBonusShoot({id:W,betSpots:null!==(U=u[W])&&void 0!==U?U:[],done:y.restore.isRestoring});y.wheel.setBonusBetCodes(k)}))})(W,M);break;case Ed.Spinning:(function(W,y){n.h5((()=>{const{bonuses:M}=W.payload;y.gamePhase.setPhase(BT.WheelSpinning),y.wheel.outcome&&function(W){W.abstractGame.actions.video.sync.skipPastEvents((new Date).getTime()),W.batteryCharger.reset(),W.hotSpot.reset(),W.ui.hotSpotGrid.reset(),W.monsterMash.reset(),W.fireball.reset(),W.stormBonus.reset(),W.wheel.reset(),W.bonus.reset(),W.result.reset(),W.timeout.clear(MO.FlyWinningChip),W.statistics.setSpinHistoryFromPendingList(),W.statistics.setImmersiveDrawerView(YS.Uo.Full),W.lightningRound.reset()}(y),fd(W.payload.bonuses,y);const U=Od(M);Object.keys(U).length>0&&y.chaserDistribute.setFlow(function(W){const y=[];return W.bets.getBetCodeBet(EO.LightningStormBetCode.StormChaser)>0&&y.push(mh.tM.StormChaser),y.push(mh.tM.Multiplier),W.bets.getBetCodeBet(EO.LightningStormBetCode.XChaser)>0&&y.push(mh.tM.XChaser),y}(y)),y.restore.isRestoring&&y.chaserDistribute.finishFlow()}))})(W,M);break;case Ed.Stopped:(function(W,y){n.h5((()=>{fd(W.payload.bonuses,y),y.gamePhase.setPhase(BT.WheelStopped)}))})(W,M);break;case Ed.Result:(function(W,y){const{result:M,bonuses:U}=W.payload,i=Td(U);n.h5((()=>{y.wheel.setOutcome(M),fd(U,y),y.gamePhase.setPhase(BT.WheelResult),y.bets.pendingStormChaserBets&&y.bets.setBet(y.bets.pendingStormChaserBets),y.bets.pendingXChaserBets&&y.bets.setBet(y.bets.pendingXChaserBets),y.bets.clearPendingChaserBets(),y.lightningRound.reset(),y.chaserDistribute.finishFlow(),!y.restore.isRestoring&&y.abstractGame.values.isPageVisible?(y.bonusGameTransition.setIsTransitioning(!0),y.ui.bettingGrid.setIsWinningBetSpotAnimating(!0)):(y.bonusGameTransition.setIsBetSpotParked(!0),y.bonusGameTransition.setIsTransitionDone(!0))})),n.h5((()=>{const W=i[M];if(!W)return;const x=Zd[W];if(x){if(y.gamePhase.setPhase(x),y.statistics.setSpinHistoryFromPendingList(),y.statistics.setImmersiveDrawerView(YS.Uo.Reduced),y.restore.isRestoring)return;switch(W){case EO.LightningStormBonusGame.BatteryCharger:y.sound.playSound({event:UA.PZ.WheelResultBatteryCharger,args:[y.bonus.isParticipating?UA.V5.OnBet:UA.V5.NotOnBet]});break;case EO.LightningStormBonusGame.Fireball:y.sound.playSound({event:UA.PZ.WheelResultFireball,args:[y.bonus.isParticipating?UA.V5.OnBet:UA.V5.NotOnBet]});break;case EO.LightningStormBonusGame.HotSpot:y.sound.playSound({event:UA.PZ.WheelResultHotSpot,args:[y.bonus.isParticipating?UA.V5.OnBet:UA.V5.NotOnBet]});break;case EO.LightningStormBonusGame.MonsterMash:y.sound.playSound({event:UA.PZ.WheelResultMonsterMash,args:[y.bonus.isParticipating?UA.V5.OnBet:UA.V5.NotOnBet]});break;case EO.LightningStormBonusGame.StormBonus:y.sound.playSound({event:UA.PZ.WheelResultLightningStorm,args:[y.bonus.isParticipating?UA.V5.OnBet:UA.V5.NotOnBet]})}Od(U)[M]&&(y.bonus.isXXXtremeMode?y.sound.playSound({event:UA.PZ.WheelResultMultiplierXxxtreme,args:[W]}):y.sound.playSound({event:UA.PZ.WheelResultMultiplier,args:[W]}))}}))})(W,M);break;case sd.SpinHistory:(function(W,y){n.h5((()=>{if(!W.payload.newResult&&0!==y.statistics.spinHistory.data.length&&!y.restore.isRestoring)return;let M,U=YS.I5.Set;const i=W.payload.results.length>=_d;0===y.statistics.spinHistory.data.length||0===W.payload.results.length||y.restore.isRestoring?M=W.payload.results.map((W=>({...W,id:`stats-${Math.random()}`}))):W.payload.undo?(U=YS.I5.Removed,M=[...y.statistics.spinHistory.data.slice(1,y.statistics.spinHistory.data.length)],i&&M.push({...W.payload.results[W.payload.results.length-1],id:`stats-${Math.random()}`})):(U=YS.I5.Insert,M=[{...W.payload.results[0],id:`stats-${Math.random()}`},...i?y.statistics.spinHistory.data.slice(0,-1):y.statistics.spinHistory.data]);const x={action:U,data:M};y.restore.isRestoring||0===y.statistics.spinHistory.data.length||y.bonus.isActive||y.result.showGameResult?y.statistics.setSpinHistory(x):y.statistics.setPendingSpinHistory(x)}))})(W,M)}}class Bd{constructor(W){var y,M;this.transport=W.transport,this.transport.incomingMessages.onValue((y=W.rootStore,M=W.videoSync,function(W,y,M,U,i){return function(x){const n=x;U(n,W)?y.wait(qd.t(n,W,y,i)).then((y=>{M(n,y,W)})).catch((W=>{console.warn("VideoSync error:",W)})):M(n,0,W)}}(y,M,Hd,Rd,Id)))}sendMessage(W){this.transport.sendStandardMessage(null,W)}getPersistentTransport(){return this.transport}}class vd{constructor(W){this.disposeBag=new vT.C,this.abstractGame=function(W){return new LT(W)}({agApi:W.agApi,rootStore:this}),this.settings=function(W){return new eS(W)}({gameSettings:W.settings}),this.device=function(W){return new Ih(W)}({rootStore:this,DS:W.DS}),this.transport=function(W){return new Bd(W)}({videoSync:W.agApi.video.sync,transport:W.transport,rootStore:this}),this.gamePhase=new ah,this.restore=new US,this.timeout=this.disposeBag.addDisposable(new oS),this.videoRect=function(W){return new Jo(W)}({rootStore:this}),this.bettingTimer=function(W){return new Th(W)}({rootStore:this}),this.bets=function(W){return new xh(W)}({rootStore:this}),this.autoplay=this.disposeBag.addDisposable(function(W){return new gO(W)}({rootStore:this})),this.wheel=new Qo,this.batteryCharger=new eO,this.hotSpot=function(W){return new Bh(W)}({rootStore:this}),this.fireball=new Vh,this.monsterMash=new Jh,this.stormBonus=function(W){return new hS(W)}({rootStore:this}),this.result=function(W){return new gS(W)}({rootStore:this}),this.statistics=function(W){return new DS(W)}({rootStore:this}),this.references=this.disposeBag.addDisposable(function(W){return new MS(W)}({rootStore:this})),this.draggableChip=function(W){return new Zh(W)}({rootStore:this}),this.tooltips=function(W){return new NS(W)}({rootStore:this}),this.bonus=function(W){return new Nh(W)}({rootStore:this}),this.log=function(W){return new th(W)}({rootStore:this}),this.sound=function(W){return new GS(W)}({rootStore:this}),this.flyingChips=function(W){return new $h(W)}({rootStore:this}),this.videoElementRects=function(W){return new vo(W)}({rootStore:this}),this.lightningRound=new Fh,this.preferences=this.disposeBag.addDisposable(function(W){return new jh(W)}({rootStore:this})),this.chaserDistribute=function(W){return new Kh(W)}({rootStore:this}),this.bonusGameTransition=new bh,this.ui=this.disposeBag.addDisposable(function(W){return new ao(W)}({rootStore:this})),this.intro=new vh,D.ZQ()&&(this.testTools=new SS),this.setDefaultValues(),this.bindSideEffects()}dispose(){this.disposeBag.dispose()}setDefaultValues(){this.abstractGame.actions.video.mobile.disableScaleAnimation(),this.abstractGame.actions.video.mobile.setShouldApplyTransform(!1)}bindSideEffects(){var W;this.disposeBag.addDisposables([zS(this),(W=this,n.mJ((()=>W.abstractGame.isLowBalance),(y=>{y?W.abstractGame.actions.balance.setLow():W.abstractGame.actions.balance.setEnough()}),{fireImmediately:!0})),QT(this),FT(this),Lo(this),oh(this),kh(this),nh(this),gh(this),lh(this),iS(this),wT(this),uh(this),eh(this),Ch(this),Eh(this),sh(this),XT(this),uO(this),dh(this),Xh(this),wh(this),bS(this),cS(this),qh(this),ph(this),PS(this),ES(this),RS(this),jT(this),tT(this),yO(this)])}}var Ld=M(805596),Xd=M(53579);const wd=Symbol("evo-lightning-storm");function Fd(W,y){Ld.gB(wd,W,y)}function td(W,y){let M=W;for(let W=y.length-1;W>=0;W--)M=Jd(y[W],M);return M}function Jd(W,y){const M=W[0];return x.jsx(M.Provider,{value:W[1],children:y})}var jd=M(805480);function Cd(W){var y,U;n.jK({enforceActions:"always",computedRequiresReaction:!1,reactionRequiresObservable:!0,observableRequiresReaction:!1,isolateGlobalState:!0}),c.W0._init(W.params.setup,W.params.styles,W.params.tableConfig,null!==(y=W.deviceSupport)&&void 0!==y?y:l.DS);const r=c.W0._extend(HT),{dispose:A,transport:T,ag:O,getReactRoot:h}=function(W,y){const{params:M,lobby:U,deviceSupport:i=l.DS,mockBalanceManager:x,transports:n}=W;Y.JL(M.i18nData,"lightningstorm");const e=i.IS_DESKTOP;let c;return e?(c={[EO.LayoutType.ImmersiveV2]:{videoStream:jd.VideoPlaylist.Default,labelTranslationId:"view",isFooterGradientVisible:!1}},y.classicLayoutEnabled&&(c[EO.LayoutType.Classic]={videoStream:jd.VideoPlaylist.Classic,labelTranslationId:jd.VideoPlaylist.Classic,winnersListPosition:$d.C1.Left})):c={[EO.LayoutType.PhoneV2]:{videoStream:jd.VideoPlaylist.Default,disabledPhoneOrientation:G.t.Landscape}},D={config:{layout:{initialLayout:W.initialLayout?W.initialLayout:e?EO.LayoutType.ImmersiveV2:EO.LayoutType.PhoneV2,layoutClassicIsHidden:!y.classicLayoutEnabled,layouts:c,hasHelpSupportChatButton:!0,isMobileTableInfoGradientHidden:!0},tableLimits:{min:y.tableBetLimits[0],max:y.tableBetLimits[1]},minBalance:y.tableBetLimits[0],promotions:{hasMinimumTotalBet:!1},chipstack:{position:{phonePortrait:g.ChipStackPhonePortraitPosition.BottomCentered,phoneLandscape:g.ChipStackPhoneLandscapePosition.Left,tablet:g.ChipStackTabletPosition.Left}},helpNamespace:"lightningstorm",chat:{oneLineType:{portrait:k.X.Bottom,landscape:k.X.Bottom}},winnersList:{offset:{top:2,bottom:i.IS_PHONE?12:5}},video:{enabled:!0}},settings:y,game:{loader:M,mockBalanceManager:x,preferenceConfiguration:VT()},lobby:U},r=n,u.I({...D,game:{...D.game,mockTransports:r,gameFamily:"live"}});var D,r}(W,r),S=null!==(U=W.deviceSupport)&&void 0!==U?U:l.DS,o=W.createComponentsMap(),d=W.introVideoSrc,q=new vd({agApi:O,transport:T,settings:r,DS:S}),{stage3d:s,onGame3DLoaded:N,disposeGame3d:_}=function(W){const{DS:y}=W,M=function(W){let y;try{y=new Bu({alpha:!0,stencil:!1,antialias:!0,precision:W.IS_HIGH_PRECISION_SHADER_DISABLED?"mediump":"highp"}),y.outputColorSpace=BM,y.toneMapping=Uy}catch(W){y=null}return y}(y),U=new AT.h;let i=null;if(M){TT.ui(_T,NT);const W=new wu,y=function(){const W=new wn(35,1,.01,500);return W.position.z=400,W.updateMatrixWorld(!0),W}();i={renderer:M,scene:W,camera:y,loop:new hT}}return{stage3d:i,onGame3DLoaded:U,disposeGame3d:()=>{null==M||M.dispose(),TT.Xv(_T)}}}({DS:S}),p=[[eT.P,q],[mr.Z,s]],{AutoplayProvider:b,dispose:m}=function(W){const{store:y,clientApi:M,agApi:U}=W,i=function(W,y,M){return J.PS(t,W,y,M)}(U,function(W){return{repeatBets:()=>W.autoplay.repeatBets(),selectBetChipLogFields:()=>C.cU(W,j.uu.AutoPlay,W.bets.repeatBet||{}),betChipLogEnhancers:[...Q.$e,...Q.Xi]}}(y),M);return y.autoplay.bindAutoPlayAPI(i.autoplay),i}({clientApi:W.params.clientApi,agApi:O,store:q}),z=h(o),K=td(x.jsx((()=>x.jsx(b,{children:x.jsx(z,{children:o.DesktopGameOverlay&&x.jsx(o.DesktopGameOverlay,{})})})),{}),p);let P;return s?(P=function(W){const{stage3d:y,Game3d:M,DS:U,store:i}=W,x=Nr(y.renderer.domElement),k=function(W){var y;const M=null!==(y=window.devicePixelRatio)&&void 0!==y?y:1,U=W.IS_PHONE?1.6:W.IS_TABLET?1.3:1.2;return uA.A(M,1,U)}(U);RD({BoardMaterial:PT,PlaneGeometry:gk,Group:Iu,Mesh:En,MeshStandardMaterial:RG,MeshBasicMaterial:Lx,SpriteAnimationMaterial:IT,BorderMaterial:RT});const g={events:zT,camera:y.camera,gl:y.renderer,dpr:k,frameloop:"never",scene:y.scene};x.configure(g),x.render(M);const u=function(W){const{store:y,stage3d:M,setSize:U}=W;return n.mJ((()=>y.abstractGame.values.gameDimensions),(W=>{const y=W.reverseScale||1,i=W.containerWidth-2*W.left/y,x=W.containerHeight-2*W.top/y;U(i,x),M.camera.aspect=i/x,M.camera.updateMatrixWorld(!0),M.camera.updateProjectionMatrix()}),{fireImmediately:!0})}({stage3d:y,store:i,setSize:(W,y)=>x.configure({...g,size:{top:0,left:0,width:W,height:y}})});return()=>{u(),x.unmount()}}({stage3d:s,DS:l.DS,Game3d:td(x.jsx(rT,{}),p),store:q}),function(){const{}={};return yW([],{})}().then((()=>{N.resolve()})).catch((W=>{N.reject(new e.LS(W.errorId,Y.Tl(W.errorId)))})),function(W){var y;const{store:M,timeout:U,captureLogo:i,videoSource:x}=W;if(U<=0||0||!x)return void M.intro.done();let n;try{n=null==i?void 0:i()}catch(W){}Promise.race([ZT.cb(U).then((()=>{M.intro.phase===ET.G.Idle&&(M.intro.done(),null==n||n.release())})),Promise.all([fetch(x).then((W=>{if(M.intro.phase!==ET.G.Done)return W.blob()})),null!==(y=null==n?void 0:n.logo)&&void 0!==y?y:Promise.resolve()]).then((W=>{const[y,U]=W;if(y&&M.intro.phase!==ET.G.Done){const W=URL.createObjectURL(y);M.intro.setSource(W),n&&U&&M.intro.setLogo({logo:U,release:n.release}),M.intro.setPhase(ET.G.Loaded),M.intro.onReady.resolve()}}))]).catch((()=>{null==n||n.release(),M.intro.done()}))}({store:q,timeout:q.settings.introTimeout,captureLogo:q.device.isPhone?W.params.captureLogo:void 0,videoSource:d})):(N.reject(new e.LS(i.DeviceNotSupported,Y.Tl(i.DeviceNotSupported))),q.intro.done()),r.enableTestingAPI()&&function(W,y){(function(W){Fd("animation",{mute:()=>{var y;Xd.o(!0),null===(y=W.autoTestStore)||void 0===y||y.setisHotSpotSelectionGlowAnimationActive(!1)}})})(y),function(W){Fd("timer",{remaining:()=>W.bettingTimer.timeRemaining,stop:y=>{W.bettingTimer.stopAt(Math.round(1e3*y))}})}(y),function(W){Fd("stormBonusTimer",{stop:y=>W.stormBonus.stopTimerAt(Math.round(1e3*y))})}(y),function(W){Fd("hotSpotTimer",{stop:y=>W.hotSpot.stopDecisionTimerAt(Math.round(1e3*y))})}(y),function(W){Fd("hotSpot",{selectSpot:y=>W.hotSpot.select(y)})}(y),Fd("translation",{getTranslation:W=>Y.Tl(W)}),function(W){Fd("result",{payout:()=>W.result.payout.amount,getFormattedPayout:W=>R.ej(W,{maximumDecimalCount:2}),winningMultiplier:()=>W.result.winningMultiplier>1?W.result.winningMultiplier:1,bonusResult:()=>W.result.bonusOutcome,isResultShown:()=>W.result.showGameResult})}(y),function(W){Fd("wheel",{getBonusBetCodes:()=>W.wheel.bonusBetCodes,getBonusWheelMultipliers:()=>Object.keys(W.wheel.multipliers).reduce(((y,M)=>{var U;return{...y,[M]:null===(U=W.wheel.multipliers[M])||void 0===U?void 0:U.value}}),{})})}(y),function(W){Fd("game",{getGamePhase:()=>W.gamePhase.phase})}(y),function(W){Fd("stormBonus",{selectOffer:y=>W.stormBonus.select(y)})}(y),function(W){Fd("registerIncomingMessageListener",(y=>{W.incomingMessages.onValue(y),window.console.info("[Incoming] WS Message listener registered successfully")}))}(W),function(W){Fd("registerOutgoingMessageListener",(y=>{W.onSendMessage((W=>{y("string"==typeof W?W:JSON.stringify(W))})),window.console.info("[Outgoing] WS Message listener registered successfully")}))}(W),Ld.aF(wd)}(T,q),D.ZQ()&&M.e(62557).then(M.bind(M,251745)).then((W=>W.setTestToolPlugins(q))),{layout:()=>K,videoIsReady:O.video.ready,onGame3DLoaded:N,isGame3DSupported:null!==s,onIntroLoaded:q.intro.onReady,dispose:()=>(_(),null==P||P(),q.dispose(),m(),A()),gameStore:q}}},869743:(W,y,M)=>{M.d(y,{Fl:()=>g,NX:()=>n,U_:()=>e,cd:()=>u,eT:()=>i,uu:()=>U,yt:()=>k});var U,i,x=M(277082);(function(W){W["Chip"]="chip",W["Double"]="double",W["Repeat"]="repeat",W["AutoPlay"]="autoplay",W["Undo"]="undo",W["Move"]="move",W["BetOnAllEven"]="bulk_even",W["BetOnAllOdd"]="bulk_odd"})(U||(U={})),function(W){W["Idle"]="Idle",W["Open"]="Open",W["Pending"]="Pending",W["NoBets"]="NoBets",W["Accepted"]="Accepted",W["PartialAccepted"]="PartialAccepted",W["AcceptedWithBonuses"]="AcceptedWithBonuses",W["Rejected"]="Rejected",W["Settled"]="Settled"}(i||(i={}));const n=[i.NoBets,i.Accepted,i.PartialAccepted,i.AcceptedWithBonuses,i.Rejected,i.Settled];var k;(function(W){W["Place"]="BetActionType.Place",W["Remove"]="BetActionType.Remove",W["Move"]="BetActionType.Move"})(k||(k={}));const g=Object.values(x.LightningStormBetCode),u=(g.filter((W=>W!==x.LightningStormBetCode.EvenMoney&&W!==x.LightningStormBetCode.StormChaser&&W!==x.LightningStormBetCode.XChaser)),{[x.LightningStormBetCode.StormChaser]:2.7,[x.LightningStormBetCode.XChaser]:7.8}),e=Object.keys(u)},213205:(W,y,M)=>{M.d(y,{d:()=>x});var U=M(142130),i=M(869743);function x(W){const y=Object.keys(W).reduce(((y,M)=>{let U=W[M];if(U){const W=i.cd[M];return void 0!==W&&(U*=W),y+U}return y}),0);return U.ur(y)}},109922:(W,y,M)=>{var U;M.d(y,{Q2:()=>x,tE:()=>n,tM:()=>U,wt:()=>i}),function(W){W["None"]="ChaserDistributePhase.None",W["StormChaser"]="ChaserDistributePhase.StormChaser",W["Multiplier"]="ChaserDistributePhase.Multiplier",W["XChaser"]="ChaserDistributePhase.XChaser"}(U||(U={}));const i=Object.values(U).filter((W=>W!==U.None)),x=[U.StormChaser,U.XChaser];var n;(function(W){W["XChaser"]="ChaserAnimationType.XChaser",W["StormChaser"]="ChaserAnimationType.StormChaser"})(n||(n={}))},617401:(W,y,M)=>{var U;M.d(y,{_:()=>U}),function(W){W["Desktop"]="ComponentLayout.Desktop",W["DesktopClassic"]="ComponentLayout.DesktopClassic",W["MobilePortrait"]="ComponentLayout.MobilePortrait",W["MobileLandscape"]="ComponentLayout.MobileLandscape",W["Tablet"]="ComponentLayout.Tablet"}(U||(U={}))},744015:(W,y,M)=>{var U,i;M.d(y,{W:()=>i,m:()=>U}),function(W){W["Betting"]="FlyingChipType.Betting",W["Winning"]="FlyingChipType.Winning"}(U||(U={})),function(W){W["Fly"]="FlyingChipAnimationType.Fly",W["Bounce"]="FlyingChipAnimationType.Bounce"}(i||(i={}))},625756:(W,y,M)=>{var U;M.d(y,{Ge:()=>k,Ky:()=>i,Y8:()=>g,YB:()=>n,bK:()=>U,yi:()=>x}),function(W){W["Initial"]="Initial",W["Intro"]="Intro",W["MultiplierUpdate"]="MultiplierUpdate",W["MultiplierShuffle"]="MultiplierShuffle",W["DecisionsOpen"]="DecisionsOpen",W["DecisionsClosed"]="DecisionsClosed",W["MultiplierReveal"]="MultiplierReveal",W["MultiplierDouble"]="MultiplierDouble",W["Celebration"]="Celebration"}(U||(U={}));const i=["1","2","3","4","5","6","7","8","9"],x=["A","B","C","D","E","F","G","H","I","J","K","L"],n=i.length,k=x.length,g={undecided:0}},426331:(W,y,M)=>{var U;M.d(y,{G:()=>U}),function(W){W["Idle"]="IntroPhase.Idle",W["Loaded"]="IntroPhase.Loaded",W["ReadyToPlay"]="IntroPhase.ReadyToPlay",W["Done"]="IntroPhase.Done"}(U||(U={}))},541211:(W,y,M)=>{var U,i;M.d(y,{K:()=>i,U:()=>U}),function(W){W["ClientBetChip"]="CLIENT_BET_CHIP",W["ClientBetAccepted"]="CLIENT_BET_ACCEPTED",W["ClientBetAcceptedPartial"]="CLIENT_BET_ACCEPTED_PARTIAL",W["ClientBetRejected"]="CLIENT_BET_REJECTED",W["ClientStatisticsButtonPressed"]="CLIENT_STATISTICS_BUTTON_PRESSED",W["ClientWheelResultDisplayed"]="CLIENT_LMW_WHEEL_RESULT_DISPLAYED",W["ClientScrolledStatistics"]="CLIENT_SCROLLED_STATISTICS",W["ClientRestoredStatisticsScroll"]="CLIENT_RESTORED_STATISTICS_SCROLL",W["ClientYouWinDisplayed"]="CLIENT_LMW_YOU_WIN_DISPLAYED",W["ClientCornerCardUpdated"]="CLIENT_LMW_CORNER_CARD_UPDATED",W["ClientHSDecisionOffered"]="CLIENT_LMW_HS_DECISION_OFFERED",W["ClientHSDecisionChoosing"]="CLIENT_LMW_HS_DECISION_CHOOSING",W["ClientHSDecisionSelected"]="CLIENT_LMW_HS_DECISION_SELECTED",W["ClientLSDecisionOffered"]="CLIENT_LMW_LS_DECISION_OFFERED",W["ClientLSDecisionSelected"]="CLIENT_LMW_LS_DECISION_SELECTED"}(U||(U={})),function(W){W["Click"]="Click",W["DragAndDrop"]="DragAndDrop",W["Auto"]="Auto"}(i||(i={}))},924009:(W,y,M)=>{M.d(y,{sN:()=>l,cU:()=>G,Cd:()=>Y,pe:()=>c,VT:()=>D,Gl:()=>S,Te:()=>d,af:()=>o,MO:()=>q,Ye:()=>s,mT:()=>N,G8:()=>O,Fe:()=>T,OZ:()=>h,M:()=>r,Gt:()=>A});var U=M(869743),i=M(213205),x=M(541211),n=M(277082);function k(W){return Object.keys(W).reduce(((y,M)=>(y[n.lightningStormToExternalBetCode[M]]=W[M],y)),{})}function g(W,y){const M={...W},U=Object.keys(y);for(const W of U){const U=M[W]||0,i=y[W]||0;M[W]=U-i}const i=Object.keys(M);for(const W of i)0===M[W]&&delete M[W];return M}var u=M(42948);function e(W){var y;return{...W,enhancers:[...u.$e,...null!==(y=W.enhancers)&&void 0!==y?y:[]]}}function l(W,y,M,U){return e({type:x.U.ClientBetChip,payload:G(W,y,M,U),enhancers:u.CE})}function G(W,y,M,x){var n;if(y===U.uu.AutoPlay){const U=null!==(n=W.bets.repeatBet)&&void 0!==n?n:{};return{type:y,bets:U,amount:i.d(U),codes:k(U),prevCodes:k(g(U,M)),extra:x}}return{type:y,bets:W.bets.bets,amount:i.d(M),codes:k(M),prevCodes:k(g(W.bets.bets,M)),extra:x}}function Y(W){return e({type:x.U.ClientBetAccepted,payload:{bets:W},enhancers:u.Xi})}function c(W,y){return e({type:x.U.ClientBetAcceptedPartial,payload:{originalBet:W,confirmed:y},enhancers:u.Xi})}function D(W){return e({type:x.U.ClientBetRejected,payload:{rejected:W},enhancers:u.Xi})}function r(W){return e({type:x.U.ClientStatisticsButtonPressed,payload:{isOpen:W},enhancers:u.Xi})}function A(W){return e({type:x.U.ClientWheelResultDisplayed,payload:W,enhancers:u.Xi})}function T(W){return e({type:x.U.ClientScrolledStatistics,payload:{direction:W},enhancers:u.Xi})}function O(){return e({type:x.U.ClientRestoredStatisticsScroll,enhancers:u.Xi})}function h(W){return e({type:x.U.ClientYouWinDisplayed,payload:W,enhancers:u.Xi})}function S(W){return e({type:x.U.ClientCornerCardUpdated,payload:W,enhancers:u.Xi})}function o(W){return e({type:x.U.ClientHSDecisionOffered,payload:{decisionTime:W}})}function d(W){return e({type:x.U.ClientHSDecisionChoosing,payload:W,enhancers:u.Xi})}function q(W){return e({type:x.U.ClientHSDecisionSelected,payload:W})}function s(W){return e({type:x.U.ClientLSDecisionOffered,payload:W,enhancers:u.Xi})}function N(W){return e({type:x.U.ClientLSDecisionSelected,payload:W,enhancers:u.Xi})}},42948:(W,y,M)=>{M.d(y,{$e:()=>U,CE:()=>n,Xi:()=>x});const U=["gameType","gameTime","gameId","currency"],i=["userAgent"],x=["bets","balance",...i],n=["bets",...i]},850999:(W,y,M)=>{var U;M.d(y,{_:()=>U,h:()=>i}),function(W){W["ChasersEnabled"]="chasersEnabled"}(U||(U={}));const i="lmw.common."},590257:(W,y,M)=>{var U,i,x;M.d(y,{Ip:()=>i,Or:()=>U,kt:()=>x}),function(W){W["Chipstack"]="Reference.Chipstack",W["SelectedChip"]="Reference.SelectedChip",W["Balance"]="Reference.Balance",W["TotalAmount"]="Reference.TotalAmount",W["BettingGrid"]="Reference.BettingGrid",W["BetOnAllEven"]="Reference.BetOnAllEven",W["BetOnAllOdd"]="Reference.BetOnAllOdd",W["DraggableChip"]="Reference.DraggableChip",W["FooterGradient"]="Reference.FooterGradient",W["BonusTransitionCenter"]="Reference.BonusTransitionCenter"}(U||(U={})),function(W){W["Regular"]="ChipReferenceType.Regular",W["Bonus"]="ChipReferenceType.Bonus"}(i||(i={})),function(W){W["LeftTop"]="LightningGridCorner.LeftTop",W["LeftBottom"]="LightningGridCorner.LeftBottom",W["RightTop"]="LightningGridCorner.RightTop",W["RightBottom"]="LightningGridCorner.RightBottom"}(x||(x={}))},99200:(W,y,M)=>{M.d(y,{OV:()=>n,Sr:()=>i,uR:()=>k,xB:()=>U});var U,i,x=M(277082);(function(W){W["ClassicLayoutEnabled"]="classic_layout_enabled",W["TableBetMaxLimit"]="table_bet_max_limit",W["HistoryScrollableColumnCount"]="historyScrollableColumnCount",W["IsDraggableChipSupported"]="isDraggableChipSupported",W["HotSpotDecisionTime"]="hot_spot_decision_time",W["StormBonusDecisionTime"]="lightning_storm_bonus_decision_time",W["LightningStormBackgroundSong1Enabled"]="lightning_storm_background_song_1_enabled",W["MakeDecisionClosingTime"]="make_decision_closing_time",W["DisplayBonusDelay"]="display_bonus_delay",W["MaxBonusLimit"]="bonus_bet_max_limit",W["IntroTimeout"]="intro_timeout",W["VolatilityIndexRequired"]="regulatory.volatility_index_in_help_required",W["XXXtremeModeHaptic"]="haptic_xxxtreme"})(U||(U={})),function(W){W["Number"]="number",W["StormChaser"]="storm_chaser",W["XChaser"]="x_chaser",W["EvenMoney"]="even_money"}(i||(i={}));const n=Object.values(i),k={[x.LightningStormBetCode.One]:i.Number,[x.LightningStormBetCode.Two]:i.Number,[x.LightningStormBetCode.Three]:i.Number,[x.LightningStormBetCode.Four]:i.Number,[x.LightningStormBetCode.Five]:i.Number,[x.LightningStormBetCode.Six]:i.Number,[x.LightningStormBetCode.Seven]:i.Number,[x.LightningStormBetCode.Eight]:i.Number,[x.LightningStormBetCode.Nine]:i.Number,[x.LightningStormBetCode.Ten]:i.Number,[x.LightningStormBetCode.Eleven]:i.Number,[x.LightningStormBetCode.Twelve]:i.Number,[x.LightningStormBetCode.Thirteen]:i.Number,[x.LightningStormBetCode.Fourteen]:i.Number,[x.LightningStormBetCode.Fifteen]:i.Number,[x.LightningStormBetCode.Sixteen]:i.Number,[x.LightningStormBetCode.Seventeen]:i.Number,[x.LightningStormBetCode.Eighteen]:i.Number,[x.LightningStormBetCode.Nineteen]:i.Number,[x.LightningStormBetCode.Twenty]:i.Number,[x.LightningStormBetCode.StormChaser]:i.StormChaser,[x.LightningStormBetCode.XChaser]:i.XChaser,[x.LightningStormBetCode.EvenMoney]:i.EvenMoney}},253796:(W,y,M)=>{M.d(y,{PZ:()=>U,V5:()=>x,YX:()=>n,aN:()=>l,gi:()=>i,iQ:()=>u});var U,i,x,n,k=M(981298),g=M(277082);(function(W){W["BetPlaced"]="BetPlaced",W["BetPlacedOnLeaf"]="BetPlacedOnLeaf",W["BetPlacedOnStormChaser"]="BetPlacedOnStormChaser",W["BetPlacedOnXChaser"]="BetPlacedOnXChaser",W["BetPlacedOnEven"]="BetPlacedOnEven",W["BetPlacedOnOdd"]="BetPlacedOnOdd",W["StormChaserApplied"]="StormChaserApplied",W["XChaserApplied"]="XChaserApplied",W["XChaserChipAnimating"]="XChaserChipAnimating",W["BetsOpen"]="BetsOpen",W["BetsClosed"]="BetsClosed",W["OpenChasersMenu"]="OpenChasersMenu",W["CloseChasersMenu"]="CloseChasersMenu",W["BonusReveal"]="BonusReveal",W["LowXAdded"]="LowXAdded",W["MediumXAdded"]="MediumXAdded",W["LargeXAdded"]="LargeXAdded",W["MaxXAdded"]="MaxXAdded",W["BetGridCharge"]="BetGridCharge",W["LightningFromLeftTop"]="LightningFromLeftTop",W["LightningFromLeftBottom"]="LightningFromLeftBottom",W["LightningFromRightTop"]="LightningFromRightTop",W["LightningFromRightBottom"]="LightningFromRightBottom",W["WheelMultiplierFly"]="WheelMultiplierFly",W["WheelResultMultiplier"]="WheelResultMultiplier",W["WheelResultMultiplierXxxtreme"]="WheelResultMultiplierXxxtreme",W["WheelResultLeaf"]="WheelResultLeaf",W["WheelResultFireball"]="WheelResultFireball",W["WheelResultBatteryCharger"]="WheelResultBatteryCharger",W["WheelResultHotSpot"]="WheelResultHotSpot",W["WheelResultMonsterMash"]="WheelResultMonsterMash",W["WheelResultLightningStorm"]="WheelResultLightningStorm",W["BatteryChargerResultRegular"]="BatteryChargerResultRegular",W["BatteryChargerResultLowX"]="BatteryChargerResultLowX",W["BatteryChargerResultMediumX"]="BatteryChargerResultMediumX",W["BatteryChargerResultLargeX"]="BatteryChargerResultLargeX",W["HotSpotDecisionStart"]="HotSpotDecisionStart",W["HotSpotDecisionEnd"]="HotSpotDecisionEnd",W["HotSpotPlaced0"]="HotSpotPlaced0",W["HotSpotPlaced1"]="HotSpotPlaced1",W["HotSpotPlaced2"]="HotSpotPlaced2",W["HotSpotPlaced3"]="HotSpotPlaced3",W["HotSpotPlaced4"]="HotSpotPlaced4",W["HotSpotPlaced5"]="HotSpotPlaced5",W["HotSpotPlaced6"]="HotSpotPlaced6",W["HotSpotPlaced7"]="HotSpotPlaced7",W["HotSpotPlaced8"]="HotSpotPlaced8",W["HotSpotPlaced9"]="HotSpotPlaced9",W["HotSpotPlaced10"]="HotSpotPlaced10",W["HotSpotPlaced11"]="HotSpotPlaced11",W["HotSpotPlacedAuto0"]="HotSpotPlacedAuto0",W["HotSpotPlacedAuto1"]="HotSpotPlacedAuto1",W["HotSpotPlacedAuto2"]="HotSpotPlacedAuto2",W["HotSpotPlacedAuto3"]="HotSpotPlacedAuto3",W["HotSpotPlacedAuto4"]="HotSpotPlacedAuto4",W["HotSpotPlacedAuto5"]="HotSpotPlacedAuto5",W["HotSpotPlacedAuto6"]="HotSpotPlacedAuto6",W["HotSpotPlacedAuto7"]="HotSpotPlacedAuto7",W["HotSpotPlacedAuto8"]="HotSpotPlacedAuto8",W["HotSpotPlacedAuto9"]="HotSpotPlacedAuto9",W["HotSpotPlacedAuto10"]="HotSpotPlacedAuto10",W["HotSpotPlacedAuto11"]="HotSpotPlacedAuto11",W["HotSpotMakeDecision"]="HotSpotMakeDecision",W["HotSpotDoubler"]="HotSpotDoubler",W["HotSpotMultiplierReveal"]="HotSpotMultiplierReveal",W["HotSpotResultRegular"]="HotSpotResultRegular",W["HotSpotResultLowX"]="HotSpotResultLowX",W["HotSpotResultMediumX"]="HotSpotResultMediumX",W["HotSpotResultLargeX"]="HotSpotResultLargeX",W["FireballResultRegular"]="FireballResultRegular",W["FireballResultLowX"]="FireballResultLowX",W["FireballResultMediumX"]="FireballResultMediumX",W["FireballResultLargeX"]="FireballResultLargeX",W["MonsterMashResultRegular"]="MonsterMashResultRegular",W["MonsterMashResultLowX"]="MonsterMashResultLowX",W["MonsterMashResultMediumX"]="MonsterMashResultMediumX",W["MonsterMashResultLargeX"]="MonsterMashResultLargeX",W["LightningStormResultRegular"]="LightningStormResultRegular",W["LightningStormResultLowX"]="LightningStormResultLowX",W["LightningStormResultMediumX"]="LightningStormResultMediumX",W["LightningStormResultLargeX"]="LightningStormResultLargeX",W["LightningStormDecisionMade"]="LightningStormDecisionMade",W["LightningStormMakeDecision"]="LightningStormMakeDecision"})(U||(U={})),function(W){W["WithBets"]="WithBets",W["WithOutBets"]="WithOutBets"}(i||(i={})),function(W){W["OnBet"]="OnBet",W["NotOnBet"]="NotOnBet"}(x||(x={})),function(W){W["NoWin"]="NoWin",W["SmallWin"]="SmallWin",W["MediumWin"]="MediumWin",W["LargeWin"]="LargeWin"}(n||(n={}));const u={[k.R.None]:n.NoWin,[k.R.Small]:n.SmallWin,[k.R.Medium]:n.MediumWin,[k.R.Big]:n.LargeWin};var e;(function(W){W["HotSpot"]="HotSpot",W["MonsterMash"]="MonsterMash",W["BatteryCharger"]="BatteryCharger",W["Fireball"]="Fireball",W["LightningStorm"]="LightningStorm"})(e||(e={}));const l={[g.LightningStormBonusGame.BatteryCharger]:e.BatteryCharger,[g.LightningStormBonusGame.HotSpot]:e.HotSpot,[g.LightningStormBonusGame.MonsterMash]:e.MonsterMash,[g.LightningStormBonusGame.Fireball]:e.Fireball,[g.LightningStormBonusGame.StormBonus]:e.LightningStorm}},196758:(W,y,M)=>{M.d(y,{I5:()=>x,Uo:()=>i,fK:()=>U});const U="statistics";var i,x;(function(W){W["Full"]="StatisticsDrawerView.Full",W["Reduced"]="StatisticsDrawerView.Reduced"})(i||(i={})),function(W){W["Set"]="SpinHistoryUpdate.Set",W["Insert"]="SpinHistoryUpdate.Insert",W["Removed"]="SpinHistoryUpdate.Removed"}(x||(x={}))},980733:(W,y,M)=>{M.d(y,{P:()=>i,g:()=>x});var U=M(377810);const i=U.createContext(null);function x(){const W=U.useContext(i);if(!W)throw new Error("Store should be provided to StoreContext");return W}},78915:(W,y,M)=>{var U,i;M.d(y,{Ef:()=>x,LS:()=>i,OY:()=>n,ZQ:()=>k,cV:()=>g,uG:()=>U}),function(W){W["Initial"]="Initial",W["Intro"]="Intro",W["WheelMultiplierUpdate"]="MultiplierUpdate",W["DecisionsOpen"]="DecisionsOpen",W["DecisionsClosed"]="DecisionsClosed",W["FirstStrike"]="FirstStrike",W["FirstStrikeFinished"]="FirstStrikeFinished",W["SecondStrike"]="SecondStrike",W["SecondStrikeFinished"]="SecondStrikeFinished",W["ThirdStrike"]="ThirdStrike",W["ThirdStrikeFinished"]="ThirdStrikeFinished",W["Celebration"]="Celebration"}(U||(U={})),function(W){W["First"]="First",W["Second"]="Second",W["Third"]="Third"}(i||(i={}));const x={[U.FirstStrike]:i.First,[U.FirstStrikeFinished]:i.First,[U.SecondStrike]:i.Second,[U.SecondStrikeFinished]:i.Second,[U.ThirdStrike]:i.Third,[U.ThirdStrikeFinished]:i.Third},n={[i.First]:1,[i.Second]:2,[i.Third]:3},k=[U.Intro,U.WheelMultiplierUpdate,U.DecisionsOpen,U.DecisionsClosed,U.FirstStrike,U.FirstStrikeFinished,U.SecondStrike,U.SecondStrikeFinished,U.ThirdStrike,U.ThirdStrikeFinished],g={offers:{First:0,Second:0,Third:0},undecided:0}},219071:(W,y,M)=>{M.d(y,{T:()=>U,X:()=>x});var U,i=M(78915);(function(W){W["None"]="AnimationStage.None",W["Intro"]="AnimationStage.Intro",W["Idle"]="AnimationStage.Idle",W["Selected"]="AnimationStage.Selected",W["SpotLight"]="AnimationStage.SpotLight",W["Charge"]="AnimationStage.Charge",W["Outro"]="AnimationStage.Outro"})(U||(U={}));const x=[{type:U.None},{type:U.Intro},{type:U.Idle},{type:U.Selected},{type:U.SpotLight,battery:i.LS.First},{type:U.Charge,battery:i.LS.First},{type:U.SpotLight,battery:i.LS.Second},{type:U.Charge,battery:i.LS.Second},{type:U.SpotLight,battery:i.LS.Third},{type:U.Charge,battery:i.LS.Third},{type:U.Outro}]},547526:(W,y,M)=>{M.d(y,{f:()=>U});const U=.8},84537:(W,y,M)=>{var U,i,x;M.d(y,{P9:()=>x,fk:()=>U,p2:()=>i}),function(W){W["StandardColor"]="StandardColor",W["BonusGameColor"]="BonusGameColor",W["ResultPhaseColor"]="ResultPhaseColor"}(U||(U={})),function(W){W["StandardColor"]="StandardColor",W["BatteryCharger"]="BatteryCharger",W["HotSpot"]="HotSpot",W["MonsterMash"]="MonsterMash",W["StormBonusRegular"]="StormBonusRegular",W["StormBonusHigh"]="StormBonusHigh",W["Fireball"]="Fireball"}(i||(i={})),function(W){W["BettingOpened"]="BettingOpened",W["BettingClosed"]="BettingClosed",W["BonusGame"]="BonusGame"}(x||(x={}))},521353:(W,y,M)=>{var U;M.d(y,{R:()=>i,V:()=>U}),function(W){W["HotSpotDecisionWall"]="VideoElements.HotSpotDecisionWall",W["HotSpotDecisionWallBorder"]="VideoElements.HotSpotDecisionWallBorder",W["HotSpotDecisionWallBottom"]="VideoElements.HotSpotDecisionWallBottom",W["BatteryCharger"]="VideoElements.BatteryCharger",W["WheelMultiplierEnd"]="VideoElements.WheelMultiplierEnd",W["StormBonusFirstBox"]="VideoElements.StormBonusFirstBox",W["StormBonusSecondBox"]="VideoElements.StormBonusSecondBox",W["StormBonusThirdBox"]="VideoElements.StormBonusThirdBox"}(U||(U={}));const i={[U.HotSpotDecisionWall]:{x:736/1920,y:217/1080,w:449/1920,h:601/1080},[U.HotSpotDecisionWallBorder]:{x:713/1920,y:127/1080,w:492/1920,h:842/1080},[U.HotSpotDecisionWallBottom]:{x:736/1920,y:817/1080,w:449/1920,h:126/1080},[U.BatteryCharger]:{x:720/1920,y:120/1080,w:480/1920,h:640/1080},[U.WheelMultiplierEnd]:{x:1920*.5/1920,y:1080*.5/1080,w:1/1920,h:1/1080},[U.StormBonusFirstBox]:{x:732/1920,y:717/1080,w:134/1920,h:134/1080},[U.StormBonusSecondBox]:{x:897/1920,y:717/1080,w:134/1920,h:134/1080},[U.StormBonusThirdBox]:{x:1064/1920,y:717/1080,w:134/1920,h:134/1080}}},421645:(W,y,M)=>{var U,i;M.d(y,{G:()=>i,X:()=>U}),function(W){W["LimitUpTo"]="limitPlate.upTo",W["LimitMaxPayout"]="limitPlate.payoutLimit",W["BetsPartiallyAccepted"]="betsPartiallyAccepted",W["AcceptedBetsAmount"]="trafficlight.acceptedAmount.new",W["PlaceYourBets"]="placebets",W["MenuStatistics"]="menu.statistics",W["BetOnAllOdd"]="bettingGrid.betOnAllOdd",W["BetOnAllEven"]="bettingGrid.betOnAllEven",W["StormChaser"]="bettingGrid.stormChaser",W["XChaser"]="bettingGrid.xChaser",W["ChaserFee"]="bettingGrid.chaserFee",W["WaitingForNextGameTooltip"]="tooltip.waitForNextGame",W["WaitForNextGame"]="trafficlight.waitForNextGame2",W["MakeYourDecision"]="trafficlight.makeYourDecision",W["BetsClosedTooltip"]="tooltip.betsClosed",W["BalanceTooLowTooltip"]="tooltip.balanceTooLow",W["BalanceTooLowChaserTooltip"]="tooltip.chaserLowBalance",W["ChaserMinBetTooltip"]="tooltip.chaserMinBet",W["TableBetMaxLimitReachedTooltip"]="tooltip.tableBetMaxLimitReached",W["TableSingleBetMaxLimitReachedTooltip"]="tooltip.maxTableBetIs",W["MaxBetSpotValueTooltip"]="tooltip.maxBetIs",W["MinBetSpotValueTooltip"]="tooltip.minBetIs",W["TotalBet"]="betV2",W["TotalBetUppercase"]="betV2.uppercase",W["BonusBet"]="bonusBet.capitalized",W["BonusBetUppercase"]="bonusBet",W["StormBonusFirstDecision"]="stormBonusFirstDecision",W["StormBonusSecondDecision"]="stormBonusSecondDecision",W["Yes"]="mobile.button.yes",W["No"]="mobile.button.no",W["CurrencyAmount"]="currencyAmount.new",W["PayoutPlatePayout"]="bettingGrid.payoutPlate.payout",W["MakingDecision"]="makingDecision",W["YouWin"]="youWin",W["WonUppercase"]="won.uppercase",W["BonusMaxLimitReached"]="tooltip.maxBonusBetReached",W["MaxBonusBet"]="maxBonusBet",W["MaxMultiplierTitle"]="maxMultiplierTitle",W["MaxMultiplierMessage"]="maxMultiplierMessage",W["BetLimitGroupNumbers"]="betLimitGroup.numbers",W["BetLimitGroupStormChaser"]="betLimitGroup.stormChaser",W["BetLimitGroupXChaser"]="betLimitGroup.xChaser",W["BetsClosing"]="betsclosing",W["BetsClosed"]="nomorebets",W["BetsRejected"]="betsrejected",W["GameCancelled"]="gamecancelled",W["BetsAccepted"]="betsaccepted",W["SpinningWheel"]="trafficlight.spinningWheel",W["Result"]="result",W["First"]="1st",W["Second"]="2nd",W["Third"]="3rd",W["HotSpotMakeDecision"]="hotSpot.makeDecision",W["StormBonusMakeDecision"]="stormBonus.makeDecision",W["HighVolatility"]="help.volatilityHigh"}(U||(U={})),function(W){W["BetOnAllDesktopFontSize"]="betOnAllDesktopFontSize",W["BetOnAllMobileFontSize"]="betOnAllMobileFontSize",W["ChaserLabelDesktopFontSize"]="chaserLabelDesktopFontSize",W["ChaserLabelMobileFontSize"]="chaserLabelMobileFontSize"}(i||(i={}))},341360:(W,y,M)=>{M.d(y,{a:()=>n});var U=M(607439),i=M(803903);const x={[i.t.LeftTop]:"translate(0%, 0%)",[i.t.LeftCenter]:"translate(0%, -50%)",[i.t.LeftBottom]:"translate(0%, -100%)",[i.t.CenterTop]:"translate(-50%, 0%)",[i.t.Center]:"translate(-50%, -50%)",[i.t.CenterBottom]:"translate(-50%, -100%)",[i.t.RightTop]:"translate(-100%, 0%)",[i.t.RightCenter]:"translate(-100%, -50%)",[i.t.RightBottom]:"translate(-100%, -100%)"};class n{constructor(W,y={}){this.options=y,this.position=[0,0],this.currentScale=[1,1],this.currentOpacity=1,this.currentRotation=0,this.currentForceHardwareAcceleration=!0,this.translateUnits="px",this.element=W,y.transformOrigin&&(W.style.transformOrigin=y.transformOrigin),y.translateUnits&&(this.translateUnits=y.translateUnits),void 0!==y.forceHardwareAcceleration&&(this.currentForceHardwareAcceleration=y.forceHardwareAcceleration),this.apply()}getBoundingClientRect(){return this.element.getBoundingClientRect()}get x(){return this.position[0]}set x(W){this.position[0]!==W&&(this.position[0]=W,this.apply())}get y(){return this.position[1]}set y(W){this.position[1]!==W&&(this.position[1]=W,this.apply())}get scale(){return this.currentScale[0]}set scale(W){this.currentScale[0]===W&&this.currentScale[1]===W||(this.currentScale[0]=W,this.currentScale[1]=W,this.apply())}get scaleX(){return this.currentScale[0]}set scaleX(W){this.currentScale[0]!==W&&(this.currentScale[0]=W,this.apply())}get scaleY(){return this.currentScale[1]}set scaleY(W){this.currentScale[1]!==W&&(this.currentScale[1]=W,this.apply())}get opacity(){return this.currentOpacity}set opacity(W){const y=U.A(W,0,1);this.currentOpacity!==y&&(this.currentOpacity=y,this.apply())}get rotation(){return this.currentRotation}set rotation(W){this.currentRotation!==W&&(this.currentRotation=W,this.apply())}get forceHardwareAcceleration(){return this.currentForceHardwareAcceleration}set forceHardwareAcceleration(W){this.currentForceHardwareAcceleration!==W&&(this.currentForceHardwareAcceleration=W,this.apply())}setStyle(W){const y=Object.keys(W);for(const M of y)this.element.style[M]=W[M]}apply(){this.willApply(this.element)}willApply(W){let y=`${this.options.translateOrigin?x[this.options.translateOrigin]:"translate(0, 0)"}`;y+=` translate(${this.position[0]}${this.translateUnits}, ${this.position[1]}${this.translateUnits})`,y+=` rotate(${this.rotation}deg)`,y+=` scale(${this.currentScale[0]}, ${this.currentScale[1]})`,this.currentForceHardwareAcceleration&&(y+=" translateZ(0px)"),W.style.transform=y,W.style.opacity=`${this.currentOpacity}`}}},719630:(W,y,M)=>{M.d(y,{c:()=>x});var U=M(228174),i=M(341360);class x extends i.a{constructor(){super(...arguments),this.currentBrightness=0,this.currentContrast=0,this.currentLightness=0}get brightness(){return this.currentBrightness}set brightness(W){const y=U.GB(W,2);this.currentBrightness!==y&&(this.currentBrightness=y,this.apply())}get contrast(){return this.currentContrast}set contrast(W){const y=U.GB(W,2);this.currentContrast!==y&&(this.currentContrast=y,this.apply())}get lightness(){return this.currentLightness}set lightness(W){const y=Math.min(1,U.GB(W,2));this.currentLightness!==y&&(this.currentLightness=y,this.apply())}willApply(W){super.willApply(W);const y=[];0!==this.brightness&&y.push(`brightness(${1+this.brightness})`),0!==this.contrast&&y.push(`contrast(${1+this.contrast})`),0!==this.lightness&&y.push(`contrast(${1-this.lightness}) brightness(${1+1*this.lightness})`),W.style.filter=y.join(" ")}}},855500:(W,y,M)=>{M.d(y,{s:()=>i});var U=M(341360);class i extends U.a{constructor(){super(...arguments),this.currentImageX=0,this.currentImageY=0}get imageX(){return this.currentImageX}set imageX(W){this.currentImageX!==W&&(this.currentImageX=W,this.apply())}get imageY(){return this.currentImageY}set imageY(W){this.currentImageY!==W&&(this.currentImageY=W,this.apply())}willApply(W){super.willApply(W),W.style.backgroundPosition=`${this.currentImageX}% ${this.currentImageY}%`}}},73682:(W,y,M)=>{function U(W,y){if(y){const M=y[W];M&&(x(M),delete y[W])}}function i(W){W&&(W.dispose(),W.timeline.dispose())}function x(W){W&&(W.timeline.fastForward(),W.dispose(),W.timeline.dispose())}M.d(y,{VA:()=>U,a:()=>i,s1:()=>x})},803903:(W,y,M)=>{var U;M.d(y,{t:()=>U}),function(W){W["LeftTop"]="TranslateOrigin.LeftTop",W["LeftCenter"]="TranslateOrigin.LeftCenter",W["LeftBottom"]="TranslateOrigin.LeftBottom",W["CenterTop"]="TranslateOrigin.CenterTop",W["Center"]="TranslateOrigin.Center",W["CenterBottom"]="TranslateOrigin.CenterBottom",W["RightTop"]="TranslateOrigin.RightTop",W["RightCenter"]="TranslateOrigin.RightCenter",W["RightBottom"]="TranslateOrigin.RightBottom"}(U||(U={}))},417550:(W,y,M)=>{M.d(y,{i:()=>n});var U=M(625915),i=M(234341),x=M(908249);function n(W){const{element:y,amplitude:M,frequency:n,duration:k}=W;let g=0,u=0,e=0;const l=U.B((W=>{g+=W;const U=x.e(M[0],n,g),i=x.e(M[1],n,g);y.x+=U,y.y+=i}));return i.M().callback((()=>{u=y.x,e=y.y})).parallel([l,i.M().delay(k).callback((()=>{y.x=u,y.y=e,l.dispose()}))]).onDispose((()=>{l.dispose()}))}},619608:(W,y,M)=>{M.d(y,{K:()=>x});var U=M(377810),i=M(341360);function x(W={},y={},M=(W,y)=>new i.a(W,y)){const[x,n]=U.useState(null),k=U.useRef(W);k.current=W;const g=U.useRef(y);g.current=y;const u=U.useRef(M);return u.current=M,[x,U.useCallback((W=>{if(W){const y=u.current(W,k.current),M=Object.keys(g.current);for(const W of M){const M=g.current[W];void 0!==M&&(y[W]=M)}n(y)}else n(null)}),[])]}},163828:(W,y,M)=>{function U(W,y=1){const M=W.getBoundingClientRect();return{left:M.left/y,top:M.top/y,width:M.width/y,height:M.height/y}}function i(W,y){const{left:M,top:i,reverseScale:x=1}=y,n=U(W,x);return{...n,left:n.left-M/x,top:n.top-i/x}}M.d(y,{G:()=>i,x:()=>U})},150702:(W,y,M)=>{function U(W){if(!W.frames)throw new Error("Symbols metadata must be a valid JSON with frame definitions.");const y=Object.keys(W.frames).sort(),M=[];for(const U of y){const y=W.frames[U];y&&M.push({x:Math.floor(y.x/y.width),y:Math.floor(y.y/y.height)})}return M}M.d(y,{S:()=>U})},294116:(W,y,M)=>{function U(W){return"systemSize"in W&&"fps"in W&&"blendMode"in W&&"controllerConfigs"in W}M.d(y,{y:()=>U})},164956:(W,y,M)=>{M.d(y,{Gn:()=>x,J_:()=>i});var U=M(833141);const i=30;function x(W){const{frames:y,element:M,duration:i,automaticallyHide:x=!0,automaticallyShow:n=!0,resetAfterDone:k=!0}=W,g={frame:0};let u,e;return Array.isArray(y)?(u=y,e=y.length-1):e=y,U.D(g).callback((()=>{n&&(M.opacity=1)})).animateTo({frame:e},i,void 0,(()=>{if(u){const W=Math.round(g.frame);if(W>=u.length||0===u.length)return;(function(W,y,M){const U=M[y];W.imageX=100*-U.x,W.imageY=100*-U.y})(M,W,u)}else M.imageX=100/e*-g.frame})).callback((()=>{x&&(M.opacity=0),k&&(M.imageX=0,M.imageY=0)}))}},908249:(W,y,M)=>{function U(W,y,M){return Math.sin(M/1e3*y)*W}M.d(y,{e:()=>U})},658867:(W,y,M)=>{var U=M(377810),i=M(794140);const x=M.p+"assets/video/intro.48863f0d.mp4";var n=M(834055),k=M(64922),g=M(346160),u=M(917422),e=M(196758),l=M(421645),G=M(525620),Y=M(260525),c=M(980733);const D=G.PA((()=>{const W=c.g(),y={getMinBetGroupLimit:W.settings.getMinBetGroupLimit,getMaxBetGroupLimit:W.settings.getMaxBetGroupLimit,payoutLimit:W.settings.payoutLimit,currencySymbol:W.abstractGame.values.currencySymbol,isMobile:!1,maxBonusBet:W.settings.bonusMaxBet};return k.jsx(Y.o,{...y})}));var r=M(699695),A=M(876759),T=M(769413),O=M(315049),h=M(619608),S=M(835132);const o="logoContainer--75b72",d="isVisualTest--b0957",q=M.p+"images/logo.adff06c4.webp",s="footer-left-logo-container",N="footer-left-logo-image",_=({tableLogo:W,visible:y,bonusTransitioning:M,setReference:i})=>{const[x,n]=U.useState(!1),[g,u]=h.K(void 0,{opacity:y&&x?1:0}),e=U.useCallback((()=>{n(!0)}),[n]);return U.useEffect((()=>{if(!x||!g||M)return;g.scale=1;const W=T.M(g).animateTo({opacity:y?1:0},.25),U=O.l({anim:W});return()=>{W.fastForward(),U()}}),[x,g,y,M]),U.useEffect((()=>{i(g)}),[g,i]),U.useEffect((()=>()=>{i(null)}),[i]),k.jsx("div",{ref:u,className:o,"data-role":s,children:k.jsx(S.w,{alt:"Lightning Storm logo","data-role":N,src:W||q,onLoad:e,className:r.A({[d]:A.I()})})})},p=G.PA((()=>{const W=c.g(),y={tableLogo:W.settings.tableLogo,visible:W.ui.footerLeft.isVisible,bonusTransitioning:W.bonusGameTransition.isTransitioning,setReference:W.references.setFooterLogoReference};return k.jsx(_,{...y})}));var b=M(435972),m=M(784692),z=M(134633),K=M(743935),P=M(124323),R=M(902388),I=M(666622),E=M(956908),Z=M(34416),f=M(899872),V=M(231546),$=M(878273),a=M(996468),H=M(277082);const B="youWin--4c238",v="evenMoney--8711d",L=({outcome:W})=>{const y=U.useRef(W);return W&&(y.current=W),k.jsx("div",{className:r.A(B,{[v]:y.current===H.LightningStormBetCode.EvenMoney}),children:k.jsx(a.k,{})})},X=G.PA((()=>{var W;const y={outcome:null===(W=c.g().ui.youWin.roundResult)||void 0===W?void 0:W.outcome};return k.jsx(L,{...y})})),w="classicOverlayWrapper--8276f",F=({isDraggableChipEnabled:W})=>k.jsxs("div",{className:w,children:[W&&k.jsx(K.N,{}),k.jsx(R.n,{}),k.jsx(V.H,{}),k.jsx(Z.R,{}),k.jsx(z.u,{}),k.jsx(P.j,{}),k.jsx(E.F,{}),k.jsx(f.i,{}),k.jsx($.h2,{}),k.jsx(I.$,{}),k.jsx(X,{}),k.jsx(b.u,{}),k.jsx(m.l,{})]}),t=()=>{const W={isDraggableChipEnabled:c.g().settings.isChipDragDropEnabled};return k.jsx(F,{...W})};var J=M(958551);const j="statisticsContainer--c82c9",C=W=>{const{statistics:y,rowCount:M,columnCount:U,isMobile:i}=W;return k.jsx("div",{className:j,children:k.jsx(J.K,{statistics:y,rowCount:M,visibleRowCount:M,columnCount:U,isMobile:i,animateNewItems:!1})})},Q=G.PA((()=>{const W={statistics:c.g().statistics.spinHistory,columnCount:9,rowCount:8,isMobile:!1};return k.jsx(C,{...W})})),WW=()=>k.jsx(Q,{}),yW="icon--02d04",MW=({icon:W})=>W?k.jsx("div",{className:yW,children:W}):null;function UW(){const W={icon:c.g().ui.classicLayoutTrafficLight.trafficLight.textIcon};return k.jsx(MW,{...W})}var iW=M(129987),xW=M(427069);const nW="bettingGrid--95cf5",kW=({setReference:W})=>{const[y,M]=h.K({translateUnits:"%"});return U.useEffect((()=>{W(y)}),[W,y]),U.useEffect((()=>()=>{W(null)}),[W]),k.jsx("div",{ref:M,className:nW,style:{"--bettingGridHorizontalRatio":xW.ji[xW.C1.Horizontal]},"data-role":"betting-grid",children:k.jsx(iW.O,{})})},gW=G.PA((()=>{const W={setReference:c.g().references.setBettingGridContainerReference};return k.jsx(kW,{...W})}));var uW=M(650276);const eW="watermarkLogo--e8533",lW="bonus--b22d3",GW=({bonus:W})=>k.jsx("div",{className:r.A(eW,lW),children:k.jsx(H.LightningStormBonusGameImage,{catalog:uW.L6,bonus:W})}),YW=G.PA((()=>{const W=c.g(),y=W.bonus.currentBonus;if(!y||!W.ui.classicLayoutStore.isWatermarkVisible)return null;const M={bonus:y};return k.jsx(GW,{...M})})),cW="classicGameOverlay--5630d",DW="classic-game-overlay",rW=()=>k.jsxs("div",{"data-role":DW,className:cW,children:[k.jsx(gW,{}),k.jsx(YW,{})]});var AW=M(681031),TW=M(697231);const OW="immersiveGameOverlay--0c0ca",hW="immersive-game-overlay",SW=({isDraggableChipEnabled:W})=>k.jsxs("div",{"data-role":hW,className:OW,children:[k.jsx(TW.Q,{}),k.jsx(R.n,{}),k.jsx(AW.W,{}),k.jsx($.h2,{}),k.jsx(b.u,{}),k.jsx(E.F,{}),k.jsx(f.i,{}),k.jsx(Z.R,{}),k.jsx(z.u,{}),k.jsx(a.k,{}),k.jsx(V.H,{}),k.jsx(I.$,{}),W&&k.jsx(K.N,{}),k.jsx(P.j,{}),k.jsx(m.l,{})]}),oW=()=>{const W={isDraggableChipEnabled:c.g().settings.isChipDragDropEnabled};return k.jsx(SW,{...W})},dW=({isClassicLayout:W})=>W?k.jsx(rW,{}):k.jsx(oW,{}),qW=G.PA((()=>{const W={isClassicLayout:c.g().device.isClassicLayout};return k.jsx(dW,{...W})}));var sW=M(924009),NW=M(176292),_W=M(715907);const pW=({state:W,withTooltip:y=!0,...M})=>k.jsx(_W.g,{type:"secondary",...M,forceHideTooltip:!y,role:"statistics-button",state:W,iconComponent:k.jsx(NW.K,{})});pW.defaultProps={tooltip:"tooltip.statistics"};const bW="statistics-button",mW=W=>{const{onClick:y,selected:M,visible:U}=W,i=M?"Activated":"Default";return U?k.jsx(pW,{state:i,"data-role":bW,"data-state":`${i}`,onClick:y}):null},zW=G.PA((()=>{const W=c.g(),y=U.useCallback((()=>{const y=W.statistics.isImmersiveStatisticsExpanded;W.statistics.toggleImmersiveStatistics(),W.log.log(sW.M(!y))}),[W]),M={visible:W.ui.statisticsDrawer.isVisible,onClick:y,selected:W.statistics.isImmersiveStatisticsExpanded};return k.jsx(mW,{...M})})),KW=3,PW="container--6b051",RW="reduced--e28ba",IW="default--cf8fb",EW="animate--bce0b",ZW=W=>{const{statistics:y,rowCount:M,visibleRowCount:U,columnCount:i,view:x,animate:n,visible:g,isMobile:u,animateNewItems:l,onInsertRowAnimationReadyCallback:G}=W;return g?k.jsx("div",{className:r.A(PW,{[RW]:x===e.Uo.Reduced,[IW]:x===e.Uo.Full,[EW]:n}),style:{"--defaultVisibleRowCount":KW},children:k.jsx(J.K,{statistics:y,rowCount:M,columnCount:i,isMobile:u,animateNewItems:l,onInsertRowAnimationReady:G,visibleRowCount:U})}):null},fW=G.PA((()=>{const W=c.g(),y={statistics:W.statistics.spinHistory,columnCount:8,rowCount:6,visibleRowCount:W.ui.statisticsDrawer.visibleRowCount,view:W.ui.statisticsDrawer.statisticsDrawerView,animate:!W.statistics.isImmersiveStatisticsExpanded,visible:W.ui.statisticsDrawer.isVisible,isMobile:!1,animateNewItems:!0};return k.jsx(ZW,{...y})})),VW=()=>({...u.p,DesktopGameOverlay:qW,LayoutBetLimitsBody:D,LayoutImmersiveFooterLeftComponent:p,LayoutDesktopDrawers:{[e.fK]:{side:"right",drawerProps:{titleIcon:k.jsx(NW.K,{}),get titleText(){return g.Tl(l.X.MenuStatistics)},height:40,width:"auto",closedDrawerContentHeight:40},Component:k.jsx(fW,{})}},LayoutBottomRightButtons:[zW],LayoutClassicFullScreenOverlay:t,LayoutClassicTopRightComponent:WW,DesktopTrafficLightIcon:UW});var $W=M(809024),aW=M(357947);window.EVO_LOADER.publishApplication("/frontend/evo/r2/","lightningStorm.desktop",{initialize:async function(W){const y=aW.K({gameLoaderParams:W}),{layout:M,isGame3DSupported:k,onGame3DLoaded:g,onIntroLoaded:u,dispose:e}=function(W,y,M){return n.e({params:W,createComponentsMap:VW,lobby:y,introVideoSrc:M})}(W,y,x),l=i.H(W.getRoot());return k&&l.render(U.createElement(M)),await Promise.all([u,g]),{abstractGameDispose:e,root:l}},dispose:$W.L,applicationType:"game"})},40308:(W,y,M)=>{var U=M(377810),i=M(794140);const x=M.p+"assets/video/intromobil.9deeb61d.mp4";var n,k=M(834055),g=M(917422),u=M(64922),e=M(755073),l=M(435972),G=M(784692),Y=M(134633),c=M(743935),D=M(124323),r=M(681031),A=M(902388),T=M(666622),O=M(956908),h=M(34416),S=M(899872),o=M(231546),d=M(878273),q=M(697231),s=M(996468),N=M(980733),_=M(699695),p=M(525620),b=M(129987),m=M(283876),z=M(215038),K=M(547526),P=M(619608),R=M(610570),I=M(958551),E=M(163828),Z=M(384511),f=M(924009);function V(W,y,M){const U=[...W];U.push([y,Date.now()]);const i=U.length-M;return i>0&&U.splice(0,i),U}(function(W){W["Left"]="left",W["Right"]="right"})(n||(n={}));const $="scrollable--73559",a="fadeTwoSides--e5d73",H="fadeLeft--9bea9",B=.001,v=1,L=100,X=200,w="scrollable-container";class F extends U.Component{constructor(){super(...arguments),this.state={fadeTwoSides:!1,fadeLeft:!1},this.scrollRef=null,this.scrollContainerRef=null,this.scrollStartX=0,this.touchStartX=0,this.uiTouchPoints=[],this.scrollOffset=0,this.cachedRightLimit=0,this.previousWidth=0,this.onScrollFinishCallbacks=[],this.onTouchStart=W=>{this.stopScrollAnimation(),this.scrollStartX=this.scrollOffset,this.touchStartX=W.touches[0].clientX,this.uiTouchPoints=[],this.onScrollFinishCallbacks=[],this.uiTouchPoints=V(this.uiTouchPoints,this.touchStartX,L)},this.setScrollRef=W=>{this.scrollRef=W},this.setScrollContainerRef=W=>{this.scrollContainerRef=W},this.onTouchMove=W=>{if(!this.scrollRef)return;const y=W.touches[0].clientX,M=this.updateScrollPosition(this.scrollStartX+this.touchStartX-y);if(function(W,y){if(W.length<2)return!1;const M=W[W.length-1][0];return M>W[W.length-2][0]?y<M:y>M}(this.uiTouchPoints,y)&&(this.uiTouchPoints.length=0),1===this.uiTouchPoints.length&&M){const{onScrollStart:W}=this.props;this.onScrollFinishCallbacks.push((()=>{null==W||W(this.touchStartX-y>0?n.Right:n.Left)}))}this.uiTouchPoints=V(this.uiTouchPoints,y,L)},this.onTouchEnd=()=>{if(this.uiTouchPoints.length<1)return;this.stopScrollAnimation();const W=function(W,y){const M=function(W,y){return W.find((W=>W[1]>=y))}(W,y);if(!M||W.length<2)return 0;const U=function(W){return W[W.length-1][1]}(W)-M[1];if(0===U)return 0;const i=M[0],x=function(W){return W[W.length-1][0]}(W);return(i-x)/U}(this.uiTouchPoints,Date.now()-X);this.performAutoScrollAnimation(W,B),this.uiTouchPoints=[]},this.handleClickOutside=W=>{if(!this.scrollRef)return;if(0===this.scrollOffset)return;if(W.target===this.scrollRef||this.scrollRef.contains(W.target))return;this.stopScrollAnimation(),this.performAutoScrollAnimation(-v,0);const{onScrollRestore:y}=this.props;this.onScrollFinishCallbacks.push((()=>{null==y||y()}))}}componentDidMount(){document.addEventListener("touchstart",this.handleClickOutside),document.addEventListener("touchend",this.onTouchEnd)}componentWillUnmount(){document.removeEventListener("touchstart",this.handleClickOutside),document.removeEventListener("touchend",this.onTouchEnd),this.stopScrollAnimation(),this.redrawFrameRef&&window.cancelAnimationFrame(this.redrawFrameRef),this.onScrollFinishCallbacks=[]}componentDidUpdate(W){const{width:y,spinHistory:M}=this.props;y!==W.width&&this.updateScrollPosition(this.scrollOffset),M!==W.spinHistory&&this.resetScroll()}render(){const{fadeTwoSides:W,fadeLeft:y}=this.state,{children:M}=this.props,U=_.A($,{[a]:W,[H]:y});return u.jsx("div",{className:U,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,ref:this.setScrollContainerRef,"data-role":w,children:u.jsx("div",{ref:this.setScrollRef,children:M})})}getScrollRightLimit(){if(!this.scrollRef||!this.scrollContainerRef)return 0;const{width:W}=this.props;return this.cachedRightLimit&&this.previousWidth===W||(this.cachedRightLimit=this.scrollRef.scrollWidth-this.scrollContainerRef.clientWidth,this.previousWidth=W),this.cachedRightLimit}updateScrollPosition(W){if(!this.scrollRef||!this.scrollContainerRef||Number.isNaN(W))return!1;const y=Math.round(Z.qE(W,0,this.getScrollRightLimit()));return this.scrollOffset!==y&&(this.setScrollPosition(y),!0)}setScrollPosition(W){this.scrollOffset=W,this.redrawFrameRef||(this.redrawFrameRef=window.requestAnimationFrame((()=>{this.redraw()})))}redraw(){this.redrawFrameRef=void 0,this.scrollRef&&(this.scrollRef.style.transform=`translate(-${this.scrollOffset}px, 0)`,this.updateClasses())}updateClasses(){const W=this.getScrollRightLimit(),y=function(W,y){return W>0&&W<y}(this.scrollOffset,W),M=0!==W&&this.scrollOffset===W,{fadeLeft:U,fadeTwoSides:i}=this.state;U===M&&i===y||this.setState({fadeLeft:M,fadeTwoSides:y})}performAutoScrollAnimation(W,y){if(0===W)return void this.onScrollFinish();const M=W>=0?1:-1;let U=Math.abs(W),i=Date.now();const x=()=>{const W=Date.now(),n=W-i;i=W;const k=M*U*n;M>0&&this.scrollOffset>=this.getScrollRightLimit()?this.onScrollFinish():(this.updateScrollPosition(this.scrollOffset+k),U-=n*y,U>0&&this.scrollOffset>0?this.animationFrameRef=window.requestAnimationFrame(x):this.onScrollFinish())};this.animationFrameRef=window.requestAnimationFrame(x)}stopScrollAnimation(){this.animationFrameRef&&(window.cancelAnimationFrame(this.animationFrameRef),this.animationFrameRef=void 0)}onScrollFinish(){for(const W of this.onScrollFinishCallbacks)W();this.onScrollFinishCallbacks=[]}resetScroll(){if(!this.scrollRef)return;if(0===this.scrollOffset)return;this.stopScrollAnimation(),this.performAutoScrollAnimation(-v,0);const{onScrollRestore:W}=this.props;this.onScrollFinishCallbacks.push((()=>{null==W||W()}))}}const t=p.PA((W=>{const y=N.g(),M=U.useCallback((W=>{y.log.log(f.Fe(W))}),[y]),i=U.useCallback((()=>{y.log.log(f.G8())}),[y]),x={...W,width:y.abstractGame.values.gameDimensions.width,onScrollStart:M,onScrollRestore:i,spinHistory:y.statistics.spinHistory};return u.jsx(F,{...x})})),J="container--aa461",j="centerAligned--c8c2a",C="visible--34f2e",Q=W=>{const{statistics:y,rowCount:M,isMobile:i,visible:x,gameDimensions:n,scrollableColumnCount:k,bottomMultipliers:g}=W,e=k>0,[l,G]=U.useState(0),[Y,c]=U.useState(null);U.useLayoutEffect((()=>{if(Y&&x){const W=E.x(Y,n.reverseScale),y=Math.round(W.width/W.height);G(e?Math.max(y,k):y)}}),[e,n,Y,k,x]);const D=u.jsx(I.K,{statistics:y,rowCount:M,columnCount:l,isMobile:i,bottomMultipliers:g});return u.jsx("div",{className:_.A(J,{[C]:x,[j]:!e}),ref:c,children:e?u.jsx(t,{children:D}):D})},WW=p.PA((()=>{const W=N.g(),y={scrollableColumnCount:W.settings.historyScrollableColumnCount,statistics:W.statistics.spinHistory,rowCount:1,isMobile:!0,visible:W.ui.mobileStatistics.isVisible,gameDimensions:W.abstractGame.values.gameDimensions,bottomMultipliers:W.device.isLandscape};return u.jsx(Q,{...y})})),yW="bettingGridContainer--c7b52",MW="bettingGrid--d153e",UW="statistics--c3f0c",iW="chasersEnabled--8a756",xW="squareScreen--44847",nW="placeYourBets--0f321",kW="tablet--2b402",gW="bettingTimer--1b2e4",uW=({gameDimensions:W,isTablet:y,isLandscape:M,chasersEnabled:i,setReference:x,isSquare:n})=>{const[k,g]=P.K({transformOrigin:"bottom center"}),[e,l]=R.xM(W,y,M);return U.useEffect((()=>{x(k)}),[x,k]),U.useEffect((()=>()=>{x(null)}),[x]),u.jsxs("div",{ref:g,className:_.A(yW,{[kW]:y}),style:{"--bettingGridWidth":`${e}px`,"--bettingGridHeight":`${l}px`,"--transformTransitionDuration":`${K.f}s`},"data-role":"betting-grid",children:[!n&&u.jsx("div",{className:_.A(nW,{[kW]:y}),children:u.jsx(z.x,{})}),y&&u.jsx("div",{className:_.A(gW,kW),children:u.jsx(m.R,{})}),!M&&u.jsx("div",{className:_.A(UW,{[iW]:i,[xW]:n}),children:u.jsx(WW,{})}),u.jsx("div",{className:MW,style:{width:`${e}px`,height:`${l}px`},children:u.jsx(b.O,{})})]})},eW=p.PA((()=>{const W=N.g(),y={gameDimensions:W.abstractGame.values.gameDimensions,isLandscape:W.device.isLandscape,isTablet:W.device.isTablet,isSquare:W.device.isPhoneSquareScreen,chasersEnabled:W.ui.bettingGrid.chasersEnabled,setReference:W.references.setBettingGridContainerReference};return u.jsx(uW,{...y})})),lW="statistics--841f9",GW=({isLandscape:W})=>W?u.jsx("div",{className:lW,children:u.jsx(WW,{})}):null,YW=p.PA((()=>{const W={isLandscape:N.g().device.isLandscape};return u.jsx(GW,{...W})})),cW="gameOverlay--203ba",DW="mobile-game-overlay",rW=({isDraggableChipEnabled:W})=>u.jsxs("div",{"data-role":DW,className:cW,children:[u.jsx(q.Q,{}),u.jsx(A.n,{}),u.jsx(r.W,{}),u.jsx(d.h2,{}),u.jsxs(e.MobileSafeContainerConnected,{isRng:!1,children:[u.jsx(YW,{}),u.jsx(eW,{}),u.jsx(l.u,{}),u.jsx(o.H,{})]}),u.jsx(O.F,{}),u.jsx(S.i,{}),u.jsx(h.R,{}),u.jsx(Y.u,{}),u.jsx(s.k,{}),u.jsx(T.$,{}),W&&u.jsx(c.N,{}),u.jsx(D.j,{}),u.jsx(G.l,{})]}),AW=()=>{const W={isDraggableChipEnabled:N.g().settings.isChipDragDropEnabled};return u.jsx(rW,{...W})};var TW=M(260525),OW=M(346160),hW=M(509407),SW=M(132006),oW=M(25581),dW=M(897899),qW=M(744327);const sW=({betMinLimit:W,betMaxLimit:y,currencySymbol:M,tableMinLimit:i,tableMaxLimit:x,tableName:n,tBodyComponent:k,preSection:g,areLimitsInlined:e=!1,hideTitle:l=!1,isTablet:G=!1,showPayouts:Y,legacyMenuMode:c})=>{const D=U.useContext(SW.lv),r=U.useMemo((()=>hW.Q({lowerLimit:W,upperLimit:y,currencySymbol:M})),[W,y,M]),A=U.useMemo((()=>{if(x&&i)return hW.Q({lowerLimit:i,upperLimit:x,currencySymbol:M})}),[i,x,M]);return u.jsxs(u.Fragment,{children:[u.jsx(oW.y,{className:qW.A.container,useMobileScrollable:!0,dataRole:c?void 0:"drawer-scrollable",hasContentFadeOut:!c,refCallback:null==D?void 0:D.assignScrollable,children:u.jsxs("div",{className:qW.A.scrollContainer,children:[!l&&u.jsxs("div",{className:_.A(qW.A.tableInfo,{[qW.A.tablet]:G}),children:[u.jsxs("div",{children:[`${OW.Tl("table")}: `,u.jsx("span",{className:qW.A.tableName,children:n})]}),u.jsxs("div",{children:[u.jsx("span",{children:OW.Tl("betlimits3")}),"",u.jsx("span",{className:qW.A.limits,children:r})]}),!!A&&u.jsxs("div",{"data-role":"table-limits",children:[u.jsx("span",{children:OW.Tl("tableLimits3")}),"",u.jsx("span",{className:qW.A.limits,children:A})]})]}),g,u.jsxs("table",{className:qW.A.table,children:[u.jsx(dW.V,{isMobile:!0,areLimitsInlined:e,showPayouts:Y,legacyMenuMode:c}),k]})]})}),c&&u.jsx("div",{className:_.A(qW.A.shadow,{[qW.A.tablet]:G})})]})};sW.displayName="MobileBetLimitsAndPayoutsTable";const NW=W=>{const{currencySymbol:y,isTablet:M,tableName:U,tableBetLimits:i}=W;return u.jsx(sW,{currencySymbol:y,betMinLimit:i[0],betMaxLimit:i[1],isTablet:M,tableName:U,tBodyComponent:u.jsx(TW.o,{...W})})},_W={betLimits:p.PA((()=>{const W=N.g(),y={getMinBetGroupLimit:W.settings.getMinBetGroupLimit,getMaxBetGroupLimit:W.settings.getMaxBetGroupLimit,payoutLimit:W.settings.payoutLimit,currencySymbol:W.abstractGame.values.currencySymbol,isTablet:W.device.isTablet,tableName:W.settings.tableName,isMobile:!0,tableBetLimits:W.settings.tableBetLimits,maxBonusBet:W.settings.bonusMaxBet};return u.jsx(NW,{...y})}))},pW=()=>({...g.p,MobileGameOverlayContainer:AW,MobileMenuNavigationMap:_W});var bW=M(809024),mW=M(357947),zW=M(441650),KW=M(671837);window.EVO_LOADER.publishApplication("/frontend/evo/r2/","lightningStorm.mobile",{initialize:async function(W){const y=mW.K({animation:zW.hp.FromLeftToRight,backgroundGradientColor:KW.n(W),gameLoaderParams:W}),{layout:M,isGame3DSupported:n,onGame3DLoaded:g,onIntroLoaded:u,dispose:e}=function(W,y,M){return k.e({params:W,createComponentsMap:pW,lobby:y,introVideoSrc:M})}(W,y,x),l=i.H(W.getRoot());return n&&l.render(U.createElement(M)),await Promise.all([u,g]),{abstractGameDispose:e,root:l}},dispose:bW.L,applicationType:"game"})},610570:(W,y,M)=>{M.d(y,{ag:()=>x,q$:()=>g,xM:()=>u});var U=M(377810),i=M(427069);const x=.957,n=.7,k=.495,g=442;function u(W,y,M){const[u,e]=U.useState([0,0]);return U.useEffect((()=>{const U=y||M?i.C1.Horizontal:i.C1.Vertical,u=U===i.C1.Horizontal?y?k:n:x;let l=W.width*u;U===i.C1.Vertical&&(l=Math.min(l,g));let G=l/i.ji[U];G>.6*W.height&&(G=.6*W.height,l=G*i.ji[U]),e([l,G])}),[W,M,y]),u}},417183:(W,y,M)=>{M.d(y,{DL:()=>i,Vz:()=>x,fM:()=>k,qx:()=>g,tF:()=>u,vf:()=>n});var U=M(511576);function i(W,y){return`${W}-${y}`}function x(W,y){return new RegExp(`^${W}-.+`,"s").test(y)}function n(W,y){const M=new RegExp(`^${W}-`);return y.replace(M,"")}function k(W,y,M){return`${U.$r}${W}-${y}-${M}`}function g(W,y){return new RegExp(`^${W}-.+`,"s").test(y.replace(U.$r,""))}function u(W,y,M){var i;const x=(null!==(i=M.split("/").pop())&&void 0!==i?i:M).replace(U.$r,""),n=new RegExp(`^${W}-${y}-`);return x.replace(n,"")}},810957:(W,y,M)=>{M.d(y,{De:()=>e,ED:()=>g,Wz:()=>u,X$:()=>n,hC:()=>l,qO:()=>x,sx:()=>k});var U=M(417183),i=M(511576);function x(W,y){const M=W.atlases[0],x=W.jsons[0],n=M.content.split("\n");for(let M=0;M<n.length;M++){if(!i._b.find((W=>n[M].endsWith(W))))continue;const x=n[M],k=W.images.find((({name:W})=>W===x));if(!k)continue;const g=U.fM(y,W.assetName,k.name);n[M]=g}return{url:U.fM(y,W.assetName,x.name),atlasRawData:`\n${n.join("\n")}`}}function n(W,y){const M=W.jsons[0],i=U.fM(y,W.assetName,M.name),x=W.images[0];return{textureUrl:U.fM(y,W.assetName,x.name),url:i}}function k(W,y){const M=W.images[0];return U.fM(y,W.assetName,M.name)}function g(W,y){const M=W.images[0];return U.fM(y,W.assetName,M.name)}function u(W,y){const M=W.bitmaps[0];return U.fM(y,W.assetName,M.name)}function e(W,y){const M=W.jsons[0];return U.fM(y,W.assetName,M.name)}function l(W,y=!1){const M=[],U=W.split("\n");for(const W of U)(i._b.find((y=>W.endsWith(y)))||y&&W.startsWith("data:"+"image"))&&M.push(W);return M}},511576:(W,y,M)=>{M.d(y,{$r:()=>i,Tw:()=>U,_b:()=>n,g8:()=>x,pU:()=>k});const U=`${"evo-cache-v"}${2}`,i="assets-cache-prefix-",x="remote-cache-prefix-",n=["png","jpg","jpeg","webp","avif","svg"],k=new RegExp(`("|')\\S+\\.(${n.join("|")})("|')`,"gm")},625915:(W,y,M)=>{M.d(y,{$:()=>n,B:()=>x});var U=M(607439),i=M(297462);function x(W){return new k(W)}function n(W){const y=new k((y=>{W.active||W.activate(),W.tick(y),W.done&&W.reset()}));return y.onDispose((()=>{W.dispose()})),y}class k{constructor(W){this.loopTick=W,this.state=i.c.Idle,this.onDisposeListeners=[],this.isFastForward=!1}get done(){return this.state===i.c.Done||this.state===i.c.Loop}get active(){return this.state===i.c.Active||this.state===i.c.Loop}tick(W){return this.active&&this.loopTick(this.isFastForward?U.A(W,0,100):W),this.state}activate(){this.state===i.c.Idle&&(this.state=i.c.Loop)}fastForward(){this.isFastForward=!0}reset(){this.state=i.c.Idle,this.isFastForward=!1}onDispose(W){return this.onDisposeListeners.push(W),this}dispose(){for(const W of this.onDisposeListeners)W();this.onDisposeListeners.length=0,this.state=i.c.Done,this.loopTick=void 0}toJSON(){return{kind:"loop-endless"}}}},833141:(W,y,M)=>{M.d(y,{D:()=>n});var U=M(769413),i=M(584615);const x=30;function n(W,y){return new k(W,y)}class k extends U.v{static createStepEasing(W){const y=W-1;return 0===y?()=>0:M=>1===M?1:Math.floor(M*W)/y}constructor(W,y){var M;super(W),this.fps=null!==(M=null==y?void 0:y.fps)&&void 0!==M?M:x}animateTo(W,y,M,U){let i;const x=this.getPrevAnimationStep();i=x?x.propsTo[0].value:this.target.frame;const n=Math.abs(W.frame-i)+1;let g;return g=void 0===y?n/this.fps:0===n?0:y,super.animateTo(W,g,k.createStepEasing(n),U)}onTargetUpdated(){super.onTargetUpdated(),this.target.frame=Math.round(this.target.frame)}getPrevAnimationStep(){for(let W=this.steps.length;W--;){const y=this.steps[W];if(i.l(y))return y}}}},59181:(W,y,M)=>{M.d(y,{y:()=>r,l:()=>c});var U=M(974486),i=M(212429),x=M(484802),n=M(810957);let k;var g=M(535475),u=M(511576),e=M(933233);function l(W,y,M,U){if(function(W){return(null==W?void 0:W.startsWith("data:"))||!1}(W)||function(W){return(null==W?void 0:W.startsWith("blob:"))||!1}(W))return W;const i=e.w(W);return i.searchParams.wRetryCount=y.toString(),i.searchParams.wRetryDelay=M.toString(),i.searchParams.wRetryBackoffFactor=U.toString(),i.toString()}function*G(W){return yield W}const Y={[g.i.PixiSpine]:function*(W){const y={...W,url:yield W.url},M=n.hC(W.atlasRawData);for(const W of M)yield`${window.location.origin}${W}`;return y},[g.i.PlainImage]:G,[g.i.PixiTexture]:G,[g.i.PixiSpriteSheet]:function*(W){return{...W,url:yield W.url,textureUrl:yield W.textureUrl}},[g.i.PixiBitmap]:function*(W){return yield W},[g.i.PixiEmitter]:G};var c;let D;(function(W){W["AllLowQualityAssetsAreReady"]="allLowQualityAssetsAreReady",W["ConsumersShouldReloadAssets"]="consumersShouldReloadAssets",W["NewAssetWasRegistered"]="newAssetWasRegistered",W["NewBrandingOptionIsAvailable"]="newBrandingOptionIsAvailable",W["LowQualitySwitchWasToggled"]="lowQualitySwitchWasToggled",W["BrandingWasChanged"]="brandingWasChanged",W["Inited"]="inited"})(c||(c={}));class r{static get instance(){var W;return null!==(W=this._instance)&&void 0!==W||(this._instance=new r),this._instance}constructor(){this.eventEmitter=new U.b,this.brandingOptions=new Set,this.registeredAssets={[g.i.PlainImage]:[],[g.i.PixiSpine]:[],[g.i.PixiTexture]:[],[g.i.PixiSpriteSheet]:[],[g.i.PixiBitmap]:[],[g.i.PixiEmitter]:[]},this._currentBranding=null,this._useLowQualityAssets=!1,this.retryCount=3,this.retryDelay=100,this.retryBackoffFactor=1.5,this._cacheStorageUrlsSet=new Set,this.pendingLowQualityAssets=new Set;const W=window.EVO_LOADER.instance;if("empty"===W.kind)throw new i.gE("ConfigurationManager can't be initialized before app is ready. Please make sure that you don't use it in the module scope");W.subscribe("disposing",(()=>{this.reset(),r._instance=null}))}async init(W,y){this._currentGameType=W,(window.EVO_VERBOSE()||null!==y)&&(D=await async function(){try{return k||(k=await M.e(27672).then(M.bind(M,827672))),k}catch(W){return void console.error(W)}}(),await(null==D?void 0:D.initAssetsCache(y))),this._cacheStorageUrlsSet=await async function(){try{const W=new Set,y=await window.caches.open(u.Tw);return(await y.keys()).forEach((({url:y})=>W.add(y))),W}catch(W){return console.error(W),new Set}}(),this.eventEmitter.emit(c.Inited)}get gameType(){if(!this._currentGameType)throw new i.gE("ConfigurationManager wasn't inited: empty gameType");return this._currentGameType}get gameTypeSafe(){return this._currentGameType}get useLowQualityAssets(){return this._useLowQualityAssets}set useLowQualityAssets(W){W!==this._useLowQualityAssets&&(this._useLowQualityAssets=W,this.updateConfigurations(),this.eventEmitter.emit(c.LowQualitySwitchWasToggled),this.eventEmitter.emit(c.ConsumersShouldReloadAssets))}get currentBranding(){return this._currentBranding}set currentBranding(W){W!==this._currentBranding&&(this._currentBranding=W,this.updateConfigurations(),this.eventEmitter.emit(c.BrandingWasChanged),this.eventEmitter.emit(c.ConsumersShouldReloadAssets))}registerPlainImage(W,y,M=null,U={}){return this.registerAsset(g.i.PlainImage,W,y,M,U)}registerPixiSpine(W,y,M=null,U={}){return this.registerAsset(g.i.PixiSpine,W,y,M,U)}registerPixiBitmap(W,y,M=null,U={}){return this.registerAsset(g.i.PixiBitmap,W,y,M,U)}registerPixiTexture(W,y,M=null,U={}){return this.registerAsset(g.i.PixiTexture,W,y,M,U)}registerPixiSpriteSheet(W,y,M=null,U={}){return this.registerAsset(g.i.PixiSpriteSheet,W,y,M,U)}registerPixiEmitter(W,y){return this.registerAsset(g.i.PixiEmitter,W,y)}reportPlainImageLoaded(W){this.reportAssetLoaded(g.i.PlainImage,W)}reportPixiSpineLoaded(W){this.reportAssetLoaded(g.i.PixiSpine,W)}reportPixiBitmapLoaded(W){this.reportAssetLoaded(g.i.PixiBitmap,W)}reportPixiTextureLoaded(W){this.reportAssetLoaded(g.i.PixiTexture,W)}reportPixiSpriteSheetLoaded(W){this.reportAssetLoaded(g.i.PixiSpriteSheet,W)}setRetryCount(W){this.retryCount=W}setRetryDelay(W){this.retryDelay=W}setRetryBackoffFactor(W){this.retryBackoffFactor=W}registerAsset(W,y,M,U=null,i={}){const n=this.getAssetId(W,y),k=Y[W],g=this.updateConfigurationWithWorkerParams(M,k),u=U?this.updateConfigurationWithWorkerParams(U,k):null,e={},l=this.brandingOptions.size;for(const[W,y]of Object.entries(i))e[W]=this.updateConfigurationWithWorkerParams(y,k),this.brandingOptions.add(W);this.brandingOptions.size!==l&&this.eventEmitter.emit(c.NewBrandingOptionIsAvailable);const G=this.registeredAssets[W],r=G.find((W=>W.name===y));if(r)return this.pendingLowQualityAssets.delete(n),r.variants.originalConfig=g,r.variants.branding=e,r.variants.lowQualityConfig=u,r.currentConfig.value=this.getEffectiveConfigForAsset(r,W),r.currentConfig.value===u&&this.pendingLowQualityAssets.add(n),r.currentConfig;let A=null;D&&(A=D.getAssetsCacheConfigByName(this.gameTypeSafe,y,W));const T={name:y,currentConfig:new x.L(g),variants:{originalConfig:g,branding:e,externalConfigOverride:new x.L(A),lowQualityConfig:u}};return G.push(T),T.currentConfig.value=this.getEffectiveConfigForAsset(T,W),T.variants.externalConfigOverride.subscribe((()=>{T.currentConfig.value=this.getEffectiveConfigForAsset(T,W),this.eventEmitter.emit(c.ConsumersShouldReloadAssets)}),!1),T.currentConfig.value===u&&this.pendingLowQualityAssets.add(n),this.eventEmitter.emit(c.NewAssetWasRegistered),T.currentConfig}getEffectiveConfigForAsset(W,y){const M=Y[y];if(W.variants.externalConfigOverride.value)return W.variants.externalConfigOverride.value;if(this.useLowQualityAssets&&W.variants.lowQualityConfig){const y=function(W,y,M,U){try{const y=M(W.variants.originalConfig);let i=y.next();for(;!i.done;){if(!U.has(i.value))return!1;i=y.next()}return!0}catch(W){console.error(W)}return!1}(W,0,M,this._cacheStorageUrlsSet);return y?W.variants.originalConfig:W.variants.lowQualityConfig}return this.currentBranding&&W.variants.branding[this.currentBranding]||W.variants.originalConfig}reportAssetLoaded(W,y){if(!this.useLowQualityAssets||0===this.pendingLowQualityAssets.size)return;const M=this.getAssetId(W,y);this.pendingLowQualityAssets.delete(M),0===this.pendingLowQualityAssets.size&&this.eventEmitter.emit(c.AllLowQualityAssetsAreReady)}updateConfigurations(){for(const[W,y]of Object.entries(this.registeredAssets))for(const M of y)M.currentConfig.value=this.getEffectiveConfigForAsset(M,W)}updateConfigurationWithWorkerParams(W,y){if(0===this.retryCount)return W;const M=y(W);let U=M.next();for(;!U.done;)U=M.next(l(U.value,this.retryCount,this.retryDelay,this.retryBackoffFactor));return U.value}getAssetId(W,y){return`${W}__${y}`}reset(){this.eventEmitter.removeAllListeners();for(const W of Object.keys(this.registeredAssets))this.registeredAssets[W]=[]}}r._instance=null},535475:(W,y,M)=>{var U;M.d(y,{i:()=>U}),function(W){W["PlainImage"]="plainImage",W["PixiSpine"]="pixiSpine",W["PixiTexture"]="pixiTexture",W["PixiSpriteSheet"]="pixiSpriteSheet",W["PixiBitmap"]="pixiBitmap",W["PixiEmitter"]="pixiEmitter"}(U||(U={}))},898668:(W,y,M)=>{M.d(y,{I:()=>i});var U=M(276111);class i{constructor(W=[]){this.curvePoints=W.map((W=>({point:W.point,easing:W.easing||"linear"})))}sample(W){if(0===this.curvePoints.length)return 1;if(1===this.curvePoints.length)return this.curvePoints[0].point[1];if(W>=this.curvePoints[this.curvePoints.length-1].point[0])return this.curvePoints[this.curvePoints.length-1].point[1];const y=2===this.curvePoints.length?0:this.findKeyIndexAt(W),M=this.curvePoints[y].point,i=this.curvePoints[y+1].point,x=Math.abs(i[0]-M[0]);let n;n=0===x?1:Math.min(Math.max((W-M[0])/x,0),1);const k=(0,U.d9[this.curvePoints[y+1].easing||"linear"])(n);return M[1]*(1-k)+k*i[1]}addPoint(W,y="linear"){const M=this.curvePoints;if(0===M.length)M.push({point:W,easing:y});else if(M[0].point[0]>W[0])M.unshift({point:W,easing:y});else if(M[M.length-1].point[0]<W[0])M.push({point:W,easing:y});else{const M=this.findKeyIndexAt(W[0]);this.curvePoints=[...this.curvePoints.slice(0,M+1),{point:[W[0],W[1]],easing:y},...this.curvePoints.slice(M+1)]}}setPoint(W){const y=this.curvePoints.indexOf(W);-1!==y&&(this.curvePoints[y]=W,this.sortPoints())}removePoint(W){const y=this.getCurvePointIndex(W);-1!==y&&this.curvePoints.splice(y,1)}sortPoints(){this.curvePoints.sort(((W,y)=>W.point[0]-y.point[0]))}getCurvePointIndex(W){return this.curvePoints.findIndex((y=>y.point[0]===W[0]&&y.point[1]===W[1]))}toJson(){return this.curvePoints}findKeyIndexAt(W){if(W<=this.curvePoints[0].point[0])return 0;const y=this.curvePoints.length;if(W>=this.curvePoints[y-1].point[0])return y-2;let M=0,U=y;for(;M!==U;){const y=M+Math.floor((U-M)/2);this.curvePoints[y].point[0]>=W?U=y:M=y+1}return M-1}}},335914:(W,y,M)=>{M.d(y,{Od:()=>d,hZ:()=>_});var U=M(974486),i=M(230135);class x{constructor(){this.type=i.V.donut}init(W){this.emitterConfig=W}setPosition(W,y){const M=y.next()*Math.PI*2;let U=y.next()+y.next();const i=this.emitterConfig.innerRadius/this.emitterConfig.outerRadius;U>1&&(U=2-U),U<i&&(U=i+U*((1-i)/i));const x=this.emitterConfig.outerRadius*U;W[0]+=Math.cos(M)*x,W[1]+=Math.sin(M)*x}update(W){this.emitterConfig=W}}class n{constructor(){this.type=i.V.ellipse}init(W){this.emitterConfig=W}setPosition(W,y){const M=y.next()*Math.PI*2;if(this.emitterConfig.height===this.emitterConfig.width){const U=this.emitterConfig.width*Math.sqrt(y.next());W[0]+=Math.cos(M)*U,W[1]+=Math.sin(M)*U}else{const U=Math.sqrt(y.next()),i=U*Math.cos(M),x=U*Math.sin(M);W[0]+=i*this.emitterConfig.width/2,W[1]+=x*this.emitterConfig.height/2}}update(W){this.emitterConfig=W}}class k{constructor(){this.type=i.V.frame,this.outerWidth=0,this.outerHeight=0,this.innerWidth=0,this.innerHeight=0,this.squares=[{square:0,w:0,h:0,xShift:0,yShift:0},{square:0,w:0,h:0,xShift:0,yShift:0},{square:0,w:0,h:0,xShift:0,yShift:0},{square:0,w:0,h:0,xShift:0,yShift:0}]}init(W){this.outerWidth=W.outerWidth,this.outerHeight=W.outerHeight,this.innerWidth=W.innerWidth,this.innerHeight=W.innerHeight,this.calcFrameRectangles()}setPosition(W,y){let M=y.next();for(let U=0;U<this.squares.length;U+=1)if(M-=this.squares[U].square,M<=0||3===U){W[0]+=this.squares[U].xShift,W[1]+=this.squares[U].yShift,W[0]+=(y.next()-.5)*this.squares[U].w,W[1]+=(y.next()-.5)*this.squares[U].h;break}}update(W){this.outerWidth===W.outerWidth&&this.outerHeight===W.outerHeight&&this.innerWidth===W.innerWidth&&this.innerHeight===W.innerHeight||(this.outerWidth=W.outerWidth,this.outerHeight=W.outerHeight,this.innerWidth=W.innerWidth,this.innerHeight=W.innerHeight,this.calcFrameRectangles())}calcFrameRectangles(){const W=this.outerHeight-this.innerHeight,y=this.outerWidth-this.innerWidth,M=W/2,U=this.outerWidth*M,i=this.outerWidth*M,x=y/2,n=this.innerHeight*x,k=this.innerHeight*x,g=U+i+n+k;this.squares[0].w=this.outerWidth,this.squares[0].h=M,this.squares[0].xShift=0,this.squares[0].yShift=-(this.innerHeight/2+M/2),this.squares[0].square=U/g,this.squares[1].w=x,this.squares[1].h=this.innerHeight,this.squares[1].xShift=this.innerWidth/2+x/2,this.squares[1].yShift=0,this.squares[1].square=k/g,this.squares[2].w=this.outerWidth,this.squares[2].h=M,this.squares[2].xShift=0,this.squares[2].yShift=this.innerHeight/2+M/2,this.squares[2].square=i/g,this.squares[3].w=x,this.squares[3].h=this.innerHeight,this.squares[3].xShift=-(this.innerWidth/2+x/2),this.squares[3].yShift=0,this.squares[3].square=n/g}}var g=M(351673);class u{constructor(){this.type=i.V.image,this.vectors=[],this.image=null,this.scale=[1,1],this.threshold=0}init(W){var y;this.emitterConfig=W,W.image&&W.image instanceof Image&&(this.updatePixelPositions(W.image,null!==(y=W.threshold)&&void 0!==y?y:0),this.updateScale(this.emitterConfig))}setPosition(W,y){if(!this.image)return;const M=0|y.nextInRange(0,this.vectors.length),U=this.vectors[M];W[0]+=(U[0]-this.image.width/2)*this.scale[0],W[1]+=(U[1]-this.image.height/2)*this.scale[1]}update(W){var y;this.emitterConfig={...this.emitterConfig,...W};const M=W.image||this.image,U=null!==(y=W.threshold)&&void 0!==y?y:this.threshold;!M||M===this.image&&this.threshold===U||this.updatePixelPositions(M,U),this.updateScale(this.emitterConfig)}updateScale(W){this.image&&(void 0!==W.scale?this.scale="number"==typeof W.scale?[W.scale,W.scale]:[...W.scale]:void 0!==W.width&&void 0!==W.height&&(this.scale=[W.width/this.image.width,W.height/this.image.height]))}updatePixelPositions(W,y){this.vectors=[],this.image=null,this.threshold=y;const M=g.M5(W);if(!M)return;this.image=W;const{width:U,height:i}=M,x=M.data;for(let W=0;W<U;W++)for(let y=0;y<i;y++)x[4*(y*U+W)+3]>this.threshold&&this.vectors.push([W,y])}}class e{constructor(){this.type=i.V.point}init(){}setPosition(){}update(){}}class l{constructor(){this.type=i.V.rectangle}init(W){this.emitterConfig=W}setPosition(W,y){W[0]+=(y.next()-.5)*this.emitterConfig.width,W[1]+=(y.next()-.5)*this.emitterConfig.height}update(W){this.emitterConfig=W}}class G{constructor(){this.type=i.V.triangle,this.cornersSize=0,this.cornersPosition=[0,0],this.corners=[[0,0],[0,0],[0,0]]}init(W){this.emitterConfig=W}setPosition(W,y){var M;this.emitterConfig.size===this.cornersSize&&this.cornersPosition[0]===W[0]&&this.cornersPosition[1]===W[1]||(this.cornersSize=null!==(M=this.emitterConfig.size)&&void 0!==M?M:100,this.cornersPosition[0]=W[0],this.cornersPosition[1]=W[1],function(W,y,M){const U=Y*y/2,i=-2/3*U,x=-y/2,n=1/3*U,k=y/2,g=1/3*U;M[0][0]=W[0]+0,M[0][1]=W[1]+i,M[1][0]=W[0]+x,M[1][1]=W[1]+n,M[2][0]=W[0]+k,M[2][1]=W[1]+g}(W,this.cornersSize,this.corners));const U=y.next(),i=y.next(),x=Math.sqrt(U),[n,k,g]=this.corners;W[0]=(1-x)*n[0]+x*(1-i)*k[0]+x*i*g[0],W[1]=(1-x)*n[1]+x*(1-i)*k[1]+x*i*g[1]}update(W){this.emitterConfig=W}}const Y=Math.sqrt(3);function c(W){switch(W){case i.V.ellipse:return new n;case i.V.rectangle:return new l;case i.V.donut:return new x;case i.V.triangle:return new G;case i.V.frame:return new k;case i.V.point:return new e;case i.V.image:return new u;default:return console.warn(`Unknown emitter type: "${W}"!`),new e}}var D=M(233387);class r{constructor(){this.scale=[1,1],this.rotation=0,this.position=[0,0]}applyToPoint(W,y){const M=y;M[0]=W[0],M[1]=W[1];const U=Math.sin(this.rotation),i=Math.cos(this.rotation);return M[0]=D.eL(M[0],M[1],U,i),M[1]=D.Z8(M[0],M[1],U,i),M[0]*=this.scale[0],M[1]*=this.scale[1],M[0]+=this.position[0],M[1]+=this.position[1],M}reset(){this.scale[0]=1,this.scale[1]=1,this.rotation=0,this.position[0]=0,this.position[1]=0}}const A=[0,0];class T{constructor(W,y,M=!1){this.config=W,this.controller=y,this.isAlive=M,this.customProperties=new Map,this.transform=new r,this.freezePosition=!1,this.opacity=0,this.opacityInit=0,this.progress=0,this.directionVector=[0,0],this.velocity=[0,0],this.initialPosition=[0,0],this.angularVelocity=0,this.initialVelocity=0,this.linearAcceleration=0,this.tangentialAcceleration=0,this.radialAcceleration=0,this.scale=0,this.lifetime=0,this.lifetimeLeft=0,this.acceleration=[0,0]}awake(W,y,M,U){this.isAlive=U,this.config=W,this.freezePosition=!1,this.transform.reset();const i=this.controller.random,x=W.angularVelocity,n=W.initialRotation;this.angularVelocity=i.next()*(x.max-x.min)+x.min,this.transform.rotation=i.next()*(n.max-n.min)+n.min,this.initialPosition[0]=y.position[0]*M.width,this.initialPosition[1]=y.position[1]*M.height,this.controller.emitter.setPosition(this.initialPosition,i),this.transform.position[0]=this.initialPosition[0],this.transform.position[1]=this.initialPosition[1];const k=W.spread*Math.PI/180,g=(2*i.next()-1)*k,u=Math.sin(g),e=Math.cos(g);this.directionVector[0]=e*W.directionVector[0]-u*W.directionVector[1],this.directionVector[1]=u*W.directionVector[0]+e*W.directionVector[1],D.hF(this.directionVector),this.color=this.controller.colorsManager.getInitParticleColor(this.initialPosition,M,this.controller.random);const l=W.initialVelocity;this.initialVelocity=i.next()*(l.max-l.min)+l.min;const G=W.linearAcceleration;this.linearAcceleration=i.next()*(G.max-G.min)+G.min,this.velocity[0]=this.initialVelocity*this.directionVector[0],this.velocity[1]=this.initialVelocity*this.directionVector[1],this.acceleration[0]=0,this.acceleration[1]=0;const Y=W.tangentialAcceleration;this.tangentialAcceleration=i.next()*(Y.max-Y.min)+Y.min;const c=W.radialAcceleration;this.radialAcceleration=i.next()*(c.max-c.min)+c.min;const r=W.scale,A=r.curve.sample(0);this.scale=i.next()*(r.max-r.min)+r.min,this.transform.scale[0]=this.scale*A,this.transform.scale[1]=this.scale*A;const T=W.opacity;this.opacityInit=i.next()*(T.max-T.min)+T.min,this.opacity=this.opacityInit*T.curve.sample(0);const O=W.lifetime;this.lifetime=i.next()*(O.max-O.min)+O.min,this.lifetimeLeft=this.lifetime}addAcceleration(W,y){this.acceleration[0]+=W,this.acceleration[1]+=y}addVelocity(W,y){this.velocity[0]+=W,this.velocity[1]+=y}update(W,y){if(!this.isAlive||this.lifetimeLeft<0||W>=this.lifetimeLeft)return this.isAlive=!1,this.lifetimeLeft=0,this.progress=1,!1;const M=(this.lifetime-this.lifetimeLeft)/this.lifetime;this.progress=M;const U=this.config;if(this.lifetimeLeft-=W,!this.freezePosition){const i=U.linearAcceleration.curve.sample(M)*this.linearAcceleration;if(0!==i){const W=A;W[0]=this.velocity[0],W[1]=this.velocity[1],D.hF(W),this.acceleration[0]+=W[0]*i,this.acceleration[1]+=W[1]*i}if((this.tangentialAcceleration||this.radialAcceleration)&&this.transform.position[0]!==this.initialPosition[0]||this.transform.position[1]!==this.initialPosition[1]){const W=A;W[0]=this.transform.position[0]-this.initialPosition[0],W[1]=this.transform.position[1]-this.initialPosition[1],D.hF(W);const y=U.tangentialAcceleration.curve.sample(M)*this.tangentialAcceleration;0!==y&&(this.acceleration[0]+=-W[1]*y,this.acceleration[1]+=W[0]*y),0!=U.radialAcceleration.curve.sample(M)*this.radialAcceleration&&(this.acceleration[0]+=W[0]*this.radialAcceleration,this.acceleration[1]+=W[1]*this.radialAcceleration)}this.acceleration[0]+=U.gravityVector[0],this.acceleration[1]+=U.gravityVector[1],this.acceleration[0]*=W,this.acceleration[1]*=W,this.velocity[0]+=this.acceleration[0],this.velocity[1]+=this.acceleration[1],this.velocity[0]*=y,this.velocity[1]*=y;const x=this.transform.position[0],n=this.transform.position[1];if(this.transform.position[0]+=this.velocity[0]*W,this.transform.position[1]+=this.velocity[1]*W,this.acceleration[0]=0,this.acceleration[1]=0,U.initialRotation.syncWithDirection){const W=Math.atan2(this.transform.position[1]-n,this.transform.position[0]-x);this.transform.rotation=W+U.initialRotation.min}}if(!U.initialRotation.syncWithDirection){const y=U.angularVelocity.curve.sample(M);this.transform.rotation+=this.angularVelocity*y*W}const i=U.scale.curve.sample(M);this.transform.scale[0]=this.scale*i,this.transform.scale[1]=this.scale*i,this.color=this.controller.colorsManager.getUpdateParticleColor(this.transform.position,this.controller.system.systemSize,M)||this.color,this.opacity=this.opacityInit*U.opacity.curve.sample(M);for(const y of this.customProperties.values())y.update(W);return!0}dispose(){for(const W of this.customProperties.values())W.dispose();this.customProperties.clear()}}var O=M(918973),h=M(481900);const S={r:255,g:255,b:255};class o{constructor(W){this.init(W),this.gradient=W.gradient,this.mode=W.mode,this.colors=[...W.colors]}update(W){if(this.gradient!==W.gradient)this.init(W);else if(this.colors.length!==W.colors.length)this.init(W);else for(let y=0;y<W.colors.length;y+=1)if(W.colors[y]!==this.colors[y]){this.init(W);break}this.gradient=W.gradient,this.mode=W.mode,this.colors=[...W.colors]}getInitParticleColor(W,y,M){var U;if(this.mode===O.F.Off)return S;if(this.mode===O.F.Random){const W=Math.floor(M.next()*this.gradientColors.length);return null!==(U=this.gradientColors[W])&&void 0!==U?U:S}return this.getUpdateParticleColor(W,y,0)}getUpdateParticleColor(W,y,M){var U;if(this.mode===O.F.Off)return S;if(this.mode===O.F.Random)return;let i=0;const x=this.gradientColors.length-1;return this.mode===O.F.OverLife?i=Math.floor(M*x):this.mode===O.F.OverX?i=Math.floor(W[0]/y.width*x):this.mode===O.F.OverY&&(i=Math.floor(W[1]/y.height*x)),i=Math.min(Math.max(0,i),x),null!==(U=this.gradientColors[i])&&void 0!==U?U:S}init(W){if(W.mode===O.F.Off)return void(this.gradientColors=[]);const y=this.getColorsDiffSize(W.colors);if(W.gradient&&W.colors.length>1&&y>0){const M=y,U=y*(W.colors.length-1);let i=0;this.gradientColors=new Array(U);for(let y=1;y<W.colors.length;y+=1){const U=h.iN(W.colors[y-1]),x=h.iN(W.colors[y]);for(let W=0;W<=M;W+=1){const y=W/M;this.gradientColors[i]={r:Math.round(U.r*(1-y)+x.r*y),g:Math.round(U.g*(1-y)+x.g*y),b:Math.round(U.b*(1-y)+x.b*y)},i+=1}}}else this.gradientColors=W.colors.map(h.iN)}getColorsDiffSize(W){let y=0;for(let M=1;M<W.length;M+=1){const U=h.iN(W[M-1]),i=h.iN(W[M]);y=Math.max(y,Math.abs(U.r-i.r),Math.abs(U.g-i.g),Math.abs(U.b-i.b))}return y}}var d,q,s=M(23299),N=M(894962);(function(W){W["OnParticleEmitted"]="onParticleEmitter",W["OnParticleDisposed"]="onParticleDisposed",W["OnBeforeParticleUpdated"]="onBeforeParticleUpdated",W["OnAfterParticleUpdated"]="onAfterParticleUpdated",W["OnStarted"]="onStarted",W["OnFinished"]="onFinished",W["OnPluginAdded"]="onPluginAdded",W["OnPluginRemoved"]="onPluginRemoved",W["OnBeforeAllParticlesUpdated"]="onBeforeAllParticlesUpdated",W["OnAfterAllParticlesUpdated"]="onAfterAllParticlesUpdated"})(d||(d={})),function(W){W["Active"]="Active",W["Paused"]="Paused",W["Done"]="Done",W["Disposed"]="Disposed"}(q||(q={}));class _{get isPaused(){return this.state===q.Paused}get isDone(){return this.state===q.Done}get isActive(){return this.state===q.Active}get isDisposed(){return this.state===q.Disposed}get isEmitting(){return this.aliveParticlesCount>0||this.config.loop||this.emitAmount>0}get aliveParticles(){return this.aliveParticlesCount}get random(){return this.system.random}constructor(W,y,M,i){var x,n,k;this.controllerId=W,this.configId=y,this.eventEmitter=new U.b,this.plugins=new Map,this.excludeFromSerialization=!1,this.hideInEditor=!1,this.aliveParticlesCount=0,this.state=q.Done,this.emitAmount=0,this.onConfigUpdated=()=>{if(this.colorsManager.update(this.config.particle.colors),this.config.emitter.type!==this.emitter.type?(this.emitter=c(this.config.emitter.type),this.emitter.init(this.config.emitter)):this.emitter.update(this.config.emitter),this.totalAmount!==this.config.amount){if(this.particlesPool.length>this.config.amount){for(let W=this.config.amount;W<this.particlesPool.length;W+=1)this.particlesPool[W].dispose();this.particlesPool.length=this.config.amount,this.aliveParticlesCount=Math.min(this.config.amount,this.aliveParticlesCount)}else{let W=this.config.amount-this.particlesPool.length;for(;W>0;)this.particlesPool.push(this.createParticle(!1)),W-=1}this.totalAmount=this.config.amount,this.emitAmount=this.config.amount}},this.system=M,this.config=this.system.getConfigOrThrow(y),this.config.eventEmitter.on(s.Y$.ConfigChanged,this.onConfigUpdated,!1),this.totalAmount=this.config.amount,this.emissionDelay=0,this.emitAmount=this.totalAmount,this.graphics=i.graphics,this.graphics.init(this.system.renderer,this),this.excludeFromSerialization=null!==(x=i.excludeFromSerialization)&&void 0!==x&&x,this.hideInEditor=null!==(n=i.hideInEditor)&&void 0!==n&&n,this.colorsManager=new o(this.config.particle.colors),this.emitter=null!==(k=null==i?void 0:i.emitter)&&void 0!==k?k:c(this.config.emitter.type),this.emitter.init(this.config.emitter),this.initParticles(),this.config.autoStart&&this.start()}setGraphics(W){var y,M;W!==this.graphics&&this.graphics.dispose(),this.graphics=W,this.graphics.init(this.system.renderer,this),this.isEmitting&&(null===(M=(y=this.graphics).onActivate)||void 0===M||M.call(y))}addPlugin(W,y){const M=this.plugins.get(W);M&&M!==y&&M.dispose(),y.init(this),this.plugins.set(W,y),this.eventEmitter.emit(d.OnPluginAdded),this.system.eventEmitter.emit(N.hc.OnControllerPluginAdded)}removePlugin(W){const y=this.plugins.get(W);y&&(y.dispose(),this.plugins.delete(W),this.eventEmitter.emit(d.OnPluginRemoved),this.system.eventEmitter.emit(N.hc.OnControllerPluginRemoved))}start(){var W,y;this.eventEmitter.emit(d.OnStarted),this.state===q.Done&&(null===(y=(W=this.graphics).onActivate)||void 0===y||y.call(W)),this.state=q.Active}pause(){this.state=q.Paused}finish(){var W,y;this.eventEmitter.emit(d.OnFinished),null===(y=(W=this.graphics).onDeactivate)||void 0===y||y.call(W),this.state=q.Done}reset(){this.aliveParticlesCount=0;for(const W of this.particlesPool)W.isAlive&&(W.isAlive=!1,this.eventEmitter.emit(d.OnParticleDisposed,W));this.emitAmount=this.totalAmount}update(W){if(this.isPaused||this.isDone)return;if(!this.isEmitting&&this.state===q.Active)return void this.finish();this.eventEmitter.emit(d.OnBeforeAllParticlesUpdated,this,W),0===this.emitAmount&&this.config.loop&&(this.emitAmount=this.totalAmount);let y=Math.min(this.emitAmount,this.config.particlesPerWave);this.emissionDelay>W?(this.emissionDelay-=W,y=0):this.emissionDelay=this.config.emissionDelay;const M=this.config.particle,U=this.config.emitter,i=this.config.explosiveness,x=this.system.systemSize;let n=1;M.damping<1&&(n=M.damping**W);let k=0;for(;k<this.aliveParticlesCount;){const g=this.particlesPool[k];this.eventEmitter.emit(d.OnBeforeParticleUpdated,g,W);const u=g.update(W,n);u?this.eventEmitter.emit(d.OnAfterParticleUpdated,g,W):this.eventEmitter.emit(d.OnParticleDisposed,g),u?k+=1:y>0&&!i?(y-=1,this.emitAmount-=1,g.awake(M,U,x,!0),this.eventEmitter.emit(d.OnParticleEmitted,g),k+=1):(this.particlesPool[k]=this.particlesPool[this.aliveParticlesCount-1],this.particlesPool[this.aliveParticlesCount-1]=g,this.aliveParticlesCount-=1)}if(i&&this.aliveParticlesCount>0)return void this.eventEmitter.emit(d.OnAfterAllParticlesUpdated,this,W);const g=Math.min(this.aliveParticlesCount+y,this.totalAmount);for(let W=this.aliveParticlesCount;W<g;W+=1)this.particlesPool[W].awake(M,U,x,!0),this.eventEmitter.emit(d.OnParticleEmitted,this.particlesPool[W]),this.aliveParticlesCount+=1,this.emitAmount-=1;this.eventEmitter.emit(d.OnAfterAllParticlesUpdated,this,W)}dispose(){for(const W of this.particlesPool)W.dispose();for(const W of this.plugins.values())W.dispose();this.eventEmitter.removeAllListeners(),this.graphics.dispose(),this.state=q.Disposed}toJSON(W){const y={};for(const[M,U]of this.plugins){const i=U.toJSON(W);if(!i)continue;const x=U.constructor;x.id&&(y[M]={pluginParams:i,pluginId:x.id})}return{plugins:y}}initParticles(){this.particlesPool=[...Array(this.totalAmount)].map((()=>this.createParticle(!1)))}createParticle(W){const y=new T(this.config.particle,this,W);return y.awake(this.config.particle,this.config.emitter,this.system.systemSize,W),y}}},23299:(W,y,M)=>{M.d(y,{XR:()=>u,Y$:()=>U});var U,i=M(974486),x=M(918973),n=M(230135),k=M(898668);(function(W){W["ConfigChanged"]="configChanged"})(U||(U={}));const g=new k.I;class u{constructor(){this.eventEmitter=new i.b,this._excludeFromSerialization=!1,this._autoStart=!0,this._loop=!0,this._explosiveness=!1,this._amount=1e3,this._emissionDelay=0,this._particlesPerWave=10,this._particle={colors:{mode:x.F.Random,gradient:!1,colors:["#ffffff"]},initialVelocity:{min:0,max:100},linearAcceleration:{min:0,max:100,curve:g},tangentialAcceleration:{min:0,max:0,curve:g},radialAcceleration:{min:0,max:0,curve:g},initialRotation:{min:0,max:0,syncWithDirection:!1},angularVelocity:{min:0,max:0,curve:g},scale:{min:1,max:1,curve:g},gravityVector:[0,1e3],damping:1,directionVector:[0,-1],spread:0,opacity:{min:1,max:1,curve:g},lifetime:{min:.5,max:1}},this._emitter={position:[0,0],type:n.V.point}}get excludeFromSerialization(){return this._excludeFromSerialization}set excludeFromSerialization(W){this._excludeFromSerialization=W}get autoStart(){return this._autoStart}set autoStart(W){this._autoStart=W,this.eventEmitter.emit(U.ConfigChanged)}get loop(){return this._loop}set loop(W){this._loop=W,this.eventEmitter.emit(U.ConfigChanged)}get explosiveness(){return this._explosiveness}set explosiveness(W){this._explosiveness=W,this.eventEmitter.emit(U.ConfigChanged)}get amount(){return this._amount}set amount(W){this._amount=W,this.eventEmitter.emit(U.ConfigChanged)}get emissionDelay(){return this._emissionDelay}set emissionDelay(W){this._emissionDelay=W,this.eventEmitter.emit(U.ConfigChanged)}get particlesPerWave(){return this._particlesPerWave}set particlesPerWave(W){this._particlesPerWave=W,this.eventEmitter.emit(U.ConfigChanged)}get particle(){return this._particle}set particle(W){this._particle=W,this.eventEmitter.emit(U.ConfigChanged)}get emitter(){return this._emitter}set emitter(W){this._emitter=W,this.eventEmitter.emit(U.ConfigChanged)}setFromJson(W){var y;this.autoStart=null===(y=W.autoStart)||void 0===y||y,this.loop=W.loop,this.explosiveness=W.explosiveness,this.amount=W.amount,this.emissionDelay=W.emissionDelay,this.particlesPerWave=W.particlesPerWave,this.particle=this.particleConfigFromJson(W.particle),this.emitter=W.emitter,this.eventEmitter.emit(U.ConfigChanged)}particleConfigFromJson(W){var y;return{...W,initialRotation:{...W.initialRotation,syncWithDirection:null!==(y=W.initialRotation.syncWithDirection)&&void 0!==y&&y},angularVelocity:{...W.angularVelocity,curve:new k.I(W.angularVelocity.curve)},scale:{...W.scale,curve:new k.I(W.scale.curve)},radialAcceleration:{...W.radialAcceleration,curve:new k.I(W.radialAcceleration.curve)},tangentialAcceleration:{...W.tangentialAcceleration,curve:new k.I(W.tangentialAcceleration.curve)},linearAcceleration:{...W.linearAcceleration,curve:new k.I(W.linearAcceleration.curve)},opacity:{...W.opacity,curve:new k.I(W.opacity.curve)}}}particleConfigToJson(W){return{...W,angularVelocity:{...W.angularVelocity,curve:W.angularVelocity.curve.toJson()},scale:{...W.scale,curve:W.scale.curve.toJson()},radialAcceleration:{...W.radialAcceleration,curve:W.radialAcceleration.curve.toJson()},tangentialAcceleration:{...W.tangentialAcceleration,curve:W.tangentialAcceleration.curve.toJson()},linearAcceleration:{...W.linearAcceleration,curve:W.linearAcceleration.curve.toJson()},opacity:{...W.opacity,curve:W.opacity.curve.toJson()}}}onManuallyUpdated(){this.eventEmitter.emit(U.ConfigChanged)}toJson(){const W={autoStart:this.autoStart,loop:this.loop,explosiveness:this.explosiveness,amount:this.amount,emissionDelay:this.emissionDelay,particlesPerWave:this.particlesPerWave,particle:this.particleConfigToJson(this.particle),emitter:this.emitter};return JSON.parse(JSON.stringify(W))}clone(){const W=new u;return W.setFromJson(this.toJson()),W}dispose(){this.eventEmitter.removeAllListeners()}}},894962:(W,y,M)=>{M.d(y,{hc:()=>u,ok:()=>e});var U=M(974486),i=M(23299);class x{get seed(){return this._seed}set seed(W){W!==this._seed&&(this._seed=W,this.setSeed())}constructor(W){this._seed="",this.randomValueGenerator=Math.random,this.seed=W||""}next(){return this.randomValueGenerator()}nextInRange(W,y){return W+(y-W)*this.next()}reset(){if(!this._seed)return;const W=function(W){let y=1779033703^W.length;for(let M=0;M<W.length;M++)y=Math.imul(y^W.charCodeAt(M),3432918353),y=y<<13|y>>>19;return()=>(y=Math.imul(y^y>>>16,2246822507),y=Math.imul(y^y>>>13,3266489909),(y^=y>>>16)>>>0)}(this._seed);var y,M,U,i;this.randomValueGenerator=(y=W(),M=W(),U=W(),i=W(),()=>{const W=((y|=0)+(M|=0)|0)+(i|=0)|0;return i=i+1|0,y=M^M>>>9,M=(U|=0)+(U<<3)|0,U=(U=U<<21|U>>>11)+W|0,(W>>>0)/4294967296})}setSeed(){this._seed?this.reset():this.randomValueGenerator=Math.random}}var n=M(893015),k=M(425009);const g=250;var u;(function(W){W["OnControllerAdded"]="onControllerAdded",W["OnControllerRemoved"]="onControllerRemoved",W["OnControllerPluginAdded"]="onControllerPluginAdded",W["OnControllerPluginRemoved"]="onControllerPluginRemoved",W["OnSystemSizeUpdated"]="onSystemSizeUpdated"})(u||(u={}));class e{static getDefaultJson(W,y,M=600,U=400,x={fps:60,randomFrameStart:!1,frames:[],textureId:null}){return{fps:60,fixedDt:!1,randomSeed:"",blendMode:n.V.Default,systemSize:{width:M,height:U},controllerConfigs:{[W]:(new i.XR).toJson()},graphicsConfig:{[y]:x},controllerIdToConfigId:{[y]:W},controllers:{}}}static calcScaleBySizes(W,y){const M=y.width/W.width,U=y.height/W.height;return Math.min(M,U)}constructor(W){var y,M,i,n;this.eventEmitter=new U.A,this.timeScale=1,this.systemScale=1,this.controllerConfigs=new Map,this.controllers=new Map,this.animate=W=>{this.tick(W)},this.renderer=W.renderer,this.ticker=null!==(y=W.ticker)&&void 0!==y?y:k.a.shared,this.random=new x,this.timeScale=null!==(M=W.timeScale)&&void 0!==M?M:1,this.systemSize=W.systemSize,this.systemScale=W.systemScale,this.init(W),(null===(i=W.autoStart)||void 0===i||i)&&(this.clearTickCallback=this.ticker.add(this.animate)),this.disposeOnFinish=null!==(n=W.disposeOnFinish)&&void 0!==n&&n,this.renderer.init(this)}updateSystemScale(W){this.systemScale!==W&&(this.systemScale=W,this.renderer.updateSystemScale(this.systemScale,this.systemSize))}updateSystemSize(W){this.systemSize.width===W.width&&this.systemSize.height===W.height||(this.systemSize.width=W.width,this.systemSize.height=W.height,this.renderer.updateSystemScale(this.systemScale,this.systemSize),this.eventEmitter.emit(u.OnSystemSizeUpdated,this.systemSize))}setParams(W){this.init(W),this.reset()}get fps(){return Math.round(1e3/this.dt)}set fps(W){this.dt=1/W*1e3}start(){this.clearTickCallback||(this.clearTickCallback=this.ticker.add(this.animate));for(const W of this.controllers.values())W.start()}pause(){this.clearTickCallback&&(this.clearTickCallback(),this.clearTickCallback=void 0);for(const W of this.controllers.values())W.pause()}finish(){this.clearTickCallback&&(this.clearTickCallback(),this.clearTickCallback=void 0);for(const W of this.controllers.values())W.finish();this.disposeOnFinish&&this.dispose()}reset(){for(const W of this.controllers.values())W.reset()}dispose(){this.clearTickCallback&&(this.clearTickCallback(),this.clearTickCallback=void 0);for(const W of this.controllers.values())W.dispose();this.controllers.clear();for(const W of this.controllerConfigs.values())W.dispose();this.controllerConfigs.clear(),this.eventEmitter.removeAllListeners(),this.renderer.dispose()}setRenderer(W){this.renderer=W,this.renderer.init(this)}addConfig(W,y){this.controllerConfigs.set(W,y)}getConfig(W){return this.controllerConfigs.get(W)||null}getConfigOrThrow(W){const y=this.getConfig(W);if(!y)throw new Error(`Config with id ${W} not found`);return y}removeConfig(W){const y=this.controllerConfigs.get(W);y&&(y.dispose(),this.controllerConfigs.delete(W))}addController(W,y){this.controllers.set(W,y),this.eventEmitter.emit(u.OnControllerAdded,W,y)}getController(W){return this.controllers.get(W)||null}getControllerOrThrow(W){const y=this.getController(W);if(!y)throw new Error(`Controller with id ${W} not found`);return y}removeController(W){const y=this.controllers.get(W);y&&(y.dispose(),this.controllers.delete(W),this.eventEmitter.emit(u.OnControllerRemoved,W,y))}tick(W){if(this.accumulator+=W,this.accumulator>=this.dt){for(this.accumulator>g&&(this.accumulator=g);this.accumulator>=this.dt;){const W=this.fixedDt?this.dt:this.accumulator,y=W/1e3*this.timeScale;for(const W of this.controllers.values())W.update(y);this.accumulator-=W}const W=[];for(const y of this.controllers.values())y.isDone||W.push({particles:y.particlesPool,graphics:y.graphics});if(0===W.length&&this.disposeOnFinish)return void this.dispose();this.renderer.render(W)}}toJSON(W){const y={};for(const[W,M]of this.controllerConfigs)M.excludeFromSerialization||(y[W]=M.toJson());const M={};for(const[y,U]of this.controllers)U.excludeFromSerialization||(M[y]=U.graphics.toJson(W));const U={};for(const[W,y]of this.controllers)y.excludeFromSerialization||(U[W]=y.configId);const i={};for(const[y,M]of this.controllers)M.excludeFromSerialization||(i[y]=M.toJSON(W));return{systemSize:this.systemSize,fps:this.fps,fixedDt:this.fixedDt,randomSeed:this.random.seed,blendMode:this.renderer.getBlendMode(),controllerConfigs:y,graphicsConfig:M,controllerIdToConfigId:U,controllers:i}}init(W){var y;this.accumulator=0,this.dt=1/(W.fps||60)*1e3,this.fixedDt=null===(y=W.fixedDt)||void 0===y||y,this.random.seed=W.randomSeed||"",W.systemSize&&(this.systemSize.width=W.systemSize.width,this.systemSize.height=W.systemSize.height)}}},352427:(W,y,M)=>{M.d(y,{p:()=>x});var U=M(669842);const i=[];class x{constructor(W){this.random=W,this.frames=i,this.frameId=0,this.fps=60,this.frame={h:0,w:0,x:0,y:0},this.accumulator=0}get isAnimated(){return this.frames.length>0}init(W,y){var M;this.texture=W,this.config=y,this.frames=(null==y?void 0:y.frames)||i,this.fps=null!==(M=null==y?void 0:y.fps)&&void 0!==M?M:60,this.accumulator=0,this.frameId=0,(null==y?void 0:y.randomFrameStart)&&this.frames.length>0&&(this.frameId=Math.floor(this.random.next()*this.frames.length)),this.frame.x=0,this.frame.y=0,this.frame.w=(null==W?void 0:W.width)||U.k,this.frame.h=(null==W?void 0:W.height)||U.d,this.updateFrame()}update(W){if(!this.isAnimated||!this.fps)return;this.accumulator+=W;const y=1/this.fps,M=Math.floor(this.accumulator/y);this.accumulator-=M*y,this.frameId=(this.frameId+M)%this.frames.length,this.updateFrame()}dispose(){}updateFrame(){if(this.isAnimated){const W=this.frames[this.frameId];this.frame.x=W.x,this.frame.y=W.y,this.frame.w=W.w,this.frame.h=W.h}}}x.propertyId=Symbol("TextureManager")},511036:(W,y,M)=>{M.d(y,{$:()=>i});var U=M(683468);class i{constructor(){this.visible=!0}init(W,y){if(!(W instanceof U.K))throw new Error("Canvas graphics only works with CanvasRenderer")}toJson(W){return{textureId:null,fps:0,randomFrameStart:!1,frames:[]}}dispose(){}}},669842:(W,y,M)=>{M.d(y,{d:()=>i,k:()=>U});const U=10,i=10},346471:(W,y,M)=>{M.d(y,{O:()=>U});class U{constructor(W){const y=(new DOMParser).parseFromString(W,"image/svg+xml").firstChild,M=y.querySelector("path");if(!M)throw Error("<path> tag not found");this.sourceSvg=y,this.path=M,this.width=y.viewBox.baseVal.width,this.height=y.viewBox.baseVal.height,this.pathLength=M.getTotalLength()}getPosition(W){const y=this.path.getPointAtLength(W);return[y.x/this.width,y.y/this.height]}toJSON(){return{id:U.id,data:this.sourceSvg.outerHTML}}}U.id="EmitterMotionPathSvgMotionPath"},774145:(W,y,M)=>{M.d(y,{_:()=>e});var U=M(898668),i=M(335914),x=M(894962),n=M(346471),k=M(633921);let g=null;const u=[1,1];class e{static async renderOnPane(W,y,U){g||(g=await M.e(45444).then(M.bind(M,645444))),g.renderOnPane(W,y,U)}static fromJSON(W){const y=W;return new e({motionPath:y.motionPath&&y.motionPath.id===n.O.id?new n.O(y.motionPath.data):null,loop:y.loop,customScale:y.customScale,scaleType:y.scaleType,speed:{value:y.speed.value,curve:new U.I(y.speed.curve)}})}constructor(W){var y;this.pathPosition=0,this.onSystemSizeUpdated=W=>{this.motionPath&&(this.scale[0]=this.motionPath.width/W.width,this.scale[1]=this.motionPath.height/W.height)},this.onBeforeAllParticlesUpdate=(W,y)=>{if(!this.motionPath)return;if(this.pathPosition<=this.motionPath.pathLength){const W=this.pathPosition/this.motionPath.pathLength,M=this.speed.curve.sample(W);this.pathPosition+=M*this.speed.value*y}else{if(!this.loop)return;this.pathPosition=0}const[M,U]=this.motionPath.getPosition(this.pathPosition);this.scaleType===k.U.Fill?(W.config.emitter.position[0]=M,W.config.emitter.position[1]=U):(W.config.emitter.position[0]=M*this.scale[0]*this.customScale[0],W.config.emitter.position[1]=U*this.scale[1]*this.customScale[1]),W.config.onManuallyUpdated()},this.motionPath=W.motionPath,this.speed=W.speed,this.scaleType=W.scaleType,this.customScale=W.customScale,this.loop=null!==(y=W.loop)&&void 0!==y&&y,this.scale=[...u]}init(W){this.controller=W,this.pathPosition=0,W.eventEmitter.on(i.Od.OnBeforeAllParticlesUpdated,this.onBeforeAllParticlesUpdate),W.system.eventEmitter.on(x.hc.OnSystemSizeUpdated,this.onSystemSizeUpdated),this.motionPath&&(this.scale[0]=this.motionPath.width/W.system.systemSize.width,this.scale[1]=this.motionPath.height/W.system.systemSize.height)}dispose(){this.controller.eventEmitter.off(i.Od.OnBeforeAllParticlesUpdated,this.onBeforeAllParticlesUpdate),this.controller.system.eventEmitter.off(x.hc.OnSystemSizeUpdated,this.onSystemSizeUpdated)}toJSON(){return{motionPath:this.motionPath?this.motionPath.toJSON():null,loop:this.loop,scaleType:this.scaleType,customScale:this.customScale,speed:{value:this.speed.value,curve:this.speed.curve.toJson()}}}}e.id="EmitterMotionPath"},633921:(W,y,M)=>{var U;M.d(y,{U:()=>U}),function(W){W["Fill"]="fill",W["Custom"]="custom"}(U||(U={}))},963678:(W,y,M)=>{M.d(y,{O:()=>k});var U=M(898668),i=M(335914),x=M(894962);let n=null;class k{static async renderOnPane(W,y,U){n||(n=await M.e(14291).then(M.bind(M,914291))),n.renderOnPane(W,y,U)}static fromJSON(W){const y=W;return new k({position:y.position,gravity:y.gravity,catchRadius:y.catchRadius,toward:y.toward,multiplyVelocity:y.multiplyVelocity,forceMultiplierCurve:new U.I(y.forceMultiplierCurve)})}constructor(W){this.scaledPosition=[0,0],this.scaledCatchRadius=0,this.onSystemSizeUpdated=W=>{this.scaledPosition[0]=this.position[0]*W.width,this.scaledPosition[1]=this.position[1]*W.height,this.scaledCatchRadius=this.controller.system.systemScale*this.catchRadius,this.systemSize=W},this.onBeforeParticleUpdated=W=>{if(W.freezePosition)return;const y=W.transform.position[0]-this.scaledPosition[0],M=W.transform.position[1]-this.scaledPosition[1],U=Math.sqrt(y*y+M*M);if(this.toward&&U<=this.scaledCatchRadius)return void(W.freezePosition=!0);let i=this.gravity/(U*U+1e-4);this.toward&&(i*=-1);const x=Math.min(U/this.systemSize.width,U/this.systemSize.height),n=this.forceMultiplierCurve.sample(x);i*=n,this.multiplyVelocity&&(W.velocity[0]*=n,W.velocity[1]*=n),W.addAcceleration(y*i,M*i)},this.position=W.position,this.gravity=W.gravity,this.catchRadius=W.catchRadius,this.toward=W.toward,this.multiplyVelocity=W.multiplyVelocity,this.forceMultiplierCurve=W.forceMultiplierCurve}init(W){this.controller=W,W.eventEmitter.on(i.Od.OnBeforeParticleUpdated,this.onBeforeParticleUpdated),W.system.eventEmitter.on(x.hc.OnSystemSizeUpdated,this.onSystemSizeUpdated),this.systemSize=W.system.systemSize,this.scaledPosition[0]=this.position[0]*W.system.systemSize.width,this.scaledPosition[1]=this.position[1]*W.system.systemSize.height,this.scaledCatchRadius=W.system.systemScale*this.catchRadius}dispose(){this.controller.eventEmitter.off(i.Od.OnBeforeParticleUpdated,this.onBeforeParticleUpdated),this.controller.system.eventEmitter.off(x.hc.OnSystemSizeUpdated,this.onSystemSizeUpdated)}toJSON(){return{position:this.position,gravity:this.gravity,catchRadius:this.catchRadius,toward:this.toward,multiplyVelocity:this.multiplyVelocity,forceMultiplierCurve:this.forceMultiplierCurve.toJson()}}updatePosition(W,y){this.position[0]=W,this.position[1]=y,this.onSystemSizeUpdated(this.controller.system.systemSize)}updateCatchRadius(W){this.catchRadius=W,this.scaledCatchRadius=this.controller.system.systemScale*this.catchRadius}}k.id="GravityPoint"},104394:(W,y,M)=>{M.d(y,{i:()=>e});var U=M(879333),i=M(351673),x=M(157757),n=M(335914),k=M(894962);const g=[1,1];let u=null;class e{static async renderOnPane(W,y,U){u||(u=await M.e(42447).then(M.bind(M,42447))),u.renderOnPane(W,y,U)}static fromJSON(W,y){let M=null;const{textureId:U}=W;if(U&&U in y){const W=y[U];W.type===x.b.Texture&&(M=W.value)}return new e({texture:M})}constructor(W){var y,M;this.onSystemSizeUpdated=W=>{this.texture&&(this.scale[0]=this.texture.width/W.width,this.scale[1]=this.texture.height/W.height)},this.onAfterParticleUpdated=W=>{if(!this.texture)return;const y=W.transform.position[0],M=W.transform.position[1],U=Math.min(y*this.scale[0]|0,this.width-1),i=Math.min(M*this.scale[1]|0,this.height-1),x=3*(U+this.width*i),n=this.field[x],k=this.field[x+1],g=this.field[x+2];W.color={r:n,g:k,b:g}},this.texture=W.texture,this.width=(null===(y=this.texture)||void 0===y?void 0:y.width)||0,this.height=(null===(M=this.texture)||void 0===M?void 0:M.height)||0,this.scale=[...g]}init(W){this.controller=W,this.texture&&(this.width=this.texture.width,this.height=this.texture.height,W.eventEmitter.on(n.Od.OnAfterParticleUpdated,this.onAfterParticleUpdated),W.eventEmitter.on(n.Od.OnParticleEmitted,this.onAfterParticleUpdated),W.system.eventEmitter.on(k.hc.OnSystemSizeUpdated,this.onSystemSizeUpdated),this.scale[0]=this.texture.width/W.system.systemSize.width,this.scale[1]=this.texture.height/W.system.systemSize.height,this.computeField())}dispose(){this.controller.eventEmitter.off(n.Od.OnAfterParticleUpdated,this.onAfterParticleUpdated),this.controller.eventEmitter.off(n.Od.OnParticleEmitted,this.onAfterParticleUpdated),this.controller.system.eventEmitter.off(k.hc.OnSystemSizeUpdated,this.onSystemSizeUpdated)}toJSON(W){let y=null;return this.texture&&(y=U.A(),W[y]={type:x.b.Texture,value:this.texture}),{textureId:y}}computeField(){if(this.field=new Uint8Array(this.width*this.height*3),!this.texture)return;const W=i.M5(this.texture);if(!W)return;const y=W.data;for(let W=0;W<this.width;W++)for(let M=0;M<this.height;M++){const U=4*(W*this.height+M),i=3*(W*this.height+M);this.field[i]=y[U],this.field[i+1]=y[U+1],this.field[i+2]=y[U+2]}}}e.id="ImageColorMap"},99257:(W,y,M)=>{M.d(y,{D:()=>k});var U=M(335914);function i(W,y){return W[1]>=y[0]&&y[1]>=W[0]}function x(W,y){const M=[W.center[0]-W.radius,W.center[0]+W.radius],U=[W.center[1]-W.radius,W.center[1]+W.radius],x=[Math.min(y.start[0],y.end[0]),Math.max(y.start[0],y.end[0])],n=[Math.min(y.start[1],y.end[1]),Math.max(y.start[1],y.end[1])];if(!i(M,x)||!i(U,n))return 0;const k=0===y.normal[0]?U:M,g=0===y.normal[0]?n:x;return-1===(0===y.normal[0]?y.normal[1]:y.normal[0])?k[1]-g[0]:g[1]-k[0]}let n=null;class k{static async renderOnPane(W,y,U){n||(n=await M.e(10306).then(M.bind(M,410306))),n.renderOnPane(W,y,U)}static fromJSON(W){return new k(W)}constructor(W){this.options=W,this.edges=[],this.onAfterParticleUpdated=W=>{const y={center:W.transform.position,radius:this.options.sphereRadius};let M=1/0,U=null;for(const W of this.edges){const i=x(y,W);0!==i&&i<M&&(M=i,U=W)}if(null===U)return;const i=[Math.sign(W.velocity[0])!==Math.sign(U.normal[0])?Math.abs(W.velocity[0])*U.normal[0]:0,Math.sign(W.velocity[1])!==Math.sign(U.normal[1])?Math.abs(W.velocity[1])*U.normal[1]:0],n=[this.options.bounciness*i[0],this.options.bounciness*i[1]],k=i[0]+n[0],g=i[1]+n[1];W.addVelocity(k,g)}}init(W){this.controller=W,W.eventEmitter.on(U.Od.OnAfterParticleUpdated,this.onAfterParticleUpdated);const y=W.system.systemSize,M=[this.options.boundingBoxPosition[0]*y.width,this.options.boundingBoxPosition[1]*y.height],i=this.options.boundingBoxDimensions;this.edges=[{start:[M[0]-i[0]/2,M[1]-i[1]/2],end:[M[0]+i[0]/2,M[1]-i[1]/2],normal:[0,-1]},{start:[M[0]+i[0]/2,M[1]-i[1]/2],end:[M[0]+i[0]/2,M[1]+i[1]/2],normal:[1,0]},{start:[M[0]+i[0]/2,M[1]+i[1]/2],end:[M[0]-i[0]/2,M[1]+i[1]/2],normal:[0,1]},{start:[M[0]-i[0]/2,M[1]+i[1]/2],end:[M[0]-i[0]/2,M[1]-i[1]/2],normal:[-1,0]}]}dispose(){this.controller.eventEmitter.off(U.Od.OnAfterParticleUpdated,this.onAfterParticleUpdated)}toJSON(){return this.options}}k.id="Physics"},653565:(W,y,M)=>{M.d(y,{C:()=>g,f:()=>n});var U=M(335914);const i=Symbol("ControllerPosUpdaterSymbol");class x{constructor(W,y,M,U){this.particle=W,this.options=y,this.cleanup=M,this.emitter=U.config.emitter,this.systemSize=U.system.systemSize}update(){this.options.syncPosition&&(this.emitter.position[0]=this.particle.transform.position[0]/this.systemSize.width,this.emitter.position[1]=this.particle.transform.position[1]/this.systemSize.height)}dispose(){this.cleanup()}}var n;(function(W){W["OnParticleDeath"]="OnParticleDeath",W["OnParticleSpawn"]="OnParticleSpawn"})(n||(n={}));let k=null;class g{static async renderOnPane(W,y,U){k||(k=await M.e(37927).then(M.bind(M,737927))),k.renderOnPane(W,y,U)}static fromJSON(W,y,M){const U=W,i=M.getControllerOrThrow(U.referenceControllerId);return new g(i,U.mode,{syncPosition:U.syncPosition})}constructor(W,y,M={syncPosition:!0}){this.referenceController=W,this._mode=y,this.options=M,this.disposeQueue=[],this.onAfterParticleEmitted=W=>{if(this.mode===n.OnParticleSpawn){const[y,M]=this.addNewController(W),n=new x(W,this.options,M,y);W.customProperties.set(i,n),y.eventEmitter.on(U.Od.OnFinished,(()=>{M(),this.disposeQueue.splice(this.disposeQueue.indexOf(M),1)})),this.disposeQueue.push(M)}},this.onAfterParticleDisposed=W=>{if(this.mode===n.OnParticleSpawn){const y=W.customProperties.get(i);y&&(y.dispose(),W.customProperties.delete(i))}else if(this.mode===n.OnParticleDeath){const[y,M]=this.addNewController(W);y.eventEmitter.on(U.Od.OnFinished,(()=>{M(),this.disposeQueue.splice(this.disposeQueue.indexOf(M),1)})),this.disposeQueue.push(M)}}}set mode(W){this._mode!==W&&(this.dispose(),this._mode=W,this.init(this.controller))}get mode(){return this._mode}init(W){this.controller=W,this.mode===n.OnParticleDeath?(W.eventEmitter.on(U.Od.OnParticleDisposed,this.onAfterParticleDisposed),this.disposeQueue.push((()=>{W.eventEmitter.off(U.Od.OnParticleDisposed,this.onAfterParticleDisposed)}))):this.mode===n.OnParticleSpawn&&(W.eventEmitter.on(U.Od.OnParticleEmitted,this.onAfterParticleEmitted),W.eventEmitter.on(U.Od.OnParticleDisposed,this.onAfterParticleDisposed),this.disposeQueue.push((()=>{W.eventEmitter.off(U.Od.OnParticleEmitted,this.onAfterParticleEmitted),W.eventEmitter.off(U.Od.OnParticleDisposed,this.onAfterParticleDisposed)})))}dispose(){this.disposeQueue.forEach((W=>W())),this.disposeQueue=[]}toJSON(){var W;const y=null===(W=[...this.controller.system.controllers.entries()].find((([,W])=>W===this.referenceController)))||void 0===W?void 0:W[0];return y?{referenceControllerId:y,mode:this.mode,syncPosition:this.options.syncPosition}:null}addNewController(W){const y=Math.round(1e9*performance.now()),M=`config-for-sub-emitter-${y}`,i=`controller-for-sub-emitter-${y}`,x=this.referenceController.config.clone();x.emitter.position[0]=W.transform.position[0]/this.controller.system.systemSize.width,x.emitter.position[1]=W.transform.position[1]/this.controller.system.systemSize.height,x.particle.directionVector=W.directionVector,x.autoStart=!0,x.excludeFromSerialization=!0,this.controller.system.addConfig(M,x);const n=new U.hZ(i,M,this.controller.system,{graphics:this.referenceController.graphics.clone(),excludeFromSerialization:!0,hideInEditor:!0});return this.controller.system.addController(i,n),[n,()=>{this.controller.system.removeConfig(M),this.controller.system.removeController(i)}]}}g.id="SubEmitter"},362991:(W,y,M)=>{M.d(y,{z:()=>l});var U=M(879333),i=M(233387),x=M(351673),n=M(157757),k=M(335914),g=M(894962);const u=[1,1];let e=null;class l{static async renderOnPane(W,y,U){e||(e=await M.e(32184).then(M.bind(M,832184))),e.renderOnPane(W,y,U)}static fromJSON(W,y){var M;const U=W;let i=null;if(U.textureId&&U.textureId in y){const W=y[U.textureId];W.type===n.b.Texture&&(i=W.value)}return new l({texture:i,strength:null!==(M=U.strength)&&void 0!==M?M:1})}constructor(W){var y,M,U;this.onSystemSizeUpdated=W=>{this.texture&&(this.scale[0]=this.texture.width/W.width,this.scale[1]=this.texture.height/W.height)},this.onBeforeParticleUpdated=W=>{if(!this.texture)return;const y=W.transform.position[0],M=W.transform.position[1],U=0|i._g(y*this.scale[0],this.width),x=0|i._g(M*this.scale[1],this.height),n=3*(U+this.width*x),k=this.field[n],g=this.field[n+1],u=this.field[n+2],e=this.strength*k*u,l=this.strength*g*u;W.addAcceleration(e,l)},this.texture=W.texture,this.width=(null===(y=this.texture)||void 0===y?void 0:y.width)||0,this.height=(null===(M=this.texture)||void 0===M?void 0:M.height)||0,this.scale=[...u],this.strength=null!==(U=W.strength)&&void 0!==U?U:1}init(W){if(this.controller=W,!this.texture)return;this.width=this.texture.width,this.height=this.texture.height,W.eventEmitter.on(k.Od.OnBeforeParticleUpdated,this.onBeforeParticleUpdated),W.system.eventEmitter.on(g.hc.OnSystemSizeUpdated,this.onSystemSizeUpdated);const y=this.texture.width/W.system.systemSize.width,M=this.texture.height/W.system.systemSize.height;this.scale[0]=y,this.scale[1]=M,this.computeField()}dispose(){this.controller.eventEmitter.off(k.Od.OnBeforeParticleUpdated,this.onBeforeParticleUpdated),this.controller.system.eventEmitter.off(g.hc.OnSystemSizeUpdated,this.onSystemSizeUpdated)}toJSON(W){let y=null;return this.texture&&(y=U.A(),W[y]={type:n.b.Texture,value:this.texture}),{strength:this.strength,textureId:y}}computeField(){if(this.field=new Float64Array(this.width*this.height*3),!this.texture)return;const W=x.M5(this.texture);if(!W)return;const y=W.data;for(let W=0;W<this.width;W++)for(let M=0;M<this.height;M++){const U=4*(W*this.height+M),x=y[U]/255,n=y[U+1]/255,k=y[U+2]/255,g=i.hF([2*x-1,2*n-1]),u=3*(W*this.height+M);this.field[u]=g[0],this.field[u+1]=g[1],this.field[u+2]=k}}}l.id="Turbulence"},683468:(W,y,M)=>{M.d(y,{K:()=>n});var U=M(974486),i=M(893015),x=M(472542);class n{constructor(W){this.config=W,this.eventEmitter=new U.b,this.blendMode=i.V.Default,this.blendModeValue="source-over";const{canvas:y,dpr:M}=this.config;this.canvasElement=y,this.dpr=M,this.ctx=this.getCanvasContext2D(this.canvasElement,"particles:canvas")}init(W){this.system=W}render(W){const y=this.ctx,M=y.globalCompositeOperation;y.globalCompositeOperation=this.blendModeValue,y.clearRect(0,0,y.canvas.width,y.canvas.height),y.save(),this.ctx.scale(this.dpr*this.system.systemScale,this.dpr*this.system.systemScale),this.eventEmitter.emit(x.o.BeforeRender);for(const{particles:y,graphics:M}of W)if(M.visible)for(const W of y){if(!W.isAlive)break;M.draw(W,this.ctx)}y.restore(),y.globalCompositeOperation=M,this.eventEmitter.emit(x.o.AfterRender)}updateSystemScale(){}getBlendMode(){return this.blendMode}setBlendMode(W){if(this.blendMode!==W)switch(this.blendMode=W,W){case i.V.Default:this.blendModeValue="source-over";break;case i.V.Xor:this.blendModeValue="xor";break;case i.V.Multiply:this.blendModeValue="multiply";break;case i.V.Screen:this.blendModeValue="screen";break;case i.V.Add:this.blendModeValue="lighter";break;default:throw new Error(`No blendMode support for ${W} type!`)}}dispose(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.eventEmitter.removeAllListeners()}getCanvasContext2D(W,y){const M=W.getContext("2d");if(!M)throw new Error(`${y} did not receive a valid canvas context`);return M}}},434098:(W,y,M)=>{M.d(y,{C:()=>Y});var U=M(335914),i=M(23299),x=M(894962),n=M(774145),k=M(963678),g=M(104394),u=M(99257),e=M(653565),l=M(362991);const G={[e.C.id]:e.C,[u.D.id]:u.D,[l.z.id]:l.z,[g.i.id]:g.i,[k.O.id]:k.O,[n._.id]:n._};class Y{static spawnSystemInternal(W,y=Object.create(null)){const{assets:M={},ticker:n,config:k,disposeOnFinish:g,systemScale:u,autoStart:e}=W,l=this.spawnRenderer(W,y),Y=new x.ok({renderer:l,fps:k.fps,fixedDt:k.fixedDt,systemSize:k.systemSize,systemScale:u,randomSeed:k.randomSeed||void 0,ticker:n,autoStart:e,disposeOnFinish:g});l.setBlendMode(k.blendMode);for(const[W,y]of Object.entries(k.controllerConfigs)){const M=new i.XR;M.setFromJson(y),Y.addConfig(W,M)}for(const[W,i]of Object.entries(k.graphicsConfig)){const x=new U.hZ(W,k.controllerIdToConfigId[W],Y,{graphics:this.spawnGraphics(i,M,y)});Y.addController(W,x)}for(const[W,y]of Object.entries(k.controllers)){const U=Y.getControllerOrThrow(W);for(const[W,i]of Object.entries(y.plugins)){const y=G[i.pluginId].fromJSON(i.pluginParams,M,Y);U.addPlugin(W,y)}}return Y}static spawnRenderer(W,y){throw new Error("Not implemented")}static spawnGraphics(W,y,M){throw new Error("Not implemented")}}},61106:(W,y,M)=>{M.d(y,{f:()=>l});var U=M(879333),i=M(511036),x=M(352427),n=M(157757),k=M(669842);class g extends i.${constructor({textureConfig:W,texture:y,visible:M}={}){super(),this.drawDefaultShape=(W,y)=>{y.save();const M=k.k*W.transform.scale[0],U=k.d*W.transform.scale[1];y.translate(W.transform.position[0],W.transform.position[1]),y.rotate(W.transform.rotation),y.fillStyle=`rgba(${W.color.r},${W.color.g},${W.color.b}, ${W.opacity})`,y.beginPath();const i=M/2,x=U/2;y.rect(-i,-x,2*i,2*x),y.fill(),y.restore()},this.drawTexturedShape=(W,y)=>{y.save();const M=this.texture;let U=W.customProperties.get(x.p.propertyId);U&&U.texture===M&&U.config===this.config||(U=new x.p(this.random),U.init(M,this.config),W.customProperties.set(x.p.propertyId,U));const i=U.frame,n=i.w,k=i.h,g=n,u=k;y.globalAlpha=W.opacity,y.translate(W.transform.position[0],W.transform.position[1]),y.rotate(W.transform.rotation),y.scale(W.transform.scale[0],W.transform.scale[1]),y.drawImage(M,i.x,i.y,n,k,-g/2,-u/2,g,u),y.restore()},this.setTextureAndFrames(y,W),this.visible=null==M||M}init(W,y){super.init(W,y),this.random=y.system.random}draw(W,y){throw new Error("Method not implemented.")}setTextureAndFrames(W,y){this.texture=W,this.config=y,this.texture?this.draw=this.drawTexturedShape:this.draw=this.drawDefaultShape}clone(){return new g({texture:this.texture,textureConfig:this.config,visible:this.visible})}toJson(W){var y,M,i;let x=null;return this.texture&&(x=U.A(),W[x]={type:n.b.Texture,value:this.texture}),{textureId:x,fps:(null===(y=this.config)||void 0===y?void 0:y.fps)||0,randomFrameStart:(null===(M=this.config)||void 0===M?void 0:M.randomFrameStart)||!1,frames:(null===(i=this.config)||void 0===i?void 0:i.frames)||[]}}}var u=M(683468),e=M(434098);class l extends e.C{static spawnSystem(W){return super.spawnSystemInternal(W)}static spawnRenderer({canvas:W,dpr:y}){return new u.K({canvas:W,dpr:y})}static spawnGraphics(W,y){let M;if((null==W?void 0:W.textureId)&&W.textureId in y){const U=y[W.textureId];U.type===n.b.Texture&&(M=U.value)}return new g({texture:M,textureConfig:{fps:W.fps,randomFrameStart:W.randomFrameStart,frames:W.frames}})}}},425009:(W,y,M)=>{M.d(y,{a:()=>U});class U{constructor(){this.rafID=-1,this.prevRenderTime=0,this.callbacks=[],this.tick=W=>{const y=W-this.prevRenderTime;for(const W of this.callbacks)W(y);this.prevRenderTime=W,this.rafID=window.requestAnimationFrame(this.tick)}}static get shared(){return this._shared||(this._shared=new U),this._shared}get isActive(){return-1!==this.rafID}add(W){return this.callbacks.push(W),1===this.callbacks.length&&(this.prevRenderTime=performance.now(),this.rafID=window.requestAnimationFrame(this.tick)),()=>{const y=this.callbacks.indexOf(W);-1!==y&&(this.callbacks.splice(y,1),0===this.callbacks.length&&window.cancelAnimationFrame(this.rafID))}}stop(){this.isActive&&(window.cancelAnimationFrame(this.rafID),this.rafID=-1)}start(){this.isActive||(this.prevRenderTime=performance.now(),this.rafID=window.requestAnimationFrame(this.tick))}}U._shared=null},918973:(W,y,M)=>{var U;M.d(y,{F:()=>U}),function(W){W["Random"]="Random",W["OverX"]="OverX",W["OverY"]="OverY",W["OverLife"]="OverLife",W["Off"]="Off"}(U||(U={}))},893015:(W,y,M)=>{var U;M.d(y,{V:()=>U}),function(W){W["Default"]="default",W["Add"]="add",W["Multiply"]="multiply",W["Xor"]="xor",W["Screen"]="screen"}(U||(U={}))},230135:(W,y,M)=>{M.d(y,{V:()=>U});const U={ellipse:"ellipse",donut:"donut",rectangle:"rectangle",point:"point",triangle:"triangle",frame:"frame",image:"image"}},472542:(W,y,M)=>{var U;M.d(y,{o:()=>U}),function(W){W["BeforeRender"]="beforeRender",W["AfterRender"]="afterRender"}(U||(U={}))},157757:(W,y,M)=>{var U;M.d(y,{b:()=>U}),function(W){W["Texture"]="Texture",W["PixiTexture"]="PixiTexture",W["Pixi8Texture"]="Pixi8Texture"}(U||(U={}))},481900:(W,y,M)=>{function U(W){let y=W.replace(/^#/,"");return 3===y.length&&(y=y.split("").map((W=>W+W)).join("")),{r:parseInt(y.slice(0,2),16),g:parseInt(y.slice(2,4),16),b:parseInt(y.slice(4,6),16)}}M.d(y,{iN:()=>U})},233387:(W,y,M)=>{function U(W,y,M,U){return W*U-y*M}function i(W,y,M,U){return W*M+y*U}function x(W){const y=W[0],M=W[1],U=y*y+M*M;if(U>0){const y=1/Math.sqrt(U);W[0]*=y,W[1]*=y}return W}function n(W,y){return(W%y+y)%y}M.d(y,{Z8:()=>i,_g:()=>n,eL:()=>U,hF:()=>x})},351673:(W,y,M)=>{function U(W){const y=document.createElement("canvas"),M=y.getContext("2d");return M?(y.width=W.width,y.height=W.height,M.drawImage(W,0,0),M.getImageData(0,0,W.width,W.height)):null}M.d(y,{M5:()=>U})},835132:(W,y,M)=>{M.d(y,{w:()=>n});var U=M(64922),i=M(377810),x=M(59181);const n=i.memo(i.forwardRef(((W,y)=>{const{src:M,name:n,lowQualitySrc:k=null,branding:g=null,onLoad:u,...e}=W,l=n||(M.startsWith("data:")?null:M.split("/").pop()),G=i.useMemo((()=>l?x.y.instance.registerPlainImage(l,M,k,g||{}):null),[l,M,k,g]),Y=(null==G?void 0:G.value)||M,[c,D]=i.useState(Y),[r,A]=i.useState(null);i.useEffect((()=>{D(Y);const W=()=>{A(Y)};return null==G||G.subscribe(W,!1),()=>null==G?void 0:G.unsubscribe(W)}),[G]);const T=i.useCallback((W=>{l&&x.y.instance.reportPlainImageLoaded(l),u&&u(W)}),[l,u]),O=i.useCallback((W=>{W&&(W.onload=y=>{D(W.src),A(null),T(y)})}),[T]);return U.jsxs(U.Fragment,{children:[U.jsx("img",{ref:y,src:c,onLoad:T,...e},c),r&&U.jsx("img",{src:r,ref:O,...e,style:{display:"none"}},r)]})})));n.displayName="EvoImage"},343768:(W,y,M)=>{M.d(y,{p:()=>x});var U=M(64922),i=M(377810);const x=({children:W,...y})=>{const M=i.useMemo((()=>`${String(Math.random())}-even-money-icon`),[]);return U.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 26",fill:"none",id:M,...y,children:[U.jsxs("g",{clipPath:`url(#${M}-clip0)`,children:[U.jsx("path",{d:"M6.33303 25.015C6.08599 25.015 5.82772 25.015 5.58069 24.9925H5.53577C5.32242 24.9701 5.09784 24.9588 4.88449 24.9252H4.79466C3.3349 24.723 1.93128 24.2739 0.617494 23.5665C0.0785045 23.2857 -0.146074 22.6232 0.100962 22.073L0.190794 21.8597C0.269396 21.6912 0.33677 21.5116 0.415373 21.3431L0.628723 20.8491C0.76347 20.5346 0.931904 20.1529 1.10034 19.7823V19.7486C1.25754 19.4342 1.39229 19.1535 1.52704 18.884C1.60564 18.738 1.68424 18.5808 1.77408 18.4124C1.77408 18.4124 1.83022 18.3113 1.85268 18.2776C2.00988 17.9857 2.16709 17.7274 2.33552 17.4691C2.34675 17.4467 2.35798 17.4242 2.38044 17.4018C3.39104 15.8634 4.615 14.7068 6.13091 13.8759C6.77096 13.5278 7.45592 13.2358 8.1858 12.9888C6.60252 12.4723 5.27751 11.7199 4.16584 10.7093C2.29061 8.99128 1.38106 6.88024 0.493975 4.82535V4.80289C0.359228 4.51094 0.224481 4.20775 0.100962 3.9158C-0.146074 3.36558 0.0785045 2.70307 0.617494 2.42235C2.38044 1.47912 4.35673 0.985046 6.33303 0.985046C6.78218 0.985046 7.24257 1.0075 7.6805 1.06365C8.01737 1.09734 8.35424 1.15348 8.67988 1.22085C9.00552 1.28823 9.34239 1.36683 9.6568 1.46789C9.98243 1.56895 10.2968 1.67001 10.6113 1.79353C10.9257 1.91705 11.2401 2.0518 11.532 2.209C11.678 2.2876 11.8352 2.36621 11.9812 2.44481C12.2731 2.61324 12.5651 2.79291 12.8458 2.9838C12.9806 3.08486 13.1265 3.17469 13.2613 3.28698C14.0922 3.9158 14.8333 4.65691 15.4734 5.48785C15.4846 5.51031 15.5071 5.52154 15.5183 5.544C15.945 6.10545 16.3156 6.72304 16.6412 7.36309V7.38554C16.8433 7.77856 17.0342 8.20526 17.1802 8.63196V8.65442C17.2363 8.78916 17.2925 8.93514 17.3374 9.06989C17.3374 9.09234 17.3486 9.1148 17.3599 9.12603C17.3935 9.23832 17.4385 9.37307 17.4721 9.51904C17.4721 9.5415 17.4946 9.62011 17.4946 9.62011C17.5283 9.72117 17.562 9.85591 17.5957 9.99066C17.5957 10.0131 17.6181 10.0693 17.6181 10.0693C17.6406 10.1703 17.6743 10.3163 17.7079 10.4623C17.7079 10.496 17.7192 10.5296 17.7304 10.5633V10.6195C17.7641 10.7318 17.7866 10.8441 17.809 10.9564C17.809 10.99 17.809 11.0237 17.8202 11.0574V11.1023C17.8988 11.5627 17.955 12.0231 17.9887 12.4723C17.9999 12.6631 18.0111 13.3257 17.9887 13.539C17.9662 13.8422 17.9325 14.1341 17.8988 14.4261C17.8652 14.718 17.8202 14.9988 17.7641 15.2795C17.7416 15.4142 17.7079 15.5602 17.6743 15.695C17.6181 15.9645 17.5395 16.2452 17.4721 16.5034C17.3935 16.7617 17.3149 17.0312 17.2251 17.2782C16.3717 19.6588 14.867 21.6463 12.857 23.0162C10.9481 24.3188 8.6911 25.015 6.33303 25.015Z",fill:"#131B1C"}),U.jsx("path",{d:"M17.1462 12.6404C17.1462 12.6404 17.1462 12.5394 17.1462 12.4945L17.1237 12.1801C16.9441 9.74337 16.1693 7.52004 14.8779 5.74587L14.7769 5.59989C12.7332 2.9274 9.6228 1.38904 6.2092 1.38904C4.36765 1.38904 2.51488 1.86065 0.852994 2.74774L0.381378 3.00601L0.605957 3.50008C0.740704 3.79203 0.864223 4.09521 0.99897 4.3984C2.48119 7.83445 4.13185 11.6748 10.5099 12.6629C8.88169 12.9099 7.50053 13.3591 6.29903 14.0216C4.89541 14.7964 3.75006 15.8744 2.81806 17.3117L2.30153 18.1089H2.33521C1.81868 19.0409 1.40321 20.0066 0.99897 20.9386C0.864223 21.2418 0.740704 21.545 0.605957 21.8369L0.381378 22.331L0.852994 22.5893C2.51488 23.4764 4.36765 23.948 6.2092 23.948C8.93783 23.948 11.5317 22.9486 13.4968 21.1295C15.6303 19.1532 16.8879 16.4021 17.1125 13.157L17.135 12.8762C17.135 12.8089 17.135 12.7303 17.135 12.6517L17.1462 12.6404Z",fill:"#172630"}),U.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.37084 3.39699C1.23974 3.09207 1.10939 2.78891 0.976624 2.48956C5.61418 0.0191925 11.2062 1.16455 14.2829 5.21819C14.3391 5.66735 14.3728 6.11651 14.3728 6.58813C14.3728 8.41844 13.9011 10.1365 13.0702 11.6299C4.79878 11.3698 3.02487 7.24398 1.37084 3.39699ZM12.6094 12.3606C12.6133 12.3604 12.6172 12.3602 12.621 12.36H12.6098C12.6097 12.3602 12.6095 12.3604 12.6094 12.3606ZM12.6094 12.3606C7.24995 12.6323 4.72595 14.5851 3.15503 16.9975C3.4133 17.02 3.66033 17.0312 3.9186 17.0312C7.5453 17.0312 10.7454 15.1787 12.6094 12.3606Z",fill:"#A2D1C2"}),U.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.5288 11.5403C15.2599 11.6301 14.1033 11.6638 13.059 11.6301C13.89 10.1367 14.3616 8.41863 14.3616 6.58831C14.3616 6.12793 14.3279 5.66754 14.2717 5.21838C15.5182 6.85781 16.3491 8.98008 16.5288 11.5403ZM3.94113 17.031C7.56808 17.031 10.7683 15.1783 12.6323 12.3598C13.8001 12.3036 15.0915 12.3261 16.54 12.4384C15.9112 21.2868 7.5007 24.9587 0.987915 21.4777C1.12914 21.1617 1.26731 20.8412 1.40632 20.5186C1.91946 19.3281 2.44423 18.1106 3.17756 16.9973C3.4246 17.0198 3.68286 17.031 3.94113 17.031Z",fill:"#7CADB2"})]}),U.jsx("defs",{children:U.jsx("clipPath",{id:`${M}-clip0`,children:U.jsx("rect",{width:"18",height:"24.0299",fill:"white",transform:"translate(0 0.985046)"})})})]})};x.displayName="EvenMoneySVG"},67452:(W,y,M)=>{M.d(y,{H:()=>n});var U=M(64922),i=M(377810),x=M(835132);const n=i.memo(i.forwardRef((({bonus:W,className:y,catalog:M},i)=>{const n=M[W];return U.jsx(x.w,{ref:i,className:y,src:n,alt:"icon"},n)})));n.displayName="BonusGameImage"},953711:(W,y,M)=>{var U;M.d(y,{X:()=>U}),function(W){W["Special"]="Special",W["Regular"]="Regular"}(U||(U={}))},60365:(W,y,M)=>{M.d(y,{I:()=>u});var U=M(64922),i=M(699695),x=M(377810);const n="gradientStrokeText--1f81c",k="textStroke--07324",g="textFill--cbd9c",u=x.forwardRef((function(W,y){const{className:M,children:x,textStyle:u={}}=W;return U.jsx("div",{ref:y,className:i.A(M),children:U.jsxs("div",{className:n,style:u,children:[U.jsx("div",{className:k,children:x}),U.jsx("div",{className:g,children:x})]})})}))},773693:(W,y,M)=>{M.d(y,{BI:()=>U.m,Hd:()=>l.u,Hp:()=>k.f,OX:()=>g.X,b3:()=>x.e,ds:()=>u.p,fZ:()=>e.I,gU:()=>U.f8,i6:()=>U.x_,jr:()=>U.U_,m_:()=>U.$s,nN:()=>n.m,pq:()=>U.wQ,yi:()=>G.H,zW:()=>i.K});var U=M(397558),i=M(419252),x=M(669432),n=M(66766),k=M(898129),g=M(953711),u=M(343768),e=M(60365),l=M(755585),G=M(67452)},669432:(W,y,M)=>{M.d(y,{e:()=>G});var U=M(64922),i=M(699695),x=M(377810),n=M(835132),k=M(66766);const g="multiplier--500f6",u="imgContainer--5f27a",e="img--82f6d",l="symbolX--b90ab",G=x.memo((W=>{const{value:y}=W,M=y.split("").map(((W,y)=>{const M=W;return U.jsx("span",{className:i.A(u,{[l]:"x"===M}),style:{"--multiplierContainerWidth":`${k.m[M]}`},children:U.jsx(n.w,{className:e,src:k.I[M],alt:M},`${M}_${y}`)},`${M}_${y}`)}));return U.jsx("span",{className:g,"data-role":"multiplier","data-value":y,children:M},y)}));G.displayName="Multiplier"},66766:(W,y,M)=>{M.d(y,{I:()=>i,m:()=>x});var U=M(228174);const i={0:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCA1MTMgODMxIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIyNTkuOTMiIHkxPSI3ODAuNDYiIHgyPSIyNTkuOTMiIHkyPSIxNS4zOSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iLjIyIiBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIuMzIiIHN0b3AtY29sb3I9IiNmNmUyZDciLz48c3RvcCBvZmZzZXQ9Ii40OCIgc3RvcC1jb2xvcj0iI2RmOWE3NSIvPjxzdG9wIG9mZnNldD0iLjYiIHN0b3AtY29sb3I9IiNlMDYwMWMiLz48c3RvcCBvZmZzZXQ9Ii42OSIgc3RvcC1jb2xvcj0iI2M1NDUwMCIvPjxzdG9wIG9mZnNldD0iLjc0IiBzdG9wLWNvbG9yPSIjYjEzZTAwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgxPSIyNTkuOTMiIHkxPSI3NzIuMiIgeDI9IjI1OS45MyIgeTI9IjIzLjY1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZDhhMjBmIi8+PHN0b3Agb2Zmc2V0PSIuMzMiIHN0b3AtY29sb3I9IiNiZDhjM2YiLz48c3RvcCBvZmZzZXQ9Ii40NyIgc3RvcC1jb2xvcj0iI2JkNzMzZiIvPjxzdG9wIG9mZnNldD0iLjY1IiBzdG9wLWNvbG9yPSIjYTE3MjNiIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNDcyNTFjIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImMiIHgxPSIyNTkuOTMiIHkxPSI3NjMuOTQiIHgyPSIyNTkuOTMiIHkyPSIzMS45MSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2Q5YTQyNiIvPjxzdG9wIG9mZnNldD0iLjM2IiBzdG9wLWNvbG9yPSIjZmZmYWI4Ii8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggZD0iTTI1Ny40IDgzMC45OWMtODAuMDUgMC0xNDYuNDctMjUuMDUtMTkyLjA4LTcyLjQ0QzIyLjU5IDcxNC4xNSAwIDY1MS45IDAgNTc4LjUzVjI1Ny41NmMwLTM2LjI1IDQuODctNjkuNjkgMTQuNDgtOTkuMzkgMTAuNDctMzIuMzYgMjYuNjEtNjAuNTQgNDcuOTctODMuNzUgMjIuNTktMjQuNTQgNTAuOC00My4zNiA4My44NS01NS45MkMxNzguODcgNi4xMiAyMTYuMjQtLjE2IDI1Ny40LS4xNnM3OC4xOSA2LjI5IDExMC42NCAxOC42OGMzMi45MyAxMi41OCA2MS4wNCAzMS40MSA4My41NSA1NS45NSAyMS4yOSAyMy4yMSAzNy4zOCA1MS4zOCA0Ny44MiA4My43MSA5LjYgMjkuNzEgMTQuNDYgNjMuMTQgMTQuNDYgOTkuMzZ2MzIwLjk3YzAgMTUzLjM3LTEwMC42NyAyNTIuNDYtMjU2LjQ3IDI1Mi40NnoiLz48cGF0aCBkPSJNMjYwLjM4IDc4MC40NmMtNjcuODcgMC0xMjMuNjUtMjEuMy0xNjEuMzEtNjEuNjEtMzUuNzEtMzguMjItNTQuNTktOTIuNzktNTQuNTktMTU3LjgyVjI0MC4wNmMwLTY4LjMgMTcuNi0xMjIuNjMgNTIuMzEtMTYxLjQ4IDM3LjQ3LTQxLjkzIDkyLjUtNjMuMTkgMTYzLjU5LTYzLjE5IDEzNi42NCAwIDIxNSA4MS44OSAyMTUgMjI0LjY3djMyMC45N2MwIDY0LjItMTguOTQgMTE4LjUzLTU0Ljc4IDE1Ny4xMi0zNy44NSA0MC43Ni05My4yNSA2Mi4zLTE2MC4yMiA2Mi4zem0wLTYwMS43MWMtMTIuMjEgMC0xOC45NSA1LjExLTIzLjI4IDE3LjY1LTQuNzQgMTMuNzItNC43MyAzMi4xLTQuNzIgNDUuNTJ2MzE1LjYyYzAgMTguMzMgMS45MiAzMi4yIDUuODggNDIuMzggNS44OSAxNS4xNSAxNC40OSAxNy4xOSAyMi4xMiAxNy4xOSA4LjM4IDAgMjggMCAyOC01OS41N1YyNDMuNTZjMC00Ny44NS03LjMzLTY0LjgyLTI4LTY0LjgyeiIgZmlsbD0idXJsKCNhKSIvPjxwYXRoIGQ9Ik0yNjAuMzggNzcyLjJjLTMzLjIxIDAtNjMuMzctNS4xNS04OS42NS0xNS4zMi0yNS42LTkuOS00Ny41OS0yNC41Ni02NS4zNi00My41OC0zNC4yNy0zNi42OC01Mi4zOC04OS4zMy01Mi4zOC0xNTIuMjZWMjQwLjA2YzAtNjYuMjUgMTYuOS0xMTguNzYgNTAuMjMtMTU2LjA2QzEzOSA0My45NiAxOTEuODggMjMuNjUgMjYwLjM5IDIzLjY1czEyMC43MyAyMC4zMSAxNTYuMzkgNjAuMzZjMzMuMjUgMzcuMzQgNTAuMTEgODkuODUgNTAuMTEgMTU2LjA1djMyMC45N2MwIDYyLjEyLTE4LjE5IDExNC41NC01Mi41OSAxNTEuNTktMzYuMTkgMzguOTctODkuNDEgNTkuNTctMTUzLjkxIDU5LjU3em0wLTYwMS43MWMtMTUuOSAwLTI1Ljg1IDcuNC0zMS4zNCAyMy4yOC01LjE4IDE1LTUuMTcgMzQuMTYtNS4xNiA0OC4xNXYzMTUuNjJjMCA2Ny44MyAyNy40NyA2Ny44MyAzNi41IDY3LjgzIDE0Ljg4IDAgMjQuNTQtNy4xNSAzMC4zOS0yMi40OSA1LjQ3LTE0LjM1IDYuMTEtMzIuNzUgNi4xMS00NS4zNFYyNDMuNTZjMC0xNC4xMiAwLTMzLjQ1LTUuMi00OC45My01LjU0LTE2LjQ4LTE1LjQ5LTI0LjE1LTMxLjMtMjQuMTV6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0iTTYxLjQ4IDU2MS4wM1YyNDAuMDZjMC0xMjQuMTkgNjIuMS0yMDguMTUgMTk4LjktMjA4LjE1czE5OCA4My45NiAxOTggMjA4LjE1djMyMC45N2MwIDExOC45NC02OC40IDIwMi45LTE5OCAyMDIuOXMtMTk4LjktODIuMjEtMTk4LjktMjAyLjl6bTI0My45LTMuNVYyNDMuNTZjMC0yOC44NiAwLTgxLjM0LTQ1LTgxLjM0cy00NSA1Mi40Ny00NSA4MS4zNHYzMTMuOThjMCAyNy4xMSAzLjYgNzYuMDkgNDUgNzYuMDlzNDUtNDguOTggNDUtNzYuMDl6IiBmaWxsPSJ1cmwoI2MpIi8+PC9zdmc+Cg==",1:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgMzYyIDgzMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iMTg0LjM4IiB5MT0iNzc4Ljg0IiB4Mj0iMTg0LjM4IiB5Mj0iMTUuODUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9Ii4yMiIgc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iLjMyIiBzdG9wLWNvbG9yPSIjZjZlMmQ3Ii8+PHN0b3Agb2Zmc2V0PSIuNDgiIHN0b3AtY29sb3I9IiNkZjlhNzUiLz48c3RvcCBvZmZzZXQ9Ii42IiBzdG9wLWNvbG9yPSIjZTA2MDFjIi8+PHN0b3Agb2Zmc2V0PSIuNjkiIHN0b3AtY29sb3I9IiNjNTQ1MDAiLz48c3RvcCBvZmZzZXQ9Ii43NCIgc3RvcC1jb2xvcj0iI2IxM2UwMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMTg0LjM4IiB5MT0iNzcwLjM0IiB4Mj0iMTg0LjM4IiB5Mj0iMjQuMzUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNkOGEyMGYiLz48c3RvcCBvZmZzZXQ9Ii4zMyIgc3RvcC1jb2xvcj0iI2JkOGMzZiIvPjxzdG9wIG9mZnNldD0iLjQ3IiBzdG9wLWNvbG9yPSIjYmQ3MzNmIi8+PHN0b3Agb2Zmc2V0PSIuNjUiIHN0b3AtY29sb3I9IiNhMTcyM2IiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM0NzI1MWMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYyIgeDE9IjE4NC4zOCIgeTE9Ijc2MS44NCIgeDI9IjE4NC4zOCIgeTI9IjMyLjg1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZDlhNDI2Ii8+PHN0b3Agb2Zmc2V0PSIuMzYiIHN0b3AtY29sb3I9IiNmZmZhYjgiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBkPSJNMTAyLjkgODMwLjg0VjI3Ny4yM2MtOS45IDQuMDItMTkuMTQgNy45Ni0yNi4yNyAxMS41NEwwIDMyNy4xNlYxMDAuODFsMjguNzktMTQuNDZjOTMuMjItNDYuODIgMTE2LjUxLTY1LjE4IDEyMi4xOS03MC45MWwxNS41LTE1LjU5aDE5Ni4yOXY4MzFIMTAyLjl6Ii8+PHBhdGggZD0iTTE0Mi4xOCA3NzguODR2LTU3MC41Yy05LjI2IDQuMDQtMTkuMTIgOC4wNS0yOC44MSAxMi0xNi42IDYuNzYtMzMuNzcgMTMuNzUtNDYuMjkgMjAuMjFsLTI0LjggMTIuOFYxMDMuNWw5LjU3LTQuOTVjNjkuODQtMzYuMTIgMTEyLjczLTYyLjIgMTI3LjQ5LTc3LjVsNS4wMS01LjJoMTQyLjEydjc2M2gtMTg0LjN6IiBmaWxsPSJ1cmwoI2EpIi8+PHBhdGggZD0iTTE1MC42OCA3NzAuMzRWMTk1LjE3Yy0xMi4yMyA1Ljc4LTI2LjU1IDExLjYxLTQwLjUyIDE3LjI5LTE2Ljc4IDYuODMtMzQuMTIgMTMuODktNDYuOTggMjAuNTNsLTEyLjQgNi40VjEwOC42N2w0Ljk4LTIuNThjNzAuNjYtMzYuNTUgMTE0LjMtNjMuMTggMTI5LjctNzkuMTVsMi41MS0yLjZoMTMwLjAxdjc0NmgtMTY3LjN6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0iTTE1OS4xOCAxODEuMzRjLTI2LjEgMTQuNC03MiAyOS43LTk5LjkgNDQuMXYtMTExLjZjMjYuMS0xMy41IDEwOC01NS44IDEzMi4zLTgxaDExNy45djcyOWgtMTUwLjN2LTU4MC41eiIgZmlsbD0idXJsKCNjKSIvPjwvc3ZnPgo=",2:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgNTE5IDgzMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iMjYyLjcxIiB5MT0iNzgwLjM0IiB4Mj0iMjYyLjcxIiB5Mj0iMTUuNjgiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9Ii4yMiIgc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iLjMyIiBzdG9wLWNvbG9yPSIjZjZlMmQ3Ii8+PHN0b3Agb2Zmc2V0PSIuNDgiIHN0b3AtY29sb3I9IiNkZjlhNzUiLz48c3RvcCBvZmZzZXQ9Ii42IiBzdG9wLWNvbG9yPSIjZTA2MDFjIi8+PHN0b3Agb2Zmc2V0PSIuNjkiIHN0b3AtY29sb3I9IiNjNTQ1MDAiLz48c3RvcCBvZmZzZXQ9Ii43NCIgc3RvcC1jb2xvcj0iI2IxM2UwMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMjYyLjcxIiB5MT0iNzcxLjkzIiB4Mj0iMjYyLjcxIiB5Mj0iMjQuMDgiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNkOGEyMGYiLz48c3RvcCBvZmZzZXQ9Ii4zMyIgc3RvcC1jb2xvcj0iI2JkOGMzZiIvPjxzdG9wIG9mZnNldD0iLjQ3IiBzdG9wLWNvbG9yPSIjYmQ3MzNmIi8+PHN0b3Agb2Zmc2V0PSIuNjUiIHN0b3AtY29sb3I9IiNhMTcyM2IiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM0NzI1MWMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYyIgeDE9IjI2Mi43MSIgeTE9Ijc2My41MiIgeDI9IjI2Mi43MSIgeTI9IjMyLjQ5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZDlhNDI2Ii8+PHN0b3Agb2Zmc2V0PSIuMzYiIHN0b3AtY29sb3I9IiNmZmZhYjgiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBkPSJNMS44NSA4MzEuNzl2LTE3MC41bDE4OC4zNC0yNzcuOWMzLjgtNS42MSA3LjU5LTExLjEzIDExLjM1LTE2LjYxIDEuMTgtMS43MiAyLjM1LTMuNDMgMy41Mi01LjEzSDBWMjcyLjljMC03OS40OSAyMC4zMS0xNDMuNzMgNjAuMzYtMTkwLjkzIDIyLjc1LTI2LjgxIDUxLjUtNDcuNDIgODUuNDYtNjEuMjVDMTc5Ljg0IDYuODcgMjE5LjI1LS4xNSAyNjIuOTYtLjE1YzM5LjAzIDAgNzQuNjcgNS4zMiAxMDUuOTIgMTUuODMgMzIuNjMgMTAuOTYgNjAuNzMgMjcuNTkgODMuNTQgNDkuNDIgMjIuNiAyMS42NCAzOS43OCA0OC4xNyA1MS4wNiA3OC44NiAxMC41OSAyOC44MiAxNS45NiA2MS40MiAxNS45NiA5Ni45IDAgOTguMzItNTAuMzcgMTY4Ljk4LTEwMy43IDI0My43OS0yLjcyIDMuODItNS40NiA3LjY2LTguMjEgMTEuNTNsLTgyLjMxIDExOC4wNmgxNzMuODNWODMxLjhIMS44NXoiLz48cGF0aCBkPSJNNDYuMzYgNzgwLjM0VjY1My40NmwxNzcuMzUtMjY5LjUzYzMuNjUtNS41NSA3LjMtMTEuMDIgMTAuOTItMTYuNDUgMzQuMi01MS4zNCA2My43My05NS42OCA2My43My0xNDcuMTEgMC00NC42Mi0yMi40My00NC42Mi0yOS44LTQ0LjYyLTIyLjk2IDAtNDQuMiA5Ljk0LTQ0LjIgODIuMDJ2NTIuNDRINDQuNTZWMjU1LjFjMC03MS41NSAxNy4xNS0xMjguNjMgNTAuOTYtMTY5LjY4IDM4LjEzLTQ2LjI4IDk1LjQ0LTY5Ljc0IDE3MC4zNC02OS43NCAxMzYuNjMgMCAyMTUgNzUuNTggMjE1IDIwNy4zNyAwIDQwLjQ0LTkuMjggNzguMzktMjkuMjEgMTE5LjQ0LTE3LjM5IDM1LjgxLTQwLjc3IDY5LjU5LTY1LjUyIDEwNS4zNS0yLjY4IDMuODctNS4zNyA3Ljc3LTguMDggMTEuNjlMMjYyLjYxIDYzMC4wN2gxOTguNDV2MTUwLjI4SDQ2LjM2eiIgZmlsbD0idXJsKCNhKSIvPjxwYXRoIGQ9Ik01NC44NiA3NzEuOTNWNjU1Ljk2bDE3NS45OC0yNjcuNDRjMy42NC01LjUzIDcuMjgtMTEgMTAuODktMTYuNDEgMzQuOTUtNTIuNDcgNjUuMTMtOTcuNzggNjUuMTMtMTUxLjc0IDAtMjQuMTktNi42NC01My4wMy0zOC4zLTUzLjAzLTM2Ljk0IDAtNTIuNyAyNy4wNC01Mi43IDkwLjQzdjQ0LjAzSDUzLjA2di00Ni43YzAtNjkuNTYgMTYuNS0xMjQuODYgNDkuMDUtMTY0LjM2IDM2LjQ0LTQ0LjIzIDkxLjUzLTY2LjY1IDE2My43NS02Ni42NSA2Ni40OSAwIDExOC4yOCAxNy44MyAxNTMuOTQgNTIuOTggMzQuODggMzQuMzkgNTIuNTYgODMuNSA1Mi41NiAxNDUuOTcgMCA4NS4zMS00My4yMSAxNDcuNzQtOTMuMjUgMjIwLjAzLTIuNjkgMy44OS01LjQxIDcuODEtOC4xMyAxMS43NmwtMTI0LjMgMTgzLjYzaDIwNS44OHYxMzMuNDZINTQuODZ6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0iTTYzLjM2IDY1OC40NmwxNzQuNi0yNjUuMzRjMzguNy01OC43NyA3Ny40LTExMC40MSA3Ny40LTE3Mi43NCAwLTQwLjk2LTE4LTYxLjQ0LTQ2LjgtNjEuNDQtNDkuNSAwLTYxLjIgNDMuNjMtNjEuMiA5OC44NHYzNS42Mkg2MS41NnYtMzguMjljMC0xMjcuMzMgNTcuNi0yMjIuNiAyMDQuMy0yMjIuNiAxMzAuNSAwIDE5OCA3MS4yMyAxOTggMTkwLjU1IDAgODcuMjYtNDcuNyAxNTEuMzctOTkuOSAyMjcuMDZMMjMwLjc2IDY0Ni45aDIxMy4zdjExNi42NEg2My4zNlY2NTguNDd6IiBmaWxsPSJ1cmwoI2MpIi8+PC9zdmc+Cg==",3:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgNTE3IDgzMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iMjYxLjc5IiB5MT0iNzgwLjM4IiB4Mj0iMjYxLjc5IiB5Mj0iMTUuNzEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9Ii4yMiIgc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iLjMyIiBzdG9wLWNvbG9yPSIjZjZlMmQ3Ii8+PHN0b3Agb2Zmc2V0PSIuNDgiIHN0b3AtY29sb3I9IiNkZjlhNzUiLz48c3RvcCBvZmZzZXQ9Ii42IiBzdG9wLWNvbG9yPSIjZTA2MDFjIi8+PHN0b3Agb2Zmc2V0PSIuNjkiIHN0b3AtY29sb3I9IiNjNTQ1MDAiLz48c3RvcCBvZmZzZXQ9Ii43NCIgc3RvcC1jb2xvcj0iI2IxM2UwMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMjYxLjc5IiB5MT0iNzcyLjEyIiB4Mj0iMjYxLjc5IiB5Mj0iMjMuOTciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNkOGEyMGYiLz48c3RvcCBvZmZzZXQ9Ii4zMyIgc3RvcC1jb2xvcj0iI2JkOGMzZiIvPjxzdG9wIG9mZnNldD0iLjQ3IiBzdG9wLWNvbG9yPSIjYmQ3MzNmIi8+PHN0b3Agb2Zmc2V0PSIuNjUiIHN0b3AtY29sb3I9IiNhMTcyM2IiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM0NzI1MWMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYyIgeDE9IjI2MS43OSIgeTE9Ijc2My44NiIgeDI9IjI2MS43OSIgeTI9IjMyLjIyIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZDlhNDI2Ii8+PHN0b3Agb2Zmc2V0PSIuMzYiIHN0b3AtY29sb3I9IiNmZmZhYjgiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBkPSJNMjU5LjI1IDgzMC44OGMtOTEuNDQgMC0xNjAuMDgtMjcuMTctMjA0LjAxLTgwLjc1QzE4LjA3IDcwNC43OSAwIDY0Mi4zOCAwIDU1OS4zMnYtNzQuODhoMTUyLjAzVjMzOS42M0gwdi05Mi4zN0MwIDIxMC4xNCA1LjczIDE3Ni4wOCAxNy4wNCAxNDZjMTEuNzQtMzEuMjQgMjkuNDctNTguMjUgNTIuNjgtODAuMjlDMTE0LjkgMjIuODQgMTc5Ljc5LjE3IDI1Ny40LjE3YzM4LjA1IDAgNzMuMDMgNC45OCAxMDMuOTYgMTQuOCAzMi45MyAxMC40NiA2MS40NiAyNi40MSA4NC44IDQ3LjQyIDIzLjc5IDIxLjQyIDQxLjk1IDQ3Ljg2IDUzLjk4IDc4LjU5IDExLjU3IDI5LjU5IDE3LjQ0IDYzLjI4IDE3LjQ0IDEwMC4xNiAwIDYyLjYxLTE5LjkyIDExNy42OC01My40OCAxNTUuNDIgNy4yNSA3LjczIDEzLjc5IDE2LjE3IDE5LjU5IDI1LjMxIDIyLjggMzUuODkgMzMuODkgODEuMTQgMzMuODkgMTM4LjMzIDAgNzkuOTUtMTkuNDYgMTQzLjc5LTU3Ljg1IDE4OS43NC0yMi4yMiAyNi42LTUwLjU4IDQ2Ljk4LTg0LjMgNjAuNTktMzMuNDcgMTMuNTEtNzIuNTYgMjAuMzYtMTE2LjE4IDIwLjM2eiIvPjxwYXRoIGQ9Ik0yNjIuMjQgNzgwLjM4Yy0zOS40MSAwLTczLjg3LTUuODUtMTAyLjQ0LTE3LjQtMjcuODktMTEuMjctNTEuMDItMjguMjctNjguNzQtNTAuNTMtMzEuMzEtMzkuMzMtNDYuNTMtOTUuMTQtNDYuNTMtMTcwLjYxdi00MS44NmgxODQuM3Y0MS44NmMwIDc2LjU0IDE0LjI5IDgyLjI2IDM2LjEgODIuMjYgMTkuNjYgMCAzMS42LTUuMjQgMzEuNi03Ny44OSAwLTM1LjQ0LTMuODUtNTcuNC0xMi40OS03MS4xOC01Ljc0LTkuMTYtMTYuMjktMTkuNzctNDcuMjctMjAuN2gtNDQuNjVWMzIwLjc4aDQxLjNjMzMuMDcgMCA0NC4wOS05LjYgNDkuOTktMTcuOTYgOC45NC0xMi42NiAxMy4xMS0zNC43NiAxMy4xMS02OS41NSAwLTYzLjA2LTE3LjA4LTY4LjI4LTM2LjEtNjguMjgtMTEuODIgMC0zMS42IDAtMzEuNiA3MC45djUzLjIySDQ0LjU0di01OS4zNGMwLTMzLjM1IDQuOTEtNjMuNyAxNC41OS05MC4yMyA5LjcxLTI2LjYxIDI0LjI1LTQ5LjUgNDMuMjItNjguMDUgMTguODQtMTguNDIgNDIuMDEtMzIuNTEgNjguODUtNDEuOSAyNi4zOS05LjIyIDU2LjQxLTEzLjkgODkuMjMtMTMuOSA2OC4wNCAwIDEyMS44IDE3Ljg2IDE1OS43OSA1My4wOCAzOS4wMiAzNi4xOCA1OC44MSA4OC4yOCA1OC44MSAxNTQuODYgMCA0Mi41Ni05Ljc4IDgxLjQtMjguMjkgMTEyLjMyLTEwLjkxIDE4LjIyLTI0LjYgMzMuMDYtNDAuMDUgNDMuNyAxNi4zOCAxMC44NSAyOS44NiAyNC43OSA0MC4yOCA0MS42OCAxOC44OSAzMC42MSAyOC4wNyA3MC4zMSAyOC4wNyAxMjEuMzYgMCA3Mi4zNi0xNi40NCAxMjkuMzItNDguODcgMTY5LjMxLTM2Ljc5IDQ1LjM2LTkzLjI5IDY4LjM2LTE2Ny45MyA2OC4zNnoiIGZpbGw9InVybCgjYSkiLz48cGF0aCBkPSJNMjYyLjI0IDc3Mi4xMmMtMzguMjggMC03MS42NS01LjY0LTk5LjE3LTE2Ljc2LTI2LjUxLTEwLjcyLTQ4LjQ4LTI2Ljg1LTY1LjI4LTQ3Ljk2LTMwLjExLTM3LjgzLTQ0Ljc1LTkxLjk4LTQ0Ljc1LTE2NS41NnYtMzMuNmgxNjcuM3YzMy42YzAgMzYuMjcgMy4xMyA1OC41NSAxMC4xNCA3Mi4yNyA2LjU0IDEyLjc5IDE2Ljg1IDE4LjI1IDM0LjQ2IDE4LjI1IDE2LjM5IDAgMjUuODgtNS40OSAzMS43MS0xOC4zNSA1Ljg4LTEyLjk3IDguMzktMzMuMjQgOC4zOS02Ny44IDAtMzcuMDQtNC4yMy02MC4zMi0xMy43Mi03NS40Ny0xMC4wNS0xNi4wNC0yNy4zNC0yMy44OC01NC40LTI0LjY2aC0zNi4yOFYzMjkuMDRoMzIuOGMyOC45IDAgNDYuNDgtNi42NCA1Ny0yMS41NCAxMC4xLTE0LjMgMTQuNi0zNy4xOSAxNC42LTc0LjIyIDAtNjMuNTItMTcuODMtNzYuNTMtNDQuNi03Ni41My0yOC44NiAwLTQwLjEgMjIuMTktNDAuMSA3OS4xNnY0NC45N0g1My4wNHYtNTEuMDljMC0zMi40IDQuNzQtNjEuODMgMTQuMS04Ny40NyA5LjI5LTI1LjQ1IDIzLjE2LTQ3LjMxIDQxLjI0LTY0Ljk5IDE3Ljk0LTE3LjU0IDQwLjA1LTMwLjk4IDY1LjctMzkuOTUgMjUuNDYtOC45IDU0LjUxLTEzLjQxIDg2LjM1LTEzLjQxIDY1Ljc4IDAgMTE3LjU2IDE3LjA5IDE1My45MiA1MC44IDM3LjI4IDM0LjU2IDU2LjE4IDg0LjY2IDU2LjE4IDE0OC44OSAwIDQxLjEtOS4zOCA3OC41MS0yNy4xNCAxMDguMTctMTIuODkgMjEuNTQtMjkuODMgMzguMDItNDguODkgNDcuODggNTEuMTEgMjYuODggNzYuMDIgODAuNDUgNzYuMDIgMTYzIDAgNzAuNDYtMTUuODMgMTI1LjcxLTQ3LjA1IDE2NC4yLTM1LjA5IDQzLjI3LTg5LjM1IDY1LjIxLTE2MS4yNSA2NS4yMXoiIGZpbGw9InVybCgjYikiLz48cGF0aCBkPSJNNjEuNTQgNTQxLjg0di0yNS4zNWgxNTAuM3YyNS4zNWMwIDcwLjggMTEuNyA5OC43OCA1My4xIDk4Ljc4czQ4LjYtMzAuNTkgNDguNi05NC40MWMwLTY5LjkzLTE0LjQtMTA2LjY0LTc2LjUtMTA4LjM5aC0yNy45VjMzNy4zaDI0LjNjNjMuOSAwIDgwLjEtMzIuMzQgODAuMS0xMDQuMDIgMC01NS4wNy0xMi42LTg0Ljc5LTUzLjEtODQuNzlzLTQ4LjYgMzUuODQtNDguNiA4Ny40MXYzNi43MUg2MS41NHYtNDIuODNjMC0xMjcuNjIgNzQuNy0xOTcuNTUgMTk4LjktMTk3LjU1czIwMS42IDY1LjU2IDIwMS42IDE5MS40M2MwIDgzLjA0LTM5LjYgMTQyLjQ4LTg5LjEgMTU1LjU5IDUwLjQgMTguMzYgODkuMSA2Mi4wNiA4OS4xIDE2My40NiAwIDEyOS4zNy01NCAyMjEuMTUtMTk5LjggMjIxLjE1LTE1MyAwLTIwMC43LTkwLjAzLTIwMC43LTIyMi4wM3oiIGZpbGw9InVybCgjYykiLz48L3N2Zz4K",4:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgNTUwIDgzMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iMjc4LjAxIiB5MT0iNzc5Ljg0IiB4Mj0iMjc4LjAxIiB5Mj0iMTYuODUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9Ii4yMiIgc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iLjMyIiBzdG9wLWNvbG9yPSIjZjZlMmQ3Ii8+PHN0b3Agb2Zmc2V0PSIuNDgiIHN0b3AtY29sb3I9IiNkZjlhNzUiLz48c3RvcCBvZmZzZXQ9Ii42IiBzdG9wLWNvbG9yPSIjZTA2MDFjIi8+PHN0b3Agb2Zmc2V0PSIuNjkiIHN0b3AtY29sb3I9IiNjNTQ1MDAiLz48c3RvcCBvZmZzZXQ9Ii43NCIgc3RvcC1jb2xvcj0iI2IxM2UwMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMjc4LjAxIiB5MT0iNzcxLjM0IiB4Mj0iMjc4LjAxIiB5Mj0iMjUuMzUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNkOGEyMGYiLz48c3RvcCBvZmZzZXQ9Ii4zMyIgc3RvcC1jb2xvcj0iI2JkOGMzZiIvPjxzdG9wIG9mZnNldD0iLjQ3IiBzdG9wLWNvbG9yPSIjYmQ3MzNmIi8+PHN0b3Agb2Zmc2V0PSIuNjUiIHN0b3AtY29sb3I9IiNhMTcyM2IiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM0NzI1MWMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYyIgeDE9IjI3OC4wMSIgeTE9Ijc2Mi44NCIgeDI9IjI3OC4wMSIgeTI9IjMzLjg1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZDlhNDI2Ii8+PHN0b3Agb2Zmc2V0PSIuMzYiIHN0b3AtY29sb3I9IiNmZmZhYjgiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBkPSJNMjMwLjgyIDgzMS44NHYtMTYzLjhIMFY0OTYuMTJMMjEzLjE0Ljg1aDI2Ny4zNXY0NTMuNTloNjkuNTN2MjEzLjZoLTY5LjUzdjE2My44SDIzMC44MnoiLz48cGF0aCBkPSJNMjY5LjExIDc3OS44NHYtMTYzLjhINDUuMDFWNDg0LjkzTDI0MC41OSAxNi44NWgyMDIuOTJ2NDUzLjZoNjcuNXYxNDUuNmgtNjcuNXYxNjMuOGgtMTc0LjR6bTAtMzA5LjR2LTE4OS40bC02OC41NyAxODkuNGg2OC41N3oiIGZpbGw9InVybCgjYSkiLz48cGF0aCBkPSJNMjc3LjYxIDc3MS4zNHYtMTYzLjhINTMuNTF2LTEyMC45TDI0Ni4yNSAyNS4zNWgxODguNzZ2NDUzLjZoNjcuNXYxMjguNmgtNjcuNXYxNjMuOGgtMTU3LjR6bTAtMjkyLjRWMjMyLjU5bC04OS4xOCAyNDYuMzVoODkuMTh6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0iTTI4Ni4xMSA1OTkuMDRINjIuMDF2LTExMC43bDE4OS45LTQ1NC40OWgxNzQuNnY0NTMuNmg2Ny41djExMS42aC02Ny41djE2My44aC0xNDAuNHYtMTYzLjh6bTAtMTExLjZ2LTMwMy4zbC0xMDkuOCAzMDMuM2gxMDkuOHoiIGZpbGw9InVybCgjYykiLz48L3N2Zz4K",5:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgNTA2IDgzMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iMjU2LjIyIiB5MT0iNzgwLjI4IiB4Mj0iMjU2LjIyIiB5Mj0iMTUuNTEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9Ii4yMiIgc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iLjMyIiBzdG9wLWNvbG9yPSIjZjZlMmQ3Ii8+PHN0b3Agb2Zmc2V0PSIuNDgiIHN0b3AtY29sb3I9IiNkZjlhNzUiLz48c3RvcCBvZmZzZXQ9Ii42IiBzdG9wLWNvbG9yPSIjZTA2MDFjIi8+PHN0b3Agb2Zmc2V0PSIuNjkiIHN0b3AtY29sb3I9IiNjNTQ1MDAiLz48c3RvcCBvZmZzZXQ9Ii43NCIgc3RvcC1jb2xvcj0iI2IxM2UwMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMjU2LjIyIiB5MT0iNzcxLjkxIiB4Mj0iMjU2LjIyIiB5Mj0iMjMuODgiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNkOGEyMGYiLz48c3RvcCBvZmZzZXQ9Ii4zMyIgc3RvcC1jb2xvcj0iI2JkOGMzZiIvPjxzdG9wIG9mZnNldD0iLjQ3IiBzdG9wLWNvbG9yPSIjYmQ3MzNmIi8+PHN0b3Agb2Zmc2V0PSIuNjUiIHN0b3AtY29sb3I9IiNhMTcyM2IiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM0NzI1MWMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYyIgeDE9IjI1Ni4yMiIgeTE9Ijc2My41NCIgeDI9IjI1Ni4yMiIgeTI9IjMyLjI1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZDlhNDI2Ii8+PHN0b3Agb2Zmc2V0PSIuMzYiIHN0b3AtY29sb3I9IiNmZmZhYjgiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBkPSJNMjQ5LjA1IDgzMS41Yy00Ny42MiAwLTg3LjA3LTYuNTQtMTIwLjYyLTE5Ljk4LTM0LjM4LTEzLjc4LTYyLjE4LTM0Ljk5LTgyLjYxLTYzLjAyQzUuMjEgNjkyLjc3IDAgNjE3LjM2IDAgNTU3Ljg5di01MC4yM2gzLjE0TDIwLjItLjI1SDQ3NHYyMjQuNTZIMjQ1LjA2bC0xLjAyIDE4LjE1YzkuMzgtMS44IDE4Ljk3LTMuMTYgMjguNTktNC4wMiA4LjQ1LS44NCAxNi44NS0xLjI2IDI0Ljk4LTEuMjYgMzQuMTkgMCA2NS40NiA3LjM3IDkyLjk0IDIxLjkgMjcuMDMgMTQuMjkgNDkuODUgMzUuMjMgNjcuODMgNjIuMjMgMzEuOSA0Ny45IDQ4LjA3IDExNC4wOCA0OC4wNyAxOTYuNyAwIDcxLjY1LTUuMjEgMTUzLjIyLTQzLjg0IDIxNC45NC0yMC40NCAzMi42NS00OC44MiA1Ny41NC04NC4zNyA3My45OC0zNS43NyAxNi41NC03OC4wMiAyNC41OC0xMjkuMTkgMjQuNTh6Ii8+PHBhdGggZD0iTTI1Mi4xNyA3ODAuMjhjLTgxLjMxIDAtMTM2LjczLTIyLjQ2LTE2OS40Mi02OC42Ny0yNi41NC0zNy41MS0zOC4zOC05MC4zOS0zOC4zOC0xNzEuNDV2LTE2Ljc0aDE3OC45djE2Ljc0YzAgNDAuOTcgMi42NSA2NS43NSA4LjU5IDgwLjM2IDQuOTYgMTIuMTggMTEuNTkgMTYuNSAyNS4zNCAxNi41IDEuMjMgMCAyLjUzLS4wNCAzLjg3LS4xMmwuMzMtLjAyYzkuNDYtLjM2IDE5LjItMi43OSAyNS4xOS0yNy40OSA1LjcyLTIzLjU1IDYuMTctNjAuMTYgNi4xNy0xMDUuNTggMC0yNi43MS0xLjA0LTYwLjE5LTkuMTEtODIuMTctNC42NC0xMi42Mi0xMS41NS0yNC4zLTMwLjU5LTI0LjMtMTUuNjIgMC0zMi42OSA2LjE1LTQwLjg2IDUxLjc2bC0yLjQ4IDEzLjgzSDQ4LjMyTDYyLjkxIDE1LjUxaDM3My42NnYxNTcuNThIMjE2LjA4bC01LjM2IDk3LjljMy4xMi0xLjQxIDYuMTYtMi42NSA5LTMuNzMgMTcuNTQtNi42NiAzOC4zNy0xMS4zNiA1OC42Ny0xMy4yMyA3LjEtLjczIDE0LjE0LTEuMSAyMC45Mi0xLjEgNTQuMzMgMCA5OC4zOSAyMy43MyAxMjcuNDEgNjguNjMgMjcuNDQgNDIuNDQgNDEuMzUgMTAyLjU3IDQxLjM1IDE3OC43MSAwIDY3LjA3LTQuNDggMTQzLjAyLTM3Ljc0IDE5Ny43NC0zMy42NCA1NS4zNi05MS45MiA4Mi4yNy0xNzguMTYgODIuMjd6IiBmaWxsPSJ1cmwoI2EpIi8+PHBhdGggZD0iTTI1Mi4xNyA3NzEuOTFjLTc4LjMyIDAtMTMxLjQ2LTIxLjI5LTE2Mi40NS02NS4wOC0yNS40OS0zNi4wMi0zNi44NS04Ny40Mi0zNi44NS0xNjYuNjd2LTguMzdoMTYxLjl2OC4zN2MwIDQyLjY2IDIuNzUgNjcuNjIgOS4yMSA4My40OCA2LjI5IDE1LjQ1IDE1LjkyIDIxLjc2IDMzLjIzIDIxLjc2IDEuNCAwIDIuODctLjA0IDQuMzctLjEzaC4xN2MxNy44NS0uNyAyNy40NS0xMC41MiAzMy4xMy0zMy45MiA1LjkzLTI0LjQ0IDYuNC02MS41NSA2LjQtMTA3LjUyIDAtMjcuMzktMS4wOS02MS44MS05LjYyLTg1LjAyLTcuNTgtMjAuNjItMTkuNDgtMjkuODItMzguNTgtMjkuODItMTIuOTggMC0yMy4wNyA0LjI1LTMwLjg0IDEyLjk5LTguNDcgOS41Mi0xNC42NiAyNC45LTE4LjM4IDQ1LjY5bC0xLjI0IDYuOTJINTcuMUw3MS4xNCAyMy44OGgzNTYuOTN2MTQwLjg0SDIwOC4wM2wtNi42IDEyMC41OWMxOC41Ni0xMS40MSA0Ny4yOC0yMC4xNCA3Ny44Ni0yMi45NSA2Ljc0LS43IDEzLjUxLTEuMDUgMjAuMDMtMS4wNSAyNS45MiAwIDQ5LjM2IDUuNjEgNjkuNjcgMTYuNjcgMTkuOTYgMTAuODcgMzYuOTcgMjcuMDUgNTAuNTcgNDguMDkgMjYuNTUgNDEuMDcgNDAuMDIgOTkuNjkgNDAuMDIgMTc0LjIyIDAgNjUuOTMtNC4zNCAxNDAuNDctMzYuNTMgMTkzLjQ0LTMxLjk4IDUyLjYyLTg3Ljg3IDc4LjItMTcwLjg3IDc4LjJ6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0iTTYxLjM4IDU0MC4xNmgxNDQuOWMwIDgyLjQ0IDkuOSAxMTYuMTIgNTUuOCAxMTMuNDYgNDUuOS0xLjc3IDQ3LjctNTUuODQgNDcuNy0xNDkuOCAwLTcwLjAzLTguMS0xMjMuMjEtNTYuNy0xMjMuMjEtMzAuNiAwLTQ5LjUgMjAuMzktNTcuNiA2NS41OUg2NS44OGwxMy41LTQxMy45NWgzNDAuMnYxMjQuMWgtMjE5LjZsLTguMSAxNDguMDNjMTEuNy0xNS45NSA0OS41LTMwLjE0IDg4LjItMzMuNjggMTExLjYtMTEuNTIgMTcxIDc1LjM0IDE3MSAyMjkuNThzLTI3LjkgMjYzLjI2LTE5OC45IDI2My4yNmMtMTYwLjIgMC0xOTAuOC04OS41My0xOTAuOC0yMjMuMzh6IiBmaWxsPSJ1cmwoI2MpIi8+PC9zdmc+Cg==",6:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgNTE3IDgzMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iMjYxLjc5IiB5MT0iNzgwLjM0IiB4Mj0iMjYxLjc5IiB5Mj0iMTUuMzciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9Ii4yMiIgc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iLjMyIiBzdG9wLWNvbG9yPSIjZjZlMmQ3Ii8+PHN0b3Agb2Zmc2V0PSIuNDgiIHN0b3AtY29sb3I9IiNkZjlhNzUiLz48c3RvcCBvZmZzZXQ9Ii42IiBzdG9wLWNvbG9yPSIjZTA2MDFjIi8+PHN0b3Agb2Zmc2V0PSIuNjkiIHN0b3AtY29sb3I9IiNjNTQ1MDAiLz48c3RvcCBvZmZzZXQ9Ii43NCIgc3RvcC1jb2xvcj0iI2IxM2UwMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMjYxLjc5IiB5MT0iNzcyLjA0IiB4Mj0iMjYxLjc5IiB5Mj0iMjMuNjYiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNkOGEyMGYiLz48c3RvcCBvZmZzZXQ9Ii4zMyIgc3RvcC1jb2xvcj0iI2JkOGMzZiIvPjxzdG9wIG9mZnNldD0iLjQ3IiBzdG9wLWNvbG9yPSIjYmQ3MzNmIi8+PHN0b3Agb2Zmc2V0PSIuNjUiIHN0b3AtY29sb3I9IiNhMTcyM2IiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM0NzI1MWMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYyIgeDE9IjI2MS43OSIgeTE9Ijc2My43NSIgeDI9IjI2MS43OSIgeTI9IjMxLjk2IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZDlhNDI2Ii8+PHN0b3Agb2Zmc2V0PSIuMzYiIHN0b3AtY29sb3I9IiNmZmZhYjgiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBkPSJNMjYwLjE4IDgzMS4xYy00My4zMyAwLTgyLjQ3LTcuMzgtMTE2LjMzLTIxLjkzLTMzLjYyLTE0LjQ1LTYyLjA1LTM1Ljg5LTg0LjUtNjMuNzJDMTkuOTcgNjk2LjYzIDAgNjMwLjA4IDAgNTQ3LjY0di0yNTcuNEMwIDIwMC44IDE1Ljg2IDEzNy4xMSA0OS45MiA4OS43OSA5Mi45MiAzMC4wNCAxNjMuMzUtLjI1IDI1OS4yNS0uMjVjODUuNjMgMCAxNDcuMTYgMjAuNjMgMTg4LjEyIDYzLjA3IDIwLjA1IDIwLjc4IDM0Ljc5IDQ2Ljg0IDQzLjggNzcuNDggNy43NSAyNi4zNCAxMS41MyA1Ni4yOSAxMS41NiA5MS41NC4wNC40Ni4xNCAxLjM1LjIxIDIuMDIuMyAyLjcxLjcxIDYuNDIuNzEgMTAuN3Y0OS43OEgzOTkuNTRjMjkuOTQgMTMuODQgNTQuOTYgMzUuMiA3NC4xOCA2My42MiAyOS4wOSA0My4wMSA0My44MyAxMDAuOTIgNDMuODMgMTcyLjExIDAgOTEuNjQtMTcuMTMgMTYwLjE4LTUyLjM2IDIwOS41My00My4zNSA2MC43Mi0xMTIuMzMgOTEuNS0yMDUuMDQgOTEuNXoiLz48cGF0aCBkPSJNMjYzLjE0IDc4MC4zNGMtMzcuMTkgMC03MC40Ni02LjM4LTk4Ljg5LTE4Ljk3LTI3LjQ4LTEyLjE3LTUwLjcyLTMwLjIyLTY5LjA3LTUzLjY1LTMzLjYtNDIuODktNTAuNjMtMTAyLjY2LTUwLjYzLTE3Ny42NXYtMjU3LjRjMC04Mi40NSAxMy41Mi0xNDAuMiA0Mi41Ni0xODEuNzUgMTcuMjEtMjQuNjMgNDAuMjItNDMuNDYgNjguNC01NS45NyAyOS4yNy0xMi45OSA2NS4xOC0xOS41OCAxMDYuNzQtMTkuNTggNzMuMDUgMCAxMjQuNTkgMTcuMSAxNTcuNTYgNTIuMjggMzAuNTkgMzIuNjUgNDQuODQgNzkuMzcgNDQuODQgMTQ3LjA0IDAgMS40NS4xOSAzLjIxLjM5IDUuMDkuMjUgMi4zLjUxIDQuNjguNTEgNy4yMXYxNi41OWgtMTc1LjN2LTE2LjU5YzAtNjQuNDYtNi45Ni02Ny43NC0yNy4xLTY3Ljc0LTEyLjYzIDAtMTguNyAyLjQ1LTIzLjYyIDE3LjYyLTYuNjMgMjAuNDUtNy45OCA1Ny42NS03Ljk4IDEwNy4yMnYyNS4yN2MxOC45Ny0xMC41NiA0My42Ny0xNi44OSA3Mi4yNC0xOC4xM2guMzZjMS43NS0uMDUgMy41MS0uMDcgNS4yMy0uMDcgMjkuOCAwIDU2LjM3IDYuMDIgNzguOTggMTcuODkgMjEuNDUgMTEuMjYgMzkuNDUgMjcuODMgNTMuNTEgNDkuMjQgMjQuNjcgMzcuNTggMzcuMTggODkuNDYgMzcuMTggMTU0LjIgMCA4NC44LTE0LjcyIDE0Ny4yNS00NC45OSAxOTAuOTMtMTcuNCAyNS4xLTQwLjI5IDQ0LjMtNjguMDMgNTcuMDctMjguNiAxMy4xNy02My4yMSAxOS44NC0xMDIuODggMTkuODR6bS0zMS42LTIxNi4wMWMwIDI1LjIyIDIuODkgNDQuNDUgOC41OCA1Ny4xNCA2Ljk3IDE1LjUzIDE2LjQ1IDE3LjYzIDI0LjgxIDE3LjYzIDEwLjM3IDAgMTYuOTMtMi45NSAyMS45MS0xOC41NCA1LjgtMTguMTkgNi45OS00Ny4yMiA2Ljk5LTg1LjIyIDAtMjkuNjYgMC02MC4zMy01LjYtNzguODctNC40My0xNC42Ny0xMC43Ny0xOS42Mi0yNS4wOS0xOS42Mi0xMy40MiAwLTI1LjU0IDguODEtMzEuNiAxNi41djExMC45OHoiIGZpbGw9InVybCgjYSkiLz48cGF0aCBkPSJNMjYzLjE0IDc3Mi4wNGMtNzAuOTIgMC0xMjUuMTYtMjMuMzQtMTYxLjIxLTY5LjM2LTMyLjQ0LTQxLjQxLTQ4Ljg4LTk5LjQ5LTQ4Ljg4LTE3Mi42MXYtMjU3LjRjMC04MC43IDEzLjA1LTEzNi45NyA0MS4wOC0xNzcuMDggMTYuMzItMjMuMzYgMzguMTYtNDEuMjIgNjQuOS01My4wOSAyOC4xNi0xMi41IDYyLjg5LTE4Ljg0IDEwMy4yMi0xOC44NCA3MC41MyAwIDEyMC4wMiAxNi4yMiAxNTEuMjggNDkuNTkgMjkuMDcgMzEuMDMgNDIuNjIgNzUuOTcgNDIuNjIgMTQxLjQ0IDAgMS44OC4yMiAzLjk1LjQ0IDUuOTYuMjMgMi4wOS40NiA0LjI1LjQ2IDYuMzR2OC4zaC0xNTguM3YtOC4zYzAtMjkuMDUtMS4wMi00OC4yNC02LjIxLTYwLjM5LTMuNDgtOC4xMy05LjQ0LTE1LjY1LTI5LjM5LTE1LjY1LTMxLjA3IDAtNDAuMSAxNy40Ny00MC4xIDEzMy4xNHY0MC45N2MxOC41MS0xNC45OSA0Ni43Ni0yNC4wNSA4MS4xMi0yNS41NGguMThjMS42OC0uMDQgMy4zNy0uMDYgNS4wMy0uMDYgMTAzLjkzIDAgMTYxLjE3IDc1LjY2IDE2MS4xNyAyMTMuMDQgMCA4My4wOC0xNC4yNCAxNDQuMDItNDMuNTMgMTg2LjI4LTE2LjUzIDIzLjg1LTM4LjI3IDQyLjA5LTY0LjYxIDU0LjIyLTI3LjQ1IDEyLjY0LTYwLjg1IDE5LjA1LTk5LjI1IDE5LjA1em0tNDAuMS0yMDcuNzJjMCAyNi4zNyAzLjEzIDQ2LjcyIDkuMyA2MC40NyA2LjkyIDE1LjQxIDE3LjI3IDIyLjU5IDMyLjYgMjIuNTlzMjQuNS03LjA2IDMwLjAyLTI0LjM3YzYuMTItMTkuMTkgNy4zOC00OC45MyA3LjM4LTg3LjY5IDAtMzAuMjUgMC02MS41My01Ljk1LTgxLjIyLTUuNDktMTguMTYtMTUuMTItMjUuNTctMzMuMjUtMjUuNTdzLTMzLjgyIDEyLjkzLTQwLjEgMjIuMTZWNTY0LjN6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0iTTYxLjU0IDUzMC4wN3YtMjU3LjRjMC0xMzguOCAzOC43LTI0MC43MSAyMDAuNy0yNDAuNzEgMTM5LjUgMCAxODUuNCA2NC4xMyAxODUuNCAxODIuNzMgMCA0LjM5LjkgOC43OC45IDEyLjNoLTE0MS4zYzAtNTcuMS0zLjYtODQuMzQtNDQuMS04NC4zNHMtNDguNiAzMC43NS00OC42IDE0MS40NHY2My4yNWMxNC40LTI0LjYgNDkuNS0zNy43OCA5MC0zOS41MyAxMTUuMi0yLjY0IDE1Ny41IDg4LjczIDE1Ny41IDIwNC42OSAwIDE0OS4zNC00NS45IDI1MS4yNS0xOTguOSAyNTEuMjUtMTQzLjEgMC0yMDEuNi05OC4zOS0yMDEuNi0yMzMuNjh6bTI0OS4zIDUuMjdjMC02OS40LS45LTExNS4wOC00Ny43LTExNS4wOC0yMi41IDAtNDEuNCAxNS44MS00OC42IDI4LjExdjExNS45NmMwIDQ4LjMyIDkuOSA5MS4zNiA1MC40IDkxLjM2czQ1LjktNDAuNDEgNDUuOS0xMjAuMzV6IiBmaWxsPSJ1cmwoI2MpIi8+PC9zdmc+Cg==",7:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgNDYxIDgzMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iMjMzLjUxIiB5MT0iNzc4Ljc1IiB4Mj0iMjMzLjUxIiB5Mj0iMTUuNzUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9Ii4yMiIgc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iLjMyIiBzdG9wLWNvbG9yPSIjZjZlMmQ3Ii8+PHN0b3Agb2Zmc2V0PSIuNDgiIHN0b3AtY29sb3I9IiNkZjlhNzUiLz48c3RvcCBvZmZzZXQ9Ii42IiBzdG9wLWNvbG9yPSIjZTA2MDFjIi8+PHN0b3Agb2Zmc2V0PSIuNjkiIHN0b3AtY29sb3I9IiNjNTQ1MDAiLz48c3RvcCBvZmZzZXQ9Ii43NCIgc3RvcC1jb2xvcj0iI2IxM2UwMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMjMzLjUxIiB5MT0iNzcwLjI1IiB4Mj0iMjMzLjUxIiB5Mj0iMjQuMjUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNkOGEyMGYiLz48c3RvcCBvZmZzZXQ9Ii4zMyIgc3RvcC1jb2xvcj0iI2JkOGMzZiIvPjxzdG9wIG9mZnNldD0iLjQ3IiBzdG9wLWNvbG9yPSIjYmQ3MzNmIi8+PHN0b3Agb2Zmc2V0PSIuNjUiIHN0b3AtY29sb3I9IiNhMTcyM2IiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM0NzI1MWMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYyIgeDE9IjIzMy41MSIgeTE9Ijc2MS43NSIgeDI9IjIzMy41MSIgeTI9IjMyLjc1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZDlhNDI2Ii8+PHN0b3Agb2Zmc2V0PSIuMzYiIHN0b3AtY29sb3I9IiNmZmZhYjgiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBkPSJNMjYuNDYgODMwLjc1bDE2My4xNS02MTQuN0gwVi0uMjVoNDYxLjAzdjE2MC44NmwtMTc0LjggNjcwLjE0SDI2LjQ2eiIvPjxwYXRoIGZpbGw9InVybCgjYSkiIGQ9Ik03OS4yOCA3NzguNzVsMTU4LjQtNjE0LjdINDMuNzFWMTUuNzVoMzc5LjZ2MTIyLjYyTDI2MS4xNCA3NzguNzVINzkuMjh6Ii8+PHBhdGggZmlsbD0idXJsKCNiKSIgZD0iTTkwLjI1IDc3MC4yNWwxNTguMzktNjE0LjdINTIuMjFWMjQuMjVoMzYyLjZ2MTEzLjA2TDI1NC41MyA3NzAuMjVIOTAuMjV6Ii8+PHBhdGggZD0iTTI1OS42MSAxNDcuMDVINjAuNzFWMzIuNzVoMzQ1LjZ2MTAzLjVsLTE1OC40IDYyNS41aC0xNDYuN2wxNTguNC02MTQuN3oiIGZpbGw9InVybCgjYykiLz48L3N2Zz4K",8:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgNTE2IDgzMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iMjYxLjM4IiB5MT0iNzc5Ljg4IiB4Mj0iMjYxLjM4IiB5Mj0iMTUuMzQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9Ii4yMiIgc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iLjMyIiBzdG9wLWNvbG9yPSIjZjZlMmQ3Ii8+PHN0b3Agb2Zmc2V0PSIuNDgiIHN0b3AtY29sb3I9IiNkZjlhNzUiLz48c3RvcCBvZmZzZXQ9Ii42IiBzdG9wLWNvbG9yPSIjZTA2MDFjIi8+PHN0b3Agb2Zmc2V0PSIuNjkiIHN0b3AtY29sb3I9IiNjNTQ1MDAiLz48c3RvcCBvZmZzZXQ9Ii43NCIgc3RvcC1jb2xvcj0iI2IxM2UwMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMjYxLjM4IiB5MT0iNzcxLjU5IiB4Mj0iMjYxLjM4IiB5Mj0iMjMuNjIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNkOGEyMGYiLz48c3RvcCBvZmZzZXQ9Ii4zMyIgc3RvcC1jb2xvcj0iI2JkOGMzZiIvPjxzdG9wIG9mZnNldD0iLjQ3IiBzdG9wLWNvbG9yPSIjYmQ3MzNmIi8+PHN0b3Agb2Zmc2V0PSIuNjUiIHN0b3AtY29sb3I9IiNhMTcyM2IiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM0NzI1MWMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYyIgeDE9IjI2MS4zOCIgeTE9Ijc2My4zMSIgeDI9IjI2MS4zOCIgeTI9IjMxLjkxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZDlhNDI2Ii8+PHN0b3Agb2Zmc2V0PSIuMzYiIHN0b3AtY29sb3I9IiNmZmZhYjgiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBkPSJNMjU4LjMzIDgzMC41NWMtNzguNDMgMC0xNDAuNzItMjEuNDUtMTg1LjE0LTYzLjc3QzIzLjk4IDcxOS45MS0uNjQgNjQ5LjU5LjAxIDU1Ny43NnYtLjQ1bC4wMS0uNDVjMS4xNi00NC40NCAxMC4yNi04NCAyNy4wNC0xMTcuNTggOS4xOC0xOC4zNiAyMC43LTM0LjczIDM0LjIzLTQ4Ljc4LTI0LjctMzIuMzYtNDYuOC04MC4wNi00OS4yMS0xNDguMjNsLS4wMi0uNTZjLTEuNzItNzMuODYgMjAuNjYtMTM1LjQyIDY0LjcyLTE3OC4wM0MxMjAuMDQgMjEuODYgMTgyLjgyLS4yNSAyNTguMzMtLjI1czEzOC4wNyAyMi4xIDE4MC45OCA2My45MmM0My43NyA0Mi42NSA2NS42OSAxMDQuMjggNjMuNDIgMTc4LjIzLTEuNjQgNjkuMzItMjIuOTEgMTE3LjAxLTQ3LjE2IDE0OS4wNiAxMy4zMiAxMy44OSAyNC43MiAzMC4wMSAzMy44OCA0OC4wNCAxNy4yIDMzLjg1IDI2LjYgNzQuNzUgMjcuMTkgMTE4LjI4IDEuOTEgOTEuMTktMjEuODcgMTYxLjMtNzAuNjYgMjA4LjQxLTQ0LjU4IDQzLjA0LTEwNy43MiA2NC44Ni0xODcuNjUgNjQuODZ6Ii8+PHBhdGggZD0iTTI2MS4zMyA3NzkuODhjLTY2Ljc1IDAtMTE5LjExLTE4LjE2LTE1NS42My01My45OS00MS4xNi00MC4zOC02MS43NC0xMDIuNzctNjEuMTctMTg1LjQ1di0uM2MxLjAxLTM5Ljc5IDguNzUtNzQuODYgMjMuMDEtMTA0LjI0IDEyLjI2LTI1LjI3IDI4LjkxLTQ1LjM2IDQ5LjY1LTU5Ljk4LTI2Ljk0LTI2LjAxLTU4LjI0LTczLjA0LTYwLjk1LTE1Mi4yOXYtLjE5QzU0Ljc3IDE1OC43IDczLjE1IDEwNS40IDEwOS4zOCA2OS4zMWMxNy43OS0xNy43MiAzOS43Ny0zMS4zIDY1LjMzLTQwLjM3IDI1LjQ2LTkuMDMgNTQuNi0xMy42MSA4Ni42Mi0xMy42MXM2MS4xNSA0LjU4IDg2LjUxIDEzLjYxYzI1LjQgOS4wNCA0Ny4yIDIyLjU5IDY0LjggNDAuMjUgMzUuOTcgMzYuMSA1My45NCA4OS40NiA1MS45OCAxNTQuMzItMS44NCA4MS4wMS0zMi4yNyAxMjcuNDYtNTguOTEgMTUyLjcyIDIwLjQ4IDE0LjYzIDM3LjAzIDM0LjU4IDQ5LjM2IDU5LjU3IDE0LjU4IDI5LjU2IDIyLjU1IDY1LjY4IDIzLjA1IDEwNC40NyAxLjY4IDgyLjAxLTE4LjEzIDE0NC4xNS01OC44OSAxODQuNjgtMzYuNjUgMzYuNDQtODkuNzggNTQuOTItMTU3LjkgNTQuOTJ6bTAtMzIxLjg1Yy0xNi45MyAwLTIzIDExLjEyLTI3LjA1IDIzLjEzLTYuMzkgMTguOTgtNy4yNSA0Ni40NS03LjI1IDcwLjgxIDAgNjAuMTEgMTAuNTggODYuOTIgMzQuMyA4Ni45MnMzNC4zLTI1Ljk5IDM0LjMtODYuOTJ2LS4yN2MuMzgtMjIuODUgMS4xNy03MC4zOS0xNS42LTg3LTIuODktMi44Ni03Ljk3LTYuNjctMTguNy02LjY3em0wLTI5OS45M2MtNi45OSAwLTI5LjggNC4zNy0yOS44IDYwLjYxIDAgNzguNjggMTguNjcgOTAuNDMgMjkuOCA5MC40MyAzLjQgMCAxMS4zNiAwIDE4LjIzLTE2LjQzIDYuNDgtMTUuNSA5Ljc3LTQwLjEgOS43Ny03My4xMiAwLTU3LjA1LTIxLjQzLTYxLjQ5LTI4LTYxLjQ5eiIgZmlsbD0idXJsKCNhKSIvPjxwYXRoIGQ9Ik0yNjEuMzMgNzcxLjU5Yy02NC40IDAtMTE0Ljc0LTE3LjM0LTE0OS42LTUxLjU0LTM5LjUtMzguNzUtNTkuMjUtOTkuMTYtNTguNy0xNzkuNTV2LS4xNWMuOTgtMzguNjMgOC40NS03Mi41OCAyMi4xOS0xMDAuOSAxMy4zLTI3LjQxIDMxLjk4LTQ4LjM2IDU1LjY0LTYyLjQ0LTI3LjA5LTIzLjAxLTYzLjI0LTY5LjI5LTY2LjEzLTE1My42NC0xLjQyLTYyLjU2IDE2LjEyLTExMy43OSA1MC43Mi0xNDguMjUgMTYuODktMTYuODMgMzcuOC0yOS43NCA2Mi4xNi0zOC4zOCAyNC41Mi04LjcgNTIuNjktMTMuMTEgODMuNzItMTMuMTEgNjIuNDEgMCAxMTEuMjcgMTcuMjggMTQ1LjIyIDUxLjM1IDM0LjM0IDM0LjQ3IDUxLjQ4IDg1Ljc3IDQ5LjU4IDE0OC4zNi0xLjk1IDg2LjQzLTM3LjI5IDEzMS43OS02NC4xNCAxNTMuODcgMjMuNDEgMTQuMTQgNDIuMDIgMzUuMDEgNTUuNDMgNjIuMiAxNC4wNiAyOC41IDIxLjc0IDYzLjQ0IDIyLjIxIDEwMS4wNSAxLjY1IDc5LjY3LTE3LjM1IDEzOS44Mi01Ni40NiAxNzguNzEtMzQuOTkgMzQuNzktODYuMDggNTIuNDMtMTUxLjgzIDUyLjQzem0wLTMyMS44NWMtMTcuNTggMC0yOC40MSA4Ljg5LTM1LjEyIDI4LjgzLTYuNzYgMjAuMDktNy42OCA0OC4zNy03LjY4IDczLjM5IDAgNjUuODQgMTMuMiA5NS4yIDQyLjggOTUuMiAzNy43MSAwIDQyLjgtNDguMTMgNDIuOC05NS4ydi0uMTNjLjY0LTM4LjM2LTEuMTEtNzYuMTctMTguMDQtOTIuOTQtNi4yMS02LjE1LTE0LjMxLTkuMTQtMjQuNzYtOS4xNHptMC0yOTkuOTNjLTExLjgzIDAtMjAuODIgNS41NS0yNy40OSAxNi45Ny03LjA3IDEyLjExLTEwLjgxIDMwLjA3LTEwLjgxIDUxLjkyIDAgNjUuNSAxMi44OSA5OC43MSAzOC4zIDk4LjcxczM2LjUtMzIuOTIgMzYuNS05Ny44My0yNS41My02OS43Ny0zNi41LTY5Ljc3eiIgZmlsbD0idXJsKCNiKSIvPjxwYXRoIGQ9Ik02MS41NCA1NDAuNTZjMS44LTcxLjA0IDI3LTEzNS4wNiA4NC42LTE2Mi4yNC0zNi45LTI2LjMxLTcwLjItNzYuMy03Mi45LTE1NS4yMy0yLjctMTE5LjI3IDYzLjktMTkxLjE4IDE4OC4xLTE5MS4xOHMxODkuOSA3Mi43OSAxODYuMyAxOTEuMThjLTEuOCA3OS44MS0zMy4zIDEyOS43OS03MS4xIDE1NS4yMyA1Ni43IDI3LjE5IDgzLjcgOTEuMjEgODQuNiAxNjIuMjQgMi43IDEzMC42Ny01MC40IDIyMi43NS0xOTkuOCAyMjIuNzVzLTIwMC43LTkyLjA4LTE5OS44LTIyMi43NXptMjUxLjEgMTEuNGMuOS01NC4zNy0yLjctMTEwLjUtNTEuMy0xMTAuNXMtNTEuMyA1NS4yNS01MS4zIDExMC41YzAgNDEuMjIgMy42IDEwMy40OCA1MS4zIDEwMy40OHM1MS4zLTYzLjE0IDUxLjMtMTAzLjQ4em0tNi4zLTMzMi4zOGMwLTQ3LjM2LTE1LjMtNzguMDUtNDUtNzguMDVzLTQ2LjggMzAuNjktNDYuOCA3Ny4xN2MwIDcxLjA0IDE1LjMgMTA2Ljk5IDQ2LjggMTA2Ljk5czQ1LTM1Ljk2IDQ1LTEwNi4xMXoiIGZpbGw9InVybCgjYykiLz48L3N2Zz4K",9:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgNTE3IDgzMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iMjYxLjc5IiB5MT0iNzc5LjQ1IiB4Mj0iMjYxLjc5IiB5Mj0iMTUuNCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iLjIyIiBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIuMzIiIHN0b3AtY29sb3I9IiNmNmUyZDciLz48c3RvcCBvZmZzZXQ9Ii40OCIgc3RvcC1jb2xvcj0iI2RmOWE3NSIvPjxzdG9wIG9mZnNldD0iLjYiIHN0b3AtY29sb3I9IiNlMDYwMWMiLz48c3RvcCBvZmZzZXQ9Ii42OSIgc3RvcC1jb2xvcj0iI2M1NDUwMCIvPjxzdG9wIG9mZnNldD0iLjc0IiBzdG9wLWNvbG9yPSIjYjEzZTAwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgxPSIyNjEuNzkiIHkxPSI3NzEuMTYiIHgyPSIyNjEuNzkiIHkyPSIyMy42OCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2Q4YTIwZiIvPjxzdG9wIG9mZnNldD0iLjMzIiBzdG9wLWNvbG9yPSIjYmQ4YzNmIi8+PHN0b3Agb2Zmc2V0PSIuNDciIHN0b3AtY29sb3I9IiNiZDczM2YiLz48c3RvcCBvZmZzZXQ9Ii42NSIgc3RvcC1jb2xvcj0iI2ExNzIzYiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzQ3MjUxYyIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjIiB4MT0iMjYxLjc5IiB5MT0iNzYyLjg3IiB4Mj0iMjYxLjc5IiB5Mj0iMzEuOTciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNkOWE0MjYiLz48c3RvcCBvZmZzZXQ9Ii4zNiIgc3RvcC1jb2xvcj0iI2ZmZmFiOCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxwYXRoIGQ9Ik0yNTguMzIgODMwLjE0Yy04Ni4xIDAtMTQ3Ljc5LTIwLjY5LTE4OC42LTYzLjI0LTE5Ljk2LTIwLjgxLTM0LjYtNDYuOTYtNDMuNTEtNzcuNzEtNy42NS0yNi40LTExLjM3LTU2LjU1LTExLjM3LTkyLjE1di02MS4xM2gxMDYuMTVjLTMuMzEtMS41NC02LjU2LTMuMTgtOS43Ni00LjkxLTI3LjMxLTE0Ljc5LTUwLjEyLTM2LjE3LTY3Ljc5LTYzLjU1QzE0LjYxIDQyMi44IDAgMzYzLjY2IDAgMjkxLjY5YzAtODkuNzIgMTguNDUtMTU3LjE0IDU2LjQxLTIwNi4xMUMxMDAuNTMgMjguNjYgMTY4LjQ3LS4yIDI1OC4zMi0uMmM0My4wMyAwIDgxLjcgNi43NCAxMTQuOTMgMjAuMDMgMzMuOCAxMy41MiA2Mi4zIDMzLjg0IDg0LjczIDYwLjM5IDM5LjU0IDQ2LjgyIDU5LjU5IDExMi4zNSA1OS41OSAxOTQuOHYyNjQuOTljMCA4OS4xOC0xNS45OSAxNTIuODItNTAuMzIgMjAwLjI5LTQzLjEyIDU5LjYyLTExMy40MiA4OS44NS0yMDguOTMgODkuODV6Ii8+PHBhdGggZD0iTTI2MS4zNCA3NzkuNDVjLTczLjQ2IDAtMTI1LjEyLTE3LjEzLTE1Ny45NC01Mi4zOC0zMC4zMy0zMi41OC00NC40Ni03OS40Ny00NC40Ni0xNDcuNTh2LTI3Ljk4aDE3NC40djE2LjU3YzAgMjYuMTcgMS4wMiA0NS44NCA1Ljk4IDU2LjgyIDIuNTggNS43MSA2LjI4IDEwLjg0IDIyLjkyIDEwLjg0IDE0LjMyIDAgMTguMjktNC42MyAyMi4zLTE3LjY4IDYuMjItMjAuMjYgNy41LTU3LjQzIDcuNS0xMDcuMDF2LTI1LjQ3Yy0xOC45NSAxMC42OS00My4zNiAxNy4wOS03MS4zMyAxOC4zM2gtLjM4Yy0xLjYzLjA1LTMuMjguMDctNC44OC4wN2gtLjAyYy0zMC4xMyAwLTU3LjA1LTYuNS04MC4wMi0xOS4zMS0yMS40OS0xMS45OS0zOS41NS0yOS41LTUzLjY5LTUyLjA2LTI0LjMyLTM4LjgyLTM3LjE4LTkzLjYyLTM3LjE4LTE1OC40NyAwLTgyLjQxIDE1Ljc2LTE0My40MiA0OC4xOC0xODYuNUMxMjguOCAzOS43IDE4NS41MyAxNS40IDI2MS4zNCAxNS40czEzMC4zIDIyLjg3IDE2Ny4yOSA2Ny45N2MzMy40NSA0MC43OSA1MC40MSA5OS4zNyA1MC40MSAxNzQuMXYyNjQuOTljMCA4Mi4xOC0xMy42MyAxMzkuODctNDIuOTEgMTgxLjU2LTE3LjI2IDI0LjU4LTQwLjI4IDQzLjM4LTY4LjQyIDU1Ljg3LTI5LjIzIDEyLjk4LTY1LjAyIDE5LjU2LTEwNi4zNyAxOS41NnptMC02MjIuOThjLTEwLjMyIDAtMTYuODcgMy0yMS45IDE4LjgyLTYuMTUgMTkuMzYtNyA1Mi4yMS03IDg0LjgxIDAgMjkuNjIgMCA2MC4yNiA1LjYgNzguNzggNC40MyAxNC42NSAxMC43NyAxOS41OSAyNS4wOSAxOS41OSAxMC45OSAwIDIwLjQ4LTUuNDUgMjguOS0xNi42M3YtMTEwLjdjMC03NC42OC0yMC43My03NC42OC0zMC43LTc0LjY4eiIgZmlsbD0idXJsKCNhKSIvPjxwYXRoIGQ9Ik0yNjEuMzQgNzcxLjE2Yy03MC45MyAwLTEyMC41My0xNi4yNC0xNTEuNjQtNDkuNjYtMjguODMtMzAuOTYtNDIuMjYtNzYuMDktNDIuMjYtMTQyLjAxVjU1OS44aDE1Ny40djguMjljMCAyNy45OSAxLjEyIDQ3LjgyIDYuNyA2MC4xNiAzLjcxIDguMiA5Ljk5IDE1Ljc5IDMwLjcgMTUuNzkgMjkuNjcgMCAzOC4zLTE3LjQ1IDM4LjMtMTMyLjk4di00MS4yNWMtMTguNjggMTUuMTgtNDYuNjYgMjQuMzUtODAuMjEgMjUuODRoLS4xOWMtMS41Ny4wNC0zLjE0LjA2LTQuNjkuMDZoLS4wMmMtMjguNjMgMC01NC4xMy02LjEzLTc1LjgtMTguMjEtMjAuMjMtMTEuMjgtMzcuMjctMjcuODMtNTAuNjYtNDkuMTktMjMuNTEtMzcuNTItMzUuOTMtOTAuODItMzUuOTMtMTU0LjE2IDAtODAuNTkgMTUuMjItMTM5Ljk5IDQ2LjUzLTE4MS42IDE2Ljk1LTIyLjUyIDM4Ljg4LTM5LjczIDY1LjItNTEuMTYgMjcuMDUtMTEuNzUgNTkuNTQtMTcuNyA5Ni41Ny0xNy43IDcxLjMxIDAgMTI1LjM2IDIxLjgyIDE2MC42NSA2NC44NiAzMi4yMSAzOS4yOSA0OC41NSA5Ni4xMiA0OC41NSAxNjguOTN2MjY0Ljk5YzAgODAuNDMtMTMuMTYgMTM2LjYzLTQxLjQyIDE3Ni44OC0xNi4zNyAyMy4zMS0zOC4yMiA0MS4xNS02NC45MyA1My4wMS0yOC4xMiAxMi40OC02Mi43MiAxOC44Mi0xMDIuODUgMTguODJ6bTAtNjIyLjk4Yy0yOS4wMSAwLTM3LjQgMjUuMS0zNy40IDExMS45MiAwIDMwLjIxIDAgNjEuNDYgNS45NSA4MS4xMiA1LjQ5IDE4LjE0IDE1LjEyIDI1LjU0IDMzLjI1IDI1LjU0IDE0LjQ2IDAgMjcuMDMtNy41IDM3LjQtMjIuMjlWMjMxLjE0YzAtMjcuOTQtMi41Ni00Ny4yMS04LjA2LTYwLjY1LTYuMjItMTUuMjItMTYuMTItMjIuMzEtMzEuMTQtMjIuMzF6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0iTTc1Ljk0IDU3OS40OXYtMTEuNDFoMTQwLjRjMCA1Ny4wMyA0LjUgODQuMjMgNDUuOSA4NC4yM3M0Ni44LTMxLjU5IDQ2LjgtMTQxLjI3di02My4xOGMtMTUuMyAyNC41Ny00OS41IDM3LjczLTg5LjEgMzkuNDgtMTE2LjEgMi42My0xNTguNC05Ni41Mi0xNTguNC0yMTMuMjIgMC0xNDguMjkgNTMuMS0yNDIuMTcgMTk5LjgtMjQyLjE3czIwMC43IDg5LjUgMjAwLjcgMjI1LjV2MjY0Ljk5YzAgMTM4LjY0LTM5LjYgMjQwLjQyLTIwMC43IDI0MC40Mi0xNDAuNCAwLTE4NS40LTY0LjA1LTE4NS40LTE4My4zOHptMjMzLjEtMjMyLjUyVjIzMS4xNWMwLTQ4LjI2LTcuMi05MS4yNS00Ny43LTkxLjI1cy00NS45IDQxLjI0LTQ1LjkgMTIwLjIxYzAgNjkuMzIuOSAxMTQuOTQgNDcuNyAxMTQuOTQgMjMuNCAwIDM3LjgtMTUuNzkgNDUuOS0yOC4wOHoiIGZpbGw9InVybCgjYykiLz48L3N2Zz4K",x:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgNjEwIDgzMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIj48cGF0aCBkPSJNMzcxLjAxIDgzMS4wNzRhNC44ODggNC44ODggMCAwMS00LjAzLTIuMTIxbC01NS42MDktODFjLTEuOTIzLTIuODAxLTYuMDQ4LTIuODM0LTguMDE2LS4wNjJsLTU3LjU4MyA4MS4xMjRhNC44ODcgNC44ODcgMCAwMS0zLjk4NiAyLjA1OUg1LjM0NmMtNC4wMDQgMC02LjMxLTQuNTUtMy45NDItNy43NzlMMTcyLjcyIDU4OS42NjdhNC44ODcgNC44ODcgMCAwMC4wMjctNS43NDRMNy4yMjQgMzUzLjc0MkM0LjkgMzUwLjUwOCA3LjIxIDM0NiAxMS4xOTMgMzQ2aDIzOS4yMzljMS41OTkgMCAzLjA5Ni43ODIgNC4wMSAyLjA5M2w1Mi44NjcgNzUuODQzYzEuOTMxIDIuNzY5IDYuMDIxIDIuNzk0IDcuOTg2LjA0OGw1NC4zMjktNzUuOTRhNC44ODYgNC44ODYgMCAwMTMuOTc1LTIuMDQ0aDIyNS41ODdjMy45OTkgMCA2LjMwNiA0LjU0IDMuOTQ4IDcuNzdMNDM2Ljk5NyA1ODEuMzQ0YTQuODg4IDQuODg4IDAgMDAtLjAwOCA1Ljc1NGwxNzEuNTE5IDIzNi4yMTZjMi4zNDYgMy4yMzEuMDM4IDcuNzYtMy45NTYgNy43NkgzNzEuMDF6IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMTUuMDU1IDU2OC45MjlhMi40MjQgMi40MjQgMCAwMS0uMDIgMi45MUw2NC4yNTIgNzY5Ljg1NWMtMS4yMTUgMS41OTYtLjA3NyAzLjg5MyAxLjkyOCAzLjg5M2gxNzQuNjc0Yy43NzQgMCAxLjUwMS0uMzcgMS45NTctLjk5NGw2MS4yNzMtODMuODdhMi40MjQgMi40MjQgMCAwMTMuOTU2LjA1OGw1Ny40NzggODMuNzUzYTIuNDIzIDIuNDIzIDAgMDAxLjk5OCAxLjA1M2gxODIuMjI3YzEuOTk0IDAgMy4xMzUtMi4yNzQgMS45NDMtMy44NzNMNDAwLjg0IDU2Ny41MmEyLjQyNiAyLjQyNiAwIDAxLjAxLTIuOTExbDE0Ni4xODItMTkzLjI3OGMxLjIwOC0xLjU5Ny4wNjktMy44ODYtMS45MzMtMy44ODZoLTE3MS4xMWMtLjc3NSAwLTEuNTAzLjM3MS0xLjk2Ljk5N2wtNTguNzg1IDgwLjcyN2EyLjQyNSAyLjQyNSAwIDAxLTMuOTQ0LS4wMzVsLTU2LjU4Ni04MC42NTdhMi40MjUgMi40MjUgMCAwMC0xLjk4NS0xLjAzMkg3MC43NzljLTEuOTkgMC0zLjEzMyAyLjI2Ni0xLjk1IDMuODY2bDE0Ni4yMjYgMTk3LjYxOHpNOTEuNDMxIDc1OC44MTVsLjAwMi0uMDAxIDE0My4zNzUtMTg4LjI4N3YtLjAwMmMtLjAwMS0uMDAyLS4wMDMtLjAwMi0uMDAzIDBMOTEuNDMgNzU4LjgxMmMtLjAwMS4wMDEgMCAuMDAzLjAwMS4wMDN6bTQuMTY3LTM3Ni40MzNsLjAwMy4wMDJoMTQ3LjM2NGMuNzkgMCAxLjUzMS4zODUgMS45ODQgMS4wMzFsNjQuMTI1IDkxLjQwMmEyLjQyNCAyLjQyNCAwIDAwMy45NDQuMDM1bDY2LjYxLTkxLjQ3MWEyLjQyMyAyLjQyMyAwIDAxMS45Ni0uOTk3aDEzOC4zNjFhLjAwMi4wMDIgMCAwMC4wMDItLjAwMmMuMDAyLS4wMDIuMDAxLS4wMDUtLjAwMi0uMDA1SDM4MS41ODdjLS43NzUgMC0xLjUwMy4zNzEtMS45NTkuOTk3bC02Ni42MSA5MS40NzJhMi40MjQgMi40MjQgMCAwMS0zLjk0NC0uMDM1bC02NC4xMjUtOTEuNDAyYTIuNDIzIDIuNDIzIDAgMDAtMS45ODQtMS4wMzJIOTUuNjAxYy0uMDAzIDAtLjAwNC4wMDMtLjAwMy4wMDV6bTI4NS40ODUgMTgzLjYxOWgtLjAwM3YuMDAybDE0My43MzIgMTkyLjgxMS4wMDIuMDAxYy4wMDEgMCAuMDAyLS4wMDEuMDAxLS4wMDNMMzgxLjA4MyA1NjYuMDAxeiIgZmlsbD0idXJsKCNwYWludDApIi8+PHBhdGggZD0iTTkxLjQyOCA3NTguODE2bDE3Mi45MzktMjI3LjExMy0yLjc3OCA3NS4wMUw5NS41OTUgMzgyLjM3OGgxNDguNjMxbDkzLjA2NyAxMzIuNjU2LTU1LjU2MiAyLjc3OCA5OC42MjQtMTM1LjQzNGgxMzkuNjAxTDM1My45NjIgNjAxLjg1MVY1MjkuNjJsMTcwLjg1NiAyMjkuMTk2SDM3NC4xMDRsLTk3LjIzNS0xNDEuNjg1IDU1LjU2MyA3LjY0LTk3LjkzIDEzNC4wNDVIOTEuNDI4eiIgZmlsbD0idXJsKCNwYWludDEpIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03OC44IDc2Ni4yODJjLTEuMDAzIDAtMS41NzItMS4xNDgtLjk2NC0xLjk0NkwyMjQuOTE4IDU3MS4xOGExLjIxIDEuMjEgMCAwMC4wMS0xLjQ1NWwtMTQyLjcyLTE5Mi44OGMtLjU5MS0uOC0uMDItMS45MzMuOTc1LTEuOTMzaDE2NC4yOWMuMzk2IDAgLjc2Ni4xOTMuOTkzLjUxNmw2MS42OTEgODcuOTM0Yy40NzguNjggMS40ODMuNjg5IDEuOTcyLjAxN2w2NC4wNTktODcuOTY4YTEuMjEgMS4yMSAwIDAxLjk4LS40OTloMTU1LjM1NmMxLjAwMSAwIDEuNTcgMS4xNDUuOTY2IDEuOTQzTDM5MC45NjEgNTY1LjMwNGExLjIxMiAxLjIxMiAwIDAwLS4wMDUgMS40NTVsMTQ3LjI5MiAxOTcuNTg3Yy41OTYuOC4wMjYgMS45MzYtLjk3MiAxLjkzNmgtMTY2LjQ3YTEuMjEgMS4yMSAwIDAxLS45OTktLjUyNmwtNjIuNTQ4LTkxLjE0MWExLjIxMiAxLjIxMiAwIDAwLTEuOTc4LS4wMjlsLTY2LjYyOCA5MS4xOTlhMS4yMSAxLjIxIDAgMDEtLjk3OS40OTdINzguOHptMjI2LjY3MS0xMDQuNjE0YTEuMjEyIDEuMjEyIDAgMDExLjk3OC4wMjlsNjYuMjg5IDk2LjU5M2MuMjI2LjMyOS42LjUyNi45OTkuNTI2aDE0Ny42NjFjLjk5NyAwIDEuNTY4LTEuMTM3Ljk3Mi0xLjkzNkwzODEuNjE5IDU2Ni43MjdhMS4yMTQgMS4yMTQgMCAwMS4wMDUtMS40NTZsMTM2Ljg1OC0xODAuOTVjLjYwNC0uNzk4LjAzNC0xLjk0My0uOTY3LTEuOTQzSDM4MC45NjdjLS4zODggMC0uNzUyLjE4Ni0uOTguNDk5bC02Ny45NzEgOTMuMzQxYTEuMjEyIDEuMjEyIDAgMDEtMS45NzItLjAxOGwtNjUuNDYxLTkzLjMwNmExLjIxMyAxLjIxMyAwIDAwLS45OTItLjUxNkg5Ny45OTVhMS4yMTIgMS4yMTIgMCAwMC0uOTc0IDEuOTMzbDEzNy4yNDIgMTg1LjQ3OGExLjIxMiAxLjIxMiAwIDAxLS4wMSAxLjQ1Nkw5Mi45MDYgNzU2Ljg3Yy0uNjA4Ljc5OC0uMDM5IDEuOTQ2Ljk2NCAxLjk0NmgxNDAuMDEyYy4zODcgMCAuNzUxLS4xODQuOTc5LS40OTdsNzAuNjEtOTYuNjUxeiIgZmlsbD0idXJsKCNwYWludDIpIi8+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJwYWludDAiIHgxPSIzMDcuOTMxIiB5MT0iNzczLjc0OCIgeDI9IjMwNy45MzEiIHkyPSIzNjcuNDQ1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIuMjIiIHN0b3AtY29sb3I9IiNmZmYiLz48c3RvcCBvZmZzZXQ9Ii4zMiIgc3RvcC1jb2xvcj0iI0Y2RTJENyIvPjxzdG9wIG9mZnNldD0iLjQ4IiBzdG9wLWNvbG9yPSIjREY5QTc1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iI0UwNjAxQyIvPjxzdG9wIG9mZnNldD0iLjY5IiBzdG9wLWNvbG9yPSIjQzU0NTAwIi8+PHN0b3Agb2Zmc2V0PSIuNzQiIHN0b3AtY29sb3I9IiNCMTNFMDAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxIiB4MT0iMzA4LjAzNiIgeTE9IjgwMy43NTgiIHgyPSIzMDguMDM2IiB5Mj0iMjIwLjU1MiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiNDRjhFMDAiLz48c3RvcCBvZmZzZXQ9Ii4zNTkiIHN0b3AtY29sb3I9IiNGRkZBQjgiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQyIiB4MT0iMzA4LjAyMyIgeTE9Ijc2Ni4yODIiIHgyPSIzMDguMDIzIiB5Mj0iMzc0LjkxMiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiNEOEEyMEYiLz48c3RvcCBvZmZzZXQ9Ii4zMyIgc3RvcC1jb2xvcj0iI0JEOEMzRiIvPjxzdG9wIG9mZnNldD0iLjQ3IiBzdG9wLWNvbG9yPSIjQkQ3MzNGIi8+PHN0b3Agb2Zmc2V0PSIuNjUiIHN0b3AtY29sb3I9IiNBMTcyM0IiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM0NzI1MUMiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48L3N2Zz4K"},x={0:U.GB(513/831,3),1:U.GB(362/831,3),2:U.GB(519/831,3),3:U.GB(517/831,3),4:U.GB(550/831,3),5:U.GB(506/831,3),6:U.GB(517/831,3),7:U.GB(461/831,3),8:U.GB(516/831,3),9:U.GB(517/831,3),x:U.GB(610/831,3)}},755585:(W,y,M)=>{var U;M.d(y,{u:()=>U}),function(W){W["Low"]="Low",W["Medium"]="Medium",W["High"]="High"}(U||(U={}))},898129:(W,y,M)=>{M.d(y,{f:()=>E});var U=M(64922),i=M(699695),x=M(419252);const n="gradientWrapper--2a838",k={[x.K.BatteryCharger]:"bc--94e80",[x.K.HotSpot]:"hs--bd3c2",[x.K.MonsterMash]:"mm--4ae5d",[x.K.StormBonus]:"sb--9ef7c",[x.K.Fireball]:"fb--31b52"},g=W=>{const{bonusGame:y,className:M}=W;return U.jsx("div",{className:i.A(n,k[y],M)})};var u=M(669432),e=M(397558),l=M(377810);const G="background--b583a",Y="stormBonus--8384f",c=({selected:W})=>{const y=l.useMemo((()=>`${String(Math.random())}-statistics-bc-background`),[]);return U.jsxs("svg",{id:`${y}`,className:G,width:"100%",viewBox:"0 0 48 47",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("path",{d:"M22.6079 42.1775C20.486 42.1475 18.4791 42.0406 16.804 41.8684C15.2962 41.7155 14.0349 41.5112 13.1563 41.2775C12.6062 41.1313 11.1439 40.7428 11.1439 39.6726C11.1439 39.5524 11.168 39.4309 11.2148 39.3074V36.8699C11.2148 36.5521 11.3635 36.2623 11.6568 36.0046V12.2478C11.6148 12.2138 11.5763 12.1771 11.5405 12.1357L11.2231 11.7805C11.1652 11.7157 11.1081 11.6109 11.0744 11.5195C11.0434 11.4554 11 11.3479 11 11.2084V9.02522C11 8.02311 12.094 7.23465 14.3405 6.62177V6.38676C14.3405 4.06676 22.8785 4 23.852 4C23.9477 4 33.3628 4.02737 33.3628 6.38676V6.67384C35.6093 7.29674 36.7034 8.06784 36.7034 9.02455V11.2077C36.7034 11.4126 36.6262 11.6136 36.4858 11.7738L36.1643 12.137C36.1285 12.1784 36.0885 12.2151 36.0472 12.2485V36.0026C36.3405 36.2603 36.4892 36.5501 36.4892 36.8692V39.3074C36.5361 39.4309 36.5602 39.5524 36.5602 39.6719C36.5602 40.7428 35.0971 41.1313 34.547 41.2769C33.6706 41.5105 32.4086 41.7142 30.898 41.8677C29.225 42.04 27.218 42.1468 25.0954 42.1768L23.8534 42.1862L22.61 42.1768L22.6079 42.1775Z",fill:`url(#${y}-paint0)`}),U.jsx("path",{d:"M32.6383 7.17891V6.3871C32.6383 5.43841 27.9751 4.66797 23.8504 4.66797C19.7883 4.66797 15.0625 5.35295 15.0625 6.3871V7.1295C13.0721 7.61019 11.7227 8.25779 11.7227 9.02556V9.68651V11.208C11.7227 11.2347 11.7412 11.2568 11.7509 11.2815C11.7605 11.3062 11.7612 11.3342 11.7791 11.3549L11.9147 11.5071L12.0999 11.7154C12.1488 11.7702 12.2211 11.8009 12.2962 11.8009C12.3161 11.8009 12.3361 11.7989 12.3561 11.7942C12.3864 11.7875 12.4139 11.7755 12.4387 11.7602C12.3967 11.853 12.3843 11.9144 12.3808 11.9351C12.3795 11.9458 12.3781 11.9571 12.3781 11.9678V36.1772C12.3781 36.2233 12.3919 36.2647 12.4111 36.3041C12.1075 36.4837 11.9361 36.6733 11.9361 36.8696V39.1114V39.4406C11.8913 39.522 11.8659 39.6008 11.8659 39.6716C11.8659 40.0595 12.3388 40.3652 13.3551 40.6356C14.1957 40.8586 15.4157 41.0556 16.8829 41.2044C18.5332 41.374 20.5167 41.4802 22.6173 41.5096C22.6173 41.5096 22.8011 41.5116 22.8727 41.5129L23.0111 41.5142L23.1832 41.5156C23.2493 41.5156 23.5116 41.5176 23.5116 41.5176C23.6239 41.5176 23.7368 41.5176 23.8504 41.5176C23.964 41.5176 24.0762 41.5176 24.1884 41.5176C24.1884 41.5176 24.4507 41.5162 24.5168 41.5156L24.689 41.5142L24.8274 41.5129C24.899 41.5122 25.0828 41.5096 25.0828 41.5096C27.1834 41.4802 29.1662 41.374 30.8165 41.2044C32.2844 41.0556 33.5044 40.8593 34.345 40.6356C35.3612 40.3652 35.8342 40.0595 35.8342 39.6716C35.8342 39.6008 35.8087 39.522 35.764 39.4406V36.8682C35.764 36.6713 35.5912 36.4803 35.2848 36.3001C35.2993 36.2654 35.322 36.2346 35.322 36.1959V11.9678C35.322 11.9571 35.3213 11.9458 35.3192 11.9351C35.3165 11.915 35.3048 11.857 35.2669 11.7688C35.2869 11.7802 35.3089 11.7902 35.333 11.7969C35.355 11.8029 35.3778 11.8056 35.4005 11.8056C35.4769 11.8056 35.5519 11.7715 35.6022 11.7154L35.9217 11.3542C35.9582 11.3128 35.9781 11.2614 35.9781 11.208V10.3214V9.02556C35.9781 8.31788 34.6328 7.67362 32.6376 7.17891H32.6383Z",fill:`url(#${y}-paint1)`}),U.jsx("path",{d:"M23.8511 34.834C17.2712 34.834 11.9375 35.7453 11.9375 36.8696V39.5614C11.9375 38.4372 17.2712 37.6847 23.8511 37.6847C30.431 37.6847 35.7647 38.4372 35.7647 39.5614V36.8696C35.7647 35.7453 30.431 34.834 23.8511 34.834Z",fill:`url(#${y}-paint2)`}),U.jsx("path",{d:"M32.6383 7.1789C30.2575 6.58938 26.9472 6.21484 23.8504 6.21484C20.788 6.21484 17.4591 6.55066 15.0625 7.13016C13.0721 7.61085 11.7227 8.25845 11.7227 9.02622V11.2087C11.7227 11.2628 11.7426 11.3142 11.7798 11.3556L12.0635 11.6747C12.1922 11.2895 13.4294 8.88868 24.2862 8.88868C34.4056 8.88868 35.5292 11.3142 35.6401 11.6734L35.9217 11.3549C35.9582 11.3135 35.9781 11.2621 35.9781 11.2087V9.02622C35.9781 8.31853 34.6328 7.67427 32.6376 7.17956L32.6383 7.1789Z",fill:`url(#${y}-paint3)`}),U.jsx("path",{d:"M12.1178 40.0762C12.5405 39.3365 17.6243 38.7523 23.8503 38.7523C30.0763 38.7523 35.1608 39.3365 35.5828 40.0769C35.5939 40.0749 35.6069 40.0729 35.618 40.0709C35.6221 40.0522 35.6248 40.0335 35.6248 40.0148C35.6248 39.0554 30.3538 38.2783 23.851 38.2783C17.3482 38.2783 12.0771 39.0554 12.0771 40.0148C12.0771 40.0335 12.0799 40.0522 12.084 40.0709C12.0944 40.0729 12.1074 40.0749 12.1185 40.0769L12.1178 40.0762Z",fill:`url(#${y}-paint4)`}),U.jsx("path",{d:"M23.8504 39.4395C21.0786 39.4395 18.832 39.818 18.832 40.2847C18.832 40.752 21.0793 41.1305 23.8504 41.1305C26.6216 41.1305 28.8688 40.752 28.8688 40.2847C28.8688 39.8173 26.6216 39.4395 23.8504 39.4395Z",fill:`url(#${y}-paint5)`}),U.jsx("path",{d:"M30.1682 33.9149C26.4269 33.5944 21.2791 33.5937 17.5379 33.9135C16.0191 34.0424 14.7949 33.1805 14.7949 31.914C14.7949 25.9301 14.7949 19.2792 14.7949 13.2952C14.7949 12.0308 16.0191 10.8397 17.5379 10.7109C21.2791 10.3917 26.4269 10.3917 30.1682 10.7122C31.687 10.841 32.9111 12.0321 32.9111 13.2972C32.9111 19.2812 32.9111 25.9321 32.9111 31.916C32.9111 33.1825 31.687 34.0444 30.1682 33.9149Z",fill:`url(#${y}-paint6)`}),U.jsx("path",{d:"M30.466 33.2608C30.3882 33.2608 30.3083 33.2568 30.2271 33.2501C28.3427 33.0892 25.049 33.0071 23.1549 33.0071C21.2609 33.0071 19.3545 33.0885 17.4763 33.2487C17.3971 33.2554 17.3179 33.2588 17.2394 33.2588C16.7272 33.2588 16.2659 33.1139 15.941 32.8515C15.7317 32.6826 15.4824 32.3822 15.4824 31.9142V13.2954C15.4824 12.3521 16.4504 11.4735 17.5961 11.376C19.435 11.2191 21.305 11.1396 23.1542 11.1396C25.0035 11.1396 28.2615 11.2198 30.1066 11.3773C31.2529 11.4748 32.221 12.3541 32.221 13.2974V31.9162C32.221 32.6953 31.4829 33.2608 30.4646 33.2608H30.466Z",fill:`url(#${y}-paint7)`}),W&&U.jsx("path",{d:"M38.372 43.5556C36.3255 44.5907 32.0593 46 24 46C15.9407 46 11.6745 44.5907 9.62798 43.5556C8.50316 42.9867 8 41.7796 8 40.5191V36.6V35.55V13.45V12.4V7.02371C8 5.94368 8.36061 4.88795 9.25026 4.2756C11.1263 2.98431 15.4072 1 24 1C32.5928 1 36.8737 2.9843 38.7497 4.2756C39.6394 4.88795 40 5.94368 40 7.02371V12.4V13.45V35.55V36.6V40.5191C40 41.7796 39.4968 42.9867 38.372 43.5556Z",stroke:`url(#${y}-paint8)`,strokeWidth:"2"}),U.jsxs("defs",{children:[U.jsxs("linearGradient",{id:`${y}-paint0`,x1:"23.8513",y1:"42.1868",x2:"23.8513",y2:"4.00133",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{offset:"0.063",stopColor:"#035E06"}),U.jsx("stop",{offset:"0.069",stopColor:"#036007"}),U.jsx("stop",{offset:"0.15",stopColor:"#087C14"}),U.jsx("stop",{offset:"0.241",stopColor:"#0C931F"}),U.jsx("stop",{offset:"0.345",stopColor:"#0FA527"}),U.jsx("stop",{offset:"0.47",stopColor:"#11B22D"}),U.jsx("stop",{offset:"0.635",stopColor:"#12B931"}),U.jsx("stop",{offset:"1",stopColor:"#13BC32"})]}),U.jsxs("linearGradient",{id:`${y}-paint1`,x1:"23.8511",y1:"41.5189",x2:"23.8511",y2:"4.66864",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{offset:"0.023",stopColor:"#012102"}),U.jsx("stop",{offset:"0.106",stopColor:"#003601"}),U.jsx("stop",{offset:"0.115",stopColor:"#003801"}),U.jsx("stop",{offset:"0.196",stopColor:"#014E06"}),U.jsx("stop",{offset:"0.285",stopColor:"#025E09"}),U.jsx("stop",{offset:"0.386",stopColor:"#02680B"}),U.jsx("stop",{offset:"0.526",stopColor:"#036B0C"}),U.jsx("stop",{offset:"0.822",stopColor:"#014304"}),U.jsx("stop",{offset:"0.888",stopColor:"#013003"}),U.jsx("stop",{offset:"0.916",stopColor:"#013403"}),U.jsx("stop",{offset:"0.945",stopColor:"#014003"}),U.jsx("stop",{offset:"0.955",stopColor:"#014704"}),U.jsx("stop",{offset:"0.961",stopColor:"#014303"}),U.jsx("stop",{offset:"0.997",stopColor:"#012E03"})]}),U.jsxs("linearGradient",{id:`${y}-paint2`,x1:"11.9375",y1:"37.198",x2:"35.7647",y2:"37.198",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{offset:"0.03",stopColor:"#831F1F"}),U.jsx("stop",{offset:"0.092",stopColor:"#872622"}),U.jsx("stop",{offset:"0.186",stopColor:"#923B2C"}),U.jsx("stop",{offset:"0.3",stopColor:"#A45E3C"}),U.jsx("stop",{offset:"0.43",stopColor:"#BE8E53"}),U.jsx("stop",{offset:"0.573",stopColor:"#DECA6F"}),U.jsx("stop",{offset:"0.616",stopColor:"#E9DF79"}),U.jsx("stop",{offset:"0.657",stopColor:"#E1D373"}),U.jsx("stop",{offset:"0.729",stopColor:"#CEB664"}),U.jsx("stop",{offset:"0.824",stopColor:"#AE864C"}),U.jsx("stop",{offset:"0.937",stopColor:"#82442C"}),U.jsx("stop",{offset:"1",stopColor:"#681C18"})]}),U.jsxs("linearGradient",{id:`${y}-paint3`,x1:"11.7227",y1:"8.9441",x2:"35.9788",y2:"8.9441",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{offset:"0.03",stopColor:"#831F1F"}),U.jsx("stop",{offset:"0.093",stopColor:"#A05639"}),U.jsx("stop",{offset:"0.155",stopColor:"#BA874F"}),U.jsx("stop",{offset:"0.214",stopColor:"#CEAD61"}),U.jsx("stop",{offset:"0.269",stopColor:"#DDC86E"}),U.jsx("stop",{offset:"0.317",stopColor:"#E5D976"}),U.jsx("stop",{offset:"0.354",stopColor:"#E9DF79"}),U.jsx("stop",{offset:"0.445",stopColor:"#CBB162"}),U.jsx("stop",{offset:"0.567",stopColor:"#A87C48"}),U.jsx("stop",{offset:"0.68",stopColor:"#8C5233"}),U.jsx("stop",{offset:"0.782",stopColor:"#783424"}),U.jsx("stop",{offset:"0.869",stopColor:"#6C221B"}),U.jsx("stop",{offset:"0.931",stopColor:"#681C18"})]}),U.jsxs("linearGradient",{id:`${y}-paint4`,x1:"12.577",y1:"39.1769",x2:"34.9563",y2:"39.1769",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{offset:"0.063",stopColor:"#903016"}),U.jsx("stop",{offset:"0.091",stopColor:"#963B1A"}),U.jsx("stop",{offset:"0.17",stopColor:"#A55823"}),U.jsx("stop",{offset:"0.26",stopColor:"#B26F2C"}),U.jsx("stop",{offset:"0.362",stopColor:"#BC8132"}),U.jsx("stop",{offset:"0.483",stopColor:"#C28E36"}),U.jsx("stop",{offset:"0.644",stopColor:"#C69539"}),U.jsx("stop",{offset:"1",stopColor:"#C8983A"})]}),U.jsxs("linearGradient",{id:`${y}-paint5`,x1:"18.832",y1:"40.2853",x2:"28.8695",y2:"40.2853",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{offset:"0.063",stopColor:"#692210"}),U.jsx("stop",{offset:"0.228",stopColor:"#6C2711"}),U.jsx("stop",{offset:"0.433",stopColor:"#763617"}),U.jsx("stop",{offset:"0.658",stopColor:"#864F20"}),U.jsx("stop",{offset:"0.897",stopColor:"#9C722C"}),U.jsx("stop",{offset:"1",stopColor:"#A88433"})]}),U.jsxs("linearGradient",{id:`${y}-paint6`,x1:"23.8534",y1:"33.9275",x2:"23.8534",y2:"10.4718",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#067310"}),U.jsx("stop",{offset:"0.34",stopColor:"#039B28"}),U.jsx("stop",{offset:"0.78",stopColor:"#01C945"}),U.jsx("stop",{offset:"1",stopColor:"#00DC51"})]}),U.jsxs("linearGradient",{id:`${y}-paint7`,x1:"23.8531",y1:"37.4842",x2:"23.8531",y2:"3.49734",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{offset:"0.003",stopColor:"#075203"}),U.jsx("stop",{offset:"0.115",stopColor:"#064D02"}),U.jsx("stop",{offset:"1",stopColor:"#042900"})]}),U.jsxs("linearGradient",{id:`${y}-paint8`,x1:"24",y1:"-1.96655e-08",x2:"24",y2:"47.5",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#14BC32"}),U.jsx("stop",{offset:"1",stopColor:"#0A5E0B"})]})]})]})},D="numberBackground--52f6c",r="selected--d23d5",A=({selected:W})=>{const y=l.useMemo((()=>`${String(Math.random())}-statistics-even-background`),[]);return U.jsxs("svg",{id:`${y}`,className:i.A(D,{[r]:W}),width:"100%",viewBox:"0 0 48 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("use",{href:`#${y}-path`,fill:"var(--bg-color-1)",fillOpacity:"0.6"}),U.jsx("use",{href:`#${y}-path`,fill:"var(--bg-color-2)",fillOpacity:"var(--bg-color-2-opacity)"}),U.jsx("use",{href:`#${y}-path`,fill:`url(#${y}-bg)`,fillOpacity:"0.45"}),U.jsx("use",{href:`#${y}-path`,stroke:`url(#${y}-frame)`,strokeWidth:"var(--frame-width)"}),U.jsxs("defs",{children:[U.jsx("path",{id:`${y}-path`,d:"M33.6 5.05H46C46.5247 5.05 46.95 5.47533 46.95 6V34C46.95 34.5247 46.5247 34.95 46 34.95H33.6H14.4H2C1.47533 34.95 1.05 34.5247 1.05 34V6C1.05 5.47533 1.47533 5.05 2 5.05H14.4H33.6Z"}),U.jsxs("linearGradient",{id:`${y}-bg`,x1:"24",y1:"4",x2:"24",y2:"36",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"var(--bg-color-3)"}),U.jsx("stop",{offset:"1",stopColor:"var(--bg-color-4)"})]}),U.jsxs("linearGradient",{id:`${y}-frame`,x1:"24",y1:"4",x2:"24",y2:"36",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"var(--frame-color-1)"}),U.jsx("stop",{offset:"0.821616",stopColor:"var(--frame-color-2)"})]})]})]})},T=({selected:W})=>{const y=l.useMemo((()=>`${String(Math.random())}-statistics-tb-background`),[]);return U.jsxs("svg",{id:`${y}`,className:G,width:"100%",viewBox:"0 0 48 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("path",{d:"M24 42C34.4934 42 43 33.4934 43 23C43 12.5066 34.4934 4 24 4C13.5066 4 5 12.5066 5 23C5 33.4934 13.5066 42 24 42Z",fill:`url(#${y}-paint0)`}),U.jsx("path",{d:"M24.0002 41.1204C34.0077 41.1204 42.1204 33.0077 42.1204 23.0002C42.1204 12.9926 34.0077 4.87988 24.0002 4.87988C13.9926 4.87988 5.87988 12.9926 5.87988 23.0002C5.87988 33.0077 13.9926 41.1204 24.0002 41.1204Z",fill:`url(#${y}-paint1)`}),U.jsx("path",{d:"M23.9855 40.2386C20.5906 40.2386 17.3051 39.2285 14.4848 37.3175C10.734 34.7756 8.19702 30.9254 7.34197 26.476C6.48692 22.0267 7.41598 17.5096 9.95787 13.7603C13.118 9.0959 18.373 6.31152 24.0137 6.31152C27.4085 6.31152 30.694 7.32236 33.5144 9.23335C37.2652 11.7745 39.8021 15.624 40.6572 20.0741C41.5129 24.5234 40.5839 29.0398 38.042 32.7899C34.8819 37.4542 29.6268 40.2386 23.9855 40.2386ZM24.0144 7.01643C18.6077 7.01643 13.5712 9.6852 10.5422 14.1557C8.10608 17.7507 7.21507 22.0781 8.03488 26.3428C8.85398 30.6075 11.2852 34.2976 14.8802 36.7338C17.5835 38.5658 20.7323 39.5337 23.9855 39.5337C29.3928 39.5337 34.4293 36.8649 37.4583 32.3944C39.8945 28.7994 40.7848 24.472 39.965 20.2073C39.1459 15.9419 36.7146 12.2525 33.1196 9.81701C30.4163 7.98497 27.2675 7.01643 24.0144 7.01643Z",fill:"#EACC39"}),U.jsx("path",{d:"M24.0003 38.3844C33.0042 38.3844 40.3033 31.0853 40.3033 22.0814C40.3033 13.0774 33.0042 5.77832 24.0003 5.77832C14.9964 5.77832 7.69727 13.0774 7.69727 22.0814C7.69727 31.0853 14.9964 38.3844 24.0003 38.3844Z",fill:`url(#${y}-paint2)`}),U.jsxs("g",{opacity:"0.5",children:[U.jsx("path",{d:"M23.6746 6.04784L23.626 6.02246H23.6239L23.6217 6.02317C23.578 6.06194 23.5167 6.07251 23.4688 6.11692C23.4187 6.16062 23.4061 6.229 23.3891 6.28187C23.3631 6.39183 23.2538 6.43695 23.1657 6.53916C23.1227 6.59555 23.1036 6.65265 23.0733 6.68719C23.0487 6.7175 23.0021 6.73371 22.9493 6.74569C22.8464 6.76895 22.7131 6.76473 22.5891 6.8183C22.4784 6.85918 22.3705 6.89372 22.2592 6.91698L22.1753 6.93249C22.145 6.93813 22.1111 6.94448 22.0794 6.95294C22.0146 6.96985 21.9497 6.99452 21.8884 7.03047C21.7643 7.10167 21.6706 7.21939 21.6135 7.33781L21.5923 7.38222C21.586 7.39773 21.5761 7.42311 21.5719 7.44143C21.5613 7.48161 21.5578 7.51897 21.5564 7.55422C21.5536 7.62471 21.5606 7.68745 21.5662 7.74807C21.5726 7.80939 21.5789 7.86015 21.5803 7.91442C21.5832 7.98562 21.5966 8.05118 21.61 8.11109C21.6234 8.17101 21.6367 8.22529 21.6445 8.27463C21.648 8.30001 21.6508 8.32327 21.6515 8.34583L21.6551 8.43394L21.6762 8.7871L21.6847 8.95909L21.6868 9.04368C21.6882 9.07611 21.6889 9.10853 21.6917 9.14025C21.7115 9.39754 21.7848 9.63157 21.8313 9.8508C21.856 9.96288 21.8679 10.0595 21.8764 10.1779C21.887 10.2963 21.8926 10.4154 21.9293 10.5585C21.9497 10.6276 21.9695 10.6769 21.98 10.7207C21.985 10.7411 21.9871 10.7587 21.9871 10.7651C21.9871 10.7636 21.985 10.777 21.9828 10.7806C21.9786 10.7841 21.9857 10.7855 21.9497 10.7989C21.9173 10.8102 21.863 10.8186 21.7989 10.8306C21.6656 10.8567 21.5536 10.8955 21.4683 10.9018C21.4253 10.906 21.3907 10.9018 21.3534 10.8919C21.335 10.887 21.316 10.8793 21.297 10.8715L21.2166 10.8341C21.0016 10.7333 20.7789 10.6269 20.5343 10.5515C20.2918 10.476 20.0169 10.4309 19.7377 10.4909C19.596 10.5226 19.4797 10.579 19.3754 10.6206C19.3232 10.641 19.2739 10.6593 19.2267 10.672L19.0596 10.7115L18.7093 10.7926L18.538 10.832C18.4858 10.8433 18.4322 10.8518 18.3773 10.8588C18.2673 10.8722 18.1524 10.8771 18.0326 10.8835C17.9021 10.8884 17.7696 10.9131 17.6561 10.9335L17.5716 10.9483L17.53 10.9547L17.4975 10.9589C17.4637 10.9617 17.4087 10.9547 17.3291 10.954C17.2861 10.9554 17.2558 10.9575 17.2149 10.9638C17.1761 10.9695 17.1331 10.9801 17.0943 10.9949C17.0147 11.0259 16.9696 11.0541 16.9223 11.0738C16.8948 11.0865 16.8667 11.095 16.8215 11.1112C16.7785 11.126 16.72 11.1499 16.6686 11.188C16.6065 11.2331 16.5727 11.2853 16.5509 11.3142C16.5276 11.3459 16.5163 11.3558 16.5191 11.3522C16.4613 11.3868 16.3542 11.4093 16.2315 11.4446C16.2005 11.4538 16.1688 11.4643 16.1357 11.4777C16.1195 11.4841 16.1025 11.4918 16.0856 11.4996L16.0461 11.5186L15.8911 11.594C15.6859 11.6927 15.4716 11.7992 15.2707 11.9408C15.2193 11.9782 15.1735 12.0113 15.1185 12.0607C15.0663 12.1086 15.0247 12.1587 14.986 12.2066L14.8809 12.344C14.8485 12.387 14.8175 12.4237 14.7808 12.4646C14.7456 12.5041 14.7103 12.54 14.6744 12.5724C14.6568 12.5886 14.6384 12.6035 14.6201 12.6175C14.6032 12.6302 14.5799 12.6465 14.5722 12.65C14.5595 12.657 14.5341 12.6669 14.4996 12.6838C14.4488 12.7092 14.4023 12.7423 14.3685 12.786C14.298 12.8692 14.2909 13.0031 14.317 13.0927C14.36 13.2463 14.4368 13.3457 14.4777 13.4324C14.5242 13.5241 14.563 13.6213 14.5961 13.7221C14.6638 13.9273 14.704 14.1366 14.7646 14.3721C14.7992 14.4898 14.8358 14.5913 14.852 14.6815C14.8605 14.7266 14.8633 14.7675 14.8591 14.7992C14.8563 14.8302 14.8457 14.8535 14.8309 14.8747C14.8168 14.8958 14.7886 14.9191 14.7428 14.9536C14.6998 14.9846 14.6349 15.0361 14.5891 15.0896C14.5433 15.1411 14.5059 15.1947 14.4763 15.2342C14.4453 15.2743 14.4242 15.2969 14.4016 15.3096C14.3769 15.3258 14.3607 15.3279 14.2839 15.3505C14.2211 15.3695 14.1626 15.3928 14.1077 15.4146C13.9963 15.4597 13.9046 15.5006 13.8088 15.5232C13.7094 15.5485 13.5987 15.5655 13.4796 15.5894C13.359 15.6141 13.242 15.6451 13.1229 15.6888C13.063 15.7107 13.0031 15.736 12.9403 15.7706C12.8741 15.8087 12.8191 15.8531 12.7704 15.8975C12.6725 15.9884 12.597 16.0871 12.5273 16.1794C12.4582 16.2718 12.394 16.362 12.3278 16.4367C12.2946 16.4755 12.2601 16.5079 12.2256 16.5389C12.1826 16.5721 12.1741 16.5798 12.1374 16.5925C12.067 16.6207 11.9429 16.6151 11.7815 16.6898C11.7011 16.7278 11.6243 16.8075 11.5876 16.8766C11.5481 16.9464 11.5256 17.014 11.5094 17.0796C11.4784 17.2107 11.4685 17.3341 11.472 17.4638C11.4777 17.5907 11.4946 17.7027 11.503 17.8092C11.5129 17.9149 11.515 18.0157 11.4974 18.0918C11.484 18.1546 11.4325 18.237 11.3691 18.3111C11.3374 18.3484 11.3021 18.3851 11.2655 18.4203L11.1393 18.5331C11.0935 18.5761 11.0434 18.6269 11.0004 18.6896C10.9574 18.7523 10.9257 18.8221 10.9053 18.887C10.882 18.9575 10.8651 19.0442 10.8609 19.1175C10.8552 19.1922 10.8573 19.2599 10.8566 19.3219C10.8566 19.3832 10.8545 19.4389 10.8468 19.4854C10.839 19.5334 10.8263 19.5665 10.8002 19.6201C10.7876 19.6483 10.7699 19.6765 10.7509 19.7314C10.7312 19.79 10.7255 19.8569 10.7424 19.9182C10.7579 19.981 10.7932 20.0353 10.8193 20.0691C10.8475 20.1043 10.8757 20.1354 10.9046 20.1614C11.0209 20.2672 11.1308 20.3313 11.195 20.4032C11.2817 20.4984 11.3698 20.59 11.4262 20.6767C11.4544 20.7204 11.4755 20.7634 11.4854 20.8036L11.4981 20.8529C11.5059 20.8804 11.5164 20.9079 11.5305 20.9368C11.5587 20.9925 11.6038 21.0397 11.6602 21.0679C11.6877 21.0827 11.7194 21.0926 11.7462 21.1004L11.7927 21.1131C11.8195 21.1208 11.8442 21.1293 11.8654 21.1384C11.9112 21.1561 11.9781 21.1991 12.0839 21.2209C12.1367 21.2315 12.1995 21.2287 12.2453 21.2195C12.2918 21.2103 12.3235 21.1998 12.344 21.1955C12.3665 21.192 12.3637 21.1913 12.3835 21.1941C12.399 21.1962 12.4166 21.2005 12.4349 21.2082C12.5103 21.2378 12.5956 21.3154 12.6689 21.4035C12.6887 21.4267 12.7028 21.4458 12.726 21.4754C12.7486 21.505 12.7733 21.5339 12.7993 21.5621C12.8522 21.6185 12.9135 21.6685 12.9721 21.7094L13.137 21.8208C13.1814 21.8511 13.2181 21.8821 13.2477 21.9188C13.3083 21.9886 13.3527 22.1042 13.419 22.2282C13.5451 22.4672 13.6911 22.6822 13.8067 22.9007C13.8955 23.0924 14.0844 23.4273 14.0569 23.4956C14.0541 23.4992 14.0569 23.4999 14.0492 23.5076C14.0421 23.5147 14.0301 23.5252 14.0125 23.5372C13.978 23.5612 13.93 23.5859 13.875 23.6225C13.8222 23.6592 13.7552 23.7085 13.7115 23.7945C13.6657 23.877 13.665 23.9862 13.6904 24.0624C13.7418 24.2139 13.8292 24.2964 13.8666 24.3704C13.9145 24.455 13.954 24.5452 13.9779 24.6319C13.9899 24.6749 13.997 24.7172 13.9977 24.7539C13.9977 24.7616 13.9977 24.7736 13.9977 24.7772C13.9977 24.78 13.997 24.7842 13.9949 24.7905C13.9913 24.8025 13.9843 24.8209 13.9737 24.8434C13.954 24.8878 13.9173 24.9499 13.9068 25.0422V25.303C13.9089 25.3376 13.9138 25.3749 13.923 25.4116C13.9413 25.4856 13.9765 25.5483 14.0019 25.5941C14.0273 25.6385 14.0491 25.6808 14.0604 25.7147L14.0823 25.7887C14.0921 25.8232 14.1133 25.8698 14.1387 25.9029C14.1514 25.9198 14.164 25.9353 14.1774 25.9487C14.1908 25.9635 14.2141 25.9832 14.231 25.9945C14.2641 26.0171 14.2909 26.0305 14.3177 26.0453L14.3917 26.0826L14.4058 26.0904L14.4192 26.0981L14.4573 26.12C14.5574 26.1757 14.6511 26.2208 14.7202 26.273C14.7928 26.3301 14.8175 26.366 14.8506 26.4661C14.8816 26.5584 14.9056 26.6592 14.9232 26.7572C14.9317 26.8052 14.9387 26.858 14.9394 26.8947C14.9402 26.9285 14.9331 26.9659 14.9197 27.0054C14.8929 27.0836 14.8379 27.171 14.7822 27.2591C14.7301 27.3444 14.6483 27.4494 14.6222 27.5954C14.6088 27.6659 14.6124 27.7363 14.6208 27.797C14.6286 27.8555 14.6392 27.9105 14.6518 27.9661C14.6829 28.0888 14.711 28.2136 14.7879 28.3433C14.8612 28.4638 14.9535 28.5618 15.0558 28.6478C15.0811 28.6689 15.1079 28.6894 15.1354 28.7091C15.158 28.7253 15.1791 28.7408 15.1988 28.7577C15.239 28.7909 15.2743 28.8275 15.3081 28.8691C15.3419 28.9107 15.373 28.9572 15.4054 29.0059L15.4293 29.0432C15.4378 29.0573 15.4519 29.0764 15.4611 29.0884C15.4815 29.1137 15.4921 29.1306 15.4942 29.1356C15.4977 29.1398 15.5005 29.1715 15.5055 29.2237C15.5125 29.2935 15.5358 29.3633 15.5887 29.4098C15.6112 29.4267 15.6345 29.4422 15.6606 29.4542C15.6732 29.4605 15.6859 29.4662 15.7007 29.4711L15.731 29.4817C15.7684 29.4937 15.8037 29.5021 15.8382 29.5106C15.9073 29.5268 15.9756 29.5395 16.0384 29.5529C16.1491 29.5776 16.2513 29.6262 16.3337 29.703C16.5043 29.8546 16.603 30.102 16.7503 30.3389C16.8244 30.4523 16.8836 30.556 16.9308 30.6702C16.9752 30.7815 17.0062 30.8985 16.9971 31.0022C16.9935 31.0536 16.9801 31.1023 16.9583 31.1431C16.9386 31.1791 16.9132 31.2024 16.8624 31.2313C16.8131 31.2595 16.7377 31.2905 16.6679 31.3567C16.5988 31.4251 16.5607 31.516 16.5473 31.5964C16.5156 31.7691 16.5819 31.9305 16.6439 32.0497C16.7059 32.1737 16.7757 32.2893 16.8363 32.4021C16.8977 32.5156 16.9484 32.6277 16.9773 32.7426C16.9907 32.8004 17.002 32.8582 17.0034 32.9174C17.0076 32.9752 17.0034 33.0281 16.99 33.0845C16.966 33.1958 16.9082 33.3086 16.8511 33.4306C16.7933 33.5546 16.7468 33.6745 16.6827 33.7753C16.6517 33.8239 16.6129 33.8739 16.5769 33.9043C16.5417 33.9353 16.5001 33.9501 16.4458 33.9585C16.3908 33.9663 16.3253 33.9642 16.2527 33.9677C16.2132 33.9698 16.1526 33.9755 16.1082 33.9881C16.0616 34.0008 16.0137 34.0163 15.9714 34.0354C15.9707 34.0868 15.9714 34.1383 15.9735 34.1883C15.9735 34.2144 15.9792 34.237 15.9813 34.2616L15.9862 34.2969L15.9919 34.3237C16.0067 34.3956 16.0271 34.4632 16.0469 34.5288C16.0863 34.6606 16.1244 34.7861 16.1279 34.9088C16.1307 34.9687 16.1194 35.0307 16.1032 35.0829C16.0842 35.1336 16.0454 35.1858 16.006 35.2443C15.9862 35.2739 15.9658 35.3042 15.9482 35.3394L15.9038 35.4353L15.8177 35.6221C15.7881 35.6827 15.7628 35.7525 15.7318 35.7969C15.7078 35.8329 15.6634 35.8583 15.6204 35.8857C15.6493 35.9062 15.6747 35.9302 15.7021 35.9513C15.7423 35.9273 15.7832 35.8998 15.8149 35.859C15.8657 35.792 15.8875 35.7314 15.9228 35.6715L16.0186 35.4896C16.0525 35.4247 16.0764 35.3754 16.1187 35.3232C16.1582 35.2704 16.2069 35.214 16.2407 35.1378C16.2696 35.061 16.2844 34.987 16.2851 34.9102C16.2872 34.7579 16.2484 34.6169 16.2146 34.4851C16.1977 34.4188 16.1808 34.3547 16.1702 34.292C16.1596 34.232 16.1596 34.2116 16.1624 34.1764C16.1744 34.1686 16.1928 34.1658 16.2076 34.1637C16.2259 34.1608 16.2329 34.1608 16.2611 34.1601C16.3225 34.1587 16.3922 34.163 16.4712 34.1552C16.5494 34.1475 16.6411 34.1185 16.708 34.0622C16.775 34.0072 16.818 33.9508 16.8603 33.8887C16.9414 33.7668 16.9935 33.6392 17.0499 33.5243C17.1063 33.4073 17.1747 33.2839 17.2106 33.1366C17.2811 32.83 17.1747 32.5374 17.0464 32.2971C16.983 32.1758 16.9153 32.0623 16.8603 31.9481C16.8025 31.8347 16.7694 31.7317 16.7877 31.6401C16.8103 31.5365 16.8427 31.5146 16.9851 31.4427C17.052 31.4082 17.1331 31.3433 17.1761 31.2609C17.217 31.1847 17.2381 31.103 17.2445 31.0233C17.2572 30.8619 17.2142 30.7153 17.162 30.582C17.1091 30.4502 17.0344 30.3226 16.9639 30.2134C16.8293 30.0026 16.7334 29.7362 16.505 29.5226C16.3915 29.4168 16.2442 29.3442 16.0927 29.3104C16.0236 29.2956 15.9594 29.2836 15.8981 29.2681C15.8671 29.261 15.8375 29.2533 15.8107 29.2441C15.8044 29.242 15.7959 29.2392 15.7931 29.2378L15.7867 29.2357C15.7825 29.2336 15.7776 29.2314 15.774 29.2286C15.7642 29.2209 15.7621 29.2082 15.7614 29.1969C15.7564 29.168 15.7614 29.1151 15.7332 29.0425C15.7113 28.9925 15.6845 28.9615 15.6683 28.9389C15.6592 28.9269 15.6556 28.922 15.6486 28.91L15.6239 28.8712C15.5908 28.8198 15.5548 28.7662 15.5132 28.7126C15.4716 28.6598 15.423 28.6083 15.3701 28.5639C15.3441 28.5413 15.3166 28.5209 15.2905 28.5012C15.2693 28.4857 15.2475 28.4687 15.227 28.4511C15.1453 28.3813 15.0713 28.2989 15.0205 28.2122C14.9733 28.1339 14.9458 28.0211 14.9211 27.9119C14.9105 27.8625 14.9014 27.8132 14.895 27.7652C14.8894 27.7201 14.8887 27.6828 14.895 27.6475C14.9056 27.5799 14.9564 27.5051 15.0184 27.4114C15.0769 27.3183 15.141 27.2246 15.1862 27.1005C15.208 27.0392 15.2235 26.9694 15.2228 26.8961C15.2214 26.8263 15.2129 26.7727 15.2038 26.7149C15.184 26.6022 15.1594 26.4943 15.1227 26.3815C15.103 26.3258 15.0847 26.268 15.041 26.2011C14.9994 26.139 14.9479 26.0904 14.8964 26.0509C14.7928 25.972 14.6885 25.9233 14.6004 25.8726C14.5031 25.8127 14.3797 25.7647 14.3776 25.7386C14.3706 25.7288 14.3692 25.7253 14.3635 25.709C14.3586 25.6928 14.3516 25.6611 14.3403 25.6287C14.3177 25.561 14.2881 25.5081 14.2613 25.4581C14.2056 25.3566 14.2021 25.3411 14.2042 25.2241V25.0753C14.2042 25.0605 14.2197 25.0253 14.2451 24.9731C14.2578 24.947 14.2719 24.916 14.2839 24.8765C14.2895 24.8568 14.2945 24.8357 14.2973 24.8117C14.2994 24.7884 14.2994 24.7743 14.3001 24.7546C14.2994 24.6841 14.2874 24.62 14.2719 24.56C14.2395 24.4395 14.1915 24.3324 14.1344 24.2287C14.0682 24.1145 13.9998 24.0363 13.9864 23.9806C13.9801 23.9545 13.9822 23.9496 13.9878 23.9369C13.9921 23.9249 14.0132 23.9052 14.0492 23.8812C14.0844 23.8573 14.133 23.8326 14.188 23.7959C14.2155 23.7783 14.2465 23.755 14.2768 23.7233C14.3078 23.6923 14.3375 23.6458 14.3537 23.5993C14.3896 23.4752 14.3628 23.3892 14.3424 23.3152C14.3191 23.2405 14.2895 23.1763 14.2606 23.1143C14.231 23.053 14.2007 22.9952 14.1788 22.9451C14.1514 22.8824 14.1211 22.821 14.09 22.7604C13.9646 22.5215 13.8215 22.3051 13.708 22.0858C13.6516 21.9829 13.6079 21.8511 13.5021 21.7193C13.45 21.6551 13.3865 21.6009 13.3238 21.5579L13.1652 21.4493C13.1173 21.4148 13.0785 21.3823 13.0425 21.3436C13.0249 21.3245 13.0073 21.3041 12.9904 21.2815C12.9735 21.2597 12.9495 21.2265 12.9269 21.2005C12.8346 21.0912 12.7296 20.9784 12.5625 20.9058C12.5209 20.8882 12.4744 20.8755 12.4257 20.8685C12.3806 20.86 12.3123 20.8642 12.2707 20.8741L12.1783 20.8959C12.16 20.8988 12.1565 20.8981 12.1445 20.8959C12.1205 20.8931 12.0733 20.8678 12 20.8346C11.9612 20.8184 11.9239 20.805 11.8872 20.7951L11.8393 20.781C11.8343 20.7796 11.8343 20.7796 11.8343 20.7796C11.8329 20.7796 11.8322 20.7775 11.8315 20.7761L11.8188 20.7261C11.7977 20.6415 11.7596 20.5668 11.7187 20.5019C11.6341 20.3708 11.539 20.2756 11.453 20.1784C11.3402 20.0585 11.2211 19.9894 11.1471 19.9168C11.1083 19.8823 11.0815 19.84 11.0878 19.847C11.0878 19.8456 11.0878 19.847 11.0885 19.8442C11.09 19.8386 11.1041 19.8104 11.1196 19.7801C11.1513 19.7195 11.1865 19.6313 11.1985 19.5517C11.2126 19.4713 11.214 19.398 11.2154 19.3311C11.2161 19.2641 11.2154 19.2028 11.2197 19.1499C11.2239 19.0949 11.2324 19.054 11.2493 19.0026C11.2775 18.9166 11.3106 18.8693 11.3874 18.7982L11.515 18.6825C11.5608 18.6388 11.6045 18.5937 11.6461 18.5444C11.7272 18.4457 11.809 18.3364 11.8477 18.1771C11.8795 18.0319 11.8703 17.9043 11.8604 17.7859C11.8498 17.6682 11.8336 17.5561 11.8301 17.4574C11.8266 17.3623 11.8358 17.2579 11.8569 17.1698C11.8675 17.1254 11.883 17.0859 11.8985 17.057C11.9168 17.0274 11.9232 17.0225 11.945 17.0098C11.9908 16.9823 12.1057 16.9774 12.2523 16.933C12.289 16.9203 12.3285 16.9041 12.3665 16.8801C12.4095 16.854 12.4279 16.8357 12.4575 16.8131C12.5082 16.7687 12.5562 16.7222 12.597 16.675C12.6809 16.5798 12.7479 16.484 12.8149 16.3951C12.8811 16.307 12.9453 16.2245 13.0143 16.1611C13.0496 16.1294 13.0841 16.1019 13.1173 16.0836C13.1546 16.0624 13.2004 16.0427 13.2477 16.0251C13.3435 15.9905 13.4486 15.9623 13.5522 15.9405C13.6579 15.9186 13.7742 15.9017 13.8976 15.8707C14.0259 15.8397 14.1436 15.7868 14.2437 15.7459C14.2944 15.7248 14.3424 15.7064 14.3896 15.6923C14.422 15.6825 14.5207 15.6613 14.5919 15.6127C14.6673 15.5669 14.7223 15.5013 14.7597 15.452C14.7985 15.4005 14.826 15.361 14.8556 15.3279C14.8845 15.2948 14.9098 15.275 14.9578 15.2391C15.0029 15.2045 15.0663 15.158 15.1185 15.0861C15.1699 15.0163 15.2017 14.9303 15.2101 14.8493C15.2193 14.7682 15.2115 14.6956 15.1995 14.6293C15.1749 14.4975 15.1326 14.3862 15.1044 14.2868C15.0515 14.0845 15.0057 13.8497 14.931 13.6249C14.8929 13.5107 14.8485 13.3972 14.7921 13.2865C14.7329 13.1709 14.6737 13.0828 14.6575 13.0165L14.6554 13.0067V13.0038H14.6568C14.6737 12.994 14.7019 12.9834 14.7392 12.9637C14.7822 12.9397 14.8048 12.9221 14.8337 12.9016C14.8612 12.8812 14.8866 12.8593 14.9105 12.8375C14.9592 12.7938 15.0029 12.748 15.0431 12.7028C15.0818 12.6591 15.1241 12.6091 15.1601 12.5619L15.2616 12.4293C15.3264 12.3448 15.3828 12.2961 15.4738 12.232C15.6458 12.11 15.8417 12.0113 16.049 11.9112L16.2019 11.8365L16.2393 11.8182L16.2675 11.8055C16.2872 11.797 16.3091 11.79 16.3337 11.7822C16.4296 11.7512 16.5537 11.7357 16.6961 11.6568C16.7694 11.6131 16.8081 11.556 16.8321 11.5242C16.8575 11.489 16.8709 11.4742 16.8751 11.4721C16.8892 11.4622 16.9061 11.4538 16.9393 11.4418C16.971 11.4305 17.0203 11.415 17.0661 11.3938C17.1282 11.3656 17.1853 11.3332 17.217 11.3212C17.2459 11.3092 17.2896 11.3029 17.3333 11.3015C17.3728 11.3001 17.4369 11.3092 17.5229 11.3036C17.549 11.3015 17.5638 11.2987 17.5793 11.2966L17.6265 11.2895L17.7182 11.2733C17.8387 11.2507 17.9409 11.231 18.0502 11.2275C18.1686 11.2211 18.292 11.2155 18.4188 11.2C18.4823 11.1922 18.5464 11.1824 18.6106 11.1683L18.7875 11.1274L19.1336 11.0477L19.3148 11.0054C19.3825 10.9871 19.4452 10.9638 19.5037 10.9413C19.62 10.8948 19.7208 10.8496 19.8124 10.8299C20.0028 10.789 20.2171 10.8186 20.4264 10.8856C20.6379 10.9519 20.8465 11.0505 21.0622 11.1521L21.144 11.1901C21.1793 11.2056 21.2159 11.2204 21.2554 11.231C21.3336 11.2529 21.4196 11.2599 21.4951 11.2521C21.648 11.2373 21.7622 11.1929 21.863 11.1746C21.9159 11.164 21.9807 11.157 22.0611 11.1295C22.1013 11.1154 22.1464 11.0971 22.1901 11.0618C22.2345 11.028 22.2719 10.9794 22.2951 10.93C22.3064 10.9053 22.3149 10.8807 22.3198 10.8567C22.3261 10.8341 22.3304 10.8017 22.3304 10.7756C22.3304 10.7228 22.3219 10.6826 22.3127 10.6459C22.2944 10.5747 22.2705 10.5155 22.2571 10.4718C22.2084 10.297 22.219 10.032 22.1541 9.78736C22.0984 9.54839 22.0258 9.33199 22.0047 9.12052C22.0019 9.09373 22.0005 9.06765 21.9984 9.04157L21.9934 8.95063L21.9786 8.77088L21.9441 8.42266L21.937 8.33525C21.9342 8.2993 21.9286 8.26476 21.9222 8.23234C21.9088 8.16678 21.8912 8.10757 21.8764 8.05329C21.8616 7.99901 21.8496 7.94967 21.8454 7.90385C21.8405 7.84111 21.8292 7.77556 21.82 7.72128C21.8108 7.66489 21.8031 7.61132 21.8017 7.56409C21.801 7.54012 21.8017 7.51897 21.8052 7.50206C21.8066 7.49148 21.808 7.48937 21.8116 7.47738L21.8257 7.44143C21.8651 7.34627 21.9208 7.26873 21.9991 7.21516C22.0385 7.18767 22.0836 7.16652 22.133 7.1496C22.1584 7.14114 22.1823 7.1341 22.2105 7.12705L22.3008 7.10308C22.4213 7.06854 22.5369 7.0199 22.6455 6.96915C22.7371 6.91769 22.8513 6.91135 22.9775 6.87258C23.0367 6.85284 23.1107 6.82464 23.1558 6.75697C23.1953 6.69635 23.208 6.63714 23.2333 6.59696C23.2608 6.55466 23.3045 6.51448 23.3454 6.46867C23.387 6.42426 23.4237 6.36152 23.4314 6.30019C23.4427 6.24098 23.4462 6.18459 23.4829 6.143C23.5167 6.10141 23.5773 6.07956 23.6182 6.03515L23.6676 6.05348L23.6746 6.04784Z",fill:`url(#${y}-paint3)`}),U.jsx("path",{d:"M11.0051 20.0415C10.9833 20.0867 10.965 20.1339 10.9452 20.1797C10.9065 20.2685 10.8451 20.3538 10.8078 20.4483C10.7627 20.5399 10.7591 20.6541 10.6929 20.7112C10.6196 20.7711 10.53 20.8282 10.4511 20.8917C10.3707 20.9544 10.2925 21.0221 10.2213 21.0947C10.1529 21.1694 10.0761 21.2406 10.0296 21.34C9.93581 21.5352 9.97457 21.7524 9.92594 21.9342C9.90267 22.0251 9.84558 22.1013 9.76452 22.1506C9.68698 22.2021 9.5897 22.2169 9.4889 22.231C9.38951 22.2451 9.27602 22.2634 9.18508 22.3283C9.09768 22.3882 9.02155 22.4537 8.94683 22.5292C8.91229 22.5665 8.86859 22.6123 8.86224 22.6807C8.86013 22.7427 8.86929 22.7843 8.86435 22.8316C8.86224 22.8724 8.8425 22.9281 8.84884 22.9866C8.85448 23.0437 8.86577 23.0889 8.87564 23.1403C8.89819 23.2397 8.92568 23.3433 8.98559 23.435C9.0434 23.5203 9.08569 23.5992 9.04692 23.6711C9.01379 23.7416 8.91441 23.7747 8.82277 23.8304C8.73395 23.8854 8.65289 23.9481 8.57182 24.008C8.49146 24.0673 8.4097 24.1251 8.32299 24.1666C8.23699 24.2068 8.14042 24.2301 8.04173 24.2491C7.9501 24.266 7.8507 24.2858 7.75977 24.3048C7.76329 24.3337 7.77176 24.3619 7.77458 24.3908C7.87256 24.3711 7.96137 24.3534 8.05935 24.3358C8.16015 24.3161 8.26378 24.2921 8.36247 24.2463C8.45904 24.1998 8.54433 24.1399 8.6261 24.0792C8.70786 24.0193 8.78752 23.9573 8.8707 23.9058C8.91088 23.8812 8.9567 23.8607 9.00322 23.8332C9.04904 23.8057 9.0998 23.7684 9.12799 23.7113C9.15619 23.6556 9.1576 23.5872 9.13716 23.5315C9.11742 23.4758 9.0857 23.4314 9.05962 23.3905C9.00816 23.313 8.98066 23.2193 8.95881 23.1234C8.94894 23.0769 8.93696 23.024 8.93203 22.981C8.92568 22.9387 8.94189 22.8971 8.94683 22.8379C8.95176 22.7843 8.94119 22.7258 8.9433 22.6878C8.94471 22.6532 8.97291 22.618 9.00533 22.5827C9.0723 22.5136 9.14984 22.4467 9.22879 22.391C9.30421 22.336 9.39938 22.3184 9.50018 22.3036C9.59887 22.2888 9.71095 22.2726 9.804 22.2098C9.89704 22.1534 9.96823 22.0562 9.9929 21.9518C10.019 21.8482 10.0183 21.746 10.0253 21.6473C10.0317 21.5493 10.0472 21.4521 10.0867 21.3661C10.1247 21.2815 10.1994 21.2103 10.2657 21.1377C10.3348 21.0658 10.4095 21.0002 10.4885 20.9375C10.5667 20.8726 10.6485 20.8205 10.7302 20.75C10.7739 20.7119 10.793 20.6541 10.8057 20.6069C10.8191 20.5575 10.831 20.511 10.8487 20.4645C10.8804 20.37 10.9347 20.2876 10.9699 20.1896C10.9861 20.1416 11.0009 20.0937 11.0185 20.0472C11.0376 20.0028 11.0545 19.9513 11.0982 19.9238C11.0517 19.9478 11.0291 19.9985 11.0059 20.0423L11.0051 20.0415Z",fill:`url(#${y}-paint4)`})]}),W&&U.jsx("circle",{cx:"24",cy:"23",r:"22",stroke:`url(#${y}-paint5)`,strokeWidth:"2"}),U.jsxs("defs",{children:[U.jsxs("linearGradient",{id:`${y}-paint0`,x1:"24",y1:"42",x2:"24",y2:"4",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#43170D"}),U.jsx("stop",{offset:"0.085",stopColor:"#681C0F"}),U.jsx("stop",{offset:"0.275",stopColor:"#C72A14"}),U.jsx("stop",{offset:"0.379",stopColor:"#FE3217"}),U.jsx("stop",{offset:"0.428",stopColor:"#FD3817"}),U.jsx("stop",{offset:"0.495",stopColor:"#FB4919"}),U.jsx("stop",{offset:"0.572",stopColor:"#F7661B"}),U.jsx("stop",{offset:"0.647",stopColor:"#F3891F"})]}),U.jsxs("linearGradient",{id:`${y}-paint1`,x1:"24.0002",y1:"4.87988",x2:"24.0002",y2:"41.1204",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#811D13"}),U.jsx("stop",{offset:"1",stopColor:"#390C07"})]}),U.jsxs("radialGradient",{id:`${y}-paint2`,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(28.5146 13.4205) rotate(34.122) scale(30.0933)",children:[U.jsx("stop",{stopColor:"#FBD922"}),U.jsx("stop",{offset:"0.381",stopColor:"#F9521C"}),U.jsx("stop",{offset:"0.723",stopColor:"#75190C"}),U.jsx("stop",{offset:"0.975",stopColor:"#F9521C"})]}),U.jsxs("linearGradient",{id:`${y}-paint3`,x1:"8.71395",y1:"29.7429",x2:"29.0585",y2:"12.34",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#FFE669"}),U.jsx("stop",{offset:"0.46",stopColor:"#FFEF9F"}),U.jsx("stop",{offset:"1",stopColor:"#FFF8D6"})]}),U.jsxs("linearGradient",{id:`${y}-paint4`,x1:"5.35762",y1:"25.8937",x2:"11.6225",y2:"20.5347",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#FFE669"}),U.jsx("stop",{offset:"0.46",stopColor:"#FFEF9F"}),U.jsx("stop",{offset:"1",stopColor:"#FFF8D6"})]}),U.jsxs("linearGradient",{id:`${y}-paint5`,x1:"24",y1:"-0.434783",x2:"24",y2:"45.9565",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#F3891F"}),U.jsx("stop",{offset:"0.532979",stopColor:"#FE3317"}),U.jsx("stop",{offset:"1",stopColor:"#6D200F"})]})]})]})},O=({selected:W})=>{const y=l.useMemo((()=>`${String(Math.random())}-statistics-hs-background`),[]);return U.jsxs("svg",{id:`${y}`,className:G,width:"100%",viewBox:"0 0 48 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.2898 42C17.949 42 13.0556 41.8501 8.32856 41.5414C6.79686 41.4415 5.60969 40.2424 5.50604 38.6898C5.17569 33.7562 5.01014 28.6346 5.00045 23.0328C4.99075 17.4325 5.13914 12.3102 5.45234 7.3736C5.55152 5.82103 6.73423 4.61745 8.26517 4.5123C13.1317 4.17748 18.1846 4.00969 23.7111 4H24.1981C29.5396 4 34.4337 4.14989 39.1585 4.45861C40.6902 4.55854 41.8774 5.75764 41.9811 7.30947C42.3114 12.2453 42.477 17.3669 42.4867 22.9672C42.4963 28.5682 42.348 33.6905 42.0348 38.6264C41.9363 40.179 40.7529 41.3825 39.2219 41.4877C34.3547 41.8225 29.3025 41.9903 23.776 42H23.2898Z",fill:`url(#${y}-paint0)`}),U.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.2884 40.7478C17.9737 40.7478 13.1072 40.5987 8.41072 40.2915C7.51363 40.2333 6.81788 39.5241 6.75673 38.6054C6.42787 33.7009 6.26307 28.6062 6.25338 23.0305C6.24368 17.454 6.39133 12.3586 6.70378 7.45255C6.7627 6.53458 7.45621 5.82317 8.35255 5.76127C13.1922 5.42869 18.2168 5.26165 23.7142 5.25195H24.2004C29.5159 5.25195 34.3816 5.40035 39.0774 5.70758C39.9745 5.765 40.6702 6.47418 40.7314 7.39289C41.0602 12.3004 41.225 17.3951 41.2347 22.9686C41.2444 28.5338 41.0968 33.6293 40.7843 38.5473C40.7254 39.4645 40.0319 40.1759 39.1356 40.2378C34.2959 40.5704 29.2713 40.7374 23.7739 40.7471L23.2884 40.7478Z",fill:`url(#${y}-paint1)`}),U.jsx("path",{d:"M40.5956 22.6272H39.2533C39.0557 14.3632 32.3808 7.68833 24.1168 7.49072V6.14844H23.3711V7.49072C15.1071 7.68833 8.43299 14.3632 8.23463 22.6272H6.8916V23.3729H8.23463C8.43224 31.6376 15.1064 38.3117 23.3711 38.5094V39.8516H24.1168V38.5094C32.3815 38.3117 39.0557 31.6369 39.2533 23.3729H40.5956V22.6272ZM24.1168 37.7637V33.88H23.3711V37.7637C15.518 37.566 9.17796 31.2252 8.98034 23.3729H14.3554V22.6272H8.98034C9.17796 14.7748 15.518 8.4333 23.3711 8.23643V12.1208H24.1168V8.23643C31.9699 8.4333 38.3099 14.7748 38.5076 22.6272H33.1325V23.3729H38.5076C38.3107 31.226 31.9699 37.5668 24.1168 37.7637Z",fill:`url(#${y}-paint2)`}),W&&U.jsx("path",{d:"M5.09441 44.447L5.09448 44.447C10.7925 44.8191 16.6941 45 23.1403 45H23.7271C30.3975 44.9883 36.4909 44.7858 42.3579 44.3822L42.358 44.3822C43.7006 44.29 44.7454 43.2423 44.8335 41.8529L44.8335 41.8528C45.2111 35.902 45.3903 29.7232 45.3786 22.962C45.3669 16.2017 45.167 10.0238 44.7688 4.07298L44.7688 4.07285C44.676 2.68443 43.6283 1.64069 42.2847 1.55304L42.2846 1.55303C36.5893 1.1809 30.6868 1 24.2397 1H23.6512C16.981 1.01172 10.8871 1.21422 5.02122 1.6178L5.02109 1.61781C3.67903 1.70998 2.63456 2.75716 2.54557 4.14715L5.09441 44.447ZM5.09441 44.447C3.75098 44.3593 2.70312 43.3157 2.61035 41.9263L2.61034 41.9261M5.09441 44.447L2.61034 41.9261M2.61034 41.9261C2.21207 35.9781 2.01224 29.8001 2.00054 23.038M2.61034 41.9261L2.00054 23.038M2.00054 23.038C1.98884 16.2779 2.16796 10.0992 2.54554 4.14758L2.00054 23.038Z",stroke:`url(#${y}-paint3)`,strokeWidth:"2"}),U.jsxs("defs",{children:[U.jsxs("linearGradient",{id:`${y}-paint0`,x1:"23.7194",y1:"42.0018",x2:"23.7201",y2:"3.78765",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#5A2C75"}),U.jsx("stop",{offset:"0.479882",stopColor:"#8E12A5"}),U.jsx("stop",{offset:"1",stopColor:"#D448E4"})]}),U.jsxs("radialGradient",{id:`${y}-paint1`,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(23.7197 23.0013) scale(18.1364 18.1364)",children:[U.jsx("stop",{stopColor:"#AF5BE7"}),U.jsx("stop",{offset:"0.786",stopColor:"#410A67"}),U.jsx("stop",{offset:"0.992",stopColor:"#3E005A"})]}),U.jsxs("linearGradient",{id:`${y}-paint2`,x1:"23.744",y1:"39.8516",x2:"23.744",y2:"6.14844",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{offset:"0.0440816",stopColor:"#762DC2"}),U.jsx("stop",{offset:"0.946086",stopColor:"#C163E4"})]}),U.jsxs("linearGradient",{id:`${y}-paint3`,x1:"23.6896",y1:"0",x2:"23.6896",y2:"46",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#D046E1"}),U.jsx("stop",{offset:"1",stopColor:"#6C2A77"})]})]})]})},h=({selected:W})=>{const y=l.useMemo((()=>`${String(Math.random())}-statistics-mm-background`),[]);return U.jsxs("svg",{id:`${y}`,className:G,width:"100%",viewBox:"0 0 48 53",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("path",{d:"M42.9087 14.2594L24.9853 4.25733C24.6835 4.08961 24.3435 4 24.0004 4C23.6573 4 23.3172 4.08961 23.0155 4.25733L5.09059 14.2594C4.41817 14.6362 4 15.3607 4 16.1511V35.983C4 36.5957 4.25579 37.1639 4.68237 37.566C4.69999 37.5844 4.72145 37.599 4.74059 37.6166C4.75897 37.635 4.77964 37.6495 4.79879 37.6679C4.8164 37.6863 4.83786 37.7008 4.85624 37.7184C4.99179 37.8578 5.14496 37.9804 5.31728 38.0776L23.0277 48.0813C23.3264 48.249 23.6626 48.3371 23.9996 48.3371C24.3366 48.3371 24.6736 48.2482 24.9723 48.0805L42.6827 38.0776C42.855 37.9804 43.0082 37.8578 43.1438 37.7184C43.1621 37.7008 43.1836 37.6863 43.2012 37.6679C43.2196 37.6503 43.241 37.6357 43.2594 37.6173C43.2786 37.5997 43.2992 37.5852 43.3176 37.5668C43.7434 37.1647 44 36.5965 44 35.9838V16.1511C44 15.36 43.5811 14.6355 42.9087 14.2594Z",fill:`url(#${y}-paint0)`}),U.jsx("path",{d:"M24.0032 47.6008C23.7918 47.6008 23.5819 47.5449 23.3943 47.4392L5.68536 37.4363C5.5812 37.3781 5.48241 37.3008 5.39127 37.2066C5.37212 37.1874 5.32771 37.1476 5.30626 37.1292C5.28635 37.1085 5.27104 37.097 5.24807 37.0787C5.22815 37.058 5.21285 37.0465 5.18987 37.0281C4.90803 36.7624 4.74414 36.381 4.74414 35.9873V16.1554C4.74414 15.6331 5.01678 15.1552 5.45561 14.9101L23.3797 4.90727C23.572 4.80005 23.7872 4.74414 24.0039 4.74414C24.2207 4.74414 24.4359 4.80081 24.6289 4.90803L42.5522 14.9101C42.9911 15.1552 43.2637 15.6323 43.2637 16.1554V35.9873C43.2637 36.381 43.0998 36.7624 42.8142 37.0319L42.6472 37.1782C42.5262 37.3008 42.4274 37.3789 42.3233 37.4379L24.6136 47.4407C24.4275 47.5456 24.2161 47.6016 24.0047 47.6016L24.0032 47.6008Z",fill:`url(#${y}-paint1)`}),U.jsx("path",{d:"M7.93457 34.377V17.7831C7.93457 17.1406 8.27693 16.5463 8.83218 16.2239L23.0986 7.9365C23.6584 7.61101 24.3507 7.61101 24.9106 7.9365L39.177 16.2239C39.733 16.547 40.0746 17.1406 40.0746 17.7831V34.377C40.0746 35.0195 39.7322 35.6138 39.177 35.9363L24.9106 44.2236C24.3507 44.5491 23.6584 44.5491 23.0986 44.2236L8.83218 35.9363C8.27616 35.6131 7.93457 35.0195 7.93457 34.377Z",fill:`url(#${y}-paint2)`}),U.jsx("path",{d:"M24 43.7692C23.8062 43.7692 23.6155 43.7187 23.4478 43.6207L9.18063 35.3333C8.84288 35.1365 8.63379 34.7727 8.63379 34.3821V17.7883C8.63379 17.3977 8.84363 17.0331 9.18137 16.8371L23.447 8.54897C23.6147 8.4517 23.8062 8.40039 24 8.40039C24.1937 8.40039 24.3852 8.4517 24.5529 8.54973L38.8193 16.8371C39.1571 17.0339 39.3662 17.3977 39.3662 17.7883V34.3821C39.3662 34.7727 39.1563 35.1373 38.8193 35.3333L24.5529 43.6207C24.3844 43.7179 24.1937 43.7692 24 43.7692Z",fill:`url(#${y}-paint3)`}),W&&U.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.382 0.421875C22.8746 0.14804 23.4325 0 24.0004 0C24.5684 0 25.1262 0.148034 25.6189 0.421875L25.6204 0.422695L46.2323 11.9251C47.3309 12.5395 48 13.7125 48 14.9738V37.7813C48 38.7642 47.5897 39.6758 46.9089 40.3222C46.8686 40.3613 46.8331 40.3906 46.8198 40.4015L46.8176 40.4033C46.8059 40.4141 46.7953 40.4235 46.7863 40.4313C46.7745 40.4415 46.7635 40.4506 46.7559 40.4569C46.7456 40.4665 46.7362 40.475 46.7281 40.4822C46.7167 40.4923 46.7062 40.5012 46.6981 40.508C46.4916 40.7148 46.2522 40.9046 45.9767 41.0601L25.6077 52.5645C25.1172 52.84 24.5614 52.9876 23.9996 52.9876C23.4389 52.9876 22.8838 52.8414 22.3923 52.5654L2.02332 41.0601C2.02323 41.0601 2.02341 41.0602 2.02332 41.0601C1.74791 40.9046 1.50837 40.7147 1.30195 40.508C1.29378 40.5012 1.28328 40.4923 1.27195 40.4822C1.26241 40.4738 1.25125 40.4637 1.23893 40.452C1.23177 40.446 1.22039 40.4364 1.20796 40.4255C1.20109 40.4195 1.19327 40.4125 1.18471 40.4046L1.18346 40.4036C1.16964 40.3923 1.13132 40.361 1.08729 40.3177C0.407167 39.6708 0 38.7604 0 37.7804V14.9738C0 13.7137 0.667127 12.5414 1.76533 11.926L1.76691 11.9251L22.382 0.421875ZM23.3546 2.16947C23.3543 2.16964 23.354 2.16981 23.3537 2.16998L2.74302 13.6707C2.74276 13.6709 2.74329 13.6706 2.74302 13.6707C2.29511 13.9221 2 14.4163 2 14.9738V37.7804C2 38.2017 2.17455 38.5916 2.46564 38.8685L2.47305 38.8746C2.48575 38.8851 2.50578 38.902 2.52874 38.9231L2.53266 38.9267C2.53828 38.9314 2.54639 38.9383 2.55449 38.9452C2.56665 38.9557 2.58298 38.9701 2.60154 38.9876L2.61484 38.9987C2.62924 39.0109 2.65137 39.0301 2.67658 39.0542L2.68929 39.0664L2.70156 39.079C2.79922 39.1794 2.90093 39.2589 3.00642 39.3184L23.3715 50.8215C23.3713 50.8214 23.3718 50.8216 23.3715 50.8215C23.5668 50.931 23.7855 50.9876 23.9996 50.9876C24.2123 50.9876 24.4311 50.9312 24.6272 50.8214C24.6276 50.8211 24.628 50.8209 24.6285 50.8206L44.9934 39.3185C45.0988 39.259 45.2008 39.1794 45.2984 39.079L45.3107 39.0664L45.3234 39.0542C45.3486 39.0301 45.3708 39.0109 45.3852 38.9987L45.3985 38.9875C45.42 38.9673 45.4388 38.9511 45.4521 38.9399C45.4596 38.9335 45.4672 38.9272 45.4729 38.9225C45.4929 38.9042 45.5104 38.8893 45.5223 38.8793L45.5355 38.8682C45.8258 38.5907 46 38.201 46 37.7813V14.9738C46 14.4157 45.7051 13.9222 45.2577 13.6716M45.2577 13.6716L24.6472 2.16998C24.647 2.16985 24.6475 2.17011 24.6472 2.16998C24.4461 2.05832 24.2214 2 24.0004 2C23.7796 2 23.5557 2.05788 23.3546 2.16947M2.45025 38.8559C2.44919 38.8551 2.45007 38.8558 2.45192 38.8573L2.45025 38.8559Z",fill:`url(#${y}-paint4)`}),U.jsxs("defs",{children:[U.jsxs("linearGradient",{id:`${y}-paint0`,x1:"24.6344",y1:"3.69747",x2:"24.6344",y2:"47.9538",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{offset:"0.26382",stopColor:"#035165"}),U.jsx("stop",{offset:"0.751345",stopColor:"#033B4A"})]}),U.jsxs("linearGradient",{id:`${y}-paint1`,x1:"24.0032",y1:"47.6008",x2:"24.0032",y2:"4.74414",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{offset:"0.0797835",stopColor:"#012938"}),U.jsx("stop",{offset:"0.915184",stopColor:"#009FA9"})]}),U.jsxs("linearGradient",{id:`${y}-paint2`,x1:"24.5143",y1:"7.44145",x2:"24.5143",y2:"44.1498",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#32DDE8"}),U.jsx("stop",{offset:"1",stopColor:"#004766"})]}),U.jsxs("linearGradient",{id:`${y}-paint3`,x1:"24",y1:"43.7692",x2:"24",y2:"8.40039",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#00506E"}),U.jsx("stop",{offset:"0.442",stopColor:"#004862"}),U.jsx("stop",{offset:"1",stopColor:"#00222F"})]}),U.jsxs("linearGradient",{id:`${y}-paint4`,x1:"24",y1:"1",x2:"24",y2:"51.9876",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#01B6BF"}),U.jsx("stop",{offset:"1",stopColor:"#015872"})]})]})]})},S="numberBackground--ab481",o="selected--15785",d=({selected:W})=>{const y=l.useMemo((()=>`${String(Math.random())}-statistics-number-background`),[]);return U.jsxs("svg",{id:`${y}`,className:i.A(S,{[o]:W}),width:"100%",viewBox:"0 0 48 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("use",{href:`#${y}-path`,fill:"var(--bg-color-1)",fillOpacity:"0.8"}),U.jsx("use",{href:`#${y}-path`,fill:`url(#${y}-bg)`,fillOpacity:"0.2"}),U.jsx("use",{href:`#${y}-path`,stroke:`url(#${y}-frame)`,strokeWidth:"var(--frame-width)"}),U.jsxs("defs",{children:[U.jsx("path",{id:`${y}-path`,d:"M33.6 5H46C46.5523 5 47 5.44771 47 6V34C47 34.5523 46.5523 35 46 35H33.6H14.4H2C1.44771 35 1 34.5523 1 34V6C1 5.44772 1.44772 5 2 5H14.4H33.6Z"}),U.jsxs("linearGradient",{id:`${y}-bg`,x1:"24",y1:"4",x2:"24",y2:"36",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"var(--bg-color-2)"}),U.jsx("stop",{offset:"1",stopColor:"var(--bg-color-3)"})]}),U.jsxs("linearGradient",{id:`${y}-frame`,x1:"24",y1:"5.74545",x2:"24",y2:"33.6727",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"var(--frame-color-1)"}),U.jsx("stop",{offset:"0.595258",stopColor:"var(--frame-color-2)"}),U.jsx("stop",{offset:"1",stopColor:"var(--frame-color-3)"})]})]})]})},q=({selected:W})=>{const y=l.useMemo((()=>`${String(Math.random())}-statistics-sb-background`),[]);return U.jsxs("svg",{id:`${y}`,className:i.A(G,Y),width:"100%",viewBox:"0 0 50 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("path",{d:"M24.9994 41.9537C22.358 41.9537 20.0104 40.5502 18.7343 38.2295L14.9347 31.325L4.69115 12.9377C3.62988 11.0341 3.80307 8.78889 5.12619 6.93374C6.44239 5.08898 8.62383 4 10.9771 4H39.0225C41.3765 4 43.5579 5.08829 44.8734 6.93374C46.1965 8.78959 46.3704 11.0341 45.3091 12.9377L34.997 31.4435L31.2646 38.2295C29.9892 40.5502 27.6409 41.953 25.0001 41.953L24.9994 41.9537Z",fill:`url(#${y}-paint0)`}),U.jsx("path",{d:"M24.9996 40.8307C22.7308 40.8307 20.7143 39.6357 19.6177 37.6566L15.8035 30.7798L5.5177 12.4589C4.61645 10.8532 4.75569 8.95575 5.86961 7.38323C6.99877 5.79132 8.8851 4.85059 10.928 4.85059H39.0704C41.114 4.85059 43.001 5.79132 44.1288 7.38323C45.2434 8.95644 45.3827 10.8532 44.4814 12.4589L34.1305 30.8927L30.3814 37.6566C29.2855 39.635 27.2683 40.8307 24.9996 40.8307Z",fill:`url(#${y}-paint1)`}),U.jsx("path",{d:"M25.0004 40.3508C22.8903 40.3508 21.0158 39.2445 19.9961 37.4101L16.1763 30.5451L5.87186 12.2533C5.03919 10.775 5.16458 9.02588 6.18983 7.57598C7.23863 6.09283 8.99888 5.21582 10.9074 5.21582H39.0907C40.9999 5.21582 42.7601 6.09283 43.8083 7.57598C44.8335 9.02657 44.9596 10.775 44.1269 12.2533L33.7594 30.6566L30.0034 37.4101C28.9837 39.2445 27.1091 40.3508 24.999 40.3508H25.0004Z",fill:`url(#${y}-paint2)`}),U.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.7101 33.8162L11.0292 13.113C10.13 11.519 11.4171 9.51562 13.3132 9.51562H36.6847C38.5808 9.51562 39.8679 11.519 38.9687 13.113L27.2878 33.8162C26.257 35.6429 23.7409 35.6429 22.7101 33.8162Z",fill:`url(#${y}-paint3)`}),U.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3936 13.4778C9.26161 11.4779 10.7063 9 13.0044 9H36.1269C38.4249 9 39.8697 11.4779 38.7377 13.4778L27.1764 33.9027C26.0276 35.9323 23.1037 35.9323 21.9549 33.9027L10.3936 13.4778ZM13.0044 10C11.4724 10 10.5092 11.6519 11.2639 12.9852L22.8251 33.4101C23.591 34.7631 25.5403 34.7631 26.3062 33.4101L37.8674 12.9852C38.6221 11.6519 37.6589 10 36.1269 10H13.0044Z",fill:`url(#${y}-paint4)`}),W&&U.jsx("path",{d:"M24.9993 44.0462C21.7061 44.0462 18.7791 42.2964 17.1883 39.4031L12.451 30.7949L1.8617 12.1431C0.538553 9.76974 0.754471 6.97057 2.40409 4.65766C4.04506 2.35769 6.76477 1 9.69866 1H40.3008C43.2356 1 45.9553 2.35683 47.5954 4.65766C49.245 6.97143 49.4618 9.76974 48.1386 12.1431L37.4638 30.9425L32.8104 39.4031C31.2203 42.2964 28.2925 44.0453 25.0002 44.0453L24.9993 44.0462Z",stroke:`url(#${y}-paint5)`,strokeWidth:"2"}),U.jsxs("defs",{children:[U.jsxs("linearGradient",{id:`${y}-paint0`,x1:"25.0001",y1:"41.9537",x2:"25.0001",y2:"4",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#330E0E"}),U.jsx("stop",{offset:"0.577",stopColor:"#511516"}),U.jsx("stop",{offset:"1",stopColor:"#661A1B"})]}),U.jsxs("linearGradient",{id:`${y}-paint1`,x1:"24.9996",y1:"40.8307",x2:"24.9996",y2:"4.85128",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#FFB63F"}),U.jsx("stop",{offset:"0.881",stopColor:"#EBDCB0"})]}),U.jsxs("radialGradient",{id:`${y}-paint2`,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(24.9994 22.783) rotate(12.3228) scale(23.7168 39.0521)",children:[U.jsx("stop",{stopColor:"#250908"}),U.jsx("stop",{offset:"0.343192",stopColor:"#430E10"}),U.jsx("stop",{offset:"0.673",stopColor:"#942420"}),U.jsx("stop",{offset:"0.679",stopColor:"#952420"}),U.jsx("stop",{offset:"0.818",stopColor:"#BB3528"}),U.jsx("stop",{offset:"0.93",stopColor:"#D23F2D"}),U.jsx("stop",{offset:"1",stopColor:"#DB432F"})]}),U.jsxs("radialGradient",{id:`${y}-paint3`,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(26.5698 17.935) scale(13.992 13.6227)",children:[U.jsx("stop",{stopColor:"#9E2628"}),U.jsx("stop",{offset:"0.259",stopColor:"#6E1B1C"}),U.jsx("stop",{offset:"0.543",stopColor:"#561515"}),U.jsx("stop",{offset:"1",stopColor:"#3E0A0A"})]}),U.jsxs("linearGradient",{id:`${y}-paint4`,x1:"24.5656",y1:"9.5",x2:"24.5656",y2:"37.5",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#D5392C"}),U.jsx("stop",{offset:"1",stopColor:"#9B0600"})]}),U.jsxs("linearGradient",{id:`${y}-paint5`,x1:"25",y1:"1",x2:"25",y2:"45.0462",gradientUnits:"userSpaceOnUse",children:[U.jsx("stop",{stopColor:"#C52820"}),U.jsx("stop",{offset:"1",stopColor:"#A10905"})]})]})]})},s=W=>{const{selected:y,betCode:M,bonusGame:i}=W;switch(i){case x.K.StormBonus:return U.jsx(q,{selected:y});case x.K.MonsterMash:return U.jsx(h,{selected:y});case x.K.HotSpot:return U.jsx(O,{selected:y});case x.K.Fireball:return U.jsx(T,{selected:y});case x.K.BatteryCharger:return U.jsx(c,{selected:y})}return M===e.x_.EvenMoney?U.jsx(A,{selected:y}):U.jsx(d,{selected:y})};var N=M(343768),_=M(60365);const p="cell--dc4f0",b="multiplier--a630e",m="topMultipliers--112e6",z="bottomMultipliers--3fed9",K="label--40c24",P="evenMoney--6cdd4",R="evenMoneyIcon--4580f",I="bonusLabelGradient--9a2cc",E=W=>{const{result:y,withFrame:M=!1,bottomMultipliers:x=!1}=W,{result:n,bonus:k}=y,{bonusId:l,multiplier:G}=k||{},Y=(c=n)===e.x_.EvenMoney?U.jsx("div",{className:P,children:U.jsx(N.p,{className:R})}):e.wQ.includes(c)?U.jsx(_.I,{className:K,children:parseInt(c,10)}):U.jsx("div",{});var c;const D=null==G?void 0:G.value;return U.jsxs("div",{className:p,children:[U.jsx(s,{bonusGame:l,betCode:n,selected:M}),l&&U.jsx(g,{className:I,bonusGame:l}),Y,D&&U.jsx("div",{className:i.A(b,{[z]:x,[m]:!x}),children:U.jsx(u.e,{value:`${D}x`})})]})}},236035:(W,y,M)=>{M.d(y,{Y:()=>n});var U=M(64922),i=M(699695),x=M(86977);const n=({className:W,children:y,...M})=>U.jsx("div",{"data-role":"help-component-container",className:i.A(x.A.helpComponentContainer,W),...M,children:y})},561424:(W,y,M)=>{M.d(y,{Q5:()=>m});var U=M(64922),i=M(699695),x=M(912986),n=M(377810),k=M(170877),g=M(653677),u=M(575381),e=M(321480),l=M(583571),G=M(604405),Y=M(898855),c=M(682914),D=M(42885),r=M(537820),A=M(810770),T=M(171526),O=M(236035),h=M(71036);const S=6;var o;function d(W){return function(y){return U.jsx(A.v,{...y,chipColors:T.Vv(W,1)})}}(function(W){W["Revolver"]="Revolver",W["Scrolling"]="Scrolling",W["Expanded"]="Expanded"})(o||(o={}));const q=W=>W.reduce(((W,y)=>(W.push({value:y,enabled:!0}),W)),[]);function s(W){return U.jsx(u.X,{addTooltip:x.A,addChipDragTooltipWithLog:x.A,...W})}const N=W=>U.jsx(e.L,{hasCashier:!1,onChipSelected:x.A,onCashierClick:x.A,direction:l.O.Up,currencyCode:"$",chips:q(W),ChipComponent:d(W),itemComponent:s,isChipStackOpen:!0,selectedValue:25}),_=W=>U.jsx(G.H,{chips:q(W),ChipComponent:d(W),onToggleClick:x.A,selectedValue:25,setSelectedChipElement:x.A,isRevolverOpen:!0,direction:l.O.Up}),p={[k.OD.Tablet]:o.Scrolling,[k.OD.Phone]:o.Revolver,[k.OD.Desktop]:o.Expanded};function b(W,y,M){switch(W){case o.Scrolling:return U.jsx("div",{className:h.A.scrollingWrapper,children:U.jsx(c.s,{chips:q(y),selectedValue:y[2],ChipItemComponent:(i=y,function(W){return U.jsx(Y.f,{addLowBalanceTooltip:x.A,addChipDragTooltipWithLog:x.A,...W,ChipComponent:d(i),setSelectedChipElement:x.A})}),fitToContainer:!0,shouldHighlightSelectedChip:!0,dimensions:{}})});case o.Revolver:return U.jsx("div",{className:h.A.revolverWrapper,children:U.jsx(D.q,{isOpen:!0,itemListComponent:N(y),toggleComponent:_(y),overlay:!1,onToggleClick:x.A,direction:l.O.Up,setChipStackElement:x.A})});case o.Expanded:return U.jsx("div",{className:h.A.expandedWrapper,children:U.jsx(r.M,{setSelectedChipElement:x.A,chips:q(y),onChipSelected:x.A,selectedValue:y[2],currencySymbol:"$",addChipDragTooltip:x.A,gameDimensions:{},chipColors:T.Vv(y,1),size:M?"md":"lg",showHover:!1})})}var i}const m=n.memo((({chipAmounts:W,...y})=>{const M="type"in y?y.type:p[y.platform],x=W.length>S?W.slice(0,S):W;return U.jsxs(U.Fragment,{children:[U.jsx("p",{children:U.jsx(g.q,{htmlContent:!0,children:"help.placeBets.chipDisplay"})}),U.jsx(O.Y,{children:U.jsx("div",{className:i.A(h.A.chipStackContainer,{[h.A.chipStackRevolver]:M===o.Revolver,[h.A.expanded]:M===o.Expanded,[h.A.sm]:y.isMobile}),children:b(M,x,y.isMobile)})})]})}));m.displayName="ChipStackSection"},946872:(W,y,M)=>{M.d(y,{D:()=>c});var U=M(64922),i=M(377810),x=M(653677),n=M(346160),k=M(13942),g=M(215672),u=M(822381),e=M(236035),l=M(89228);const G={width:u.o1(40),fontSize:u.o1(1),height:u.o1(4)},Y={width:"100%",height:u.o1(4)},c=i.memo((({isDesktop:W,trafficLightWidth:y})=>U.jsxs(U.Fragment,{children:[U.jsx("p",{children:U.jsx(x.q,{htmlContent:!0,children:"help.trafficlight"})}),U.jsx(e.Y,{className:l.A.trafficLightContainer,children:U.jsx("div",{className:l.A.trafficLight,style:W?{...G,width:y||G.width}:Y,children:U.jsx(k.n,{animate:!1,color:"green",text:n.Tl("help.placeBets.trafficLightLabel"),isHelp:!1,theme:W?g.H.Desktop:g.H.MobileDefault,fontTheme:k.k.Small})})})]})));c.displayName="TrafficLightSection"},93727:(W,y,M)=>{W.exports=M.p+"images/iconbc.c57d46f8.webp"},87600:(W,y,M)=>{W.exports=M.p+"images/iconfb.2afe7fb2.webp"},295213:(W,y,M)=>{W.exports=M.p+"images/iconhs.f7823b43.webp"},423441:(W,y,M)=>{W.exports=M.p+"images/iconls.a2e3c76a.webp"},843826:(W,y,M)=>{W.exports=M.p+"images/iconmm.f64db248.webp"},974486:(W,y,M)=>{M.d(y,{A:()=>i,b:()=>U});var U=M(686418);const i=U},444792:(W,y,M)=>{M.d(y,{A:()=>n});var U=M(156568),i=M(258214),x="[object Boolean]";const n=function(W){return!0===W||!1===W||i.A(W)&&U.A(W)==x}}},g={};function u(W){var y=g[W];if(void 0!==y)return y.exports;var M=g[W]={id:W,loaded:!1,exports:{}};return k[W].call(M.exports,M,M.exports,u),M.loaded=!0,M.exports}u.m=k,W=[],u.O=(y,M,U,i)=>{if(!M){var x=1/0;for(e=0;e<W.length;e++){for(var[M,U,i]=W[e],n=!0,k=0;k<M.length;k++)(!1&i||x>=i)&&Object.keys(u.O).every((W=>u.O[W](M[k])))?M.splice(k--,1):(n=!1,i<x&&(x=i));if(n){W.splice(e--,1);var g=U();void 0!==g&&(y=g)}}return y}i=i||0;for(var e=W.length;e>0&&W[e-1][2]>i;e--)W[e]=W[e-1];W[e]=[M,U,i]},u.n=W=>{var y=W&&W.__esModule?()=>W["default"]:()=>W;return u.d(y,{a:y}),y},M=Object.getPrototypeOf?W=>Object.getPrototypeOf(W):W=>W.__proto__,u.t=function(W,U){if(1&U&&(W=this(W)),8&U)return W;if("object"==typeof W&&W){if(4&U&&W.__esModule)return W;if(16&U&&"function"==typeof W.then)return W}var i=Object.create(null);u.r(i);var x={};y=y||[null,M({}),M([]),M(M)];for(var n=2&U&&W;"object"==typeof n&&!~y.indexOf(n);n=M(n))Object.getOwnPropertyNames(n).forEach((y=>x[y]=()=>W[y]));return x["default"]=()=>W,u.d(i,x),i},u.d=(W,y)=>{for(var M in y)u.o(y,M)&&!u.o(W,M)&&Object.defineProperty(W,M,{enumerable:!0,get:y[M]})},u.f={},u.e=W=>Promise.all(Object.keys(u.f).reduce(((y,M)=>(u.f[M](W,y),y)),[])),u.u=W=>"js/"+({3474:"evo-promotions.SpinGiftsFrame",3863:"testTools",17474:"evo-game.mobileChat",22421:"testTools.PixiDevToolsPlugin",24622:"evo-promotions.SpinGiftsWheelAnimation",30164:"game-client-history-round-info",35213:"help.lightningStorm",36302:"evo-promotions.SpinGiftsCampaignRules",39340:"history.roundView",44806:"gameTestToolsPlugins",47290:"evo-promotions.SpinGiftsTermsConditions",50967:"help.common",54504:"evo-promotions.cashGifts",59760:"evo-game.chat",62557:"lightningStormTestToolsPlugins",66703:"gameTestToolsSafeAreaPlugin",66885:"native-utilities",73375:"evo-promotions.spinGifts",73460:"evo-promotions.giftsWheel",77821:"evo-game.emojiMenu",80616:"video-lib-local",85687:"testTools.why-did-you-render"}[W]||W)+"."+{3474:"1a89cdcf",3863:"c68406f1",10306:"a97cff13",14291:"2f77c6ae",17474:"36703dd7",22421:"0fea869a",24622:"c19aa584",27672:"21b8bdb0",30164:"81c32c92",32184:"a21bca64",35213:"ae73a095",36302:"63c3f631",37927:"b03e4e3d",39340:"87393490",42447:"0fe47cec",44806:"0741de9d",45444:"ef538133",47290:"25d266d1",50967:"2b6414a9",54504:"de8d33cf",59760:"c5c3f75e",62557:"9f5ccb00",66703:"d22f8b42",66885:"cf7c7b01",73375:"74edf8f6",73460:"b312a388",77821:"cadc9005",80616:"10095eb7",85687:"8dab9d33"}[W]+".js",u.miniCssF=W=>3863===W?"styles/testtools.c68406f1.css":36302===W?"styles/evopromoti.spingiftsc.63c3f631.css":47290===W?"styles/evopromoti.spingiftst.25d266d1.css":50967===W?"styles/help.common.2b6414a9.css":30164===W?"styles/gameclient.81c32c92.css":39340===W?"styles/history.roundview.87393490.css":17474===W?"styles/evogame.mobilechat.36703dd7.css":59760===W?"styles/evogame.chat.c5c3f75e.css":54504===W?"styles/evopromoti.cashgifts.de8d33cf.css":73375===W?"styles/evopromoti.spingifts.74edf8f6.css":77821===W?"styles/evogame.emojimenu.cadc9005.css":44806===W?"styles/gametestto.0741de9d.css":62557===W?"styles/lightnings.9f5ccb00.css":35213===W?"styles/help.lightnings.ae73a095.css":73460===W?"styles/evopromoti.giftswheel.b312a388.css":24622===W?"styles/evopromoti.spingiftsw.c19aa584.css":3474===W?"styles/evopromoti.spingiftsf.1a89cdcf.css":22421===W?"styles/testtools.pixidevtoo.0fea869a.css":66703===W?"styles/gametestto.d22f8b42.css":void 0,u.hmd=W=>((W=Object.create(W)).children||(W.children=[]),Object.defineProperty(W,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+W.id)}}),W),u.o=(W,y)=>Object.prototype.hasOwnProperty.call(W,y),U={},i="/frontend/evo/r2/:",u.l=(W,y,M,x)=>{if(U[W])U[W].push(y);else{var n,k;if(void 0!==M)for(var g=document.getElementsByTagName("script"),e=0;e<g.length;e++){var l=g[e];if(l.getAttribute("src")==W||l.getAttribute("data-webpack")==i+M){n=l;break}}n||(k=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=NaN,u.nc&&n.setAttribute("nonce",u.nc),n.setAttribute("data-webpack",i+M),n.src=W),U[W]=[y];var G=(y,M)=>{n.onerror=n.onload=null,clearTimeout(Y);var i=U[W];if(delete U[W],n.parentNode&&n.parentNode.removeChild(n),i&&i.forEach((W=>W(M))),y)return y(M)},Y=setTimeout(G.bind(null,void 0,{type:"timeout",target:n}),window.EVO_CDN?15e3:6e4);n.onerror=G.bind(null,n.onerror),n.onload=G.bind(null,n.onload),k&&document.head.appendChild(n)}},u.r=W=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(W,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(W,"__esModule",{value:!0})},u.nmd=W=>(W.paths=[],W.children||(W.children=[]),W),u.j=48560,u.p=(globalThis.EVO_CDN||"")+"/frontend/evo/r2/",x=W=>new Promise(((y,M)=>{var U=u.miniCssF(W),i=u.p+U;if(((W,y)=>{for(var M=document.getElementsByTagName("link"),U=0;U<M.length;U++){var i=(n=M[U]).getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(i===W||i===y))return n}var x=document.getElementsByTagName("style");for(U=0;U<x.length;U++){var n;if((i=(n=x[U]).getAttribute("data-href"))===W||i===y)return n}})(U,i))return y();((W,y,M,U)=>{var i=document.createElement("link");i.setAttribute("data-sandbox","ignore"),i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=x=>{if(i.onerror=i.onload=null,"load"===x.type)M();else{var n=x&&("load"===x.type?"missing":x.type),k=x&&x.target&&x.target.href||y,g=new Error("Loading CSS chunk "+W+" failed.\n("+k+")");g.code="CSS_CHUNK_LOAD_FAILED",g.type=n,g.request=k,i.parentNode.removeChild(i),U(g)}},i.href=y,document.head.appendChild(i)})(W,i,y,M)})),n={48560:0},u.f.miniCss=(W,y)=>{n[W]?y.push(n[W]):0!==n[W]&&{3474:1,3863:1,17474:1,22421:1,24622:1,30164:1,35213:1,36302:1,39340:1,44806:1,47290:1,50967:1,54504:1,59760:1,62557:1,66703:1,73375:1,73460:1,77821:1}[W]&&y.push(n[W]=x(W).then((()=>{n[W]=0}),(y=>{throw delete n[W],y})))},(()=>{var W={48560:0};u.f.j=(y,M)=>{var U=u.o(W,y)?W[y]:void 0;if(0!==U)if(U)M.push(U[2]);else if(1){var i=new Promise(((M,i)=>U=W[y]=[M,i]));M.push(U[2]=i);var x=u.p+u.u(y),n=new Error;u.l(x,(M=>{if(u.o(W,y)&&(0!==(U=W[y])&&(W[y]=void 0),U)){var i=M&&("load"===M.type?"missing":M.type),x=M&&M.target&&M.target.src;n.message="Loading chunk "+y+" failed.\n("+i+": "+x+")",n.name="ChunkLoadError",n.type=i,n.request=x,U[1](n)}}),"chunk-"+y,y)}},u.O.j=y=>0===W[y];var y=(y,M)=>{var U,i,[x,n,k]=M,g=0;if(x.some((y=>0!==W[y]))){for(U in n)u.o(n,U)&&(u.m[U]=n[U]);if(k)var e=k(u)}for(y&&y(M);g<x.length;g++)i=x[g],u.o(W,i)&&W[i]&&W[i][0](),W[i]=0;return u.O(e)},M=self["webpackChunk_frontend_evo_r2_"]=self["webpackChunk_frontend_evo_r2_"]||[];M.forEach(y.bind(null,0)),M.push=y.bind(null,M.push.bind(M))})(),u.O(void 0,[35375,79949],(()=>u(515924))),u.O(void 0,[35375,79949],(()=>u(658867)));var e=u.O(void 0,[35375,79949],(()=>u(40308)));e=u.O(e)})();
//# sourceMappingURL=https://sourcemaps.egcdn.com/frontend/evo/r2/js/lightnings.v0.cc1cf9de.js.map