"use strict";(()=>{var W,n,I,h,q,$,k={110482:(W,n,I)=>{I.d(n,{A:()=>h});const h={svg:"svg--7e996",svgBetspot:"svgBetspot--43e31",gradientLight:"gradientLight--ba468",gradientDark:"gradientDark--2ae9f",strokeLight:"strokeLight--26bed",strokeDark:"strokeDark--60bd1",hasBet:"hasBet--8e3d4",blue:"blue--5d4e7",red:"red--7fb61",green:"green--1e33e",gray:"gray--61479",ochre:"ochre--aa19d",violet:"violet--0ac0a",disabled:"disabled--27322",win:"win--e65a1",bettingGrid:"bettingGrid--0835e",forceLayerToTop:"forceLayerToTop--0f0f9",mainContainer:"mainContainer--2572f",player:"player--b46f0",banker:"banker--abb19",tie:"tie--01ff7",short:"short--9aca2",wide:"wide--4b304",chipContainer:"chipContainer--9cdca",small:"small--639f1",bubble:"bubble--2b7a1",redEnvelopeBonus:"redEnvelopeBonus--36e84",isVertical:"isVertical--28984",betspot:"betspot--53c9f",right:"right--d8912",item:"item--8e08a",vertical:"vertical--98be1",left:"left--fcc6a",single:"single--27bc5",betspotTitle:"betspotTitle--d0907",payout:"payout--c827b",center:"center--4c7f4",envelopeContainer:"envelopeContainer--8d480",payoutContainer:"payoutContainer--a32db",animatedPayout:"animatedPayout--99187",bettingStatistics:"bettingStatistics--1bd62",indicatorPercentage:"indicatorPercentage--ac6cf",collapsed:"collapsed--a81f9",nonTransform:"nonTransform--9a65c",liveStatisticsContainer:"liveStatisticsContainer--fc00f",score:"score--393b3",redEnvelope:"redEnvelope--906c0",title:"title--967a1",hasLongBetSpotName:"hasLongBetSpotName--1cacc",spotTitleSmall:"spotTitleSmall--8dd7a",titleContainer:"titleContainer--98fa0",isSmallPayoutFontSize:"isSmallPayoutFontSize--fb42a",symbol:"symbol--a11ac",bettingTime:"bettingTime--7f9cd",isMirrored:"isMirrored--d9896",desktop:"desktop--53489",startGradient:"startGradient--8f326",stopGradient:"stopGradient--83651",gradientTransition:"gradientTransition--cfdc2",animate:"animate--6c17d",shape:"shape--84077",highlightSvgKeyframes:"highlightSvgKeyframes--56b80",mainShape:"mainShape--f586c",tieShape:"tieShape--d6bfd",highlight:"highlight--1cf10",allowOverflow:"allowOverflow--d7f75",rectShape:"rectShape--a9f3a",adaptiveSideBetSpots:"adaptiveSideBetSpots--53905",singleSideBetSpotsRow:"singleSideBetSpotsRow--8e650",onlyPairs:"onlyPairs--f14f6",adjustPayoutMarginTop:"adjustPayoutMarginTop--65847",sideBetSpots:"sideBetSpots--f61cf",addPayoutMarginBottom:"addPayoutMarginBottom--84002",animatedPayoutsContainer:"animatedPayoutsContainer--057ec",animateOut:"animateOut--d8168",skipAnimation:"skipAnimation--7f1bd",wrapBetSpotOverlay:"wrapBetSpotOverlay--418ff",betSpotOverlay:"betSpotOverlay--5247d",betSpotSecondOverlay:"betSpotSecondOverlay--3c814",faded:"faded--70f38",payoutSwitchContentKeyframes:"payoutSwitchContentKeyframes--6dc8f",payoutToggleKeyframes:"payoutToggleKeyframes--9c6cd"}},856062:(W,n,I)=>{I.d(n,{A:()=>h});const h={cardsHand:"cardsHand--538f4",enhanced:"enhanced--181e0",isPortrait:"isPortrait--28ada",decreased:"decreased--7c50a",toRight:"toRight--d458d",lifted:"lifted--caace",liftedCentral:"liftedCentral--747f2",simple:"simple--a062f",cards:"cards--d48f8",cardPlaceHolder:"cardPlaceHolder--ded29",card:"card--8d20a",horizontal:"horizontal--eb452",cardOverlayPosition:"cardOverlayPosition--8db88",isSmallIndent:"isSmallIndent--fa9ac",small:"small--90cfe",animatedCardAppearance:"animatedCardAppearance--1b7c0",fadeInFromBottomKeyframes:"fadeInFromBottomKeyframes--98c6a",fadeInFromRightKeyframes:"fadeInFromRightKeyframes--52cfe"}},32991:(W,n,I)=>{I.d(n,{A:()=>h});const h={svg:"svg--c8f9e",isHidden:"isHidden--3f361",animate:"animate--265bb",fadeInKeyframes:"fadeInKeyframes--e8a33",pulsing:"pulsing--39b17",pulsingKeyframes:"pulsingKeyframes--03bc4"}},78886:(W,n,I)=>{I.d(n,{j:()=>E,c:()=>u});var h=I(64922),q=I(699695),$=I(377810),k=I(414646),_=I(462566),N=I(891527),c=I(403414);const P="showing--c8dbf",S="hiding--f0ae8",g="effects--f6681",B="tooltip--c9c35",E=({feePercentage:W,feeAmount:n,currency:I,animation:_,dimensions:E,isVisible:u,onFeeEffect:Y,onPointerLeave:f,onPointerEnter:r,onPointerUp:K,tooltipComponent:t,Effects:X,role:L,theme:O,animationDelay:Z,animationDuration:d,disappearingDelay:m,feeThemes:R,registerReference:e,isFeeAnimationDelayed:j,withAnimation:z=!0})=>{let v,V,F=1,w="100%",o="100%";!function(W){return"string"!=typeof W}(E)?(V=E,v=E):(F=E.scale,w=E.scaledWidth,v=E.scaledHeight,o=E.absoluteWidth,V=E.absoluteHeight);const D=$.useMemo((()=>X&&h.jsx("div",{className:g,children:h.jsx(X,{animation:_,onAnimation:Y})})),[_,Y,X]),x=function(W,n){const[I,h]=$.useState(!W&&0===n),q=$.useRef(0),k=()=>{q.current&&window.clearTimeout(q.current)};return $.useEffect((()=>(k(),W?h(!1):q.current=window.setTimeout((()=>{h(!0)}),n),()=>{k(),h(!W)})),[W,n]),I}(u,null!=m?m:d),G=N.Q(n,j?0:k.c);return x||!u&&!z?null:h.jsxs("div",{style:{width:w,height:v},onPointerLeave:f,onPointerEnter:r,onPointerUp:K,className:B,children:[t,h.jsx(c.g,{style:{transform:`scale(${F})`,width:o,height:V,fontSize:c._(V),animationDelay:`${u?0:Z}ms`,animationDuration:`${d}ms`},className:q.A({[P]:u&&z,[S]:!u&&z}),role:L,theme:O,feePercentage:W,feeAmount:G,currency:I,effects:D,feeThemes:R,registerReference:e})]})},u=_.u(E)},403414:(W,n,I)=>{I.d(n,{g:()=>t,_:()=>K});var h=I(64922),q=I(699695),$=I(912986),k=I(377810),_=I(732319),N=I(929758),c=I(801399),P=I(50649);const S="fee--2df1e",g="background--8e9c4",B="statusText--379fc",E="feeBackground--9a910",u="fill--982a1",Y="borderTop--6f369",f="borderBottom--5a90d",r=.6;function K(W){return"number"==typeof W?W*r+"px":`calc(${W} * ${r})`}const t=({feePercentage:W,feeAmount:n,currency:I,role:r,style:K,className:t,effects:X,feeThemes:L,registerReference:O=$.A,theme:Z=P.m.Regular})=>{const d=k.useMemo((()=>({...P.e,...L}[Z]||P.e[P.m.Regular])),[L,Z]),m=_.v(O,N.B.Fee),R=k.useMemo((()=>({lightning:null==d?void 0:d.multiplierText,shadow:null==d?void 0:d.textShadow})),[null==d?void 0:d.multiplierText,null==d?void 0:d.textShadow]);return h.jsxs("div",{style:K,className:q.A(S,t),"data-role":r,ref:m,children:[h.jsx("div",{className:g,children:h.jsxs("div",{className:E,children:[h.jsx("div",{className:q.A(Y,null==d?void 0:d.borderTop)}),h.jsx("div",{className:q.A(u,null==d?void 0:d.fill)}),h.jsx("div",{className:q.A(f,null==d?void 0:d.borderBottom)})]})}),h.jsx("div",{className:B,children:h.jsx(c.g,{feePercentage:W,feeAmount:n,currency:I,className:null==d?void 0:d.statusTextContainer,theme:R})}),X]})}},414646:(W,n,I)=>{I.d(n,{c:()=>h});const h=800},801399:(W,n,I)=>{I.d(n,{g:()=>P});var h=I(64922),q=I(699695),$=I(377810),k=I(184787),_=I(587698),N=I(346160);const c="statusTextContainer--1edd5",P=$.memo((({feePercentage:W,feeAmount:n,currency:I,className:$,theme:P})=>{const S=n>0?_.ej(n,{currencySymbol:I}):`${N.Tl("percent_fee",{percent:W})}`;return h.jsx("div",{className:q.A(c,$),children:h.jsx(k.L,{text:S,theme:P})})}))},496904:(W,n,I)=>{I.d(n,{m:()=>_,t:()=>N});const h="borderTop--2efdb",q="borderBottom--50446",$="multiplierText--565ae",k="textShadow--c4804";var _;!function(W){W.Red="red",W.RedStrikeTime="redStrikeTime"}(_||(_={}));const N={[_.Red]:{borderTop:h,borderBottom:q,fill:"fill--5950a",multiplierText:$,textShadow:k},[_.RedStrikeTime]:{borderTop:h,borderBottom:q,fill:"fillStrikeTime--c5e4f",multiplierText:$,textShadow:k}}},50649:(W,n,I)=>{var h;I.d(n,{m:()=>h,e:()=>q}),function(W){W.Regular="regular",W.GoldenLine="goldenLine"}(h||(h={}));const q={[h.Regular]:{borderTop:"borderTop--505aa",borderBottom:"borderBottom--e5b20",fill:"fill--415e7"},[h.GoldenLine]:{borderTop:"borderTop--88cdd",borderBottom:"borderBottom--615a3",fill:"fill--9fffe"}}},261504:(W,n,I)=>{I.d(n,{u:()=>d,H:()=>Z});var h=I(64922),q=I(699695),$=I(266600),k=I(377810),_=I(462566);const N="svgGameStatistics--acd83",c="darkFont--b144f",P="itemWrapper--98ad7",S="item--92c48",g="phone--fe7e7",B="brightTheme--10344",E="isDesktop--dd104",u="largeIcons--23ec6",Y="tablet--8ef78",f="faceLiftBright--0f3a4",r="landscape--42da8",K="count--ae30a",t="baccaratV4Mode--69fa4",X="value--fa5ef",L="smallIcons--c830c",O=_.u((({item:W,count:n,itemStyle:I,countStyle:q,showTooltips:$,onPointerEnter:k,onPointerLeave:_,tooltipComponent:N})=>h.jsxs("div",{className:P,onPointerEnter:k,onPointerLeave:_,children:[h.jsx("div",{className:I,children:W}),h.jsx("div",{className:q,children:n}),$&&N]})));var Z;!function(W){W.Bright="Bright",W.FaceLiftBright="FaceLiftBright"}(Z||(Z={}));class d extends k.Component{shouldComponentUpdate(W){return!$.A(W,this.props)}render(){const{showTooltips:W,statistics:n,roadPredictionTheme:I,isDesktop:$=!1,largeIcons:k=!1,isBaccaratV4Mode:_=!1,tooltipPositionVertical:P,isPhone:d=!1,isTablet:m=!1,isLandscape:R=!1,isSmallIcons:e=!1,isDarkFont:j=!1,fontScale:z}=this.props;return h.jsx("div",{className:q.A(N,{[B]:I===Z.Bright,[f]:I===Z.FaceLiftBright,[E]:$,[g]:d,[Y]:m,[r]:R,[t]:_,[u]:k,[L]:e,[c]:j}),style:{"--font-scale":z},children:Object.keys(n).map((I=>{const k=n[I];return h.jsx(O,{item:k.icon,count:h.jsx("div",{"data-role":I,className:q.A({[X]:_}),children:k.value}),itemStyle:q.A(S,{[E]:$,[Y]:m}),countStyle:q.A(K,{[E]:$,[Y]:m}),showTooltips:W,tooltip:k.tooltipLabel,tooltipPositionVertical:P},I)}))})}}},71665:(W,n,I)=>{I.d(n,{Ot:()=>B,mW:()=>u});var h=I(64922),q=I(752490),$=I(730460),k=I(277082);const _=h.jsx("div",{children:"#"}),N=(W,n)=>h.jsx(k.RoadItemBaccarat,{roadType:k.RoadType.Bead,winnerType:k.WinnerTypeBaccarat.Banker,symbol:W,isLive:n},W),c=(W,n)=>h.jsx(k.RoadItemBaccarat,{roadType:k.RoadType.Bead,winnerType:k.WinnerTypeBaccarat.Player,symbol:W,isLive:n},W),P=(W,n)=>h.jsx(k.RoadItemBaccarat,{roadType:k.RoadType.Bead,winnerType:k.WinnerTypeBaccarat.Tie,symbol:W,isLive:n},W),S=W=>h.jsx(k.RoadItemBaccarat,{roadType:k.RoadType.Bead,winnerType:k.WinnerTypeBaccarat.Legend,additionalType:k.AdditionalTypeBaccarat.Banker,isLive:W}),g=W=>h.jsx(k.RoadItemBaccarat,{roadType:k.RoadType.Bead,winnerType:k.WinnerTypeBaccarat.Legend,additionalType:k.AdditionalTypeBaccarat.Player,isLive:W});function B(W,n){switch(W){case $.I.Chinese:return q.Iq[n].ch;case $.I.Korean:return q.Iq[n].ko;default:return q.Iq[n].en}}function E(W,n,I){return{playerWins:{icon:c(B(n,k.WinnerTypeBaccarat.Player),I),tooltipLabel:"tooltip.player",value:W.playerWins},bankerWins:{icon:N(B(n,k.WinnerTypeBaccarat.Banker),I),tooltipLabel:"tooltip.banker",value:W.bankerWins},ties:{icon:P(B(n,k.WinnerTypeBaccarat.Tie),I),tooltipLabel:"tooltip.tie",value:W.ties}}}function u(W,n,I,h){const q={gameCount:{icon:_,tooltipLabel:"tooltip.totalNumberOfRounds",value:W.gameCount},...E(W,n,h)};return I&&(q.playerPairs={icon:g(h),tooltipLabel:"tooltip.playerPair",value:W.playerPairs},q.bankerPairs={icon:S(h),tooltipLabel:"tooltip.bankerPair",value:W.bankerPairs}),q}},891527:(W,n,I)=>{I.d(n,{Q:()=>k});var h=I(377810),q=I(414646),$=I(876759);function k(W,n=q.c){const I=h.useRef(W),k=h.useMemo((()=>{const h=W>I.current?n:0;return I.current=W,h}),[W]);return function(W,n=0,I=!1){return function(W,n=0,I=!1){const q=h.useRef(W),$=h.useRef(new Set),[k,_]=h.useState(W);return h.useEffect((()=>()=>{for(const W of $.current)window.clearTimeout(W);$.current.clear()}),[]),h.useEffect((()=>{if(I){for(const W of $.current)window.clearTimeout(W);return $.current.clear(),_(W),void(q.current=W)}if(W!==q.current){const I=window.setTimeout((()=>{_(W),$.current.delete(I)}),n);$.current.add(I),q.current=W}}),[W,n,I]),k}(W,$.I()?0:n,I)}(W,k,0===k)}},184787:(W,n,I)=>{I.d(n,{L:()=>r});var h=I(64922),q=I(699695),$=I(95772),k=I(377810),_=I(837557);const N="textContainer--1a1ac",c="text--68a0b",P="placeholder--6cec6",S="base--b286e",g="textBackground--cded2",B="lightning--2aac5",E="shadow--551ae";var u;!function(W){W.Base="multiplierBase"}(u||(u={}));const Y=k.memo((({text:W,fontSize:n,theme:I,withShadow:$})=>{const k=function(W,n){return{fontSize:null!=W?W:"",WebkitTextStrokeWidth:n?"0.01px":void 0}}(n,_.DS.IS_FIREFOX),N=_.DS.IS_FIREFOX?{...k,opacity:.85}:k;return h.jsxs(h.Fragment,{children:[(null==I?void 0:I.textShadow)&&h.jsx("span",{className:q.A(c,null==I?void 0:I.textShadow),children:W}),h.jsx("span",{className:q.A(c,S,null==I?void 0:I.base),style:k,"data-role":u.Base,children:W}),$&&h.jsx("span",{className:q.A(c,E),style:k,children:W}),h.jsx("span",{className:q.A(c,g,(null==I?void 0:I.lightning)||B),style:N,children:W})]})}));var f;!function(W){W.Left="flex-start",W.Center="center",W.Right="flex-end"}(f||(f={}));const r=({text:W,theme:n,align:I=f.Center,isStatic:_=!1,withShadow:S=!0})=>{const g=k.useRef(null),B=k.useRef(null),E=k.useRef(void 0),[u,r]=k.useState({value:_?W:"",fontSize:void 0}),{value:K,fontSize:t}=u,X={justifyContent:I},L=q.A(N,null==n?void 0:n.textContainer),O=k.useCallback((()=>{const n=g.current,I=B.current;if(!n||!I)return;const h=n.getBoundingClientRect().width,q=I.getBoundingClientRect().width,k=window.getComputedStyle(n).fontSize,_=h<q?$.A(h/q,4):1;r({fontSize:1!==_?`calc(${k}*${_})`:void 0,value:W})}),[W]);return k.useEffect((()=>(E.current=requestAnimationFrame(O),()=>{E.current&&cancelAnimationFrame(E.current)})),[O]),h.jsxs("span",{className:L,ref:g,style:X,children:[h.jsx("span",{className:q.A(c,P),ref:B,children:W}),h.jsx(Y,{text:K,fontSize:t,theme:n,withShadow:S})]})}},941691:(W,n,I)=>{var h;I.d(n,{V:()=>h}),function(W){W.None="None",W.WinnerMultiplier="WinnerMultiplier",W.BetPlaced="BetPlaced",W.AnimationStart="AnimationStart"}(h||(h={}))},118812:(W,n,I)=>{I.d(n,{s:()=>B,P:()=>E});var h=I(64922),q=I(699695),$=I(912986),k=I(377810),_=I(732319),N=I(277082),c=I(462566),P=I(261504);const S={icons:"icons--f4e38",brightTheme:"brightTheme--c1e55",faceLiftBright:"faceLiftBright--80399",wideButton:"wideButton--c3d67",item:"item--8df89",shortConvex:"shortConvex--3f76d",lastItem:"lastItem--89af0",isDesktop:"isDesktop--72c6f",tablet:"tablet--c47ba",prediction:"prediction--9877c",Player:"Player--d3a01",Banker:"Banker--84cf1",noSpacing:"noSpacing--42fa2",backgroundBorder:"backgroundBorder--49c52",borderBefore:"borderBefore--925a0",borderAfter:"borderAfter--0ce41",active:"active--8bbe2",phone:"phone--1043d",simpleSymbol:"simpleSymbol--f3e7d",simpleSvgSymbol:"simpleSvgSymbol--14682",small:"small--7fc43",rounded:"rounded--90c01"},g={[P.H.Bright]:S.brightTheme,[P.H.FaceLiftBright]:S.faceLiftBright},B=W=>{const{winnerType:n,probe:I,withTooltip:c,mapColorToWinnerType:B,RoadItem:E,symbol:r,isDesktop:K,isTablet:t,isSmall:X,isShortConvex:L,roadPredictionTheme:O,tooltipComponent:Z,registerRef:d=$.A,ignoreButtonSpacing:m,wideButton:R,probesWinner:e,scorecardTheme:j,onInteraction:z,setProbesWinner:v,onPointerEnter:V,onPointerLeave:F,onPointerUp:w}=W,o=_.v(d,n),D=!!O,x=N.getScorecardTheme(j),G=k.useMemo((()=>D?{backgroundColor:"transparent",borderColor:"transparent"}:{backgroundColor:x.predictionBackground||x.fill,borderColor:x.predictionBackground||x.fill}),[D,x.fill,x.predictionBackground]),y=k.useCallback((()=>{null==z||z(),v(e&&e===n?void 0:n)}),[z,e,v,n]),C=k.useCallback((W=>{y(),null==w||w(W)}),[y,w]),b=k.useCallback((W=>{v(),null==F||F(W)}),[F,v]),l=k.useMemo((()=>K?{onMouseDown:y,onPointerLeave:b}:{onPointerUp:C}),[y,C,b,K]),A=k.useMemo((()=>{return L?S.shortConvex:O?(W=O,Array.isArray(W)?W.map((W=>g[W])):g[W]):void 0;var W}),[L,O]);return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:q.A(S.prediction,S.rounded,S[n],A,{[S.isDesktop]:K,[S.noSpacing]:!!m,[S.tablet]:t,[S.phone]:!K&&!t,[S.wideButton]:K&&R,[S.active]:n===e,[S.small]:X}),ref:o,"data-role":n,...l,onPointerEnter:V,children:[O===P.H.FaceLiftBright&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:q.A(S.backgroundBorder,S.borderBefore)}),h.jsx("div",{className:q.A(S.backgroundBorder,S.borderAfter)})]}),L&&!K?Y(r):u(r,!L),h.jsxs("div",{className:q.A(S.icons,A),style:G,children:[f(E,B,N.RoadType.BigEye,I.bigEye,O),f(E,B,N.RoadType.Small,I.small,O),f(E,B,N.RoadType.Cockroach,I.cockroach,O)]})]}),c&&Z]})},E=c.u(B);function u(W,n=!0){return h.jsxs("div",{className:S.simpleSymbol,children:[W,n?"?":""]})}function Y(W){return h.jsx("div",{className:S.simpleSvgSymbol,children:h.jsx("svg",{width:"100%",height:"75%",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("text",{x:"0",y:"5",fill:"#fff",dominantBaseline:"central",children:W})})})}function f(W,n,I,$,k){if(null==$?void 0:$.color){const _={roadType:I,winnerType:n($.color),isLive:k===P.H.FaceLiftBright};return h.jsx("div",{className:q.A(S.item,{[S.lastItem]:I===N.RoadType.Cockroach}),"data-role":N.RoadType[I],children:h.jsx(W,{..._})})}}},507805:(W,n,I)=>{var h,q,$,k;I.d(n,{$e:()=>$,BV:()=>q,Xo:()=>k,ay:()=>h,ei:()=>c,uj:()=>_,v2:()=>N}),function(W){W.LightningCardBackground="lightningCardBackground",W.LightningCardBorder="lightningCardBorder",W.LightningStrike="LightningStrike",W.ExtraLightningStrike="ExtraLightningStrike",W.LightningBackground="LightningBackground",W.LightningRoad="LightningRoad",W.GameResult="GameResult"}(h||(h={})),function(W){W.Fee="Fee",W.BettingGridCardBorder="BettingGridCardBorder",W.BetSpotBorder="BetSpotBorder"}(q||(q={})),function(W){W.Enabled="Enabled",W.Disabled="Disabled"}($||($={})),function(W){W[W.BetsPlaced=1e3]="BetsPlaced",W[W.Charging=1e3]="Charging",W[W.Strike=1e3]="Strike",W[W.ExtraStrike=800]="ExtraStrike",W[W.CardAppearing=600]="CardAppearing",W[W.MaxDuration=3e6]="MaxDuration",W[W.FeeStart=1e3]="FeeStart",W[W.LightningRoad=900]="LightningRoad"}(k||(k={}));const _=k.Charging,N=k.Charging+k.CardAppearing+_+100,c=400},752490:(W,n,I)=>{I.d(n,{DC:()=>k,G6:()=>N,Iq:()=>P,Iu:()=>B,LH:()=>$,Tf:()=>g,W2:()=>_,iG:()=>c,wq:()=>S});var h=I(277082),q=I(586234);const $=[h.ScorecardThemeNames.WhiteSolid,h.ScorecardThemeNames.BlackDot],k=[h.ScorecardThemeNames.BlackDot,h.ScorecardThemeNames.WhiteSolid],_=[q.K8.Player,q.K8.Banker,q.K8.Tie],N=new Set(_),c="chipstack",P={[h.WinnerTypeBaccarat.Player]:{en:"P",ch:"闲",ko:"플"},[h.WinnerTypeBaccarat.Banker]:{en:"B",ch:"庄",ko:"뱅"},[h.WinnerTypeBaccarat.Tie]:{en:"T",ch:"和",ko:"무"}},S="baccarat.multiplay",g=150,B={leading:!0,trailing:!1}},731675:(W,n,I)=>{I.d(n,{Pj:()=>_,jU:()=>k});var h=I(64922),q=I(377810);const $=q.createContext(null);function k(W,n){return h.jsx($.Provider,{value:W,children:h.jsx(n,{})})}function _(){const W=q.useContext($);if(!W)throw new Error("Store should be provided to StoreContext");return W}},525912:(W,n,I)=>{I.d(n,{v:()=>q});var h=I(586234);const q=[h.K8.SuperSix,h.K8.PerfectPair,h.K8.EitherPair,h.K8.PlayerBonus,h.K8.PlayerPair,h.K8.BankerBonus,h.K8.BankerPair]},333634:(W,n,I)=>{var h,q,$,k,_;I.d(n,{AE:()=>h,Y0:()=>k,g8:()=>$,m1:()=>_,sh:()=>q}),function(W){W.ChipMoveInProgress="chipMoveInProgressValidator",W.BalanceTooLowBet="balanceTooLowBetValidator",W.BettingTime="bettingTimeValidator",W.BettingRestriction="bettingRestrictionValidator",W.MinTableValueBet="minTableValueBetValidator",W.MaxTableValueBet="maxTableValueBetValidator",W.MoveBetCoefficientReduction="moveBetCoefficientReductionValidator",W.BetCoefficientReduction="betCoefficientReductionValidator",W.MaxBetSpotValueBet="maxBetSpotValueBetValidator",W.MinBetSpotValueBet="minBetSpotValueBetValidator",W.NotEnoughMoneyBet="notEnoughMoneyBetValidator",W.CanPlaceBetOnlyOnAvailableSpot="canPlaceBetOnlyOnAvailableSpot"}(h||(h={})),function(W){W.MoveBetToFeeBetSpotInsufficientFund="moveBetToFeeBetSpotInsufficientFundValidator",W.FeeBetInsufficientFund="feeBetInsufficientFund"}(q||(q={})),function(W){W[W.Fatal=0]="Fatal",W[W.Warning=1]="Warning"}($||($={})),function(W){W.WaitingForNextGame="WaitingForNextGame",W.NotEnoughMoney="NotEnoughMoney",W.BalanceTooLow="BalanceTooLow",W.MaxBetSpotValue="MaxBetSpotValue",W.MinBetSpotValue="MinBetSpotValue",W.MaxTableValue="MaxTableValue",W.MinTableValue="MinTableValue",W.LowRiskOppositeBettingRestriction="LowRiskOppositeBettingRestriction",W.ChipMoveInProgress="ChipMoveInProgress",W.BetToMainBetsPercent="BetToMainBetsPercent",W.PlaceMainBetFirst="PlaceMainBetFirst",W.CanPlaceBetOnlyOnAvailableSpot="CanPlaceBetOnlyOnAvailableSpot",W.FeeBetInsufficientFund="FeeBetInsufficientFundValidator"}(k||(k={})),function(W){W.NotEnoughMoneyWithFee="NotEnoughMoneyWithFee",W.FeeBetInsufficientFund="FeeBetInsufficientFundValidator"}(_||(_={}))},386062:(W,n,I)=>{I.d(n,{MJ:()=>_,Zz:()=>q,_y:()=>N,ay:()=>k,qD:()=>$});var h=I(752490);function q(W){let n=0;for(const I in W)if(Object.prototype.hasOwnProperty.call(W,I)){const h=W[I];"number"==typeof h&&(n+=h)}return n}function $(W){return h.W2.reduce(((n,I)=>{var h;return n+(null!==(h=W[I])&&void 0!==h?h:0)}),0)}function k(W,n){const I={};return Object.keys({...W,...n}).forEach((h=>{var q,$;const k=(null!==(q=n[h])&&void 0!==q?q:0)-(null!==($=W[h])&&void 0!==$?$:0);0!==k&&(I[h]=k)})),I}function _(W,n){return q(n)-q(W)}function N(W){return Object.keys(W).filter((n=>{const I=W[n];return void 0!==I&&I>0})).reduce(((n,I)=>(n[I]=W[I],n)),{})}},565488:(W,n,I)=>{I.d(n,{Ar:()=>u,JO:()=>Y,TL:()=>Z,Tp:()=>d,YJ:()=>L,cF:()=>r,oF:()=>K,oY:()=>X,pl:()=>O,uE:()=>R,uc:()=>m,xC:()=>t});var h=I(609835),q=I(693),$=I(752490),k=I(586234),_=(I(795192),I(149528)),N=I(346160),c=I(142130),P=I(587698),S=I(523737),g=I(525912),B=I(333634),E=I(386062);const u=({coefficientReductions:W,isErrorMessageCropped:n})=>({bet:I,bets:h,betSpot:q})=>{var k;const P=W[q];if(!P)return;const u=q===$.iG?0:null!==(k=h[q])&&void 0!==k?k:0,Y=E.qD(h);if(!g.v.includes(q))return;if(0===Y)return{type:B.g8.Fatal,code:B.Y0.PlaceMainBetFirst,translatedMessage:N.Tl("tooltip.placeMainBetFirst")};const f=S.J0.multiply(Y,P);return u+I>f?{resultBet:c.ur(Math.min(I,f-u)),type:u===f?B.g8.Fatal:B.g8.Warning,code:B.Y0.BetToMainBetsPercent,translatedMessage:_.t(P,_.Z.Tooltip,n)}:void 0},Y=({coefficientReductions:W})=>({betSpot:n,betSpotFrom:I,bets:h})=>{if(void 0===I)return;if(!$.G6.has(I))return;if($.G6.has(n))return;const q=h,k=g.v.filter((W=>q[W]));for(const n of k){const I=u({coefficientReductions:W,isErrorMessageCropped:!0})({betSpot:n,bet:0,bets:h});if(void 0!==I)return I}},f=[k.K8.Banker,k.K8.Player],r=({isLowRisk:W})=>({bets:n,betSpot:I})=>{const q={[k.K8.Banker]:N.Tl(`betSpot.${k.K8.Banker}`),[k.K8.Player]:N.Tl(`betSpot.${k.K8.Player}`)};if(W){const W=Object.keys(n).filter((W=>{const I=n[W];return h.A(I)&&I>0})),[$,k]=f;if(W.includes($)&&I===k||W.includes(k)&&I===$)return{type:B.g8.Fatal,code:B.Y0.LowRiskOppositeBettingRestriction,translatedMessage:N.Tl("tooltip.oppositeBettingRestriction",{spotA:q[$]||$,spotB:q[k]||k})}}},K=({isMoveInProgress:W})=>({betSpotFrom:n})=>{if(W&&!n)return{type:B.g8.Fatal,code:B.Y0.ChipMoveInProgress,suppressed:!0}},t=({isBettingTime:W,tooltipKey:n})=>({bets:I})=>{if(W)return;const h=n||(q.A(I)?"tooltip.waitForNextGame":"tooltip.betsClosed");return{type:B.g8.Fatal,code:B.Y0.WaitingForNextGame,translatedMessage:N.Tl(h)}},X=({maxBetSpotValues:W,allowTruncateBet:n=!0})=>({bet:I,bets:h,betSpot:q})=>{var k,_;const S=q===$.iG?Number.MAX_VALUE:null!==(k=W[q])&&void 0!==k?k:Number.MAX_VALUE,g=q===$.iG?0:null!==(_=h[q])&&void 0!==_?_:0;if(g+I>S){const W=S-g;return{type:S<=g||!n?B.g8.Fatal:B.g8.Warning,code:B.Y0.MaxBetSpotValue,resultBet:n?c.ur(Math.min(I,W)):void 0,translatedMessage:N.Tl("tooltip.maxBetIs",{amount:P.ej(S)})}}},L=({minBetSpotValues:W})=>({bet:n,betSpot:I,bets:h})=>{var q,k;const _=I===$.iG?0:null!==(q=W[I])&&void 0!==q?q:0;if((I===$.iG?0:null!==(k=h[I])&&void 0!==k?k:0)+n<_)return{type:B.g8.Warning,code:B.Y0.MinBetSpotValue,translatedMessage:N.Tl("tooltip.minBetIs",{amount:P.ej(_)})}},O=({maxTableValue:W})=>({bet:n,bets:I,betSpot:h})=>{if(h===$.iG)return;if(0===W)return;const q=E.Zz(I);if(q+n>W){const I=W-q;return{type:q>=W?B.g8.Fatal:B.g8.Warning,code:B.Y0.MaxTableValue,resultBet:c.ur(Math.min(n,I)),translatedMessage:N.Tl("tooltip.maxTableBetIs",{amount:P.ej(W)})}}},Z=({minTableValue:W})=>({bet:n,betSpot:I,bets:h})=>{if(I!==$.iG&&0!==W)return E.Zz(h)+n<W?{type:B.g8.Warning,code:B.Y0.MinTableValue,translatedMessage:N.Tl("tooltip.minTableBetIs",{amount:P.ej(W)})}:void 0},d=({availableBalance:W})=>({bet:n,betSpotFrom:I})=>{if(W<n&&!I)return{type:B.g8.Fatal,code:B.Y0.NotEnoughMoney,translatedMessage:N.Tl("tooltip.balanceTooLow")}},m=({availableBalance:W,minBetSpotValues:n})=>({betSpotFrom:I,bet:h,bets:q,betSpot:k})=>{var _,c;const P=k===$.iG?0:null!==(_=n[k])&&void 0!==_?_:0,S=k===$.iG?0:null!==(c=q[k])&&void 0!==c?c:0;if(!(I&&W+h>=P))return 0===S&&P>W?{type:B.g8.Fatal,code:B.Y0.BalanceTooLow,translatedMessage:N.Tl("tooltip.balanceTooLow")}:void 0},R=({availableBalance:W,getAmountWithFee:n,feeBetSpots:I})=>({bet:h,betSpotFrom:q,betSpot:$})=>{if(q||I&&!I.includes($))return;const k=n(h);return W>=h&&W<k?{type:B.g8.Fatal,code:B.m1.NotEnoughMoneyWithFee,translatedMessage:N.Tl("tooltip.insufficientFundsWithFee")}:void 0}},930104:(W,n,I)=>{var h;I.d(n,{U:()=>h}),function(W){W.Player="Player",W.Banker="Banker"}(h||(h={}))},246250:(W,n,I)=>{var h;I.d(n,{F:()=>h}),function(W){W.SuperSix="super_six_main_bet_coefficient_reductions",W.PerfectPair="perfect_pair_main_bet_coefficient_reductions",W.EitherPair="either_pair_main_bet_coefficient_reductions",W.PlayerBonus="player_bonus_main_bet_coefficient_reductions",W.PlayerPair="player_pair_main_bet_coefficient_reductions",W.BankerBonus="banker_bonus_main_bet_coefficient_reductions",W.BankerPair="banker_pair_main_bet_coefficient_reductions"}(h||(h={}))},929758:(W,n,I)=>{var h;I.d(n,{B:()=>h}),function(W){W.Fee="fee"}(h||(h={}))},732319:(W,n,I)=>{I.d(n,{v:()=>q});var h=I(377810);function q(W,n){const I=h.useRef(null);return h.useLayoutEffect((()=>(W(n,I.current),()=>{W(n,null)})),[n,W]),I}},588974:(W,n,I)=>{var h;I.d(n,{C:()=>h}),function(W){W.V1="v1",W.V2="v2"}(h||(h={}))},730460:(W,n,I)=>{var h,q;I.d(n,{I:()=>h,u:()=>q}),function(W){W.Normal="en",W.Number="sc",W.Chinese="ch",W.Korean="ko"}(h||(h={})),function(W){W.P="P",W.B="B"}(q||(q={}))},586234:(W,n,I)=>{var h,q,$,k,_,N,c,P;I.d(n,{K8:()=>q,Qc:()=>$,ZF:()=>c,Zp:()=>h,ix:()=>N,uB:()=>k,uu:()=>_}),function(W){W.UnknownCard="XX",W.Clubs2="2C",W.Clubs3="3C",W.Clubs4="4C",W.Clubs5="5C",W.Clubs6="6C",W.Clubs7="7C",W.Clubs8="8C",W.Clubs9="9C",W.Clubs10="TC",W.ClubsJack="JC",W.ClubsQueen="QC",W.ClubsKing="KC",W.ClubsAce="AC",W.Diamonds2="2D",W.Diamonds3="3D",W.Diamonds4="4D",W.Diamonds5="5D",W.Diamonds6="6D",W.Diamonds7="7D",W.Diamonds8="8D",W.Diamonds9="9D",W.Diamonds10="TD",W.DiamondsJack="JD",W.DiamondsQueen="QD",W.DiamondsKing="KD",W.DiamondsAce="AD",W.Hearts2="2H",W.Hearts3="3H",W.Hearts4="4H",W.Hearts5="5H",W.Hearts6="6H",W.Hearts7="7H",W.Hearts8="8H",W.Hearts9="9H",W.Hearts10="TH",W.HeartsJack="JH",W.HeartsQueen="QH",W.HeartsKing="KH",W.HeartsAce="AH",W.Spades2="2S",W.Spades3="3S",W.Spades4="4S",W.Spades5="5S",W.Spades6="6S",W.Spades7="7S",W.Spades8="8S",W.Spades9="9S",W.Spades10="TS",W.SpadesJack="JS",W.SpadesQueen="QS",W.SpadesKing="KS",W.SpadesAce="AS",W.Eight="BAC8"}(h||(h={})),function(W){W.Banker="Banker",W.Player="Player",W.Tie="Tie",W.BankerBonus="BankerBonus",W.BankerPair="BankerPair",W.EitherPair="EitherPair",W.SuperSix="SuperSix",W.PlayerBonus="PlayerBonus",W.PlayerPair="PlayerPair",W.PerfectPair="PerfectPair"}(q||(q={})),function(W){W.NewGame="newGame",W.BetsOpen="betsOpen",W.BetsClosed="betsClosed",W.Dealing="dealing",W.Revealing="revealing",W.Resolved="resolved",W.Cancelled="cancelled"}($||($={})),function(W){W.Betting="Betting",W.Accepted="Accepted",W.BetsAccepted="Accepted",W.Rejected="Rejected",W.BetsRejected="Rejected",W.Cancelled="Cancelled",W.Idle="Idle"}(k||(k={})),function(W){W.Chip="Chip",W.Double="Double",W.Repeat="Repeat",W.Undo="Undo",W.UndoAll="UndoAll",W.Move="Move",W.Remove="Remove"}(_||(_={})),function(W){W.MainAndPairs="MainAndPairs",W.MainOnly="MainOnly",W.AllBets="AllBets"}(N||(N={})),function(W){W.Baccarat="baccarat"}(c||(c={})),function(W){W.Spade="S",W.Heart="H",W.Diamond="D",W.Club="C"}(P||(P={}))},149528:(W,n,I)=>{I.d(n,{Z:()=>h,t:()=>k});var h,q=I(346160),$=I(523737);function k(W,n,I){const h=[1,.5].includes(W),k=$.J0.multiply(W,100),_=`${n}.superSixCannotExceed${h?k:"X"}${I?"Crop":""}`;return q.Tl(_,{percent:k})}!function(W){W.LimitPlate="limitPlate",W.Tooltip="tooltip"}(h||(h={}))},795192:(W,n,I)=>{function h(W,n=2){const I=10**n;return Math.round(W*I)/I}function q(W,n=2){const I=10**n;return Math.floor(W*I)/I}I.d(n,{eS:()=>h,yv:()=>q})},973220:(W,n,I)=>{I.d(n,{C:()=>q,I5:()=>k,S4:()=>N,Vq:()=>c,i5:()=>_,pW:()=>$});var h=I(893903);function q(W){return W.replace(/(?:^|\.?)([A-Z])/g,((W,n)=>`_${n.toLowerCase()}`)).replace(/^[0_]/g,"")}const $=W=>`${W}-${Math.floor(1e9*Math.random())}-${+new Date}`;function k(W){return((1e4*parseFloat(W.toFixed(4))>>6<<6)/1e4).toFixed(4)}function _(W,n){return Object.prototype.hasOwnProperty.call(W,n)}function N(W,n){for(const n of Object.keys(W))if(W[n])return n;return n}function c(W){return!h.A(W)}},811914:(W,n,I)=>{I.d(n,{O8:()=>Y});var h=I(64922),q=I(699695),$=I(236042),k=I(377810),_=I(752490),N=I(930104),c=I(586234),P=I(166175),S=I(860785),g=I(99496),B=I(110482);const E={[c.K8.PlayerPair]:P.RU.PLAYER,[c.K8.BankerPair]:P.RU.BANKER},u={[c.K8.PlayerPair]:"#0096ff",[c.K8.BankerPair]:"#ff0006"},Y=k.memo((({isNoCommission:W,leftBetSpots:n,rightBetSpots:I,isBettingTime:Y,isDesktop:f,scale:r=1,scaledWidth:K,scaledHeight:t,isVertical:X,redEnvelopeEnabled:L,betSpotSize:O,skipRegisterRefs:Z=!1,isAdaptiveSideBetSpots:d=!1,isSingleSideBetSpotsRow:m=!1,isCollapsed:R=!1,doNotTransformOnCollapse:e,preProcessBetSpotClick:j,betSpotHandlersActive:z,onBetSpotClick:v,bubbleRef:V,forceLayerToTop:F,isSmall:w,MainBetSpot:o,TieBetSpot:D,SideBetSpot:x,GridOverlay:G,isIOS:y})=>{const C=1===n.length&&1===I.length,b=0===n.length&&0===I.length,l=!X&&b,A=k.useCallback((W=>n=>(null==j||j(n,W),n.preventDefault(),v(W))),[v,j]),p=k.useCallback((W=>{if(R&&!(null==z?void 0:z(W)))return{};const n=A(W),I=$.A(n,_.Tf,_.Iu),h=g.a(f);return{[h]:I}}),[R,f,A,z]),i=k.useCallback(((W,n=!1,I,q)=>{const $=n&&I&&!X?S.BL.Semicircle:S.BL.Rect;return x?h.jsx(x,{betSpot:W,isSingleBetSpot:n,shape:$,mainShape:I,betSpotHandlers:p(W),size:O,skipRegisterRefs:Z,customLabelColor:q,isIOS:y},W):null}),[X,x,p,O,Z,y]),U=k.useCallback(((W,n)=>{const I=1===W.length;return W.map((W=>i(W,I,n)))}),[i]),Q=k.useCallback((()=>[...n,...I].map((W=>i(W,m,E[W],m?u[W]:void 0)))),[i,m,n,I]);return h.jsx("div",{style:{width:K,height:t},children:h.jsxs("div",{className:q.A(B.A.bettingGrid,{[B.A.bettingTime]:Y,[B.A.desktop]:f,[B.A.isVertical]:X,[B.A.onlyPairs]:C,[B.A.redEnvelope]:L,[B.A.adaptiveSideBetSpots]:d,[B.A.singleSideBetSpotsRow]:d&&m,[B.A.forceLayerToTop]:F,[B.A.small]:w}),style:{transform:`scale(${r})`},"data-role":"betting-grid-container",children:[h.jsx("div",{className:B.A.bubble,ref:V}),G&&h.jsx(G,{}),h.jsxs("div",{className:q.A(B.A.mainContainer,{[B.A.wide]:l,[B.A.collapsed]:R,[B.A.nonTransform]:e}),children:[h.jsx(o,{betSpot:c.K8.Player,role:"bet-spot-player",isCollapsed:R,cardHand:N.U.Player,mainShapeType:P.RU.PLAYER,betSpotHandlers:p(c.K8.Player),className:B.A.player,size:O,wide:l,skipRegisterRefs:Z,small:w}),h.jsx(o,{betSpot:c.K8.Banker,role:"bet-spot-banker",isCollapsed:R,cardHand:N.U.Banker,mainShapeType:P.RU.BANKER,betSpotHandlers:p(c.K8.Banker),className:B.A.banker,size:O,wide:l,skipRegisterRefs:Z,small:w}),h.jsx(D,{role:"bet-spot-tie",betSpotHandlers:p(c.K8.Tie),className:q.A(B.A.tie,{[B.A.short]:W}),size:O,skipRegisterRefs:Z,small:w,isIOS:y}),W&&h.jsx("div",{className:q.A(B.A.betspot,B.A.center),children:i(c.K8.SuperSix)})]}),!d&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:q.A(B.A.betspot,B.A.left,{[B.A.wide]:l}),children:U(n,P.RU.PLAYER)}),h.jsx("div",{className:q.A(B.A.betspot,B.A.right,{[B.A.wide]:l}),children:U(I,P.RU.BANKER)})]}),d&&h.jsx("div",{className:B.A.sideBetSpots,children:Q()})]})})}))},339212:(W,n,I)=>{I.d(n,{W:()=>P});var h=I(64922),q=I(699695),$=I(377810),k=I(37270),_=I(346160),N=I(876759),c=I(110482);const P=$.memo((({betSpotRef:W,scale:n,payouts:I,withBonus:P,bonus:S,skipAnimation:g,color:B,isIOS:E})=>{const u=$.useRef(null),[Y,f]=$.useState(void 0),r=I.length>1;$.useEffect((()=>{r&&u.current&&(null==W?void 0:W.current)&&u.current.clientWidth-7>W.current.clientWidth&&1!==n&&f(n)}),[W,r,n]);const K=$.useMemo((()=>{const W=I.length;return P&&S||!(W>1)?void 0:{animation:N.I()?"none":`${c.A.payoutSwitchContentKeyframes} ${3*W}s steps(${W}) infinite, ${c.A.payoutToggleKeyframes} 3s infinite`}}),[I.length,P,S]),t=_.vL().smallSideTieBetSpotPayoutFontSize,X=_.vL().adjustSideTieBetSpotsPayoutMarginTop,L=_.vL().addSideTieBetSpotsPayoutMarginBottom,O=q.A(c.A.payout,{[c.A.isSmallPayoutFontSize]:t,[c.A.adjustPayoutMarginTop]:X,[c.A.animatedPayout]:I.length>1&&!(P&&S)}),Z={color:B};return Y&&(Z.transform=`scale(${Y})`),h.jsx("div",{ref:u,className:q.A(c.A.payoutContainer,{[c.A.addPayoutMarginBottom]:L,[c.A.animatedPayoutsContainer]:r}),children:h.jsx("div",{style:K,children:P&&1===I.length?h.jsx(k.s,{payout:I[0],bonus:S,skipAnimation:g,payoutClassName:O,isIOS:E}):I.map(((W,n)=>h.jsx("div",{className:O,"data-role":"payout",style:Z,children:W},n)))})})}))},258237:(W,n,I)=>{I.d(n,{W:()=>X,f:()=>t});var h=I(64922),q=I(525620),$=I(377810),k=I(368329),_=I(587698),N=I(699695);const c=$.memo((({color:W})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 8 12",children:h.jsxs("g",{fill:W,fillRule:"evenodd",children:[h.jsx("circle",{cx:4,cy:3,r:3}),h.jsx("path",{d:"M4 6c2.21 0 4 1.151 4 2.571V12H0V8.571l.006-.14C.12 7.075 1.864 6 4 6z"})]})}))),P={liveStatistics:"liveStatistics--951fa",symbol:"symbol--08ff1",count:"count--17131",horizontal:"horizontal--dc92b",currency:"currency--abe5b",LeftSpot:"LeftSpot--cfe31",RightSpot:"RightSpot--29540",Tie:"Tie--9449f",isPortrait:"isPortrait--b2a22",medium:"medium--0dfff",small:"small--07613",tiny:"tiny--48917"},S=({total:W,playersCount:n,mappedBetSpot:I,horizontal:q,currencySymbol:$,color:k,isPortrait:_})=>{const S=$?$.length:0,g=W.length+S;return h.jsxs("div",{className:N.A(P.liveStatistics,P[I],{[P.horizontal]:q,[P.isPortrait]:_,[P.medium]:g>10,[P.small]:g>12,[P.tiny]:g>14}),style:{color:k},"data-role":"betting-stats","data-total-wager":W,"data-total-bettors":n,"data-currency-symbol":$,children:[h.jsxs("div",{className:P.currency,children:[h.jsx("span",{className:P.symbol,children:$}),h.jsx("span",{children:W})]}),h.jsxs("div",{className:P.count,children:[h.jsx("span",{className:P.symbol,children:h.jsx(c,{color:k})}),h.jsx("span",{children:n})]})]})};var g=I(346160),B=I(110482);const E=2*Math.PI*50,u=$.memo((({value:W,progressColor:n,betSpot:I})=>{const q=$.useRef(`${Math.random()}_id`).current,k=E*(1-W/100),_=g.Tl("percent_fee",{percent:W});return h.jsxs(h.Fragment,{children:[h.jsxs("svg",{"data-total-percent":W,width:108,height:108,viewBox:"0 0 108 108",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:`background_${I}${q}_gradient`,children:[h.jsx("stop",{stopColor:"#000",stopOpacity:.7,offset:"0%"}),h.jsx("stop",{stopColor:"#000",stopOpacity:0,offset:"100%"})]})}),h.jsx("circle",{cx:54,cy:54,r:54,fill:`url(#background_${I}${q}_gradient)`}),h.jsx("circle",{cx:54,cy:54,r:50,strokeWidth:8,fill:"none",stroke:n,strokeOpacity:.1}),h.jsx("circle",{cx:54,cy:54,r:50,strokeWidth:8,fill:"none",stroke:n,strokeDashoffset:k,strokeDasharray:E,transform:"rotate(-90 54 54)",style:{transition:"stroke-dashoffset 500ms"}})]}),h.jsx("span",{className:B.A.indicatorPercentage,style:{color:n},children:_})]})}));var Y,f=I(586234);!function(W){W.LeftSpot="LeftSpot",W.RightSpot="RightSpot",W.Tie="Tie"}(Y||(Y={}));const r={[f.K8.Player]:"#0096FF",[f.K8.Banker]:"#FF0006",[f.K8.Tie]:"#00FF00"},K={[f.K8.Player]:Y.LeftSpot,[f.K8.Banker]:Y.RightSpot,[f.K8.Tie]:Y.Tie},t=$.memo((({betSpot:W,horizontalStatistics:n=!1,isPortrait:I,currencySymbol:q,statisticsItem:$})=>{const{amount:k,players:N,percentage:c}=$,P=r[W];return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:B.A.liveStatisticsContainer,children:h.jsx(S,{mappedBetSpot:K[W],color:P,horizontal:n,currencySymbol:q,playersCount:N,total:_.ej(k),isPortrait:I})}),h.jsx("div",{className:B.A.bettingStatistics,children:h.jsx(u,{betSpot:W,progressColor:P,value:c})})]})})),X=q.PA((W=>{const n=k.P(),{betSpot:I}=W,q=n.bettingStatistics.stats[I];return h.jsx(t,{...W,currencySymbol:n.settings.currencySymbol,isPortrait:n.device.isPortrait,statisticsItem:q})}))},704249:(W,n,I)=>{I.d(n,{V:()=>g,w:()=>S});var h=I(64922),q=I(699695),$=I(525620),k=(I(377810),I(732319)),_=I(586234),N=I(68521),c=I(368329),P=I(110482);const S=({betSpot:W,role:n,animate:I,hasBet:$,faded:_,isNoCommission:c,className:S,Shape:g,betSpotHandlers:B,size:E,hasBonus:u,paleBackground:Y,BetSpotInfo:f,children:r,small:K,highlightBorder:t=!1,registerBetSpotRef:X,skipRegisterRefs:L,ChipComponent:O=N.B,OverlayComponent:Z})=>{const d=k.v(X,W);return h.jsxs("div",{ref:L?void 0:d,"data-betspot-destination":W,className:S,"data-role":n,...B,children:[h.jsx(g,{animate:I,highlightBorder:t,short:c,small:K,size:E,hasBet:$,faded:_,paleBackground:Y}),r,f&&h.jsx(f,{betSpot:W}),h.jsx("div",{className:q.A(P.A.chipContainer,{[P.A.redEnvelopeBonus]:u}),children:!L&&h.jsx(O,{betSpot:W})}),Z&&h.jsx(Z,{small:K,shapeSize:E})]})},g=$.PA((W=>{const{betSpot:n,children:I}=W,q=c.P(),$=q.device.isPhone,k=!!q.bets.bets[n];return h.jsx(S,{...W,hasBet:k,faded:!q.gamePhase.isBetsOpen&&!k,paleBackground:$&&q.device.isLandscape,isMobile:$,isNoCommission:q.settings.noCommission&&q.betSpot.isSpotConfigured(_.K8.SuperSix),animate:q.gameResult.winningBetSpots.includes(n),registerBetSpotRef:q.reference.betSpot.set,children:I})}))},373595:(W,n,I)=>{I.d(n,{lN:()=>t,oi:()=>K});var h=I(64922),q=I(699695),$=I(525620),k=I(377810),_=I(586234),N=I(935899),c=I(556182),P=I(368329),S=I(346160),g=I(166175);const B=I.p+"images/bankersymb.78bc4fda.svg",E=I.p+"images/playersymb.ec2d1e8e.svg";function u(W){switch(W){case _.K8.Player:return E;case _.K8.Banker:return B}}var Y=I(110482);const f="score",r=120;function K({betSpot:W,role:n,score:I,cardHand:$,cardType:P,showSymbol:B,className:E,betSpotHandlers:K,mainShapeType:t,size:X,wide:L,small:O,skipRegisterRefs:Z,CommonBetSpot:d,GridCard:m=N.A,isPortrait:R,isDesktop:e,cards:j,liftedCardHand:z,liftedCentralCardHand:v,ChipComponent:V,ShapeComponent:F,OverlayComponent:w,TitleComponent:o,scoreLandscapePosition:D,cardsLandscapePosition:x,ExtraComponent:G,isScoreVisible:y=!0,reverseScale:C}){const b=k.useRef(null),[l,A]=k.useState({});k.useEffect((()=>{if(C&&e&&b.current&&b.current.clientWidth>r){const n=r/b.current.clientWidth,I=(100-100*n)/2,h=W===_.K8.Player?-1*I:I;A({transform:`translateX(${h}%) scale(${n})`})}}),[W,e,C]);const p=k.useCallback((W=>{const n=null!=F?F:g.RY;return h.jsx(n,{type:t,wide:L,...W})}),[F,t,L]),i=!R&&D?{"--landscapePositionX":D.x,"--landscapePositionY":D.y}:{};return h.jsxs(d,{betSpot:W,role:n,className:E,betSpotHandlers:K,Shape:p,size:X,small:O,skipRegisterRefs:Z,ChipComponent:V,OverlayComponent:w,children:[G&&h.jsx(G,{betSpot:W}),y&&h.jsx("div",{className:Y.A.score,style:i,"data-role":f,children:I}),B&&h.jsx("div",{className:Y.A.symbol,children:h.jsx("img",{src:u(W)})}),h.jsx(c.s,{landscapePosition:x,hand:$,cardType:P,decreased:O,Card:m,isPortrait:R,isDesktop:e,cards:j,lifted:z,liftedCentral:v}),h.jsx("div",{ref:b,className:q.A(Y.A.title,{[Y.A.spotTitleSmall]:S.vL().smallFontBettingGridBetSpots,[Y.A.hasLongBetSpotName]:S.vL().adjustLongBetSpotNames}),style:l,children:o?h.jsx(o,{betSpot:W,isDesktop:e}):h.jsx("div",{className:Y.A.titleContainer,children:S.Tl(`betSpot.${W}`)})})]})}const t=$.PA((W=>{var n,I;const q=P.P(),$=null!==(n=W.cards)&&void 0!==n?n:q.cards.getCards(W.cardHand),k=null!==(I=W.score)&&void 0!==I?I:q.cards.getScore(W.cardHand);return h.jsx(K,{...W,isPortrait:q.device.isPortrait,reverseScale:q.ag.values.gameDimensions.reverseScale,isDesktop:q.device.isDesktop,cards:$,score:k,showSymbol:q.settings.hieroglyphsVisible})}))},656846:(W,n,I)=>{I.d(n,{k:()=>S});var h=I(64922),q=I(699695),$=(I(377810),I(586234)),k=I(346160),_=I(876759),N=I(339212),c=I(8568),P=I(110482);function S({role:W,className:n,betSpotHandlers:I,withBonus:S,bonus:g,skipAnimation:B=_.I(),payouts:E,BonusWinComponent:u,BonusComponent:Y,size:f,small:r,skipRegisterRefs:K=!1,CommonBetSpot:t,OverlayComponent:X,isIOS:L}){const O=$.K8.Tie,Z=S&&!!g,d=k.vL().smallFontBettingGridBetSpots;return h.jsxs(t,{betSpot:O,role:W,className:n,betSpotHandlers:I,Shape:c.IM,size:f,hasBonus:Z,small:r,skipRegisterRefs:K,OverlayComponent:X,children:[u&&h.jsx(u,{betSpot:O}),h.jsxs("div",{className:q.A(P.A.title,{[P.A.spotTitleSmall]:d,[P.A.redEnvelopeBonus]:Z,[P.A.hasLongBetSpotName]:k.vL().adjustLongBetSpotNames}),"data-role":"payout",children:[h.jsxs("div",{className:q.A(P.A.titleContainer,P.A.single),children:[h.jsx("span",{className:q.A({[P.A.animateOut]:Z,[P.A.skipAnimation]:B}),children:k.Tl(`betSpot.${O}`)}),Z&&Y&&h.jsx(Y,{betSpot:O})]}),E.length>0&&h.jsx(N.W,{payouts:E,withBonus:S,bonus:g,skipAnimation:B,isIOS:L})]})]})}},895083:(W,n,I)=>{I.d(n,{ZE:()=>N,Mv:()=>E,qF:()=>S,gb:()=>P,sj:()=>g,i_:()=>c,mb:()=>B});var h=I(64922),q=I(699695);I(377810);var $,k=I(110482);!function(W){W.Left="Left",W.Right="Right",W.Top="Top",W.Bottom="Bottom",W.All="All"}($||($={}));const _=({fillId:W,strokeId:n,color:I})=>h.jsxs(h.Fragment,{children:[h.jsxs("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:W,children:[h.jsx("stop",{stopOpacity:.8,className:q.A(k.A.gradientLight,k.A[I])}),h.jsx("stop",{offset:"1",stopOpacity:.8,className:q.A(k.A.gradientDark,k.A[I])})]}),h.jsxs("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:n,children:[h.jsx("stop",{stopOpacity:.8,className:q.A(k.A.strokeLight,k.A[I])}),h.jsx("stop",{offset:"1",stopOpacity:.8,className:q.A(k.A.strokeDark,k.A[I])})]})]}),N=W=>h.jsx(_,{...W,color:"blue"}),c=W=>h.jsx(_,{...W,color:"red"}),P=W=>h.jsx(_,{...W,color:"green"}),S=W=>h.jsx(_,{...W,color:"gray"}),g=W=>h.jsx(_,{...W,color:"ochre"}),B=W=>h.jsx(_,{...W,color:"violet"}),E=({id:W})=>h.jsxs("linearGradient",{id:W,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[h.jsx("stop",{offset:"0%",stopColor:"#E0C064"}),h.jsx("stop",{offset:"22.78%",stopColor:"#E2BF50"}),h.jsx("stop",{offset:"28.07%",stopColor:"#FCFCFC"}),h.jsx("stop",{offset:"33.37%",stopColor:"#E0C164"}),h.jsx("stop",{offset:"80.88%",stopColor:"#D7A44A"}),h.jsx("stop",{offset:"87.78%",stopColor:"#FFFFFF"}),h.jsx("stop",{offset:"95.11%",stopColor:"#D6A147"}),h.jsx("stop",{offset:"100%",stopColor:"#D59D44"})]})},166175:(W,n,I)=>{I.d(n,{RU:()=>h,RY:()=>Y});var h,q=I(64922),$=I(699695),k=I(504642),_=I(377810),N=I(895083),c=I(745186),P=I(166958),S=I(110482);!function(W){W.BANKER="banker",W.PLAYER="player"}(h||(h={}));const g={[h.PLAYER]:N.ZE,[h.BANKER]:N.i_},B={[c.d.Default]:{path:"M241 1v16.135c-23.6 1.278-44.808 11.548-60.259 27.444-15.615 16.064-25.35 37.875-25.73 61.965h0L155 108v91H4a2.99 2.99 0 01-2.121-.879A2.99 2.99 0 011 196h0V4c0-.828.336-1.578.879-2.121C1.422 1.336 3.172 1 4 1h237z",width:242,height:200},[c.d.Landscape]:{path:"M156 1v9.807c-15.268.912-28.983 7.592-38.994 17.891-10.191 10.484-16.544 24.718-16.792 40.443h0l-.007.947V129H3.198a2.19 2.19 0 01-1.554-.644A2.19 2.19 0 011 126.802h0V3.198c0-.607.246-1.156.644-1.554A2.19 2.19 0 013.198 1H156z",width:157,height:130},[c.d.LandscapeWide]:{path:"M192 1v12.519c-18.797 1.067-35.686 9.267-48.001 21.937-12.488 12.847-20.273 30.29-20.577 49.558h0l-.009 1.163V159H3.198a2.19 2.19 0 01-1.554-.644A2.19 2.19 0 011 156.802h0V3.198c0-.607.246-1.156.644-1.554A2.19 2.19 0 013.198 1H192z",width:193,height:160},[c.d.Portrait]:{path:"M179.000,1.000 L179.000,12.116 C161.467,13.133 145.716,20.793 134.227,32.616 C122.563,44.620 115.292,60.915 115.009,78.914 L115.009,78.914 L115.000,80.000 L115.000,148.000 L3.198,148.000 C2.591,148.000 2.042,147.754 1.644,147.356 C1.246,146.958 1.000,146.409 1.000,145.802 L1.000,145.802 L1.000,3.198 C1.000,2.591 1.246,2.042 1.644,1.644 C2.042,1.246 2.591,1.000 3.198,1.000 L3.198,1.000 L179.000,1.000 Z",width:180,height:149}},E={[c.d.Default]:{path:"M289 1v16.135c-23.6 1.278-44.808 11.548-60.259 27.444-15.615 16.064-25.35 37.875-25.73 61.965h0L203 108v91H4a2.99 2.99 0 01-2.121-.879A2.99 2.99 0 011 196h0V4c0-.828.336-1.578.879-2.121A2.99 2.99 0 014 1h285z",width:290,height:200},[c.d.Landscape]:{path:"M189 1v9.807c-15.268.912-28.983 7.592-38.994 17.891-10.191 10.484-16.544 24.718-16.792 40.443h0l-.007.947V129H3.198a2.19 2.19 0 01-1.554-.644A2.19 2.19 0 011 126.802h0V3.198c0-.607.246-1.156.644-1.554A2.19 2.19 0 013.198 1H189z",width:190,height:130},[c.d.LandscapeWide]:{path:"M231 1v12.519c-18.797 1.067-35.686 9.267-48.001 21.937-12.488 12.847-20.273 30.29-20.577 49.558h0l-.009 1.163V159H3.198a2.19 2.19 0 01-1.554-.644A2.19 2.19 0 011 156.802h0V3.198c0-.607.246-1.156.644-1.554A2.19 2.19 0 013.198 1H231z",width:232,height:160}},u={[c.d.Default]:{path:"M241 1v16.135c-23.6 1.278-44.808 11.548-60.259 27.444-15.615 16.064-25.35 37.875-25.73 61.965h0L155 108v91H4a2.99 2.99 0 01-2.121-.879A2.99 2.99 0 011 196h0V4c0-.828.336-1.578.879-2.121C1.422 1.336 3.172 1 4 1h237z",width:242,height:200},[c.d.Portrait]:{path:"M179 1V5.90164C162.948 6.62202 149.493 13.4824 138.93 24.1908C128.169 35.0996 121.445 50.0017 121.183 66.4811L121.175 67.4737V109H4C3.17157 109 2.42157 108.664 1.87868 108.121C1.33579 107.578 1 106.828 1 106V4C1 3.17157 1.33579 2.42157 1.87868 1.87868C2.42157 1.33579 3.17157 1 4 1L179 1Z",width:180,height:110}},Y=_.memo((({type:W,wide:n,small:I,animate:Y,hasBet:f,faded:r,size:K=c.d.Default,paleBackground:t,brightBackground:X,highlightBorder:L,shapeGradients:O,shadowFilter:Z})=>{var d;const m=_.useRef(`${Math.random()}_id`).current,{width:R,height:e,path:j}=I?u[K]:n?E[K]:B[K],z=(null!=O?O:g)[W],v=Y?2:1;return q.jsxs("svg",{className:$.A(S.A.svg,S.A.mainShape,S.A.svgBetspot,{[S.A.isMirrored]:W===h.BANKER,[S.A.animate]:!!Y,[S.A.hasBet]:f&&!X,[S.A.disabled]:r,[S.A.win]:!t&&v>1},...null!==(d=null==Z?void 0:Z.classNames)&&void 0!==d?d:[]),preserveAspectRatio:"none",...P.E(R,e),children:[q.jsxs("defs",{children:[(null==Z?void 0:Z.element)&&(null==Z?void 0:Z.id)&&q.jsx(Z.element,{id:Z.id}),q.jsx(z,{fillId:`${W}${m}_fill`,strokeId:`${W}${m}_stroke`}),L&&q.jsx(N.Mv,{id:`mainShapeGradient${m}`})]}),q.jsx("g",{filter:(null==Z?void 0:Z.id)?`url(#${null==Z?void 0:Z.id}-${m})`:void 0,children:k.A(v,(n=>q.jsx("path",{d:j,fill:`url(#${W}${m}_fill)`,stroke:L?`url(#mainShapeGradient${m})`:`url(#${W}${m}_stroke)`,strokeWidth:2,fillRule:"evenodd",className:S.A.shape},n)))})]})}))},860785:(W,n,I)=>{I.d(n,{BL:()=>h,fI:()=>t});var h,q=I(64922),$=I(699695),k=I(504642),_=I(377810),N=I(586234),c=I(895083),P=I(166175),S=I(745186),g=I(166958),B=I(110482);!function(W){W.Rect="rect",W.Semicircle="semicircle"}(h||(h={}));const E={[h.Rect]:W=>{const{highlightBorder:n,betSpot:I,className:h,Gradient:N,width:P,height:S,faded:g,layerCount:E=1,paleBackground:u}=W,Y=_.useRef(`${Math.random()}_id`).current,f=n?`url(#${I}${Y}_rect_golden_stroke)`:`url(#${I}${Y}_rect_stroke)`;return q.jsxs("svg",{className:$.A(h,B.A.rectShape,{[B.A.disabled]:g,[B.A.win]:!u&&E>1}),preserveAspectRatio:"none",width:P,height:S,children:[q.jsxs("defs",{children:[n&&q.jsx(c.Mv,{id:`${I}${Y}_rect_golden_stroke`}),q.jsx(N,{fillId:`${I}${Y}_rect_fill`,strokeId:`${I}${Y}_rect_stroke`})]}),k.A(E,(W=>q.jsx("rect",{width:"100%",height:"100%","data-width":P,"data-height":S,rx:4,ry:4,fill:`url(#${I}${Y}_rect_fill)`,stroke:f,strokeWidth:4,fillRule:"evenodd",className:B.A.shape},W)))]})},[h.Semicircle]:function({highlightBorder:W,betSpot:n,className:I,Gradient:h,width:N,height:P,path:S,faded:E,layerCount:u=1,paleBackground:Y}){const f=_.useRef(`${Math.random()}_id`).current;return q.jsxs("svg",{className:$.A(I,{[B.A.disabled]:E,[B.A.win]:!Y&&u>1}),preserveAspectRatio:"none",...g.E(N,P),children:[q.jsxs("defs",{children:[W&&q.jsx(c.Mv,{id:`${n}${f}_rect_golden_stroke`}),q.jsx(h,{fillId:`${n}${f}_semicircle_fill`,strokeId:`${n}${f}_semicircle_stroke`})]}),k.A(u,(I=>q.jsx("path",{fill:`url(#${n}${f}_semicircle_fill)`,stroke:W?`url(#${n}${f}_rect_golden_stroke)`:`url(#${n}${f}_semicircle_stroke)`,strokeWidth:2,fillRule:"evenodd",d:S,className:B.A.shape},I)))]})}},u={[P.RU.PLAYER]:c.ZE,[P.RU.BANKER]:c.i_},Y={[N.K8.PerfectPair]:c.sj,[N.K8.EitherPair]:c.sj,[N.K8.SuperSix]:c.mb},f={[S.d.Default]:{path:"",width:106,height:64},[S.d.Landscape]:{path:"",width:65,height:40},[S.d.LandscapeWide]:{path:"",width:80,height:50},[S.d.Portrait]:{path:"",width:122,height:38}},r={[S.d.Default]:{path:"M99 1.008v197.984l-.637-.005c-26.984-.438-51.343-11.67-68.947-29.568C11.842 151.55 1 127.042 1 100c0-27.042 10.842-51.551 28.416-69.419C47.02 12.684 71.38 1.451 98.354 1.013h0L99 1.008z",width:100,height:200},[S.d.Landscape]:{path:"M63.933 1.009L64 128.992l-.059-.001c-17.443-.282-33.191-7.544-44.571-19.114C8.009 98.326 1 82.482 1 65c0-17.482 7.009-33.326 18.37-44.877C30.75 8.553 46.498 1.291 63.933 1.009h0z",width:65,height:130},[S.d.LandscapeWide]:{path:"M78.685 1.011L79 158.992l-.307-.003c-21.532-.349-40.97-9.312-55.017-23.594C9.652 121.137 1 101.579 1 80s8.652-41.137 22.676-55.395C37.723 10.323 57.161 1.36 78.685 1.011h0z",width:80,height:160},[S.d.Portrait]:{path:"",width:0,height:0}},K={[h.Rect]:f,[h.Semicircle]:r},t=_.memo((({shape:W,mainShape:n,highlightBorder:I,betSpot:h,isSingleBetSpot:k,animate:_,hasBet:N,faded:g,size:f=S.d.Default,paleBackground:r,brightBackground:t})=>{const X=E[W];let L=Y[h];L||(L=n?u[n]:c.qF);const O=_?2:1;return q.jsx(X,{highlightBorder:I,betSpot:h,className:$.A(B.A.svg,B.A.svgBetspot,{[B.A.isMirrored]:k&&n===P.RU.BANKER,[B.A.hasBet]:N}),Gradient:L,layerCount:O,faded:g,paleBackground:r,brightBackground:t,...K[W][f]})}))},8568:(W,n,I)=>{I.d(n,{IM:()=>E});var h=I(64922),q=I(699695),$=I(504642),k=I(377810),_=I(895083),N=I(745186),c=I(166958),P=I(110482);const S={[N.d.Default]:{path:"M82 1c22.368 0 42.618 9.066 57.276 23.724C153.934 39.382 163 59.632 163 82h0v91H1V82c0-22.368 9.066-42.618 23.724-57.276C39.382 10.066 59.632 1 82 1z",width:164,height:174},[N.d.Landscape]:{path:"M53 1c14.359 0 27.359 5.82 36.77 15.23C99.18 25.641 105 38.641 105 53h0v59H1V53c0-14.359 5.82-27.359 15.23-36.77C25.641 6.82 38.641 1 53 1z",width:106,height:113},[N.d.LandscapeWide]:{path:"M65.5 1c17.811 0 33.936 7.219 45.608 18.892C122.781 31.564 130 47.689 130 65.5h0V138H1V65.5c0-17.811 7.219-33.936 18.892-45.608C31.564 8.219 47.689 1 65.5 1z",width:131,height:139},[N.d.Portrait]:{path:"M61.500,1.000 C78.207,1.000 93.332,7.772 104.280,18.720 C115.228,29.668 122.000,44.793 122.000,61.500 L122.000,61.500 L122.000,129.000 L1.000,129.000 L1.000,61.500 C1.000,44.793 7.772,29.668 18.720,18.720 C29.668,7.772 44.793,1.000 61.500,1.000 Z",width:123,height:130}},g={[N.d.Default]:{path:"M82 1c22.368 0 42.618 9.066 57.276 23.724C153.934 39.382 163 59.632 163 82h0v37H1V82c0-22.368 9.066-42.618 23.724-57.276C39.382 10.066 59.632 1 82 1z",width:164,height:120},[N.d.Landscape]:{path:"M53 1c14.359 0 27.359 5.82 36.77 15.23C99.18 25.641 105 38.641 105 53h0v15H1V53c0-14.359 5.82-27.359 15.23-36.77C25.641 6.82 38.641 1 53 1z",width:106,height:69},[N.d.LandscapeWide]:{path:"M65.5 1c17.811 0 33.936 7.219 45.608 18.892C122.781 31.564 130 47.689 130 65.5h0V84H1V65.5c0-17.811 7.219-33.936 18.892-45.608C31.564 8.219 47.689 1 65.5 1z",width:131,height:85},[N.d.Portrait]:{path:"M61.500,1.000 C78.207,1.000 93.332,7.772 104.280,18.720 C115.228,29.668 122.000,44.793 122.000,61.500 L122.000,61.500 L122.000,88.000 L1.000,88.000 L1.000,61.500 C1.000,44.793 7.772,29.668 18.720,18.720 C29.668,7.772 44.793,1.000 61.500,1.000 Z",width:123,height:89}},B={[N.d.Default]:{path:"M82 1c22.368 0 42.618 9.066 57.276 23.724C153.934 39.382 163 59.632 163 82h0v91H1V82c0-22.368 9.066-42.618 23.724-57.276C39.382 10.066 59.632 1 82 1z",width:164,height:174},[N.d.Portrait]:{path:"M57 1C72.464 1 86.464 7.26801 96.598 17.402C106.732 27.536 113 41.536 113 57V99H1V57C1 41.536 7.26802 27.536 17.402 17.402C27.536 7.26801 41.536 1 57 1Z",width:114,height:100}},E=k.memo((({animate:W,short:n=!1,small:I=!1,highlightBorder:E,faded:u,hasBet:Y,size:f=N.d.Default,paleBackground:r})=>{const K=k.useRef(`${Math.random()}_id`).current,{width:t,height:X,path:L}=function(W,n,I){return I?B[W]:n?g[W]:S[W]}(f,n,I),O=W?2:1;return h.jsxs("svg",{preserveAspectRatio:"none",className:q.A(P.A.svg,P.A.svgBetspot,P.A.tieShape,{[P.A.animate]:!!W,[P.A.hasBet]:Y,[P.A.disabled]:u,[P.A.win]:!r&&O>1}),...c.E(t,X),children:[h.jsxs("defs",{children:[E&&h.jsx(_.Mv,{id:`tieShapeGradient${K}`}),h.jsx(_.gb,{fillId:`tie_fill${K}`,strokeId:`tie_stroke${K}`})]}),$.A(O,(W=>h.jsx("path",{d:L,fill:`url(#tie_fill${K})`,stroke:E?`url(#tieShapeGradient${K})`:`url(#tie_stroke${K})`,strokeWidth:2,fillRule:"evenodd",className:P.A.shape},W)))]})}))},745186:(W,n,I)=>{var h;I.d(n,{d:()=>h}),function(W){W.Default="default",W.Portrait="portrait",W.Landscape="landscape",W.LandscapeWide="landscapeWide"}(h||(h={}))},166958:(W,n,I)=>{I.d(n,{E:()=>h});const h=(W,n)=>({width:W,height:n,viewBox:`0 0 ${W} ${n}`})},905153:(W,n,I)=>{I.d(n,{W:()=>u,p:()=>Y});var h=I(64922),q=I(699695),$=I(525620),k=I(377810),_=I(732319),N=I(68521),c=I(368329),P=I(346160),S=I(876759),g=I(339212),B=I(860785),E=I(110482);function u({betSpot:W,reverseScale:n=1,hasBet:I,faded:$,shape:c,mainShape:u,betSpotHandlers:Y,isPortrait:f,isSingleBetSpot:r,isWinning:K,highlightBorder:t=!1,withBonus:X=!1,payouts:L,bonus:O,skipPayoutsAnimation:Z=S.I(),size:d,ExtraComponent:m,paleBackground:R,customLabelColor:e,BonusWinComponent:j,BonusComponent:z,skipRegisterRefs:v,registerBetSpotRef:V,OverlayComponent:F,isIOS:w}){const o=X&&!!O,D=_.v(V,W),x=k.useRef(null),[G,y]=k.useState(void 0);return k.useLayoutEffect((()=>{(P.vL().adjustSideBetSpotNameScale||n>1)&&D.current&&x.current&&x.current.clientWidth+9>D.current.clientWidth&&y(D.current.clientWidth/x.current.clientWidth-(f?.15:.2))}),[D,f,n,r]),h.jsxs("div",{ref:v?void 0:D,"data-betspot-destination":W,className:q.A(E.A.item,{[E.A.single]:r&&!f,[E.A.animate]:K,[E.A.vertical]:f}),"data-role":`bet-spot-${W}`,...Y,children:[h.jsx(B.fI,{shape:c,mainShape:u,highlightBorder:t,betSpot:W,isSingleBetSpot:r,size:d,animate:K,hasBet:I,faded:$,paleBackground:R}),j&&h.jsx(j,{betSpot:W,sideShape:c,mainShape:u}),L.length>0&&h.jsx(g.W,{betSpotRef:D,scale:L.length>1?G:void 0,payouts:L,withBonus:X,bonus:O,skipAnimation:Z,color:e,isIOS:w}),h.jsxs("div",{ref:x,className:E.A.betspotTitle,style:G?{transform:`scale(${G})`}:{},children:[h.jsx("span",{className:q.A({[E.A.animateOut]:o,[E.A.skipAnimation]:Z}),style:{color:e},children:P.Tl(`betSpot.${W}`)}),X&&!!O&&z&&h.jsx(z,{betSpot:W,isSingleBetSpot:r,sideShape:c,mainShape:u})]}),m&&h.jsx(m,{}),h.jsx("div",{className:q.A(E.A.chipContainer,{[E.A.redEnvelopeBonus]:o}),children:!v&&h.jsx(N.B,{betSpot:W})}),F&&h.jsx(F,{sideShape:c,mainShape:u,shapeSize:d})]})}const Y=$.PA((W=>{const n=c.P(),I=W.betSpot,q=!!n.bets.bets[I];return h.jsx(u,{...W,hasBet:q,faded:!n.gamePhase.isBetsOpen&&!q,isPortrait:n.device.isPortrait,paleBackground:n.device.isPhone&&n.device.isLandscape,isWinning:n.gameResult.winningBetSpots.includes(I),registerBetSpotRef:n.reference.betSpot.set,reverseScale:n.device.dimensions.reverseScale})}))},935899:(W,n,I)=>{I.d(n,{A:()=>B});var h=I(64922),q=I(699695),$=(I(377810),I(595922)),k=I(808432);const _="card--367d0",N="border--2b2cc",c="left--c049d",P="right--483f9",S="isPortrait--afa9b",g="isDesktop--19cae",B=({code:W,horizontalDirection:n,isDesktop:I,isPortrait:B,CardBorder:E,CardOverlay:u,index:Y,hand:f,colorScheme:r})=>h.jsxs("div",{className:_,children:[E&&h.jsx("div",{className:q.A(N,{[c]:n===$.I.Left,[P]:n===$.I.Right,[g]:I,[S]:B}),children:E},`${Y}-${f}`),h.jsx($.Z,{code:W,horizontalDirection:n,theme:k.Sx.Small,isAnimated:!0,isFlipped:"XX"!==W,colorScheme:r}),u]})},556182:(W,n,I)=>{I.d(n,{s:()=>S});var h=I(64922),q=I(699695),$=I(377810),k=I(930104),_=I(803729),N=I(595922),c=I(808432),P=I(856062);const S=$.memo((({Card:W,cards:n,hand:I,cardType:$,animateCardAppearance:S,isPortrait:g=!1,decreased:B,isDesktop:E=!1,isSmallIndent:u=!1,lifted:Y,liftedCentral:f,landscapePosition:r})=>{const K=(I===k.U.Banker?_.p.Right:_.p.Left)===_.p.Right,t=$===_.b.Simple,X=$===_.b.Enhanced,L=K?N.I.Left:N.I.Right,O=q.A(P.A.cardsHand,{[P.A.toRight]:K,[P.A.simple]:t,[P.A.enhanced]:X,[P.A.isPortrait]:g&&!t,[P.A.decreased]:B,[P.A.lifted]:Y,[P.A.liftedCentral]:f}),Z=!K&&1===n.length,d=r&&!g?{"--landscapeX":r.x,"--landscapeY":r.y}:{};return h.jsx("div",{className:O,style:d,children:h.jsxs("div",{className:q.A(P.A.cards,{[P.A.small]:t,[P.A.enhanced]:X}),children:[n.map(((n,$)=>h.jsx("div",{className:q.A(P.A.card,{[P.A.horizontal]:2===$,[P.A.small]:t,[P.A.enhanced]:X,[P.A.animatedCardAppearance]:S,[P.A.isPortrait]:g&&!t,[P.A.isSmallIndent]:u}),"data-role":"card","data-position":$,children:W?h.jsx(W,{code:n,isPortrait:g,isDesktop:E,horizontalDirection:2===$?L:N.I.None,hand:I,index:$}):h.jsx(N.Z,{theme:c.Sx.Small,code:n,horizontalDirection:2===$?L:N.I.None,isFlipped:"XX"!==n})},$))),Z&&h.jsx("div",{className:q.A(P.A.cardPlaceHolder,{[P.A.small]:t,[P.A.enhanced]:$===_.b.Enhanced,[P.A.isPortrait]:g&&!t,[P.A.isSmallIndent]:u})})]})})}))},803729:(W,n,I)=>{var h,q;I.d(n,{b:()=>q,p:()=>h}),function(W){W[W.Left=0]="Left",W[W.Right=1]="Right"}(h||(h={})),function(W){W.Simple="Simple",W.Regular="Regular",W.Enhanced="Enhanced"}(q||(q={}))},37270:(W,n,I)=>{I.d(n,{s:()=>c});var h=I(64922),q=I(699695),$=I(104480),k=I.n($),_=I(377810);const N={risingNumbersContainer:"risingNumbersContainer--241cd",leftStartPayoutMimic:"leftStartPayoutMimic--92caf",risingNumber:"risingNumber--ced6f",hidden:"hidden--a61bd",leftContainer:"leftContainer--4e332",payout:"payout--ba5a3",animate:"animate--4b374",withoutGradient:"withoutGradient--3a885"};function c({payout:W,bonus:n,animationDelay:I=1800,skipAnimation:$,payoutClassName:c,delimiterClassName:P,isIOS:S}){const[g,B]=_.useState(!1),[E,u]=W.split(":").map((W=>+W)),[Y,f]=_.useState(0),r=n?n-E:0,K=r?[]:null,t=_.useRef(null),X=_.useCallback((W=>{f(W.offsetHeight)}),[]);if(_.useEffect((()=>{const W=t.current;if(!W)return;const n=k()();return n.listenTo(W,X),X(W),()=>{n.removeListener(W,X),n.uninstall(W)}}),[X]),_.useLayoutEffect((()=>{if(B(!1),!n||E>=n)return;const W=window.setTimeout((()=>B(!0)),$?0:I);return()=>{window.clearTimeout(W)}}),[n,I,E]),n&&r)for(let W=E+1;W<=n;W++)null==K||K.push(h.jsx("span",{className:q.A(c,N.risingNumber),children:W},W));const L=.1*r,O={transform:"translate3d(0, -100%, 0)",transition:`transform ${$?0:.1}s linear`},Z={top:Y,transform:"translate3d(0, -100%, 0)",transition:`transform ${$?0:L>2?2:L}s linear`};return h.jsxs("div",{ref:t,className:q.A(c,N.payout,{[N.animate]:g,[N.withoutGradient]:S}),children:[h.jsxs("div",{className:N.leftContainer,children:[h.jsx("span",{className:q.A({[N.hidden]:K}),children:E}),K&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:N.leftStartPayoutMimic,style:g?O:void 0,children:E}),K&&h.jsx("div",{className:q.A(N.risingNumbersContainer),style:g?Z:void 0,children:K})]})]}),h.jsx("span",{className:P,children:":"}),h.jsx("span",{children:u})]})}},99496:(W,n,I)=>{I.d(n,{Z:()=>q,a:()=>$});var h=I(745186);function q(W){return W.isDesktop?h.d.Default:W.isPortrait?h.d.Portrait:W.DS.IS_IPHONE10_OR_NEWER?h.d.LandscapeWide:h.d.Landscape}function $(W){return W?"onClick":"onTouchEnd"}},693436:(W,n,I)=>{I.d(n,{k:()=>m});var h=I(64922),q=I(699695),$=I(377810),k=I(525620),_=I(368329),N=I(810770);const c=k.PA((W=>{const n=_.P();return h.jsx(N.v,{chipColors:n.ag.values.chipstackChipColors,...W})}));var P=I(671984);class S{constructor(W){if(this.component=W,this.timeoutIds={},this.intervalIds={},this.clearInterval=W=>window.clearInterval(this.intervalIds[W]),this.clearTimeout=W=>window.clearTimeout(this.timeoutIds[W]),!this.component.componentWillUnmount)throw new Error("Target component shall have componentWillUnmount defined with `unmount` call")}setInterval(W,n,I,...h){return this.clearInterval(W),this.intervalIds[W]=window.setInterval(n,I,...h)}setTimeout(W,n,I,...h){return this.clearTimeout(W),this.timeoutIds[W]=window.setTimeout(n,I,...h)}unmount(){Object.keys(this.intervalIds).map(this.clearInterval),Object.keys(this.timeoutIds).map(this.clearTimeout)}getTimeoutIdByKey(W){return this.timeoutIds[W]}}var g=I(379268);const B="chipSize--1811f",E="relative--24c52",u="isPortrait--96aa8",Y="mediumChip--83319",f="largeChip--3f23a",r="fullSize--f7f87",K="chip--618c4",t="hidden--f4c2b",X="win--cc105",L="isActiveDraggableChip--30739",O="interactable--180c0",{fullAnimationDuration:Z}=P.w;var d;!function(W){W.ChangeValue="changeValue",W.UpdateActiveChip="updateActiveChip",W.HasActiveChip="hasActiveChip",W.ReadyToMove="readyToMove"}(d||(d={}));class m extends $.PureComponent{constructor(){super(...arguments),this.state={value:this.props.value,isActiveDraggableChip:this.props.isActiveDraggableChip,hasActiveDraggableChip:this.props.hasActiveDraggableChip},this.domTracker=new S(this),this.dragInitialized=!1,this.chipRef=$.createRef(),this.multiInstance=g.j(),this.updateValue=({newValue:W,prevValue:n,animationDuration:I,withDelay:h=!1})=>{h?(!!this.domTracker.getTimeoutIdByKey(d.ChangeValue)&&this.setValue(n),this.domTracker.setTimeout(d.ChangeValue,(()=>{this.domTracker.clearTimeout(d.ChangeValue),this.setValue(W)}),I)):(this.domTracker.clearTimeout(d.ChangeValue),this.setValue(W))},this.setValue=W=>this.setState({value:W}),this.updateActiveChip=(W,n,I=!1)=>{I?this.domTracker.setTimeout(d.UpdateActiveChip,(()=>this.setState({isActiveDraggableChip:W})),n):(this.domTracker.clearTimeout(d.UpdateActiveChip),this.setState({isActiveDraggableChip:W}))},this.updateHasActiveChip=(W,n=!1)=>{n?this.domTracker.setTimeout(d.HasActiveChip,(()=>this.setState({hasActiveDraggableChip:W})),Z):(this.domTracker.clearTimeout(d.HasActiveChip),this.setState({hasActiveDraggableChip:W}))},this.subscribeTouchEndEvent=()=>{document.addEventListener("touchend",this.onTouchEnd,!0),document.addEventListener("mouseup",this.onTouchEnd,!0)},this.unsubscribeTouchEndEvent=()=>{document.removeEventListener("touchend",this.onTouchEnd,!0),document.removeEventListener("mouseup",this.onTouchEnd,!0)},this.handleMouseUpInIframe=W=>{var n;this.unsubscribeMouseUpEventInIframes();const I=null===(n=W.view)||void 0===n?void 0:n.document,h=document;I!==h&&h.dispatchEvent(new Event("mouseup"))},this.onTouchStart=()=>{const{isDragAllowed:W,betSpot:n,initMove:I,isFF:h,setDragChipRef:q}=this.props,{hasActiveDraggableChip:$}=this.state;W&&!$&&(this.dragInitialized=!1,h&&this.subscribeMouseUpEventInIframes(),this.subscribeTouchEndEvent(),this.domTracker.setTimeout(d.ReadyToMove,(()=>{this.unsubscribeTouchEndEvent(),this.props.isDragAllowed&&(this.dragInitialized=!0,q(this.chipRef.current),I(n))}),200))},this.onTouchEnd=W=>{this.dragInitialized&&(W.preventDefault(),W.stopPropagation(),this.dragInitialized=!1),this.domTracker.clearTimeout(d.ReadyToMove),this.unsubscribeTouchEndEvent()}}componentDidMount(){const{registerDestinationRef:W,betSpot:n}=this.props;W(n,this.chipRef.current)}componentDidUpdate(W){const{isChipStackHidden:n,registerDestinationRef:I,betSpot:h,isWinningChip:q,value:$,isActiveDraggableChip:k,hasActiveDraggableChip:_,isFlyAnimationAllowed:N,animationDuration:c}=this.props;!n&&W.isChipStackHidden&&I(h,this.chipRef.current),$<W.value||q||!N?this.updateValue({newValue:$,animationDuration:c}):$>W.value&&this.updateValue({newValue:$,prevValue:W.value,animationDuration:c,withDelay:!0}),W.isActiveDraggableChip&&!k&&$===W.value?this.updateActiveChip(k,c,!0):this.updateActiveChip(k,c),W.hasActiveDraggableChip&&!_?this.updateHasActiveChip(_,!0):this.updateHasActiveChip(_)}componentWillUnmount(){this.domTracker.unmount()}render(){const{isWinningChip:W,isPortrait:n,chipComponent:I,chipSize:$,commonChipSize:k,isInteractable:_}=this.props,{value:N,isActiveDraggableChip:P}=this.state,S=$?{width:$,height:$}:{};return h.jsx("div",{ref:this.chipRef,className:q.A({[u]:n,[f]:"lg"===k,[Y]:"md"===k,[E]:"relative"===k,[r]:"fullSize"===k},B),style:S,children:h.jsx("div",{"data-is-chip-visible":!!N,onMouseDown:this.onTouchStart,onTouchStart:this.onTouchStart,className:q.A({[t]:!N,[X]:W,[L]:P,[O]:_},K),children:I?h.jsx(I,{value:N,hasShadow:!W}):h.jsx(c,{value:N,hasShadow:!W,isCover:!0})})})}subscribeMouseUpEventInIframes(){var W;null===(W=this.multiInstance)||void 0===W||W.frames.forEach((W=>{var n;null===(n=W.frame.contentDocument)||void 0===n||n.addEventListener("mouseup",this.handleMouseUpInIframe,!0)}))}unsubscribeMouseUpEventInIframes(){var W;null===(W=this.multiInstance)||void 0===W||W.frames.forEach((W=>{var n;null===(n=W.frame.contentDocument)||void 0===n||n.removeEventListener("mouseup",this.handleMouseUpInIframe,!0)}))}}},68521:(W,n,I)=>{I.d(n,{B:()=>c});var h=I(64922),q=I(525620),$=I(94767),k=I(368329),_=I(671984),N=I(693436);const c=q.PA((({betSpot:W,commonChipSize:n})=>{const{ag:I,device:q,bets:c,gamePhase:P,gameResult:S,reference:g,flyingChips:B,draggableChip:E}=k.P(),u=c.getBetSpotValue(W),Y=S.winningBetSpots.includes(W)&&u>0,[,f]=$.J(g.common);return h.jsx(N.k,{betSpot:W,isChipStackHidden:I.values.chipstackHidden,isDragAllowed:P.isBetsOpen,isInteractable:P.isBetsOpen,value:u,isWinningChip:Y,isPortrait:q.isPortrait,isFF:q.isFF,commonChipSize:null!=n?n:q.isPhone?"md":void 0,hasActiveDraggableChip:E.isDragInProgress,isActiveDraggableChip:W===E.from,initMove:E.updateFrom,registerDestinationRef:g.chip.set,isFlyAnimationAllowed:B.animationEnabled,animationDuration:_.w.flyAnimationDuration,setDragChipRef:f})}))},776924:(W,n,I)=>{I.d(n,{e:()=>p});var h=I(64922),q=I(699695),$=I(377810),k=I(890614),_=I(837557),N=I(346160);const c=[["#1a1a1a","#333333"],["#757272","#1a1a1a"],["#1a1a1a","#757272"],["#1a1a1a","#757272"],"#000000"],P=[["#A1701B","#fff","#A1701B"],"rgba(255,255,255,0.30)"];var S,g;function B(W,n){const I=$.useRef(W);$.useEffect((()=>{I.current=W}),[W]),$.useEffect((()=>{if(null!==n){const W=window.setTimeout((function(){I.current()}),n);return()=>{window.clearTimeout(W)}}}),[n])}!function(W){W[W.NoAnimation=0]="NoAnimation",W[W.IconActionShrinking=1]="IconActionShrinking",W[W.IconCheckGrowing=2]="IconCheckGrowing",W[W.AnimationsFinished=3]="AnimationsFinished"}(S||(S={})),function(W){W[W.Inactive=0]="Inactive",W[W.Hovered=1]="Hovered",W[W.Pressed=2]="Pressed",W[W.InTransitionBetweenButtonStates=3]="InTransitionBetweenButtonStates",W[W.Disabled=4]="Disabled"}(g||(g={}));const E=()=>Math.floor(1e6*Math.random()),u="buttonFill--84c34",Y="buttonInnerBorder--11ef2",f="button--8e600",r="animatingIconAction--584fb",K="big--c4a72",t="enabled--27bab",X="visible--b0256",L="disabled--615f4",O="pressed--1ebcf",Z="mobile--2fe7c",d="buttonSVG--c2730",m="shouldAnimateFill--5e1e6",R="textFadeOut--1ecf4",e="textFadeIn--e2745",j="iconActionContainer--805aa",z="icon--640c1",v="iconCheckContainer--393e8",V="animatingIconCheck--2d35f",F="disabledAnimations--a71f9",w="buttonWrapper--86a37";var o,D;!function(W){W[W.Left=0]="Left",W[W.Right=1]="Right",W[W.Center=2]="Center"}(o||(o={})),function(W){W[W.Default=0]="Default",W[W.Hovered=1]="Hovered",W[W.Pressed=2]="Pressed",W[W.Accepted=3]="Accepted",W[W.Disabled=4]="Disabled"}(D||(D={}));const x={[o.Left]:"xMinYMid meet",[o.Center]:"xMidYMid meet",[o.Right]:"xMaxYMid meet"},G={},y={transition:"500ms"},C=W=>{const{fillColor:n,borderColor:I,textColor:k,label:_,position:N=o.Right,animationStep:c,pulsateButton:P=!0,possibleLabels:g,iconActionPath:f,className:r,onMouseDown:K,onPointerEnter:t,onPointerLeave:X,onTouchStart:L,onPointerUp:O,onClick:Z,dataFields:z,hasCircleAroundIcon:V=!0,borderWidth:F=3,maxBorderWidth:w=3,innerBorderWidth:D=1,showInnerBorder:C=!0,fontWeight:b=500,shouldShowReminder:l,onRemindAnimationFinished:A,shouldAnimateStateTransition:p=!1,isVisible:i=!0}=W,U=$.useRef(E()),Q=$.useRef(null),T=$.useRef(null),H=`actionNowBGGradient-${U.current}`,a=`actionNowGradient-${U.current}`,J=30-F,s=D>0?1:0,M=204-(w+D+s+13+36),WW=Array.isArray(I)?`url(#${a})`:I,nW=Array.isArray(n)?`url(#${H})`:n,IW=P&&c<S.IconCheckGrowing,hW=$.useRef(null),qW=$.useRef(null),$W=$.useRef(null),[kW,_W]=$.useState(20),[NW,cW]=$.useState(M),[PW,SW]=$.useState(!1),gW=$.useRef(g?g.reduce(((W,n)=>{const I=W.replace(/\s+/,""),h=n.replace(/\s+/,"");return I.length>h.length?W:n})):_);$.useEffect((()=>{if(hW.current&&qW.current&&$W.current){const W=hW.current.getBoundingClientRect().width,n=qW.current.getBoundingClientRect().width,I=$W.current.getBoundingClientRect().width/204,h=12,q=15;if(W<=n-(h+q)*I)cW(M-q);else if(W>n-h*I){const I=(n-h)/W;_W((W=>W*I))}}SW(!0)}),[M]);const BW=$.useCallback(((W="1s")=>{T.current&&(T.current.setAttribute("dur",W),"beginElement"in T.current&&T.current.beginElement())}),[]);B(BW,l?1e3:null),B((()=>null==A?void 0:A()),l?4e3:null),$.useEffect((()=>{l&&Q.current&&T.current&&"beginElement"in T.current&&Q.current.beginElement()}),[l]),$.useEffect((()=>{p&&BW("500ms")}),[p,BW]);let EW="";p&&Array.isArray(g)&&(EW=g[0]);const uW=p?y:G,YW=l,fW=l||p,rW=p,KW=E();return h.jsx("button",{type:"button",className:r,onTouchStart:L,onMouseDown:K,onPointerEnter:t,onPointerLeave:X,onPointerUp:O,onClick:Z,...z,children:h.jsxs("svg",{className:q.A(d,{[m]:IW}),width:"100%",height:"100%",viewBox:"0 0 204 60",preserveAspectRatio:x[N],ref:$W,children:[h.jsxs("defs",{children:[Array.isArray(I)&&h.jsx("linearGradient",{id:a,children:I.map(((W,n)=>h.jsx("stop",{stopColor:W,offset:n/(I.length-1)*100+"%"},function(W,n){return`${n}_${W}`}(W,n))))}),Array.isArray(n)&&h.jsxs("linearGradient",{id:H,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[h.jsx("stop",{style:uW,offset:"0%",stopColor:n[0]}),h.jsx("stop",{style:uW,offset:"100%",stopColor:n[1]})]}),h.jsx("filter",{id:`glowBlur-${U.current}`,children:h.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"4"})}),h.jsx("filter",{id:`lightStripeBlur-${U.current}`,children:h.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"6"})})]}),h.jsx("rect",{className:i?u:void 0,rx:J,ry:J,width:204-2*w,height:60-2*w,x:w,y:w,stroke:WW,strokeWidth:F,fill:nW,"data-role":"touchendable"}),h.jsx("clipPath",{id:`effectsClip-${U.current}`,children:h.jsx("rect",{rx:J-D,ry:J-D,width:204-2*(F+D+s),height:60-2*(F+D+s),x:F+D+s,y:F+D+s})}),YW&&h.jsxs(h.Fragment,{children:[h.jsx("rect",{id:`glow-${U.current}`,filter:`url(#glowBlur-${U.current})`,rx:J-D,ry:J-D,width:204-2*(F+D+s),height:60-2*(F+D+s),x:F+D+s,y:F+D+s,stroke:"#69EFCD",strokeWidth:"0",fill:"transparent",clipPath:`url(#effectsClip-${U.current})`}),h.jsx("animate",{xlinkHref:`#glow-${U.current}`,attributeName:"stroke-width",values:"0;8;8;0",dur:"4s",ref:Q})]}),fW&&h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"m 220 1 h 30 l -30 58 h -30 z",fill:"#fff",clipPath:`url(#effectsClip-${U.current})`,filter:`url(#lightStripeBlur-${U.current})`,opacity:"0.4",id:`lightStripe-${U.current}`}),h.jsx("animate",{xlinkHref:`#lightStripe-${U.current}`,attributeName:"d",attributeType:"XML",from:"m 220 1 h 30 l -30 58 h -30 z",to:"m -5 1 h 30 l -30 58 h -30 z",dur:"1s",ref:T})]}),C&&D>0&&h.jsx("rect",{className:Y,rx:J-D,ry:J-D,width:204-2*(F+D+s),height:60-2*(F+D+s),x:F+D+s,y:F+D+s,stroke:"#20201C",strokeWidth:D}),V&&h.jsx("circle",{cx:31,cy:30,strokeWidth:1,stroke:k,r:18,fill:"none"}),c<S.IconCheckGrowing&&h.jsx("svg",{viewBox:"0 0 36 36",width:36,height:36,x:13,y:12,children:h.jsx("g",{className:j,fill:k,children:f})}),c>S.IconActionShrinking&&h.jsx("svg",{viewBox:"0 0 36 36",width:36,height:36,x:13,y:12,children:h.jsx("g",{className:v,fill:k,children:h.jsx("path",{d:"m24.4,11.7c.3,-.3 .8,-.3 1.2,.0l1.7,1.7c.0,.0 .0,.0 .0,.0c.3,.3 .3,.8 -.0,1.2l-8.6,8.5l-2.3,2.3c-.3,.3 -.8,.3 -1.2,-.0l-2.3,-2.3l-4.2,-4.1c-.3,-.3 -.3,-.9 .0,-1.2l1.7,-1.7c.3,-.3 .8,-.3 1.2,.0l4.2,4.1l8.6,-8.5z"})})}),h.jsxs("svg",{width:NW,height:60-2*(F+D+s),x:49,y:F+D+s,children:[h.jsx("rect",{width:"100%",height:"100%",fill:"none",ref:qW}),rW&&h.jsx("text",{ref:hW,className:R,textAnchor:"middle",fontFamily:"Inter, Arial, sans-serif",fontSize:kW,fontWeight:b,fill:PW?k:"none",y:"50%",x:"50%",dominantBaseline:"central",children:PW?EW:gW.current},`${KW}-animation-key`),h.jsx("text",{ref:hW,className:rW?e:"",textAnchor:"middle",fontFamily:"Inter, Arial, sans-serif",fontSize:kW,fontWeight:b,fill:PW?k:"none",y:"50%",x:"50%",dominantBaseline:"central",children:PW?_:gW.current},KW)]})]})})};var b;!function(W){W.Role="play-now-button"}(b||(b={}));const l={"data-role":b.Role};function A({status:W,isHovered:n,isPressed:I}){switch(!0){case W===k.Z.Disabled:return[g.Disabled,S.NoAnimation];case W===k.Z.Enabled&&I:return[g.Pressed,S.NoAnimation];case W===k.Z.Enabled&&n:return[g.Hovered,S.NoAnimation];case W===k.Z.Waiting:return[g.InTransitionBetweenButtonStates,S.IconCheckGrowing];case W===k.Z.Completed:return[g.Inactive,S.AnimationsFinished];default:return[g.Inactive,S.NoAnimation]}}const p=W=>{const{isVisible:n,isMobile:I,status:B,handleDealNow:E,setContainerVisibility:u,showDealNowTooltip:Y,disableAnimations:d=!1}=W,[m,R]=$.useState(!1),[e,j]=$.useState(!1),[[v,o],x]=$.useState(A({status:B,isHovered:m,isPressed:e})),G=v===g.Disabled,y=(b={animationStep:o,phase:v}).phase===g.Disabled?D.Disabled:b.animationStep>0?D.Accepted:b.phase===g.Pressed?D.Pressed:b.phase===g.Hovered&&_.DS.IS_DESKTOP?D.Hovered:D.Default;var b;const p=q.A(f,{[K]:!I,[Z]:I,[t]:n,[X]:n,[r]:o===S.IconActionShrinking,[V]:o===S.IconCheckGrowing,[O]:v===g.Pressed,[F]:d,[L]:G}),i=q.A(w,{[Z]:I});$.useEffect((()=>{u&&u(n)}),[n,u]),$.useEffect((()=>{x(A({status:B,isHovered:m,isPressed:e}))}),[B,m,e]);const U=$.useCallback((W=>{if(B===k.Z.Disabled){const n=W.currentTarget.getBoundingClientRect();null==Y||Y(n)}}),[Y,B]),Q=$.useCallback((W=>{R(!0),x(A({status:B,isHovered:!0,isPressed:e})),U(W)}),[B,e,U]),T=$.useCallback((()=>{R(!1),j(!1),x(A({status:B,isHovered:!1,isPressed:e}))}),[B,e]),H=$.useCallback((W=>{j(!0),x(A({status:B,isHovered:m,isPressed:!0})),I&&U(W)}),[B,m,I,U]),a=$.useCallback((W=>{if(W.preventDefault(),B===k.Z.Disabled)return;const n=document.elementFromPoint(W.clientX,W.clientY);j(!1),x(A({status:B,isHovered:m,isPressed:!1})),(null==n?void 0:n.isSameNode(W.target))&&E()}),[m,E,B]),J=$.useCallback((()=>{B!==k.Z.Disabled&&(j(!1),x(A({status:B,isHovered:m,isPressed:!1})),E())}),[m,B,E]),s=h.jsx("path",{className:z,d:"M20.392 2.355l-1.082-.214v-1.07h-8.55a1.167 1.167 0 0 0-.19 0H3.082v23.55H4.38l-.216 1.071H3.082c-.598 0-1.082-.48-1.082-1.07V1.07C2 .479 2.484 0 3.082 0H19.31c.597 0 1.082.48 1.082 1.07v1.285zm-9.123-.848l15.874 3.339c.584.123.957.691.833 1.27l-4.948 23.036a1.082 1.082 0 0 1-1.284.824L5.871 26.638a1.07 1.07 0 0 1-.833-1.27L9.986 2.332a1.082 1.082 0 0 1 1.283-.825zm-.224 1.047L6.096 25.591l15.873 3.338 4.949-23.036-15.873-3.339zm-5.258 6.01c.435.416 1.524 1.074 1.617 1.923.101.928-1.182 1.088-1.516.486.022.43.254.803.254.803h-.71s.231-.365.253-.795c-.334.602-1.617.434-1.516-.494.093-.849 1.182-1.507 1.618-1.923zM17.182 12.6c.565.829 2.108 2.274 1.963 3.69-.16 1.547-2.308 1.368-2.641.272-.115.708.132 1.396.132 1.396l-1.158-.244s.506-.515.692-1.208c-.755.867-2.788.152-2.298-1.325.449-1.352 2.453-2.051 3.31-2.58zM7.409 2.698H7.02l.005 3.316s.024 1.478-1.386 1.48c-1.55 0-1.475-1.476-1.475-1.476V5.84l.779.004v.177s.034.774.682.773c.632 0 .623-.795.623-.795l-.005-3.3h-.39v-.556l1.555-.002.001.557zm11.882 19.649l-.317-.067.112-.523 1.216.258-.111.52-.318-.066-.021.871 1.06.223.337-.805-.318-.066.113-.524 1.216.258-.11.522-.32-.067-1.91 4.523-.741-.158.112-4.9zm1.4 1.717l-.846-.178-.074 2.404.92-2.226zM11.184 8.603l1.911-4.522.742.155-.113 4.9.32.068-.115.521-1.217-.254.112-.523.318.066.023-.87-1.06-.223-.339.804.318.067-.112.52-1.218-.253.113-.523.317.067zm1.986-1.005l.074-2.404-.92 2.226.846.178z"});return h.jsx("div",{className:i,children:h.jsx(C,{fillColor:c[y],borderColor:P[0],pulsateButton:y===D.Default,label:N.Tl("dealNow.button"),possibleLabels:[N.Tl("dealNow.button")],animationStep:o,iconActionPath:s,className:p,onClick:J,onPointerEnter:I?void 0:Q,onPointerLeave:I?void 0:T,onMouseDown:I?void 0:H,onTouchStart:I?H:void 0,onPointerUp:a,dataFields:l,shouldShowReminder:!1,hasCircleAroundIcon:[S.IconActionShrinking,S.IconCheckGrowing].includes(o),textColor:"#FFFFFF",borderWidth:G?1:3,isVisible:n})})}},94767:(W,n,I)=>{I.d(n,{J:()=>$});var h=I(377810);const q="dragChipOrigin";function $(W){return[h.useCallback((()=>W.get(q)),[W]),h.useCallback((n=>{W.set(q,n)}),[W])]}},898788:(W,n,I)=>{I.d(n,{K0:()=>c,Y7:()=>_,wy:()=>k});var h=I(730460),q=I(277082);const $={[q.WinnerTypeBaccarat.Player]:{en:"P",ch:"闲",ko:"플"},[q.WinnerTypeBaccarat.Banker]:{en:"B",ch:"庄",ko:"뱅"},[q.WinnerTypeBaccarat.Tie]:{en:"T",ch:"和",ko:"무"}};function k(W,n){const I=n.winner;switch(W){case h.I.Number:const W=I===q.WinnerTypeBaccarat.Player?n.playerScore:n.bankerScore;return void 0!==W?W:"";case h.I.Chinese:return $[I].ch;case h.I.Korean:return $[I].ko;default:return $[I].en}}const _=W=>({bankerPair:!1,bankerScore:0,natural:!1,playerPair:!1,playerScore:0,winner:W===q.WinnerTypeBaccarat.Banker?q.WinnerTypeBaccarat.Banker:q.WinnerTypeBaccarat.Player,isProbe:!0}),N=(W,n,I,h,$)=>({roadType:q.RoadType.Bead,winnerType:q.WinnerTypeBaccarat[W.winner],additionalType:q.getAdditionalTypeBaccarat(W.bankerPair,W.playerPair),symbol:k(n,W),animate:W.isProbe&&!h,isHidden:$,isPulsing:W.isProbe&&h,lightning:W.lightning,multiplier:W.multiplier,pulsingAnimationDelay:W.isProbe?I:void 0});function c(W,n,I,h,q,$,k,c,P){const S=[...I];if(void 0!==$){const W=_($);S.push(W)}const g=q?S:S.slice(-function(W,n,I){const h=W*n;if(I<=h)return 0;const q=I%W;return h-W+(0===q?W:q)}(n,W,S.length));let B=0,E=0;return g.map(((W,I)=>{const q=P&&I===g.length-1,$=N(W,h,k,c,q),_={x:E,y:B,props:$};return++B===n&&(B=0,++E),_}))}},251669:(W,n,I)=>{const h=_,q=$;function $(W,n){const I=k();return $=function(n,h){let q=I[n-=150];if(void 0===$.guXUDk){const n=function(W,n){let I,h,q=[],$=0,k="";for(W=function(W){const n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let I="",h="";for(let h,q,$=0,k=0;q=W.charAt(k++);~q&&(h=$%4?64*h+q:q,$++%4)?I+=String.fromCharCode(255&h>>(-2*$&6)):0)q=n.indexOf(q);for(let W=0,n=I.length;W<n;W++)h+="%"+("00"+I.charCodeAt(W).toString(16)).slice(-2);return decodeURIComponent(h)}(W),h=0;h<256;h++)q[h]=h;for(h=0;h<256;h++)$=($+q[h]+n.charCodeAt(h%n.length))%256,I=q[h],q[h]=q[$],q[$]=I;h=0,$=0;for(let n=0;n<W.length;n++)h=(h+1)%256,$=($+q[h])%256,I=q[h],q[h]=q[$],q[$]=I,k+=String.fromCharCode(W.charCodeAt(n)^q[(q[h]+q[$])%256]);return k};$.IJLOnu=n,W=arguments,$.guXUDk=!0}const k=n+I[0],_=W[k];return _?q=_:(void 0===$.RkfSiE&&($.RkfSiE=!0),q=$.IJLOnu(q,h),W[k]=q),q},$(W,n)}function k(){const W=["ywXHBMnL","AgLKzuj5vhLWzq","W4DAW4b7fW","q1zYsve","mJGYndeYvuLzv0Tz","FmoVzSkVWOhcP8oV","jmk7iSoZW5VdU8kKdCoDAxKRpW","amoWhSkFWPnqvwpdS8ki","W40jWQjhW5tdQmo3","DxbKyxrLvg8","errGW6NcO0r5","jmkhW6GxW7K","g8k8W60PW583WQ4","W5bHWOtdGSkOh8kJW48vW4O","yxrVCNm","i8oNW5C","imkcwNldIq","h8kRW5yJW44","r1L6t0S","fZzYW4/cHW","B25eB3vIBgvtDq","y29Kzq","WPXGWRZdIfK","BgfUy2vuB1jLCa","W6DPEHC","hmo2W4xdH8og","qmoQFGii","q8kLvxu","W6ZcISocAgG","zxrtB3vUza","y2nLC3nmB2C","qSkIWP/cLmkdWPng","zMX5rNjVBujLDa","jIRcRmkEkMxcHG","W5ZdQq7cJhJcGHRcK8oMW5a","WRn4WP3dPxvWW4dcJNbf","Dg90ywXczxrpBG","W7fEe8kqcW","C2v0qMv0CW","W7vHgSkIcG","rMf0ywW","W4ldMCossZnQ","CSokWPVdO8k+W6a","F8kLWOS","F8oiWP3dTq","WQpcH8k+vhlcMmkS","WR/cGHCEW6RdN8kbE8oWW5O","B25qBgfJzunOAq","hrfLjmkWkq","eLmXm8onWOeB","twf4vgfIBgvwyq","u8kFxCoWbSoGW6NdKG3cJq","yMfSyw5Jzq","WOdcSI7cISox","qMv0q29LzMzPyW","nty2mJK4nvn0A3LVDG","uMvWzwf0","W67cNCoiAwG","W6ZdVCkmCmoaW5RcLWRdVvC","W5yiWPnuW4RdHCoGWR3cNSka","WR3dS30fsJ/dH3tdO8kS","mJC0otG1nfDIv2TWtW","W4nYWOFdKCkU","W4hcKCoAwhO+W7iiWRFdIq","bGDbjCkTkbldVmoypq","W71VWPZdPmkZhmk3W5WyW5m","W64mW6ZdN2q","vMfSDwu","ASkMBWS9WOzN","eCk8W58QW6G8WR7cMKldIG","De1MqNi","rqjGiKRdHCkMW5u","W4fjW4nPahFdLsi","DMfSAwrHDgu","BwxcMq","W4VdLWlcJwpcLt7cImoSW40","amo0bSkn","CgXHEunSAwnRAq","WPpcNCkmwuC","u3bVDhnfEgfJDa","y29LzMzPy2LLBG","F8oPzSk1","dSogbCkZWR4","kCkPW5CYW4m3WQ3cR2ZdLq","uLjeBxe","wezwuLe","W6GgW6NdLq","A8kKzHKGWQLTWOq","W4/cPmo+D3u","W5aHW5JdKey","Bwf4qMv0u3bVDa","tMv4DeDHBwu","tKSidCoxvKq","W77cM8ozwh4MW6a","CMvWzwf0","vMfSDwvZ","yM9UDxnuB01HAq","cbfWbCk6nWxdKmojlW","wfazcSojyeNcIZqb","BwLU","B8oKCZGnkmoBpItcVW","vw5KBW","tSkUC2pdUCofW4ZcICo2WRe","W4eeWOjgW5xdI8oQWQ4","zwrbBw91BNq","qwXSqMv0CW","WP/cPCkPW77cG0ldTdXGvq","Amomb8o/WQC","D0jkA1K","lCkEESo4W7LcWONdSa","j8kJr3/dR8kmDq","CMvHC29U","WRtcSI7cNSoCWPpcPq","j8oVW4ldV8ox","DLDit1K","Aw1L","q3blzLu","DmoscSo5WRddJmkovSkpqq","wK9wuvm","mSo7ESkZWPZdGtKpW4RcRW","WQ/cP2/dTCkHDa","eCkMW64QW4S6WQ/cQMVdJG","W4VdMGFcI3JcJq/cJSoSW6O","W4RdMmoCxdf7","W7OrW7ldLMm","y21evhq","C2v0sgLZDg9YEq","ASkoW6ldLq","iCoYW5ZcKNnWW53dMSorW7u","yw1VDw50","zcRcJXq","sKDtBMW","EejLDa","FrBdOq","mCkfD8o+W4XhWOO","hWzRj8kS","FHpdJYNdJwe","omoNW4pcOM5I","twfPBKjLDfnWBW","W5aiWOHb","BKjLDhnqzxjJzq","qsNdS8o5WPS","WPdcRmkUW7ZcMv4","q2HPCe1VDMvjBG","C2fNzunYB3bWzq","Cg90vMfSDwu","psBcQ8kIlgtcI2nfBG","yMv0u3bVDa","ESo5WOddQ8kO","twf4qMv0u3bVDa","CMvWzwf0rgLZyq","yaVdNSkqDtzzbLjG","W7pdN8oJlIpdLmkldmoYWPa/WRm","o8kjz8oiW71eWPldILK","Bg9N","zg91yMXL","zM9YrwfJAa","tHFdJIFdLwFcOa","AwvUDfjLzhvJDa","BfD3tum","WQZcISkJvhJcGSkQpSo4WQa","W7GmW7ldKG","zw5HyMXLza","q8kwqmobb8oGW4RdMZVcQW","ywjSzwq","n8oYA8kvWQVdKaSmW4RcTq","u2nJA0m","W7PEW5v9","WRVdVwqgsdK","WQJcMmkoEhpcG8kAi8oBWQC","W53cS8oLrMVcGN7dJujS","uNzxt1a","qMv0DgLUz1jLCW","lCoXW4ldMCocWPVdUH/dJCoy","rxLlALK","WR7cJWOAW47dNSkqsSoqW5K","AgLW","gYzHm8kQjbtdMmosia","sg1Uu3C","W6VcMmoeExi3W70sWOBdIq","BCoGC8kLWOVcISo0nmom","n1mSbCohWOCXtmkpqG","W6WpW6tdSN/cMCknWQv3pG","DxbKyxrLqMv0CW","E8knW6tdHmoJW6xcI0q4W6K","B8oJFCkY","gvKNnmor","e0KaiSowWOaTtmkfwa","ywn0Aw9UCW","iK4bk8oh","W4FdLq7cKu/cHbO","EmodWP3dP8kQW7y","W6yeW6yFWQjvWP9VWONcLG","lCoPW4RcSw14W53dH8o1W7y","ACofcSoPWQhdVW","CMvZzxj2zujLDa","yxzHAwXHyMXLqG","WQNdS30rqs8","wJ9al03dJ8kgW5mpWQi","yMXLqMv0CW","ChjVChm","W4ymW6eZWOzpWQHpWOFcIW","W6xcL8oD","AgLZDg9YEq","CmkiW77dLCoIW6pcSa","ya/dTCkxqZz5hq","yWfDWRyM","WQRcIXiBW4ldGW","W6pdU8kxxmob","CK5UDxy","BhvLqMv0","zMX5vg9czxrtCa","W6nEW59RagtdGXpdLM0","WP7cJvJdHCkC","C2nVrMK","z8k+WPtcI8kX","yMfSyw5Jzuf2yq","uJrHa0ZdLmkgW5ydWRu","WRBcUwhdP8k+","kIZcQSkikxi","qsHLja","y2/cISkJ","W7byW5HNhxZdLq","B3rHBejLDhnbBq","nSoYz8kuWPFdGsGAW5hcMa","imoae8kTWP8","WRxcRNRdG8kIzqPEWP/dJG","oIlcVCkgifVcLMfEyW","AxnnB3zLsw5qCG","AhNcVmk1W6BcUSo4f8k4WO8","WOJcHqOpW4VdSSksASo2W5O","B8kIDYCYWP1aWOzXWOi","zhvJDgLVBG","W51uW5Tmf2y","y2XPzw50qMv0qW","W78nW7NdIq","u3LHzMC","B3vUDhm","mJq4odq4vefivvfu","CLbrt2C","Cg9W","W4bCWRNdSa","BwL0","DMfSDwvZ","W4bwWRJdRwG","cSk7tq","tLyAi8ouva","z2v0uMvWzwf0yq","WQ7cON3dO8kIyXi","y2/cISkdW6lcPSodiCkVWO4","vJb5iLZdJmk0W5ijWPu","FSothCoqWQ3dVq","W53dLmoFqdTUW44T","odK4mZa0oeL5ENLfAG","xXpdLHldLhdcPdFdUXS","W4CqW6OZWOzp","W4FdNbNcJx7cKG","fmkRwg/dOmkmremUrq","q2/cISkCW7VcPmoEe8kpWOq","otCWntuYofbHzxHovW","W5X1WOBdLq","ebvWW7lcUW","h1S2","ESozcmoVWRm","yM91BMq","FmkCq8oxcCo4W4RdMrRcQW","fSkIsxpdKCkuz0u/Da","W7PZEXC","B25vBMrVu3vJyW","W5GXW5NdI2e","oJRcR8kp","CMvKDwnL","pmoJW5ZcSNLNW5VdRmo1W6W","B25fCNjVCG","DhLWzq","AxneCMfNsw5qCG","o3ldJuH1WOOkW7JcTCkyFConiq","EvbMseS","BxrJAK4","W5zZWPVdRCkYfa","D8obamo/WQFdJSkaAmkdvq","WPDrW5ehWP/cV8kWWPRcPCkfW60DWPu","C29YDa","twLUvgfIBgvwyq","WQFcP2/dUCkUDa","WRuOWPVcPHddI8kzaSkRmW","CM9VDa","y0XZreG","A2v5CW","wmkAra","D0HzyMi","Aw5czxrZugvYyW","WQRcQmkSW67cIhtdKY0","W7yaWOvyW5i","WQr6WOxdPx5/W4C","ESkOBb4","yq3dUmkvqZPcha","W53cT8o9zMJcJM4","uZ7dQmo6","tCkLt2hdVCoi","lfSUmSohWOa","tCkoWR7cJCku","W5KkW6af","WP3dT2ux","WPJdT2uMqsJdSvddO8k3","BwLUqMv0u3bVDa","BMDgywLSu291BG","WO3dT2ibvIRdH2ldQCk3","WPpcMbOlW5xdPSkwCSoqW5a","W5XUWO3dMmkFfSk2","tHpdLJu","WPpcHc4cW4BdK8ksxCorW50","ydBcVr44W51sW4RcKSkH","W4tdM8o+rILQW6K9W4yo","W57cUSoWAwxcIa","usr2nuddJ8k7","zMzPy2LLBNrszq","W6DJDbbfDG","dbDHjmkS","gItcVCkhmq","WPRdS2u","rNjVBq","vMfSDwvczxq","W5jJWPZdImkYhCkX","CmomWPhdKSkSW7hdTmkbecm","W4DYgCkZf1iyjX/cQa","EsNcMaGDW5nFW4ZcSSkn","CMvZDwX0qMv0","umoGAH8dja","fXLKW7JcVa","WO3dVx4q","vhHzzfy","x8oiWP3dSSkKW73dV8k2otK","yMv0CW","EZz5WQKm","Dw5KB0fSBa","WPmaW7RcTdRcHmozW4i7nCkDkhO","W48gWP93W4pdS8owWRNcVSkA","abPbjCkTkbi","bGDajCk+icNdN8oTpa","W5ivWOHfW5u","C2HVD0jLDfnWBW","zXRdOSktrsvimf56","cv82d8olWOawu8kstW","tM9czxrZugXHyW","W53cS8oLDa","DSkvW6ZdHSoO","wSkeW7NdOSoIW7tcR0CLW4K","tXxdHZxdIeJcQJW","WOJcIXWcW4ldVmkEC8oqW4a","m1vxC1DctG","pSo7D8kc","ASkeW77dHmo/W6FcRgmPW54","WPNcUSkZW5FcGLe","WO7cJX8DW4JdNG","eCo+amkk","wxLnreG","W7VdH8oCtI1QW4K7","BwLUvgfIBgvwyq","gmoNW4pcOM5I","W4KaW7Sc","W6vHWOtdLmk4mCkNW48","nmoWW6NdM8oq","WRxcRMRdMmkJuW5gWQ7dPa","Cfn1y2nLC3nmBW","W5SxW6abWPa","AKjeB1C","gxmvkCoZ","W77dMGFcNwJcOWVcJG","oclcS8kdixBcI2K","W7/cKCocBG","q2HPCa","C2v0vg90ywXczq","BgvK","WQ/cRMddO8kFDa9hWR7dNW","qLfHu2i","Cb7dPq","uCkfvCo8bmo1W4NdMXZcJa","xdldSG","r1rpseu","AxnszxbLyxrfBG","Bw92zq","wuOggW","W4PqWR0","m8kPW4ysW4S7WQBcJeZdLq","tg93qMv0","DfrVB2X0Axa","CMvWzwf0qMv0CW","B3rZrxHHy3rbBq","DfjLzhvJDgLVBG","W6PMg8kMcG","Bwf4u3vWzxjtAq","z8kFWO7cMmkHWPPzqCkAW54","EGRdV8kc","tw92zq","grT5W5/cRKnXuIVcMG","WQ3cNSk+vhlcMa","g1yJkCobWPy","ywXczxq","wCkaDSoWhmoGW4ldMr7cMG","W6P9j8k3cvqCbYpcSG","zCorrcqP","WQJcMmkFzhBcI8kwi8oQWRC","W6xdKGxcQMJcLt3cISoMW4O","hfuWaSodWPak","rJhcKrq/","DCkkF8o/mq","eCkVW4WJW5KQ","B2DYzxnZ","emo0fSklWP5w","B25szxbLyxrtDq","eX91W4NcQLvorXlcJW","dGjLpSkZjGldNCoyda","Aw9U","tM90rw5VDwDOtq","FrBdOSkcwcfu","W4acWPng","WQdcImkVF3JcGSkS","ACkKDWm8WOTX","FSk/WRtcLCkUWOz6u8k/W4m","mCkfymoVW6jzWP8","mSkPW40YW7K8WQBcJgddKW","mtK3nZy0og1wzurxAG","qrTfWQCxF0BdGXldVG","t3rOzxi","BCo+FCk2WP0","y0LxBLe","W5ldOmkdrSoa","WQP3WRtdVMn+W4y","pHdcQSkjjNlcJh8","W6n/dmkgfNmybYpcTW","AxnmB3DsAxnR","W6v0EHnz","FYtcLrGPW55kW4dcPCk8","bX91W5/cOfv8wZ/cNG","BgvUz3rO","WQBcOs3cJ8ob","AxnczxrZt3bLBG","BhvL","W6RdNH/cNgtcJWNcRSoGW5m","W7POwaXCFCo2WRRcMgy","W6/cKSoiFKK3W7ivWRVdGG","DxbKyxrLvw5KBW","Dw5KBW","WPOMWOhcOJZdJCki","yMv0","AxnfBM91z2Hcyq","DCkTWPFcMSkSWPXp","qCk2FSogWOONW5pdKKddQG"];return(k=function(){return W})()}function _(W,n){const I=k();return _=function(n,h){let q=I[n-=150];void 0===_.qQHhHB&&(_.NsqfHg=function(W){const n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let I="",h="";for(let h,q,$=0,k=0;q=W.charAt(k++);~q&&(h=$%4?64*h+q:q,$++%4)?I+=String.fromCharCode(255&h>>(-2*$&6)):0)q=n.indexOf(q);for(let W=0,n=I.length;W<n;W++)h+="%"+("00"+I.charCodeAt(W).toString(16)).slice(-2);return decodeURIComponent(h)},W=arguments,_.qQHhHB=!0);const $=n+I[0],k=W[$];return k?q=k:(q=_.NsqfHg(q),W[$]=q),q},_(W,n)}(function(W,n){const I=167,h=468,q="k6Lo",k=_,N=$,c=W();for(;1;)try{if(parseInt(N(I,"s45B"))/(9503+9204+-18706*1)+parseInt(k(h))/(-3+-425+5*86)+-parseInt(k(365))/(-3198+2228+-1*-973)*(parseInt(N(351,"PPBB"))/(5043+6862+-11901))+parseInt(N(296,"PE7&"))/(9139+4878+-14012)+-parseInt(N(291,q))/(-741+4961*-1+5708)+parseInt(k(274))/(6056+1*-7547+1498)+-parseInt(k(268))/(-1*3044+7*-2+3066)===n)break;c["push"](c["shift"]())}catch(W){c["push"](c["shift"]())}})(k,8*164028+491919+-5*194118);{const f={};f["$"]=()=>K,f["P"]=()=>r,I["d"](n,f);var N=I(248663+729702+-280394),c=I(-1*1164035+-60293*1+1*1976818),P=I(-716467*1+-250692*3+1854605*1),S=I(-9*11474+-46392+-1*-483292),g=I(-831242+1924*-45+1483310),B=I(52151+-192548+-17*-42743),E=I(-906546+1445301+3*85479),u=I(1*422524+-21204*-17+-515472),Y=(I(-22597*-29+25494+-348610),I(-21632+-8961+105592));function r(W){return new K(W)}class K{constructor(W){const n="F8bX",I=279,h=447,q=176,k=416,S=473,g="PE7&",u=218,f=348,r=472,K=382,t="]^LW",X=305,L=553,O="yNt(",Z=284,d="yNt(",m="il%F",R=367,e=338,j=341,z="k6Lo",v=476,V="AMM#",F=582,w="BiHW",o=294,D=503,x="2&j(",G=301,y=256,C=219,b=348,l=366,A=360,p=419,i="]^LW",U=203,Q=312,T="7NBC",H=170,a=333,J=230,s="s45B",M=502,WW=590,nW=516,IW=322,hW="q&Rb",qW=558,$W="ZMsV",kW="a0mn",_W=566,NW="BCqW",cW=235,PW="gB6S",SW=495,gW="ZMsV",BW=593,EW=203,uW=516,YW="VxnW",fW=237,rW="VxnW",KW=459,tW="KtF&",XW=269,LW=502,OW=161,ZW="F8bX",dW=350,mW=215,RW=154,eW="PE7&",jW=571,zW="trde",vW=255,VW=348,FW="VxnW",wW=516,oW=287,DW="Srz2",xW=203,GW=576,yW=387,CW=232,bW="gB6S",lW="zv&1",AW=229,pW=358,iW="]^LW",UW=574,QW="F]Av",TW=261,HW="6TBk",aW=$,JW=_,sW={};sW[JW(589)]=function(W,n){return W!==n},sW[JW(229)]=function(W,n){return W-n},sW[JW(534)]=function(W,n){return W>n},sW[JW(305)]=function(W,n){return W<n},sW[aW(334,n)]=function(W,n){return W===n},sW[JW(390)]=function(W,n){return W+n},sW[JW(394)]=function(W,n){return W===n},sW[JW(441)]=function(W,n){return W===n},sW[aW(316,"ZMsV")]=function(W,n){return W!==n},sW[JW(548)]=function(W,n){return W+n},sW[aW(475,"tA73")]=function(W,n){return W!==n};const MW=sW;this[JW(215)]=W,this[JW(458)]=()=>{const W=aW,n=JW,{ag:I,bets:h,messageSender:q,flyingChips:$,draggableChip:k}=this[n(mW)][W(RW,eW)],_=h[W(497,"F8bX")][W(jW,zW)](),N=_[n(vW)](),S={};if(N){let g=c["iG"],B=c["iG"],E=!(-1627+5673+-4045);const u={...h[n(348)],...N},Y=Object[n(303)](u),f=P["ay"](h[W(545,"0nPY")],N),r=P["MJ"](h[n(VW)],N),K=P["Zz"](N);I[W(237,FW)][n(wW)][W(oW,DW)](K),I[n(xW)][W(GW,"2!pQ")][n(yW)+"t"](K);for(const I of Y){const q=h[W(CW,bW)+n(531)](I),$=N[I]||-2792+-5455+2749*3;MW[W(577,lW)]($,q)&&(S[I]=MW[n(AW)]($,q),MW[W(501,"2&j(")](q,$)&&(g=I),MW[n(305)](q,$)&&(E=!(-7221+-5263+1*12484),B=I))}h[W(557,"0zs8")](N),h[W(pW,iW)](_),E?(k[W(220,"07eD")](B),k[n(457)+n(336)](g)):$[n(496)+n(543)+W(UW,QW)](S),q[W(250,"yNt(")](),this[n(283)+W(TW,HW)](f,r)}},this[JW(350)]=()=>{const W=JW,n=aW,{ag:I,bets:h,messageSender:q,log:$}=this[n(526,NW)][W(301)],k={};k[n(cW,PW)]=B["uu"][n(SW,gW)],k[W(BW)]=0,k[n(318,"Jv&S")]={},I[W(EW)][W(uW)][n(227,YW)](2488+-881*1+-1607),I[n(fW,rW)][n(KW,tW)][n(XW,"il%F")+"t"](-687+-5*-1112+-4873),h[W(LW)]({}),h[n(OW,ZW)]([]),q[W(dW)](),$[W(249)+n(217,"0zs8")](k)},this[JW(558)]=()=>{const W=JW,n=aW,{ag:I,bets:h,messageSender:q,betSpot:$}=this[n(J,"ZMsV")][W(301)],k=this[W(262)+n(509,s)]();if(!k)return;const _=P["Zz"](k);h[W(M)](k),h[W(WW)]([{}]),I[n(432,"s45B")][W(nW)][n(IW,"Jv&S")](_),I[n(469,"0nPY")][n(532,hW)][n(178,"xvRb")+"t"](_),q[W(qW)]($[n(434,$W)+"s"]?B["ix"][n(207,kW)+"rs"]:B["ix"][W(569)]),this[n(_W,"cN7z")+n(201,"]^LW")](k)},this[aW(234,n)]=()=>{const W="yNt(",n=443,I="2DWi",h=502,q=590,$=JW,k=aW,{ag:_,bets:N,messageSender:c}=this[k(D,x)][$(G)],S={},g={...N[k(y,"PPBB")]},B=[...N[k(C,"&6BN")],{...N[$(b)]}];Object[k(l,"UrTo")](N[k(A,"7NBC")])[$(297)](((W,n)=>Y["I"]?Y["I"](n)-Y["I"](W):847+-19*214+3220))[k(p,i)]((_=>{const c=k,P=$,u=g[_];if(u){const $=this[P(537)]({betSpot:_,bets:N[c(550,W)],bet:u,onError:this[c(n,"nG!b")]});if(MW[c(308,"PE7&")](void 0,$))return;g[_]=E["eS"](MW[c(240,I)](u,$)),S[_]=$,N[P(h)](g),N[P(q)](B)}}));const u=P["Zz"](g);_[k(433,"q&Rb")][$(516)][k(357,"07eD")](u),_[$(U)][k(Q,T)][k(241,"Yvnr")+"t"](u),c[$(H)](),this[$(484)+k(a,"*Slv")](S)},this[JW(396)]=(W,n)=>{const I=JW,$=aW,{draggableChip:_,bets:N,ag:B,messageSender:Y,sounds:D}=this[$(h,"I$@Z")][$(q,"yNt(")];if(MW[$(k,"]Ei!")](W,n))return void _[I(S)](W);const x={...{...N[$(431,g)]}},G=[...N[I(u)],{...N[I(f)]}],y=+(x[W]||9768+-7841+-1927*1);x[W]=void 0;const C=this[$(267,"HzOm")]({bet:y,bets:x,betSpotFrom:W,betSpot:n,onError:this[$(r,"PE7&")]});if(MW[$(K,t)](void 0,C)||MW[I(X)](C,-9921+-21*-329+3012))return void _[I(S)](W);const b={},l={};if(MW[$(L,O)](n,c["iG"])){const I=+(x[n]||14*218+8*336+-5740);b[n]=C,l[W]=C,x[n]=E["eS"](MW[$(Z,d)](I,C))}else l[W]=C;const A=P["ay"](N[I(348)],x),p=P["Zz"](x),i={...x},U={};U[I(348)]=i,U[$(430,"07eD")]=G,_[I(473)](n),B[$(432,"s45B")][$(172,m)][$(R,"&6BN")](p),B[$(e,"BCqW")][$(462,"ZMsV")][I(387)+"t"](p),N[I(198)+$(442,"65$X")](U),D[$(j,z)+$(v,"tA73")]();const Q={};Q[$(264,V)+"m"]=W;const T=Q;MW[I(F)](n,c["iG"])&&(T[$(168,w)]=n),Y[$(594,"k6Lo")](T),this[$(455,"I$@Z")+$(o,"BCqW")](n,A,C)},N["Gn"](this,{placeChip:N["XI"][JW(279)],undo:N["XI"][aW(490,"]Ei!")],undoAll:N["XI"][JW(I)],repeat:N["XI"][JW(279)],double:N["XI"][JW(279)],move:N["XI"][JW(I)],validate:N["XI"][aW(259,"PPBB")],onError:N["XI"][aW(223,"65$X")],isUndoEnabled:N["EW"],isRepeatEnabled:N["EW"],isDoubleEnabled:N["EW"],repeatDisabledReason:N["EW"],isEnoughBalanceToRepeat:N["EW"],validators:N["EW"]})}[q(195,"0nPY")](W,n){const I="nG!b",h=q,$=_,k={};k[$(293)]=function(W,n){return W===n},k[h(486,I)]=function(W,n){return W+n};const N=k,{ag:c,bets:S,messageSender:g,tooltip:B,sounds:u}=this[$(215)][h(397,"6TBk")],Y=n||c[$(258)][h(185,"7NBC")+h(436,"tA73")+$(568)],f=c[$(211)+$(464)],r=S[h(375,"a0mn")][W]||3410+3*2027+-9491;B[h(598,"BiHW")]();const K=this[$(537)]({bet:Y,bets:S[h(508,"jyRA")],betSpot:W,onError:this[$(288)]});if(N[$(293)](void 0,K))return;const t=S[h(491,"cN7z")],X={...t,[W]:E["eS"](N[$(371)](r,K))},L=[...S[h(435,"BiHW")],t],O=P["Zz"](X),Z={};Z[$(162)]=W,Z[$(593)]=K,c[h(309,I)][$(516)][$(210)](O),c[$(203)][$(516)][h(449,"5xUr")+"t"](O),S[$(502)](X),S[$(590)](L),u[h(281,"F]Av")+$(493)](),g[$(460)](Z),this[h(585,"tA73")+h(444,"F8bX")](W,K,t,r,f)}get[q(184,"s45B")+h(388)](){const W=q,n=h,I={};I[n(189)]=function(W,n){return W>n};const $=I,{gamePhase:k,bets:_,draggableChip:N}=this[n(215)][n(301)],c={};c[n(177)]=!(5*-674+5991*-1+-37*-253);const P={};return P[W(474,"5xUr")]=!(-437*16+983*1+-2*-3005),P[n(575)]=u["x9"][n(439)],k[W(244,"AMM#")]&&$[W(421,"xvRb")](_[W(513,"]^LW")][W(314,"cN7z")],-1772*4+6217+-13*-67)&&!N[n(290)+n(423)]?c:P}get[h(395)+h(179)](){const W=q,n=h,I={};I[n(186)]=function(W,n){return W===n};const $=I,{gamePhase:k,bets:_,draggableChip:N}=this[n(215)][W(591,"&6BN")],c={};return c[n(177)]=!(-2617*3+25*279+876),k[W(202,"]^LW")]&&$[W(542,"s45B")](-7776+-4187+-1709*-7,_[W(263,"Yvnr")][n(450)])&&this[n(461)+n(487)+W(335,"Jv&S")]&&!N[W(188,"zv&1")+W(422,"tA73")]?c:{enabled:!(839+7815*1+-8653),reason:this[n(165)+W(456,"0zs8")]}}get[q(327,"k6Lo")+h(179)](){const W=177,n=313,I=231,$=505,k="HzOm",_=257,N=303,c=265,P="tA73",S="rB9P",g=238,B=282,E="I$@Z",Y=527,f="0zs8",r=399,K="AMM#",t=481,X=580,L=467,O=583,Z=517,d="2!pQ",m=246,R=595,e=q,j=h,z={};z[j(595)]=function(W,n){return W<n},z[e(483,"5xUr")]=function(W,n){return W-n},z[j(193)]=function(W,n){return W>n},z[j(580)]=function(W,n){return W<n},z[j(346)]=function(W,n){return W!==n},z[j(467)]=function(W,n){return W*n};const v=z,{bets:V,ag:F,settings:w,betSpot:o,draggableChip:D}=this[e(355,"PE7&")][e(317,"a0mn")],x={};if(x[j(W)]=!(-793+14*67+-144),x[e(369,"dS7[")]=u["x9"][j(439)],D[e(354,"*Slv")+e(506,"jyRA")])return x;if(v[j(193)](F[j(258)][e(471,"2DWi")+j(413)],2*4469+-3200+2869*-2)){const h=V[e(n,"LywW")],q=F[j(258)][j(I)+e($,k)],z=w[e(339,"jyRA")+j(_)];let D=!(1181*8+4*2140+-1637*11);const x=Object[j(N)](h)[j(286)](((W,n)=>{const I=j,q=e,$=V[q(O,"UrTo")+q(Z,d)](n),k=o[q(m,"q&Rb")+I(160)](n);return v[I(R)](h[n]||74*4+-349*1+1*53,k)&&(D=!(-3*23+2*3631+-7193*1)),W[n]=Math[I(563)](h[n]||-526*11+-809*-3+3359,v[I(302)](k,$)),W}),{}),G=Object[e(182,"VxnW")](h)[e(424,"2DWi")](((W,n)=>(W[n]=V[e(319,"Jv&S")+e(466,"VxnW")](n),W)),{}),y=this[e(c,"gB6S")+e(533,P)+e(408,"07eD")](x),C=this[e(586,S)+j(g)+e(B,E)](G),b={};b[j(177)]=!(-512*-8+-6113+2018),b[e(512,"*Slv")]=u["x9"][e(Y,f)];const l={};l[j(W)]=!(15*341+1042+-6156),l[e(332,"I$@Z")]=u["x9"][e(r,"tA73")+e(273,K)+e(t,"tA73")];const A={};return A[j(177)]=!(1758+857*1+-2615*1),v[j(X)](q,y)?b:!D||v[j(346)](-3*-1353+-4754*1+695,z)&&v[j(193)](v[j(L)](4186+-289*-20+-9964,C),z)?l:A}const G={};return G[e(556,"6TBk")]=!(8*-733+2585+3280),G[e(343,"]Ei!")]=u["x9"][j(359)+"ed"],G}get[q(463,"Y^Aw")+q(180,"UrTo")](){const W="2DWi",n=359,I=461,$=295,k=280,_="xvRb",N=h,c=q,P={};P[c(546,W)]=function(W,n){return W===n};const S=P,{history:g,repeat:B}=this[c(440,"0nPY")][c(345,"Jv&S")][c(540,W)];if(S[N(174)](-9175+-2441*1+11616,g[c(157,"cRm3")])){if(!B)return u["x9"][N(n)+"ed"];if(!this[N(I)+c($,"trde")+c(277,"]^LW")])return u["x9"][c(k,_)]}return u["x9"][c(420,"k6Lo")]}[q(384,"F8bX")](W){const n={_0x47aabe:323,_0x2674d1:478,_0x36b3ee:278,_0x257809:"F]Av",_0x280f02:251,_0x1fa0d6:342},I=h,$=q,k={jBDoW:function(W,n){return W||n},ScckC:function(W,n,I){return W(n,I)},ayfsq:function(W,n){return W===n},FLrxH:function(W,n){return W!==n},Syafg:function(W,n){return W<n}},{bet:_,betSpotFrom:N,betSpot:c,onError:P,validators:g=this[$(448,"k6Lo")],orderValidators:B=this[$(n._0x47aabe,"dS7[")+I(n._0x2674d1)],bets:E}=W;let u=_;for(const W of B){const h=g[W]({betSpot:c,bets:E,bet:k[I(381)](u,_),betSpotFrom:N});if(h){if(k[I(181)](P,c,h),k[$(n._0x36b3ee,"trde")](h[I(289)],S["g8"][I(504)])){u=void 0;break}if(k[$(480,n._0x257809)](void 0,h[I(342)])){if(k[I(n._0x280f02)](h[I(342)],2*3174+-2532+-3816)){u=void 0;break}u=h[I(n._0x1fa0d6)]}}}return u}get[q(499,"nG!b")](){const W="s45B",n="]^LW",I="*Slv",$=559,k=h,_=q,{gamePhase:N,ag:c,settings:P,betSpot:B,draggableChip:E,reduction:u}=this[_(233,"Yvnr")][k(301)],Y=N[k(452)],f=c[_(392,"xvRb")+_(329,"7NBC")],r=P[k(446)],K=P[_(242,"F8bX")+"s"][_(393,"LywW")],t=P[_(364,"dS7[")+"s"][_(479,"Srz2")],X=E[_(417,W)+k(423)],L={};L[k(243)+_(271,"rB9P")]=X;const O={};O[_(216,"a0mn")+_(315,n)]=B[k(320)+_(222,"dS7[")],O[_(427,I)+_(412,n)]=f;const Z={};Z[_(414,"xvRb")+k(579)]=Y;const d={};d[k(446)]=r;const m={};m[k(373)+k(453)]=K;const R={};R[_(410,"5xUr")+_(260,"F]Av")]=t;const e={};e[k(544)+k(404)+"s"]=u[k(544)+k(404)+"s"];const j={};j[_(208,"Srz2")+_(192,I)+"s"]=u[k(544)+_(498,"rB9P")+"s"],j[_(528,"*Slv")+k(159)+"d"]=!(-25*-287+-11*62+-6493);const z={};z[_(352,"PE7&")+k($)]=B[k(554)+k($)];const v={};v[k(320)+_(212,"Jv&S")]=B[_(522,"65$X")+_(374,"Srz2")];const V={};return V[k(211)+_(299,"Yvnr")]=f,{[S["AE"][k(158)+_(536,"VxnW")]]:g["oF"](L),[S["AE"][_(524,"Jv&S")+k(400)]]:g["uc"](O),[S["AE"][_(454,"rB9P")+"e"]]:g["xC"](Z),[S["AE"][_(347,"jyRA")+_(311,"07eD")]]:g["cF"](d),[S["AE"][k(298)+_(411,W)]]:g["TL"](m),[S["AE"][_(564,"]Ei!")+k(225)]]:g["pl"](R),[S["AE"][_(300,"KtF&")+k(331)+k(247)]]:g["JO"](e),[S["AE"][_(362,"&6BN")+_(389,"Yvnr")+k(428)]]:g["Ar"](j),[S["AE"][k(164)+_(376,"BCqW")]]:g["oY"](z),[S["AE"][_(196,"]^LW")+k(337)]]:g["YJ"](v),[S["AE"][k(429)+_(205,"rB9P")]]:g["Tp"](V)}}get[q(581,"trde")+q(492,"0zs8")](){const W="dS7[",n=h,I=q;return[S["AE"][I(510,W)+I(372,"HzOm")],S["AE"][I(340,"2&j(")+I(248,"VxnW")],S["AE"][I(190,W)+"e"],S["AE"][n(187)+I(573,"BiHW")],S["AE"][n(298)+n(225)],S["AE"][n(514)+I(270,"a0mn")],S["AE"][I(438,"Z5Yd")+I(194,"0zs8")+I(330,"gB6S")],S["AE"][n(518)+n(173)+n(428)],S["AE"][n(164)+I(307,"cRm3")],S["AE"][I(418,"rB9P")+I(383,"rB9P")],S["AE"][I(529,"BCqW")+I(324,"BCqW")]]}[q(477,"BCqW")+h(238)+q(275,"BCqW")](W){return P["Zz"](W)}get[h(406)+h(596)](){const W=q,n=h,I={};I[n(292)]=function(W,n){return W/n},I[W(228,"Yvnr")]=function(W,n){return W*n};const $=I,{settings:k}=this[W(380,"a0mn")][n(301)];return $[n(292)]($[n(549)](this[n(500)+n(153)+"ts"],k[W(562,"6TBk")+n(306)+W(206,"jyRA")]),5006+5*-797+921*-1)}get[q(175,"s45B")+"t"](){const W=q,n=h,I={};I[n(482)]=function(W,n){return W/n},I[n(224)]=function(W,n){return W*n};const $=I,{settings:k}=this[W(588,"yNt(")][W(200,"0nPY")];return $[n(482)]($[n(224)](this[W(523,"PE7&")+n(153)+"ts"],k[n(560)+n(155)+W(361,"&6BN")]),-1592+-329+2021)}[h(511)+q(535,"gB6S")](W,n,I,$,k){const _=h,N=q,c={};c[W]=n;const{flyingChips:P}=this[N(230,"ZMsV")][N(488,"I$@Z")],S=c;P[_(226)+N(592,"Srz2")+N(221,"Z5Yd")](S),this[_(511)+N(407,"ZMsV")+"g"](S,I,$,k)}[q(326,"dS7[")+h(379)+"g"](W,n,I,$){const k=h,_=q;this[_(377,"zv&1")][k(301)][k(169)][_(515,"xvRb")+_(597,"07eD")]({type:B["uu"][k(386)],bets:W,amount:P["Zz"](W),currentBets:n,currentSpotValue:I,balanceBeforeBet:$})}[h(484)+q(521,"0zs8")](W){const n="yNt(",I=h,$=q,{flyingChips:k}=this[$(588,"yNt(")][$(176,n)];k[$(197,n)+I(403)+$(405,"2&j(")](W),this[I(484)+$(551,"q&Rb")](W)}[h(484)+q(363,"il%F")](W){const n=q,I=h;this[I(215)][n(488,"I$@Z")][I(169)][n(239,"UrTo")+n(398,"PPBB")]({type:B["uu"][n(183,"Jv&S")],bets:W,amount:P["Zz"](W)})}[h(425)+q(344,"5xUr")](W){const n=q,I=h,{flyingChips:$}=this[I(215)][I(301)];$[n(445,"2&j(")+I(403)+I(252)](W),this[I(425)+I(494)](W)}[q(415,"2&j(")+q(567,"PE7&")](W){const n=h,I=q;this[I(552,"7NBC")][n(301)][I(538,"AMM#")][n(249)+n(191)]({type:B["uu"][n(520)],bets:W,amount:P["Zz"](W)})}[q(213,"gB6S")+q(266,"trde")](W,n){const I=h,$=q,k={};k[$(285,"F8bX")]=B["uu"][I(565)],k[I(348)]=W,k[$(587,"HzOm")]=n,this[$(156,"LywW")][$(385,"0zs8")][I(169)][$(570,"cRm3")+$(507,"ZMsV")](k)}[q(328,"HzOm")+q(368,"cRm3")](W,n,I){const $=q,k=h,_={};_[k(578)]=function(W,n){return W!==n};const N=_;this[k(215)][$(310,"q&Rb")][k(169)][$(199,"&6BN")+$(304,"xvRb")]({type:N[k(578)](W,c["iG"])?B["uu"][k(409)]:B["uu"][$(151,"il%F")],bets:n,amount:I})}get[h(461)+h(487)+q(391,"07eD")](){const W=h,n=q,I={};I[n(276,"5xUr")]=function(W,n){return W>=n};const $=I;return this[n(272,"F]Av")]?$[n(530,"yNt(")](this[W(215)][W(301)]["ag"][n(152,"Srz2")][W(231)+n(584,"Yvnr")],P["Zz"](this[W(402)])):!(-1*6382+-473*4+8275)}get[h(402)](){const W=h,n=q;return this[n(451,"2!pQ")][n(310,"q&Rb")][n(325,"il%F")][W(558)]}[h(288)](W,n){const I=h,$=q,k={};k[$(204,"]^LW")]=function(W,n){return W===n},k[I(572)]=function(W,n){return W||n};const _=k,{suppressed:N,translatedMessage:c}=n;if(N)return;const{tooltip:P,log:g,sounds:B}=this[I(215)][I(301)];_[$(489,"zv&1")](n[I(485)],S["Y0"][$(547,"tA73")+I(555)])&&g[$(539,"rB9P")+$(378,"Yvnr")+$(166,"07eD")+$(163,"jyRA")](),P[I(465)](W),P[I(356)+I(401)]({betSpot:W,text:_[$(349,"Z5Yd")](c,"")}),B[I(541)+I(321)+"d"]()}[q(561,"*Slv")+h(214)](){const W=537,n=348,I=254,$=590,k=q,_=h,N={};N[_(254)]=function(W,n){return W===n};const c=N,{bets:P}=this[k(150,"*Slv")][_(301)],S=P[_(558)],g={};if(S)return Object[_(303)](S)[k(370,"2DWi")](((W,n)=>Y["I"](n)-Y["I"](W)))[_(171)]((h=>{const q=k,N=_,B=S[h];if(B){const k=this[N(W)]({betSpot:h,bets:P[N(n)],bet:B,onError:this[q(353,"*Slv")]});if(c[N(I)](void 0,k))return;g[h]=k,P[N(502)](g),P[N($)]([{}])}})),g}get[q(245,"dS7[")+h(153)+"ts"](){const W=h,n=q;return c["W2"][n(209,"trde")](((I,h)=>I+this[W(215)][n(317,"a0mn")][n(236,"AMM#")][n(426,"5xUr")+W(531)](h)),-5369+3931+-1438*-1)}}}},74999:(W,n,I)=>{I.d(n,{I:()=>q});var h=I(752490);function q(W){return h.G6.has(W)?2:1}},368329:(W,n,I)=>{I.d(n,{P:()=>q});var h=I(731675);const q=()=>h.Pj()},890614:(W,n,I)=>{var h;I.d(n,{Z:()=>h}),function(W){W.Enabled="Enabled",W.Waiting="Waiting",W.Completed="Completed",W.Disabled="Disabled"}(h||(h={}))},671984:(W,n,I)=>{I.d(n,{w:()=>h});const h={fullAnimationDuration:500,flyAnimationDuration:440,chipLandPercentage:88,targetPulseDuration:300,winFlybackDelay:2e3}},301417:(W,n,I)=>{I.d(n,{c:()=>h,d:()=>q});const h=8,q=50},781555:(W,n,I)=>{function h(W,n){const I=u();return h=function(n,q){let $=I[n-=150];void 0===h.YvBhGo&&(h.eTqVLD=function(W){const n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let I="",h="";for(let h,q,$=0,k=0;q=W.charAt(k++);~q&&(h=$%4?64*h+q:q,$++%4)?I+=String.fromCharCode(255&h>>(-2*$&6)):0)q=n.indexOf(q);for(let W=0,n=I.length;W<n;W++)h+="%"+("00"+I.charCodeAt(W).toString(16)).slice(-2);return decodeURIComponent(h)},W=arguments,h.YvBhGo=!0);const k=n+I[0],_=W[k];return _?$=_:($=h.eTqVLD($),W[k]=$),$},h(W,n)}const q=h,$=k;function k(W,n){const I=u();return k=function(n,h){let q=I[n-=150];if(void 0===k.ikzfyH){const n=function(W,n){let I,h,q=[],$=0,k="";for(W=function(W){const n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let I="",h="";for(let h,q,$=0,k=0;q=W.charAt(k++);~q&&(h=$%4?64*h+q:q,$++%4)?I+=String.fromCharCode(255&h>>(-2*$&6)):0)q=n.indexOf(q);for(let W=0,n=I.length;W<n;W++)h+="%"+("00"+I.charCodeAt(W).toString(16)).slice(-2);return decodeURIComponent(h)}(W),h=0;h<256;h++)q[h]=h;for(h=0;h<256;h++)$=($+q[h]+n.charCodeAt(h%n.length))%256,I=q[h],q[h]=q[$],q[$]=I;h=0,$=0;for(let n=0;n<W.length;n++)h=(h+1)%256,$=($+q[h])%256,I=q[h],q[h]=q[$],q[$]=I,k+=String.fromCharCode(W.charCodeAt(n)^q[(q[h]+q[$])%256]);return k};k.yEujVb=n,W=arguments,k.ikzfyH=!0}const $=n+I[0],_=W[$];return _?q=_:(void 0===k.nFVBFN&&(k.nFVBFN=!0),q=k.yEujVb(q,h),W[$]=q),q},k(W,n)}(function(W,n){const I=604,q=214,$="Yvnr",_=319,N=k,c=h,P=W();for(;1;)try{if(-parseInt(c(571))/(1366+670*-1+1*-695)+parseInt(c(I))/(-2981+5180+13*-169)*(parseInt(c(324))/(-10*425+4299*1+-46))+-parseInt(c(233))/(1*4793+-3573+-608*2)+parseInt(c(260))/(-768+-3611+4384)*(-parseInt(c(424))/(4061+2896+-6951))+parseInt(N(q,"xvRb"))/(2688+-1*599+-1*2082)+parseInt(N(269,$))/(-5788+-129*-41+1*507)*(parseInt(c(_))/(-6943+-2230+1*9182))+parseInt(N(503,"PE7&"))/(-7503+-957+1*8470)===n)break;P["push"](P["shift"]())}catch(W){P["push"](P["shift"]())}})(u,52490+768612+1*-206155);{const W={};W["P"]=()=>u,I["d"](n,W);var _=I(524579*2+1474609+-1771277),N=I(-604848+-11*-30839+599253),c=I(-6*152832+84877*-5+1906865),P=I(-268012+87171+566903),S=I(-1071568+17*-14401+2246143*1),g=I(-14*-47475+-3*366702+14390*71),B=I(-297956+21549*6+420331),E=(I(-190891*-2+258040+-307625),I(117450*-1+160728+98469));const u=W=>new Y(W);class Y extends B["$"]{get[$(450,"cN7z")](){const W=219,n=$,I=h,{ag:q,fee:k}=this[I(710)][I(213)],_={};return _[n(441,"tA73")+I(W)]=q[I(672)+I(W)],_[n(553,"jyRA")+n(262,"HzOm")]=k[n(619,"BCqW")+n(262,"HzOm")],{...super[I(677)],[N["sh"][n(224,"yNt(")+n(502,"F]Av")+"nd"]]:c["uE"](_)}}get[$(240,"ZMsV")+$(405,"2&j(")](){const W="jyRA",n="2!pQ",I=325,q=$,k=h;return[N["AE"][k(559)+q(282,"2DWi")],N["sh"][k(307)+q(271,W)+"nd"],N["AE"][k(404)+k(727)],N["AE"][k(434)+"e"],N["AE"][q(651,n)+q(199,"KtF&")],N["AE"][k(514)+k(I)],N["AE"][q(256,"6TBk")+k(I)],N["AE"][k(436)+k(691)+k(195)],N["AE"][q(446,n)+k(209)+k(694)],N["AE"][q(726,"dS7[")+q(184,W)],N["AE"][k(497)+q(328,"rB9P")],N["AE"][q(206,"*Slv")+k(548)]]}[$(671,"k6Lo")+$(402,"tA73")+q(670)](W){const n=q,I=$,h=super[I(162,"Jv&S")+I(264,"I$@Z")+I(622,"UrTo")](W);return this[I(552,"]Ei!")][n(213)][I(495,"gB6S")][I(460,"&6BN")+n(712)](h)}[$(222,"5xUr")](W){const n="zv&1",I="Yvnr",h=213,k=643,_="I$@Z",N=213,c=657,P=191,S="xvRb",g=379,B=501,E="*Slv",u=712,Y=625,f="jyRA",r=275,K="HzOm",t="Jv&S",X=710,L=175,O=718,Z="il%F",d=267,m=728,R="]^LW",e="a0mn",j=$,z=q,v={};v[z(624)]=function(W,n){return W<=n},v[j(444,"65$X")]=function(W,n){return W>n};const V=v;let F;if(this[j(248,"5xUr")][z(213)][j(453,"0nPY")][z(539)+j(374,"tA73")+j(369,"cN7z")+j(292,n)]){const W=this[j(329,I)][z(h)]["ag"][z(k)][j(528,n)+j(586,"&6BN")+j(440,_)],q=this[j(552,"]Ei!")][z(N)]["ag"][z(c)+z(673)],$=this[j(P,"7NBC")][j(748,S)][j(g,"F8bX")][j(B,E)+z(u)](q);V[j(Y,f)](q,W)&&V[z(190)]($,this[z(710)][j(r,K)]["ag"][j(272,"7NBC")+j(580,t)])&&(F=this[z(X)][z(h)][j(L,"]^LW")][j(O,Z)+j(426,"I$@Z")](this[j(d,t)][z(N)]["ag"][j(m,R)+j(295,e)]))}super[z(620)](W,F)}[q(185)+q(732)](W){const n="Z5Yd",I=165,h=658,$="cN7z",_=357,N=746,c=q;return Object[c(385)](W)[c(202)](((q,P)=>{const S=c,g=k;if(!E["F"][g(321,n)](P)){q[P]=W[P];const n=E["o"][S(I)](P);n&&(q[n]=this[S(710)][g(h,$)][S(_)][g(N,"tA73")+"nt"](W[P]||3675+65*37+-95*64))}return q}),{})}[q(463)+$(737,"tA73")](W,n){const I=$;super[q(463)+I(600,"F]Av")](W,n),this[I(682,"*Slv")+"t"]({[W]:n})}[$(618,"zv&1")+$(723,"Jv&S")+"g"](W){const n=$,I=q,h=this[I(185)+n(549,"cRm3")](W),k=super[I(169)+n(496,"cN7z")+I(670)](h),_={};_[I(508)]=g["uu"][I(409)],_[n(376,"gB6S")]=h,_[n(717,"Yvnr")]=k,this[n(329,"Yvnr")][n(207,"BiHW")][I(346)][I(590)+I(489)](_)}[$(573,"k6Lo")+$(613,"cN7z")](W){const n=q;super[$(378,"nG!b")+n(741)](W),this[n(323)+"t"](W)}[q(572)+q(280)](W){const n=q,I=$,h=this[I(313,"trde")+I(688,"7NBC")](W),k=super[n(169)+I(382,"F]Av")+I(250,"2!pQ")](h),_={};_[I(304,"BiHW")]=g["uu"][I(713,"6TBk")],_[I(585,"&6BN")]=h,_[I(633,"2DWi")]=k,this[n(710)][n(213)][n(346)][n(590)+n(489)](_)}[$(310,"yNt(")+$(410,"F8bX")](W){const n=q,I=$;super[I(333,"xvRb")+n(741)](W),this[I(663,"jyRA")+"t"](W)}[q(674)+q(280)](W){const n=$,I=q,h=this[I(185)+I(732)](W),k=super[n(639,"xvRb")+I(204)+I(670)](h),_={};_[n(230,"*Slv")]=g["uu"][n(425,"2&j(")],_[n(412,"cN7z")]=h,_[n(506,"PE7&")]=k,this[n(439,"ZMsV")][n(654,"F]Av")][n(303,"a0mn")][n(364,"Y^Aw")+I(489)](_)}[$(389,"Y^Aw")+$(160,"PE7&")](W){const n=q,I=$,h=this[I(556,"2!pQ")+n(732)](W),k=super[n(169)+I(635,"]^LW")+I(330,"5xUr")](h),_={};_[I(208,"nG!b")]=g["uu"][n(505)],_[I(356,"I$@Z")]=h,_[n(648)]=k,this[n(710)][I(286,"VxnW")][I(701,"xvRb")][I(320,"65$X")+n(489)](_)}[q(594)+q(194)](W,n){const I=q,h=$,k={};k[h(216,"gB6S")]=function(W,n){return W===n},k[h(173,"VxnW")]=function(W,n){return W!==n};const N=k,c=this[I(185)+I(732)](n),S=N[I(297)](W,_["iG"])?super[I(169)+I(204)+h(430,"7NBC")](c):super[I(169)+h(402,"tA73")+I(670)](P["_y"](c));this[h(166,"]^LW")][h(628,"rB9P")][I(346)][I(590)+h(740,"0zs8")]({type:N[h(164,"AMM#")](W,_["iG"])?g["uu"][I(543)]:g["uu"][I(168)],bets:c,amount:S})}get[$(621,"0nPY")](){const W=q,n=$,I=this[n(270,"AMM#")][n(366,"]^LW")][W(159)][n(640,"BiHW")];if(I)return this[n(212,"il%F")+n(187,"5xUr")](I)}[q(323)+"t"](W){const n=q,I=$,{flyingFee:h}=this[I(476,"HzOm")][n(213)];h[I(689,"Y^Aw")+I(611,"Yvnr")](W,S["B"][n(566)])}}}function u(){const W=["WRuOWPVcPHddI8kzaSkRmW","ebvWW7lcUW","k8oSW5BdH8ocWP/dLJldTCod","W5rLWPZdOmkWhmk3W5ueW4K","CgXHy2vdAgLW","B8oPySkJWO/cVCoEomoiFW","oSoRymkf","usr2nuddJ8k7","CM9ICwq","B8ocWOVdT8kP","umoGAH8dja","u3bVDhnfEgfJDa","W5RdLatcNa","u2nJA0m","omoNW4pcOM5I","FrBdOq","EZz5WQKm","a8o8hCklWPnh","W5zZWPVdRCkYfa","fu4Jk8oGWPywt8kHwW","abPbjCkTkbi","qMv0q29LzMzPyW","C2v0vg90ywXczq","u8kswmo2hCo4W4RdGXZcMG","k8kjy8o+W6XF","W7VdH8oCtI1QW4K7","WPdcRmkUW7ZcMv4","DMfSDwvZ","WQ/cRMddO8kFDa9hWR7dNW","CMvWzwf0","nSoYz8kuWPFdGsGAW5hcMa","F8oPzSk1","yw1VDw50","BgfUy2vuB1jLCa","zcRcJXq","WPtcTJBcI8oBWP7cPXnLW5u","zw5HyMXLza","FYtcLrGPW55kW4dcPCk8","fmkHr34","B8kIDYCYWP1aWOzXWOi","ya/dTCkxqZz5hq","BgfZDfnLBgvJDa","u8kVtNi","oJRcR8kp","W6yeW6yFWQjvWP9VWONcLG","WP3dT2ux","ASkoW6ldLq","E8obWPddGmkOW7BdL8kkhI8","W7fEe8kqcW","W53cT8o9zMJcJM4","BwLUvgfIBgvwyq","nmoWW6NdM8oq","r1rpseu","ESozcmoVWRm","B3vUDa","AItcLri4W5nFW5VcSSkB","yxzHAwXHyMXLqG","zwrdAgLW","B25szxbLyxrtDq","fXLKW7JcVa","twfPBKjLDfnWBW","DMfSAwrHDg9YCW","C2HVD0jLDfnWBW","FqFcVSkOcLpcRq","W4ymW6eZWOzpWQHpWOFcIW","W64mW6ZdN2q","crH9eCk6iI/dN8o/kW","CMvZDwX0qMv0","ywXczxq","W4DYgCkZf1iyjX/cQa","BwxcMq","DxbKyxrLvg8","W4/cSSoWC2pcIuNdHKjS","vCk/D8oLWPK8W7RdUvBdVW","W7PEW5v9","zMzPy2LLBNrszq","mCkfymoVW6jzWP8","FSothCoqWQ3dVq","Aw9U","F8oiWP3dTq","W4bwWRJdRwG","wezwuLe","CMvHC29U","EvbMseS","tM90rw5VDwDOtq","xmkCuW","W6xdKGxcQMJcLt3cISoMW4O","W6VcMmoeExi3W70sWOBdIq","De1MqNi","B8oJFCkY","W6vHWOtdLmk4mCkNW48","rqjGiKRdHCkMW5u","W5GXW5NdI2e","rNjVBq","ChjVChm","yWfDWRyM","AxrOrMvL","B0OCdCoxvG","WPpcNCkmwuC","W7yaWOvyW5i","WQ/cP2/dTCkHDa","WQFcPMhdOSkJzq","sXpdLGFdLMVcSdxdJsK","BxrJAK4","lCkEESo4W7LcWONdSa","CK5UDxy","W5yiWPnuW4RdHCoGWR3cNSka","WO/dGwqhrZNdKvpdGmkS","eLmXm8onWOeB","WPpcHc4cW4BdK8ksxCorW50","WRhcIWySW4ldHmkKBSowW4a","tg93qMv0","g0WJlSooWPiaumkfDa","CmomWPhdKSkSW7hdTmkbecm","yM91BMq","W4CqW6OZWOzp","CgrHDgvKqMv0CW","qmoQFGii","wK9wuvm","tCkLt2hdVCoi","z8kFWO7cMmkHWPPzqCkAW54","dSkBW4SLW4K8WRNcMG","DxbKyxrLvw5KBW","W6n/dmkgfNmybYpcTW","W6xcL8oD","y2nLC3m","zwrbBw91BNq","emo1eZxcUmkuWP3cJmoZWPydWRJcSG","uMvWzwf0","lfSUmSohWOa","gCkTW4OaW488WOVcHgZdKG","yMXLqMv0CW","qSkCw8oH","qsNdS8o5WPS","wmkAra","W4bCWRNdSa","WQZcISkJvhJcGSkQpSo4WQa","W7vHgSkIcG","CSokWPVdO8k+W6a","wSkeW7NdOSoIW7tcR0CLW4K","Dg90ywXczxrpBG","BCo+FCk2WP0","xXpdLHldLhdcPdFdUXS","uZ7dQmo6","yMv0CW","W4CuWPr5W4NdOa","W4FdLq7cKu/cHbO","WPZdS30hutddG1tdQCkx","D8obamo/WQFdJSkaAmkdvq","tfZcQmkdW4C","z2v0","cKGTn8or","AKjeB1C","uMvTB3zL","y2fSy3vSyxrLva","WPJdT2uMqsJdSvddO8k3","eCkMW64QW4S6WQ/cQMVdJG","mCkfD8o+W4XhWOO","W5XTW7PDjW","qrTfWQCxF0BdGXldVG","hf8N","WQRcIXiBW4ldGW","sg1Uu3C","W7GmW7ldKG","tSkUC2pdUCofW4ZcICo2WRe","BKjLDhnqzxjJzq","ACofcSoPWQhdVW","WRxcRMRdMmkJuW5gWQ7dPa","y0XZreG","s8omWOxdS8kOW5hdVCkq","y2fSy3vSyxrLvq","B25fCNjVCG","bb5GW7/cQKvFuGNcIa","W5KkW6af","nty2mJK4nvn0A3LVDG","t2fTBwm","W4/cPmo+D3u","WQP3WRtdVMn+W4y","WQFcP2/dUCkUDa","zxnZtg9N","zhvJDgLVBG","fmkRwg/dOmkmremUrq","g1yJkCobWPy","yM9UDxnuB01HAq","WOW1WOtcOcBdH8kclW","B3vUDhm","m8kPW4ysW4S7WQBcJeZdLq","CMvKDwnL","W67cNCoiAwG","B3rHBejLDhnbBq","qsHLja","irTWeSkXkbxdLSovaW","k8kdFmoV","WRfGWOhdQq","AwvUDfjLzhvJDa","DmoscSo5WRddJmkovSkpqq","qLfHu2i","tXFdJIxdJMJcPc/dNcS","CM9VDa","b8ocbSkSw8kIWPVdRWZcTmopz1y","W6RdNH/cNgtcJWNcRSoGW5m","zZ5wmMW","WQ7cON3dO8kIyXi","hmo2W4xdH8og","ywXHBMnL","W6v0EHnz","CLbrt2C","bbzGW6JcQMj1xG0","y29Kzq","W4WgW7JdPhxcR8kHWR9xoW","dSogbCkZWR4","W53cS8oLrMVcGN7dJujS","WQr6WOxdPx5/W4C","W7byW5HNhxZdLq","W4acWPng","gW10mG","WO3dVx4q","CmkiW77dLCoIW6pcSa","mtuYmZe0mhfwuMfMBG","Cfn1y2nLC3nmBW","uJrHa0ZdLmkgW5ydWRu","DxbKyxrLqMv0CW","D0jkA1K","W6PMg8kMcG","yaVdNSkqDtzzbLjG","Emk+WP/cNSkWWQLlxSk/W5u","zCorrcqP","WQpcH8k+vhlcMmkS","kIZcQSkikxi","W5ivWOHfW5u","W6ZdVCkmCmoaW5RcLWRdVvC","W6/cKSoiFKK3W7ivWRVdGG","W6ZcISocAgG","baHUW7VcVa","C2fNzunYB3bWzq","WRNcPIZcIW","W71VWPZdPmkZhmk3W5WyW5m","xdldSG","jmk7iSoZW5VdU8kKdCoDAxKRpW","pSo7D8kc","AxnszxbLyxrfBG","zKqro8oAuuZcLI8b","zxrtB3vUza","imkcwNldIq","y21evhq","mtm1mZm1nuzeyNjPsG","qMv0DgLUz1jLCW","W4ldGCoBBZPQ","WOdcSI7cISox","W7PYDa9OFCorWRZcUMG","WR3dS30fsJ/dH3tdO8kS","zg91yMXL","WO/dOh4uvW","q8kwqmobb8oGW4RdMZVcQW","W77cPfJdLSk7FtG","CxJcKCkGW6e","E8olWOddPCkKW7BdTSkqgJ8","W57cOmoWBMRcJgNdJ1nD","tHFdJIFdLwFcOa","mJC0otG1nfDIv2TWtW","W5NdMSoCxq","iK4bk8oh","i8oNW5C","BCoGC8kLWOVcISo0nmom","W5XUWO3dMmkFfSk2","y2nLC3nmB2C","y2/cISkJ","mSoJhCkzWO9wq0q","nti5ntm5mgL5u0n6zq","rxLlALK","W5jJWPZdImkYhCkX","W6nuW4n6","CMvWzwf0qMv0CW","W6DJDbbfDG","z2v0uMvWzwf0yq","EGRdV8kc","wCkaDSoWhmoGW4ldMr7cMG","b8oQW6/dMW","AxnnB3zLsw5qCG","yq3dUmkvqZPcha","W4OjW64FWObE","lCoPW4RcSw14W53dH8o1W7y","uM9dC0u","twf4qMv0u3bVDa","emo0fSklWP5w","W7PZEXC","WP/cPCkPW77cG0ldTdXGvq","WRVdVwqgsdK","W4CkW6G","lCkvy8o+","eCkVW4WJW5KQ","vMfSDwvZ","rMvLqMv0sw5ZDq","bGDajCk+icNdN8oTpa","kCkPW5CYW4m3WQ3cR2ZdLq","W6unW4/dG2dcVSkjWQv3oW","mJGYndeYvuLzv0Tz","Dw5KB0fSBa","EmobaSo/WRFdTSkotSkdCa","mtK3nZy0og1wzurxAG","ywn0Aw9UCW","W7/cKCocBG","vMfSDwvczxq","y2/cISkdW6lcPSodiCkVWO4","odK0ndm3mxvJC2PKDq","W6ldUmklv8olW5RcHH/dPMa","zrPqWQ4GFLFdSW","mSkPW40YW7K8WQBcJgddKW","zMX5rMvLt25czq","m0rHqK9euG","BhvLqMv0","W5ZdQq7cJhJcGHRcK8oMW5a","cSk7tq","W77dMGFcNwJcOWVcJG","WRBcUwhdP8k+","gW9VW78","Cb7dPq","W51uW5Tmf2y","x8kDzSoWgmoXW4RdGYRcUW","DCkTWPFcMSkSWPXp","BMDgywLSu291BG","twf4vgfIBgvwyq","W53dLmoFqdTUW44T","hfuWaSodWPak","A8kKzHKGWQLTWOq","jIRcRmkEkMxcHG","B3rZrxHHy3rbBq","W4nYWOFdKCkU","uNzxt1a","h8kRW5yJW44","dbDHjmkS","Bg9N","o8kjz8oiW71eWPldILK","F8kLWOS","r1L6t0S","WO7cJX8DW4JdNG","tCkoWR7cJCku","wuOggW","ydBcVr44W51sW4RcKSkH","W5aiWOHb","WP7cJvJdHCkC","W7DJyra","zMvL","WRxcRNRdG8kIzqPEWP/dJG","amo0bSkn","h1S2","ASkMBWS9WOzN","DCkkF8o/mq","BhvL","umk/z8ogWOuNW5xdNKFdIa","AgLKzuj5vhLWzq","cfuTmW","W5X1WOBdLq","DSkvW6ZdHSoO","qmkUCMVdQmomW4hcMmowWRa","hWzRj8kS","WQa/i1mskmo1WO7cVe0sWOi","q3blzLu","EmodWP3dP8kQW7y","f8kMW5KkW4uUWQ/cM1FdJW","WPpcMbOlW5xdPSkwCSoqW5a","vZrHmG","WO3dT2ibvIRdH2ldQCk3","WQP3WRxdO2rZW5JcHffd","kcBcUG","q2/cISkCW7VcPmoEe8kpWOq","B25vBMrVu3vJyW","cCk6swBdG8kDCLuBwW","W40jWQjhW5tdQmo3","W4DAW4b7fW","A2v5CW","fSkIsxpdKCkuz0u/Da","AxneCMfNsw5qCG","tHpdLJu","xmk9w8onWO88W4tdJLddQa","BgvUz3rO","otCWntuYofbHzxHovW","C2v0sgLZDg9YEq","W4tdM8o+rILQW6K9W4yo","eCo+amkk","W6DPEHC","W5bHWOtdGSkOh8kJW48vW4O","W7pdN8oJlIpdLmkldmoYWPa/WRm","Bwf4qMv0u3bVDa","yMv0u3bVDa","FHpdJYNdJwe","zMX5rNjVBujLDa","eCk8W58QW6G8WR7cMKldIG","WQBcOs3cJ8ob","qMfSyw5JzvrVBW","W6rNgSkGcG","bGDbjCkTkbldVmoypq","psBcQ8kIlgtcI2nfBG","WOJcIXWcW4ldVmkEC8oqW4a","q2HPCa","lsdcUSkznG","WQRcQmkSW67cIhtdKY0","q8kLvxu","vhHzzfy","AxnfBM91z2Hcyq","qCk2FSogWOONW5pdKKddQG","zM9YrwfJAa","Bw92zq","dGjLpSkZjGldNCoyda","n8oYA8kvWQVdKaSmW4RcTq","WR/cGHCEW6RdN8kbE8oWW5O","C2nVrMK","nZeYotm2mfH1ELLMAW","wfazcSojyeNcIZqb","mtHMv3fkA3y","W5D2bCk3geu","W7XYFqXFBmoJWQRcNG","WPRdS2u","u8kFxCoWbSoGW6NdKG3cJq","WQ3cNSk+vhlcMa","W5dcO8o/CW","gItcVCkhmq","W53cS8oLDa","errGW6NcO0r5","qMv0DgLUz1rPBq","CgXHEunSAwnRAq","tw92zujLDenVzq","W7OrW7ldLMm","y0LxBLe","z8k+WPtcI8kX","W7bIva5fBColWRS","h8k+W58VW4y4WQJcHwBdPq","ACkKDWm8WOTX","fZzYW4/cHW","W47dTCkpx8og","W5SxW6abWPa","WPtcTJBcVmoDWPxcPIDPW4u","W5aHW5JdKey","wxLnreG","WPNcUSkZW5FcGLe","v8kHtw/dRCobW5NcKSoxWRC","WR7cJWOAW47dNSkqsSoqW5K","EsNcMaGDW5nFW4ZcSSkn","BSoPzSkYWOFcP8o7lG","bX91W5/cOfv8wZ/cNG","zMX5vg9czxrtCa","WPDrW5ehWP/cV8kWWPRcPCkfW60DWPu","WPXGWRZdIfK","wJ9al03dJ8kgW5mpWQi","W4ldMCossZnQ","F8keW7NdOmoGW77cVe84W70","ASkeW77dHmo/W6FcRgmPW54","FmoVzSkVWOhcP8oV","B25qBgfJzunOAq","D0HzyMi","BwLU","W4VdMGFcI3JcJq/cJSoSW6O","W4hcKCoAwhO+W7iiWRFdIq","iCoYW5ZcKNnWW53dMSorW7u","DfjLzhvJDgLVBG","WRtcSI7cNSoCWPpcPq","WRn4WP3dPxvWW4dcJNbf","W6nEW59RagtdGXpdLM0","W4FdNbNcJx7cKG","W4eeWOjgW5xdI8oQWQ4","jmkhW6GxW7K","W5VdH8oCwsW","qSkIWP/cLmkdWPng","tMv4DeDHBwu","sKDtBMW","eX91W4NcQLvorXlcJW","gvKNnmor","Amomb8o/WQC","t3rOzxi","WPmaW7RcTdRcHmozW4i7nCkDkhO","Aw5czxrZugvYyW","lCoXW4ldMCocWPVdUH/dJCoy","WQNdS30rqs8","FrBdOSkcwcfu","AgLW","u3LHzMC","W6WpW6tdSN/cMCknWQv3pG","e0KaiSowWOaTtmkfwa","AgLZDg9YEq","uLjeBxe","uZrW","tSk0qgRdI8ofW5NcJSoKWQK","twLUqMv0u3bVDa","WOJcHqOpW4VdSSksASo2W5O","q1zYsve","rJhcKrq/","cbfWfSkYkbxdN8ojgq","amkOqwNdQmkDAfiCqW","WPDvW54aWPxcVSk1WQdcQmk9W5CiWOy","imoae8kTWP8","vw5KBW","W4mkWOHaW4JdSW","ywjSzwq","DhLWzq","j8oVW4ldV8ox","W6GgW6NdLq","CMvZzxj2zujLDa","W4RdMmoCxdf7","W7POwaXCFCo2WRRcMgy","twLUvgfIBgvwyq","tM9czxrZugXHyW","vMfSDwu","FmkCq8oxcCo4W4RdMrRcQW","B8oKCZGnkmoBpItcVW","grT5W5/cRKnXuIVcMG","W6pdU8kxxmob","gxmvkCoZ","WQJcMmkFzhBcI8kwi8oQWRC","mJq4odq4vefivvfu","CMvWzwf0rgLZyq","g8k8W60PW583WQ4","W6P9j8k3cvqCbYpcSG","m1vxC1DctG","jSoNW7ldQSooWPpdHH/dQCoz","DfrVB2X0Axa","yMv0","WQadW4Pza1JdJsC","W78nW7NdIq","amoWhSkFWPnqvwpdS8ki","AxnczxrZt3bLBG","Dw5KBW","odK4mZa0oeL5ENLfAG","y29LzMzPy2LLBG","vJb5iLZdJmk0W5ijWPu","ywXSB3DtCgvUza","tXxdHZxdIeJcQJW","oclcS8kdixBcI2K","E8knW6tdHmoJW6xcI0q4W6K","tw92zq","W4PqWR0","W57cUSoWAwxcIa","cbfWbCk6nWxdKmojlW","DLDit1K","B25LEujLDa","WOZcRCkHW6/cIfldTdXGzq","j8kJr3/dR8kmDq","gYzHm8kQjbtdMmosia","uSo3zbWF","ESoiWP3dH8kGW7ZdRCkkkb0","ESo5WOddQ8kO","pHdcQSkjjNlcJh8","WRxcSI7cNmohWPZcOtvLW7m","AxnmB3DsAxnR","WQdcImkVF3JcGSkS","q2HPCe1VDMvjBG","yMfSyw5Jzq","yxrVCNm","tKSidCoxvKq","C29YDa","hrfLjmkWkq","FSk/WRtcLCkUWOz6u8k/W4m","rMvL","Aw1L","ESkOBb4","yMfSyw5Jzuf2yq","EejLDa","mtaZmJeZm0nJvvnlsq","B25eB3vIBgvtDq","zIVcVr44W51sW4RcHmk6","W5ldOmkdrSoa","BgvK","pmoJW5ZcSNLNW5VdRmo1W6W","W4VdLWlcJwpcLt7cImoSW40","AhNcVmk1W6BcUSo4f8k4WO8","zXRdOSktrsvimf56","WP7dVNakrZK","DMfSAwrHDgu","n1mSbCohWOCXtmkpqG","cv82d8olWOawu8kstW","oIlcVCkgifVcLMfEyW","ESkeW7NdKG","vmkaW77dLCoEW7tcPuqVW54","o3ldJuH1WOOkW7JcTCkyFConiq","tLyAi8ouva","uCkfvCo8bmo1W4NdMXZcJa","y2XPzw50qMv0qW","BwL0","Cg90vMfSDwu","qwXSqMv0CW","B25nB3zLu3vJyW","rMf0ywW","BwLUqMv0u3bVDa","gmoNW4pcOM5I","x8oiWP3dSSkKW73dV8k2otK","BfD3tum","fSkDxwNdOSkDDvu","W4fjW4nPahFdLsi","WQJcMmkoEhpcG8kAi8oBWQC","WPOMWOhcOJZdJCki","ntK2mdGWuefhseDl","Cg9W","C2v0qMv0CW","og9wqxzSuW","B2DYzxnZ","mSo7ESkZWPZdGtKpW4RcRW","W4KaW7Sc","WPxcU2hdO8k+","Bwf4u3vWzxjtAq","qSkJrhxdUG","W48gWP93W4pdS8owWRNcVSkA","W77cM8ozwh4MW6a"];return(u=function(){return W})()}},141747:(W,n,I)=>{I.d(n,{F:()=>$,o:()=>k});var h=I(586234),q=I(943416);const $=[q.I.BankerFee,q.I.PlayerFee,q.I.TieFee,q.I.BankerPairFee,q.I.PlayerPairFee],k=new Map([[h.K8.Player,q.I.PlayerFee],[h.K8.Banker,q.I.BankerFee],[h.K8.Tie,q.I.TieFee],[h.K8.PlayerPair,q.I.PlayerPairFee],[h.K8.BankerPair,q.I.BankerPairFee]])},943416:(W,n,I)=>{var h;I.d(n,{I:()=>h}),function(W){W.BankerFee="BankerFee",W.PlayerFee="PlayerFee",W.TieFee="TieFee",W.BankerPairFee="BankerPairFee",W.PlayerPairFee="PlayerPairFee"}(h||(h={}))},92251:(W,n,I)=>{var h=I(794140),q=I(731675),$=I(752490),k=I(588974),_=I(346160),N=I(277082),c=I(730460);const P=[c.I.Normal,c.I.Chinese,c.I.Korean,c.I.Number],S={[N.WinnerTypeBaccarat.Player]:c.u.P,[N.WinnerTypeBaccarat.Banker]:c.u.B};function g(W){return"string"==typeof W}function B(W){return"boolean"==typeof W}function E(W){if(W)switch(typeof W){case"number":return W;case"string":return Number(W)}}function u(W,n){return W===k.C.V2?k.C.V2:n.default}function Y(W){const n="immersive_logo",I=`${n}_${_.lr().iso}`;return W[I]?W[I]:W[n]}function f(W,n){switch(W){case"true":return!0;case"false":return!1;default:return n.default}}function r(W){return P.includes(W)}function K(W){return g(W)?W.split(",").filter(r):[]}function t(W){return g(W)&&$.LH.includes(W)}const X={min:0,max:0};function L(W){const n=W.rawConfig,I={min:E(n.table_bet_min_limit)||0,max:E(n.table_bet_max_limit)||0},h=0!==I.min&&0!==I.max;return{tiePays9to1:f(n.tie_pays_9_to_1,{default:!1}),tableLimits:h?I:X,tableLogo:Y(n),excludedBeadRoadModes:K(n.excluded_bead_road_modes),scorecardTheme:(q=n.roads_background,t(q)?q:void 0),mainBetsOnly:f(n.main_bets_only,{default:!1}),isFrozenSprites:f(n.isFrozenSprites,{default:!1}),isAllSideBetsEnabled:f(n.all_side_bets,{default:!0}),redEnvelopeMath:u(n.red_envelope_math,{default:k.C.V1}),isRedEnvelope:f(n.red_envelope,{default:!1}),volatility:f(W.rawConfig["regulatory.volatility_index_in_help_required"],{default:!1})};var q}var O,Z=I(697971);function d(W){return Z.mJ((()=>W.preferences.showOnboardingGameHints),((n,I)=>{for(const[,h]of W.bubble.preferencesOnGameHintChange)!I&&n&&W.preferences.updatePreferenceValue(h,0)}))}function m(W){let n=0,I=0;const h=Z.mJ((()=>({isDesktopClassic:W.layout.isDesktopClassic,dimensions:W.device.dimensions})),(({isDesktopClassic:h,dimensions:q},{isDesktopClassic:$,dimensions:k})=>{const _=h!==$;q!==k?(window.clearTimeout(n),window.cancelAnimationFrame(I),n=window.setTimeout((()=>{I=window.requestAnimationFrame((()=>W.bubble.resize()))}),150)):_&&(window.clearTimeout(n),n=setTimeout((()=>{W.bubble.resize()}),1e3))}));return()=>{window.clearTimeout(n),h()}}function R(W){return Z.mJ((()=>({bets:W.bets.bets,isBetting:W.gamePhase.isBetsOpen})),(({bets:n,isBetting:I})=>{const h=function(W){return Object.values(W).reduce(((W,n)=>n?W+n:W),0)}(n),q=W.fee.getAmountWithFee(h),$=q-h;W.fee.set($),I&&(W.ag.actions.balance.reserveBet(q),W.ag.actions.balance.setTotalBet(q))}))}!function(W){W.Betting="Betting",W.Welcome="Welcome"}(O||(O={}));var e,j,z,v,V,F,w=I(586234),o=I(456647),D=I(254545);!function(W){W.PressedSettings="CLIENT_PRESSED_SETTINGS",W.FourRoads="CLIENT_TAP_ROADS2",W.Prediction="CLIENT_PRESSED_PROB",W.BeadRoad="CLIENT_BEAD_ROAD",W.RedEnvelopePayoutDisplayed="CLIENT_BACCARAT_REDENVELOPE_PAYOUT_DISPLAYED",W.ClientReceivedBetResponse="CLIENT_RECEIVED_BET_RESPONSE",W.PressedButton="CLIENT_PRESSED_BUTTON"}(e||(e={})),function(W){W.Bets="bets",W.GameType="gameType",W.GameTime="gameTime",W.UserAgent="userAgent",W.Balance="balance",W.Currency="currency",W.ChipStack="chipStack",W.TableLimits="tableLimits",W.GameId="gameId",W.ShoeName="shoeName"}(j||(j={})),function(W){W.PeekControl="Peek",W.ChipStack="Chipstack"}(z||(z={})),function(W){W.Big="BigRoad",W.BigEye="BigEyeRoad",W.Cockroach="CockroachRoad",W.SmallEye="SmallEyeRoad"}(v||(v={})),function(W){W.Enlarged="Enlarged",W.Original="Original"}(V||(V={})),function(W){W.SoundMute="soundMute",W.SoundUnmute="soundUnmute"}(F||(F={}));const x=[j.Bets,j.GameType,j.GameTime,j.UserAgent,j.Balance,j.Currency],G=[j.Bets,j.GameType,j.GameTime,j.Currency,j.ChipStack,j.TableLimits,j.Balance];function y(W){return{[w.K8.Banker]:"BAC_Banker",[w.K8.Player]:"BAC_Player",[w.K8.Tie]:W.tiePays9to1?"BAC_Tie9to1":"BAC_Tie",[w.K8.BankerBonus]:"BAC_BankerBonus",[w.K8.BankerPair]:"BAC_BankerPair",[w.K8.EitherPair]:"BAC_EitherPair",[w.K8.SuperSix]:"BAC_SuperSix",[w.K8.PlayerBonus]:"BAC_PlayerBonus",[w.K8.PlayerPair]:"BAC_PlayerPair",[w.K8.PerfectPair]:"BAC_PerfectPair"}}function C(W){return n=>({...n,...W()})}class b{constructor(W){this.props=W}getCustomEnhancers(){return{[j.Bets]:C((()=>({bets:Z.HO(this.props.root.bets.bets)}))),[j.GameType]:C((()=>({gameType:w.ZF.Baccarat}))),[j.UserAgent]:C((()=>({userAgent:this.props.root.device.DS.userAgent})))}}clientPressedSetting(W,n){this.commonLog({type:e.PressedSettings,payload:{settingName:W,newValue:n}})}clientPressedButton(W,n){this.commonLog({type:e.PressedButton,payload:{buttonName:W,...n}})}clientFourRoad(W,n){this.commonLog({type:e.FourRoads,payload:{mode:W,type:n}})}clientPrediction(W){this.commonLog({type:e.Prediction,payload:{mode:W}})}clientBeadRoad(W){this.commonLog({type:e.BeadRoad,payload:{mode:W}})}clientRedEnvelopePayoutDisplayed(W){this.commonLog({type:e.RedEnvelopePayoutDisplayed,payload:{bonus:W}})}clientBetChip(W){const n={},I=this.getBetExternalIds();Object.keys(W.bets).forEach((h=>{const q=I[h];q&&(n[q]=W.bets[h])}));const h={type:W.type,amount:W.amount,codes:n,currentBets:W.currentBets,currentSpotValue:W.currentSpotValue,balanceBeforeBet:W.balanceBeforeBet};this.log(o.Fv(h,this.betChipLogEnhancers))}clientPressedOnBetsOutOfBettingTime(){this.commonLog({type:D.L.PressedOnBetsOutOfBettingTime})}clientBetResponse(W){this.commonLog({type:e.ClientReceivedBetResponse,payload:W})}get defaultLogEnhancers(){return x}get betChipLogEnhancers(){return G}commonLog(W){this.log({...W,enhancers:this.defaultLogEnhancers})}log(W){this.props.root.ag.actions.log(W)}getBetExternalIds(){const{tiePays9to1:W,useRedEnvelopePayouts:n}=this.props.root.settings;return y({tiePays9to1:!n&&W})}}function l(W){return Z.mJ((()=>W.gamePhase.isBetsClosed),(n=>{n&&W.ag.actions.betting.setHasValidBets(W.ag.values.balanceTotalBet>0)}))}function A(W){return Z.mJ((()=>({amount:W.gameResult.amount,hasBets:Object.keys(W.bets.bets).length>0})),(({amount:n,hasBets:I})=>{(0!==n||I)&&W.ag.actions.gameResult.setAmount(n)}))}function p(W){return Z.mJ((()=>W.gamePhase.value),((n,I)=>function(W,n,I){let h=!1;if(n!==I&&n!==w.Qc.NewGame)switch(h=!0,n){case w.Qc.BetsOpen:W.ag.actions.lifecycle.openBets();break;case w.Qc.BetsClosed:W.ag.actions.lifecycle.closeBets();break;case w.Qc.Resolved:W.ag.actions.lifecycle.resolveGame()}return h}(W,n,I)))}const i=(W,n)=>[A(W),l(W),...n?[p(W)]:[]];var U=I(933233),Q=I(332635);class T{constructor(W){this.api=W.ag,this.values=function(W){const n={gamePaused:(I=W).gamePaused.state,orientation:I.orientation,isInFullscreen:I.fullscreen.isInFullscreen,isGoingLive:I.isGoingLive,gameDimensions:I.gameDimensions,preferences:I.preferences.values,gameRoundId:I.gameRoundId,playMode:I.playMode,isPageVisible:I.isPageVisible,chipstackHidden:I.chipstack.hidden,betAmountsLastSelectedAmount:I.betAmounts.lastSelectedAmount,chipstackChipColors:I.chipstack.chipColors,betAmounts:I.betAmounts.amounts,lifecycleCurrent:I.lifecycle.current,networkLatency:I.network.latency,decisionTimerHidden:I.decisionTimer.hidden,decisionTimerSecondsRemaining:I.decisionTimer.secondsRemaining,bettingTags:I.betting.tags,betModifier:I.betAmounts.betModifier,tooltipsCurrent:I.tooltips.current,gameNumber:I.gameNumber,tableName:I.tableName,layoutCurrent:I.layout.current,layoutImmersiveFooterCollapsed:I.layout.immersive.footer.collapsed,layoutClassicVideoIsExpanded:I.layout.classic.video.expanded,layoutOpenMobileDrawerId:I.layout.drawer.mobile.current,layoutDesktopDrawerCurrentOpenId:I.layout.drawer.desktop.current,menuOpenScreenId:I.menu.openScreenId,menuIsOpen:I.menu.isOpen,videoIsPlaying:I.video.isPlaying,videoQuality:I.video.quality,videoPlayerName:I.video.playerName,videoStreamForCurrentLayout:I.video.streamForCurrentLayout,videoMobileScale:I.video.mobile.scale,videoMobileScalingContainerHtmlElement:I.video.mobile.scalingContainerHtmlElement,videoInfoVisible:I.video.info.visible,gameResultAmount:I.gameResult.amount,statusBarProps:I.statusBar.props,statusBarOverlayProps:I.statusBar.overlayProps,balanceAvailable:I.balance.available,balanceReserved:I.balance.reserved,balanceReservedTip:I.balance.reservedTip,balanceServer:I.balance.server,balanceActiveId:I.balance.activeId,balanceTotalBet:I.balance.totalBet,balanceIsLow:I.balance.isLow,balanceIsPaused:I.balance.isPaused,winnersListHidden:I.winnersList.hidden,autoplayUIIsSettingsWindowOpen:I.autoplayUI.isSettingsWindowOpen,autoplayUIIsPreviousTotalBetVisible:I.autoplayUI.isPreviousTotalBetVisible,onboardingCurrent:I.onboardingBubbles.current,activeWallet:I.promotionsUI.activeWallet,currencyCode:I.currency.code,currencySymbol:I.currencySymbol,gameTheme:I.gameTheme,globalStylesCustomizableButton:I.globalStyles.current.customizableButton,tableLimitsMin:I.tableLimits.min,tableLimitsMax:I.tableLimits.max,tableLimitsPinned:I.tableLimits.ui.panel.isPinned,popupCurrent:I.popups.current,rootSize:I.rootSize};var I;return Object.keys(n).reduce(((W,I)=>{let h;const q=n[I],$=Z.MN(I,(()=>{h=q.subscribe((()=>{$.reportChanged()}))}),(()=>null==h?void 0:h()));return Object.defineProperty(W,I,{get:()=>($.reportObserved(),q.value)}),W}),{})}(W.ag)}get actions(){return this.api}get availableBalance(){return this.values.balanceAvailable}get lastSelectedChip(){return this.values.betAmountsLastSelectedAmount}get platform(){return this.api.platform}get balanceTotalBet(){return this.values.balanceTotalBet}get betAmounts(){return this.actions.betAmounts.amounts.value}get currentLayout(){return this.values.layoutCurrent}get gameTheme(){return this.values.gameTheme}}var H=I(693),a=I(973220);class J{constructor(){this.bets={},this.rejectedBets=void 0,this.status=w.uB.Idle,this.repeat=void 0,this.history=[],Z.Gn(this,{bets:Z.sH,rejectedBets:Z.sH,status:Z.sH,repeat:Z.sH,history:Z.sH,hasBets:Z.EW,updateBetsState:Z.XI.bound,reset:Z.XI.bound,setStatus:Z.XI.bound,setRepeat:Z.XI.bound,setBets:Z.XI.bound}),this.getBetSpotValue=this.getBetSpotValue.bind(this)}setBets(W){this.bets=this.removeZeroes(W)}setHistory(W){this.history=W}setStatus(W){this.status=W}setRejectedBets(W){this.rejectedBets=W}setRepeat(W){this.repeat=W}updateBetsState(W){W.bets&&this.setBets(W.bets),W.history&&this.setHistory(W.history),W.status&&this.setStatus(W.status),a.i5(W,"rejectedBets")&&this.setRejectedBets(W.rejectedBets),a.i5(W,"repeat")&&this.setRepeat(W.repeat)}getBetSpotValue(W){const n=this.bets[W];return"number"==typeof n?n:0}reset(){this.bets={},this.status=w.uB.Idle,this.history=[]}get hasHistory(){return!!this.history.length}get hasBets(){return!H.A(this.bets)}removeZeroes(W){return Object.keys(W).reduce(((n,I)=>(W[I]&&(n[I]=W[I]),n)),{})}}var s,M=I(284824);!function(W){W.Background="background",W.AllSideBets="allSideBets",W.BettingGridBubbleShownTimes="bettingGridBubbleShownTimes",W.WelcomeBubbleShownTimes="welcomeBubbleShownTimes"}(s||(s={}));var WW=I(822381);const nW="onboarding.bubbleBetting",IW="onboarding.bubbleBettingTitle",hW="onboarding.bubbleIntro",qW=WW.eI(40),$W=WW.eI(30),kW={[O.Betting]:s.BettingGridBubbleShownTimes,[O.Welcome]:s.WelcomeBubbleShownTimes},_W=[[O.Betting,s.BettingGridBubbleShownTimes],[O.Welcome,s.WelcomeBubbleShownTimes]];var NW;!function(W){W.BettingGrid="bettingGrid"}(NW||(NW={}));class cW{constructor(W){this.props=W,this.current=null,this.timeToLiveId=0,Z.Gn(this,{current:Z.sH,showBubble:Z.XI.bound,showWelcome:Z.XI.bound,hideBubble:Z.XI.bound,hideAllBubbles:Z.XI.bound,autoHideBubble:Z.XI.bound,resize:Z.XI.bound,isGridBubbleVisible:Z.EW,isWelcomeBubbleVisible:Z.EW})}show(W,n=!1){const I=this.getRef(W);this.showBubble(W,I,n)}showBubble(W,n,I=!1){var h;if(!n||(null===(h=this.current)||void 0===h?void 0:h.id)===W&&!I||W===O.Welcome)return;this.current={id:W,ref:n};const q=this.bubbles[W],$=this.getBubbleLayoutOptions(q);this.props.root.ag.actions.onboardingBubbles.addOrUpdate({id:q.id,element:n,anchorPosition:$.anchorPosition,bubbleData:{position:$.bubblePosition,showHintsOption:void 0===q.showHintsOption||q.showHintsOption,width:$.bubbleWidth,withArrow:q.withArrow,titleTranslationKey:q.titleTranslationKey,contentTranslationKey:q.contentTranslationKey,rootOffset:$.offsetBubble,contentTranslationMapping:q.contentTranslationMapping,onClose:this.hideBubble.bind(this),hintsButtonCallback:this.hideAllBubbles.bind(this)}}),q.timeToLive&&(clearTimeout(this.timeToLiveId),this.timeToLiveId=setTimeout((()=>{var W;(null===(W=this.current)||void 0===W?void 0:W.id)===q.id&&this.autoHideBubble(this.current.id)}),q.timeToLive))}showWelcome(){var W;(null===(W=this.current)||void 0===W?void 0:W.id)!==O.Welcome&&(this.current={id:O.Welcome},this.props.root.ag.actions.onboardingBubbles.addWelcomeBubble({contentTranslationKey:this.bubbles[O.Welcome].contentTranslationKey,onClose:this.hideBubble.bind(this)}))}hideBubble(){if(!this.current)return;this.current.id===O.Welcome?this.props.root.ag.actions.onboardingBubbles.removeWelcomeBubble():this.props.root.ag.actions.onboardingBubbles.remove(this.current.id);const W=this.current.id;this.props.root.preferences.updatePreferenceValue(this.bubblePreferences[W],this.bubbles[W].timesToShow),this.current=null,clearTimeout(this.timeToLiveId)}autoHideBubble(W){if(this.current&&this.current.id===W){if(W===O.Welcome)this.props.root.ag.actions.onboardingBubbles.removeWelcomeBubble();else{this.props.root.ag.actions.onboardingBubbles.remove(W);const n=W,I=this.props.root.preferences.getValue(this.bubblePreferences[n]);this.props.root.preferences.updatePreferenceValue(this.bubblePreferences[n],I+1)}this.current=null,clearTimeout(this.timeToLiveId)}}hideAllBubbles(){this.current&&(this.props.root.ag.actions.onboardingBubbles.remove(this.current.id),this.props.root.preferences.updatePreferenceValue(M.bR,!1),this.current=null,clearTimeout(this.timeToLiveId))}resize(){this.current&&this.show(this.current.id,!0)}get isWelcomeBubbleVisible(){return!1}get isGridBubbleVisible(){const{ag:W,gamePhase:n,preferences:I}=this.props.root,{showOnboardingGameHints:h,bettingGridBubbleShownTimes:q}=I;return!this.isWelcomeBubbleVisible&&q<this.bubbles[O.Betting].timesToShow&&!!this.gridRef&&0===W.balanceTotalBet&&n.isBetsOpen&&h}get bubblePreferences(){return kW}get preferencesOnGameHintChange(){return _W}getRef(W){var n;return W===O.Betting?this.gridRef:null===(n=this.current)||void 0===n?void 0:n.ref}getBubbleLayoutOptions(W){return this.props.root.layout.isDesktopImmersive?W.layoutPosition.desktop:this.props.root.layout.isDesktopClassic?W.layoutPosition.desktopClassic:this.props.root.device.isTablet&&W.layoutPosition.tablet?W.layoutPosition.tablet:this.props.root.device.isLandscape?W.layoutPosition.landscape:W.layoutPosition.portrait}get gridRef(){return this.props.root.reference.bubble.all[NW.BettingGrid]}get bubbles(){return function({percentage:W=20}={}){return{[O.Welcome]:{id:O.Welcome,timesToShow:1,contentTranslationKey:hW,layoutPosition:{}},[O.Betting]:{id:O.Betting,titleTranslationKey:IW,contentTranslationKey:nW,contentTranslationMapping:{percentage:W},withArrow:!0,layoutPosition:{desktop:{anchorPosition:"TopCenter",bubblePosition:"TopCenter",bubbleWidth:qW},desktopClassic:{anchorPosition:"TopCenter",bubblePosition:"TopCenter",bubbleWidth:qW},landscape:{anchorPosition:"BottomCenter",bubblePosition:"BottomCenter",bubbleWidth:$W},portrait:{anchorPosition:"TopCenter",bubblePosition:"TopCenter",bubbleWidth:$W}},timesToShow:2}}}()}}var PW=I(930104);function SW(){const W={cards:[],score:0};return{[PW.U.Banker]:W,[PW.U.Player]:W}}class gW{constructor(){this.hands=SW(),this.cleared=!1,this.dealSoon=!1,Z.Gn(this,{hands:Z.sH,cleared:Z.sH,dealSoon:Z.sH,setHands:Z.XI,setCleared:Z.XI,setDealSoon:Z.XI,dealtCards:Z.EW,resetHands:Z.XI})}setHands(W){this.hands=W}getCards(W){return this.hands[W].cards}hasOpenCard(W){return this.getCards(W).some((W=>W!==w.Zp.UnknownCard))}getScore(W){return this.hasOpenCard(W)?this.hands[W].score:void 0}get dealtCards(){const W=this.getCards(PW.U.Player),n=this.getCards(PW.U.Banker);return W.concat(n)}get dealtOrderedCards(){const W=this.getCards(PW.U.Player),n=this.getCards(PW.U.Banker),I=[];for(let h=0;h<3&&!(W.length<=h)&&(I.push(W[h]),!(n.length<=h));h++)I.push(n[h]);return I}resetHands(){this.setHands(SW())}setCleared(W){this.cleared=W}setDealSoon(W){this.dealSoon=W}}var BW=I(170877),EW=I(436794);class uW{constructor(W){this.props=W,Z.Gn(this,{isDesktop:Z.EW,isTablet:Z.EW,isPhone:Z.EW,isPortrait:Z.EW,isLandscape:Z.EW,dimensions:Z.EW,aspectRatio:Z.EW,isBigDeviceDimensions:Z.EW,platform:Z.EW,orientation:Z.EW,isSmallDevice:Z.EW,isSmallDeviceHeight:Z.EW,isLargeDevice:Z.EW,gameContainerDimensions:Z.EW,rootSize:Z.EW})}get isDesktop(){return this.props.root.ag.platform===BW.OD.Desktop}get DS(){return this.props.DS}get isTablet(){return this.platform===BW.OD.Tablet}get isPhone(){return this.platform===BW.OD.Phone}get orientation(){return this.props.root.ag.values.orientation}get platform(){return this.props.root.ag.platform}get isPortrait(){return this.orientation===EW.t.Portrait}get isLandscape(){return this.orientation===EW.t.Landscape}get dimensions(){return this.props.root.ag.values.gameDimensions}get rootSize(){return this.props.root.ag.values.rootSize}get aspectRatio(){const W=this.dimensions.containerWidth,n=this.dimensions.containerHeight;return Math.min(W,n)?Math.max(W,n)/Math.min(W,n):0}get isLowPerformanceDevice(){return this.DS.IS_ANDROID&&!this.DS.IS_ANDROID6_0_0_PLUS||this.DS.IS_IN_ANDROID_WEB_VIEW}get isBigDeviceDimensions(){return this.aspectRatio>1.85}get isFF(){return this.props.DS.IS_FIREFOX}get isSmallDevice(){const{width:W,height:n}=this.dimensions;return(this.isPortrait?W:n)<=320}get isSmallDeviceHeight(){const{width:W,height:n}=this.dimensions;return(this.isPortrait?n:W)<=600}get isLargeDevice(){const{width:W,height:n}=this.dimensions;return(this.isPortrait?n:W)>=812}get isNarrowScreenPhonePortrait(){const{height:W,width:n}=this.dimensions;return W>n&&n>=320&&n/W<=1e3/1900}get gameContainerDimensions(){const{boxWidth:W,boxHeight:n}=this.dimensions,I=this.dimensions.reverseScale||1;return{width:W/I,height:n/I,reverseScale:this.dimensions.reverseScale}}}class YW{constructor(){this.isLongBetting=!1,this.phase=w.Qc.NewGame,Z.Gn(this,{phase:Z.sH,isLongBetting:Z.sH,setPhase:Z.XI,setIsLongBetting:Z.XI,isGameResolved:Z.EW,isBetsOpen:Z.EW,isDealing:Z.EW})}get isBetsOpen(){return this.phase===w.Qc.BetsOpen}get isDealing(){return this.phase===w.Qc.Dealing}get value(){return this.phase}setPhase(W){this.phase=W}setIsLongBetting(W){this.isLongBetting=W}get isGameResolved(){return this.value===w.Qc.Resolved}get isBetsClosed(){return this.value===w.Qc.BetsClosed}}var fW,rW,KW,tW=I(981298);class XW{constructor(){this.winner=void 0,this.winningBetSpots=[],this.betsAcceptedBetSpots=[],this.amount=0,this.acceptedBetsAmount=0,this.winType=tW.R.None,this.withEffect=!1,Z.Gn(this,{winner:Z.sH,winningBetSpots:Z.sH,betsAcceptedBetSpots:Z.sH,amount:Z.sH,winType:Z.sH,withEffect:Z.sH,color:Z.EW,resultLabel:Z.EW,setGameResultData:Z.XI,reset:Z.XI,setWithEffect:Z.XI})}get color(){switch(this.winner){case w.K8.Banker:return"255,15,15";case w.K8.Player:return"0,150,255";case w.K8.Tie:return"0,255,0";default:return""}}get resultLabel(){return this.winner?_.Tl(this.winner.toLowerCase()):""}setWithEffect(W){this.withEffect=W}setGameResultData({winner:W,winningBetSpots:n,betsAcceptedBetSpots:I,amount:h,winType:q,acceptedBetsAmount:$}){this.winner=W,this.winningBetSpots=n,this.betsAcceptedBetSpots=null!=I?I:[],this.amount=h,this.acceptedBetsAmount=$,this.winType=q}reset(){this.winner=void 0,this.winningBetSpots=[],this.betsAcceptedBetSpots=[],this.amount=0,this.acceptedBetsAmount=0,this.winType=tW.R.None,this.setWithEffect(!1)}}!function(W){W.Desktop="ComponentLayout.Desktop",W.DesktopClassic="ComponentLayout.DesktopClassic",W.MobilePortrait="ComponentLayout.MobilePortrait",W.MobileLandscape="ComponentLayout.MobileLandscape",W.Tablet="ComponentLayout.Tablet"}(fW||(fW={})),function(W){W.DesktopImmersive="DesktopImmersive",W.DesktopClassic="DesktopClassic",W.TabletLive="TabletLive",W.PhonePortraitLive="PhonePortraitLive",W.PhoneLandscapeLive="PhoneLandscapeLive",W.ExtraLargeLandscape="ExtraLargeLandscape",W.LargeLandscape="LargeLandscape",W.SmallLandscape="SmallLandscape",W.PhonePortrait="PhonePortrait"}(rW||(rW={})),function(W){W[W.ThreeLines=0]="ThreeLines",W[W.TwoLinesPortrait=1]="TwoLinesPortrait",W[W.TwoLinesDesktopClassic=2]="TwoLinesDesktopClassic",W[W.TwoLinesDesktopImmersiveV2=3]="TwoLinesDesktopImmersiveV2",W[W.FourLinesDesktopClassic=4]="FourLinesDesktopClassic",W[W.Desktop=5]="Desktop",W[W.SixLinesPhoneV2=6]="SixLinesPhoneV2",W[W.Multiplay=7]="Multiplay"}(KW||(KW={}));class LW{constructor(W){this.props=W,Z.Gn(this,{componentLayout:Z.EW,isDesktopClassic:Z.EW,isDesktopImmersive:Z.EW})}get componentLayout(){return this.props.root.device.isDesktop?this.isDesktopClassic?fW.DesktopClassic:fW.Desktop:this.props.root.device.isTablet?fW.Tablet:this.props.root.device.isLandscape?fW.MobileLandscape:fW.MobilePortrait}get isDesktopClassic(){return this.props.root.ag.values.layoutCurrent===N.LayoutType.Classic}get isDesktopImmersive(){return this.componentLayout===fW.Desktop}get roadsDisplayMode(){const{isDesktopClassic:W,isDesktopImmersive:n}=this,{isPortrait:I,isTablet:h,isPhone:q}=this.props.root.device;return I?KW.TwoLinesPortrait:h||q?KW.SixLinesPhoneV2:W?KW.FourLinesDesktopClassic:n?KW.TwoLinesDesktopImmersiveV2:KW.ThreeLines}get beadRoadDisplayMode(){const{isDesktopClassic:W,isDesktopImmersive:n}=this,{isTablet:I,isPortrait:h,isBigDeviceDimensions:q}=this.props.root.device;return W||h&&q?rW.DesktopClassic:n?rW.DesktopImmersive:I?rW.TabletLive:h?rW.PhonePortraitLive:rW.PhoneLandscapeLive}get useInnerDimensions(){return[rW.DesktopImmersive,rW.DesktopClassic,rW.TabletLive].includes(this.beadRoadDisplayMode)}get hideYouWin(){return this.props.root.settings.hideYouWinOnLowCelebration&&this.props.root.gameResult.amount<=this.props.root.gameResult.acceptedBetsAmount}}class OW{constructor(){this.winner=void 0,Z.Gn(this,{winner:Z.sH,setPrediction:Z.XI,resetPrediction:Z.XI})}setPrediction(W){this.winner=W}resetPrediction(){this.winner=void 0}}class ZW{constructor(){this.references=Z.sH.map(),Z.Gn(this,{set:Z.XI.bound,all:Z.EW,dispose:Z.XI.bound,references:Z.sH}),this.get=this.get.bind(this)}get all(){const W={};for(const[n,I]of this.references)W[n]=I;return W}set(W,n){this.references.set(W,n)}get(W){return this.references.get(W)}dispose(){this.references.clear()}}class dW{constructor(){this.common=new ZW,this.bubble=new ZW}dispose(){this.common.dispose(),this.bubble.dispose()}}class mW{constructor(){this.history=[]}parse(W){this.history=this.formatHistoryPayload(W.history_v2);const{list:n,weight:I}=this.calculateBigRoad(this.history,!0),{list:h,weight:q}=this.calculateBigEyeRoad(n),{list:$,weight:k}=this.calculateSmallRoad(n),{list:_,weight:c}=this.calculateCockroachRoad(n),P=this.mapHistoryToPattern(this.history);return{stats:W.stats,history:this.history,roads:{[N.RoadType.Big]:n,[N.RoadType.BigEye]:h,[N.RoadType.Small]:$,[N.RoadType.Cockroach]:_,probes:this.probes},weight:{[N.RoadType.Big]:I,[N.RoadType.BigEye]:q,[N.RoadType.Small]:k,[N.RoadType.Cockroach]:c},pattern:P}}formatHistoryPayload(W){return W.map((W=>({bankerPair:W.bankerPair||!1,bankerScore:W.bankerScore||0,natural:W.natural||!1,playerPair:W.playerPair||!1,playerScore:W.playerScore||0,winner:W.winner,multiplier:W.multiplier})))}calculateBigRoad(W,n=!1){const I=N.calculateRoadBaccarat(W,n);return N.orderRoadBaccarat(I)}calculateBigEyeRoad(W){const n=N.getDerivedRoadBaccarat(W,1);return N.orderRoadBaccarat(n)}calculateSmallRoad(W){const n=N.getDerivedRoadBaccarat(W,2);return N.orderRoadBaccarat(n)}calculateCockroachRoad(W){const n=N.getDerivedRoadBaccarat(W,3);return N.orderRoadBaccarat(n)}calculateProbeRoad(W){return{row:W.row||0,col:W.col||0,color:W.color}}calculateLocation(W){return W?this.calculateProbeRoad(W):void 0}calculateProbes(W){const n={winner:W,bankerPair:!1,playerPair:!1,natural:!1,bankerScore:0,playerScore:0},I=this.history.concat(n),h=this.calculateBigRoad(I).list,q=this.calculateBigEyeRoad(h).list,$=this.calculateSmallRoad(h).list,k=this.calculateCockroachRoad(h).list;return{big:this.calculateLocation(h[h.length-1]),bigEye:this.calculateLocation(q[q.length-1]),small:this.calculateLocation($[$.length-1]),cockroach:this.calculateLocation(k[k.length-1])}}mapHistoryToPattern(W){const n=[];return W.forEach((W=>{const I=W.winner;I!==N.WinnerTypeBaccarat.Player&&I!==N.WinnerTypeBaccarat.Banker||(0!==n.length&&n[n.length-1].key===I?n[n.length-1].val++:n.push({key:I,val:1}))})),n.map((W=>S[W.key]+W.val)).join("|")}get probes(){return{[N.WinnerTypeBaccarat.Player]:{...this.calculateProbes(N.WinnerTypeBaccarat.Player)},[N.WinnerTypeBaccarat.Banker]:{...this.calculateProbes(N.WinnerTypeBaccarat.Banker)}}}}class RW{constructor(W){this.props=W,this.beadRoadMode=c.I.Normal,this.zoomedRoad=void 0,this.roads={probes:{Banker:{},Player:{}},[N.RoadType.Big]:[],[N.RoadType.BigEye]:[],[N.RoadType.Small]:[],[N.RoadType.Cockroach]:[]},this.stats={gameCount:0,playerWins:0,bankerWins:0,ties:0,playerPairs:0,bankerPairs:0},this.history=[],this.weight={[N.RoadType.Big]:0,[N.RoadType.BigEye]:0,[N.RoadType.Small]:0,[N.RoadType.Cockroach]:0},this.decoder=new mW,Z.Gn(this,{beadRoadMode:Z.sH,zoomedRoad:Z.sH,roads:Z.sH,stats:Z.sH,history:Z.sH,excludedBeadRoadModes:Z.EW,availableBeadRoadModes:Z.EW,setShoeData:Z.XI,updateShoeData:Z.XI,setZoomedRoad:Z.XI,setBeadRoadMode:Z.XI})}setShoeData(W){const{roads:n,stats:I,history:h,pattern:q,weight:$}=this.decoder.parse(W);this.roads=n,this.stats=I,this.history=h,this.pattern=q,this.weight=$}updateShoeData(W){this.roads=W.roads,this.stats=W.stats,this.history=W.history,this.pattern=W.pattern}setBeadRoadMode(W){this.beadRoadMode=W}get excludedBeadRoadModes(){const W=new Set,{excludingBeadRoadMode:n}=_.vL();return n?W.add(c.I.Chinese):W.add(c.I.Korean),this.props.root.settings.excludedBeadRoadModes.forEach((n=>{W.add(n)})),W}get availableBeadRoadModes(){return P.filter((W=>!this.excludedBeadRoadModes.has(W)))}getRoadItems(W){return this.roads[W]}resolveMultiplierTheme(W){return N.lightningTheme}setZoomedRoad(W){this.zoomedRoad=W}}var eW=I(843717),jW=I(764522);class zW{constructor(){this.playPlaceBetSound=()=>{this.fireSoundEvent(eW.Wo.PlaceChip)},this.playClickingFailSound=()=>{this.fireSoundEvent(eW.Wo.ClickingFail)},this.playClickButtonSound=()=>{this.fireSoundEvent(eW.Wo.ClickUIButton)},this.playChipStackSound=()=>{this.fireSoundEvent(eW.Wo.Chipstack)},this.playUndoSound=()=>{this.fireSoundEvent(eW.Wo.Undo)},this.playRepeatBetSound=()=>{this.fireSoundEvent(eW.Wo.RepeatDouble)}}fireSoundEvent(W,...n){jW.triggerEvent(W,...n)}}Z.jK({enforceActions:"always"});class vW{constructor(W){this.disposeBagCallbacks=[],this.isDebug=null!==U.w(window.location.href).getParam("debug"),this.disposeBag=new Q.C,this.ag=function(W){return new T(W)}({ag:W.ag}),this.device=function(W){return new uW(W)}({root:this,DS:W.DS}),this.reference=new dW,this.layout=function(W){return new LW(W)}({root:this}),this.gamePhase=new YW,this.cards=new gW,this.shoe=function(W){return new RW(W)}({root:this}),this.gameResult=new XW,this.bets=new J,this.prediction=new OW,this.log=function(W){return new b(W)}({root:this}),this.bubble=function(W){return new cW(W)}({root:this}),this.sounds=new zW,this.isDebug&&(window.__store=this)}dispose(){this.disposeBag.dispose()}initDisposables(W,n=!0){this.disposeBag.addDisposables([this.reference,...i(this,n),...this.disposeBagCallbacks.map((W=>W()))])}}const VW=[...x,j.ChipStack,j.TableLimits,j.GameId];var FW,wW,oW,DW,xW;!function(W){W.PressedDealNow="CLIENT_PRESSED_DEAL_NOW",W.TotalMultiplierDisplayed="CLIENT_BACCARAT_TOTAL_MULTIPLIER_DISPLAYED",W.PressedStatistics="CLIENT_PRESSED_STATISTICS",W.MinimizeGrid="CLIENT_MINIMIZE_GRID",W.ReceivePrivateWarning="CLIENT_RECEIVE_PRIVATE_WARNING",W.PressedPrivateWarningOk="CLIENT_PRESSED_PRIVATE_WARNING_OK"}(FW||(FW={})),function(W){W.Swipe="Swipe",W.ClickOnButton="ClickOnButton",W.ClickOnBackdrop="ClickOnBackdrop"}(wW||(wW={}));class GW extends b{constructor(W){super(W),this.props=W}clientPressedDealNow(){this.commonLog({type:FW.PressedDealNow})}clientTotalMultiplierDisplayed(W,n){this.commonLog({type:FW.TotalMultiplierDisplayed,payload:{betSpot:W,multiplier:n}})}clientPressedStatistics(W){this.commonLog({type:FW.PressedStatistics,payload:{show:W}})}clientMinimizeGrid(W){this.commonLog({type:FW.MinimizeGrid,payload:{actionType:W}})}clientBetAcceptedRejected(W){const{ag:n}=this.props.root;let I,h;const q=W.acceptedBets;if(q)for(const W of Object.keys(q)){const n=q[W];n&&(h||(h={}),h[W]=n.amount)}if(W.originalBets)I=W.originalBets;else{I={...h||{}};const n=W.rejectedBets;if(n)for(const W of Object.keys(n)){const h=n[W];h&&(I[W]=h.amount)}}const $={originalBet:I,confirmed:h,rejected:W.rejectedBets,layout:n.values.layoutCurrent,repeat:W.repeat,status:W.status,balance:W.balance,latency:n.values.networkLatency};let k=D.L.ClientBetAccepted;$.confirmed&&$.rejected?k=D.L.ClientBetAcceptedPartial:$.rejected&&(k=D.L.ClientBetRejected),this.betLog({type:k,payload:$})}clientReceivedPrivateTableIdleWarning(){this.commonLog({type:FW.ReceivePrivateWarning})}clientPressedPrivateTableIdleWarningOk(){this.commonLog({type:FW.PressedPrivateWarningOk})}getBetLogEnhancers(){return VW}betLog(W){this.log({...W,enhancers:this.getBetLogEnhancers()})}}!function(W){W.Banker="banker_reductions",W.Player="player_reductions",W.Tie="tie_reductions",W.BankerBonus="banker_bonus_reductions",W.BankerPair="banker_pair_reductions",W.EitherPair="either_pair_reductions",W.SuperSix="super_six_reductions",W.PlayerBonus="player_bonus_reductions",W.PlayerPair="player_pair_reductions",W.PerfectPair="perfect_pair_reductions"}(oW||(oW={})),function(W){W.WideShot="WideShot",W.CloseUp="CloseUp"}(DW||(DW={})),function(W){W.Address="address",W.BetsClosed="betsclosed",W.BetsOpen="betsopen",W.Dealing="dealing",W.Resolved="resolved",W.WideShotZoom="wideShotZoom",W.CloseUpZoom="closeUpZoom",W.WideShotY="wideShotY",W.CloseUpY="closeUpY",W.Duration="duration"}(xW||(xW={}));class yW{constructor(W){this.props=W,this.duration=1,this.scale=1,this.translateY=0,this.zoomMap={[DW.WideShot]:{translateY:0,scale:1},[DW.CloseUp]:{translateY:0,scale:1}},this.tasks=new Set,this.state="default",Z.Gn(this,{scale:Z.sH,translateY:Z.sH,duration:Z.sH,update:Z.XI.bound,setState:Z.XI.bound,addTask:Z.XI.bound,removeTask:Z.XI.bound});const n=this.props.root.settings.cameraOnRails;var I;this.duration=CW(n.duration,3),this.zoomMap[DW.WideShot].scale=CW(n.wideShotZoom,1),this.zoomMap[DW.WideShot].translateY=CW(n.wideShotY,0),this.zoomMap[DW.CloseUp].scale=CW(n.closeUpZoom,1.25),this.zoomMap[DW.CloseUp].translateY=CW(n.closeUpY,0),this.props.root.disposeBagCallbacks.push((I=this.props.root,()=>Z.mJ((()=>I.gamePhase.value),(W=>{if(!I.videoZoom||I.videoZoom.state===W||I.device.isDesktop)return;I.videoZoom.setState(W);const n=I.settings.cameraOnRails[W];if(n){I.videoZoom.removeTask();for(const W of n){const n=window.setTimeout((()=>{I.videoZoom&&(I.videoZoom.removeTask(n),I.videoZoom.update({...I.videoZoom.zoomMap[W.state]}))}),W.delay);I.videoZoom.addTask(n)}}}),{fireImmediately:!0})))}setState(W){this.state=W}addTask(W){this.tasks.add(W)}removeTask(W){if(W)this.tasks.delete(W);else{for(const W of this.tasks)window.clearTimeout(W);this.tasks.clear()}}update(W){W.scale&&(this.scale=W.scale),W.translateY&&(this.translateY=W.translateY),W.duration&&(this.duration=W.duration)}}function CW(W,n){return W?Number(W):n}var bW=I(386062);class lW{constructor(W){this.props=W,Z.Gn(this,{isLowBalance:Z.EW})}get isLowBalance(){const{betSpot:W,settings:n,ag:I,bets:h}=this.props.root,q=W.minBetSpotValues,$=Math.min(...n.chipAmounts),k=I.availableBalance,_=bW.Zz(h.bets);return Object.keys(q).length>0&&void 0!==k&&!_&&(this.isBalanceLowerMinBet||k<$)}get isBalanceLowerMinBet(){const{betSpot:W,ag:n}=this.props.root;return n.availableBalance<W.minBetSpotValue}}function AW(W){return Z.mJ((()=>W.balance.isLowBalance),(n=>{const I=W.ag.actions.balance;return n?I.setLow():I.setEnough()}),{fireImmediately:!0})}var pW=I(251669);function iW(W){return Z.mJ((()=>W.betProcessor.isUndoEnabled),(({enabled:n})=>{n?W.ag.actions.betting.undo.enable():W.ag.actions.betting.undo.disable()}))}function UW(W){return Z.mJ((()=>W.betProcessor.isRepeatEnabled),(n=>{n.enabled?W.ag.actions.betting.repeat.enable():W.ag.actions.betting.repeat.disable(n.reason)}),{fireImmediately:!0})}function QW(W){return Z.mJ((()=>W.betProcessor.isDoubleEnabled),(n=>{n.enabled?W.ag.actions.betting.double.enable():W.ag.actions.betting.double.disable(n.reason)}),{fireImmediately:!0})}var TW=I(609835);const HW=[],aW=[w.K8.PlayerPair],JW=[w.K8.PlayerBonus,w.K8.PerfectPair],sW=[...JW,...aW],MW=[w.K8.BankerPair],Wn=[w.K8.BankerBonus,w.K8.EitherPair],nn=[...Wn,...MW],In=[...JW,...Wn],hn=new Map([[w.K8.Player,!1],[w.K8.Banker,!1],[w.K8.Tie,!1],[w.K8.PlayerPair,!1],[w.K8.BankerPair,!1],[w.K8.PlayerBonus,!1],[w.K8.BankerBonus,!1],[w.K8.PerfectPair,!1],[w.K8.EitherPair,!1],[w.K8.SuperSix,!1]]);class qn{constructor(W){this.props=W,Z.Gn(this,{getBetSpotPayoutMap:Z.EW})}isSpotConfigured(W){try{const{rawConfig:n,prefixMinMax:I,postfixMin:h,postfixMax:q}=this.props.root.settings,$=a.C(W);if(!f(n[`${$}_enabled`],{default:!0}))return!1;const k=+n[`${I}${$}_${h}`],_=+n[`${I}${$}_${q}`];return k>0&&_>0}catch(W){return!1}}getMaxBetSpotValue(W){const{reduction:n}=this.props.root;return n.getReductedMaxBetSpotValue(W)}getMinBetSpotValue(W){return this.props.root.settings.getMinBetSpotValue(W)}get minBetSpotValues(){return Object.values(w.K8).reduce(((W,n)=>{const I=this.getMinBetSpotValue(n);return TW.A(I)&&Number.isFinite(I)?{...W,[n]:I}:W}),{})}get minBetSpotValue(){const W=Object.values(this.minBetSpotValues);return W.length?Math.min(...W):0}get maxBetSpotValues(){return Object.values(w.K8).reduce(((W,n)=>{const I=this.getMaxBetSpotValue(n);return TW.A(I)&&Number.isFinite(I)?{...W,[n]:I}:W}),{})}get tiePayout(){const{tiePays9to1:W,useRedEnvelopePayouts:n}=this.props.root.settings;return n?_.Tl("betSpot.Tie.payout.redenvelope"):W?_.Tl("betSpot.Tie.payout.9to1"):_.Tl("betSpot.Tie.payout")}get getBetSpotPayoutMap(){return Object.keys(w.K8).reduce(((W,n)=>{let I=[];switch(n){case w.K8.Tie:I=[this.tiePayout];break;case w.K8.PerfectPair:I=[_.Tl("betSpot.PerfectPair.payout.double"),_.Tl("betSpot.PerfectPair.payout.one")];break;case w.K8.PlayerPair:case w.K8.BankerPair:case w.K8.EitherPair:case w.K8.SuperSix:I=[_.Tl(`betSpot.${n}.payout`)]}return{...W,[n]:I}}),{})}}class $n extends qn{constructor(W){super(W),this.props=W,Z.Gn(this,{leftBetSpots:Z.EW,rightBetSpots:Z.EW,isOnlyMains:Z.EW,isSingleSideBetsRow:Z.EW,availableBetSpots:Z.EW,isOnlyPairs:Z.EW,hasExtraSideBetsConfigured:Z.EW,hasExtraSideBetsPlacedBets:Z.EW})}get availableBetSpots(){const W=new Map(hn),n=this.props.root.reduction.mainOnlyReduction||this.props.root.settings.isMainBetsOnly,I=this.props.root.preferences.isAllSideBetsEnabled;for(const[h]of W){const q=this.isSpotConfigured(h);switch(h){case w.K8.Player:case w.K8.Banker:case w.K8.Tie:W.set(h,q);break;case w.K8.PlayerPair:case w.K8.BankerPair:W.set(h,q&&!n);break;case w.K8.PlayerBonus:case w.K8.BankerBonus:case w.K8.EitherPair:case w.K8.PerfectPair:W.set(h,q&&!n&&I);break;case w.K8.SuperSix:W.set(h,q&&this.props.root.settings.noCommission)}}return W}get leftBetSpots(){return this.sideBetSpots(aW,sW)}get rightBetSpots(){return this.sideBetSpots(MW,nn)}get isOnlyMains(){return 0===this.sideBetSpots(aW,sW).length}get isSingleSideBetsRow(){return[...this.leftBetSpots,...this.rightBetSpots].length<=3}get isOnlyPairs(){return 1===this.leftBetSpots.length&&1===this.rightBetSpots.length&&this.leftBetSpots.includes(w.K8.PlayerPair)&&this.rightBetSpots.includes(w.K8.BankerPair)}get hasExtraSideBetsConfigured(){return In.some((W=>this.isSpotConfigured(W)))}get hasExtraSideBetsPlacedBets(){return In.reduce(((W,n)=>W+this.props.root.bets.getBetSpotValue(n)),0)>0}sideBetSpots(W,n){const I=this.props.root.reduction.mainOnlyReduction,h=this.props.root.preferences.isAllSideBetsEnabled,q=this.props.root.settings.isMainBetsOnly;return I||q?HW:(h?n:W).filter((W=>this.isSpotConfigured(W)))}}const kn={amount:0,percentage:0,players:0};class _n{constructor(){this.stats={[w.K8.Player]:kn,[w.K8.Tie]:kn,[w.K8.Banker]:kn},Z.Gn(this,{stats:Z.sH.ref,setStatistics:Z.XI.bound})}setStatistics(W){this.stats=W}}var Nn=I(333634),cn=I(565488),Pn=I(717462);class Sn{constructor(W){this.storageKey=W.key,this.storage=Pn.i3(W.prefix),this.defaultValue=W.defaultValue}set(W){this.storage.setStorageKey(this.storageKey,W)}get(){var W;return null!==(W=this.storage.getStorageKey(this.storageKey))&&void 0!==W?W:this.defaultValue}}var gn,Bn=I(15621),En=I(890614);!function(W){W.IdleRoundsLimitReached="IdleRoundsLimitReached",W.InvalidBetPlaced="InvalidBetPlaced"}(gn||(gn={}));class un{constructor(W){this.props=W,this.status=En.Z.Enabled,this.idleRoundsLeft=null,this.bubbleCount=new Sn({key:"DealNowPromoBubbleImpressions",prefix:Pn.Ib.Neon,defaultValue:0}),this.bubbleCountLimit=2,this.isBubbleOpen=!1,this.isFeatureEnabled=!1,Z.Gn(this,{status:Z.sH,isFeatureEnabled:Z.sH,enableFeature:Z.XI.bound,disableFeature:Z.XI.bound,isBubbleOpen:Z.sH,showBubble:Z.XI.bound,closeBubble:Z.XI.bound,isButtonVisible:Z.EW,isBubbleVisible:Z.EW,updateStatus:Z.XI.bound,validators:Z.EW,incrementBubbleCount:Z.XI.bound,idleRoundsLeft:Z.sH,updateIdleRoundsLeft:Z.XI.bound,isIdleRoundsLimitEnabled:Z.EW}),this.handleBetError=this.handleBetError.bind(this)}get isButtonVisible(){return this.isFeatureEnabled&&this.props.root.gamePhase.isBetsOpen&&!this.props.root.gamePhase.isLongBetting}get isBubbleVisible(){return this.isButtonVisible&&this.isBubbleOpen}closeBubble(){this.isBubbleOpen=!1}disableFeature(){this.isFeatureEnabled=!1}updateStatus(W){const n=this.status;this.status=W,n===En.Z.Disabled&&W!==n&&this.props.root.tooltip.hideDealNowTooltip()}handleDealNowStateMessage(W){this.enableFeature();const n=this.deriveStatusFromDealNowStateMessage(W);this.updateStatus(n),this.updateIdleRoundsLeft(W.idleRoundsLeft),this.isBubbleCountLimitReached()||(this.showBubble(),this.incrementBubbleCount())}syncStatusWithBets(W){const n=this.getReasonToDisableButton(W,this.idleRoundsLeft);let I=this.status;n?I=En.Z.Disabled:this.status===En.Z.Disabled&&(I=En.Z.Enabled),this.updateStatus(I)}showBetErrorTooltips(){const{bets:W,betProcessor:n}=this.props.root,I=W.bets;for(const W of Object.keys(I))n.validate({bet:0,bets:I,betSpot:W,validators:this.validators,orderValidators:this.orderValidators,onError:this.handleBetError})}showTooltip(W){const n=this.getReasonToDisableButton(this.props.root.bets.bets,this.idleRoundsLeft);if(n)switch(n){case gn.IdleRoundsLimitReached:{const n=this.props.root.device.isDesktop?"tooltip.freeGamesLimit":"tooltip.freeGamesLimitMobile";this.props.root.tooltip.showDealNowTooltip(n,W);break}case gn.InvalidBetPlaced:this.showBetErrorTooltips();break;default:Bn.xb(n)}}showBubble(){this.isBubbleOpen=!0}deriveStatusFromDealNowStateMessage({isButtonPressed:W,idleRoundsLeft:n}){return this.status===En.Z.Waiting&&W?En.Z.Completed:this.getReasonToDisableButton(this.props.root.bets.bets,null!=n?n:null)?En.Z.Disabled:En.Z.Enabled}updateIdleRoundsLeft(W){this.idleRoundsLeft=null!=W?W:null}getReasonToDisableButton(W,n){const I=this.isIdleRoundsLimitEnabled&&0===n,h=0===Object.keys(W).length,q=Object.keys(W).length>0,$=q&&this.checkIfHasValidBet(W);return I&&h?gn.IdleRoundsLimitReached:q&&!$?gn.InvalidBetPlaced:null}handleBetError(W,n){const{tooltip:I,sounds:h}=this.props.root;I.showBetSpotTooltip({betSpot:W,text:n.translatedMessage||""}),h.playClickingFailSound()}enableFeature(){this.isFeatureEnabled=!0}get validators(){const{betSpot:W,reduction:n}=this.props.root;return{[Nn.AE.BetCoefficientReduction]:cn.Ar({coefficientReductions:n.coefficientReductions}),[Nn.AE.MinBetSpotValueBet]:cn.YJ({minBetSpotValues:W.minBetSpotValues})}}get orderValidators(){return[Nn.AE.BetCoefficientReduction,Nn.AE.MinBetSpotValueBet]}isBubbleCountLimitReached(){return this.bubbleCount.get()>=this.bubbleCountLimit}incrementBubbleCount(){this.bubbleCount.set(this.bubbleCount.get()+1)}checkIfHasValidBet(W){const{betProcessor:n}=this.props.root;return Object.keys(W).some((I=>{let h=!0;return n.validate({bet:0,bets:W,betSpot:I,validators:this.validators,orderValidators:this.orderValidators,onError:()=>{h=!1}}),h}))}get isIdleRoundsLimitEnabled(){const{freeHandsLimit:W,isPrivateTable:n}=this.props.root.settings;return n&&W>0}}class Yn{constructor(){this.from=void 0,this.to=void 0,this.undoFrom=void 0,this.animationEnabled=!0,this.isDragAllowed=!0,Z.Gn(this,{from:Z.sH,to:Z.sH,undoFrom:Z.sH,animationEnabled:Z.sH,isDragAllowed:Z.sH,updateFrom:Z.XI.bound,updateUndoFrom:Z.XI.bound,setAnimationEnabled:Z.XI.bound,isDragInProgress:Z.EW,setDragAllowed:Z.XI.bound,updateTo:Z.XI.bound})}updateFrom(W){this.from=W,this.updateTo(void 0),this.updateUndoFrom(void 0)}updateTo(W){this.to=W}updateUndoFrom(W){this.undoFrom=W}setAnimationEnabled(W){this.animationEnabled=W}get isDragInProgress(){return!!this.from}setDragAllowed(W){this.isDragAllowed=W}}function fn(W,n,I,h="FlyingChip-move"){return`${h}-${I}-from-${W}-to-${n}-${(new Date).getTime()}`}class rn{constructor(W){this.bodies=[],this.animationEnabled=!0,this.animationPrefix=W,Z.Gn(this,{bodies:Z.sH,animationEnabled:Z.sH,setAnimationEnabled:Z.XI.bound,removeBodies:Z.XI.bound,playHideAnimations:Z.XI.bound,setBodies:Z.XI.bound})}setAnimationEnabled(W){this.animationEnabled=W}removeBodies(W){this.bodies=this.bodies.filter((n=>!W.includes(n.id)))}playHideAnimations(){for(const W of this.bodies)W.options={...W.options,playHideAnimation:!0}}setBodies(W){this.bodies=W}startAnimation(W,n){const I=Date.now(),h=this.bodies,q=[];for(const{from:h,to:$,value:k}of W)for(const W of $){const $={id:fn(h,W,k,this.animationPrefix),from:h,startTime:I,to:W,value:k,options:n};this.onAnimationCreate($),q.push($)}this.setBodies([...h,...q])}onAnimationCreate(W){}}var Kn=I(467309),tn=I(182728);class Xn extends rn{constructor(W){super(),this.props=W,Z.Gn(this,{flyToBetSpotsExactAmounts:Z.XI.bound,flyFromBetSpotsExactAmounts:Z.XI.bound})}flyToBetSpotsExactAmounts(W,n){this.flyChips(W,((W,I)=>({from:null!=n?n:$.iG,to:[W],value:I.toString()})))}flyFromToExactAmount(W,n,I){I&&this.startAnimation([{from:W,to:[n],value:I.toString()}])}flyFromBetSpotsExactAmounts(W,n=$.iG){this.flyChips(W,((W,I)=>({from:W,to:[n],value:Math.abs(I).toString()})))}onAnimationCreate({from:W,to:n}){this.registerCoreElementsIfNeeded(W),this.registerCoreElementsIfNeeded(n)}flyChips(W,n){if(H.A(W))return;const I=[];for(const h of Object.keys(W)){const q=W[h];if(q){const W=n(h,q);I.push(W)}}this.startAnimation(I)}registerCoreElementsIfNeeded(W){const{reference:n}=this.props;switch(W){case $.iG:const W=Kn.CG(this.props.chipstackId);W&&n.common.set($.iG,W);break;case"totalBetAmount":const I=tn.T.totalBetAmount.current;I&&n.common.set("totalBetAmount",I);break;case"balanceLabelKey":const h=tn.T.totalBetAmount.current;h&&n.common.set("balanceLabelKey",h)}}}const Ln=[N.RoadType.Cockroach,N.RoadType.Small,N.RoadType.BigEye,N.RoadType.Big,N.RoadType.Bead];class On extends rn{constructor(){super("flying-probes"),this.isAvailable=!1,Z.Gn(this,{isAvailable:Z.sH,setAvailable:Z.XI})}setAvailable(W){this.isAvailable=W}flyFromPredictionButton(W){if(!this.animationEnabled||!this.isAvailable)return;this.bodies.length>0&&this.setBodies([]);const n=[];Ln.forEach((I=>{n.push({from:W,to:[I],value:I})})),this.startAnimation(n)}}var Zn,dn,mn,Rn;!function(W){W.WinnerBallTo="WinnerBallTo",W.WinnerBallFrom="WinnerBallFrom",W.FlyingRoadsBodyContainer="FlyingRoadsBodyContainer"}(Zn||(Zn={})),function(W){W.FlyingProbesBodyContainer="FlyingProbesBodyContainer"}(dn||(dn={})),function(W){W.Bead="Bead",W.Four="Four"}(mn||(mn={})),function(W){W.WinnerBallFlying="WinnerBallFlying",W.AllRoadsLanded="AllRoadsLanded",W.Idle="Idle"}(Rn||(Rn={}));class en extends rn{constructor(){super("flying-win"),this.status=Rn.Idle,this.setAnimationEnabled(!1),this.flyRoadFromWinnerBall=this.flyRoadFromWinnerBall.bind(this),Z.Gn(this,{status:Z.sH,isWinnerBallFlying:Z.EW,areAllRoadsLanded:Z.EW,flyWinnerBall:Z.XI,reset:Z.XI})}get isWinnerBallFlying(){return this.status===Rn.WinnerBallFlying}get areAllRoadsLanded(){return this.status===Rn.AllRoadsLanded}flyWinnerBall(){this.status=Rn.WinnerBallFlying}reset(){this.status=Rn.Idle,this.bodies=[]}flyRoadFromWinnerBall(W){this.animationEnabled&&this.startAnimation([{from:Zn.WinnerBallTo,to:[W],value:W}])}removeBodies(W){this.status=Rn.AllRoadsLanded,super.removeBodies(W)}}var jn=I(876759);const zn=w.Qc.BetsOpen;class vn{constructor(W){var n;this.props=W,this.gameCycleCompleted=jn.I(),Z.Gn(this,{gameCycleCompleted:Z.sH,setGameCycleCompleted:Z.XI.bound}),this.props.root.disposeBagCallbacks.push((n=this.props.root,()=>{const W=Z.mJ((()=>n.gamePhase.value),(I=>{I===zn&&(n.gameCycle.setGameCycleCompleted(),W())}),{fireImmediately:!0});return W}))}setGameCycleCompleted(){this.gameCycleCompleted=!0}}var Vn=I(228174);function Fn(W,n,I=1.7777777777777777){const h=W/n>I;return{width:h?n*I:W,height:h?n:W/I}}const wn={bottom:3,left:120,right:120,top:90},on={bottom:15.5,left:58,right:58,top:50.5},Dn={bottom:0,left:5,right:5,top:0},xn={bottom:35.5,left:85,right:85,top:50.5};function Gn(W,n,I,h,q=!1){const $=function(W,n,I){return I?xn:W===EW.t.Portrait?Dn:n===BW.OD.Tablet?wn:on}(I,h,q);return Fn(W-($.left+$.right),n-($.top+$.bottom))}const yn={left:0,top:0,width:0,height:0,x:0,y:0};function Cn(W,n=1){if(W){const I=W.getBoundingClientRect();return{left:I.left/n,top:I.top/n,width:I.width/n,height:I.height/n,x:I.x/n,y:I.y/n}}return yn}var bn=I(78350),ln=I(73816),An=I(779204),pn=I(574044);const Un={dangerZone:60,bigDeviceDangerZone:90,buttons:45,predictions:35,buttonsMargin:7};var Qn;!function(W){W.Prive="#001C0D",W.NoCommision="#1F0029",W.Default="#1C0E00"}(Qn||(Qn={}));const Tn={[w.K8.Player]:["#003688","#003688","#003688","#003688"],[w.K8.Banker]:["#710808","#710808","#710808","#710808"],[w.K8.Tie]:["#004C25","#004C25","#004C25","#004C25"]},Hn=[],an={[N.ScorecardThemeNames.WhiteSolid]:{...N.scorecardThemes[N.ScorecardThemeNames.WhiteSolid],stroke:"rgba(179, 179, 179, 0.5)",translate:.1,size:1.1}},Jn=[0,60,13];var sn=I(607439);const Mn=[[w.K8.PlayerPair,w.K8.PerfectPair,w.K8.SuperSix],[w.K8.EitherPair,w.K8.PerfectPair]];class WI{constructor(W){this.props=W,this.gridScale=1,this.freeSpace=0,this.videoOffset=0,Z.Gn(this,{freeSpace:Z.sH,gridScale:Z.sH,setGridScale:Z.XI.bound,setFreeSpace:Z.XI.bound,gridHeightDecrease:Z.EW,gridShiftDown:Z.EW,gridHeight:Z.EW,minMaxGridHeight:Z.EW,gridHeightScaled:Z.EW,extraSpotsHeight:Z.EW,contentOverflowHeight:Z.EW})}get isReady(){return 0!==this.freeSpace}setVideoOffset(W){this.videoOffset=W}get skipAnimations(){return!this.isReady||this.props.root.layout.resizeHappened}get scoresOffset(){return(this.props.root.preferences.swapStatsAndMedia?-2:-5)+this.gridShiftDown+this.contentOverflowHeight+this.gridHeightDecrease*this.gridScale-this.videoFreeSpace}get roadsOffset(){return this.props.root.preferences.swapStatsAndMedia?this.videoFreeSpace-this.props.root.device.dimensions.boxHeight:this.contentOverflowHeight+this.gridShiftDown+this.gridHeightDecrease*this.gridScale}get extraSpotsHeight(){const W=this.props.root.betSpot.availableBetSpots;return Mn.reduce(((n,I)=>I.some((n=>W.get(n)))?n+38:n),0)}get minMaxGridHeight(){return{min:this.extraSpotsHeight+112,max:this.extraSpotsHeight+152}}get gridHeight(){return sn.A(this.freeSpace,this.minMaxGridHeight.min,this.minMaxGridHeight.max)}get gridHeightScaled(){return sn.A(this.freeSpace/this.gridScale,this.minMaxGridHeight.min,this.minMaxGridHeight.max)}get videoFreeSpace(){return 80*this.gridScale}get contentOverflowHeight(){return this.freeSpace-this.gridHeightScaled*this.gridScale}get gridHeightDecrease(){const W=this.gridHeightScaled-this.extraSpotsHeight-80,n=sn.A(-this.contentOverflowHeight,30,W);return this.props.root.gamePhase.isBetsOpen?0:n}get gridShiftDown(){return this.props.root.gamePhase.isBetsOpen?0:sn.A(-this.contentOverflowHeight,25,50)}setFreeSpace(W){this.freeSpace=W}setGridScale(W){this.gridScale=W}}function nI(W){return Z.mJ((()=>({multiplierCardsExist:W.multipliers.multiplierCardsExist,componentLayout:W.layout.componentLayout})),(({multiplierCardsExist:n,componentLayout:I},h)=>{h.componentLayout===I?W.layout.setSkipLogoHiddenAnimation(n===h.multiplierCardsExist):W.layout.setSkipLogoHiddenAnimation(!0)}))}var II,hI,qI,$I;!function(W){W[W.Collapse=0]="Collapse",W[W.Expand=1]="Expand",W[W.Nothing=2]="Nothing"}(II||(II={})),function(W){W.Multiplay="multiplay"}(hI||(hI={})),function(W){W[W.Endless=0]="Endless",W[W.Countdown=1]="Countdown",W[W.Hidden=2]="Hidden"}(qI||(qI={}));class kI extends LW{constructor(W){super(W),this.props=W,this.resizeHappened=!1,this.gameOverlayShiftStandardDevice=15,this.gameOverlayShiftSmallDevice=50,this.topVideoTranslateCoefficient=0,this.collapsedPhases=[w.Qc.BetsClosed],Z.Gn(this,{resizeHappened:Z.sH,availableRoadsHeight:Z.EW,bettingGridScaleFactor:Z.EW,mobileOverlayScale:Z.EW,bettingGridSize:Z.EW,gameOverlayShift:Z.EW,gameOverlayTransformStyle:Z.EW,overlayShift:Z.EW,isBettingDown:Z.EW,gameControlsAllowInteraction:Z.EW,gameControlsAction:Z.EW,bottomPositionStyle:Z.EW,topPosition:Z.EW,videoScaleFactor:Z.EW,videoGradientBackgroundStyle:Z.EW,gameGradientOpacity:Z.EW,setLayoutClassicBackgroundColors:Z.XI,timerStatus:Z.EW,setResizeHappened:Z.XI.bound});const{device:{isPhone:n},ag:I}=this.props.root;n&&I.actions.layout.mobile.setBackgroundColors(this.mobileGradientColors),this.isDesktopClassic&&this.setLayoutClassicBackgroundColors(),this.props.root.disposeBagCallbacks.push(function(W){let n=null;return()=>Z.mJ((()=>W.device.dimensions),(()=>{W.layout.setResizeHappened(!0),n&&(window.clearTimeout(n),n=null),n=window.setTimeout((()=>{W.layout.setResizeHappened(!1)}),200)}),{fireImmediately:!0})}(this.props.root)),this.portrait=function(W){return new WI(W)}(W)}setResizeHappened(W){this.resizeHappened=W}get gameControlsAllowInteraction(){const{gamePhase:{value:W},device:{isPortrait:n}}=this.props.root;return n||!this.blockingInteractionPhases.includes(W)}get blockingInteractionPhases(){return Hn}get availableRoadsHeight(){const{device:W}=this.props.root;if(this.props.root.settings.isBaccaratV4){if(W.isPortrait){const W=this.props.root.device.dimensions,n=.46153846153846156*W.width;return Math.min(n,.25*W.containerHeight)}if(!W.isPortrait&&!W.isDesktop)return 0}if(W.isDesktop||W.isTablet)return 0;const n=this.topPosition||0,{scaledHeight:I}=this.bettingGridScaleFactor,{dangerZone:h,bigDeviceDangerZone:q,buttons:$,predictions:k,buttonsMargin:_}=Un,N=(W.isPortrait?$+_:0)+(W.isNarrowScreenPhonePortrait?q:h),c=pn.q1(),P=W.dimensions.containerHeight-n-I-N-k-c.top-(this.roadsPredictionsContainerBorder?2:0)+this.gameOverlayShift;return Math.max(Math.floor(P),60)}get bettingGridScaleFactor(){return this.getGameElementScaleFactor(this.bettingGridSize)}get mobileOverlayScale(){const{device:W,gamePhase:n}=this.props.root;if(!n.isBetsOpen){if(W.isTablet)return.8;if(W.isPhone&&W.isLandscape)return.6}return 1}get bettingGridSize(){const{device:W,betSpot:n}=this.props.root;let I=200;return W.isPortrait&&(I=n.isOnlyPairs?197:n.isOnlyMains?149:233),{width:W.isPortrait?364:708,height:I}}get gameOverlayShift(){const{device:W}=this.props.root;return W.isPortrait&&!W.isLargeDevice?W.isSmallDevice?this.gameOverlayShiftSmallDevice:this.gameOverlayShiftStandardDevice:0}get isBettingDown(){const{device:{isPortrait:W},gamePhase:{value:n},device:{isLargeDevice:I}}=this.props.root;return n===w.Qc.Resolved&&W&&!I}get overlayShift(){return this.isBettingDown?40:-this.gameOverlayShift}get gameOverlayTransformStyle(){const{ag:W}=this.props.root,n=W.values.chipstackHidden,I=[];return(0!==this.overlayShift&&!n||this.isBettingDown)&&I.push(`translateY(${this.overlayShift}px)`),I.join("")}get topPosition(){const{device:W}=this.props.root,n=W.isBigDeviceDimensions?0:20,I=W.gameContainerDimensions.height*(this.videoScaleFactor<=1.15?1:Math.min(this.videoScaleFactor,1.3)),h=pn.q1();return W.isPortrait?Math.floor(I-n-h.top):void 0}get bottomPositionStyle(){return this.props.root.device.isPortrait?"auto":""}get videoScaleFactor(){const{device:W,settings:n}=this.props.root;return n.isBaccaratV4?W.isLandscape&&W.isPhone?W.dimensions.containerHeight>300?.7:.6:1:n.portraitVideoZoom||n.isCameraOnRails?1:W.isPortrait?W.isBigDeviceDimensions?1.3:1.15:1}get commonVideoGradientStyles(){const{isTablet:W,isPortrait:n,gameContainerDimensions:{height:I}}=this.props.root.device,h=I*(W?.13:n?.35:.5)*this.videoScaleFactor;return{height:h,transform:n?`translateY(${I*this.videoScaleFactor-h/2}px)`:`translateY(${I-h}px)`}}get mobileVideoTranslateHeight(){return 0}get videoGradientContainerStyles(){const{settings:W,preferences:n,device:I}=this.props.root,{isPortrait:h,isPhone:q,gameContainerDimensions:$,dimensions:k}=I;if(W.isBaccaratV4){if(I.isPortrait){const W=n.swapStatsAndMedia?this.portrait.videoOffset:0;return{height:k.containerHeight-k.boxHeight-W+40,transform:`translateY(${k.boxHeight-40}px)`}}const{gameContainerDimensions:{height:W}}=this.props.root.device;if(I.isLandscape&&I.isPhone){const n=W*this.videoScaleFactor;return{height:W-n+40,transform:`${`translateY(${n-40}px)`} scaleX(${this.videoScaleFactor-1e-5})`}}if(I.isTablet){const n=k.containerHeight-.6*W;return{height:n,transform:`translateY(${k.containerHeight-n}px)`}}}if(q&&h&&this.videoScaleFactor<=1.15){const{height:W}=$,n=(1.15-1)*(1-this.topVideoTranslateCoefficient),I=Math.floor(W*(.35+2*n)),h=Math.floor(W*(1+n)-I/2);return{height:+I.toFixed(2),transform:`translateY(${h.toFixed(2)}px)`}}return this.commonVideoGradientStyles}get gameColor(){const{settings:{gameColor:W}}=this.props.root;return W?`#${W}`:this.defaultGameColor}get gameUnderlayColor(){const{settings:{gameUnderlayColor:W}}=this.props.root;return W?`#${W}`:"#151515"}get gameGradientOpacity(){return this.props.root.settings.isBaccaratV4&&this.props.root.device.isPhone?0:1}get isBaccaratV4Roads(){return this.props.root.settings.isBaccaratV4&&!this.isDesktopClassic}get isBaccaratV4RoadsMobile(){return!this.props.root.device.isDesktop&&this.isBaccaratV4Roads}get framesAroundRoadsStyles(){if(this.isBaccaratV4Roads&&this.props.root.preferences.isWhiteScorecardTheme)return{stroke:"rgb(161, 161, 161)",strokeWidth:.08}}get roadsPredictionsContainerBackground(){if(this.isBaccaratV4RoadsMobile)return this.props.root.preferences.isWhiteScorecardTheme?"#fff":"#252525"}get roadsPredictionsContainerBorder(){if(this.isBaccaratV4RoadsMobile&&!this.props.root.preferences.isWhiteScorecardTheme&&!this.props.root.device.isLandscape)return"1px solid #555"}get statisticsContainerHeight(){if(this.props.root.settings.isBaccaratV4&&this.props.root.device.isPhone)return 25*this.props.root.layout.portrait.gridScale}get beadRoadDisplayMode(){const{isLandscape:W,isDesktop:n}=this.props.root.device;return this.isBaccaratV4RoadsMobile&&!n&&W?rW.PhonePortraitLive:super.beadRoadDisplayMode}get roadsDisplayMode(){const{isLandscape:W,isDesktop:n}=this.props.root.device;return this.isBaccaratV4RoadsMobile&&!n&&W?KW.TwoLinesPortrait:super.roadsDisplayMode}getScorecardThemesOverrides(W){if(this.isBaccaratV4RoadsMobile){switch(W){case N.RoadType.Big:return{...an,[N.ScorecardThemeNames.WhiteSolid]:{...an[N.ScorecardThemeNames.WhiteSolid],translate:.12,size:1.16}};case N.RoadType.Bead:return{...an,[N.ScorecardThemeNames.WhiteSolid]:{...an[N.ScorecardThemeNames.WhiteSolid],translate:.12,size:1.165}}}return an}}get videoGradientBackgroundPhoneBaccaratV4(){var W;const{device:{isPortrait:n,isLandscape:I}}=this.props.root,h=Jn,q=bn.E2(this.gameColor),$=q&&null!==(W=bn.K6(q))&&void 0!==W?W:[0,0,0],k=$[2]-h[2],_=k<5?Math.min(h[2]-k,3):h[2];return n?`linear-gradient(${`\n                rgba(${q},0) 0%,\n                rgb(${q}) 40px,\n                hsl(${$[0]} ${h[1]}% ${_}%) 50%\n            `})`:I?`linear-gradient(${`\n                rgba(${q},0) 0%,\n                rgb(${q}) 40px,\n                hsl(${$[0]} 70% ${_}%) 100%\n            `})`:void 0}get videoGradientBackgroundStyle(){const{layout:{videoScaleFactor:W},device:{isPortrait:n,isTablet:I,isPhone:h,dimensions:q},settings:$}=this.props.root;if($.isBaccaratV4){if(h)return this.videoGradientBackgroundPhoneBaccaratV4;if(I){const W=q.containerWidth/q.containerHeight<=1.1?34:40;return`linear-gradient(\n                    180deg, transparent 0%, ${this.gameColor} ${W}%, ${this.gameColor} 100%\n                )`}}const k=bn.E2(this.gameColor),_=bn.E2(this.gameUnderlayColor);return`linear-gradient(${I?`180deg, rgba(${_},0) 0%, rgba(${_},0.75) 48.16%, rgba(${_},1) 100%`:n?W<=1.15?`180deg, rgba(${k},0) 0%, rgba(${k},1) 27%, rgba(${_},1) 100%`:`180deg, rgba(${k},0) 0%, rgba(${k},1) 50%, rgba(${_},0) 100%`:`0deg, rgba(${_},1) 0%, rgba(${_},0) 100%`})`}getGameElementScaleFactor(W,n,I=!1){const{ag:h,device:q}=this.props.root,{width:$,height:k,reverseScale:_=1}=q.gameContainerDimensions,{width:N,height:c}=W;return function(W,n,I,h,q,$,k,_,N,c){const{immersive:P=.375,classic:S=.6,portrait:g=1,landscape:B=1}=c||{},{width:E}=Gn(h,q,n,W,N),u=n===EW.t.Portrait,Y=W===BW.OD.Desktop?h*(I?S:P):E*(u?g:B),{width:f,height:r}=Fn(Y,Number.MAX_VALUE,k/_);return{scale:Vn.GB(f/k,2),scaledWidth:Math.round(f),scaledHeight:Math.round(r),reverseScale:$}}(h.platform,h.values.orientation,this.isDesktopClassic,$,k,_,N,c,I,n)}get gameControlsAction(){const{device:{isPortrait:W},gamePhase:{value:n}}=this.props.root,I=W||n===w.Qc.BetsOpen,h=this.collapsedPhases.includes(n);return I?II.Expand:h?II.Collapse:II.Nothing}setLayoutClassicBackgroundColors(){const{ag:{actions:{layout:W}}}=this.props.root;this.classicGradientColors&&W.classic.setBackgroundColors(this.classicGradientColors)}get isMultiplayAvailable(){const{settings:W,device:n,ag:I}=this.props.root;return W.isMultiplayEnabled&&!n.isTablet&&function(W){var n;if(!window.BUNDLE_MANIFEST)return!1;const I=function(W,n,I=!0,h=window.BUNDLE_MANIFEST){const q=(W.frontend_app||W.game||"lobby").split(",");for(const W of q){const I=W.trim(),q=h.apps[I];if(null==q?void 0:q.assets.length){const W=h.publicPath,$=q.adaptive||("desktop"===n?q.desktop:q.mobile);return{...q,assets:q.assets.map((n=>("number"==typeof n&&(n=h.commonAssets[n]),W+n))),application:I,loader:`${W}${$}`}}}if(I)throw new Error(`Cannot find any of the defined apps: ${q.join(", ")}`)}({game:W},null===(n=window.EVO_LOADER)||void 0===n?void 0:n.deviceInfo.deviceType,!1);return!!(null==I?void 0:I.assets.length)}($.wq)&&ln.Z2(I.values.balanceActiveId)!==An.D.PlayForFun}get omittedOverlayButtons(){const W=[];return this.isMultiplayAvailable||W.push(hI.Multiplay),W}get timerStatus(){const{gamePhase:{isBetsOpen:W,isLongBetting:n},settings:{showCountDownTimer:I}}=this.props.root;return W?n||!I?qI.Endless:qI.Countdown:qI.Hidden}get defaultGameColor(){const{settings:{noCommission:W,isPrivateTable:n}}=this.props.root;return n?Qn.Prive:W?Qn.NoCommision:Qn.Default}get mobileGradientColors(){var W;const{settings:n}=this.props.root,{light:I="0,0,0"}=null!==(W=n.brandedClothGradient)&&void 0!==W?W:{};return{light:I,dark:"0,0,0"}}get classicGradientColors(){const{gameResult:{winner:W},settings:{classicLayoutBackgroundColors:n}}=this.props.root;return W?Tn[W]:n}}function _I(W){return Z.mJ((()=>({isFlyingWinAvailable:W.flyingWin.animationEnabled,winner:W.gameResult.winner})),(({isFlyingWinAvailable:n,winner:I})=>{n&&I&&W.prediction.resetPrediction()}))}function NI(W){return[_I(W)]}class cI{constructor(W){this.props=W,this._ignoredField=null,this.isLoaded=!1,this.preferences={},Z.Gn(this,{isLoaded:Z.sH,preferences:Z.sH,setPreferences:Z.XI,scorecardTheme:Z.EW,isWhiteScorecardTheme:Z.EW,isAllSideBetsEnabled:Z.EW,showOnboardingGameHints:Z.EW,welcomeBubbleShownTimes:Z.EW,bettingGridBubbleShownTimes:Z.EW,volumeMusic:Z.EW}),this.props.root.disposeBag.addDisposable(this.props.root.ag.actions.preferences.values.subscribe(Z.XI((W=>{W.preferencesAreLoaded&&!this.isLoaded&&(this.isLoaded=W.preferencesAreLoaded),this.setPreferences(W)}))))}getValue(W){return this.preferences[W]}updatePreferenceValue(W,n){this.props.root.ag.actions.preferences.setPreferences({key:W,value:n})}setPreferences(W){this.preferences=W}get scorecardTheme(){return this.preferences.background||this.props.root.settings.scorecardTheme}get isWhiteScorecardTheme(){return this.scorecardTheme===N.ScorecardThemeNames.WhiteSolid}get isAllSideBetsEnabled(){return this.preferences.allSideBets}get showOnboardingGameHints(){return this.preferences[M.bR]}get welcomeBubbleShownTimes(){return this.preferences.welcomeBubbleShownTimes}get bettingGridBubbleShownTimes(){return this.preferences.bettingGridBubbleShownTimes}get volumeMusic(){return this.preferences.volumeMusic}}!function(W){W.ShowBettingStats="showBettingStats",W.CameraMode="cameraMode",W.SwapStatsAndMedia="swapStatsAndMedia"}($I||($I={}));class PI extends cI{constructor(W){super(W),this.props=W,Z.Gn(this,{isAllSideBetsCheckboxDisabled:Z.EW,disabledAllSideBetsCheckboxTooltipKey:Z.EW,showBettingStats:Z.EW,swapStatsAndMedia:Z.EW,toggleSwapStatsAndMedia:Z.XI.bound})}get showBettingStats(){return this.preferences.showBettingStats}get cameraMode(){return this.preferences.cameraMode}get isAllSideBetsCheckboxDisabled(){const W=this.props.root.reduction.mainOnlyReduction,n=this.props.root.betSpot.hasExtraSideBetsConfigured,I=this.props.root.betSpot.hasExtraSideBetsPlacedBets;return!n||I||W}get disabledAllSideBetsCheckboxTooltipKey(){return this.props.root.reduction.mainOnlyReduction?"tooltip.sixDecksPlayed":"tooltip.hideSideBets"}get swapStatsAndMedia(){return this.preferences.swapStatsAndMedia}toggleSwapStatsAndMedia(){const W=this.swapStatsAndMedia;this.updatePreferenceValue($I.SwapStatsAndMedia,!W)}}class SI{constructor(){this.requiredBalance=0,this.currency="",Z.Gn(this,{requiredBalance:Z.sH,currency:Z.sH,setSessionInfo:Z.XI.bound})}setSessionInfo(W){this.requiredBalance=W.requiredBalance,this.currency=W.currency}}function gI(W,n){n?(W.ag.actions.chipstack.show(),W.ag.actions.layout.immersive.footer.expand()):(W.ag.actions.chipstack.hide(),W.ag.actions.layout.immersive.footer.collapse())}function BI(W){return Z.mJ((()=>W.gamePhase.isBetsOpen),(n=>{!function(W,n){n||W.tooltip.hideAll()}(W,n)}))}function EI(W){return uI(W,W.gamePhase.isBetsOpen,W.gameResult.winner,W.layout.isDesktopClassic),Z.mJ((()=>({isBetsOpen:W.gamePhase.isBetsOpen,winner:W.gameResult.winner,isDesktopClassic:W.layout.isDesktopClassic})),(({isBetsOpen:n,winner:I,isDesktopClassic:h})=>{uI(W,n,I,h)}))}function uI(W,n,I,h){h&&(n||I)&&W.layout.setLayoutClassicBackgroundColors()}function YI(W){const n=W.ag.actions.statusBar;return Z.mJ((()=>W.statusBar.gamePhaseProps),(W=>{n.setProps(W)}))}function fI(W){return Z.mJ((()=>W.bets.bets),(n=>W.dealNow.syncStatusWithBets(n)))}const rI=[w.Qc.NewGame,w.Qc.BetsOpen,w.Qc.Cancelled],KI=[w.Qc.Dealing,w.Qc.Resolved,w.Qc.BetsClosed];function tI(W){return Z.mJ((()=>W.gamePhase.value),(n=>{!function(W,n){rI.includes(W)?n.actions.balance.resumeBalanceUpdate():KI.includes(W)&&n.actions.balance.pauseBalanceUpdate()}(n,W.ag)}))}var XI,LI,OI,ZI;!function(W){W.BetsOpen="BetsOpen",W.BetsClosed="BetsClosed",W.BetsCancelled="Cancelled"}(XI||(XI={})),function(W){W.Idle="Idle",W.Dealing="Dealing",W.Revealing="Revealing",W.Finished="Finished",W.Cancelled="Cancelled"}(LI||(LI={})),function(W){W.Multi="multi",W.Single="single"}(OI||(OI={})),function(W){W.CameraMode="cameraMode",W.ShowBettingStatistics="showBettingStats"}(ZI||(ZI={}));var dI=I(777506),mI=I(805480);function RI(W){return Z.mJ((()=>({isDesktop:W.device.isDesktop,isDesktopClassic:W.layout.isDesktopClassic,cameraMode:W.preferences.cameraMode,desktopVideoPlaylist:W.settings.desktopVideoPlaylist})),(({isDesktop:n,isDesktopClassic:I,cameraMode:h,desktopVideoPlaylist:q})=>{if(!n)return mI.VideoPlaylist.Default;const $=W=>W.find((W=>!!q[W])),k={[N.LayoutType.Classic]:{[OI.Multi]:$([mI.VideoPlaylist.Classic]),[OI.Single]:$([mI.VideoPlaylist.Classic4,mI.VideoPlaylist.Classic])},[N.LayoutType.ImmersiveV2]:{[OI.Multi]:$([mI.VideoPlaylist.Default]),[OI.Single]:$([mI.VideoPlaylist.Classic3])}}[I?N.LayoutType.Classic:N.LayoutType.ImmersiveV2][h]||mI.VideoPlaylist.Default;W.ag.actions.video.setStream(dI.C(k))}))}var eI=I(266600);class jI{constructor(W){this.props=W,this.payouts={},this.skipAnimation=!1,this.isRedEnvelopeWinAnimation=!1,this.winningBetSpots=[],Z.Gn(this,{payouts:Z.sH,skipAnimation:Z.sH,winningBetSpots:Z.sH,isRedEnvelopeWinAnimation:Z.sH,setWinningBetSpots:Z.XI,handleRedEnvelope:Z.XI,winningRedEnvelopeBetSpots:Z.EW,hasRedEnvelopeWinning:Z.EW,reset:Z.XI,runRedEnvelopeWinAnimation:Z.XI})}setWinningBetSpots(W){this.winningBetSpots=W}runRedEnvelopeWinAnimation(){this.hasRedEnvelopeWinning&&(this.isRedEnvelopeWinAnimation=!0)}reset(){this.payouts={},this.skipAnimation=!1,this.isRedEnvelopeWinAnimation=!1,this.winningBetSpots=[]}get hasRedEnvelopeWinning(){const W=Object.keys(this.payouts);return this.winningBetSpots.some((n=>W.includes(n)))}get winningRedEnvelopeBetSpots(){return this.skipRedEnvelope?[]:this.winningBetSpots.filter((W=>!!this.payouts[W]))}handleRedEnvelope(W,n=!1){if(!this.props.settings.useRedEnvelopePayouts)return;const I=this.getPayoutsFromGameData(W);if(I&&Object.keys(I).length>0&&!eI.A(this.payouts,I)){const h=!(n||!W.playerHand.cards.length&&!W.bankerHand.cards.length);this.setPayouts(I,h)}}getPayoutsFromGameData(W){switch(this.props.settings.redEnvelopeMath){case k.C.V1:return W.redEnvelopePayouts;case k.C.V2:return W.redEnvelopePayouts_v2}}get skipRedEnvelope(){return this.props.settings.isDualPlay}setPayouts(W,n){this.payouts=W,void 0!==n&&(this.skipAnimation=n)}}function zI(W){return Z.mJ((()=>({payouts:W.redEnvelope.payouts})),(({payouts:n})=>{Object.keys(n).length>0&&W.log.clientRedEnvelopePayoutDisplayed(n)}))}function vI(W){return[zI(W)]}var VI=I(246250);const FI={[oW.Banker]:w.K8.Banker,[oW.Player]:w.K8.Player,[oW.BankerBonus]:w.K8.BankerBonus,[oW.BankerPair]:w.K8.BankerPair,[oW.EitherPair]:w.K8.EitherPair,[oW.SuperSix]:w.K8.SuperSix,[oW.PlayerBonus]:w.K8.PlayerBonus,[oW.PlayerPair]:w.K8.PlayerPair,[oW.PerfectPair]:w.K8.PerfectPair,[oW.Tie]:w.K8.Tie},wI={[VI.F.SuperSix]:w.K8.SuperSix,[VI.F.EitherPair]:w.K8.EitherPair,[VI.F.PerfectPair]:w.K8.PerfectPair,[VI.F.BankerBonus]:w.K8.BankerBonus,[VI.F.BankerPair]:w.K8.BankerPair,[VI.F.PlayerBonus]:w.K8.PlayerBonus,[VI.F.PlayerPair]:w.K8.PlayerPair};class oI{constructor(W){this.props=W,this.limitReductions={},this.coefficientReductions={},this.mainOnlyReduction=!1,Z.Gn(this,{limitReductions:Z.sH,coefficientReductions:Z.sH,mainOnlyReduction:Z.sH,setLimitReductions:Z.XI,resetLimitReductions:Z.XI,handleLimitReduction:Z.XI,setIsMainOnlyReduction:Z.XI,handleMainOnlyReduction:Z.XI,setCoefficientReductions:Z.XI,resetCoefficientReductions:Z.XI})}handleLimitReduction(W,n,I){if(!this.props.settings.isLimitReductionConfigured)return;const h=this.props.settings.limitReductionsConfig,q=Object.keys(h);if(q.length){const $=this.findCurrentBetSpotReduction(h,q,FI,W);this.setLimitReductions($),n&&I&&Object.keys(n).some((W=>TW.A(n[W])&&TW.A($[W])&&n[W]!==$[W]))&&I()}}handleCoefficientReduction(W){if(!this.props.settings.isCoefficientReductionConfigured)return;const n=this.props.settings.coefficientReductionsConfig,I=Object.keys(n);if(I.length){const h=this.findCurrentBetSpotReduction(n,I,wI,W);this.setCoefficientReductions(h)}}resetLimitReductions(){this.limitReductions={}}resetCoefficientReductions(){this.coefficientReductions={}}setLimitReductions(W){this.limitReductions=W}setCoefficientReductions(W){this.coefficientReductions=W}setIsMainOnlyReduction(W){this.mainOnlyReduction=W}handleMainOnlyReduction(W){if(this.props.settings.isMainOnlyReductionConfigured){const n=W>=this.props.settings.mainOnlyReductionThreshold;this.mainOnlyReduction!==n&&this.setIsMainOnlyReduction(n)}}getReductedMaxBetSpotValue(W){const{settings:n}=this.props,I=n.getMaxBetSpotValue(W),h=this.limitReductions[W];return h?Math.floor(I*h):I}findCurrentBetSpotReduction(W,n,I,h){return n.reduce(((n,q)=>{const $=W[q],k=Object.keys($).map((W=>parseInt(W,10))).sort(((W,n)=>n-W)),_=k.findIndex((W=>h>=W));if(-1!==_){const W=I[q],h=k[_];n[W]=$[h]}return n}),{})}}class DI extends dW{constructor(){super(...arguments),this.betSpot=new ZW,this.chip=new ZW,this.winAnimation=new ZW,this.winRoads=new ZW,this.roadProbe=new ZW,this.prediction=new ZW,this.roads=new ZW}dispose(){super.dispose(),this.betSpot.dispose(),this.winAnimation.dispose(),this.winRoads.dispose(),this.chip.dispose(),this.roadProbe.dispose(),this.roads.dispose(),this.prediction.dispose()}}var xI=I(712011);const GI=[I(625678).Z.RNGBaccarat];class yI{constructor(W){this.props=W,this.getMinBetSpotValue=this.getMinBetSpotValue.bind(this),this.getMaxBetSpotValue=this.getMaxBetSpotValue.bind(this)}get currencyCode(){return this.props.settings.getCurrencyCode()}get currencySymbol(){return this.props.settings.getCurrencySymbol()}get redEnvelopeMath(){return this.props.settings.redEnvelopeMath}get currencyDecimals(){return this.props.settings.getCurrencyDecimals()}get tableName(){return this.props.settings.getTableName()}get betsClosingTime(){return this.props.settings.betsClosingTime()}get displayTableLimit(){return this.props.settings.displayTableLimit()}get tableLimits(){return this.props.settings.tableLimits}get tiePays9to1(){return this.props.settings.tiePays9to1}get tableLogo(){const W=this.props.settings.tableLogo;return xI.d(W)||""}get excludedBeadRoadModes(){return this.props.settings.excludedBeadRoadModes}get scorecardTheme(){return this.props.settings.scorecardTheme||N.ScorecardThemeNames.WhiteSolid}get isMainBetsOnly(){return this.props.settings.mainBetsOnly}get isRng(){return GI.includes(this.props.settings.getGameType())}get prefixMinMax(){return this.props.settings.getPrefixMinMax()}get postfixMin(){return this.props.settings.getPostfixMin()}get postfixMax(){return this.props.settings.getPostfixMax()}get rawConfig(){return this.props.settings.rawConfig}get isFrozenSprites(){return this.props.settings.isFrozenSprites}get minTableLimit(){const{max:W,min:n}=this.props.settings.tableLimits;return n&&W?n:0}get maxTableLimit(){const{max:W,min:n}=this.props.settings.tableLimits;return W&&n?W:0}get payoutLimit(){return this.props.settings.payoutLimit()||0}getMinBetSpotValue(W){const{rawConfig:n}=this.props.settings;return+n[`${this.prefixMinMax}${a.C(W)}_${this.postfixMin}`]}getMaxBetSpotValue(W){const{rawConfig:n}=this.props.settings;return+n[`${this.prefixMinMax}${a.C(W)}_${this.postfixMax}`]}get useRedEnvelopePayouts(){return this.props.settings.isRedEnvelope}get sessionId(){return this.props.settings.sessionId()}get tableId(){return this.props.settings.getTableId()}get virtualTableId(){return this.props.settings.getVirtualTableId()}get volatility(){return this.props.settings.volatility}get hideYouWinOnLowCelebration(){return this.props.settings.hideYouWinOnLowCelebration()}}var CI=I(523737);const bI=[VI.F.SuperSix,VI.F.PerfectPair,VI.F.BankerBonus,VI.F.PlayerBonus],lI={[xW.BetsOpen]:w.Qc.BetsOpen,[xW.BetsClosed]:w.Qc.BetsClosed,[xW.Dealing]:w.Qc.Dealing,[xW.Resolved]:w.Qc.Resolved};function AI(W){const n={};return Object.keys(W).forEach((I=>{const h=W[I];(function(W){return g(W)&&Object.values(oW).includes(W)})(I)&&g(h)&&h&&(n[I]=h)})),n}function pI(W){const n={};return Object.keys(VI.F).forEach((I=>{const h=VI.F[I],q=W[h];q&&g(q)&&(n[h]=q)})),n}class iI extends yI{constructor(W){super(W),this.props=W}get privateTableWarningMinutes(){return this.props.settings.privateTableWarningMinutes()}get portraitVideoZoom(){return this.props.settings.portraitVideoZoom}get isBaccaratV4(){return this.props.settings.isBaccaratV4}get isCameraOnRails(){return!!this.props.settings.cameraOnRails.address}get noCommission(){return this.props.settings.noCommission()}get isLimitReductionConfigured(){return Object.values(this.props.settings.limitReductions).some(Boolean)}get isCoefficientReductionConfigured(){return!!this.props.settings.coefficientReductions}get limitReductionsConfig(){return Object.keys(this.props.settings.limitReductions).reduce(((W,n)=>{const I=this.props.settings.limitReductions[n];return I&&(W[n]=this.buildReductionLimitMap(I)),W}),{})}get coefficientReductionsConfig(){return(H.A(this.props.settings.coefficientReductions)?bI:Object.keys(this.props.settings.coefficientReductions)).reduce(((W,n)=>{const I=this.getCoefficientReduction(n);return I&&(W[n]=this.buildReductionLimitMap(I)),this.modifyCoefficientReduction(W,n),W}),{})}get cameraOnRails(){return this.props.settings.cameraOnRails}get isMainOnlyReductionConfigured(){return!!this.mainOnlyReductionRawThreshold}get hieroglyphsVisible(){const W=_.lr().iso.toLowerCase();return!this.props.settings.hideHieroglyphsIsoLangs().some((n=>n.toLowerCase()===W))}get mainOnlyReductionThreshold(){return function(W=""){const n=parseInt(W,10);return Number.isNaN(n)?(console.error("Wrong mainOnly reduction configuration, please check cards_out_to_trigger_main_only in table config"),416):n}(this.mainOnlyReductionRawThreshold)}get isDualPlay(){return this.props.settings.dualPlay()}get mainOnlyReductionRawThreshold(){return this.props.settings.mainOnlyReductionRawThreshold}get superSixMainBetsPercentage(){const{parsedTableConfig:W}=this.props.settings;return W.super_six_main_bets_percentage||100}get bonusToMainBetsPercentage(){const{parsedTableConfig:W}=this.props.settings;return W.bonus_main_bets_percentage||100}get isLowRisk(){const{parsedTableConfig:W}=this.props.settings;return!0===W.low_risk}get cardDealDelay(){const{parsedTableConfig:W}=this.props.settings;return W.card_delay||0}get gameResultDelay(){const{parsedTableConfig:W}=this.props.settings;return W.result_delay||0}get cardRevealDelay(){const{parsedTableConfig:W}=this.props.settings;return W.card_reveal||0}get gameColor(){const{rawConfig:W}=this.props.settings;return W.commonGameColor}get gameUnderlayColor(){const{rawConfig:W}=this.props.settings;return W.gameUnderlayColor}get isPrivateTable(){return this.props.settings.isPrivateTable()}get brandedClothGradient(){return this.props.settings.brandedClothGradient()}get betSpotLimits(){return this.props.settings.betSpotLimits}get freeHandsLimit(){return this.props.settings.freeHandsLimit}get dealNowMaxPlayers(){return this.props.settings.dealNowMaxPlayers()}get chipAmounts(){return this.props.settings.getChipAmounts()}get footerGradientHeight(){return this.props.settings.footerGradientHeight||this.isBaccaratV4?33:24.5}get classicLayoutBackgroundColors(){return this.props.settings.classicLayoutBackgroundColors()}get isMultiplayEnabled(){return this.props.settings.isMultiplayEnabled()}get desktopVideoPlaylist(){return this.props.settings.getDesktopVideoPlaylist()}get limitConfig(){return this.props.settings.limitConfig}get allowSpendingLowerThanSmallestChip(){return this.props.settings.allowSpendingLowerThanSmallestChip()}get showCountDownTimer(){return this.props.settings.showCountDownTimer()}get betweenGamesTime(){return this.props.settings.betweenGamesTime}modifyCoefficientReduction(W,n){var I;const h=bI.includes(n);W[n]||!h?W[n]&&h&&!(null===(I=W[n])||void 0===I?void 0:I[0])&&(W[n][0]=1):W[n]={0:1}}getCoefficientReduction(W){const n=this.props.settings.coefficientReductions[W];if(bI.includes(W)&&!n){const n=W===VI.F.SuperSix;return`0:${CI.J0.divide(n?this.superSixMainBetsPercentage:this.bonusToMainBetsPercentage,100)}`}return n}buildReductionLimitMap(W){return W.split(";").filter(Boolean).reduce(((W,n)=>{const[I,h]=n.split(":");return W[I]=Number(h),W}),{})}}var UI;!function(W){W.GameOpenedBetsClosed="gameOpenedBetsClosed",W.GameOpenedBetsOpen="gameOpenedBetsOpen",W.BetsOpen="betsOpen",W.BetsOpenCountDown="betsOpenCountDown",W.BetsClosed="betsClosed",W.GameResult="gameResult",W.GameResultWinTie="gameResultWinTie",W.GameResultWinTieWithEffect="gameResultWinTieWithEffect",W.GameResultWin="gameResultWin",W.GameResultWinWithEffect="gameResultWinWithEffect"}(UI||(UI={}));class QI extends zW{constructor(){super(...arguments),this.winTypeToWinEventArgMap={[tW.R.Small]:0,[tW.R.Medium]:1,[tW.R.Big]:2}}playBetsOpen(){this.fireSoundEvent(UI.BetsOpen)}playBetsOpenCountDown(W){this.fireSoundEvent(UI.BetsOpenCountDown,W)}playBetsClosed(){this.fireSoundEvent(UI.BetsClosed)}playGameOpenedBetsOpen(){this.fireSoundEvent(UI.GameOpenedBetsOpen)}playGameOpenedBetsClosed(){this.fireSoundEvent(UI.GameOpenedBetsClosed)}playGameResult(){this.fireSoundEvent(UI.GameResult)}playGameResultWinTie(W){this.fireSoundEvent(UI.GameResultWinTie,this.winTypeToWinEventArgMap[W])}playGameResultWinTieWithEffect(W){this.fireSoundEvent(UI.GameResultWinTieWithEffect,this.winTypeToWinEventArgMap[W])}playGameResultWin(W){this.fireSoundEvent(UI.GameResultWin,this.winTypeToWinEventArgMap[W])}playGameResultWinWithEffect(W){this.fireSoundEvent(UI.GameResultWinWithEffect,this.winTypeToWinEventArgMap[W])}}function TI(W){let n=!1;return Z.mJ((()=>({gamePhase:W.gamePhase.value,betsOpen:W.gamePhase.isBetsOpen})),(({betsOpen:I})=>{n||(I?W.sounds.playGameOpenedBetsOpen():W.sounds.playGameOpenedBetsClosed(),n=!0)}))}function HI(W){return Z.mJ((()=>W.gamePhase.isBetsOpen),(n=>{n?W.sounds.playBetsOpen():W.sounds.playBetsClosed()}))}function aI(W){return Z.mJ((()=>({winner:W.gameResult.winner,winType:W.gameResult.winType,withEffect:W.gameResult.withEffect})),(({winner:n,winType:I,withEffect:h})=>{if(n){if(I===tW.R.None)return void W.sounds.playGameResult();switch(n){case w.K8.Tie:h?W.sounds.playGameResultWinTieWithEffect(I):W.sounds.playGameResultWinTie(I);break;case w.K8.Player:case w.K8.Banker:h?W.sounds.playGameResultWinWithEffect(I):W.sounds.playGameResultWin(I)}}}))}function JI(W){return Z.mJ((()=>W.timer.timeRemaining),(n=>{W.sounds.playBetsOpenCountDown(n)}))}function sI(W){return[JI(W),TI(W),HI(W),aI(W)]}var MI=I(587698);const Wh=()=>({color:"grey",text:_.Tl("trafficlight.waitForNextGame2")}),nh={[w.K8.Banker]:{type:"gradient",stroke:"#FF0000",gradientStart:"#FF0000",gradientEnd:"#720000"},[w.K8.Player]:{type:"gradient",stroke:"#0067FF",gradientStart:"#0067FF",gradientEnd:"#002E72"},[w.K8.Tie]:{type:"gradient",stroke:"#3FA713",gradientStart:"#3FA713",gradientEnd:"#345211"}};class Ih{constructor(W){this.props=W,Z.Gn(this,{gamePhaseProps:Z.EW})}get colors(){return nh}get gamePhaseProps(){switch(this.props.root.gamePhase.value){case w.Qc.Cancelled:return this.gameCancelledProps;case w.Qc.Dealing:return this.dealingProps;case w.Qc.Revealing:return this.revealingProps;case w.Qc.BetsClosed:return this.betsClosedProps;case w.Qc.Resolved:return this.gameResolvedProps;case w.Qc.BetsOpen:return this.betsOpenProps;default:return Wh()}}get gameCancelledProps(){return{color:"grey",text:_.Tl("gamecancelled")}}get revealingProps(){return{color:"grey",text:this.props.root.ag.balanceTotalBet?_.Tl("trafficlight.revealing"):_.Tl("trafficlight.waitForNextGame2")}}get dealingProps(){return{color:"grey",text:this.props.root.ag.balanceTotalBet?_.Tl("dealing"):_.Tl("trafficlight.waitForNextGame2")}}get betsOpenProps(){const{timer:{timeRemaining:W},settings:{betsClosingTime:n,isDualPlay:I,isPrivateTable:h,showCountDownTimer:q},gamePhase:{isLongBetting:$}}=this.props.root,k=$||h||!q?void 0:{startTime:Date.now(),secondsInitial:W,animationStartValue:n/1e3};return{color:"green",text:_.Tl("placebets"),animate:!I,autoCountdown:k}}get betsClosedProps(){const{bets:{status:W,rejectedBets:n},ag:{values:{currencySymbol:I},balanceTotalBet:h}}=this.props.root;switch(W){case w.uB.Accepted:return n?{color:"grey",text:_.Tl("trafficlight.acceptedAmount.new",{amount:MI.ej(h,{currencySymbol:I})})}:{color:"grey",text:_.Tl("betsaccepted")};case w.uB.Rejected:return{color:"red",text:_.Tl("betsrejected")};default:return{color:"red",text:_.Tl("nomorebets")}}}get gameResolvedProps(){const{gameResult:{winner:W},layout:{isDesktopClassic:n}}=this.props.root;if(!W)return Wh();const I=W===w.K8.Tie?W:`${W}handwins`;return{text:_.Tl(I.toLowerCase()),...n?{customColors:this.colors[W]}:{color:"gold"}}}}class hh{constructor(){this.timeRemaining=0,this.initialSeconds=0,this.skipHandling=!1,Z.Gn(this,{timeRemaining:Z.sH,initialSeconds:Z.sH,skipHandling:Z.sH,setSkipHandling:Z.XI.bound,setTimeRemaining:Z.XI,runTimer:Z.XI})}setTimeRemaining(W,n,I=!1){this.timeRemaining=Math.ceil(W/1e3),this.initialSeconds=Math.ceil(n/1e3),this.stopTimer(),I&&this.runTimer(Date.now()+W)}dispose(){this.stopTimer()}stopTimer(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}setSkipHandling(W){this.skipHandling=W}runTimer(W){const n=W-Date.now(),I=Math.ceil(n/1e3),h=n%1e3||1e3;this.timeRemaining=I,I>0&&(this.timeoutId=setTimeout((()=>{this.runTimer(W)}),h))}}function qh(W){const{timer:n,ag:I,settings:h,layout:q}=W,{decisionTimer:$}=I.actions;return $.setValueAnimationStart(W.settings.betsClosingTime/1e3),Z.mJ((()=>({timerStatus:q.timerStatus,initialSeconds:n.initialSeconds,timeRemaining:n.timeRemaining,isPrivateTable:h.isPrivateTable,skipHandling:n.skipHandling})),(({timerStatus:W,initialSeconds:n,timeRemaining:I,isPrivateTable:h,skipHandling:q})=>{h||q||function(W,n,I,h){switch(W.setStartTime(Date.now()),W.show(),n){case qI.Countdown:W.setIsCountdown(!0),W.setCountdownFromSeconds(I),W.setStartTime(Date.now()-1e3*(I-h));break;case qI.Endless:W.setIsCountdown(!1),W.setCountdownFromSeconds(1/0);break;case qI.Hidden:W.hide()}}($,W,n,I)}))}var $h;!function(W){W.BetSpotValidation="BetSpotValidation",W.DealNowButton="DealNowTooltipId",W.RoadGrid="RoadGrid",W.BeadRoadGrid="BeadRoadGrid"}($h||($h={}));class kh{constructor(W){this.props=W,this.hideByType=this.hideByType.bind(this)}showBetSpotTooltip(W){const{betSpot:n,text:I}=W,{ag:h,reference:q}=this.props,$=q.chip.get(n);if(!$)return;const k=h.values.gameDimensions,_=$.getBoundingClientRect(),N=`${$h.BetSpotValidation}-${n}`;this.show({type:N,label:I,top:Math.round(_.top+_.height/10-k.top),left:Math.round(_.left+_.width/2-k.left),dataType:N})}showDealNowTooltip(W,n){const I=this.props.ag.values.gameDimensions,h=I.reverseScale||1;this.show({type:$h.DealNowButton,left:Math.round(n.left+n.width/2-I.left),labelTranslationId:W,top:Math.round(n.top+6*h-I.top),dataType:$h.DealNowButton})}hideDealNowTooltip(){this.hideByType($h.DealNowButton)}showRoadGridTooltip(W,n){this.showGridTooltip(W,n,$h.RoadGrid)}showBeadRoadGridTooltip(W,n){this.showGridTooltip(W,n,$h.BeadRoadGrid)}hideRoadGridTooltip(){this.hideByType($h.RoadGrid)}hideBeadRoadGridTooltip(){this.hideByType($h.BeadRoadGrid)}hideAll(){this.props.ag.actions.tooltips.hideAll()}hideByType(W){this.props.ag.actions.tooltips.hideByType(W)}show(W){this.props.ag.actions.tooltips.add(W)}showGridTooltip(W,n,I){const{gameDimensions:h}=this.props.ag.values,q=h.reverseScale||1;this.hideAll(),this.show({labelTranslationId:W,type:I,left:Math.round(n.left+n.width/2-h.left),top:Math.round(n.top+6*q-h.top),hasAnchor:!0,dataType:I})}}class _h extends vW{constructor(W){super(W),this.settings=function(W){return new iI(W)}({settings:W.settings}),this.preferences=function(W){return new PI(W)}({root:this}),this.reduction=function(W){return new oI(W)}({settings:this.settings}),this.layout=function(W){return new kI(W)}({root:this}),this.timer=new hh,this.betSpot=function(W){return new $n(W)}({root:this}),this.bettingStatistics=new _n,this.private=new SI,this.log=function(W){return new GW(W)}({root:this}),this.redEnvelope=(W=>new jI(W))({settings:this.settings}),this.betProcessor=pW.P({root:this}),this.reference=new DI,this.dealNow=function(W){return new un(W)}({root:this}),this.tooltip=function(W){return new kh(W)}({ag:this.ag,reference:this.reference}),this.flyingChips=function(W){return new Xn(W)}({reference:this.reference}),this.draggableChip=new Yn,this.balance=function(W){return new lW(W)}({root:this}),this.statusBar=function(W){return new Ih(W)}({root:this}),this.sounds=new QI,this.gameCycle=function(W){return new vn(W)}({root:this}),this.flyingWin=new en,this.flyingProbes=new On,this.settings.isBaccaratV4&&(this.device.isDesktop||this.flyingWin.setAnimationEnabled(!0),this.flyingProbes.setAvailable(!0)),this.settings.isCameraOnRails&&(this.videoZoom=function(W){return new yW(W)}({root:this}))}reset(){this.gameResult.reset(),this.flyingWin.reset(),this.bets.reset()}initDisposables(W){var n;super.initDisposables(W),this.disposeBag.addDisposables([this.timer,qh(this),(n=this,gI(n,n.gamePhase.isBetsOpen),Z.mJ((()=>n.gamePhase.isBetsOpen),(W=>gI(n,W)))),BI(this),AW(this),EI(this),YI(this),iW(this),UW(this),QW(this),fI(this),tI(this),RI(this),...sI(this),...vI(this),...NI(this),this.ag.actions.betting.undo.subscribe(this.betProcessor.undo.bind(this)),this.ag.actions.betting.undoAll.subscribe(this.betProcessor.undoAll.bind(this)),this.ag.actions.betting.repeat.subscribe(this.betProcessor.repeat.bind(this)),this.ag.actions.betting.double.subscribe(this.betProcessor.double.bind(this))])}}class Nh extends rn{constructor(W){super("FlyingFee-move"),this.props=W}flyFromBetSpot(W,n,I){if(!this.animationEnabled)return;const{fee:h}=this.props;this.startAnimation([{from:W,to:[I],value:h.getFeeAmount(n).toString()}])}flyFromBetSpots(W,n){if(!this.animationEnabled)return;const I=Object.keys(W);if(I.length){const{fee:h}=this.props,q=[];for(const $ of I){const I=W[$];I&&q.push({from:$,to:[n],value:h.getFeeAmount(I).toString()})}this.startAnimation(q)}}}function ch(W){return Z.mJ((()=>W.ag.currentLayout),(()=>{W.flyingFee.playHideAnimations()}))}function Ph(W){return Z.mJ((()=>({videoScaleFactor:W.layout.videoScaleFactor,isBaccaratV4:W.settings.isBaccaratV4})),(({videoScaleFactor:n,isBaccaratV4:I})=>{n<1&&I&&W.ag.actions.video.mobile.disableScaleAnimation(),W.ag.actions.video.mobile.setScale(n)}),{fireImmediately:!0})}function Sh(W){return Z.mJ((()=>W.layout.mobileVideoTranslateHeight),(n=>{W.ag.actions.video.mobile.setTranslate(`0px, ${n}px`)}),{fireImmediately:!0})}var gh,Bh,Eh=I(660622);!function(W){W.GameState="baccarat.gameState",W.BettingStatistics="baccarat.bettingStats",W.PotentialMultipliers="baccarat.potentialMultipliers",W.CardDealt="baccarat.cardDealt",W.CardsRevealed="baccarat.cardsRevealed",W.CardsCleared="baccarat.cardsCleared",W.CardsDealSoon="baccarat.virtual.CARDS_WILL_DEAL_SOON",W.TableState="baccarat.tableState",W.NewGame="baccarat.newGame",W.Winners="baccarat.gameWinners",W.Resolved="baccarat.resolved",W.PrivateTablesSessionInfo="privateTables.sessionInfo",W.PrivateTablesIdleWarning="privateTables.idleWarning",W.PrivateTablesProlongStatus="privateTables.prolongStatus",W.EncodedShoeState="baccarat.encodedShoeState",W.PlayerBettingState="baccarat.playerBettingState",W.DealNowState="baccarat.dealNowState",W.BetResponse="baccarat.playerBetResponse"}(gh||(gh={})),function(W){W.Bet="baccarat.playerBetRequest",W.DealNow="baccarat.dealNow"}(Bh||(Bh={}));const uh=new Set([gh.TableState,gh.BettingStatistics,gh.DealNowState,gh.PrivateTablesIdleWarning,gh.PrivateTablesSessionInfo,gh.PrivateTablesProlongStatus,Eh.G.Subscribe,Eh.G.Pong]),Yh=new Set([w.Qc.NewGame,w.Qc.Resolved]),fh=new Set([w.uB.Accepted,w.uB.Rejected]),rh=new Set([gh.Resolved,gh.EncodedShoeState,gh.Winners]),Kh=function(){let W=0;return(n,I)=>{const h=n.type,q=n.timestamp?+n.timestamp:0,{cardDealDelay:$,cardRevealDelay:k,gameResultDelay:_}=I.settings;if(h===gh.CardDealt){const n=q+$;return W=n,n}return h===gh.CardsRevealed?Math.max(W,q+k):rh.has(h)&&!Yh.has(I.gamePhase.value)?q+Math.max($,_):q}}();var th,Xh,Lh=I(301417);class Oh{constructor(W){this.isConnected=!1,this.transport=W.transport,Z.Gn(this,{isConnected:Z.sH,setIsConnected:Z.XI,sendMessage:Z.XI})}addHandler(W){this.transport.incomingMessages.onValue(W)}sendMessage(W){this.transport.sendStandardMessage(null,W).catch((()=>{}))}setIsConnected(W){this.isConnected=W}}class Zh extends Oh{constructor(W){super(W)}sendMessage(W){super.sendMessage(W)}}!function(W){W.Lightning="Lightning"}(th||(th={})),function(W){W.Betting="Betting",W.Accepted="Accepted",W.BetsAccepted="Accepted",W.Rejected="Rejected",W.BetsRejected="Rejected",W.Cancelled="Cancelled",W.Idle="Idle"}(Xh||(Xh={}));var dh=I(294851),mh=I(885537);const Rh=({playerHand:W,bankerHand:n})=>({[PW.U.Player]:W,[PW.U.Banker]:n});function eh(W,n=!1){n||W.bets.reset(),W.flyingWin.reset(),W.gameResult.reset(),W.cards.resetHands(),W.gamePhase.setPhase(w.Qc.NewGame),W.redEnvelope.reset(),W.reduction.resetLimitReductions(),W.reduction.resetCoefficientReductions()}function jh(W,n){W.gameNumber&&n.ag.actions.setGameTime(W.gameNumber),n.ag.actions.setGameRoundId(W.gameId)}function zh(W,n,I){const{betting:h,timeRemaining:q,timeInitial:$}=W;if(h===XI.BetsOpen&&q){const W=Math.max(0,q-I);n.timer.setTimeRemaining(W,$||q,!0)}}function vh(W,n){const{betting:I,dealing:h}=W;I===XI.BetsOpen?(n.gamePhase.setIsLongBetting(h===LI.Dealing),n.gamePhase.setPhase(w.Qc.BetsOpen)):I===XI.BetsClosed&&h===LI.Idle?(n.ag.actions.winnersList.hide(),n.gamePhase.setPhase(w.Qc.BetsClosed),n.dealNow.disableFeature()):h===LI.Dealing?n.gamePhase.setPhase(w.Qc.Dealing):h===LI.Revealing?n.gamePhase.setPhase(w.Qc.Revealing):h===LI.Cancelled&&(n.gamePhase.setPhase(w.Qc.Cancelled),n.timer.setTimeRemaining(0,0),n.cards.resetHands(),n.ag.actions.toasts.show({type:dh.C.ErrorMessageToast,props:{title:_.Tl(mh.Y6),reason:mh.y$(mh.D2),description:_.Tl(mh.D2)}}),n.dealNow.disableFeature())}function Vh(W){return W?Object.keys(W).reduce(((n,I)=>(function(W){return W in w.K8}(I)&&(n[I]=W[I]),n)),{}):{}}function Fh(W,n,I){(function(W,n,I=""){const{status:h,balance:q,balances:$,rejectedBets:k,history:N,bets:c,repeat:P,log:S}=n,g=n.totalAmount||0,B=W.ag.values.balanceTotalBet||0,E=h===Xh.Cancelled;if(g===B||E||(W.ag.actions.balance.setTotalBet(g),h!==Xh.Betting&&0!==g||W.ag.actions.balance.reserveBet(g)),h===Xh.BetsAccepted&&(W.ag.actions.balance.reserveBet(0),(null==$?void 0:$.length)?W.ag.actions.balance.updateFromPayload({balances:$},I):"number"==typeof q&&W.ag.actions.balance.updateFromPayload({balance:q},I),k&&function(W,n){for(const I of Object.keys(n)){const h=n[I];if(h){const n=+h.error;W.ag.actions.toasts.show({type:dh.C.ErrorMessageToast,props:{title:_.Tl("betsPartiallyAccepted"),description:_.Tl("trafficlight.acceptedAmount.new",{amount:MI.ej(W.ag.values.balanceTotalBet,{currencySymbol:W.ag.values.currencySymbol})}),reason:mh.y$(`error_${n}`)}});break}}}(W,k)),h===Xh.BetsRejected&&W.ag.actions.balance.reserveBet(0),E){const n=B,h=W.ag.availableBalance+n,q=W.ag.values.balanceReservedTip;W.ag.actions.balance.reserveBet(0),W.ag.actions.balance.setTotalBet(0),W.ag.actions.balance.updateFromPayload({balance:h+q},I)}h===Xh.BetsRejected&&k&&function(W,n){for(const I of Object.keys(n)){const h=n[I];if(h){const n=+h.error;mh.O4[n]&&W.ag.actions.handleError({errorId:`error_${n}`});break}}}(W,k),[Xh.BetsRejected,Xh.BetsAccepted].includes(h)&&k&&function(W,n){const I={},h=W.bets.rejectedBets;for(const W of Object.keys(n)){const q=n[W],$=null==h?void 0:h[W];q&&!$&&(I[W]=q.amount)}H.A(I)||W.flyingChips.flyFromBetSpotsExactAmounts(I)}(W,k),W.log.clientBetAcceptedRejected({...n,...S}),W.bets.updateBetsState({history:N,bets:E?{}:c,status:h,rejectedBets:k,repeat:P})})(W,function(W){const n=W.canRepeat.AllBets&&Object.keys(W.lastGameChips).length;return{history:W.chipHistory?W.chipHistory.map(Vh).reverse():[],balance:ln.l2(W),balances:W.balances,originalBets:W.originalBets,acceptedBets:Object.keys(W.acceptedBets).length?W.acceptedBets:void 0,rejectedBets:Object.keys(W.rejectedBets).length?W.rejectedBets:void 0,totalAmount:W.totalAmount,bets:Vh(W.currentChips),status:W.status||Xh.Idle,repeat:n?Vh(W.lastGameChips):void 0,log:{repeat:n?W.lastGameChips:void 0}}}(n),I)}var wh=I(947548),oh=I(671984);function Dh(W={}){return Object.keys(W).reduce(((n,I)=>{const h=W[I];return void 0!==h?n+(h.payoff||0):n}),0)}function xh(W={}){return Object.values(W).reduce(((W,n)=>W+((null==n?void 0:n.amount)||0)),0)}var Gh,yh=I(969695);function Ch(W,n,I){var h;switch(W.type){case Eh.G.Subscribe:n.ag.actions.video.sync.skipPastEvents(null!==(h=W.timestamp)&&void 0!==h?h:0),n.reset();break;case gh.NewGame:!function(W,n){eh(n),jh(W.payload,n);const{shoeCardsOut:I}=W.payload;n.reduction.handleLimitReduction(I,n.reduction.limitReductions,(()=>{n.ag.actions.toasts.show({type:dh.C.GenericToast,props:{title:_.Tl("limitsChanged_uppercase"),description:_.Tl("openLimits")}})})),n.reduction.handleCoefficientReduction(I),n.reduction.handleMainOnlyReduction(I)}(W,n);break;case gh.TableState:!function(W,n,I){var h;eh(n,(null===(h=W.payload.currentGame)||void 0===h?void 0:h.dealing)===LI.Dealing),W.payload.dealer&&n.ag.actions.setDealer(W.payload.dealer.screenName);const q=W.payload.currentGame;if(!q)return;jh(q,n);const $=Rh(q.gameData);n.cards.setHands($),vh(q,n),zh(q,n,I);const{shoeCardsOut:k}=W.payload;n.reduction.handleLimitReduction(k),n.reduction.handleCoefficientReduction(k),n.reduction.handleMainOnlyReduction(k),n.redEnvelope.handleRedEnvelope(q.gameData)}(W,n,I);break;case gh.GameState:!function(W,n,I){const{payload:h}=W;if(vh(h,n),zh(h,n,I),n.cards.cleared){const{playerHand:I,bankerHand:h}=W.payload.gameData;n.cards.setHands({[PW.U.Player]:I,[PW.U.Banker]:h}),n.cards.setCleared(!1)}n.redEnvelope.handleRedEnvelope(h.gameData,!0)}(W,n,I);break;case gh.CardDealt:!function(W,n){n.cards.setDealSoon(!1);const I=Rh(W);n.cards.setHands(I)}(W.payload.gameData,n);break;case gh.CardsRevealed:!function(W,n){const I=Rh(W);n.cards.setHands(I)}(W.payload.gameData,n);break;case gh.CardsCleared:!function(W){W.cards.resetHands(),W.cards.setDealSoon(!1),W.cards.setCleared(!0)}(n);break;case gh.CardsDealSoon:!function(W){W.cards.setDealSoon(!0)}(n);break;case gh.Winners:!function(W,n){const I=yh.kP({type:yh.Jh.Baccarat,winners:W.payload.winners});W.payload.totalWinners&&W.payload.totalAmount&&I.push(yh.Ko(W.payload.totalWinners,W.payload.totalAmount)),n.ag.actions.winnersList.setWinners(I)}(W,n);break;case gh.Resolved:(function(W,n){const{payload:I,id:h}=W;var q,k;n.gamePhase.setPhase(w.Qc.Resolved),n.ag.actions.lifecycle.resolveGame(),I.bets&&Fh(n,(q=I.bets,{...q,currentChips:(k=q.acceptedBets,Object.keys(k).reduce(((W,n)=>{const I=k[n];return void 0!==I&&(W[n]=I.payoff),W}),{}))}),h);const _=function(W){var n,I;const h=(null===(n=W.bets)||void 0===n?void 0:n.acceptedBets)||{};return{winner:W.result.winner||"",winningBetSpots:W.winningSpots||[],amount:Dh(h),acceptedBetsAmount:xh(h),winType:(null===(I=W.bets)||void 0===I?void 0:I.winType)||tW.R.None,betsAcceptedBetSpots:Object.keys(h)}}(I);_.winningBetSpots.length>0&&_.amount>0&&setTimeout((()=>{const W=_.winningBetSpots.reduce(((W,I)=>(W[I]=n.bets.getBetSpotValue(I),W)),{}),I=n.ag.values.chipstackHidden?"balanceLabelKey":$.iG;n.flyingChips.flyFromBetSpotsExactAmounts(W,I),n.bets.reset(),n.sounds.playChipStackSound(),n.ag.actions.balance.reserveBet(0),n.ag.actions.balance.setTotalBet(0)}),oh.w.winFlybackDelay),Z.h5((()=>{var I;n.gameResult.setGameResultData(_),n.gameResult.setWithEffect(null!==(I=W.payload.withLightning)&&void 0!==I&&I)}));const N=function(W){var n;return Object.keys((null===(n=W.bets)||void 0===n?void 0:n.acceptedBets)||{}).filter((n=>W.winningSpots.includes(n)))}(I);n.redEnvelope.setWinningBetSpots(N)})(W,n);break;case gh.PrivateTablesSessionInfo:!function(W,n){const{requiredBalance:I,currency:h}=W.payload;n.private.setSessionInfo({requiredBalance:I,currency:h})}(W,n);break;case gh.PrivateTablesIdleWarning:!function(W){W.log.clientReceivedPrivateTableIdleWarning(),W.ag.actions.popups.open(wh.cB({minutes:W.settings.privateTableWarningMinutes,callback:()=>W.log.clientPressedPrivateTableIdleWarningOk()}))}(n);break;case gh.PrivateTablesProlongStatus:!function(W,n){n.ag.actions.popups.open(wh.W6({message:_.Tl("privateTable.sessionProlonged",{minutes:W.payload.occupiedForMinutes}),buttonIds:["Ok"]}))}(W,n);break;case gh.BettingStatistics:!function(W,n){n.bettingStatistics.setStatistics(W.payload.stats)}(W,n);break;case gh.EncodedShoeState:!function(W,n){n.shoe.setShoeData(W.payload)}(W,n);break;case gh.PlayerBettingState:!function(W,n){n.gamePhase.value!==w.Qc.Resolved&&Fh(n,W.payload.state,W.id)}(W,n);break;case gh.DealNowState:!function(W,n){n.dealNow.handleDealNowStateMessage({isButtonPressed:W.payload.buttonPressed,idleRoundsLeft:W.payload.privateTableDealNowIdleRoundsLeft})}(W,n);break;case gh.BetResponse:n.log.clientBetResponse(W.payload)}}function bh(W,n,I){var h;switch(W.type){case gh.CardsCleared:Ch(W,n,I),n.multipliers.reset();break;case gh.TableState:Ch(W,n,I),function(W){return W.type===gh.TableState}(W)&&((null===(h=W.payload.currentGame)||void 0===h?void 0:h.gameData.multipliers)?n.multipliers.setMultipliers(W.payload.currentGame.gameData.multipliers):(n.multipliers.setMultipliers([]),n.multipliers.setPotentialMultipliers({})));break;case gh.PotentialMultipliers:n.multipliers.setPotentialMultipliers(W.payload.multipliers);break;case gh.GameState:case gh.CardsRevealed:case gh.CardDealt:Ch(W,n,I),function(W){return W.type===gh.GameState||W.type===gh.CardsRevealed||W.type===gh.CardDealt}(W)&&(W.payload.gameData.multipliers?n.multipliers.setMultipliers(W.payload.gameData.multipliers):(n.multipliers.setMultipliers([]),n.multipliers.setPotentialMultipliers({}))),function(W){return W.type===gh.GameState&&W.payload.dealing===th.Lightning}(W)&&n.gamePhase.setPhase(Gh.Lightning);break;case gh.Resolved:Ch(W,n,I),n.multipliers.calculateWinTotalMultiplier(n.bets.bets);break;case gh.NewGame:Ch(W,n,I),n.multipliers.setPotentialMultipliers({});break;default:Ch(W,n,I)}}function lh(){const W=function(){let W=!1;return n=>{if(uh.has(n.type))return!1;if(n.type===gh.GameState){const{betting:W,dealing:I}=n.payload;if(W===XI.BetsClosed&&I===LI.Idle)return!1;if(W===XI.BetsCancelled&&I===LI.Cancelled)return!1}if(n.type===gh.PlayerBettingState){const{status:W}=n.payload.state;return!n.payload.restore&&!fh.has(W)}return!(!W&&n.type===gh.EncodedShoeState&&(W=!0,1))}}();return n=>n.type===gh.PotentialMultipliers?!n.payload.restore:W(n)}function Ah(W,n){const I=W.type,h=W.timestamp?+W.timestamp:0,q=n.settings.cardDealDelay;return I===gh.PotentialMultipliers?h+q:Kh(W,n)}!function(W){W.Lightning="Lightning"}(Gh||(Gh={}));class ph extends lW{constructor(W){super(W),this.props=W}get isBalanceLowerMinBet(){const{betSpot:W,ag:n,fee:I}=this.props.root,h=n.availableBalance,q=W.minBetSpotValue;return h<I.getAmountWithFee(q)}}var ih,Uh,Qh,Th=I(781555);!function(W){W.MultiplierBubbleShownTimes="multiplierBubbleShownTimes"}(ih||(ih={})),function(W){W.MultiplierCards="MultiplierCards"}(Uh||(Uh={})),function(W){W.MultipliersCards="multipliersCards"}(Qh||(Qh={}));const Hh={[Uh.MultiplierCards]:ih.MultiplierBubbleShownTimes},ah=[[Uh.MultiplierCards,ih.MultiplierBubbleShownTimes]];class Jh extends cW{constructor(W){super(W),this.props=W,Z.Gn(this,{isMultiplierBubbleVisible:Z.EW})}get isMultiplierBubbleVisible(){const{preferences:W,layout:n,gameCycle:I}=this.props.root,{showOnboardingGameHints:h,multiplierBubbleShownTimes:q}=W;return I.gameCycleCompleted&&n.isMultipliersCardsVisible&&!!this.multipliersCardsRef&&q<this.bubbles[Uh.MultiplierCards].timesToShow&&h}get multipliersCardsRef(){return this.props.root.reference.bubble.all[Qh.MultipliersCards]}getRef(W){return W===Uh.MultiplierCards?this.multipliersCardsRef:super.getRef(W)}get bubblePreferences(){return Hh}get preferencesOnGameHintChange(){return ah}get bubbles(){return{[Uh.MultiplierCards]:{id:Uh.MultiplierCards,contentTranslationKey:"xtreme.onboarding.bubbleMultiplier",withArrow:!0,layoutPosition:{desktop:{anchorPosition:"TopCenter",bubblePosition:"TopCenter",bubbleWidth:qW,offsetBubble:WW._m(3)},desktopClassic:{anchorPosition:"BottomCenter",bubblePosition:"BottomCenter",bubbleWidth:qW,offsetBubble:WW._m(3*1.2)},landscape:{anchorPosition:"TopCenter",bubblePosition:"TopCenter",bubbleWidth:qW},portrait:{anchorPosition:"TopCenter",bubblePosition:"TopCenter",bubbleWidth:$W}},timesToShow:2}}}}var sh=I(941691),Mh=I(795192);class Wq{constructor(W){this.props=W,this.value=0,this.previousValue=0,this.percentage=W.percentage,Z.Gn(this,{value:Z.sH,set:Z.XI.bound,getAmountWithFee:Z.XI.bound,getAmountWithoutFee:Z.XI.bound})}set(W){const n=this.value;this.value=W,n!==this.previousValue&&(this.previousValue=n)}getFeeAmount(W){return Mh.eS(W*this.percentage/100,3)}getAmountWithFee(W){return Mh.eS(W*(100+this.percentage)/100,3)}getAmountWithoutFee(W){return Mh.yv(100*W/(100+this.percentage))}}class nq extends Wq{constructor(W){super(W),this.props=W,Z.Gn(this,{tooltipText:Z.EW})}get tooltipText(){return this.value>0?{key:"tooltip.feeAdded",mappings:{percentage:this.percentage}}:this.props.root.device.isPhone?{key:"onboarding.feeAddedShort",mappings:{percentage:this.percentage}}:{key:"onboarding.feeAdded",mappings:{percentage:this.percentage}}}}class Iq extends nq{constructor(W){super(W),this.props=W,Z.Gn(this,{animation:Z.EW})}get animation(){const W=this.props.root.gamePhase.value,n=this.value>0;switch(!0){case W===w.Qc.BetsOpen&&n:case W===w.Qc.BetsClosed&&n:return sh.V.BetPlaced;case W===Gh.Lightning:return sh.V.AnimationStart;default:return sh.V.None}}}class hq extends YW{constructor(){super(),Z.Gn(this,{isLightning:Z.EW})}get value(){return super.value}get isLightning(){return this.value===Gh.Lightning}}var qq,$q=I(507805),kq=I(604929);!function(W){W.Normal="normal",W.Reverse="reverse",W.Alternate="alternate",W.AlternateReverse="alternate-reverse"}(qq||(qq={}));const _q={};async function Nq(W,n,I){const h=W.spriteUrl,q=await kq.y(h),$=function(W,n,I,h,q=qq.Normal){const $=Math.floor(W/I),k=Math.floor(n/h),_=[];for(let W=0;W<k;W++)for(let n=0;n<$;n++)_.push({x:n*I,y:W*h});switch(q){case qq.Reverse:return _.reverse();case qq.Alternate:return _.concat(_.slice().reverse());case qq.AlternateReverse:return _.slice().reverse().concat(_);case qq.Normal:default:return _}}(q.width,q.height,n.width,n.height,W.direction);I[W.id]={image:q,framePositions:$}}class cq{constructor(W){this.currentAnimation=null,this.context2d=null,this.timelineStartedAt=0,this.currentTimelinePosition=0,this.currentFragment=null,this.currentFragmentTime=0,this.currentFragmentEndTime=0,this.currentAtlas=null,this.setOffset=!0,this.frameId=null,this.frameDuration=33.333333333333336,this.lastFrameTime=0,this.isFrozen=!1,this.renderCounter=0,this.setFrameDuration=W=>{this.frameDuration=W},this.setContext2d=W=>{this.context2d=W,this.updateState()},this.setCurrentAnimation=W=>{this.currentAnimation=W,this.currentTimelinePosition=0,this.setOffset=!0,this.updateState(),!this.frameId&&this.getHasActiveAnimation()?(this.frameId=window.requestAnimationFrame(this.renderFrame),this.callbacks.onAnimationStart&&this.currentAnimation&&this.callbacks.onAnimationStart(this.currentAnimation)):this.stopFrameRender()},this.destroy=()=>{this.stopFrameRender(),this.currentFragment=null,this.currentAtlas=null,this.context2d=null,this.animationTimelines=null},this.getHasActiveAnimation=()=>!!this.currentAnimation&&"None"!==this.currentAnimation,this.setLayerOptions=()=>{this.setFrameDuration(this.frameDuration)},this.render=(W,n)=>{let I=n;if(this.setOffset&&(this.timelineStartedAt=W,I=0,this.setOffset=!1),this.currentTimelinePosition=Math.floor(W-this.timelineStartedAt),this.currentTimelinePosition>=this.currentFragmentEndTime&&(this.updateCurrentFragment(),!this.currentFragment))return void this.stopFrameRender();if(!this.currentAtlas)return;const{framePositions:h}=this.currentAtlas,q=h[this.getFrameIndex(h)];q&&(this.updateContext2dProps(),this.context2d&&this.context2d.drawImage(this.currentAtlas.image,q.x,q.y,this.width,this.height,this.x,this.y,this.width,this.height),this.currentFragmentTime+=I)},this.getAtlases=()=>_q[this.layerId]||{},this.updateCurrentFragment=()=>{const W=this.animationTimeline;if(!W)return void(this.currentFragment=null);let n=0;for(const I of W)if(I&&(n+=I.duration,n>this.currentTimelinePosition))return this.currentFragment=I,this.currentFragmentTime=0,this.currentFragmentEndTime=n,void this.updateCurrentAtlas();this.currentFragment=null},this.updateCurrentAtlas=()=>{this.currentFragment&&(this.currentAtlas=this.getAtlases()[this.currentFragment.id])},this.updateContext2dProps=()=>{this.currentFragment&&this.context2d&&(this.context2d.globalAlpha=this.currentFragment.alpha||1,this.context2d.globalCompositeOperation=this.currentFragment.compositeOperation||"source-over")},this.updateState=()=>{this.updateCurrentFragment(),this.updateCurrentAtlas()},this.clearRect=()=>{this.context2d&&this.context2d.clearRect(0,0,this.context2d.canvas.width,this.context2d.canvas.height)},this.stopFrameRender=()=>{this.frameId&&(window.cancelAnimationFrame(this.frameId),this.frameId=null,this.isSeamlessAnimation||this.clearRect(),this.isFrozen&&(this.renderCounter=0))},this.renderFrame=W=>{const n=W-this.lastFrameTime;if(this.isSeamlessAnimation&&this.stopOnLastFrame&&this.isCurrentFragmentLastInTimeline()&&(this.isLastFramePosition()||this.isLastCurrentFragmentTime(n)))return this.stopFrameRender(),void(this.callbacks.onAnimationEnd&&this.currentAnimation&&this.callbacks.onAnimationEnd(this.currentAnimation));n>=this.frameDuration&&(this.lastFrameTime=W,this.clearRect(),this.render(W,n),this.isFrozen&&(this.renderCounter+=1)),this.isFrozen&&this.frameId&&this.renderCounter>=4?window.cancelAnimationFrame(this.frameId):this.frameId=window.requestAnimationFrame(this.renderFrame)};const{layerId:n,animationTimelines:I,x:h,y:q,width:$,height:k,isFrozen:_,stopOnLastFrame:N=!1,isSeamlessAnimation:c=!1,callbacks:P={}}=W;this.layerId=n,this.animationTimelines=I,this.x=h,this.y=q,this.width=$,this.height=k,this.isFrozen=_,this.stopOnLastFrame=N,this.isSeamlessAnimation=c,this.callbacks=P,_q[this.layerId]?this.onCacheLoad():async function(W){const{animationTimelines:n,layerId:I}=W,h=[],q={};for(const I in n){if(!Object.prototype.hasOwnProperty.call(n,I))continue;const $=n[I];if($)for(const n of $)h.push(Nq(n,W,q))}await Promise.all(h),_q[I]=q}(W).then((()=>{this.onCacheLoad()}))}onCacheLoad(){_q[this.layerId]&&(this.updateCurrentAtlas(),this.updateState())}isCurrentFragmentLastInTimeline(){var W;const n=this.animationTimeline;return!!n&&(!(!(null==n?void 0:n.length)||(null===(W=this.currentFragment)||void 0===W?void 0:W.id)!==n[n.length-1].id)||void 0)}isLastFramePosition(){if(this.currentAtlas){const{framePositions:W}=this.currentAtlas;return this.getFrameIndex(W)===W.length-1}return!1}isLastCurrentFragmentTime(W){return this.currentFragmentTime&&this.currentFragmentTime+W>=1e3}getFrameIndex(W){return this.isFrozen?Math.floor((W.length-1)/2):Math.floor(this.currentFragmentTime/this.frameDuration)%W.length}get animationTimeline(){if(this.currentAnimation&&this.animationTimelines&&this.currentAnimation in this.animationTimelines)return this.animationTimelines[this.currentAnimation]}}const Pq={};class Sq{constructor(){this.layer=null,this.context2d=null,this.setLayer=W=>{this.layer&&this.layer.destroy(),this.layer=new cq(W),this.layer.setLayerOptions()},this.setContext2d=W=>{this.context2d=W,this.updateLayersContext2d()},this.setCurrentAnimation=W=>{this.layer&&this.layer.setCurrentAnimation(W)},this.destroy=()=>{this.layer&&(this.layer.destroy(),this.layer=null)},this.updateLayersContext2d=()=>{this.layer&&this.layer.setContext2d(this.context2d)}}}var gq=I(391936);function Bq(W,n){const{width:I,height:h,scale:q=1}=W,{width:$,reverseScale:k=1}=n,_=q*$/1400,N=I/k,c=h/k;return{scale:_,reverseScale:k,scaledWidth:Math.floor(N*_),scaledHeight:Math.floor(c*_),absoluteWidth:N,absoluteHeight:c}}function Eq(W,n,I,h){const q=n?EW.t.Portrait:EW.t.Landscape,{width:$,height:k}=I,{width:_,height:N,reverseScale:c=1}=h,{width:P}=Gn(_,N,q,W),{width:S,height:g}=gq.v(P,Number.MAX_VALUE,$/k);return{scale:S/$,reverseScale:c,scaledWidth:Math.round(S),scaledHeight:Math.round(g),absoluteWidth:$,absoluteHeight:k}}const uq=[w.Qc.BetsClosed,w.Qc.Cancelled,w.Qc.Dealing,w.Qc.Resolved,Gh.Lightning],Yq=I.p+"images/gameresult.ee2ebdf9.webp",fq=I.p+"images/gameresult.054550f8.webp";class rq extends kI{constructor(W){super(W),this.props=W,this.isMultipliersCardsVisible=!1,this.skipLogoHiddenAnimation=!1,this.gameOverlayShiftStandardDevice=45,this.gameOverlayShiftSmallDevice=60,this.topVideoTranslateCoefficient=.5,this.collapsedPhases=[w.Qc.BetsClosed,w.Qc.Cancelled,w.Qc.Dealing,w.Qc.Resolved,Gh.Lightning],Z.Gn(this,{isMultipliersCardsVisible:Z.sH,skipLogoHiddenAnimation:Z.sH,setIsMultipliersCardsVisible:Z.XI.bound,setSkipLogoHiddenAnimation:Z.XI.bound,feeDimensions:Z.EW,lightningStrikeDimensions:Z.EW,lightningCardsDimensions:Z.EW})}get gameResultLayer(){if(!this.props.root.gameResult.withEffect)return;const W=this.props.root.multipliers.winTotalMultiplier>=8,n=W?Yq:fq,I=`${$q.ay.GameResult}${W?"Red":""}`;return{layerId:I,animationTimelines:{[$q.$e.Enabled]:[{id:I,spriteUrl:n,duration:4294967295}]},x:0,y:0,width:640,height:240,isFrozen:!1}}get blockingInteractionPhases(){return uq}get topPosition(){const W=this.props.root.device.isBigDeviceDimensions?0:40,n=this.props.root.device.gameContainerDimensions.height*(this.videoScaleFactor<=1.15?1:Math.min(this.videoScaleFactor,1.3)),I=pn.q1();return this.props.root.device.isPortrait?Math.floor(n-W-I.top):void 0}get overlayShift(){return this.isBettingDown?0:-this.gameOverlayShift}get gameOverlayTransformStyle(){const W=[],n=this.props.root.ag.values.chipstackHidden,{dimensions:{containerHeight:I,containerWidth:h},isPortrait:q,isTablet:$,isPhone:k}=this.props.root.device;if($&&h/I>1.6666666666666667||k&&!q){const n=a.I5((I-45)/I);W.push(`scale(${n})`)}return(0!==this.overlayShift&&!n||this.isBettingDown)&&W.push(`translateY(${this.overlayShift}px)`),W.join("")}get mobileVideoTranslateHeight(){const{isPortrait:W,isPhone:n}=this.props.root.device;if(n&&W&&this.videoScaleFactor<=1.15){const{height:W}=this.props.root.device.gameContainerDimensions;return+(-W*(this.videoScaleFactor-1)*.5).toFixed(2)}return 0}setIsMultipliersCardsVisible(W){this.isMultipliersCardsVisible=W}get defaultGameColor(){return"#1F0029"}get availableRoadsHeight(){const W=super.availableRoadsHeight;if(0===W)return 0;const{isPortrait:n}=this.props.root.device,I=n?this.props.root.layout.feeDimensions.scaledHeight:0,h=Math.floor(W-I);return Math.max(h,60)}get feeDimensions(){const W=this.props.root.device.platform,n=this.props.root.layout.isDesktopClassic,I=this.props.root.device.isPortrait,h=this.props.root.device.dimensions;return W===BW.OD.Desktop?Bq({width:n?408:428,height:26},h):Eq(W,I,{width:I?312:500,height:25},h)}get lightningStrikeDimensions(){const{scaledWidth:W}=this.feeDimensions,n=Math.floor(.76*W);return{scale:1,reverseScale:1,scaledWidth:W,scaledHeight:n,absoluteWidth:W,absoluteHeight:n}}get lightningCardsDimensions(){const W=this.props.root.device.platform,n=this.props.root.layout.isDesktopClassic,I=this.props.root.device.isPortrait,h=this.props.root.device.dimensions;return W===BW.OD.Desktop?Bq({width:n?408:428,height:154},h):Eq(W,I,{width:I?360:650,height:I?h.containerHeight<700&&h.containerHeight/h.containerWidth>=1.8?.2*h.height:h.height*(this.props.root.device.isNarrowScreenPhonePortrait||h.containerHeight/h.containerWidth>=1.85?.14:.23):150},h)}setSkipLogoHiddenAnimation(W){this.skipLogoHiddenAnimation=W}}var Kq,tq=I(149528),Xq=I(639972),Lq=I(123550);!function(W){W.Player="player",W.Banker="banker",W.BankerNC="banker_nc",W.BankerNC6="banker_nc6",W.Tie="tie",W.BankerPair="banker_pair",W.PlayerPair="player_pair",W.PlayerBankerPair="player_banker_pair",W.PerfectPair="perfect_pair",W.PerfectOneHand="one_hand",W.PerfectBothsHands="both_hands",W.EitherPair="either_pair",W.SuperSix="super_six",W.PlayerBankerBonus="player_banker_bonus",W.NaturalWin="natural_win",W.NaturalTie="natural_tie",W.WinBy9="win_by_9",W.WinBy8="win_by_8",W.WinBy7="win_by_7",W.WinBy6="win_by_6",W.WinBy5="win_by_5",W.WinBy4="win_by_4"}(Kq||(Kq={}));const Oq=()=>({[Kq.Player]:{labelTranslationId:"limitPlate.player",betSpot:w.K8.Player,payoutTranslationId:`limitPlate.${Kq.Player}.payout`},[Kq.Banker]:{labelTranslationId:"limitPlate.banker",betSpot:w.K8.Banker,payoutTranslationId:`limitPlate.${Kq.Banker}.payout`},[Kq.BankerNC]:{labelTranslationId:"limitPlate.banker",payoutTranslationId:`limitPlate.${Kq.BankerNC}.payout`},[Kq.BankerNC6]:{labelTranslationId:"limitPlate.bankerWinsOnSix",payoutTranslationId:`limitPlate.${Kq.BankerNC6}.payout`},[Kq.Tie]:{betSpot:w.K8.Tie,labelTranslationId:"limitPlate.tie"},[Kq.PlayerBankerPair]:{betSpot:w.K8.PlayerPair,labelTranslationId:"limitPlate.playerbankerPair",payoutTranslationId:`limitPlate.${Kq.PlayerBankerPair}.payout`,requiredBetSpots:[w.K8.PlayerPair,w.K8.BankerPair]},[Kq.PlayerPair]:{labelTranslationId:"limitPlate.playerPair",payoutTranslationId:`limitPlate.${Kq.PlayerPair}.payout`,betSpot:w.K8.PlayerPair,requiredBetSpots:[w.K8.PlayerPair]},[Kq.BankerPair]:{betSpot:w.K8.BankerPair,labelTranslationId:"limitPlate.bankerPair",payoutTranslationId:`limitPlate.${Kq.BankerPair}.payout`,requiredBetSpots:[w.K8.BankerPair]},[Kq.PerfectPair]:{betSpot:w.K8.PerfectPair,labelTranslationId:"limitPlate.perfectPair",requiredBetSpots:[w.K8.PerfectPair]},[Kq.PerfectOneHand]:{labelTranslationId:"limitPlate.oneHand",payoutTranslationId:`limitPlate.${Kq.PerfectOneHand}.payout`,requiredBetSpots:[w.K8.PerfectPair]},[Kq.PerfectBothsHands]:{labelTranslationId:"limitPlate.bothHands",payoutTranslationId:`limitPlate.${Kq.PerfectBothsHands}.payout`,requiredBetSpots:[w.K8.PerfectPair]},[Kq.EitherPair]:{betSpot:w.K8.EitherPair,labelTranslationId:"limitPlate.eitherPair",payoutTranslationId:`limitPlate.${Kq.EitherPair}.payout`,requiredBetSpots:[w.K8.EitherPair]},[Kq.SuperSix]:{betSpot:w.K8.SuperSix,labelTranslationId:"limitPlate.superSix",payoutTranslationId:`limitPlate.${Kq.SuperSix}.payout`,requiredBetSpots:[w.K8.SuperSix]},[Kq.PlayerBankerBonus]:{betSpot:w.K8.PlayerBonus,labelTranslationId:"limitPlate.playerbankerBonus"},[Kq.NaturalWin]:{labelTranslationId:"limitPlate.naturalWin",payoutTranslationId:`limitPlate.${Kq.NaturalWin}.payout`},[Kq.NaturalTie]:{labelTranslationId:"limitPlate.naturalTie",payoutTranslationId:"limitPlate.push"},[Kq.WinBy9]:{labelTranslationId:"limitPlate.winBy9",payoutTranslationId:`limitPlate.${Kq.WinBy9}.payout`},[Kq.WinBy8]:{labelTranslationId:"limitPlate.winBy8",payoutTranslationId:`limitPlate.${Kq.WinBy8}.payout`},[Kq.WinBy7]:{labelTranslationId:"limitPlate.winBy7",payoutTranslationId:`limitPlate.${Kq.WinBy7}.payout`},[Kq.WinBy6]:{labelTranslationId:"limitPlate.winBy6",payoutTranslationId:`limitPlate.${Kq.WinBy6}.payout`},[Kq.WinBy5]:{labelTranslationId:"limitPlate.winBy5",payoutTranslationId:`limitPlate.${Kq.WinBy5}.payout`},[Kq.WinBy4]:{labelTranslationId:"limitPlate.winBy4",payoutTranslationId:`limitPlate.${Kq.WinBy4}.payout`}}),Zq=[Kq.Player,Kq.Banker,Kq.BankerNC,Kq.BankerNC6,Kq.Tie],dq=[Kq.PlayerPair,Kq.BankerPair,Kq.PlayerBankerPair,Kq.PerfectPair,Kq.PerfectOneHand,Kq.PerfectBothsHands,Kq.EitherPair,Kq.SuperSix],mq=[Kq.PlayerBankerBonus,Kq.NaturalWin,Kq.NaturalTie,Kq.WinBy9,Kq.WinBy8,Kq.WinBy7,Kq.WinBy6,Kq.WinBy5,Kq.WinBy4],Rq={[Kq.Banker]:[w.K8.Banker],[Kq.SuperSix]:[w.K8.SuperSix],[Kq.PerfectPair]:[w.K8.PerfectPair],[Kq.EitherPair]:[w.K8.EitherPair],[Kq.PlayerPair]:[w.K8.PlayerPair],[Kq.BankerPair]:[w.K8.BankerPair],[Kq.PlayerBankerPair]:[w.K8.PlayerPair,w.K8.BankerPair],[Kq.PlayerBankerBonus]:[w.K8.PlayerBonus,w.K8.BankerBonus]};class eq{constructor(W){this.props=W,this.skipMainBetLimitsAsterisk=!0,Z.Gn(this,{footnotes:Z.EW,betLimitsRows:Z.EW,mainBetLimits:Z.EW,sideBetLimits:Z.EW,bonusBetLimits:Z.EW})}get footnotes(){const{reduction:W}=this.props.root,n=new Set,I=[];return this.betLimitsRows.forEach((h=>{const{asterisk:q,betKey:$}=h;if(!n.has(q)&&q){n.add(q);const h=$,k=Xq.A(Rq[h]),_=Zq.includes(h);if(k&&_)return void this.addMainBetLimitFootnote(I,q,k);if(k){const n=W.coefficientReductions[k];n&&this.addSideBetLimitFootnote(I,q,n)}}})),I}get betLimitsRows(){const{minTableLimit:W,maxTableLimit:n,currencySymbol:I,displayTableLimit:h}=this.props.root.settings,q=h&&W>0&&n>0,$=[...this.mainBetLimits,...this.sideBetLimits,...this.bonusBetLimits];return q&&this.props.isDesktop&&$.push(...function(W,n,I,h){return[{},{betKey:"tableLimits",betTitle:_.Tl("tableLimits"),min:W,max:n,isMobile:I,currencySymbol:h}]}(W,n,!this.props.isDesktop,I)),this.injectAsterisks($)}get mainBetLimits(){const{noCommission:W}=this.props.root.settings;return Zq.filter((n=>W||!W&&![Kq.BankerNC,Kq.BankerNC6].includes(n))).map((n=>{const I=this.createLimitRowProps(n,"");return n===Kq.Banker&&W&&(I.payout=""),this.extendMainBetLimitsRow(I,n)}))}get sideBetLimits(){const W=!this.props.isDesktop,n=[],I=this.filterSideBetLimitsRows(dq);return I.length>0&&(n.push({isMobile:W}),I.forEach((W=>{n.push(this.extendSideBetLimitsRow(this.createLimitRowProps(W,""),W))}))),n}get bonusBetLimits(){return this.playerBankerBonusEnabled()?mq.map((W=>this.createLimitRowProps(W,""))):[]}createLimitRowProps(W,n=""){const{currencySymbol:I}=this.props.root.settings,{betSpot:h,labelTranslationId:q,payoutTranslationId:$,payout:k}=Oq()[W],N=h?this.props.root.betSpot.getMinBetSpotValue(h):void 0,c=h?this.props.root.betSpot.getMaxBetSpotValue(h):void 0,P=void 0!==N&&void 0!==c?`${q}_uppercase`:q;return{betKey:W,betTitle:`${_.Tl(P)}${n}`,min:N,max:c,payout:$?_.Tl($):k,isMobile:!this.props.isDesktop,currencySymbol:I}}playerBankerBonusEnabled(){return this.props.root.betSpot.isSpotConfigured(w.K8.PlayerBonus)&&this.props.root.betSpot.isSpotConfigured(w.K8.BankerBonus)}processAsterisk(W,n){var I;const h=null!==(I=Lq.A(W.uniqueSymbols))&&void 0!==I?I:"";let q="";return W.distribution[`${n}`]?q=W.distribution[`${n}`]:(q=`${h}*`,W.distribution[`${n}`]=q,W.uniqueSymbols.push(q)),q}getAsterisk(W,n,I){const h=Zq.includes(I),q=Rq[I],$=Xq.A(q);let k="";if($&&q){if(h&&!this.skipMainBetLimitsAsterisk)return k=this.processAsterisk(W,I),k;const q=n[$];if(!h&&q)return k=this.processAsterisk(W,`${q}`),k}return k}injectAsterisks(W){const{coefficientReductions:n}=this.props.root.reduction,I={distribution:{},uniqueSymbols:[]};return W.map((W=>{const h={...W},{betKey:q,betTitle:$}=h;if(q&&Rq[q]){const W=this.getAsterisk(I,n,q);W&&$&&(h.asterisk=W,h.betTitle+=W)}return h}))}}class jq extends eq{constructor(W){super(W),this.props=W,this.skipMainBetLimitsAsterisk=!1}addMainBetLimitFootnote(W,n,I){const{payoutLimit:h,currencySymbol:q}=this.props.root.settings,$=_.Tl(`xtreme.limitPlate.${I.toLocaleLowerCase()}LightningFeeInfo`);if(W.push(`${n} ${$}`),h>0){const n=MI.ej(h,{currencySymbol:q}),I=_.Tl("limitPlate.payoutLimit"),$=_.Tl("limitPlate.plusInitialBet");W.push(`${I} ${n} ${$}`)}}addSideBetLimitFootnote(W,n,I){const h=tq.t(I,tq.Z.LimitPlate);W.push(`${n} ${h}`)}extendMainBetLimitsRow(W,n){const I={...W},{payoutLimit:h,currencySymbol:q}=this.props.root.settings;switch(n){case Kq.Banker:case Kq.Player:I.payout=_.Tl(`xtreme.limitPlate.${n}.payout`);break;case Kq.Tie:const W=MI.ej(h,{currencySymbol:q});I.payout=_.Tl("xtreme.limitPlate.upTo.new",{payoutLimit:W})}return I}extendSideBetLimitsRow(W,n){const I={...W};switch(n){case Kq.BankerPair:case Kq.PlayerPair:I.payout=_.Tl(`xtreme.limitPlate.${n}.payout`)}return I}filterSideBetLimitsRows(W){return W.filter((W=>{if(W===Kq.PlayerBankerPair)return!1;const n=Oq()[W];return!n.requiredBetSpots||n.requiredBetSpots.every((W=>this.props.root.betSpot.isSpotConfigured(W)))}))}}var zq=I(943416);class vq extends GW{constructor(W){super(W),this.props=W}getCustomEnhancers(){const{betProcessor:W,bets:n,device:I}=this.props.root;return{[j.Bets]:C((()=>({bets:W.calculateUpdatedBets(Z.HO(n.bets))}))),[j.GameType]:C((()=>({gameType:w.ZF.Baccarat}))),[j.UserAgent]:C((()=>({userAgent:I.DS.userAgent})))}}getBetExternalIds(){const{tiePays9to1:W}=this.props.root.settings;return{...y({tiePays9to1:W}),[zq.I.PlayerFee]:"BAC_Player_Fee",[zq.I.PlayerPairFee]:"BAC_PlayerPair_Fee",[zq.I.BankerFee]:"BAC_Banker_Fee",[zq.I.BankerPairFee]:"BAC_BankerPair_Fee",[zq.I.TieFee]:"BAC_Tie_Fee"}}}var Vq=I(710913);class Fq{constructor(W){this.props=W,this.bet=this.bet.bind(this),this.undo=this.undo.bind(this),this.undoAll=this.undoAll.bind(this),this.repeat=this.repeat.bind(this),this.double=this.double.bind(this),this.dealNow=this.dealNow.bind(this)}bet(W){const{betSpot:n,amount:I}=W,h=Vq.k(this.props.ag.values.gameRoundId,this.props.ag.actions.settings.rawSetup.currencyCode||"",I);this.props.transport.sendMessage(this.composeBetMessage({name:"Chips",chips:{[n]:I}},h))}undo(){this.props.transport.sendMessage(this.composeBetMessage({name:w.uu.Undo}))}undoAll(){this.props.transport.sendMessage(this.composeBetMessage({name:w.uu.UndoAll}))}repeat(W){this.props.transport.sendMessage(this.composeBetMessage({name:w.uu.Repeat,mode:W}))}double(){this.props.transport.sendMessage(this.composeBetMessage({name:w.uu.Double}))}move(W){this.props.transport.sendMessage(this.composeBetMessage({name:w.uu.Move,...W}))}dealNow(){this.props.transport.sendMessage({type:Bh.DealNow,payload:this.getBasePayload(Bh.DealNow)})}getBasePayload(W){return{gameId:this.props.ag.values.gameRoundId,replyId:a.pW(W),timestamp:+new Date}}composeBetMessage(W,n){return{type:Bh.Bet,payload:{...this.getBasePayload(Bh.Bet),betTags:this.getBetTags(),action:W,correlationId:n}}}getBetTags(){return{...this.props.ag.values.bettingTags,btTableView:`${this.props.ag.values.videoStreamForCurrentLayout}`,orientation:this.props.ag.values.orientation}}}var wq,oq=I(405215),Dq=I.n(oq);!function(W){W.Player0="player0",W.Player1="player1",W.Player2="player2",W.Banker0="banker0",W.Banker1="banker1",W.Banker2="banker2"}(wq||(wq={}));const xq=[wq.Player0,wq.Banker0,wq.Player1,wq.Banker1,wq.Player2,wq.Banker2];class Gq{constructor(W){this.props=W,this.values=[],this.mapValues=Z.sH.map(),this.potentialMultipliers={},this.cardsVisible=!1,Z.Gn(this,{values:Z.sH.ref,mapValues:Z.sH,potentialMultipliers:Z.sH,setMultipliers:Z.XI.bound,setPotentialMultipliers:Z.XI.bound,reset:Z.XI.bound,multiplierCardsExist:Z.EW,multipliersCards:Z.EW,matchedCards:Z.EW,multiplierCardsDealtCount:Z.EW,cardsVisible:Z.sH,setCardsVisible:Z.XI.bound})}setMultipliers(W){if(!Dq()(W,this.values)){this.values=W,this.mapValues.clear();for(const n of W)this.mapValues.set(n.card,n.value);0===W.length&&(this.cardsVisible=!1)}}setPotentialMultipliers(W){this.potentialMultipliers=W}get multiplierCardsDealtCount(){const{Banker:W,Player:n}=this.matchedCards;return W.length+n.length}getBetSpotMultiplier(W){return this.potentialMultipliers[W]||0}reset(){this.values=[],this.potentialMultipliers={},this.mapValues.clear(),this.cardsVisible=!1}get multipliersCards(){const{dealtCards:W}=this.props.cards;return this.values.map((n=>({card:n.card,multiplier:n.value,isDealt:W.includes(n.card),baseTime:this.props.baseTime||0,cardTime:this.props.cardTime||0})))}get multiplierCardsExist(){return this.values.length>0}checkIfCardMatched(W,n,I){const h=this.props.gameResult.winner,q=this.mapValues.has(W);return h?(h===w.K8.Tie||h===n||I<2&&n===PW.U.Banker&&this.getBetSpotMultiplier(w.K8.BankerPair)>1||I<2&&n===PW.U.Player&&this.getBetSpotMultiplier(w.K8.PlayerPair)>1)&&q:q}get matchedCards(){return{[PW.U.Player]:this.getMatchedCardsByHand(PW.U.Player),[PW.U.Banker]:this.getMatchedCardsByHand(PW.U.Banker)}}get dealtCardMultiplier(){var W;const n=this.props.cards.dealtOrderedCards,I={};for(let h=0;h<xq.length;h++)I[xq[h]]=n.length>h&&null!==(W=this.mapValues.get(n[h]))&&void 0!==W?W:0;return I}setCardsVisible(){this.cardsVisible=!0}getMatchedCardsByHand(W){return this.props.cards.hands[W].cards.filter(((n,I)=>this.checkIfCardMatched(n,W,I)))}}class yq extends Gq{constructor(W){super(W),this.props=W,this._winTotalMultiplier=void 0}get winTotalMultiplier(){return this._winTotalMultiplier||0}calculateWinTotalMultiplier(W){const{winningBetSpots:n}=this.props.gameResult;this._winTotalMultiplier=n.map((n=>W[n]?this.getBetSpotMultiplier(n):0)).sort(((W,n)=>n-W)).shift()}reset(){super.reset(),this._winTotalMultiplier=void 0}get multipliersCards(){return[...super.multipliersCards].sort(((W,n)=>W.multiplier===n.multiplier?W.card.localeCompare(n.card):W.multiplier-n.multiplier))}}class Cq extends PI{constructor(W){super(W),this.props=W}get isAllSideBetsEnabled(){return!1}get multiplierBubbleShownTimes(){return this.preferences.multiplierBubbleShownTimes}}function bq(W){return Z.mJ((()=>W.preferences.scorecardTheme),(()=>{W.ag.actions.setHelpCustomConfig(function(W){const{settings:n,betSpot:I,preferences:h,layout:q}=W;return{playerBankerPairEnabled:I.isSpotConfigured(w.K8.PlayerPair)&&I.isSpotConfigured(w.K8.BankerPair),tiePayoutNine:n.tiePays9to1,scorecardTheme:h.scorecardTheme,isMultiplayEnabled:q.isMultiplayAvailable,coefficientReductionsConfig:n.coefficientReductionsConfig,volatility:n.volatility}}(W))}),{fireImmediately:!0})}class lq extends iI{constructor(W){super(W),this.props=W}get lightningBaseTime(){return this.props.settings.lightningBaseTime}get lightningCardTime(){return this.props.settings.lightningCardTime}}class Aq extends RW{resolveMultiplierTheme(W){return W>=8?N.redTheme:N.lightningTheme}}var pq;!function(W){W.MultiplierAppear="multiplierAppear",W.MultiplierAppearHigh="multiplierAppearHigh",W.MultiplierMatch="multiplierMatch",W.MultiplierMatchHigh="multiplierMatchHigh",W.ExtraMultipliers="extraMultipliers",W.ChargeLoopStart="chargeLoopStart",W.ChargeLoopStop="chargeLoopStop",W.Charge="charge",W.WinCounterLoopStart="winCounterLoopStart",W.WinCounterLoopEnd="winCounterLoopEnd"}(pq||(pq={}));class iq extends QI{constructor(){super(),this.playWinCountUpLoopStart=this.playWinCountUpLoopStart.bind(this),this.playWinCountUpLoopEnd=this.playWinCountUpLoopEnd.bind(this)}playTombstoneCard(){this.fireSoundEvent(pq.MultiplierAppear)}playTombstoneCardHigh(){this.fireSoundEvent(pq.MultiplierAppearHigh)}playExtraMultipliers(){this.fireSoundEvent(pq.ExtraMultipliers)}playTombstoneCardMatch(){this.fireSoundEvent(pq.MultiplierMatch)}playTombstoneCardMatchHigh(){this.fireSoundEvent(pq.MultiplierMatchHigh)}playWinCountUpLoopStart(){this.fireSoundEvent(pq.WinCounterLoopStart)}playWinCountUpLoopEnd(){this.fireSoundEvent(pq.WinCounterLoopEnd)}}function Uq(W){return W>=8}function Qq(W){return Z.mJ((()=>({dealtOrderedCards:W.cards.dealtOrderedCards,mapMultipliers:W.multipliers.mapValues})),(({dealtOrderedCards:n,mapMultipliers:I})=>{if(0===n.length||0===I.size)return;const h=n[n.length-1],q=I.get(h);q&&(Uq(q)?W.sounds.playTombstoneCardMatchHigh():W.sounds.playTombstoneCardMatch())}))}function Tq(W){return[Qq(W)]}class Hq extends Ih{constructor(W){super(W),this.props=W}get gamePhaseProps(){switch(this.props.root.gamePhase.value){case w.Qc.Cancelled:return this.gameCancelledProps;case w.Qc.Dealing:return this.dealingProps;case w.Qc.Revealing:return this.revealingProps;case w.Qc.BetsClosed:return this.betsClosedProps;case w.Qc.Resolved:return this.gameResolvedProps;case w.Qc.BetsOpen:return this.betsOpenProps;case Gh.Lightning:return this.lightningPhaseProps;default:return Wh()}}get lightningPhaseProps(){return{customColors:{type:"flat",stroke:"#ec1f25",fill:"#a31918"},text:_.Tl("xtreme.trafficlight.lightningRound")}}}class aq extends _h{constructor(W){super(W),this.transport=function(W){return new Zh(W)}({transport:W.transport});const n=function({store:W,videoSync:n,gameMessageHandler:I,shouldBeSynced:h,getMessageTime:q}){return $=>{if(!h($,W))return void I($,W,0);const k=$.timestamp?+$.timestamp:0,_=n.getVideoTime()+n.getMaxEventVideoTimeDiff();let N=q($,W);k<_&&N>_&&(N=_),n.wait(N).then((n=>{I($,W,n)})).catch((W=>{console.warn("VideoSync error:",W)}))}}({store:this,videoSync:W.ag.video.sync,gameMessageHandler:bh,shouldBeSynced:lh(),getMessageTime:Ah});this.transport.addHandler(n),this.preferences=function(W){return new Cq(W)}({root:this}),this.gamePhase=new hq,this.settings=function(W){return new lq(W)}({settings:W.settings}),this.multipliers=function(W){return new yq(W)}({cards:this.cards,gameResult:this.gameResult,baseTime:this.settings.lightningBaseTime,cardTime:this.settings.lightningCardTime}),this.fee=function(W){return new Iq(W)}({root:this,percentage:Lh.d}),this.flyingFee=(W=>new Nh(W))({fee:this.fee}),this.messageSender=function(W){return new Fq(W)}({ag:this.ag,transport:this.transport}),this.layout=function(W){return new rq(W)}({root:this}),this.balance=function(W){return new ph(W)}({root:this}),this.betProcessor=Th.P({root:this}),this.limits=function(W){return new jq(W)}({root:this,isDesktop:this.device.isDesktop}),this.statusBar=function(W){return new Hq(W)}({root:this}),this.bubble=function(W){return new Jh(W)}({root:this}),this.shoe=function(W){return new Aq(W)}({root:this}),this.sounds=new iq,this.log=function(W){return new vq(W)}({root:this}),this.initDisposables(W.bubblesEnabled)}reset(){super.reset(),this.multipliers.reset()}initDisposables(W){const n=W?[(I=this,Z.mJ((()=>I.bubble.isMultiplierBubbleVisible),(W=>{const{bubble:n}=I;W?n.show(Uh.MultiplierCards):n.autoHideBubble(Uh.MultiplierCards)}))),d(this),m(this)]:[];var I;super.initDisposables(W),this.disposeBag.addDisposables([R(this),ch(this),Ph(this),Sh(this),bq(this),nI(this),...Tq(this),...n])}}const Jq=(W,n)=>({[s.AllSideBets]:{storageKey:"baccarat.common."+s.AllSideBets,isValidValue:B,getDefaultValue:()=>W.isAllSideBetsEnabled},[s.Background]:{storageKey:"baccarat.common."+s.Background,isValidValue:t,getDefaultValue:()=>N.ScorecardThemeNames.WhiteSolid},[s.BettingGridBubbleShownTimes]:{storageKey:n+s.BettingGridBubbleShownTimes,isValidValue:Number.isFinite,getDefaultValue:()=>0},[s.WelcomeBubbleShownTimes]:{storageKey:n+s.WelcomeBubbleShownTimes,isValidValue:Number.isFinite,getDefaultValue:()=>0}});function sq(W,n){return{...Jq(W,n),[$I.SwapStatsAndMedia]:{storageKey:"baccarat.common."+$I.SwapStatsAndMedia,isValidValue:B,getDefaultValue:()=>!1},[$I.ShowBettingStats]:{storageKey:"baccarat.common."+W.getTableId()+$I.ShowBettingStats,isValidValue:B,getDefaultValue:()=>!1!==W.showBettingStatistics},[$I.CameraMode]:{storageKey:"baccarat.common."+$I.CameraMode,isValidValue:g,getDefaultValue:()=>"view2"===W.rawConfig.default_view?OI.Single:OI.Multi}}}function Mq(W){return{...sq(W,"baccarat.live.xtreme"),[s.Background]:{storageKey:"baccarat.common."+s.Background,isValidValue:t,getDefaultValue:()=>N.ScorecardThemeNames.BlackDot},[ih.MultiplierBubbleShownTimes]:{storageKey:"baccarat.live.xtreme"+ih.MultiplierBubbleShownTimes,isValidValue:Number.isFinite,getDefaultValue:()=>0}}}var W$=I(447833);function n$(W){const n=Number(W.portraitVideoZoom);return Number.isNaN(n)?void 0:n}function I$(W,n,I){const h=E(I);return W$.A(h)?console.error(`${W} limit has invalid value, please check configuration for table ${n}`):void 0===h&&console.error(`${W} limit is not specified, please check configuration for table ${n}`),h||0}function h$(W){var n;const I=W.rawConfig,h=W.getTableId(),q={playerMinBet:I$("player_min_bet",h,I.player_min_bet),playerMaxBet:I$("player_max_bet",h,I.player_max_bet),bankerMinBet:I$("banker_min_bet",h,I.banker_min_bet),bankerMaxBet:I$("banker_max_bet",h,I.banker_max_bet)};return{mainOnlyReductionRawThreshold:I.cards_out_to_trigger_main_only,limitReductions:AI(I),coefficientReductions:pI(I),showBettingStatistics:f(I.show_betting_statistics,{default:void 0}),betweenGamesTime:E(I.between_games_time)||0,betSpotLimits:{min:Math.max(q.playerMinBet,q.bankerMinBet),max:Math.max(q.playerMaxBet,q.bankerMaxBet)},freeHandsLimit:null!==(n=E(I.free_hands_limit))&&void 0!==n?n:0,footerGradientHeight:E(I.footerGradientHeight),limitConfig:E(I.idle_limit_games)||null,cameraOnRails:($=I,Object.keys($).reduce(((W,n)=>{if(n.startsWith("camera_on_rails.")){const I=n.replace("camera_on_rails.","");if(I in lI){const h=lI[I];h&&(W[h]=$[n].split(",").map((W=>function(W){if(n=W,Object.values(DW).includes(n))return{delay:0,state:W};var n;const[I,h]=W.split(":");return{delay:Number(I),state:h}}(W))))}else W[I]=$[n]}return W}),{})),portraitVideoZoom:n$(I),isBaccaratV4:f(I.baccarat_v4,{default:!1}),isHelpRedEnvelopeSpotsSingleRtp:f(I.help_red_envelope_single_rtp,{default:!1})};var $}function q$(W){const n=W.rawConfig;return{...h$(W),lightningBaseTime:E(n.lightning_base_time)||2e3,lightningCardTime:E(n.lightning_card_time)||600}}var $$=I(755073),k$=I(85),_$=I(523219);var N$=I(64922),c$=I(525620),P$=I(377810),S$=I.t(P$,2),g$=I(699695),B$=I(119313),E$=I(653677);function u$(W,n){const I=[];for(let h=0;h<W;h++)I.push(n);return I}function Y$({icons:W,rows:n,columns:I}){var h;const q=[];for(let $=0;$<I;$++)for(let I=0;I<n;I++)(null===(h=W[$])||void 0===h?void 0:h[I])&&q.push({x:$,y:I,props:{roadType:N.RoadType.Big,...W[$][I]}});return q}const f$=Y$({icons:[u$(2,{winnerType:N.WinnerTypeBaccarat.Player,additionalType:N.AdditionalTypeBaccarat.Tie}),[...u$(3,{winnerType:N.WinnerTypeBaccarat.Banker}),...u$(2,{winnerType:N.WinnerTypeBaccarat.Banker,additionalType:N.AdditionalTypeBaccarat.Tie})],u$(1,{winnerType:N.WinnerTypeBaccarat.Player}),u$(10,{winnerType:N.WinnerTypeBaccarat.Banker}),u$(4,{winnerType:N.WinnerTypeBaccarat.Player}),u$(2,{winnerType:N.WinnerTypeBaccarat.Banker}),u$(6,{winnerType:N.WinnerTypeBaccarat.Player}),u$(2,{winnerType:N.WinnerTypeBaccarat.Banker}),u$(3,{winnerType:N.WinnerTypeBaccarat.Player}),u$(5,{winnerType:N.WinnerTypeBaccarat.Banker}),u$(1,{winnerType:N.WinnerTypeBaccarat.Player}),u$(3,{winnerType:N.WinnerTypeBaccarat.Banker})],rows:6,columns:15}),r$=Y$({icons:[u$(2,{winnerType:N.WinnerTypeBaccarat.Player,additionalType:N.AdditionalTypeBaccarat.Tie}),u$(3,{winnerType:N.WinnerTypeBaccarat.Banker}),u$(1,{winnerType:N.WinnerTypeBaccarat.Player})],rows:3,columns:3}),K$=[{x:11,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:11,y:1,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:11,y:2,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:10,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:9,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:9,y:1,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:9,y:2,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:9,y:3,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:9,y:4,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:8,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:8,y:1,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:8,y:2,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:7,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:7,y:1,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:7,y:4,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:7,y:5,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:6,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:6,y:1,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:6,y:2,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:6,y:3,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:6,y:4,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:6,y:5,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:5,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:5,y:1,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:5,y:5,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:4,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:4,y:1,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:4,y:2,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:4,y:3,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:4,y:5,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:3,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:3,y:1,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:3,y:2,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:3,y:3,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:3,y:4,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:3,y:5,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:2,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:1,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:1,y:1,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:1,y:2,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:1,y:3,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker,additionalType:6}},{x:1,y:4,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker,additionalType:6}},{x:0,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player,additionalType:6}},{x:0,y:1,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player,additionalType:6}}],t$="container--1f8f1",X$="isMobile--fc8c9",L$="label--c2fdc",O$=W=>{const{color:n,fill:I,stroke:h,isMobile:q,isLive:$=!1,IconShapeComponent:k}=W,_=q?(W=>({columnCount:3,rowCount:3,strokeWidth:.1,icons:N.mapIconsToRoadItemsBaccarat(r$,W)}))($):(W=>({columnCount:15,rowCount:6,strokeWidth:.1,icons:N.mapIconsToRoadItemsBaccarat(W?f$:K$,W)}))($);return N$.jsxs("div",{className:g$.A(t$,{[X$]:q}),children:[N$.jsx(N.GridView,{IconShapeComponent:k,..._,icons:_.icons,fill:I,stroke:h}),N$.jsx("span",{className:L$,children:n})]})},Z$="container--38690",d$="isMobile--9c478",m$="isFlattened--f0f23",R$="selectorHolder--e2807",e$="heading--e73d1",j$={[N.ScorecardThemeNames.WhiteSolid]:({isDesktop:W,isRng:n})=>N$.jsx(O$,{fill:N.getScorecardTheme(N.ScorecardThemeNames.WhiteSolid).fill,stroke:N.getScorecardTheme(N.ScorecardThemeNames.WhiteSolid).stroke,color:_.Tl("settings.scorecards.background.classic"),isMobile:!W,isLive:!n}),[N.ScorecardThemeNames.BlackDot]:({isDesktop:W,isRng:n})=>N$.jsx(O$,{IconShapeComponent:N.EmptyRoadItem,fill:N.getScorecardTheme(N.ScorecardThemeNames.BlackDot).fill,stroke:N.getScorecardTheme(N.ScorecardThemeNames.BlackDot).stroke,color:_.Tl("settings.scorecards.background.immersive"),isMobile:!W,isLive:!n})},z$=[N.ScorecardThemeNames.WhiteSolid,N.ScorecardThemeNames.BlackDot],v$=({scorecardTheme:W,setScorecardTheme:n,isDesktop:I,isFlattened:h=!1,themes:q=z$,isRng:$})=>{const k=P$.useMemo((()=>function({isDesktop:W,themes:n,isRng:I}){return n.map((n=>({value:n,component:j$[n]({isDesktop:W,isRng:I})})))}({isDesktop:I,themes:q,isRng:$})),[I,$,q]);return N$.jsxs("div",{className:g$.A(Z$,{[d$]:!I,[m$]:h}),children:[N$.jsx(E$.q,{className:g$.A(e$,{[m$]:h}),children:"settings.scorecards."+(I?"background":"background_uppercase")}),N$.jsx("div",{className:R$,children:N$.jsx(B$.P,{setValue:n,value:W,options:k,variant:"with-anchor-cell"})})]})},V$=c$.PA((({isFlattened:W,isRng:n=!1})=>{var I;const h=q.Pj(),k=P$.useCallback((W=>{h.preferences.updatePreferenceValue(s.Background,W),h.log.clientPressedSetting(s.Background,W)}),[h]);return N$.jsx(v$,{isRng:null!==(I=h.settings.isRng)&&void 0!==I?I:n,setScorecardTheme:k,isDesktop:h.device.isDesktop,scorecardTheme:h.preferences.scorecardTheme,themes:$.LH,isFlattened:W})})),F$=[{component:V$,labelTranslationId:"settings.scorecards",tabId:"SCORECARDS"}];var w$=I(368329);const o$="maxPayoutAmount--18149",D$=P$.memo((({footNotes:W})=>N$.jsx("div",{"data-role":"max-payout-amount",className:o$,children:W.map(((W,n)=>N$.jsx("div",{children:W},`footnote-${n}`)))})));var x$=I(837557),G$=I(671860),y$=I(509407),C$=I(808432),b$=I(525019);const l$="red--3ffaa",A$="black--f01d3";function p$(W,n,I,h){return N$.jsx("use",{xlinkHref:W,x:n,y:I,height:h})}b$.z();const i$=P$.memo((({rank:W,suit:n})=>{let I;switch(W){case"2":case"6":I="36";break;case"3":case"9":I="35";break;case"4":I="34";break;case"5":case"J":I="38";break;case"7":I="40";break;case"8":I="39";break;case"10":I="0";break;case"Q":case"A":I="19";break;default:I="17"}const h=[C$.KY.D,C$.KY.H].includes(n)?l$:A$,q=p$(`#rank-${W}`,I,"10","86"),$=p$(`#suit-${C$.KY[n]}`,"100","0","106");return N$.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 184 106",preserveAspectRatio:"xMidYMid meet",className:h,children:[q,$]})}));i$.displayName="RankAndSuit";const U$="indented--d520e",Q$="doubleIndented--68144",T$="bold--37d87",H$="bet--7d654",a$="betLimits--3cf27",J$="payout--46826",s$="ranksAndSuits--7b0b6",M$="mobileRanksAndSuits--7a895",Wk="cardsDelimiter--55498",nk="disabled--fc044",Ik="topPadding--64914",hk="rtl--1eee5",qk="mobile--a40d9",$k="cellContent--e7e92",kk="sectionHeader--a6eff",_k="hasContent--7f13d",Nk="middleDataCell--a2446",ck="fixedColumnWidths--a60d9",Pk="hasBottomBorder--87313",Sk="hasIncreasedNotch--5fff3",gk="hasNotch--42e7b",Bk="legacyMenuMode--041c5",Ek=P$.memo((W=>{const{betKey:n,betTitle:I,min:h,max:q,payout:$,isIndented:k=!1,areLimitsInlined:N,cards:c,middleComponent:P,hasBottomBorder:S=!0,isMobile:g=!1,currencySymbol:B="",fixedColumnWidths:E=!0,showPayouts:u=!0,isSectionHeader:Y=!1,hasSectionPadding:f=!1,disabled:r=!1,legacyMenuMode:K}=W,t=k&&f,X=g$.A({[U$]:!t&&(k||f),[Q$]:t}),L=void 0===I&&n?N$.jsx(E$.q,{className:X,"data-role":"title",children:n}):N$.jsx("span",{"data-role":"title",className:X,children:null!=I?I:String.fromCharCode(8203)}),O=P$.useMemo((()=>{if(h&&q)return y$.Q({lowerLimit:h,upperLimit:q,currencySymbol:B});const W=null!=h?h:q;return W?MI.ej(W,{currencySymbol:B}):void 0}),[h,q,B]),Z=P$.useMemo((()=>null==c?void 0:c.map(((W,n)=>function(W,n){const I=W.slice(0,-1);let h=null;switch(W.slice(-1)){case"C":h=C$.KY.C;break;case"D":h=C$.KY.D;break;case"H":h=C$.KY.H;break;case"S":h=C$.KY.S}return"|"===W?N$.jsx("span",{className:Wk,children:W}):I&&null!==h?N$.jsx(i$,{rank:I,suit:h},n):null}(W,n)))),[c]),d=!!(I||n||O||Z||P||$);return N$.jsxs("tr",{"data-role":`bet-limits_${n}`,className:g$.A({[qk]:g,[nk]:r,[_k]:d,[Pk]:S,[ck]:E,[gk]:x$.DS.HAS_NOTCH,[Sk]:x$.DS.IS_IPHONE14_PRO}),children:[N$.jsx("td",{className:g$.A(H$,{[T$]:!k&&!g,[Ik]:N,[kk]:Y}),colSpan:N?2:1,children:N$.jsxs("div",{className:$k,children:[L,N&&!!O&&N$.jsxs("span",{className:a$,"data-min":h,"data-max":q,"data-role":"limits",children:[G$.be,O]})]})}),!N&&N$.jsx("td",{className:Nk,children:N$.jsx("div",{className:$k,children:Z?N$.jsxs("div",{"data-role":"ranks-and-suits",className:g$.A(s$,{[M$]:g}),children:[...Z]}):P||!N&&N$.jsx("div",{"data-role":"min-max",className:a$,"data-min":h,"data-max":q,children:O})})}),u&&N$.jsx("td",{className:g$.A(J$,{[Ik]:N}),children:N$.jsx("div",{className:g$.A($k,{[Bk]:K,[hk]:_.sU()}),"data-role":"payout",children:$})})]})}));Ek.displayName="BetLimitsAndPayoutsRow";const uk="footerContentWrapper--24329",Yk="mobile--5a6b8",fk=P$.memo((({children:W,isMobile:n})=>N$.jsx("tr",{"data-role":"bet-limits-footer",children:N$.jsx("td",{colSpan:3,className:g$.A(uk,{[Yk]:n}),children:W})})));function rk(W){return void 0!==W.content}function Kk(W){return void 0!==W.betKey}fk.displayName="BetLimitsAndPayoutsFooter";class tk extends P$.Component{constructor(){super(...arguments),this.mapper=(W,n)=>{const{isDesktop:I}=this.props;if(void 0===(h=W).content&&void 0===h.betKey)return N$.jsx(Ek,{isMobile:!I},n);var h;if(Kk(W)){const{min:h,max:q,betTitle:$}=W,k=void 0===h&&void 0===q;return P$.createElement(Ek,{...W,key:n,isIndented:k,betTitle:$,isMobile:!I})}if(rk(W))return N$.jsx(fk,{isMobile:!I,children:W.content},n);throw new Error(`Component with '${JSON.stringify(W)}' props is not mapped`)}}shouldComponentUpdate(W){const{limitRows:n}=this.props;return function(W,n){var I,h;if(W.length!==n.length)return!1;let q=!0;for(let $=0;$<W.length;$++){const k=W[$],_=n[$];if(Kk(k)&&Kk(_)?q=k.betKey===_.betKey:rk(k)&&rk(_)&&(q=(null===(I=k.content)||void 0===I?void 0:I.toString())===(null===(h=_.content)||void 0===h?void 0:h.toString())),!q)break}return q}(W.limitRows,n)}render(){const{limitRows:W}=this.props;return W.map(this.mapper)}}const Xk=c$.PA((()=>{const W=w$.P(),{betLimitsRows:n,footnotes:I}=W.limits,{isDesktop:h}=W.device,q=P$.useMemo((()=>{return{content:(W=I,N$.jsx(D$,{footNotes:W})),isMobile:!h};var W}),[h,I]);return N$.jsx(tk,{limitRows:[...n,q],isDesktop:h})})),Lk=P$.memo((()=>N$.jsx("tbody",{children:N$.jsx(Xk,{})}))),Ok="footerGradient--f2e30",Zk="blendedGameColorGradient--82edf",dk=c$.PA((()=>{const W=w$.P(),n=W.settings.isBaccaratV4?function(W,n){const I=bn.E2(W);return{height:WW._m(1.2*n),"--game-color":I}}(W.layout.gameColor,W.settings.footerGradientHeight):function(W,n){const I=bn.E2(W),h=`\n        linear-gradient(\n            180deg,\n            rgba(${I},0) 0%,\n            rgba(${I},0.75) 39.04%,\n            ${W} 100%\n        )`;return{height:WW._m(1.2*n),background:h}}(W.layout.gameUnderlayColor,W.settings.footerGradientHeight);return N$.jsx("div",{"data-role":"footer-gradient",className:g$.A(Ok,{[Zk]:W.settings.isBaccaratV4}),style:n})}));var mk=I(573701);const Rk={role:N.MultiplayButtonRoles.Game,tooltip:"tooltip.baccaratMultiplay"},ek=P$.memo((({multiplayAvailable:W,app:n,setIsMultiplayOpened:I,isDesktop:h})=>{const{isOpened:q,toggleSidebar:$}=mk.M({app:n,sidebarFrameKey:n,logData:{type:"CLIENT_MULTIPLAY_PRESSED_FROM_TABLE"}});return P$.useEffect((()=>{W&&I&&I(q)}),[q,W]),W?N$.jsx(N.MultiplayButton,{...h&&Rk,state:q?"Activated":"Default",onClick:$,soundToPlay:eW.Wo.ClickUIButton}):null})),jk=c$.PA((()=>{const{layout:W,device:n}=w$.P();return N$.jsx(ek,{multiplayAvailable:W.isMultiplayAvailable,app:$.wq,isDesktop:n.isDesktop,isLandscape:n.isLandscape})}));var zk=I(806479);const vk=(Vk=({checked:W,disabled:n,gameTheme:I,onChange:h,labelTranslationId:q})=>N$.jsx(zk.m,{checked:W,disabled:n,gameTheme:I,labelTranslationId:q,setChecked:h}),W=>({component:c$.PA((()=>{const n=q.Pj(),{key:I,disabled:h,hidden:$,labelTranslationId:k,tooltipTranslationId:_,role:N,onChange:c}=W(n),P=I,S=P$.useCallback((W=>{n.preferences.updatePreferenceValue(P,W),null==c||c(W)}),[n,P,c]);return $?null:N$.jsx(Vk,{checked:n.preferences.getValue(P),disabled:!!h,gameTheme:n.ag.gameTheme,onChange:S,role:N,labelTranslationId:k,tooltipTranslationId:_})}))}));var Vk;const Fk=[function(W){const n=vk((n=>{const{hidden:I,disabled:h}=W(n);return{key:s.AllSideBets,labelTranslationId:"settings.sideBets.show",disabled:h,hidden:I}})).component;return{component:c$.PA((()=>{const I=q.Pj(),{hidden:h,disabled:$,tooltipTranslationId:k="tooltip.hideSideBets"}=W(I),N=P$.useCallback((W=>{if(!$)return;const n=W.currentTarget.getBoundingClientRect(),{gameDimensions:h}=I.ag.values;I.ag.actions.tooltips.add({left:Math.round(n.left-h.left),top:Math.round(n.top-h.top),label:_.Tl(k),type:"hideSideBets"})}),[I,$,k]),c=P$.useCallback((()=>{$&&I.ag.actions.tooltips.hideByType("hideSideBets")}),[I,$]);return h?null:N$.jsx("div",{onMouseEnter:N,onMouseLeave:c,children:N$.jsx(n,{})})}))}}((W=>({disabled:W.preferences.isAllSideBetsCheckboxDisabled,tooltipTranslationId:W.preferences.disabledAllSideBetsCheckboxTooltipKey,hidden:!W.betSpot.hasExtraSideBetsConfigured||W.settings.isMainBetsOnly}))),vk((W=>({key:$I.ShowBettingStats,labelTranslationId:"settings.showStatistics",onChange:n=>W.log.clientPressedStatistics(n)})))];var wk=I(184787);const ok=P$.memo((function({value:W,sign:n,align:I,theme:h,isStatic:q,withShadow:$}){const k=MI.ej(W),_="x"===n,N=_?k:`${n} ${k}`,c=_?`${N}${n}`:N;return N$.jsx(wk.L,{text:c,align:I,theme:h,isStatic:q,withShadow:$})})),Dk="winnerMultiplierGroup--8c6eb",xk="isMobile--02ce6",Gk="multiplier--9e7a2",yk=({multiplier:W})=>W?N$.jsx("span",{className:g$.A(Dk,{[xk]:!x$.DS.IS_DESKTOP}),children:W.map(((W,n)=>{const I=`${W.value}-${n}`;return N$.jsx("span",{className:Gk,children:N$.jsx(ok,{value:W.value,sign:"x",theme:W.theme,isStatic:!0})},I)}))}):null,Ck=I.p+"images/background.b2c884df.webp",bk=I.p+"images/borderloop.c55570cc.webp",lk=I.p+"images/borderstar.65180209.webp",Ak=I.p+"images/feeloop.67f213d8.webp",pk=I.p+"images/feestart.cb7010e3.webp",ik=(I.p,I.p+"images/lightnings.c50e8712.webp"),Uk=I.p+"images/background.432f216d.webp",Qk=I.p+"images/borderloop.d0b52734.webp",Tk=I.p+"images/borderstar.0fe44e46.webp",Hk=I.p+"images/extralight.8256ba50.webp",ak=I.p+"images/feeloop.2f8e391c.webp",Jk=I.p+"images/feestart.3c311cb2.webp",sk=I.p+"images/lightnings.9414bddb.webp";var Mk,W_;!function(W){W.Red="red",W.Golden="golden"}(Mk||(Mk={})),function(W){W.TombstoneBorderStart="tombstoneBorderStart",W.TombstoneBorderLoop="tombstoneBorderLoop",W.FeeLoop="feeLoop",W.FeeStart="feeStart",W.LightningStrike="lightningStrike",W.TombstoneBackground="tombstoneBackground"}(W_||(W_={}));const n_=Mk.Golden,I_={[Mk.Red]:{[W_.TombstoneBorderLoop]:Qk,[W_.TombstoneBorderStart]:Tk,[W_.FeeLoop]:ak,[W_.FeeStart]:Jk,[W_.LightningStrike]:sk,[W_.TombstoneBackground]:Uk},[Mk.Golden]:{[W_.TombstoneBorderStart]:lk,[W_.TombstoneBorderLoop]:bk,[W_.FeeLoop]:Ak,[W_.FeeStart]:pk,[W_.LightningStrike]:ik,[W_.TombstoneBackground]:Ck}};function h_(W,n){const I=W?.9:.4;return[{id:"feeBetPlaced1",spriteUrl:I_[n].feeStart,duration:$q.Xo.BetsPlaced,alpha:I},{id:"feeBetPlaced2",spriteUrl:I_[n].feeLoop,duration:4294967295,alpha:I,direction:qq.Alternate}]}function q_(W){const n=`<svg xmlns="http://www.w3.org/2000/svg" width="58" height="99" preserveAspectRatio="none">\n            <defs>\n                <linearGradient id="b" x1="50%" x2="50%" y1="0%" y2="100%">\n                    <stop stop-color="#2D2926" offset="0%" />\n                    <stop stop-color="#2C2926" offset="100%" />\n                </linearGradient>\n                <linearGradient id="a" x1="50%" x2="50%" y1="0%" y2="100%">\n                    <stop stop-color="${W[0]}" offset="0%" /><stop stop-color="${W[1]}" offset="91%" />\n                    <stop stop-color="#978468" offset="97%" /><stop stop-color="${W[2]}" offset="100%" />\n                </linearGradient>\n                <radialGradient id="c" cx="53%" cy="58%" r="116%" fx="53%" fy="588%" gradientTransform="matrix(0 .57 -1 0 1.11 .278)">\n                    <stop stop-color="${W[0]}" offset="0%" />\n                    <stop stop-color="${W[1]}" offset="54%" />\n                    <stop stop-color="${W[2]}" offset="100%" />\n                </radialGradient>\n            </defs>\n            <g fill="none">\n                <path id="Rectangle" fill="url(#b)" stroke="url(#a)" stroke-width="3.38" d="M29.15 97.35l23.72-2.56c1.5-.17 2.64-1.5 2.57-3L53.36 48.1v-.17l2.04-36.1c.08-1.5-1.02-2.83-2.52-3l-9.1-1.15L43 4.56 29.15 1.8 14.7 4.54l-.4 3.13-9.62 1.17c-1.5.18-2.6 1.5-2.53 3.02L4.2 47.94v.18L2.12 91.78c-.08 1.52 1.05 2.83 2.57 3l24.45 2.57z" />\n                <path stroke="url(#c)" stroke-width=".85" d="M44.04 3.48L29.14.5l-15.6 2.97-.38 3.07L4.53 7.6C2.35 7.84.76 9.74.9 11.93l2.03 36.12L.85 91.72c-.1 2.2 1.52 4.1 3.7 4.32l24.56 2.6 23.9-2.6c2.18-.23 3.8-2.12 3.7-4.3L54.62 48l2.04-36.1c.13-2.17-1.46-4.07-3.62-4.34L44.8 6.55l-.76-3.07z" />\n            </g>\n        </svg>`;return["data",`image/svg+xml,${encodeURIComponent(n)}`].join(":")}$q.ay.GameResult,$q.$e.Enabled,$q.ay.GameResult;const $_=q_(["#F4E2C5","#635541","#A79375"]),k_=q_(["#F4C5C5","#634141","#A77575"]),__="lightningRed--10e0a",N_="shadowRed--d3f96",c_="cardBorder--6e37c",P_="shellRed--5cebc";function S_(W){return Uq(W)?{shadow:N_,lightning:__}:void 0}function g_(W){return Uq(W)?{borderColor:c_,tombstoneBackgroundSvg:k_,shell:P_}:void 0}function B_(W){return Uq(W)?Mk.Red:Mk.Golden}const E_=({multiplier:W})=>{if(!W)return null;const n=W.map((W=>({value:W,theme:S_(W)})));return N$.jsx(yk,{multiplier:n})};var u_=I(528981),Y_=I(99210);const f_=async(W,n,{customConfig:h,currencySymbol:q,gameTheme:$,customizableButton:k})=>{const{ReturnToPlayerChapter:N,SideBetsChapter:c}=await I.e(74695).then(I.bind(I,893438)),{PayoutsChapter:P}=await I.e(74695).then(I.bind(I,563627)),{GameObjectiveChapter:S,ScorecardsChapter:g,BetStatisticsChapter:B,MoreGamesChapter:E,PlaceBetsChapter:u}=await I.e(74695).then(I.bind(I,237107)),{GameRulesLightningChapter:Y}=await I.e(74695).then(I.bind(I,563627)),{SettingsChapter:f}=await I.e(5463).then(I.bind(I,867242));if(!h)throw new Error("Please provide all necessary props for customConfig");const{playerBankerPairEnabled:r,scorecardTheme:K,isMultiplayEnabled:t,coefficientReductionsConfig:X,volatility:L}=h,O=n.getTableName(),Z=n.getChipAmounts(),d=!r,m=Math.max(0,n.payoutLimit()),R=MI.ej(m,{currencySymbol:q}),e=n.useRedesignedDrawerHelp(),j=W===BW.OD.Desktop,z={id:"GameObjective",title:_.Tl("help.gameObjective.title"),content:N$.jsx(S,{tableName:O,isXtreme:!0})},v={id:"GameRulesLightning",title:_.Tl("help.gameRulesLightning.title"),content:N$.jsx(Y,{isHelpRedesigned:e,currencySymbol:q})},V={id:"Payouts",title:_.Tl("help.payouts.title"),content:N$.jsx(P,{payoutLimit:R,playerBankerPairEnabled:r,isHelpRedesigned:!j&&e})},F={id:"Sidebets",title:_.Tl("help.sideBets.title"),content:N$.jsx(c,{perfectPairEnabled:!1,eitherPairEnabled:!1,superSixEnabled:!1,playerBankerBonusEnabled:!1,playerBankerPairEnabled:r,isHelpRedesigned:e,coefficientReductionsConfig:X})},w={id:"ReturnToPlayer",title:_.Tl("help.returnToPlayer.title"),content:N$.jsx(N,{isXtreme:!0,noCommission:!1,perfectPairEnabled:!1,eitherPairEnabled:!1,superSixEnabled:!1,playerBankerBonusEnabled:!1,playerBankerPairEnabled:r,isMainBetsOnly:d,payoutLimit:R,isHelpRedesigned:e,volatility:L})},o=Math.max(Number(n.rawConfig.player_max_bet),Number(n.rawConfig.banker_max_bet)),D=Math.min(Number(n.rawConfig.player_min_bet),Number(n.rawConfig.banker_min_bet)),x={id:"PlaceBets",title:_.Tl("help.placeBets.title"),content:N$.jsx(u,{tableName:O,currencySymbol:q,maxLimit:o,minLimit:D,platform:W,dynamicLimits:{},dynamicOrder:[],hasReductions:!1,chipAmounts:Z,isMainOnlyReductionConfigured:!1,customizableButton:k})},G={id:"ScoreCards",title:_.Tl("help.scorecards.title"),content:N$.jsx(g,{platform:W,scorecardTheme:K,isXtreme:!0})},y={id:"BetStatistics",title:_.Tl("help.betStatistics.title"),content:N$.jsx(B,{})},C={id:u_.t.MoreGames,title:_.Tl("help.moreGames.title"),content:N$.jsx(E,{platform:W,isMultiplayEnabled:t,gameTheme:$,isHelpRedesigned:e})},b={id:u_.t.Settings,title:_.Tl("help.settings.title"),content:N$.jsx(f,{platform:W,showScorecards:!0,showSideBets:!1,buttonType:k.all?"customizable":"secondary",isHelpRedesigned:e})};return[z,v,!d&&F,V,w,x,u_.t.LiveSupport,y,u_.t.Chat,u_.t.Tipping,G,u_.t.GameNumber,u_.t.Sound,u_.t.GameHistory,b,u_.t.DepositAndWithdraw,u_.t.ResponsibleGaming,u_.t.InformazioniAams,u_.t.ErrorHandling,u_.t.DisconnectionPolicy,u_.t.AutomatedDecision,u_.t.Shuffling,C,u_.t.MultiGamePlay,u_.t.ShortcutKeys,u_.t.Home]},r_=async({settings:W,customConfig:n,currencySymbol:h,customizableButton:q})=>{const{ReturnToPlayerChapter:$,SideBetsChapter:k}=await I.e(74695).then(I.bind(I,893438)),{PayoutsChapter:N}=await I.e(74695).then(I.bind(I,563627)),{GameObjectiveChapter:c,ScorecardsChapter:P,BetStatisticsChapter:S,MultiplayChapter:g,PlaceBetsChapter:B}=await I.e(74695).then(I.bind(I,237107)),{GameRulesLightningChapter:E}=await I.e(74695).then(I.bind(I,563627)),{playerBankerPairEnabled:u,scorecardTheme:Y,isMultiplayEnabled:f,coefficientReductionsConfig:r,volatility:K}=n,t=W.getTableName(),X=W.getChipAmounts(),L=!u,O=Math.max(0,W.payoutLimit()),Z=MI.ej(O,{currencySymbol:h}),d=W.useRedesignedDrawerHelp(),m=W.DeviceSupport.PLATFORM,R=Math.max(Number(W.rawConfig.player_max_bet),Number(W.rawConfig.banker_max_bet)),e=Math.min(Number(W.rawConfig.player_min_bet),Number(W.rawConfig.banker_min_bet));return{customChapters:{gameDetails:[{chapters:[{id:"GameObjective",title:_.Tl("help.gameObjective.title"),content:N$.jsx(c,{dualPlay:!1,tableName:t,lightning:!1,isGoldenWealth:!1,isPeek:!1,isXtreme:!0})},{id:"GameRulesLightning",title:_.Tl("help.gameRulesLightning.title"),content:N$.jsx(E,{isHelpRedesigned:d,currencySymbol:h})},{id:"Sidebets",title:_.Tl("help.sideBets.title"),content:N$.jsx(k,{perfectPairEnabled:!1,eitherPairEnabled:!1,superSixEnabled:!1,playerBankerBonusEnabled:!1,playerBankerPairEnabled:u,isHelpRedesigned:d,coefficientReductionsConfig:r})},{id:"PlaceBets",title:_.Tl("help.placeBets.title"),content:N$.jsx(B,{tableName:t,currencySymbol:h,maxLimit:R,minLimit:e,platform:m,dynamicLimits:{},dynamicOrder:[],hasReductions:!1,chipAmounts:X,isMainOnlyReductionConfigured:!1,customizableButton:q})},{id:"BetStatistics",title:_.Tl("help.betStatistics.title"),content:N$.jsx(S,{})},{id:"Payouts",title:_.Tl("help.payouts.title"),content:N$.jsx(N,{payoutLimit:Z,playerBankerPairEnabled:u,isHelpRedesigned:d})},{id:"ReturnToPlayer",title:_.Tl("help.returnToPlayer.title"),content:N$.jsx($,{isXtreme:!0,noCommission:!1,perfectPairEnabled:!1,eitherPairEnabled:!1,superSixEnabled:!1,playerBankerBonusEnabled:!1,playerBankerPairEnabled:u,lightning:!1,useRedEnvelope:!1,isMainBetsOnly:L,isGoldenWealth:!1,isPeek:!1,tiePayoutNine:!1,payoutLimit:Z,isHelpRedesigned:d,volatility:K})},{id:"ScoreCards",title:_.Tl("help.scorecards.title"),content:N$.jsx(P,{lightning:!1,platform:m,scorecardTheme:Y,isGoldenWealth:!1,isXtreme:!0})},{id:"Multiplay",title:_.Tl("help.multiplay.title"),content:N$.jsx(g,{platform:m})}]}]},filterMap:{overrideDefault:{[Y_.C.SpeedMode]:!1},custom:{Sidebets:!L,Multiplay:f}}}};var K_=I(973580),t_=I(28230),X_=I(13799);const L_={logClientPopupBubbleAction:o.ID},O_=K_.gv((function(W){return{isLandscape:X_.V6(W)===EW.t.Landscape}}),L_)(t_.f),Z_="bubble--5d42a",d_="phone--d1ed1",m_="landscape--ad7b8",R_="popupBubbleRoot--b93d0";function e_(W){const{platform:n,orientation:I,visible:h,onClose:q,label:$}=W,k=n===BW.OD.Desktop,_=k||I!==EW.t.Landscape?"TopCenter":"TopRight",N=g$.A(Z_,{[d_]:n===BW.OD.Phone,[m_]:I===EW.t.Landscape});return N$.jsx(O_,{width:k?WW._m(50.4):void 0,isFloating:!0,position:_,className:N,visible:h,onClose:q,label:$,loggedFeatureName:"DealNowWarning",isArrowPointOnCenter:!0,rootPositionClassName:g$.A({[R_]:"TopRight"===_})})}const j_=c$.PA((()=>{const W=w$.P(),n=P$.useCallback((()=>W.dealNow.closeBubble()),[W.dealNow]);return N$.jsx(e_,{visible:W.dealNow.isBubbleVisible,label:_.Tl("bubble.takeYourTime"),orientation:W.device.orientation,platform:W.device.platform,onClose:n})}));var z_=I(776924);const v_=c$.PA((({setContainerVisibility:W})=>{const n=w$.P(),I=P$.useCallback((()=>{n.dealNow.updateStatus(En.Z.Waiting),n.messageSender.dealNow(),n.log.clientPressedDealNow()}),[n]),h=P$.useCallback((W=>n.dealNow.showTooltip(W)),[n.dealNow]);return N$.jsx(z_.e,{isMobile:!n.device.isDesktop,disableAnimations:!1,isVisible:n.dealNow.isButtonVisible,status:n.dealNow.status,handleDealNow:I,showDealNowTooltip:h,setContainerVisibility:W})})),V_="container--05371",F_="toCollapsed--bbc7c",w_="fromCollapsed--dd518",o_="collapsed--69ab9",D_="perspective--54735",x_="footerPreOverlay--f30bd",G_="indented--51209",y_=({children:W,isBettingTime:n,timeRemaining:I,liftUpTimer:h})=>{const[q,$]=P$.useState(o_),k=function(){const[W,n]=P$.useState(!0);return P$.useLayoutEffect((()=>{n(!1)}),[]),W}(),_=w$.P().dealNow.isButtonVisible;return P$.useEffect((()=>{n&&$(F_)}),[n]),k?null:N$.jsxs("div",{className:D_,children:[_&&N$.jsxs("div",{className:x_,children:[N$.jsx(j_,{}),N$.jsx(v_,{})]}),N$.jsx("div",{className:g$.A(V_,{[q]:!n,[w_]:n&&I>5,[G_]:h}),children:W})]})};var C_=I(732319),b_=I(811914),l_=I(99496);const A_=c$.PA((W=>{const n=w$.P(),{scale:I,scaledWidth:h,scaledHeight:q}=n.layout.bettingGridScaleFactor,$=C_.v(n.reference.bubble.set,NW.BettingGrid);return N$.jsx(b_.O8,{...W,bubbleRef:$,isVertical:n.device.isPortrait,isBettingTime:n.gamePhase.isBetsOpen,isDesktop:n.device.isDesktop,betSpotSize:l_.Z(n.device),leftBetSpots:n.betSpot.leftBetSpots,rightBetSpots:n.betSpot.rightBetSpots,scale:I,scaledWidth:h,scaledHeight:q,isSingleSideBetSpotsRow:n.betSpot.isSingleSideBetsRow,redEnvelopeEnabled:n.settings.useRedEnvelopePayouts,isIOS:n.device.DS.IS_IOS})}));var p_;!function(W){W.None="none",W.Yellow="yellow",W.Red="red"}(p_||(p_={}));class i_{constructor(W,n,I){this.lightningCreator=W,this.scene3d=n,this.orientation=I,this.borders=new Map}update(W){var n,I;for(const h of W){const W=this.borders.get(h.name);if(W)W.color!==h.color&&(W.color=h.color,W.lightning.changeColor(h.color));else{const W=this.lightningCreator.create(h,this.scene3d,this.orientation);this.borders.set(h.name,{color:h.color,lightning:W})}h.color!==p_.None?null===(n=this.borders.get(h.name))||void 0===n||n.lightning.start():null===(I=this.borders.get(h.name))||void 0===I||I.lightning.stop()}}hide(W){if(W){const n=this.borders.get(W);n&&n.lightning.stop()}else for(const[,W]of this.borders)W.lightning.stop()}reset(){for(const[,W]of this.borders)W.lightning.dispose();this.borders.clear()}setScene(W){this.scene3d=W}setOrientation(W){this.orientation=W}}const U_=0,Q_=1,T_=2,H_=100,a_=101,J_=102,s_=200,M_=201,WN=202,nN=203,IN=204,hN=205,qN=206,$N=207,kN=208,_N=209,NN=210,cN=1e3,PN=1001,SN=1002,gN=1003,BN=1004,EN=1005,uN=1006,YN=1007,fN=1008,rN="srgb",KN="srgb-linear",tN="display-p3",XN=512,LN=513,ON=514,ZN=515,dN=516,mN=517,RN=518,eN=519;class jN{addEventListener(W,n){void 0===this._listeners&&(this._listeners={});const I=this._listeners;void 0===I[W]&&(I[W]=[]),-1===I[W].indexOf(n)&&I[W].push(n)}hasEventListener(W,n){if(void 0===this._listeners)return!1;const I=this._listeners;return void 0!==I[W]&&-1!==I[W].indexOf(n)}removeEventListener(W,n){if(void 0===this._listeners)return;const I=this._listeners[W];if(void 0!==I){const W=I.indexOf(n);-1!==W&&I.splice(W,1)}}dispatchEvent(W){if(void 0===this._listeners)return;const n=this._listeners[W.type];if(void 0!==n){W.target=this;const I=n.slice(0);for(let n=0,h=I.length;n<h;n++)I[n].call(this,W);W.target=null}}}const zN=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],vN=Math.PI/180,VN=180/Math.PI;function FN(){const W=4294967295*Math.random()|0,n=4294967295*Math.random()|0,I=4294967295*Math.random()|0,h=4294967295*Math.random()|0;return(zN[255&W]+zN[W>>8&255]+zN[W>>16&255]+zN[W>>24&255]+"-"+zN[255&n]+zN[n>>8&255]+"-"+zN[n>>16&15|64]+zN[n>>24&255]+"-"+zN[63&I|128]+zN[I>>8&255]+"-"+zN[I>>16&255]+zN[I>>24&255]+zN[255&h]+zN[h>>8&255]+zN[h>>16&255]+zN[h>>24&255]).toLowerCase()}function wN(W,n,I){return Math.max(n,Math.min(I,W))}function oN(W,n,I){return(1-I)*W+I*n}function DN(W){return!(W&W-1)&&0!==W}function xN(W){return Math.pow(2,Math.floor(Math.log(W)/Math.LN2))}function GN(W,n){switch(n.constructor){case Float32Array:return W;case Uint32Array:return W/4294967295;case Uint16Array:return W/65535;case Uint8Array:return W/255;case Int32Array:return Math.max(W/2147483647,-1);case Int16Array:return Math.max(W/32767,-1);case Int8Array:return Math.max(W/127,-1);default:throw new Error("Invalid component type.")}}function yN(W,n){switch(n.constructor){case Float32Array:return W;case Uint32Array:return Math.round(4294967295*W);case Uint16Array:return Math.round(65535*W);case Uint8Array:return Math.round(255*W);case Int32Array:return Math.round(2147483647*W);case Int16Array:return Math.round(32767*W);case Int8Array:return Math.round(127*W);default:throw new Error("Invalid component type.")}}class CN{constructor(W=0,n=0){CN.prototype.isVector2=!0,this.x=W,this.y=n}get width(){return this.x}set width(W){this.x=W}get height(){return this.y}set height(W){this.y=W}set(W,n){return this.x=W,this.y=n,this}setScalar(W){return this.x=W,this.y=W,this}setX(W){return this.x=W,this}setY(W){return this.y=W,this}setComponent(W,n){switch(W){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+W)}return this}getComponent(W){switch(W){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+W)}}clone(){return new this.constructor(this.x,this.y)}copy(W){return this.x=W.x,this.y=W.y,this}add(W){return this.x+=W.x,this.y+=W.y,this}addScalar(W){return this.x+=W,this.y+=W,this}addVectors(W,n){return this.x=W.x+n.x,this.y=W.y+n.y,this}addScaledVector(W,n){return this.x+=W.x*n,this.y+=W.y*n,this}sub(W){return this.x-=W.x,this.y-=W.y,this}subScalar(W){return this.x-=W,this.y-=W,this}subVectors(W,n){return this.x=W.x-n.x,this.y=W.y-n.y,this}multiply(W){return this.x*=W.x,this.y*=W.y,this}multiplyScalar(W){return this.x*=W,this.y*=W,this}divide(W){return this.x/=W.x,this.y/=W.y,this}divideScalar(W){return this.multiplyScalar(1/W)}applyMatrix3(W){const n=this.x,I=this.y,h=W.elements;return this.x=h[0]*n+h[3]*I+h[6],this.y=h[1]*n+h[4]*I+h[7],this}min(W){return this.x=Math.min(this.x,W.x),this.y=Math.min(this.y,W.y),this}max(W){return this.x=Math.max(this.x,W.x),this.y=Math.max(this.y,W.y),this}clamp(W,n){return this.x=Math.max(W.x,Math.min(n.x,this.x)),this.y=Math.max(W.y,Math.min(n.y,this.y)),this}clampScalar(W,n){return this.x=Math.max(W,Math.min(n,this.x)),this.y=Math.max(W,Math.min(n,this.y)),this}clampLength(W,n){const I=this.length();return this.divideScalar(I||1).multiplyScalar(Math.max(W,Math.min(n,I)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(W){return this.x*W.x+this.y*W.y}cross(W){return this.x*W.y-this.y*W.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(W){const n=Math.sqrt(this.lengthSq()*W.lengthSq());if(0===n)return Math.PI/2;const I=this.dot(W)/n;return Math.acos(wN(I,-1,1))}distanceTo(W){return Math.sqrt(this.distanceToSquared(W))}distanceToSquared(W){const n=this.x-W.x,I=this.y-W.y;return n*n+I*I}manhattanDistanceTo(W){return Math.abs(this.x-W.x)+Math.abs(this.y-W.y)}setLength(W){return this.normalize().multiplyScalar(W)}lerp(W,n){return this.x+=(W.x-this.x)*n,this.y+=(W.y-this.y)*n,this}lerpVectors(W,n,I){return this.x=W.x+(n.x-W.x)*I,this.y=W.y+(n.y-W.y)*I,this}equals(W){return W.x===this.x&&W.y===this.y}fromArray(W,n=0){return this.x=W[n],this.y=W[n+1],this}toArray(W=[],n=0){return W[n]=this.x,W[n+1]=this.y,W}fromBufferAttribute(W,n){return this.x=W.getX(n),this.y=W.getY(n),this}rotateAround(W,n){const I=Math.cos(n),h=Math.sin(n),q=this.x-W.x,$=this.y-W.y;return this.x=q*I-$*h+W.x,this.y=q*h+$*I+W.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class bN{constructor(W,n,I,h,q,$,k,_,N){bN.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==W&&this.set(W,n,I,h,q,$,k,_,N)}set(W,n,I,h,q,$,k,_,N){const c=this.elements;return c[0]=W,c[1]=h,c[2]=k,c[3]=n,c[4]=q,c[5]=_,c[6]=I,c[7]=$,c[8]=N,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(W){const n=this.elements,I=W.elements;return n[0]=I[0],n[1]=I[1],n[2]=I[2],n[3]=I[3],n[4]=I[4],n[5]=I[5],n[6]=I[6],n[7]=I[7],n[8]=I[8],this}extractBasis(W,n,I){return W.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),I.setFromMatrix3Column(this,2),this}setFromMatrix4(W){const n=W.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(W){return this.multiplyMatrices(this,W)}premultiply(W){return this.multiplyMatrices(W,this)}multiplyMatrices(W,n){const I=W.elements,h=n.elements,q=this.elements,$=I[0],k=I[3],_=I[6],N=I[1],c=I[4],P=I[7],S=I[2],g=I[5],B=I[8],E=h[0],u=h[3],Y=h[6],f=h[1],r=h[4],K=h[7],t=h[2],X=h[5],L=h[8];return q[0]=$*E+k*f+_*t,q[3]=$*u+k*r+_*X,q[6]=$*Y+k*K+_*L,q[1]=N*E+c*f+P*t,q[4]=N*u+c*r+P*X,q[7]=N*Y+c*K+P*L,q[2]=S*E+g*f+B*t,q[5]=S*u+g*r+B*X,q[8]=S*Y+g*K+B*L,this}multiplyScalar(W){const n=this.elements;return n[0]*=W,n[3]*=W,n[6]*=W,n[1]*=W,n[4]*=W,n[7]*=W,n[2]*=W,n[5]*=W,n[8]*=W,this}determinant(){const W=this.elements,n=W[0],I=W[1],h=W[2],q=W[3],$=W[4],k=W[5],_=W[6],N=W[7],c=W[8];return n*$*c-n*k*N-I*q*c+I*k*_+h*q*N-h*$*_}invert(){const W=this.elements,n=W[0],I=W[1],h=W[2],q=W[3],$=W[4],k=W[5],_=W[6],N=W[7],c=W[8],P=c*$-k*N,S=k*_-c*q,g=N*q-$*_,B=n*P+I*S+h*g;if(0===B)return this.set(0,0,0,0,0,0,0,0,0);const E=1/B;return W[0]=P*E,W[1]=(h*N-c*I)*E,W[2]=(k*I-h*$)*E,W[3]=S*E,W[4]=(c*n-h*_)*E,W[5]=(h*q-k*n)*E,W[6]=g*E,W[7]=(I*_-N*n)*E,W[8]=($*n-I*q)*E,this}transpose(){let W;const n=this.elements;return W=n[1],n[1]=n[3],n[3]=W,W=n[2],n[2]=n[6],n[6]=W,W=n[5],n[5]=n[7],n[7]=W,this}getNormalMatrix(W){return this.setFromMatrix4(W).invert().transpose()}transposeIntoArray(W){const n=this.elements;return W[0]=n[0],W[1]=n[3],W[2]=n[6],W[3]=n[1],W[4]=n[4],W[5]=n[7],W[6]=n[2],W[7]=n[5],W[8]=n[8],this}setUvTransform(W,n,I,h,q,$,k){const _=Math.cos(q),N=Math.sin(q);return this.set(I*_,I*N,-I*(_*$+N*k)+$+W,-h*N,h*_,-h*(-N*$+_*k)+k+n,0,0,1),this}scale(W,n){return this.premultiply(lN.makeScale(W,n)),this}rotate(W){return this.premultiply(lN.makeRotation(-W)),this}translate(W,n){return this.premultiply(lN.makeTranslation(W,n)),this}makeTranslation(W,n){return W.isVector2?this.set(1,0,W.x,0,1,W.y,0,0,1):this.set(1,0,W,0,1,n,0,0,1),this}makeRotation(W){const n=Math.cos(W),I=Math.sin(W);return this.set(n,-I,0,I,n,0,0,0,1),this}makeScale(W,n){return this.set(W,0,0,0,n,0,0,0,1),this}equals(W){const n=this.elements,I=W.elements;for(let W=0;W<9;W++)if(n[W]!==I[W])return!1;return!0}fromArray(W,n=0){for(let I=0;I<9;I++)this.elements[I]=W[I+n];return this}toArray(W=[],n=0){const I=this.elements;return W[n]=I[0],W[n+1]=I[1],W[n+2]=I[2],W[n+3]=I[3],W[n+4]=I[4],W[n+5]=I[5],W[n+6]=I[6],W[n+7]=I[7],W[n+8]=I[8],W}clone(){return(new this.constructor).fromArray(this.elements)}}const lN=new bN;function AN(W){for(let n=W.length-1;n>=0;--n)if(W[n]>=65535)return!0;return!1}function pN(W){return document.createElementNS("http://www.w3.org/1999/xhtml",W)}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const iN={};function UN(W){W in iN||(iN[W]=!0,console.warn(W))}function QN(W){return W<.04045?.0773993808*W:Math.pow(.9478672986*W+.0521327014,2.4)}function TN(W){return W<.0031308?12.92*W:1.055*Math.pow(W,.41666)-.055}const HN=(new bN).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),aN=(new bN).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),JN={[KN]:W=>W,[rN]:W=>W.convertSRGBToLinear(),[tN]:function(W){return W.convertSRGBToLinear().applyMatrix3(aN)}},sN={[KN]:W=>W,[rN]:W=>W.convertLinearToSRGB(),[tN]:function(W){return W.applyMatrix3(HN).convertLinearToSRGB()}},MN={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(W){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!W},get workingColorSpace(){return"srgb-linear"},set workingColorSpace(W){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(W,n,I){if(!1===this.enabled||n===I||!n||!I)return W;const h=JN[n],q=sN[I];if(void 0===h||void 0===q)throw new Error(`Unsupported color space conversion, "${n}" to "${I}".`);return q(h(W))},fromWorkingColorSpace:function(W,n){return this.convert(W,this.workingColorSpace,n)},toWorkingColorSpace:function(W,n){return this.convert(W,n,this.workingColorSpace)}};let Wc;class nc{static getDataURL(W){if(/^data:/i.test(W.src))return W.src;if("undefined"==typeof HTMLCanvasElement)return W.src;let n;if(W instanceof HTMLCanvasElement)n=W;else{void 0===Wc&&(Wc=pN("canvas")),Wc.width=W.width,Wc.height=W.height;const I=Wc.getContext("2d");W instanceof ImageData?I.putImageData(W,0,0):I.drawImage(W,0,0,W.width,W.height),n=Wc}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",W),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(W){if("undefined"!=typeof HTMLImageElement&&W instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&W instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&W instanceof ImageBitmap){const n=pN("canvas");n.width=W.width,n.height=W.height;const I=n.getContext("2d");I.drawImage(W,0,0,W.width,W.height);const h=I.getImageData(0,0,W.width,W.height),q=h.data;for(let W=0;W<q.length;W++)q[W]=255*QN(q[W]/255);return I.putImageData(h,0,0),n}if(W.data){const n=W.data.slice(0);for(let W=0;W<n.length;W++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[W]=Math.floor(255*QN(n[W]/255)):n[W]=QN(n[W]);return{data:n,width:W.width,height:W.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),W}}let Ic=0;class hc{constructor(W=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Ic++}),this.uuid=FN(),this.data=W,this.version=0}set needsUpdate(W){!0===W&&this.version++}toJSON(W){const n=void 0===W||"string"==typeof W;if(!n&&void 0!==W.images[this.uuid])return W.images[this.uuid];const I={uuid:this.uuid,url:""},h=this.data;if(null!==h){let W;if(Array.isArray(h)){W=[];for(let n=0,I=h.length;n<I;n++)h[n].isDataTexture?W.push(qc(h[n].image)):W.push(qc(h[n]))}else W=qc(h);I.url=W}return n||(W.images[this.uuid]=I),I}}function qc(W){return"undefined"!=typeof HTMLImageElement&&W instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&W instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&W instanceof ImageBitmap?nc.getDataURL(W):W.data?{data:Array.from(W.data),width:W.width,height:W.height,type:W.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let $c=0;class kc extends jN{constructor(W=kc.DEFAULT_IMAGE,n=kc.DEFAULT_MAPPING,I=1001,h=1001,q=1006,$=1008,k=1023,_=1009,N=kc.DEFAULT_ANISOTROPY,c=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:$c++}),this.uuid=FN(),this.name="",this.source=new hc(W),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=I,this.wrapT=h,this.magFilter=q,this.minFilter=$,this.anisotropy=N,this.format=k,this.internalFormat=null,this.type=_,this.offset=new CN(0,0),this.repeat=new CN(1,1),this.center=new CN(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new bN,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof c?this.colorSpace=c:(UN("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=3001===c?"srgb":""),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(W=null){this.source.data=W}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(W){return this.name=W.name,this.source=W.source,this.mipmaps=W.mipmaps.slice(0),this.mapping=W.mapping,this.channel=W.channel,this.wrapS=W.wrapS,this.wrapT=W.wrapT,this.magFilter=W.magFilter,this.minFilter=W.minFilter,this.anisotropy=W.anisotropy,this.format=W.format,this.internalFormat=W.internalFormat,this.type=W.type,this.offset.copy(W.offset),this.repeat.copy(W.repeat),this.center.copy(W.center),this.rotation=W.rotation,this.matrixAutoUpdate=W.matrixAutoUpdate,this.matrix.copy(W.matrix),this.generateMipmaps=W.generateMipmaps,this.premultiplyAlpha=W.premultiplyAlpha,this.flipY=W.flipY,this.unpackAlignment=W.unpackAlignment,this.colorSpace=W.colorSpace,this.userData=JSON.parse(JSON.stringify(W.userData)),this.needsUpdate=!0,this}toJSON(W){const n=void 0===W||"string"==typeof W;if(!n&&void 0!==W.textures[this.uuid])return W.textures[this.uuid];const I={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(W).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(I.userData=this.userData),n||(W.textures[this.uuid]=I),I}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(W){if(300!==this.mapping)return W;if(W.applyMatrix3(this.matrix),W.x<0||W.x>1)switch(this.wrapS){case 1e3:W.x=W.x-Math.floor(W.x);break;case 1001:W.x=W.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(W.x)%2)?W.x=Math.ceil(W.x)-W.x:W.x=W.x-Math.floor(W.x)}if(W.y<0||W.y>1)switch(this.wrapT){case 1e3:W.y=W.y-Math.floor(W.y);break;case 1001:W.y=W.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(W.y)%2)?W.y=Math.ceil(W.y)-W.y:W.y=W.y-Math.floor(W.y)}return this.flipY&&(W.y=1-W.y),W}set needsUpdate(W){!0===W&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return UN("THREE.Texture: Property .encoding has been replaced by .colorSpace."),"srgb"===this.colorSpace?3001:3e3}set encoding(W){UN("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=3001===W?"srgb":""}}kc.DEFAULT_IMAGE=null,kc.DEFAULT_MAPPING=300,kc.DEFAULT_ANISOTROPY=1;class _c{constructor(W=0,n=0,I=0,h=1){_c.prototype.isVector4=!0,this.x=W,this.y=n,this.z=I,this.w=h}get width(){return this.z}set width(W){this.z=W}get height(){return this.w}set height(W){this.w=W}set(W,n,I,h){return this.x=W,this.y=n,this.z=I,this.w=h,this}setScalar(W){return this.x=W,this.y=W,this.z=W,this.w=W,this}setX(W){return this.x=W,this}setY(W){return this.y=W,this}setZ(W){return this.z=W,this}setW(W){return this.w=W,this}setComponent(W,n){switch(W){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+W)}return this}getComponent(W){switch(W){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+W)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(W){return this.x=W.x,this.y=W.y,this.z=W.z,this.w=void 0!==W.w?W.w:1,this}add(W){return this.x+=W.x,this.y+=W.y,this.z+=W.z,this.w+=W.w,this}addScalar(W){return this.x+=W,this.y+=W,this.z+=W,this.w+=W,this}addVectors(W,n){return this.x=W.x+n.x,this.y=W.y+n.y,this.z=W.z+n.z,this.w=W.w+n.w,this}addScaledVector(W,n){return this.x+=W.x*n,this.y+=W.y*n,this.z+=W.z*n,this.w+=W.w*n,this}sub(W){return this.x-=W.x,this.y-=W.y,this.z-=W.z,this.w-=W.w,this}subScalar(W){return this.x-=W,this.y-=W,this.z-=W,this.w-=W,this}subVectors(W,n){return this.x=W.x-n.x,this.y=W.y-n.y,this.z=W.z-n.z,this.w=W.w-n.w,this}multiply(W){return this.x*=W.x,this.y*=W.y,this.z*=W.z,this.w*=W.w,this}multiplyScalar(W){return this.x*=W,this.y*=W,this.z*=W,this.w*=W,this}applyMatrix4(W){const n=this.x,I=this.y,h=this.z,q=this.w,$=W.elements;return this.x=$[0]*n+$[4]*I+$[8]*h+$[12]*q,this.y=$[1]*n+$[5]*I+$[9]*h+$[13]*q,this.z=$[2]*n+$[6]*I+$[10]*h+$[14]*q,this.w=$[3]*n+$[7]*I+$[11]*h+$[15]*q,this}divideScalar(W){return this.multiplyScalar(1/W)}setAxisAngleFromQuaternion(W){this.w=2*Math.acos(W.w);const n=Math.sqrt(1-W.w*W.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=W.x/n,this.y=W.y/n,this.z=W.z/n),this}setAxisAngleFromRotationMatrix(W){let n,I,h,q;const $=W.elements,k=$[0],_=$[4],N=$[8],c=$[1],P=$[5],S=$[9],g=$[2],B=$[6],E=$[10];if(Math.abs(_-c)<.01&&Math.abs(N-g)<.01&&Math.abs(S-B)<.01){if(Math.abs(_+c)<.1&&Math.abs(N+g)<.1&&Math.abs(S+B)<.1&&Math.abs(k+P+E-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const W=(k+1)/2,$=(P+1)/2,u=(E+1)/2,Y=(_+c)/4,f=(N+g)/4,r=(S+B)/4;return W>$&&W>u?W<.01?(I=0,h=.707106781,q=.707106781):(I=Math.sqrt(W),h=Y/I,q=f/I):$>u?$<.01?(I=.707106781,h=0,q=.707106781):(h=Math.sqrt($),I=Y/h,q=r/h):u<.01?(I=.707106781,h=.707106781,q=0):(q=Math.sqrt(u),I=f/q,h=r/q),this.set(I,h,q,n),this}let u=Math.sqrt((B-S)*(B-S)+(N-g)*(N-g)+(c-_)*(c-_));return Math.abs(u)<.001&&(u=1),this.x=(B-S)/u,this.y=(N-g)/u,this.z=(c-_)/u,this.w=Math.acos((k+P+E-1)/2),this}min(W){return this.x=Math.min(this.x,W.x),this.y=Math.min(this.y,W.y),this.z=Math.min(this.z,W.z),this.w=Math.min(this.w,W.w),this}max(W){return this.x=Math.max(this.x,W.x),this.y=Math.max(this.y,W.y),this.z=Math.max(this.z,W.z),this.w=Math.max(this.w,W.w),this}clamp(W,n){return this.x=Math.max(W.x,Math.min(n.x,this.x)),this.y=Math.max(W.y,Math.min(n.y,this.y)),this.z=Math.max(W.z,Math.min(n.z,this.z)),this.w=Math.max(W.w,Math.min(n.w,this.w)),this}clampScalar(W,n){return this.x=Math.max(W,Math.min(n,this.x)),this.y=Math.max(W,Math.min(n,this.y)),this.z=Math.max(W,Math.min(n,this.z)),this.w=Math.max(W,Math.min(n,this.w)),this}clampLength(W,n){const I=this.length();return this.divideScalar(I||1).multiplyScalar(Math.max(W,Math.min(n,I)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(W){return this.x*W.x+this.y*W.y+this.z*W.z+this.w*W.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(W){return this.normalize().multiplyScalar(W)}lerp(W,n){return this.x+=(W.x-this.x)*n,this.y+=(W.y-this.y)*n,this.z+=(W.z-this.z)*n,this.w+=(W.w-this.w)*n,this}lerpVectors(W,n,I){return this.x=W.x+(n.x-W.x)*I,this.y=W.y+(n.y-W.y)*I,this.z=W.z+(n.z-W.z)*I,this.w=W.w+(n.w-W.w)*I,this}equals(W){return W.x===this.x&&W.y===this.y&&W.z===this.z&&W.w===this.w}fromArray(W,n=0){return this.x=W[n],this.y=W[n+1],this.z=W[n+2],this.w=W[n+3],this}toArray(W=[],n=0){return W[n]=this.x,W[n+1]=this.y,W[n+2]=this.z,W[n+3]=this.w,W}fromBufferAttribute(W,n){return this.x=W.getX(n),this.y=W.getY(n),this.z=W.getZ(n),this.w=W.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Nc extends jN{constructor(W=1,n=1,I={}){super(),this.isRenderTarget=!0,this.width=W,this.height=n,this.depth=1,this.scissor=new _c(0,0,W,n),this.scissorTest=!1,this.viewport=new _c(0,0,W,n);const h={width:W,height:n,depth:1};void 0!==I.encoding&&(UN("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),I.colorSpace=3001===I.encoding?"srgb":""),this.texture=new kc(h,I.mapping,I.wrapS,I.wrapT,I.magFilter,I.minFilter,I.format,I.type,I.anisotropy,I.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==I.generateMipmaps&&I.generateMipmaps,this.texture.internalFormat=void 0!==I.internalFormat?I.internalFormat:null,this.texture.minFilter=void 0!==I.minFilter?I.minFilter:1006,this.depthBuffer=void 0===I.depthBuffer||I.depthBuffer,this.stencilBuffer=void 0!==I.stencilBuffer&&I.stencilBuffer,this.depthTexture=void 0!==I.depthTexture?I.depthTexture:null,this.samples=void 0!==I.samples?I.samples:0}setSize(W,n,I=1){this.width===W&&this.height===n&&this.depth===I||(this.width=W,this.height=n,this.depth=I,this.texture.image.width=W,this.texture.image.height=n,this.texture.image.depth=I,this.dispose()),this.viewport.set(0,0,W,n),this.scissor.set(0,0,W,n)}clone(){return(new this.constructor).copy(this)}copy(W){this.width=W.width,this.height=W.height,this.depth=W.depth,this.scissor.copy(W.scissor),this.scissorTest=W.scissorTest,this.viewport.copy(W.viewport),this.texture=W.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},W.texture.image);return this.texture.source=new hc(n),this.depthBuffer=W.depthBuffer,this.stencilBuffer=W.stencilBuffer,null!==W.depthTexture&&(this.depthTexture=W.depthTexture.clone()),this.samples=W.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class cc extends Nc{constructor(W=1,n=1,I={}){super(W,n,I),this.isWebGLRenderTarget=!0}}class Pc extends kc{constructor(W=null,n=1,I=1,h=1){super(null),this.isDataArrayTexture=!0,this.image={data:W,width:n,height:I,depth:h},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Sc{constructor(W=0,n=0,I=0,h=1){this.isQuaternion=!0,this._x=W,this._y=n,this._z=I,this._w=h}static slerpFlat(W,n,I,h,q,$,k){let _=I[h+0],N=I[h+1],c=I[h+2],P=I[h+3];const S=q[$+0],g=q[$+1],B=q[$+2],E=q[$+3];if(0===k)return W[n+0]=_,W[n+1]=N,W[n+2]=c,void(W[n+3]=P);if(1===k)return W[n+0]=S,W[n+1]=g,W[n+2]=B,void(W[n+3]=E);if(P!==E||_!==S||N!==g||c!==B){let W=1-k;const n=_*S+N*g+c*B+P*E,I=n>=0?1:-1,h=1-n*n;if(h>Number.EPSILON){const q=Math.sqrt(h),$=Math.atan2(q,n*I);W=Math.sin(W*$)/q,k=Math.sin(k*$)/q}const q=k*I;if(_=_*W+S*q,N=N*W+g*q,c=c*W+B*q,P=P*W+E*q,W===1-k){const W=1/Math.sqrt(_*_+N*N+c*c+P*P);_*=W,N*=W,c*=W,P*=W}}W[n]=_,W[n+1]=N,W[n+2]=c,W[n+3]=P}static multiplyQuaternionsFlat(W,n,I,h,q,$){const k=I[h],_=I[h+1],N=I[h+2],c=I[h+3],P=q[$],S=q[$+1],g=q[$+2],B=q[$+3];return W[n]=k*B+c*P+_*g-N*S,W[n+1]=_*B+c*S+N*P-k*g,W[n+2]=N*B+c*g+k*S-_*P,W[n+3]=c*B-k*P-_*S-N*g,W}get x(){return this._x}set x(W){this._x=W,this._onChangeCallback()}get y(){return this._y}set y(W){this._y=W,this._onChangeCallback()}get z(){return this._z}set z(W){this._z=W,this._onChangeCallback()}get w(){return this._w}set w(W){this._w=W,this._onChangeCallback()}set(W,n,I,h){return this._x=W,this._y=n,this._z=I,this._w=h,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(W){return this._x=W.x,this._y=W.y,this._z=W.z,this._w=W.w,this._onChangeCallback(),this}setFromEuler(W,n){const I=W._x,h=W._y,q=W._z,$=W._order,k=Math.cos,_=Math.sin,N=k(I/2),c=k(h/2),P=k(q/2),S=_(I/2),g=_(h/2),B=_(q/2);switch($){case"XYZ":this._x=S*c*P+N*g*B,this._y=N*g*P-S*c*B,this._z=N*c*B+S*g*P,this._w=N*c*P-S*g*B;break;case"YXZ":this._x=S*c*P+N*g*B,this._y=N*g*P-S*c*B,this._z=N*c*B-S*g*P,this._w=N*c*P+S*g*B;break;case"ZXY":this._x=S*c*P-N*g*B,this._y=N*g*P+S*c*B,this._z=N*c*B+S*g*P,this._w=N*c*P-S*g*B;break;case"ZYX":this._x=S*c*P-N*g*B,this._y=N*g*P+S*c*B,this._z=N*c*B-S*g*P,this._w=N*c*P+S*g*B;break;case"YZX":this._x=S*c*P+N*g*B,this._y=N*g*P+S*c*B,this._z=N*c*B-S*g*P,this._w=N*c*P-S*g*B;break;case"XZY":this._x=S*c*P-N*g*B,this._y=N*g*P-S*c*B,this._z=N*c*B+S*g*P,this._w=N*c*P+S*g*B;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+$)}return!1!==n&&this._onChangeCallback(),this}setFromAxisAngle(W,n){const I=n/2,h=Math.sin(I);return this._x=W.x*h,this._y=W.y*h,this._z=W.z*h,this._w=Math.cos(I),this._onChangeCallback(),this}setFromRotationMatrix(W){const n=W.elements,I=n[0],h=n[4],q=n[8],$=n[1],k=n[5],_=n[9],N=n[2],c=n[6],P=n[10],S=I+k+P;if(S>0){const W=.5/Math.sqrt(S+1);this._w=.25/W,this._x=(c-_)*W,this._y=(q-N)*W,this._z=($-h)*W}else if(I>k&&I>P){const W=2*Math.sqrt(1+I-k-P);this._w=(c-_)/W,this._x=.25*W,this._y=(h+$)/W,this._z=(q+N)/W}else if(k>P){const W=2*Math.sqrt(1+k-I-P);this._w=(q-N)/W,this._x=(h+$)/W,this._y=.25*W,this._z=(_+c)/W}else{const W=2*Math.sqrt(1+P-I-k);this._w=($-h)/W,this._x=(q+N)/W,this._y=(_+c)/W,this._z=.25*W}return this._onChangeCallback(),this}setFromUnitVectors(W,n){let I=W.dot(n)+1;return I<Number.EPSILON?(I=0,Math.abs(W.x)>Math.abs(W.z)?(this._x=-W.y,this._y=W.x,this._z=0,this._w=I):(this._x=0,this._y=-W.z,this._z=W.y,this._w=I)):(this._x=W.y*n.z-W.z*n.y,this._y=W.z*n.x-W.x*n.z,this._z=W.x*n.y-W.y*n.x,this._w=I),this.normalize()}angleTo(W){return 2*Math.acos(Math.abs(wN(this.dot(W),-1,1)))}rotateTowards(W,n){const I=this.angleTo(W);if(0===I)return this;const h=Math.min(1,n/I);return this.slerp(W,h),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(W){return this._x*W._x+this._y*W._y+this._z*W._z+this._w*W._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let W=this.length();return 0===W?(this._x=0,this._y=0,this._z=0,this._w=1):(W=1/W,this._x=this._x*W,this._y=this._y*W,this._z=this._z*W,this._w=this._w*W),this._onChangeCallback(),this}multiply(W){return this.multiplyQuaternions(this,W)}premultiply(W){return this.multiplyQuaternions(W,this)}multiplyQuaternions(W,n){const I=W._x,h=W._y,q=W._z,$=W._w,k=n._x,_=n._y,N=n._z,c=n._w;return this._x=I*c+$*k+h*N-q*_,this._y=h*c+$*_+q*k-I*N,this._z=q*c+$*N+I*_-h*k,this._w=$*c-I*k-h*_-q*N,this._onChangeCallback(),this}slerp(W,n){if(0===n)return this;if(1===n)return this.copy(W);const I=this._x,h=this._y,q=this._z,$=this._w;let k=$*W._w+I*W._x+h*W._y+q*W._z;if(k<0?(this._w=-W._w,this._x=-W._x,this._y=-W._y,this._z=-W._z,k=-k):this.copy(W),k>=1)return this._w=$,this._x=I,this._y=h,this._z=q,this;const _=1-k*k;if(_<=Number.EPSILON){const W=1-n;return this._w=W*$+n*this._w,this._x=W*I+n*this._x,this._y=W*h+n*this._y,this._z=W*q+n*this._z,this.normalize(),this._onChangeCallback(),this}const N=Math.sqrt(_),c=Math.atan2(N,k),P=Math.sin((1-n)*c)/N,S=Math.sin(n*c)/N;return this._w=$*P+this._w*S,this._x=I*P+this._x*S,this._y=h*P+this._y*S,this._z=q*P+this._z*S,this._onChangeCallback(),this}slerpQuaternions(W,n,I){return this.copy(W).slerp(n,I)}random(){const W=Math.random(),n=Math.sqrt(1-W),I=Math.sqrt(W),h=2*Math.PI*Math.random(),q=2*Math.PI*Math.random();return this.set(n*Math.cos(h),I*Math.sin(q),I*Math.cos(q),n*Math.sin(h))}equals(W){return W._x===this._x&&W._y===this._y&&W._z===this._z&&W._w===this._w}fromArray(W,n=0){return this._x=W[n],this._y=W[n+1],this._z=W[n+2],this._w=W[n+3],this._onChangeCallback(),this}toArray(W=[],n=0){return W[n]=this._x,W[n+1]=this._y,W[n+2]=this._z,W[n+3]=this._w,W}fromBufferAttribute(W,n){return this._x=W.getX(n),this._y=W.getY(n),this._z=W.getZ(n),this._w=W.getW(n),this}toJSON(){return this.toArray()}_onChange(W){return this._onChangeCallback=W,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class gc{constructor(W=0,n=0,I=0){gc.prototype.isVector3=!0,this.x=W,this.y=n,this.z=I}set(W,n,I){return void 0===I&&(I=this.z),this.x=W,this.y=n,this.z=I,this}setScalar(W){return this.x=W,this.y=W,this.z=W,this}setX(W){return this.x=W,this}setY(W){return this.y=W,this}setZ(W){return this.z=W,this}setComponent(W,n){switch(W){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+W)}return this}getComponent(W){switch(W){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+W)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(W){return this.x=W.x,this.y=W.y,this.z=W.z,this}add(W){return this.x+=W.x,this.y+=W.y,this.z+=W.z,this}addScalar(W){return this.x+=W,this.y+=W,this.z+=W,this}addVectors(W,n){return this.x=W.x+n.x,this.y=W.y+n.y,this.z=W.z+n.z,this}addScaledVector(W,n){return this.x+=W.x*n,this.y+=W.y*n,this.z+=W.z*n,this}sub(W){return this.x-=W.x,this.y-=W.y,this.z-=W.z,this}subScalar(W){return this.x-=W,this.y-=W,this.z-=W,this}subVectors(W,n){return this.x=W.x-n.x,this.y=W.y-n.y,this.z=W.z-n.z,this}multiply(W){return this.x*=W.x,this.y*=W.y,this.z*=W.z,this}multiplyScalar(W){return this.x*=W,this.y*=W,this.z*=W,this}multiplyVectors(W,n){return this.x=W.x*n.x,this.y=W.y*n.y,this.z=W.z*n.z,this}applyEuler(W){return this.applyQuaternion(Ec.setFromEuler(W))}applyAxisAngle(W,n){return this.applyQuaternion(Ec.setFromAxisAngle(W,n))}applyMatrix3(W){const n=this.x,I=this.y,h=this.z,q=W.elements;return this.x=q[0]*n+q[3]*I+q[6]*h,this.y=q[1]*n+q[4]*I+q[7]*h,this.z=q[2]*n+q[5]*I+q[8]*h,this}applyNormalMatrix(W){return this.applyMatrix3(W).normalize()}applyMatrix4(W){const n=this.x,I=this.y,h=this.z,q=W.elements,$=1/(q[3]*n+q[7]*I+q[11]*h+q[15]);return this.x=(q[0]*n+q[4]*I+q[8]*h+q[12])*$,this.y=(q[1]*n+q[5]*I+q[9]*h+q[13])*$,this.z=(q[2]*n+q[6]*I+q[10]*h+q[14])*$,this}applyQuaternion(W){const n=this.x,I=this.y,h=this.z,q=W.x,$=W.y,k=W.z,_=W.w,N=_*n+$*h-k*I,c=_*I+k*n-q*h,P=_*h+q*I-$*n,S=-q*n-$*I-k*h;return this.x=N*_+S*-q+c*-k-P*-$,this.y=c*_+S*-$+P*-q-N*-k,this.z=P*_+S*-k+N*-$-c*-q,this}project(W){return this.applyMatrix4(W.matrixWorldInverse).applyMatrix4(W.projectionMatrix)}unproject(W){return this.applyMatrix4(W.projectionMatrixInverse).applyMatrix4(W.matrixWorld)}transformDirection(W){const n=this.x,I=this.y,h=this.z,q=W.elements;return this.x=q[0]*n+q[4]*I+q[8]*h,this.y=q[1]*n+q[5]*I+q[9]*h,this.z=q[2]*n+q[6]*I+q[10]*h,this.normalize()}divide(W){return this.x/=W.x,this.y/=W.y,this.z/=W.z,this}divideScalar(W){return this.multiplyScalar(1/W)}min(W){return this.x=Math.min(this.x,W.x),this.y=Math.min(this.y,W.y),this.z=Math.min(this.z,W.z),this}max(W){return this.x=Math.max(this.x,W.x),this.y=Math.max(this.y,W.y),this.z=Math.max(this.z,W.z),this}clamp(W,n){return this.x=Math.max(W.x,Math.min(n.x,this.x)),this.y=Math.max(W.y,Math.min(n.y,this.y)),this.z=Math.max(W.z,Math.min(n.z,this.z)),this}clampScalar(W,n){return this.x=Math.max(W,Math.min(n,this.x)),this.y=Math.max(W,Math.min(n,this.y)),this.z=Math.max(W,Math.min(n,this.z)),this}clampLength(W,n){const I=this.length();return this.divideScalar(I||1).multiplyScalar(Math.max(W,Math.min(n,I)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(W){return this.x*W.x+this.y*W.y+this.z*W.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(W){return this.normalize().multiplyScalar(W)}lerp(W,n){return this.x+=(W.x-this.x)*n,this.y+=(W.y-this.y)*n,this.z+=(W.z-this.z)*n,this}lerpVectors(W,n,I){return this.x=W.x+(n.x-W.x)*I,this.y=W.y+(n.y-W.y)*I,this.z=W.z+(n.z-W.z)*I,this}cross(W){return this.crossVectors(this,W)}crossVectors(W,n){const I=W.x,h=W.y,q=W.z,$=n.x,k=n.y,_=n.z;return this.x=h*_-q*k,this.y=q*$-I*_,this.z=I*k-h*$,this}projectOnVector(W){const n=W.lengthSq();if(0===n)return this.set(0,0,0);const I=W.dot(this)/n;return this.copy(W).multiplyScalar(I)}projectOnPlane(W){return Bc.copy(this).projectOnVector(W),this.sub(Bc)}reflect(W){return this.sub(Bc.copy(W).multiplyScalar(2*this.dot(W)))}angleTo(W){const n=Math.sqrt(this.lengthSq()*W.lengthSq());if(0===n)return Math.PI/2;const I=this.dot(W)/n;return Math.acos(wN(I,-1,1))}distanceTo(W){return Math.sqrt(this.distanceToSquared(W))}distanceToSquared(W){const n=this.x-W.x,I=this.y-W.y,h=this.z-W.z;return n*n+I*I+h*h}manhattanDistanceTo(W){return Math.abs(this.x-W.x)+Math.abs(this.y-W.y)+Math.abs(this.z-W.z)}setFromSpherical(W){return this.setFromSphericalCoords(W.radius,W.phi,W.theta)}setFromSphericalCoords(W,n,I){const h=Math.sin(n)*W;return this.x=h*Math.sin(I),this.y=Math.cos(n)*W,this.z=h*Math.cos(I),this}setFromCylindrical(W){return this.setFromCylindricalCoords(W.radius,W.theta,W.y)}setFromCylindricalCoords(W,n,I){return this.x=W*Math.sin(n),this.y=I,this.z=W*Math.cos(n),this}setFromMatrixPosition(W){const n=W.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(W){const n=this.setFromMatrixColumn(W,0).length(),I=this.setFromMatrixColumn(W,1).length(),h=this.setFromMatrixColumn(W,2).length();return this.x=n,this.y=I,this.z=h,this}setFromMatrixColumn(W,n){return this.fromArray(W.elements,4*n)}setFromMatrix3Column(W,n){return this.fromArray(W.elements,3*n)}setFromEuler(W){return this.x=W._x,this.y=W._y,this.z=W._z,this}setFromColor(W){return this.x=W.r,this.y=W.g,this.z=W.b,this}equals(W){return W.x===this.x&&W.y===this.y&&W.z===this.z}fromArray(W,n=0){return this.x=W[n],this.y=W[n+1],this.z=W[n+2],this}toArray(W=[],n=0){return W[n]=this.x,W[n+1]=this.y,W[n+2]=this.z,W}fromBufferAttribute(W,n){return this.x=W.getX(n),this.y=W.getY(n),this.z=W.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const W=2*(Math.random()-.5),n=Math.random()*Math.PI*2,I=Math.sqrt(1-W**2);return this.x=I*Math.cos(n),this.y=I*Math.sin(n),this.z=W,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Bc=new gc,Ec=new Sc;class uc{constructor(W=new gc(1/0,1/0,1/0),n=new gc(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=W,this.max=n}set(W,n){return this.min.copy(W),this.max.copy(n),this}setFromArray(W){this.makeEmpty();for(let n=0,I=W.length;n<I;n+=3)this.expandByPoint(fc.fromArray(W,n));return this}setFromBufferAttribute(W){this.makeEmpty();for(let n=0,I=W.count;n<I;n++)this.expandByPoint(fc.fromBufferAttribute(W,n));return this}setFromPoints(W){this.makeEmpty();for(let n=0,I=W.length;n<I;n++)this.expandByPoint(W[n]);return this}setFromCenterAndSize(W,n){const I=fc.copy(n).multiplyScalar(.5);return this.min.copy(W).sub(I),this.max.copy(W).add(I),this}setFromObject(W,n=!1){return this.makeEmpty(),this.expandByObject(W,n)}clone(){return(new this.constructor).copy(this)}copy(W){return this.min.copy(W.min),this.max.copy(W.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(W){return this.isEmpty()?W.set(0,0,0):W.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(W){return this.isEmpty()?W.set(0,0,0):W.subVectors(this.max,this.min)}expandByPoint(W){return this.min.min(W),this.max.max(W),this}expandByVector(W){return this.min.sub(W),this.max.add(W),this}expandByScalar(W){return this.min.addScalar(-W),this.max.addScalar(W),this}expandByObject(W,n=!1){if(W.updateWorldMatrix(!1,!1),void 0!==W.boundingBox)null===W.boundingBox&&W.computeBoundingBox(),rc.copy(W.boundingBox),rc.applyMatrix4(W.matrixWorld),this.union(rc);else{const I=W.geometry;if(void 0!==I)if(n&&void 0!==I.attributes&&void 0!==I.attributes.position){const n=I.attributes.position;for(let I=0,h=n.count;I<h;I++)fc.fromBufferAttribute(n,I).applyMatrix4(W.matrixWorld),this.expandByPoint(fc)}else null===I.boundingBox&&I.computeBoundingBox(),rc.copy(I.boundingBox),rc.applyMatrix4(W.matrixWorld),this.union(rc)}const I=W.children;for(let W=0,h=I.length;W<h;W++)this.expandByObject(I[W],n);return this}containsPoint(W){return!(W.x<this.min.x||W.x>this.max.x||W.y<this.min.y||W.y>this.max.y||W.z<this.min.z||W.z>this.max.z)}containsBox(W){return this.min.x<=W.min.x&&W.max.x<=this.max.x&&this.min.y<=W.min.y&&W.max.y<=this.max.y&&this.min.z<=W.min.z&&W.max.z<=this.max.z}getParameter(W,n){return n.set((W.x-this.min.x)/(this.max.x-this.min.x),(W.y-this.min.y)/(this.max.y-this.min.y),(W.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(W){return!(W.max.x<this.min.x||W.min.x>this.max.x||W.max.y<this.min.y||W.min.y>this.max.y||W.max.z<this.min.z||W.min.z>this.max.z)}intersectsSphere(W){return this.clampPoint(W.center,fc),fc.distanceToSquared(W.center)<=W.radius*W.radius}intersectsPlane(W){let n,I;return W.normal.x>0?(n=W.normal.x*this.min.x,I=W.normal.x*this.max.x):(n=W.normal.x*this.max.x,I=W.normal.x*this.min.x),W.normal.y>0?(n+=W.normal.y*this.min.y,I+=W.normal.y*this.max.y):(n+=W.normal.y*this.max.y,I+=W.normal.y*this.min.y),W.normal.z>0?(n+=W.normal.z*this.min.z,I+=W.normal.z*this.max.z):(n+=W.normal.z*this.max.z,I+=W.normal.z*this.min.z),n<=-W.constant&&I>=-W.constant}intersectsTriangle(W){if(this.isEmpty())return!1;this.getCenter(dc),mc.subVectors(this.max,dc),Kc.subVectors(W.a,dc),tc.subVectors(W.b,dc),Xc.subVectors(W.c,dc),Lc.subVectors(tc,Kc),Oc.subVectors(Xc,tc),Zc.subVectors(Kc,Xc);let n=[0,-Lc.z,Lc.y,0,-Oc.z,Oc.y,0,-Zc.z,Zc.y,Lc.z,0,-Lc.x,Oc.z,0,-Oc.x,Zc.z,0,-Zc.x,-Lc.y,Lc.x,0,-Oc.y,Oc.x,0,-Zc.y,Zc.x,0];return!!jc(n,Kc,tc,Xc,mc)&&(n=[1,0,0,0,1,0,0,0,1],!!jc(n,Kc,tc,Xc,mc)&&(Rc.crossVectors(Lc,Oc),n=[Rc.x,Rc.y,Rc.z],jc(n,Kc,tc,Xc,mc)))}clampPoint(W,n){return n.copy(W).clamp(this.min,this.max)}distanceToPoint(W){return this.clampPoint(W,fc).distanceTo(W)}getBoundingSphere(W){return this.isEmpty()?W.makeEmpty():(this.getCenter(W.center),W.radius=.5*this.getSize(fc).length()),W}intersect(W){return this.min.max(W.min),this.max.min(W.max),this.isEmpty()&&this.makeEmpty(),this}union(W){return this.min.min(W.min),this.max.max(W.max),this}applyMatrix4(W){return this.isEmpty()||(Yc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(W),Yc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(W),Yc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(W),Yc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(W),Yc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(W),Yc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(W),Yc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(W),Yc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(W),this.setFromPoints(Yc)),this}translate(W){return this.min.add(W),this.max.add(W),this}equals(W){return W.min.equals(this.min)&&W.max.equals(this.max)}}const Yc=[new gc,new gc,new gc,new gc,new gc,new gc,new gc,new gc],fc=new gc,rc=new uc,Kc=new gc,tc=new gc,Xc=new gc,Lc=new gc,Oc=new gc,Zc=new gc,dc=new gc,mc=new gc,Rc=new gc,ec=new gc;function jc(W,n,I,h,q){for(let $=0,k=W.length-3;$<=k;$+=3){ec.fromArray(W,$);const k=q.x*Math.abs(ec.x)+q.y*Math.abs(ec.y)+q.z*Math.abs(ec.z),_=n.dot(ec),N=I.dot(ec),c=h.dot(ec);if(Math.max(-Math.max(_,N,c),Math.min(_,N,c))>k)return!1}return!0}const zc=new uc,vc=new gc,Vc=new gc;class Fc{constructor(W=new gc,n=-1){this.center=W,this.radius=n}set(W,n){return this.center.copy(W),this.radius=n,this}setFromPoints(W,n){const I=this.center;void 0!==n?I.copy(n):zc.setFromPoints(W).getCenter(I);let h=0;for(let n=0,q=W.length;n<q;n++)h=Math.max(h,I.distanceToSquared(W[n]));return this.radius=Math.sqrt(h),this}copy(W){return this.center.copy(W.center),this.radius=W.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(W){return W.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(W){return W.distanceTo(this.center)-this.radius}intersectsSphere(W){const n=this.radius+W.radius;return W.center.distanceToSquared(this.center)<=n*n}intersectsBox(W){return W.intersectsSphere(this)}intersectsPlane(W){return Math.abs(W.distanceToPoint(this.center))<=this.radius}clampPoint(W,n){const I=this.center.distanceToSquared(W);return n.copy(W),I>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(W){return this.isEmpty()?(W.makeEmpty(),W):(W.set(this.center,this.center),W.expandByScalar(this.radius),W)}applyMatrix4(W){return this.center.applyMatrix4(W),this.radius=this.radius*W.getMaxScaleOnAxis(),this}translate(W){return this.center.add(W),this}expandByPoint(W){if(this.isEmpty())return this.center.copy(W),this.radius=0,this;vc.subVectors(W,this.center);const n=vc.lengthSq();if(n>this.radius*this.radius){const W=Math.sqrt(n),I=.5*(W-this.radius);this.center.addScaledVector(vc,I/W),this.radius+=I}return this}union(W){return W.isEmpty()?this:this.isEmpty()?(this.copy(W),this):(!0===this.center.equals(W.center)?this.radius=Math.max(this.radius,W.radius):(Vc.subVectors(W.center,this.center).setLength(W.radius),this.expandByPoint(vc.copy(W.center).add(Vc)),this.expandByPoint(vc.copy(W.center).sub(Vc))),this)}equals(W){return W.center.equals(this.center)&&W.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const wc=new gc,oc=new gc,Dc=new gc,xc=new gc,Gc=new gc,yc=new gc,Cc=new gc;class bc{constructor(W,n,I,h,q,$,k,_,N,c,P,S,g,B,E,u){bc.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==W&&this.set(W,n,I,h,q,$,k,_,N,c,P,S,g,B,E,u)}set(W,n,I,h,q,$,k,_,N,c,P,S,g,B,E,u){const Y=this.elements;return Y[0]=W,Y[4]=n,Y[8]=I,Y[12]=h,Y[1]=q,Y[5]=$,Y[9]=k,Y[13]=_,Y[2]=N,Y[6]=c,Y[10]=P,Y[14]=S,Y[3]=g,Y[7]=B,Y[11]=E,Y[15]=u,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new bc).fromArray(this.elements)}copy(W){const n=this.elements,I=W.elements;return n[0]=I[0],n[1]=I[1],n[2]=I[2],n[3]=I[3],n[4]=I[4],n[5]=I[5],n[6]=I[6],n[7]=I[7],n[8]=I[8],n[9]=I[9],n[10]=I[10],n[11]=I[11],n[12]=I[12],n[13]=I[13],n[14]=I[14],n[15]=I[15],this}copyPosition(W){const n=this.elements,I=W.elements;return n[12]=I[12],n[13]=I[13],n[14]=I[14],this}setFromMatrix3(W){const n=W.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(W,n,I){return W.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),I.setFromMatrixColumn(this,2),this}makeBasis(W,n,I){return this.set(W.x,n.x,I.x,0,W.y,n.y,I.y,0,W.z,n.z,I.z,0,0,0,0,1),this}extractRotation(W){const n=this.elements,I=W.elements,h=1/lc.setFromMatrixColumn(W,0).length(),q=1/lc.setFromMatrixColumn(W,1).length(),$=1/lc.setFromMatrixColumn(W,2).length();return n[0]=I[0]*h,n[1]=I[1]*h,n[2]=I[2]*h,n[3]=0,n[4]=I[4]*q,n[5]=I[5]*q,n[6]=I[6]*q,n[7]=0,n[8]=I[8]*$,n[9]=I[9]*$,n[10]=I[10]*$,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(W){const n=this.elements,I=W.x,h=W.y,q=W.z,$=Math.cos(I),k=Math.sin(I),_=Math.cos(h),N=Math.sin(h),c=Math.cos(q),P=Math.sin(q);if("XYZ"===W.order){const W=$*c,I=$*P,h=k*c,q=k*P;n[0]=_*c,n[4]=-_*P,n[8]=N,n[1]=I+h*N,n[5]=W-q*N,n[9]=-k*_,n[2]=q-W*N,n[6]=h+I*N,n[10]=$*_}else if("YXZ"===W.order){const W=_*c,I=_*P,h=N*c,q=N*P;n[0]=W+q*k,n[4]=h*k-I,n[8]=$*N,n[1]=$*P,n[5]=$*c,n[9]=-k,n[2]=I*k-h,n[6]=q+W*k,n[10]=$*_}else if("ZXY"===W.order){const W=_*c,I=_*P,h=N*c,q=N*P;n[0]=W-q*k,n[4]=-$*P,n[8]=h+I*k,n[1]=I+h*k,n[5]=$*c,n[9]=q-W*k,n[2]=-$*N,n[6]=k,n[10]=$*_}else if("ZYX"===W.order){const W=$*c,I=$*P,h=k*c,q=k*P;n[0]=_*c,n[4]=h*N-I,n[8]=W*N+q,n[1]=_*P,n[5]=q*N+W,n[9]=I*N-h,n[2]=-N,n[6]=k*_,n[10]=$*_}else if("YZX"===W.order){const W=$*_,I=$*N,h=k*_,q=k*N;n[0]=_*c,n[4]=q-W*P,n[8]=h*P+I,n[1]=P,n[5]=$*c,n[9]=-k*c,n[2]=-N*c,n[6]=I*P+h,n[10]=W-q*P}else if("XZY"===W.order){const W=$*_,I=$*N,h=k*_,q=k*N;n[0]=_*c,n[4]=-P,n[8]=N*c,n[1]=W*P+q,n[5]=$*c,n[9]=I*P-h,n[2]=h*P-I,n[6]=k*c,n[10]=q*P+W}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(W){return this.compose(pc,W,ic)}lookAt(W,n,I){const h=this.elements;return Tc.subVectors(W,n),0===Tc.lengthSq()&&(Tc.z=1),Tc.normalize(),Uc.crossVectors(I,Tc),0===Uc.lengthSq()&&(1===Math.abs(I.z)?Tc.x+=1e-4:Tc.z+=1e-4,Tc.normalize(),Uc.crossVectors(I,Tc)),Uc.normalize(),Qc.crossVectors(Tc,Uc),h[0]=Uc.x,h[4]=Qc.x,h[8]=Tc.x,h[1]=Uc.y,h[5]=Qc.y,h[9]=Tc.y,h[2]=Uc.z,h[6]=Qc.z,h[10]=Tc.z,this}multiply(W){return this.multiplyMatrices(this,W)}premultiply(W){return this.multiplyMatrices(W,this)}multiplyMatrices(W,n){const I=W.elements,h=n.elements,q=this.elements,$=I[0],k=I[4],_=I[8],N=I[12],c=I[1],P=I[5],S=I[9],g=I[13],B=I[2],E=I[6],u=I[10],Y=I[14],f=I[3],r=I[7],K=I[11],t=I[15],X=h[0],L=h[4],O=h[8],Z=h[12],d=h[1],m=h[5],R=h[9],e=h[13],j=h[2],z=h[6],v=h[10],V=h[14],F=h[3],w=h[7],o=h[11],D=h[15];return q[0]=$*X+k*d+_*j+N*F,q[4]=$*L+k*m+_*z+N*w,q[8]=$*O+k*R+_*v+N*o,q[12]=$*Z+k*e+_*V+N*D,q[1]=c*X+P*d+S*j+g*F,q[5]=c*L+P*m+S*z+g*w,q[9]=c*O+P*R+S*v+g*o,q[13]=c*Z+P*e+S*V+g*D,q[2]=B*X+E*d+u*j+Y*F,q[6]=B*L+E*m+u*z+Y*w,q[10]=B*O+E*R+u*v+Y*o,q[14]=B*Z+E*e+u*V+Y*D,q[3]=f*X+r*d+K*j+t*F,q[7]=f*L+r*m+K*z+t*w,q[11]=f*O+r*R+K*v+t*o,q[15]=f*Z+r*e+K*V+t*D,this}multiplyScalar(W){const n=this.elements;return n[0]*=W,n[4]*=W,n[8]*=W,n[12]*=W,n[1]*=W,n[5]*=W,n[9]*=W,n[13]*=W,n[2]*=W,n[6]*=W,n[10]*=W,n[14]*=W,n[3]*=W,n[7]*=W,n[11]*=W,n[15]*=W,this}determinant(){const W=this.elements,n=W[0],I=W[4],h=W[8],q=W[12],$=W[1],k=W[5],_=W[9],N=W[13],c=W[2],P=W[6],S=W[10],g=W[14];return W[3]*(+q*_*P-h*N*P-q*k*S+I*N*S+h*k*g-I*_*g)+W[7]*(+n*_*g-n*N*S+q*$*S-h*$*g+h*N*c-q*_*c)+W[11]*(+n*N*P-n*k*g-q*$*P+I*$*g+q*k*c-I*N*c)+W[15]*(-h*k*c-n*_*P+n*k*S+h*$*P-I*$*S+I*_*c)}transpose(){const W=this.elements;let n;return n=W[1],W[1]=W[4],W[4]=n,n=W[2],W[2]=W[8],W[8]=n,n=W[6],W[6]=W[9],W[9]=n,n=W[3],W[3]=W[12],W[12]=n,n=W[7],W[7]=W[13],W[13]=n,n=W[11],W[11]=W[14],W[14]=n,this}setPosition(W,n,I){const h=this.elements;return W.isVector3?(h[12]=W.x,h[13]=W.y,h[14]=W.z):(h[12]=W,h[13]=n,h[14]=I),this}invert(){const W=this.elements,n=W[0],I=W[1],h=W[2],q=W[3],$=W[4],k=W[5],_=W[6],N=W[7],c=W[8],P=W[9],S=W[10],g=W[11],B=W[12],E=W[13],u=W[14],Y=W[15],f=P*u*N-E*S*N+E*_*g-k*u*g-P*_*Y+k*S*Y,r=B*S*N-c*u*N-B*_*g+$*u*g+c*_*Y-$*S*Y,K=c*E*N-B*P*N+B*k*g-$*E*g-c*k*Y+$*P*Y,t=B*P*_-c*E*_-B*k*S+$*E*S+c*k*u-$*P*u,X=n*f+I*r+h*K+q*t;if(0===X)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/X;return W[0]=f*L,W[1]=(E*S*q-P*u*q-E*h*g+I*u*g+P*h*Y-I*S*Y)*L,W[2]=(k*u*q-E*_*q+E*h*N-I*u*N-k*h*Y+I*_*Y)*L,W[3]=(P*_*q-k*S*q-P*h*N+I*S*N+k*h*g-I*_*g)*L,W[4]=r*L,W[5]=(c*u*q-B*S*q+B*h*g-n*u*g-c*h*Y+n*S*Y)*L,W[6]=(B*_*q-$*u*q-B*h*N+n*u*N+$*h*Y-n*_*Y)*L,W[7]=($*S*q-c*_*q+c*h*N-n*S*N-$*h*g+n*_*g)*L,W[8]=K*L,W[9]=(B*P*q-c*E*q-B*I*g+n*E*g+c*I*Y-n*P*Y)*L,W[10]=($*E*q-B*k*q+B*I*N-n*E*N-$*I*Y+n*k*Y)*L,W[11]=(c*k*q-$*P*q-c*I*N+n*P*N+$*I*g-n*k*g)*L,W[12]=t*L,W[13]=(c*E*h-B*P*h+B*I*S-n*E*S-c*I*u+n*P*u)*L,W[14]=(B*k*h-$*E*h-B*I*_+n*E*_+$*I*u-n*k*u)*L,W[15]=($*P*h-c*k*h+c*I*_-n*P*_-$*I*S+n*k*S)*L,this}scale(W){const n=this.elements,I=W.x,h=W.y,q=W.z;return n[0]*=I,n[4]*=h,n[8]*=q,n[1]*=I,n[5]*=h,n[9]*=q,n[2]*=I,n[6]*=h,n[10]*=q,n[3]*=I,n[7]*=h,n[11]*=q,this}getMaxScaleOnAxis(){const W=this.elements,n=W[0]*W[0]+W[1]*W[1]+W[2]*W[2],I=W[4]*W[4]+W[5]*W[5]+W[6]*W[6],h=W[8]*W[8]+W[9]*W[9]+W[10]*W[10];return Math.sqrt(Math.max(n,I,h))}makeTranslation(W,n,I){return W.isVector3?this.set(1,0,0,W.x,0,1,0,W.y,0,0,1,W.z,0,0,0,1):this.set(1,0,0,W,0,1,0,n,0,0,1,I,0,0,0,1),this}makeRotationX(W){const n=Math.cos(W),I=Math.sin(W);return this.set(1,0,0,0,0,n,-I,0,0,I,n,0,0,0,0,1),this}makeRotationY(W){const n=Math.cos(W),I=Math.sin(W);return this.set(n,0,I,0,0,1,0,0,-I,0,n,0,0,0,0,1),this}makeRotationZ(W){const n=Math.cos(W),I=Math.sin(W);return this.set(n,-I,0,0,I,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(W,n){const I=Math.cos(n),h=Math.sin(n),q=1-I,$=W.x,k=W.y,_=W.z,N=q*$,c=q*k;return this.set(N*$+I,N*k-h*_,N*_+h*k,0,N*k+h*_,c*k+I,c*_-h*$,0,N*_-h*k,c*_+h*$,q*_*_+I,0,0,0,0,1),this}makeScale(W,n,I){return this.set(W,0,0,0,0,n,0,0,0,0,I,0,0,0,0,1),this}makeShear(W,n,I,h,q,$){return this.set(1,I,q,0,W,1,$,0,n,h,1,0,0,0,0,1),this}compose(W,n,I){const h=this.elements,q=n._x,$=n._y,k=n._z,_=n._w,N=q+q,c=$+$,P=k+k,S=q*N,g=q*c,B=q*P,E=$*c,u=$*P,Y=k*P,f=_*N,r=_*c,K=_*P,t=I.x,X=I.y,L=I.z;return h[0]=(1-(E+Y))*t,h[1]=(g+K)*t,h[2]=(B-r)*t,h[3]=0,h[4]=(g-K)*X,h[5]=(1-(S+Y))*X,h[6]=(u+f)*X,h[7]=0,h[8]=(B+r)*L,h[9]=(u-f)*L,h[10]=(1-(S+E))*L,h[11]=0,h[12]=W.x,h[13]=W.y,h[14]=W.z,h[15]=1,this}decompose(W,n,I){const h=this.elements;let q=lc.set(h[0],h[1],h[2]).length();const $=lc.set(h[4],h[5],h[6]).length(),k=lc.set(h[8],h[9],h[10]).length();this.determinant()<0&&(q=-q),W.x=h[12],W.y=h[13],W.z=h[14],Ac.copy(this);const _=1/q,N=1/$,c=1/k;return Ac.elements[0]*=_,Ac.elements[1]*=_,Ac.elements[2]*=_,Ac.elements[4]*=N,Ac.elements[5]*=N,Ac.elements[6]*=N,Ac.elements[8]*=c,Ac.elements[9]*=c,Ac.elements[10]*=c,n.setFromRotationMatrix(Ac),I.x=q,I.y=$,I.z=k,this}makePerspective(W,n,I,h,q,$,k=2e3){const _=this.elements,N=2*q/(n-W),c=2*q/(I-h),P=(n+W)/(n-W),S=(I+h)/(I-h);let g,B;if(2e3===k)g=-($+q)/($-q),B=-2*$*q/($-q);else{if(2001!==k)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+k);g=-$/($-q),B=-$*q/($-q)}return _[0]=N,_[4]=0,_[8]=P,_[12]=0,_[1]=0,_[5]=c,_[9]=S,_[13]=0,_[2]=0,_[6]=0,_[10]=g,_[14]=B,_[3]=0,_[7]=0,_[11]=-1,_[15]=0,this}makeOrthographic(W,n,I,h,q,$,k=2e3){const _=this.elements,N=1/(n-W),c=1/(I-h),P=1/($-q),S=(n+W)*N,g=(I+h)*c;let B,E;if(2e3===k)B=($+q)*P,E=-2*P;else{if(2001!==k)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+k);B=q*P,E=-1*P}return _[0]=2*N,_[4]=0,_[8]=0,_[12]=-S,_[1]=0,_[5]=2*c,_[9]=0,_[13]=-g,_[2]=0,_[6]=0,_[10]=E,_[14]=-B,_[3]=0,_[7]=0,_[11]=0,_[15]=1,this}equals(W){const n=this.elements,I=W.elements;for(let W=0;W<16;W++)if(n[W]!==I[W])return!1;return!0}fromArray(W,n=0){for(let I=0;I<16;I++)this.elements[I]=W[I+n];return this}toArray(W=[],n=0){const I=this.elements;return W[n]=I[0],W[n+1]=I[1],W[n+2]=I[2],W[n+3]=I[3],W[n+4]=I[4],W[n+5]=I[5],W[n+6]=I[6],W[n+7]=I[7],W[n+8]=I[8],W[n+9]=I[9],W[n+10]=I[10],W[n+11]=I[11],W[n+12]=I[12],W[n+13]=I[13],W[n+14]=I[14],W[n+15]=I[15],W}}const lc=new gc,Ac=new bc,pc=new gc(0,0,0),ic=new gc(1,1,1),Uc=new gc,Qc=new gc,Tc=new gc,Hc=new bc,ac=new Sc;class Jc{constructor(W=0,n=0,I=0,h=Jc.DEFAULT_ORDER){this.isEuler=!0,this._x=W,this._y=n,this._z=I,this._order=h}get x(){return this._x}set x(W){this._x=W,this._onChangeCallback()}get y(){return this._y}set y(W){this._y=W,this._onChangeCallback()}get z(){return this._z}set z(W){this._z=W,this._onChangeCallback()}get order(){return this._order}set order(W){this._order=W,this._onChangeCallback()}set(W,n,I,h=this._order){return this._x=W,this._y=n,this._z=I,this._order=h,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(W){return this._x=W._x,this._y=W._y,this._z=W._z,this._order=W._order,this._onChangeCallback(),this}setFromRotationMatrix(W,n=this._order,I=!0){const h=W.elements,q=h[0],$=h[4],k=h[8],_=h[1],N=h[5],c=h[9],P=h[2],S=h[6],g=h[10];switch(n){case"XYZ":this._y=Math.asin(wN(k,-1,1)),Math.abs(k)<.9999999?(this._x=Math.atan2(-c,g),this._z=Math.atan2(-$,q)):(this._x=Math.atan2(S,N),this._z=0);break;case"YXZ":this._x=Math.asin(-wN(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(k,g),this._z=Math.atan2(_,N)):(this._y=Math.atan2(-P,q),this._z=0);break;case"ZXY":this._x=Math.asin(wN(S,-1,1)),Math.abs(S)<.9999999?(this._y=Math.atan2(-P,g),this._z=Math.atan2(-$,N)):(this._y=0,this._z=Math.atan2(_,q));break;case"ZYX":this._y=Math.asin(-wN(P,-1,1)),Math.abs(P)<.9999999?(this._x=Math.atan2(S,g),this._z=Math.atan2(_,q)):(this._x=0,this._z=Math.atan2(-$,N));break;case"YZX":this._z=Math.asin(wN(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(-c,N),this._y=Math.atan2(-P,q)):(this._x=0,this._y=Math.atan2(k,g));break;case"XZY":this._z=Math.asin(-wN($,-1,1)),Math.abs($)<.9999999?(this._x=Math.atan2(S,N),this._y=Math.atan2(k,q)):(this._x=Math.atan2(-c,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===I&&this._onChangeCallback(),this}setFromQuaternion(W,n,I){return Hc.makeRotationFromQuaternion(W),this.setFromRotationMatrix(Hc,n,I)}setFromVector3(W,n=this._order){return this.set(W.x,W.y,W.z,n)}reorder(W){return ac.setFromEuler(this),this.setFromQuaternion(ac,W)}equals(W){return W._x===this._x&&W._y===this._y&&W._z===this._z&&W._order===this._order}fromArray(W){return this._x=W[0],this._y=W[1],this._z=W[2],void 0!==W[3]&&(this._order=W[3]),this._onChangeCallback(),this}toArray(W=[],n=0){return W[n]=this._x,W[n+1]=this._y,W[n+2]=this._z,W[n+3]=this._order,W}_onChange(W){return this._onChangeCallback=W,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Jc.DEFAULT_ORDER="XYZ";class sc{constructor(){this.mask=1}set(W){this.mask=1<<W>>>0}enable(W){this.mask|=1<<W}enableAll(){this.mask=-1}toggle(W){this.mask^=1<<W}disable(W){this.mask&=~(1<<W)}disableAll(){this.mask=0}test(W){return!!(this.mask&W.mask)}isEnabled(W){return!!(this.mask&1<<W)}}let Mc=0;const WP=new gc,nP=new Sc,IP=new bc,hP=new gc,qP=new gc,$P=new gc,kP=new Sc,_P=new gc(1,0,0),NP=new gc(0,1,0),cP=new gc(0,0,1),PP={type:"added"},SP={type:"removed"};class gP extends jN{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Mc++}),this.uuid=FN(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=gP.DEFAULT_UP.clone();const W=new gc,n=new Jc,I=new Sc,h=new gc(1,1,1);n._onChange((function(){I.setFromEuler(n,!1)})),I._onChange((function(){n.setFromQuaternion(I,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:W},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:I},scale:{configurable:!0,enumerable:!0,value:h},modelViewMatrix:{value:new bc},normalMatrix:{value:new bN}}),this.matrix=new bc,this.matrixWorld=new bc,this.matrixAutoUpdate=gP.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=gP.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new sc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(W){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(W),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(W){return this.quaternion.premultiply(W),this}setRotationFromAxisAngle(W,n){this.quaternion.setFromAxisAngle(W,n)}setRotationFromEuler(W){this.quaternion.setFromEuler(W,!0)}setRotationFromMatrix(W){this.quaternion.setFromRotationMatrix(W)}setRotationFromQuaternion(W){this.quaternion.copy(W)}rotateOnAxis(W,n){return nP.setFromAxisAngle(W,n),this.quaternion.multiply(nP),this}rotateOnWorldAxis(W,n){return nP.setFromAxisAngle(W,n),this.quaternion.premultiply(nP),this}rotateX(W){return this.rotateOnAxis(_P,W)}rotateY(W){return this.rotateOnAxis(NP,W)}rotateZ(W){return this.rotateOnAxis(cP,W)}translateOnAxis(W,n){return WP.copy(W).applyQuaternion(this.quaternion),this.position.add(WP.multiplyScalar(n)),this}translateX(W){return this.translateOnAxis(_P,W)}translateY(W){return this.translateOnAxis(NP,W)}translateZ(W){return this.translateOnAxis(cP,W)}localToWorld(W){return this.updateWorldMatrix(!0,!1),W.applyMatrix4(this.matrixWorld)}worldToLocal(W){return this.updateWorldMatrix(!0,!1),W.applyMatrix4(IP.copy(this.matrixWorld).invert())}lookAt(W,n,I){W.isVector3?hP.copy(W):hP.set(W,n,I);const h=this.parent;this.updateWorldMatrix(!0,!1),qP.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?IP.lookAt(qP,hP,this.up):IP.lookAt(hP,qP,this.up),this.quaternion.setFromRotationMatrix(IP),h&&(IP.extractRotation(h.matrixWorld),nP.setFromRotationMatrix(IP),this.quaternion.premultiply(nP.invert()))}add(W){if(arguments.length>1){for(let W=0;W<arguments.length;W++)this.add(arguments[W]);return this}return W===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",W),this):(W&&W.isObject3D?(null!==W.parent&&W.parent.remove(W),W.parent=this,this.children.push(W),W.dispatchEvent(PP)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",W),this)}remove(W){if(arguments.length>1){for(let W=0;W<arguments.length;W++)this.remove(arguments[W]);return this}const n=this.children.indexOf(W);return-1!==n&&(W.parent=null,this.children.splice(n,1),W.dispatchEvent(SP)),this}removeFromParent(){const W=this.parent;return null!==W&&W.remove(this),this}clear(){for(let W=0;W<this.children.length;W++){const n=this.children[W];n.parent=null,n.dispatchEvent(SP)}return this.children.length=0,this}attach(W){return this.updateWorldMatrix(!0,!1),IP.copy(this.matrixWorld).invert(),null!==W.parent&&(W.parent.updateWorldMatrix(!0,!1),IP.multiply(W.parent.matrixWorld)),W.applyMatrix4(IP),this.add(W),W.updateWorldMatrix(!1,!0),this}getObjectById(W){return this.getObjectByProperty("id",W)}getObjectByName(W){return this.getObjectByProperty("name",W)}getObjectByProperty(W,n){if(this[W]===n)return this;for(let I=0,h=this.children.length;I<h;I++){const h=this.children[I].getObjectByProperty(W,n);if(void 0!==h)return h}}getObjectsByProperty(W,n){let I=[];this[W]===n&&I.push(this);for(let h=0,q=this.children.length;h<q;h++){const q=this.children[h].getObjectsByProperty(W,n);q.length>0&&(I=I.concat(q))}return I}getWorldPosition(W){return this.updateWorldMatrix(!0,!1),W.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(W){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qP,W,$P),W}getWorldScale(W){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qP,kP,W),W}getWorldDirection(W){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return W.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(W){W(this);const n=this.children;for(let I=0,h=n.length;I<h;I++)n[I].traverse(W)}traverseVisible(W){if(!1===this.visible)return;W(this);const n=this.children;for(let I=0,h=n.length;I<h;I++)n[I].traverseVisible(W)}traverseAncestors(W){const n=this.parent;null!==n&&(W(n),n.traverseAncestors(W))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(W){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||W)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,W=!0);const n=this.children;for(let I=0,h=n.length;I<h;I++){const h=n[I];!0!==h.matrixWorldAutoUpdate&&!0!==W||h.updateMatrixWorld(W)}}updateWorldMatrix(W,n){const I=this.parent;if(!0===W&&null!==I&&!0===I.matrixWorldAutoUpdate&&I.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n){const W=this.children;for(let n=0,I=W.length;n<I;n++){const I=W[n];!0===I.matrixWorldAutoUpdate&&I.updateWorldMatrix(!1,!0)}}}toJSON(W){const n=void 0===W||"string"==typeof W,I={};n&&(W={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},I.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const h={};function q(n,I){return void 0===n[I.uuid]&&(n[I.uuid]=I.toJSON(W)),I.uuid}if(h.uuid=this.uuid,h.type=this.type,""!==this.name&&(h.name=this.name),!0===this.castShadow&&(h.castShadow=!0),!0===this.receiveShadow&&(h.receiveShadow=!0),!1===this.visible&&(h.visible=!1),!1===this.frustumCulled&&(h.frustumCulled=!1),0!==this.renderOrder&&(h.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(h.userData=this.userData),h.layers=this.layers.mask,h.matrix=this.matrix.toArray(),h.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(h.matrixAutoUpdate=!1),this.isInstancedMesh&&(h.type="InstancedMesh",h.count=this.count,h.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(h.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?h.background=this.background.toJSON():this.background.isTexture&&(h.background=this.background.toJSON(W).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(h.environment=this.environment.toJSON(W).uuid);else if(this.isMesh||this.isLine||this.isPoints){h.geometry=q(W.geometries,this.geometry);const n=this.geometry.parameters;if(void 0!==n&&void 0!==n.shapes){const I=n.shapes;if(Array.isArray(I))for(let n=0,h=I.length;n<h;n++){const h=I[n];q(W.shapes,h)}else q(W.shapes,I)}}if(this.isSkinnedMesh&&(h.bindMode=this.bindMode,h.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(q(W.skeletons,this.skeleton),h.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const n=[];for(let I=0,h=this.material.length;I<h;I++)n.push(q(W.materials,this.material[I]));h.material=n}else h.material=q(W.materials,this.material);if(this.children.length>0){h.children=[];for(let n=0;n<this.children.length;n++)h.children.push(this.children[n].toJSON(W).object)}if(this.animations.length>0){h.animations=[];for(let n=0;n<this.animations.length;n++){const I=this.animations[n];h.animations.push(q(W.animations,I))}}if(n){const n=$(W.geometries),h=$(W.materials),q=$(W.textures),k=$(W.images),_=$(W.shapes),N=$(W.skeletons),c=$(W.animations),P=$(W.nodes);n.length>0&&(I.geometries=n),h.length>0&&(I.materials=h),q.length>0&&(I.textures=q),k.length>0&&(I.images=k),_.length>0&&(I.shapes=_),N.length>0&&(I.skeletons=N),c.length>0&&(I.animations=c),P.length>0&&(I.nodes=P)}return I.object=h,I;function $(W){const n=[];for(const I in W){const h=W[I];delete h.metadata,n.push(h)}return n}}clone(W){return(new this.constructor).copy(this,W)}copy(W,n=!0){if(this.name=W.name,this.up.copy(W.up),this.position.copy(W.position),this.rotation.order=W.rotation.order,this.quaternion.copy(W.quaternion),this.scale.copy(W.scale),this.matrix.copy(W.matrix),this.matrixWorld.copy(W.matrixWorld),this.matrixAutoUpdate=W.matrixAutoUpdate,this.matrixWorldNeedsUpdate=W.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=W.matrixWorldAutoUpdate,this.layers.mask=W.layers.mask,this.visible=W.visible,this.castShadow=W.castShadow,this.receiveShadow=W.receiveShadow,this.frustumCulled=W.frustumCulled,this.renderOrder=W.renderOrder,this.animations=W.animations.slice(),this.userData=JSON.parse(JSON.stringify(W.userData)),!0===n)for(let n=0;n<W.children.length;n++){const I=W.children[n];this.add(I.clone())}return this}}gP.DEFAULT_UP=new gc(0,1,0),gP.DEFAULT_MATRIX_AUTO_UPDATE=!0,gP.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const BP=new gc,EP=new gc,uP=new gc,YP=new gc,fP=new gc,rP=new gc,KP=new gc,tP=new gc,XP=new gc,LP=new gc;let OP=!1;class ZP{constructor(W=new gc,n=new gc,I=new gc){this.a=W,this.b=n,this.c=I}static getNormal(W,n,I,h){h.subVectors(I,n),BP.subVectors(W,n),h.cross(BP);const q=h.lengthSq();return q>0?h.multiplyScalar(1/Math.sqrt(q)):h.set(0,0,0)}static getBarycoord(W,n,I,h,q){BP.subVectors(h,n),EP.subVectors(I,n),uP.subVectors(W,n);const $=BP.dot(BP),k=BP.dot(EP),_=BP.dot(uP),N=EP.dot(EP),c=EP.dot(uP),P=$*N-k*k;if(0===P)return q.set(-2,-1,-1);const S=1/P,g=(N*_-k*c)*S,B=($*c-k*_)*S;return q.set(1-g-B,B,g)}static containsPoint(W,n,I,h){return this.getBarycoord(W,n,I,h,YP),YP.x>=0&&YP.y>=0&&YP.x+YP.y<=1}static getUV(W,n,I,h,q,$,k,_){return!1===OP&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),OP=!0),this.getInterpolation(W,n,I,h,q,$,k,_)}static getInterpolation(W,n,I,h,q,$,k,_){return this.getBarycoord(W,n,I,h,YP),_.setScalar(0),_.addScaledVector(q,YP.x),_.addScaledVector($,YP.y),_.addScaledVector(k,YP.z),_}static isFrontFacing(W,n,I,h){return BP.subVectors(I,n),EP.subVectors(W,n),BP.cross(EP).dot(h)<0}set(W,n,I){return this.a.copy(W),this.b.copy(n),this.c.copy(I),this}setFromPointsAndIndices(W,n,I,h){return this.a.copy(W[n]),this.b.copy(W[I]),this.c.copy(W[h]),this}setFromAttributeAndIndices(W,n,I,h){return this.a.fromBufferAttribute(W,n),this.b.fromBufferAttribute(W,I),this.c.fromBufferAttribute(W,h),this}clone(){return(new this.constructor).copy(this)}copy(W){return this.a.copy(W.a),this.b.copy(W.b),this.c.copy(W.c),this}getArea(){return BP.subVectors(this.c,this.b),EP.subVectors(this.a,this.b),.5*BP.cross(EP).length()}getMidpoint(W){return W.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(W){return ZP.getNormal(this.a,this.b,this.c,W)}getPlane(W){return W.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(W,n){return ZP.getBarycoord(W,this.a,this.b,this.c,n)}getUV(W,n,I,h,q){return!1===OP&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),OP=!0),ZP.getInterpolation(W,this.a,this.b,this.c,n,I,h,q)}getInterpolation(W,n,I,h,q){return ZP.getInterpolation(W,this.a,this.b,this.c,n,I,h,q)}containsPoint(W){return ZP.containsPoint(W,this.a,this.b,this.c)}isFrontFacing(W){return ZP.isFrontFacing(this.a,this.b,this.c,W)}intersectsBox(W){return W.intersectsTriangle(this)}closestPointToPoint(W,n){const I=this.a,h=this.b,q=this.c;let $,k;fP.subVectors(h,I),rP.subVectors(q,I),tP.subVectors(W,I);const _=fP.dot(tP),N=rP.dot(tP);if(_<=0&&N<=0)return n.copy(I);XP.subVectors(W,h);const c=fP.dot(XP),P=rP.dot(XP);if(c>=0&&P<=c)return n.copy(h);const S=_*P-c*N;if(S<=0&&_>=0&&c<=0)return $=_/(_-c),n.copy(I).addScaledVector(fP,$);LP.subVectors(W,q);const g=fP.dot(LP),B=rP.dot(LP);if(B>=0&&g<=B)return n.copy(q);const E=g*N-_*B;if(E<=0&&N>=0&&B<=0)return k=N/(N-B),n.copy(I).addScaledVector(rP,k);const u=c*B-g*P;if(u<=0&&P-c>=0&&g-B>=0)return KP.subVectors(q,h),k=(P-c)/(P-c+(g-B)),n.copy(h).addScaledVector(KP,k);const Y=1/(u+E+S);return $=E*Y,k=S*Y,n.copy(I).addScaledVector(fP,$).addScaledVector(rP,k)}equals(W){return W.a.equals(this.a)&&W.b.equals(this.b)&&W.c.equals(this.c)}}let dP=0;class mP extends jN{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:dP++}),this.uuid=FN(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(W){this._alphaTest>0!=W>0&&this.version++,this._alphaTest=W}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(W){if(void 0!==W)for(const n in W){const I=W[n];if(void 0===I){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const h=this[n];void 0!==h?h&&h.isColor?h.set(I):h&&h.isVector3&&I&&I.isVector3?h.copy(I):this[n]=I:console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`)}}toJSON(W){const n=void 0===W||"string"==typeof W;n&&(W={textures:{},images:{}});const I={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function h(W){const n=[];for(const I in W){const h=W[I];delete h.metadata,n.push(h)}return n}if(I.uuid=this.uuid,I.type=this.type,""!==this.name&&(I.name=this.name),this.color&&this.color.isColor&&(I.color=this.color.getHex()),void 0!==this.roughness&&(I.roughness=this.roughness),void 0!==this.metalness&&(I.metalness=this.metalness),void 0!==this.sheen&&(I.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(I.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(I.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(I.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(I.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(I.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(I.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(I.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(I.shininess=this.shininess),void 0!==this.clearcoat&&(I.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(I.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(I.clearcoatMap=this.clearcoatMap.toJSON(W).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(I.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(W).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(I.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(W).uuid,I.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(I.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(I.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(I.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(I.iridescenceMap=this.iridescenceMap.toJSON(W).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(I.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(W).uuid),void 0!==this.anisotropy&&(I.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(I.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(I.anisotropyMap=this.anisotropyMap.toJSON(W).uuid),this.map&&this.map.isTexture&&(I.map=this.map.toJSON(W).uuid),this.matcap&&this.matcap.isTexture&&(I.matcap=this.matcap.toJSON(W).uuid),this.alphaMap&&this.alphaMap.isTexture&&(I.alphaMap=this.alphaMap.toJSON(W).uuid),this.lightMap&&this.lightMap.isTexture&&(I.lightMap=this.lightMap.toJSON(W).uuid,I.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(I.aoMap=this.aoMap.toJSON(W).uuid,I.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(I.bumpMap=this.bumpMap.toJSON(W).uuid,I.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(I.normalMap=this.normalMap.toJSON(W).uuid,I.normalMapType=this.normalMapType,I.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(I.displacementMap=this.displacementMap.toJSON(W).uuid,I.displacementScale=this.displacementScale,I.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(I.roughnessMap=this.roughnessMap.toJSON(W).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(I.metalnessMap=this.metalnessMap.toJSON(W).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(I.emissiveMap=this.emissiveMap.toJSON(W).uuid),this.specularMap&&this.specularMap.isTexture&&(I.specularMap=this.specularMap.toJSON(W).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(I.specularIntensityMap=this.specularIntensityMap.toJSON(W).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(I.specularColorMap=this.specularColorMap.toJSON(W).uuid),this.envMap&&this.envMap.isTexture&&(I.envMap=this.envMap.toJSON(W).uuid,void 0!==this.combine&&(I.combine=this.combine)),void 0!==this.envMapIntensity&&(I.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(I.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(I.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(I.gradientMap=this.gradientMap.toJSON(W).uuid),void 0!==this.transmission&&(I.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(I.transmissionMap=this.transmissionMap.toJSON(W).uuid),void 0!==this.thickness&&(I.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(I.thicknessMap=this.thicknessMap.toJSON(W).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(I.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(I.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(I.size=this.size),null!==this.shadowSide&&(I.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(I.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(I.blending=this.blending),0!==this.side&&(I.side=this.side),this.vertexColors&&(I.vertexColors=!0),this.opacity<1&&(I.opacity=this.opacity),!0===this.transparent&&(I.transparent=this.transparent),I.depthFunc=this.depthFunc,I.depthTest=this.depthTest,I.depthWrite=this.depthWrite,I.colorWrite=this.colorWrite,I.stencilWrite=this.stencilWrite,I.stencilWriteMask=this.stencilWriteMask,I.stencilFunc=this.stencilFunc,I.stencilRef=this.stencilRef,I.stencilFuncMask=this.stencilFuncMask,I.stencilFail=this.stencilFail,I.stencilZFail=this.stencilZFail,I.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(I.rotation=this.rotation),!0===this.polygonOffset&&(I.polygonOffset=!0),0!==this.polygonOffsetFactor&&(I.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(I.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(I.linewidth=this.linewidth),void 0!==this.dashSize&&(I.dashSize=this.dashSize),void 0!==this.gapSize&&(I.gapSize=this.gapSize),void 0!==this.scale&&(I.scale=this.scale),!0===this.dithering&&(I.dithering=!0),this.alphaTest>0&&(I.alphaTest=this.alphaTest),!0===this.alphaHash&&(I.alphaHash=this.alphaHash),!0===this.alphaToCoverage&&(I.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(I.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(I.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(I.wireframe=this.wireframe),this.wireframeLinewidth>1&&(I.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(I.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(I.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(I.flatShading=this.flatShading),!1===this.visible&&(I.visible=!1),!1===this.toneMapped&&(I.toneMapped=!1),!1===this.fog&&(I.fog=!1),Object.keys(this.userData).length>0&&(I.userData=this.userData),n){const n=h(W.textures),q=h(W.images);n.length>0&&(I.textures=n),q.length>0&&(I.images=q)}return I}clone(){return(new this.constructor).copy(this)}copy(W){this.name=W.name,this.blending=W.blending,this.side=W.side,this.vertexColors=W.vertexColors,this.opacity=W.opacity,this.transparent=W.transparent,this.blendSrc=W.blendSrc,this.blendDst=W.blendDst,this.blendEquation=W.blendEquation,this.blendSrcAlpha=W.blendSrcAlpha,this.blendDstAlpha=W.blendDstAlpha,this.blendEquationAlpha=W.blendEquationAlpha,this.depthFunc=W.depthFunc,this.depthTest=W.depthTest,this.depthWrite=W.depthWrite,this.stencilWriteMask=W.stencilWriteMask,this.stencilFunc=W.stencilFunc,this.stencilRef=W.stencilRef,this.stencilFuncMask=W.stencilFuncMask,this.stencilFail=W.stencilFail,this.stencilZFail=W.stencilZFail,this.stencilZPass=W.stencilZPass,this.stencilWrite=W.stencilWrite;const n=W.clippingPlanes;let I=null;if(null!==n){const W=n.length;I=new Array(W);for(let h=0;h!==W;++h)I[h]=n[h].clone()}return this.clippingPlanes=I,this.clipIntersection=W.clipIntersection,this.clipShadows=W.clipShadows,this.shadowSide=W.shadowSide,this.colorWrite=W.colorWrite,this.precision=W.precision,this.polygonOffset=W.polygonOffset,this.polygonOffsetFactor=W.polygonOffsetFactor,this.polygonOffsetUnits=W.polygonOffsetUnits,this.dithering=W.dithering,this.alphaTest=W.alphaTest,this.alphaHash=W.alphaHash,this.alphaToCoverage=W.alphaToCoverage,this.premultipliedAlpha=W.premultipliedAlpha,this.forceSinglePass=W.forceSinglePass,this.visible=W.visible,this.toneMapped=W.toneMapped,this.userData=JSON.parse(JSON.stringify(W.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(W){!0===W&&this.version++}}const RP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},eP={h:0,s:0,l:0},jP={h:0,s:0,l:0};function zP(W,n,I){return I<0&&(I+=1),I>1&&(I-=1),I<1/6?W+6*(n-W)*I:I<.5?n:I<2/3?W+6*(n-W)*(2/3-I):W}class vP{constructor(W,n,I){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(W,n,I)}set(W,n,I){if(void 0===n&&void 0===I){const n=W;n&&n.isColor?this.copy(n):"number"==typeof n?this.setHex(n):"string"==typeof n&&this.setStyle(n)}else this.setRGB(W,n,I);return this}setScalar(W){return this.r=W,this.g=W,this.b=W,this}setHex(W,n="srgb"){return W=Math.floor(W),this.r=(W>>16&255)/255,this.g=(W>>8&255)/255,this.b=(255&W)/255,MN.toWorkingColorSpace(this,n),this}setRGB(W,n,I,h=MN.workingColorSpace){return this.r=W,this.g=n,this.b=I,MN.toWorkingColorSpace(this,h),this}setHSL(W,n,I,h=MN.workingColorSpace){if(W=(W%(q=1)+q)%q,n=wN(n,0,1),I=wN(I,0,1),0===n)this.r=this.g=this.b=I;else{const h=I<=.5?I*(1+n):I+n-I*n,q=2*I-h;this.r=zP(q,h,W+1/3),this.g=zP(q,h,W),this.b=zP(q,h,W-1/3)}var q;return MN.toWorkingColorSpace(this,h),this}setStyle(W,n="srgb"){function I(n){void 0!==n&&parseFloat(n)<1&&console.warn("THREE.Color: Alpha component of "+W+" will be ignored.")}let h;if(h=/^(\w+)\(([^\)]*)\)/.exec(W)){let q;const $=h[1],k=h[2];switch($){case"rgb":case"rgba":if(q=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(k))return I(q[4]),this.setRGB(Math.min(255,parseInt(q[1],10))/255,Math.min(255,parseInt(q[2],10))/255,Math.min(255,parseInt(q[3],10))/255,n);if(q=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(k))return I(q[4]),this.setRGB(Math.min(100,parseInt(q[1],10))/100,Math.min(100,parseInt(q[2],10))/100,Math.min(100,parseInt(q[3],10))/100,n);break;case"hsl":case"hsla":if(q=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(k))return I(q[4]),this.setHSL(parseFloat(q[1])/360,parseFloat(q[2])/100,parseFloat(q[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+W)}}else if(h=/^\#([A-Fa-f\d]+)$/.exec(W)){const I=h[1],q=I.length;if(3===q)return this.setRGB(parseInt(I.charAt(0),16)/15,parseInt(I.charAt(1),16)/15,parseInt(I.charAt(2),16)/15,n);if(6===q)return this.setHex(parseInt(I,16),n);console.warn("THREE.Color: Invalid hex color "+W)}else if(W&&W.length>0)return this.setColorName(W,n);return this}setColorName(W,n="srgb"){const I=RP[W.toLowerCase()];return void 0!==I?this.setHex(I,n):console.warn("THREE.Color: Unknown color "+W),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(W){return this.r=W.r,this.g=W.g,this.b=W.b,this}copySRGBToLinear(W){return this.r=QN(W.r),this.g=QN(W.g),this.b=QN(W.b),this}copyLinearToSRGB(W){return this.r=TN(W.r),this.g=TN(W.g),this.b=TN(W.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(W="srgb"){return MN.fromWorkingColorSpace(VP.copy(this),W),65536*Math.round(wN(255*VP.r,0,255))+256*Math.round(wN(255*VP.g,0,255))+Math.round(wN(255*VP.b,0,255))}getHexString(W="srgb"){return("000000"+this.getHex(W).toString(16)).slice(-6)}getHSL(W,n=MN.workingColorSpace){MN.fromWorkingColorSpace(VP.copy(this),n);const I=VP.r,h=VP.g,q=VP.b,$=Math.max(I,h,q),k=Math.min(I,h,q);let _,N;const c=(k+$)/2;if(k===$)_=0,N=0;else{const W=$-k;switch(N=c<=.5?W/($+k):W/(2-$-k),$){case I:_=(h-q)/W+(h<q?6:0);break;case h:_=(q-I)/W+2;break;case q:_=(I-h)/W+4}_/=6}return W.h=_,W.s=N,W.l=c,W}getRGB(W,n=MN.workingColorSpace){return MN.fromWorkingColorSpace(VP.copy(this),n),W.r=VP.r,W.g=VP.g,W.b=VP.b,W}getStyle(W="srgb"){MN.fromWorkingColorSpace(VP.copy(this),W);const n=VP.r,I=VP.g,h=VP.b;return"srgb"!==W?`color(${W} ${n.toFixed(3)} ${I.toFixed(3)} ${h.toFixed(3)})`:`rgb(${Math.round(255*n)},${Math.round(255*I)},${Math.round(255*h)})`}offsetHSL(W,n,I){return this.getHSL(eP),eP.h+=W,eP.s+=n,eP.l+=I,this.setHSL(eP.h,eP.s,eP.l),this}add(W){return this.r+=W.r,this.g+=W.g,this.b+=W.b,this}addColors(W,n){return this.r=W.r+n.r,this.g=W.g+n.g,this.b=W.b+n.b,this}addScalar(W){return this.r+=W,this.g+=W,this.b+=W,this}sub(W){return this.r=Math.max(0,this.r-W.r),this.g=Math.max(0,this.g-W.g),this.b=Math.max(0,this.b-W.b),this}multiply(W){return this.r*=W.r,this.g*=W.g,this.b*=W.b,this}multiplyScalar(W){return this.r*=W,this.g*=W,this.b*=W,this}lerp(W,n){return this.r+=(W.r-this.r)*n,this.g+=(W.g-this.g)*n,this.b+=(W.b-this.b)*n,this}lerpColors(W,n,I){return this.r=W.r+(n.r-W.r)*I,this.g=W.g+(n.g-W.g)*I,this.b=W.b+(n.b-W.b)*I,this}lerpHSL(W,n){this.getHSL(eP),W.getHSL(jP);const I=oN(eP.h,jP.h,n),h=oN(eP.s,jP.s,n),q=oN(eP.l,jP.l,n);return this.setHSL(I,h,q),this}setFromVector3(W){return this.r=W.x,this.g=W.y,this.b=W.z,this}applyMatrix3(W){const n=this.r,I=this.g,h=this.b,q=W.elements;return this.r=q[0]*n+q[3]*I+q[6]*h,this.g=q[1]*n+q[4]*I+q[7]*h,this.b=q[2]*n+q[5]*I+q[8]*h,this}equals(W){return W.r===this.r&&W.g===this.g&&W.b===this.b}fromArray(W,n=0){return this.r=W[n],this.g=W[n+1],this.b=W[n+2],this}toArray(W=[],n=0){return W[n]=this.r,W[n+1]=this.g,W[n+2]=this.b,W}fromBufferAttribute(W,n){return this.r=W.getX(n),this.g=W.getY(n),this.b=W.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const VP=new vP;vP.NAMES=RP;class FP extends mP{constructor(W){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new vP(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(W)}copy(W){return super.copy(W),this.color.copy(W.color),this.map=W.map,this.lightMap=W.lightMap,this.lightMapIntensity=W.lightMapIntensity,this.aoMap=W.aoMap,this.aoMapIntensity=W.aoMapIntensity,this.specularMap=W.specularMap,this.alphaMap=W.alphaMap,this.envMap=W.envMap,this.combine=W.combine,this.reflectivity=W.reflectivity,this.refractionRatio=W.refractionRatio,this.wireframe=W.wireframe,this.wireframeLinewidth=W.wireframeLinewidth,this.wireframeLinecap=W.wireframeLinecap,this.wireframeLinejoin=W.wireframeLinejoin,this.fog=W.fog,this}}const wP=new gc,oP=new CN;class DP{constructor(W,n,I=!1){if(Array.isArray(W))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=W,this.itemSize=n,this.count=void 0!==W?W.length/n:0,this.normalized=I,this.usage=35044,this.updateRange={offset:0,count:-1},this.gpuType=1015,this.version=0}onUploadCallback(){}set needsUpdate(W){!0===W&&this.version++}setUsage(W){return this.usage=W,this}copy(W){return this.name=W.name,this.array=new W.array.constructor(W.array),this.itemSize=W.itemSize,this.count=W.count,this.normalized=W.normalized,this.usage=W.usage,this.gpuType=W.gpuType,this}copyAt(W,n,I){W*=this.itemSize,I*=n.itemSize;for(let h=0,q=this.itemSize;h<q;h++)this.array[W+h]=n.array[I+h];return this}copyArray(W){return this.array.set(W),this}applyMatrix3(W){if(2===this.itemSize)for(let n=0,I=this.count;n<I;n++)oP.fromBufferAttribute(this,n),oP.applyMatrix3(W),this.setXY(n,oP.x,oP.y);else if(3===this.itemSize)for(let n=0,I=this.count;n<I;n++)wP.fromBufferAttribute(this,n),wP.applyMatrix3(W),this.setXYZ(n,wP.x,wP.y,wP.z);return this}applyMatrix4(W){for(let n=0,I=this.count;n<I;n++)wP.fromBufferAttribute(this,n),wP.applyMatrix4(W),this.setXYZ(n,wP.x,wP.y,wP.z);return this}applyNormalMatrix(W){for(let n=0,I=this.count;n<I;n++)wP.fromBufferAttribute(this,n),wP.applyNormalMatrix(W),this.setXYZ(n,wP.x,wP.y,wP.z);return this}transformDirection(W){for(let n=0,I=this.count;n<I;n++)wP.fromBufferAttribute(this,n),wP.transformDirection(W),this.setXYZ(n,wP.x,wP.y,wP.z);return this}set(W,n=0){return this.array.set(W,n),this}getComponent(W,n){let I=this.array[W*this.itemSize+n];return this.normalized&&(I=GN(I,this.array)),I}setComponent(W,n,I){return this.normalized&&(I=yN(I,this.array)),this.array[W*this.itemSize+n]=I,this}getX(W){let n=this.array[W*this.itemSize];return this.normalized&&(n=GN(n,this.array)),n}setX(W,n){return this.normalized&&(n=yN(n,this.array)),this.array[W*this.itemSize]=n,this}getY(W){let n=this.array[W*this.itemSize+1];return this.normalized&&(n=GN(n,this.array)),n}setY(W,n){return this.normalized&&(n=yN(n,this.array)),this.array[W*this.itemSize+1]=n,this}getZ(W){let n=this.array[W*this.itemSize+2];return this.normalized&&(n=GN(n,this.array)),n}setZ(W,n){return this.normalized&&(n=yN(n,this.array)),this.array[W*this.itemSize+2]=n,this}getW(W){let n=this.array[W*this.itemSize+3];return this.normalized&&(n=GN(n,this.array)),n}setW(W,n){return this.normalized&&(n=yN(n,this.array)),this.array[W*this.itemSize+3]=n,this}setXY(W,n,I){return W*=this.itemSize,this.normalized&&(n=yN(n,this.array),I=yN(I,this.array)),this.array[W+0]=n,this.array[W+1]=I,this}setXYZ(W,n,I,h){return W*=this.itemSize,this.normalized&&(n=yN(n,this.array),I=yN(I,this.array),h=yN(h,this.array)),this.array[W+0]=n,this.array[W+1]=I,this.array[W+2]=h,this}setXYZW(W,n,I,h,q){return W*=this.itemSize,this.normalized&&(n=yN(n,this.array),I=yN(I,this.array),h=yN(h,this.array),q=yN(q,this.array)),this.array[W+0]=n,this.array[W+1]=I,this.array[W+2]=h,this.array[W+3]=q,this}onUpload(W){return this.onUploadCallback=W,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const W={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(W.name=this.name),35044!==this.usage&&(W.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(W.updateRange=this.updateRange),W}}class xP extends DP{constructor(W,n,I){super(new Uint16Array(W),n,I)}}class GP extends DP{constructor(W,n,I){super(new Uint32Array(W),n,I)}}class yP extends DP{constructor(W,n,I){super(new Float32Array(W),n,I)}}let CP=0;const bP=new bc,lP=new gP,AP=new gc,pP=new uc,iP=new uc,UP=new gc;class QP extends jN{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:CP++}),this.uuid=FN(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(W){return Array.isArray(W)?this.index=new(AN(W)?GP:xP)(W,1):this.index=W,this}getAttribute(W){return this.attributes[W]}setAttribute(W,n){return this.attributes[W]=n,this}deleteAttribute(W){return delete this.attributes[W],this}hasAttribute(W){return void 0!==this.attributes[W]}addGroup(W,n,I=0){this.groups.push({start:W,count:n,materialIndex:I})}clearGroups(){this.groups=[]}setDrawRange(W,n){this.drawRange.start=W,this.drawRange.count=n}applyMatrix4(W){const n=this.attributes.position;void 0!==n&&(n.applyMatrix4(W),n.needsUpdate=!0);const I=this.attributes.normal;if(void 0!==I){const n=(new bN).getNormalMatrix(W);I.applyNormalMatrix(n),I.needsUpdate=!0}const h=this.attributes.tangent;return void 0!==h&&(h.transformDirection(W),h.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(W){return bP.makeRotationFromQuaternion(W),this.applyMatrix4(bP),this}rotateX(W){return bP.makeRotationX(W),this.applyMatrix4(bP),this}rotateY(W){return bP.makeRotationY(W),this.applyMatrix4(bP),this}rotateZ(W){return bP.makeRotationZ(W),this.applyMatrix4(bP),this}translate(W,n,I){return bP.makeTranslation(W,n,I),this.applyMatrix4(bP),this}scale(W,n,I){return bP.makeScale(W,n,I),this.applyMatrix4(bP),this}lookAt(W){return lP.lookAt(W),lP.updateMatrix(),this.applyMatrix4(lP.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(AP).negate(),this.translate(AP.x,AP.y,AP.z),this}setFromPoints(W){const n=[];for(let I=0,h=W.length;I<h;I++){const h=W[I];n.push(h.x,h.y,h.z||0)}return this.setAttribute("position",new yP(n,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new uc);const W=this.attributes.position,n=this.morphAttributes.position;if(W&&W.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new gc(-1/0,-1/0,-1/0),new gc(1/0,1/0,1/0));if(void 0!==W){if(this.boundingBox.setFromBufferAttribute(W),n)for(let W=0,I=n.length;W<I;W++){const I=n[W];pP.setFromBufferAttribute(I),this.morphTargetsRelative?(UP.addVectors(this.boundingBox.min,pP.min),this.boundingBox.expandByPoint(UP),UP.addVectors(this.boundingBox.max,pP.max),this.boundingBox.expandByPoint(UP)):(this.boundingBox.expandByPoint(pP.min),this.boundingBox.expandByPoint(pP.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Fc);const W=this.attributes.position,n=this.morphAttributes.position;if(W&&W.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new gc,1/0);if(W){const I=this.boundingSphere.center;if(pP.setFromBufferAttribute(W),n)for(let W=0,I=n.length;W<I;W++){const I=n[W];iP.setFromBufferAttribute(I),this.morphTargetsRelative?(UP.addVectors(pP.min,iP.min),pP.expandByPoint(UP),UP.addVectors(pP.max,iP.max),pP.expandByPoint(UP)):(pP.expandByPoint(iP.min),pP.expandByPoint(iP.max))}pP.getCenter(I);let h=0;for(let n=0,q=W.count;n<q;n++)UP.fromBufferAttribute(W,n),h=Math.max(h,I.distanceToSquared(UP));if(n)for(let q=0,$=n.length;q<$;q++){const $=n[q],k=this.morphTargetsRelative;for(let n=0,q=$.count;n<q;n++)UP.fromBufferAttribute($,n),k&&(AP.fromBufferAttribute(W,n),UP.add(AP)),h=Math.max(h,I.distanceToSquared(UP))}this.boundingSphere.radius=Math.sqrt(h),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const W=this.index,n=this.attributes;if(null===W||void 0===n.position||void 0===n.normal||void 0===n.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const I=W.array,h=n.position.array,q=n.normal.array,$=n.uv.array,k=h.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new DP(new Float32Array(4*k),4));const _=this.getAttribute("tangent").array,N=[],c=[];for(let W=0;W<k;W++)N[W]=new gc,c[W]=new gc;const P=new gc,S=new gc,g=new gc,B=new CN,E=new CN,u=new CN,Y=new gc,f=new gc;function r(W,n,I){P.fromArray(h,3*W),S.fromArray(h,3*n),g.fromArray(h,3*I),B.fromArray($,2*W),E.fromArray($,2*n),u.fromArray($,2*I),S.sub(P),g.sub(P),E.sub(B),u.sub(B);const q=1/(E.x*u.y-u.x*E.y);isFinite(q)&&(Y.copy(S).multiplyScalar(u.y).addScaledVector(g,-E.y).multiplyScalar(q),f.copy(g).multiplyScalar(E.x).addScaledVector(S,-u.x).multiplyScalar(q),N[W].add(Y),N[n].add(Y),N[I].add(Y),c[W].add(f),c[n].add(f),c[I].add(f))}let K=this.groups;0===K.length&&(K=[{start:0,count:I.length}]);for(let W=0,n=K.length;W<n;++W){const n=K[W],h=n.start;for(let W=h,q=h+n.count;W<q;W+=3)r(I[W+0],I[W+1],I[W+2])}const t=new gc,X=new gc,L=new gc,O=new gc;function Z(W){L.fromArray(q,3*W),O.copy(L);const n=N[W];t.copy(n),t.sub(L.multiplyScalar(L.dot(n))).normalize(),X.crossVectors(O,n);const I=X.dot(c[W])<0?-1:1;_[4*W]=t.x,_[4*W+1]=t.y,_[4*W+2]=t.z,_[4*W+3]=I}for(let W=0,n=K.length;W<n;++W){const n=K[W],h=n.start;for(let W=h,q=h+n.count;W<q;W+=3)Z(I[W+0]),Z(I[W+1]),Z(I[W+2])}}computeVertexNormals(){const W=this.index,n=this.getAttribute("position");if(void 0!==n){let I=this.getAttribute("normal");if(void 0===I)I=new DP(new Float32Array(3*n.count),3),this.setAttribute("normal",I);else for(let W=0,n=I.count;W<n;W++)I.setXYZ(W,0,0,0);const h=new gc,q=new gc,$=new gc,k=new gc,_=new gc,N=new gc,c=new gc,P=new gc;if(W)for(let S=0,g=W.count;S<g;S+=3){const g=W.getX(S+0),B=W.getX(S+1),E=W.getX(S+2);h.fromBufferAttribute(n,g),q.fromBufferAttribute(n,B),$.fromBufferAttribute(n,E),c.subVectors($,q),P.subVectors(h,q),c.cross(P),k.fromBufferAttribute(I,g),_.fromBufferAttribute(I,B),N.fromBufferAttribute(I,E),k.add(c),_.add(c),N.add(c),I.setXYZ(g,k.x,k.y,k.z),I.setXYZ(B,_.x,_.y,_.z),I.setXYZ(E,N.x,N.y,N.z)}else for(let W=0,k=n.count;W<k;W+=3)h.fromBufferAttribute(n,W+0),q.fromBufferAttribute(n,W+1),$.fromBufferAttribute(n,W+2),c.subVectors($,q),P.subVectors(h,q),c.cross(P),I.setXYZ(W+0,c.x,c.y,c.z),I.setXYZ(W+1,c.x,c.y,c.z),I.setXYZ(W+2,c.x,c.y,c.z);this.normalizeNormals(),I.needsUpdate=!0}}normalizeNormals(){const W=this.attributes.normal;for(let n=0,I=W.count;n<I;n++)UP.fromBufferAttribute(W,n),UP.normalize(),W.setXYZ(n,UP.x,UP.y,UP.z)}toNonIndexed(){function W(W,n){const I=W.array,h=W.itemSize,q=W.normalized,$=new I.constructor(n.length*h);let k=0,_=0;for(let q=0,N=n.length;q<N;q++){k=W.isInterleavedBufferAttribute?n[q]*W.data.stride+W.offset:n[q]*h;for(let W=0;W<h;W++)$[_++]=I[k++]}return new DP($,h,q)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new QP,I=this.index.array,h=this.attributes;for(const q in h){const $=W(h[q],I);n.setAttribute(q,$)}const q=this.morphAttributes;for(const h in q){const $=[],k=q[h];for(let n=0,h=k.length;n<h;n++){const h=W(k[n],I);$.push(h)}n.morphAttributes[h]=$}n.morphTargetsRelative=this.morphTargetsRelative;const $=this.groups;for(let W=0,I=$.length;W<I;W++){const I=$[W];n.addGroup(I.start,I.count,I.materialIndex)}return n}toJSON(){const W={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(W.uuid=this.uuid,W.type=this.type,""!==this.name&&(W.name=this.name),Object.keys(this.userData).length>0&&(W.userData=this.userData),void 0!==this.parameters){const n=this.parameters;for(const I in n)void 0!==n[I]&&(W[I]=n[I]);return W}W.data={attributes:{}};const n=this.index;null!==n&&(W.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const I=this.attributes;for(const n in I){const h=I[n];W.data.attributes[n]=h.toJSON(W.data)}const h={};let q=!1;for(const n in this.morphAttributes){const I=this.morphAttributes[n],$=[];for(let n=0,h=I.length;n<h;n++){const h=I[n];$.push(h.toJSON(W.data))}$.length>0&&(h[n]=$,q=!0)}q&&(W.data.morphAttributes=h,W.data.morphTargetsRelative=this.morphTargetsRelative);const $=this.groups;$.length>0&&(W.data.groups=JSON.parse(JSON.stringify($)));const k=this.boundingSphere;return null!==k&&(W.data.boundingSphere={center:k.center.toArray(),radius:k.radius}),W}clone(){return(new this.constructor).copy(this)}copy(W){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=W.name;const I=W.index;null!==I&&this.setIndex(I.clone(n));const h=W.attributes;for(const W in h){const I=h[W];this.setAttribute(W,I.clone(n))}const q=W.morphAttributes;for(const W in q){const I=[],h=q[W];for(let W=0,q=h.length;W<q;W++)I.push(h[W].clone(n));this.morphAttributes[W]=I}this.morphTargetsRelative=W.morphTargetsRelative;const $=W.groups;for(let W=0,n=$.length;W<n;W++){const n=$[W];this.addGroup(n.start,n.count,n.materialIndex)}const k=W.boundingBox;null!==k&&(this.boundingBox=k.clone());const _=W.boundingSphere;return null!==_&&(this.boundingSphere=_.clone()),this.drawRange.start=W.drawRange.start,this.drawRange.count=W.drawRange.count,this.userData=W.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const TP=new bc,HP=new class{constructor(W=new gc,n=new gc(0,0,-1)){this.origin=W,this.direction=n}set(W,n){return this.origin.copy(W),this.direction.copy(n),this}copy(W){return this.origin.copy(W.origin),this.direction.copy(W.direction),this}at(W,n){return n.copy(this.origin).addScaledVector(this.direction,W)}lookAt(W){return this.direction.copy(W).sub(this.origin).normalize(),this}recast(W){return this.origin.copy(this.at(W,wc)),this}closestPointToPoint(W,n){n.subVectors(W,this.origin);const I=n.dot(this.direction);return I<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,I)}distanceToPoint(W){return Math.sqrt(this.distanceSqToPoint(W))}distanceSqToPoint(W){const n=wc.subVectors(W,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(W):(wc.copy(this.origin).addScaledVector(this.direction,n),wc.distanceToSquared(W))}distanceSqToSegment(W,n,I,h){oc.copy(W).add(n).multiplyScalar(.5),Dc.copy(n).sub(W).normalize(),xc.copy(this.origin).sub(oc);const q=.5*W.distanceTo(n),$=-this.direction.dot(Dc),k=xc.dot(this.direction),_=-xc.dot(Dc),N=xc.lengthSq(),c=Math.abs(1-$*$);let P,S,g,B;if(c>0)if(P=$*_-k,S=$*k-_,B=q*c,P>=0)if(S>=-B)if(S<=B){const W=1/c;P*=W,S*=W,g=P*(P+$*S+2*k)+S*($*P+S+2*_)+N}else S=q,P=Math.max(0,-($*S+k)),g=-P*P+S*(S+2*_)+N;else S=-q,P=Math.max(0,-($*S+k)),g=-P*P+S*(S+2*_)+N;else S<=-B?(P=Math.max(0,-(-$*q+k)),S=P>0?-q:Math.min(Math.max(-q,-_),q),g=-P*P+S*(S+2*_)+N):S<=B?(P=0,S=Math.min(Math.max(-q,-_),q),g=S*(S+2*_)+N):(P=Math.max(0,-($*q+k)),S=P>0?q:Math.min(Math.max(-q,-_),q),g=-P*P+S*(S+2*_)+N);else S=$>0?-q:q,P=Math.max(0,-($*S+k)),g=-P*P+S*(S+2*_)+N;return I&&I.copy(this.origin).addScaledVector(this.direction,P),h&&h.copy(oc).addScaledVector(Dc,S),g}intersectSphere(W,n){wc.subVectors(W.center,this.origin);const I=wc.dot(this.direction),h=wc.dot(wc)-I*I,q=W.radius*W.radius;if(h>q)return null;const $=Math.sqrt(q-h),k=I-$,_=I+$;return _<0?null:k<0?this.at(_,n):this.at(k,n)}intersectsSphere(W){return this.distanceSqToPoint(W.center)<=W.radius*W.radius}distanceToPlane(W){const n=W.normal.dot(this.direction);if(0===n)return 0===W.distanceToPoint(this.origin)?0:null;const I=-(this.origin.dot(W.normal)+W.constant)/n;return I>=0?I:null}intersectPlane(W,n){const I=this.distanceToPlane(W);return null===I?null:this.at(I,n)}intersectsPlane(W){const n=W.distanceToPoint(this.origin);return 0===n||W.normal.dot(this.direction)*n<0}intersectBox(W,n){let I,h,q,$,k,_;const N=1/this.direction.x,c=1/this.direction.y,P=1/this.direction.z,S=this.origin;return N>=0?(I=(W.min.x-S.x)*N,h=(W.max.x-S.x)*N):(I=(W.max.x-S.x)*N,h=(W.min.x-S.x)*N),c>=0?(q=(W.min.y-S.y)*c,$=(W.max.y-S.y)*c):(q=(W.max.y-S.y)*c,$=(W.min.y-S.y)*c),I>$||q>h?null:((q>I||isNaN(I))&&(I=q),($<h||isNaN(h))&&(h=$),P>=0?(k=(W.min.z-S.z)*P,_=(W.max.z-S.z)*P):(k=(W.max.z-S.z)*P,_=(W.min.z-S.z)*P),I>_||k>h?null:((k>I||I!=I)&&(I=k),(_<h||h!=h)&&(h=_),h<0?null:this.at(I>=0?I:h,n)))}intersectsBox(W){return null!==this.intersectBox(W,wc)}intersectTriangle(W,n,I,h,q){Gc.subVectors(n,W),yc.subVectors(I,W),Cc.crossVectors(Gc,yc);let $,k=this.direction.dot(Cc);if(k>0){if(h)return null;$=1}else{if(!(k<0))return null;$=-1,k=-k}xc.subVectors(this.origin,W);const _=$*this.direction.dot(yc.crossVectors(xc,yc));if(_<0)return null;const N=$*this.direction.dot(Gc.cross(xc));if(N<0)return null;if(_+N>k)return null;const c=-$*xc.dot(Cc);return c<0?null:this.at(c/k,q)}applyMatrix4(W){return this.origin.applyMatrix4(W),this.direction.transformDirection(W),this}equals(W){return W.origin.equals(this.origin)&&W.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}},aP=new Fc,JP=new gc,sP=new gc,MP=new gc,WS=new gc,nS=new gc,IS=new gc,hS=new CN,qS=new CN,$S=new CN,kS=new gc,_S=new gc,NS=new gc,cS=new gc,PS=new gc;class SS extends gP{constructor(W=new QP,n=new FP){super(),this.isMesh=!0,this.type="Mesh",this.geometry=W,this.material=n,this.updateMorphTargets()}copy(W,n){return super.copy(W,n),void 0!==W.morphTargetInfluences&&(this.morphTargetInfluences=W.morphTargetInfluences.slice()),void 0!==W.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},W.morphTargetDictionary)),this.material=W.material,this.geometry=W.geometry,this}updateMorphTargets(){const W=this.geometry.morphAttributes,n=Object.keys(W);if(n.length>0){const I=W[n[0]];if(void 0!==I){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let W=0,n=I.length;W<n;W++){const n=I[W].name||String(W);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=W}}}}getVertexPosition(W,n){const I=this.geometry,h=I.attributes.position,q=I.morphAttributes.position,$=I.morphTargetsRelative;n.fromBufferAttribute(h,W);const k=this.morphTargetInfluences;if(q&&k){IS.set(0,0,0);for(let I=0,h=q.length;I<h;I++){const h=k[I],_=q[I];0!==h&&(nS.fromBufferAttribute(_,W),$?IS.addScaledVector(nS,h):IS.addScaledVector(nS.sub(n),h))}n.add(IS)}return n}raycast(W,n){const I=this.geometry,h=this.material,q=this.matrixWorld;if(void 0!==h){if(null===I.boundingSphere&&I.computeBoundingSphere(),aP.copy(I.boundingSphere),aP.applyMatrix4(q),HP.copy(W.ray).recast(W.near),!1===aP.containsPoint(HP.origin)){if(null===HP.intersectSphere(aP,JP))return;if(HP.origin.distanceToSquared(JP)>(W.far-W.near)**2)return}TP.copy(q).invert(),HP.copy(W.ray).applyMatrix4(TP),null!==I.boundingBox&&!1===HP.intersectsBox(I.boundingBox)||this._computeIntersections(W,n,HP)}}_computeIntersections(W,n,I){let h;const q=this.geometry,$=this.material,k=q.index,_=q.attributes.position,N=q.attributes.uv,c=q.attributes.uv1,P=q.attributes.normal,S=q.groups,g=q.drawRange;if(null!==k)if(Array.isArray($))for(let q=0,_=S.length;q<_;q++){const _=S[q],B=$[_.materialIndex];for(let q=Math.max(_.start,g.start),$=Math.min(k.count,Math.min(_.start+_.count,g.start+g.count));q<$;q+=3)h=gS(this,B,W,I,N,c,P,k.getX(q),k.getX(q+1),k.getX(q+2)),h&&(h.faceIndex=Math.floor(q/3),h.face.materialIndex=_.materialIndex,n.push(h))}else for(let q=Math.max(0,g.start),_=Math.min(k.count,g.start+g.count);q<_;q+=3)h=gS(this,$,W,I,N,c,P,k.getX(q),k.getX(q+1),k.getX(q+2)),h&&(h.faceIndex=Math.floor(q/3),n.push(h));else if(void 0!==_)if(Array.isArray($))for(let q=0,k=S.length;q<k;q++){const k=S[q],B=$[k.materialIndex];for(let q=Math.max(k.start,g.start),$=Math.min(_.count,Math.min(k.start+k.count,g.start+g.count));q<$;q+=3)h=gS(this,B,W,I,N,c,P,q,q+1,q+2),h&&(h.faceIndex=Math.floor(q/3),h.face.materialIndex=k.materialIndex,n.push(h))}else for(let q=Math.max(0,g.start),k=Math.min(_.count,g.start+g.count);q<k;q+=3)h=gS(this,$,W,I,N,c,P,q,q+1,q+2),h&&(h.faceIndex=Math.floor(q/3),n.push(h))}}function gS(W,n,I,h,q,$,k,_,N,c){W.getVertexPosition(_,sP),W.getVertexPosition(N,MP),W.getVertexPosition(c,WS);const P=function(W,n,I,h,q,$,k,_){let N;if(N=1===n.side?h.intersectTriangle(k,$,q,!0,_):h.intersectTriangle(q,$,k,0===n.side,_),null===N)return null;PS.copy(_),PS.applyMatrix4(W.matrixWorld);const c=I.ray.origin.distanceTo(PS);return c<I.near||c>I.far?null:{distance:c,point:PS.clone(),object:W}}(W,n,I,h,sP,MP,WS,cS);if(P){q&&(hS.fromBufferAttribute(q,_),qS.fromBufferAttribute(q,N),$S.fromBufferAttribute(q,c),P.uv=ZP.getInterpolation(cS,sP,MP,WS,hS,qS,$S,new CN)),$&&(hS.fromBufferAttribute($,_),qS.fromBufferAttribute($,N),$S.fromBufferAttribute($,c),P.uv1=ZP.getInterpolation(cS,sP,MP,WS,hS,qS,$S,new CN),P.uv2=P.uv1),k&&(kS.fromBufferAttribute(k,_),_S.fromBufferAttribute(k,N),NS.fromBufferAttribute(k,c),P.normal=ZP.getInterpolation(cS,sP,MP,WS,kS,_S,NS,new gc),P.normal.dot(h.direction)>0&&P.normal.multiplyScalar(-1));const W={a:_,b:N,c,normal:new gc,materialIndex:0};ZP.getNormal(sP,MP,WS,W.normal),P.face=W}return P}class BS extends QP{constructor(W=1,n=1,I=1,h=1,q=1,$=1){super(),this.type="BoxGeometry",this.parameters={width:W,height:n,depth:I,widthSegments:h,heightSegments:q,depthSegments:$};const k=this;h=Math.floor(h),q=Math.floor(q),$=Math.floor($);const _=[],N=[],c=[],P=[];let S=0,g=0;function B(W,n,I,h,q,$,B,E,u,Y,f){const r=$/u,K=B/Y,t=$/2,X=B/2,L=E/2,O=u+1,Z=Y+1;let d=0,m=0;const R=new gc;for(let $=0;$<Z;$++){const k=$*K-X;for(let _=0;_<O;_++){const S=_*r-t;R[W]=S*h,R[n]=k*q,R[I]=L,N.push(R.x,R.y,R.z),R[W]=0,R[n]=0,R[I]=E>0?1:-1,c.push(R.x,R.y,R.z),P.push(_/u),P.push(1-$/Y),d+=1}}for(let W=0;W<Y;W++)for(let n=0;n<u;n++){const I=S+n+O*W,h=S+n+O*(W+1),q=S+(n+1)+O*(W+1),$=S+(n+1)+O*W;_.push(I,h,$),_.push(h,q,$),m+=6}k.addGroup(g,m,f),g+=m,S+=d}B("z","y","x",-1,-1,I,n,W,$,q,0),B("z","y","x",1,-1,I,n,-W,$,q,1),B("x","z","y",1,1,W,I,n,h,$,2),B("x","z","y",1,-1,W,I,-n,h,$,3),B("x","y","z",1,-1,W,n,I,h,q,4),B("x","y","z",-1,-1,W,n,-I,h,q,5),this.setIndex(_),this.setAttribute("position",new yP(N,3)),this.setAttribute("normal",new yP(c,3)),this.setAttribute("uv",new yP(P,2))}copy(W){return super.copy(W),this.parameters=Object.assign({},W.parameters),this}static fromJSON(W){return new BS(W.width,W.height,W.depth,W.widthSegments,W.heightSegments,W.depthSegments)}}function ES(W){const n={};for(const I in W){n[I]={};for(const h in W[I]){const q=W[I][h];q&&(q.isColor||q.isMatrix3||q.isMatrix4||q.isVector2||q.isVector3||q.isVector4||q.isTexture||q.isQuaternion)?q.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),n[I][h]=null):n[I][h]=q.clone():Array.isArray(q)?n[I][h]=q.slice():n[I][h]=q}}return n}function uS(W){const n={};for(let I=0;I<W.length;I++){const h=ES(W[I]);for(const W in h)n[W]=h[W]}return n}function YS(W){return null===W.getRenderTarget()?W.outputColorSpace:"srgb-linear"}const fS={clone:ES,merge:uS};class rS extends mP{constructor(W){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==W&&this.setValues(W)}copy(W){return super.copy(W),this.fragmentShader=W.fragmentShader,this.vertexShader=W.vertexShader,this.uniforms=ES(W.uniforms),this.uniformsGroups=function(W){const n=[];for(let I=0;I<W.length;I++)n.push(W[I].clone());return n}(W.uniformsGroups),this.defines=Object.assign({},W.defines),this.wireframe=W.wireframe,this.wireframeLinewidth=W.wireframeLinewidth,this.fog=W.fog,this.lights=W.lights,this.clipping=W.clipping,this.extensions=Object.assign({},W.extensions),this.glslVersion=W.glslVersion,this}toJSON(W){const n=super.toJSON(W);n.glslVersion=this.glslVersion,n.uniforms={};for(const I in this.uniforms){const h=this.uniforms[I].value;h&&h.isTexture?n.uniforms[I]={type:"t",value:h.toJSON(W).uuid}:h&&h.isColor?n.uniforms[I]={type:"c",value:h.getHex()}:h&&h.isVector2?n.uniforms[I]={type:"v2",value:h.toArray()}:h&&h.isVector3?n.uniforms[I]={type:"v3",value:h.toArray()}:h&&h.isVector4?n.uniforms[I]={type:"v4",value:h.toArray()}:h&&h.isMatrix3?n.uniforms[I]={type:"m3",value:h.toArray()}:h&&h.isMatrix4?n.uniforms[I]={type:"m4",value:h.toArray()}:n.uniforms[I]={value:h}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const I={};for(const W in this.extensions)!0===this.extensions[W]&&(I[W]=!0);return Object.keys(I).length>0&&(n.extensions=I),n}}class KS extends gP{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new bc,this.projectionMatrix=new bc,this.projectionMatrixInverse=new bc,this.coordinateSystem=2e3}copy(W,n){return super.copy(W,n),this.matrixWorldInverse.copy(W.matrixWorldInverse),this.projectionMatrix.copy(W.projectionMatrix),this.projectionMatrixInverse.copy(W.projectionMatrixInverse),this.coordinateSystem=W.coordinateSystem,this}getWorldDirection(W){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return W.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(W){super.updateMatrixWorld(W),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(W,n){super.updateWorldMatrix(W,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class tS extends KS{constructor(W=50,n=1,I=.1,h=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=W,this.zoom=1,this.near=I,this.far=h,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(W,n){return super.copy(W,n),this.fov=W.fov,this.zoom=W.zoom,this.near=W.near,this.far=W.far,this.focus=W.focus,this.aspect=W.aspect,this.view=null===W.view?null:Object.assign({},W.view),this.filmGauge=W.filmGauge,this.filmOffset=W.filmOffset,this}setFocalLength(W){const n=.5*this.getFilmHeight()/W;this.fov=2*VN*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const W=Math.tan(.5*vN*this.fov);return.5*this.getFilmHeight()/W}getEffectiveFOV(){return 2*VN*Math.atan(Math.tan(.5*vN*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(W,n,I,h,q,$){this.aspect=W/n,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=W,this.view.fullHeight=n,this.view.offsetX=I,this.view.offsetY=h,this.view.width=q,this.view.height=$,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const W=this.near;let n=W*Math.tan(.5*vN*this.fov)/this.zoom,I=2*n,h=this.aspect*I,q=-.5*h;const $=this.view;if(null!==this.view&&this.view.enabled){const W=$.fullWidth,k=$.fullHeight;q+=$.offsetX*h/W,n-=$.offsetY*I/k,h*=$.width/W,I*=$.height/k}const k=this.filmOffset;0!==k&&(q+=W*k/this.getFilmWidth()),this.projectionMatrix.makePerspective(q,q+h,n,n-I,W,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(W){const n=super.toJSON(W);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,null!==this.view&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}class XS extends gP{constructor(W,n,I){super(),this.type="CubeCamera",this.renderTarget=I,this.coordinateSystem=null;const h=new tS(-90,1,W,n);h.layers=this.layers,this.add(h);const q=new tS(-90,1,W,n);q.layers=this.layers,this.add(q);const $=new tS(-90,1,W,n);$.layers=this.layers,this.add($);const k=new tS(-90,1,W,n);k.layers=this.layers,this.add(k);const _=new tS(-90,1,W,n);_.layers=this.layers,this.add(_);const N=new tS(-90,1,W,n);N.layers=this.layers,this.add(N)}updateCoordinateSystem(){const W=this.coordinateSystem,n=this.children.concat(),[I,h,q,$,k,_]=n;for(const W of n)this.remove(W);if(2e3===W)I.up.set(0,1,0),I.lookAt(1,0,0),h.up.set(0,1,0),h.lookAt(-1,0,0),q.up.set(0,0,-1),q.lookAt(0,1,0),$.up.set(0,0,1),$.lookAt(0,-1,0),k.up.set(0,1,0),k.lookAt(0,0,1),_.up.set(0,1,0),_.lookAt(0,0,-1);else{if(2001!==W)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+W);I.up.set(0,-1,0),I.lookAt(-1,0,0),h.up.set(0,-1,0),h.lookAt(1,0,0),q.up.set(0,0,1),q.lookAt(0,1,0),$.up.set(0,0,-1),$.lookAt(0,-1,0),k.up.set(0,-1,0),k.lookAt(0,0,1),_.up.set(0,-1,0),_.lookAt(0,0,-1)}for(const W of n)this.add(W),W.updateMatrixWorld()}update(W,n){null===this.parent&&this.updateMatrixWorld();const I=this.renderTarget;this.coordinateSystem!==W.coordinateSystem&&(this.coordinateSystem=W.coordinateSystem,this.updateCoordinateSystem());const[h,q,$,k,_,N]=this.children,c=W.getRenderTarget(),P=W.xr.enabled;W.xr.enabled=!1;const S=I.texture.generateMipmaps;I.texture.generateMipmaps=!1,W.setRenderTarget(I,0),W.render(n,h),W.setRenderTarget(I,1),W.render(n,q),W.setRenderTarget(I,2),W.render(n,$),W.setRenderTarget(I,3),W.render(n,k),W.setRenderTarget(I,4),W.render(n,_),I.texture.generateMipmaps=S,W.setRenderTarget(I,5),W.render(n,N),W.setRenderTarget(c),W.xr.enabled=P,I.texture.needsPMREMUpdate=!0}}class LS extends kc{constructor(W,n,I,h,q,$,k,_,N,c){super(W=void 0!==W?W:[],n=void 0!==n?n:301,I,h,q,$,k,_,N,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(W){this.image=W}}class OS extends cc{constructor(W=1,n={}){super(W,W,n),this.isWebGLCubeRenderTarget=!0;const I={width:W,height:W,depth:1},h=[I,I,I,I,I,I];void 0!==n.encoding&&(UN("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=3001===n.encoding?"srgb":""),this.texture=new LS(h,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:1006}fromEquirectangularTexture(W,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const I=new BS(5,5,5),h=new rS({name:"CubemapFromEquirect",uniforms:ES({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:1,blending:0});h.uniforms.tEquirect.value=n;const q=new SS(I,h),$=n.minFilter;return 1008===n.minFilter&&(n.minFilter=1006),new XS(1,10,this).update(W,q),n.minFilter=$,q.geometry.dispose(),q.material.dispose(),this}clear(W,n,I,h){const q=W.getRenderTarget();for(let q=0;q<6;q++)W.setRenderTarget(this,q),W.clear(n,I,h);W.setRenderTarget(q)}}const ZS=new gc,dS=new gc,mS=new bN;class RS{constructor(W=new gc(1,0,0),n=0){this.isPlane=!0,this.normal=W,this.constant=n}set(W,n){return this.normal.copy(W),this.constant=n,this}setComponents(W,n,I,h){return this.normal.set(W,n,I),this.constant=h,this}setFromNormalAndCoplanarPoint(W,n){return this.normal.copy(W),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(W,n,I){const h=ZS.subVectors(I,n).cross(dS.subVectors(W,n)).normalize();return this.setFromNormalAndCoplanarPoint(h,W),this}copy(W){return this.normal.copy(W.normal),this.constant=W.constant,this}normalize(){const W=1/this.normal.length();return this.normal.multiplyScalar(W),this.constant*=W,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(W){return this.normal.dot(W)+this.constant}distanceToSphere(W){return this.distanceToPoint(W.center)-W.radius}projectPoint(W,n){return n.copy(W).addScaledVector(this.normal,-this.distanceToPoint(W))}intersectLine(W,n){const I=W.delta(ZS),h=this.normal.dot(I);if(0===h)return 0===this.distanceToPoint(W.start)?n.copy(W.start):null;const q=-(W.start.dot(this.normal)+this.constant)/h;return q<0||q>1?null:n.copy(W.start).addScaledVector(I,q)}intersectsLine(W){const n=this.distanceToPoint(W.start),I=this.distanceToPoint(W.end);return n<0&&I>0||I<0&&n>0}intersectsBox(W){return W.intersectsPlane(this)}intersectsSphere(W){return W.intersectsPlane(this)}coplanarPoint(W){return W.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(W,n){const I=n||mS.getNormalMatrix(W),h=this.coplanarPoint(ZS).applyMatrix4(W),q=this.normal.applyMatrix3(I).normalize();return this.constant=-h.dot(q),this}translate(W){return this.constant-=W.dot(this.normal),this}equals(W){return W.normal.equals(this.normal)&&W.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const eS=new Fc,jS=new gc;class zS{constructor(W=new RS,n=new RS,I=new RS,h=new RS,q=new RS,$=new RS){this.planes=[W,n,I,h,q,$]}set(W,n,I,h,q,$){const k=this.planes;return k[0].copy(W),k[1].copy(n),k[2].copy(I),k[3].copy(h),k[4].copy(q),k[5].copy($),this}copy(W){const n=this.planes;for(let I=0;I<6;I++)n[I].copy(W.planes[I]);return this}setFromProjectionMatrix(W,n=2e3){const I=this.planes,h=W.elements,q=h[0],$=h[1],k=h[2],_=h[3],N=h[4],c=h[5],P=h[6],S=h[7],g=h[8],B=h[9],E=h[10],u=h[11],Y=h[12],f=h[13],r=h[14],K=h[15];if(I[0].setComponents(_-q,S-N,u-g,K-Y).normalize(),I[1].setComponents(_+q,S+N,u+g,K+Y).normalize(),I[2].setComponents(_+$,S+c,u+B,K+f).normalize(),I[3].setComponents(_-$,S-c,u-B,K-f).normalize(),I[4].setComponents(_-k,S-P,u-E,K-r).normalize(),2e3===n)I[5].setComponents(_+k,S+P,u+E,K+r).normalize();else{if(2001!==n)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);I[5].setComponents(k,P,E,r).normalize()}return this}intersectsObject(W){if(void 0!==W.boundingSphere)null===W.boundingSphere&&W.computeBoundingSphere(),eS.copy(W.boundingSphere).applyMatrix4(W.matrixWorld);else{const n=W.geometry;null===n.boundingSphere&&n.computeBoundingSphere(),eS.copy(n.boundingSphere).applyMatrix4(W.matrixWorld)}return this.intersectsSphere(eS)}intersectsSprite(W){return eS.center.set(0,0,0),eS.radius=.7071067811865476,eS.applyMatrix4(W.matrixWorld),this.intersectsSphere(eS)}intersectsSphere(W){const n=this.planes,I=W.center,h=-W.radius;for(let W=0;W<6;W++)if(n[W].distanceToPoint(I)<h)return!1;return!0}intersectsBox(W){const n=this.planes;for(let I=0;I<6;I++){const h=n[I];if(jS.x=h.normal.x>0?W.max.x:W.min.x,jS.y=h.normal.y>0?W.max.y:W.min.y,jS.z=h.normal.z>0?W.max.z:W.min.z,h.distanceToPoint(jS)<0)return!1}return!0}containsPoint(W){const n=this.planes;for(let I=0;I<6;I++)if(n[I].distanceToPoint(W)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function vS(){let W=null,n=!1,I=null,h=null;function q(n,$){I(n,$),h=W.requestAnimationFrame(q)}return{start:function(){!0!==n&&null!==I&&(h=W.requestAnimationFrame(q),n=!0)},stop:function(){W.cancelAnimationFrame(h),n=!1},setAnimationLoop:function(W){I=W},setContext:function(n){W=n}}}function VS(W,n){const I=n.isWebGL2,h=new WeakMap;return{get:function(W){return W.isInterleavedBufferAttribute&&(W=W.data),h.get(W)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const I=h.get(n);I&&(W.deleteBuffer(I.buffer),h.delete(n))},update:function(n,q){if(n.isGLBufferAttribute){const W=h.get(n);return void((!W||W.version<n.version)&&h.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}n.isInterleavedBufferAttribute&&(n=n.data);const $=h.get(n);void 0===$?h.set(n,function(n,h){const q=n.array,$=n.usage,k=W.createBuffer();let _;if(W.bindBuffer(h,k),W.bufferData(h,q,$),n.onUploadCallback(),q instanceof Float32Array)_=W.FLOAT;else if(q instanceof Uint16Array)if(n.isFloat16BufferAttribute){if(!I)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");_=W.HALF_FLOAT}else _=W.UNSIGNED_SHORT;else if(q instanceof Int16Array)_=W.SHORT;else if(q instanceof Uint32Array)_=W.UNSIGNED_INT;else if(q instanceof Int32Array)_=W.INT;else if(q instanceof Int8Array)_=W.BYTE;else if(q instanceof Uint8Array)_=W.UNSIGNED_BYTE;else{if(!(q instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+q);_=W.UNSIGNED_BYTE}return{buffer:k,type:_,bytesPerElement:q.BYTES_PER_ELEMENT,version:n.version}}(n,q)):$.version<n.version&&(function(n,h,q){const $=h.array,k=h.updateRange;W.bindBuffer(q,n),-1===k.count?W.bufferSubData(q,0,$):(I?W.bufferSubData(q,k.offset*$.BYTES_PER_ELEMENT,$,k.offset,k.count):W.bufferSubData(q,k.offset*$.BYTES_PER_ELEMENT,$.subarray(k.offset,k.offset+k.count)),k.count=-1),h.onUploadCallback()}($.buffer,n,q),$.version=n.version)}}}class FS extends QP{constructor(W=1,n=1,I=1,h=1){super(),this.type="PlaneGeometry",this.parameters={width:W,height:n,widthSegments:I,heightSegments:h};const q=W/2,$=n/2,k=Math.floor(I),_=Math.floor(h),N=k+1,c=_+1,P=W/k,S=n/_,g=[],B=[],E=[],u=[];for(let W=0;W<c;W++){const n=W*S-$;for(let I=0;I<N;I++){const h=I*P-q;B.push(h,-n,0),E.push(0,0,1),u.push(I/k),u.push(1-W/_)}}for(let W=0;W<_;W++)for(let n=0;n<k;n++){const I=n+N*W,h=n+N*(W+1),q=n+1+N*(W+1),$=n+1+N*W;g.push(I,h,$),g.push(h,q,$)}this.setIndex(g),this.setAttribute("position",new yP(B,3)),this.setAttribute("normal",new yP(E,3)),this.setAttribute("uv",new yP(u,2))}copy(W){return super.copy(W),this.parameters=Object.assign({},W.parameters),this}static fromJSON(W){return new FS(W.width,W.height,W.widthSegments,W.heightSegments)}}const wS={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},oS={common:{diffuse:{value:new vP(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new bN},alphaMap:{value:null},alphaMapTransform:{value:new bN},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new bN}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new bN}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new bN}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new bN},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new bN},normalScale:{value:new CN(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new bN},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new bN}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new bN}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new bN}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vP(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new vP(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new bN},alphaTest:{value:0},uvTransform:{value:new bN}},sprite:{diffuse:{value:new vP(16777215)},opacity:{value:1},center:{value:new CN(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new bN},alphaMap:{value:null},alphaMapTransform:{value:new bN},alphaTest:{value:0}}},DS={basic:{uniforms:uS([oS.common,oS.specularmap,oS.envmap,oS.aomap,oS.lightmap,oS.fog]),vertexShader:wS.meshbasic_vert,fragmentShader:wS.meshbasic_frag},lambert:{uniforms:uS([oS.common,oS.specularmap,oS.envmap,oS.aomap,oS.lightmap,oS.emissivemap,oS.bumpmap,oS.normalmap,oS.displacementmap,oS.fog,oS.lights,{emissive:{value:new vP(0)}}]),vertexShader:wS.meshlambert_vert,fragmentShader:wS.meshlambert_frag},phong:{uniforms:uS([oS.common,oS.specularmap,oS.envmap,oS.aomap,oS.lightmap,oS.emissivemap,oS.bumpmap,oS.normalmap,oS.displacementmap,oS.fog,oS.lights,{emissive:{value:new vP(0)},specular:{value:new vP(1118481)},shininess:{value:30}}]),vertexShader:wS.meshphong_vert,fragmentShader:wS.meshphong_frag},standard:{uniforms:uS([oS.common,oS.envmap,oS.aomap,oS.lightmap,oS.emissivemap,oS.bumpmap,oS.normalmap,oS.displacementmap,oS.roughnessmap,oS.metalnessmap,oS.fog,oS.lights,{emissive:{value:new vP(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wS.meshphysical_vert,fragmentShader:wS.meshphysical_frag},toon:{uniforms:uS([oS.common,oS.aomap,oS.lightmap,oS.emissivemap,oS.bumpmap,oS.normalmap,oS.displacementmap,oS.gradientmap,oS.fog,oS.lights,{emissive:{value:new vP(0)}}]),vertexShader:wS.meshtoon_vert,fragmentShader:wS.meshtoon_frag},matcap:{uniforms:uS([oS.common,oS.bumpmap,oS.normalmap,oS.displacementmap,oS.fog,{matcap:{value:null}}]),vertexShader:wS.meshmatcap_vert,fragmentShader:wS.meshmatcap_frag},points:{uniforms:uS([oS.points,oS.fog]),vertexShader:wS.points_vert,fragmentShader:wS.points_frag},dashed:{uniforms:uS([oS.common,oS.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wS.linedashed_vert,fragmentShader:wS.linedashed_frag},depth:{uniforms:uS([oS.common,oS.displacementmap]),vertexShader:wS.depth_vert,fragmentShader:wS.depth_frag},normal:{uniforms:uS([oS.common,oS.bumpmap,oS.normalmap,oS.displacementmap,{opacity:{value:1}}]),vertexShader:wS.meshnormal_vert,fragmentShader:wS.meshnormal_frag},sprite:{uniforms:uS([oS.sprite,oS.fog]),vertexShader:wS.sprite_vert,fragmentShader:wS.sprite_frag},background:{uniforms:{uvTransform:{value:new bN},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:wS.background_vert,fragmentShader:wS.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:wS.backgroundCube_vert,fragmentShader:wS.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:wS.cube_vert,fragmentShader:wS.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wS.equirect_vert,fragmentShader:wS.equirect_frag},distanceRGBA:{uniforms:uS([oS.common,oS.displacementmap,{referencePosition:{value:new gc},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wS.distanceRGBA_vert,fragmentShader:wS.distanceRGBA_frag},shadow:{uniforms:uS([oS.lights,oS.fog,{color:{value:new vP(0)},opacity:{value:1}}]),vertexShader:wS.shadow_vert,fragmentShader:wS.shadow_frag}};DS.physical={uniforms:uS([DS.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new bN},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new bN},clearcoatNormalScale:{value:new CN(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new bN},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new bN},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new bN},sheen:{value:0},sheenColor:{value:new vP(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new bN},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new bN},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new bN},transmissionSamplerSize:{value:new CN},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new bN},attenuationDistance:{value:0},attenuationColor:{value:new vP(0)},specularColor:{value:new vP(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new bN},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new bN},anisotropyVector:{value:new CN},anisotropyMap:{value:null},anisotropyMapTransform:{value:new bN}}]),vertexShader:wS.meshphysical_vert,fragmentShader:wS.meshphysical_frag};const xS={r:0,b:0,g:0};function GS(W,n,I,h,q,$,k){const _=new vP(0);let N,c,P=!0===$?0:1,S=null,g=0,B=null;function E(n,I){n.getRGB(xS,YS(W)),h.buffers.color.setClear(xS.r,xS.g,xS.b,I,k)}return{getClearColor:function(){return _},setClearColor:function(W,n=1){_.set(W),P=n,E(_,P)},getClearAlpha:function(){return P},setClearAlpha:function(W){P=W,E(_,P)},render:function($,u){let Y=!1,f=!0===u.isScene?u.background:null;switch(f&&f.isTexture&&(f=(u.backgroundBlurriness>0?I:n).get(f)),null===f?E(_,P):f&&f.isColor&&(E(f,1),Y=!0),W.xr.getEnvironmentBlendMode()){case"opaque":Y=!0;break;case"additive":h.buffers.color.setClear(0,0,0,1,k),Y=!0;break;case"alpha-blend":h.buffers.color.setClear(0,0,0,0,k),Y=!0}(W.autoClear||Y)&&W.clear(W.autoClearColor,W.autoClearDepth,W.autoClearStencil),f&&(f.isCubeTexture||306===f.mapping)?(void 0===c&&(c=new SS(new BS(1,1,1),new rS({name:"BackgroundCubeMaterial",uniforms:ES(DS.backgroundCube.uniforms),vertexShader:DS.backgroundCube.vertexShader,fragmentShader:DS.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(W,n,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),q.update(c)),c.material.uniforms.envMap.value=f,c.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=u.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=u.backgroundIntensity,c.material.toneMapped="srgb"!==f.colorSpace,S===f&&g===f.version&&B===W.toneMapping||(c.material.needsUpdate=!0,S=f,g=f.version,B=W.toneMapping),c.layers.enableAll(),$.unshift(c,c.geometry,c.material,0,0,null)):f&&f.isTexture&&(void 0===N&&(N=new SS(new FS(2,2),new rS({name:"BackgroundMaterial",uniforms:ES(DS.background.uniforms),vertexShader:DS.background.vertexShader,fragmentShader:DS.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),N.geometry.deleteAttribute("normal"),Object.defineProperty(N.material,"map",{get:function(){return this.uniforms.t2D.value}}),q.update(N)),N.material.uniforms.t2D.value=f,N.material.uniforms.backgroundIntensity.value=u.backgroundIntensity,N.material.toneMapped="srgb"!==f.colorSpace,!0===f.matrixAutoUpdate&&f.updateMatrix(),N.material.uniforms.uvTransform.value.copy(f.matrix),S===f&&g===f.version&&B===W.toneMapping||(N.material.needsUpdate=!0,S=f,g=f.version,B=W.toneMapping),N.layers.enableAll(),$.unshift(N,N.geometry,N.material,0,0,null))}}}function yS(W,n,I,h){const q=W.getParameter(W.MAX_VERTEX_ATTRIBS),$=h.isWebGL2?null:n.get("OES_vertex_array_object"),k=h.isWebGL2||null!==$,_={},N=B(null);let c=N,P=!1;function S(n){return h.isWebGL2?W.bindVertexArray(n):$.bindVertexArrayOES(n)}function g(n){return h.isWebGL2?W.deleteVertexArray(n):$.deleteVertexArrayOES(n)}function B(W){const n=[],I=[],h=[];for(let W=0;W<q;W++)n[W]=0,I[W]=0,h[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:n,enabledAttributes:I,attributeDivisors:h,object:W,attributes:{},index:null}}function E(){const W=c.newAttributes;for(let n=0,I=W.length;n<I;n++)W[n]=0}function u(W){Y(W,0)}function Y(I,q){const $=c.newAttributes,k=c.enabledAttributes,_=c.attributeDivisors;$[I]=1,0===k[I]&&(W.enableVertexAttribArray(I),k[I]=1),_[I]!==q&&((h.isWebGL2?W:n.get("ANGLE_instanced_arrays"))[h.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](I,q),_[I]=q)}function f(){const n=c.newAttributes,I=c.enabledAttributes;for(let h=0,q=I.length;h<q;h++)I[h]!==n[h]&&(W.disableVertexAttribArray(h),I[h]=0)}function r(n,I,h,q,$,k,_){!0===_?W.vertexAttribIPointer(n,I,h,$,k):W.vertexAttribPointer(n,I,h,q,$,k)}function K(){t(),P=!0,c!==N&&(c=N,S(c.object))}function t(){N.geometry=null,N.program=null,N.wireframe=!1}return{setup:function(q,N,g,K,t){let X=!1;if(k){const n=function(n,I,q){const k=!0===q.wireframe;let N=_[n.id];void 0===N&&(N={},_[n.id]=N);let c=N[I.id];void 0===c&&(c={},N[I.id]=c);let P=c[k];return void 0===P&&(P=B(h.isWebGL2?W.createVertexArray():$.createVertexArrayOES()),c[k]=P),P}(K,g,N);c!==n&&(c=n,S(c.object)),X=function(W,n,I,h){const q=c.attributes,$=n.attributes;let k=0;const _=I.getAttributes();for(const n in _)if(_[n].location>=0){const I=q[n];let h=$[n];if(void 0===h&&("instanceMatrix"===n&&W.instanceMatrix&&(h=W.instanceMatrix),"instanceColor"===n&&W.instanceColor&&(h=W.instanceColor)),void 0===I)return!0;if(I.attribute!==h)return!0;if(h&&I.data!==h.data)return!0;k++}return c.attributesNum!==k||c.index!==h}(q,K,g,t),X&&function(W,n,I,h){const q={},$=n.attributes;let k=0;const _=I.getAttributes();for(const n in _)if(_[n].location>=0){let I=$[n];void 0===I&&("instanceMatrix"===n&&W.instanceMatrix&&(I=W.instanceMatrix),"instanceColor"===n&&W.instanceColor&&(I=W.instanceColor));const h={};h.attribute=I,I&&I.data&&(h.data=I.data),q[n]=h,k++}c.attributes=q,c.attributesNum=k,c.index=h}(q,K,g,t)}else{const W=!0===N.wireframe;c.geometry===K.id&&c.program===g.id&&c.wireframe===W||(c.geometry=K.id,c.program=g.id,c.wireframe=W,X=!0)}null!==t&&I.update(t,W.ELEMENT_ARRAY_BUFFER),(X||P)&&(P=!1,function(q,$,k,_){if(!1===h.isWebGL2&&(q.isInstancedMesh||_.isInstancedBufferGeometry)&&null===n.get("ANGLE_instanced_arrays"))return;E();const N=_.attributes,c=k.getAttributes(),P=$.defaultAttributeValues;for(const n in c){const $=c[n];if($.location>=0){let k=N[n];if(void 0===k&&("instanceMatrix"===n&&q.instanceMatrix&&(k=q.instanceMatrix),"instanceColor"===n&&q.instanceColor&&(k=q.instanceColor)),void 0!==k){const n=k.normalized,N=k.itemSize,c=I.get(k);if(void 0===c)continue;const P=c.buffer,S=c.type,g=c.bytesPerElement,B=!0===h.isWebGL2&&(S===W.INT||S===W.UNSIGNED_INT||1013===k.gpuType);if(k.isInterleavedBufferAttribute){const I=k.data,h=I.stride,c=k.offset;if(I.isInstancedInterleavedBuffer){for(let W=0;W<$.locationSize;W++)Y($.location+W,I.meshPerAttribute);!0!==q.isInstancedMesh&&void 0===_._maxInstanceCount&&(_._maxInstanceCount=I.meshPerAttribute*I.count)}else for(let W=0;W<$.locationSize;W++)u($.location+W);W.bindBuffer(W.ARRAY_BUFFER,P);for(let W=0;W<$.locationSize;W++)r($.location+W,N/$.locationSize,S,n,h*g,(c+N/$.locationSize*W)*g,B)}else{if(k.isInstancedBufferAttribute){for(let W=0;W<$.locationSize;W++)Y($.location+W,k.meshPerAttribute);!0!==q.isInstancedMesh&&void 0===_._maxInstanceCount&&(_._maxInstanceCount=k.meshPerAttribute*k.count)}else for(let W=0;W<$.locationSize;W++)u($.location+W);W.bindBuffer(W.ARRAY_BUFFER,P);for(let W=0;W<$.locationSize;W++)r($.location+W,N/$.locationSize,S,n,N*g,N/$.locationSize*W*g,B)}}else if(void 0!==P){const I=P[n];if(void 0!==I)switch(I.length){case 2:W.vertexAttrib2fv($.location,I);break;case 3:W.vertexAttrib3fv($.location,I);break;case 4:W.vertexAttrib4fv($.location,I);break;default:W.vertexAttrib1fv($.location,I)}}}}f()}(q,N,g,K),null!==t&&W.bindBuffer(W.ELEMENT_ARRAY_BUFFER,I.get(t).buffer))},reset:K,resetDefaultState:t,dispose:function(){K();for(const W in _){const n=_[W];for(const W in n){const I=n[W];for(const W in I)g(I[W].object),delete I[W];delete n[W]}delete _[W]}},releaseStatesOfGeometry:function(W){if(void 0===_[W.id])return;const n=_[W.id];for(const W in n){const I=n[W];for(const W in I)g(I[W].object),delete I[W];delete n[W]}delete _[W.id]},releaseStatesOfProgram:function(W){for(const n in _){const I=_[n];if(void 0===I[W.id])continue;const h=I[W.id];for(const W in h)g(h[W].object),delete h[W];delete I[W.id]}},initAttributes:E,enableAttribute:u,disableUnusedAttributes:f}}function CS(W,n,I,h){const q=h.isWebGL2;let $;this.setMode=function(W){$=W},this.render=function(n,h){W.drawArrays($,n,h),I.update(h,$,1)},this.renderInstances=function(h,k,_){if(0===_)return;let N,c;if(q)N=W,c="drawArraysInstanced";else if(N=n.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===N)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");N[c]($,h,k,_),I.update(k,$,_)}}function bS(W,n,I){let h;function q(n){if("highp"===n){if(W.getShaderPrecisionFormat(W.VERTEX_SHADER,W.HIGH_FLOAT).precision>0&&W.getShaderPrecisionFormat(W.FRAGMENT_SHADER,W.HIGH_FLOAT).precision>0)return"highp";n="mediump"}return"mediump"===n&&W.getShaderPrecisionFormat(W.VERTEX_SHADER,W.MEDIUM_FLOAT).precision>0&&W.getShaderPrecisionFormat(W.FRAGMENT_SHADER,W.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const $="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===W.constructor.name;let k=void 0!==I.precision?I.precision:"highp";const _=q(k);_!==k&&(console.warn("THREE.WebGLRenderer:",k,"not supported, using",_,"instead."),k=_);const N=$||n.has("WEBGL_draw_buffers"),c=!0===I.logarithmicDepthBuffer,P=W.getParameter(W.MAX_TEXTURE_IMAGE_UNITS),S=W.getParameter(W.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=W.getParameter(W.MAX_TEXTURE_SIZE),B=W.getParameter(W.MAX_CUBE_MAP_TEXTURE_SIZE),E=W.getParameter(W.MAX_VERTEX_ATTRIBS),u=W.getParameter(W.MAX_VERTEX_UNIFORM_VECTORS),Y=W.getParameter(W.MAX_VARYING_VECTORS),f=W.getParameter(W.MAX_FRAGMENT_UNIFORM_VECTORS),r=S>0,K=$||n.has("OES_texture_float");return{isWebGL2:$,drawBuffers:N,getMaxAnisotropy:function(){if(void 0!==h)return h;if(!0===n.has("EXT_texture_filter_anisotropic")){const I=n.get("EXT_texture_filter_anisotropic");h=W.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else h=0;return h},getMaxPrecision:q,precision:k,logarithmicDepthBuffer:c,maxTextures:P,maxVertexTextures:S,maxTextureSize:g,maxCubemapSize:B,maxAttributes:E,maxVertexUniforms:u,maxVaryings:Y,maxFragmentUniforms:f,vertexTextures:r,floatFragmentTextures:K,floatVertexTextures:r&&K,maxSamples:$?W.getParameter(W.MAX_SAMPLES):0}}function lS(W){const n=this;let I=null,h=0,q=!1,$=!1;const k=new RS,_=new bN,N={value:null,needsUpdate:!1};function c(W,I,h,q){const $=null!==W?W.length:0;let c=null;if(0!==$){if(c=N.value,!0!==q||null===c){const n=h+4*$,q=I.matrixWorldInverse;_.getNormalMatrix(q),(null===c||c.length<n)&&(c=new Float32Array(n));for(let n=0,I=h;n!==$;++n,I+=4)k.copy(W[n]).applyMatrix4(q,_),k.normal.toArray(c,I),c[I+3]=k.constant}N.value=c,N.needsUpdate=!0}return n.numPlanes=$,n.numIntersection=0,c}this.uniform=N,this.numPlanes=0,this.numIntersection=0,this.init=function(W,n){const I=0!==W.length||n||0!==h||q;return q=n,h=W.length,I},this.beginShadows=function(){$=!0,c(null)},this.endShadows=function(){$=!1},this.setGlobalState=function(W,n){I=c(W,n,0)},this.setState=function(k,_,P){const S=k.clippingPlanes,g=k.clipIntersection,B=k.clipShadows,E=W.get(k);if(!q||null===S||0===S.length||$&&!B)$?c(null):(N.value!==I&&(N.value=I,N.needsUpdate=h>0),n.numPlanes=h,n.numIntersection=0);else{const W=$?0:h,n=4*W;let q=E.clippingState||null;N.value=q,q=c(S,_,n,P);for(let W=0;W!==n;++W)q[W]=I[W];E.clippingState=q,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=W}}}function AS(W){let n=new WeakMap;function I(W,n){return 303===n?W.mapping=301:304===n&&(W.mapping=302),W}function h(W){const I=W.target;I.removeEventListener("dispose",h);const q=n.get(I);void 0!==q&&(n.delete(I),q.dispose())}return{get:function(q){if(q&&q.isTexture&&!1===q.isRenderTargetTexture){const $=q.mapping;if(303===$||304===$){if(n.has(q))return I(n.get(q).texture,q.mapping);{const $=q.image;if($&&$.height>0){const k=new OS($.height/2);return k.fromEquirectangularTexture(W,q),n.set(q,k),q.addEventListener("dispose",h),I(k.texture,q.mapping)}return null}}}return q},dispose:function(){n=new WeakMap}}}class pS extends KS{constructor(W=-1,n=1,I=1,h=-1,q=.1,$=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=W,this.right=n,this.top=I,this.bottom=h,this.near=q,this.far=$,this.updateProjectionMatrix()}copy(W,n){return super.copy(W,n),this.left=W.left,this.right=W.right,this.top=W.top,this.bottom=W.bottom,this.near=W.near,this.far=W.far,this.zoom=W.zoom,this.view=null===W.view?null:Object.assign({},W.view),this}setViewOffset(W,n,I,h,q,$){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=W,this.view.fullHeight=n,this.view.offsetX=I,this.view.offsetY=h,this.view.width=q,this.view.height=$,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const W=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),I=(this.right+this.left)/2,h=(this.top+this.bottom)/2;let q=I-W,$=I+W,k=h+n,_=h-n;if(null!==this.view&&this.view.enabled){const W=(this.right-this.left)/this.view.fullWidth/this.zoom,n=(this.top-this.bottom)/this.view.fullHeight/this.zoom;q+=W*this.view.offsetX,$=q+W*this.view.width,k-=n*this.view.offsetY,_=k-n*this.view.height}this.projectionMatrix.makeOrthographic(q,$,k,_,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(W){const n=super.toJSON(W);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,null!==this.view&&(n.object.view=Object.assign({},this.view)),n}}const iS=[.125,.215,.35,.446,.526,.582],US=new pS,QS=new vP;let TS=null;const HS=(1+Math.sqrt(5))/2,aS=1/HS,JS=[new gc(1,1,1),new gc(-1,1,1),new gc(1,1,-1),new gc(-1,1,-1),new gc(0,HS,aS),new gc(0,HS,-aS),new gc(aS,0,HS),new gc(-aS,0,HS),new gc(HS,aS,0),new gc(-HS,aS,0)];class sS{constructor(W){this._renderer=W,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(W,n=0,I=.1,h=100){TS=this._renderer.getRenderTarget(),this._setSize(256);const q=this._allocateTargets();return q.depthBuffer=!0,this._sceneToCubeUV(W,I,h,q),n>0&&this._blur(q,0,0,n),this._applyPMREM(q),this._cleanup(q),q}fromEquirectangular(W,n=null){return this._fromTexture(W,n)}fromCubemap(W,n=null){return this._fromTexture(W,n)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Ig(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=ng(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(W){this._lodMax=Math.floor(Math.log2(W)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let W=0;W<this._lodPlanes.length;W++)this._lodPlanes[W].dispose()}_cleanup(W){this._renderer.setRenderTarget(TS),W.scissorTest=!1,Wg(W,0,0,W.width,W.height)}_fromTexture(W,n){301===W.mapping||302===W.mapping?this._setSize(0===W.image.length?16:W.image[0].width||W.image[0].image.width):this._setSize(W.image.width/4),TS=this._renderer.getRenderTarget();const I=n||this._allocateTargets();return this._textureToCubeUV(W,I),this._applyPMREM(I),this._cleanup(I),I}_allocateTargets(){const W=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,I={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,colorSpace:"srgb-linear",depthBuffer:!1},h=MS(W,n,I);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==W||this._pingPongRenderTarget.height!==n){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=MS(W,n,I);const{_lodMax:h}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(W){const n=[],I=[],h=[];let q=W;const $=W-4+1+iS.length;for(let k=0;k<$;k++){const $=Math.pow(2,q);I.push($);let _=1/$;k>W-4?_=iS[k-W+4-1]:0===k&&(_=0),h.push(_);const N=1/($-2),c=-N,P=1+N,S=[c,c,P,c,P,P,c,c,P,P,c,P],g=6,B=6,E=3,u=2,Y=1,f=new Float32Array(E*B*g),r=new Float32Array(u*B*g),K=new Float32Array(Y*B*g);for(let W=0;W<g;W++){const n=W%3*2/3-1,I=W>2?0:-1,h=[n,I,0,n+2/3,I,0,n+2/3,I+1,0,n,I,0,n+2/3,I+1,0,n,I+1,0];f.set(h,E*B*W),r.set(S,u*B*W);const q=[W,W,W,W,W,W];K.set(q,Y*B*W)}const t=new QP;t.setAttribute("position",new DP(f,E)),t.setAttribute("uv",new DP(r,u)),t.setAttribute("faceIndex",new DP(K,Y)),n.push(t),q>4&&q--}return{lodPlanes:n,sizeLods:I,sigmas:h}}(h)),this._blurMaterial=function(W,n,I){const h=new Float32Array(20),q=new gc(0,1,0);return new rS({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/n,CUBEUV_TEXEL_HEIGHT:1/I,CUBEUV_MAX_MIP:`${W}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:h},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:q}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(h,W,n)}return h}_compileMaterial(W){const n=new SS(this._lodPlanes[0],W);this._renderer.compile(n,US)}_sceneToCubeUV(W,n,I,h){const q=new tS(90,1,n,I),$=[1,-1,1,1,1,1],k=[1,1,1,-1,-1,-1],_=this._renderer,N=_.autoClear,c=_.toneMapping;_.getClearColor(QS),_.toneMapping=0,_.autoClear=!1;const P=new FP({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),S=new SS(new BS,P);let g=!1;const B=W.background;B?B.isColor&&(P.color.copy(B),W.background=null,g=!0):(P.color.copy(QS),g=!0);for(let n=0;n<6;n++){const I=n%3;0===I?(q.up.set(0,$[n],0),q.lookAt(k[n],0,0)):1===I?(q.up.set(0,0,$[n]),q.lookAt(0,k[n],0)):(q.up.set(0,$[n],0),q.lookAt(0,0,k[n]));const N=this._cubeSize;Wg(h,I*N,n>2?N:0,N,N),_.setRenderTarget(h),g&&_.render(S,q),_.render(W,q)}S.geometry.dispose(),S.material.dispose(),_.toneMapping=c,_.autoClear=N,W.background=B}_textureToCubeUV(W,n){const I=this._renderer,h=301===W.mapping||302===W.mapping;h?(null===this._cubemapMaterial&&(this._cubemapMaterial=Ig()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===W.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=ng());const q=h?this._cubemapMaterial:this._equirectMaterial,$=new SS(this._lodPlanes[0],q);q.uniforms.envMap.value=W;const k=this._cubeSize;Wg(n,0,0,3*k,2*k),I.setRenderTarget(n),I.render($,US)}_applyPMREM(W){const n=this._renderer,I=n.autoClear;n.autoClear=!1;for(let n=1;n<this._lodPlanes.length;n++){const I=Math.sqrt(this._sigmas[n]*this._sigmas[n]-this._sigmas[n-1]*this._sigmas[n-1]),h=JS[(n-1)%JS.length];this._blur(W,n-1,n,I,h)}n.autoClear=I}_blur(W,n,I,h,q){const $=this._pingPongRenderTarget;this._halfBlur(W,$,n,I,h,"latitudinal",q),this._halfBlur($,W,I,I,h,"longitudinal",q)}_halfBlur(W,n,I,h,q,$,k){const _=this._renderer,N=this._blurMaterial;"latitudinal"!==$&&"longitudinal"!==$&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new SS(this._lodPlanes[h],N),P=N.uniforms,S=this._sizeLods[I]-1,g=isFinite(q)?Math.PI/(2*S):2*Math.PI/39,B=q/g,E=isFinite(q)?1+Math.floor(3*B):20;E>20&&console.warn(`sigmaRadians, ${q}, is too large and will clip, as it requested ${E} samples when the maximum is set to 20`);const u=[];let Y=0;for(let W=0;W<20;++W){const n=W/B,I=Math.exp(-n*n/2);u.push(I),0===W?Y+=I:W<E&&(Y+=2*I)}for(let W=0;W<u.length;W++)u[W]=u[W]/Y;P.envMap.value=W.texture,P.samples.value=E,P.weights.value=u,P.latitudinal.value="latitudinal"===$,k&&(P.poleAxis.value=k);const{_lodMax:f}=this;P.dTheta.value=g,P.mipInt.value=f-I;const r=this._sizeLods[h];Wg(n,3*r*(h>f-4?h-f+4:0),4*(this._cubeSize-r),3*r,2*r),_.setRenderTarget(n),_.render(c,US)}}function MS(W,n,I){const h=new cc(W,n,I);return h.texture.mapping=306,h.texture.name="PMREM.cubeUv",h.scissorTest=!0,h}function Wg(W,n,I,h,q){W.viewport.set(n,I,h,q),W.scissor.set(n,I,h,q)}function ng(){return new rS({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Ig(){return new rS({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function hg(W){let n=new WeakMap,I=null;function h(W){const I=W.target;I.removeEventListener("dispose",h);const q=n.get(I);void 0!==q&&(n.delete(I),q.dispose())}return{get:function(q){if(q&&q.isTexture){const $=q.mapping,k=303===$||304===$,_=301===$||302===$;if(k||_){if(q.isRenderTargetTexture&&!0===q.needsPMREMUpdate){q.needsPMREMUpdate=!1;let h=n.get(q);return null===I&&(I=new sS(W)),h=k?I.fromEquirectangular(q,h):I.fromCubemap(q,h),n.set(q,h),h.texture}if(n.has(q))return n.get(q).texture;{const $=q.image;if(k&&$&&$.height>0||_&&$&&function(W){let n=0;const I=6;for(let h=0;h<I;h++)void 0!==W[h]&&n++;return n===I}($)){null===I&&(I=new sS(W));const $=k?I.fromEquirectangular(q):I.fromCubemap(q);return n.set(q,$),q.addEventListener("dispose",h),$.texture}return null}}}return q},dispose:function(){n=new WeakMap,null!==I&&(I.dispose(),I=null)}}}function qg(W){const n={};function I(I){if(void 0!==n[I])return n[I];let h;switch(I){case"WEBGL_depth_texture":h=W.getExtension("WEBGL_depth_texture")||W.getExtension("MOZ_WEBGL_depth_texture")||W.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":h=W.getExtension("EXT_texture_filter_anisotropic")||W.getExtension("MOZ_EXT_texture_filter_anisotropic")||W.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":h=W.getExtension("WEBGL_compressed_texture_s3tc")||W.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||W.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":h=W.getExtension("WEBGL_compressed_texture_pvrtc")||W.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:h=W.getExtension(I)}return n[I]=h,h}return{has:function(W){return null!==I(W)},init:function(W){W.isWebGL2?I("EXT_color_buffer_float"):(I("WEBGL_depth_texture"),I("OES_texture_float"),I("OES_texture_half_float"),I("OES_texture_half_float_linear"),I("OES_standard_derivatives"),I("OES_element_index_uint"),I("OES_vertex_array_object"),I("ANGLE_instanced_arrays")),I("OES_texture_float_linear"),I("EXT_color_buffer_half_float"),I("WEBGL_multisampled_render_to_texture")},get:function(W){const n=I(W);return null===n&&console.warn("THREE.WebGLRenderer: "+W+" extension not supported."),n}}}function $g(W,n,I,h){const q={},$=new WeakMap;function k(W){const _=W.target;null!==_.index&&n.remove(_.index);for(const W in _.attributes)n.remove(_.attributes[W]);for(const W in _.morphAttributes){const I=_.morphAttributes[W];for(let W=0,h=I.length;W<h;W++)n.remove(I[W])}_.removeEventListener("dispose",k),delete q[_.id];const N=$.get(_);N&&(n.remove(N),$.delete(_)),h.releaseStatesOfGeometry(_),!0===_.isInstancedBufferGeometry&&delete _._maxInstanceCount,I.memory.geometries--}function _(W){const I=[],h=W.index,q=W.attributes.position;let k=0;if(null!==h){const W=h.array;k=h.version;for(let n=0,h=W.length;n<h;n+=3){const h=W[n+0],q=W[n+1],$=W[n+2];I.push(h,q,q,$,$,h)}}else{if(void 0===q)return;{const W=q.array;k=q.version;for(let n=0,h=W.length/3-1;n<h;n+=3){const W=n+0,h=n+1,q=n+2;I.push(W,h,h,q,q,W)}}}const _=new(AN(I)?GP:xP)(I,1);_.version=k;const N=$.get(W);N&&n.remove(N),$.set(W,_)}return{get:function(W,n){return!0===q[n.id]||(n.addEventListener("dispose",k),q[n.id]=!0,I.memory.geometries++),n},update:function(I){const h=I.attributes;for(const I in h)n.update(h[I],W.ARRAY_BUFFER);const q=I.morphAttributes;for(const I in q){const h=q[I];for(let I=0,q=h.length;I<q;I++)n.update(h[I],W.ARRAY_BUFFER)}},getWireframeAttribute:function(W){const n=$.get(W);if(n){const I=W.index;null!==I&&n.version<I.version&&_(W)}else _(W);return $.get(W)}}}function kg(W,n,I,h){const q=h.isWebGL2;let $,k,_;this.setMode=function(W){$=W},this.setIndex=function(W){k=W.type,_=W.bytesPerElement},this.render=function(n,h){W.drawElements($,h,k,n*_),I.update(h,$,1)},this.renderInstances=function(h,N,c){if(0===c)return;let P,S;if(q)P=W,S="drawElementsInstanced";else if(P=n.get("ANGLE_instanced_arrays"),S="drawElementsInstancedANGLE",null===P)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");P[S]($,N,k,h*_,c),I.update(N,$,c)}}function _g(W){const n={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:n,programs:null,autoReset:!0,reset:function(){n.calls=0,n.triangles=0,n.points=0,n.lines=0},update:function(I,h,q){switch(n.calls++,h){case W.TRIANGLES:n.triangles+=q*(I/3);break;case W.LINES:n.lines+=q*(I/2);break;case W.LINE_STRIP:n.lines+=q*(I-1);break;case W.LINE_LOOP:n.lines+=q*I;break;case W.POINTS:n.points+=q*I;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",h)}}}}function Ng(W,n){return W[0]-n[0]}function cg(W,n){return Math.abs(n[1])-Math.abs(W[1])}function Pg(W,n,I){const h={},q=new Float32Array(8),$=new WeakMap,k=new _c,_=[];for(let W=0;W<8;W++)_[W]=[W,0];return{update:function(N,c,P){const S=N.morphTargetInfluences;if(!0===n.isWebGL2){const g=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,B=void 0!==g?g.length:0;let E=$.get(c);if(void 0===E||E.count!==B){void 0!==E&&E.texture.dispose();const f=void 0!==c.morphAttributes.position,r=void 0!==c.morphAttributes.normal,K=void 0!==c.morphAttributes.color,t=c.morphAttributes.position||[],X=c.morphAttributes.normal||[],L=c.morphAttributes.color||[];let O=0;!0===f&&(O=1),!0===r&&(O=2),!0===K&&(O=3);let Z=c.attributes.position.count*O,d=1;Z>n.maxTextureSize&&(d=Math.ceil(Z/n.maxTextureSize),Z=n.maxTextureSize);const m=new Float32Array(Z*d*4*B),R=new Pc(m,Z,d,B);R.type=1015,R.needsUpdate=!0;const e=4*O;for(let z=0;z<B;z++){const v=t[z],V=X[z],F=L[z],w=Z*d*4*z;for(let o=0;o<v.count;o++){const D=o*e;!0===f&&(k.fromBufferAttribute(v,o),m[w+D+0]=k.x,m[w+D+1]=k.y,m[w+D+2]=k.z,m[w+D+3]=0),!0===r&&(k.fromBufferAttribute(V,o),m[w+D+4]=k.x,m[w+D+5]=k.y,m[w+D+6]=k.z,m[w+D+7]=0),!0===K&&(k.fromBufferAttribute(F,o),m[w+D+8]=k.x,m[w+D+9]=k.y,m[w+D+10]=k.z,m[w+D+11]=4===F.itemSize?k.w:1)}}function j(){R.dispose(),$.delete(c),c.removeEventListener("dispose",j)}E={count:B,texture:R,size:new CN(Z,d)},$.set(c,E),c.addEventListener("dispose",j)}let u=0;for(let x=0;x<S.length;x++)u+=S[x];const Y=c.morphTargetsRelative?1:1-u;P.getUniforms().setValue(W,"morphTargetBaseInfluence",Y),P.getUniforms().setValue(W,"morphTargetInfluences",S),P.getUniforms().setValue(W,"morphTargetsTexture",E.texture,I),P.getUniforms().setValue(W,"morphTargetsTextureSize",E.size)}else{const G=void 0===S?0:S.length;let y=h[c.id];if(void 0===y||y.length!==G){y=[];for(let p=0;p<G;p++)y[p]=[p,0];h[c.id]=y}for(let i=0;i<G;i++){const U=y[i];U[0]=i,U[1]=S[i]}y.sort(cg);for(let Q=0;Q<8;Q++)Q<G&&y[Q][1]?(_[Q][0]=y[Q][0],_[Q][1]=y[Q][1]):(_[Q][0]=Number.MAX_SAFE_INTEGER,_[Q][1]=0);_.sort(Ng);const C=c.morphAttributes.position,b=c.morphAttributes.normal;let l=0;for(let T=0;T<8;T++){const H=_[T],a=H[0],J=H[1];a!==Number.MAX_SAFE_INTEGER&&J?(C&&c.getAttribute("morphTarget"+T)!==C[a]&&c.setAttribute("morphTarget"+T,C[a]),b&&c.getAttribute("morphNormal"+T)!==b[a]&&c.setAttribute("morphNormal"+T,b[a]),q[T]=J,l+=J):(C&&!0===c.hasAttribute("morphTarget"+T)&&c.deleteAttribute("morphTarget"+T),b&&!0===c.hasAttribute("morphNormal"+T)&&c.deleteAttribute("morphNormal"+T),q[T]=0)}const A=c.morphTargetsRelative?1:1-l;P.getUniforms().setValue(W,"morphTargetBaseInfluence",A),P.getUniforms().setValue(W,"morphTargetInfluences",q)}}}}function Sg(W,n,I,h){let q=new WeakMap;function $(W){const n=W.target;n.removeEventListener("dispose",$),I.remove(n.instanceMatrix),null!==n.instanceColor&&I.remove(n.instanceColor)}return{update:function(k){const _=h.render.frame,N=k.geometry,c=n.get(k,N);if(q.get(c)!==_&&(n.update(c),q.set(c,_)),k.isInstancedMesh&&(!1===k.hasEventListener("dispose",$)&&k.addEventListener("dispose",$),q.get(k)!==_&&(I.update(k.instanceMatrix,W.ARRAY_BUFFER),null!==k.instanceColor&&I.update(k.instanceColor,W.ARRAY_BUFFER),q.set(k,_))),k.isSkinnedMesh){const W=k.skeleton;q.get(W)!==_&&(W.update(),q.set(W,_))}return c},dispose:function(){q=new WeakMap}}}const gg=new kc,Bg=new Pc,Eg=new class extends kc{constructor(W=null,n=1,I=1,h=1){super(null),this.isData3DTexture=!0,this.image={data:W,width:n,height:I,depth:h},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},ug=new LS,Yg=[],fg=[],rg=new Float32Array(16),Kg=new Float32Array(9),tg=new Float32Array(4);function Xg(W,n,I){const h=W[0];if(h<=0||h>0)return W;const q=n*I;let $=Yg[q];if(void 0===$&&($=new Float32Array(q),Yg[q]=$),0!==n){h.toArray($,0);for(let h=1,q=0;h!==n;++h)q+=I,W[h].toArray($,q)}return $}function Lg(W,n){if(W.length!==n.length)return!1;for(let I=0,h=W.length;I<h;I++)if(W[I]!==n[I])return!1;return!0}function Og(W,n){for(let I=0,h=n.length;I<h;I++)W[I]=n[I]}function Zg(W,n){let I=fg[n];void 0===I&&(I=new Int32Array(n),fg[n]=I);for(let h=0;h!==n;++h)I[h]=W.allocateTextureUnit();return I}function dg(W,n){const I=this.cache;I[0]!==n&&(W.uniform1f(this.addr,n),I[0]=n)}function mg(W,n){const I=this.cache;if(void 0!==n.x)I[0]===n.x&&I[1]===n.y||(W.uniform2f(this.addr,n.x,n.y),I[0]=n.x,I[1]=n.y);else{if(Lg(I,n))return;W.uniform2fv(this.addr,n),Og(I,n)}}function Rg(W,n){const I=this.cache;if(void 0!==n.x)I[0]===n.x&&I[1]===n.y&&I[2]===n.z||(W.uniform3f(this.addr,n.x,n.y,n.z),I[0]=n.x,I[1]=n.y,I[2]=n.z);else if(void 0!==n.r)I[0]===n.r&&I[1]===n.g&&I[2]===n.b||(W.uniform3f(this.addr,n.r,n.g,n.b),I[0]=n.r,I[1]=n.g,I[2]=n.b);else{if(Lg(I,n))return;W.uniform3fv(this.addr,n),Og(I,n)}}function eg(W,n){const I=this.cache;if(void 0!==n.x)I[0]===n.x&&I[1]===n.y&&I[2]===n.z&&I[3]===n.w||(W.uniform4f(this.addr,n.x,n.y,n.z,n.w),I[0]=n.x,I[1]=n.y,I[2]=n.z,I[3]=n.w);else{if(Lg(I,n))return;W.uniform4fv(this.addr,n),Og(I,n)}}function jg(W,n){const I=this.cache,h=n.elements;if(void 0===h){if(Lg(I,n))return;W.uniformMatrix2fv(this.addr,!1,n),Og(I,n)}else{if(Lg(I,h))return;tg.set(h),W.uniformMatrix2fv(this.addr,!1,tg),Og(I,h)}}function zg(W,n){const I=this.cache,h=n.elements;if(void 0===h){if(Lg(I,n))return;W.uniformMatrix3fv(this.addr,!1,n),Og(I,n)}else{if(Lg(I,h))return;Kg.set(h),W.uniformMatrix3fv(this.addr,!1,Kg),Og(I,h)}}function vg(W,n){const I=this.cache,h=n.elements;if(void 0===h){if(Lg(I,n))return;W.uniformMatrix4fv(this.addr,!1,n),Og(I,n)}else{if(Lg(I,h))return;rg.set(h),W.uniformMatrix4fv(this.addr,!1,rg),Og(I,h)}}function Vg(W,n){const I=this.cache;I[0]!==n&&(W.uniform1i(this.addr,n),I[0]=n)}function Fg(W,n){const I=this.cache;if(void 0!==n.x)I[0]===n.x&&I[1]===n.y||(W.uniform2i(this.addr,n.x,n.y),I[0]=n.x,I[1]=n.y);else{if(Lg(I,n))return;W.uniform2iv(this.addr,n),Og(I,n)}}function wg(W,n){const I=this.cache;if(void 0!==n.x)I[0]===n.x&&I[1]===n.y&&I[2]===n.z||(W.uniform3i(this.addr,n.x,n.y,n.z),I[0]=n.x,I[1]=n.y,I[2]=n.z);else{if(Lg(I,n))return;W.uniform3iv(this.addr,n),Og(I,n)}}function og(W,n){const I=this.cache;if(void 0!==n.x)I[0]===n.x&&I[1]===n.y&&I[2]===n.z&&I[3]===n.w||(W.uniform4i(this.addr,n.x,n.y,n.z,n.w),I[0]=n.x,I[1]=n.y,I[2]=n.z,I[3]=n.w);else{if(Lg(I,n))return;W.uniform4iv(this.addr,n),Og(I,n)}}function Dg(W,n){const I=this.cache;I[0]!==n&&(W.uniform1ui(this.addr,n),I[0]=n)}function xg(W,n){const I=this.cache;if(void 0!==n.x)I[0]===n.x&&I[1]===n.y||(W.uniform2ui(this.addr,n.x,n.y),I[0]=n.x,I[1]=n.y);else{if(Lg(I,n))return;W.uniform2uiv(this.addr,n),Og(I,n)}}function Gg(W,n){const I=this.cache;if(void 0!==n.x)I[0]===n.x&&I[1]===n.y&&I[2]===n.z||(W.uniform3ui(this.addr,n.x,n.y,n.z),I[0]=n.x,I[1]=n.y,I[2]=n.z);else{if(Lg(I,n))return;W.uniform3uiv(this.addr,n),Og(I,n)}}function yg(W,n){const I=this.cache;if(void 0!==n.x)I[0]===n.x&&I[1]===n.y&&I[2]===n.z&&I[3]===n.w||(W.uniform4ui(this.addr,n.x,n.y,n.z,n.w),I[0]=n.x,I[1]=n.y,I[2]=n.z,I[3]=n.w);else{if(Lg(I,n))return;W.uniform4uiv(this.addr,n),Og(I,n)}}function Cg(W,n,I){const h=this.cache,q=I.allocateTextureUnit();h[0]!==q&&(W.uniform1i(this.addr,q),h[0]=q),I.setTexture2D(n||gg,q)}function bg(W,n,I){const h=this.cache,q=I.allocateTextureUnit();h[0]!==q&&(W.uniform1i(this.addr,q),h[0]=q),I.setTexture3D(n||Eg,q)}function lg(W,n,I){const h=this.cache,q=I.allocateTextureUnit();h[0]!==q&&(W.uniform1i(this.addr,q),h[0]=q),I.setTextureCube(n||ug,q)}function Ag(W,n,I){const h=this.cache,q=I.allocateTextureUnit();h[0]!==q&&(W.uniform1i(this.addr,q),h[0]=q),I.setTexture2DArray(n||Bg,q)}function pg(W,n){W.uniform1fv(this.addr,n)}function ig(W,n){const I=Xg(n,this.size,2);W.uniform2fv(this.addr,I)}function Ug(W,n){const I=Xg(n,this.size,3);W.uniform3fv(this.addr,I)}function Qg(W,n){const I=Xg(n,this.size,4);W.uniform4fv(this.addr,I)}function Tg(W,n){const I=Xg(n,this.size,4);W.uniformMatrix2fv(this.addr,!1,I)}function Hg(W,n){const I=Xg(n,this.size,9);W.uniformMatrix3fv(this.addr,!1,I)}function ag(W,n){const I=Xg(n,this.size,16);W.uniformMatrix4fv(this.addr,!1,I)}function Jg(W,n){W.uniform1iv(this.addr,n)}function sg(W,n){W.uniform2iv(this.addr,n)}function Mg(W,n){W.uniform3iv(this.addr,n)}function WB(W,n){W.uniform4iv(this.addr,n)}function nB(W,n){W.uniform1uiv(this.addr,n)}function IB(W,n){W.uniform2uiv(this.addr,n)}function hB(W,n){W.uniform3uiv(this.addr,n)}function qB(W,n){W.uniform4uiv(this.addr,n)}function $B(W,n,I){const h=this.cache,q=n.length,$=Zg(I,q);Lg(h,$)||(W.uniform1iv(this.addr,$),Og(h,$));for(let W=0;W!==q;++W)I.setTexture2D(n[W]||gg,$[W])}function kB(W,n,I){const h=this.cache,q=n.length,$=Zg(I,q);Lg(h,$)||(W.uniform1iv(this.addr,$),Og(h,$));for(let W=0;W!==q;++W)I.setTexture3D(n[W]||Eg,$[W])}function _B(W,n,I){const h=this.cache,q=n.length,$=Zg(I,q);Lg(h,$)||(W.uniform1iv(this.addr,$),Og(h,$));for(let W=0;W!==q;++W)I.setTextureCube(n[W]||ug,$[W])}function NB(W,n,I){const h=this.cache,q=n.length,$=Zg(I,q);Lg(h,$)||(W.uniform1iv(this.addr,$),Og(h,$));for(let W=0;W!==q;++W)I.setTexture2DArray(n[W]||Bg,$[W])}class cB{constructor(W,n,I){this.id=W,this.addr=I,this.cache=[],this.setValue=function(W){switch(W){case 5126:return dg;case 35664:return mg;case 35665:return Rg;case 35666:return eg;case 35674:return jg;case 35675:return zg;case 35676:return vg;case 5124:case 35670:return Vg;case 35667:case 35671:return Fg;case 35668:case 35672:return wg;case 35669:case 35673:return og;case 5125:return Dg;case 36294:return xg;case 36295:return Gg;case 36296:return yg;case 35678:case 36198:case 36298:case 36306:case 35682:return Cg;case 35679:case 36299:case 36307:return bg;case 35680:case 36300:case 36308:case 36293:return lg;case 36289:case 36303:case 36311:case 36292:return Ag}}(n.type)}}class PB{constructor(W,n,I){this.id=W,this.addr=I,this.cache=[],this.size=n.size,this.setValue=function(W){switch(W){case 5126:return pg;case 35664:return ig;case 35665:return Ug;case 35666:return Qg;case 35674:return Tg;case 35675:return Hg;case 35676:return ag;case 5124:case 35670:return Jg;case 35667:case 35671:return sg;case 35668:case 35672:return Mg;case 35669:case 35673:return WB;case 5125:return nB;case 36294:return IB;case 36295:return hB;case 36296:return qB;case 35678:case 36198:case 36298:case 36306:case 35682:return $B;case 35679:case 36299:case 36307:return kB;case 35680:case 36300:case 36308:case 36293:return _B;case 36289:case 36303:case 36311:case 36292:return NB}}(n.type)}}class SB{constructor(W){this.id=W,this.seq=[],this.map={}}setValue(W,n,I){const h=this.seq;for(let q=0,$=h.length;q!==$;++q){const $=h[q];$.setValue(W,n[$.id],I)}}}const gB=/(\w+)(\])?(\[|\.)?/g;function BB(W,n){W.seq.push(n),W.map[n.id]=n}function EB(W,n,I){const h=W.name,q=h.length;for(gB.lastIndex=0;;){const $=gB.exec(h),k=gB.lastIndex;let _=$[1];const N="]"===$[2],c=$[3];if(N&&(_|=0),void 0===c||"["===c&&k+2===q){BB(I,void 0===c?new cB(_,W,n):new PB(_,W,n));break}{let W=I.map[_];void 0===W&&(W=new SB(_),BB(I,W)),I=W}}}class uB{constructor(W,n){this.seq=[],this.map={};const I=W.getProgramParameter(n,W.ACTIVE_UNIFORMS);for(let h=0;h<I;++h){const I=W.getActiveUniform(n,h);EB(I,W.getUniformLocation(n,I.name),this)}}setValue(W,n,I,h){const q=this.map[n];void 0!==q&&q.setValue(W,I,h)}setOptional(W,n,I){const h=n[I];void 0!==h&&this.setValue(W,I,h)}static upload(W,n,I,h){for(let q=0,$=n.length;q!==$;++q){const $=n[q],k=I[$.id];!1!==k.needsUpdate&&$.setValue(W,k.value,h)}}static seqWithValue(W,n){const I=[];for(let h=0,q=W.length;h!==q;++h){const q=W[h];q.id in n&&I.push(q)}return I}}function YB(W,n,I){const h=W.createShader(n);return W.shaderSource(h,I),W.compileShader(h),h}let fB=0;function rB(W,n,I){const h=W.getShaderParameter(n,W.COMPILE_STATUS),q=W.getShaderInfoLog(n).trim();if(h&&""===q)return"";const $=/ERROR: 0:(\d+)/.exec(q);if($){const h=parseInt($[1]);return I.toUpperCase()+"\n\n"+q+"\n\n"+function(W,n){const I=W.split("\n"),h=[],q=Math.max(n-6,0),$=Math.min(n+6,I.length);for(let W=q;W<$;W++){const q=W+1;h.push(`${q===n?">":" "} ${q}: ${I[W]}`)}return h.join("\n")}(W.getShaderSource(n),h)}return q}function KB(W,n){const I=function(W){switch(W){case"srgb-linear":return["Linear","( value )"];case"srgb":return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",W),["Linear","( value )"]}}(n);return"vec4 "+W+"( vec4 value ) { return LinearTo"+I[0]+I[1]+"; }"}function tB(W,n){let I;switch(n){case 1:I="Linear";break;case 2:I="Reinhard";break;case 3:I="OptimizedCineon";break;case 4:I="ACESFilmic";break;case 5:I="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",n),I="Linear"}return"vec3 "+W+"( vec3 color ) { return "+I+"ToneMapping( color ); }"}function XB(W){return""!==W}function LB(W,n){const I=n.numSpotLightShadows+n.numSpotLightMaps-n.numSpotLightShadowsWithMaps;return W.replace(/NUM_DIR_LIGHTS/g,n.numDirLights).replace(/NUM_SPOT_LIGHTS/g,n.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,n.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,I).replace(/NUM_RECT_AREA_LIGHTS/g,n.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,n.numPointLights).replace(/NUM_HEMI_LIGHTS/g,n.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,n.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,n.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,n.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,n.numPointLightShadows)}function OB(W,n){return W.replace(/NUM_CLIPPING_PLANES/g,n.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,n.numClippingPlanes-n.numClipIntersection)}const ZB=/^[ \t]*#include +<([\w\d./]+)>/gm;function dB(W){return W.replace(ZB,RB)}const mB=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function RB(W,n){let I=wS[n];if(void 0===I){const W=mB.get(n);if(void 0===W)throw new Error("Can not resolve #include <"+n+">");I=wS[W],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',n,W)}return dB(I)}const eB=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function jB(W){return W.replace(eB,zB)}function zB(W,n,I,h){let q="";for(let W=parseInt(n);W<parseInt(I);W++)q+=h.replace(/\[\s*i\s*\]/g,"[ "+W+" ]").replace(/UNROLLED_LOOP_INDEX/g,W);return q}function vB(W){let n="precision "+W.precision+" float;\nprecision "+W.precision+" int;";return"highp"===W.precision?n+="\n#define HIGH_PRECISION":"mediump"===W.precision?n+="\n#define MEDIUM_PRECISION":"lowp"===W.precision&&(n+="\n#define LOW_PRECISION"),n}function VB(W,n,I,h){const q=W.getContext(),$=I.defines;let k=I.vertexShader,_=I.fragmentShader;const N=function(W){let n="SHADOWMAP_TYPE_BASIC";return 1===W.shadowMapType?n="SHADOWMAP_TYPE_PCF":2===W.shadowMapType?n="SHADOWMAP_TYPE_PCF_SOFT":3===W.shadowMapType&&(n="SHADOWMAP_TYPE_VSM"),n}(I),c=function(W){let n="ENVMAP_TYPE_CUBE";if(W.envMap)switch(W.envMapMode){case 301:case 302:n="ENVMAP_TYPE_CUBE";break;case 306:n="ENVMAP_TYPE_CUBE_UV"}return n}(I),P=function(W){let n="ENVMAP_MODE_REFLECTION";return W.envMap&&302===W.envMapMode&&(n="ENVMAP_MODE_REFRACTION"),n}(I),S=function(W){let n="ENVMAP_BLENDING_NONE";if(W.envMap)switch(W.combine){case 0:n="ENVMAP_BLENDING_MULTIPLY";break;case 1:n="ENVMAP_BLENDING_MIX";break;case 2:n="ENVMAP_BLENDING_ADD"}return n}(I),g=function(W){const n=W.envMapCubeUVHeight;if(null===n)return null;const I=Math.log2(n)-2,h=1/n;return{texelWidth:1/(3*Math.max(Math.pow(2,I),112)),texelHeight:h,maxMip:I}}(I),B=I.isWebGL2?"":function(W){return[W.extensionDerivatives||W.envMapCubeUVHeight||W.bumpMap||W.normalMapTangentSpace||W.clearcoatNormalMap||W.flatShading||"physical"===W.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(W.extensionFragDepth||W.logarithmicDepthBuffer)&&W.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",W.extensionDrawBuffers&&W.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(W.extensionShaderTextureLOD||W.envMap||W.transmission)&&W.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(XB).join("\n")}(I),E=function(W){const n=[];for(const I in W){const h=W[I];!1!==h&&n.push("#define "+I+" "+h)}return n.join("\n")}($),u=q.createProgram();let Y,f,r=I.glslVersion?"#version "+I.glslVersion+"\n":"";I.isRawShaderMaterial?(Y=["#define SHADER_TYPE "+I.shaderType,"#define SHADER_NAME "+I.shaderName,E].filter(XB).join("\n"),Y.length>0&&(Y+="\n"),f=[B,"#define SHADER_TYPE "+I.shaderType,"#define SHADER_NAME "+I.shaderName,E].filter(XB).join("\n"),f.length>0&&(f+="\n")):(Y=[vB(I),"#define SHADER_TYPE "+I.shaderType,"#define SHADER_NAME "+I.shaderName,E,I.instancing?"#define USE_INSTANCING":"",I.instancingColor?"#define USE_INSTANCING_COLOR":"",I.useFog&&I.fog?"#define USE_FOG":"",I.useFog&&I.fogExp2?"#define FOG_EXP2":"",I.map?"#define USE_MAP":"",I.envMap?"#define USE_ENVMAP":"",I.envMap?"#define "+P:"",I.lightMap?"#define USE_LIGHTMAP":"",I.aoMap?"#define USE_AOMAP":"",I.bumpMap?"#define USE_BUMPMAP":"",I.normalMap?"#define USE_NORMALMAP":"",I.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",I.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",I.displacementMap?"#define USE_DISPLACEMENTMAP":"",I.emissiveMap?"#define USE_EMISSIVEMAP":"",I.anisotropyMap?"#define USE_ANISOTROPYMAP":"",I.clearcoatMap?"#define USE_CLEARCOATMAP":"",I.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",I.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",I.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",I.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",I.specularMap?"#define USE_SPECULARMAP":"",I.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",I.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",I.roughnessMap?"#define USE_ROUGHNESSMAP":"",I.metalnessMap?"#define USE_METALNESSMAP":"",I.alphaMap?"#define USE_ALPHAMAP":"",I.alphaHash?"#define USE_ALPHAHASH":"",I.transmission?"#define USE_TRANSMISSION":"",I.transmissionMap?"#define USE_TRANSMISSIONMAP":"",I.thicknessMap?"#define USE_THICKNESSMAP":"",I.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",I.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",I.mapUv?"#define MAP_UV "+I.mapUv:"",I.alphaMapUv?"#define ALPHAMAP_UV "+I.alphaMapUv:"",I.lightMapUv?"#define LIGHTMAP_UV "+I.lightMapUv:"",I.aoMapUv?"#define AOMAP_UV "+I.aoMapUv:"",I.emissiveMapUv?"#define EMISSIVEMAP_UV "+I.emissiveMapUv:"",I.bumpMapUv?"#define BUMPMAP_UV "+I.bumpMapUv:"",I.normalMapUv?"#define NORMALMAP_UV "+I.normalMapUv:"",I.displacementMapUv?"#define DISPLACEMENTMAP_UV "+I.displacementMapUv:"",I.metalnessMapUv?"#define METALNESSMAP_UV "+I.metalnessMapUv:"",I.roughnessMapUv?"#define ROUGHNESSMAP_UV "+I.roughnessMapUv:"",I.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+I.anisotropyMapUv:"",I.clearcoatMapUv?"#define CLEARCOATMAP_UV "+I.clearcoatMapUv:"",I.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+I.clearcoatNormalMapUv:"",I.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+I.clearcoatRoughnessMapUv:"",I.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+I.iridescenceMapUv:"",I.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+I.iridescenceThicknessMapUv:"",I.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+I.sheenColorMapUv:"",I.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+I.sheenRoughnessMapUv:"",I.specularMapUv?"#define SPECULARMAP_UV "+I.specularMapUv:"",I.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+I.specularColorMapUv:"",I.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+I.specularIntensityMapUv:"",I.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+I.transmissionMapUv:"",I.thicknessMapUv?"#define THICKNESSMAP_UV "+I.thicknessMapUv:"",I.vertexTangents&&!1===I.flatShading?"#define USE_TANGENT":"",I.vertexColors?"#define USE_COLOR":"",I.vertexAlphas?"#define USE_COLOR_ALPHA":"",I.vertexUv1s?"#define USE_UV1":"",I.vertexUv2s?"#define USE_UV2":"",I.vertexUv3s?"#define USE_UV3":"",I.pointsUvs?"#define USE_POINTS_UV":"",I.flatShading?"#define FLAT_SHADED":"",I.skinning?"#define USE_SKINNING":"",I.morphTargets?"#define USE_MORPHTARGETS":"",I.morphNormals&&!1===I.flatShading?"#define USE_MORPHNORMALS":"",I.morphColors&&I.isWebGL2?"#define USE_MORPHCOLORS":"",I.morphTargetsCount>0&&I.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",I.morphTargetsCount>0&&I.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+I.morphTextureStride:"",I.morphTargetsCount>0&&I.isWebGL2?"#define MORPHTARGETS_COUNT "+I.morphTargetsCount:"",I.doubleSided?"#define DOUBLE_SIDED":"",I.flipSided?"#define FLIP_SIDED":"",I.shadowMapEnabled?"#define USE_SHADOWMAP":"",I.shadowMapEnabled?"#define "+N:"",I.sizeAttenuation?"#define USE_SIZEATTENUATION":"",I.useLegacyLights?"#define LEGACY_LIGHTS":"",I.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",I.logarithmicDepthBuffer&&I.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(XB).join("\n"),f=[B,vB(I),"#define SHADER_TYPE "+I.shaderType,"#define SHADER_NAME "+I.shaderName,E,I.useFog&&I.fog?"#define USE_FOG":"",I.useFog&&I.fogExp2?"#define FOG_EXP2":"",I.map?"#define USE_MAP":"",I.matcap?"#define USE_MATCAP":"",I.envMap?"#define USE_ENVMAP":"",I.envMap?"#define "+c:"",I.envMap?"#define "+P:"",I.envMap?"#define "+S:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",I.lightMap?"#define USE_LIGHTMAP":"",I.aoMap?"#define USE_AOMAP":"",I.bumpMap?"#define USE_BUMPMAP":"",I.normalMap?"#define USE_NORMALMAP":"",I.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",I.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",I.emissiveMap?"#define USE_EMISSIVEMAP":"",I.anisotropy?"#define USE_ANISOTROPY":"",I.anisotropyMap?"#define USE_ANISOTROPYMAP":"",I.clearcoat?"#define USE_CLEARCOAT":"",I.clearcoatMap?"#define USE_CLEARCOATMAP":"",I.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",I.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",I.iridescence?"#define USE_IRIDESCENCE":"",I.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",I.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",I.specularMap?"#define USE_SPECULARMAP":"",I.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",I.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",I.roughnessMap?"#define USE_ROUGHNESSMAP":"",I.metalnessMap?"#define USE_METALNESSMAP":"",I.alphaMap?"#define USE_ALPHAMAP":"",I.alphaTest?"#define USE_ALPHATEST":"",I.alphaHash?"#define USE_ALPHAHASH":"",I.sheen?"#define USE_SHEEN":"",I.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",I.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",I.transmission?"#define USE_TRANSMISSION":"",I.transmissionMap?"#define USE_TRANSMISSIONMAP":"",I.thicknessMap?"#define USE_THICKNESSMAP":"",I.vertexTangents&&!1===I.flatShading?"#define USE_TANGENT":"",I.vertexColors||I.instancingColor?"#define USE_COLOR":"",I.vertexAlphas?"#define USE_COLOR_ALPHA":"",I.vertexUv1s?"#define USE_UV1":"",I.vertexUv2s?"#define USE_UV2":"",I.vertexUv3s?"#define USE_UV3":"",I.pointsUvs?"#define USE_POINTS_UV":"",I.gradientMap?"#define USE_GRADIENTMAP":"",I.flatShading?"#define FLAT_SHADED":"",I.doubleSided?"#define DOUBLE_SIDED":"",I.flipSided?"#define FLIP_SIDED":"",I.shadowMapEnabled?"#define USE_SHADOWMAP":"",I.shadowMapEnabled?"#define "+N:"",I.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",I.useLegacyLights?"#define LEGACY_LIGHTS":"",I.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",I.logarithmicDepthBuffer&&I.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==I.toneMapping?"#define TONE_MAPPING":"",0!==I.toneMapping?wS.tonemapping_pars_fragment:"",0!==I.toneMapping?tB("toneMapping",I.toneMapping):"",I.dithering?"#define DITHERING":"",I.opaque?"#define OPAQUE":"",wS.colorspace_pars_fragment,KB("linearToOutputTexel",I.outputColorSpace),I.useDepthPacking?"#define DEPTH_PACKING "+I.depthPacking:"","\n"].filter(XB).join("\n")),k=dB(k),k=LB(k,I),k=OB(k,I),_=dB(_),_=LB(_,I),_=OB(_,I),k=jB(k),_=jB(_),I.isWebGL2&&!0!==I.isRawShaderMaterial&&(r="#version 300 es\n",Y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+Y,f=["#define varying in","300 es"===I.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===I.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+f);const K=r+Y+k,t=r+f+_,X=YB(q,q.VERTEX_SHADER,K),L=YB(q,q.FRAGMENT_SHADER,t);if(q.attachShader(u,X),q.attachShader(u,L),void 0!==I.index0AttributeName?q.bindAttribLocation(u,0,I.index0AttributeName):!0===I.morphTargets&&q.bindAttribLocation(u,0,"position"),q.linkProgram(u),W.debug.checkShaderErrors){const n=q.getProgramInfoLog(u).trim(),I=q.getShaderInfoLog(X).trim(),h=q.getShaderInfoLog(L).trim();let $=!0,k=!0;if(!1===q.getProgramParameter(u,q.LINK_STATUS))if($=!1,"function"==typeof W.debug.onShaderError)W.debug.onShaderError(q,u,X,L);else{const W=rB(q,X,"vertex"),I=rB(q,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+q.getError()+" - VALIDATE_STATUS "+q.getProgramParameter(u,q.VALIDATE_STATUS)+"\n\nProgram Info Log: "+n+"\n"+W+"\n"+I)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==I&&""!==h||(k=!1);k&&(this.diagnostics={runnable:$,programLog:n,vertexShader:{log:I,prefix:Y},fragmentShader:{log:h,prefix:f}})}let O,Z;return q.deleteShader(X),q.deleteShader(L),this.getUniforms=function(){return void 0===O&&(O=new uB(q,u)),O},this.getAttributes=function(){return void 0===Z&&(Z=function(W,n){const I={},h=W.getProgramParameter(n,W.ACTIVE_ATTRIBUTES);for(let q=0;q<h;q++){const h=W.getActiveAttrib(n,q),$=h.name;let k=1;h.type===W.FLOAT_MAT2&&(k=2),h.type===W.FLOAT_MAT3&&(k=3),h.type===W.FLOAT_MAT4&&(k=4),I[$]={type:h.type,location:W.getAttribLocation(n,$),locationSize:k}}return I}(q,u)),Z},this.destroy=function(){h.releaseStatesOfProgram(this),q.deleteProgram(u),this.program=void 0},this.type=I.shaderType,this.name=I.shaderName,this.id=fB++,this.cacheKey=n,this.usedTimes=1,this.program=u,this.vertexShader=X,this.fragmentShader=L,this}let FB=0;class wB{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(W){const n=W.vertexShader,I=W.fragmentShader,h=this._getShaderStage(n),q=this._getShaderStage(I),$=this._getShaderCacheForMaterial(W);return!1===$.has(h)&&($.add(h),h.usedTimes++),!1===$.has(q)&&($.add(q),q.usedTimes++),this}remove(W){const n=this.materialCache.get(W);for(const W of n)W.usedTimes--,0===W.usedTimes&&this.shaderCache.delete(W.code);return this.materialCache.delete(W),this}getVertexShaderID(W){return this._getShaderStage(W.vertexShader).id}getFragmentShaderID(W){return this._getShaderStage(W.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(W){const n=this.materialCache;let I=n.get(W);return void 0===I&&(I=new Set,n.set(W,I)),I}_getShaderStage(W){const n=this.shaderCache;let I=n.get(W);return void 0===I&&(I=new oB(W),n.set(W,I)),I}}class oB{constructor(W){this.id=FB++,this.code=W,this.usedTimes=0}}function DB(W,n,I,h,q,$,k){const _=new sc,N=new wB,c=[],P=q.isWebGL2,S=q.logarithmicDepthBuffer,g=q.vertexTextures;let B=q.precision;const E={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function u(W){return 0===W?"uv":`uv${W}`}return{getParameters:function($,_,c,Y,f){const r=Y.fog,K=f.geometry,t=$.isMeshStandardMaterial?Y.environment:null,X=($.isMeshStandardMaterial?I:n).get($.envMap||t),L=X&&306===X.mapping?X.image.height:null,O=E[$.type];null!==$.precision&&(B=q.getMaxPrecision($.precision),B!==$.precision&&console.warn("THREE.WebGLProgram.getParameters:",$.precision,"not supported, using",B,"instead."));const Z=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,d=void 0!==Z?Z.length:0;let m,R,e,j,z=0;if(void 0!==K.morphAttributes.position&&(z=1),void 0!==K.morphAttributes.normal&&(z=2),void 0!==K.morphAttributes.color&&(z=3),O){const W=DS[O];m=W.vertexShader,R=W.fragmentShader}else m=$.vertexShader,R=$.fragmentShader,N.update($),e=N.getVertexShaderID($),j=N.getFragmentShaderID($);const v=W.getRenderTarget(),V=!0===f.isInstancedMesh,F=!!$.map,w=!!$.matcap,o=!!X,D=!!$.aoMap,x=!!$.lightMap,G=!!$.bumpMap,y=!!$.normalMap,C=!!$.displacementMap,b=!!$.emissiveMap,l=!!$.metalnessMap,A=!!$.roughnessMap,p=$.anisotropy>0,i=$.clearcoat>0,U=$.iridescence>0,Q=$.sheen>0,T=$.transmission>0,H=p&&!!$.anisotropyMap,a=i&&!!$.clearcoatMap,J=i&&!!$.clearcoatNormalMap,s=i&&!!$.clearcoatRoughnessMap,M=U&&!!$.iridescenceMap,WW=U&&!!$.iridescenceThicknessMap,nW=Q&&!!$.sheenColorMap,IW=Q&&!!$.sheenRoughnessMap,hW=!!$.specularMap,qW=!!$.specularColorMap,$W=!!$.specularIntensityMap,kW=T&&!!$.transmissionMap,_W=T&&!!$.thicknessMap,NW=!!$.gradientMap,cW=!!$.alphaMap,PW=$.alphaTest>0,SW=!!$.alphaHash,gW=!!$.extensions,BW=!!K.attributes.uv1,EW=!!K.attributes.uv2,uW=!!K.attributes.uv3;let YW=0;return $.toneMapped&&(null!==v&&!0!==v.isXRRenderTarget||(YW=W.toneMapping)),{isWebGL2:P,shaderID:O,shaderType:$.type,shaderName:$.name,vertexShader:m,fragmentShader:R,defines:$.defines,customVertexShaderID:e,customFragmentShaderID:j,isRawShaderMaterial:!0===$.isRawShaderMaterial,glslVersion:$.glslVersion,precision:B,instancing:V,instancingColor:V&&null!==f.instanceColor,supportsVertexTextures:g,outputColorSpace:null===v?W.outputColorSpace:!0===v.isXRRenderTarget?v.texture.colorSpace:"srgb-linear",map:F,matcap:w,envMap:o,envMapMode:o&&X.mapping,envMapCubeUVHeight:L,aoMap:D,lightMap:x,bumpMap:G,normalMap:y,displacementMap:g&&C,emissiveMap:b,normalMapObjectSpace:y&&1===$.normalMapType,normalMapTangentSpace:y&&0===$.normalMapType,metalnessMap:l,roughnessMap:A,anisotropy:p,anisotropyMap:H,clearcoat:i,clearcoatMap:a,clearcoatNormalMap:J,clearcoatRoughnessMap:s,iridescence:U,iridescenceMap:M,iridescenceThicknessMap:WW,sheen:Q,sheenColorMap:nW,sheenRoughnessMap:IW,specularMap:hW,specularColorMap:qW,specularIntensityMap:$W,transmission:T,transmissionMap:kW,thicknessMap:_W,gradientMap:NW,opaque:!1===$.transparent&&1===$.blending,alphaMap:cW,alphaTest:PW,alphaHash:SW,combine:$.combine,mapUv:F&&u($.map.channel),aoMapUv:D&&u($.aoMap.channel),lightMapUv:x&&u($.lightMap.channel),bumpMapUv:G&&u($.bumpMap.channel),normalMapUv:y&&u($.normalMap.channel),displacementMapUv:C&&u($.displacementMap.channel),emissiveMapUv:b&&u($.emissiveMap.channel),metalnessMapUv:l&&u($.metalnessMap.channel),roughnessMapUv:A&&u($.roughnessMap.channel),anisotropyMapUv:H&&u($.anisotropyMap.channel),clearcoatMapUv:a&&u($.clearcoatMap.channel),clearcoatNormalMapUv:J&&u($.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:s&&u($.clearcoatRoughnessMap.channel),iridescenceMapUv:M&&u($.iridescenceMap.channel),iridescenceThicknessMapUv:WW&&u($.iridescenceThicknessMap.channel),sheenColorMapUv:nW&&u($.sheenColorMap.channel),sheenRoughnessMapUv:IW&&u($.sheenRoughnessMap.channel),specularMapUv:hW&&u($.specularMap.channel),specularColorMapUv:qW&&u($.specularColorMap.channel),specularIntensityMapUv:$W&&u($.specularIntensityMap.channel),transmissionMapUv:kW&&u($.transmissionMap.channel),thicknessMapUv:_W&&u($.thicknessMap.channel),alphaMapUv:cW&&u($.alphaMap.channel),vertexTangents:!!K.attributes.tangent&&(y||p),vertexColors:$.vertexColors,vertexAlphas:!0===$.vertexColors&&!!K.attributes.color&&4===K.attributes.color.itemSize,vertexUv1s:BW,vertexUv2s:EW,vertexUv3s:uW,pointsUvs:!0===f.isPoints&&!!K.attributes.uv&&(F||cW),fog:!!r,useFog:!0===$.fog,fogExp2:r&&r.isFogExp2,flatShading:!0===$.flatShading,sizeAttenuation:!0===$.sizeAttenuation,logarithmicDepthBuffer:S,skinning:!0===f.isSkinnedMesh,morphTargets:void 0!==K.morphAttributes.position,morphNormals:void 0!==K.morphAttributes.normal,morphColors:void 0!==K.morphAttributes.color,morphTargetsCount:d,morphTextureStride:z,numDirLights:_.directional.length,numPointLights:_.point.length,numSpotLights:_.spot.length,numSpotLightMaps:_.spotLightMap.length,numRectAreaLights:_.rectArea.length,numHemiLights:_.hemi.length,numDirLightShadows:_.directionalShadowMap.length,numPointLightShadows:_.pointShadowMap.length,numSpotLightShadows:_.spotShadowMap.length,numSpotLightShadowsWithMaps:_.numSpotLightShadowsWithMaps,numClippingPlanes:k.numPlanes,numClipIntersection:k.numIntersection,dithering:$.dithering,shadowMapEnabled:W.shadowMap.enabled&&c.length>0,shadowMapType:W.shadowMap.type,toneMapping:YW,useLegacyLights:W._useLegacyLights,premultipliedAlpha:$.premultipliedAlpha,doubleSided:2===$.side,flipSided:1===$.side,useDepthPacking:$.depthPacking>=0,depthPacking:$.depthPacking||0,index0AttributeName:$.index0AttributeName,extensionDerivatives:gW&&!0===$.extensions.derivatives,extensionFragDepth:gW&&!0===$.extensions.fragDepth,extensionDrawBuffers:gW&&!0===$.extensions.drawBuffers,extensionShaderTextureLOD:gW&&!0===$.extensions.shaderTextureLOD,rendererExtensionFragDepth:P||h.has("EXT_frag_depth"),rendererExtensionDrawBuffers:P||h.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:P||h.has("EXT_shader_texture_lod"),customProgramCacheKey:$.customProgramCacheKey()}},getProgramCacheKey:function(n){const I=[];if(n.shaderID?I.push(n.shaderID):(I.push(n.customVertexShaderID),I.push(n.customFragmentShaderID)),void 0!==n.defines)for(const W in n.defines)I.push(W),I.push(n.defines[W]);return!1===n.isRawShaderMaterial&&(function(W,n){W.push(n.precision),W.push(n.outputColorSpace),W.push(n.envMapMode),W.push(n.envMapCubeUVHeight),W.push(n.mapUv),W.push(n.alphaMapUv),W.push(n.lightMapUv),W.push(n.aoMapUv),W.push(n.bumpMapUv),W.push(n.normalMapUv),W.push(n.displacementMapUv),W.push(n.emissiveMapUv),W.push(n.metalnessMapUv),W.push(n.roughnessMapUv),W.push(n.anisotropyMapUv),W.push(n.clearcoatMapUv),W.push(n.clearcoatNormalMapUv),W.push(n.clearcoatRoughnessMapUv),W.push(n.iridescenceMapUv),W.push(n.iridescenceThicknessMapUv),W.push(n.sheenColorMapUv),W.push(n.sheenRoughnessMapUv),W.push(n.specularMapUv),W.push(n.specularColorMapUv),W.push(n.specularIntensityMapUv),W.push(n.transmissionMapUv),W.push(n.thicknessMapUv),W.push(n.combine),W.push(n.fogExp2),W.push(n.sizeAttenuation),W.push(n.morphTargetsCount),W.push(n.morphAttributeCount),W.push(n.numDirLights),W.push(n.numPointLights),W.push(n.numSpotLights),W.push(n.numSpotLightMaps),W.push(n.numHemiLights),W.push(n.numRectAreaLights),W.push(n.numDirLightShadows),W.push(n.numPointLightShadows),W.push(n.numSpotLightShadows),W.push(n.numSpotLightShadowsWithMaps),W.push(n.shadowMapType),W.push(n.toneMapping),W.push(n.numClippingPlanes),W.push(n.numClipIntersection),W.push(n.depthPacking)}(I,n),function(W,n){_.disableAll(),n.isWebGL2&&_.enable(0),n.supportsVertexTextures&&_.enable(1),n.instancing&&_.enable(2),n.instancingColor&&_.enable(3),n.matcap&&_.enable(4),n.envMap&&_.enable(5),n.normalMapObjectSpace&&_.enable(6),n.normalMapTangentSpace&&_.enable(7),n.clearcoat&&_.enable(8),n.iridescence&&_.enable(9),n.alphaTest&&_.enable(10),n.vertexColors&&_.enable(11),n.vertexAlphas&&_.enable(12),n.vertexUv1s&&_.enable(13),n.vertexUv2s&&_.enable(14),n.vertexUv3s&&_.enable(15),n.vertexTangents&&_.enable(16),n.anisotropy&&_.enable(17),W.push(_.mask),_.disableAll(),n.fog&&_.enable(0),n.useFog&&_.enable(1),n.flatShading&&_.enable(2),n.logarithmicDepthBuffer&&_.enable(3),n.skinning&&_.enable(4),n.morphTargets&&_.enable(5),n.morphNormals&&_.enable(6),n.morphColors&&_.enable(7),n.premultipliedAlpha&&_.enable(8),n.shadowMapEnabled&&_.enable(9),n.useLegacyLights&&_.enable(10),n.doubleSided&&_.enable(11),n.flipSided&&_.enable(12),n.useDepthPacking&&_.enable(13),n.dithering&&_.enable(14),n.transmission&&_.enable(15),n.sheen&&_.enable(16),n.opaque&&_.enable(17),n.pointsUvs&&_.enable(18),W.push(_.mask)}(I,n),I.push(W.outputColorSpace)),I.push(n.customProgramCacheKey),I.join()},getUniforms:function(W){const n=E[W.type];let I;if(n){const W=DS[n];I=fS.clone(W.uniforms)}else I=W.uniforms;return I},acquireProgram:function(n,I){let h;for(let W=0,n=c.length;W<n;W++){const n=c[W];if(n.cacheKey===I){h=n,++h.usedTimes;break}}return void 0===h&&(h=new VB(W,I,n,$),c.push(h)),h},releaseProgram:function(W){if(0==--W.usedTimes){const n=c.indexOf(W);c[n]=c[c.length-1],c.pop(),W.destroy()}},releaseShaderCache:function(W){N.remove(W)},programs:c,dispose:function(){N.dispose()}}}function xB(){let W=new WeakMap;return{get:function(n){let I=W.get(n);return void 0===I&&(I={},W.set(n,I)),I},remove:function(n){W.delete(n)},update:function(n,I,h){W.get(n)[I]=h},dispose:function(){W=new WeakMap}}}function GB(W,n){return W.groupOrder!==n.groupOrder?W.groupOrder-n.groupOrder:W.renderOrder!==n.renderOrder?W.renderOrder-n.renderOrder:W.material.id!==n.material.id?W.material.id-n.material.id:W.z!==n.z?W.z-n.z:W.id-n.id}function yB(W,n){return W.groupOrder!==n.groupOrder?W.groupOrder-n.groupOrder:W.renderOrder!==n.renderOrder?W.renderOrder-n.renderOrder:W.z!==n.z?n.z-W.z:W.id-n.id}function CB(){const W=[];let n=0;const I=[],h=[],q=[];function $(I,h,q,$,k,_){let N=W[n];return void 0===N?(N={id:I.id,object:I,geometry:h,material:q,groupOrder:$,renderOrder:I.renderOrder,z:k,group:_},W[n]=N):(N.id=I.id,N.object=I,N.geometry=h,N.material=q,N.groupOrder=$,N.renderOrder=I.renderOrder,N.z=k,N.group=_),n++,N}return{opaque:I,transmissive:h,transparent:q,init:function(){n=0,I.length=0,h.length=0,q.length=0},push:function(W,n,k,_,N,c){const P=$(W,n,k,_,N,c);k.transmission>0?h.push(P):!0===k.transparent?q.push(P):I.push(P)},unshift:function(W,n,k,_,N,c){const P=$(W,n,k,_,N,c);k.transmission>0?h.unshift(P):!0===k.transparent?q.unshift(P):I.unshift(P)},finish:function(){for(let I=n,h=W.length;I<h;I++){const n=W[I];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.group=null}},sort:function(W,n){I.length>1&&I.sort(W||GB),h.length>1&&h.sort(n||yB),q.length>1&&q.sort(n||yB)}}}function bB(){let W=new WeakMap;return{get:function(n,I){const h=W.get(n);let q;return void 0===h?(q=new CB,W.set(n,[q])):I>=h.length?(q=new CB,h.push(q)):q=h[I],q},dispose:function(){W=new WeakMap}}}function lB(){const W={};return{get:function(n){if(void 0!==W[n.id])return W[n.id];let I;switch(n.type){case"DirectionalLight":I={direction:new gc,color:new vP};break;case"SpotLight":I={position:new gc,direction:new gc,color:new vP,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":I={position:new gc,color:new vP,distance:0,decay:0};break;case"HemisphereLight":I={direction:new gc,skyColor:new vP,groundColor:new vP};break;case"RectAreaLight":I={color:new vP,position:new gc,halfWidth:new gc,halfHeight:new gc}}return W[n.id]=I,I}}}let AB=0;function pB(W,n){return(n.castShadow?2:0)-(W.castShadow?2:0)+(n.map?1:0)-(W.map?1:0)}function iB(W,n){const I=new lB,h=function(){const W={};return{get:function(n){if(void 0!==W[n.id])return W[n.id];let I;switch(n.type){case"DirectionalLight":case"SpotLight":I={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new CN};break;case"PointLight":I={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new CN,shadowCameraNear:1,shadowCameraFar:1e3}}return W[n.id]=I,I}}}(),q={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let W=0;W<9;W++)q.probe.push(new gc);const $=new gc,k=new bc,_=new bc;return{setup:function($,k){let _=0,N=0,c=0;for(let W=0;W<9;W++)q.probe[W].set(0,0,0);let P=0,S=0,g=0,B=0,E=0,u=0,Y=0,f=0,r=0,K=0;$.sort(pB);const t=!0===k?Math.PI:1;for(let W=0,n=$.length;W<n;W++){const n=$[W],k=n.color,X=n.intensity,L=n.distance,O=n.shadow&&n.shadow.map?n.shadow.map.texture:null;if(n.isAmbientLight)_+=k.r*X*t,N+=k.g*X*t,c+=k.b*X*t;else if(n.isLightProbe)for(let W=0;W<9;W++)q.probe[W].addScaledVector(n.sh.coefficients[W],X);else if(n.isDirectionalLight){const W=I.get(n);if(W.color.copy(n.color).multiplyScalar(n.intensity*t),n.castShadow){const W=n.shadow,I=h.get(n);I.shadowBias=W.bias,I.shadowNormalBias=W.normalBias,I.shadowRadius=W.radius,I.shadowMapSize=W.mapSize,q.directionalShadow[P]=I,q.directionalShadowMap[P]=O,q.directionalShadowMatrix[P]=n.shadow.matrix,u++}q.directional[P]=W,P++}else if(n.isSpotLight){const W=I.get(n);W.position.setFromMatrixPosition(n.matrixWorld),W.color.copy(k).multiplyScalar(X*t),W.distance=L,W.coneCos=Math.cos(n.angle),W.penumbraCos=Math.cos(n.angle*(1-n.penumbra)),W.decay=n.decay,q.spot[g]=W;const $=n.shadow;if(n.map&&(q.spotLightMap[r]=n.map,r++,$.updateMatrices(n),n.castShadow&&K++),q.spotLightMatrix[g]=$.matrix,n.castShadow){const W=h.get(n);W.shadowBias=$.bias,W.shadowNormalBias=$.normalBias,W.shadowRadius=$.radius,W.shadowMapSize=$.mapSize,q.spotShadow[g]=W,q.spotShadowMap[g]=O,f++}g++}else if(n.isRectAreaLight){const W=I.get(n);W.color.copy(k).multiplyScalar(X),W.halfWidth.set(.5*n.width,0,0),W.halfHeight.set(0,.5*n.height,0),q.rectArea[B]=W,B++}else if(n.isPointLight){const W=I.get(n);if(W.color.copy(n.color).multiplyScalar(n.intensity*t),W.distance=n.distance,W.decay=n.decay,n.castShadow){const W=n.shadow,I=h.get(n);I.shadowBias=W.bias,I.shadowNormalBias=W.normalBias,I.shadowRadius=W.radius,I.shadowMapSize=W.mapSize,I.shadowCameraNear=W.camera.near,I.shadowCameraFar=W.camera.far,q.pointShadow[S]=I,q.pointShadowMap[S]=O,q.pointShadowMatrix[S]=n.shadow.matrix,Y++}q.point[S]=W,S++}else if(n.isHemisphereLight){const W=I.get(n);W.skyColor.copy(n.color).multiplyScalar(X*t),W.groundColor.copy(n.groundColor).multiplyScalar(X*t),q.hemi[E]=W,E++}}B>0&&(n.isWebGL2||!0===W.has("OES_texture_float_linear")?(q.rectAreaLTC1=oS.LTC_FLOAT_1,q.rectAreaLTC2=oS.LTC_FLOAT_2):!0===W.has("OES_texture_half_float_linear")?(q.rectAreaLTC1=oS.LTC_HALF_1,q.rectAreaLTC2=oS.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),q.ambient[0]=_,q.ambient[1]=N,q.ambient[2]=c;const X=q.hash;X.directionalLength===P&&X.pointLength===S&&X.spotLength===g&&X.rectAreaLength===B&&X.hemiLength===E&&X.numDirectionalShadows===u&&X.numPointShadows===Y&&X.numSpotShadows===f&&X.numSpotMaps===r||(q.directional.length=P,q.spot.length=g,q.rectArea.length=B,q.point.length=S,q.hemi.length=E,q.directionalShadow.length=u,q.directionalShadowMap.length=u,q.pointShadow.length=Y,q.pointShadowMap.length=Y,q.spotShadow.length=f,q.spotShadowMap.length=f,q.directionalShadowMatrix.length=u,q.pointShadowMatrix.length=Y,q.spotLightMatrix.length=f+r-K,q.spotLightMap.length=r,q.numSpotLightShadowsWithMaps=K,X.directionalLength=P,X.pointLength=S,X.spotLength=g,X.rectAreaLength=B,X.hemiLength=E,X.numDirectionalShadows=u,X.numPointShadows=Y,X.numSpotShadows=f,X.numSpotMaps=r,q.version=AB++)},setupView:function(W,n){let I=0,h=0,N=0,c=0,P=0;const S=n.matrixWorldInverse;for(let n=0,g=W.length;n<g;n++){const g=W[n];if(g.isDirectionalLight){const W=q.directional[I];W.direction.setFromMatrixPosition(g.matrixWorld),$.setFromMatrixPosition(g.target.matrixWorld),W.direction.sub($),W.direction.transformDirection(S),I++}else if(g.isSpotLight){const W=q.spot[N];W.position.setFromMatrixPosition(g.matrixWorld),W.position.applyMatrix4(S),W.direction.setFromMatrixPosition(g.matrixWorld),$.setFromMatrixPosition(g.target.matrixWorld),W.direction.sub($),W.direction.transformDirection(S),N++}else if(g.isRectAreaLight){const W=q.rectArea[c];W.position.setFromMatrixPosition(g.matrixWorld),W.position.applyMatrix4(S),_.identity(),k.copy(g.matrixWorld),k.premultiply(S),_.extractRotation(k),W.halfWidth.set(.5*g.width,0,0),W.halfHeight.set(0,.5*g.height,0),W.halfWidth.applyMatrix4(_),W.halfHeight.applyMatrix4(_),c++}else if(g.isPointLight){const W=q.point[h];W.position.setFromMatrixPosition(g.matrixWorld),W.position.applyMatrix4(S),h++}else if(g.isHemisphereLight){const W=q.hemi[P];W.direction.setFromMatrixPosition(g.matrixWorld),W.direction.transformDirection(S),P++}}},state:q}}function UB(W,n){const I=new iB(W,n),h=[],q=[];return{init:function(){h.length=0,q.length=0},state:{lightsArray:h,shadowsArray:q,lights:I},setupLights:function(W){I.setup(h,W)},setupLightsView:function(W){I.setupView(h,W)},pushLight:function(W){h.push(W)},pushShadow:function(W){q.push(W)}}}function QB(W,n){let I=new WeakMap;return{get:function(h,q=0){const $=I.get(h);let k;return void 0===$?(k=new UB(W,n),I.set(h,[k])):q>=$.length?(k=new UB(W,n),$.push(k)):k=$[q],k},dispose:function(){I=new WeakMap}}}class TB extends mP{constructor(W){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(W)}copy(W){return super.copy(W),this.depthPacking=W.depthPacking,this.map=W.map,this.alphaMap=W.alphaMap,this.displacementMap=W.displacementMap,this.displacementScale=W.displacementScale,this.displacementBias=W.displacementBias,this.wireframe=W.wireframe,this.wireframeLinewidth=W.wireframeLinewidth,this}}class HB extends mP{constructor(W){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(W)}copy(W){return super.copy(W),this.map=W.map,this.alphaMap=W.alphaMap,this.displacementMap=W.displacementMap,this.displacementScale=W.displacementScale,this.displacementBias=W.displacementBias,this}}function aB(W,n,I){let h=new zS;const q=new CN,$=new CN,k=new _c,_=new TB({depthPacking:3201}),N=new HB,c={},P=I.maxTextureSize,S={[U_]:1,[Q_]:0,[T_]:2},g=new rS({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new CN},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),B=g.clone();B.defines.HORIZONTAL_PASS=1;const E=new QP;E.setAttribute("position",new DP(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const u=new SS(E,g),Y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let f=this.type;function r(I,h){const $=n.update(u);g.defines.VSM_SAMPLES!==I.blurSamples&&(g.defines.VSM_SAMPLES=I.blurSamples,B.defines.VSM_SAMPLES=I.blurSamples,g.needsUpdate=!0,B.needsUpdate=!0),null===I.mapPass&&(I.mapPass=new cc(q.x,q.y)),g.uniforms.shadow_pass.value=I.map.texture,g.uniforms.resolution.value=I.mapSize,g.uniforms.radius.value=I.radius,W.setRenderTarget(I.mapPass),W.clear(),W.renderBufferDirect(h,null,$,g,u,null),B.uniforms.shadow_pass.value=I.mapPass.texture,B.uniforms.resolution.value=I.mapSize,B.uniforms.radius.value=I.radius,W.setRenderTarget(I.map),W.clear(),W.renderBufferDirect(h,null,$,B,u,null)}function K(n,I,h,q){let $=null;const k=!0===h.isPointLight?n.customDistanceMaterial:n.customDepthMaterial;if(void 0!==k)$=k;else if($=!0===h.isPointLight?N:_,W.localClippingEnabled&&!0===I.clipShadows&&Array.isArray(I.clippingPlanes)&&0!==I.clippingPlanes.length||I.displacementMap&&0!==I.displacementScale||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0){const W=$.uuid,n=I.uuid;let h=c[W];void 0===h&&(h={},c[W]=h);let q=h[n];void 0===q&&(q=$.clone(),h[n]=q),$=q}return $.visible=I.visible,$.wireframe=I.wireframe,$.side=3===q?null!==I.shadowSide?I.shadowSide:I.side:null!==I.shadowSide?I.shadowSide:S[I.side],$.alphaMap=I.alphaMap,$.alphaTest=I.alphaTest,$.map=I.map,$.clipShadows=I.clipShadows,$.clippingPlanes=I.clippingPlanes,$.clipIntersection=I.clipIntersection,$.displacementMap=I.displacementMap,$.displacementScale=I.displacementScale,$.displacementBias=I.displacementBias,$.wireframeLinewidth=I.wireframeLinewidth,$.linewidth=I.linewidth,!0===h.isPointLight&&!0===$.isMeshDistanceMaterial&&(W.properties.get($).light=h),$}function t(I,q,$,k,_){if(!1===I.visible)return;if(I.layers.test(q.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&3===_)&&(!I.frustumCulled||h.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices($.matrixWorldInverse,I.matrixWorld);const h=n.update(I),q=I.material;if(Array.isArray(q)){const n=h.groups;for(let N=0,c=n.length;N<c;N++){const c=n[N],P=q[c.materialIndex];if(P&&P.visible){const n=K(I,P,k,_);W.renderBufferDirect($,null,h,n,I,c)}}}else if(q.visible){const n=K(I,q,k,_);W.renderBufferDirect($,null,h,n,I,null)}}const N=I.children;for(let W=0,n=N.length;W<n;W++)t(N[W],q,$,k,_)}this.render=function(n,I,_){if(!1===Y.enabled)return;if(!1===Y.autoUpdate&&!1===Y.needsUpdate)return;if(0===n.length)return;const N=W.getRenderTarget(),c=W.getActiveCubeFace(),S=W.getActiveMipmapLevel(),g=W.state;g.setBlending(0),g.buffers.color.setClear(1,1,1,1),g.buffers.depth.setTest(!0),g.setScissorTest(!1);const B=3!==f&&3===this.type,E=3===f&&3!==this.type;for(let N=0,c=n.length;N<c;N++){const c=n[N],S=c.shadow;if(void 0===S){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===S.autoUpdate&&!1===S.needsUpdate)continue;q.copy(S.mapSize);const u=S.getFrameExtents();if(q.multiply(u),$.copy(S.mapSize),(q.x>P||q.y>P)&&(q.x>P&&($.x=Math.floor(P/u.x),q.x=$.x*u.x,S.mapSize.x=$.x),q.y>P&&($.y=Math.floor(P/u.y),q.y=$.y*u.y,S.mapSize.y=$.y)),null===S.map||!0===B||!0===E){const W=3!==this.type?{minFilter:1003,magFilter:1003}:{};null!==S.map&&S.map.dispose(),S.map=new cc(q.x,q.y,W),S.map.texture.name=c.name+".shadowMap",S.camera.updateProjectionMatrix()}W.setRenderTarget(S.map),W.clear();const Y=S.getViewportCount();for(let W=0;W<Y;W++){const n=S.getViewport(W);k.set($.x*n.x,$.y*n.y,$.x*n.z,$.y*n.w),g.viewport(k),S.updateMatrices(c,W),h=S.getFrustum(),t(I,_,S.camera,c,this.type)}!0!==S.isPointLightShadow&&3===this.type&&r(S,_),S.needsUpdate=!1}f=this.type,Y.needsUpdate=!1,W.setRenderTarget(N,c,S)}}function JB(W,n,I){const h=I.isWebGL2,q=new function(){let n=!1;const I=new _c;let h=null;const q=new _c(0,0,0,0);return{setMask:function(I){h===I||n||(W.colorMask(I,I,I,I),h=I)},setLocked:function(W){n=W},setClear:function(n,h,$,k,_){!0===_&&(n*=k,h*=k,$*=k),I.set(n,h,$,k),!1===q.equals(I)&&(W.clearColor(n,h,$,k),q.copy(I))},reset:function(){n=!1,h=null,q.set(-1,0,0,0)}}},$=new function(){let n=!1,I=null,h=null,q=null;return{setTest:function(n){n?C(W.DEPTH_TEST):b(W.DEPTH_TEST)},setMask:function(h){I===h||n||(W.depthMask(h),I=h)},setFunc:function(n){if(h!==n){switch(n){case 0:W.depthFunc(W.NEVER);break;case 1:W.depthFunc(W.ALWAYS);break;case 2:W.depthFunc(W.LESS);break;case 3:default:W.depthFunc(W.LEQUAL);break;case 4:W.depthFunc(W.EQUAL);break;case 5:W.depthFunc(W.GEQUAL);break;case 6:W.depthFunc(W.GREATER);break;case 7:W.depthFunc(W.NOTEQUAL)}h=n}},setLocked:function(W){n=W},setClear:function(n){q!==n&&(W.clearDepth(n),q=n)},reset:function(){n=!1,I=null,h=null,q=null}}},k=new function(){let n=!1,I=null,h=null,q=null,$=null,k=null,_=null,N=null,c=null;return{setTest:function(I){n||(I?C(W.STENCIL_TEST):b(W.STENCIL_TEST))},setMask:function(h){I===h||n||(W.stencilMask(h),I=h)},setFunc:function(n,I,k){h===n&&q===I&&$===k||(W.stencilFunc(n,I,k),h=n,q=I,$=k)},setOp:function(n,I,h){k===n&&_===I&&N===h||(W.stencilOp(n,I,h),k=n,_=I,N=h)},setLocked:function(W){n=W},setClear:function(n){c!==n&&(W.clearStencil(n),c=n)},reset:function(){n=!1,I=null,h=null,q=null,$=null,k=null,_=null,N=null,c=null}}},_=new WeakMap,N=new WeakMap;let c={},P={},S=new WeakMap,g=[],B=null,E=!1,u=null,Y=null,f=null,r=null,K=null,t=null,X=null,L=!1,O=null,Z=null,d=null,m=null,R=null;const e=W.getParameter(W.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let j=!1,z=0;const v=W.getParameter(W.VERSION);-1!==v.indexOf("WebGL")?(z=parseFloat(/^WebGL (\d)/.exec(v)[1]),j=z>=1):-1!==v.indexOf("OpenGL ES")&&(z=parseFloat(/^OpenGL ES (\d)/.exec(v)[1]),j=z>=2);let V=null,F={};const w=W.getParameter(W.SCISSOR_BOX),o=W.getParameter(W.VIEWPORT),D=(new _c).fromArray(w),x=(new _c).fromArray(o);function G(n,I,q,$){const k=new Uint8Array(4),_=W.createTexture();W.bindTexture(n,_),W.texParameteri(n,W.TEXTURE_MIN_FILTER,W.NEAREST),W.texParameteri(n,W.TEXTURE_MAG_FILTER,W.NEAREST);for(let _=0;_<q;_++)!h||n!==W.TEXTURE_3D&&n!==W.TEXTURE_2D_ARRAY?W.texImage2D(I+_,0,W.RGBA,1,1,0,W.RGBA,W.UNSIGNED_BYTE,k):W.texImage3D(I,0,W.RGBA,1,1,$,0,W.RGBA,W.UNSIGNED_BYTE,k);return _}const y={};function C(n){!0!==c[n]&&(W.enable(n),c[n]=!0)}function b(n){!1!==c[n]&&(W.disable(n),c[n]=!1)}y[W.TEXTURE_2D]=G(W.TEXTURE_2D,W.TEXTURE_2D,1),y[W.TEXTURE_CUBE_MAP]=G(W.TEXTURE_CUBE_MAP,W.TEXTURE_CUBE_MAP_POSITIVE_X,6),h&&(y[W.TEXTURE_2D_ARRAY]=G(W.TEXTURE_2D_ARRAY,W.TEXTURE_2D_ARRAY,1,1),y[W.TEXTURE_3D]=G(W.TEXTURE_3D,W.TEXTURE_3D,1,1)),q.setClear(0,0,0,1),$.setClear(1),k.setClear(0),C(W.DEPTH_TEST),$.setFunc(3),i(!1),U(1),C(W.CULL_FACE),p(0);const l={[H_]:W.FUNC_ADD,[a_]:W.FUNC_SUBTRACT,[J_]:W.FUNC_REVERSE_SUBTRACT};if(h)l[103]=W.MIN,l[104]=W.MAX;else{const W=n.get("EXT_blend_minmax");null!==W&&(l[103]=W.MIN_EXT,l[104]=W.MAX_EXT)}const A={[s_]:W.ZERO,[M_]:W.ONE,[WN]:W.SRC_COLOR,[IN]:W.SRC_ALPHA,[NN]:W.SRC_ALPHA_SATURATE,[kN]:W.DST_COLOR,[qN]:W.DST_ALPHA,[nN]:W.ONE_MINUS_SRC_COLOR,[hN]:W.ONE_MINUS_SRC_ALPHA,[_N]:W.ONE_MINUS_DST_COLOR,[$N]:W.ONE_MINUS_DST_ALPHA};function p(n,I,h,q,$,k,_,N){if(0!==n){if(!1===E&&(C(W.BLEND),E=!0),5===n)$=$||I,k=k||h,_=_||q,I===Y&&$===K||(W.blendEquationSeparate(l[I],l[$]),Y=I,K=$),h===f&&q===r&&k===t&&_===X||(W.blendFuncSeparate(A[h],A[q],A[k],A[_]),f=h,r=q,t=k,X=_),u=n,L=!1;else if(n!==u||N!==L){if(100===Y&&100===K||(W.blendEquation(W.FUNC_ADD),Y=100,K=100),N)switch(n){case 1:W.blendFuncSeparate(W.ONE,W.ONE_MINUS_SRC_ALPHA,W.ONE,W.ONE_MINUS_SRC_ALPHA);break;case 2:W.blendFunc(W.ONE,W.ONE);break;case 3:W.blendFuncSeparate(W.ZERO,W.ONE_MINUS_SRC_COLOR,W.ZERO,W.ONE);break;case 4:W.blendFuncSeparate(W.ZERO,W.SRC_COLOR,W.ZERO,W.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",n)}else switch(n){case 1:W.blendFuncSeparate(W.SRC_ALPHA,W.ONE_MINUS_SRC_ALPHA,W.ONE,W.ONE_MINUS_SRC_ALPHA);break;case 2:W.blendFunc(W.SRC_ALPHA,W.ONE);break;case 3:W.blendFuncSeparate(W.ZERO,W.ONE_MINUS_SRC_COLOR,W.ZERO,W.ONE);break;case 4:W.blendFunc(W.ZERO,W.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",n)}f=null,r=null,t=null,X=null,u=n,L=N}}else!0===E&&(b(W.BLEND),E=!1)}function i(n){O!==n&&(n?W.frontFace(W.CW):W.frontFace(W.CCW),O=n)}function U(n){0!==n?(C(W.CULL_FACE),n!==Z&&(1===n?W.cullFace(W.BACK):2===n?W.cullFace(W.FRONT):W.cullFace(W.FRONT_AND_BACK))):b(W.CULL_FACE),Z=n}function Q(n,I,h){n?(C(W.POLYGON_OFFSET_FILL),m===I&&R===h||(W.polygonOffset(I,h),m=I,R=h)):b(W.POLYGON_OFFSET_FILL)}return{buffers:{color:q,depth:$,stencil:k},enable:C,disable:b,bindFramebuffer:function(n,I){return P[n]!==I&&(W.bindFramebuffer(n,I),P[n]=I,h&&(n===W.DRAW_FRAMEBUFFER&&(P[W.FRAMEBUFFER]=I),n===W.FRAMEBUFFER&&(P[W.DRAW_FRAMEBUFFER]=I)),!0)},drawBuffers:function(h,q){let $=g,k=!1;if(h)if($=S.get(q),void 0===$&&($=[],S.set(q,$)),h.isWebGLMultipleRenderTargets){const n=h.texture;if($.length!==n.length||$[0]!==W.COLOR_ATTACHMENT0){for(let I=0,h=n.length;I<h;I++)$[I]=W.COLOR_ATTACHMENT0+I;$.length=n.length,k=!0}}else $[0]!==W.COLOR_ATTACHMENT0&&($[0]=W.COLOR_ATTACHMENT0,k=!0);else $[0]!==W.BACK&&($[0]=W.BACK,k=!0);k&&(I.isWebGL2?W.drawBuffers($):n.get("WEBGL_draw_buffers").drawBuffersWEBGL($))},useProgram:function(n){return B!==n&&(W.useProgram(n),B=n,!0)},setBlending:p,setMaterial:function(n,I){2===n.side?b(W.CULL_FACE):C(W.CULL_FACE);let h=1===n.side;I&&(h=!h),i(h),1===n.blending&&!1===n.transparent?p(0):p(n.blending,n.blendEquation,n.blendSrc,n.blendDst,n.blendEquationAlpha,n.blendSrcAlpha,n.blendDstAlpha,n.premultipliedAlpha),$.setFunc(n.depthFunc),$.setTest(n.depthTest),$.setMask(n.depthWrite),q.setMask(n.colorWrite);const _=n.stencilWrite;k.setTest(_),_&&(k.setMask(n.stencilWriteMask),k.setFunc(n.stencilFunc,n.stencilRef,n.stencilFuncMask),k.setOp(n.stencilFail,n.stencilZFail,n.stencilZPass)),Q(n.polygonOffset,n.polygonOffsetFactor,n.polygonOffsetUnits),!0===n.alphaToCoverage?C(W.SAMPLE_ALPHA_TO_COVERAGE):b(W.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:i,setCullFace:U,setLineWidth:function(n){n!==d&&(j&&W.lineWidth(n),d=n)},setPolygonOffset:Q,setScissorTest:function(n){n?C(W.SCISSOR_TEST):b(W.SCISSOR_TEST)},activeTexture:function(n){void 0===n&&(n=W.TEXTURE0+e-1),V!==n&&(W.activeTexture(n),V=n)},bindTexture:function(n,I,h){void 0===h&&(h=null===V?W.TEXTURE0+e-1:V);let q=F[h];void 0===q&&(q={type:void 0,texture:void 0},F[h]=q),q.type===n&&q.texture===I||(V!==h&&(W.activeTexture(h),V=h),W.bindTexture(n,I||y[n]),q.type=n,q.texture=I)},unbindTexture:function(){const n=F[V];void 0!==n&&void 0!==n.type&&(W.bindTexture(n.type,null),n.type=void 0,n.texture=void 0)},compressedTexImage2D:function(){try{W.compressedTexImage2D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},compressedTexImage3D:function(){try{W.compressedTexImage3D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},texImage2D:function(){try{W.texImage2D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},texImage3D:function(){try{W.texImage3D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},updateUBOMapping:function(n,I){let h=N.get(I);void 0===h&&(h=new WeakMap,N.set(I,h));let q=h.get(n);void 0===q&&(q=W.getUniformBlockIndex(I,n.name),h.set(n,q))},uniformBlockBinding:function(n,I){const h=N.get(I).get(n);_.get(I)!==h&&(W.uniformBlockBinding(I,h,n.__bindingPointIndex),_.set(I,h))},texStorage2D:function(){try{W.texStorage2D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},texStorage3D:function(){try{W.texStorage3D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},texSubImage2D:function(){try{W.texSubImage2D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},texSubImage3D:function(){try{W.texSubImage3D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},compressedTexSubImage2D:function(){try{W.compressedTexSubImage2D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},compressedTexSubImage3D:function(){try{W.compressedTexSubImage3D.apply(W,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},scissor:function(n){!1===D.equals(n)&&(W.scissor(n.x,n.y,n.z,n.w),D.copy(n))},viewport:function(n){!1===x.equals(n)&&(W.viewport(n.x,n.y,n.z,n.w),x.copy(n))},reset:function(){W.disable(W.BLEND),W.disable(W.CULL_FACE),W.disable(W.DEPTH_TEST),W.disable(W.POLYGON_OFFSET_FILL),W.disable(W.SCISSOR_TEST),W.disable(W.STENCIL_TEST),W.disable(W.SAMPLE_ALPHA_TO_COVERAGE),W.blendEquation(W.FUNC_ADD),W.blendFunc(W.ONE,W.ZERO),W.blendFuncSeparate(W.ONE,W.ZERO,W.ONE,W.ZERO),W.colorMask(!0,!0,!0,!0),W.clearColor(0,0,0,0),W.depthMask(!0),W.depthFunc(W.LESS),W.clearDepth(1),W.stencilMask(4294967295),W.stencilFunc(W.ALWAYS,0,4294967295),W.stencilOp(W.KEEP,W.KEEP,W.KEEP),W.clearStencil(0),W.cullFace(W.BACK),W.frontFace(W.CCW),W.polygonOffset(0,0),W.activeTexture(W.TEXTURE0),W.bindFramebuffer(W.FRAMEBUFFER,null),!0===h&&(W.bindFramebuffer(W.DRAW_FRAMEBUFFER,null),W.bindFramebuffer(W.READ_FRAMEBUFFER,null)),W.useProgram(null),W.lineWidth(1),W.scissor(0,0,W.canvas.width,W.canvas.height),W.viewport(0,0,W.canvas.width,W.canvas.height),c={},V=null,F={},P={},S=new WeakMap,g=[],B=null,E=!1,u=null,Y=null,f=null,r=null,K=null,t=null,X=null,L=!1,O=null,Z=null,d=null,m=null,R=null,D.set(0,0,W.canvas.width,W.canvas.height),x.set(0,0,W.canvas.width,W.canvas.height),q.reset(),$.reset(),k.reset()}}}function sB(W,n,I,h,q,$,k){const _=q.isWebGL2,N=q.maxTextures,c=q.maxCubemapSize,P=q.maxTextureSize,S=q.maxSamples,g=n.has("WEBGL_multisampled_render_to_texture")?n.get("WEBGL_multisampled_render_to_texture"):null,B="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),E=new WeakMap;let u;const Y=new WeakMap;let f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(W){}function r(W,n){return f?new OffscreenCanvas(W,n):pN("canvas")}function K(W,n,I,h){let q=1;if((W.width>h||W.height>h)&&(q=h/Math.max(W.width,W.height)),q<1||!0===n){if("undefined"!=typeof HTMLImageElement&&W instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&W instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&W instanceof ImageBitmap){const h=n?xN:Math.floor,$=h(q*W.width),k=h(q*W.height);void 0===u&&(u=r($,k));const _=I?r($,k):u;return _.width=$,_.height=k,_.getContext("2d").drawImage(W,0,0,$,k),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+W.width+"x"+W.height+") to ("+$+"x"+k+")."),_}return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+W.width+"x"+W.height+")."),W}return W}function t(W){return DN(W.width)&&DN(W.height)}function X(W,n){return W.generateMipmaps&&n&&1003!==W.minFilter&&1006!==W.minFilter}function L(n){W.generateMipmap(n)}function O(I,h,q,$,k=!1){if(!1===_)return h;if(null!==I){if(void 0!==W[I])return W[I];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+I+"'")}let N=h;return h===W.RED&&(q===W.FLOAT&&(N=W.R32F),q===W.HALF_FLOAT&&(N=W.R16F),q===W.UNSIGNED_BYTE&&(N=W.R8)),h===W.RED_INTEGER&&(q===W.UNSIGNED_BYTE&&(N=W.R8UI),q===W.UNSIGNED_SHORT&&(N=W.R16UI),q===W.UNSIGNED_INT&&(N=W.R32UI),q===W.BYTE&&(N=W.R8I),q===W.SHORT&&(N=W.R16I),q===W.INT&&(N=W.R32I)),h===W.RG&&(q===W.FLOAT&&(N=W.RG32F),q===W.HALF_FLOAT&&(N=W.RG16F),q===W.UNSIGNED_BYTE&&(N=W.RG8)),h===W.RGBA&&(q===W.FLOAT&&(N=W.RGBA32F),q===W.HALF_FLOAT&&(N=W.RGBA16F),q===W.UNSIGNED_BYTE&&(N="srgb"===$&&!1===k?W.SRGB8_ALPHA8:W.RGBA8),q===W.UNSIGNED_SHORT_4_4_4_4&&(N=W.RGBA4),q===W.UNSIGNED_SHORT_5_5_5_1&&(N=W.RGB5_A1)),N!==W.R16F&&N!==W.R32F&&N!==W.RG16F&&N!==W.RG32F&&N!==W.RGBA16F&&N!==W.RGBA32F||n.get("EXT_color_buffer_float"),N}function Z(W,n,I){return!0===X(W,I)||W.isFramebufferTexture&&1003!==W.minFilter&&1006!==W.minFilter?Math.log2(Math.max(n.width,n.height))+1:void 0!==W.mipmaps&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?n.mipmaps.length:1}function d(n){return 1003===n||1004===n||1005===n?W.NEAREST:W.LINEAR}function m(W){const n=W.target;n.removeEventListener("dispose",m),function(W){const n=h.get(W);if(void 0===n.__webglInit)return;const I=W.source,q=Y.get(I);if(q){const h=q[n.__cacheKey];h.usedTimes--,0===h.usedTimes&&e(W),0===Object.keys(q).length&&Y.delete(I)}h.remove(W)}(n),n.isVideoTexture&&E.delete(n)}function R(n){const I=n.target;I.removeEventListener("dispose",R),function(n){const I=n.texture,q=h.get(n),$=h.get(I);if(void 0!==$.__webglTexture&&(W.deleteTexture($.__webglTexture),k.memory.textures--),n.depthTexture&&n.depthTexture.dispose(),n.isWebGLCubeRenderTarget)for(let n=0;n<6;n++){if(Array.isArray(q.__webglFramebuffer[n]))for(let I=0;I<q.__webglFramebuffer[n].length;I++)W.deleteFramebuffer(q.__webglFramebuffer[n][I]);else W.deleteFramebuffer(q.__webglFramebuffer[n]);q.__webglDepthbuffer&&W.deleteRenderbuffer(q.__webglDepthbuffer[n])}else{if(Array.isArray(q.__webglFramebuffer))for(let n=0;n<q.__webglFramebuffer.length;n++)W.deleteFramebuffer(q.__webglFramebuffer[n]);else W.deleteFramebuffer(q.__webglFramebuffer);if(q.__webglDepthbuffer&&W.deleteRenderbuffer(q.__webglDepthbuffer),q.__webglMultisampledFramebuffer&&W.deleteFramebuffer(q.__webglMultisampledFramebuffer),q.__webglColorRenderbuffer)for(let n=0;n<q.__webglColorRenderbuffer.length;n++)q.__webglColorRenderbuffer[n]&&W.deleteRenderbuffer(q.__webglColorRenderbuffer[n]);q.__webglDepthRenderbuffer&&W.deleteRenderbuffer(q.__webglDepthRenderbuffer)}if(n.isWebGLMultipleRenderTargets)for(let n=0,q=I.length;n<q;n++){const q=h.get(I[n]);q.__webglTexture&&(W.deleteTexture(q.__webglTexture),k.memory.textures--),h.remove(I[n])}h.remove(I),h.remove(n)}(I)}function e(n){const I=h.get(n);W.deleteTexture(I.__webglTexture);const q=n.source;delete Y.get(q)[I.__cacheKey],k.memory.textures--}let j=0;function z(n,q){const $=h.get(n);if(n.isVideoTexture&&function(W){const n=k.render.frame;E.get(W)!==n&&(E.set(W,n),W.update())}(n),!1===n.isRenderTargetTexture&&n.version>0&&$.__version!==n.version){const W=n.image;if(null===W)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==W.complete)return void D($,n,q);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}I.bindTexture(W.TEXTURE_2D,$.__webglTexture,W.TEXTURE0+q)}const v={[cN]:W.REPEAT,[PN]:W.CLAMP_TO_EDGE,[SN]:W.MIRRORED_REPEAT},V={[gN]:W.NEAREST,[BN]:W.NEAREST_MIPMAP_NEAREST,[EN]:W.NEAREST_MIPMAP_LINEAR,[uN]:W.LINEAR,[YN]:W.LINEAR_MIPMAP_NEAREST,[fN]:W.LINEAR_MIPMAP_LINEAR},F={[XN]:W.NEVER,[eN]:W.ALWAYS,[LN]:W.LESS,[ZN]:W.LEQUAL,[ON]:W.EQUAL,[RN]:W.GEQUAL,[dN]:W.GREATER,[mN]:W.NOTEQUAL};function w(I,$,k){if(k?(W.texParameteri(I,W.TEXTURE_WRAP_S,v[$.wrapS]),W.texParameteri(I,W.TEXTURE_WRAP_T,v[$.wrapT]),I!==W.TEXTURE_3D&&I!==W.TEXTURE_2D_ARRAY||W.texParameteri(I,W.TEXTURE_WRAP_R,v[$.wrapR]),W.texParameteri(I,W.TEXTURE_MAG_FILTER,V[$.magFilter]),W.texParameteri(I,W.TEXTURE_MIN_FILTER,V[$.minFilter])):(W.texParameteri(I,W.TEXTURE_WRAP_S,W.CLAMP_TO_EDGE),W.texParameteri(I,W.TEXTURE_WRAP_T,W.CLAMP_TO_EDGE),I!==W.TEXTURE_3D&&I!==W.TEXTURE_2D_ARRAY||W.texParameteri(I,W.TEXTURE_WRAP_R,W.CLAMP_TO_EDGE),1001===$.wrapS&&1001===$.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),W.texParameteri(I,W.TEXTURE_MAG_FILTER,d($.magFilter)),W.texParameteri(I,W.TEXTURE_MIN_FILTER,d($.minFilter)),1003!==$.minFilter&&1006!==$.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),$.compareFunction&&(W.texParameteri(I,W.TEXTURE_COMPARE_MODE,W.COMPARE_REF_TO_TEXTURE),W.texParameteri(I,W.TEXTURE_COMPARE_FUNC,F[$.compareFunction])),!0===n.has("EXT_texture_filter_anisotropic")){const k=n.get("EXT_texture_filter_anisotropic");if(1003===$.magFilter)return;if(1005!==$.minFilter&&1008!==$.minFilter)return;if(1015===$.type&&!1===n.has("OES_texture_float_linear"))return;if(!1===_&&1016===$.type&&!1===n.has("OES_texture_half_float_linear"))return;($.anisotropy>1||h.get($).__currentAnisotropy)&&(W.texParameterf(I,k.TEXTURE_MAX_ANISOTROPY_EXT,Math.min($.anisotropy,q.getMaxAnisotropy())),h.get($).__currentAnisotropy=$.anisotropy)}}function o(n,I){let h=!1;void 0===n.__webglInit&&(n.__webglInit=!0,I.addEventListener("dispose",m));const q=I.source;let $=Y.get(q);void 0===$&&($={},Y.set(q,$));const _=function(W){const n=[];return n.push(W.wrapS),n.push(W.wrapT),n.push(W.wrapR||0),n.push(W.magFilter),n.push(W.minFilter),n.push(W.anisotropy),n.push(W.internalFormat),n.push(W.format),n.push(W.type),n.push(W.generateMipmaps),n.push(W.premultiplyAlpha),n.push(W.flipY),n.push(W.unpackAlignment),n.push(W.colorSpace),n.join()}(I);if(_!==n.__cacheKey){void 0===$[_]&&($[_]={texture:W.createTexture(),usedTimes:0},k.memory.textures++,h=!0),$[_].usedTimes++;const q=$[n.__cacheKey];void 0!==q&&($[n.__cacheKey].usedTimes--,0===q.usedTimes&&e(I)),n.__cacheKey=_,n.__webglTexture=$[_].texture}return h}function D(n,q,k){let N=W.TEXTURE_2D;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(N=W.TEXTURE_2D_ARRAY),q.isData3DTexture&&(N=W.TEXTURE_3D);const c=o(n,q),S=q.source;I.bindTexture(N,n.__webglTexture,W.TEXTURE0+k);const g=h.get(S);if(S.version!==g.__version||!0===c){I.activeTexture(W.TEXTURE0+k),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,q.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,q.unpackAlignment),W.pixelStorei(W.UNPACK_COLORSPACE_CONVERSION_WEBGL,W.NONE);const n=function(W){return!_&&(1001!==W.wrapS||1001!==W.wrapT||1003!==W.minFilter&&1006!==W.minFilter)}(q)&&!1===t(q.image);let h=K(q.image,n,!1,P);h=l(q,h);const B=t(h)||_,E=$.convert(q.format,q.colorSpace);let u,Y=$.convert(q.type),f=O(q.internalFormat,E,Y,q.colorSpace);w(N,q,B);const r=q.mipmaps,d=_&&!0!==q.isVideoTexture,m=void 0===g.__version||!0===c,R=Z(q,h,B);if(q.isDepthTexture)f=W.DEPTH_COMPONENT,_?f=1015===q.type?W.DEPTH_COMPONENT32F:1014===q.type?W.DEPTH_COMPONENT24:1020===q.type?W.DEPTH24_STENCIL8:W.DEPTH_COMPONENT16:1015===q.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===q.format&&f===W.DEPTH_COMPONENT&&1012!==q.type&&1014!==q.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),q.type=1014,Y=$.convert(q.type)),1027===q.format&&f===W.DEPTH_COMPONENT&&(f=W.DEPTH_STENCIL,1020!==q.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),q.type=1020,Y=$.convert(q.type))),m&&(d?I.texStorage2D(W.TEXTURE_2D,1,f,h.width,h.height):I.texImage2D(W.TEXTURE_2D,0,f,h.width,h.height,0,E,Y,null));else if(q.isDataTexture)if(r.length>0&&B){d&&m&&I.texStorage2D(W.TEXTURE_2D,R,f,r[0].width,r[0].height);for(let n=0,h=r.length;n<h;n++)u=r[n],d?I.texSubImage2D(W.TEXTURE_2D,n,0,0,u.width,u.height,E,Y,u.data):I.texImage2D(W.TEXTURE_2D,n,f,u.width,u.height,0,E,Y,u.data);q.generateMipmaps=!1}else d?(m&&I.texStorage2D(W.TEXTURE_2D,R,f,h.width,h.height),I.texSubImage2D(W.TEXTURE_2D,0,0,0,h.width,h.height,E,Y,h.data)):I.texImage2D(W.TEXTURE_2D,0,f,h.width,h.height,0,E,Y,h.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){d&&m&&I.texStorage3D(W.TEXTURE_2D_ARRAY,R,f,r[0].width,r[0].height,h.depth);for(let n=0,$=r.length;n<$;n++)u=r[n],1023!==q.format?null!==E?d?I.compressedTexSubImage3D(W.TEXTURE_2D_ARRAY,n,0,0,0,u.width,u.height,h.depth,E,u.data,0,0):I.compressedTexImage3D(W.TEXTURE_2D_ARRAY,n,f,u.width,u.height,h.depth,0,u.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):d?I.texSubImage3D(W.TEXTURE_2D_ARRAY,n,0,0,0,u.width,u.height,h.depth,E,Y,u.data):I.texImage3D(W.TEXTURE_2D_ARRAY,n,f,u.width,u.height,h.depth,0,E,Y,u.data)}else{d&&m&&I.texStorage2D(W.TEXTURE_2D,R,f,r[0].width,r[0].height);for(let n=0,h=r.length;n<h;n++)u=r[n],1023!==q.format?null!==E?d?I.compressedTexSubImage2D(W.TEXTURE_2D,n,0,0,u.width,u.height,E,u.data):I.compressedTexImage2D(W.TEXTURE_2D,n,f,u.width,u.height,0,u.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):d?I.texSubImage2D(W.TEXTURE_2D,n,0,0,u.width,u.height,E,Y,u.data):I.texImage2D(W.TEXTURE_2D,n,f,u.width,u.height,0,E,Y,u.data)}else if(q.isDataArrayTexture)d?(m&&I.texStorage3D(W.TEXTURE_2D_ARRAY,R,f,h.width,h.height,h.depth),I.texSubImage3D(W.TEXTURE_2D_ARRAY,0,0,0,0,h.width,h.height,h.depth,E,Y,h.data)):I.texImage3D(W.TEXTURE_2D_ARRAY,0,f,h.width,h.height,h.depth,0,E,Y,h.data);else if(q.isData3DTexture)d?(m&&I.texStorage3D(W.TEXTURE_3D,R,f,h.width,h.height,h.depth),I.texSubImage3D(W.TEXTURE_3D,0,0,0,0,h.width,h.height,h.depth,E,Y,h.data)):I.texImage3D(W.TEXTURE_3D,0,f,h.width,h.height,h.depth,0,E,Y,h.data);else if(q.isFramebufferTexture){if(m)if(d)I.texStorage2D(W.TEXTURE_2D,R,f,h.width,h.height);else{let n=h.width,q=h.height;for(let h=0;h<R;h++)I.texImage2D(W.TEXTURE_2D,h,f,n,q,0,E,Y,null),n>>=1,q>>=1}}else if(r.length>0&&B){d&&m&&I.texStorage2D(W.TEXTURE_2D,R,f,r[0].width,r[0].height);for(let n=0,h=r.length;n<h;n++)u=r[n],d?I.texSubImage2D(W.TEXTURE_2D,n,0,0,E,Y,u):I.texImage2D(W.TEXTURE_2D,n,f,E,Y,u);q.generateMipmaps=!1}else d?(m&&I.texStorage2D(W.TEXTURE_2D,R,f,h.width,h.height),I.texSubImage2D(W.TEXTURE_2D,0,0,0,E,Y,h)):I.texImage2D(W.TEXTURE_2D,0,f,E,Y,h);X(q,B)&&L(N),g.__version=S.version,q.onUpdate&&q.onUpdate(q)}n.__version=q.version}function x(n,q,k,_,N,c){const P=$.convert(k.format,k.colorSpace),S=$.convert(k.type),B=O(k.internalFormat,P,S,k.colorSpace);if(!h.get(q).__hasExternalTextures){const n=Math.max(1,q.width>>c),h=Math.max(1,q.height>>c);N===W.TEXTURE_3D||N===W.TEXTURE_2D_ARRAY?I.texImage3D(N,c,B,n,h,q.depth,0,P,S,null):I.texImage2D(N,c,B,n,h,0,P,S,null)}I.bindFramebuffer(W.FRAMEBUFFER,n),b(q)?g.framebufferTexture2DMultisampleEXT(W.FRAMEBUFFER,_,N,h.get(k).__webglTexture,0,C(q)):(N===W.TEXTURE_2D||N>=W.TEXTURE_CUBE_MAP_POSITIVE_X&&N<=W.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&W.framebufferTexture2D(W.FRAMEBUFFER,_,N,h.get(k).__webglTexture,c),I.bindFramebuffer(W.FRAMEBUFFER,null)}function G(n,I,h){if(W.bindRenderbuffer(W.RENDERBUFFER,n),I.depthBuffer&&!I.stencilBuffer){let q=W.DEPTH_COMPONENT16;if(h||b(I)){const n=I.depthTexture;n&&n.isDepthTexture&&(1015===n.type?q=W.DEPTH_COMPONENT32F:1014===n.type&&(q=W.DEPTH_COMPONENT24));const h=C(I);b(I)?g.renderbufferStorageMultisampleEXT(W.RENDERBUFFER,h,q,I.width,I.height):W.renderbufferStorageMultisample(W.RENDERBUFFER,h,q,I.width,I.height)}else W.renderbufferStorage(W.RENDERBUFFER,q,I.width,I.height);W.framebufferRenderbuffer(W.FRAMEBUFFER,W.DEPTH_ATTACHMENT,W.RENDERBUFFER,n)}else if(I.depthBuffer&&I.stencilBuffer){const q=C(I);h&&!1===b(I)?W.renderbufferStorageMultisample(W.RENDERBUFFER,q,W.DEPTH24_STENCIL8,I.width,I.height):b(I)?g.renderbufferStorageMultisampleEXT(W.RENDERBUFFER,q,W.DEPTH24_STENCIL8,I.width,I.height):W.renderbufferStorage(W.RENDERBUFFER,W.DEPTH_STENCIL,I.width,I.height),W.framebufferRenderbuffer(W.FRAMEBUFFER,W.DEPTH_STENCIL_ATTACHMENT,W.RENDERBUFFER,n)}else{const n=!0===I.isWebGLMultipleRenderTargets?I.texture:[I.texture];for(let q=0;q<n.length;q++){const k=n[q],_=$.convert(k.format,k.colorSpace),N=$.convert(k.type),c=O(k.internalFormat,_,N,k.colorSpace),P=C(I);h&&!1===b(I)?W.renderbufferStorageMultisample(W.RENDERBUFFER,P,c,I.width,I.height):b(I)?g.renderbufferStorageMultisampleEXT(W.RENDERBUFFER,P,c,I.width,I.height):W.renderbufferStorage(W.RENDERBUFFER,c,I.width,I.height)}}W.bindRenderbuffer(W.RENDERBUFFER,null)}function y(n){const q=h.get(n),$=!0===n.isWebGLCubeRenderTarget;if(n.depthTexture&&!q.__autoAllocateDepthBuffer){if($)throw new Error("target.depthTexture not supported in Cube render targets");!function(n,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(I.bindFramebuffer(W.FRAMEBUFFER,n),!q.depthTexture||!q.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");h.get(q.depthTexture).__webglTexture&&q.depthTexture.image.width===q.width&&q.depthTexture.image.height===q.height||(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),z(q.depthTexture,0);const $=h.get(q.depthTexture).__webglTexture,k=C(q);if(1026===q.depthTexture.format)b(q)?g.framebufferTexture2DMultisampleEXT(W.FRAMEBUFFER,W.DEPTH_ATTACHMENT,W.TEXTURE_2D,$,0,k):W.framebufferTexture2D(W.FRAMEBUFFER,W.DEPTH_ATTACHMENT,W.TEXTURE_2D,$,0);else{if(1027!==q.depthTexture.format)throw new Error("Unknown depthTexture format");b(q)?g.framebufferTexture2DMultisampleEXT(W.FRAMEBUFFER,W.DEPTH_STENCIL_ATTACHMENT,W.TEXTURE_2D,$,0,k):W.framebufferTexture2D(W.FRAMEBUFFER,W.DEPTH_STENCIL_ATTACHMENT,W.TEXTURE_2D,$,0)}}(q.__webglFramebuffer,n)}else if($){q.__webglDepthbuffer=[];for(let h=0;h<6;h++)I.bindFramebuffer(W.FRAMEBUFFER,q.__webglFramebuffer[h]),q.__webglDepthbuffer[h]=W.createRenderbuffer(),G(q.__webglDepthbuffer[h],n,!1)}else I.bindFramebuffer(W.FRAMEBUFFER,q.__webglFramebuffer),q.__webglDepthbuffer=W.createRenderbuffer(),G(q.__webglDepthbuffer,n,!1);I.bindFramebuffer(W.FRAMEBUFFER,null)}function C(W){return Math.min(S,W.samples)}function b(W){const I=h.get(W);return _&&W.samples>0&&!0===n.has("WEBGL_multisampled_render_to_texture")&&!1!==I.__useRenderToTexture}function l(W,I){const h=W.colorSpace,q=W.format,$=W.type;return!0===W.isCompressedTexture||1035===W.format||"srgb-linear"!==h&&""!==h&&("srgb"===h?!1===_?!0===n.has("EXT_sRGB")&&1023===q?(W.format=1035,W.minFilter=1006,W.generateMipmaps=!1):I=nc.sRGBToLinear(I):1023===q&&1009===$||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",h)),I}this.allocateTextureUnit=function(){const W=j;return W>=N&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+N),j+=1,W},this.resetTextureUnits=function(){j=0},this.setTexture2D=z,this.setTexture2DArray=function(n,q){const $=h.get(n);n.version>0&&$.__version!==n.version?D($,n,q):I.bindTexture(W.TEXTURE_2D_ARRAY,$.__webglTexture,W.TEXTURE0+q)},this.setTexture3D=function(n,q){const $=h.get(n);n.version>0&&$.__version!==n.version?D($,n,q):I.bindTexture(W.TEXTURE_3D,$.__webglTexture,W.TEXTURE0+q)},this.setTextureCube=function(n,q){const k=h.get(n);n.version>0&&k.__version!==n.version?function(n,q,k){if(6!==q.image.length)return;const N=o(n,q),P=q.source;I.bindTexture(W.TEXTURE_CUBE_MAP,n.__webglTexture,W.TEXTURE0+k);const S=h.get(P);if(P.version!==S.__version||!0===N){I.activeTexture(W.TEXTURE0+k),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,q.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,q.unpackAlignment),W.pixelStorei(W.UNPACK_COLORSPACE_CONVERSION_WEBGL,W.NONE);const n=q.isCompressedTexture||q.image[0].isCompressedTexture,h=q.image[0]&&q.image[0].isDataTexture,g=[];for(let W=0;W<6;W++)g[W]=n||h?h?q.image[W].image:q.image[W]:K(q.image[W],!1,!0,c),g[W]=l(q,g[W]);const B=g[0],E=t(B)||_,u=$.convert(q.format,q.colorSpace),Y=$.convert(q.type),f=O(q.internalFormat,u,Y,q.colorSpace),r=_&&!0!==q.isVideoTexture,d=void 0===S.__version||!0===N;let m,R=Z(q,B,E);if(w(W.TEXTURE_CUBE_MAP,q,E),n){r&&d&&I.texStorage2D(W.TEXTURE_CUBE_MAP,R,f,B.width,B.height);for(let n=0;n<6;n++){m=g[n].mipmaps;for(let h=0;h<m.length;h++){const $=m[h];1023!==q.format?null!==u?r?I.compressedTexSubImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+n,h,0,0,$.width,$.height,u,$.data):I.compressedTexImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+n,h,f,$.width,$.height,0,$.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r?I.texSubImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+n,h,0,0,$.width,$.height,u,Y,$.data):I.texImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+n,h,f,$.width,$.height,0,u,Y,$.data)}}}else{m=q.mipmaps,r&&d&&(m.length>0&&R++,I.texStorage2D(W.TEXTURE_CUBE_MAP,R,f,g[0].width,g[0].height));for(let n=0;n<6;n++)if(h){r?I.texSubImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,0,0,g[n].width,g[n].height,u,Y,g[n].data):I.texImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,f,g[n].width,g[n].height,0,u,Y,g[n].data);for(let h=0;h<m.length;h++){const q=m[h].image[n].image;r?I.texSubImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+n,h+1,0,0,q.width,q.height,u,Y,q.data):I.texImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+n,h+1,f,q.width,q.height,0,u,Y,q.data)}}else{r?I.texSubImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,0,0,u,Y,g[n]):I.texImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,f,u,Y,g[n]);for(let h=0;h<m.length;h++){const q=m[h];r?I.texSubImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+n,h+1,0,0,u,Y,q.image[n]):I.texImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+n,h+1,f,u,Y,q.image[n])}}}X(q,E)&&L(W.TEXTURE_CUBE_MAP),S.__version=P.version,q.onUpdate&&q.onUpdate(q)}n.__version=q.version}(k,n,q):I.bindTexture(W.TEXTURE_CUBE_MAP,k.__webglTexture,W.TEXTURE0+q)},this.rebindTextures=function(n,I,q){const $=h.get(n);void 0!==I&&x($.__webglFramebuffer,n,n.texture,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,0),void 0!==q&&y(n)},this.setupRenderTarget=function(n){const N=n.texture,c=h.get(n),P=h.get(N);n.addEventListener("dispose",R),!0!==n.isWebGLMultipleRenderTargets&&(void 0===P.__webglTexture&&(P.__webglTexture=W.createTexture()),P.__version=N.version,k.memory.textures++);const S=!0===n.isWebGLCubeRenderTarget,g=!0===n.isWebGLMultipleRenderTargets,B=t(n)||_;if(S){c.__webglFramebuffer=[];for(let n=0;n<6;n++)if(_&&N.mipmaps&&N.mipmaps.length>0){c.__webglFramebuffer[n]=[];for(let I=0;I<N.mipmaps.length;I++)c.__webglFramebuffer[n][I]=W.createFramebuffer()}else c.__webglFramebuffer[n]=W.createFramebuffer()}else{if(_&&N.mipmaps&&N.mipmaps.length>0){c.__webglFramebuffer=[];for(let n=0;n<N.mipmaps.length;n++)c.__webglFramebuffer[n]=W.createFramebuffer()}else c.__webglFramebuffer=W.createFramebuffer();if(g)if(q.drawBuffers){const I=n.texture;for(let n=0,q=I.length;n<q;n++){const q=h.get(I[n]);void 0===q.__webglTexture&&(q.__webglTexture=W.createTexture(),k.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(_&&n.samples>0&&!1===b(n)){const h=g?N:[N];c.__webglMultisampledFramebuffer=W.createFramebuffer(),c.__webglColorRenderbuffer=[],I.bindFramebuffer(W.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let I=0;I<h.length;I++){const q=h[I];c.__webglColorRenderbuffer[I]=W.createRenderbuffer(),W.bindRenderbuffer(W.RENDERBUFFER,c.__webglColorRenderbuffer[I]);const k=$.convert(q.format,q.colorSpace),_=$.convert(q.type),N=O(q.internalFormat,k,_,q.colorSpace,!0===n.isXRRenderTarget),P=C(n);W.renderbufferStorageMultisample(W.RENDERBUFFER,P,N,n.width,n.height),W.framebufferRenderbuffer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0+I,W.RENDERBUFFER,c.__webglColorRenderbuffer[I])}W.bindRenderbuffer(W.RENDERBUFFER,null),n.depthBuffer&&(c.__webglDepthRenderbuffer=W.createRenderbuffer(),G(c.__webglDepthRenderbuffer,n,!0)),I.bindFramebuffer(W.FRAMEBUFFER,null)}}if(S){I.bindTexture(W.TEXTURE_CUBE_MAP,P.__webglTexture),w(W.TEXTURE_CUBE_MAP,N,B);for(let I=0;I<6;I++)if(_&&N.mipmaps&&N.mipmaps.length>0)for(let h=0;h<N.mipmaps.length;h++)x(c.__webglFramebuffer[I][h],n,N,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+I,h);else x(c.__webglFramebuffer[I],n,N,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+I,0);X(N,B)&&L(W.TEXTURE_CUBE_MAP),I.unbindTexture()}else if(g){const q=n.texture;for(let $=0,k=q.length;$<k;$++){const k=q[$],_=h.get(k);I.bindTexture(W.TEXTURE_2D,_.__webglTexture),w(W.TEXTURE_2D,k,B),x(c.__webglFramebuffer,n,k,W.COLOR_ATTACHMENT0+$,W.TEXTURE_2D,0),X(k,B)&&L(W.TEXTURE_2D)}I.unbindTexture()}else{let h=W.TEXTURE_2D;if((n.isWebGL3DRenderTarget||n.isWebGLArrayRenderTarget)&&(_?h=n.isWebGL3DRenderTarget?W.TEXTURE_3D:W.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),I.bindTexture(h,P.__webglTexture),w(h,N,B),_&&N.mipmaps&&N.mipmaps.length>0)for(let I=0;I<N.mipmaps.length;I++)x(c.__webglFramebuffer[I],n,N,W.COLOR_ATTACHMENT0,h,I);else x(c.__webglFramebuffer,n,N,W.COLOR_ATTACHMENT0,h,0);X(N,B)&&L(h),I.unbindTexture()}n.depthBuffer&&y(n)},this.updateRenderTargetMipmap=function(n){const q=t(n)||_,$=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let k=0,_=$.length;k<_;k++){const _=$[k];if(X(_,q)){const q=n.isWebGLCubeRenderTarget?W.TEXTURE_CUBE_MAP:W.TEXTURE_2D,$=h.get(_).__webglTexture;I.bindTexture(q,$),L(q),I.unbindTexture()}}},this.updateMultisampleRenderTarget=function(n){if(_&&n.samples>0&&!1===b(n)){const q=n.isWebGLMultipleRenderTargets?n.texture:[n.texture],$=n.width,k=n.height;let _=W.COLOR_BUFFER_BIT;const N=[],c=n.stencilBuffer?W.DEPTH_STENCIL_ATTACHMENT:W.DEPTH_ATTACHMENT,P=h.get(n),S=!0===n.isWebGLMultipleRenderTargets;if(S)for(let n=0;n<q.length;n++)I.bindFramebuffer(W.FRAMEBUFFER,P.__webglMultisampledFramebuffer),W.framebufferRenderbuffer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0+n,W.RENDERBUFFER,null),I.bindFramebuffer(W.FRAMEBUFFER,P.__webglFramebuffer),W.framebufferTexture2D(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0+n,W.TEXTURE_2D,null,0);I.bindFramebuffer(W.READ_FRAMEBUFFER,P.__webglMultisampledFramebuffer),I.bindFramebuffer(W.DRAW_FRAMEBUFFER,P.__webglFramebuffer);for(let I=0;I<q.length;I++){N.push(W.COLOR_ATTACHMENT0+I),n.depthBuffer&&N.push(c);const g=void 0!==P.__ignoreDepthValues&&P.__ignoreDepthValues;if(!1===g&&(n.depthBuffer&&(_|=W.DEPTH_BUFFER_BIT),n.stencilBuffer&&(_|=W.STENCIL_BUFFER_BIT)),S&&W.framebufferRenderbuffer(W.READ_FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.RENDERBUFFER,P.__webglColorRenderbuffer[I]),!0===g&&(W.invalidateFramebuffer(W.READ_FRAMEBUFFER,[c]),W.invalidateFramebuffer(W.DRAW_FRAMEBUFFER,[c])),S){const n=h.get(q[I]).__webglTexture;W.framebufferTexture2D(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,n,0)}W.blitFramebuffer(0,0,$,k,0,0,$,k,_,W.NEAREST),B&&W.invalidateFramebuffer(W.READ_FRAMEBUFFER,N)}if(I.bindFramebuffer(W.READ_FRAMEBUFFER,null),I.bindFramebuffer(W.DRAW_FRAMEBUFFER,null),S)for(let n=0;n<q.length;n++){I.bindFramebuffer(W.FRAMEBUFFER,P.__webglMultisampledFramebuffer),W.framebufferRenderbuffer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0+n,W.RENDERBUFFER,P.__webglColorRenderbuffer[n]);const $=h.get(q[n]).__webglTexture;I.bindFramebuffer(W.FRAMEBUFFER,P.__webglFramebuffer),W.framebufferTexture2D(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0+n,W.TEXTURE_2D,$,0)}I.bindFramebuffer(W.DRAW_FRAMEBUFFER,P.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=y,this.setupFrameBufferTexture=x,this.useMultisampledRTT=b}function MB(W,n,I){const h=I.isWebGL2;return{convert:function(I,q=""){let $;if(1009===I)return W.UNSIGNED_BYTE;if(1017===I)return W.UNSIGNED_SHORT_4_4_4_4;if(1018===I)return W.UNSIGNED_SHORT_5_5_5_1;if(1010===I)return W.BYTE;if(1011===I)return W.SHORT;if(1012===I)return W.UNSIGNED_SHORT;if(1013===I)return W.INT;if(1014===I)return W.UNSIGNED_INT;if(1015===I)return W.FLOAT;if(1016===I)return h?W.HALF_FLOAT:($=n.get("OES_texture_half_float"),null!==$?$.HALF_FLOAT_OES:null);if(1021===I)return W.ALPHA;if(1023===I)return W.RGBA;if(1024===I)return W.LUMINANCE;if(1025===I)return W.LUMINANCE_ALPHA;if(1026===I)return W.DEPTH_COMPONENT;if(1027===I)return W.DEPTH_STENCIL;if(1035===I)return $=n.get("EXT_sRGB"),null!==$?$.SRGB_ALPHA_EXT:null;if(1028===I)return W.RED;if(1029===I)return W.RED_INTEGER;if(1030===I)return W.RG;if(1031===I)return W.RG_INTEGER;if(1033===I)return W.RGBA_INTEGER;if(33776===I||33777===I||33778===I||33779===I)if("srgb"===q){if($=n.get("WEBGL_compressed_texture_s3tc_srgb"),null===$)return null;if(33776===I)return $.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===I)return $.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===I)return $.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===I)return $.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if($=n.get("WEBGL_compressed_texture_s3tc"),null===$)return null;if(33776===I)return $.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===I)return $.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===I)return $.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===I)return $.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===I||35841===I||35842===I||35843===I){if($=n.get("WEBGL_compressed_texture_pvrtc"),null===$)return null;if(35840===I)return $.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===I)return $.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===I)return $.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===I)return $.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===I)return $=n.get("WEBGL_compressed_texture_etc1"),null!==$?$.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===I||37496===I){if($=n.get("WEBGL_compressed_texture_etc"),null===$)return null;if(37492===I)return"srgb"===q?$.COMPRESSED_SRGB8_ETC2:$.COMPRESSED_RGB8_ETC2;if(37496===I)return"srgb"===q?$.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:$.COMPRESSED_RGBA8_ETC2_EAC}if(37808===I||37809===I||37810===I||37811===I||37812===I||37813===I||37814===I||37815===I||37816===I||37817===I||37818===I||37819===I||37820===I||37821===I){if($=n.get("WEBGL_compressed_texture_astc"),null===$)return null;if(37808===I)return"srgb"===q?$.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:$.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===I)return"srgb"===q?$.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:$.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===I)return"srgb"===q?$.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:$.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===I)return"srgb"===q?$.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:$.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===I)return"srgb"===q?$.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:$.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===I)return"srgb"===q?$.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:$.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===I)return"srgb"===q?$.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:$.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===I)return"srgb"===q?$.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:$.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===I)return"srgb"===q?$.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:$.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===I)return"srgb"===q?$.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:$.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===I)return"srgb"===q?$.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:$.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===I)return"srgb"===q?$.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:$.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===I)return"srgb"===q?$.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:$.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===I)return"srgb"===q?$.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:$.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===I){if($=n.get("EXT_texture_compression_bptc"),null===$)return null;if(36492===I)return"srgb"===q?$.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:$.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===I||36284===I||36285===I||36286===I){if($=n.get("EXT_texture_compression_rgtc"),null===$)return null;if(36492===I)return $.COMPRESSED_RED_RGTC1_EXT;if(36284===I)return $.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===I)return $.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===I)return $.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return 1020===I?h?W.UNSIGNED_INT_24_8:($=n.get("WEBGL_depth_texture"),null!==$?$.UNSIGNED_INT_24_8_WEBGL:null):void 0!==W[I]?W[I]:null}}}class WE extends tS{constructor(W=[]){super(),this.isArrayCamera=!0,this.cameras=W}}class nE extends gP{constructor(){super(),this.isGroup=!0,this.type="Group"}}const IE={type:"move"};class hE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new nE,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new nE,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new gc,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new gc),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new nE,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new gc,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new gc),this._grip}dispatchEvent(W){return null!==this._targetRay&&this._targetRay.dispatchEvent(W),null!==this._grip&&this._grip.dispatchEvent(W),null!==this._hand&&this._hand.dispatchEvent(W),this}connect(W){if(W&&W.hand){const n=this._hand;if(n)for(const I of W.hand.values())this._getHandJoint(n,I)}return this.dispatchEvent({type:"connected",data:W}),this}disconnect(W){return this.dispatchEvent({type:"disconnected",data:W}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(W,n,I){let h=null,q=null,$=null;const k=this._targetRay,_=this._grip,N=this._hand;if(W&&"visible-blurred"!==n.session.visibilityState){if(N&&W.hand){$=!0;for(const h of W.hand.values()){const W=n.getJointPose(h,I),q=this._getHandJoint(N,h);null!==W&&(q.matrix.fromArray(W.transform.matrix),q.matrix.decompose(q.position,q.rotation,q.scale),q.matrixWorldNeedsUpdate=!0,q.jointRadius=W.radius),q.visible=null!==W}const h=N.joints["index-finger-tip"],q=N.joints["thumb-tip"],k=h.position.distanceTo(q.position),_=.02,c=.005;N.inputState.pinching&&k>_+c?(N.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:W.handedness,target:this})):!N.inputState.pinching&&k<=_-c&&(N.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:W.handedness,target:this}))}else null!==_&&W.gripSpace&&(q=n.getPose(W.gripSpace,I),null!==q&&(_.matrix.fromArray(q.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,q.linearVelocity?(_.hasLinearVelocity=!0,_.linearVelocity.copy(q.linearVelocity)):_.hasLinearVelocity=!1,q.angularVelocity?(_.hasAngularVelocity=!0,_.angularVelocity.copy(q.angularVelocity)):_.hasAngularVelocity=!1));null!==k&&(h=n.getPose(W.targetRaySpace,I),null===h&&null!==q&&(h=q),null!==h&&(k.matrix.fromArray(h.transform.matrix),k.matrix.decompose(k.position,k.rotation,k.scale),k.matrixWorldNeedsUpdate=!0,h.linearVelocity?(k.hasLinearVelocity=!0,k.linearVelocity.copy(h.linearVelocity)):k.hasLinearVelocity=!1,h.angularVelocity?(k.hasAngularVelocity=!0,k.angularVelocity.copy(h.angularVelocity)):k.hasAngularVelocity=!1,this.dispatchEvent(IE)))}return null!==k&&(k.visible=null!==h),null!==_&&(_.visible=null!==q),null!==N&&(N.visible=null!==$),this}_getHandJoint(W,n){if(void 0===W.joints[n.jointName]){const I=new nE;I.matrixAutoUpdate=!1,I.visible=!1,W.joints[n.jointName]=I,W.add(I)}return W.joints[n.jointName]}}class qE extends kc{constructor(W,n,I,h,q,$,k,_,N,c){if(1026!==(c=void 0!==c?c:1026)&&1027!==c)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===I&&1026===c&&(I=1014),void 0===I&&1027===c&&(I=1020),super(null,h,q,$,k,_,c,I,N),this.isDepthTexture=!0,this.image={width:W,height:n},this.magFilter=void 0!==k?k:1003,this.minFilter=void 0!==_?_:1003,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(W){return super.copy(W),this.compareFunction=W.compareFunction,this}toJSON(W){const n=super.toJSON(W);return null!==this.compareFunction&&(n.compareFunction=this.compareFunction),n}}class $E extends jN{constructor(W,n){super();const I=this;let h=null,q=1,$=null,k="local-floor",_=1,N=null,c=null,P=null,S=null,g=null,B=null;const E=n.getContextAttributes();let u=null,Y=null;const f=[],r=[],K=new tS;K.layers.enable(1),K.viewport=new _c;const t=new tS;t.layers.enable(2),t.viewport=new _c;const X=[K,t],L=new WE;L.layers.enable(1),L.layers.enable(2);let O=null,Z=null;function d(W){const n=r.indexOf(W.inputSource);if(-1===n)return;const I=f[n];void 0!==I&&(I.update(W.inputSource,W.frame,N||$),I.dispatchEvent({type:W.type,data:W.inputSource}))}function m(){h.removeEventListener("select",d),h.removeEventListener("selectstart",d),h.removeEventListener("selectend",d),h.removeEventListener("squeeze",d),h.removeEventListener("squeezestart",d),h.removeEventListener("squeezeend",d),h.removeEventListener("end",m),h.removeEventListener("inputsourceschange",R);for(let W=0;W<f.length;W++){const n=r[W];null!==n&&(r[W]=null,f[W].disconnect(n))}O=null,Z=null,W.setRenderTarget(u),g=null,S=null,P=null,h=null,Y=null,V.stop(),I.isPresenting=!1,I.dispatchEvent({type:"sessionend"})}function R(W){for(let n=0;n<W.removed.length;n++){const I=W.removed[n],h=r.indexOf(I);h>=0&&(r[h]=null,f[h].disconnect(I))}for(let n=0;n<W.added.length;n++){const I=W.added[n];let h=r.indexOf(I);if(-1===h){for(let W=0;W<f.length;W++){if(W>=r.length){r.push(I),h=W;break}if(null===r[W]){r[W]=I,h=W;break}}if(-1===h)break}const q=f[h];q&&q.connect(I)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(W){let n=f[W];return void 0===n&&(n=new hE,f[W]=n),n.getTargetRaySpace()},this.getControllerGrip=function(W){let n=f[W];return void 0===n&&(n=new hE,f[W]=n),n.getGripSpace()},this.getHand=function(W){let n=f[W];return void 0===n&&(n=new hE,f[W]=n),n.getHandSpace()},this.setFramebufferScaleFactor=function(W){q=W,!0===I.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(W){k=W,!0===I.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return N||$},this.setReferenceSpace=function(W){N=W},this.getBaseLayer=function(){return null!==S?S:g},this.getBinding=function(){return P},this.getFrame=function(){return B},this.getSession=function(){return h},this.setSession=async function(c){if(h=c,null!==h){if(u=W.getRenderTarget(),h.addEventListener("select",d),h.addEventListener("selectstart",d),h.addEventListener("selectend",d),h.addEventListener("squeeze",d),h.addEventListener("squeezestart",d),h.addEventListener("squeezeend",d),h.addEventListener("end",m),h.addEventListener("inputsourceschange",R),!0!==E.xrCompatible&&await n.makeXRCompatible(),void 0===h.renderState.layers||!1===W.capabilities.isWebGL2){const I={antialias:void 0!==h.renderState.layers||E.antialias,alpha:!0,depth:E.depth,stencil:E.stencil,framebufferScaleFactor:q};g=new XRWebGLLayer(h,n,I),h.updateRenderState({baseLayer:g}),Y=new cc(g.framebufferWidth,g.framebufferHeight,{format:1023,type:1009,colorSpace:W.outputColorSpace,stencilBuffer:E.stencil})}else{let I=null,$=null,k=null;E.depth&&(k=E.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,I=E.stencil?1027:1026,$=E.stencil?1020:1014);const _={colorFormat:n.RGBA8,depthFormat:k,scaleFactor:q};P=new XRWebGLBinding(h,n),S=P.createProjectionLayer(_),h.updateRenderState({layers:[S]}),Y=new cc(S.textureWidth,S.textureHeight,{format:1023,type:1009,depthTexture:new qE(S.textureWidth,S.textureHeight,$,void 0,void 0,void 0,void 0,void 0,void 0,I),stencilBuffer:E.stencil,colorSpace:W.outputColorSpace,samples:E.antialias?4:0}),W.properties.get(Y).__ignoreDepthValues=S.ignoreDepthValues}Y.isXRRenderTarget=!0,this.setFoveation(_),N=null,$=await h.requestReferenceSpace(k),V.setContext(h),V.start(),I.isPresenting=!0,I.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==h)return h.environmentBlendMode};const e=new gc,j=new gc;function z(W,n){null===n?W.matrixWorld.copy(W.matrix):W.matrixWorld.multiplyMatrices(n.matrixWorld,W.matrix),W.matrixWorldInverse.copy(W.matrixWorld).invert()}this.updateCamera=function(W){if(null===h)return;L.near=t.near=K.near=W.near,L.far=t.far=K.far=W.far,O===L.near&&Z===L.far||(h.updateRenderState({depthNear:L.near,depthFar:L.far}),O=L.near,Z=L.far);const n=W.parent,I=L.cameras;z(L,n);for(let W=0;W<I.length;W++)z(I[W],n);2===I.length?function(W,n,I){e.setFromMatrixPosition(n.matrixWorld),j.setFromMatrixPosition(I.matrixWorld);const h=e.distanceTo(j),q=n.projectionMatrix.elements,$=I.projectionMatrix.elements,k=q[14]/(q[10]-1),_=q[14]/(q[10]+1),N=(q[9]+1)/q[5],c=(q[9]-1)/q[5],P=(q[8]-1)/q[0],S=($[8]+1)/$[0],g=k*P,B=k*S,E=h/(-P+S),u=E*-P;n.matrixWorld.decompose(W.position,W.quaternion,W.scale),W.translateX(u),W.translateZ(E),W.matrixWorld.compose(W.position,W.quaternion,W.scale),W.matrixWorldInverse.copy(W.matrixWorld).invert();const Y=k+E,f=_+E,r=g-u,K=B+(h-u),t=N*_/f*Y,X=c*_/f*Y;W.projectionMatrix.makePerspective(r,K,t,X,Y,f),W.projectionMatrixInverse.copy(W.projectionMatrix).invert()}(L,K,t):L.projectionMatrix.copy(K.projectionMatrix),function(W,n,I){null===I?W.matrix.copy(n.matrixWorld):(W.matrix.copy(I.matrixWorld),W.matrix.invert(),W.matrix.multiply(n.matrixWorld)),W.matrix.decompose(W.position,W.quaternion,W.scale),W.updateMatrixWorld(!0);const h=W.children;for(let W=0,n=h.length;W<n;W++)h[W].updateMatrixWorld(!0);W.projectionMatrix.copy(n.projectionMatrix),W.projectionMatrixInverse.copy(n.projectionMatrixInverse),W.isPerspectiveCamera&&(W.fov=2*VN*Math.atan(1/W.projectionMatrix.elements[5]),W.zoom=1)}(W,L,n)},this.getCamera=function(){return L},this.getFoveation=function(){if(null!==S||null!==g)return _},this.setFoveation=function(W){_=W,null!==S&&(S.fixedFoveation=W),null!==g&&void 0!==g.fixedFoveation&&(g.fixedFoveation=W)};let v=null;const V=new vS;V.setAnimationLoop((function(n,h){if(c=h.getViewerPose(N||$),B=h,null!==c){const n=c.views;null!==g&&(W.setRenderTargetFramebuffer(Y,g.framebuffer),W.setRenderTarget(Y));let I=!1;n.length!==L.cameras.length&&(L.cameras.length=0,I=!0);for(let h=0;h<n.length;h++){const q=n[h];let $=null;if(null!==g)$=g.getViewport(q);else{const n=P.getViewSubImage(S,q);$=n.viewport,0===h&&(W.setRenderTargetTextures(Y,n.colorTexture,S.ignoreDepthValues?void 0:n.depthStencilTexture),W.setRenderTarget(Y))}let k=X[h];void 0===k&&(k=new tS,k.layers.enable(h),k.viewport=new _c,X[h]=k),k.matrix.fromArray(q.transform.matrix),k.matrix.decompose(k.position,k.quaternion,k.scale),k.projectionMatrix.fromArray(q.projectionMatrix),k.projectionMatrixInverse.copy(k.projectionMatrix).invert(),k.viewport.set($.x,$.y,$.width,$.height),0===h&&(L.matrix.copy(k.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),!0===I&&L.cameras.push(k)}}for(let W=0;W<f.length;W++){const n=r[W],I=f[W];null!==n&&void 0!==I&&I.update(n,h,N||$)}v&&v(n,h),h.detectedPlanes&&I.dispatchEvent({type:"planesdetected",data:h}),B=null})),this.setAnimationLoop=function(W){v=W},this.dispose=function(){}}}function kE(W,n){function I(W,n){!0===W.matrixAutoUpdate&&W.updateMatrix(),n.value.copy(W.matrix)}function h(h,q){h.opacity.value=q.opacity,q.color&&h.diffuse.value.copy(q.color),q.emissive&&h.emissive.value.copy(q.emissive).multiplyScalar(q.emissiveIntensity),q.map&&(h.map.value=q.map,I(q.map,h.mapTransform)),q.alphaMap&&(h.alphaMap.value=q.alphaMap,I(q.alphaMap,h.alphaMapTransform)),q.bumpMap&&(h.bumpMap.value=q.bumpMap,I(q.bumpMap,h.bumpMapTransform),h.bumpScale.value=q.bumpScale,1===q.side&&(h.bumpScale.value*=-1)),q.normalMap&&(h.normalMap.value=q.normalMap,I(q.normalMap,h.normalMapTransform),h.normalScale.value.copy(q.normalScale),1===q.side&&h.normalScale.value.negate()),q.displacementMap&&(h.displacementMap.value=q.displacementMap,I(q.displacementMap,h.displacementMapTransform),h.displacementScale.value=q.displacementScale,h.displacementBias.value=q.displacementBias),q.emissiveMap&&(h.emissiveMap.value=q.emissiveMap,I(q.emissiveMap,h.emissiveMapTransform)),q.specularMap&&(h.specularMap.value=q.specularMap,I(q.specularMap,h.specularMapTransform)),q.alphaTest>0&&(h.alphaTest.value=q.alphaTest);const $=n.get(q).envMap;if($&&(h.envMap.value=$,h.flipEnvMap.value=$.isCubeTexture&&!1===$.isRenderTargetTexture?-1:1,h.reflectivity.value=q.reflectivity,h.ior.value=q.ior,h.refractionRatio.value=q.refractionRatio),q.lightMap){h.lightMap.value=q.lightMap;const n=!0===W._useLegacyLights?Math.PI:1;h.lightMapIntensity.value=q.lightMapIntensity*n,I(q.lightMap,h.lightMapTransform)}q.aoMap&&(h.aoMap.value=q.aoMap,h.aoMapIntensity.value=q.aoMapIntensity,I(q.aoMap,h.aoMapTransform))}return{refreshFogUniforms:function(n,I){I.color.getRGB(n.fogColor.value,YS(W)),I.isFog?(n.fogNear.value=I.near,n.fogFar.value=I.far):I.isFogExp2&&(n.fogDensity.value=I.density)},refreshMaterialUniforms:function(W,q,$,k,_){q.isMeshBasicMaterial||q.isMeshLambertMaterial?h(W,q):q.isMeshToonMaterial?(h(W,q),function(W,n){n.gradientMap&&(W.gradientMap.value=n.gradientMap)}(W,q)):q.isMeshPhongMaterial?(h(W,q),function(W,n){W.specular.value.copy(n.specular),W.shininess.value=Math.max(n.shininess,1e-4)}(W,q)):q.isMeshStandardMaterial?(h(W,q),function(W,h){W.metalness.value=h.metalness,h.metalnessMap&&(W.metalnessMap.value=h.metalnessMap,I(h.metalnessMap,W.metalnessMapTransform)),W.roughness.value=h.roughness,h.roughnessMap&&(W.roughnessMap.value=h.roughnessMap,I(h.roughnessMap,W.roughnessMapTransform)),n.get(h).envMap&&(W.envMapIntensity.value=h.envMapIntensity)}(W,q),q.isMeshPhysicalMaterial&&function(W,n,h){W.ior.value=n.ior,n.sheen>0&&(W.sheenColor.value.copy(n.sheenColor).multiplyScalar(n.sheen),W.sheenRoughness.value=n.sheenRoughness,n.sheenColorMap&&(W.sheenColorMap.value=n.sheenColorMap,I(n.sheenColorMap,W.sheenColorMapTransform)),n.sheenRoughnessMap&&(W.sheenRoughnessMap.value=n.sheenRoughnessMap,I(n.sheenRoughnessMap,W.sheenRoughnessMapTransform))),n.clearcoat>0&&(W.clearcoat.value=n.clearcoat,W.clearcoatRoughness.value=n.clearcoatRoughness,n.clearcoatMap&&(W.clearcoatMap.value=n.clearcoatMap,I(n.clearcoatMap,W.clearcoatMapTransform)),n.clearcoatRoughnessMap&&(W.clearcoatRoughnessMap.value=n.clearcoatRoughnessMap,I(n.clearcoatRoughnessMap,W.clearcoatRoughnessMapTransform)),n.clearcoatNormalMap&&(W.clearcoatNormalMap.value=n.clearcoatNormalMap,I(n.clearcoatNormalMap,W.clearcoatNormalMapTransform),W.clearcoatNormalScale.value.copy(n.clearcoatNormalScale),1===n.side&&W.clearcoatNormalScale.value.negate())),n.iridescence>0&&(W.iridescence.value=n.iridescence,W.iridescenceIOR.value=n.iridescenceIOR,W.iridescenceThicknessMinimum.value=n.iridescenceThicknessRange[0],W.iridescenceThicknessMaximum.value=n.iridescenceThicknessRange[1],n.iridescenceMap&&(W.iridescenceMap.value=n.iridescenceMap,I(n.iridescenceMap,W.iridescenceMapTransform)),n.iridescenceThicknessMap&&(W.iridescenceThicknessMap.value=n.iridescenceThicknessMap,I(n.iridescenceThicknessMap,W.iridescenceThicknessMapTransform))),n.transmission>0&&(W.transmission.value=n.transmission,W.transmissionSamplerMap.value=h.texture,W.transmissionSamplerSize.value.set(h.width,h.height),n.transmissionMap&&(W.transmissionMap.value=n.transmissionMap,I(n.transmissionMap,W.transmissionMapTransform)),W.thickness.value=n.thickness,n.thicknessMap&&(W.thicknessMap.value=n.thicknessMap,I(n.thicknessMap,W.thicknessMapTransform)),W.attenuationDistance.value=n.attenuationDistance,W.attenuationColor.value.copy(n.attenuationColor)),n.anisotropy>0&&(W.anisotropyVector.value.set(n.anisotropy*Math.cos(n.anisotropyRotation),n.anisotropy*Math.sin(n.anisotropyRotation)),n.anisotropyMap&&(W.anisotropyMap.value=n.anisotropyMap,I(n.anisotropyMap,W.anisotropyMapTransform))),W.specularIntensity.value=n.specularIntensity,W.specularColor.value.copy(n.specularColor),n.specularColorMap&&(W.specularColorMap.value=n.specularColorMap,I(n.specularColorMap,W.specularColorMapTransform)),n.specularIntensityMap&&(W.specularIntensityMap.value=n.specularIntensityMap,I(n.specularIntensityMap,W.specularIntensityMapTransform))}(W,q,_)):q.isMeshMatcapMaterial?(h(W,q),function(W,n){n.matcap&&(W.matcap.value=n.matcap)}(W,q)):q.isMeshDepthMaterial?h(W,q):q.isMeshDistanceMaterial?(h(W,q),function(W,I){const h=n.get(I).light;W.referencePosition.value.setFromMatrixPosition(h.matrixWorld),W.nearDistance.value=h.shadow.camera.near,W.farDistance.value=h.shadow.camera.far}(W,q)):q.isMeshNormalMaterial?h(W,q):q.isLineBasicMaterial?(function(W,n){W.diffuse.value.copy(n.color),W.opacity.value=n.opacity,n.map&&(W.map.value=n.map,I(n.map,W.mapTransform))}(W,q),q.isLineDashedMaterial&&function(W,n){W.dashSize.value=n.dashSize,W.totalSize.value=n.dashSize+n.gapSize,W.scale.value=n.scale}(W,q)):q.isPointsMaterial?function(W,n,h,q){W.diffuse.value.copy(n.color),W.opacity.value=n.opacity,W.size.value=n.size*h,W.scale.value=.5*q,n.map&&(W.map.value=n.map,I(n.map,W.uvTransform)),n.alphaMap&&(W.alphaMap.value=n.alphaMap,I(n.alphaMap,W.alphaMapTransform)),n.alphaTest>0&&(W.alphaTest.value=n.alphaTest)}(W,q,$,k):q.isSpriteMaterial?function(W,n){W.diffuse.value.copy(n.color),W.opacity.value=n.opacity,W.rotation.value=n.rotation,n.map&&(W.map.value=n.map,I(n.map,W.mapTransform)),n.alphaMap&&(W.alphaMap.value=n.alphaMap,I(n.alphaMap,W.alphaMapTransform)),n.alphaTest>0&&(W.alphaTest.value=n.alphaTest)}(W,q):q.isShadowMaterial?(W.color.value.copy(q.color),W.opacity.value=q.opacity):q.isShaderMaterial&&(q.uniformsNeedUpdate=!1)}}}function _E(W,n,I,h){let q={},$={},k=[];const _=I.isWebGL2?W.getParameter(W.MAX_UNIFORM_BUFFER_BINDINGS):0;function N(W,n,I){const h=W.value;if(void 0===I[n]){if("number"==typeof h)I[n]=h;else{const W=Array.isArray(h)?h:[h],q=[];for(let n=0;n<W.length;n++)q.push(W[n].clone());I[n]=q}return!0}if("number"==typeof h){if(I[n]!==h)return I[n]=h,!0}else{const W=Array.isArray(I[n])?I[n]:[I[n]],q=Array.isArray(h)?h:[h];for(let n=0;n<W.length;n++){const I=W[n];if(!1===I.equals(q[n]))return I.copy(q[n]),!0}}return!1}function c(W){const n={boundary:0,storage:0};return"number"==typeof W?(n.boundary=4,n.storage=4):W.isVector2?(n.boundary=8,n.storage=8):W.isVector3||W.isColor?(n.boundary=16,n.storage=12):W.isVector4?(n.boundary=16,n.storage=16):W.isMatrix3?(n.boundary=48,n.storage=48):W.isMatrix4?(n.boundary=64,n.storage=64):W.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",W),n}function P(n){const I=n.target;I.removeEventListener("dispose",P);const h=k.indexOf(I.__bindingPointIndex);k.splice(h,1),W.deleteBuffer(q[I.id]),delete q[I.id],delete $[I.id]}return{bind:function(W,n){const I=n.program;h.uniformBlockBinding(W,I)},update:function(I,S){let g=q[I.id];void 0===g&&(function(W){const n=W.uniforms;let I=0;const h=16;let q=0;for(let W=0,$=n.length;W<$;W++){const $=n[W],k={boundary:0,storage:0},_=Array.isArray($.value)?$.value:[$.value];for(let W=0,n=_.length;W<n;W++){const n=c(_[W]);k.boundary+=n.boundary,k.storage+=n.storage}$.__data=new Float32Array(k.storage/Float32Array.BYTES_PER_ELEMENT),$.__offset=I,W>0&&(q=I%h,0!==q&&h-q-k.boundary<0&&(I+=h-q,$.__offset=I)),I+=k.storage}q=I%h,q>0&&(I+=h-q),W.__size=I,W.__cache={}}(I),g=function(n){const I=function(){for(let W=0;W<_;W++)if(-1===k.indexOf(W))return k.push(W),W;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();n.__bindingPointIndex=I;const h=W.createBuffer(),q=n.__size,$=n.usage;return W.bindBuffer(W.UNIFORM_BUFFER,h),W.bufferData(W.UNIFORM_BUFFER,q,$),W.bindBuffer(W.UNIFORM_BUFFER,null),W.bindBufferBase(W.UNIFORM_BUFFER,I,h),h}(I),q[I.id]=g,I.addEventListener("dispose",P));const B=S.program;h.updateUBOMapping(I,B);const E=n.render.frame;$[I.id]!==E&&(function(n){const I=q[n.id],h=n.uniforms,$=n.__cache;W.bindBuffer(W.UNIFORM_BUFFER,I);for(let n=0,I=h.length;n<I;n++){const I=h[n];if(!0===N(I,n,$)){const n=I.__offset,h=Array.isArray(I.value)?I.value:[I.value];let q=0;for(let $=0;$<h.length;$++){const k=h[$],_=c(k);"number"==typeof k?(I.__data[0]=k,W.bufferSubData(W.UNIFORM_BUFFER,n+q,I.__data)):k.isMatrix3?(I.__data[0]=k.elements[0],I.__data[1]=k.elements[1],I.__data[2]=k.elements[2],I.__data[3]=k.elements[0],I.__data[4]=k.elements[3],I.__data[5]=k.elements[4],I.__data[6]=k.elements[5],I.__data[7]=k.elements[0],I.__data[8]=k.elements[6],I.__data[9]=k.elements[7],I.__data[10]=k.elements[8],I.__data[11]=k.elements[0]):(k.toArray(I.__data,q),q+=_.storage/Float32Array.BYTES_PER_ELEMENT)}W.bufferSubData(W.UNIFORM_BUFFER,n,I.__data)}}W.bindBuffer(W.UNIFORM_BUFFER,null)}(I),$[I.id]=E)},dispose:function(){for(const n in q)W.deleteBuffer(q[n]);k=[],q={},$={}}}}function NE(){const W=pN("canvas");return W.style.display="block",W}class cE{constructor(W={}){const{canvas:n=NE(),context:I=null,depth:h=!0,stencil:q=!0,alpha:$=!1,antialias:k=!1,premultipliedAlpha:_=!0,preserveDrawingBuffer:N=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:P=!1}=W;let S;this.isWebGLRenderer=!0,S=null!==I?I.getContextAttributes().alpha:$;const g=new Uint32Array(4),B=new Int32Array(4);let E=null,u=null;const Y=[],f=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace="srgb",this._useLegacyLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const r=this;let K=!1,t=0,X=0,L=null,O=-1,Z=null;const d=new _c,m=new _c;let R=null;const e=new vP(0);let j=0,z=n.width,v=n.height,V=1,F=null,w=null;const o=new _c(0,0,z,v),D=new _c(0,0,z,v);let x=!1;const G=new zS;let y=!1,C=!1,b=null;const l=new bc,A=new CN,p=new gc,i={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===L?V:1}let Q,T,H,a,J,s,M,WW,nW,IW,hW,qW,$W,kW,_W,NW,cW,PW,SW,gW,BW,EW,uW,YW,fW=I;function rW(W,I){for(let h=0;h<W.length;h++){const q=W[h],$=n.getContext(q,I);if(null!==$)return $}return null}try{const W={alpha:!0,depth:h,stencil:q,antialias:k,premultipliedAlpha:_,preserveDrawingBuffer:N,powerPreference:c,failIfMajorPerformanceCaveat:P};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r155"),n.addEventListener("webglcontextlost",XW,!1),n.addEventListener("webglcontextrestored",LW,!1),n.addEventListener("webglcontextcreationerror",OW,!1),null===fW){const n=["webgl2","webgl","experimental-webgl"];if(!0===r.isWebGL1Renderer&&n.shift(),fW=rW(n,W),null===fW)throw rW(n)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!=typeof WebGLRenderingContext&&fW instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===fW.getShaderPrecisionFormat&&(fW.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(W){throw console.error("THREE.WebGLRenderer: "+W.message),W}function KW(){Q=new qg(fW),T=new bS(fW,Q,W),Q.init(T),EW=new MB(fW,Q,T),H=new JB(fW,Q,T),a=new _g(fW),J=new xB,s=new sB(fW,Q,H,J,T,EW,a),M=new AS(r),WW=new hg(r),nW=new VS(fW,T),uW=new yS(fW,Q,nW,T),IW=new $g(fW,nW,a,uW),hW=new Sg(fW,IW,nW,a),SW=new Pg(fW,T,s),NW=new lS(J),qW=new DB(r,M,WW,Q,T,uW,NW),$W=new kE(r,J),kW=new bB,_W=new QB(Q,T),PW=new GS(r,M,WW,H,hW,S,_),cW=new aB(r,hW,T),YW=new _E(fW,a,T,H),gW=new CS(fW,Q,a,T),BW=new kg(fW,Q,a,T),a.programs=qW.programs,r.capabilities=T,r.extensions=Q,r.properties=J,r.renderLists=kW,r.shadowMap=cW,r.state=H,r.info=a}KW();const tW=new $E(r,fW);function XW(W){W.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),K=!0}function LW(){console.log("THREE.WebGLRenderer: Context Restored."),K=!1;const W=a.autoReset,n=cW.enabled,I=cW.autoUpdate,h=cW.needsUpdate,q=cW.type;KW(),a.autoReset=W,cW.enabled=n,cW.autoUpdate=I,cW.needsUpdate=h,cW.type=q}function OW(W){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",W.statusMessage)}function ZW(W){const n=W.target;n.removeEventListener("dispose",ZW),function(W){(function(W){const n=J.get(W).programs;void 0!==n&&(n.forEach((function(W){qW.releaseProgram(W)})),W.isShaderMaterial&&qW.releaseShaderCache(W))})(W),J.remove(W)}(n)}this.xr=tW,this.getContext=function(){return fW},this.getContextAttributes=function(){return fW.getContextAttributes()},this.forceContextLoss=function(){const W=Q.get("WEBGL_lose_context");W&&W.loseContext()},this.forceContextRestore=function(){const W=Q.get("WEBGL_lose_context");W&&W.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(W){void 0!==W&&(V=W,this.setSize(z,v,!1))},this.getSize=function(W){return W.set(z,v)},this.setSize=function(W,I,h=!0){tW.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(z=W,v=I,n.width=Math.floor(W*V),n.height=Math.floor(I*V),!0===h&&(n.style.width=W+"px",n.style.height=I+"px"),this.setViewport(0,0,W,I))},this.getDrawingBufferSize=function(W){return W.set(z*V,v*V).floor()},this.setDrawingBufferSize=function(W,I,h){z=W,v=I,V=h,n.width=Math.floor(W*h),n.height=Math.floor(I*h),this.setViewport(0,0,W,I)},this.getCurrentViewport=function(W){return W.copy(d)},this.getViewport=function(W){return W.copy(o)},this.setViewport=function(W,n,I,h){W.isVector4?o.set(W.x,W.y,W.z,W.w):o.set(W,n,I,h),H.viewport(d.copy(o).multiplyScalar(V).floor())},this.getScissor=function(W){return W.copy(D)},this.setScissor=function(W,n,I,h){W.isVector4?D.set(W.x,W.y,W.z,W.w):D.set(W,n,I,h),H.scissor(m.copy(D).multiplyScalar(V).floor())},this.getScissorTest=function(){return x},this.setScissorTest=function(W){H.setScissorTest(x=W)},this.setOpaqueSort=function(W){F=W},this.setTransparentSort=function(W){w=W},this.getClearColor=function(W){return W.copy(PW.getClearColor())},this.setClearColor=function(){PW.setClearColor.apply(PW,arguments)},this.getClearAlpha=function(){return PW.getClearAlpha()},this.setClearAlpha=function(){PW.setClearAlpha.apply(PW,arguments)},this.clear=function(W=!0,n=!0,I=!0){let h=0;if(W){let W=!1;if(null!==L){const n=L.texture.format;W=1033===n||1031===n||1029===n}if(W){const W=L.texture.type,n=1009===W||1014===W||1012===W||1020===W||1017===W||1018===W,I=PW.getClearColor(),h=PW.getClearAlpha(),q=I.r,$=I.g,k=I.b;n?(g[0]=q,g[1]=$,g[2]=k,g[3]=h,fW.clearBufferuiv(fW.COLOR,0,g)):(B[0]=q,B[1]=$,B[2]=k,B[3]=h,fW.clearBufferiv(fW.COLOR,0,B))}else h|=fW.COLOR_BUFFER_BIT}n&&(h|=fW.DEPTH_BUFFER_BIT),I&&(h|=fW.STENCIL_BUFFER_BIT),fW.clear(h)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",XW,!1),n.removeEventListener("webglcontextrestored",LW,!1),n.removeEventListener("webglcontextcreationerror",OW,!1),kW.dispose(),_W.dispose(),J.dispose(),M.dispose(),WW.dispose(),hW.dispose(),uW.dispose(),YW.dispose(),qW.dispose(),tW.dispose(),tW.removeEventListener("sessionstart",mW),tW.removeEventListener("sessionend",RW),b&&(b.dispose(),b=null),eW.stop()},this.renderBufferDirect=function(W,n,I,h,q,$){null===n&&(n=i);const k=q.isMesh&&q.matrixWorld.determinant()<0,_=function(W,n,I,h,q){!0!==n.isScene&&(n=i),s.resetTextureUnits();const $=n.fog,k=h.isMeshStandardMaterial?n.environment:null,_=null===L?r.outputColorSpace:!0===L.isXRRenderTarget?L.texture.colorSpace:"srgb-linear",N=(h.isMeshStandardMaterial?WW:M).get(h.envMap||k),c=!0===h.vertexColors&&!!I.attributes.color&&4===I.attributes.color.itemSize,P=!!I.attributes.tangent&&(!!h.normalMap||h.anisotropy>0),S=!!I.morphAttributes.position,g=!!I.morphAttributes.normal,B=!!I.morphAttributes.color;let E=0;h.toneMapped&&(null!==L&&!0!==L.isXRRenderTarget||(E=r.toneMapping));const Y=I.morphAttributes.position||I.morphAttributes.normal||I.morphAttributes.color,f=void 0!==Y?Y.length:0,K=J.get(h),t=u.state.lights;if(!0===y&&(!0===C||W!==Z)){const n=W===Z&&h.id===O;NW.setState(h,W,n)}let X=!1;h.version===K.__version?K.needsLights&&K.lightsStateVersion!==t.state.version||K.outputColorSpace!==_||q.isInstancedMesh&&!1===K.instancing?X=!0:q.isInstancedMesh||!0!==K.instancing?q.isSkinnedMesh&&!1===K.skinning?X=!0:q.isSkinnedMesh||!0!==K.skinning?q.isInstancedMesh&&!0===K.instancingColor&&null===q.instanceColor||q.isInstancedMesh&&!1===K.instancingColor&&null!==q.instanceColor||K.envMap!==N||!0===h.fog&&K.fog!==$?X=!0:void 0===K.numClippingPlanes||K.numClippingPlanes===NW.numPlanes&&K.numIntersection===NW.numIntersection?(K.vertexAlphas!==c||K.vertexTangents!==P||K.morphTargets!==S||K.morphNormals!==g||K.morphColors!==B||K.toneMapping!==E||!0===T.isWebGL2&&K.morphTargetsCount!==f)&&(X=!0):X=!0:X=!0:X=!0:(X=!0,K.__version=h.version);let d=K.currentProgram;!0===X&&(d=FW(h,n,q));let m=!1,R=!1,e=!1;const j=d.getUniforms(),z=K.uniforms;if(H.useProgram(d.program)&&(m=!0,R=!0,e=!0),h.id!==O&&(O=h.id,R=!0),m||Z!==W){if(j.setValue(fW,"projectionMatrix",W.projectionMatrix),T.logarithmicDepthBuffer&&j.setValue(fW,"logDepthBufFC",2/(Math.log(W.far+1)/Math.LN2)),Z!==W&&(Z=W,R=!0,e=!0),h.isShaderMaterial||h.isMeshPhongMaterial||h.isMeshToonMaterial||h.isMeshStandardMaterial||h.envMap){const n=j.map.cameraPosition;void 0!==n&&n.setValue(fW,p.setFromMatrixPosition(W.matrixWorld))}(h.isMeshPhongMaterial||h.isMeshToonMaterial||h.isMeshLambertMaterial||h.isMeshBasicMaterial||h.isMeshStandardMaterial||h.isShaderMaterial)&&j.setValue(fW,"isOrthographic",!0===W.isOrthographicCamera),(h.isMeshPhongMaterial||h.isMeshToonMaterial||h.isMeshLambertMaterial||h.isMeshBasicMaterial||h.isMeshStandardMaterial||h.isShaderMaterial||h.isShadowMaterial||q.isSkinnedMesh)&&j.setValue(fW,"viewMatrix",W.matrixWorldInverse)}if(q.isSkinnedMesh){j.setOptional(fW,q,"bindMatrix"),j.setOptional(fW,q,"bindMatrixInverse");const W=q.skeleton;W&&(T.floatVertexTextures?(null===W.boneTexture&&W.computeBoneTexture(),j.setValue(fW,"boneTexture",W.boneTexture,s),j.setValue(fW,"boneTextureSize",W.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const F=I.morphAttributes;var w,o;if((void 0!==F.position||void 0!==F.normal||void 0!==F.color&&!0===T.isWebGL2)&&SW.update(q,I,d),(R||K.receiveShadow!==q.receiveShadow)&&(K.receiveShadow=q.receiveShadow,j.setValue(fW,"receiveShadow",q.receiveShadow)),h.isMeshGouraudMaterial&&null!==h.envMap&&(z.envMap.value=N,z.flipEnvMap.value=N.isCubeTexture&&!1===N.isRenderTargetTexture?-1:1),R&&(j.setValue(fW,"toneMappingExposure",r.toneMappingExposure),K.needsLights&&(o=e,(w=z).ambientLightColor.needsUpdate=o,w.lightProbe.needsUpdate=o,w.directionalLights.needsUpdate=o,w.directionalLightShadows.needsUpdate=o,w.pointLights.needsUpdate=o,w.pointLightShadows.needsUpdate=o,w.spotLights.needsUpdate=o,w.spotLightShadows.needsUpdate=o,w.rectAreaLights.needsUpdate=o,w.hemisphereLights.needsUpdate=o),$&&!0===h.fog&&$W.refreshFogUniforms(z,$),$W.refreshMaterialUniforms(z,h,V,v,b),uB.upload(fW,K.uniformsList,z,s)),h.isShaderMaterial&&!0===h.uniformsNeedUpdate&&(uB.upload(fW,K.uniformsList,z,s),h.uniformsNeedUpdate=!1),h.isSpriteMaterial&&j.setValue(fW,"center",q.center),j.setValue(fW,"modelViewMatrix",q.modelViewMatrix),j.setValue(fW,"normalMatrix",q.normalMatrix),j.setValue(fW,"modelMatrix",q.matrixWorld),h.isShaderMaterial||h.isRawShaderMaterial){const W=h.uniformsGroups;for(let n=0,I=W.length;n<I;n++)if(T.isWebGL2){const I=W[n];YW.update(I,d),YW.bind(I,d)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return d}(W,n,I,h,q);H.setMaterial(h,k);let N=I.index,c=1;if(!0===h.wireframe){if(N=IW.getWireframeAttribute(I),void 0===N)return;c=2}const P=I.drawRange,S=I.attributes.position;let g=P.start*c,B=(P.start+P.count)*c;null!==$&&(g=Math.max(g,$.start*c),B=Math.min(B,($.start+$.count)*c)),null!==N?(g=Math.max(g,0),B=Math.min(B,N.count)):null!=S&&(g=Math.max(g,0),B=Math.min(B,S.count));const E=B-g;if(E<0||E===1/0)return;let Y;uW.setup(q,h,_,I,N);let f=gW;if(null!==N&&(Y=nW.get(N),f=BW,f.setIndex(Y)),q.isMesh)!0===h.wireframe?(H.setLineWidth(h.wireframeLinewidth*U()),f.setMode(fW.LINES)):f.setMode(fW.TRIANGLES);else if(q.isLine){let W=h.linewidth;void 0===W&&(W=1),H.setLineWidth(W*U()),q.isLineSegments?f.setMode(fW.LINES):q.isLineLoop?f.setMode(fW.LINE_LOOP):f.setMode(fW.LINE_STRIP)}else q.isPoints?f.setMode(fW.POINTS):q.isSprite&&f.setMode(fW.TRIANGLES);if(q.isInstancedMesh)f.renderInstances(g,E,q.count);else if(I.isInstancedBufferGeometry){const W=void 0!==I._maxInstanceCount?I._maxInstanceCount:1/0,n=Math.min(I.instanceCount,W);f.renderInstances(g,E,n)}else f.render(g,E)},this.compile=function(W,n){function I(W,n,I){!0===W.transparent&&2===W.side&&!1===W.forceSinglePass?(W.side=1,W.needsUpdate=!0,FW(W,n,I),W.side=0,W.needsUpdate=!0,FW(W,n,I),W.side=2):FW(W,n,I)}u=_W.get(W),u.init(),f.push(u),W.traverseVisible((function(W){W.isLight&&W.layers.test(n.layers)&&(u.pushLight(W),W.castShadow&&u.pushShadow(W))})),u.setupLights(r._useLegacyLights),W.traverse((function(n){const h=n.material;if(h)if(Array.isArray(h))for(let q=0;q<h.length;q++)I(h[q],W,n);else I(h,W,n)})),f.pop(),u=null};let dW=null;function mW(){eW.stop()}function RW(){eW.start()}const eW=new vS;function jW(W,n,I,h){if(!1===W.visible)return;if(W.layers.test(n.layers))if(W.isGroup)I=W.renderOrder;else if(W.isLOD)!0===W.autoUpdate&&W.update(n);else if(W.isLight)u.pushLight(W),W.castShadow&&u.pushShadow(W);else if(W.isSprite){if(!W.frustumCulled||G.intersectsSprite(W)){h&&p.setFromMatrixPosition(W.matrixWorld).applyMatrix4(l);const n=hW.update(W),q=W.material;q.visible&&E.push(W,n,q,I,p.z,null)}}else if((W.isMesh||W.isLine||W.isPoints)&&(!W.frustumCulled||G.intersectsObject(W))){const n=hW.update(W),q=W.material;if(h&&(void 0!==W.boundingSphere?(null===W.boundingSphere&&W.computeBoundingSphere(),p.copy(W.boundingSphere.center)):(null===n.boundingSphere&&n.computeBoundingSphere(),p.copy(n.boundingSphere.center)),p.applyMatrix4(W.matrixWorld).applyMatrix4(l)),Array.isArray(q)){const h=n.groups;for(let $=0,k=h.length;$<k;$++){const k=h[$],_=q[k.materialIndex];_&&_.visible&&E.push(W,n,_,I,p.z,k)}}else q.visible&&E.push(W,n,q,I,p.z,null)}const q=W.children;for(let W=0,$=q.length;W<$;W++)jW(q[W],n,I,h)}function zW(W,n,I,h){const q=W.opaque,$=W.transmissive,k=W.transparent;u.setupLightsView(I),!0===y&&NW.setGlobalState(r.clippingPlanes,I),$.length>0&&function(W,n,I,h){const q=T.isWebGL2;null===b&&(b=new cc(1,1,{generateMipmaps:!0,type:Q.has("EXT_color_buffer_half_float")?1016:1009,minFilter:1008,samples:q?4:0})),r.getDrawingBufferSize(A),q?b.setSize(A.x,A.y):b.setSize(xN(A.x),xN(A.y));const $=r.getRenderTarget();r.setRenderTarget(b),r.getClearColor(e),j=r.getClearAlpha(),j<1&&r.setClearColor(16777215,.5),r.clear();const k=r.toneMapping;r.toneMapping=0,vW(W,I,h),s.updateMultisampleRenderTarget(b),s.updateRenderTargetMipmap(b);let _=!1;for(let W=0,q=n.length;W<q;W++){const q=n[W],$=q.object,k=q.geometry,N=q.material,c=q.group;if(2===N.side&&$.layers.test(h.layers)){const W=N.side;N.side=1,N.needsUpdate=!0,VW($,I,h,k,N,c),N.side=W,N.needsUpdate=!0,_=!0}}!0===_&&(s.updateMultisampleRenderTarget(b),s.updateRenderTargetMipmap(b)),r.setRenderTarget($),r.setClearColor(e,j),r.toneMapping=k}(q,$,n,I),h&&H.viewport(d.copy(h)),q.length>0&&vW(q,n,I),$.length>0&&vW($,n,I),k.length>0&&vW(k,n,I),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1)}function vW(W,n,I){const h=!0===n.isScene?n.overrideMaterial:null;for(let q=0,$=W.length;q<$;q++){const $=W[q],k=$.object,_=$.geometry,N=null===h?$.material:h,c=$.group;k.layers.test(I.layers)&&VW(k,n,I,_,N,c)}}function VW(W,n,I,h,q,$){W.onBeforeRender(r,n,I,h,q,$),W.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,W.matrixWorld),W.normalMatrix.getNormalMatrix(W.modelViewMatrix),q.onBeforeRender(r,n,I,h,W,$),!0===q.transparent&&2===q.side&&!1===q.forceSinglePass?(q.side=1,q.needsUpdate=!0,r.renderBufferDirect(I,n,h,q,W,$),q.side=0,q.needsUpdate=!0,r.renderBufferDirect(I,n,h,q,W,$),q.side=2):r.renderBufferDirect(I,n,h,q,W,$),W.onAfterRender(r,n,I,h,q,$)}function FW(W,n,I){!0!==n.isScene&&(n=i);const h=J.get(W),q=u.state.lights,$=u.state.shadowsArray,k=q.state.version,_=qW.getParameters(W,q.state,$,n,I),N=qW.getProgramCacheKey(_);let c=h.programs;h.environment=W.isMeshStandardMaterial?n.environment:null,h.fog=n.fog,h.envMap=(W.isMeshStandardMaterial?WW:M).get(W.envMap||h.environment),void 0===c&&(W.addEventListener("dispose",ZW),c=new Map,h.programs=c);let P=c.get(N);if(void 0!==P){if(h.currentProgram===P&&h.lightsStateVersion===k)return wW(W,_),P}else _.uniforms=qW.getUniforms(W),W.onBuild(I,_,r),W.onBeforeCompile(_,r),P=qW.acquireProgram(_,N),c.set(N,P),h.uniforms=_.uniforms;const S=h.uniforms;(W.isShaderMaterial||W.isRawShaderMaterial)&&!0!==W.clipping||(S.clippingPlanes=NW.uniform),wW(W,_),h.needsLights=function(W){return W.isMeshLambertMaterial||W.isMeshToonMaterial||W.isMeshPhongMaterial||W.isMeshStandardMaterial||W.isShadowMaterial||W.isShaderMaterial&&!0===W.lights}(W),h.lightsStateVersion=k,h.needsLights&&(S.ambientLightColor.value=q.state.ambient,S.lightProbe.value=q.state.probe,S.directionalLights.value=q.state.directional,S.directionalLightShadows.value=q.state.directionalShadow,S.spotLights.value=q.state.spot,S.spotLightShadows.value=q.state.spotShadow,S.rectAreaLights.value=q.state.rectArea,S.ltc_1.value=q.state.rectAreaLTC1,S.ltc_2.value=q.state.rectAreaLTC2,S.pointLights.value=q.state.point,S.pointLightShadows.value=q.state.pointShadow,S.hemisphereLights.value=q.state.hemi,S.directionalShadowMap.value=q.state.directionalShadowMap,S.directionalShadowMatrix.value=q.state.directionalShadowMatrix,S.spotShadowMap.value=q.state.spotShadowMap,S.spotLightMatrix.value=q.state.spotLightMatrix,S.spotLightMap.value=q.state.spotLightMap,S.pointShadowMap.value=q.state.pointShadowMap,S.pointShadowMatrix.value=q.state.pointShadowMatrix);const g=P.getUniforms(),B=uB.seqWithValue(g.seq,S);return h.currentProgram=P,h.uniformsList=B,P}function wW(W,n){const I=J.get(W);I.outputColorSpace=n.outputColorSpace,I.instancing=n.instancing,I.instancingColor=n.instancingColor,I.skinning=n.skinning,I.morphTargets=n.morphTargets,I.morphNormals=n.morphNormals,I.morphColors=n.morphColors,I.morphTargetsCount=n.morphTargetsCount,I.numClippingPlanes=n.numClippingPlanes,I.numIntersection=n.numClipIntersection,I.vertexAlphas=n.vertexAlphas,I.vertexTangents=n.vertexTangents,I.toneMapping=n.toneMapping}eW.setAnimationLoop((function(W){dW&&dW(W)})),"undefined"!=typeof self&&eW.setContext(self),this.setAnimationLoop=function(W){dW=W,tW.setAnimationLoop(W),null===W?eW.stop():eW.start()},tW.addEventListener("sessionstart",mW),tW.addEventListener("sessionend",RW),this.render=function(W,n){if(void 0!==n&&!0!==n.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===K)return;!0===W.matrixWorldAutoUpdate&&W.updateMatrixWorld(),null===n.parent&&!0===n.matrixWorldAutoUpdate&&n.updateMatrixWorld(),!0===tW.enabled&&!0===tW.isPresenting&&(!0===tW.cameraAutoUpdate&&tW.updateCamera(n),n=tW.getCamera()),!0===W.isScene&&W.onBeforeRender(r,W,n,L),u=_W.get(W,f.length),u.init(),f.push(u),l.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),G.setFromProjectionMatrix(l),C=this.localClippingEnabled,y=NW.init(this.clippingPlanes,C),E=kW.get(W,Y.length),E.init(),Y.push(E),jW(W,n,0,r.sortObjects),E.finish(),!0===r.sortObjects&&E.sort(F,w),this.info.render.frame++,!0===y&&NW.beginShadows();const I=u.state.shadowsArray;if(cW.render(I,W,n),!0===y&&NW.endShadows(),!0===this.info.autoReset&&this.info.reset(),PW.render(E,W),u.setupLights(r._useLegacyLights),n.isArrayCamera){const I=n.cameras;for(let n=0,h=I.length;n<h;n++){const h=I[n];zW(E,W,h,h.viewport)}}else zW(E,W,n);null!==L&&(s.updateMultisampleRenderTarget(L),s.updateRenderTargetMipmap(L)),!0===W.isScene&&W.onAfterRender(r,W,n),uW.resetDefaultState(),O=-1,Z=null,f.pop(),u=f.length>0?f[f.length-1]:null,Y.pop(),E=Y.length>0?Y[Y.length-1]:null},this.getActiveCubeFace=function(){return t},this.getActiveMipmapLevel=function(){return X},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(W,n,I){J.get(W.texture).__webglTexture=n,J.get(W.depthTexture).__webglTexture=I;const h=J.get(W);h.__hasExternalTextures=!0,h.__hasExternalTextures&&(h.__autoAllocateDepthBuffer=void 0===I,h.__autoAllocateDepthBuffer||!0===Q.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),h.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(W,n){const I=J.get(W);I.__webglFramebuffer=n,I.__useDefaultFramebuffer=void 0===n},this.setRenderTarget=function(W,n=0,I=0){L=W,t=n,X=I;let h=!0,q=null,$=!1,k=!1;if(W){const _=J.get(W);void 0!==_.__useDefaultFramebuffer?(H.bindFramebuffer(fW.FRAMEBUFFER,null),h=!1):void 0===_.__webglFramebuffer?s.setupRenderTarget(W):_.__hasExternalTextures&&s.rebindTextures(W,J.get(W.texture).__webglTexture,J.get(W.depthTexture).__webglTexture);const N=W.texture;(N.isData3DTexture||N.isDataArrayTexture||N.isCompressedArrayTexture)&&(k=!0);const c=J.get(W).__webglFramebuffer;W.isWebGLCubeRenderTarget?(q=Array.isArray(c[n])?c[n][I]:c[n],$=!0):q=T.isWebGL2&&W.samples>0&&!1===s.useMultisampledRTT(W)?J.get(W).__webglMultisampledFramebuffer:Array.isArray(c)?c[I]:c,d.copy(W.viewport),m.copy(W.scissor),R=W.scissorTest}else d.copy(o).multiplyScalar(V).floor(),m.copy(D).multiplyScalar(V).floor(),R=x;if(H.bindFramebuffer(fW.FRAMEBUFFER,q)&&T.drawBuffers&&h&&H.drawBuffers(W,q),H.viewport(d),H.scissor(m),H.setScissorTest(R),$){const h=J.get(W.texture);fW.framebufferTexture2D(fW.FRAMEBUFFER,fW.COLOR_ATTACHMENT0,fW.TEXTURE_CUBE_MAP_POSITIVE_X+n,h.__webglTexture,I)}else if(k){const h=J.get(W.texture),q=n||0;fW.framebufferTextureLayer(fW.FRAMEBUFFER,fW.COLOR_ATTACHMENT0,h.__webglTexture,I||0,q)}O=-1},this.readRenderTargetPixels=function(W,n,I,h,q,$,k){if(!W||!W.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let _=J.get(W).__webglFramebuffer;if(W.isWebGLCubeRenderTarget&&void 0!==k&&(_=_[k]),_){H.bindFramebuffer(fW.FRAMEBUFFER,_);try{const k=W.texture,_=k.format,N=k.type;if(1023!==_&&EW.convert(_)!==fW.getParameter(fW.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=1016===N&&(Q.has("EXT_color_buffer_half_float")||T.isWebGL2&&Q.has("EXT_color_buffer_float"));if(!(1009===N||EW.convert(N)===fW.getParameter(fW.IMPLEMENTATION_COLOR_READ_TYPE)||1015===N&&(T.isWebGL2||Q.has("OES_texture_float")||Q.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");n>=0&&n<=W.width-h&&I>=0&&I<=W.height-q&&fW.readPixels(n,I,h,q,EW.convert(_),EW.convert(N),$)}finally{const W=null!==L?J.get(L).__webglFramebuffer:null;H.bindFramebuffer(fW.FRAMEBUFFER,W)}}},this.copyFramebufferToTexture=function(W,n,I=0){const h=Math.pow(2,-I),q=Math.floor(n.image.width*h),$=Math.floor(n.image.height*h);s.setTexture2D(n,0),fW.copyTexSubImage2D(fW.TEXTURE_2D,I,0,0,W.x,W.y,q,$),H.unbindTexture()},this.copyTextureToTexture=function(W,n,I,h=0){const q=n.image.width,$=n.image.height,k=EW.convert(I.format),_=EW.convert(I.type);s.setTexture2D(I,0),fW.pixelStorei(fW.UNPACK_FLIP_Y_WEBGL,I.flipY),fW.pixelStorei(fW.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),fW.pixelStorei(fW.UNPACK_ALIGNMENT,I.unpackAlignment),n.isDataTexture?fW.texSubImage2D(fW.TEXTURE_2D,h,W.x,W.y,q,$,k,_,n.image.data):n.isCompressedTexture?fW.compressedTexSubImage2D(fW.TEXTURE_2D,h,W.x,W.y,n.mipmaps[0].width,n.mipmaps[0].height,k,n.mipmaps[0].data):fW.texSubImage2D(fW.TEXTURE_2D,h,W.x,W.y,k,_,n.image),0===h&&I.generateMipmaps&&fW.generateMipmap(fW.TEXTURE_2D),H.unbindTexture()},this.copyTextureToTexture3D=function(W,n,I,h,q=0){if(r.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const $=W.max.x-W.min.x+1,k=W.max.y-W.min.y+1,_=W.max.z-W.min.z+1,N=EW.convert(h.format),c=EW.convert(h.type);let P;if(h.isData3DTexture)s.setTexture3D(h,0),P=fW.TEXTURE_3D;else{if(!h.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");s.setTexture2DArray(h,0),P=fW.TEXTURE_2D_ARRAY}fW.pixelStorei(fW.UNPACK_FLIP_Y_WEBGL,h.flipY),fW.pixelStorei(fW.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.premultiplyAlpha),fW.pixelStorei(fW.UNPACK_ALIGNMENT,h.unpackAlignment);const S=fW.getParameter(fW.UNPACK_ROW_LENGTH),g=fW.getParameter(fW.UNPACK_IMAGE_HEIGHT),B=fW.getParameter(fW.UNPACK_SKIP_PIXELS),E=fW.getParameter(fW.UNPACK_SKIP_ROWS),u=fW.getParameter(fW.UNPACK_SKIP_IMAGES),Y=I.isCompressedTexture?I.mipmaps[0]:I.image;fW.pixelStorei(fW.UNPACK_ROW_LENGTH,Y.width),fW.pixelStorei(fW.UNPACK_IMAGE_HEIGHT,Y.height),fW.pixelStorei(fW.UNPACK_SKIP_PIXELS,W.min.x),fW.pixelStorei(fW.UNPACK_SKIP_ROWS,W.min.y),fW.pixelStorei(fW.UNPACK_SKIP_IMAGES,W.min.z),I.isDataTexture||I.isData3DTexture?fW.texSubImage3D(P,q,n.x,n.y,n.z,$,k,_,N,c,Y.data):I.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),fW.compressedTexSubImage3D(P,q,n.x,n.y,n.z,$,k,_,N,Y.data)):fW.texSubImage3D(P,q,n.x,n.y,n.z,$,k,_,N,c,Y),fW.pixelStorei(fW.UNPACK_ROW_LENGTH,S),fW.pixelStorei(fW.UNPACK_IMAGE_HEIGHT,g),fW.pixelStorei(fW.UNPACK_SKIP_PIXELS,B),fW.pixelStorei(fW.UNPACK_SKIP_ROWS,E),fW.pixelStorei(fW.UNPACK_SKIP_IMAGES,u),0===q&&h.generateMipmaps&&fW.generateMipmap(P),H.unbindTexture()},this.initTexture=function(W){W.isCubeTexture?s.setTextureCube(W,0):W.isData3DTexture?s.setTexture3D(W,0):W.isDataArrayTexture||W.isCompressedArrayTexture?s.setTexture2DArray(W,0):s.setTexture2D(W,0),H.unbindTexture()},this.resetState=function(){t=0,X=0,L=null,H.reset(),uW.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return 2e3}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(W){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!W}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),"srgb"===this.outputColorSpace?3001:3e3}set outputEncoding(W){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=3001===W?"srgb":"srgb-linear"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(W){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=W}}(class extends cE{}).prototype.isWebGL1Renderer=!0;class PE extends gP{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(W,n){return super.copy(W,n),null!==W.background&&(this.background=W.background.clone()),null!==W.environment&&(this.environment=W.environment.clone()),null!==W.fog&&(this.fog=W.fog.clone()),this.backgroundBlurriness=W.backgroundBlurriness,this.backgroundIntensity=W.backgroundIntensity,null!==W.overrideMaterial&&(this.overrideMaterial=W.overrideMaterial.clone()),this.matrixAutoUpdate=W.matrixAutoUpdate,this}toJSON(W){const n=super.toJSON(W);return null!==this.fog&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class SE{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(W,n){const I=this.getUtoTmapping(W);return this.getPoint(I,n)}getPoints(W=5){const n=[];for(let I=0;I<=W;I++)n.push(this.getPoint(I/W));return n}getSpacedPoints(W=5){const n=[];for(let I=0;I<=W;I++)n.push(this.getPointAt(I/W));return n}getLength(){const W=this.getLengths();return W[W.length-1]}getLengths(W=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===W+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let I,h=this.getPoint(0),q=0;n.push(0);for(let $=1;$<=W;$++)I=this.getPoint($/W),q+=I.distanceTo(h),n.push(q),h=I;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(W,n){const I=this.getLengths();let h=0;const q=I.length;let $;$=n||W*I[q-1];let k,_=0,N=q-1;for(;_<=N;)if(h=Math.floor(_+(N-_)/2),k=I[h]-$,k<0)_=h+1;else{if(!(k>0)){N=h;break}N=h-1}if(h=N,I[h]===$)return h/(q-1);const c=I[h];return(h+($-c)/(I[h+1]-c))/(q-1)}getTangent(W,n){let I=W-1e-4,h=W+1e-4;I<0&&(I=0),h>1&&(h=1);const q=this.getPoint(I),$=this.getPoint(h),k=n||(q.isVector2?new CN:new gc);return k.copy($).sub(q).normalize(),k}getTangentAt(W,n){const I=this.getUtoTmapping(W);return this.getTangent(I,n)}computeFrenetFrames(W,n){const I=new gc,h=[],q=[],$=[],k=new gc,_=new bc;for(let n=0;n<=W;n++){const I=n/W;h[n]=this.getTangentAt(I,new gc)}q[0]=new gc,$[0]=new gc;let N=Number.MAX_VALUE;const c=Math.abs(h[0].x),P=Math.abs(h[0].y),S=Math.abs(h[0].z);c<=N&&(N=c,I.set(1,0,0)),P<=N&&(N=P,I.set(0,1,0)),S<=N&&I.set(0,0,1),k.crossVectors(h[0],I).normalize(),q[0].crossVectors(h[0],k),$[0].crossVectors(h[0],q[0]);for(let n=1;n<=W;n++){if(q[n]=q[n-1].clone(),$[n]=$[n-1].clone(),k.crossVectors(h[n-1],h[n]),k.length()>Number.EPSILON){k.normalize();const W=Math.acos(wN(h[n-1].dot(h[n]),-1,1));q[n].applyMatrix4(_.makeRotationAxis(k,W))}$[n].crossVectors(h[n],q[n])}if(!0===n){let n=Math.acos(wN(q[0].dot(q[W]),-1,1));n/=W,h[0].dot(k.crossVectors(q[0],q[W]))>0&&(n=-n);for(let I=1;I<=W;I++)q[I].applyMatrix4(_.makeRotationAxis(h[I],n*I)),$[I].crossVectors(h[I],q[I])}return{tangents:h,normals:q,binormals:$}}clone(){return(new this.constructor).copy(this)}copy(W){return this.arcLengthDivisions=W.arcLengthDivisions,this}toJSON(){const W={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return W.arcLengthDivisions=this.arcLengthDivisions,W.type=this.type,W}fromJSON(W){return this.arcLengthDivisions=W.arcLengthDivisions,this}}class gE extends SE{constructor(W=0,n=0,I=1,h=1,q=0,$=2*Math.PI,k=!1,_=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=W,this.aY=n,this.xRadius=I,this.yRadius=h,this.aStartAngle=q,this.aEndAngle=$,this.aClockwise=k,this.aRotation=_}getPoint(W,n){const I=n||new CN,h=2*Math.PI;let q=this.aEndAngle-this.aStartAngle;const $=Math.abs(q)<Number.EPSILON;for(;q<0;)q+=h;for(;q>h;)q-=h;q<Number.EPSILON&&(q=$?0:h),!0!==this.aClockwise||$||(q===h?q=-h:q-=h);const k=this.aStartAngle+W*q;let _=this.aX+this.xRadius*Math.cos(k),N=this.aY+this.yRadius*Math.sin(k);if(0!==this.aRotation){const W=Math.cos(this.aRotation),n=Math.sin(this.aRotation),I=_-this.aX,h=N-this.aY;_=I*W-h*n+this.aX,N=I*n+h*W+this.aY}return I.set(_,N)}copy(W){return super.copy(W),this.aX=W.aX,this.aY=W.aY,this.xRadius=W.xRadius,this.yRadius=W.yRadius,this.aStartAngle=W.aStartAngle,this.aEndAngle=W.aEndAngle,this.aClockwise=W.aClockwise,this.aRotation=W.aRotation,this}toJSON(){const W=super.toJSON();return W.aX=this.aX,W.aY=this.aY,W.xRadius=this.xRadius,W.yRadius=this.yRadius,W.aStartAngle=this.aStartAngle,W.aEndAngle=this.aEndAngle,W.aClockwise=this.aClockwise,W.aRotation=this.aRotation,W}fromJSON(W){return super.fromJSON(W),this.aX=W.aX,this.aY=W.aY,this.xRadius=W.xRadius,this.yRadius=W.yRadius,this.aStartAngle=W.aStartAngle,this.aEndAngle=W.aEndAngle,this.aClockwise=W.aClockwise,this.aRotation=W.aRotation,this}}function BE(){let W=0,n=0,I=0,h=0;function q(q,$,k,_){W=q,n=k,I=-3*q+3*$-2*k-_,h=2*q-2*$+k+_}return{initCatmullRom:function(W,n,I,h,$){q(n,I,$*(I-W),$*(h-n))},initNonuniformCatmullRom:function(W,n,I,h,$,k,_){let N=(n-W)/$-(I-W)/($+k)+(I-n)/k,c=(I-n)/k-(h-n)/(k+_)+(h-I)/_;N*=k,c*=k,q(n,I,N,c)},calc:function(q){const $=q*q;return W+n*q+I*$+h*($*q)}}}const EE=new gc,uE=new BE,YE=new BE,fE=new BE;function rE(W,n,I,h,q){const $=.5*(h-n),k=.5*(q-I),_=W*W;return(2*I-2*h+$+k)*(W*_)+(-3*I+3*h-2*$-k)*_+$*W+I}function KE(W,n,I,h){return function(W,n){const I=1-W;return I*I*n}(W,n)+function(W,n){return 2*(1-W)*W*n}(W,I)+function(W,n){return W*W*n}(W,h)}function tE(W,n,I,h,q){return function(W,n){const I=1-W;return I*I*I*n}(W,n)+function(W,n){const I=1-W;return 3*I*I*W*n}(W,I)+function(W,n){return 3*(1-W)*W*W*n}(W,h)+function(W,n){return W*W*W*n}(W,q)}class XE extends SE{constructor(W=new CN,n=new CN,I=new CN,h=new CN){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=W,this.v1=n,this.v2=I,this.v3=h}getPoint(W,n=new CN){const I=n,h=this.v0,q=this.v1,$=this.v2,k=this.v3;return I.set(tE(W,h.x,q.x,$.x,k.x),tE(W,h.y,q.y,$.y,k.y)),I}copy(W){return super.copy(W),this.v0.copy(W.v0),this.v1.copy(W.v1),this.v2.copy(W.v2),this.v3.copy(W.v3),this}toJSON(){const W=super.toJSON();return W.v0=this.v0.toArray(),W.v1=this.v1.toArray(),W.v2=this.v2.toArray(),W.v3=this.v3.toArray(),W}fromJSON(W){return super.fromJSON(W),this.v0.fromArray(W.v0),this.v1.fromArray(W.v1),this.v2.fromArray(W.v2),this.v3.fromArray(W.v3),this}}class LE extends SE{constructor(W=new CN,n=new CN){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=W,this.v2=n}getPoint(W,n=new CN){const I=n;return 1===W?I.copy(this.v2):(I.copy(this.v2).sub(this.v1),I.multiplyScalar(W).add(this.v1)),I}getPointAt(W,n){return this.getPoint(W,n)}getTangent(W,n=new CN){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(W,n){return this.getTangent(W,n)}copy(W){return super.copy(W),this.v1.copy(W.v1),this.v2.copy(W.v2),this}toJSON(){const W=super.toJSON();return W.v1=this.v1.toArray(),W.v2=this.v2.toArray(),W}fromJSON(W){return super.fromJSON(W),this.v1.fromArray(W.v1),this.v2.fromArray(W.v2),this}}class OE extends SE{constructor(W=new CN,n=new CN,I=new CN){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=W,this.v1=n,this.v2=I}getPoint(W,n=new CN){const I=n,h=this.v0,q=this.v1,$=this.v2;return I.set(KE(W,h.x,q.x,$.x),KE(W,h.y,q.y,$.y)),I}copy(W){return super.copy(W),this.v0.copy(W.v0),this.v1.copy(W.v1),this.v2.copy(W.v2),this}toJSON(){const W=super.toJSON();return W.v0=this.v0.toArray(),W.v1=this.v1.toArray(),W.v2=this.v2.toArray(),W}fromJSON(W){return super.fromJSON(W),this.v0.fromArray(W.v0),this.v1.fromArray(W.v1),this.v2.fromArray(W.v2),this}}class ZE extends SE{constructor(W=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=W}getPoint(W,n=new CN){const I=n,h=this.points,q=(h.length-1)*W,$=Math.floor(q),k=q-$,_=h[0===$?$:$-1],N=h[$],c=h[$>h.length-2?h.length-1:$+1],P=h[$>h.length-3?h.length-1:$+2];return I.set(rE(k,_.x,N.x,c.x,P.x),rE(k,_.y,N.y,c.y,P.y)),I}copy(W){super.copy(W),this.points=[];for(let n=0,I=W.points.length;n<I;n++){const I=W.points[n];this.points.push(I.clone())}return this}toJSON(){const W=super.toJSON();W.points=[];for(let n=0,I=this.points.length;n<I;n++){const I=this.points[n];W.points.push(I.toArray())}return W}fromJSON(W){super.fromJSON(W),this.points=[];for(let n=0,I=W.points.length;n<I;n++){const I=W.points[n];this.points.push((new CN).fromArray(I))}return this}}var dE=Object.freeze({__proto__:null,ArcCurve:class extends gE{constructor(W,n,I,h,q,$){super(W,n,I,I,h,q,$),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends SE{constructor(W=[],n=!1,I="centripetal",h=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=W,this.closed=n,this.curveType=I,this.tension=h}getPoint(W,n=new gc){const I=n,h=this.points,q=h.length,$=(q-(this.closed?0:1))*W;let k,_,N=Math.floor($),c=$-N;this.closed?N+=N>0?0:(Math.floor(Math.abs(N)/q)+1)*q:0===c&&N===q-1&&(N=q-2,c=1),this.closed||N>0?k=h[(N-1)%q]:(EE.subVectors(h[0],h[1]).add(h[0]),k=EE);const P=h[N%q],S=h[(N+1)%q];if(this.closed||N+2<q?_=h[(N+2)%q]:(EE.subVectors(h[q-1],h[q-2]).add(h[q-1]),_=EE),"centripetal"===this.curveType||"chordal"===this.curveType){const W="chordal"===this.curveType?.5:.25;let n=Math.pow(k.distanceToSquared(P),W),I=Math.pow(P.distanceToSquared(S),W),h=Math.pow(S.distanceToSquared(_),W);I<1e-4&&(I=1),n<1e-4&&(n=I),h<1e-4&&(h=I),uE.initNonuniformCatmullRom(k.x,P.x,S.x,_.x,n,I,h),YE.initNonuniformCatmullRom(k.y,P.y,S.y,_.y,n,I,h),fE.initNonuniformCatmullRom(k.z,P.z,S.z,_.z,n,I,h)}else"catmullrom"===this.curveType&&(uE.initCatmullRom(k.x,P.x,S.x,_.x,this.tension),YE.initCatmullRom(k.y,P.y,S.y,_.y,this.tension),fE.initCatmullRom(k.z,P.z,S.z,_.z,this.tension));return I.set(uE.calc(c),YE.calc(c),fE.calc(c)),I}copy(W){super.copy(W),this.points=[];for(let n=0,I=W.points.length;n<I;n++){const I=W.points[n];this.points.push(I.clone())}return this.closed=W.closed,this.curveType=W.curveType,this.tension=W.tension,this}toJSON(){const W=super.toJSON();W.points=[];for(let n=0,I=this.points.length;n<I;n++){const I=this.points[n];W.points.push(I.toArray())}return W.closed=this.closed,W.curveType=this.curveType,W.tension=this.tension,W}fromJSON(W){super.fromJSON(W),this.points=[];for(let n=0,I=W.points.length;n<I;n++){const I=W.points[n];this.points.push((new gc).fromArray(I))}return this.closed=W.closed,this.curveType=W.curveType,this.tension=W.tension,this}},CubicBezierCurve:XE,CubicBezierCurve3:class extends SE{constructor(W=new gc,n=new gc,I=new gc,h=new gc){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=W,this.v1=n,this.v2=I,this.v3=h}getPoint(W,n=new gc){const I=n,h=this.v0,q=this.v1,$=this.v2,k=this.v3;return I.set(tE(W,h.x,q.x,$.x,k.x),tE(W,h.y,q.y,$.y,k.y),tE(W,h.z,q.z,$.z,k.z)),I}copy(W){return super.copy(W),this.v0.copy(W.v0),this.v1.copy(W.v1),this.v2.copy(W.v2),this.v3.copy(W.v3),this}toJSON(){const W=super.toJSON();return W.v0=this.v0.toArray(),W.v1=this.v1.toArray(),W.v2=this.v2.toArray(),W.v3=this.v3.toArray(),W}fromJSON(W){return super.fromJSON(W),this.v0.fromArray(W.v0),this.v1.fromArray(W.v1),this.v2.fromArray(W.v2),this.v3.fromArray(W.v3),this}},EllipseCurve:gE,LineCurve:LE,LineCurve3:class extends SE{constructor(W=new gc,n=new gc){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=W,this.v2=n}getPoint(W,n=new gc){const I=n;return 1===W?I.copy(this.v2):(I.copy(this.v2).sub(this.v1),I.multiplyScalar(W).add(this.v1)),I}getPointAt(W,n){return this.getPoint(W,n)}getTangent(W,n=new gc){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(W,n){return this.getTangent(W,n)}copy(W){return super.copy(W),this.v1.copy(W.v1),this.v2.copy(W.v2),this}toJSON(){const W=super.toJSON();return W.v1=this.v1.toArray(),W.v2=this.v2.toArray(),W}fromJSON(W){return super.fromJSON(W),this.v1.fromArray(W.v1),this.v2.fromArray(W.v2),this}},QuadraticBezierCurve:OE,QuadraticBezierCurve3:class extends SE{constructor(W=new gc,n=new gc,I=new gc){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=W,this.v1=n,this.v2=I}getPoint(W,n=new gc){const I=n,h=this.v0,q=this.v1,$=this.v2;return I.set(KE(W,h.x,q.x,$.x),KE(W,h.y,q.y,$.y),KE(W,h.z,q.z,$.z)),I}copy(W){return super.copy(W),this.v0.copy(W.v0),this.v1.copy(W.v1),this.v2.copy(W.v2),this}toJSON(){const W=super.toJSON();return W.v0=this.v0.toArray(),W.v1=this.v1.toArray(),W.v2=this.v2.toArray(),W}fromJSON(W){return super.fromJSON(W),this.v0.fromArray(W.v0),this.v1.fromArray(W.v1),this.v2.fromArray(W.v2),this}},SplineCurve:ZE});class mE extends SE{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(W){this.curves.push(W)}closePath(){const W=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);W.equals(n)||this.curves.push(new LE(n,W))}getPoint(W,n){const I=W*this.getLength(),h=this.getCurveLengths();let q=0;for(;q<h.length;){if(h[q]>=I){const W=h[q]-I,$=this.curves[q],k=$.getLength(),_=0===k?0:1-W/k;return $.getPointAt(_,n)}q++}return null}getLength(){const W=this.getCurveLengths();return W[W.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const W=[];let n=0;for(let I=0,h=this.curves.length;I<h;I++)n+=this.curves[I].getLength(),W.push(n);return this.cacheLengths=W,W}getSpacedPoints(W=40){const n=[];for(let I=0;I<=W;I++)n.push(this.getPoint(I/W));return this.autoClose&&n.push(n[0]),n}getPoints(W=12){const n=[];let I;for(let h=0,q=this.curves;h<q.length;h++){const $=q[h],k=$.isEllipseCurve?2*W:$.isLineCurve||$.isLineCurve3?1:$.isSplineCurve?W*$.points.length:W,_=$.getPoints(k);for(let W=0;W<_.length;W++){const h=_[W];I&&I.equals(h)||(n.push(h),I=h)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(W){super.copy(W),this.curves=[];for(let n=0,I=W.curves.length;n<I;n++){const I=W.curves[n];this.curves.push(I.clone())}return this.autoClose=W.autoClose,this}toJSON(){const W=super.toJSON();W.autoClose=this.autoClose,W.curves=[];for(let n=0,I=this.curves.length;n<I;n++){const I=this.curves[n];W.curves.push(I.toJSON())}return W}fromJSON(W){super.fromJSON(W),this.autoClose=W.autoClose,this.curves=[];for(let n=0,I=W.curves.length;n<I;n++){const I=W.curves[n];this.curves.push((new dE[I.type]).fromJSON(I))}return this}}class RE extends mE{constructor(W){super(),this.type="Path",this.currentPoint=new CN,W&&this.setFromPoints(W)}setFromPoints(W){this.moveTo(W[0].x,W[0].y);for(let n=1,I=W.length;n<I;n++)this.lineTo(W[n].x,W[n].y);return this}moveTo(W,n){return this.currentPoint.set(W,n),this}lineTo(W,n){const I=new LE(this.currentPoint.clone(),new CN(W,n));return this.curves.push(I),this.currentPoint.set(W,n),this}quadraticCurveTo(W,n,I,h){const q=new OE(this.currentPoint.clone(),new CN(W,n),new CN(I,h));return this.curves.push(q),this.currentPoint.set(I,h),this}bezierCurveTo(W,n,I,h,q,$){const k=new XE(this.currentPoint.clone(),new CN(W,n),new CN(I,h),new CN(q,$));return this.curves.push(k),this.currentPoint.set(q,$),this}splineThru(W){const n=[this.currentPoint.clone()].concat(W),I=new ZE(n);return this.curves.push(I),this.currentPoint.copy(W[W.length-1]),this}arc(W,n,I,h,q,$){const k=this.currentPoint.x,_=this.currentPoint.y;return this.absarc(W+k,n+_,I,h,q,$),this}absarc(W,n,I,h,q,$){return this.absellipse(W,n,I,I,h,q,$),this}ellipse(W,n,I,h,q,$,k,_){const N=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(W+N,n+c,I,h,q,$,k,_),this}absellipse(W,n,I,h,q,$,k,_){const N=new gE(W,n,I,h,q,$,k,_);if(this.curves.length>0){const W=N.getPoint(0);W.equals(this.currentPoint)||this.lineTo(W.x,W.y)}this.curves.push(N);const c=N.getPoint(1);return this.currentPoint.copy(c),this}copy(W){return super.copy(W),this.currentPoint.copy(W.currentPoint),this}toJSON(){const W=super.toJSON();return W.currentPoint=this.currentPoint.toArray(),W}fromJSON(W){return super.fromJSON(W),this.currentPoint.fromArray(W.currentPoint),this}}class eE extends RE{constructor(W){super(W),this.uuid=FN(),this.type="Shape",this.holes=[]}getPointsHoles(W){const n=[];for(let I=0,h=this.holes.length;I<h;I++)n[I]=this.holes[I].getPoints(W);return n}extractPoints(W){return{shape:this.getPoints(W),holes:this.getPointsHoles(W)}}copy(W){super.copy(W),this.holes=[];for(let n=0,I=W.holes.length;n<I;n++){const I=W.holes[n];this.holes.push(I.clone())}return this}toJSON(){const W=super.toJSON();W.uuid=this.uuid,W.holes=[];for(let n=0,I=this.holes.length;n<I;n++){const I=this.holes[n];W.holes.push(I.toJSON())}return W}fromJSON(W){super.fromJSON(W),this.uuid=W.uuid,this.holes=[];for(let n=0,I=W.holes.length;n<I;n++){const I=W.holes[n];this.holes.push((new RE).fromJSON(I))}return this}}function jE(W,n,I,h,q){let $,k;if(q===function(W,n,I,h){let q=0;for(let $=n,k=I-h;$<I;$+=h)q+=(W[k]-W[$])*(W[$+1]+W[k+1]),k=$;return q}(W,n,I,h)>0)for($=n;$<I;$+=h)k=aE($,W[$],W[$+1],k);else for($=I-h;$>=n;$-=h)k=aE($,W[$],W[$+1],k);return k&&pE(k,k.next)&&(JE(k),k=k.next),k}function zE(W,n){if(!W)return W;n||(n=W);let I,h=W;do{if(I=!1,h.steiner||!pE(h,h.next)&&0!==AE(h.prev,h,h.next))h=h.next;else{if(JE(h),h=n=h.prev,h===h.next)break;I=!0}}while(I||h!==n);return n}function vE(W,n,I,h,q,$,k){if(!W)return;!k&&$&&function(W,n,I,h){let q=W;do{0===q.z&&(q.z=yE(q.x,q.y,n,I,h)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next}while(q!==W);q.prevZ.nextZ=null,q.prevZ=null,function(W){let n,I,h,q,$,k,_,N,c=1;do{for(I=W,W=null,$=null,k=0;I;){for(k++,h=I,_=0,n=0;n<c&&(_++,h=h.nextZ,h);n++);for(N=c;_>0||N>0&&h;)0!==_&&(0===N||!h||I.z<=h.z)?(q=I,I=I.nextZ,_--):(q=h,h=h.nextZ,N--),$?$.nextZ=q:W=q,q.prevZ=$,$=q;I=h}$.nextZ=null,c*=2}while(k>1)}(q)}(W,h,q,$);let _,N,c=W;for(;W.prev!==W.next;)if(_=W.prev,N=W.next,$?FE(W,h,q,$):VE(W))n.push(_.i/I|0),n.push(W.i/I|0),n.push(N.i/I|0),JE(W),W=N.next,c=N.next;else if((W=N)===c){k?1===k?vE(W=wE(zE(W),n,I),n,I,h,q,$,2):2===k&&oE(W,n,I,h,q,$):vE(zE(W),n,I,h,q,$,1);break}}function VE(W){const n=W.prev,I=W,h=W.next;if(AE(n,I,h)>=0)return!1;const q=n.x,$=I.x,k=h.x,_=n.y,N=I.y,c=h.y,P=q<$?q<k?q:k:$<k?$:k,S=_<N?_<c?_:c:N<c?N:c,g=q>$?q>k?q:k:$>k?$:k,B=_>N?_>c?_:c:N>c?N:c;let E=h.next;for(;E!==n;){if(E.x>=P&&E.x<=g&&E.y>=S&&E.y<=B&&bE(q,_,$,N,k,c,E.x,E.y)&&AE(E.prev,E,E.next)>=0)return!1;E=E.next}return!0}function FE(W,n,I,h){const q=W.prev,$=W,k=W.next;if(AE(q,$,k)>=0)return!1;const _=q.x,N=$.x,c=k.x,P=q.y,S=$.y,g=k.y,B=_<N?_<c?_:c:N<c?N:c,E=P<S?P<g?P:g:S<g?S:g,u=_>N?_>c?_:c:N>c?N:c,Y=P>S?P>g?P:g:S>g?S:g,f=yE(B,E,n,I,h),r=yE(u,Y,n,I,h);let K=W.prevZ,t=W.nextZ;for(;K&&K.z>=f&&t&&t.z<=r;){if(K.x>=B&&K.x<=u&&K.y>=E&&K.y<=Y&&K!==q&&K!==k&&bE(_,P,N,S,c,g,K.x,K.y)&&AE(K.prev,K,K.next)>=0)return!1;if(K=K.prevZ,t.x>=B&&t.x<=u&&t.y>=E&&t.y<=Y&&t!==q&&t!==k&&bE(_,P,N,S,c,g,t.x,t.y)&&AE(t.prev,t,t.next)>=0)return!1;t=t.nextZ}for(;K&&K.z>=f;){if(K.x>=B&&K.x<=u&&K.y>=E&&K.y<=Y&&K!==q&&K!==k&&bE(_,P,N,S,c,g,K.x,K.y)&&AE(K.prev,K,K.next)>=0)return!1;K=K.prevZ}for(;t&&t.z<=r;){if(t.x>=B&&t.x<=u&&t.y>=E&&t.y<=Y&&t!==q&&t!==k&&bE(_,P,N,S,c,g,t.x,t.y)&&AE(t.prev,t,t.next)>=0)return!1;t=t.nextZ}return!0}function wE(W,n,I){let h=W;do{const q=h.prev,$=h.next.next;!pE(q,$)&&iE(q,h,h.next,$)&&TE(q,$)&&TE($,q)&&(n.push(q.i/I|0),n.push(h.i/I|0),n.push($.i/I|0),JE(h),JE(h.next),h=W=$),h=h.next}while(h!==W);return zE(h)}function oE(W,n,I,h,q,$){let k=W;do{let W=k.next.next;for(;W!==k.prev;){if(k.i!==W.i&&lE(k,W)){let _=HE(k,W);return k=zE(k,k.next),_=zE(_,_.next),vE(k,n,I,h,q,$,0),void vE(_,n,I,h,q,$,0)}W=W.next}k=k.next}while(k!==W)}function DE(W,n){return W.x-n.x}function xE(W,n){const I=function(W,n){let I,h=n,q=-1/0;const $=W.x,k=W.y;do{if(k<=h.y&&k>=h.next.y&&h.next.y!==h.y){const W=h.x+(k-h.y)*(h.next.x-h.x)/(h.next.y-h.y);if(W<=$&&W>q&&(q=W,I=h.x<h.next.x?h:h.next,W===$))return I}h=h.next}while(h!==n);if(!I)return null;const _=I,N=I.x,c=I.y;let P,S=1/0;h=I;do{$>=h.x&&h.x>=N&&$!==h.x&&bE(k<c?$:q,k,N,c,k<c?q:$,k,h.x,h.y)&&(P=Math.abs(k-h.y)/($-h.x),TE(h,W)&&(P<S||P===S&&(h.x>I.x||h.x===I.x&&GE(I,h)))&&(I=h,S=P)),h=h.next}while(h!==_);return I}(W,n);if(!I)return n;const h=HE(I,W);return zE(h,h.next),zE(I,I.next)}function GE(W,n){return AE(W.prev,W,n.prev)<0&&AE(n.next,W,W.next)<0}function yE(W,n,I,h,q){return(W=1431655765&((W=858993459&((W=252645135&((W=16711935&((W=(W-I)*q|0)|W<<8))|W<<4))|W<<2))|W<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*q|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function CE(W){let n=W,I=W;do{(n.x<I.x||n.x===I.x&&n.y<I.y)&&(I=n),n=n.next}while(n!==W);return I}function bE(W,n,I,h,q,$,k,_){return(q-k)*(n-_)>=(W-k)*($-_)&&(W-k)*(h-_)>=(I-k)*(n-_)&&(I-k)*($-_)>=(q-k)*(h-_)}function lE(W,n){return W.next.i!==n.i&&W.prev.i!==n.i&&!function(W,n){let I=W;do{if(I.i!==W.i&&I.next.i!==W.i&&I.i!==n.i&&I.next.i!==n.i&&iE(I,I.next,W,n))return!0;I=I.next}while(I!==W);return!1}(W,n)&&(TE(W,n)&&TE(n,W)&&function(W,n){let I=W,h=!1;const q=(W.x+n.x)/2,$=(W.y+n.y)/2;do{I.y>$!=I.next.y>$&&I.next.y!==I.y&&q<(I.next.x-I.x)*($-I.y)/(I.next.y-I.y)+I.x&&(h=!h),I=I.next}while(I!==W);return h}(W,n)&&(AE(W.prev,W,n.prev)||AE(W,n.prev,n))||pE(W,n)&&AE(W.prev,W,W.next)>0&&AE(n.prev,n,n.next)>0)}function AE(W,n,I){return(n.y-W.y)*(I.x-n.x)-(n.x-W.x)*(I.y-n.y)}function pE(W,n){return W.x===n.x&&W.y===n.y}function iE(W,n,I,h){const q=QE(AE(W,n,I)),$=QE(AE(W,n,h)),k=QE(AE(I,h,W)),_=QE(AE(I,h,n));return q!==$&&k!==_||!(0!==q||!UE(W,I,n))||!(0!==$||!UE(W,h,n))||!(0!==k||!UE(I,W,h))||!(0!==_||!UE(I,n,h))}function UE(W,n,I){return n.x<=Math.max(W.x,I.x)&&n.x>=Math.min(W.x,I.x)&&n.y<=Math.max(W.y,I.y)&&n.y>=Math.min(W.y,I.y)}function QE(W){return W>0?1:W<0?-1:0}function TE(W,n){return AE(W.prev,W,W.next)<0?AE(W,n,W.next)>=0&&AE(W,W.prev,n)>=0:AE(W,n,W.prev)<0||AE(W,W.next,n)<0}function HE(W,n){const I=new sE(W.i,W.x,W.y),h=new sE(n.i,n.x,n.y),q=W.next,$=n.prev;return W.next=n,n.prev=W,I.next=q,q.prev=I,h.next=I,I.prev=h,$.next=h,h.prev=$,h}function aE(W,n,I,h){const q=new sE(W,n,I);return h?(q.next=h.next,q.prev=h,h.next.prev=q,h.next=q):(q.prev=q,q.next=q),q}function JE(W){W.next.prev=W.prev,W.prev.next=W.next,W.prevZ&&(W.prevZ.nextZ=W.nextZ),W.nextZ&&(W.nextZ.prevZ=W.prevZ)}function sE(W,n,I){this.i=W,this.x=n,this.y=I,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class ME{static area(W){const n=W.length;let I=0;for(let h=n-1,q=0;q<n;h=q++)I+=W[h].x*W[q].y-W[q].x*W[h].y;return.5*I}static isClockWise(W){return ME.area(W)<0}static triangulateShape(W,n){const I=[],h=[],q=[];Wu(W),nu(I,W);let $=W.length;n.forEach(Wu);for(let W=0;W<n.length;W++)h.push($),$+=n[W].length,nu(I,n[W]);const k=function(W,n,I=2){const h=n&&n.length,q=h?n[0]*I:W.length;let $=jE(W,0,q,I,!0);const k=[];if(!$||$.next===$.prev)return k;let _,N,c,P,S,g,B;if(h&&($=function(W,n,I,h){const q=[];let $,k,_,N,c;for($=0,k=n.length;$<k;$++)_=n[$]*h,N=$<k-1?n[$+1]*h:W.length,c=jE(W,_,N,h,!1),c===c.next&&(c.steiner=!0),q.push(CE(c));for(q.sort(DE),$=0;$<q.length;$++)I=xE(q[$],I);return I}(W,n,$,I)),W.length>80*I){_=c=W[0],N=P=W[1];for(let n=I;n<q;n+=I)S=W[n],g=W[n+1],S<_&&(_=S),g<N&&(N=g),S>c&&(c=S),g>P&&(P=g);B=Math.max(c-_,P-N),B=0!==B?32767/B:0}return vE($,k,I,_,N,B,0),k}(I,h);for(let W=0;W<k.length;W+=3)q.push(k.slice(W,W+3));return q}}function Wu(W){const n=W.length;n>2&&W[n-1].equals(W[0])&&W.pop()}function nu(W,n){for(let I=0;I<n.length;I++)W.push(n[I].x),W.push(n[I].y)}function Iu(W,n,I){return qu(W)?new W.constructor(W.subarray(n,void 0!==I?I:W.length)):W.slice(n,I)}function hu(W,n,I){return!W||!I&&W.constructor===n?W:"number"==typeof n.BYTES_PER_ELEMENT?new n(W):Array.prototype.slice.call(W)}function qu(W){return ArrayBuffer.isView(W)&&!(W instanceof DataView)}class $u{constructor(W,n,I,h){this.parameterPositions=W,this._cachedIndex=0,this.resultBuffer=void 0!==h?h:new n.constructor(I),this.sampleValues=n,this.valueSize=I,this.settings=null,this.DefaultSettings_={}}evaluate(W){const n=this.parameterPositions;let I=this._cachedIndex,h=n[I],q=n[I-1];W:{n:{let $;I:{h:if(!(W<h)){for(let $=I+2;;){if(void 0===h){if(W<q)break h;return I=n.length,this._cachedIndex=I,this.copySampleValue_(I-1)}if(I===$)break;if(q=h,h=n[++I],W<h)break n}$=n.length;break I}if(W>=q)break W;{const k=n[1];W<k&&(I=2,q=k);for(let $=I-2;;){if(void 0===q)return this._cachedIndex=0,this.copySampleValue_(0);if(I===$)break;if(h=q,q=n[--I-1],W>=q)break n}$=I,I=0}}for(;I<$;){const h=I+$>>>1;W<n[h]?$=h:I=h+1}if(h=n[I],q=n[I-1],void 0===q)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===h)return I=n.length,this._cachedIndex=I,this.copySampleValue_(I-1)}this._cachedIndex=I,this.intervalChanged_(I,q,h)}return this.interpolate_(I,q,W,h)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(W){const n=this.resultBuffer,I=this.sampleValues,h=this.valueSize,q=W*h;for(let W=0;W!==h;++W)n[W]=I[q+W];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ku extends $u{constructor(W,n,I,h){super(W,n,I,h),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(W,n,I){const h=this.parameterPositions;let q=W-2,$=W+1,k=h[q],_=h[$];if(void 0===k)switch(this.getSettings_().endingStart){case 2401:q=W,k=2*n-I;break;case 2402:q=h.length-2,k=n+h[q]-h[q+1];break;default:q=W,k=I}if(void 0===_)switch(this.getSettings_().endingEnd){case 2401:$=W,_=2*I-n;break;case 2402:$=1,_=I+h[1]-h[0];break;default:$=W-1,_=n}const N=.5*(I-n),c=this.valueSize;this._weightPrev=N/(n-k),this._weightNext=N/(_-I),this._offsetPrev=q*c,this._offsetNext=$*c}interpolate_(W,n,I,h){const q=this.resultBuffer,$=this.sampleValues,k=this.valueSize,_=W*k,N=_-k,c=this._offsetPrev,P=this._offsetNext,S=this._weightPrev,g=this._weightNext,B=(I-n)/(h-n),E=B*B,u=E*B,Y=-S*u+2*S*E-S*B,f=(1+S)*u+(-1.5-2*S)*E+(-.5+S)*B+1,r=(-1-g)*u+(1.5+g)*E+.5*B,K=g*u-g*E;for(let W=0;W!==k;++W)q[W]=Y*$[c+W]+f*$[N+W]+r*$[_+W]+K*$[P+W];return q}}class _u extends $u{constructor(W,n,I,h){super(W,n,I,h)}interpolate_(W,n,I,h){const q=this.resultBuffer,$=this.sampleValues,k=this.valueSize,_=W*k,N=_-k,c=(I-n)/(h-n),P=1-c;for(let W=0;W!==k;++W)q[W]=$[N+W]*P+$[_+W]*c;return q}}class Nu extends $u{constructor(W,n,I,h){super(W,n,I,h)}interpolate_(W){return this.copySampleValue_(W-1)}}class cu{constructor(W,n,I,h){if(void 0===W)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+W);this.name=W,this.times=hu(n,this.TimeBufferType),this.values=hu(I,this.ValueBufferType),this.setInterpolation(h||this.DefaultInterpolation)}static toJSON(W){const n=W.constructor;let I;if(n.toJSON!==this.toJSON)I=n.toJSON(W);else{I={name:W.name,times:hu(W.times,Array),values:hu(W.values,Array)};const n=W.getInterpolation();n!==W.DefaultInterpolation&&(I.interpolation=n)}return I.type=W.ValueTypeName,I}InterpolantFactoryMethodDiscrete(W){return new Nu(this.times,this.values,this.getValueSize(),W)}InterpolantFactoryMethodLinear(W){return new _u(this.times,this.values,this.getValueSize(),W)}InterpolantFactoryMethodSmooth(W){return new ku(this.times,this.values,this.getValueSize(),W)}setInterpolation(W){let n;switch(W){case 2300:n=this.InterpolantFactoryMethodDiscrete;break;case 2301:n=this.InterpolantFactoryMethodLinear;break;case 2302:n=this.InterpolantFactoryMethodSmooth}if(void 0===n){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(W===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(W){if(0!==W){const n=this.times;for(let I=0,h=n.length;I!==h;++I)n[I]+=W}return this}scale(W){if(1!==W){const n=this.times;for(let I=0,h=n.length;I!==h;++I)n[I]*=W}return this}trim(W,n){const I=this.times,h=I.length;let q=0,$=h-1;for(;q!==h&&I[q]<W;)++q;for(;-1!==$&&I[$]>n;)--$;if(++$,0!==q||$!==h){q>=$&&($=Math.max($,1),q=$-1);const W=this.getValueSize();this.times=Iu(I,q,$),this.values=Iu(this.values,q*W,$*W)}return this}validate(){let W=!0;const n=this.getValueSize();n-Math.floor(n)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),W=!1);const I=this.times,h=this.values,q=I.length;0===q&&(console.error("THREE.KeyframeTrack: Track is empty.",this),W=!1);let $=null;for(let n=0;n!==q;n++){const h=I[n];if("number"==typeof h&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,n,h),W=!1;break}if(null!==$&&$>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,n,h,$),W=!1;break}$=h}if(void 0!==h&&qu(h))for(let n=0,I=h.length;n!==I;++n){const I=h[n];if(isNaN(I)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,n,I),W=!1;break}}return W}optimize(){const W=Iu(this.times),n=Iu(this.values),I=this.getValueSize(),h=2302===this.getInterpolation(),q=W.length-1;let $=1;for(let k=1;k<q;++k){let q=!1;const _=W[k];if(_!==W[k+1]&&(1!==k||_!==W[0]))if(h)q=!0;else{const W=k*I,h=W-I,$=W+I;for(let k=0;k!==I;++k){const I=n[W+k];if(I!==n[h+k]||I!==n[$+k]){q=!0;break}}}if(q){if(k!==$){W[$]=W[k];const h=k*I,q=$*I;for(let W=0;W!==I;++W)n[q+W]=n[h+W]}++$}}if(q>0){W[$]=W[q];for(let W=q*I,h=$*I,k=0;k!==I;++k)n[h+k]=n[W+k];++$}return $!==W.length?(this.times=Iu(W,0,$),this.values=Iu(n,0,$*I)):(this.times=W,this.values=n),this}clone(){const W=Iu(this.times,0),n=Iu(this.values,0),I=new(0,this.constructor)(this.name,W,n);return I.createInterpolant=this.createInterpolant,I}}cu.prototype.TimeBufferType=Float32Array,cu.prototype.ValueBufferType=Float32Array,cu.prototype.DefaultInterpolation=2301;class Pu extends cu{}Pu.prototype.ValueTypeName="bool",Pu.prototype.ValueBufferType=Array,Pu.prototype.DefaultInterpolation=2300,Pu.prototype.InterpolantFactoryMethodLinear=void 0,Pu.prototype.InterpolantFactoryMethodSmooth=void 0,class extends cu{}.prototype.ValueTypeName="color",class extends cu{}.prototype.ValueTypeName="number";class Su extends $u{constructor(W,n,I,h){super(W,n,I,h)}interpolate_(W,n,I,h){const q=this.resultBuffer,$=this.sampleValues,k=this.valueSize,_=(I-n)/(h-n);let N=W*k;for(let W=N+k;N!==W;N+=4)Sc.slerpFlat(q,0,$,N-k,$,N,_);return q}}class gu extends cu{InterpolantFactoryMethodLinear(W){return new Su(this.times,this.values,this.getValueSize(),W)}}gu.prototype.ValueTypeName="quaternion",gu.prototype.DefaultInterpolation=2301,gu.prototype.InterpolantFactoryMethodSmooth=void 0;class Bu extends cu{}Bu.prototype.ValueTypeName="string",Bu.prototype.ValueBufferType=Array,Bu.prototype.DefaultInterpolation=2300,Bu.prototype.InterpolantFactoryMethodLinear=void 0,Bu.prototype.InterpolantFactoryMethodSmooth=void 0,class extends cu{}.prototype.ValueTypeName="vector";const Eu={enabled:!1,files:{},add:function(W,n){!1!==this.enabled&&(this.files[W]=n)},get:function(W){if(!1!==this.enabled)return this.files[W]},remove:function(W){delete this.files[W]},clear:function(){this.files={}}},uu=new class{constructor(W,n,I){const h=this;let q,$=!1,k=0,_=0;const N=[];this.onStart=void 0,this.onLoad=W,this.onProgress=n,this.onError=I,this.itemStart=function(W){_++,!1===$&&void 0!==h.onStart&&h.onStart(W,k,_),$=!0},this.itemEnd=function(W){k++,void 0!==h.onProgress&&h.onProgress(W,k,_),k===_&&($=!1,void 0!==h.onLoad&&h.onLoad())},this.itemError=function(W){void 0!==h.onError&&h.onError(W)},this.resolveURL=function(W){return q?q(W):W},this.setURLModifier=function(W){return q=W,this},this.addHandler=function(W,n){return N.push(W,n),this},this.removeHandler=function(W){const n=N.indexOf(W);return-1!==n&&N.splice(n,2),this},this.getHandler=function(W){for(let n=0,I=N.length;n<I;n+=2){const I=N[n],h=N[n+1];if(I.global&&(I.lastIndex=0),I.test(W))return h}return null}}};class Yu{constructor(W){this.manager=void 0!==W?W:uu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(W,n){const I=this;return new Promise((function(h,q){I.load(W,h,n,q)}))}parse(){}setCrossOrigin(W){return this.crossOrigin=W,this}setWithCredentials(W){return this.withCredentials=W,this}setPath(W){return this.path=W,this}setResourcePath(W){return this.resourcePath=W,this}setRequestHeader(W){return this.requestHeader=W,this}}Yu.DEFAULT_MATERIAL_NAME="__DEFAULT";const fu={};class ru extends Error{constructor(W,n){super(W),this.response=n}}class Ku extends Yu{constructor(W){super(W)}load(W,n,I,h){void 0===W&&(W=""),void 0!==this.path&&(W=this.path+W),W=this.manager.resolveURL(W);const q=Eu.get(W);if(void 0!==q)return this.manager.itemStart(W),setTimeout((()=>{n&&n(q),this.manager.itemEnd(W)}),0),q;if(void 0!==fu[W])return void fu[W].push({onLoad:n,onProgress:I,onError:h});fu[W]=[],fu[W].push({onLoad:n,onProgress:I,onError:h});const $=new Request(W,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),k=this.mimeType,_=this.responseType;fetch($).then((n=>{if(200===n.status||0===n.status){if(0===n.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===n.body||void 0===n.body.getReader)return n;const I=fu[W],h=n.body.getReader(),q=n.headers.get("Content-Length")||n.headers.get("X-File-Size"),$=q?parseInt(q):0,k=0!==$;let _=0;const N=new ReadableStream({start(W){!function n(){h.read().then((({done:h,value:q})=>{if(h)W.close();else{_+=q.byteLength;const h=new ProgressEvent("progress",{lengthComputable:k,loaded:_,total:$});for(let W=0,n=I.length;W<n;W++){const n=I[W];n.onProgress&&n.onProgress(h)}W.enqueue(q),n()}}))}()}});return new Response(N)}throw new ru(`fetch for "${n.url}" responded with ${n.status}: ${n.statusText}`,n)})).then((W=>{switch(_){case"arraybuffer":return W.arrayBuffer();case"blob":return W.blob();case"document":return W.text().then((W=>(new DOMParser).parseFromString(W,k)));case"json":return W.json();default:if(void 0===k)return W.text();{const n=/charset="?([^;"\s]*)"?/i.exec(k),I=n&&n[1]?n[1].toLowerCase():void 0,h=new TextDecoder(I);return W.arrayBuffer().then((W=>h.decode(W)))}}})).then((n=>{Eu.add(W,n);const I=fu[W];delete fu[W];for(let W=0,h=I.length;W<h;W++){const h=I[W];h.onLoad&&h.onLoad(n)}})).catch((n=>{const I=fu[W];if(void 0===I)throw this.manager.itemError(W),n;delete fu[W];for(let W=0,h=I.length;W<h;W++){const h=I[W];h.onError&&h.onError(n)}this.manager.itemError(W)})).finally((()=>{this.manager.itemEnd(W)})),this.manager.itemStart(W)}setResponseType(W){return this.responseType=W,this}setMimeType(W){return this.mimeType=W,this}}class tu{constructor(W=!0){this.autoStart=W,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Xu(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let W=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=Xu();W=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=W}return W}}function Xu(){return("undefined"==typeof performance?Date:performance).now()}const Lu=new RegExp("[\\[\\]\\.:\\/]","g"),Ou="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Zu=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]")+/(WCOD+)?/.source.replace("WCOD",Ou)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]")+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]")+"$"),du=["material","materials","bones","map"];class mu{constructor(W,n,I){this.path=n,this.parsedPath=I||mu.parseTrackName(n),this.node=mu.findNode(W,this.parsedPath.nodeName),this.rootNode=W,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(W,n,I){return W&&W.isAnimationObjectGroup?new mu.Composite(W,n,I):new mu(W,n,I)}static sanitizeNodeName(W){return W.replace(/\s/g,"_").replace(Lu,"")}static parseTrackName(W){const n=Zu.exec(W);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+W);const I={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},h=I.nodeName&&I.nodeName.lastIndexOf(".");if(void 0!==h&&-1!==h){const W=I.nodeName.substring(h+1);-1!==du.indexOf(W)&&(I.nodeName=I.nodeName.substring(0,h),I.objectName=W)}if(null===I.propertyName||0===I.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+W);return I}static findNode(W,n){if(void 0===n||""===n||"."===n||-1===n||n===W.name||n===W.uuid)return W;if(W.skeleton){const I=W.skeleton.getBoneByName(n);if(void 0!==I)return I}if(W.children){const I=function(W){for(let h=0;h<W.length;h++){const q=W[h];if(q.name===n||q.uuid===n)return q;const $=I(q.children);if($)return $}return null},h=I(W.children);if(h)return h}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(W,n){W[n]=this.targetObject[this.propertyName]}_getValue_array(W,n){const I=this.resolvedProperty;for(let h=0,q=I.length;h!==q;++h)W[n++]=I[h]}_getValue_arrayElement(W,n){W[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(W,n){this.resolvedProperty.toArray(W,n)}_setValue_direct(W,n){this.targetObject[this.propertyName]=W[n]}_setValue_direct_setNeedsUpdate(W,n){this.targetObject[this.propertyName]=W[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(W,n){this.targetObject[this.propertyName]=W[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(W,n){const I=this.resolvedProperty;for(let h=0,q=I.length;h!==q;++h)I[h]=W[n++]}_setValue_array_setNeedsUpdate(W,n){const I=this.resolvedProperty;for(let h=0,q=I.length;h!==q;++h)I[h]=W[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(W,n){const I=this.resolvedProperty;for(let h=0,q=I.length;h!==q;++h)I[h]=W[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(W,n){this.resolvedProperty[this.propertyIndex]=W[n]}_setValue_arrayElement_setNeedsUpdate(W,n){this.resolvedProperty[this.propertyIndex]=W[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(W,n){this.resolvedProperty[this.propertyIndex]=W[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(W,n){this.resolvedProperty.fromArray(W,n)}_setValue_fromArray_setNeedsUpdate(W,n){this.resolvedProperty.fromArray(W,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(W,n){this.resolvedProperty.fromArray(W,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(W,n){this.bind(),this.getValue(W,n)}_setValue_unbound(W,n){this.bind(),this.setValue(W,n)}bind(){let W=this.node;const n=this.parsedPath,I=n.objectName,h=n.propertyName;let q=n.propertyIndex;if(W||(W=mu.findNode(this.rootNode,n.nodeName),this.node=W),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!W)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(I){let h=n.objectIndex;switch(I){case"materials":if(!W.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!W.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);W=W.material.materials;break;case"bones":if(!W.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);W=W.skeleton.bones;for(let n=0;n<W.length;n++)if(W[n].name===h){h=n;break}break;case"map":if("map"in W){W=W.map;break}if(!W.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!W.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);W=W.material.map;break;default:if(void 0===W[I])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);W=W[I]}if(void 0!==h){if(void 0===W[h])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,W);W=W[h]}}const $=W[h];if(void 0===$){const I=n.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+I+"."+h+" but it wasn't found.",W)}let k=this.Versioning.None;this.targetObject=W,void 0!==W.needsUpdate?k=this.Versioning.NeedsUpdate:void 0!==W.matrixWorldNeedsUpdate&&(k=this.Versioning.MatrixWorldNeedsUpdate);let _=this.BindingType.Direct;if(void 0!==q){if("morphTargetInfluences"===h){if(!W.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!W.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==W.morphTargetDictionary[q]&&(q=W.morphTargetDictionary[q])}_=this.BindingType.ArrayElement,this.resolvedProperty=$,this.propertyIndex=q}else void 0!==$.fromArray&&void 0!==$.toArray?(_=this.BindingType.HasFromToArray,this.resolvedProperty=$):Array.isArray($)?(_=this.BindingType.EntireArray,this.resolvedProperty=$):this.propertyName=h;this.getValue=this.GetterByBindingType[_],this.setValue=this.SetterByBindingTypeAndVersioning[_][k]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}mu.Composite=class{constructor(W,n,I){const h=I||mu.parseTrackName(n);this._targetGroup=W,this._bindings=W.subscribe_(n,h)}getValue(W,n){this.bind();const I=this._targetGroup.nCachedObjects_,h=this._bindings[I];void 0!==h&&h.getValue(W,n)}setValue(W,n){const I=this._bindings;for(let h=this._targetGroup.nCachedObjects_,q=I.length;h!==q;++h)I[h].setValue(W,n)}bind(){const W=this._bindings;for(let n=this._targetGroup.nCachedObjects_,I=W.length;n!==I;++n)W[n].bind()}unbind(){const W=this._bindings;for(let n=this._targetGroup.nCachedObjects_,I=W.length;n!==I;++n)W[n].unbind()}},mu.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},mu.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},mu.prototype.GetterByBindingType=[mu.prototype._getValue_direct,mu.prototype._getValue_array,mu.prototype._getValue_arrayElement,mu.prototype._getValue_toArray],mu.prototype.SetterByBindingTypeAndVersioning=[[mu.prototype._setValue_direct,mu.prototype._setValue_direct_setNeedsUpdate,mu.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[mu.prototype._setValue_array,mu.prototype._setValue_array_setNeedsUpdate,mu.prototype._setValue_array_setMatrixWorldNeedsUpdate],[mu.prototype._setValue_arrayElement,mu.prototype._setValue_arrayElement_setNeedsUpdate,mu.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[mu.prototype._setValue_fromArray,mu.prototype._setValue_fromArray_setNeedsUpdate,mu.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);const Ru=new CN;class eu{constructor(W=new CN(1/0,1/0),n=new CN(-1/0,-1/0)){this.isBox2=!0,this.min=W,this.max=n}set(W,n){return this.min.copy(W),this.max.copy(n),this}setFromPoints(W){this.makeEmpty();for(let n=0,I=W.length;n<I;n++)this.expandByPoint(W[n]);return this}setFromCenterAndSize(W,n){const I=Ru.copy(n).multiplyScalar(.5);return this.min.copy(W).sub(I),this.max.copy(W).add(I),this}clone(){return(new this.constructor).copy(this)}copy(W){return this.min.copy(W.min),this.max.copy(W.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(W){return this.isEmpty()?W.set(0,0):W.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(W){return this.isEmpty()?W.set(0,0):W.subVectors(this.max,this.min)}expandByPoint(W){return this.min.min(W),this.max.max(W),this}expandByVector(W){return this.min.sub(W),this.max.add(W),this}expandByScalar(W){return this.min.addScalar(-W),this.max.addScalar(W),this}containsPoint(W){return!(W.x<this.min.x||W.x>this.max.x||W.y<this.min.y||W.y>this.max.y)}containsBox(W){return this.min.x<=W.min.x&&W.max.x<=this.max.x&&this.min.y<=W.min.y&&W.max.y<=this.max.y}getParameter(W,n){return n.set((W.x-this.min.x)/(this.max.x-this.min.x),(W.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(W){return!(W.max.x<this.min.x||W.min.x>this.max.x||W.max.y<this.min.y||W.min.y>this.max.y)}clampPoint(W,n){return n.copy(W).clamp(this.min,this.max)}distanceToPoint(W){return this.clampPoint(W,Ru).distanceTo(W)}intersect(W){return this.min.max(W.min),this.max.min(W.max),this.isEmpty()&&this.makeEmpty(),this}union(W){return this.min.min(W.min),this.max.max(W.max),this}translate(W){return this.min.add(W),this.max.add(W),this}equals(W){return W.min.equals(this.min)&&W.max.equals(this.max)}}class ju{constructor(){this.type="ShapePath",this.color=new vP,this.subPaths=[],this.currentPath=null}moveTo(W,n){return this.currentPath=new RE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(W,n),this}lineTo(W,n){return this.currentPath.lineTo(W,n),this}quadraticCurveTo(W,n,I,h){return this.currentPath.quadraticCurveTo(W,n,I,h),this}bezierCurveTo(W,n,I,h,q,$){return this.currentPath.bezierCurveTo(W,n,I,h,q,$),this}splineThru(W){return this.currentPath.splineThru(W),this}toShapes(W){function n(W,n){const I=n.length;let h=!1;for(let q=I-1,$=0;$<I;q=$++){let I=n[q],k=n[$],_=k.x-I.x,N=k.y-I.y;if(Math.abs(N)>Number.EPSILON){if(N<0&&(I=n[$],_=-_,k=n[q],N=-N),W.y<I.y||W.y>k.y)continue;if(W.y===I.y){if(W.x===I.x)return!0}else{const n=N*(W.x-I.x)-_*(W.y-I.y);if(0===n)return!0;if(n<0)continue;h=!h}}else{if(W.y!==I.y)continue;if(k.x<=W.x&&W.x<=I.x||I.x<=W.x&&W.x<=k.x)return!0}}return h}const I=ME.isClockWise,h=this.subPaths;if(0===h.length)return[];let q,$,k;const _=[];if(1===h.length)return $=h[0],k=new eE,k.curves=$.curves,_.push(k),_;let N=!I(h[0].getPoints());N=W?!N:N;const c=[],P=[];let S,g,B=[],E=0;P[E]=void 0,B[E]=[];for(let n=0,k=h.length;n<k;n++)$=h[n],S=$.getPoints(),q=I(S),q=W?!q:q,q?(!N&&P[E]&&E++,P[E]={s:new eE,p:S},P[E].s.curves=$.curves,N&&E++,B[E]=[]):B[E].push({h:$,p:S[0]});if(!P[0])return function(W){const n=[];for(let I=0,h=W.length;I<h;I++){const h=W[I],q=new eE;q.curves=h.curves,n.push(q)}return n}(h);if(P.length>1){let W=!1,I=0;for(let W=0,n=P.length;W<n;W++)c[W]=[];for(let h=0,q=P.length;h<q;h++){const q=B[h];for(let $=0;$<q.length;$++){const k=q[$];let _=!0;for(let q=0;q<P.length;q++)n(k.p,P[q].p)&&(h!==q&&I++,_?(_=!1,c[q].push(k)):W=!0);_&&c[h].push(k)}}I>0&&!1===W&&(B=c)}for(let W=0,n=P.length;W<n;W++){k=P[W].s,_.push(k),g=B[W];for(let W=0,n=g.length;W<n;W++)k.holes.push(g[W].h)}return _}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"155"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="155");class zu{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const vu=new pS(-1,1,1,-1,0,1),Vu=new QP;Vu.setAttribute("position",new yP([-1,3,0,-1,-1,0,3,-1,0],3)),Vu.setAttribute("uv",new yP([0,2,0,0,2,0],2));class Fu{constructor(W){this._mesh=new SS(Vu,W)}dispose(){this._mesh.geometry.dispose()}render(W){W.render(this._mesh,vu)}get material(){return this._mesh.material}set material(W){this._mesh.material=W}}const wu={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}"};class ou extends zu{constructor(W,n,I,h){super(),this.renderScene=n,this.renderCamera=I,this.selectedObjects=void 0!==h?h:[],this.visibleEdgeColor=new vP(1,1,1),this.hiddenEdgeColor=new vP(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=void 0!==W?new CN(W.x,W.y):new CN(256,256);const q=Math.round(this.resolution.x/this.downSampleRatio),$=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new cc(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new TB,this.depthMaterial.side=2,this.depthMaterial.depthPacking=3201,this.depthMaterial.blending=0,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=2,this.prepareMaskMaterial.fragmentShader=function(W,n){const I=n.isPerspectiveCamera?"perspective":"orthographic";return W.replace(/DEPTH_TO_VIEW_Z/g,I+"DepthToViewZ")}(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new cc(this.resolution.x,this.resolution.y,{type:1016}),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new cc(q,$,{type:1016}),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new cc(q,$,{type:1016}),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new cc(Math.round(q/2),Math.round($/2),{type:1016}),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new cc(q,$,{type:1016}),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new cc(Math.round(q/2),Math.round($/2),{type:1016}),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1,this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value.set(q,$),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(q/2),Math.round($/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial();const k=wu;this.copyUniforms=fS.clone(k.uniforms),this.materialCopy=new rS({uniforms:this.copyUniforms,vertexShader:k.vertexShader,fragmentShader:k.fragmentShader,blending:0,depthTest:!1,depthWrite:!1}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new vP,this.oldClearAlpha=1,this.fsQuad=new Fu(null),this.tempPulseColor1=new vP,this.tempPulseColor2=new vP,this.textureMatrix=new bc}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(W,n){this.renderTargetMaskBuffer.setSize(W,n),this.renderTargetDepthBuffer.setSize(W,n);let I=Math.round(W/this.downSampleRatio),h=Math.round(n/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(I,h),this.renderTargetBlurBuffer1.setSize(I,h),this.renderTargetEdgeBuffer1.setSize(I,h),this.separableBlurMaterial1.uniforms.texSize.value.set(I,h),I=Math.round(I/2),h=Math.round(h/2),this.renderTargetBlurBuffer2.setSize(I,h),this.renderTargetEdgeBuffer2.setSize(I,h),this.separableBlurMaterial2.uniforms.texSize.value.set(I,h)}changeVisibilityOfSelectedObjects(W){const n=this._visibilityCache;function I(I){I.isMesh&&(!0===W?I.visible=n.get(I):(n.set(I,I.visible),I.visible=W))}for(let W=0;W<this.selectedObjects.length;W++)this.selectedObjects[W].traverse(I)}changeVisibilityOfNonSelectedObjects(W){const n=this._visibilityCache,I=[];function h(W){W.isMesh&&I.push(W)}for(let W=0;W<this.selectedObjects.length;W++)this.selectedObjects[W].traverse(h);this.renderScene.traverse((function(h){if(h.isMesh||h.isSprite){let q=!1;for(let W=0;W<I.length;W++)if(I[W].id===h.id){q=!0;break}if(!1===q){const I=h.visible;!1!==W&&!0!==n.get(h)||(h.visible=W),n.set(h,I)}}else(h.isPoints||h.isLine)&&(!0===W?h.visible=n.get(h):(n.set(h,h.visible),h.visible=W))}))}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(W,n,I,h,q){if(this.selectedObjects.length>0){W.getClearColor(this._oldClearColor),this.oldClearAlpha=W.getClearAlpha();const n=W.autoClear;W.autoClear=!1,q&&W.state.buffers.stencil.setTest(!1),W.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const h=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,W.setRenderTarget(this.renderTargetDepthBuffer),W.clear(),W.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,W.setRenderTarget(this.renderTargetMaskBuffer),W.clear(),W.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=h,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,W.setRenderTarget(this.renderTargetMaskDownSampleBuffer),W.clear(),this.fsQuad.render(W),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const W=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(W),this.tempPulseColor2.multiplyScalar(W)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,W.setRenderTarget(this.renderTargetEdgeBuffer1),W.clear(),this.fsQuad.render(W),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=ou.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,W.setRenderTarget(this.renderTargetBlurBuffer1),W.clear(),this.fsQuad.render(W),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=ou.BlurDirectionY,W.setRenderTarget(this.renderTargetEdgeBuffer1),W.clear(),this.fsQuad.render(W),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=ou.BlurDirectionX,W.setRenderTarget(this.renderTargetBlurBuffer2),W.clear(),this.fsQuad.render(W),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=ou.BlurDirectionY,W.setRenderTarget(this.renderTargetEdgeBuffer2),W.clear(),this.fsQuad.render(W),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,q&&W.state.buffers.stencil.setTest(!0),W.setRenderTarget(I),this.fsQuad.render(W),W.setClearColor(this._oldClearColor,this.oldClearAlpha),W.autoClear=n}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=I.texture,W.setRenderTarget(null),this.fsQuad.render(W))}getPrepareMaskMaterial(){return new rS({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new CN(.5,.5)},textureMatrix:{value:null}},vertexShader:"#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <morphtarget_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t\tvPosition = mvPosition;\n\n\t\t\t\t\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t\t\t\t\t#ifdef USE_INSTANCING\n\n\t\t\t\t\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t\t\t\t\t#endif\n\t\t\t\t\t\n\t\t\t\t\tworldPosition = modelMatrix * worldPosition;\n\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\n\t\t\t\t}",fragmentShader:"#include <packing>\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n\t\t\t\t\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n\n\t\t\t\t}"})}getEdgeDetectionMaterial(){return new rS({uniforms:{maskTexture:{value:null},texSize:{value:new CN(.5,.5)},visibleEdgeColor:{value:new gc(1,1,1)},hiddenEdgeColor:{value:new gc(1,1,1)}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec3 visibleEdgeColor;\n\t\t\t\tuniform vec3 hiddenEdgeColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n\t\t\t\t}"})}getSeperableBlurMaterial(W){return new rS({defines:{MAX_RADIUS:W},uniforms:{colorTexture:{value:null},texSize:{value:new CN(.5,.5)},direction:{value:new CN(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float kernelRadius;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat sigma = kernelRadius/2.0;\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, sigma);\n\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n\t\t\t\t\tvec2 uvOffset = delta;\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = kernelRadius * float(i) / float(MAX_RADIUS);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, sigma);\n\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\t\t\tuvOffset += delta;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})}getOverlayMaterial(){return new rS({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform sampler2D edgeTexture1;\n\t\t\t\tuniform sampler2D edgeTexture2;\n\t\t\t\tuniform sampler2D patternTexture;\n\t\t\t\tuniform float edgeStrength;\n\t\t\t\tuniform float edgeGlow;\n\t\t\t\tuniform bool usePatternTexture;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n\t\t\t\t\tif(usePatternTexture)\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n\t\t\t\t\tgl_FragColor = finalColor;\n\t\t\t\t}",blending:2,depthTest:!1,depthWrite:!1,transparent:!0})}}ou.BlurDirectionX=new CN(1,0),ou.BlurDirectionY=new CN(0,1);class Du{constructor(W=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let n=0;n<256;n++)this.p[n]=Math.floor(256*W.random());this.perm=[];for(let W=0;W<512;W++)this.perm[W]=this.p[255&W];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(W,n,I){return W[0]*n+W[1]*I}dot3(W,n,I,h){return W[0]*n+W[1]*I+W[2]*h}dot4(W,n,I,h,q){return W[0]*n+W[1]*I+W[2]*h+W[3]*q}noise(W,n){let I,h,q;const $=(W+n)*(.5*(Math.sqrt(3)-1)),k=Math.floor(W+$),_=Math.floor(n+$),N=(3-Math.sqrt(3))/6,c=(k+_)*N,P=W-(k-c),S=n-(_-c);let g,B;P>S?(g=1,B=0):(g=0,B=1);const E=P-g+N,u=S-B+N,Y=P-1+2*N,f=S-1+2*N,r=255&k,K=255&_,t=this.perm[r+this.perm[K]]%12,X=this.perm[r+g+this.perm[K+B]]%12,L=this.perm[r+1+this.perm[K+1]]%12;let O=.5-P*P-S*S;O<0?I=0:(O*=O,I=O*O*this.dot(this.grad3[t],P,S));let Z=.5-E*E-u*u;Z<0?h=0:(Z*=Z,h=Z*Z*this.dot(this.grad3[X],E,u));let d=.5-Y*Y-f*f;return d<0?q=0:(d*=d,q=d*d*this.dot(this.grad3[L],Y,f)),70*(I+h+q)}noise3d(W,n,I){let h,q,$,k;const _=(W+n+I)*(1/3),N=Math.floor(W+_),c=Math.floor(n+_),P=Math.floor(I+_),S=1/6,g=(N+c+P)*S,B=W-(N-g),E=n-(c-g),u=I-(P-g);let Y,f,r,K,t,X;B>=E?E>=u?(Y=1,f=0,r=0,K=1,t=1,X=0):B>=u?(Y=1,f=0,r=0,K=1,t=0,X=1):(Y=0,f=0,r=1,K=1,t=0,X=1):E<u?(Y=0,f=0,r=1,K=0,t=1,X=1):B<u?(Y=0,f=1,r=0,K=0,t=1,X=1):(Y=0,f=1,r=0,K=1,t=1,X=0);const L=B-Y+S,O=E-f+S,Z=u-r+S,d=B-K+2*S,m=E-t+2*S,R=u-X+2*S,e=B-1+.5,j=E-1+.5,z=u-1+.5,v=255&N,V=255&c,F=255&P,w=this.perm[v+this.perm[V+this.perm[F]]]%12,o=this.perm[v+Y+this.perm[V+f+this.perm[F+r]]]%12,D=this.perm[v+K+this.perm[V+t+this.perm[F+X]]]%12,x=this.perm[v+1+this.perm[V+1+this.perm[F+1]]]%12;let G=.6-B*B-E*E-u*u;G<0?h=0:(G*=G,h=G*G*this.dot3(this.grad3[w],B,E,u));let y=.6-L*L-O*O-Z*Z;y<0?q=0:(y*=y,q=y*y*this.dot3(this.grad3[o],L,O,Z));let C=.6-d*d-m*m-R*R;C<0?$=0:(C*=C,$=C*C*this.dot3(this.grad3[D],d,m,R));let b=.6-e*e-j*j-z*z;return b<0?k=0:(b*=b,k=b*b*this.dot3(this.grad3[x],e,j,z)),32*(h+q+$+k)}noise4d(W,n,I,h){const q=this.grad4,$=this.simplex,k=this.perm,_=(Math.sqrt(5)-1)/4,N=(5-Math.sqrt(5))/20;let c,P,S,g,B;const E=(W+n+I+h)*_,u=Math.floor(W+E),Y=Math.floor(n+E),f=Math.floor(I+E),r=Math.floor(h+E),K=(u+Y+f+r)*N,t=W-(u-K),X=n-(Y-K),L=I-(f-K),O=h-(r-K),Z=(t>X?32:0)+(t>L?16:0)+(X>L?8:0)+(t>O?4:0)+(X>O?2:0)+(L>O?1:0),d=$[Z][0]>=3?1:0,m=$[Z][1]>=3?1:0,R=$[Z][2]>=3?1:0,e=$[Z][3]>=3?1:0,j=$[Z][0]>=2?1:0,z=$[Z][1]>=2?1:0,v=$[Z][2]>=2?1:0,V=$[Z][3]>=2?1:0,F=$[Z][0]>=1?1:0,w=$[Z][1]>=1?1:0,o=$[Z][2]>=1?1:0,D=$[Z][3]>=1?1:0,x=t-d+N,G=X-m+N,y=L-R+N,C=O-e+N,b=t-j+2*N,l=X-z+2*N,A=L-v+2*N,p=O-V+2*N,i=t-F+3*N,U=X-w+3*N,Q=L-o+3*N,T=O-D+3*N,H=t-1+4*N,a=X-1+4*N,J=L-1+4*N,s=O-1+4*N,M=255&u,WW=255&Y,nW=255&f,IW=255&r,hW=k[M+k[WW+k[nW+k[IW]]]]%32,qW=k[M+d+k[WW+m+k[nW+R+k[IW+e]]]]%32,$W=k[M+j+k[WW+z+k[nW+v+k[IW+V]]]]%32,kW=k[M+F+k[WW+w+k[nW+o+k[IW+D]]]]%32,_W=k[M+1+k[WW+1+k[nW+1+k[IW+1]]]]%32;let NW=.6-t*t-X*X-L*L-O*O;NW<0?c=0:(NW*=NW,c=NW*NW*this.dot4(q[hW],t,X,L,O));let cW=.6-x*x-G*G-y*y-C*C;cW<0?P=0:(cW*=cW,P=cW*cW*this.dot4(q[qW],x,G,y,C));let PW=.6-b*b-l*l-A*A-p*p;PW<0?S=0:(PW*=PW,S=PW*PW*this.dot4(q[$W],b,l,A,p));let SW=.6-i*i-U*U-Q*Q-T*T;SW<0?g=0:(SW*=SW,g=SW*SW*this.dot4(q[kW],i,U,Q,T));let gW=.6-H*H-a*a-J*J-s*s;return gW<0?B=0:(gW*=gW,B=gW*gW*this.dot4(q[_W],H,a,J,s)),27*(c+P+S+g+B)}}var xu;!function(W){W.Main="main",W.Branch="branch",W.Shadow="shadow"}(xu||(xu={}));const Gu=new gc,yu=new gc,Cu=new gc;function bu(W){const n=W.segments[W.segments.length-1];Gu.subVectors(W.props.points[W.props.points.length-1],n.p1).normalize();const I=25+100*Math.random(),h=Math.random()>.5?1:-1;yu.set(-Gu.y,Gu.x,0).multiplyScalar(I*h),Cu.addVectors(W.props.points[W.props.points.length-1],yu),W.generateSegments({points:[n.p1,Cu.clone()],type:xu.Branch,radius0:n.r1,radius1:W.props.branch.radius1,lid:0,branchDepth:n.level+1})}function lu(W){const n=W.segments[W.segments.length-1];W.generateSegments({points:[W.segments[W.shadow.startIndex].p0,n.p1],type:xu.Shadow,radius0:W.props.shadow.radius0,radius1:W.props.shadow.radius1,branchDepth:0,lid:1}),W.shadow.startIndex=W.segments.length}class Au{constructor(W){this.segments=[],this.shadow={startIndex:0,spacing:0},this.segmentIndex=0,this.segmentsIndex=0,this.props=Au.prepareProps(W),this.name=W.name,this.noise={[xu.Main]:new Du(this.props.seedGenerator),[xu.Branch]:new Du(this.props.seedGenerator),[xu.Shadow]:new Du(this.props.seedGenerator)},this.generateSegments({lid:0,branchDepth:0,points:W.points,radius0:W.main.radius0,radius1:W.main.radius1,type:xu.Main},!0),this.update(0)}update(W){for(const n of this.segments){const I=n.type===xu.Branch?n.level:1,h=this.props[n.type].dispersion/I;n.ignoreNoise||n.p1.set(n.p1default.x+this.noise[n.type].noise3d(n.p1default.x,n.p1default.y,W*this.props[n.type].timeFactor)*h,n.p1default.y+this.noise[n.type].noise3d(n.p1default.y,n.p1default.x,W*this.props[n.type].timeFactor)*h,n.p1default.z)}}generateSegments(W,n=!1){const I=this.segmentsIndex++,h=W.radius1-W.radius0;for(let n=1;n<W.points.length;n++){const q=W.points[n-1],$=W.points[n],k=W.radius0+h*(n-1)/(W.points.length-1),_=W.radius0+h*n/(W.points.length-1),N=this.props[W.type].maxSegmentLength,c=q.distanceTo($);if(c>N){const n=Math.floor(c/N),h=1/(n+1),P=_-k;let S=q,g=k;for(let _=1;_<=n;_++){const n=k+P*h*_,N=(new gc).lerpVectors(q,$,h*_);this.addSegment(S,N,g,n,W.branchDepth,I,W.lid,W.type),g=n,S=N}this.addSegment(S,$,g,_,W.branchDepth,I,W.lid,W.type,W.type===xu.Shadow)}else this.addSegment(q,$,k,_,W.branchDepth,I,W.lid,W.type)}n&&(this.segments.length>0&&(this.segments[this.segments.length-1].ignoreNoise=!0),this.shadow.startIndex<this.segments.length-1&&this.tryGenerateShadow(0,!0))}addSegment(W,n,I,h,q,$,k,_,N=!1){this.segments.push({p0:W,p1:n,r0:I,r1:h,pid:$,level:q,lid:k,type:_,p0default:W.clone(),p1default:n.clone(),id:this.segmentIndex++,ignoreNoise:N}),_===xu.Main&&this.tryGenerateShadow(q),this.tryGenerateBranch()}tryGenerateShadow(W,n=!1){0===W&&this.props.shadow.count>0&&(this.shadow.spacing++,(this.shadow.spacing%this.props.shadow.spacing==0||Number.isNaN(this.shadow.spacing%this.props.shadow.spacing)||n)&&(this.props.callback.createShadowBranch(this),this.segments.length>0&&(this.segments[this.segments.length-1].ignoreNoise=!0)))}tryGenerateBranch(){const W=this.segments[this.segments.length-1];W.level<this.props.branch.branchDepth&&W.r1>this.props.branch.branchMinRadiusForBranch<<W.level&&this.props.seedGenerator.random()<this.props.branch.branchProbability&&this.props.callback.createBranch(this)}}Au.prepareProps=function(W){var n,I,h,q,$,k,_,N,c,P,S,g,B,E,u,Y,f,r,K,t,X,L,O,Z,d,m,R,e,j,z,v,V,F,w,o,D,x,G,y,C,b;return{points:W.points,seedGenerator:null!==(n=W.seedGenerator)&&void 0!==n?n:Math,name:W.name,callback:{createBranch:null!==(h=null===(I=W.callback)||void 0===I?void 0:I.createBranch)&&void 0!==h?h:bu,createShadowBranch:null!==($=null===(q=W.callback)||void 0===q?void 0:q.createShadowBranch)&&void 0!==$?$:lu},[xu.Main]:W.main,[xu.Branch]:{branchDepth:null!==(_=null===(k=W[xu.Branch])||void 0===k?void 0:k.branchDepth)&&void 0!==_?_:0,branchLength:null!==(c=null===(N=W[xu.Branch])||void 0===N?void 0:N.branchLength)&&void 0!==c?c:30,branchProbability:null!==(S=null===(P=W[xu.Branch])||void 0===P?void 0:P.branchProbability)&&void 0!==S?S:0,branchDispersionFactor:null!==(B=null===(g=W[xu.Branch])||void 0===g?void 0:g.branchDispersionFactor)&&void 0!==B?B:1,branchMinRadiusForBranch:null!==(u=null===(E=W[xu.Branch])||void 0===E?void 0:E.branchMinRadiusForBranch)&&void 0!==u?u:1,radius0:null!==(f=null===(Y=W[xu.Branch])||void 0===Y?void 0:Y.radius0)&&void 0!==f?f:W[xu.Main].radius0,radius1:null!==(K=null===(r=W[xu.Branch])||void 0===r?void 0:r.radius1)&&void 0!==K?K:W[xu.Main].radius1,branchMaxSegmentLengthFactor:null!==(X=null===(t=W[xu.Branch])||void 0===t?void 0:t.branchMaxSegmentLengthFactor)&&void 0!==X?X:1,dispersion:null!==(O=null===(L=W[xu.Branch])||void 0===L?void 0:L.dispersion)&&void 0!==O?O:W[xu.Main].dispersion,timeFactor:null!==(d=null===(Z=W[xu.Branch])||void 0===Z?void 0:Z.timeFactor)&&void 0!==d?d:W[xu.Main].timeFactor,maxSegmentLength:null!==(R=null===(m=W[xu.Branch])||void 0===m?void 0:m.maxSegmentLength)&&void 0!==R?R:W[xu.Main].maxSegmentLength},[xu.Shadow]:{count:null!==(j=null===(e=W[xu.Shadow])||void 0===e?void 0:e.count)&&void 0!==j?j:0,spacing:null!==(v=null===(z=W[xu.Shadow])||void 0===z?void 0:z.spacing)&&void 0!==v?v:5,radius0:null!==(F=null===(V=W[xu.Shadow])||void 0===V?void 0:V.radius0)&&void 0!==F?F:W[xu.Main].radius0,radius1:null!==(o=null===(w=W[xu.Shadow])||void 0===w?void 0:w.radius1)&&void 0!==o?o:W[xu.Main].radius1,dispersion:null!==(x=null===(D=W[xu.Shadow])||void 0===D?void 0:D.dispersion)&&void 0!==x?x:W[xu.Main].dispersion,timeFactor:null!==(y=null===(G=W[xu.Shadow])||void 0===G?void 0:G.timeFactor)&&void 0!==y?y:W[xu.Main].timeFactor,maxSegmentLength:null!==(b=null===(C=W[xu.Shadow])||void 0===C?void 0:C.maxSegmentLength)&&void 0!==b?b:W[xu.Main].maxSegmentLength}}};const pu=Math.cos(30*Math.PI/180),iu=Math.sin(30*Math.PI/180);class Uu extends Au{constructor(W){super(W),this.pid=-1,this.indicesIndex=0,this.verticesIndex=0,this.prevLightningId=-1,this.side=new gc,this.down=new gc,this.forwards=new gc,this.up=new gc(0,0,1),this.cache=new Map,this.buildVertices=(W=!1)=>{if(0!==this.segments.length){this.pid=this.segments[0].pid;for(const n of this.segments){let I;this.pid!==n.pid&&(this.cache.set(this.pid,this.verticesIndex/3-3),I=this.cache.get(n.pid),this.cache.delete(n.pid)),this.pid=n.pid,this.forwards.subVectors(n.p1,n.p0).normalize(),this.addTriangleVertices(n),W&&this.addIndexes(I)}}},this.addTriangleVertices=W=>{this.prevLightningId!==W.lid&&(this.prevLightningId=W.lid,this.side.crossVectors(this.up,this.forwards).multiplyScalar(pu*W.r0),this.down.copy(this.up).multiplyScalar(-W.r0*iu),this.verticesBuffer[this.verticesIndex++]=W.p0.x-this.side.x+this.down.x,this.verticesBuffer[this.verticesIndex++]=W.p0.y-this.side.y+this.down.y,this.verticesBuffer[this.verticesIndex++]=W.p0.z-this.side.z+this.down.z,this.verticesBuffer[this.verticesIndex++]=W.p0.x+this.side.x+this.down.x,this.verticesBuffer[this.verticesIndex++]=W.p0.y+this.side.y+this.down.y,this.verticesBuffer[this.verticesIndex++]=W.p0.z+this.side.z+this.down.z,this.verticesBuffer[this.verticesIndex++]=W.p0.x+W.r0*this.up.x,this.verticesBuffer[this.verticesIndex++]=W.p0.y+W.r0*this.up.y,this.verticesBuffer[this.verticesIndex++]=W.p0.z+W.r0*this.up.z),this.side.crossVectors(this.up,this.forwards).multiplyScalar(pu*W.r1),this.down.copy(this.up).multiplyScalar(-W.r1*iu),this.verticesBuffer[this.verticesIndex++]=W.p1.x-this.side.x+this.down.x,this.verticesBuffer[this.verticesIndex++]=W.p1.y-this.side.y+this.down.y,this.verticesBuffer[this.verticesIndex++]=W.p1.z-this.side.z+this.down.z,this.verticesBuffer[this.verticesIndex++]=W.p1.x+this.side.x+this.down.x,this.verticesBuffer[this.verticesIndex++]=W.p1.y+this.side.y+this.down.y,this.verticesBuffer[this.verticesIndex++]=W.p1.z+this.side.z+this.down.z,this.verticesBuffer[this.verticesIndex++]=W.p1.x+W.r1*this.up.x,this.verticesBuffer[this.verticesIndex++]=W.p1.y+W.r1*this.up.y,this.verticesBuffer[this.verticesIndex++]=W.p1.z+W.r1*this.up.z},this.addIndexes=W=>{const n=this.verticesIndex/3-6;this.indicesBuffer[this.indicesIndex++]=W?W+1:n+1,this.indicesBuffer[this.indicesIndex++]=W?W+2:n+2,this.indicesBuffer[this.indicesIndex++]=n+5,this.indicesBuffer[this.indicesIndex++]=W?W+1:n+1,this.indicesBuffer[this.indicesIndex++]=n+5,this.indicesBuffer[this.indicesIndex++]=n+4,this.indicesBuffer[this.indicesIndex++]=null!=W?W:n,this.indicesBuffer[this.indicesIndex++]=W?W+1:n+1,this.indicesBuffer[this.indicesIndex++]=n+4,this.indicesBuffer[this.indicesIndex++]=null!=W?W:n,this.indicesBuffer[this.indicesIndex++]=n+4,this.indicesBuffer[this.indicesIndex++]=n+3,this.indicesBuffer[this.indicesIndex++]=W?W+2:n+2,this.indicesBuffer[this.indicesIndex++]=null!=W?W:n,this.indicesBuffer[this.indicesIndex++]=n+3,this.indicesBuffer[this.indicesIndex++]=W?W+2:n+2,this.indicesBuffer[this.indicesIndex++]=n+3,this.indicesBuffer[this.indicesIndex++]=n+5},this.verticesBuffer=new Float32Array(18*this.segments.length+9),this.indicesBuffer=new Uint32Array(36*this.segments.length),this.buildVertices(!0)}update(W){super.update(W),this.verticesIndex=0,this.indicesIndex=0,this.prevLightningId=-1,this.buildVertices()}}var Qu;!function(W){W.Stop="stop",W.Start="start"}(Qu||(Qu={}));class Tu extends Uu{constructor(W,n){var I;super(n),this.state=Qu.Stop,this.appearance={total:0,current:0},this.time=0,this.start=()=>{this.state!==Qu.Start&&(this.outline.enabled=!0,this.mesh.visible=!0,this.state=Qu.Start,this.time=this.lightningThreeProps.scene3d.clock.getElapsedTime(),0===this.lightningThreeProps.appearanceTime&&(this.geometry.setDrawRange(0,this.appearance.total),this.appearance.current=this.appearance.total))},this.stop=()=>{this.outline.enabled=!1,this.mesh.visible=!1,this.state=Qu.Stop,this.geometry.setDrawRange(0,0),this.appearance.current=0},this.dispose=()=>{this.lightningThreeProps.scene3d.removeAnimationCallback(this.update),this.geometry.dispose(),this.material.dispose(),this.lightningThreeProps.outline||(this.lightningThreeProps.scene3d.composer.removePass(this.outline),this.outline.dispose()),this.lightningThreeProps.scene3d.scene.remove(this.mesh)},this.getOutline=()=>{var W;const n=null!==(W=this.lightningThreeProps.outline)&&void 0!==W?W:new ou(new CN(this.lightningThreeProps.scene3d.renderer.domElement.width,this.lightningThreeProps.scene3d.renderer.domElement.height),this.lightningThreeProps.scene3d.scene,this.lightningThreeProps.scene3d.camera);return n.renderToScreen=!0,n.hiddenEdgeColor.set(0),n.selectedObjects.push(this.mesh),n.edgeGlow=this.lightningThreeProps.outlineGlow,n.edgeStrength=this.lightningThreeProps.outlineStrength,n.edgeThickness=this.lightningThreeProps.outlineThickness,n.visibleEdgeColor=this.lightningThreeProps.outlineColor,this.lightningThreeProps.scene3d.composer.passes.includes(n)||this.lightningThreeProps.scene3d.composer.addPass(n),n},this.lightningThreeProps=W,this.geometry=new QP,this.material=new FP({side:2,color:W.color,wireframe:W.wireframe}),this.geometry.setAttribute("position",new DP(this.verticesBuffer,3)),this.geometry.setIndex(new DP(this.indicesBuffer,1)),this.geometry.computeBoundingBox(),this.mesh=new SS(this.geometry,this.material),W.offset&&this.mesh.position.copy(W.offset),this.lightningThreeProps.scene3d.scene.add(this.mesh),this.outline=this.getOutline(),this.outline.enabled=!1,this.mesh.visible=!1,(null===(I=this.geometry.index)||void 0===I?void 0:I.count)&&(this.appearance.total=this.geometry.index.count),this.update=this.update.bind(this),this.lightningThreeProps.scene3d.addAnimationCallback(this.update)}update(W){if(this.state===Qu.Start){super.update(W),this.geometry.attributes.position.needsUpdate=!0;const n=W-this.time;this.appearance.current<this.appearance.total&&(this.appearance.current=Math.trunc(this.appearance.total*n/this.lightningThreeProps.appearanceTime),this.geometry.setDrawRange(0,Math.min(this.appearance.current,this.appearance.total)))}}}class Hu extends Tu{constructor(W,n,I){var h;I&&(n.seedGenerator=(h=.2,{random:()=>h}),W.appearanceTime=0,n.branch&&(n.branch.branchProbability=0),n.shadow&&(n.shadow.count=0)),super(W,n),this.freeze=I}update(W){this.freeze?super.update(0):super.update(W)}}const au=new gc;function Ju(W){const n=W.segments[W.segments.length-1],I=2*(Math.random()-.5),h=2*(Math.random()-.5);au.set(I,h,0).multiplyScalar(W.props.branch.branchLength).add(n.p1),W.generateSegments({points:[n.p1,au.clone()],type:xu.Branch,radius0:n.r1,radius1:W.props.branch.radius1,lid:0,branchDepth:n.level+1})}const su={[p_.Red]:new vP("#ffb3b3"),[p_.Yellow]:new vP("#fff7e2"),[p_.None]:new vP("#000000")},Mu={[p_.Red]:new vP("#ff0000"),[p_.Yellow]:new vP("#FFF1CF"),[p_.None]:new vP("#000000")},WY={callback:{createBranch:Ju},main:{radius0:1,radius1:1,dispersion:.5,timeFactor:3,maxSegmentLength:6}},nY={wireframe:!1,appearanceTime:3,outlineStrength:1.2,outlineGlow:1.5,outlineThickness:2},IY={[EW.t.Portrait]:{[wq.Player0]:{offset:new gc(47,91)},[wq.Player1]:{offset:new gc(81,91)},[wq.Player2]:{offset:new gc(4,94)},[wq.Banker0]:{offset:new gc(256,91)},[wq.Banker1]:{offset:new gc(290,91)},[wq.Banker2]:{offset:new gc(324,94)}},[EW.t.Landscape]:{[wq.Player0]:{offset:new gc(182,54)},[wq.Player1]:{offset:new gc(221,54)},[wq.Player2]:{offset:new gc(132,58)},[wq.Banker0]:{offset:new gc(455,54)},[wq.Banker1]:{offset:new gc(494,54)},[wq.Banker2]:{offset:new gc(533,58)}}},hY={[EW.t.Portrait]:{width:27,height:36},[EW.t.Landscape]:{width:32,height:43}};class qY extends Hu{constructor(W){const n=function(W,n){const I=hY[W];let h=I.width,q=I.height;n!==wq.Banker2&&n!==wq.Player2||(h=I.height,q=I.width);const $=[];return $.push(new gc(0,2)),$.push(new gc(0,q-2)),$.push(new gc(2,q)),$.push(new gc(h-2,q)),$.push(new gc(h,q-2)),$.push(new gc(h,2)),$.push(new gc(h-2,0)),$.push(new gc(2,0)),$.push(new gc(0,2)),$}(W.orientation,W.name);super({...nY,color:su[W.color],outlineColor:Mu[W.color],scene3d:W.scene3d,offset:IY[W.orientation][W.name].offset},{...WY,points:n,name:W.name},!!W.freeze)}changeColor(W){this.material.color=su[W],this.outline.visibleEdgeColor=Mu[W]}}class $Y extends Yu{constructor(W){super(W),this.defaultDPI=90,this.defaultUnit="px"}load(W,n,I,h){const q=this,$=new Ku(q.manager);$.setPath(q.path),$.setRequestHeader(q.requestHeader),$.setWithCredentials(q.withCredentials),$.load(W,(function(I){try{n(q.parse(I))}catch(n){h?h(n):console.error(n),q.manager.itemError(W)}}),I,h)}parse(W){const n=this;function I(W,n,I,q,$,k,_,N){if(0==n||0==I)return void W.lineTo(N.x,N.y);q=q*Math.PI/180,n=Math.abs(n),I=Math.abs(I);const c=(_.x-N.x)/2,P=(_.y-N.y)/2,S=Math.cos(q)*c+Math.sin(q)*P,g=-Math.sin(q)*c+Math.cos(q)*P;let B=n*n,E=I*I;const u=S*S,Y=g*g,f=u/B+Y/E;if(f>1){const W=Math.sqrt(f);B=(n*=W)*n,E=(I*=W)*I}const r=B*Y+E*u,K=(B*E-r)/r;let t=Math.sqrt(Math.max(0,K));$===k&&(t=-t);const X=t*n*g/I,L=-t*I*S/n,O=Math.cos(q)*X-Math.sin(q)*L+(_.x+N.x)/2,Z=Math.sin(q)*X+Math.cos(q)*L+(_.y+N.y)/2,d=h(1,0,(S-X)/n,(g-L)/I),m=h((S-X)/n,(g-L)/I,(-S-X)/n,(-g-L)/I)%(2*Math.PI);W.currentPath.absellipse(O,Z,n,I,d,d+m,0===k,q)}function h(W,n,I,h){const q=W*I+n*h,$=Math.sqrt(W*W+n*n)*Math.sqrt(I*I+h*h);let k=Math.acos(Math.max(-1,Math.min(1,q/$)));return W*h-n*I<0&&(k=-k),k}function q(W,n){n=Object.assign({},n);let I={};if(W.hasAttribute("class")){const n=W.getAttribute("class").split(/\s/).filter(Boolean).map((W=>W.trim()));for(let W=0;W<n.length;W++)I=Object.assign(I,u["."+n[W]])}function h(h,q,$){void 0===$&&($=function(W){return W.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),W}),W.hasAttribute(h)&&(n[q]=$(W.getAttribute(h))),I[h]&&(n[q]=$(I[h])),W.style&&""!==W.style[h]&&(n[q]=$(W.style[h]))}function q(W){return Math.max(0,Math.min(1,c(W)))}function $(W){return Math.max(0,c(W))}return W.hasAttribute("id")&&(I=Object.assign(I,u["#"+W.getAttribute("id")])),h("fill","fill"),h("fill-opacity","fillOpacity",q),h("fill-rule","fillRule"),h("opacity","opacity",q),h("stroke","stroke"),h("stroke-opacity","strokeOpacity",q),h("stroke-width","strokeWidth",$),h("stroke-linejoin","strokeLineJoin"),h("stroke-linecap","strokeLineCap"),h("stroke-miterlimit","strokeMiterLimit",$),h("visibility","visibility"),n}function $(W,n){return W-(n-W)}function k(W,n,I){if("string"!=typeof W)throw new TypeError("Invalid input: "+typeof W);const h={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/};let q=0,$=!0,k="",_="";const N=[];function c(W,n,I){const h=new SyntaxError('Unexpected character "'+W+'" at index '+n+".");throw h.partial=I,h}function P(){""!==k&&(""===_?N.push(Number(k)):N.push(Number(k)*Math.pow(10,Number(_)))),k="",_=""}let S;const g=W.length;for(let B=0;B<g;B++)if(S=W[B],Array.isArray(n)&&n.includes(N.length%I)&&h.FLAGS.test(S))q=1,k=S,P();else{if(0===q){if(h.WHITESPACE.test(S))continue;if(h.DIGIT.test(S)||h.SIGN.test(S)){q=1,k=S;continue}if(h.POINT.test(S)){q=2,k=S;continue}h.COMMA.test(S)&&($&&c(S,B,N),$=!0)}if(1===q){if(h.DIGIT.test(S)){k+=S;continue}if(h.POINT.test(S)){k+=S,q=2;continue}if(h.EXP.test(S)){q=3;continue}h.SIGN.test(S)&&1===k.length&&h.SIGN.test(k[0])&&c(S,B,N)}if(2===q){if(h.DIGIT.test(S)){k+=S;continue}if(h.EXP.test(S)){q=3;continue}h.POINT.test(S)&&"."===k[k.length-1]&&c(S,B,N)}if(3===q){if(h.DIGIT.test(S)){_+=S;continue}if(h.SIGN.test(S)){if(""===_){_+=S;continue}1===_.length&&h.SIGN.test(_)&&c(S,B,N)}}h.WHITESPACE.test(S)?(P(),q=0,$=!1):h.COMMA.test(S)?(P(),q=0,$=!0):h.SIGN.test(S)?(P(),q=1,k=S):h.POINT.test(S)?(P(),q=2,k=S):c(S,B,N)}return P(),N}const _=["mm","cm","in","pt","pc","px"],N={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function c(W){let I,h="px";if("string"==typeof W||W instanceof String)for(let n=0,I=_.length;n<I;n++){const I=_[n];if(W.endsWith(I)){h=I,W=W.substring(0,W.length-I.length);break}}return"px"===h&&"px"!==n.defaultUnit?I=N.in[n.defaultUnit]/n.defaultDPI:(I=N[h][n.defaultUnit],I<0&&(I=N[h].in*n.defaultDPI)),I*parseFloat(W)}function P(W){const n=W.elements;return n[0]*n[4]-n[1]*n[3]<0}function S(W){const n=W.elements,I=n[0]*n[3]+n[1]*n[4];if(0===I)return!1;const h=g(W),q=B(W);return Math.abs(I/(h*q))>Number.EPSILON}function g(W){const n=W.elements;return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function B(W){const n=W.elements;return Math.sqrt(n[3]*n[3]+n[4]*n[4])}const E=[],u={},Y=[],f=new bN,r=new bN,K=new bN,t=new bN,X=new CN,L=new gc,O=new bN,Z=(new DOMParser).parseFromString(W,"image/svg+xml");return function W(n,h){if(1!==n.nodeType)return;const _=function(W){if(!(W.hasAttribute("transform")||"use"===W.nodeName&&(W.hasAttribute("x")||W.hasAttribute("y"))))return null;const n=function(W){const n=new bN,I=f;if("use"===W.nodeName&&(W.hasAttribute("x")||W.hasAttribute("y"))){const I=c(W.getAttribute("x")),h=c(W.getAttribute("y"));n.translate(I,h)}if(W.hasAttribute("transform")){const h=W.getAttribute("transform").split(")");for(let W=h.length-1;W>=0;W--){const q=h[W].trim();if(""===q)continue;const $=q.indexOf("("),_=q.length;if($>0&&$<_){const W=q.slice(0,$),n=k(q.slice($+1));switch(I.identity(),W){case"translate":if(n.length>=1){const W=n[0];let h=0;n.length>=2&&(h=n[1]),I.translate(W,h)}break;case"rotate":if(n.length>=1){let W=0,h=0,q=0;W=n[0]*Math.PI/180,n.length>=3&&(h=n[1],q=n[2]),r.makeTranslation(-h,-q),K.makeRotation(W),t.multiplyMatrices(K,r),r.makeTranslation(h,q),I.multiplyMatrices(r,t)}break;case"scale":if(n.length>=1){const W=n[0];let h=W;n.length>=2&&(h=n[1]),I.scale(W,h)}break;case"skewX":1===n.length&&I.set(1,Math.tan(n[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===n.length&&I.set(1,0,0,Math.tan(n[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===n.length&&I.set(n[0],n[2],n[4],n[1],n[3],n[5],0,0,1)}}n.premultiply(I)}}return n}(W);return Y.length>0&&n.premultiply(Y[Y.length-1]),O.copy(n),Y.push(n),n}(n);let N=!1,Z=null;switch(n.nodeName){case"svg":case"g":h=q(n,h);break;case"style":!function(W){if(W.sheet&&W.sheet.cssRules&&W.sheet.cssRules.length)for(let n=0;n<W.sheet.cssRules.length;n++){const I=W.sheet.cssRules[n];if(1!==I.type)continue;const h=I.selectorText.split(/,/gm).filter(Boolean).map((W=>W.trim()));for(let W=0;W<h.length;W++){const n=Object.fromEntries(Object.entries(I.style).filter((([,W])=>""!==W)));u[h[W]]=Object.assign(u[h[W]]||{},n)}}}(n);break;case"path":h=q(n,h),n.hasAttribute("d")&&(Z=function(W){const n=new ju,h=new CN,q=new CN,_=new CN;let N=!0,c=!1;const P=W.getAttribute("d");if(""===P||"none"===P)return null;const S=P.match(/[a-df-z][^a-df-z]*/gi);for(let W=0,P=S.length;W<P;W++){const P=S[W],g=P.charAt(0),B=P.slice(1).trim();let E;switch(!0===N&&(c=!0,N=!1),g){case"M":E=k(B);for(let W=0,I=E.length;W<I;W+=2)h.x=E[W+0],h.y=E[W+1],q.x=h.x,q.y=h.y,0===W?n.moveTo(h.x,h.y):n.lineTo(h.x,h.y),0===W&&_.copy(h);break;case"H":E=k(B);for(let W=0,I=E.length;W<I;W++)h.x=E[W],q.x=h.x,q.y=h.y,n.lineTo(h.x,h.y),0===W&&!0===c&&_.copy(h);break;case"V":E=k(B);for(let W=0,I=E.length;W<I;W++)h.y=E[W],q.x=h.x,q.y=h.y,n.lineTo(h.x,h.y),0===W&&!0===c&&_.copy(h);break;case"L":E=k(B);for(let W=0,I=E.length;W<I;W+=2)h.x=E[W+0],h.y=E[W+1],q.x=h.x,q.y=h.y,n.lineTo(h.x,h.y),0===W&&!0===c&&_.copy(h);break;case"C":E=k(B);for(let W=0,I=E.length;W<I;W+=6)n.bezierCurveTo(E[W+0],E[W+1],E[W+2],E[W+3],E[W+4],E[W+5]),q.x=E[W+2],q.y=E[W+3],h.x=E[W+4],h.y=E[W+5],0===W&&!0===c&&_.copy(h);break;case"S":E=k(B);for(let W=0,I=E.length;W<I;W+=4)n.bezierCurveTo($(h.x,q.x),$(h.y,q.y),E[W+0],E[W+1],E[W+2],E[W+3]),q.x=E[W+0],q.y=E[W+1],h.x=E[W+2],h.y=E[W+3],0===W&&!0===c&&_.copy(h);break;case"Q":E=k(B);for(let W=0,I=E.length;W<I;W+=4)n.quadraticCurveTo(E[W+0],E[W+1],E[W+2],E[W+3]),q.x=E[W+0],q.y=E[W+1],h.x=E[W+2],h.y=E[W+3],0===W&&!0===c&&_.copy(h);break;case"T":E=k(B);for(let W=0,I=E.length;W<I;W+=2){const I=$(h.x,q.x),k=$(h.y,q.y);n.quadraticCurveTo(I,k,E[W+0],E[W+1]),q.x=I,q.y=k,h.x=E[W+0],h.y=E[W+1],0===W&&!0===c&&_.copy(h)}break;case"A":E=k(B,[3,4],7);for(let W=0,$=E.length;W<$;W+=7){if(E[W+5]==h.x&&E[W+6]==h.y)continue;const $=h.clone();h.x=E[W+5],h.y=E[W+6],q.x=h.x,q.y=h.y,I(n,E[W],E[W+1],E[W+2],E[W+3],E[W+4],$,h),0===W&&!0===c&&_.copy(h)}break;case"m":E=k(B);for(let W=0,I=E.length;W<I;W+=2)h.x+=E[W+0],h.y+=E[W+1],q.x=h.x,q.y=h.y,0===W?n.moveTo(h.x,h.y):n.lineTo(h.x,h.y),0===W&&_.copy(h);break;case"h":E=k(B);for(let W=0,I=E.length;W<I;W++)h.x+=E[W],q.x=h.x,q.y=h.y,n.lineTo(h.x,h.y),0===W&&!0===c&&_.copy(h);break;case"v":E=k(B);for(let W=0,I=E.length;W<I;W++)h.y+=E[W],q.x=h.x,q.y=h.y,n.lineTo(h.x,h.y),0===W&&!0===c&&_.copy(h);break;case"l":E=k(B);for(let W=0,I=E.length;W<I;W+=2)h.x+=E[W+0],h.y+=E[W+1],q.x=h.x,q.y=h.y,n.lineTo(h.x,h.y),0===W&&!0===c&&_.copy(h);break;case"c":E=k(B);for(let W=0,I=E.length;W<I;W+=6)n.bezierCurveTo(h.x+E[W+0],h.y+E[W+1],h.x+E[W+2],h.y+E[W+3],h.x+E[W+4],h.y+E[W+5]),q.x=h.x+E[W+2],q.y=h.y+E[W+3],h.x+=E[W+4],h.y+=E[W+5],0===W&&!0===c&&_.copy(h);break;case"s":E=k(B);for(let W=0,I=E.length;W<I;W+=4)n.bezierCurveTo($(h.x,q.x),$(h.y,q.y),h.x+E[W+0],h.y+E[W+1],h.x+E[W+2],h.y+E[W+3]),q.x=h.x+E[W+0],q.y=h.y+E[W+1],h.x+=E[W+2],h.y+=E[W+3],0===W&&!0===c&&_.copy(h);break;case"q":E=k(B);for(let W=0,I=E.length;W<I;W+=4)n.quadraticCurveTo(h.x+E[W+0],h.y+E[W+1],h.x+E[W+2],h.y+E[W+3]),q.x=h.x+E[W+0],q.y=h.y+E[W+1],h.x+=E[W+2],h.y+=E[W+3],0===W&&!0===c&&_.copy(h);break;case"t":E=k(B);for(let W=0,I=E.length;W<I;W+=2){const I=$(h.x,q.x),k=$(h.y,q.y);n.quadraticCurveTo(I,k,h.x+E[W+0],h.y+E[W+1]),q.x=I,q.y=k,h.x=h.x+E[W+0],h.y=h.y+E[W+1],0===W&&!0===c&&_.copy(h)}break;case"a":E=k(B,[3,4],7);for(let W=0,$=E.length;W<$;W+=7){if(0==E[W+5]&&0==E[W+6])continue;const $=h.clone();h.x+=E[W+5],h.y+=E[W+6],q.x=h.x,q.y=h.y,I(n,E[W],E[W+1],E[W+2],E[W+3],E[W+4],$,h),0===W&&!0===c&&_.copy(h)}break;case"Z":case"z":n.currentPath.autoClose=!0,n.currentPath.curves.length>0&&(h.copy(_),n.currentPath.currentPoint.copy(h),N=!0);break;default:console.warn(P)}c=!1}return n}(n));break;case"rect":h=q(n,h),Z=function(W){const n=c(W.getAttribute("x")||0),I=c(W.getAttribute("y")||0),h=c(W.getAttribute("rx")||W.getAttribute("ry")||0),q=c(W.getAttribute("ry")||W.getAttribute("rx")||0),$=c(W.getAttribute("width")),k=c(W.getAttribute("height")),_=.448084975506,N=new ju;return N.moveTo(n+h,I),N.lineTo(n+$-h,I),(0!==h||0!==q)&&N.bezierCurveTo(n+$-h*_,I,n+$,I+q*_,n+$,I+q),N.lineTo(n+$,I+k-q),(0!==h||0!==q)&&N.bezierCurveTo(n+$,I+k-q*_,n+$-h*_,I+k,n+$-h,I+k),N.lineTo(n+h,I+k),(0!==h||0!==q)&&N.bezierCurveTo(n+h*_,I+k,n,I+k-q*_,n,I+k-q),N.lineTo(n,I+q),(0!==h||0!==q)&&N.bezierCurveTo(n,I+q*_,n+h*_,I,n+h,I),N}(n);break;case"polygon":h=q(n,h),Z=function(W){const n=new ju;let I=0;return W.getAttribute("points").replace(/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,(function(W,h,q){const $=c(h),k=c(q);0===I?n.moveTo($,k):n.lineTo($,k),I++})),n.currentPath.autoClose=!0,n}(n);break;case"polyline":h=q(n,h),Z=function(W){const n=new ju;let I=0;return W.getAttribute("points").replace(/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,(function(W,h,q){const $=c(h),k=c(q);0===I?n.moveTo($,k):n.lineTo($,k),I++})),n.currentPath.autoClose=!1,n}(n);break;case"circle":h=q(n,h),Z=function(W){const n=c(W.getAttribute("cx")||0),I=c(W.getAttribute("cy")||0),h=c(W.getAttribute("r")||0),q=new RE;q.absarc(n,I,h,0,2*Math.PI);const $=new ju;return $.subPaths.push(q),$}(n);break;case"ellipse":h=q(n,h),Z=function(W){const n=c(W.getAttribute("cx")||0),I=c(W.getAttribute("cy")||0),h=c(W.getAttribute("rx")||0),q=c(W.getAttribute("ry")||0),$=new RE;$.absellipse(n,I,h,q,0,2*Math.PI);const k=new ju;return k.subPaths.push($),k}(n);break;case"line":h=q(n,h),Z=function(W){const n=c(W.getAttribute("x1")||0),I=c(W.getAttribute("y1")||0),h=c(W.getAttribute("x2")||0),q=c(W.getAttribute("y2")||0),$=new ju;return $.moveTo(n,I),$.lineTo(h,q),$.currentPath.autoClose=!1,$}(n);break;case"defs":N=!0;break;case"use":h=q(n,h);const _=(n.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),P=n.viewportElement.getElementById(_);P?W(P,h):console.warn("SVGLoader: 'use node' references non-existent node id: "+_)}Z&&(void 0!==h.fill&&"none"!==h.fill&&Z.color.setStyle(h.fill,"srgb"),function(W,n){function I(W){L.set(W.x,W.y,1).applyMatrix3(n),W.set(L.x,L.y)}function h(W){const I=W.xRadius,h=W.yRadius,q=Math.cos(W.aRotation),$=Math.sin(W.aRotation),k=new gc(I*q,I*$,0),_=new gc(-h*$,h*q,0),N=k.applyMatrix3(n),c=_.applyMatrix3(n),S=f.set(N.x,c.x,0,N.y,c.y,0,0,0,1),g=r.copy(S).invert(),B=K.copy(g).transpose().multiply(g).elements,E=function(W,n,I){let h,q,$,k,_;const N=W+I,c=W-I,P=Math.sqrt(c*c+4*n*n);return N>0?(h=.5*(N+P),_=1/h,q=W*_*I-n*_*n):N<0?q=.5*(N-P):(h=.5*P,q=-.5*P),$=c>0?c+P:c-P,Math.abs($)>2*Math.abs(n)?(_=-2*n/$,k=1/Math.sqrt(1+_*_),$=_*k):0===Math.abs(n)?($=1,k=0):(_=-.5*$/n,$=1/Math.sqrt(1+_*_),k=_*$),c>0&&(_=$,$=-k,k=_),{rt1:h,rt2:q,cs:$,sn:k}}(B[0],B[1],B[4]),u=Math.sqrt(E.rt1),Y=Math.sqrt(E.rt2);if(W.xRadius=1/u,W.yRadius=1/Y,W.aRotation=Math.atan2(E.sn,E.cs),!((W.aEndAngle-W.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const I=r.set(u,0,0,0,Y,0,0,0,1),h=K.set(E.cs,E.sn,0,-E.sn,E.cs,0,0,0,1),q=I.multiply(h).multiply(S),$=W=>{const{x:n,y:I}=new gc(Math.cos(W),Math.sin(W),0).applyMatrix3(q);return Math.atan2(I,n)};W.aStartAngle=$(W.aStartAngle),W.aEndAngle=$(W.aEndAngle),P(n)&&(W.aClockwise=!W.aClockwise)}}function q(W){const I=g(n),h=B(n);W.xRadius*=I,W.yRadius*=h;const q=I>Number.EPSILON?Math.atan2(n.elements[1],n.elements[0]):Math.atan2(-n.elements[3],n.elements[4]);W.aRotation+=q,P(n)&&(W.aStartAngle*=-1,W.aEndAngle*=-1,W.aClockwise=!W.aClockwise)}const $=W.subPaths;for(let W=0,k=$.length;W<k;W++){const k=$[W].curves;for(let W=0;W<k.length;W++){const $=k[W];$.isLineCurve?(I($.v1),I($.v2)):$.isCubicBezierCurve?(I($.v0),I($.v1),I($.v2),I($.v3)):$.isQuadraticBezierCurve?(I($.v0),I($.v1),I($.v2)):$.isEllipseCurve&&(X.set($.aX,$.aY),I(X),$.aX=X.x,$.aY=X.y,S(n)?h($):q($))}}}(Z,O),E.push(Z),Z.userData={node:n,style:h});const d=n.childNodes;for(let n=0;n<d.length;n++){const I=d[n];N&&"style"!==I.nodeName&&"defs"!==I.nodeName||W(I,h)}_&&(Y.pop(),Y.length>0?O.copy(Y[Y.length-1]):O.identity())}(Z.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:E,xml:Z.documentElement}}static createShapes(W){const n=0,I=1,h=2,q=3,$=4,k=5,_=6,N={loc:n,t:0};function c(W,I,q,$){const k=W.x,_=I.x,c=q.x,S=$.x,g=W.y,B=I.y,E=q.y,u=$.y,Y=(S-c)*(g-E)-(u-E)*(k-c),f=(u-E)*(_-k)-(S-c)*(B-g),r=Y/f,K=((_-k)*(g-E)-(B-g)*(k-c))/f;if(0===f&&0!==Y||r<=0||r>=1||K<0||K>1)return null;if(0===Y&&0===f){for(let c=0;c<2;c++){if(P(0===c?q:$,W,I),N.loc==n){const W=0===c?q:$;return{x:W.x,y:W.y,t:N.t}}if(N.loc==h)return{x:+(k+N.t*(_-k)).toPrecision(10),y:+(g+N.t*(B-g)).toPrecision(10),t:N.t}}return null}for(let h=0;h<2;h++)if(P(0===h?q:$,W,I),N.loc==n){const W=0===h?q:$;return{x:W.x,y:W.y,t:N.t}}return{x:+(k+r*(_-k)).toPrecision(10),y:+(g+r*(B-g)).toPrecision(10),t:r}}function P(W,c,P){const S=P.x-c.x,g=P.y-c.y,B=W.x-c.x,E=W.y-c.y,u=S*E-B*g;if(W.x===c.x&&W.y===c.y)return N.loc=n,void(N.t=0);if(W.x===P.x&&W.y===P.y)return N.loc=I,void(N.t=1);if(u<-Number.EPSILON)return void(N.loc=q);if(u>Number.EPSILON)return void(N.loc=$);if(S*B<0||g*E<0)return void(N.loc=k);if(Math.sqrt(S*S+g*g)<Math.sqrt(B*B+E*E))return void(N.loc=_);let Y;Y=0!==S?B/S:E/g,N.loc=h,N.t=Y}let S=999999999,g=-999999999,B=W.subPaths.map((W=>{const n=W.getPoints();let I=-999999999,h=999999999,q=-999999999,$=999999999;for(let W=0;W<n.length;W++){const k=n[W];k.y>I&&(I=k.y),k.y<h&&(h=k.y),k.x>q&&(q=k.x),k.x<$&&($=k.x)}return g<=q&&(g=q+1),S>=$&&(S=$-1),{curves:W.curves,points:n,isCW:ME.isClockWise(n),identifier:-1,boundingBox:new eu(new CN($,h),new CN(q,I))}}));B=B.filter((W=>W.points.length>1));for(let W=0;W<B.length;W++)B[W].identifier=W;const E=B.map((n=>function(W,n,I,h,q){null!=q&&""!==q||(q="nonzero");const $=new CN;W.boundingBox.getCenter($);const k=function(W,n,I){const h=new CN;n.getCenter(h);const q=[];return I.forEach((n=>{n.boundingBox.containsPoint(h)&&function(W,n){const I=[],h=[];for(let q=1;q<W.length;q++){const $=W[q-1],k=W[q];for(let W=1;W<n.length;W++){const q=c($,k,n[W-1],n[W]);null!==q&&void 0===I.find((W=>W.t<=q.t+Number.EPSILON&&W.t>=q.t-Number.EPSILON))&&(I.push(q),h.push(new CN(q.x,q.y)))}}return h}(W,n.points).forEach((W=>{q.push({identifier:n.identifier,isCW:n.isCW,point:W})}))})),q.sort(((W,n)=>W.point.x-n.point.x)),q}([new CN(I,$.y),new CN(h,$.y)],W.boundingBox,n);k.sort(((W,n)=>W.point.x-n.point.x));const _=[],N=[];k.forEach((n=>{n.identifier===W.identifier?_.push(n):N.push(n)}));const P=_[0].point.x,S=[];let g=0;for(;g<N.length&&N[g].point.x<P;)S.length>0&&S[S.length-1]===N[g].identifier?S.pop():S.push(N[g].identifier),g++;if(S.push(W.identifier),"evenodd"===q){const n=S.length%2==0,I=S[S.length-2];return{identifier:W.identifier,isHole:n,for:I}}if("nonzero"===q){let I=!0,h=null,q=null;for(let W=0;W<S.length;W++){const $=S[W];I?(q=n[$].isCW,I=!1,h=$):q!==n[$].isCW&&(q=n[$].isCW,I=!0)}return{identifier:W.identifier,isHole:I,for:h}}console.warn('fill-rule: "'+q+'" is currently not implemented.')}(n,B,S,g,W.userData?W.userData.style.fillRule:void 0))),u=[];return B.forEach((W=>{if(!E[W.identifier].isHole){const n=new eE;n.curves=W.curves,E.filter((n=>n.isHole&&n.for===W.identifier)).forEach((W=>{const I=B[W.identifier],h=new RE;h.curves=I.curves,n.holes.push(h)})),u.push(n)}})),u}static getStrokeStyle(W,n,I,h,q){return{strokeColor:n=void 0!==n?n:"#000",strokeWidth:W=void 0!==W?W:1,strokeLineJoin:I=void 0!==I?I:"miter",strokeLineCap:h=void 0!==h?h:"butt",strokeMiterLimit:q=void 0!==q?q:4}}static pointsToStroke(W,n,I,h){const q=[],$=[],k=[];if(0===$Y.pointsToStrokeWithBuffers(W,n,I,h,q,$,k))return null;const _=new QP;return _.setAttribute("position",new yP(q,3)),_.setAttribute("normal",new yP($,3)),_.setAttribute("uv",new yP(k,2)),_}static pointsToStrokeWithBuffers(W,n,I,h,q,$,k,_){const N=new CN,c=new CN,P=new CN,S=new CN,g=new CN,B=new CN,E=new CN,u=new CN,Y=new CN,f=new CN,r=new CN,K=new CN,t=new CN,X=new CN,L=new CN,O=new CN,Z=new CN;I=void 0!==I?I:12,h=void 0!==h?h:.001,_=void 0!==_?_:0;const d=(W=function(W){let n=!1;for(let I=1,q=W.length-1;I<q;I++)if(W[I].distanceTo(W[I+1])<h){n=!0;break}if(!n)return W;const I=[];I.push(W[0]);for(let n=1,q=W.length-1;n<q;n++)W[n].distanceTo(W[n+1])>=h&&I.push(W[n]);return I.push(W[W.length-1]),I}(W)).length;if(d<2)return 0;const m=W[0].equals(W[d-1]);let R,e,j=W[0];const z=n.strokeWidth/2,v=1/(d-1);let V,F,w,o,D=0,x=!1,G=0,y=3*_,C=2*_;b(W[0],W[1],N).multiplyScalar(z),u.copy(W[0]).sub(N),Y.copy(W[0]).add(N),f.copy(u),r.copy(Y);for(let I=1;I<d;I++){R=W[I],e=I===d-1?m?W[1]:void 0:W[I+1];const h=N;if(b(j,R,h),P.copy(h).multiplyScalar(z),K.copy(R).sub(P),t.copy(R).add(P),V=D+v,F=!1,void 0!==e){b(R,e,c),P.copy(c).multiplyScalar(z),X.copy(R).sub(P),L.copy(R).add(P),w=!0,P.subVectors(e,j),h.dot(P)<0&&(w=!1),1===I&&(x=w),P.subVectors(e,R),P.normalize();const W=Math.abs(h.dot(P));if(W>Number.EPSILON){const I=z/W;P.multiplyScalar(-I),S.subVectors(R,j),g.copy(S).setLength(I).add(P),O.copy(g).negate();const h=g.length(),q=S.length();S.divideScalar(q),B.subVectors(e,R);const $=B.length();switch(B.divideScalar($),S.dot(O)<q&&B.dot(O)<$&&(F=!0),Z.copy(g).add(R),O.add(R),o=!1,F?w?(L.copy(O),t.copy(O)):(X.copy(O),K.copy(O)):p(),n.strokeLineJoin){case"bevel":i(w,F,V);break;case"round":U(w,F),w?A(R,K,X,V,0):A(R,L,t,V,1);break;default:const W=z*n.strokeMiterLimit/h;if(W<1){if("miter-clip"!==n.strokeLineJoin){i(w,F,V);break}U(w,F),w?(B.subVectors(Z,K).multiplyScalar(W).add(K),E.subVectors(Z,X).multiplyScalar(W).add(X),l(K,V,0),l(B,V,0),l(R,V,.5),l(R,V,.5),l(B,V,0),l(E,V,0),l(R,V,.5),l(E,V,0),l(X,V,0)):(B.subVectors(Z,t).multiplyScalar(W).add(t),E.subVectors(Z,L).multiplyScalar(W).add(L),l(t,V,1),l(B,V,1),l(R,V,.5),l(R,V,.5),l(B,V,1),l(E,V,1),l(R,V,.5),l(E,V,1),l(L,V,1))}else F?(w?(l(Y,D,1),l(u,D,0),l(Z,V,0),l(Y,D,1),l(Z,V,0),l(O,V,1)):(l(Y,D,1),l(u,D,0),l(Z,V,1),l(u,D,0),l(O,V,0),l(Z,V,1)),w?X.copy(Z):L.copy(Z)):w?(l(K,V,0),l(Z,V,0),l(R,V,.5),l(R,V,.5),l(Z,V,0),l(X,V,0)):(l(t,V,1),l(Z,V,1),l(R,V,.5),l(R,V,.5),l(Z,V,1),l(L,V,1)),o=!0}}else p()}else p();m||I!==d-1||Q(W[0],f,r,w,!0,D),D=V,j=R,u.copy(X),Y.copy(L)}if(m){if(F&&q){let W=Z,n=O;x!==w&&(W=O,n=Z),w?(o||x)&&(n.toArray(q,0),n.toArray(q,9),o&&W.toArray(q,3)):!o&&x||(n.toArray(q,3),n.toArray(q,9),o&&W.toArray(q,0))}}else Q(R,K,t,w,!1,V);return G;function b(W,n,I){return I.subVectors(n,W),I.set(-I.y,I.x).normalize()}function l(W,n,I){q&&(q[y]=W.x,q[y+1]=W.y,q[y+2]=0,$&&($[y]=0,$[y+1]=0,$[y+2]=1),y+=3,k&&(k[C]=n,k[C+1]=I,C+=2)),G+=3}function A(W,n,h,q,$){N.copy(n).sub(W).normalize(),c.copy(h).sub(W).normalize();let k=Math.PI;const _=N.dot(c);Math.abs(_)<1&&(k=Math.abs(Math.acos(_))),k/=I,P.copy(n);for(let n=0,h=I-1;n<h;n++)S.copy(P).rotateAround(W,k),l(P,q,$),l(S,q,$),l(W,q,.5),P.copy(S);l(S,q,$),l(h,q,$),l(W,q,.5)}function p(){l(Y,D,1),l(u,D,0),l(K,V,0),l(Y,D,1),l(K,V,1),l(t,V,0)}function i(W,n,I){n?W?(l(Y,D,1),l(u,D,0),l(K,V,0),l(Y,D,1),l(K,V,0),l(O,V,1),l(K,I,0),l(X,I,0),l(O,I,.5)):(l(Y,D,1),l(u,D,0),l(t,V,1),l(u,D,0),l(O,V,0),l(t,V,1),l(t,I,1),l(L,I,0),l(O,I,.5)):W?(l(K,I,0),l(X,I,0),l(R,I,.5)):(l(t,I,1),l(L,I,0),l(R,I,.5))}function U(W,n){n&&(W?(l(Y,D,1),l(u,D,0),l(K,V,0),l(Y,D,1),l(K,V,0),l(O,V,1),l(K,D,0),l(R,V,.5),l(O,V,1),l(R,V,.5),l(X,D,0),l(O,V,1)):(l(Y,D,1),l(u,D,0),l(t,V,1),l(u,D,0),l(O,V,0),l(t,V,1),l(t,D,1),l(O,V,0),l(R,V,.5),l(R,V,.5),l(O,V,0),l(L,D,1)))}function Q(W,I,h,$,k,_){switch(n.strokeLineCap){case"round":k?A(W,h,I,_,.5):A(W,I,h,_,.5);break;case"square":if(k)N.subVectors(I,W),c.set(N.y,-N.x),P.addVectors(N,c).add(W),S.subVectors(c,N).add(W),$?(P.toArray(q,3),S.toArray(q,0),S.toArray(q,9)):(P.toArray(q,3),P.toArray(q,9),S.toArray(q,0));else{N.subVectors(h,W),c.set(N.y,-N.x),P.addVectors(N,c).add(W),S.subVectors(c,N).add(W);const n=q.length;$?(P.toArray(q,n-3),S.toArray(q,n-6),S.toArray(q,n-12)):(P.toArray(q,n-6),S.toArray(q,n-3),S.toArray(q,n-12))}}}}}const kY={[p_.Red]:new vP("#ffdddd"),[p_.Yellow]:new vP("#fff7e2"),[p_.None]:new vP("#000000")},_Y={[p_.Red]:new vP("#ff0000"),[p_.Yellow]:new vP("#FFF1CF"),[p_.None]:new vP("#000000")},NY={callback:{createBranch:Ju},main:{radius0:1,radius1:1,dispersion:1.8,timeFactor:5,maxSegmentLength:6},branch:{radius0:1,radius1:0,dispersion:3,timeFactor:2,branchDepth:1,branchLength:16,maxSegmentLength:6,branchProbability:.01,branchDispersionFactor:.5,branchMinRadiusForBranch:.6},shadow:{count:1,radius0:.5,radius1:.5,spacing:6,dispersion:4,timeFactor:3,maxSegmentLength:12}},cY={wireframe:!1,appearanceTime:3,outlineStrength:1,outlineGlow:2,outlineThickness:3},PY={[p_.Yellow]:{...cY},[p_.Red]:{...cY,outlineStrength:1.4,outlineGlow:2,outlineThickness:2},[p_.None]:{...cY}},SY={[EW.t.Portrait]:{[w.K8.Player]:{isMirror:!1,offset:new gc(0,48)},[w.K8.Banker]:{isMirror:!0,offset:new gc(184,48)},[w.K8.Tie]:{isMirror:!1,offset:new gc(121,48)},[w.K8.PlayerPair]:{isMirror:!1,offset:new gc(0,0)},[w.K8.BankerPair]:{isMirror:!0,offset:new gc(184,0)}},[EW.t.Landscape]:{[w.K8.Player]:{isMirror:!1,offset:new gc(110,0)},[w.K8.Banker]:{isMirror:!0,offset:new gc(356,0)},[w.K8.Tie]:{isMirror:!1,offset:new gc(272,0)},[w.K8.PlayerPair]:{isMirror:!1,offset:new gc(0,0)},[w.K8.BankerPair]:{isMirror:!0,offset:new gc(602,0)}}};class gY extends Hu{constructor(W){const n=function(W){var n,I,h,q;const{svg:$,divisions:k=3,isMirror:_=!1,isMirrorV:N=!1,fitToParent:c=!0}=W;if(!$)return[];const P=$.parentElement;let S=function(W){const n=W.cloneNode(!0),I=n.querySelectorAll("path, rect");for(const W of I)W.removeAttribute("fill"),W.removeAttribute("stroke");const h=n.querySelector("rect");if(h){const W=h.dataset.width,n=h.dataset.height;W&&n&&(h.setAttribute("width",W),h.setAttribute("height",n))}return n}($);const g=null!==(n=null==P?void 0:P.offsetHeight)&&void 0!==n?n:document.body.offsetHeight,B=null!==(I=null==P?void 0:P.offsetWidth)&&void 0!==I?I:document.body.offsetWidth,E=Number(null!==(h=S.getAttribute("height"))&&void 0!==h?h:1),u=g/E,Y=B/Number(null!==(q=S.getAttribute("width"))&&void 0!==q?q:1);let f=E;if(c&&(1!==Y||1!==u)){const W=document.createElementNS("http://www.w3.org/2000/svg","g");W.innerHTML=S.outerHTML,W.setAttribute("transform",`scale(${Y} ${u})`),S=W,f*=u}if(_){const W=document.createElementNS("http://www.w3.org/2000/svg","g");W.innerHTML=S.outerHTML,W.setAttribute("transform",`scale(-1, 1) translate(-${B}, 0)`),S=W}if(N){const W=document.createElementNS("http://www.w3.org/2000/svg","g");W.innerHTML=S.outerHTML,W.setAttribute("transform",`scale(1, -1) translate(0, -${g})`),S=W}const r=S.outerHTML,K=(new $Y).parse(r),t=[];for(const W of K.paths){const n=W.toShapes(!0);for(const W of n){const n=W.getPoints(k);for(const W of n)t.push(new gc(W.x,f-W.y,0))}}return t}({svg:W.element.querySelector("svg"),isMirror:SY[W.orientation][W.name].isMirror});super({...PY[W.color],color:kY[W.color],outlineColor:_Y[W.color],scene3d:W.scene3d,offset:SY[W.orientation][W.name].offset},{...NY,points:n,name:W.name},!!W.freeze)}changeColor(W){this.material.color=kY[W],this.outline.visibleEdgeColor=_Y[W],this.outline.edgeStrength=PY[W].outlineStrength,this.outline.edgeGlow=PY[W].outlineGlow,this.outline.edgeThickness=PY[W].outlineThickness}}class BY{create(W,n,I){if(function(W){return W&&"element"in W}(W))return new gY({name:W.name,element:W.element,color:W.color,orientation:I,scene3d:n,freeze:!1});if(function(W){return W&&!("element"in W)}(W))return new qY({name:W.name,color:W.color,orientation:I,scene3d:n,freeze:!1});throw new Error("Please provide data for Card or BetSpot...")}}const EY=()=>q.Pj();function uY(W,n){return W?W>=Lh.c?p_.Red:p_.Yellow:n?p_.Yellow:p_.None}class YY extends zu{constructor(W,n){super(),this.textureID=void 0!==n?n:"tDiffuse",W instanceof rS?(this.uniforms=W.uniforms,this.material=W):W&&(this.uniforms=fS.clone(W.uniforms),this.material=new rS({name:void 0!==W.name?W.name:"unspecified",defines:Object.assign({},W.defines),uniforms:this.uniforms,vertexShader:W.vertexShader,fragmentShader:W.fragmentShader})),this.fsQuad=new Fu(this.material)}render(W,n,I){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=I.texture),this.fsQuad.material=this.material,this.renderToScreen?(W.setRenderTarget(null),this.fsQuad.render(W)):(W.setRenderTarget(n),this.clear&&W.clear(W.autoClearColor,W.autoClearDepth,W.autoClearStencil),this.fsQuad.render(W))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class fY extends zu{constructor(W,n){super(),this.scene=W,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(W,n,I){const h=W.getContext(),q=W.state;let $,k;q.buffers.color.setMask(!1),q.buffers.depth.setMask(!1),q.buffers.color.setLocked(!0),q.buffers.depth.setLocked(!0),this.inverse?($=0,k=1):($=1,k=0),q.buffers.stencil.setTest(!0),q.buffers.stencil.setOp(h.REPLACE,h.REPLACE,h.REPLACE),q.buffers.stencil.setFunc(h.ALWAYS,$,4294967295),q.buffers.stencil.setClear(k),q.buffers.stencil.setLocked(!0),W.setRenderTarget(I),this.clear&&W.clear(),W.render(this.scene,this.camera),W.setRenderTarget(n),this.clear&&W.clear(),W.render(this.scene,this.camera),q.buffers.color.setLocked(!1),q.buffers.depth.setLocked(!1),q.buffers.color.setMask(!0),q.buffers.depth.setMask(!0),q.buffers.stencil.setLocked(!1),q.buffers.stencil.setFunc(h.EQUAL,1,4294967295),q.buffers.stencil.setOp(h.KEEP,h.KEEP,h.KEEP),q.buffers.stencil.setLocked(!0)}}class rY extends zu{constructor(){super(),this.needsSwap=!1}render(W){W.state.buffers.stencil.setLocked(!1),W.state.buffers.stencil.setTest(!1)}}class KY{constructor(W,n){if(this.renderer=W,this._pixelRatio=W.getPixelRatio(),void 0===n){const I=W.getSize(new CN);this._width=I.width,this._height=I.height,(n=new cc(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:1016})).texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new YY(wu),this.copyPass.material.blending=0,this.clock=new tu}swapBuffers(){const W=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=W}addPass(W){this.passes.push(W),W.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(W,n){this.passes.splice(n,0,W),W.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(W){const n=this.passes.indexOf(W);-1!==n&&this.passes.splice(n,1)}isLastEnabledPass(W){for(let n=W+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(W){void 0===W&&(W=this.clock.getDelta());const n=this.renderer.getRenderTarget();let I=!1;for(let n=0,h=this.passes.length;n<h;n++){const h=this.passes[n];if(!1!==h.enabled){if(h.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),h.render(this.renderer,this.writeBuffer,this.readBuffer,W,I),h.needsSwap){if(I){const n=this.renderer.getContext(),I=this.renderer.state.buffers.stencil;I.setFunc(n.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,W),I.setFunc(n.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==fY&&(h instanceof fY?I=!0:h instanceof rY&&(I=!1))}}this.renderer.setRenderTarget(n)}reset(W){if(void 0===W){const n=this.renderer.getSize(new CN);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,(W=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=W,this.renderTarget2=W.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(W,n){this._width=W,this._height=n;const I=this._width*this._pixelRatio,h=this._height*this._pixelRatio;this.renderTarget1.setSize(I,h),this.renderTarget2.setSize(I,h);for(let W=0;W<this.passes.length;W++)this.passes[W].setSize(I,h)}setPixelRatio(W){this._pixelRatio=W,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class tY extends zu{constructor(W,n,I,h,q){super(),this.scene=W,this.camera=n,this.overrideMaterial=I,this.clearColor=h,this.clearAlpha=void 0!==q?q:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new vP}render(W,n,I){const h=W.autoClear;let q,$;W.autoClear=!1,void 0!==this.overrideMaterial&&($=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(W.getClearColor(this._oldClearColor),q=W.getClearAlpha(),W.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&W.clearDepth(),W.setRenderTarget(this.renderToScreen?null:I),this.clear&&W.clear(W.autoClearColor,W.autoClearDepth,W.autoClearStencil),W.render(this.scene,this.camera),this.clearColor&&W.setClearColor(this._oldClearColor,q),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=$),W.autoClear=h}}class XY{constructor(W){this.time=0,this.raf=null,this.callbacks=new Set,this.animate=()=>{this.stop();const W=()=>{this.time=this.clock.getElapsedTime();for(const W of this.callbacks)W(this.time);this.composer.render(),this.raf=window.requestAnimationFrame(W)};W()},this.stop=()=>{this.raf&&(window.cancelAnimationFrame(this.raf),this.raf=null),this.composer.render()},this.dispose=()=>{for(const W of this.composer.passes)this.composer.removePass(W);this.composer.passes.length=0,this.scene.clear(),this.removeAnimationCallback(),this.stop(),this.composer.reset(),this.renderer.clear(),this.renderer.dispose()},this.addAnimationCallback=W=>{this.callbacks.add(W)},this.removeAnimationCallback=W=>{W?this.callbacks.delete(W):this.callbacks.clear()},this.addEffect=W=>{this.composer.addPass(W)},this.props=XY.parseParams(W),this.scene=new PE,this.camera=new pS(-this.props.offset,this.props.width+this.props.offset,this.props.height+this.props.offset,-this.props.offset,-50,50),this.renderer=new cE({canvas:this.props.canvas,antialias:this.props.antialias,alpha:this.props.alpha}),XY.prepareCanvas(this.renderer,this.props),this.composer=new KY(this.renderer),this.renderPass=new tY(this.scene,this.camera),this.composer.addPass(this.renderPass),this.clock=new tu}reset(){this.scene.clear(),this.time=0,this.renderer.clear(),this.renderer.state.reset(),this.composer.reset()}resize(W,n){this.props.width=W,this.props.height=n,this.camera.left=-this.props.offset,this.camera.right=this.props.width+this.props.offset,this.camera.top=this.props.height+this.props.offset,this.camera.bottom=-this.props.offset,this.camera.updateProjectionMatrix(),XY.prepareCanvas(this.renderer,this.props)}}XY.parseParams=function(W){var n,I,h;return{width:W.width,height:W.height,canvas:W.canvas,alpha:null===(n=W.alpha)||void 0===n||n,antialias:null===(I=W.antialias)||void 0===I||I,offset:null!==(h=W.offset)&&void 0!==h?h:0}},XY.prepareCanvas=function(W,n){W.setPixelRatio(window.devicePixelRatio),W.domElement.style.position="absolute",W.domElement.style.height=`${n.height+2*n.offset}px`,W.domElement.style.width=`${n.width+2*n.offset}px`,W.domElement.style.top=`-${n.offset}px`,W.domElement.style.left=`-${n.offset}px`,W.setClearColor(0,0),W.setSize(n.width+2*n.offset,n.height+2*n.offset)};const LY="LightningGridOverlay--0d806",OY=[w.K8.Player,w.K8.Banker,w.K8.Tie,w.K8.PlayerPair,w.K8.BankerPair],ZY=({width:W,height:n,orientation:I,borders:h,hasMultipliers:q})=>{const $=P$.useRef(null),k=P$.useRef(null),[_,N]=P$.useState(null);P$.useEffect((()=>{null==_||_.reset()}),[W,n,_]);const c=function(W){const[n,I]=P$.useState(null);return P$.useEffect((()=>{jn.I()||W.canvas&&(n?n.resize(W.width,W.height):I(new XY({canvas:W.canvas,width:W.width,height:W.height,offset:W.offset})))}),[W.canvas,W.height,W.offset,W.width,n,I]),n}({canvas:$.current,width:W,height:n,offset:20});return P$.useEffect((()=>{c&&(_?(_.setScene(c),_.setOrientation(I)):N(new i_(new BY,c,I)))}),[c,_,I]),P$.useEffect((()=>{h&&_&&c&&_.update(h)}),[_,h,c]),P$.useEffect((()=>{c&&(q?c.animate():c.stop())}),[c,q]),N$.jsx("div",{className:LY,ref:k,children:N$.jsx("canvas",{ref:$})})},dY=c$.PA((()=>{const W=EY(),n=W.multipliers.potentialMultipliers,I=W.multipliers.multiplierCardsExist,h=W.bets.bets,q=W.multipliers.dealtCardMultiplier,$=W.reference.betSpot.all,k=W.isDebug,_=P$.useMemo((()=>{const I=[];if(OY.every((W=>{return(n=$)&&W in n;var n}))){for(const q of OY){const $=W.reference.betSpot.get(q);$&&I.push({name:q,element:$,color:h[q]||k?uY(n[q],k):p_.None})}for(const W of Object.keys(q))I.push({name:W,color:uY(q[W],k)})}return I}),[$,W.reference.betSpot,h,n,q,k]);return N$.jsx(ZY,{...W.layout.bettingGridSize,borders:_,orientation:W.ag.values.orientation,hasMultipliers:I})}));var mY=I(373595),RY=I(935899),eY=I(803729),jY=I(704249),zY=I(258237);const vY=c$.PA((W=>{const n=EY(),I=n.cards.dealtCards.length>0||Object.keys(n.multipliers.potentialMultipliers).length>0;return!n.preferences.showBettingStats||I?null:N$.jsx(zY.W,{...W,horizontalStatistics:W.betSpot===w.K8.Tie})}));var VY,FY=I(757069),wY=I(663078);!function(W){W.Idle="idle",W.Waiting="waiting",W.Ready="ready",W.InProgress="in_progress"}(VY||(VY={}));class oY{constructor(W,n){this.fps=30,this.options={from:0,to:0},this.duration=W,this.delay=n||0,this.status=this.delay>0?VY.Idle:VY.Ready}get state(){return this.status}get frameTime(){return 1e3/this.fps}run(W){W.from!==W.to&&(this.status===VY.InProgress&&this.finish(),this.options=W,this.status!==VY.Idle?this.status===VY.Ready&&this.start():this.wait((()=>this.start())))}dispose(){var W,n;this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=void 0),this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0,null===(n=(W=this.options).onFinish)||void 0===n||n.call(W))}wait(W){this.status=VY.Waiting,this.delayTimeoutId=setTimeout((()=>{this.status=VY.Ready,W()}),this.delay)}start(){var W,n;this.status=VY.InProgress,this.rafId=requestAnimationFrame((W=>this.animate(W))),null===(n=(W=this.options).onStart)||void 0===n||n.call(W)}shouldEmitChangeInCurrentFrame(W){if(void 0===this.lastFrameTimestamp)return this.lastFrameTimestamp=W,!1;const n=W+16,I=this.lastFrameTimestamp+this.frameTime;return I<=n&&(this.lastFrameTimestamp=I,!0)}animate(W){this.startTimestamp||(this.startTimestamp=W);const n=(W-this.startTimestamp)/this.duration;if(n>=1)this.finish();else{if(this.shouldEmitChangeInCurrentFrame(W)){const W=this.computeNextValue(n);this.emit(W)}this.rafId=requestAnimationFrame((W=>this.animate(W)))}}computeNextValue(W){const{from:n,to:I}=this.options,h=n+(I-n)*W,q=10**function(W){const n=W.toString(),I=n.indexOf(".");return-1===I?0:n.length-I-1}(I);return Math.round(h*q)/q}emit(W){var n,I;this.previousValue!==W&&(this.previousValue=W,null===(I=(n=this.options).onChange)||void 0===I||I.call(n,W))}finish(){this.dispose(),this.emit(this.options.to),this.lastFrameTimestamp=void 0,this.startTimestamp=void 0,this.status=VY.Ready}}const{useState:DY,useRef:xY}=S$,GY=P$.memo((({children:W,duration:n,value:I,delay:h,disabled:q,forceFromInitialValue:$,onStart:k,onFinish:_,skipSetTargetValueWhenDisabled:N=!1})=>{const c=jn.I()?0:n,P=xY(new oY(c,h)),[S,g]=DY(0),B=FY.Z(I);q&&S!==I&&!N&&g(I),P$.useEffect((()=>{q||P.current.run({from:$?0:null!=B?B:0,to:I,onChange:g,onStart:k,onFinish:_})}),[q,_,k,I,B,$]),wY.i((()=>P.current.dispose()));const E=W(S,S===I);return E&&P$.Children.only(E)})),yY=P$.memo((function({duration:W,value:n,isCounterEnabled:I=!1,...h}){return N$.jsx(GY,{value:n,duration:W,disabled:!I,children:W=>N$.jsx(ok,{value:W,...h})})})),CY="appearingMultiplier--a36e6",bY="multiplier--fe086",lY=({animationDelay:W=0,animationDuration:n=0,value:I,countingDuration:h=0,skipAnimation:q=!1,countingEnabled:$=!1,align:k,withShadow:_=!0,getMultiplierTheme:N})=>{const[c,P]=P$.useState(q),S=Number(c),g=P$.useCallback((()=>{c||P(!0)}),[c]),B=c?void 0:{animationDelay:`${W}ms`,animationDuration:`${n}ms`};return N$.jsx("div",{className:c?bY:CY,style:B,onAnimationEnd:g,children:N$.jsx(yY,{value:I,sign:"x",duration:h,isCounterEnabled:c&&$,align:k,theme:null==N?void 0:N(I),withShadow:_},S)})},AY="multiplierContainer--7f5ed",pY="small--be963",iY="portrait--ec945",UY="landscape--cf355",QY={[w.K8.Player]:"player--49445",[w.K8.Banker]:"banker--9eac0",[w.K8.Tie]:"tie--0c662",[w.K8.PlayerPair]:"playerPair--e3829",[w.K8.BankerPair]:"bankerPair--e1eec"},TY=P$.memo((({betSpot:W,multiplier:n,isPortrait:I,containerClassNames:h,withShadow:q,onMultiplierChange:$,getMultiplierTheme:k})=>{const N=function(W=[]){const n=P$.useRef(!1);return P$.useEffect((()=>(n.current=!0,()=>{n.current=!1})),W),n.current}(),c=n>1;P$.useEffect((()=>{c&&$&&$(n)}),[c,n,$]);const P=new Set([w.K8.PlayerPair,w.K8.BankerPair]).has(W),{smallMultiplierOnSideBetSpot:S}=_.vL();return c?N$.jsx("div",{className:g$.A(AY,QY[W],h,{[iY]:I,[UY]:!I,[pY]:P&&!!S}),children:N$.jsx(lY,{value:n,countingDuration:500,countingEnabled:N&&!jn.I(),skipAnimation:!0,withShadow:q,getMultiplierTheme:k})}):null})),HY="xtremeBetSpotMultiplier--0e4c5",aY="landscape--ebcdd",JY=c$.PA((({betSpot:W,getMultiplierTheme:n})=>{var I;const h=EY(),q=h.device.isLandscape,$=h.gamePhase.value,k=P$.useCallback((n=>{$===w.Qc.Resolved&&h.log.clientTotalMultiplierDisplayed(W,n)}),[W,$,h.log]),_=P$.useMemo((()=>g$.A(HY,{[aY]:q})),[q]);return N$.jsx(TY,{containerClassNames:_,betSpot:W,isPortrait:h.device.isPortrait,onMultiplierChange:k,multiplier:null!==(I=h.multipliers.potentialMultipliers[W])&&void 0!==I?I:0,getMultiplierTheme:n})})),sY=W=>{const{children:n,betSpot:I}=W;return N$.jsxs(jY.V,{...W,BetSpotInfo:vY,children:[N$.jsx(JY,{betSpot:I,getMultiplierTheme:S_}),n]})},MY=W=>N$.jsx(mY.lN,{...W,GridCard:RY.A,CommonBetSpot:sY,cardType:eY.b.Enhanced});var Wf=I(656846);const nf=W=>N$.jsx(Wf.k,{...W,CommonBetSpot:sY,payouts:[_.Tl("xtreme.betSpot.Tie.payout")]});var If=I(905153);function hf(W){return[_.Tl(`xtreme.betSpot.${W}.payout`)]}const qf=W=>{const{betSpot:n}=W,I=n,h=P$.useCallback((()=>N$.jsx(JY,{betSpot:I,getMultiplierTheme:S_})),[I]);return N$.jsx(If.p,{...W,payouts:hf(n),ExtraComponent:h})},$f=c$.PA((({isCollapsed:W})=>{const n=EY(),h=P$.lazy((()=>I.e(24451).then(I.bind(I,962567)).then((W=>({default:W.FpsMeter}))))),{isBetsOpen:q}=n.gamePhase,$=P$.useCallback((()=>!q),[q]);return N$.jsxs(N$.Fragment,{children:[n.isDebug&&N$.jsx(P$.Suspense,{children:N$.jsx(h,{})}),N$.jsx(A_,{onBetSpotClick:n.betProcessor.placeChip,MainBetSpot:MY,TieBetSpot:nf,SideBetSpot:qf,isCollapsed:W,GridOverlay:dY,betSpotHandlersActive:$})]})})),kf=c$.PA((()=>{const W=EY(),n=W.gamePhase.isBetsOpen,I=W.timer.timeRemaining;return N$.jsx(y_,{isBettingTime:n,timeRemaining:I,children:N$.jsx($f,{})})})),_f="leftFooter--7be2d",Nf="shadow--50a62",cf=({children:W})=>N$.jsxs("div",{className:_f,children:[N$.jsx("div",{className:Nf}),W]}),Pf="logo--43fd7",Sf=({tableLogo:W})=>W?N$.jsx("div",{className:Pf,children:N$.jsx("img",{src:W})}):null,gf="hidden--b2d3a",Bf="noAnimation--852ad",Ef="logo--12ecd",uf=c$.PA((({isVisible:W,skipHideAnimation:n})=>{const I=w$.P();return N$.jsx("div",{className:g$.A(Ef,{[gf]:!W,[Bf]:!W&&n}),children:N$.jsx(Sf,{tableLogo:I.settings.tableLogo})})})),Yf="feeBox--ffb1c",ff="desktopLayout--8348e",rf="classicLayout--1d5f5",Kf="fixedHeight--36b3a",tf="logo--24052",Xf="fee--63053",Lf="cards--bfbed",Of="effects--8dca2",Zf="fromBottom--18e74";function df(W,n){return W?{}:{height:`calc(100% - ${n}px)`,marginTop:Math.floor(1.3*n)}}const mf=({minHeight:W,isClassicLayout:n,isDesktop:I,isLogoVisible:h,skipLogoHiddenAnimation:q,isCollapsed:$,components:k})=>{const{Fee:_,Cards:N,BoxEffects:c}=k;return N$.jsxs("div",{className:g$.A(Yf,{[ff]:I&&!n,[rf]:n,[Kf]:I,[Zf]:I&&n}),style:{minHeight:W},children:[I&&N$.jsx("div",{className:tf,style:df(n,W),children:N$.jsx(uf,{isVisible:h,skipHideAnimation:q})}),N$.jsx("div",{className:Xf,children:N$.jsx(_,{isCollapsed:$})}),N&&N$.jsx("div",{className:g$.A(Lf,{[rf]:n}),children:N$.jsx(N,{})}),c&&N$.jsx("div",{className:Of,children:N$.jsx(c,{})})]})};var Rf=I(78886);const ef="container--bed95",jf=P$.memo((({createFeeSounds:W,...n})=>{const I=P$.useRef(W());P$.useEffect((()=>{I.current=W()}),[W]),P$.useEffect((()=>()=>{I.current&&I.current.dispose()}),[]);const h=P$.useCallback((W=>{I.current&&I.current.playEffect(W)}),[]);return N$.jsx("div",{className:ef,children:N$.jsx(Rf.c,{...n,onFeeEffect:h,role:"fee-with-sounds"})})}));var zf;!function(W){W.ChargeLoopStart="chargeLoopStart",W.ChargeLoopStop="chargeLoopStop",W.ChargeHeavy="charge"}(zf||(zf={}));class vf{constructor(){this.isLoopPlaying=!1}playEffect(W){switch(W){case sh.V.BetPlaced:this.playChargeLightLoop();break;case sh.V.AnimationStart:this.playChargingHeavy();break;case sh.V.None:this.stopChargeLightLoop()}}dispose(){}playChargeLightLoop(){this.isLoopPlaying||(jW.triggerEvent(zf.ChargeLoopStart),this.isLoopPlaying=!0)}stopChargeLightLoop(){this.isLoopPlaying&&(jW.triggerEvent(zf.ChargeLoopStop),this.isLoopPlaying=!1)}playChargingHeavy(){jW.triggerEvent(zf.ChargeHeavy)}}function Vf(){return new vf}function Ff(W,n=$q.Xo.MaxDuration,I=!0){const h=jn.I();return function(W,n=$q.Xo.MaxDuration,I=!0){const[h,q]=P$.useState(!1),$=P$.useRef(0),k=P$.useRef(0),_=()=>{$.current&&window.clearTimeout($.current),k.current&&window.clearTimeout(k.current)};return P$.useEffect((()=>{if(_(),I)return $.current=window.setTimeout((()=>{q(!0),k.current=window.setTimeout((()=>{q(!1)}),n)}),W),()=>{_()};h&&q(!1)}),[W,I,n]),P$.useEffect((()=>()=>q(!1)),[]),h}(h?0:W,h?0:n,I)}function wf(W,n,I=0){P$.useEffect((()=>{if(W&&n){const W=window.setTimeout(n,I);return()=>{window.clearTimeout(W)}}}),[W,n,I])}function of(W){return`sprite-effect-${W}`}const Df=({id:W,currentAnimation:n,layer:I,isFrozenSprites:h=!1,onAnimationEnd:q,onAnimationStart:$})=>{const k=P$.useRef(null),_=function(W){const[n,I]=P$.useState(null);return P$.useEffect((()=>{W.current?I(W.current.getContext("2d")):I(null)}),[W.current]),n}(k),N=function(W){return Pq[W]||(Pq[W]=new Sq),Pq[W]}(W);return P$.useEffect((()=>{N.setLayer({...I,isFrozen:h,callbacks:{onAnimationStart:$,onAnimationEnd:q}})}),[I,h,N,q,$]),P$.useEffect((()=>{N.setContext2d(_)}),[_,N]),P$.useEffect((()=>(N.setCurrentAnimation(n),()=>{N.setCurrentAnimation("")})),[n,N]),N$.jsx("canvas",{ref:k,width:I.width,height:I.height,style:{width:"100%",height:"100%"},"data-role":of(W)})},xf="container--9bff5",Gf=({animation:W,onAnimation:n,layerOptions:I})=>(P$.useEffect((()=>{null==n||n(W)}),[W,n]),N$.jsx("div",{className:xf,children:N$.jsx(Df,{id:$q.BV.Fee,layer:I,currentAnimation:W})})),yf=function(W=n_){return{layerId:$q.BV.Fee,animationTimelines:{[sh.V.BetPlaced]:h_(!1,W),[sh.V.AnimationStart]:h_(!0,W)},x:0,y:0,width:846,height:160,isFrozen:!1}}(Mk.Red),Cf=W=>N$.jsx(Gf,{...W,layerOptions:yf});var bf=I(496904);const lf=$q.v2-$q.uj,Af=c$.PA((()=>{const W=EY(),{key:n,mappings:I}=W.fee.tooltipText,h=_.Tl(n,I);return N$.jsx(jf,{feeAmount:W.fee.value,feePercentage:W.fee.percentage,currency:W.settings.currencySymbol,orientation:W.device.orientation,tooltipLabel:h,animation:W.fee.animation,dimensions:W.layout.feeDimensions,isVisible:!W.multipliers.multiplierCardsExist,withAnimation:W.gamePhase.isLightning,animationDuration:$q.ei,animationDelay:lf,disappearingDelay:$q.v2,Effects:Cf,theme:W.fee.animation===sh.V.AnimationStart?bf.m.RedStrikeTime:bf.m.Red,createFeeSounds:Vf,feeThemes:bf.t,registerReference:W.reference.common.set})}));var pf=I(912986);const Uf=()=>N$.jsx(Df,{id:$q.ay.ExtraLightningStrike,layer:{layerId:$q.ay.ExtraLightningStrike,animationTimelines:{[$q.$e.Enabled]:[{id:"extraLightningStrike",spriteUrl:Hk,duration:$q.Xo.ExtraStrike}]},x:0,y:0,width:800,height:800,isFrozen:!1},currentAnimation:$q.$e.Enabled});var Qf=I(886490);function Tf({children:W,className:n,isLandscape:I}){const h=P$.useRef(null),[q,$]=P$.useState(""),k=P$.useCallback((()=>{const W=h.current;if(W){const n=`${W.offsetHeight}px`;$(n)}}),[]);return P$.useLayoutEffect((()=>{k()}),[I]),P$.useEffect((()=>Qf.w9(k)),[]),N$.jsx("div",{ref:h,className:n,style:{fontSize:q},children:W})}var Hf=I(595922);const af=({index:W,delay:n,layerTheme:I=Mk.Golden})=>{const h=Ff(n)?$q.$e.Enabled:$q.$e.Disabled,q=P$.useMemo((()=>function(W=n_){return{layerId:`${$q.ay.LightningBackground}-${W}`,animationTimelines:{[$q.$e.Enabled]:[{id:`lightningBackground-01-${W}`,spriteUrl:I_[W].tombstoneBackground,duration:$q.Xo.FeeStart}]},x:0,y:0,width:194,height:132,isFrozen:!1}}(I)),[I]);return N$.jsx(Df,{id:`${$q.ay.LightningCardBackground}-${W}`,layer:q,currentAnimation:h})},Jf=P$.memo((({index:W,delay:n,layerTheme:I=Mk.Golden})=>{const h=Ff(n),q=P$.useMemo((()=>h?$q.$e.Enabled:$q.$e.Disabled),[h]),$=P$.useMemo((()=>function(W=n_){return{layerId:`${$q.ay.LightningCardBorder}-${W}`,animationTimelines:{[$q.$e.Enabled]:[{id:`lightningCardBorder-1-${W}`,spriteUrl:I_[W].tombstoneBorderStart,duration:$q.Xo.FeeStart},{id:`lightningCardBorder-2-${W}`,spriteUrl:I_[W].tombstoneBorderLoop,duration:4294967295}]},x:0,y:0,width:194,height:276,isFrozen:!1}}(I)),[I]);return N$.jsx(Df,{id:`${$q.ay.LightningCardBorder}-${W}`,layer:$,currentAnimation:q})})),sf="container--f1062",Mf="noAnimation--d93fd",Wr="shell--b6cc7",nr="lightningBackground--ccfb9",Ir="lightningBorder--0305c",hr="elements--b5605",qr="cardContainer--37297",$r="card--61833",kr="cardAppear--e378f",_r="cardBorder--78d9e",Nr="flare--f6621",cr="multiplier--e5dc8",Pr=({card:W,multiplier:n,index:I,isDealt:h,baseTime:q,cardTime:$,withAnimation:k,onCardDisplay:_,onCardReveal:N,layerTheme:c,theme:P,isLandscape:S,onAnimationEnd:g,extraAnimationComponent:B=null,extraDelay:E=0,onExtraAnimationPlay:u=pf.A})=>{const Y=P$.useRef(null),[f,r]=P$.useState(!1),K=P$.useCallback((()=>{_&&_({card:W,multiplier:n})}),[_,W,n]),t=P$.useCallback((()=>{N&&N({card:W,multiplier:n})}),[N,W,n]),X=$-250,L=k?q+X*I+E:0,O=k?L+X:0,Z=k?X:0,d=k?Z+X:0;wf(k,K,L),wf(h,t,L);const m=P$.useCallback((W=>{W.target===Y.current&&(null==g||g(),B&&(r(!0),null==u||u()))}),[B,g,u]);return N$.jsxs("div",{className:g$.A(sf,{[Mf]:!k}),style:{animationDelay:`${L}ms`,animationDuration:`${Z}ms`},onAnimationEnd:m,ref:Y,children:[N$.jsx("div",{className:g$.A(Wr,null==P?void 0:P.shell),style:{backgroundImage:`url("${(null==P?void 0:P.tombstoneBackgroundSvg)||$_}")`}}),N$.jsxs("div",{className:hr,children:[n&&N$.jsx(Tf,{className:cr,isLandscape:S,children:N$.jsx(lY,{value:n,animationDelay:L,animationDuration:d,getMultiplierTheme:S_})}),N$.jsxs("div",{className:qr,children:[N$.jsx("div",{className:g$.A($r,{[kr]:h}),children:N$.jsx(Hf.Z,{code:W,theme:C$.Sx.Default,colorScheme:h?C$.zM.Default:C$.zM.Dark})}),N$.jsx("div",{className:(null==P?void 0:P.borderColor)||_r})]}),h&&N$.jsx("div",{className:Nr})]}),k&&N$.jsx("div",{className:nr,children:N$.jsx(af,{index:I,delay:O,layerTheme:c},I)}),N$.jsx("div",{className:g$.A(Ir),children:N$.jsx(Jf,{index:I,delay:O,layerTheme:c},I)}),f&&B]})},Sr="lightningCards--400e0",gr="fromBottom--b3d1e",Br="fromCenter--ae4ea",Er="lightningCard--58c7c",ur="bubbleRef--58ce9",Yr="bubblePosition--d2a66",fr="firstCard--2614f",rr="lastCard--ef388",Kr="landscape--6f3ec",tr="portrait--5f705",Xr="extraLightningStrike--2d373";let Lr=0;const Or=({isLandscape:W,role:n,children:I,isBubbleRef:h,isFirst:q,isLastCard:$,index:k,needSideAnimation:_})=>{const N=P$.useRef(null);return P$.useLayoutEffect((()=>{if(N.current&&void 0!==k)if(_){0===k&&(Lr=N.current.offsetTop);const W=N.current.offsetLeft,n=N.current.firstChild.offsetWidth,I=-(W-k*n*.87),h=-(N.current.offsetTop-Lr);N.current.style.transform=`translate(${I}px, ${h}px)`}else N.current.style.transform="translate(0px, 0px)"}),[_,k,W]),N$.jsx("div",{ref:N,"data-role":n,className:g$.A(Er,{[Kr]:W,[tr]:!W,[ur]:h,[fr]:q,[rr]:$}),children:I})},Zr=({lightningCards:W,dimensions:n,isDesktop:I,isClassicLayout:h,withAnimation:q,onAnimationEnd:$,isLandscape:k,getLayerTheme:_,getTombstoneTheme:N,onCardDisplay:c,onCardReveal:P,registerBubbleRef:S=pf.A,onExtraAnimationPlay:g})=>{const B=C_.v(S,Qh.MultipliersCards),[E,u]=P$.useState(0);P$.useEffect((()=>{q&&W.length>0&&E===W.length&&(null==$||$())}),[q,E,W.length,$]);const Y=P$.useCallback((()=>{u((W=>W+1))}),[]),f=N$.jsx("div",{className:g$.A(Xr,{[tr]:!I&&!k,[Kr]:!I&&k}),children:N$.jsx(Uf,{})}),r=W.length,{scale:K,scaledWidth:t,scaledHeight:X,absoluteWidth:L,absoluteHeight:O,reverseScale:Z}=n,d={"--cardMaxHeight":`${O}px`,"--cardMaxWidth":`${L}px`,"--cardsCount":r,"--reverseScale":Z};return N$.jsx("div",{style:{width:t,height:X},children:N$.jsxs("div",{style:{transform:`scale(${K})`,width:L,height:O,...d},className:g$.A(Sr,{[gr]:I&&!h,[Br]:h}),"data-role":"lightning-cards",children:[N$.jsx(Or,{isBubbleRef:!0,isLandscape:k,children:N$.jsx("div",{className:Yr,ref:B})},"multiplier-bubble-ref"),W.map(((n,I)=>{const{card:h,multiplier:$,isDealt:S}=n,B=null==N?void 0:N($),u=null==_?void 0:_($),r=`card${I}`,K=q&&E!==W.length&&8!==W.length;return N$.jsx(Or,{role:`card-${h}-multiplier-${$}-lightning-${S}`,isLandscape:k,isFirst:0===I,isLastCard:I===W.length-1,needSideAnimation:K,index:I,children:P$.createElement(Pr,{...n,withAnimation:q,index:I,key:r,theme:B,layerTheme:u,isLandscape:k,onAnimationEnd:q?Y:void 0,onCardDisplay:c,onCardReveal:P,extraDelay:I>5&&q?$q.Xo.ExtraStrike:0,onExtraAnimationPlay:g,extraAnimationComponent:W.length>6&&5===I&&q?f:null})},r)}))]})})},dr=c$.PA((()=>{const W=EY(),n=W.multipliers.multipliersCards,I=W.layout.lightningCardsDimensions,h=W.multipliers.multiplierCardsExist,q=W.gamePhase.isLightning,$=W.device.isDesktop,k=W.device.isLandscape,_=W.layout.isDesktopClassic,N=P$.useCallback((()=>{W.layout.setIsMultipliersCardsVisible(!0)}),[W.multipliers]);P$.useEffect((()=>{h&&!q&&W.layout.setIsMultipliersCardsVisible(!0),h||W.layout.setIsMultipliersCardsVisible(!1)}),[h,W.layout,q]);const c=P$.useCallback((n=>{W.multipliers.setCardsVisible(),Uq(n.multiplier)?W.sounds.playTombstoneCardHigh():W.sounds.playTombstoneCard()}),[W.sounds,W.multipliers]),P=P$.useCallback((()=>{W.sounds.playExtraMultipliers()}),[W.sounds]);return h?N$.jsx(Zr,{registerBubbleRef:W.reference.bubble.set,lightningCards:n,dimensions:I,withAnimation:q,isDesktop:$,isLandscape:k,isClassicLayout:_,getTombstoneTheme:g_,getLayerTheme:B_,onAnimationEnd:N,onCardDisplay:c,onExtraAnimationPlay:P}):null})),mr="strike--0ac0f",Rr="xSymbols--1869f",er=I.p+"images/xsymbols.f75f9a02.webp",jr=({isVisible:W,dimensions:n,containerDimensions:I,top:h,imageOffset:q,layerTheme:$})=>{const k=Ff($q.uj,$q.Xo.Strike,W),_=P$.useMemo((()=>function(W){const n=null!=W?W:Mk.Golden;return{layerId:$q.ay.LightningStrike,animationTimelines:{[$q.$e.Enabled]:[{id:"lightningStrike",spriteUrl:I_[n].lightningStrike,duration:$q.Xo.Strike}]},x:0,y:0,width:360,height:272,isFrozen:!1}}($)),[$]);if(!k)return null;const{scaledWidth:N,scaledHeight:c}=n,P=1!==I.reverseScale?{transform:`scale(${1/I.reverseScale})`}:{};return N$.jsxs("div",{className:mr,style:{width:N,height:c,marginTop:h},children:[N$.jsx("div",{className:Rr,style:{width:I.scaledWidth,height:I.scaledHeight,marginTop:q},children:N$.jsx("img",{src:er,style:P})}),N$.jsx(Df,{id:$q.ay.LightningStrike,layer:_,currentAnimation:$q.$e.Enabled})]})},zr={Cards:dr,BoxEffects:c$.PA((()=>{const W=EY(),n=W.layout.lightningStrikeDimensions,I=W.layout.lightningCardsDimensions,h=W.gamePhase.isLightning&&!W.multipliers.cardsVisible,q=W.layout.feeDimensions.scaledHeight,$=W.layout.isDesktopImmersive?0:-q;return N$.jsx(jr,{isVisible:h,top:q,imageOffset:$,dimensions:n,containerDimensions:I,layerTheme:Mk.Red})})),Fee:Af},vr=c$.PA((()=>{const W=EY();return N$.jsx(mf,{minHeight:W.layout.feeDimensions.scaledHeight,isClassicLayout:W.layout.isDesktopClassic,isDesktop:W.device.isDesktop,isLogoVisible:!W.multipliers.multiplierCardsExist,skipLogoHiddenAnimation:W.layout.skipLogoHiddenAnimation,components:zr})})),Vr="roads--d0173",Fr="white--48bfa",wr="noPadding--52fc3",or="left--4936f",Dr="rounded--adbc9",xr="right--94e52";var Gr;function yr({children:W,whiteBackground:n,position:I,isDesktop:h,rounded:q,displayMode:$}){return W&&N$.jsx("div",{className:g$.A(Vr,{[Fr]:n,[or]:I===Gr.Left,[xr]:I===Gr.Right,[Dr]:q,[wr]:!h||$===KW.FourLinesDesktopClassic}),children:W})}!function(W){W.Left="left",W.Right="right"}(Gr||(Gr={}));const Cr=c$.PA((function({children:W,whiteBackground:n,position:I}){const h=w$.P(),q=h.device.isDesktop,$=h.layout.roadsDisplayMode,k=h.settings.isBaccaratV4;return N$.jsx(yr,{whiteBackground:n,position:I,isDesktop:q,displayMode:$,rounded:q&&k,children:W})})),br=new Map([[c.I.Chinese,"chinese"],[c.I.Normal,"normal"],[c.I.Korean,"korean"],[c.I.Number,"number"]]),lr="beadRoad--9fce3";function Ar(W){switch(W){case rW.DesktopImmersive:return 26;case rW.DesktopClassic:return 21;case rW.TabletLive:case rW.PhoneLandscapeLive:return 10;case rW.PhonePortraitLive:return 26;case rW.ExtraLargeLandscape:return 15;case rW.LargeLandscape:return 10;case rW.SmallLandscape:return 8;case rW.PhonePortrait:return 5;default:Bn.xb(W)}}function pr(W){return{columnCount:Ar(W),rowCount:6}}function ir(W,n){return n[(n.indexOf(W)+1)%n.length]}const Ur=P$.memo((({withTooltip:W,displayMode:n,gridIcons:I,scorecardTheme:h,mode:q,modes:$,onModeChanged:k,hideTooltip:_,showTooltip:c,skipFirstLastLines:P,columnsCount:S,scorecardThemesOverrides:g,IconShapeComponent:B})=>{const E=()=>{_&&_()},{rowCount:u}=pr(n),Y={rowCount:u,columnCount:S,scorecardTheme:h,gridIcons:I,isInterlacedMode:!1,IconShapeComponent:B,skipFirstLastLines:P,defaultIconId:"bead-road",scorecardThemesOverrides:g},f={onClick:n=>{n.preventDefault();const I=ir(q,$);k({mode:I}),W&&E()}};return W&&(f.onMouseEnter=W=>{if(c){const n=ir(q,$);c(`tooltip.beadRoad.${br.get(n)}`,Cn(W.currentTarget))}},f.onMouseLeave=E),N$.jsx("svg",{...f,"data-role":`${N.RoadType.Bead}-road`,"data-mode":q,viewBox:`0 0 ${S} ${u}`,className:lr,children:N$.jsx(N.RoadMemo,{...Y,...f})})}),eI.A);function Qr({containerWidth:W,containerHeight:n,containerPadding:I=0,spaceBetweenBigDerivatives:h=0},q=Math.ceil){const $=9+h,k=6+h,_=3*q(W/n*($+I)/3),c=_/3,P=_-2*c;return{container:{width:_,height:$},roads:{[N.RoadType.Big]:{x:0,y:0,width:_,height:6,interlaced:!1},[N.RoadType.BigEye]:{x:0,y:k,width:c,height:3,interlaced:!0},[N.RoadType.Small]:{x:c,y:k,width:P,height:3,interlaced:!0},[N.RoadType.Cockroach]:{x:c+P,y:k,width:c,height:3,interlaced:!0},[N.RoadType.Bead]:{x:0,y:0,width:0,height:0,interlaced:!0}}}}function Tr(W){return Qr(W)}function Hr({containerWidth:W,containerHeight:n,beadColumns:I,beadRows:h,directionRow:q,containerPadding:$=0,spaceBetweenBlocks:k=0,spaceBetweenBigDerivatives:_=0}){const c=9+(q?_:0);if(q){const q=c*I/h,k=Tr({containerWidth:W-n*q/c,containerHeight:n,containerPadding:$,spaceBetweenBigDerivatives:_});return k.roads[N.RoadType.Bead].width=q,k.roads[N.RoadType.Bead].height=c,k}const P=I*c/h,S=n-W/I*h,g=Tr({containerWidth:W,containerHeight:S-n/(c+c*P/(3*Math.ceil(W/S*c/3))+k)*k,containerPadding:$,spaceBetweenBigDerivatives:_});return g.roads[N.RoadType.Bead].width=P,g.roads[N.RoadType.Bead].height=c,g}var ar,Jr=I(765198);function sr(W,n){return Jr.A(Object.keys(n).map((I=>{const h=W.roads[I];return IK(h,WK(h,W.container,n[I]),I)})))}!function(W){W.Idle="Idle",W.ZoomingIn="ZoomingIn",W.ZoomingOut="ZoomingOut",W.Zoomed="Zoomed"}(ar||(ar={}));const Mr=.8;function WK(W,n,I){const h=n.height/W.height*W.width,q=h*(Number.isNaN(I)?0:I)/100;let $=0;if(h<n.width)$=(n.width-h)/2;else if(q>n.width*Mr){const I=h/W.width,k=Math.ceil((n.width*Mr-q)/I)*I;$=Math.max(n.width-h,k)}return{x:$,y:0,height:n.height,width:h,interlaced:W.interlaced}}const nK=["x","y","width","height"];function IK(W,n,I,h){return nK.filter((I=>W[I]!==n[I])).map((q=>({from:W[q],to:n[q],attr:q,disabled:!!h,target:I,key:I+q+String(W[q]>n[q])}))).filter((({to:W,from:n})=>!Number.isNaN(W)&&!Number.isNaN(n)))}function hK(W,n,I={}){var h;const q=(null!==(h=Number(I.strokeWidth))&&void 0!==h?h:0)/2;switch(W){case N.RoadType.Big:return N$.jsx("line",{x1:0,y1:n.height,x2:n.width,y2:n.height,...I},`${W}-bottom`);case N.RoadType.BigEye:return N$.jsxs(N$.Fragment,{children:[N$.jsx("line",{x1:n.x,y1:n.y,x2:n.width,y2:n.y,...I},`${W}-top`),N$.jsx("line",{x1:n.width,y1:n.y,x2:n.width,y2:n.y+n.height,...I},`${W}-right`)]});case N.RoadType.Small:return N$.jsxs(N$.Fragment,{children:[N$.jsx("line",{x1:n.x,y1:n.y,x2:n.x+n.width,y2:n.y,...I},`${W}-top`),N$.jsx("line",{x1:n.x,y1:n.y+q,x2:n.x,y2:n.y+n.height,...I},`${W}-left`),N$.jsx("line",{x1:n.x+n.width,y1:n.y+q,x2:n.x+n.width,y2:n.y+n.height,...I},`${W}-right`)]});case N.RoadType.Cockroach:return N$.jsxs(N$.Fragment,{children:[N$.jsx("line",{x1:n.x,y1:n.y,x2:n.x+n.width,y2:n.y,...I},`${W}-top`),N$.jsx("line",{x1:n.x,y1:n.y+q,x2:n.x,y2:n.y+n.height,...I},`${W}-left`)]})}return null}function qK(W=[],n,I){const h=[...W].sort(((W,n)=>n.col-W.col)),q=h.length?h[0].col:0,$=I?2*n:n;let k=0;return q>$?k=100:(k=Math.ceil(q/$*100),k=Number.isNaN(k)?0:k),k}const $K=P$.memo((function({roads:W,roadsProgress:n,showTooltip:I,hideTooltip:h,layout:q,onFocusedRoadChange:$,isStatic:k=!1,uniqId:_,zoomRoadOverflow:N=!1,framesAroundRoadsStyles:c,RoadContainer:P,onClick:S}){const[g,B]=P$.useState(void 0),[E,u]=P$.useState(W),Y=P$.useRef(null!=_?_:String(Math.random())),[f,r,K]=function(W,n,I){const[h,q]=P$.useState(sr(n,I)),[$,k]=P$.useState(n.roads),[_,N]=function(W){const[n,I]=P$.useState(void 0),[h,q]=P$.useState(ar.Idle);return P$.useEffect((()=>{h===ar.Idle&&W?(I(W),q(ar.ZoomingIn),setTimeout((()=>q(ar.Zoomed)),400)):h!==ar.Zoomed||W||(q(ar.ZoomingOut),setTimeout((()=>{q(ar.Idle),I(void 0)}),400))}),[h,W]),[n,h]}(W);return P$.useEffect((()=>{if(N===ar.ZoomingIn){const W=n.roads[_],h=WK(W,n.container,I[_]);q(IK(W,h,_,!0))}else if(N===ar.Zoomed){const W=n.roads[_],h=WK(W,n.container,I[_]),$={...n.roads,[_]:h};q(IK(h,W,_)),k($)}else if(N===ar.ZoomingOut){const W=n.roads[_],h=WK(W,n.container,I[_]);q(IK(h,W,_,!0))}else N===ar.Idle&&(k(n.roads),q(sr(n,I)))}),[_,n,N,I]),[$,h,N===ar.Idle||N===ar.Zoomed]}(g,q,n),t=P$.useCallback((W=>()=>{if(null==S||S(),K){u((n=>[...n.filter((n=>n!==W)),W]));const n=g?void 0:W;B(n),$&&$(n),null==h||h()}}),[h,$,g,K,S]),X=P$.useCallback((W=>n=>{if(I){const h=g===W?"tooltip.clickToMinimize":"tooltip.clickToEnlarge",q=n.currentTarget.getBoundingClientRect();I(h,q)}}),[I,g]);return N$.jsxs("svg",{viewBox:`0 0 ${q.container.width} ${q.container.height}`,xmlns:"http://www.w3.org/2000/svg",children:[E.map((W=>{const n=N&&g&&g!==W,I=c&&g!==W;return N$.jsxs("g",{children:[N$.jsx(P,{x:f[W].x,y:f[W].y,onMouseEnter:k?void 0:X(W),onMouseLeave:k?void 0:h,onClick:k?void 0:t(W),id:`${W}-${Y.current}`,width:f[W].width,height:f[W].height,hidden:n,layout:q,roadType:W,focusedRoad:g},`${W}`),I&&hK(W,f[W],c)]},W)})),!k&&r.map((({target:W,attr:n,from:I,to:h,disabled:q,key:$})=>N$.jsx("animate",{xlinkHref:`#${W}-${Y.current}`,from:I,to:h,attributeName:n,dur:"400ms",begin:q?"indefinite":"click",fill:"freeze"},$)))]})}),eI.A),kK=c$.PA((({roads:W,roadsData:n,zoomRoadOverflow:I,gridLayout:h,showTooltip:$,hideTooltip:k,RoadContainer:_,framesAroundRoadsStyles:c,onFocusedRoadChange:P})=>{const S=q.Pj(),g=Object.keys(h.roads).reduce(((W,I)=>Object.assign(W,{[I]:qK(n[I],h.roads[I].width,h.roads[I].interlaced)})),{}),B=P$.useCallback((W=>{const n=function(W){switch(W){case N.RoadType.Big:return v.Big;case N.RoadType.Small:return v.SmallEye;case N.RoadType.Cockroach:return v.Cockroach;case N.RoadType.BigEye:return v.BigEye;default:return}}(W),I=W?V.Enlarged:V.Original;null==P||P(W),S.log.clientFourRoad(I,n)}),[P,S.log]),E=P$.useCallback((()=>{S.sounds.playClickButtonSound()}),[S.sounds]);return N$.jsx($K,{roads:W,layout:h,roadsProgress:g,isStatic:!1,onFocusedRoadChange:B,zoomRoadOverflow:I,showTooltip:$,hideTooltip:k,RoadContainer:_,onClick:E,framesAroundRoadsStyles:c})}));var _K=I(278982);const NK="flyingBodies--27a9a",cK="isDesktop--22d39",PK="flyingBody--6d663",SK="pulse--3be52",gK="hiding--715aa";function BK(W,n,I){return YK(n,I)?W+.1:uK(n)?0:W}const EK={};function uK(W){return 1===W}function YK(W,n){const I=function(W){return W/100}(n);return W>=I&&!uK(W)}function fK(W,n){return Date.now()-n>W.startTime}const rK=({Component:W,bodies:n,defaultBodyValue:I,isAnimationEnabled:h,isDesktop:q,releaseBodies:$,scale:k=1,zIndex:_,animationDuration:N,animationLandPercentage:c,pulseAnimationDuration:P,scaleFunction:S,registerBodyContainerRef:g,getBodyRef:B,bodiesKey:E,reverseScale:u,skipVisibilityCheck:Y=!1,autoDetectScale:f=!1,flyingBodiesContainerKey:r="flying-bodies-box-key"})=>{const K=C_.v(g,r),t=P$.useRef(),X=P$.useRef(),L=P$.useRef(2*N),O=P$.useRef(null),Z=P$.useCallback((()=>{t.current&&(cancelAnimationFrame(t.current),t.current=void 0)}),[]),d=P$.useCallback((()=>{X.current&&(clearTimeout(X.current),X.current=void 0)}),[]);return P$.useEffect((()=>{function W(n){var I,h;if(H.A(n))Z();else{const q=f?(h=B(r))?h.getBoundingClientRect().width/h.offsetWidth:1:u;(function({bodies:W,originalScale:n,animationDuration:I,maxAnimationDuration:h,animationLandPercentage:q,pulseAnimationDuration:$,scaleFunction:k=BK,bodySize:_,getBodyRef:N,skipVisibilityCheck:c,reverseScale:P,flyingBodiesContainerKey:S="flying-bodies-box-key"}){W.forEach((W=>{if(fK(W,h))return;const{from:g,id:B,startTime:E,to:u}=W,Y=N(g),f=N(u),r=N(S);if(!Y||!f||!r)return;if(!(Y.offsetParent&&f.offsetParent||c))return;const K=function(W,n){const I=(h=0,q=n,$=Date.now()-W,Math.min(Math.max(h,$),q)/n);var h,q,$;return _K.rH(I)}(E,I),t=function(W,n,I,h,q,$){const k=Cn(W,$),_=Cn(n,$),N=Cn(I,$),c=(k.width-q)/2,P=(k.height-q)/2,S=_.x-k.x-c,g=_.y-k.y-P,B=(_.width-q)/2,E=(_.height-q)/2,u=k.x+c+B*h+S*h,Y=k.y+P+E*h+g*h,f=u-N.x,r=Y-N.y;return[Math.round(f),Math.round(r)]}(Y,f,r,K,_,P);if(void 0===t)return;const X=k(n,K,q);$&&function(W,n,I,h,q){YK(I,q)&&(clearTimeout(EK[n]),W.classList.add(SK),EK[n]=setTimeout((()=>W.classList.remove(SK)),h))}(f,u,K,$,q),function(W,n,I){const h=document.getElementById(W);if(h){const[W,q]=n;h.style.transform=`translate(${W}px, ${q}px) scale(${I})`}}(B,t,X)}))})({bodies:n,originalScale:f?k/(null!=q?q:1):k,animationDuration:N,maxAnimationDuration:L.current,animationLandPercentage:c,pulseAnimationDuration:P,scaleFunction:S,bodySize:(null===(I=O.current)||void 0===I?void 0:I.offsetHeight)||0,getBodyRef:B,reverseScale:q,skipVisibilityCheck:Y,flyingBodiesContainerKey:r}),t.current=requestAnimationFrame((()=>W(n)))}}return Z(),h&&(t.current=requestAnimationFrame((()=>W(n)))),Z}),[n]),P$.useEffect((()=>(X.current=setTimeout((()=>{const W=n.filter(fK).map((I="id",W=>W[I]));var I;H.A(W)||$(W)}),L.current),d)),[n,d,$]),h?N$.jsxs("div",{ref:K,className:g$.A(NK,{[cK]:q}),"data-bodies":E,"data-no-flying-bodies":H.A(n),style:{zIndex:_},children:[n.map((({id:n,options:h,value:q})=>{const $=null==h?void 0:h.playHideAnimation,k=g$.A(PK,{[gK]:$});return N$.jsx("div",{id:n,className:k,children:N$.jsx(W,{value:q||I})},n)})),N$.jsx("div",{className:PK,ref:O,children:N$.jsx(W,{value:I})})]}):null};var KK=I(898788);const tK="flyingProbe--68d15",XK=c$.PA((({value:W})=>{const n=w$.P(),I=n.prediction.winner;if(!I)return null;const{zoomedRoad:h}=n.shoe,q=W===N.RoadType.Bead;if(h&&h!==W&&!q)return null;const $=Cn(n.reference.roadProbe.get(W),n.ag.values.gameDimensions.reverseScale),k=n.shoe.roads.probes[I][W],_={roadType:W,winnerType:q?I:k?N.getWinnerTypeBaccarat(k.color):N.WinnerTypeBaccarat.Legend,isLive:!0,symbol:q?String(KK.wy(n.shoe.beadRoadMode,KK.Y7(I))):void 0};return N$.jsx("div",{style:{width:`${$.width}px`,height:`${$.height}px`},className:tK,children:N$.jsx(N.RoadItemBaccarat,{..._})})})),LK=c$.PA((()=>{const{reference:W,flyingProbes:n,device:I}=w$.P(),h=P$.useCallback((n=>[N.WinnerTypeBaccarat.Banker,N.WinnerTypeBaccarat.Player,dn.FlyingProbesBodyContainer].includes(n)?W.prediction.get(n):Object.values(N.RoadType).includes(n)?W.roadProbe.get(n):void 0),[W.prediction,W.roadProbe]),q=P$.useMemo((()=>n.bodies.length>0&&Object.values(W.roadProbe.all).reduce(((W,n)=>n?W+1:W),0)===n.bodies.length?n.bodies:[]),[n.bodies,W.roadProbe.all]),$=P$.useCallback(((n,I)=>{W.prediction.set(dn.FlyingProbesBodyContainer,I)}),[W.prediction]);return n.isAvailable?N$.jsx(rK,{autoDetectScale:!0,defaultBodyValue:"0",scale:1.15,isAnimationEnabled:n.animationEnabled,bodies:q,animationDuration:500,animationLandPercentage:100,isDesktop:I.isDesktop,Component:XK,releaseBodies:n.removeBodies,registerBodyContainerRef:$,flyingBodiesContainerKey:dn.FlyingProbesBodyContainer,getBodyRef:h,skipVisibilityCheck:!0,bodiesKey:"flying-probes"}):null})),OK=c$.PA((({columnsCount:W})=>{const n=w$.P(),{animationEnabled:I,areAllRoadsLanded:h}=n.flyingWin,q=I&&!!n.gameResult.winner&&!h,$=n.layout.beadRoadDisplayMode,k=n.device.isDesktop,_=n.shoe.beadRoadMode,c=pr($),P=W||c.columnCount,S=k?2:1,g=P$.useCallback(((W,I)=>{n.reference.roadProbe.set(N.RoadType.Bead,I)}),[n.reference.roadProbe]),B=P$.useCallback(((W,I)=>{n.reference.winRoads.set(N.RoadType.Bead,I)}),[n.reference.winRoads]),E=KK.K0(P-S,c.rowCount,n.shoe.history,_,n.layout.isDesktopImmersive,n.prediction.winner,n.flyingProbes.animationEnabled?.42:void 0,n.flyingProbes.isAvailable,q),u=N.mapIconsToRoadItemsBaccarat(E,!0,void 0,n.shoe.resolveMultiplierTheme,g,I?B:void 0),Y=n.preferences.isWhiteScorecardTheme?N.ScorecardThemeNames.WhiteSolid:N.ScorecardThemeNames.BlackDot,f=P$.useCallback((W=>{n.shoe.setBeadRoadMode(W.mode),n.sounds.playClickButtonSound(),n.log.clientBeadRoad(W.mode)}),[n.log,n.shoe,n.sounds]),r=P$.useCallback(((W,I)=>{n.tooltip.showBeadRoadGridTooltip(W,I)}),[n.tooltip]),K=P$.useCallback((()=>{n.tooltip.hideBeadRoadGridTooltip()}),[n.tooltip]),t=n.layout.getScorecardThemesOverrides(N.RoadType.Bead);return N$.jsx(Ur,{columnsCount:P,displayMode:$,mode:_,modes:n.shoe.availableBeadRoadModes,gridIcons:u,IconShapeComponent:N.EmptyRoadItem,scorecardTheme:Y,onModeChanged:f,withTooltip:n.device.isDesktop,showTooltip:r,hideTooltip:K,skipFirstLastLines:!!n.layout.framesAroundRoadsStyles,scorecardThemesOverrides:t})})),ZK=c$.PA((({type:W,scorecardTheme:n,emptyIconShape:I,extraShapes:h,probeExtraShapes:q,rowCount:$,columnCount:k,isInterlacedMode:_})=>{const c=w$.P(),{animationEnabled:P,areAllRoadsLanded:S}=c.flyingWin,{winner:g}=c.gameResult,B=P&&g,E=c.shoe.getRoadItems(W),u=c.layout.getScorecardThemesOverrides(W),Y=c.prediction.winner,f=P$.useCallback(((W,n)=>{c.reference.roadProbe.set(W,n)}),[c.reference.roadProbe]),r=P$.useCallback(((W,n)=>{c.reference.winRoads.set(W,n)}),[c.reference.winRoads]),K=P$.useMemo((()=>h||B?E.map(((W,n)=>({...W,extraShapes:h&&W.extraShapes?[...W.extraShapes,...h]:h,isHidden:B&&!S&&n===E.length-1}))):E),[h,B,S,E]);return N$.jsx(N.RoadBaccarat,{currentWinnerType:P&&g?N.WinnerTypeBaccarat[g]:void 0,pulsingAnimationDelay:c.flyingProbes.animationEnabled?.42:void 0,isProbePulsing:c.flyingProbes.isAvailable,registerProbeRef:c.flyingProbes.isAvailable?f:void 0,registerLastRoadRef:B?r:void 0,type:W,scorecardTheme:n||c.preferences.scorecardTheme,roadItems:K,probes:c.shoe.roads.probes,probesWinnerType:Y,isLive:!0,emptyIconShape:I,probeExtraShapes:q,rowCount:$,columnCount:k,skipFirstLastLines:!!c.layout.framesAroundRoadsStyles,isInterlacedMode:_,multiplierThemeResolver:c.shoe.resolveMultiplierTheme,scorecardThemesOverrides:u})})),dK="gridCreator--b3937",mK="roadGrid--aaa62",RK="fitToContainer--0c0cd";function eK(W){switch(W){case N.RoadType.Big:return N.RoadType.Big;case N.RoadType.BigEye:return N.RoadType.BigEye;case N.RoadType.Small:return N.RoadType.Small;case N.RoadType.Cockroach:return N.RoadType.Cockroach;default:Bn.xb(W)}}function jK({id:W,onMouseEnter:n,onMouseLeave:I,onClick:h,x:q,y:$=0,width:k,height:_,hidden:N,roadType:c,layout:P}){const S=P.roads[c];return N$.jsx("svg",{onMouseEnter:n,onMouseLeave:I,onClick:h,id:W,x:q,y:$,width:k,height:_,"data-role":`${c}-road`,style:N?{opacity:0}:void 0,children:N$.jsx(ZK,{type:eK(c),columnCount:S.width,rowCount:S.height,isInterlacedMode:S.interlaced,defaultIconId:c})})}const zK=[N.RoadType.Big,N.RoadType.BigEye,N.RoadType.Small,N.RoadType.Cockroach],vK=c$.PA((({roadContainerLayout:W,zoomRoadOverflow:n,beadRight:I,beadColumns:h,isVerticalBead:q,wrapperPadding:$,spaceBetweenBlocks:k})=>{const _=w$.P(),c=_.device.isDesktop,P=_.layout.isDesktopImmersive,S=_.layout.isBaccaratV4RoadsMobile,g=_.layout.isBaccaratV4Roads,B=_.layout.framesAroundRoadsStyles,E=!!B,u=g&&P?((null==B?void 0:B.strokeWidth)||0)/2:0,Y=S?$:.3,f=P$.useCallback((W=>{_.shoe.setZoomedRoad(W)}),[_.shoe]),r=P$.useCallback(((W,n)=>{c&&_.tooltip.showRoadGridTooltip(W,n)}),[c,_.tooltip]),K=P$.useCallback((()=>{c&&_.tooltip.hideRoadGridTooltip()}),[c,_.tooltip]),{roads:t,container:X}=W,L=2*$,O=X.height+L,Z=O*t[N.RoadType.Bead].width/X.width,d=q?t[N.RoadType.Bead].height+Z+k:O,m=0!==t[N.RoadType.Bead].width&&0!==t[N.RoadType.Bead].height,R=q||g?X.width:X.width+L,e=t[N.RoadType.Bead].width+L,j=q?t[N.RoadType.Bead].width:R+e+k,z=P$.useCallback((W=>{_.reference.roads.set(mn.Bead,W)}),[_.reference.roads]),v=P$.useCallback((W=>{_.reference.roads.set(mn.Four,W)}),[_.reference.roads]);return N$.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${j} ${d}`,className:dK,children:[$&&!g?q?N$.jsx(wK,{width:j,height:d,radius:$}):N$.jsxs(N$.Fragment,{children:[N$.jsx(wK,{x:I?0:e+k,width:R,height:d,radius:$}),N$.jsx(wK,{x:I?R+k:0,width:e,height:d,radius:$})]}):null,m&&N$.jsx("svg",{x:I?R+k+$:$,y:$,width:q?t[N.RoadType.Bead].width-L:t[N.RoadType.Bead].width,height:t[N.RoadType.Bead].height,clipPath:E?"url(#roundedBeadRoadFrame)":void 0,ref:z,children:N$.jsx(OK,{columnsCount:h})}),N$.jsx("svg",{x:q||I?$:e+k+$,y:q?t[N.RoadType.Bead].height+k:0,width:q?j-L:X.width,height:q?Z:void 0,clipPath:E?"url(#roundedRoadGridFrame)":void 0,ref:v,children:N$.jsx(kK,{roads:zK,roadsData:_.shoe.roads,zoomRoadOverflow:n,onFocusedRoadChange:f,gridLayout:W,showTooltip:r,hideTooltip:K,framesAroundRoadsStyles:B,RoadContainer:jK})}),E&&N$.jsxs(N$.Fragment,{children:[N$.jsxs("defs",{children:[N$.jsx("clipPath",{id:"roundedRoadGridFrame",children:N$.jsx(wK,{x:u,y:u||$,width:u?X.width-2*u:X.width,height:u?X.height-2*u:X.height,radius:Y})}),m&&N$.jsx("clipPath",{id:"roundedBeadRoadFrame",children:N$.jsx(wK,{x:0,y:0,width:t[N.RoadType.Bead].width,height:t[N.RoadType.Bead].height,radius:$})})]}),N$.jsx(wK,{x:u||$,y:u||$,width:u?X.width-2*u:X.width,height:u?X.height-2*u:X.height,radius:Y,fill:"none",stroke:null==B?void 0:B.stroke,strokeWidth:String(null==B?void 0:B.strokeWidth)}),m&&N$.jsx(wK,{x:R+k+$,y:$,width:t[N.RoadType.Bead].width,height:t[N.RoadType.Bead].height,radius:$,fill:"none",stroke:null==B?void 0:B.stroke,strokeWidth:String(null==B?void 0:B.strokeWidth)})]})]})})),VK=P$.memo(vK,eI.A),FK=c$.PA((({roadsHeight:W,roadsWidth:n,isFeeGame:I=!1})=>{const h=w$.P(),q=P$.useRef(null),[$,k]=P$.useState(void 0),_=h.layout.beadRoadDisplayMode,c=h.layout.roadsDisplayMode,{columnCount:P,rowCount:S}=pr(_),g=h.shoe.history.length,B=h.preferences.scorecardTheme,E=h.device.isDesktop,u=h.preferences.isWhiteScorecardTheme,Y=c===KW.FourLinesDesktopClassic,f=h.layout.isBaccaratV4RoadsMobile,r=u&&(!E||Y),K=r||Y,t=B===N.ScorecardThemeNames.BlackDot?.5:0,X=f?.3:r?Y?.7:.2:0,L=f?.3:K?c===KW.FourLinesDesktopClassic?I?.5:1.3:.2:0,O=2*X,Z=P$.useRef(P);P$.useEffect((()=>{const[h,$]=(g={width:f?0:n,height:W},B=q.current,[g.width||(B?B.clientWidth:0),g.height||(B?B.clientHeight:0)]);var g,B;if($&&h){if(_===rW.PhonePortraitLive||c===KW.TwoLinesPortrait){const W=$/(6+.6666666666666666*O);Z.current=Math.ceil(h/1.95/W)}else if([rW.PhoneLandscapeLive,rW.TabletLive].includes(_)||_===rW.DesktopClassic&&I){const W=$/(6+.6666666666666666*O),n=.2*h;Z.current=Math.ceil(n/W)}else Z.current=P;if(c===KW.SixLinesPhoneV2||c===KW.TwoLinesPortrait||c===KW.FourLinesDesktopClassic&&I)k(Hr({containerWidth:h,containerHeight:$,beadColumns:Z.current,beadRows:S,directionRow:!0,containerPadding:O,spaceBetweenBigDerivatives:t}));else if(c===KW.FourLinesDesktopClassic){const W=.43*$/6;Z.current=Math.ceil(h/W),k(Hr({containerWidth:h,containerHeight:$,beadColumns:Z.current,containerPadding:O,beadRows:S,directionRow:!1,spaceBetweenBlocks:L,spaceBetweenBigDerivatives:t}))}else c===KW.ThreeLines?k(function(W,n){const I=2*Math.ceil(W/n*12/2),h=I/2;return{container:{width:I,height:12},roads:{[N.RoadType.Big]:{x:0,y:0,width:I,height:6,interlaced:!1},[N.RoadType.BigEye]:{x:0,y:6,width:I,height:3,interlaced:!0},[N.RoadType.Small]:{x:0,y:9,width:h,height:3,interlaced:!0},[N.RoadType.Cockroach]:{x:h,y:9,width:h,height:3,interlaced:!0},[N.RoadType.Bead]:{x:0,y:0,width:0,height:0,interlaced:!0}}}}(h,$)):k(E?Qr({containerWidth:h,containerHeight:$,spaceBetweenBigDerivatives:t},Math.round):Tr({containerWidth:h,containerHeight:$,spaceBetweenBigDerivatives:t}))}}),[P,S,g,_,c,O,I,E,L,u,W,n,t,h.ag.values.gameDimensions,f]);const d=c===KW.FourLinesDesktopClassic&&E&&!I;return N$.jsx("div",{ref:q,className:g$.A(mK,{[RK]:f}),children:$&&N$.jsx(VK,{roadContainerLayout:$,zoomRoadOverflow:!u,beadRight:c===KW.TwoLinesPortrait&&!d,beadColumns:Z.current,isVerticalBead:d,wrapperPadding:X,spaceBetweenBlocks:L})})})),wK=({x:W=0,y:n=0,width:I,height:h,radius:q,fill:$="#fff",stroke:k="none",strokeWidth:_="none"})=>N$.jsx("rect",{width:I,height:h,rx:q,fill:$,x:W,y:n,stroke:k,strokeWidth:_,style:{pointerEvents:"none"}}),oK=c$.PA((({roadsHeight:W,roadsWidth:n,isFeeGame:I})=>{const h=w$.P();return N$.jsx(Cr,{whiteBackground:h.preferences.isWhiteScorecardTheme,position:Gr.Right,children:N$.jsx(FK,{roadsHeight:W,roadsWidth:n,isFeeGame:I})})}));var DK=I(261504),xK=I(71665),GK=I(710928);const yK=c$.PA((()=>{const W=w$.P(),n=xK.mW(W.shoe.stats,W.shoe.beadRoadMode,W.device.isDesktop,!0);return N$.jsx(DK.u,{statistics:n,fontScale:W.settings.isBaccaratV4&&W.device.isPortrait?W.layout.portrait.gridScale:void 0,showTooltips:W.device.isDesktop,roadPredictionTheme:DK.H.FaceLiftBright,isPhone:W.device.isPhone,isTablet:W.device.isTablet,isDesktop:W.device.isDesktop,isLandscape:W.device.isLandscape,isDarkFont:W.layout.isBaccaratV4RoadsMobile&&W.preferences.isWhiteScorecardTheme,isBaccaratV4Mode:W.layout.isBaccaratV4RoadsMobile,tooltipPositionVertical:W.layout.isDesktopClassic?GK.Ne.Bottom:GK.Ne.Top})})),CK="goldenLine--e70dd",bK="withSpacing--5aa12",lK=({withSpacing:W})=>N$.jsx("div",{className:g$.A(CK,{[bK]:W})}),AK=[N.RoadType.Cockroach,N.RoadType.Small,N.RoadType.BigEye,N.RoadType.Big,N.RoadType.Bead],pK=[N.RoadType.Cockroach,N.RoadType.Small,N.RoadType.BigEye],iK={delay:.6,duration:.3},UK={duration:400,originalScale:1.15,landPercentage:100,roadDelay:150},QK={header:iK,winnerBall:iK,winnerBallFly:{delay:iK.delay+iK.duration,flyDuration:.3,landScale:.76,disappearDuration:.8},flyingRoads:UK,pulseRoad:{scaleOutDelay:UK.duration/1e3+.3,scaleInDelay:UK.duration/1e3,duration:.1,syncCoefficient:1.5}},TK="flyingRoadItem--1613c",HK=QK.pulseRoad,aK=c$.PA((({value:W})=>{const{reference:n,ag:I,shoe:h,layout:{roadsPredictionsContainerBackground:q},preferences:$,gameResult:k}=w$.P(),{zoomedRoad:_}=h,{winner:c}=k;let P=_?[_,N.RoadType.Bead]:AK;if(c===w.K8.Tie&&(P=P.filter((W=>!pK.includes(W)))),!P.includes(W))return null;const S=Cn(n.winRoads.get(W),I.values.gameDimensions.reverseScale),g=h.roads[W],B=W===N.RoadType.Bead,E=B?h.history[h.history.length-1]:g[g.length-1];if(!E)return null;const u=B?N.WinnerTypeBaccarat[E.winner]:N.getWinnerTypeBaccarat(E.color),Y=E.ties||0,f={roadType:W,winnerType:u,additionalType:N.getAdditionalTypeBaccarat(E.bankerPair,E.playerPair,Y),isLive:!0,theme:$.scorecardTheme,symbol:B?KK.wy(h.beadRoadMode,E):Y>1||u===N.WinnerTypeBaccarat.Tie?E.ties:void 0},r=AK.indexOf(W),K=HK.scaleOutDelay+HK.duration*HK.syncCoefficient*r,t={width:`${S.width}px`,height:`${S.height}px`,"--scale-out-delay":`${K}s`,"--scale-in-delay":`${HK.scaleInDelay}s`,"--duration":`${HK.duration}s`,"--background":Y>0?q:"transparent"};return N$.jsx("div",{style:t,className:TK,children:N$.jsx(N.RoadItemBaccarat,{...f})})})),JK=QK.flyingRoads,sK=W=>W,MK=c$.PA((()=>{const{flyingWin:W,reference:n,device:I}=w$.P(),h=P$.useCallback((W=>[Zn.WinnerBallTo,Zn.FlyingRoadsBodyContainer].includes(W)?n.winAnimation.get(W):Object.values(N.RoadType).includes(W)?n.winRoads.get(W):void 0),[n.winAnimation,n.winRoads]),q=P$.useCallback(((W,I)=>{n.winAnimation.set(Zn.FlyingRoadsBodyContainer,I)}),[n.winAnimation]);return N$.jsx(rK,{autoDetectScale:!0,defaultBodyValue:"0",scale:JK.originalScale,isAnimationEnabled:W.animationEnabled,bodies:W.bodies,animationDuration:JK.duration,animationLandPercentage:JK.landPercentage,isDesktop:I.isDesktop,Component:aK,releaseBodies:W.removeBodies,scaleFunction:sK,registerBodyContainerRef:q,flyingBodiesContainerKey:Zn.FlyingRoadsBodyContainer,getBodyRef:h,skipVisibilityCheck:!0,bodiesKey:"flying-win-roads"})}));var Wt=I(25581),nt=I(118812);const It=c$.PA((({tooltip:W,tooltipPositionVertical:n,tooltipPositionHorizontal:I,winnerType:h})=>{const q=w$.P(),$=xK.Ot(q.shoe.beadRoadMode,h)||h.charAt(0),k=P$.useCallback((W=>{if(!q.flyingWin.isWinnerBallFlying)if(W){if(q.flyingProbes.isAvailable){q.prediction.resetPrediction();const n=setTimeout((()=>{q.prediction.setPrediction(W),q.flyingProbes.flyFromPredictionButton(W),clearTimeout(n)}),0)}else q.prediction.setPrediction(W);q.log.clientPrediction(W)}else q.prediction.resetPrediction()}),[q.flyingProbes,q.log,q.prediction]);return N$.jsx(nt.P,{winnerType:h,registerRef:q.flyingProbes.isAvailable?q.reference.prediction.set:void 0,probe:q.shoe.roads.probes[h],withTooltip:!!W,tooltip:W,tooltipPositionVertical:n,tooltipPositionHorizontal:I,isDesktop:q.device.isDesktop,isShortConvex:q.settings.isBaccaratV4,isTablet:q.device.isTablet,scorecardTheme:q.preferences.scorecardTheme,mapColorToWinnerType:N.getWinnerTypeBaccarat,RoadItem:N.RoadItemBaccarat,symbol:$,roadPredictionTheme:DK.H.FaceLiftBright,probesWinner:q.prediction.winner,ignoreButtonSpacing:q.settings.isRng,wideButton:q.settings.isRng,setProbesWinner:k,onInteraction:q.sounds.playClickButtonSound})})),ht="roadsContainer--67673",qt="isDesktop--83af4",$t="fitToContainer--effc5",kt="statisticsContainer--d6f82",_t="isTablet--b8230",Nt="statistics--2b5d9",ct="brightTheme--c2aa0",Pt="predictions--c3611",St="faceLiftBright--09348",gt="fourRoads--4b982",Bt="isPortrait--9df54",Et="isLandscapePhone--7b93d",ut="reducedHeight--86cb1",Yt="smallDevices--716f3",ft="isPortraitWidePhone--d8ba9",rt="roadsPredictionsContainer--0dbff",Kt="isCollapsed--3da4e",tt="isLandscape--78ca2",Xt="isPhone--72c48",Lt="classicLayout--c2710",Ot="predictionContainerSpacing--86210",Zt="baccaratV4Desktop--a1a67",dt="baccaratV4Mode--ffabd",mt="prediction--53c61",Rt="withScroll--d9099",et="scrollContent--6aa96",jt="leftShadow--bd11d",zt="rightShadow--dc0c8",vt="innerShadow--d6dc8";var Vt,Ft;!function(W){W.LeftRight="LeftRight",W.Left="Left",W.Right="Right"}(Vt||(Vt={})),function(W){W.Left="Left",W.Right="Right"}(Ft||(Ft={}));const wt=({deviceRatio:W,FourRoadsContainer:n=oK,GameStatisticsContainer:I,hasPredictionContainerSpacing:h,isClassicLayout:q,isCollapsed:$,isBaccaratV4Roads:k=!1,containerBackground:_,containerBorder:N,isDesktop:c,isPhone:P,isPortrait:S,isReducedHeight:g,isScrollable:B,isSmallDevice:E,isTablet:u,predictionContainers:Y,roadPredictionTheme:f,roadsHeight:r,getRoadsRef:K,statisticsContainerHeight:t,shadowColor:X="#281718",useInnerDimensions:L=!0,registerWinnerBallRef:O=pf.A})=>{const Z=P$.useRef(null),[d,m]=P$.useState(0),[R,e]=P$.useState(null),[j,z]=P$.useState(null),v=P$.useRef(0),V=P$.useRef(null),F=P$.useRef(0),w=k&&!c&&!S,o=C_.v(O,Zn.WinnerBallTo);P$.useLayoutEffect((()=>{Z.current&&m(L?0:Z.current.clientWidth)}),[r,L]);const D=P$.useCallback((()=>{var W;if(null===R||null===Z)return;let n=null;R.scrollLeft>0&&(n=Vt.Left);const I=R.scrollLeft+R.getBoundingClientRect().width,h=Math.ceil(I);(h<R.scrollWidth||h<Number(null===(W=Z.current)||void 0===W?void 0:W.clientWidth))&&(n=n?Vt.LeftRight:Vt.Right),z(n)}),[R,z]),x=P$.useCallback((()=>{const I=w?"100%":k&&S?"auto":0===r?void 0:r;return N$.jsx("div",{ref:Z,style:{height:I},className:g$.A(gt,{[Bt]:S,[ft]:S&&W>1.85,[Et]:!S&&!u&&!c,[_t]:u,[ut]:g,[Yt]:E}),children:N$.jsx(n,{roadsHeight:r,roadsWidth:d})})}),[n,W,k,c,w,S,g,E,u,d,r]),G=P$.useCallback((()=>{const W=V.current===Ft.Right?K(mn.Bead):K(mn.Four);R&&W&&null!==V.current&&(V.current===Ft.Right?W.scrollIntoView({behavior:"smooth",block:"start",inline:"start"}):"function"==typeof R.scrollTo&&R.scrollTo({left:0,behavior:"smooth"}))}),[K,R]);P$.useEffect((()=>{if(!R)return;const W=()=>{clearTimeout(F.current)};return R.addEventListener("pointerdown",W),R.addEventListener("pointerup",G),()=>{R.removeEventListener("pointerdown",W),R.removeEventListener("pointerup",G)}}),[G,R]);const y=P$.useCallback((W=>{if(W.scrollLeft<0||v.current<0||W&&W.clientWidth&&W.clientWidth-W.scrollLeft<40)return;W.scrollLeft<v.current&&v.current-W.scrollLeft>2&&(V.current=Ft.Left),W.scrollLeft>v.current&&W.scrollLeft-v.current>2&&(V.current=Ft.Right);const n=W.scrollLeft!==v.current;v.current=W.scrollLeft,n&&(clearTimeout(F.current),F.current=setTimeout((()=>{G()}),600))}),[G]),C=P$.useCallback((W=>{const n=bn.E2(W),I={background:`linear-gradient(90deg, rgb(${n}) 0%, rgba(${n},0) 100%)`},h={background:`linear-gradient(-90deg, rgb(${n}) 0%, rgba(${n},0) 100%)`};return N$.jsxs(N$.Fragment,{children:[N$.jsx(Wt.y,{refCallback:e,onPositionChanged:D,onCustomScroll:y,className:g$.A(Rt,{[$t]:w}),children:N$.jsx("div",{ref:Z,style:{height:w?"100%":void 0},className:g$.A(et,{[$t]:k&&P}),children:x()})}),(j===Vt.Left||j===Vt.LeftRight)&&N$.jsx("div",{className:g$.A(jt,{[vt]:k&&!c}),style:I}),(j===Vt.Right||j===Vt.LeftRight)&&N$.jsx("div",{className:g$.A(zt,{[vt]:k&&!c}),style:h})]})}),[D,w,P,x,j,k,y]),b=P$.useMemo((()=>N$.jsx("div",{className:g$.A(ht,{[$t]:w}),children:B?C(X):x()},"roads")),[w,B,x,C,X]),l=_?{background:_}:{};N&&(l.borderBottom=N,l.borderTop=N);const A=P$.useMemo((()=>{const W=_&&S?{background:_}:{};return t&&(W.height=`${t}px`),N$.jsxs("div",{className:g$.A(kt,{[_t]:u,[dt]:k&&!c}),style:W,children:[N$.jsx("div",{className:Nt,children:N$.jsx(I,{})}),N$.jsx("div",{className:Pt,children:Y.map((W=>N$.jsx("div",{className:mt,children:N$.jsx(W,{tooltip:"tooltip.clickToSeeNextValue",tooltipPositionVertical:q?GK.Ne.Bottom:GK.Ne.Top})},Math.random())))})]},"statistics")}),[S,t,I,_,k,q,u,c,Y]),p=N$.jsx(lK,{withSpacing:!0}),i=k?c?[A,p,b]:[b,A]:[A,b];return N$.jsxs("div",{ref:o,style:l,className:g$.A(rt,{[qt]:c,[$t]:w,[Xt]:P,[_t]:u,[Kt]:!!$,[tt]:!S,[ct]:f===DK.H.Bright,[St]:f===DK.H.FaceLiftBright,[Ot]:h,[Zt]:k&&c,[Lt]:q}),children:[...i,!c&&k&&N$.jsxs(N$.Fragment,{children:[N$.jsx(LK,{}),N$.jsx(MK,{})]})]})},ot=[function({tooltip:W,tooltipPositionVertical:n,tooltipPositionHorizontal:I}){const h=N.WinnerTypeBaccarat.Player;return N$.jsx(It,{winnerType:h,tooltip:W,tooltipPositionVertical:n,tooltipPositionHorizontal:I})},function({tooltip:W,tooltipPositionVertical:n,tooltipPositionHorizontal:I}){const h=N.WinnerTypeBaccarat.Banker;return N$.jsx(It,{winnerType:h,tooltip:W,tooltipPositionVertical:n,tooltipPositionHorizontal:I})}],Dt=c$.PA((W=>{const n=w$.P();return N$.jsx(wt,{...W,registerWinnerBallRef:n.reference.winAnimation.set,deviceRatio:n.device.aspectRatio,GameStatisticsContainer:yK,hasPredictionContainerSpacing:n.device.isDesktop&&!n.layout.isDesktopClassic,isClassicLayout:n.layout.isDesktopClassic,statisticsContainerHeight:n.layout.statisticsContainerHeight,isCollapsed:!1,isBaccaratV4Roads:n.layout.isBaccaratV4Roads,containerBackground:n.layout.roadsPredictionsContainerBackground,containerBorder:n.layout.roadsPredictionsContainerBorder,isDesktop:n.device.isDesktop,isPhone:n.device.isPhone,isPortrait:n.device.isPortrait,isReducedHeight:!n.device.isDesktop,isScrollable:n.device.isPortrait||n.layout.isBaccaratV4RoadsMobile,isSmallDevice:n.device.isSmallDevice,isTablet:n.device.isTablet,roadPredictionTheme:DK.H.FaceLiftBright,roadsHeight:n.layout.availableRoadsHeight,useInnerDimensions:n.layout.useInnerDimensions,predictionContainers:ot,shadowColor:n.layout.isBaccaratV4RoadsMobile?n.layout.roadsPredictionsContainerBackground:n.layout.gameUnderlayColor,getRoadsRef:n.reference.roads.get})})),xt=W=>N$.jsx(oK,{...W,isFeeGame:!0}),Gt=()=>N$.jsx(Dt,{FourRoadsContainer:xt,shadowColor:"#fff"}),yt="rightFooter--b4fd0",Ct="roadsContainer--dfe4d",bt="topRightComponent--35973";var lt=I(991548),At=I(827424),pt=I(48415);function it(W,n){let I;const h=.3*n,q=.7*n;return I=W<h?W/h:W<q?1:Math.max(1-(W-q)/h,0),I}var Ut=I(680151),Qt=I(328382);const Tt="container--727e8",Ht="maxSizeFull--3c948",at="useMediaContainer--c1a8b",Jt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAASFBMVEW+mwAAAAChfAC8lgDDnwDFngDJowC1jADLpADIogDHoQDNpgDMpQDIogDKowDGoADLpQDMpQDLpADMpgDLpADLpQDMpgDNpwA8whaAAAAAGHRSTlMWAAYRHCA0DEctJG9PODAnWFI/XTpjYWWZkBniAAAA8ElEQVQoz53SV27DMBAE0PU29mYpzv1vGsqOiikhATx/xAMXIHfg9kd2RAMsAmTwhMhqrb33JE/4hghzs06YgaVoEnNAlBYdwxpJjjZEP1kPW4jYZbMiT1bgGALnzAsp1n5vUBVcEF3IMCKJmgWpNoGTQhbsKEHhjORzR9RQ4EJZTUf7JVcICjcwceJP8J+xmIK/Qk7Un1KCXqFX7AiPyFdT/YI4BwenyEzPj+epymicPD4RXbAyWFbzu0+TBmVdhi740up4o3KfAQ8FKzVE9cIs3t1tprdqIrn2/agtxmYV9mrunS5Zc2EaSr0Ge47nH/PICJioE/XSAAAAAElFTkSuQmCC",st="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABDCAMAAADXusmpAAAAmVBMVEUAAAAuLgDJyR/u3T3t5UXw4D3h0S6qqiuAgAD254f26Gnr4Tjp3Tjl1zba1y/253ry5lvy5Uzw5knv5FDu4kT79dX36p/3547154H26Hv16HD152X052H89+D57a747Kn254v16HX052zz5lv05VHy5E+ZmQD8+en58b3366P37Kf255T27Kr255T05mvz51vy5Wn05lX///8KzdSXAAAAMnRSTlMAAgkdJiAQBgSjbBkWEw2HSzozLyrkv7OWj3lkX+3Jxq2CdFJDOAXy1MG5tq6KclROSOzvFrEAAAElSURBVFjD7dTXboNAEAXQu4WlFxtsU1zjkt74/4/Lgx9ASsAYJiKR9zztSqPVzmh0MQqfgxxj0LT+PhmosZnAr+MgZ73i74gsULNWEuRYhxJPgdokywVonYrVeoIeAtto/meaG33myDeyudT10UW8nIIY391nCgN5AnVWMXc4Bko3AeoCqTBUHDE04AbIfcxcUFNH1rhv5ORcgZoIObT/yJRTcV6yfA8iyW7hnMPDvgMNdngs7Rg9NSRsEj6/CfS0/rk1M5kYDD1Z0LQbZz5wVJ4SUJCocVl19lxQ8+ytgctOyqwufHlAG3cxlx1GF4X7anj+bMvRxpBduklLW1QJFcXfn/FxJV4sHIU2LxmuFUj/QoEJTRvZ0REgxsLyHdSmjsCIvgA08QtzF1artgAAAABJRU5ErkJggg==",Mt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAABTCAMAAACrvdnDAAAAz1BMVEUAAACMjARVVQDa1i3w4UEAAACqqivt3T28vCXj1Svv3z/z6F7z6FXz51Pv5Eng0Tr57a3z5k3x5Unu40fr4Tj26Iv154H153D26Gr06F7z5lry5WDs40D365325of253n153L16G315mf05lT05VTt4ULw5EXo3DrS0i359M/48Lr57rL255T16HT154b152Py5Evw5Fb8+uz8+OT79tz58cL58sL255L37bH26Hz26Hz366X154bn2zf79dX58sn47p705Xbz51Px43n///+3xuR8AAAARHRSTlMABAMNIQIGHAcSH1VLQS8QyT00LBitmnpvWlFOJ72ki351Z0ZEKiUWC+DSzLeDZ2I3M/Xv6djRr6aSkXt7FOTc0EU/N0kQ5+4AAAIASURBVGje7dVnj+IwEAbg13acTkIJvXdY4IBtt/Xq/v/fdFpOOkVREiAKwx6b51OkyGPZM57Bp2DZIPKli4tl9G3QKH2rMJDgozE+CG0CGrycN0CjOeA4LaYgJbzjII74ml6XKOGyFUFEPuBkxtiH/c1mEYCZE0jsN/ZQfLW3um3gSByJ1DtH5/H5Q1S2AirPLaRKSBBhs7Ncn8r9p30rBf4OkArhwl0NdP+Zgm9giiQagSHtdR9Nc97WkA72apqu3H3d1wLdKH+/UXNbjjiqJn3BPCNmbA7X9YInd4tYIIjdENinmc/hn8JT1UQEY9RtL6ubGQ5hluJ3Ugc3iwIiaPXl9W3HNnCI/o8hdnq+NukrGFmo9BRE8Kzy/K4ydBFUC1nSvLOwIwF4nZBcaFNEEcVa5XE9VhHkhqRIar5M6lscx3BGuZYABV0IhmReQEXiP8RA5cECEc5xRoyDBG/ZBQMnJaZ459Xy5RzDKb20d7emPF0vGjrCaBKpeFXwzrUqPQdh9BsbqTJaJkMYWZohk7lkKqOaVOUu0qEsW4jV/IV0TPIOMuRkbQMa6lUfRHSeShSnKECiWG4PJQ4lBBLLLb7XGQ6kVVcTJDWtrxVE4VUHfoWruY3EmBpXdRb8tH5PAQ2mI3NePxuINKqCiGPhImggMnszQCR7oxlC7haH+gMolhyEpPrLPgAAAABJRU5ErkJggg==",WX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAABLCAMAAAD0x38HAAAAmVBMVEUAAAAAAABhYQDc1C7Cwh6qqiXy51jz51Hx5Ffp3Tv05l/y5Wju4kjk1jvMzBr16Zf153T152f15mb05lLv5Enw4Ubt3T78+uv79+D477f366H154T26Hr16HX15nj052Hz52Py5Vjv5V/s4kXv3z38+/P79df58sj58sf355H578D1537253j152/053T05m/y5k3s4IP///91k58SAAAAMnRSTlMAAgMOCAZOQTUWXEwqEgq5fmpmRS4hG/Ts0MCgjoRnYFQ6MCcf+ebb27WhlIp5YUc8KZAGwKkAAAEASURBVFjD7ZVHCsMwEEVHsiU77nFJ7723+x8uZJGAshBYn4QUv4XBSI8RjOaL3gND5Fp9JMxtZ9FpALX3nk3mcEYVhoguYnO/vDOuE4C/pT8mkYh9HNO3E1uIPamC4kPgSN5HXhKY27O46QG1011OJTgLNW4jJcygKHT9+/NJAGEzVP49tUaqHzj2VFvdPWjlyMkKTr+OTVocV7vaz5huxtproancv/S0vXUL0pD1JNAdFv1wayddSP/7N6rmnCxjmctO7DBTWwyXbeBeT9PhDAkDu1x0ILQC5Ko1bp9NQB/BIHkcS5a3g/wReCsLGVtBFa+hkEhjDvMMsKejkN7IFVI0CVRTnLcDAAAAAElFTkSuQmCC",nX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAAA9CAMAAAA9KQ86AAAAnFBMVEUAAAA3NwCiohfv5EfKyiTp3jbi1DHy5E3u4kDd1C/t3jzU1Cy6uiL254Xz51v26H3052z06F7y5lj05lX05lDx417254n16ID15nH06HD051ft4kTw4Dr79t369M/58sn58cL58b758L3253f9/Pb59Mv577H57a337Kj354/36Z316HX36qb15mf052Hz53fy5lny5XGSkib///+mKr4eAAAAM3RSTlMAAgUvCRYRNyYOHAsHoFSTc1lOR0I0qJZ8eUoqIOvg3NfVzYr73svIubSmhXtmX1ZQTwSDlyIfAAABIklEQVRYw+3W126EMBAF0GtjMJ2lLm17ei///2952yATFpmMlCBx3iwX2XMlazBzMmhBpD4YoOJgQVE0H5OIfQxFHiWYJLeheLk6cdAwYwMLhdcYFkjwbB0kAnqY6zL0OM/Xm8qEHmMd/ZAvT4v70Ous8jGKJbtdgj5Lyu6lnqQ6n6HHLksbRJzfJmXpXyUNB9J2oes1wmJ2/BpUrAdoCm0Q4ccVqLAPaBI3FqjkDH/FkyamEVC8bSbm4RxT9eMP6ok5vttQcMwQM0El3pKdxSXD/+HRJXtX6fQ3Lb80LXT6m0B+b7RdTJfut+E5nOa2cDDE9HFZu6qa88AtHgcfJA6r0Yyc7kBgUL408iO46YMGC4OYg4Q4fUYWaGRlxkCEqFRfojILLn7a+80AAAAASUVORK5CYII=",IX=I.p+"images/star.529998ec.png",hX=[];let qX;const $X=2*Math.PI,kX=Math.PI/180;class _X extends P$.Component{constructor(W){super(W),this.canvasScale=1,this.coins=[],this.particles=[],this.stars=[],this.width=0,this.height=0,this.coinSize=0,this.updateTime=0,this.coinCount=0,this.starCount=0,this.isComponentMounted=!1,this.animationFrameRequestId=0,this.updateSizeDependantValues=()=>{if(!this.canvas||!this.ctx)return this.handleMountingException();const{width:W,height:n}=this.canvas.getBoundingClientRect();this.width=W,this.canvas.width=W,this.height=n,this.canvas.height=n,this.canvasScale=Math.round(this.width/800*1e3)/1e3,this.coinSize=18*this.canvasScale,this.coinGradient=this.ctx.createLinearGradient(-this.coinSize,0,this.coinSize,0),this.coinGradient.addColorStop(.02,"#DE8A25"),this.coinGradient.addColorStop(.18,"#FED049"),this.coinGradient.addColorStop(.26,"#FBDA78"),this.coinGradient.addColorStop(.38,"#F8E8BF"),this.coinGradient.addColorStop(.4,"#F7E8B9"),this.coinGradient.addColorStop(.43,"#F7E8A9"),this.coinGradient.addColorStop(.47,"#F7E88F"),this.coinGradient.addColorStop(.48,"#F7E887"),this.coinGradient.addColorStop(.51,"#F7E581"),this.coinGradient.addColorStop(.55,"#F7DE71"),this.coinGradient.addColorStop(.6,"#F6D358"),this.coinGradient.addColorStop(.65,"#F5C239"),this.coinGradient.addColorStop(1,"#DA8022"),this.coinEdgeGradient=this.ctx.createLinearGradient(-this.coinSize,0,this.coinSize,0),this.coinEdgeGradient.addColorStop(0,"#794200"),this.coinEdgeGradient.addColorStop(.42,"#FFB40F"),this.coinEdgeGradient.addColorStop(.58,"#FFE2A3"),this.coinEdgeGradient.addColorStop(.73,"#FFB000"),this.coinEdgeGradient.addColorStop(1,"#936724")},this.renderFrame=()=>{const W=performance.now()/1e3;this.update(W-this.updateTime),this.updateTime=W,this.animationFrameRequestId=window.requestAnimationFrame(this.renderFrame)},this.drawMirrorImage=(W,n)=>{W.width<1||(n.save(),n.translate(800*this.canvasScale,0),n.scale(-1,1),n.drawImage(W,0,0),n.restore())},this.drawStars=(W,n)=>{for(let I=0;I<this.starCount;I++)n.save(),this.updateStar(W,this.stars[I]),n.restore()},this.drawCoins=(W,n)=>{for(let I=0;I<this.coinCount;I++)n.save(),this.updateCoin(W,this.coins[I]),n.restore()},this.drawParticles=(W,n)=>{for(const I of this.particles)n.save(),this.updateParticle(W,I),n.restore()},this.drawEllipse=(W,n)=>{if(!this.ctx)return this.handleMountingException();this.ctx.ellipse?this.ctx.ellipse(0,W*this.canvasScale,this.coinSize,n,0,0,$X):(this.ctx.save(),this.ctx.translate(0,W*this.canvasScale),this.ctx.scale(this.coinSize,n),this.ctx.arc(0,0,1,0,$X,!1),this.ctx.restore())},this.setCanvas=this.setCanvas.bind(this),this.coinCount=W.useLiteRenderMode?15:40,this.starCount=W.useLiteRenderMode?8:10}componentDidMount(){this.isComponentMounted=!0;const{displayStars:W,displayCoins:n}=this.props;if(!W)return null;if(this.updateTime=performance.now()/1e3,!this.canvas)return this.handleMountingException();const I=this.canvas.getContext("2d");if(!I)return Ut.M("Canvas context is empty");this.ctx=I,qX||(qX=[Jt,st,Mt,WX,nX,IX].map(((W,n)=>new Promise((I=>{const h=new Image;h.onload=()=>I(),h.onerror=()=>I(),h.src=W,hX[n]=h}))))),Qf.w9(this.updateSizeDependantValues),this.updateSizeDependantValues();const h=400,q=200;if(n)for(let W=0;W<this.coinCount;W++){const n=q+(Math.random()>.5?1:-1)*Math.random()*400*.05,I=360*Math.random(),$=360*Math.random(),k=100*Math.random()+300,_=120*(.5*Math.random()+.5);let N,c,P,S=800*Math.random()*.15;W%2?(S+=h+100,N=(800-S)/_,n<q?(P=(90*Math.random()-90)*kX,c=n/_):(c=(400-n)/_,P=90*Math.random()*kX)):(S=h-100-S,N=S/_,n<q?(c=n/_,P=(180+90*Math.random())*kX):(c=(400-n)/_,P=(90+90*Math.random())*kX));const g=Math.min(N,c),B=1200/g;this.coins.push({flipCount:0,lifeTime:0,x:S,y:n,flipDegrees:I,rotationOffset:$,distance:1200,movementAngle:P,speedZ:B,speedXY:_,moveTime:g,flipSpeed:k})}for(let W=0;W<this.starCount;W++){const n=q+(Math.random()>.5?1:-1)*Math.random()*400*.15;let I=800*Math.random()*.2;W%2?I+=h+100:I=h-100-I;const $=360*Math.random(),k=W<this.starCount/2?.5*Math.random()+.5:1*Math.random()+1,_=W<this.starCount/2?0:2.5*Math.random()*.25,N=.3*Math.random()*2.5+1.75;this.stars.push({x:I,y:n,lifeTime:0,scale:k,rotation:$,delay:_,animationTime:N,img:hX[5]})}this.particles=[{x:280,y:188,lifeTime:0,animationTime:1.1,img:hX[0],scale:.6},{x:268,y:216,lifeTime:0,animationTime:1.2,img:hX[0],scale:.67},{x:800*.29,y:132,lifeTime:0,animationTime:1.3,img:hX[0],scale:1.35},{x:208,y:152,lifeTime:0,animationTime:1.2,img:hX[0],scale:.7},{x:196,y:176,lifeTime:0,animationTime:1.1,img:hX[0],scale:.7},{x:800*.28,y:200,lifeTime:0,animationTime:1.1,img:hX[0],scale:.7},{x:208,y:400*.55,lifeTime:0,animationTime:1.2,img:hX[0],scale:1},{x:168,y:132,lifeTime:0,animationTime:1.1,img:hX[0],scale:.7},{x:136,y:144,lifeTime:0,animationTime:1.2,img:hX[0],scale:.7},{x:144,y:204,lifeTime:0,animationTime:1.1,img:hX[0],scale:1},{x:120,y:120,lifeTime:0,animationTime:1.1,img:hX[4],scale:1.3},{x:152,y:182,lifeTime:0,animationTime:1.1,img:hX[3],scale:1.35},{x:164,y:164,lifeTime:0,animationTime:1.1,img:hX[2],scale:1.3},{x:208,y:400*.29,lifeTime:0,animationTime:1.1,img:hX[1],scale:1.3}],Promise.all(qX).then((()=>{this.isComponentMounted&&(this.animationFrameRequestId=window.requestAnimationFrame(this.renderFrame))}))}componentWillUnmount(){this.isComponentMounted=!1,window.cancelAnimationFrame(this.animationFrameRequestId),Qf.Fu(this.updateSizeDependantValues)}render(){const{maxSizeFull:W,useMediaContainer:n,scale:I,displayStars:h}=this.props;if(!h)return null;const q=g$.A(Tt,{[Ht]:W,[at]:n}),$=I||_X.defaultProps.scale,k=800/Qt.SG*$,_=400/Qt.SG*$;return N$.jsx("canvas",{className:q,ref:this.setCanvas,"data-role":"coins-and-stars",style:{width:WW.o1(k),height:WW.o1(_)}})}setCanvas(W){W&&(this.canvas=W)}update(W){if(!this.canvas||!this.ctx)return this.handleMountingException();const{useLiteRenderMode:n,displayCoins:I,displayStars:h}=this.props;this.ctx.clearRect(0,0,this.width,this.height),h&&(this.drawParticles(W,this.ctx),n||this.drawMirrorImage(this.canvas,this.ctx),this.drawStars(W,this.ctx),I&&this.drawCoins(W,this.ctx),n&&this.drawMirrorImage(this.canvas,this.ctx))}updateCoin(W,n){if(n.lifeTime+=W,n.lifeTime>n.moveTime)return;n.flipDegrees+=Math.floor(n.flipSpeed*W),n.distance-=Math.floor(n.speedZ*W);const I=n.speedXY*W;n.x+=I*Math.cos(n.movementAngle),n.y+=I*Math.sin(n.movementAngle);const h=Math.min((1200-n.distance)/1200,1);if(!this.ctx||!this.coinEdgeGradient||!this.coinGradient)return this.handleMountingException();const{useLiteRenderMode:q}=this.props;if(!q){const W=function(W,n){const I=.7*n,h=.9*n;let q=1;if(W>I)if(W<h){const n=W-I;q=Math.max(1-n/(h-I),0)}else q=0;return q}(n.lifeTime,n.moveTime);if(0===W)return;W<1&&(this.ctx.globalAlpha=W)}const $=Math.floor(n.flipDegrees)%90?n.flipDegrees:n.flipDegrees+1;let k=Math.abs(Math.sin($*kX))*this.coinSize;k=Math.round(1e3*k)/1e3,this.ctx.translate(this.canvasScale*n.x,this.canvasScale*n.y),this.ctx.rotate((n.rotationOffset+$)/2*kX),this.ctx.scale(this.canvasScale*h,this.canvasScale*h);const _=1-k/this.coinSize;if(this.ctx.beginPath(),this.ctx.fillStyle=q?"#FBDA78":this.coinEdgeGradient,!q){let W=-4;for(;W<=4;)this.drawEllipse(h*W*_*this.canvasScale,k),W+=.25}this.ctx.fill(),this.ctx.beginPath(),q||(this.ctx.fillStyle=this.coinGradient);const N=n.flipCount%2?1:-1;this.drawEllipse(4*h*_*N,k),this.ctx.fill(),n.flipCount=Math.max(Math.floor($/90),n.flipCount)}updateParticle(W,n){n.lifeTime+=W;const I=it(n.lifeTime,n.animationTime);if(!I)return;if(!this.ctx)return this.handleMountingException();const h=n.scale*n.img.width*this.canvasScale,q=n.scale*n.img.height*this.canvasScale;this.ctx.globalAlpha=I,this.ctx.translate(n.x*this.canvasScale,n.y*this.canvasScale),this.ctx.drawImage(n.img,0,0,h,q)}updateStar(W,n){if(n.delay>0)return void(n.delay-=W);n.lifeTime+=W,n.rotation+=150*W;const I=it(n.lifeTime,n.animationTime);if(!I)return;if(!this.ctx)return this.handleMountingException();const h=n.scale*function(W,n){let I=1;const h=.2*n;return W<h&&(I=W/h),I}(n.lifeTime,n.animationTime),q=h*n.img.width*this.canvasScale,$=h*n.img.height*this.canvasScale,k=q/2,_=$/2;this.ctx.globalAlpha=I,this.ctx.translate(n.x*this.canvasScale-k,n.y*this.canvasScale-_),this.ctx.translate(k,_),this.ctx.rotate(n.rotation*kX),this.ctx.drawImage(n.img,-k,-_,q,$)}handleMountingException(){return Ut.M("Trying to access context before it was mounted")}}_X.displayName="CoinsAndStars",_X.defaultProps={displayCoins:!0,displayStars:!0,maxSizeFull:!1,useMediaContainer:!1,scale:1,useLiteRenderMode:!1};const NX=I(494475).Oe((({state:W,ownProps:n})=>{var I,h;const q=X_.md(W),$=X_.uD(W),{isLargeScreen:k}=At.Qo(pt.Q.size.value),_=!jn.I()&&(k||$.IS_IOS||$.IS_ANDROID5_0_0_PLUS||!1);let N=null!==(I=n.displayStars)&&void 0!==I?I:_,c=null!==(h=n.displayCoins)&&void 0!==h?h:_;var P;return void 0!==n.winType&&(N=_&&((P=n.winType)===tW.R.Medium||P===tW.R.Big),c=_&&function(W){return W===tW.R.Big}(n.winType)),{displayStars:N,displayCoins:c,useLiteRenderMode:q!==BW.OD.Desktop}}),(()=>[pt.Q.size]))(_X);var cX;!function(W){W.Winner="game-result-winner",W.Message="winning-message",W.Text="winning-message-text",W.Amount="winning-message-amount"}(cX||(cX={}));const PX=(SX=({winType:W,scale:n})=>N$.jsx(NX,{winType:W,scale:n}),gX={Phone:.5},c$.PA((W=>{var n;const I=q.Pj(),h=null!==(n=gX[I.ag.platform])&&void 0!==n?n:1;return N$.jsx(SX,{...W,scale:h})})));var SX,gX,BX;!function(W){W.DarkSemicircle="darkSemicircle",W.Big="big"}(BX||(BX={}));var EX=I(148999);function uX(W=[]){return W.map((W=>N$.jsx(W,{},EX.MZ())))}function YX(W,n){const[I,h,q]=Array.isArray(W)?W:[W,W,W];return{"--gradientColor0":`rgba(${I}, 0)`,"--gradientColor1":`rgba(${h}, ${n})`,"--gradientColor2":`rgba(${q}, 0)`}}function fX(W,n,I,h){const q=I?Math.floor(n):n;return MI.ej(q,{currencySymbol:W,maximumDecimalCount:h})}const rX="appearing--1f7c1",KX=({amount:W,isAnimated:n,currency:I,currencyDecimals:h,onCounterAnimationStart:q,onCounterAnimationEnd:$,scale:k})=>{const[_,N]=P$.useState(!0);function c(){N(!1)}return n?N$.jsx(GY,{duration:1540,value:W,disabled:_,onStart:q,onFinish:$,forceFromInitialValue:!0,skipSetTargetValueWhenDisabled:!0,children:n=>N$.jsx("div",{className:rX,onAnimationEnd:c,style:{"--scale":k},children:fX(I,_?0:n,W!==n,h)})}):N$.jsx(N$.Fragment,{children:fX(I,W,!1,h)})},tX=c$.PA((W=>{const n=q.Pj(),I=P$.useMemo((()=>n.device.isDesktop?W.scales.isDesktop:n.device.isTablet?W.scales.isTablet:n.device.isLandscape?W.scales.phoneLandscape:W.scales.phonePortrait),[n.device.isDesktop,n.device.isTablet,n.device.isLandscape,W.scales]);return N$.jsx(KX,{...W,currency:n.settings.currencySymbol,currencyDecimals:n.settings.currencyDecimals,scale:I})})),XX="effects--28df4",LX="isDesktop--a8e7d",OX="isTablet--5ae0b",ZX="isMobile--d2fa5",dX="isLandscape--02131",mX="gameResultElements--81495",RX="hasWin--ce559",eX="alignedTop--e592c",jX="gameResultContainer--374ad",zX="isLargeDevice--710cc",vX="isPortrait--01bd0",VX="shiftBottom--027e5",FX="winner--6aa50",wX="genericPhrase--d0b15",oX="golden--8dfe8",DX="message--f7a3d",xX="noResultLabel--5f200",GX="amount--47c0e",yX="big--0a4b6",CX="multiplay--4bb1b",bX="bold--1a72c",lX="winAnimationWrapper--313ed",AX={[BX.DarkSemicircle]:{themeGameResultElements:"themeGameResultElements--d90ac",messageBackground:"messageBackground--98a5a",themeMessage:"themeMessage--f3b49",winner:"winner--4ac67",genericPhrase:"genericPhrase--8bc03",amount:"amount--ea642",isDesktop:"isDesktop--0942a",isMobile:"isMobile--8e692",isTablet:"isTablet--0a9c8",isLandscape:"isLandscape--2d274",noResultLabel:"noResultLabel--bf155",scales:{isDesktop:4,phonePortrait:2.4,phoneLandscape:2.4,isTablet:2.4}}},pX={isDesktop:2.5,phonePortrait:1,phoneLandscape:1,isTablet:1},iX=({amount:W,resultLabel:n,isPhone:I,isTablet:h,isPortrait:q,shiftBottomMobile:$,winType:k,isAmountBold:N,theme:c,isBig:P=!1,isMultiplay:S=!1,isLargeDevice:g=!1,animation:B,backgroundColors:E,backgroundOpacity:u="0.9",setConsecutiveWinsCount:Y,hideResultLabel:f,winAnimationStarted:r,resultCounterAnimated:K=!1,alignedTop:t=!1,onCounterAnimationStart:X,onCounterAnimationEnd:L,WinAnimationComponent:O=PX,Overlays:Z=[],Effects:d,WinAmountComponent:m=tX})=>{var R,e,j,z,v,V,F,w;const o=c?AX[c]:void 0,D=P$.useMemo((()=>!!n&&!f),[n,f]),x=P$.useMemo((()=>W>0),[W]);P$.useEffect((()=>{r&&x&&k!==tW.R.None&&r()}),[r,x,k]),P$.useEffect((()=>{D&&x&&Y&&Y(k)}),[D,x,Y,k]);const G=P$.useMemo((()=>d&&B&&!f&&N$.jsx("div",{className:XX,children:N$.jsx(d,{animation:B})})),[B,d,f]);if(!D&&!x)return null;const y=g$.A(jX,{[CX]:S,[yX]:P,[null!==(R=null==o?void 0:o.isDesktop)&&void 0!==R?R:LX]:!h&&!I,[null!==(e=null==o?void 0:o.isTablet)&&void 0!==e?e:OX]:h,[null!==(j=null==o?void 0:o.isMobile)&&void 0!==j?j:ZX]:I,[null!==(z=null==o?void 0:o.isLandscape)&&void 0!==z?z:dX]:!q,[null!==(v=null==o?void 0:o.noResultLabel)&&void 0!==v?v:xX]:f,[vX]:q,[RX]:x,[xX]:f,[zX]:g&&!P,[VX]:$});return N$.jsxs(N$.Fragment,{children:[N$.jsxs("div",{className:y,children:[N$.jsxs("div",{className:g$.A(mX,null==o?void 0:o.themeGameResultElements,{[eX]:t}),children:[D&&N$.jsx("div",{className:null!==(V=null==o?void 0:o.winner)&&void 0!==V?V:FX,style:YX(E,u),children:N$.jsx("span",{className:g$.A(null!==(F=null==o?void 0:o.genericPhrase)&&void 0!==F?F:wX,{[oX]:!!B}),"data-role":cX.Winner,children:n})}),x&&N$.jsxs(N$.Fragment,{children:[(null==o?void 0:o.messageBackground)&&N$.jsx("div",{className:null==o?void 0:o.messageBackground}),N$.jsxs("div",{className:g$.A(DX,null==o?void 0:o.themeMessage),"data-role":cX.Message,children:[N$.jsx("div",{"data-role":cX.Text,children:k!==tW.R.None?_.Tl("youWin"):""}),N$.jsx("div",{className:g$.A(null!==(w=null==o?void 0:o.amount)&&void 0!==w?w:GX,{[bX]:N}),"data-role":cX.Amount,children:N$.jsx(m,{amount:W,isAnimated:K,onCounterAnimationStart:X,onCounterAnimationEnd:L,scales:(null==o?void 0:o.scales)||pX})})]})]})]}),uX(Z),G]}),S?null:N$.jsx("div",{className:g$.A(lX,{[ZX]:I,[vX]:q,[dX]:!q,[zX]:g&&!P,[yX]:P}),children:N$.jsx(O,{winType:k})})]})},UX=c$.PA((W=>{const n=q.Pj(),I=n.layout.hideYouWin?void 0:W.WinAnimationComponent,h=n.layout.hideYouWin?void 0:W.Overlays,$=n.layout.hideYouWin?void 0:W.Effects,k=n.layout.hideYouWin?tW.R.Small:n.gameResult.winType;return N$.jsx(iX,{...W,Overlays:h,Effects:$,WinAnimationComponent:I,isLargeDevice:n.device.isLargeDevice,amount:n.gameResult.amount,winType:k,resultLabel:n.gameResult.resultLabel,isPhone:n.device.isPhone,isTablet:n.device.isTablet,isPortrait:n.device.isPortrait,hideResultLabel:n.layout.isDesktopClassic,backgroundColors:n.gameResult.color,setConsecutiveWinsCount:lt.Br})})),QX="effect--33eb5",TX="mobile--607ca",HX="isPhone--601e5",aX="isLandscape--6a225",JX=c$.PA((()=>{const W=EY(),n=W.gameResult.withEffect,I=W.device.isDesktop,h=W.device.isLandscape,q=W.device.isPhone,$=W.settings.isFrozenSprites,k=W.layout.gameResultLayer;return n&&k?N$.jsx("div",{className:g$.A(QX,{[TX]:!I,[aX]:h,[HX]:q}),children:N$.jsx(Df,{id:k.layerId,layer:k,currentAnimation:$q.$e.Enabled,isFrozenSprites:$})}):null})),sX=c$.PA((()=>{const W=EY();return N$.jsx(UX,{resultCounterAnimated:W.gameResult.withEffect,onCounterAnimationStart:W.sounds.playWinCountUpLoopStart,onCounterAnimationEnd:W.sounds.playWinCountUpLoopEnd,Overlays:[JX]})})),MX="mobileGameOverlay--b3316",WL=()=>N$.jsx("div",{className:g$.A(MX),children:N$.jsx(sX,{})}),nL="videoOverlayContainer--04482",IL="gameOverlayContainer--e672b",hL="dealNowContainer--95cb8";var qL=I(236042),$L=I(722483),kL=I(253613);const{chipLandPercentage:_L,fullAnimationDuration:NL}=oh.w;function cL({fromX:W,fromY:n,toX:I,toY:h,scale:q,prefix:$}){const k=`\n        0% {\n            ${PL(`translate(${W}px, ${n}px)`,`scale(${q})`)}\n        }\n        ${_L-3}% {\n            ${PL(`translate(${I}px, ${h}px)`,`scale(${q})`)}\n        }\n        ${_L}% {\n            ${PL(`translate(${I}px, ${h}px)`,`scale(${q+.1})`)}\n        }\n        100% {\n            ${PL(`translate(${I}px, ${h}px)`,`scale(${q})`)}\n        }\n    `;return function(W){const{animationName:n,keyframes:I,animationDuration:h,animationFunction:q="ease-in-out",animationDelay:$=0,animationIterations:k=1}=W;return[`@-webkit-keyframes ${n} {${I}}`,`@-moz-keyframes ${n} {${I}}`,`@-o-keyframes ${n} {${I}}`,`@keyframes ${n} {${I}}`,`.${n} {\n            -webkit-animation: ${n} ${h}ms ${q} ${$}ms ${k};\n            -moz-animation: ${n} ${h}ms ${q} ${$}ms ${k};\n            -o-animation: ${n} ${h}ms ${q} ${$}ms ${k};\n            animation: ${n} ${h}ms ${q} ${$}ms ${k};\n        }`].join("\n")}({animationName:SL(W,n,I,h,$),keyframes:k,animationDuration:NL})}function PL(...W){return`transform: ${W.join(" ")}`}function SL(W,n,I,h,q){return`${q}-${W}-${n}-${I}-${h}`}const gL="container--75075",BL="chipContainer--7219d",EL="chipTransformWrapper--5204d";class uL extends P$.PureComponent{constructor(){super(...arguments),this.state={animation:null,animationClassName:"",chipValue:0},this.clientX=0,this.clientY=0,this.handleMove=qL.A((W=>{const{movedFromBetSpotKey:n}=this.props;n&&("touchmove"===W.type&&W.preventDefault(),this.nextAnimationFrame&&window.cancelAnimationFrame(this.nextAnimationFrame),this.nextAnimationFrame=window.requestAnimationFrame((()=>{const{clientX:n,clientY:I}="touchmove"===W.type?W.touches[0]:W;this.updateChipPosition(n,I)})))}),15),this.setDraggableChipRef=W=>{this.draggableChipRef=W},this.setContainerRef=W=>{this.containerRef=W},this.updateChipPosition=(W,n)=>{const{getDragChipRef:I,reverseScale:h}=this.props,q=I(),$=this.draggableChipRef,k=this.containerRef,{scale:_}=this.props;if(q&&$&&k){const{top:I,left:q}=k.getBoundingClientRect(),{x:N,y:c}=$.getBoundingClientRect();if(N===W&&c===n)return;this.clientX=W,this.clientY=n,$.style.transform=`translate(${(this.clientX-q)/h}px,${(this.clientY-I)/h}px)\n                 scale(${_})`}},this.generateAnimation=()=>{const{scale:W,movedToBetSpotKey:n,undoFromBetSpotKey:I,getBetSpotChipRect:h,setDragChipRef:q,updateMovedFromBetSpotKey:$,reverseScale:k}=this.props,_=this.draggableChipRef;if(!_||!n||!this.containerRef)return;const N=I?h(I):_.getBoundingClientRect(),{top:c,left:P}=this.containerRef.getBoundingClientRect(),S=I?this.calculateBetSpotChipRectCenter(N):{x:Math.round(N.left),y:Math.round(N.top)},g=h(n),B=this.calculateBetSpotChipRectCenter(g),E=`DraggableChip-${Date.now()}`,u=Math.round((S.x-P)/k),Y=Math.round((S.y-c)/k),f=Math.round((B.x-P)/k),r=Math.round((B.y-c)/k),K=SL(u,Y,f,r,E);this.setState({animation:N$.jsx("style",{children:cL({fromX:u,fromY:Y,toX:f,toY:r,scale:W,prefix:E})},K),animationClassName:K},(()=>{_.style.transform="scale(0.05)",jn.I()&&(_.style.animation="none")})),q(void 0),$(),_.style.transform="",this.clientX=0,this.clientY=0},this.handleTouchEnd=W=>{const{getDragChipRef:n}=this.props,I=n(),h=this.draggableChipRef,{movedFromBetSpotKey:q,updateMovedFromBetSpotKey:$}=this.props;h&&q&&!I&&$(),h&&I&&q&&(W.preventDefault(),W.stopPropagation(),this.returnBackChip(q))},this.returnBackChip=W=>{const{move:n,updateMovedFromBetSpotKey:I,reverseScale:h,setDragAllowed:q}=this.props,k=this.betSpotAtLocation(this.clientX,this.clientY,W)||$.iG;this.nextAnimationFrame&&window.cancelAnimationFrame(this.nextAnimationFrame),this.finishAnimationFrame&&window.cancelAnimationFrame(this.finishAnimationFrame),this.finishAnimationFrame=window.requestAnimationFrame((()=>{const{top:$,left:_}=Cn(this.containerRef);$L.flushSync((()=>{n(W,k,{x:(this.clientX-_)/h,y:(this.clientY-$)/h})})),$L.flushSync((()=>{I()})),null==q||q(!0)}))},this.betSpotAtLocation=(W,n,I)=>{const{getBetSpotRefs:h}=this.props,q=document.elementFromPoint(W,n),$=h(),k=Object.keys($);let _;if(!q)return;const N=q.closest("[data-betspot-destination]");if(!N)return q.closest('[data-role="betting-grid-container"]')?I:void 0;const c=k.filter((W=>$[W]===N));return c.length&&(_=c[0]),_}}static getDerivedStateFromProps(W,n){return{...n,chipValue:W.chipValue||n.chipValue}}componentDidMount(){document.addEventListener("mousemove",this.handleMove,!1),document.addEventListener("touchmove",this.handleMove,{passive:!1,capture:!1}),document.addEventListener("touchend",this.handleTouchEnd,!0),document.addEventListener("mouseup",this.handleTouchEnd,!0)}componentWillUnmount(){document.removeEventListener("mousemove",this.handleMove,!1),document.removeEventListener("touchmove",this.handleMove,!1),this.handleMove.cancel(),document.removeEventListener("touchend",this.handleTouchEnd,!0),document.removeEventListener("mouseup",this.handleTouchEnd,!0),this.finishAnimationFrame&&window.cancelAnimationFrame(this.finishAnimationFrame),this.nextAnimationFrame&&window.cancelAnimationFrame(this.nextAnimationFrame)}componentDidUpdate(W){const{isDragAllowed:n,movedToBetSpotKey:I,movedFromBetSpotKey:h}=this.props;I!==W.movedToBetSpotKey&&this.generateAnimation(),n!==W.isDragAllowed&&!1===n&&h&&this.returnBackChip(h)}render(){this.initialRender();const{chipComponent:W,chipSize:n}=this.props,{animation:I,animationClassName:h,chipValue:q}=this.state,$=n?{width:n.size,height:n.size,fontSize:n.fontSize||void 0}:{};return N$.jsxs("div",{className:g$.A(gL),ref:this.setContainerRef,children:[I,N$.jsx("div",{ref:this.setDraggableChipRef,className:g$.A(BL,h),style:$,children:N$.jsx("div",{className:EL,children:W?N$.jsx(W,{value:q,hasShadow:!1}):N$.jsx(kL.w,{value:q,hasShadow:!1})})})]})}initialRender(){const{movedFromBetSpotKey:W,getDragChipRef:n}=this.props;if(!W)return;const I=n();if(I&&!this.clientY&&!this.clientX){const W=I.getBoundingClientRect();this.updateChipPosition(W.left+W.width/2,W.top+W.height/2)}}calculateBetSpotChipRectCenter(W){return{x:Math.round(W.left+W.width/2),y:Math.round(W.top+W.height/2)}}}var YL=I(94767);const fL=c$.PA((()=>{var W;const n=w$.P(),I=n.draggableChip.undoFrom?n.draggableChip.to:n.draggableChip.from,h=null!==(W=n.ag.values.gameDimensions.reverseScale)&&void 0!==W?W:1,q=n.bets.getBetSpotValue(I),k=P$.useCallback((()=>n.reference.betSpot.all),[n.reference.betSpot]),_=P$.useCallback((W=>Cn(W===$.iG?Kn.CG():n.reference.chip.get(W))),[n.reference.chip]),[N,c]=YL.J(n.reference.common),{scale:P,reverseScale:S}=n.layout.bettingGridScaleFactor;return N$.jsx(uL,{reverseScale:h,chipValue:q,movedFromBetSpotKey:n.draggableChip.from,movedToBetSpotKey:n.draggableChip.to,isDragAllowed:n.gamePhase.isBetsOpen,move:n.betProcessor.move,updateMovedFromBetSpotKey:n.draggableChip.updateFrom,getBetSpotRefs:k,undoFromBetSpotKey:n.draggableChip.undoFrom,scale:P*S/h,getBetSpotChipRect:_,getDragChipRef:N,setDragChipRef:c})})),rL=c$.PA((()=>{const W=w$.P(),n=P$.useCallback((n=>Object.values(w.K8).includes(n)?W.reference.chip.get(n):W.reference.common.get(n)),[W.reference.chip,W.reference.common]);return N$.jsx(rK,{reverseScale:W.ag.values.gameDimensions.reverseScale,Component:kL.w,bodies:W.flyingChips.bodies,defaultBodyValue:W.ag.lastSelectedChip.toString(),isAnimationEnabled:W.flyingChips.animationEnabled,releaseBodies:W.flyingChips.removeBodies,animationDuration:oh.w.fullAnimationDuration,animationLandPercentage:oh.w.chipLandPercentage,pulseAnimationDuration:oh.w.targetPulseDuration,isDesktop:W.device.isDesktop,getBodyRef:n,registerBodyContainerRef:W.reference.common.set,bodiesKey:"chips"})})),KL=()=>{const W=EX.MZ(),n=`radialBlur-${W}`,I=`shineGradient-${W}`,h=`rayGradient-${W}`,q=`rayBlur-${W}`;return N$.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 82 82",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[N$.jsx("g",{filter:`url(#${n})`,children:N$.jsx("ellipse",{cx:"41",cy:"41",rx:"25",ry:"25",fill:`url(#${I})`})}),N$.jsx("g",{filter:`url(#${q})`,children:N$.jsx("ellipse",{cx:"41",cy:"41",rx:"1.5",ry:"41",fill:`url(#${h})`})}),N$.jsx("g",{filter:`url(#${q})`,children:N$.jsx("ellipse",{cx:"41",cy:"41",rx:"1.5",ry:"41",transform:"rotate(70 41 41)",fill:`url(#${h})`})}),N$.jsx("g",{filter:`url(#${q})`,children:N$.jsx("ellipse",{cx:"41",cy:"41",rx:"1",ry:"22",transform:"rotate(123 41 41)",fill:`url(#${h})`})}),N$.jsxs("defs",{children:[N$.jsx("filter",{id:q,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:N$.jsx("feGaussianBlur",{stdDeviation:"1.2",result:"blurStar"})}),N$.jsx("filter",{id:n,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:N$.jsx("feGaussianBlur",{stdDeviation:"7",result:"blurStar"})}),N$.jsxs("radialGradient",{id:h,cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",children:[N$.jsx("stop",{stopColor:"white"}),N$.jsx("stop",{offset:"1",stopColor:"white",stopOpacity:"0.5"})]}),N$.jsxs("radialGradient",{id:I,cx:"41",cy:"41",r:"35",gradientUnits:"userSpaceOnUse",children:[N$.jsx("stop",{stopColor:"white"}),N$.jsx("stop",{offset:"1",stopColor:"#FFF495",stopOpacity:"0.1"})]})]})]})},tL="winnerBall--cb850",XL="content--27f8b",LL="background--121b8",OL="label--f162d",ZL="star--a0c0c",dL=QK.winnerBall,mL={[w.K8.Player]:["#003CFF","#0021DE"],[w.K8.Tie]:["#06AB05","#02AF01"],[w.K8.Banker]:["#E10202","#BA0202"]},RL=({winner:W,symbol:n})=>{const I=mL[W],h={"--animation-duration":`${dL.duration}s`,"--animation-delay":`${dL.delay}s`,"--gradient-color-from":I[0],"--gradient-color-to":I[1]};return N$.jsxs("div",{className:tL,style:h,children:[N$.jsx("svg",{height:"100%",viewBox:"0 0 1 1",preserveAspectRatio:"xMidYMid meet",children:N$.jsx("rect",{width:"1",height:"1",fill:"none"})}),N$.jsxs("div",{className:XL,children:[N$.jsx("div",{className:LL}),N$.jsx("div",{className:OL,"data-text":n,children:n}),N$.jsx("div",{className:ZL,children:N$.jsx(KL,{})})]})]})};var eL=I(315049),jL=I(769413);function zL(W){const n=/([+-]?\d*\.?\d+)(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(W);return n?[n[1],n[2]]:null}function vL(W){const n=zL(W);return n&&n[1]||""}function VL(W,n){return W in n.style}const FL=["perspective","translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY","scale","scaleX","scaleY","scaleZ"];function wL(W){const n=W.includes("translate"),I=W.includes("perspective");if(n||I)return"px";const h=W.includes("rotate"),q=W.includes("rotate");return h||q?"deg":""}const oL=Symbol("CSSTween: Transform Cache");function DL(W){return new xL(W)}class xL extends jL.v{constructor(W){super({}),this.initialValues=W,this.tweeningProperties={transform:{},style:{},properties:{}},this.node=null,this.applyStyles=()=>{if(!this.node)return;const W=Object.entries(this.tweeningProperties.style);for(const[n,I]of W){const{cssName:W,unit:h}=I;this.node.style[W]=`${this.target[n]}${h}`}const n=Object.entries(this.tweeningProperties.properties);for(const[W,I]of n){const{unit:n}=I,h=W;this.node.style.setProperty(W,`${this.target[h]}${n}`)}const I=Object.entries(this.tweeningProperties.transform),h=this.node[oL];for(const[W,n]of I){const{cssName:I,unit:q}=n,$=W;h[$]=`${I}(${this.target[$]}${q})`}this.node.style.transform=function(W){const n=[];for(const I of FL){const h=W[I];h&&n.push(h)}return n.join(" ")}(h)},this.setDefaultValues()}applyToNode(W){if(!W)return this;const n=W;return n[oL]||(n[oL]={}),this.tweeningProperties=this.getTweeiningMap(W),this.node=n,this.applyStyles(),this}onTargetUpdated(){super.onTargetUpdated(),this.applyStyles()}setDefaultValues(){var W;const n=Object.keys(this.initialValues);for(const I of n){const n=this.initialValues[I];if("number"==typeof n)this.target[I]=n;else{const h=zL(n);this.target[I]=null!==(W=h&&Number.parseFloat(h[0]))&&void 0!==W?W:n}}}getTweeiningMap(W){const n={transform:{},style:{},properties:{}},I=Object.entries(this.initialValues),h=getComputedStyle(W);for(const[$,k]of I)if(void 0!==k)if(q=$,FL.includes(q)){const{unit:W}=this.extractTransformUnitAndValue($,k);n.transform[$]={cssName:$,unit:W,name:$}}else if(VL($,W)){const I=$.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),q=this.extractStyleUnitAndValue(I,k,W,h);if(null===q)continue;n.style[$]={cssName:I,unit:q.unit,name:$}}else if($.startsWith("--")){const W=zL(String(k));if(!W)continue;n.properties[$]={cssName:$,unit:W[1]||"",name:$}}var q;return n}extractStyleUnitAndValue(W,n,I,h){const q=function(W,n,I){return(W.style[I]?W.style[I]:n.getPropertyValue(I))||"0"}(I,h,W);if("number"==typeof n)return{value:n,unit:vL(q)};const $=zL(n);return $?{value:Number.parseFloat($[0]),unit:$[1]}:null}extractTransformUnitAndValue(W,n){if("number"==typeof n)return{value:n,unit:wL(W)};const I=zL(n);return I?{value:Number.parseFloat(I[0]),unit:I[1]}:{value:0,unit:wL(W)}}}var GL=I(234341);function yL(W,n){return{x:W.x+W.width/2-n.width/2,y:W.y+W.height/2-n.height/2}}function CL(W,n,I){const h=W[W.length-1];if(h){n(h);const q=setTimeout((()=>{CL(W.slice(0,-1),n,I),clearTimeout(q)}),I)}}const bL="winnerBall--ad5b6",lL=QK.flyingRoads,AL=c$.PA((()=>{const{flyingWin:W,ag:n,reference:I,gameResult:h,shoe:q,device:$}=w$.P(),[k,_]=P$.useState(!1),N=P$.useRef(null),{winner:c}=h,{isWinnerBallFlying:P,animationEnabled:S}=W,{reverseScale:g}=n.values.gameDimensions,B=c&&P&&k&&S;P$.useEffect((()=>{I.winAnimation.all[Zn.WinnerBallTo]&&_(!0)}),[I.winAnimation.all]),P$.useEffect((()=>{W.reset()}),[$.orientation,W]);const E=P$.useCallback((()=>{CL(AK,W.flyRoadFromWinnerBall,lL.roadDelay)}),[W.flyRoadFromWinnerBall]);if(P$.useEffect((()=>{if(N.current&&B){const W=I.winAnimation.get(Zn.WinnerBallTo),n=I.winAnimation.get(Zn.WinnerBallFrom);if(!n||!W)return;const h=function(W,n,I=1,h=!1){const{from:q,to:$,delay:k,flyDuration:_,disappearDuration:N,landScale:c,onLand:P}=n,S=Cn(q,I),g=Cn($,I),B=Cn(W,I),E=yL(S,B),u=yL(g,B);if(!h)return GL.M().sequence(DL({translateX:E.x,translateY:E.y,scale:1}).delay(k).animateTo({translateX:u.x,translateY:u.y,scale:c},_).callback(P).animateTo({scale:0},N).applyToNode(W));DL({translateX:E.x,translateY:0,scale:1}).applyToNode(W)}(N.current,{from:n,to:W,onLand:E,...QK.winnerBallFly},g,jn.I());if(h)return eL.l({anim:h})}}),[g,I.winAnimation,B,E]),!B)return null;const u=q.history.slice(-1)[0],Y=u?String(KK.wy(q.beadRoadMode,u)):c.charAt(0);return N$.jsx("div",{"data-role":"winner-ball",ref:N,className:bL,children:N$.jsx(RL,{winner:c,symbol:Y})})})),pL=c$.PA((()=>{const W=w$.P();return N$.jsxs(N$.Fragment,{children:[N$.jsx(fL,{}),N$.jsx(rL,{}),W.settings.isBaccaratV4&&N$.jsxs(N$.Fragment,{children:[W.device.isDesktop&&N$.jsx(LK,{}),N$.jsx(AL,{})]})]})})),iL="feeWrapper--1cfaa",UL="fee--850e1",QL=({value:W,theme:n})=>{const I=w$.P();return N$.jsx("div",{className:iL,children:N$.jsx("div",{className:UL,children:N$.jsx(ok,{value:W,sign:I.settings.currencySymbol,theme:n})})})};var TL=I(414646);const HL=(W,n,I)=>YK(n,I)?.4:uK(n)?0:W-(W-.4)*n,aL=c$.PA((({FeeComponent:W=QL})=>{const n=q.Pj(),I=P$.useCallback((W=>Object.values(w.K8).includes(W)?n.reference.chip.get(W):n.reference.common.get(W)),[n.reference.chip,n.reference.common]);return N$.jsx(rK,{reverseScale:n.ag.values.gameDimensions.reverseScale,defaultBodyValue:"1",scale:1,isAnimationEnabled:!0,bodies:n.flyingFee.bodies,animationDuration:TL.c,animationLandPercentage:95,isDesktop:n.device.isDesktop,Component:W,scaleFunction:HL,releaseBodies:n.flyingFee.removeBodies,registerBodyContainerRef:n.reference.common.set,getBodyRef:I,bodiesKey:"fee"})})),JL=({value:W})=>N$.jsx(QL,{value:W,theme:{lightning:bf.t.red.multiplierText,shadow:bf.t.red.textShadow}}),sL=()=>N$.jsx(aL,{FeeComponent:JL}),ML=()=>N$.jsxs(N$.Fragment,{children:[N$.jsx(pL,{}),N$.jsx(sL,{})]}),WO="classicOverlay--b0680",nO="bettingGrid--fd02a",IO="scaled--0c69a",hO=c$.PA((()=>{const W=EY();return N$.jsx("div",{className:WO,children:N$.jsx("div",{className:g$.A(nO,{[IO]:!W.gamePhase.isBetsOpen}),children:N$.jsx($f,{})})})})),qO="gameResult--60910",$O=()=>N$.jsx("div",{className:qO,children:N$.jsx(sX,{})}),kO="gameOverlay--4ef6e",_O={PreferencesCheckboxes:Fk,PreferencesTabs:F$,LayoutBottomRightButtons:[jk],LayoutImmersiveFooterLeftComponent:()=>N$.jsx(cf,{children:N$.jsx(vr,{})}),LayoutImmersiveFooterBettingGrid:kf,LayoutImmersiveFooterRightComponent:()=>N$.jsx("div",{className:yt,children:N$.jsx(Gt,{})}),LayoutImmersiveFooterGradientComponent:dk,GameOverlays:c$.PA((()=>{const W=EY();return N$.jsxs(N$.Fragment,{children:[N$.jsx(ML,{}),N$.jsx("div",{className:kO,children:W.layout.isDesktopClassic?N$.jsx(hO,{}):N$.jsx($O,{})})]})})),LayoutClassicTopRightComponent:()=>N$.jsxs("div",{className:bt,children:[N$.jsx("div",{className:Ct,children:N$.jsx(Gt,{})}),N$.jsx(vr,{})]}),LayoutClassicVideoOverlayComponent:()=>N$.jsxs("div",{className:nL,children:[N$.jsx("div",{className:IL,children:N$.jsx(WL,{})}),N$.jsxs("div",{className:hL,children:[N$.jsx(j_,{}),N$.jsx(v_,{})]})]}),LayoutBetLimitsBody:Lk,WinnerListMultiplierComponents:{WinnerMultiplier:E_},HelpComponentListCreator:f_,HelpCreator:r_},NO="gameUnderlay--be9f5";var cO;!function(W){W.Container="container"}(cO||(cO={}));var PO=I(340680);const SO=function(W){return n=>c$.PA((()=>{const I=q.Pj(),{hidden:h,description:$,label:k,role:N,key:c,onChange:P,isDisabled:S}=n(I),g=c,B=P$.useCallback((W=>{I.preferences.updatePreferenceValue(g,W),null==P||P(W)}),[I,g,P]);if(h)return null;const E=_.sU();return N$.jsx(W,{isChecked:I.preferences.getValue(g),gameTheme:I.ag.gameTheme,onChange:B,role:N,label:k,description:$,isDisabled:S,isRtl:E})}))}((({isChecked:W,gameTheme:n,onChange:I,label:h,description:q,role:$,isDisabled:k})=>N$.jsx(PO.o,{gameTheme:n,label:h,isRtl:_.sU(),role:$,onChange:I,isChecked:W,description:q,isDisabled:k})));var gO=I(636874),BO=I(850449),EO=I(137832),uO=I(94501);function YO(W){const n=EO.P(BO.SJ),I=_.sU();return N$.jsx(uO.a,{...W,gameTheme:n,isRtl:I})}var fO=I(127793);const rO=Y$({icons:[u$(2,{winnerType:N.WinnerTypeBaccarat.Player,additionalType:N.AdditionalTypeBaccarat.Tie}),[...u$(3,{winnerType:N.WinnerTypeBaccarat.Banker}),...u$(1,{winnerType:N.WinnerTypeBaccarat.Banker,additionalType:N.AdditionalTypeBaccarat.Tie})],u$(1,{winnerType:N.WinnerTypeBaccarat.Player}),u$(4,{winnerType:N.WinnerTypeBaccarat.Banker}),u$(4,{winnerType:N.WinnerTypeBaccarat.Player}),u$(2,{winnerType:N.WinnerTypeBaccarat.Banker}),u$(4,{winnerType:N.WinnerTypeBaccarat.Player}),u$(2,{winnerType:N.WinnerTypeBaccarat.Banker})],rows:4,columns:8}),KO=[{x:0,y:0,props:{roadType:N.RoadType.Cockroach,winnerType:N.WinnerTypeBaccarat.Tie}},{x:0,y:1,props:{roadType:N.RoadType.Cockroach,winnerType:N.WinnerTypeBaccarat.Tie}},{x:1,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:1,y:1,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:2,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:2,y:1,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:2,y:2,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:3,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:4,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:5,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:5,y:1,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:5,y:2,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:5,y:3,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Player}},{x:6,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}},{x:7,y:0,props:{roadType:N.RoadType.Big,winnerType:N.WinnerTypeBaccarat.Banker}}],tO="container--3e726",XO="gridWrap--5bb13",LO="isSelected--32eda",OO="golden--67604",ZO=({color:W,fill:n,stroke:I,isLive:h=!1,IconShapeComponent:q,theme:$,scorecardTheme:k,gameTheme:_,background:c})=>{const P=P$.useMemo((()=>(W=>({columnCount:8,rowCount:4,strokeWidth:.1,icons:N.mapIconsToRoadItemsBaccarat(W?rO:KO,W)}))(h)),[h]),S=$===k;return N$.jsxs("div",{className:tO,"data-role":"scorecard-theme-option-container",children:[N$.jsx("div",{style:{background:c},className:g$.A(XO,{[LO]:S,[OO]:_===fO.q.Golden}),children:N$.jsx(N.GridView,{IconShapeComponent:q,...P,icons:P.icons,fill:n,stroke:I,redesigned:!0})}),$&&N$.jsx(YO,{id:W,role:W,value:$,bulletPosition:"left",isChecked:S,isDesktop:!1,children:W})]})},dO={[N.ScorecardThemeNames.BlackDot]:({isRng:W,theme:n,scorecardTheme:I,gameTheme:h})=>N$.jsx(ZO,{IconShapeComponent:N.EmptyRoadItem,fill:N.getScorecardTheme(N.ScorecardThemeNames.BlackDot).fill,stroke:N.getScorecardTheme(N.ScorecardThemeNames.BlackDot).stroke,color:_.Tl("settings.gameSpecifics.scorecards.immersive"),isLive:!W,theme:n,scorecardTheme:I,gameTheme:h,background:N.getScorecardTheme(N.ScorecardThemeNames.BlackDot).background}),[N.ScorecardThemeNames.WhiteSolid]:({isRng:W,theme:n,scorecardTheme:I,gameTheme:h})=>N$.jsx(ZO,{fill:N.getScorecardTheme(N.ScorecardThemeNames.WhiteSolid).fill,stroke:N.getScorecardTheme(N.ScorecardThemeNames.WhiteSolid).stroke,color:_.Tl("settings.gameSpecifics.scorecards.classic"),isLive:!W,theme:n,scorecardTheme:I,gameTheme:h,background:N.getScorecardTheme(N.ScorecardThemeNames.WhiteSolid).background})},mO=[N.ScorecardThemeNames.BlackDot,N.ScorecardThemeNames.WhiteSolid],RO=({gameTheme:W,scorecardTheme:n,setScorecardTheme:I,themes:h=mO,isRng:q,isRtl:$})=>{const k=P$.useMemo((()=>function({themes:W,isRng:n,scorecardTheme:I,gameTheme:h}){return W.map((W=>({value:W,component:dO[W]({isRng:n,scorecardTheme:I,theme:W,gameTheme:h})})))}({themes:h,isRng:q,scorecardTheme:n,gameTheme:W})),[q,h,n,W]);return N$.jsxs(N$.Fragment,{children:[N$.jsx(gO.m,{isRtl:!!$,label:_.Tl("settings.gameSpecifics.scorecards")}),N$.jsx(B$.P,{setValue:I,value:n,options:k,variant:"simple"})]})},eO=c$.PA((({isRng:W=!1})=>{const n=q.Pj(),I=P$.useCallback((W=>{n.preferences.updatePreferenceValue(s.Background,W),n.log.clientPressedSetting(s.Background,W)}),[n]);return N$.jsx(RO,{gameTheme:n.ag.gameTheme,isRng:W,setScorecardTheme:I,scorecardTheme:n.preferences.scorecardTheme,themes:$.DC,isRtl:_.sU()})}));var jO=I(132006),zO=I(897899),vO=I(744327);const VO=({betMinLimit:W,betMaxLimit:n,currencySymbol:I,tableMinLimit:h,tableMaxLimit:q,tableName:$,tBodyComponent:k,preSection:N,areLimitsInlined:c=!1,hideTitle:P=!1,isTablet:S=!1,showPayouts:g,legacyMenuMode:B})=>{const E=P$.useContext(jO.lv),u=P$.useMemo((()=>y$.Q({lowerLimit:W,upperLimit:n,currencySymbol:I})),[W,n,I]),Y=P$.useMemo((()=>{if(q&&h)return y$.Q({lowerLimit:h,upperLimit:q,currencySymbol:I})}),[h,q,I]);return N$.jsxs(N$.Fragment,{children:[N$.jsx(Wt.y,{className:vO.A.container,useMobileScrollable:!0,dataRole:B?void 0:"drawer-scrollable",hasContentFadeOut:!B,refCallback:null==E?void 0:E.assignScrollable,children:N$.jsxs("div",{className:vO.A.scrollContainer,children:[!P&&N$.jsxs("div",{className:g$.A(vO.A.tableInfo,{[vO.A.tablet]:S}),children:[N$.jsxs("div",{children:[`${_.Tl("table")}: `,N$.jsx("span",{className:vO.A.tableName,children:$})]}),N$.jsxs("div",{children:[N$.jsx("span",{children:_.Tl("betlimits3")})," ",N$.jsx("span",{className:vO.A.limits,children:u})]}),!!Y&&N$.jsxs("div",{"data-role":"table-limits",children:[N$.jsx("span",{children:_.Tl("tableLimits3")})," ",N$.jsx("span",{className:vO.A.limits,children:Y})]})]}),N,N$.jsxs("table",{className:vO.A.table,children:[N$.jsx(zO.V,{isMobile:!0,areLimitsInlined:c,showPayouts:g,legacyMenuMode:B}),k]})]})}),B&&N$.jsx("div",{className:g$.A(vO.A.shadow,{[vO.A.tablet]:S})})]})};VO.displayName="MobileBetLimitsAndPayoutsTable";const FO=c$.PA((()=>{const W=w$.P(),{tableName:n,currencySymbol:I,tableLimits:h,betSpotLimits:q,displayTableLimit:$}=W.settings,k=h.min>0&&h.max>0&&$;return N$.jsx(VO,{tableName:n,currencySymbol:I,betMinLimit:q.min,betMaxLimit:q.max,tableMinLimit:k?h.min:void 0,tableMaxLimit:k?h.max:void 0,tBodyComponent:N$.jsx(Lk,{}),isTablet:W.device.isTablet})})),wO="cameraSwitcher--1c917",oO="desktop--cbb07",DO="heading--f339b",xO="standalone--4ca50",GO=[{value:OI.Multi,translationKey:"settings.video.multipleCameras"},{value:OI.Single,translationKey:"settings.video.singleCamera"}],yO=({hasMultipleStreams:W,cameraMode:n,standalone:I,setCameraMode:h,className:q})=>W?N$.jsxs("div",{className:g$.A(wO,q,{[xO]:I}),children:[N$.jsx(E$.q,{className:DO,children:"settings.video."+(I?"videoContent_uppercase":"videoContent")}),GO.length>0&&N$.jsx(B$.P,{setValue:h,value:n,options:GO,variant:"with-anchor"})]}):null,CO=c$.PA((W=>{const n=w$.P(),I=!(!n.settings.desktopVideoPlaylist[mI.VideoPlaylist.Classic3]&&!n.settings.desktopVideoPlaylist[mI.VideoPlaylist.Classic4]),h=P$.useCallback((W=>{n.preferences.updatePreferenceValue($I.CameraMode,W),n.log.clientPressedSetting($I.CameraMode,W)}),[n.preferences,n.log]);return N$.jsx(yO,{className:n.device.isDesktop?oO:void 0,hasMultipleStreams:I,cameraMode:n.preferences.cameraMode,standalone:W.standalone,setCameraMode:h})})),bO=0,lO=1,AO=0,pO=0,iO="50% 50%",UO="zoom--61717",QO="zoomInner--097ac",TO=({children:W,scale:n,origin:I,translateX:h,translateY:q,duration:$})=>{const k=P$.useMemo((()=>({"--origin":null!=I?I:iO,"--scale":null!=n?n:lO,"--transformX":`${null!=h?h:AO}%`,"--transformY":`${null!=q?q:pO}%`,"--duration":`${null!=$?$:bO}s`})),[I,n,h,q,$]);return N$.jsx("div",{className:UO,children:N$.jsx("div",{className:QO,style:k,children:W})})},HO=c$.PA((({children:W})=>{var n,I,h;const q=w$.P(),$=null===(n=q.videoZoom)||void 0===n?void 0:n.scale,k=null===(I=q.videoZoom)||void 0===I?void 0:I.translateY,_=null===(h=q.videoZoom)||void 0===h?void 0:h.duration,N=P$.useMemo((()=>q.settings.isCameraOnRails&&q.device.isPortrait?$:q.settings.portraitVideoZoom&&q.device.isPortrait?q.device.isBigDeviceDimensions?q.settings.portraitVideoZoom:q.settings.portraitVideoZoom-.15:1),[q.device.isBigDeviceDimensions,q.settings.portraitVideoZoom,q.device.isPortrait,q.settings.isCameraOnRails,$]),c=P$.useMemo((()=>q.settings.isCameraOnRails&&q.device.isPortrait?k:0),[q.device.isPortrait,q.settings.isCameraOnRails,k]),P=P$.useMemo((()=>q.settings.isCameraOnRails&&q.device.isPortrait?_:0),[q.device.isPortrait,q.settings.isCameraOnRails,_]);return N$.jsx(TO,{scale:N,duration:P,translateY:c,origin:"50% 0%",children:W})}));var aO=I(95772),JO=I(361494);const sO="backdrop--251c9",MO="collapsed--0d380",WZ="invisibleCollapsed--6c6fc",nZ="isPortrait--0f397",IZ="isLandscape--f347a",hZ="hideBackdropBackground--76225",qZ="bottomBackdrop--defc4",$Z="visible--2a622",kZ="bottomBackdropV2--766c3",_Z=({isPortrait:W,backgroundStyle:n,hideBackdropBackground:I,showBottomBackdrop:h,isPhone:q,isCollapsed:$,invisibleCollapsed:k=!0,onClick:_})=>{const N=P$.useMemo((()=>g$.A(sO,{[nZ]:W,[IZ]:!W,[hZ]:I,[MO]:$,[WZ]:$&&k})),[W,I,$]),c=P$.useMemo((()=>g$.A(qZ,{[kZ]:q,[$Z]:h,[nZ]:W})),[q,h,W]),P=P$.useMemo((()=>({background:n})),[n]),S=P$.useMemo((()=>W?void 0:_),[W,_]);return N$.jsxs(N$.Fragment,{children:[N$.jsx("div",{className:N,style:P,onClick:S}),N$.jsx("div",{className:c})]})};var NZ=I(504642),cZ=I(715907);const PZ=N$.jsx("img",{src:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2220%22%20height%3D%2212%22%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23D5D3D0%22%20fill-rule%3D%22nonzero%22%20d%3D%22M10%208.95%2018.2.3l1.45%201.38-9.67%2010.16L.34%201.69%201.8.3z%22%2F%3E%0A%3C%2Fsvg%3E%0A"}),SZ=W=>N$.jsx(cZ.$,{...W,role:"minimizeButton",iconComponent:PZ,type:"secondary"}),gZ="buttonContainer--8c7a9",BZ="isLeft--03674",EZ="isTablet--e7894",uZ="menuButtonSpacer--222f9",YZ="minimizeButtonContainer--4004c",fZ="isLandscape--48011",rZ="minimizeButtonVisible--4fdfc",KZ=({isMenuButtonOnBottom:W,isTablet:n,isCollapsed:I,isPortrait:h,buttons:q,onMinimizeButtonClick:$,containerClassName:k})=>{const _=P$.useMemo((()=>q?Object.values(q).filter(a.Vq):[]),[q]),N=_.length,c=P$.useMemo((()=>!I&&!h),[I,h]),P=P$.useMemo((()=>({onClick:$,...!c&&{state:"Disabled"}})),[c,$]),S=P$.useMemo((()=>g$.A(uZ,{[EZ]:n})),[n]),g=P$.useCallback(((n=0)=>NZ.A(W&&n>0?n+1:n,(W=>N$.jsx("div",{className:S},W)))),[W,S]),B=P$.useMemo((()=>g$.A(YZ,gZ,k,{[rZ]:c,[EZ]:n,[fZ]:!h})),[n,h,c,k]),E=P$.useMemo((()=>g$.A(gZ,k,{[BZ]:h,[EZ]:n})),[h,n,k]);return N$.jsxs(N$.Fragment,{children:[N$.jsxs("div",{className:B,children:[N$.jsx(SZ,{...P}),g(N+1)]}),_.map(((W,n)=>N$.jsxs("div",{className:E,children:[N$.jsx(W,{}),g(h?0:n+1)]},n)))]})},tZ=W=>{const{children:n,...I}=W,h=P$.useRef(),q=P$.useCallback((W=>{h.current=W.target}),[]),$=P$.useCallback((W=>{var n,I;const q=W.changedTouches[0],$=document.elementFromPoint(q.clientX,q.clientY);"touchendable"!==(null===(I=null===(n=null==h?void 0:h.current)||void 0===n?void 0:n.dataset)||void 0===I?void 0:I.role)&&h.current!==$&&W.stopPropagation()}),[]);return N$.jsx("div",{...I,onTouchStart:q,onTouchEndCapture:$,children:n})},XZ="gameControls--ab9e4",LZ="isLandscape--7f615",OZ=P$.memo((({isLandscape:W,className:n,children:I,...h})=>{const q=g$.A(XZ,W&&LZ,n);return N$.jsx("div",{className:q,"data-role":"expand-betting-grid",...h,children:N$.jsx(tZ,{children:I})})})),ZZ="overlay--e3c59",dZ="gameControlsWrapper--9fbf7",mZ="isLandscape--61724",RZ="isScaled--7087f",eZ=({isPortrait:W,isTablet:n,isPhone:I,allowInteraction:h,isScaled:q,isMenuButtonOnBottom:$,hideBackdropBackground:k=!1,enableScrollable:_,action:N,backdropBackgroundStyle:c,getBackdropBackgroundStyle:P,backdropInvisibleCollapsed:S,transformStyle:g,topPositionStyle:B,bottomPositionStyle:E,getGameControlsClassName:u,getGameControlsWrapperClassName:Y,gameOverlayContainers:{content:f,preOverlays:r=[],postOverlays:K=[],buttons:t},setIsExpanded:X,handleCardsContainerUpdate:L,removeAllAbsTooltips:O,clientTapMinimizeGridLog:Z})=>{const d=FY.Z(W),m=FY.Z(N),[R,e]=P$.useState(N!==II.Expand),[j,z]=P$.useState(0),[v,V]=P$.useState(0),F=P$.useRef(null),w=P$.useCallback((()=>{setTimeout((()=>{O()}),0)}),[O]),o=P$.useCallback((W=>{const n=W.touches[0];V(n.clientY)}),[]),D=P$.useCallback((W=>{const n=W.changedTouches[0].clientY,I=Math.abs(v-n)>40;return{modeChangeTriggered:I,shouldBeCollapsed:I&&v<n}}),[v]),x=P$.useCallback((()=>j>Date.now()-450),[j]),G=P$.useCallback((W=>{R!==W&&(e(W),z(Date.now()),X(!W),w())}),[R,w,X]),y=P$.useCallback(((W,n)=>{h&&!x()&&(G(W),W&&n&&Z(n))}),[h,Z,G,x]),C=P$.useCallback((()=>y(!1)),[y]),b=P$.useCallback((W=>{const{modeChangeTriggered:n}=D(W);(n||x())&&(W.stopPropagation(),w()),R&&h&&(W.preventDefault(),C())}),[h,D,C,x,R,w]),l=P$.useCallback((()=>y(!0,wW.Swipe)),[y]),A=P$.useCallback((W=>{const{modeChangeTriggered:n,shouldBeCollapsed:I}=D(W);I?l():n&&C()}),[D,l,C]),p=P$.useCallback((W=>{const n=W.target;"transform"===W.propertyName&&"expand-betting-grid"===n.getAttribute("data-role")&&(null==L||L())}),[L]),i=P$.useCallback((()=>y(!0,wW.ClickOnButton)),[y]),U=P$.useCallback((()=>y(!0,wW.ClickOnBackdrop)),[y]),Q=W=>{W.preventDefault()},T=P$.useMemo((()=>!W&&{onTouchStart:o,onTouchEnd:b,onTouchMove:A,...L&&{onTransitionEnd:p}}),[L,W,p,b,A,o]),H=P$.useMemo((()=>g$.A(dZ,{[mZ]:!W,[RZ]:q},null==Y?void 0:Y({isLandscape:!W,isTablet:n}))),[Y,W,n,q]);P$.useEffect((()=>{W&&L&&L()}),[W,L,B]),P$.useEffect((()=>{const n=void 0!==d&&d!==W,I=void 0!==m&&m!==N;W?R&&(e(!1),z(0)):(n||I&&N!==II.Nothing)&&G(N!==II.Expand)}),[W,R,d,N,m,G]);const a=P$.useMemo((()=>({transform:g,top:B,bottom:E})),[g,B,E]),J=P$.useMemo((()=>null==u?void 0:u({collapsed:R,isLandscape:!W,isTablet:n})),[u,R,W,n]);return N$.jsxs(N$.Fragment,{children:[N$.jsx(_Z,{isPortrait:W,isPhone:I,isCollapsed:R,hideBackdropBackground:k,backgroundStyle:(null==P?void 0:P(R))||c,invisibleCollapsed:S,showBottomBackdrop:!!g,onClick:U}),N$.jsxs($$.MobileSafeContainerConnected,{isRng:!1,children:[N$.jsx("div",{className:ZZ,ref:W=>{_||(F.current&&F.current.removeEventListener("touchmove",Q,{capture:!1}),W&&(F.current=W,F.current.addEventListener("touchmove",Q,{passive:!1,capture:!1})))},children:N$.jsxs("div",{className:H,style:a,"data-role":"gameControlsWrapper",...L&&{onTransitionEnd:W=>{"gameControlsWrapper"===W.target.getAttribute("data-role")&&(null==L||L())}},children:[r.map(((W,n)=>N$.jsx(W,{isCollapsed:R},((W,n="key")=>`${n}-${W}`)(n,"overlay")))),N$.jsx(OZ,{"data-expanded":R?"false":"true",isLandscape:!W,className:J,...T,children:N$.jsx(f,{isCollapsed:R,isPortrait:W,isTablet:n})}),K.map((W=>N$.jsx(W,{})))]})}),N$.jsx(KZ,{buttons:t,onMinimizeButtonClick:i,isMenuButtonOnBottom:$,isTablet:n,isPortrait:W,isCollapsed:R})]})]})},jZ=c$.PA((W=>{const n=w$.P(),I=W.gameOverlayContainers,h={...I,buttons:I.buttons?JO.A(I.buttons,n.layout.omittedOverlayButtons):void 0},q=P$.useCallback((()=>{n.tooltip.hideAll()}),[n.tooltip]),$=P$.useCallback((W=>{n.log.clientMinimizeGrid(W)}),[n.log]);return N$.jsx(eZ,{...W,isPortrait:n.device.isPortrait,isTablet:n.device.isTablet,isPhone:n.device.isPhone,enableScrollable:!0,gameOverlayContainers:h,action:n.layout.gameControlsAction,removeAllAbsTooltips:q,clientTapMinimizeGridLog:$})})),zZ="roads--a31b6",vZ="dealNow--971b0",VZ="bettingGrid--a60ca",FZ="portrait--55ead",wZ="hidden--c5c76",oZ="tablet--dc6ed",DZ="roadsPredictionsArea--0e2da",xZ="roadsPredictions--efdfd",GZ="isCollapsed--8d94e",yZ="isHidden--a4536",CZ="fitToContainer--0b917",bZ="roadsPredictionsGradient--83b8d",lZ="visible--57829",AZ=({isCollapsed:W,isMultipliersCardsVisible:n,RoadsPredictions:I,color:h,isBettingDown:q=!1,isGradientDisabled:$=!1,isFitToContainer:k=!1})=>N$.jsxs("div",{className:g$.A(DZ,{[GZ]:!!W,[yZ]:n,[CZ]:k}),children:[!$&&N$.jsx(pZ,{isVisible:q,color:h}),N$.jsx("div",{className:g$.A(xZ),children:N$.jsx(I,{})})]}),pZ=({color:W,isVisible:n})=>N$.jsx("div",{className:g$.A(bZ,{[lZ]:n}),style:{background:`linear-gradient(360deg, ${W} 26.65%, rgba(19, 5, 5, 0.0001) 100%)`}}),iZ=(c$.PA((({isCollapsed:W})=>{const{layout:n,device:I}=w$.P(),h=n.isBettingDown,q=n.gameUnderlayColor;return N$.jsx(AZ,{isCollapsed:W,isFitToContainer:n.isBaccaratV4RoadsMobile&&!I.isDesktop&&!I.isPortrait,isMultipliersCardsVisible:!1,isGradientDisabled:n.isBaccaratV4RoadsMobile,RoadsPredictions:Dt,isBettingDown:h,color:q})})),"cardsBox--07ba2"),UZ="isCollapsed--8c846",QZ="isLandscape--8dab0",TZ="cardsAreVisible--a367e",HZ="isBetsOpen--fc90e",aZ=c$.PA((({isCollapsed:W})=>{const n=EY(),I=n.device.isLandscape,h=n.gamePhase.isBetsOpen,q=n.multipliers.multiplierCardsExist,$=n.layout.isBettingDown,k=n.layout.gameColor;return N$.jsxs(N$.Fragment,{children:[N$.jsx("div",{className:g$.A(iZ,{[UZ]:!!W,[TZ]:q,[QZ]:I,[HZ]:h}),children:N$.jsx(vr,{})}),N$.jsx(AZ,{isCollapsed:W,isMultipliersCardsVisible:q,RoadsPredictions:Dt,isBettingDown:$,color:k})]})})),JZ="lightning--2f7ee",sZ="landscape--aae96",MZ="isTablet--4da4b",Wd="collapsed--97446",nd=({isTablet:W,isLandscape:n,collapsed:I})=>n&&I?g$.A(JZ,Wd,{[MZ]:W}):void 0,Id=({isLandscape:W,isTablet:n})=>W?g$.A(JZ,sZ,{[MZ]:n}):void 0,hd={content:function(W){const{BettingGridContainer:n,RoadsPredictionsContainer:I,DealNowButtonContainer:h,DealNowBubbleContainer:q,CircleTimerContainer:$,TopContainer:k}=W;return W=>{const[_,N]=P$.useState(!!h),{isCollapsed:c,isPortrait:P,isTablet:S}=W;return N$.jsxs("div",{children:[$&&N$.jsx($,{}),k&&N$.jsx(k,{isCollapsed:c}),N$.jsx("div",{className:VZ,children:N$.jsx(n,{isCollapsed:c})}),I&&N$.jsx("div",{className:g$.A(zZ,{[oZ]:S}),children:N$.jsx(I,{isCollapsed:c})}),h&&N$.jsxs("div",{className:g$.A(vZ,{[FZ]:P,[wZ]:!_}),children:[q&&N$.jsx(q,{}),N$.jsx(h,{setContainerVisibility:N})]})]})}}({BettingGridContainer:$f,RoadsPredictionsContainer:aZ,DealNowBubbleContainer:j_,DealNowButtonContainer:v_}),buttons:{[hI.Multiplay]:jk}},qd=c$.PA((()=>{const{device:W,layout:n,draggableChip:I,flyingChips:h}=EY(),{containerWidth:q,containerHeight:$}=W.dimensions,k=aO.A(q/$,2);return N$.jsx(jZ,{allowInteraction:!I.isDragInProgress&&n.gameControlsAllowInteraction,setIsExpanded:h.playHideAnimations,gameOverlayContainers:hd,getGameControlsClassName:nd,getGameControlsWrapperClassName:Id,transformStyle:n.gameOverlayTransformStyle,bottomPositionStyle:n.bottomPositionStyle,topPositionStyle:n.topPosition,isScaled:1.89===k&&!W.isPortrait})})),$d="gradientWrapper--3d7b6",kd="noAnimation--4aa9f",_d="videoGradient--10404",Nd="blendedOverlay--e4295",cd=({isPortrait:W,skipHeightTransition:n,containerStyles:I,backgroundStyle:h,withBlendedOverlay:q})=>{const[$,k]=P$.useState(!1),[_,N]=P$.useState(W);return P$.useEffect((()=>{k(_!==W),N(W)}),[_,W]),N$.jsx("div",{style:I,className:g$.A($d,{[kd]:$||n}),children:N$.jsx("div",{style:{background:h},className:g$.A(_d,{[Nd]:q})})})},Pd=c$.PA((W=>{const n=w$.P(),{isPortrait:I,isTablet:h}=n.device;return N$.jsx(cd,{...W,isPortrait:I,skipHeightTransition:!I||n.settings.isBaccaratV4,withBlendedOverlay:h&&n.settings.isBaccaratV4})})),Sd=c$.PA((()=>{const W=EY();return N$.jsx(Pd,{backgroundStyle:W.layout.videoGradientBackgroundStyle,containerStyles:W.layout.videoGradientContainerStyles})})),gd="video-overlay-gradient--966bf";function Bd(){const[W,n]=P$.useState({width:0,height:0});function I(){n({width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)})}P$.useEffect((()=>(I(),Qf.w9(I))),[]);const h=W.width,q=W.height/Qt.Yf.height*Qt.Yf.width,$=(h-q)/2,k=.05*q,_={backgroundImage:`linear-gradient(\n90deg,\nrgba(0, 0, 0, 1) ${$}px,\nrgba(0, 0, 0, 0) ${$+k}px,\nrgba(0, 0, 0, 0) ${$+q-k}px,\nrgba(0, 0, 0, 1) ${$+q}px,\nrgba(0, 0, 0, 1) 100%\n)`};return h>q+10?N$.jsx("div",{className:gd,style:_}):null}Bd.displayName="VideoOverlayGradient";const Ed={MobileGameOverlayContainer:qd,MobileLayoutUnderlays:[()=>{const W=w$.P(),n={background:W.layout.gameUnderlayColor,opacity:W.layout.gameGradientOpacity};return N$.jsx("div",{className:NO,style:n,"data-role":cO.Container})}],MobileVideoOverlays:[WL],MobileVideoGradients:[Sd,Bd],MobileMenuNavigationMap:{betLimits:()=>N$.jsx(FO,{})},MobileSettings:{CustomGameSpecific:function(){const W=SO((W=>({key:s.AllSideBets,label:_.Tl("settings.gameSpecifics.showSideBets"),role:"all-side-bets",isDisabled:W.preferences.isAllSideBetsCheckboxDisabled,description:W.preferences.isAllSideBetsCheckboxDisabled?_.Tl(W.preferences.disabledAllSideBetsCheckboxTooltipKey||"tooltip.hideSideBets"):void 0,hidden:!W.betSpot.hasExtraSideBetsConfigured||W.settings.isMainBetsOnly}))),n=SO((W=>({key:$I.ShowBettingStats,label:_.Tl("settings.gameSpecifics.betStatistics"),description:_.Tl("settings.gameSpecifics.betStatistics.message"),role:"betting-statistics",onChange:n=>W.log.clientPressedStatistics(n)})));return P$.memo((function(){return N$.jsxs(N$.Fragment,{children:[N$.jsx(W,{}),N$.jsx(n,{}),N$.jsx(eO,{})]})}))}()},MobileLayoutOverlays:[ML],HelpComponentListCreator:f_,HelpCreator:r_,WinnerListMultiplierComponents:{WinnerMultiplier:E_},PreferencesVideoComponents:[CO],MobileBasicVideoWrapper:HO};var ud=I(809024),Yd=I(357947),fd=I(441650),rd=I(671837);window.EVO_LOADER.publishApplication("/frontend/evo/r2/","baccarat.xtreme",{initialize:async function(W){_.JL(W.i18nData,"baccarat");const n=Yd.K({gameLoaderParams:W,...x$.DS.IS_PHONE&&{animation:fd.hp.FromLeftToRight,backgroundGradientColor:rd.n(W)}}),{layout:I,storeCreated:$,videoIsReady:k,dispose:c}=function({gameLoaderParams:W,deviceSupport:n,lobby:I,initialLayout:h}){const $=n.IS_DESKTOP;return function(W){_$.W0._init(W.params.setup,W.params.styles,W.params.tableConfig,W.deviceSupport);const n=_$.W0._extend(L)._extend(q$),{getCustomLogEnhancers:I,resolveCustomLogEnhancers:h}=function(){let W;const n=new Promise((n=>{W=n}));return{getCustomLogEnhancers:()=>n,resolveCustomLogEnhancers(n){W(n)}}}(),{dispose:$,getReactRoot:k,transport:_,ag:c}=function(W,n,I){const{params:h,lobby:q,deviceSupport:$,mockBalanceManager:k,transports:_,menuButtonsConfig:c}=W,P=$.IS_DESKTOP,S=P?{[N.LayoutType.ImmersiveV2]:{videoStream:mI.VideoPlaylist.Default,labelTranslationId:"view",winnersList:{height:68}},[N.LayoutType.Classic]:{videoStream:mI.VideoPlaylist.Classic,labelTranslationId:mI.VideoPlaylist.Classic}}:{[N.LayoutType.PhoneV2]:{videoStream:mI.VideoPlaylist.Default}};return g={config:{layout:{initialLayout:W.initialLayout?W.initialLayout:P?N.LayoutType.ImmersiveV2:N.LayoutType.PhoneV2,layoutClassicIsHidden:!1,layouts:S,hasHelpSupportChatButton:!0},chipstack:{position:{tablet:$$.ChipStackTabletPosition.Left,phonePortrait:$$.ChipStackPhonePortraitPosition.BottomCentered,phoneLandscape:$$.ChipStackPhoneLandscapePosition.Left}},tableLimits:{min:n.betSpotLimits.min,max:n.betSpotLimits.max},helpNamespace:"baccarat",app3DEnabled:!0,showOnboardingHintsOptionInSettings:W.bubblesEnabled,soundSettings:{music:{enabled:!0}},video:{enabled:!0}},settings:n,game:{loader:h,mockBalanceManager:k,menuButtonsConfig:c,preferenceConfiguration:Mq(n),getCustomLogEnhancers:I},lobby:q},B=_,k$.I({...g,game:{...g.game,mockTransports:B,gameFamily:"live"}});var g,B}(W,n,I),P=(S={ag:c,transport:_,settings:n,DS:W.deviceSupport,bubblesEnabled:W.bubblesEnabled},new aq(S));var S;h(P.log.getCustomEnhancers());const g=k(W.componentsMap);return{layout:q.jU(P,g),storeCreated:c.preferences.initialization,videoIsReady:c.video.ready,transport:_,store:P,dispose:async()=>{P.dispose(),await $()}}}({params:W,componentsMap:$?_O:Ed,lobby:I,deviceSupport:n,initialLayout:h,bubblesEnabled:$})}({gameLoaderParams:W,deviceSupport:x$.DS,lobby:n});await $;const P=h.H(W.getRoot());return P.render(I),await k,{abstractGameDispose:c,root:P}},dispose:ud.L,applicationType:"game"})},710913:(W,n,I)=>{function h(W,n){const I=$();return h=function(n,q){let $=I[n-=150];if(void 0===h.QxrOKq){const n=function(W,n){let I,h,q=[],$=0,k="";for(W=function(W){const n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let I="",h="";for(let h,q,$=0,k=0;q=W.charAt(k++);~q&&(h=$%4?64*h+q:q,$++%4)?I+=String.fromCharCode(255&h>>(-2*$&6)):0)q=n.indexOf(q);for(let W=0,n=I.length;W<n;W++)h+="%"+("00"+I.charCodeAt(W).toString(16)).slice(-2);return decodeURIComponent(h)}(W),h=0;h<256;h++)q[h]=h;for(h=0;h<256;h++)$=($+q[h]+n.charCodeAt(h%n.length))%256,I=q[h],q[h]=q[$],q[$]=I;h=0,$=0;for(let n=0;n<W.length;n++)h=(h+1)%256,$=($+q[h])%256,I=q[h],q[h]=q[$],q[$]=I,k+=String.fromCharCode(W.charCodeAt(n)^q[(q[h]+q[$])%256]);return k};h.qzdCJr=n,W=arguments,h.QxrOKq=!0}const k=n+I[0],_=W[k];return _?$=_:(void 0===h.nnMkMD&&(h.nnMkMD=!0),$=h.qzdCJr($,q),W[k]=$),$},h(W,n)}function q(W,n){const I=$();return q=function(n,h){let $=I[n-=150];void 0===q.PkkKNb&&(q.lbgypB=function(W){const n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let I="",h="";for(let h,q,$=0,k=0;q=W.charAt(k++);~q&&(h=$%4?64*h+q:q,$++%4)?I+=String.fromCharCode(255&h>>(-2*$&6)):0)q=n.indexOf(q);for(let W=0,n=I.length;W<n;W++)h+="%"+("00"+I.charCodeAt(W).toString(16)).slice(-2);return decodeURIComponent(h)},W=arguments,q.PkkKNb=!0);const k=n+I[0],_=W[k];return _?$=_:($=q.lbgypB($),W[k]=$),$},q(W,n)}function $(){const W=["B8oKCZGnkmoBpItcVW","W77cPfJdLSk7FtG","zXRdOSktrsvimf56","W4fjW4nPahFdLsi","BwLU","mtaZmJeZm0nJvvnlsq","WQ7cON3dO8kIyXi","W5X1WOBdLq","wCkaDSoWhmoGW4ldMr7cMG","W5XUWO3dMmkFfSk2","lfSUmSohWOa","v8kHtw/dRCobW5NcKSoxWRC","WPSaW7JcSdtcGSkYW78ia8k+kW","cv82d8olWOawu8kstW","y2/cISkdW6lcPSodiCkVWO4","gxmvkCoZ","Dg90ywXczxrpBG","umoGAH8dja","ACkKDWm8WOTX","x8kDzSoWgmoXW4RdGYRcUW","WO/dGwqhrZNdKvpdGmkS","zM9YrwfJAa","DMfSAwrHDgu","yxzHAwXHyMXLqG","fmk2p1PFEmoDaXBcUG/cQW","bGDbjCkTkbldVmoypq","CmomWPhdKSkSW7hdTmkbecm","yaVdNSkqDtzzbLjG","mtm1mZm1nuzeyNjPsG","DxbKyxrLvg8","W53dLmoFqdTUW44T","z2v0","sKDtBMW","cbfWbCk6nWxdKmojlW","oIZcJmkEn37cKwS","C2XPy2u","W5dcO8o/CW","Cfn1y2nLC3nmBW","tg93qMv0","W5ldOmkdrSoa","kCkPW5CYW4m3WQ3cR2ZdLq","b8oQW6/dMW","WQP3WRtdVMn+W4y","C29YDa","eCk8W58QW6G8WR7cMKldIG","n1mSbCohWOCXtmkpqG","B25fCNjVCG","q2/cISkCW7VcPmoEe8kpWOq","W6DJDbbfDG","tXxdHZxdIeJcQJW","CMvWzwf0rgLZyq","yM9UDxnuB01HAq","BCoGC8kLWOVcISo0nmom","eCo+amkk","W57cOmoWBMRcJgNdJ1nD","amkOqwNdQmkDAfiCqW","W5VdH8oCwsW","ywXHBMnL","WRtcSI7cNSoCWPpcPq","rJhcKrq/","B3rZrxHHy3rbBq","CM9ICwq","qSkCw8oH","W7yaWOvyW5i","mZGYmtuXwMHoEwTy","W7POwaXCFCo2WRRcMgy","WQr6WOxdPx5/W4C","dSogbCkZWR4","mJC0otG1nfDIv2TWtW","baHUW7VcVa","WR3dS30fsJ/dH3tdO8kS","twfPBKjLDfnWBW","Emk+WP/cNSkWWQLlxSk/W5u","mSo7ESkZWPZdGtKpW4RcRW","psBcQ8kIlgtcI2nfBG","DfrVB2X0Axa","zMX5vg9czxrtCa","WQZcISkJvhJcGSkQpSo4WQa","W6ZcISocAgG","WPZdS30hutddG1tdQCkx","tHpdLJu","W4acWPng","otCWntuYofbHzxHovW","W4CuWPr5W4NdOa","Cg90vMfSDwu","zMzPy2LLBNrszq","F8keW7NdOmoGW77cVe84W70","ESoiWP3dH8kGW7ZdRCkkkb0","DmoscSo5WRddJmkovSkpqq","W5ZdQq7cJhJcGHRcK8oMW5a","WQJcMmkFzhBcI8kwi8oQWRC","cSk7tq","dSkBW4SLW4K8WRNcMG","WP3dT2ux","fmkHr34","yWfDWRyM","qrTfWQCxF0BdGXldVG","yCkwq8oCjW","DhLWzq","BgvUz3rO","i8oNW5C","C2v0qMv0CW","lsdcUSkznG","W6v0EHnz","DCkkF8o/mq","E8knW6tdHmoJW6xcI0q4W6K","W6WpW6tdSN/cMCknWQv3pG","twLUqMv0u3bVDa","W4eeWOjgW5xdI8oQWQ4","W47dS1OOFbBdKq","m0rHqK9euG","gCkTW4OaW488WOVcHgZdKG","ywn0Aw9UCW","WP7dVNakrZK","AxnczxrZt3bLBG","CK5UDxy","ebvWW7lcUW","u8kVtNi","qMv0q29LzMzPyW","WR7cJWOAW47dNSkqsSoqW5K","W4hcKCoAwhO+W7iiWRFdIq","ESo5WOddQ8kO","odK0ndm3mxvJC2PKDq","W6dcLSoUx00","hWzRj8kS","u2nJA0m","zwrbBw91BNq","zxrtB3vUza","amo0bSkn","nSoYz8kuWPFdGsGAW5hcMa","WOJcIXWcW4ldVmkEC8oqW4a","W77dMGFcNwJcOWVcJG","uLjeBxe","tMv4DeDHBwu","zMX5rNjVBujLDa","fSkIsxpdKCkuz0u/Da","fZzYW4/cHW","B25nB3zLu3vJyW","u8kFxCoWbSoGW6NdKG3cJq","AuvhALq","lCkEESo4W7LcWONdSa","umk/z8ogWOuNW5xdNKFdIa","W4nYWOFdKCkU","W5yiWPnuW4RdHCoGWR3cNSka","WQRcIXiBW4ldGW","W6pdU8kxxmob","bbTLW5JcU0bVqW","ySkuzghdNG","k8kdFmoV","eHjDxSkdcXBcQHyWjW/cUG","yq3dUmkvqZPcha","q8kLvxu","ywXczxq","sXpdLGFdLMVcSdxdJsK","D8obamo/WQFdJSkaAmkdvq","C2nVrMK","y21evhq","mZjZwhf5vNi","hmo2W4xdH8og","ESozcmoVWRm","W4/cPmo+D3u","yMfSyw5Jzuf2yq","W4FdLq7cKu/cHbO","WQadW4Pza1JdJsC","De1MqNi","uMvWzwf0","y2XPzw50qMv0qW","EsNcMaGDW5nFW4ZcSSkn","EZz5WQKm","vZrHmG","C2fNzunYB3bWzq","W78nW7NdIq","WPtcTJBcVmoDWPxcPIDPW4u","W4/cSSoWC2pcIuNdHKjS","WO3dVx4q","AhNcVmk1W6BcUSo4f8k4WO8","BfD3tum","Aw1L","CgrHDgvKqMv0CW","rNjVBq","dGjLpSkZjGldNCoyda","zcRcJXq","mteWmJaZotLyr0TqEfK","AKrItw4","wuOggW","W6P9j8k3cvqCbYpcSG","WPdcRmkUW7ZcMv4","ACofcSoPWQhdVW","tM9czxrZugXHyW","W4tdM8o+rILQW6K9W4yo","gW10mG","W57cUSoWAwxcIa","B25eB3vIBgvtDq","zZ5wmMW","eLmXm8onWOeB","Aw5czxrZugvYyW","u8kswmo2hCo4W4RdGXZcMG","vhHzzfy","qsNdS8o5WPS","CmkiW77dLCoIW6pcSa","WP7cJvJdHCkC","yMfSyw5Jzq","WQpcH8k+vhlcMmkS","WO3dT2ibvIRdH2ldQCk3","odK4mZa0oeL5ENLfAG","ESkeW7NdKG","n8oYA8kvWQVdKaSmW4RcTq","tSkUC2pdUCofW4ZcICo2WRe","yMXLqMv0CW","W64mW6ZdN2q","WQP3WRxdO2rZW5JcHffd","BwLUvgfIBgvwyq","W7PYDa9OFCorWRZcUMG","WOdcSI7cISox","BxrJAK4","grT5W5/cRKnXuIVcMG","WRuOWPVcPHddI8kzaSkRmW","WPpcNCkmwuC","nda0otD2C0LmB2G","B25LEujLDa","W4RdMmoCxdf7","s8omWOxdS8kOW5hdVCkq","ChjVChm","gvKNnmor","W5SxW6abWPa","W47dTCkpx8og","AItcLri4W5nFW5VcSSkB","wxLnreG","DCkTWPFcMSkSWPXp","C2v0sgLZDg9YEq","WO/dOh4uvW","nty2mJK4nvn0A3LVDG","W6n/dmkgfNmybYpcTW","W71VWPZdPmkZhmk3W5WyW5m","zMvL","BwL0","FmoVzSkVWOhcP8oV","gW9VW78","EGRdV8kc","W53cS8oLDa","CgXHy2vdAgLW","E8obWPddGmkOW7BdL8kkhI8","AgLZDg9YEq","CM9VDa","W51uW5Tmf2y","z8k+WPtcI8kX","W4mkWOHaW4JdSW","W4VdLWlcJwpcLt7cImoSW40","mtHMv3fkA3y","Dw5KB0fSBa","D3tdQ8oBFs/dIvvyr3xdMCo5","W4CkW6G","jIRcRmkEkMxcHG","WOJcHqOpW4VdSSksASo2W5O","W53cS8oLrMVcGN7dJujS","WRxcRNRdG8kIzqPEWP/dJG","B25szxbLyxrtDq","qwXSqMv0CW","W4OjW64FWObE","DLDit1K","tKSidCoxvKq","fu4Jk8oGWPywt8kHwW","FYtcLrGPW55kW4dcPCk8","BCo+FCk2WP0","W7XYFqXFBmoJWQRcNG","W4KaW7Sc","g1yJkCobWPy","pIlcU8k5mxBcJxG","uMvTB3zL","W4DYgCkZf1iyjX/cQa","nmoWW6NdM8oq","cKGTn8or","W53cT8o9zMJcJM4","rqjGiKRdHCkMW5u","WQdcImkVF3JcGSkS","q8kwqmobb8oGW4RdMZVcQW","F8kLWOS","CMvWzwf0qMv0CW","y0LxBLe","qLfHu2i","W7byW5HNhxZdLq","W40jWQjhW5tdQmo3","W4FdNbNcJx7cKG","y2fSy3vSyxrLvq","y2/cISkJ","nZeYotm2mfH1ELLMAW","CMvZzxj2zujLDa","BMDgywLSu291BG","oIlcVCkgifVcLMfEyW","lCoXW4ldMCocWPVdUH/dJCoy","agNdQ8o/WRdcRtey","k8kjy8o+W6XF","W6nEW59RagtdGXpdLM0","zHpdUmkvuG","fXLKW7JcVa","yMv0","WRxcSI7cNmohWPZcOtvLW7m","W67cNCoiAwG","rxLlALK","q2HPCa","W6/cKSoiFKK3W7ivWRVdGG","mtuYmZe0mhfwuMfMBG","WO7cJX8DW4JdNG","eCkMW64QW4S6WQ/cQMVdJG","fSkDxwNdOSkDDvu","uNzxt1a","pHdcQSkjjNlcJh8","tM90rw5VDwDOtq","wezwuLe","rMvL","mJGYndeYvuLzv0Tz","B0OCdCoxvG","ASkMBWS9WOzN","qMv0DgLUz1rPBq","AxnmB3DsAxnR","A8kKzHKGWQLTWOq","zIVcVr44W51sW4RcHmk6","zg91yMXL","zCorrcqP","vJb5iLZdJmk0W5ijWPu","xdldSG","E8olWOddPCkKW7BdTSkqgJ8","mtK3nZy0og1wzurxAG","ntK2mdGWuefhseDl","mtbvC3vos20","WQakWPW8qIhcN2JdQ14kWPNcV38","WOZcRCkHW6/cIfldTdXGzq","F8oPzSk1","ESkOBb4","rMf0ywW","kcBcUG","W5NdMSoCxq","imoae8kTWP8","FmkCq8oxcCo4W4RdMrRcQW","imkcwNldIq","mtq2mtbKq2fXEfy","CLbrt2C","A2v5CW","t3rOzxi","eSkJCmoXW4e","WQRcQmkSW67cIhtdKY0","WRVdVwqgsdK","zKqro8oAuuZcLI8b","W7/cKCocBG","W7fEe8kqcW","AgLKzuj5vhLWzq","uZrW","fmkRwg/dOmkmremUrq","W6RdNH/cNgtcJWNcRSoGW5m","W5KkW6af","WPDvW54aWPxcVSk1WQdcQmk9W5CiWOy","BglcVCkvW4q","e0KaiSowWOaTtmkfwa","W6nuW4n6","W5RdLatcNa","x8oiWP3dSSkKW73dV8k2otK","Bw92zq","pSo7D8kc","xmk9w8onWO88W4tdJLddQa","DMfSDwvZ","usr2nuddJ8k7","yMv0u3bVDa","zMX5rMvLt25czq","qmoQFGii","twf4vgfIBgvwyq","W6vNCtbEECoxWRS","cbfWfSkYkbxdN8ojgq","WRhcIWySW4ldHmkKBSowW4a","g8k8W60PW583WQ4","BhvL","W4VdMGFcI3JcJq/cJSoSW6O","FqFcVSkOcLpcRq","BgvK","mSoJhCkzWO9wq0q","W4/dKKXFWPlcGCkTDSo3W43cVY8","WQFcP2/dUCkUDa","qL7cU8k3W4u","rttdJ8o9WPRcTsCl","WPXGWRZdIfK","WRxcRMRdMmkJuW5gWQ7dPa","W7PEW5v9","tfZcQmkdW4C","a8o8hCklWPnh","ASkoW6ldLq","xSk7tCoMWR0","iCoYW5ZcKNnWW53dMSorW7u","cfuTmW","ya/dTCkxqZz5hq","W4PqWR0","og9wqxzSuW","W5rLWPZdOmkWhmk3W5ueW4K","WPDrW5ehWP/cV8kWWPRcPCkfW60DWPu","tw92zq","uCkfvCo8bmo1W4NdMXZcJa","W77cM8ozwh4MW6a","W6vHWOtdLmk4mCkNW48","vMfSDwvZ","qsHLja","CMvHC29U","EejLDa","ndq1B3f1rg9R","W4ldMCossZnQ","r1rpseu","W6PMg8kMcG","WPxcHWFcMmoL","B25vBMrVu3vJyW","tXFdJIxdJMJcPc/dNcS","tHFdJIFdLwFcOa","W6unW4/dG2dcVSkjWQv3oW","B8ocWOVdT8kP","mCkfymoVW6jzWP8","W6ZdVCkmCmoaW5RcLWRdVvC","wK9wuvm","WOJcHs0AW5xdMCkzEq","BgfUy2vuB1jLCa","CMvKDwnL","hrfLjmkWkq","z2v0uMvWzwf0yq","AxnfBM91z2Hcyq","omoNW4pcOM5I","j8kJr3/dR8kmDq","AxnszxbLyxrfBG","emo+b8kqWPK","gItcVCkhmq","twLUvgfIBgvwyq","W6FcSGNcS8oQWRRcSW","B8oJFCkY","WRNcPIZcIW","y29LzMzPy2LLBG","y2nLC3m","q3blzLu","jSoNW7ldQSooWPpdHH/dQCoz","WQJcMmkoEhpcG8kAi8oBWQC","oSoRymkf","WPRdS2u","AgLW","bbzGW6JcQMj1xG0","jmkhW6GxW7K","mSkPW40YW7K8WQBcJgddKW","yxrVCNm","y0XZreG","m1vxC1DctG","hfuWaSodWPak","bGDajCk+icNdN8oTpa","qCk2FSogWOONW5pdKKddQG","bX91W5/cOfv8wZ/cNG","WP/cPCkPW77cG0ldTdXGvq","wSkeW7NdOSoIW7tcR0CLW4K","CgXHEunSAwnRAq","twf4qMv0u3bVDa","wmkAra","W6xdKGxcQMJcLt3cISoMW4O","j8oVW4ldV8ox","W4bwWRJdRwG","a8obr8ongCoTW73dHq","kIZcQSkikxi","DxbKyxrLvw5KBW","B8oPySkJWO/cVCoEomoiFW","uM9dC0u","CSokWPVdO8k+W6a","W5D2bCk3geu","DMfSAwrHDg9YCW","W7GmW7ldKG","Cg9W","B3vUDa","ywjSzwq","zxnZtg9N","WRBcUwhdP8k+","oclcS8kdixBcI2K","EvbMseS","W5XTW7PDjW","h8k+W58VW4y4WQJcHwBdPq","WQ/cRMddO8kFDa9hWR7dNW","Aw9U","CMvZDwX0qMv0","W7DJyra","WPxcU2hdO8k+","W48gWP93W4pdS8owWRNcVSkA","rwPouLa","BhvLqMv0","y29Kzq","Df/cJSkGW4q","WQFcPMhdOSkJzq","o3ldJuH1WOOkW7JcTCkyFConiq","rMvLqMv0sw5ZDq","D0jkA1K","DfjLzhvJDgLVBG","WPJdT2uMqsJdSvddO8k3","wJ9al03dJ8kgW5mpWQi","vCk/D8oLWPK8W7RdUvBdVW","BwxcMq","tCkoWR7cJCku","EmodWP3dP8kQW7y","B3rHBejLDhnbBq","vw5KBW","AxneCMfNsw5qCG","pmoJW5ZcSNLNW5VdRmo1W6W","tCkLt2hdVCoi","amoWhSkFWPnqvwpdS8ki","nti5ntm5mgL5u0n6zq","tLyAi8ouva","W6DPEHC","W4CqW6OZWOzp","tSk0qgRdI8ofW5NcJSoKWQK","mJq4odq4vefivvfu","z8kFWO7cMmkHWPPzqCkAW54","W4WgW7JdPhxcR8kHWR9xoW","yM91BMq","zwrdAgLW","vMfSDwu","AxrOrMvL","D0HzyMi","WPtcTJBcI8oBWP7cPXnLW5u","jmk7iSoZW5VdU8kKdCoDAxKRpW","emo0fSklWP5w","WQBcOs3cJ8ob","B3vUDhm","W6ldUmklv8olW5RcHH/dPMa","W4bCWRNdSa","xXpdLHldLhdcPdFdUXS","qMfSyw5JzvrVBW","BSoPzSkYWOFcP8o7lG","zw5HyMXLza","W5GXW5NdI2e","g0WJlSooWPiaumkfDa","WRn4WP3dPxvWW4dcJNbf","Cb7dPq","y2fSy3vSyxrLva","W4DAW4b7fW","mCkfD8o+W4XhWOO","CxJcKCkGW6e","W5ivWOHfW5u","gHCEgCoJqLJcHW","qSkJrhxdUG","uZ7dQmo6","WQ3cNSk+vhlcMa","WQm1ivuzkSopWPFcN2erWOW","W6GgW6NdLq","amoMomoQWOmYW7ldVvG","sg1Uu3C","B25qBgfJzunOAq","h1S2","k8oSW5BdH8ocWP/dLJldTCod","BgfZDfnLBgvJDa","W7OrW7ldLMm","WQNdS30rqs8","Amomb8o/WQC","BSoGE8kLWOS","tw92zujLDenVzq","W6yeW6yFWQjvWP9VWONcLG","WOW1WOtcOcBdH8kclW","W7vHgSkIcG","CMvWzwf0","abPbjCkTkbi","lCkvy8o+","AxnnB3zLsw5qCG","WQ/cP2/dTCkHDa","qmkUCMVdQmomW4hcMmowWRa","Bwf4u3vWzxjtAq","B2DYzxnZ","uSo3zbWF","W5aHW5JdKey","W5zZWPVdRCkYfa","bYjumSkL","cCk6swBdG8kDCLuBwW","WPpcMbOlW5xdPSkwCSoqW5a","CgfKu3rHCNq","vMfSDwvczxq","yMv0CW","WR/cGHCEW6RdN8kbE8oWW5O","irTWeSkXkbxdLSovaW","wfazcSojyeNcIZqb","FSothCoqWQ3dVq","WPmaW7RcTdRcHmozW4i7nCkDkhO","WPNcUSkZW5FcGLe","C2v0vg90ywXczq","gYzHm8kQjbtdMmosia","W7pdN8oJlIpdLmkldmoYWPa/WRm","DxbKyxrLqMv0CW","BwLUqMv0u3bVDa","WPpcHc4cW4BdK8ksxCorW50","DSkvW6ZdHSoO","W6xcL8oD","b8ocbSkSw8kIWPVdRWZcTmopz1y","EmobaSo/WRFdTSkotSkdCa","eCkVW4WJW5KQ","o8kjz8oiW71eWPldILK","errGW6NcO0r5","FSk/WRtcLCkUWOz6u8k/W4m","W4ldGCoBBZPQ","mZu2swHHzuzR","bb5GW7/cQKvFuGNcIa","qSkIWP/cLmkdWPng","W7PZEXC","AKjeB1C","W7VdH8oCtI1QW4K7","W5jJWPZdImkYhCkX","qMv0DgLUz1jLCW","t2fTBwm","r1L6t0S","q1zYsve","u3LHzMC","WQa/i1mskmo1WO7cVe0sWOi","odpdI8oJWQRdU8oKn8k4WRioqa","xmkCuW","dbDHjmkS","FrBdOq","oJRcR8kp","WRfGWOhdQq","zhvJDgLVBG","u3bVDhnfEgfJDa","W4ymW6eZWOzpWQHpWOFcIW","A21Qsve","f8kMW5KkW4uUWQ/cM1FdJW","BKjLDhnqzxjJzq","WPOMWOhcOJZdJCki","q2HPCe1VDMvjBG","W6VcMmoeExi3W70sWOBdIq","ru43WRRdV0vEvGZcG04","h8kRW5yJW44","hf8N","lCoPW4RcSw14W53dH8o1W7y","gmoNW4pcOM5I","eX91W4NcQLvorXlcJW","FrBdOSkcwcfu","F8oiWP3dTq","ywXSB3DtCgvUza","ASkeW77dHmo/W6FcRgmPW54","Dw5KBW","m8kPW4ysW4S7WQBcJeZdLq","Dg9tDhjPBMC","vmkaW77dLCoEW7tcPuqVW54","emo1eZxcUmkuWP3cJmoZWPydWRJcSG","FHpdJYNdJwe","uJrHa0ZdLmkgW5ydWRu","B8kIDYCYWP1aWOzXWOi","W6rNgSkGcG","zrPqWQ4GFLFdSW","iK4bk8oh","W5bHWOtdGSkOh8kJW48vW4O","Bwf4qMv0u3bVDa","ydBcVr44W51sW4RcKSkH","W5aiWOHb","crH9eCk6iI/dN8o/kW","AwvUDfjLzhvJDa","WOVdPSkLpJhcM3JdQNPWza","y2nLC3nmB2C","C2HVD0jLDfnWBW","W7bIva5fBColWRS","Bg9N","yw1VDw50"];return($=function(){return W})()}(function(W,n){const I=775,$="Jv&S",k=605,_=415,N="dS7[",c=172,P=164,S="6TBk",g=547,B=q,E=h,u=W();for(;1;)try{if(-parseInt(E(I,$))/(504+-5075+4572)*(-parseInt(E(690,"]Ei!"))/(7540*1+-4082+-3456))+-parseInt(B(233))/(-1435*-3+2806+-3554*2)*(parseInt(B(k))/(-6598+-2593*-1+4009))+-parseInt(B(_))/(-1*-6577+-1952*-2+6*-1746)*(-parseInt(B(350))/(-8621+-9721+-22*-834))+-parseInt(E(389,N))/(706+1*8583+34*-273)*(parseInt(B(c))/(-7*540+9168+-4*1345))+parseInt(E(618,"AMM#"))/(64*153+103*45+801*-18)*(-parseInt(B(339))/(400+-8116+7726))+parseInt(E(P,S))/(-2253+-1*-7024+-4760)*(parseInt(E(g,"6TBk"))/(1789*-1+5871+-4070))+parseInt(E(340,"VxnW"))/(-4859+-7772+-58*-218)===n)break;u["push"](u["shift"]())}catch(W){u["push"](u["shift"]())}})($,1188234+-31467*18+115171);{const k={};function _(W,n,I){const $="Y^Aw",k="AMM#",_="BiHW",N="cN7z",c=645,P=581,S=q,g=h,B={CTEgW:function(W,n){return W+n},kmjIQ:function(W,n){return W&n},mhCEV:function(W,n,I){return W(n,I)},EjNRP:function(W,n){return W*n},QewIO:function(W,n){return W<n},KOcjL:function(W,n){return W^n},iEGjT:function(W,n){return W+n},uUppV:function(W,n){return W^n},jDbMn:function(W,n,I){return W(n,I)},hVPez:function(W,n){return W&n}};let E=7714+-331*-13+-12017,u="";const Y=B[g(419,"2!pQ")](B[S(627)](-122736+839*-33+215958,B[g(366,"AMM#")](parseInt,n,8039+-9821+1818))[g(392,"LywW")](-8482*-1+-6464+-182*11)[g(161,"5xUr")](-4*876+-6238*-1+-2730,"0"),Math[g(437,"2DWi")](B[S(493)](-1058*7+-1*-1392+6114,I))[g(428,"dS7[")](7985+1610+-9579)[g(380,"I$@Z")](-1*-7607+8248+-15845,"0")),f=W[g(562,"0nPY")](-(5869*1+-198*27+-509));for(let W=3702*2+-1*-1379+-1*8783;B[g(763,"xvRb")](W,-1361+113*11+132);W+=-97*-8+62*-101+5488){const n=B[g(399,$)](parseInt,Y[S(701)](W,B[g(391,k)](W,9432+-3755*2+-1920)),-1*-1608+2063*-1+471*1);E^=n,u+=B[g(354,_)](B[g(789,"0zs8")](parseInt,f[g(308,"07eD")](W,B[g(162,N)](W,-1*2278+984+1296*1)),5799*1+-1438*5+1407),n)[S(c)](-9716+6448+-3284*-1)[S(P)](-3*169+4*893+3063*-1,"0")}return u=B[S(154)](B[g(496,"AMM#")](B[S(198)](parseInt,W[S(701)](-(3066+10*820+50*-225),-(-3979*2+-8510+16482)),4211*1+1220+-5415),B[g(578,"*Slv")](-246+-1*-7629+-7128,E))[g(700,"F8bX")](8898+6484+-15366)[g(282,"F8bX")](2111+562*-17+7445,"0"),u),u}k["k"]=()=>_,I["d"](n,k),I(123515*1+451652+-21*11570)}},855276:(W,n,I)=>{I.d(n,{BQ:()=>q.UH,Dc:()=>S.I,Dr:()=>_.w,G6:()=>P.h8,S3:()=>q.S3,YY:()=>h.N,h2:()=>q.h2,he:()=>$.uu,kw:()=>$.vc,pj:()=>$.Qm,xD:()=>N.U,yQ:()=>c.x,z6:()=>k.G});var h=I(924740),q=I(977638),$=I(999289),k=I(700367),_=I(74329),N=I(20629),c=I(572532),P=I(676700),S=I(800355)},924740:(W,n,I)=>{I.d(n,{N:()=>P});var h=I(64922),q=I(377810),$=I(470800),k=I(965460),_=I(113364),N=I(329232),c=I(20629);function P({roadItems:W,type:n,columnCount:I,rowCount:P,probes:S,probesWinnerType:g,scorecardTheme:B,isInterlacedMode:E=!1,isLive:u,emptyIconShape:Y=!1,probeExtraShapes:f,patternScheme:r,multiplierThemeResolver:K,scorecardThemesOverrides:t,skipFirstLastLines:X,registerProbeRef:L,pulsingAnimationDelay:O,isProbePulsing:Z,registerLastRoadRef:d,currentWinnerType:m}){const R=q.useMemo((()=>{const h=N.W(I*(E?2:1),n,W,S,g,f,r,O,Z,m);return c.U(h,u,B,K,L,d)}),[I,O,E,n,W,S,g,f,u,B,r,K,L,Z,d]);return h.jsx($.V,{gridIcons:R,scorecardTheme:B,columnCount:I,rowCount:P,isInterlacedMode:E,scorecardThemesOverrides:t,skipFirstLastLines:X,IconShapeComponent:Y||B!==k.a.BlackDot?void 0:_.p})}},977638:(W,n,I)=>{I.d(n,{UH:()=>O,S3:()=>t,h2:()=>X});var h=I(64922),q=I(377810);const $="\n    M265 759 c-201 -65 -310 -283 -245 -490 64 -205 283 -315 491 -249\n    205 64 315 283 249 491 -65 205 -286 316 -495 248z\n",k="\n    M308 768 c-27 -5 -48 -14 -48 -18 0 -4 7 -24 15 -43 56 -135 -71\n    -282 -215 -249 -25 6 -47 8 -50 5 -3 -2 -5 -40 -4 -84 1 -69 5 -87 37 -152 44\n    -90 103 -147 195 -190 59 -27 78 -31 152 -31 74 0 93 4 152 31 92 43 151 100\n    195 191 34 69 37 81 37 162 0 81 -3 93 -37 162 -44 89 -103 148 -190 188 -71\n    34 -166 45 -239 28z\n",_="\n    M312 770 c-64 -13 -157 -67 -203 -117 -22 -24 -55 -74 -72 -111 -27\n    -59 -31 -78 -31 -152 0 -74 4 -93 31 -152 78 -167 244 -259 416 -228 37 6 67\n    15 67 20 0 4 -7 24 -15 43 -56 135 71 282 215 249 25 -6 47 -8 50 -5 3 2 5 40\n    4 84 -1 69 -5 87 -37 152 -44 88 -103 147 -190 187 -69 33 -165 45 -235 30z\n",N="\n    M290 769 c-19 -6 -36 -12 -38 -13 -1 -2 5 -19 13 -39 48 -114 -25\n    -243 -144 -255 -27 -2 -63 0 -80 6 -36 13 -41 4 -41 -78 0 -212 175 -390 383\n    -390 54 0 147 17 147 27 0 2 -8 15 -17 30 -23 35 -23 118 1 167 12 23 38 50\n    65 68 40 25 54 29 101 25 30 -2 62 -7 71 -11 14 -6 18 1 24 42 21 156 -80 329\n    -232 399 -65 30 -190 41 -253 22z\n",c="\n    M275 764 c-103 -37 -194 -110 -228 -184 -81 -174 -56 -342 67 -466\n    154 -153 398 -153 552 0 123 124 148 292 67 466 -21 44 -109 132 -153 153\n    -105 48 -221 60 -305 31z m179 -123 c3 -4 19 -11 36 -15 40 -8 128 -96 136\n    -136 4 -17 11 -33 15 -36 5 -3 9 -32 9 -64 0 -32 -4 -61 -9 -64 -4 -3 -11 -19\n    -15 -36 -8 -40 -96 -128 -136 -136 -17 -4 -33 -11 -36 -15 -3 -5 -32 -9 -64\n    -9 -32 0 -61 4 -64 9 -3 4 -19 11 -36 15 -40 8 -128 96 -136 136 -4 17 -11 33\n    -15 36 -12 7 -12 121 0 128 4 3 11 19 15 36 8 40 96 128 136 136 17 4 33 11\n    36 15 3 5 32 9 64 9 32 0 61 -4 64 -9z\n",P="\n    M288 767 c-28 -11 -38 -40 -18 -52 6 -3 10 -22 10 -41 0 -37 22 -56\n    43 -35 13 13 123 15 131 2 3 -4 19 -11 36 -15 40 -8 128 -96 136 -136 4 -17\n    11 -33 15 -36 5 -3 9 -32 9 -64 0 -32 -4 -61 -9 -64 -4 -3 -11 -19 -15 -36 -8\n    -40 -96 -128 -136 -136 -17 -4 -33 -11 -36 -15 -7 -12 -121 -12 -128 0 -3 4\n    -19 11 -36 15 -38 7 -127 94 -136 133 -4 15 -11 33 -16 40 -5 6 -8 37 -7 67 1\n    31 1 57 -2 60 -2 2 -32 6 -67 10 l-62 7 0 -73 c0 -115 37 -206 114 -284 154\n    -153 398 -153 552 0 153 154 153 398 0 552 -52 52 -84 71 -166 98 -51 18 -171\n    19 -212 3z\n",S="\n    M275 764 c-78 -28 -110 -48 -161 -98 -123 -124 -148 -292 -67 -466\n    21 -44 109 -132 153 -153 102 -47 215 -61 287 -35 32 12 45 40 23 53 -5 3 -10\n    22 -10 41 0 37 -22 56 -43 35 -13 -13 -123 -15 -131 -2 -3 4 -19 11 -36 15\n    -40 8 -128 96 -136 136 -4 17 -11 33 -15 36 -12 7 -12 121 0 128 4 3 11 19 15\n    36 8 40 96 128 136 136 17 4 33 11 36 15 3 5 32 9 64 9 32 0 61 -4 64 -9 3 -4\n    19 -11 36 -15 38 -7 127 -94 136 -133 4 -15 11 -33 16 -40 5 -6 8 -37 7 -67\n    -1 -31 -1 -57 2 -60 2 -2 32 -6 67 -10 l62 -7 0 73 c0 115 -37 206 -114 284\n    -52 52 -84 71 -166 98 -55 19 -171 19 -225 0z\n",g="\n    M283 767 c-36 -12 -42 -27 -18 -47 9 -7 15 -29 15 -51 0 -32 4 -39\n    19 -39 11 0 23 5 26 10 8 12 122 13 129 1 3 -4 19 -11 36 -15 38 -7 127 -94\n    136 -133 4 -15 11 -33 16 -40 5 -6 8 -38 7 -70 l-3 -58 58 -8 c32 -5 61 -5 65\n    -2 10 11 6 137 -7 182 -34 121 -137 227 -259 266 -57 19 -169 20 -220 4z\n",B="\n    M0 398 c1 -187 107 -329 291 -387 47 -15 154 -14 196 1 32 12 43 31\n    24 43 -6 3 -13 26 -17 50 -6 43 -24 59 -39 35 -8 -12 -122 -13 -129 -1 -3 4\n    -19 11 -36 15 -38 7 -127 94 -136 133 -4 15 -11 33 -16 40 -5 6 -8 37 -7 67 1\n    31 1 57 -2 60 -2 2 -32 6 -66 10 l-63 7 0 -73z\n";var E=I(471065),u=I(965460),Y=I(999289);function f(W,n){if(n)switch(W){case Y.Qm.Player:return"#2E83FF";case Y.Qm.Banker:return"#EC2024";case Y.Qm.Tie:return"#159252";case Y.Qm.Legend:return"#9B9B9B";default:return"transparent"}switch(W){case Y.Qm.Player:return"#185CC6";case Y.Qm.Banker:return"#C52123";case Y.Qm.Tie:return"#51A548";case Y.Qm.Legend:return"#a7a9ac";default:return"transparent"}}function r(W,n,I){return{path:W,color:f(n,I)}}var K=I(32991);const t={colors:["lightningCircleGradient","#956723","#c69844","#f4e584"],faceliftColors:["lightningCircleGradientFaceLift","#dcb51b","#ffffff","#c8a311"]},X={colors:["redCircleGradient","#953423","#c66744","#f4ab84"],faceliftColors:["redCircleGradientFaceLift","#dc7c1b","#ffffff","#c85d11"]},L=[$,c,S,P,_,k,N,B,g],O=({lightning:W,multiplier:n,extraShapes:I,roadType:X,winnerType:O,isLive:Z,animate:d,additionalType:m,pulsingAnimationDelay:R=0,isPulsing:e=!1,isHidden:j=!1,multiplierThemeResolver:z,theme:v,symbol:V,registerRef:F})=>{const w=q.useRef(null);q.useLayoutEffect((()=>{if(F)return F(X,w.current),()=>{F(X,null)}}),[F,X,O]);const o=[],D=[],x=[],G=W||n&&n>0;if(I&&o.push(...I),(X===E.t.Bead||X===E.t.Small||X===E.t.Big&&G)&&(D[0]=r($,O,Z)),X===E.t.Bead||X===E.t.Big&&G)switch(m){case Y.uu.Banker:D[0]=r(_,O,Z);break;case Y.uu.Player:D[0]=r(k,O,Z);break;case Y.uu.BankerPlayer:case Y.uu.TieBankerPlayer:D[0]=r(N,O,Z)}if((X===E.t.Big&&!G||X===E.t.BigEye)&&(D[0]=r(c,O,Z)),X===E.t.Bead&&G){const W=(z&&n?z(n):t).faceliftColors;switch(x.push(h.jsxs("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:W[0],children:[h.jsx("stop",{stopColor:W[1],offset:"0%"}),h.jsx("stop",{stopColor:W[2],offset:"46.0800918%"}),h.jsx("stop",{stopColor:W[3],offset:"100%"})]},W[0])),D[1]={path:"M40,390a350,350 0 1,0 700,0a350,350 0 1,0 -700,0",color:"none",stroke:`url(#${W[0]})`,strokeWidth:80},m){case Y.uu.Banker:D[1].strokeDasharray="1175, 350";break;case Y.uu.Player:D[1].strokeDasharray="75, 350, 1800";break;case Y.uu.BankerPlayer:case Y.uu.TieBankerPlayer:D[1].strokeDasharray="80, 340, 760, 340, 730"}}if(X===E.t.Big&&!G)switch(m){case Y.uu.Banker:case Y.uu.TieBanker:D[0]=r(S,O,Z);break;case Y.uu.Player:case Y.uu.TiePlayer:D[0]=r(P,O,Z);break;case Y.uu.BankerPlayer:case Y.uu.TieBankerPlayer:D[0]=r(g,O,Z),D[1]=r(B,O,Z)}if(X===E.t.Big&&G){const W=(z&&n?z(n):t).colors;D.forEach((n=>{L.includes(n.path)&&(n.color=`url(#${W[0]})`)})),x.push(h.jsxs("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:W[0],children:[h.jsx("stop",{stopColor:W[1],offset:"0%"}),h.jsx("stop",{stopColor:W[2],offset:"56%"}),h.jsx("stop",{stopColor:W[3],offset:"100%"})]},W[0]))}o.push(h.jsx("g",{transform:"translate(0,78) scale(0.1,-0.1)",fill:f(O,Z),stroke:"none","data-type":"roadItemColor",children:D.map(((W,n)=>h.jsx("path",{d:W.path,fill:W.color,stroke:W.stroke,strokeWidth:W.strokeWidth,strokeDasharray:W.strokeDasharray},n)))},"BankerPlayer")),X===E.t.Big&&G&&o.push(h.jsx("circle",{"data-type":"lightning-circle",fill:f(O,Z),cx:"39",cy:"39",r:"22"},"lightning-circle")),(X===E.t.Cockroach||X===E.t.Big&&[Y.uu.TieBanker,Y.uu.TiePlayer,Y.uu.TieBankerPlayer,Y.uu.Tie].some((W=>W===m)))&&o.push(h.jsx("g",{transform:"translate(0,78) scale(0.1,-0.1)",fill:f(O,Z),stroke:"none","data-type":"roadItemColor",children:h.jsx("path",{d:"\n    M260 360 l-255 -255 60 -60 60 -60 410 410 255 255 -60 60 -60 60\n",fill:f(X===E.t.Cockroach?O:Y.Qm.Tie,Z)},"SLASH")},"BankerPlayerSlash")),[Y.uu.Banker,Y.uu.TieBanker,Y.uu.BankerPlayer,Y.uu.TieBankerPlayer].some((W=>W===m))&&o.push(h.jsx("circle",{cx:"67",cy:"63",r:"10",fill:f(Y.Qm.Banker,Z)},"circle-banker")),[Y.uu.Player,Y.uu.TiePlayer,Y.uu.BankerPlayer,Y.uu.TieBankerPlayer].some((W=>W===m))&&o.push(h.jsx("circle",{cx:"10",cy:"14",r:"10",fill:f(Y.Qm.Player,Z)},"circle-player")),(X===E.t.Bead||X===E.t.Big&&void 0!==V)&&o.push(h.jsx("text",{x:"50%",y:"75%",textAnchor:"middle",fontSize:55,fill:X===E.t.Bead||v===u.a.BlackDot?"white":"black",children:V},"symbol"));const y=[K.A.svg],C={};j&&y.push(K.A.isHidden,"isHidden"),d&&y.push(K.A.animate,"animate"),e&&(y.push(K.A.pulsing,"pulsing"),R&&(C.animationDelay=`${R}s`));const b=void 0!==m?` ${Y.uu[m]}`:"",l=`${Y.Qm[O]}${b}`;return h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:y.join(" "),viewBox:"0 0 80 80","data-type":"roadItem",name:l,ref:F?w:null,children:[h.jsx("defs",{children:x}),h.jsx("g",{style:C,children:h.jsx("svg",{width:"68px",height:"68px",x:"6",y:"6",viewBox:"0 0 80 80",children:o})})]})}},999289:(W,n,I)=>{var h,q,$;I.d(n,{Qm:()=>h,uu:()=>q,vc:()=>$}),function(W){W.Player="Player",W.Banker="Banker",W.Tie="Tie",W.Legend="Legend",W.None="None"}(h||(h={})),function(W){W[W.Banker=0]="Banker",W[W.Player=1]="Player",W[W.BankerPlayer=2]="BankerPlayer",W[W.TieBanker=3]="TieBanker",W[W.TiePlayer=4]="TiePlayer",W[W.TieBankerPlayer=5]="TieBankerPlayer",W[W.Tie=6]="Tie"}(q||(q={})),function(W){W.Blue="Blue",W.Red="Red",W.None="None",W.Green="Green"}($||($={}))},572532:(W,n,I)=>{I.d(n,{x:()=>q});var h=I(999289);function q(W,n=!1){return W.reduce(((W,I)=>{var q,$,k,_;const N=W.length,c=function(W){switch(W.winner){case h.Qm.Banker:return h.vc.Red;case h.Qm.Player:return h.vc.Blue;default:return h.vc.None}}(I),P=W[0],S=I.playerPair||I.bankerPair?{playerPair:I.playerPair,bankerPair:I.bankerPair}:void 0;if(c===h.vc.None&&N>0)W[N-1].ties+=1,W[N-1].pairsOrder&&S&&n&&(W[N-1].pairsOrder=[...null!==(q=W[N-1].pairsOrder)&&void 0!==q?q:[],S]),P.color===h.vc.None?W[0]={...W[0],bankerPair:P.bankerPair||I.bankerPair,playerPair:P.playerPair||I.playerPair,natural:P.natural||I.natural,lightning:P.lightning||I.lightning,multiplier:P.multiplier||I.multiplier,row:0,col:0,pairsOrder:n&&S?[...null!==($=W[0].pairsOrder)&&void 0!==$?$:[],S]:void 0}:(W[N-1].bankerPair=W[N-1].bankerPair||I.bankerPair,W[N-1].playerPair=W[N-1].playerPair||I.playerPair,W[N-1].lightning=W[N-1].lightning||I.lightning,W[N-1].multiplier=W[N-1].multiplier||I.multiplier,W[N-1].pairsOrder=n&&S?[...null!==(k=W[N-1].pairsOrder)&&void 0!==k?k:[],S]:void 0);else if(P&&P.color===h.vc.None)W[0]={ties:P.ties,playerPair:I.playerPair||P.playerPair,bankerPair:I.bankerPair||P.bankerPair,natural:I.natural,lightning:I.lightning||P.lightning,multiplier:I.multiplier||P.multiplier,color:c,row:0,col:0,pairsOrder:n&&S?[...null!==(_=W[0].pairsOrder)&&void 0!==_?_:[],S]:void 0};else{const q={ties:c===h.vc.None?1:0,playerPair:I.playerPair,bankerPair:I.bankerPair,color:c,natural:I.natural,lightning:I.lightning,multiplier:I.multiplier,row:0,col:0,pairsOrder:n&&S?[S]:void 0};W.push(q)}return W}),[])}},700367:(W,n,I)=>{I.d(n,{G:()=>q});var h=I(999289);function q(W,n,I){return W&&n?I?h.uu.TieBankerPlayer:h.uu.BankerPlayer:W?I?h.uu.TieBanker:h.uu.Banker:n?I?h.uu.TiePlayer:h.uu.Player:I?h.uu.Tie:void 0}},800355:(W,n,I)=>{I.d(n,{I:()=>q});var h=I(999289);function q(W,n){const I=function(W){let n;return W.reduce(((W,I)=>(0===W.length||I.color!==n?W=W.concat([[I]]):W[W.length-1]=W[W.length-1].concat(I),n=I.color,W)),[])}(W);return I.reduce(((W,q,$)=>(q.forEach(((q,k)=>{if($<n)return;if($===n&&0===k)return;if(q.color===h.vc.None)return;let _;_=0===k?I[$-1].length===I[$-(n+1)].length?h.vc.Red:h.vc.Blue:!I[$-n][k-1]==!I[$-n][k]?h.vc.Red:h.vc.Blue;const N={color:_,col:0,row:0};W.push(N)})),W)),[])}},74329:(W,n,I)=>{I.d(n,{w:()=>q});var h=I(999289);function q(W){switch(W){case"Red":return h.Qm.Banker;case"Blue":return h.Qm.Player;case"Green":return h.Qm.Tie;case"None":return h.Qm.None;default:return h.Qm.Legend}}},20629:(W,n,I)=>{I.d(n,{U:()=>$});var h=I(64922),q=I(977638);function $(W,n,I,$,k,_){return W?W.map(((N,c)=>({x:N.x||0,y:N.y||0,withDefaultIcon:(k||_)&&N.props.withDefaultIcon,jsx:h.jsx(q.UH,{...N.props,theme:I,pulsingAnimationDelay:N.props.pulsingAnimationDelay,registerRef:N.props.isPulsing?k:_&&c===W.length-1?_:void 0,isLive:n,multiplierThemeResolver:$})}))):[]}},329232:(W,n,I)=>{I.d(n,{W:()=>k});var h=I(999289);const q=(W,n,I)=>({...W[h.Qm[n]][I],isProbe:!0});var $=I(841026);function k(W,n,I,h,k,_,N,c,P,S){const g=n.charAt(0).toLowerCase()+n.slice(1),B=[...I||[]],E=W-1-4;if(h&&void 0!==k){const W=q(h,k,g);W.pulsingAnimationDelay=c,_&&(W.extraShapes=_),B.push(W)}const u=B.map((W=>W.col)),Y=Math.max(...u),f=Math.floor(E-Y>0?0:Y-E);return B.filter((W=>!f||W.col>f-1)).map((W=>{const I=W.col-f,h=W.row,q=!!(null==N?void 0:N.find((W=>W.x===I&&W.y===h))),k=$.j(n,W,q,P,S);return{x:I,y:h,props:k}}))}},841026:(W,n,I)=>{I.d(n,{j:()=>_});var h=I(471065),q=I(999289),$=I(700367),k=I(74329);function _(W,n,I,_,N){var c,P;const S=n.isHidden&&!(N===q.Qm.Tie&&W!==h.t.Big),g=n.ties||0,B=S&&N===q.Qm.Tie&&1===g,E=(null==n?void 0:n.pairsOrder)?n.pairsOrder.pop():void 0,u=S&&(null==E?void 0:E.playerPair)&&!(null===(c=null==n?void 0:n.pairsOrder)||void 0===c?void 0:c.find((({playerPair:W})=>!!W))),Y=S&&(null==E?void 0:E.bankerPair)&&!(null===(P=null==n?void 0:n.pairsOrder)||void 0===P?void 0:P.find((({bankerPair:W})=>!!W))),f={roadType:W,winnerType:S&&N!==q.Qm.Tie?q.Qm.None:k.w(n.color),additionalType:$.G(!Y&&n.bankerPair,!u&&n.playerPair,B?0:g),animate:n.isProbe&&!_,isPulsing:n.isProbe&&_,withDefaultIcon:n.isProbe&&_||S||B,isHidden:S&&!g,pulsingAnimationDelay:n.pulsingAnimationDelay,lightning:n.lightning,multiplier:n.multiplier,extraShapes:I?void 0:n.extraShapes},r=S&&N===q.Qm.Tie&&g>1?g-1:g;return(r>1||f.winnerType===q.Qm.Tie)&&(f.symbol=r),f}},676700:(W,n,I)=>{I.d(n,{h8:()=>$});const h=208;function q(W,n){return W*h+n}function $(W){let n=0,I=0,h=0,$=null,k=!1;const _=(W,n,I)=>(W.row=n,W.col=I,W),N=W.reduce(((W,q)=>{if(0===W.length)return h++,W.concat(_(q,0,0));const N=W[W.length-1];if(q.color===N.color){if(h++,!$){const h=W.find((W=>W.col===n&&W.row===I+1));(5===I||h)&&($=n,k=!0)}k?n+=1:I+=1}else{if(k=!1,null!==$)for(0!==I&&(n=$),$=null;W.find((W=>0===W.row&&W.col===n));)n+=1;else n+=1;h=1,I=0}return W.push(_(q,I,n)),W}),[]);return{list:N,weight:q(h,N.length)}}},386351:(W,n,I)=>{I.d(n,{EN:()=>S,ty:()=>P,j9:()=>c});var h=I(64922),q=I(715907),$=I(377810),k=I(532836);const _="icon--136ed",N=$.memo((({children:W,...n})=>h.jsx("svg",{className:_,fill:"none",viewBox:"0 0 24 24",...n,xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M12.0042 6.35163C10.8048 6.35163 9.63338 5.98849 8.64424 5.31C7.25248 5.35955 5.93717 5.95901 4.98674 6.97692C4.03631 7.99483 3.52835 9.34811 3.57424 10.74C3.56892 12.128 4.11453 13.4614 5.09131 14.4476C6.06809 15.4337 7.39624 15.9921 8.78424 16H15.2242C16.6114 15.9894 17.938 15.4303 18.9142 14.4447C19.8905 13.4591 20.4369 12.1272 20.4342 10.74C20.4801 9.34811 19.9722 7.99483 19.0217 6.97692C18.0713 5.95901 16.756 5.35955 15.3642 5.31C14.3751 5.98849 13.2037 6.35163 12.0042 6.35163ZM15.5742 17.31H8.43424V17.33C7.57978 17.3209 6.73551 17.1433 5.94973 16.8076C5.16395 16.4718 4.45209 15.9844 3.85487 15.3733C3.25765 14.7621 2.78679 14.0392 2.46924 13.2459C2.15169 12.4526 1.99368 11.6044 2.00424 10.75C1.94204 9.02551 2.56601 7.34668 3.73942 6.08143C4.91282 4.81618 6.53995 4.06769 8.26424 4H8.44424V4.48C9.49614 5.18892 10.7358 5.56764 12.0042 5.56764C13.2727 5.56764 14.5123 5.18892 15.5642 4.48V4H15.7442C17.4685 4.07286 19.0941 4.8243 20.2667 6.09056C21.4393 7.35681 22.0638 9.03523 22.0042 10.76C22.0176 12.4805 21.3482 14.1361 20.1429 15.3639C18.9376 16.5917 17.2947 17.2915 15.5742 17.31ZM19.944 16.9077C18.7586 18.019 17.199 18.6444 15.5742 18.66H8.43424C6.80292 18.6566 5.2333 18.0361 4.04059 16.9231C2.84788 15.8102 2.1204 14.2872 2.00424 12.66V13.42C1.98556 15.1449 2.65223 16.8067 3.85783 18.0404C5.06343 19.2741 6.70939 19.9789 8.43424 20H15.5742C17.2956 19.971 18.9354 19.2614 20.1348 18.0264C21.3343 16.7913 21.9956 15.1315 21.9742 13.41V12.66C21.854 14.2804 21.1293 15.7964 19.944 16.9077Z"})})));N.displayName="MultiplaySVG";const c=k.m(N);var P;!function(W){W.Game="close-button",W.Lobby="multiplay-lobby-button"}(P||(P={}));const S=({type:W="secondary",...n})=>h.jsx(q.g,{type:W,iconComponent:h.jsx(c,{}),...n})},113364:(W,n,I)=>{I.d(n,{p:()=>$});var h=I(64922),q=I(32991);const $=()=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:q.A.svg,viewBox:"0 0 80 80","data-type":"emptyRoadItem",children:h.jsx("svg",{height:"100",width:"100",children:h.jsx("circle",{cx:"40",cy:"40",r:"8",fill:"rgba(255,255,255,0.15)"})})})},470800:(W,n,I)=>{I.d(n,{V:()=>N});var h=I(64922),q=I(266600),$=I(377810),k=I(239956),_=I(965460);const N=$.memo((({scorecardTheme:W,columnCount:n,rowCount:I,isInterlacedMode:q,gridIcons:$,IconShapeComponent:N,defaultIconId:c,scorecardThemesOverrides:P,skipFirstLastLines:S})=>{const g=_.Aw(W,P);return h.jsx(k.gf,{columnCount:n*(q?2:1),rowCount:I*(q?2:1),icons:$,isInterlacedMode:q,strokeWidth:q?.1:.05,...g,IconShapeComponent:N,defaultIconId:c,skipFirstLastLines:S})}),q.A)},782437:(W,n,I)=>{I.d(n,{G:()=>q});var h=I(64922);const q=I(377810).memo((({rowCount:W,columnCount:n,isInterlacedMode:I,strokeWidth:q,stroke:$,redesigned:k,skipFirstLastLines:_})=>{const N=[],c=q/2;for(let P=0;P<=W;P++){if(I&&P%2!=0)continue;const S=0===P,g=P===W;if((k||_)&&(S||g))continue;const B=S?c:g?-c:0;N.push(h.jsx("line",{x1:0,x2:n,y1:P+B,y2:P+B,stroke:$,style:{strokeWidth:q}},`h-${P}`))}for(let P=0;P<=n;P++){if(I&&P%2!=0)continue;const S=0===P,g=P===n;if((k||_)&&(S||g))continue;const B=S?c:g?-c:0;N.push(h.jsx("line",{x1:P+B,x2:P+B,y1:0,y2:W,stroke:$,style:{strokeWidth:q}},`v-${P}`))}return h.jsx(h.Fragment,{children:N})}))},239956:(W,n,I)=>{I.d(n,{gf:()=>E});var h=I(64922),q=I(699695),$=I(929468),k=I(377810);const _=k.memo((({column:W,row:n,iconId:I})=>h.jsx("use",{xlinkHref:`#${I}`,x:W,y:n})),((W,n)=>W.column===n.column&&W.row===n.row&&W.iconId===n.iconId)),N=k.memo((({rowCount:W,columnCount:n,IconShapeComponent:I,icons:q,defaultIconId:N})=>{const c=k.useRef(N||$.A()),P=[];for(let I=0;I<W;I++)for(let W=0;W<n;W++)q.some((n=>n.x===W&&n.y===I))||P.push(h.jsx(_,{column:W,row:I,iconId:c.current},`default-icon-usage-${W}-${I}-${c.current}`));return h.jsxs(h.Fragment,{children:[h.jsx("defs",{children:h.jsx("svg",{id:`${c.current}`,width:1,height:1,children:h.jsx(I,{})},`default-icon-shape-${c.current}`)}),P]})}),((W,n)=>W.rowCount===n.rowCount&&W.columnCount===n.columnCount&&W.icons.length===n.icons.length&&W.defaultIconId===n.defaultIconId));var c=I(782437);const P="svg--eb430",S="fitToWidth--3e2d4",g="fitToHeight--761b3";var B;!function(W){W[W.Height=0]="Height",W[W.Width=1]="Width"}(B||(B={}));const E=({fill:W="transparent",stroke:n="#000000",icons:I=[],strokeWidth:$=0,translate:k,size:_=1,isInterlacedMode:E=!1,skipFirstLastLines:u=!1,fitTo:Y,onClick:f,columnCount:r,rowCount:K,IconShapeComponent:t,defaultIconId:X,redesigned:L})=>{const O=r,Z=K,d=`0 0 ${O} ${Z}`,m=null!=k?k:$,R=[];for(const W of I){const{x:n,y:I,jsx:q,key:k=`icon-${W.x}-${W.y}`}=W;R.push(h.jsx("svg",{width:_-$,height:_-$,x:n-(_-1)+m,y:I-(_-1)+m,"data-type":"coordinates","data-x":n,"data-y":I,children:q},k))}const e=q.A(P,{[S]:Y===B.Width,[g]:Y===B.Height}),j=I.filter((W=>!W.withDefaultIcon));return h.jsxs("svg",{className:e,viewBox:d,onClick:f,children:[h.jsx("rect",{x:"0",y:"0",rx:L?"0.3":void 0,fill:W,width:O,height:Z,stroke:L?n:void 0,strokeWidth:L?$:void 0}),t&&h.jsx(N,{rowCount:K,columnCount:r,IconShapeComponent:t,icons:j,defaultIconId:X}),$&&h.jsx(c.G,{isInterlacedMode:E,skipFirstLastLines:u,rowCount:K,columnCount:r,strokeWidth:$,stroke:n,redesigned:L}),R]})}},786532:(W,n,I)=>{I.d(n,{gf:()=>h.gf});var h=I(239956)},106944:(W,n,I)=>{I.d(n,{Aw:()=>$.Aw,LH:()=>$.LH,V4:()=>q.V,a:()=>$.a,gf:()=>_.gf,p3:()=>h.p,tb:()=>k.t});var h=I(113364),q=I(470800),$=I(965460),k=I(471065),_=I(786532)},965460:(W,n,I)=>{var h;I.d(n,{Aw:()=>$,LH:()=>q,a:()=>h}),function(W){W.WhiteSolid="WhiteSolid",W.WhiteTransparent="WhiteTransparent",W.BlackTransparent="BlackTransparent",W.Transparent="Transparent",W.BlackDot="BlackDot"}(h||(h={}));const q={[h.WhiteSolid]:{fill:"#ffffff",stroke:"rgba(167, 169, 172, 0.5)",symbolColor:"#ffffff",background:"rgba(255, 255, 255, 0.97)"},[h.WhiteTransparent]:{fill:"transparent",stroke:"transparent",strokeWidth:0,symbolColor:"#ffffff"},[h.BlackTransparent]:{fill:"#1A1A1A",stroke:"#4A4A4A",symbolColor:"#ffffff"},[h.Transparent]:{fill:"#1A1A1A",stroke:"#4A4A4A",symbolColor:"#ffffff",predictionBackground:"transparent"},[h.BlackDot]:{fill:"transparent",stroke:"transparent",strokeWidth:0,symbolColor:"#ffffff",predictionBackground:"transparent",emptyIconColor:"rgba(255,255,255,0.15)",background:"rgba(255, 255, 255, 0.05)"}};function $(W,n={}){const I={...q,...n};return I[W]||I[h.WhiteSolid]}},471065:(W,n,I)=>{var h;I.d(n,{t:()=>h}),function(W){W.Bead="Bead",W.Big="Big",W.BigEye="BigEye",W.Small="Small",W.Cockroach="Cockroach"}(h||(h={}))},633918:(W,n,I)=>{I.d(n,{A:()=>q});var h=I(111100);const q=function(W){return"function"==typeof W?W:h.A}},639972:(W,n,I)=>{I.d(n,{A:()=>h});const h=function(W){return W&&W.length?W[0]:void 0}},447833:(W,n,I)=>{I.d(n,{A:()=>q});var h=I(609835);const q=function(W){return h.A(W)&&W!=+W}},504642:(W,n,I)=>{I.d(n,{A:()=>_});var h=I(192028),q=I(633918),$=I(510405),k=Math.min;const _=function(W,n){if((W=$.A(W))<1||W>9007199254740991)return[];var I=4294967295,_=k(W,4294967295);n=q.A(n),W-=4294967295;for(var N=h.A(_,n);++I<W;)n(I);return N}},929468:(W,n,I)=>{I.d(n,{A:()=>$});var h=I(957842),q=0;const $=function(W){var n=++q;return h.A(W)+n}}},_={};function N(W){var n=_[W];if(void 0!==n)return n.exports;var I=_[W]={id:W,loaded:!1,exports:{}};return k[W].call(I.exports,I,I.exports,N),I.loaded=!0,I.exports}N.m=k,W=[],N.O=(n,I,h,q)=>{if(!I){var $=1/0;for(P=0;P<W.length;P++){for(var[I,h,q]=W[P],k=!0,_=0;_<I.length;_++)(!1&q||$>=q)&&Object.keys(N.O).every((W=>N.O[W](I[_])))?I.splice(_--,1):(k=!1,q<$&&($=q));if(k){W.splice(P--,1);var c=h();void 0!==c&&(n=c)}}return n}q=q||0;for(var P=W.length;P>0&&W[P-1][2]>q;P--)W[P]=W[P-1];W[P]=[I,h,q]},N.n=W=>{var n=W&&W.__esModule?()=>W.default:()=>W;return N.d(n,{a:n}),n},I=Object.getPrototypeOf?W=>Object.getPrototypeOf(W):W=>W.__proto__,N.t=function(W,h){if(1&h&&(W=this(W)),8&h)return W;if("object"==typeof W&&W){if(4&h&&W.__esModule)return W;if(16&h&&"function"==typeof W.then)return W}var q=Object.create(null);N.r(q);var $={};n=n||[null,I({}),I([]),I(I)];for(var k=2&h&&W;"object"==typeof k&&!~n.indexOf(k);k=I(k))Object.getOwnPropertyNames(k).forEach((n=>$[n]=()=>W[n]));return $.default=()=>W,N.d(q,$),q},N.d=(W,n)=>{for(var I in n)N.o(n,I)&&!N.o(W,I)&&Object.defineProperty(W,I,{enumerable:!0,get:n[I]})},N.f={},N.e=W=>Promise.all(Object.keys(N.f).reduce(((n,I)=>(N.f[I](W,n),n)),[])),N.u=W=>"js/"+({3474:"evo-promotions.SpinGiftsFrame",3863:"testTools",5463:"help.baccarat",17474:"evo-game.mobileChat",22421:"testTools.PixiDevToolsPlugin",24451:"baccarat.live.debug",24622:"evo-promotions.SpinGiftsWheelAnimation",30164:"game-client-history-round-info",36302:"evo-promotions.SpinGiftsCampaignRules",39340:"history.roundView",44806:"gameTestToolsPlugins",47290:"evo-promotions.SpinGiftsTermsConditions",50967:"help.common",54504:"evo-promotions.cashGifts",59760:"evo-game.chat",66703:"gameTestToolsSafeAreaPlugin",66885:"native-utilities",73375:"evo-promotions.spinGifts",73460:"evo-promotions.giftsWheel",74695:"help.baccarat.v2",77821:"evo-game.emojiMenu",80616:"video-lib-local",85687:"testTools.why-did-you-render"}[W]||W)+"."+{3474:"1a89cdcf",3863:"c68406f1",5463:"52825036",10306:"a97cff13",14291:"2f77c6ae",17474:"36703dd7",22421:"0fea869a",24451:"33cf75d2",24622:"c19aa584",27672:"21b8bdb0",30164:"81c32c92",32184:"a21bca64",36302:"63c3f631",37927:"b03e4e3d",39340:"87393490",42447:"0fe47cec",44806:"0741de9d",45444:"ef538133",47290:"25d266d1",50967:"2b6414a9",54504:"de8d33cf",59760:"c5c3f75e",66703:"d22f8b42",66885:"cf7c7b01",73375:"74edf8f6",73460:"b312a388",74695:"d63bc130",77821:"cadc9005",80616:"10095eb7",85687:"8dab9d33"}[W]+".js",N.miniCssF=W=>3863===W?"styles/testtools.c68406f1.css":36302===W?"styles/evopromoti.spingiftsc.63c3f631.css":47290===W?"styles/evopromoti.spingiftst.25d266d1.css":50967===W?"styles/help.common.2b6414a9.css":30164===W?"styles/gameclient.81c32c92.css":39340===W?"styles/history.roundview.87393490.css":17474===W?"styles/evogame.mobilechat.36703dd7.css":59760===W?"styles/evogame.chat.c5c3f75e.css":54504===W?"styles/evopromoti.cashgifts.de8d33cf.css":73375===W?"styles/evopromoti.spingifts.74edf8f6.css":77821===W?"styles/evogame.emojimenu.cadc9005.css":44806===W?"styles/gametestto.0741de9d.css":74695===W?"styles/help.baccarat.v2.d63bc130.css":5463===W?"styles/help.baccarat.52825036.css":24451===W?"styles/baccarat.live.debug.33cf75d2.css":73460===W?"styles/evopromoti.giftswheel.b312a388.css":24622===W?"styles/evopromoti.spingiftsw.c19aa584.css":3474===W?"styles/evopromoti.spingiftsf.1a89cdcf.css":22421===W?"styles/testtools.pixidevtoo.0fea869a.css":66703===W?"styles/gametestto.d22f8b42.css":void 0,N.hmd=W=>((W=Object.create(W)).children||(W.children=[]),Object.defineProperty(W,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+W.id)}}),W),N.o=(W,n)=>Object.prototype.hasOwnProperty.call(W,n),h={},N.l=(W,n,I,q)=>{if(h[W])h[W].push(n);else{var $,k;if(void 0!==I)for(var _=document.getElementsByTagName("script"),c=0;c<_.length;c++){var P=_[c];if(P.getAttribute("src")==W||P.getAttribute("data-webpack")=="/frontend/evo/r2/:"+I){$=P;break}}$||(k=!0,($=document.createElement("script")).charset="utf-8",$.timeout=NaN,N.nc&&$.setAttribute("nonce",N.nc),$.setAttribute("data-webpack","/frontend/evo/r2/:"+I),$.src=W),h[W]=[n];var S=(n,I)=>{$.onerror=$.onload=null,clearTimeout(g);var q=h[W];if(delete h[W],$.parentNode&&$.parentNode.removeChild($),q&&q.forEach((W=>W(I))),n)return n(I)},g=setTimeout(S.bind(null,void 0,{type:"timeout",target:$}),window.EVO_CDN?15e3:6e4);$.onerror=S.bind(null,$.onerror),$.onload=S.bind(null,$.onload),k&&document.head.appendChild($)}},N.r=W=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(W,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(W,"__esModule",{value:!0})},N.nmd=W=>(W.paths=[],W.children||(W.children=[]),W),N.j=72845,N.p=(globalThis.EVO_CDN||"")+"/frontend/evo/r2/",q=W=>new Promise(((n,I)=>{var h=N.miniCssF(W),q=N.p+h;if(((W,n)=>{for(var I=document.getElementsByTagName("link"),h=0;h<I.length;h++){var q=(k=I[h]).getAttribute("data-href")||k.getAttribute("href");if("stylesheet"===k.rel&&(q===W||q===n))return k}var $=document.getElementsByTagName("style");for(h=0;h<$.length;h++){var k;if((q=(k=$[h]).getAttribute("data-href"))===W||q===n)return k}})(h,q))return n();((W,n,I,h)=>{var q=document.createElement("link");q.setAttribute("data-sandbox","ignore"),q.rel="stylesheet",q.type="text/css",q.onerror=q.onload=$=>{if(q.onerror=q.onload=null,"load"===$.type)I();else{var k=$&&("load"===$.type?"missing":$.type),_=$&&$.target&&$.target.href||n,N=new Error("Loading CSS chunk "+W+" failed.\n("+_+")");N.code="CSS_CHUNK_LOAD_FAILED",N.type=k,N.request=_,q.parentNode.removeChild(q),h(N)}},q.href=n,document.head.appendChild(q)})(W,q,n,I)})),$={72845:0},N.f.miniCss=(W,n)=>{$[W]?n.push($[W]):0!==$[W]&&{3474:1,3863:1,5463:1,17474:1,22421:1,24451:1,24622:1,30164:1,36302:1,39340:1,44806:1,47290:1,50967:1,54504:1,59760:1,66703:1,73375:1,73460:1,74695:1,77821:1}[W]&&n.push($[W]=q(W).then((()=>{$[W]=0}),(n=>{throw delete $[W],n})))},(()=>{var W={72845:0};N.f.j=(n,I)=>{var h=N.o(W,n)?W[n]:void 0;if(0!==h)if(h)I.push(h[2]);else{var q=new Promise(((I,q)=>h=W[n]=[I,q]));I.push(h[2]=q);var $=N.p+N.u(n),k=new Error;N.l($,(I=>{if(N.o(W,n)&&(0!==(h=W[n])&&(W[n]=void 0),h)){var q=I&&("load"===I.type?"missing":I.type),$=I&&I.target&&I.target.src;k.message="Loading chunk "+n+" failed.\n("+q+": "+$+")",k.name="ChunkLoadError",k.type=q,k.request=$,h[1](k)}}),"chunk-"+n,n)}},N.O.j=n=>0===W[n];var n=(n,I)=>{var h,q,[$,k,_]=I,c=0;if($.some((n=>0!==W[n]))){for(h in k)N.o(k,h)&&(N.m[h]=k[h]);if(_)var P=_(N)}for(n&&n(I);c<$.length;c++)q=$[c],N.o(W,q)&&W[q]&&W[q][0](),W[q]=0;return N.O(P)},I=self.webpackChunk_frontend_evo_r2_=self.webpackChunk_frontend_evo_r2_||[];I.forEach(n.bind(null,0)),I.push=n.bind(null,I.push.bind(I))})(),N.O(void 0,[35375,79949],(()=>N(515924)));var c=N.O(void 0,[35375,79949],(()=>N(92251)));c=N.O(c)})();
//# sourceMappingURL=https://sourcemaps.egcdn.com/frontend/evo/r2/js/baccarat.xtreme.2b9039ff.js.map